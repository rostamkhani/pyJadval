<html lang="en" Dev="Aref Rostamkhani" >

<head>
  <meta name="Country" content="IRAN" >
  <meta name='Classification' content='Data Analytics'>
  <meta name='author' content='Aref Rostamkhani, aref.rostamkhani@gmail.com'>
  <meta name='designer' content='Aref'>
  <meta name='reply-to' content='aref.rostamkhani@gmail.com'>
  <meta name='owner' content='Aref Rostamkhani'>
  <meta name='url' content='http://github.com/rostamkhani'>

  <style>
    @keyframes ag-shake-left-to-right {
      0% {
        padding-left: 6px;
        padding-right: 2px
      }

      to {
        padding-left: 2px;
        padding-right: 6px
      }
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg)
      }

      to {
        transform: rotate(360deg)
      }
    }

    .ag-icon {
      font-family: var(--ag-icon-font-family);
      font-weight: var(--ag-icon-font-weight);
      color: var(--ag-icon-font-color);
      font-size: var(--ag-icon-size);
      line-height: var(--ag-icon-size);
      font-style: normal;
      font-variant: normal;
      text-transform: none;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      width: var(--ag-icon-size);
      height: var(--ag-icon-size);
      position: relative
    }

    .ag-icon::before {
      content: ""
    }

    .ag-icon::after {
      background: var(--ag-icon-image, none) center/contain no-repeat;
      display: var(--ag-icon-image-display);
      opacity: var(--ag-icon-image-opacity, 0.9);
      position: absolute;
      inset: 0;
      content: ""
    }

    .ag-icon-aggregation {
      font-family: var(--ag-icon-font-family-aggregation, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-aggregation, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-aggregation, var(--ag-icon-font-color))
    }

    .ag-icon-aggregation::before {
      content: var(--ag-icon-font-code-aggregation, "\f101");
      display: var(--ag-icon-font-display-aggregation, var(--ag-icon-font-display))
    }

    .ag-icon-aggregation::after {
      background-image: var(--ag-icon-image-aggregation, var(--ag-icon-image));
      display: var(--ag-icon-image-display-aggregation, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-aggregation, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-arrows {
      font-family: var(--ag-icon-font-family-arrows, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-arrows, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-arrows, var(--ag-icon-font-color))
    }

    .ag-icon-arrows::before {
      content: var(--ag-icon-font-code-arrows, "\f102");
      display: var(--ag-icon-font-display-arrows, var(--ag-icon-font-display))
    }

    .ag-icon-arrows::after {
      background-image: var(--ag-icon-image-arrows, var(--ag-icon-image));
      display: var(--ag-icon-image-display-arrows, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-arrows, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-asc {
      font-family: var(--ag-icon-font-family-asc, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-asc, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-asc, var(--ag-icon-font-color))
    }

    .ag-icon-asc::before {
      content: var(--ag-icon-font-code-asc, "\f103");
      display: var(--ag-icon-font-display-asc, var(--ag-icon-font-display))
    }

    .ag-icon-asc::after {
      background-image: var(--ag-icon-image-asc, var(--ag-icon-image));
      display: var(--ag-icon-image-display-asc, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-asc, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-cancel {
      font-family: var(--ag-icon-font-family-cancel, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-cancel, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-cancel, var(--ag-icon-font-color))
    }

    .ag-icon-cancel::before {
      content: var(--ag-icon-font-code-cancel, "\f104");
      display: var(--ag-icon-font-display-cancel, var(--ag-icon-font-display))
    }

    .ag-icon-cancel::after {
      background-image: var(--ag-icon-image-cancel, var(--ag-icon-image));
      display: var(--ag-icon-image-display-cancel, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-cancel, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-chart {
      font-family: var(--ag-icon-font-family-chart, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-chart, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-chart, var(--ag-icon-font-color))
    }

    .ag-icon-chart::before {
      content: var(--ag-icon-font-code-chart, "\f105");
      display: var(--ag-icon-font-display-chart, var(--ag-icon-font-display))
    }

    .ag-icon-chart::after {
      background-image: var(--ag-icon-image-chart, var(--ag-icon-image));
      display: var(--ag-icon-image-display-chart, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-chart, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-checkbox-checked {
      font-family: var(--ag-icon-font-family-checkbox-checked, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-checkbox-checked, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-checkbox-checked, var(--ag-icon-font-color))
    }

    .ag-icon-checkbox-checked::before {
      content: var(--ag-icon-font-code-checkbox-checked, "\f106");
      display: var(--ag-icon-font-display-checkbox-checked, var(--ag-icon-font-display))
    }

    .ag-icon-checkbox-checked::after {
      background-image: var(--ag-icon-image-checkbox-checked, var(--ag-icon-image));
      display: var(--ag-icon-image-display-checkbox-checked, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-checkbox-checked, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-checkbox-indeterminate {
      font-family: var(--ag-icon-font-family-checkbox-indeterminate, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-checkbox-indeterminate, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-checkbox-indeterminate, var(--ag-icon-font-color))
    }

    .ag-icon-checkbox-indeterminate::before {
      content: var(--ag-icon-font-code-checkbox-indeterminate, "\f107");
      display: var(--ag-icon-font-display-checkbox-indeterminate, var(--ag-icon-font-display))
    }

    .ag-icon-checkbox-indeterminate::after {
      background-image: var(--ag-icon-image-checkbox-indeterminate, var(--ag-icon-image));
      display: var(--ag-icon-image-display-checkbox-indeterminate, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-checkbox-indeterminate, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-checkbox-unchecked {
      font-family: var(--ag-icon-font-family-checkbox-unchecked, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-checkbox-unchecked, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-checkbox-unchecked, var(--ag-icon-font-color))
    }

    .ag-icon-checkbox-unchecked::before {
      content: var(--ag-icon-font-code-checkbox-unchecked, "\f108");
      display: var(--ag-icon-font-display-checkbox-unchecked, var(--ag-icon-font-display))
    }

    .ag-icon-checkbox-unchecked::after {
      background-image: var(--ag-icon-image-checkbox-unchecked, var(--ag-icon-image));
      display: var(--ag-icon-image-display-checkbox-unchecked, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-checkbox-unchecked, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-color-picker {
      font-family: var(--ag-icon-font-family-color-picker, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-color-picker, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-color-picker, var(--ag-icon-font-color))
    }

    .ag-icon-color-picker::before {
      content: var(--ag-icon-font-code-color-picker, "\f109");
      display: var(--ag-icon-font-display-color-picker, var(--ag-icon-font-display))
    }

    .ag-icon-color-picker::after {
      background-image: var(--ag-icon-image-color-picker, var(--ag-icon-image));
      display: var(--ag-icon-image-display-color-picker, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-color-picker, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-columns {
      font-family: var(--ag-icon-font-family-columns, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-columns, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-columns, var(--ag-icon-font-color))
    }

    .ag-icon-columns::before {
      content: var(--ag-icon-font-code-columns, "\f10a");
      display: var(--ag-icon-font-display-columns, var(--ag-icon-font-display))
    }

    .ag-icon-columns::after {
      background-image: var(--ag-icon-image-columns, var(--ag-icon-image));
      display: var(--ag-icon-image-display-columns, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-columns, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-contracted {
      font-family: var(--ag-icon-font-family-contracted, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-contracted, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-contracted, var(--ag-icon-font-color))
    }

    .ag-icon-contracted::before {
      content: var(--ag-icon-font-code-contracted, "\f10b");
      display: var(--ag-icon-font-display-contracted, var(--ag-icon-font-display))
    }

    .ag-icon-contracted::after {
      background-image: var(--ag-icon-image-contracted, var(--ag-icon-image));
      display: var(--ag-icon-image-display-contracted, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-contracted, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-copy {
      font-family: var(--ag-icon-font-family-copy, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-copy, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-copy, var(--ag-icon-font-color))
    }

    .ag-icon-copy::before {
      content: var(--ag-icon-font-code-copy, "\f10c");
      display: var(--ag-icon-font-display-copy, var(--ag-icon-font-display))
    }

    .ag-icon-copy::after {
      background-image: var(--ag-icon-image-copy, var(--ag-icon-image));
      display: var(--ag-icon-image-display-copy, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-copy, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-cross {
      font-family: var(--ag-icon-font-family-cross, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-cross, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-cross, var(--ag-icon-font-color))
    }

    .ag-icon-cross::before {
      content: var(--ag-icon-font-code-cross, "\f10d");
      display: var(--ag-icon-font-display-cross, var(--ag-icon-font-display))
    }

    .ag-icon-cross::after {
      background-image: var(--ag-icon-image-cross, var(--ag-icon-image));
      display: var(--ag-icon-image-display-cross, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-cross, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-csv {
      font-family: var(--ag-icon-font-family-csv, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-csv, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-csv, var(--ag-icon-font-color))
    }

    .ag-icon-csv::before {
      content: var(--ag-icon-font-code-csv, "\f10e");
      display: var(--ag-icon-font-display-csv, var(--ag-icon-font-display))
    }

    .ag-icon-csv::after {
      background-image: var(--ag-icon-image-csv, var(--ag-icon-image));
      display: var(--ag-icon-image-display-csv, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-csv, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-cut {
      font-family: var(--ag-icon-font-family-cut, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-cut, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-cut, var(--ag-icon-font-color))
    }

    .ag-icon-cut::before {
      content: var(--ag-icon-font-code-cut, "\f10f");
      display: var(--ag-icon-font-display-cut, var(--ag-icon-font-display))
    }

    .ag-icon-cut::after {
      background-image: var(--ag-icon-image-cut, var(--ag-icon-image));
      display: var(--ag-icon-image-display-cut, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-cut, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-desc {
      font-family: var(--ag-icon-font-family-desc, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-desc, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-desc, var(--ag-icon-font-color))
    }

    .ag-icon-desc::before {
      content: var(--ag-icon-font-code-desc, "\f110");
      display: var(--ag-icon-font-display-desc, var(--ag-icon-font-display))
    }

    .ag-icon-desc::after {
      background-image: var(--ag-icon-image-desc, var(--ag-icon-image));
      display: var(--ag-icon-image-display-desc, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-desc, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-excel {
      font-family: var(--ag-icon-font-family-excel, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-excel, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-excel, var(--ag-icon-font-color))
    }

    .ag-icon-excel::before {
      content: var(--ag-icon-font-code-excel, "\f111");
      display: var(--ag-icon-font-display-excel, var(--ag-icon-font-display))
    }

    .ag-icon-excel::after {
      background-image: var(--ag-icon-image-excel, var(--ag-icon-image));
      display: var(--ag-icon-image-display-excel, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-excel, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-expanded {
      font-family: var(--ag-icon-font-family-expanded, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-expanded, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-expanded, var(--ag-icon-font-color))
    }

    .ag-icon-expanded::before {
      content: var(--ag-icon-font-code-expanded, "\f112");
      display: var(--ag-icon-font-display-expanded, var(--ag-icon-font-display))
    }

    .ag-icon-expanded::after {
      background-image: var(--ag-icon-image-expanded, var(--ag-icon-image));
      display: var(--ag-icon-image-display-expanded, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-expanded, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-eye-slash {
      font-family: var(--ag-icon-font-family-eye-slash, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-eye-slash, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-eye-slash, var(--ag-icon-font-color))
    }

    .ag-icon-eye-slash::before {
      content: var(--ag-icon-font-code-eye-slash, "\f113");
      display: var(--ag-icon-font-display-eye-slash, var(--ag-icon-font-display))
    }

    .ag-icon-eye-slash::after {
      background-image: var(--ag-icon-image-eye-slash, var(--ag-icon-image));
      display: var(--ag-icon-image-display-eye-slash, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-eye-slash, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-eye {
      font-family: var(--ag-icon-font-family-eye, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-eye, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-eye, var(--ag-icon-font-color))
    }

    .ag-icon-eye::before {
      content: var(--ag-icon-font-code-eye, "\f114");
      display: var(--ag-icon-font-display-eye, var(--ag-icon-font-display))
    }

    .ag-icon-eye::after {
      background-image: var(--ag-icon-image-eye, var(--ag-icon-image));
      display: var(--ag-icon-image-display-eye, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-eye, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-filter {
      font-family: var(--ag-icon-font-family-filter, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-filter, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-filter, var(--ag-icon-font-color))
    }

    .ag-icon-filter::before {
      content: var(--ag-icon-font-code-filter, "\f115");
      display: var(--ag-icon-font-display-filter, var(--ag-icon-font-display))
    }

    .ag-icon-filter::after {
      background-image: var(--ag-icon-image-filter, var(--ag-icon-image));
      display: var(--ag-icon-image-display-filter, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-filter, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-first {
      font-family: var(--ag-icon-font-family-first, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-first, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-first, var(--ag-icon-font-color))
    }

    .ag-icon-first::before {
      content: var(--ag-icon-font-code-first, "\f116");
      display: var(--ag-icon-font-display-first, var(--ag-icon-font-display))
    }

    .ag-icon-first::after {
      background-image: var(--ag-icon-image-first, var(--ag-icon-image));
      display: var(--ag-icon-image-display-first, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-first, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-grip {
      font-family: var(--ag-icon-font-family-grip, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-grip, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-grip, var(--ag-icon-font-color))
    }

    .ag-icon-grip::before {
      content: var(--ag-icon-font-code-grip, "\f117");
      display: var(--ag-icon-font-display-grip, var(--ag-icon-font-display))
    }

    .ag-icon-grip::after {
      background-image: var(--ag-icon-image-grip, var(--ag-icon-image));
      display: var(--ag-icon-image-display-grip, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-grip, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-group {
      font-family: var(--ag-icon-font-family-group, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-group, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-group, var(--ag-icon-font-color))
    }

    .ag-icon-group::before {
      content: var(--ag-icon-font-code-group, "\f118");
      display: var(--ag-icon-font-display-group, var(--ag-icon-font-display))
    }

    .ag-icon-group::after {
      background-image: var(--ag-icon-image-group, var(--ag-icon-image));
      display: var(--ag-icon-image-display-group, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-group, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-last {
      font-family: var(--ag-icon-font-family-last, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-last, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-last, var(--ag-icon-font-color))
    }

    .ag-icon-last::before {
      content: var(--ag-icon-font-code-last, "\f119");
      display: var(--ag-icon-font-display-last, var(--ag-icon-font-display))
    }

    .ag-icon-last::after {
      background-image: var(--ag-icon-image-last, var(--ag-icon-image));
      display: var(--ag-icon-image-display-last, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-last, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-left {
      font-family: var(--ag-icon-font-family-left, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-left, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-left, var(--ag-icon-font-color))
    }

    .ag-icon-left::before {
      content: var(--ag-icon-font-code-left, "\f11a");
      display: var(--ag-icon-font-display-left, var(--ag-icon-font-display))
    }

    .ag-icon-left::after {
      background-image: var(--ag-icon-image-left, var(--ag-icon-image));
      display: var(--ag-icon-image-display-left, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-left, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-linked {
      font-family: var(--ag-icon-font-family-linked, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-linked, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-linked, var(--ag-icon-font-color))
    }

    .ag-icon-linked::before {
      content: var(--ag-icon-font-code-linked, "\f11b");
      display: var(--ag-icon-font-display-linked, var(--ag-icon-font-display))
    }

    .ag-icon-linked::after {
      background-image: var(--ag-icon-image-linked, var(--ag-icon-image));
      display: var(--ag-icon-image-display-linked, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-linked, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-loading {
      font-family: var(--ag-icon-font-family-loading, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-loading, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-loading, var(--ag-icon-font-color))
    }

    .ag-icon-loading::before {
      content: var(--ag-icon-font-code-loading, "\f11c");
      display: var(--ag-icon-font-display-loading, var(--ag-icon-font-display))
    }

    .ag-icon-loading::after {
      background-image: var(--ag-icon-image-loading, var(--ag-icon-image));
      display: var(--ag-icon-image-display-loading, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-loading, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-maximize {
      font-family: var(--ag-icon-font-family-maximize, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-maximize, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-maximize, var(--ag-icon-font-color))
    }

    .ag-icon-maximize::before {
      content: var(--ag-icon-font-code-maximize, "\f11d");
      display: var(--ag-icon-font-display-maximize, var(--ag-icon-font-display))
    }

    .ag-icon-maximize::after {
      background-image: var(--ag-icon-image-maximize, var(--ag-icon-image));
      display: var(--ag-icon-image-display-maximize, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-maximize, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-menu {
      font-family: var(--ag-icon-font-family-menu, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-menu, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-menu, var(--ag-icon-font-color))
    }

    .ag-icon-menu::before {
      content: var(--ag-icon-font-code-menu, "\f11e");
      display: var(--ag-icon-font-display-menu, var(--ag-icon-font-display))
    }

    .ag-icon-menu::after {
      background-image: var(--ag-icon-image-menu, var(--ag-icon-image));
      display: var(--ag-icon-image-display-menu, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-menu, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-minimize {
      font-family: var(--ag-icon-font-family-minimize, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-minimize, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-minimize, var(--ag-icon-font-color))
    }

    .ag-icon-minimize::before {
      content: var(--ag-icon-font-code-minimize, "\f11f");
      display: var(--ag-icon-font-display-minimize, var(--ag-icon-font-display))
    }

    .ag-icon-minimize::after {
      background-image: var(--ag-icon-image-minimize, var(--ag-icon-image));
      display: var(--ag-icon-image-display-minimize, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-minimize, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-next {
      font-family: var(--ag-icon-font-family-next, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-next, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-next, var(--ag-icon-font-color))
    }

    .ag-icon-next::before {
      content: var(--ag-icon-font-code-next, "\f120");
      display: var(--ag-icon-font-display-next, var(--ag-icon-font-display))
    }

    .ag-icon-next::after {
      background-image: var(--ag-icon-image-next, var(--ag-icon-image));
      display: var(--ag-icon-image-display-next, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-next, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-none {
      font-family: var(--ag-icon-font-family-none, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-none, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-none, var(--ag-icon-font-color))
    }

    .ag-icon-none::before {
      content: var(--ag-icon-font-code-none, "\f121");
      display: var(--ag-icon-font-display-none, var(--ag-icon-font-display))
    }

    .ag-icon-none::after {
      background-image: var(--ag-icon-image-none, var(--ag-icon-image));
      display: var(--ag-icon-image-display-none, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-none, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-not-allowed {
      font-family: var(--ag-icon-font-family-not-allowed, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-not-allowed, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-not-allowed, var(--ag-icon-font-color))
    }

    .ag-icon-not-allowed::before {
      content: var(--ag-icon-font-code-not-allowed, "\f122");
      display: var(--ag-icon-font-display-not-allowed, var(--ag-icon-font-display))
    }

    .ag-icon-not-allowed::after {
      background-image: var(--ag-icon-image-not-allowed, var(--ag-icon-image));
      display: var(--ag-icon-image-display-not-allowed, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-not-allowed, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-paste {
      font-family: var(--ag-icon-font-family-paste, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-paste, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-paste, var(--ag-icon-font-color))
    }

    .ag-icon-paste::before {
      content: var(--ag-icon-font-code-paste, "\f123");
      display: var(--ag-icon-font-display-paste, var(--ag-icon-font-display))
    }

    .ag-icon-paste::after {
      background-image: var(--ag-icon-image-paste, var(--ag-icon-image));
      display: var(--ag-icon-image-display-paste, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-paste, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-pin {
      font-family: var(--ag-icon-font-family-pin, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-pin, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-pin, var(--ag-icon-font-color))
    }

    .ag-icon-pin::before {
      content: var(--ag-icon-font-code-pin, "\f124");
      display: var(--ag-icon-font-display-pin, var(--ag-icon-font-display))
    }

    .ag-icon-pin::after {
      background-image: var(--ag-icon-image-pin, var(--ag-icon-image));
      display: var(--ag-icon-image-display-pin, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-pin, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-pivot {
      font-family: var(--ag-icon-font-family-pivot, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-pivot, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-pivot, var(--ag-icon-font-color))
    }

    .ag-icon-pivot::before {
      content: var(--ag-icon-font-code-pivot, "\f125");
      display: var(--ag-icon-font-display-pivot, var(--ag-icon-font-display))
    }

    .ag-icon-pivot::after {
      background-image: var(--ag-icon-image-pivot, var(--ag-icon-image));
      display: var(--ag-icon-image-display-pivot, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-pivot, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-previous {
      font-family: var(--ag-icon-font-family-previous, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-previous, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-previous, var(--ag-icon-font-color))
    }

    .ag-icon-previous::before {
      content: var(--ag-icon-font-code-previous, "\f126");
      display: var(--ag-icon-font-display-previous, var(--ag-icon-font-display))
    }

    .ag-icon-previous::after {
      background-image: var(--ag-icon-image-previous, var(--ag-icon-image));
      display: var(--ag-icon-image-display-previous, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-previous, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-radio-button-off {
      font-family: var(--ag-icon-font-family-radio-button-off, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-radio-button-off, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-radio-button-off, var(--ag-icon-font-color))
    }

    .ag-icon-radio-button-off::before {
      content: var(--ag-icon-font-code-radio-button-off, "\f127");
      display: var(--ag-icon-font-display-radio-button-off, var(--ag-icon-font-display))
    }

    .ag-icon-radio-button-off::after {
      background-image: var(--ag-icon-image-radio-button-off, var(--ag-icon-image));
      display: var(--ag-icon-image-display-radio-button-off, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-radio-button-off, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-radio-button-on {
      font-family: var(--ag-icon-font-family-radio-button-on, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-radio-button-on, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-radio-button-on, var(--ag-icon-font-color))
    }

    .ag-icon-radio-button-on::before {
      content: var(--ag-icon-font-code-radio-button-on, "\f128");
      display: var(--ag-icon-font-display-radio-button-on, var(--ag-icon-font-display))
    }

    .ag-icon-radio-button-on::after {
      background-image: var(--ag-icon-image-radio-button-on, var(--ag-icon-image));
      display: var(--ag-icon-image-display-radio-button-on, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-radio-button-on, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-right {
      font-family: var(--ag-icon-font-family-right, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-right, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-right, var(--ag-icon-font-color))
    }

    .ag-icon-right::before {
      content: var(--ag-icon-font-code-right, "\f129");
      display: var(--ag-icon-font-display-right, var(--ag-icon-font-display))
    }

    .ag-icon-right::after {
      background-image: var(--ag-icon-image-right, var(--ag-icon-image));
      display: var(--ag-icon-image-display-right, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-right, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-save {
      font-family: var(--ag-icon-font-family-save, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-save, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-save, var(--ag-icon-font-color))
    }

    .ag-icon-save::before {
      content: var(--ag-icon-font-code-save, "\f12a");
      display: var(--ag-icon-font-display-save, var(--ag-icon-font-display))
    }

    .ag-icon-save::after {
      background-image: var(--ag-icon-image-save, var(--ag-icon-image));
      display: var(--ag-icon-image-display-save, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-save, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-small-down {
      font-family: var(--ag-icon-font-family-small-down, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-small-down, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-small-down, var(--ag-icon-font-color))
    }

    .ag-icon-small-down::before {
      content: var(--ag-icon-font-code-small-down, "\f12b");
      display: var(--ag-icon-font-display-small-down, var(--ag-icon-font-display))
    }

    .ag-icon-small-down::after {
      background-image: var(--ag-icon-image-small-down, var(--ag-icon-image));
      display: var(--ag-icon-image-display-small-down, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-small-down, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-small-left {
      font-family: var(--ag-icon-font-family-small-left, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-small-left, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-small-left, var(--ag-icon-font-color))
    }

    .ag-icon-small-left::before {
      content: var(--ag-icon-font-code-small-left, "\f12c");
      display: var(--ag-icon-font-display-small-left, var(--ag-icon-font-display))
    }

    .ag-icon-small-left::after {
      background-image: var(--ag-icon-image-small-left, var(--ag-icon-image));
      display: var(--ag-icon-image-display-small-left, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-small-left, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-small-right {
      font-family: var(--ag-icon-font-family-small-right, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-small-right, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-small-right, var(--ag-icon-font-color))
    }

    .ag-icon-small-right::before {
      content: var(--ag-icon-font-code-small-right, "\f12d");
      display: var(--ag-icon-font-display-small-right, var(--ag-icon-font-display))
    }

    .ag-icon-small-right::after {
      background-image: var(--ag-icon-image-small-right, var(--ag-icon-image));
      display: var(--ag-icon-image-display-small-right, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-small-right, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-small-up {
      font-family: var(--ag-icon-font-family-small-up, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-small-up, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-small-up, var(--ag-icon-font-color))
    }

    .ag-icon-small-up::before {
      content: var(--ag-icon-font-code-small-up, "\f12e");
      display: var(--ag-icon-font-display-small-up, var(--ag-icon-font-display))
    }

    .ag-icon-small-up::after {
      background-image: var(--ag-icon-image-small-up, var(--ag-icon-image));
      display: var(--ag-icon-image-display-small-up, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-small-up, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-tick {
      font-family: var(--ag-icon-font-family-tick, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-tick, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-tick, var(--ag-icon-font-color))
    }

    .ag-icon-tick::before {
      content: var(--ag-icon-font-code-tick, "\f12f");
      display: var(--ag-icon-font-display-tick, var(--ag-icon-font-display))
    }

    .ag-icon-tick::after {
      background-image: var(--ag-icon-image-tick, var(--ag-icon-image));
      display: var(--ag-icon-image-display-tick, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-tick, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-tree-closed {
      font-family: var(--ag-icon-font-family-tree-closed, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-tree-closed, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-tree-closed, var(--ag-icon-font-color))
    }

    .ag-icon-tree-closed::before {
      content: var(--ag-icon-font-code-tree-closed, "\f130");
      display: var(--ag-icon-font-display-tree-closed, var(--ag-icon-font-display))
    }

    .ag-icon-tree-closed::after {
      background-image: var(--ag-icon-image-tree-closed, var(--ag-icon-image));
      display: var(--ag-icon-image-display-tree-closed, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-tree-closed, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-tree-indeterminate {
      font-family: var(--ag-icon-font-family-tree-indeterminate, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-tree-indeterminate, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-tree-indeterminate, var(--ag-icon-font-color))
    }

    .ag-icon-tree-indeterminate::before {
      content: var(--ag-icon-font-code-tree-indeterminate, "\f131");
      display: var(--ag-icon-font-display-tree-indeterminate, var(--ag-icon-font-display))
    }

    .ag-icon-tree-indeterminate::after {
      background-image: var(--ag-icon-image-tree-indeterminate, var(--ag-icon-image));
      display: var(--ag-icon-image-display-tree-indeterminate, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-tree-indeterminate, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-tree-open {
      font-family: var(--ag-icon-font-family-tree-open, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-tree-open, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-tree-open, var(--ag-icon-font-color))
    }

    .ag-icon-tree-open::before {
      content: var(--ag-icon-font-code-tree-open, "\f132");
      display: var(--ag-icon-font-display-tree-open, var(--ag-icon-font-display))
    }

    .ag-icon-tree-open::after {
      background-image: var(--ag-icon-image-tree-open, var(--ag-icon-image));
      display: var(--ag-icon-image-display-tree-open, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-tree-open, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-unlinked {
      font-family: var(--ag-icon-font-family-unlinked, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-unlinked, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-unlinked, var(--ag-icon-font-color))
    }

    .ag-icon-unlinked::before {
      content: var(--ag-icon-font-code-unlinked, "\f133");
      display: var(--ag-icon-font-display-unlinked, var(--ag-icon-font-display))
    }

    .ag-icon-unlinked::after {
      background-image: var(--ag-icon-image-unlinked, var(--ag-icon-image));
      display: var(--ag-icon-image-display-unlinked, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-unlinked, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-up {
      font-family: var(--ag-icon-font-family-up, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-up, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-up, var(--ag-icon-font-color))
    }

    .ag-icon-up::before {
      content: var(--ag-icon-font-code-up, "\f134");
      display: var(--ag-icon-font-display-up, var(--ag-icon-font-display))
    }

    .ag-icon-up::after {
      background-image: var(--ag-icon-image-up, var(--ag-icon-image));
      display: var(--ag-icon-image-display-up, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-up, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-down {
      font-family: var(--ag-icon-font-family-down, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-down, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-down, var(--ag-icon-font-color))
    }

    .ag-icon-down::before {
      content: var(--ag-icon-font-code-down, "\f135");
      display: var(--ag-icon-font-display-down, var(--ag-icon-font-display))
    }

    .ag-icon-down::after {
      background-image: var(--ag-icon-image-down, var(--ag-icon-image));
      display: var(--ag-icon-image-display-down, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-down, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-plus {
      font-family: var(--ag-icon-font-family-plus, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-plus, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-plus, var(--ag-icon-font-color))
    }

    .ag-icon-plus::before {
      content: var(--ag-icon-font-code-plus, "\f136");
      display: var(--ag-icon-font-display-plus, var(--ag-icon-font-display))
    }

    .ag-icon-plus::after {
      background-image: var(--ag-icon-image-plus, var(--ag-icon-image));
      display: var(--ag-icon-image-display-plus, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-plus, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-minus {
      font-family: var(--ag-icon-font-family-minus, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-minus, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-minus, var(--ag-icon-font-color))
    }

    .ag-icon-minus::before {
      content: var(--ag-icon-font-code-minus, "\f137");
      display: var(--ag-icon-font-display-minus, var(--ag-icon-font-display))
    }

    .ag-icon-minus::after {
      background-image: var(--ag-icon-image-minus, var(--ag-icon-image));
      display: var(--ag-icon-image-display-minus, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-minus, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-menu-alt {
      font-family: var(--ag-icon-font-family-menu-alt, var(--ag-icon-font-family));
      font-weight: var(--ag-icon-font-weight-menu-alt, var(--ag-icon-font-weight));
      color: var(--ag-icon-font-color-menu-alt, var(--ag-icon-font-color))
    }

    .ag-icon-menu-alt::before {
      content: var(--ag-icon-font-code-menu-alt, "\f138");
      display: var(--ag-icon-font-display-menu-alt, var(--ag-icon-font-display))
    }

    .ag-icon-menu-alt::after {
      background-image: var(--ag-icon-image-menu-alt, var(--ag-icon-image));
      display: var(--ag-icon-image-display-menu-alt, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-menu-alt, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-icon-row-drag::before {
      content: var(--ag-icon-font-code-grip)
    }

    .ag-left-arrow::before {
      content: var(--ag-icon-font-code-left)
    }

    .ag-right-arrow::before {
      content: var(--ag-icon-font-code-right)
    }

    [class*=ag-theme-] {
      --ag-foreground-color: #000;
      --ag-data-color: var(--ag-foreground-color);
      --ag-secondary-foreground-color: var(--ag-foreground-color);
      --ag-header-foreground-color: var(--ag-secondary-foreground-color);
      --ag-disabled-foreground-color: rgba(0, 0, 0, 0.5);
      --ag-background-color: #fff;
      --ag-header-background-color: transparent;
      --ag-tooltip-background-color: transparent;
      --ag-subheader-background-color: transparent;
      --ag-subheader-toolbar-background-color: transparent;
      --ag-control-panel-background-color: transparent;
      --ag-side-button-selected-background-color: var(--ag-control-panel-background-color);
      --ag-selected-row-background-color: #BBB;
      --ag-odd-row-background-color: var(--ag-background-color);
      --ag-modal-overlay-background-color: rgba(255, 255, 255, 0.66);
      --ag-menu-background-color: var(--ag-background-color);
      --ag-menu-border-color: var(--ag-border-color);
      --ag-panel-background-color: var(--ag-background-color);
      --ag-panel-border-color: var(--ag-border-color);
      --ag-row-hover-color: transparent;
      --ag-column-hover-color: transparent;
      --ag-range-selection-border-color: var(--ag-foreground-color);
      --ag-range-selection-border-style: solid;
      --ag-range-selection-background-color: rgba(0, 0, 0, 0.2);
      --ag-range-selection-background-color-2: var(--ag-range-selection-background-color);
      --ag-range-selection-background-color-3: var(--ag-range-selection-background-color);
      --ag-range-selection-background-color-4: var(--ag-range-selection-background-color);
      --ag-range-selection-highlight-color: var(--ag-range-selection-border-color);
      --ag-selected-tab-underline-color: var(--ag-range-selection-border-color);
      --ag-selected-tab-underline-width: 0;
      --ag-selected-tab-underline-transition-speed: 0s;
      --ag-range-selection-chart-category-background-color: rgba(0, 255, 132, 0.1);
      --ag-range-selection-chart-background-color: rgba(0, 88, 255, 0.1);
      --ag-header-cell-hover-background-color: transparent;
      --ag-header-cell-moving-background-color: var(--ag-background-color);
      --ag-value-change-value-highlight-background-color: rgba(22, 160, 133, 0.5);
      --ag-value-change-delta-up-color: #43a047;
      --ag-value-change-delta-down-color: #e53935;
      --ag-chip-background-color: transparent;
      --ag-chip-border-color: var(--ag-chip-background-color);
      --ag-borders: solid 1px;
      --ag-border-color: rgba(0, 0, 0, 0.25);
      --ag-borders-critical: var(--ag-borders);
      --ag-borders-secondary: var(--ag-borders);
      --ag-secondary-border-color: var(--ag-border-color);
      --ag-row-border-style: solid;
      --ag-row-border-width: 1px;
      --ag-cell-horizontal-border: solid transparent;
      --ag-borders-input: var(--ag-borders-secondary);
      --ag-input-border-color: var(--ag-secondary-border-color);
      --ag-borders-input-invalid: solid 2px;
      --ag-input-border-color-invalid: var(--ag-invalid-color);
      --ag-borders-side-button: var(--ag-borders);
      --ag-border-radius: 0px;
      --ag-wrapper-border-radius: var(--ag-border-radius);
      --ag-row-border-color: var(--ag-secondary-border-color);
      --ag-header-column-separator-display: none;
      --ag-header-column-separator-height: 100%;
      --ag-header-column-separator-width: 1px;
      --ag-header-column-separator-color: var(--ag-secondary-border-color);
      --ag-header-column-resize-handle-display: none;
      --ag-header-column-resize-handle-height: 50%;
      --ag-header-column-resize-handle-width: 1px;
      --ag-header-column-resize-handle-color: var(--ag-secondary-border-color);
      --ag-invalid-color: red;
      --ag-input-disabled-border-color: var(--ag-input-border-color);
      --ag-input-disabled-background-color: transparent;
      --ag-checkbox-background-color: transparent;
      --ag-checkbox-border-radius: var(--ag-border-radius);
      --ag-checkbox-checked-color: var(--ag-foreground-color);
      --ag-checkbox-unchecked-color: var(--ag-foreground-color);
      --ag-checkbox-indeterminate-color: var(--ag-checkbox-unchecked-color);
      --ag-toggle-button-off-border-color: var(--ag-checkbox-unchecked-color);
      --ag-toggle-button-off-background-color: var(--ag-checkbox-unchecked-color);
      --ag-toggle-button-on-border-color: var(--ag-checkbox-checked-color);
      --ag-toggle-button-on-background-color: var(--ag-checkbox-checked-color);
      --ag-toggle-button-switch-background-color: var(--ag-background-color);
      --ag-toggle-button-switch-border-color: var(--ag-toggle-button-off-border-color);
      --ag-toggle-button-border-width: 1px;
      --ag-toggle-button-height: var(--ag-icon-size);
      --ag-toggle-button-width: calc(var(--ag-toggle-button-height) * 2);
      --ag-input-focus-box-shadow: none;
      --ag-input-focus-border-color: none;
      --ag-minichart-selected-chart-color: var(--ag-checkbox-checked-color);
      --ag-minichart-selected-page-color: var(--ag-checkbox-checked-color);
      --ag-grid-size: 4px;
      --ag-icon-size: 12px;
      --ag-icon-font-weight: normal;
      --ag-icon-font-color: var(--ag-foreground-color);
      --ag-icon-image-display: block;
      --ag-widget-container-horizontal-padding: calc(var(--ag-grid-size) * 1.5);
      --ag-widget-container-vertical-padding: calc(var(--ag-grid-size) * 1.5);
      --ag-widget-horizontal-spacing: calc(var(--ag-grid-size) * 2);
      --ag-widget-vertical-spacing: var(--ag-grid-size);
      --ag-cell-horizontal-padding: calc(var(--ag-grid-size) * 3);
      --ag-cell-widget-spacing: var(--ag-cell-horizontal-padding);
      --ag-row-height: calc(var(--ag-grid-size) * 6 + 1px);
      --ag-header-height: var(--ag-row-height);
      --ag-list-item-height: calc(var(--ag-grid-size) * 5);
      --ag-column-select-indent-size: calc(var(--ag-grid-size) + var(--ag-icon-size));
      --ag-set-filter-indent-size: calc(var(--ag-grid-size) + var(--ag-icon-size));
      --ag-advanced-filter-builder-indent-size: calc(var(--ag-grid-size) * 2 + var(--ag-icon-size));
      --ag-row-group-indent-size: calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size));
      --ag-filter-tool-panel-group-indent: 16px;
      --ag-tab-min-width: 220px;
      --ag-menu-min-width: 181px;
      --ag-side-bar-panel-width: 200px;
      --ag-font-family: "Helvetica Neue", sans-serif;
      --ag-font-size: 14px;
      --ag-card-radius: var(--ag-border-radius);
      --ag-card-shadow: none;
      --ag-popup-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);
      --ag-advanced-filter-join-pill-color: #f08e8d;
      --ag-advanced-filter-column-pill-color: #a6e194;
      --ag-advanced-filter-option-pill-color: #f3c08b;
      --ag-advanced-filter-value-pill-color: #85c0e4
    }

    .ag-dnd-ghost,
    .ag-root-wrapper,
    .ag-sticky-top,
    select[class^=ag-],
    textarea[class^=ag-] {
      background-color: var(--ag-background-color)
    }

    [class*=ag-theme-] {
      -webkit-font-smoothing: antialiased;
      font-family: var(--ag-font-family);
      font-size: var(--ag-font-size);
      line-height: normal;
      color: var(--ag-foreground-color)
    }

    ag-grid,
    ag-grid-angular,
    ag-grid-aurelia,
    ag-grid-ng2,
    ag-grid-polymer {
      display: block
    }

    .ag-aria-description-container {
      z-index: 9999;
      border: 0;
      clip: rect(1px, 1px, 1px, 1px);
      height: 1px;
      width: 1px;
      position: absolute;
      overflow: hidden;
      padding: 0;
      white-space: nowrap
    }

    .ag-hidden {
      display: none !important
    }

    .ag-invisible {
      visibility: hidden !important
    }

    .ag-no-transition {
      transition: none !important
    }

    .ag-drag-handle {
      cursor: grab
    }

    .ag-column-drop-wrapper {
      display: flex
    }

    .ag-column-drop-horizontal-half-width {
      display: inline-block;
      width: 50% !important
    }

    .ag-unselectable {
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none
    }

    .ag-selectable {
      -moz-user-select: text;
      -webkit-user-select: text;
      -ms-user-select: text;
      user-select: text
    }

    .ag-tab {
      position: relative
    }

    .ag-tab-guard {
      width: 0;
      height: 0;
      display: block
    }

    .ag-select-agg-func-popup,
    .ag-tab-guard {
      position: absolute
    }

    .ag-input-wrapper,
    .ag-picker-field-wrapper {
      display: flex;
      flex: 1 1 auto;
      align-items: center;
      line-height: normal;
      position: relative
    }

    .ag-shake-left-to-right {
      animation-direction: alternate;
      animation-duration: .2s;
      animation-iteration-count: infinite;
      animation-name: ag-shake-left-to-right
    }

    .ag-root-wrapper {
      cursor: default;
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      white-space: normal
    }

    .ag-root-wrapper.ag-layout-normal {
      height: 100%
    }

    .ag-watermark {
      position: absolute;
      bottom: 20px;
      right: 25px;
      opacity: .0;
      transition: opacity 1s ease-out 3s;
      color: #9b9b9b
    }

/* 
    .ag-watermark::before {
      content: "";
      background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjA5IiBoZWlnaHQ9IjM2IiB2aWV3Qm94PSIwIDAgMjA5IDM2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMTkyLjk5MyAyMy42NTgyVjE1LjcxMTdIMTc5LjQ1MkwxNzEuNTA1IDIzLjY1ODJIMTkyLjk5M1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTIwOC4yNSAzLjk1MDgxSDE5MS4yNzZMMTgzLjI2NiAxMS44OTczSDIwOC4yNVYzLjk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMTYzLjYyMiAzMS42MDQ4TDE2Ny42OTEgMjcuNTM2MUgxODEuNDIzVjM1LjQ4MjdIMTYzLjYyMlYzMS42MDQ4WiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMTY2LjYxIDE5Ljc4MDNIMTc1LjM4M0wxODMuMzkzIDExLjgzMzdIMTY2LjYxVjE5Ljc4MDNaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0xNTcuMDExIDMxLjYwNDdIMTYzLjYyMkwxNzEuNTA1IDIzLjY1ODJIMTU3LjAxMVYzMS42MDQ3WiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMTkxLjI3NiAzLjk1MDgxTDE4Ny4yMDggOC4wMTk0MUgxNjEuMjdWMC4wNzI4NzZIMTkxLjI3NlYzLjk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjAuODM5MSAzMC4yMDYxSDguMzc4OTJMNi4yMTc0NSAzNS41NDYySDAuNzUwMjQ0TDEyLjI1NjggOC41OTE1NUgxNy4wMjQ3TDI4LjUzMTMgMzUuNTQ2MkgyMy4wMDA1TDIwLjgzOTEgMzAuMjA2MVpNMTkuMTIyNyAyNS45NDY4TDE0LjYwOSAxNC45NDg4TDEwLjA5NTQgMjUuOTQ2OEgxOS4xMjI3WiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMTA0LjQzNyAxOC41MDg5QzEwNi4wMjYgMTYuMTU2NyAxMTAuMDMxIDE1LjkwMjQgMTExLjY4NCAxNS45MDI0VjIwLjQ3OTZDMTA5LjY1IDIwLjQ3OTYgMTA3LjYxNSAyMC41NDMyIDEwNi40MDcgMjEuNDMzMkMxMDUuMiAyMi4zMjMyIDEwNC41NjQgMjMuNTMxMSAxMDQuNTY0IDI0Ljk5MzJWMzUuNTQ2Mkg5OS42MDUxVjE1LjkwMjRIMTA0LjM3M0wxMDQuNDM3IDE4LjUwODlaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0xMTkuMzc2IDE1LjkwMjRIMTE0LjQxOFYzNS41NDYySDExOS4zNzZWMTUuOTAyNFoiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTExOS4zNzYgNy4xMjkzOUgxMTQuNDE4VjEyLjk3OEgxMTkuMzc2VjcuMTI5MzlaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0xNDMuOTc5IDcuMTI5MzlWMzUuNTQ2MkgxMzkuMjExTDEzOS4wODQgMzIuNTU4M0MxMzguMzg0IDMzLjU3NTUgMTM3LjQ5NCAzNC40MDE5IDEzNi40MTQgMzUuMDM3NkMxMzUuMzMzIDM1LjYwOTggMTMzLjk5OCAzNS45Mjc2IDEzMi40NzIgMzUuOTI3NkMxMzEuMTM3IDM1LjkyNzYgMTI5Ljg2NiAzNS42NzMzIDEyOC43ODUgMzUuMjI4M0MxMjcuNjQxIDM0LjcxOTcgMTI2LjYyMyAzNC4wODQgMTI1Ljc5NyAzMy4xOTRDMTI0Ljk3MSAzMi4zMDQgMTI0LjI3MSAzMS4yMjMzIDEyMy44MjYgMzAuMDE1NEMxMjMuMzE4IDI4LjgwNzUgMTIzLjEyNyAyNy40MDkgMTIzLjEyNyAyNS44ODMyQzEyMy4xMjcgMjQuMzU3NSAxMjMuMzgxIDIyLjk1ODkgMTIzLjgyNiAyMS42ODc0QzEyNC4zMzUgMjAuNDE2IDEyNC45NzEgMTkuMzM1MyAxMjUuNzk3IDE4LjQ0NTNDMTI2LjYyMyAxNy41NTUyIDEyNy42NDEgMTYuODU2IDEyOC43ODUgMTYuMzQ3NEMxMjkuOTI5IDE1LjgzODggMTMxLjEzNyAxNS41ODQ1IDEzMi40NzIgMTUuNTg0NUMxMzMuOTk4IDE1LjU4NDUgMTM1LjI2OSAxNS44Mzg4IDEzNi4zNSAxNi40MTA5QzEzNy40MzEgMTYuOTgzMSAxMzguMzIxIDE3Ljc0NTkgMTM5LjAyIDE4LjgyNjdWNy4xOTI5NUgxNDMuOTc5VjcuMTI5MzlaTTEzMy41NTMgMzEuNjY4M0MxMzUuMjA2IDMxLjY2ODMgMTM2LjQ3NyAzMS4wOTYyIDEzNy40OTQgMzAuMDE1NEMxMzguNTExIDI4LjkzNDcgMTM5LjAyIDI3LjQ3MjUgMTM5LjAyIDI1LjY5MjVDMTM5LjAyIDIzLjkxMjUgMTM4LjUxMSAyMi41MTM5IDEzNy40OTQgMjEuMzY5NkMxMzYuNDc3IDIwLjI4ODggMTM1LjIwNiAxOS43MTY3IDEzMy41NTMgMTkuNzE2N0MxMzEuOTYzIDE5LjcxNjcgMTMwLjYyOCAyMC4yODg4IDEyOS42NzUgMjEuMzY5NkMxMjguNjU4IDIyLjQ1MDMgMTI4LjE0OSAyMy45MTI1IDEyOC4xNDkgMjUuNjkyNUMxMjguMTQ5IDI3LjQ3MjUgMTI4LjY1OCAyOC44NzExIDEyOS42NzUgMjkuOTUxOEMxMzAuNjkyIDMxLjA5NjEgMTMxLjk2MyAzMS42NjgzIDEzMy41NTMgMzEuNjY4M1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTU3LjIwMjQgMjAuMzUyNUg0NC45MzNWMjQuNjExOEg1MS45MjU5QzUxLjczNTIgMjYuNzczMyA1MC45MDg4IDI4LjQyNjEgNDkuNTEwMiAyOS43NjExQzQ4LjExMTYgMzEuMDMyNiA0Ni4zMzE1IDMxLjY2ODMgNDQuMDQyOSAzMS42NjgzQzQyLjc3MTUgMzEuNjY4MyA0MS41NjM2IDMxLjQxNCA0MC41NDY1IDMwLjk2OUMzOS40NjU3IDMwLjUyNCAzOC41NzU3IDI5Ljg4ODMgMzcuODEyOSAyOC45OTgzQzM3LjA1IDI4LjE3MTggMzYuNDc3OCAyNy4xNTQ3IDM2LjAzMjggMjUuOTQ2OEMzNS41ODc4IDI0LjczODkgMzUuMzk3MSAyMy40Njc1IDM1LjM5NzEgMjIuMDA1M0MzNS4zOTcxIDIwLjU0MzIgMzUuNTg3OCAxOS4yNzE3IDM2LjAzMjggMTguMDYzOEMzNi40MTQzIDE2Ljg1NiAzNy4wNSAxNS45MDI0IDM3LjgxMjkgMTUuMDEyNEMzOC41NzU3IDE0LjE4NTkgMzkuNDY1NyAxMy41NTAyIDQwLjU0NjUgMTMuMDQxNkM0MS42MjcyIDEyLjU5NjYgNDIuNzcxNSAxMi4zNDIzIDQ0LjEwNjUgMTIuMzQyM0M0Ni43NzY2IDEyLjM0MjMgNDguODEwOSAxMi45NzggNTAuMjA5NSAxNC4yNDk1TDUzLjUxNTIgMTAuOTQzOEM1MS4wMzU5IDkuMDM2NTkgNDcuODU3MyA4LjAxOTQxIDQ0LjEwNjUgOC4wMTk0MUM0Mi4wMDg2IDguMDE5NDEgNDAuMTAxNSA4LjMzNzI5IDM4LjM4NSA5LjAzNjU5QzM2LjY2ODYgOS43MzU4OCAzNS4yMDY0IDEwLjYyNTkgMzMuOTk4NSAxMS44MzM3QzMyLjc5MDYgMTMuMDQxNiAzMS44MzcxIDE0LjUwMzggMzEuMjAxNCAxNi4yMjAzQzMwLjU2NTYgMTcuOTM2NyAzMC4yNDc4IDE5Ljg0MzggMzAuMjQ3OCAyMS44NzgyQzMwLjI0NzggMjMuOTEyNSAzMC41NjU2IDI1LjgxOTcgMzEuMjY0OSAyNy41MzYxQzMxLjk2NDIgMjkuMjUyNiAzMi44NTQyIDMwLjcxNDcgMzQuMDYyMSAzMS45MjI2QzM1LjI3IDMzLjEzMDUgMzYuNzMyMSAzNC4wODQxIDM4LjQ0ODYgMzQuNzE5OEM0MC4xNjUgMzUuNDE5MSA0Mi4wNzIyIDM1LjczNyA0NC4xMDY1IDM1LjczN0M0Ni4xNDA4IDM1LjczNyA0Ny45ODQ0IDM1LjQxOTEgNDkuNjM3MyAzNC43MTk4QzUxLjI5MDIgMzQuMDIwNSA1Mi42ODg4IDMzLjEzMDUgNTMuODMzMSAzMS45MjI2QzU0Ljk3NzQgMzAuNzE0NyA1NS44Njc0IDI5LjI1MjYgNTYuNTAzMSAyNy41MzYxQzU3LjEzODggMjUuODE5NyA1Ny40NTY3IDIzLjkxMjUgNTcuNDU2NyAyMS44NzgyVjIxLjA1MTdDNTcuMjY2IDIwLjkyNDYgNTcuMjAyNCAyMC42MDY3IDU3LjIwMjQgMjAuMzUyNVoiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTk1Ljk4MTUgMjAuMzUyNUg4My43MTIxVjI0LjYxMThIOTAuNzA1QzkwLjUxNDMgMjYuNzczMyA4OS42ODc5IDI4LjQyNjEgODguMjg5MyAyOS43NjExQzg2Ljg5MDcgMzEuMDMyNiA4NS4xMTA2IDMxLjY2ODMgODIuODIyIDMxLjY2ODNDODEuNTUwNiAzMS42NjgzIDgwLjM0MjcgMzEuNDE0IDc5LjMyNTYgMzAuOTY5Qzc4LjI0NDggMzAuNTI0IDc3LjM1NDggMjkuODg4MyA3Ni41OTIgMjguOTk4M0M3NS44MjkxIDI4LjE3MTggNzUuMjU3IDI3LjE1NDcgNzQuODExOSAyNS45NDY4Qzc0LjM2NjkgMjQuNzM4OSA3NC4xNzYyIDIzLjQ2NzUgNzQuMTc2MiAyMi4wMDUzQzc0LjE3NjIgMjAuNTQzMiA3NC4zNjY5IDE5LjI3MTcgNzQuODExOSAxOC4wNjM4Qzc1LjE5MzQgMTYuODU2IDc1LjgyOTEgMTUuOTAyNCA3Ni41OTIgMTUuMDEyNEM3Ny4zNTQ4IDE0LjE4NTkgNzguMjQ0OCAxMy41NTAyIDc5LjMyNTYgMTMuMDQxNkM4MC40MDYzIDEyLjU5NjYgODEuNTUwNiAxMi4zNDIzIDgyLjg4NTYgMTIuMzQyM0M4NS41NTU3IDEyLjM0MjMgODcuNTkgMTIuOTc4IDg4Ljk4ODYgMTQuMjQ5NUw5Mi4yOTQzIDEwLjk0MzhDODkuODE1IDkuMDM2NTkgODYuNjM2NCA4LjAxOTQxIDgyLjg4NTYgOC4wMTk0MUM4MC43ODc4IDguMDE5NDEgNzguODgwNiA4LjMzNzI5IDc3LjE2NDEgOS4wMzY1OUM3NS40NDc3IDkuNzM1ODggNzMuOTg1NSAxMC42MjU5IDcyLjc3NzYgMTEuODMzN0M3MS41Njk4IDEzLjA0MTYgNzAuNjE2MiAxNC41MDM4IDY5Ljk4MDUgMTYuMjIwM0M2OS4zNDQ3IDE3LjkzNjcgNjkuMDI2OSAxOS44NDM4IDY5LjAyNjkgMjEuODc4MkM2OS4wMjY5IDIzLjkxMjUgNjkuMzQ0NyAyNS44MTk3IDcwLjA0NCAyNy41MzYxQzcwLjc0MzMgMjkuMjUyNiA3MS42MzM0IDMwLjcxNDcgNzIuODQxMiAzMS45MjI2Qzc0LjA0OTEgMzMuMTMwNSA3NS41MTEyIDM0LjA4NDEgNzcuMjI3NyAzNC43MTk4Qzc4Ljk0NDEgMzUuNDE5MSA4MC44NTEzIDM1LjczNyA4Mi44ODU2IDM1LjczN0M4NC45MiAzNS43MzcgODYuNzYzNiAzNS40MTkxIDg4LjQxNjQgMzQuNzE5OEM5MC4wNjkzIDM0LjAyMDUgOTEuNDY3OSAzMy4xMzA1IDkyLjYxMjIgMzEuOTIyNkM5My43NTY1IDMwLjcxNDcgOTQuNjQ2NSAyOS4yNTI2IDk1LjI4MjIgMjcuNTM2MUM5NS45MTggMjUuODE5NyA5Ni4yMzU4IDIzLjkxMjUgOTYuMjM1OCAyMS44NzgyVjIxLjA1MTdDOTYuMDQ1MSAyMC45MjQ2IDk1Ljk4MTUgMjAuNjA2NyA5NS45ODE1IDIwLjM1MjVaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);
      background-repeat: no-repeat;
      background-size: 170px 40px;
      display: block;
      height: 40px;
      width: 0px
    }
 */
    .ag-watermark-text {
      opacity: .0;
      font-weight: 700;
      font-family: Impact, sans-serif;
      font-size: 19px;
      padding-left: .7rem
    }

    .ag-root,
    .ag-root-wrapper-body {
      display: flex;
      flex-direction: row
    }

    .ag-root-wrapper-body.ag-layout-normal {
      flex: 1 1 auto;
      height: 0;
      min-height: 0
    }

    .ag-root {
      position: relative;
      flex-direction: column
    }

    .ag-root.ag-layout-auto-height,
    .ag-root.ag-layout-normal {
      overflow: hidden;
      flex: 1 1 auto;
      width: 0
    }

    .ag-root.ag-layout-normal {
      height: 100%
    }

    .ag-body-horizontal-scroll-viewport,
    .ag-body-vertical-scroll-viewport,
    .ag-body-viewport,
    .ag-center-cols-viewport,
    .ag-floating-bottom-viewport,
    .ag-floating-top-viewport,
    .ag-header-viewport {
      position: relative;
      height: 100%;
      min-width: 0;
      overflow: hidden;
      flex: 1 1 auto
    }

    .ag-sticky-top-viewport,
    .ag-virtual-list-viewport {
      position: relative;
      height: 100%;
      min-width: 0;
      flex: 1 1 auto
    }

    .ag-sticky-top-viewport {
      overflow: hidden
    }

    .ag-body-viewport,
    .ag-center-cols-viewport {
      -ms-overflow-style: none !important;
      scrollbar-width: none !important
    }

    .ag-body-viewport::-webkit-scrollbar,
    .ag-center-cols-viewport::-webkit-scrollbar {
      display: none !important
    }

    .ag-body-viewport {
      display: flex
    }

    .ag-body-viewport.ag-layout-normal {
      overflow-y: auto;
      -webkit-overflow-scrolling: touch
    }

    .ag-center-cols-viewport {
      min-height: 100%;
      width: 100%;
      overflow-x: auto
    }

    .ag-body-horizontal-scroll-viewport {
      overflow-x: scroll
    }

    .ag-body-vertical-scroll-viewport {
      overflow-y: scroll
    }

    .ag-virtual-list-viewport {
      overflow: auto;
      width: 100%
    }

    .ag-body-container,
    .ag-body-horizontal-scroll-container,
    .ag-body-vertical-scroll-container,
    .ag-center-cols-container,
    .ag-floating-bottom-container,
    .ag-floating-top-container,
    .ag-header-container,
    .ag-pinned-left-cols-container,
    .ag-pinned-right-cols-container,
    .ag-sticky-top-container,
    .ag-virtual-list-container {
      position: relative
    }

    .ag-floating-bottom-container,
    .ag-floating-top-container,
    .ag-header-container,
    .ag-sticky-top-container {
      height: 100%;
      white-space: nowrap
    }

    .ag-center-cols-container,
    .ag-pinned-right-cols-container {
      display: block
    }

    .ag-body-horizontal-scroll-container {
      height: 100%
    }

    .ag-body-vertical-scroll-container {
      width: 100%
    }

    .ag-floating-bottom-full-width-container,
    .ag-floating-top-full-width-container,
    .ag-full-width-container,
    .ag-sticky-top-full-width-container {
      position: absolute;
      top: 0;
      pointer-events: none
    }

    .ag-ltr .ag-floating-bottom-full-width-container,
    .ag-ltr .ag-floating-top-full-width-container,
    .ag-ltr .ag-full-width-container,
    .ag-ltr .ag-sticky-top-full-width-container {
      left: 0
    }

    .ag-rtl .ag-floating-bottom-full-width-container,
    .ag-rtl .ag-floating-top-full-width-container,
    .ag-rtl .ag-full-width-container,
    .ag-rtl .ag-sticky-top-full-width-container {
      right: 0
    }

    .ag-full-width-container {
      width: 100%
    }

    .ag-floating-bottom-full-width-container,
    .ag-floating-top-full-width-container {
      display: inline-block;
      overflow: hidden;
      height: 100%;
      width: 100%
    }

    .ag-virtual-list-container {
      overflow: hidden
    }

    .ag-body {
      position: relative;
      display: flex;
      flex: 1 1 auto;
      flex-direction: row !important;
      min-height: 0
    }

    .ag-body-horizontal-scroll,
    .ag-body-vertical-scroll {
      min-height: 0;
      min-width: 0;
      display: flex;
      position: relative
    }

    .ag-body-horizontal-scroll.ag-scrollbar-invisible,
    .ag-body-vertical-scroll.ag-scrollbar-invisible {
      position: absolute;
      bottom: 0
    }

    .ag-body-horizontal-scroll.ag-scrollbar-invisible.ag-apple-scrollbar,
    .ag-body-vertical-scroll.ag-scrollbar-invisible.ag-apple-scrollbar {
      opacity: 0;
      transition: opacity 400ms;
      visibility: hidden
    }

    .ag-body-horizontal-scroll.ag-scrollbar-invisible.ag-apple-scrollbar.ag-scrollbar-active,
    .ag-body-horizontal-scroll.ag-scrollbar-invisible.ag-apple-scrollbar.ag-scrollbar-scrolling,
    .ag-body-vertical-scroll.ag-scrollbar-invisible.ag-apple-scrollbar.ag-scrollbar-active,
    .ag-body-vertical-scroll.ag-scrollbar-invisible.ag-apple-scrollbar.ag-scrollbar-scrolling {
      visibility: visible;
      opacity: 1
    }

    .ag-body-horizontal-scroll {
      width: 100%
    }

    .ag-body-horizontal-scroll.ag-scrollbar-invisible {
      left: 0;
      right: 0
    }

    .ag-body-vertical-scroll {
      height: 100%
    }

    .ag-body-vertical-scroll.ag-scrollbar-invisible {
      top: 0;
      z-index: 10
    }

    .ag-ltr .ag-body-vertical-scroll.ag-scrollbar-invisible {
      right: 0
    }

    .ag-rtl .ag-body-vertical-scroll.ag-scrollbar-invisible {
      left: 0
    }

    .ag-force-vertical-scroll {
      overflow-y: scroll !important
    }

    .ag-horizontal-left-spacer,
    .ag-horizontal-right-spacer {
      height: 100%;
      min-width: 0;
      overflow-x: scroll
    }

    .ag-horizontal-left-spacer.ag-scroller-corner,
    .ag-horizontal-right-spacer.ag-scroller-corner {
      overflow-x: hidden
    }

    .ag-header,
    .ag-pinned-left-header,
    .ag-pinned-right-header {
      display: inline-block;
      overflow: hidden;
      position: relative
    }

    .ag-header-cell-sortable .ag-header-cell-label {
      cursor: pointer
    }

    .ag-header {
      display: flex;
      width: 100%;
      white-space: nowrap
    }

    .ag-pinned-left-header,
    .ag-pinned-right-header {
      height: 100%
    }

    .ag-header-row {
      position: absolute
    }

    .ag-header-row:not(.ag-header-row-column-group) {
      overflow: hidden
    }

    .ag-header.ag-header-allow-overflow .ag-header-row {
      overflow: visible
    }

    .ag-header-cell {
      display: inline-flex;
      align-items: center;
      position: absolute;
      height: 100%
    }

    .ag-header-cell-filter-button,
    .ag-header-cell.ag-header-active .ag-header-cell-menu-button {
      opacity: 1
    }

    .ag-header-cell-menu-button:not(.ag-header-menu-always-show) {
      transition: opacity .2s;
      opacity: 0
    }

    .ag-header-cell-label,
    .ag-header-group-cell-label {
      display: flex;
      flex: 1 1 auto;
      align-self: stretch;
      align-items: center
    }

    .ag-header-cell-label {
      overflow: hidden;
      text-overflow: ellipsis
    }

    .ag-header-group-cell-label.ag-sticky-label {
      position: sticky;
      flex: none;
      max-width: 100%
    }

    .ag-header-group-text {
      white-space: nowrap
    }

    .ag-header-cell-text,
    .ag-header-group-text {
      overflow: hidden;
      text-overflow: ellipsis
    }

    .ag-header-cell:not(.ag-header-cell-auto-height) .ag-header-cell-comp-wrapper {
      height: 100%;
      display: flex;
      align-items: center
    }

    .ag-header-cell-comp-wrapper {
      width: 100%
    }

    .ag-header-cell-wrap-text .ag-header-cell-comp-wrapper {
      white-space: normal
    }

    .ag-right-aligned-header .ag-header-cell-label {
      flex-direction: row-reverse
    }

    .ag-header-cell-resize {
      position: absolute;
      z-index: 2;
      height: 100%;
      width: 8px;
      top: 0;
      cursor: ew-resize
    }

    .ag-ltr .ag-header-cell-resize {
      right: -4px
    }

    .ag-rtl .ag-header-cell-resize {
      left: -4px
    }

    .ag-pinned-left-header .ag-header-cell-resize {
      right: -4px
    }

    .ag-pinned-right-header .ag-header-cell-resize {
      left: -4px
    }

    .ag-header-select-all {
      display: flex
    }

    .ag-floating-filter-button-button,
    .ag-header-cell-filter-button,
    .ag-header-cell-menu-button {
      cursor: pointer
    }

    .ag-column-moving .ag-cell,
    .ag-column-moving .ag-header-cell {
      transition: left .2s
    }

    .ag-column-moving .ag-header-group-cell {
      transition: left .2s, width .2s
    }

    .ag-column-panel,
    .ag-column-select {
      display: flex;
      flex-direction: column;
      overflow: hidden;
      flex: 1 1 auto
    }

    .ag-column-select {
      position: relative;
      flex: 3 1 0px
    }

    .ag-column-select-header {
      position: relative;
      display: flex;
      flex: none
    }

    .ag-column-select-header-icon {
      position: relative
    }

    .ag-column-select-header-filter-wrapper {
      flex: 1 1 auto
    }

    .ag-column-select-header-filter {
      width: 100%
    }

    .ag-column-select-list {
      flex: 1 1 0px;
      overflow: hidden
    }

    .ag-column-drop {
      position: relative;
      display: inline-flex;
      align-items: center;
      overflow: auto;
      width: 100%
    }

    .ag-column-drop-cell,
    .ag-column-drop-list {
      display: flex;
      align-items: center
    }

    .ag-column-drop-cell {
      position: relative
    }

    .ag-column-drop-cell-text {
      overflow: hidden;
      flex: 1 1 auto;
      text-overflow: ellipsis;
      white-space: nowrap
    }

    .ag-column-drop-vertical {
      display: flex;
      flex-direction: column;
      overflow: hidden;
      align-items: stretch;
      flex: 1 1 0px
    }

    .ag-column-drop-vertical-title-bar {
      display: flex;
      align-items: center;
      flex: none
    }

    .ag-column-drop-vertical-list {
      position: relative;
      align-items: stretch;
      flex-grow: 1;
      flex-direction: column;
      overflow-x: auto
    }

    .ag-column-drop-vertical-list>* {
      flex: none
    }

    .ag-column-drop-empty .ag-column-drop-vertical-list {
      overflow: hidden
    }

    .ag-column-drop-vertical-empty-message {
      display: block
    }

    .ag-column-drop.ag-column-drop-horizontal {
      white-space: nowrap;
      overflow: hidden
    }

    .ag-column-drop-cell-button {
      cursor: pointer
    }

    .ag-filter-toolpanel {
      flex: 1 1 0px;
      min-width: 0
    }

    .ag-filter-toolpanel-header {
      position: relative
    }

    .ag-filter-toolpanel-header,
    .ag-filter-toolpanel-header>*,
    .ag-filter-toolpanel-search,
    .ag-filter-toolpanel-search>* {
      display: flex;
      align-items: center
    }

    .ag-filter-apply-panel {
      display: flex;
      justify-content: flex-end;
      overflow: hidden
    }

    .ag-row-animation .ag-row {
      transition: transform .4s, top .4s
    }

    .ag-row-animation .ag-row.ag-after-created {
      transition: transform .4s, top .4s, height .4s
    }

    .ag-row-no-animation .ag-row {
      transition: none
    }

    .ag-row {
      white-space: nowrap;
      width: 100%
    }

    .ag-row-loading {
      display: flex;
      align-items: center
    }

    .ag-row-position-absolute {
      position: absolute
    }

    .ag-row-position-relative {
      position: relative
    }

    .ag-full-width-row {
      overflow: hidden;
      pointer-events: all
    }

    .ag-row-inline-editing {
      z-index: 1
    }

    .ag-row-dragging {
      z-index: 2
    }

    .ag-stub-cell {
      display: flex;
      align-items: center
    }

    .ag-cell {
      display: inline-block;
      position: absolute;
      white-space: nowrap;
      height: 100%
    }

    .ag-cell-value,
    .ag-floating-filter-full-body>div {
      flex: 1 1 auto
    }

    .ag-cell-value,
    .ag-group-value {
      overflow: hidden;
      text-overflow: ellipsis
    }

    .ag-cell-wrap-text {
      white-space: normal;
      word-break: break-all
    }

    .ag-cell-wrapper {
      display: flex;
      align-items: center
    }

    .ag-cell-wrapper.ag-row-group {
      align-items: flex-start
    }

    .ag-sparkline-wrapper {
      position: absolute;
      height: 100%;
      width: 100%;
      left: 0;
      top: 0
    }

    .ag-full-width-row .ag-cell-wrapper.ag-row-group {
      height: 100%;
      align-items: center
    }

    .ag-cell-inline-editing {
      z-index: 1
    }

    .ag-cell-inline-editing .ag-cell-edit-wrapper,
    .ag-cell-inline-editing .ag-cell-editor,
    .ag-cell-inline-editing .ag-cell-editor .ag-wrapper,
    .ag-cell-inline-editing .ag-cell-editor input,
    .ag-cell-inline-editing .ag-cell-wrapper {
      height: 100%;
      width: 100%;
      line-height: normal
    }

    .ag-cell .ag-icon {
      display: inline-block;
      vertical-align: middle
    }

    .ag-set-filter-item {
      display: flex;
      align-items: center;
      height: 100%
    }

    .ag-set-filter-item-checkbox {
      display: flex;
      overflow: hidden;
      height: 100%
    }

    .ag-set-filter-group-icons {
      display: block
    }

    .ag-set-filter-group-icons>* {
      cursor: pointer
    }

    .ag-filter-body-wrapper {
      display: flex;
      flex-direction: column
    }

    .ag-filter-filter {
      flex: 1 1 0px
    }

    .ag-filter-condition {
      display: flex;
      justify-content: center
    }

    .ag-floating-filter-body {
      position: relative;
      display: flex;
      flex: 1 1 auto;
      height: 100%
    }

    .ag-floating-filter-full-body {
      flex: 1 1 auto;
      height: 100%;
      overflow: hidden
    }

    .ag-floating-filter-full-body,
    .ag-floating-filter-input {
      align-items: center;
      display: flex;
      width: 100%
    }

    .ag-floating-filter-input>* {
      flex: 1 1 auto
    }

    .ag-floating-filter-button {
      display: flex;
      flex: none
    }

    .ag-set-floating-filter-input input[disabled] {
      pointer-events: none
    }

    .ag-dnd-ghost {
      position: absolute;
      display: inline-flex;
      align-items: center;
      cursor: move;
      white-space: nowrap;
      z-index: 9999
    }

    .ag-overlay {
      height: 100%;
      left: 0;
      pointer-events: none;
      position: absolute;
      top: 0;
      width: 100%;
      z-index: 2
    }

    .ag-overlay-panel,
    .ag-overlay-wrapper {
      display: flex;
      height: 100%;
      width: 100%
    }

    .ag-overlay-wrapper {
      flex: none;
      align-items: center;
      justify-content: center;
      text-align: center
    }

    .ag-overlay-loading-wrapper {
      pointer-events: all
    }

    .ag-popup-child {
      z-index: 5;
      top: 0
    }

    .ag-popup-editor {
      position: absolute;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none
    }

    .ag-large-text-input {
      display: block
    }

    .ag-virtual-list-item {
      position: absolute;
      width: 100%
    }

    .ag-floating-top {
      overflow: hidden;
      white-space: nowrap;
      width: 100%;
      position: relative;
      display: flex
    }

    .ag-pinned-left-floating-top,
    .ag-pinned-right-floating-top {
      display: inline-block;
      overflow: hidden;
      position: relative;
      min-width: 0
    }

    .ag-floating-bottom {
      overflow: hidden;
      white-space: nowrap;
      width: 100%;
      position: relative;
      display: flex
    }

    .ag-pinned-left-floating-bottom,
    .ag-pinned-right-floating-bottom {
      display: inline-block;
      overflow: hidden;
      position: relative;
      min-width: 0
    }

    .ag-sticky-top {
      position: absolute;
      display: flex;
      width: 100%
    }

    .ag-pinned-left-sticky-top,
    .ag-pinned-right-sticky-top {
      position: relative;
      height: 100%;
      overflow: hidden
    }

    .ag-sticky-top-full-width-container {
      overflow: hidden;
      width: 100%;
      height: 100%
    }

    .ag-dialog,
    .ag-panel {
      display: flex;
      flex-direction: column;
      overflow: hidden
    }

    .ag-panel {
      position: relative
    }

    .ag-panel-title-bar {
      display: flex;
      flex: none;
      align-items: center;
      cursor: default
    }

    .ag-panel-title-bar-title {
      flex: 1 1 auto
    }

    .ag-panel-title-bar-buttons {
      display: flex
    }

    .ag-panel-title-bar-button {
      cursor: pointer
    }

    .ag-panel-content-wrapper {
      display: flex;
      flex: 1 1 auto;
      position: relative;
      overflow: hidden
    }

    .ag-dialog,
    .ag-resizer {
      position: absolute
    }

    .ag-resizer {
      pointer-events: none;
      z-index: 1;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none
    }

    .ag-resizer.ag-resizer-topLeft {
      top: 0;
      left: 0;
      height: 5px;
      width: 5px;
      cursor: nwse-resize
    }

    .ag-resizer.ag-resizer-top {
      top: 0;
      left: 5px;
      right: 5px;
      height: 5px;
      cursor: ns-resize
    }

    .ag-resizer.ag-resizer-topRight {
      top: 0;
      right: 0;
      height: 5px;
      width: 5px;
      cursor: nesw-resize
    }

    .ag-resizer.ag-resizer-right {
      top: 5px;
      right: 0;
      bottom: 5px;
      width: 5px;
      cursor: ew-resize
    }

    .ag-resizer.ag-resizer-bottomRight {
      bottom: 0;
      right: 0;
      height: 5px;
      width: 5px;
      cursor: nwse-resize
    }

    .ag-resizer.ag-resizer-bottom {
      bottom: 0;
      left: 5px;
      right: 5px;
      height: 5px;
      cursor: ns-resize
    }

    .ag-resizer.ag-resizer-bottomLeft {
      bottom: 0;
      left: 0;
      height: 5px;
      width: 5px;
      cursor: nesw-resize
    }

    .ag-resizer.ag-resizer-left {
      left: 0;
      top: 5px;
      bottom: 5px;
      width: 5px;
      cursor: ew-resize
    }

    .ag-tooltip,
    .ag-tooltip-custom {
      position: absolute;
      z-index: 99999
    }

    .ag-tooltip-custom:not(.ag-tooltip-interactive),
    .ag-tooltip:not(.ag-tooltip-interactive) {
      pointer-events: none
    }

    .ag-value-slide-out {
      margin-right: 5px;
      opacity: 1;
      transition: opacity 3s, margin-right 3s;
      transition-timing-function: linear
    }

    .ag-value-slide-out-end {
      margin-right: 10px;
      opacity: 0
    }

    .ag-opacity-zero {
      opacity: 0 !important
    }

    .ag-menu {
      max-height: 100%;
      overflow-y: auto;
      position: absolute;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none
    }

    .ag-menu-column-select-wrapper {
      height: 265px;
      overflow: auto
    }

    .ag-menu-column-select-wrapper .ag-column-select {
      height: 100%
    }

    .ag-dialog .ag-panel-content-wrapper .ag-column-select {
      user-select: none
    }

    .ag-menu-list {
      display: table;
      width: 100%
    }

    .ag-menu-option,
    .ag-menu-separator {
      display: table-row
    }

    .ag-menu-option-part,
    .ag-menu-separator-part {
      display: table-cell;
      vertical-align: middle
    }

    .ag-menu-option-text {
      white-space: nowrap
    }

    .ag-menu-option-custom {
      display: contents
    }

    .ag-compact-menu-option {
      width: 100%;
      display: flex;
      flex-wrap: nowrap
    }

    .ag-compact-menu-option-text {
      white-space: nowrap;
      flex: 1 1 auto
    }

    .ag-rich-select {
      cursor: default;
      outline: 0;
      height: 100%
    }

    .ag-rich-select-value {
      display: flex;
      align-items: center;
      height: 100%
    }

    .ag-rich-select-value .ag-picker-field-display {
      overflow: hidden;
      text-overflow: ellipsis
    }

    .ag-rich-select-value .ag-picker-field-display.ag-display-as-placeholder {
      opacity: .5
    }

    .ag-rich-select-list {
      position: relative
    }

    .ag-rich-select-list .ag-loading-text {
      min-height: 2rem
    }

    .ag-rich-select-row {
      display: flex;
      flex: 1 1 auto;
      align-items: center;
      white-space: nowrap;
      overflow: hidden;
      height: 100%
    }

    .ag-rich-select-field-input {
      flex: 1 1 auto
    }

    .ag-rich-select-field-input .ag-input-field-input {
      padding: 0 !important;
      border: 0 !important;
      box-shadow: none !important;
      text-overflow: ellipsis
    }

    .ag-rich-select-field-input .ag-input-field-input::placeholder {
      opacity: .8
    }

    .ag-autocomplete {
      align-items: center;
      display: flex
    }

    .ag-autocomplete>* {
      flex: 1 1 auto
    }

    .ag-autocomplete-list-popup {
      position: absolute;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none
    }

    .ag-autocomplete-list {
      position: relative
    }

    .ag-autocomplete-virtual-list-item {
      display: flex
    }

    .ag-autocomplete-row {
      display: flex;
      flex: 1 1 auto;
      align-items: center;
      overflow: hidden
    }

    .ag-autocomplete-row-label {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis
    }

    .ag-paging-panel {
      justify-content: flex-end
    }

    .ag-paging-page-summary-panel,
    .ag-paging-panel {
      display: flex;
      align-items: center
    }

    .ag-paging-button {
      position: relative
    }

    .ag-disabled .ag-paging-page-summary-panel {
      pointer-events: none
    }

    .ag-tool-panel-wrapper {
      display: flex;
      overflow-y: auto;
      overflow-x: hidden;
      cursor: default;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none
    }

    .ag-column-select-column,
    .ag-column-select-column-group,
    .ag-select-agg-func-item {
      position: relative;
      align-items: center;
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
      height: 100%
    }

    .ag-column-select-column-group>*,
    .ag-column-select-column>*,
    .ag-select-agg-func-item>* {
      flex: none
    }

    .ag-column-select-column-label,
    .ag-select-agg-func-item {
      flex: 1 1 auto;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap
    }

    .ag-column-select-checkbox {
      display: flex
    }

    .ag-tool-panel-horizontal-resize {
      cursor: ew-resize;
      height: 100%;
      position: absolute;
      top: 0;
      width: 5px;
      z-index: 1
    }

    .ag-ltr .ag-side-bar-left .ag-tool-panel-horizontal-resize {
      right: -3px
    }

    .ag-ltr .ag-side-bar-right .ag-tool-panel-horizontal-resize,
    .ag-rtl .ag-side-bar-left .ag-tool-panel-horizontal-resize {
      left: -3px
    }

    .ag-rtl .ag-side-bar-right .ag-tool-panel-horizontal-resize {
      right: -3px
    }

    .ag-details-row {
      width: 100%
    }

    .ag-details-row-fixed-height {
      height: 100%
    }

    .ag-details-grid {
      width: 100%
    }

    .ag-details-grid-fixed-height {
      height: 100%
    }

    .ag-header-group-cell {
      display: flex;
      align-items: center;
      height: 100%;
      position: absolute
    }

    .ag-header-group-cell-no-group.ag-header-span-height .ag-header-cell-resize {
      display: none
    }

    .ag-cell-label-container {
      justify-content: space-between;
      align-items: center;
      height: 100%;
      width: 100%;
      padding: 5px 0
    }

    .ag-right-aligned-header .ag-cell-label-container {
      flex-direction: row
    }

    .ag-right-aligned-header .ag-header-cell-text {
      text-align: end
    }

    .ag-cell-label-container,
    .ag-side-bar {
      display: flex;
      flex-direction: row-reverse
    }

    .ag-side-bar-left {
      order: -1;
      flex-direction: row
    }

    .ag-side-button-button {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-wrap: nowrap;
      white-space: nowrap;
      outline: 0;
      cursor: pointer
    }

    .ag-side-button-label {
      writing-mode: vertical-lr
    }

    .ag-status-bar {
      display: flex;
      justify-content: space-between;
      overflow: hidden
    }

    .ag-status-panel {
      display: inline-flex
    }

    .ag-status-name-value {
      white-space: nowrap
    }

    .ag-status-bar-center,
    .ag-status-bar-left,
    .ag-status-bar-right {
      display: inline-flex
    }

    .ag-icon {
      display: block;
      speak: none
    }

    .ag-group {
      position: relative;
      width: 100%
    }

    .ag-group-title-bar {
      display: flex;
      align-items: center
    }

    .ag-group-title {
      display: block;
      flex: 1 1 auto;
      min-width: 0;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis
    }

    .ag-group-title-bar .ag-group-title {
      cursor: default
    }

    .ag-group-toolbar {
      display: flex;
      align-items: center
    }

    .ag-group-container {
      display: flex
    }

    .ag-disabled .ag-group-container {
      pointer-events: none
    }

    .ag-group-container-horizontal {
      flex-direction: row;
      flex-wrap: wrap
    }

    .ag-group-container-vertical {
      flex-direction: column
    }

    .ag-column-group-icons {
      display: block
    }

    .ag-column-group-icons>* {
      cursor: pointer
    }

    .ag-group-item-alignment-stretch .ag-group-item {
      align-items: stretch
    }

    .ag-group-item-alignment-start .ag-group-item {
      align-items: flex-start
    }

    .ag-group-item-alignment-end .ag-group-item {
      align-items: flex-end
    }

    .ag-toggle-button-icon {
      transition: right .3s;
      position: absolute;
      top: -1px
    }

    .ag-input-field,
    .ag-select {
      display: flex;
      flex-direction: row;
      align-items: center
    }

    .ag-input-field-input,
    .ag-slider-wrapper .ag-input-field {
      flex: 1 1 auto
    }

    .ag-floating-filter-input .ag-input-field-input[type=date] {
      width: 1px
    }

    .ag-angle-select,
    .ag-range-field {
      display: flex;
      align-items: center
    }

    .ag-angle-select-wrapper {
      display: flex
    }

    .ag-angle-select-parent-circle {
      display: block;
      position: relative
    }

    .ag-angle-select-child-circle {
      position: absolute
    }

    .ag-slider-wrapper {
      display: flex
    }

    .ag-picker-field-display {
      flex: 1 1 auto
    }

    .ag-picker-field {
      display: flex;
      align-items: center
    }

    .ag-picker-field-icon {
      display: flex;
      border: 0;
      padding: 0;
      margin: 0;
      cursor: pointer
    }

    .ag-picker-field-wrapper {
      overflow: hidden
    }

    .ag-label-align-right .ag-label {
      order: 1
    }

    .ag-label-align-right>* {
      flex: none
    }

    .ag-label-align-top {
      flex-direction: column;
      align-items: flex-start
    }

    .ag-label-align-top>* {
      align-self: stretch
    }

    .ag-label-ellipsis {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      flex: 1
    }

    .ag-color-panel {
      width: 100%;
      display: flex;
      flex-direction: column;
      text-align: center
    }

    .ag-spectrum-color {
      flex: 1 1 auto;
      position: relative;
      overflow: hidden;
      cursor: default
    }

    .ag-spectrum-fill {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0
    }

    .ag-spectrum-val {
      cursor: pointer
    }

    .ag-spectrum-dragger {
      position: absolute;
      pointer-events: none;
      cursor: pointer
    }

    .ag-spectrum-hue {
      cursor: default;
      background: linear-gradient(to left, red 3%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, red 100%)
    }

    .ag-spectrum-alpha {
      cursor: default
    }

    .ag-spectrum-hue-background {
      width: 100%;
      height: 100%
    }

    .ag-spectrum-alpha-background {
      background-image: linear-gradient(to right, transparent, #000);
      width: 100%;
      height: 100%
    }

    .ag-spectrum-tool {
      cursor: pointer
    }

    .ag-spectrum-slider {
      position: absolute;
      pointer-events: none
    }

    .ag-recent-colors {
      display: flex
    }

    .ag-recent-color {
      cursor: pointer
    }

    .ag-ltr .ag-column-select-indent-1 {
      padding-left: 20px
    }

    .ag-rtl .ag-column-select-indent-1 {
      padding-right: 20px
    }

    .ag-ltr .ag-set-filter-indent-1 {
      padding-left: 20px
    }

    .ag-rtl .ag-set-filter-indent-1 {
      padding-right: 20px
    }

    .ag-ltr .ag-row-group-indent-1 {
      padding-left: 20px
    }

    .ag-rtl .ag-row-group-indent-1 {
      padding-right: 20px
    }

    .ag-ltr .ag-column-select-indent-2 {
      padding-left: 40px
    }

    .ag-rtl .ag-column-select-indent-2 {
      padding-right: 40px
    }

    .ag-ltr .ag-set-filter-indent-2 {
      padding-left: 40px
    }

    .ag-rtl .ag-set-filter-indent-2 {
      padding-right: 40px
    }

    .ag-ltr .ag-row-group-indent-2 {
      padding-left: 40px
    }

    .ag-rtl .ag-row-group-indent-2 {
      padding-right: 40px
    }

    .ag-ltr .ag-column-select-indent-3 {
      padding-left: 60px
    }

    .ag-rtl .ag-column-select-indent-3 {
      padding-right: 60px
    }

    .ag-ltr .ag-set-filter-indent-3 {
      padding-left: 60px
    }

    .ag-rtl .ag-set-filter-indent-3 {
      padding-right: 60px
    }

    .ag-ltr .ag-row-group-indent-3 {
      padding-left: 60px
    }

    .ag-rtl .ag-row-group-indent-3 {
      padding-right: 60px
    }

    .ag-ltr .ag-column-select-indent-4 {
      padding-left: 80px
    }

    .ag-rtl .ag-column-select-indent-4 {
      padding-right: 80px
    }

    .ag-ltr .ag-set-filter-indent-4 {
      padding-left: 80px
    }

    .ag-rtl .ag-set-filter-indent-4 {
      padding-right: 80px
    }

    .ag-ltr .ag-row-group-indent-4 {
      padding-left: 80px
    }

    .ag-rtl .ag-row-group-indent-4 {
      padding-right: 80px
    }

    .ag-ltr .ag-column-select-indent-5 {
      padding-left: 100px
    }

    .ag-rtl .ag-column-select-indent-5 {
      padding-right: 100px
    }

    .ag-ltr .ag-set-filter-indent-5 {
      padding-left: 100px
    }

    .ag-rtl .ag-set-filter-indent-5 {
      padding-right: 100px
    }

    .ag-ltr .ag-row-group-indent-5 {
      padding-left: 100px
    }

    .ag-rtl .ag-row-group-indent-5 {
      padding-right: 100px
    }

    .ag-ltr .ag-column-select-indent-6 {
      padding-left: 120px
    }

    .ag-rtl .ag-column-select-indent-6 {
      padding-right: 120px
    }

    .ag-ltr .ag-set-filter-indent-6 {
      padding-left: 120px
    }

    .ag-rtl .ag-set-filter-indent-6 {
      padding-right: 120px
    }

    .ag-ltr .ag-row-group-indent-6 {
      padding-left: 120px
    }

    .ag-rtl .ag-row-group-indent-6 {
      padding-right: 120px
    }

    .ag-ltr .ag-column-select-indent-7 {
      padding-left: 140px
    }

    .ag-rtl .ag-column-select-indent-7 {
      padding-right: 140px
    }

    .ag-ltr .ag-set-filter-indent-7 {
      padding-left: 140px
    }

    .ag-rtl .ag-set-filter-indent-7 {
      padding-right: 140px
    }

    .ag-ltr .ag-row-group-indent-7 {
      padding-left: 140px
    }

    .ag-rtl .ag-row-group-indent-7 {
      padding-right: 140px
    }

    .ag-ltr .ag-column-select-indent-8 {
      padding-left: 160px
    }

    .ag-rtl .ag-column-select-indent-8 {
      padding-right: 160px
    }

    .ag-ltr .ag-set-filter-indent-8 {
      padding-left: 160px
    }

    .ag-rtl .ag-set-filter-indent-8 {
      padding-right: 160px
    }

    .ag-ltr .ag-row-group-indent-8 {
      padding-left: 160px
    }

    .ag-rtl .ag-row-group-indent-8 {
      padding-right: 160px
    }

    .ag-ltr .ag-column-select-indent-9 {
      padding-left: 180px
    }

    .ag-rtl .ag-column-select-indent-9 {
      padding-right: 180px
    }

    .ag-ltr .ag-set-filter-indent-9 {
      padding-left: 180px
    }

    .ag-rtl .ag-set-filter-indent-9 {
      padding-right: 180px
    }

    .ag-ltr .ag-row-group-indent-9 {
      padding-left: 180px
    }

    .ag-rtl .ag-row-group-indent-9 {
      padding-right: 180px
    }

    .ag-ltr {
      direction: ltr
    }

    .ag-ltr .ag-body,
    .ag-ltr .ag-body-horizontal-scroll,
    .ag-ltr .ag-body-viewport,
    .ag-ltr .ag-floating-bottom,
    .ag-ltr .ag-floating-top,
    .ag-ltr .ag-header,
    .ag-ltr .ag-sticky-top {
      flex-direction: row
    }

    .ag-rtl {
      direction: rtl
    }

    .ag-rtl .ag-body,
    .ag-rtl .ag-body-horizontal-scroll,
    .ag-rtl .ag-body-viewport,
    .ag-rtl .ag-floating-bottom,
    .ag-rtl .ag-floating-top,
    .ag-rtl .ag-header,
    .ag-rtl .ag-sticky-top {
      flex-direction: row-reverse
    }

    .ag-rtl .ag-icon-contracted,
    .ag-rtl .ag-icon-expanded,
    .ag-rtl .ag-icon-tree-closed {
      display: block;
      transform: rotate(180deg)
    }

    .ag-body .ag-body-viewport {
      -webkit-overflow-scrolling: touch
    }

    .ag-layout-print.ag-body {
      display: block;
      height: unset
    }

    .ag-layout-print.ag-root-wrapper {
      display: inline-block
    }

    .ag-layout-print .ag-body-horizontal-scroll,
    .ag-layout-print .ag-body-vertical-scroll {
      display: none
    }

    .ag-layout-print.ag-force-vertical-scroll {
      overflow-y: visible !important
    }

    @media print {
      .ag-root-wrapper.ag-layout-print {
        display: table
      }

      .ag-root-wrapper.ag-layout-print .ag-body-horizontal-scroll-viewport,
      .ag-root-wrapper.ag-layout-print .ag-body-viewport,
      .ag-root-wrapper.ag-layout-print .ag-center-cols-container,
      .ag-root-wrapper.ag-layout-print .ag-center-cols-viewport,
      .ag-root-wrapper.ag-layout-print .ag-root,
      .ag-root-wrapper.ag-layout-print .ag-root-wrapper-body,
      .ag-root-wrapper.ag-layout-print .ag-virtual-list-viewport {
        height: auto !important;
        overflow: hidden !important;
        display: block !important
      }

      .ag-root-wrapper.ag-layout-print .ag-cell,
      .ag-root-wrapper.ag-layout-print .ag-row {
        break-inside: avoid
      }
    }

    [class^=ag-],
    [class^=ag-]:after,
    [class^=ag-]:before,
    [class^=ag-]:focus {
      box-sizing: border-box;
      outline: 0
    }

    [class^=ag-]::-ms-clear {
      display: none
    }

    .ag-checkbox .ag-input-wrapper,
    .ag-radio-button .ag-input-wrapper {
      overflow: visible
    }

    .ag-range-field .ag-input-wrapper {
      height: 100%
    }

    .ag-toggle-button {
      flex: none;
      width: unset;
      min-width: unset
    }

    .ag-button {
      border-radius: 0;
      color: var(--ag-foreground-color)
    }

    .ag-button:hover {
      background-color: transparent
    }

    .ag-ltr .ag-label-align-right .ag-label {
      margin-left: var(--ag-grid-size)
    }

    .ag-rtl .ag-label-align-right .ag-label {
      margin-right: var(--ag-grid-size)
    }

    input[class^=ag-] {
      margin: 0;
      background-color: var(--ag-background-color)
    }

    input[class^=ag-]:not([type]),
    input[class^=ag-][type=date],
    input[class^=ag-][type=datetime-local],
    input[class^=ag-][type=number],
    input[class^=ag-][type=tel],
    input[class^=ag-][type=text],
    textarea[class^=ag-] {
      font-size: inherit;
      line-height: inherit;
      color: inherit;
      font-family: inherit;
      border: var(--ag-borders-input) var(--ag-input-border-color)
    }

    input[class^=ag-]:not([type]):disabled,
    input[class^=ag-][type=date]:disabled,
    input[class^=ag-][type=datetime-local]:disabled,
    input[class^=ag-][type=number]:disabled,
    input[class^=ag-][type=tel]:disabled,
    input[class^=ag-][type=text]:disabled,
    textarea[class^=ag-]:disabled {
      color: var(--ag-disabled-foreground-color);
      background-color: var(--ag-input-disabled-background-color);
      border-color: var(--ag-input-disabled-border-color)
    }

    input[class^=ag-]:not([type]):focus,
    input[class^=ag-][type=date]:focus,
    input[class^=ag-][type=datetime-local]:focus,
    input[class^=ag-][type=number]:focus,
    input[class^=ag-][type=tel]:focus,
    input[class^=ag-][type=text]:focus,
    textarea[class^=ag-]:focus {
      outline: 0;
      box-shadow: var(--ag-input-focus-box-shadow);
      border-color: var(--ag-input-focus-border-color)
    }

    input[class^=ag-]:not([type]):invalid,
    input[class^=ag-][type=date]:invalid,
    input[class^=ag-][type=datetime-local]:invalid,
    input[class^=ag-][type=number]:invalid,
    input[class^=ag-][type=tel]:invalid,
    input[class^=ag-][type=text]:invalid,
    textarea[class^=ag-]:invalid {
      border: var(--ag-borders-input-invalid) var(--ag-input-border-color-invalid)
    }

    input[class^=ag-][type=number]:not(.ag-number-field-input-stepper) {
      -moz-appearance: textfield
    }

    input[class^=ag-][type=number]:not(.ag-number-field-input-stepper)::-webkit-inner-spin-button,
    input[class^=ag-][type=number]:not(.ag-number-field-input-stepper)::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0
    }

    input[class^=ag-][type=range] {
      padding: 0;
      -webkit-appearance: none;
      width: 100%;
      height: 100%;
      background: 0 0;
      overflow: visible
    }

    button[class^=ag-]:focus,
    input[class^=ag-][type=button]:focus {
      box-shadow: var(--ag-input-focus-box-shadow)
    }

    .ag-drag-handle {
      color: var(--ag-secondary-foreground-color)
    }

    .ag-list-item,
    .ag-virtual-list-item {
      height: var(--ag-list-item-height)
    }

    .ag-virtual-list-item:focus-visible {
      outline: 0
    }

    .ag-virtual-list-item:focus-visible::after {
      content: "";
      position: absolute;
      background-color: transparent;
      pointer-events: none;
      top: 4px;
      left: 4px;
      display: block;
      width: calc(100% - 8px);
      height: calc(100% - 8px);
      border: 1px solid;
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-select-list {
      background-color: var(--ag-background-color);
      overflow-y: auto;
      overflow-x: hidden;
      border-radius: var(--ag-border-radius);
      border: var(--ag-borders) var(--ag-border-color)
    }

    .ag-list-item {
      display: flex;
      align-items: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis
    }

    .ag-list-item.ag-active-item {
      background-color: var(--ag-row-hover-color)
    }

    .ag-select-list-item {
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
      cursor: default
    }

    .ag-ltr .ag-select-list-item {
      padding-left: calc(var(--ag-cell-horizontal-padding)/2)
    }

    .ag-rtl .ag-select-list-item {
      padding-right: calc(var(--ag-cell-horizontal-padding)/2)
    }

    .ag-select-list-item span {
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden
    }

    .ag-group-contracted,
    .ag-group-expanded,
    .ag-row-drag,
    .ag-selection-checkbox {
      color: var(--ag-secondary-foreground-color)
    }

    .ag-ltr .ag-group-contracted,
    .ag-ltr .ag-group-expanded,
    .ag-ltr .ag-row-drag,
    .ag-ltr .ag-selection-checkbox {
      margin-right: var(--ag-cell-widget-spacing)
    }

    .ag-rtl .ag-group-contracted,
    .ag-rtl .ag-group-expanded,
    .ag-rtl .ag-row-drag,
    .ag-rtl .ag-selection-checkbox {
      margin-left: var(--ag-cell-widget-spacing)
    }

    .ag-cell-wrapper>:not(.ag-cell-value):not(.ag-group-value) {
      --ag-internal-calculated-line-height: var(--ag-line-height, calc(var(--ag-row-height) - var(--ag-row-border-width)));
      --ag-internal-padded-row-height: calc(var(--ag-row-height) - var(--ag-row-border-width));
      height: min(var(--ag-internal-calculated-line-height), var(--ag-internal-padded-row-height));
      display: flex;
      align-items: center;
      flex: none
    }

    .ag-group-contracted,
    .ag-group-expanded {
      cursor: pointer
    }

    .ag-group-title-bar-icon {
      cursor: pointer;
      flex: none;
      color: var(--ag-secondary-foreground-color)
    }

    .ag-ltr .ag-group-child-count {
      margin-left: 2px
    }

    .ag-rtl .ag-group-child-count {
      margin-right: 2px
    }

    .ag-group-title-bar,
    .ag-group-toolbar {
      background-color: var(--ag-subheader-background-color);
      padding: var(--ag-grid-size)
    }

    .ag-group-toolbar {
      background-color: var(--ag-subheader-toolbar-background-color)
    }

    .ag-disabled-group-container,
    .ag-disabled-group-title-bar {
      opacity: .5
    }

    .group-item {
      margin: calc(var(--ag-grid-size)*.5)0
    }

    .ag-label {
      white-space: nowrap
    }

    .ag-ltr .ag-label {
      margin-right: var(--ag-grid-size)
    }

    .ag-rtl .ag-label {
      margin-left: var(--ag-grid-size)
    }

    .ag-label-align-top .ag-label {
      margin-bottom: calc(var(--ag-grid-size)*.5)
    }

    .ag-angle-select[disabled] {
      color: var(--ag-disabled-foreground-color);
      pointer-events: none
    }

    .ag-angle-select[disabled] .ag-angle-select-field {
      opacity: .4
    }

    .ag-ltr .ag-angle-select-field,
    .ag-ltr .ag-slider-field {
      margin-right: calc(var(--ag-grid-size)*2)
    }

    .ag-rtl .ag-angle-select-field,
    .ag-rtl .ag-slider-field {
      margin-left: calc(var(--ag-grid-size)*2)
    }

    .ag-angle-select-parent-circle {
      width: 24px;
      height: 24px;
      border-radius: 12px;
      border: solid 1px;
      border-color: var(--ag-border-color);
      background-color: var(--ag-background-color)
    }

    .ag-angle-select-child-circle {
      top: 4px;
      left: 12px;
      width: 6px;
      height: 6px;
      margin-left: -3px;
      margin-top: -4px;
      border-radius: 3px;
      background-color: var(--ag-secondary-foreground-color)
    }

    .ag-picker-field-wrapper {
      border: var(--ag-borders);
      border-color: var(--ag-border-color);
      border-radius: 5px;
      background-color: var(--ag-background-color)
    }

    .ag-picker-field-wrapper:disabled {
      color: var(--ag-disabled-foreground-color);
      background-color: var(--ag-input-disabled-background-color);
      border-color: var(--ag-input-disabled-border-color)
    }

    .ag-picker-field-wrapper.ag-picker-has-focus,
    .ag-picker-field-wrapper:focus-within {
      outline: 0;
      box-shadow: var(--ag-input-focus-box-shadow);
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-picker-field-button {
      background-color: var(--ag-background-color);
      color: var(--ag-secondary-foreground-color)
    }

    .ag-dialog.ag-color-dialog {
      border-radius: 5px
    }

    .ag-color-picker .ag-picker-field-display {
      height: var(--ag-icon-size)
    }

    .ag-color-picker .ag-picker-field-wrapper {
      max-width: 45px;
      min-width: 45px
    }

    .ag-color-panel {
      padding: var(--ag-grid-size)
    }

    .ag-spectrum-color {
      background-color: red;
      border-radius: 2px
    }

    .ag-spectrum-tools {
      padding: 10px
    }

    .ag-spectrum-sat {
      background-image: linear-gradient(to right, #fff, rgba(204, 154, 129, 0))
    }

    .ag-spectrum-val {
      background-image: linear-gradient(to top, #000, rgba(204, 154, 129, 0))
    }

    .ag-spectrum-dragger {
      border-radius: 12px;
      height: 12px;
      width: 12px;
      border: 1px solid #fff;
      background: #000;
      box-shadow: 0 0 2px 0 rgba(0, 0, 0, .24)
    }

    .ag-spectrum-alpha-background,
    .ag-spectrum-hue-background {
      border-radius: 2px
    }

    .ag-spectrum-tool {
      margin-bottom: 10px;
      height: 11px;
      border-radius: 2px
    }

    .ag-spectrum-slider {
      margin-top: -12px;
      width: 13px;
      height: 13px;
      border-radius: 13px;
      background-color: #f8f8f8;
      box-shadow: 0 1px 4px 0 rgba(0, 0, 0, .37)
    }

    .ag-recent-color {
      margin: 0 3px
    }

    .ag-recent-color:first-child {
      margin-left: 0
    }

    .ag-recent-color:last-child {
      margin-right: 0
    }

    .ag-recent-color:focus-visible:not(:disabled):not([readonly]),
    .ag-spectrum-color:focus-visible:not(:disabled):not([readonly]),
    .ag-spectrum-slider:focus-visible:not(:disabled):not([readonly]) {
      box-shadow: var(--ag-input-focus-box-shadow)
    }

    .ag-dnd-ghost {
      background: var(--ag-background-color);
      border-radius: var(--ag-card-radius);
      box-shadow: var(--ag-card-shadow);
      padding: var(--ag-grid-size);
      overflow: hidden;
      text-overflow: ellipsis;
      border: var(--ag-borders-secondary) var(--ag-secondary-border-color);
      color: var(--ag-secondary-foreground-color);
      height: var(--ag-header-height) !important;
      line-height: var(--ag-header-height);
      margin: 0;
      padding: 0 calc(var(--ag-grid-size)*2);
      transform: translateY(calc(var(--ag-grid-size)*2))
    }

    .ag-dnd-ghost-icon {
      margin-right: var(--ag-grid-size);
      color: var(--ag-foreground-color)
    }

    .ag-popup-child:not(.ag-tooltip-custom) {
      box-shadow: var(--ag-popup-shadow)
    }

    .ag-select .ag-picker-field-wrapper {
      min-height: var(--ag-list-item-height);
      cursor: default
    }

    .ag-ltr .ag-select .ag-picker-field-wrapper {
      padding-left: calc(var(--ag-cell-horizontal-padding)/2)
    }

    .ag-rtl .ag-select .ag-picker-field-wrapper {
      padding-right: calc(var(--ag-cell-horizontal-padding)/2)
    }

    .ag-ltr .ag-select .ag-picker-field-wrapper {
      padding-right: var(--ag-grid-size)
    }

    .ag-rtl .ag-select .ag-picker-field-wrapper {
      padding-left: var(--ag-grid-size)
    }

    .ag-select.ag-disabled .ag-picker-field-wrapper:focus,
    button.ag-side-button-button:focus {
      box-shadow: none
    }

    .ag-select:not(.ag-cell-editor, .ag-label-align-top) {
      min-height: var(--ag-list-item-height)
    }

    .ag-select .ag-picker-field-display {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis
    }

    .ag-select .ag-picker-field-icon {
      display: flex;
      align-items: center
    }

    .ag-select.ag-disabled {
      opacity: .5
    }

    .ag-rich-select-list,
    .ag-rich-select-value {
      background-color: var(--ag-background-color)
    }

    .ag-rich-select-list {
      width: 100%;
      height: auto;
      border-radius: var(--ag-border-radius);
      border: var(--ag-borders) var(--ag-border-color)
    }

    .ag-rich-select-list .ag-loading-text {
      padding: var(--ag-widget-vertical-spacing) var(--ag-widget-horizontal-spacing)
    }

    .ag-rich-select-value {
      border-bottom: var(--ag-borders-secondary) var(--ag-secondary-border-color);
      padding-top: 0;
      padding-bottom: 0
    }

    .ag-ltr .ag-rich-select-value {
      padding-left: calc(var(--ag-cell-horizontal-padding)/2)
    }

    .ag-rtl .ag-rich-select-value {
      padding-right: calc(var(--ag-cell-horizontal-padding)/2)
    }

    .ag-ltr .ag-rich-select-value {
      padding-right: var(--ag-grid-size)
    }

    .ag-rtl .ag-rich-select-value {
      padding-left: var(--ag-grid-size)
    }

    .ag-ltr .ag-rich-select-field-input {
      left: calc(var(--ag-cell-horizontal-padding))
    }

    .ag-rtl .ag-rich-select-field-input {
      right: calc(var(--ag-cell-horizontal-padding))
    }

    .ag-popup-editor .ag-rich-select-value {
      height: var(--ag-row-height);
      min-width: 200px
    }

    .ag-rich-select-virtual-list-item {
      cursor: default;
      height: var(--ag-list-item-height)
    }

    .ag-autocomplete-virtual-list-item:focus-visible::after,
    .ag-rich-select-virtual-list-item:focus-visible::after {
      content: none
    }

    .ag-rich-select-virtual-list-item:hover {
      background-color: var(--ag-row-hover-color)
    }

    .ag-ltr .ag-rich-select-row {
      padding-left: calc(var(--ag-cell-horizontal-padding)/2)
    }

    .ag-rtl .ag-rich-select-row {
      padding-right: calc(var(--ag-cell-horizontal-padding)/2)
    }

    .ag-rich-select-row-selected {
      background-color: var(--ag-selected-row-background-color)
    }

    .ag-rich-select-row-text-highlight {
      font-weight: 700
    }

    .ag-autocomplete {
      width: 100%
    }

    .ag-autocomplete-list {
      width: 100%;
      min-width: 200px;
      height: calc(var(--ag-row-height)*6.5)
    }

    .ag-autocomplete-virtual-list-item {
      cursor: default;
      height: var(--ag-list-item-height)
    }

    .ag-autocomplete-virtual-list-item:hover {
      background-color: var(--ag-row-hover-color)
    }

    .ag-autocomplete-row-label {
      margin: 0 var(--ag-widget-container-horizontal-padding)
    }

    .ag-autocomplete-row-selected {
      background-color: var(--ag-selected-row-background-color)
    }

    .ag-dragging-fill-handle .ag-dialog,
    .ag-dragging-range-handle .ag-dialog {
      opacity: .7;
      pointer-events: none
    }

    .ag-dialog {
      border-radius: var(--ag-border-radius);
      border: var(--ag-borders) var(--ag-border-color);
      box-shadow: var(--ag-popup-shadow)
    }

    .ag-panel {
      background-color: var(--ag-panel-background-color);
      border-color: var(--ag-panel-border-color)
    }

    .ag-panel-title-bar {
      color: var(--ag-header-foreground-color);
      height: var(--ag-header-height);
      padding: var(--ag-grid-size) var(--ag-cell-horizontal-padding);
      border-bottom: var(--ag-borders) var(--ag-border-color)
    }

    .ag-ltr .ag-panel-title-bar-button {
      margin-left: var(--ag-grid-size)
    }

    .ag-rtl .ag-panel-title-bar-button {
      margin-right: var(--ag-grid-size)
    }

    .ag-tooltip {
      background-color: var(--ag-tooltip-background-color);
      color: var(--ag-foreground-color);
      padding: var(--ag-grid-size);
      border: var(--ag-borders) var(--ag-border-color);
      border-radius: var(--ag-card-radius);
      white-space: normal
    }

    .ag-tooltip-custom.ag-tooltip-animate,
    .ag-tooltip.ag-tooltip-animate {
      transition: opacity 1s
    }

    .ag-tooltip-custom.ag-tooltip-animate.ag-tooltip-hiding,
    .ag-tooltip.ag-tooltip-animate.ag-tooltip-hiding {
      opacity: 0
    }

    .ag-ltr .ag-column-select-indent-1 {
      padding-left: calc(1*var(--ag-column-select-indent-size))
    }

    .ag-rtl .ag-column-select-indent-1 {
      padding-right: calc(1*var(--ag-column-select-indent-size))
    }

    .ag-ltr .ag-column-select-indent-2 {
      padding-left: calc(2*var(--ag-column-select-indent-size))
    }

    .ag-rtl .ag-column-select-indent-2 {
      padding-right: calc(2*var(--ag-column-select-indent-size))
    }

    .ag-ltr .ag-column-select-indent-3 {
      padding-left: calc(3*var(--ag-column-select-indent-size))
    }

    .ag-rtl .ag-column-select-indent-3 {
      padding-right: calc(3*var(--ag-column-select-indent-size))
    }

    .ag-ltr .ag-column-select-indent-4 {
      padding-left: calc(4*var(--ag-column-select-indent-size))
    }

    .ag-rtl .ag-column-select-indent-4 {
      padding-right: calc(4*var(--ag-column-select-indent-size))
    }

    .ag-ltr .ag-column-select-indent-5 {
      padding-left: calc(5*var(--ag-column-select-indent-size))
    }

    .ag-rtl .ag-column-select-indent-5 {
      padding-right: calc(5*var(--ag-column-select-indent-size))
    }

    .ag-ltr .ag-column-select-indent-6 {
      padding-left: calc(6*var(--ag-column-select-indent-size))
    }

    .ag-rtl .ag-column-select-indent-6 {
      padding-right: calc(6*var(--ag-column-select-indent-size))
    }

    .ag-ltr .ag-column-select-indent-7 {
      padding-left: calc(7*var(--ag-column-select-indent-size))
    }

    .ag-rtl .ag-column-select-indent-7 {
      padding-right: calc(7*var(--ag-column-select-indent-size))
    }

    .ag-ltr .ag-column-select-indent-8 {
      padding-left: calc(8*var(--ag-column-select-indent-size))
    }

    .ag-rtl .ag-column-select-indent-8 {
      padding-right: calc(8*var(--ag-column-select-indent-size))
    }

    .ag-ltr .ag-column-select-indent-9 {
      padding-left: calc(9*var(--ag-column-select-indent-size))
    }

    .ag-rtl .ag-column-select-indent-9 {
      padding-right: calc(9*var(--ag-column-select-indent-size))
    }

    .ag-column-select-header-icon {
      cursor: pointer
    }

    .ag-column-select-header-icon:focus-visible,
    .ag-column-select-virtual-list-item:focus-visible {
      outline: 0
    }

    .ag-column-select-header-icon:focus-visible::after {
      content: "";
      position: absolute;
      background-color: transparent;
      pointer-events: none;
      top: 0;
      left: 0;
      display: block;
      width: calc(100% - 0px);
      height: calc(100% - 0px);
      border: 1px solid;
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-ltr .ag-column-group-icons:not(:last-child),
    .ag-ltr .ag-column-select-checkbox:not(:last-child),
    .ag-ltr .ag-column-select-column-drag-handle:not(:last-child),
    .ag-ltr .ag-column-select-column-group-drag-handle:not(:last-child),
    .ag-ltr .ag-column-select-column-label:not(:last-child),
    .ag-ltr .ag-column-select-header-checkbox:not(:last-child),
    .ag-ltr .ag-column-select-header-filter-wrapper:not(:last-child),
    .ag-ltr .ag-column-select-header-icon:not(:last-child) {
      margin-right: var(--ag-widget-horizontal-spacing)
    }

    .ag-rtl .ag-column-group-icons:not(:last-child),
    .ag-rtl .ag-column-select-checkbox:not(:last-child),
    .ag-rtl .ag-column-select-column-drag-handle:not(:last-child),
    .ag-rtl .ag-column-select-column-group-drag-handle:not(:last-child),
    .ag-rtl .ag-column-select-column-label:not(:last-child),
    .ag-rtl .ag-column-select-header-checkbox:not(:last-child),
    .ag-rtl .ag-column-select-header-filter-wrapper:not(:last-child),
    .ag-rtl .ag-column-select-header-icon:not(:last-child) {
      margin-left: var(--ag-widget-horizontal-spacing)
    }

    .ag-column-select-virtual-list-item:focus-visible::after {
      content: "";
      position: absolute;
      background-color: transparent;
      pointer-events: none;
      top: 1px;
      left: 1px;
      display: block;
      width: calc(100% - 2px);
      height: calc(100% - 2px);
      border: 1px solid;
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-column-select-column-group:not(:last-child),
    .ag-column-select-column:not(:last-child) {
      margin-bottom: var(--ag-widget-vertical-spacing)
    }

    .ag-column-select-column-group-readonly,
    .ag-column-select-column-readonly {
      color: var(--ag-disabled-foreground-color);
      pointer-events: none
    }

    .ag-ltr .ag-column-select-add-group-indent {
      margin-left: calc(var(--ag-icon-size) + var(--ag-grid-size)*2)
    }

    .ag-rtl .ag-column-select-add-group-indent {
      margin-right: calc(var(--ag-icon-size) + var(--ag-grid-size)*2)
    }

    .ag-column-select-virtual-list-viewport {
      padding: calc(var(--ag-widget-container-vertical-padding)*.5)0
    }

    .ag-column-select-virtual-list-item {
      padding: 0 var(--ag-widget-container-horizontal-padding)
    }

    .ag-checkbox-edit {
      padding-left: var(--ag-cell-horizontal-padding);
      padding-right: var(--ag-cell-horizontal-padding)
    }

    .ag-rtl {
      text-align: right
    }

    .ag-root-wrapper {
      border-radius: var(--ag-wrapper-border-radius);
      border: var(--ag-borders) var(--ag-border-color)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-1 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*1)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-1 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*1)
    }

    .ag-ltr .ag-row-group-indent-1 {
      padding-left: calc(1*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-1 {
      padding-right: calc(1*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-1 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-1 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-2 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*2)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-2 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*2)
    }

    .ag-ltr .ag-row-group-indent-2 {
      padding-left: calc(2*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-2 {
      padding-right: calc(2*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-2 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-2 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-3 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*3)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-3 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*3)
    }

    .ag-ltr .ag-row-group-indent-3 {
      padding-left: calc(3*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-3 {
      padding-right: calc(3*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-3 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-3 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-4 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*4)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-4 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*4)
    }

    .ag-ltr .ag-row-group-indent-4 {
      padding-left: calc(4*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-4 {
      padding-right: calc(4*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-4 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-4 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-5 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*5)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-5 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*5)
    }

    .ag-ltr .ag-row-group-indent-5 {
      padding-left: calc(5*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-5 {
      padding-right: calc(5*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-5 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-5 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-6 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*6)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-6 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*6)
    }

    .ag-ltr .ag-row-group-indent-6 {
      padding-left: calc(6*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-6 {
      padding-right: calc(6*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-6 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-6 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-7 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*7)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-7 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*7)
    }

    .ag-ltr .ag-row-group-indent-7 {
      padding-left: calc(7*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-7 {
      padding-right: calc(7*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-7 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-7 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-8 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*8)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-8 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*8)
    }

    .ag-ltr .ag-row-group-indent-8 {
      padding-left: calc(8*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-8 {
      padding-right: calc(8*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-8 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-8 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-9 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*9)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-9 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*9)
    }

    .ag-ltr .ag-row-group-indent-9 {
      padding-left: calc(9*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-9 {
      padding-right: calc(9*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-9 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-9 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-10 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*10)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-10 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*10)
    }

    .ag-ltr .ag-row-group-indent-10 {
      padding-left: calc(10*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-10 {
      padding-right: calc(10*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-10 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-10 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-11 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*11)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-11 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*11)
    }

    .ag-ltr .ag-row-group-indent-11 {
      padding-left: calc(11*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-11 {
      padding-right: calc(11*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-11 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-11 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-12 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*12)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-12 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*12)
    }

    .ag-ltr .ag-row-group-indent-12 {
      padding-left: calc(12*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-12 {
      padding-right: calc(12*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-12 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-12 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-13 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*13)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-13 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*13)
    }

    .ag-ltr .ag-row-group-indent-13 {
      padding-left: calc(13*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-13 {
      padding-right: calc(13*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-13 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-13 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-14 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*14)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-14 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*14)
    }

    .ag-ltr .ag-row-group-indent-14 {
      padding-left: calc(14*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-14 {
      padding-right: calc(14*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-14 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-14 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-15 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*15)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-15 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*15)
    }

    .ag-ltr .ag-row-group-indent-15 {
      padding-left: calc(15*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-15 {
      padding-right: calc(15*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-15 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-15 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-16 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*16)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-16 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*16)
    }

    .ag-ltr .ag-row-group-indent-16 {
      padding-left: calc(16*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-16 {
      padding-right: calc(16*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-16 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-16 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-17 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*17)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-17 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*17)
    }

    .ag-ltr .ag-row-group-indent-17 {
      padding-left: calc(17*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-17 {
      padding-right: calc(17*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-17 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-17 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-18 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*18)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-18 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*18)
    }

    .ag-ltr .ag-row-group-indent-18 {
      padding-left: calc(18*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-18 {
      padding-right: calc(18*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-18 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-18 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-19 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*19)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-19 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*19)
    }

    .ag-ltr .ag-row-group-indent-19 {
      padding-left: calc(19*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-19 {
      padding-right: calc(19*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-19 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-19 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-20 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*20)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-20 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*20)
    }

    .ag-ltr .ag-row-group-indent-20 {
      padding-left: calc(20*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-20 {
      padding-right: calc(20*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-20 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-20 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-21 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*21)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-21 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*21)
    }

    .ag-ltr .ag-row-group-indent-21 {
      padding-left: calc(21*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-21 {
      padding-right: calc(21*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-21 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-21 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-22 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*22)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-22 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*22)
    }

    .ag-ltr .ag-row-group-indent-22 {
      padding-left: calc(22*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-22 {
      padding-right: calc(22*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-22 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-22 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-23 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*23)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-23 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*23)
    }

    .ag-ltr .ag-row-group-indent-23 {
      padding-left: calc(23*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-23 {
      padding-right: calc(23*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-23 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-23 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-24 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*24)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-24 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*24)
    }

    .ag-ltr .ag-row-group-indent-24 {
      padding-left: calc(24*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-24 {
      padding-right: calc(24*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-24 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-24 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-25 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*25)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-25 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*25)
    }

    .ag-ltr .ag-row-group-indent-25 {
      padding-left: calc(25*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-25 {
      padding-right: calc(25*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-25 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-25 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-26 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*26)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-26 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*26)
    }

    .ag-ltr .ag-row-group-indent-26 {
      padding-left: calc(26*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-26 {
      padding-right: calc(26*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-26 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-26 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-27 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*27)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-27 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*27)
    }

    .ag-ltr .ag-row-group-indent-27 {
      padding-left: calc(27*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-27 {
      padding-right: calc(27*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-27 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-27 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-28 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*28)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-28 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*28)
    }

    .ag-ltr .ag-row-group-indent-28 {
      padding-left: calc(28*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-28 {
      padding-right: calc(28*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-28 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-28 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-29 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*29)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-29 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*29)
    }

    .ag-ltr .ag-row-group-indent-29 {
      padding-left: calc(29*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-29 {
      padding-right: calc(29*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-29 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-29 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-30 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*30)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-30 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*30)
    }

    .ag-ltr .ag-row-group-indent-30 {
      padding-left: calc(30*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-30 {
      padding-right: calc(30*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-30 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-30 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-31 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*31)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-31 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*31)
    }

    .ag-ltr .ag-row-group-indent-31 {
      padding-left: calc(31*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-31 {
      padding-right: calc(31*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-31 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-31 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-32 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*32)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-32 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*32)
    }

    .ag-ltr .ag-row-group-indent-32 {
      padding-left: calc(32*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-32 {
      padding-right: calc(32*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-32 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-32 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-33 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*33)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-33 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*33)
    }

    .ag-ltr .ag-row-group-indent-33 {
      padding-left: calc(33*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-33 {
      padding-right: calc(33*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-33 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-33 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-34 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*34)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-34 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*34)
    }

    .ag-ltr .ag-row-group-indent-34 {
      padding-left: calc(34*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-34 {
      padding-right: calc(34*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-34 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-34 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-35 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*35)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-35 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*35)
    }

    .ag-ltr .ag-row-group-indent-35 {
      padding-left: calc(35*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-35 {
      padding-right: calc(35*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-35 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-35 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-36 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*36)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-36 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*36)
    }

    .ag-ltr .ag-row-group-indent-36 {
      padding-left: calc(36*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-36 {
      padding-right: calc(36*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-36 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-36 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-37 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*37)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-37 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*37)
    }

    .ag-ltr .ag-row-group-indent-37 {
      padding-left: calc(37*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-37 {
      padding-right: calc(37*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-37 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-37 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-38 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*38)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-38 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*38)
    }

    .ag-ltr .ag-row-group-indent-38 {
      padding-left: calc(38*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-38 {
      padding-right: calc(38*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-38 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-38 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-39 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*39)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-39 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*39)
    }

    .ag-ltr .ag-row-group-indent-39 {
      padding-left: calc(39*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-39 {
      padding-right: calc(39*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-39 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-39 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-40 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*40)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-40 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*40)
    }

    .ag-ltr .ag-row-group-indent-40 {
      padding-left: calc(40*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-40 {
      padding-right: calc(40*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-40 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-40 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-41 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*41)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-41 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*41)
    }

    .ag-ltr .ag-row-group-indent-41 {
      padding-left: calc(41*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-41 {
      padding-right: calc(41*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-41 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-41 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-42 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*42)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-42 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*42)
    }

    .ag-ltr .ag-row-group-indent-42 {
      padding-left: calc(42*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-42 {
      padding-right: calc(42*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-42 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-42 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-43 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*43)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-43 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*43)
    }

    .ag-ltr .ag-row-group-indent-43 {
      padding-left: calc(43*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-43 {
      padding-right: calc(43*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-43 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-43 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-44 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*44)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-44 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*44)
    }

    .ag-ltr .ag-row-group-indent-44 {
      padding-left: calc(44*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-44 {
      padding-right: calc(44*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-44 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-44 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-45 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*45)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-45 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*45)
    }

    .ag-ltr .ag-row-group-indent-45 {
      padding-left: calc(45*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-45 {
      padding-right: calc(45*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-45 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-45 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-46 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*46)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-46 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*46)
    }

    .ag-ltr .ag-row-group-indent-46 {
      padding-left: calc(46*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-46 {
      padding-right: calc(46*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-46 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-46 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-47 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*47)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-47 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*47)
    }

    .ag-ltr .ag-row-group-indent-47 {
      padding-left: calc(47*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-47 {
      padding-right: calc(47*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-47 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-47 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-48 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*48)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-48 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*48)
    }

    .ag-ltr .ag-row-group-indent-48 {
      padding-left: calc(48*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-48 {
      padding-right: calc(48*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-48 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-48 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-49 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*49)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-49 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*49)
    }

    .ag-ltr .ag-row-group-indent-49 {
      padding-left: calc(49*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-49 {
      padding-right: calc(49*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-49 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-49 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-50 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*50)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-50 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*50)
    }

    .ag-ltr .ag-row-group-indent-50 {
      padding-left: calc(50*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-50 {
      padding-right: calc(50*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-50 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-50 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-51 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*51)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-51 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*51)
    }

    .ag-ltr .ag-row-group-indent-51 {
      padding-left: calc(51*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-51 {
      padding-right: calc(51*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-51 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-51 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-52 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*52)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-52 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*52)
    }

    .ag-ltr .ag-row-group-indent-52 {
      padding-left: calc(52*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-52 {
      padding-right: calc(52*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-52 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-52 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-53 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*53)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-53 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*53)
    }

    .ag-ltr .ag-row-group-indent-53 {
      padding-left: calc(53*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-53 {
      padding-right: calc(53*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-53 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-53 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-54 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*54)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-54 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*54)
    }

    .ag-ltr .ag-row-group-indent-54 {
      padding-left: calc(54*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-54 {
      padding-right: calc(54*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-54 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-54 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-55 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*55)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-55 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*55)
    }

    .ag-ltr .ag-row-group-indent-55 {
      padding-left: calc(55*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-55 {
      padding-right: calc(55*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-55 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-55 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-56 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*56)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-56 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*56)
    }

    .ag-ltr .ag-row-group-indent-56 {
      padding-left: calc(56*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-56 {
      padding-right: calc(56*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-56 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-56 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-57 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*57)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-57 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*57)
    }

    .ag-ltr .ag-row-group-indent-57 {
      padding-left: calc(57*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-57 {
      padding-right: calc(57*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-57 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-57 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-58 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*58)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-58 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*58)
    }

    .ag-ltr .ag-row-group-indent-58 {
      padding-left: calc(58*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-58 {
      padding-right: calc(58*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-58 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-58 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-59 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*59)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-59 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*59)
    }

    .ag-ltr .ag-row-group-indent-59 {
      padding-left: calc(59*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-59 {
      padding-right: calc(59*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-59 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-59 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-60 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*60)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-60 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*60)
    }

    .ag-ltr .ag-row-group-indent-60 {
      padding-left: calc(60*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-60 {
      padding-right: calc(60*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-60 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-60 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-61 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*61)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-61 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*61)
    }

    .ag-ltr .ag-row-group-indent-61 {
      padding-left: calc(61*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-61 {
      padding-right: calc(61*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-61 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-61 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-62 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*62)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-62 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*62)
    }

    .ag-ltr .ag-row-group-indent-62 {
      padding-left: calc(62*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-62 {
      padding-right: calc(62*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-62 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-62 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-63 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*63)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-63 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*63)
    }

    .ag-ltr .ag-row-group-indent-63 {
      padding-left: calc(63*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-63 {
      padding-right: calc(63*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-63 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-63 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-64 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*64)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-64 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*64)
    }

    .ag-ltr .ag-row-group-indent-64 {
      padding-left: calc(64*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-64 {
      padding-right: calc(64*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-64 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-64 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-65 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*65)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-65 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*65)
    }

    .ag-ltr .ag-row-group-indent-65 {
      padding-left: calc(65*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-65 {
      padding-right: calc(65*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-65 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-65 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-66 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*66)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-66 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*66)
    }

    .ag-ltr .ag-row-group-indent-66 {
      padding-left: calc(66*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-66 {
      padding-right: calc(66*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-66 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-66 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-67 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*67)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-67 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*67)
    }

    .ag-ltr .ag-row-group-indent-67 {
      padding-left: calc(67*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-67 {
      padding-right: calc(67*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-67 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-67 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-68 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*68)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-68 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*68)
    }

    .ag-ltr .ag-row-group-indent-68 {
      padding-left: calc(68*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-68 {
      padding-right: calc(68*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-68 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-68 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-69 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*69)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-69 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*69)
    }

    .ag-ltr .ag-row-group-indent-69 {
      padding-left: calc(69*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-69 {
      padding-right: calc(69*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-69 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-69 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-70 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*70)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-70 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*70)
    }

    .ag-ltr .ag-row-group-indent-70 {
      padding-left: calc(70*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-70 {
      padding-right: calc(70*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-70 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-70 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-71 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*71)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-71 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*71)
    }

    .ag-ltr .ag-row-group-indent-71 {
      padding-left: calc(71*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-71 {
      padding-right: calc(71*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-71 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-71 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-72 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*72)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-72 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*72)
    }

    .ag-ltr .ag-row-group-indent-72 {
      padding-left: calc(72*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-72 {
      padding-right: calc(72*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-72 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-72 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-73 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*73)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-73 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*73)
    }

    .ag-ltr .ag-row-group-indent-73 {
      padding-left: calc(73*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-73 {
      padding-right: calc(73*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-73 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-73 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-74 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*74)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-74 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*74)
    }

    .ag-ltr .ag-row-group-indent-74 {
      padding-left: calc(74*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-74 {
      padding-right: calc(74*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-74 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-74 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-75 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*75)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-75 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*75)
    }

    .ag-ltr .ag-row-group-indent-75 {
      padding-left: calc(75*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-75 {
      padding-right: calc(75*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-75 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-75 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-76 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*76)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-76 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*76)
    }

    .ag-ltr .ag-row-group-indent-76 {
      padding-left: calc(76*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-76 {
      padding-right: calc(76*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-76 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-76 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-77 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*77)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-77 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*77)
    }

    .ag-ltr .ag-row-group-indent-77 {
      padding-left: calc(77*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-77 {
      padding-right: calc(77*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-77 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-77 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-78 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*78)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-78 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*78)
    }

    .ag-ltr .ag-row-group-indent-78 {
      padding-left: calc(78*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-78 {
      padding-right: calc(78*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-78 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-78 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-79 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*79)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-79 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*79)
    }

    .ag-ltr .ag-row-group-indent-79 {
      padding-left: calc(79*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-79 {
      padding-right: calc(79*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-79 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-79 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-80 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*80)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-80 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*80)
    }

    .ag-ltr .ag-row-group-indent-80 {
      padding-left: calc(80*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-80 {
      padding-right: calc(80*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-80 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-80 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-81 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*81)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-81 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*81)
    }

    .ag-ltr .ag-row-group-indent-81 {
      padding-left: calc(81*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-81 {
      padding-right: calc(81*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-81 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-81 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-82 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*82)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-82 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*82)
    }

    .ag-ltr .ag-row-group-indent-82 {
      padding-left: calc(82*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-82 {
      padding-right: calc(82*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-82 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-82 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-83 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*83)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-83 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*83)
    }

    .ag-ltr .ag-row-group-indent-83 {
      padding-left: calc(83*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-83 {
      padding-right: calc(83*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-83 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-83 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-84 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*84)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-84 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*84)
    }

    .ag-ltr .ag-row-group-indent-84 {
      padding-left: calc(84*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-84 {
      padding-right: calc(84*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-84 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-84 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-85 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*85)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-85 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*85)
    }

    .ag-ltr .ag-row-group-indent-85 {
      padding-left: calc(85*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-85 {
      padding-right: calc(85*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-85 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-85 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-86 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*86)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-86 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*86)
    }

    .ag-ltr .ag-row-group-indent-86 {
      padding-left: calc(86*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-86 {
      padding-right: calc(86*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-86 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-86 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-87 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*87)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-87 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*87)
    }

    .ag-ltr .ag-row-group-indent-87 {
      padding-left: calc(87*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-87 {
      padding-right: calc(87*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-87 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-87 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-88 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*88)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-88 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*88)
    }

    .ag-ltr .ag-row-group-indent-88 {
      padding-left: calc(88*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-88 {
      padding-right: calc(88*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-88 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-88 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-89 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*89)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-89 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*89)
    }

    .ag-ltr .ag-row-group-indent-89 {
      padding-left: calc(89*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-89 {
      padding-right: calc(89*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-89 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-89 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-90 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*90)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-90 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*90)
    }

    .ag-ltr .ag-row-group-indent-90 {
      padding-left: calc(90*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-90 {
      padding-right: calc(90*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-90 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-90 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-91 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*91)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-91 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*91)
    }

    .ag-ltr .ag-row-group-indent-91 {
      padding-left: calc(91*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-91 {
      padding-right: calc(91*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-91 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-91 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-92 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*92)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-92 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*92)
    }

    .ag-ltr .ag-row-group-indent-92 {
      padding-left: calc(92*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-92 {
      padding-right: calc(92*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-92 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-92 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-93 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*93)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-93 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*93)
    }

    .ag-ltr .ag-row-group-indent-93 {
      padding-left: calc(93*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-93 {
      padding-right: calc(93*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-93 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-93 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-94 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*94)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-94 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*94)
    }

    .ag-ltr .ag-row-group-indent-94 {
      padding-left: calc(94*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-94 {
      padding-right: calc(94*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-94 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-94 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-95 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*95)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-95 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*95)
    }

    .ag-ltr .ag-row-group-indent-95 {
      padding-left: calc(95*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-95 {
      padding-right: calc(95*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-95 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-95 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-96 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*96)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-96 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*96)
    }

    .ag-ltr .ag-row-group-indent-96 {
      padding-left: calc(96*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-96 {
      padding-right: calc(96*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-96 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-96 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-97 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*97)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-97 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*97)
    }

    .ag-ltr .ag-row-group-indent-97 {
      padding-left: calc(97*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-97 {
      padding-right: calc(97*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-97 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-97 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-98 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*98)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-98 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*98)
    }

    .ag-ltr .ag-row-group-indent-98 {
      padding-left: calc(98*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-98 {
      padding-right: calc(98*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-level-98 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-level-98 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-ltr .ag-row>.ag-cell-wrapper.ag-row-group-indent-99 {
      padding-left: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*99)
    }

    .ag-rtl .ag-row>.ag-cell-wrapper.ag-row-group-indent-99 {
      padding-right: calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*99)
    }

    .ag-ltr .ag-row-group-indent-99 {
      padding-left: calc(99*var(--ag-row-group-indent-size))
    }

    .ag-rtl .ag-row-group-indent-99 {
      padding-right: calc(99*var(--ag-row-group-indent-size))
    }

    .ag-ltr .ag-row-group-leaf-indent,
    .ag-ltr .ag-row-level-99 .ag-pivot-leaf-group {
      margin-left: var(--ag-row-group-indent-size)
    }

    .ag-rtl .ag-row-group-leaf-indent,
    .ag-rtl .ag-row-level-99 .ag-pivot-leaf-group {
      margin-right: var(--ag-row-group-indent-size)
    }

    .ag-value-change-delta {
      padding-right: 2px
    }

    .ag-value-change-delta-up {
      color: var(--ag-value-change-delta-up-color)
    }

    .ag-value-change-delta-down {
      color: var(--ag-value-change-delta-down-color)
    }

    .ag-value-change-value {
      background-color: transparent;
      border-radius: 1px;
      padding-left: 1px;
      padding-right: 1px;
      transition: background-color 1s
    }

    .ag-value-change-value-highlight {
      background-color: var(--ag-value-change-value-highlight-background-color);
      transition: background-color .1s
    }

    .ag-cell-data-changed {
      background-color: var(--ag-value-change-value-highlight-background-color) !important
    }

    .ag-cell-data-changed-animation {
      background-color: transparent
    }

    .ag-cell-highlight {
      background-color: var(--ag-range-selection-highlight-color) !important
    }

    .ag-row {
      height: var(--ag-row-height);
      background-color: var(--ag-background-color);
      color: var(--ag-data-color);
      border-bottom: var(--ag-row-border-style) var(--ag-row-border-color) var(--ag-row-border-width)
    }

    .ag-row-highlight-above::after,
    .ag-row-highlight-below::after {
      content: "";
      position: absolute;
      width: calc(100% - 1px);
      height: 1px;
      background-color: var(--ag-range-selection-border-color);
      left: 1px
    }

    .ag-row-highlight-above::after {
      top: -1px
    }

    .ag-row-highlight-above.ag-row-first::after {
      top: 0
    }

    .ag-row-highlight-below::after {
      bottom: 0
    }

    .ag-row-odd {
      background-color: var(--ag-odd-row-background-color)
    }

    .ag-body-horizontal-scroll:not(.ag-scrollbar-invisible) .ag-horizontal-left-spacer:not(.ag-scroller-corner) {
      border-right: var(--ag-borders-critical) var(--ag-border-color)
    }

    .ag-body-horizontal-scroll:not(.ag-scrollbar-invisible) .ag-horizontal-right-spacer:not(.ag-scroller-corner),
    .ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left):not(.ag-cell-range-single-cell) {
      border-left: var(--ag-borders-critical) var(--ag-border-color)
    }

    .ag-row-selected::before {
      content: "";
      background-color: var(--ag-selected-row-background-color);
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0
    }

    .ag-row-hover.ag-full-width-row.ag-row-group::before,
    .ag-row-hover:not(.ag-full-width-row)::before {
      content: "";
      background-color: var(--ag-row-hover-color);
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none
    }

    .ag-row-hover.ag-full-width-row.ag-row-group>* {
      position: relative
    }

    .ag-row-hover.ag-row-selected::before {
      background-color: var(--ag-row-hover-color);
      background-image: linear-gradient(var(--ag-selected-row-background-color), var(--ag-selected-row-background-color))
    }

    .ag-column-hover {
      background-color: var(--ag-column-hover-color)
    }

    .ag-ltr .ag-right-aligned-cell {
      text-align: right
    }

    .ag-rtl .ag-right-aligned-cell {
      text-align: left
    }

    .ag-ltr .ag-right-aligned-cell .ag-cell-value,
    .ag-ltr .ag-right-aligned-cell .ag-group-value {
      margin-left: auto
    }

    .ag-rtl .ag-right-aligned-cell .ag-cell-value,
    .ag-rtl .ag-right-aligned-cell .ag-group-value {
      margin-right: auto
    }

    .ag-cell,
    .ag-full-width-row .ag-cell-wrapper.ag-row-group {
      --ag-internal-calculated-line-height: var(--ag-line-height, calc(var(--ag-row-height) - var(--ag-row-border-width)));
      --ag-internal-padded-row-height: calc(var(--ag-row-height) - var(--ag-row-border-width));
      border: 1px solid transparent;
      line-height: min(var(--ag-internal-calculated-line-height), var(--ag-internal-padded-row-height));
      -webkit-font-smoothing: subpixel-antialiased
    }

    .ag-cell,
    .ag-full-width-row .ag-cell-wrapper.ag-row-group,
    .ag-row>.ag-cell-wrapper {
      padding-left: calc(var(--ag-cell-horizontal-padding) - 1px);
      padding-right: calc(var(--ag-cell-horizontal-padding) - 1px)
    }

    .ag-row-dragging {
      cursor: move;
      opacity: .5
    }

    .ag-autocomplete-list-popup,
    .ag-cell-inline-editing,
    .ag-popup-editor .ag-large-text {
      border: 1px solid var(--ag-border-color);
      border-radius: var(--ag-card-radius);
      box-shadow: var(--ag-card-shadow);
      padding: 0;
      background-color: var(--ag-control-panel-background-color)
    }

    .ag-autocomplete-list-popup,
    .ag-popup-editor .ag-large-text {
      border: var(--ag-borders) var(--ag-border-color);
      background: var(--ag-background-color);
      padding: var(--ag-grid-size)
    }

    .ag-large-text-input {
      height: auto;
      padding: var(--ag-cell-horizontal-padding)
    }

    .ag-rtl .ag-large-text-input textarea {
      resize: none
    }

    .ag-details-row {
      padding: calc(var(--ag-grid-size)*5);
      background-color: var(--ag-background-color)
    }

    .ag-layout-auto-height .ag-center-cols-container,
    .ag-layout-auto-height .ag-center-cols-viewport,
    .ag-layout-print .ag-center-cols-container,
    .ag-layout-print .ag-center-cols-viewport {
      min-height: 50px
    }

    .ag-overlay-loading-wrapper {
      background-color: var(--ag-modal-overlay-background-color)
    }

    .ag-overlay-loading-center {
      border: var(--ag-borders) var(--ag-border-color);
      background: var(--ag-background-color);
      border-radius: var(--ag-card-radius);
      box-shadow: var(--ag-card-shadow);
      padding: var(--ag-grid-size)
    }

    .ag-overlay-no-rows-wrapper.ag-layout-auto-height {
      padding-top: 30px
    }

    .ag-loading {
      display: flex;
      height: 100%;
      align-items: center
    }

    .ag-ltr .ag-loading {
      padding-left: var(--ag-cell-horizontal-padding)
    }

    .ag-rtl .ag-loading {
      padding-right: var(--ag-cell-horizontal-padding)
    }

    .ag-ltr .ag-loading-icon {
      padding-right: var(--ag-cell-widget-spacing)
    }

    .ag-rtl .ag-loading-icon {
      padding-left: var(--ag-cell-widget-spacing)
    }

    .ag-icon-loading {
      animation-name: spin;
      animation-duration: 1000ms;
      animation-iteration-count: infinite;
      animation-timing-function: linear
    }

    .ag-floating-top {
      border-bottom: var(--ag-borders-critical) var(--ag-border-color)
    }

    .ag-floating-bottom {
      border-top: var(--ag-borders-critical) var(--ag-border-color)
    }

    .ag-ltr .ag-cell {
      border-right: var(--ag-cell-horizontal-border)
    }

    .ag-rtl .ag-cell {
      border-left: var(--ag-cell-horizontal-border)
    }

    .ag-ltr .ag-cell {
      border-right-width: 1px
    }

    .ag-rtl .ag-cell {
      border-left-width: 1px
    }

    .ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right):not(.ag-cell-range-single-cell) {
      border-right: var(--ag-borders-critical) var(--ag-border-color)
    }

    .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-single-cell:not(.ag-cell-inline-editing),
    .ag-cell-range-selected-1:not(.ag-cell-focus),
    .ag-cell-range-selected:not(.ag-cell-focus) {
      background-color: var(--ag-range-selection-background-color)
    }

    .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-single-cell:not(.ag-cell-inline-editing).ag-cell-range-chart,
    .ag-cell-range-selected:not(.ag-cell-focus).ag-cell-range-chart {
      background-color: var(--ag-range-selection-chart-background-color) !important
    }

    .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-single-cell:not(.ag-cell-inline-editing).ag-cell-range-chart.ag-cell-range-chart-category,
    .ag-cell-range-selected:not(.ag-cell-focus).ag-cell-range-chart.ag-cell-range-chart-category {
      background-color: var(--ag-range-selection-chart-category-background-color) !important
    }

    .ag-root:not(.ag-context-menu-open) .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-selected-1:not(.ag-cell-inline-editing) {
      background-color: var(--ag-range-selection-background-color)
    }

    .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-selected-2,
    .ag-cell-range-selected-2:not(.ag-cell-focus) {
      background-color: var(--ag-range-selection-background-color-2)
    }

    .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-selected-3,
    .ag-cell-range-selected-3:not(.ag-cell-focus) {
      background-color: var(--ag-range-selection-background-color-3)
    }

    .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-selected-4,
    .ag-cell-range-selected-4:not(.ag-cell-focus) {
      background-color: var(--ag-range-selection-background-color-4)
    }

    .ag-cell.ag-cell-range-selected:not(.ag-cell-range-single-cell).ag-cell-range-top {
      border-top-color: var(--ag-range-selection-border-color);
      border-top-style: var(--ag-range-selection-border-style)
    }

    .ag-cell.ag-cell-range-selected:not(.ag-cell-range-single-cell).ag-cell-range-right {
      border-right-color: var(--ag-range-selection-border-color);
      border-right-style: var(--ag-range-selection-border-style)
    }

    .ag-cell.ag-cell-range-selected:not(.ag-cell-range-single-cell).ag-cell-range-bottom {
      border-bottom-color: var(--ag-range-selection-border-color);
      border-bottom-style: var(--ag-range-selection-border-style)
    }

    .ag-cell.ag-cell-range-selected:not(.ag-cell-range-single-cell).ag-cell-range-left {
      border-left-color: var(--ag-range-selection-border-color);
      border-left-style: var(--ag-range-selection-border-style)
    }

    .ag-ltr .ag-cell-focus:not(.ag-cell-range-selected):focus-within,
    .ag-ltr .ag-cell-range-single-cell,
    .ag-ltr .ag-cell-range-single-cell.ag-cell-range-handle,
    .ag-ltr .ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),
    .ag-ltr .ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group,
    .ag-rtl .ag-cell-focus:not(.ag-cell-range-selected):focus-within,
    .ag-rtl .ag-cell-range-single-cell,
    .ag-rtl .ag-cell-range-single-cell.ag-cell-range-handle,
    .ag-rtl .ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),
    .ag-rtl .ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group {
      border: 1px solid;
      border-color: var(--ag-range-selection-border-color);
      border-style: var(--ag-range-selection-border-style);
      outline: initial
    }

    .ag-cell.ag-selection-fill-top,
    .ag-cell.ag-selection-fill-top.ag-cell-range-selected {
      border-top: 1px dashed;
      border-top-color: var(--ag-range-selection-border-color)
    }

    .ag-ltr .ag-cell.ag-selection-fill-right,
    .ag-ltr .ag-cell.ag-selection-fill-right.ag-cell-range-selected {
      border-right: 1px dashed var(--ag-range-selection-border-color) !important
    }

    .ag-rtl .ag-cell.ag-selection-fill-right,
    .ag-rtl .ag-cell.ag-selection-fill-right.ag-cell-range-selected {
      border-left: 1px dashed var(--ag-range-selection-border-color) !important
    }

    .ag-cell.ag-selection-fill-bottom,
    .ag-cell.ag-selection-fill-bottom.ag-cell-range-selected {
      border-bottom: 1px dashed;
      border-bottom-color: var(--ag-range-selection-border-color)
    }

    .ag-ltr .ag-cell.ag-selection-fill-left,
    .ag-ltr .ag-cell.ag-selection-fill-left.ag-cell-range-selected {
      border-left: 1px dashed var(--ag-range-selection-border-color) !important
    }

    .ag-rtl .ag-cell.ag-selection-fill-left,
    .ag-rtl .ag-cell.ag-selection-fill-left.ag-cell-range-selected {
      border-right: 1px dashed var(--ag-range-selection-border-color) !important
    }

    .ag-fill-handle,
    .ag-range-handle {
      position: absolute;
      width: 6px;
      height: 6px;
      bottom: -1px;
      background-color: var(--ag-range-selection-border-color)
    }

    .ag-ltr .ag-fill-handle,
    .ag-ltr .ag-range-handle {
      right: -1px
    }

    .ag-rtl .ag-fill-handle,
    .ag-rtl .ag-range-handle {
      left: -1px
    }

    .ag-fill-handle {
      cursor: cell
    }

    .ag-range-handle {
      cursor: nwse-resize
    }

    .ag-cell-inline-editing {
      border-color: var(--ag-input-focus-border-color) !important
    }

    .ag-menu {
      border: var(--ag-borders) var(--ag-border-color);
      background: var(--ag-background-color);
      border-radius: var(--ag-card-radius);
      box-shadow: var(--ag-card-shadow);
      padding: var(--ag-grid-size);
      background-color: var(--ag-menu-background-color);
      border-color: var(--ag-menu-border-color);
      padding: 0
    }

    .ag-menu-list {
      cursor: default;
      padding: var(--ag-grid-size)0
    }

    .ag-menu-separator {
      height: calc(var(--ag-grid-size)*2 + 1px)
    }

    .ag-menu-separator-part::after {
      content: "";
      display: block;
      border-top: var(--ag-borders-critical) var(--ag-border-color)
    }

    .ag-compact-menu-option-active,
    .ag-menu-option-active {
      background-color: var(--ag-row-hover-color)
    }

    .ag-compact-menu-option-part,
    .ag-menu-option-part {
      line-height: var(--ag-icon-size);
      padding: calc(var(--ag-grid-size) + 2px)0
    }

    .ag-compact-menu-option-disabled,
    .ag-menu-option-disabled {
      opacity: .5
    }

    .ag-compact-menu-option-icon,
    .ag-menu-option-icon {
      width: var(--ag-icon-size)
    }

    .ag-ltr .ag-compact-menu-option-icon,
    .ag-ltr .ag-menu-option-icon {
      padding-left: calc(var(--ag-grid-size)*2)
    }

    .ag-rtl .ag-compact-menu-option-icon,
    .ag-rtl .ag-menu-option-icon {
      padding-right: calc(var(--ag-grid-size)*2)
    }

    .ag-compact-menu-option-text,
    .ag-menu-option-text {
      padding-left: calc(var(--ag-grid-size)*2);
      padding-right: calc(var(--ag-grid-size)*2)
    }

    .ag-ltr .ag-compact-menu-option-shortcut,
    .ag-ltr .ag-menu-option-shortcut {
      padding-right: var(--ag-grid-size)
    }

    .ag-rtl .ag-compact-menu-option-shortcut,
    .ag-rtl .ag-menu-option-shortcut {
      padding-left: var(--ag-grid-size)
    }

    .ag-ltr .ag-compact-menu-option-popup-pointer,
    .ag-ltr .ag-menu-option-popup-pointer {
      padding-right: var(--ag-grid-size)
    }

    .ag-ltr .ag-filter-toolpanel-group.ag-has-filter>.ag-group-title-bar .ag-group-title::after,
    .ag-rtl .ag-compact-menu-option-popup-pointer,
    .ag-rtl .ag-menu-option-popup-pointer {
      padding-left: var(--ag-grid-size)
    }

    .ag-tabs {
      min-width: var(--ag-tab-min-width)
    }

    .ag-tab,
    .ag-tabs-header {
      display: flex
    }

    .ag-tab {
      border-bottom: var(--ag-selected-tab-underline-width) solid transparent;
      transition: border-bottom var(--ag-selected-tab-underline-transition-speed);
      flex: none;
      align-items: center;
      justify-content: center;
      cursor: pointer
    }

    .ag-tab:focus-visible {
      outline: 0
    }

    .ag-tab:focus-visible::after {
      content: "";
      position: absolute;
      background-color: transparent;
      pointer-events: none;
      top: 4px;
      left: 4px;
      display: block;
      width: calc(100% - 8px);
      height: calc(100% - 8px);
      border: 1px solid;
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-tab-selected {
      border-bottom-color: var(--ag-selected-tab-underline-color)
    }

    .ag-menu-header {
      color: var(--ag-secondary-foreground-color)
    }

    .ag-filter-separator {
      border-top: var(--ag-borders-critical) var(--ag-border-color)
    }

    .ag-filter-select .ag-picker-field-wrapper {
      width: 0
    }

    .ag-filter-condition-operator {
      height: 17px
    }

    .ag-ltr .ag-filter-condition-operator-or {
      margin-left: calc(var(--ag-grid-size)*2)
    }

    .ag-rtl .ag-filter-condition-operator-or {
      margin-right: calc(var(--ag-grid-size)*2)
    }

    .ag-set-filter-select-all {
      padding-top: var(--ag-widget-container-vertical-padding)
    }

    .ag-filter-no-matches,
    .ag-set-filter-list {
      height: calc(var(--ag-list-item-height)*6)
    }

    .ag-set-filter-tree-list {
      height: calc(var(--ag-list-item-height)*10)
    }

    .ag-set-filter-filter {
      margin-top: var(--ag-widget-container-vertical-padding);
      margin-left: var(--ag-widget-container-horizontal-padding);
      margin-right: var(--ag-widget-container-horizontal-padding)
    }

    .ag-filter-to {
      margin-top: var(--ag-widget-vertical-spacing)
    }

    .ag-mini-filter {
      margin: var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)
    }

    .ag-set-filter-item {
      padding: 0 var(--ag-widget-container-horizontal-padding)
    }

    .ag-ltr .ag-set-filter-indent-1 {
      padding-left: calc(var(--ag-widget-container-horizontal-padding) + 1*var(--ag-set-filter-indent-size))
    }

    .ag-rtl .ag-set-filter-indent-1 {
      padding-right: calc(var(--ag-widget-container-horizontal-padding) + 1*var(--ag-set-filter-indent-size))
    }

    .ag-ltr .ag-set-filter-indent-2 {
      padding-left: calc(var(--ag-widget-container-horizontal-padding) + 2*var(--ag-set-filter-indent-size))
    }

    .ag-rtl .ag-set-filter-indent-2 {
      padding-right: calc(var(--ag-widget-container-horizontal-padding) + 2*var(--ag-set-filter-indent-size))
    }

    .ag-ltr .ag-set-filter-indent-3 {
      padding-left: calc(var(--ag-widget-container-horizontal-padding) + 3*var(--ag-set-filter-indent-size))
    }

    .ag-rtl .ag-set-filter-indent-3 {
      padding-right: calc(var(--ag-widget-container-horizontal-padding) + 3*var(--ag-set-filter-indent-size))
    }

    .ag-ltr .ag-set-filter-indent-4 {
      padding-left: calc(var(--ag-widget-container-horizontal-padding) + 4*var(--ag-set-filter-indent-size))
    }

    .ag-rtl .ag-set-filter-indent-4 {
      padding-right: calc(var(--ag-widget-container-horizontal-padding) + 4*var(--ag-set-filter-indent-size))
    }

    .ag-ltr .ag-set-filter-indent-5 {
      padding-left: calc(var(--ag-widget-container-horizontal-padding) + 5*var(--ag-set-filter-indent-size))
    }

    .ag-rtl .ag-set-filter-indent-5 {
      padding-right: calc(var(--ag-widget-container-horizontal-padding) + 5*var(--ag-set-filter-indent-size))
    }

    .ag-ltr .ag-set-filter-indent-6 {
      padding-left: calc(var(--ag-widget-container-horizontal-padding) + 6*var(--ag-set-filter-indent-size))
    }

    .ag-rtl .ag-set-filter-indent-6 {
      padding-right: calc(var(--ag-widget-container-horizontal-padding) + 6*var(--ag-set-filter-indent-size))
    }

    .ag-ltr .ag-set-filter-indent-7 {
      padding-left: calc(var(--ag-widget-container-horizontal-padding) + 7*var(--ag-set-filter-indent-size))
    }

    .ag-rtl .ag-set-filter-indent-7 {
      padding-right: calc(var(--ag-widget-container-horizontal-padding) + 7*var(--ag-set-filter-indent-size))
    }

    .ag-ltr .ag-set-filter-indent-8 {
      padding-left: calc(var(--ag-widget-container-horizontal-padding) + 8*var(--ag-set-filter-indent-size))
    }

    .ag-rtl .ag-set-filter-indent-8 {
      padding-right: calc(var(--ag-widget-container-horizontal-padding) + 8*var(--ag-set-filter-indent-size))
    }

    .ag-ltr .ag-set-filter-indent-9 {
      padding-left: calc(var(--ag-widget-container-horizontal-padding) + 9*var(--ag-set-filter-indent-size))
    }

    .ag-rtl .ag-set-filter-indent-9 {
      padding-right: calc(var(--ag-widget-container-horizontal-padding) + 9*var(--ag-set-filter-indent-size))
    }

    .ag-ltr .ag-set-filter-add-group-indent {
      margin-left: calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))
    }

    .ag-rtl .ag-set-filter-add-group-indent {
      margin-right: calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))
    }

    .ag-ltr .ag-set-filter-group-icons {
      margin-right: var(--ag-widget-container-horizontal-padding)
    }

    .ag-rtl .ag-set-filter-group-icons {
      margin-left: var(--ag-widget-container-horizontal-padding)
    }

    .ag-filter-menu .ag-set-filter-list {
      min-width: 200px
    }

    .ag-filter-virtual-list-item:focus-visible {
      outline: 0
    }

    .ag-filter-virtual-list-item:focus-visible::after {
      content: "";
      position: absolute;
      background-color: transparent;
      pointer-events: none;
      top: 1px;
      left: 1px;
      display: block;
      width: calc(100% - 2px);
      height: calc(100% - 2px);
      border: 1px solid;
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-filter-apply-panel {
      padding: var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);
      border-top: var(--ag-borders-secondary) var(--ag-secondary-border-color)
    }

    .ag-filter-apply-panel-button {
      line-height: 1.5
    }

    .ag-ltr .ag-filter-apply-panel-button {
      margin-left: calc(var(--ag-grid-size)*2)
    }

    .ag-rtl .ag-filter-apply-panel-button {
      margin-right: calc(var(--ag-grid-size)*2)
    }

    .ag-simple-filter-body-wrapper {
      padding: var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);
      padding-bottom: calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));
      overflow-y: auto;
      min-height: calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing))
    }

    .ag-simple-filter-body-wrapper>* {
      margin-bottom: var(--ag-widget-vertical-spacing)
    }

    .ag-simple-filter-body-wrapper .ag-resizer-wrapper {
      margin: 0
    }

    .ag-menu:not(.ag-tabs) .ag-filter .ag-simple-filter-body-wrapper,
    .ag-menu:not(.ag-tabs) .ag-filter>:not(.ag-filter-wrapper) {
      min-width: calc(var(--ag-menu-min-width) - 2px)
    }

    .ag-filter-no-matches {
      padding: var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)
    }

    .ag-multi-filter-menu-item {
      margin: var(--ag-grid-size)0
    }

    .ag-multi-filter-group-title-bar {
      padding: calc(var(--ag-grid-size)*2) var(--ag-grid-size);
      background-color: transparent
    }

    .ag-group-filter-field-select-wrapper {
      padding: var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);
      padding-bottom: calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing))
    }

    .ag-group-filter-field-select-wrapper>* {
      margin-bottom: var(--ag-widget-vertical-spacing)
    }

    .ag-multi-filter-group-title-bar:focus-visible,
    .ag-side-button-button:focus-visible {
      outline: 0
    }

    .ag-column-select-header:focus-visible::after,
    .ag-filter-toolpanel-header:focus-visible::after,
    .ag-multi-filter-group-title-bar:focus-visible::after,
    .ag-side-button-button:focus-visible::after {
      content: "";
      position: absolute;
      background-color: transparent;
      pointer-events: none;
      top: 4px;
      left: 4px;
      display: block;
      width: calc(100% - 8px);
      height: calc(100% - 8px);
      border: 1px solid;
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-side-bar {
      position: relative
    }

    .ag-tool-panel-wrapper {
      width: var(--ag-side-bar-panel-width);
      background-color: var(--ag-control-panel-background-color)
    }

    .ag-side-buttons {
      padding-top: calc(var(--ag-grid-size)*4);
      width: calc(var(--ag-icon-size) + 4px);
      position: relative;
      overflow: hidden
    }

    button.ag-side-button-button {
      color: inherit;
      font-family: inherit;
      font-size: inherit;
      font-weight: inherit;
      line-height: inherit;
      background: 0 0;
      padding: calc(var(--ag-grid-size)*2)0;
      width: 100%;
      margin: 0;
      min-height: calc(var(--ag-grid-size)*18);
      background-position-y: center;
      background-position-x: center;
      background-repeat: no-repeat;
      border: 0;
      border-top: var(--ag-borders-side-button) var(--ag-border-color);
      border-bottom: var(--ag-borders-side-button) var(--ag-border-color)
    }

    .ag-selected button.ag-side-button-button {
      background-color: var(--ag-side-button-selected-background-color)
    }

    .ag-side-button-icon-wrapper {
      margin-bottom: 3px
    }

    .ag-ltr .ag-side-bar-left,
    .ag-rtl .ag-side-bar-right {
      border-right: var(--ag-borders) var(--ag-border-color)
    }

    .ag-ltr .ag-side-bar-left .ag-tool-panel-wrapper,
    .ag-ltr .ag-side-bar-right,
    .ag-rtl .ag-side-bar-left,
    .ag-rtl .ag-side-bar-right .ag-tool-panel-wrapper {
      border-left: var(--ag-borders) var(--ag-border-color)
    }

    .ag-ltr .ag-side-bar-left .ag-side-button-button,
    .ag-rtl .ag-side-bar-right .ag-side-button-button {
      border-right: var(--ag-selected-tab-underline-width) solid transparent;
      transition: border-right var(--ag-selected-tab-underline-transition-speed)
    }

    .ag-ltr .ag-side-bar-left .ag-selected .ag-side-button-button,
    .ag-rtl .ag-side-bar-right .ag-selected .ag-side-button-button {
      border-right-color: var(--ag-selected-tab-underline-color)
    }

    .ag-ltr .ag-side-bar-right .ag-tool-panel-wrapper,
    .ag-rtl .ag-side-bar-left .ag-tool-panel-wrapper {
      border-right: var(--ag-borders) var(--ag-border-color)
    }

    .ag-ltr .ag-side-bar-right .ag-side-button-button,
    .ag-rtl .ag-side-bar-left .ag-side-button-button {
      border-left: var(--ag-selected-tab-underline-width) solid transparent;
      transition: border-left var(--ag-selected-tab-underline-transition-speed)
    }

    .ag-ltr .ag-side-bar-right .ag-selected .ag-side-button-button,
    .ag-rtl .ag-side-bar-left .ag-selected .ag-side-button-button {
      border-left-color: var(--ag-selected-tab-underline-color)
    }

    .ag-filter-toolpanel-header {
      height: calc(var(--ag-grid-size)*6)
    }

    .ag-filter-toolpanel-header,
    .ag-filter-toolpanel-search {
      padding: 0 var(--ag-grid-size)
    }

    .ag-filter-toolpanel-header:focus-visible {
      outline: 0
    }

    .ag-filter-toolpanel-group.ag-has-filter>.ag-group-title-bar .ag-group-title::after {
      font-family: var(--ag-icon-font-family);
      font-weight: var(--ag-icon-font-weight);
      color: var(--ag-icon-font-color);
      font-size: var(--ag-icon-size);
      line-height: var(--ag-icon-size);
      font-style: normal;
      font-variant: normal;
      text-transform: none;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      content: var(--ag-icon-font-code-filter, "\f115");
      position: absolute
    }

    .ag-rtl .ag-filter-toolpanel-group.ag-has-filter>.ag-group-title-bar .ag-group-title::after {
      padding-right: var(--ag-grid-size)
    }

    .ag-filter-toolpanel-group-level-0-header {
      height: calc(var(--ag-grid-size)*8)
    }

    .ag-filter-toolpanel-group-item {
      margin-top: calc(var(--ag-grid-size)*.5);
      margin-bottom: calc(var(--ag-grid-size)*.5)
    }

    .ag-filter-toolpanel-search {
      height: var(--ag-header-height)
    }

    .ag-filter-toolpanel-search-input {
      flex-grow: 1;
      height: calc(var(--ag-grid-size)*4)
    }

    .ag-ltr .ag-filter-toolpanel-search-input {
      margin-right: var(--ag-grid-size)
    }

    .ag-rtl .ag-filter-toolpanel-search-input {
      margin-left: var(--ag-grid-size)
    }

    .ag-filter-toolpanel-group-level-0 {
      border-top: var(--ag-borders-secondary) var(--ag-secondary-border-color)
    }

    .ag-ltr .ag-filter-toolpanel-expand,
    .ag-ltr .ag-filter-toolpanel-group-title-bar-icon {
      margin-right: var(--ag-grid-size)
    }

    .ag-rtl .ag-filter-toolpanel-expand,
    .ag-rtl .ag-filter-toolpanel-group-title-bar-icon {
      margin-left: var(--ag-grid-size)
    }

    .ag-filter-toolpanel-group-level-1 .ag-filter-toolpanel-group-level-1-header.ag-filter-toolpanel-group-title-bar {
      background-color: transparent
    }

    .ag-ltr .ag-filter-toolpanel-group-level-1 .ag-filter-toolpanel-group-level-2-header {
      padding-left: calc(var(--ag-filter-tool-panel-group-indent)*1 + var(--ag-grid-size))
    }

    .ag-rtl .ag-filter-toolpanel-group-level-1 .ag-filter-toolpanel-group-level-2-header {
      padding-right: calc(var(--ag-filter-tool-panel-group-indent)*1 + var(--ag-grid-size))
    }

    .ag-filter-toolpanel-group-level-2 .ag-filter-toolpanel-group-level-2-header.ag-filter-toolpanel-group-title-bar {
      background-color: transparent
    }

    .ag-ltr .ag-filter-toolpanel-group-level-2 .ag-filter-toolpanel-group-level-3-header {
      padding-left: calc(var(--ag-filter-tool-panel-group-indent)*2 + var(--ag-grid-size))
    }

    .ag-rtl .ag-filter-toolpanel-group-level-2 .ag-filter-toolpanel-group-level-3-header {
      padding-right: calc(var(--ag-filter-tool-panel-group-indent)*2 + var(--ag-grid-size))
    }

    .ag-filter-toolpanel-group-level-3 .ag-filter-toolpanel-group-level-3-header.ag-filter-toolpanel-group-title-bar {
      background-color: transparent
    }

    .ag-ltr .ag-filter-toolpanel-group-level-3 .ag-filter-toolpanel-group-level-4-header {
      padding-left: calc(var(--ag-filter-tool-panel-group-indent)*3 + var(--ag-grid-size))
    }

    .ag-rtl .ag-filter-toolpanel-group-level-3 .ag-filter-toolpanel-group-level-4-header {
      padding-right: calc(var(--ag-filter-tool-panel-group-indent)*3 + var(--ag-grid-size))
    }

    .ag-filter-toolpanel-group-level-4 .ag-filter-toolpanel-group-level-4-header.ag-filter-toolpanel-group-title-bar {
      background-color: transparent
    }

    .ag-ltr .ag-filter-toolpanel-group-level-4 .ag-filter-toolpanel-group-level-5-header {
      padding-left: calc(var(--ag-filter-tool-panel-group-indent)*4 + var(--ag-grid-size))
    }

    .ag-rtl .ag-filter-toolpanel-group-level-4 .ag-filter-toolpanel-group-level-5-header {
      padding-right: calc(var(--ag-filter-tool-panel-group-indent)*4 + var(--ag-grid-size))
    }

    .ag-filter-toolpanel-group-level-5 .ag-filter-toolpanel-group-level-5-header.ag-filter-toolpanel-group-title-bar {
      background-color: transparent
    }

    .ag-ltr .ag-filter-toolpanel-group-level-5 .ag-filter-toolpanel-group-level-6-header {
      padding-left: calc(var(--ag-filter-tool-panel-group-indent)*5 + var(--ag-grid-size))
    }

    .ag-rtl .ag-filter-toolpanel-group-level-5 .ag-filter-toolpanel-group-level-6-header {
      padding-right: calc(var(--ag-filter-tool-panel-group-indent)*5 + var(--ag-grid-size))
    }

    .ag-filter-toolpanel-group-level-6 .ag-filter-toolpanel-group-level-6-header.ag-filter-toolpanel-group-title-bar {
      background-color: transparent
    }

    .ag-ltr .ag-filter-toolpanel-group-level-6 .ag-filter-toolpanel-group-level-7-header {
      padding-left: calc(var(--ag-filter-tool-panel-group-indent)*6 + var(--ag-grid-size))
    }

    .ag-rtl .ag-filter-toolpanel-group-level-6 .ag-filter-toolpanel-group-level-7-header {
      padding-right: calc(var(--ag-filter-tool-panel-group-indent)*6 + var(--ag-grid-size))
    }

    .ag-filter-toolpanel-group-level-7 .ag-filter-toolpanel-group-level-7-header.ag-filter-toolpanel-group-title-bar {
      background-color: transparent
    }

    .ag-ltr .ag-filter-toolpanel-group-level-7 .ag-filter-toolpanel-group-level-8-header {
      padding-left: calc(var(--ag-filter-tool-panel-group-indent)*7 + var(--ag-grid-size))
    }

    .ag-rtl .ag-filter-toolpanel-group-level-7 .ag-filter-toolpanel-group-level-8-header {
      padding-right: calc(var(--ag-filter-tool-panel-group-indent)*7 + var(--ag-grid-size))
    }

    .ag-filter-toolpanel-group-level-8 .ag-filter-toolpanel-group-level-8-header.ag-filter-toolpanel-group-title-bar {
      background-color: transparent
    }

    .ag-ltr .ag-filter-toolpanel-group-level-8 .ag-filter-toolpanel-group-level-9-header {
      padding-left: calc(var(--ag-filter-tool-panel-group-indent)*8 + var(--ag-grid-size))
    }

    .ag-rtl .ag-filter-toolpanel-group-level-8 .ag-filter-toolpanel-group-level-9-header {
      padding-right: calc(var(--ag-filter-tool-panel-group-indent)*8 + var(--ag-grid-size))
    }

    .ag-filter-toolpanel-group-level-9 .ag-filter-toolpanel-group-level-9-header.ag-filter-toolpanel-group-title-bar {
      background-color: transparent
    }

    .ag-ltr .ag-filter-toolpanel-group-level-9 .ag-filter-toolpanel-group-level-10-header {
      padding-left: calc(var(--ag-filter-tool-panel-group-indent)*9 + var(--ag-grid-size))
    }

    .ag-rtl .ag-filter-toolpanel-group-level-9 .ag-filter-toolpanel-group-level-10-header {
      padding-right: calc(var(--ag-filter-tool-panel-group-indent)*9 + var(--ag-grid-size))
    }

    .ag-filter-toolpanel-group-level-10 .ag-filter-toolpanel-group-level-10-header.ag-filter-toolpanel-group-title-bar {
      background-color: transparent
    }

    .ag-ltr .ag-filter-toolpanel-group-level-10 .ag-filter-toolpanel-group-level-11-header {
      padding-left: calc(var(--ag-filter-tool-panel-group-indent)*10 + var(--ag-grid-size))
    }

    .ag-rtl .ag-filter-toolpanel-group-level-10 .ag-filter-toolpanel-group-level-11-header {
      padding-right: calc(var(--ag-filter-tool-panel-group-indent)*10 + var(--ag-grid-size))
    }

    .ag-filter-toolpanel-instance-header.ag-filter-toolpanel-group-level-1-header {
      padding-left: var(--ag-grid-size)
    }

    .ag-filter-toolpanel-instance-filter {
      border-bottom: var(--ag-borders) var(--ag-border-color);
      border-top: var(--ag-borders) var(--ag-border-color);
      margin-top: var(--ag-grid-size)
    }

    .ag-ltr .ag-filter-toolpanel-instance-header-icon {
      margin-left: var(--ag-grid-size)
    }

    .ag-rtl .ag-filter-toolpanel-instance-header-icon {
      margin-right: var(--ag-grid-size)
    }

    .ag-set-filter-group-icons {
      color: var(--ag-secondary-foreground-color)
    }

    .ag-pivot-mode-panel {
      min-height: var(--ag-header-height);
      height: var(--ag-header-height);
      display: flex
    }

    .ag-pivot-mode-select {
      display: flex;
      align-items: center
    }

    .ag-ltr .ag-pivot-mode-select {
      margin-left: var(--ag-widget-container-horizontal-padding)
    }

    .ag-rtl .ag-pivot-mode-select {
      margin-right: var(--ag-widget-container-horizontal-padding)
    }

    .ag-column-select-header:focus-visible {
      outline: 0
    }

    .ag-column-panel-column-select,
    .ag-column-select-header {
      border-bottom: var(--ag-borders-secondary) var(--ag-secondary-border-color)
    }

    .ag-column-select-header {
      height: var(--ag-header-height);
      align-items: center;
      padding: 0 var(--ag-widget-container-horizontal-padding)
    }

    .ag-column-panel-column-select {
      border-top: var(--ag-borders-secondary) var(--ag-secondary-border-color)
    }

    .ag-column-group-icons,
    .ag-column-select-header-icon {
      color: var(--ag-secondary-foreground-color)
    }

    .ag-column-select-list .ag-list-item-hovered::after {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      height: 1px;
      background-color: var(--ag-range-selection-border-color)
    }

    .ag-column-select-list .ag-item-highlight-top::after {
      top: 0
    }

    .ag-column-select-list .ag-item-highlight-bottom::after {
      bottom: 0
    }

    .ag-advanced-filter-header,
    .ag-header {
      background-color: var(--ag-header-background-color);
      border-bottom: var(--ag-borders-critical) var(--ag-border-color)
    }

    .ag-header-row {
      color: var(--ag-header-foreground-color);
      height: var(--ag-header-height)
    }

    .ag-pinned-right-header {
      border-left: var(--ag-borders-critical) var(--ag-border-color)
    }

    .ag-pinned-left-header {
      border-right: var(--ag-borders-critical) var(--ag-border-color)
    }

    .ag-ltr .ag-header-cell:not(.ag-right-aligned-header) .ag-header-label-icon,
    .ag-ltr .ag-header-cell:not(.ag-right-aligned-header) .ag-header-menu-icon {
      margin-left: var(--ag-grid-size)
    }

    .ag-rtl .ag-header-cell:not(.ag-right-aligned-header) .ag-header-label-icon,
    .ag-rtl .ag-header-cell:not(.ag-right-aligned-header) .ag-header-menu-icon {
      margin-right: var(--ag-grid-size)
    }

    .ag-ltr .ag-header-cell.ag-right-aligned-header .ag-header-label-icon,
    .ag-ltr .ag-header-cell.ag-right-aligned-header .ag-header-menu-icon {
      margin-right: var(--ag-grid-size)
    }

    .ag-rtl .ag-header-cell.ag-right-aligned-header .ag-header-label-icon,
    .ag-rtl .ag-header-cell.ag-right-aligned-header .ag-header-menu-icon {
      margin-left: var(--ag-grid-size)
    }

    .ag-header-cell,
    .ag-header-group-cell {
      padding-left: var(--ag-cell-horizontal-padding);
      padding-right: var(--ag-cell-horizontal-padding)
    }

    .ag-header-cell.ag-header-cell-moving,
    .ag-header-group-cell.ag-header-cell-moving {
      background-color: var(--ag-header-cell-moving-background-color)
    }

    .ag-ltr .ag-header-group-cell-label.ag-sticky-label {
      left: var(--ag-cell-horizontal-padding)
    }

    .ag-rtl .ag-header-group-cell-label.ag-sticky-label {
      right: var(--ag-cell-horizontal-padding)
    }

    .ag-advanced-filter-header-cell:focus-visible,
    .ag-header-cell:focus-visible,
    .ag-header-group-cell:focus-visible {
      outline: 0
    }

    .ag-advanced-filter-header-cell:focus-visible::after,
    .ag-header-cell:focus-visible::after,
    .ag-header-group-cell:focus-visible::after {
      content: "";
      position: absolute;
      background-color: transparent;
      pointer-events: none;
      top: 4px;
      left: 4px;
      display: block;
      width: calc(100% - 8px);
      height: calc(100% - 8px);
      border: 1px solid;
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-header-icon {
      color: var(--ag-secondary-foreground-color)
    }

    .ag-header-expand-icon {
      cursor: pointer
    }

    .ag-ltr .ag-header-expand-icon {
      margin-left: 4px
    }

    .ag-rtl .ag-header-expand-icon {
      margin-right: 4px
    }

    .ag-header-row:not(:first-child) .ag-header-cell:not(.ag-header-span-height.ag-header-span-total),
    .ag-header-row:not(:first-child) .ag-header-group-cell.ag-header-group-cell-with-group {
      border-top: var(--ag-borders-critical) var(--ag-border-color)
    }

    .ag-header-cell:not(.ag-column-hover):first-of-type.ag-column-resizing,
    .ag-header-cell:not(.ag-column-hover):first-of-type:not(.ag-header-cell-moving):hover,
    .ag-header-cell:not(.ag-column-resizing)+.ag-header-cell:not(.ag-column-hover).ag-column-resizing,
    .ag-header-cell:not(.ag-column-resizing)+.ag-header-cell:not(.ag-column-hover):not(.ag-header-cell-moving):hover,
    .ag-header-group-cell:first-of-type.ag-column-resizing,
    .ag-header-group-cell:first-of-type:not(.ag-header-cell-moving):hover,
    .ag-header-group-cell:not(.ag-column-resizing)+.ag-header-group-cell:not(.ag-column-hover).ag-column-resizing,
    .ag-header-group-cell:not(.ag-column-resizing)+.ag-header-group-cell:not(.ag-column-hover):not(.ag-header-cell-moving):hover {
      background-color: var(--ag-header-cell-hover-background-color)
    }

    .ag-header-cell::before,
    .ag-header-group-cell:not(.ag-header-span-height.ag-header-group-cell-no-group)::before {
      content: "";
      position: absolute;
      z-index: 1;
      display: var(--ag-header-column-separator-display);
      width: var(--ag-header-column-separator-width);
      height: var(--ag-header-column-separator-height);
      top: calc(50% - var(--ag-header-column-separator-height)*.5);
      background-color: var(--ag-header-column-separator-color)
    }

    .ag-ltr .ag-header-cell::before,
    .ag-ltr .ag-header-group-cell:not(.ag-header-span-height.ag-header-group-cell-no-group)::before {
      right: 0
    }

    .ag-rtl .ag-header-cell::before,
    .ag-rtl .ag-header-group-cell:not(.ag-header-span-height.ag-header-group-cell-no-group)::before {
      left: 0
    }

    .ag-header-cell-resize {
      display: flex;
      align-items: center
    }

    .ag-header-cell-resize::after {
      content: "";
      position: absolute;
      z-index: 1;
      display: var(--ag-header-column-resize-handle-display);
      width: var(--ag-header-column-resize-handle-width);
      height: var(--ag-header-column-resize-handle-height);
      top: calc(50% - var(--ag-header-column-resize-handle-height)*.5);
      background-color: var(--ag-header-column-resize-handle-color)
    }

    .ag-header-cell.ag-header-span-height .ag-header-cell-resize::after {
      height: calc(100% - var(--ag-grid-size)*4);
      top: calc(var(--ag-grid-size)*2)
    }

    .ag-ltr .ag-header-viewport .ag-header-cell-resize::after,
    .ag-pinned-left-header .ag-header-cell-resize::after {
      left: calc(50% - var(--ag-header-column-resize-handle-width))
    }

    .ag-rtl .ag-header-viewport .ag-header-cell-resize::after {
      right: calc(50% - var(--ag-header-column-resize-handle-width))
    }

    .ag-pinned-right-header .ag-header-cell-resize::after {
      left: 50%
    }

    .ag-ltr .ag-header-select-all {
      margin-right: var(--ag-cell-horizontal-padding)
    }

    .ag-rtl .ag-header-select-all {
      margin-left: var(--ag-cell-horizontal-padding)
    }

    .ag-ltr .ag-floating-filter-button {
      margin-left: var(--ag-cell-widget-spacing)
    }

    .ag-rtl .ag-floating-filter-button {
      margin-right: var(--ag-cell-widget-spacing)
    }

    .ag-floating-filter-button-button {
      color: inherit;
      font-family: inherit;
      font-size: inherit;
      font-weight: inherit;
      line-height: inherit;
      appearance: none;
      background: 0 0;
      border: 0;
      height: var(--ag-icon-size);
      padding: 0;
      width: var(--ag-icon-size)
    }

    .ag-filter-loading {
      background-color: var(--ag-control-panel-background-color);
      height: 100%;
      padding: var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);
      position: absolute;
      width: 100%;
      z-index: 1
    }

    .ag-paging-panel {
      border-top: 1px solid;
      border-top-color: var(--ag-border-color);
      color: var(--ag-secondary-foreground-color);
      height: var(--ag-header-height)
    }

    .ag-paging-panel>* {
      margin: 0 var(--ag-cell-horizontal-padding)
    }

    .ag-paging-panel>.ag-paging-page-size .ag-wrapper {
      min-width: calc(var(--ag-grid-size)*10)
    }

    .ag-paging-button {
      cursor: pointer
    }

    .ag-paging-button.ag-disabled {
      cursor: default;
      color: var(--ag-disabled-foreground-color)
    }

    .ag-column-drop-cell:focus-visible,
    .ag-paging-button:focus-visible {
      outline: 0
    }

    .ag-paging-button:focus-visible::after {
      content: "";
      position: absolute;
      background-color: transparent;
      pointer-events: none;
      top: 0;
      left: 0;
      display: block;
      width: calc(100% - 0px);
      height: calc(100% - 0px);
      border: 1px solid;
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-paging-button,
    .ag-paging-description {
      margin: 0 var(--ag-grid-size)
    }

    .ag-status-bar {
      border-top: var(--ag-borders) var(--ag-border-color);
      color: var(--ag-disabled-foreground-color);
      padding-right: calc(var(--ag-grid-size)*4);
      padding-left: calc(var(--ag-grid-size)*4);
      line-height: 1.5
    }

    .ag-status-name-value-value {
      color: var(--ag-foreground-color)
    }

    .ag-status-bar-center {
      text-align: center
    }

    .ag-status-name-value {
      margin-left: var(--ag-grid-size);
      margin-right: var(--ag-grid-size);
      padding-top: calc(var(--ag-grid-size)*2);
      padding-bottom: calc(var(--ag-grid-size)*2)
    }

    .ag-column-drop-cell {
      background: var(--ag-chip-background-color);
      border-radius: calc(var(--ag-grid-size)*4);
      height: calc(var(--ag-grid-size)*4);
      padding: 0 calc(var(--ag-grid-size)*.5);
      border: 1px solid var(--ag-chip-border-color)
    }

    .ag-column-drop-cell:focus-visible::after {
      content: "";
      position: absolute;
      background-color: transparent;
      pointer-events: none;
      top: 2px;
      left: 2px;
      display: block;
      width: calc(100% - 4px);
      height: calc(100% - 4px);
      border: 1px solid;
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-column-drop-cell-text {
      margin: 0 var(--ag-grid-size)
    }

    .ag-column-drop-cell-button {
      min-width: calc(var(--ag-grid-size)*4);
      margin: 0 calc(var(--ag-grid-size)*.5);
      color: var(--ag-secondary-foreground-color)
    }

    .ag-column-drop-cell-drag-handle {
      margin-left: calc(var(--ag-grid-size)*2)
    }

    .ag-column-drop-cell-ghost {
      opacity: .5
    }

    .ag-column-drop-horizontal {
      background-color: var(--ag-header-background-color);
      color: var(--ag-secondary-foreground-color);
      height: var(--ag-header-height);
      border-bottom: var(--ag-borders) var(--ag-border-color)
    }

    .ag-ltr .ag-column-drop-horizontal {
      padding-left: var(--ag-cell-horizontal-padding)
    }

    .ag-rtl .ag-column-drop-horizontal {
      padding-right: var(--ag-cell-horizontal-padding)
    }

    .ag-ltr .ag-column-drop-horizontal-half-width:not(:last-child) {
      border-right: var(--ag-borders) var(--ag-border-color)
    }

    .ag-rtl .ag-column-drop-horizontal-half-width:not(:last-child) {
      border-left: var(--ag-borders) var(--ag-border-color)
    }

    .ag-column-drop-horizontal-cell-separator {
      margin: 0 var(--ag-grid-size);
      color: var(--ag-secondary-foreground-color)
    }

    .ag-column-drop-horizontal-empty-message {
      color: var(--ag-disabled-foreground-color)
    }

    .ag-ltr .ag-column-drop-horizontal-icon {
      margin-right: var(--ag-cell-horizontal-padding)
    }

    .ag-rtl .ag-column-drop-horizontal-icon {
      margin-left: var(--ag-cell-horizontal-padding)
    }

    .ag-column-drop-vertical-list {
      padding-bottom: var(--ag-grid-size);
      padding-right: var(--ag-grid-size);
      padding-left: var(--ag-grid-size)
    }

    .ag-column-drop-vertical-cell {
      margin-top: var(--ag-grid-size)
    }

    .ag-column-drop-vertical {
      min-height: 50px;
      border-bottom: var(--ag-borders-secondary) var(--ag-secondary-border-color)
    }

    .ag-column-drop-vertical.ag-last-column-drop {
      border-bottom: none
    }

    .ag-column-drop-vertical-icon {
      margin-left: var(--ag-grid-size);
      margin-right: var(--ag-grid-size)
    }

    .ag-column-drop-vertical-empty-message {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      overflow: hidden;
      color: var(--ag-disabled-foreground-color);
      margin-top: var(--ag-grid-size)
    }

    .ag-select-agg-func-popup {
      border: var(--ag-borders) var(--ag-border-color);
      border-radius: var(--ag-card-radius);
      box-shadow: var(--ag-card-shadow);
      padding: var(--ag-grid-size);
      background: var(--ag-background-color);
      height: calc(var(--ag-grid-size)*5*3.5);
      padding: 0
    }

    .ag-select-agg-func-virtual-list-item {
      cursor: default
    }

    .ag-ltr .ag-select-agg-func-virtual-list-item {
      padding-left: calc(var(--ag-grid-size)*2)
    }

    .ag-rtl .ag-select-agg-func-virtual-list-item {
      padding-right: calc(var(--ag-grid-size)*2)
    }

    .ag-select-agg-func-virtual-list-item:hover {
      background-color: var(--ag-selected-row-background-color)
    }

    .ag-select-agg-func-virtual-list-item:focus-visible {
      outline: 0
    }

    .ag-select-agg-func-virtual-list-item:focus-visible::after {
      content: "";
      position: absolute;
      background-color: transparent;
      pointer-events: none;
      top: 1px;
      left: 1px;
      display: block;
      width: calc(100% - 2px);
      height: calc(100% - 2px);
      border: 1px solid;
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-sort-indicator-container {
      display: flex
    }

    .ag-ltr .ag-sort-indicator-icon {
      padding-left: var(--ag-grid-size)
    }

    .ag-rtl .ag-sort-indicator-icon {
      padding-right: var(--ag-grid-size)
    }

    .ag-chart,
    .ag-chart-components-wrapper {
      position: relative;
      display: flex;
      overflow: hidden
    }

    .ag-chart {
      width: 100%;
      height: 100%
    }

    .ag-chart-components-wrapper {
      flex: 1 1 auto
    }

    .ag-chart-title-edit {
      position: absolute;
      display: none;
      top: 0;
      left: 0;
      text-align: center
    }

    .ag-chart-title-edit.currently-editing {
      display: inline-block
    }

    .ag-chart-canvas-wrapper {
      position: relative;
      flex: 1 1 auto;
      overflow: hidden
    }

    .ag-charts-canvas {
      display: block
    }

    .ag-chart-menu {
      position: absolute;
      top: 16px;
      display: flex;
      flex-direction: column
    }

    .ag-ltr .ag-chart-menu {
      right: 20px
    }

    .ag-rtl .ag-chart-menu {
      left: 20px
    }

    .ag-chart-docked-container {
      position: relative;
      width: 0;
      min-width: 0;
      transition: min-width .4s
    }

    .ag-chart-menu-hidden~.ag-chart-docked-container {
      max-width: 0;
      overflow: hidden
    }

    .ag-chart-tabbed-menu {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      overflow: hidden
    }

    .ag-chart-tabbed-menu-header {
      flex: none;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
      cursor: default
    }

    .ag-chart-tabbed-menu-body {
      display: flex;
      flex: 1 1 auto;
      align-items: stretch;
      overflow: hidden
    }

    .ag-chart-tab {
      width: 100%;
      overflow: hidden;
      overflow-y: auto
    }

    .ag-chart-settings {
      overflow-x: hidden
    }

    .ag-chart-settings-wrapper {
      position: relative;
      flex-direction: column;
      width: 100%;
      height: 100%;
      display: flex;
      overflow: hidden
    }

    .ag-chart-settings-nav-bar {
      display: flex;
      align-items: center;
      width: 100%;
      height: 30px;
      padding: 0 10px;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none
    }

    .ag-chart-settings-card-selector {
      display: flex;
      align-items: center;
      justify-content: space-around;
      flex: 1 1 auto;
      height: 100%;
      padding: 0 10px
    }

    .ag-chart-settings-card-item {
      cursor: pointer;
      background-color: #000;
      position: relative
    }

    .ag-chart-settings-card-item.ag-not-selected {
      opacity: .2
    }

    .ag-chart-settings-card-item::before {
      content: " ";
      display: block;
      position: absolute;
      background-color: transparent;
      left: 50%;
      top: 50%;
      margin-left: -10px;
      margin-top: -10px;
      width: 20px;
      height: 20px
    }

    .ag-chart-settings-next,
    .ag-chart-settings-prev {
      position: relative;
      flex: none
    }

    .ag-chart-settings-next-button,
    .ag-chart-settings-prev-button {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      cursor: pointer;
      opacity: 0
    }

    .ag-chart-settings-mini-charts-container {
      position: relative;
      flex: 1 1 auto;
      overflow-x: hidden;
      overflow-y: auto
    }

    .ag-chart-settings-mini-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      display: flex;
      flex-direction: column;
      width: 100%;
      min-height: 100%;
      overflow: hidden
    }

    .ag-chart-settings-mini-wrapper.ag-animating {
      transition: left .3s;
      transition-timing-function: ease-in-out
    }

    .ag-chart-mini-thumbnail {
      cursor: pointer
    }

    .ag-chart-menu-hidden:hover .ag-chart-menu,
    .ag-chart-mini-thumbnail-canvas {
      display: block
    }

    .ag-chart-data-wrapper,
    .ag-chart-format-wrapper {
      display: flex;
      flex-direction: column;
      position: relative;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
      padding-bottom: 16px
    }

    .ag-chart-data-wrapper {
      height: 100%;
      overflow-y: auto
    }

    .ag-chart-empty-text {
      display: flex;
      top: 0;
      width: 100%;
      height: 100%;
      align-items: center;
      justify-content: center;
      background-color: var(--ag-background-color)
    }

    .ag-chart .ag-chart-menu,
    .ag-chart-menu-close {
      display: none
    }

    .ag-chart .ag-chart-tool-panel-button-enable .ag-chart-menu {
      display: flex;
      flex-direction: row;
      top: 8px;
      gap: 20px;
      width: auto
    }

    .ag-ltr .ag-chart .ag-chart-tool-panel-button-enable .ag-chart-menu {
      right: calc(var(--ag-cell-horizontal-padding) + var(--ag-grid-size) - 4px);
      justify-content: right
    }

    .ag-rtl .ag-chart .ag-chart-tool-panel-button-enable .ag-chart-menu {
      left: calc(var(--ag-cell-horizontal-padding) + var(--ag-grid-size) - 4px);
      justify-content: left
    }

    .ag-chart-tool-panel-button-enable .ag-chart-menu-close {
      position: absolute;
      top: 50%;
      transition: transform .33s ease-in-out;
      padding: 0;
      display: block;
      cursor: pointer;
      border: 0
    }

    .ag-ltr .ag-chart-tool-panel-button-enable .ag-chart-menu-close,
    .ag-ltr .ag-chart-tool-panel-button-enable .ag-chart-menu-close:before {
      right: 0
    }

    .ag-rtl .ag-chart-tool-panel-button-enable .ag-chart-menu-close,
    .ag-rtl .ag-chart-tool-panel-button-enable .ag-chart-menu-close:before {
      left: 0
    }

    .ag-chart-tool-panel-button-enable .ag-chart-menu-close .ag-icon {
      padding: 14px 5px 14px 2px;
      width: auto;
      height: auto
    }

    .ag-chart-tool-panel-button-enable .ag-chart-menu-close:before {
      content: "";
      position: absolute;
      top: -40px;
      bottom: -40px
    }

    .ag-ltr .ag-chart-tool-panel-button-enable .ag-chart-menu-close:before {
      left: -10px
    }

    .ag-rtl .ag-chart-tool-panel-button-enable .ag-chart-menu-close:before {
      right: -10px
    }

    .ag-chart-tool-panel-button-enable .ag-icon-menu {
      display: none
    }

    .ag-ltr .ag-chart-tool-panel-button-enable .ag-chart-menu-close {
      transform: translate(3px, -50%)
    }

    .ag-ltr .ag-chart-tool-panel-button-enable .ag-chart-menu-close:hover,
    .ag-rtl .ag-chart-tool-panel-button-enable .ag-chart-menu-close:hover {
      transform: translate(0, -50%)
    }

    .ag-ltr .ag-chart-menu-visible .ag-chart-tool-panel-button-enable .ag-chart-menu-close:hover {
      transform: translate(5px, -50%)
    }

    .ag-rtl .ag-chart-tool-panel-button-enable .ag-chart-menu-close {
      transform: translate(-3px, -50%)
    }

    .ag-rtl .ag-chart-menu-visible .ag-chart-tool-panel-button-enable .ag-chart-menu-close:hover {
      transform: translate(-5px, -50%)
    }

    .ag-charts-font-size-color {
      display: flex;
      align-self: stretch;
      justify-content: space-between
    }

    .ag-charts-data-group-item {
      position: relative
    }

    .ag-chart-menu {
      border-radius: var(--ag-card-radius);
      background: var(--ag-background-color)
    }

    .ag-chart-menu-icon {
      opacity: .5;
      margin: 2px 0;
      cursor: pointer;
      border-radius: var(--ag-card-radius);
      color: var(--ag-secondary-foreground-color)
    }

    .ag-chart-menu-icon:hover {
      opacity: 1
    }

    .ag-chart-mini-thumbnail {
      border: 1px solid var(--ag-secondary-border-color);
      border-radius: 5px
    }

    .ag-chart-mini-thumbnail.ag-selected {
      border-color: var(--ag-minichart-selected-chart-color)
    }

    .ag-chart-settings-card-item {
      background: var(--ag-foreground-color);
      width: 8px;
      height: 8px;
      border-radius: 4px
    }

    .ag-chart-settings-card-item.ag-selected {
      background-color: var(--ag-minichart-selected-page-color)
    }

    .ag-chart-data-column-drag-handle {
      margin-left: var(--ag-grid-size)
    }

    .ag-charts-data-group-title-bar,
    .ag-charts-format-top-level-group-title-bar,
    .ag-charts-settings-group-title-bar {
      border-top: var(--ag-borders-secondary) var(--ag-secondary-border-color)
    }

    .ag-charts-data-group-container {
      padding: calc(var(--ag-widget-container-vertical-padding)*.5) var(--ag-widget-container-horizontal-padding)
    }

    .ag-charts-data-group-container .ag-charts-data-group-item:not(.ag-charts-format-sub-level-group) {
      height: var(--ag-list-item-height)
    }

    .ag-charts-data-group-container .ag-list-item-hovered::after {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      height: 1px;
      background-color: var(--ag-range-selection-border-color)
    }

    .ag-charts-data-group-container .ag-item-highlight-top::after {
      top: 0
    }

    .ag-charts-data-group-container .ag-item-highlight-bottom::after {
      bottom: 0
    }

    .ag-charts-format-top-level-group-container {
      margin-left: calc(var(--ag-grid-size)*2);
      padding: var(--ag-grid-size)
    }

    .ag-charts-format-top-level-group-item {
      margin: var(--ag-grid-size)0
    }

    .ag-charts-format-sub-level-group-container {
      padding: var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);
      padding-bottom: calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing))
    }

    .ag-charts-format-sub-level-group-container>* {
      margin-bottom: var(--ag-widget-vertical-spacing)
    }

    .ag-charts-settings-group-container {
      padding: var(--ag-grid-size);
      row-gap: 8px;
      display: grid;
      grid-template-columns: 60px 1fr 60px 1fr 60px
    }

    .ag-charts-settings-group-container .ag-chart-mini-thumbnail:nth-child(3n+1) {
      grid-column: 1
    }

    .ag-charts-settings-group-container .ag-chart-mini-thumbnail:nth-child(3n+2) {
      grid-column: 3
    }

    .ag-charts-settings-group-container .ag-chart-mini-thumbnail:nth-child(3n+3) {
      grid-column: 5
    }

    .ag-chart-data-section,
    .ag-chart-format-section {
      display: flex;
      margin: 0
    }

    .ag-chart-menu-panel {
      background-color: var(--ag-control-panel-background-color)
    }

    .ag-ltr .ag-chart-menu-panel {
      border-left: solid 1px var(--ag-border-color)
    }

    .ag-rtl .ag-chart-menu-panel {
      border-right: solid 1px var(--ag-border-color)
    }

    .ag-date-time-list-page-title-bar {
      display: flex
    }

    .ag-date-time-list-page-title {
      flex-grow: 1;
      text-align: center
    }

    .ag-date-time-list-page-column-labels-row,
    .ag-date-time-list-page-entries-row {
      display: flex
    }

    .ag-date-time-list-page-column-label,
    .ag-date-time-list-page-entry {
      flex-basis: 0;
      flex-grow: 1
    }

    .ag-date-time-list-page-entry {
      cursor: pointer;
      text-align: center
    }

    .ag-date-time-list-page-column-label {
      text-align: center
    }

    .ag-advanced-filter-header {
      position: relative;
      display: flex;
      align-items: center;
      padding-left: var(--ag-cell-horizontal-padding);
      padding-right: var(--ag-cell-horizontal-padding)
    }

    .ag-advanced-filter {
      display: flex;
      align-items: center;
      width: 100%
    }

    .ag-advanced-filter-apply-button,
    .ag-advanced-filter-builder-button {
      line-height: normal;
      white-space: nowrap
    }

    .ag-ltr .ag-advanced-filter-apply-button,
    .ag-ltr .ag-advanced-filter-builder-button {
      margin-left: calc(var(--ag-grid-size)*2)
    }

    .ag-rtl .ag-advanced-filter-apply-button,
    .ag-rtl .ag-advanced-filter-builder-button {
      margin-right: calc(var(--ag-grid-size)*2)
    }

    .ag-advanced-filter-builder-button {
      display: flex;
      align-items: center;
      border: 0;
      background-color: unset;
      color: var(--ag-foreground-color);
      font-size: var(--ag-font-size);
      font-weight: 600
    }

    .ag-advanced-filter-builder-button:hover:not(:disabled) {
      background-color: var(--ag-row-hover-color)
    }

    .ag-advanced-filter-builder-button:not(:disabled) {
      cursor: pointer
    }

    .ag-advanced-filter-builder-button-label {
      margin-left: var(--ag-grid-size)
    }

    .ag-advanced-filter-builder {
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
      width: 100%;
      background-color: var(--ag-control-panel-background-color);
      display: flex;
      flex-direction: column
    }

    .ag-advanced-filter-builder-list {
      flex: 1;
      overflow: auto
    }

    .ag-advanced-filter-builder-list .ag-list-item-hovered::after {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      height: 1px;
      background-color: var(--ag-range-selection-border-color)
    }

    .ag-advanced-filter-builder-list .ag-item-highlight-top::after {
      top: 0
    }

    .ag-advanced-filter-builder-list .ag-item-highlight-bottom::after {
      bottom: 0
    }

    .ag-advanced-filter-builder-button-panel {
      display: flex;
      justify-content: flex-end;
      padding: var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);
      border-top: var(--ag-borders-secondary) var(--ag-secondary-border-color)
    }

    .ag-advanced-filter-builder .ag-advanced-filter-builder-button-panel .ag-advanced-filter-builder-apply-button,
    .ag-advanced-filter-builder .ag-advanced-filter-builder-button-panel .ag-advanced-filter-builder-cancel-button {
      margin-left: calc(var(--ag-grid-size)*2)
    }

    .ag-advanced-filter-builder-item-wrapper {
      display: flex;
      flex: 1 1 auto;
      align-items: center;
      justify-content: space-between;
      overflow: hidden;
      padding-left: calc(var(--ag-icon-size)/2);
      padding-right: var(--ag-icon-size)
    }

    .ag-advanced-filter-builder-item-tree-lines>* {
      width: var(--ag-advanced-filter-builder-indent-size)
    }

    .ag-advanced-filter-builder-item-tree-lines .ag-advanced-filter-builder-item-tree-line-root {
      width: var(--ag-icon-size)
    }

    .ag-advanced-filter-builder-item-tree-lines .ag-advanced-filter-builder-item-tree-line-root::before {
      top: 50%;
      height: 50%
    }

    .ag-advanced-filter-builder-item-tree-line-horizontal,
    .ag-advanced-filter-builder-item-tree-line-vertical,
    .ag-advanced-filter-builder-item-tree-line-vertical-bottom,
    .ag-advanced-filter-builder-item-tree-line-vertical-top {
      position: relative;
      height: 100%;
      display: flex;
      align-items: center
    }

    .ag-advanced-filter-builder-item-tree-line-horizontal::before {
      content: "";
      position: absolute;
      height: 100%
    }

    .ag-advanced-filter-builder-item-tree-line-horizontal::after {
      content: "";
      position: absolute
    }

    .ag-advanced-filter-builder-item-tree-line-vertical::after,
    .ag-advanced-filter-builder-item-tree-line-vertical::before {
      content: "";
      position: absolute;
      height: 100%
    }

    .ag-advanced-filter-builder-item-tree-line-vertical-top::before {
      content: "";
      position: absolute
    }

    .ag-advanced-filter-builder-item-tree-line-vertical-bottom::after,
    .ag-advanced-filter-builder-item-tree-line-vertical-bottom::before,
    .ag-advanced-filter-builder-item-tree-line-vertical-top::after {
      content: "";
      position: absolute;
      height: 100%
    }

    .ag-advanced-filter-builder-item-tree-line-horizontal::after {
      height: 50%;
      width: calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size));
      top: 0;
      left: calc(var(--ag-icon-size)/2);
      border-bottom: 1px solid;
      border-color: var(--ag-border-color)
    }

    .ag-advanced-filter-builder-item-tree-line-vertical-top::before,
    .ag-advanced-filter-builder-item-tree-line-vertical::before {
      width: calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size)/2);
      top: 0;
      left: calc(var(--ag-icon-size)/2);
      border-left: 1px solid;
      border-color: var(--ag-border-color)
    }

    .ag-advanced-filter-builder-item-tree-line-vertical-top::before {
      height: 50%
    }

    .ag-advanced-filter-builder-item-tree-line-vertical-bottom::before {
      height: calc((100% - 1.5*var(--ag-icon-size))/2);
      width: calc(var(--ag-icon-size)/2);
      top: calc((100% + 1.5*var(--ag-icon-size))/2);
      left: calc(var(--ag-icon-size)/2);
      border-left: 1px solid;
      border-color: var(--ag-border-color)
    }

    .ag-advanced-filter-builder-item-condition {
      padding-top: var(--ag-grid-size);
      padding-bottom: var(--ag-grid-size)
    }

    .ag-advanced-filter-builder-item,
    .ag-advanced-filter-builder-item-buttons,
    .ag-advanced-filter-builder-item-condition,
    .ag-advanced-filter-builder-item-tree-lines,
    .ag-advanced-filter-builder-pill,
    .ag-advanced-filter-builder-pill-wrapper {
      display: flex;
      align-items: center;
      height: 100%
    }

    .ag-advanced-filter-builder-pill-wrapper {
      margin: 0 var(--ag-grid-size)
    }

    .ag-advanced-filter-builder-pill {
      position: relative;
      border-radius: var(--ag-border-radius);
      padding: var(--ag-grid-size) calc(var(--ag-grid-size)*2);
      min-height: calc(100% - var(--ag-grid-size)*3);
      min-width: calc(var(--ag-grid-size)*2)
    }

    .ag-advanced-filter-builder-pill .ag-picker-field-display {
      margin-right: var(--ag-grid-size)
    }

    .ag-advanced-filter-builder-pill .ag-advanced-filter-builder-value-number {
      font-family: monospace;
      font-weight: 700
    }

    .ag-advanced-filter-builder-pill .ag-advanced-filter-builder-value-empty {
      color: var(--ag-disabled-foreground-color)
    }

    .ag-advanced-filter-builder-item-button:focus-visible,
    .ag-advanced-filter-builder-pill:focus-visible {
      outline: 0
    }

    .ag-advanced-filter-builder-item-button:focus-visible::after,
    .ag-advanced-filter-builder-pill:focus-visible::after {
      content: "";
      position: absolute;
      background-color: transparent;
      pointer-events: none;
      top: -4px;
      left: -4px;
      display: block;
      width: calc(100% - -8px);
      height: calc(100% - -8px);
      border: 1px solid;
      border-color: var(--ag-input-focus-border-color)
    }

    .ag-advanced-filter-builder-pill-display {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      font-weight: 500
    }

    .ag-advanced-filter-builder-join-pill {
      color: var(--ag-foreground-color);
      background-color: var(--ag-advanced-filter-join-pill-color);
      cursor: pointer
    }

    .ag-advanced-filter-builder-column-pill,
    .ag-advanced-filter-builder-option-pill {
      color: var(--ag-foreground-color);
      background-color: var(--ag-advanced-filter-column-pill-color);
      cursor: pointer
    }

    .ag-advanced-filter-builder-option-pill {
      background-color: var(--ag-advanced-filter-option-pill-color)
    }

    .ag-advanced-filter-builder-value-pill {
      color: var(--ag-foreground-color);
      background-color: var(--ag-advanced-filter-value-pill-color);
      cursor: text;
      max-width: 140px
    }

    .ag-advanced-filter-builder-value-pill .ag-advanced-filter-builder-pill-display {
      display: block
    }

    .ag-advanced-filter-builder-item-buttons>* {
      margin: 0 calc(var(--ag-grid-size)*.5)
    }

    .ag-advanced-filter-builder-item-button {
      position: relative;
      cursor: pointer;
      color: var(--ag-secondary-foreground-color);
      opacity: 50%
    }

    .ag-advanced-filter-builder-item-button-disabled {
      color: var(--ag-disabled-foreground-color);
      cursor: default
    }

    .ag-advanced-filter-builder-virtual-list-container {
      top: var(--ag-grid-size)
    }

    .ag-advanced-filter-builder-virtual-list-item {
      display: flex;
      cursor: default;
      height: var(--ag-list-item-height)
    }

    .ag-advanced-filter-builder-virtual-list-item:hover {
      background-color: var(--ag-row-hover-color)
    }

    .ag-advanced-filter-builder-virtual-list-item:hover .ag-advanced-filter-builder-item-button {
      opacity: 100%
    }

    .ag-advanced-filter-builder-validation .ag-advanced-filter-builder-invalid,
    .ag-advanced-filter-builder-virtual-list-item-highlight .ag-advanced-filter-builder-item-button:focus-visible {
      opacity: 100%
    }

    .ag-advanced-filter-builder-invalid {
      margin: 0 var(--ag-grid-size);
      color: var(--ag-invalid-color);
      cursor: default
    }

    .ag-input-field-input {
      width: 100%;
      min-width: 0
    }

    .ag-checkbox-input-wrapper {
      font-family: var(--ag-icon-font-family);
      font-weight: var(--ag-icon-font-weight);
      color: var(--ag-icon-font-color);
      font-size: var(--ag-icon-size);
      line-height: var(--ag-icon-size);
      font-style: normal;
      font-variant: normal;
      text-transform: none;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      width: var(--ag-icon-size);
      height: var(--ag-icon-size);
      background-color: var(--ag-checkbox-background-color);
      border-radius: var(--ag-checkbox-border-radius);
      display: inline-block;
      vertical-align: middle;
      flex: none
    }

    .ag-checkbox-input-wrapper input {
      -webkit-appearance: none;
      opacity: 0;
      width: 100%;
      height: 100%
    }

    .ag-checkbox-input-wrapper:active,
    .ag-checkbox-input-wrapper:focus-within {
      outline: 0;
      box-shadow: var(--ag-input-focus-box-shadow)
    }

    .ag-checkbox-input-wrapper.ag-disabled {
      opacity: .5
    }

    .ag-checkbox-input-wrapper::after {
      content: var(--ag-icon-font-code-checkbox-unchecked, "\f108");
      color: var(--ag-checkbox-unchecked-color);
      display: var(--ag-icon-font-display-checkbox-unchecked, var(--ag-icon-font-display));
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none
    }

    .ag-checkbox-input-wrapper.ag-checked::after {
      content: var(--ag-icon-font-code-checkbox-checked, "\f106");
      color: var(--ag-checkbox-checked-color);
      display: var(--ag-icon-font-display-checkbox-checked, var(--ag-icon-font-display));
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none
    }

    .ag-checkbox-input-wrapper.ag-indeterminate::after {
      content: var(--ag-icon-font-code-checkbox-indeterminate, "\f107");
      color: var(--ag-checkbox-indeterminate-color);
      display: var(--ag-icon-font-display-checkbox-indeterminate, var(--ag-icon-font-display));
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none
    }

    .ag-checkbox-input-wrapper::before {
      content: "";
      background: center/contain no-repeat;
      position: absolute;
      inset: 0;
      background-image: var(--ag-icon-image-checkbox-unchecked, var(--ag-icon-image));
      display: var(--ag-icon-image-display-checkbox-unchecked, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-checkbox-unchecked, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-checkbox-input-wrapper.ag-checked::before {
      background-image: var(--ag-icon-image-checkbox-checked, var(--ag-icon-image));
      display: var(--ag-icon-image-display-checkbox-checked, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-checkbox-checked, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-checkbox-input-wrapper.ag-indeterminate::before {
      background-image: var(--ag-icon-image-checkbox-indeterminate, var(--ag-icon-image));
      display: var(--ag-icon-image-display-checkbox-indeterminate, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-checkbox-indeterminate, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-toggle-button-input-wrapper {
      box-sizing: border-box;
      width: var(--ag-toggle-button-width);
      min-width: var(--ag-toggle-button-width);
      max-width: var(--ag-toggle-button-width);
      height: var(--ag-toggle-button-height);
      background-color: var(--ag-toggle-button-off-background-color);
      border-radius: calc(var(--ag-toggle-button-height)*.5);
      position: relative;
      flex: none;
      border: var(--ag-toggle-button-border-width) solid;
      border-color: var(--ag-toggle-button-off-border-color)
    }

    .ag-toggle-button-input-wrapper input {
      opacity: 0;
      height: 100%;
      width: 100%
    }

    .ag-toggle-button-input-wrapper:focus-within {
      outline: 0;
      box-shadow: var(--ag-input-focus-box-shadow)
    }

    .ag-toggle-button-input-wrapper.ag-disabled {
      opacity: .5
    }

    .ag-toggle-button-input-wrapper.ag-checked {
      background-color: var(--ag-toggle-button-on-background-color);
      border-color: var(--ag-toggle-button-on-border-color)
    }

    .ag-toggle-button-input-wrapper::before {
      content: " ";
      position: absolute;
      top: calc(0px - var(--ag-toggle-button-border-width));
      left: calc(0px - var(--ag-toggle-button-border-width));
      display: block;
      box-sizing: border-box;
      height: var(--ag-toggle-button-height);
      width: var(--ag-toggle-button-height);
      background-color: var(--ag-toggle-button-switch-background-color);
      border-radius: 100%;
      transition: left 100ms;
      border: var(--ag-toggle-button-border-width) solid;
      border-color: var(--ag-toggle-button-switch-border-color)
    }

    .ag-toggle-button-input-wrapper.ag-checked::before {
      left: calc(100% - var(--ag-toggle-button-height) + var(--ag-toggle-button-border-width));
      border-color: var(--ag-toggle-button-on-border-color)
    }

    .ag-radio-button-input-wrapper {
      font-family: var(--ag-icon-font-family);
      font-weight: var(--ag-icon-font-weight);
      color: var(--ag-icon-font-color);
      font-size: var(--ag-icon-size);
      line-height: var(--ag-icon-size);
      font-style: normal;
      font-variant: normal;
      text-transform: none;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      width: var(--ag-icon-size);
      height: var(--ag-icon-size);
      background-color: var(--ag-checkbox-background-color);
      display: inline-block;
      vertical-align: middle;
      flex: none;
      border-radius: var(--ag-icon-size)
    }

    .ag-radio-button-input-wrapper input {
      -webkit-appearance: none;
      opacity: 0;
      width: 100%;
      height: 100%
    }

    .ag-radio-button-input-wrapper:active,
    .ag-radio-button-input-wrapper:focus-within {
      outline: 0;
      box-shadow: var(--ag-input-focus-box-shadow)
    }

    .ag-radio-button-input-wrapper.ag-disabled {
      opacity: .5
    }

    .ag-radio-button-input-wrapper::after {
      content: var(--ag-icon-font-code-radio-button-off, "\f127");
      color: var(--ag-checkbox-unchecked-color);
      display: var(--ag-icon-font-display-radio-button-off, var(--ag-icon-font-display));
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none
    }

    .ag-radio-button-input-wrapper.ag-checked::after {
      content: var(--ag-icon-font-code-radio-button-on, "\f128");
      color: var(--ag-checkbox-checked-color);
      display: var(--ag-icon-font-display-radio-button-on, var(--ag-icon-font-display));
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none
    }

    .ag-radio-button-input-wrapper::before {
      content: "";
      background: center/contain no-repeat;
      position: absolute;
      inset: 0;
      background-image: var(--ag-icon-image-radio-button-off, var(--ag-icon-image));
      display: var(--ag-icon-image-display-radio-button-off, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-radio-button-off, var(--ag-icon-image-opacity, 0.9))
    }

    .ag-radio-button-input-wrapper.ag-checked::before {
      background-image: var(--ag-icon-image-radio-button-on, var(--ag-icon-image));
      display: var(--ag-icon-image-display-radio-button-on, var(--ag-icon-image-display));
      opacity: var(--ag-icon-image-opacity-radio-button-on, var(--ag-icon-image-opacity, 0.9))
    }

    input[class^=ag-][type=range]::-webkit-slider-runnable-track {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 3px;
      background-color: var(--ag-border-color);
      border-radius: var(--ag-checkbox-border-radius)
    }

    input[class^=ag-][type=range]::-moz-range-track {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 3px;
      background-color: var(--ag-border-color);
      border-radius: var(--ag-checkbox-border-radius)
    }

    input[class^=ag-][type=range]::-ms-track {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 3px;
      background-color: var(--ag-border-color);
      border-radius: var(--ag-checkbox-border-radius);
      color: transparent;
      width: calc(100% - 2px)
    }

    input[class^=ag-][type=range]::-webkit-slider-thumb {
      margin: 0;
      padding: 0;
      -webkit-appearance: none;
      width: var(--ag-icon-size);
      height: var(--ag-icon-size);
      background-color: var(--ag-background-color);
      border: 1px solid;
      border-color: var(--ag-checkbox-unchecked-color);
      border-radius: var(--ag-icon-size);
      transform: translateY(calc(var(--ag-icon-size)*-.5 + 1.5px))
    }

    input[class^=ag-][type=range]::-ms-thumb {
      margin: 0;
      padding: 0;
      -webkit-appearance: none;
      width: var(--ag-icon-size);
      height: var(--ag-icon-size);
      background-color: var(--ag-background-color);
      border: 1px solid;
      border-color: var(--ag-checkbox-unchecked-color);
      border-radius: var(--ag-icon-size)
    }

    input[class^=ag-][type=range]::-moz-ag-range-thumb {
      margin: 0;
      padding: 0;
      -webkit-appearance: none;
      width: var(--ag-icon-size);
      height: var(--ag-icon-size);
      background-color: var(--ag-background-color);
      border: 1px solid;
      border-color: var(--ag-checkbox-unchecked-color);
      border-radius: var(--ag-icon-size)
    }

    input[class^=ag-][type=range]:focus {
      outline: 0
    }

    input[class^=ag-][type=range]:focus::-webkit-slider-thumb {
      box-shadow: var(--ag-input-focus-box-shadow);
      border-color: var(--ag-checkbox-checked-color)
    }

    input[class^=ag-][type=range]:focus::-ms-thumb {
      box-shadow: var(--ag-input-focus-box-shadow);
      border-color: var(--ag-checkbox-checked-color)
    }

    input[class^=ag-][type=range]:focus::-moz-ag-range-thumb {
      box-shadow: var(--ag-input-focus-box-shadow);
      border-color: var(--ag-checkbox-checked-color)
    }

    input[class^=ag-][type=range]:active::-webkit-slider-runnable-track {
      background-color: var(--ag-input-focus-border-color)
    }

    input[class^=ag-][type=range]:active::-moz-ag-range-track {
      background-color: var(--ag-input-focus-border-color)
    }

    input[class^=ag-][type=range]:active::-ms-track {
      background-color: var(--ag-input-focus-border-color)
    }

    input[class^=ag-][type=range]:disabled {
      opacity: .5
    }
  </style>

  <style>
    @font-face {
      font-family: "agGridQuartz";
      src: url(data:font/woff2;charset=utf-8;base64,d09GMgABAAAAABkcAAsAAAAANMQAABjLAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHIlCBmAAi3AKwxy2HgE2AiQDgjwLgSAABCAFhEYHhTcb4ix1BGwcwOON5nMUJWsTiqjghGT//4cEeojURG1/kEjDhJmMILNiXXYFMRWHm25iSVMyh8ypixOcJyj76RdfldgRQ5stvO+qv+OK2/pJpPULmhyShCYP1H6/P7sX8cRQgpkkmoinB5mQmU6meYhM1/zT98pfc70v2Q0cES2Fj2gqCRyRqlFfuCpbXSOrGgDz/ZbJbKqwe4pETkWQM0u26vzMtD7T+gIL0ddbQSIirSeO/N/w/Db/D15t4ILnWrgAiato48ImxcKMReFCl8aiDHaZq3CtSwervKxa2HOp7+/eRcnWT/2hvwhkW7vxiOBXcjBUUzb491XbX6PWOcOSUEbezs3wy67YcgFH8pPllIuA/3NatuJi4u4cQqxadx0zDCzDB61G6AKa4621OKHwnlk2a1OuHGKuXMLiIC5zMVa+ykWZy1g0Llp3rlNdLf3T3zOUrmkoj/6ZJQ2CIBBsAvFEPAIcLns/s/bVyYcZIYTNIaeNusdnVHZRgon/7zd/6CLCKMBCvYSAbl/vvBMRgBxTNrm3PyMfhLfmF1SDPKx9dgCLzmFrXT8R6FcWfGBNoJ/ltMfC6h776W8okH4GOyZRE71OPkumk5+4ERBd1ZgkgHbpGI4iBIPJIlOx5pYmmwNxh7ujEpel7Iw/OcvAGMM5WlzfWUsUcYhRv7d1IogHb890615oW+Tg2bN0KAzUmoD5lU2ZEnwuuD2Hh3Aujz9Ot3NGWA64gxjFjovzJKFgfLp/6ui5Cc7wB9N4CAocc1wFctkyFggIujwmJ27LlG/Xrk1nnGUEM7g22VzbV6s3CXuEd+J8Oz4A43aEKpyiwHcV1CQ88tZAwDEc9vkkyQu9IbvgEOvZlv79d/VwN8KQ3pzvk7MujLjigvKOPnu4ffHqww//JVIWaNLWeAIffMu0y8xz6+KBwqnZPfvs3IEqGjDCwYpPkJmbGrN3zmCQYwL8ggJDuC9YOfDTQuNOjiwOTC05KTNV9F8jGCFUmzdzOIKoeckvwvVbuYpA1RaH+eV1zRWjkmr0LFQBnpG3CLnscYf4FJIcg5waRFe5w52RknBFsFbj1+5KdMSOkTvvjqt4psHaEFYCN0+1woVl5eMed5Sj4wV+sc/PmtFZvDdWm5OdXxD6maJxFYa7frZwBKdOefOca0aGa3XyBZzLiqMBxcMvwJNSqZte2SEdDOzUmiSMfFOAKEDQ5Tk41lnmttP4OzxIB/Ei9uJ68uOHL1VBBoiUBNqDmFzRTAF/lP1iyX/MpR37Hhvmi4uAdCABSr8HC7HwsBsKAM0qpRD/rvOD/UMenQwbeeerX7/Y97cyb3zw/Ze0orZ2EOyCRW0ElIJvuZ8AuH0Ob2bY8IBVTSQbC9fJJ7adizuJDMEUavOtzscvICgkLCIqJi6R2+e0jKycn2NBUUlZRUBVTV1DU1xLW0dXT9/A0MjYxNTMXNTC0gqEDGjv3O+tvtfVxtzoOvG/vyslwTwD6xCna+Lukgm85gGSN48poGywfmB+9cDCeoHFdQJLGwCW1wSsbAxYXQOwtm5gfS3A5nqArXUB2xsEdtYG7K4V2NswcLBG4HAdwNGageMNAScbBU7XDpytDzjfCHBxGwe/pEzIAhKwoAiqoAm64BP8QkAICiEhLESEqBAT4kJCSAopIS1khKyQE/JCQSgKJaEsVISqk7aabKoLDaEptIS2k6qOHNIVekJfGAhDYSSMhYkwFWbCXFgIS2HllA2RMFRgLhzvYmK0gxuu5NyTv6l1wp2p0omILCh4pSJR4f/E5H8xPoQ3QL4H/Zsa5BHp8AKkwQg9QLCJba8uns1XQ9HlWblQzhaCajGU1prEeCOaLMaQf+aUTT6hj8nb+O4WnmxmhqFAnxEuZ0Kfy8RBTwTMV2shJpPFZl2YfzZ0hvwKsZTild7gQq8d4iTH1Xo1VSoGEc84gvEQls3ni6lcyTREfuDMVo08kyAOBdrYBSB+U4PsjQRAXviY6DjOWeXC7Vu6peqYFVOVDhEOx+KHjSrXmwpykpbNe+UWfygRO6TnMnbaXHMiKIkRBwoSB1Jp08nmt1+KeFlvtSF3MF5wkAAXJzz5qjZBiaUd4oECKZbkXpJ1bK+yYg5qUkBWiUOlsVt6HnkPPcuimSno9QC52KbAvM4kUFv3/OMvSfmfB1wQSCvR1VGklDgVh6Gsh/Sz/SwFsin7gOhPsnc5Xl+nH+L7eZfXAUDeasbgtPzZHOT6HEGJDIMjmuPXHE7TYGol+RfwPa+7vFVieIJBmATRwW//GSzVvmRr/BOpH/m/wmX6V8LT6LTxk9ryKNsP1kpOF+lZnwRQL+NCA6qndXjV/LrDpQfYVCJKmH/bajMtLDm3hmW2Cjg0RiZG0CZrXVPqRFReInCmKeAUqtfDzCZjQxSGg6P0LDw+DN9RN0gpm8IAhkoA5NJSPJYgHnhQQMdSDqMaZEehqOPa3SpBkXWkIk9mZIATq4bHd8VbRwcXxCqHxhji0d6PXaAkQ1Qgnwvu49FBD0qlCaaQkLzhcVo1Vpx9UtZGu/RJKq+SkCzVyBP4MlWXQ/4BnqRUOMXqEcyAezT45MWElOZMhrn7CLIVKzKrcvXFVXFUTxt6GLJSKzKLYCrF67zlsjjDViyERabDSuoSwyCaBGvZzKrMOr1YB8jQNNPUom2ALFwk9Kh61CDkSZbTTAijpqfPonWbSomechGJjqlIiiEAw2AIp0EKBGnvPdZ1Xi72RgYxVdwL+8gA6hdRFAURukFKGm1OJfukLvDj4nA6jG4W7FXkzjB7E48+1gRaASkWIagSa8TegRr/MxGSRrnl5jKs2AWIEx6vozxXJ69IUkp8mPMbDpVaI0r17gVTGZzj18mMtqFTroBUDvaQNDNtZ3L8Ammkj6iASMGpJzd2v1noH0m18jddw+bhY9PnQhqvyLhV3uq8qFXYFX3U7vA6WsR6/SYkR4eNNtmodttZ3xfTRfv3lM6GjuYSZAAFSHQ5+qg7fRpgefza8LHolkG4TzVoY/4zHd2uPjxweUKJKm10cexg30Kzq6Oh+Pdrw3KYa7DoH82RySXpuraex2iA9MFe3K9g34dBQKIIgTfrxOGBxeU9bXWFNVcGMXVMczTHppdZDR1dRZUH+y6OSQFRovvIY2bnHWhLOHMlz/yEEK9gGzqMnG5bQb8OuyzHumKzprcbNf31qjELzdITCw4LcOYHoUWPMchtWIZ09dVJv2yVXsOlaa7b4Y06zEvY9BOrpgvJI6lLj/62TVTZM16TmKmiRcU9KNNOU8Ugual2eIiX80uIv0/+H2hBzf3dNI3dyVaGBHsJ9BV/zzLc2dsIm/q6YnFJjMZcpUhNVf9UqXaPjKtGdWrsA69ZhmKF3dok812JJrDBZyWSfB/hvt3hFv2GJZmHHYMkBxLSHEPN0tQ6xYrjrst+UKFSgEkLCnF58crplMBlNG+2Rc9S/Ka6mGCAQ6U/kU8y5W1eQY94aHSyJY1o6fQnA5zaQysHa8SPHiutDnvSVqJEqSOFzL+D3rJ26UGSHka0ASoeXUDbwgXY7RloAO1S7KT+PGR5c20b3fVeCTMOk/ro9Zzsba1zaZEGzA11rsl6tddhmu1Mzh2pC0rcwAsJXzA4uoOCdbXahsZymNVoNrK73p0AaB8Po36A82eDe5qvU9bfs3i5e3hteiBPufN9wJAnHFRruUsRk4iTz4lGJkYT/ePMCsxND0IMcbUzEk5mJfIw1e+WspiGRYEVymfJ0KjN2C5HxUBJou0d1yOQzEoqVehjlVrxrjDGs6pQdcn6Q+VXrzYCanpzeD0Is6aw0cfhNguVlDcIA6c7HnObJY32oTEVG15LiktCMSGq45arGMRRUqTWPaxyL5/lpAJWp74iU8790qRJxYZN3TaNliJ2UfF2sjQLPMmHVXtJNJluPdbXQ4Q3HRss/X4eHRUjn3XMNAMFpNZxPv0AQ4TS7yGkoMUOocE4OiFNCzTwb18TbHxLt/Ra45kNtOanhLv7m1GLqrvY/vkakyyTGZptg6JveNFsWlLURMSKvXkFQN79HtAMbbX1OiYFmA+QPAGhKTcMzleuiCfhFJlB03jy7iPPRY57y0JyyqpYA5DEVkKLxAJzp99mtoxsqTM3PReSEhJbgZFwgFV1wW/Rp7hP8Qt5QJB3gZbQS5bYnHZKKCsDjCpjspYsiUgwGgzcYn3rFQBeoqb5bRKRMuZXdAJgbS0q5jbXbm9BZR+V2K4YRrS3gD85jMZpX1+b01E59fDBTYTETdjNBxbmWiFAZN/Vqrp3d/f0vJKYJFcpdXe3VhZnG4ieI6s3FLGjSqKnGyxRzYEmbCdmwm+MNeiDtry0NtWdeg4tuBkOpTQaAqzNn7cqYzRlJA/kb3AID82onJ6BIlFI/X1Sr0czIqIiUN10fSa6shxc5gJftxN8xBUbs9dhbt2CRZr5W1dMahJQP2VWM2OsmMnwPpbNuKGY17kdCFVR3M07N7T2bmxznVvCn8qRlvncsdDPx1dctfL9hr4Nz1ZWNReFFNzJybrqlk9jiWJ1Tk5HuG94a14u+RR7SkJbfak7cnJWP/UHqPAChZtw65w5FEVwlBwFhJGMgegBxrSpNE5nZFy/XcnJTbQ12+RkpQvc3aO9x126dcs0zMRZyt8SsIU/bN10H5C+8bdGelZ7VqoBDWlcn+J1+e0eF9+37Hp/0QMtGKEBrqop3H6eVrQ/WBg3l+4XaYVnpCl5SVWit2q0fveecXu21aMFqGhwmzH3cbN+0fbd89j1gJuM0hJ6cBD5qOwdTraeo4+WALfbOA5tuzSCZtwCEen+iLaI/VKk7WUHRGJlJIz+xMGOWTL2RjdCwBFu8hNuFPI2Xpe289L57Q8Ao57+h8LNOO3t7eNtwy049biFN42TuA3NdFN0KjD6aa9+as3slerTDFyPR+LT8NGXOVJDnO3y/1Bbb2Q8dw2Uc/7GmN32Ek04v+/XV6/TlZslAWcN0NNn+L8PQkf3tTc02qAcfZd7wqy/fIeV5NWyudM1fsvYe06x/fwG4yJWyh/NW4557L2xRt3wjcktgKwzDefPeg3dR0Iwu59kcUsl4bWPFT06UPeec0PIcitT/fnB++A9zxOx66VkkMVXCnxWOXnovNydfKOf+czuYHfM9ol8IHN13+cpeUd3tkxgVdgUtILq1I1OKJ4i0vM0Oe4z9jY0BodQYj0a+vdvNSNPmKaMymFl+Vp8spg5Uco0YZ6DquG4PzVlIDM0JMt8QWBTWBWUgl5XR1Ds7qbv6cBSWSg04ST2/ukzaoJJYhMG0PiVEfpe+dbUGJ89Be5CPr1fXJ82Y01Vmk9WF5f41R5XklRy+5jqhWtXBJObkTkrv35XVQrc64q5JvtqphYuHNXx3K1LyfIEQUIlwYrRsVVfyTXUGiVmjqAlYKRKC+ZMjMoIlKvj5IGZ1fvb5zUMl99/nNed/PhTGas/9ZcusMRnXkBv8tKAp75/2pxfXeqgV7dcnXDZ2+ZQ4lfqrVR6l/qV8KkJDVFDU8cXDilDpy8KSG2Y195evfyctEuuzgicGDUnPByolounDNVkFQ1eLR0+CpTo8Lep/ay4ORuzgWiNFiqtOoYejSgczLQ3BqVP3Sb3VnuvsMRebpuaHtSoRIojFT3ud5UhqrB0v7xhbZIktTRj77r3KCKLkcThfFp+6qbrDM8MDc0cZ4nmca8n3SUvYAZlpb2A7r+QhD/5+lL+CcnDn2zkighz0XwBe9HDKGCOOAyKfphMGNC3/icGe3psTjuyKZBLxo8MArsfAIHr+bRCRjYP8l9LzdUC9Ty2JnN4VaUuCay7LaNwOmA8rz86ya+9iigzbEfz0fEBRGWRQO9G5OZRuC0vty4iF5olZigasAI5gQ4WOOItnZy510M89wH6Ecas7FYnqij5UQvyCKJORRqC5Sp/m+RoNhUc3JcqSO0DyfZ+i229diskcRJaQVTLc0xWxaiSB/xTTEv3lLBcYZJSkF/haqIiTxQWM+syX95AoSxGVjjAS4ErBEsJzRMlKgQF5RfKUhCGulwbW54VMguuZAKhsHkUgsO3pQPQgkfqG1rTa8PpmhqrkynbikvjkocWUGoE9BJu5QORc50hDbpteqCgw0Wy8Kut8tXUUBKT09214R8NI7DUbFV9qwN1BJAiJt46xr4+LW3t+4tgdbj9ECThEDJhaNThIIlxSsRffXQtYui+PlD1X2jhn5CYzAn2Gd5VjxN2Ab7wIQbEnd1N43RvL9FqkhPOs7/RbrfiEdz+CA+u/A6GVfV2u9Fv4Q8BQd4a9q0//ihTO7EjT1ISsxO9T2c0NHuqGYrEKcrvxN6fOAHQyaOAj69CETNWXlKRFaYLDdWFZZGWyOlC58zkKpRbVBc7NWbSpJipcT+XtKSWpgN+xAVbf4DS2FlC3NQ64I08DGDyeaIzwQNXffAZ0YBfvyqJp2APoWp0gHNntOEcXrimTvJVXFcQrkY/kJd0BvJ4Sep+P3VYASFy2fUq8dWp5xgJxYWFNkdTNnXoMIXTdWYJQy1XX0kUFoihBbBvN3r283Si01KGxn8Lf7tHW1OqGK0Wp2ImTAtJbHxz1WiauKnNY/vE7/5aNL3WH9WMUKNSaIH3xNUgTdTU7s77ynNv35IqAtXie9CMBXHUIzScNoQSumrk78JIwIQZAyTV9i1y8QrQByLR0OlqhWelDQThYB0UPMTMsLNT+Js6dz+gU3xW5z1Zy9/b45x1M/+eFZogGC7rneVyfZq8KH0SbBpTPAadNvFwdsKktCY4v3h+Gas1O0YeGN/gkRn9FwdsSpsUn31y6mRmf6SygLWlZJoRy6vSikOErJKK7ZumFXm2TmjN5hAl4xph1jJthnbZ8PlHjswfbohsXJHLqCTvGfct9PBRstygSZp6/65BRqVxcu0PYjUGzn5r1RcLalcRFgD9mrq9vVY+8tntYJHKBITdffSoRt0rsQ0OEWIdGiKUYk5tLfHTphuSMOA7OKEwBZK4BYKPO9m67AEC5zsSPOLDUaIdl0cMDhLXdwJv6Ej4s9wMHHzMIBowWobaJLZHDzVgiYTq19FB4zYg9Yx1w+wv2mIOWzClJ6LqHdCzMYtiLIbsHPR2RdNgs/4dVhf78JzZxtpmQXFla81fj53ICbbfRssIa4uRYgEHbT5HO1/G6XemD9k0LBMHkcIbKJKNlQGBMCB8i2BLOJP5C5+3OowZmlV2vaGGAUpAGL56Rml0kUxWFF36PLqMXJFsFp6XrTJl80olNdA1TxKXiAqbmwtFJeK7lpD6/UWF4pK7MexDqFisqmrTY1VXyyW6G6SvagYVyIwih1SiVpspW1j6opp1k7ZDd9b/zlWkxwBTx48BW/vxaZmnbORzUXcRLP//cRW3DEdmPbQ7S0YbIpCE+SwxFJmr2TU6UmnWmZCWy7INGS4+RExxM5EMAP6kGvk+Eecgt54Vg5THbcoDyHxQlEmxsG4nErop/0oThzu8EVsQpcl2RS0yU7Q4/Hr2M+S8YywqQvXfn/9AdrJM0kQD8shUIrPlcU878kWtwhzjrkMcdr0qNyJsR40rlLmsNUEiah1knO9wAJlXinLCES2aZn+wzEXKX7azfA/2HRyPxv/d1SP+E5S6fbi2wkUwzrc7A8T+KMtSYlJuI/zDQvmzDaf8r7j8808APH4MuLpeAiqm8wgq/mXiPOAe3A4Qx/YiErzoI3NaXuZ8JNSFi29ogAHrb+ggDnbdMMF6oNz1AvNBFUAAcHQDABSCFZMbYmAWSNOCuIWH6XNo4bUbngc8eElfQAu/30ADmeH4hzFgFaO0APxeov2qIHr4Rl8TSHCY833+o5TI1LyFRUQd2R4JBRRt0y9NGf27qmuc8NB8MsVBpcRNFv5Bo11QzR8v4dPclJ3hYQV+L9F+VXD8evjGHa8pNCaMMcXZ/3FOC/qpMTVv3SumsAfCviUoWrtfbnYZd/a7nmzXXOqFh+azUIxJk0t5Czne+0Hj8i5QePnj5TSTw+WdKYToMSjVqMe5P27CQVE13WbYTcvhdLk9sXgimUpnsrl8oVgqV6q1eqPZane6vf5gOBpPprP5YrkilHFhmJbtuAqlSq1J1qakpqVn6DKzsretcsF7QQ8amY5BhKeyhWKODZDBdGQC0m5PEM1vz3P7bEH7HNhDJIuKMkQCxfuoTZWwel4aTixtjp6lcnIW60Dl3DCpgFG0O8N5OTLCpWxNGbem6s5iMUc4l62dHpah8Eh7hgu2JUEJ21fp2MVUonZEkhTdeYn5yAvXvEvUtPzo9DhFqjjtSWKwkfzpAHMc4gF3A1I9ZZT4GhATXhBrCynxJHaUiXO4VY6Obm9kvRXSH4bbvqoytezcTSCJjiT6oLsCI56XoYBaa3miN66FcYHkLMbpBrFItStCLlQQW5O4CO7d4TDCWbA9Z6TTSi2hGyovp1qOUqWjnzYD1frCqAZ4AqmIkUlhJMGv3qy1BlW2GDmHAAA=);
      font-weight: 400;
      font-style: normal
    }

    .ag-theme-quartz {
      --ag-input-border-color: var(--ag-border-color)
    }

    .ag-theme-quartz,
    .ag-theme-quartz-auto-dark,
    .ag-theme-quartz-dark {
      --ag-active-color: #2196f3;
      --ag-background-color: #fff;
      --ag-foreground-color: #181d1f;
      --ag-border-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 15%);
      --ag-secondary-border-color: var(--ag-border-color);
      --ag-header-background-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 2%);
      --ag-tooltip-background-color: var(--ag-header-background-color);
      --ag-control-panel-background-color: var(--ag-header-background-color);
      --ag-subheader-background-color: transparent;
      --ag-invalid-color: #e02525;
      --ag-checkbox-unchecked-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 30%);
      --ag-advanced-filter-join-pill-color: #f08e8d;
      --ag-advanced-filter-column-pill-color: #a6e194;
      --ag-advanced-filter-option-pill-color: #f3c08b;
      --ag-advanced-filter-value-pill-color: #85c0e4;
      --ag-header-column-resize-handle-color: var(--ag-secondary-border-color);
      --ag-icon-font-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 90%);
      --ag-panel-background-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 3%);
      --ag-panel-border-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 20%);
      --ag-menu-background-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 3%);
      --ag-menu-border-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 20%);
      --ag-selected-row-background-color: color-mix(in srgb, transparent, var(--ag-active-color) 8%);
      --ag-row-hover-color: color-mix(in srgb, transparent, var(--ag-active-color) 12%);
      --ag-column-hover-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 5%);
      --ag-input-focus-border-color: var(--ag-active-color);
      --ag-input-focus-box-shadow: 0 0 0 3px color-mix(in srgb, transparent, var(--ag-input-focus-border-color) 47%);
      --ag-range-selection-background-color: color-mix(in srgb, transparent, var(--ag-active-color) 20%);
      --ag-range-selection-background-color-2: color-mix(in srgb, transparent, var(--ag-active-color) 36%);
      --ag-range-selection-background-color-3: color-mix(in srgb, transparent, var(--ag-active-color) 49%);
      --ag-range-selection-background-color-4: color-mix(in srgb, transparent, var(--ag-active-color) 59%);
      --ag-checkbox-background-color: var(--ag-background-color);
      --ag-checkbox-checked-color: var(--ag-active-color);
      --ag-range-selection-border-color: var(--ag-active-color);
      --ag-secondary-foreground-color: var(--ag-foreground-color);
      --ag-input-border-color-invalid: var(--ag-invalid-color);
      --ag-disabled-foreground-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 50%);
      --ag-chip-background-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 7%);
      --ag-chip-border-color: color-mix(in srgb, var(--ag-header-background-color), var(--ag-foreground-color) 13%);
      --ag-input-disabled-border-color: var(--ag-border-color);
      --ag-input-disabled-background-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 6%);
      --ag-modal-overlay-background-color: color-mix(in srgb, transparent, var(--ag-background-color) 66%);
      --ag-borders: solid 1px;
      --ag-border-radius: 4px;
      --ag-wrapper-border-radius: 8px;
      --ag-borders-side-button: none;
      --ag-side-button-selected-background-color: transparent;
      --ag-header-column-resize-handle-display: block;
      --ag-header-column-resize-handle-width: 2px;
      --ag-header-column-resize-handle-height: 30%;
      --ag-grid-size: 8px;
      --ag-icon-size: 16px;
      --ag-header-height: calc(var(--ag-font-size) + var(--ag-grid-size) * 4.25);
      --ag-row-height: calc(var(--ag-font-size) + var(--ag-grid-size) * 3.5);
      --ag-list-item-height: calc(var(--ag-icon-size) + var(--ag-widget-vertical-spacing));
      --ag-column-select-indent-size: var(--ag-icon-size);
      --ag-set-filter-indent-size: var(--ag-icon-size);
      --ag-advanced-filter-builder-indent-size: calc(var(--ag-icon-size) + var(--ag-grid-size) * 2);
      --ag-cell-horizontal-padding: calc(var(--ag-grid-size) * 2);
      --ag-cell-widget-spacing: calc(var(--ag-grid-size) * 1.5);
      --ag-widget-container-vertical-padding: calc(var(--ag-grid-size) * 1.5);
      --ag-widget-container-horizontal-padding: calc(var(--ag-grid-size) * 1.5);
      --ag-widget-horizontal-spacing: calc(var(--ag-grid-size) * 1.5);
      --ag-widget-vertical-spacing: calc(var(--ag-grid-size) * 1);
      --ag-toggle-button-height: 18px;
      --ag-toggle-button-width: 28px;
      --ag-toggle-button-border-width: 2px;
      --ag-font-family: "IBM Plex Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
      --ag-font-size: 14px;
      --ag-icon-font-family: agGridQuartz;
      --ag-tab-min-width: 0;
      --ag-card-shadow: 0 1px 4px 1px rgba(186, 191, 199, 0.4);
      --ag-popup-shadow: 0 0 16px 0 rgba(0, 0, 0, 0.15);
      --ag-side-bar-panel-width: 250px
    }

    .ag-theme-quartz-auto-dark {
      --ag-input-border-color: var(--ag-border-color)
    }

    .ag-theme-quartz-dark {
      --ag-background-color: color-mix(in srgb, #fff, #182230 97%);
      --ag-foreground-color: #fff;
      --ag-border-color: rgba(255, 255, 255, 0.16);
      --ag-secondary-border-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 10%);
      --ag-header-background-color: color-mix(in srgb, #fff, #182230 93%);
      --ag-tooltip-background-color: color-mix(in srgb, #fff, #182230 96%);
      --ag-control-panel-background-color: color-mix(in srgb, #fff, #182230 93%);
      --ag-input-disabled-background-color: #68686e12;
      --ag-card-shadow: 0 1px 20px 1px black;
      --ag-input-border-color: var(--ag-border-color);
      --ag-input-disabled-border-color: rgba(255, 255, 255, 0.07);
      --ag-checkbox-unchecked-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 40%);
      --ag-row-hover-color: color-mix(in srgb, transparent, var(--ag-active-color) 20%);
      --ag-selected-row-background-color: var(--ag-row-hover-color);
      --ag-panel-background-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 10%);
      --ag-panel-border-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 10%);
      --ag-menu-background-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 10%);
      --ag-menu-border-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 10%);
      --ag-advanced-filter-join-pill-color: #7a3a37;
      --ag-advanced-filter-column-pill-color: #355f2d;
      --ag-advanced-filter-option-pill-color: #5a3168;
      --ag-advanced-filter-value-pill-color: #374c86;
      --ag-popup-shadow: 0 0px 20px rgba(0, 0, 0, 0.30);
      color-scheme: dark
    }

    @media (prefers-color-scheme:dark) {
      .ag-theme-quartz-auto-dark {
        --ag-background-color: color-mix(in srgb, #fff, #182230 97%);
        --ag-foreground-color: #fff;
        --ag-border-color: rgba(255, 255, 255, 0.16);
        --ag-secondary-border-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 10%);
        --ag-header-background-color: color-mix(in srgb, #fff, #182230 93%);
        --ag-tooltip-background-color: color-mix(in srgb, #fff, #182230 96%);
        --ag-control-panel-background-color: color-mix(in srgb, #fff, #182230 93%);
        --ag-input-disabled-background-color: #68686e12;
        --ag-card-shadow: 0 1px 20px 1px black;
        --ag-input-border-color: var(--ag-border-color);
        --ag-input-disabled-border-color: rgba(255, 255, 255, 0.07);
        --ag-checkbox-unchecked-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 40%);
        --ag-row-hover-color: color-mix(in srgb, transparent, var(--ag-active-color) 20%);
        --ag-selected-row-background-color: var(--ag-row-hover-color);
        --ag-panel-background-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 10%);
        --ag-panel-border-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 10%);
        --ag-menu-background-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 10%);
        --ag-menu-border-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 10%);
        --ag-advanced-filter-join-pill-color: #7a3a37;
        --ag-advanced-filter-column-pill-color: #355f2d;
        --ag-advanced-filter-option-pill-color: #5a3168;
        --ag-advanced-filter-value-pill-color: #374c86;
        --ag-popup-shadow: 0 0px 20px rgba(0, 0, 0, 0.30);
        color-scheme: dark
      }
    }

    .ag-theme-quartz .ag-filter-toolpanel-header,
    .ag-theme-quartz .ag-filter-toolpanel-search {
      font-weight: 500;
      color: var(--ag-header-foreground-color)
    }

    .ag-theme-quartz .ag-status-bar {
      color: var(--ag-header-foreground-color)
    }

    .ag-theme-quartz .ag-header-row,
    .ag-theme-quartz .ag-multi-filter-group-title-bar,
    .ag-theme-quartz .ag-panel-title-bar-title,
    .ag-theme-quartz-dark .ag-filter-toolpanel-header,
    .ag-theme-quartz-dark .ag-filter-toolpanel-search {
      font-weight: 500;
      color: var(--ag-header-foreground-color)
    }

    .ag-theme-quartz-dark .ag-status-bar {
      color: var(--ag-header-foreground-color)
    }

    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-header,
    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-search,
    .ag-theme-quartz-dark .ag-header-row,
    .ag-theme-quartz-dark .ag-multi-filter-group-title-bar,
    .ag-theme-quartz-dark .ag-panel-title-bar-title {
      font-weight: 500;
      color: var(--ag-header-foreground-color)
    }

    .ag-theme-quartz-auto-dark .ag-status-bar {
      color: var(--ag-header-foreground-color)
    }

    .ag-theme-quartz-auto-dark .ag-header-row,
    .ag-theme-quartz-auto-dark .ag-multi-filter-group-title-bar,
    .ag-theme-quartz-auto-dark .ag-panel-title-bar-title {
      font-weight: 500;
      color: var(--ag-header-foreground-color)
    }

    .ag-theme-quartz input[class^=ag-]:not([type]),
    .ag-theme-quartz input[class^=ag-][type=date],
    .ag-theme-quartz input[class^=ag-][type=datetime-local],
    .ag-theme-quartz input[class^=ag-][type=number],
    .ag-theme-quartz input[class^=ag-][type=tel],
    .ag-theme-quartz input[class^=ag-][type=text],
    .ag-theme-quartz textarea[class^=ag-],
    .ag-theme-quartz-auto-dark input[class^=ag-]:not([type]),
    .ag-theme-quartz-auto-dark input[class^=ag-][type=date],
    .ag-theme-quartz-auto-dark input[class^=ag-][type=datetime-local],
    .ag-theme-quartz-auto-dark input[class^=ag-][type=number],
    .ag-theme-quartz-auto-dark input[class^=ag-][type=tel],
    .ag-theme-quartz-auto-dark input[class^=ag-][type=text],
    .ag-theme-quartz-auto-dark textarea[class^=ag-],
    .ag-theme-quartz-dark input[class^=ag-]:not([type]),
    .ag-theme-quartz-dark input[class^=ag-][type=date],
    .ag-theme-quartz-dark input[class^=ag-][type=datetime-local],
    .ag-theme-quartz-dark input[class^=ag-][type=number],
    .ag-theme-quartz-dark input[class^=ag-][type=tel],
    .ag-theme-quartz-dark input[class^=ag-][type=text],
    .ag-theme-quartz-dark textarea[class^=ag-] {
      min-height: calc(var(--ag-grid-size)*4);
      border-radius: var(--ag-border-radius)
    }

    .ag-theme-quartz .ag-ltr input[class^=ag-]:not([type]),
    .ag-theme-quartz .ag-ltr input[class^=ag-][type=date],
    .ag-theme-quartz .ag-ltr input[class^=ag-][type=datetime-local],
    .ag-theme-quartz .ag-ltr input[class^=ag-][type=number],
    .ag-theme-quartz .ag-ltr input[class^=ag-][type=tel],
    .ag-theme-quartz .ag-ltr input[class^=ag-][type=text],
    .ag-theme-quartz .ag-ltr textarea[class^=ag-],
    .ag-theme-quartz-auto-dark .ag-ltr input[class^=ag-]:not([type]),
    .ag-theme-quartz-auto-dark .ag-ltr input[class^=ag-][type=date],
    .ag-theme-quartz-auto-dark .ag-ltr input[class^=ag-][type=datetime-local],
    .ag-theme-quartz-auto-dark .ag-ltr input[class^=ag-][type=number],
    .ag-theme-quartz-auto-dark .ag-ltr input[class^=ag-][type=tel],
    .ag-theme-quartz-auto-dark .ag-ltr input[class^=ag-][type=text],
    .ag-theme-quartz-auto-dark .ag-ltr textarea[class^=ag-],
    .ag-theme-quartz-dark .ag-ltr input[class^=ag-]:not([type]),
    .ag-theme-quartz-dark .ag-ltr input[class^=ag-][type=date],
    .ag-theme-quartz-dark .ag-ltr input[class^=ag-][type=datetime-local],
    .ag-theme-quartz-dark .ag-ltr input[class^=ag-][type=number],
    .ag-theme-quartz-dark .ag-ltr input[class^=ag-][type=tel],
    .ag-theme-quartz-dark .ag-ltr input[class^=ag-][type=text],
    .ag-theme-quartz-dark .ag-ltr textarea[class^=ag-] {
      padding-left: var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-rtl input[class^=ag-]:not([type]),
    .ag-theme-quartz .ag-rtl input[class^=ag-][type=date],
    .ag-theme-quartz .ag-rtl input[class^=ag-][type=datetime-local],
    .ag-theme-quartz .ag-rtl input[class^=ag-][type=number],
    .ag-theme-quartz .ag-rtl input[class^=ag-][type=tel],
    .ag-theme-quartz .ag-rtl input[class^=ag-][type=text],
    .ag-theme-quartz .ag-rtl textarea[class^=ag-],
    .ag-theme-quartz-auto-dark .ag-rtl input[class^=ag-]:not([type]),
    .ag-theme-quartz-auto-dark .ag-rtl input[class^=ag-][type=date],
    .ag-theme-quartz-auto-dark .ag-rtl input[class^=ag-][type=datetime-local],
    .ag-theme-quartz-auto-dark .ag-rtl input[class^=ag-][type=number],
    .ag-theme-quartz-auto-dark .ag-rtl input[class^=ag-][type=tel],
    .ag-theme-quartz-auto-dark .ag-rtl input[class^=ag-][type=text],
    .ag-theme-quartz-auto-dark .ag-rtl textarea[class^=ag-],
    .ag-theme-quartz-dark .ag-rtl input[class^=ag-]:not([type]),
    .ag-theme-quartz-dark .ag-rtl input[class^=ag-][type=date],
    .ag-theme-quartz-dark .ag-rtl input[class^=ag-][type=datetime-local],
    .ag-theme-quartz-dark .ag-rtl input[class^=ag-][type=number],
    .ag-theme-quartz-dark .ag-rtl input[class^=ag-][type=tel],
    .ag-theme-quartz-dark .ag-rtl input[class^=ag-][type=text],
    .ag-theme-quartz-dark .ag-rtl textarea[class^=ag-] {
      padding-right: var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-picker-field-wrapper,
    .ag-theme-quartz-auto-dark .ag-picker-field-wrapper,
    .ag-theme-quartz-dark .ag-picker-field-wrapper {
      min-height: calc(var(--ag-grid-size)*4)
    }

    .ag-theme-quartz .ag-tab,
    .ag-theme-quartz-auto-dark .ag-tab,
    .ag-theme-quartz-dark .ag-tab {
      padding: var(--ag-grid-size);
      border-left: var(--ag-borders) transparent;
      border-right: var(--ag-borders) transparent;
      flex: 1 1 auto
    }

    .ag-theme-quartz .ag-tab-selected,
    .ag-theme-quartz-auto-dark .ag-tab-selected,
    .ag-theme-quartz-dark .ag-tab-selected {
      background-color: var(--ag-background-color)
    }

    .ag-theme-quartz .ag-ltr .ag-tab-selected:not(:first-of-type),
    .ag-theme-quartz-auto-dark .ag-ltr .ag-tab-selected:not(:first-of-type),
    .ag-theme-quartz-dark .ag-ltr .ag-tab-selected:not(:first-of-type) {
      border-left-color: var(--ag-border-color)
    }

    .ag-theme-quartz .ag-ltr .ag-tab-selected:not(:last-of-type),
    .ag-theme-quartz .ag-rtl .ag-tab-selected:not(:first-of-type),
    .ag-theme-quartz-auto-dark .ag-ltr .ag-tab-selected:not(:last-of-type),
    .ag-theme-quartz-auto-dark .ag-rtl .ag-tab-selected:not(:first-of-type),
    .ag-theme-quartz-dark .ag-ltr .ag-tab-selected:not(:last-of-type),
    .ag-theme-quartz-dark .ag-rtl .ag-tab-selected:not(:first-of-type) {
      border-right-color: var(--ag-border-color)
    }

    .ag-theme-quartz .ag-rtl .ag-tab-selected:not(:last-of-type),
    .ag-theme-quartz-auto-dark .ag-rtl .ag-tab-selected:not(:last-of-type),
    .ag-theme-quartz-dark .ag-rtl .ag-tab-selected:not(:last-of-type) {
      border-left-color: var(--ag-border-color)
    }

    .ag-theme-quartz .ag-tab:not(.ag-tab-selected),
    .ag-theme-quartz-auto-dark .ag-tab:not(.ag-tab-selected),
    .ag-theme-quartz-dark .ag-tab:not(.ag-tab-selected) {
      opacity: .7
    }

    .ag-theme-quartz .ag-tab:not(.ag-tab-selected):hover,
    .ag-theme-quartz-auto-dark .ag-tab:not(.ag-tab-selected):hover,
    .ag-theme-quartz-dark .ag-tab:not(.ag-tab-selected):hover {
      opacity: 1
    }

    .ag-theme-quartz .ag-menu,
    .ag-theme-quartz-auto-dark .ag-menu,
    .ag-theme-quartz-dark .ag-menu {
      color: color-mix(in srgb, transparent, var(--ag-foreground-color) 95%)
    }

    .ag-theme-quartz .ag-menu.ag-tabs,
    .ag-theme-quartz-auto-dark .ag-menu.ag-tabs,
    .ag-theme-quartz-dark .ag-menu.ag-tabs {
      min-width: 290px
    }

    .ag-theme-quartz .ag-panel-content-wrapper .ag-column-select,
    .ag-theme-quartz-auto-dark .ag-panel-content-wrapper .ag-column-select,
    .ag-theme-quartz-dark .ag-panel-content-wrapper .ag-column-select {
      background-color: var(--ag-control-panel-background-color);
      color: color-mix(in srgb, transparent, var(--ag-foreground-color) 95%)
    }

    .ag-theme-quartz .ag-menu-option .ag-icon,
    .ag-theme-quartz-auto-dark .ag-menu-option .ag-icon,
    .ag-theme-quartz-dark .ag-menu-option .ag-icon {
      opacity: 65%
    }

    .ag-theme-quartz .ag-menu-header,
    .ag-theme-quartz-auto-dark .ag-menu-header,
    .ag-theme-quartz-dark .ag-menu-header {
      background-color: var(--ag-control-panel-background-color)
    }

    .ag-theme-quartz .ag-menu-option,
    .ag-theme-quartz-auto-dark .ag-menu-option,
    .ag-theme-quartz-dark .ag-menu-option {
      font-weight: 500;
      cursor: pointer
    }

    .ag-theme-quartz .ag-ltr .ag-menu-option-popup-pointer .ag-icon,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-menu-option-popup-pointer .ag-icon,
    .ag-theme-quartz-dark .ag-ltr .ag-menu-option-popup-pointer .ag-icon {
      text-align: right
    }

    .ag-theme-quartz .ag-rtl .ag-menu-option-popup-pointer .ag-icon,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-menu-option-popup-pointer .ag-icon,
    .ag-theme-quartz-dark .ag-rtl .ag-menu-option-popup-pointer .ag-icon {
      text-align: left
    }

    .ag-theme-quartz .ag-tabs-header,
    .ag-theme-quartz-auto-dark .ag-tabs-header,
    .ag-theme-quartz-dark .ag-tabs-header {
      border-bottom: var(--ag-borders) var(--ag-border-color);
      display: flex;
      background-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 5%)
    }

    .ag-theme-quartz .ag-side-bar,
    .ag-theme-quartz-auto-dark .ag-side-bar,
    .ag-theme-quartz-dark .ag-side-bar {
      background-color: var(--ag-control-panel-background-color);
      min-width: calc(var(--ag-icon-size) + var(--ag-grid-size)*2)
    }

    .ag-theme-quartz .ag-side-buttons,
    .ag-theme-quartz-auto-dark .ag-side-buttons,
    .ag-theme-quartz-dark .ag-side-buttons {
      padding: 0;
      align-self: stretch;
      width: calc(var(--ag-icon-size) + var(--ag-grid-size)*2);
      background: var(--ag-control-panel-background-color)
    }

    .ag-theme-quartz .ag-side-button,
    .ag-theme-quartz-auto-dark .ag-side-button,
    .ag-theme-quartz-dark .ag-side-button {
      border-top: var(--ag-borders) transparent;
      border-bottom: var(--ag-borders) transparent
    }

    @media (max-resolution:1.5x) {

      .ag-theme-quartz .ag-side-button-label,
      .ag-theme-quartz-auto-dark .ag-side-button-label,
      .ag-theme-quartz-dark .ag-side-button-label {
        font-family: "Segoe UI", var(--ag-font-family);
        transform: rotate(.05deg)
      }
    }

    .ag-theme-quartz .ag-side-button.ag-selected,
    .ag-theme-quartz-auto-dark .ag-side-button.ag-selected,
    .ag-theme-quartz-dark .ag-side-button.ag-selected {
      border-bottom-color: var(--ag-border-color);
      background-color: var(--ag-background-color)
    }

    .ag-theme-quartz .ag-side-button.ag-selected:not(:first-of-type),
    .ag-theme-quartz-auto-dark .ag-side-button.ag-selected:not(:first-of-type),
    .ag-theme-quartz-dark .ag-side-button.ag-selected:not(:first-of-type) {
      border-top-color: var(--ag-border-color)
    }

    .ag-theme-quartz .ag-column-panel-column-select,
    .ag-theme-quartz-auto-dark .ag-column-panel-column-select,
    .ag-theme-quartz-dark .ag-column-panel-column-select {
      border-top: none;
      border-bottom: 1px solid var(--ag-secondary-border-color)
    }

    .ag-theme-quartz .ag-filter-toolpanel-search,
    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-search,
    .ag-theme-quartz-dark .ag-filter-toolpanel-search {
      height: initial;
      margin-top: var(--ag-widget-container-vertical-padding)
    }

    .ag-theme-quartz .ag-filter-toolpanel-search-input,
    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-search-input,
    .ag-theme-quartz-dark .ag-filter-toolpanel-search-input {
      margin: 0
    }

    .ag-theme-quartz .ag-filter-apply-panel,
    .ag-theme-quartz-auto-dark .ag-filter-apply-panel,
    .ag-theme-quartz-dark .ag-filter-apply-panel {
      border: 0;
      padding-top: var(--ag-widget-vertical-spacing)
    }

    .ag-theme-quartz .ag-chart-tabbed-menu-body,
    .ag-theme-quartz-auto-dark .ag-chart-tabbed-menu-body,
    .ag-theme-quartz-dark .ag-chart-tabbed-menu-body {
      position: relative
    }

    .ag-theme-quartz .ag-chart-tabbed-menu-body::after,
    .ag-theme-quartz-auto-dark .ag-chart-tabbed-menu-body::after,
    .ag-theme-quartz-dark .ag-chart-tabbed-menu-body::after {
      content: "";
      position: absolute;
      display: block;
      top: 0;
      left: 0;
      right: 0;
      height: 16px;
      background: linear-gradient(var(--ag-control-panel-background-color), transparent)
    }

    .ag-theme-quartz .ag-charts-data-group-title-bar,
    .ag-theme-quartz .ag-charts-format-top-level-group-title-bar,
    .ag-theme-quartz .ag-charts-settings-group-container,
    .ag-theme-quartz .ag-charts-settings-group-title-bar,
    .ag-theme-quartz-auto-dark .ag-charts-data-group-title-bar,
    .ag-theme-quartz-auto-dark .ag-charts-format-top-level-group-title-bar,
    .ag-theme-quartz-auto-dark .ag-charts-settings-group-container,
    .ag-theme-quartz-auto-dark .ag-charts-settings-group-title-bar,
    .ag-theme-quartz-dark .ag-charts-data-group-title-bar,
    .ag-theme-quartz-dark .ag-charts-format-top-level-group-title-bar,
    .ag-theme-quartz-dark .ag-charts-settings-group-container,
    .ag-theme-quartz-dark .ag-charts-settings-group-title-bar {
      border-top: none;
      padding: 0 calc(var(--ag-grid-size)*1.5);
      font-weight: 500
    }

    .ag-theme-quartz .ag-charts-format-top-level-group-item,
    .ag-theme-quartz-auto-dark .ag-charts-format-top-level-group-item,
    .ag-theme-quartz-dark .ag-charts-format-top-level-group-item {
      padding-bottom: 12px
    }

    .ag-theme-quartz .ag-charts-settings-group-container,
    .ag-theme-quartz-auto-dark .ag-charts-settings-group-container,
    .ag-theme-quartz-dark .ag-charts-settings-group-container {
      margin-top: calc(var(--ag-grid-size))
    }

    .ag-theme-quartz .ag-ltr .ag-charts-settings-group-container,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-charts-settings-group-container,
    .ag-theme-quartz-dark .ag-ltr .ag-charts-settings-group-container {
      padding-right: var(--ag-widget-container-horizontal-padding)
    }

    .ag-theme-quartz .ag-rtl .ag-charts-settings-group-container,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-charts-settings-group-container,
    .ag-theme-quartz-dark .ag-rtl .ag-charts-settings-group-container {
      padding-left: var(--ag-widget-container-horizontal-padding)
    }

    .ag-theme-quartz .ag-ltr .ag-charts-format-sub-level-group-container,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-charts-format-sub-level-group-container,
    .ag-theme-quartz-dark .ag-ltr .ag-charts-format-sub-level-group-container {
      padding-right: 0
    }

    .ag-theme-quartz .ag-rtl .ag-charts-format-sub-level-group-container,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-charts-format-sub-level-group-container,
    .ag-theme-quartz-dark .ag-rtl .ag-charts-format-sub-level-group-container {
      padding-left: 0
    }

    .ag-theme-quartz .ag-charts-format-top-level-group-toolbar,
    .ag-theme-quartz-auto-dark .ag-charts-format-top-level-group-toolbar,
    .ag-theme-quartz-dark .ag-charts-format-top-level-group-toolbar {
      margin-top: var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-ltr .ag-charts-format-top-level-group-toolbar,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-charts-format-top-level-group-toolbar,
    .ag-theme-quartz-dark .ag-ltr .ag-charts-format-top-level-group-toolbar {
      padding-left: calc(var(--ag-grid-size)*2)
    }

    .ag-theme-quartz .ag-rtl .ag-charts-format-top-level-group-toolbar,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-charts-format-top-level-group-toolbar,
    .ag-theme-quartz-dark .ag-rtl .ag-charts-format-top-level-group-toolbar {
      padding-right: calc(var(--ag-grid-size)*2)
    }

    .ag-theme-quartz .ag-charts-data-group-title-bar,
    .ag-theme-quartz .ag-charts-format-top-level-group-title-bar,
    .ag-theme-quartz .ag-charts-settings-group-title-bar,
    .ag-theme-quartz-auto-dark .ag-charts-data-group-title-bar,
    .ag-theme-quartz-auto-dark .ag-charts-format-top-level-group-title-bar,
    .ag-theme-quartz-auto-dark .ag-charts-settings-group-title-bar,
    .ag-theme-quartz-dark .ag-charts-data-group-title-bar,
    .ag-theme-quartz-dark .ag-charts-format-top-level-group-title-bar,
    .ag-theme-quartz-dark .ag-charts-settings-group-title-bar {
      margin-top: calc(var(--ag-grid-size)*2)
    }

    .ag-theme-quartz .ag-charts-format-top-level-group-container,
    .ag-theme-quartz-auto-dark .ag-charts-format-top-level-group-container,
    .ag-theme-quartz-dark .ag-charts-format-top-level-group-container {
      padding: 0
    }

    .ag-theme-quartz .ag-ltr .ag-charts-format-top-level-group-container,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-charts-format-top-level-group-container,
    .ag-theme-quartz-dark .ag-ltr .ag-charts-format-top-level-group-container {
      padding-left: 0;
      padding-right: var(--ag-widget-container-horizontal-padding)
    }

    .ag-theme-quartz .ag-rtl .ag-charts-format-top-level-group-container,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-charts-format-top-level-group-container,
    .ag-theme-quartz-dark .ag-rtl .ag-charts-format-top-level-group-container {
      padding-right: 0;
      padding-left: var(--ag-widget-container-horizontal-padding)
    }

    .ag-theme-quartz .ag-charts-format-top-level-group-item,
    .ag-theme-quartz-auto-dark .ag-charts-format-top-level-group-item,
    .ag-theme-quartz-dark .ag-charts-format-top-level-group-item {
      margin-top: calc(var(--ag-grid-size)*2);
      margin-bottom: 0
    }

    .ag-theme-quartz .ag-chart-mini-thumbnail,
    .ag-theme-quartz-auto-dark .ag-chart-mini-thumbnail,
    .ag-theme-quartz-dark .ag-chart-mini-thumbnail {
      background-color: var(--ag-background-color);
      margin-top: 0;
      margin-bottom: 0
    }

    .ag-theme-quartz .ag-chart-settings-nav-bar,
    .ag-theme-quartz-auto-dark .ag-chart-settings-nav-bar,
    .ag-theme-quartz-dark .ag-chart-settings-nav-bar {
      border-top: var(--ag-borders-secondary) var(--ag-secondary-border-color)
    }

    .ag-theme-quartz .ag-ltr .ag-group-title-bar-icon,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-group-title-bar-icon,
    .ag-theme-quartz-dark .ag-ltr .ag-group-title-bar-icon {
      margin-right: var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-ltr .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz .ag-ltr .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz .ag-ltr .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz .ag-ltr .ag-mini-filter .ag-input-wrapper::before,
    .ag-theme-quartz .ag-rtl .ag-group-title-bar-icon,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-mini-filter .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-group-title-bar-icon,
    .ag-theme-quartz-dark .ag-ltr .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-ltr .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-ltr .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-ltr .ag-mini-filter .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-rtl .ag-group-title-bar-icon {
      margin-left: var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-color-picker .ag-picker-field-wrapper,
    .ag-theme-quartz-auto-dark .ag-color-picker .ag-picker-field-wrapper,
    .ag-theme-quartz-dark .ag-color-picker .ag-picker-field-wrapper {
      max-width: 55px;
      min-width: 55px
    }

    .ag-theme-quartz .ag-color-picker .ag-picker-field-display,
    .ag-theme-quartz-auto-dark .ag-color-picker .ag-picker-field-display,
    .ag-theme-quartz-dark .ag-color-picker .ag-picker-field-display {
      height: 18px;
      width: 18px;
      flex: auto 0 0;
      margin: 6px;
      border-radius: 2px;
      border: solid 1px var(--ag-input-border-color)
    }

    .ag-theme-quartz .ag-ltr .ag-color-picker .ag-picker-field-icon,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-color-picker .ag-picker-field-icon,
    .ag-theme-quartz-dark .ag-ltr .ag-color-picker .ag-picker-field-icon {
      margin-right: 4px
    }

    .ag-theme-quartz .ag-rtl .ag-color-picker .ag-picker-field-icon,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-color-picker .ag-picker-field-icon,
    .ag-theme-quartz-dark .ag-rtl .ag-color-picker .ag-picker-field-icon {
      margin-left: 4px
    }

    .ag-theme-quartz .ag-charts-format-sub-level-group,
    .ag-theme-quartz-auto-dark .ag-charts-format-sub-level-group,
    .ag-theme-quartz-dark .ag-charts-format-sub-level-group {
      border-left: dashed 1px;
      border-left-color: var(--ag-border-color);
      padding-left: var(--ag-grid-size);
      margin-bottom: calc(var(--ag-grid-size)*2)
    }

    .ag-theme-quartz .ag-charts-format-sub-level-group-title-bar,
    .ag-theme-quartz-auto-dark .ag-charts-format-sub-level-group-title-bar,
    .ag-theme-quartz-dark .ag-charts-format-sub-level-group-title-bar {
      padding-top: 0;
      padding-bottom: 0;
      background: 0 0;
      font-weight: 500
    }

    .ag-theme-quartz .ag-charts-format-sub-level-group-container,
    .ag-theme-quartz-auto-dark .ag-charts-format-sub-level-group-container,
    .ag-theme-quartz-dark .ag-charts-format-sub-level-group-container {
      padding-bottom: 0
    }

    .ag-theme-quartz .ag-charts-format-sub-level-group-item:last-child,
    .ag-theme-quartz-auto-dark .ag-charts-format-sub-level-group-item:last-child,
    .ag-theme-quartz-dark .ag-charts-format-sub-level-group-item:last-child {
      margin-bottom: 0
    }

    .ag-theme-quartz-auto-dark.ag-dnd-ghost,
    .ag-theme-quartz-dark.ag-dnd-ghost,
    .ag-theme-quartz.ag-dnd-ghost {
      font-weight: 500
    }

    .ag-theme-quartz .ag-standard-button,
    .ag-theme-quartz-auto-dark .ag-standard-button,
    .ag-theme-quartz-dark .ag-standard-button {
      font-family: inherit;
      appearance: none;
      -webkit-appearance: none;
      border-radius: var(--ag-border-radius);
      border: solid 1px var(--ag-input-border-color);
      background-color: var(--ag-background-color);
      padding: var(--ag-grid-size) calc(var(--ag-grid-size)*2);
      cursor: pointer
    }

    .ag-theme-quartz .ag-standard-button:hover,
    .ag-theme-quartz-auto-dark .ag-standard-button:hover,
    .ag-theme-quartz-dark .ag-standard-button:hover {
      background-color: var(--ag-row-hover-color)
    }

    .ag-theme-quartz .ag-standard-button:active,
    .ag-theme-quartz-auto-dark .ag-standard-button:active,
    .ag-theme-quartz-dark .ag-standard-button:active {
      border-color: var(--ag-active-color)
    }

    .ag-theme-quartz .ag-standard-button:disabled,
    .ag-theme-quartz-auto-dark .ag-standard-button:disabled,
    .ag-theme-quartz-dark .ag-standard-button:disabled {
      color: var(--ag-disabled-foreground-color);
      background-color: var(--ag-input-disabled-background-color);
      border-color: var(--ag-input-disabled-border-color)
    }

    .ag-theme-quartz .ag-column-drop-cell,
    .ag-theme-quartz-auto-dark .ag-column-drop-cell,
    .ag-theme-quartz-dark .ag-column-drop-cell {
      border-radius: calc(var(--ag-grid-size)*3);
      height: calc(var(--ag-grid-size)*3);
      padding: 0 var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-column-drop-cell-button,
    .ag-theme-quartz-auto-dark .ag-column-drop-cell-button,
    .ag-theme-quartz-dark .ag-column-drop-cell-button {
      min-width: 0;
      margin: 0
    }

    .ag-theme-quartz .ag-column-drop-cell-drag-handle,
    .ag-theme-quartz-auto-dark .ag-column-drop-cell-drag-handle,
    .ag-theme-quartz-dark .ag-column-drop-cell-drag-handle {
      margin-left: 0
    }

    .ag-theme-quartz .ag-column-drop-vertical,
    .ag-theme-quartz-auto-dark .ag-column-drop-vertical,
    .ag-theme-quartz-dark .ag-column-drop-vertical {
      min-height: 75px
    }

    .ag-theme-quartz .ag-column-drop-vertical-title-bar,
    .ag-theme-quartz-auto-dark .ag-column-drop-vertical-title-bar,
    .ag-theme-quartz-dark .ag-column-drop-vertical-title-bar {
      padding: var(--ag-widget-container-vertical-padding) calc(var(--ag-grid-size)*2)0
    }

    .ag-theme-quartz .ag-ltr .ag-column-drop-vertical-icon,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-column-drop-vertical-icon,
    .ag-theme-quartz-dark .ag-ltr .ag-column-drop-vertical-icon {
      margin-left: 0;
      margin-right: var(--ag-widget-horizontal-spacing)
    }

    .ag-theme-quartz .ag-rtl .ag-column-drop-vertical-icon,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-column-drop-vertical-icon,
    .ag-theme-quartz-dark .ag-rtl .ag-column-drop-vertical-icon {
      margin-right: 0;
      margin-left: var(--ag-widget-horizontal-spacing)
    }

    .ag-theme-quartz .ag-column-drop-vertical-empty-message,
    .ag-theme-quartz-auto-dark .ag-column-drop-vertical-empty-message,
    .ag-theme-quartz-dark .ag-column-drop-vertical-empty-message {
      display: flex;
      align-items: center;
      justify-content: center;
      border: dashed 1px;
      border-color: var(--ag-border-color);
      margin: calc(var(--ag-grid-size)*1.5) calc(var(--ag-grid-size)*2);
      padding: calc(var(--ag-grid-size)*2)
    }

    .ag-theme-quartz .ag-column-drop-empty-message,
    .ag-theme-quartz-auto-dark .ag-column-drop-empty-message,
    .ag-theme-quartz-dark .ag-column-drop-empty-message {
      color: var(--ag-foreground-color)
    }

    .ag-theme-quartz .ag-status-bar,
    .ag-theme-quartz-auto-dark .ag-status-bar,
    .ag-theme-quartz-dark .ag-status-bar {
      font-weight: 400
    }

    .ag-theme-quartz .ag-status-name-value,
    .ag-theme-quartz-auto-dark .ag-status-name-value,
    .ag-theme-quartz-dark .ag-status-name-value {
      padding: var(--ag-widget-container-vertical-padding)0
    }

    .ag-theme-quartz .ag-paging-number,
    .ag-theme-quartz .ag-paging-row-summary-panel-number,
    .ag-theme-quartz .ag-status-name-value-value,
    .ag-theme-quartz-auto-dark .ag-paging-number,
    .ag-theme-quartz-auto-dark .ag-paging-row-summary-panel-number,
    .ag-theme-quartz-auto-dark .ag-status-name-value-value,
    .ag-theme-quartz-dark .ag-paging-number,
    .ag-theme-quartz-dark .ag-paging-row-summary-panel-number,
    .ag-theme-quartz-dark .ag-status-name-value-value {
      font-weight: 500
    }

    .ag-theme-quartz .ag-column-drop-cell-button,
    .ag-theme-quartz-auto-dark .ag-column-drop-cell-button,
    .ag-theme-quartz-dark .ag-column-drop-cell-button {
      opacity: .75
    }

    .ag-theme-quartz .ag-column-drop-cell-button:hover,
    .ag-theme-quartz-auto-dark .ag-column-drop-cell-button:hover,
    .ag-theme-quartz-dark .ag-column-drop-cell-button:hover {
      opacity: 1
    }

    .ag-theme-quartz .ag-chart-menu-close,
    .ag-theme-quartz .ag-chart-menu-icon,
    .ag-theme-quartz .ag-chart-settings-next,
    .ag-theme-quartz .ag-chart-settings-prev,
    .ag-theme-quartz .ag-column-group-icons,
    .ag-theme-quartz .ag-column-select-header-icon,
    .ag-theme-quartz .ag-filter-toolpanel-expand,
    .ag-theme-quartz .ag-floating-filter-button-button,
    .ag-theme-quartz .ag-group-contracted .ag-icon,
    .ag-theme-quartz .ag-group-expanded .ag-icon,
    .ag-theme-quartz .ag-group-title-bar-icon,
    .ag-theme-quartz .ag-header-cell-filter-button,
    .ag-theme-quartz .ag-header-cell-menu-button,
    .ag-theme-quartz .ag-header-expand-icon,
    .ag-theme-quartz .ag-panel-title-bar-button,
    .ag-theme-quartz .ag-panel-title-bar-button-icon,
    .ag-theme-quartz .ag-set-filter-group-icons,
    .ag-theme-quartz-auto-dark .ag-chart-menu-close,
    .ag-theme-quartz-auto-dark .ag-chart-menu-icon,
    .ag-theme-quartz-auto-dark .ag-chart-settings-next,
    .ag-theme-quartz-auto-dark .ag-chart-settings-prev,
    .ag-theme-quartz-auto-dark .ag-column-group-icons,
    .ag-theme-quartz-auto-dark .ag-column-select-header-icon,
    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-expand,
    .ag-theme-quartz-auto-dark .ag-floating-filter-button-button,
    .ag-theme-quartz-auto-dark .ag-group-contracted .ag-icon,
    .ag-theme-quartz-auto-dark .ag-group-expanded .ag-icon,
    .ag-theme-quartz-auto-dark .ag-group-title-bar-icon,
    .ag-theme-quartz-auto-dark .ag-header-cell-filter-button,
    .ag-theme-quartz-auto-dark .ag-header-cell-menu-button,
    .ag-theme-quartz-auto-dark .ag-header-expand-icon,
    .ag-theme-quartz-auto-dark .ag-panel-title-bar-button,
    .ag-theme-quartz-auto-dark .ag-panel-title-bar-button-icon,
    .ag-theme-quartz-auto-dark .ag-set-filter-group-icons,
    .ag-theme-quartz-dark .ag-chart-menu-close,
    .ag-theme-quartz-dark .ag-chart-menu-icon,
    .ag-theme-quartz-dark .ag-chart-settings-next,
    .ag-theme-quartz-dark .ag-chart-settings-prev,
    .ag-theme-quartz-dark .ag-column-group-icons,
    .ag-theme-quartz-dark .ag-column-select-header-icon,
    .ag-theme-quartz-dark .ag-filter-toolpanel-expand,
    .ag-theme-quartz-dark .ag-floating-filter-button-button,
    .ag-theme-quartz-dark .ag-group-contracted .ag-icon,
    .ag-theme-quartz-dark .ag-group-expanded .ag-icon,
    .ag-theme-quartz-dark .ag-group-title-bar-icon,
    .ag-theme-quartz-dark .ag-header-cell-filter-button,
    .ag-theme-quartz-dark .ag-header-cell-menu-button,
    .ag-theme-quartz-dark .ag-header-expand-icon,
    .ag-theme-quartz-dark .ag-panel-title-bar-button,
    .ag-theme-quartz-dark .ag-panel-title-bar-button-icon,
    .ag-theme-quartz-dark .ag-set-filter-group-icons {
      --ag-quartz-icon-hover-color: color-mix(in srgb, transparent, var(--ag-foreground-color) 10%)
    }

    .ag-theme-quartz .ag-chart-menu-close:hover,
    .ag-theme-quartz .ag-chart-menu-icon:hover,
    .ag-theme-quartz .ag-chart-settings-next:hover,
    .ag-theme-quartz .ag-chart-settings-prev:hover,
    .ag-theme-quartz .ag-column-group-icons:hover,
    .ag-theme-quartz .ag-column-select-header-icon:hover,
    .ag-theme-quartz .ag-filter-toolpanel-expand:hover,
    .ag-theme-quartz .ag-floating-filter-button-button:hover,
    .ag-theme-quartz .ag-group-contracted .ag-icon:hover,
    .ag-theme-quartz .ag-group-expanded .ag-icon:hover,
    .ag-theme-quartz .ag-group-title-bar-icon:hover,
    .ag-theme-quartz .ag-header-cell-filter-button:hover,
    .ag-theme-quartz .ag-header-cell-menu-button:hover,
    .ag-theme-quartz .ag-header-expand-icon:hover,
    .ag-theme-quartz .ag-panel-title-bar-button-icon:hover,
    .ag-theme-quartz .ag-panel-title-bar-button:hover,
    .ag-theme-quartz .ag-set-filter-group-icons:hover,
    .ag-theme-quartz-auto-dark .ag-chart-menu-close:hover,
    .ag-theme-quartz-auto-dark .ag-chart-menu-icon:hover,
    .ag-theme-quartz-auto-dark .ag-chart-settings-next:hover,
    .ag-theme-quartz-auto-dark .ag-chart-settings-prev:hover,
    .ag-theme-quartz-auto-dark .ag-column-group-icons:hover,
    .ag-theme-quartz-auto-dark .ag-column-select-header-icon:hover,
    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-expand:hover,
    .ag-theme-quartz-auto-dark .ag-floating-filter-button-button:hover,
    .ag-theme-quartz-auto-dark .ag-group-contracted .ag-icon:hover,
    .ag-theme-quartz-auto-dark .ag-group-expanded .ag-icon:hover,
    .ag-theme-quartz-auto-dark .ag-group-title-bar-icon:hover,
    .ag-theme-quartz-auto-dark .ag-header-cell-filter-button:hover,
    .ag-theme-quartz-auto-dark .ag-header-cell-menu-button:hover,
    .ag-theme-quartz-auto-dark .ag-header-expand-icon:hover,
    .ag-theme-quartz-auto-dark .ag-panel-title-bar-button-icon:hover,
    .ag-theme-quartz-auto-dark .ag-panel-title-bar-button:hover,
    .ag-theme-quartz-auto-dark .ag-set-filter-group-icons:hover,
    .ag-theme-quartz-dark .ag-chart-menu-close:hover,
    .ag-theme-quartz-dark .ag-chart-menu-icon:hover,
    .ag-theme-quartz-dark .ag-chart-settings-next:hover,
    .ag-theme-quartz-dark .ag-chart-settings-prev:hover,
    .ag-theme-quartz-dark .ag-column-group-icons:hover,
    .ag-theme-quartz-dark .ag-column-select-header-icon:hover,
    .ag-theme-quartz-dark .ag-filter-toolpanel-expand:hover,
    .ag-theme-quartz-dark .ag-floating-filter-button-button:hover,
    .ag-theme-quartz-dark .ag-group-contracted .ag-icon:hover,
    .ag-theme-quartz-dark .ag-group-expanded .ag-icon:hover,
    .ag-theme-quartz-dark .ag-group-title-bar-icon:hover,
    .ag-theme-quartz-dark .ag-header-cell-filter-button:hover,
    .ag-theme-quartz-dark .ag-header-cell-menu-button:hover,
    .ag-theme-quartz-dark .ag-header-expand-icon:hover,
    .ag-theme-quartz-dark .ag-panel-title-bar-button-icon:hover,
    .ag-theme-quartz-dark .ag-panel-title-bar-button:hover,
    .ag-theme-quartz-dark .ag-set-filter-group-icons:hover {
      border-radius: 1px;
      background-color: var(--ag-quartz-icon-hover-color);
      box-shadow: 0 0 0 4px var(--ag-quartz-icon-hover-color)
    }

    .ag-theme-quartz .ag-filter-active,
    .ag-theme-quartz-auto-dark .ag-filter-active,
    .ag-theme-quartz-dark .ag-filter-active {
      --ag-quartz-icon-active-color: color-mix(in srgb, transparent, var(--ag-active-color) 14%);
      --ag-quartz-icon-hover-color: color-mix(in srgb, transparent, var(--ag-active-color) 28%);
      position: relative;
      border-radius: 1px;
      background-color: var(--ag-quartz-icon-active-color);
      box-shadow: 0 0 0 4px var(--ag-quartz-icon-active-color)
    }

    .ag-theme-quartz .ag-filter-active::after,
    .ag-theme-quartz-auto-dark .ag-filter-active::after,
    .ag-theme-quartz-dark .ag-filter-active::after {
      content: "";
      position: absolute;
      width: 6px;
      height: 6px;
      top: -1px;
      right: -1px;
      border-radius: 50%;
      background-color: var(--ag-active-color)
    }

    .ag-theme-quartz .ag-filter-active .ag-icon-filter,
    .ag-theme-quartz-auto-dark .ag-filter-active .ag-icon-filter,
    .ag-theme-quartz-dark .ag-filter-active .ag-icon-filter {
      clip-path: path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z")
    }

    .ag-theme-quartz .ag-chart-menu-close,
    .ag-theme-quartz-auto-dark .ag-chart-menu-close,
    .ag-theme-quartz-dark .ag-chart-menu-close {
      --ag-quartz-icon-hover-color: color-mix(in srgb, var(--ag-background-color), var(--ag-foreground-color) 10%)
    }

    .ag-theme-quartz .ag-chart-menu,
    .ag-theme-quartz-auto-dark .ag-chart-menu,
    .ag-theme-quartz-dark .ag-chart-menu {
      --ag-icon-size: 20px;
      background-color: color-mix(in srgb, transparent, var(--ag-background-color) 30%);
      padding: 4px 2px
    }

    .ag-theme-quartz .ag-chart-menu-icon,
    .ag-theme-quartz-auto-dark .ag-chart-menu-icon,
    .ag-theme-quartz-dark .ag-chart-menu-icon {
      opacity: .8
    }

    .ag-theme-quartz .ag-drag-handle,
    .ag-theme-quartz-auto-dark .ag-drag-handle,
    .ag-theme-quartz-dark .ag-drag-handle {
      color: var(--ag-icon-font-color)
    }

    .ag-theme-quartz .ag-chart-menu-close,
    .ag-theme-quartz-auto-dark .ag-chart-menu-close,
    .ag-theme-quartz-dark .ag-chart-menu-close {
      background: var(--ag-background-color)
    }

    .ag-theme-quartz .ag-chart-menu-close .ag-icon,
    .ag-theme-quartz-auto-dark .ag-chart-menu-close .ag-icon,
    .ag-theme-quartz-dark .ag-chart-menu-close .ag-icon {
      border: 1px solid var(--ag-border-color)
    }

    .ag-theme-quartz .ag-ltr .ag-chart-menu-close .ag-icon,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-chart-menu-close .ag-icon,
    .ag-theme-quartz-dark .ag-ltr .ag-chart-menu-close .ag-icon {
      border-right: none
    }

    .ag-theme-quartz .ag-rtl .ag-chart-menu-close .ag-icon,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-chart-menu-close .ag-icon,
    .ag-theme-quartz-dark .ag-rtl .ag-chart-menu-close .ag-icon {
      border-left: none
    }

    .ag-theme-quartz .ag-chart-docked-container,
    .ag-theme-quartz-auto-dark .ag-chart-docked-container,
    .ag-theme-quartz-dark .ag-chart-docked-container {
      min-width: 260px
    }

    .ag-theme-quartz .ag-compact-menu-option-icon,
    .ag-theme-quartz .ag-menu-option-icon,
    .ag-theme-quartz-auto-dark .ag-compact-menu-option-icon,
    .ag-theme-quartz-auto-dark .ag-menu-option-icon,
    .ag-theme-quartz-dark .ag-compact-menu-option-icon,
    .ag-theme-quartz-dark .ag-menu-option-icon {
      width: var(--ag-icon-size);
      cursor: pointer
    }

    .ag-theme-quartz .ag-ltr .ag-compact-menu-option-icon,
    .ag-theme-quartz .ag-ltr .ag-menu-option-icon,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-compact-menu-option-icon,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-menu-option-icon,
    .ag-theme-quartz-dark .ag-ltr .ag-compact-menu-option-icon,
    .ag-theme-quartz-dark .ag-ltr .ag-menu-option-icon {
      padding-left: calc(var(--ag-grid-size)*1.5)
    }

    .ag-theme-quartz .ag-rtl .ag-compact-menu-option-icon,
    .ag-theme-quartz .ag-rtl .ag-menu-option-icon,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-compact-menu-option-icon,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-menu-option-icon,
    .ag-theme-quartz-dark .ag-rtl .ag-compact-menu-option-icon,
    .ag-theme-quartz-dark .ag-rtl .ag-menu-option-icon {
      padding-right: calc(var(--ag-grid-size)*1.5)
    }

    .ag-theme-quartz .ag-chart-settings-card-item.ag-not-selected:hover,
    .ag-theme-quartz-auto-dark .ag-chart-settings-card-item.ag-not-selected:hover,
    .ag-theme-quartz-dark .ag-chart-settings-card-item.ag-not-selected:hover {
      opacity: .35
    }

    .ag-theme-quartz .ag-ltr .ag-panel-title-bar-button,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-panel-title-bar-button,
    .ag-theme-quartz-dark .ag-ltr .ag-panel-title-bar-button {
      margin-left: calc(var(--ag-grid-size)*2);
      margin-right: var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-rtl .ag-panel-title-bar-button,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-panel-title-bar-button,
    .ag-theme-quartz-dark .ag-rtl .ag-panel-title-bar-button {
      margin-right: calc(var(--ag-grid-size)*2);
      margin-left: var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-multi-filter-group-title-bar,
    .ag-theme-quartz-auto-dark .ag-multi-filter-group-title-bar,
    .ag-theme-quartz-dark .ag-multi-filter-group-title-bar {
      padding: calc(var(--ag-grid-size)*1.5) var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-ltr .ag-filter-toolpanel-group-container,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-filter-toolpanel-group-container,
    .ag-theme-quartz-dark .ag-ltr .ag-filter-toolpanel-group-container {
      padding-left: var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-rtl .ag-filter-toolpanel-group-container,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-filter-toolpanel-group-container,
    .ag-theme-quartz-dark .ag-rtl .ag-filter-toolpanel-group-container {
      padding-right: var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-filter-toolpanel-instance-filter,
    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-instance-filter,
    .ag-theme-quartz-dark .ag-filter-toolpanel-instance-filter {
      border: 0;
      background-color: var(--ag-control-panel-background-color)
    }

    .ag-theme-quartz .ag-ltr .ag-filter-toolpanel-instance-filter,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-filter-toolpanel-instance-filter,
    .ag-theme-quartz-dark .ag-ltr .ag-filter-toolpanel-instance-filter {
      margin-left: calc(var(--ag-icon-size)*.5)
    }

    .ag-theme-quartz .ag-rtl .ag-filter-toolpanel-instance-filter,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-filter-toolpanel-instance-filter,
    .ag-theme-quartz-dark .ag-rtl .ag-filter-toolpanel-instance-filter {
      margin-right: calc(var(--ag-icon-size)*.5)
    }

    .ag-theme-quartz .ag-filter-toolpanel-group-level-0,
    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-group-level-0,
    .ag-theme-quartz-dark .ag-filter-toolpanel-group-level-0 {
      border-top: none
    }

    .ag-theme-quartz .ag-filter-toolpanel-header,
    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-header,
    .ag-theme-quartz-dark .ag-filter-toolpanel-header {
      height: initial;
      padding-top: var(--ag-grid-size);
      padding-bottom: var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-filter-toolpanel-group-item,
    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-group-item,
    .ag-theme-quartz-dark .ag-filter-toolpanel-group-item {
      margin: 0
    }

    .ag-theme-quartz .ag-layout-auto-height .ag-center-cols-container,
    .ag-theme-quartz .ag-layout-auto-height .ag-center-cols-viewport,
    .ag-theme-quartz .ag-layout-print .ag-center-cols-container,
    .ag-theme-quartz .ag-layout-print .ag-center-cols-viewport,
    .ag-theme-quartz-auto-dark .ag-layout-auto-height .ag-center-cols-container,
    .ag-theme-quartz-auto-dark .ag-layout-auto-height .ag-center-cols-viewport,
    .ag-theme-quartz-auto-dark .ag-layout-print .ag-center-cols-container,
    .ag-theme-quartz-auto-dark .ag-layout-print .ag-center-cols-viewport,
    .ag-theme-quartz-dark .ag-layout-auto-height .ag-center-cols-container,
    .ag-theme-quartz-dark .ag-layout-auto-height .ag-center-cols-viewport,
    .ag-theme-quartz-dark .ag-layout-print .ag-center-cols-container,
    .ag-theme-quartz-dark .ag-layout-print .ag-center-cols-viewport {
      min-height: 150px
    }

    .ag-theme-quartz .ag-overlay-no-rows-wrapper.ag-layout-auto-height,
    .ag-theme-quartz-auto-dark .ag-overlay-no-rows-wrapper.ag-layout-auto-height,
    .ag-theme-quartz-dark .ag-overlay-no-rows-wrapper.ag-layout-auto-height {
      padding-top: 60px
    }

    .ag-theme-quartz .ag-date-time-list-page-entry-is-current,
    .ag-theme-quartz-auto-dark .ag-date-time-list-page-entry-is-current,
    .ag-theme-quartz-dark .ag-date-time-list-page-entry-is-current {
      background-color: var(--ag-active-color)
    }

    .ag-theme-quartz .ag-advanced-filter-builder-button,
    .ag-theme-quartz-auto-dark .ag-advanced-filter-builder-button,
    .ag-theme-quartz-dark .ag-advanced-filter-builder-button {
      padding: var(--ag-grid-size);
      font-weight: 600
    }

    .ag-theme-quartz .ag-advanced-filter-builder-item-button-disabled .ag-icon,
    .ag-theme-quartz .ag-column-select-column-group-readonly .ag-icon,
    .ag-theme-quartz .ag-disabled .ag-icon,
    .ag-theme-quartz [disabled] .ag-icon,
    .ag-theme-quartz-auto-dark .ag-advanced-filter-builder-item-button-disabled .ag-icon,
    .ag-theme-quartz-auto-dark .ag-column-select-column-group-readonly .ag-icon,
    .ag-theme-quartz-auto-dark .ag-disabled .ag-icon,
    .ag-theme-quartz-auto-dark [disabled] .ag-icon,
    .ag-theme-quartz-dark .ag-advanced-filter-builder-item-button-disabled .ag-icon,
    .ag-theme-quartz-dark .ag-column-select-column-group-readonly .ag-icon,
    .ag-theme-quartz-dark .ag-disabled .ag-icon,
    .ag-theme-quartz-dark [disabled] .ag-icon {
      opacity: .6
    }

    .ag-theme-quartz .ag-icon-grip,
    .ag-theme-quartz-auto-dark .ag-icon-grip,
    .ag-theme-quartz-dark .ag-icon-grip {
      opacity: .7
    }

    .ag-theme-quartz .ag-column-select-column-readonly .ag-icon-grip,
    .ag-theme-quartz .ag-column-select-column-readonly.ag-icon-grip,
    .ag-theme-quartz-auto-dark .ag-column-select-column-readonly .ag-icon-grip,
    .ag-theme-quartz-auto-dark .ag-column-select-column-readonly.ag-icon-grip,
    .ag-theme-quartz-dark .ag-column-select-column-readonly .ag-icon-grip,
    .ag-theme-quartz-dark .ag-column-select-column-readonly.ag-icon-grip {
      opacity: .35
    }

    .ag-theme-quartz .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz .ag-mini-filter .ag-input-wrapper::before {
      opacity: 40%
    }

    .ag-theme-quartz .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz .ag-mini-filter .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-mini-filter .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-mini-filter .ag-input-wrapper::before {
      position: absolute;
      display: block;
      width: 12px;
      height: 12px;
      background-image: url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==);
      background-position: 50% 50%;
      background-size: contain;
      content: "";
      filter: var(--ag-icon-filter)
    }

    .ag-theme-quartz-auto-dark .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-mini-filter .ag-input-wrapper::before {
      opacity: 40%
    }

    .ag-theme-quartz .ag-rtl .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz .ag-rtl .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz .ag-rtl .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz .ag-rtl .ag-mini-filter .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-mini-filter .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-rtl .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-rtl .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-rtl .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-rtl .ag-mini-filter .ag-input-wrapper::before {
      margin-right: var(--ag-grid-size)
    }

    .ag-theme-quartz .ag-ltr .ag-column-select-header-filter-wrapper input.ag-number-field-input,
    .ag-theme-quartz .ag-ltr .ag-column-select-header-filter-wrapper input.ag-text-field-input,
    .ag-theme-quartz .ag-ltr .ag-filter-filter input.ag-number-field-input,
    .ag-theme-quartz .ag-ltr .ag-filter-filter input.ag-text-field-input,
    .ag-theme-quartz .ag-ltr .ag-filter-toolpanel-search input.ag-number-field-input,
    .ag-theme-quartz .ag-ltr .ag-filter-toolpanel-search input.ag-text-field-input,
    .ag-theme-quartz .ag-ltr .ag-mini-filter input.ag-number-field-input,
    .ag-theme-quartz .ag-ltr .ag-mini-filter input.ag-text-field-input,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-column-select-header-filter-wrapper input.ag-number-field-input,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-column-select-header-filter-wrapper input.ag-text-field-input,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-filter-filter input.ag-number-field-input,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-filter-filter input.ag-text-field-input,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-filter-toolpanel-search input.ag-number-field-input,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-filter-toolpanel-search input.ag-text-field-input,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-mini-filter input.ag-number-field-input,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-mini-filter input.ag-text-field-input,
    .ag-theme-quartz-dark .ag-ltr .ag-column-select-header-filter-wrapper input.ag-number-field-input,
    .ag-theme-quartz-dark .ag-ltr .ag-column-select-header-filter-wrapper input.ag-text-field-input,
    .ag-theme-quartz-dark .ag-ltr .ag-filter-filter input.ag-number-field-input,
    .ag-theme-quartz-dark .ag-ltr .ag-filter-filter input.ag-text-field-input,
    .ag-theme-quartz-dark .ag-ltr .ag-filter-toolpanel-search input.ag-number-field-input,
    .ag-theme-quartz-dark .ag-ltr .ag-filter-toolpanel-search input.ag-text-field-input,
    .ag-theme-quartz-dark .ag-ltr .ag-mini-filter input.ag-number-field-input,
    .ag-theme-quartz-dark .ag-ltr .ag-mini-filter input.ag-text-field-input {
      padding-left: 26px
    }

    .ag-theme-quartz .ag-rtl .ag-column-select-header-filter-wrapper input.ag-number-field-input,
    .ag-theme-quartz .ag-rtl .ag-column-select-header-filter-wrapper input.ag-text-field-input,
    .ag-theme-quartz .ag-rtl .ag-filter-filter input.ag-number-field-input,
    .ag-theme-quartz .ag-rtl .ag-filter-filter input.ag-text-field-input,
    .ag-theme-quartz .ag-rtl .ag-filter-toolpanel-search input.ag-number-field-input,
    .ag-theme-quartz .ag-rtl .ag-filter-toolpanel-search input.ag-text-field-input,
    .ag-theme-quartz .ag-rtl .ag-mini-filter input.ag-number-field-input,
    .ag-theme-quartz .ag-rtl .ag-mini-filter input.ag-text-field-input,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-column-select-header-filter-wrapper input.ag-number-field-input,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-column-select-header-filter-wrapper input.ag-text-field-input,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-filter-filter input.ag-number-field-input,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-filter-filter input.ag-text-field-input,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-filter-toolpanel-search input.ag-number-field-input,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-filter-toolpanel-search input.ag-text-field-input,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-mini-filter input.ag-number-field-input,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-mini-filter input.ag-text-field-input,
    .ag-theme-quartz-dark .ag-rtl .ag-column-select-header-filter-wrapper input.ag-number-field-input,
    .ag-theme-quartz-dark .ag-rtl .ag-column-select-header-filter-wrapper input.ag-text-field-input,
    .ag-theme-quartz-dark .ag-rtl .ag-filter-filter input.ag-number-field-input,
    .ag-theme-quartz-dark .ag-rtl .ag-filter-filter input.ag-text-field-input,
    .ag-theme-quartz-dark .ag-rtl .ag-filter-toolpanel-search input.ag-number-field-input,
    .ag-theme-quartz-dark .ag-rtl .ag-filter-toolpanel-search input.ag-text-field-input,
    .ag-theme-quartz-dark .ag-rtl .ag-mini-filter input.ag-number-field-input,
    .ag-theme-quartz-dark .ag-rtl .ag-mini-filter input.ag-text-field-input {
      padding-right: 26px
    }

    .ag-theme-quartz .ag-ltr .ag-column-select-add-group-indent,
    .ag-theme-quartz-auto-dark .ag-ltr .ag-column-select-add-group-indent,
    .ag-theme-quartz-dark .ag-ltr .ag-column-select-add-group-indent {
      margin-left: calc(var(--ag-icon-size) + var(--ag-grid-size)*1.5)
    }

    .ag-theme-quartz .ag-rtl .ag-column-select-add-group-indent,
    .ag-theme-quartz-auto-dark .ag-rtl .ag-column-select-add-group-indent,
    .ag-theme-quartz-dark .ag-rtl .ag-column-select-add-group-indent {
      margin-right: calc(var(--ag-icon-size) + var(--ag-grid-size)*1.5)
    }

    .ag-theme-quartz .ag-menu-option-disabled,
    .ag-theme-quartz .ag-text-field-input[disabled],
    .ag-theme-quartz-auto-dark .ag-menu-option-disabled,
    .ag-theme-quartz-auto-dark .ag-text-field-input[disabled],
    .ag-theme-quartz-dark .ag-menu-option-disabled,
    .ag-theme-quartz-dark .ag-text-field-input[disabled] {
      cursor: not-allowed
    }

    .ag-theme-quartz .ag-checkbox-input-wrapper.ag-checked.ag-disabled,
    .ag-theme-quartz-auto-dark .ag-checkbox-input-wrapper.ag-checked.ag-disabled,
    .ag-theme-quartz-dark .ag-checkbox-input-wrapper.ag-checked.ag-disabled {
      --ag-checkbox-checked-color: var(--ag-checkbox-unchecked-color)
    }

    .ag-theme-quartz .ag-checkbox-input,
    .ag-theme-quartz .ag-radio-button-input,
    .ag-theme-quartz .ag-toggle-button-input,
    .ag-theme-quartz input[class^=ag-][type=range],
    .ag-theme-quartz-auto-dark .ag-checkbox-input,
    .ag-theme-quartz-auto-dark .ag-radio-button-input,
    .ag-theme-quartz-auto-dark .ag-toggle-button-input,
    .ag-theme-quartz-auto-dark input[class^=ag-][type=range],
    .ag-theme-quartz-dark .ag-checkbox-input,
    .ag-theme-quartz-dark .ag-radio-button-input,
    .ag-theme-quartz-dark .ag-toggle-button-input,
    .ag-theme-quartz-dark input[class^=ag-][type=range] {
      cursor: pointer
    }

    .ag-theme-quartz .ag-details-row,
    .ag-theme-quartz-auto-dark .ag-details-row,
    .ag-theme-quartz-dark .ag-details-row {
      padding: calc(var(--ag-grid-size)*3.75)
    }

    .ag-theme-quartz-dark .ag-column-select-header-filter-wrapper .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-filter-filter .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-filter-toolpanel-search .ag-input-wrapper::before,
    .ag-theme-quartz-dark .ag-mini-filter .ag-input-wrapper::before {
      opacity: 66%;
      filter: invert(100%)
    }

    .ag-theme-quartz-dark .ag-chart-menu {
      background-color: color-mix(in srgb, rgba(24, 39, 50, .3), var(--ag-background-color) 30%)
    }

    .ag-theme-quartz-dark .ag-text-field-input::placeholder {
      color: var(--ag-data-color);
      opacity: .8
    }
  </style>

  <style media="only screen">
    html,
    body {
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-overflow-scrolling: touch;
    }

    html {
      position: absolute;
      top: 0;
      left: 0;
      padding: 0;
      overflow: auto;
    }

    body {
      padding: 16px;
      overflow: auto;
      background-color: transparent
    }

    .example-wrapper {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    #myGrid {
      flex: 1 1 0px;
      width: 100%;
    }

    .example-header {
      font-family: Verdana, Geneva, Tahoma, sans-serif;
      font-size: 13px;
      margin-bottom: 1rem;
    }

    .hidden {
      display: none;
    }

    .example-wrapper td.labels {
      width: 200px;
    }

    .example-wrapper td.buttons-container {
      width: 200px;
    }

    .example-wrapper td.buttons-container button:not(#myGrid button, #myChart button, button[class*='ag-']) {
      padding: 0.4em;
      margin: 0 0.2em 0 0;
    }
  </style>


  <script
    src="data:text/javascript;base64,LyoqCiAqIEBhZy1ncmlkLWVudGVycHJpc2UvYWxsLW1vZHVsZXMgLSBBZHZhbmNlZCBEYXRhIEdyaWQgLyBEYXRhIFRhYmxlIHN1cHBvcnRpbmcgSmF2YXNjcmlwdCAvIFR5cGVzY3JpcHQgLyBSZWFjdCAvIEFuZ3VsYXIgLyBWdWUKICogQHZlcnNpb24gdjMxLjEuMQogKiBAbGluayBodHRwczovL3d3dy5hZy1ncmlkLmNvbS8KICogQGxpY2Vuc2UgQ29tbWVyY2lhbAogKi8KLy8gQGFnLWdyaWQtZW50ZXJwcmlzZS9hbGwtbW9kdWxlcyB2MzEuMS4xCiFmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLHQpOiJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLmFnR3JpZD10KCk6ZS5hZ0dyaWQ9dCgpfSh3aW5kb3csKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIGkocyl7aWYodFtzXSlyZXR1cm4gdFtzXS5leHBvcnRzO3ZhciByPXRbc109e2k6cyxsOiExLGV4cG9ydHM6e319O3JldHVybiBlW3NdLmNhbGwoci5leHBvcnRzLHIsci5leHBvcnRzLGkpLHIubD0hMCxyLmV4cG9ydHN9cmV0dXJuIGkubT1lLGkuYz10LGkuZD1mdW5jdGlvbihlLHQscyl7aS5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2VudW1lcmFibGU6ITAsZ2V0OnN9KX0saS5yPWZ1bmN0aW9uKGUpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LGkudD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9aShlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmIm9iamVjdCI9PXR5cGVvZiBlJiZlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHM9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihpLnIocyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMsImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJiJzdHJpbmciIT10eXBlb2YgZSlmb3IodmFyIHIgaW4gZSlpLmQocyxyLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwscikpO3JldHVybiBzfSxpLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIGkuZCh0LCJhIix0KSx0fSxpLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LGkucD0iIixpKGkucz0yNSl9KFtmdW5jdGlvbihlLHQsaSl7InVzZSBzdHJpY3QiO2kucih0KTt2YXIgcz17fTtpLnIocyksaS5kKHMsIm1ha2VOdWxsIiwoZnVuY3Rpb24oKXtyZXR1cm4gd30pKSxpLmQocywiZXhpc3RzIiwoZnVuY3Rpb24oKXtyZXR1cm4gYn0pKSxpLmQocywibWlzc2luZyIsKGZ1bmN0aW9uKCl7cmV0dXJuIEV9KSksaS5kKHMsIm1pc3NpbmdPckVtcHR5IiwoZnVuY3Rpb24oKXtyZXR1cm4gUn0pKSxpLmQocywidG9TdHJpbmdPck51bGwiLChmdW5jdGlvbigpe3JldHVybiB4fSkpLGkuZChzLCJhdHRyVG9OdW1iZXIiLChmdW5jdGlvbigpe3JldHVybiBUfSkpLGkuZChzLCJhdHRyVG9Cb29sZWFuIiwoZnVuY3Rpb24oKXtyZXR1cm4gRH0pKSxpLmQocywiYXR0clRvU3RyaW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4gT30pKSxpLmQocywianNvbkVxdWFscyIsKGZ1bmN0aW9uKCl7cmV0dXJuIEF9KSksaS5kKHMsImRlZmF1bHRDb21wYXJhdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gUH0pKSxpLmQocywidmFsdWVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gTX0pKTt2YXIgcj17fTtpLnIociksaS5kKHIsIml0ZXJhdGVPYmplY3QiLChmdW5jdGlvbigpe3JldHVybiBGfSkpLGkuZChyLCJjbG9uZU9iamVjdCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEl9KSksaS5kKHIsImRlZXBDbG9uZURlZmluaXRpb24iLChmdW5jdGlvbigpe3JldHVybiBOfSkpLGkuZChyLCJnZXRBbGxWYWx1ZXNJbk9iamVjdCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEd9KSksaS5kKHIsIm1lcmdlRGVlcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGt9KSksaS5kKHIsImdldFZhbHVlVXNpbmdGaWVsZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIF99KSksaS5kKHIsInJlbW92ZUFsbFJlZmVyZW5jZXMiLChmdW5jdGlvbigpe3JldHVybiBWfSkpLGkuZChyLCJpc05vbk51bGxPYmplY3QiLChmdW5jdGlvbigpe3JldHVybiBCfSkpO3ZhciBvPXt9O2kucihvKSxpLmQobywiZG9PbmNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gV30pKSxpLmQobywid2Fybk9uY2UiLChmdW5jdGlvbigpe3JldHVybiBqfSkpLGkuZChvLCJlcnJvck9uY2UiLChmdW5jdGlvbigpe3JldHVybiBVfSkpLGkuZChvLCJnZXRGdW5jdGlvbk5hbWUiLChmdW5jdGlvbigpe3JldHVybiB6fSkpLGkuZChvLCJpc0Z1bmN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gS30pKSxpLmQobywiZXhlY3V0ZUluQVdoaWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gWX0pKSxpLmQobywiZXhlY3V0ZU5leHRWTVR1cm4iLChmdW5jdGlvbigpe3JldHVybiBxfSkpLGkuZChvLCJleGVjdXRlQWZ0ZXIiLChmdW5jdGlvbigpe3JldHVybiBafSkpLGkuZChvLCJkZWJvdW5jZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFF9KSksaS5kKG8sInRocm90dGxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gSn0pKSxpLmQobywid2FpdFVudGlsIiwoZnVuY3Rpb24oKXtyZXR1cm4gZWV9KSksaS5kKG8sImNvbXBvc2UiLChmdW5jdGlvbigpe3JldHVybiB0ZX0pKSxpLmQobywibm9vcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGllfSkpO3ZhciBuPXt9O2kucihuKSxpLmQobiwiZXhpc3RzQW5kTm90RW1wdHkiLChmdW5jdGlvbigpe3JldHVybiBEZX0pKSxpLmQobiwibGFzdCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE9lfSkpLGkuZChuLCJhcmVFcXVhbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEFlfSkpLGkuZChuLCJzaGFsbG93Q29tcGFyZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFBlfSkpLGkuZChuLCJzb3J0TnVtZXJpY2FsbHkiLChmdW5jdGlvbigpe3JldHVybiBNZX0pKSxpLmQobiwicmVtb3ZlUmVwZWF0c0Zyb21BcnJheSIsKGZ1bmN0aW9uKCl7cmV0dXJuIExlfSkpLGkuZChuLCJyZW1vdmVGcm9tVW5vcmRlcmVkQXJyYXkiLChmdW5jdGlvbigpe3JldHVybiBGZX0pKSxpLmQobiwicmVtb3ZlRnJvbUFycmF5IiwoZnVuY3Rpb24oKXtyZXR1cm4gSWV9KSksaS5kKG4sInJlbW92ZUFsbEZyb21Vbm9yZGVyZWRBcnJheSIsKGZ1bmN0aW9uKCl7cmV0dXJuIE5lfSkpLGkuZChuLCJyZW1vdmVBbGxGcm9tQXJyYXkiLChmdW5jdGlvbigpe3JldHVybiBHZX0pKSxpLmQobiwiaW5zZXJ0SW50b0FycmF5IiwoZnVuY3Rpb24oKXtyZXR1cm4ga2V9KSksaS5kKG4sImluc2VydEFycmF5SW50b0FycmF5IiwoZnVuY3Rpb24oKXtyZXR1cm4gX2V9KSksaS5kKG4sIm1vdmVJbkFycmF5IiwoZnVuY3Rpb24oKXtyZXR1cm4gVmV9KSksaS5kKG4sImluY2x1ZGVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gQmV9KSksaS5kKG4sImZsYXR0ZW4iLChmdW5jdGlvbigpe3JldHVybiBIZX0pKSxpLmQobiwicHVzaEFsbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFdlfSkpLGkuZChuLCJ0b1N0cmluZ3MiLChmdW5jdGlvbigpe3JldHVybiBqZX0pKSxpLmQobiwiZm9yRWFjaFJldmVyc2UiLChmdW5jdGlvbigpe3JldHVybiBVZX0pKTt2YXIgYT17fTtpLnIoYSksaS5kKGEsInN0b3BQcm9wYWdhdGlvbkZvckFnR3JpZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFllfSkpLGkuZChhLCJpc1N0b3BQcm9wYWdhdGlvbkZvckFnR3JpZCIsKGZ1bmN0aW9uKCl7cmV0dXJuICRlfSkpLGkuZChhLCJpc0V2ZW50U3VwcG9ydGVkIiwoZnVuY3Rpb24oKXtyZXR1cm4gWGV9KSksaS5kKGEsImdldEN0cmxGb3JFdmVudFRhcmdldCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHFlfSkpLGkuZChhLCJpc0VsZW1lbnRJbkV2ZW50UGF0aCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFplfSkpLGkuZChhLCJjcmVhdGVFdmVudFBhdGgiLChmdW5jdGlvbigpe3JldHVybiBRZX0pKSxpLmQoYSwiZ2V0RXZlbnRQYXRoIiwoZnVuY3Rpb24oKXtyZXR1cm4gSmV9KSksaS5kKGEsImFkZFNhZmVQYXNzaXZlRXZlbnRMaXN0ZW5lciIsKGZ1bmN0aW9uKCl7cmV0dXJuIGV0fSkpO3ZhciBsPXt9O2kucihsKSxpLmQobCwidXRmOF9lbmNvZGUiLChmdW5jdGlvbigpe3JldHVybiBndH0pKSxpLmQobCwiY2FwaXRhbGlzZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG10fSkpLGkuZChsLCJlc2NhcGVTdHJpbmciLChmdW5jdGlvbigpe3JldHVybiBmdH0pKSxpLmQobCwiY2FtZWxDYXNlVG9IdW1hblRleHQiLChmdW5jdGlvbigpe3JldHVybiB2dH0pKSxpLmQobCwiY2FtZWxDYXNlVG9IeXBoZW5hdGVkIiwoZnVuY3Rpb24oKXtyZXR1cm4gQ3R9KSk7dmFyIGQ9e307aS5yKGQpLGkuZChkLCJjb252ZXJ0VG9NYXAiLChmdW5jdGlvbigpe3JldHVybiB5dH0pKSxpLmQoZCwibWFwQnlJZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFN0fSkpLGkuZChkLCJrZXlzIiwoZnVuY3Rpb24oKXtyZXR1cm4gd3R9KSk7dmFyIGM9e307aS5yKGMpLGkuZChjLCJzZXRBcmlhUm9sZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFh0fSkpLGkuZChjLCJnZXRBcmlhU29ydFN0YXRlIiwoZnVuY3Rpb24oKXtyZXR1cm4gcXR9KSksaS5kKGMsImdldEFyaWFMZXZlbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFp0fSkpLGkuZChjLCJnZXRBcmlhUG9zSW5TZXQiLChmdW5jdGlvbigpe3JldHVybiBRdH0pKSxpLmQoYywiZ2V0QXJpYUxhYmVsIiwoZnVuY3Rpb24oKXtyZXR1cm4gSnR9KSksaS5kKGMsInNldEFyaWFMYWJlbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGVpfSkpLGkuZChjLCJzZXRBcmlhTGFiZWxsZWRCeSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHRpfSkpLGkuZChjLCJzZXRBcmlhRGVzY3JpYmVkQnkiLChmdW5jdGlvbigpe3JldHVybiBpaX0pKSxpLmQoYywic2V0QXJpYUxpdmUiLChmdW5jdGlvbigpe3JldHVybiBzaX0pKSxpLmQoYywic2V0QXJpYUF0b21pYyIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJpfSkpLGkuZChjLCJzZXRBcmlhUmVsZXZhbnQiLChmdW5jdGlvbigpe3JldHVybiBvaX0pKSxpLmQoYywic2V0QXJpYUxldmVsIiwoZnVuY3Rpb24oKXtyZXR1cm4gbml9KSksaS5kKGMsInNldEFyaWFEaXNhYmxlZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGFpfSkpLGkuZChjLCJzZXRBcmlhSGlkZGVuIiwoZnVuY3Rpb24oKXtyZXR1cm4gbGl9KSksaS5kKGMsInNldEFyaWFBY3RpdmVEZXNjZW5kYW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gZGl9KSksaS5kKGMsInNldEFyaWFFeHBhbmRlZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGNpfSkpLGkuZChjLCJyZW1vdmVBcmlhRXhwYW5kZWQiLChmdW5jdGlvbigpe3JldHVybiBoaX0pKSxpLmQoYywic2V0QXJpYVNldFNpemUiLChmdW5jdGlvbigpe3JldHVybiB1aX0pKSxpLmQoYywic2V0QXJpYVBvc0luU2V0IiwoZnVuY3Rpb24oKXtyZXR1cm4gcGl9KSksaS5kKGMsInNldEFyaWFNdWx0aVNlbGVjdGFibGUiLChmdW5jdGlvbigpe3JldHVybiBnaX0pKSxpLmQoYywic2V0QXJpYVJvd0NvdW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gbWl9KSksaS5kKGMsInNldEFyaWFSb3dJbmRleCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZpfSkpLGkuZChjLCJzZXRBcmlhQ29sQ291bnQiLChmdW5jdGlvbigpe3JldHVybiB2aX0pKSxpLmQoYywic2V0QXJpYUNvbEluZGV4IiwoZnVuY3Rpb24oKXtyZXR1cm4gQ2l9KSksaS5kKGMsInNldEFyaWFDb2xTcGFuIiwoZnVuY3Rpb24oKXtyZXR1cm4geWl9KSksaS5kKGMsInNldEFyaWFTb3J0IiwoZnVuY3Rpb24oKXtyZXR1cm4gU2l9KSksaS5kKGMsInJlbW92ZUFyaWFTb3J0IiwoZnVuY3Rpb24oKXtyZXR1cm4gd2l9KSksaS5kKGMsInNldEFyaWFTZWxlY3RlZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGJpfSkpLGkuZChjLCJzZXRBcmlhQ2hlY2tlZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEVpfSkpLGkuZChjLCJzZXRBcmlhQ29udHJvbHMiLChmdW5jdGlvbigpe3JldHVybiBSaX0pKSxpLmQoYywiZ2V0QXJpYUNoZWNrYm94U3RhdGVOYW1lIiwoZnVuY3Rpb24oKXtyZXR1cm4geGl9KSk7dmFyIGg9e307aS5yKGgpLGkuZChoLCJpc0Jyb3dzZXJTYWZhcmkiLChmdW5jdGlvbigpe3JldHVybiBUaX0pKSxpLmQoaCwiZ2V0U2FmYXJpVmVyc2lvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIERpfSkpLGkuZChoLCJpc0Jyb3dzZXJDaHJvbWUiLChmdW5jdGlvbigpe3JldHVybiBPaX0pKSxpLmQoaCwiaXNCcm93c2VyRmlyZWZveCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEFpfSkpLGkuZChoLCJpc01hY09zVXNlckFnZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gUGl9KSksaS5kKGgsImlzSU9TVXNlckFnZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gTWl9KSksaS5kKGgsImJyb3dzZXJTdXBwb3J0c1ByZXZlbnRTY3JvbGwiLChmdW5jdGlvbigpe3JldHVybiBMaX0pKSxpLmQoaCwiZ2V0VGFiSW5kZXgiLChmdW5jdGlvbigpe3JldHVybiBGaX0pKSxpLmQoaCwiZ2V0TWF4RGl2SGVpZ2h0IiwoZnVuY3Rpb24oKXtyZXR1cm4gSWl9KSksaS5kKGgsImdldEJvZHlXaWR0aCIsKGZ1bmN0aW9uKCl7cmV0dXJuIE5pfSkpLGkuZChoLCJnZXRCb2R5SGVpZ2h0IiwoZnVuY3Rpb24oKXtyZXR1cm4gR2l9KSksaS5kKGgsImdldFNjcm9sbGJhcldpZHRoIiwoZnVuY3Rpb24oKXtyZXR1cm4ga2l9KSksaS5kKGgsImlzSW52aXNpYmxlU2Nyb2xsYmFyIiwoZnVuY3Rpb24oKXtyZXR1cm4gVml9KSk7dmFyIHU9e307aS5yKHUpLGkuZCh1LCJwYWRTdGFydFdpZHRoWmVyb3MiLChmdW5jdGlvbigpe3JldHVybiBCaX0pKSxpLmQodSwiY3JlYXRlQXJyYXlPZk51bWJlcnMiLChmdW5jdGlvbigpe3JldHVybiBIaX0pKSxpLmQodSwiY2xlYW5OdW1iZXIiLChmdW5jdGlvbigpe3JldHVybiBXaX0pKSxpLmQodSwiZGVjVG9IZXgiLChmdW5jdGlvbigpe3JldHVybiBqaX0pKSxpLmQodSwiZm9ybWF0TnVtYmVyVHdvRGVjaW1hbFBsYWNlc0FuZENvbW1hcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFVpfSkpLGkuZCh1LCJmb3JtYXROdW1iZXJDb21tYXMiLChmdW5jdGlvbigpe3JldHVybiB6aX0pKSxpLmQodSwic3VtIiwoZnVuY3Rpb24oKXtyZXR1cm4gS2l9KSk7dmFyIHA9e307aS5yKHApLGkuZChwLCJzZXJpYWxpc2VEYXRlIiwoZnVuY3Rpb24oKXtyZXR1cm4gWWl9KSksaS5kKHAsImRhdGVUb0Zvcm1hdHRlZFN0cmluZyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFhpfSkpLGkuZChwLCJwYXJzZURhdGVUaW1lRnJvbVN0cmluZyIsKGZ1bmN0aW9uKCl7cmV0dXJuIHFpfSkpO3ZhciBnPXt9O2kucihnKSxpLmQoZywicmFkaW9Dc3NDbGFzcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFFpfSkpLGkuZChnLCJGT0NVU0FCTEVfU0VMRUNUT1IiLChmdW5jdGlvbigpe3JldHVybiBKaX0pKSxpLmQoZywiRk9DVVNBQkxFX0VYQ0xVREUiLChmdW5jdGlvbigpe3JldHVybiBlc30pKSxpLmQoZywiaXNGb2N1c2FibGVGb3JtRmllbGQiLChmdW5jdGlvbigpe3JldHVybiB0c30pKSxpLmQoZywic2V0RGlzcGxheWVkIiwoZnVuY3Rpb24oKXtyZXR1cm4gaXN9KSksaS5kKGcsInNldFZpc2libGUiLChmdW5jdGlvbigpe3JldHVybiBzc30pKSxpLmQoZywic2V0RGlzYWJsZWQiLChmdW5jdGlvbigpe3JldHVybiByc30pKSxpLmQoZywiaXNFbGVtZW50Q2hpbGRPZkNsYXNzIiwoZnVuY3Rpb24oKXtyZXR1cm4gb3N9KSksaS5kKGcsImdldEVsZW1lbnRTaXplIiwoZnVuY3Rpb24oKXtyZXR1cm4gbnN9KSksaS5kKGcsImdldElubmVySGVpZ2h0IiwoZnVuY3Rpb24oKXtyZXR1cm4gYXN9KSksaS5kKGcsImdldElubmVyV2lkdGgiLChmdW5jdGlvbigpe3JldHVybiBsc30pKSxpLmQoZywiZ2V0QWJzb2x1dGVIZWlnaHQiLChmdW5jdGlvbigpe3JldHVybiBkc30pKSxpLmQoZywiZ2V0QWJzb2x1dGVXaWR0aCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGNzfSkpLGkuZChnLCJnZXRFbGVtZW50UmVjdFdpdGhPZmZzZXQiLChmdW5jdGlvbigpe3JldHVybiBoc30pKSxpLmQoZywiaXNSdGxOZWdhdGl2ZVNjcm9sbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHVzfSkpLGkuZChnLCJnZXRTY3JvbGxMZWZ0IiwoZnVuY3Rpb24oKXtyZXR1cm4gcHN9KSksaS5kKGcsInNldFNjcm9sbExlZnQiLChmdW5jdGlvbigpe3JldHVybiBnc30pKSxpLmQoZywiY2xlYXJFbGVtZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gbXN9KSksaS5kKGcsInJlbW92ZUZyb21QYXJlbnQiLChmdW5jdGlvbigpe3JldHVybiBmc30pKSxpLmQoZywiaXNJbkRPTSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHZzfSkpLGkuZChnLCJpc1Zpc2libGUiLChmdW5jdGlvbigpe3JldHVybiBDc30pKSxpLmQoZywibG9hZFRlbXBsYXRlIiwoZnVuY3Rpb24oKXtyZXR1cm4geXN9KSksaS5kKGcsImVuc3VyZURvbU9yZGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gU3N9KSksaS5kKGcsInNldERvbUNoaWxkT3JkZXIiLChmdW5jdGlvbigpe3JldHVybiB3c30pKSxpLmQoZywiaW5zZXJ0V2l0aERvbU9yZGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gYnN9KSksaS5kKGcsImFkZFN0eWxlc1RvRWxlbWVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEVzfSkpLGkuZChnLCJpc0hvcml6b250YWxTY3JvbGxTaG93aW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4gUnN9KSksaS5kKGcsImlzVmVydGljYWxTY3JvbGxTaG93aW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4geHN9KSksaS5kKGcsInNldEVsZW1lbnRXaWR0aCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFRzfSkpLGkuZChnLCJzZXRGaXhlZFdpZHRoIiwoZnVuY3Rpb24oKXtyZXR1cm4gRHN9KSksaS5kKGcsInNldEVsZW1lbnRIZWlnaHQiLChmdW5jdGlvbigpe3JldHVybiBPc30pKSxpLmQoZywic2V0Rml4ZWRIZWlnaHQiLChmdW5jdGlvbigpe3JldHVybiBBc30pKSxpLmQoZywiZm9ybWF0U2l6ZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFBzfSkpLGkuZChnLCJpc05vZGVPckVsZW1lbnQiLChmdW5jdGlvbigpe3JldHVybiBNc30pKSxpLmQoZywiY29weU5vZGVMaXN0IiwoZnVuY3Rpb24oKXtyZXR1cm4gTHN9KSksaS5kKGcsIml0ZXJhdGVOYW1lZE5vZGVNYXAiLChmdW5jdGlvbigpe3JldHVybiBGc30pKSxpLmQoZywiYWRkT3JSZW1vdmVBdHRyaWJ1dGUiLChmdW5jdGlvbigpe3JldHVybiBJc30pKSxpLmQoZywibm9kZUxpc3RGb3JFYWNoIiwoZnVuY3Rpb24oKXtyZXR1cm4gTnN9KSksaS5kKGcsImJpbmRDZWxsUmVuZGVyZXJUb0h0bWxFbGVtZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gR3N9KSk7dmFyIG09e307aS5yKG0pLGkuZChtLCJmdXp6eUNoZWNrU3RyaW5ncyIsKGZ1bmN0aW9uKCl7cmV0dXJuIGtzfSkpLGkuZChtLCJmdXp6eVN1Z2dlc3Rpb25zIiwoZnVuY3Rpb24oKXtyZXR1cm4gX3N9KSk7dmFyIGY9e307aS5yKGYpLGkuZChmLCJpY29uTmFtZUNsYXNzTWFwIiwoZnVuY3Rpb24oKXtyZXR1cm4gQnN9KSksaS5kKGYsImNyZWF0ZUljb24iLChmdW5jdGlvbigpe3JldHVybiBIc30pKSxpLmQoZiwiY3JlYXRlSWNvbk5vU3BhbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIFdzfSkpO3ZhciB2PXt9O2kucih2KSxpLmQodiwiaXNFdmVudEZyb21QcmludGFibGVDaGFyYWN0ZXIiLChmdW5jdGlvbigpe3JldHVybiBVc30pKSxpLmQodiwiaXNVc2VyU3VwcHJlc3NpbmdLZXlib2FyZEV2ZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4genN9KSksaS5kKHYsImlzVXNlclN1cHByZXNzaW5nSGVhZGVyS2V5Ym9hcmRFdmVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEtzfSkpLGkuZCh2LCJub3JtYWxpc2VRd2VydHlBemVydHkiLChmdW5jdGlvbigpe3JldHVybiBZc30pKSxpLmQodiwiaXNEZWxldGVLZXkiLChmdW5jdGlvbigpe3JldHVybiAkc30pKTt2YXIgQz17fTtpLnIoQyksaS5kKEMsImFyZUV2ZW50c05lYXIiLChmdW5jdGlvbigpe3JldHVybiBYc30pKTt2YXIgeT17fTtpLnIoeSksaS5kKHksInNvcnRSb3dOb2Rlc0J5T3JkZXIiLChmdW5jdGlvbigpe3JldHVybiBxc30pKTt2YXIgUz17fTtmdW5jdGlvbiB3KGUpe3JldHVybiBudWxsPT1lfHwiIj09PWU/bnVsbDplfWZ1bmN0aW9uIGIoZSx0PSExKXtyZXR1cm4gbnVsbCE9ZSYmKCIiIT09ZXx8dCl9ZnVuY3Rpb24gRShlKXtyZXR1cm4hYihlKX1mdW5jdGlvbiBSKGUpe3JldHVybiBudWxsPT1lfHwwPT09ZS5sZW5ndGh9ZnVuY3Rpb24geChlKXtyZXR1cm4gbnVsbCE9ZSYmImZ1bmN0aW9uIj09dHlwZW9mIGUudG9TdHJpbmc/ZS50b1N0cmluZygpOm51bGx9ZnVuY3Rpb24gVChlKXtpZih2b2lkIDA9PT1lKXJldHVybjtpZihudWxsPT09ZXx8IiI9PT1lKXJldHVybiBudWxsO2lmKCJudW1iZXIiPT10eXBlb2YgZSlyZXR1cm4gaXNOYU4oZSk/dm9pZCAwOmU7Y29uc3QgdD1wYXJzZUludChlLDEwKTtyZXR1cm4gaXNOYU4odCk/dm9pZCAwOnR9ZnVuY3Rpb24gRChlKXtpZih2b2lkIDAhPT1lKXJldHVybiBudWxsIT09ZSYmIiIhPT1lJiYoImJvb2xlYW4iPT10eXBlb2YgZT9lOi90cnVlL2kudGVzdChlKSl9ZnVuY3Rpb24gTyhlKXtpZihudWxsIT1lJiYiIiE9PWUpcmV0dXJuIGV9ZnVuY3Rpb24gQShlLHQpe3JldHVybihlP0pTT04uc3RyaW5naWZ5KGUpOm51bGwpPT09KHQ/SlNPTi5zdHJpbmdpZnkodCk6bnVsbCl9ZnVuY3Rpb24gUChlLHQsaT0hMSl7Y29uc3Qgcz1udWxsPT1lLHI9bnVsbD09dDtpZihlJiZlLnRvTnVtYmVyJiYoZT1lLnRvTnVtYmVyKCkpLHQmJnQudG9OdW1iZXImJih0PXQudG9OdW1iZXIoKSkscyYmcilyZXR1cm4gMDtpZihzKXJldHVybi0xO2lmKHIpcmV0dXJuIDE7ZnVuY3Rpb24gbyhlLHQpe3JldHVybiBlPnQ/MTplPHQ/LTE6MH1pZigic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIG8oZSx0KTtpZighaSlyZXR1cm4gbyhlLHQpO3RyeXtyZXR1cm4gZS5sb2NhbGVDb21wYXJlKHQpfWNhdGNoKGkpe3JldHVybiBvKGUsdCl9fWZ1bmN0aW9uIE0oZSl7aWYoZSBpbnN0YW5jZW9mIFNldHx8ZSBpbnN0YW5jZW9mIE1hcCl7Y29uc3QgdD1bXTtyZXR1cm4gZS5mb3JFYWNoKGU9PnQucHVzaChlKSksdH1yZXR1cm4gT2JqZWN0LnZhbHVlcyhlKX1pLnIoUyksaS5kKFMsImNvbnZlcnRUb1NldCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFpzfSkpO2NsYXNzIEx7Y29uc3RydWN0b3IoKXt0aGlzLmV4aXN0aW5nS2V5cz17fX1hZGRFeGlzdGluZ0tleXMoZSl7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0KyspdGhpcy5leGlzdGluZ0tleXNbZVt0XV09ITB9Z2V0VW5pcXVlS2V5KGUsdCl7ZT14KGUpO2xldCBpPTA7Zm9yKDs7KXtsZXQgcztpZihlPyhzPWUsMCE9PWkmJihzKz0iXyIraSkpOnQ/KHM9dCwwIT09aSYmKHMrPSJfIitpKSk6cz1pLCF0aGlzLmV4aXN0aW5nS2V5c1tzXSlyZXR1cm4gdGhpcy5leGlzdGluZ0tleXNbc109ITAsU3RyaW5nKHMpO2krK319fWZ1bmN0aW9uIEYoZSx0KXtpZihudWxsIT1lKWlmKEFycmF5LmlzQXJyYXkoZSkpZm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKyspdChpLnRvU3RyaW5nKCksZVtpXSk7ZWxzZSBmb3IoY29uc3RbaSxzXW9mIE9iamVjdC5lbnRyaWVzKGUpKXQoaSxzKX1mdW5jdGlvbiBJKGUpe2NvbnN0IHQ9e30saT1PYmplY3Qua2V5cyhlKTtmb3IobGV0IHM9MDtzPGkubGVuZ3RoO3MrKyl7Y29uc3Qgcj1pW3NdLG89ZVtyXTt0W3JdPW99cmV0dXJuIHR9ZnVuY3Rpb24gTihlLHQpe2lmKCFlKXJldHVybjtjb25zdCBpPWUscz17fTtyZXR1cm4gT2JqZWN0LmtleXMoaSkuZm9yRWFjaChlPT57aWYodCYmdC5pbmRleE9mKGUpPj0wKXJldHVybjtjb25zdCByPWlbZV0sbz1CKHIpJiZyLmNvbnN0cnVjdG9yPT09T2JqZWN0O3NbZV09bz9OKHIpOnJ9KSxzfWZ1bmN0aW9uIEcoZSl7aWYoIWUpcmV0dXJuW107Y29uc3QgdD1PYmplY3Q7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQudmFsdWVzKXJldHVybiB0LnZhbHVlcyhlKTtjb25zdCBpPVtdO2Zvcihjb25zdCB0IGluIGUpZS5oYXNPd25Qcm9wZXJ0eSh0KSYmZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSh0KSYmaS5wdXNoKGVbdF0pO3JldHVybiBpfWZ1bmN0aW9uIGsoZSx0LGk9ITAscz0hMSl7Yih0KSYmRih0LCh0LHIpPT57bGV0IG89ZVt0XTtpZihvIT09cil7aWYocyl7aWYobnVsbD09byYmbnVsbCE9cil7Im9iamVjdCI9PXR5cGVvZiByJiZyLmNvbnN0cnVjdG9yPT09T2JqZWN0JiYobz17fSxlW3RdPW8pfX1CKHIpJiZCKG8pJiYhQXJyYXkuaXNBcnJheShvKT9rKG8scixpLHMpOihpfHx2b2lkIDAhPT1yKSYmKGVbdF09cil9fSl9ZnVuY3Rpb24gXyhlLHQsaSl7aWYoIXR8fCFlKXJldHVybjtpZighaSlyZXR1cm4gZVt0XTtjb25zdCBzPXQuc3BsaXQoIi4iKTtsZXQgcj1lO2ZvcihsZXQgZT0wO2U8cy5sZW5ndGg7ZSsrKXtpZihudWxsPT1yKXJldHVybjtyPXJbc1tlXV19cmV0dXJuIHJ9ZnVuY3Rpb24gVihlLHQ9W10saSl7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChpPT57Im9iamVjdCIhPXR5cGVvZiBlW2ldfHx0LmluY2x1ZGVzKGkpfHwoZVtpXT12b2lkIDApfSk7Y29uc3Qgcz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkscj17fTtPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzKS5mb3JFYWNoKGU9PntpZigiZnVuY3Rpb24iPT10eXBlb2Ygc1tlXSYmIXQuaW5jbHVkZXMoZSkpe2NvbnN0IHQ9KCk9Pntjb25zb2xlLndhcm4oKGU9PmBBRyBHcmlkOiBHcmlkIEFQSSBmdW5jdGlvbiAke2V9KCkgY2Fubm90IGJlIGNhbGxlZCBhcyB0aGUgZ3JpZCBoYXMgYmVlbiBkZXN0cm95ZWQuXG4gICAgSXQgaXMgcmVjb21tZW5kZWQgdG8gcmVtb3ZlIGxvY2FsIHJlZmVyZW5jZXMgdG8gdGhlIGdyaWQgYXBpLiBBbHRlcm5hdGl2ZWx5LCBjaGVjayBncmlkQXBpLmlzRGVzdHJveWVkKCkgdG8gYXZvaWQgY2FsbGluZyBtZXRob2RzIGFnYWluc3QgYSBkZXN0cm95ZWQgZ3JpZC5cbiAgICBUbyBydW4gbG9naWMgd2hlbiB0aGUgZ3JpZCBpcyBhYm91dCB0byBiZSBkZXN0cm95ZWQgdXNlIHRoZSBncmlkUHJlRGVzdHJveSBldmVudC4gU2VlOiAke2l9YCkoZSkpfTtyW2VdPXt2YWx1ZTp0LHdyaXRhYmxlOiEwfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLHIpfWZ1bmN0aW9uIEIoZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT09ZX1jb25zdCBIPXt9O2Z1bmN0aW9uIFcoZSx0KXtIW3RdfHwoZSgpLEhbdF09ITApfWZ1bmN0aW9uIGooZSl7VygoKT0+Y29uc29sZS53YXJuKCJBRyBHcmlkOiAiK2UpLGUpfWZ1bmN0aW9uIFUoZSl7VygoKT0+Y29uc29sZS5lcnJvcigiQUcgR3JpZDogIitlKSxlKX1mdW5jdGlvbiB6KGUpe2lmKGUubmFtZSlyZXR1cm4gZS5uYW1lO2NvbnN0IHQ9L2Z1bmN0aW9uXHMrKFteXChdKykvLmV4ZWMoZS50b1N0cmluZygpKTtyZXR1cm4gdCYmMj09PXQubGVuZ3RoP3RbMV0udHJpbSgpOm51bGx9ZnVuY3Rpb24gSyhlKXtyZXR1cm4hIShlJiZlLmNvbnN0cnVjdG9yJiZlLmNhbGwmJmUuYXBwbHkpfWZ1bmN0aW9uIFkoZSl7WihlLDQwMCl9Y29uc3QgJD1bXTtsZXQgWD0hMTtmdW5jdGlvbiBxKGUpeyQucHVzaChlKSxYfHwoWD0hMCx3aW5kb3cuc2V0VGltZW91dCgoKT0+e2NvbnN0IGU9JC5zbGljZSgpOyQubGVuZ3RoPTAsWD0hMSxlLmZvckVhY2goZT0+ZSgpKX0sMCkpfWZ1bmN0aW9uIFooZSx0PTApe2UubGVuZ3RoPjAmJndpbmRvdy5zZXRUaW1lb3V0KCgpPT5lLmZvckVhY2goZT0+ZSgpKSx0KX1mdW5jdGlvbiBRKGUsdCl7bGV0IGk7cmV0dXJuIGZ1bmN0aW9uKC4uLnMpe2NvbnN0IHI9dGhpczt3aW5kb3cuY2xlYXJUaW1lb3V0KGkpLGk9d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZS5hcHBseShyLHMpfSksdCl9fWZ1bmN0aW9uIEooZSx0KXtsZXQgaT0wO3JldHVybiBmdW5jdGlvbiguLi5zKXtjb25zdCByPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3ItaTx0fHwoaT1yLGUuYXBwbHkodGhpcyxzKSl9fWZ1bmN0aW9uIGVlKGUsdCxpPTEwMCxzKXtjb25zdCByPShuZXcgRGF0ZSkuZ2V0VGltZSgpO2xldCBvPW51bGwsbj0hMTtjb25zdCBhPSgpPT57Y29uc3QgYT0obmV3IERhdGUpLmdldFRpbWUoKS1yPmk7KGUoKXx8YSkmJih0KCksbj0hMCxudWxsIT1vJiYod2luZG93LmNsZWFySW50ZXJ2YWwobyksbz1udWxsKSxhJiZzJiZjb25zb2xlLndhcm4ocykpfTthKCksbnx8KG89d2luZG93LnNldEludGVydmFsKGEsMTApKX1mdW5jdGlvbiB0ZSguLi5lKXtyZXR1cm4gdD0+ZS5yZWR1Y2UoKGUsdCk9PnQoZSksdCl9Y29uc3QgaWU9KCk9Pnt9O3ZhciBzZTshZnVuY3Rpb24oZSl7ZS5Db21tdW5pdHlDb3JlTW9kdWxlPSJAYWctZ3JpZC1jb21tdW5pdHkvY29yZSIsZS5JbmZpbml0ZVJvd01vZGVsTW9kdWxlPSJAYWctZ3JpZC1jb21tdW5pdHkvaW5maW5pdGUtcm93LW1vZGVsIixlLkNsaWVudFNpZGVSb3dNb2RlbE1vZHVsZT0iQGFnLWdyaWQtY29tbXVuaXR5L2NsaWVudC1zaWRlLXJvdy1tb2RlbCIsZS5Dc3ZFeHBvcnRNb2R1bGU9IkBhZy1ncmlkLWNvbW11bml0eS9jc3YtZXhwb3J0IixlLkVudGVycHJpc2VDb3JlTW9kdWxlPSJAYWctZ3JpZC1lbnRlcnByaXNlL2NvcmUiLGUuUm93R3JvdXBpbmdNb2R1bGU9IkBhZy1ncmlkLWVudGVycHJpc2Uvcm93LWdyb3VwaW5nIixlLkNvbHVtbnNUb29sUGFuZWxNb2R1bGU9IkBhZy1ncmlkLWVudGVycHJpc2UvY29sdW1uLXRvb2wtcGFuZWwiLGUuRmlsdGVyc1Rvb2xQYW5lbE1vZHVsZT0iQGFnLWdyaWQtZW50ZXJwcmlzZS9maWx0ZXItdG9vbC1wYW5lbCIsZS5NZW51TW9kdWxlPSJAYWctZ3JpZC1lbnRlcnByaXNlL21lbnUiLGUuU2V0RmlsdGVyTW9kdWxlPSJAYWctZ3JpZC1lbnRlcnByaXNlL3NldC1maWx0ZXIiLGUuTXVsdGlGaWx0ZXJNb2R1bGU9IkBhZy1ncmlkLWVudGVycHJpc2UvbXVsdGktZmlsdGVyIixlLlN0YXR1c0Jhck1vZHVsZT0iQGFnLWdyaWQtZW50ZXJwcmlzZS9zdGF0dXMtYmFyIixlLlNpZGVCYXJNb2R1bGU9IkBhZy1ncmlkLWVudGVycHJpc2Uvc2lkZS1iYXIiLGUuUmFuZ2VTZWxlY3Rpb25Nb2R1bGU9IkBhZy1ncmlkLWVudGVycHJpc2UvcmFuZ2Utc2VsZWN0aW9uIixlLk1hc3RlckRldGFpbE1vZHVsZT0iQGFnLWdyaWQtZW50ZXJwcmlzZS9tYXN0ZXItZGV0YWlsIixlLlJpY2hTZWxlY3RNb2R1bGU9IkBhZy1ncmlkLWVudGVycHJpc2UvcmljaC1zZWxlY3QiLGUuR3JpZENoYXJ0c01vZHVsZT0iQGFnLWdyaWQtZW50ZXJwcmlzZS9jaGFydHMiLGUuVmlld3BvcnRSb3dNb2RlbE1vZHVsZT0iQGFnLWdyaWQtZW50ZXJwcmlzZS92aWV3cG9ydC1yb3ctbW9kZWwiLGUuU2VydmVyU2lkZVJvd01vZGVsTW9kdWxlPSJAYWctZ3JpZC1lbnRlcnByaXNlL3NlcnZlci1zaWRlLXJvdy1tb2RlbCIsZS5FeGNlbEV4cG9ydE1vZHVsZT0iQGFnLWdyaWQtZW50ZXJwcmlzZS9leGNlbC1leHBvcnQiLGUuQ2xpcGJvYXJkTW9kdWxlPSJAYWctZ3JpZC1lbnRlcnByaXNlL2NsaXBib2FyZCIsZS5TcGFya2xpbmVzTW9kdWxlPSJAYWctZ3JpZC1lbnRlcnByaXNlL3NwYXJrbGluZXMiLGUuQWR2YW5jZWRGaWx0ZXJNb2R1bGU9IkBhZy1ncmlkLWVudGVycHJpc2UvYWR2YW5jZWQtZmlsdGVyIixlLkFuZ3VsYXJNb2R1bGU9IkBhZy1ncmlkLWNvbW11bml0eS9hbmd1bGFyIixlLlJlYWN0TW9kdWxlPSJAYWctZ3JpZC1jb21tdW5pdHkvcmVhY3QiLGUuVnVlTW9kdWxlPSJAYWctZ3JpZC1jb21tdW5pdHkvdnVlIn0oc2V8fChzZT17fSkpO2NsYXNzIHJle3N0YXRpYyByZWdpc3RlcihlKXtyZS5fX3JlZ2lzdGVyKGUsITAsdm9pZCAwKX1zdGF0aWMgcmVnaXN0ZXJNb2R1bGVzKGUpe3JlLl9fcmVnaXN0ZXJNb2R1bGVzKGUsITAsdm9pZCAwKX1zdGF0aWMgX19yZWdpc3RlcihlLHQsaSl7cmUucnVuVmVyc2lvbkNoZWNrcyhlKSx2b2lkIDAhPT1pPyhyZS5hcmVHcmlkU2NvcGVkTW9kdWxlcz0hMCx2b2lkIDA9PT1yZS5ncmlkTW9kdWxlc01hcFtpXSYmKHJlLmdyaWRNb2R1bGVzTWFwW2ldPXt9KSxyZS5ncmlkTW9kdWxlc01hcFtpXVtlLm1vZHVsZU5hbWVdPWUpOnJlLmdsb2JhbE1vZHVsZXNNYXBbZS5tb2R1bGVOYW1lXT1lLHJlLnNldE1vZHVsZUJhc2VkKHQpfXN0YXRpYyBfX3VuUmVnaXN0ZXJHcmlkTW9kdWxlcyhlKXtkZWxldGUgcmUuZ3JpZE1vZHVsZXNNYXBbZV19c3RhdGljIF9fcmVnaXN0ZXJNb2R1bGVzKGUsdCxpKXtyZS5zZXRNb2R1bGVCYXNlZCh0KSxlJiZlLmZvckVhY2goZT0+cmUuX19yZWdpc3RlcihlLHQsaSkpfXN0YXRpYyBpc1ZhbGlkTW9kdWxlVmVyc2lvbihlKXtjb25zdFt0LGldPWUudmVyc2lvbi5zcGxpdCgiLiIpfHxbXSxbcyxyXT1yZS5jdXJyZW50TW9kdWxlVmVyc2lvbi5zcGxpdCgiLiIpfHxbXTtyZXR1cm4gdD09PXMmJmk9PT1yfXN0YXRpYyBydW5WZXJzaW9uQ2hlY2tzKGUpe2lmKHJlLmN1cnJlbnRNb2R1bGVWZXJzaW9ufHwocmUuY3VycmVudE1vZHVsZVZlcnNpb249ZS52ZXJzaW9uKSxlLnZlcnNpb24/cmUuaXNWYWxpZE1vZHVsZVZlcnNpb24oZSl8fGNvbnNvbGUuZXJyb3IoYEFHIEdyaWQ6IFlvdSBhcmUgdXNpbmcgaW5jb21wYXRpYmxlIHZlcnNpb25zIG9mIEFHIEdyaWQgbW9kdWxlcy4gTWFqb3IgYW5kIG1pbm9yIHZlcnNpb25zIHNob3VsZCBhbHdheXMgbWF0Y2ggYWNyb3NzIG1vZHVsZXMuICcke2UubW9kdWxlTmFtZX0nIGlzIHZlcnNpb24gJHtlLnZlcnNpb259IGJ1dCB0aGUgb3RoZXIgbW9kdWxlcyBhcmUgdmVyc2lvbiAke3RoaXMuY3VycmVudE1vZHVsZVZlcnNpb259LiBQbGVhc2UgdXBkYXRlIGFsbCBtb2R1bGVzIHRvIHRoZSBzYW1lIHZlcnNpb24uYCk6Y29uc29sZS5lcnJvcihgQUcgR3JpZDogWW91IGFyZSB1c2luZyBpbmNvbXBhdGlibGUgdmVyc2lvbnMgb2YgQUcgR3JpZCBtb2R1bGVzLiBNYWpvciBhbmQgbWlub3IgdmVyc2lvbnMgc2hvdWxkIGFsd2F5cyBtYXRjaCBhY3Jvc3MgbW9kdWxlcy4gJyR7ZS5tb2R1bGVOYW1lfScgaXMgaW5jb21wYXRpYmxlLiBQbGVhc2UgdXBkYXRlIGFsbCBtb2R1bGVzIHRvIHRoZSBzYW1lIHZlcnNpb24uYCksZS52YWxpZGF0ZSl7Y29uc3QgdD1lLnZhbGlkYXRlKCk7aWYoIXQuaXNWYWxpZCl7Y29uc3QgZT10O2NvbnNvbGUuZXJyb3IoIkFHIEdyaWQ6ICIrZS5tZXNzYWdlKX19fXN0YXRpYyBzZXRNb2R1bGVCYXNlZChlKXt2b2lkIDA9PT1yZS5tb2R1bGVCYXNlZD9yZS5tb2R1bGVCYXNlZD1lOnJlLm1vZHVsZUJhc2VkIT09ZSYmVygoKT0+e2NvbnNvbGUud2FybigiQUcgR3JpZDogWW91IGFyZSBtaXhpbmcgbW9kdWxlcyAoaS5lLiBAYWctZ3JpZC1jb21tdW5pdHkvY29yZSkgYW5kIHBhY2thZ2VzIChhZy1ncmlkLWNvbW11bml0eSkgLSB5b3UgY2FuIG9ubHkgdXNlIG9uZSBvciB0aGUgb3RoZXIgb2YgdGhlc2UgbWVjaGFuaXNtcy4iKSxjb25zb2xlLndhcm4oIlBsZWFzZSBzZWUgaHR0cHM6Ly93d3cuYWctZ3JpZC5jb20vamF2YXNjcmlwdC1ncmlkL3BhY2thZ2VzLW1vZHVsZXMvIGZvciBtb3JlIGluZm9ybWF0aW9uLiIpfSwiTW9kdWxlUGFja2FnZUNoZWNrIil9c3RhdGljIF9fc2V0SXNCdW5kbGVkKCl7cmUuaXNCdW5kbGVkPSEwfXN0YXRpYyBfX2Fzc2VydFJlZ2lzdGVyZWQoZSx0LGkpe3ZhciBzO2lmKHRoaXMuX19pc1JlZ2lzdGVyZWQoZSxpKSlyZXR1cm4hMDtjb25zdCByPXQrZTtsZXQgbztpZihyZS5pc0J1bmRsZWQpbz1gQUcgR3JpZDogdW5hYmxlIHRvIHVzZSAke3R9IGFzICdhZy1ncmlkLWVudGVycHJpc2UnIGhhcyBub3QgYmVlbiBsb2FkZWQuIENoZWNrIHlvdSBhcmUgdXNpbmcgdGhlIEVudGVycHJpc2UgYnVuZGxlOlxuICAgICAgICBcbiAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vYWctZ3JpZC1lbnRlcnByaXNlQEFHX0dSSURfVkVSU0lPTi9kaXN0L2FnLWdyaWQtZW50ZXJwcmlzZS5taW4uanMiPjxcL3NjcmlwdD5cbiAgICAgICAgXG5Gb3IgbW9yZSBpbmZvIHNlZTogaHR0cHM6Ly9hZy1ncmlkLmNvbS9qYXZhc2NyaXB0LWRhdGEtZ3JpZC9nZXR0aW5nLXN0YXJ0ZWQvI2dldHRpbmctc3RhcnRlZC13aXRoLWFnLWdyaWQtZW50ZXJwcmlzZWA7ZWxzZSBpZihyZS5tb2R1bGVCYXNlZHx8dm9pZCAwPT09cmUubW9kdWxlQmFzZWQpe2xldCByPW51bGw9PT0ocz1PYmplY3QuZW50cmllcyhzZSkuZmluZCgoW3QsaV0pPT5pPT09ZSkpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzWzBdO289YEFHIEdyaWQ6IHVuYWJsZSB0byB1c2UgJHt0fSBhcyB0aGUgJHtyfSBpcyBub3QgcmVnaXN0ZXJlZCR7cmUuYXJlR3JpZFNjb3BlZE1vZHVsZXM/IiBmb3IgZ3JpZElkOiAiK2k6IiJ9LiBDaGVjayBpZiB5b3UgaGF2ZSByZWdpc3RlcmVkIHRoZSBtb2R1bGU6XG4gICAgICAgICAgIFxuICAgIGltcG9ydCB7IE1vZHVsZVJlZ2lzdHJ5IH0gZnJvbSAnQGFnLWdyaWQtY29tbXVuaXR5L2NvcmUnO1xuICAgIGltcG9ydCB7ICR7cn0gfSBmcm9tICcke2V9JztcbiAgICBcbiAgICBNb2R1bGVSZWdpc3RyeS5yZWdpc3Rlck1vZHVsZXMoWyAke3J9IF0pO1xuXG5Gb3IgbW9yZSBpbmZvIHNlZTogaHR0cHM6Ly93d3cuYWctZ3JpZC5jb20vamF2YXNjcmlwdC1ncmlkL21vZHVsZXMvYH1lbHNlIG89YEFHIEdyaWQ6IHVuYWJsZSB0byB1c2UgJHt0fSBhcyBwYWNrYWdlICdhZy1ncmlkLWVudGVycHJpc2UnIGhhcyBub3QgYmVlbiBpbXBvcnRlZC4gQ2hlY2sgdGhhdCB5b3UgaGF2ZSBpbXBvcnRlZCB0aGUgcGFja2FnZTpcbiAgICAgICAgICAgIFxuICAgIGltcG9ydCAnYWctZ3JpZC1lbnRlcnByaXNlJztcbiAgICAgICAgICAgIFxuRm9yIG1vcmUgaW5mbyBzZWU6IGh0dHBzOi8vd3d3LmFnLWdyaWQuY29tL2phdmFzY3JpcHQtZ3JpZC9wYWNrYWdlcy9gO3JldHVybiBXKCgpPT57Y29uc29sZS53YXJuKG8pfSxyKSwhMX1zdGF0aWMgX193YXJuRW50ZXJwcmlzZUNoYXJ0RGlzYWJsZWQoZSl7Y29uc3QgdD1gQUcgR3JpZDogdGhlICcke2V9JyBjaGFydCB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQgaW4gQUcgQ2hhcnRzIENvbW11bml0eS4gU2VlIGh0dHBzOi8vYWctZ3JpZC5jb20vamF2YXNjcmlwdC1kYXRhLWdyaWQvaW50ZWdyYXRlZC1jaGFydHMvIGZvciBtb3JlIGRldGFpbHMuYDtXKCgpPT57Y29uc29sZS53YXJuKHQpfSwiYWctY2hhcnRzLWVudGVycHJpc2U6IitlKX1zdGF0aWMgX19pc1JlZ2lzdGVyZWQoZSx0KXt2YXIgaTtyZXR1cm4hIXJlLmdsb2JhbE1vZHVsZXNNYXBbZV18fCEhKG51bGw9PT0oaT1yZS5ncmlkTW9kdWxlc01hcFt0XSl8fHZvaWQgMD09PWk/dm9pZCAwOmlbZV0pfXN0YXRpYyBfX2dldFJlZ2lzdGVyZWRNb2R1bGVzKGUpe3JldHVyblsuLi5NKHJlLmdsb2JhbE1vZHVsZXNNYXApLC4uLk0ocmUuZ3JpZE1vZHVsZXNNYXBbZV18fHt9KV19c3RhdGljIF9fZ2V0R3JpZFJlZ2lzdGVyZWRNb2R1bGVzKGUpe3ZhciB0O3JldHVybiBNKG51bGwhPT0odD1yZS5ncmlkTW9kdWxlc01hcFtlXSkmJnZvaWQgMCE9PXQ/dDp7fSl8fFtdfXN0YXRpYyBfX2lzUGFja2FnZUJhc2VkKCl7cmV0dXJuIXJlLm1vZHVsZUJhc2VkfX1yZS5nbG9iYWxNb2R1bGVzTWFwPXt9LHJlLmdyaWRNb2R1bGVzTWFwPXt9LHJlLmFyZUdyaWRTY29wZWRNb2R1bGVzPSExO2NsYXNzIG9le2NvbnN0cnVjdG9yKGUsdCl7aWYodGhpcy5iZWFuV3JhcHBlcnM9e30sdGhpcy5kZXN0cm95ZWQ9ITEsIWV8fCFlLmJlYW5DbGFzc2VzKXJldHVybjt0aGlzLmNvbnRleHRQYXJhbXM9ZSx0aGlzLmxvZ2dlcj10LHRoaXMubG9nZ2VyLmxvZygiPj4gY3JlYXRpbmcgYWctQXBwbGljYXRpb24gQ29udGV4dCIpLHRoaXMuY3JlYXRlQmVhbnMoKTtjb25zdCBpPXRoaXMuZ2V0QmVhbkluc3RhbmNlcygpO3RoaXMud2lyZUJlYW5zKGkpLHRoaXMubG9nZ2VyLmxvZygiPj4gYWctQXBwbGljYXRpb24gQ29udGV4dCByZWFkeSAtIGNvbXBvbmVudCBpcyBhbGl2ZSIpfWdldEJlYW5JbnN0YW5jZXMoKXtyZXR1cm4gTSh0aGlzLmJlYW5XcmFwcGVycykubWFwKGU9PmUuYmVhbkluc3RhbmNlKX1jcmVhdGVCZWFuKGUsdCl7aWYoIWUpdGhyb3cgRXJyb3IoIkNhbid0IHdpcmUgdG8gYmVhbiBzaW5jZSBpdCBpcyBudWxsIik7cmV0dXJuIHRoaXMud2lyZUJlYW5zKFtlXSx0KSxlfXdpcmVCZWFucyhlLHQpe3RoaXMuYXV0b1dpcmVCZWFucyhlKSx0aGlzLm1ldGhvZFdpcmVCZWFucyhlKSx0aGlzLmNhbGxMaWZlQ3ljbGVNZXRob2RzKGUsInByZUNvbnN0cnVjdE1ldGhvZHMiKSxiKHQpJiZlLmZvckVhY2godCksdGhpcy5jYWxsTGlmZUN5Y2xlTWV0aG9kcyhlLCJwb3N0Q29uc3RydWN0TWV0aG9kcyIpfWNyZWF0ZUJlYW5zKCl7dGhpcy5jb250ZXh0UGFyYW1zLmJlYW5DbGFzc2VzLmZvckVhY2godGhpcy5jcmVhdGVCZWFuV3JhcHBlci5iaW5kKHRoaXMpKSxGKHRoaXMuYmVhbldyYXBwZXJzLChlLHQpPT57bGV0IGk7dC5iZWFuLl9fYWdCZWFuTWV0YURhdGEmJnQuYmVhbi5fX2FnQmVhbk1ldGFEYXRhLmF1dG93aXJlTWV0aG9kcyYmdC5iZWFuLl9fYWdCZWFuTWV0YURhdGEuYXV0b3dpcmVNZXRob2RzLmFnQ29uc3RydWN0b3ImJihpPXQuYmVhbi5fX2FnQmVhbk1ldGFEYXRhLmF1dG93aXJlTWV0aG9kcy5hZ0NvbnN0cnVjdG9yKTtjb25zdCBzPXRoaXMuZ2V0QmVhbnNGb3JQYXJhbWV0ZXJzKGksdC5iZWFuLm5hbWUpLHI9bmV3KHQuYmVhbi5iaW5kLmFwcGx5KHQuYmVhbixbbnVsbCwuLi5zXSkpO3QuYmVhbkluc3RhbmNlPXJ9KTtjb25zdCBlPU9iamVjdC5rZXlzKHRoaXMuYmVhbldyYXBwZXJzKS5qb2luKCIsICIpO3RoaXMubG9nZ2VyLmxvZygiY3JlYXRlZCBiZWFuczogIitlKX1jcmVhdGVCZWFuV3JhcHBlcihlKXtjb25zdCB0PWUuX19hZ0JlYW5NZXRhRGF0YTtpZighdCl7bGV0IHQ7cmV0dXJuIHQ9ZS5wcm90b3R5cGUuY29uc3RydWN0b3I/eihlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcik6IiIrZSx2b2lkIGNvbnNvbGUuZXJyb3IoYENvbnRleHQgaXRlbSAke3R9IGlzIG5vdCBhIGJlYW5gKX1jb25zdCBpPXtiZWFuOmUsYmVhbkluc3RhbmNlOm51bGwsYmVhbk5hbWU6dC5iZWFuTmFtZX07dGhpcy5iZWFuV3JhcHBlcnNbdC5iZWFuTmFtZV09aX1hdXRvV2lyZUJlYW5zKGUpe2UuZm9yRWFjaChlPT57dGhpcy5mb3JFYWNoTWV0YURhdGFJbkhpZXJhcmNoeShlLCh0LGkpPT57Y29uc3Qgcz10LmFnQ2xhc3NBdHRyaWJ1dGVzO3MmJnMuZm9yRWFjaCh0PT57Y29uc3Qgcz10aGlzLmxvb2t1cEJlYW5JbnN0YW5jZShpLHQuYmVhbk5hbWUsdC5vcHRpb25hbCk7ZVt0LmF0dHJpYnV0ZU5hbWVdPXN9KX0pfSl9bWV0aG9kV2lyZUJlYW5zKGUpe2UuZm9yRWFjaChlPT57dGhpcy5mb3JFYWNoTWV0YURhdGFJbkhpZXJhcmNoeShlLCh0LGkpPT57Rih0LmF1dG93aXJlTWV0aG9kcywodCxzKT0+e2lmKCJhZ0NvbnN0cnVjdG9yIj09PXQpcmV0dXJuO2NvbnN0IHI9dGhpcy5nZXRCZWFuc0ZvclBhcmFtZXRlcnMocyxpKTtlW3RdLmFwcGx5KGUscil9KX0pfSl9Zm9yRWFjaE1ldGFEYXRhSW5IaWVyYXJjaHkoZSx0KXtsZXQgaT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7Zm9yKDtudWxsIT1pOyl7Y29uc3QgZT1pLmNvbnN0cnVjdG9yO2lmKGUuaGFzT3duUHJvcGVydHkoIl9fYWdCZWFuTWV0YURhdGEiKSl7dChlLl9fYWdCZWFuTWV0YURhdGEsdGhpcy5nZXRCZWFuTmFtZShlKSl9aT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaSl9fWdldEJlYW5OYW1lKGUpe2lmKGUuX19hZ0JlYW5NZXRhRGF0YSYmZS5fX2FnQmVhbk1ldGFEYXRhLmJlYW5OYW1lKXJldHVybiBlLl9fYWdCZWFuTWV0YURhdGEuYmVhbk5hbWU7Y29uc3QgdD1lLnRvU3RyaW5nKCk7cmV0dXJuIHQuc3Vic3RyaW5nKDksdC5pbmRleE9mKCIoIikpfWdldEJlYW5zRm9yUGFyYW1ldGVycyhlLHQpe2NvbnN0IGk9W107cmV0dXJuIGUmJkYoZSwoZSxzKT0+e2NvbnN0IHI9dGhpcy5sb29rdXBCZWFuSW5zdGFuY2UodCxzKTtpW051bWJlcihlKV09cn0pLGl9bG9va3VwQmVhbkluc3RhbmNlKGUsdCxpPSExKXtpZih0aGlzLmRlc3Ryb3llZClyZXR1cm4gdGhpcy5sb2dnZXIubG9nKGBBRyBHcmlkOiBiZWFuIHJlZmVyZW5jZSAke3R9IGlzIHVzZWQgYWZ0ZXIgdGhlIGdyaWQgaXMgZGVzdHJveWVkIWApLG51bGw7aWYoImNvbnRleHQiPT09dClyZXR1cm4gdGhpcztpZih0aGlzLmNvbnRleHRQYXJhbXMucHJvdmlkZWRCZWFuSW5zdGFuY2VzJiZ0aGlzLmNvbnRleHRQYXJhbXMucHJvdmlkZWRCZWFuSW5zdGFuY2VzLmhhc093blByb3BlcnR5KHQpKXJldHVybiB0aGlzLmNvbnRleHRQYXJhbXMucHJvdmlkZWRCZWFuSW5zdGFuY2VzW3RdO2NvbnN0IHM9dGhpcy5iZWFuV3JhcHBlcnNbdF07cmV0dXJuIHM/cy5iZWFuSW5zdGFuY2U6KGl8fGNvbnNvbGUuZXJyb3IoYEFHIEdyaWQ6IHVuYWJsZSB0byBmaW5kIGJlYW4gcmVmZXJlbmNlICR7dH0gd2hpbGUgaW5pdGlhbGlzaW5nICR7ZX1gKSxudWxsKX1jYWxsTGlmZUN5Y2xlTWV0aG9kcyhlLHQpe2UuZm9yRWFjaChlPT50aGlzLmNhbGxMaWZlQ3ljbGVNZXRob2RzT25CZWFuKGUsdCkpfWNhbGxMaWZlQ3ljbGVNZXRob2RzT25CZWFuKGUsdCxpKXtjb25zdCBzPXt9O3RoaXMuZm9yRWFjaE1ldGFEYXRhSW5IaWVyYXJjaHkoZSxlPT57Y29uc3Qgcj1lW3RdO3ImJnIuZm9yRWFjaChlPT57ZSE9aSYmKHNbZV09ITApfSl9KTtPYmplY3Qua2V5cyhzKS5mb3JFYWNoKHQ9PmVbdF0oKSl9Z2V0QmVhbihlKXtyZXR1cm4gdGhpcy5sb29rdXBCZWFuSW5zdGFuY2UoImdldEJlYW4iLGUsITApfWRlc3Ryb3koKXtpZih0aGlzLmRlc3Ryb3llZClyZXR1cm47dGhpcy5kZXN0cm95ZWQ9ITAsdGhpcy5sb2dnZXIubG9nKCI+PiBTaHV0dGluZyBkb3duIGFnLUFwcGxpY2F0aW9uIENvbnRleHQiKTtjb25zdCBlPXRoaXMuZ2V0QmVhbkluc3RhbmNlcygpO3RoaXMuZGVzdHJveUJlYW5zKGUpLHRoaXMuY29udGV4dFBhcmFtcy5wcm92aWRlZEJlYW5JbnN0YW5jZXM9bnVsbCxyZS5fX3VuUmVnaXN0ZXJHcmlkTW9kdWxlcyh0aGlzLmNvbnRleHRQYXJhbXMuZ3JpZElkKSx0aGlzLmxvZ2dlci5sb2coIj4+IGFnLUFwcGxpY2F0aW9uIENvbnRleHQgc2h1dCBkb3duIC0gY29tcG9uZW50IGlzIGRlYWQiKX1kZXN0cm95QmVhbihlKXtlJiZ0aGlzLmRlc3Ryb3lCZWFucyhbZV0pfWRlc3Ryb3lCZWFucyhlKXtyZXR1cm4gZT8oZS5mb3JFYWNoKGU9Pnt0aGlzLmNhbGxMaWZlQ3ljbGVNZXRob2RzT25CZWFuKGUsInByZURlc3Ryb3lNZXRob2RzIiwiZGVzdHJveSIpO2NvbnN0IHQ9ZTsiZnVuY3Rpb24iPT10eXBlb2YgdC5kZXN0cm95JiZ0LmRlc3Ryb3koKX0pLFtdKTpbXX1pc0Rlc3Ryb3llZCgpe3JldHVybiB0aGlzLmRlc3Ryb3llZH1nZXRHcmlkSWQoKXtyZXR1cm4gdGhpcy5jb250ZXh0UGFyYW1zLmdyaWRJZH19ZnVuY3Rpb24gbmUoZSx0LGkpe2NvbnN0IHM9Z2UoZS5jb25zdHJ1Y3Rvcik7cy5wcmVDb25zdHJ1Y3RNZXRob2RzfHwocy5wcmVDb25zdHJ1Y3RNZXRob2RzPVtdKSxzLnByZUNvbnN0cnVjdE1ldGhvZHMucHVzaCh0KX1mdW5jdGlvbiBhZShlLHQsaSl7Y29uc3Qgcz1nZShlLmNvbnN0cnVjdG9yKTtzLnBvc3RDb25zdHJ1Y3RNZXRob2RzfHwocy5wb3N0Q29uc3RydWN0TWV0aG9kcz1bXSkscy5wb3N0Q29uc3RydWN0TWV0aG9kcy5wdXNoKHQpfWZ1bmN0aW9uIGxlKGUsdCxpKXtjb25zdCBzPWdlKGUuY29uc3RydWN0b3IpO3MucHJlRGVzdHJveU1ldGhvZHN8fChzLnByZURlc3Ryb3lNZXRob2RzPVtdKSxzLnByZURlc3Ryb3lNZXRob2RzLnB1c2godCl9ZnVuY3Rpb24gZGUoZSl7cmV0dXJuIHQ9PntnZSh0KS5iZWFuTmFtZT1lfX1mdW5jdGlvbiBjZShlKXtyZXR1cm4odCxpLHMpPT57dWUodCxlLCExLHQsaSxudWxsKX19ZnVuY3Rpb24gaGUoZSl7cmV0dXJuKHQsaSxzKT0+e3VlKHQsZSwhMCx0LGksbnVsbCl9fWZ1bmN0aW9uIHVlKGUsdCxpLHMscixvKXtpZihudWxsPT09dClyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJBRyBHcmlkOiBBdXRvd2lyZWQgbmFtZSBzaG91bGQgbm90IGJlIG51bGwiKTtpZigibnVtYmVyIj09dHlwZW9mIG8pcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiQUcgR3JpZDogQXV0b3dpcmVkIHNob3VsZCBiZSBvbiBhbiBhdHRyaWJ1dGUiKTtjb25zdCBuPWdlKGUuY29uc3RydWN0b3IpO24uYWdDbGFzc0F0dHJpYnV0ZXN8fChuLmFnQ2xhc3NBdHRyaWJ1dGVzPVtdKSxuLmFnQ2xhc3NBdHRyaWJ1dGVzLnB1c2goe2F0dHJpYnV0ZU5hbWU6cixiZWFuTmFtZTp0LG9wdGlvbmFsOml9KX1mdW5jdGlvbiBwZShlKXtyZXR1cm4odCxpLHMpPT57Y29uc3Qgcj0iZnVuY3Rpb24iPT10eXBlb2YgdD90OnQuY29uc3RydWN0b3I7bGV0IG87aWYoIm51bWJlciI9PXR5cGVvZiBzKXtsZXQgdDtpPyhvPWdlKHIpLHQ9aSk6KG89Z2UociksdD0iYWdDb25zdHJ1Y3RvciIpLG8uYXV0b3dpcmVNZXRob2RzfHwoby5hdXRvd2lyZU1ldGhvZHM9e30pLG8uYXV0b3dpcmVNZXRob2RzW3RdfHwoby5hdXRvd2lyZU1ldGhvZHNbdF09e30pLG8uYXV0b3dpcmVNZXRob2RzW3RdW3NdPWV9fX1mdW5jdGlvbiBnZShlKXtyZXR1cm4gZS5oYXNPd25Qcm9wZXJ0eSgiX19hZ0JlYW5NZXRhRGF0YSIpfHwoZS5fX2FnQmVhbk1ldGFEYXRhPXt9KSxlLl9fYWdCZWFuTWV0YURhdGF9dmFyIG1lPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59LGZlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGkscyl7dChpLHMsZSl9fTtsZXQgdmU9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmFsbFN5bmNMaXN0ZW5lcnM9bmV3IE1hcCx0aGlzLmFsbEFzeW5jTGlzdGVuZXJzPW5ldyBNYXAsdGhpcy5nbG9iYWxTeW5jTGlzdGVuZXJzPW5ldyBTZXQsdGhpcy5nbG9iYWxBc3luY0xpc3RlbmVycz1uZXcgU2V0LHRoaXMuYXN5bmNGdW5jdGlvbnNRdWV1ZT1bXSx0aGlzLnNjaGVkdWxlZD0hMSx0aGlzLmZpcmVkRXZlbnRzPXt9fXNldEJlYW5zKGUsdCxpPW51bGwscz1udWxsKXtpZih0aGlzLmZyYW1ld29ya092ZXJyaWRlcz10LHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlPWUsaSl7Y29uc3QgdD1lLnVzZUFzeW5jRXZlbnRzKCk7dGhpcy5hZGRHbG9iYWxMaXN0ZW5lcihpLHQpfXMmJnRoaXMuYWRkR2xvYmFsTGlzdGVuZXIocywhMSl9c2V0RnJhbWV3b3JrT3ZlcnJpZGVzKGUpe3RoaXMuZnJhbWV3b3JrT3ZlcnJpZGVzPWV9Z2V0TGlzdGVuZXJzKGUsdCxpKXtjb25zdCBzPXQ/dGhpcy5hbGxBc3luY0xpc3RlbmVyczp0aGlzLmFsbFN5bmNMaXN0ZW5lcnM7bGV0IHI9cy5nZXQoZSk7cmV0dXJuIXImJmkmJihyPW5ldyBTZXQscy5zZXQoZSxyKSkscn1ub1JlZ2lzdGVyZWRMaXN0ZW5lcnNFeGlzdCgpe3JldHVybiAwPT09dGhpcy5hbGxTeW5jTGlzdGVuZXJzLnNpemUmJjA9PT10aGlzLmFsbEFzeW5jTGlzdGVuZXJzLnNpemUmJjA9PT10aGlzLmdsb2JhbFN5bmNMaXN0ZW5lcnMuc2l6ZSYmMD09PXRoaXMuZ2xvYmFsQXN5bmNMaXN0ZW5lcnMuc2l6ZX1hZGRFdmVudExpc3RlbmVyKGUsdCxpPSExKXt0aGlzLmdldExpc3RlbmVycyhlLGksITApLmFkZCh0KX1yZW1vdmVFdmVudExpc3RlbmVyKGUsdCxpPSExKXtjb25zdCBzPXRoaXMuZ2V0TGlzdGVuZXJzKGUsaSwhMSk7aWYocyYmKHMuZGVsZXRlKHQpLDA9PT1zLnNpemUpKXsoaT90aGlzLmFsbEFzeW5jTGlzdGVuZXJzOnRoaXMuYWxsU3luY0xpc3RlbmVycykuZGVsZXRlKGUpfX1hZGRHbG9iYWxMaXN0ZW5lcihlLHQ9ITEpeyh0P3RoaXMuZ2xvYmFsQXN5bmNMaXN0ZW5lcnM6dGhpcy5nbG9iYWxTeW5jTGlzdGVuZXJzKS5hZGQoZSl9cmVtb3ZlR2xvYmFsTGlzdGVuZXIoZSx0PSExKXsodD90aGlzLmdsb2JhbEFzeW5jTGlzdGVuZXJzOnRoaXMuZ2xvYmFsU3luY0xpc3RlbmVycykuZGVsZXRlKGUpfWRpc3BhdGNoRXZlbnQoZSl7bGV0IHQ9ZTt0aGlzLmdyaWRPcHRpb25zU2VydmljZSYmdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh0KSx0aGlzLmRpc3BhdGNoVG9MaXN0ZW5lcnModCwhMCksdGhpcy5kaXNwYXRjaFRvTGlzdGVuZXJzKHQsITEpLHRoaXMuZmlyZWRFdmVudHNbdC50eXBlXT0hMH1kaXNwYXRjaEV2ZW50T25jZShlKXt0aGlzLmZpcmVkRXZlbnRzW2UudHlwZV18fHRoaXMuZGlzcGF0Y2hFdmVudChlKX1kaXNwYXRjaFRvTGlzdGVuZXJzKGUsdCl7dmFyIGk7Y29uc3Qgcz1lLnR5cGU7aWYodCYmImV2ZW50ImluIGUpe2NvbnN0IHQ9ZS5ldmVudDt0IGluc3RhbmNlb2YgRXZlbnQmJihlLmV2ZW50UGF0aD10LmNvbXBvc2VkUGF0aCgpKX1jb25zdCByPShpLHMpPT5pLmZvckVhY2goaT0+e2lmKCFzLmhhcyhpKSlyZXR1cm47Y29uc3Qgcj10aGlzLmZyYW1ld29ya092ZXJyaWRlcz8oKT0+dGhpcy5mcmFtZXdvcmtPdmVycmlkZXMud3JhcEluY29taW5nKCgpPT5pKGUpKTooKT0+aShlKTt0P3RoaXMuZGlzcGF0Y2hBc3luYyhyKTpyKCl9KSxvPW51bGwhPT0oaT10aGlzLmdldExpc3RlbmVycyhzLHQsITEpKSYmdm9pZCAwIT09aT9pOm5ldyBTZXQsbj1uZXcgU2V0KG8pO24uc2l6ZT4wJiZyKG4sbyk7bmV3IFNldCh0P3RoaXMuZ2xvYmFsQXN5bmNMaXN0ZW5lcnM6dGhpcy5nbG9iYWxTeW5jTGlzdGVuZXJzKS5mb3JFYWNoKGk9Pntjb25zdCByPXRoaXMuZnJhbWV3b3JrT3ZlcnJpZGVzPygpPT50aGlzLmZyYW1ld29ya092ZXJyaWRlcy53cmFwSW5jb21pbmcoKCk9PmkocyxlKSk6KCk9PmkocyxlKTt0P3RoaXMuZGlzcGF0Y2hBc3luYyhyKTpyKCl9KX1kaXNwYXRjaEFzeW5jKGUpe3RoaXMuYXN5bmNGdW5jdGlvbnNRdWV1ZS5wdXNoKGUpLHRoaXMuc2NoZWR1bGVkfHwodGhpcy5mcmFtZXdvcmtPdmVycmlkZXMud3JhcEluY29taW5nKCgpPT57d2luZG93LnNldFRpbWVvdXQodGhpcy5mbHVzaEFzeW5jUXVldWUuYmluZCh0aGlzKSwwKX0pLHRoaXMuc2NoZWR1bGVkPSEwKX1mbHVzaEFzeW5jUXVldWUoKXt0aGlzLnNjaGVkdWxlZD0hMTtjb25zdCBlPXRoaXMuYXN5bmNGdW5jdGlvbnNRdWV1ZS5zbGljZSgpO3RoaXMuYXN5bmNGdW5jdGlvbnNRdWV1ZT1bXSxlLmZvckVhY2goZT0+ZSgpKX19O21lKFtmZSgwLHBlKCJncmlkT3B0aW9uc1NlcnZpY2UiKSksZmUoMSxwZSgiZnJhbWV3b3JrT3ZlcnJpZGVzIikpLGZlKDIscGUoImdsb2JhbEV2ZW50TGlzdGVuZXIiKSksZmUoMyxwZSgiZ2xvYmFsU3luY0V2ZW50TGlzdGVuZXIiKSldLHZlLnByb3RvdHlwZSwic2V0QmVhbnMiLG51bGwpLHZlPW1lKFtkZSgiZXZlbnRTZXJ2aWNlIildLHZlKTtjbGFzcyBDZXtjb25zdHJ1Y3RvcihlKXt0aGlzLmZyYW1ld29ya092ZXJyaWRlcz1lLHRoaXMud3JhcHBlZExpc3RlbmVycz1uZXcgTWFwLHRoaXMud3JhcHBlZEdsb2JhbExpc3RlbmVycz1uZXcgTWFwfXdyYXAoZSl7bGV0IHQ9ZTtyZXR1cm4gdGhpcy5mcmFtZXdvcmtPdmVycmlkZXMuc2hvdWxkV3JhcE91dGdvaW5nJiYodD10PT57dGhpcy5mcmFtZXdvcmtPdmVycmlkZXMud3JhcE91dGdvaW5nKCgpPT5lKHQpKX0sdGhpcy53cmFwcGVkTGlzdGVuZXJzLnNldChlLHQpKSx0fXdyYXBHbG9iYWwoZSl7bGV0IHQ9ZTtyZXR1cm4gdGhpcy5mcmFtZXdvcmtPdmVycmlkZXMuc2hvdWxkV3JhcE91dGdvaW5nJiYodD0odCxpKT0+e3RoaXMuZnJhbWV3b3JrT3ZlcnJpZGVzLndyYXBPdXRnb2luZygoKT0+ZSh0LGkpKX0sdGhpcy53cmFwcGVkR2xvYmFsTGlzdGVuZXJzLnNldChlLHQpKSx0fXVud3JhcChlKXt2YXIgdDtyZXR1cm4gbnVsbCE9PSh0PXRoaXMud3JhcHBlZExpc3RlbmVycy5nZXQoZSkpJiZ2b2lkIDAhPT10P3Q6ZX11bndyYXBHbG9iYWwoZSl7dmFyIHQ7cmV0dXJuIG51bGwhPT0odD10aGlzLndyYXBwZWRHbG9iYWxMaXN0ZW5lcnMuZ2V0KGUpKSYmdm9pZCAwIT09dD90OmV9fXZhciB5ZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjb25zdCBTZT17cmVzaXphYmxlOiEwLHNvcnRhYmxlOiEwfTtsZXQgd2U9MDtmdW5jdGlvbiBiZSgpe3JldHVybiB3ZSsrfWNsYXNzIEVle2NvbnN0cnVjdG9yKGUsdCxpLHMpe3RoaXMuaW5zdGFuY2VJZD1iZSgpLHRoaXMuYXV0b0hlYWRlckhlaWdodD1udWxsLHRoaXMubW92aW5nPSExLHRoaXMubWVudVZpc2libGU9ITEsdGhpcy5sYXN0TGVmdFBpbm5lZD0hMSx0aGlzLmZpcnN0UmlnaHRQaW5uZWQ9ITEsdGhpcy5maWx0ZXJBY3RpdmU9ITEsdGhpcy5ldmVudFNlcnZpY2U9bmV3IHZlLHRoaXMudG9vbHRpcEVuYWJsZWQ9ITEsdGhpcy5yb3dHcm91cEFjdGl2ZT0hMSx0aGlzLnBpdm90QWN0aXZlPSExLHRoaXMuYWdncmVnYXRpb25BY3RpdmU9ITEsdGhpcy5jb2xEZWY9ZSx0aGlzLnVzZXJQcm92aWRlZENvbERlZj10LHRoaXMuY29sSWQ9aSx0aGlzLnByaW1hcnk9cyx0aGlzLnNldFN0YXRlKGUpfWdldEluc3RhbmNlSWQoKXtyZXR1cm4gdGhpcy5pbnN0YW5jZUlkfXNldFN0YXRlKGUpe3ZvaWQgMCE9PWUuc29ydD8iYXNjIiE9PWUuc29ydCYmImRlc2MiIT09ZS5zb3J0fHwodGhpcy5zb3J0PWUuc29ydCk6ImFzYyIhPT1lLmluaXRpYWxTb3J0JiYiZGVzYyIhPT1lLmluaXRpYWxTb3J0fHwodGhpcy5zb3J0PWUuaW5pdGlhbFNvcnQpO2NvbnN0IHQ9ZS5zb3J0SW5kZXgsaT1lLmluaXRpYWxTb3J0SW5kZXg7dm9pZCAwIT09dD9udWxsIT09dCYmKHRoaXMuc29ydEluZGV4PXQpOm51bGwhPT1pJiYodGhpcy5zb3J0SW5kZXg9aSk7Y29uc3Qgcz1lLmhpZGUscj1lLmluaXRpYWxIaWRlO3RoaXMudmlzaWJsZT12b2lkIDAhPT1zPyFzOiFyLHZvaWQgMCE9PWUucGlubmVkP3RoaXMuc2V0UGlubmVkKGUucGlubmVkKTp0aGlzLnNldFBpbm5lZChlLmluaXRpYWxQaW5uZWQpO2NvbnN0IG89ZS5mbGV4LG49ZS5pbml0aWFsRmxleDt2b2lkIDAhPT1vP3RoaXMuZmxleD1vOnZvaWQgMCE9PW4mJih0aGlzLmZsZXg9bil9c2V0Q29sRGVmKGUsdCxpKXt0aGlzLmNvbERlZj1lLHRoaXMudXNlclByb3ZpZGVkQ29sRGVmPXQsdGhpcy5pbml0TWluQW5kTWF4V2lkdGhzKCksdGhpcy5pbml0RG90Tm90YXRpb24oKSx0aGlzLmluaXRUb29sdGlwKCksdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUNvbHVtbkV2ZW50KCJjb2xEZWZDaGFuZ2VkIixpKSl9Z2V0VXNlclByb3ZpZGVkQ29sRGVmKCl7cmV0dXJuIHRoaXMudXNlclByb3ZpZGVkQ29sRGVmfXNldFBhcmVudChlKXt0aGlzLnBhcmVudD1lfWdldFBhcmVudCgpe3JldHVybiB0aGlzLnBhcmVudH1zZXRPcmlnaW5hbFBhcmVudChlKXt0aGlzLm9yaWdpbmFsUGFyZW50PWV9Z2V0T3JpZ2luYWxQYXJlbnQoKXtyZXR1cm4gdGhpcy5vcmlnaW5hbFBhcmVudH1pbml0aWFsaXNlKCl7dGhpcy5pbml0TWluQW5kTWF4V2lkdGhzKCksdGhpcy5yZXNldEFjdHVhbFdpZHRoKCJncmlkSW5pdGlhbGl6aW5nIiksdGhpcy5pbml0RG90Tm90YXRpb24oKSx0aGlzLmluaXRUb29sdGlwKCl9aW5pdERvdE5vdGF0aW9uKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzRmllbGREb3ROb3RhdGlvbiIpO3RoaXMuZmllbGRDb250YWluc0RvdHM9Yih0aGlzLmNvbERlZi5maWVsZCkmJnRoaXMuY29sRGVmLmZpZWxkLmluZGV4T2YoIi4iKT49MCYmIWUsdGhpcy50b29sdGlwRmllbGRDb250YWluc0RvdHM9Yih0aGlzLmNvbERlZi50b29sdGlwRmllbGQpJiZ0aGlzLmNvbERlZi50b29sdGlwRmllbGQuaW5kZXhPZigiLiIpPj0wJiYhZX1pbml0TWluQW5kTWF4V2lkdGhzKCl7Y29uc3QgZT10aGlzLmNvbERlZjt0aGlzLm1pbldpZHRoPXRoaXMuY29sdW1uVXRpbHMuY2FsY3VsYXRlQ29sTWluV2lkdGgoZSksdGhpcy5tYXhXaWR0aD10aGlzLmNvbHVtblV0aWxzLmNhbGN1bGF0ZUNvbE1heFdpZHRoKGUpfWluaXRUb29sdGlwKCl7dGhpcy50b29sdGlwRW5hYmxlZD1iKHRoaXMuY29sRGVmLnRvb2x0aXBGaWVsZCl8fGIodGhpcy5jb2xEZWYudG9vbHRpcFZhbHVlR2V0dGVyKXx8Yih0aGlzLmNvbERlZi50b29sdGlwQ29tcG9uZW50KX1yZXNldEFjdHVhbFdpZHRoKGUpe2NvbnN0IHQ9dGhpcy5jb2x1bW5VdGlscy5jYWxjdWxhdGVDb2xJbml0aWFsV2lkdGgodGhpcy5jb2xEZWYpO3RoaXMuc2V0QWN0dWFsV2lkdGgodCxlLCEwKX1pc0VtcHR5R3JvdXAoKXtyZXR1cm4hMX1pc1Jvd0dyb3VwRGlzcGxheWVkKGUpe2lmKEUodGhpcy5jb2xEZWYpfHxFKHRoaXMuY29sRGVmLnNob3dSb3dHcm91cCkpcmV0dXJuITE7Y29uc3QgdD0hMD09PXRoaXMuY29sRGVmLnNob3dSb3dHcm91cCxpPXRoaXMuY29sRGVmLnNob3dSb3dHcm91cD09PWU7cmV0dXJuIHR8fGl9aXNQcmltYXJ5KCl7cmV0dXJuIHRoaXMucHJpbWFyeX1pc0ZpbHRlckFsbG93ZWQoKXtyZXR1cm4hIXRoaXMuY29sRGVmLmZpbHRlcn1pc0ZpZWxkQ29udGFpbnNEb3RzKCl7cmV0dXJuIHRoaXMuZmllbGRDb250YWluc0RvdHN9aXNUb29sdGlwRW5hYmxlZCgpe3JldHVybiB0aGlzLnRvb2x0aXBFbmFibGVkfWlzVG9vbHRpcEZpZWxkQ29udGFpbnNEb3RzKCl7cmV0dXJuIHRoaXMudG9vbHRpcEZpZWxkQ29udGFpbnNEb3RzfWFkZEV2ZW50TGlzdGVuZXIoZSx0KXt2YXIgaSxzO3RoaXMuZnJhbWV3b3JrT3ZlcnJpZGVzLnNob3VsZFdyYXBPdXRnb2luZyYmIXRoaXMuZnJhbWV3b3JrRXZlbnRMaXN0ZW5lclNlcnZpY2UmJih0aGlzLmV2ZW50U2VydmljZS5zZXRGcmFtZXdvcmtPdmVycmlkZXModGhpcy5mcmFtZXdvcmtPdmVycmlkZXMpLHRoaXMuZnJhbWV3b3JrRXZlbnRMaXN0ZW5lclNlcnZpY2U9bmV3IENlKHRoaXMuZnJhbWV3b3JrT3ZlcnJpZGVzKSk7Y29uc3Qgcj1udWxsIT09KHM9bnVsbD09PShpPXRoaXMuZnJhbWV3b3JrRXZlbnRMaXN0ZW5lclNlcnZpY2UpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLndyYXAodCkpJiZ2b2lkIDAhPT1zP3M6dDt0aGlzLmV2ZW50U2VydmljZS5hZGRFdmVudExpc3RlbmVyKGUscil9cmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpe3ZhciBpLHM7Y29uc3Qgcj1udWxsIT09KHM9bnVsbD09PShpPXRoaXMuZnJhbWV3b3JrRXZlbnRMaXN0ZW5lclNlcnZpY2UpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnVud3JhcCh0KSkmJnZvaWQgMCE9PXM/czp0O3RoaXMuZXZlbnRTZXJ2aWNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxyKX1jcmVhdGVDb2x1bW5GdW5jdGlvbkNhbGxiYWNrUGFyYW1zKGUpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHtub2RlOmUsZGF0YTplLmRhdGEsY29sdW1uOnRoaXMsY29sRGVmOnRoaXMuY29sRGVmfSl9aXNTdXBwcmVzc05hdmlnYWJsZShlKXtpZigiYm9vbGVhbiI9PXR5cGVvZiB0aGlzLmNvbERlZi5zdXBwcmVzc05hdmlnYWJsZSlyZXR1cm4gdGhpcy5jb2xEZWYuc3VwcHJlc3NOYXZpZ2FibGU7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuY29sRGVmLnN1cHByZXNzTmF2aWdhYmxlKXtjb25zdCB0PXRoaXMuY3JlYXRlQ29sdW1uRnVuY3Rpb25DYWxsYmFja1BhcmFtcyhlKTtyZXR1cm4oMCx0aGlzLmNvbERlZi5zdXBwcmVzc05hdmlnYWJsZSkodCl9cmV0dXJuITF9aXNDZWxsRWRpdGFibGUoZSl7cmV0dXJuIShlLmdyb3VwJiYhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVHcm91cEVkaXQiKSkmJnRoaXMuaXNDb2x1bW5GdW5jKGUsdGhpcy5jb2xEZWYuZWRpdGFibGUpfWlzU3VwcHJlc3NGaWxsSGFuZGxlKCl7cmV0dXJuISF0aGlzLmNvbERlZi5zdXBwcmVzc0ZpbGxIYW5kbGV9aXNBdXRvSGVpZ2h0KCl7cmV0dXJuISF0aGlzLmNvbERlZi5hdXRvSGVpZ2h0fWlzQXV0b0hlYWRlckhlaWdodCgpe3JldHVybiEhdGhpcy5jb2xEZWYuYXV0b0hlYWRlckhlaWdodH1pc1Jvd0RyYWcoZSl7cmV0dXJuIHRoaXMuaXNDb2x1bW5GdW5jKGUsdGhpcy5jb2xEZWYucm93RHJhZyl9aXNEbmRTb3VyY2UoZSl7cmV0dXJuIHRoaXMuaXNDb2x1bW5GdW5jKGUsdGhpcy5jb2xEZWYuZG5kU291cmNlKX1pc0NlbGxDaGVja2JveFNlbGVjdGlvbihlKXtyZXR1cm4gdGhpcy5pc0NvbHVtbkZ1bmMoZSx0aGlzLmNvbERlZi5jaGVja2JveFNlbGVjdGlvbil9aXNTdXBwcmVzc1Bhc3RlKGUpe3JldHVybiB0aGlzLmlzQ29sdW1uRnVuYyhlLHRoaXMuY29sRGVmP3RoaXMuY29sRGVmLnN1cHByZXNzUGFzdGU6bnVsbCl9aXNSZXNpemFibGUoKXtyZXR1cm4hIXRoaXMuZ2V0Q29sRGVmVmFsdWUoInJlc2l6YWJsZSIpfWdldENvbERlZlZhbHVlKGUpe3ZhciB0O3JldHVybiBudWxsIT09KHQ9dGhpcy5jb2xEZWZbZV0pJiZ2b2lkIDAhPT10P3Q6U2VbZV19aXNDb2x1bW5GdW5jKGUsdCl7aWYoImJvb2xlYW4iPT10eXBlb2YgdClyZXR1cm4gdDtpZigiZnVuY3Rpb24iPT10eXBlb2YgdCl7cmV0dXJuIHQodGhpcy5jcmVhdGVDb2x1bW5GdW5jdGlvbkNhbGxiYWNrUGFyYW1zKGUpKX1yZXR1cm4hMX1zZXRNb3ZpbmcoZSx0KXt0aGlzLm1vdmluZz1lLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVDb2x1bW5FdmVudCgibW92aW5nQ2hhbmdlZCIsdCkpfWNyZWF0ZUNvbHVtbkV2ZW50KGUsdCl7cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3R5cGU6ZSxjb2x1bW46dGhpcyxjb2x1bW5zOlt0aGlzXSxzb3VyY2U6dH0pfWlzTW92aW5nKCl7cmV0dXJuIHRoaXMubW92aW5nfWdldFNvcnQoKXtyZXR1cm4gdGhpcy5zb3J0fXNldFNvcnQoZSx0KXt0aGlzLnNvcnQhPT1lJiYodGhpcy5zb3J0PWUsdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUNvbHVtbkV2ZW50KCJzb3J0Q2hhbmdlZCIsdCkpKSx0aGlzLmRpc3BhdGNoU3RhdGVVcGRhdGVkRXZlbnQoInNvcnQiKX1zZXRNZW51VmlzaWJsZShlLHQpe3RoaXMubWVudVZpc2libGUhPT1lJiYodGhpcy5tZW51VmlzaWJsZT1lLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVDb2x1bW5FdmVudCgibWVudVZpc2libGVDaGFuZ2VkIix0KSkpfWlzTWVudVZpc2libGUoKXtyZXR1cm4gdGhpcy5tZW51VmlzaWJsZX1pc1NvcnRhYmxlKCl7cmV0dXJuISF0aGlzLmdldENvbERlZlZhbHVlKCJzb3J0YWJsZSIpfWlzU29ydEFzY2VuZGluZygpe3JldHVybiJhc2MiPT09dGhpcy5zb3J0fWlzU29ydERlc2NlbmRpbmcoKXtyZXR1cm4iZGVzYyI9PT10aGlzLnNvcnR9aXNTb3J0Tm9uZSgpe3JldHVybiBFKHRoaXMuc29ydCl9aXNTb3J0aW5nKCl7cmV0dXJuIGIodGhpcy5zb3J0KX1nZXRTb3J0SW5kZXgoKXtyZXR1cm4gdGhpcy5zb3J0SW5kZXh9c2V0U29ydEluZGV4KGUpe3RoaXMuc29ydEluZGV4PWUsdGhpcy5kaXNwYXRjaFN0YXRlVXBkYXRlZEV2ZW50KCJzb3J0SW5kZXgiKX1zZXRBZ2dGdW5jKGUpe3RoaXMuYWdnRnVuYz1lLHRoaXMuZGlzcGF0Y2hTdGF0ZVVwZGF0ZWRFdmVudCgiYWdnRnVuYyIpfWdldEFnZ0Z1bmMoKXtyZXR1cm4gdGhpcy5hZ2dGdW5jfWdldExlZnQoKXtyZXR1cm4gdGhpcy5sZWZ0fWdldE9sZExlZnQoKXtyZXR1cm4gdGhpcy5vbGRMZWZ0fWdldFJpZ2h0KCl7cmV0dXJuIHRoaXMubGVmdCt0aGlzLmFjdHVhbFdpZHRofXNldExlZnQoZSx0KXt0aGlzLm9sZExlZnQ9dGhpcy5sZWZ0LHRoaXMubGVmdCE9PWUmJih0aGlzLmxlZnQ9ZSx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHRoaXMuY3JlYXRlQ29sdW1uRXZlbnQoImxlZnRDaGFuZ2VkIix0KSkpfWlzRmlsdGVyQWN0aXZlKCl7cmV0dXJuIHRoaXMuZmlsdGVyQWN0aXZlfXNldEZpbHRlckFjdGl2ZShlLHQsaSl7dGhpcy5maWx0ZXJBY3RpdmUhPT1lJiYodGhpcy5maWx0ZXJBY3RpdmU9ZSx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHRoaXMuY3JlYXRlQ29sdW1uRXZlbnQoImZpbHRlckFjdGl2ZUNoYW5nZWQiLHQpKSk7Y29uc3Qgcz10aGlzLmNyZWF0ZUNvbHVtbkV2ZW50KCJmaWx0ZXJDaGFuZ2VkIix0KTtpJiZrKHMsaSksdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChzKX1pc0hvdmVyZWQoKXtyZXR1cm4gdGhpcy5jb2x1bW5Ib3ZlclNlcnZpY2UuaXNIb3ZlcmVkKHRoaXMpfXNldFBpbm5lZChlKXt0aGlzLnBpbm5lZD0hMD09PWV8fCJsZWZ0Ij09PWU/ImxlZnQiOiJyaWdodCI9PT1lPyJyaWdodCI6bnVsbCx0aGlzLmRpc3BhdGNoU3RhdGVVcGRhdGVkRXZlbnQoInBpbm5lZCIpfXNldEZpcnN0UmlnaHRQaW5uZWQoZSx0KXt0aGlzLmZpcnN0UmlnaHRQaW5uZWQhPT1lJiYodGhpcy5maXJzdFJpZ2h0UGlubmVkPWUsdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUNvbHVtbkV2ZW50KCJmaXJzdFJpZ2h0UGlubmVkQ2hhbmdlZCIsdCkpKX1zZXRMYXN0TGVmdFBpbm5lZChlLHQpe3RoaXMubGFzdExlZnRQaW5uZWQhPT1lJiYodGhpcy5sYXN0TGVmdFBpbm5lZD1lLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVDb2x1bW5FdmVudCgibGFzdExlZnRQaW5uZWRDaGFuZ2VkIix0KSkpfWlzRmlyc3RSaWdodFBpbm5lZCgpe3JldHVybiB0aGlzLmZpcnN0UmlnaHRQaW5uZWR9aXNMYXN0TGVmdFBpbm5lZCgpe3JldHVybiB0aGlzLmxhc3RMZWZ0UGlubmVkfWlzUGlubmVkKCl7cmV0dXJuImxlZnQiPT09dGhpcy5waW5uZWR8fCJyaWdodCI9PT10aGlzLnBpbm5lZH1pc1Bpbm5lZExlZnQoKXtyZXR1cm4ibGVmdCI9PT10aGlzLnBpbm5lZH1pc1Bpbm5lZFJpZ2h0KCl7cmV0dXJuInJpZ2h0Ij09PXRoaXMucGlubmVkfWdldFBpbm5lZCgpe3JldHVybiB0aGlzLnBpbm5lZH1zZXRWaXNpYmxlKGUsdCl7Y29uc3QgaT0hMD09PWU7dGhpcy52aXNpYmxlIT09aSYmKHRoaXMudmlzaWJsZT1pLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVDb2x1bW5FdmVudCgidmlzaWJsZUNoYW5nZWQiLHQpKSksdGhpcy5kaXNwYXRjaFN0YXRlVXBkYXRlZEV2ZW50KCJoaWRlIil9aXNWaXNpYmxlKCl7cmV0dXJuIHRoaXMudmlzaWJsZX1pc1NwYW5IZWFkZXJIZWlnaHQoKXtjb25zdCBlPXRoaXMuZ2V0Q29sRGVmKCk7cmV0dXJuIWUuc3VwcHJlc3NTcGFuSGVhZGVySGVpZ2h0JiYhZS5hdXRvSGVhZGVySGVpZ2h0fWdldENvbHVtbkdyb3VwUGFkZGluZ0luZm8oKXtsZXQgZT10aGlzLmdldFBhcmVudCgpO2lmKCFlfHwhZS5pc1BhZGRpbmcoKSlyZXR1cm57bnVtYmVyT2ZQYXJlbnRzOjAsaXNTcGFubmluZ1RvdGFsOiExfTtjb25zdCB0PWUuZ2V0UGFkZGluZ0xldmVsKCkrMTtsZXQgaT0hMDtmb3IoO2U7KXtpZighZS5pc1BhZGRpbmcoKSl7aT0hMTticmVha31lPWUuZ2V0UGFyZW50KCl9cmV0dXJue251bWJlck9mUGFyZW50czp0LGlzU3Bhbm5pbmdUb3RhbDppfX1nZXRDb2xEZWYoKXtyZXR1cm4gdGhpcy5jb2xEZWZ9Z2V0Q29sdW1uR3JvdXBTaG93KCl7cmV0dXJuIHRoaXMuY29sRGVmLmNvbHVtbkdyb3VwU2hvd31nZXRDb2xJZCgpe3JldHVybiB0aGlzLmNvbElkfWdldElkKCl7cmV0dXJuIHRoaXMuY29sSWR9Z2V0VW5pcXVlSWQoKXtyZXR1cm4gdGhpcy5jb2xJZH1nZXREZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMuY29sRGVmfWdldEFjdHVhbFdpZHRoKCl7cmV0dXJuIHRoaXMuYWN0dWFsV2lkdGh9Z2V0QXV0b0hlYWRlckhlaWdodCgpe3JldHVybiB0aGlzLmF1dG9IZWFkZXJIZWlnaHR9c2V0QXV0b0hlYWRlckhlaWdodChlKXtjb25zdCB0PWUhPT10aGlzLmF1dG9IZWFkZXJIZWlnaHQ7cmV0dXJuIHRoaXMuYXV0b0hlYWRlckhlaWdodD1lLHR9Y3JlYXRlQmFzZUNvbERlZlBhcmFtcyhlKXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7bm9kZTplLGRhdGE6ZS5kYXRhLGNvbERlZjp0aGlzLmNvbERlZixjb2x1bW46dGhpc30pfWdldENvbFNwYW4oZSl7aWYoRSh0aGlzLmNvbERlZi5jb2xTcGFuKSlyZXR1cm4gMTtjb25zdCB0PXRoaXMuY3JlYXRlQmFzZUNvbERlZlBhcmFtcyhlKSxpPXRoaXMuY29sRGVmLmNvbFNwYW4odCk7cmV0dXJuIE1hdGgubWF4KGksMSl9Z2V0Um93U3BhbihlKXtpZihFKHRoaXMuY29sRGVmLnJvd1NwYW4pKXJldHVybiAxO2NvbnN0IHQ9dGhpcy5jcmVhdGVCYXNlQ29sRGVmUGFyYW1zKGUpLGk9dGhpcy5jb2xEZWYucm93U3Bhbih0KTtyZXR1cm4gTWF0aC5tYXgoaSwxKX1zZXRBY3R1YWxXaWR0aChlLHQsaT0hMSl7bnVsbCE9dGhpcy5taW5XaWR0aCYmKGU9TWF0aC5tYXgoZSx0aGlzLm1pbldpZHRoKSksbnVsbCE9dGhpcy5tYXhXaWR0aCYmKGU9TWF0aC5taW4oZSx0aGlzLm1heFdpZHRoKSksdGhpcy5hY3R1YWxXaWR0aCE9PWUmJih0aGlzLmFjdHVhbFdpZHRoPWUsdGhpcy5mbGV4JiYiZmxleCIhPT10JiYiZ3JpZEluaXRpYWxpemluZyIhPT10JiYodGhpcy5mbGV4PW51bGwpLGl8fHRoaXMuZmlyZUNvbHVtbldpZHRoQ2hhbmdlZEV2ZW50KHQpKSx0aGlzLmRpc3BhdGNoU3RhdGVVcGRhdGVkRXZlbnQoIndpZHRoIil9ZmlyZUNvbHVtbldpZHRoQ2hhbmdlZEV2ZW50KGUpe3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVDb2x1bW5FdmVudCgid2lkdGhDaGFuZ2VkIixlKSl9aXNHcmVhdGVyVGhhbk1heChlKXtyZXR1cm4gbnVsbCE9dGhpcy5tYXhXaWR0aCYmZT50aGlzLm1heFdpZHRofWdldE1pbldpZHRoKCl7cmV0dXJuIHRoaXMubWluV2lkdGh9Z2V0TWF4V2lkdGgoKXtyZXR1cm4gdGhpcy5tYXhXaWR0aH1nZXRGbGV4KCl7cmV0dXJuIHRoaXMuZmxleHx8MH1zZXRGbGV4KGUpe3RoaXMuZmxleCE9PWUmJih0aGlzLmZsZXg9ZSksdGhpcy5kaXNwYXRjaFN0YXRlVXBkYXRlZEV2ZW50KCJmbGV4Iil9c2V0TWluaW11bShlKXtiKHRoaXMubWluV2lkdGgpJiZ0aGlzLnNldEFjdHVhbFdpZHRoKHRoaXMubWluV2lkdGgsZSl9c2V0Um93R3JvdXBBY3RpdmUoZSx0KXt0aGlzLnJvd0dyb3VwQWN0aXZlIT09ZSYmKHRoaXMucm93R3JvdXBBY3RpdmU9ZSx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHRoaXMuY3JlYXRlQ29sdW1uRXZlbnQoImNvbHVtblJvd0dyb3VwQ2hhbmdlZCIsdCkpKSx0aGlzLmRpc3BhdGNoU3RhdGVVcGRhdGVkRXZlbnQoInJvd0dyb3VwIil9aXNSb3dHcm91cEFjdGl2ZSgpe3JldHVybiB0aGlzLnJvd0dyb3VwQWN0aXZlfXNldFBpdm90QWN0aXZlKGUsdCl7dGhpcy5waXZvdEFjdGl2ZSE9PWUmJih0aGlzLnBpdm90QWN0aXZlPWUsdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUNvbHVtbkV2ZW50KCJjb2x1bW5QaXZvdENoYW5nZWQiLHQpKSksdGhpcy5kaXNwYXRjaFN0YXRlVXBkYXRlZEV2ZW50KCJwaXZvdCIpfWlzUGl2b3RBY3RpdmUoKXtyZXR1cm4gdGhpcy5waXZvdEFjdGl2ZX1pc0FueUZ1bmN0aW9uQWN0aXZlKCl7cmV0dXJuIHRoaXMuaXNQaXZvdEFjdGl2ZSgpfHx0aGlzLmlzUm93R3JvdXBBY3RpdmUoKXx8dGhpcy5pc1ZhbHVlQWN0aXZlKCl9aXNBbnlGdW5jdGlvbkFsbG93ZWQoKXtyZXR1cm4gdGhpcy5pc0FsbG93UGl2b3QoKXx8dGhpcy5pc0FsbG93Um93R3JvdXAoKXx8dGhpcy5pc0FsbG93VmFsdWUoKX1zZXRWYWx1ZUFjdGl2ZShlLHQpe3RoaXMuYWdncmVnYXRpb25BY3RpdmUhPT1lJiYodGhpcy5hZ2dyZWdhdGlvbkFjdGl2ZT1lLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVDb2x1bW5FdmVudCgiY29sdW1uVmFsdWVDaGFuZ2VkIix0KSkpfWlzVmFsdWVBY3RpdmUoKXtyZXR1cm4gdGhpcy5hZ2dyZWdhdGlvbkFjdGl2ZX1pc0FsbG93UGl2b3QoKXtyZXR1cm4hMD09PXRoaXMuY29sRGVmLmVuYWJsZVBpdm90fWlzQWxsb3dWYWx1ZSgpe3JldHVybiEwPT09dGhpcy5jb2xEZWYuZW5hYmxlVmFsdWV9aXNBbGxvd1Jvd0dyb3VwKCl7cmV0dXJuITA9PT10aGlzLmNvbERlZi5lbmFibGVSb3dHcm91cH1nZXRNZW51VGFicyhlKXtqKCJBcyBvZiB2MzEuMSwgJ2dldE1lbnVUYWJzJyBpcyBkZXByZWNhdGVkLiBVc2UgJ2dldENvbERlZigpLm1lbnVUYWJzID8/IGRlZmF1bHRWYWx1ZXMnIGluc3RlYWQuIik7bGV0IHQ9dGhpcy5nZXRDb2xEZWYoKS5tZW51VGFicztyZXR1cm4gbnVsbD09dCYmKHQ9ZSksdH1kaXNwYXRjaFN0YXRlVXBkYXRlZEV2ZW50KGUpe3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6RWUuRVZFTlRfU1RBVEVfVVBEQVRFRCxrZXk6ZX0pfX1FZS5FVkVOVF9NT1ZJTkdfQ0hBTkdFRD0ibW92aW5nQ2hhbmdlZCIsRWUuRVZFTlRfTEVGVF9DSEFOR0VEPSJsZWZ0Q2hhbmdlZCIsRWUuRVZFTlRfV0lEVEhfQ0hBTkdFRD0id2lkdGhDaGFuZ2VkIixFZS5FVkVOVF9MQVNUX0xFRlRfUElOTkVEX0NIQU5HRUQ9Imxhc3RMZWZ0UGlubmVkQ2hhbmdlZCIsRWUuRVZFTlRfRklSU1RfUklHSFRfUElOTkVEX0NIQU5HRUQ9ImZpcnN0UmlnaHRQaW5uZWRDaGFuZ2VkIixFZS5FVkVOVF9WSVNJQkxFX0NIQU5HRUQ9InZpc2libGVDaGFuZ2VkIixFZS5FVkVOVF9GSUxURVJfQ0hBTkdFRD0iZmlsdGVyQ2hhbmdlZCIsRWUuRVZFTlRfRklMVEVSX0FDVElWRV9DSEFOR0VEPSJmaWx0ZXJBY3RpdmVDaGFuZ2VkIixFZS5FVkVOVF9TT1JUX0NIQU5HRUQ9InNvcnRDaGFuZ2VkIixFZS5FVkVOVF9DT0xfREVGX0NIQU5HRUQ9ImNvbERlZkNoYW5nZWQiLEVlLkVWRU5UX01FTlVfVklTSUJMRV9DSEFOR0VEPSJtZW51VmlzaWJsZUNoYW5nZWQiLEVlLkVWRU5UX1JPV19HUk9VUF9DSEFOR0VEPSJjb2x1bW5Sb3dHcm91cENoYW5nZWQiLEVlLkVWRU5UX1BJVk9UX0NIQU5HRUQ9ImNvbHVtblBpdm90Q2hhbmdlZCIsRWUuRVZFTlRfVkFMVUVfQ0hBTkdFRD0iY29sdW1uVmFsdWVDaGFuZ2VkIixFZS5FVkVOVF9TVEFURV9VUERBVEVEPSJjb2x1bW5TdGF0ZVVwZGF0ZWQiLHllKFtjZSgiZ3JpZE9wdGlvbnNTZXJ2aWNlIildLEVlLnByb3RvdHlwZSwiZ3JpZE9wdGlvbnNTZXJ2aWNlIix2b2lkIDApLHllKFtjZSgiY29sdW1uVXRpbHMiKV0sRWUucHJvdG90eXBlLCJjb2x1bW5VdGlscyIsdm9pZCAwKSx5ZShbY2UoImNvbHVtbkhvdmVyU2VydmljZSIpXSxFZS5wcm90b3R5cGUsImNvbHVtbkhvdmVyU2VydmljZSIsdm9pZCAwKSx5ZShbY2UoImZyYW1ld29ya092ZXJyaWRlcyIpXSxFZS5wcm90b3R5cGUsImZyYW1ld29ya092ZXJyaWRlcyIsdm9pZCAwKSx5ZShbYWVdLEVlLnByb3RvdHlwZSwiaW5pdGlhbGlzZSIsbnVsbCk7dmFyIFJlPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIHhle2NvbnN0cnVjdG9yKGUsdCxpLHMpe3RoaXMubG9jYWxFdmVudFNlcnZpY2U9bmV3IHZlLHRoaXMuZXhwYW5kYWJsZT0hMSx0aGlzLmluc3RhbmNlSWQ9YmUoKSx0aGlzLmV4cGFuZGFibGVMaXN0ZW5lclJlbW92ZUNhbGxiYWNrPW51bGwsdGhpcy5jb2xHcm91cERlZj1lLHRoaXMuZ3JvdXBJZD10LHRoaXMuZXhwYW5kZWQ9ISFlJiYhIWUub3BlbkJ5RGVmYXVsdCx0aGlzLnBhZGRpbmc9aSx0aGlzLmxldmVsPXN9ZGVzdHJveSgpe3RoaXMuZXhwYW5kYWJsZUxpc3RlbmVyUmVtb3ZlQ2FsbGJhY2smJnRoaXMucmVzZXQobnVsbCx2b2lkIDApfXJlc2V0KGUsdCl7dGhpcy5jb2xHcm91cERlZj1lLHRoaXMubGV2ZWw9dCx0aGlzLm9yaWdpbmFsUGFyZW50PW51bGwsdGhpcy5leHBhbmRhYmxlTGlzdGVuZXJSZW1vdmVDYWxsYmFjayYmdGhpcy5leHBhbmRhYmxlTGlzdGVuZXJSZW1vdmVDYWxsYmFjaygpLHRoaXMuY2hpbGRyZW49dm9pZCAwLHRoaXMuZXhwYW5kYWJsZT12b2lkIDB9Z2V0SW5zdGFuY2VJZCgpe3JldHVybiB0aGlzLmluc3RhbmNlSWR9c2V0T3JpZ2luYWxQYXJlbnQoZSl7dGhpcy5vcmlnaW5hbFBhcmVudD1lfWdldE9yaWdpbmFsUGFyZW50KCl7cmV0dXJuIHRoaXMub3JpZ2luYWxQYXJlbnR9Z2V0TGV2ZWwoKXtyZXR1cm4gdGhpcy5sZXZlbH1pc1Zpc2libGUoKXtyZXR1cm4hIXRoaXMuY2hpbGRyZW4mJnRoaXMuY2hpbGRyZW4uc29tZShlPT5lLmlzVmlzaWJsZSgpKX1pc1BhZGRpbmcoKXtyZXR1cm4gdGhpcy5wYWRkaW5nfXNldEV4cGFuZGVkKGUpe3RoaXMuZXhwYW5kZWQ9dm9pZCAwIT09ZSYmZTtjb25zdCB0PXt0eXBlOnhlLkVWRU5UX0VYUEFOREVEX0NIQU5HRUR9O3RoaXMubG9jYWxFdmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KX1pc0V4cGFuZGFibGUoKXtyZXR1cm4gdGhpcy5leHBhbmRhYmxlfWlzRXhwYW5kZWQoKXtyZXR1cm4gdGhpcy5leHBhbmRlZH1nZXRHcm91cElkKCl7cmV0dXJuIHRoaXMuZ3JvdXBJZH1nZXRJZCgpe3JldHVybiB0aGlzLmdldEdyb3VwSWQoKX1zZXRDaGlsZHJlbihlKXt0aGlzLmNoaWxkcmVuPWV9Z2V0Q2hpbGRyZW4oKXtyZXR1cm4gdGhpcy5jaGlsZHJlbn1nZXRDb2xHcm91cERlZigpe3JldHVybiB0aGlzLmNvbEdyb3VwRGVmfWdldExlYWZDb2x1bW5zKCl7Y29uc3QgZT1bXTtyZXR1cm4gdGhpcy5hZGRMZWFmQ29sdW1ucyhlKSxlfWFkZExlYWZDb2x1bW5zKGUpe3RoaXMuY2hpbGRyZW4mJnRoaXMuY2hpbGRyZW4uZm9yRWFjaCh0PT57dCBpbnN0YW5jZW9mIEVlP2UucHVzaCh0KTp0IGluc3RhbmNlb2YgeGUmJnQuYWRkTGVhZkNvbHVtbnMoZSl9KX1nZXRDb2x1bW5Hcm91cFNob3coKXtjb25zdCBlPXRoaXMuY29sR3JvdXBEZWY7aWYoZSlyZXR1cm4gZS5jb2x1bW5Hcm91cFNob3d9c2V0dXBFeHBhbmRhYmxlKCl7dGhpcy5zZXRFeHBhbmRhYmxlKCksdGhpcy5leHBhbmRhYmxlTGlzdGVuZXJSZW1vdmVDYWxsYmFjayYmdGhpcy5leHBhbmRhYmxlTGlzdGVuZXJSZW1vdmVDYWxsYmFjaygpO2NvbnN0IGU9dGhpcy5vbkNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLmJpbmQodGhpcyk7dGhpcy5nZXRMZWFmQ29sdW1ucygpLmZvckVhY2godD0+dC5hZGRFdmVudExpc3RlbmVyKCJ2aXNpYmxlQ2hhbmdlZCIsZSkpLHRoaXMuZXhwYW5kYWJsZUxpc3RlbmVyUmVtb3ZlQ2FsbGJhY2s9KCk9Pnt0aGlzLmdldExlYWZDb2x1bW5zKCkuZm9yRWFjaCh0PT50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInZpc2libGVDaGFuZ2VkIixlKSksdGhpcy5leHBhbmRhYmxlTGlzdGVuZXJSZW1vdmVDYWxsYmFjaz1udWxsfX1zZXRFeHBhbmRhYmxlKCl7aWYodGhpcy5pc1BhZGRpbmcoKSlyZXR1cm47bGV0IGU9ITEsdD0hMSxpPSExO2NvbnN0IHM9dGhpcy5maW5kQ2hpbGRyZW5SZW1vdmluZ1BhZGRpbmcoKTtmb3IobGV0IHI9MCxvPXMubGVuZ3RoO3I8bztyKyspe2NvbnN0IG89c1tyXTtpZighby5pc1Zpc2libGUoKSljb250aW51ZTtjb25zdCBuPW8uZ2V0Q29sdW1uR3JvdXBTaG93KCk7Im9wZW4iPT09bj8oZT0hMCxpPSEwKToiY2xvc2VkIj09PW4/KHQ9ITAsaT0hMCk6KGU9ITAsdD0hMCl9Y29uc3Qgcj1lJiZ0JiZpO2lmKHRoaXMuZXhwYW5kYWJsZSE9PXIpe3RoaXMuZXhwYW5kYWJsZT1yO2NvbnN0IGU9e3R5cGU6eGUuRVZFTlRfRVhQQU5EQUJMRV9DSEFOR0VEfTt0aGlzLmxvY2FsRXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9fWZpbmRDaGlsZHJlblJlbW92aW5nUGFkZGluZygpe2NvbnN0IGU9W10sdD1pPT57aS5mb3JFYWNoKGk9PntpIGluc3RhbmNlb2YgeGUmJmkuaXNQYWRkaW5nKCk/dChpLmNoaWxkcmVuKTplLnB1c2goaSl9KX07cmV0dXJuIHQodGhpcy5jaGlsZHJlbiksZX1vbkNvbHVtblZpc2liaWxpdHlDaGFuZ2VkKCl7dGhpcy5zZXRFeHBhbmRhYmxlKCl9YWRkRXZlbnRMaXN0ZW5lcihlLHQpe3RoaXMubG9jYWxFdmVudFNlcnZpY2UuYWRkRXZlbnRMaXN0ZW5lcihlLHQpfXJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0KXt0aGlzLmxvY2FsRXZlbnRTZXJ2aWNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0KX19eGUuRVZFTlRfRVhQQU5ERURfQ0hBTkdFRD0iZXhwYW5kZWRDaGFuZ2VkIix4ZS5FVkVOVF9FWFBBTkRBQkxFX0NIQU5HRUQ9ImV4cGFuZGFibGVDaGFuZ2VkIixSZShbbGVdLHhlLnByb3RvdHlwZSwiZGVzdHJveSIsbnVsbCk7Y29uc3QgVGU9e251bWVyaWNDb2x1bW46e2hlYWRlckNsYXNzOiJhZy1yaWdodC1hbGlnbmVkLWhlYWRlciIsY2VsbENsYXNzOiJhZy1yaWdodC1hbGlnbmVkLWNlbGwifSxyaWdodEFsaWduZWQ6e2hlYWRlckNsYXNzOiJhZy1yaWdodC1hbGlnbmVkLWhlYWRlciIsY2VsbENsYXNzOiJhZy1yaWdodC1hbGlnbmVkLWNlbGwifX07ZnVuY3Rpb24gRGUoZSl7cmV0dXJuIG51bGwhPWUmJmUubGVuZ3RoPjB9ZnVuY3Rpb24gT2UoZSl7aWYoZSYmZS5sZW5ndGgpcmV0dXJuIGVbZS5sZW5ndGgtMV19ZnVuY3Rpb24gQWUoZSx0LGkpe3JldHVybiBudWxsPT1lJiZudWxsPT10fHxudWxsIT1lJiZudWxsIT10JiZlLmxlbmd0aD09PXQubGVuZ3RoJiZlLmV2ZXJ5KChlLHMpPT5pP2koZSx0W3NdKTp0W3NdPT09ZSl9ZnVuY3Rpb24gUGUoZSx0KXtyZXR1cm4gQWUoZSx0KX1mdW5jdGlvbiBNZShlKXtyZXR1cm4gZS5zb3J0KChlLHQpPT5lLXQpfWZ1bmN0aW9uIExlKGUsdCl7aWYoZSlmb3IobGV0IGk9ZS5sZW5ndGgtMjtpPj0wO2ktLSl7Y29uc3Qgcz1lW2ldPT09dCxyPWVbaSsxXT09PXQ7cyYmciYmZS5zcGxpY2UoaSsxLDEpfX1mdW5jdGlvbiBGZShlLHQpe2NvbnN0IGk9ZS5pbmRleE9mKHQpO2k+PTAmJihlW2ldPWVbZS5sZW5ndGgtMV0sZS5wb3AoKSl9ZnVuY3Rpb24gSWUoZSx0KXtjb25zdCBpPWUuaW5kZXhPZih0KTtpPj0wJiZlLnNwbGljZShpLDEpfWZ1bmN0aW9uIE5lKGUsdCl7Zm9yKGxldCBpPTA7aTx0Lmxlbmd0aDtpKyspRmUoZSx0W2ldKX1mdW5jdGlvbiBHZShlLHQpe2ZvcihsZXQgaT0wO2k8dC5sZW5ndGg7aSsrKUllKGUsdFtpXSl9ZnVuY3Rpb24ga2UoZSx0LGkpe2Uuc3BsaWNlKGksMCx0KX1mdW5jdGlvbiBfZShlLHQsaSl7aWYobnVsbCE9ZSYmbnVsbCE9dClmb3IobGV0IHM9dC5sZW5ndGgtMTtzPj0wO3MtLSl7a2UoZSx0W3NdLGkpfX1mdW5jdGlvbiBWZShlLHQsaSl7R2UoZSx0KSx0LnNsaWNlKCkucmV2ZXJzZSgpLmZvckVhY2godD0+a2UoZSx0LGkpKX1mdW5jdGlvbiBCZShlLHQpe3JldHVybiBlLmluZGV4T2YodCk+LTF9ZnVuY3Rpb24gSGUoZSl7cmV0dXJuW10uY29uY2F0LmFwcGx5KFtdLGUpfWZ1bmN0aW9uIFdlKGUsdCl7bnVsbCE9dCYmbnVsbCE9ZSYmdC5mb3JFYWNoKHQ9PmUucHVzaCh0KSl9ZnVuY3Rpb24gamUoZSl7cmV0dXJuIGUubWFwKHgpfWZ1bmN0aW9uIFVlKGUsdCl7aWYobnVsbCE9ZSlmb3IobGV0IGk9ZS5sZW5ndGgtMTtpPj0wO2ktLSl0KGVbaV0saSl9Y29uc3QgemU9WyJ0b3VjaHN0YXJ0IiwidG91Y2hlbmQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGNhbmNlbCIsInNjcm9sbCJdLEtlPXt9O2Z1bmN0aW9uIFllKGUpe2UuX19hZ19HcmlkX1N0b3BfUHJvcGFnYXRpb249ITB9ZnVuY3Rpb24gJGUoZSl7cmV0dXJuITA9PT1lLl9fYWdfR3JpZF9TdG9wX1Byb3BhZ2F0aW9ufWNvbnN0IFhlPSgoKT0+e2NvbnN0IGU9e3NlbGVjdDoiaW5wdXQiLGNoYW5nZToiaW5wdXQiLHN1Ym1pdDoiZm9ybSIscmVzZXQ6ImZvcm0iLGVycm9yOiJpbWciLGxvYWQ6ImltZyIsYWJvcnQ6ImltZyJ9O3JldHVybiB0PT57aWYoImJvb2xlYW4iPT10eXBlb2YgS2VbdF0pcmV0dXJuIEtlW3RdO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlW3RdfHwiZGl2Iik7cmV0dXJuIEtlW3Q9Im9uIit0XT10IGluIGl9fSkoKTtmdW5jdGlvbiBxZShlLHQsaSl7bGV0IHM9dDtmb3IoO3M7KXtjb25zdCB0PWUuZ2V0RG9tRGF0YShzLGkpO2lmKHQpcmV0dXJuIHQ7cz1zLnBhcmVudEVsZW1lbnR9cmV0dXJuIG51bGx9ZnVuY3Rpb24gWmUoZSx0KXtyZXR1cm4hKCF0fHwhZSkmJkplKHQpLmluZGV4T2YoZSk+PTB9ZnVuY3Rpb24gUWUoZSl7Y29uc3QgdD1bXTtsZXQgaT1lLnRhcmdldDtmb3IoO2k7KXQucHVzaChpKSxpPWkucGFyZW50RWxlbWVudDtyZXR1cm4gdH1mdW5jdGlvbiBKZShlKXtjb25zdCB0PWU7cmV0dXJuIHQucGF0aD90LnBhdGg6dC5jb21wb3NlZFBhdGg/dC5jb21wb3NlZFBhdGgoKTpRZSh0KX1mdW5jdGlvbiBldChlLHQsaSxzKXtjb25zdCByPUJlKHplLGkpP3twYXNzaXZlOiEwfTp2b2lkIDA7ZSYmZS5hZGRFdmVudExpc3RlbmVyJiZlLmFkZEV2ZW50TGlzdGVuZXIodCxpLHMscil9dmFyIHR0PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGl0e2NvbnN0cnVjdG9yKCl7dGhpcy5kZXN0cm95RnVuY3Rpb25zPVtdLHRoaXMuZGVzdHJveWVkPSExLHRoaXMuX192X3NraXA9ITAsdGhpcy5sYXN0Q2hhbmdlU2V0SWRMb29rdXA9e30sdGhpcy5wcm9wZXJ0eUxpc3RlbmVySWQ9MCx0aGlzLmlzQWxpdmU9KCk9PiF0aGlzLmRlc3Ryb3llZH1nZXRGcmFtZXdvcmtPdmVycmlkZXMoKXtyZXR1cm4gdGhpcy5mcmFtZXdvcmtPdmVycmlkZXN9Z2V0Q29udGV4dCgpe3JldHVybiB0aGlzLmNvbnRleHR9ZGVzdHJveSgpe3RoaXMuZGVzdHJveUZ1bmN0aW9ucy5mb3JFYWNoKGU9PmUoKSksdGhpcy5kZXN0cm95RnVuY3Rpb25zLmxlbmd0aD0wLHRoaXMuZGVzdHJveWVkPSEwLHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTppdC5FVkVOVF9ERVNUUk9ZRUR9KX1hZGRFdmVudExpc3RlbmVyKGUsdCl7dGhpcy5sb2NhbEV2ZW50U2VydmljZXx8KHRoaXMubG9jYWxFdmVudFNlcnZpY2U9bmV3IHZlKSx0aGlzLmxvY2FsRXZlbnRTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoZSx0KX1yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl7dGhpcy5sb2NhbEV2ZW50U2VydmljZSYmdGhpcy5sb2NhbEV2ZW50U2VydmljZS5yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl9ZGlzcGF0Y2hFdmVudChlKXt0aGlzLmxvY2FsRXZlbnRTZXJ2aWNlJiZ0aGlzLmxvY2FsRXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9YWRkTWFuYWdlZExpc3RlbmVyKGUsdCxpKXtpZih0aGlzLmRlc3Ryb3llZClyZXR1cm47ZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50P2V0KHRoaXMuZ2V0RnJhbWV3b3JrT3ZlcnJpZGVzKCksZSx0LGkpOmUuYWRkRXZlbnRMaXN0ZW5lcih0LGkpO2NvbnN0IHM9KCk9PihlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxpKSx0aGlzLmRlc3Ryb3lGdW5jdGlvbnM9dGhpcy5kZXN0cm95RnVuY3Rpb25zLmZpbHRlcihlPT5lIT09cyksbnVsbCk7cmV0dXJuIHRoaXMuZGVzdHJveUZ1bmN0aW9ucy5wdXNoKHMpLHN9c2V0dXBHcmlkT3B0aW9uTGlzdGVuZXIoZSx0KXt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRFdmVudExpc3RlbmVyKGUsdCk7Y29uc3QgaT0oKT0+KHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0KSx0aGlzLmRlc3Ryb3lGdW5jdGlvbnM9dGhpcy5kZXN0cm95RnVuY3Rpb25zLmZpbHRlcihlPT5lIT09aSksbnVsbCk7cmV0dXJuIHRoaXMuZGVzdHJveUZ1bmN0aW9ucy5wdXNoKGkpLGl9YWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoZSx0KXtyZXR1cm4gdGhpcy5kZXN0cm95ZWQ/KCk9Pm51bGw6dGhpcy5zZXR1cEdyaWRPcHRpb25MaXN0ZW5lcihlLHQpfWFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhlLHQpe2lmKHRoaXMuZGVzdHJveWVkKXJldHVybjtjb25zdCBpPWUuam9pbigiLSIpK3RoaXMucHJvcGVydHlMaXN0ZW5lcklkKysscz1lPT57aWYoZS5jaGFuZ2VTZXQpe2lmKGUuY2hhbmdlU2V0JiZlLmNoYW5nZVNldC5pZD09PXRoaXMubGFzdENoYW5nZVNldElkTG9va3VwW2ldKXJldHVybjt0aGlzLmxhc3RDaGFuZ2VTZXRJZExvb2t1cFtpXT1lLmNoYW5nZVNldC5pZH1jb25zdCBzPXt0eXBlOiJncmlkUHJvcGVydHlDaGFuZ2VkIixjaGFuZ2VTZXQ6ZS5jaGFuZ2VTZXQsc291cmNlOmUuc291cmNlfTt0KHMpfTtlLmZvckVhY2goZT0+dGhpcy5zZXR1cEdyaWRPcHRpb25MaXN0ZW5lcihlLHMpKX1hZGREZXN0cm95RnVuYyhlKXt0aGlzLmlzQWxpdmUoKT90aGlzLmRlc3Ryb3lGdW5jdGlvbnMucHVzaChlKTplKCl9Y3JlYXRlTWFuYWdlZEJlYW4oZSx0KXtjb25zdCBpPXRoaXMuY3JlYXRlQmVhbihlLHQpO3JldHVybiB0aGlzLmFkZERlc3Ryb3lGdW5jKHRoaXMuZGVzdHJveUJlYW4uYmluZCh0aGlzLGUsdCkpLGl9Y3JlYXRlQmVhbihlLHQsaSl7cmV0dXJuKHR8fHRoaXMuZ2V0Q29udGV4dCgpKS5jcmVhdGVCZWFuKGUsaSl9ZGVzdHJveUJlYW4oZSx0KXtyZXR1cm4odHx8dGhpcy5nZXRDb250ZXh0KCkpLmRlc3Ryb3lCZWFuKGUpfWRlc3Ryb3lCZWFucyhlLHQpe3JldHVybiBlJiZlLmZvckVhY2goZT0+dGhpcy5kZXN0cm95QmVhbihlLHQpKSxbXX19aXQuRVZFTlRfREVTVFJPWUVEPSJkZXN0cm95ZWQiLHR0KFtjZSgiZnJhbWV3b3JrT3ZlcnJpZGVzIildLGl0LnByb3RvdHlwZSwiZnJhbWV3b3JrT3ZlcnJpZGVzIix2b2lkIDApLHR0KFtjZSgiY29udGV4dCIpXSxpdC5wcm90b3R5cGUsImNvbnRleHQiLHZvaWQgMCksdHQoW2NlKCJldmVudFNlcnZpY2UiKV0saXQucHJvdG90eXBlLCJldmVudFNlcnZpY2UiLHZvaWQgMCksdHQoW2NlKCJncmlkT3B0aW9uc1NlcnZpY2UiKV0saXQucHJvdG90eXBlLCJncmlkT3B0aW9uc1NlcnZpY2UiLHZvaWQgMCksdHQoW2NlKCJsb2NhbGVTZXJ2aWNlIildLGl0LnByb3RvdHlwZSwibG9jYWxlU2VydmljZSIsdm9pZCAwKSx0dChbY2UoImVudmlyb25tZW50IildLGl0LnByb3RvdHlwZSwiZW52aXJvbm1lbnQiLHZvaWQgMCksdHQoW2xlXSxpdC5wcm90b3R5cGUsImRlc3Ryb3kiLG51bGwpO3ZhciBzdD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufSxydD1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3QoaSxzLGUpfX07bGV0IG90PWNsYXNzIGV4dGVuZHMgaXR7c2V0QmVhbnMoZSl7dGhpcy5sb2dnZXI9ZS5jcmVhdGUoIkNvbHVtbkZhY3RvcnkiKX1jcmVhdGVDb2x1bW5UcmVlKGUsdCxpLHMpe2NvbnN0IHI9bmV3IEwse2V4aXN0aW5nQ29sczpvLGV4aXN0aW5nR3JvdXBzOm4sZXhpc3RpbmdDb2xLZXlzOmF9PXRoaXMuZXh0cmFjdEV4aXN0aW5nVHJlZURhdGEoaSk7ci5hZGRFeGlzdGluZ0tleXMoYSk7Y29uc3QgbD10aGlzLnJlY3Vyc2l2ZWx5Q3JlYXRlQ29sdW1ucyhlLDAsdCxvLHIsbixzKSxkPXRoaXMuZmluZE1heERlcHQobCwwKTt0aGlzLmxvZ2dlci5sb2coIk51bWJlciBvZiBsZXZlbHMgZm9yIGdyb3VwZWQgY29sdW1ucyBpcyAiK2QpO2NvbnN0IGM9dGhpcy5iYWxhbmNlQ29sdW1uVHJlZShsLDAsZCxyKTtyZXR1cm4gdGhpcy5jb2x1bW5VdGlscy5kZXB0aEZpcnN0T3JpZ2luYWxUcmVlU2VhcmNoKG51bGwsYywoZSx0KT0+e2UgaW5zdGFuY2VvZiB4ZSYmZS5zZXR1cEV4cGFuZGFibGUoKSxlLnNldE9yaWdpbmFsUGFyZW50KHQpfSkse2NvbHVtblRyZWU6Yyx0cmVlRGVwdDpkfX1leHRyYWN0RXhpc3RpbmdUcmVlRGF0YShlKXtjb25zdCB0PVtdLGk9W10scz1bXTtyZXR1cm4gZSYmdGhpcy5jb2x1bW5VdGlscy5kZXB0aEZpcnN0T3JpZ2luYWxUcmVlU2VhcmNoKG51bGwsZSxlPT57aWYoZSBpbnN0YW5jZW9mIHhlKXtjb25zdCB0PWU7aS5wdXNoKHQpfWVsc2V7Y29uc3QgaT1lO3MucHVzaChpLmdldElkKCkpLHQucHVzaChpKX19KSx7ZXhpc3RpbmdDb2xzOnQsZXhpc3RpbmdHcm91cHM6aSxleGlzdGluZ0NvbEtleXM6c319Y3JlYXRlRm9yQXV0b0dyb3VwcyhlLHQpe3JldHVybiBlLm1hcChlPT50aGlzLmNyZWF0ZUF1dG9Hcm91cFRyZWVJdGVtKHQsZSkpfWNyZWF0ZUF1dG9Hcm91cFRyZWVJdGVtKGUsdCl7Y29uc3QgaT10aGlzLmZpbmREZXB0aChlKTtsZXQgcz10O2ZvcihsZXQgZT1pLTE7ZT49MDtlLS0pe2NvbnN0IGk9bmV3IHhlKG51bGwsYEZBS0VfUEFUSF8ke3QuZ2V0SWQoKX19XyR7ZX1gLCEwLGUpO3RoaXMuY3JlYXRlQmVhbihpKSxpLnNldENoaWxkcmVuKFtzXSkscy5zZXRPcmlnaW5hbFBhcmVudChpKSxzPWl9cmV0dXJuIDA9PT1pJiZ0LnNldE9yaWdpbmFsUGFyZW50KG51bGwpLHN9ZmluZERlcHRoKGUpe2xldCB0PTAsaT1lO2Zvcig7aSYmaVswXSYmaVswXWluc3RhbmNlb2YgeGU7KXQrKyxpPWlbMF0uZ2V0Q2hpbGRyZW4oKTtyZXR1cm4gdH1iYWxhbmNlQ29sdW1uVHJlZShlLHQsaSxzKXtjb25zdCByPVtdO2ZvcihsZXQgbz0wO288ZS5sZW5ndGg7bysrKXtjb25zdCBuPWVbb107aWYobiBpbnN0YW5jZW9mIHhlKXtjb25zdCBlPW4sbz10aGlzLmJhbGFuY2VDb2x1bW5UcmVlKGUuZ2V0Q2hpbGRyZW4oKSx0KzEsaSxzKTtlLnNldENoaWxkcmVuKG8pLHIucHVzaChlKX1lbHNle2xldCBvLGE7Zm9yKGxldCBlPWktMTtlPj10O2UtLSl7Y29uc3QgZT1zLmdldFVuaXF1ZUtleShudWxsLG51bGwpLGk9dGhpcy5jcmVhdGVNZXJnZWRDb2xHcm91cERlZihudWxsKSxyPW5ldyB4ZShpLGUsITAsdCk7dGhpcy5jcmVhdGVCZWFuKHIpLGEmJmEuc2V0Q2hpbGRyZW4oW3JdKSxhPXIsb3x8KG89YSl9aWYobyYmYSl7ci5wdXNoKG8pO2lmKGUuc29tZShlPT5lIGluc3RhbmNlb2YgeGUpKXthLnNldENoaWxkcmVuKFtuXSk7Y29udGludWV9YS5zZXRDaGlsZHJlbihlKTticmVha31yLnB1c2gobil9fXJldHVybiByfWZpbmRNYXhEZXB0KGUsdCl7bGV0IGk9dDtmb3IobGV0IHM9MDtzPGUubGVuZ3RoO3MrKyl7Y29uc3Qgcj1lW3NdO2lmKHIgaW5zdGFuY2VvZiB4ZSl7Y29uc3QgZT1yLHM9dGhpcy5maW5kTWF4RGVwdChlLmdldENoaWxkcmVuKCksdCsxKTtpPHMmJihpPXMpfX1yZXR1cm4gaX1yZWN1cnNpdmVseUNyZWF0ZUNvbHVtbnMoZSx0LGkscyxyLG8sbil7aWYoIWUpcmV0dXJuW107Y29uc3QgYT1uZXcgQXJyYXkoZS5sZW5ndGgpO2ZvcihsZXQgbD0wO2w8YS5sZW5ndGg7bCsrKXtjb25zdCBkPWVbbF07dGhpcy5pc0NvbHVtbkdyb3VwKGQpP2FbbF09dGhpcy5jcmVhdGVDb2x1bW5Hcm91cChpLGQsdCxzLHIsbyxuKTphW2xdPXRoaXMuY3JlYXRlQ29sdW1uKGksZCxzLHIsbil9cmV0dXJuIGF9Y3JlYXRlQ29sdW1uR3JvdXAoZSx0LGkscyxyLG8sbil7Y29uc3QgYT10aGlzLmNyZWF0ZU1lcmdlZENvbEdyb3VwRGVmKHQpLGw9ci5nZXRVbmlxdWVLZXkoYS5ncm91cElkfHxudWxsLG51bGwpLGQ9bmV3IHhlKGEsbCwhMSxpKTt0aGlzLmNyZWF0ZUJlYW4oZCk7Y29uc3QgYz10aGlzLmZpbmRFeGlzdGluZ0dyb3VwKHQsbyk7YyYmby5zcGxpY2UoYy5pZHgsMSk7bGV0IGg9bnVsbD09Yz92b2lkIDA6Yy5ncm91cDtoJiZkLnNldEV4cGFuZGVkKGguaXNFeHBhbmRlZCgpKTtjb25zdCB1PXRoaXMucmVjdXJzaXZlbHlDcmVhdGVDb2x1bW5zKGEuY2hpbGRyZW4saSsxLGUscyxyLG8sbik7cmV0dXJuIGQuc2V0Q2hpbGRyZW4odSksZH1jcmVhdGVNZXJnZWRDb2xHcm91cERlZihlKXtjb25zdCB0PXt9O3JldHVybiBPYmplY3QuYXNzaWduKHQsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJkZWZhdWx0Q29sR3JvdXBEZWYiKSksT2JqZWN0LmFzc2lnbih0LGUpLHR9Y3JlYXRlQ29sdW1uKGUsdCxpLHMscil7Y29uc3Qgbz10aGlzLmZpbmRFeGlzdGluZ0NvbHVtbih0LGkpO28mJihudWxsPT1pfHxpLnNwbGljZShvLmlkeCwxKSk7bGV0IG49bnVsbD09bz92b2lkIDA6by5jb2x1bW47aWYobil7Y29uc3QgZT10aGlzLmFkZENvbHVtbkRlZmF1bHRBbmRUeXBlcyh0LG4uZ2V0Q29sSWQoKSk7bi5zZXRDb2xEZWYoZSx0LHIpLHRoaXMuYXBwbHlDb2x1bW5TdGF0ZShuLGUscil9ZWxzZXtjb25zdCBpPXMuZ2V0VW5pcXVlS2V5KHQuY29sSWQsdC5maWVsZCkscj10aGlzLmFkZENvbHVtbkRlZmF1bHRBbmRUeXBlcyh0LGkpO249bmV3IEVlKHIsdCxpLGUpLHRoaXMuY29udGV4dC5jcmVhdGVCZWFuKG4pfXJldHVybiB0aGlzLmRhdGFUeXBlU2VydmljZS5hZGRDb2x1bW5MaXN0ZW5lcnMobiksbn1hcHBseUNvbHVtblN0YXRlKGUsdCxpKXtjb25zdCBzPVQodC5mbGV4KTt2b2lkIDAhPT1zJiZlLnNldEZsZXgocyk7aWYoZS5nZXRGbGV4KCk8PTApe2NvbnN0IHM9VCh0LndpZHRoKTtpZihudWxsIT1zKWUuc2V0QWN0dWFsV2lkdGgocyxpKTtlbHNle2NvbnN0IHQ9ZS5nZXRBY3R1YWxXaWR0aCgpO2Uuc2V0QWN0dWFsV2lkdGgodCxpKX19dm9pZCAwIT09dC5zb3J0JiYoImFzYyI9PXQuc29ydHx8ImRlc2MiPT10LnNvcnQ/ZS5zZXRTb3J0KHQuc29ydCxpKTplLnNldFNvcnQodm9pZCAwLGkpKTtjb25zdCByPVQodC5zb3J0SW5kZXgpO3ZvaWQgMCE9PXImJmUuc2V0U29ydEluZGV4KHIpO2NvbnN0IG89RCh0LmhpZGUpO3ZvaWQgMCE9PW8mJmUuc2V0VmlzaWJsZSghbyxpKSx2b2lkIDAhPT10LnBpbm5lZCYmZS5zZXRQaW5uZWQodC5waW5uZWQpfWZpbmRFeGlzdGluZ0NvbHVtbihlLHQpe2lmKHQpZm9yKGxldCBpPTA7aTx0Lmxlbmd0aDtpKyspe2NvbnN0IHM9dFtpXS5nZXRVc2VyUHJvdmlkZWRDb2xEZWYoKTtpZighcyljb250aW51ZTtpZihudWxsIT1lLmNvbElkKXtpZih0W2ldLmdldElkKCk9PT1lLmNvbElkKXJldHVybntpZHg6aSxjb2x1bW46dFtpXX07Y29udGludWV9aWYobnVsbCE9ZS5maWVsZCl7aWYocy5maWVsZD09PWUuZmllbGQpcmV0dXJue2lkeDppLGNvbHVtbjp0W2ldfX1lbHNlIGlmKHM9PT1lKXJldHVybntpZHg6aSxjb2x1bW46dFtpXX19fWZpbmRFeGlzdGluZ0dyb3VwKGUsdCl7aWYobnVsbCE9ZS5ncm91cElkKWZvcihsZXQgaT0wO2k8dC5sZW5ndGg7aSsrKXtjb25zdCBzPXRbaV07aWYocy5nZXRDb2xHcm91cERlZigpJiZzLmdldElkKCk9PT1lLmdyb3VwSWQpcmV0dXJue2lkeDppLGdyb3VwOnN9fX1hZGRDb2x1bW5EZWZhdWx0QW5kVHlwZXMoZSx0KXtjb25zdCBpPXt9O2soaSx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImRlZmF1bHRDb2xEZWYiKSwhMSwhMCk7Y29uc3Qgcz10aGlzLmRhdGFUeXBlU2VydmljZS51cGRhdGVDb2xEZWZBbmRHZXRDb2x1bW5UeXBlKGksZSx0KTtzJiZ0aGlzLmFzc2lnbkNvbHVtblR5cGVzKHMsaSksayhpLGUsITEsITApO2NvbnN0IHI9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJhdXRvR3JvdXBDb2x1bW5EZWYiKSxvPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzQ29sdW1uc1NvcnRpbmdDb3VwbGVkVG9Hcm91cCgpO3JldHVybiBlLnJvd0dyb3VwJiZyJiZvJiZrKGkse3NvcnQ6ci5zb3J0LGluaXRpYWxTb3J0OnIuaW5pdGlhbFNvcnR9LCExLCEwKSx0aGlzLmRhdGFUeXBlU2VydmljZS52YWxpZGF0ZUNvbERlZihpKSxpfWFzc2lnbkNvbHVtblR5cGVzKGUsdCl7aWYoIWUubGVuZ3RoKXJldHVybjtjb25zdCBpPU9iamVjdC5hc3NpZ24oe30sVGUpO0YodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjb2x1bW5UeXBlcyIpfHx7fSwoZSx0KT0+e2lmKGUgaW4gaSljb25zb2xlLndhcm4oYEFHIEdyaWQ6IHRoZSBjb2x1bW4gdHlwZSAnJHtlfScgaXMgYSBkZWZhdWx0IGNvbHVtbiB0eXBlIGFuZCBjYW5ub3QgYmUgb3ZlcnJpZGRlbi5gKTtlbHNle3QudHlwZSYmaigiQ29sdW1uIHR5cGUgZGVmaW5pdGlvbnMgJ2NvbHVtblR5cGVzJyB3aXRoIGEgJ3R5cGUnIGF0dHJpYnV0ZSBhcmUgbm90IHN1cHBvcnRlZCBiZWNhdXNlIGEgY29sdW1uIHR5cGUgY2Fubm90IHJlZmVyIHRvIGFub3RoZXIgY29sdW1uIHR5cGUuIE9ubHkgY29sdW1uIGRlZmluaXRpb25zICdjb2x1bW5EZWZzJyBjYW4gdXNlIHRoZSAndHlwZScgYXR0cmlidXRlIHRvIHJlZmVyIHRvIGEgY29sdW1uIHR5cGUuIiksaVtlXT10fX0pLGUuZm9yRWFjaChlPT57Y29uc3Qgcz1pW2UudHJpbSgpXTtzP2sodCxzLCExLCEwKTpjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGNvbERlZi50eXBlICciK2UrIicgZG9lcyBub3QgY29ycmVzcG9uZCB0byBkZWZpbmVkIGdyaWRPcHRpb25zLmNvbHVtblR5cGVzIil9KX1pc0NvbHVtbkdyb3VwKGUpe3JldHVybiB2b2lkIDAhPT1lLmNoaWxkcmVufX07c3QoW2NlKCJjb2x1bW5VdGlscyIpXSxvdC5wcm90b3R5cGUsImNvbHVtblV0aWxzIix2b2lkIDApLHN0KFtjZSgiZGF0YVR5cGVTZXJ2aWNlIildLG90LnByb3RvdHlwZSwiZGF0YVR5cGVTZXJ2aWNlIix2b2lkIDApLHN0KFtydCgwLHBlKCJsb2dnZXJGYWN0b3J5IikpXSxvdC5wcm90b3R5cGUsInNldEJlYW5zIixudWxsKSxvdD1zdChbZGUoImNvbHVtbkZhY3RvcnkiKV0sb3QpO3ZhciBudD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBhdHtjb25zdHJ1Y3RvcihlLHQsaSxzKXt0aGlzLmRpc3BsYXllZENoaWxkcmVuPVtdLHRoaXMubG9jYWxFdmVudFNlcnZpY2U9bmV3IHZlLHRoaXMuZ3JvdXBJZD10LHRoaXMucGFydElkPWksdGhpcy5wcm92aWRlZENvbHVtbkdyb3VwPWUsdGhpcy5waW5uZWQ9c31zdGF0aWMgY3JlYXRlVW5pcXVlSWQoZSx0KXtyZXR1cm4gZSsiXyIrdH1yZXNldCgpe3RoaXMucGFyZW50PW51bGwsdGhpcy5jaGlsZHJlbj1udWxsLHRoaXMuZGlzcGxheWVkQ2hpbGRyZW49bnVsbH1nZXRQYXJlbnQoKXtyZXR1cm4gdGhpcy5wYXJlbnR9c2V0UGFyZW50KGUpe3RoaXMucGFyZW50PWV9Z2V0VW5pcXVlSWQoKXtyZXR1cm4gYXQuY3JlYXRlVW5pcXVlSWQodGhpcy5ncm91cElkLHRoaXMucGFydElkKX1pc0VtcHR5R3JvdXAoKXtyZXR1cm4gMD09PXRoaXMuZGlzcGxheWVkQ2hpbGRyZW4ubGVuZ3RofWlzTW92aW5nKCl7Y29uc3QgZT10aGlzLmdldFByb3ZpZGVkQ29sdW1uR3JvdXAoKS5nZXRMZWFmQ29sdW1ucygpO3JldHVybiEoIWV8fDA9PT1lLmxlbmd0aCkmJmUuZXZlcnkoZT0+ZS5pc01vdmluZygpKX1jaGVja0xlZnQoKXtpZih0aGlzLmRpc3BsYXllZENoaWxkcmVuLmZvckVhY2goZT0+e2UgaW5zdGFuY2VvZiBhdCYmZS5jaGVja0xlZnQoKX0pLHRoaXMuZGlzcGxheWVkQ2hpbGRyZW4ubGVuZ3RoPjApaWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKSl7Y29uc3QgZT1PZSh0aGlzLmRpc3BsYXllZENoaWxkcmVuKS5nZXRMZWZ0KCk7dGhpcy5zZXRMZWZ0KGUpfWVsc2V7Y29uc3QgZT10aGlzLmRpc3BsYXllZENoaWxkcmVuWzBdLmdldExlZnQoKTt0aGlzLnNldExlZnQoZSl9ZWxzZSB0aGlzLnNldExlZnQobnVsbCl9Z2V0TGVmdCgpe3JldHVybiB0aGlzLmxlZnR9Z2V0T2xkTGVmdCgpe3JldHVybiB0aGlzLm9sZExlZnR9c2V0TGVmdChlKXt0aGlzLm9sZExlZnQ9dGhpcy5sZWZ0LHRoaXMubGVmdCE9PWUmJih0aGlzLmxlZnQ9ZSx0aGlzLmxvY2FsRXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVBZ0V2ZW50KGF0LkVWRU5UX0xFRlRfQ0hBTkdFRCkpKX1nZXRQaW5uZWQoKXtyZXR1cm4gdGhpcy5waW5uZWR9Y3JlYXRlQWdFdmVudChlKXtyZXR1cm57dHlwZTplfX1hZGRFdmVudExpc3RlbmVyKGUsdCl7dGhpcy5sb2NhbEV2ZW50U2VydmljZS5hZGRFdmVudExpc3RlbmVyKGUsdCl9cmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpe3RoaXMubG9jYWxFdmVudFNlcnZpY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpfWdldEdyb3VwSWQoKXtyZXR1cm4gdGhpcy5ncm91cElkfWdldFBhcnRJZCgpe3JldHVybiB0aGlzLnBhcnRJZH1pc0NoaWxkSW5UaGlzR3JvdXBEZWVwU2VhcmNoKGUpe2xldCB0PSExO3JldHVybiB0aGlzLmNoaWxkcmVuLmZvckVhY2goaT0+e2U9PT1pJiYodD0hMCksaSBpbnN0YW5jZW9mIGF0JiZpLmlzQ2hpbGRJblRoaXNHcm91cERlZXBTZWFyY2goZSkmJih0PSEwKX0pLHR9Z2V0QWN0dWFsV2lkdGgoKXtsZXQgZT0wO3JldHVybiB0aGlzLmRpc3BsYXllZENoaWxkcmVuJiZ0aGlzLmRpc3BsYXllZENoaWxkcmVuLmZvckVhY2godD0+e2UrPXQuZ2V0QWN0dWFsV2lkdGgoKX0pLGV9aXNSZXNpemFibGUoKXtpZighdGhpcy5kaXNwbGF5ZWRDaGlsZHJlbilyZXR1cm4hMTtsZXQgZT0hMTtyZXR1cm4gdGhpcy5kaXNwbGF5ZWRDaGlsZHJlbi5mb3JFYWNoKHQ9Pnt0LmlzUmVzaXphYmxlKCkmJihlPSEwKX0pLGV9Z2V0TWluV2lkdGgoKXtsZXQgZT0wO3JldHVybiB0aGlzLmRpc3BsYXllZENoaWxkcmVuLmZvckVhY2godD0+e2UrPXQuZ2V0TWluV2lkdGgoKXx8MH0pLGV9YWRkQ2hpbGQoZSl7dGhpcy5jaGlsZHJlbnx8KHRoaXMuY2hpbGRyZW49W10pLHRoaXMuY2hpbGRyZW4ucHVzaChlKX1nZXREaXNwbGF5ZWRDaGlsZHJlbigpe3JldHVybiB0aGlzLmRpc3BsYXllZENoaWxkcmVufWdldExlYWZDb2x1bW5zKCl7Y29uc3QgZT1bXTtyZXR1cm4gdGhpcy5hZGRMZWFmQ29sdW1ucyhlKSxlfWdldERpc3BsYXllZExlYWZDb2x1bW5zKCl7Y29uc3QgZT1bXTtyZXR1cm4gdGhpcy5hZGREaXNwbGF5ZWRMZWFmQ29sdW1ucyhlKSxlfWdldERlZmluaXRpb24oKXtyZXR1cm4gdGhpcy5wcm92aWRlZENvbHVtbkdyb3VwLmdldENvbEdyb3VwRGVmKCl9Z2V0Q29sR3JvdXBEZWYoKXtyZXR1cm4gdGhpcy5wcm92aWRlZENvbHVtbkdyb3VwLmdldENvbEdyb3VwRGVmKCl9aXNQYWRkaW5nKCl7cmV0dXJuIHRoaXMucHJvdmlkZWRDb2x1bW5Hcm91cC5pc1BhZGRpbmcoKX1pc0V4cGFuZGFibGUoKXtyZXR1cm4gdGhpcy5wcm92aWRlZENvbHVtbkdyb3VwLmlzRXhwYW5kYWJsZSgpfWlzRXhwYW5kZWQoKXtyZXR1cm4gdGhpcy5wcm92aWRlZENvbHVtbkdyb3VwLmlzRXhwYW5kZWQoKX1zZXRFeHBhbmRlZChlKXt0aGlzLnByb3ZpZGVkQ29sdW1uR3JvdXAuc2V0RXhwYW5kZWQoZSl9YWRkRGlzcGxheWVkTGVhZkNvbHVtbnMoZSl7dGhpcy5kaXNwbGF5ZWRDaGlsZHJlbi5mb3JFYWNoKHQ9Pnt0IGluc3RhbmNlb2YgRWU/ZS5wdXNoKHQpOnQgaW5zdGFuY2VvZiBhdCYmdC5hZGREaXNwbGF5ZWRMZWFmQ29sdW1ucyhlKX0pfWFkZExlYWZDb2x1bW5zKGUpe3RoaXMuY2hpbGRyZW4uZm9yRWFjaCh0PT57dCBpbnN0YW5jZW9mIEVlP2UucHVzaCh0KTp0IGluc3RhbmNlb2YgYXQmJnQuYWRkTGVhZkNvbHVtbnMoZSl9KX1nZXRDaGlsZHJlbigpe3JldHVybiB0aGlzLmNoaWxkcmVufWdldENvbHVtbkdyb3VwU2hvdygpe3JldHVybiB0aGlzLnByb3ZpZGVkQ29sdW1uR3JvdXAuZ2V0Q29sdW1uR3JvdXBTaG93KCl9Z2V0UHJvdmlkZWRDb2x1bW5Hcm91cCgpe3JldHVybiB0aGlzLnByb3ZpZGVkQ29sdW1uR3JvdXB9Z2V0UGFkZGluZ0xldmVsKCl7Y29uc3QgZT10aGlzLmdldFBhcmVudCgpO3JldHVybiB0aGlzLmlzUGFkZGluZygpJiZlJiZlLmlzUGFkZGluZygpPzErZS5nZXRQYWRkaW5nTGV2ZWwoKTowfWNhbGN1bGF0ZURpc3BsYXllZENvbHVtbnMoKXt0aGlzLmRpc3BsYXllZENoaWxkcmVuPVtdO2xldCBlPXRoaXM7Zm9yKDtudWxsIT1lJiZlLmlzUGFkZGluZygpOyllPWUuZ2V0UGFyZW50KCk7aWYoISghIWUmJmUucHJvdmlkZWRDb2x1bW5Hcm91cC5pc0V4cGFuZGFibGUoKSkpcmV0dXJuIHRoaXMuZGlzcGxheWVkQ2hpbGRyZW49dGhpcy5jaGlsZHJlbix2b2lkIHRoaXMubG9jYWxFdmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUFnRXZlbnQoYXQuRVZFTlRfRElTUExBWUVEX0NISUxEUkVOX0NIQU5HRUQpKTt0aGlzLmNoaWxkcmVuLmZvckVhY2godD0+e2lmKHQgaW5zdGFuY2VvZiBhdCYmKCF0LmRpc3BsYXllZENoaWxkcmVufHwhdC5kaXNwbGF5ZWRDaGlsZHJlbi5sZW5ndGgpKXJldHVybjtzd2l0Y2godC5nZXRDb2x1bW5Hcm91cFNob3coKSl7Y2FzZSJvcGVuIjplLnByb3ZpZGVkQ29sdW1uR3JvdXAuaXNFeHBhbmRlZCgpJiZ0aGlzLmRpc3BsYXllZENoaWxkcmVuLnB1c2godCk7YnJlYWs7Y2FzZSJjbG9zZWQiOmUucHJvdmlkZWRDb2x1bW5Hcm91cC5pc0V4cGFuZGVkKCl8fHRoaXMuZGlzcGxheWVkQ2hpbGRyZW4ucHVzaCh0KTticmVhaztkZWZhdWx0OnRoaXMuZGlzcGxheWVkQ2hpbGRyZW4ucHVzaCh0KX19KSx0aGlzLmxvY2FsRXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVBZ0V2ZW50KGF0LkVWRU5UX0RJU1BMQVlFRF9DSElMRFJFTl9DSEFOR0VEKSl9fWF0LkVWRU5UX0xFRlRfQ0hBTkdFRD0ibGVmdENoYW5nZWQiLGF0LkVWRU5UX0RJU1BMQVlFRF9DSElMRFJFTl9DSEFOR0VEPSJkaXNwbGF5ZWRDaGlsZHJlbkNoYW5nZWQiLG50KFtjZSgiZ3JpZE9wdGlvbnNTZXJ2aWNlIildLGF0LnByb3RvdHlwZSwiZ3JpZE9wdGlvbnNTZXJ2aWNlIix2b2lkIDApO2NsYXNzIGx0e31sdC5FVkVOVF9DT0xVTU5fRVZFUllUSElOR19DSEFOR0VEPSJjb2x1bW5FdmVyeXRoaW5nQ2hhbmdlZCIsbHQuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVEPSJuZXdDb2x1bW5zTG9hZGVkIixsdC5FVkVOVF9DT0xVTU5fUElWT1RfTU9ERV9DSEFOR0VEPSJjb2x1bW5QaXZvdE1vZGVDaGFuZ2VkIixsdC5FVkVOVF9DT0xVTU5fUk9XX0dST1VQX0NIQU5HRUQ9ImNvbHVtblJvd0dyb3VwQ2hhbmdlZCIsbHQuRVZFTlRfRVhQQU5EX0NPTExBUFNFX0FMTD0iZXhwYW5kT3JDb2xsYXBzZUFsbCIsbHQuRVZFTlRfQ09MVU1OX1BJVk9UX0NIQU5HRUQ9ImNvbHVtblBpdm90Q2hhbmdlZCIsbHQuRVZFTlRfR1JJRF9DT0xVTU5TX0NIQU5HRUQ9ImdyaWRDb2x1bW5zQ2hhbmdlZCIsbHQuRVZFTlRfQ09MVU1OX1ZBTFVFX0NIQU5HRUQ9ImNvbHVtblZhbHVlQ2hhbmdlZCIsbHQuRVZFTlRfQ09MVU1OX01PVkVEPSJjb2x1bW5Nb3ZlZCIsbHQuRVZFTlRfQ09MVU1OX1ZJU0lCTEU9ImNvbHVtblZpc2libGUiLGx0LkVWRU5UX0NPTFVNTl9QSU5ORUQ9ImNvbHVtblBpbm5lZCIsbHQuRVZFTlRfQ09MVU1OX0dST1VQX09QRU5FRD0iY29sdW1uR3JvdXBPcGVuZWQiLGx0LkVWRU5UX0NPTFVNTl9SRVNJWkVEPSJjb2x1bW5SZXNpemVkIixsdC5FVkVOVF9ESVNQTEFZRURfQ09MVU1OU19DSEFOR0VEPSJkaXNwbGF5ZWRDb2x1bW5zQ2hhbmdlZCIsbHQuRVZFTlRfU1VQUFJFU1NfQ09MVU1OX01PVkVfQ0hBTkdFRD0ic3VwcHJlc3NNb3ZhYmxlQ29sdW1ucyIsbHQuRVZFTlRfU1VQUFJFU1NfTUVOVV9ISURFX0NIQU5HRUQ9InN1cHByZXNzTWVudUhpZGUiLGx0LkVWRU5UX1NVUFBSRVNTX0ZJRUxEX0RPVF9OT1RBVElPTj0ic3VwcHJlc3NGaWVsZERvdE5vdGF0aW9uIixsdC5FVkVOVF9WSVJUVUFMX0NPTFVNTlNfQ0hBTkdFRD0idmlydHVhbENvbHVtbnNDaGFuZ2VkIixsdC5FVkVOVF9DT0xVTU5fSEVBREVSX01PVVNFX09WRVI9ImNvbHVtbkhlYWRlck1vdXNlT3ZlciIsbHQuRVZFTlRfQ09MVU1OX0hFQURFUl9NT1VTRV9MRUFWRT0iY29sdW1uSGVhZGVyTW91c2VMZWF2ZSIsbHQuRVZFTlRfQ09MVU1OX0hFQURFUl9DTElDS0VEPSJjb2x1bW5IZWFkZXJDbGlja2VkIixsdC5FVkVOVF9DT0xVTU5fSEVBREVSX0NPTlRFWFRfTUVOVT0iY29sdW1uSGVhZGVyQ29udGV4dE1lbnUiLGx0LkVWRU5UX0FTWU5DX1RSQU5TQUNUSU9OU19GTFVTSEVEPSJhc3luY1RyYW5zYWN0aW9uc0ZsdXNoZWQiLGx0LkVWRU5UX1JPV19HUk9VUF9PUEVORUQ9InJvd0dyb3VwT3BlbmVkIixsdC5FVkVOVF9ST1dfREFUQV9VUERBVEVEPSJyb3dEYXRhVXBkYXRlZCIsbHQuRVZFTlRfUElOTkVEX1JPV19EQVRBX0NIQU5HRUQ9InBpbm5lZFJvd0RhdGFDaGFuZ2VkIixsdC5FVkVOVF9SQU5HRV9TRUxFQ1RJT05fQ0hBTkdFRD0icmFuZ2VTZWxlY3Rpb25DaGFuZ2VkIixsdC5FVkVOVF9DSEFSVF9DUkVBVEVEPSJjaGFydENyZWF0ZWQiLGx0LkVWRU5UX0NIQVJUX1JBTkdFX1NFTEVDVElPTl9DSEFOR0VEPSJjaGFydFJhbmdlU2VsZWN0aW9uQ2hhbmdlZCIsbHQuRVZFTlRfQ0hBUlRfT1BUSU9OU19DSEFOR0VEPSJjaGFydE9wdGlvbnNDaGFuZ2VkIixsdC5FVkVOVF9DSEFSVF9ERVNUUk9ZRUQ9ImNoYXJ0RGVzdHJveWVkIixsdC5FVkVOVF9UT09MX1BBTkVMX1ZJU0lCTEVfQ0hBTkdFRD0idG9vbFBhbmVsVmlzaWJsZUNoYW5nZWQiLGx0LkVWRU5UX1RPT0xfUEFORUxfU0laRV9DSEFOR0VEPSJ0b29sUGFuZWxTaXplQ2hhbmdlZCIsbHQuRVZFTlRfQ09MVU1OX1BBTkVMX0lURU1fRFJBR19TVEFSVD0iY29sdW1uUGFuZWxJdGVtRHJhZ1N0YXJ0IixsdC5FVkVOVF9DT0xVTU5fUEFORUxfSVRFTV9EUkFHX0VORD0iY29sdW1uUGFuZWxJdGVtRHJhZ0VuZCIsbHQuRVZFTlRfTU9ERUxfVVBEQVRFRD0ibW9kZWxVcGRhdGVkIixsdC5FVkVOVF9DVVRfU1RBUlQ9ImN1dFN0YXJ0IixsdC5FVkVOVF9DVVRfRU5EPSJjdXRFbmQiLGx0LkVWRU5UX1BBU1RFX1NUQVJUPSJwYXN0ZVN0YXJ0IixsdC5FVkVOVF9QQVNURV9FTkQ9InBhc3RlRW5kIixsdC5FVkVOVF9GSUxMX1NUQVJUPSJmaWxsU3RhcnQiLGx0LkVWRU5UX0ZJTExfRU5EPSJmaWxsRW5kIixsdC5FVkVOVF9SQU5HRV9ERUxFVEVfU1RBUlQ9InJhbmdlRGVsZXRlU3RhcnQiLGx0LkVWRU5UX1JBTkdFX0RFTEVURV9FTkQ9InJhbmdlRGVsZXRlRW5kIixsdC5FVkVOVF9VTkRPX1NUQVJURUQ9InVuZG9TdGFydGVkIixsdC5FVkVOVF9VTkRPX0VOREVEPSJ1bmRvRW5kZWQiLGx0LkVWRU5UX1JFRE9fU1RBUlRFRD0icmVkb1N0YXJ0ZWQiLGx0LkVWRU5UX1JFRE9fRU5ERUQ9InJlZG9FbmRlZCIsbHQuRVZFTlRfS0VZX1NIT1JUQ1VUX0NIQU5HRURfQ0VMTF9TVEFSVD0ia2V5U2hvcnRjdXRDaGFuZ2VkQ2VsbFN0YXJ0IixsdC5FVkVOVF9LRVlfU0hPUlRDVVRfQ0hBTkdFRF9DRUxMX0VORD0ia2V5U2hvcnRjdXRDaGFuZ2VkQ2VsbEVuZCIsbHQuRVZFTlRfQ0VMTF9DTElDS0VEPSJjZWxsQ2xpY2tlZCIsbHQuRVZFTlRfQ0VMTF9ET1VCTEVfQ0xJQ0tFRD0iY2VsbERvdWJsZUNsaWNrZWQiLGx0LkVWRU5UX0NFTExfTU9VU0VfRE9XTj0iY2VsbE1vdXNlRG93biIsbHQuRVZFTlRfQ0VMTF9DT05URVhUX01FTlU9ImNlbGxDb250ZXh0TWVudSIsbHQuRVZFTlRfQ0VMTF9WQUxVRV9DSEFOR0VEPSJjZWxsVmFsdWVDaGFuZ2VkIixsdC5FVkVOVF9DRUxMX0VESVRfUkVRVUVTVD0iY2VsbEVkaXRSZXF1ZXN0IixsdC5FVkVOVF9ST1dfVkFMVUVfQ0hBTkdFRD0icm93VmFsdWVDaGFuZ2VkIixsdC5FVkVOVF9DRUxMX0ZPQ1VTRUQ9ImNlbGxGb2N1c2VkIixsdC5FVkVOVF9DRUxMX0ZPQ1VTX0NMRUFSRUQ9ImNlbGxGb2N1c0NsZWFyZWQiLGx0LkVWRU5UX0ZVTExfV0lEVEhfUk9XX0ZPQ1VTRUQ9ImZ1bGxXaWR0aFJvd0ZvY3VzZWQiLGx0LkVWRU5UX1JPV19TRUxFQ1RFRD0icm93U2VsZWN0ZWQiLGx0LkVWRU5UX1NFTEVDVElPTl9DSEFOR0VEPSJzZWxlY3Rpb25DaGFuZ2VkIixsdC5FVkVOVF9UT09MVElQX1NIT1c9InRvb2x0aXBTaG93IixsdC5FVkVOVF9UT09MVElQX0hJREU9InRvb2x0aXBIaWRlIixsdC5FVkVOVF9DRUxMX0tFWV9ET1dOPSJjZWxsS2V5RG93biIsbHQuRVZFTlRfQ0VMTF9NT1VTRV9PVkVSPSJjZWxsTW91c2VPdmVyIixsdC5FVkVOVF9DRUxMX01PVVNFX09VVD0iY2VsbE1vdXNlT3V0IixsdC5FVkVOVF9GSUxURVJfQ0hBTkdFRD0iZmlsdGVyQ2hhbmdlZCIsbHQuRVZFTlRfRklMVEVSX01PRElGSUVEPSJmaWx0ZXJNb2RpZmllZCIsbHQuRVZFTlRfRklMVEVSX09QRU5FRD0iZmlsdGVyT3BlbmVkIixsdC5FVkVOVF9BRFZBTkNFRF9GSUxURVJfQlVJTERFUl9WSVNJQkxFX0NIQU5HRUQ9ImFkdmFuY2VkRmlsdGVyQnVpbGRlclZpc2libGVDaGFuZ2VkIixsdC5FVkVOVF9TT1JUX0NIQU5HRUQ9InNvcnRDaGFuZ2VkIixsdC5FVkVOVF9WSVJUVUFMX1JPV19SRU1PVkVEPSJ2aXJ0dWFsUm93UmVtb3ZlZCIsbHQuRVZFTlRfUk9XX0NMSUNLRUQ9InJvd0NsaWNrZWQiLGx0LkVWRU5UX1JPV19ET1VCTEVfQ0xJQ0tFRD0icm93RG91YmxlQ2xpY2tlZCIsbHQuRVZFTlRfR1JJRF9SRUFEWT0iZ3JpZFJlYWR5IixsdC5FVkVOVF9HUklEX1BSRV9ERVNUUk9ZRUQ9ImdyaWRQcmVEZXN0cm95ZWQiLGx0LkVWRU5UX0dSSURfU0laRV9DSEFOR0VEPSJncmlkU2l6ZUNoYW5nZWQiLGx0LkVWRU5UX1ZJRVdQT1JUX0NIQU5HRUQ9InZpZXdwb3J0Q2hhbmdlZCIsbHQuRVZFTlRfU0NST0xMQkFSX1dJRFRIX0NIQU5HRUQ9InNjcm9sbGJhcldpZHRoQ2hhbmdlZCIsbHQuRVZFTlRfRklSU1RfREFUQV9SRU5ERVJFRD0iZmlyc3REYXRhUmVuZGVyZWQiLGx0LkVWRU5UX0RSQUdfU1RBUlRFRD0iZHJhZ1N0YXJ0ZWQiLGx0LkVWRU5UX0RSQUdfU1RPUFBFRD0iZHJhZ1N0b3BwZWQiLGx0LkVWRU5UX0NIRUNLQk9YX0NIQU5HRUQ9ImNoZWNrYm94Q2hhbmdlZCIsbHQuRVZFTlRfUk9XX0VESVRJTkdfU1RBUlRFRD0icm93RWRpdGluZ1N0YXJ0ZWQiLGx0LkVWRU5UX1JPV19FRElUSU5HX1NUT1BQRUQ9InJvd0VkaXRpbmdTdG9wcGVkIixsdC5FVkVOVF9DRUxMX0VESVRJTkdfU1RBUlRFRD0iY2VsbEVkaXRpbmdTdGFydGVkIixsdC5FVkVOVF9DRUxMX0VESVRJTkdfU1RPUFBFRD0iY2VsbEVkaXRpbmdTdG9wcGVkIixsdC5FVkVOVF9CT0RZX1NDUk9MTD0iYm9keVNjcm9sbCIsbHQuRVZFTlRfQk9EWV9TQ1JPTExfRU5EPSJib2R5U2Nyb2xsRW5kIixsdC5FVkVOVF9IRUlHSFRfU0NBTEVfQ0hBTkdFRD0iaGVpZ2h0U2NhbGVDaGFuZ2VkIixsdC5FVkVOVF9QQUdJTkFUSU9OX0NIQU5HRUQ9InBhZ2luYXRpb25DaGFuZ2VkIixsdC5FVkVOVF9DT01QT05FTlRfU1RBVEVfQ0hBTkdFRD0iY29tcG9uZW50U3RhdGVDaGFuZ2VkIixsdC5FVkVOVF9TVE9SRV9SRUZSRVNIRUQ9InN0b3JlUmVmcmVzaGVkIixsdC5FVkVOVF9TVEFURV9VUERBVEVEPSJzdGF0ZVVwZGF0ZWQiLGx0LkVWRU5UX0NPTFVNTl9NRU5VX1ZJU0lCTEVfQ0hBTkdFRD0iY29sdW1uTWVudVZpc2libGVDaGFuZ2VkIixsdC5FVkVOVF9CT0RZX0hFSUdIVF9DSEFOR0VEPSJib2R5SGVpZ2h0Q2hhbmdlZCIsbHQuRVZFTlRfQ09MVU1OX0NPTlRBSU5FUl9XSURUSF9DSEFOR0VEPSJjb2x1bW5Db250YWluZXJXaWR0aENoYW5nZWQiLGx0LkVWRU5UX0RJU1BMQVlFRF9DT0xVTU5TX1dJRFRIX0NIQU5HRUQ9ImRpc3BsYXllZENvbHVtbnNXaWR0aENoYW5nZWQiLGx0LkVWRU5UX1NDUk9MTF9WSVNJQklMSVRZX0NIQU5HRUQ9InNjcm9sbFZpc2liaWxpdHlDaGFuZ2VkIixsdC5FVkVOVF9DT0xVTU5fSE9WRVJfQ0hBTkdFRD0iY29sdW1uSG92ZXJDaGFuZ2VkIixsdC5FVkVOVF9GTEFTSF9DRUxMUz0iZmxhc2hDZWxscyIsbHQuRVZFTlRfUEFHSU5BVElPTl9QSVhFTF9PRkZTRVRfQ0hBTkdFRD0icGFnaW5hdGlvblBpeGVsT2Zmc2V0Q2hhbmdlZCIsbHQuRVZFTlRfRElTUExBWUVEX1JPV1NfQ0hBTkdFRD0iZGlzcGxheWVkUm93c0NoYW5nZWQiLGx0LkVWRU5UX0xFRlRfUElOTkVEX1dJRFRIX0NIQU5HRUQ9ImxlZnRQaW5uZWRXaWR0aENoYW5nZWQiLGx0LkVWRU5UX1JJR0hUX1BJTk5FRF9XSURUSF9DSEFOR0VEPSJyaWdodFBpbm5lZFdpZHRoQ2hhbmdlZCIsbHQuRVZFTlRfUk9XX0NPTlRBSU5FUl9IRUlHSFRfQ0hBTkdFRD0icm93Q29udGFpbmVySGVpZ2h0Q2hhbmdlZCIsbHQuRVZFTlRfSEVBREVSX0hFSUdIVF9DSEFOR0VEPSJoZWFkZXJIZWlnaHRDaGFuZ2VkIixsdC5FVkVOVF9DT0xVTU5fSEVBREVSX0hFSUdIVF9DSEFOR0VEPSJjb2x1bW5IZWFkZXJIZWlnaHRDaGFuZ2VkIixsdC5FVkVOVF9ST1dfRFJBR19FTlRFUj0icm93RHJhZ0VudGVyIixsdC5FVkVOVF9ST1dfRFJBR19NT1ZFPSJyb3dEcmFnTW92ZSIsbHQuRVZFTlRfUk9XX0RSQUdfTEVBVkU9InJvd0RyYWdMZWF2ZSIsbHQuRVZFTlRfUk9XX0RSQUdfRU5EPSJyb3dEcmFnRW5kIixsdC5FVkVOVF9HUklEX1NUWUxFU19DSEFOR0VEPSJncmlkU3R5bGVzQ2hhbmdlZCIsbHQuRVZFTlRfUE9QVVBfVE9fRlJPTlQ9InBvcHVwVG9Gcm9udCIsbHQuRVZFTlRfQ09MVU1OX1JPV19HUk9VUF9DSEFOR0VfUkVRVUVTVD0iY29sdW1uUm93R3JvdXBDaGFuZ2VSZXF1ZXN0IixsdC5FVkVOVF9DT0xVTU5fUElWT1RfQ0hBTkdFX1JFUVVFU1Q9ImNvbHVtblBpdm90Q2hhbmdlUmVxdWVzdCIsbHQuRVZFTlRfQ09MVU1OX1ZBTFVFX0NIQU5HRV9SRVFVRVNUPSJjb2x1bW5WYWx1ZUNoYW5nZVJlcXVlc3QiLGx0LkVWRU5UX0NPTFVNTl9BR0dfRlVOQ19DSEFOR0VfUkVRVUVTVD0iY29sdW1uQWdnRnVuY0NoYW5nZVJlcXVlc3QiLGx0LkVWRU5UX1NUT1JFX1VQREFURUQ9InN0b3JlVXBkYXRlZCIsbHQuRVZFTlRfRklMVEVSX0RFU1RST1lFRD0iZmlsdGVyRGVzdHJveWVkIixsdC5FVkVOVF9ST1dfREFUQV9VUERBVEVfU1RBUlRFRD0icm93RGF0YVVwZGF0ZVN0YXJ0ZWQiLGx0LkVWRU5UX1JPV19DT1VOVF9SRUFEWT0icm93Q291bnRSZWFkeSIsbHQuRVZFTlRfQURWQU5DRURfRklMVEVSX0VOQUJMRURfQ0hBTkdFRD0iYWR2YW5jZWRGaWx0ZXJFbmFibGVkQ2hhbmdlZCIsbHQuRVZFTlRfREFUQV9UWVBFU19JTkZFUlJFRD0iZGF0YVR5cGVzSW5mZXJyZWQiLGx0LkVWRU5UX0ZJRUxEX1ZBTFVFX0NIQU5HRUQ9ImZpZWxkVmFsdWVDaGFuZ2VkIixsdC5FVkVOVF9GSUVMRF9QSUNLRVJfVkFMVUVfU0VMRUNURUQ9ImZpZWxkUGlja2VyVmFsdWVTZWxlY3RlZCIsbHQuRVZFTlRfU0lERV9CQVJfVVBEQVRFRD0ic2lkZUJhclVwZGF0ZWQiO2NsYXNzIGR0e2NvbnN0cnVjdG9yKCl7dGhpcy5leGlzdGluZ0lkcz17fX1nZXRJbnN0YW5jZUlkRm9yS2V5KGUpe2NvbnN0IHQ9dGhpcy5leGlzdGluZ0lkc1tlXTtsZXQgaTtyZXR1cm4gaT0ibnVtYmVyIiE9dHlwZW9mIHQ/MDp0KzEsdGhpcy5leGlzdGluZ0lkc1tlXT1pLGl9fXZhciBjdD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgaHQ9Y2xhc3MgZXh0ZW5kcyBpdHtjcmVhdGVBdXRvR3JvdXBDb2x1bW5zKGUpe2NvbnN0IHQ9W10saT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInRyZWVEYXRhIik7bGV0IHM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNHcm91cE11bHRpQXV0b0NvbHVtbigpO3JldHVybiBpJiZzJiYoY29uc29sZS53YXJuKCdBRyBHcmlkOiB5b3UgY2Fubm90IG1peCBncm91cERpc3BsYXlUeXBlID0gIm11bHRpcGxlQ29sdW1ucyIgd2l0aCB0cmVlRGF0YSwgb25seSBvbmUgY29sdW1uIGNhbiBiZSB1c2VkIHRvIGRpc3BsYXkgZ3JvdXBzIHdoZW4gZG9pbmcgdHJlZSBkYXRhJykscz0hMSkscz9lLmZvckVhY2goKGUsaSk9Pnt0LnB1c2godGhpcy5jcmVhdGVPbmVBdXRvR3JvdXBDb2x1bW4oZSxpKSl9KTp0LnB1c2godGhpcy5jcmVhdGVPbmVBdXRvR3JvdXBDb2x1bW4oKSksdH11cGRhdGVBdXRvR3JvdXBDb2x1bW5zKGUsdCl7ZS5mb3JFYWNoKChlLGkpPT50aGlzLnVwZGF0ZU9uZUF1dG9Hcm91cENvbHVtbihlLGksdCkpfWNyZWF0ZU9uZUF1dG9Hcm91cENvbHVtbihlLHQpe2xldCBpO2k9ZT8iYWctR3JpZC1BdXRvQ29sdW1uLSIrZS5nZXRJZCgpOiJhZy1HcmlkLUF1dG9Db2x1bW4iO2NvbnN0IHM9dGhpcy5jcmVhdGVBdXRvR3JvdXBDb2xEZWYoaSxlLHQpO3MuY29sSWQ9aTtjb25zdCByPW5ldyBFZShzLG51bGwsaSwhMCk7cmV0dXJuIHRoaXMuY29udGV4dC5jcmVhdGVCZWFuKHIpLHJ9dXBkYXRlT25lQXV0b0dyb3VwQ29sdW1uKGUsdCxpKXtjb25zdCBzPWUuZ2V0Q29sRGVmKCkscj0ic3RyaW5nIj09dHlwZW9mIHMuc2hvd1Jvd0dyb3VwP3Muc2hvd1Jvd0dyb3VwOnZvaWQgMCxvPW51bGwhPXI/dGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKHIpOnZvaWQgMCxuPXRoaXMuY3JlYXRlQXV0b0dyb3VwQ29sRGVmKGUuZ2V0SWQoKSxudWxsIT1vP286dm9pZCAwLHQpO2Uuc2V0Q29sRGVmKG4sbnVsbCxpKSx0aGlzLmNvbHVtbkZhY3RvcnkuYXBwbHlDb2x1bW5TdGF0ZShlLG4saSl9Y3JlYXRlQXV0b0dyb3VwQ29sRGVmKGUsdCxpKXtsZXQgcz10aGlzLmNyZWF0ZUJhc2VDb2xEZWYodCk7aWYoayhzLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiYXV0b0dyb3VwQ29sdW1uRGVmIikpLHM9dGhpcy5jb2x1bW5GYWN0b3J5LmFkZENvbHVtbkRlZmF1bHRBbmRUeXBlcyhzLGUpLCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInRyZWVEYXRhIikpe0Uocy5maWVsZCkmJkUocy52YWx1ZUdldHRlcikmJkUocy5maWx0ZXJWYWx1ZUdldHRlcikmJiJhZ0dyb3VwQ29sdW1uRmlsdGVyIiE9PXMuZmlsdGVyJiYocy5maWx0ZXI9ITEpfWkmJmk+MCYmKHMuaGVhZGVyQ2hlY2tib3hTZWxlY3Rpb249ITEpO2NvbnN0IHI9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNDb2x1bW5zU29ydGluZ0NvdXBsZWRUb0dyb3VwKCksbz1zLnZhbHVlR2V0dGVyfHxudWxsIT1zLmZpZWxkO3JldHVybiByJiYhbyYmKHMuc29ydEluZGV4PXZvaWQgMCxzLmluaXRpYWxTb3J0PXZvaWQgMCksc31jcmVhdGVCYXNlQ29sRGVmKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJhdXRvR3JvdXBDb2x1bW5EZWYiKSxpPXtoZWFkZXJOYW1lOnRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpKCJncm91cCIsIkdyb3VwIil9O2lmKHQmJih0LmNlbGxSZW5kZXJlcnx8dC5jZWxsUmVuZGVyZXJTZWxlY3Rvcil8fChpLmNlbGxSZW5kZXJlcj0iYWdHcm91cENlbGxSZW5kZXJlciIpLGUpe2NvbnN0IHQ9ZS5nZXRDb2xEZWYoKTtPYmplY3QuYXNzaWduKGkse2hlYWRlck5hbWU6dGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5TmFtZUZvckNvbHVtbihlLCJoZWFkZXIiKSxoZWFkZXJWYWx1ZUdldHRlcjp0LmhlYWRlclZhbHVlR2V0dGVyfSksdC5jZWxsUmVuZGVyZXImJk9iamVjdC5hc3NpZ24oaSx7Y2VsbFJlbmRlcmVyUGFyYW1zOntpbm5lclJlbmRlcmVyOnQuY2VsbFJlbmRlcmVyLGlubmVyUmVuZGVyZXJQYXJhbXM6dC5jZWxsUmVuZGVyZXJQYXJhbXN9fSksaS5zaG93Um93R3JvdXA9ZS5nZXRDb2xJZCgpfWVsc2UgaS5zaG93Um93R3JvdXA9ITA7cmV0dXJuIGl9fTtjdChbY2UoImNvbHVtbk1vZGVsIildLGh0LnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksY3QoW2NlKCJjb2x1bW5GYWN0b3J5IildLGh0LnByb3RvdHlwZSwiY29sdW1uRmFjdG9yeSIsdm9pZCAwKSxodD1jdChbZGUoImF1dG9Hcm91cENvbFNlcnZpY2UiKV0saHQpO2NvbnN0IHV0PS9bJjw+IiddL2cscHQ9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImIzM5OyJ9O2Z1bmN0aW9uIGd0KGUpe2NvbnN0IHQ9U3RyaW5nLmZyb21DaGFyQ29kZTtmdW5jdGlvbiBpKGUsaSl7cmV0dXJuIHQoZT4+aSY2M3wxMjgpfWZ1bmN0aW9uIHMoZSl7aWYoZT49MCYmZTw9MzEmJjEwIT09ZSl7cmV0dXJuYF94JHtlLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLnBhZFN0YXJ0KDQsIjAiKX1fYH1pZigwPT0oNDI5NDk2NzE2OCZlKSlyZXR1cm4gdChlKTtsZXQgcz0iIjtyZXR1cm4gMD09KDQyOTQ5NjUyNDgmZSk/cz10KGU+PjYmMzF8MTkyKTowPT0oNDI5NDkwMTc2MCZlKT8oIWZ1bmN0aW9uKGUpe2lmKGU+PTU1Mjk2JiZlPD01NzM0Myl0aHJvdyBFcnJvcigiTG9uZSBzdXJyb2dhdGUgVSsiK2UudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkrIiBpcyBub3QgYSBzY2FsYXIgdmFsdWUiKX0oZSkscz10KGU+PjEyJjE1fDIyNCkscys9aShlLDYpKTowPT0oNDI5Mjg3MDE0NCZlKSYmKHM9dChlPj4xOCY3fDI0MCkscys9aShlLDEyKSxzKz1pKGUsNikpLHMrPXQoNjMmZXwxMjgpLHN9Y29uc3Qgcj1mdW5jdGlvbihlKXtjb25zdCB0PVtdO2lmKCFlKXJldHVybltdO2NvbnN0IGk9ZS5sZW5ndGg7bGV0IHMscixvPTA7Zm9yKDtvPGk7KXM9ZS5jaGFyQ29kZUF0KG8rKykscz49NTUyOTYmJnM8PTU2MzE5JiZvPGk/KHI9ZS5jaGFyQ29kZUF0KG8rKyksNTYzMjA9PSg2NDUxMiZyKT90LnB1c2goKCgxMDIzJnMpPDwxMCkrKDEwMjMmcikrNjU1MzYpOih0LnB1c2gocyksby0tKSk6dC5wdXNoKHMpO3JldHVybiB0fShlKSxvPXIubGVuZ3RoO2xldCBuLGE9LTEsbD0iIjtmb3IoOysrYTxvOyluPXJbYV0sbCs9cyhuKTtyZXR1cm4gbH1mdW5jdGlvbiBtdChlKXtyZXR1cm4gZVswXS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyaW5nKDEpLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gZnQoZSx0KXtpZihudWxsPT1lKXJldHVybiBudWxsO2NvbnN0IGk9ZS50b1N0cmluZygpLnRvU3RyaW5nKCk7cmV0dXJuIHQ/aTppLnJlcGxhY2UodXQsZT0+cHRbZV0pfWZ1bmN0aW9uIHZ0KGUpe2lmKCFlfHxudWxsPT1lKXJldHVybiBudWxsO3JldHVybiBlLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIiQxICQyIikucmVwbGFjZSgvKFtBLVpdKykoW0EtWl0pKFthLXpdKS9nLCIkMSAkMiQzIikucmVwbGFjZSgvXC4vZywiICIpLnNwbGl0KCIgIikubWFwKGU9PmUuc3Vic3RyaW5nKDAsMSkudG9VcHBlckNhc2UoKSsoZS5sZW5ndGg+MT9lLnN1YnN0cmluZygxLGUubGVuZ3RoKToiIikpLmpvaW4oIiAiKX1mdW5jdGlvbiBDdChlKXtyZXR1cm4gZS5yZXBsYWNlKC9bQS1aXS9nLGU9PiItIitlLnRvTG9jYWxlTG93ZXJDYXNlKCkpfWZ1bmN0aW9uIHl0KGUpe2NvbnN0IHQ9bmV3IE1hcDtyZXR1cm4gZS5mb3JFYWNoKGU9PnQuc2V0KGVbMF0sZVsxXSkpLHR9ZnVuY3Rpb24gU3QoZSx0KXtjb25zdCBpPW5ldyBNYXA7cmV0dXJuIGUuZm9yRWFjaChlPT5pLnNldCh0KGUpLGUpKSxpfWZ1bmN0aW9uIHd0KGUpe2NvbnN0IHQ9W107cmV0dXJuIGUuZm9yRWFjaCgoZSxpKT0+dC5wdXNoKGkpKSx0fXZhciBidD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufSxFdD1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3QoaSxzLGUpfX0sUnQ9ZnVuY3Rpb24oZSx0KXt2YXIgaT17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihpW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxzLmxlbmd0aDtyKyspdC5pbmRleE9mKHNbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbcl0pJiYoaVtzW3JdXT1lW3Nbcl1dKX1yZXR1cm4gaX07bGV0IHh0PWNsYXNzIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMucHJpbWFyeUhlYWRlclJvd0NvdW50PTAsdGhpcy5zZWNvbmRhcnlIZWFkZXJSb3dDb3VudD0wLHRoaXMuZ3JpZEhlYWRlclJvd0NvdW50PTAsdGhpcy5kaXNwbGF5ZWRDb2x1bW5zTGVmdD1bXSx0aGlzLmRpc3BsYXllZENvbHVtbnNSaWdodD1bXSx0aGlzLmRpc3BsYXllZENvbHVtbnNDZW50ZXI9W10sdGhpcy5kaXNwbGF5ZWRDb2x1bW5zPVtdLHRoaXMuZGlzcGxheWVkQ29sdW1uc0FuZEdyb3Vwc01hcD17fSx0aGlzLnZpZXdwb3J0Q29sdW1ucz1bXSx0aGlzLnZpZXdwb3J0Q29sdW1uc0hhc2g9IiIsdGhpcy5oZWFkZXJWaWV3cG9ydENvbHVtbnM9W10sdGhpcy52aWV3cG9ydENvbHVtbnNDZW50ZXI9W10sdGhpcy5oZWFkZXJWaWV3cG9ydENvbHVtbnNDZW50ZXI9W10sdGhpcy52aWV3cG9ydFJvd0xlZnQ9e30sdGhpcy52aWV3cG9ydFJvd1JpZ2h0PXt9LHRoaXMudmlld3BvcnRSb3dDZW50ZXI9e30sdGhpcy5hdXRvSGVpZ2h0QWN0aXZlQXRMZWFzdE9uY2U9ITEsdGhpcy5yb3dHcm91cENvbHVtbnM9W10sdGhpcy52YWx1ZUNvbHVtbnM9W10sdGhpcy5waXZvdENvbHVtbnM9W10sdGhpcy5yZWFkeT0hMSx0aGlzLmNoYW5nZUV2ZW50c0Rpc3BhdGNoaW5nPSExLHRoaXMuYXV0b0dyb3Vwc05lZWRCdWlsZGluZz0hMSx0aGlzLmZvcmNlUmVjcmVhdGVBdXRvR3JvdXBzPSExLHRoaXMucGl2b3RNb2RlPSExLHRoaXMuYm9keVdpZHRoPTAsdGhpcy5sZWZ0V2lkdGg9MCx0aGlzLnJpZ2h0V2lkdGg9MCx0aGlzLmJvZHlXaWR0aERpcnR5PSEwLHRoaXMuc2hvdWxkUXVldWVSZXNpemVPcGVyYXRpb25zPSExLHRoaXMucmVzaXplT3BlcmF0aW9uUXVldWU9W119aW5pdCgpe3RoaXMuc3VwcHJlc3NDb2x1bW5WaXJ0dWFsaXNhdGlvbj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQ29sdW1uVmlydHVhbGlzYXRpb24iKTtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicGl2b3RNb2RlIik7dGhpcy5pc1Bpdm90U2V0dGluZ0FsbG93ZWQoZSkmJih0aGlzLnBpdm90TW9kZT1lKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhbImdyb3VwRGlzcGxheVR5cGUiLCJ0cmVlRGF0YSIsInRyZWVEYXRhRGlzcGxheVR5cGUiLCJncm91cEhpZGVPcGVuUGFyZW50cyJdLGU9PnRoaXMuYnVpbGRBdXRvR3JvdXBDb2x1bW5zKFR0KGUuc291cmNlKSkpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoImF1dG9Hcm91cENvbHVtbkRlZiIsZT0+dGhpcy5vbkF1dG9Hcm91cENvbHVtbkRlZkNoYW5nZWQoVHQoZS5zb3VyY2UpKSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcnMoWyJkZWZhdWx0Q29sRGVmIiwiY29sdW1uVHlwZXMiLCJzdXBwcmVzc0ZpZWxkRG90Tm90YXRpb24iXSxlPT50aGlzLm9uU2hhcmVkQ29sRGVmQ2hhbmdlZChUdChlLnNvdXJjZSkpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJwaXZvdE1vZGUiLGU9PnRoaXMuc2V0UGl2b3RNb2RlKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicGl2b3RNb2RlIiksVHQoZS5zb3VyY2UpKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRklSU1RfREFUQV9SRU5ERVJFRCwoKT0+dGhpcy5vbkZpcnN0RGF0YVJlbmRlcmVkKCkpfWJ1aWxkQXV0b0dyb3VwQ29sdW1ucyhlKXt0aGlzLmNvbHVtbkRlZnMmJih0aGlzLmF1dG9Hcm91cHNOZWVkQnVpbGRpbmc9ITAsdGhpcy5mb3JjZVJlY3JlYXRlQXV0b0dyb3Vwcz0hMCx0aGlzLnVwZGF0ZUdyaWRDb2x1bW5zKCksdGhpcy51cGRhdGVEaXNwbGF5ZWRDb2x1bW5zKGUpKX1vbkF1dG9Hcm91cENvbHVtbkRlZkNoYW5nZWQoZSl7dGhpcy5ncm91cEF1dG9Db2x1bW5zJiZ0aGlzLmF1dG9Hcm91cENvbFNlcnZpY2UudXBkYXRlQXV0b0dyb3VwQ29sdW1ucyh0aGlzLmdyb3VwQXV0b0NvbHVtbnMsZSl9b25TaGFyZWRDb2xEZWZDaGFuZ2VkKGUpe3RoaXMuZ3JpZENvbHVtbnMmJih0aGlzLmdyb3VwQXV0b0NvbHVtbnMmJnRoaXMuYXV0b0dyb3VwQ29sU2VydmljZS51cGRhdGVBdXRvR3JvdXBDb2x1bW5zKHRoaXMuZ3JvdXBBdXRvQ29sdW1ucyxlKSx0aGlzLmNyZWF0ZUNvbHVtbnNGcm9tQ29sdW1uRGVmcyghMCxlKSl9c2V0Q29sdW1uRGVmcyhlLHQpe2NvbnN0IGk9ISF0aGlzLmNvbHVtbkRlZnM7dGhpcy5jb2x1bW5EZWZzPWUsdGhpcy5jcmVhdGVDb2x1bW5zRnJvbUNvbHVtbkRlZnMoaSx0KX1yZWNyZWF0ZUNvbHVtbkRlZnMoZSl7dGhpcy5vblNoYXJlZENvbERlZkNoYW5nZWQoZSl9ZGVzdHJveU9sZENvbHVtbnMoZSx0KXtjb25zdCBpPXt9O2lmKCFlKXJldHVybjt0aGlzLmNvbHVtblV0aWxzLmRlcHRoRmlyc3RPcmlnaW5hbFRyZWVTZWFyY2gobnVsbCxlLGU9PntpW2UuZ2V0SW5zdGFuY2VJZCgpXT1lfSksdCYmdGhpcy5jb2x1bW5VdGlscy5kZXB0aEZpcnN0T3JpZ2luYWxUcmVlU2VhcmNoKG51bGwsdCxlPT57aVtlLmdldEluc3RhbmNlSWQoKV09bnVsbH0pO2NvbnN0IHM9T2JqZWN0LnZhbHVlcyhpKS5maWx0ZXIoZT0+bnVsbCE9ZSk7dGhpcy5kZXN0cm95QmVhbnMocyl9ZGVzdHJveUNvbHVtbnMoKXt0aGlzLmRlc3Ryb3lPbGRDb2x1bW5zKHRoaXMucHJpbWFyeUNvbHVtblRyZWUpLHRoaXMuZGVzdHJveU9sZENvbHVtbnModGhpcy5zZWNvbmRhcnlCYWxhbmNlZFRyZWUpLHRoaXMuZGVzdHJveU9sZENvbHVtbnModGhpcy5ncm91cEF1dG9Db2xzQmFsYW5jZWRUcmVlKX1jcmVhdGVDb2x1bW5zRnJvbUNvbHVtbkRlZnMoZSx0KXtjb25zdCBpPWU/dGhpcy5jb21wYXJlQ29sdW1uU3RhdGVzQW5kRGlzcGF0Y2hFdmVudHModCk6dm9pZCAwO3RoaXMudmFsdWVDYWNoZS5leHBpcmUoKSx0aGlzLmF1dG9Hcm91cHNOZWVkQnVpbGRpbmc9ITA7Y29uc3Qgcz10aGlzLnByaW1hcnlDb2x1bW5zLHI9dGhpcy5wcmltYXJ5Q29sdW1uVHJlZSxvPXRoaXMuY29sdW1uRmFjdG9yeS5jcmVhdGVDb2x1bW5UcmVlKHRoaXMuY29sdW1uRGVmcywhMCxyLHQpO3RoaXMuZGVzdHJveU9sZENvbHVtbnModGhpcy5wcmltYXJ5Q29sdW1uVHJlZSxvLmNvbHVtblRyZWUpLHRoaXMucHJpbWFyeUNvbHVtblRyZWU9by5jb2x1bW5UcmVlLHRoaXMucHJpbWFyeUhlYWRlclJvd0NvdW50PW8udHJlZURlcHQrMSx0aGlzLnByaW1hcnlDb2x1bW5zPXRoaXMuZ2V0Q29sdW1uc0Zyb21UcmVlKHRoaXMucHJpbWFyeUNvbHVtblRyZWUpLHRoaXMucHJpbWFyeUNvbHVtbnNNYXA9e30sdGhpcy5wcmltYXJ5Q29sdW1ucy5mb3JFYWNoKGU9PnRoaXMucHJpbWFyeUNvbHVtbnNNYXBbZS5nZXRJZCgpXT1lKSx0aGlzLmV4dHJhY3RSb3dHcm91cENvbHVtbnModCxzKSx0aGlzLmV4dHJhY3RQaXZvdENvbHVtbnModCxzKSx0aGlzLmV4dHJhY3RWYWx1ZUNvbHVtbnModCxzKSx0aGlzLnJlYWR5PSEwO2NvbnN0IG49dm9pZCAwPT09dGhpcy5ncmlkQ29sc0FyZVByaW1hcnk7KHRoaXMuZ3JpZENvbHNBcmVQcmltYXJ5fHxufHx0aGlzLmF1dG9Hcm91cHNOZWVkQnVpbGRpbmcpJiYodGhpcy51cGRhdGVHcmlkQ29sdW1ucygpLGUmJnRoaXMuZ3JpZENvbHNBcmVQcmltYXJ5JiYhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJtYWludGFpbkNvbHVtbk9yZGVyIikmJnRoaXMub3JkZXJHcmlkQ29sdW1uc0xpa2VQcmltYXJ5KCksdGhpcy51cGRhdGVEaXNwbGF5ZWRDb2x1bW5zKHQpLHRoaXMuY2hlY2tWaWV3cG9ydENvbHVtbnMoKSksdGhpcy5kaXNwYXRjaEV2ZXJ5dGhpbmdDaGFuZ2VkKHQpLHRoaXMuY2hhbmdlRXZlbnRzRGlzcGF0Y2hpbmc9ITAsaSYmaSgpLHRoaXMuY2hhbmdlRXZlbnRzRGlzcGF0Y2hpbmc9ITEsdGhpcy5kaXNwYXRjaE5ld0NvbHVtbnNMb2FkZWQodCl9c2hvdWxkUm93TW9kZWxJZ25vcmVSZWZyZXNoKCl7cmV0dXJuIHRoaXMuY2hhbmdlRXZlbnRzRGlzcGF0Y2hpbmd9ZGlzcGF0Y2hOZXdDb2x1bW5zTG9hZGVkKGUpe2NvbnN0IHQ9e3R5cGU6bHQuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELHNvdXJjZTplfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpLCJncmlkSW5pdGlhbGl6aW5nIj09PWUmJnRoaXMub25Db2x1bW5zUmVhZHkoKX1kaXNwYXRjaEV2ZXJ5dGhpbmdDaGFuZ2VkKGUpe2NvbnN0IHQ9e3R5cGU6bHQuRVZFTlRfQ09MVU1OX0VWRVJZVEhJTkdfQ0hBTkdFRCxzb3VyY2U6ZX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KX1vcmRlckdyaWRDb2x1bW5zTGlrZVByaW1hcnkoKXtjb25zdCBlPXRoaXMucHJpbWFyeUNvbHVtbnM7aWYoIWUpcmV0dXJuO2NvbnN0IHQ9ZS5maWx0ZXIoZT0+dGhpcy5ncmlkQ29sdW1ucy5pbmRleE9mKGUpPj0wKSxpPXRoaXMuZ3JpZENvbHVtbnMuZmlsdGVyKGU9PnQuaW5kZXhPZihlKTwwKTt0aGlzLmdyaWRDb2x1bW5zPVsuLi5pLC4uLnRdLHRoaXMuZ3JpZENvbHVtbnM9dGhpcy5wbGFjZUxvY2tlZENvbHVtbnModGhpcy5ncmlkQ29sdW1ucyl9Z2V0QWxsRGlzcGxheWVkQXV0b0hlaWdodENvbHMoKXtyZXR1cm4gdGhpcy5kaXNwbGF5ZWRBdXRvSGVpZ2h0Q29sc31zZXRWaWV3cG9ydCgpe3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIik/KHRoaXMudmlld3BvcnRMZWZ0PXRoaXMuYm9keVdpZHRoLXRoaXMuc2Nyb2xsUG9zaXRpb24tdGhpcy5zY3JvbGxXaWR0aCx0aGlzLnZpZXdwb3J0UmlnaHQ9dGhpcy5ib2R5V2lkdGgtdGhpcy5zY3JvbGxQb3NpdGlvbik6KHRoaXMudmlld3BvcnRMZWZ0PXRoaXMuc2Nyb2xsUG9zaXRpb24sdGhpcy52aWV3cG9ydFJpZ2h0PXRoaXMuc2Nyb2xsV2lkdGgrdGhpcy5zY3JvbGxQb3NpdGlvbil9Z2V0RGlzcGxheWVkQ29sdW1uc1N0YXJ0aW5nQXQoZSl7bGV0IHQ9ZTtjb25zdCBpPVtdO2Zvcig7bnVsbCE9dDspaS5wdXNoKHQpLHQ9dGhpcy5nZXREaXNwbGF5ZWRDb2xBZnRlcih0KTtyZXR1cm4gaX1jaGVja1ZpZXdwb3J0Q29sdW1ucyhlPSExKXtpZihudWxsPT10aGlzLmRpc3BsYXllZENvbHVtbnNDZW50ZXIpcmV0dXJuO2lmKCF0aGlzLmV4dHJhY3RWaWV3cG9ydCgpKXJldHVybjtjb25zdCB0PXt0eXBlOmx0LkVWRU5UX1ZJUlRVQUxfQ09MVU1OU19DSEFOR0VELGFmdGVyU2Nyb2xsOmV9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9c2V0Vmlld3BvcnRQb3NpdGlvbihlLHQsaT0hMSl7KGUhPT10aGlzLnNjcm9sbFdpZHRofHx0IT09dGhpcy5zY3JvbGxQb3NpdGlvbnx8dGhpcy5ib2R5V2lkdGhEaXJ0eSkmJih0aGlzLnNjcm9sbFdpZHRoPWUsdGhpcy5zY3JvbGxQb3NpdGlvbj10LHRoaXMuYm9keVdpZHRoRGlydHk9ITAsdGhpcy5zZXRWaWV3cG9ydCgpLHRoaXMucmVhZHkmJnRoaXMuY2hlY2tWaWV3cG9ydENvbHVtbnMoaSkpfWlzUGl2b3RNb2RlKCl7cmV0dXJuIHRoaXMucGl2b3RNb2RlfWlzUGl2b3RTZXR0aW5nQWxsb3dlZChlKXtyZXR1cm4hZXx8IXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidHJlZURhdGEiKXx8KGNvbnNvbGUud2FybigiQUcgR3JpZDogUGl2b3QgbW9kZSBub3QgYXZhaWxhYmxlIGluIGNvbmp1bmN0aW9uIFRyZWUgRGF0YSBpLmUuICdncmlkT3B0aW9ucy50cmVlRGF0YTogdHJ1ZSciKSwhMSl9c2V0UGl2b3RNb2RlKGUsdCl7aWYoZT09PXRoaXMucGl2b3RNb2RlfHwhdGhpcy5pc1Bpdm90U2V0dGluZ0FsbG93ZWQodGhpcy5waXZvdE1vZGUpKXJldHVybjtpZih0aGlzLnBpdm90TW9kZT1lLCF0aGlzLmdyaWRDb2x1bW5zKXJldHVybjt0aGlzLmF1dG9Hcm91cHNOZWVkQnVpbGRpbmc9ITAsdGhpcy51cGRhdGVHcmlkQ29sdW1ucygpLHRoaXMudXBkYXRlRGlzcGxheWVkQ29sdW1ucyh0KTtjb25zdCBpPXt0eXBlOmx0LkVWRU5UX0NPTFVNTl9QSVZPVF9NT0RFX0NIQU5HRUR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoaSl9Z2V0U2Vjb25kYXJ5UGl2b3RDb2x1bW4oZSx0KXtpZihFKHRoaXMuc2Vjb25kYXJ5Q29sdW1ucykpcmV0dXJuIG51bGw7Y29uc3QgaT10aGlzLmdldFByaW1hcnlDb2x1bW4odCk7bGV0IHM9bnVsbDtyZXR1cm4gdGhpcy5zZWNvbmRhcnlDb2x1bW5zLmZvckVhY2godD0+e2NvbnN0IHI9dC5nZXRDb2xEZWYoKS5waXZvdEtleXMsbz10LmdldENvbERlZigpLnBpdm90VmFsdWVDb2x1bW47QWUocixlKSYmbz09PWkmJihzPXQpfSksc31zZXRCZWFucyhlKXt0aGlzLmxvZ2dlcj1lLmNyZWF0ZSgiY29sdW1uTW9kZWwiKX1zZXRGaXJzdFJpZ2h0QW5kTGFzdExlZnRQaW5uZWQoZSl7bGV0IHQsaTt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpPyh0PXRoaXMuZGlzcGxheWVkQ29sdW1uc0xlZnQ/dGhpcy5kaXNwbGF5ZWRDb2x1bW5zTGVmdFswXTpudWxsLGk9dGhpcy5kaXNwbGF5ZWRDb2x1bW5zUmlnaHQ/T2UodGhpcy5kaXNwbGF5ZWRDb2x1bW5zUmlnaHQpOm51bGwpOih0PXRoaXMuZGlzcGxheWVkQ29sdW1uc0xlZnQ/T2UodGhpcy5kaXNwbGF5ZWRDb2x1bW5zTGVmdCk6bnVsbCxpPXRoaXMuZGlzcGxheWVkQ29sdW1uc1JpZ2h0P3RoaXMuZGlzcGxheWVkQ29sdW1uc1JpZ2h0WzBdOm51bGwpLHRoaXMuZ3JpZENvbHVtbnMuZm9yRWFjaChzPT57cy5zZXRMYXN0TGVmdFBpbm5lZChzPT09dCxlKSxzLnNldEZpcnN0UmlnaHRQaW5uZWQocz09PWksZSl9KX1hdXRvU2l6ZUNvbHVtbnMoZSl7aWYodGhpcy5zaG91bGRRdWV1ZVJlc2l6ZU9wZXJhdGlvbnMpcmV0dXJuIHZvaWQgdGhpcy5yZXNpemVPcGVyYXRpb25RdWV1ZS5wdXNoKCgpPT50aGlzLmF1dG9TaXplQ29sdW1ucyhlKSk7Y29uc3R7Y29sdW1uczp0LHNraXBIZWFkZXI6aSxza2lwSGVhZGVyR3JvdXBzOnMsc3RvcEF0R3JvdXA6cixzb3VyY2U6bz0iYXBpIn09ZTt0aGlzLmFuaW1hdGlvbkZyYW1lU2VydmljZS5mbHVzaEFsbEZyYW1lcygpO2NvbnN0IG49W107bGV0IGE9LTE7Y29uc3QgbD1udWxsIT1pP2k6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJza2lwSGVhZGVyT25BdXRvU2l6ZSIpLGQ9bnVsbCE9cz9zOmw7Zm9yKDswIT09YTspYT0wLHRoaXMuYWN0aW9uT25HcmlkQ29sdW1ucyh0LGU9PntpZihuLmluZGV4T2YoZSk+PTApcmV0dXJuITE7Y29uc3QgdD10aGlzLmF1dG9XaWR0aENhbGN1bGF0b3IuZ2V0UHJlZmVycmVkV2lkdGhGb3JDb2x1bW4oZSxsKTtpZih0PjApe2NvbnN0IGk9dGhpcy5ub3JtYWxpc2VDb2x1bW5XaWR0aChlLHQpO2Uuc2V0QWN0dWFsV2lkdGgoaSxvKSxuLnB1c2goZSksYSsrfXJldHVybiEwfSxvKTtkfHx0aGlzLmF1dG9TaXplQ29sdW1uR3JvdXBzQnlDb2x1bW5zKHQsbyxyKSx0aGlzLmRpc3BhdGNoQ29sdW1uUmVzaXplZEV2ZW50KG4sITAsImF1dG9zaXplQ29sdW1ucyIpfWRpc3BhdGNoQ29sdW1uUmVzaXplZEV2ZW50KGUsdCxpLHM9bnVsbCl7aWYoZSYmZS5sZW5ndGgpe2NvbnN0IHI9e3R5cGU6bHQuRVZFTlRfQ09MVU1OX1JFU0laRUQsY29sdW1uczplLGNvbHVtbjoxPT09ZS5sZW5ndGg/ZVswXTpudWxsLGZsZXhDb2x1bW5zOnMsZmluaXNoZWQ6dCxzb3VyY2U6aX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChyKX19ZGlzcGF0Y2hDb2x1bW5DaGFuZ2VkRXZlbnQoZSx0LGkpe2NvbnN0IHM9e3R5cGU6ZSxjb2x1bW5zOnQsY29sdW1uOnQmJjE9PXQubGVuZ3RoP3RbMF06bnVsbCxzb3VyY2U6aX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChzKX1kaXNwYXRjaENvbHVtbk1vdmVkRXZlbnQoZSl7Y29uc3R7bW92ZWRDb2x1bW5zOnQsc291cmNlOmksdG9JbmRleDpzLGZpbmlzaGVkOnJ9PWUsbz17dHlwZTpsdC5FVkVOVF9DT0xVTU5fTU9WRUQsY29sdW1uczp0LGNvbHVtbjp0JiYxPT09dC5sZW5ndGg/dFswXTpudWxsLHRvSW5kZXg6cyxmaW5pc2hlZDpyLHNvdXJjZTppfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KG8pfWRpc3BhdGNoQ29sdW1uUGlubmVkRXZlbnQoZSx0KXtpZighZS5sZW5ndGgpcmV0dXJuO2NvbnN0IGk9MT09PWUubGVuZ3RoP2VbMF06bnVsbCxzPXRoaXMuZ2V0Q29tbW9uVmFsdWUoZSxlPT5lLmdldFBpbm5lZCgpKSxyPXt0eXBlOmx0LkVWRU5UX0NPTFVNTl9QSU5ORUQscGlubmVkOm51bGwhPXM/czpudWxsLGNvbHVtbnM6ZSxjb2x1bW46aSxzb3VyY2U6dH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChyKX1kaXNwYXRjaENvbHVtblZpc2libGVFdmVudChlLHQpe2lmKCFlLmxlbmd0aClyZXR1cm47Y29uc3QgaT0xPT09ZS5sZW5ndGg/ZVswXTpudWxsLHM9dGhpcy5nZXRDb21tb25WYWx1ZShlLGU9PmUuaXNWaXNpYmxlKCkpLHI9e3R5cGU6bHQuRVZFTlRfQ09MVU1OX1ZJU0lCTEUsdmlzaWJsZTpzLGNvbHVtbnM6ZSxjb2x1bW46aSxzb3VyY2U6dH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChyKX1hdXRvU2l6ZUNvbHVtbihlLHQsaSl7ZSYmdGhpcy5hdXRvU2l6ZUNvbHVtbnMoe2NvbHVtbnM6W2VdLHNraXBIZWFkZXI6aSxza2lwSGVhZGVyR3JvdXBzOiEwLHNvdXJjZTp0fSl9YXV0b1NpemVDb2x1bW5Hcm91cHNCeUNvbHVtbnMoZSx0LGkpe2NvbnN0IHM9bmV3IFNldDtsZXQgcjt0aGlzLmdldEdyaWRDb2x1bW5zKGUpLmZvckVhY2goZT0+e2xldCB0PWUuZ2V0UGFyZW50KCk7Zm9yKDt0JiZ0IT1pOyl0LmlzUGFkZGluZygpfHxzLmFkZCh0KSx0PXQuZ2V0UGFyZW50KCl9KTtmb3IoY29uc3QgZSBvZiBzKXtmb3IoY29uc3QgdCBvZiB0aGlzLmN0cmxzU2VydmljZS5nZXRIZWFkZXJSb3dDb250YWluZXJDdHJscygpKWlmKHI9dC5nZXRIZWFkZXJDdHJsRm9yQ29sdW1uKGUpLHIpYnJlYWs7ciYmci5yZXNpemVMZWFmQ29sdW1uc1RvRml0KHQpfXJldHVybltdfWF1dG9TaXplQWxsQ29sdW1ucyhlLHQpe2lmKHRoaXMuc2hvdWxkUXVldWVSZXNpemVPcGVyYXRpb25zKXJldHVybiB2b2lkIHRoaXMucmVzaXplT3BlcmF0aW9uUXVldWUucHVzaCgoKT0+dGhpcy5hdXRvU2l6ZUFsbENvbHVtbnMoZSx0KSk7Y29uc3QgaT10aGlzLmdldEFsbERpc3BsYXllZENvbHVtbnMoKTt0aGlzLmF1dG9TaXplQ29sdW1ucyh7Y29sdW1uczppLHNraXBIZWFkZXI6dCxzb3VyY2U6ZX0pfWdldENvbHVtbnNGcm9tVHJlZShlKXtjb25zdCB0PVtdLGk9ZT0+e2ZvcihsZXQgcz0wO3M8ZS5sZW5ndGg7cysrKXtjb25zdCByPWVbc107ciBpbnN0YW5jZW9mIEVlP3QucHVzaChyKTpyIGluc3RhbmNlb2YgeGUmJmkoci5nZXRDaGlsZHJlbigpKX19O3JldHVybiBpKGUpLHR9Z2V0QWxsRGlzcGxheWVkVHJlZXMoKXtyZXR1cm4gdGhpcy5kaXNwbGF5ZWRUcmVlTGVmdCYmdGhpcy5kaXNwbGF5ZWRUcmVlUmlnaHQmJnRoaXMuZGlzcGxheWVkVHJlZUNlbnRyZT90aGlzLmRpc3BsYXllZFRyZWVMZWZ0LmNvbmNhdCh0aGlzLmRpc3BsYXllZFRyZWVDZW50cmUpLmNvbmNhdCh0aGlzLmRpc3BsYXllZFRyZWVSaWdodCk6bnVsbH1nZXRQcmltYXJ5Q29sdW1uVHJlZSgpe3JldHVybiB0aGlzLnByaW1hcnlDb2x1bW5UcmVlfWdldEhlYWRlclJvd0NvdW50KCl7cmV0dXJuIHRoaXMuZ3JpZEhlYWRlclJvd0NvdW50fWdldERpc3BsYXllZFRyZWVMZWZ0KCl7cmV0dXJuIHRoaXMuZGlzcGxheWVkVHJlZUxlZnR9Z2V0RGlzcGxheWVkVHJlZVJpZ2h0KCl7cmV0dXJuIHRoaXMuZGlzcGxheWVkVHJlZVJpZ2h0fWdldERpc3BsYXllZFRyZWVDZW50cmUoKXtyZXR1cm4gdGhpcy5kaXNwbGF5ZWRUcmVlQ2VudHJlfWlzQ29sdW1uRGlzcGxheWVkKGUpe3JldHVybiB0aGlzLmdldEFsbERpc3BsYXllZENvbHVtbnMoKS5pbmRleE9mKGUpPj0wfWdldEFsbERpc3BsYXllZENvbHVtbnMoKXtyZXR1cm4gdGhpcy5kaXNwbGF5ZWRDb2x1bW5zfWdldFZpZXdwb3J0Q29sdW1ucygpe3JldHVybiB0aGlzLnZpZXdwb3J0Q29sdW1uc31nZXREaXNwbGF5ZWRMZWZ0Q29sdW1uc0ZvclJvdyhlKXtyZXR1cm4gdGhpcy5jb2xTcGFuQWN0aXZlP3RoaXMuZ2V0RGlzcGxheWVkQ29sdW1uc0ZvclJvdyhlLHRoaXMuZGlzcGxheWVkQ29sdW1uc0xlZnQpOnRoaXMuZGlzcGxheWVkQ29sdW1uc0xlZnR9Z2V0RGlzcGxheWVkUmlnaHRDb2x1bW5zRm9yUm93KGUpe3JldHVybiB0aGlzLmNvbFNwYW5BY3RpdmU/dGhpcy5nZXREaXNwbGF5ZWRDb2x1bW5zRm9yUm93KGUsdGhpcy5kaXNwbGF5ZWRDb2x1bW5zUmlnaHQpOnRoaXMuZGlzcGxheWVkQ29sdW1uc1JpZ2h0fWlzQ29sU3BhbkFjdGl2ZSgpe3JldHVybiB0aGlzLmNvbFNwYW5BY3RpdmV9Z2V0RGlzcGxheWVkQ29sdW1uc0ZvclJvdyhlLHQsaSxzKXtjb25zdCByPVtdO2xldCBvPW51bGw7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspe2NvbnN0IGE9dFtuXSxsPXQubGVuZ3RoLW4sZD1NYXRoLm1pbihhLmdldENvbFNwYW4oZSksbCksYz1bYV07aWYoZD4xKXtjb25zdCBlPWQtMTtmb3IobGV0IGk9MTtpPD1lO2krKyljLnB1c2godFtuK2ldKTtuKz1lfWxldCBoO2lmKGk/KGg9ITEsYy5mb3JFYWNoKGU9PntpKGUpJiYoaD0hMCl9KSk6aD0hMCxoKXtpZigwPT09ci5sZW5ndGgmJm8peyEhcyYmcyhhKSYmci5wdXNoKG8pfXIucHVzaChhKX1vPWF9cmV0dXJuIHJ9Z2V0Vmlld3BvcnRDZW50ZXJDb2x1bW5zRm9yUm93KGUpe2lmKCF0aGlzLmNvbFNwYW5BY3RpdmUpcmV0dXJuIHRoaXMudmlld3BvcnRDb2x1bW5zQ2VudGVyO2NvbnN0IHQ9dGhpcy5pc0NvbHVtblZpcnR1YWxpc2F0aW9uU3VwcHJlc3NlZCgpP251bGw6dGhpcy5pc0NvbHVtbkluUm93Vmlld3BvcnQuYmluZCh0aGlzKTtyZXR1cm4gdGhpcy5nZXREaXNwbGF5ZWRDb2x1bW5zRm9yUm93KGUsdGhpcy5kaXNwbGF5ZWRDb2x1bW5zQ2VudGVyLHQsZT0+e2NvbnN0IHQ9ZS5nZXRMZWZ0KCk7cmV0dXJuIGIodCkmJnQ+dGhpcy52aWV3cG9ydExlZnR9KX1pc0NvbHVtbkF0RWRnZShlLHQpe2NvbnN0IGk9dGhpcy5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCk7aWYoIWkubGVuZ3RoKXJldHVybiExO2NvbnN0IHM9ImZpcnN0Ij09PXQ7bGV0IHI7aWYoZSBpbnN0YW5jZW9mIGF0KXtjb25zdCB0PWUuZ2V0RGlzcGxheWVkTGVhZkNvbHVtbnMoKTtpZighdC5sZW5ndGgpcmV0dXJuITE7cj1zP3RbMF06T2UodCl9ZWxzZSByPWU7cmV0dXJuKHM/aVswXTpPZShpKSk9PT1yfWdldEFyaWFDb2x1bW5JbmRleChlKXtsZXQgdDtyZXR1cm4gdD1lIGluc3RhbmNlb2YgYXQ/ZS5nZXRMZWFmQ29sdW1ucygpWzBdOmUsdGhpcy5hcmlhT3JkZXJDb2x1bW5zLmluZGV4T2YodCkrMX1pc0NvbHVtbkluSGVhZGVyVmlld3BvcnQoZSl7cmV0dXJuISFlLmlzQXV0b0hlYWRlckhlaWdodCgpfHx0aGlzLmlzQ29sdW1uSW5Sb3dWaWV3cG9ydChlKX1pc0NvbHVtbkluUm93Vmlld3BvcnQoZSl7aWYoZS5pc0F1dG9IZWlnaHQoKSlyZXR1cm4hMDtjb25zdCB0PWUuZ2V0TGVmdCgpfHwwLGk9dCtlLmdldEFjdHVhbFdpZHRoKCkscz10aGlzLnZpZXdwb3J0TGVmdC0yMDAscj10aGlzLnZpZXdwb3J0UmlnaHQrMjAwO3JldHVybiEodDxzJiZpPHMpJiYhKHQ+ciYmaT5yKX1nZXREaXNwbGF5ZWRDb2x1bW5zTGVmdFdpZHRoKCl7cmV0dXJuIHRoaXMuZ2V0V2lkdGhPZkNvbHNJbkxpc3QodGhpcy5kaXNwbGF5ZWRDb2x1bW5zTGVmdCl9Z2V0RGlzcGxheWVkQ29sdW1uc1JpZ2h0V2lkdGgoKXtyZXR1cm4gdGhpcy5nZXRXaWR0aE9mQ29sc0luTGlzdCh0aGlzLmRpc3BsYXllZENvbHVtbnNSaWdodCl9dXBkYXRlUHJpbWFyeUNvbHVtbkxpc3QoZSx0LGkscyxyLG8pe2lmKCFlfHxSKGUpKXJldHVybjtsZXQgbj0hMTtpZihlLmZvckVhY2goZT0+e2lmKCFlKXJldHVybjtjb25zdCByPXRoaXMuZ2V0UHJpbWFyeUNvbHVtbihlKTtpZihyKXtpZihpKXtpZih0LmluZGV4T2Yocik+PTApcmV0dXJuO3QucHVzaChyKX1lbHNle2lmKHQuaW5kZXhPZihyKTwwKXJldHVybjtJZSh0LHIpfXMociksbj0hMH19KSwhbilyZXR1cm47dGhpcy5hdXRvR3JvdXBzTmVlZEJ1aWxkaW5nJiZ0aGlzLnVwZGF0ZUdyaWRDb2x1bW5zKCksdGhpcy51cGRhdGVEaXNwbGF5ZWRDb2x1bW5zKG8pO2NvbnN0IGE9e3R5cGU6cixjb2x1bW5zOnQsY29sdW1uOjE9PT10Lmxlbmd0aD90WzBdOm51bGwsc291cmNlOm99O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoYSl9c2V0Um93R3JvdXBDb2x1bW5zKGUsdCl7dGhpcy5hdXRvR3JvdXBzTmVlZEJ1aWxkaW5nPSEwLHRoaXMuc2V0UHJpbWFyeUNvbHVtbkxpc3QoZSx0aGlzLnJvd0dyb3VwQ29sdW1ucyxsdC5FVkVOVF9DT0xVTU5fUk9XX0dST1VQX0NIQU5HRUQsITAsdGhpcy5zZXRSb3dHcm91cEFjdGl2ZS5iaW5kKHRoaXMpLHQpfXNldFJvd0dyb3VwQWN0aXZlKGUsdCxpKXtlIT09dC5pc1Jvd0dyb3VwQWN0aXZlKCkmJih0LnNldFJvd0dyb3VwQWN0aXZlKGUsaSksZSYmIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NSb3dHcm91cEhpZGVzQ29sdW1ucyIpJiZ0aGlzLnNldENvbHVtbnNWaXNpYmxlKFt0XSwhMSxpKSxlfHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzTWFrZUNvbHVtblZpc2libGVBZnRlclVuR3JvdXAiKXx8dGhpcy5zZXRDb2x1bW5zVmlzaWJsZShbdF0sITAsaSkpfWFkZFJvd0dyb3VwQ29sdW1ucyhlLHQpe3RoaXMuYXV0b0dyb3Vwc05lZWRCdWlsZGluZz0hMCx0aGlzLnVwZGF0ZVByaW1hcnlDb2x1bW5MaXN0KGUsdGhpcy5yb3dHcm91cENvbHVtbnMsITAsdGhpcy5zZXRSb3dHcm91cEFjdGl2ZS5iaW5kKHRoaXMsITApLGx0LkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRCx0KX1yZW1vdmVSb3dHcm91cENvbHVtbnMoZSx0KXt0aGlzLmF1dG9Hcm91cHNOZWVkQnVpbGRpbmc9ITAsdGhpcy51cGRhdGVQcmltYXJ5Q29sdW1uTGlzdChlLHRoaXMucm93R3JvdXBDb2x1bW5zLCExLHRoaXMuc2V0Um93R3JvdXBBY3RpdmUuYmluZCh0aGlzLCExKSxsdC5FVkVOVF9DT0xVTU5fUk9XX0dST1VQX0NIQU5HRUQsdCl9YWRkUGl2b3RDb2x1bW5zKGUsdCl7dGhpcy51cGRhdGVQcmltYXJ5Q29sdW1uTGlzdChlLHRoaXMucGl2b3RDb2x1bW5zLCEwLGU9PmUuc2V0UGl2b3RBY3RpdmUoITAsdCksbHQuRVZFTlRfQ09MVU1OX1BJVk9UX0NIQU5HRUQsdCl9c2V0UGl2b3RDb2x1bW5zKGUsdCl7dGhpcy5zZXRQcmltYXJ5Q29sdW1uTGlzdChlLHRoaXMucGl2b3RDb2x1bW5zLGx0LkVWRU5UX0NPTFVNTl9QSVZPVF9DSEFOR0VELCEwLChlLGkpPT57aS5zZXRQaXZvdEFjdGl2ZShlLHQpfSx0KX1yZW1vdmVQaXZvdENvbHVtbnMoZSx0KXt0aGlzLnVwZGF0ZVByaW1hcnlDb2x1bW5MaXN0KGUsdGhpcy5waXZvdENvbHVtbnMsITEsZT0+ZS5zZXRQaXZvdEFjdGl2ZSghMSx0KSxsdC5FVkVOVF9DT0xVTU5fUElWT1RfQ0hBTkdFRCx0KX1zZXRQcmltYXJ5Q29sdW1uTGlzdChlLHQsaSxzLHIsbyl7aWYoIXRoaXMuZ3JpZENvbHVtbnMpcmV0dXJuO2NvbnN0IG49bmV3IE1hcDt0LmZvckVhY2goKGUsdCk9Pm4uc2V0KGUsdCkpLHQubGVuZ3RoPTAsYihlKSYmZS5mb3JFYWNoKGU9Pntjb25zdCBpPXRoaXMuZ2V0UHJpbWFyeUNvbHVtbihlKTtpJiZ0LnB1c2goaSl9KSx0LmZvckVhY2goKGUsdCk9Pntjb25zdCBpPW4uZ2V0KGUpO3ZvaWQgMCE9PWk/cyYmaSE9PXR8fG4uZGVsZXRlKGUpOm4uc2V0KGUsMCl9KSwodGhpcy5wcmltYXJ5Q29sdW1uc3x8W10pLmZvckVhY2goZT0+e2NvbnN0IGk9dC5pbmRleE9mKGUpPj0wO3IoaSxlKX0pLHRoaXMuYXV0b0dyb3Vwc05lZWRCdWlsZGluZyYmdGhpcy51cGRhdGVHcmlkQ29sdW1ucygpLHRoaXMudXBkYXRlRGlzcGxheWVkQ29sdW1ucyhvKSx0aGlzLmRpc3BhdGNoQ29sdW1uQ2hhbmdlZEV2ZW50KGksWy4uLm4ua2V5cygpXSxvKX1zZXRWYWx1ZUNvbHVtbnMoZSx0KXt0aGlzLnNldFByaW1hcnlDb2x1bW5MaXN0KGUsdGhpcy52YWx1ZUNvbHVtbnMsbHQuRVZFTlRfQ09MVU1OX1ZBTFVFX0NIQU5HRUQsITEsdGhpcy5zZXRWYWx1ZUFjdGl2ZS5iaW5kKHRoaXMpLHQpfXNldFZhbHVlQWN0aXZlKGUsdCxpKXtpZihlIT09dC5pc1ZhbHVlQWN0aXZlKCkmJih0LnNldFZhbHVlQWN0aXZlKGUsaSksZSYmIXQuZ2V0QWdnRnVuYygpKSl7Y29uc3QgZT10aGlzLmFnZ0Z1bmNTZXJ2aWNlLmdldERlZmF1bHRBZ2dGdW5jKHQpO3Quc2V0QWdnRnVuYyhlKX19YWRkVmFsdWVDb2x1bW5zKGUsdCl7dGhpcy51cGRhdGVQcmltYXJ5Q29sdW1uTGlzdChlLHRoaXMudmFsdWVDb2x1bW5zLCEwLHRoaXMuc2V0VmFsdWVBY3RpdmUuYmluZCh0aGlzLCEwKSxsdC5FVkVOVF9DT0xVTU5fVkFMVUVfQ0hBTkdFRCx0KX1yZW1vdmVWYWx1ZUNvbHVtbnMoZSx0KXt0aGlzLnVwZGF0ZVByaW1hcnlDb2x1bW5MaXN0KGUsdGhpcy52YWx1ZUNvbHVtbnMsITEsdGhpcy5zZXRWYWx1ZUFjdGl2ZS5iaW5kKHRoaXMsITEpLGx0LkVWRU5UX0NPTFVNTl9WQUxVRV9DSEFOR0VELHQpfW5vcm1hbGlzZUNvbHVtbldpZHRoKGUsdCl7Y29uc3QgaT1lLmdldE1pbldpZHRoKCk7YihpKSYmdDxpJiYodD1pKTtjb25zdCBzPWUuZ2V0TWF4V2lkdGgoKTtyZXR1cm4gYihzKSYmZS5pc0dyZWF0ZXJUaGFuTWF4KHQpJiYodD1zKSx0fWdldFByaW1hcnlPckdyaWRDb2x1bW4oZSl7cmV0dXJuIHRoaXMuZ2V0UHJpbWFyeUNvbHVtbihlKXx8dGhpcy5nZXRHcmlkQ29sdW1uKGUpfXNldENvbHVtbldpZHRocyhlLHQsaSxzKXtjb25zdCByPVtdO2UuZm9yRWFjaChlPT57Y29uc3QgaT10aGlzLmdldFByaW1hcnlPckdyaWRDb2x1bW4oZS5rZXkpO2lmKCFpKXJldHVybjtyLnB1c2goe3dpZHRoOmUubmV3V2lkdGgscmF0aW9zOlsxXSxjb2x1bW5zOltpXX0pO2lmKCJzaGlmdCI9PT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNvbFJlc2l6ZURlZmF1bHQiKSYmKHQ9IXQpLHQpe2NvbnN0IHQ9dGhpcy5nZXREaXNwbGF5ZWRDb2xBZnRlcihpKTtpZighdClyZXR1cm47Y29uc3Qgcz1pLmdldEFjdHVhbFdpZHRoKCktZS5uZXdXaWR0aCxvPXQuZ2V0QWN0dWFsV2lkdGgoKStzO3IucHVzaCh7d2lkdGg6byxyYXRpb3M6WzFdLGNvbHVtbnM6W3RdfSl9fSksMCE9PXIubGVuZ3RoJiZ0aGlzLnJlc2l6ZUNvbHVtblNldHMoe3Jlc2l6ZVNldHM6cixmaW5pc2hlZDppLHNvdXJjZTpzfSl9Y2hlY2tNaW5BbmRNYXhXaWR0aHNGb3JTZXQoZSl7Y29uc3R7Y29sdW1uczp0LHdpZHRoOml9PWU7bGV0IHM9MCxyPTAsbz0hMDt0LmZvckVhY2goZT0+e2NvbnN0IHQ9ZS5nZXRNaW5XaWR0aCgpO3MrPXR8fDA7Y29uc3QgaT1lLmdldE1heFdpZHRoKCk7YihpKSYmaT4wP3IrPWk6bz0hMX0pO3JldHVybiBpPj1zJiYoIW98fGk8PXIpfXJlc2l6ZUNvbHVtblNldHMoZSl7Y29uc3R7cmVzaXplU2V0czp0LGZpbmlzaGVkOmksc291cmNlOnN9PWU7aWYoISghdHx8dC5ldmVyeShlPT50aGlzLmNoZWNrTWluQW5kTWF4V2lkdGhzRm9yU2V0KGUpKSkpe2lmKGkpe2NvbnN0IGU9dCYmdC5sZW5ndGg+MD90WzBdLmNvbHVtbnM6bnVsbDt0aGlzLmRpc3BhdGNoQ29sdW1uUmVzaXplZEV2ZW50KGUsaSxzKX1yZXR1cm59Y29uc3Qgcj1bXSxvPVtdO3QuZm9yRWFjaChlPT57Y29uc3R7d2lkdGg6dCxjb2x1bW5zOmkscmF0aW9zOm59PWUsYT17fSxsPXt9O2kuZm9yRWFjaChlPT5vLnB1c2goZSkpO2xldCBkPSEwLGM9MDtmb3IoO2Q7KXtpZihjKyssYz4xZTMpe2NvbnNvbGUuZXJyb3IoIkFHIEdyaWQ6IGluZmluaXRlIGxvb3AgaW4gcmVzaXplQ29sdW1uU2V0cyIpO2JyZWFrfWQ9ITE7Y29uc3QgZT1bXTtsZXQgcz0wLHI9dDtpLmZvckVhY2goKHQsaSk9PntpZihsW3QuZ2V0SWQoKV0pci09YVt0LmdldElkKCldO2Vsc2V7ZS5wdXNoKHQpO2NvbnN0IHI9bltpXTtzKz1yfX0pO2NvbnN0IG89MS9zO2UuZm9yRWFjaCgoaSxzKT0+e2xldCBjO3M9PT1lLmxlbmd0aC0xP2M9cjooYz1NYXRoLnJvdW5kKG5bc10qdCpvKSxyLT1jKTtjb25zdCBoPWkuZ2V0TWluV2lkdGgoKSx1PWkuZ2V0TWF4V2lkdGgoKTtiKGgpJiZjPGg/KGM9aCxsW2kuZ2V0SWQoKV09ITAsZD0hMCk6Yih1KSYmdT4wJiZjPnUmJihjPXUsbFtpLmdldElkKCldPSEwLGQ9ITApLGFbaS5nZXRJZCgpXT1jfSl9aS5mb3JFYWNoKGU9Pntjb25zdCB0PWFbZS5nZXRJZCgpXTtlLmdldEFjdHVhbFdpZHRoKCkhPT10JiYoZS5zZXRBY3R1YWxXaWR0aCh0LHMpLHIucHVzaChlKSl9KX0pO2NvbnN0IG49ci5sZW5ndGg+MDtsZXQgYT1bXTtuJiYoYT10aGlzLnJlZnJlc2hGbGV4ZWRDb2x1bW5zKHtyZXNpemluZ0NvbHM6byxza2lwU2V0TGVmdDohMH0pLHRoaXMuc2V0TGVmdFZhbHVlcyhzKSx0aGlzLnVwZGF0ZUJvZHlXaWR0aHMoKSx0aGlzLmNoZWNrVmlld3BvcnRDb2x1bW5zKCkpO2NvbnN0IGw9by5jb25jYXQoYSk7KG58fGkpJiZ0aGlzLmRpc3BhdGNoQ29sdW1uUmVzaXplZEV2ZW50KGwsaSxzLGEpfXNldENvbHVtbkFnZ0Z1bmMoZSx0LGkpe2lmKCFlKXJldHVybjtjb25zdCBzPXRoaXMuZ2V0UHJpbWFyeUNvbHVtbihlKTtzJiYocy5zZXRBZ2dGdW5jKHQpLHRoaXMuZGlzcGF0Y2hDb2x1bW5DaGFuZ2VkRXZlbnQobHQuRVZFTlRfQ09MVU1OX1ZBTFVFX0NIQU5HRUQsW3NdLGkpKX1tb3ZlUm93R3JvdXBDb2x1bW4oZSx0LGkpe2lmKHRoaXMuaXNSb3dHcm91cEVtcHR5KCkpcmV0dXJuO2NvbnN0IHM9dGhpcy5yb3dHcm91cENvbHVtbnNbZV0scj10aGlzLnJvd0dyb3VwQ29sdW1ucy5zbGljZShlLHQpO3RoaXMucm93R3JvdXBDb2x1bW5zLnNwbGljZShlLDEpLHRoaXMucm93R3JvdXBDb2x1bW5zLnNwbGljZSh0LDAscyk7Y29uc3Qgbz17dHlwZTpsdC5FVkVOVF9DT0xVTU5fUk9XX0dST1VQX0NIQU5HRUQsY29sdW1uczpyLGNvbHVtbjoxPT09ci5sZW5ndGg/clswXTpudWxsLHNvdXJjZTppfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KG8pfW1vdmVDb2x1bW5zKGUsdCxpLHM9ITApe2lmKCF0aGlzLmdyaWRDb2x1bW5zKXJldHVybjtpZih0aGlzLmNvbHVtbkFuaW1hdGlvblNlcnZpY2Uuc3RhcnQoKSx0PnRoaXMuZ3JpZENvbHVtbnMubGVuZ3RoLWUubGVuZ3RoKXJldHVybiBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IHRyaWVkIHRvIGluc2VydCBjb2x1bW5zIGluIGludmFsaWQgbG9jYXRpb24sIHRvSW5kZXggPSAiK3QpLHZvaWQgY29uc29sZS53YXJuKCJBRyBHcmlkOiByZW1lbWJlciB0aGF0IHlvdSBzaG91bGQgbm90IGNvdW50IHRoZSBtb3ZpbmcgY29sdW1ucyB3aGVuIGNhbGN1bGF0aW5nIHRoZSBuZXcgaW5kZXgiKTtjb25zdCByPXRoaXMuZ2V0R3JpZENvbHVtbnMoZSk7IXRoaXMuZG9lc01vdmVQYXNzUnVsZXMocix0KXx8KFZlKHRoaXMuZ3JpZENvbHVtbnMscix0KSx0aGlzLnVwZGF0ZURpc3BsYXllZENvbHVtbnMoaSksdGhpcy5kaXNwYXRjaENvbHVtbk1vdmVkRXZlbnQoe21vdmVkQ29sdW1uczpyLHNvdXJjZTppLHRvSW5kZXg6dCxmaW5pc2hlZDpzfSksdGhpcy5jb2x1bW5BbmltYXRpb25TZXJ2aWNlLmZpbmlzaCgpKX1kb2VzTW92ZVBhc3NSdWxlcyhlLHQpe2NvbnN0IGk9dGhpcy5nZXRQcm9wb3NlZENvbHVtbk9yZGVyKGUsdCk7cmV0dXJuIHRoaXMuZG9lc09yZGVyUGFzc1J1bGVzKGkpfWRvZXNPcmRlclBhc3NSdWxlcyhlKXtyZXR1cm4hIXRoaXMuZG9lc01vdmVQYXNzTWFycnlDaGlsZHJlbihlKSYmISF0aGlzLmRvZXNNb3ZlUGFzc0xvY2tlZFBvc2l0aW9ucyhlKX1nZXRQcm9wb3NlZENvbHVtbk9yZGVyKGUsdCl7Y29uc3QgaT10aGlzLmdyaWRDb2x1bW5zLnNsaWNlKCk7cmV0dXJuIFZlKGksZSx0KSxpfXNvcnRDb2x1bW5zTGlrZUdyaWRDb2x1bW5zKGUpe2lmKCFlfHxlLmxlbmd0aDw9MSlyZXR1cm47ZS5maWx0ZXIoZT0+dGhpcy5ncmlkQ29sdW1ucy5pbmRleE9mKGUpPDApLmxlbmd0aD4wfHxlLnNvcnQoKGUsdCk9PnRoaXMuZ3JpZENvbHVtbnMuaW5kZXhPZihlKS10aGlzLmdyaWRDb2x1bW5zLmluZGV4T2YodCkpfWRvZXNNb3ZlUGFzc0xvY2tlZFBvc2l0aW9ucyhlKXtsZXQgdD0wLGk9ITA7cmV0dXJuIGUuZm9yRWFjaChlPT57Y29uc3Qgcz0ocj1lLmdldENvbERlZigpLmxvY2tQb3NpdGlvbik/ITA9PT1yfHwibGVmdCI9PT1yPzA6MjoxO3ZhciByO3M8dCYmKGk9ITEpLHQ9c30pLGl9ZG9lc01vdmVQYXNzTWFycnlDaGlsZHJlbihlKXtsZXQgdD0hMDtyZXR1cm4gdGhpcy5jb2x1bW5VdGlscy5kZXB0aEZpcnN0T3JpZ2luYWxUcmVlU2VhcmNoKG51bGwsdGhpcy5ncmlkQmFsYW5jZWRUcmVlLGk9PntpZighKGkgaW5zdGFuY2VvZiB4ZSkpcmV0dXJuO2NvbnN0IHM9aSxyPXMuZ2V0Q29sR3JvdXBEZWYoKTtpZighKHImJnIubWFycnlDaGlsZHJlbikpcmV0dXJuO2NvbnN0IG89W107cy5nZXRMZWFmQ29sdW1ucygpLmZvckVhY2godD0+e2NvbnN0IGk9ZS5pbmRleE9mKHQpO28ucHVzaChpKX0pO01hdGgubWF4LmFwcGx5KE1hdGgsbyktTWF0aC5taW4uYXBwbHkoTWF0aCxvKT5zLmdldExlYWZDb2x1bW5zKCkubGVuZ3RoLTEmJih0PSExKX0pLHR9bW92ZUNvbHVtbkJ5SW5kZXgoZSx0LGkpe2lmKCF0aGlzLmdyaWRDb2x1bW5zKXJldHVybjtjb25zdCBzPXRoaXMuZ3JpZENvbHVtbnNbZV07dGhpcy5tb3ZlQ29sdW1ucyhbc10sdCxpKX1nZXRDb2x1bW5EZWZzKCl7aWYoIXRoaXMucHJpbWFyeUNvbHVtbnMpcmV0dXJuO2NvbnN0IGU9dGhpcy5wcmltYXJ5Q29sdW1ucy5zbGljZSgpO3JldHVybiB0aGlzLmdyaWRDb2xzQXJlUHJpbWFyeT9lLnNvcnQoKGUsdCk9PnRoaXMuZ3JpZENvbHVtbnMuaW5kZXhPZihlKS10aGlzLmdyaWRDb2x1bW5zLmluZGV4T2YodCkpOnRoaXMubGFzdFByaW1hcnlPcmRlciYmZS5zb3J0KChlLHQpPT50aGlzLmxhc3RQcmltYXJ5T3JkZXIuaW5kZXhPZihlKS10aGlzLmxhc3RQcmltYXJ5T3JkZXIuaW5kZXhPZih0KSksdGhpcy5jb2x1bW5EZWZGYWN0b3J5LmJ1aWxkQ29sdW1uRGVmcyhlLHRoaXMucm93R3JvdXBDb2x1bW5zLHRoaXMucGl2b3RDb2x1bW5zKX1nZXRCb2R5Q29udGFpbmVyV2lkdGgoKXtyZXR1cm4gdGhpcy5ib2R5V2lkdGh9Z2V0Q29udGFpbmVyV2lkdGgoZSl7c3dpdGNoKGUpe2Nhc2UibGVmdCI6cmV0dXJuIHRoaXMubGVmdFdpZHRoO2Nhc2UicmlnaHQiOnJldHVybiB0aGlzLnJpZ2h0V2lkdGg7ZGVmYXVsdDpyZXR1cm4gdGhpcy5ib2R5V2lkdGh9fXVwZGF0ZUJvZHlXaWR0aHMoKXtjb25zdCBlPXRoaXMuZ2V0V2lkdGhPZkNvbHNJbkxpc3QodGhpcy5kaXNwbGF5ZWRDb2x1bW5zQ2VudGVyKSx0PXRoaXMuZ2V0V2lkdGhPZkNvbHNJbkxpc3QodGhpcy5kaXNwbGF5ZWRDb2x1bW5zTGVmdCksaT10aGlzLmdldFdpZHRoT2ZDb2xzSW5MaXN0KHRoaXMuZGlzcGxheWVkQ29sdW1uc1JpZ2h0KTt0aGlzLmJvZHlXaWR0aERpcnR5PXRoaXMuYm9keVdpZHRoIT09ZTtpZih0aGlzLmJvZHlXaWR0aCE9PWV8fHRoaXMubGVmdFdpZHRoIT09dHx8dGhpcy5yaWdodFdpZHRoIT09aSl7dGhpcy5ib2R5V2lkdGg9ZSx0aGlzLmxlZnRXaWR0aD10LHRoaXMucmlnaHRXaWR0aD1pO2NvbnN0IHM9e3R5cGU6bHQuRVZFTlRfQ09MVU1OX0NPTlRBSU5FUl9XSURUSF9DSEFOR0VEfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHMpO2NvbnN0IHI9e3R5cGU6bHQuRVZFTlRfRElTUExBWUVEX0NPTFVNTlNfV0lEVEhfQ0hBTkdFRH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChyKX19Z2V0VmFsdWVDb2x1bW5zKCl7cmV0dXJuIHRoaXMudmFsdWVDb2x1bW5zP3RoaXMudmFsdWVDb2x1bW5zOltdfWdldFBpdm90Q29sdW1ucygpe3JldHVybiB0aGlzLnBpdm90Q29sdW1ucz90aGlzLnBpdm90Q29sdW1uczpbXX1pc1Bpdm90QWN0aXZlKCl7cmV0dXJuIHRoaXMucGl2b3RDb2x1bW5zJiZ0aGlzLnBpdm90Q29sdW1ucy5sZW5ndGg+MCYmdGhpcy5waXZvdE1vZGV9Z2V0Um93R3JvdXBDb2x1bW5zKCl7cmV0dXJuIHRoaXMucm93R3JvdXBDb2x1bW5zP3RoaXMucm93R3JvdXBDb2x1bW5zOltdfWdldERpc3BsYXllZENlbnRlckNvbHVtbnMoKXtyZXR1cm4gdGhpcy5kaXNwbGF5ZWRDb2x1bW5zQ2VudGVyfWdldERpc3BsYXllZExlZnRDb2x1bW5zKCl7cmV0dXJuIHRoaXMuZGlzcGxheWVkQ29sdW1uc0xlZnR9Z2V0RGlzcGxheWVkUmlnaHRDb2x1bW5zKCl7cmV0dXJuIHRoaXMuZGlzcGxheWVkQ29sdW1uc1JpZ2h0fWdldERpc3BsYXllZENvbHVtbnMoZSl7c3dpdGNoKGUpe2Nhc2UibGVmdCI6cmV0dXJuIHRoaXMuZ2V0RGlzcGxheWVkTGVmdENvbHVtbnMoKTtjYXNlInJpZ2h0IjpyZXR1cm4gdGhpcy5nZXREaXNwbGF5ZWRSaWdodENvbHVtbnMoKTtkZWZhdWx0OnJldHVybiB0aGlzLmdldERpc3BsYXllZENlbnRlckNvbHVtbnMoKX19Z2V0QWxsUHJpbWFyeUNvbHVtbnMoKXtyZXR1cm4gdGhpcy5wcmltYXJ5Q29sdW1ucz90aGlzLnByaW1hcnlDb2x1bW5zOm51bGx9Z2V0U2Vjb25kYXJ5Q29sdW1ucygpe3JldHVybiB0aGlzLnNlY29uZGFyeUNvbHVtbnM/dGhpcy5zZWNvbmRhcnlDb2x1bW5zOm51bGx9Z2V0QWxsQ29sdW1uc0ZvclF1aWNrRmlsdGVyKCl7cmV0dXJuIHRoaXMuY29sdW1uc0ZvclF1aWNrRmlsdGVyfWdldEFsbEdyaWRDb2x1bW5zKCl7dmFyIGU7cmV0dXJuIG51bGwhPT0oZT10aGlzLmdyaWRDb2x1bW5zKSYmdm9pZCAwIT09ZT9lOltdfWlzRW1wdHkoKXtyZXR1cm4gUih0aGlzLmdyaWRDb2x1bW5zKX1pc1Jvd0dyb3VwRW1wdHkoKXtyZXR1cm4gUih0aGlzLnJvd0dyb3VwQ29sdW1ucyl9c2V0Q29sdW1uc1Zpc2libGUoZSx0PSExLGkpe3RoaXMuYXBwbHlDb2x1bW5TdGF0ZSh7c3RhdGU6ZS5tYXAoZT0+KHtjb2xJZDoic3RyaW5nIj09dHlwZW9mIGU/ZTplLmdldENvbElkKCksaGlkZTohdH0pKX0saSl9c2V0Q29sdW1uc1Bpbm5lZChlLHQsaSl7aWYoIXRoaXMuZ3JpZENvbHVtbnMpcmV0dXJuO2lmKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzRG9tTGF5b3V0KCJwcmludCIpKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZDogQ2hhbmdpbmcgdGhlIGNvbHVtbiBwaW5uaW5nIHN0YXR1cyBpcyBub3QgYWxsb3dlZCB3aXRoIGRvbUxheW91dD0ncHJpbnQnIik7bGV0IHM7dGhpcy5jb2x1bW5BbmltYXRpb25TZXJ2aWNlLnN0YXJ0KCkscz0hMD09PXR8fCJsZWZ0Ij09PXQ/ImxlZnQiOiJyaWdodCI9PT10PyJyaWdodCI6bnVsbCx0aGlzLmFjdGlvbk9uR3JpZENvbHVtbnMoZSxlPT5lLmdldFBpbm5lZCgpIT09cyYmKGUuc2V0UGlubmVkKHMpLCEwKSxpLCgpPT4oe3R5cGU6bHQuRVZFTlRfQ09MVU1OX1BJTk5FRCxwaW5uZWQ6cyxjb2x1bW46bnVsbCxjb2x1bW5zOm51bGwsc291cmNlOml9KSksdGhpcy5jb2x1bW5BbmltYXRpb25TZXJ2aWNlLmZpbmlzaCgpfWFjdGlvbk9uR3JpZENvbHVtbnMoZSx0LGkscyl7aWYoUihlKSlyZXR1cm47Y29uc3Qgcj1bXTtpZihlLmZvckVhY2goZT0+e2lmKCFlKXJldHVybjtjb25zdCBpPXRoaXMuZ2V0R3JpZENvbHVtbihlKTtpZighaSlyZXR1cm47ITEhPT10KGkpJiZyLnB1c2goaSl9KSxyLmxlbmd0aCYmKHRoaXMudXBkYXRlRGlzcGxheWVkQ29sdW1ucyhpKSxiKHMpJiZzKSl7Y29uc3QgZT1zKCk7ZS5jb2x1bW5zPXIsZS5jb2x1bW49MT09PXIubGVuZ3RoP3JbMF06bnVsbCx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfX1nZXREaXNwbGF5ZWRDb2xCZWZvcmUoZSl7Y29uc3QgdD10aGlzLmdldEFsbERpc3BsYXllZENvbHVtbnMoKSxpPXQuaW5kZXhPZihlKTtyZXR1cm4gaT4wP3RbaS0xXTpudWxsfWdldERpc3BsYXllZENvbEFmdGVyKGUpe2NvbnN0IHQ9dGhpcy5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCksaT10LmluZGV4T2YoZSk7cmV0dXJuIGk8dC5sZW5ndGgtMT90W2krMV06bnVsbH1nZXREaXNwbGF5ZWRHcm91cEFmdGVyKGUpe3JldHVybiB0aGlzLmdldERpc3BsYXllZEdyb3VwQXREaXJlY3Rpb24oZSwiQWZ0ZXIiKX1nZXREaXNwbGF5ZWRHcm91cEJlZm9yZShlKXtyZXR1cm4gdGhpcy5nZXREaXNwbGF5ZWRHcm91cEF0RGlyZWN0aW9uKGUsIkJlZm9yZSIpfWdldERpc3BsYXllZEdyb3VwQXREaXJlY3Rpb24oZSx0KXtjb25zdCBpPWUuZ2V0UHJvdmlkZWRDb2x1bW5Hcm91cCgpLmdldExldmVsKCkrZS5nZXRQYWRkaW5nTGV2ZWwoKSxzPWUuZ2V0RGlzcGxheWVkTGVhZkNvbHVtbnMoKSxyPSJBZnRlciI9PT10P09lKHMpOnNbMF0sbz0iZ2V0RGlzcGxheWVkQ29sIit0O2Zvcig7Oyl7Y29uc3QgdD10aGlzW29dKHIpO2lmKCF0KXJldHVybiBudWxsO2NvbnN0IHM9dGhpcy5nZXRDb2x1bW5Hcm91cEF0TGV2ZWwodCxpKTtpZihzIT09ZSlyZXR1cm4gc319Z2V0Q29sdW1uR3JvdXBBdExldmVsKGUsdCl7bGV0IGkscyxyPWUuZ2V0UGFyZW50KCk7Zm9yKDs7KXtpZihpPXIuZ2V0UHJvdmlkZWRDb2x1bW5Hcm91cCgpLmdldExldmVsKCkscz1yLmdldFBhZGRpbmdMZXZlbCgpLGkrczw9dClicmVhaztyPXIuZ2V0UGFyZW50KCl9cmV0dXJuIHJ9aXNQaW5uaW5nTGVmdCgpe3JldHVybiB0aGlzLmRpc3BsYXllZENvbHVtbnNMZWZ0Lmxlbmd0aD4wfWlzUGlubmluZ1JpZ2h0KCl7cmV0dXJuIHRoaXMuZGlzcGxheWVkQ29sdW1uc1JpZ2h0Lmxlbmd0aD4wfWdldFByaW1hcnlBbmRTZWNvbmRhcnlBbmRBdXRvQ29sdW1ucygpe3JldHVybltdLmNvbmNhdCh0aGlzLnByaW1hcnlDb2x1bW5zfHxbXSx0aGlzLmdyb3VwQXV0b0NvbHVtbnN8fFtdLHRoaXMuc2Vjb25kYXJ5Q29sdW1uc3x8W10pfWNyZWF0ZVN0YXRlSXRlbUZyb21Db2x1bW4oZSl7Y29uc3QgdD1lLmlzUm93R3JvdXBBY3RpdmUoKT90aGlzLnJvd0dyb3VwQ29sdW1ucy5pbmRleE9mKGUpOm51bGwsaT1lLmlzUGl2b3RBY3RpdmUoKT90aGlzLnBpdm90Q29sdW1ucy5pbmRleE9mKGUpOm51bGwscz1lLmlzVmFsdWVBY3RpdmUoKT9lLmdldEFnZ0Z1bmMoKTpudWxsLHI9bnVsbCE9ZS5nZXRTb3J0KCk/ZS5nZXRTb3J0KCk6bnVsbCxvPW51bGwhPWUuZ2V0U29ydEluZGV4KCk/ZS5nZXRTb3J0SW5kZXgoKTpudWxsLG49bnVsbCE9ZS5nZXRGbGV4KCkmJmUuZ2V0RmxleCgpPjA/ZS5nZXRGbGV4KCk6bnVsbDtyZXR1cm57Y29sSWQ6ZS5nZXRDb2xJZCgpLHdpZHRoOmUuZ2V0QWN0dWFsV2lkdGgoKSxoaWRlOiFlLmlzVmlzaWJsZSgpLHBpbm5lZDplLmdldFBpbm5lZCgpLHNvcnQ6cixzb3J0SW5kZXg6byxhZ2dGdW5jOnMscm93R3JvdXA6ZS5pc1Jvd0dyb3VwQWN0aXZlKCkscm93R3JvdXBJbmRleDp0LHBpdm90OmUuaXNQaXZvdEFjdGl2ZSgpLHBpdm90SW5kZXg6aSxmbGV4Om59fWdldENvbHVtblN0YXRlKCl7aWYoRSh0aGlzLnByaW1hcnlDb2x1bW5zKXx8IXRoaXMuaXNBbGl2ZSgpKXJldHVybltdO2NvbnN0IGU9dGhpcy5nZXRQcmltYXJ5QW5kU2Vjb25kYXJ5QW5kQXV0b0NvbHVtbnMoKS5tYXAodGhpcy5jcmVhdGVTdGF0ZUl0ZW1Gcm9tQ29sdW1uLmJpbmQodGhpcykpO3JldHVybiB0aGlzLm9yZGVyQ29sdW1uU3RhdGVMaXN0KGUpLGV9b3JkZXJDb2x1bW5TdGF0ZUxpc3QoZSl7Y29uc3QgdD15dCh0aGlzLmdyaWRDb2x1bW5zLm1hcCgoZSx0KT0+W2UuZ2V0Q29sSWQoKSx0XSkpO2Uuc29ydCgoZSxpKT0+KHQuaGFzKGUuY29sSWQpP3QuZ2V0KGUuY29sSWQpOi0xKS0odC5oYXMoaS5jb2xJZCk/dC5nZXQoaS5jb2xJZCk6LTEpKX1yZXNldENvbHVtblN0YXRlKGUpe2lmKFIodGhpcy5wcmltYXJ5Q29sdW1ucykpcmV0dXJuO2NvbnN0IHQ9dGhpcy5nZXRDb2x1bW5zRnJvbVRyZWUodGhpcy5wcmltYXJ5Q29sdW1uVHJlZSksaT1bXTtsZXQgcz0xZTMscj0xZTMsbz1bXTt0aGlzLmdyb3VwQXV0b0NvbHVtbnMmJihvPW8uY29uY2F0KHRoaXMuZ3JvdXBBdXRvQ29sdW1ucykpLHQmJihvPW8uY29uY2F0KHQpKSxvLmZvckVhY2goZT0+e2NvbnN0IHQ9dGhpcy5nZXRDb2x1bW5TdGF0ZUZyb21Db2xEZWYoZSk7RSh0LnJvd0dyb3VwSW5kZXgpJiZ0LnJvd0dyb3VwJiYodC5yb3dHcm91cEluZGV4PXMrKyksRSh0LnBpdm90SW5kZXgpJiZ0LnBpdm90JiYodC5waXZvdEluZGV4PXIrKyksaS5wdXNoKHQpfSksdGhpcy5hcHBseUNvbHVtblN0YXRlKHtzdGF0ZTppLGFwcGx5T3JkZXI6ITB9LGUpfWdldENvbHVtblN0YXRlRnJvbUNvbERlZihlKXtjb25zdCB0PShlLHQpPT5udWxsIT1lP2U6bnVsbCE9dD90Om51bGwsaT1lLmdldENvbERlZigpLHM9dChpLnNvcnQsaS5pbml0aWFsU29ydCkscj10KGkuc29ydEluZGV4LGkuaW5pdGlhbFNvcnRJbmRleCksbz10KGkuaGlkZSxpLmluaXRpYWxIaWRlKSxuPXQoaS5waW5uZWQsaS5pbml0aWFsUGlubmVkKSxhPXQoaS53aWR0aCxpLmluaXRpYWxXaWR0aCksbD10KGkuZmxleCxpLmluaXRpYWxGbGV4KTtsZXQgZD10KGkucm93R3JvdXBJbmRleCxpLmluaXRpYWxSb3dHcm91cEluZGV4KSxjPXQoaS5yb3dHcm91cCxpLmluaXRpYWxSb3dHcm91cCk7bnVsbCE9ZHx8bnVsbCE9YyYmMCE9Y3x8KGQ9bnVsbCxjPW51bGwpO2xldCBoPXQoaS5waXZvdEluZGV4LGkuaW5pdGlhbFBpdm90SW5kZXgpLHU9dChpLnBpdm90LGkuaW5pdGlhbFBpdm90KTtudWxsIT1ofHxudWxsIT11JiYwIT11fHwoaD1udWxsLHU9bnVsbCk7Y29uc3QgcD10KGkuYWdnRnVuYyxpLmluaXRpYWxBZ2dGdW5jKTtyZXR1cm57Y29sSWQ6ZS5nZXRDb2xJZCgpLHNvcnQ6cyxzb3J0SW5kZXg6cixoaWRlOm8scGlubmVkOm4sd2lkdGg6YSxmbGV4Omwscm93R3JvdXA6Yyxyb3dHcm91cEluZGV4OmQscGl2b3Q6dSxwaXZvdEluZGV4OmgsYWdnRnVuYzpwfX1hcHBseUNvbHVtblN0YXRlKGUsdCl7aWYoUih0aGlzLnByaW1hcnlDb2x1bW5zKSlyZXR1cm4hMTtpZihlJiZlLnN0YXRlJiYhZS5zdGF0ZS5mb3JFYWNoKXJldHVybiBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGFwcGx5Q29sdW1uU3RhdGUoKSAtIHRoZSBzdGF0ZSBhdHRyaWJ1dGUgc2hvdWxkIGJlIGFuIGFycmF5LCBob3dldmVyIGFuIGFycmF5IHdhcyBub3QgZm91bmQuIFBsZWFzZSBwcm92aWRlIGFuIGFycmF5IG9mIGl0ZW1zIChvbmUgZm9yIGVhY2ggY29sIHlvdSB3YW50IHRvIGNoYW5nZSkgZm9yIHN0YXRlLiIpLCExO2NvbnN0IGk9KGkscyxyKT0+e2NvbnN0IG89dGhpcy5jb21wYXJlQ29sdW1uU3RhdGVzQW5kRGlzcGF0Y2hFdmVudHModCk7dGhpcy5hdXRvR3JvdXBzTmVlZEJ1aWxkaW5nPSEwO2NvbnN0IG49cy5zbGljZSgpLGE9e30sbD17fSxkPVtdLGM9W107bGV0IGg9MDtjb25zdCB1PXRoaXMucm93R3JvdXBDb2x1bW5zLnNsaWNlKCkscD10aGlzLnBpdm90Q29sdW1ucy5zbGljZSgpO2kuZm9yRWFjaChpPT57Y29uc3Qgcz1pLmNvbElkfHwiIjtpZihzLnN0YXJ0c1dpdGgoImFnLUdyaWQtQXV0b0NvbHVtbiIpKXJldHVybiBkLnB1c2goaSksdm9pZCBjLnB1c2goaSk7Y29uc3Qgbz1yKHMpO28/KHRoaXMuc3luY0NvbHVtbldpdGhTdGF0ZUl0ZW0obyxpLGUuZGVmYXVsdFN0YXRlLGEsbCwhMSx0KSxJZShuLG8pKTooYy5wdXNoKGkpLGgrPTEpfSk7Y29uc3QgZz1pPT50aGlzLnN5bmNDb2x1bW5XaXRoU3RhdGVJdGVtKGksbnVsbCxlLmRlZmF1bHRTdGF0ZSxhLGwsITEsdCk7bi5mb3JFYWNoKGcpO2NvbnN0IG09KGUsdCxpLHMpPT57Y29uc3Qgcj1lW2kuZ2V0SWQoKV0sbz1lW3MuZ2V0SWQoKV0sbj1udWxsIT1yLGE9bnVsbCE9bztpZihuJiZhKXJldHVybiByLW87aWYobilyZXR1cm4tMTtpZihhKXJldHVybiAxO2NvbnN0IGw9dC5pbmRleE9mKGkpLGQ9dC5pbmRleE9mKHMpLGM9bD49MDtyZXR1cm4gYyYmZD49MD9sLWQ6Yz8tMToxfTt0aGlzLnJvd0dyb3VwQ29sdW1ucy5zb3J0KG0uYmluZCh0aGlzLGEsdSkpLHRoaXMucGl2b3RDb2x1bW5zLnNvcnQobS5iaW5kKHRoaXMsbCxwKSksdGhpcy51cGRhdGVHcmlkQ29sdW1ucygpO2NvbnN0IGY9dGhpcy5ncm91cEF1dG9Db2x1bW5zP3RoaXMuZ3JvdXBBdXRvQ29sdW1ucy5zbGljZSgpOltdO3JldHVybiBkLmZvckVhY2goaT0+e2NvbnN0IHM9dGhpcy5nZXRBdXRvQ29sdW1uKGkuY29sSWQpO0llKGYscyksdGhpcy5zeW5jQ29sdW1uV2l0aFN0YXRlSXRlbShzLGksZS5kZWZhdWx0U3RhdGUsbnVsbCxudWxsLCEwLHQpfSksZi5mb3JFYWNoKGcpLHRoaXMuYXBwbHlPcmRlckFmdGVyQXBwbHlTdGF0ZShlKSx0aGlzLnVwZGF0ZURpc3BsYXllZENvbHVtbnModCksdGhpcy5kaXNwYXRjaEV2ZXJ5dGhpbmdDaGFuZ2VkKHQpLG8oKSx7dW5tYXRjaGVkQW5kQXV0b1N0YXRlczpjLHVubWF0Y2hlZENvdW50Omh9fTt0aGlzLmNvbHVtbkFuaW1hdGlvblNlcnZpY2Uuc3RhcnQoKTtsZXR7dW5tYXRjaGVkQW5kQXV0b1N0YXRlczpzLHVubWF0Y2hlZENvdW50OnJ9PWkoZS5zdGF0ZXx8W10sdGhpcy5wcmltYXJ5Q29sdW1uc3x8W10sZT0+dGhpcy5nZXRQcmltYXJ5Q29sdW1uKGUpKTtyZXR1cm4ocy5sZW5ndGg+MHx8YihlLmRlZmF1bHRTdGF0ZSkpJiYocj1pKHMsdGhpcy5zZWNvbmRhcnlDb2x1bW5zfHxbXSxlPT50aGlzLmdldFNlY29uZGFyeUNvbHVtbihlKSkudW5tYXRjaGVkQ291bnQpLHRoaXMuY29sdW1uQW5pbWF0aW9uU2VydmljZS5maW5pc2goKSwwPT09cn1hcHBseU9yZGVyQWZ0ZXJBcHBseVN0YXRlKGUpe2lmKCFlLmFwcGx5T3JkZXJ8fCFlLnN0YXRlKXJldHVybjtsZXQgdD1bXTtjb25zdCBpPXt9O2Uuc3RhdGUuZm9yRWFjaChlPT57aWYoIWUuY29sSWR8fGlbZS5jb2xJZF0pcmV0dXJuO2NvbnN0IHM9dGhpcy5ncmlkQ29sdW1uc01hcFtlLmNvbElkXTtzJiYodC5wdXNoKHMpLGlbZS5jb2xJZF09ITApfSk7bGV0IHM9MDt0aGlzLmdyaWRDb2x1bW5zLmZvckVhY2goZT0+e2NvbnN0IHI9ZS5nZXRDb2xJZCgpO2lmKG51bGwhPWlbcl0pcmV0dXJuO3Iuc3RhcnRzV2l0aCgiYWctR3JpZC1BdXRvQ29sdW1uIik/a2UodCxlLHMrKyk6dC5wdXNoKGUpfSksdD10aGlzLnBsYWNlTG9ja2VkQ29sdW1ucyh0KSx0aGlzLmRvZXNNb3ZlUGFzc01hcnJ5Q2hpbGRyZW4odCk/dGhpcy5ncmlkQ29sdW1ucz10OmNvbnNvbGUud2FybigiQUcgR3JpZDogQXBwbHlpbmcgY29sdW1uIG9yZGVyIGJyb2tlIGEgZ3JvdXAgd2hlcmUgY29sdW1ucyBzaG91bGQgYmUgbWFycmllZCB0b2dldGhlci4gQXBwbHlpbmcgbmV3IG9yZGVyIGhhcyBiZWVuIGRpc2NhcmRlZC4iKX1jb21wYXJlQ29sdW1uU3RhdGVzQW5kRGlzcGF0Y2hFdmVudHMoZSl7Y29uc3QgdD17cm93R3JvdXBDb2x1bW5zOnRoaXMucm93R3JvdXBDb2x1bW5zLnNsaWNlKCkscGl2b3RDb2x1bW5zOnRoaXMucGl2b3RDb2x1bW5zLnNsaWNlKCksdmFsdWVDb2x1bW5zOnRoaXMudmFsdWVDb2x1bW5zLnNsaWNlKCl9LGk9dGhpcy5nZXRDb2x1bW5TdGF0ZSgpLHM9e307cmV0dXJuIGkuZm9yRWFjaChlPT57c1tlLmNvbElkXT1lfSksKCk9Pntjb25zdCByPXRoaXMuZ2V0UHJpbWFyeUFuZFNlY29uZGFyeUFuZEF1dG9Db2x1bW5zKCksbz0odCxpLHMscik9PntpZihBZShpLm1hcChyKSxzLm1hcChyKSkpcmV0dXJuO2NvbnN0IG89bmV3IFNldChpKTtzLmZvckVhY2goZT0+e28uZGVsZXRlKGUpfHxvLmFkZChlKX0pO2NvbnN0IG49Wy4uLm9dLGE9e3R5cGU6dCxjb2x1bW5zOm4sY29sdW1uOjE9PT1uLmxlbmd0aD9uWzBdOm51bGwsc291cmNlOmV9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoYSl9LG49ZT0+e2NvbnN0IHQ9W107cmV0dXJuIHIuZm9yRWFjaChpPT57Y29uc3Qgcj1zW2kuZ2V0Q29sSWQoKV07ciYmZShyLGkpJiZ0LnB1c2goaSl9KSx0fSxhPWU9PmUuZ2V0Q29sSWQoKTtvKGx0LkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRCx0LnJvd0dyb3VwQ29sdW1ucyx0aGlzLnJvd0dyb3VwQ29sdW1ucyxhKSxvKGx0LkVWRU5UX0NPTFVNTl9QSVZPVF9DSEFOR0VELHQucGl2b3RDb2x1bW5zLHRoaXMucGl2b3RDb2x1bW5zLGEpO2NvbnN0IGw9bigoZSx0KT0+e2NvbnN0IGk9bnVsbCE9ZS5hZ2dGdW5jLHM9aSE9dC5pc1ZhbHVlQWN0aXZlKCkscj1pJiZlLmFnZ0Z1bmMhPXQuZ2V0QWdnRnVuYygpO3JldHVybiBzfHxyfSk7bC5sZW5ndGg+MCYmdGhpcy5kaXNwYXRjaENvbHVtbkNoYW5nZWRFdmVudChsdC5FVkVOVF9DT0xVTU5fVkFMVUVfQ0hBTkdFRCxsLGUpO3RoaXMuZGlzcGF0Y2hDb2x1bW5SZXNpemVkRXZlbnQobigoZSx0KT0+ZS53aWR0aCE9dC5nZXRBY3R1YWxXaWR0aCgpKSwhMCxlKTt0aGlzLmRpc3BhdGNoQ29sdW1uUGlubmVkRXZlbnQobigoZSx0KT0+ZS5waW5uZWQhPXQuZ2V0UGlubmVkKCkpLGUpO3RoaXMuZGlzcGF0Y2hDb2x1bW5WaXNpYmxlRXZlbnQobigoZSx0KT0+ZS5oaWRlPT10LmlzVmlzaWJsZSgpKSxlKTtjb25zdCBkPW4oKGUsdCk9PmUuc29ydCE9dC5nZXRTb3J0KCl8fGUuc29ydEluZGV4IT10LmdldFNvcnRJbmRleCgpKTtkLmxlbmd0aD4wJiZ0aGlzLnNvcnRDb250cm9sbGVyLmRpc3BhdGNoU29ydENoYW5nZWRFdmVudHMoZSxkKSx0aGlzLm5vcm1hbGlzZUNvbHVtbk1vdmVkRXZlbnRGb3JDb2x1bW5TdGF0ZShpLGUpfX1nZXRDb21tb25WYWx1ZShlLHQpe2lmKCFlfHwwPT1lLmxlbmd0aClyZXR1cm47Y29uc3QgaT10KGVbMF0pO2ZvcihsZXQgcz0xO3M8ZS5sZW5ndGg7cysrKWlmKGkhPT10KGVbc10pKXJldHVybjtyZXR1cm4gaX1ub3JtYWxpc2VDb2x1bW5Nb3ZlZEV2ZW50Rm9yQ29sdW1uU3RhdGUoZSx0KXtjb25zdCBpPXRoaXMuZ2V0Q29sdW1uU3RhdGUoKSxzPXt9O2kuZm9yRWFjaChlPT5zW2UuY29sSWRdPWUpO2NvbnN0IHI9e307ZS5mb3JFYWNoKGU9PntzW2UuY29sSWRdJiYocltlLmNvbElkXT0hMCl9KTtjb25zdCBvPWUuZmlsdGVyKGU9PnJbZS5jb2xJZF0pLG49aS5maWx0ZXIoZT0+cltlLmNvbElkXSksYT1bXTtuLmZvckVhY2goKGUsdCk9Pntjb25zdCBpPW8mJm9bdF07aWYoaSYmaS5jb2xJZCE9PWUuY29sSWQpe2NvbnN0IGU9dGhpcy5nZXRHcmlkQ29sdW1uKGkuY29sSWQpO2UmJmEucHVzaChlKX19KSxhLmxlbmd0aCYmdGhpcy5kaXNwYXRjaENvbHVtbk1vdmVkRXZlbnQoe21vdmVkQ29sdW1uczphLHNvdXJjZTp0LGZpbmlzaGVkOiEwfSl9c3luY0NvbHVtbldpdGhTdGF0ZUl0ZW0oZSx0LGkscyxyLG8sbil7aWYoIWUpcmV0dXJuO2NvbnN0IGE9KGUscyk9Pntjb25zdCByPXt2YWx1ZTE6dm9pZCAwLHZhbHVlMjp2b2lkIDB9O2xldCBvPSExO3JldHVybiB0JiYodm9pZCAwIT09dFtlXSYmKHIudmFsdWUxPXRbZV0sbz0hMCksYihzKSYmdm9pZCAwIT09dFtzXSYmKHIudmFsdWUyPXRbc10sbz0hMCkpLCFvJiZpJiYodm9pZCAwIT09aVtlXSYmKHIudmFsdWUxPWlbZV0pLGIocykmJnZvaWQgMCE9PWlbc10mJihyLnZhbHVlMj1pW3NdKSkscn0sbD1hKCJoaWRlIikudmFsdWUxO3ZvaWQgMCE9PWwmJmUuc2V0VmlzaWJsZSghbCxuKTtjb25zdCBkPWEoInBpbm5lZCIpLnZhbHVlMTt2b2lkIDAhPT1kJiZlLnNldFBpbm5lZChkKTtjb25zdCBjPXRoaXMuY29sdW1uVXRpbHMuY2FsY3VsYXRlQ29sTWluV2lkdGgoZS5nZXRDb2xEZWYoKSksaD1hKCJmbGV4IikudmFsdWUxO2lmKHZvaWQgMCE9PWgmJmUuc2V0RmxleChoKSxudWxsPT1oKXtjb25zdCB0PWEoIndpZHRoIikudmFsdWUxO251bGwhPXQmJm51bGwhPWMmJnQ+PWMmJmUuc2V0QWN0dWFsV2lkdGgodCxuKX1jb25zdCB1PWEoInNvcnQiKS52YWx1ZTE7dm9pZCAwIT09dSYmKCJkZXNjIj09PXV8fCJhc2MiPT09dT9lLnNldFNvcnQodSxuKTplLnNldFNvcnQodm9pZCAwLG4pKTtjb25zdCBwPWEoInNvcnRJbmRleCIpLnZhbHVlMTtpZih2b2lkIDAhPT1wJiZlLnNldFNvcnRJbmRleChwKSxvfHwhZS5pc1ByaW1hcnkoKSlyZXR1cm47Y29uc3QgZz1hKCJhZ2dGdW5jIikudmFsdWUxO3ZvaWQgMCE9PWcmJigic3RyaW5nIj09dHlwZW9mIGc/KGUuc2V0QWdnRnVuYyhnKSxlLmlzVmFsdWVBY3RpdmUoKXx8KGUuc2V0VmFsdWVBY3RpdmUoITAsbiksdGhpcy52YWx1ZUNvbHVtbnMucHVzaChlKSkpOihiKGcpJiZjb25zb2xlLndhcm4oIkFHIEdyaWQ6IHN0YXRlSXRlbS5hZ2dGdW5jIG11c3QgYmUgYSBzdHJpbmcuIGlmIHVzaW5nIHlvdXIgb3duIGFnZ3JlZ2F0aW9uIGZ1bmN0aW9ucywgcmVnaXN0ZXIgdGhlIGZ1bmN0aW9ucyBmaXJzdCBiZWZvcmUgdXNpbmcgdGhlbSBpbiBnZXQvc2V0IHN0YXRlLiBUaGlzIGlzIGJlY2F1c2UgaXQgaXMgaW50ZW5kZWQgZm9yIHRoZSBjb2x1bW4gc3RhdGUgdG8gYmUgc3RvcmVkIGFuZCByZXRyaWV2ZWQgYXMgc2ltcGxlIEpTT04uIiksZS5pc1ZhbHVlQWN0aXZlKCkmJihlLnNldFZhbHVlQWN0aXZlKCExLG4pLEllKHRoaXMudmFsdWVDb2x1bW5zLGUpKSkpO2NvbnN0e3ZhbHVlMTptLHZhbHVlMjpmfT1hKCJyb3dHcm91cCIsInJvd0dyb3VwSW5kZXgiKTt2b2lkIDA9PT1tJiZ2b2lkIDA9PT1mfHwoIm51bWJlciI9PXR5cGVvZiBmfHxtPyhlLmlzUm93R3JvdXBBY3RpdmUoKXx8KGUuc2V0Um93R3JvdXBBY3RpdmUoITAsbiksdGhpcy5yb3dHcm91cENvbHVtbnMucHVzaChlKSkscyYmIm51bWJlciI9PXR5cGVvZiBmJiYoc1tlLmdldElkKCldPWYpKTplLmlzUm93R3JvdXBBY3RpdmUoKSYmKGUuc2V0Um93R3JvdXBBY3RpdmUoITEsbiksSWUodGhpcy5yb3dHcm91cENvbHVtbnMsZSkpKTtjb25zdHt2YWx1ZTE6dix2YWx1ZTI6Q309YSgicGl2b3QiLCJwaXZvdEluZGV4Iik7dm9pZCAwPT09diYmdm9pZCAwPT09Q3x8KCJudW1iZXIiPT10eXBlb2YgQ3x8dj8oZS5pc1Bpdm90QWN0aXZlKCl8fChlLnNldFBpdm90QWN0aXZlKCEwLG4pLHRoaXMucGl2b3RDb2x1bW5zLnB1c2goZSkpLHImJiJudW1iZXIiPT10eXBlb2YgQyYmKHJbZS5nZXRJZCgpXT1DKSk6ZS5pc1Bpdm90QWN0aXZlKCkmJihlLnNldFBpdm90QWN0aXZlKCExLG4pLEllKHRoaXMucGl2b3RDb2x1bW5zLGUpKSl9Z2V0R3JpZENvbHVtbnMoZSl7cmV0dXJuIHRoaXMuZ2V0Q29sdW1ucyhlLHRoaXMuZ2V0R3JpZENvbHVtbi5iaW5kKHRoaXMpKX1nZXRDb2x1bW5zKGUsdCl7Y29uc3QgaT1bXTtyZXR1cm4gZSYmZS5mb3JFYWNoKGU9Pntjb25zdCBzPXQoZSk7cyYmaS5wdXNoKHMpfSksaX1nZXRDb2x1bW5XaXRoVmFsaWRhdGlvbihlKXtpZihudWxsPT1lKXJldHVybiBudWxsO2NvbnN0IHQ9dGhpcy5nZXRHcmlkQ29sdW1uKGUpO3JldHVybiB0fHxjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGNvdWxkIG5vdCBmaW5kIGNvbHVtbiAiK2UpLHR9Z2V0UHJpbWFyeUNvbHVtbihlKXtyZXR1cm4gdGhpcy5wcmltYXJ5Q29sdW1ucz90aGlzLmdldENvbHVtbihlLHRoaXMucHJpbWFyeUNvbHVtbnMsdGhpcy5wcmltYXJ5Q29sdW1uc01hcCk6bnVsbH1nZXRHcmlkQ29sdW1uKGUpe3JldHVybiB0aGlzLmdldENvbHVtbihlLHRoaXMuZ3JpZENvbHVtbnMsdGhpcy5ncmlkQ29sdW1uc01hcCl9bG9va3VwR3JpZENvbHVtbihlKXtyZXR1cm4gdGhpcy5ncmlkQ29sdW1uc01hcFtlXX1nZXRTZWNvbmRhcnlDb2x1bW4oZSl7cmV0dXJuIHRoaXMuc2Vjb25kYXJ5Q29sdW1ucz90aGlzLmdldENvbHVtbihlLHRoaXMuc2Vjb25kYXJ5Q29sdW1ucyx0aGlzLnNlY29uZGFyeUNvbHVtbnNNYXApOm51bGx9Z2V0Q29sdW1uKGUsdCxpKXtpZighZXx8IWkpcmV0dXJuIG51bGw7aWYoInN0cmluZyI9PXR5cGVvZiBlJiZpW2VdKXJldHVybiBpW2VdO2ZvcihsZXQgaT0wO2k8dC5sZW5ndGg7aSsrKWlmKHRoaXMuY29sdW1uc01hdGNoKHRbaV0sZSkpcmV0dXJuIHRbaV07cmV0dXJuIHRoaXMuZ2V0QXV0b0NvbHVtbihlKX1nZXRTb3VyY2VDb2x1bW5zRm9yR3JvdXBDb2x1bW4oZSl7Y29uc3QgdD1lLmdldENvbERlZigpLnNob3dSb3dHcm91cDtpZighdClyZXR1cm4gbnVsbDtpZighMD09PXQpcmV0dXJuIHRoaXMucm93R3JvdXBDb2x1bW5zLnNsaWNlKDApO2NvbnN0IGk9dGhpcy5nZXRQcmltYXJ5Q29sdW1uKHQpO3JldHVybiBpP1tpXTpudWxsfWdldEF1dG9Db2x1bW4oZSl7cmV0dXJuIHRoaXMuZ3JvdXBBdXRvQ29sdW1ucyYmYih0aGlzLmdyb3VwQXV0b0NvbHVtbnMpJiYhRSh0aGlzLmdyb3VwQXV0b0NvbHVtbnMpJiZ0aGlzLmdyb3VwQXV0b0NvbHVtbnMuZmluZCh0PT50aGlzLmNvbHVtbnNNYXRjaCh0LGUpKXx8bnVsbH1jb2x1bW5zTWF0Y2goZSx0KXtjb25zdCBpPWU9PT10LHM9ZS5nZXRDb2xEZWYoKT09PXQscj1lLmdldENvbElkKCk9PXQ7cmV0dXJuIGl8fHN8fHJ9Z2V0RGlzcGxheU5hbWVGb3JDb2x1bW4oZSx0LGk9ITEpe2lmKCFlKXJldHVybiBudWxsO2NvbnN0IHM9dGhpcy5nZXRIZWFkZXJOYW1lKGUuZ2V0Q29sRGVmKCksZSxudWxsLG51bGwsdCk7cmV0dXJuIGk/dGhpcy53cmFwSGVhZGVyTmFtZVdpdGhBZ2dGdW5jKGUscyk6c31nZXREaXNwbGF5TmFtZUZvclByb3ZpZGVkQ29sdW1uR3JvdXAoZSx0LGkpe2NvbnN0IHM9dD90LmdldENvbEdyb3VwRGVmKCk6bnVsbDtyZXR1cm4gcz90aGlzLmdldEhlYWRlck5hbWUocyxudWxsLGUsdCxpKTpudWxsfWdldERpc3BsYXlOYW1lRm9yQ29sdW1uR3JvdXAoZSx0KXtyZXR1cm4gdGhpcy5nZXREaXNwbGF5TmFtZUZvclByb3ZpZGVkQ29sdW1uR3JvdXAoZSxlLmdldFByb3ZpZGVkQ29sdW1uR3JvdXAoKSx0KX1nZXRIZWFkZXJOYW1lKGUsdCxpLHMscil7Y29uc3Qgbz1lLmhlYWRlclZhbHVlR2V0dGVyO2lmKG8pe2NvbnN0IG49dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7Y29sRGVmOmUsY29sdW1uOnQsY29sdW1uR3JvdXA6aSxwcm92aWRlZENvbHVtbkdyb3VwOnMsbG9jYXRpb246cn0pO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBvP28obik6InN0cmluZyI9PXR5cGVvZiBvP3RoaXMuZXhwcmVzc2lvblNlcnZpY2UuZXZhbHVhdGUobyxuKTooY29uc29sZS53YXJuKCJBRyBHcmlkOiBoZWFkZXJWYWx1ZUdldHRlciBtdXN0IGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmciKSwiIil9cmV0dXJuIG51bGwhPWUuaGVhZGVyTmFtZT9lLmhlYWRlck5hbWU6ZS5maWVsZD92dChlLmZpZWxkKToiIn13cmFwSGVhZGVyTmFtZVdpdGhBZ2dGdW5jKGUsdCl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0FnZ0Z1bmNJbkhlYWRlciIpKXJldHVybiB0O2NvbnN0IGk9ZS5nZXRDb2xEZWYoKS5waXZvdFZhbHVlQ29sdW1uO2xldCBzLHI9bnVsbDtpZihiKGkpKXtjb25zdCBvPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicmVtb3ZlUGl2b3RIZWFkZXJSb3dXaGVuU2luZ2xlVmFsdWVDb2x1bW4iKSYmMT09PXRoaXMudmFsdWVDb2x1bW5zLmxlbmd0aCxuPXZvaWQgMCE9PWUuZ2V0Q29sRGVmKCkucGl2b3RUb3RhbENvbHVtbklkcztpZihvJiYhbilyZXR1cm4gdDtyPWk/aS5nZXRBZ2dGdW5jKCk6bnVsbCxzPSEwfWVsc2V7Y29uc3QgdD1lLmlzVmFsdWVBY3RpdmUoKSxpPXRoaXMucGl2b3RNb2RlfHwhdGhpcy5pc1Jvd0dyb3VwRW1wdHkoKTt0JiZpPyhyPWUuZ2V0QWdnRnVuYygpLHM9ITApOnM9ITF9aWYocyl7Y29uc3QgZT0ic3RyaW5nIj09dHlwZW9mIHI/cjoiZnVuYyI7cmV0dXJuYCR7dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCkoZSxlKX0oJHt0fSlgfXJldHVybiB0fWdldENvbHVtbkdyb3VwKGUsdCl7aWYoIWUpcmV0dXJuIG51bGw7aWYoZSBpbnN0YW5jZW9mIGF0KXJldHVybiBlO2NvbnN0IGk9dGhpcy5nZXRBbGxEaXNwbGF5ZWRUcmVlcygpLHM9Im51bWJlciI9PXR5cGVvZiB0O2xldCByPW51bGw7cmV0dXJuIHRoaXMuY29sdW1uVXRpbHMuZGVwdGhGaXJzdEFsbENvbHVtblRyZWVTZWFyY2goaSxpPT57aWYoaSBpbnN0YW5jZW9mIGF0KXtjb25zdCBvPWk7bGV0IG47bj1zP2U9PT1vLmdldEdyb3VwSWQoKSYmdD09PW8uZ2V0UGFydElkKCk6ZT09PW8uZ2V0R3JvdXBJZCgpLG4mJihyPW8pfX0pLHJ9aXNSZWFkeSgpe3JldHVybiB0aGlzLnJlYWR5fWV4dHJhY3RWYWx1ZUNvbHVtbnMoZSx0KXt0aGlzLnZhbHVlQ29sdW1ucz10aGlzLmV4dHJhY3RDb2x1bW5zKHQsdGhpcy52YWx1ZUNvbHVtbnMsKHQsaSk9PnQuc2V0VmFsdWVBY3RpdmUoaSxlKSwoKT0+e30sKCk9Pnt9LGU9Pntjb25zdCB0PWUuYWdnRnVuYztyZXR1cm4gbnVsbD09PXR8fCIiPT09dD9udWxsOnZvaWQgMCE9PXQ/ISF0OnZvaWQgMH0sZT0+bnVsbCE9ZS5pbml0aWFsQWdnRnVuYyYmIiIhPWUuaW5pdGlhbEFnZ0Z1bmMpLHRoaXMudmFsdWVDb2x1bW5zLmZvckVhY2goZT0+e2NvbnN0IHQ9ZS5nZXRDb2xEZWYoKTtudWxsIT10LmFnZ0Z1bmMmJiIiIT10LmFnZ0Z1bmM/ZS5zZXRBZ2dGdW5jKHQuYWdnRnVuYyk6ZS5nZXRBZ2dGdW5jKCl8fGUuc2V0QWdnRnVuYyh0LmluaXRpYWxBZ2dGdW5jKX0pfWV4dHJhY3RSb3dHcm91cENvbHVtbnMoZSx0KXt0aGlzLnJvd0dyb3VwQ29sdW1ucz10aGlzLmV4dHJhY3RDb2x1bW5zKHQsdGhpcy5yb3dHcm91cENvbHVtbnMsKHQsaSk9PnQuc2V0Um93R3JvdXBBY3RpdmUoaSxlKSxlPT5lLnJvd0dyb3VwSW5kZXgsZT0+ZS5pbml0aWFsUm93R3JvdXBJbmRleCxlPT5lLnJvd0dyb3VwLGU9PmUuaW5pdGlhbFJvd0dyb3VwKX1leHRyYWN0Q29sdW1ucyhlPVtdLHQ9W10saSxzLHIsbyxuKXtjb25zdCBhPVtdLGw9W107KHRoaXMucHJpbWFyeUNvbHVtbnN8fFtdKS5mb3JFYWNoKGk9Pntjb25zdCBkPWUuaW5kZXhPZihpKTwwLGM9aS5nZXRDb2xEZWYoKSxoPUQobyhjKSksdT1EKG4oYykpLHA9VChzKGMpKSxnPVQocihjKSk7bGV0IG07aWYobT12b2lkIDAhPT1oP2g6dm9pZCAwIT09cD9udWxsIT09cCYmcD49MDpkP3ZvaWQgMCE9PXU/dTohISh2b2lkIDAhPT1nKSYmKG51bGwhPWcmJmc+PTApOnQuaW5kZXhPZihpKT49MCxtKXsoZD9udWxsIT1wfHxudWxsIT1nOm51bGwhPXApP2EucHVzaChpKTpsLnB1c2goaSl9fSk7Y29uc3QgZD1lPT57Y29uc3QgdD1zKGUuZ2V0Q29sRGVmKCkpLGk9cihlLmdldENvbERlZigpKTtyZXR1cm4gbnVsbCE9dD90Oml9O2Euc29ydCgoZSx0KT0+e2NvbnN0IGk9ZChlKSxzPWQodCk7cmV0dXJuIGk9PT1zPzA6aTxzPy0xOjF9KTtjb25zdCBjPVtdLmNvbmNhdChhKTtyZXR1cm4gdC5mb3JFYWNoKGU9PntsLmluZGV4T2YoZSk+PTAmJmMucHVzaChlKX0pLGwuZm9yRWFjaChlPT57Yy5pbmRleE9mKGUpPDAmJmMucHVzaChlKX0pLHQuZm9yRWFjaChlPT57Yy5pbmRleE9mKGUpPDAmJmkoZSwhMSl9KSxjLmZvckVhY2goZT0+e3QuaW5kZXhPZihlKTwwJiZpKGUsITApfSksY31leHRyYWN0UGl2b3RDb2x1bW5zKGUsdCl7dGhpcy5waXZvdENvbHVtbnM9dGhpcy5leHRyYWN0Q29sdW1ucyh0LHRoaXMucGl2b3RDb2x1bW5zLCh0LGkpPT50LnNldFBpdm90QWN0aXZlKGksZSksZT0+ZS5waXZvdEluZGV4LGU9PmUuaW5pdGlhbFBpdm90SW5kZXgsZT0+ZS5waXZvdCxlPT5lLmluaXRpYWxQaXZvdCl9cmVzZXRDb2x1bW5Hcm91cFN0YXRlKGUpe2lmKCF0aGlzLnByaW1hcnlDb2x1bW5UcmVlKXJldHVybjtjb25zdCB0PVtdO3RoaXMuY29sdW1uVXRpbHMuZGVwdGhGaXJzdE9yaWdpbmFsVHJlZVNlYXJjaChudWxsLHRoaXMucHJpbWFyeUNvbHVtblRyZWUsZT0+e2lmKGUgaW5zdGFuY2VvZiB4ZSl7Y29uc3QgaT1lLmdldENvbEdyb3VwRGVmKCkscz17Z3JvdXBJZDplLmdldEdyb3VwSWQoKSxvcGVuOmk/aS5vcGVuQnlEZWZhdWx0OnZvaWQgMH07dC5wdXNoKHMpfX0pLHRoaXMuc2V0Q29sdW1uR3JvdXBTdGF0ZSh0LGUpfWdldENvbHVtbkdyb3VwU3RhdGUoKXtjb25zdCBlPVtdO3JldHVybiB0aGlzLmNvbHVtblV0aWxzLmRlcHRoRmlyc3RPcmlnaW5hbFRyZWVTZWFyY2gobnVsbCx0aGlzLmdyaWRCYWxhbmNlZFRyZWUsdD0+e3QgaW5zdGFuY2VvZiB4ZSYmZS5wdXNoKHtncm91cElkOnQuZ2V0R3JvdXBJZCgpLG9wZW46dC5pc0V4cGFuZGVkKCl9KX0pLGV9c2V0Q29sdW1uR3JvdXBTdGF0ZShlLHQpe2lmKCF0aGlzLmdyaWRCYWxhbmNlZFRyZWUpcmV0dXJuO3RoaXMuY29sdW1uQW5pbWF0aW9uU2VydmljZS5zdGFydCgpO2NvbnN0IGk9W107aWYoZS5mb3JFYWNoKGU9Pntjb25zdCB0PWUuZ3JvdXBJZCxzPWUub3BlbixyPXRoaXMuZ2V0UHJvdmlkZWRDb2x1bW5Hcm91cCh0KTtyJiZyLmlzRXhwYW5kZWQoKSE9PXMmJih0aGlzLmxvZ2dlci5sb2coImNvbHVtbkdyb3VwT3BlbmVkKCIrci5nZXRHcm91cElkKCkrIiwiK3MrIikiKSxyLnNldEV4cGFuZGVkKHMpLGkucHVzaChyKSl9KSx0aGlzLnVwZGF0ZUdyb3Vwc0FuZERpc3BsYXllZENvbHVtbnModCksdGhpcy5zZXRGaXJzdFJpZ2h0QW5kTGFzdExlZnRQaW5uZWQodCksaS5sZW5ndGgpe2NvbnN0IGU9e3R5cGU6bHQuRVZFTlRfQ09MVU1OX0dST1VQX09QRU5FRCxjb2x1bW5Hcm91cDoxPT09eGUubGVuZ3RoP2lbMF06dm9pZCAwLGNvbHVtbkdyb3VwczppfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfXRoaXMuY29sdW1uQW5pbWF0aW9uU2VydmljZS5maW5pc2goKX1zZXRDb2x1bW5Hcm91cE9wZW5lZChlLHQsaSl7bGV0IHM7cz1lIGluc3RhbmNlb2YgeGU/ZS5nZXRJZCgpOmV8fCIiLHRoaXMuc2V0Q29sdW1uR3JvdXBTdGF0ZShbe2dyb3VwSWQ6cyxvcGVuOnR9XSxpKX1nZXRQcm92aWRlZENvbHVtbkdyb3VwKGUpeyJzdHJpbmciIT10eXBlb2YgZSYmY29uc29sZS5lcnJvcigiQUcgR3JpZDogZ3JvdXAga2V5IG11c3QgYmUgYSBzdHJpbmciKTtsZXQgdD1udWxsO3JldHVybiB0aGlzLmNvbHVtblV0aWxzLmRlcHRoRmlyc3RPcmlnaW5hbFRyZWVTZWFyY2gobnVsbCx0aGlzLmdyaWRCYWxhbmNlZFRyZWUsaT0+e2kgaW5zdGFuY2VvZiB4ZSYmaS5nZXRJZCgpPT09ZSYmKHQ9aSl9KSx0fWNhbGN1bGF0ZUNvbHVtbnNGb3JEaXNwbGF5KCl7bGV0IGU7cmV0dXJuIGU9dGhpcy5waXZvdE1vZGUmJkUodGhpcy5zZWNvbmRhcnlDb2x1bW5zKT90aGlzLmdyaWRDb2x1bW5zLmZpbHRlcihlPT57Y29uc3QgdD10aGlzLmdyb3VwQXV0b0NvbHVtbnMmJkJlKHRoaXMuZ3JvdXBBdXRvQ29sdW1ucyxlKSxpPXRoaXMudmFsdWVDb2x1bW5zJiZCZSh0aGlzLnZhbHVlQ29sdW1ucyxlKTtyZXR1cm4gdHx8aX0pOnRoaXMuZ3JpZENvbHVtbnMuZmlsdGVyKGU9PnRoaXMuZ3JvdXBBdXRvQ29sdW1ucyYmQmUodGhpcy5ncm91cEF1dG9Db2x1bW5zLGUpfHxlLmlzVmlzaWJsZSgpKSxlfWNoZWNrQ29sU3BhbkFjdGl2ZUluQ29scyhlKXtsZXQgdD0hMTtyZXR1cm4gZS5mb3JFYWNoKGU9PntiKGUuZ2V0Q29sRGVmKCkuY29sU3BhbikmJih0PSEwKX0pLHR9Y2FsY3VsYXRlQ29sdW1uc0Zvckdyb3VwRGlzcGxheSgpe3RoaXMuZ3JvdXBEaXNwbGF5Q29sdW1ucz1bXSx0aGlzLmdyb3VwRGlzcGxheUNvbHVtbnNNYXA9e307dGhpcy5ncmlkQ29sdW1ucy5mb3JFYWNoKGU9Pntjb25zdCB0PWUuZ2V0Q29sRGVmKCksaT10LnNob3dSb3dHcm91cDt0JiZiKGkpJiYodGhpcy5ncm91cERpc3BsYXlDb2x1bW5zLnB1c2goZSksInN0cmluZyI9PXR5cGVvZiBpP3RoaXMuZ3JvdXBEaXNwbGF5Q29sdW1uc01hcFtpXT1lOiEwPT09aSYmdGhpcy5nZXRSb3dHcm91cENvbHVtbnMoKS5mb3JFYWNoKHQ9Pnt0aGlzLmdyb3VwRGlzcGxheUNvbHVtbnNNYXBbdC5nZXRJZCgpXT1lfSkpfSl9Z2V0R3JvdXBEaXNwbGF5Q29sdW1ucygpe3JldHVybiB0aGlzLmdyb3VwRGlzcGxheUNvbHVtbnN9Z2V0R3JvdXBEaXNwbGF5Q29sdW1uRm9yR3JvdXAoZSl7cmV0dXJuIHRoaXMuZ3JvdXBEaXNwbGF5Q29sdW1uc01hcFtlXX11cGRhdGVEaXNwbGF5ZWRDb2x1bW5zKGUpe2NvbnN0IHQ9dGhpcy5jYWxjdWxhdGVDb2x1bW5zRm9yRGlzcGxheSgpO3RoaXMuYnVpbGREaXNwbGF5ZWRUcmVlcyh0KSx0aGlzLnVwZGF0ZUdyb3Vwc0FuZERpc3BsYXllZENvbHVtbnMoZSksdGhpcy5zZXRGaXJzdFJpZ2h0QW5kTGFzdExlZnRQaW5uZWQoZSl9aXNTZWNvbmRhcnlDb2x1bW5zUHJlc2VudCgpe3JldHVybiBiKHRoaXMuc2Vjb25kYXJ5Q29sdW1ucyl9c2V0U2Vjb25kYXJ5Q29sdW1ucyhlLHQpe2lmKCF0aGlzLmdyaWRDb2x1bW5zKXJldHVybjtjb25zdCBpPWUmJmUubGVuZ3RoPjA7aWYoaXx8IUUodGhpcy5zZWNvbmRhcnlDb2x1bW5zKSl7aWYoaSl7dGhpcy5wcm9jZXNzU2Vjb25kYXJ5Q29sdW1uRGVmaW5pdGlvbnMoZSk7Y29uc3QgaT10aGlzLmNvbHVtbkZhY3RvcnkuY3JlYXRlQ29sdW1uVHJlZShlLCExLHRoaXMuc2Vjb25kYXJ5QmFsYW5jZWRUcmVlfHx0aGlzLnByZXZpb3VzU2Vjb25kYXJ5Q29sdW1uc3x8dm9pZCAwLHQpO3RoaXMuZGVzdHJveU9sZENvbHVtbnModGhpcy5zZWNvbmRhcnlCYWxhbmNlZFRyZWUsaS5jb2x1bW5UcmVlKSx0aGlzLnNlY29uZGFyeUJhbGFuY2VkVHJlZT1pLmNvbHVtblRyZWUsdGhpcy5zZWNvbmRhcnlIZWFkZXJSb3dDb3VudD1pLnRyZWVEZXB0KzEsdGhpcy5zZWNvbmRhcnlDb2x1bW5zPXRoaXMuZ2V0Q29sdW1uc0Zyb21UcmVlKHRoaXMuc2Vjb25kYXJ5QmFsYW5jZWRUcmVlKSx0aGlzLnNlY29uZGFyeUNvbHVtbnNNYXA9e30sdGhpcy5zZWNvbmRhcnlDb2x1bW5zLmZvckVhY2goZT0+dGhpcy5zZWNvbmRhcnlDb2x1bW5zTWFwW2UuZ2V0SWQoKV09ZSksdGhpcy5wcmV2aW91c1NlY29uZGFyeUNvbHVtbnM9bnVsbH1lbHNlIHRoaXMucHJldmlvdXNTZWNvbmRhcnlDb2x1bW5zPXRoaXMuc2Vjb25kYXJ5QmFsYW5jZWRUcmVlLHRoaXMuc2Vjb25kYXJ5QmFsYW5jZWRUcmVlPW51bGwsdGhpcy5zZWNvbmRhcnlIZWFkZXJSb3dDb3VudD0tMSx0aGlzLnNlY29uZGFyeUNvbHVtbnM9bnVsbCx0aGlzLnNlY29uZGFyeUNvbHVtbnNNYXA9e307dGhpcy51cGRhdGVHcmlkQ29sdW1ucygpLHRoaXMudXBkYXRlRGlzcGxheWVkQ29sdW1ucyh0KX19cHJvY2Vzc1NlY29uZGFyeUNvbHVtbkRlZmluaXRpb25zKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJwcm9jZXNzUGl2b3RSZXN1bHRDb2xEZWYiKSxpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicHJvY2Vzc1Bpdm90UmVzdWx0Q29sR3JvdXBEZWYiKTtpZighdCYmIWkpcmV0dXJuO2NvbnN0IHM9ZT0+e2UuZm9yRWFjaChlPT57aWYoYihlLmNoaWxkcmVuKSl7Y29uc3QgdD1lO2kmJmkodCkscyh0LmNoaWxkcmVuKX1lbHNle2NvbnN0IGk9ZTt0JiZ0KGkpfX0pfTtlJiZzKGUpfXVwZGF0ZUdyaWRDb2x1bW5zKCl7Y29uc3QgZT10aGlzLmdyaWRCYWxhbmNlZFRyZWU7dGhpcy5ncmlkQ29sc0FyZVByaW1hcnk/dGhpcy5sYXN0UHJpbWFyeU9yZGVyPXRoaXMuZ3JpZENvbHVtbnM6dGhpcy5sYXN0U2Vjb25kYXJ5T3JkZXI9dGhpcy5ncmlkQ29sdW1ucztpZih0aGlzLmNyZWF0ZUdyb3VwQXV0b0NvbHVtbnNJZk5lZWRlZCgpKXtjb25zdCBlPXl0KHRoaXMuZ3JvdXBBdXRvQ29sdW1ucy5tYXAoZT0+W2UsITBdKSk7dGhpcy5sYXN0UHJpbWFyeU9yZGVyJiYodGhpcy5sYXN0UHJpbWFyeU9yZGVyPXRoaXMubGFzdFByaW1hcnlPcmRlci5maWx0ZXIodD0+IWUuaGFzKHQpKSx0aGlzLmxhc3RQcmltYXJ5T3JkZXI9Wy4uLnRoaXMuZ3JvdXBBdXRvQ29sdW1ucywuLi50aGlzLmxhc3RQcmltYXJ5T3JkZXJdKSx0aGlzLmxhc3RTZWNvbmRhcnlPcmRlciYmKHRoaXMubGFzdFNlY29uZGFyeU9yZGVyPXRoaXMubGFzdFNlY29uZGFyeU9yZGVyLmZpbHRlcih0PT4hZS5oYXModCkpLHRoaXMubGFzdFNlY29uZGFyeU9yZGVyPVsuLi50aGlzLmdyb3VwQXV0b0NvbHVtbnMsLi4udGhpcy5sYXN0U2Vjb25kYXJ5T3JkZXJdKX1sZXQgdDtpZih0aGlzLnNlY29uZGFyeUNvbHVtbnMmJnRoaXMuc2Vjb25kYXJ5QmFsYW5jZWRUcmVlKXtjb25zdCBlPXRoaXMuc2Vjb25kYXJ5Q29sdW1ucy5zb21lKGU9PnZvaWQgMCE9PXRoaXMuZ3JpZENvbHVtbnNNYXBbZS5nZXRDb2xJZCgpXSk7dGhpcy5ncmlkQmFsYW5jZWRUcmVlPXRoaXMuc2Vjb25kYXJ5QmFsYW5jZWRUcmVlLnNsaWNlKCksdGhpcy5ncmlkSGVhZGVyUm93Q291bnQ9dGhpcy5zZWNvbmRhcnlIZWFkZXJSb3dDb3VudCx0aGlzLmdyaWRDb2x1bW5zPXRoaXMuc2Vjb25kYXJ5Q29sdW1ucy5zbGljZSgpLHRoaXMuZ3JpZENvbHNBcmVQcmltYXJ5PSExLGUmJih0PXRoaXMubGFzdFNlY29uZGFyeU9yZGVyKX1lbHNlIHRoaXMucHJpbWFyeUNvbHVtbnMmJih0aGlzLmdyaWRCYWxhbmNlZFRyZWU9dGhpcy5wcmltYXJ5Q29sdW1uVHJlZS5zbGljZSgpLHRoaXMuZ3JpZEhlYWRlclJvd0NvdW50PXRoaXMucHJpbWFyeUhlYWRlclJvd0NvdW50LHRoaXMuZ3JpZENvbHVtbnM9dGhpcy5wcmltYXJ5Q29sdW1ucy5zbGljZSgpLHRoaXMuZ3JpZENvbHNBcmVQcmltYXJ5PSEwLHQ9dGhpcy5sYXN0UHJpbWFyeU9yZGVyKTtpZih0aGlzLmFkZEF1dG9Hcm91cFRvR3JpZENvbHVtbnMoKSx0aGlzLm9yZGVyR3JpZENvbHNMaWtlKHQpLHRoaXMuZ3JpZENvbHVtbnM9dGhpcy5wbGFjZUxvY2tlZENvbHVtbnModGhpcy5ncmlkQ29sdW1ucyksdGhpcy5jYWxjdWxhdGVDb2x1bW5zRm9yR3JvdXBEaXNwbGF5KCksdGhpcy5yZWZyZXNoUXVpY2tGaWx0ZXJDb2x1bW5zKCksdGhpcy5jbGVhckRpc3BsYXllZEFuZFZpZXdwb3J0Q29sdW1ucygpLHRoaXMuY29sU3BhbkFjdGl2ZT10aGlzLmNoZWNrQ29sU3BhbkFjdGl2ZUluQ29scyh0aGlzLmdyaWRDb2x1bW5zKSx0aGlzLmdyaWRDb2x1bW5zTWFwPXt9LHRoaXMuZ3JpZENvbHVtbnMuZm9yRWFjaChlPT50aGlzLmdyaWRDb2x1bW5zTWFwW2UuZ2V0SWQoKV09ZSksdGhpcy5zZXRBdXRvSGVpZ2h0QWN0aXZlKCksIUFlKGUsdGhpcy5ncmlkQmFsYW5jZWRUcmVlKSl7Y29uc3QgZT17dHlwZTpsdC5FVkVOVF9HUklEX0NPTFVNTlNfQ0hBTkdFRH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX19c2V0QXV0b0hlaWdodEFjdGl2ZSgpe2lmKHRoaXMuYXV0b0hlaWdodEFjdGl2ZT10aGlzLmdyaWRDb2x1bW5zLmZpbHRlcihlPT5lLmlzQXV0b0hlaWdodCgpKS5sZW5ndGg+MCx0aGlzLmF1dG9IZWlnaHRBY3RpdmUpe3RoaXMuYXV0b0hlaWdodEFjdGl2ZUF0TGVhc3RPbmNlPSEwO3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzUm93TW9kZWxUeXBlKCJjbGllbnRTaWRlIil8fHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzUm93TW9kZWxUeXBlKCJzZXJ2ZXJTaWRlIil8fGooImF1dG9IZWlnaHQgY29sdW1ucyBvbmx5IHdvcmsgd2l0aCBDbGllbnQgU2lkZSBSb3cgTW9kZWwgYW5kIFNlcnZlciBTaWRlIFJvdyBNb2RlbC4iKX19b3JkZXJHcmlkQ29sc0xpa2UoZSl7aWYoRShlKSlyZXR1cm47Y29uc3QgdD15dChlLm1hcCgoZSx0KT0+W2UsdF0pKTtsZXQgaT0hMDtpZih0aGlzLmdyaWRDb2x1bW5zLmZvckVhY2goZT0+e3QuaGFzKGUpJiYoaT0hMSl9KSxpKXJldHVybjtjb25zdCBzPXl0KHRoaXMuZ3JpZENvbHVtbnMubWFwKGU9PltlLCEwXSkpLHI9ZS5maWx0ZXIoZT0+cy5oYXMoZSkpLG89eXQoci5tYXAoZT0+W2UsITBdKSksbj10aGlzLmdyaWRDb2x1bW5zLmZpbHRlcihlPT4hby5oYXMoZSkpLGE9ci5zbGljZSgpO24uZm9yRWFjaChlPT57bGV0IHQ9ZS5nZXRPcmlnaW5hbFBhcmVudCgpO2lmKCF0KXJldHVybiB2b2lkIGEucHVzaChlKTtjb25zdCBpPVtdO2Zvcig7IWkubGVuZ3RoJiZ0Oyl7dC5nZXRMZWFmQ29sdW1ucygpLmZvckVhY2goZT0+e2NvbnN0IHQ9YS5pbmRleE9mKGUpPj0wLHM9aS5pbmRleE9mKGUpPDA7dCYmcyYmaS5wdXNoKGUpfSksdD10LmdldE9yaWdpbmFsUGFyZW50KCl9aWYoIWkubGVuZ3RoKXJldHVybiB2b2lkIGEucHVzaChlKTtjb25zdCBzPWkubWFwKGU9PmEuaW5kZXhPZihlKSkscj1NYXRoLm1heCguLi5zKTtrZShhLGUscisxKX0pLHRoaXMuZ3JpZENvbHVtbnM9YX1pc1ByaW1hcnlDb2x1bW5Hcm91cHNQcmVzZW50KCl7cmV0dXJuIHRoaXMucHJpbWFyeUhlYWRlclJvd0NvdW50PjF9cmVmcmVzaFF1aWNrRmlsdGVyQ29sdW1ucygpe3ZhciBlO2xldCB0PW51bGwhPT0oZT10aGlzLmlzUGl2b3RNb2RlKCk/dGhpcy5zZWNvbmRhcnlDb2x1bW5zOnRoaXMucHJpbWFyeUNvbHVtbnMpJiZ2b2lkIDAhPT1lP2U6W107dGhpcy5ncm91cEF1dG9Db2x1bW5zJiYodD10LmNvbmNhdCh0aGlzLmdyb3VwQXV0b0NvbHVtbnMpKSx0aGlzLmNvbHVtbnNGb3JRdWlja0ZpbHRlcj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImluY2x1ZGVIaWRkZW5Db2x1bW5zSW5RdWlja0ZpbHRlciIpP3Q6dC5maWx0ZXIoZT0+ZS5pc1Zpc2libGUoKXx8ZS5pc1Jvd0dyb3VwQWN0aXZlKCkpfXBsYWNlTG9ja2VkQ29sdW1ucyhlKXtjb25zdCB0PVtdLGk9W10scz1bXTtyZXR1cm4gZS5mb3JFYWNoKGU9Pntjb25zdCByPWUuZ2V0Q29sRGVmKCkubG9ja1Bvc2l0aW9uOyJyaWdodCI9PT1yP3MucHVzaChlKToibGVmdCI9PT1yfHwhMD09PXI/dC5wdXNoKGUpOmkucHVzaChlKX0pLFsuLi50LC4uLmksLi4uc119YWRkQXV0b0dyb3VwVG9HcmlkQ29sdW1ucygpe2lmKEUodGhpcy5ncm91cEF1dG9Db2x1bW5zKSlyZXR1cm4gdGhpcy5kZXN0cm95T2xkQ29sdW1ucyh0aGlzLmdyb3VwQXV0b0NvbHNCYWxhbmNlZFRyZWUpLHZvaWQodGhpcy5ncm91cEF1dG9Db2xzQmFsYW5jZWRUcmVlPW51bGwpO3RoaXMuZ3JpZENvbHVtbnM9dGhpcy5ncm91cEF1dG9Db2x1bW5zP3RoaXMuZ3JvdXBBdXRvQ29sdW1ucy5jb25jYXQodGhpcy5ncmlkQ29sdW1ucyk6dGhpcy5ncmlkQ29sdW1ucztjb25zdCBlPXRoaXMuY29sdW1uRmFjdG9yeS5jcmVhdGVGb3JBdXRvR3JvdXBzKHRoaXMuZ3JvdXBBdXRvQ29sdW1ucyx0aGlzLmdyaWRCYWxhbmNlZFRyZWUpO3RoaXMuZGVzdHJveU9sZENvbHVtbnModGhpcy5ncm91cEF1dG9Db2xzQmFsYW5jZWRUcmVlLGUpLHRoaXMuZ3JvdXBBdXRvQ29sc0JhbGFuY2VkVHJlZT1lLHRoaXMuZ3JpZEJhbGFuY2VkVHJlZT1lLmNvbmNhdCh0aGlzLmdyaWRCYWxhbmNlZFRyZWUpfWNsZWFyRGlzcGxheWVkQW5kVmlld3BvcnRDb2x1bW5zKCl7dGhpcy52aWV3cG9ydFJvd0xlZnQ9e30sdGhpcy52aWV3cG9ydFJvd1JpZ2h0PXt9LHRoaXMudmlld3BvcnRSb3dDZW50ZXI9e30sdGhpcy5kaXNwbGF5ZWRDb2x1bW5zTGVmdD1bXSx0aGlzLmRpc3BsYXllZENvbHVtbnNSaWdodD1bXSx0aGlzLmRpc3BsYXllZENvbHVtbnNDZW50ZXI9W10sdGhpcy5kaXNwbGF5ZWRDb2x1bW5zPVtdLHRoaXMuYXJpYU9yZGVyQ29sdW1ucz1bXSx0aGlzLnZpZXdwb3J0Q29sdW1ucz1bXSx0aGlzLmhlYWRlclZpZXdwb3J0Q29sdW1ucz1bXSx0aGlzLnZpZXdwb3J0Q29sdW1uc0hhc2g9IiJ9dXBkYXRlR3JvdXBzQW5kRGlzcGxheWVkQ29sdW1ucyhlKXt0aGlzLnVwZGF0ZU9wZW5DbG9zZWRWaXNpYmlsaXR5SW5Db2x1bW5Hcm91cHMoKSx0aGlzLmRlcml2ZURpc3BsYXllZENvbHVtbnMoZSksdGhpcy5yZWZyZXNoRmxleGVkQ29sdW1ucygpLHRoaXMuZXh0cmFjdFZpZXdwb3J0KCksdGhpcy51cGRhdGVCb2R5V2lkdGhzKCk7Y29uc3QgdD17dHlwZTpsdC5FVkVOVF9ESVNQTEFZRURfQ09MVU1OU19DSEFOR0VEfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfWRlcml2ZURpc3BsYXllZENvbHVtbnMoZSl7dGhpcy5kZXJpdmVkRGlzcGxheWVkQ29sdW1uc0Zyb21EaXNwbGF5ZWRUcmVlKHRoaXMuZGlzcGxheWVkVHJlZUxlZnQsdGhpcy5kaXNwbGF5ZWRDb2x1bW5zTGVmdCksdGhpcy5kZXJpdmVkRGlzcGxheWVkQ29sdW1uc0Zyb21EaXNwbGF5ZWRUcmVlKHRoaXMuZGlzcGxheWVkVHJlZUNlbnRyZSx0aGlzLmRpc3BsYXllZENvbHVtbnNDZW50ZXIpLHRoaXMuZGVyaXZlZERpc3BsYXllZENvbHVtbnNGcm9tRGlzcGxheWVkVHJlZSh0aGlzLmRpc3BsYXllZFRyZWVSaWdodCx0aGlzLmRpc3BsYXllZENvbHVtbnNSaWdodCksdGhpcy5qb2luQ29sdW1uc0FyaWFPcmRlcigpLHRoaXMuam9pbkRpc3BsYXllZENvbHVtbnMoKSx0aGlzLnNldExlZnRWYWx1ZXMoZSksdGhpcy5kaXNwbGF5ZWRBdXRvSGVpZ2h0Q29scz10aGlzLmRpc3BsYXllZENvbHVtbnMuZmlsdGVyKGU9PmUuaXNBdXRvSGVpZ2h0KCkpfWlzQXV0b1Jvd0hlaWdodEFjdGl2ZSgpe3JldHVybiB0aGlzLmF1dG9IZWlnaHRBY3RpdmV9d2FzQXV0b1Jvd0hlaWdodEV2ZXJBY3RpdmUoKXtyZXR1cm4gdGhpcy5hdXRvSGVpZ2h0QWN0aXZlQXRMZWFzdE9uY2V9am9pbkNvbHVtbnNBcmlhT3JkZXIoKXtjb25zdCBlPXRoaXMuZ2V0QWxsR3JpZENvbHVtbnMoKSx0PVtdLGk9W10scz1bXTtmb3IoY29uc3QgciBvZiBlKXtjb25zdCBlPXIuZ2V0UGlubmVkKCk7ZT8hMD09PWV8fCJsZWZ0Ij09PWU/dC5wdXNoKHIpOnMucHVzaChyKTppLnB1c2gocil9dGhpcy5hcmlhT3JkZXJDb2x1bW5zPXQuY29uY2F0KGkpLmNvbmNhdChzKX1qb2luRGlzcGxheWVkQ29sdW1ucygpe3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIik/dGhpcy5kaXNwbGF5ZWRDb2x1bW5zPXRoaXMuZGlzcGxheWVkQ29sdW1uc1JpZ2h0LmNvbmNhdCh0aGlzLmRpc3BsYXllZENvbHVtbnNDZW50ZXIpLmNvbmNhdCh0aGlzLmRpc3BsYXllZENvbHVtbnNMZWZ0KTp0aGlzLmRpc3BsYXllZENvbHVtbnM9dGhpcy5kaXNwbGF5ZWRDb2x1bW5zTGVmdC5jb25jYXQodGhpcy5kaXNwbGF5ZWRDb2x1bW5zQ2VudGVyKS5jb25jYXQodGhpcy5kaXNwbGF5ZWRDb2x1bW5zUmlnaHQpfXNldExlZnRWYWx1ZXMoZSl7dGhpcy5zZXRMZWZ0VmFsdWVzT2ZDb2x1bW5zKGUpLHRoaXMuc2V0TGVmdFZhbHVlc09mR3JvdXBzKCl9c2V0TGVmdFZhbHVlc09mQ29sdW1ucyhlKXtpZighdGhpcy5wcmltYXJ5Q29sdW1ucylyZXR1cm47Y29uc3QgdD10aGlzLmdldFByaW1hcnlBbmRTZWNvbmRhcnlBbmRBdXRvQ29sdW1ucygpLnNsaWNlKDApLGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKTtbdGhpcy5kaXNwbGF5ZWRDb2x1bW5zTGVmdCx0aGlzLmRpc3BsYXllZENvbHVtbnNSaWdodCx0aGlzLmRpc3BsYXllZENvbHVtbnNDZW50ZXJdLmZvckVhY2gocz0+e2lmKGkpe2xldCB0PXRoaXMuZ2V0V2lkdGhPZkNvbHNJbkxpc3Qocyk7cy5mb3JFYWNoKGk9Pnt0LT1pLmdldEFjdHVhbFdpZHRoKCksaS5zZXRMZWZ0KHQsZSl9KX1lbHNle2xldCB0PTA7cy5mb3JFYWNoKGk9PntpLnNldExlZnQodCxlKSx0Kz1pLmdldEFjdHVhbFdpZHRoKCl9KX1OZSh0LHMpfSksdC5mb3JFYWNoKHQ9Pnt0LnNldExlZnQobnVsbCxlKX0pfXNldExlZnRWYWx1ZXNPZkdyb3Vwcygpe1t0aGlzLmRpc3BsYXllZFRyZWVMZWZ0LHRoaXMuZGlzcGxheWVkVHJlZVJpZ2h0LHRoaXMuZGlzcGxheWVkVHJlZUNlbnRyZV0uZm9yRWFjaChlPT57ZS5mb3JFYWNoKGU9PntpZihlIGluc3RhbmNlb2YgYXQpe2UuY2hlY2tMZWZ0KCl9fSl9KX1kZXJpdmVkRGlzcGxheWVkQ29sdW1uc0Zyb21EaXNwbGF5ZWRUcmVlKGUsdCl7dC5sZW5ndGg9MCx0aGlzLmNvbHVtblV0aWxzLmRlcHRoRmlyc3REaXNwbGF5ZWRDb2x1bW5UcmVlU2VhcmNoKGUsZT0+e2UgaW5zdGFuY2VvZiBFZSYmdC5wdXNoKGUpfSl9aXNDb2x1bW5WaXJ0dWFsaXNhdGlvblN1cHByZXNzZWQoKXtyZXR1cm4gdGhpcy5zdXBwcmVzc0NvbHVtblZpcnR1YWxpc2F0aW9ufHwwPT09dGhpcy52aWV3cG9ydFJpZ2h0fWV4dHJhY3RWaWV3cG9ydENvbHVtbnMoKXt0aGlzLmlzQ29sdW1uVmlydHVhbGlzYXRpb25TdXBwcmVzc2VkKCk/KHRoaXMudmlld3BvcnRDb2x1bW5zQ2VudGVyPXRoaXMuZGlzcGxheWVkQ29sdW1uc0NlbnRlcix0aGlzLmhlYWRlclZpZXdwb3J0Q29sdW1uc0NlbnRlcj10aGlzLmRpc3BsYXllZENvbHVtbnNDZW50ZXIpOih0aGlzLnZpZXdwb3J0Q29sdW1uc0NlbnRlcj10aGlzLmRpc3BsYXllZENvbHVtbnNDZW50ZXIuZmlsdGVyKHRoaXMuaXNDb2x1bW5JblJvd1ZpZXdwb3J0LmJpbmQodGhpcykpLHRoaXMuaGVhZGVyVmlld3BvcnRDb2x1bW5zQ2VudGVyPXRoaXMuZGlzcGxheWVkQ29sdW1uc0NlbnRlci5maWx0ZXIodGhpcy5pc0NvbHVtbkluSGVhZGVyVmlld3BvcnQuYmluZCh0aGlzKSkpLHRoaXMudmlld3BvcnRDb2x1bW5zPXRoaXMudmlld3BvcnRDb2x1bW5zQ2VudGVyLmNvbmNhdCh0aGlzLmRpc3BsYXllZENvbHVtbnNMZWZ0KS5jb25jYXQodGhpcy5kaXNwbGF5ZWRDb2x1bW5zUmlnaHQpLHRoaXMuaGVhZGVyVmlld3BvcnRDb2x1bW5zPXRoaXMuaGVhZGVyVmlld3BvcnRDb2x1bW5zQ2VudGVyLmNvbmNhdCh0aGlzLmRpc3BsYXllZENvbHVtbnNMZWZ0KS5jb25jYXQodGhpcy5kaXNwbGF5ZWRDb2x1bW5zUmlnaHQpfWdldFZpcnR1YWxIZWFkZXJHcm91cFJvdyhlLHQpe2xldCBpO3N3aXRjaChlKXtjYXNlImxlZnQiOmk9dGhpcy52aWV3cG9ydFJvd0xlZnRbdF07YnJlYWs7Y2FzZSJyaWdodCI6aT10aGlzLnZpZXdwb3J0Um93UmlnaHRbdF07YnJlYWs7ZGVmYXVsdDppPXRoaXMudmlld3BvcnRSb3dDZW50ZXJbdF19cmV0dXJuIEUoaSkmJihpPVtdKSxpfWNhbGN1bGF0ZUhlYWRlclJvd3MoKXt0aGlzLnZpZXdwb3J0Um93TGVmdD17fSx0aGlzLnZpZXdwb3J0Um93UmlnaHQ9e30sdGhpcy52aWV3cG9ydFJvd0NlbnRlcj17fTtjb25zdCBlPXt9O3RoaXMuaGVhZGVyVmlld3BvcnRDb2x1bW5zLmZvckVhY2godD0+ZVt0LmdldElkKCldPSEwKTtjb25zdCB0PShpLHMscik9PntsZXQgbz0hMTtmb3IobGV0IG49MDtuPGkubGVuZ3RoO24rKyl7Y29uc3QgYT1pW25dO2xldCBsPSExO2lmKGEgaW5zdGFuY2VvZiBFZSlsPSEwPT09ZVthLmdldElkKCldO2Vsc2V7Y29uc3QgZT1hLmdldERpc3BsYXllZENoaWxkcmVuKCk7ZSYmKGw9dChlLHMscisxKSl9bCYmKG89ITAsc1tyXXx8KHNbcl09W10pLHNbcl0ucHVzaChhKSl9cmV0dXJuIG99O3QodGhpcy5kaXNwbGF5ZWRUcmVlTGVmdCx0aGlzLnZpZXdwb3J0Um93TGVmdCwwKSx0KHRoaXMuZGlzcGxheWVkVHJlZVJpZ2h0LHRoaXMudmlld3BvcnRSb3dSaWdodCwwKSx0KHRoaXMuZGlzcGxheWVkVHJlZUNlbnRyZSx0aGlzLnZpZXdwb3J0Um93Q2VudGVyLDApfWV4dHJhY3RWaWV3cG9ydCgpe3RoaXMuZXh0cmFjdFZpZXdwb3J0Q29sdW1ucygpO2NvbnN0IGU9dGhpcy52aWV3cG9ydENvbHVtbnMubWFwKGU9PmAke2UuZ2V0SWQoKX0tJHtlLmdldFBpbm5lZCgpfHwibm9ybWFsIn1gKS5qb2luKCIjIiksdD10aGlzLnZpZXdwb3J0Q29sdW1uc0hhc2ghPT1lO3JldHVybiB0JiYodGhpcy52aWV3cG9ydENvbHVtbnNIYXNoPWUsdGhpcy5jYWxjdWxhdGVIZWFkZXJSb3dzKCkpLHR9cmVmcmVzaEZsZXhlZENvbHVtbnMoZT17fSl7dmFyIHQ7Y29uc3QgaT1lLnNvdXJjZT9lLnNvdXJjZToiZmxleCI7aWYobnVsbCE9ZS52aWV3cG9ydFdpZHRoJiYodGhpcy5mbGV4Vmlld3BvcnRXaWR0aD1lLnZpZXdwb3J0V2lkdGgpLCF0aGlzLmZsZXhWaWV3cG9ydFdpZHRoKXJldHVybltdO2xldCBzPS0xO2lmKGUucmVzaXppbmdDb2xzKXtjb25zdCB0PW5ldyBTZXQoZS5yZXNpemluZ0NvbHMpO2xldCBpPXRoaXMuZGlzcGxheWVkQ29sdW1uc0NlbnRlcjtmb3IobGV0IGU9aS5sZW5ndGgtMTtlPj0wO2UtLSlpZih0LmhhcyhpW2VdKSl7cz1lO2JyZWFrfX1sZXQgcj0wLG89W10sbj0wLGE9MDtmb3IobGV0IGU9MDtlPHRoaXMuZGlzcGxheWVkQ29sdW1uc0NlbnRlci5sZW5ndGg7ZSsrKXt0aGlzLmRpc3BsYXllZENvbHVtbnNDZW50ZXJbZV0uZ2V0RmxleCgpJiZlPnM/KG8ucHVzaCh0aGlzLmRpc3BsYXllZENvbHVtbnNDZW50ZXJbZV0pLGErPXRoaXMuZGlzcGxheWVkQ29sdW1uc0NlbnRlcltlXS5nZXRGbGV4KCksbis9bnVsbCE9PSh0PXRoaXMuZGlzcGxheWVkQ29sdW1uc0NlbnRlcltlXS5nZXRNaW5XaWR0aCgpKSYmdm9pZCAwIT09dD90OjApOnIrPXRoaXMuZGlzcGxheWVkQ29sdW1uc0NlbnRlcltlXS5nZXRBY3R1YWxXaWR0aCgpfWlmKCFvLmxlbmd0aClyZXR1cm5bXTtsZXQgbD1bXTtyK24+dGhpcy5mbGV4Vmlld3BvcnRXaWR0aCYmKG8uZm9yRWFjaChlPT57dmFyIHQ7cmV0dXJuIGUuc2V0QWN0dWFsV2lkdGgobnVsbCE9PSh0PWUuZ2V0TWluV2lkdGgoKSkmJnZvaWQgMCE9PXQ/dDowLGkpfSksbD1vLG89W10pO2NvbnN0IGQ9W107bGV0IGM7ZTpmb3IoOzspe2M9dGhpcy5mbGV4Vmlld3BvcnRXaWR0aC1yO2NvbnN0IGU9Yy9hO2ZvcihsZXQgdD0wO3Q8by5sZW5ndGg7dCsrKXtjb25zdCBzPW9bdF0sbj1lKnMuZ2V0RmxleCgpO2xldCBjPTA7Y29uc3QgaD1zLmdldE1pbldpZHRoKCksdT1zLmdldE1heFdpZHRoKCk7aWYoYihoKSYmbjxoP2M9aDpiKHUpJiZuPnUmJihjPXUpLGMpe3Muc2V0QWN0dWFsV2lkdGgoYyxpKSxGZShvLHMpLGEtPXMuZ2V0RmxleCgpLGwucHVzaChzKSxyKz1zLmdldEFjdHVhbFdpZHRoKCk7Y29udGludWUgZX1kW3RdPU1hdGgucm91bmQobil9YnJlYWt9bGV0IGg9YztyZXR1cm4gby5mb3JFYWNoKChlLHQpPT57ZS5zZXRBY3R1YWxXaWR0aChNYXRoLm1pbihkW3RdLGgpLGkpLGwucHVzaChlKSxoLT1kW3RdfSksZS5za2lwU2V0TGVmdHx8dGhpcy5zZXRMZWZ0VmFsdWVzKGkpLGUudXBkYXRlQm9keVdpZHRocyYmdGhpcy51cGRhdGVCb2R5V2lkdGhzKCksZS5maXJlUmVzaXplZEV2ZW50JiZ0aGlzLmRpc3BhdGNoQ29sdW1uUmVzaXplZEV2ZW50KGwsITAsaSxvKSxvfXNpemVDb2x1bW5zVG9GaXQoZSx0PSJzaXplQ29sdW1uc1RvRml0IixpLHMpe3ZhciByLG8sbixhLGw7aWYodGhpcy5zaG91bGRRdWV1ZVJlc2l6ZU9wZXJhdGlvbnMpcmV0dXJuIHZvaWQgdGhpcy5yZXNpemVPcGVyYXRpb25RdWV1ZS5wdXNoKCgpPT50aGlzLnNpemVDb2x1bW5zVG9GaXQoZSx0LGkscykpO2NvbnN0IGQ9e307cyYmKG51bGw9PT0ocj1udWxsPT1zP3ZvaWQgMDpzLmNvbHVtbkxpbWl0cyl8fHZvaWQgMD09PXJ8fHIuZm9yRWFjaChlPT57dmFye2tleTp0fT1lLGk9UnQoZSxbImtleSJdKTtkWyJzdHJpbmciPT10eXBlb2YgdD90OnQuZ2V0Q29sSWQoKV09aX0pKTtjb25zdCBjPXRoaXMuZ2V0QWxsRGlzcGxheWVkQ29sdW1ucygpLGg9ZT09PXRoaXMuZ2V0V2lkdGhPZkNvbHNJbkxpc3QoYyk7aWYoZTw9MHx8IWMubGVuZ3RofHxoKXJldHVybjtjb25zdCB1PVtdLHA9W107Yy5mb3JFYWNoKGU9PnshMD09PWUuZ2V0Q29sRGVmKCkuc3VwcHJlc3NTaXplVG9GaXQ/cC5wdXNoKGUpOnUucHVzaChlKX0pO2NvbnN0IGc9dS5zbGljZSgwKTtsZXQgbT0hMTtjb25zdCBmPWU9PntJZSh1LGUpLHAucHVzaChlKX07Zm9yKHUuZm9yRWFjaChlPT57dmFyIGkscjtlLnJlc2V0QWN0dWFsV2lkdGgodCk7Y29uc3Qgbz1udWxsPT1kP3ZvaWQgMDpkW2UuZ2V0SWQoKV0sbj1udWxsIT09KGk9bnVsbD09bz92b2lkIDA6by5taW5XaWR0aCkmJnZvaWQgMCE9PWk/aTpudWxsPT1zP3ZvaWQgMDpzLmRlZmF1bHRNaW5XaWR0aCxhPW51bGwhPT0ocj1udWxsPT1vP3ZvaWQgMDpvLm1heFdpZHRoKSYmdm9pZCAwIT09cj9yOm51bGw9PXM/dm9pZCAwOnMuZGVmYXVsdE1heFdpZHRoLGw9ZS5nZXRBY3R1YWxXaWR0aCgpOyJudW1iZXIiPT10eXBlb2YgbiYmbDxuP2Uuc2V0QWN0dWFsV2lkdGgobix0LCEwKToibnVtYmVyIj09dHlwZW9mIGEmJmw+YSYmZS5zZXRBY3R1YWxXaWR0aChhLHQsITApfSk7IW07KXttPSEwO2NvbnN0IGk9ZS10aGlzLmdldFdpZHRoT2ZDb2xzSW5MaXN0KHApO2lmKGk8PTApdS5mb3JFYWNoKGU9Pnt2YXIgaSxyO2NvbnN0IG89bnVsbCE9PShyPW51bGw9PT0oaT1udWxsPT1kP3ZvaWQgMDpkW2UuZ2V0SWQoKV0pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLm1pbldpZHRoKSYmdm9pZCAwIT09cj9yOm51bGw9PXM/dm9pZCAwOnMuZGVmYXVsdE1pbldpZHRoOyJudW1iZXIiIT10eXBlb2Ygbz9lLnNldE1pbmltdW0odCk6ZS5zZXRBY3R1YWxXaWR0aChvLHQsITApfSk7ZWxzZXtjb25zdCBlPWkvdGhpcy5nZXRXaWR0aE9mQ29sc0luTGlzdCh1KTtsZXQgcj1pO2ZvcihsZXQgaT11Lmxlbmd0aC0xO2k+PTA7aS0tKXtjb25zdCBjPXVbaV0saD1udWxsPT1kP3ZvaWQgMDpkW2MuZ2V0SWQoKV0scD1udWxsIT09KG89bnVsbD09aD92b2lkIDA6aC5taW5XaWR0aCkmJnZvaWQgMCE9PW8/bzpudWxsPT1zP3ZvaWQgMDpzLmRlZmF1bHRNaW5XaWR0aCxnPW51bGwhPT0obj1udWxsPT1oP3ZvaWQgMDpoLm1heFdpZHRoKSYmdm9pZCAwIT09bj9uOm51bGw9PXM/dm9pZCAwOnMuZGVmYXVsdE1heFdpZHRoLHY9bnVsbCE9PShhPWMuZ2V0TWluV2lkdGgoKSkmJnZvaWQgMCE9PWE/YTowLEM9bnVsbCE9PShsPWMuZ2V0TWF4V2lkdGgoKSkmJnZvaWQgMCE9PWw/bDpOdW1iZXIuTUFYX1ZBTFVFLHk9Im51bWJlciI9PXR5cGVvZiBwJiZwPnY/cDpjLmdldE1pbldpZHRoKCksUz0ibnVtYmVyIj09dHlwZW9mIGcmJmc8Qz9nOmMuZ2V0TWF4V2lkdGgoKTtsZXQgdz1NYXRoLnJvdW5kKGMuZ2V0QWN0dWFsV2lkdGgoKSplKTtiKHkpJiZ3PHk/KHc9eSxmKGMpLG09ITEpOmIoUykmJnc+Uz8odz1TLGYoYyksbT0hMSk6MD09PWkmJih3PXIpLGMuc2V0QWN0dWFsV2lkdGgodyx0LCEwKSxyLT13fX19Zy5mb3JFYWNoKGU9PntlLmZpcmVDb2x1bW5XaWR0aENoYW5nZWRFdmVudCh0KX0pLHRoaXMuc2V0TGVmdFZhbHVlcyh0KSx0aGlzLnVwZGF0ZUJvZHlXaWR0aHMoKSxpfHx0aGlzLmRpc3BhdGNoQ29sdW1uUmVzaXplZEV2ZW50KGcsITAsdCl9YnVpbGREaXNwbGF5ZWRUcmVlcyhlKXtjb25zdCB0PVtdLGk9W10scz1bXTtlLmZvckVhY2goZT0+e3N3aXRjaChlLmdldFBpbm5lZCgpKXtjYXNlImxlZnQiOnQucHVzaChlKTticmVhaztjYXNlInJpZ2h0IjppLnB1c2goZSk7YnJlYWs7ZGVmYXVsdDpzLnB1c2goZSl9fSk7Y29uc3Qgcj1uZXcgZHQ7dGhpcy5kaXNwbGF5ZWRUcmVlTGVmdD10aGlzLmRpc3BsYXllZEdyb3VwQ3JlYXRvci5jcmVhdGVEaXNwbGF5ZWRHcm91cHModCxyLCJsZWZ0Iix0aGlzLmRpc3BsYXllZFRyZWVMZWZ0KSx0aGlzLmRpc3BsYXllZFRyZWVSaWdodD10aGlzLmRpc3BsYXllZEdyb3VwQ3JlYXRvci5jcmVhdGVEaXNwbGF5ZWRHcm91cHMoaSxyLCJyaWdodCIsdGhpcy5kaXNwbGF5ZWRUcmVlUmlnaHQpLHRoaXMuZGlzcGxheWVkVHJlZUNlbnRyZT10aGlzLmRpc3BsYXllZEdyb3VwQ3JlYXRvci5jcmVhdGVEaXNwbGF5ZWRHcm91cHMocyxyLG51bGwsdGhpcy5kaXNwbGF5ZWRUcmVlQ2VudHJlKSx0aGlzLnVwZGF0ZURpc3BsYXllZE1hcCgpfXVwZGF0ZURpc3BsYXllZE1hcCgpe3RoaXMuZGlzcGxheWVkQ29sdW1uc0FuZEdyb3Vwc01hcD17fTtjb25zdCBlPWU9Pnt0aGlzLmRpc3BsYXllZENvbHVtbnNBbmRHcm91cHNNYXBbZS5nZXRVbmlxdWVJZCgpXT1lfTt0aGlzLmNvbHVtblV0aWxzLmRlcHRoRmlyc3RBbGxDb2x1bW5UcmVlU2VhcmNoKHRoaXMuZGlzcGxheWVkVHJlZUNlbnRyZSxlKSx0aGlzLmNvbHVtblV0aWxzLmRlcHRoRmlyc3RBbGxDb2x1bW5UcmVlU2VhcmNoKHRoaXMuZGlzcGxheWVkVHJlZUxlZnQsZSksdGhpcy5jb2x1bW5VdGlscy5kZXB0aEZpcnN0QWxsQ29sdW1uVHJlZVNlYXJjaCh0aGlzLmRpc3BsYXllZFRyZWVSaWdodCxlKX1pc0Rpc3BsYXllZChlKXtyZXR1cm4gdGhpcy5kaXNwbGF5ZWRDb2x1bW5zQW5kR3JvdXBzTWFwW2UuZ2V0VW5pcXVlSWQoKV09PT1lfXVwZGF0ZU9wZW5DbG9zZWRWaXNpYmlsaXR5SW5Db2x1bW5Hcm91cHMoKXtjb25zdCBlPXRoaXMuZ2V0QWxsRGlzcGxheWVkVHJlZXMoKTt0aGlzLmNvbHVtblV0aWxzLmRlcHRoRmlyc3RBbGxDb2x1bW5UcmVlU2VhcmNoKGUsZT0+e2UgaW5zdGFuY2VvZiBhdCYmZS5jYWxjdWxhdGVEaXNwbGF5ZWRDb2x1bW5zKCl9KX1nZXRHcm91cEF1dG9Db2x1bW5zKCl7cmV0dXJuIHRoaXMuZ3JvdXBBdXRvQ29sdW1uc31jcmVhdGVHcm91cEF1dG9Db2x1bW5zSWZOZWVkZWQoKXtjb25zdCBlPXRoaXMuZm9yY2VSZWNyZWF0ZUF1dG9Hcm91cHM7aWYodGhpcy5mb3JjZVJlY3JlYXRlQXV0b0dyb3Vwcz0hMSwhdGhpcy5hdXRvR3JvdXBzTmVlZEJ1aWxkaW5nKXJldHVybiExO3RoaXMuYXV0b0dyb3Vwc05lZWRCdWlsZGluZz0hMTtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzR3JvdXBVc2VFbnRpcmVSb3codGhpcy5waXZvdE1vZGUpLGk9dGhpcy5waXZvdE1vZGU/dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJwaXZvdFN1cHByZXNzQXV0b0NvbHVtbiIpOnRoaXMuaXNHcm91cFN1cHByZXNzQXV0b0NvbHVtbigpO2lmKCh0aGlzLnJvd0dyb3VwQ29sdW1ucy5sZW5ndGg+MHx8dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpKSYmIWkmJiF0KXtjb25zdCB0PXRoaXMuYXV0b0dyb3VwQ29sU2VydmljZS5jcmVhdGVBdXRvR3JvdXBDb2x1bW5zKHRoaXMucm93R3JvdXBDb2x1bW5zKTtpZighdGhpcy5hdXRvQ29sc0VxdWFsKHQsdGhpcy5ncm91cEF1dG9Db2x1bW5zKXx8ZSlyZXR1cm4gdGhpcy5ncm91cEF1dG9Db2x1bW5zPXQsITB9ZWxzZSB0aGlzLmdyb3VwQXV0b0NvbHVtbnM9bnVsbDtyZXR1cm4hMX1pc0dyb3VwU3VwcHJlc3NBdXRvQ29sdW1uKCl7aWYoImN1c3RvbSI9PT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwRGlzcGxheVR5cGUiKSlyZXR1cm4hMDtyZXR1cm4iY3VzdG9tIj09PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidHJlZURhdGFEaXNwbGF5VHlwZSIpfWF1dG9Db2xzRXF1YWwoZSx0KXtyZXR1cm4gQWUoZSx0LChlLHQpPT5lLmdldENvbElkKCk9PT10LmdldENvbElkKCkpfWdldFdpZHRoT2ZDb2xzSW5MaXN0KGUpe3JldHVybiBlLnJlZHVjZSgoZSx0KT0+ZSt0LmdldEFjdHVhbFdpZHRoKCksMCl9Z2V0Rmlyc3REaXNwbGF5ZWRDb2x1bW4oKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIiksdD1bImdldERpc3BsYXllZExlZnRDb2x1bW5zIiwiZ2V0RGlzcGxheWVkQ2VudGVyQ29sdW1ucyIsImdldERpc3BsYXllZFJpZ2h0Q29sdW1ucyJdO2UmJnQucmV2ZXJzZSgpO2ZvcihsZXQgaT0wO2k8dC5sZW5ndGg7aSsrKXtjb25zdCBzPXRoaXNbdFtpXV0oKTtpZihzLmxlbmd0aClyZXR1cm4gZT9PZShzKTpzWzBdfXJldHVybiBudWxsfXNldENvbHVtbkhlYWRlckhlaWdodChlLHQpe2lmKGUuc2V0QXV0b0hlYWRlckhlaWdodCh0KSl7Y29uc3QgdD17dHlwZTpsdC5FVkVOVF9DT0xVTU5fSEVBREVSX0hFSUdIVF9DSEFOR0VELGNvbHVtbjplLGNvbHVtbnM6W2VdLHNvdXJjZToiYXV0b3NpemVDb2x1bW5IZWFkZXJIZWlnaHQifTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfX1nZXRDb2x1bW5Hcm91cEhlYWRlclJvd0hlaWdodCgpe3JldHVybiB0aGlzLmlzUGl2b3RNb2RlKCk/dGhpcy5nZXRQaXZvdEdyb3VwSGVhZGVySGVpZ2h0KCk6dGhpcy5nZXRHcm91cEhlYWRlckhlaWdodCgpfWdldENvbHVtbkhlYWRlclJvd0hlaWdodCgpe2NvbnN0IGU9dGhpcy5pc1Bpdm90TW9kZSgpP3RoaXMuZ2V0UGl2b3RIZWFkZXJIZWlnaHQoKTp0aGlzLmdldEhlYWRlckhlaWdodCgpLHQ9dGhpcy5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCkuZmlsdGVyKGU9PmUuaXNBdXRvSGVhZGVySGVpZ2h0KCkpLm1hcChlPT5lLmdldEF1dG9IZWFkZXJIZWlnaHQoKXx8MCk7cmV0dXJuIE1hdGgubWF4KGUsLi4udCl9Z2V0SGVhZGVySGVpZ2h0KCl7dmFyIGU7cmV0dXJuIG51bGwhPT0oZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImhlYWRlckhlaWdodCIpKSYmdm9pZCAwIT09ZT9lOnRoaXMuZW52aXJvbm1lbnQuZ2V0RnJvbVRoZW1lKDI1LCJoZWFkZXJIZWlnaHQiKX1nZXRGbG9hdGluZ0ZpbHRlcnNIZWlnaHQoKXt2YXIgZTtyZXR1cm4gbnVsbCE9PShlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZmxvYXRpbmdGaWx0ZXJzSGVpZ2h0IikpJiZ2b2lkIDAhPT1lP2U6dGhpcy5nZXRIZWFkZXJIZWlnaHQoKX1nZXRHcm91cEhlYWRlckhlaWdodCgpe3ZhciBlO3JldHVybiBudWxsIT09KGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cEhlYWRlckhlaWdodCIpKSYmdm9pZCAwIT09ZT9lOnRoaXMuZ2V0SGVhZGVySGVpZ2h0KCl9Z2V0UGl2b3RIZWFkZXJIZWlnaHQoKXt2YXIgZTtyZXR1cm4gbnVsbCE9PShlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicGl2b3RIZWFkZXJIZWlnaHQiKSkmJnZvaWQgMCE9PWU/ZTp0aGlzLmdldEhlYWRlckhlaWdodCgpfWdldFBpdm90R3JvdXBIZWFkZXJIZWlnaHQoKXt2YXIgZTtyZXR1cm4gbnVsbCE9PShlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicGl2b3RHcm91cEhlYWRlckhlaWdodCIpKSYmdm9pZCAwIT09ZT9lOnRoaXMuZ2V0R3JvdXBIZWFkZXJIZWlnaHQoKX1xdWV1ZVJlc2l6ZU9wZXJhdGlvbnMoKXt0aGlzLnNob3VsZFF1ZXVlUmVzaXplT3BlcmF0aW9ucz0hMH1wcm9jZXNzUmVzaXplT3BlcmF0aW9ucygpe3RoaXMuc2hvdWxkUXVldWVSZXNpemVPcGVyYXRpb25zPSExLHRoaXMucmVzaXplT3BlcmF0aW9uUXVldWUuZm9yRWFjaChlPT5lKCkpLHRoaXMucmVzaXplT3BlcmF0aW9uUXVldWU9W119cmVzZXRDb2x1bW5EZWZJbnRvQ29sdW1uKGUsdCl7Y29uc3QgaT1lLmdldFVzZXJQcm92aWRlZENvbERlZigpO2lmKCFpKXJldHVybiExO2NvbnN0IHM9dGhpcy5jb2x1bW5GYWN0b3J5LmFkZENvbHVtbkRlZmF1bHRBbmRUeXBlcyhpLGUuZ2V0Q29sSWQoKSk7cmV0dXJuIGUuc2V0Q29sRGVmKHMsaSx0KSwhMH1pc0NvbHVtbkdyb3VwaW5nTG9ja2VkKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cExvY2tHcm91cENvbHVtbnMiKTtpZighZS5pc1Jvd0dyb3VwQWN0aXZlKCl8fDA9PT10KXJldHVybiExO2lmKC0xPT09dClyZXR1cm4hMDtyZXR1cm4gdD50aGlzLnJvd0dyb3VwQ29sdW1ucy5maW5kSW5kZXgodD0+dC5nZXRDb2xJZCgpPT09ZS5nZXRDb2xJZCgpKX1nZW5lcmF0ZUNvbHVtblN0YXRlRm9yUm93R3JvdXBBbmRQaXZvdEluZGV4ZXMoZSx0KXtsZXQgaT17fTtjb25zdCBzPShlLHQscyxyLG8sbik9PntpZighdC5sZW5ndGh8fCF0aGlzLnByaW1hcnlDb2x1bW5zKXJldHVybltdO2NvbnN0IGE9T2JqZWN0LmtleXMoZSksbD1uZXcgU2V0KGEpLGQ9bmV3IFNldChhKSxjPW5ldyBTZXQodC5tYXAoZT0+e2NvbnN0IHQ9ZS5nZXRDb2xJZCgpO3JldHVybiBkLmRlbGV0ZSh0KSx0fSkuY29uY2F0KGEpKSxoPVtdLHU9e307bGV0IHA9MDtmb3IobGV0IGU9MDtlPHRoaXMucHJpbWFyeUNvbHVtbnMubGVuZ3RoO2UrKyl7Y29uc3QgdD10aGlzLnByaW1hcnlDb2x1bW5zW2VdLmdldENvbElkKCk7Yy5oYXModCkmJihoLnB1c2godCksdVt0XT1wKyspfWxldCBnPTFlMyxtPSExLGY9MDtjb25zdCB2PXQ9Pntjb25zdCBpPXVbdF07Zm9yKGxldCB0PWY7dDxpO3QrKyl7Y29uc3QgaT1oW3RdO2QuaGFzKGkpJiYoZVtpXVtvXT1nKyssZC5kZWxldGUoaSkpfWY9aX07dC5mb3JFYWNoKHQ9Pntjb25zdCBhPXQuZ2V0Q29sSWQoKTtpZihsLmhhcyhhKSl2KGEpLGVbYV1bb109ZysrO2Vsc2V7Y29uc3QgbD10LmdldENvbERlZigpO2lmKG51bGw9PT1sW29dfHx2b2lkIDA9PT1sW29dJiZudWxsPT1sW25dKXtpZighbSl7bFtzXXx8dm9pZCAwPT09bFtzXSYmbFtyXT92KGEpOihkLmZvckVhY2godD0+e2VbdF1bb109Zyt1W3RdfSksZys9aC5sZW5ndGgsbT0hMCl9aVthXXx8KGlbYV09e2NvbElkOmF9KSxpW2FdW29dPWcrK319fSl9O3JldHVybiBzKGUsdGhpcy5yb3dHcm91cENvbHVtbnMsInJvd0dyb3VwIiwiaW5pdGlhbFJvd0dyb3VwIiwicm93R3JvdXBJbmRleCIsImluaXRpYWxSb3dHcm91cEluZGV4Iikscyh0LHRoaXMucGl2b3RDb2x1bW5zLCJwaXZvdCIsImluaXRpYWxQaXZvdCIsInBpdm90SW5kZXgiLCJpbml0aWFsUGl2b3RJbmRleCIpLE9iamVjdC52YWx1ZXMoaSl9b25Db2x1bW5zUmVhZHkoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiYXV0b1NpemVTdHJhdGVneSIpO2lmKCFlKXJldHVybjtjb25zdHt0eXBlOnR9PWU7c2V0VGltZW91dCgoKT0+e2lmKCJmaXRHcmlkV2lkdGgiPT09dCl7Y29uc3R7Y29sdW1uTGltaXRzOnQsZGVmYXVsdE1pbldpZHRoOmksZGVmYXVsdE1heFdpZHRoOnN9PWUscj1udWxsPT10P3ZvaWQgMDp0Lm1hcCgoe2NvbElkOmUsbWluV2lkdGg6dCxtYXhXaWR0aDppfSk9Pih7a2V5OmUsbWluV2lkdGg6dCxtYXhXaWR0aDppfSkpO3RoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLnNpemVDb2x1bW5zVG9GaXQoe2RlZmF1bHRNaW5XaWR0aDppLGRlZmF1bHRNYXhXaWR0aDpzLGNvbHVtbkxpbWl0czpyfSl9ZWxzZSJmaXRQcm92aWRlZFdpZHRoIj09PXQmJnRoaXMuc2l6ZUNvbHVtbnNUb0ZpdChlLndpZHRoLCJzaXplQ29sdW1uc1RvRml0Iil9KX1vbkZpcnN0RGF0YVJlbmRlcmVkKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImF1dG9TaXplU3RyYXRlZ3kiKTtpZigiZml0Q2VsbENvbnRlbnRzIiE9PShudWxsPT1lP3ZvaWQgMDplLnR5cGUpKXJldHVybjtjb25zdHtjb2xJZHM6dCxza2lwSGVhZGVyOml9PWU7c2V0VGltZW91dCgoKT0+e3Q/dGhpcy5hdXRvU2l6ZUNvbHVtbnMoe2NvbHVtbnM6dCxza2lwSGVhZGVyOmksc291cmNlOiJhdXRvc2l6ZUNvbHVtbnMifSk6dGhpcy5hdXRvU2l6ZUFsbENvbHVtbnMoImF1dG9zaXplQ29sdW1ucyIsaSl9KX19O2Z1bmN0aW9uIFR0KGUpe3JldHVybiJncmlkT3B0aW9uc1VwZGF0ZWQiPT09ZT8iZ3JpZE9wdGlvbnNDaGFuZ2VkIjplfWJ0KFtjZSgiZXhwcmVzc2lvblNlcnZpY2UiKV0seHQucHJvdG90eXBlLCJleHByZXNzaW9uU2VydmljZSIsdm9pZCAwKSxidChbY2UoImNvbHVtbkZhY3RvcnkiKV0seHQucHJvdG90eXBlLCJjb2x1bW5GYWN0b3J5Iix2b2lkIDApLGJ0KFtjZSgiZGlzcGxheWVkR3JvdXBDcmVhdG9yIildLHh0LnByb3RvdHlwZSwiZGlzcGxheWVkR3JvdXBDcmVhdG9yIix2b2lkIDApLGJ0KFtjZSgiY3RybHNTZXJ2aWNlIildLHh0LnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLGJ0KFtjZSgiYXV0b1dpZHRoQ2FsY3VsYXRvciIpXSx4dC5wcm90b3R5cGUsImF1dG9XaWR0aENhbGN1bGF0b3IiLHZvaWQgMCksYnQoW2NlKCJjb2x1bW5VdGlscyIpXSx4dC5wcm90b3R5cGUsImNvbHVtblV0aWxzIix2b2lkIDApLGJ0KFtjZSgiY29sdW1uQW5pbWF0aW9uU2VydmljZSIpXSx4dC5wcm90b3R5cGUsImNvbHVtbkFuaW1hdGlvblNlcnZpY2UiLHZvaWQgMCksYnQoW2NlKCJhdXRvR3JvdXBDb2xTZXJ2aWNlIildLHh0LnByb3RvdHlwZSwiYXV0b0dyb3VwQ29sU2VydmljZSIsdm9pZCAwKSxidChbaGUoImFnZ0Z1bmNTZXJ2aWNlIildLHh0LnByb3RvdHlwZSwiYWdnRnVuY1NlcnZpY2UiLHZvaWQgMCksYnQoW2hlKCJ2YWx1ZUNhY2hlIildLHh0LnByb3RvdHlwZSwidmFsdWVDYWNoZSIsdm9pZCAwKSxidChbaGUoImFuaW1hdGlvbkZyYW1lU2VydmljZSIpXSx4dC5wcm90b3R5cGUsImFuaW1hdGlvbkZyYW1lU2VydmljZSIsdm9pZCAwKSxidChbY2UoInNvcnRDb250cm9sbGVyIildLHh0LnByb3RvdHlwZSwic29ydENvbnRyb2xsZXIiLHZvaWQgMCksYnQoW2NlKCJjb2x1bW5EZWZGYWN0b3J5IildLHh0LnByb3RvdHlwZSwiY29sdW1uRGVmRmFjdG9yeSIsdm9pZCAwKSxidChbYWVdLHh0LnByb3RvdHlwZSwiaW5pdCIsbnVsbCksYnQoW2xlXSx4dC5wcm90b3R5cGUsImRlc3Ryb3lDb2x1bW5zIixudWxsKSxidChbRXQoMCxwZSgibG9nZ2VyRmFjdG9yeSIpKV0seHQucHJvdG90eXBlLCJzZXRCZWFucyIsbnVsbCkseHQ9YnQoW2RlKCJjb2x1bW5Nb2RlbCIpXSx4dCk7dmFyIER0PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBPdD1jbGFzcyBleHRlbmRzIGl0e2NhbGN1bGF0ZUNvbE1pbldpZHRoKGUpe3JldHVybiBudWxsIT1lLm1pbldpZHRoP2UubWluV2lkdGg6dGhpcy5lbnZpcm9ubWVudC5nZXRNaW5Db2xXaWR0aCgpfWNhbGN1bGF0ZUNvbE1heFdpZHRoKGUpe3JldHVybiBudWxsIT1lLm1heFdpZHRoP2UubWF4V2lkdGg6TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJ9Y2FsY3VsYXRlQ29sSW5pdGlhbFdpZHRoKGUpe2NvbnN0IHQ9dGhpcy5jYWxjdWxhdGVDb2xNaW5XaWR0aChlKSxpPXRoaXMuY2FsY3VsYXRlQ29sTWF4V2lkdGgoZSk7bGV0IHM7Y29uc3Qgcj1UKGUud2lkdGgpLG89VChlLmluaXRpYWxXaWR0aCk7cmV0dXJuIHM9bnVsbCE9cj9yOm51bGwhPW8/bzoyMDAsTWF0aC5tYXgoTWF0aC5taW4ocyxpKSx0KX1nZXRPcmlnaW5hbFBhdGhGb3JDb2x1bW4oZSx0KXtjb25zdCBpPVtdO2xldCBzPSExO2NvbnN0IHI9KHQsbyk9Pntmb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKyl7aWYocylyZXR1cm47Y29uc3QgYT10W25dO2lmKGEgaW5zdGFuY2VvZiB4ZSl7cihhLmdldENoaWxkcmVuKCksbysxKSxpW29dPWF9ZWxzZSBhPT09ZSYmKHM9ITApfX07cmV0dXJuIHIodCwwKSxzP2k6bnVsbH1kZXB0aEZpcnN0T3JpZ2luYWxUcmVlU2VhcmNoKGUsdCxpKXt0JiZ0LmZvckVhY2godD0+e3QgaW5zdGFuY2VvZiB4ZSYmdGhpcy5kZXB0aEZpcnN0T3JpZ2luYWxUcmVlU2VhcmNoKHQsdC5nZXRDaGlsZHJlbigpLGkpLGkodCxlKX0pfWRlcHRoRmlyc3RBbGxDb2x1bW5UcmVlU2VhcmNoKGUsdCl7ZSYmZS5mb3JFYWNoKGU9PntlIGluc3RhbmNlb2YgYXQmJnRoaXMuZGVwdGhGaXJzdEFsbENvbHVtblRyZWVTZWFyY2goZS5nZXRDaGlsZHJlbigpLHQpLHQoZSl9KX1kZXB0aEZpcnN0RGlzcGxheWVkQ29sdW1uVHJlZVNlYXJjaChlLHQpe2UmJmUuZm9yRWFjaChlPT57ZSBpbnN0YW5jZW9mIGF0JiZ0aGlzLmRlcHRoRmlyc3REaXNwbGF5ZWRDb2x1bW5UcmVlU2VhcmNoKGUuZ2V0RGlzcGxheWVkQ2hpbGRyZW4oKSx0KSx0KGUpfSl9fTtPdD1EdChbZGUoImNvbHVtblV0aWxzIildLE90KTt2YXIgQXQ9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IFB0PWNsYXNzIGV4dGVuZHMgaXR7Y3JlYXRlRGlzcGxheWVkR3JvdXBzKGUsdCxpLHMpe2NvbnN0IHI9dGhpcy5tYXBPbGRHcm91cHNCeUlkKHMpLG89W107bGV0IG49ZTtmb3IoO24ubGVuZ3RoOyl7Y29uc3QgZT1uO249W107bGV0IHM9MDtjb25zdCBhPWE9Pntjb25zdCBsPXM7cz1hO2NvbnN0IGQ9ZVtsXSxjPShkIGluc3RhbmNlb2YgYXQ/ZC5nZXRQcm92aWRlZENvbHVtbkdyb3VwKCk6ZCkuZ2V0T3JpZ2luYWxQYXJlbnQoKTtpZihudWxsPT1jKXtmb3IobGV0IHQ9bDt0PGE7dCsrKW8ucHVzaChlW3RdKTtyZXR1cm59Y29uc3QgaD10aGlzLmNyZWF0ZUNvbHVtbkdyb3VwKGMsdCxyLGkpO2ZvcihsZXQgdD1sO3Q8YTt0KyspaC5hZGRDaGlsZChlW3RdKTtuLnB1c2goaCl9O2ZvcihsZXQgdD0xO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCBpPWVbdF0scj0oaSBpbnN0YW5jZW9mIGF0P2kuZ2V0UHJvdmlkZWRDb2x1bW5Hcm91cCgpOmkpLmdldE9yaWdpbmFsUGFyZW50KCksbz1lW3NdO3IhPT0obyBpbnN0YW5jZW9mIGF0P28uZ2V0UHJvdmlkZWRDb2x1bW5Hcm91cCgpOm8pLmdldE9yaWdpbmFsUGFyZW50KCkmJmEodCl9czxlLmxlbmd0aCYmYShlLmxlbmd0aCl9cmV0dXJuIHRoaXMuc2V0dXBQYXJlbnRzSW50b0NvbHVtbnMobyxudWxsKSxvfWNyZWF0ZUNvbHVtbkdyb3VwKGUsdCxpLHMpe2NvbnN0IHI9ZS5nZXRHcm91cElkKCksbz10LmdldEluc3RhbmNlSWRGb3JLZXkocik7bGV0IG49aVthdC5jcmVhdGVVbmlxdWVJZChyLG8pXTtyZXR1cm4gbiYmbi5nZXRQcm92aWRlZENvbHVtbkdyb3VwKCkhPT1lJiYobj1udWxsKSxiKG4pP24ucmVzZXQoKToobj1uZXcgYXQoZSxyLG8scyksdGhpcy5jb250ZXh0LmNyZWF0ZUJlYW4obikpLG59bWFwT2xkR3JvdXBzQnlJZChlKXtjb25zdCB0PXt9LGk9ZT0+e2UuZm9yRWFjaChlPT57aWYoZSBpbnN0YW5jZW9mIGF0KXtjb25zdCBzPWU7dFtlLmdldFVuaXF1ZUlkKCldPXMsaShzLmdldENoaWxkcmVuKCkpfX0pfTtyZXR1cm4gZSYmaShlKSx0fXNldHVwUGFyZW50c0ludG9Db2x1bW5zKGUsdCl7ZS5mb3JFYWNoKGU9PntpZihlLnNldFBhcmVudCh0KSxlIGluc3RhbmNlb2YgYXQpe2NvbnN0IHQ9ZTt0aGlzLnNldHVwUGFyZW50c0ludG9Db2x1bW5zKHQuZ2V0Q2hpbGRyZW4oKSx0KX19KX19O1B0PUF0KFtkZSgiZGlzcGxheWVkR3JvdXBDcmVhdG9yIildLFB0KTtjb25zdCBNdD17ZW5hYmxlQnJvd3NlclRvb2x0aXBzOiEwLHRvb2x0aXBUcmlnZ2VyOiEwLHRvb2x0aXBNb3VzZVRyYWNrOiEwLHRvb2x0aXBJbnRlcmFjdGlvbjohMCxkZWZhdWx0Q29sR3JvdXBEZWY6ITAsc3VwcHJlc3NBdXRvU2l6ZTohMCxza2lwSGVhZGVyT25BdXRvU2l6ZTohMCxhdXRvU2l6ZVN0cmF0ZWd5OiEwLGNvbXBvbmVudHM6ITAsc3RvcEVkaXRpbmdXaGVuQ2VsbHNMb3NlRm9jdXM6ITAsdW5kb1JlZG9DZWxsRWRpdGluZzohMCx1bmRvUmVkb0NlbGxFZGl0aW5nTGltaXQ6ITAsZXhjZWxTdHlsZXM6ITAsY2FjaGVRdWlja0ZpbHRlcjohMCxleGNsdWRlSGlkZGVuQ29sdW1uc0Zyb21RdWlja0ZpbHRlcjohMCxhZHZhbmNlZEZpbHRlck1vZGVsOiEwLGN1c3RvbUNoYXJ0VGhlbWVzOiEwLGNoYXJ0VGhlbWVPdmVycmlkZXM6ITAsZW5hYmxlQ2hhcnRUb29sUGFuZWxzQnV0dG9uOiEwLHN1cHByZXNzQ2hhcnRUb29sUGFuZWxzQnV0dG9uOiEwLGNoYXJ0VG9vbFBhbmVsc0RlZjohMCxsb2FkaW5nQ2VsbFJlbmRlcmVyU2VsZWN0b3I6ITAsbG9jYWxlVGV4dDohMCxrZWVwRGV0YWlsUm93czohMCxrZWVwRGV0YWlsUm93c0NvdW50OiEwLGRldGFpbFJvd0hlaWdodDohMCxkZXRhaWxSb3dBdXRvSGVpZ2h0OiEwLHRhYkluZGV4OiEwLHZhbHVlQ2FjaGU6ITAsdmFsdWVDYWNoZU5ldmVyRXhwaXJlczohMCxlbmFibGVDZWxsRXhwcmVzc2lvbnM6ITAsc3VwcHJlc3NQYXJlbnRzSW5Sb3dOb2RlczohMCxzdXBwcmVzc1RvdWNoOiEwLHN1cHByZXNzQXN5bmNFdmVudHM6ITAsc3VwcHJlc3NCcm93c2VyUmVzaXplT2JzZXJ2ZXI6ITAsc3VwcHJlc3NQcm9wZXJ0eU5hbWVzQ2hlY2s6ITAsZGVidWc6ITAsbG9hZGluZ092ZXJsYXlDb21wb25lbnQ6ITAsc3VwcHJlc3NMb2FkaW5nT3ZlcmxheTohMCxub1Jvd3NPdmVybGF5Q29tcG9uZW50OiEwLHBhZ2luYXRpb25QYWdlU2l6ZVNlbGVjdG9yOiEwLHBhZ2luYXRlQ2hpbGRSb3dzOiEwLHBpdm90UGFuZWxTaG93OiEwLHBpdm90U3VwcHJlc3NBdXRvQ29sdW1uOiEwLHN1cHByZXNzRXhwYW5kYWJsZVBpdm90R3JvdXBzOiEwLGFnZ0Z1bmNzOiEwLHN1cHByZXNzQWdnRnVuY0luSGVhZGVyOiEwLHN1cHByZXNzQWdnQXRSb290TGV2ZWw6ITAscmVtb3ZlUGl2b3RIZWFkZXJSb3dXaGVuU2luZ2xlVmFsdWVDb2x1bW46ITAsYWxsb3dTaG93Q2hhbmdlQWZ0ZXJGaWx0ZXI6ITAsZW5zdXJlRG9tT3JkZXI6ITAsZW5hYmxlUnRsOiEwLHN1cHByZXNzQ29sdW1uVmlydHVhbGlzYXRpb246ITAsc3VwcHJlc3NNYXhSZW5kZXJlZFJvd1Jlc3RyaWN0aW9uOiEwLHN1cHByZXNzUm93VmlydHVhbGlzYXRpb246ITAscm93RHJhZ1RleHQ6ITAsc3VwcHJlc3NHcm91cE1haW50YWluVmFsdWVUeXBlOiEwLGdyb3VwTG9ja0dyb3VwQ29sdW1uczohMCxyb3dHcm91cFBhbmVsU3VwcHJlc3NTb3J0OiEwLHN1cHByZXNzR3JvdXBSb3dzU3RpY2t5OiEwLHJvd01vZGVsVHlwZTohMCxjYWNoZU92ZXJmbG93U2l6ZTohMCxpbmZpbml0ZUluaXRpYWxSb3dDb3VudDohMCxzZXJ2ZXJTaWRlSW5pdGlhbFJvd0NvdW50OiEwLHN1cHByZXNzU2VydmVyU2lkZUluZmluaXRlU2Nyb2xsOiEwLG1heEJsb2Nrc0luQ2FjaGU6ITAsbWF4Q29uY3VycmVudERhdGFzb3VyY2VSZXF1ZXN0czohMCxibG9ja0xvYWREZWJvdW5jZU1pbGxpczohMCxzZXJ2ZXJTaWRlT25seVJlZnJlc2hGaWx0ZXJlZEdyb3VwczohMCxzZXJ2ZXJTaWRlUGl2b3RSZXN1bHRGaWVsZFNlcGFyYXRvcjohMCx2aWV3cG9ydFJvd01vZGVsUGFnZVNpemU6ITAsdmlld3BvcnRSb3dNb2RlbEJ1ZmZlclNpemU6ITAsZGVib3VuY2VWZXJ0aWNhbFNjcm9sbGJhcjohMCxzdXBwcmVzc0FuaW1hdGlvbkZyYW1lOiEwLHN1cHByZXNzUHJldmVudERlZmF1bHRPbk1vdXNlV2hlZWw6ITAsc2Nyb2xsYmFyV2lkdGg6ITAsaWNvbnM6ITAsc3VwcHJlc3NSb3dUcmFuc2Zvcm06ITAsZ3JpZElkOiEwLGZ1bmN0aW9uc1Bhc3NpdmU6ITAsZW5hYmxlR3JvdXBFZGl0OiEwLGluaXRpYWxTdGF0ZTohMCxwcm9jZXNzVW5waW5uZWRDb2x1bW5zOiEwLGNyZWF0ZUNoYXJ0Q29udGFpbmVyOiEwLGdldExvY2FsZVRleHQ6ITAsZ2V0Um93SWQ6ITAscmVhY3RpdmVDdXN0b21Db21wb25lbnRzOiEwLGNvbHVtbk1lbnU6ITB9O2NsYXNzIEx0e312YXIgRnQ7THQuU1RSSU5HX1BST1BFUlRJRVM9WyJyb3dTZWxlY3Rpb24iLCJvdmVybGF5TG9hZGluZ1RlbXBsYXRlIiwib3ZlcmxheU5vUm93c1RlbXBsYXRlIiwiZ3JpZElkIiwicXVpY2tGaWx0ZXJUZXh0Iiwicm93TW9kZWxUeXBlIiwiZWRpdFR5cGUiLCJkb21MYXlvdXQiLCJjbGlwYm9hcmREZWxpbWl0ZXIiLCJyb3dHcm91cFBhbmVsU2hvdyIsIm11bHRpU29ydEtleSIsInBpdm90Q29sdW1uR3JvdXBUb3RhbHMiLCJwaXZvdFJvd1RvdGFscyIsInBpdm90UGFuZWxTaG93IiwiZmlsbEhhbmRsZURpcmVjdGlvbiIsImdyb3VwRGlzcGxheVR5cGUiLCJ0cmVlRGF0YURpc3BsYXlUeXBlIiwiY29sUmVzaXplRGVmYXVsdCIsInRvb2x0aXBUcmlnZ2VyIiwic2VydmVyU2lkZVBpdm90UmVzdWx0RmllbGRTZXBhcmF0b3IiLCJjb2x1bW5NZW51Il0sTHQuT0JKRUNUX1BST1BFUlRJRVM9WyJjb21wb25lbnRzIiwicm93U3R5bGUiLCJjb250ZXh0IiwiYXV0b0dyb3VwQ29sdW1uRGVmIiwibG9jYWxlVGV4dCIsImljb25zIiwiZGF0YXNvdXJjZSIsInNlcnZlclNpZGVEYXRhc291cmNlIiwidmlld3BvcnREYXRhc291cmNlIiwiZ3JvdXBSb3dSZW5kZXJlclBhcmFtcyIsImFnZ0Z1bmNzIiwiZnVsbFdpZHRoQ2VsbFJlbmRlcmVyUGFyYW1zIiwiZGVmYXVsdENvbEdyb3VwRGVmIiwiZGVmYXVsdENvbERlZiIsImRlZmF1bHRDc3ZFeHBvcnRQYXJhbXMiLCJkZWZhdWx0RXhjZWxFeHBvcnRQYXJhbXMiLCJjb2x1bW5UeXBlcyIsInJvd0NsYXNzUnVsZXMiLCJkZXRhaWxDZWxsUmVuZGVyZXJQYXJhbXMiLCJsb2FkaW5nQ2VsbFJlbmRlcmVyUGFyYW1zIiwibG9hZGluZ092ZXJsYXlDb21wb25lbnRQYXJhbXMiLCJub1Jvd3NPdmVybGF5Q29tcG9uZW50UGFyYW1zIiwicG9wdXBQYXJlbnQiLCJzdGF0dXNCYXIiLCJzaWRlQmFyIiwiY2hhcnRUaGVtZU92ZXJyaWRlcyIsImN1c3RvbUNoYXJ0VGhlbWVzIiwiY2hhcnRUb29sUGFuZWxzRGVmIiwiZGF0YVR5cGVEZWZpbml0aW9ucyIsImFkdmFuY2VkRmlsdGVyTW9kZWwiLCJhZHZhbmNlZEZpbHRlclBhcmVudCIsImFkdmFuY2VkRmlsdGVyQnVpbGRlclBhcmFtcyIsImluaXRpYWxTdGF0ZSIsImF1dG9TaXplU3RyYXRlZ3kiXSxMdC5BUlJBWV9QUk9QRVJUSUVTPVsic29ydGluZ09yZGVyIiwiYWxpZ25lZEdyaWRzIiwicm93RGF0YSIsImNvbHVtbkRlZnMiLCJleGNlbFN0eWxlcyIsInBpbm5lZFRvcFJvd0RhdGEiLCJwaW5uZWRCb3R0b21Sb3dEYXRhIiwiY2hhcnRUaGVtZXMiLCJyb3dDbGFzcyIsInBhZ2luYXRpb25QYWdlU2l6ZVNlbGVjdG9yIl0sTHQuTlVNQkVSX1BST1BFUlRJRVM9WyJyb3dIZWlnaHQiLCJkZXRhaWxSb3dIZWlnaHQiLCJyb3dCdWZmZXIiLCJoZWFkZXJIZWlnaHQiLCJncm91cEhlYWRlckhlaWdodCIsImdyb3VwTG9ja0dyb3VwQ29sdW1ucyIsImZsb2F0aW5nRmlsdGVyc0hlaWdodCIsInBpdm90SGVhZGVySGVpZ2h0IiwicGl2b3RHcm91cEhlYWRlckhlaWdodCIsImdyb3VwRGVmYXVsdEV4cGFuZGVkIiwicGl2b3REZWZhdWx0RXhwYW5kZWQiLCJ2aWV3cG9ydFJvd01vZGVsUGFnZVNpemUiLCJ2aWV3cG9ydFJvd01vZGVsQnVmZmVyU2l6ZSIsImF1dG9TaXplUGFkZGluZyIsIm1heEJsb2Nrc0luQ2FjaGUiLCJtYXhDb25jdXJyZW50RGF0YXNvdXJjZVJlcXVlc3RzIiwidG9vbHRpcFNob3dEZWxheSIsInRvb2x0aXBIaWRlRGVsYXkiLCJjYWNoZU92ZXJmbG93U2l6ZSIsInBhZ2luYXRpb25QYWdlU2l6ZSIsImNhY2hlQmxvY2tTaXplIiwiaW5maW5pdGVJbml0aWFsUm93Q291bnQiLCJzZXJ2ZXJTaWRlSW5pdGlhbFJvd0NvdW50Iiwic2Nyb2xsYmFyV2lkdGgiLCJhc3luY1RyYW5zYWN0aW9uV2FpdE1pbGxpcyIsImJsb2NrTG9hZERlYm91bmNlTWlsbGlzIiwia2VlcERldGFpbFJvd3NDb3VudCIsInVuZG9SZWRvQ2VsbEVkaXRpbmdMaW1pdCIsImNlbGxGbGFzaERlbGF5IiwiY2VsbEZhZGVEZWxheSIsImNlbGxGbGFzaER1cmF0aW9uIiwiY2VsbEZhZGVEdXJhdGlvbiIsInRhYkluZGV4Il0sTHQuQk9PTEVBTl9QUk9QRVJUSUVTPVsic3VwcHJlc3NNYWtlQ29sdW1uVmlzaWJsZUFmdGVyVW5Hcm91cCIsInN1cHByZXNzUm93Q2xpY2tTZWxlY3Rpb24iLCJzdXBwcmVzc0NlbGxGb2N1cyIsInN1cHByZXNzSGVhZGVyRm9jdXMiLCJzdXBwcmVzc0hvcml6b250YWxTY3JvbGwiLCJncm91cFNlbGVjdHNDaGlsZHJlbiIsImFsd2F5c1Nob3dIb3Jpem9udGFsU2Nyb2xsIiwiYWx3YXlzU2hvd1ZlcnRpY2FsU2Nyb2xsIiwiZGVidWciLCJlbmFibGVCcm93c2VyVG9vbHRpcHMiLCJlbmFibGVDZWxsRXhwcmVzc2lvbnMiLCJncm91cEluY2x1ZGVUb3RhbEZvb3RlciIsImdyb3VwU3VwcHJlc3NCbGFua0hlYWRlciIsInN1cHByZXNzTWVudUhpZGUiLCJzdXBwcmVzc1Jvd0Rlc2VsZWN0aW9uIiwidW5Tb3J0SWNvbiIsInN1cHByZXNzTXVsdGlTb3J0IiwiYWx3YXlzTXVsdGlTb3J0Iiwic2luZ2xlQ2xpY2tFZGl0Iiwic3VwcHJlc3NMb2FkaW5nT3ZlcmxheSIsInN1cHByZXNzTm9Sb3dzT3ZlcmxheSIsInN1cHByZXNzQXV0b1NpemUiLCJza2lwSGVhZGVyT25BdXRvU2l6ZSIsInN1cHByZXNzUGFyZW50c0luUm93Tm9kZXMiLCJzdXBwcmVzc0NvbHVtbk1vdmVBbmltYXRpb24iLCJzdXBwcmVzc01vdmFibGVDb2x1bW5zIiwic3VwcHJlc3NGaWVsZERvdE5vdGF0aW9uIiwiZW5hYmxlUmFuZ2VTZWxlY3Rpb24iLCJlbmFibGVSYW5nZUhhbmRsZSIsImVuYWJsZUZpbGxIYW5kbGUiLCJzdXBwcmVzc0NsZWFyT25GaWxsUmVkdWN0aW9uIiwiZGVsdGFTb3J0Iiwic3VwcHJlc3NUb3VjaCIsInN1cHByZXNzQXN5bmNFdmVudHMiLCJhbGxvd0NvbnRleHRNZW51V2l0aENvbnRyb2xLZXkiLCJzdXBwcmVzc0NvbnRleHRNZW51IiwiZW5hYmxlQ2VsbENoYW5nZUZsYXNoIiwic3VwcHJlc3NEcmFnTGVhdmVIaWRlc0NvbHVtbnMiLCJzdXBwcmVzc1Jvd0dyb3VwSGlkZXNDb2x1bW5zIiwic3VwcHJlc3NNaWRkbGVDbGlja1Njcm9sbHMiLCJzdXBwcmVzc1ByZXZlbnREZWZhdWx0T25Nb3VzZVdoZWVsIiwic3VwcHJlc3NDb3B5Um93c1RvQ2xpcGJvYXJkIiwiY29weUhlYWRlcnNUb0NsaXBib2FyZCIsImNvcHlHcm91cEhlYWRlcnNUb0NsaXBib2FyZCIsInBpdm90TW9kZSIsInN1cHByZXNzQWdnRnVuY0luSGVhZGVyIiwic3VwcHJlc3NDb2x1bW5WaXJ0dWFsaXNhdGlvbiIsImFsd2F5c0FnZ3JlZ2F0ZUF0Um9vdExldmVsIiwic3VwcHJlc3NBZ2dBdFJvb3RMZXZlbCIsInN1cHByZXNzRm9jdXNBZnRlclJlZnJlc2giLCJmdW5jdGlvbnNQYXNzaXZlIiwiZnVuY3Rpb25zUmVhZE9ubHkiLCJhbmltYXRlUm93cyIsImdyb3VwU2VsZWN0c0ZpbHRlcmVkIiwiZ3JvdXBSZW1vdmVTaW5nbGVDaGlsZHJlbiIsImdyb3VwUmVtb3ZlTG93ZXN0U2luZ2xlQ2hpbGRyZW4iLCJlbmFibGVSdGwiLCJzdXBwcmVzc0NsaWNrRWRpdCIsInJvd0RyYWdFbnRpcmVSb3ciLCJyb3dEcmFnTWFuYWdlZCIsInN1cHByZXNzUm93RHJhZyIsInN1cHByZXNzTW92ZVdoZW5Sb3dEcmFnZ2luZyIsInJvd0RyYWdNdWx0aVJvdyIsImVuYWJsZUdyb3VwRWRpdCIsImVtYmVkRnVsbFdpZHRoUm93cyIsInN1cHByZXNzUGFnaW5hdGlvblBhbmVsIiwiZ3JvdXBIaWRlT3BlblBhcmVudHMiLCJncm91cEFsbG93VW5iYWxhbmNlZCIsInBhZ2luYXRpb24iLCJwYWdpbmF0aW9uQXV0b1BhZ2VTaXplIiwic3VwcHJlc3NTY3JvbGxPbk5ld0RhdGEiLCJzdXBwcmVzc1Njcm9sbFdoZW5Qb3B1cHNBcmVPcGVuIiwicHVyZ2VDbG9zZWRSb3dOb2RlcyIsImNhY2hlUXVpY2tGaWx0ZXIiLCJpbmNsdWRlSGlkZGVuQ29sdW1uc0luUXVpY2tGaWx0ZXIiLCJleGNsdWRlSGlkZGVuQ29sdW1uc0Zyb21RdWlja0ZpbHRlciIsImVuc3VyZURvbU9yZGVyIiwiYWNjZW50ZWRTb3J0Iiwic3VwcHJlc3NDaGFuZ2VEZXRlY3Rpb24iLCJ2YWx1ZUNhY2hlIiwidmFsdWVDYWNoZU5ldmVyRXhwaXJlcyIsImFnZ3JlZ2F0ZU9ubHlDaGFuZ2VkQ29sdW1ucyIsInN1cHByZXNzQW5pbWF0aW9uRnJhbWUiLCJzdXBwcmVzc0V4Y2VsRXhwb3J0Iiwic3VwcHJlc3NDc3ZFeHBvcnQiLCJpbmNsdWRlSGlkZGVuQ29sdW1uc0luQWR2YW5jZWRGaWx0ZXIiLCJzdXBwcmVzc011bHRpUmFuZ2VTZWxlY3Rpb24iLCJlbnRlck1vdmVzRG93biIsImVudGVyTW92ZXNEb3duQWZ0ZXJFZGl0IiwiZW50ZXJOYXZpZ2F0ZXNWZXJ0aWNhbGx5QWZ0ZXJFZGl0IiwiZW50ZXJOYXZpZ2F0ZXNWZXJ0aWNhbGx5Iiwic3VwcHJlc3NQcm9wZXJ0eU5hbWVzQ2hlY2siLCJyb3dNdWx0aVNlbGVjdFdpdGhDbGljayIsInN1cHByZXNzUm93SG92ZXJIaWdobGlnaHQiLCJzdXBwcmVzc1Jvd1RyYW5zZm9ybSIsInN1cHByZXNzQ2xpcGJvYXJkUGFzdGUiLCJzdXBwcmVzc0xhc3RFbXB0eUxpbmVPblBhc3RlIiwiZW5hYmxlQ2hhcnRzIiwiZW5hYmxlQ2hhcnRUb29sUGFuZWxzQnV0dG9uIiwic3VwcHJlc3NDaGFydFRvb2xQYW5lbHNCdXR0b24iLCJzdXBwcmVzc01haW50YWluVW5zb3J0ZWRPcmRlciIsImVuYWJsZUNlbGxUZXh0U2VsZWN0aW9uIiwic3VwcHJlc3NCcm93c2VyUmVzaXplT2JzZXJ2ZXIiLCJzdXBwcmVzc01heFJlbmRlcmVkUm93UmVzdHJpY3Rpb24iLCJleGNsdWRlQ2hpbGRyZW5XaGVuVHJlZURhdGFGaWx0ZXJpbmciLCJ0b29sdGlwTW91c2VUcmFjayIsInRvb2x0aXBJbnRlcmFjdGlvbiIsImtlZXBEZXRhaWxSb3dzIiwicGFnaW5hdGVDaGlsZFJvd3MiLCJwcmV2ZW50RGVmYXVsdE9uQ29udGV4dE1lbnUiLCJ1bmRvUmVkb0NlbGxFZGl0aW5nIiwiYWxsb3dEcmFnRnJvbUNvbHVtbnNUb29sUGFuZWwiLCJwaXZvdFN1cHByZXNzQXV0b0NvbHVtbiIsInN1cHByZXNzRXhwYW5kYWJsZVBpdm90R3JvdXBzIiwiZGVib3VuY2VWZXJ0aWNhbFNjcm9sbGJhciIsImRldGFpbFJvd0F1dG9IZWlnaHQiLCJzZXJ2ZXJTaWRlRmlsdGVyQWxsTGV2ZWxzIiwic2VydmVyU2lkZVNvcnRBbGxMZXZlbHMiLCJzZXJ2ZXJTaWRlRW5hYmxlQ2xpZW50U2lkZVNvcnQiLCJzZXJ2ZXJTaWRlT25seVJlZnJlc2hGaWx0ZXJlZEdyb3VwcyIsInNlcnZlclNpZGVTb3J0T25TZXJ2ZXIiLCJzZXJ2ZXJTaWRlRmlsdGVyT25TZXJ2ZXIiLCJzdXBwcmVzc0FnZ0ZpbHRlcmVkT25seSIsInNob3dPcGVuZWRHcm91cCIsInN1cHByZXNzQ2xpcGJvYXJkQXBpIiwic3VwcHJlc3NNb2RlbFVwZGF0ZUFmdGVyVXBkYXRlVHJhbnNhY3Rpb24iLCJzdG9wRWRpdGluZ1doZW5DZWxsc0xvc2VGb2N1cyIsIm1haW50YWluQ29sdW1uT3JkZXIiLCJncm91cE1haW50YWluT3JkZXIiLCJjb2x1bW5Ib3ZlckhpZ2hsaWdodCIsInJlYWRPbmx5RWRpdCIsInN1cHByZXNzUm93VmlydHVhbGlzYXRpb24iLCJlbmFibGVDZWxsRWRpdGluZ09uQmFja3NwYWNlIiwicmVzZXRSb3dEYXRhT25VcGRhdGUiLCJyZW1vdmVQaXZvdEhlYWRlclJvd1doZW5TaW5nbGVWYWx1ZUNvbHVtbiIsInN1cHByZXNzQ29weVNpbmdsZUNlbGxSYW5nZXMiLCJzdXBwcmVzc0dyb3VwUm93c1N0aWNreSIsInN1cHByZXNzQ3V0VG9DbGlwYm9hcmQiLCJzdXBwcmVzc1NlcnZlclNpZGVJbmZpbml0ZVNjcm9sbCIsInJvd0dyb3VwUGFuZWxTdXBwcmVzc1NvcnQiLCJhbGxvd1Nob3dDaGFuZ2VBZnRlckZpbHRlciIsImVuYWJsZUFkdmFuY2VkRmlsdGVyIiwibWFzdGVyRGV0YWlsIiwidHJlZURhdGEiLCJzdXBwcmVzc0dyb3VwTWFpbnRhaW5WYWx1ZVR5cGUiLCJyZWFjdGl2ZUN1c3RvbUNvbXBvbmVudHMiXSxMdC5GVU5DVElPTkFMX1BST1BFUlRJRVM9WyJkb2VzRXh0ZXJuYWxGaWx0ZXJQYXNzIiwicHJvY2Vzc1Bpdm90UmVzdWx0Q29sRGVmIiwicHJvY2Vzc1Bpdm90UmVzdWx0Q29sR3JvdXBEZWYiLCJnZXRCdXNpbmVzc0tleUZvck5vZGUiLCJpc1Jvd1NlbGVjdGFibGUiLCJyb3dEcmFnVGV4dCIsImdyb3VwUm93UmVuZGVyZXIiLCJmdWxsV2lkdGhDZWxsUmVuZGVyZXIiLCJsb2FkaW5nQ2VsbFJlbmRlcmVyIiwibG9hZGluZ092ZXJsYXlDb21wb25lbnQiLCJub1Jvd3NPdmVybGF5Q29tcG9uZW50IiwiZGV0YWlsQ2VsbFJlbmRlcmVyIiwicXVpY2tGaWx0ZXJQYXJzZXIiLCJxdWlja0ZpbHRlck1hdGNoZXIiXSxMdC5DQUxMQkFDS19QUk9QRVJUSUVTPVsiZ2V0TG9jYWxlVGV4dCIsImlzRXh0ZXJuYWxGaWx0ZXJQcmVzZW50IiwiZ2V0Um93SGVpZ2h0IiwiZ2V0Um93Q2xhc3MiLCJnZXRSb3dTdHlsZSIsImdldENvbnRleHRNZW51SXRlbXMiLCJnZXRNYWluTWVudUl0ZW1zIiwicHJvY2Vzc1Jvd1Bvc3RDcmVhdGUiLCJwcm9jZXNzQ2VsbEZvckNsaXBib2FyZCIsImdldEdyb3VwUm93QWdnIiwiaXNGdWxsV2lkdGhSb3ciLCJzZW5kVG9DbGlwYm9hcmQiLCJuYXZpZ2F0ZVRvTmV4dEhlYWRlciIsInRhYlRvTmV4dEhlYWRlciIsIm5hdmlnYXRlVG9OZXh0Q2VsbCIsInRhYlRvTmV4dENlbGwiLCJwcm9jZXNzQ2VsbEZyb21DbGlwYm9hcmQiLCJnZXREb2N1bWVudCIsInBvc3RQcm9jZXNzUG9wdXAiLCJnZXRDaGlsZENvdW50IiwiZ2V0RGF0YVBhdGgiLCJpc1Jvd01hc3RlciIsInBvc3RTb3J0Um93cyIsInByb2Nlc3NIZWFkZXJGb3JDbGlwYm9hcmQiLCJwcm9jZXNzVW5waW5uZWRDb2x1bW5zIiwicHJvY2Vzc0dyb3VwSGVhZGVyRm9yQ2xpcGJvYXJkIiwicGFnaW5hdGlvbk51bWJlckZvcm1hdHRlciIsInByb2Nlc3NEYXRhRnJvbUNsaXBib2FyZCIsImdldFNlcnZlclNpZGVHcm91cEtleSIsImlzU2VydmVyU2lkZUdyb3VwIiwiY3JlYXRlQ2hhcnRDb250YWluZXIiLCJnZXRDaGFydFRvb2xiYXJJdGVtcyIsImZpbGxPcGVyYXRpb24iLCJpc0FwcGx5U2VydmVyU2lkZVRyYW5zYWN0aW9uIiwiZ2V0U2VydmVyU2lkZUdyb3VwTGV2ZWxQYXJhbXMiLCJpc1NlcnZlclNpZGVHcm91cE9wZW5CeURlZmF1bHQiLCJpc0dyb3VwT3BlbkJ5RGVmYXVsdCIsImluaXRpYWxHcm91cE9yZGVyQ29tcGFyYXRvciIsImdyb3VwSW5jbHVkZUZvb3RlciIsImxvYWRpbmdDZWxsUmVuZGVyZXJTZWxlY3RvciIsImdldFJvd0lkIiwiZ3JvdXBBZ2dGaWx0ZXJpbmciXSxMdC5GVU5DVElPTl9QUk9QRVJUSUVTPVsuLi5MdC5GVU5DVElPTkFMX1BST1BFUlRJRVMsLi4uTHQuQ0FMTEJBQ0tfUFJPUEVSVElFU10sTHQuQUxMX1BST1BFUlRJRVM9Wy4uLkx0LkFSUkFZX1BST1BFUlRJRVMsLi4uTHQuT0JKRUNUX1BST1BFUlRJRVMsLi4uTHQuU1RSSU5HX1BST1BFUlRJRVMsLi4uTHQuTlVNQkVSX1BST1BFUlRJRVMsLi4uTHQuRlVOQ1RJT05fUFJPUEVSVElFUywuLi5MdC5CT09MRUFOX1BST1BFUlRJRVNdO2NsYXNzIEl0e3N0YXRpYyBnZXRDYWxsYmFja0ZvckV2ZW50KGUpe3JldHVybiFlfHxlLmxlbmd0aDwyP2U6Im9uIitlWzBdLnRvVXBwZXJDYXNlKCkrZS5zdWJzdHJpbmcoMSl9c3RhdGljIGdldEdyaWRPcHRpb25LZXlzKCl7cmV0dXJuIHRoaXMuQUxMX1BST1BFUlRJRVNfQU5EX0NBTExCQUNLU31zdGF0aWMgY29tYmluZUF0dHJpYnV0ZXNBbmRHcmlkT3B0aW9ucyhlLHQpeyJvYmplY3QiIT10eXBlb2YgZSYmKGU9e30pO2NvbnN0IGk9T2JqZWN0LmFzc2lnbih7fSxlKTtyZXR1cm4gSXQuZ2V0R3JpZE9wdGlvbktleXMoKS5mb3JFYWNoKGU9Pntjb25zdCBzPXRbZV07dm9pZCAwIT09cyYmcyE9PUl0LlZVRV9PTUlUVEVEX1BST1BFUlRZJiYoaVtlXT1zKX0pLGl9c3RhdGljIHByb2Nlc3NPbkNoYW5nZShlLHQpe2lmKCFlKXJldHVybjtjb25zdCBpPXt9O2xldCBzPSExO2lmKE9iamVjdC5rZXlzKGUpLmZpbHRlcihlPT5JdC5BTExfUFJPUEVSVElFU19BTkRfQ0FMTEJBQ0tTX1NFVC5oYXMoZSkpLmZvckVhY2godD0+e2lbdF09ZVt0XSxzPSEwfSksIXMpcmV0dXJuO3QuX19pbnRlcm5hbFVwZGF0ZUdyaWRPcHRpb25zKGkpO2NvbnN0IHI9e3R5cGU6bHQuRVZFTlRfQ09NUE9ORU5UX1NUQVRFX0NIQU5HRUR9O0YoaSwoZSx0KT0+e3JbZV09dH0pLHQuZGlzcGF0Y2hFdmVudChyKX19RnQ9SXQsSXQuRVZFTlRTPU0obHQpLEl0LlZVRV9PTUlUVEVEX1BST1BFUlRZPSJBRy1WVUUtT01JVFRFRC1QUk9QRVJUWSIsSXQuRVhDTFVERURfSU5URVJOQUxfRVZFTlRTPVtsdC5FVkVOVF9TQ1JPTExCQVJfV0lEVEhfQ0hBTkdFRCxsdC5FVkVOVF9DSEVDS0JPWF9DSEFOR0VELGx0LkVWRU5UX0hFSUdIVF9TQ0FMRV9DSEFOR0VELGx0LkVWRU5UX0JPRFlfSEVJR0hUX0NIQU5HRUQsbHQuRVZFTlRfQ09MVU1OX0NPTlRBSU5FUl9XSURUSF9DSEFOR0VELGx0LkVWRU5UX0RJU1BMQVlFRF9DT0xVTU5TX1dJRFRIX0NIQU5HRUQsbHQuRVZFTlRfU0NST0xMX1ZJU0lCSUxJVFlfQ0hBTkdFRCxsdC5FVkVOVF9DT0xVTU5fSE9WRVJfQ0hBTkdFRCxsdC5FVkVOVF9GTEFTSF9DRUxMUyxsdC5FVkVOVF9QQUdJTkFUSU9OX1BJWEVMX09GRlNFVF9DSEFOR0VELGx0LkVWRU5UX0RJU1BMQVlFRF9ST1dTX0NIQU5HRUQsbHQuRVZFTlRfTEVGVF9QSU5ORURfV0lEVEhfQ0hBTkdFRCxsdC5FVkVOVF9SSUdIVF9QSU5ORURfV0lEVEhfQ0hBTkdFRCxsdC5FVkVOVF9ST1dfQ09OVEFJTkVSX0hFSUdIVF9DSEFOR0VELGx0LkVWRU5UX1BPUFVQX1RPX0ZST05ULGx0LkVWRU5UX1NUT1JFX1VQREFURUQsbHQuRVZFTlRfQ09MVU1OX1BBTkVMX0lURU1fRFJBR19TVEFSVCxsdC5FVkVOVF9DT0xVTU5fUEFORUxfSVRFTV9EUkFHX0VORCxsdC5FVkVOVF9GSUxMX1NUQVJULGx0LkVWRU5UX0ZJTExfRU5ELGx0LkVWRU5UX0tFWV9TSE9SVENVVF9DSEFOR0VEX0NFTExfU1RBUlQsbHQuRVZFTlRfS0VZX1NIT1JUQ1VUX0NIQU5HRURfQ0VMTF9FTkQsbHQuRVZFTlRfRlVMTF9XSURUSF9ST1dfRk9DVVNFRCxsdC5FVkVOVF9IRUFERVJfSEVJR0hUX0NIQU5HRUQsbHQuRVZFTlRfQ09MVU1OX0hFQURFUl9IRUlHSFRfQ0hBTkdFRCxsdC5FVkVOVF9DRUxMX0ZPQ1VTX0NMRUFSRUQsbHQuRVZFTlRfR1JJRF9TVFlMRVNfQ0hBTkdFRCxsdC5FVkVOVF9GSUxURVJfREVTVFJPWUVELGx0LkVWRU5UX1JPV19EQVRBX1VQREFURV9TVEFSVEVELGx0LkVWRU5UX0FEVkFOQ0VEX0ZJTFRFUl9FTkFCTEVEX0NIQU5HRUQsbHQuRVZFTlRfREFUQV9UWVBFU19JTkZFUlJFRCxsdC5FVkVOVF9GSUVMRF9WQUxVRV9DSEFOR0VELGx0LkVWRU5UX0ZJRUxEX1BJQ0tFUl9WQUxVRV9TRUxFQ1RFRCxsdC5FVkVOVF9TVVBQUkVTU19DT0xVTU5fTU9WRV9DSEFOR0VELGx0LkVWRU5UX1NVUFBSRVNTX01FTlVfSElERV9DSEFOR0VELGx0LkVWRU5UX1NVUFBSRVNTX0ZJRUxEX0RPVF9OT1RBVElPTixsdC5FVkVOVF9ST1dfQ09VTlRfUkVBRFksbHQuRVZFTlRfU0lERV9CQVJfVVBEQVRFRF0sSXQuUFVCTElDX0VWRU5UUz1JdC5FVkVOVFMuZmlsdGVyKGU9PiFCZShJdC5FWENMVURFRF9JTlRFUk5BTF9FVkVOVFMsZSkpLEl0LkVWRU5UX0NBTExCQUNLUz1JdC5FVkVOVFMubWFwKGU9Pkl0LmdldENhbGxiYWNrRm9yRXZlbnQoZSkpLEl0LlNUUklOR19QUk9QRVJUSUVTPUx0LlNUUklOR19QUk9QRVJUSUVTLEl0Lk9CSkVDVF9QUk9QRVJUSUVTPUx0Lk9CSkVDVF9QUk9QRVJUSUVTLEl0LkFSUkFZX1BST1BFUlRJRVM9THQuQVJSQVlfUFJPUEVSVElFUyxJdC5OVU1CRVJfUFJPUEVSVElFUz1MdC5OVU1CRVJfUFJPUEVSVElFUyxJdC5CT09MRUFOX1BST1BFUlRJRVM9THQuQk9PTEVBTl9QUk9QRVJUSUVTLEl0LkZVTkNUSU9OX1BST1BFUlRJRVM9THQuRlVOQ1RJT05fUFJPUEVSVElFUyxJdC5BTExfUFJPUEVSVElFUz1MdC5BTExfUFJPUEVSVElFUyxJdC5BTExfUFJPUEVSVElFU19BTkRfQ0FMTEJBQ0tTPVsuLi5GdC5BTExfUFJPUEVSVElFUywuLi5GdC5FVkVOVF9DQUxMQkFDS1NdLEl0LkFMTF9QUk9QRVJUSUVTX0FORF9DQUxMQkFDS1NfU0VUPW5ldyBTZXQoSXQuQUxMX1BST1BFUlRJRVNfQU5EX0NBTExCQUNLUyk7dmFyIE50PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBHdCxrdCxfdCxWdCxCdCxIdCxXdCxqdCxVdD1jbGFzcyBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvbXBvbmVudHNNYXBwZWRCeU5hbWU9e319c2V0dXBDb21wb25lbnRzKGUpe2UmJmUuZm9yRWFjaChlPT50aGlzLmFkZENvbXBvbmVudChlKSl9YWRkQ29tcG9uZW50KGUpe2NvbnN0IHQ9ZS5jb21wb25lbnROYW1lLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIiQxLSQyIikudG9Mb3dlckNhc2UoKS50b1VwcGVyQ2FzZSgpO3RoaXMuY29tcG9uZW50c01hcHBlZEJ5TmFtZVt0XT1lLmNvbXBvbmVudENsYXNzfWdldENvbXBvbmVudENsYXNzKGUpe3JldHVybiB0aGlzLmNvbXBvbmVudHNNYXBwZWRCeU5hbWVbZV19fTtmdW5jdGlvbiB6dChlLHQsaSl7bnVsbD09aXx8InN0cmluZyI9PXR5cGVvZiBpJiYiIj09aT9ZdChlLHQpOkt0KGUsdCxpKX1mdW5jdGlvbiBLdChlLHQsaSl7ZS5zZXRBdHRyaWJ1dGUoJHQodCksaS50b1N0cmluZygpKX1mdW5jdGlvbiBZdChlLHQpe2UucmVtb3ZlQXR0cmlidXRlKCR0KHQpKX1mdW5jdGlvbiAkdChlKXtyZXR1cm4iYXJpYS0iK2V9ZnVuY3Rpb24gWHQoZSx0KXt0P2Uuc2V0QXR0cmlidXRlKCJyb2xlIix0KTplLnJlbW92ZUF0dHJpYnV0ZSgicm9sZSIpfWZ1bmN0aW9uIHF0KGUpe2xldCB0O3JldHVybiB0PSJhc2MiPT09ZT8iYXNjZW5kaW5nIjoiZGVzYyI9PT1lPyJkZXNjZW5kaW5nIjoibWl4ZWQiPT09ZT8ib3RoZXIiOiJub25lIix0fWZ1bmN0aW9uIFp0KGUpe3JldHVybiBwYXJzZUludChlLmdldEF0dHJpYnV0ZSgiYXJpYS1sZXZlbCIpLDEwKX1mdW5jdGlvbiBRdChlKXtyZXR1cm4gcGFyc2VJbnQoZS5nZXRBdHRyaWJ1dGUoImFyaWEtcG9zaW5zZXQiKSwxMCl9ZnVuY3Rpb24gSnQoZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIil9ZnVuY3Rpb24gZWkoZSx0KXt6dChlLCJsYWJlbCIsdCl9ZnVuY3Rpb24gdGkoZSx0KXt6dChlLCJsYWJlbGxlZGJ5Iix0KX1mdW5jdGlvbiBpaShlLHQpe3p0KGUsImRlc2NyaWJlZGJ5Iix0KX1mdW5jdGlvbiBzaShlLHQpe3p0KGUsImxpdmUiLHQpfWZ1bmN0aW9uIHJpKGUsdCl7enQoZSwiYXRvbWljIix0KX1mdW5jdGlvbiBvaShlLHQpe3p0KGUsInJlbGV2YW50Iix0KX1mdW5jdGlvbiBuaShlLHQpe3p0KGUsImxldmVsIix0KX1mdW5jdGlvbiBhaShlLHQpe3p0KGUsImRpc2FibGVkIix0KX1mdW5jdGlvbiBsaShlLHQpe3p0KGUsImhpZGRlbiIsdCl9ZnVuY3Rpb24gZGkoZSx0KXt6dChlLCJhY3RpdmVkZXNjZW5kYW50Iix0KX1mdW5jdGlvbiBjaShlLHQpe0t0KGUsImV4cGFuZGVkIix0KX1mdW5jdGlvbiBoaShlKXtZdChlLCJleHBhbmRlZCIpfWZ1bmN0aW9uIHVpKGUsdCl7S3QoZSwic2V0c2l6ZSIsdCl9ZnVuY3Rpb24gcGkoZSx0KXtLdChlLCJwb3NpbnNldCIsdCl9ZnVuY3Rpb24gZ2koZSx0KXtLdChlLCJtdWx0aXNlbGVjdGFibGUiLHQpfWZ1bmN0aW9uIG1pKGUsdCl7S3QoZSwicm93Y291bnQiLHQpfWZ1bmN0aW9uIGZpKGUsdCl7S3QoZSwicm93aW5kZXgiLHQpfWZ1bmN0aW9uIHZpKGUsdCl7S3QoZSwiY29sY291bnQiLHQpfWZ1bmN0aW9uIENpKGUsdCl7S3QoZSwiY29saW5kZXgiLHQpfWZ1bmN0aW9uIHlpKGUsdCl7S3QoZSwiY29sc3BhbiIsdCl9ZnVuY3Rpb24gU2koZSx0KXtLdChlLCJzb3J0Iix0KX1mdW5jdGlvbiB3aShlKXtZdChlLCJzb3J0Iil9ZnVuY3Rpb24gYmkoZSx0KXt6dChlLCJzZWxlY3RlZCIsdCl9ZnVuY3Rpb24gRWkoZSx0KXtLdChlLCJjaGVja2VkIix2b2lkIDA9PT10PyJtaXhlZCI6dCl9ZnVuY3Rpb24gUmkoZSx0KXt6dChlLCJjb250cm9scyIsdC5pZCksdGkodCxlLmlkKX1mdW5jdGlvbiB4aShlLHQpe3JldHVybiB2b2lkIDA9PT10P2UoImFyaWFJbmRldGVybWluYXRlIiwiaW5kZXRlcm1pbmF0ZSIpOiEwPT09dD9lKCJhcmlhQ2hlY2tlZCIsImNoZWNrZWQiKTplKCJhcmlhVW5jaGVja2VkIiwidW5jaGVja2VkIil9ZnVuY3Rpb24gVGkoKXtyZXR1cm4gdm9pZCAwPT09R3QmJihHdD0vXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSxHdH1mdW5jdGlvbiBEaSgpe2lmKHZvaWQgMD09PWt0KWlmKFRpKCkpe2NvbnN0IGU9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvdmVyc2lvblwvKFxkKykvaSk7ZSYmKGt0PW51bGwhPWVbMV0/cGFyc2VGbG9hdChlWzFdKTowKX1lbHNlIGt0PTA7cmV0dXJuIGt0fWZ1bmN0aW9uIE9pKCl7aWYodm9pZCAwPT09X3Qpe2NvbnN0IGU9d2luZG93O190PSEhZS5jaHJvbWUmJighIWUuY2hyb21lLndlYnN0b3JlfHwhIWUuY2hyb21lLnJ1bnRpbWUpfHwvQ2hyb21lLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYvR29vZ2xlIEluYy8udGVzdChuYXZpZ2F0b3IudmVuZG9yKX1yZXR1cm4gX3R9ZnVuY3Rpb24gQWkoKXtyZXR1cm4gdm9pZCAwPT09VnQmJihWdD0vKGZpcmVmb3gpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSksVnR9ZnVuY3Rpb24gUGkoKXtyZXR1cm4gdm9pZCAwPT09QnQmJihCdD0vKE1hY3xpUGhvbmV8aVBvZHxpUGFkKS9pLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSksQnR9ZnVuY3Rpb24gTWkoKXtyZXR1cm4gdm9pZCAwPT09SHQmJihIdD0vaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pfHwiTWFjSW50ZWwiPT09bmF2aWdhdG9yLnBsYXRmb3JtJiZuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHM+MSksSHR9ZnVuY3Rpb24gTGkoKXtyZXR1cm4hVGkoKXx8RGkoKT49MTV9ZnVuY3Rpb24gRmkoZSl7aWYoIWUpcmV0dXJuIG51bGw7Y29uc3QgdD1lLnRhYkluZGV4LGk9ZS5nZXRBdHRyaWJ1dGUoInRhYkluZGV4Iik7cmV0dXJuLTEhPT10fHxudWxsIT09aSYmKCIiIT09aXx8QWkoKSk/dC50b1N0cmluZygpOm51bGx9ZnVuY3Rpb24gSWkoKXtpZighZG9jdW1lbnQuYm9keSlyZXR1cm4tMTtsZXQgZT0xZTY7Y29uc3QgdD1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3gvKT82ZTY6MWU5LGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaSk7Oyl7Y29uc3Qgcz0yKmU7aWYoaS5zdHlsZS5oZWlnaHQ9cysicHgiLHM+dHx8aS5jbGllbnRIZWlnaHQhPT1zKWJyZWFrO2U9c31yZXR1cm4gZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpKSxlfWZ1bmN0aW9uIE5pKCl7dmFyIGUsdCxpO3JldHVybiBudWxsIT09KHQ9bnVsbD09PShlPWRvY3VtZW50LmJvZHkpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmNsaWVudFdpZHRoKSYmdm9pZCAwIT09dD90OndpbmRvdy5pbm5lckhlaWdodHx8KG51bGw9PT0oaT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmNsaWVudFdpZHRoKXx8LTF9ZnVuY3Rpb24gR2koKXt2YXIgZSx0LGk7cmV0dXJuIG51bGwhPT0odD1udWxsPT09KGU9ZG9jdW1lbnQuYm9keSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuY2xpZW50SGVpZ2h0KSYmdm9pZCAwIT09dD90OndpbmRvdy5pbm5lckhlaWdodHx8KG51bGw9PT0oaT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmNsaWVudEhlaWdodCl8fC0xfWZ1bmN0aW9uIGtpKCl7cmV0dXJuIG51bGw9PWp0JiZfaSgpLGp0fWZ1bmN0aW9uIF9pKCl7Y29uc3QgZT1kb2N1bWVudC5ib2R5LHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dC5zdHlsZS53aWR0aD10LnN0eWxlLmhlaWdodD0iMTAwcHgiLHQuc3R5bGUub3BhY2l0eT0iMCIsdC5zdHlsZS5vdmVyZmxvdz0ic2Nyb2xsIix0LnN0eWxlLm1zT3ZlcmZsb3dTdHlsZT0ic2Nyb2xsYmFyIix0LnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIsZS5hcHBlbmRDaGlsZCh0KTtsZXQgaT10Lm9mZnNldFdpZHRoLXQuY2xpZW50V2lkdGg7MD09PWkmJjA9PT10LmNsaWVudFdpZHRoJiYoaT1udWxsKSx0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSxudWxsIT1pJiYoanQ9aSxXdD0wPT09aSl9ZnVuY3Rpb24gVmkoKXtyZXR1cm4gbnVsbD09V3QmJl9pKCksV3R9ZnVuY3Rpb24gQmkoZSx0KXtyZXR1cm4gZS50b1N0cmluZygpLnBhZFN0YXJ0KHQsIjAiKX1mdW5jdGlvbiBIaShlLHQpe2NvbnN0IGk9W107Zm9yKGxldCBzPWU7czw9dDtzKyspaS5wdXNoKHMpO3JldHVybiBpfWZ1bmN0aW9uIFdpKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZSYmKGU9cGFyc2VJbnQoZSwxMCkpLCJudW1iZXIiPT10eXBlb2YgZT9NYXRoLmZsb29yKGUpOm51bGx9ZnVuY3Rpb24gamkoZSx0KXtsZXQgaT0iIjtmb3IobGV0IHM9MDtzPHQ7cysrKWkrPVN0cmluZy5mcm9tQ2hhckNvZGUoMjU1JmUpLGU+Pj49ODtyZXR1cm4gaX1mdW5jdGlvbiBVaShlLHQsaSl7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBlPyIiOnppKE1hdGgucm91bmQoMTAwKmUpLzEwMCx0LGkpfWZ1bmN0aW9uIHppKGUsdCxpKXtyZXR1cm4ibnVtYmVyIiE9dHlwZW9mIGU/IiI6ZS50b1N0cmluZygpLnJlcGxhY2UoIi4iLGkpLnJlcGxhY2UoLyhcZCkoPz0oXGR7M30pKyg/IVxkKSkvZywiJDEiK3QpfWZ1bmN0aW9uIEtpKGUpe3JldHVybiBudWxsPT1lP251bGw6ZS5yZWR1Y2UoKGUsdCk9PmUrdCwwKX1mdW5jdGlvbiBZaShlLHQ9ITAsaT0iLSIpe2lmKCFlKXJldHVybiBudWxsO2xldCBzPVtlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpKzEsZS5nZXREYXRlKCldLm1hcChlPT5CaShlLDIpKS5qb2luKGkpO3JldHVybiB0JiYocys9IiAiK1tlLmdldEhvdXJzKCksZS5nZXRNaW51dGVzKCksZS5nZXRTZWNvbmRzKCldLm1hcChlPT5CaShlLDIpKS5qb2luKCI6IikpLHN9VXQ9TnQoW2RlKCJhZ1N0YWNrQ29tcG9uZW50c1JlZ2lzdHJ5IildLFV0KTtjb25zdCAkaT1lPT57aWYoZT4zJiZlPDIxKXJldHVybiJ0aCI7c3dpdGNoKGUlMTApe2Nhc2UgMTpyZXR1cm4ic3QiO2Nhc2UgMjpyZXR1cm4ibmQiO2Nhc2UgMzpyZXR1cm4icmQifXJldHVybiJ0aCJ9O2Z1bmN0aW9uIFhpKGUsdD0iWVlZWS1NTS1ERCIpe2NvbnN0IGk9QmkoZS5nZXRGdWxsWWVhcigpLDQpLHM9WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLHI9WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLG89e1lZWVk6KCk9Pmkuc2xpY2UoaS5sZW5ndGgtNCxpLmxlbmd0aCksWVk6KCk9Pmkuc2xpY2UoaS5sZW5ndGgtMixpLmxlbmd0aCksWTooKT0+IiIrZS5nZXRGdWxsWWVhcigpLE1NTU06KCk9PnNbZS5nZXRNb250aCgpXSxNTU06KCk9PnNbZS5nZXRNb250aCgpXS5zbGljZSgwLDMpLE1NOigpPT5CaShlLmdldE1vbnRoKCkrMSwyKSxNbzooKT0+YCR7ZS5nZXRNb250aCgpKzF9JHskaShlLmdldE1vbnRoKCkrMSl9YCxNOigpPT4iIisoZS5nZXRNb250aCgpKzEpLERvOigpPT5gJHtlLmdldERhdGUoKX0keyRpKGUuZ2V0RGF0ZSgpKX1gLEREOigpPT5CaShlLmdldERhdGUoKSwyKSxEOigpPT4iIitlLmdldERhdGUoKSxkZGRkOigpPT5yW2UuZ2V0RGF5KCldLGRkZDooKT0+cltlLmdldERheSgpXS5zbGljZSgwLDMpLGRkOigpPT5yW2UuZ2V0RGF5KCldLnNsaWNlKDAsMiksZG86KCk9PmAke2UuZ2V0RGF5KCl9JHskaShlLmdldERheSgpKX1gLGQ6KCk9PiIiK2UuZ2V0RGF5KCl9LG49bmV3IFJlZ0V4cChPYmplY3Qua2V5cyhvKS5qb2luKCJ8IiksImciKTtyZXR1cm4gdC5yZXBsYWNlKG4sZT0+ZSBpbiBvP29bZV0oKTplKX1mdW5jdGlvbiBxaShlKXtpZighZSlyZXR1cm4gbnVsbDtjb25zdFt0LGldPWUuc3BsaXQoIiAiKTtpZighdClyZXR1cm4gbnVsbDtjb25zdCBzPXQuc3BsaXQoIi0iKS5tYXAoZT0+cGFyc2VJbnQoZSwxMCkpO2lmKDMhPT1zLmZpbHRlcihlPT4haXNOYU4oZSkpLmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdFtyLG8sbl09cyxhPW5ldyBEYXRlKHIsby0xLG4pO2lmKGEuZ2V0RnVsbFllYXIoKSE9PXJ8fGEuZ2V0TW9udGgoKSE9PW8tMXx8YS5nZXREYXRlKCkhPT1uKXJldHVybiBudWxsO2lmKCFpfHwiMDA6MDA6MDAiPT09aSlyZXR1cm4gYTtjb25zdFtsLGQsY109aS5zcGxpdCgiOiIpLm1hcChlPT5wYXJzZUludChlLDEwKSk7cmV0dXJuIGw+PTAmJmw8MjQmJmEuc2V0SG91cnMobCksZD49MCYmZDw2MCYmYS5zZXRNaW51dGVzKGQpLGM+PTAmJmM8NjAmJmEuc2V0U2Vjb25kcyhjKSxhfWxldCBaaTtmdW5jdGlvbiBRaShlLHQsaSl7Y29uc3Qgcz1lLnBhcmVudEVsZW1lbnQ7bGV0IHI9cyYmcy5maXJzdENoaWxkO2Zvcig7cjspdCYmci5jbGFzc0xpc3QudG9nZ2xlKHQscj09PWUpLGkmJnIuY2xhc3NMaXN0LnRvZ2dsZShpLHIhPT1lKSxyPXIubmV4dFNpYmxpbmd9Y29uc3QgSmk9Ilt0YWJpbmRleF0sIGlucHV0LCBzZWxlY3QsIGJ1dHRvbiwgdGV4dGFyZWEsIFtocmVmXSIsZXM9IltkaXNhYmxlZF0sIC5hZy1kaXNhYmxlZDpub3QoLmFnLWJ1dHRvbiksIC5hZy1kaXNhYmxlZCAqIjtmdW5jdGlvbiB0cyhlKXtjb25zdCB0PUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXN8fEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yLGk9dC5jYWxsKGUsImlucHV0LCBzZWxlY3QsIGJ1dHRvbiwgdGV4dGFyZWEiKSxzPXQuY2FsbChlLGVzKSxyPUNzKGUpO3JldHVybiBpJiYhcyYmcn1mdW5jdGlvbiBpcyhlLHQsaT17fSl7Y29uc3R7c2tpcEFyaWFIaWRkZW46c309aTtlLmNsYXNzTGlzdC50b2dnbGUoImFnLWhpZGRlbiIsIXQpLHN8fGxpKGUsIXQpfWZ1bmN0aW9uIHNzKGUsdCxpPXt9KXtjb25zdHtza2lwQXJpYUhpZGRlbjpzfT1pO2UuY2xhc3NMaXN0LnRvZ2dsZSgiYWctaW52aXNpYmxlIiwhdCksc3x8bGkoZSwhdCl9ZnVuY3Rpb24gcnMoZSx0KXtjb25zdCBpPXQ/ZT0+ZS5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwiIik6ZT0+ZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7aShlKSxOcyhlLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0IiksZT0+aShlKSl9ZnVuY3Rpb24gb3MoZSx0LGkpe2xldCBzPTA7Zm9yKDtlOyl7aWYoZS5jbGFzc0xpc3QuY29udGFpbnModCkpcmV0dXJuITA7aWYoZT1lLnBhcmVudEVsZW1lbnQsIm51bWJlciI9PXR5cGVvZiBpKXtpZigrK3M+aSlicmVha31lbHNlIGlmKGU9PT1pKWJyZWFrfXJldHVybiExfWZ1bmN0aW9uIG5zKGUpe2NvbnN0e2hlaWdodDp0LHdpZHRoOmksYm9yZGVyVG9wV2lkdGg6cyxib3JkZXJSaWdodFdpZHRoOnIsYm9yZGVyQm90dG9tV2lkdGg6byxib3JkZXJMZWZ0V2lkdGg6bixwYWRkaW5nVG9wOmEscGFkZGluZ1JpZ2h0OmwscGFkZGluZ0JvdHRvbTpkLHBhZGRpbmdMZWZ0OmMsbWFyZ2luVG9wOmgsbWFyZ2luUmlnaHQ6dSxtYXJnaW5Cb3R0b206cCxtYXJnaW5MZWZ0OmcsYm94U2l6aW5nOm19PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUpO3JldHVybntoZWlnaHQ6cGFyc2VGbG9hdCh0fHwiMCIpLHdpZHRoOnBhcnNlRmxvYXQoaXx8IjAiKSxib3JkZXJUb3BXaWR0aDpwYXJzZUZsb2F0KHN8fCIwIiksYm9yZGVyUmlnaHRXaWR0aDpwYXJzZUZsb2F0KHJ8fCIwIiksYm9yZGVyQm90dG9tV2lkdGg6cGFyc2VGbG9hdChvfHwiMCIpLGJvcmRlckxlZnRXaWR0aDpwYXJzZUZsb2F0KG58fCIwIikscGFkZGluZ1RvcDpwYXJzZUZsb2F0KGF8fCIwIikscGFkZGluZ1JpZ2h0OnBhcnNlRmxvYXQobHx8IjAiKSxwYWRkaW5nQm90dG9tOnBhcnNlRmxvYXQoZHx8IjAiKSxwYWRkaW5nTGVmdDpwYXJzZUZsb2F0KGN8fCIwIiksbWFyZ2luVG9wOnBhcnNlRmxvYXQoaHx8IjAiKSxtYXJnaW5SaWdodDpwYXJzZUZsb2F0KHV8fCIwIiksbWFyZ2luQm90dG9tOnBhcnNlRmxvYXQocHx8IjAiKSxtYXJnaW5MZWZ0OnBhcnNlRmxvYXQoZ3x8IjAiKSxib3hTaXppbmc6bX19ZnVuY3Rpb24gYXMoZSl7Y29uc3QgdD1ucyhlKTtyZXR1cm4iYm9yZGVyLWJveCI9PT10LmJveFNpemluZz90LmhlaWdodC10LnBhZGRpbmdUb3AtdC5wYWRkaW5nQm90dG9tOnQuaGVpZ2h0fWZ1bmN0aW9uIGxzKGUpe2NvbnN0IHQ9bnMoZSk7cmV0dXJuImJvcmRlci1ib3giPT09dC5ib3hTaXppbmc/dC53aWR0aC10LnBhZGRpbmdMZWZ0LXQucGFkZGluZ1JpZ2h0OnQud2lkdGh9ZnVuY3Rpb24gZHMoZSl7Y29uc3QgdD1ucyhlKSxpPXQubWFyZ2luQm90dG9tK3QubWFyZ2luVG9wO3JldHVybiBNYXRoLmNlaWwoZS5vZmZzZXRIZWlnaHQraSl9ZnVuY3Rpb24gY3MoZSl7Y29uc3QgdD1ucyhlKSxpPXQubWFyZ2luTGVmdCt0Lm1hcmdpblJpZ2h0O3JldHVybiBNYXRoLmNlaWwoZS5vZmZzZXRXaWR0aCtpKX1mdW5jdGlvbiBocyhlKXtjb25zdCB0PWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkse2JvcmRlclRvcFdpZHRoOmksYm9yZGVyTGVmdFdpZHRoOnMsYm9yZGVyUmlnaHRXaWR0aDpyLGJvcmRlckJvdHRvbVdpZHRoOm99PW5zKGUpO3JldHVybnt0b3A6dC50b3ArKGl8fDApLGxlZnQ6dC5sZWZ0KyhzfHwwKSxyaWdodDp0LnJpZ2h0KyhyfHwwKSxib3R0b206dC5ib3R0b20rKG98fDApfX1mdW5jdGlvbiB1cygpe2lmKCJib29sZWFuIj09dHlwZW9mIFppKXJldHVybiBaaTtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLnN0eWxlLmRpcmVjdGlvbj0icnRsIixlLnN0eWxlLndpZHRoPSIxcHgiLGUuc3R5bGUuaGVpZ2h0PSIxcHgiLGUuc3R5bGUucG9zaXRpb249ImZpeGVkIixlLnN0eWxlLnRvcD0iMHB4IixlLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iLGUuZGlyPSJydGwiLGUuaW5uZXJIVE1MPSc8ZGl2IHN0eWxlPSJ3aWR0aDogMnB4Ij5cbiAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiAxcHgiPjwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiAxcHgiPjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+Jyxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGUpLGUuc2Nyb2xsTGVmdD0xLFppPTA9PT1NYXRoLmZsb29yKGUuc2Nyb2xsTGVmdCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlKSxaaX1mdW5jdGlvbiBwcyhlLHQpe2xldCBpPWUuc2Nyb2xsTGVmdDtyZXR1cm4gdCYmKGk9TWF0aC5hYnMoaSksT2koKSYmIXVzKCkmJihpPWUuc2Nyb2xsV2lkdGgtZS5jbGllbnRXaWR0aC1pKSksaX1mdW5jdGlvbiBncyhlLHQsaSl7aSYmKHVzKCk/dCo9LTE6KFRpKCl8fE9pKCkpJiYodD1lLnNjcm9sbFdpZHRoLWUuY2xpZW50V2lkdGgtdCkpLGUuc2Nyb2xsTGVmdD10fWZ1bmN0aW9uIG1zKGUpe2Zvcig7ZSYmZS5maXJzdENoaWxkOyllLnJlbW92ZUNoaWxkKGUuZmlyc3RDaGlsZCl9ZnVuY3Rpb24gZnMoZSl7ZSYmZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSl9ZnVuY3Rpb24gdnMoZSl7cmV0dXJuISFlLm9mZnNldFBhcmVudH1mdW5jdGlvbiBDcyhlKXtjb25zdCB0PWU7aWYodC5jaGVja1Zpc2liaWxpdHkpcmV0dXJuIHQuY2hlY2tWaXNpYmlsaXR5KHtjaGVja1Zpc2liaWxpdHlDU1M6ITB9KTtyZXR1cm4hKCF2cyhlKXx8InZpc2libGUiIT09d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSkudmlzaWJpbGl0eSl9ZnVuY3Rpb24geXMoZSl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gdC5pbm5lckhUTUw9KGV8fCIiKS50cmltKCksdC5maXJzdENoaWxkfWZ1bmN0aW9uIFNzKGUsdCxpKXtpJiZpLm5leHRTaWJsaW5nPT09dHx8KGk/aS5uZXh0U2libGluZz9lLmluc2VydEJlZm9yZSh0LGkubmV4dFNpYmxpbmcpOmUuYXBwZW5kQ2hpbGQodCk6ZS5maXJzdENoaWxkJiZlLmZpcnN0Q2hpbGQhPT10JiZlLmluc2VydEFkamFjZW50RWxlbWVudCgiYWZ0ZXJiZWdpbiIsdCkpfWZ1bmN0aW9uIHdzKGUsdCl7Zm9yKGxldCBpPTA7aTx0Lmxlbmd0aDtpKyspe2NvbnN0IHM9dFtpXSxyPWUuY2hpbGRyZW5baV07ciE9PXMmJmUuaW5zZXJ0QmVmb3JlKHMscil9fWZ1bmN0aW9uIGJzKGUsdCxpKXtpP2kuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmVuZCIsdCk6ZS5maXJzdENoaWxkP2UuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmJlZ2luIix0KTplLmFwcGVuZENoaWxkKHQpfWZ1bmN0aW9uIEVzKGUsdCl7aWYodClmb3IoY29uc3RbaSxzXW9mIE9iamVjdC5lbnRyaWVzKHQpKXtpZighaXx8IWkubGVuZ3RofHxudWxsPT1zKWNvbnRpbnVlO2NvbnN0IHQ9Q3QoaSkscj1zLnRvU3RyaW5nKCksbz1yLnJlcGxhY2UoL1xzKiFpbXBvcnRhbnQvZywiIiksbj1vLmxlbmd0aCE9ci5sZW5ndGg/ImltcG9ydGFudCI6dm9pZCAwO2Uuc3R5bGUuc2V0UHJvcGVydHkodCxvLG4pfX1mdW5jdGlvbiBScyhlKXtyZXR1cm4gZS5jbGllbnRXaWR0aDxlLnNjcm9sbFdpZHRofWZ1bmN0aW9uIHhzKGUpe3JldHVybiBlLmNsaWVudEhlaWdodDxlLnNjcm9sbEhlaWdodH1mdW5jdGlvbiBUcyhlLHQpeyJmbGV4Ij09PXQ/KGUuc3R5bGUucmVtb3ZlUHJvcGVydHkoIndpZHRoIiksZS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgibWluV2lkdGgiKSxlLnN0eWxlLnJlbW92ZVByb3BlcnR5KCJtYXhXaWR0aCIpLGUuc3R5bGUuZmxleD0iMSAxIGF1dG8iKTpEcyhlLHQpfWZ1bmN0aW9uIERzKGUsdCl7dD1Qcyh0KSxlLnN0eWxlLndpZHRoPXQudG9TdHJpbmcoKSxlLnN0eWxlLm1heFdpZHRoPXQudG9TdHJpbmcoKSxlLnN0eWxlLm1pbldpZHRoPXQudG9TdHJpbmcoKX1mdW5jdGlvbiBPcyhlLHQpeyJmbGV4Ij09PXQ/KGUuc3R5bGUucmVtb3ZlUHJvcGVydHkoImhlaWdodCIpLGUuc3R5bGUucmVtb3ZlUHJvcGVydHkoIm1pbkhlaWdodCIpLGUuc3R5bGUucmVtb3ZlUHJvcGVydHkoIm1heEhlaWdodCIpLGUuc3R5bGUuZmxleD0iMSAxIGF1dG8iKTpBcyhlLHQpfWZ1bmN0aW9uIEFzKGUsdCl7dD1Qcyh0KSxlLnN0eWxlLmhlaWdodD10LnRvU3RyaW5nKCksZS5zdHlsZS5tYXhIZWlnaHQ9dC50b1N0cmluZygpLGUuc3R5bGUubWluSGVpZ2h0PXQudG9TdHJpbmcoKX1mdW5jdGlvbiBQcyhlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGU/ZSsicHgiOmV9ZnVuY3Rpb24gTXMoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBOb2RlfHxlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnR9ZnVuY3Rpb24gTHMoZSl7aWYobnVsbD09ZSlyZXR1cm5bXTtjb25zdCB0PVtdO3JldHVybiBOcyhlLGU9PnQucHVzaChlKSksdH1mdW5jdGlvbiBGcyhlLHQpe2lmKGUpZm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKyspe2NvbnN0IHM9ZVtpXTt0KHMubmFtZSxzLnZhbHVlKX19ZnVuY3Rpb24gSXMoZSx0LGkpe251bGw9PWk/ZS5yZW1vdmVBdHRyaWJ1dGUodCk6ZS5zZXRBdHRyaWJ1dGUodCxpLnRvU3RyaW5nKCkpfWZ1bmN0aW9uIE5zKGUsdCl7aWYobnVsbCE9ZSlmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krKyl0KGVbaV0pfWZ1bmN0aW9uIEdzKGUsdCl7ZS50aGVuKGU9Pntjb25zdCBpPWUuZ2V0R3VpKCk7bnVsbCE9aSYmKCJvYmplY3QiPT10eXBlb2YgaT90LmFwcGVuZENoaWxkKGkpOnQuaW5uZXJIVE1MPWkpfSl9ZnVuY3Rpb24ga3MoZSx0LGkpe2NvbnN0IHM9e30scj1lLmZpbHRlcihlPT4hdC5zb21lKHQ9PnQ9PT1lKSk7cmV0dXJuIHIubGVuZ3RoPjAmJnIuZm9yRWFjaChlPT5zW2VdPV9zKGUsaSkudmFsdWVzKSxzfWZ1bmN0aW9uIF9zKGUsdCxpLHMpe2xldCByPXQubWFwKCh0LGkpPT4oe3ZhbHVlOnQscmVsZXZhbmNlOlZzKGUudG9Mb3dlckNhc2UoKSx0LnRvTG9jYWxlTG93ZXJDYXNlKCkpLGlkeDppfSkpO2lmKHIuc29ydCgoZSx0KT0+dC5yZWxldmFuY2UtZS5yZWxldmFuY2UpLGkmJihyPXIuZmlsdGVyKGU9PjAhPT1lLnJlbGV2YW5jZSkpLHIubGVuZ3RoPjAmJnMmJnM+MCl7Y29uc3QgZT1yWzBdLnJlbGV2YW5jZSpzO3I9ci5maWx0ZXIodD0+ZS10LnJlbGV2YW5jZTwwKX1jb25zdCBvPVtdLG49W107Zm9yKGNvbnN0IGUgb2YgcilvLnB1c2goZS52YWx1ZSksbi5wdXNoKGUuaWR4KTtyZXR1cm57dmFsdWVzOm8saW5kaWNlczpufX1mdW5jdGlvbiBWcyhlLHQpe2NvbnN0IGk9ZS5yZXBsYWNlKC9ccy9nLCIiKSxzPXQucmVwbGFjZSgvXHMvZywiIik7bGV0IHI9MCxvPS0xO2ZvcihsZXQgZT0wO2U8aS5sZW5ndGg7ZSsrKXtjb25zdCB0PXMuaW5kZXhPZihpW2VdLG8rMSk7LTEhPT10JiYobz10LHIrPTEwMC0xMDAqby8xZTQqMTAwKX1yZXR1cm4gcn1jb25zdCBCcz17Y29sdW1uR3JvdXBPcGVuZWQ6ImV4cGFuZGVkIixjb2x1bW5Hcm91cENsb3NlZDoiY29udHJhY3RlZCIsY29sdW1uU2VsZWN0Q2xvc2VkOiJ0cmVlLWNsb3NlZCIsY29sdW1uU2VsZWN0T3BlbjoidHJlZS1vcGVuIixjb2x1bW5TZWxlY3RJbmRldGVybWluYXRlOiJ0cmVlLWluZGV0ZXJtaW5hdGUiLGNvbHVtbk1vdmVQaW46InBpbiIsY29sdW1uTW92ZUhpZGU6ImV5ZS1zbGFzaCIsY29sdW1uTW92ZU1vdmU6ImFycm93cyIsY29sdW1uTW92ZUxlZnQ6ImxlZnQiLGNvbHVtbk1vdmVSaWdodDoicmlnaHQiLGNvbHVtbk1vdmVHcm91cDoiZ3JvdXAiLGNvbHVtbk1vdmVWYWx1ZToiYWdncmVnYXRpb24iLGNvbHVtbk1vdmVQaXZvdDoicGl2b3QiLGRyb3BOb3RBbGxvd2VkOiJub3QtYWxsb3dlZCIsZ3JvdXBDb250cmFjdGVkOiJ0cmVlLWNsb3NlZCIsZ3JvdXBFeHBhbmRlZDoidHJlZS1vcGVuIixzZXRGaWx0ZXJHcm91cENsb3NlZDoidHJlZS1jbG9zZWQiLHNldEZpbHRlckdyb3VwT3BlbjoidHJlZS1vcGVuIixzZXRGaWx0ZXJHcm91cEluZGV0ZXJtaW5hdGU6InRyZWUtaW5kZXRlcm1pbmF0ZSIsY2hhcnQ6ImNoYXJ0IixjbG9zZToiY3Jvc3MiLGNhbmNlbDoiY2FuY2VsIixjaGVjazoidGljayIsZmlyc3Q6ImZpcnN0IixwcmV2aW91czoicHJldmlvdXMiLG5leHQ6Im5leHQiLGxhc3Q6Imxhc3QiLGxpbmtlZDoibGlua2VkIix1bmxpbmtlZDoidW5saW5rZWQiLGNvbG9yUGlja2VyOiJjb2xvci1waWNrZXIiLGdyb3VwTG9hZGluZzoibG9hZGluZyIsbWVudToibWVudSIsbWVudUFsdDoibWVudS1hbHQiLGZpbHRlcjoiZmlsdGVyIixjb2x1bW5zOiJjb2x1bW5zIixtYXhpbWl6ZToibWF4aW1pemUiLG1pbmltaXplOiJtaW5pbWl6ZSIsbWVudVBpbjoicGluIixtZW51VmFsdWU6ImFnZ3JlZ2F0aW9uIixtZW51QWRkUm93R3JvdXA6Imdyb3VwIixtZW51UmVtb3ZlUm93R3JvdXA6Imdyb3VwIixjbGlwYm9hcmRDb3B5OiJjb3B5IixjbGlwYm9hcmRDdXQ6ImN1dCIsY2xpcGJvYXJkUGFzdGU6InBhc3RlIixwaXZvdFBhbmVsOiJwaXZvdCIscm93R3JvdXBQYW5lbDoiZ3JvdXAiLHZhbHVlUGFuZWw6ImFnZ3JlZ2F0aW9uIixjb2x1bW5EcmFnOiJncmlwIixyb3dEcmFnOiJncmlwIixzYXZlOiJzYXZlIixjc3ZFeHBvcnQ6ImNzdiIsZXhjZWxFeHBvcnQ6ImV4Y2VsIixzbWFsbERvd246InNtYWxsLWRvd24iLHNtYWxsTGVmdDoic21hbGwtbGVmdCIsc21hbGxSaWdodDoic21hbGwtcmlnaHQiLHNtYWxsVXA6InNtYWxsLXVwIixzb3J0QXNjZW5kaW5nOiJhc2MiLHNvcnREZXNjZW5kaW5nOiJkZXNjIixzb3J0VW5Tb3J0OiJub25lIixhZHZhbmNlZEZpbHRlckJ1aWxkZXI6Imdyb3VwIixhZHZhbmNlZEZpbHRlckJ1aWxkZXJEcmFnOiJncmlwIixhZHZhbmNlZEZpbHRlckJ1aWxkZXJJbnZhbGlkOiJub3QtYWxsb3dlZCIsYWR2YW5jZWRGaWx0ZXJCdWlsZGVyTW92ZVVwOiJ1cCIsYWR2YW5jZWRGaWx0ZXJCdWlsZGVyTW92ZURvd246ImRvd24iLGFkdmFuY2VkRmlsdGVyQnVpbGRlckFkZDoicGx1cyIsYWR2YW5jZWRGaWx0ZXJCdWlsZGVyUmVtb3ZlOiJtaW51cyJ9O2Z1bmN0aW9uIEhzKGUsdCxpKXtjb25zdCBzPVdzKGUsdCxpKTtpZihzKXtjb25zdHtjbGFzc05hbWU6ZX09cztpZigic3RyaW5nIj09dHlwZW9mIGUmJmUuaW5kZXhPZigiYWctaWNvbiIpPi0xfHwib2JqZWN0Ij09dHlwZW9mIGUmJmVbImFnLWljb24iXSlyZXR1cm4gc31jb25zdCByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtyZXR1cm4gci5hcHBlbmRDaGlsZChzKSxyfWZ1bmN0aW9uIFdzKGUsdCxpLHMpe2xldCByPW51bGw7Y29uc3Qgbz1pJiZpLmdldENvbERlZigpLmljb25zO2lmKG8mJihyPW9bZV0pLHQmJiFyKXtjb25zdCBpPXQuZ2V0KCJpY29ucyIpO2kmJihyPWlbZV0pfWlmKCFyKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtsZXQgaT1Cc1tlXTtyZXR1cm4gaXx8KHM/aT1lOihjb25zb2xlLndhcm4oIkFHIEdyaWQ6IERpZCBub3QgZmluZCBpY29uICIrZSksaT0iIikpLHQuc2V0QXR0cmlidXRlKCJjbGFzcyIsImFnLWljb24gYWctaWNvbi0iK2kpLHQuc2V0QXR0cmlidXRlKCJ1bnNlbGVjdGFibGUiLCJvbiIpLFh0KHQsInByZXNlbnRhdGlvbiIpLHR9e2xldCBlO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiByKWU9cigpO2Vsc2V7aWYoInN0cmluZyIhPXR5cGVvZiByKXRocm93IG5ldyBFcnJvcigiaWNvbiBmcm9tIGdyaWQgb3B0aW9ucyBuZWVkcyB0byBiZSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIik7ZT1yfWlmKCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm4geXMoZSk7aWYoTXMoZSkpcmV0dXJuIGU7Y29uc29sZS53YXJuKCJBRyBHcmlkOiBpY29uUmVuZGVyZXIgc2hvdWxkIHJldHVybiBiYWNrIGEgc3RyaW5nIG9yIGEgZG9tIG9iamVjdCIpfX1jbGFzcyBqc3t9anMuQkFDS1NQQUNFPSJCYWNrc3BhY2UiLGpzLlRBQj0iVGFiIixqcy5FTlRFUj0iRW50ZXIiLGpzLkVTQ0FQRT0iRXNjYXBlIixqcy5TUEFDRT0iICIsanMuTEVGVD0iQXJyb3dMZWZ0Iixqcy5VUD0iQXJyb3dVcCIsanMuUklHSFQ9IkFycm93UmlnaHQiLGpzLkRPV049IkFycm93RG93biIsanMuREVMRVRFPSJEZWxldGUiLGpzLkYyPSJGMiIsanMuUEFHRV9VUD0iUGFnZVVwIixqcy5QQUdFX0RPV049IlBhZ2VEb3duIixqcy5QQUdFX0hPTUU9IkhvbWUiLGpzLlBBR0VfRU5EPSJFbmQiLGpzLkE9IktleUEiLGpzLkM9IktleUMiLGpzLkQ9IktleUQiLGpzLlY9IktleVYiLGpzLlg9IktleVgiLGpzLlk9IktleVkiLGpzLlo9IktleVoiO2Z1bmN0aW9uIFVzKGUpe2lmKGUuYWx0S2V5fHxlLmN0cmxLZXl8fGUubWV0YUtleSlyZXR1cm4hMTtyZXR1cm4gMT09PWUua2V5Lmxlbmd0aH1mdW5jdGlvbiB6cyhlLHQsaSxzLHIpe2NvbnN0IG89cz9zLmdldENvbERlZigpLnN1cHByZXNzS2V5Ym9hcmRFdmVudDp2b2lkIDA7aWYoIW8pcmV0dXJuITE7Y29uc3Qgbj1lLmFkZEdyaWRDb21tb25QYXJhbXMoe2V2ZW50OnQsZWRpdGluZzpyLGNvbHVtbjpzLG5vZGU6aSxkYXRhOmkuZGF0YSxjb2xEZWY6cy5nZXRDb2xEZWYoKX0pO2lmKG8pe2lmKG8obikpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gS3MoZSx0LGkscyl7Y29uc3Qgcj1zLmdldERlZmluaXRpb24oKSxvPXImJnIuc3VwcHJlc3NIZWFkZXJLZXlib2FyZEV2ZW50O2lmKCFiKG8pKXJldHVybiExO3JldHVybiEhbyhlLmFkZEdyaWRDb21tb25QYXJhbXMoe2NvbERlZjpyLGNvbHVtbjpzLGhlYWRlclJvd0luZGV4OmksZXZlbnQ6dH0pKX1mdW5jdGlvbiBZcyhlKXtjb25zdHtrZXlDb2RlOnR9PWU7bGV0IGk7c3dpdGNoKHQpe2Nhc2UgNjU6aT1qcy5BO2JyZWFrO2Nhc2UgNjc6aT1qcy5DO2JyZWFrO2Nhc2UgODY6aT1qcy5WO2JyZWFrO2Nhc2UgNjg6aT1qcy5EO2JyZWFrO2Nhc2UgOTA6aT1qcy5aO2JyZWFrO2Nhc2UgODk6aT1qcy5ZO2JyZWFrO2RlZmF1bHQ6aT1lLmNvZGV9cmV0dXJuIGl9ZnVuY3Rpb24gJHMoZSx0PSExKXtyZXR1cm4gZT09PWpzLkRFTEVURXx8IXQmJmU9PT1qcy5CQUNLU1BBQ0UmJlBpKCl9ZnVuY3Rpb24gWHMoZSx0LGkpe2lmKDA9PT1pKXJldHVybiExO2NvbnN0IHM9TWF0aC5hYnMoZS5jbGllbnRYLXQuY2xpZW50WCkscj1NYXRoLmFicyhlLmNsaWVudFktdC5jbGllbnRZKTtyZXR1cm4gTWF0aC5tYXgocyxyKTw9aX1mdW5jdGlvbiBxcyhlLHQpe2lmKCFlKXJldHVybiExO2NvbnN0IGk9KGUsaSk9Pntjb25zdCBzPXRbZS5pZF0scj10W2kuaWRdLG89dm9pZCAwIT09cyxuPXZvaWQgMCE9PXI7cmV0dXJuIG8mJm4/cy1yOiFvJiYhbj9lLl9fb2JqZWN0SWQtaS5fX29iamVjdElkOm8/MTotMX07bGV0IHMscixvPSExO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGgtMTt0KyspaWYocz1lW3RdLHI9ZVt0KzFdLGkocyxyKT4wKXtvPSEwO2JyZWFrfXJldHVybiEhbyYmKGUuc29ydChpKSwhMCl9ZnVuY3Rpb24gWnMoZSl7Y29uc3QgdD1uZXcgU2V0O3JldHVybiBlLmZvckVhY2goZT0+dC5hZGQoZSkpLHR9Y29uc3QgUXM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYyksbiksaCkscCksZyksYSksbyksbSkscyksZiksdiksZCksQyksdSkscikseSksUyksbCk7Y2xhc3MgSnN7Y29uc3RydWN0b3IoZT0wLHQ9MSl7dGhpcy5uZXh0VmFsdWU9ZSx0aGlzLnN0ZXA9dH1uZXh0KCl7Y29uc3QgZT10aGlzLm5leHRWYWx1ZTtyZXR1cm4gdGhpcy5uZXh0VmFsdWUrPXRoaXMuc3RlcCxlfXBlZWsoKXtyZXR1cm4gdGhpcy5uZXh0VmFsdWV9c2tpcChlKXt0aGlzLm5leHRWYWx1ZSs9ZX19dmFyIGVyOyFmdW5jdGlvbihlKXtlW2UuSU5fUFJPR1JFU1M9MF09IklOX1BST0dSRVNTIixlW2UuUkVTT0xWRUQ9MV09IlJFU09MVkVEIn0oZXJ8fChlcj17fSkpO2NsYXNzIHRye2NvbnN0cnVjdG9yKGUpe3RoaXMuc3RhdHVzPWVyLklOX1BST0dSRVNTLHRoaXMucmVzb2x1dGlvbj1udWxsLHRoaXMud2FpdGVycz1bXSxlKGU9PnRoaXMub25Eb25lKGUpLGU9PnRoaXMub25SZWplY3QoZSkpfXN0YXRpYyBhbGwoZSl7cmV0dXJuIG5ldyB0cih0PT57bGV0IGk9ZS5sZW5ndGg7Y29uc3Qgcz1uZXcgQXJyYXkoaSk7ZS5mb3JFYWNoKChlLHIpPT57ZS50aGVuKGU9PntzW3JdPWUsaS0tLDA9PT1pJiZ0KHMpfSl9KX0pfXN0YXRpYyByZXNvbHZlKGU9bnVsbCl7cmV0dXJuIG5ldyB0cih0PT50KGUpKX10aGVuKGUpe3JldHVybiBuZXcgdHIodD0+e3RoaXMuc3RhdHVzPT09ZXIuUkVTT0xWRUQ/dChlKHRoaXMucmVzb2x1dGlvbikpOnRoaXMud2FpdGVycy5wdXNoKGk9PnQoZShpKSkpfSl9cmVzb2x2ZU5vdyhlLHQpe3JldHVybiB0aGlzLnN0YXR1cz09PWVyLlJFU09MVkVEP3QodGhpcy5yZXNvbHV0aW9uKTplfW9uRG9uZShlKXt0aGlzLnN0YXR1cz1lci5SRVNPTFZFRCx0aGlzLnJlc29sdXRpb249ZSx0aGlzLndhaXRlcnMuZm9yRWFjaCh0PT50KGUpKX1vblJlamVjdChlKXtjb25zb2xlLndhcm4oIlRCSSIpfX1jbGFzcyBpcntjb25zdHJ1Y3Rvcigpe3RoaXMudGltZXN0YW1wPShuZXcgRGF0ZSkuZ2V0VGltZSgpfXByaW50KGUpe2NvbnN0IHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCktdGhpcy50aW1lc3RhbXA7Y29uc29sZS5pbmZvKGAke2V9ID0gJHt0fWApLHRoaXMudGltZXN0YW1wPShuZXcgRGF0ZSkuZ2V0VGltZSgpfX12YXIgc3IscnIsb3I9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07IWZ1bmN0aW9uKGUpe2VbZS5OT1RISU5HPTBdPSJOT1RISU5HIixlW2UuV0FJVElOR19UT19TSE9XPTFdPSJXQUlUSU5HX1RPX1NIT1ciLGVbZS5TSE9XSU5HPTJdPSJTSE9XSU5HIn0oc3J8fChzcj17fSkpLGZ1bmN0aW9uKGUpe2VbZS5IT1ZFUj0wXT0iSE9WRVIiLGVbZS5GT0NVUz0xXT0iRk9DVVMifShycnx8KHJyPXt9KSk7Y2xhc3MgbnIgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoKSx0aGlzLnBhcmVudENvbXA9ZSx0aGlzLnRvb2x0aXBTaG93RGVsYXlPdmVycmlkZT10LHRoaXMudG9vbHRpcEhpZGVEZWxheU92ZXJyaWRlPWksdGhpcy5TSE9XX1FVSUNLX1RPT0xUSVBfRElGRj0xZTMsdGhpcy5GQURFX09VVF9UT09MVElQX1RJTUVPVVQ9MWUzLHRoaXMuSU5URVJBQ1RJVkVfSElERV9ERUxBWT0xMDAsdGhpcy5pbnRlcmFjdGlvbkVuYWJsZWQ9ITEsdGhpcy5pc0ludGVyYWN0aW5nV2l0aFRvb2x0aXA9ITEsdGhpcy5zdGF0ZT1zci5OT1RISU5HLHRoaXMudG9vbHRpcEluc3RhbmNlQ291bnQ9MCx0aGlzLnRvb2x0aXBNb3VzZVRyYWNrPSExfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInRvb2x0aXBJbnRlcmFjdGlvbiIpJiYodGhpcy5pbnRlcmFjdGlvbkVuYWJsZWQ9ITApLHRoaXMudG9vbHRpcFRyaWdnZXI9dGhpcy5nZXRUb29sdGlwVHJpZ2dlcigpLHRoaXMudG9vbHRpcE1vdXNlVHJhY2s9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0b29sdGlwTW91c2VUcmFjayIpO2NvbnN0IGU9dGhpcy5wYXJlbnRDb21wLmdldEd1aSgpO3RoaXMudG9vbHRpcFRyaWdnZXI9PT1yci5IT1ZFUiYmKHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsIm1vdXNlZW50ZXIiLHRoaXMub25Nb3VzZUVudGVyLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsIm1vdXNlbGVhdmUiLHRoaXMub25Nb3VzZUxlYXZlLmJpbmQodGhpcykpKSx0aGlzLnRvb2x0aXBUcmlnZ2VyPT09cnIuRk9DVVMmJih0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLCJmb2N1c2luIix0aGlzLm9uRm9jdXNJbi5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLCJmb2N1c291dCIsdGhpcy5vbkZvY3VzT3V0LmJpbmQodGhpcykpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLCJtb3VzZW1vdmUiLHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKSksdGhpcy5pbnRlcmFjdGlvbkVuYWJsZWR8fCh0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLCJtb3VzZWRvd24iLHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSwia2V5ZG93biIsdGhpcy5vbktleURvd24uYmluZCh0aGlzKSkpfWdldEdyaWRPcHRpb25zVG9vbHRpcERlbGF5KGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KGUpO3JldHVybiB0PDAmJmooZSsiIHNob3VsZCBub3QgYmUgbG93ZXIgdGhhbiAwIiksTWF0aC5tYXgoMjAwLHQpfWdldFRvb2x0aXBEZWxheShlKXt2YXIgdCxpO3JldHVybiJzaG93Ij09PWU/bnVsbCE9PSh0PXRoaXMudG9vbHRpcFNob3dEZWxheU92ZXJyaWRlKSYmdm9pZCAwIT09dD90OnRoaXMuZ2V0R3JpZE9wdGlvbnNUb29sdGlwRGVsYXkoInRvb2x0aXBTaG93RGVsYXkiKTpudWxsIT09KGk9dGhpcy50b29sdGlwSGlkZURlbGF5T3ZlcnJpZGUpJiZ2b2lkIDAhPT1pP2k6dGhpcy5nZXRHcmlkT3B0aW9uc1Rvb2x0aXBEZWxheSgidG9vbHRpcEhpZGVEZWxheSIpfWRlc3Ryb3koKXt0aGlzLnNldFRvRG9Ob3RoaW5nKCksc3VwZXIuZGVzdHJveSgpfWdldFRvb2x0aXBUcmlnZ2VyKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInRvb2x0aXBUcmlnZ2VyIik7cmV0dXJuIGUmJiJob3ZlciIhPT1lP3JyLkZPQ1VTOnJyLkhPVkVSfW9uTW91c2VFbnRlcihlKXt0aGlzLmludGVyYWN0aW9uRW5hYmxlZCYmdGhpcy5pbnRlcmFjdGl2ZVRvb2x0aXBUaW1lb3V0SWQmJih0aGlzLnVubG9ja1NlcnZpY2UoKSx0aGlzLnN0YXJ0SGlkZVRpbWVvdXQoKSksTWkoKXx8KG5yLmlzTG9ja2VkP3RoaXMuc2hvd1Rvb2x0aXBUaW1lb3V0SWQ9d2luZG93LnNldFRpbWVvdXQoKCk9Pnt0aGlzLnByZXBhcmVUb1Nob3dUb29sdGlwKGUpfSx0aGlzLklOVEVSQUNUSVZFX0hJREVfREVMQVkpOnRoaXMucHJlcGFyZVRvU2hvd1Rvb2x0aXAoZSkpfW9uTW91c2VNb3ZlKGUpe3RoaXMubGFzdE1vdXNlRXZlbnQmJih0aGlzLmxhc3RNb3VzZUV2ZW50PWUpLHRoaXMudG9vbHRpcE1vdXNlVHJhY2smJnRoaXMuc3RhdGU9PT1zci5TSE9XSU5HJiZ0aGlzLnRvb2x0aXBDb21wJiZ0aGlzLnBvc2l0aW9uVG9vbHRpcCgpfW9uTW91c2VEb3duKCl7dGhpcy5zZXRUb0RvTm90aGluZygpfW9uTW91c2VMZWF2ZSgpe3RoaXMuaW50ZXJhY3Rpb25FbmFibGVkP3RoaXMubG9ja1NlcnZpY2UoKTp0aGlzLnNldFRvRG9Ob3RoaW5nKCl9b25Gb2N1c0luKCl7dGhpcy5wcmVwYXJlVG9TaG93VG9vbHRpcCgpfW9uRm9jdXNPdXQoZSl7dmFyIHQ7Y29uc3QgaT1lLnJlbGF0ZWRUYXJnZXQscz10aGlzLnBhcmVudENvbXAuZ2V0R3VpKCkscj1udWxsPT09KHQ9dGhpcy50b29sdGlwQ29tcCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0R3VpKCk7dGhpcy5pc0ludGVyYWN0aW5nV2l0aFRvb2x0aXB8fHMuY29udGFpbnMoaSl8fHRoaXMuaW50ZXJhY3Rpb25FbmFibGVkJiYobnVsbD09cj92b2lkIDA6ci5jb250YWlucyhpKSl8fHRoaXMuc2V0VG9Eb05vdGhpbmcoKX1vbktleURvd24oKXt0aGlzLnNldFRvRG9Ob3RoaW5nKCl9cHJlcGFyZVRvU2hvd1Rvb2x0aXAoZSl7aWYodGhpcy5zdGF0ZSE9c3IuTk9USElOR3x8bnIuaXNMb2NrZWQpcmV0dXJuITE7bGV0IHQ9MDtyZXR1cm4gZSYmKHQ9dGhpcy5pc0xhc3RUb29sdGlwSGlkZGVuUmVjZW50bHkoKT8yMDA6dGhpcy5nZXRUb29sdGlwRGVsYXkoInNob3ciKSksdGhpcy5sYXN0TW91c2VFdmVudD1lfHxudWxsLHRoaXMuc2hvd1Rvb2x0aXBUaW1lb3V0SWQ9d2luZG93LnNldFRpbWVvdXQodGhpcy5zaG93VG9vbHRpcC5iaW5kKHRoaXMpLHQpLHRoaXMuc3RhdGU9c3IuV0FJVElOR19UT19TSE9XLCEwfWlzTGFzdFRvb2x0aXBIaWRkZW5SZWNlbnRseSgpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpLW5yLmxhc3RUb29sdGlwSGlkZVRpbWU8dGhpcy5TSE9XX1FVSUNLX1RPT0xUSVBfRElGRn1zZXRUb0RvTm90aGluZygpe3RoaXMuc3RhdGU9PT1zci5TSE9XSU5HJiZ0aGlzLmhpZGVUb29sdGlwKCksdGhpcy5vbkJvZHlTY3JvbGxFdmVudENhbGxiYWNrJiYodGhpcy5vbkJvZHlTY3JvbGxFdmVudENhbGxiYWNrKCksdGhpcy5vbkJvZHlTY3JvbGxFdmVudENhbGxiYWNrPXZvaWQgMCksdGhpcy5vbkNvbHVtbk1vdmVkRXZlbnRDYWxsYmFjayYmKHRoaXMub25Db2x1bW5Nb3ZlZEV2ZW50Q2FsbGJhY2soKSx0aGlzLm9uQ29sdW1uTW92ZWRFdmVudENhbGxiYWNrPXZvaWQgMCksdGhpcy5jbGVhclRpbWVvdXRzKCksdGhpcy5zdGF0ZT1zci5OT1RISU5HLHRoaXMubGFzdE1vdXNlRXZlbnQ9bnVsbH1zaG93VG9vbHRpcCgpe2NvbnN0IGU9T2JqZWN0LmFzc2lnbih7fSx0aGlzLnBhcmVudENvbXAuZ2V0VG9vbHRpcFBhcmFtcygpKTtpZighYihlLnZhbHVlKSlyZXR1cm4gdm9pZCB0aGlzLnNldFRvRG9Ob3RoaW5nKCk7dGhpcy5zdGF0ZT1zci5TSE9XSU5HLHRoaXMudG9vbHRpcEluc3RhbmNlQ291bnQrKztjb25zdCB0PXRoaXMubmV3VG9vbHRpcENvbXBvbmVudENhbGxiYWNrLmJpbmQodGhpcyx0aGlzLnRvb2x0aXBJbnN0YW5jZUNvdW50KTt0aGlzLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldFRvb2x0aXBDb21wRGV0YWlscyhlKS5uZXdBZ1N0YWNrSW5zdGFuY2UoKS50aGVuKHQpfWhpZGVUb29sdGlwKGUpe2lmKCFlJiZ0aGlzLmlzSW50ZXJhY3RpbmdXaXRoVG9vbHRpcClyZXR1cm47dGhpcy50b29sdGlwQ29tcCYmKHRoaXMuZGVzdHJveVRvb2x0aXBDb21wKCksbnIubGFzdFRvb2x0aXBIaWRlVGltZT0obmV3IERhdGUpLmdldFRpbWUoKSk7Y29uc3QgdD17dHlwZTpsdC5FVkVOVF9UT09MVElQX0hJREUscGFyZW50R3VpOnRoaXMucGFyZW50Q29tcC5nZXRHdWkoKX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KSx0aGlzLnN0YXRlPXNyLk5PVEhJTkd9bmV3VG9vbHRpcENvbXBvbmVudENhbGxiYWNrKGUsdCl7aWYodGhpcy5zdGF0ZSE9PXNyLlNIT1dJTkd8fHRoaXMudG9vbHRpcEluc3RhbmNlQ291bnQhPT1lKXJldHVybiB2b2lkIHRoaXMuZ2V0Q29udGV4dCgpLmRlc3Ryb3lCZWFuKHQpO2NvbnN0IGk9dC5nZXRHdWkoKTt0aGlzLnRvb2x0aXBDb21wPXQsaS5jbGFzc0xpc3QuY29udGFpbnMoImFnLXRvb2x0aXAiKXx8aS5jbGFzc0xpc3QuYWRkKCJhZy10b29sdGlwLWN1c3RvbSIpLHRoaXMudG9vbHRpcFRyaWdnZXI9PT1yci5IT1ZFUiYmaS5jbGFzc0xpc3QuYWRkKCJhZy10b29sdGlwLWFuaW1hdGUiKSx0aGlzLmludGVyYWN0aW9uRW5hYmxlZCYmaS5jbGFzc0xpc3QuYWRkKCJhZy10b29sdGlwLWludGVyYWN0aXZlIik7Y29uc3Qgcz10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSxyPXRoaXMucG9wdXBTZXJ2aWNlLmFkZFBvcHVwKHtlQ2hpbGQ6aSxhcmlhTGFiZWw6cygiYXJpYUxhYmVsVG9vbHRpcCIsIlRvb2x0aXAiKX0pO3ImJih0aGlzLnRvb2x0aXBQb3B1cERlc3Ryb3lGdW5jPXIuaGlkZUZ1bmMpLHRoaXMucG9zaXRpb25Ub29sdGlwKCksdGhpcy50b29sdGlwVHJpZ2dlcj09PXJyLkZPQ1VTJiYodGhpcy5vbkJvZHlTY3JvbGxFdmVudENhbGxiYWNrPXRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0JPRFlfU0NST0xMLHRoaXMuc2V0VG9Eb05vdGhpbmcuYmluZCh0aGlzKSksdGhpcy5vbkNvbHVtbk1vdmVkRXZlbnRDYWxsYmFjaz10aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fTU9WRUQsdGhpcy5zZXRUb0RvTm90aGluZy5iaW5kKHRoaXMpKSksdGhpcy5pbnRlcmFjdGlvbkVuYWJsZWQmJih0aGlzLnRvb2x0aXBUcmlnZ2VyPT09cnIuSE9WRVI/KHRoaXMudG9vbHRpcE1vdXNlRW50ZXJMaXN0ZW5lcj10aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihpLCJtb3VzZWVudGVyIix0aGlzLm9uVG9vbHRpcE1vdXNlRW50ZXIuYmluZCh0aGlzKSl8fG51bGwsdGhpcy50b29sdGlwTW91c2VMZWF2ZUxpc3RlbmVyPXRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGksIm1vdXNlbGVhdmUiLHRoaXMub25Ub29sdGlwTW91c2VMZWF2ZS5iaW5kKHRoaXMpKXx8bnVsbCk6KHRoaXMudG9vbHRpcEZvY3VzSW5MaXN0ZW5lcj10aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihpLCJmb2N1c2luIix0aGlzLm9uVG9vbHRpcEZvY3VzSW4uYmluZCh0aGlzKSl8fG51bGwsdGhpcy50b29sdGlwRm9jdXNPdXRMaXN0ZW5lcj10aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihpLCJmb2N1c291dCIsdGhpcy5vblRvb2x0aXBGb2N1c091dC5iaW5kKHRoaXMpKXx8bnVsbCkpO2NvbnN0IG89e3R5cGU6bHQuRVZFTlRfVE9PTFRJUF9TSE9XLHRvb2x0aXBHdWk6aSxwYXJlbnRHdWk6dGhpcy5wYXJlbnRDb21wLmdldEd1aSgpfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KG8pLHRoaXMuc3RhcnRIaWRlVGltZW91dCgpfW9uVG9vbHRpcE1vdXNlRW50ZXIoKXt0aGlzLmlzSW50ZXJhY3RpbmdXaXRoVG9vbHRpcD0hMCx0aGlzLnVubG9ja1NlcnZpY2UoKX1vblRvb2x0aXBNb3VzZUxlYXZlKCl7dGhpcy5pc0ludGVyYWN0aW5nV2l0aFRvb2x0aXA9ITEsdGhpcy5sb2NrU2VydmljZSgpfW9uVG9vbHRpcEZvY3VzSW4oKXt0aGlzLmlzSW50ZXJhY3RpbmdXaXRoVG9vbHRpcD0hMH1vblRvb2x0aXBGb2N1c091dChlKXt2YXIgdDtjb25zdCBpPXRoaXMucGFyZW50Q29tcC5nZXRHdWkoKSxzPW51bGw9PT0odD10aGlzLnRvb2x0aXBDb21wKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRHdWkoKSxyPWUucmVsYXRlZFRhcmdldDsobnVsbD09cz92b2lkIDA6cy5jb250YWlucyhyKSl8fCh0aGlzLmlzSW50ZXJhY3RpbmdXaXRoVG9vbHRpcD0hMSxpLmNvbnRhaW5zKHIpP3RoaXMuc3RhcnRIaWRlVGltZW91dCgpOnRoaXMuaGlkZVRvb2x0aXAoKSl9cG9zaXRpb25Ub29sdGlwKCl7Y29uc3QgZT17dHlwZToidG9vbHRpcCIsZVBvcHVwOnRoaXMudG9vbHRpcENvbXAuZ2V0R3VpKCksbnVkZ2VZOjE4LHNraXBPYnNlcnZlcjp0aGlzLnRvb2x0aXBNb3VzZVRyYWNrfTt0aGlzLmxhc3RNb3VzZUV2ZW50P3RoaXMucG9wdXBTZXJ2aWNlLnBvc2l0aW9uUG9wdXBVbmRlck1vdXNlRXZlbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHttb3VzZUV2ZW50OnRoaXMubGFzdE1vdXNlRXZlbnR9KSk6dGhpcy5wb3B1cFNlcnZpY2UucG9zaXRpb25Qb3B1cEJ5Q29tcG9uZW50KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7ZXZlbnRTb3VyY2U6dGhpcy5wYXJlbnRDb21wLmdldEd1aSgpLHBvc2l0aW9uOiJ1bmRlciIsa2VlcFdpdGhpbkJvdW5kczohMCxudWRnZVk6NX0pKX1kZXN0cm95VG9vbHRpcENvbXAoKXt0aGlzLnRvb2x0aXBDb21wLmdldEd1aSgpLmNsYXNzTGlzdC5hZGQoImFnLXRvb2x0aXAtaGlkaW5nIik7Y29uc3QgZT10aGlzLnRvb2x0aXBQb3B1cERlc3Ryb3lGdW5jLHQ9dGhpcy50b29sdGlwQ29tcCxpPXRoaXMudG9vbHRpcFRyaWdnZXI9PT1yci5IT1ZFUj90aGlzLkZBREVfT1VUX1RPT0xUSVBfVElNRU9VVDowO3dpbmRvdy5zZXRUaW1lb3V0KCgpPT57ZSgpLHRoaXMuZ2V0Q29udGV4dCgpLmRlc3Ryb3lCZWFuKHQpfSxpKSx0aGlzLmNsZWFyVG9vbHRpcExpc3RlbmVycygpLHRoaXMudG9vbHRpcFBvcHVwRGVzdHJveUZ1bmM9dm9pZCAwLHRoaXMudG9vbHRpcENvbXA9dm9pZCAwfWNsZWFyVG9vbHRpcExpc3RlbmVycygpe1t0aGlzLnRvb2x0aXBNb3VzZUVudGVyTGlzdGVuZXIsdGhpcy50b29sdGlwTW91c2VMZWF2ZUxpc3RlbmVyLHRoaXMudG9vbHRpcEZvY3VzSW5MaXN0ZW5lcix0aGlzLnRvb2x0aXBGb2N1c091dExpc3RlbmVyXS5mb3JFYWNoKGU9PntlJiZlKCl9KSx0aGlzLnRvb2x0aXBNb3VzZUVudGVyTGlzdGVuZXI9dGhpcy50b29sdGlwTW91c2VMZWF2ZUxpc3RlbmVyPXRoaXMudG9vbHRpcEZvY3VzSW5MaXN0ZW5lcj10aGlzLnRvb2x0aXBGb2N1c091dExpc3RlbmVyPW51bGx9bG9ja1NlcnZpY2UoKXtuci5pc0xvY2tlZD0hMCx0aGlzLmludGVyYWN0aXZlVG9vbHRpcFRpbWVvdXRJZD13aW5kb3cuc2V0VGltZW91dCgoKT0+e3RoaXMudW5sb2NrU2VydmljZSgpLHRoaXMuc2V0VG9Eb05vdGhpbmcoKX0sdGhpcy5JTlRFUkFDVElWRV9ISURFX0RFTEFZKX11bmxvY2tTZXJ2aWNlKCl7bnIuaXNMb2NrZWQ9ITEsdGhpcy5jbGVhckludGVyYWN0aXZlVGltZW91dCgpfXN0YXJ0SGlkZVRpbWVvdXQoKXt0aGlzLmNsZWFySGlkZVRpbWVvdXQoKSx0aGlzLmhpZGVUb29sdGlwVGltZW91dElkPXdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuaGlkZVRvb2x0aXAuYmluZCh0aGlzKSx0aGlzLmdldFRvb2x0aXBEZWxheSgiaGlkZSIpKX1jbGVhclNob3dUaW1lb3V0KCl7dGhpcy5zaG93VG9vbHRpcFRpbWVvdXRJZCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zaG93VG9vbHRpcFRpbWVvdXRJZCksdGhpcy5zaG93VG9vbHRpcFRpbWVvdXRJZD12b2lkIDApfWNsZWFySGlkZVRpbWVvdXQoKXt0aGlzLmhpZGVUb29sdGlwVGltZW91dElkJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmhpZGVUb29sdGlwVGltZW91dElkKSx0aGlzLmhpZGVUb29sdGlwVGltZW91dElkPXZvaWQgMCl9Y2xlYXJJbnRlcmFjdGl2ZVRpbWVvdXQoKXt0aGlzLmludGVyYWN0aXZlVG9vbHRpcFRpbWVvdXRJZCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5pbnRlcmFjdGl2ZVRvb2x0aXBUaW1lb3V0SWQpLHRoaXMuaW50ZXJhY3RpdmVUb29sdGlwVGltZW91dElkPXZvaWQgMCl9Y2xlYXJUaW1lb3V0cygpe3RoaXMuY2xlYXJTaG93VGltZW91dCgpLHRoaXMuY2xlYXJIaWRlVGltZW91dCgpLHRoaXMuY2xlYXJJbnRlcmFjdGl2ZVRpbWVvdXQoKX19bnIuaXNMb2NrZWQ9ITEsb3IoW2NlKCJwb3B1cFNlcnZpY2UiKV0sbnIucHJvdG90eXBlLCJwb3B1cFNlcnZpY2UiLHZvaWQgMCksb3IoW2NlKCJ1c2VyQ29tcG9uZW50RmFjdG9yeSIpXSxuci5wcm90b3R5cGUsInVzZXJDb21wb25lbnRGYWN0b3J5Iix2b2lkIDApLG9yKFthZV0sbnIucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTtjbGFzcyBhcntjb25zdHJ1Y3RvcihlKXt0aGlzLmNzc0NsYXNzU3RhdGVzPXt9LHRoaXMuZ2V0R3VpPWV9YWRkQ3NzQ2xhc3MoZSl7Y29uc3QgdD0oZXx8IiIpLnNwbGl0KCIgIik7aWYodC5sZW5ndGg+MSlyZXR1cm4gdm9pZCB0LmZvckVhY2goZT0+dGhpcy5hZGRDc3NDbGFzcyhlKSk7aWYoITAhPT10aGlzLmNzc0NsYXNzU3RhdGVzW2VdJiZlLmxlbmd0aCl7Y29uc3QgdD10aGlzLmdldEd1aSgpO3QmJnQuY2xhc3NMaXN0LmFkZChlKSx0aGlzLmNzc0NsYXNzU3RhdGVzW2VdPSEwfX1yZW1vdmVDc3NDbGFzcyhlKXtjb25zdCB0PShlfHwiIikuc3BsaXQoIiAiKTtpZih0Lmxlbmd0aD4xKXJldHVybiB2b2lkIHQuZm9yRWFjaChlPT50aGlzLnJlbW92ZUNzc0NsYXNzKGUpKTtpZighMSE9PXRoaXMuY3NzQ2xhc3NTdGF0ZXNbZV0mJmUubGVuZ3RoKXtjb25zdCB0PXRoaXMuZ2V0R3VpKCk7dCYmdC5jbGFzc0xpc3QucmVtb3ZlKGUpLHRoaXMuY3NzQ2xhc3NTdGF0ZXNbZV09ITF9fWNvbnRhaW5zQ3NzQ2xhc3MoZSl7Y29uc3QgdD10aGlzLmdldEd1aSgpO3JldHVybiEhdCYmdC5jbGFzc0xpc3QuY29udGFpbnMoZSl9YWRkT3JSZW1vdmVDc3NDbGFzcyhlLHQpe2lmKCFlKXJldHVybjtpZihlLmluZGV4T2YoIiAiKT49MCl7Y29uc3QgaT0oZXx8IiIpLnNwbGl0KCIgIik7aWYoaS5sZW5ndGg+MSlyZXR1cm4gdm9pZCBpLmZvckVhY2goZT0+dGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKGUsdCkpfWlmKHRoaXMuY3NzQ2xhc3NTdGF0ZXNbZV0hPT10JiZlLmxlbmd0aCl7Y29uc3QgaT10aGlzLmdldEd1aSgpO2kmJmkuY2xhc3NMaXN0LnRvZ2dsZShlLHQpLHRoaXMuY3NzQ2xhc3NTdGF0ZXNbZV09dH19fXZhciBscj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjb25zdCBkcj1uZXcgSnM7Y2xhc3MgY3IgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuZGlzcGxheWVkPSEwLHRoaXMudmlzaWJsZT0hMCx0aGlzLmNvbXBJZD1kci5uZXh0KCksdGhpcy5jc3NDbGFzc01hbmFnZXI9bmV3IGFyKCgpPT50aGlzLmVHdWkpLGUmJnRoaXMuc2V0VGVtcGxhdGUoZSl9cHJlQ29uc3RydWN0T25Db21wb25lbnQoKXt0aGlzLnVzaW5nQnJvd3NlclRvb2x0aXBzPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlQnJvd3NlclRvb2x0aXBzIil9Z2V0Q29tcElkKCl7cmV0dXJuIHRoaXMuY29tcElkfWdldFRvb2x0aXBQYXJhbXMoKXtyZXR1cm57dmFsdWU6dGhpcy50b29sdGlwVGV4dCxsb2NhdGlvbjoiVU5LTk9XTiJ9fXNldFRvb2x0aXAoZSx0LGkpe2NvbnN0IHM9KCk9Pnt0aGlzLnVzaW5nQnJvd3NlclRvb2x0aXBzP3RoaXMuZ2V0R3VpKCkucmVtb3ZlQXR0cmlidXRlKCJ0aXRsZSIpOnRoaXMudG9vbHRpcEZlYXR1cmU9dGhpcy5kZXN0cm95QmVhbih0aGlzLnRvb2x0aXBGZWF0dXJlKX0scj0oKT0+e3RoaXMudXNpbmdCcm93c2VyVG9vbHRpcHM/dGhpcy5nZXRHdWkoKS5zZXRBdHRyaWJ1dGUoInRpdGxlIix0aGlzLnRvb2x0aXBUZXh0KTp0aGlzLnRvb2x0aXBGZWF0dXJlPXRoaXMuY3JlYXRlQmVhbihuZXcgbnIodGhpcyx0LGkpKX07dGhpcy50b29sdGlwVGV4dCE9ZSYmKHRoaXMudG9vbHRpcFRleHQmJnMoKSxudWxsIT1lJiYodGhpcy50b29sdGlwVGV4dD1lLHRoaXMudG9vbHRpcFRleHQmJnIoKSkpfWNyZWF0ZUNoaWxkQ29tcG9uZW50c0Zyb21UYWdzKGUsdCl7THMoZS5jaGlsZE5vZGVzKS5mb3JFYWNoKGk9PntpZighKGkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpcmV0dXJuO2NvbnN0IHM9dGhpcy5jcmVhdGVDb21wb25lbnRGcm9tRWxlbWVudChpLGU9PntlLmdldEd1aSgpJiZ0aGlzLmNvcHlBdHRyaWJ1dGVzRnJvbU5vZGUoaSxlLmdldEd1aSgpKX0sdCk7aWYocyl7aWYocy5hZGRJdGVtcyYmaS5jaGlsZHJlbi5sZW5ndGgpe3RoaXMuY3JlYXRlQ2hpbGRDb21wb25lbnRzRnJvbVRhZ3MoaSx0KTtjb25zdCBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGkuY2hpbGRyZW4pO3MuYWRkSXRlbXMoZSl9dGhpcy5zd2FwQ29tcG9uZW50Rm9yTm9kZShzLGUsaSl9ZWxzZSBpLmNoaWxkTm9kZXMmJnRoaXMuY3JlYXRlQ2hpbGRDb21wb25lbnRzRnJvbVRhZ3MoaSx0KX0pfWNyZWF0ZUNvbXBvbmVudEZyb21FbGVtZW50KGUsdCxpKXtjb25zdCBzPWUubm9kZU5hbWUscj1pP2lbZS5nZXRBdHRyaWJ1dGUoInJlZiIpXTp2b2lkIDAsbz10aGlzLmFnU3RhY2tDb21wb25lbnRzUmVnaXN0cnkuZ2V0Q29tcG9uZW50Q2xhc3Mocyk7aWYobyl7Y3IuZWxlbWVudEdldHRpbmdDcmVhdGVkPWU7Y29uc3QgaT1uZXcgbyhyKTtyZXR1cm4gaS5zZXRQYXJlbnRDb21wb25lbnQodGhpcyksdGhpcy5jcmVhdGVCZWFuKGksbnVsbCx0KSxpfXJldHVybiBudWxsfWNvcHlBdHRyaWJ1dGVzRnJvbU5vZGUoZSx0KXtGcyhlLmF0dHJpYnV0ZXMsKGUsaSk9PnQuc2V0QXR0cmlidXRlKGUsaSkpfXN3YXBDb21wb25lbnRGb3JOb2RlKGUsdCxpKXtjb25zdCBzPWUuZ2V0R3VpKCk7dC5yZXBsYWNlQ2hpbGQocyxpKSx0Lmluc2VydEJlZm9yZShkb2N1bWVudC5jcmVhdGVDb21tZW50KGkubm9kZU5hbWUpLHMpLHRoaXMuYWRkRGVzdHJveUZ1bmModGhpcy5kZXN0cm95QmVhbi5iaW5kKHRoaXMsZSkpLHRoaXMuc3dhcEluQ29tcG9uZW50Rm9yUXVlcnlTZWxlY3RvcnMoZSxpKX1zd2FwSW5Db21wb25lbnRGb3JRdWVyeVNlbGVjdG9ycyhlLHQpe2NvbnN0IGk9dGhpczt0aGlzLml0ZXJhdGVPdmVyUXVlcnlTZWxlY3RvcnMocz0+e2lbcy5hdHRyaWJ1dGVOYW1lXT09PXQmJihpW3MuYXR0cmlidXRlTmFtZV09ZSl9KX1pdGVyYXRlT3ZlclF1ZXJ5U2VsZWN0b3JzKGUpe2xldCB0PU9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKTtmb3IoO251bGwhPXQ7KXtjb25zdCBpPXQuX19hZ0NvbXBvbmVudE1ldGFEYXRhLHM9eih0LmNvbnN0cnVjdG9yKTtpJiZpW3NdJiZpW3NdLnF1ZXJ5U2VsZWN0b3JzJiZpW3NdLnF1ZXJ5U2VsZWN0b3JzLmZvckVhY2godD0+ZSh0KSksdD1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCl9fWFjdGl2YXRlVGFiSW5kZXgoZSl7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInRhYkluZGV4Iik7ZXx8KGU9W10pLGUubGVuZ3RofHxlLnB1c2godGhpcy5nZXRHdWkoKSksZS5mb3JFYWNoKGU9PmUuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsdC50b1N0cmluZygpKSl9c2V0VGVtcGxhdGUoZSx0KXtjb25zdCBpPXlzKGUpO3RoaXMuc2V0VGVtcGxhdGVGcm9tRWxlbWVudChpLHQpfXNldFRlbXBsYXRlRnJvbUVsZW1lbnQoZSx0KXt0aGlzLmVHdWk9ZSx0aGlzLmVHdWkuX19hZ0NvbXBvbmVudD10aGlzLHRoaXMud2lyZVF1ZXJ5U2VsZWN0b3JzKCksdGhpcy5nZXRDb250ZXh0KCkmJnRoaXMuY3JlYXRlQ2hpbGRDb21wb25lbnRzRnJvbVRhZ3ModGhpcy5nZXRHdWkoKSx0KX1jcmVhdGVDaGlsZENvbXBvbmVudHNQcmVDb25zdHJ1Y3QoKXt0aGlzLmdldEd1aSgpJiZ0aGlzLmNyZWF0ZUNoaWxkQ29tcG9uZW50c0Zyb21UYWdzKHRoaXMuZ2V0R3VpKCkpfXdpcmVRdWVyeVNlbGVjdG9ycygpe2lmKCF0aGlzLmVHdWkpcmV0dXJuO2NvbnN0IGU9dGhpczt0aGlzLml0ZXJhdGVPdmVyUXVlcnlTZWxlY3RvcnModD0+e2NvbnN0IGk9aT0+ZVt0LmF0dHJpYnV0ZU5hbWVdPWk7aWYodC5yZWZTZWxlY3RvciYmdGhpcy5nZXRBdHRyaWJ1dGUoInJlZiIpPT09dC5yZWZTZWxlY3RvcilpKHRoaXMuZUd1aSk7ZWxzZXtjb25zdCBlPXRoaXMuZUd1aS5xdWVyeVNlbGVjdG9yKHQucXVlcnlTZWxlY3Rvcik7ZSYmaShlLl9fYWdDb21wb25lbnR8fGUpfX0pfWdldEd1aSgpe3JldHVybiB0aGlzLmVHdWl9Z2V0Rm9jdXNhYmxlRWxlbWVudCgpe3JldHVybiB0aGlzLmVHdWl9Z2V0QXJpYUVsZW1lbnQoKXtyZXR1cm4gdGhpcy5nZXRGb2N1c2FibGVFbGVtZW50KCl9c2V0UGFyZW50Q29tcG9uZW50KGUpe3RoaXMucGFyZW50Q29tcG9uZW50PWV9Z2V0UGFyZW50Q29tcG9uZW50KCl7cmV0dXJuIHRoaXMucGFyZW50Q29tcG9uZW50fXNldEd1aShlKXt0aGlzLmVHdWk9ZX1xdWVyeUZvckh0bWxFbGVtZW50KGUpe3JldHVybiB0aGlzLmVHdWkucXVlcnlTZWxlY3RvcihlKX1xdWVyeUZvckh0bWxJbnB1dEVsZW1lbnQoZSl7cmV0dXJuIHRoaXMuZUd1aS5xdWVyeVNlbGVjdG9yKGUpfWFwcGVuZENoaWxkKGUsdCl7aWYobnVsbCE9ZSlpZih0fHwodD10aGlzLmVHdWkpLE1zKGUpKXQuYXBwZW5kQ2hpbGQoZSk7ZWxzZXtjb25zdCBpPWU7dC5hcHBlbmRDaGlsZChpLmdldEd1aSgpKX19aXNEaXNwbGF5ZWQoKXtyZXR1cm4gdGhpcy5kaXNwbGF5ZWR9c2V0VmlzaWJsZShlLHQ9e30pe2lmKGUhPT10aGlzLnZpc2libGUpe3RoaXMudmlzaWJsZT1lO2NvbnN0e3NraXBBcmlhSGlkZGVuOml9PXQ7c3ModGhpcy5lR3VpLGUse3NraXBBcmlhSGlkZGVuOml9KX19c2V0RGlzcGxheWVkKGUsdD17fSl7aWYoZSE9PXRoaXMuZGlzcGxheWVkKXt0aGlzLmRpc3BsYXllZD1lO2NvbnN0e3NraXBBcmlhSGlkZGVuOml9PXQ7aXModGhpcy5lR3VpLGUse3NraXBBcmlhSGlkZGVuOml9KTtjb25zdCBzPXt0eXBlOmNyLkVWRU5UX0RJU1BMQVlFRF9DSEFOR0VELHZpc2libGU6dGhpcy5kaXNwbGF5ZWR9O3RoaXMuZGlzcGF0Y2hFdmVudChzKX19ZGVzdHJveSgpe3RoaXMudG9vbHRpcEZlYXR1cmUmJih0aGlzLnRvb2x0aXBGZWF0dXJlPXRoaXMuZGVzdHJveUJlYW4odGhpcy50b29sdGlwRmVhdHVyZSkpLHRoaXMucGFyZW50Q29tcG9uZW50JiYodGhpcy5wYXJlbnRDb21wb25lbnQ9dm9pZCAwKTtjb25zdCBlPXRoaXMuZUd1aTtlJiZlLl9fYWdDb21wb25lbnQmJihlLl9fYWdDb21wb25lbnQ9dm9pZCAwKSxzdXBlci5kZXN0cm95KCl9YWRkR3VpRXZlbnRMaXN0ZW5lcihlLHQsaSl7dGhpcy5lR3VpLmFkZEV2ZW50TGlzdGVuZXIoZSx0LGkpLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9PnRoaXMuZUd1aS5yZW1vdmVFdmVudExpc3RlbmVyKGUsdCkpfWFkZENzc0NsYXNzKGUpe3RoaXMuY3NzQ2xhc3NNYW5hZ2VyLmFkZENzc0NsYXNzKGUpfXJlbW92ZUNzc0NsYXNzKGUpe3RoaXMuY3NzQ2xhc3NNYW5hZ2VyLnJlbW92ZUNzc0NsYXNzKGUpfWNvbnRhaW5zQ3NzQ2xhc3MoZSl7cmV0dXJuIHRoaXMuY3NzQ2xhc3NNYW5hZ2VyLmNvbnRhaW5zQ3NzQ2xhc3MoZSl9YWRkT3JSZW1vdmVDc3NDbGFzcyhlLHQpe3RoaXMuY3NzQ2xhc3NNYW5hZ2VyLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoZSx0KX1nZXRBdHRyaWJ1dGUoZSl7Y29uc3R7ZUd1aTp0fT10aGlzO3JldHVybiB0P3QuZ2V0QXR0cmlidXRlKGUpOm51bGx9Z2V0UmVmRWxlbWVudChlKXtyZXR1cm4gdGhpcy5xdWVyeUZvckh0bWxFbGVtZW50KGBbcmVmPSIke2V9Il1gKX19ZnVuY3Rpb24gaHIoZSl7cmV0dXJuIHByLmJpbmQodGhpcyxlLHZvaWQgMCl9ZnVuY3Rpb24gdXIoZSl7cmV0dXJuIHByLmJpbmQodGhpcyxgW3JlZj0ke2V9XWAsZSl9ZnVuY3Rpb24gcHIoZSx0LGkscyxyKXtudWxsIT09ZT8ibnVtYmVyIiE9dHlwZW9mIHI/ZnVuY3Rpb24oZSx0LGkpe2NvbnN0IHM9ZnVuY3Rpb24oZSx0KXtlLl9fYWdDb21wb25lbnRNZXRhRGF0YXx8KGUuX19hZ0NvbXBvbmVudE1ldGFEYXRhPXt9KTtlLl9fYWdDb21wb25lbnRNZXRhRGF0YVt0XXx8KGUuX19hZ0NvbXBvbmVudE1ldGFEYXRhW3RdPXt9KTtyZXR1cm4gZS5fX2FnQ29tcG9uZW50TWV0YURhdGFbdF19KGUseihlLmNvbnN0cnVjdG9yKSk7c1t0XXx8KHNbdF09W10pO3NbdF0ucHVzaChpKX0oaSwicXVlcnlTZWxlY3RvcnMiLHthdHRyaWJ1dGVOYW1lOnMscXVlcnlTZWxlY3RvcjplLHJlZlNlbGVjdG9yOnR9KTpjb25zb2xlLmVycm9yKCJBRyBHcmlkOiBRdWVyeVNlbGVjdG9yIHNob3VsZCBiZSBvbiBhbiBhdHRyaWJ1dGUiKTpjb25zb2xlLmVycm9yKCJBRyBHcmlkOiBRdWVyeVNlbGVjdG9yIHNlbGVjdG9yIHNob3VsZCBub3QgYmUgbnVsbCIpfWNyLkVWRU5UX0RJU1BMQVlFRF9DSEFOR0VEPSJkaXNwbGF5ZWRDaGFuZ2VkIixscihbY2UoImFnU3RhY2tDb21wb25lbnRzUmVnaXN0cnkiKV0sY3IucHJvdG90eXBlLCJhZ1N0YWNrQ29tcG9uZW50c1JlZ2lzdHJ5Iix2b2lkIDApLGxyKFtuZV0sY3IucHJvdG90eXBlLCJwcmVDb25zdHJ1Y3RPbkNvbXBvbmVudCIsbnVsbCksbHIoW25lXSxjci5wcm90b3R5cGUsImNyZWF0ZUNoaWxkQ29tcG9uZW50c1ByZUNvbnN0cnVjdCIsbnVsbCk7dmFyIGdyPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIG1yIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoKXtzdXBlcignXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1mbG9hdGluZy1maWx0ZXItaW5wdXQiIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICAgICAgPGFnLWlucHV0LXRleHQtZmllbGQgcmVmPSJlRmxvYXRpbmdGaWx0ZXJUZXh0Ij48L2FnLWlucHV0LXRleHQtZmllbGQ+XG4gICAgICAgICAgICA8L2Rpdj4nKX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpfWluaXQoZSl7dGhpcy5wYXJhbXM9ZTtjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW4oZS5jb2x1bW4sImhlYWRlciIsITApLGk9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCk7dGhpcy5lRmxvYXRpbmdGaWx0ZXJUZXh0LnNldERpc2FibGVkKCEwKS5zZXRJbnB1dEFyaWFMYWJlbChgJHt0fSAke2koImFyaWFGaWx0ZXJJbnB1dCIsIkZpbHRlciBJbnB1dCIpfWApfW9uUGFyZW50TW9kZWxDaGFuZ2VkKGUpe251bGwhPWU/dGhpcy5wYXJhbXMucGFyZW50RmlsdGVySW5zdGFuY2UodD0+e2lmKHQuZ2V0TW9kZWxBc1N0cmluZyl7Y29uc3QgaT10LmdldE1vZGVsQXNTdHJpbmcoZSk7dGhpcy5lRmxvYXRpbmdGaWx0ZXJUZXh0LnNldFZhbHVlKGkpfX0pOnRoaXMuZUZsb2F0aW5nRmlsdGVyVGV4dC5zZXRWYWx1ZSgiIil9b25QYXJhbXNVcGRhdGVkKGUpe3RoaXMucmVmcmVzaChlKX1yZWZyZXNoKGUpe3RoaXMuaW5pdChlKX19Z3IoW3VyKCJlRmxvYXRpbmdGaWx0ZXJUZXh0IildLG1yLnByb3RvdHlwZSwiZUZsb2F0aW5nRmlsdGVyVGV4dCIsdm9pZCAwKSxncihbY2UoImNvbHVtbk1vZGVsIildLG1yLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCk7Y2xhc3MgZnJ7Y29uc3RydWN0b3IoZSx0LGkscyl7dGhpcy5hbGl2ZT0hMCx0aGlzLmNvbnRleHQ9ZSx0aGlzLmVQYXJlbnQ9czt0LmdldERhdGVDb21wRGV0YWlscyhpKS5uZXdBZ1N0YWNrSW5zdGFuY2UoKS50aGVuKHQ9Pnt0aGlzLmFsaXZlPyh0aGlzLmRhdGVDb21wPXQsdCYmKHMuYXBwZW5kQ2hpbGQodC5nZXRHdWkoKSksdC5hZnRlckd1aUF0dGFjaGVkJiZ0LmFmdGVyR3VpQXR0YWNoZWQoKSx0aGlzLnRlbXBWYWx1ZSYmdC5zZXREYXRlKHRoaXMudGVtcFZhbHVlKSxudWxsIT10aGlzLmRpc2FibGVkJiZ0aGlzLnNldERhdGVDb21wRGlzYWJsZWQodGhpcy5kaXNhYmxlZCkpKTplLmRlc3Ryb3lCZWFuKHQpfSl9ZGVzdHJveSgpe3RoaXMuYWxpdmU9ITEsdGhpcy5kYXRlQ29tcD10aGlzLmNvbnRleHQuZGVzdHJveUJlYW4odGhpcy5kYXRlQ29tcCl9Z2V0RGF0ZSgpe3JldHVybiB0aGlzLmRhdGVDb21wP3RoaXMuZGF0ZUNvbXAuZ2V0RGF0ZSgpOnRoaXMudGVtcFZhbHVlfXNldERhdGUoZSl7dGhpcy5kYXRlQ29tcD90aGlzLmRhdGVDb21wLnNldERhdGUoZSk6dGhpcy50ZW1wVmFsdWU9ZX1zZXREaXNhYmxlZChlKXt0aGlzLmRhdGVDb21wP3RoaXMuc2V0RGF0ZUNvbXBEaXNhYmxlZChlKTp0aGlzLmRpc2FibGVkPWV9c2V0RGlzcGxheWVkKGUpe2lzKHRoaXMuZVBhcmVudCxlKX1zZXRJbnB1dFBsYWNlaG9sZGVyKGUpe3RoaXMuZGF0ZUNvbXAmJnRoaXMuZGF0ZUNvbXAuc2V0SW5wdXRQbGFjZWhvbGRlciYmdGhpcy5kYXRlQ29tcC5zZXRJbnB1dFBsYWNlaG9sZGVyKGUpfXNldElucHV0QXJpYUxhYmVsKGUpe3RoaXMuZGF0ZUNvbXAmJnRoaXMuZGF0ZUNvbXAuc2V0SW5wdXRBcmlhTGFiZWwmJnRoaXMuZGF0ZUNvbXAuc2V0SW5wdXRBcmlhTGFiZWwoZSl9YWZ0ZXJHdWlBdHRhY2hlZChlKXt0aGlzLmRhdGVDb21wJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5kYXRlQ29tcC5hZnRlckd1aUF0dGFjaGVkJiZ0aGlzLmRhdGVDb21wLmFmdGVyR3VpQXR0YWNoZWQoZSl9dXBkYXRlUGFyYW1zKGUpe3ZhciB0LGk7bGV0IHM9ITE7aWYoKG51bGw9PT0odD10aGlzLmRhdGVDb21wKXx8dm9pZCAwPT09dD92b2lkIDA6dC5yZWZyZXNoKSYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuZGF0ZUNvbXAucmVmcmVzaCl7bnVsbCE9PXRoaXMuZGF0ZUNvbXAucmVmcmVzaChlKSYmKHM9ITApfWlmKCFzJiYobnVsbD09PShpPXRoaXMuZGF0ZUNvbXApfHx2b2lkIDA9PT1pP3ZvaWQgMDppLm9uUGFyYW1zVXBkYXRlZCkmJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLmRhdGVDb21wLm9uUGFyYW1zVXBkYXRlZCl7bnVsbCE9PXRoaXMuZGF0ZUNvbXAub25QYXJhbXNVcGRhdGVkKGUpJiZqKCJDdXN0b20gZGF0ZSBjb21wb25lbnQgbWV0aG9kICdvblBhcmFtc1VwZGF0ZWQnIGlzIGRlcHJlY2F0ZWQuIFVzZSAncmVmcmVzaCcgaW5zdGVhZC4iKX19c2V0RGF0ZUNvbXBEaXNhYmxlZChlKXtudWxsIT10aGlzLmRhdGVDb21wJiZudWxsIT10aGlzLmRhdGVDb21wLnNldERpc2FibGVkJiZ0aGlzLmRhdGVDb21wLnNldERpc2FibGVkKGUpfX1jbGFzcyB2cntjb25zdHJ1Y3Rvcigpe3RoaXMuY3VzdG9tRmlsdGVyT3B0aW9ucz17fX1pbml0KGUsdCl7dGhpcy5maWx0ZXJPcHRpb25zPWUuZmlsdGVyT3B0aW9uc3x8dCx0aGlzLm1hcEN1c3RvbU9wdGlvbnMoKSx0aGlzLnNlbGVjdERlZmF1bHRJdGVtKGUpfWdldEZpbHRlck9wdGlvbnMoKXtyZXR1cm4gdGhpcy5maWx0ZXJPcHRpb25zfW1hcEN1c3RvbU9wdGlvbnMoKXt0aGlzLmZpbHRlck9wdGlvbnMmJnRoaXMuZmlsdGVyT3B0aW9ucy5mb3JFYWNoKGU9PntpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJuO1tbImRpc3BsYXlLZXkiXSxbImRpc3BsYXlOYW1lIl0sWyJwcmVkaWNhdGUiLCJ0ZXN0Il1dLmV2ZXJ5KHQ9PiEhdC5zb21lKHQ9Pm51bGwhPWVbdF0pfHwoY29uc29sZS53YXJuKGBBRyBHcmlkOiBpZ25vcmluZyBGaWx0ZXJPcHRpb25EZWYgYXMgaXQgZG9lc24ndCBjb250YWluIG9uZSBvZiAnJHt0fSdgKSwhMSkpP3RoaXMuY3VzdG9tRmlsdGVyT3B0aW9uc1tlLmRpc3BsYXlLZXldPWU6dGhpcy5maWx0ZXJPcHRpb25zPXRoaXMuZmlsdGVyT3B0aW9ucy5maWx0ZXIodD0+dD09PWUpfHxbXX0pfXNlbGVjdERlZmF1bHRJdGVtKGUpe2lmKGUuZGVmYXVsdE9wdGlvbil0aGlzLmRlZmF1bHRPcHRpb249ZS5kZWZhdWx0T3B0aW9uO2Vsc2UgaWYodGhpcy5maWx0ZXJPcHRpb25zLmxlbmd0aD49MSl7Y29uc3QgZT10aGlzLmZpbHRlck9wdGlvbnNbMF07InN0cmluZyI9PXR5cGVvZiBlP3RoaXMuZGVmYXVsdE9wdGlvbj1lOmUuZGlzcGxheUtleT90aGlzLmRlZmF1bHRPcHRpb249ZS5kaXNwbGF5S2V5OmNvbnNvbGUud2FybigiQUcgR3JpZDogaW52YWxpZCBGaWx0ZXJPcHRpb25EZWYgc3VwcGxpZWQgYXMgaXQgZG9lc24ndCBjb250YWluIGEgJ2Rpc3BsYXlLZXknIil9ZWxzZSBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IG5vIGZpbHRlciBvcHRpb25zIGZvciBmaWx0ZXIiKX1nZXREZWZhdWx0T3B0aW9uKCl7cmV0dXJuIHRoaXMuZGVmYXVsdE9wdGlvbn1nZXRDdXN0b21PcHRpb24oZSl7cmV0dXJuIHRoaXMuY3VzdG9tRmlsdGVyT3B0aW9uc1tlXX19Y29uc3QgQ3I9e2FwcGx5RmlsdGVyOiJBcHBseSIsY2xlYXJGaWx0ZXI6IkNsZWFyIixyZXNldEZpbHRlcjoiUmVzZXQiLGNhbmNlbEZpbHRlcjoiQ2FuY2VsIix0ZXh0RmlsdGVyOiJUZXh0IEZpbHRlciIsbnVtYmVyRmlsdGVyOiJOdW1iZXIgRmlsdGVyIixkYXRlRmlsdGVyOiJEYXRlIEZpbHRlciIsc2V0RmlsdGVyOiJTZXQgRmlsdGVyIixmaWx0ZXJPb286IkZpbHRlci4uLiIsZW1wdHk6IkNob29zZSBvbmUiLGVxdWFsczoiRXF1YWxzIixub3RFcXVhbDoiRG9lcyBub3QgZXF1YWwiLGxlc3NUaGFuOiJMZXNzIHRoYW4iLGdyZWF0ZXJUaGFuOiJHcmVhdGVyIHRoYW4iLGluUmFuZ2U6IkJldHdlZW4iLGluUmFuZ2VTdGFydDoiRnJvbSIsaW5SYW5nZUVuZDoiVG8iLGxlc3NUaGFuT3JFcXVhbDoiTGVzcyB0aGFuIG9yIGVxdWFsIHRvIixncmVhdGVyVGhhbk9yRXF1YWw6IkdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byIsY29udGFpbnM6IkNvbnRhaW5zIixub3RDb250YWluczoiRG9lcyBub3QgY29udGFpbiIsc3RhcnRzV2l0aDoiQmVnaW5zIHdpdGgiLGVuZHNXaXRoOiJFbmRzIHdpdGgiLGJsYW5rOiJCbGFuayIsbm90Qmxhbms6Ik5vdCBibGFuayIsYmVmb3JlOiJCZWZvcmUiLGFmdGVyOiJBZnRlciIsYW5kQ29uZGl0aW9uOiJBTkQiLG9yQ29uZGl0aW9uOiJPUiIsZGF0ZUZvcm1hdE9vbzoieXl5eS1tbS1kZCJ9O3ZhciB5cj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBTciBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUsdD17fSl7c3VwZXIoKSx0aGlzLmVGb2N1c2FibGVFbGVtZW50PWUsdGhpcy5jYWxsYmFja3M9dCx0aGlzLmNhbGxiYWNrcz1PYmplY3QuYXNzaWduKHtzaG91bGRTdG9wRXZlbnRQcm9wYWdhdGlvbjooKT0+ITEsb25UYWJLZXlEb3duOmU9PntpZihlLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuO2NvbnN0IHQ9dGhpcy5mb2N1c1NlcnZpY2UuZmluZE5leHRGb2N1c2FibGVFbGVtZW50KHRoaXMuZUZvY3VzYWJsZUVsZW1lbnQsITEsZS5zaGlmdEtleSk7dCYmKHQuZm9jdXMoKSxlLnByZXZlbnREZWZhdWx0KCkpfX0sdCl9cG9zdENvbnN0cnVjdCgpe3RoaXMuZUZvY3VzYWJsZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChTci5GT0NVU19NQU5BR0VEX0NMQVNTKSx0aGlzLmFkZEtleURvd25MaXN0ZW5lcnModGhpcy5lRm9jdXNhYmxlRWxlbWVudCksdGhpcy5jYWxsYmFja3Mub25Gb2N1c0luJiZ0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVGb2N1c2FibGVFbGVtZW50LCJmb2N1c2luIix0aGlzLmNhbGxiYWNrcy5vbkZvY3VzSW4pLHRoaXMuY2FsbGJhY2tzLm9uRm9jdXNPdXQmJnRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUZvY3VzYWJsZUVsZW1lbnQsImZvY3Vzb3V0Iix0aGlzLmNhbGxiYWNrcy5vbkZvY3VzT3V0KX1hZGRLZXlEb3duTGlzdGVuZXJzKGUpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsImtleWRvd24iLGU9PntlLmRlZmF1bHRQcmV2ZW50ZWR8fCRlKGUpfHwodGhpcy5jYWxsYmFja3Muc2hvdWxkU3RvcEV2ZW50UHJvcGFnYXRpb24oZSk/WWUoZSk6ZS5rZXk9PT1qcy5UQUI/dGhpcy5jYWxsYmFja3Mub25UYWJLZXlEb3duKGUpOnRoaXMuY2FsbGJhY2tzLmhhbmRsZUtleURvd24mJnRoaXMuY2FsbGJhY2tzLmhhbmRsZUtleURvd24oZSkpfSl9fVNyLkZPQ1VTX01BTkFHRURfQ0xBU1M9ImFnLWZvY3VzLW1hbmFnZWQiLHlyKFtjZSgiZm9jdXNTZXJ2aWNlIildLFNyLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLHlyKFthZV0sU3IucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgd3I9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgYnIgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCksdGhpcy5lbGVtZW50PWUsdGhpcy5kcmFnU3RhcnRQb3NpdGlvbj17eDowLHk6MH0sdGhpcy5wb3NpdGlvbj17eDowLHk6MH0sdGhpcy5sYXN0U2l6ZT17d2lkdGg6LTEsaGVpZ2h0Oi0xfSx0aGlzLnBvc2l0aW9uZWQ9ITEsdGhpcy5yZXNpemVyc0FkZGVkPSExLHRoaXMucmVzaXplTGlzdGVuZXJzPVtdLHRoaXMuYm91bmRhcnlFbD1udWxsLHRoaXMuaXNSZXNpemluZz0hMSx0aGlzLmlzTW92aW5nPSExLHRoaXMucmVzaXphYmxlPXt9LHRoaXMubW92YWJsZT0hMSx0aGlzLmN1cnJlbnRSZXNpemVyPW51bGwsdGhpcy5jb25maWc9T2JqZWN0LmFzc2lnbih7fSx7cG9wdXA6ITF9LHQpfWNlbnRlcigpe2NvbnN0e2NsaWVudEhlaWdodDplLGNsaWVudFdpZHRoOnR9PXRoaXMub2Zmc2V0UGFyZW50LGk9dC8yLXRoaXMuZ2V0V2lkdGgoKS8yLHM9ZS8yLXRoaXMuZ2V0SGVpZ2h0KCkvMjt0aGlzLm9mZnNldEVsZW1lbnQoaSxzKX1pbml0aWFsaXNlUG9zaXRpb24oKXtpZih0aGlzLnBvc2l0aW9uZWQpcmV0dXJuO2NvbnN0e2NlbnRlcmVkOmUsZm9yY2VQb3B1cFBhcmVudEFzT2Zmc2V0UGFyZW50OnQsbWluV2lkdGg6aSx3aWR0aDpzLG1pbkhlaWdodDpyLGhlaWdodDpvLHg6bix5OmF9PXRoaXMuY29uZmlnO3RoaXMub2Zmc2V0UGFyZW50fHx0aGlzLnNldE9mZnNldFBhcmVudCgpO2xldCBsPTAsZD0wO2NvbnN0IGM9Q3ModGhpcy5lbGVtZW50KTtpZihjKXtjb25zdCBlPXRoaXMuZmluZEJvdW5kYXJ5RWxlbWVudCgpLHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSk7aWYobnVsbCE9dC5taW5XaWR0aCl7Y29uc3QgaT1lLm9mZnNldFdpZHRoLXRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aDtkPXBhcnNlSW50KHQubWluV2lkdGgsMTApLWl9aWYobnVsbCE9dC5taW5IZWlnaHQpe2NvbnN0IGk9ZS5vZmZzZXRIZWlnaHQtdGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodDtsPXBhcnNlSW50KHQubWluSGVpZ2h0LDEwKS1pfX1pZih0aGlzLm1pbkhlaWdodD1yfHxsLHRoaXMubWluV2lkdGg9aXx8ZCxzJiZ0aGlzLnNldFdpZHRoKHMpLG8mJnRoaXMuc2V0SGVpZ2h0KG8pLHMmJm98fHRoaXMucmVmcmVzaFNpemUoKSxlKXRoaXMuY2VudGVyKCk7ZWxzZSBpZihufHxhKXRoaXMub2Zmc2V0RWxlbWVudChuLGEpO2Vsc2UgaWYoYyYmdCl7bGV0IGU9dGhpcy5ib3VuZGFyeUVsLHQ9ITA7aWYoZXx8KGU9dGhpcy5maW5kQm91bmRhcnlFbGVtZW50KCksdD0hMSksZSl7Y29uc3QgaT1wYXJzZUZsb2F0KGUuc3R5bGUudG9wKSxzPXBhcnNlRmxvYXQoZS5zdHlsZS5sZWZ0KTt0P3RoaXMub2Zmc2V0RWxlbWVudChpc05hTihzKT8wOnMsaXNOYU4oaSk/MDppKTp0aGlzLnNldFBvc2l0aW9uKHMsaSl9fXRoaXMucG9zaXRpb25lZD0hIXRoaXMub2Zmc2V0UGFyZW50fWlzUG9zaXRpb25lZCgpe3JldHVybiB0aGlzLnBvc2l0aW9uZWR9Z2V0UG9zaXRpb24oKXtyZXR1cm4gdGhpcy5wb3NpdGlvbn1zZXRNb3ZhYmxlKGUsdCl7aWYoIXRoaXMuY29uZmlnLnBvcHVwfHxlPT09dGhpcy5tb3ZhYmxlKXJldHVybjt0aGlzLm1vdmFibGU9ZTtjb25zdCBpPXRoaXMubW92ZUVsZW1lbnREcmFnTGlzdGVuZXJ8fHtlRWxlbWVudDp0LG9uRHJhZ1N0YXJ0OnRoaXMub25Nb3ZlU3RhcnQuYmluZCh0aGlzKSxvbkRyYWdnaW5nOnRoaXMub25Nb3ZlLmJpbmQodGhpcyksb25EcmFnU3RvcDp0aGlzLm9uTW92ZUVuZC5iaW5kKHRoaXMpfTtlPyh0aGlzLmRyYWdTZXJ2aWNlLmFkZERyYWdTb3VyY2UoaSksdGhpcy5tb3ZlRWxlbWVudERyYWdMaXN0ZW5lcj1pKToodGhpcy5kcmFnU2VydmljZS5yZW1vdmVEcmFnU291cmNlKGkpLHRoaXMubW92ZUVsZW1lbnREcmFnTGlzdGVuZXI9dm9pZCAwKX1zZXRSZXNpemFibGUoZSl7aWYodGhpcy5jbGVhclJlc2l6ZUxpc3RlbmVycygpLGU/dGhpcy5hZGRSZXNpemVycygpOnRoaXMucmVtb3ZlUmVzaXplcnMoKSwiYm9vbGVhbiI9PXR5cGVvZiBlKXtpZighMT09PWUpcmV0dXJuO2U9e3RvcExlZnQ6ZSx0b3A6ZSx0b3BSaWdodDplLHJpZ2h0OmUsYm90dG9tUmlnaHQ6ZSxib3R0b206ZSxib3R0b21MZWZ0OmUsbGVmdDplfX1PYmplY3Qua2V5cyhlKS5mb3JFYWNoKHQ9Pntjb25zdCBpPSEhZVt0XSxzPXRoaXMuZ2V0UmVzaXplckVsZW1lbnQodCkscj17ZHJhZ1N0YXJ0UGl4ZWxzOjAsZUVsZW1lbnQ6cyxvbkRyYWdTdGFydDplPT50aGlzLm9uUmVzaXplU3RhcnQoZSx0KSxvbkRyYWdnaW5nOnRoaXMub25SZXNpemUuYmluZCh0aGlzKSxvbkRyYWdTdG9wOmU9PnRoaXMub25SZXNpemVFbmQoZSx0KX07KGl8fCF0aGlzLmlzQWxpdmUoKSYmIWkpJiYoaT8odGhpcy5kcmFnU2VydmljZS5hZGREcmFnU291cmNlKHIpLHRoaXMucmVzaXplTGlzdGVuZXJzLnB1c2gocikscy5zdHlsZS5wb2ludGVyRXZlbnRzPSJhbGwiKTpzLnN0eWxlLnBvaW50ZXJFdmVudHM9Im5vbmUiLHRoaXMucmVzaXphYmxlW3RdPWkpfSl9cmVtb3ZlU2l6ZUZyb21FbCgpe3RoaXMuZWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgiaGVpZ2h0IiksdGhpcy5lbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KCJ3aWR0aCIpLHRoaXMuZWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgiZmxleCIpfXJlc3RvcmVMYXN0U2l6ZSgpe3RoaXMuZWxlbWVudC5zdHlsZS5mbGV4PSIwIDAgYXV0byI7Y29uc3R7aGVpZ2h0OmUsd2lkdGg6dH09dGhpcy5sYXN0U2l6ZTstMSE9PXQmJih0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGg9dCsicHgiKSwtMSE9PWUmJih0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0PWUrInB4Iil9Z2V0SGVpZ2h0KCl7cmV0dXJuIHRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHR9c2V0SGVpZ2h0KGUpe2NvbnN0e3BvcHVwOnR9PXRoaXMuY29uZmlnLGk9dGhpcy5lbGVtZW50O2xldCBzPSExO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmLTEhPT1lLmluZGV4T2YoIiUiKSlBcyhpLGUpLGU9ZHMoaSkscz0hMDtlbHNlIGlmKGU9TWF0aC5tYXgodGhpcy5taW5IZWlnaHQsZSksdGhpcy5wb3NpdGlvbmVkKXtjb25zdCB0PXRoaXMuZ2V0QXZhaWxhYmxlSGVpZ2h0KCk7dCYmZT50JiYoZT10KX10aGlzLmdldEhlaWdodCgpIT09ZSYmKHM/KGkuc3R5bGUubWF4SGVpZ2h0PSJ1bnNldCIsaS5zdHlsZS5taW5IZWlnaHQ9InVuc2V0Iik6dD9BcyhpLGUpOihpLnN0eWxlLmhlaWdodD1lKyJweCIsaS5zdHlsZS5mbGV4PSIwIDAgYXV0byIsdGhpcy5sYXN0U2l6ZS5oZWlnaHQ9Im51bWJlciI9PXR5cGVvZiBlP2U6cGFyc2VGbG9hdChlKSkpfWdldEF2YWlsYWJsZUhlaWdodCgpe2NvbnN0e3BvcHVwOmUsZm9yY2VQb3B1cFBhcmVudEFzT2Zmc2V0UGFyZW50OnR9PXRoaXMuY29uZmlnO3RoaXMucG9zaXRpb25lZHx8dGhpcy5pbml0aWFsaXNlUG9zaXRpb24oKTtjb25zdHtjbGllbnRIZWlnaHQ6aX09dGhpcy5vZmZzZXRQYXJlbnQ7aWYoIWkpcmV0dXJuIG51bGw7Y29uc3Qgcz10aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscj10aGlzLm9mZnNldFBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPWU/dGhpcy5wb3NpdGlvbi55OnMudG9wLG49ZT8wOnIudG9wO2xldCBhPTA7aWYodCl7Y29uc3QgZT10aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudDtpZihlKXtjb25zdHtib3R0b206dH09ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTthPXQtcy5ib3R0b219fXJldHVybiBpK24tby1hfWdldFdpZHRoKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aH1zZXRXaWR0aChlKXtjb25zdCB0PXRoaXMuZWxlbWVudCx7cG9wdXA6aX09dGhpcy5jb25maWc7bGV0IHM9ITE7aWYoInN0cmluZyI9PXR5cGVvZiBlJiYtMSE9PWUuaW5kZXhPZigiJSIpKURzKHQsZSksZT1jcyh0KSxzPSEwO2Vsc2UgaWYodGhpcy5wb3NpdGlvbmVkKXtlPU1hdGgubWF4KHRoaXMubWluV2lkdGgsZSk7Y29uc3R7Y2xpZW50V2lkdGg6dH09dGhpcy5vZmZzZXRQYXJlbnQscz1pP3RoaXMucG9zaXRpb24ueDp0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDt0JiZlK3M+dCYmKGU9dC1zKX10aGlzLmdldFdpZHRoKCkhPT1lJiYocz8odC5zdHlsZS5tYXhXaWR0aD0idW5zZXQiLHQuc3R5bGUubWluV2lkdGg9InVuc2V0Iik6dGhpcy5jb25maWcucG9wdXA/RHModCxlKToodC5zdHlsZS53aWR0aD1lKyJweCIsdC5zdHlsZS5mbGV4PSIgdW5zZXQiLHRoaXMubGFzdFNpemUud2lkdGg9Im51bWJlciI9PXR5cGVvZiBlP2U6cGFyc2VGbG9hdChlKSkpfW9mZnNldEVsZW1lbnQoZT0wLHQ9MCl7Y29uc3R7Zm9yY2VQb3B1cFBhcmVudEFzT2Zmc2V0UGFyZW50Oml9PXRoaXMuY29uZmlnLHM9aT90aGlzLmJvdW5kYXJ5RWw6dGhpcy5lbGVtZW50O3MmJih0aGlzLnBvcHVwU2VydmljZS5wb3NpdGlvblBvcHVwKHtlUG9wdXA6cyxrZWVwV2l0aGluQm91bmRzOiEwLHNraXBPYnNlcnZlcjp0aGlzLm1vdmFibGV8fHRoaXMuaXNSZXNpemFibGUoKSx1cGRhdGVQb3NpdGlvbjooKT0+KHt4OmUseTp0fSl9KSx0aGlzLnNldFBvc2l0aW9uKHBhcnNlRmxvYXQocy5zdHlsZS5sZWZ0KSxwYXJzZUZsb2F0KHMuc3R5bGUudG9wKSkpfWNvbnN0cmFpblNpemVUb0F2YWlsYWJsZUhlaWdodChlKXtpZighdGhpcy5jb25maWcuZm9yY2VQb3B1cFBhcmVudEFzT2Zmc2V0UGFyZW50KXJldHVybjtjb25zdCB0PSgpPT57Y29uc3QgZT10aGlzLmdldEF2YWlsYWJsZUhlaWdodCgpO3RoaXMuZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgibWF4LWhlaWdodCIsZSsicHgiKX07ZT90aGlzLnJlc2l6ZU9ic2VydmVyU3Vic2NyaWJlcj10aGlzLnJlc2l6ZU9ic2VydmVyU2VydmljZS5vYnNlcnZlUmVzaXplKHRoaXMucG9wdXBTZXJ2aWNlLmdldFBvcHVwUGFyZW50KCksdCk6KHRoaXMuZWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgibWF4LWhlaWdodCIpLHRoaXMucmVzaXplT2JzZXJ2ZXJTdWJzY3JpYmVyJiYodGhpcy5yZXNpemVPYnNlcnZlclN1YnNjcmliZXIoKSx0aGlzLnJlc2l6ZU9ic2VydmVyU3Vic2NyaWJlcj12b2lkIDApKX1zZXRQb3NpdGlvbihlLHQpe3RoaXMucG9zaXRpb24ueD1lLHRoaXMucG9zaXRpb24ueT10fXVwZGF0ZURyYWdTdGFydFBvc2l0aW9uKGUsdCl7dGhpcy5kcmFnU3RhcnRQb3NpdGlvbj17eDplLHk6dH19Y2FsY3VsYXRlTW91c2VNb3ZlbWVudChlKXtjb25zdHtlOnQsaXNMZWZ0OmksaXNUb3A6cyxhbnl3aGVyZVdpdGhpbjpyLHRvcEJ1ZmZlcjpvfT1lLG49dC5jbGllbnRYLXRoaXMuZHJhZ1N0YXJ0UG9zaXRpb24ueCxhPXQuY2xpZW50WS10aGlzLmRyYWdTdGFydFBvc2l0aW9uLnk7cmV0dXJue21vdmVtZW50WDp0aGlzLnNob3VsZFNraXBYKHQsISFpLCEhcixuKT8wOm4sbW92ZW1lbnRZOnRoaXMuc2hvdWxkU2tpcFkodCwhIXMsbyxhKT8wOmF9fXNob3VsZFNraXBYKGUsdCxpLHMpe2NvbnN0IHI9dGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89dGhpcy5vZmZzZXRQYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbj10aGlzLmJvdW5kYXJ5RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYT10aGlzLmNvbmZpZy5wb3B1cD90aGlzLnBvc2l0aW9uLng6ci5sZWZ0O2xldCBsPWE8PTAmJm8ubGVmdD49ZS5jbGllbnRYfHxvLnJpZ2h0PD1lLmNsaWVudFgmJm8ucmlnaHQ8PW4ucmlnaHQ7cmV0dXJuISFsfHwobD10P3M8MCYmZS5jbGllbnRYPmErby5sZWZ0fHxzPjAmJmUuY2xpZW50WDxhK28ubGVmdDppP3M8MCYmZS5jbGllbnRYPm4ucmlnaHR8fHM+MCYmZS5jbGllbnRYPGErby5sZWZ0OnM8MCYmZS5jbGllbnRYPm4ucmlnaHR8fHM+MCYmZS5jbGllbnRYPG4ucmlnaHQsbCl9c2hvdWxkU2tpcFkoZSx0LGk9MCxzKXtjb25zdCByPXRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPXRoaXMub2Zmc2V0UGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49dGhpcy5ib3VuZGFyeUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGE9dGhpcy5jb25maWcucG9wdXA/dGhpcy5wb3NpdGlvbi55OnIudG9wO2xldCBsPWE8PTAmJm8udG9wPj1lLmNsaWVudFl8fG8uYm90dG9tPD1lLmNsaWVudFkmJm8uYm90dG9tPD1uLmJvdHRvbTtyZXR1cm4hIWx8fChsPXQ/czwwJiZlLmNsaWVudFk+YStvLnRvcCtpfHxzPjAmJmUuY2xpZW50WTxhK28udG9wOnM8MCYmZS5jbGllbnRZPm4uYm90dG9tfHxzPjAmJmUuY2xpZW50WTxuLmJvdHRvbSxsKX1jcmVhdGVSZXNpemVNYXAoKXtjb25zdCBlPXRoaXMuZWxlbWVudDt0aGlzLnJlc2l6ZXJNYXA9e3RvcExlZnQ6e2VsZW1lbnQ6ZS5xdWVyeVNlbGVjdG9yKCJbcmVmPWVUb3BMZWZ0UmVzaXplcl0iKX0sdG9wOntlbGVtZW50OmUucXVlcnlTZWxlY3RvcigiW3JlZj1lVG9wUmVzaXplcl0iKX0sdG9wUmlnaHQ6e2VsZW1lbnQ6ZS5xdWVyeVNlbGVjdG9yKCJbcmVmPWVUb3BSaWdodFJlc2l6ZXJdIil9LHJpZ2h0OntlbGVtZW50OmUucXVlcnlTZWxlY3RvcigiW3JlZj1lUmlnaHRSZXNpemVyXSIpfSxib3R0b21SaWdodDp7ZWxlbWVudDplLnF1ZXJ5U2VsZWN0b3IoIltyZWY9ZUJvdHRvbVJpZ2h0UmVzaXplcl0iKX0sYm90dG9tOntlbGVtZW50OmUucXVlcnlTZWxlY3RvcigiW3JlZj1lQm90dG9tUmVzaXplcl0iKX0sYm90dG9tTGVmdDp7ZWxlbWVudDplLnF1ZXJ5U2VsZWN0b3IoIltyZWY9ZUJvdHRvbUxlZnRSZXNpemVyXSIpfSxsZWZ0OntlbGVtZW50OmUucXVlcnlTZWxlY3RvcigiW3JlZj1lTGVmdFJlc2l6ZXJdIil9fX1hZGRSZXNpemVycygpe2lmKHRoaXMucmVzaXplcnNBZGRlZClyZXR1cm47Y29uc3QgZT10aGlzLmVsZW1lbnQ7aWYoIWUpcmV0dXJuO2NvbnN0IHQ9KG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZygnPGRpdiBjbGFzcz0iYWctcmVzaXplci13cmFwcGVyIj5cbiAgICAgICAgPGRpdiByZWY9ImVUb3BMZWZ0UmVzaXplciIgY2xhc3M9ImFnLXJlc2l6ZXIgYWctcmVzaXplci10b3BMZWZ0Ij48L2Rpdj5cbiAgICAgICAgPGRpdiByZWY9ImVUb3BSZXNpemVyIiBjbGFzcz0iYWctcmVzaXplciBhZy1yZXNpemVyLXRvcCI+PC9kaXY+XG4gICAgICAgIDxkaXYgcmVmPSJlVG9wUmlnaHRSZXNpemVyIiBjbGFzcz0iYWctcmVzaXplciBhZy1yZXNpemVyLXRvcFJpZ2h0Ij48L2Rpdj5cbiAgICAgICAgPGRpdiByZWY9ImVSaWdodFJlc2l6ZXIiIGNsYXNzPSJhZy1yZXNpemVyIGFnLXJlc2l6ZXItcmlnaHQiPjwvZGl2PlxuICAgICAgICA8ZGl2IHJlZj0iZUJvdHRvbVJpZ2h0UmVzaXplciIgY2xhc3M9ImFnLXJlc2l6ZXIgYWctcmVzaXplci1ib3R0b21SaWdodCI+PC9kaXY+XG4gICAgICAgIDxkaXYgcmVmPSJlQm90dG9tUmVzaXplciIgY2xhc3M9ImFnLXJlc2l6ZXIgYWctcmVzaXplci1ib3R0b20iPjwvZGl2PlxuICAgICAgICA8ZGl2IHJlZj0iZUJvdHRvbUxlZnRSZXNpemVyIiBjbGFzcz0iYWctcmVzaXplciBhZy1yZXNpemVyLWJvdHRvbUxlZnQiPjwvZGl2PlxuICAgICAgICA8ZGl2IHJlZj0iZUxlZnRSZXNpemVyIiBjbGFzcz0iYWctcmVzaXplciBhZy1yZXNpemVyLWxlZnQiPjwvZGl2PlxuICAgIDwvZGl2PicsInRleHQvaHRtbCIpLmJvZHk7ZS5hcHBlbmRDaGlsZCh0LmZpcnN0Q2hpbGQpLHRoaXMuY3JlYXRlUmVzaXplTWFwKCksdGhpcy5yZXNpemVyc0FkZGVkPSEwfXJlbW92ZVJlc2l6ZXJzKCl7dGhpcy5yZXNpemVyTWFwPXZvaWQgMDtjb25zdCBlPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCIuYWctcmVzaXplci13cmFwcGVyIik7ZSYmdGhpcy5lbGVtZW50LnJlbW92ZUNoaWxkKGUpLHRoaXMucmVzaXplcnNBZGRlZD0hMX1nZXRSZXNpemVyRWxlbWVudChlKXtyZXR1cm4gdGhpcy5yZXNpemVyTWFwW2VdLmVsZW1lbnR9b25SZXNpemVTdGFydChlLHQpe3RoaXMuYm91bmRhcnlFbD10aGlzLmZpbmRCb3VuZGFyeUVsZW1lbnQoKSx0aGlzLnBvc2l0aW9uZWR8fHRoaXMuaW5pdGlhbGlzZVBvc2l0aW9uKCksdGhpcy5jdXJyZW50UmVzaXplcj17aXNUb3A6ISF0Lm1hdGNoKC90b3AvaSksaXNSaWdodDohIXQubWF0Y2goL3JpZ2h0L2kpLGlzQm90dG9tOiEhdC5tYXRjaCgvYm90dG9tL2kpLGlzTGVmdDohIXQubWF0Y2goL2xlZnQvaSl9LHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJhZy1yZXNpemluZyIpLHRoaXMucmVzaXplck1hcFt0XS5lbGVtZW50LmNsYXNzTGlzdC5hZGQoImFnLWFjdGl2ZSIpO2NvbnN0e3BvcHVwOmksZm9yY2VQb3B1cFBhcmVudEFzT2Zmc2V0UGFyZW50OnN9PXRoaXMuY29uZmlnO2l8fHN8fHRoaXMuYXBwbHlTaXplVG9TaWJsaW5ncyh0aGlzLmN1cnJlbnRSZXNpemVyLmlzQm90dG9tfHx0aGlzLmN1cnJlbnRSZXNpemVyLmlzVG9wKSx0aGlzLmlzUmVzaXppbmc9ITAsdGhpcy51cGRhdGVEcmFnU3RhcnRQb3NpdGlvbihlLmNsaWVudFgsZS5jbGllbnRZKX1nZXRTaWJsaW5ncygpe2NvbnN0IGU9dGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQ7cmV0dXJuIGU/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS5jaGlsZHJlbikuZmlsdGVyKGU9PiFlLmNsYXNzTGlzdC5jb250YWlucygiYWctaGlkZGVuIikpOm51bGx9Z2V0TWluU2l6ZU9mU2libGluZ3MoKXtjb25zdCBlPXRoaXMuZ2V0U2libGluZ3MoKXx8W107bGV0IHQ9MCxpPTA7Zm9yKGxldCBzPTA7czxlLmxlbmd0aDtzKyspe2NvbnN0IHI9ZVtzXSxvPSEhci5zdHlsZS5mbGV4JiYiMCAwIGF1dG8iIT09ci5zdHlsZS5mbGV4O2lmKHI9PT10aGlzLmVsZW1lbnQpY29udGludWU7bGV0IG49dGhpcy5taW5IZWlnaHR8fDAsYT10aGlzLm1pbldpZHRofHwwO2lmKG8pe2NvbnN0IGU9d2luZG93LmdldENvbXB1dGVkU3R5bGUocik7ZS5taW5IZWlnaHQmJihuPXBhcnNlSW50KGUubWluSGVpZ2h0LDEwKSksZS5taW5XaWR0aCYmKGE9cGFyc2VJbnQoZS5taW5XaWR0aCwxMCkpfWVsc2Ugbj1yLm9mZnNldEhlaWdodCxhPXIub2Zmc2V0V2lkdGg7dCs9bixpKz1hfXJldHVybntoZWlnaHQ6dCx3aWR0aDppfX1hcHBseVNpemVUb1NpYmxpbmdzKGUpe2xldCB0PW51bGw7Y29uc3QgaT10aGlzLmdldFNpYmxpbmdzKCk7aWYoaSl7Zm9yKGxldCBzPTA7czxpLmxlbmd0aDtzKyspe2NvbnN0IHI9aVtzXTtyIT09dCYmKGU/ci5zdHlsZS5oZWlnaHQ9ci5vZmZzZXRIZWlnaHQrInB4IjpyLnN0eWxlLndpZHRoPXIub2Zmc2V0V2lkdGgrInB4IixyLnN0eWxlLmZsZXg9IjAgMCBhdXRvIixyPT09dGhpcy5lbGVtZW50JiYodD1pW3MrMV0pKX10JiYodC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgiaGVpZ2h0IiksdC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgibWluLWhlaWdodCIpLHQuc3R5bGUucmVtb3ZlUHJvcGVydHkoIm1heC1oZWlnaHQiKSx0LnN0eWxlLmZsZXg9IjEgMSBhdXRvIil9fWlzUmVzaXphYmxlKCl7cmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5yZXNpemFibGUpLnNvbWUoZT0+ZSl9b25SZXNpemUoZSl7aWYoIXRoaXMuaXNSZXNpemluZ3x8IXRoaXMuY3VycmVudFJlc2l6ZXIpcmV0dXJuO2NvbnN0e3BvcHVwOnQsZm9yY2VQb3B1cFBhcmVudEFzT2Zmc2V0UGFyZW50Oml9PXRoaXMuY29uZmlnLHtpc1RvcDpzLGlzUmlnaHQ6cixpc0JvdHRvbTpvLGlzTGVmdDpufT10aGlzLmN1cnJlbnRSZXNpemVyLGE9cnx8bixsPW98fHMse21vdmVtZW50WDpkLG1vdmVtZW50WTpjfT10aGlzLmNhbGN1bGF0ZU1vdXNlTW92ZW1lbnQoe2U6ZSxpc0xlZnQ6bixpc1RvcDpzfSksaD10aGlzLnBvc2l0aW9uLngsdT10aGlzLnBvc2l0aW9uLnk7bGV0IHA9MCxnPTA7aWYoYSYmZCl7Y29uc3QgZT1uPy0xOjEsdD10aGlzLmdldFdpZHRoKCksaT10K2QqZTtsZXQgcz0hMTtuJiYocD10LWksKGgrcDw9MHx8aTw9dGhpcy5taW5XaWR0aCkmJihzPSEwLHA9MCkpLHN8fHRoaXMuc2V0V2lkdGgoaSl9aWYobCYmYyl7Y29uc3QgZT1zPy0xOjEsdD10aGlzLmdldEhlaWdodCgpLGk9dCtjKmU7bGV0IHI9ITE7cz8oZz10LWksKHUrZzw9MHx8aTw9dGhpcy5taW5IZWlnaHQpJiYocj0hMCxnPTApKTohdGhpcy5jb25maWcucG9wdXAmJiF0aGlzLmNvbmZpZy5mb3JjZVBvcHVwUGFyZW50QXNPZmZzZXRQYXJlbnQmJnQ8aSYmdGhpcy5nZXRNaW5TaXplT2ZTaWJsaW5ncygpLmhlaWdodCtpPnRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50Lm9mZnNldEhlaWdodCYmKHI9ITApLHJ8fHRoaXMuc2V0SGVpZ2h0KGkpfXRoaXMudXBkYXRlRHJhZ1N0YXJ0UG9zaXRpb24oZS5jbGllbnRYLGUuY2xpZW50WSksKCh0fHxpKSYmcHx8ZykmJnRoaXMub2Zmc2V0RWxlbWVudChoK3AsdStnKX1vblJlc2l6ZUVuZChlLHQpe3RoaXMuaXNSZXNpemluZz0hMSx0aGlzLmN1cnJlbnRSZXNpemVyPW51bGwsdGhpcy5ib3VuZGFyeUVsPW51bGw7dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImFnLXJlc2l6aW5nIiksdGhpcy5yZXNpemVyTWFwW3RdLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgiYWctYWN0aXZlIiksdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiJyZXNpemUifSl9cmVmcmVzaFNpemUoKXtjb25zdCBlPXRoaXMuZWxlbWVudDt0aGlzLmNvbmZpZy5wb3B1cCYmKHRoaXMuY29uZmlnLndpZHRofHx0aGlzLnNldFdpZHRoKGUub2Zmc2V0V2lkdGgpLHRoaXMuY29uZmlnLmhlaWdodHx8dGhpcy5zZXRIZWlnaHQoZS5vZmZzZXRIZWlnaHQpKX1vbk1vdmVTdGFydChlKXt0aGlzLmJvdW5kYXJ5RWw9dGhpcy5maW5kQm91bmRhcnlFbGVtZW50KCksdGhpcy5wb3NpdGlvbmVkfHx0aGlzLmluaXRpYWxpc2VQb3NpdGlvbigpLHRoaXMuaXNNb3Zpbmc9ITAsdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoImFnLW1vdmluZyIpLHRoaXMudXBkYXRlRHJhZ1N0YXJ0UG9zaXRpb24oZS5jbGllbnRYLGUuY2xpZW50WSl9b25Nb3ZlKGUpe2lmKCF0aGlzLmlzTW92aW5nKXJldHVybjtjb25zdHt4OnQseTppfT10aGlzLnBvc2l0aW9uO2xldCBzO3RoaXMuY29uZmlnLmNhbGN1bGF0ZVRvcEJ1ZmZlciYmKHM9dGhpcy5jb25maWcuY2FsY3VsYXRlVG9wQnVmZmVyKCkpO2NvbnN0e21vdmVtZW50WDpyLG1vdmVtZW50WTpvfT10aGlzLmNhbGN1bGF0ZU1vdXNlTW92ZW1lbnQoe2U6ZSxpc1RvcDohMCxhbnl3aGVyZVdpdGhpbjohMCx0b3BCdWZmZXI6c30pO3RoaXMub2Zmc2V0RWxlbWVudCh0K3IsaStvKSx0aGlzLnVwZGF0ZURyYWdTdGFydFBvc2l0aW9uKGUuY2xpZW50WCxlLmNsaWVudFkpfW9uTW92ZUVuZCgpe3RoaXMuaXNNb3Zpbmc9ITEsdGhpcy5ib3VuZGFyeUVsPW51bGwsdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImFnLW1vdmluZyIpfXNldE9mZnNldFBhcmVudCgpe3RoaXMuY29uZmlnLmZvcmNlUG9wdXBQYXJlbnRBc09mZnNldFBhcmVudD90aGlzLm9mZnNldFBhcmVudD10aGlzLnBvcHVwU2VydmljZS5nZXRQb3B1cFBhcmVudCgpOnRoaXMub2Zmc2V0UGFyZW50PXRoaXMuZWxlbWVudC5vZmZzZXRQYXJlbnR9ZmluZEJvdW5kYXJ5RWxlbWVudCgpe2xldCBlPXRoaXMuZWxlbWVudDtmb3IoO2U7KXtpZigic3RhdGljIiE9PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUpLnBvc2l0aW9uKXJldHVybiBlO2U9ZS5wYXJlbnRFbGVtZW50fXJldHVybiB0aGlzLmVsZW1lbnR9Y2xlYXJSZXNpemVMaXN0ZW5lcnMoKXtmb3IoO3RoaXMucmVzaXplTGlzdGVuZXJzLmxlbmd0aDspe2NvbnN0IGU9dGhpcy5yZXNpemVMaXN0ZW5lcnMucG9wKCk7dGhpcy5kcmFnU2VydmljZS5yZW1vdmVEcmFnU291cmNlKGUpfX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLHRoaXMubW92ZUVsZW1lbnREcmFnTGlzdGVuZXImJnRoaXMuZHJhZ1NlcnZpY2UucmVtb3ZlRHJhZ1NvdXJjZSh0aGlzLm1vdmVFbGVtZW50RHJhZ0xpc3RlbmVyKSx0aGlzLmNvbnN0cmFpblNpemVUb0F2YWlsYWJsZUhlaWdodCghMSksdGhpcy5jbGVhclJlc2l6ZUxpc3RlbmVycygpLHRoaXMucmVtb3ZlUmVzaXplcnMoKX19d3IoW2NlKCJwb3B1cFNlcnZpY2UiKV0sYnIucHJvdG90eXBlLCJwb3B1cFNlcnZpY2UiLHZvaWQgMCksd3IoW2NlKCJyZXNpemVPYnNlcnZlclNlcnZpY2UiKV0sYnIucHJvdG90eXBlLCJyZXNpemVPYnNlcnZlclNlcnZpY2UiLHZvaWQgMCksd3IoW2NlKCJkcmFnU2VydmljZSIpXSxici5wcm90b3R5cGUsImRyYWdTZXJ2aWNlIix2b2lkIDApO3ZhciBFcj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBSciBleHRlbmRzIGNye2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5maWx0ZXJOYW1lS2V5PWUsdGhpcy5hcHBseUFjdGl2ZT0hMSx0aGlzLmhpZGVQb3B1cD1udWxsLHRoaXMuZGVib3VuY2VQZW5kaW5nPSExLHRoaXMuYXBwbGllZE1vZGVsPW51bGwsdGhpcy5idXR0b25MaXN0ZW5lcnM9W119cG9zdENvbnN0cnVjdCgpe3RoaXMucmVzZXRUZW1wbGF0ZSgpLHRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IFNyKHRoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLHtoYW5kbGVLZXlEb3duOnRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpfSkpLHRoaXMucG9zaXRpb25hYmxlRmVhdHVyZT1uZXcgYnIodGhpcy5nZXRQb3NpdGlvbmFibGVFbGVtZW50KCkse2ZvcmNlUG9wdXBQYXJlbnRBc09mZnNldFBhcmVudDohMH0pLHRoaXMuY3JlYXRlQmVhbih0aGlzLnBvc2l0aW9uYWJsZUZlYXR1cmUpfWhhbmRsZUtleURvd24oZSl7fWdldEZpbHRlclRpdGxlKCl7cmV0dXJuIHRoaXMudHJhbnNsYXRlKHRoaXMuZmlsdGVyTmFtZUtleSl9aXNGaWx0ZXJBY3RpdmUoKXtyZXR1cm4hIXRoaXMuYXBwbGllZE1vZGVsfXJlc2V0VGVtcGxhdGUoZSl7bGV0IHQ9dGhpcy5nZXRHdWkoKTt0JiZ0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInN1Ym1pdCIsdGhpcy5vbkZvcm1TdWJtaXQpO2NvbnN0IGk9YFxuICAgICAgICAgICAgPGZvcm0gY2xhc3M9ImFnLWZpbHRlci13cmFwcGVyIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1maWx0ZXItYm9keS13cmFwcGVyIGFnLSR7dGhpcy5nZXRDc3NJZGVudGlmaWVyKCl9LWJvZHktd3JhcHBlciIgcmVmPSJlRmlsdGVyQm9keSI+XG4gICAgICAgICAgICAgICAgICAgICR7dGhpcy5jcmVhdGVCb2R5VGVtcGxhdGUoKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZm9ybT5gO3RoaXMuc2V0VGVtcGxhdGUoaSxlKSx0PXRoaXMuZ2V0R3VpKCksdCYmdC5hZGRFdmVudExpc3RlbmVyKCJzdWJtaXQiLHRoaXMub25Gb3JtU3VibWl0KX1pc1JlYWRPbmx5KCl7cmV0dXJuISF0aGlzLnByb3ZpZGVkRmlsdGVyUGFyYW1zLnJlYWRPbmx5fWluaXQoZSl7dGhpcy5zZXRQYXJhbXMoZSksdGhpcy5yZXNldFVpVG9EZWZhdWx0cyghMCkudGhlbigoKT0+e3RoaXMudXBkYXRlVWlWaXNpYmlsaXR5KCksdGhpcy5zZXR1cE9uQnRBcHBseURlYm91bmNlKCl9KX1zZXRQYXJhbXMoZSl7dGhpcy5wcm92aWRlZEZpbHRlclBhcmFtcz1lLHRoaXMuYXBwbHlBY3RpdmU9UnIuaXNVc2VBcHBseUJ1dHRvbihlKSx0aGlzLnJlc2V0QnV0dG9uc1BhbmVsKCl9dXBkYXRlUGFyYW1zKGUpe3RoaXMucHJvdmlkZWRGaWx0ZXJQYXJhbXM9ZSx0aGlzLmFwcGx5QWN0aXZlPVJyLmlzVXNlQXBwbHlCdXR0b24oZSksdGhpcy5yZXNldFVpVG9BY3RpdmVNb2RlbCh0aGlzLmdldE1vZGVsKCksKCk9Pnt0aGlzLnVwZGF0ZVVpVmlzaWJpbGl0eSgpLHRoaXMuc2V0dXBPbkJ0QXBwbHlEZWJvdW5jZSgpfSl9cmVzZXRCdXR0b25zUGFuZWwoKXtjb25zdHtidXR0b25zOmV9PXRoaXMucHJvdmlkZWRGaWx0ZXJQYXJhbXMsdD1lJiZlLmxlbmd0aD4wJiYhdGhpcy5pc1JlYWRPbmx5KCk7aWYodGhpcy5lQnV0dG9uc1BhbmVsPyhtcyh0aGlzLmVCdXR0b25zUGFuZWwpLHRoaXMuYnV0dG9uTGlzdGVuZXJzLmZvckVhY2goZT0+bnVsbD09ZT92b2lkIDA6ZSgpKSx0aGlzLmJ1dHRvbkxpc3RlbmVycz1bXSk6dCYmKHRoaXMuZUJ1dHRvbnNQYW5lbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLmVCdXR0b25zUGFuZWwuY2xhc3NMaXN0LmFkZCgiYWctZmlsdGVyLWFwcGx5LXBhbmVsIikpLCF0KXJldHVybiB2b2lkKHRoaXMuZUJ1dHRvbnNQYW5lbCYmZnModGhpcy5lQnV0dG9uc1BhbmVsKSk7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkscz1lPT57bGV0IHQscztzd2l0Y2goZSl7Y2FzZSJhcHBseSI6dD10aGlzLnRyYW5zbGF0ZSgiYXBwbHlGaWx0ZXIiKSxzPWU9PnRoaXMub25CdEFwcGx5KCExLCExLGUpO2JyZWFrO2Nhc2UiY2xlYXIiOnQ9dGhpcy50cmFuc2xhdGUoImNsZWFyRmlsdGVyIikscz0oKT0+dGhpcy5vbkJ0Q2xlYXIoKTticmVhaztjYXNlInJlc2V0Ijp0PXRoaXMudHJhbnNsYXRlKCJyZXNldEZpbHRlciIpLHM9KCk9PnRoaXMub25CdFJlc2V0KCk7YnJlYWs7Y2FzZSJjYW5jZWwiOnQ9dGhpcy50cmFuc2xhdGUoImNhbmNlbEZpbHRlciIpLHM9ZT0+e3RoaXMub25CdENhbmNlbChlKX07YnJlYWs7ZGVmYXVsdDpyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IFVua25vd24gYnV0dG9uIHR5cGUgc3BlY2lmaWVkIil9Y29uc3Qgcj15cyhgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB0eXBlPSIkeyJhcHBseSI9PT1lPyJzdWJtaXQiOiJidXR0b24ifSJcbiAgICAgICAgICAgICAgICAgICAgcmVmPSIke2V9RmlsdGVyQnV0dG9uIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz0iYWctYnV0dG9uIGFnLXN0YW5kYXJkLWJ1dHRvbiBhZy1maWx0ZXItYXBwbHktcGFuZWwtYnV0dG9uIlxuICAgICAgICAgICAgICAgID4ke3R9XG4gICAgICAgICAgICAgICAgPC9idXR0b24+YCk7dGhpcy5idXR0b25MaXN0ZW5lcnMucHVzaCh0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihyLCJjbGljayIscykpLGkuYXBwZW5kKHIpfTtacyhlKS5mb3JFYWNoKGU9PnMoZSkpLHRoaXMuZUJ1dHRvbnNQYW5lbC5hcHBlbmQoaSksdGhpcy5nZXRHdWkoKS5hcHBlbmRDaGlsZCh0aGlzLmVCdXR0b25zUGFuZWwpfWdldERlZmF1bHREZWJvdW5jZU1zKCl7cmV0dXJuIDB9c2V0dXBPbkJ0QXBwbHlEZWJvdW5jZSgpe2NvbnN0IGU9UnIuZ2V0RGVib3VuY2VNcyh0aGlzLnByb3ZpZGVkRmlsdGVyUGFyYW1zLHRoaXMuZ2V0RGVmYXVsdERlYm91bmNlTXMoKSksdD1RKHRoaXMuY2hlY2tBcHBseURlYm91bmNlLmJpbmQodGhpcyksZSk7dGhpcy5vbkJ0QXBwbHlEZWJvdW5jZT0oKT0+e3RoaXMuZGVib3VuY2VQZW5kaW5nPSEwLHQoKX19Y2hlY2tBcHBseURlYm91bmNlKCl7dGhpcy5kZWJvdW5jZVBlbmRpbmcmJih0aGlzLmRlYm91bmNlUGVuZGluZz0hMSx0aGlzLm9uQnRBcHBseSgpKX1nZXRNb2RlbCgpe3JldHVybiB0aGlzLmFwcGxpZWRNb2RlbD90aGlzLmFwcGxpZWRNb2RlbDpudWxsfXNldE1vZGVsKGUpe3JldHVybihudWxsIT1lP3RoaXMuc2V0TW9kZWxJbnRvVWkoZSk6dGhpcy5yZXNldFVpVG9EZWZhdWx0cygpKS50aGVuKCgpPT57dGhpcy51cGRhdGVVaVZpc2liaWxpdHkoKSx0aGlzLmFwcGx5TW9kZWwoImFwaSIpfSl9b25CdENhbmNlbChlKXt0aGlzLnJlc2V0VWlUb0FjdGl2ZU1vZGVsKHRoaXMuZ2V0TW9kZWwoKSwoKT0+e3RoaXMuaGFuZGxlQ2FuY2VsRW5kKGUpfSl9aGFuZGxlQ2FuY2VsRW5kKGUpe3RoaXMucHJvdmlkZWRGaWx0ZXJQYXJhbXMuY2xvc2VPbkFwcGx5JiZ0aGlzLmNsb3NlKGUpfXJlc2V0VWlUb0FjdGl2ZU1vZGVsKGUsdCl7Y29uc3QgaT0oKT0+e3RoaXMub25VaUNoYW5nZWQoITEsInByZXZlbnQiKSxudWxsPT10fHx0KCl9O251bGwhPWU/dGhpcy5zZXRNb2RlbEludG9VaShlKS50aGVuKGkpOnRoaXMucmVzZXRVaVRvRGVmYXVsdHMoKS50aGVuKGkpfW9uQnRDbGVhcigpe3RoaXMucmVzZXRVaVRvRGVmYXVsdHMoKS50aGVuKCgpPT50aGlzLm9uVWlDaGFuZ2VkKCkpfW9uQnRSZXNldCgpe3RoaXMub25CdENsZWFyKCksdGhpcy5vbkJ0QXBwbHkoKX1hcHBseU1vZGVsKGU9ImFwaSIpe2NvbnN0IHQ9dGhpcy5nZXRNb2RlbEZyb21VaSgpO2lmKCF0aGlzLmlzTW9kZWxWYWxpZCh0KSlyZXR1cm4hMTtjb25zdCBpPXRoaXMuYXBwbGllZE1vZGVsO3JldHVybiB0aGlzLmFwcGxpZWRNb2RlbD10LCF0aGlzLmFyZU1vZGVsc0VxdWFsKGksdCl9aXNNb2RlbFZhbGlkKGUpe3JldHVybiEwfW9uRm9ybVN1Ym1pdChlKXtlLnByZXZlbnREZWZhdWx0KCl9b25CdEFwcGx5KGU9ITEsdD0hMSxpKXtpZihpJiZpLnByZXZlbnREZWZhdWx0KCksdGhpcy5hcHBseU1vZGVsKHQ/InJvd0RhdGFVcGRhdGVkIjoidWkiKSl7Y29uc3QgaT0iY29sdW1uRmlsdGVyIjt0aGlzLnByb3ZpZGVkRmlsdGVyUGFyYW1zLmZpbHRlckNoYW5nZWRDYWxsYmFjayh7YWZ0ZXJGbG9hdGluZ0ZpbHRlcjplLGFmdGVyRGF0YUNoYW5nZTp0LHNvdXJjZTppfSl9Y29uc3R7Y2xvc2VPbkFwcGx5OnN9PXRoaXMucHJvdmlkZWRGaWx0ZXJQYXJhbXM7cyYmdGhpcy5hcHBseUFjdGl2ZSYmIWUmJiF0JiZ0aGlzLmNsb3NlKGkpfW9uTmV3Um93c0xvYWRlZCgpe31jbG9zZShlKXtpZighdGhpcy5oaWRlUG9wdXApcmV0dXJuO2NvbnN0IHQ9ZSxpPXQmJnQua2V5O2xldCBzOyJFbnRlciIhPT1pJiYiU3BhY2UiIT09aXx8KHM9e2tleWJvYXJkRXZlbnQ6dH0pLHRoaXMuaGlkZVBvcHVwKHMpLHRoaXMuaGlkZVBvcHVwPW51bGx9b25VaUNoYW5nZWQoZT0hMSx0KXtpZih0aGlzLnVwZGF0ZVVpVmlzaWJpbGl0eSgpLHRoaXMucHJvdmlkZWRGaWx0ZXJQYXJhbXMuZmlsdGVyTW9kaWZpZWRDYWxsYmFjaygpLHRoaXMuYXBwbHlBY3RpdmUmJiF0aGlzLmlzUmVhZE9ubHkoKSl7Y29uc3QgZT10aGlzLmlzTW9kZWxWYWxpZCh0aGlzLmdldE1vZGVsRnJvbVVpKCkpLHQ9dGhpcy5nZXRSZWZFbGVtZW50KCJhcHBseUZpbHRlckJ1dHRvbiIpO3QmJnJzKHQsIWUpfWUmJiF0fHwiaW1tZWRpYXRlbHkiPT09dD90aGlzLm9uQnRBcHBseShlKToodGhpcy5hcHBseUFjdGl2ZXx8dCkmJiJkZWJvdW5jZSIhPT10fHx0aGlzLm9uQnRBcHBseURlYm91bmNlKCl9YWZ0ZXJHdWlBdHRhY2hlZChlKXtlJiYodGhpcy5oaWRlUG9wdXA9ZS5oaWRlUG9wdXApLHRoaXMucmVmcmVzaEZpbHRlclJlc2l6ZXIobnVsbD09ZT92b2lkIDA6ZS5jb250YWluZXIpfXJlZnJlc2hGaWx0ZXJSZXNpemVyKGUpe2lmKCF0aGlzLnBvc2l0aW9uYWJsZUZlYXR1cmV8fCJ0b29sUGFuZWwiPT09ZSlyZXR1cm47Y29uc3QgdD0iZmxvYXRpbmdGaWx0ZXIiPT09ZXx8ImNvbHVtbkZpbHRlciI9PT1lLHtwb3NpdGlvbmFibGVGZWF0dXJlOmksZ3JpZE9wdGlvbnNTZXJ2aWNlOnN9PXRoaXM7dD8oaS5yZXN0b3JlTGFzdFNpemUoKSxpLnNldFJlc2l6YWJsZShzLmdldCgiZW5hYmxlUnRsIik/e2JvdHRvbTohMCxib3R0b21MZWZ0OiEwLGxlZnQ6ITB9Ontib3R0b206ITAsYm90dG9tUmlnaHQ6ITAscmlnaHQ6ITB9KSk6KHRoaXMucG9zaXRpb25hYmxlRmVhdHVyZS5yZW1vdmVTaXplRnJvbUVsKCksdGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlLnNldFJlc2l6YWJsZSghMSkpLHRoaXMucG9zaXRpb25hYmxlRmVhdHVyZS5jb25zdHJhaW5TaXplVG9BdmFpbGFibGVIZWlnaHQoITApfWFmdGVyR3VpRGV0YWNoZWQoKXt0aGlzLmNoZWNrQXBwbHlEZWJvdW5jZSgpLHRoaXMucG9zaXRpb25hYmxlRmVhdHVyZSYmdGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlLmNvbnN0cmFpblNpemVUb0F2YWlsYWJsZUhlaWdodCghMSl9c3RhdGljIGdldERlYm91bmNlTXMoZSx0KXtyZXR1cm4gUnIuaXNVc2VBcHBseUJ1dHRvbihlKT8obnVsbCE9ZS5kZWJvdW5jZU1zJiZjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGRlYm91bmNlTXMgaXMgaWdub3JlZCB3aGVuIGFwcGx5IGJ1dHRvbiBpcyBwcmVzZW50IiksMCk6bnVsbCE9ZS5kZWJvdW5jZU1zP2UuZGVib3VuY2VNczp0fXN0YXRpYyBpc1VzZUFwcGx5QnV0dG9uKGUpe3JldHVybiEhZS5idXR0b25zJiZlLmJ1dHRvbnMuaW5kZXhPZigiYXBwbHkiKT49MH1yZWZyZXNoKGUpe3JldHVybiB0aGlzLnByb3ZpZGVkRmlsdGVyUGFyYW1zPWUsITB9ZGVzdHJveSgpe2NvbnN0IGU9dGhpcy5nZXRHdWkoKTtlJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIoInN1Ym1pdCIsdGhpcy5vbkZvcm1TdWJtaXQpLHRoaXMuaGlkZVBvcHVwPW51bGwsdGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlJiYodGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlPXRoaXMuZGVzdHJveUJlYW4odGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlKSksdGhpcy5hcHBsaWVkTW9kZWw9bnVsbCxzdXBlci5kZXN0cm95KCl9dHJhbnNsYXRlKGUpe3JldHVybiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKShlLENyW2VdKX1nZXRDZWxsVmFsdWUoZSl7cmV0dXJuIHRoaXMucHJvdmlkZWRGaWx0ZXJQYXJhbXMuZ2V0VmFsdWUoZSl9Z2V0UG9zaXRpb25hYmxlRWxlbWVudCgpe3JldHVybiB0aGlzLmVGaWx0ZXJCb2R5fX1FcihbY2UoInJvd01vZGVsIildLFJyLnByb3RvdHlwZSwicm93TW9kZWwiLHZvaWQgMCksRXIoW3VyKCJlRmlsdGVyQm9keSIpXSxSci5wcm90b3R5cGUsImVGaWx0ZXJCb2R5Iix2b2lkIDApLEVyKFthZV0sUnIucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgeHI9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgVHIgZXh0ZW5kcyBjcntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKHQpLHRoaXMubGFiZWxTZXBhcmF0b3I9IiIsdGhpcy5sYWJlbEFsaWdubWVudD0ibGVmdCIsdGhpcy5kaXNhYmxlZD0hMSx0aGlzLmxhYmVsPSIiLHRoaXMuY29uZmlnPWV8fHt9fXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmFkZENzc0NsYXNzKCJhZy1sYWJlbGVkIiksdGhpcy5lTGFiZWwuY2xhc3NMaXN0LmFkZCgiYWctbGFiZWwiKTtjb25zdHtsYWJlbFNlcGFyYXRvcjplLGxhYmVsOnQsbGFiZWxXaWR0aDppLGxhYmVsQWxpZ25tZW50OnN9PXRoaXMuY29uZmlnO251bGwhPWUmJnRoaXMuc2V0TGFiZWxTZXBhcmF0b3IoZSksbnVsbCE9dCYmdGhpcy5zZXRMYWJlbCh0KSxudWxsIT1pJiZ0aGlzLnNldExhYmVsV2lkdGgoaSksdGhpcy5zZXRMYWJlbEFsaWdubWVudChzfHx0aGlzLmxhYmVsQWxpZ25tZW50KSx0aGlzLnJlZnJlc2hMYWJlbCgpfXJlZnJlc2hMYWJlbCgpe21zKHRoaXMuZUxhYmVsKSwic3RyaW5nIj09dHlwZW9mIHRoaXMubGFiZWw/dGhpcy5lTGFiZWwuaW5uZXJUZXh0PXRoaXMubGFiZWwrdGhpcy5sYWJlbFNlcGFyYXRvcjp0aGlzLmxhYmVsJiZ0aGlzLmVMYWJlbC5hcHBlbmRDaGlsZCh0aGlzLmxhYmVsKSwiIj09PXRoaXMubGFiZWw/KGlzKHRoaXMuZUxhYmVsLCExKSxYdCh0aGlzLmVMYWJlbCwicHJlc2VudGF0aW9uIikpOihpcyh0aGlzLmVMYWJlbCwhMCksWHQodGhpcy5lTGFiZWwsbnVsbCkpfXNldExhYmVsU2VwYXJhdG9yKGUpe3JldHVybiB0aGlzLmxhYmVsU2VwYXJhdG9yPT09ZXx8KHRoaXMubGFiZWxTZXBhcmF0b3I9ZSxudWxsIT10aGlzLmxhYmVsJiZ0aGlzLnJlZnJlc2hMYWJlbCgpKSx0aGlzfWdldExhYmVsSWQoKXtyZXR1cm4gdGhpcy5lTGFiZWwuaWQ9dGhpcy5lTGFiZWwuaWR8fGBhZy0ke3RoaXMuZ2V0Q29tcElkKCl9LWxhYmVsYCx0aGlzLmVMYWJlbC5pZH1nZXRMYWJlbCgpe3JldHVybiB0aGlzLmxhYmVsfXNldExhYmVsKGUpe3JldHVybiB0aGlzLmxhYmVsPT09ZXx8KHRoaXMubGFiZWw9ZSx0aGlzLnJlZnJlc2hMYWJlbCgpKSx0aGlzfXNldExhYmVsQWxpZ25tZW50KGUpe2NvbnN0IHQ9dGhpcy5nZXRHdWkoKS5jbGFzc0xpc3Q7cmV0dXJuIHQudG9nZ2xlKCJhZy1sYWJlbC1hbGlnbi1sZWZ0IiwibGVmdCI9PT1lKSx0LnRvZ2dsZSgiYWctbGFiZWwtYWxpZ24tcmlnaHQiLCJyaWdodCI9PT1lKSx0LnRvZ2dsZSgiYWctbGFiZWwtYWxpZ24tdG9wIiwidG9wIj09PWUpLHRoaXN9c2V0TGFiZWxFbGxpcHNpcyhlKXtyZXR1cm4gdGhpcy5lTGFiZWwuY2xhc3NMaXN0LnRvZ2dsZSgiYWctbGFiZWwtZWxsaXBzaXMiLGUpLHRoaXN9c2V0TGFiZWxXaWR0aChlKXtyZXR1cm4gbnVsbD09dGhpcy5sYWJlbHx8VHModGhpcy5lTGFiZWwsZSksdGhpc31zZXREaXNhYmxlZChlKXtlPSEhZTtjb25zdCB0PXRoaXMuZ2V0R3VpKCk7cmV0dXJuIHJzKHQsZSksdC5jbGFzc0xpc3QudG9nZ2xlKCJhZy1kaXNhYmxlZCIsZSksdGhpcy5kaXNhYmxlZD1lLHRoaXN9aXNEaXNhYmxlZCgpe3JldHVybiEhdGhpcy5kaXNhYmxlZH19eHIoW2FlXSxUci5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO2NsYXNzIERyIGV4dGVuZHMgVHJ7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKGUsdCksdGhpcy5jbGFzc05hbWU9aX1wb3N0Q29uc3RydWN0KCl7c3VwZXIucG9zdENvbnN0cnVjdCgpLHRoaXMuY2xhc3NOYW1lJiZ0aGlzLmFkZENzc0NsYXNzKHRoaXMuY2xhc3NOYW1lKSx0aGlzLnJlZnJlc2hBcmlhTGFiZWxsZWRCeSgpfXJlZnJlc2hBcmlhTGFiZWxsZWRCeSgpe2NvbnN0IGU9dGhpcy5nZXRBcmlhRWxlbWVudCgpLHQ9dGhpcy5nZXRMYWJlbElkKCk7bnVsbCE9PUp0KGUpP3RpKGUsIiIpOnRpKGUsbnVsbCE9dD90OiIiKX1zZXRBcmlhTGFiZWwoZSl7cmV0dXJuIGVpKHRoaXMuZ2V0QXJpYUVsZW1lbnQoKSxlKSx0aGlzLnJlZnJlc2hBcmlhTGFiZWxsZWRCeSgpLHRoaXN9b25WYWx1ZUNoYW5nZShlKXtyZXR1cm4gdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcyxsdC5FVkVOVF9GSUVMRF9WQUxVRV9DSEFOR0VELCgpPT5lKHRoaXMuZ2V0VmFsdWUoKSkpLHRoaXN9Z2V0V2lkdGgoKXtyZXR1cm4gdGhpcy5nZXRHdWkoKS5jbGllbnRXaWR0aH1zZXRXaWR0aChlKXtyZXR1cm4gRHModGhpcy5nZXRHdWkoKSxlKSx0aGlzfWdldFByZXZpb3VzVmFsdWUoKXtyZXR1cm4gdGhpcy5wcmV2aW91c1ZhbHVlfWdldFZhbHVlKCl7cmV0dXJuIHRoaXMudmFsdWV9c2V0VmFsdWUoZSx0KXtyZXR1cm4gdGhpcy52YWx1ZT09PWV8fCh0aGlzLnByZXZpb3VzVmFsdWU9dGhpcy52YWx1ZSx0aGlzLnZhbHVlPWUsdHx8dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOmx0LkVWRU5UX0ZJRUxEX1ZBTFVFX0NIQU5HRUR9KSksdGhpc319dmFyIE9yPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIEFyIGV4dGVuZHMgRHJ7Y29uc3RydWN0b3IoZSl7aWYoc3VwZXIoZSwobnVsbD09ZT92b2lkIDA6ZS50ZW1wbGF0ZSl8fCdcbiAgICA8ZGl2IGNsYXNzPSJhZy1waWNrZXItZmllbGQiIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgIDxkaXYgcmVmPSJlTGFiZWwiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiByZWY9ImVXcmFwcGVyIiBjbGFzcz0iYWctd3JhcHBlciBhZy1waWNrZXItZmllbGQtd3JhcHBlciBhZy1waWNrZXItY29sbGFwc2VkIj5cbiAgICAgICAgICAgIDxkaXYgcmVmPSJlRGlzcGxheUZpZWxkIiBjbGFzcz0iYWctcGlja2VyLWZpZWxkLWRpc3BsYXkiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiByZWY9ImVJY29uIiBjbGFzcz0iYWctcGlja2VyLWZpZWxkLWljb24iIGFyaWEtaGlkZGVuPSJ0cnVlIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+JyxudWxsPT1lP3ZvaWQgMDplLmNsYXNzTmFtZSksdGhpcy5pc1BpY2tlckRpc3BsYXllZD0hMSx0aGlzLnNraXBDbGljaz0hMSx0aGlzLnBpY2tlckdhcD00LHRoaXMuaGlkZUN1cnJlbnRQaWNrZXI9bnVsbCx0aGlzLmFyaWFSb2xlPW51bGw9PWU/dm9pZCAwOmUuYXJpYVJvbGUsdGhpcy5vblBpY2tlckZvY3VzSW49dGhpcy5vblBpY2tlckZvY3VzSW4uYmluZCh0aGlzKSx0aGlzLm9uUGlja2VyRm9jdXNPdXQ9dGhpcy5vblBpY2tlckZvY3VzT3V0LmJpbmQodGhpcyksIWUpcmV0dXJuO2NvbnN0e3BpY2tlckdhcDp0LG1heFBpY2tlckhlaWdodDppLHZhcmlhYmxlV2lkdGg6cyxtaW5QaWNrZXJXaWR0aDpyLG1heFBpY2tlcldpZHRoOm99PWU7bnVsbCE9dCYmKHRoaXMucGlja2VyR2FwPXQpLHRoaXMudmFyaWFibGVXaWR0aD0hIXMsbnVsbCE9aSYmdGhpcy5zZXRQaWNrZXJNYXhIZWlnaHQoaSksbnVsbCE9ciYmdGhpcy5zZXRQaWNrZXJNaW5XaWR0aChyKSxudWxsIT1vJiZ0aGlzLnNldFBpY2tlck1heFdpZHRoKG8pfXBvc3RDb25zdHJ1Y3QoKXtzdXBlci5wb3N0Q29uc3RydWN0KCksdGhpcy5zZXR1cEFyaWEoKTtjb25zdCBlPWBhZy0ke3RoaXMuZ2V0Q29tcElkKCl9LWRpc3BsYXlgO3RoaXMuZURpc3BsYXlGaWVsZC5zZXRBdHRyaWJ1dGUoImlkIixlKTtjb25zdCB0PXRoaXMuZ2V0QXJpYUVsZW1lbnQoKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0LCJrZXlkb3duIix0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVMYWJlbCwibW91c2Vkb3duIix0aGlzLm9uTGFiZWxPcldyYXBwZXJNb3VzZURvd24uYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lV3JhcHBlciwibW91c2Vkb3duIix0aGlzLm9uTGFiZWxPcldyYXBwZXJNb3VzZURvd24uYmluZCh0aGlzKSk7Y29uc3R7cGlja2VySWNvbjppfT10aGlzLmNvbmZpZztpZihpKXtjb25zdCBlPVdzKGksdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UpO2UmJnRoaXMuZUljb24uYXBwZW5kQ2hpbGQoZSl9fXNldHVwQXJpYSgpe2NvbnN0IGU9dGhpcy5nZXRBcmlhRWxlbWVudCgpO2Uuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0YWJJbmRleCIpLnRvU3RyaW5nKCkpLGNpKGUsITEpLHRoaXMuYXJpYVJvbGUmJlh0KGUsdGhpcy5hcmlhUm9sZSl9b25MYWJlbE9yV3JhcHBlck1vdXNlRG93bihlKXtpZihlKXtjb25zdCB0PXRoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpO2lmKHQhPT10aGlzLmVXcmFwcGVyJiYobnVsbD09ZT92b2lkIDA6ZS50YXJnZXQpPT09dClyZXR1cm47ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLmZvY3VzKCl9dGhpcy5za2lwQ2xpY2s/dGhpcy5za2lwQ2xpY2s9ITE6dGhpcy5pc0Rpc2FibGVkKCl8fCh0aGlzLmlzUGlja2VyRGlzcGxheWVkP3RoaXMuaGlkZVBpY2tlcigpOnRoaXMuc2hvd1BpY2tlcigpKX1vbktleURvd24oZSl7c3dpdGNoKGUua2V5KXtjYXNlIGpzLlVQOmNhc2UganMuRE9XTjpjYXNlIGpzLkVOVEVSOmNhc2UganMuU1BBQ0U6ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMub25MYWJlbE9yV3JhcHBlck1vdXNlRG93bigpO2JyZWFrO2Nhc2UganMuRVNDQVBFOnRoaXMuaXNQaWNrZXJEaXNwbGF5ZWQmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLmhpZGVDdXJyZW50UGlja2VyJiZ0aGlzLmhpZGVDdXJyZW50UGlja2VyKCkpfX1zaG93UGlja2VyKCl7dGhpcy5pc1BpY2tlckRpc3BsYXllZD0hMCx0aGlzLnBpY2tlckNvbXBvbmVudHx8KHRoaXMucGlja2VyQ29tcG9uZW50PXRoaXMuY3JlYXRlUGlja2VyQ29tcG9uZW50KCkpO2NvbnN0IGU9dGhpcy5waWNrZXJDb21wb25lbnQuZ2V0R3VpKCk7ZS5hZGRFdmVudExpc3RlbmVyKCJmb2N1c2luIix0aGlzLm9uUGlja2VyRm9jdXNJbiksZS5hZGRFdmVudExpc3RlbmVyKCJmb2N1c291dCIsdGhpcy5vblBpY2tlckZvY3VzT3V0KSx0aGlzLmhpZGVDdXJyZW50UGlja2VyPXRoaXMucmVuZGVyQW5kUG9zaXRpb25QaWNrZXIoKSx0aGlzLnRvZ2dsZUV4cGFuZGVkU3R5bGVzKCEwKX1yZW5kZXJBbmRQb3NpdGlvblBpY2tlcigpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKSx0PXRoaXMucGlja2VyQ29tcG9uZW50LmdldEd1aSgpO3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NTY3JvbGxXaGVuUG9wdXBzQXJlT3BlbiIpfHwodGhpcy5kZXN0cm95TW91c2VXaGVlbEZ1bmM9dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQk9EWV9TQ1JPTEwsKCk9Pnt0aGlzLmhpZGVQaWNrZXIoKX0pKTtjb25zdCBpPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLHtwaWNrZXJBcmlhTGFiZWxLZXk6cyxwaWNrZXJBcmlhTGFiZWxWYWx1ZTpyLG1vZGFsUGlja2VyOm89ITB9PXRoaXMuY29uZmlnLG49e21vZGFsOm8sZUNoaWxkOnQsY2xvc2VPbkVzYzohMCxjbG9zZWRDYWxsYmFjazooKT0+e2NvbnN0IHQ9ZS5hY3RpdmVFbGVtZW50PT09ZS5ib2R5O3RoaXMuYmVmb3JlSGlkZVBpY2tlcigpLHQmJnRoaXMuaXNBbGl2ZSgpJiZ0aGlzLmdldEZvY3VzYWJsZUVsZW1lbnQoKS5mb2N1cygpfSxhcmlhTGFiZWw6aShzLHIpfSxhPXRoaXMucG9wdXBTZXJ2aWNlLmFkZFBvcHVwKG4pLHttYXhQaWNrZXJIZWlnaHQ6bCxtaW5QaWNrZXJXaWR0aDpkLG1heFBpY2tlcldpZHRoOmMsdmFyaWFibGVXaWR0aDpofT10aGlzO2g/KGQmJih0LnN0eWxlLm1pbldpZHRoPWQpLHQuc3R5bGUud2lkdGg9UHMoY3ModGhpcy5lV3JhcHBlcikpLGMmJih0LnN0eWxlLm1heFdpZHRoPWMpKTpUcyh0LG51bGwhPWM/Yzpjcyh0aGlzLmVXcmFwcGVyKSk7Y29uc3QgdT1udWxsIT1sP2w6YXModGhpcy5wb3B1cFNlcnZpY2UuZ2V0UG9wdXBQYXJlbnQoKSkrInB4IjtyZXR1cm4gdC5zdHlsZS5zZXRQcm9wZXJ0eSgibWF4LWhlaWdodCIsdSksdC5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiLHRoaXMuYWxpZ25QaWNrZXJUb0NvbXBvbmVudCgpLGEuaGlkZUZ1bmN9YWxpZ25QaWNrZXJUb0NvbXBvbmVudCgpe2lmKCF0aGlzLnBpY2tlckNvbXBvbmVudClyZXR1cm47Y29uc3R7cGlja2VyVHlwZTplfT10aGlzLmNvbmZpZyx7cGlja2VyR2FwOnR9PXRoaXMsaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpPyJyaWdodCI6ImxlZnQiO3RoaXMucG9wdXBTZXJ2aWNlLnBvc2l0aW9uUG9wdXBCeUNvbXBvbmVudCh7dHlwZTplLGV2ZW50U291cmNlOnRoaXMuZVdyYXBwZXIsZVBvcHVwOnRoaXMucGlja2VyQ29tcG9uZW50LmdldEd1aSgpLHBvc2l0aW9uOiJ1bmRlciIsYWxpZ25TaWRlOmksa2VlcFdpdGhpbkJvdW5kczohMCxudWRnZVk6dH0pfWJlZm9yZUhpZGVQaWNrZXIoKXt0aGlzLmRlc3Ryb3lNb3VzZVdoZWVsRnVuYyYmKHRoaXMuZGVzdHJveU1vdXNlV2hlZWxGdW5jKCksdGhpcy5kZXN0cm95TW91c2VXaGVlbEZ1bmM9dm9pZCAwKSx0aGlzLnRvZ2dsZUV4cGFuZGVkU3R5bGVzKCExKTtjb25zdCBlPXRoaXMucGlja2VyQ29tcG9uZW50LmdldEd1aSgpO2UucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXNpbiIsdGhpcy5vblBpY2tlckZvY3VzSW4pLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXNvdXQiLHRoaXMub25QaWNrZXJGb2N1c091dCksdGhpcy5pc1BpY2tlckRpc3BsYXllZD0hMSx0aGlzLnBpY2tlckNvbXBvbmVudD12b2lkIDAsdGhpcy5oaWRlQ3VycmVudFBpY2tlcj1udWxsfXRvZ2dsZUV4cGFuZGVkU3R5bGVzKGUpe2lmKCF0aGlzLmlzQWxpdmUoKSlyZXR1cm47Y2kodGhpcy5nZXRBcmlhRWxlbWVudCgpLGUpLHRoaXMuZVdyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZSgiYWctcGlja2VyLWV4cGFuZGVkIixlKSx0aGlzLmVXcmFwcGVyLmNsYXNzTGlzdC50b2dnbGUoImFnLXBpY2tlci1jb2xsYXBzZWQiLCFlKX1vblBpY2tlckZvY3VzSW4oKXt0aGlzLnRvZ2dsZVBpY2tlckhhc0ZvY3VzKCEwKX1vblBpY2tlckZvY3VzT3V0KGUpe3ZhciB0OyhudWxsPT09KHQ9dGhpcy5waWNrZXJDb21wb25lbnQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmdldEd1aSgpLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpfHx0aGlzLnRvZ2dsZVBpY2tlckhhc0ZvY3VzKCExKX10b2dnbGVQaWNrZXJIYXNGb2N1cyhlKXt0aGlzLnBpY2tlckNvbXBvbmVudCYmdGhpcy5lV3JhcHBlci5jbGFzc0xpc3QudG9nZ2xlKCJhZy1waWNrZXItaGFzLWZvY3VzIixlKX1oaWRlUGlja2VyKCl7dGhpcy5oaWRlQ3VycmVudFBpY2tlciYmdGhpcy5oaWRlQ3VycmVudFBpY2tlcigpfXNldElucHV0V2lkdGgoZSl7cmV0dXJuIFRzKHRoaXMuZVdyYXBwZXIsZSksdGhpc31nZXRGb2N1c2FibGVFbGVtZW50KCl7cmV0dXJuIHRoaXMuZVdyYXBwZXJ9c2V0UGlja2VyR2FwKGUpe3JldHVybiB0aGlzLnBpY2tlckdhcD1lLHRoaXN9c2V0UGlja2VyTWluV2lkdGgoZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlJiYoZSs9InB4IiksdGhpcy5taW5QaWNrZXJXaWR0aD1udWxsPT1lP3ZvaWQgMDplLHRoaXN9c2V0UGlja2VyTWF4V2lkdGgoZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlJiYoZSs9InB4IiksdGhpcy5tYXhQaWNrZXJXaWR0aD1udWxsPT1lP3ZvaWQgMDplLHRoaXN9c2V0UGlja2VyTWF4SGVpZ2h0KGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmKGUrPSJweCIpLHRoaXMubWF4UGlja2VySGVpZ2h0PW51bGw9PWU/dm9pZCAwOmUsdGhpc31kZXN0cm95KCl7dGhpcy5oaWRlUGlja2VyKCksc3VwZXIuZGVzdHJveSgpfX1PcihbY2UoInBvcHVwU2VydmljZSIpXSxBci5wcm90b3R5cGUsInBvcHVwU2VydmljZSIsdm9pZCAwKSxPcihbdXIoImVMYWJlbCIpXSxBci5wcm90b3R5cGUsImVMYWJlbCIsdm9pZCAwKSxPcihbdXIoImVXcmFwcGVyIildLEFyLnByb3RvdHlwZSwiZVdyYXBwZXIiLHZvaWQgMCksT3IoW3VyKCJlRGlzcGxheUZpZWxkIildLEFyLnByb3RvdHlwZSwiZURpc3BsYXlGaWVsZCIsdm9pZCAwKSxPcihbdXIoImVJY29uIildLEFyLnByb3RvdHlwZSwiZUljb24iLHZvaWQgMCk7dmFyIFByPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIE1yIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoZT0iZGVmYXVsdCIpe3N1cGVyKGA8ZGl2IGNsYXNzPSJhZy1saXN0IGFnLSR7ZX0tbGlzdCIgcm9sZT0ibGlzdGJveCI+PC9kaXY+YCksdGhpcy5jc3NJZGVudGlmaWVyPWUsdGhpcy5vcHRpb25zPVtdLHRoaXMuaXRlbUVscz1bXX1pbml0KCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5nZXRHdWkoKSwia2V5ZG93biIsdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcykpfWhhbmRsZUtleURvd24oZSl7Y29uc3QgdD1lLmtleTtzd2l0Y2godCl7Y2FzZSBqcy5FTlRFUjppZih0aGlzLmhpZ2hsaWdodGVkRWwpe2NvbnN0IGU9dGhpcy5pdGVtRWxzLmluZGV4T2YodGhpcy5oaWdobGlnaHRlZEVsKTt0aGlzLnNldFZhbHVlQnlJbmRleChlKX1lbHNlIHRoaXMuc2V0VmFsdWUodGhpcy5nZXRWYWx1ZSgpKTticmVhaztjYXNlIGpzLkRPV046Y2FzZSBqcy5VUDpjb25zdCBpPXQ9PT1qcy5ET1dOO2xldCBzO2lmKGUucHJldmVudERlZmF1bHQoKSx0aGlzLmhpZ2hsaWdodGVkRWwpe2xldCBlPXRoaXMuaXRlbUVscy5pbmRleE9mKHRoaXMuaGlnaGxpZ2h0ZWRFbCkrKGk/MTotMSk7ZT1NYXRoLm1pbihNYXRoLm1heChlLDApLHRoaXMuaXRlbUVscy5sZW5ndGgtMSkscz10aGlzLml0ZW1FbHNbZV19ZWxzZSBzPXRoaXMuaXRlbUVsc1tpPzA6dGhpcy5pdGVtRWxzLmxlbmd0aC0xXTt0aGlzLmhpZ2hsaWdodEl0ZW0ocyl9fWFkZE9wdGlvbnMoZSl7cmV0dXJuIGUuZm9yRWFjaChlPT50aGlzLmFkZE9wdGlvbihlKSksdGhpc31hZGRPcHRpb24oZSl7Y29uc3R7dmFsdWU6dCx0ZXh0Oml9PWUscz1mdChpfHx0KTtyZXR1cm4gdGhpcy5vcHRpb25zLnB1c2goe3ZhbHVlOnQsdGV4dDpzfSksdGhpcy5yZW5kZXJPcHRpb24odCxzKSx0aGlzLnVwZGF0ZUluZGljZXMoKSx0aGlzfXVwZGF0ZUluZGljZXMoKXtjb25zdCBlPXRoaXMuZ2V0R3VpKCkucXVlcnlTZWxlY3RvckFsbCgiLmFnLWxpc3QtaXRlbSIpO2UuZm9yRWFjaCgodCxpKT0+e3BpKHQsaSsxKSx1aSh0LGUubGVuZ3RoKX0pfXJlbmRlck9wdGlvbihlLHQpe2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7WHQoaSwib3B0aW9uIiksaS5jbGFzc0xpc3QuYWRkKCJhZy1saXN0LWl0ZW0iLGBhZy0ke3RoaXMuY3NzSWRlbnRpZmllcn0tbGlzdC1pdGVtYCksaS5pbm5lckhUTUw9YDxzcGFuPiR7dH08L3NwYW4+YCxpLnRhYkluZGV4PS0xLHRoaXMuaXRlbUVscy5wdXNoKGkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGksIm1vdXNlb3ZlciIsKCk9PnRoaXMuaGlnaGxpZ2h0SXRlbShpKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoaSwibW91c2VsZWF2ZSIsKCk9PnRoaXMuY2xlYXJIaWdobGlnaHRlZCgpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihpLCJjbGljayIsKCk9PnRoaXMuc2V0VmFsdWUoZSkpLHRoaXMuZ2V0R3VpKCkuYXBwZW5kQ2hpbGQoaSl9c2V0VmFsdWUoZSx0KXtpZih0aGlzLnZhbHVlPT09ZSlyZXR1cm4gdGhpcy5maXJlSXRlbVNlbGVjdGVkKCksdGhpcztpZihudWxsPT1lKXJldHVybiB0aGlzLnJlc2V0KCksdGhpcztjb25zdCBpPXRoaXMub3B0aW9ucy5maW5kSW5kZXgodD0+dC52YWx1ZT09PWUpO2lmKC0xIT09aSl7Y29uc3QgZT10aGlzLm9wdGlvbnNbaV07dGhpcy52YWx1ZT1lLnZhbHVlLHRoaXMuZGlzcGxheVZhbHVlPW51bGwhPWUudGV4dD9lLnRleHQ6ZS52YWx1ZSx0aGlzLmhpZ2hsaWdodEl0ZW0odGhpcy5pdGVtRWxzW2ldKSx0fHx0aGlzLmZpcmVDaGFuZ2VFdmVudCgpfXJldHVybiB0aGlzfXNldFZhbHVlQnlJbmRleChlKXtyZXR1cm4gdGhpcy5zZXRWYWx1ZSh0aGlzLm9wdGlvbnNbZV0udmFsdWUpfWdldFZhbHVlKCl7cmV0dXJuIHRoaXMudmFsdWV9Z2V0RGlzcGxheVZhbHVlKCl7cmV0dXJuIHRoaXMuZGlzcGxheVZhbHVlfXJlZnJlc2hIaWdobGlnaHRlZCgpe3RoaXMuY2xlYXJIaWdobGlnaHRlZCgpO2NvbnN0IGU9dGhpcy5vcHRpb25zLmZpbmRJbmRleChlPT5lLnZhbHVlPT09dGhpcy52YWx1ZSk7LTEhPT1lJiZ0aGlzLmhpZ2hsaWdodEl0ZW0odGhpcy5pdGVtRWxzW2VdKX1yZXNldCgpe3RoaXMudmFsdWU9bnVsbCx0aGlzLmRpc3BsYXlWYWx1ZT1udWxsLHRoaXMuY2xlYXJIaWdobGlnaHRlZCgpLHRoaXMuZmlyZUNoYW5nZUV2ZW50KCl9aGlnaGxpZ2h0SXRlbShlKXtDcyhlKSYmKHRoaXMuY2xlYXJIaWdobGlnaHRlZCgpLHRoaXMuaGlnaGxpZ2h0ZWRFbD1lLHRoaXMuaGlnaGxpZ2h0ZWRFbC5jbGFzc0xpc3QuYWRkKE1yLkFDVElWRV9DTEFTUyksYmkodGhpcy5oaWdobGlnaHRlZEVsLCEwKSx0aGlzLmhpZ2hsaWdodGVkRWwuZm9jdXMoKSl9Y2xlYXJIaWdobGlnaHRlZCgpe3RoaXMuaGlnaGxpZ2h0ZWRFbCYmQ3ModGhpcy5oaWdobGlnaHRlZEVsKSYmKHRoaXMuaGlnaGxpZ2h0ZWRFbC5jbGFzc0xpc3QucmVtb3ZlKE1yLkFDVElWRV9DTEFTUyksYmkodGhpcy5oaWdobGlnaHRlZEVsLCExKSx0aGlzLmhpZ2hsaWdodGVkRWw9bnVsbCl9ZmlyZUNoYW5nZUV2ZW50KCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOmx0LkVWRU5UX0ZJRUxEX1ZBTFVFX0NIQU5HRUR9KSx0aGlzLmZpcmVJdGVtU2VsZWN0ZWQoKX1maXJlSXRlbVNlbGVjdGVkKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOk1yLkVWRU5UX0lURU1fU0VMRUNURUR9KX19TXIuRVZFTlRfSVRFTV9TRUxFQ1RFRD0ic2VsZWN0ZWRJdGVtIixNci5BQ1RJVkVfQ0xBU1M9ImFnLWFjdGl2ZS1pdGVtIixQcihbYWVdLE1yLnByb3RvdHlwZSwiaW5pdCIsbnVsbCk7Y2xhc3MgTHIgZXh0ZW5kcyBBcntjb25zdHJ1Y3RvcihlKXtzdXBlcihPYmplY3QuYXNzaWduKHtwaWNrZXJBcmlhTGFiZWxLZXk6ImFyaWFMYWJlbFNlbGVjdEZpZWxkIixwaWNrZXJBcmlhTGFiZWxWYWx1ZToiU2VsZWN0IEZpZWxkIixwaWNrZXJUeXBlOiJhZy1saXN0IixjbGFzc05hbWU6ImFnLXNlbGVjdCIscGlja2VySWNvbjoic21hbGxEb3duIixhcmlhUm9sZToiY29tYm9ib3gifSxlKSl9cG9zdENvbnN0cnVjdCgpe3N1cGVyLnBvc3RDb25zdHJ1Y3QoKSx0aGlzLmNyZWF0ZUxpc3RDb21wb25lbnQoKSx0aGlzLmVXcmFwcGVyLnRhYkluZGV4PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidGFiSW5kZXgiKX1jcmVhdGVMaXN0Q29tcG9uZW50KCl7dGhpcy5saXN0Q29tcG9uZW50PXRoaXMuY3JlYXRlQmVhbihuZXcgTXIoInNlbGVjdCIpKSx0aGlzLmxpc3RDb21wb25lbnQuc2V0UGFyZW50Q29tcG9uZW50KHRoaXMpO2NvbnN0IGU9dGhpcy5saXN0Q29tcG9uZW50LmdldEFyaWFFbGVtZW50KCksdD0iYWctc2VsZWN0LWxpc3QtIit0aGlzLmxpc3RDb21wb25lbnQuZ2V0Q29tcElkKCk7ZS5zZXRBdHRyaWJ1dGUoImlkIix0KSxSaSh0aGlzLmdldEFyaWFFbGVtZW50KCksZSksdGhpcy5saXN0Q29tcG9uZW50LmFkZEd1aUV2ZW50TGlzdGVuZXIoImtleWRvd24iLGU9PntlLmtleT09PWpzLlRBQiYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuZ2V0R3VpKCkuZGlzcGF0Y2hFdmVudChuZXcgS2V5Ym9hcmRFdmVudCgia2V5ZG93biIse2tleTplLmtleSxzaGlmdEtleTplLnNoaWZ0S2V5LGN0cmxLZXk6ZS5jdHJsS2V5LGJ1YmJsZXM6ITB9KSkpfSksdGhpcy5saXN0Q29tcG9uZW50LmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmxpc3RDb21wb25lbnQsTXIuRVZFTlRfSVRFTV9TRUxFQ1RFRCwoKT0+e3RoaXMuaGlkZVBpY2tlcigpLHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpMci5FVkVOVF9JVEVNX1NFTEVDVEVEfSl9KSx0aGlzLmxpc3RDb21wb25lbnQuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMubGlzdENvbXBvbmVudCxsdC5FVkVOVF9GSUVMRF9WQUxVRV9DSEFOR0VELCgpPT57dGhpcy5saXN0Q29tcG9uZW50JiYodGhpcy5zZXRWYWx1ZSh0aGlzLmxpc3RDb21wb25lbnQuZ2V0VmFsdWUoKSwhMSwhMCksdGhpcy5oaWRlUGlja2VyKCkpfSl9Y3JlYXRlUGlja2VyQ29tcG9uZW50KCl7cmV0dXJuIHRoaXMubGlzdENvbXBvbmVudH1zaG93UGlja2VyKCl7dGhpcy5saXN0Q29tcG9uZW50JiYoc3VwZXIuc2hvd1BpY2tlcigpLHRoaXMubGlzdENvbXBvbmVudC5yZWZyZXNoSGlnaGxpZ2h0ZWQoKSl9YWRkT3B0aW9ucyhlKXtyZXR1cm4gZS5mb3JFYWNoKGU9PnRoaXMuYWRkT3B0aW9uKGUpKSx0aGlzfWFkZE9wdGlvbihlKXtyZXR1cm4gdGhpcy5saXN0Q29tcG9uZW50LmFkZE9wdGlvbihlKSx0aGlzfXNldFZhbHVlKGUsdCxpKXtpZih0aGlzLnZhbHVlPT09ZXx8IXRoaXMubGlzdENvbXBvbmVudClyZXR1cm4gdGhpcztpfHx0aGlzLmxpc3RDb21wb25lbnQuc2V0VmFsdWUoZSwhMCk7cmV0dXJuIHRoaXMubGlzdENvbXBvbmVudC5nZXRWYWx1ZSgpPT09dGhpcy5nZXRWYWx1ZSgpP3RoaXM6KHRoaXMuZURpc3BsYXlGaWVsZC5pbm5lckhUTUw9dGhpcy5saXN0Q29tcG9uZW50LmdldERpc3BsYXlWYWx1ZSgpLHN1cGVyLnNldFZhbHVlKGUsdCkpfWRlc3Ryb3koKXt0aGlzLmxpc3RDb21wb25lbnQmJih0aGlzLmRlc3Ryb3lCZWFuKHRoaXMubGlzdENvbXBvbmVudCksdGhpcy5saXN0Q29tcG9uZW50PXZvaWQgMCksc3VwZXIuZGVzdHJveSgpfX1Mci5FVkVOVF9JVEVNX1NFTEVDVEVEPSJzZWxlY3RlZEl0ZW0iO3ZhciBGcj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBJciBleHRlbmRzIERye2NvbnN0cnVjdG9yKGUsdCxpPSJ0ZXh0IixzPSJpbnB1dCIpe3N1cGVyKGUsYFxuICAgICAgICAgICAgPGRpdiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlTGFiZWwiIGNsYXNzPSJhZy1pbnB1dC1maWVsZC1sYWJlbCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9ImVXcmFwcGVyIiBjbGFzcz0iYWctd3JhcHBlciBhZy1pbnB1dC13cmFwcGVyIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgICAgICA8JHtzfSByZWY9ImVJbnB1dCIgY2xhc3M9ImFnLWlucHV0LWZpZWxkLWlucHV0Ij48LyR7c30+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5gLHQpLHRoaXMuaW5wdXRUeXBlPWksdGhpcy5kaXNwbGF5RmllbGRUYWc9c31wb3N0Q29uc3RydWN0KCl7c3VwZXIucG9zdENvbnN0cnVjdCgpLHRoaXMuc2V0SW5wdXRUeXBlKCksdGhpcy5lTGFiZWwuY2xhc3NMaXN0LmFkZCh0aGlzLmNsYXNzTmFtZSsiLWxhYmVsIiksdGhpcy5lV3JhcHBlci5jbGFzc0xpc3QuYWRkKHRoaXMuY2xhc3NOYW1lKyItaW5wdXQtd3JhcHBlciIpLHRoaXMuZUlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc05hbWUrIi1pbnB1dCIpLHRoaXMuYWRkQ3NzQ2xhc3MoImFnLWlucHV0LWZpZWxkIiksdGhpcy5lSW5wdXQuaWQ9dGhpcy5lSW5wdXQuaWR8fGBhZy0ke3RoaXMuZ2V0Q29tcElkKCl9LWlucHV0YDtjb25zdHt3aWR0aDplLHZhbHVlOnR9PXRoaXMuY29uZmlnO251bGwhPWUmJnRoaXMuc2V0V2lkdGgoZSksbnVsbCE9dCYmdGhpcy5zZXRWYWx1ZSh0KSx0aGlzLmFkZElucHV0TGlzdGVuZXJzKCksdGhpcy5hY3RpdmF0ZVRhYkluZGV4KFt0aGlzLmVJbnB1dF0pfWFkZElucHV0TGlzdGVuZXJzKCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lSW5wdXQsImlucHV0IixlPT50aGlzLnNldFZhbHVlKGUudGFyZ2V0LnZhbHVlKSl9c2V0SW5wdXRUeXBlKCl7ImlucHV0Ij09PXRoaXMuZGlzcGxheUZpZWxkVGFnJiZ0aGlzLmVJbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLHRoaXMuaW5wdXRUeXBlKX1nZXRJbnB1dEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5lSW5wdXR9c2V0SW5wdXRXaWR0aChlKXtyZXR1cm4gVHModGhpcy5lV3JhcHBlcixlKSx0aGlzfXNldElucHV0TmFtZShlKXtyZXR1cm4gdGhpcy5nZXRJbnB1dEVsZW1lbnQoKS5zZXRBdHRyaWJ1dGUoIm5hbWUiLGUpLHRoaXN9Z2V0Rm9jdXNhYmxlRWxlbWVudCgpe3JldHVybiB0aGlzLmVJbnB1dH1zZXRNYXhMZW5ndGgoZSl7cmV0dXJuIHRoaXMuZUlucHV0Lm1heExlbmd0aD1lLHRoaXN9c2V0SW5wdXRQbGFjZWhvbGRlcihlKXtyZXR1cm4gSXModGhpcy5lSW5wdXQsInBsYWNlaG9sZGVyIixlKSx0aGlzfXNldElucHV0QXJpYUxhYmVsKGUpe3JldHVybiBlaSh0aGlzLmVJbnB1dCxlKSx0aGlzLnJlZnJlc2hBcmlhTGFiZWxsZWRCeSgpLHRoaXN9c2V0RGlzYWJsZWQoZSl7cmV0dXJuIHJzKHRoaXMuZUlucHV0LGUpLHN1cGVyLnNldERpc2FibGVkKGUpfXNldEF1dG9Db21wbGV0ZShlKXtpZighMD09PWUpSXModGhpcy5lSW5wdXQsImF1dG9jb21wbGV0ZSIsbnVsbCk7ZWxzZXtjb25zdCB0PSJzdHJpbmciPT10eXBlb2YgZT9lOiJvZmYiO0lzKHRoaXMuZUlucHV0LCJhdXRvY29tcGxldGUiLHQpfXJldHVybiB0aGlzfX1GcihbdXIoImVMYWJlbCIpXSxJci5wcm90b3R5cGUsImVMYWJlbCIsdm9pZCAwKSxGcihbdXIoImVXcmFwcGVyIildLElyLnByb3RvdHlwZSwiZVdyYXBwZXIiLHZvaWQgMCksRnIoW3VyKCJlSW5wdXQiKV0sSXIucHJvdG90eXBlLCJlSW5wdXQiLHZvaWQgMCk7Y2xhc3MgTnIgZXh0ZW5kcyBJcntjb25zdHJ1Y3RvcihlLHQ9ImFnLWNoZWNrYm94IixpPSJjaGVja2JveCIpe3N1cGVyKGUsdCxpKSx0aGlzLmxhYmVsQWxpZ25tZW50PSJyaWdodCIsdGhpcy5zZWxlY3RlZD0hMSx0aGlzLnJlYWRPbmx5PSExLHRoaXMucGFzc2l2ZT0hMX1hZGRJbnB1dExpc3RlbmVycygpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUlucHV0LCJjbGljayIsdGhpcy5vbkNoZWNrYm94Q2xpY2suYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lTGFiZWwsImNsaWNrIix0aGlzLnRvZ2dsZS5iaW5kKHRoaXMpKX1nZXROZXh0VmFsdWUoKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5zZWxlY3RlZHx8IXRoaXMuc2VsZWN0ZWR9c2V0UGFzc2l2ZShlKXt0aGlzLnBhc3NpdmU9ZX1pc1JlYWRPbmx5KCl7cmV0dXJuIHRoaXMucmVhZE9ubHl9c2V0UmVhZE9ubHkoZSl7dGhpcy5lV3JhcHBlci5jbGFzc0xpc3QudG9nZ2xlKCJhZy1kaXNhYmxlZCIsZSksdGhpcy5lSW5wdXQuZGlzYWJsZWQ9ZSx0aGlzLnJlYWRPbmx5PWV9c2V0RGlzYWJsZWQoZSl7cmV0dXJuIHRoaXMuZVdyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZSgiYWctZGlzYWJsZWQiLGUpLHN1cGVyLnNldERpc2FibGVkKGUpfXRvZ2dsZSgpe2lmKHRoaXMuZUlucHV0LmRpc2FibGVkKXJldHVybjtjb25zdCBlPXRoaXMuaXNTZWxlY3RlZCgpLHQ9dGhpcy5nZXROZXh0VmFsdWUoKTt0aGlzLnBhc3NpdmU/dGhpcy5kaXNwYXRjaENoYW5nZSh0LGUpOnRoaXMuc2V0VmFsdWUodCl9Z2V0VmFsdWUoKXtyZXR1cm4gdGhpcy5pc1NlbGVjdGVkKCl9c2V0VmFsdWUoZSx0KXtyZXR1cm4gdGhpcy5yZWZyZXNoU2VsZWN0ZWRDbGFzcyhlKSx0aGlzLnNldFNlbGVjdGVkKGUsdCksdGhpc31zZXROYW1lKGUpe3JldHVybiB0aGlzLmdldElucHV0RWxlbWVudCgpLm5hbWU9ZSx0aGlzfWlzU2VsZWN0ZWQoKXtyZXR1cm4gdGhpcy5zZWxlY3RlZH1zZXRTZWxlY3RlZChlLHQpe3RoaXMuaXNTZWxlY3RlZCgpIT09ZSYmKHRoaXMucHJldmlvdXNWYWx1ZT10aGlzLmlzU2VsZWN0ZWQoKSxlPXRoaXMuc2VsZWN0ZWQ9ImJvb2xlYW4iPT10eXBlb2YgZT9lOnZvaWQgMCx0aGlzLmVJbnB1dC5jaGVja2VkPWUsdGhpcy5lSW5wdXQuaW5kZXRlcm1pbmF0ZT12b2lkIDA9PT1lLHR8fHRoaXMuZGlzcGF0Y2hDaGFuZ2UodGhpcy5zZWxlY3RlZCx0aGlzLnByZXZpb3VzVmFsdWUpKX1kaXNwYXRjaENoYW5nZShlLHQsaSl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOmx0LkVWRU5UX0ZJRUxEX1ZBTFVFX0NIQU5HRUQsc2VsZWN0ZWQ6ZSxwcmV2aW91c1ZhbHVlOnQsZXZlbnQ6aX0pO2NvbnN0IHM9dGhpcy5nZXRJbnB1dEVsZW1lbnQoKSxyPXt0eXBlOmx0LkVWRU5UX0NIRUNLQk9YX0NIQU5HRUQsaWQ6cy5pZCxuYW1lOnMubmFtZSxzZWxlY3RlZDplLHByZXZpb3VzVmFsdWU6dH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChyKX1vbkNoZWNrYm94Q2xpY2soZSl7aWYodGhpcy5wYXNzaXZlfHx0aGlzLmVJbnB1dC5kaXNhYmxlZClyZXR1cm47Y29uc3QgdD10aGlzLmlzU2VsZWN0ZWQoKSxpPXRoaXMuc2VsZWN0ZWQ9ZS50YXJnZXQuY2hlY2tlZDt0aGlzLnJlZnJlc2hTZWxlY3RlZENsYXNzKGkpLHRoaXMuZGlzcGF0Y2hDaGFuZ2UoaSx0LGUpfXJlZnJlc2hTZWxlY3RlZENsYXNzKGUpe3RoaXMuZVdyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZSgiYWctY2hlY2tlZCIsITA9PT1lKSx0aGlzLmVXcmFwcGVyLmNsYXNzTGlzdC50b2dnbGUoImFnLWluZGV0ZXJtaW5hdGUiLG51bGw9PWUpfX1jbGFzcyBHciBleHRlbmRzIE5ye2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsImFnLXJhZGlvLWJ1dHRvbiIsInJhZGlvIil9aXNTZWxlY3RlZCgpe3JldHVybiB0aGlzLmVJbnB1dC5jaGVja2VkfXRvZ2dsZSgpe3RoaXMuZUlucHV0LmRpc2FibGVkfHx0aGlzLmlzU2VsZWN0ZWQoKXx8dGhpcy5zZXRWYWx1ZSghMCl9YWRkSW5wdXRMaXN0ZW5lcnMoKXtzdXBlci5hZGRJbnB1dExpc3RlbmVycygpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NIRUNLQk9YX0NIQU5HRUQsdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpKX1vbkNoYW5nZShlKXtlLnNlbGVjdGVkJiZlLm5hbWUmJnRoaXMuZUlucHV0Lm5hbWUmJnRoaXMuZUlucHV0Lm5hbWU9PT1lLm5hbWUmJmUuaWQmJnRoaXMuZUlucHV0LmlkIT09ZS5pZCYmdGhpcy5zZXRWYWx1ZSghMSwhMCl9fWNsYXNzIGtye2NvbnN0cnVjdG9yKGUsdCxpKXt0aGlzLmxvY2FsZVNlcnZpY2U9ZSx0aGlzLm9wdGlvbnNGYWN0b3J5PXQsdGhpcy52YWx1ZUZvcm1hdHRlcj1pfWdldE1vZGVsQXNTdHJpbmcoZSl7aWYoIWUpcmV0dXJuIG51bGw7Y29uc3QgdD1udWxsIT1lLm9wZXJhdG9yLGk9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCk7aWYodCl7Y29uc3QgdD1lO2xldHtjb25kaXRpb25zOnN9PXQ7aWYoIXMpe2NvbnN0e2NvbmRpdGlvbjE6ZSxjb25kaXRpb24yOml9PXQ7cz1bZSxpXX1jb25zdCByPXMubWFwKGU9PnRoaXMuZ2V0TW9kZWxBc1N0cmluZyhlKSksbz0iQU5EIj09PXQub3BlcmF0b3I/ImFuZENvbmRpdGlvbiI6Im9yQ29uZGl0aW9uIjtyZXR1cm4gci5qb2luKGAgJHtpKG8sQ3Jbb10pfSBgKX1pZihlLnR5cGU9PT1fci5CTEFOS3x8ZS50eXBlPT09X3IuTk9UX0JMQU5LKXJldHVybiBpKGUudHlwZSxlLnR5cGUpO3tjb25zdCB0PWUscz10aGlzLm9wdGlvbnNGYWN0b3J5LmdldEN1c3RvbU9wdGlvbih0LnR5cGUpLHtkaXNwbGF5S2V5OnIsZGlzcGxheU5hbWU6byxudW1iZXJPZklucHV0czpufT1zfHx7fTtyZXR1cm4gciYmbyYmMD09PW4/KGkocixvKSxvKTp0aGlzLmNvbmRpdGlvblRvU3RyaW5nKHQscyl9fXVwZGF0ZVBhcmFtcyhlKXt0aGlzLm9wdGlvbnNGYWN0b3J5PWUub3B0aW9uc0ZhY3Rvcnl9Zm9ybWF0VmFsdWUoZSl7dmFyIHQ7cmV0dXJuIHRoaXMudmFsdWVGb3JtYXR0ZXI/bnVsbCE9PSh0PXRoaXMudmFsdWVGb3JtYXR0ZXIobnVsbCE9ZT9lOm51bGwpKSYmdm9pZCAwIT09dD90OiIiOlN0cmluZyhlKX19Y2xhc3MgX3IgZXh0ZW5kcyBScntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5lVHlwZXM9W10sdGhpcy5lSm9pbk9wZXJhdG9yUGFuZWxzPVtdLHRoaXMuZUpvaW5PcGVyYXRvcnNBbmQ9W10sdGhpcy5lSm9pbk9wZXJhdG9yc09yPVtdLHRoaXMuZUNvbmRpdGlvbkJvZGllcz1bXSx0aGlzLmxpc3RlbmVyPSgpPT50aGlzLm9uVWlDaGFuZ2VkKCksdGhpcy5sYXN0VWlDb21wbGV0ZVBvc2l0aW9uPW51bGwsdGhpcy5qb2luT3BlcmF0b3JJZD0wfWdldE51bWJlck9mSW5wdXRzKGUpe2NvbnN0IHQ9dGhpcy5vcHRpb25zRmFjdG9yeS5nZXRDdXN0b21PcHRpb24oZSk7aWYodCl7Y29uc3R7bnVtYmVyT2ZJbnB1dHM6ZX09dDtyZXR1cm4gbnVsbCE9ZT9lOjF9Y29uc3QgaT1bX3IuRU1QVFksX3IuTk9UX0JMQU5LLF9yLkJMQU5LXTtyZXR1cm4gZSYmaS5pbmRleE9mKGUpPj0wPzA6ZT09PV9yLklOX1JBTkdFPzI6MX1vbkZsb2F0aW5nRmlsdGVyQ2hhbmdlZChlLHQpe3RoaXMuc2V0VHlwZUZyb21GbG9hdGluZ0ZpbHRlcihlKSx0aGlzLnNldFZhbHVlRnJvbUZsb2F0aW5nRmlsdGVyKHQpLHRoaXMub25VaUNoYW5nZWQoITApfXNldFR5cGVGcm9tRmxvYXRpbmdGaWx0ZXIoZSl7dGhpcy5lVHlwZXMuZm9yRWFjaCgodCxpKT0+ezA9PT1pP3Quc2V0VmFsdWUoZSwhMCk6dC5zZXRWYWx1ZSh0aGlzLm9wdGlvbnNGYWN0b3J5LmdldERlZmF1bHRPcHRpb24oKSwhMCl9KX1nZXRNb2RlbEZyb21VaSgpe2NvbnN0IGU9dGhpcy5nZXRVaUNvbXBsZXRlQ29uZGl0aW9ucygpO3JldHVybiAwPT09ZS5sZW5ndGg/bnVsbDp0aGlzLm1heE51bUNvbmRpdGlvbnM+MSYmZS5sZW5ndGg+MT97ZmlsdGVyVHlwZTp0aGlzLmdldEZpbHRlclR5cGUoKSxvcGVyYXRvcjp0aGlzLmdldEpvaW5PcGVyYXRvcigpLGNvbmRpdGlvbjE6ZVswXSxjb25kaXRpb24yOmVbMV0sY29uZGl0aW9uczplfTplWzBdfWdldENvbmRpdGlvblR5cGVzKCl7cmV0dXJuIHRoaXMuZVR5cGVzLm1hcChlPT5lLmdldFZhbHVlKCkpfWdldENvbmRpdGlvblR5cGUoZSl7cmV0dXJuIHRoaXMuZVR5cGVzW2VdLmdldFZhbHVlKCl9Z2V0Sm9pbk9wZXJhdG9yKCl7cmV0dXJuIDA9PT10aGlzLmVKb2luT3BlcmF0b3JzT3IubGVuZ3RoP3RoaXMuZGVmYXVsdEpvaW5PcGVyYXRvcjohMD09PXRoaXMuZUpvaW5PcGVyYXRvcnNPclswXS5nZXRWYWx1ZSgpPyJPUiI6IkFORCJ9YXJlTW9kZWxzRXF1YWwoZSx0KXtpZighZSYmIXQpcmV0dXJuITA7aWYoIWUmJnR8fGUmJiF0KXJldHVybiExO2NvbnN0IGk9IWUub3BlcmF0b3Iscz0hdC5vcGVyYXRvcjtpZighaSYmc3x8aSYmIXMpcmV0dXJuITE7bGV0IHI7aWYoaSl7Y29uc3QgaT1lLHM9dDtyPXRoaXMuYXJlU2ltcGxlTW9kZWxzRXF1YWwoaSxzKX1lbHNle2NvbnN0IGk9ZSxzPXQ7cj1pLm9wZXJhdG9yPT09cy5vcGVyYXRvciYmQWUoaS5jb25kaXRpb25zLHMuY29uZGl0aW9ucywoZSx0KT0+dGhpcy5hcmVTaW1wbGVNb2RlbHNFcXVhbChlLHQpKX1yZXR1cm4gcn1zaG91bGRSZWZyZXNoKGUpe3ZhciB0LGkscztjb25zdCByPXRoaXMuZ2V0TW9kZWwoKSxvPXI/bnVsbCE9PSh0PXIuY29uZGl0aW9ucykmJnZvaWQgMCE9PXQ/dDpbcl06bnVsbCxuPW51bGwhPT0ocz1udWxsPT09KGk9ZS5maWx0ZXJPcHRpb25zKXx8dm9pZCAwPT09aT92b2lkIDA6aS5tYXAoZT0+InN0cmluZyI9PXR5cGVvZiBlP2U6ZS5kaXNwbGF5S2V5KSkmJnZvaWQgMCE9PXM/czp0aGlzLmdldERlZmF1bHRGaWx0ZXJPcHRpb25zKCk7cmV0dXJuIShvJiYhby5ldmVyeShlPT52b2lkIDAhPT1uLmZpbmQodD0+dD09PWUudHlwZSkpKSYmISgibnVtYmVyIj09dHlwZW9mIGUubWF4TnVtQ29uZGl0aW9ucyYmbyYmby5sZW5ndGg+ZS5tYXhOdW1Db25kaXRpb25zKX1yZWZyZXNoKGUpe2lmKCF0aGlzLnNob3VsZFJlZnJlc2goZSkpcmV0dXJuITE7cmV0dXJuISFzdXBlci5yZWZyZXNoKGUpJiYodGhpcy5zZXRQYXJhbXMoZSksdGhpcy5yZW1vdmVDb25kaXRpb25zQW5kT3BlcmF0b3JzKDApLHRoaXMuY3JlYXRlT3B0aW9uKCksdGhpcy5zZXRNb2RlbCh0aGlzLmdldE1vZGVsKCkpLCEwKX1zZXRNb2RlbEludG9VaShlKXtpZihlLm9wZXJhdG9yKXtsZXQgdD1lO3QuY29uZGl0aW9uc3x8KHQuY29uZGl0aW9ucz1bdC5jb25kaXRpb24xLHQuY29uZGl0aW9uMl0pO2NvbnN0IGk9dGhpcy52YWxpZGF0ZUFuZFVwZGF0ZUNvbmRpdGlvbnModC5jb25kaXRpb25zKSxzPXRoaXMuZ2V0TnVtQ29uZGl0aW9ucygpO2lmKGk8cyl0aGlzLnJlbW92ZUNvbmRpdGlvbnNBbmRPcGVyYXRvcnMoaSk7ZWxzZSBpZihpPnMpZm9yKGxldCBlPXM7ZTxpO2UrKyl0aGlzLmNyZWF0ZUpvaW5PcGVyYXRvclBhbmVsKCksdGhpcy5jcmVhdGVPcHRpb24oKTtjb25zdCByPSJPUiI9PT10Lm9wZXJhdG9yO3RoaXMuZUpvaW5PcGVyYXRvcnNBbmQuZm9yRWFjaChlPT5lLnNldFZhbHVlKCFyLCEwKSksdGhpcy5lSm9pbk9wZXJhdG9yc09yLmZvckVhY2goZT0+ZS5zZXRWYWx1ZShyLCEwKSksdC5jb25kaXRpb25zLmZvckVhY2goKGUsdCk9Pnt0aGlzLmVUeXBlc1t0XS5zZXRWYWx1ZShlLnR5cGUsITApLHRoaXMuc2V0Q29uZGl0aW9uSW50b1VpKGUsdCl9KX1lbHNle2NvbnN0IHQ9ZTt0aGlzLmdldE51bUNvbmRpdGlvbnMoKT4xJiZ0aGlzLnJlbW92ZUNvbmRpdGlvbnNBbmRPcGVyYXRvcnMoMSksdGhpcy5lVHlwZXNbMF0uc2V0VmFsdWUodC50eXBlLCEwKSx0aGlzLnNldENvbmRpdGlvbkludG9VaSh0LDApfXJldHVybiB0aGlzLmxhc3RVaUNvbXBsZXRlUG9zaXRpb249dGhpcy5nZXROdW1Db25kaXRpb25zKCktMSx0aGlzLmNyZWF0ZU1pc3NpbmdDb25kaXRpb25zQW5kT3BlcmF0b3JzKCksdGhpcy5vblVpQ2hhbmdlZCgpLHRyLnJlc29sdmUoKX12YWxpZGF0ZUFuZFVwZGF0ZUNvbmRpdGlvbnMoZSl7bGV0IHQ9ZS5sZW5ndGg7cmV0dXJuIHQ+dGhpcy5tYXhOdW1Db25kaXRpb25zJiYoZS5zcGxpY2UodGhpcy5tYXhOdW1Db25kaXRpb25zKSxqKCdGaWx0ZXIgTW9kZWwgY29udGFpbnMgbW9yZSBjb25kaXRpb25zIHRoYW4gImZpbHRlclBhcmFtcy5tYXhOdW1Db25kaXRpb25zIi4gQWRkaXRpb25hbCBjb25kaXRpb25zIGhhdmUgYmVlbiBpZ25vcmVkLicpLHQ9dGhpcy5tYXhOdW1Db25kaXRpb25zKSx0fWRvZXNGaWx0ZXJQYXNzKGUpe3ZhciB0O2NvbnN0IGk9dGhpcy5nZXRNb2RlbCgpO2lmKG51bGw9PWkpcmV0dXJuITA7Y29uc3R7b3BlcmF0b3I6c309aSxyPVtdO2lmKHMpe2NvbnN0IGU9aTtyLnB1c2goLi4ubnVsbCE9PSh0PWUuY29uZGl0aW9ucykmJnZvaWQgMCE9PXQ/dDpbXSl9ZWxzZSByLnB1c2goaSk7cmV0dXJuIHJbcyYmIk9SIj09PXM/InNvbWUiOiJldmVyeSJdKHQ9PnRoaXMuaW5kaXZpZHVhbENvbmRpdGlvblBhc3NlcyhlLHQpKX1zZXRQYXJhbXMoZSl7c3VwZXIuc2V0UGFyYW1zKGUpLHRoaXMuc2V0TnVtQ29uZGl0aW9ucyhlKSx0aGlzLmRlZmF1bHRKb2luT3BlcmF0b3I9dGhpcy5nZXREZWZhdWx0Sm9pbk9wZXJhdG9yKGUuZGVmYXVsdEpvaW5PcGVyYXRvciksdGhpcy5maWx0ZXJQbGFjZWhvbGRlcj1lLmZpbHRlclBsYWNlaG9sZGVyLHRoaXMub3B0aW9uc0ZhY3Rvcnk9bmV3IHZyLHRoaXMub3B0aW9uc0ZhY3RvcnkuaW5pdChlLHRoaXMuZ2V0RGVmYXVsdEZpbHRlck9wdGlvbnMoKSksdGhpcy5jcmVhdGVGaWx0ZXJMaXN0T3B0aW9ucygpLHRoaXMuY3JlYXRlT3B0aW9uKCksdGhpcy5jcmVhdGVNaXNzaW5nQ29uZGl0aW9uc0FuZE9wZXJhdG9ycygpLHRoaXMuaXNSZWFkT25seSgpJiZ0aGlzLmVGaWx0ZXJCb2R5LnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCItMSIpfXNldE51bUNvbmRpdGlvbnMoZSl7dmFyIHQsaTtudWxsIT1lLnN1cHByZXNzQW5kT3JDb25kaXRpb24mJmooJ1NpbmNlIHYyOS4yICJmaWx0ZXJQYXJhbXMuc3VwcHJlc3NBbmRPckNvbmRpdGlvbiIgaXMgZGVwcmVjYXRlZC4gVXNlICJmaWx0ZXJQYXJhbXMubWF4TnVtQ29uZGl0aW9ucyA9IDEiIGluc3RlYWQuJyksbnVsbCE9ZS5hbHdheXNTaG93Qm90aENvbmRpdGlvbnMmJmooJ1NpbmNlIHYyOS4yICJmaWx0ZXJQYXJhbXMuYWx3YXlzU2hvd0JvdGhDb25kaXRpb25zIiBpcyBkZXByZWNhdGVkLiBVc2UgImZpbHRlclBhcmFtcy5udW1BbHdheXNWaXNpYmxlQ29uZGl0aW9ucyA9IDIiIGluc3RlYWQuJyksdGhpcy5tYXhOdW1Db25kaXRpb25zPW51bGwhPT0odD1lLm1heE51bUNvbmRpdGlvbnMpJiZ2b2lkIDAhPT10P3Q6ZS5zdXBwcmVzc0FuZE9yQ29uZGl0aW9uPzE6Mix0aGlzLm1heE51bUNvbmRpdGlvbnM8MSYmKGooJyJmaWx0ZXJQYXJhbXMubWF4TnVtQ29uZGl0aW9ucyIgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gemVyby4nKSx0aGlzLm1heE51bUNvbmRpdGlvbnM9MSksdGhpcy5udW1BbHdheXNWaXNpYmxlQ29uZGl0aW9ucz1udWxsIT09KGk9ZS5udW1BbHdheXNWaXNpYmxlQ29uZGl0aW9ucykmJnZvaWQgMCE9PWk/aTplLmFsd2F5c1Nob3dCb3RoQ29uZGl0aW9ucz8yOjEsdGhpcy5udW1BbHdheXNWaXNpYmxlQ29uZGl0aW9uczwxJiYoaignImZpbHRlclBhcmFtcy5udW1BbHdheXNWaXNpYmxlQ29uZGl0aW9ucyIgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gemVyby4nKSx0aGlzLm51bUFsd2F5c1Zpc2libGVDb25kaXRpb25zPTEpLHRoaXMubnVtQWx3YXlzVmlzaWJsZUNvbmRpdGlvbnM+dGhpcy5tYXhOdW1Db25kaXRpb25zJiYoaignImZpbHRlclBhcmFtcy5udW1BbHdheXNWaXNpYmxlQ29uZGl0aW9ucyIgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiAiZmlsdGVyUGFyYW1zLm1heE51bUNvbmRpdGlvbnMiLicpLHRoaXMubnVtQWx3YXlzVmlzaWJsZUNvbmRpdGlvbnM9dGhpcy5tYXhOdW1Db25kaXRpb25zKX1jcmVhdGVPcHRpb24oKXtjb25zdCBlPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IExyKTt0aGlzLmVUeXBlcy5wdXNoKGUpLGUuYWRkQ3NzQ2xhc3MoImFnLWZpbHRlci1zZWxlY3QiKSx0aGlzLmVGaWx0ZXJCb2R5LmFwcGVuZENoaWxkKGUuZ2V0R3VpKCkpO2NvbnN0IHQ9dGhpcy5jcmVhdGVWYWx1ZUVsZW1lbnQoKTt0aGlzLmVDb25kaXRpb25Cb2RpZXMucHVzaCh0KSx0aGlzLmVGaWx0ZXJCb2R5LmFwcGVuZENoaWxkKHQpLHRoaXMucHV0T3B0aW9uc0ludG9Ecm9wZG93bihlKSx0aGlzLnJlc2V0VHlwZShlKTtjb25zdCBpPXRoaXMuZ2V0TnVtQ29uZGl0aW9ucygpLTE7dGhpcy5mb3JFYWNoUG9zaXRpb25JbnB1dChpLGU9PnRoaXMucmVzZXRJbnB1dChlKSksdGhpcy5hZGRDaGFuZ2VkTGlzdGVuZXJzKGUsaSl9Y3JlYXRlSm9pbk9wZXJhdG9yUGFuZWwoKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuZUpvaW5PcGVyYXRvclBhbmVscy5wdXNoKGUpLGUuY2xhc3NMaXN0LmFkZCgiYWctZmlsdGVyLWNvbmRpdGlvbiIpO2NvbnN0IHQ9dGhpcy5jcmVhdGVKb2luT3BlcmF0b3IodGhpcy5lSm9pbk9wZXJhdG9yc0FuZCxlLCJhbmQiKSxpPXRoaXMuY3JlYXRlSm9pbk9wZXJhdG9yKHRoaXMuZUpvaW5PcGVyYXRvcnNPcixlLCJvciIpO3RoaXMuZUZpbHRlckJvZHkuYXBwZW5kQ2hpbGQoZSk7Y29uc3Qgcz10aGlzLmVKb2luT3BlcmF0b3JQYW5lbHMubGVuZ3RoLTEscj10aGlzLmpvaW5PcGVyYXRvcklkKys7dGhpcy5yZXNldEpvaW5PcGVyYXRvckFuZCh0LHMsciksdGhpcy5yZXNldEpvaW5PcGVyYXRvck9yKGkscyxyKSx0aGlzLmlzUmVhZE9ubHkoKXx8KHQub25WYWx1ZUNoYW5nZSh0aGlzLmxpc3RlbmVyKSxpLm9uVmFsdWVDaGFuZ2UodGhpcy5saXN0ZW5lcikpfWNyZWF0ZUpvaW5PcGVyYXRvcihlLHQsaSl7Y29uc3Qgcz10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBHcik7cmV0dXJuIGUucHVzaChzKSxzLmFkZENzc0NsYXNzKCJhZy1maWx0ZXItY29uZGl0aW9uLW9wZXJhdG9yIikscy5hZGRDc3NDbGFzcygiYWctZmlsdGVyLWNvbmRpdGlvbi1vcGVyYXRvci0iK2kpLHQuYXBwZW5kQ2hpbGQocy5nZXRHdWkoKSksc31nZXREZWZhdWx0Sm9pbk9wZXJhdG9yKGUpe3JldHVybiJBTkQiPT09ZXx8Ik9SIj09PWU/ZToiQU5EIn1jcmVhdGVGaWx0ZXJMaXN0T3B0aW9ucygpe2NvbnN0IGU9dGhpcy5vcHRpb25zRmFjdG9yeS5nZXRGaWx0ZXJPcHRpb25zKCk7dGhpcy5maWx0ZXJMaXN0T3B0aW9ucz1lLm1hcChlPT4ic3RyaW5nIj09dHlwZW9mIGU/dGhpcy5jcmVhdGVCb2lsZXJwbGF0ZUxpc3RPcHRpb24oZSk6dGhpcy5jcmVhdGVDdXN0b21MaXN0T3B0aW9uKGUpKX1wdXRPcHRpb25zSW50b0Ryb3Bkb3duKGUpe3RoaXMuZmlsdGVyTGlzdE9wdGlvbnMuZm9yRWFjaCh0PT57ZS5hZGRPcHRpb24odCl9KSxlLnNldERpc2FibGVkKHRoaXMuZmlsdGVyTGlzdE9wdGlvbnMubGVuZ3RoPD0xKX1jcmVhdGVCb2lsZXJwbGF0ZUxpc3RPcHRpb24oZSl7cmV0dXJue3ZhbHVlOmUsdGV4dDp0aGlzLnRyYW5zbGF0ZShlKX19Y3JlYXRlQ3VzdG9tTGlzdE9wdGlvbihlKXtjb25zdHtkaXNwbGF5S2V5OnR9PWUsaT10aGlzLm9wdGlvbnNGYWN0b3J5LmdldEN1c3RvbU9wdGlvbihlLmRpc3BsYXlLZXkpO3JldHVybnt2YWx1ZTp0LHRleHQ6aT90aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKShpLmRpc3BsYXlLZXksaS5kaXNwbGF5TmFtZSk6dGhpcy50cmFuc2xhdGUodCl9fWlzQWxsb3dUd29Db25kaXRpb25zKCl7cmV0dXJuIHRoaXMubWF4TnVtQ29uZGl0aW9ucz49Mn1jcmVhdGVCb2R5VGVtcGxhdGUoKXtyZXR1cm4iIn1nZXRDc3NJZGVudGlmaWVyKCl7cmV0dXJuInNpbXBsZS1maWx0ZXIifXVwZGF0ZVVpVmlzaWJpbGl0eSgpe2NvbnN0IGU9dGhpcy5nZXRKb2luT3BlcmF0b3IoKTt0aGlzLnVwZGF0ZU51bUNvbmRpdGlvbnMoKSx0aGlzLnVwZGF0ZUNvbmRpdGlvblN0YXR1c2VzQW5kVmFsdWVzKHRoaXMubGFzdFVpQ29tcGxldGVQb3NpdGlvbixlKX11cGRhdGVOdW1Db25kaXRpb25zKCl7dmFyIGU7bGV0IHQ9LTEsaT0hMDtmb3IobGV0IGU9MDtlPHRoaXMuZ2V0TnVtQ29uZGl0aW9ucygpO2UrKyl0aGlzLmlzQ29uZGl0aW9uVWlDb21wbGV0ZShlKT90PWU6aT0hMTtpZih0aGlzLnNob3VsZEFkZE5ld0NvbmRpdGlvbkF0RW5kKGkpKXRoaXMuY3JlYXRlSm9pbk9wZXJhdG9yUGFuZWwoKSx0aGlzLmNyZWF0ZU9wdGlvbigpO2Vsc2V7Y29uc3QgaT1udWxsIT09KGU9dGhpcy5sYXN0VWlDb21wbGV0ZVBvc2l0aW9uKSYmdm9pZCAwIT09ZT9lOnRoaXMuZ2V0TnVtQ29uZGl0aW9ucygpLTI7aWYodDxpKXt0aGlzLnJlbW92ZUNvbmRpdGlvbnNBbmRPcGVyYXRvcnMoaSsxKTtjb25zdCBlPXQrMSxzPWktZTtzPjAmJnRoaXMucmVtb3ZlQ29uZGl0aW9uc0FuZE9wZXJhdG9ycyhlLHMpLHRoaXMuY3JlYXRlTWlzc2luZ0NvbmRpdGlvbnNBbmRPcGVyYXRvcnMoKX19dGhpcy5sYXN0VWlDb21wbGV0ZVBvc2l0aW9uPXR9dXBkYXRlQ29uZGl0aW9uU3RhdHVzZXNBbmRWYWx1ZXMoZSx0KXt0aGlzLmVUeXBlcy5mb3JFYWNoKCh0LGkpPT57Y29uc3Qgcz10aGlzLmlzQ29uZGl0aW9uRGlzYWJsZWQoaSxlKTt0LnNldERpc2FibGVkKHN8fHRoaXMuZmlsdGVyTGlzdE9wdGlvbnMubGVuZ3RoPD0xKSwxPT09aSYmKHJzKHRoaXMuZUpvaW5PcGVyYXRvclBhbmVsc1swXSxzKSx0aGlzLmVKb2luT3BlcmF0b3JzQW5kWzBdLnNldERpc2FibGVkKHMpLHRoaXMuZUpvaW5PcGVyYXRvcnNPclswXS5zZXREaXNhYmxlZChzKSl9KSx0aGlzLmVDb25kaXRpb25Cb2RpZXMuZm9yRWFjaCgoZSx0KT0+e2lzKGUsdGhpcy5pc0NvbmRpdGlvbkJvZHlWaXNpYmxlKHQpKX0pO2NvbnN0IGk9Ik9SIj09PShudWxsIT10P3Q6dGhpcy5nZXRKb2luT3BlcmF0b3IoKSk7dGhpcy5lSm9pbk9wZXJhdG9yc0FuZC5mb3JFYWNoKChlLHQpPT57ZS5zZXRWYWx1ZSghaSwhMCl9KSx0aGlzLmVKb2luT3BlcmF0b3JzT3IuZm9yRWFjaCgoZSx0KT0+e2Uuc2V0VmFsdWUoaSwhMCl9KSx0aGlzLmZvckVhY2hJbnB1dCgodCxpLHMscik9Pnt0aGlzLnNldEVsZW1lbnREaXNwbGF5ZWQodCxpPHIpLHRoaXMuc2V0RWxlbWVudERpc2FibGVkKHQsdGhpcy5pc0NvbmRpdGlvbkRpc2FibGVkKHMsZSkpfSksdGhpcy5yZXNldFBsYWNlaG9sZGVyKCl9c2hvdWxkQWRkTmV3Q29uZGl0aW9uQXRFbmQoZSl7cmV0dXJuIGUmJnRoaXMuZ2V0TnVtQ29uZGl0aW9ucygpPHRoaXMubWF4TnVtQ29uZGl0aW9ucyYmIXRoaXMuaXNSZWFkT25seSgpfXJlbW92ZUNvbmRpdGlvbnNBbmRPcGVyYXRvcnMoZSx0KXtpZihlPj10aGlzLmdldE51bUNvbmRpdGlvbnMoKSlyZXR1cm47dGhpcy5yZW1vdmVDb21wb25lbnRzKHRoaXMuZVR5cGVzLGUsdCksdGhpcy5yZW1vdmVFbGVtZW50cyh0aGlzLmVDb25kaXRpb25Cb2RpZXMsZSx0KSx0aGlzLnJlbW92ZVZhbHVlRWxlbWVudHMoZSx0KTtjb25zdCBpPU1hdGgubWF4KGUtMSwwKTt0aGlzLnJlbW92ZUVsZW1lbnRzKHRoaXMuZUpvaW5PcGVyYXRvclBhbmVscyxpLHQpLHRoaXMucmVtb3ZlQ29tcG9uZW50cyh0aGlzLmVKb2luT3BlcmF0b3JzQW5kLGksdCksdGhpcy5yZW1vdmVDb21wb25lbnRzKHRoaXMuZUpvaW5PcGVyYXRvcnNPcixpLHQpfXJlbW92ZUVsZW1lbnRzKGUsdCxpKXt0aGlzLnJlbW92ZUl0ZW1zKGUsdCxpKS5mb3JFYWNoKGU9PmZzKGUpKX1yZW1vdmVDb21wb25lbnRzKGUsdCxpKXt0aGlzLnJlbW92ZUl0ZW1zKGUsdCxpKS5mb3JFYWNoKGU9PntmcyhlLmdldEd1aSgpKSx0aGlzLmRlc3Ryb3lCZWFuKGUpfSl9cmVtb3ZlSXRlbXMoZSx0LGkpe3JldHVybiBudWxsPT1pP2Uuc3BsaWNlKHQpOmUuc3BsaWNlKHQsaSl9YWZ0ZXJHdWlBdHRhY2hlZChlKXtpZihzdXBlci5hZnRlckd1aUF0dGFjaGVkKGUpLHRoaXMucmVzZXRQbGFjZWhvbGRlcigpLCEobnVsbD09ZT92b2lkIDA6ZS5zdXBwcmVzc0ZvY3VzKSlpZih0aGlzLmlzUmVhZE9ubHkoKSl0aGlzLmVGaWx0ZXJCb2R5LmZvY3VzKCk7ZWxzZXtjb25zdCBlPXRoaXMuZ2V0SW5wdXRzKDApWzBdO2lmKCFlKXJldHVybjtlIGluc3RhbmNlb2YgSXImJmUuZ2V0SW5wdXRFbGVtZW50KCkuZm9jdXMoKX19YWZ0ZXJHdWlEZXRhY2hlZCgpe3N1cGVyLmFmdGVyR3VpRGV0YWNoZWQoKTtjb25zdCBlPXRoaXMuZ2V0TW9kZWwoKTt0aGlzLnJlc2V0VWlUb0FjdGl2ZU1vZGVsKGUpO2xldCB0PS0xLGk9LTEscz0hMTtjb25zdCByPXRoaXMuZ2V0Sm9pbk9wZXJhdG9yKCk7Zm9yKGxldCBlPXRoaXMuZ2V0TnVtQ29uZGl0aW9ucygpLTE7ZT49MDtlLS0paWYodGhpcy5pc0NvbmRpdGlvblVpQ29tcGxldGUoZSkpLTE9PT10JiYodD1lLGk9ZSk7ZWxzZXtjb25zdCByPWU8dDsoZT49dGhpcy5udW1BbHdheXNWaXNpYmxlQ29uZGl0aW9ucyYmIXRoaXMuaXNDb25kaXRpb25VaUNvbXBsZXRlKGUtMSl8fHIpJiYodGhpcy5yZW1vdmVDb25kaXRpb25zQW5kT3BlcmF0b3JzKGUsMSkscz0hMCxyJiZpLS0pfWxldCBvPSExO3RoaXMuZ2V0TnVtQ29uZGl0aW9ucygpPHRoaXMubnVtQWx3YXlzVmlzaWJsZUNvbmRpdGlvbnMmJih0aGlzLmNyZWF0ZU1pc3NpbmdDb25kaXRpb25zQW5kT3BlcmF0b3JzKCksbz0hMCksdGhpcy5zaG91bGRBZGROZXdDb25kaXRpb25BdEVuZChpPT09dGhpcy5nZXROdW1Db25kaXRpb25zKCktMSkmJih0aGlzLmNyZWF0ZUpvaW5PcGVyYXRvclBhbmVsKCksdGhpcy5jcmVhdGVPcHRpb24oKSxvPSEwKSxvJiZ0aGlzLnVwZGF0ZUNvbmRpdGlvblN0YXR1c2VzQW5kVmFsdWVzKGkscikscyYmdGhpcy51cGRhdGVKb2luT3BlcmF0b3JzRGlzYWJsZWQoKSx0aGlzLmxhc3RVaUNvbXBsZXRlUG9zaXRpb249aX1nZXRQbGFjZWhvbGRlclRleHQoZSx0KXtsZXQgaT10aGlzLnRyYW5zbGF0ZShlKTtpZihLKHRoaXMuZmlsdGVyUGxhY2Vob2xkZXIpKXtjb25zdCBlPXRoaXMuZmlsdGVyUGxhY2Vob2xkZXIscz10aGlzLmVUeXBlc1t0XS5nZXRWYWx1ZSgpO2k9ZSh7ZmlsdGVyT3B0aW9uS2V5OnMsZmlsdGVyT3B0aW9uOnRoaXMudHJhbnNsYXRlKHMpLHBsYWNlaG9sZGVyOml9KX1lbHNlInN0cmluZyI9PXR5cGVvZiB0aGlzLmZpbHRlclBsYWNlaG9sZGVyJiYoaT10aGlzLmZpbHRlclBsYWNlaG9sZGVyKTtyZXR1cm4gaX1yZXNldFBsYWNlaG9sZGVyKCl7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTt0aGlzLmZvckVhY2hJbnB1dCgodCxpLHMscik9PntpZighKHQgaW5zdGFuY2VvZiBJcikpcmV0dXJuO2NvbnN0IG89MD09PWkmJnI+MT8iaW5SYW5nZVN0YXJ0IjowPT09aT8iZmlsdGVyT29vIjoiaW5SYW5nZUVuZCIsbj0wPT09aSYmcj4xP2UoImFyaWFGaWx0ZXJGcm9tVmFsdWUiLCJGaWx0ZXIgZnJvbSB2YWx1ZSIpOjA9PT1pP2UoImFyaWFGaWx0ZXJWYWx1ZSIsIkZpbHRlciBWYWx1ZSIpOmUoImFyaWFGaWx0ZXJUb1ZhbHVlIiwiRmlsdGVyIHRvIFZhbHVlIik7dC5zZXRJbnB1dFBsYWNlaG9sZGVyKHRoaXMuZ2V0UGxhY2Vob2xkZXJUZXh0KG8scykpLHQuc2V0SW5wdXRBcmlhTGFiZWwobil9KX1zZXRFbGVtZW50VmFsdWUoZSx0LGkpe2UgaW5zdGFuY2VvZiBJciYmZS5zZXRWYWx1ZShudWxsIT10P1N0cmluZyh0KTpudWxsLCEwKX1zZXRFbGVtZW50RGlzcGxheWVkKGUsdCl7ZSBpbnN0YW5jZW9mIGNyJiZpcyhlLmdldEd1aSgpLHQpfXNldEVsZW1lbnREaXNhYmxlZChlLHQpe2UgaW5zdGFuY2VvZiBjciYmcnMoZS5nZXRHdWkoKSx0KX1hdHRhY2hFbGVtZW50T25DaGFuZ2UoZSx0KXtlIGluc3RhbmNlb2YgSXImJmUub25WYWx1ZUNoYW5nZSh0KX1mb3JFYWNoSW5wdXQoZSl7dGhpcy5nZXRDb25kaXRpb25UeXBlcygpLmZvckVhY2goKHQsaSk9Pnt0aGlzLmZvckVhY2hQb3NpdGlvblR5cGVJbnB1dChpLHQsZSl9KX1mb3JFYWNoUG9zaXRpb25JbnB1dChlLHQpe2NvbnN0IGk9dGhpcy5nZXRDb25kaXRpb25UeXBlKGUpO3RoaXMuZm9yRWFjaFBvc2l0aW9uVHlwZUlucHV0KGUsaSx0KX1mb3JFYWNoUG9zaXRpb25UeXBlSW5wdXQoZSx0LGkpe2NvbnN0IHM9dGhpcy5nZXROdW1iZXJPZklucHV0cyh0KSxyPXRoaXMuZ2V0SW5wdXRzKGUpO2ZvcihsZXQgdD0wO3Q8ci5sZW5ndGg7dCsrKXtjb25zdCBvPXJbdF07bnVsbCE9byYmaShvLHQsZSxzKX19aXNDb25kaXRpb25EaXNhYmxlZChlLHQpe3JldHVybiEhdGhpcy5pc1JlYWRPbmx5KCl8fDAhPT1lJiZlPnQrMX1pc0NvbmRpdGlvbkJvZHlWaXNpYmxlKGUpe2NvbnN0IHQ9dGhpcy5nZXRDb25kaXRpb25UeXBlKGUpO3JldHVybiB0aGlzLmdldE51bWJlck9mSW5wdXRzKHQpPjB9aXNDb25kaXRpb25VaUNvbXBsZXRlKGUpe2lmKGU+PXRoaXMuZ2V0TnVtQ29uZGl0aW9ucygpKXJldHVybiExO3JldHVybiB0aGlzLmdldENvbmRpdGlvblR5cGUoZSkhPT1fci5FTVBUWSYmIXRoaXMuZ2V0VmFsdWVzKGUpLnNvbWUoZT0+bnVsbD09ZSl9Z2V0TnVtQ29uZGl0aW9ucygpe3JldHVybiB0aGlzLmVUeXBlcy5sZW5ndGh9Z2V0VWlDb21wbGV0ZUNvbmRpdGlvbnMoKXtjb25zdCBlPVtdO2ZvcihsZXQgdD0wO3Q8dGhpcy5nZXROdW1Db25kaXRpb25zKCk7dCsrKXRoaXMuaXNDb25kaXRpb25VaUNvbXBsZXRlKHQpJiZlLnB1c2godGhpcy5jcmVhdGVDb25kaXRpb24odCkpO3JldHVybiBlfWNyZWF0ZU1pc3NpbmdDb25kaXRpb25zQW5kT3BlcmF0b3JzKCl7aWYoIXRoaXMuaXNSZWFkT25seSgpKWZvcihsZXQgZT10aGlzLmdldE51bUNvbmRpdGlvbnMoKTtlPHRoaXMubnVtQWx3YXlzVmlzaWJsZUNvbmRpdGlvbnM7ZSsrKXRoaXMuY3JlYXRlSm9pbk9wZXJhdG9yUGFuZWwoKSx0aGlzLmNyZWF0ZU9wdGlvbigpfXJlc2V0VWlUb0RlZmF1bHRzKGUpe3JldHVybiB0aGlzLnJlbW92ZUNvbmRpdGlvbnNBbmRPcGVyYXRvcnModGhpcy5pc1JlYWRPbmx5KCk/MTp0aGlzLm51bUFsd2F5c1Zpc2libGVDb25kaXRpb25zKSx0aGlzLmVUeXBlcy5mb3JFYWNoKGU9PnRoaXMucmVzZXRUeXBlKGUpKSx0aGlzLmVKb2luT3BlcmF0b3JzQW5kLmZvckVhY2goKGUsdCk9PnRoaXMucmVzZXRKb2luT3BlcmF0b3JBbmQoZSx0LHRoaXMuam9pbk9wZXJhdG9ySWQrdCkpLHRoaXMuZUpvaW5PcGVyYXRvcnNPci5mb3JFYWNoKChlLHQpPT50aGlzLnJlc2V0Sm9pbk9wZXJhdG9yT3IoZSx0LHRoaXMuam9pbk9wZXJhdG9ySWQrdCkpLHRoaXMuam9pbk9wZXJhdG9ySWQrKyx0aGlzLmZvckVhY2hJbnB1dChlPT50aGlzLnJlc2V0SW5wdXQoZSkpLHRoaXMucmVzZXRQbGFjZWhvbGRlcigpLHRoaXMuY3JlYXRlTWlzc2luZ0NvbmRpdGlvbnNBbmRPcGVyYXRvcnMoKSx0aGlzLmxhc3RVaUNvbXBsZXRlUG9zaXRpb249bnVsbCxlfHx0aGlzLm9uVWlDaGFuZ2VkKCksdHIucmVzb2x2ZSgpfXJlc2V0VHlwZShlKXtjb25zdCB0PXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpKCJhcmlhRmlsdGVyaW5nT3BlcmF0b3IiLCJGaWx0ZXJpbmcgb3BlcmF0b3IiKTtlLnNldFZhbHVlKHRoaXMub3B0aW9uc0ZhY3RvcnkuZ2V0RGVmYXVsdE9wdGlvbigpLCEwKS5zZXRBcmlhTGFiZWwodCkuc2V0RGlzYWJsZWQodGhpcy5pc1JlYWRPbmx5KCl8fHRoaXMuZmlsdGVyTGlzdE9wdGlvbnMubGVuZ3RoPD0xKX1yZXNldEpvaW5PcGVyYXRvckFuZChlLHQsaSl7dGhpcy5yZXNldEpvaW5PcGVyYXRvcihlLHQsdGhpcy5pc0RlZmF1bHRPcGVyYXRvcigiQU5EIiksdGhpcy50cmFuc2xhdGUoImFuZENvbmRpdGlvbiIpLGkpfXJlc2V0Sm9pbk9wZXJhdG9yT3IoZSx0LGkpe3RoaXMucmVzZXRKb2luT3BlcmF0b3IoZSx0LHRoaXMuaXNEZWZhdWx0T3BlcmF0b3IoIk9SIiksdGhpcy50cmFuc2xhdGUoIm9yQ29uZGl0aW9uIiksaSl9cmVzZXRKb2luT3BlcmF0b3IoZSx0LGkscyxyKXt0aGlzLnVwZGF0ZUpvaW5PcGVyYXRvckRpc2FibGVkKGUuc2V0VmFsdWUoaSwhMCkuc2V0TmFtZShgYWctc2ltcGxlLWZpbHRlci1hbmQtb3ItJHt0aGlzLmdldENvbXBJZCgpfS0ke3J9YCkuc2V0TGFiZWwocyksdCl9dXBkYXRlSm9pbk9wZXJhdG9yc0Rpc2FibGVkKCl7dGhpcy5lSm9pbk9wZXJhdG9yc0FuZC5mb3JFYWNoKChlLHQpPT50aGlzLnVwZGF0ZUpvaW5PcGVyYXRvckRpc2FibGVkKGUsdCkpLHRoaXMuZUpvaW5PcGVyYXRvcnNPci5mb3JFYWNoKChlLHQpPT50aGlzLnVwZGF0ZUpvaW5PcGVyYXRvckRpc2FibGVkKGUsdCkpfXVwZGF0ZUpvaW5PcGVyYXRvckRpc2FibGVkKGUsdCl7ZS5zZXREaXNhYmxlZCh0aGlzLmlzUmVhZE9ubHkoKXx8dD4wKX1yZXNldElucHV0KGUpe3RoaXMuc2V0RWxlbWVudFZhbHVlKGUsbnVsbCksdGhpcy5zZXRFbGVtZW50RGlzYWJsZWQoZSx0aGlzLmlzUmVhZE9ubHkoKSl9c2V0Q29uZGl0aW9uSW50b1VpKGUsdCl7Y29uc3QgaT10aGlzLm1hcFZhbHVlc0Zyb21Nb2RlbChlKTt0aGlzLmZvckVhY2hJbnB1dCgoZSxzLHIsbyk9PntyPT09dCYmdGhpcy5zZXRFbGVtZW50VmFsdWUoZSxudWxsIT1pW3NdP2lbc106bnVsbCl9KX1zZXRWYWx1ZUZyb21GbG9hdGluZ0ZpbHRlcihlKXt0aGlzLmZvckVhY2hJbnB1dCgodCxpLHMscik9Pnt0aGlzLnNldEVsZW1lbnRWYWx1ZSh0LDA9PT1pJiYwPT09cz9lOm51bGwsITApfSl9aXNEZWZhdWx0T3BlcmF0b3IoZSl7cmV0dXJuIGU9PT10aGlzLmRlZmF1bHRKb2luT3BlcmF0b3J9YWRkQ2hhbmdlZExpc3RlbmVycyhlLHQpe3RoaXMuaXNSZWFkT25seSgpfHwoZS5vblZhbHVlQ2hhbmdlKHRoaXMubGlzdGVuZXIpLHRoaXMuZm9yRWFjaFBvc2l0aW9uSW5wdXQodCxlPT57dGhpcy5hdHRhY2hFbGVtZW50T25DaGFuZ2UoZSx0aGlzLmxpc3RlbmVyKX0pKX1pbmRpdmlkdWFsQ29uZGl0aW9uUGFzc2VzKGUsdCl7Y29uc3QgaT10aGlzLmdldENlbGxWYWx1ZShlLm5vZGUpLHM9dGhpcy5tYXBWYWx1ZXNGcm9tTW9kZWwodCkscj10aGlzLm9wdGlvbnNGYWN0b3J5LmdldEN1c3RvbU9wdGlvbih0LnR5cGUpLG89dGhpcy5ldmFsdWF0ZUN1c3RvbUZpbHRlcihyLHMsaSk7cmV0dXJuIG51bGwhPW8/bzpudWxsPT1pP3RoaXMuZXZhbHVhdGVOdWxsVmFsdWUodC50eXBlKTp0aGlzLmV2YWx1YXRlTm9uTnVsbFZhbHVlKHMsaSx0LGUpfWV2YWx1YXRlQ3VzdG9tRmlsdGVyKGUsdCxpKXtpZihudWxsPT1lKXJldHVybjtjb25zdHtwcmVkaWNhdGU6c309ZTtyZXR1cm4gbnVsbD09c3x8dC5zb21lKGU9Pm51bGw9PWUpP3ZvaWQgMDpzKHQsaSl9aXNCbGFuayhlKXtyZXR1cm4gbnVsbD09ZXx8InN0cmluZyI9PXR5cGVvZiBlJiYwPT09ZS50cmltKCkubGVuZ3RofWhhc0ludmFsaWRJbnB1dHMoKXtyZXR1cm4hMX19X3IuRU1QVFk9ImVtcHR5Iixfci5CTEFOSz0iYmxhbmsiLF9yLk5PVF9CTEFOSz0ibm90QmxhbmsiLF9yLkVRVUFMUz0iZXF1YWxzIixfci5OT1RfRVFVQUw9Im5vdEVxdWFsIixfci5MRVNTX1RIQU49Imxlc3NUaGFuIixfci5MRVNTX1RIQU5fT1JfRVFVQUw9Imxlc3NUaGFuT3JFcXVhbCIsX3IuR1JFQVRFUl9USEFOPSJncmVhdGVyVGhhbiIsX3IuR1JFQVRFUl9USEFOX09SX0VRVUFMPSJncmVhdGVyVGhhbk9yRXF1YWwiLF9yLklOX1JBTkdFPSJpblJhbmdlIixfci5DT05UQUlOUz0iY29udGFpbnMiLF9yLk5PVF9DT05UQUlOUz0ibm90Q29udGFpbnMiLF9yLlNUQVJUU19XSVRIPSJzdGFydHNXaXRoIixfci5FTkRTX1dJVEg9ImVuZHNXaXRoIjtjbGFzcyBWciBleHRlbmRzIF9ye3NldFBhcmFtcyhlKXtzdXBlci5zZXRQYXJhbXMoZSksdGhpcy5zY2FsYXJGaWx0ZXJQYXJhbXM9ZX1ldmFsdWF0ZU51bGxWYWx1ZShlKXtzd2l0Y2goZSl7Y2FzZSBWci5FUVVBTFM6Y2FzZSBWci5OT1RfRVFVQUw6aWYodGhpcy5zY2FsYXJGaWx0ZXJQYXJhbXMuaW5jbHVkZUJsYW5rc0luRXF1YWxzKXJldHVybiEwO2JyZWFrO2Nhc2UgVnIuR1JFQVRFUl9USEFOOmNhc2UgVnIuR1JFQVRFUl9USEFOX09SX0VRVUFMOmlmKHRoaXMuc2NhbGFyRmlsdGVyUGFyYW1zLmluY2x1ZGVCbGFua3NJbkdyZWF0ZXJUaGFuKXJldHVybiEwO2JyZWFrO2Nhc2UgVnIuTEVTU19USEFOOmNhc2UgVnIuTEVTU19USEFOX09SX0VRVUFMOmlmKHRoaXMuc2NhbGFyRmlsdGVyUGFyYW1zLmluY2x1ZGVCbGFua3NJbkxlc3NUaGFuKXJldHVybiEwO2JyZWFrO2Nhc2UgVnIuSU5fUkFOR0U6aWYodGhpcy5zY2FsYXJGaWx0ZXJQYXJhbXMuaW5jbHVkZUJsYW5rc0luUmFuZ2UpcmV0dXJuITA7YnJlYWs7Y2FzZSBWci5CTEFOSzpyZXR1cm4hMDtjYXNlIFZyLk5PVF9CTEFOSzpyZXR1cm4hMX1yZXR1cm4hMX1ldmFsdWF0ZU5vbk51bGxWYWx1ZShlLHQsaSl7Y29uc3Qgcz10aGlzLmNvbXBhcmF0b3IoKSxyPW51bGwhPWVbMF0/cyhlWzBdLHQpOjA7c3dpdGNoKGkudHlwZSl7Y2FzZSBWci5FUVVBTFM6cmV0dXJuIDA9PT1yO2Nhc2UgVnIuTk9UX0VRVUFMOnJldHVybiAwIT09cjtjYXNlIFZyLkdSRUFURVJfVEhBTjpyZXR1cm4gcj4wO2Nhc2UgVnIuR1JFQVRFUl9USEFOX09SX0VRVUFMOnJldHVybiByPj0wO2Nhc2UgVnIuTEVTU19USEFOOnJldHVybiByPDA7Y2FzZSBWci5MRVNTX1RIQU5fT1JfRVFVQUw6cmV0dXJuIHI8PTA7Y2FzZSBWci5JTl9SQU5HRTp7Y29uc3QgaT1zKGVbMV0sdCk7cmV0dXJuIHRoaXMuc2NhbGFyRmlsdGVyUGFyYW1zLmluUmFuZ2VJbmNsdXNpdmU/cj49MCYmaTw9MDpyPjAmJmk8MH1jYXNlIFZyLkJMQU5LOnJldHVybiB0aGlzLmlzQmxhbmsodCk7Y2FzZSBWci5OT1RfQkxBTks6cmV0dXJuIXRoaXMuaXNCbGFuayh0KTtkZWZhdWx0OnJldHVybiBjb25zb2xlLndhcm4oJ0FHIEdyaWQ6IFVuZXhwZWN0ZWQgdHlwZSBvZiBmaWx0ZXIgIicraS50eXBlKyciLCBpdCBsb29rcyBsaWtlIHRoZSBmaWx0ZXIgd2FzIGNvbmZpZ3VyZWQgd2l0aCBpbmNvcnJlY3QgRmlsdGVyIE9wdGlvbnMnKSwhMH19fXZhciBCcj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBIciBleHRlbmRzIGtye2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcih0LGkpLHRoaXMuZGF0ZUZpbHRlclBhcmFtcz1lfWNvbmRpdGlvblRvU3RyaW5nKGUsdCl7Y29uc3R7dHlwZTppfT1lLHtudW1iZXJPZklucHV0czpzfT10fHx7fSxyPWk9PV9yLklOX1JBTkdFfHwyPT09cyxvPXFpKGUuZGF0ZUZyb20pLG49cWkoZS5kYXRlVG8pLGE9dGhpcy5kYXRlRmlsdGVyUGFyYW1zLmluUmFuZ2VGbG9hdGluZ0ZpbHRlckRhdGVGb3JtYXQ7aWYocil7cmV0dXJuYCR7bnVsbCE9PW8/WGkobyxhKToibnVsbCJ9LSR7bnVsbCE9PW4/WGkobixhKToibnVsbCJ9YH1yZXR1cm4gbnVsbCE9bz9YaShvLGEpOiIiK2l9dXBkYXRlUGFyYW1zKGUpe3N1cGVyLnVwZGF0ZVBhcmFtcyhlKSx0aGlzLmRhdGVGaWx0ZXJQYXJhbXM9ZS5kYXRlRmlsdGVyUGFyYW1zfX1jbGFzcyBXciBleHRlbmRzIFZye2NvbnN0cnVjdG9yKCl7c3VwZXIoImRhdGVGaWx0ZXIiKSx0aGlzLmVDb25kaXRpb25QYW5lbHNGcm9tPVtdLHRoaXMuZUNvbmRpdGlvblBhbmVsc1RvPVtdLHRoaXMuZGF0ZUNvbmRpdGlvbkZyb21Db21wcz1bXSx0aGlzLmRhdGVDb25kaXRpb25Ub0NvbXBzPVtdLHRoaXMubWluVmFsaWRZZWFyPTFlMyx0aGlzLm1heFZhbGlkWWVhcj0xLzAsdGhpcy5taW5WYWxpZERhdGU9bnVsbCx0aGlzLm1heFZhbGlkRGF0ZT1udWxsfWFmdGVyR3VpQXR0YWNoZWQoZSl7c3VwZXIuYWZ0ZXJHdWlBdHRhY2hlZChlKSx0aGlzLmRhdGVDb25kaXRpb25Gcm9tQ29tcHNbMF0uYWZ0ZXJHdWlBdHRhY2hlZChlKX1tYXBWYWx1ZXNGcm9tTW9kZWwoZSl7Y29uc3R7ZGF0ZUZyb206dCxkYXRlVG86aSx0eXBlOnN9PWV8fHt9O3JldHVyblt0JiZxaSh0KXx8bnVsbCxpJiZxaShpKXx8bnVsbF0uc2xpY2UoMCx0aGlzLmdldE51bWJlck9mSW5wdXRzKHMpKX1jb21wYXJhdG9yKCl7cmV0dXJuIHRoaXMuZGF0ZUZpbHRlclBhcmFtcy5jb21wYXJhdG9yP3RoaXMuZGF0ZUZpbHRlclBhcmFtcy5jb21wYXJhdG9yOnRoaXMuZGVmYXVsdENvbXBhcmF0b3IuYmluZCh0aGlzKX1kZWZhdWx0Q29tcGFyYXRvcihlLHQpe3JldHVybiBudWxsPT10fHx0PGU/LTE6dD5lPzE6MH1zZXRQYXJhbXMoZSl7dGhpcy5kYXRlRmlsdGVyUGFyYW1zPWUsc3VwZXIuc2V0UGFyYW1zKGUpO2NvbnN0IHQ9KHQsaSk9PntpZihudWxsIT1lW3RdKXtpZighaXNOYU4oZVt0XSkpcmV0dXJuIG51bGw9PWVbdF0/aTpOdW1iZXIoZVt0XSk7Y29uc29sZS53YXJuKGBBRyBHcmlkOiBEYXRlRmlsdGVyICR7dH0gaXMgbm90IGEgbnVtYmVyYCl9cmV0dXJuIGl9O3RoaXMubWluVmFsaWRZZWFyPXQoIm1pblZhbGlkWWVhciIsMWUzKSx0aGlzLm1heFZhbGlkWWVhcj10KCJtYXhWYWxpZFllYXIiLDEvMCksdGhpcy5taW5WYWxpZFllYXI+dGhpcy5tYXhWYWxpZFllYXImJmNvbnNvbGUud2FybigiQUcgR3JpZDogRGF0ZUZpbHRlciBtaW5WYWxpZFllYXIgc2hvdWxkIGJlIDw9IG1heFZhbGlkWWVhciIpLGUubWluVmFsaWREYXRlP3RoaXMubWluVmFsaWREYXRlPWUubWluVmFsaWREYXRlIGluc3RhbmNlb2YgRGF0ZT9lLm1pblZhbGlkRGF0ZTpxaShlLm1pblZhbGlkRGF0ZSk6dGhpcy5taW5WYWxpZERhdGU9bnVsbCxlLm1heFZhbGlkRGF0ZT90aGlzLm1heFZhbGlkRGF0ZT1lLm1heFZhbGlkRGF0ZSBpbnN0YW5jZW9mIERhdGU/ZS5tYXhWYWxpZERhdGU6cWkoZS5tYXhWYWxpZERhdGUpOnRoaXMubWF4VmFsaWREYXRlPW51bGwsdGhpcy5taW5WYWxpZERhdGUmJnRoaXMubWF4VmFsaWREYXRlJiZ0aGlzLm1pblZhbGlkRGF0ZT50aGlzLm1heFZhbGlkRGF0ZSYmY29uc29sZS53YXJuKCJBRyBHcmlkOiBEYXRlRmlsdGVyIG1pblZhbGlkRGF0ZSBzaG91bGQgYmUgPD0gbWF4VmFsaWREYXRlIiksdGhpcy5maWx0ZXJNb2RlbEZvcm1hdHRlcj1uZXcgSHIodGhpcy5kYXRlRmlsdGVyUGFyYW1zLHRoaXMubG9jYWxlU2VydmljZSx0aGlzLm9wdGlvbnNGYWN0b3J5KX1jcmVhdGVEYXRlQ29tcFdyYXBwZXIoZSl7Y29uc3QgdD1uZXcgZnIodGhpcy5nZXRDb250ZXh0KCksdGhpcy51c2VyQ29tcG9uZW50RmFjdG9yeSx7b25EYXRlQ2hhbmdlZDooKT0+dGhpcy5vblVpQ2hhbmdlZCgpLGZpbHRlclBhcmFtczp0aGlzLmRhdGVGaWx0ZXJQYXJhbXN9LGUpO3JldHVybiB0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT50LmRlc3Ryb3koKSksdH1zZXRFbGVtZW50VmFsdWUoZSx0KXtlLnNldERhdGUodCl9c2V0RWxlbWVudERpc3BsYXllZChlLHQpe2Uuc2V0RGlzcGxheWVkKHQpfXNldEVsZW1lbnREaXNhYmxlZChlLHQpe2Uuc2V0RGlzYWJsZWQodCl9Z2V0RGVmYXVsdEZpbHRlck9wdGlvbnMoKXtyZXR1cm4gV3IuREVGQVVMVF9GSUxURVJfT1BUSU9OU31jcmVhdGVWYWx1ZUVsZW1lbnQoKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLmNsYXNzTGlzdC5hZGQoImFnLWZpbHRlci1ib2R5IiksdGhpcy5jcmVhdGVGcm9tVG9FbGVtZW50KGUsdGhpcy5lQ29uZGl0aW9uUGFuZWxzRnJvbSx0aGlzLmRhdGVDb25kaXRpb25Gcm9tQ29tcHMsImZyb20iKSx0aGlzLmNyZWF0ZUZyb21Ub0VsZW1lbnQoZSx0aGlzLmVDb25kaXRpb25QYW5lbHNUbyx0aGlzLmRhdGVDb25kaXRpb25Ub0NvbXBzLCJ0byIpLGV9Y3JlYXRlRnJvbVRvRWxlbWVudChlLHQsaSxzKXtjb25zdCByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3IuY2xhc3NMaXN0LmFkZCgiYWctZmlsdGVyLSIrcyksci5jbGFzc0xpc3QuYWRkKCJhZy1maWx0ZXItZGF0ZS0iK3MpLHQucHVzaChyKSxlLmFwcGVuZENoaWxkKHIpLGkucHVzaCh0aGlzLmNyZWF0ZURhdGVDb21wV3JhcHBlcihyKSl9cmVtb3ZlVmFsdWVFbGVtZW50cyhlLHQpe3RoaXMucmVtb3ZlRGF0ZUNvbXBzKHRoaXMuZGF0ZUNvbmRpdGlvbkZyb21Db21wcyxlLHQpLHRoaXMucmVtb3ZlRGF0ZUNvbXBzKHRoaXMuZGF0ZUNvbmRpdGlvblRvQ29tcHMsZSx0KSx0aGlzLnJlbW92ZUl0ZW1zKHRoaXMuZUNvbmRpdGlvblBhbmVsc0Zyb20sZSx0KSx0aGlzLnJlbW92ZUl0ZW1zKHRoaXMuZUNvbmRpdGlvblBhbmVsc1RvLGUsdCl9cmVtb3ZlRGF0ZUNvbXBzKGUsdCxpKXt0aGlzLnJlbW92ZUl0ZW1zKGUsdCxpKS5mb3JFYWNoKGU9PmUuZGVzdHJveSgpKX1pc1ZhbGlkRGF0ZVZhbHVlKGUpe2lmKG51bGw9PT1lKXJldHVybiExO2lmKHRoaXMubWluVmFsaWREYXRlKXtpZihlPHRoaXMubWluVmFsaWREYXRlKXJldHVybiExfWVsc2UgaWYoZS5nZXRVVENGdWxsWWVhcigpPHRoaXMubWluVmFsaWRZZWFyKXJldHVybiExO2lmKHRoaXMubWF4VmFsaWREYXRlKXtpZihlPnRoaXMubWF4VmFsaWREYXRlKXJldHVybiExfWVsc2UgaWYoZS5nZXRVVENGdWxsWWVhcigpPnRoaXMubWF4VmFsaWRZZWFyKXJldHVybiExO3JldHVybiEwfWlzQ29uZGl0aW9uVWlDb21wbGV0ZShlKXtpZighc3VwZXIuaXNDb25kaXRpb25VaUNvbXBsZXRlKGUpKXJldHVybiExO2xldCB0PSEwO3JldHVybiB0aGlzLmZvckVhY2hJbnB1dCgoaSxzLHIsbyk9PntyIT09ZXx8IXR8fHM+PW98fCh0PXQmJnRoaXMuaXNWYWxpZERhdGVWYWx1ZShpLmdldERhdGUoKSkpfSksdH1hcmVTaW1wbGVNb2RlbHNFcXVhbChlLHQpe3JldHVybiBlLmRhdGVGcm9tPT09dC5kYXRlRnJvbSYmZS5kYXRlVG89PT10LmRhdGVUbyYmZS50eXBlPT09dC50eXBlfWdldEZpbHRlclR5cGUoKXtyZXR1cm4iZGF0ZSJ9Y3JlYXRlQ29uZGl0aW9uKGUpe2NvbnN0IHQ9dGhpcy5nZXRDb25kaXRpb25UeXBlKGUpLGk9e30scz10aGlzLmdldFZhbHVlcyhlKTtyZXR1cm4gcy5sZW5ndGg+MCYmKGkuZGF0ZUZyb209WWkoc1swXSkpLHMubGVuZ3RoPjEmJihpLmRhdGVUbz1ZaShzWzFdKSksT2JqZWN0LmFzc2lnbih7ZGF0ZUZyb206bnVsbCxkYXRlVG86bnVsbCxmaWx0ZXJUeXBlOnRoaXMuZ2V0RmlsdGVyVHlwZSgpLHR5cGU6dH0saSl9cmVzZXRQbGFjZWhvbGRlcigpe2NvbnN0IGU9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCksdD10aGlzLnRyYW5zbGF0ZSgiZGF0ZUZvcm1hdE9vbyIpLGk9ZSgiYXJpYUZpbHRlclZhbHVlIiwiRmlsdGVyIFZhbHVlIik7dGhpcy5mb3JFYWNoSW5wdXQoZT0+e2Uuc2V0SW5wdXRQbGFjZWhvbGRlcih0KSxlLnNldElucHV0QXJpYUxhYmVsKGkpfSl9Z2V0SW5wdXRzKGUpe3JldHVybiBlPj10aGlzLmRhdGVDb25kaXRpb25Gcm9tQ29tcHMubGVuZ3RoP1tudWxsLG51bGxdOlt0aGlzLmRhdGVDb25kaXRpb25Gcm9tQ29tcHNbZV0sdGhpcy5kYXRlQ29uZGl0aW9uVG9Db21wc1tlXV19Z2V0VmFsdWVzKGUpe2NvbnN0IHQ9W107cmV0dXJuIHRoaXMuZm9yRWFjaFBvc2l0aW9uSW5wdXQoZSwoZSxpLHMscik9PntpPHImJnQucHVzaChlLmdldERhdGUoKSl9KSx0fXRyYW5zbGF0ZShlKXtyZXR1cm4gZT09PVZyLkxFU1NfVEhBTj9zdXBlci50cmFuc2xhdGUoImJlZm9yZSIpOmU9PT1Wci5HUkVBVEVSX1RIQU4/c3VwZXIudHJhbnNsYXRlKCJhZnRlciIpOnN1cGVyLnRyYW5zbGF0ZShlKX1nZXRNb2RlbEFzU3RyaW5nKGUpe3ZhciB0O3JldHVybiBudWxsIT09KHQ9dGhpcy5maWx0ZXJNb2RlbEZvcm1hdHRlci5nZXRNb2RlbEFzU3RyaW5nKGUpKSYmdm9pZCAwIT09dD90OiIifX1Xci5ERUZBVUxUX0ZJTFRFUl9PUFRJT05TPVtWci5FUVVBTFMsVnIuTk9UX0VRVUFMLFZyLkxFU1NfVEhBTixWci5HUkVBVEVSX1RIQU4sVnIuSU5fUkFOR0UsVnIuQkxBTkssVnIuTk9UX0JMQU5LXSxCcihbY2UoInVzZXJDb21wb25lbnRGYWN0b3J5IildLFdyLnByb3RvdHlwZSwidXNlckNvbXBvbmVudEZhY3RvcnkiLHZvaWQgMCk7Y2xhc3MganIgZXh0ZW5kcyBjcntnZXREZWZhdWx0RGVib3VuY2VNcygpe3JldHVybiAwfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCl9aXNFdmVudEZyb21GbG9hdGluZ0ZpbHRlcihlKXtyZXR1cm4gZSYmZS5hZnRlckZsb2F0aW5nRmlsdGVyfWlzRXZlbnRGcm9tRGF0YUNoYW5nZShlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6ZS5hZnRlckRhdGFDaGFuZ2V9Z2V0TGFzdFR5cGUoKXtyZXR1cm4gdGhpcy5sYXN0VHlwZX1pc1JlYWRPbmx5KCl7cmV0dXJuIHRoaXMucmVhZE9ubHl9c2V0TGFzdFR5cGVGcm9tTW9kZWwoZSl7aWYoIWUpcmV0dXJuIHZvaWQodGhpcy5sYXN0VHlwZT10aGlzLm9wdGlvbnNGYWN0b3J5LmdldERlZmF1bHRPcHRpb24oKSk7bGV0IHQ7aWYoZS5vcGVyYXRvcil7dD1lLmNvbmRpdGlvbnNbMF19ZWxzZSB0PWU7dGhpcy5sYXN0VHlwZT10LnR5cGV9Y2FuV2VFZGl0QWZ0ZXJNb2RlbEZyb21QYXJlbnRGaWx0ZXIoZSl7aWYoIWUpcmV0dXJuIHRoaXMuaXNUeXBlRWRpdGFibGUodGhpcy5sYXN0VHlwZSk7aWYoZS5vcGVyYXRvcilyZXR1cm4hMTtjb25zdCB0PWU7cmV0dXJuIHRoaXMuaXNUeXBlRWRpdGFibGUodC50eXBlKX1pbml0KGUpe3RoaXMuc2V0U2ltcGxlUGFyYW1zKGUsITEpfXNldFNpbXBsZVBhcmFtcyhlLHQ9ITApe3RoaXMub3B0aW9uc0ZhY3Rvcnk9bmV3IHZyLHRoaXMub3B0aW9uc0ZhY3RvcnkuaW5pdChlLmZpbHRlclBhcmFtcyx0aGlzLmdldERlZmF1bHRGaWx0ZXJPcHRpb25zKCkpLHR8fCh0aGlzLmxhc3RUeXBlPXRoaXMub3B0aW9uc0ZhY3RvcnkuZ2V0RGVmYXVsdE9wdGlvbigpKSx0aGlzLnJlYWRPbmx5PSEhZS5maWx0ZXJQYXJhbXMucmVhZE9ubHk7Y29uc3QgaT10aGlzLmlzVHlwZUVkaXRhYmxlKHRoaXMub3B0aW9uc0ZhY3RvcnkuZ2V0RGVmYXVsdE9wdGlvbigpKTt0aGlzLnNldEVkaXRhYmxlKGkpfW9uUGFyYW1zVXBkYXRlZChlKXt0aGlzLnJlZnJlc2goZSl9cmVmcmVzaChlKXt0aGlzLnNldFNpbXBsZVBhcmFtcyhlKX1kb2VzRmlsdGVySGF2ZVNpbmdsZUlucHV0KGUpe2NvbnN0IHQ9dGhpcy5vcHRpb25zRmFjdG9yeS5nZXRDdXN0b21PcHRpb24oZSkse251bWJlck9mSW5wdXRzOml9PXR8fHt9O3JldHVybiBudWxsPT1pfHwxPT1pfWlzVHlwZUVkaXRhYmxlKGUpe2NvbnN0IHQ9W19yLklOX1JBTkdFLF9yLkVNUFRZLF9yLkJMQU5LLF9yLk5PVF9CTEFOS107cmV0dXJuISFlJiYhdGhpcy5pc1JlYWRPbmx5KCkmJnRoaXMuZG9lc0ZpbHRlckhhdmVTaW5nbGVJbnB1dChlKSYmdC5pbmRleE9mKGUpPDB9fXZhciBVcj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyB6ciBleHRlbmRzIGpye2NvbnN0cnVjdG9yKCl7c3VwZXIoJ1xuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctZmxvYXRpbmctZmlsdGVyLWlucHV0IiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgIDxhZy1pbnB1dC10ZXh0LWZpZWxkIHJlZj0iZVJlYWRPbmx5VGV4dCI+PC9hZy1pbnB1dC10ZXh0LWZpZWxkPlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlRGF0ZVdyYXBwZXIiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj4nKX1nZXREZWZhdWx0RmlsdGVyT3B0aW9ucygpe3JldHVybiBXci5ERUZBVUxUX0ZJTFRFUl9PUFRJT05TfWluaXQoZSl7c3VwZXIuaW5pdChlKSx0aGlzLnBhcmFtcz1lLHRoaXMuZmlsdGVyUGFyYW1zPWUuZmlsdGVyUGFyYW1zLHRoaXMuY3JlYXRlRGF0ZUNvbXBvbmVudCgpLHRoaXMuZmlsdGVyTW9kZWxGb3JtYXR0ZXI9bmV3IEhyKHRoaXMuZmlsdGVyUGFyYW1zLHRoaXMubG9jYWxlU2VydmljZSx0aGlzLm9wdGlvbnNGYWN0b3J5KTtjb25zdCB0PXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpO3RoaXMuZVJlYWRPbmx5VGV4dC5zZXREaXNhYmxlZCghMCkuc2V0SW5wdXRBcmlhTGFiZWwodCgiYXJpYURhdGVGaWx0ZXJJbnB1dCIsIkRhdGUgRmlsdGVyIElucHV0IikpfW9uUGFyYW1zVXBkYXRlZChlKXt0aGlzLnJlZnJlc2goZSl9cmVmcmVzaChlKXtzdXBlci5yZWZyZXNoKGUpLHRoaXMucGFyYW1zPWUsdGhpcy5maWx0ZXJQYXJhbXM9ZS5maWx0ZXJQYXJhbXMsdGhpcy51cGRhdGVEYXRlQ29tcG9uZW50KCksdGhpcy5maWx0ZXJNb2RlbEZvcm1hdHRlci51cGRhdGVQYXJhbXMoe29wdGlvbnNGYWN0b3J5OnRoaXMub3B0aW9uc0ZhY3RvcnksZGF0ZUZpbHRlclBhcmFtczp0aGlzLmZpbHRlclBhcmFtc30pLHRoaXMudXBkYXRlQ29tcE9uTW9kZWxDaGFuZ2UoZS5jdXJyZW50UGFyZW50TW9kZWwoKSl9dXBkYXRlQ29tcE9uTW9kZWxDaGFuZ2UoZSl7Y29uc3QgdD0hdGhpcy5pc1JlYWRPbmx5KCkmJnRoaXMuY2FuV2VFZGl0QWZ0ZXJNb2RlbEZyb21QYXJlbnRGaWx0ZXIoZSk7aWYodGhpcy5zZXRFZGl0YWJsZSh0KSx0KXtpZihlKXtjb25zdCB0PWU7dGhpcy5kYXRlQ29tcC5zZXREYXRlKHFpKHQuZGF0ZUZyb20pKX1lbHNlIHRoaXMuZGF0ZUNvbXAuc2V0RGF0ZShudWxsKTt0aGlzLmVSZWFkT25seVRleHQuc2V0VmFsdWUoIiIpfWVsc2UgdGhpcy5lUmVhZE9ubHlUZXh0LnNldFZhbHVlKHRoaXMuZmlsdGVyTW9kZWxGb3JtYXR0ZXIuZ2V0TW9kZWxBc1N0cmluZyhlKSksdGhpcy5kYXRlQ29tcC5zZXREYXRlKG51bGwpfXNldEVkaXRhYmxlKGUpe2lzKHRoaXMuZURhdGVXcmFwcGVyLGUpLGlzKHRoaXMuZVJlYWRPbmx5VGV4dC5nZXRHdWkoKSwhZSl9b25QYXJlbnRNb2RlbENoYW5nZWQoZSx0KXt0aGlzLmlzRXZlbnRGcm9tRmxvYXRpbmdGaWx0ZXIodCl8fHRoaXMuaXNFdmVudEZyb21EYXRhQ2hhbmdlKHQpfHwoc3VwZXIuc2V0TGFzdFR5cGVGcm9tTW9kZWwoZSksdGhpcy51cGRhdGVDb21wT25Nb2RlbENoYW5nZShlKSl9b25EYXRlQ2hhbmdlZCgpe2NvbnN0IGU9WWkodGhpcy5kYXRlQ29tcC5nZXREYXRlKCkpO3RoaXMucGFyYW1zLnBhcmVudEZpbHRlckluc3RhbmNlKHQ9PntpZih0KXtjb25zdCBpPXFpKGUpO3Qub25GbG9hdGluZ0ZpbHRlckNoYW5nZWQodGhpcy5nZXRMYXN0VHlwZSgpfHxudWxsLGkpfX0pfWdldERhdGVDb21wb25lbnRQYXJhbXMoKXtjb25zdCBlPVJyLmdldERlYm91bmNlTXModGhpcy5wYXJhbXMuZmlsdGVyUGFyYW1zLHRoaXMuZ2V0RGVmYXVsdERlYm91bmNlTXMoKSk7cmV0dXJue29uRGF0ZUNoYW5nZWQ6USh0aGlzLm9uRGF0ZUNoYW5nZWQuYmluZCh0aGlzKSxlKSxmaWx0ZXJQYXJhbXM6dGhpcy5wYXJhbXMuY29sdW1uLmdldENvbERlZigpLmZpbHRlclBhcmFtc319Y3JlYXRlRGF0ZUNvbXBvbmVudCgpe3RoaXMuZGF0ZUNvbXA9bmV3IGZyKHRoaXMuZ2V0Q29udGV4dCgpLHRoaXMudXNlckNvbXBvbmVudEZhY3RvcnksdGhpcy5nZXREYXRlQ29tcG9uZW50UGFyYW1zKCksdGhpcy5lRGF0ZVdyYXBwZXIpLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9PnRoaXMuZGF0ZUNvbXAuZGVzdHJveSgpKX11cGRhdGVEYXRlQ29tcG9uZW50KCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHRoaXMuZ2V0RGF0ZUNvbXBvbmVudFBhcmFtcygpKTt0aGlzLmRhdGVDb21wLnVwZGF0ZVBhcmFtcyhlKX1nZXRGaWx0ZXJNb2RlbEZvcm1hdHRlcigpe3JldHVybiB0aGlzLmZpbHRlck1vZGVsRm9ybWF0dGVyfX1VcihbY2UoInVzZXJDb21wb25lbnRGYWN0b3J5IildLHpyLnByb3RvdHlwZSwidXNlckNvbXBvbmVudEZhY3RvcnkiLHZvaWQgMCksVXIoW3VyKCJlUmVhZE9ubHlUZXh0IildLHpyLnByb3RvdHlwZSwiZVJlYWRPbmx5VGV4dCIsdm9pZCAwKSxVcihbdXIoImVEYXRlV3JhcHBlciIpXSx6ci5wcm90b3R5cGUsImVEYXRlV3JhcHBlciIsdm9pZCAwKTt2YXIgS3I9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgWXIgZXh0ZW5kcyBjcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCdcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWZpbHRlci1maWx0ZXIiPlxuICAgICAgICAgICAgICAgIDxhZy1pbnB1dC10ZXh0LWZpZWxkIGNsYXNzPSJhZy1kYXRlLWZpbHRlciIgcmVmPSJlRGF0ZUlucHV0Ij48L2FnLWlucHV0LXRleHQtZmllbGQ+XG4gICAgICAgICAgICA8L2Rpdj4nKX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpfWluaXQoZSl7dGhpcy5wYXJhbXM9ZSx0aGlzLnNldFBhcmFtcyhlKTtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCksaT10aGlzLmVEYXRlSW5wdXQuZ2V0SW5wdXRFbGVtZW50KCk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoaSwibW91c2Vkb3duIiwoKT0+e3RoaXMuZURhdGVJbnB1dC5pc0Rpc2FibGVkKCl8fHRoaXMudXNpbmdTYWZhcmlEYXRlUGlja2VyfHxpLmZvY3VzKCl9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihpLCJpbnB1dCIsZT0+e2UudGFyZ2V0PT09dC5hY3RpdmVFbGVtZW50JiYodGhpcy5lRGF0ZUlucHV0LmlzRGlzYWJsZWQoKXx8dGhpcy5wYXJhbXMub25EYXRlQ2hhbmdlZCgpKX0pfXNldFBhcmFtcyhlKXtjb25zdCB0PXRoaXMuZURhdGVJbnB1dC5nZXRJbnB1dEVsZW1lbnQoKSxpPXRoaXMuc2hvdWxkVXNlQnJvd3NlckRhdGVQaWNrZXIoZSk7dGhpcy51c2luZ1NhZmFyaURhdGVQaWNrZXI9aSYmVGkoKSx0LnR5cGU9aT8iZGF0ZSI6InRleHQiO2NvbnN0e21pblZhbGlkWWVhcjpzLG1heFZhbGlkWWVhcjpyLG1pblZhbGlkRGF0ZTpvLG1heFZhbGlkRGF0ZTpufT1lLmZpbHRlclBhcmFtc3x8e307aWYobyYmcyYmaigiRGF0ZUZpbHRlciBzaG91bGQgbm90IGhhdmUgYm90aCBtaW5WYWxpZERhdGUgYW5kIG1pblZhbGlkWWVhciBwYXJhbWV0ZXJzIHNldCBhdCB0aGUgc2FtZSB0aW1lISBtaW5WYWxpZFllYXIgd2lsbCBiZSBpZ25vcmVkLiIpLG4mJnImJmooIkRhdGVGaWx0ZXIgc2hvdWxkIG5vdCBoYXZlIGJvdGggbWF4VmFsaWREYXRlIGFuZCBtYXhWYWxpZFllYXIgcGFyYW1ldGVycyBzZXQgYXQgdGhlIHNhbWUgdGltZSEgbWF4VmFsaWRZZWFyIHdpbGwgYmUgaWdub3JlZC4iKSxvJiZuKXtjb25zdFtlLHRdPVtvLG5dLm1hcChlPT5lIGluc3RhbmNlb2YgRGF0ZT9lOnFpKGUpKTtlJiZ0JiZlLmdldFRpbWUoKT50LmdldFRpbWUoKSYmaigiRGF0ZUZpbHRlciBwYXJhbWV0ZXIgbWluVmFsaWREYXRlIHNob3VsZCBhbHdheXMgYmUgbG93ZXIgdGhhbiBvciBlcXVhbCB0byBwYXJhbWV0ZXIgbWF4VmFsaWREYXRlLiIpfW8/byBpbnN0YW5jZW9mIERhdGU/dC5taW49WGkobyk6dC5taW49bzpzJiYodC5taW49cysiLTAxLTAxIiksbj9uIGluc3RhbmNlb2YgRGF0ZT90Lm1heD1YaShuKTp0Lm1heD1uOnImJih0Lm1heD1yKyItMTItMzEiKX1vblBhcmFtc1VwZGF0ZWQoZSl7dGhpcy5yZWZyZXNoKGUpfXJlZnJlc2goZSl7dGhpcy5wYXJhbXM9ZSx0aGlzLnNldFBhcmFtcyhlKX1nZXREYXRlKCl7cmV0dXJuIHFpKHRoaXMuZURhdGVJbnB1dC5nZXRWYWx1ZSgpKX1zZXREYXRlKGUpe3RoaXMuZURhdGVJbnB1dC5zZXRWYWx1ZShZaShlLCExKSl9c2V0SW5wdXRQbGFjZWhvbGRlcihlKXt0aGlzLmVEYXRlSW5wdXQuc2V0SW5wdXRQbGFjZWhvbGRlcihlKX1zZXREaXNhYmxlZChlKXt0aGlzLmVEYXRlSW5wdXQuc2V0RGlzYWJsZWQoZSl9YWZ0ZXJHdWlBdHRhY2hlZChlKXtlJiZlLnN1cHByZXNzRm9jdXN8fHRoaXMuZURhdGVJbnB1dC5nZXRJbnB1dEVsZW1lbnQoKS5mb2N1cygpfXNob3VsZFVzZUJyb3dzZXJEYXRlUGlja2VyKGUpe3JldHVybiBlLmZpbHRlclBhcmFtcyYmbnVsbCE9ZS5maWx0ZXJQYXJhbXMuYnJvd3NlckRhdGVQaWNrZXI/ZS5maWx0ZXJQYXJhbXMuYnJvd3NlckRhdGVQaWNrZXI6T2koKXx8QWkoKXx8VGkoKSYmRGkoKT49MTQuMX19S3IoW3VyKCJlRGF0ZUlucHV0IildLFlyLnByb3RvdHlwZSwiZURhdGVJbnB1dCIsdm9pZCAwKTtjbGFzcyAkciBleHRlbmRzIElye2NvbnN0cnVjdG9yKGUsdD0iYWctdGV4dC1maWVsZCIsaT0idGV4dCIpe3N1cGVyKGUsdCxpKX1wb3N0Q29uc3RydWN0KCl7c3VwZXIucG9zdENvbnN0cnVjdCgpLHRoaXMuY29uZmlnLmFsbG93ZWRDaGFyUGF0dGVybiYmdGhpcy5wcmV2ZW50RGlzYWxsb3dlZENoYXJhY3RlcnMoKX1zZXRWYWx1ZShlLHQpe3JldHVybiB0aGlzLmVJbnB1dC52YWx1ZSE9PWUmJih0aGlzLmVJbnB1dC52YWx1ZT1iKGUpP2U6IiIpLHN1cGVyLnNldFZhbHVlKGUsdCl9c2V0U3RhcnRWYWx1ZShlKXt0aGlzLnNldFZhbHVlKGUsITApfXByZXZlbnREaXNhbGxvd2VkQ2hhcmFjdGVycygpe2NvbnN0IGU9bmV3IFJlZ0V4cChgWyR7dGhpcy5jb25maWcuYWxsb3dlZENoYXJQYXR0ZXJufV1gKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVJbnB1dCwia2V5ZG93biIsdD0+e1VzKHQpJiZ0LmtleSYmIWUudGVzdCh0LmtleSkmJnQucHJldmVudERlZmF1bHQoKX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUlucHV0LCJwYXN0ZSIsdD0+e3ZhciBpO2NvbnN0IHM9bnVsbD09PShpPXQuY2xpcGJvYXJkRGF0YSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZ2V0RGF0YSgidGV4dCIpO3MmJnMuc3BsaXQoIiIpLnNvbWUodD0+IWUudGVzdCh0KSkmJnQucHJldmVudERlZmF1bHQoKX0pfX1jbGFzcyBYciBleHRlbmRzICRye2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsImFnLW51bWJlci1maWVsZCIsIm51bWJlciIpfXBvc3RDb25zdHJ1Y3QoKXtzdXBlci5wb3N0Q29uc3RydWN0KCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lSW5wdXQsImJsdXIiLCgpPT57Y29uc3QgZT1wYXJzZUZsb2F0KHRoaXMuZUlucHV0LnZhbHVlKSx0PWlzTmFOKGUpPyIiOnRoaXMubm9ybWFsaXplVmFsdWUoZS50b1N0cmluZygpKTt0aGlzLnZhbHVlIT09dCYmdGhpcy5zZXRWYWx1ZSh0KX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUlucHV0LCJ3aGVlbCIsdGhpcy5vbldoZWVsLmJpbmQodGhpcykpLHRoaXMuZUlucHV0LnN0ZXA9ImFueSJ9b25XaGVlbChlKXtkb2N1bWVudC5hY3RpdmVFbGVtZW50PT09dGhpcy5lSW5wdXQmJmUucHJldmVudERlZmF1bHQoKX1ub3JtYWxpemVWYWx1ZShlKXtpZigiIj09PWUpcmV0dXJuIiI7bnVsbCE9dGhpcy5wcmVjaXNpb24mJihlPXRoaXMuYWRqdXN0UHJlY2lzaW9uKGUpKTtjb25zdCB0PXBhcnNlRmxvYXQoZSk7cmV0dXJuIG51bGwhPXRoaXMubWluJiZ0PHRoaXMubWluP2U9dGhpcy5taW4udG9TdHJpbmcoKTpudWxsIT10aGlzLm1heCYmdD50aGlzLm1heCYmKGU9dGhpcy5tYXgudG9TdHJpbmcoKSksZX1hZGp1c3RQcmVjaXNpb24oZSx0KXtpZihudWxsPT10aGlzLnByZWNpc2lvbilyZXR1cm4gZTtpZih0KXtjb25zdCB0PXBhcnNlRmxvYXQoZSkudG9GaXhlZCh0aGlzLnByZWNpc2lvbik7cmV0dXJuIHBhcnNlRmxvYXQodCkudG9TdHJpbmcoKX1jb25zdCBpPVN0cmluZyhlKS5zcGxpdCgiLiIpO2lmKGkubGVuZ3RoPjEpe2lmKGlbMV0ubGVuZ3RoPD10aGlzLnByZWNpc2lvbilyZXR1cm4gZTtpZih0aGlzLnByZWNpc2lvbj4wKXJldHVybmAke2lbMF19LiR7aVsxXS5zbGljZSgwLHRoaXMucHJlY2lzaW9uKX1gfXJldHVybiBpWzBdfXNldE1pbihlKXtyZXR1cm4gdGhpcy5taW49PT1lfHwodGhpcy5taW49ZSxJcyh0aGlzLmVJbnB1dCwibWluIixlKSksdGhpc31zZXRNYXgoZSl7cmV0dXJuIHRoaXMubWF4PT09ZXx8KHRoaXMubWF4PWUsSXModGhpcy5lSW5wdXQsIm1heCIsZSkpLHRoaXN9c2V0UHJlY2lzaW9uKGUpe3JldHVybiB0aGlzLnByZWNpc2lvbj1lLHRoaXN9c2V0U3RlcChlKXtyZXR1cm4gdGhpcy5zdGVwPT09ZXx8KHRoaXMuc3RlcD1lLElzKHRoaXMuZUlucHV0LCJzdGVwIixlKSksdGhpc31zZXRWYWx1ZShlLHQpe3JldHVybiB0aGlzLnNldFZhbHVlT3JJbnB1dFZhbHVlKGU9PnN1cGVyLnNldFZhbHVlKGUsdCksKCk9PnRoaXMsZSl9c2V0U3RhcnRWYWx1ZShlKXtyZXR1cm4gdGhpcy5zZXRWYWx1ZU9ySW5wdXRWYWx1ZShlPT5zdXBlci5zZXRWYWx1ZShlLCEwKSxlPT57dGhpcy5lSW5wdXQudmFsdWU9ZX0sZSl9c2V0VmFsdWVPcklucHV0VmFsdWUoZSx0LGkpe2lmKGIoaSkpe2xldCBzPXRoaXMuaXNTY2llbnRpZmljTm90YXRpb24oaSk7aWYocyYmdGhpcy5lSW5wdXQudmFsaWRpdHkudmFsaWQpcmV0dXJuIGUoaSk7aWYoIXMpe3M9KGk9dGhpcy5hZGp1c3RQcmVjaXNpb24oaSkpIT10aGlzLm5vcm1hbGl6ZVZhbHVlKGkpfWlmKHMpcmV0dXJuIHQoaSl9cmV0dXJuIGUoaSl9Z2V0VmFsdWUoKXtpZighdGhpcy5lSW5wdXQudmFsaWRpdHkudmFsaWQpcmV0dXJuO2NvbnN0IGU9dGhpcy5lSW5wdXQudmFsdWU7cmV0dXJuIHRoaXMuaXNTY2llbnRpZmljTm90YXRpb24oZSk/dGhpcy5hZGp1c3RQcmVjaXNpb24oZSwhMCk6c3VwZXIuZ2V0VmFsdWUoKX1pc1NjaWVudGlmaWNOb3RhdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGUmJmUuaW5jbHVkZXMoImUiKX19Y2xhc3MgcXIgZXh0ZW5kcyBrcntjb25kaXRpb25Ub1N0cmluZyhlLHQpe2NvbnN0e251bWJlck9mSW5wdXRzOml9PXR8fHt9O3JldHVybiBlLnR5cGU9PV9yLklOX1JBTkdFfHwyPT09aT9gJHt0aGlzLmZvcm1hdFZhbHVlKGUuZmlsdGVyKX0tJHt0aGlzLmZvcm1hdFZhbHVlKGUuZmlsdGVyVG8pfWA6bnVsbCE9ZS5maWx0ZXI/dGhpcy5mb3JtYXRWYWx1ZShlLmZpbHRlcik6IiIrZS50eXBlfX1mdW5jdGlvbiBacihlKXtjb25zdHthbGxvd2VkQ2hhclBhdHRlcm46dH09bnVsbCE9ZT9lOnt9O3JldHVybiBudWxsIT10P3Q6bnVsbH1jbGFzcyBRciBleHRlbmRzIFZye2NvbnN0cnVjdG9yKCl7c3VwZXIoIm51bWJlckZpbHRlciIpLHRoaXMuZVZhbHVlc0Zyb209W10sdGhpcy5lVmFsdWVzVG89W119cmVmcmVzaChlKXtyZXR1cm4gdGhpcy5udW1iZXJGaWx0ZXJQYXJhbXMuYWxsb3dlZENoYXJQYXR0ZXJuPT09ZS5hbGxvd2VkQ2hhclBhdHRlcm4mJnN1cGVyLnJlZnJlc2goZSl9bWFwVmFsdWVzRnJvbU1vZGVsKGUpe2NvbnN0e2ZpbHRlcjp0LGZpbHRlclRvOmksdHlwZTpzfT1lfHx7fTtyZXR1cm5bdGhpcy5wcm9jZXNzVmFsdWUodCksdGhpcy5wcm9jZXNzVmFsdWUoaSldLnNsaWNlKDAsdGhpcy5nZXROdW1iZXJPZklucHV0cyhzKSl9Z2V0RGVmYXVsdERlYm91bmNlTXMoKXtyZXR1cm4gNTAwfWNvbXBhcmF0b3IoKXtyZXR1cm4oZSx0KT0+ZT09PXQ/MDplPHQ/MTotMX1zZXRQYXJhbXMoZSl7dGhpcy5udW1iZXJGaWx0ZXJQYXJhbXM9ZSxzdXBlci5zZXRQYXJhbXMoZSksdGhpcy5maWx0ZXJNb2RlbEZvcm1hdHRlcj1uZXcgcXIodGhpcy5sb2NhbGVTZXJ2aWNlLHRoaXMub3B0aW9uc0ZhY3RvcnksdGhpcy5udW1iZXJGaWx0ZXJQYXJhbXMubnVtYmVyRm9ybWF0dGVyKX1nZXREZWZhdWx0RmlsdGVyT3B0aW9ucygpe3JldHVybiBRci5ERUZBVUxUX0ZJTFRFUl9PUFRJT05TfXNldEVsZW1lbnRWYWx1ZShlLHQsaSl7Y29uc3Qgcz0haSYmdGhpcy5udW1iZXJGaWx0ZXJQYXJhbXMubnVtYmVyRm9ybWF0dGVyP3RoaXMubnVtYmVyRmlsdGVyUGFyYW1zLm51bWJlckZvcm1hdHRlcihudWxsIT10P3Q6bnVsbCk6dDtzdXBlci5zZXRFbGVtZW50VmFsdWUoZSxzKX1jcmVhdGVWYWx1ZUVsZW1lbnQoKXtjb25zdCBlPVpyKHRoaXMubnVtYmVyRmlsdGVyUGFyYW1zKSx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiB0LmNsYXNzTGlzdC5hZGQoImFnLWZpbHRlci1ib2R5IiksWHQodCwicHJlc2VudGF0aW9uIiksdGhpcy5jcmVhdGVGcm9tVG9FbGVtZW50KHQsdGhpcy5lVmFsdWVzRnJvbSwiZnJvbSIsZSksdGhpcy5jcmVhdGVGcm9tVG9FbGVtZW50KHQsdGhpcy5lVmFsdWVzVG8sInRvIixlKSx0fWNyZWF0ZUZyb21Ub0VsZW1lbnQoZSx0LGkscyl7Y29uc3Qgcj10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKHM/bmV3ICRyKHthbGxvd2VkQ2hhclBhdHRlcm46c30pOm5ldyBYcik7ci5hZGRDc3NDbGFzcygiYWctZmlsdGVyLSIraSksci5hZGRDc3NDbGFzcygiYWctZmlsdGVyLWZpbHRlciIpLHQucHVzaChyKSxlLmFwcGVuZENoaWxkKHIuZ2V0R3VpKCkpfXJlbW92ZVZhbHVlRWxlbWVudHMoZSx0KXt0aGlzLnJlbW92ZUNvbXBvbmVudHModGhpcy5lVmFsdWVzRnJvbSxlLHQpLHRoaXMucmVtb3ZlQ29tcG9uZW50cyh0aGlzLmVWYWx1ZXNUbyxlLHQpfWdldFZhbHVlcyhlKXtjb25zdCB0PVtdO3JldHVybiB0aGlzLmZvckVhY2hQb3NpdGlvbklucHV0KGUsKGUsaSxzLHIpPT57aTxyJiZ0LnB1c2godGhpcy5wcm9jZXNzVmFsdWUodGhpcy5zdHJpbmdUb0Zsb2F0KGUuZ2V0VmFsdWUoKSkpKX0pLHR9YXJlU2ltcGxlTW9kZWxzRXF1YWwoZSx0KXtyZXR1cm4gZS5maWx0ZXI9PT10LmZpbHRlciYmZS5maWx0ZXJUbz09PXQuZmlsdGVyVG8mJmUudHlwZT09PXQudHlwZX1nZXRGaWx0ZXJUeXBlKCl7cmV0dXJuIm51bWJlciJ9cHJvY2Vzc1ZhbHVlKGUpe3JldHVybiBudWxsPT1lfHxpc05hTihlKT9udWxsOmV9c3RyaW5nVG9GbG9hdChlKXtpZigibnVtYmVyIj09dHlwZW9mIGUpcmV0dXJuIGU7bGV0IHQ9dyhlKTtyZXR1cm4gbnVsbCE9dCYmIiI9PT10LnRyaW0oKSYmKHQ9bnVsbCksdGhpcy5udW1iZXJGaWx0ZXJQYXJhbXMubnVtYmVyUGFyc2VyP3RoaXMubnVtYmVyRmlsdGVyUGFyYW1zLm51bWJlclBhcnNlcih0KTpudWxsPT10fHwiLSI9PT10LnRyaW0oKT9udWxsOnBhcnNlRmxvYXQodCl9Y3JlYXRlQ29uZGl0aW9uKGUpe2NvbnN0IHQ9dGhpcy5nZXRDb25kaXRpb25UeXBlKGUpLGk9e2ZpbHRlclR5cGU6dGhpcy5nZXRGaWx0ZXJUeXBlKCksdHlwZTp0fSxzPXRoaXMuZ2V0VmFsdWVzKGUpO3JldHVybiBzLmxlbmd0aD4wJiYoaS5maWx0ZXI9c1swXSkscy5sZW5ndGg+MSYmKGkuZmlsdGVyVG89c1sxXSksaX1nZXRJbnB1dHMoZSl7cmV0dXJuIGU+PXRoaXMuZVZhbHVlc0Zyb20ubGVuZ3RoP1tudWxsLG51bGxdOlt0aGlzLmVWYWx1ZXNGcm9tW2VdLHRoaXMuZVZhbHVlc1RvW2VdXX1nZXRNb2RlbEFzU3RyaW5nKGUpe3ZhciB0O3JldHVybiBudWxsIT09KHQ9dGhpcy5maWx0ZXJNb2RlbEZvcm1hdHRlci5nZXRNb2RlbEFzU3RyaW5nKGUpKSYmdm9pZCAwIT09dD90OiIifWhhc0ludmFsaWRJbnB1dHMoKXtsZXQgZT0hMTtyZXR1cm4gdGhpcy5mb3JFYWNoSW5wdXQodD0+e3QuZ2V0SW5wdXRFbGVtZW50KCkudmFsaWRpdHkudmFsaWR8fChlPSEwKX0pLGV9fVFyLkRFRkFVTFRfRklMVEVSX09QVElPTlM9W1ZyLkVRVUFMUyxWci5OT1RfRVFVQUwsVnIuR1JFQVRFUl9USEFOLFZyLkdSRUFURVJfVEhBTl9PUl9FUVVBTCxWci5MRVNTX1RIQU4sVnIuTEVTU19USEFOX09SX0VRVUFMLFZyLklOX1JBTkdFLFZyLkJMQU5LLFZyLk5PVF9CTEFOS107Y2xhc3MgSnIgZXh0ZW5kcyBrcntjb25kaXRpb25Ub1N0cmluZyhlLHQpe2NvbnN0e251bWJlck9mSW5wdXRzOml9PXR8fHt9O3JldHVybiBlLnR5cGU9PV9yLklOX1JBTkdFfHwyPT09aT9gJHtlLmZpbHRlcn0tJHtlLmZpbHRlclRvfWA6bnVsbCE9ZS5maWx0ZXI/IiIrZS5maWx0ZXI6IiIrZS50eXBlfX1jbGFzcyBlbyBleHRlbmRzIF9ye2NvbnN0cnVjdG9yKCl7c3VwZXIoInRleHRGaWx0ZXIiKSx0aGlzLmVWYWx1ZXNGcm9tPVtdLHRoaXMuZVZhbHVlc1RvPVtdfXN0YXRpYyB0cmltSW5wdXQoZSl7Y29uc3QgdD1lJiZlLnRyaW0oKTtyZXR1cm4iIj09PXQ/ZTp0fWdldERlZmF1bHREZWJvdW5jZU1zKCl7cmV0dXJuIDUwMH1zZXRQYXJhbXMoZSl7dGhpcy50ZXh0RmlsdGVyUGFyYW1zPWUsc3VwZXIuc2V0UGFyYW1zKGUpLHRoaXMubWF0Y2hlcj10aGlzLmdldFRleHRNYXRjaGVyKCksdGhpcy5mb3JtYXR0ZXI9dGhpcy50ZXh0RmlsdGVyUGFyYW1zLnRleHRGb3JtYXR0ZXJ8fCh0aGlzLnRleHRGaWx0ZXJQYXJhbXMuY2FzZVNlbnNpdGl2ZT9lby5ERUZBVUxUX0ZPUk1BVFRFUjplby5ERUZBVUxUX0xPV0VSQ0FTRV9GT1JNQVRURVIpLHRoaXMuZmlsdGVyTW9kZWxGb3JtYXR0ZXI9bmV3IEpyKHRoaXMubG9jYWxlU2VydmljZSx0aGlzLm9wdGlvbnNGYWN0b3J5KX1nZXRUZXh0TWF0Y2hlcigpe2NvbnN0IGU9dGhpcy50ZXh0RmlsdGVyUGFyYW1zLnRleHRDdXN0b21Db21wYXJhdG9yO3JldHVybiBlPyhRcy53YXJuT25jZSgidGV4dEN1c3RvbUNvbXBhcmF0b3IgaXMgZGVwcmVjYXRlZCwgdXNlIHRleHRNYXRjaGVyIGluc3RlYWQuIiksKHtmaWx0ZXJPcHRpb246dCx2YWx1ZTppLGZpbHRlclRleHQ6c30pPT5lKHQsaSxzKSk6dGhpcy50ZXh0RmlsdGVyUGFyYW1zLnRleHRNYXRjaGVyfHxlby5ERUZBVUxUX01BVENIRVJ9Y3JlYXRlQ29uZGl0aW9uKGUpe2NvbnN0IHQ9dGhpcy5nZXRDb25kaXRpb25UeXBlKGUpLGk9e2ZpbHRlclR5cGU6dGhpcy5nZXRGaWx0ZXJUeXBlKCksdHlwZTp0fSxzPXRoaXMuZ2V0VmFsdWVzV2l0aFNpZGVFZmZlY3RzKGUsITApO3JldHVybiBzLmxlbmd0aD4wJiYoaS5maWx0ZXI9c1swXSkscy5sZW5ndGg+MSYmKGkuZmlsdGVyVG89c1sxXSksaX1nZXRGaWx0ZXJUeXBlKCl7cmV0dXJuInRleHQifWFyZVNpbXBsZU1vZGVsc0VxdWFsKGUsdCl7cmV0dXJuIGUuZmlsdGVyPT09dC5maWx0ZXImJmUuZmlsdGVyVG89PT10LmZpbHRlclRvJiZlLnR5cGU9PT10LnR5cGV9Z2V0SW5wdXRzKGUpe3JldHVybiBlPj10aGlzLmVWYWx1ZXNGcm9tLmxlbmd0aD9bbnVsbCxudWxsXTpbdGhpcy5lVmFsdWVzRnJvbVtlXSx0aGlzLmVWYWx1ZXNUb1tlXV19Z2V0VmFsdWVzKGUpe3JldHVybiB0aGlzLmdldFZhbHVlc1dpdGhTaWRlRWZmZWN0cyhlLCExKX1nZXRWYWx1ZXNXaXRoU2lkZUVmZmVjdHMoZSx0KXtjb25zdCBpPVtdO3JldHVybiB0aGlzLmZvckVhY2hQb3NpdGlvbklucHV0KGUsKGUscyxyLG8pPT57dmFyIG47aWYoczxvKXtsZXQgcz13KGUuZ2V0VmFsdWUoKSk7dCYmdGhpcy50ZXh0RmlsdGVyUGFyYW1zLnRyaW1JbnB1dCYmKHM9bnVsbCE9PShuPWVvLnRyaW1JbnB1dChzKSkmJnZvaWQgMCE9PW4/bjpudWxsLGUuc2V0VmFsdWUocywhMCkpLGkucHVzaChzKX19KSxpfWdldERlZmF1bHRGaWx0ZXJPcHRpb25zKCl7cmV0dXJuIGVvLkRFRkFVTFRfRklMVEVSX09QVElPTlN9Y3JlYXRlVmFsdWVFbGVtZW50KCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5jbGFzc0xpc3QuYWRkKCJhZy1maWx0ZXItYm9keSIpLFh0KGUsInByZXNlbnRhdGlvbiIpLHRoaXMuY3JlYXRlRnJvbVRvRWxlbWVudChlLHRoaXMuZVZhbHVlc0Zyb20sImZyb20iKSx0aGlzLmNyZWF0ZUZyb21Ub0VsZW1lbnQoZSx0aGlzLmVWYWx1ZXNUbywidG8iKSxlfWNyZWF0ZUZyb21Ub0VsZW1lbnQoZSx0LGkpe2NvbnN0IHM9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgJHIpO3MuYWRkQ3NzQ2xhc3MoImFnLWZpbHRlci0iK2kpLHMuYWRkQ3NzQ2xhc3MoImFnLWZpbHRlci1maWx0ZXIiKSx0LnB1c2gocyksZS5hcHBlbmRDaGlsZChzLmdldEd1aSgpKX1yZW1vdmVWYWx1ZUVsZW1lbnRzKGUsdCl7dGhpcy5yZW1vdmVDb21wb25lbnRzKHRoaXMuZVZhbHVlc0Zyb20sZSx0KSx0aGlzLnJlbW92ZUNvbXBvbmVudHModGhpcy5lVmFsdWVzVG8sZSx0KX1tYXBWYWx1ZXNGcm9tTW9kZWwoZSl7Y29uc3R7ZmlsdGVyOnQsZmlsdGVyVG86aSx0eXBlOnN9PWV8fHt9O3JldHVyblt0fHxudWxsLGl8fG51bGxdLnNsaWNlKDAsdGhpcy5nZXROdW1iZXJPZklucHV0cyhzKSl9ZXZhbHVhdGVOdWxsVmFsdWUoZSl7Y29uc3QgdD1bX3IuTk9UX0VRVUFMLF9yLk5PVF9DT05UQUlOUyxfci5CTEFOS107cmV0dXJuISFlJiZ0LmluZGV4T2YoZSk+PTB9ZXZhbHVhdGVOb25OdWxsVmFsdWUoZSx0LGkscyl7Y29uc3Qgcj1lLm1hcChlPT50aGlzLmZvcm1hdHRlcihlKSl8fFtdLG89dGhpcy5mb3JtYXR0ZXIodCkse2FwaTpuLGNvbERlZjphLGNvbHVtbjpsLGNvbHVtbkFwaTpkLGNvbnRleHQ6Yyx0ZXh0Rm9ybWF0dGVyOmh9PXRoaXMudGV4dEZpbHRlclBhcmFtcztpZihpLnR5cGU9PT1fci5CTEFOSylyZXR1cm4gdGhpcy5pc0JsYW5rKHQpO2lmKGkudHlwZT09PV9yLk5PVF9CTEFOSylyZXR1cm4hdGhpcy5pc0JsYW5rKHQpO2NvbnN0IHU9e2FwaTpuLGNvbERlZjphLGNvbHVtbjpsLGNvbHVtbkFwaTpkLGNvbnRleHQ6Yyxub2RlOnMubm9kZSxkYXRhOnMuZGF0YSxmaWx0ZXJPcHRpb246aS50eXBlLHZhbHVlOm8sdGV4dEZvcm1hdHRlcjpofTtyZXR1cm4gci5zb21lKGU9PnRoaXMubWF0Y2hlcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdSkse2ZpbHRlclRleHQ6ZX0pKSl9Z2V0TW9kZWxBc1N0cmluZyhlKXt2YXIgdDtyZXR1cm4gbnVsbCE9PSh0PXRoaXMuZmlsdGVyTW9kZWxGb3JtYXR0ZXIuZ2V0TW9kZWxBc1N0cmluZyhlKSkmJnZvaWQgMCE9PXQ/dDoiIn19ZW8uREVGQVVMVF9GSUxURVJfT1BUSU9OUz1bX3IuQ09OVEFJTlMsX3IuTk9UX0NPTlRBSU5TLF9yLkVRVUFMUyxfci5OT1RfRVFVQUwsX3IuU1RBUlRTX1dJVEgsX3IuRU5EU19XSVRILF9yLkJMQU5LLF9yLk5PVF9CTEFOS10sZW8uREVGQVVMVF9GT1JNQVRURVI9ZT0+ZSxlby5ERUZBVUxUX0xPV0VSQ0FTRV9GT1JNQVRURVI9ZT0+bnVsbD09ZT9udWxsOmUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLGVvLkRFRkFVTFRfTUFUQ0hFUj0oe2ZpbHRlck9wdGlvbjplLHZhbHVlOnQsZmlsdGVyVGV4dDppfSk9PntpZihudWxsPT1pKXJldHVybiExO3N3aXRjaChlKXtjYXNlIGVvLkNPTlRBSU5TOnJldHVybiB0LmluZGV4T2YoaSk+PTA7Y2FzZSBlby5OT1RfQ09OVEFJTlM6cmV0dXJuIHQuaW5kZXhPZihpKTwwO2Nhc2UgZW8uRVFVQUxTOnJldHVybiB0PT09aTtjYXNlIGVvLk5PVF9FUVVBTDpyZXR1cm4gdCE9aTtjYXNlIGVvLlNUQVJUU19XSVRIOnJldHVybiAwPT09dC5pbmRleE9mKGkpO2Nhc2UgZW8uRU5EU19XSVRIOmNvbnN0IGU9dC5sYXN0SW5kZXhPZihpKTtyZXR1cm4gZT49MCYmZT09PXQubGVuZ3RoLWkubGVuZ3RoO2RlZmF1bHQ6cmV0dXJuITF9fTt2YXIgdG89ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgaW8gZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMucGFyYW1zPWUsdGhpcy52YWx1ZUNoYW5nZWRMaXN0ZW5lcj0oKT0+e319c2V0dXBHdWkoZSl7dmFyIHQ7dGhpcy5lRmxvYXRpbmdGaWx0ZXJUZXh0SW5wdXQ9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgJHIobnVsbD09PSh0PXRoaXMucGFyYW1zKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jb25maWcpKTtjb25zdCBpPXRoaXMuZUZsb2F0aW5nRmlsdGVyVGV4dElucHV0LmdldEd1aSgpO2UuYXBwZW5kQ2hpbGQoaSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoaSwiaW5wdXQiLGU9PnRoaXMudmFsdWVDaGFuZ2VkTGlzdGVuZXIoZSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGksImtleWRvd24iLGU9PnRoaXMudmFsdWVDaGFuZ2VkTGlzdGVuZXIoZSkpfXNldEVkaXRhYmxlKGUpe3RoaXMuZUZsb2F0aW5nRmlsdGVyVGV4dElucHV0LnNldERpc2FibGVkKCFlKX1zZXRBdXRvQ29tcGxldGUoZSl7dGhpcy5lRmxvYXRpbmdGaWx0ZXJUZXh0SW5wdXQuc2V0QXV0b0NvbXBsZXRlKGUpfWdldFZhbHVlKCl7cmV0dXJuIHRoaXMuZUZsb2F0aW5nRmlsdGVyVGV4dElucHV0LmdldFZhbHVlKCl9c2V0VmFsdWUoZSx0KXt0aGlzLmVGbG9hdGluZ0ZpbHRlclRleHRJbnB1dC5zZXRWYWx1ZShlLHQpfXNldFZhbHVlQ2hhbmdlZExpc3RlbmVyKGUpe3RoaXMudmFsdWVDaGFuZ2VkTGlzdGVuZXI9ZX1zZXRQYXJhbXMoZSl7dGhpcy5zZXRBcmlhTGFiZWwoZS5hcmlhTGFiZWwpLHZvaWQgMCE9PWUuYXV0b0NvbXBsZXRlJiZ0aGlzLnNldEF1dG9Db21wbGV0ZShlLmF1dG9Db21wbGV0ZSl9c2V0QXJpYUxhYmVsKGUpe3RoaXMuZUZsb2F0aW5nRmlsdGVyVGV4dElucHV0LnNldElucHV0QXJpYUxhYmVsKGUpfX1jbGFzcyBzbyBleHRlbmRzIGpye3Bvc3RDb25zdHJ1Y3QoKXt0aGlzLnNldFRlbXBsYXRlKCdcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWZsb2F0aW5nLWZpbHRlci1pbnB1dCIgcm9sZT0icHJlc2VudGF0aW9uIiByZWY9ImVGbG9hdGluZ0ZpbHRlcklucHV0Q29udGFpbmVyIj48L2Rpdj5cbiAgICAgICAgJyl9Z2V0RGVmYXVsdERlYm91bmNlTXMoKXtyZXR1cm4gNTAwfW9uUGFyZW50TW9kZWxDaGFuZ2VkKGUsdCl7dGhpcy5pc0V2ZW50RnJvbUZsb2F0aW5nRmlsdGVyKHQpfHx0aGlzLmlzRXZlbnRGcm9tRGF0YUNoYW5nZSh0KXx8KHRoaXMuc2V0TGFzdFR5cGVGcm9tTW9kZWwoZSksdGhpcy5zZXRFZGl0YWJsZSh0aGlzLmNhbldlRWRpdEFmdGVyTW9kZWxGcm9tUGFyZW50RmlsdGVyKGUpKSx0aGlzLmZsb2F0aW5nRmlsdGVySW5wdXRTZXJ2aWNlLnNldFZhbHVlKHRoaXMuZ2V0RmlsdGVyTW9kZWxGb3JtYXR0ZXIoKS5nZXRNb2RlbEFzU3RyaW5nKGUpKSl9aW5pdChlKXt0aGlzLnNldHVwRmxvYXRpbmdGaWx0ZXJJbnB1dFNlcnZpY2UoZSksc3VwZXIuaW5pdChlKSx0aGlzLnNldFRleHRJbnB1dFBhcmFtcyhlKX1zZXR1cEZsb2F0aW5nRmlsdGVySW5wdXRTZXJ2aWNlKGUpe3RoaXMuZmxvYXRpbmdGaWx0ZXJJbnB1dFNlcnZpY2U9dGhpcy5jcmVhdGVGbG9hdGluZ0ZpbHRlcklucHV0U2VydmljZShlKSx0aGlzLmZsb2F0aW5nRmlsdGVySW5wdXRTZXJ2aWNlLnNldHVwR3VpKHRoaXMuZUZsb2F0aW5nRmlsdGVySW5wdXRDb250YWluZXIpfXNldFRleHRJbnB1dFBhcmFtcyhlKXt2YXIgdDt0aGlzLnBhcmFtcz1lO2NvbnN0IGk9bnVsbCE9PSh0PWUuYnJvd3NlckF1dG9Db21wbGV0ZSkmJnZvaWQgMCE9PXQmJnQ7aWYodGhpcy5mbG9hdGluZ0ZpbHRlcklucHV0U2VydmljZS5zZXRQYXJhbXMoe2FyaWFMYWJlbDp0aGlzLmdldEFyaWFMYWJlbChlKSxhdXRvQ29tcGxldGU6aX0pLHRoaXMuYXBwbHlBY3RpdmU9UnIuaXNVc2VBcHBseUJ1dHRvbih0aGlzLnBhcmFtcy5maWx0ZXJQYXJhbXMpLCF0aGlzLmlzUmVhZE9ubHkoKSl7Y29uc3QgZT1Sci5nZXREZWJvdW5jZU1zKHRoaXMucGFyYW1zLmZpbHRlclBhcmFtcyx0aGlzLmdldERlZmF1bHREZWJvdW5jZU1zKCkpLHQ9USh0aGlzLnN5bmNVcFdpdGhQYXJlbnRGaWx0ZXIuYmluZCh0aGlzKSxlKTt0aGlzLmZsb2F0aW5nRmlsdGVySW5wdXRTZXJ2aWNlLnNldFZhbHVlQ2hhbmdlZExpc3RlbmVyKHQpfX1vblBhcmFtc1VwZGF0ZWQoZSl7dGhpcy5yZWZyZXNoKGUpfXJlZnJlc2goZSl7c3VwZXIucmVmcmVzaChlKSx0aGlzLnNldFRleHRJbnB1dFBhcmFtcyhlKX1yZWNyZWF0ZUZsb2F0aW5nRmlsdGVySW5wdXRTZXJ2aWNlKGUpe2NvbnN0IHQ9dGhpcy5mbG9hdGluZ0ZpbHRlcklucHV0U2VydmljZS5nZXRWYWx1ZSgpO21zKHRoaXMuZUZsb2F0aW5nRmlsdGVySW5wdXRDb250YWluZXIpLHRoaXMuZGVzdHJveUJlYW4odGhpcy5mbG9hdGluZ0ZpbHRlcklucHV0U2VydmljZSksdGhpcy5zZXR1cEZsb2F0aW5nRmlsdGVySW5wdXRTZXJ2aWNlKGUpLHRoaXMuZmxvYXRpbmdGaWx0ZXJJbnB1dFNlcnZpY2Uuc2V0VmFsdWUodCwhMCl9Z2V0QXJpYUxhYmVsKGUpe3JldHVybmAke3RoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW4oZS5jb2x1bW4sImhlYWRlciIsITApfSAke3RoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpKCJhcmlhRmlsdGVySW5wdXQiLCJGaWx0ZXIgSW5wdXQiKX1gfXN5bmNVcFdpdGhQYXJlbnRGaWx0ZXIoZSl7Y29uc3QgdD1lLmtleT09PWpzLkVOVEVSO2lmKHRoaXMuYXBwbHlBY3RpdmUmJiF0KXJldHVybjtsZXQgaT10aGlzLmZsb2F0aW5nRmlsdGVySW5wdXRTZXJ2aWNlLmdldFZhbHVlKCk7dGhpcy5wYXJhbXMuZmlsdGVyUGFyYW1zLnRyaW1JbnB1dCYmKGk9ZW8udHJpbUlucHV0KGkpLHRoaXMuZmxvYXRpbmdGaWx0ZXJJbnB1dFNlcnZpY2Uuc2V0VmFsdWUoaSwhMCkpLHRoaXMucGFyYW1zLnBhcmVudEZpbHRlckluc3RhbmNlKGU9PntlJiZlLm9uRmxvYXRpbmdGaWx0ZXJDaGFuZ2VkKHRoaXMuZ2V0TGFzdFR5cGUoKXx8bnVsbCxpfHxudWxsKX0pfXNldEVkaXRhYmxlKGUpe3RoaXMuZmxvYXRpbmdGaWx0ZXJJbnB1dFNlcnZpY2Uuc2V0RWRpdGFibGUoZSl9fXRvKFtjZSgiY29sdW1uTW9kZWwiKV0sc28ucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSx0byhbdXIoImVGbG9hdGluZ0ZpbHRlcklucHV0Q29udGFpbmVyIildLHNvLnByb3RvdHlwZSwiZUZsb2F0aW5nRmlsdGVySW5wdXRDb250YWluZXIiLHZvaWQgMCksdG8oW2FlXSxzby5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO2NsYXNzIHJvIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMudmFsdWVDaGFuZ2VkTGlzdGVuZXI9KCk9Pnt9LHRoaXMubnVtYmVySW5wdXRBY3RpdmU9ITB9c2V0dXBHdWkoZSl7dGhpcy5lRmxvYXRpbmdGaWx0ZXJOdW1iZXJJbnB1dD10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBYciksdGhpcy5lRmxvYXRpbmdGaWx0ZXJUZXh0SW5wdXQ9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgJHIpLHRoaXMuZUZsb2F0aW5nRmlsdGVyVGV4dElucHV0LnNldERpc2FibGVkKCEwKTtjb25zdCB0PXRoaXMuZUZsb2F0aW5nRmlsdGVyTnVtYmVySW5wdXQuZ2V0R3VpKCksaT10aGlzLmVGbG9hdGluZ0ZpbHRlclRleHRJbnB1dC5nZXRHdWkoKTtlLmFwcGVuZENoaWxkKHQpLGUuYXBwZW5kQ2hpbGQoaSksdGhpcy5zZXR1cExpc3RlbmVycyh0LGU9PnRoaXMudmFsdWVDaGFuZ2VkTGlzdGVuZXIoZSkpLHRoaXMuc2V0dXBMaXN0ZW5lcnMoaSxlPT50aGlzLnZhbHVlQ2hhbmdlZExpc3RlbmVyKGUpKX1zZXRFZGl0YWJsZShlKXt0aGlzLm51bWJlcklucHV0QWN0aXZlPWUsdGhpcy5lRmxvYXRpbmdGaWx0ZXJOdW1iZXJJbnB1dC5zZXREaXNwbGF5ZWQodGhpcy5udW1iZXJJbnB1dEFjdGl2ZSksdGhpcy5lRmxvYXRpbmdGaWx0ZXJUZXh0SW5wdXQuc2V0RGlzcGxheWVkKCF0aGlzLm51bWJlcklucHV0QWN0aXZlKX1zZXRBdXRvQ29tcGxldGUoZSl7dGhpcy5lRmxvYXRpbmdGaWx0ZXJOdW1iZXJJbnB1dC5zZXRBdXRvQ29tcGxldGUoZSksdGhpcy5lRmxvYXRpbmdGaWx0ZXJUZXh0SW5wdXQuc2V0QXV0b0NvbXBsZXRlKGUpfWdldFZhbHVlKCl7cmV0dXJuIHRoaXMuZ2V0QWN0aXZlSW5wdXRFbGVtZW50KCkuZ2V0VmFsdWUoKX1zZXRWYWx1ZShlLHQpe3RoaXMuZ2V0QWN0aXZlSW5wdXRFbGVtZW50KCkuc2V0VmFsdWUoZSx0KX1nZXRBY3RpdmVJbnB1dEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5udW1iZXJJbnB1dEFjdGl2ZT90aGlzLmVGbG9hdGluZ0ZpbHRlck51bWJlcklucHV0OnRoaXMuZUZsb2F0aW5nRmlsdGVyVGV4dElucHV0fXNldFZhbHVlQ2hhbmdlZExpc3RlbmVyKGUpe3RoaXMudmFsdWVDaGFuZ2VkTGlzdGVuZXI9ZX1zZXR1cExpc3RlbmVycyhlLHQpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsImlucHV0Iix0KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLCJrZXlkb3duIix0KX1zZXRQYXJhbXMoZSl7dGhpcy5zZXRBcmlhTGFiZWwoZS5hcmlhTGFiZWwpLHZvaWQgMCE9PWUuYXV0b0NvbXBsZXRlJiZ0aGlzLnNldEF1dG9Db21wbGV0ZShlLmF1dG9Db21wbGV0ZSl9c2V0QXJpYUxhYmVsKGUpe3RoaXMuZUZsb2F0aW5nRmlsdGVyTnVtYmVySW5wdXQuc2V0SW5wdXRBcmlhTGFiZWwoZSksdGhpcy5lRmxvYXRpbmdGaWx0ZXJUZXh0SW5wdXQuc2V0SW5wdXRBcmlhTGFiZWwoZSl9fWNsYXNzIG9vIGV4dGVuZHMgc297aW5pdChlKXt2YXIgdDtzdXBlci5pbml0KGUpLHRoaXMuZmlsdGVyTW9kZWxGb3JtYXR0ZXI9bmV3IHFyKHRoaXMubG9jYWxlU2VydmljZSx0aGlzLm9wdGlvbnNGYWN0b3J5LG51bGw9PT0odD1lLmZpbHRlclBhcmFtcyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubnVtYmVyRm9ybWF0dGVyKX1vblBhcmFtc1VwZGF0ZWQoZSl7dGhpcy5yZWZyZXNoKGUpfXJlZnJlc2goZSl7WnIoZS5maWx0ZXJQYXJhbXMpIT09dGhpcy5hbGxvd2VkQ2hhclBhdHRlcm4mJnRoaXMucmVjcmVhdGVGbG9hdGluZ0ZpbHRlcklucHV0U2VydmljZShlKSxzdXBlci5yZWZyZXNoKGUpLHRoaXMuZmlsdGVyTW9kZWxGb3JtYXR0ZXIudXBkYXRlUGFyYW1zKHtvcHRpb25zRmFjdG9yeTp0aGlzLm9wdGlvbnNGYWN0b3J5fSl9Z2V0RGVmYXVsdEZpbHRlck9wdGlvbnMoKXtyZXR1cm4gUXIuREVGQVVMVF9GSUxURVJfT1BUSU9OU31nZXRGaWx0ZXJNb2RlbEZvcm1hdHRlcigpe3JldHVybiB0aGlzLmZpbHRlck1vZGVsRm9ybWF0dGVyfWNyZWF0ZUZsb2F0aW5nRmlsdGVySW5wdXRTZXJ2aWNlKGUpe3JldHVybiB0aGlzLmFsbG93ZWRDaGFyUGF0dGVybj1acihlLmZpbHRlclBhcmFtcyksdGhpcy5hbGxvd2VkQ2hhclBhdHRlcm4/dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgaW8oe2NvbmZpZzp7YWxsb3dlZENoYXJQYXR0ZXJuOnRoaXMuYWxsb3dlZENoYXJQYXR0ZXJufX0pKTp0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBybyl9fWNsYXNzIG5vIGV4dGVuZHMgc297aW5pdChlKXtzdXBlci5pbml0KGUpLHRoaXMuZmlsdGVyTW9kZWxGb3JtYXR0ZXI9bmV3IEpyKHRoaXMubG9jYWxlU2VydmljZSx0aGlzLm9wdGlvbnNGYWN0b3J5KX1vblBhcmFtc1VwZGF0ZWQoZSl7dGhpcy5yZWZyZXNoKGUpfXJlZnJlc2goZSl7c3VwZXIucmVmcmVzaChlKSx0aGlzLmZpbHRlck1vZGVsRm9ybWF0dGVyLnVwZGF0ZVBhcmFtcyh7b3B0aW9uc0ZhY3Rvcnk6dGhpcy5vcHRpb25zRmFjdG9yeX0pfWdldERlZmF1bHRGaWx0ZXJPcHRpb25zKCl7cmV0dXJuIGVvLkRFRkFVTFRfRklMVEVSX09QVElPTlN9Z2V0RmlsdGVyTW9kZWxGb3JtYXR0ZXIoKXtyZXR1cm4gdGhpcy5maWx0ZXJNb2RlbEZvcm1hdHRlcn1jcmVhdGVGbG9hdGluZ0ZpbHRlcklucHV0U2VydmljZSgpe3JldHVybiB0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBpbyl9fWNsYXNzIGFve2NvbnN0cnVjdG9yKGUsdD0hMSl7dGhpcy5kZXN0cm95RnVuY3M9W10sdGhpcy50b3VjaGluZz0hMSx0aGlzLmV2ZW50U2VydmljZT1uZXcgdmUsdGhpcy5lRWxlbWVudD1lLHRoaXMucHJldmVudE1vdXNlQ2xpY2s9dDtjb25zdCBpPXRoaXMub25Ub3VjaFN0YXJ0LmJpbmQodGhpcykscz10aGlzLm9uVG91Y2hNb3ZlLmJpbmQodGhpcykscj10aGlzLm9uVG91Y2hFbmQuYmluZCh0aGlzKTt0aGlzLmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoc3RhcnQiLGkse3Bhc3NpdmU6ITB9KSx0aGlzLmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIscyx7cGFzc2l2ZTohMH0pLHRoaXMuZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hlbmQiLHIse3Bhc3NpdmU6ITF9KSx0aGlzLmRlc3Ryb3lGdW5jcy5wdXNoKCgpPT57dGhpcy5lRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IixpLHtwYXNzaXZlOiEwfSksdGhpcy5lRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLHMse3Bhc3NpdmU6ITB9KSx0aGlzLmVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInRvdWNoZW5kIixyLHtwYXNzaXZlOiExfSl9KX1nZXRBY3RpdmVUb3VjaChlKXtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7aWYoZVt0XS5pZGVudGlmaWVyPT09dGhpcy50b3VjaFN0YXJ0LmlkZW50aWZpZXIpcmV0dXJuIGVbdF19cmV0dXJuIG51bGx9YWRkRXZlbnRMaXN0ZW5lcihlLHQpe3RoaXMuZXZlbnRTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoZSx0KX1yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl7dGhpcy5ldmVudFNlcnZpY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpfW9uVG91Y2hTdGFydChlKXtpZih0aGlzLnRvdWNoaW5nKXJldHVybjt0aGlzLnRvdWNoU3RhcnQ9ZS50b3VjaGVzWzBdLHRoaXMudG91Y2hpbmc9ITAsdGhpcy5tb3ZlZD0hMTtjb25zdCB0PXRoaXMudG91Y2hTdGFydDt3aW5kb3cuc2V0VGltZW91dCgoKT0+e2NvbnN0IGk9dGhpcy50b3VjaFN0YXJ0PT09dDtpZih0aGlzLnRvdWNoaW5nJiZpJiYhdGhpcy5tb3ZlZCl7dGhpcy5tb3ZlZD0hMDtjb25zdCB0PXt0eXBlOmFvLkVWRU5UX0xPTkdfVEFQLHRvdWNoU3RhcnQ6dGhpcy50b3VjaFN0YXJ0LHRvdWNoRXZlbnQ6ZX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KX19LDUwMCl9b25Ub3VjaE1vdmUoZSl7aWYoIXRoaXMudG91Y2hpbmcpcmV0dXJuO2NvbnN0IHQ9dGhpcy5nZXRBY3RpdmVUb3VjaChlLnRvdWNoZXMpO2lmKCF0KXJldHVybjshWHModCx0aGlzLnRvdWNoU3RhcnQsNCkmJih0aGlzLm1vdmVkPSEwKX1vblRvdWNoRW5kKGUpe2lmKHRoaXMudG91Y2hpbmcpe2lmKCF0aGlzLm1vdmVkKXtjb25zdCBlPXt0eXBlOmFvLkVWRU5UX1RBUCx0b3VjaFN0YXJ0OnRoaXMudG91Y2hTdGFydH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKSx0aGlzLmNoZWNrRm9yRG91YmxlVGFwKCl9dGhpcy5wcmV2ZW50TW91c2VDbGljayYmZS5jYW5jZWxhYmxlJiZlLnByZXZlbnREZWZhdWx0KCksdGhpcy50b3VjaGluZz0hMX19Y2hlY2tGb3JEb3VibGVUYXAoKXtjb25zdCBlPShuZXcgRGF0ZSkuZ2V0VGltZSgpO2lmKHRoaXMubGFzdFRhcFRpbWUmJnRoaXMubGFzdFRhcFRpbWU+MCl7aWYoZS10aGlzLmxhc3RUYXBUaW1lPmFvLkRPVUJMRV9UQVBfTUlMTElTKXtjb25zdCBlPXt0eXBlOmFvLkVWRU5UX0RPVUJMRV9UQVAsdG91Y2hTdGFydDp0aGlzLnRvdWNoU3RhcnR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSksdGhpcy5sYXN0VGFwVGltZT1udWxsfWVsc2UgdGhpcy5sYXN0VGFwVGltZT1lfWVsc2UgdGhpcy5sYXN0VGFwVGltZT1lfWRlc3Ryb3koKXt0aGlzLmRlc3Ryb3lGdW5jcy5mb3JFYWNoKGU9PmUoKSl9fWFvLkVWRU5UX1RBUD0idGFwIixhby5FVkVOVF9ET1VCTEVfVEFQPSJkb3VibGVUYXAiLGFvLkVWRU5UX0xPTkdfVEFQPSJsb25nVGFwIixhby5ET1VCTEVfVEFQX01JTExJUz01MDA7dmFyIGxvPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGNvIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSxlfHx0aGlzLnNldFRlbXBsYXRlKGNvLlRFTVBMQVRFKX1hdHRhY2hDdXN0b21FbGVtZW50cyhlLHQsaSxzLHIpe3RoaXMuZVNvcnRPcmRlcj1lLHRoaXMuZVNvcnRBc2M9dCx0aGlzLmVTb3J0RGVzYz1pLHRoaXMuZVNvcnRNaXhlZD1zLHRoaXMuZVNvcnROb25lPXJ9c2V0dXBTb3J0KGUsdD0hMSl7dGhpcy5jb2x1bW49ZSx0aGlzLnN1cHByZXNzT3JkZXI9dCx0aGlzLnNldHVwTXVsdGlTb3J0SW5kaWNhdG9yKCksdGhpcy5jb2x1bW4uaXNTb3J0YWJsZSgpJiYodGhpcy5hZGRJbkljb24oInNvcnRBc2NlbmRpbmciLHRoaXMuZVNvcnRBc2MsZSksdGhpcy5hZGRJbkljb24oInNvcnREZXNjZW5kaW5nIix0aGlzLmVTb3J0RGVzYyxlKSx0aGlzLmFkZEluSWNvbigic29ydFVuU29ydCIsdGhpcy5lU29ydE5vbmUsZSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigidW5Tb3J0SWNvbiIsKCk9PnRoaXMudXBkYXRlSWNvbnMoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELCgpPT50aGlzLnVwZGF0ZUljb25zKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1NPUlRfQ0hBTkdFRCwoKT0+dGhpcy5vblNvcnRDaGFuZ2VkKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRCwoKT0+dGhpcy5vblNvcnRDaGFuZ2VkKCkpLHRoaXMub25Tb3J0Q2hhbmdlZCgpKX1hZGRJbkljb24oZSx0LGkpe2lmKG51bGw9PXQpcmV0dXJuO2NvbnN0IHM9V3MoZSx0aGlzLmdyaWRPcHRpb25zU2VydmljZSxpKTtzJiZ0LmFwcGVuZENoaWxkKHMpfW9uU29ydENoYW5nZWQoKXt0aGlzLnVwZGF0ZUljb25zKCksdGhpcy5zdXBwcmVzc09yZGVyfHx0aGlzLnVwZGF0ZVNvcnRPcmRlcigpfXVwZGF0ZUljb25zKCl7Y29uc3QgZT10aGlzLnNvcnRDb250cm9sbGVyLmdldERpc3BsYXlTb3J0Rm9yQ29sdW1uKHRoaXMuY29sdW1uKTtpZih0aGlzLmVTb3J0QXNjKXtjb25zdCB0PSJhc2MiPT09ZTtpcyh0aGlzLmVTb3J0QXNjLHQse3NraXBBcmlhSGlkZGVuOiEwfSl9aWYodGhpcy5lU29ydERlc2Mpe2NvbnN0IHQ9ImRlc2MiPT09ZTtpcyh0aGlzLmVTb3J0RGVzYyx0LHtza2lwQXJpYUhpZGRlbjohMH0pfWlmKHRoaXMuZVNvcnROb25lKXtjb25zdCB0PSF0aGlzLmNvbHVtbi5nZXRDb2xEZWYoKS51blNvcnRJY29uJiYhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ1blNvcnRJY29uIiksaT1udWxsPT1lO2lzKHRoaXMuZVNvcnROb25lLCF0JiZpLHtza2lwQXJpYUhpZGRlbjohMH0pfX1zZXR1cE11bHRpU29ydEluZGljYXRvcigpe3RoaXMuYWRkSW5JY29uKCJzb3J0VW5Tb3J0Iix0aGlzLmVTb3J0TWl4ZWQsdGhpcy5jb2x1bW4pO2NvbnN0IGU9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCkuc2hvd1Jvd0dyb3VwO3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzQ29sdW1uc1NvcnRpbmdDb3VwbGVkVG9Hcm91cCgpJiZlJiYodGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfU09SVF9DSEFOR0VELCgpPT50aGlzLnVwZGF0ZU11bHRpU29ydEluZGljYXRvcigpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fUk9XX0dST1VQX0NIQU5HRUQsKCk9PnRoaXMudXBkYXRlTXVsdGlTb3J0SW5kaWNhdG9yKCkpLHRoaXMudXBkYXRlTXVsdGlTb3J0SW5kaWNhdG9yKCkpfXVwZGF0ZU11bHRpU29ydEluZGljYXRvcigpe2lmKHRoaXMuZVNvcnRNaXhlZCl7Y29uc3QgZT0ibWl4ZWQiPT09dGhpcy5zb3J0Q29udHJvbGxlci5nZXREaXNwbGF5U29ydEZvckNvbHVtbih0aGlzLmNvbHVtbik7aXModGhpcy5lU29ydE1peGVkLGUse3NraXBBcmlhSGlkZGVuOiEwfSl9fXVwZGF0ZVNvcnRPcmRlcigpe3ZhciBlO2lmKCF0aGlzLmVTb3J0T3JkZXIpcmV0dXJuO2NvbnN0IHQ9dGhpcy5zb3J0Q29udHJvbGxlci5nZXRDb2x1bW5zV2l0aFNvcnRpbmdPcmRlcmVkKCksaT1udWxsIT09KGU9dGhpcy5zb3J0Q29udHJvbGxlci5nZXREaXNwbGF5U29ydEluZGV4Rm9yQ29sdW1uKHRoaXMuY29sdW1uKSkmJnZvaWQgMCE9PWU/ZTotMSxzPXQuc29tZShlPT57dmFyIHQ7cmV0dXJuIG51bGwhPT0odD10aGlzLnNvcnRDb250cm9sbGVyLmdldERpc3BsYXlTb3J0SW5kZXhGb3JDb2x1bW4oZSkpJiZ2b2lkIDAhPT10JiZ0fSkscj1pPj0wJiZzO2lzKHRoaXMuZVNvcnRPcmRlcixyLHtza2lwQXJpYUhpZGRlbjohMH0pLGk+PTA/dGhpcy5lU29ydE9yZGVyLnRleHRDb250ZW50PShpKzEpLnRvU3RyaW5nKCk6bXModGhpcy5lU29ydE9yZGVyKX19Y28uVEVNUExBVEU9JzxzcGFuIGNsYXNzPSJhZy1zb3J0LWluZGljYXRvci1jb250YWluZXIiPlxuICAgICAgICAgICAgPHNwYW4gcmVmPSJlU29ydE9yZGVyIiBjbGFzcz0iYWctc29ydC1pbmRpY2F0b3ItaWNvbiBhZy1zb3J0LW9yZGVyIGFnLWhpZGRlbiIgYXJpYS1oaWRkZW49InRydWUiPjwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIHJlZj0iZVNvcnRBc2MiIGNsYXNzPSJhZy1zb3J0LWluZGljYXRvci1pY29uIGFnLXNvcnQtYXNjZW5kaW5nLWljb24gYWctaGlkZGVuIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gcmVmPSJlU29ydERlc2MiIGNsYXNzPSJhZy1zb3J0LWluZGljYXRvci1pY29uIGFnLXNvcnQtZGVzY2VuZGluZy1pY29uIGFnLWhpZGRlbiIgYXJpYS1oaWRkZW49InRydWUiPjwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIHJlZj0iZVNvcnRNaXhlZCIgY2xhc3M9ImFnLXNvcnQtaW5kaWNhdG9yLWljb24gYWctc29ydC1taXhlZC1pY29uIGFnLWhpZGRlbiIgYXJpYS1oaWRkZW49InRydWUiPjwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIHJlZj0iZVNvcnROb25lIiBjbGFzcz0iYWctc29ydC1pbmRpY2F0b3ItaWNvbiBhZy1zb3J0LW5vbmUtaWNvbiBhZy1oaWRkZW4iIGFyaWEtaGlkZGVuPSJ0cnVlIj48L3NwYW4+XG4gICAgICAgIDwvc3Bhbj4nLGxvKFt1cigiZVNvcnRPcmRlciIpXSxjby5wcm90b3R5cGUsImVTb3J0T3JkZXIiLHZvaWQgMCksbG8oW3VyKCJlU29ydEFzYyIpXSxjby5wcm90b3R5cGUsImVTb3J0QXNjIix2b2lkIDApLGxvKFt1cigiZVNvcnREZXNjIildLGNvLnByb3RvdHlwZSwiZVNvcnREZXNjIix2b2lkIDApLGxvKFt1cigiZVNvcnRNaXhlZCIpXSxjby5wcm90b3R5cGUsImVTb3J0TWl4ZWQiLHZvaWQgMCksbG8oW3VyKCJlU29ydE5vbmUiKV0sY28ucHJvdG90eXBlLCJlU29ydE5vbmUiLHZvaWQgMCksbG8oW2NlKCJjb2x1bW5Nb2RlbCIpXSxjby5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLGxvKFtjZSgic29ydENvbnRyb2xsZXIiKV0sY28ucHJvdG90eXBlLCJzb3J0Q29udHJvbGxlciIsdm9pZCAwKTt2YXIgaG89ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgdW8gZXh0ZW5kcyBjcntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5sYXN0TW92aW5nQ2hhbmdlZD0wfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCl9cmVmcmVzaChlKXtyZXR1cm4gdGhpcy5wYXJhbXM9ZSx0aGlzLndvcmtPdXRUZW1wbGF0ZSgpPT10aGlzLmN1cnJlbnRUZW1wbGF0ZSYmKHRoaXMud29ya091dFNob3dNZW51KCk9PXRoaXMuY3VycmVudFNob3dNZW51JiYodGhpcy53b3JrT3V0U29ydCgpPT10aGlzLmN1cnJlbnRTb3J0JiYodGhpcy5zaG91bGRTdXBwcmVzc01lbnVIaWRlKCk9PXRoaXMuY3VycmVudFN1cHByZXNzTWVudUhpZGUmJih0aGlzLnNldERpc3BsYXlOYW1lKGUpLCEwKSkpKX13b3JrT3V0VGVtcGxhdGUoKXt2YXIgZTtsZXQgdD1udWxsIT09KGU9dGhpcy5wYXJhbXMudGVtcGxhdGUpJiZ2b2lkIDAhPT1lP2U6dW8uVEVNUExBVEU7cmV0dXJuIHQ9dCYmdC50cmltP3QudHJpbSgpOnQsdH1pbml0KGUpe3RoaXMucGFyYW1zPWUsdGhpcy5jdXJyZW50VGVtcGxhdGU9dGhpcy53b3JrT3V0VGVtcGxhdGUoKSx0aGlzLnNldFRlbXBsYXRlKHRoaXMuY3VycmVudFRlbXBsYXRlKSx0aGlzLnNldHVwVGFwKCksdGhpcy5zZXRNZW51KCksdGhpcy5zZXR1cFNvcnQoKSx0aGlzLnNldHVwRmlsdGVySWNvbigpLHRoaXMuc2V0dXBGaWx0ZXJCdXR0b24oKSx0aGlzLnNldERpc3BsYXlOYW1lKGUpfXNldERpc3BsYXlOYW1lKGUpe2lmKHRoaXMuY3VycmVudERpc3BsYXlOYW1lIT1lLmRpc3BsYXlOYW1lKXt0aGlzLmN1cnJlbnREaXNwbGF5TmFtZT1lLmRpc3BsYXlOYW1lO2NvbnN0IHQ9ZnQodGhpcy5jdXJyZW50RGlzcGxheU5hbWUsITApO3RoaXMuZVRleHQmJih0aGlzLmVUZXh0LnRleHRDb250ZW50PXQpfX1hZGRJbkljb24oZSx0LGkpe2lmKG51bGw9PXQpcmV0dXJuO2NvbnN0IHM9V3MoZSx0aGlzLmdyaWRPcHRpb25zU2VydmljZSxpKTtzJiZ0LmFwcGVuZENoaWxkKHMpfXNldHVwVGFwKCl7Y29uc3R7Z3JpZE9wdGlvbnNTZXJ2aWNlOmV9PXRoaXM7aWYoZS5nZXQoInN1cHByZXNzVG91Y2giKSlyZXR1cm47Y29uc3QgdD1uZXcgYW8odGhpcy5nZXRHdWkoKSwhMCksaT10aGlzLnNob3VsZFN1cHByZXNzTWVudUhpZGUoKSxzPWkmJmIodGhpcy5lTWVudSkscj1zP25ldyBhbyh0aGlzLmVNZW51LCEwKTp0O2lmKHRoaXMucGFyYW1zLmVuYWJsZU1lbnUpe2NvbnN0IGU9cz8iRVZFTlRfVEFQIjoiRVZFTlRfTE9OR19UQVAiLHQ9ZT0+dGhpcy5wYXJhbXMuc2hvd0NvbHVtbk1lbnVBZnRlck1vdXNlQ2xpY2soZS50b3VjaFN0YXJ0KTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihyLGFvW2VdLHQpfWlmKHRoaXMucGFyYW1zLmVuYWJsZVNvcnRpbmcpe2NvbnN0IGU9ZT0+e3ZhciB0LHM7Y29uc3Qgcj1lLnRvdWNoU3RhcnQudGFyZ2V0O2kmJigobnVsbD09PSh0PXRoaXMuZU1lbnUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNvbnRhaW5zKHIpKXx8KG51bGw9PT0ocz10aGlzLmVGaWx0ZXJCdXR0b24pfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmNvbnRhaW5zKHIpKSl8fHRoaXMuc29ydENvbnRyb2xsZXIucHJvZ3Jlc3NTb3J0KHRoaXMucGFyYW1zLmNvbHVtbiwhMSwidWlDb2x1bW5Tb3J0ZWQiKX07dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodCxhby5FVkVOVF9UQVAsZSl9aWYodGhpcy5wYXJhbXMuZW5hYmxlRmlsdGVyQnV0dG9uKXtjb25zdCBlPW5ldyBhbyh0aGlzLmVGaWx0ZXJCdXR0b24sITApO3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsInRhcCIsKCk9PnRoaXMucGFyYW1zLnNob3dGaWx0ZXIodGhpcy5lRmlsdGVyQnV0dG9uKSksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+ZS5kZXN0cm95KCkpfXRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9PnQuZGVzdHJveSgpKSxzJiZ0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT5yLmRlc3Ryb3koKSl9d29ya091dFNob3dNZW51KCl7cmV0dXJuIHRoaXMucGFyYW1zLmVuYWJsZU1lbnUmJnRoaXMubWVudVNlcnZpY2UuaXNIZWFkZXJNZW51QnV0dG9uRW5hYmxlZCgpfXNob3VsZFN1cHByZXNzTWVudUhpZGUoKXtyZXR1cm4gdGhpcy5tZW51U2VydmljZS5pc0hlYWRlck1lbnVCdXR0b25BbHdheXNTaG93RW5hYmxlZCgpfXNldE1lbnUoKXtpZighdGhpcy5lTWVudSlyZXR1cm47aWYodGhpcy5jdXJyZW50U2hvd01lbnU9dGhpcy53b3JrT3V0U2hvd01lbnUoKSwhdGhpcy5jdXJyZW50U2hvd01lbnUpcmV0dXJuIGZzKHRoaXMuZU1lbnUpLHZvaWQodGhpcy5lTWVudT12b2lkIDApO2NvbnN0IGU9dGhpcy5tZW51U2VydmljZS5pc0xlZ2FjeU1lbnVFbmFibGVkKCk7dGhpcy5hZGRJbkljb24oZT8ibWVudSI6Im1lbnVBbHQiLHRoaXMuZU1lbnUsdGhpcy5wYXJhbXMuY29sdW1uKSx0aGlzLmVNZW51LmNsYXNzTGlzdC50b2dnbGUoImFnLWhlYWRlci1tZW51LWljb24iLCFlKSx0aGlzLmN1cnJlbnRTdXBwcmVzc01lbnVIaWRlPXRoaXMuc2hvdWxkU3VwcHJlc3NNZW51SGlkZSgpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZU1lbnUsImNsaWNrIiwoKT0+dGhpcy5wYXJhbXMuc2hvd0NvbHVtbk1lbnUodGhpcy5lTWVudSkpLHRoaXMuZU1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgiYWctaGVhZGVyLW1lbnUtYWx3YXlzLXNob3ciLHRoaXMuY3VycmVudFN1cHByZXNzTWVudUhpZGUpfW9uTWVudUtleWJvYXJkU2hvcnRjdXQoZSl7dmFyIHQsaSxzLHI7Y29uc3R7Y29sdW1uOm99PXRoaXMucGFyYW1zLG49dGhpcy5tZW51U2VydmljZS5pc0xlZ2FjeU1lbnVFbmFibGVkKCk7aWYoZSYmIW4pe2lmKHRoaXMubWVudVNlcnZpY2UuaXNGaWx0ZXJNZW51SW5IZWFkZXJFbmFibGVkKG8pKXJldHVybiB0aGlzLnBhcmFtcy5zaG93RmlsdGVyKG51bGwhPT0oaT1udWxsIT09KHQ9dGhpcy5lRmlsdGVyQnV0dG9uKSYmdm9pZCAwIT09dD90OnRoaXMuZU1lbnUpJiZ2b2lkIDAhPT1pP2k6dGhpcy5nZXRHdWkoKSksITB9ZWxzZSBpZih0aGlzLnBhcmFtcy5lbmFibGVNZW51KXJldHVybiB0aGlzLnBhcmFtcy5zaG93Q29sdW1uTWVudShudWxsIT09KHI9bnVsbCE9PShzPXRoaXMuZU1lbnUpJiZ2b2lkIDAhPT1zP3M6dGhpcy5lRmlsdGVyQnV0dG9uKSYmdm9pZCAwIT09cj9yOnRoaXMuZ2V0R3VpKCkpLCEwO3JldHVybiExfXdvcmtPdXRTb3J0KCl7cmV0dXJuIHRoaXMucGFyYW1zLmVuYWJsZVNvcnRpbmd9c2V0dXBTb3J0KCl7aWYodGhpcy5jdXJyZW50U29ydD10aGlzLnBhcmFtcy5lbmFibGVTb3J0aW5nLHRoaXMuZVNvcnRJbmRpY2F0b3J8fCh0aGlzLmVTb3J0SW5kaWNhdG9yPXRoaXMuY29udGV4dC5jcmVhdGVCZWFuKG5ldyBjbyghMCkpLHRoaXMuZVNvcnRJbmRpY2F0b3IuYXR0YWNoQ3VzdG9tRWxlbWVudHModGhpcy5lU29ydE9yZGVyLHRoaXMuZVNvcnRBc2MsdGhpcy5lU29ydERlc2MsdGhpcy5lU29ydE1peGVkLHRoaXMuZVNvcnROb25lKSksdGhpcy5lU29ydEluZGljYXRvci5zZXR1cFNvcnQodGhpcy5wYXJhbXMuY29sdW1uKSwhdGhpcy5jdXJyZW50U29ydClyZXR1cm47dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5wYXJhbXMuY29sdW1uLEVlLkVWRU5UX01PVklOR19DSEFOR0VELCgpPT57dGhpcy5sYXN0TW92aW5nQ2hhbmdlZD0obmV3IERhdGUpLmdldFRpbWUoKX0pLHRoaXMuZUxhYmVsJiZ0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVMYWJlbCwiY2xpY2siLGU9Pntjb25zdCB0PXRoaXMucGFyYW1zLmNvbHVtbi5pc01vdmluZygpLGk9KG5ldyBEYXRlKS5nZXRUaW1lKCktdGhpcy5sYXN0TW92aW5nQ2hhbmdlZDw1MDtpZighKHR8fGkpKXtjb25zdCB0PSJjdHJsIj09PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgibXVsdGlTb3J0S2V5Iik/ZS5jdHJsS2V5fHxlLm1ldGFLZXk6ZS5zaGlmdEtleTt0aGlzLnBhcmFtcy5wcm9ncmVzc1NvcnQodCl9fSk7Y29uc3QgZT0oKT0+e2lmKHRoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctaGVhZGVyLWNlbGwtc29ydGVkLWFzYyIsdGhpcy5wYXJhbXMuY29sdW1uLmlzU29ydEFzY2VuZGluZygpKSx0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWhlYWRlci1jZWxsLXNvcnRlZC1kZXNjIix0aGlzLnBhcmFtcy5jb2x1bW4uaXNTb3J0RGVzY2VuZGluZygpKSx0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWhlYWRlci1jZWxsLXNvcnRlZC1ub25lIix0aGlzLnBhcmFtcy5jb2x1bW4uaXNTb3J0Tm9uZSgpKSx0aGlzLnBhcmFtcy5jb2x1bW4uZ2V0Q29sRGVmKCkuc2hvd1Jvd0dyb3VwKXtjb25zdCBlPXRoaXMuY29sdW1uTW9kZWwuZ2V0U291cmNlQ29sdW1uc0Zvckdyb3VwQ29sdW1uKHRoaXMucGFyYW1zLmNvbHVtbiksdD0hKG51bGw9PWU/dm9pZCAwOmUuZXZlcnkoZT0+dGhpcy5wYXJhbXMuY29sdW1uLmdldFNvcnQoKT09ZS5nZXRTb3J0KCkpKTt0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWhlYWRlci1jZWxsLXNvcnRlZC1taXhlZCIsdCl9fTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9TT1JUX0NIQU5HRUQsZSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ09MVU1OX1JPV19HUk9VUF9DSEFOR0VELGUpfXNldHVwRmlsdGVySWNvbigpe3RoaXMuZUZpbHRlciYmdGhpcy5jb25maWd1cmVGaWx0ZXIodGhpcy5wYXJhbXMuZW5hYmxlRmlsdGVySWNvbix0aGlzLmVGaWx0ZXIsdGhpcy5vbkZpbHRlckNoYW5nZWRJY29uLmJpbmQodGhpcykpfXNldHVwRmlsdGVyQnV0dG9uKCl7aWYoIXRoaXMuZUZpbHRlckJ1dHRvbilyZXR1cm47dGhpcy5jb25maWd1cmVGaWx0ZXIodGhpcy5wYXJhbXMuZW5hYmxlRmlsdGVyQnV0dG9uLHRoaXMuZUZpbHRlckJ1dHRvbix0aGlzLm9uRmlsdGVyQ2hhbmdlZEJ1dHRvbi5iaW5kKHRoaXMpKT90aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVGaWx0ZXJCdXR0b24sImNsaWNrIiwoKT0+dGhpcy5wYXJhbXMuc2hvd0ZpbHRlcih0aGlzLmVGaWx0ZXJCdXR0b24pKTp0aGlzLmVGaWx0ZXJCdXR0b249dm9pZCAwfWNvbmZpZ3VyZUZpbHRlcihlLHQsaSl7aWYoIWUpcmV0dXJuIGZzKHQpLCExO2NvbnN0e2NvbHVtbjpzfT10aGlzLnBhcmFtcztyZXR1cm4gdGhpcy5hZGRJbkljb24oImZpbHRlciIsdCxzKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihzLEVlLkVWRU5UX0ZJTFRFUl9DSEFOR0VELGkpLGkoKSwhMH1vbkZpbHRlckNoYW5nZWRJY29uKCl7Y29uc3QgZT10aGlzLnBhcmFtcy5jb2x1bW4uaXNGaWx0ZXJBY3RpdmUoKTtpcyh0aGlzLmVGaWx0ZXIsZSx7c2tpcEFyaWFIaWRkZW46ITB9KX1vbkZpbHRlckNoYW5nZWRCdXR0b24oKXtjb25zdCBlPXRoaXMucGFyYW1zLmNvbHVtbi5pc0ZpbHRlckFjdGl2ZSgpO3RoaXMuZUZpbHRlckJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCJhZy1maWx0ZXItYWN0aXZlIixlKX1nZXRBbmNob3JFbGVtZW50Rm9yTWVudShlKXt2YXIgdCxpLHMscjtyZXR1cm4gZT9udWxsIT09KGk9bnVsbCE9PSh0PXRoaXMuZUZpbHRlckJ1dHRvbikmJnZvaWQgMCE9PXQ/dDp0aGlzLmVNZW51KSYmdm9pZCAwIT09aT9pOnRoaXMuZ2V0R3VpKCk6bnVsbCE9PShyPW51bGwhPT0ocz10aGlzLmVNZW51KSYmdm9pZCAwIT09cz9zOnRoaXMuZUZpbHRlckJ1dHRvbikmJnZvaWQgMCE9PXI/cjp0aGlzLmdldEd1aSgpfX11by5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctY2VsbC1sYWJlbC1jb250YWluZXIiIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICA8c3BhbiByZWY9ImVNZW51IiBjbGFzcz0iYWctaGVhZGVyLWljb24gYWctaGVhZGVyLWNlbGwtbWVudS1idXR0b24iIGFyaWEtaGlkZGVuPSJ0cnVlIj48L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiByZWY9ImVGaWx0ZXJCdXR0b24iIGNsYXNzPSJhZy1oZWFkZXItaWNvbiBhZy1oZWFkZXItY2VsbC1maWx0ZXItYnV0dG9uIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9zcGFuPlxuICAgICAgICAgICAgPGRpdiByZWY9ImVMYWJlbCIgY2xhc3M9ImFnLWhlYWRlci1jZWxsLWxhYmVsIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgIDxzcGFuIHJlZj0iZVRleHQiIGNsYXNzPSJhZy1oZWFkZXItY2VsbC10ZXh0Ij48L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gcmVmPSJlRmlsdGVyIiBjbGFzcz0iYWctaGVhZGVyLWljb24gYWctaGVhZGVyLWxhYmVsLWljb24gYWctZmlsdGVyLWljb24iIGFyaWEtaGlkZGVuPSJ0cnVlIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPGFnLXNvcnQtaW5kaWNhdG9yIHJlZj0iZVNvcnRJbmRpY2F0b3IiPjwvYWctc29ydC1pbmRpY2F0b3I+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+JyxobyhbY2UoInNvcnRDb250cm9sbGVyIildLHVvLnByb3RvdHlwZSwic29ydENvbnRyb2xsZXIiLHZvaWQgMCksaG8oW2NlKCJtZW51U2VydmljZSIpXSx1by5wcm90b3R5cGUsIm1lbnVTZXJ2aWNlIix2b2lkIDApLGhvKFtjZSgiY29sdW1uTW9kZWwiKV0sdW8ucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxobyhbdXIoImVGaWx0ZXIiKV0sdW8ucHJvdG90eXBlLCJlRmlsdGVyIix2b2lkIDApLGhvKFt1cigiZUZpbHRlckJ1dHRvbiIpXSx1by5wcm90b3R5cGUsImVGaWx0ZXJCdXR0b24iLHZvaWQgMCksaG8oW3VyKCJlU29ydEluZGljYXRvciIpXSx1by5wcm90b3R5cGUsImVTb3J0SW5kaWNhdG9yIix2b2lkIDApLGhvKFt1cigiZU1lbnUiKV0sdW8ucHJvdG90eXBlLCJlTWVudSIsdm9pZCAwKSxobyhbdXIoImVMYWJlbCIpXSx1by5wcm90b3R5cGUsImVMYWJlbCIsdm9pZCAwKSxobyhbdXIoImVUZXh0IildLHVvLnByb3RvdHlwZSwiZVRleHQiLHZvaWQgMCksaG8oW3VyKCJlU29ydE9yZGVyIildLHVvLnByb3RvdHlwZSwiZVNvcnRPcmRlciIsdm9pZCAwKSxobyhbdXIoImVTb3J0QXNjIildLHVvLnByb3RvdHlwZSwiZVNvcnRBc2MiLHZvaWQgMCksaG8oW3VyKCJlU29ydERlc2MiKV0sdW8ucHJvdG90eXBlLCJlU29ydERlc2MiLHZvaWQgMCksaG8oW3VyKCJlU29ydE1peGVkIildLHVvLnByb3RvdHlwZSwiZVNvcnRNaXhlZCIsdm9pZCAwKSxobyhbdXIoImVTb3J0Tm9uZSIpXSx1by5wcm90b3R5cGUsImVTb3J0Tm9uZSIsdm9pZCAwKTt2YXIgcG89ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgZ28gZXh0ZW5kcyBjcntjb25zdHJ1Y3Rvcigpe3N1cGVyKGdvLlRFTVBMQVRFKX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpfWluaXQoZSl7dGhpcy5wYXJhbXM9ZSx0aGlzLmNoZWNrV2FybmluZ3MoKSx0aGlzLnNldHVwTGFiZWwoKSx0aGlzLmFkZEdyb3VwRXhwYW5kSWNvbigpLHRoaXMuc2V0dXBFeHBhbmRJY29ucygpfWNoZWNrV2FybmluZ3MoKXt0aGlzLnBhcmFtcy50ZW1wbGF0ZSYmaigiQSB0ZW1wbGF0ZSB3YXMgcHJvdmlkZWQgZm9yIEhlYWRlciBHcm91cCBDb21wIC0gdGVtcGxhdGVzIGFyZSBvbmx5IHN1cHBvcnRlZCBmb3IgSGVhZGVyIENvbXBzIChub3QgZ3JvdXBzKSIpfXNldHVwRXhwYW5kSWNvbnMoKXt0aGlzLmFkZEluSWNvbigiY29sdW1uR3JvdXBPcGVuZWQiLCJhZ09wZW5lZCIpLHRoaXMuYWRkSW5JY29uKCJjb2x1bW5Hcm91cENsb3NlZCIsImFnQ2xvc2VkIik7Y29uc3QgZT1lPT57aWYoJGUoZSkpcmV0dXJuO2NvbnN0IHQ9IXRoaXMucGFyYW1zLmNvbHVtbkdyb3VwLmlzRXhwYW5kZWQoKTt0aGlzLmNvbHVtbk1vZGVsLnNldENvbHVtbkdyb3VwT3BlbmVkKHRoaXMucGFyYW1zLmNvbHVtbkdyb3VwLmdldFByb3ZpZGVkQ29sdW1uR3JvdXAoKSx0LCJ1aUNvbHVtbkV4cGFuZGVkIil9O3RoaXMuYWRkVG91Y2hBbmRDbGlja0xpc3RlbmVycyh0aGlzLmVDbG9zZUljb24sZSksdGhpcy5hZGRUb3VjaEFuZENsaWNrTGlzdGVuZXJzKHRoaXMuZU9wZW5JY29uLGUpO2NvbnN0IHQ9ZT0+e1llKGUpfTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVDbG9zZUljb24sImRibGNsaWNrIix0KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVPcGVuSWNvbiwiZGJsY2xpY2siLHQpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZ2V0R3VpKCksImRibGNsaWNrIixlKSx0aGlzLnVwZGF0ZUljb25WaXNpYmlsaXR5KCk7Y29uc3QgaT10aGlzLnBhcmFtcy5jb2x1bW5Hcm91cC5nZXRQcm92aWRlZENvbHVtbkdyb3VwKCk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoaSx4ZS5FVkVOVF9FWFBBTkRFRF9DSEFOR0VELHRoaXMudXBkYXRlSWNvblZpc2liaWxpdHkuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoaSx4ZS5FVkVOVF9FWFBBTkRBQkxFX0NIQU5HRUQsdGhpcy51cGRhdGVJY29uVmlzaWJpbGl0eS5iaW5kKHRoaXMpKX1hZGRUb3VjaEFuZENsaWNrTGlzdGVuZXJzKGUsdCl7Y29uc3QgaT1uZXcgYW8oZSwhMCk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoaSxhby5FVkVOVF9UQVAsdCksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+aS5kZXN0cm95KCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsImNsaWNrIix0KX11cGRhdGVJY29uVmlzaWJpbGl0eSgpe2lmKHRoaXMucGFyYW1zLmNvbHVtbkdyb3VwLmlzRXhwYW5kYWJsZSgpKXtjb25zdCBlPXRoaXMucGFyYW1zLmNvbHVtbkdyb3VwLmlzRXhwYW5kZWQoKTtpcyh0aGlzLmVPcGVuSWNvbixlKSxpcyh0aGlzLmVDbG9zZUljb24sIWUpfWVsc2UgaXModGhpcy5lT3Blbkljb24sITEpLGlzKHRoaXMuZUNsb3NlSWNvbiwhMSl9YWRkSW5JY29uKGUsdCl7Y29uc3QgaT1XcyhlLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpO2kmJnRoaXMuZ2V0UmVmRWxlbWVudCh0KS5hcHBlbmRDaGlsZChpKX1hZGRHcm91cEV4cGFuZEljb24oKXtpZighdGhpcy5wYXJhbXMuY29sdW1uR3JvdXAuaXNFeHBhbmRhYmxlKCkpcmV0dXJuIGlzKHRoaXMuZU9wZW5JY29uLCExKSx2b2lkIGlzKHRoaXMuZUNsb3NlSWNvbiwhMSl9c2V0dXBMYWJlbCgpe3ZhciBlO2NvbnN0e2Rpc3BsYXlOYW1lOnQsY29sdW1uR3JvdXA6aX09dGhpcy5wYXJhbXM7aWYoYih0KSl7Y29uc3QgZT1mdCh0LCEwKTt0aGlzLmdldFJlZkVsZW1lbnQoImFnTGFiZWwiKS50ZXh0Q29udGVudD1lfXRoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctc3RpY2t5LWxhYmVsIiwhKG51bGw9PT0oZT1pLmdldENvbEdyb3VwRGVmKCkpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnN1cHByZXNzU3RpY2t5TGFiZWwpKX19Z28uVEVNUExBVEU9JzxkaXYgY2xhc3M9ImFnLWhlYWRlci1ncm91cC1jZWxsLWxhYmVsIiByZWY9ImFnQ29udGFpbmVyIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgPHNwYW4gcmVmPSJhZ0xhYmVsIiBjbGFzcz0iYWctaGVhZGVyLWdyb3VwLXRleHQiIHJvbGU9InByZXNlbnRhdGlvbiI+PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gcmVmPSJhZ09wZW5lZCIgY2xhc3M9ImFnLWhlYWRlci1pY29uIGFnLWhlYWRlci1leHBhbmQtaWNvbiBhZy1oZWFkZXItZXhwYW5kLWljb24tZXhwYW5kZWQiPjwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIHJlZj0iYWdDbG9zZWQiIGNsYXNzPSJhZy1oZWFkZXItaWNvbiBhZy1oZWFkZXItZXhwYW5kLWljb24gYWctaGVhZGVyLWV4cGFuZC1pY29uLWNvbGxhcHNlZCI+PC9zcGFuPlxuICAgICAgICA8L2Rpdj4nLHBvKFtjZSgiY29sdW1uTW9kZWwiKV0sZ28ucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxwbyhbdXIoImFnT3BlbmVkIildLGdvLnByb3RvdHlwZSwiZU9wZW5JY29uIix2b2lkIDApLHBvKFt1cigiYWdDbG9zZWQiKV0sZ28ucHJvdG90eXBlLCJlQ2xvc2VJY29uIix2b2lkIDApO2NsYXNzIG1vIGV4dGVuZHMgY3J7aXNQb3B1cCgpe3JldHVybiEwfXNldFBhcmVudENvbXBvbmVudChlKXtlLmFkZENzc0NsYXNzKCJhZy1oYXMtcG9wdXAiKSxzdXBlci5zZXRQYXJlbnRDb21wb25lbnQoZSl9ZGVzdHJveSgpe2NvbnN0IGU9dGhpcy5wYXJlbnRDb21wb25lbnQ7ZSYmZS5pc0FsaXZlKCkmJmUuZ2V0R3VpKCkuY2xhc3NMaXN0LnJlbW92ZSgiYWctaGFzLXBvcHVwIiksc3VwZXIuZGVzdHJveSgpfX12YXIgZm89ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3Mgdm8gZXh0ZW5kcyBtb3tjb25zdHJ1Y3Rvcigpe3N1cGVyKHZvLlRFTVBMQVRFKX1pbml0KGUpe3RoaXMucGFyYW1zPWUsdGhpcy5mb2N1c0FmdGVyQXR0YWNoZWQ9ZS5jZWxsU3RhcnRlZEVkaXQsdGhpcy5lVGV4dEFyZWEuc2V0TWF4TGVuZ3RoKGUubWF4TGVuZ3RofHwyMDApLnNldENvbHMoZS5jb2xzfHw2MCkuc2V0Um93cyhlLnJvd3N8fDEwKSxiKGUudmFsdWUsITApJiZ0aGlzLmVUZXh0QXJlYS5zZXRWYWx1ZShlLnZhbHVlLnRvU3RyaW5nKCksITApLHRoaXMuYWRkR3VpRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsdGhpcy5vbktleURvd24uYmluZCh0aGlzKSksdGhpcy5hY3RpdmF0ZVRhYkluZGV4KCl9b25LZXlEb3duKGUpe2NvbnN0IHQ9ZS5rZXk7KHQ9PT1qcy5MRUZUfHx0PT09anMuVVB8fHQ9PT1qcy5SSUdIVHx8dD09PWpzLkRPV058fGUuc2hpZnRLZXkmJnQ9PT1qcy5FTlRFUikmJmUuc3RvcFByb3BhZ2F0aW9uKCl9YWZ0ZXJHdWlBdHRhY2hlZCgpe2NvbnN0IGU9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCk7dGhpcy5lVGV4dEFyZWEuc2V0SW5wdXRBcmlhTGFiZWwoZSgiYXJpYUlucHV0RWRpdG9yIiwiSW5wdXQgRWRpdG9yIikpLHRoaXMuZm9jdXNBZnRlckF0dGFjaGVkJiZ0aGlzLmVUZXh0QXJlYS5nZXRGb2N1c2FibGVFbGVtZW50KCkuZm9jdXMoKX1nZXRWYWx1ZSgpe2NvbnN0IGU9dGhpcy5lVGV4dEFyZWEuZ2V0VmFsdWUoKTtyZXR1cm4gYihlKXx8Yih0aGlzLnBhcmFtcy52YWx1ZSk/dGhpcy5wYXJhbXMucGFyc2VWYWx1ZShlKTp0aGlzLnBhcmFtcy52YWx1ZX19dm8uVEVNUExBVEU9JzxkaXYgY2xhc3M9ImFnLWxhcmdlLXRleHQiPlxuICAgICAgICAgICAgPGFnLWlucHV0LXRleHQtYXJlYSByZWY9ImVUZXh0QXJlYSIgY2xhc3M9ImFnLWxhcmdlLXRleHQtaW5wdXQiPjwvYWctaW5wdXQtdGV4dC1hcmVhPlxuICAgICAgICA8L2Rpdj4nLGZvKFt1cigiZVRleHRBcmVhIildLHZvLnByb3RvdHlwZSwiZVRleHRBcmVhIix2b2lkIDApO3ZhciBDbz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyB5byBleHRlbmRzIG1ve2NvbnN0cnVjdG9yKCl7c3VwZXIoJzxkaXYgY2xhc3M9ImFnLWNlbGwtZWRpdC13cmFwcGVyIj5cbiAgICAgICAgICAgICAgICA8YWctc2VsZWN0IGNsYXNzPSJhZy1jZWxsLWVkaXRvciIgcmVmPSJlU2VsZWN0Ij48L2FnLXNlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PicpLHRoaXMuc3RhcnRlZEJ5RW50ZXI9ITF9aW5pdChlKXt0aGlzLmZvY3VzQWZ0ZXJBdHRhY2hlZD1lLmNlbGxTdGFydGVkRWRpdDtjb25zdHtlU2VsZWN0OnQsdmFsdWVGb3JtYXR0ZXJTZXJ2aWNlOmksZ3JpZE9wdGlvbnNTZXJ2aWNlOnN9PXRoaXMse3ZhbHVlczpyLHZhbHVlOm8sZXZlbnRLZXk6bn09ZTtpZihFKHIpKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZDogbm8gdmFsdWVzIGZvdW5kIGZvciBzZWxlY3QgY2VsbEVkaXRvciIpO3RoaXMuc3RhcnRlZEJ5RW50ZXI9bnVsbCE9biYmbj09PWpzLkVOVEVSO2xldCBhPSExO3IuZm9yRWFjaChzPT57Y29uc3Qgcj17dmFsdWU6c30sbj1pLmZvcm1hdFZhbHVlKGUuY29sdW1uLG51bGwscyksbD1udWxsIT1uO3IudGV4dD1sP246cyx0LmFkZE9wdGlvbihyKSxhPWF8fG89PT1zfSksYT90LnNldFZhbHVlKGUudmFsdWUsITApOmUudmFsdWVzLmxlbmd0aCYmdC5zZXRWYWx1ZShlLnZhbHVlc1swXSwhMCk7Y29uc3R7dmFsdWVMaXN0R2FwOmwsdmFsdWVMaXN0TWF4V2lkdGg6ZCx2YWx1ZUxpc3RNYXhIZWlnaHQ6Y309ZTtudWxsIT1sJiZ0LnNldFBpY2tlckdhcChsKSxudWxsIT1jJiZ0LnNldFBpY2tlck1heEhlaWdodChjKSxudWxsIT1kJiZ0LnNldFBpY2tlck1heFdpZHRoKGQpLCJmdWxsUm93IiE9PXMuZ2V0KCJlZGl0VHlwZSIpJiZ0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVTZWxlY3QsTHIuRVZFTlRfSVRFTV9TRUxFQ1RFRCwoKT0+ZS5zdG9wRWRpdGluZygpKX1hZnRlckd1aUF0dGFjaGVkKCl7dGhpcy5mb2N1c0FmdGVyQXR0YWNoZWQmJnRoaXMuZVNlbGVjdC5nZXRGb2N1c2FibGVFbGVtZW50KCkuZm9jdXMoKSx0aGlzLnN0YXJ0ZWRCeUVudGVyJiZzZXRUaW1lb3V0KCgpPT57dGhpcy5pc0FsaXZlKCkmJnRoaXMuZVNlbGVjdC5zaG93UGlja2VyKCl9KX1mb2N1c0luKCl7dGhpcy5lU2VsZWN0LmdldEZvY3VzYWJsZUVsZW1lbnQoKS5mb2N1cygpfWdldFZhbHVlKCl7cmV0dXJuIHRoaXMuZVNlbGVjdC5nZXRWYWx1ZSgpfWlzUG9wdXAoKXtyZXR1cm4hMX19Q28oW2NlKCJ2YWx1ZUZvcm1hdHRlclNlcnZpY2UiKV0seW8ucHJvdG90eXBlLCJ2YWx1ZUZvcm1hdHRlclNlcnZpY2UiLHZvaWQgMCksQ28oW3VyKCJlU2VsZWN0IildLHlvLnByb3RvdHlwZSwiZVNlbGVjdCIsdm9pZCAwKTt2YXIgU289ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3Mgd28gZXh0ZW5kcyBtb3tjb25zdHJ1Y3RvcihlKXtzdXBlcihgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1jZWxsLWVkaXQtd3JhcHBlciI+XG4gICAgICAgICAgICAgICAgJHtlLmdldFRlbXBsYXRlKCl9XG4gICAgICAgICAgICA8L2Rpdj5gKSx0aGlzLmNlbGxFZGl0b3JJbnB1dD1lfWluaXQoZSl7dGhpcy5wYXJhbXM9ZTtjb25zdCB0PXRoaXMuZUlucHV0O2xldCBpO2lmKHRoaXMuY2VsbEVkaXRvcklucHV0LmluaXQodCxlKSxlLmNlbGxTdGFydGVkRWRpdCl7dGhpcy5mb2N1c0FmdGVyQXR0YWNoZWQ9ITA7Y29uc3QgdD1lLmV2ZW50S2V5O3Q9PT1qcy5CQUNLU1BBQ0V8fGUuZXZlbnRLZXk9PT1qcy5ERUxFVEU/aT0iIjp0JiYxPT09dC5sZW5ndGg/aT10OihpPXRoaXMuY2VsbEVkaXRvcklucHV0LmdldFN0YXJ0VmFsdWUoKSx0IT09anMuRjImJih0aGlzLmhpZ2hsaWdodEFsbE9uRm9jdXM9ITApKX1lbHNlIHRoaXMuZm9jdXNBZnRlckF0dGFjaGVkPSExLGk9dGhpcy5jZWxsRWRpdG9ySW5wdXQuZ2V0U3RhcnRWYWx1ZSgpO251bGwhPWkmJnQuc2V0U3RhcnRWYWx1ZShpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0LmdldEd1aSgpLCJrZXlkb3duIixlPT57Y29uc3R7a2V5OnR9PWU7dCE9PWpzLlBBR0VfVVAmJnQhPT1qcy5QQUdFX0RPV058fGUucHJldmVudERlZmF1bHQoKX0pfWFmdGVyR3VpQXR0YWNoZWQoKXt2YXIgZSx0O2NvbnN0IGk9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCkscz10aGlzLmVJbnB1dDtpZihzLnNldElucHV0QXJpYUxhYmVsKGkoImFyaWFJbnB1dEVkaXRvciIsIklucHV0IEVkaXRvciIpKSwhdGhpcy5mb2N1c0FmdGVyQXR0YWNoZWQpcmV0dXJuO1RpKCl8fHMuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLmZvY3VzKCk7Y29uc3Qgcj1zLmdldElucHV0RWxlbWVudCgpO3RoaXMuaGlnaGxpZ2h0QWxsT25Gb2N1cz9yLnNlbGVjdCgpOm51bGw9PT0odD0oZT10aGlzLmNlbGxFZGl0b3JJbnB1dCkuc2V0Q2FyZXQpfHx2b2lkIDA9PT10fHx0LmNhbGwoZSl9Zm9jdXNJbigpe2NvbnN0IGU9dGhpcy5lSW5wdXQsdD1lLmdldEZvY3VzYWJsZUVsZW1lbnQoKSxpPWUuZ2V0SW5wdXRFbGVtZW50KCk7dC5mb2N1cygpLGkuc2VsZWN0KCl9Z2V0VmFsdWUoKXtyZXR1cm4gdGhpcy5jZWxsRWRpdG9ySW5wdXQuZ2V0VmFsdWUoKX1pc1BvcHVwKCl7cmV0dXJuITF9fVNvKFt1cigiZUlucHV0IildLHdvLnByb3RvdHlwZSwiZUlucHV0Iix2b2lkIDApO2NsYXNzIGJve2dldFRlbXBsYXRlKCl7cmV0dXJuJzxhZy1pbnB1dC10ZXh0LWZpZWxkIGNsYXNzPSJhZy1jZWxsLWVkaXRvciIgcmVmPSJlSW5wdXQiPjwvYWctaW5wdXQtdGV4dC1maWVsZD4nfWluaXQoZSx0KXt0aGlzLmVJbnB1dD1lLHRoaXMucGFyYW1zPXQsbnVsbCE9dC5tYXhMZW5ndGgmJmUuc2V0TWF4TGVuZ3RoKHQubWF4TGVuZ3RoKX1nZXRWYWx1ZSgpe2NvbnN0IGU9dGhpcy5lSW5wdXQuZ2V0VmFsdWUoKTtyZXR1cm4gYihlKXx8Yih0aGlzLnBhcmFtcy52YWx1ZSk/dGhpcy5wYXJhbXMucGFyc2VWYWx1ZShlKTp0aGlzLnBhcmFtcy52YWx1ZX1nZXRTdGFydFZhbHVlKCl7cmV0dXJuIHRoaXMucGFyYW1zLnVzZUZvcm1hdHRlcnx8dGhpcy5wYXJhbXMuY29sdW1uLmdldENvbERlZigpLnJlZkRhdGE/dGhpcy5wYXJhbXMuZm9ybWF0VmFsdWUodGhpcy5wYXJhbXMudmFsdWUpOnRoaXMucGFyYW1zLnZhbHVlfXNldENhcmV0KCl7Y29uc3QgZT10aGlzLmVJbnB1dC5nZXRWYWx1ZSgpLHQ9YihlKSYmZS5sZW5ndGh8fDA7dCYmdGhpcy5lSW5wdXQuZ2V0SW5wdXRFbGVtZW50KCkuc2V0U2VsZWN0aW9uUmFuZ2UodCx0KX19Y2xhc3MgRW8gZXh0ZW5kcyB3b3tjb25zdHJ1Y3Rvcigpe3N1cGVyKG5ldyBibyl9fXZhciBSbz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyB4byBleHRlbmRzIGNye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnJlZnJlc2hDb3VudD0wO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO3Quc2V0QXR0cmlidXRlKCJjbGFzcyIsImFnLXZhbHVlLWNoYW5nZS1kZWx0YSIpO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2kuc2V0QXR0cmlidXRlKCJjbGFzcyIsImFnLXZhbHVlLWNoYW5nZS12YWx1ZSIpLGUuYXBwZW5kQ2hpbGQodCksZS5hcHBlbmRDaGlsZChpKSx0aGlzLnNldFRlbXBsYXRlRnJvbUVsZW1lbnQoZSl9aW5pdChlKXt0aGlzLmVWYWx1ZT10aGlzLnF1ZXJ5Rm9ySHRtbEVsZW1lbnQoIi5hZy12YWx1ZS1jaGFuZ2UtdmFsdWUiKSx0aGlzLmVEZWx0YT10aGlzLnF1ZXJ5Rm9ySHRtbEVsZW1lbnQoIi5hZy12YWx1ZS1jaGFuZ2UtZGVsdGEiKSx0aGlzLnJlZnJlc2goZSwhMCl9c2hvd0RlbHRhKGUsdCl7Y29uc3QgaT1NYXRoLmFicyh0KSxzPWUuZm9ybWF0VmFsdWUoaSkscj1iKHMpP3M6aSxvPXQ+PTA7dGhpcy5lRGVsdGEudGV4dENvbnRlbnQ9bz8i4oaRIityOiLihpMiK3IsdGhpcy5lRGVsdGEuY2xhc3NMaXN0LnRvZ2dsZSgiYWctdmFsdWUtY2hhbmdlLWRlbHRhLXVwIixvKSx0aGlzLmVEZWx0YS5jbGFzc0xpc3QudG9nZ2xlKCJhZy12YWx1ZS1jaGFuZ2UtZGVsdGEtZG93biIsIW8pfXNldFRpbWVyVG9SZW1vdmVEZWx0YSgpe3RoaXMucmVmcmVzaENvdW50Kys7Y29uc3QgZT10aGlzLnJlZnJlc2hDb3VudDt0aGlzLmdldEZyYW1ld29ya092ZXJyaWRlcygpLndyYXBJbmNvbWluZygoKT0+e3dpbmRvdy5zZXRUaW1lb3V0KCgpPT57ZT09PXRoaXMucmVmcmVzaENvdW50JiZ0aGlzLmhpZGVEZWx0YVZhbHVlKCl9LDJlMyl9KX1oaWRlRGVsdGFWYWx1ZSgpe3RoaXMuZVZhbHVlLmNsYXNzTGlzdC5yZW1vdmUoImFnLXZhbHVlLWNoYW5nZS12YWx1ZS1oaWdobGlnaHQiKSxtcyh0aGlzLmVEZWx0YSl9cmVmcmVzaChlLHQ9ITEpe2NvbnN0IGk9ZS52YWx1ZTtpZihpPT09dGhpcy5sYXN0VmFsdWUpcmV0dXJuITE7aWYoYihlLnZhbHVlRm9ybWF0dGVkKT90aGlzLmVWYWx1ZS50ZXh0Q29udGVudD1lLnZhbHVlRm9ybWF0dGVkOmIoZS52YWx1ZSk/dGhpcy5lVmFsdWUudGV4dENvbnRlbnQ9aTptcyh0aGlzLmVWYWx1ZSksdGhpcy5maWx0ZXJNYW5hZ2VyLmlzU3VwcHJlc3NGbGFzaGluZ0NlbGxzQmVjYXVzZUZpbHRlcmluZygpKXJldHVybiExO2lmKCJudW1iZXIiPT10eXBlb2YgaSYmIm51bWJlciI9PXR5cGVvZiB0aGlzLmxhc3RWYWx1ZSl7Y29uc3QgdD1pLXRoaXMubGFzdFZhbHVlO3RoaXMuc2hvd0RlbHRhKGUsdCl9cmV0dXJuIHRoaXMubGFzdFZhbHVlJiZ0aGlzLmVWYWx1ZS5jbGFzc0xpc3QuYWRkKCJhZy12YWx1ZS1jaGFuZ2UtdmFsdWUtaGlnaGxpZ2h0IiksdHx8dGhpcy5zZXRUaW1lclRvUmVtb3ZlRGVsdGEoKSx0aGlzLmxhc3RWYWx1ZT1pLCEwfX1SbyhbY2UoImZpbHRlck1hbmFnZXIiKV0seG8ucHJvdG90eXBlLCJmaWx0ZXJNYW5hZ2VyIix2b2lkIDApO3ZhciBUbz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBEbyBleHRlbmRzIGNye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnJlZnJlc2hDb3VudD0wO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO3Quc2V0QXR0cmlidXRlKCJjbGFzcyIsImFnLXZhbHVlLXNsaWRlLWN1cnJlbnQiKSxlLmFwcGVuZENoaWxkKHQpLHRoaXMuc2V0VGVtcGxhdGVGcm9tRWxlbWVudChlKSx0aGlzLmVDdXJyZW50PXRoaXMucXVlcnlGb3JIdG1sRWxlbWVudCgiLmFnLXZhbHVlLXNsaWRlLWN1cnJlbnQiKX1pbml0KGUpe3RoaXMucmVmcmVzaChlLCEwKX1hZGRTbGlkZUFuaW1hdGlvbigpe3RoaXMucmVmcmVzaENvdW50Kys7Y29uc3QgZT10aGlzLnJlZnJlc2hDb3VudDt0aGlzLmVQcmV2aW91cyYmdGhpcy5nZXRHdWkoKS5yZW1vdmVDaGlsZCh0aGlzLmVQcmV2aW91cyk7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7dC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwiYWctdmFsdWUtc2xpZGUtcHJldmlvdXMgYWctdmFsdWUtc2xpZGUtb3V0IiksdGhpcy5lUHJldmlvdXM9dCx0aGlzLmVQcmV2aW91cy50ZXh0Q29udGVudD10aGlzLmVDdXJyZW50LnRleHRDb250ZW50LHRoaXMuZ2V0R3VpKCkuaW5zZXJ0QmVmb3JlKHRoaXMuZVByZXZpb3VzLHRoaXMuZUN1cnJlbnQpLHRoaXMuZ2V0RnJhbWV3b3JrT3ZlcnJpZGVzKCkud3JhcEluY29taW5nKCgpPT57d2luZG93LnNldFRpbWVvdXQoKCk9PntlPT09dGhpcy5yZWZyZXNoQ291bnQmJnRoaXMuZVByZXZpb3VzLmNsYXNzTGlzdC5hZGQoImFnLXZhbHVlLXNsaWRlLW91dC1lbmQiKX0sNTApLHdpbmRvdy5zZXRUaW1lb3V0KCgpPT57ZT09PXRoaXMucmVmcmVzaENvdW50JiYodGhpcy5nZXRHdWkoKS5yZW1vdmVDaGlsZCh0aGlzLmVQcmV2aW91cyksdGhpcy5lUHJldmlvdXM9bnVsbCl9LDNlMyl9KX1yZWZyZXNoKGUsdD0hMSl7bGV0IGk9ZS52YWx1ZTtyZXR1cm4gRShpKSYmKGk9IiIpLGkhPT10aGlzLmxhc3RWYWx1ZSYmKCF0aGlzLmZpbHRlck1hbmFnZXIuaXNTdXBwcmVzc0ZsYXNoaW5nQ2VsbHNCZWNhdXNlRmlsdGVyaW5nKCkmJih0fHx0aGlzLmFkZFNsaWRlQW5pbWF0aW9uKCksdGhpcy5sYXN0VmFsdWU9aSxiKGUudmFsdWVGb3JtYXR0ZWQpP3RoaXMuZUN1cnJlbnQudGV4dENvbnRlbnQ9ZS52YWx1ZUZvcm1hdHRlZDpiKGUudmFsdWUpP3RoaXMuZUN1cnJlbnQudGV4dENvbnRlbnQ9aTptcyh0aGlzLmVDdXJyZW50KSwhMCkpfX1UbyhbY2UoImZpbHRlck1hbmFnZXIiKV0sRG8ucHJvdG90eXBlLCJmaWx0ZXJNYW5hZ2VyIix2b2lkIDApO2NsYXNzIE9ve2NvbnN0cnVjdG9yKGUpe3RoaXMucm93SW5kZXg9bnVsbCx0aGlzLmtleT1udWxsLHRoaXMuY2hpbGRyZW5NYXBwZWQ9e30sdGhpcy5kaXNwbGF5ZWQ9ITEsdGhpcy5yb3dUb3A9bnVsbCx0aGlzLm9sZFJvd1RvcD1udWxsLHRoaXMuc2VsZWN0YWJsZT0hMCx0aGlzLl9fb2JqZWN0SWQ9T28uT0JKRUNUX0lEX1NFUVVFTkNFKyssdGhpcy5fX2F1dG9IZWlnaHRzPXt9LHRoaXMuYWxyZWFkeVJlbmRlcmVkPSExLHRoaXMuaGlnaGxpZ2h0ZWQ9bnVsbCx0aGlzLmhvdmVyZWQ9ITEsdGhpcy5zZWxlY3RlZD0hMSx0aGlzLmJlYW5zPWV9c2V0RGF0YShlKXt0aGlzLnNldERhdGFDb21tb24oZSwhMSl9dXBkYXRlRGF0YShlKXt0aGlzLnNldERhdGFDb21tb24oZSwhMCl9c2V0RGF0YUNvbW1vbihlLHQpe2NvbnN0IGk9dGhpcy5kYXRhO3RoaXMuZGF0YT1lLHRoaXMuYmVhbnMudmFsdWVDYWNoZS5vbkRhdGFDaGFuZ2VkKCksdGhpcy51cGRhdGVEYXRhT25EZXRhaWxOb2RlKCksdGhpcy5jaGVja1Jvd1NlbGVjdGFibGUoKSx0aGlzLnJlc2V0UXVpY2tGaWx0ZXJBZ2dyZWdhdGVUZXh0KCk7Y29uc3Qgcz10aGlzLmNyZWF0ZURhdGFDaGFuZ2VkRXZlbnQoZSxpLHQpO3RoaXMuZGlzcGF0Y2hMb2NhbEV2ZW50KHMpfXVwZGF0ZURhdGFPbkRldGFpbE5vZGUoKXt0aGlzLmRldGFpbE5vZGUmJih0aGlzLmRldGFpbE5vZGUuZGF0YT10aGlzLmRhdGEpfWNyZWF0ZURhdGFDaGFuZ2VkRXZlbnQoZSx0LGkpe3JldHVybnt0eXBlOk9vLkVWRU5UX0RBVEFfQ0hBTkdFRCxub2RlOnRoaXMsb2xkRGF0YTp0LG5ld0RhdGE6ZSx1cGRhdGU6aX19Y3JlYXRlTG9jYWxSb3dFdmVudChlKXtyZXR1cm57dHlwZTplLG5vZGU6dGhpc319Z2V0Um93SW5kZXhTdHJpbmcoKXtyZXR1cm4idG9wIj09PXRoaXMucm93UGlubmVkPyJ0LSIrdGhpcy5yb3dJbmRleDoiYm90dG9tIj09PXRoaXMucm93UGlubmVkPyJiLSIrdGhpcy5yb3dJbmRleDp0aGlzLnJvd0luZGV4LnRvU3RyaW5nKCl9Y3JlYXRlRGFlbW9uTm9kZSgpe2NvbnN0IGU9bmV3IE9vKHRoaXMuYmVhbnMpO3JldHVybiBlLmlkPXRoaXMuaWQsZS5kYXRhPXRoaXMuZGF0YSxlLl9fZGFlbW9uPSEwLGUuc2VsZWN0ZWQ9dGhpcy5zZWxlY3RlZCxlLmxldmVsPXRoaXMubGV2ZWwsZX1zZXREYXRhQW5kSWQoZSx0KXtjb25zdCBpPWIodGhpcy5pZCk/dGhpcy5jcmVhdGVEYWVtb25Ob2RlKCk6bnVsbCxzPXRoaXMuZGF0YTt0aGlzLmRhdGE9ZSx0aGlzLnVwZGF0ZURhdGFPbkRldGFpbE5vZGUoKSx0aGlzLnNldElkKHQpLHRoaXMuY2hlY2tSb3dTZWxlY3RhYmxlKCksdGhpcy5iZWFucy5zZWxlY3Rpb25TZXJ2aWNlLnN5bmNJblJvd05vZGUodGhpcyxpKTtjb25zdCByPXRoaXMuY3JlYXRlRGF0YUNoYW5nZWRFdmVudChlLHMsITEpO3RoaXMuZGlzcGF0Y2hMb2NhbEV2ZW50KHIpfWNoZWNrUm93U2VsZWN0YWJsZSgpe2NvbnN0IGU9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJpc1Jvd1NlbGVjdGFibGUiKTt0aGlzLnNldFJvd1NlbGVjdGFibGUoIWV8fGUodGhpcykpfXNldFJvd1NlbGVjdGFibGUoZSx0KXtpZih0aGlzLnNlbGVjdGFibGUhPT1lKXtpZih0aGlzLnNlbGVjdGFibGU9ZSx0aGlzLmV2ZW50U2VydmljZSYmdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUxvY2FsUm93RXZlbnQoT28uRVZFTlRfU0VMRUNUQUJMRV9DSEFOR0VEKSksdClyZXR1cm47aWYodGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cFNlbGVjdHNDaGlsZHJlbiIpKXtjb25zdCBlPXRoaXMuY2FsY3VsYXRlU2VsZWN0ZWRGcm9tQ2hpbGRyZW4oKTtyZXR1cm4gdm9pZCB0aGlzLnNldFNlbGVjdGVkUGFyYW1zKHtuZXdWYWx1ZTpudWxsIT1lJiZlLHNvdXJjZToic2VsZWN0YWJsZUNoYW5nZWQifSl9dGhpcy5pc1NlbGVjdGVkKCkmJiF0aGlzLnNlbGVjdGFibGUmJnRoaXMuc2V0U2VsZWN0ZWRQYXJhbXMoe25ld1ZhbHVlOiExLHNvdXJjZToic2VsZWN0YWJsZUNoYW5nZWQifSl9fXNldElkKGUpe2NvbnN0IHQ9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soImdldFJvd0lkIik7aWYodClpZih0aGlzLmRhdGEpe2NvbnN0IGU9dGhpcy5nZXRHcm91cEtleXMoITApO3RoaXMuaWQ9dCh7ZGF0YTp0aGlzLmRhdGEscGFyZW50S2V5czplLmxlbmd0aD4wP2U6dm9pZCAwLGxldmVsOnRoaXMubGV2ZWx9KSxudWxsIT09dGhpcy5pZCYmInN0cmluZyI9PXR5cGVvZiB0aGlzLmlkJiZ0aGlzLmlkLnN0YXJ0c1dpdGgoT28uSURfUFJFRklYX1JPV19HUk9VUCkmJmNvbnNvbGUuZXJyb3IoYEFHIEdyaWQ6IFJvdyBJRHMgY2Fubm90IHN0YXJ0IHdpdGggJHtPby5JRF9QUkVGSVhfUk9XX0dST1VQfSwgdGhpcyBpcyBhIHJlc2VydmVkIHByZWZpeCBmb3IgQUcgR3JpZCdzIHJvdyBncm91cGluZyBmZWF0dXJlLmApLG51bGwhPT10aGlzLmlkJiYic3RyaW5nIiE9dHlwZW9mIHRoaXMuaWQmJih0aGlzLmlkPSIiK3RoaXMuaWQpfWVsc2UgdGhpcy5pZD12b2lkIDA7ZWxzZSB0aGlzLmlkPWV9Z2V0R3JvdXBLZXlzKGU9ITEpe2NvbnN0IHQ9W107bGV0IGk9dGhpcztmb3IoZSYmKGk9aS5wYXJlbnQpO2kmJmkubGV2ZWw+PTA7KXQucHVzaChpLmtleSksaT1pLnBhcmVudDtyZXR1cm4gdC5yZXZlcnNlKCksdH1pc1BpeGVsSW5SYW5nZShlKXtyZXR1cm4hKCFiKHRoaXMucm93VG9wKXx8IWIodGhpcy5yb3dIZWlnaHQpKSYmKGU+PXRoaXMucm93VG9wJiZlPHRoaXMucm93VG9wK3RoaXMucm93SGVpZ2h0KX1zZXRGaXJzdENoaWxkKGUpe3RoaXMuZmlyc3RDaGlsZCE9PWUmJih0aGlzLmZpcnN0Q2hpbGQ9ZSx0aGlzLmV2ZW50U2VydmljZSYmdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUxvY2FsUm93RXZlbnQoT28uRVZFTlRfRklSU1RfQ0hJTERfQ0hBTkdFRCkpKX1zZXRMYXN0Q2hpbGQoZSl7dGhpcy5sYXN0Q2hpbGQhPT1lJiYodGhpcy5sYXN0Q2hpbGQ9ZSx0aGlzLmV2ZW50U2VydmljZSYmdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUxvY2FsUm93RXZlbnQoT28uRVZFTlRfTEFTVF9DSElMRF9DSEFOR0VEKSkpfXNldENoaWxkSW5kZXgoZSl7dGhpcy5jaGlsZEluZGV4IT09ZSYmKHRoaXMuY2hpbGRJbmRleD1lLHRoaXMuZXZlbnRTZXJ2aWNlJiZ0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHRoaXMuY3JlYXRlTG9jYWxSb3dFdmVudChPby5FVkVOVF9DSElMRF9JTkRFWF9DSEFOR0VEKSkpfXNldFJvd1RvcChlKXt0aGlzLm9sZFJvd1RvcD10aGlzLnJvd1RvcCx0aGlzLnJvd1RvcCE9PWUmJih0aGlzLnJvd1RvcD1lLHRoaXMuZXZlbnRTZXJ2aWNlJiZ0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHRoaXMuY3JlYXRlTG9jYWxSb3dFdmVudChPby5FVkVOVF9UT1BfQ0hBTkdFRCkpLHRoaXMuc2V0RGlzcGxheWVkKG51bGwhPT1lKSl9Y2xlYXJSb3dUb3BBbmRSb3dJbmRleCgpe3RoaXMub2xkUm93VG9wPW51bGwsdGhpcy5zZXRSb3dUb3AobnVsbCksdGhpcy5zZXRSb3dJbmRleChudWxsKX1zZXREaXNwbGF5ZWQoZSl7dGhpcy5kaXNwbGF5ZWQhPT1lJiYodGhpcy5kaXNwbGF5ZWQ9ZSx0aGlzLmV2ZW50U2VydmljZSYmdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUxvY2FsUm93RXZlbnQoT28uRVZFTlRfRElTUExBWUVEX0NIQU5HRUQpKSl9c2V0RHJhZ2dpbmcoZSl7dGhpcy5kcmFnZ2luZyE9PWUmJih0aGlzLmRyYWdnaW5nPWUsdGhpcy5ldmVudFNlcnZpY2UmJnRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVMb2NhbFJvd0V2ZW50KE9vLkVWRU5UX0RSQUdHSU5HX0NIQU5HRUQpKSl9c2V0SGlnaGxpZ2h0ZWQoZSl7ZSE9PXRoaXMuaGlnaGxpZ2h0ZWQmJih0aGlzLmhpZ2hsaWdodGVkPWUsdGhpcy5ldmVudFNlcnZpY2UmJnRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVMb2NhbFJvd0V2ZW50KE9vLkVWRU5UX0hJR0hMSUdIVF9DSEFOR0VEKSkpfXNldEhvdmVyZWQoZSl7dGhpcy5ob3ZlcmVkIT09ZSYmKHRoaXMuaG92ZXJlZD1lKX1pc0hvdmVyZWQoKXtyZXR1cm4gdGhpcy5ob3ZlcmVkfXNldEFsbENoaWxkcmVuQ291bnQoZSl7dGhpcy5hbGxDaGlsZHJlbkNvdW50IT09ZSYmKHRoaXMuYWxsQ2hpbGRyZW5Db3VudD1lLHRoaXMuZXZlbnRTZXJ2aWNlJiZ0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHRoaXMuY3JlYXRlTG9jYWxSb3dFdmVudChPby5FVkVOVF9BTExfQ0hJTERSRU5fQ09VTlRfQ0hBTkdFRCkpKX1zZXRNYXN0ZXIoZSl7dGhpcy5tYXN0ZXIhPT1lJiYodGhpcy5tYXN0ZXImJiFlJiYodGhpcy5leHBhbmRlZD0hMSksdGhpcy5tYXN0ZXI9ZSx0aGlzLmV2ZW50U2VydmljZSYmdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUxvY2FsUm93RXZlbnQoT28uRVZFTlRfTUFTVEVSX0NIQU5HRUQpKSl9c2V0R3JvdXAoZSl7dGhpcy5ncm91cCE9PWUmJih0aGlzLmdyb3VwJiYhZSYmKHRoaXMuZXhwYW5kZWQ9ITEpLHRoaXMuZ3JvdXA9ZSx0aGlzLnVwZGF0ZUhhc0NoaWxkcmVuKCksdGhpcy5ldmVudFNlcnZpY2UmJnRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVMb2NhbFJvd0V2ZW50KE9vLkVWRU5UX0dST1VQX0NIQU5HRUQpKSl9c2V0Um93SGVpZ2h0KGUsdD0hMSl7dGhpcy5yb3dIZWlnaHQ9ZSx0aGlzLnJvd0hlaWdodEVzdGltYXRlZD10LHRoaXMuZXZlbnRTZXJ2aWNlJiZ0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHRoaXMuY3JlYXRlTG9jYWxSb3dFdmVudChPby5FVkVOVF9IRUlHSFRfQ0hBTkdFRCkpfXNldFJvd0F1dG9IZWlnaHQoZSx0KXt0aGlzLl9fYXV0b0hlaWdodHN8fCh0aGlzLl9fYXV0b0hlaWdodHM9e30pLHRoaXMuX19hdXRvSGVpZ2h0c1t0LmdldElkKCldPWUsbnVsbCE9ZSYmKG51bGw9PXRoaXMuY2hlY2tBdXRvSGVpZ2h0c0RlYm91bmNlZCYmKHRoaXMuY2hlY2tBdXRvSGVpZ2h0c0RlYm91bmNlZD1RKHRoaXMuY2hlY2tBdXRvSGVpZ2h0cy5iaW5kKHRoaXMpLDEpKSx0aGlzLmNoZWNrQXV0b0hlaWdodHNEZWJvdW5jZWQoKSl9Y2hlY2tBdXRvSGVpZ2h0cygpe2xldCBlPSExLHQ9ITAsaT0wO2NvbnN0IHM9dGhpcy5fX2F1dG9IZWlnaHRzO2lmKG51bGw9PXMpcmV0dXJuO2lmKHRoaXMuYmVhbnMuY29sdW1uTW9kZWwuZ2V0QWxsRGlzcGxheWVkQXV0b0hlaWdodENvbHMoKS5mb3JFYWNoKHI9PntsZXQgbz1zW3IuZ2V0SWQoKV07aWYobnVsbD09byl7aWYoIXRoaXMuYmVhbnMuY29sdW1uTW9kZWwuaXNDb2xTcGFuQWN0aXZlKCkpcmV0dXJuIHZvaWQoZT0hMCk7e2xldCB0PVtdO3N3aXRjaChyLmdldFBpbm5lZCgpKXtjYXNlImxlZnQiOnQ9dGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5ZWRMZWZ0Q29sdW1uc0ZvclJvdyh0aGlzKTticmVhaztjYXNlInJpZ2h0Ijp0PXRoaXMuYmVhbnMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheWVkUmlnaHRDb2x1bW5zRm9yUm93KHRoaXMpO2JyZWFrO2Nhc2UgbnVsbDp0PXRoaXMuYmVhbnMuY29sdW1uTW9kZWwuZ2V0Vmlld3BvcnRDZW50ZXJDb2x1bW5zRm9yUm93KHRoaXMpfWlmKHQuaW5jbHVkZXMocikpcmV0dXJuIHZvaWQoZT0hMCk7bz0tMX19ZWxzZSB0PSExO28+aSYmKGk9byl9KSxlKXJldHVybjtpZigodHx8aTwxMCkmJihpPXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFJvd0hlaWdodEZvck5vZGUodGhpcykuaGVpZ2h0KSxpPT10aGlzLnJvd0hlaWdodClyZXR1cm47dGhpcy5zZXRSb3dIZWlnaHQoaSk7Y29uc3Qgcj10aGlzLmJlYW5zLnJvd01vZGVsO3Iub25Sb3dIZWlnaHRDaGFuZ2VkRGVib3VuY2VkJiZyLm9uUm93SGVpZ2h0Q2hhbmdlZERlYm91bmNlZCgpfXNldFJvd0luZGV4KGUpe3RoaXMucm93SW5kZXghPT1lJiYodGhpcy5yb3dJbmRleD1lLHRoaXMuZXZlbnRTZXJ2aWNlJiZ0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHRoaXMuY3JlYXRlTG9jYWxSb3dFdmVudChPby5FVkVOVF9ST1dfSU5ERVhfQ0hBTkdFRCkpKX1zZXRVaUxldmVsKGUpe3RoaXMudWlMZXZlbCE9PWUmJih0aGlzLnVpTGV2ZWw9ZSx0aGlzLmV2ZW50U2VydmljZSYmdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUxvY2FsUm93RXZlbnQoT28uRVZFTlRfVUlfTEVWRUxfQ0hBTkdFRCkpKX1zZXRFeHBhbmRlZChlLHQpe2lmKHRoaXMuZXhwYW5kZWQ9PT1lKXJldHVybjt0aGlzLmV4cGFuZGVkPWUsdGhpcy5ldmVudFNlcnZpY2UmJnRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodGhpcy5jcmVhdGVMb2NhbFJvd0V2ZW50KE9vLkVWRU5UX0VYUEFOREVEX0NIQU5HRUQpKTtjb25zdCBpPU9iamVjdC5hc3NpZ24oe30sdGhpcy5jcmVhdGVHbG9iYWxSb3dFdmVudChsdC5FVkVOVF9ST1dfR1JPVVBfT1BFTkVEKSx7ZXhwYW5kZWQ6ZSxldmVudDp0fHxudWxsfSk7dGhpcy5iZWFucy5yb3dOb2RlRXZlbnRUaHJvdHRsZS5kaXNwYXRjaEV4cGFuZGVkKGkpLHRoaXMuc2libGluZyYmdGhpcy5iZWFucy5yb3dSZW5kZXJlci5yZWZyZXNoQ2VsbHMoe3Jvd05vZGVzOlt0aGlzXX0pfWNyZWF0ZUdsb2JhbFJvd0V2ZW50KGUpe3JldHVybiB0aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHt0eXBlOmUsbm9kZTp0aGlzLGRhdGE6dGhpcy5kYXRhLHJvd0luZGV4OnRoaXMucm93SW5kZXgscm93UGlubmVkOnRoaXMucm93UGlubmVkfSl9ZGlzcGF0Y2hMb2NhbEV2ZW50KGUpe3RoaXMuZXZlbnRTZXJ2aWNlJiZ0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfXNldERhdGFWYWx1ZShlLHQsaSl7Y29uc3Qgcz0oKCk9Pnt2YXIgdDtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGU/ZTpudWxsIT09KHQ9dGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5nZXRHcmlkQ29sdW1uKGUpKSYmdm9pZCAwIT09dD90OnRoaXMuYmVhbnMuY29sdW1uTW9kZWwuZ2V0UHJpbWFyeUNvbHVtbihlKX0pKCkscj10aGlzLmdldFZhbHVlRnJvbVZhbHVlU2VydmljZShzKTtpZih0aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJlYWRPbmx5RWRpdCIpKXJldHVybiB0aGlzLmRpc3BhdGNoRXZlbnRGb3JTYXZlVmFsdWVSZWFkT25seShzLHIsdCxpKSwhMTtjb25zdCBvPXRoaXMuYmVhbnMudmFsdWVTZXJ2aWNlLnNldFZhbHVlKHRoaXMscyx0LGkpO3JldHVybiB0aGlzLmRpc3BhdGNoQ2VsbENoYW5nZWRFdmVudChzLHQsciksdGhpcy5jaGVja1Jvd1NlbGVjdGFibGUoKSxvfWdldFZhbHVlRnJvbVZhbHVlU2VydmljZShlKXtjb25zdCB0PXRoaXMubGVhZkdyb3VwJiZ0aGlzLmJlYW5zLmNvbHVtbk1vZGVsLmlzUGl2b3RNb2RlKCksaT10aGlzLmdyb3VwJiZ0aGlzLmV4cGFuZGVkJiYhdGhpcy5mb290ZXImJiF0LHM9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0R3JvdXBJbmNsdWRlRm9vdGVyKCkoe25vZGU6dGhpc30pLHI9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cFN1cHByZXNzQmxhbmtIZWFkZXIiKSxvPWkmJnMmJiFyO3JldHVybiB0aGlzLmJlYW5zLnZhbHVlU2VydmljZS5nZXRWYWx1ZShlLHRoaXMsITEsbyl9ZGlzcGF0Y2hFdmVudEZvclNhdmVWYWx1ZVJlYWRPbmx5KGUsdCxpLHMpe2NvbnN0IHI9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7dHlwZTpsdC5FVkVOVF9DRUxMX0VESVRfUkVRVUVTVCxldmVudDpudWxsLHJvd0luZGV4OnRoaXMucm93SW5kZXgscm93UGlubmVkOnRoaXMucm93UGlubmVkLGNvbHVtbjplLGNvbERlZjplLmdldENvbERlZigpLGRhdGE6dGhpcy5kYXRhLG5vZGU6dGhpcyxvbGRWYWx1ZTp0LG5ld1ZhbHVlOmksdmFsdWU6aSxzb3VyY2U6c30pO3RoaXMuYmVhbnMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQocil9c2V0R3JvdXBWYWx1ZShlLHQpe2NvbnN0IGk9dGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5nZXRHcmlkQ29sdW1uKGUpO0UodGhpcy5ncm91cERhdGEpJiYodGhpcy5ncm91cERhdGE9e30pO2NvbnN0IHM9aS5nZXRDb2xJZCgpLHI9dGhpcy5ncm91cERhdGFbc107ciE9PXQmJih0aGlzLmdyb3VwRGF0YVtzXT10LHRoaXMuZGlzcGF0Y2hDZWxsQ2hhbmdlZEV2ZW50KGksdCxyKSl9c2V0QWdnRGF0YShlKXtjb25zdCB0PXRoaXMuYWdnRGF0YTtpZih0aGlzLmFnZ0RhdGE9ZSx0aGlzLmV2ZW50U2VydmljZSl7Y29uc3QgaT1lPT57Y29uc3QgaT10aGlzLmFnZ0RhdGE/dGhpcy5hZ2dEYXRhW2VdOnZvaWQgMCxzPXQ/dFtlXTp2b2lkIDA7aWYoaT09PXMpcmV0dXJuO2NvbnN0IHI9dGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5sb29rdXBHcmlkQ29sdW1uKGUpO3ImJnRoaXMuZGlzcGF0Y2hDZWxsQ2hhbmdlZEV2ZW50KHIsaSxzKX07Zm9yKGNvbnN0IGUgaW4gdGhpcy5hZ2dEYXRhKWkoZSk7Zm9yKGNvbnN0IHQgaW4gZSl0IGluIHRoaXMuYWdnRGF0YXx8aSh0KX19dXBkYXRlSGFzQ2hpbGRyZW4oKXtsZXQgZT10aGlzLmdyb3VwJiYhdGhpcy5mb290ZXJ8fHRoaXMuY2hpbGRyZW5BZnRlckdyb3VwJiZ0aGlzLmNoaWxkcmVuQWZ0ZXJHcm91cC5sZW5ndGg+MDtpZih0aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd01vZGVsVHlwZSgic2VydmVyU2lkZSIpKXtjb25zdCB0PXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidHJlZURhdGEiKSxpPXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiaXNTZXJ2ZXJTaWRlR3JvdXAiKTtlPSF0aGlzLnN0dWImJiF0aGlzLmZvb3RlciYmKHQ/ISFpJiZpKHRoaXMuZGF0YSk6ISF0aGlzLmdyb3VwKX1lIT09dGhpcy5fX2hhc0NoaWxkcmVuJiYodGhpcy5fX2hhc0NoaWxkcmVuPSEhZSx0aGlzLmV2ZW50U2VydmljZSYmdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZUxvY2FsUm93RXZlbnQoT28uRVZFTlRfSEFTX0NISUxEUkVOX0NIQU5HRUQpKSl9aGFzQ2hpbGRyZW4oKXtyZXR1cm4gbnVsbD09dGhpcy5fX2hhc0NoaWxkcmVuJiZ0aGlzLnVwZGF0ZUhhc0NoaWxkcmVuKCksdGhpcy5fX2hhc0NoaWxkcmVufWlzRW1wdHlSb3dHcm91cE5vZGUoKXtyZXR1cm4gdGhpcy5ncm91cCYmUih0aGlzLmNoaWxkcmVuQWZ0ZXJHcm91cCl9ZGlzcGF0Y2hDZWxsQ2hhbmdlZEV2ZW50KGUsdCxpKXtjb25zdCBzPXt0eXBlOk9vLkVWRU5UX0NFTExfQ0hBTkdFRCxub2RlOnRoaXMsY29sdW1uOmUsbmV3VmFsdWU6dCxvbGRWYWx1ZTppfTt0aGlzLmRpc3BhdGNoTG9jYWxFdmVudChzKX1yZXNldFF1aWNrRmlsdGVyQWdncmVnYXRlVGV4dCgpe3RoaXMucXVpY2tGaWx0ZXJBZ2dyZWdhdGVUZXh0PW51bGx9aXNFeHBhbmRhYmxlKCl7cmV0dXJuIXRoaXMuZm9vdGVyJiYodGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpP3RoaXMuaGFzQ2hpbGRyZW4oKSYmIXRoaXMubGVhZkdyb3VwOnRoaXMuaGFzQ2hpbGRyZW4oKXx8ISF0aGlzLm1hc3Rlcil9aXNTZWxlY3RlZCgpe3JldHVybiB0aGlzLmZvb3Rlcj90aGlzLnNpYmxpbmcuaXNTZWxlY3RlZCgpOnRoaXMuc2VsZWN0ZWR9ZGVwdGhGaXJzdFNlYXJjaChlKXt0aGlzLmNoaWxkcmVuQWZ0ZXJHcm91cCYmdGhpcy5jaGlsZHJlbkFmdGVyR3JvdXAuZm9yRWFjaCh0PT50LmRlcHRoRmlyc3RTZWFyY2goZSkpLGUodGhpcyl9Y2FsY3VsYXRlU2VsZWN0ZWRGcm9tQ2hpbGRyZW4oKXt2YXIgZTtsZXQgdD0hMSxpPSExLHM9ITE7aWYoIShudWxsPT09KGU9dGhpcy5jaGlsZHJlbkFmdGVyR3JvdXApfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmxlbmd0aCkpcmV0dXJuIHRoaXMuc2VsZWN0YWJsZT90aGlzLnNlbGVjdGVkOm51bGw7Zm9yKGxldCBlPTA7ZTx0aGlzLmNoaWxkcmVuQWZ0ZXJHcm91cC5sZW5ndGg7ZSsrKXtjb25zdCByPXRoaXMuY2hpbGRyZW5BZnRlckdyb3VwW2VdO2xldCBvPXIuaXNTZWxlY3RlZCgpO2lmKCFyLnNlbGVjdGFibGUpe2NvbnN0IGU9ci5jYWxjdWxhdGVTZWxlY3RlZEZyb21DaGlsZHJlbigpO2lmKG51bGw9PT1lKWNvbnRpbnVlO289ZX1zd2l0Y2gobyl7Y2FzZSEwOnQ9ITA7YnJlYWs7Y2FzZSExOmk9ITA7YnJlYWs7ZGVmYXVsdDpzPSEwfX1yZXR1cm4gc3x8dCYmaT92b2lkIDA6ISF0fHwhaSYmKHRoaXMuc2VsZWN0YWJsZT90aGlzLnNlbGVjdGVkOm51bGwpfXNldFNlbGVjdGVkSW5pdGlhbFZhbHVlKGUpe3RoaXMuc2VsZWN0ZWQ9ZX1zZWxlY3RUaGlzTm9kZShlLHQsaT0iYXBpIil7Y29uc3Qgcz0hdGhpcy5zZWxlY3RhYmxlJiZlLHI9dGhpcy5zZWxlY3RlZD09PWU7aWYoc3x8cilyZXR1cm4hMTtpZih0aGlzLnNlbGVjdGVkPWUsdGhpcy5ldmVudFNlcnZpY2Upe3RoaXMuZGlzcGF0Y2hMb2NhbEV2ZW50KHRoaXMuY3JlYXRlTG9jYWxSb3dFdmVudChPby5FVkVOVF9ST1dfU0VMRUNURUQpKTtjb25zdCBlPXRoaXMuc2libGluZztlJiZlLmZvb3RlciYmZS5kaXNwYXRjaExvY2FsRXZlbnQoZS5jcmVhdGVMb2NhbFJvd0V2ZW50KE9vLkVWRU5UX1JPV19TRUxFQ1RFRCkpfWNvbnN0IG89T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuY3JlYXRlR2xvYmFsUm93RXZlbnQobHQuRVZFTlRfUk9XX1NFTEVDVEVEKSkse2V2ZW50OnR8fG51bGwsc291cmNlOml9KTtyZXR1cm4gdGhpcy5iZWFucy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChvKSwhMH1zZXRTZWxlY3RlZChlLHQ9ITEsaT0iYXBpIil7ImJvb2xlYW4iIT10eXBlb2YgaT90aGlzLnNldFNlbGVjdGVkUGFyYW1zKHtuZXdWYWx1ZTplLGNsZWFyU2VsZWN0aW9uOnQscmFuZ2VTZWxlY3Q6ITEsc291cmNlOml9KTpjb25zb2xlLndhcm4oIkFHIEdyaWQ6IHNpbmNlIHZlcnNpb24gdjMwLCByb3dOb2RlLnNldFNlbGVjdGVkKCkgcHJvcGVydHkgYHN1cHByZXNzRmluaXNoQWN0aW9uc2AgaGFzIGJlZW4gcmVtb3ZlZCwgcGxlYXNlIHVzZSBgZ3JpZEFwaS5zZXROb2Rlc1NlbGVjdGVkKClgIGZvciBidWxrIGFjdGlvbnMsIGFuZCB0aGUgZXZlbnQgYHNvdXJjZWAgcHJvcGVydHkgZm9yIGlnbm9yaW5nIGV2ZW50cyBpbnN0ZWFkLiIpfXNldFNlbGVjdGVkUGFyYW1zKGUpe3JldHVybiB0aGlzLnJvd1Bpbm5lZD8oY29uc29sZS53YXJuKCJBRyBHcmlkOiBjYW5ub3Qgc2VsZWN0IHBpbm5lZCByb3dzIiksMCk6dm9pZCAwPT09dGhpcy5pZD8oY29uc29sZS53YXJuKCJBRyBHcmlkOiBjYW5ub3Qgc2VsZWN0IG5vZGUgdW50aWwgaWQgZm9yIG5vZGUgaXMga25vd24iKSwwKTp0aGlzLmJlYW5zLnNlbGVjdGlvblNlcnZpY2Uuc2V0Tm9kZXNTZWxlY3RlZChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse25vZGVzOlt0aGlzLmZvb3Rlcj90aGlzLnNpYmxpbmc6dGhpc119KSl9aXNSb3dQaW5uZWQoKXtyZXR1cm4idG9wIj09PXRoaXMucm93UGlubmVkfHwiYm90dG9tIj09PXRoaXMucm93UGlubmVkfWlzUGFyZW50T2ZOb2RlKGUpe2xldCB0PXRoaXMucGFyZW50O2Zvcig7dDspe2lmKHQ9PT1lKXJldHVybiEwO3Q9dC5wYXJlbnR9cmV0dXJuITF9YWRkRXZlbnRMaXN0ZW5lcihlLHQpe3ZhciBpLHM7dGhpcy5ldmVudFNlcnZpY2V8fCh0aGlzLmV2ZW50U2VydmljZT1uZXcgdmUpLHRoaXMuYmVhbnMuZnJhbWV3b3JrT3ZlcnJpZGVzLnNob3VsZFdyYXBPdXRnb2luZyYmIXRoaXMuZnJhbWV3b3JrRXZlbnRMaXN0ZW5lclNlcnZpY2UmJih0aGlzLmV2ZW50U2VydmljZS5zZXRGcmFtZXdvcmtPdmVycmlkZXModGhpcy5iZWFucy5mcmFtZXdvcmtPdmVycmlkZXMpLHRoaXMuZnJhbWV3b3JrRXZlbnRMaXN0ZW5lclNlcnZpY2U9bmV3IENlKHRoaXMuYmVhbnMuZnJhbWV3b3JrT3ZlcnJpZGVzKSk7Y29uc3Qgcj1udWxsIT09KHM9bnVsbD09PShpPXRoaXMuZnJhbWV3b3JrRXZlbnRMaXN0ZW5lclNlcnZpY2UpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLndyYXAodCkpJiZ2b2lkIDAhPT1zP3M6dDt0aGlzLmV2ZW50U2VydmljZS5hZGRFdmVudExpc3RlbmVyKGUscil9cmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpe3ZhciBpLHM7aWYoIXRoaXMuZXZlbnRTZXJ2aWNlKXJldHVybjtjb25zdCByPW51bGwhPT0ocz1udWxsPT09KGk9dGhpcy5mcmFtZXdvcmtFdmVudExpc3RlbmVyU2VydmljZSl8fHZvaWQgMD09PWk/dm9pZCAwOmkudW53cmFwKHQpKSYmdm9pZCAwIT09cz9zOnQ7dGhpcy5ldmVudFNlcnZpY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHIpLHRoaXMuZXZlbnRTZXJ2aWNlLm5vUmVnaXN0ZXJlZExpc3RlbmVyc0V4aXN0KCkmJih0aGlzLmV2ZW50U2VydmljZT1udWxsKX1vbk1vdXNlRW50ZXIoKXt0aGlzLmRpc3BhdGNoTG9jYWxFdmVudCh0aGlzLmNyZWF0ZUxvY2FsUm93RXZlbnQoT28uRVZFTlRfTU9VU0VfRU5URVIpKX1vbk1vdXNlTGVhdmUoKXt0aGlzLmRpc3BhdGNoTG9jYWxFdmVudCh0aGlzLmNyZWF0ZUxvY2FsUm93RXZlbnQoT28uRVZFTlRfTU9VU0VfTEVBVkUpKX1nZXRGaXJzdENoaWxkT2ZGaXJzdENoaWxkKGUpe2xldCB0PXRoaXMsaT0hMCxzPSExLHI9bnVsbDtmb3IoO2kmJiFzOyl7Y29uc3Qgbz10LnBhcmVudDtiKG8pJiZ0LmZpcnN0Q2hpbGQ/by5yb3dHcm91cENvbHVtbj09PWUmJihzPSEwLHI9byk6aT0hMSx0PW99cmV0dXJuIHM/cjpudWxsfWlzRnVsbFdpZHRoQ2VsbCgpe2lmKHRoaXMuZGV0YWlsKXJldHVybiEwO2NvbnN0IGU9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soImlzRnVsbFdpZHRoUm93Iik7cmV0dXJuISFlJiZlKHtyb3dOb2RlOnRoaXN9KX1nZXRSb3V0ZSgpe2lmKG51bGw9PXRoaXMua2V5KXJldHVybjtjb25zdCBlPVtdO2xldCB0PXRoaXM7Zm9yKDtudWxsIT10LmtleTspZS5wdXNoKHQua2V5KSx0PXQucGFyZW50O3JldHVybiBlLnJldmVyc2UoKX1jcmVhdGVGb290ZXIoKXtpZih0aGlzLnNpYmxpbmcpcmV0dXJuO2NvbnN0IGU9bmV3IFNldChbImV2ZW50U2VydmljZSIsIl9fb2JqZWN0SWQiLCJzdGlja3kiXSksdD1uZXcgT28odGhpcy5iZWFucyk7T2JqZWN0LmtleXModGhpcykuZm9yRWFjaChpPT57ZS5oYXMoaSl8fCh0W2ldPXRoaXNbaV0pfSksdC5mb290ZXI9ITAsdC5zZXRSb3dUb3AobnVsbCksdC5zZXRSb3dJbmRleChudWxsKSx0Lm9sZFJvd1RvcD1udWxsLHQuaWQ9InJvd0dyb3VwRm9vdGVyXyIrdGhpcy5pZCx0LnNpYmxpbmc9dGhpcyx0aGlzLnNpYmxpbmc9dH1kZXN0cm95Rm9vdGVyKCl7dGhpcy5zaWJsaW5nJiYodGhpcy5zaWJsaW5nLnNldFJvd1RvcChudWxsKSx0aGlzLnNpYmxpbmcuc2V0Um93SW5kZXgobnVsbCksdGhpcy5zaWJsaW5nPXZvaWQgMCl9fU9vLklEX1BSRUZJWF9ST1dfR1JPVVA9InJvdy1ncm91cC0iLE9vLklEX1BSRUZJWF9UT1BfUElOTkVEPSJ0LSIsT28uSURfUFJFRklYX0JPVFRPTV9QSU5ORUQ9ImItIixPby5PQkpFQ1RfSURfU0VRVUVOQ0U9MCxPby5FVkVOVF9ST1dfU0VMRUNURUQ9InJvd1NlbGVjdGVkIixPby5FVkVOVF9EQVRBX0NIQU5HRUQ9ImRhdGFDaGFuZ2VkIixPby5FVkVOVF9DRUxMX0NIQU5HRUQ9ImNlbGxDaGFuZ2VkIixPby5FVkVOVF9BTExfQ0hJTERSRU5fQ09VTlRfQ0hBTkdFRD0iYWxsQ2hpbGRyZW5Db3VudENoYW5nZWQiLE9vLkVWRU5UX01BU1RFUl9DSEFOR0VEPSJtYXN0ZXJDaGFuZ2VkIixPby5FVkVOVF9HUk9VUF9DSEFOR0VEPSJncm91cENoYW5nZWQiLE9vLkVWRU5UX01PVVNFX0VOVEVSPSJtb3VzZUVudGVyIixPby5FVkVOVF9NT1VTRV9MRUFWRT0ibW91c2VMZWF2ZSIsT28uRVZFTlRfSEVJR0hUX0NIQU5HRUQ9ImhlaWdodENoYW5nZWQiLE9vLkVWRU5UX1RPUF9DSEFOR0VEPSJ0b3BDaGFuZ2VkIixPby5FVkVOVF9ESVNQTEFZRURfQ0hBTkdFRD0iZGlzcGxheWVkQ2hhbmdlZCIsT28uRVZFTlRfRklSU1RfQ0hJTERfQ0hBTkdFRD0iZmlyc3RDaGlsZENoYW5nZWQiLE9vLkVWRU5UX0xBU1RfQ0hJTERfQ0hBTkdFRD0ibGFzdENoaWxkQ2hhbmdlZCIsT28uRVZFTlRfQ0hJTERfSU5ERVhfQ0hBTkdFRD0iY2hpbGRJbmRleENoYW5nZWQiLE9vLkVWRU5UX1JPV19JTkRFWF9DSEFOR0VEPSJyb3dJbmRleENoYW5nZWQiLE9vLkVWRU5UX0VYUEFOREVEX0NIQU5HRUQ9ImV4cGFuZGVkQ2hhbmdlZCIsT28uRVZFTlRfSEFTX0NISUxEUkVOX0NIQU5HRUQ9Imhhc0NoaWxkcmVuQ2hhbmdlZCIsT28uRVZFTlRfU0VMRUNUQUJMRV9DSEFOR0VEPSJzZWxlY3RhYmxlQ2hhbmdlZCIsT28uRVZFTlRfVUlfTEVWRUxfQ0hBTkdFRD0idWlMZXZlbENoYW5nZWQiLE9vLkVWRU5UX0hJR0hMSUdIVF9DSEFOR0VEPSJyb3dIaWdobGlnaHRDaGFuZ2VkIixPby5FVkVOVF9EUkFHR0lOR19DSEFOR0VEPSJkcmFnZ2luZ0NoYW5nZWQiO3ZhciBBbyxQbyxNbz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBMbyBleHRlbmRzIGNye2NvbnN0cnVjdG9yKCl7c3VwZXIoJ1xuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctc2VsZWN0aW9uLWNoZWNrYm94IiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgIDxhZy1jaGVja2JveCByb2xlPSJwcmVzZW50YXRpb24iIHJlZj0iZUNoZWNrYm94Ij48L2FnLWNoZWNrYm94PlxuICAgICAgICAgICAgPC9kaXY+Jyl9cG9zdENvbnN0cnVjdCgpe3RoaXMuZUNoZWNrYm94LnNldFBhc3NpdmUoITApfWdldENoZWNrYm94SWQoKXtyZXR1cm4gdGhpcy5lQ2hlY2tib3guZ2V0SW5wdXRFbGVtZW50KCkuaWR9b25EYXRhQ2hhbmdlZCgpe3RoaXMub25TZWxlY3Rpb25DaGFuZ2VkKCl9b25TZWxlY3RhYmxlQ2hhbmdlZCgpe3RoaXMuc2hvd09ySGlkZVNlbGVjdCgpfW9uU2VsZWN0aW9uQ2hhbmdlZCgpe2NvbnN0IGU9dGhpcy5yb3dOb2RlLmlzU2VsZWN0ZWQoKTt0aGlzLmVDaGVja2JveC5zZXRWYWx1ZShlLCEwKX1vbkNsaWNrZWQoZSx0LGkpe3JldHVybiB0aGlzLnJvd05vZGUuc2V0U2VsZWN0ZWRQYXJhbXMoe25ld1ZhbHVlOmUscmFuZ2VTZWxlY3Q6aS5zaGlmdEtleSxncm91cFNlbGVjdHNGaWx0ZXJlZDp0LGV2ZW50Omksc291cmNlOiJjaGVja2JveFNlbGVjdGVkIn0pfWluaXQoZSl7dGhpcy5yb3dOb2RlPWUucm93Tm9kZSx0aGlzLmNvbHVtbj1lLmNvbHVtbix0aGlzLm92ZXJyaWRlcz1lLm92ZXJyaWRlcyx0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlZCgpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUNoZWNrYm94LmdldElucHV0RWxlbWVudCgpLCJkYmxjbGljayIsZT0+e1llKGUpfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lQ2hlY2tib3guZ2V0SW5wdXRFbGVtZW50KCksImNsaWNrIixlPT57WWUoZSk7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwU2VsZWN0c0ZpbHRlcmVkIiksaT10aGlzLmVDaGVja2JveC5nZXRWYWx1ZSgpO2lmKHRoaXMuc2hvdWxkSGFuZGxlSW5kZXRlcm1pbmF0ZVN0YXRlKGksdCkpezA9PT10aGlzLm9uQ2xpY2tlZCghMCx0LGV8fHt9KSYmdGhpcy5vbkNsaWNrZWQoITEsdCxlKX1lbHNlIGk/dGhpcy5vbkNsaWNrZWQoITEsdCxlKTp0aGlzLm9uQ2xpY2tlZCghMCx0LGV8fHt9KX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucm93Tm9kZSxPby5FVkVOVF9ST1dfU0VMRUNURUQsdGhpcy5vblNlbGVjdGlvbkNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yb3dOb2RlLE9vLkVWRU5UX0RBVEFfQ0hBTkdFRCx0aGlzLm9uRGF0YUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yb3dOb2RlLE9vLkVWRU5UX1NFTEVDVEFCTEVfQ0hBTkdFRCx0aGlzLm9uU2VsZWN0YWJsZUNoYW5nZWQuYmluZCh0aGlzKSk7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJpc1Jvd1NlbGVjdGFibGUiKXx8ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuZ2V0SXNWaXNpYmxlKCkpe2NvbnN0IGU9dGhpcy5zaG93T3JIaWRlU2VsZWN0LmJpbmQodGhpcyk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRElTUExBWUVEX0NPTFVNTlNfQ0hBTkdFRCxlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnJvd05vZGUsT28uRVZFTlRfREFUQV9DSEFOR0VELGUpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucm93Tm9kZSxPby5FVkVOVF9DRUxMX0NIQU5HRUQsZSksdGhpcy5zaG93T3JIaWRlU2VsZWN0KCl9dGhpcy5lQ2hlY2tib3guZ2V0SW5wdXRFbGVtZW50KCkuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsIi0xIil9c2hvdWxkSGFuZGxlSW5kZXRlcm1pbmF0ZVN0YXRlKGUsdCl7cmV0dXJuIHQmJih2b2lkIDA9PT10aGlzLmVDaGVja2JveC5nZXRQcmV2aW91c1ZhbHVlKCl8fHZvaWQgMD09PWUpJiZ0aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd01vZGVsVHlwZSgiY2xpZW50U2lkZSIpfXNob3dPckhpZGVTZWxlY3QoKXt2YXIgZSx0LGkscztsZXQgcj10aGlzLnJvd05vZGUuc2VsZWN0YWJsZTtjb25zdCBvPXRoaXMuZ2V0SXNWaXNpYmxlKCk7aWYocilpZigiZnVuY3Rpb24iPT10eXBlb2Ygbyl7Y29uc3QgaT1udWxsPT09KGU9dGhpcy5vdmVycmlkZXMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmNhbGxiYWNrUGFyYW1zLHM9bnVsbD09PSh0PXRoaXMuY29sdW1uKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jcmVhdGVDb2x1bW5GdW5jdGlvbkNhbGxiYWNrUGFyYW1zKHRoaXMucm93Tm9kZSk7cj0hIXMmJm8oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGkpLHMpKX1lbHNlIHI9bnVsbCE9byYmbztpZihudWxsPT09KGk9dGhpcy5jb2x1bW4pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmdldENvbERlZigpLnNob3dEaXNhYmxlZENoZWNrYm94ZXMpcmV0dXJuIHRoaXMuZUNoZWNrYm94LnNldERpc2FibGVkKCFyKSx0aGlzLnNldFZpc2libGUoITApLHZvaWQgdGhpcy5zZXREaXNwbGF5ZWQoITApOyhudWxsPT09KHM9dGhpcy5vdmVycmlkZXMpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnJlbW92ZUhpZGRlbik/dGhpcy5zZXREaXNwbGF5ZWQocik6dGhpcy5zZXRWaXNpYmxlKHIpfWdldElzVmlzaWJsZSgpe3ZhciBlLHQ7cmV0dXJuIHRoaXMub3ZlcnJpZGVzP3RoaXMub3ZlcnJpZGVzLmlzVmlzaWJsZTpudWxsPT09KHQ9bnVsbD09PShlPXRoaXMuY29sdW1uKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRDb2xEZWYoKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY2hlY2tib3hTZWxlY3Rpb259fU1vKFt1cigiZUNoZWNrYm94IildLExvLnByb3RvdHlwZSwiZUNoZWNrYm94Iix2b2lkIDApLE1vKFthZV0sTG8ucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxmdW5jdGlvbihlKXtlW2UuVXA9MF09IlVwIixlW2UuRG93bj0xXT0iRG93biJ9KEFvfHwoQW89e30pKSxmdW5jdGlvbihlKXtlW2UuTGVmdD0wXT0iTGVmdCIsZVtlLlJpZ2h0PTFdPSJSaWdodCJ9KFBvfHwoUG89e30pKTt2YXIgRm8sSW8sTm89ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07IWZ1bmN0aW9uKGUpe2VbZS5Ub29sUGFuZWw9MF09IlRvb2xQYW5lbCIsZVtlLkhlYWRlckNlbGw9MV09IkhlYWRlckNlbGwiLGVbZS5Sb3dEcmFnPTJdPSJSb3dEcmFnIixlW2UuQ2hhcnRQYW5lbD0zXT0iQ2hhcnRQYW5lbCIsZVtlLkFkdmFuY2VkRmlsdGVyQnVpbGRlcj00XT0iQWR2YW5jZWRGaWx0ZXJCdWlsZGVyIn0oSW98fChJbz17fSkpO2xldCBHbz1Gbz1jbGFzcyBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmRyYWdTb3VyY2VBbmRQYXJhbXNMaXN0PVtdLHRoaXMuZHJvcFRhcmdldHM9W119aW5pdCgpe3RoaXMuZVBpbm5lZEljb249SHMoImNvbHVtbk1vdmVQaW4iLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpLHRoaXMuZUhpZGVJY29uPUhzKCJjb2x1bW5Nb3ZlSGlkZSIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCksdGhpcy5lTW92ZUljb249SHMoImNvbHVtbk1vdmVNb3ZlIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSx0aGlzLmVMZWZ0SWNvbj1IcygiY29sdW1uTW92ZUxlZnQiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpLHRoaXMuZVJpZ2h0SWNvbj1IcygiY29sdW1uTW92ZVJpZ2h0Iix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSx0aGlzLmVHcm91cEljb249SHMoImNvbHVtbk1vdmVHcm91cCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCksdGhpcy5lQWdncmVnYXRlSWNvbj1IcygiY29sdW1uTW92ZVZhbHVlIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSx0aGlzLmVQaXZvdEljb249SHMoImNvbHVtbk1vdmVQaXZvdCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCksdGhpcy5lRHJvcE5vdEFsbG93ZWRJY29uPUhzKCJkcm9wTm90QWxsb3dlZCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCl9YWRkRHJhZ1NvdXJjZShlLHQ9ITEpe2NvbnN0IGk9e2VFbGVtZW50OmUuZUVsZW1lbnQsZHJhZ1N0YXJ0UGl4ZWxzOmUuZHJhZ1N0YXJ0UGl4ZWxzLG9uRHJhZ1N0YXJ0OnRoaXMub25EcmFnU3RhcnQuYmluZCh0aGlzLGUpLG9uRHJhZ1N0b3A6dGhpcy5vbkRyYWdTdG9wLmJpbmQodGhpcyksb25EcmFnZ2luZzp0aGlzLm9uRHJhZ2dpbmcuYmluZCh0aGlzKSxpbmNsdWRlVG91Y2g6dH07dGhpcy5kcmFnU291cmNlQW5kUGFyYW1zTGlzdC5wdXNoKHtwYXJhbXM6aSxkcmFnU291cmNlOmV9KSx0aGlzLmRyYWdTZXJ2aWNlLmFkZERyYWdTb3VyY2UoaSl9cmVtb3ZlRHJhZ1NvdXJjZShlKXtjb25zdCB0PXRoaXMuZHJhZ1NvdXJjZUFuZFBhcmFtc0xpc3QuZmluZCh0PT50LmRyYWdTb3VyY2U9PT1lKTt0JiYodGhpcy5kcmFnU2VydmljZS5yZW1vdmVEcmFnU291cmNlKHQucGFyYW1zKSxJZSh0aGlzLmRyYWdTb3VyY2VBbmRQYXJhbXNMaXN0LHQpKX1jbGVhckRyYWdTb3VyY2VQYXJhbXNMaXN0KCl7dGhpcy5kcmFnU291cmNlQW5kUGFyYW1zTGlzdC5mb3JFYWNoKGU9PnRoaXMuZHJhZ1NlcnZpY2UucmVtb3ZlRHJhZ1NvdXJjZShlLnBhcmFtcykpLHRoaXMuZHJhZ1NvdXJjZUFuZFBhcmFtc0xpc3QubGVuZ3RoPTAsdGhpcy5kcm9wVGFyZ2V0cy5sZW5ndGg9MH1udWRnZSgpe3RoaXMuZHJhZ2dpbmcmJnRoaXMub25EcmFnZ2luZyh0aGlzLmV2ZW50TGFzdFRpbWUsITApfW9uRHJhZ1N0YXJ0KGUsdCl7dGhpcy5kcmFnZ2luZz0hMCx0aGlzLmRyYWdTb3VyY2U9ZSx0aGlzLmV2ZW50TGFzdFRpbWU9dCx0aGlzLmRyYWdJdGVtPXRoaXMuZHJhZ1NvdXJjZS5nZXREcmFnSXRlbSgpLHRoaXMuZHJhZ1NvdXJjZS5vbkRyYWdTdGFydGVkJiZ0aGlzLmRyYWdTb3VyY2Uub25EcmFnU3RhcnRlZCgpLHRoaXMuY3JlYXRlR2hvc3QoKX1vbkRyYWdTdG9wKGUpe2lmKHRoaXMuZXZlbnRMYXN0VGltZT1udWxsLHRoaXMuZHJhZ2dpbmc9ITEsdGhpcy5kcmFnU291cmNlLm9uRHJhZ1N0b3BwZWQmJnRoaXMuZHJhZ1NvdXJjZS5vbkRyYWdTdG9wcGVkKCksdGhpcy5sYXN0RHJvcFRhcmdldCYmdGhpcy5sYXN0RHJvcFRhcmdldC5vbkRyYWdTdG9wKXtjb25zdCB0PXRoaXMuY3JlYXRlRHJvcFRhcmdldEV2ZW50KHRoaXMubGFzdERyb3BUYXJnZXQsZSxudWxsLG51bGwsITEpO3RoaXMubGFzdERyb3BUYXJnZXQub25EcmFnU3RvcCh0KX10aGlzLmxhc3REcm9wVGFyZ2V0PW51bGwsdGhpcy5kcmFnSXRlbT1udWxsLHRoaXMucmVtb3ZlR2hvc3QoKX1vbkRyYWdnaW5nKGUsdCl7dmFyIGkscyxyLG87Y29uc3Qgbj10aGlzLmdldEhvcml6b250YWxEaXJlY3Rpb24oZSksYT10aGlzLmdldFZlcnRpY2FsRGlyZWN0aW9uKGUpO3RoaXMuZXZlbnRMYXN0VGltZT1lLHRoaXMucG9zaXRpb25HaG9zdChlKTtjb25zdCBsPXRoaXMuZHJvcFRhcmdldHMuZmlsdGVyKHQ9PnRoaXMuaXNNb3VzZU9uRHJvcFRhcmdldChlLHQpKSxkPXRoaXMuZmluZEN1cnJlbnREcm9wVGFyZ2V0KGUsbCk7aWYoZCE9PXRoaXMubGFzdERyb3BUYXJnZXQpdGhpcy5sZWF2ZUxhc3RUYXJnZXRJZkV4aXN0cyhlLG4sYSx0KSxudWxsIT09dGhpcy5sYXN0RHJvcFRhcmdldCYmbnVsbD09PWQmJihudWxsPT09KHM9KGk9dGhpcy5kcmFnU291cmNlKS5vbkdyaWRFeGl0KXx8dm9pZCAwPT09c3x8cy5jYWxsKGksdGhpcy5kcmFnSXRlbSkpLG51bGw9PT10aGlzLmxhc3REcm9wVGFyZ2V0JiZudWxsIT09ZCYmKG51bGw9PT0obz0ocj10aGlzLmRyYWdTb3VyY2UpLm9uR3JpZEVudGVyKXx8dm9pZCAwPT09b3x8by5jYWxsKHIsdGhpcy5kcmFnSXRlbSkpLHRoaXMuZW50ZXJEcmFnVGFyZ2V0SWZFeGlzdHMoZCxlLG4sYSx0KSx0aGlzLmxhc3REcm9wVGFyZ2V0PWQ7ZWxzZSBpZihkJiZkLm9uRHJhZ2dpbmcpe2NvbnN0IGk9dGhpcy5jcmVhdGVEcm9wVGFyZ2V0RXZlbnQoZCxlLG4sYSx0KTtkLm9uRHJhZ2dpbmcoaSl9fWdldEFsbENvbnRhaW5lcnNGcm9tRHJvcFRhcmdldChlKXtjb25zdCB0PWUuZ2V0U2Vjb25kYXJ5Q29udGFpbmVycz9lLmdldFNlY29uZGFyeUNvbnRhaW5lcnMoKTpudWxsLGk9W1tlLmdldENvbnRhaW5lcigpXV07cmV0dXJuIHQ/aS5jb25jYXQodCk6aX1hbGxDb250YWluZXJzSW50ZXJzZWN0KGUsdCl7Zm9yKGNvbnN0IGkgb2YgdCl7Y29uc3QgdD1pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKDA9PT10LndpZHRofHwwPT09dC5oZWlnaHQpcmV0dXJuITE7Y29uc3Qgcz1lLmNsaWVudFg+PXQubGVmdCYmZS5jbGllbnRYPHQucmlnaHQscj1lLmNsaWVudFk+PXQudG9wJiZlLmNsaWVudFk8dC5ib3R0b207aWYoIXN8fCFyKXJldHVybiExfXJldHVybiEwfWlzTW91c2VPbkRyb3BUYXJnZXQoZSx0KXtjb25zdCBpPXRoaXMuZ2V0QWxsQ29udGFpbmVyc0Zyb21Ecm9wVGFyZ2V0KHQpO2xldCBzPSExO2Zvcihjb25zdCB0IG9mIGkpaWYodGhpcy5hbGxDb250YWluZXJzSW50ZXJzZWN0KGUsdCkpe3M9ITA7YnJlYWt9cmV0dXJuISh0LnRhcmdldENvbnRhaW5zU291cmNlJiYhdC5nZXRDb250YWluZXIoKS5jb250YWlucyh0aGlzLmRyYWdTb3VyY2UuZUVsZW1lbnQpKSYmKHMmJnQuaXNJbnRlcmVzdGVkSW4odGhpcy5kcmFnU291cmNlLnR5cGUsdGhpcy5kcmFnU291cmNlLmVFbGVtZW50KSl9ZmluZEN1cnJlbnREcm9wVGFyZ2V0KGUsdCl7Y29uc3QgaT10Lmxlbmd0aDtpZigwPT09aSlyZXR1cm4gbnVsbDtpZigxPT09aSlyZXR1cm4gdFswXTtjb25zdCBzPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFJvb3ROb2RlKCkuZWxlbWVudHNGcm9tUG9pbnQoZS5jbGllbnRYLGUuY2xpZW50WSk7Zm9yKGNvbnN0IGUgb2Ygcylmb3IoY29uc3QgaSBvZiB0KXtpZigtMSE9PUhlKHRoaXMuZ2V0QWxsQ29udGFpbmVyc0Zyb21Ecm9wVGFyZ2V0KGkpKS5pbmRleE9mKGUpKXJldHVybiBpfXJldHVybiBudWxsfWVudGVyRHJhZ1RhcmdldElmRXhpc3RzKGUsdCxpLHMscil7aWYoZSl7aWYoZS5vbkRyYWdFbnRlcil7Y29uc3Qgbz10aGlzLmNyZWF0ZURyb3BUYXJnZXRFdmVudChlLHQsaSxzLHIpO2Uub25EcmFnRW50ZXIobyl9dGhpcy5zZXRHaG9zdEljb24oZS5nZXRJY29uTmFtZT9lLmdldEljb25OYW1lKCk6bnVsbCl9fWxlYXZlTGFzdFRhcmdldElmRXhpc3RzKGUsdCxpLHMpe2lmKHRoaXMubGFzdERyb3BUYXJnZXQpe2lmKHRoaXMubGFzdERyb3BUYXJnZXQub25EcmFnTGVhdmUpe2NvbnN0IHI9dGhpcy5jcmVhdGVEcm9wVGFyZ2V0RXZlbnQodGhpcy5sYXN0RHJvcFRhcmdldCxlLHQsaSxzKTt0aGlzLmxhc3REcm9wVGFyZ2V0Lm9uRHJhZ0xlYXZlKHIpfXRoaXMuc2V0R2hvc3RJY29uKG51bGwpfX1hZGREcm9wVGFyZ2V0KGUpe3RoaXMuZHJvcFRhcmdldHMucHVzaChlKX1yZW1vdmVEcm9wVGFyZ2V0KGUpe3RoaXMuZHJvcFRhcmdldHM9dGhpcy5kcm9wVGFyZ2V0cy5maWx0ZXIodD0+dC5nZXRDb250YWluZXIoKSE9PWUuZ2V0Q29udGFpbmVyKCkpfWhhc0V4dGVybmFsRHJvcFpvbmVzKCl7cmV0dXJuIHRoaXMuZHJvcFRhcmdldHMuc29tZShlPT5lLmV4dGVybmFsKX1maW5kRXh0ZXJuYWxab25lKGUpe3JldHVybiB0aGlzLmRyb3BUYXJnZXRzLmZpbHRlcihlPT5lLmV4dGVybmFsKS5maW5kKHQ9PnQuZ2V0Q29udGFpbmVyKCk9PT1lLmdldENvbnRhaW5lcigpKXx8bnVsbH1nZXRIb3Jpem9udGFsRGlyZWN0aW9uKGUpe2NvbnN0IHQ9dGhpcy5ldmVudExhc3RUaW1lJiZ0aGlzLmV2ZW50TGFzdFRpbWUuY2xpZW50WCxpPWUuY2xpZW50WDtyZXR1cm4gdD09PWk/bnVsbDp0Pmk/UG8uTGVmdDpQby5SaWdodH1nZXRWZXJ0aWNhbERpcmVjdGlvbihlKXtjb25zdCB0PXRoaXMuZXZlbnRMYXN0VGltZSYmdGhpcy5ldmVudExhc3RUaW1lLmNsaWVudFksaT1lLmNsaWVudFk7cmV0dXJuIHQ9PT1pP251bGw6dD5pP0FvLlVwOkFvLkRvd259Y3JlYXRlRHJvcFRhcmdldEV2ZW50KGUsdCxpLHMscil7Y29uc3Qgbz1lLmdldENvbnRhaW5lcigpLG49by5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSx7Z3JpZEFwaTphLGNvbHVtbkFwaTpsLGRyYWdJdGVtOmQsZHJhZ1NvdXJjZTpjfT10aGlzO3JldHVybntldmVudDp0LHg6dC5jbGllbnRYLW4ubGVmdCx5OnQuY2xpZW50WS1uLnRvcCx2RGlyZWN0aW9uOnMsaERpcmVjdGlvbjppLGRyYWdTb3VyY2U6Yyxmcm9tTnVkZ2U6cixkcmFnSXRlbTpkLGFwaTphLGNvbHVtbkFwaTpsLGRyb3Bab25lVGFyZ2V0Om99fXBvc2l0aW9uR2hvc3QoZSl7Y29uc3QgdD10aGlzLmVHaG9zdDtpZighdClyZXR1cm47Y29uc3QgaT10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCxzPU5pKCktMixyPUdpKCktMixvPWhzKHQub2Zmc2V0UGFyZW50KSx7Y2xpZW50WTpuLGNsaWVudFg6YX09ZTtsZXQgbD1uLW8udG9wLWkvMixkPWEtby5sZWZ0LTEwO2NvbnN0IGM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKSxoPWMuZGVmYXVsdFZpZXd8fHdpbmRvdyx1PWgucGFnZVlPZmZzZXR8fGMuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCxwPWgucGFnZVhPZmZzZXR8fGMuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7cz4wJiZkK3QuY2xpZW50V2lkdGg+cytwJiYoZD1zK3AtdC5jbGllbnRXaWR0aCksZDwwJiYoZD0wKSxyPjAmJmwrdC5jbGllbnRIZWlnaHQ+cit1JiYobD1yK3UtdC5jbGllbnRIZWlnaHQpLGw8MCYmKGw9MCksdC5zdHlsZS5sZWZ0PWQrInB4Iix0LnN0eWxlLnRvcD1sKyJweCJ9cmVtb3ZlR2hvc3QoKXt0aGlzLmVHaG9zdCYmdGhpcy5lR2hvc3RQYXJlbnQmJnRoaXMuZUdob3N0UGFyZW50LnJlbW92ZUNoaWxkKHRoaXMuZUdob3N0KSx0aGlzLmVHaG9zdD1udWxsfWNyZWF0ZUdob3N0KCl7dGhpcy5lR2hvc3Q9eXMoRm8uR0hPU1RfVEVNUExBVEUpLHRoaXMubW91c2VFdmVudFNlcnZpY2Uuc3RhbXBUb3BMZXZlbEdyaWRDb21wV2l0aEdyaWRJbnN0YW5jZSh0aGlzLmVHaG9zdCk7Y29uc3R7dGhlbWU6ZX09dGhpcy5lbnZpcm9ubWVudC5nZXRUaGVtZSgpO2UmJnRoaXMuZUdob3N0LmNsYXNzTGlzdC5hZGQoZSksdGhpcy5lR2hvc3RJY29uPXRoaXMuZUdob3N0LnF1ZXJ5U2VsZWN0b3IoIi5hZy1kbmQtZ2hvc3QtaWNvbiIpLHRoaXMuc2V0R2hvc3RJY29uKG51bGwpO2NvbnN0IHQ9dGhpcy5lR2hvc3QucXVlcnlTZWxlY3RvcigiLmFnLWRuZC1naG9zdC1sYWJlbCIpO2xldCBpPXRoaXMuZHJhZ1NvdXJjZS5kcmFnSXRlbU5hbWU7SyhpKSYmKGk9aSgpKSx0LmlubmVySFRNTD1mdChpKXx8IiIsdGhpcy5lR2hvc3Quc3R5bGUuaGVpZ2h0PSIyNXB4Iix0aGlzLmVHaG9zdC5zdHlsZS50b3A9IjIwcHgiLHRoaXMuZUdob3N0LnN0eWxlLmxlZnQ9IjIwcHgiO2NvbnN0IHM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKTtsZXQgcj1udWxsLG89bnVsbDt0cnl7cj1zLmZ1bGxzY3JlZW5FbGVtZW50fWNhdGNoKGUpe31maW5hbGx5e3J8fChyPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFJvb3ROb2RlKCkpO2NvbnN0IGU9ci5xdWVyeVNlbGVjdG9yKCJib2R5Iik7bz1lfHwociBpbnN0YW5jZW9mIFNoYWRvd1Jvb3Q/cjpyIGluc3RhbmNlb2YgRG9jdW1lbnQ/bnVsbD09cj92b2lkIDA6ci5kb2N1bWVudEVsZW1lbnQ6cil9dGhpcy5lR2hvc3RQYXJlbnQ9byx0aGlzLmVHaG9zdFBhcmVudD90aGlzLmVHaG9zdFBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmVHaG9zdCk6Y29uc29sZS53YXJuKCJBRyBHcmlkOiBjb3VsZCBub3QgZmluZCBkb2N1bWVudCBib2R5LCBpdCBpcyBuZWVkZWQgZm9yIGRyYWdnaW5nIGNvbHVtbnMiKX1zZXRHaG9zdEljb24oZSx0PSExKXttcyh0aGlzLmVHaG9zdEljb24pO2xldCBpPW51bGw7c3dpdGNoKGV8fChlPXRoaXMuZHJhZ1NvdXJjZS5nZXREZWZhdWx0SWNvbk5hbWU/dGhpcy5kcmFnU291cmNlLmdldERlZmF1bHRJY29uTmFtZSgpOkZvLklDT05fTk9UX0FMTE9XRUQpLGUpe2Nhc2UgRm8uSUNPTl9QSU5ORUQ6aT10aGlzLmVQaW5uZWRJY29uO2JyZWFrO2Nhc2UgRm8uSUNPTl9NT1ZFOmk9dGhpcy5lTW92ZUljb247YnJlYWs7Y2FzZSBGby5JQ09OX0xFRlQ6aT10aGlzLmVMZWZ0SWNvbjticmVhaztjYXNlIEZvLklDT05fUklHSFQ6aT10aGlzLmVSaWdodEljb247YnJlYWs7Y2FzZSBGby5JQ09OX0dST1VQOmk9dGhpcy5lR3JvdXBJY29uO2JyZWFrO2Nhc2UgRm8uSUNPTl9BR0dSRUdBVEU6aT10aGlzLmVBZ2dyZWdhdGVJY29uO2JyZWFrO2Nhc2UgRm8uSUNPTl9QSVZPVDppPXRoaXMuZVBpdm90SWNvbjticmVhaztjYXNlIEZvLklDT05fTk9UX0FMTE9XRUQ6aT10aGlzLmVEcm9wTm90QWxsb3dlZEljb247YnJlYWs7Y2FzZSBGby5JQ09OX0hJREU6aT10aGlzLmVIaWRlSWNvbn10aGlzLmVHaG9zdEljb24uY2xhc3NMaXN0LnRvZ2dsZSgiYWctc2hha2UtbGVmdC10by1yaWdodCIsdCksaT09PXRoaXMuZUhpZGVJY29uJiZ0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzRHJhZ0xlYXZlSGlkZXNDb2x1bW5zIil8fGkmJnRoaXMuZUdob3N0SWNvbi5hcHBlbmRDaGlsZChpKX19O0dvLklDT05fUElOTkVEPSJwaW5uZWQiLEdvLklDT05fTU9WRT0ibW92ZSIsR28uSUNPTl9MRUZUPSJsZWZ0IixHby5JQ09OX1JJR0hUPSJyaWdodCIsR28uSUNPTl9HUk9VUD0iZ3JvdXAiLEdvLklDT05fQUdHUkVHQVRFPSJhZ2dyZWdhdGUiLEdvLklDT05fUElWT1Q9InBpdm90IixHby5JQ09OX05PVF9BTExPV0VEPSJub3RBbGxvd2VkIixHby5JQ09OX0hJREU9ImhpZGUiLEdvLkdIT1NUX1RFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1kbmQtZ2hvc3QgYWctdW5zZWxlY3RhYmxlIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhZy1kbmQtZ2hvc3QtaWNvbiBhZy1zaGFrZS1sZWZ0LXRvLXJpZ2h0Ij48L3NwYW4+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1kbmQtZ2hvc3QtbGFiZWwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj4nLE5vKFtjZSgiZHJhZ1NlcnZpY2UiKV0sR28ucHJvdG90eXBlLCJkcmFnU2VydmljZSIsdm9pZCAwKSxObyhbY2UoIm1vdXNlRXZlbnRTZXJ2aWNlIildLEdvLnByb3RvdHlwZSwibW91c2VFdmVudFNlcnZpY2UiLHZvaWQgMCksTm8oW2NlKCJjb2x1bW5BcGkiKV0sR28ucHJvdG90eXBlLCJjb2x1bW5BcGkiLHZvaWQgMCksTm8oW2NlKCJncmlkQXBpIildLEdvLnByb3RvdHlwZSwiZ3JpZEFwaSIsdm9pZCAwKSxObyhbYWVdLEdvLnByb3RvdHlwZSwiaW5pdCIsbnVsbCksTm8oW2xlXSxHby5wcm90b3R5cGUsImNsZWFyRHJhZ1NvdXJjZVBhcmFtc0xpc3QiLG51bGwpLEdvPUZvPU5vKFtkZSgiZHJhZ0FuZERyb3BTZXJ2aWNlIildLEdvKTt2YXIga289ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgX28gZXh0ZW5kcyBjcntjb25zdHJ1Y3RvcihlLHQsaSxzLHIsbyl7c3VwZXIoKSx0aGlzLmNlbGxWYWx1ZUZuPWUsdGhpcy5yb3dOb2RlPXQsdGhpcy5jb2x1bW49aSx0aGlzLmN1c3RvbUd1aT1zLHRoaXMuZHJhZ1N0YXJ0UGl4ZWxzPXIsdGhpcy5zdXBwcmVzc1Zpc2liaWxpdHlDaGFuZ2U9byx0aGlzLmRyYWdTb3VyY2U9bnVsbH1pc0N1c3RvbUd1aSgpe3JldHVybiBudWxsIT10aGlzLmN1c3RvbUd1aX1wb3N0Q29uc3RydWN0KCl7aWYodGhpcy5jdXN0b21HdWk/dGhpcy5zZXREcmFnRWxlbWVudCh0aGlzLmN1c3RvbUd1aSx0aGlzLmRyYWdTdGFydFBpeGVscyk6KHRoaXMuc2V0VGVtcGxhdGUoJzxkaXYgY2xhc3M9ImFnLWRyYWctaGFuZGxlIGFnLXJvdy1kcmFnIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9kaXY+JyksdGhpcy5nZXRHdWkoKS5hcHBlbmRDaGlsZChXcygicm93RHJhZyIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCkpLHRoaXMuYWRkRHJhZ1NvdXJjZSgpKSx0aGlzLmNoZWNrQ29tcGF0aWJpbGl0eSgpLCF0aGlzLnN1cHByZXNzVmlzaWJpbGl0eUNoYW5nZSl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0RyYWdNYW5hZ2VkIik/bmV3IEhvKHRoaXMsdGhpcy5iZWFucyx0aGlzLnJvd05vZGUsdGhpcy5jb2x1bW4pOm5ldyBCbyh0aGlzLHRoaXMuYmVhbnMsdGhpcy5yb3dOb2RlLHRoaXMuY29sdW1uKTt0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKGUsdGhpcy5iZWFucy5jb250ZXh0KX19c2V0RHJhZ0VsZW1lbnQoZSx0KXt0aGlzLnNldFRlbXBsYXRlRnJvbUVsZW1lbnQoZSksdGhpcy5hZGREcmFnU291cmNlKHQpfWdldFNlbGVjdGVkTm9kZXMoKXtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJyb3dEcmFnTXVsdGlSb3ciKSlyZXR1cm5bdGhpcy5yb3dOb2RlXTtjb25zdCBlPXRoaXMuYmVhbnMuc2VsZWN0aW9uU2VydmljZS5nZXRTZWxlY3RlZE5vZGVzKCk7cmV0dXJuLTEhPT1lLmluZGV4T2YodGhpcy5yb3dOb2RlKT9lOlt0aGlzLnJvd05vZGVdfWNoZWNrQ29tcGF0aWJpbGl0eSgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJyb3dEcmFnTWFuYWdlZCIpO3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidHJlZURhdGEiKSYmZSYmaigiSWYgdXNpbmcgcm93IGRyYWcgd2l0aCB0cmVlIGRhdGEsIHlvdSBjYW5ub3QgaGF2ZSByb3dEcmFnTWFuYWdlZD10cnVlIil9Z2V0RHJhZ0l0ZW0oKXtyZXR1cm57cm93Tm9kZTp0aGlzLnJvd05vZGUscm93Tm9kZXM6dGhpcy5nZXRTZWxlY3RlZE5vZGVzKCksY29sdW1uczp0aGlzLmNvbHVtbj9bdGhpcy5jb2x1bW5dOnZvaWQgMCxkZWZhdWx0VGV4dFZhbHVlOnRoaXMuY2VsbFZhbHVlRm4oKX19Z2V0Um93RHJhZ1RleHQoZSl7aWYoZSl7Y29uc3QgdD1lLmdldENvbERlZigpO2lmKHQucm93RHJhZ1RleHQpcmV0dXJuIHQucm93RHJhZ1RleHR9cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicm93RHJhZ1RleHQiKX1hZGREcmFnU291cmNlKGU9NCl7dGhpcy5kcmFnU291cmNlJiZ0aGlzLnJlbW92ZURyYWdTb3VyY2UoKTtjb25zdCB0PXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpO3RoaXMuZHJhZ1NvdXJjZT17dHlwZTpJby5Sb3dEcmFnLGVFbGVtZW50OnRoaXMuZ2V0R3VpKCksZHJhZ0l0ZW1OYW1lOigpPT57dmFyIGU7Y29uc3QgaT10aGlzLmdldERyYWdJdGVtKCkscz0obnVsbD09PShlPWkucm93Tm9kZXMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmxlbmd0aCl8fDEscj10aGlzLmdldFJvd0RyYWdUZXh0KHRoaXMuY29sdW1uKTtyZXR1cm4gcj9yKGkscyk6MT09PXM/dGhpcy5jZWxsVmFsdWVGbigpOmAke3N9ICR7dCgicm93RHJhZ1Jvd3MiLCJyb3dzIil9YH0sZ2V0RHJhZ0l0ZW06KCk9PnRoaXMuZ2V0RHJhZ0l0ZW0oKSxkcmFnU3RhcnRQaXhlbHM6ZSxkcmFnU291cmNlRG9tRGF0YUtleTp0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb21EYXRhS2V5KCl9LHRoaXMuYmVhbnMuZHJhZ0FuZERyb3BTZXJ2aWNlLmFkZERyYWdTb3VyY2UodGhpcy5kcmFnU291cmNlLCEwKX1yZW1vdmVEcmFnU291cmNlKCl7dGhpcy5kcmFnU291cmNlJiZ0aGlzLmJlYW5zLmRyYWdBbmREcm9wU2VydmljZS5yZW1vdmVEcmFnU291cmNlKHRoaXMuZHJhZ1NvdXJjZSksdGhpcy5kcmFnU291cmNlPW51bGx9fWtvKFtjZSgiYmVhbnMiKV0sX28ucHJvdG90eXBlLCJiZWFucyIsdm9pZCAwKSxrbyhbYWVdLF9vLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksa28oW2xlXSxfby5wcm90b3R5cGUsInJlbW92ZURyYWdTb3VyY2UiLG51bGwpO2NsYXNzIFZvIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKCksdGhpcy5wYXJlbnQ9ZSx0aGlzLnJvd05vZGU9dCx0aGlzLmNvbHVtbj1pfXNldERpc3BsYXllZE9yVmlzaWJsZShlKXtjb25zdCB0PXtza2lwQXJpYUhpZGRlbjohMH07aWYoZSl0aGlzLnBhcmVudC5zZXREaXNwbGF5ZWQoITEsdCk7ZWxzZXtsZXQgZT0hMCxpPSExO3RoaXMuY29sdW1uJiYoZT10aGlzLmNvbHVtbi5pc1Jvd0RyYWcodGhpcy5yb3dOb2RlKXx8dGhpcy5wYXJlbnQuaXNDdXN0b21HdWkoKSxpPUsodGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCkucm93RHJhZykpLGk/KHRoaXMucGFyZW50LnNldERpc3BsYXllZCghMCx0KSx0aGlzLnBhcmVudC5zZXRWaXNpYmxlKGUsdCkpOih0aGlzLnBhcmVudC5zZXREaXNwbGF5ZWQoZSx0KSx0aGlzLnBhcmVudC5zZXRWaXNpYmxlKCEwLHQpKX19fWNsYXNzIEJvIGV4dGVuZHMgVm97Y29uc3RydWN0b3IoZSx0LGkscyl7c3VwZXIoZSxpLHMpLHRoaXMuYmVhbnM9dH1wb3N0Q29uc3RydWN0KCl7dGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigic3VwcHJlc3NSb3dEcmFnIix0aGlzLm9uU3VwcHJlc3NSb3dEcmFnLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucm93Tm9kZSxPby5FVkVOVF9EQVRBX0NIQU5HRUQsdGhpcy53b3JrT3V0VmlzaWJpbGl0eS5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnJvd05vZGUsT28uRVZFTlRfQ0VMTF9DSEFOR0VELHRoaXMud29ya091dFZpc2liaWxpdHkuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yb3dOb2RlLE9vLkVWRU5UX0NFTExfQ0hBTkdFRCx0aGlzLndvcmtPdXRWaXNpYmlsaXR5LmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuYmVhbnMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX05FV19DT0xVTU5TX0xPQURFRCx0aGlzLndvcmtPdXRWaXNpYmlsaXR5LmJpbmQodGhpcykpLHRoaXMud29ya091dFZpc2liaWxpdHkoKX1vblN1cHByZXNzUm93RHJhZygpe3RoaXMud29ya091dFZpc2liaWxpdHkoKX13b3JrT3V0VmlzaWJpbGl0eSgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc1Jvd0RyYWciKTt0aGlzLnNldERpc3BsYXllZE9yVmlzaWJsZShlKX19a28oW2FlXSxCby5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO2NsYXNzIEhvIGV4dGVuZHMgVm97Y29uc3RydWN0b3IoZSx0LGkscyl7c3VwZXIoZSxpLHMpLHRoaXMuYmVhbnM9dH1wb3N0Q29uc3RydWN0KCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5iZWFucy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfU09SVF9DSEFOR0VELHRoaXMud29ya091dFZpc2liaWxpdHkuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5iZWFucy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRklMVEVSX0NIQU5HRUQsdGhpcy53b3JrT3V0VmlzaWJpbGl0eS5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmJlYW5zLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fUk9XX0dST1VQX0NIQU5HRUQsdGhpcy53b3JrT3V0VmlzaWJpbGl0eS5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmJlYW5zLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ORVdfQ09MVU1OU19MT0FERUQsdGhpcy53b3JrT3V0VmlzaWJpbGl0eS5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnJvd05vZGUsT28uRVZFTlRfREFUQV9DSEFOR0VELHRoaXMud29ya091dFZpc2liaWxpdHkuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yb3dOb2RlLE9vLkVWRU5UX0NFTExfQ0hBTkdFRCx0aGlzLndvcmtPdXRWaXNpYmlsaXR5LmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoInN1cHByZXNzUm93RHJhZyIsdGhpcy5vblN1cHByZXNzUm93RHJhZy5iaW5kKHRoaXMpKSx0aGlzLndvcmtPdXRWaXNpYmlsaXR5KCl9b25TdXBwcmVzc1Jvd0RyYWcoKXt0aGlzLndvcmtPdXRWaXNpYmlsaXR5KCl9d29ya091dFZpc2liaWxpdHkoKXtjb25zdCBlPXRoaXMuYmVhbnMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLmdldFJvd0RyYWdGZWF0dXJlKCksdD1lJiZlLnNob3VsZFByZXZlbnRSb3dNb3ZlKCksaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzUm93RHJhZyIpLHM9dGhpcy5iZWFucy5kcmFnQW5kRHJvcFNlcnZpY2UuaGFzRXh0ZXJuYWxEcm9wWm9uZXMoKSxyPXQmJiFzfHxpO3RoaXMuc2V0RGlzcGxheWVkT3JWaXNpYmxlKHIpfX1rbyhbYWVdLEhvLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIFdvPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGpvIGV4dGVuZHMgaXR7aW5pdChlLHQsaSxzLHIsbyxuKXt2YXIgYSxsLGQsYzt0aGlzLnBhcmFtcz1uLHRoaXMuZUd1aT10LHRoaXMuZUNoZWNrYm94PWksdGhpcy5lRXhwYW5kZWQ9cyx0aGlzLmVDb250cmFjdGVkPXIsdGhpcy5jb21wPWUsdGhpcy5jb21wQ2xhc3M9bztjb25zdHtub2RlOmgsdmFsdWU6dSxjb2xEZWY6cH09bixnPXRoaXMuaXNUb3BMZXZlbEZvb3RlcigpO2lmKCFnKXtpZih0aGlzLmlzRW1iZWRkZWRSb3dNaXNtYXRjaCgpKXJldHVybjtpZihoLmZvb3RlciYmdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cEhpZGVPcGVuUGFyZW50cyIpKXtpZigocCYmcC5zaG93Um93R3JvdXApIT09KGgucm93R3JvdXBDb2x1bW4mJmgucm93R3JvdXBDb2x1bW4uZ2V0Q29sSWQoKSkpcmV0dXJufX1pZih0aGlzLnNldHVwU2hvd2luZ1ZhbHVlRm9yT3BlbmVkUGFyZW50KCksdGhpcy5maW5kRGlzcGxheWVkR3JvdXBOb2RlKCksIWcpe2NvbnN0IGU9bi5ub2RlLmZvb3RlciYmbi5ub2RlLnJvd0dyb3VwSW5kZXg9PT10aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpLmZpbmRJbmRleChlPT57dmFyIHQ7cmV0dXJuIGUuZ2V0Q29sSWQoKT09PShudWxsPT09KHQ9bi5jb2xEZWYpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNob3dSb3dHcm91cCl9KSx0PSJtdWx0aXBsZUNvbHVtbnMiIT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwRGlzcGxheVR5cGUiKXx8dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpfHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInNob3dPcGVuZWRHcm91cCIpJiYhbi5ub2RlLmZvb3RlciYmKCFuLm5vZGUuZ3JvdXB8fG51bGwhPW4ubm9kZS5yb3dHcm91cEluZGV4JiZuLm5vZGUucm93R3JvdXBJbmRleD50aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpLmZpbmRJbmRleChlPT57dmFyIHQ7cmV0dXJuIGUuZ2V0Q29sSWQoKT09PShudWxsPT09KHQ9bi5jb2xEZWYpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNob3dSb3dHcm91cCl9KSksaT0haC5ncm91cCYmKChudWxsPT09KGE9dGhpcy5wYXJhbXMuY29sRGVmKXx8dm9pZCAwPT09YT92b2lkIDA6YS5maWVsZCl8fChudWxsPT09KGw9dGhpcy5wYXJhbXMuY29sRGVmKXx8dm9pZCAwPT09bD92b2lkIDA6bC52YWx1ZUdldHRlcikpLHM9dGhpcy5pc0V4cGFuZGFibGUoKSxyPXRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSYmaC5sZWFmR3JvdXAmJihudWxsPT09KGQ9aC5yb3dHcm91cENvbHVtbil8fHZvaWQgMD09PWQ/dm9pZCAwOmQuZ2V0Q29sSWQoKSk9PT0obnVsbD09PShjPW4uY29sdW1uKXx8dm9pZCAwPT09Yz92b2lkIDA6Yy5nZXRDb2xEZWYoKS5zaG93Um93R3JvdXApO2lmKCEodGhpcy5zaG93aW5nVmFsdWVGb3JPcGVuZWRQYXJlbnR8fHN8fGl8fHR8fGV8fHIpKXJldHVybn10aGlzLmFkZEV4cGFuZEFuZENvbnRyYWN0KCksdGhpcy5hZGRGdWxsV2lkdGhSb3dEcmFnZ2VySWZOZWVkZWQoKSx0aGlzLmFkZENoZWNrYm94SWZOZWVkZWQoKSx0aGlzLmFkZFZhbHVlRWxlbWVudCgpLHRoaXMuc2V0dXBJbmRlbnQoKSx0aGlzLnJlZnJlc2hBcmlhRXhwYW5kZWQoKX1nZXRDZWxsQXJpYVJvbGUoKXt2YXIgZSx0O2NvbnN0IGk9bnVsbD09PShlPXRoaXMucGFyYW1zLmNvbERlZil8fHZvaWQgMD09PWU/dm9pZCAwOmUuY2VsbEFyaWFSb2xlLHM9bnVsbD09PSh0PXRoaXMucGFyYW1zLmNvbHVtbil8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0Q29sRGVmKCkuY2VsbEFyaWFSb2xlO3JldHVybiBpfHxzfHwiZ3JpZGNlbGwifWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksdGhpcy5leHBhbmRMaXN0ZW5lcj1udWxsfXJlZnJlc2hBcmlhRXhwYW5kZWQoKXtjb25zdHtub2RlOmUsZUdyaWRDZWxsOnR9PXRoaXMucGFyYW1zO2lmKHRoaXMuZXhwYW5kTGlzdGVuZXImJih0aGlzLmV4cGFuZExpc3RlbmVyPXRoaXMuZXhwYW5kTGlzdGVuZXIoKSksIXRoaXMuaXNFeHBhbmRhYmxlKCkpcmV0dXJuIHZvaWQgaGkodCk7Y29uc3QgaT0oKT0+e2NpKHQsISFlLmV4cGFuZGVkKX07dGhpcy5leHBhbmRMaXN0ZW5lcj10aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLE9vLkVWRU5UX0VYUEFOREVEX0NIQU5HRUQsaSl8fG51bGwsaSgpfWlzVG9wTGV2ZWxGb290ZXIoKXtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cEluY2x1ZGVUb3RhbEZvb3RlciIpKXJldHVybiExO2lmKG51bGwhPXRoaXMucGFyYW1zLnZhbHVlfHwtMSE9dGhpcy5wYXJhbXMubm9kZS5sZXZlbClyZXR1cm4hMTtjb25zdCBlPXRoaXMucGFyYW1zLmNvbERlZjtpZihudWxsPT1lKXJldHVybiEwO2lmKCEwPT09ZS5zaG93Um93R3JvdXApcmV0dXJuITA7Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpO2lmKCF0fHwwPT09dC5sZW5ndGgpcmV0dXJuITA7cmV0dXJuIHRbMF0uZ2V0SWQoKT09PWUuc2hvd1Jvd0dyb3VwfWlzRW1iZWRkZWRSb3dNaXNtYXRjaCgpe2lmKCF0aGlzLnBhcmFtcy5mdWxsV2lkdGh8fCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVtYmVkRnVsbFdpZHRoUm93cyIpKXJldHVybiExO2NvbnN0IGU9ImxlZnQiPT09dGhpcy5wYXJhbXMucGlubmVkLHQ9InJpZ2h0Ij09PXRoaXMucGFyYW1zLnBpbm5lZCxpPSFlJiYhdDtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKT90aGlzLmNvbHVtbk1vZGVsLmlzUGlubmluZ0xlZnQoKT8hdDohaTp0aGlzLmNvbHVtbk1vZGVsLmlzUGlubmluZ0xlZnQoKT8hZTohaX1maW5kRGlzcGxheWVkR3JvdXBOb2RlKCl7Y29uc3QgZT10aGlzLnBhcmFtcy5jb2x1bW4sdD10aGlzLnBhcmFtcy5ub2RlO2lmKHRoaXMuc2hvd2luZ1ZhbHVlRm9yT3BlbmVkUGFyZW50KXtsZXQgaT10LnBhcmVudDtmb3IoO251bGwhPWk7KXtpZihpLnJvd0dyb3VwQ29sdW1uJiZlLmlzUm93R3JvdXBEaXNwbGF5ZWQoaS5yb3dHcm91cENvbHVtbi5nZXRJZCgpKSl7dGhpcy5kaXNwbGF5ZWRHcm91cE5vZGU9aTticmVha31pPWkucGFyZW50fX1FKHRoaXMuZGlzcGxheWVkR3JvdXBOb2RlKSYmKHRoaXMuZGlzcGxheWVkR3JvdXBOb2RlPXQpfXNldHVwU2hvd2luZ1ZhbHVlRm9yT3BlbmVkUGFyZW50KCl7Y29uc3QgZT10aGlzLnBhcmFtcy5ub2RlLHQ9dGhpcy5wYXJhbXMuY29sdW1uO2lmKCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwSGlkZU9wZW5QYXJlbnRzIikpcmV0dXJuIHZvaWQodGhpcy5zaG93aW5nVmFsdWVGb3JPcGVuZWRQYXJlbnQ9ITEpO2lmKCFlLmdyb3VwRGF0YSlyZXR1cm4gdm9pZCh0aGlzLnNob3dpbmdWYWx1ZUZvck9wZW5lZFBhcmVudD0hMSk7aWYobnVsbCE9ZS5yb3dHcm91cENvbHVtbil7Y29uc3QgaT1lLnJvd0dyb3VwQ29sdW1uLmdldElkKCk7aWYodC5pc1Jvd0dyb3VwRGlzcGxheWVkKGkpKXJldHVybiB2b2lkKHRoaXMuc2hvd2luZ1ZhbHVlRm9yT3BlbmVkUGFyZW50PSExKX1jb25zdCBpPW51bGwhPWUuZ3JvdXBEYXRhW3QuZ2V0SWQoKV07dGhpcy5zaG93aW5nVmFsdWVGb3JPcGVuZWRQYXJlbnQ9aX1hZGRWYWx1ZUVsZW1lbnQoKXt0aGlzLmRpc3BsYXllZEdyb3VwTm9kZS5mb290ZXI/dGhpcy5hZGRGb290ZXJWYWx1ZSgpOih0aGlzLmFkZEdyb3VwVmFsdWUoKSx0aGlzLmFkZENoaWxkQ291bnQoKSl9YWRkR3JvdXBWYWx1ZSgpe3ZhciBlO2NvbnN0IHQ9dGhpcy5hZGp1c3RQYXJhbXNXaXRoRGV0YWlsc0Zyb21SZWxhdGVkQ29sdW1uKCksaT10aGlzLmdldElubmVyQ29tcERldGFpbHModCkse3ZhbHVlRm9ybWF0dGVkOnMsdmFsdWU6cn09dDtsZXQgbz1zO2lmKG51bGw9PW8pe2NvbnN0IHQ9dGhpcy5kaXNwbGF5ZWRHcm91cE5vZGUucm93R3JvdXBDb2x1bW4mJihudWxsPT09KGU9dGhpcy5wYXJhbXMuY29sdW1uKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pc1Jvd0dyb3VwRGlzcGxheWVkKHRoaXMuZGlzcGxheWVkR3JvdXBOb2RlLnJvd0dyb3VwQ29sdW1uLmdldElkKCkpKTtpZigiIj09PXRoaXMuZGlzcGxheWVkR3JvdXBOb2RlLmtleSYmdGhpcy5kaXNwbGF5ZWRHcm91cE5vZGUuZ3JvdXAmJnQpe289dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCkoImJsYW5rcyIsIihCbGFua3MpIil9ZWxzZSBvPW51bGwhPXI/cjpudWxsfXRoaXMuY29tcC5zZXRJbm5lclJlbmRlcmVyKGksbyl9YWRqdXN0UGFyYW1zV2l0aERldGFpbHNGcm9tUmVsYXRlZENvbHVtbigpe2NvbnN0IGU9dGhpcy5kaXNwbGF5ZWRHcm91cE5vZGUucm93R3JvdXBDb2x1bW4sdD10aGlzLnBhcmFtcy5jb2x1bW47aWYoIWUpcmV0dXJuIHRoaXMucGFyYW1zO2lmKG51bGwhPXQpe2lmKCF0LmlzUm93R3JvdXBEaXNwbGF5ZWQoZS5nZXRJZCgpKSlyZXR1cm4gdGhpcy5wYXJhbXN9Y29uc3QgaT10aGlzLnBhcmFtcyx7dmFsdWU6cyxub2RlOnJ9PXRoaXMucGFyYW1zLG89dGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UuZm9ybWF0VmFsdWUoZSxyLHMpO3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saSkse3ZhbHVlRm9ybWF0dGVkOm99KX1hZGRGb290ZXJWYWx1ZSgpe2NvbnN0IGU9dGhpcy5wYXJhbXMuZm9vdGVyVmFsdWVHZXR0ZXI7bGV0IHQ9IiI7aWYoZSl7Y29uc3QgaT1JKHRoaXMucGFyYW1zKTtpLnZhbHVlPXRoaXMucGFyYW1zLnZhbHVlLCJmdW5jdGlvbiI9PXR5cGVvZiBlP3Q9ZShpKToic3RyaW5nIj09dHlwZW9mIGU/dD10aGlzLmV4cHJlc3Npb25TZXJ2aWNlLmV2YWx1YXRlKGUsaSk6Y29uc29sZS53YXJuKCJBRyBHcmlkOiBmb290ZXJWYWx1ZUdldHRlciBzaG91bGQgYmUgZWl0aGVyIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmcgKGV4cHJlc3Npb24pIil9ZWxzZXt0PXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpKCJmb290ZXJUb3RhbCIsIlRvdGFsIikrIiAiKyhudWxsIT10aGlzLnBhcmFtcy52YWx1ZT90aGlzLnBhcmFtcy52YWx1ZToiIil9Y29uc3QgaT10aGlzLmdldElubmVyQ29tcERldGFpbHModGhpcy5wYXJhbXMpO3RoaXMuY29tcC5zZXRJbm5lclJlbmRlcmVyKGksdCl9Z2V0SW5uZXJDb21wRGV0YWlscyhlKXtpZihlLmZ1bGxXaWR0aClyZXR1cm4gdGhpcy51c2VyQ29tcG9uZW50RmFjdG9yeS5nZXRGdWxsV2lkdGhHcm91cFJvd0lubmVyQ2VsbFJlbmRlcmVyKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBSb3dSZW5kZXJlclBhcmFtcyIpLGUpO2NvbnN0IHQ9dGhpcy51c2VyQ29tcG9uZW50RmFjdG9yeS5nZXRJbm5lclJlbmRlcmVyRGV0YWlscyhlLGUpLGk9ZT0+ZSYmZS5jb21wb25lbnRDbGFzcz09dGhpcy5jb21wQ2xhc3M7aWYodCYmIWkodCkpcmV0dXJuIHQ7Y29uc3Qgcz10aGlzLmRpc3BsYXllZEdyb3VwTm9kZS5yb3dHcm91cENvbHVtbixyPXM/cy5nZXRDb2xEZWYoKTp2b2lkIDA7aWYoIXIpcmV0dXJuO2NvbnN0IG89dGhpcy51c2VyQ29tcG9uZW50RmFjdG9yeS5nZXRDZWxsUmVuZGVyZXJEZXRhaWxzKHIsZSk7aWYobyYmIWkobykpcmV0dXJuIG87aWYoaShvKSYmci5jZWxsUmVuZGVyZXJQYXJhbXMmJnIuY2VsbFJlbmRlcmVyUGFyYW1zLmlubmVyUmVuZGVyZXIpe3JldHVybiB0aGlzLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldElubmVyUmVuZGVyZXJEZXRhaWxzKHIuY2VsbFJlbmRlcmVyUGFyYW1zLGUpfX1hZGRDaGlsZENvdW50KCl7dGhpcy5wYXJhbXMuc3VwcHJlc3NDb3VudHx8KHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZGlzcGxheWVkR3JvdXBOb2RlLE9vLkVWRU5UX0FMTF9DSElMRFJFTl9DT1VOVF9DSEFOR0VELHRoaXMudXBkYXRlQ2hpbGRDb3VudC5iaW5kKHRoaXMpKSx0aGlzLnVwZGF0ZUNoaWxkQ291bnQoKSl9dXBkYXRlQ2hpbGRDb3VudCgpe2NvbnN0IGU9dGhpcy5kaXNwbGF5ZWRHcm91cE5vZGUuYWxsQ2hpbGRyZW5Db3VudCx0PXRoaXMuaXNTaG93Um93R3JvdXBGb3JUaGlzUm93KCkmJm51bGwhPWUmJmU+PTA/YCgke2V9KWA6IiI7dGhpcy5jb21wLnNldENoaWxkQ291bnQodCl9aXNTaG93Um93R3JvdXBGb3JUaGlzUm93KCl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpKXJldHVybiEwO2NvbnN0IGU9dGhpcy5kaXNwbGF5ZWRHcm91cE5vZGUucm93R3JvdXBDb2x1bW47aWYoIWUpcmV0dXJuITE7Y29uc3QgdD10aGlzLnBhcmFtcy5jb2x1bW47cmV0dXJuIG51bGw9PXR8fHQuaXNSb3dHcm91cERpc3BsYXllZChlLmdldElkKCkpfWFkZEV4cGFuZEFuZENvbnRyYWN0KCl7dmFyIGU7Y29uc3QgdD10aGlzLnBhcmFtcyxpPVdzKCJncm91cEV4cGFuZGVkIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSxzPVdzKCJncm91cENvbnRyYWN0ZWQiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpO2kmJnRoaXMuZUV4cGFuZGVkLmFwcGVuZENoaWxkKGkpLHMmJnRoaXMuZUNvbnRyYWN0ZWQuYXBwZW5kQ2hpbGQocyk7Y29uc3Qgcj10LmVHcmlkQ2VsbDsobnVsbD09PShlPXRoaXMucGFyYW1zLmNvbHVtbil8fHZvaWQgMD09PWU/dm9pZCAwOmUuaXNDZWxsRWRpdGFibGUodC5ub2RlKSkmJnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlR3JvdXBFZGl0Iil8fCF0aGlzLmlzRXhwYW5kYWJsZSgpfHx0LnN1cHByZXNzRG91YmxlQ2xpY2tFeHBhbmR8fHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHIsImRibGNsaWNrIix0aGlzLm9uQ2VsbERibENsaWNrZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lRXhwYW5kZWQsImNsaWNrIix0aGlzLm9uRXhwYW5kQ2xpY2tlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVDb250cmFjdGVkLCJjbGljayIsdGhpcy5vbkV4cGFuZENsaWNrZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIociwia2V5ZG93biIsdGhpcy5vbktleURvd24uYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodC5ub2RlLE9vLkVWRU5UX0VYUEFOREVEX0NIQU5HRUQsdGhpcy5zaG93RXhwYW5kQW5kQ29udHJhY3RJY29ucy5iaW5kKHRoaXMpKSx0aGlzLnNob3dFeHBhbmRBbmRDb250cmFjdEljb25zKCk7Y29uc3Qgbz10aGlzLm9uUm93Tm9kZUlzRXhwYW5kYWJsZUNoYW5nZWQuYmluZCh0aGlzKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmRpc3BsYXllZEdyb3VwTm9kZSxPby5FVkVOVF9BTExfQ0hJTERSRU5fQ09VTlRfQ0hBTkdFRCxvKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmRpc3BsYXllZEdyb3VwTm9kZSxPby5FVkVOVF9NQVNURVJfQ0hBTkdFRCxvKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmRpc3BsYXllZEdyb3VwTm9kZSxPby5FVkVOVF9HUk9VUF9DSEFOR0VELG8pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZGlzcGxheWVkR3JvdXBOb2RlLE9vLkVWRU5UX0hBU19DSElMRFJFTl9DSEFOR0VELG8pfW9uRXhwYW5kQ2xpY2tlZChlKXskZShlKXx8KFllKGUpLHRoaXMub25FeHBhbmRPckNvbnRyYWN0KGUpKX1vbkV4cGFuZE9yQ29udHJhY3QoZSl7Y29uc3QgdD10aGlzLmRpc3BsYXllZEdyb3VwTm9kZSxpPSF0LmV4cGFuZGVkOyFpJiZ0LnN0aWNreSYmdGhpcy5zY3JvbGxUb1N0aWNreU5vZGUodCksdC5zZXRFeHBhbmRlZChpLGUpfXNjcm9sbFRvU3RpY2t5Tm9kZShlKXt0aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKS5nZXRTY3JvbGxGZWF0dXJlKCkuc2V0VmVydGljYWxTY3JvbGxQb3NpdGlvbihlLnJvd1RvcC1lLnN0aWNreVJvd1RvcCl9aXNFeHBhbmRhYmxlKCl7aWYodGhpcy5zaG93aW5nVmFsdWVGb3JPcGVuZWRQYXJlbnQpcmV0dXJuITA7Y29uc3QgZT10aGlzLmRpc3BsYXllZEdyb3VwTm9kZSx0PXRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSYmZS5sZWFmR3JvdXA7aWYoIShlLmlzRXhwYW5kYWJsZSgpJiYhZS5mb290ZXImJiF0KSlyZXR1cm4hMTtjb25zdCBpPXRoaXMucGFyYW1zLmNvbHVtbjtpZihudWxsIT1pJiYic3RyaW5nIj09dHlwZW9mIGkuZ2V0Q29sRGVmKCkuc2hvd1Jvd0dyb3VwKXtyZXR1cm4gdGhpcy5pc1Nob3dSb3dHcm91cEZvclRoaXNSb3coKX1yZXR1cm4hMH1zaG93RXhwYW5kQW5kQ29udHJhY3RJY29ucygpe2NvbnN0e3BhcmFtczplLGRpc3BsYXllZEdyb3VwTm9kZTp0LGNvbHVtbk1vZGVsOml9PXRoaXMse25vZGU6c309ZSxyPXRoaXMuaXNFeHBhbmRhYmxlKCk7aWYocil7Y29uc3QgZT0hIXRoaXMuc2hvd2luZ1ZhbHVlRm9yT3BlbmVkUGFyZW50fHxzLmV4cGFuZGVkO3RoaXMuY29tcC5zZXRFeHBhbmRlZERpc3BsYXllZChlKSx0aGlzLmNvbXAuc2V0Q29udHJhY3RlZERpc3BsYXllZCghZSl9ZWxzZSB0aGlzLmNvbXAuc2V0RXhwYW5kZWREaXNwbGF5ZWQoITEpLHRoaXMuY29tcC5zZXRDb250cmFjdGVkRGlzcGxheWVkKCExKTtjb25zdCBvPWkuaXNQaXZvdE1vZGUoKSxuPW8mJnQubGVhZkdyb3VwLGE9ciYmIW4sbD1zLmZvb3RlciYmLTE9PT1zLmxldmVsO3RoaXMuY29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jZWxsLWV4cGFuZGFibGUiLGEpLHRoaXMuY29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1yb3ctZ3JvdXAiLGEpLG8/dGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXBpdm90LWxlYWYtZ3JvdXAiLG4pOmx8fHRoaXMuY29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1yb3ctZ3JvdXAtbGVhZi1pbmRlbnQiLCFhKX1vblJvd05vZGVJc0V4cGFuZGFibGVDaGFuZ2VkKCl7dGhpcy5zaG93RXhwYW5kQW5kQ29udHJhY3RJY29ucygpLHRoaXMuc2V0SW5kZW50KCksdGhpcy5yZWZyZXNoQXJpYUV4cGFuZGVkKCl9c2V0dXBJbmRlbnQoKXtjb25zdCBlPXRoaXMucGFyYW1zLm5vZGU7dGhpcy5wYXJhbXMuc3VwcHJlc3NQYWRkaW5nfHwodGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSxPby5FVkVOVF9VSV9MRVZFTF9DSEFOR0VELHRoaXMuc2V0SW5kZW50LmJpbmQodGhpcykpLHRoaXMuc2V0SW5kZW50KCkpfXNldEluZGVudCgpe2lmKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBIaWRlT3BlblBhcmVudHMiKSlyZXR1cm47Y29uc3QgZT10aGlzLnBhcmFtcyx0PWUubm9kZSxpPSEhZS5jb2xEZWYscz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInRyZWVEYXRhIikscj0haXx8c3x8ITA9PT1lLmNvbERlZi5zaG93Um93R3JvdXA/dC51aUxldmVsOjA7dGhpcy5pbmRlbnRDbGFzcyYmdGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3ModGhpcy5pbmRlbnRDbGFzcywhMSksdGhpcy5pbmRlbnRDbGFzcz0iYWctcm93LWdyb3VwLWluZGVudC0iK3IsdGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3ModGhpcy5pbmRlbnRDbGFzcywhMCl9YWRkRnVsbFdpZHRoUm93RHJhZ2dlcklmTmVlZGVkKCl7aWYoIXRoaXMucGFyYW1zLmZ1bGxXaWR0aHx8IXRoaXMucGFyYW1zLnJvd0RyYWcpcmV0dXJuO2NvbnN0IGU9bmV3IF9vKCgpPT50aGlzLnBhcmFtcy52YWx1ZSx0aGlzLnBhcmFtcy5ub2RlKTt0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKGUsdGhpcy5jb250ZXh0KSx0aGlzLmVHdWkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmJlZ2luIixlLmdldEd1aSgpKX1pc1VzZXJXYW50c1NlbGVjdGVkKCl7Y29uc3QgZT10aGlzLnBhcmFtcy5jaGVja2JveDtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZXx8ITA9PT1lfWFkZENoZWNrYm94SWZOZWVkZWQoKXtjb25zdCBlPXRoaXMuZGlzcGxheWVkR3JvdXBOb2RlLHQ9dGhpcy5pc1VzZXJXYW50c1NlbGVjdGVkKCkmJiFlLmZvb3RlciYmIWUucm93UGlubmVkJiYhZS5kZXRhaWw7aWYodCl7Y29uc3QgZT1uZXcgTG87dGhpcy5nZXRDb250ZXh0KCkuY3JlYXRlQmVhbihlKSxlLmluaXQoe3Jvd05vZGU6dGhpcy5wYXJhbXMubm9kZSxjb2x1bW46dGhpcy5wYXJhbXMuY29sdW1uLG92ZXJyaWRlczp7aXNWaXNpYmxlOnRoaXMucGFyYW1zLmNoZWNrYm94LGNhbGxiYWNrUGFyYW1zOnRoaXMucGFyYW1zLHJlbW92ZUhpZGRlbjohMH19KSx0aGlzLmVDaGVja2JveC5hcHBlbmRDaGlsZChlLmdldEd1aSgpKSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT50aGlzLmdldENvbnRleHQoKS5kZXN0cm95QmVhbihlKSl9dGhpcy5jb21wLnNldENoZWNrYm94VmlzaWJsZSh0KX1vbktleURvd24oZSl7aWYoIShlLmtleT09PWpzLkVOVEVSKXx8dGhpcy5wYXJhbXMuc3VwcHJlc3NFbnRlckV4cGFuZClyZXR1cm47dGhpcy5wYXJhbXMuY29sdW1uJiZ0aGlzLnBhcmFtcy5jb2x1bW4uaXNDZWxsRWRpdGFibGUodGhpcy5wYXJhbXMubm9kZSl8fHRoaXMub25FeHBhbmRPckNvbnRyYWN0KGUpfW9uQ2VsbERibENsaWNrZWQoZSl7aWYoJGUoZSkpcmV0dXJuO1plKHRoaXMuZUV4cGFuZGVkLGUpfHxaZSh0aGlzLmVDb250cmFjdGVkLGUpfHx0aGlzLm9uRXhwYW5kT3JDb250cmFjdChlKX19V28oW2NlKCJleHByZXNzaW9uU2VydmljZSIpXSxqby5wcm90b3R5cGUsImV4cHJlc3Npb25TZXJ2aWNlIix2b2lkIDApLFdvKFtjZSgidmFsdWVGb3JtYXR0ZXJTZXJ2aWNlIildLGpvLnByb3RvdHlwZSwidmFsdWVGb3JtYXR0ZXJTZXJ2aWNlIix2b2lkIDApLFdvKFtjZSgiY29sdW1uTW9kZWwiKV0sam8ucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxXbyhbY2UoInVzZXJDb21wb25lbnRGYWN0b3J5IildLGpvLnByb3RvdHlwZSwidXNlckNvbXBvbmVudEZhY3RvcnkiLHZvaWQgMCksV28oW2NlKCJjdHJsc1NlcnZpY2UiKV0sam8ucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCk7dmFyIFVvPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIHpvIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoKXtzdXBlcih6by5URU1QTEFURSl9aW5pdChlKXtjb25zdCB0PXtzZXRJbm5lclJlbmRlcmVyOihlLHQpPT50aGlzLnNldFJlbmRlckRldGFpbHMoZSx0KSxzZXRDaGlsZENvdW50OmU9PnRoaXMuZUNoaWxkQ291bnQudGV4dENvbnRlbnQ9ZSxhZGRPclJlbW92ZUNzc0NsYXNzOihlLHQpPT50aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoZSx0KSxzZXRDb250cmFjdGVkRGlzcGxheWVkOmU9PmlzKHRoaXMuZUNvbnRyYWN0ZWQsZSksc2V0RXhwYW5kZWREaXNwbGF5ZWQ6ZT0+aXModGhpcy5lRXhwYW5kZWQsZSksc2V0Q2hlY2tib3hWaXNpYmxlOmU9PnRoaXMuZUNoZWNrYm94LmNsYXNzTGlzdC50b2dnbGUoImFnLWludmlzaWJsZSIsIWUpfSxpPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IGpvKSxzPSFlLmNvbERlZixyPXRoaXMuZ2V0R3VpKCk7aS5pbml0KHQscix0aGlzLmVDaGVja2JveCx0aGlzLmVFeHBhbmRlZCx0aGlzLmVDb250cmFjdGVkLHRoaXMuY29uc3RydWN0b3IsZSkscyYmWHQocixpLmdldENlbGxBcmlhUm9sZSgpKX1zZXRSZW5kZXJEZXRhaWxzKGUsdCl7aWYoZSl7Y29uc3QgdD1lLm5ld0FnU3RhY2tJbnN0YW5jZSgpO2lmKCF0KXJldHVybjt0LnRoZW4oZT0+e2lmKCFlKXJldHVybjtjb25zdCB0PSgpPT50aGlzLmNvbnRleHQuZGVzdHJveUJlYW4oZSk7dGhpcy5pc0FsaXZlKCk/KHRoaXMuZVZhbHVlLmFwcGVuZENoaWxkKGUuZ2V0R3VpKCkpLHRoaXMuYWRkRGVzdHJveUZ1bmModCkpOnQoKX0pfWVsc2UgdGhpcy5lVmFsdWUuaW5uZXJUZXh0PXR9ZGVzdHJveSgpe3RoaXMuZ2V0Q29udGV4dCgpLmRlc3Ryb3lCZWFuKHRoaXMuaW5uZXJDZWxsUmVuZGVyZXIpLHN1cGVyLmRlc3Ryb3koKX1yZWZyZXNoKCl7cmV0dXJuITF9fXpvLlRFTVBMQVRFPSc8c3BhbiBjbGFzcz0iYWctY2VsbC13cmFwcGVyIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhZy1ncm91cC1leHBhbmRlZCIgcmVmPSJlRXhwYW5kZWQiPjwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhZy1ncm91cC1jb250cmFjdGVkIiByZWY9ImVDb250cmFjdGVkIj48L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0iYWctZ3JvdXAtY2hlY2tib3ggYWctaW52aXNpYmxlIiByZWY9ImVDaGVja2JveCI+PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFnLWdyb3VwLXZhbHVlIiByZWY9ImVWYWx1ZSI+PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFnLWdyb3VwLWNoaWxkLWNvdW50IiByZWY9ImVDaGlsZENvdW50Ij48L3NwYW4+XG4gICAgICAgIDwvc3Bhbj4nLFVvKFt1cigiZUV4cGFuZGVkIildLHpvLnByb3RvdHlwZSwiZUV4cGFuZGVkIix2b2lkIDApLFVvKFt1cigiZUNvbnRyYWN0ZWQiKV0sem8ucHJvdG90eXBlLCJlQ29udHJhY3RlZCIsdm9pZCAwKSxVbyhbdXIoImVDaGVja2JveCIpXSx6by5wcm90b3R5cGUsImVDaGVja2JveCIsdm9pZCAwKSxVbyhbdXIoImVWYWx1ZSIpXSx6by5wcm90b3R5cGUsImVWYWx1ZSIsdm9pZCAwKSxVbyhbdXIoImVDaGlsZENvdW50IildLHpvLnByb3RvdHlwZSwiZUNoaWxkQ291bnQiLHZvaWQgMCk7dmFyIEtvPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIFlvIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoKXtzdXBlcihZby5URU1QTEFURSl9aW5pdChlKXtlLm5vZGUuZmFpbGVkTG9hZD90aGlzLnNldHVwRmFpbGVkKCk6dGhpcy5zZXR1cExvYWRpbmcoKX1zZXR1cEZhaWxlZCgpe2NvbnN0IGU9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCk7dGhpcy5lTG9hZGluZ1RleHQuaW5uZXJUZXh0PWUoImxvYWRpbmdFcnJvciIsIkVSUiIpfXNldHVwTG9hZGluZygpe2NvbnN0IGU9V3MoImdyb3VwTG9hZGluZyIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCk7ZSYmdGhpcy5lTG9hZGluZ0ljb24uYXBwZW5kQ2hpbGQoZSk7Y29uc3QgdD10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTt0aGlzLmVMb2FkaW5nVGV4dC5pbm5lclRleHQ9dCgibG9hZGluZ09vbyIsIkxvYWRpbmciKX1yZWZyZXNoKGUpe3JldHVybiExfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCl9fVlvLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1sb2FkaW5nIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhZy1sb2FkaW5nLWljb24iIHJlZj0iZUxvYWRpbmdJY29uIj48L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0iYWctbG9hZGluZy10ZXh0IiByZWY9ImVMb2FkaW5nVGV4dCI+PC9zcGFuPlxuICAgICAgICA8L2Rpdj4nLEtvKFt1cigiZUxvYWRpbmdJY29uIildLFlvLnByb3RvdHlwZSwiZUxvYWRpbmdJY29uIix2b2lkIDApLEtvKFt1cigiZUxvYWRpbmdUZXh0IildLFlvLnByb3RvdHlwZSwiZUxvYWRpbmdUZXh0Iix2b2lkIDApO2NsYXNzICRvIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoKXtzdXBlcigpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCl9aW5pdChlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgib3ZlcmxheUxvYWRpbmdUZW1wbGF0ZSIpO2lmKHRoaXMuc2V0VGVtcGxhdGUobnVsbCE9dD90OiRvLkRFRkFVTFRfTE9BRElOR19PVkVSTEFZX1RFTVBMQVRFKSwhdCl7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTtzZXRUaW1lb3V0KCgpPT57dGhpcy5nZXRHdWkoKS50ZXh0Q29udGVudD1lKCJsb2FkaW5nT29vIiwiTG9hZGluZy4uLiIpfSl9fX0kby5ERUZBVUxUX0xPQURJTkdfT1ZFUkxBWV9URU1QTEFURT0nPHNwYW4gYXJpYS1saXZlPSJwb2xpdGUiIGFyaWEtYXRvbWljPSJ0cnVlIiBjbGFzcz0iYWctb3ZlcmxheS1sb2FkaW5nLWNlbnRlciI+PC9zcGFuPic7Y2xhc3MgWG8gZXh0ZW5kcyBjcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCl9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKX1pbml0KGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJvdmVybGF5Tm9Sb3dzVGVtcGxhdGUiKTtpZih0aGlzLnNldFRlbXBsYXRlKG51bGwhPXQ/dDpYby5ERUZBVUxUX05PX1JPV1NfVEVNUExBVEUpLCF0KXtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpO3NldFRpbWVvdXQoKCk9Pnt0aGlzLmdldEd1aSgpLnRleHRDb250ZW50PWUoIm5vUm93c1RvU2hvdyIsIk5vIFJvd3MgVG8gU2hvdyIpfSl9fX1Yby5ERUZBVUxUX05PX1JPV1NfVEVNUExBVEU9JzxzcGFuIGNsYXNzPSJhZy1vdmVybGF5LW5vLXJvd3MtY2VudGVyIj48L3NwYW4+JztjbGFzcyBxbyBleHRlbmRzIG1ve2NvbnN0cnVjdG9yKCl7c3VwZXIoJzxkaXYgY2xhc3M9ImFnLXRvb2x0aXAiPjwvZGl2PicpfWluaXQoZSl7Y29uc3R7dmFsdWU6dH09ZTt0aGlzLmdldEd1aSgpLnRleHRDb250ZW50PWZ0KHQsITApfX1jbGFzcyBab3tnZXRUZW1wbGF0ZSgpe3JldHVybic8YWctaW5wdXQtbnVtYmVyLWZpZWxkIGNsYXNzPSJhZy1jZWxsLWVkaXRvciIgcmVmPSJlSW5wdXQiPjwvYWctaW5wdXQtbnVtYmVyLWZpZWxkPid9aW5pdChlLHQpe3RoaXMuZUlucHV0PWUsdGhpcy5wYXJhbXM9dCxudWxsIT10Lm1heCYmZS5zZXRNYXgodC5tYXgpLG51bGwhPXQubWluJiZlLnNldE1pbih0Lm1pbiksbnVsbCE9dC5wcmVjaXNpb24mJmUuc2V0UHJlY2lzaW9uKHQucHJlY2lzaW9uKSxudWxsIT10LnN0ZXAmJmUuc2V0U3RlcCh0LnN0ZXApO2NvbnN0IGk9ZS5nZXRJbnB1dEVsZW1lbnQoKTt0LnByZXZlbnRTdGVwcGluZz9lLmFkZE1hbmFnZWRMaXN0ZW5lcihpLCJrZXlkb3duIix0aGlzLnByZXZlbnRTdGVwcGluZyk6dC5zaG93U3RlcHBlckJ1dHRvbnMmJmkuY2xhc3NMaXN0LmFkZCgiYWctbnVtYmVyLWZpZWxkLWlucHV0LXN0ZXBwZXIiKX1wcmV2ZW50U3RlcHBpbmcoZSl7ZS5rZXkhPT1qcy5VUCYmZS5rZXkhPT1qcy5ET1dOfHxlLnByZXZlbnREZWZhdWx0KCl9Z2V0VmFsdWUoKXtjb25zdCBlPXRoaXMuZUlucHV0LmdldFZhbHVlKCk7aWYoIWIoZSkmJiFiKHRoaXMucGFyYW1zLnZhbHVlKSlyZXR1cm4gdGhpcy5wYXJhbXMudmFsdWU7bGV0IHQ9dGhpcy5wYXJhbXMucGFyc2VWYWx1ZShlKTtpZihudWxsPT10KXJldHVybiB0O2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoIiI9PT10KXJldHVybiBudWxsO3Q9TnVtYmVyKHQpfXJldHVybiBpc05hTih0KT9udWxsOnR9Z2V0U3RhcnRWYWx1ZSgpe3JldHVybiB0aGlzLnBhcmFtcy52YWx1ZX19Y2xhc3MgUW8gZXh0ZW5kcyB3b3tjb25zdHJ1Y3Rvcigpe3N1cGVyKG5ldyBabyl9fWNsYXNzIEpve2dldFRlbXBsYXRlKCl7cmV0dXJuJzxhZy1pbnB1dC1kYXRlLWZpZWxkIGNsYXNzPSJhZy1jZWxsLWVkaXRvciIgcmVmPSJlSW5wdXQiPjwvYWctaW5wdXQtZGF0ZS1maWVsZD4nfWluaXQoZSx0KXt0aGlzLmVJbnB1dD1lLHRoaXMucGFyYW1zPXQsbnVsbCE9dC5taW4mJmUuc2V0TWluKHQubWluKSxudWxsIT10Lm1heCYmZS5zZXRNYXgodC5tYXgpLG51bGwhPXQuc3RlcCYmZS5zZXRTdGVwKHQuc3RlcCl9Z2V0VmFsdWUoKXtjb25zdCBlPXRoaXMuZUlucHV0LmdldERhdGUoKTtyZXR1cm4gYihlKXx8Yih0aGlzLnBhcmFtcy52YWx1ZSk/bnVsbCE9ZT9lOm51bGw6dGhpcy5wYXJhbXMudmFsdWV9Z2V0U3RhcnRWYWx1ZSgpe2NvbnN0e3ZhbHVlOmV9PXRoaXMucGFyYW1zO2lmKGUgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBZaShlLCExKX19Y2xhc3MgZW4gZXh0ZW5kcyB3b3tjb25zdHJ1Y3Rvcigpe3N1cGVyKG5ldyBKbyl9fXZhciB0bj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBzbntjb25zdHJ1Y3RvcihlKXt0aGlzLmdldERhdGFUeXBlU2VydmljZT1lfWdldFRlbXBsYXRlKCl7cmV0dXJuJzxhZy1pbnB1dC1kYXRlLWZpZWxkIGNsYXNzPSJhZy1jZWxsLWVkaXRvciIgcmVmPSJlSW5wdXQiPjwvYWctaW5wdXQtZGF0ZS1maWVsZD4nfWluaXQoZSx0KXt0aGlzLmVJbnB1dD1lLHRoaXMucGFyYW1zPXQsbnVsbCE9dC5taW4mJmUuc2V0TWluKHQubWluKSxudWxsIT10Lm1heCYmZS5zZXRNYXgodC5tYXgpLG51bGwhPXQuc3RlcCYmZS5zZXRTdGVwKHQuc3RlcCl9Z2V0VmFsdWUoKXtjb25zdCBlPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmVJbnB1dC5nZXREYXRlKCkpO3JldHVybiBiKGUpfHxiKHRoaXMucGFyYW1zLnZhbHVlKT90aGlzLnBhcmFtcy5wYXJzZVZhbHVlKG51bGwhPWU/ZToiIik6dGhpcy5wYXJhbXMudmFsdWV9Z2V0U3RhcnRWYWx1ZSgpe3ZhciBlLHQ7cmV0dXJuIFlpKG51bGwhPT0odD10aGlzLnBhcnNlRGF0ZShudWxsIT09KGU9dGhpcy5wYXJhbXMudmFsdWUpJiZ2b2lkIDAhPT1lP2U6dm9pZCAwKSkmJnZvaWQgMCE9PXQ/dDpudWxsLCExKX1wYXJzZURhdGUoZSl7cmV0dXJuIHRoaXMuZ2V0RGF0YVR5cGVTZXJ2aWNlKCkuZ2V0RGF0ZVBhcnNlckZ1bmN0aW9uKHRoaXMucGFyYW1zLmNvbHVtbikoZSl9Zm9ybWF0RGF0ZShlKXtyZXR1cm4gdGhpcy5nZXREYXRhVHlwZVNlcnZpY2UoKS5nZXREYXRlRm9ybWF0dGVyRnVuY3Rpb24odGhpcy5wYXJhbXMuY29sdW1uKShlKX19Y2xhc3Mgcm4gZXh0ZW5kcyB3b3tjb25zdHJ1Y3Rvcigpe3N1cGVyKG5ldyBzbigoKT0+dGhpcy5kYXRhVHlwZVNlcnZpY2UpKX19dG4oW2NlKCJkYXRhVHlwZVNlcnZpY2UiKV0scm4ucHJvdG90eXBlLCJkYXRhVHlwZVNlcnZpY2UiLHZvaWQgMCk7dmFyIG9uPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIG5uIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoKXtzdXBlcihubi5URU1QTEFURSl9aW5pdChlKXt0aGlzLnBhcmFtcz1lLHRoaXMudXBkYXRlQ2hlY2tib3goZSk7Y29uc3QgdD10aGlzLmVDaGVja2JveC5nZXRJbnB1dEVsZW1lbnQoKTt0LnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCItMSIpLHNpKHQsInBvbGl0ZSIpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHQsImNsaWNrIixlPT57aWYoWWUoZSksdGhpcy5lQ2hlY2tib3guaXNEaXNhYmxlZCgpKXJldHVybjtjb25zdCB0PXRoaXMuZUNoZWNrYm94LmdldFZhbHVlKCk7dGhpcy5vbkNoZWNrYm94Q2hhbmdlZCh0KX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHQsImRibGNsaWNrIixlPT57WWUoZSl9KTtjb25zdCBpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5wYXJhbXMuZUdyaWRDZWxsLCJrZXlkb3duIixlPT57aWYoZS5rZXk9PT1qcy5TUEFDRSYmIXRoaXMuZUNoZWNrYm94LmlzRGlzYWJsZWQoKSl7dGhpcy5wYXJhbXMuZUdyaWRDZWxsPT09aS5hY3RpdmVFbGVtZW50JiZ0aGlzLmVDaGVja2JveC50b2dnbGUoKTtjb25zdCB0PXRoaXMuZUNoZWNrYm94LmdldFZhbHVlKCk7dGhpcy5vbkNoZWNrYm94Q2hhbmdlZCh0KSxlLnByZXZlbnREZWZhdWx0KCl9fSl9cmVmcmVzaChlKXtyZXR1cm4gdGhpcy5wYXJhbXM9ZSx0aGlzLnVwZGF0ZUNoZWNrYm94KGUpLCEwfXVwZGF0ZUNoZWNrYm94KGUpe3ZhciB0LGkscztsZXQgcixvPSEwO2lmKGUubm9kZS5ncm91cCYmZS5jb2x1bW4pe2NvbnN0IGk9ZS5jb2x1bW4uZ2V0Q29sSWQoKTtpLnN0YXJ0c1dpdGgoImFnLUdyaWQtQXV0b0NvbHVtbiIpP3I9bnVsbD09ZS52YWx1ZXx8IiI9PT1lLnZhbHVlP3ZvaWQgMDoidHJ1ZSI9PT1lLnZhbHVlOmUubm9kZS5hZ2dEYXRhJiZ2b2lkIDAhPT1lLm5vZGUuYWdnRGF0YVtpXT9yPW51bGwhPT0odD1lLnZhbHVlKSYmdm9pZCAwIT09dD90OnZvaWQgMDpvPSExfWVsc2Ugcj1udWxsIT09KGk9ZS52YWx1ZSkmJnZvaWQgMCE9PWk/aTp2b2lkIDA7aWYoIW8pcmV0dXJuIHZvaWQgdGhpcy5lQ2hlY2tib3guc2V0RGlzcGxheWVkKCExKTt0aGlzLmVDaGVja2JveC5zZXRWYWx1ZShyKTtjb25zdCBuPW51bGwhPWUuZGlzYWJsZWQ/ZS5kaXNhYmxlZDohKG51bGw9PT0ocz1lLmNvbHVtbil8fHZvaWQgMD09PXM/dm9pZCAwOnMuaXNDZWxsRWRpdGFibGUoZS5ub2RlKSk7dGhpcy5lQ2hlY2tib3guc2V0RGlzYWJsZWQobik7Y29uc3QgYT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSxsPXhpKGEsciksZD1uP2w6YCR7YSgiYXJpYVRvZ2dsZUNlbGxWYWx1ZSIsIlByZXNzIFNQQUNFIHRvIHRvZ2dsZSBjZWxsIHZhbHVlIil9ICgke2x9KWA7dGhpcy5lQ2hlY2tib3guc2V0SW5wdXRBcmlhTGFiZWwoZCl9b25DaGVja2JveENoYW5nZWQoZSl7Y29uc3R7Y29sdW1uOnQsbm9kZTppLHJvd0luZGV4OnMsdmFsdWU6cn09dGhpcy5wYXJhbXMsbz17dHlwZTpsdC5FVkVOVF9DRUxMX0VESVRJTkdfU1RBUlRFRCxjb2x1bW46dCxjb2xEZWY6bnVsbD09dD92b2lkIDA6dC5nZXRDb2xEZWYoKSxkYXRhOmkuZGF0YSxub2RlOmkscm93SW5kZXg6cyxyb3dQaW5uZWQ6aS5yb3dQaW5uZWQsdmFsdWU6cn07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChvKTtjb25zdCBuPXRoaXMucGFyYW1zLm5vZGUuc2V0RGF0YVZhbHVlKHRoaXMucGFyYW1zLmNvbHVtbixlLCJlZGl0IiksYT17dHlwZTpsdC5FVkVOVF9DRUxMX0VESVRJTkdfU1RPUFBFRCxjb2x1bW46dCxjb2xEZWY6bnVsbD09dD92b2lkIDA6dC5nZXRDb2xEZWYoKSxkYXRhOmkuZGF0YSxub2RlOmkscm93SW5kZXg6cyxyb3dQaW5uZWQ6aS5yb3dQaW5uZWQsdmFsdWU6cixvbGRWYWx1ZTpyLG5ld1ZhbHVlOmUsdmFsdWVDaGFuZ2VkOm59O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoYSl9fW5uLlRFTVBMQVRFPSdcbiAgICAgICAgPGRpdiBjbGFzcz0iYWctY2VsbC13cmFwcGVyIGFnLWNoZWNrYm94LWNlbGwiIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICA8YWctY2hlY2tib3ggcm9sZT0icHJlc2VudGF0aW9uIiByZWY9ImVDaGVja2JveCI+PC9hZy1jaGVja2JveD5cbiAgICAgICAgPC9kaXY+JyxvbihbdXIoImVDaGVja2JveCIpXSxubi5wcm90b3R5cGUsImVDaGVja2JveCIsdm9pZCAwKTt2YXIgYW49ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgbG4gZXh0ZW5kcyBtb3tjb25zdHJ1Y3Rvcigpe3N1cGVyKCdcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWNlbGwtd3JhcHBlciBhZy1jZWxsLWVkaXQtd3JhcHBlciBhZy1jaGVja2JveC1lZGl0Ij5cbiAgICAgICAgICAgICAgICA8YWctY2hlY2tib3ggcm9sZT0icHJlc2VudGF0aW9uIiByZWY9ImVDaGVja2JveCI+PC9hZy1jaGVja2JveD5cbiAgICAgICAgICAgIDwvZGl2PicpfWluaXQoZSl7dmFyIHQ7dGhpcy5wYXJhbXM9ZTtjb25zdCBpPW51bGwhPT0odD1lLnZhbHVlKSYmdm9pZCAwIT09dD90OnZvaWQgMDt0aGlzLmVDaGVja2JveC5zZXRWYWx1ZShpKTt0aGlzLmVDaGVja2JveC5nZXRJbnB1dEVsZW1lbnQoKS5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwiLTEiKSx0aGlzLnNldEFyaWFMYWJlbChpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVDaGVja2JveCxsdC5FVkVOVF9GSUVMRF9WQUxVRV9DSEFOR0VELGU9PnRoaXMuc2V0QXJpYUxhYmVsKGUuc2VsZWN0ZWQpKX1nZXRWYWx1ZSgpe3JldHVybiB0aGlzLmVDaGVja2JveC5nZXRWYWx1ZSgpfWZvY3VzSW4oKXt0aGlzLmVDaGVja2JveC5nZXRGb2N1c2FibGVFbGVtZW50KCkuZm9jdXMoKX1hZnRlckd1aUF0dGFjaGVkKCl7dGhpcy5wYXJhbXMuY2VsbFN0YXJ0ZWRFZGl0JiZ0aGlzLmZvY3VzSW4oKX1pc1BvcHVwKCl7cmV0dXJuITF9c2V0QXJpYUxhYmVsKGUpe2NvbnN0IHQ9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCksaT14aSh0LGUpLHM9dCgiYXJpYVRvZ2dsZUNlbGxWYWx1ZSIsIlByZXNzIFNQQUNFIHRvIHRvZ2dsZSBjZWxsIHZhbHVlIik7dGhpcy5lQ2hlY2tib3guc2V0SW5wdXRBcmlhTGFiZWwoYCR7c30gKCR7aX0pYCl9fWFuKFt1cigiZUNoZWNrYm94IildLGxuLnByb3RvdHlwZSwiZUNoZWNrYm94Iix2b2lkIDApO2NsYXNzIGRuIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc2V0VGVtcGxhdGUoIjxkaXY+PC9kaXY+Iil9aW5pdChlKXt2YXIgdDt0aGlzLnBhcmFtcz1lLHRoaXMuY3NzQ2xhc3NQcmVmaXg9bnVsbCE9PSh0PXRoaXMucGFyYW1zLmNzc0NsYXNzUHJlZml4KSYmdm9pZCAwIT09dD90OiJhZy1tZW51LW9wdGlvbiIsdGhpcy5hZGRJY29uKCksdGhpcy5hZGROYW1lKCksdGhpcy5hZGRTaG9ydGN1dCgpLHRoaXMuYWRkU3ViTWVudSgpfWNvbmZpZ3VyZURlZmF1bHRzKCl7cmV0dXJuITB9YWRkSWNvbigpe2lmKHRoaXMucGFyYW1zLmlzQ29tcGFjdClyZXR1cm47Y29uc3QgZT15cyhgPHNwYW4gcmVmPSJlSWNvbiIgY2xhc3M9IiR7dGhpcy5nZXRDbGFzc05hbWUoInBhcnQiKX0gJHt0aGlzLmdldENsYXNzTmFtZSgiaWNvbiIpfSIgcm9sZT0icHJlc2VudGF0aW9uIj48L3NwYW4+YCk7dGhpcy5wYXJhbXMuY2hlY2tlZD9lLmFwcGVuZENoaWxkKFdzKCJjaGVjayIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UpKTp0aGlzLnBhcmFtcy5pY29uJiYoTXModGhpcy5wYXJhbXMuaWNvbik/ZS5hcHBlbmRDaGlsZCh0aGlzLnBhcmFtcy5pY29uKToic3RyaW5nIj09dHlwZW9mIHRoaXMucGFyYW1zLmljb24/ZS5pbm5lckhUTUw9dGhpcy5wYXJhbXMuaWNvbjpjb25zb2xlLndhcm4oIkFHIEdyaWQ6IG1lbnUgaXRlbSBpY29uIG11c3QgYmUgRE9NIG5vZGUgb3Igc3RyaW5nIikpLHRoaXMuZ2V0R3VpKCkuYXBwZW5kQ2hpbGQoZSl9YWRkTmFtZSgpe2NvbnN0IGU9eXMoYDxzcGFuIHJlZj0iZU5hbWUiIGNsYXNzPSIke3RoaXMuZ2V0Q2xhc3NOYW1lKCJwYXJ0Iil9ICR7dGhpcy5nZXRDbGFzc05hbWUoInRleHQiKX0iPiR7dGhpcy5wYXJhbXMubmFtZXx8IiJ9PC9zcGFuPmApO3RoaXMuZ2V0R3VpKCkuYXBwZW5kQ2hpbGQoZSl9YWRkU2hvcnRjdXQoKXtpZih0aGlzLnBhcmFtcy5pc0NvbXBhY3QpcmV0dXJuO2NvbnN0IGU9eXMoYDxzcGFuIHJlZj0iZVNob3J0Y3V0IiBjbGFzcz0iJHt0aGlzLmdldENsYXNzTmFtZSgicGFydCIpfSAke3RoaXMuZ2V0Q2xhc3NOYW1lKCJzaG9ydGN1dCIpfSI+JHt0aGlzLnBhcmFtcy5zaG9ydGN1dHx8IiJ9PC9zcGFuPmApO3RoaXMuZ2V0R3VpKCkuYXBwZW5kQ2hpbGQoZSl9YWRkU3ViTWVudSgpe2NvbnN0IGU9eXMoYDxzcGFuIHJlZj0iZVBvcHVwUG9pbnRlciIgY2xhc3M9IiR7dGhpcy5nZXRDbGFzc05hbWUoInBhcnQiKX0gJHt0aGlzLmdldENsYXNzTmFtZSgicG9wdXAtcG9pbnRlciIpfSI+PC9zcGFuPmApLHQ9dGhpcy5nZXRHdWkoKTtpZih0aGlzLnBhcmFtcy5zdWJNZW51KXtjb25zdCBpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIik/InNtYWxsTGVmdCI6InNtYWxsUmlnaHQiO2NpKHQsITEpLGUuYXBwZW5kQ2hpbGQoV3MoaSx0aGlzLmdyaWRPcHRpb25zU2VydmljZSkpfXQuYXBwZW5kQ2hpbGQoZSl9Z2V0Q2xhc3NOYW1lKGUpe3JldHVybmAke3RoaXMuY3NzQ2xhc3NQcmVmaXh9LSR7ZX1gfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCl9fXZhciBjbj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgaG49Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5hZ0dyaWREZWZhdWx0cz17YWdEYXRlSW5wdXQ6WXIsYWdDb2x1bW5IZWFkZXI6dW8sYWdDb2x1bW5Hcm91cEhlYWRlcjpnbyxhZ1NvcnRJbmRpY2F0b3I6Y28sYWdUZXh0Q29sdW1uRmxvYXRpbmdGaWx0ZXI6bm8sYWdOdW1iZXJDb2x1bW5GbG9hdGluZ0ZpbHRlcjpvbyxhZ0RhdGVDb2x1bW5GbG9hdGluZ0ZpbHRlcjp6cixhZ1JlYWRPbmx5RmxvYXRpbmdGaWx0ZXI6bXIsYWdBbmltYXRlU2hvd0NoYW5nZUNlbGxSZW5kZXJlcjp4byxhZ0FuaW1hdGVTbGlkZUNlbGxSZW5kZXJlcjpEbyxhZ0dyb3VwQ2VsbFJlbmRlcmVyOnpvLGFnR3JvdXBSb3dSZW5kZXJlcjp6byxhZ0xvYWRpbmdDZWxsUmVuZGVyZXI6WW8sYWdDaGVja2JveENlbGxSZW5kZXJlcjpubixhZ0NlbGxFZGl0b3I6RW8sYWdUZXh0Q2VsbEVkaXRvcjpFbyxhZ051bWJlckNlbGxFZGl0b3I6UW8sYWdEYXRlQ2VsbEVkaXRvcjplbixhZ0RhdGVTdHJpbmdDZWxsRWRpdG9yOnJuLGFnU2VsZWN0Q2VsbEVkaXRvcjp5byxhZ0xhcmdlVGV4dENlbGxFZGl0b3I6dm8sYWdDaGVja2JveENlbGxFZGl0b3I6bG4sYWdUZXh0Q29sdW1uRmlsdGVyOmVvLGFnTnVtYmVyQ29sdW1uRmlsdGVyOlFyLGFnRGF0ZUNvbHVtbkZpbHRlcjpXcixhZ0xvYWRpbmdPdmVybGF5OiRvLGFnTm9Sb3dzT3ZlcmxheTpYbyxhZ1Rvb2x0aXBDb21wb25lbnQ6cW8sYWdNZW51SXRlbTpkbn0sdGhpcy5lbnRlcnByaXNlQWdEZWZhdWx0Q29tcHNNb2R1bGU9e2FnU2V0Q29sdW1uRmlsdGVyOnNlLlNldEZpbHRlck1vZHVsZSxhZ1NldENvbHVtbkZsb2F0aW5nRmlsdGVyOnNlLlNldEZpbHRlck1vZHVsZSxhZ011bHRpQ29sdW1uRmlsdGVyOnNlLk11bHRpRmlsdGVyTW9kdWxlLGFnTXVsdGlDb2x1bW5GbG9hdGluZ0ZpbHRlcjpzZS5NdWx0aUZpbHRlck1vZHVsZSxhZ0dyb3VwQ29sdW1uRmlsdGVyOnNlLlJvd0dyb3VwaW5nTW9kdWxlLGFnR3JvdXBDb2x1bW5GbG9hdGluZ0ZpbHRlcjpzZS5Sb3dHcm91cGluZ01vZHVsZSxhZ1JpY2hTZWxlY3Q6c2UuUmljaFNlbGVjdE1vZHVsZSxhZ1JpY2hTZWxlY3RDZWxsRWRpdG9yOnNlLlJpY2hTZWxlY3RNb2R1bGUsYWdEZXRhaWxDZWxsUmVuZGVyZXI6c2UuTWFzdGVyRGV0YWlsTW9kdWxlLGFnU3BhcmtsaW5lQ2VsbFJlbmRlcmVyOnNlLlNwYXJrbGluZXNNb2R1bGV9LHRoaXMuanNDb21wcz17fX1pbml0KCl7bnVsbCE9dGhpcy5ncmlkT3B0aW9ucy5jb21wb25lbnRzJiZGKHRoaXMuZ3JpZE9wdGlvbnMuY29tcG9uZW50cywoZSx0KT0+dGhpcy5yZWdpc3RlckpzQ29tcG9uZW50KGUsdCkpfXJlZ2lzdGVyRGVmYXVsdENvbXBvbmVudChlLHQpe3RoaXMuYWdHcmlkRGVmYXVsdHNbZV0/Y29uc29sZS5lcnJvcigiVHJ5aW5nIHRvIG92ZXJ3cml0ZSBhIGRlZmF1bHQgY29tcG9uZW50LiBZb3Ugc2hvdWxkIGNhbGwgcmVnaXN0ZXJDb21wb25lbnQiKTp0aGlzLmFnR3JpZERlZmF1bHRzW2VdPXR9cmVnaXN0ZXJKc0NvbXBvbmVudChlLHQpe3RoaXMuanNDb21wc1tlXT10fXJldHJpZXZlKGUsdCl7Y29uc3QgaT0oZSx0KT0+KHtjb21wb25lbnRGcm9tRnJhbWV3b3JrOnQsY29tcG9uZW50OmV9KSxzPXRoaXMuZ2V0RnJhbWV3b3JrT3ZlcnJpZGVzKCkuZnJhbWV3b3JrQ29tcG9uZW50KHQsdGhpcy5ncmlkT3B0aW9ucy5jb21wb25lbnRzKTtpZihudWxsIT1zKXJldHVybiBpKHMsITApO2NvbnN0IHI9dGhpcy5qc0NvbXBzW3RdO2lmKHIpe3JldHVybiBpKHIsdGhpcy5nZXRGcmFtZXdvcmtPdmVycmlkZXMoKS5pc0ZyYW1ld29ya0NvbXBvbmVudChyKSl9Y29uc3Qgbz10aGlzLmFnR3JpZERlZmF1bHRzW3RdO2lmKG8pcmV0dXJuIGkobywhMSk7Y29uc3Qgbj10aGlzLmVudGVycHJpc2VBZ0RlZmF1bHRDb21wc01vZHVsZVt0XTtyZXR1cm4gbj9yZS5fX2Fzc2VydFJlZ2lzdGVyZWQobixgQUcgR3JpZCAnJHtlfScgY29tcG9uZW50OiAke3R9YCx0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpOlcoKCk9Pnt0aGlzLndhcm5BYm91dE1pc3NpbmdDb21wb25lbnQoZSx0KX0sIk1pc3NpbmdDb21wIit0KSxudWxsfXdhcm5BYm91dE1pc3NpbmdDb21wb25lbnQoZSx0KXtjb25zdCBpPV9zKHQsWy4uLk9iamVjdC5rZXlzKHRoaXMuYWdHcmlkRGVmYXVsdHMpLmZpbHRlcihlPT4hWyJhZ0NlbGxFZGl0b3IiLCJhZ0dyb3VwUm93UmVuZGVyZXIiLCJhZ1NvcnRJbmRpY2F0b3IiXS5pbmNsdWRlcyhlKSksLi4uT2JqZWN0LmtleXModGhpcy5qc0NvbXBzKV0sITAsLjgpLnZhbHVlcztjb25zb2xlLndhcm4oYEFHIEdyaWQ6IENvdWxkIG5vdCBmaW5kICcke3R9JyBjb21wb25lbnQuIEl0IHdhcyBjb25maWd1cmVkIGFzICIke2V9OiAnJHt0fSciIGJ1dCBpdCB3YXNuJ3QgZm91bmQgaW4gdGhlIGxpc3Qgb2YgcmVnaXN0ZXJlZCBjb21wb25lbnRzLmApLGkubGVuZ3RoPjAmJmNvbnNvbGUud2FybihgICAgICAgICAgRGlkIHlvdSBtZWFuOiBbJHtpLnNsaWNlKDAsMyl9XT9gKSxjb25zb2xlLndhcm4oIklmIHVzaW5nIGEgY3VzdG9tIGNvbXBvbmVudCBjaGVjayBpdCBoYXMgYmVlbiByZWdpc3RlcmVkIGFzIGRlc2NyaWJlZCBpbjogIit0aGlzLmdldEZyYW1ld29ya092ZXJyaWRlcygpLmdldERvY0xpbmsoImNvbXBvbmVudHMvIikpfX07Y24oW2NlKCJncmlkT3B0aW9ucyIpXSxobi5wcm90b3R5cGUsImdyaWRPcHRpb25zIix2b2lkIDApLGNuKFthZV0saG4ucHJvdG90eXBlLCJpbml0IixudWxsKSxobj1jbihbZGUoInVzZXJDb21wb25lbnRSZWdpc3RyeSIpXSxobik7Y29uc3QgdW49e3Byb3BlcnR5TmFtZToiZGF0ZUNvbXBvbmVudCIsY2VsbFJlbmRlcmVyOiExfSxwbj17cHJvcGVydHlOYW1lOiJoZWFkZXJDb21wb25lbnQiLGNlbGxSZW5kZXJlcjohMX0sZ249e3Byb3BlcnR5TmFtZToiaGVhZGVyR3JvdXBDb21wb25lbnQiLGNlbGxSZW5kZXJlcjohMX0sbW49e3Byb3BlcnR5TmFtZToiY2VsbFJlbmRlcmVyIixjZWxsUmVuZGVyZXI6ITB9LGZuPXtwcm9wZXJ0eU5hbWU6ImNlbGxFZGl0b3IiLGNlbGxSZW5kZXJlcjohMX0sdm49e3Byb3BlcnR5TmFtZToiaW5uZXJSZW5kZXJlciIsY2VsbFJlbmRlcmVyOiEwfSxDbj17cHJvcGVydHlOYW1lOiJsb2FkaW5nT3ZlcmxheUNvbXBvbmVudCIsY2VsbFJlbmRlcmVyOiExfSx5bj17cHJvcGVydHlOYW1lOiJub1Jvd3NPdmVybGF5Q29tcG9uZW50IixjZWxsUmVuZGVyZXI6ITF9LFNuPXtwcm9wZXJ0eU5hbWU6InRvb2x0aXBDb21wb25lbnQiLGNlbGxSZW5kZXJlcjohMX0sd249e3Byb3BlcnR5TmFtZToiZmlsdGVyIixjZWxsUmVuZGVyZXI6ITF9LGJuPXtwcm9wZXJ0eU5hbWU6ImZsb2F0aW5nRmlsdGVyQ29tcG9uZW50IixjZWxsUmVuZGVyZXI6ITF9LEVuPXtwcm9wZXJ0eU5hbWU6InRvb2xQYW5lbCIsY2VsbFJlbmRlcmVyOiExfSxSbj17cHJvcGVydHlOYW1lOiJzdGF0dXNQYW5lbCIsY2VsbFJlbmRlcmVyOiExfSx4bj17cHJvcGVydHlOYW1lOiJmdWxsV2lkdGhDZWxsUmVuZGVyZXIiLGNlbGxSZW5kZXJlcjohMH0sVG49e3Byb3BlcnR5TmFtZToibG9hZGluZ0NlbGxSZW5kZXJlciIsY2VsbFJlbmRlcmVyOiEwfSxEbj17cHJvcGVydHlOYW1lOiJncm91cFJvd1JlbmRlcmVyIixjZWxsUmVuZGVyZXI6ITB9LE9uPXtwcm9wZXJ0eU5hbWU6ImRldGFpbENlbGxSZW5kZXJlciIsY2VsbFJlbmRlcmVyOiEwfSxBbj17cHJvcGVydHlOYW1lOiJtZW51SXRlbSIsY2VsbFJlbmRlcmVyOiExfTtjbGFzcyBQbntzdGF0aWMgZ2V0RmxvYXRpbmdGaWx0ZXJUeXBlKGUpe3JldHVybiB0aGlzLmZpbHRlclRvRmxvYXRpbmdGaWx0ZXJNYXBwaW5nW2VdfX1Qbi5maWx0ZXJUb0Zsb2F0aW5nRmlsdGVyTWFwcGluZz17c2V0OiJhZ1NldENvbHVtbkZsb2F0aW5nRmlsdGVyIixhZ1NldENvbHVtbkZpbHRlcjoiYWdTZXRDb2x1bW5GbG9hdGluZ0ZpbHRlciIsbXVsdGk6ImFnTXVsdGlDb2x1bW5GbG9hdGluZ0ZpbHRlciIsYWdNdWx0aUNvbHVtbkZpbHRlcjoiYWdNdWx0aUNvbHVtbkZsb2F0aW5nRmlsdGVyIixncm91cDoiYWdHcm91cENvbHVtbkZsb2F0aW5nRmlsdGVyIixhZ0dyb3VwQ29sdW1uRmlsdGVyOiJhZ0dyb3VwQ29sdW1uRmxvYXRpbmdGaWx0ZXIiLG51bWJlcjoiYWdOdW1iZXJDb2x1bW5GbG9hdGluZ0ZpbHRlciIsYWdOdW1iZXJDb2x1bW5GaWx0ZXI6ImFnTnVtYmVyQ29sdW1uRmxvYXRpbmdGaWx0ZXIiLGRhdGU6ImFnRGF0ZUNvbHVtbkZsb2F0aW5nRmlsdGVyIixhZ0RhdGVDb2x1bW5GaWx0ZXI6ImFnRGF0ZUNvbHVtbkZsb2F0aW5nRmlsdGVyIix0ZXh0OiJhZ1RleHRDb2x1bW5GbG9hdGluZ0ZpbHRlciIsYWdUZXh0Q29sdW1uRmlsdGVyOiJhZ1RleHRDb2x1bW5GbG9hdGluZ0ZpbHRlciJ9O3ZhciBNbj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgTG49Y2xhc3MgZXh0ZW5kcyBpdHtnZXRIZWFkZXJDb21wRGV0YWlscyhlLHQpe3JldHVybiB0aGlzLmdldENvbXBEZXRhaWxzKGUscG4sImFnQ29sdW1uSGVhZGVyIix0KX1nZXRIZWFkZXJHcm91cENvbXBEZXRhaWxzKGUpe2NvbnN0IHQ9ZS5jb2x1bW5Hcm91cC5nZXRDb2xHcm91cERlZigpO3JldHVybiB0aGlzLmdldENvbXBEZXRhaWxzKHQsZ24sImFnQ29sdW1uR3JvdXBIZWFkZXIiLGUpfWdldEZ1bGxXaWR0aENlbGxSZW5kZXJlckRldGFpbHMoZSl7cmV0dXJuIHRoaXMuZ2V0Q29tcERldGFpbHModGhpcy5ncmlkT3B0aW9ucyx4bixudWxsLGUsITApfWdldEZ1bGxXaWR0aExvYWRpbmdDZWxsUmVuZGVyZXJEZXRhaWxzKGUpe3JldHVybiB0aGlzLmdldENvbXBEZXRhaWxzKHRoaXMuZ3JpZE9wdGlvbnMsVG4sImFnTG9hZGluZ0NlbGxSZW5kZXJlciIsZSwhMCl9Z2V0RnVsbFdpZHRoR3JvdXBDZWxsUmVuZGVyZXJEZXRhaWxzKGUpe3JldHVybiB0aGlzLmdldENvbXBEZXRhaWxzKHRoaXMuZ3JpZE9wdGlvbnMsRG4sImFnR3JvdXBSb3dSZW5kZXJlciIsZSwhMCl9Z2V0RnVsbFdpZHRoRGV0YWlsQ2VsbFJlbmRlcmVyRGV0YWlscyhlKXtyZXR1cm4gdGhpcy5nZXRDb21wRGV0YWlscyh0aGlzLmdyaWRPcHRpb25zLE9uLCJhZ0RldGFpbENlbGxSZW5kZXJlciIsZSwhMCl9Z2V0SW5uZXJSZW5kZXJlckRldGFpbHMoZSx0KXtyZXR1cm4gdGhpcy5nZXRDb21wRGV0YWlscyhlLHZuLG51bGwsdCl9Z2V0RnVsbFdpZHRoR3JvdXBSb3dJbm5lckNlbGxSZW5kZXJlcihlLHQpe3JldHVybiB0aGlzLmdldENvbXBEZXRhaWxzKGUsdm4sbnVsbCx0KX1nZXRDZWxsUmVuZGVyZXJEZXRhaWxzKGUsdCl7cmV0dXJuIHRoaXMuZ2V0Q29tcERldGFpbHMoZSxtbixudWxsLHQpfWdldENlbGxFZGl0b3JEZXRhaWxzKGUsdCl7cmV0dXJuIHRoaXMuZ2V0Q29tcERldGFpbHMoZSxmbiwiYWdDZWxsRWRpdG9yIix0LCEwKX1nZXRGaWx0ZXJEZXRhaWxzKGUsdCxpKXtyZXR1cm4gdGhpcy5nZXRDb21wRGV0YWlscyhlLHduLGksdCwhMCl9Z2V0RGF0ZUNvbXBEZXRhaWxzKGUpe3JldHVybiB0aGlzLmdldENvbXBEZXRhaWxzKHRoaXMuZ3JpZE9wdGlvbnMsdW4sImFnRGF0ZUlucHV0IixlLCEwKX1nZXRMb2FkaW5nT3ZlcmxheUNvbXBEZXRhaWxzKGUpe3JldHVybiB0aGlzLmdldENvbXBEZXRhaWxzKHRoaXMuZ3JpZE9wdGlvbnMsQ24sImFnTG9hZGluZ092ZXJsYXkiLGUsITApfWdldE5vUm93c092ZXJsYXlDb21wRGV0YWlscyhlKXtyZXR1cm4gdGhpcy5nZXRDb21wRGV0YWlscyh0aGlzLmdyaWRPcHRpb25zLHluLCJhZ05vUm93c092ZXJsYXkiLGUsITApfWdldFRvb2x0aXBDb21wRGV0YWlscyhlKXtyZXR1cm4gdGhpcy5nZXRDb21wRGV0YWlscyhlLmNvbERlZixTbiwiYWdUb29sdGlwQ29tcG9uZW50IixlLCEwKX1nZXRTZXRGaWx0ZXJDZWxsUmVuZGVyZXJEZXRhaWxzKGUsdCl7cmV0dXJuIHRoaXMuZ2V0Q29tcERldGFpbHMoZSxtbixudWxsLHQpfWdldEZsb2F0aW5nRmlsdGVyQ29tcERldGFpbHMoZSx0LGkpe3JldHVybiB0aGlzLmdldENvbXBEZXRhaWxzKGUsYm4saSx0KX1nZXRUb29sUGFuZWxDb21wRGV0YWlscyhlLHQpe3JldHVybiB0aGlzLmdldENvbXBEZXRhaWxzKGUsRW4sbnVsbCx0LCEwKX1nZXRTdGF0dXNQYW5lbENvbXBEZXRhaWxzKGUsdCl7cmV0dXJuIHRoaXMuZ2V0Q29tcERldGFpbHMoZSxSbixudWxsLHQsITApfWdldE1lbnVJdGVtQ29tcERldGFpbHMoZSx0KXtyZXR1cm4gdGhpcy5nZXRDb21wRGV0YWlscyhlLEFuLCJhZ01lbnVJdGVtIix0LCEwKX1nZXRDb21wRGV0YWlscyhlLHQsaSxzLHI9ITEpe2NvbnN0e3Byb3BlcnR5TmFtZTpvLGNlbGxSZW5kZXJlcjpufT10O2xldHtjb21wTmFtZTphLGpzQ29tcDpsLGZ3Q29tcDpkLHBhcmFtc0Zyb21TZWxlY3RvcjpjLHBvcHVwRnJvbVNlbGVjdG9yOmgscG9wdXBQb3NpdGlvbkZyb21TZWxlY3Rvcjp1fT10aGlzLmdldENvbXBLZXlzKGUsdCxzKTtjb25zdCBwPWU9Pntjb25zdCB0PXRoaXMudXNlckNvbXBvbmVudFJlZ2lzdHJ5LnJldHJpZXZlKG8sZSk7dCYmKGw9dC5jb21wb25lbnRGcm9tRnJhbWV3b3JrP3ZvaWQgMDp0LmNvbXBvbmVudCxkPXQuY29tcG9uZW50RnJvbUZyYW1ld29yaz90LmNvbXBvbmVudDp2b2lkIDApfTtpZihudWxsIT1hJiZwKGEpLG51bGw9PWwmJm51bGw9PWQmJm51bGwhPWkmJnAoaSksbCYmbiYmIXRoaXMuYWdDb21wb25lbnRVdGlscy5kb2VzSW1wbGVtZW50SUNvbXBvbmVudChsKSYmKGw9dGhpcy5hZ0NvbXBvbmVudFV0aWxzLmFkYXB0RnVuY3Rpb24obyxsKSksIWwmJiFkKXJldHVybiB2b2lkKHImJmNvbnNvbGUuZXJyb3IoYEFHIEdyaWQ6IENvdWxkIG5vdCBmaW5kIGNvbXBvbmVudCAke2F9LCBkaWQgeW91IGZvcmdldCB0byBjb25maWd1cmUgdGhpcyBjb21wb25lbnQ/YCkpO2NvbnN0IGc9dGhpcy5tZXJnZVBhcmFtc1dpdGhBcHBsaWNhdGlvblByb3ZpZGVkUGFyYW1zKGUsdCxzLGMpLG09bnVsbD09bCxmPWx8fGQ7cmV0dXJue2NvbXBvbmVudEZyb21GcmFtZXdvcms6bSxjb21wb25lbnRDbGFzczpmLHBhcmFtczpnLHR5cGU6dCxwb3B1cEZyb21TZWxlY3RvcjpoLHBvcHVwUG9zaXRpb25Gcm9tU2VsZWN0b3I6dSxuZXdBZ1N0YWNrSW5zdGFuY2U6KCk9PnRoaXMubmV3QWdTdGFja0luc3RhbmNlKGYsbSxnLHQpfX1nZXRDb21wS2V5cyhlLHQsaSl7Y29uc3R7cHJvcGVydHlOYW1lOnN9PXQ7bGV0IHIsbyxuLGEsbCxkO2lmKGUpe2NvbnN0IHQ9ZSxjPXRbcysiU2VsZWN0b3IiXSxoPWM/YyhpKTpudWxsLHU9ZT0+e2lmKCJzdHJpbmciPT10eXBlb2YgZSlyPWU7ZWxzZSBpZihudWxsIT1lJiYhMCE9PWUpe3RoaXMuZ2V0RnJhbWV3b3JrT3ZlcnJpZGVzKCkuaXNGcmFtZXdvcmtDb21wb25lbnQoZSk/bj1lOm89ZX19O2g/KHUoaC5jb21wb25lbnQpLGE9aC5wYXJhbXMsbD1oLnBvcHVwLGQ9aC5wb3B1cFBvc2l0aW9uKTp1KHRbc10pfXJldHVybntjb21wTmFtZTpyLGpzQ29tcDpvLGZ3Q29tcDpuLHBhcmFtc0Zyb21TZWxlY3RvcjphLHBvcHVwRnJvbVNlbGVjdG9yOmwscG9wdXBQb3NpdGlvbkZyb21TZWxlY3RvcjpkfX1uZXdBZ1N0YWNrSW5zdGFuY2UoZSx0LGkscyl7Y29uc3Qgcj1zLnByb3BlcnR5TmFtZTtsZXQgbztpZighdClvPW5ldyBlO2Vsc2V7Y29uc3QgdD10aGlzLmNvbXBvbmVudE1ldGFkYXRhUHJvdmlkZXIucmV0cmlldmUocik7bz10aGlzLmZyYW1ld29ya0NvbXBvbmVudFdyYXBwZXIud3JhcChlLHQubWFuZGF0b3J5TWV0aG9kTGlzdCx0Lm9wdGlvbmFsTWV0aG9kTGlzdCxzKX1jb25zdCBuPXRoaXMuaW5pdENvbXBvbmVudChvLGkpO3JldHVybiBudWxsPT1uP3RyLnJlc29sdmUobyk6bi50aGVuKCgpPT5vKX1tZXJnZVBhcmFtc1dpdGhBcHBsaWNhdGlvblByb3ZpZGVkUGFyYW1zKGUsdCxpLHM9bnVsbCl7Y29uc3Qgcj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRHcmlkQ29tbW9uUGFyYW1zKCk7ayhyLGkpO2NvbnN0IG89ZSYmZVt0LnByb3BlcnR5TmFtZSsiUGFyYW1zIl07aWYoImZ1bmN0aW9uIj09dHlwZW9mIG8pe2socixvKGkpKX1lbHNlIm9iamVjdCI9PXR5cGVvZiBvJiZrKHIsbyk7cmV0dXJuIGsocixzKSxyfWluaXRDb21wb25lbnQoZSx0KXtpZih0aGlzLmNvbnRleHQuY3JlYXRlQmVhbihlKSxudWxsIT1lLmluaXQpcmV0dXJuIGUuaW5pdCh0KX1nZXREZWZhdWx0RmxvYXRpbmdGaWx0ZXJUeXBlKGUsdCl7aWYobnVsbD09ZSlyZXR1cm4gbnVsbDtsZXQgaT1udWxsLHtjb21wTmFtZTpzLGpzQ29tcDpyLGZ3Q29tcDpvfT10aGlzLmdldENvbXBLZXlzKGUsd24pO2lmKHMpaT1Qbi5nZXRGbG9hdGluZ0ZpbHRlclR5cGUocyk7ZWxzZXtudWxsPT1yJiZudWxsPT1vJiYhMD09PWUuZmlsdGVyJiYoaT10KCkpfXJldHVybiBpfX07TW4oW2NlKCJncmlkT3B0aW9ucyIpXSxMbi5wcm90b3R5cGUsImdyaWRPcHRpb25zIix2b2lkIDApLE1uKFtjZSgiYWdDb21wb25lbnRVdGlscyIpXSxMbi5wcm90b3R5cGUsImFnQ29tcG9uZW50VXRpbHMiLHZvaWQgMCksTW4oW2NlKCJjb21wb25lbnRNZXRhZGF0YVByb3ZpZGVyIildLExuLnByb3RvdHlwZSwiY29tcG9uZW50TWV0YWRhdGFQcm92aWRlciIsdm9pZCAwKSxNbihbY2UoInVzZXJDb21wb25lbnRSZWdpc3RyeSIpXSxMbi5wcm90b3R5cGUsInVzZXJDb21wb25lbnRSZWdpc3RyeSIsdm9pZCAwKSxNbihbaGUoImZyYW1ld29ya0NvbXBvbmVudFdyYXBwZXIiKV0sTG4ucHJvdG90eXBlLCJmcmFtZXdvcmtDb21wb25lbnRXcmFwcGVyIix2b2lkIDApLExuPU1uKFtkZSgidXNlckNvbXBvbmVudEZhY3RvcnkiKV0sTG4pO2NsYXNzIEZue312YXIgSW47Rm4uQ29sRGVmUHJvcGVydHlNYXA9e2hlYWRlck5hbWU6dm9pZCAwLGNvbHVtbkdyb3VwU2hvdzp2b2lkIDAsaGVhZGVyQ2xhc3M6dm9pZCAwLHRvb2xQYW5lbENsYXNzOnZvaWQgMCxoZWFkZXJWYWx1ZUdldHRlcjp2b2lkIDAscGl2b3RLZXlzOnZvaWQgMCxncm91cElkOnZvaWQgMCxjb2xJZDp2b2lkIDAsc29ydDp2b2lkIDAsaW5pdGlhbFNvcnQ6dm9pZCAwLGZpZWxkOnZvaWQgMCx0eXBlOnZvaWQgMCxjZWxsRGF0YVR5cGU6dm9pZCAwLHRvb2x0aXBDb21wb25lbnQ6dm9pZCAwLHRvb2x0aXBGaWVsZDp2b2lkIDAsaGVhZGVyVG9vbHRpcDp2b2lkIDAsY2VsbENsYXNzOnZvaWQgMCxzaG93Um93R3JvdXA6dm9pZCAwLGZpbHRlcjp2b2lkIDAsaW5pdGlhbEFnZ0Z1bmM6dm9pZCAwLGRlZmF1bHRBZ2dGdW5jOnZvaWQgMCxhZ2dGdW5jOnZvaWQgMCxwaW5uZWQ6dm9pZCAwLGluaXRpYWxQaW5uZWQ6dm9pZCAwLGNoYXJ0RGF0YVR5cGU6dm9pZCAwLGNlbGxBcmlhUm9sZTp2b2lkIDAsY2VsbEVkaXRvclBvcHVwUG9zaXRpb246dm9pZCAwLGhlYWRlckdyb3VwQ29tcG9uZW50OnZvaWQgMCxoZWFkZXJHcm91cENvbXBvbmVudFBhcmFtczp2b2lkIDAsY2VsbFN0eWxlOnZvaWQgMCxjZWxsUmVuZGVyZXI6dm9pZCAwLGNlbGxSZW5kZXJlclBhcmFtczp2b2lkIDAsY2VsbEVkaXRvcjp2b2lkIDAsY2VsbEVkaXRvclBhcmFtczp2b2lkIDAsZmlsdGVyUGFyYW1zOnZvaWQgMCxwaXZvdFZhbHVlQ29sdW1uOnZvaWQgMCxoZWFkZXJDb21wb25lbnQ6dm9pZCAwLGhlYWRlckNvbXBvbmVudFBhcmFtczp2b2lkIDAsZmxvYXRpbmdGaWx0ZXJDb21wb25lbnQ6dm9pZCAwLGZsb2F0aW5nRmlsdGVyQ29tcG9uZW50UGFyYW1zOnZvaWQgMCx0b29sdGlwQ29tcG9uZW50UGFyYW1zOnZvaWQgMCxyZWZEYXRhOnZvaWQgMCxjb2x1bW5zTWVudVBhcmFtczp2b2lkIDAsY29sdW1uQ2hvb3NlclBhcmFtczp2b2lkIDAsY2hpbGRyZW46dm9pZCAwLHNvcnRpbmdPcmRlcjp2b2lkIDAsYWxsb3dlZEFnZ0Z1bmNzOnZvaWQgMCxtZW51VGFiczp2b2lkIDAscGl2b3RUb3RhbENvbHVtbklkczp2b2lkIDAsY2VsbENsYXNzUnVsZXM6dm9pZCAwLGljb25zOnZvaWQgMCxzb3J0SW5kZXg6dm9pZCAwLGluaXRpYWxTb3J0SW5kZXg6dm9pZCAwLGZsZXg6dm9pZCAwLGluaXRpYWxGbGV4OnZvaWQgMCx3aWR0aDp2b2lkIDAsaW5pdGlhbFdpZHRoOnZvaWQgMCxtaW5XaWR0aDp2b2lkIDAsbWF4V2lkdGg6dm9pZCAwLHJvd0dyb3VwSW5kZXg6dm9pZCAwLGluaXRpYWxSb3dHcm91cEluZGV4OnZvaWQgMCxwaXZvdEluZGV4OnZvaWQgMCxpbml0aWFsUGl2b3RJbmRleDp2b2lkIDAsc3VwcHJlc3NDZWxsRmxhc2g6dm9pZCAwLHN1cHByZXNzQ29sdW1uc1Rvb2xQYW5lbDp2b2lkIDAsc3VwcHJlc3NGaWx0ZXJzVG9vbFBhbmVsOnZvaWQgMCxvcGVuQnlEZWZhdWx0OnZvaWQgMCxtYXJyeUNoaWxkcmVuOnZvaWQgMCxzdXBwcmVzc1N0aWNreUxhYmVsOnZvaWQgMCxoaWRlOnZvaWQgMCxpbml0aWFsSGlkZTp2b2lkIDAscm93R3JvdXA6dm9pZCAwLGluaXRpYWxSb3dHcm91cDp2b2lkIDAscGl2b3Q6dm9pZCAwLGluaXRpYWxQaXZvdDp2b2lkIDAsY2hlY2tib3hTZWxlY3Rpb246dm9pZCAwLHNob3dEaXNhYmxlZENoZWNrYm94ZXM6dm9pZCAwLGhlYWRlckNoZWNrYm94U2VsZWN0aW9uOnZvaWQgMCxoZWFkZXJDaGVja2JveFNlbGVjdGlvbkZpbHRlcmVkT25seTp2b2lkIDAsaGVhZGVyQ2hlY2tib3hTZWxlY3Rpb25DdXJyZW50UGFnZU9ubHk6dm9pZCAwLHN1cHByZXNzTWVudTp2b2lkIDAsc3VwcHJlc3NIZWFkZXJNZW51QnV0dG9uOnZvaWQgMCxzdXBwcmVzc01vdmFibGU6dm9pZCAwLGxvY2tQb3NpdGlvbjp2b2lkIDAsbG9ja1Zpc2libGU6dm9pZCAwLGxvY2tQaW5uZWQ6dm9pZCAwLHVuU29ydEljb246dm9pZCAwLHN1cHByZXNzU2l6ZVRvRml0OnZvaWQgMCxzdXBwcmVzc0F1dG9TaXplOnZvaWQgMCxlbmFibGVSb3dHcm91cDp2b2lkIDAsZW5hYmxlUGl2b3Q6dm9pZCAwLGVuYWJsZVZhbHVlOnZvaWQgMCxlZGl0YWJsZTp2b2lkIDAsc3VwcHJlc3NQYXN0ZTp2b2lkIDAsc3VwcHJlc3NOYXZpZ2FibGU6dm9pZCAwLGVuYWJsZUNlbGxDaGFuZ2VGbGFzaDp2b2lkIDAscm93RHJhZzp2b2lkIDAsZG5kU291cmNlOnZvaWQgMCxhdXRvSGVpZ2h0OnZvaWQgMCx3cmFwVGV4dDp2b2lkIDAsc29ydGFibGU6dm9pZCAwLHJlc2l6YWJsZTp2b2lkIDAsc2luZ2xlQ2xpY2tFZGl0OnZvaWQgMCxmbG9hdGluZ0ZpbHRlcjp2b2lkIDAsY2VsbEVkaXRvclBvcHVwOnZvaWQgMCxzdXBwcmVzc0ZpbGxIYW5kbGU6dm9pZCAwLHdyYXBIZWFkZXJUZXh0OnZvaWQgMCxhdXRvSGVhZGVySGVpZ2h0OnZvaWQgMCxkbmRTb3VyY2VPblJvd0RyYWc6dm9pZCAwLHZhbHVlR2V0dGVyOnZvaWQgMCx2YWx1ZVNldHRlcjp2b2lkIDAsZmlsdGVyVmFsdWVHZXR0ZXI6dm9pZCAwLGtleUNyZWF0b3I6dm9pZCAwLHZhbHVlRm9ybWF0dGVyOnZvaWQgMCx2YWx1ZVBhcnNlcjp2b2lkIDAsY29tcGFyYXRvcjp2b2lkIDAsZXF1YWxzOnZvaWQgMCxwaXZvdENvbXBhcmF0b3I6dm9pZCAwLHN1cHByZXNzS2V5Ym9hcmRFdmVudDp2b2lkIDAsc3VwcHJlc3NIZWFkZXJLZXlib2FyZEV2ZW50OnZvaWQgMCxjb2xTcGFuOnZvaWQgMCxyb3dTcGFuOnZvaWQgMCxnZXRRdWlja0ZpbHRlclRleHQ6dm9pZCAwLG9uQ2VsbFZhbHVlQ2hhbmdlZDp2b2lkIDAsb25DZWxsQ2xpY2tlZDp2b2lkIDAsb25DZWxsRG91YmxlQ2xpY2tlZDp2b2lkIDAsb25DZWxsQ29udGV4dE1lbnU6dm9pZCAwLHJvd0RyYWdUZXh0OnZvaWQgMCx0b29sdGlwVmFsdWVHZXR0ZXI6dm9pZCAwLGNlbGxSZW5kZXJlclNlbGVjdG9yOnZvaWQgMCxjZWxsRWRpdG9yU2VsZWN0b3I6dm9pZCAwLHN1cHByZXNzU3BhbkhlYWRlckhlaWdodDp2b2lkIDAsdXNlVmFsdWVGb3JtYXR0ZXJGb3JFeHBvcnQ6dm9pZCAwLHVzZVZhbHVlUGFyc2VyRm9ySW1wb3J0OnZvaWQgMCxtYWluTWVudUl0ZW1zOnZvaWQgMCxjb250ZXh0TWVudUl0ZW1zOnZvaWQgMCxzdXBwcmVzc0Zsb2F0aW5nRmlsdGVyQnV0dG9uOnZvaWQgMCxzdXBwcmVzc0hlYWRlckZpbHRlckJ1dHRvbjp2b2lkIDAsc3VwcHJlc3NIZWFkZXJDb250ZXh0TWVudTp2b2lkIDB9LEZuLkFMTF9QUk9QRVJUSUVTPU9iamVjdC5rZXlzKEZuLkNvbERlZlByb3BlcnR5TWFwKSxmdW5jdGlvbihlKXtlW2UuU0lOR0xFX1NIRUVUPTBdPSJTSU5HTEVfU0hFRVQiLGVbZS5NVUxUSV9TSEVFVD0xXT0iTVVMVElfU0hFRVQifShJbnx8KEluPXt9KSk7dmFyIE5uPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBHbj1jbGFzcyBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmRyYWdFbmRGdW5jdGlvbnM9W10sdGhpcy5kcmFnU291cmNlcz1bXX1yZW1vdmVBbGxMaXN0ZW5lcnMoKXt0aGlzLmRyYWdTb3VyY2VzLmZvckVhY2godGhpcy5yZW1vdmVMaXN0ZW5lci5iaW5kKHRoaXMpKSx0aGlzLmRyYWdTb3VyY2VzLmxlbmd0aD0wfXJlbW92ZUxpc3RlbmVyKGUpe2NvbnN0IHQ9ZS5kcmFnU291cmNlLmVFbGVtZW50LGk9ZS5tb3VzZURvd25MaXN0ZW5lcjtpZih0LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsaSksZS50b3VjaEVuYWJsZWQpe2NvbnN0IGk9ZS50b3VjaFN0YXJ0TGlzdGVuZXI7dC5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IixpLHtwYXNzaXZlOiEwfSl9fXJlbW92ZURyYWdTb3VyY2UoZSl7Y29uc3QgdD10aGlzLmRyYWdTb3VyY2VzLmZpbmQodD0+dC5kcmFnU291cmNlPT09ZSk7dCYmKHRoaXMucmVtb3ZlTGlzdGVuZXIodCksSWUodGhpcy5kcmFnU291cmNlcyx0KSl9aXNEcmFnZ2luZygpe3JldHVybiB0aGlzLmRyYWdnaW5nfWFkZERyYWdTb3VyY2UoZSl7Y29uc3QgdD10aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyxlKSx7ZUVsZW1lbnQ6aSxpbmNsdWRlVG91Y2g6cyxzdG9wUHJvcGFnYXRpb25Gb3JUb3VjaDpyfT1lO2kuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIix0KTtsZXQgbz1udWxsO2NvbnN0IG49dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc1RvdWNoIik7cyYmIW4mJihvPXQ9Pnt0cyh0LnRhcmdldCl8fCh0LmNhbmNlbGFibGUmJih0LnByZXZlbnREZWZhdWx0KCksciYmdC5zdG9wUHJvcGFnYXRpb24oKSksdGhpcy5vblRvdWNoU3RhcnQoZSx0KSl9LGkuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsbyx7cGFzc2l2ZTohMX0pKSx0aGlzLmRyYWdTb3VyY2VzLnB1c2goe2RyYWdTb3VyY2U6ZSxtb3VzZURvd25MaXN0ZW5lcjp0LHRvdWNoU3RhcnRMaXN0ZW5lcjpvLHRvdWNoRW5hYmxlZDohIXN9KX1nZXRTdGFydFRhcmdldCgpe3JldHVybiB0aGlzLnN0YXJ0VGFyZ2V0fW9uVG91Y2hTdGFydChlLHQpe3RoaXMuY3VycmVudERyYWdQYXJhbXM9ZSx0aGlzLmRyYWdnaW5nPSExO2NvbnN0IGk9dC50b3VjaGVzWzBdO3RoaXMudG91Y2hMYXN0VGltZT1pLHRoaXMudG91Y2hTdGFydD1pO2NvbnN0IHM9dD0+dGhpcy5vblRvdWNoVXAodCxlLmVFbGVtZW50KSxyPXQudGFyZ2V0LG89W3t0YXJnZXQ6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um9vdE5vZGUoKSx0eXBlOiJ0b3VjaG1vdmUiLGxpc3RlbmVyOmU9PntlLmNhbmNlbGFibGUmJmUucHJldmVudERlZmF1bHQoKX0sb3B0aW9uczp7cGFzc2l2ZTohMX19LHt0YXJnZXQ6cix0eXBlOiJ0b3VjaG1vdmUiLGxpc3RlbmVyOnQ9PnRoaXMub25Ub3VjaE1vdmUodCxlLmVFbGVtZW50KSxvcHRpb25zOntwYXNzaXZlOiEwfX0se3RhcmdldDpyLHR5cGU6InRvdWNoZW5kIixsaXN0ZW5lcjpzLG9wdGlvbnM6e3Bhc3NpdmU6ITB9fSx7dGFyZ2V0OnIsdHlwZToidG91Y2hjYW5jZWwiLGxpc3RlbmVyOnMsb3B0aW9uczp7cGFzc2l2ZTohMH19XTt0aGlzLmFkZFRlbXBvcmFyeUV2ZW50cyhvKSwwPT09ZS5kcmFnU3RhcnRQaXhlbHMmJnRoaXMub25Db21tb25Nb3ZlKGksdGhpcy50b3VjaFN0YXJ0LGUuZUVsZW1lbnQpfW9uTW91c2VEb3duKGUsdCl7Y29uc3QgaT10O2lmKGUuc2tpcE1vdXNlRXZlbnQmJmUuc2tpcE1vdXNlRXZlbnQodCkpcmV0dXJuO2lmKGkuX2FscmVhZHlQcm9jZXNzZWRCeURyYWdTZXJ2aWNlKXJldHVybjtpZihpLl9hbHJlYWR5UHJvY2Vzc2VkQnlEcmFnU2VydmljZT0hMCwwIT09dC5idXR0b24pcmV0dXJuO3RoaXMuc2hvdWxkUHJldmVudE1vdXNlRXZlbnQodCkmJnQucHJldmVudERlZmF1bHQoKSx0aGlzLmN1cnJlbnREcmFnUGFyYW1zPWUsdGhpcy5kcmFnZ2luZz0hMSx0aGlzLm1vdXNlU3RhcnRFdmVudD10LHRoaXMuc3RhcnRUYXJnZXQ9dC50YXJnZXQ7Y29uc3Qgcz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRSb290Tm9kZSgpLHI9W3t0YXJnZXQ6cyx0eXBlOiJtb3VzZW1vdmUiLGxpc3RlbmVyOnQ9PnRoaXMub25Nb3VzZU1vdmUodCxlLmVFbGVtZW50KX0se3RhcmdldDpzLHR5cGU6Im1vdXNldXAiLGxpc3RlbmVyOnQ9PnRoaXMub25Nb3VzZVVwKHQsZS5lRWxlbWVudCl9LHt0YXJnZXQ6cyx0eXBlOiJjb250ZXh0bWVudSIsbGlzdGVuZXI6ZT0+ZS5wcmV2ZW50RGVmYXVsdCgpfV07dGhpcy5hZGRUZW1wb3JhcnlFdmVudHMociksMD09PWUuZHJhZ1N0YXJ0UGl4ZWxzJiZ0aGlzLm9uTW91c2VNb3ZlKHQsZS5lRWxlbWVudCl9YWRkVGVtcG9yYXJ5RXZlbnRzKGUpe2UuZm9yRWFjaChlPT57Y29uc3R7dGFyZ2V0OnQsdHlwZTppLGxpc3RlbmVyOnMsb3B0aW9uczpyfT1lO3QuYWRkRXZlbnRMaXN0ZW5lcihpLHMscil9KSx0aGlzLmRyYWdFbmRGdW5jdGlvbnMucHVzaCgoKT0+e2UuZm9yRWFjaChlPT57Y29uc3R7dGFyZ2V0OnQsdHlwZTppLGxpc3RlbmVyOnMsb3B0aW9uczpyfT1lO3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLHMscil9KX0pfWlzRXZlbnROZWFyU3RhcnRFdmVudChlLHQpe2NvbnN0e2RyYWdTdGFydFBpeGVsczppfT10aGlzLmN1cnJlbnREcmFnUGFyYW1zO3JldHVybiBYcyhlLHQsYihpKT9pOjQpfWdldEZpcnN0QWN0aXZlVG91Y2goZSl7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0KyspaWYoZVt0XS5pZGVudGlmaWVyPT09dGhpcy50b3VjaFN0YXJ0LmlkZW50aWZpZXIpcmV0dXJuIGVbdF07cmV0dXJuIG51bGx9b25Db21tb25Nb3ZlKGUsdCxpKXtpZighdGhpcy5kcmFnZ2luZyl7aWYoIXRoaXMuZHJhZ2dpbmcmJnRoaXMuaXNFdmVudE5lYXJTdGFydEV2ZW50KGUsdCkpcmV0dXJuO3RoaXMuZHJhZ2dpbmc9ITA7Y29uc3Qgcz17dHlwZTpsdC5FVkVOVF9EUkFHX1NUQVJURUQsdGFyZ2V0Oml9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQocyksdGhpcy5jdXJyZW50RHJhZ1BhcmFtcy5vbkRyYWdTdGFydCh0KSx0aGlzLmN1cnJlbnREcmFnUGFyYW1zLm9uRHJhZ2dpbmcodCl9dGhpcy5jdXJyZW50RHJhZ1BhcmFtcy5vbkRyYWdnaW5nKGUpfW9uVG91Y2hNb3ZlKGUsdCl7Y29uc3QgaT10aGlzLmdldEZpcnN0QWN0aXZlVG91Y2goZS50b3VjaGVzKTtpJiZ0aGlzLm9uQ29tbW9uTW92ZShpLHRoaXMudG91Y2hTdGFydCx0KX1vbk1vdXNlTW92ZShlLHQpe3ZhciBpO2lmKFRpKCkpe251bGw9PT0oaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb2N1bWVudCgpLmdldFNlbGVjdGlvbigpKXx8dm9pZCAwPT09aXx8aS5yZW1vdmVBbGxSYW5nZXMoKX10aGlzLnNob3VsZFByZXZlbnRNb3VzZUV2ZW50KGUpJiZlLnByZXZlbnREZWZhdWx0KCksdGhpcy5vbkNvbW1vbk1vdmUoZSx0aGlzLm1vdXNlU3RhcnRFdmVudCx0KX1zaG91bGRQcmV2ZW50TW91c2VFdmVudChlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlQ2VsbFRleHRTZWxlY3Rpb24iKSxpPSJtb3VzZW1vdmUiPT09ZS50eXBlO3JldHVybiB0JiZpJiZlLmNhbmNlbGFibGUmJnRoaXMubW91c2VFdmVudFNlcnZpY2UuaXNFdmVudEZyb21UaGlzR3JpZChlKSYmIXRoaXMuaXNPdmVyRm9ybUZpZWxkRWxlbWVudChlKX1pc092ZXJGb3JtRmllbGRFbGVtZW50KGUpe2NvbnN0IHQ9ZS50YXJnZXQsaT1udWxsPT10P3ZvaWQgMDp0LnRhZ05hbWUudG9Mb2NhbGVMb3dlckNhc2UoKTtyZXR1cm4hIShudWxsPT1pP3ZvaWQgMDppLm1hdGNoKCJeYSR8dGV4dGFyZWF8aW5wdXR8c2VsZWN0fGJ1dHRvbiIpKX1vblRvdWNoVXAoZSx0KXtsZXQgaT10aGlzLmdldEZpcnN0QWN0aXZlVG91Y2goZS5jaGFuZ2VkVG91Y2hlcyk7aXx8KGk9dGhpcy50b3VjaExhc3RUaW1lKSx0aGlzLm9uVXBDb21tb24oaSx0KX1vbk1vdXNlVXAoZSx0KXt0aGlzLm9uVXBDb21tb24oZSx0KX1vblVwQ29tbW9uKGUsdCl7aWYodGhpcy5kcmFnZ2luZyl7dGhpcy5kcmFnZ2luZz0hMSx0aGlzLmN1cnJlbnREcmFnUGFyYW1zLm9uRHJhZ1N0b3AoZSk7Y29uc3QgaT17dHlwZTpsdC5FVkVOVF9EUkFHX1NUT1BQRUQsdGFyZ2V0OnR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoaSl9dGhpcy5tb3VzZVN0YXJ0RXZlbnQ9bnVsbCx0aGlzLnN0YXJ0VGFyZ2V0PW51bGwsdGhpcy50b3VjaFN0YXJ0PW51bGwsdGhpcy50b3VjaExhc3RUaW1lPW51bGwsdGhpcy5jdXJyZW50RHJhZ1BhcmFtcz1udWxsLHRoaXMuZHJhZ0VuZEZ1bmN0aW9ucy5mb3JFYWNoKGU9PmUoKSksdGhpcy5kcmFnRW5kRnVuY3Rpb25zLmxlbmd0aD0wfX07Tm4oW2NlKCJtb3VzZUV2ZW50U2VydmljZSIpXSxHbi5wcm90b3R5cGUsIm1vdXNlRXZlbnRTZXJ2aWNlIix2b2lkIDApLE5uKFtsZV0sR24ucHJvdG90eXBlLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLG51bGwpLEduPU5uKFtkZSgiZHJhZ1NlcnZpY2UiKV0sR24pO2NsYXNzIGtue2NvbnN0cnVjdG9yKGUpe3RoaXMudGlja2luZ0ludGVydmFsPW51bGwsdGhpcy5vblNjcm9sbENhbGxiYWNrPW51bGwsdGhpcy5zY3JvbGxDb250YWluZXI9ZS5zY3JvbGxDb250YWluZXIsdGhpcy5zY3JvbGxIb3Jpem9udGFsbHk9LTEhPT1lLnNjcm9sbEF4aXMuaW5kZXhPZigieCIpLHRoaXMuc2Nyb2xsVmVydGljYWxseT0tMSE9PWUuc2Nyb2xsQXhpcy5pbmRleE9mKCJ5IiksdGhpcy5zY3JvbGxCeVRpY2s9bnVsbCE9ZS5zY3JvbGxCeVRpY2s/ZS5zY3JvbGxCeVRpY2s6MjAsZS5vblNjcm9sbENhbGxiYWNrJiYodGhpcy5vblNjcm9sbENhbGxiYWNrPWUub25TY3JvbGxDYWxsYmFjayksdGhpcy5zY3JvbGxWZXJ0aWNhbGx5JiYodGhpcy5nZXRWZXJ0aWNhbFBvc2l0aW9uPWUuZ2V0VmVydGljYWxQb3NpdGlvbix0aGlzLnNldFZlcnRpY2FsUG9zaXRpb249ZS5zZXRWZXJ0aWNhbFBvc2l0aW9uKSx0aGlzLnNjcm9sbEhvcml6b250YWxseSYmKHRoaXMuZ2V0SG9yaXpvbnRhbFBvc2l0aW9uPWUuZ2V0SG9yaXpvbnRhbFBvc2l0aW9uLHRoaXMuc2V0SG9yaXpvbnRhbFBvc2l0aW9uPWUuc2V0SG9yaXpvbnRhbFBvc2l0aW9uKSx0aGlzLnNob3VsZFNraXBWZXJ0aWNhbFNjcm9sbD1lLnNob3VsZFNraXBWZXJ0aWNhbFNjcm9sbHx8KCgpPT4hMSksdGhpcy5zaG91bGRTa2lwSG9yaXpvbnRhbFNjcm9sbD1lLnNob3VsZFNraXBIb3Jpem9udGFsU2Nyb2xsfHwoKCk9PiExKX1jaGVjayhlLHQ9ITEpe2NvbnN0IGk9dHx8dGhpcy5zaG91bGRTa2lwVmVydGljYWxTY3JvbGwoKTtpZihpJiZ0aGlzLnNob3VsZFNraXBIb3Jpem9udGFsU2Nyb2xsKCkpcmV0dXJuO2NvbnN0IHM9dGhpcy5zY3JvbGxDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscj10aGlzLnNjcm9sbEJ5VGljazt0aGlzLnRpY2tMZWZ0PWUuY2xpZW50WDxzLmxlZnQrcix0aGlzLnRpY2tSaWdodD1lLmNsaWVudFg+cy5yaWdodC1yLHRoaXMudGlja1VwPWUuY2xpZW50WTxzLnRvcCtyJiYhaSx0aGlzLnRpY2tEb3duPWUuY2xpZW50WT5zLmJvdHRvbS1yJiYhaSx0aGlzLnRpY2tMZWZ0fHx0aGlzLnRpY2tSaWdodHx8dGhpcy50aWNrVXB8fHRoaXMudGlja0Rvd24/dGhpcy5lbnN1cmVUaWNraW5nU3RhcnRlZCgpOnRoaXMuZW5zdXJlQ2xlYXJlZCgpfWVuc3VyZVRpY2tpbmdTdGFydGVkKCl7bnVsbD09PXRoaXMudGlja2luZ0ludGVydmFsJiYodGhpcy50aWNraW5nSW50ZXJ2YWw9d2luZG93LnNldEludGVydmFsKHRoaXMuZG9UaWNrLmJpbmQodGhpcyksMTAwKSx0aGlzLnRpY2tDb3VudD0wKX1kb1RpY2soKXtsZXQgZTtpZih0aGlzLnRpY2tDb3VudCsrLGU9dGhpcy50aWNrQ291bnQ+MjA/MjAwOnRoaXMudGlja0NvdW50PjEwPzgwOjQwLHRoaXMuc2Nyb2xsVmVydGljYWxseSl7Y29uc3QgdD10aGlzLmdldFZlcnRpY2FsUG9zaXRpb24oKTt0aGlzLnRpY2tVcCYmdGhpcy5zZXRWZXJ0aWNhbFBvc2l0aW9uKHQtZSksdGhpcy50aWNrRG93biYmdGhpcy5zZXRWZXJ0aWNhbFBvc2l0aW9uKHQrZSl9aWYodGhpcy5zY3JvbGxIb3Jpem9udGFsbHkpe2NvbnN0IHQ9dGhpcy5nZXRIb3Jpem9udGFsUG9zaXRpb24oKTt0aGlzLnRpY2tMZWZ0JiZ0aGlzLnNldEhvcml6b250YWxQb3NpdGlvbih0LWUpLHRoaXMudGlja1JpZ2h0JiZ0aGlzLnNldEhvcml6b250YWxQb3NpdGlvbih0K2UpfXRoaXMub25TY3JvbGxDYWxsYmFjayYmdGhpcy5vblNjcm9sbENhbGxiYWNrKCl9ZW5zdXJlQ2xlYXJlZCgpe3RoaXMudGlja2luZ0ludGVydmFsJiYod2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aWNraW5nSW50ZXJ2YWwpLHRoaXMudGlja2luZ0ludGVydmFsPW51bGwpfX12YXIgX249ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y29uc3QgVm49ImFnLWxpc3QtaXRlbS1ob3ZlcmVkIjtjbGFzcyBCbiBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcigpLHRoaXMuY29tcD1lLHRoaXMudmlydHVhbExpc3Q9dCx0aGlzLnBhcmFtcz1pLHRoaXMuY3VycmVudERyYWdWYWx1ZT1udWxsLHRoaXMubGFzdEhvdmVyZWRMaXN0SXRlbT1udWxsfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnBhcmFtcy5ldmVudFNvdXJjZSx0aGlzLnBhcmFtcy5saXN0SXRlbURyYWdTdGFydEV2ZW50LHRoaXMubGlzdEl0ZW1EcmFnU3RhcnQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5wYXJhbXMuZXZlbnRTb3VyY2UsdGhpcy5wYXJhbXMubGlzdEl0ZW1EcmFnRW5kRXZlbnQsdGhpcy5saXN0SXRlbURyYWdFbmQuYmluZCh0aGlzKSksdGhpcy5jcmVhdGVEcm9wVGFyZ2V0KCksdGhpcy5jcmVhdGVBdXRvU2Nyb2xsU2VydmljZSgpfWxpc3RJdGVtRHJhZ1N0YXJ0KGUpe3RoaXMuY3VycmVudERyYWdWYWx1ZT10aGlzLnBhcmFtcy5nZXRDdXJyZW50RHJhZ1ZhbHVlKGUpLHRoaXMubW92ZUJsb2NrZWQ9dGhpcy5wYXJhbXMuaXNNb3ZlQmxvY2tlZCh0aGlzLmN1cnJlbnREcmFnVmFsdWUpfWxpc3RJdGVtRHJhZ0VuZCgpe3dpbmRvdy5zZXRUaW1lb3V0KCgpPT57dGhpcy5jdXJyZW50RHJhZ1ZhbHVlPW51bGwsdGhpcy5tb3ZlQmxvY2tlZD0hMX0sMTApfWNyZWF0ZURyb3BUYXJnZXQoKXtjb25zdCBlPXtpc0ludGVyZXN0ZWRJbjplPT5lPT09dGhpcy5wYXJhbXMuZHJhZ1NvdXJjZVR5cGUsZ2V0SWNvbk5hbWU6KCk9PnRoaXMubW92ZUJsb2NrZWQ/R28uSUNPTl9QSU5ORUQ6R28uSUNPTl9NT1ZFLGdldENvbnRhaW5lcjooKT0+dGhpcy5jb21wLmdldEd1aSgpLG9uRHJhZ2dpbmc6ZT0+dGhpcy5vbkRyYWdnaW5nKGUpLG9uRHJhZ1N0b3A6KCk9PnRoaXMub25EcmFnU3RvcCgpLG9uRHJhZ0xlYXZlOigpPT50aGlzLm9uRHJhZ0xlYXZlKCl9O3RoaXMuZHJhZ0FuZERyb3BTZXJ2aWNlLmFkZERyb3BUYXJnZXQoZSl9Y3JlYXRlQXV0b1Njcm9sbFNlcnZpY2UoKXtjb25zdCBlPXRoaXMudmlydHVhbExpc3QuZ2V0R3VpKCk7dGhpcy5hdXRvU2Nyb2xsU2VydmljZT1uZXcga24oe3Njcm9sbENvbnRhaW5lcjplLHNjcm9sbEF4aXM6InkiLGdldFZlcnRpY2FsUG9zaXRpb246KCk9PmUuc2Nyb2xsVG9wLHNldFZlcnRpY2FsUG9zaXRpb246dD0+ZS5zY3JvbGxUb3A9dH0pfW9uRHJhZ2dpbmcoZSl7aWYoIXRoaXMuY3VycmVudERyYWdWYWx1ZXx8dGhpcy5tb3ZlQmxvY2tlZClyZXR1cm47Y29uc3QgdD10aGlzLmdldExpc3REcmFnSXRlbShlKSxpPXRoaXMudmlydHVhbExpc3QuZ2V0Q29tcG9uZW50QXQodC5yb3dJbmRleCk7aWYoIWkpcmV0dXJuO2NvbnN0IHM9aS5nZXRHdWkoKS5wYXJlbnRFbGVtZW50O3RoaXMubGFzdEhvdmVyZWRMaXN0SXRlbSYmdGhpcy5sYXN0SG92ZXJlZExpc3RJdGVtLnJvd0luZGV4PT09dC5yb3dJbmRleCYmdGhpcy5sYXN0SG92ZXJlZExpc3RJdGVtLnBvc2l0aW9uPT09dC5wb3NpdGlvbnx8KHRoaXMuYXV0b1Njcm9sbFNlcnZpY2UuY2hlY2soZS5ldmVudCksdGhpcy5jbGVhckhvdmVyZWRJdGVtcygpLHRoaXMubGFzdEhvdmVyZWRMaXN0SXRlbT10LFFpKHMsVm4pLFFpKHMsImFnLWl0ZW0taGlnaGxpZ2h0LSIrdC5wb3NpdGlvbikpfWdldExpc3REcmFnSXRlbShlKXtjb25zdCB0PXRoaXMudmlydHVhbExpc3QuZ2V0R3VpKCksaT1wYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLnBhZGRpbmdUb3ApLHM9dGhpcy52aXJ0dWFsTGlzdC5nZXRSb3dIZWlnaHQoKSxyPXRoaXMudmlydHVhbExpc3QuZ2V0U2Nyb2xsVG9wKCksbz1NYXRoLm1heCgwLChlLnktaStyKS9zKSxuPXRoaXMucGFyYW1zLmdldE51bVJvd3ModGhpcy5jb21wKS0xLGE9MHxNYXRoLm1pbihuLG8pO3JldHVybntyb3dJbmRleDphLHBvc2l0aW9uOk1hdGgucm91bmQobyk+b3x8bz5uPyJib3R0b20iOiJ0b3AiLGNvbXBvbmVudDp0aGlzLnZpcnR1YWxMaXN0LmdldENvbXBvbmVudEF0KGEpfX1vbkRyYWdTdG9wKCl7dGhpcy5tb3ZlQmxvY2tlZHx8KHRoaXMucGFyYW1zLm1vdmVJdGVtKHRoaXMuY3VycmVudERyYWdWYWx1ZSx0aGlzLmxhc3RIb3ZlcmVkTGlzdEl0ZW0pLHRoaXMuY2xlYXJIb3ZlcmVkSXRlbXMoKSx0aGlzLmF1dG9TY3JvbGxTZXJ2aWNlLmVuc3VyZUNsZWFyZWQoKSl9b25EcmFnTGVhdmUoKXt0aGlzLmNsZWFySG92ZXJlZEl0ZW1zKCksdGhpcy5hdXRvU2Nyb2xsU2VydmljZS5lbnN1cmVDbGVhcmVkKCl9Y2xlYXJIb3ZlcmVkSXRlbXMoKXt0aGlzLnZpcnR1YWxMaXN0LmdldEd1aSgpLnF1ZXJ5U2VsZWN0b3JBbGwoIi4iK1ZuKS5mb3JFYWNoKGU9PntbVm4sImFnLWl0ZW0taGlnaGxpZ2h0LXRvcCIsImFnLWl0ZW0taGlnaGxpZ2h0LWJvdHRvbSJdLmZvckVhY2godD0+e2UuY2xhc3NMaXN0LnJlbW92ZSh0KX0pfSksdGhpcy5sYXN0SG92ZXJlZExpc3RJdGVtPW51bGx9fXZhciBIbjtfbihbY2UoImRyYWdBbmREcm9wU2VydmljZSIpXSxCbi5wcm90b3R5cGUsImRyYWdBbmREcm9wU2VydmljZSIsdm9pZCAwKSxfbihbYWVdLEJuLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksZnVuY3Rpb24oZSl7ZVtlLkFib3ZlPTBdPSJBYm92ZSIsZVtlLkJlbG93PTFdPSJCZWxvdyJ9KEhufHwoSG49e30pKTt2YXIgV249ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07ZnVuY3Rpb24gam4oZSl7Y29uc3QgdD1lO3JldHVybiBudWxsIT10JiZudWxsIT10LmdldEZyYW1ld29ya0NvbXBvbmVudEluc3RhbmNlP3QuZ2V0RnJhbWV3b3JrQ29tcG9uZW50SW5zdGFuY2UoKTplfWxldCBVbj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuZGV0YWlsR3JpZEluZm9NYXA9e30sdGhpcy5kZXN0cm95Q2FsbGVkPSExfWluaXQoKXtzd2l0Y2godGhpcy5yb3dNb2RlbC5nZXRUeXBlKCkpe2Nhc2UiY2xpZW50U2lkZSI6dGhpcy5jbGllbnRTaWRlUm93TW9kZWw9dGhpcy5yb3dNb2RlbDticmVhaztjYXNlImluZmluaXRlIjp0aGlzLmluZmluaXRlUm93TW9kZWw9dGhpcy5yb3dNb2RlbDticmVhaztjYXNlInNlcnZlclNpZGUiOnRoaXMuc2VydmVyU2lkZVJvd01vZGVsPXRoaXMucm93TW9kZWx9dGhpcy5jdHJsc1NlcnZpY2Uud2hlblJlYWR5KCgpPT57dGhpcy5ncmlkQm9keUN0cmw9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0R3JpZEJvZHlDdHJsKCl9KX1fX2dldEFsaWduZWRHcmlkU2VydmljZSgpe3JldHVybiB0aGlzLmFsaWduZWRHcmlkc1NlcnZpY2V9X19nZXRDb250ZXh0KCl7cmV0dXJuIHRoaXMuY29udGV4dH1fX2dldE1vZGVsKCl7cmV0dXJuIHRoaXMucm93TW9kZWx9Z2V0R3JpZElkKCl7cmV0dXJuIHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKX1hZGREZXRhaWxHcmlkSW5mbyhlLHQpe3RoaXMuZGV0YWlsR3JpZEluZm9NYXBbZV09dH1yZW1vdmVEZXRhaWxHcmlkSW5mbyhlKXt0aGlzLmRldGFpbEdyaWRJbmZvTWFwW2VdPXZvaWQgMH1nZXREZXRhaWxHcmlkSW5mbyhlKXtyZXR1cm4gdGhpcy5kZXRhaWxHcmlkSW5mb01hcFtlXX1mb3JFYWNoRGV0YWlsR3JpZEluZm8oZSl7bGV0IHQ9MDtGKHRoaXMuZGV0YWlsR3JpZEluZm9NYXAsKGkscyk9PntiKHMpJiYoZShzLHQpLHQrKyl9KX1nZXREYXRhQXNDc3YoZSl7aWYocmUuX19hc3NlcnRSZWdpc3RlcmVkKHNlLkNzdkV4cG9ydE1vZHVsZSwiYXBpLmdldERhdGFBc0NzdiIsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKSlyZXR1cm4gdGhpcy5jc3ZDcmVhdG9yLmdldERhdGFBc0NzdihlKX1leHBvcnREYXRhQXNDc3YoZSl7cmUuX19hc3NlcnRSZWdpc3RlcmVkKHNlLkNzdkV4cG9ydE1vZHVsZSwiYXBpLmV4cG9ydERhdGFBc0NTdiIsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKSYmdGhpcy5jc3ZDcmVhdG9yLmV4cG9ydERhdGFBc0NzdihlKX1hc3NlcnROb3RFeGNlbE11bHRpU2hlZXQoZSx0KXtyZXR1cm4hIXJlLl9fYXNzZXJ0UmVnaXN0ZXJlZChzZS5FeGNlbEV4cG9ydE1vZHVsZSwiYXBpLiIrZSx0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpJiYodGhpcy5leGNlbENyZWF0b3IuZ2V0RmFjdG9yeU1vZGUoKSE9PUluLk1VTFRJX1NIRUVUfHwoY29uc29sZS53YXJuKCJBRyBHcmlkOiBUaGUgRXhjZWwgRXhwb3J0ZXIgaXMgY3VycmVudGx5IG9uIE11bHRpIFNoZWV0IG1vZGUuIEVuZCB0aGF0IG9wZXJhdGlvbiBieSBjYWxsaW5nICdhcGkuZ2V0TXVsdGlwbGVTaGVldEFzRXhjZWwoKScgb3IgJ2FwaS5leHBvcnRNdWx0aXBsZVNoZWV0c0FzRXhjZWwoKSciKSwhMSkpfWdldERhdGFBc0V4Y2VsKGUpe2lmKHRoaXMuYXNzZXJ0Tm90RXhjZWxNdWx0aVNoZWV0KCJnZXREYXRhQXNFeGNlbCIsZSkpcmV0dXJuIHRoaXMuZXhjZWxDcmVhdG9yLmdldERhdGFBc0V4Y2VsKGUpfWV4cG9ydERhdGFBc0V4Y2VsKGUpe3RoaXMuYXNzZXJ0Tm90RXhjZWxNdWx0aVNoZWV0KCJleHBvcnREYXRhQXNFeGNlbCIsZSkmJnRoaXMuZXhjZWxDcmVhdG9yLmV4cG9ydERhdGFBc0V4Y2VsKGUpfWdldFNoZWV0RGF0YUZvckV4Y2VsKGUpe2lmKHJlLl9fYXNzZXJ0UmVnaXN0ZXJlZChzZS5FeGNlbEV4cG9ydE1vZHVsZSwiYXBpLmdldFNoZWV0RGF0YUZvckV4Y2VsIix0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpKXJldHVybiB0aGlzLmV4Y2VsQ3JlYXRvci5zZXRGYWN0b3J5TW9kZShJbi5NVUxUSV9TSEVFVCksdGhpcy5leGNlbENyZWF0b3IuZ2V0U2hlZXREYXRhRm9yRXhjZWwoZSl9Z2V0TXVsdGlwbGVTaGVldHNBc0V4Y2VsKGUpe2lmKHJlLl9fYXNzZXJ0UmVnaXN0ZXJlZChzZS5FeGNlbEV4cG9ydE1vZHVsZSwiYXBpLmdldE11bHRpcGxlU2hlZXRzQXNFeGNlbCIsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKSlyZXR1cm4gdGhpcy5leGNlbENyZWF0b3IuZ2V0TXVsdGlwbGVTaGVldHNBc0V4Y2VsKGUpfWV4cG9ydE11bHRpcGxlU2hlZXRzQXNFeGNlbChlKXtyZS5fX2Fzc2VydFJlZ2lzdGVyZWQoc2UuRXhjZWxFeHBvcnRNb2R1bGUsImFwaS5leHBvcnRNdWx0aXBsZVNoZWV0c0FzRXhjZWwiLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSkmJnRoaXMuZXhjZWxDcmVhdG9yLmV4cG9ydE11bHRpcGxlU2hlZXRzQXNFeGNlbChlKX1zZXRHcmlkQXJpYVByb3BlcnR5KGUsdCl7aWYoIWUpcmV0dXJuO2NvbnN0IGk9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0R3JpZEJvZHlDdHJsKCkuZ2V0R3VpKCkscz0iYXJpYS0iK2U7bnVsbD09PXQ/aS5yZW1vdmVBdHRyaWJ1dGUocyk6aS5zZXRBdHRyaWJ1dGUocyx0KX1sb2dNaXNzaW5nUm93TW9kZWwoZSwuLi50KXtjb25zb2xlLmVycm9yKGBBRyBHcmlkOiBhcGkuJHtlfSBjYW4gb25seSBiZSBjYWxsZWQgd2hlbiBncmlkT3B0aW9ucy5yb3dNb2RlbFR5cGUgaXMgJHt0LmpvaW4oIiBvciAiKX1gKX1sb2dEZXByZWNhdGlvbihlLHQsaSxzKXtqKGBTaW5jZSAke2V9IGFwaS4ke3R9IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgJHtpfSBpbnN0ZWFkLiAke3N9YCl9Z2V0UGlubmVkVG9wUm93Q291bnQoKXtyZXR1cm4gdGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRUb3BSb3dDb3VudCgpfWdldFBpbm5lZEJvdHRvbVJvd0NvdW50KCl7cmV0dXJuIHRoaXMucGlubmVkUm93TW9kZWwuZ2V0UGlubmVkQm90dG9tUm93Q291bnQoKX1nZXRQaW5uZWRUb3BSb3coZSl7cmV0dXJuIHRoaXMucGlubmVkUm93TW9kZWwuZ2V0UGlubmVkVG9wUm93KGUpfWdldFBpbm5lZEJvdHRvbVJvdyhlKXtyZXR1cm4gdGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRCb3R0b21Sb3coZSl9ZXhwaXJlVmFsdWVDYWNoZSgpe3RoaXMudmFsdWVDYWNoZS5leHBpcmUoKX1nZXRWZXJ0aWNhbFBpeGVsUmFuZ2UoKXtyZXR1cm4gdGhpcy5ncmlkQm9keUN0cmwuZ2V0U2Nyb2xsRmVhdHVyZSgpLmdldFZTY3JvbGxQb3NpdGlvbigpfWdldEhvcml6b250YWxQaXhlbFJhbmdlKCl7cmV0dXJuIHRoaXMuZ3JpZEJvZHlDdHJsLmdldFNjcm9sbEZlYXR1cmUoKS5nZXRIU2Nyb2xsUG9zaXRpb24oKX1yZWZyZXNoQ2VsbHMoZT17fSl7dGhpcy5mcmFtZXdvcmtPdmVycmlkZXMud3JhcEluY29taW5nKCgpPT50aGlzLnJvd1JlbmRlcmVyLnJlZnJlc2hDZWxscyhlKSl9Zmxhc2hDZWxscyhlPXt9KXtjb25zdCB0PWU9PmooYFNpbmNlIHYzMS4xIGFwaS5mbGFzaENlbGxzIHBhcmFtZXRlciAnJHtlfURlbGF5JyBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICcke2V9RHVyYXRpb24nIGluc3RlYWQuYCk7YihlLmZhZGVEZWxheSkmJnQoImZhZGUiKSxiKGUuZmxhc2hEZWxheSkmJnQoImZsYXNoIiksdGhpcy5mcmFtZXdvcmtPdmVycmlkZXMud3JhcEluY29taW5nKCgpPT50aGlzLnJvd1JlbmRlcmVyLmZsYXNoQ2VsbHMoZSkpfXJlZHJhd1Jvd3MoZT17fSl7Y29uc3QgdD1lP2Uucm93Tm9kZXM6dm9pZCAwO3RoaXMuZnJhbWV3b3JrT3ZlcnJpZGVzLndyYXBJbmNvbWluZygoKT0+dGhpcy5yb3dSZW5kZXJlci5yZWRyYXdSb3dzKHQpKX1yZWZyZXNoSGVhZGVyKCl7dGhpcy5mcmFtZXdvcmtPdmVycmlkZXMud3JhcEluY29taW5nKCgpPT50aGlzLmN0cmxzU2VydmljZS5nZXRIZWFkZXJSb3dDb250YWluZXJDdHJscygpLmZvckVhY2goZT0+ZS5yZWZyZXNoKCkpKX1pc0FueUZpbHRlclByZXNlbnQoKXtyZXR1cm4gdGhpcy5maWx0ZXJNYW5hZ2VyLmlzQW55RmlsdGVyUHJlc2VudCgpfWlzQ29sdW1uRmlsdGVyUHJlc2VudCgpe3JldHVybiB0aGlzLmZpbHRlck1hbmFnZXIuaXNDb2x1bW5GaWx0ZXJQcmVzZW50KCl8fHRoaXMuZmlsdGVyTWFuYWdlci5pc0FnZ3JlZ2F0ZUZpbHRlclByZXNlbnQoKX1pc1F1aWNrRmlsdGVyUHJlc2VudCgpe3JldHVybiB0aGlzLmZpbHRlck1hbmFnZXIuaXNRdWlja0ZpbHRlclByZXNlbnQoKX1nZXRNb2RlbCgpe3JldHVybiBqKCJTaW5jZSB2MzEuMSBnZXRNb2RlbCgpIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgdGhlIGFwcHJvcHJpYXRlIGdyaWQgQVBJIG1ldGhvZHMgaW5zdGVhZC4iKSx0aGlzLnJvd01vZGVsfXNldFJvd05vZGVFeHBhbmRlZChlLHQsaSl7dGhpcy5leHBhbnNpb25TZXJ2aWNlLnNldFJvd05vZGVFeHBhbmRlZChlLHQsaSl9b25Hcm91cEV4cGFuZGVkT3JDb2xsYXBzZWQoKXtFKHRoaXMuY2xpZW50U2lkZVJvd01vZGVsKT90aGlzLmxvZ01pc3NpbmdSb3dNb2RlbCgib25Hcm91cEV4cGFuZGVkT3JDb2xsYXBzZWQiLCJjbGllbnRTaWRlIik6dGhpcy5leHBhbnNpb25TZXJ2aWNlLm9uR3JvdXBFeHBhbmRlZE9yQ29sbGFwc2VkKCl9cmVmcmVzaENsaWVudFNpZGVSb3dNb2RlbChlKXtFKHRoaXMuY2xpZW50U2lkZVJvd01vZGVsKT90aGlzLmxvZ01pc3NpbmdSb3dNb2RlbCgicmVmcmVzaENsaWVudFNpZGVSb3dNb2RlbCIsImNsaWVudFNpZGUiKTp0aGlzLmNsaWVudFNpZGVSb3dNb2RlbC5yZWZyZXNoTW9kZWwoZSl9aXNBbmltYXRpb25GcmFtZVF1ZXVlRW1wdHkoKXtyZXR1cm4gdGhpcy5hbmltYXRpb25GcmFtZVNlcnZpY2UuaXNRdWV1ZUVtcHR5KCl9Zmx1c2hBbGxBbmltYXRpb25GcmFtZXMoKXt0aGlzLmFuaW1hdGlvbkZyYW1lU2VydmljZS5mbHVzaEFsbEZyYW1lcygpfWdldFJvd05vZGUoZSl7cmV0dXJuIHRoaXMucm93TW9kZWwuZ2V0Um93Tm9kZShlKX1nZXRTaXplc0ZvckN1cnJlbnRUaGVtZSgpe3JldHVybntyb3dIZWlnaHQ6dGhpcy5nb3MuZ2V0Um93SGVpZ2h0QXNOdW1iZXIoKSxoZWFkZXJIZWlnaHQ6dGhpcy5jb2x1bW5Nb2RlbC5nZXRIZWFkZXJIZWlnaHQoKX19ZXhwYW5kQWxsKCl7dGhpcy5jbGllbnRTaWRlUm93TW9kZWx8fHRoaXMuc2VydmVyU2lkZVJvd01vZGVsP3RoaXMuZXhwYW5zaW9uU2VydmljZS5leHBhbmRBbGwoITApOnRoaXMubG9nTWlzc2luZ1Jvd01vZGVsKCJleHBhbmRBbGwiLCJjbGllbnRTaWRlIiwic2VydmVyU2lkZSIpfWNvbGxhcHNlQWxsKCl7dGhpcy5jbGllbnRTaWRlUm93TW9kZWx8fHRoaXMuc2VydmVyU2lkZVJvd01vZGVsP3RoaXMuZXhwYW5zaW9uU2VydmljZS5leHBhbmRBbGwoITEpOnRoaXMubG9nTWlzc2luZ1Jvd01vZGVsKCJjb2xsYXBzZUFsbCIsImNsaWVudFNpZGUiLCJzZXJ2ZXJTaWRlIil9YWRkUmVuZGVyZWRSb3dMaXN0ZW5lcihlLHQsaSl7dGhpcy5yb3dSZW5kZXJlci5hZGRSZW5kZXJlZFJvd0xpc3RlbmVyKGUsdCxpKX1nZXRRdWlja0ZpbHRlcigpe3JldHVybiB0aGlzLmdvcy5nZXQoInF1aWNrRmlsdGVyVGV4dCIpfWdldEFkdmFuY2VkRmlsdGVyTW9kZWwoKXtyZXR1cm4gcmUuX19hc3NlcnRSZWdpc3RlcmVkKHNlLkFkdmFuY2VkRmlsdGVyTW9kdWxlLCJhcGkuZ2V0QWR2YW5jZWRGaWx0ZXJNb2RlbCIsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKT90aGlzLmZpbHRlck1hbmFnZXIuZ2V0QWR2YW5jZWRGaWx0ZXJNb2RlbCgpOm51bGx9c2V0QWR2YW5jZWRGaWx0ZXJNb2RlbChlKXt0aGlzLmZpbHRlck1hbmFnZXIuc2V0QWR2YW5jZWRGaWx0ZXJNb2RlbChlKX1zaG93QWR2YW5jZWRGaWx0ZXJCdWlsZGVyKCl7cmUuX19hc3NlcnRSZWdpc3RlcmVkKHNlLkFkdmFuY2VkRmlsdGVyTW9kdWxlLCJhcGkuc2V0QWR2YW5jZWRGaWx0ZXJNb2RlbCIsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKSYmdGhpcy5maWx0ZXJNYW5hZ2VyLnNob3dBZHZhbmNlZEZpbHRlckJ1aWxkZXIoImFwaSIpfXNldE5vZGVzU2VsZWN0ZWQoZSl7aWYoIWUubm9kZXMuZXZlcnkoZT0+ZS5yb3dQaW5uZWQ/KGNvbnNvbGUud2FybigiQUcgR3JpZDogY2Fubm90IHNlbGVjdCBwaW5uZWQgcm93cyIpLCExKTp2b2lkIDAhPT1lLmlkfHwoY29uc29sZS53YXJuKCJBRyBHcmlkOiBjYW5ub3Qgc2VsZWN0IG5vZGUgdW50aWwgaWQgZm9yIG5vZGUgaXMga25vd24iKSwhMSkpKXJldHVybjtjb25zdHtub2Rlczp0LHNvdXJjZTppLG5ld1ZhbHVlOnN9PWUscj10O3RoaXMuc2VsZWN0aW9uU2VydmljZS5zZXROb2Rlc1NlbGVjdGVkKHtub2RlczpyLHNvdXJjZTpudWxsIT1pP2k6ImFwaSIsbmV3VmFsdWU6c30pfXNlbGVjdEFsbChlPSJhcGlTZWxlY3RBbGwiKXt0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0QWxsUm93Tm9kZXMoe3NvdXJjZTplfSl9ZGVzZWxlY3RBbGwoZT0iYXBpU2VsZWN0QWxsIil7dGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmRlc2VsZWN0QWxsUm93Tm9kZXMoe3NvdXJjZTplfSl9c2VsZWN0QWxsRmlsdGVyZWQoZT0iYXBpU2VsZWN0QWxsRmlsdGVyZWQiKXt0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0QWxsUm93Tm9kZXMoe3NvdXJjZTplLGp1c3RGaWx0ZXJlZDohMH0pfWRlc2VsZWN0QWxsRmlsdGVyZWQoZT0iYXBpU2VsZWN0QWxsRmlsdGVyZWQiKXt0aGlzLnNlbGVjdGlvblNlcnZpY2UuZGVzZWxlY3RBbGxSb3dOb2Rlcyh7c291cmNlOmUsanVzdEZpbHRlcmVkOiEwfSl9Z2V0U2VydmVyU2lkZVNlbGVjdGlvblN0YXRlKCl7cmV0dXJuIEUodGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWwpPyh0aGlzLmxvZ01pc3NpbmdSb3dNb2RlbCgiZ2V0U2VydmVyU2lkZVNlbGVjdGlvblN0YXRlIiwic2VydmVyU2lkZSIpLG51bGwpOnRoaXMuc2VsZWN0aW9uU2VydmljZS5nZXRTZWxlY3Rpb25TdGF0ZSgpfXNldFNlcnZlclNpZGVTZWxlY3Rpb25TdGF0ZShlKXtFKHRoaXMuc2VydmVyU2lkZVJvd01vZGVsKT90aGlzLmxvZ01pc3NpbmdSb3dNb2RlbCgic2V0U2VydmVyU2lkZVNlbGVjdGlvblN0YXRlIiwic2VydmVyU2lkZSIpOnRoaXMuc2VsZWN0aW9uU2VydmljZS5zZXRTZWxlY3Rpb25TdGF0ZShlLCJhcGkiKX1zZWxlY3RBbGxPbkN1cnJlbnRQYWdlKGU9ImFwaVNlbGVjdEFsbEN1cnJlbnRQYWdlIil7dGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdEFsbFJvd05vZGVzKHtzb3VyY2U6ZSxqdXN0Q3VycmVudFBhZ2U6ITB9KX1kZXNlbGVjdEFsbE9uQ3VycmVudFBhZ2UoZT0iYXBpU2VsZWN0QWxsQ3VycmVudFBhZ2UiKXt0aGlzLnNlbGVjdGlvblNlcnZpY2UuZGVzZWxlY3RBbGxSb3dOb2Rlcyh7c291cmNlOmUsanVzdEN1cnJlbnRQYWdlOiEwfSl9c2hvd0xvYWRpbmdPdmVybGF5KCl7dGhpcy5vdmVybGF5U2VydmljZS5zaG93TG9hZGluZ092ZXJsYXkoKX1zaG93Tm9Sb3dzT3ZlcmxheSgpe3RoaXMub3ZlcmxheVNlcnZpY2Uuc2hvd05vUm93c092ZXJsYXkoKX1oaWRlT3ZlcmxheSgpe3RoaXMub3ZlcmxheVNlcnZpY2UuaGlkZU92ZXJsYXkoKX1nZXRTZWxlY3RlZE5vZGVzKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uU2VydmljZS5nZXRTZWxlY3RlZE5vZGVzKCl9Z2V0U2VsZWN0ZWRSb3dzKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uU2VydmljZS5nZXRTZWxlY3RlZFJvd3MoKX1nZXRCZXN0Q29zdE5vZGVTZWxlY3Rpb24oKXtpZighRSh0aGlzLmNsaWVudFNpZGVSb3dNb2RlbCkpcmV0dXJuIHRoaXMuc2VsZWN0aW9uU2VydmljZS5nZXRCZXN0Q29zdE5vZGVTZWxlY3Rpb24oKTt0aGlzLmxvZ01pc3NpbmdSb3dNb2RlbCgiZ2V0QmVzdENvc3ROb2RlU2VsZWN0aW9uIiwiY2xpZW50U2lkZSIpfWdldFJlbmRlcmVkTm9kZXMoKXtyZXR1cm4gdGhpcy5yb3dSZW5kZXJlci5nZXRSZW5kZXJlZE5vZGVzKCl9ZW5zdXJlQ29sdW1uVmlzaWJsZShlLHQ9ImF1dG8iKXt0aGlzLmZyYW1ld29ya092ZXJyaWRlcy53cmFwSW5jb21pbmcoKCk9PnRoaXMuZ3JpZEJvZHlDdHJsLmdldFNjcm9sbEZlYXR1cmUoKS5lbnN1cmVDb2x1bW5WaXNpYmxlKGUsdCksImVuc3VyZVZpc2libGUiKX1lbnN1cmVJbmRleFZpc2libGUoZSx0KXt0aGlzLmZyYW1ld29ya092ZXJyaWRlcy53cmFwSW5jb21pbmcoKCk9PnRoaXMuZ3JpZEJvZHlDdHJsLmdldFNjcm9sbEZlYXR1cmUoKS5lbnN1cmVJbmRleFZpc2libGUoZSx0KSwiZW5zdXJlVmlzaWJsZSIpfWVuc3VyZU5vZGVWaXNpYmxlKGUsdD1udWxsKXt0aGlzLmZyYW1ld29ya092ZXJyaWRlcy53cmFwSW5jb21pbmcoKCk9PnRoaXMuZ3JpZEJvZHlDdHJsLmdldFNjcm9sbEZlYXR1cmUoKS5lbnN1cmVOb2RlVmlzaWJsZShlLHQpLCJlbnN1cmVWaXNpYmxlIil9Zm9yRWFjaExlYWZOb2RlKGUpe0UodGhpcy5jbGllbnRTaWRlUm93TW9kZWwpP3RoaXMubG9nTWlzc2luZ1Jvd01vZGVsKCJmb3JFYWNoTGVhZk5vZGUiLCJjbGllbnRTaWRlIik6dGhpcy5jbGllbnRTaWRlUm93TW9kZWwuZm9yRWFjaExlYWZOb2RlKGUpfWZvckVhY2hOb2RlKGUsdCl7dGhpcy5yb3dNb2RlbC5mb3JFYWNoTm9kZShlLHQpfWZvckVhY2hOb2RlQWZ0ZXJGaWx0ZXIoZSl7RSh0aGlzLmNsaWVudFNpZGVSb3dNb2RlbCk/dGhpcy5sb2dNaXNzaW5nUm93TW9kZWwoImZvckVhY2hOb2RlQWZ0ZXJGaWx0ZXIiLCJjbGllbnRTaWRlIik6dGhpcy5jbGllbnRTaWRlUm93TW9kZWwuZm9yRWFjaE5vZGVBZnRlckZpbHRlcihlKX1mb3JFYWNoTm9kZUFmdGVyRmlsdGVyQW5kU29ydChlKXtFKHRoaXMuY2xpZW50U2lkZVJvd01vZGVsKT90aGlzLmxvZ01pc3NpbmdSb3dNb2RlbCgiZm9yRWFjaE5vZGVBZnRlckZpbHRlckFuZFNvcnQiLCJjbGllbnRTaWRlIik6dGhpcy5jbGllbnRTaWRlUm93TW9kZWwuZm9yRWFjaE5vZGVBZnRlckZpbHRlckFuZFNvcnQoZSl9Z2V0RmlsdGVySW5zdGFuY2UoZSx0KXtyZXR1cm4gaigiJ2dldEZpbHRlckluc3RhbmNlJyBpcyBkZXByZWNhdGVkLiBUbyBnZXQvc2V0IGluZGl2aWR1YWwgZmlsdGVyIG1vZGVscywgdXNlICdnZXRDb2x1bW5GaWx0ZXJNb2RlbCcgb3IgJ3NldENvbHVtbkZpbHRlck1vZGVsJyBpbnN0ZWFkLiBUbyBnZXQgaG9sZCBvZiB0aGUgZmlsdGVyIGluc3RhbmNlLCB1c2UgJ2dldENvbHVtbkZpbHRlckluc3RhbmNlJyB3aGljaCByZXR1cm5zIHRoZSBpbnN0YW5jZSBhc3luY2hyb25vdXNseS4iKSx0aGlzLmZpbHRlck1hbmFnZXIuZ2V0RmlsdGVySW5zdGFuY2UoZSx0KX1nZXRDb2x1bW5GaWx0ZXJJbnN0YW5jZShlKXtyZXR1cm4gdGhpcy5maWx0ZXJNYW5hZ2VyLmdldENvbHVtbkZpbHRlckluc3RhbmNlKGUpfWRlc3Ryb3lGaWx0ZXIoZSl7Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldFByaW1hcnlDb2x1bW4oZSk7aWYodClyZXR1cm4gdGhpcy5maWx0ZXJNYW5hZ2VyLmRlc3Ryb3lGaWx0ZXIodCwiYXBpIil9Z2V0U3RhdHVzUGFuZWwoZSl7aWYoIXJlLl9fYXNzZXJ0UmVnaXN0ZXJlZChzZS5TdGF0dXNCYXJNb2R1bGUsImFwaS5nZXRTdGF0dXNQYW5lbCIsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKSlyZXR1cm47cmV0dXJuIGpuKHRoaXMuc3RhdHVzQmFyU2VydmljZS5nZXRTdGF0dXNQYW5lbChlKSl9Z2V0Q29sdW1uRGVmKGUpe2NvbnN0IHQ9dGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKGUpO3JldHVybiB0P3QuZ2V0Q29sRGVmKCk6bnVsbH1nZXRDb2x1bW5EZWZzKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0Q29sdW1uRGVmcygpfW9uRmlsdGVyQ2hhbmdlZChlPSJhcGkiKXt0aGlzLmZpbHRlck1hbmFnZXIub25GaWx0ZXJDaGFuZ2VkKHtzb3VyY2U6ZX0pfW9uU29ydENoYW5nZWQoKXt0aGlzLnNvcnRDb250cm9sbGVyLm9uU29ydENoYW5nZWQoImFwaSIpfXNldEZpbHRlck1vZGVsKGUpe3RoaXMuZnJhbWV3b3JrT3ZlcnJpZGVzLndyYXBJbmNvbWluZygoKT0+dGhpcy5maWx0ZXJNYW5hZ2VyLnNldEZpbHRlck1vZGVsKGUpKX1nZXRGaWx0ZXJNb2RlbCgpe3JldHVybiB0aGlzLmZpbHRlck1hbmFnZXIuZ2V0RmlsdGVyTW9kZWwoKX1nZXRDb2x1bW5GaWx0ZXJNb2RlbChlKXtyZXR1cm4gdGhpcy5maWx0ZXJNYW5hZ2VyLmdldENvbHVtbkZpbHRlck1vZGVsKGUpfXNldENvbHVtbkZpbHRlck1vZGVsKGUsdCl7cmV0dXJuIHRoaXMuZmlsdGVyTWFuYWdlci5zZXRDb2x1bW5GaWx0ZXJNb2RlbChlLHQpfWdldEZvY3VzZWRDZWxsKCl7cmV0dXJuIHRoaXMuZm9jdXNTZXJ2aWNlLmdldEZvY3VzZWRDZWxsKCl9Y2xlYXJGb2N1c2VkQ2VsbCgpe3JldHVybiB0aGlzLmZvY3VzU2VydmljZS5jbGVhckZvY3VzZWRDZWxsKCl9c2V0Rm9jdXNlZENlbGwoZSx0LGkpe3RoaXMuZm9jdXNTZXJ2aWNlLnNldEZvY3VzZWRDZWxsKHtyb3dJbmRleDplLGNvbHVtbjp0LHJvd1Bpbm5lZDppLGZvcmNlQnJvd3NlckZvY3VzOiEwfSl9YWRkUm93RHJvcFpvbmUoZSl7dGhpcy5ncmlkQm9keUN0cmwuZ2V0Um93RHJhZ0ZlYXR1cmUoKS5hZGRSb3dEcm9wWm9uZShlKX1yZW1vdmVSb3dEcm9wWm9uZShlKXtjb25zdCB0PXRoaXMuZHJhZ0FuZERyb3BTZXJ2aWNlLmZpbmRFeHRlcm5hbFpvbmUoZSk7dCYmdGhpcy5kcmFnQW5kRHJvcFNlcnZpY2UucmVtb3ZlRHJvcFRhcmdldCh0KX1nZXRSb3dEcm9wWm9uZVBhcmFtcyhlKXtyZXR1cm4gdGhpcy5ncmlkQm9keUN0cmwuZ2V0Um93RHJhZ0ZlYXR1cmUoKS5nZXRSb3dEcm9wWm9uZShlKX1hc3NlcnRTaWRlQmFyTG9hZGVkKGUpe3JldHVybiByZS5fX2Fzc2VydFJlZ2lzdGVyZWQoc2UuU2lkZUJhck1vZHVsZSwiYXBpLiIrZSx0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpfWlzU2lkZUJhclZpc2libGUoKXtyZXR1cm4gdGhpcy5hc3NlcnRTaWRlQmFyTG9hZGVkKCJpc1NpZGVCYXJWaXNpYmxlIikmJnRoaXMuc2lkZUJhclNlcnZpY2UuZ2V0U2lkZUJhckNvbXAoKS5pc0Rpc3BsYXllZCgpfXNldFNpZGVCYXJWaXNpYmxlKGUpe3RoaXMuYXNzZXJ0U2lkZUJhckxvYWRlZCgic2V0U2lkZUJhclZpc2libGUiKSYmdGhpcy5zaWRlQmFyU2VydmljZS5nZXRTaWRlQmFyQ29tcCgpLnNldERpc3BsYXllZChlKX1zZXRTaWRlQmFyUG9zaXRpb24oZSl7dGhpcy5hc3NlcnRTaWRlQmFyTG9hZGVkKCJzZXRTaWRlQmFyUG9zaXRpb24iKSYmdGhpcy5zaWRlQmFyU2VydmljZS5nZXRTaWRlQmFyQ29tcCgpLnNldFNpZGVCYXJQb3NpdGlvbihlKX1vcGVuVG9vbFBhbmVsKGUpe3RoaXMuYXNzZXJ0U2lkZUJhckxvYWRlZCgib3BlblRvb2xQYW5lbCIpJiZ0aGlzLnNpZGVCYXJTZXJ2aWNlLmdldFNpZGVCYXJDb21wKCkub3BlblRvb2xQYW5lbChlLCJhcGkiKX1jbG9zZVRvb2xQYW5lbCgpe3RoaXMuYXNzZXJ0U2lkZUJhckxvYWRlZCgiY2xvc2VUb29sUGFuZWwiKSYmdGhpcy5zaWRlQmFyU2VydmljZS5nZXRTaWRlQmFyQ29tcCgpLmNsb3NlKCJhcGkiKX1nZXRPcGVuZWRUb29sUGFuZWwoKXtyZXR1cm4gdGhpcy5hc3NlcnRTaWRlQmFyTG9hZGVkKCJnZXRPcGVuZWRUb29sUGFuZWwiKT90aGlzLnNpZGVCYXJTZXJ2aWNlLmdldFNpZGVCYXJDb21wKCkub3BlbmVkSXRlbSgpOm51bGx9cmVmcmVzaFRvb2xQYW5lbCgpe3RoaXMuYXNzZXJ0U2lkZUJhckxvYWRlZCgicmVmcmVzaFRvb2xQYW5lbCIpJiZ0aGlzLnNpZGVCYXJTZXJ2aWNlLmdldFNpZGVCYXJDb21wKCkucmVmcmVzaCgpfWlzVG9vbFBhbmVsU2hvd2luZygpe3JldHVybiB0aGlzLmFzc2VydFNpZGVCYXJMb2FkZWQoImlzVG9vbFBhbmVsU2hvd2luZyIpJiZ0aGlzLnNpZGVCYXJTZXJ2aWNlLmdldFNpZGVCYXJDb21wKCkuaXNUb29sUGFuZWxTaG93aW5nKCl9Z2V0VG9vbFBhbmVsSW5zdGFuY2UoZSl7aWYodGhpcy5hc3NlcnRTaWRlQmFyTG9hZGVkKCJnZXRUb29sUGFuZWxJbnN0YW5jZSIpKXtyZXR1cm4gam4odGhpcy5zaWRlQmFyU2VydmljZS5nZXRTaWRlQmFyQ29tcCgpLmdldFRvb2xQYW5lbEluc3RhbmNlKGUpKX19Z2V0U2lkZUJhcigpe2lmKHRoaXMuYXNzZXJ0U2lkZUJhckxvYWRlZCgiZ2V0U2lkZUJhciIpKXJldHVybiB0aGlzLnNpZGVCYXJTZXJ2aWNlLmdldFNpZGVCYXJDb21wKCkuZ2V0RGVmKCl9cmVzZXRSb3dIZWlnaHRzKCl7aWYoYih0aGlzLmNsaWVudFNpZGVSb3dNb2RlbCkpe2lmKHRoaXMuY29sdW1uTW9kZWwuaXNBdXRvUm93SGVpZ2h0QWN0aXZlKCkpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKCJBRyBHcmlkOiBjYWxsaW5nIGdyaWRBcGkucmVzZXRSb3dIZWlnaHRzKCkgbWFrZXMgbm8gc2Vuc2Ugd2hlbiB1c2luZyBBdXRvIFJvdyBIZWlnaHQuIik7dGhpcy5jbGllbnRTaWRlUm93TW9kZWwucmVzZXRSb3dIZWlnaHRzKCl9fXNldFJvd0NvdW50KGUsdCl7aWYodGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWwpcmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuaXNSb3dHcm91cEVtcHR5KCk/dm9pZCB0aGlzLnNlcnZlclNpZGVSb3dNb2RlbC5zZXRSb3dDb3VudChlLHQpOnZvaWQgY29uc29sZS5lcnJvcigiQUcgR3JpZDogc2V0Um93Q291bnQgY2Fubm90IGJlIHVzZWQgd2hpbGUgdXNpbmcgcm93IGdyb3VwaW5nLiIpO3RoaXMuaW5maW5pdGVSb3dNb2RlbD90aGlzLmluZmluaXRlUm93TW9kZWwuc2V0Um93Q291bnQoZSx0KTp0aGlzLmxvZ01pc3NpbmdSb3dNb2RlbCgic2V0Um93Q291bnQiLCJpbmZpbml0ZSIsInNlcnZlclNpZGUiKX1vblJvd0hlaWdodENoYW5nZWQoKXt0aGlzLmNsaWVudFNpZGVSb3dNb2RlbD90aGlzLmNsaWVudFNpZGVSb3dNb2RlbC5vblJvd0hlaWdodENoYW5nZWQoKTp0aGlzLnNlcnZlclNpZGVSb3dNb2RlbCYmdGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWwub25Sb3dIZWlnaHRDaGFuZ2VkKCl9Z2V0VmFsdWUoZSx0KXtsZXQgaT10aGlzLmNvbHVtbk1vZGVsLmdldFByaW1hcnlDb2x1bW4oZSk7cmV0dXJuIEUoaSkmJihpPXRoaXMuY29sdW1uTW9kZWwuZ2V0R3JpZENvbHVtbihlKSksRShpKT9udWxsOnRoaXMudmFsdWVTZXJ2aWNlLmdldFZhbHVlKGksdCl9YWRkRXZlbnRMaXN0ZW5lcihlLHQpe3RoaXMuYXBpRXZlbnRTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoZSx0KX1hZGRHbG9iYWxMaXN0ZW5lcihlKXt0aGlzLmFwaUV2ZW50U2VydmljZS5hZGRHbG9iYWxMaXN0ZW5lcihlKX1yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl7dGhpcy5hcGlFdmVudFNlcnZpY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpfXJlbW92ZUdsb2JhbExpc3RlbmVyKGUpe3RoaXMuYXBpRXZlbnRTZXJ2aWNlLnJlbW92ZUdsb2JhbExpc3RlbmVyKGUpfWRpc3BhdGNoRXZlbnQoZSl7dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX1kZXN0cm95KCl7Y29uc3QgZT0iU2VlICIrdGhpcy5mcmFtZXdvcmtPdmVycmlkZXMuZ2V0RG9jTGluaygiZ3JpZC1saWZlY3ljbGUvI2dyaWQtcHJlLWRlc3Ryb3llZCIpO2lmKHRoaXMuZGVzdHJveUNhbGxlZClyZXR1cm47Y29uc3QgdD17dHlwZTpsdC5FVkVOVF9HUklEX1BSRV9ERVNUUk9ZRUQsc3RhdGU6dGhpcy5nZXRTdGF0ZSgpfTt0aGlzLmRpc3BhdGNoRXZlbnQodCksdGhpcy5kZXN0cm95Q2FsbGVkPSEwO2NvbnN0IGk9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0R3JpZEN0cmwoKTtpJiZpLmRlc3Ryb3lHcmlkVWkoKSx0aGlzLmNvbnRleHQuZGVzdHJveSgpLFYodGhpcyxbImlzRGVzdHJveWVkIl0sZSl9aXNEZXN0cm95ZWQoKXtyZXR1cm4gdGhpcy5kZXN0cm95Q2FsbGVkfXJlc2V0UXVpY2tGaWx0ZXIoKXt0aGlzLmZpbHRlck1hbmFnZXIucmVzZXRRdWlja0ZpbHRlckNhY2hlKCl9Z2V0Q2VsbFJhbmdlcygpe3JldHVybiB0aGlzLnJhbmdlU2VydmljZT90aGlzLnJhbmdlU2VydmljZS5nZXRDZWxsUmFuZ2VzKCk6KHJlLl9fYXNzZXJ0UmVnaXN0ZXJlZChzZS5SYW5nZVNlbGVjdGlvbk1vZHVsZSwiYXBpLmdldENlbGxSYW5nZXMiLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSksbnVsbCl9YWRkQ2VsbFJhbmdlKGUpe3RoaXMucmFuZ2VTZXJ2aWNlP3RoaXMucmFuZ2VTZXJ2aWNlLmFkZENlbGxSYW5nZShlKTpyZS5fX2Fzc2VydFJlZ2lzdGVyZWQoc2UuUmFuZ2VTZWxlY3Rpb25Nb2R1bGUsImFwaS5hZGRDZWxsUmFuZ2UiLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSl9Y2xlYXJSYW5nZVNlbGVjdGlvbigpe3RoaXMucmFuZ2VTZXJ2aWNlJiZ0aGlzLnJhbmdlU2VydmljZS5yZW1vdmVBbGxDZWxsUmFuZ2VzKCkscmUuX19hc3NlcnRSZWdpc3RlcmVkKHNlLlJhbmdlU2VsZWN0aW9uTW9kdWxlLCJncmlkQXBpLmNsZWFyUmFuZ2VTZWxlY3Rpb24iLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSl9dW5kb0NlbGxFZGl0aW5nKCl7dGhpcy51bmRvUmVkb1NlcnZpY2UudW5kbygiYXBpIil9cmVkb0NlbGxFZGl0aW5nKCl7dGhpcy51bmRvUmVkb1NlcnZpY2UucmVkbygiYXBpIil9Z2V0Q3VycmVudFVuZG9TaXplKCl7cmV0dXJuIHRoaXMudW5kb1JlZG9TZXJ2aWNlLmdldEN1cnJlbnRVbmRvU3RhY2tTaXplKCl9Z2V0Q3VycmVudFJlZG9TaXplKCl7cmV0dXJuIHRoaXMudW5kb1JlZG9TZXJ2aWNlLmdldEN1cnJlbnRSZWRvU3RhY2tTaXplKCl9YXNzZXJ0Q2hhcnQoZSx0KXtpZihyZS5fX2Fzc2VydFJlZ2lzdGVyZWQoc2UuR3JpZENoYXJ0c01vZHVsZSwiYXBpLiIrZSx0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpKXJldHVybiB0aGlzLmZyYW1ld29ya092ZXJyaWRlcy53cmFwSW5jb21pbmcoKCk9PnQoKSl9Z2V0Q2hhcnRNb2RlbHMoKXtyZXR1cm4gdGhpcy5hc3NlcnRDaGFydCgiZ2V0Q2hhcnRNb2RlbHMiLCgpPT50aGlzLmNoYXJ0U2VydmljZS5nZXRDaGFydE1vZGVscygpKX1nZXRDaGFydFJlZihlKXtyZXR1cm4gdGhpcy5hc3NlcnRDaGFydCgiZ2V0Q2hhcnRSZWYiLCgpPT50aGlzLmNoYXJ0U2VydmljZS5nZXRDaGFydFJlZihlKSl9Z2V0Q2hhcnRJbWFnZURhdGFVUkwoZSl7cmV0dXJuIHRoaXMuYXNzZXJ0Q2hhcnQoImdldENoYXJ0SW1hZ2VEYXRhVVJMIiwoKT0+dGhpcy5jaGFydFNlcnZpY2UuZ2V0Q2hhcnRJbWFnZURhdGFVUkwoZSkpfWRvd25sb2FkQ2hhcnQoZSl7cmV0dXJuIHRoaXMuYXNzZXJ0Q2hhcnQoImRvd25sb2FkQ2hhcnQiLCgpPT50aGlzLmNoYXJ0U2VydmljZS5kb3dubG9hZENoYXJ0KGUpKX1vcGVuQ2hhcnRUb29sUGFuZWwoZSl7cmV0dXJuIHRoaXMuYXNzZXJ0Q2hhcnQoIm9wZW5DaGFydFRvb2xQYW5lbCIsKCk9PnRoaXMuY2hhcnRTZXJ2aWNlLm9wZW5DaGFydFRvb2xQYW5lbChlKSl9Y2xvc2VDaGFydFRvb2xQYW5lbChlKXtyZXR1cm4gdGhpcy5hc3NlcnRDaGFydCgiY2xvc2VDaGFydFRvb2xQYW5lbCIsKCk9PnRoaXMuY2hhcnRTZXJ2aWNlLmNsb3NlQ2hhcnRUb29sUGFuZWwoZS5jaGFydElkKSl9Y3JlYXRlUmFuZ2VDaGFydChlKXtyZXR1cm4gdGhpcy5hc3NlcnRDaGFydCgiY3JlYXRlUmFuZ2VDaGFydCIsKCk9PnRoaXMuY2hhcnRTZXJ2aWNlLmNyZWF0ZVJhbmdlQ2hhcnQoZSkpfWNyZWF0ZVBpdm90Q2hhcnQoZSl7cmV0dXJuIHRoaXMuYXNzZXJ0Q2hhcnQoImNyZWF0ZVBpdm90Q2hhcnQiLCgpPT50aGlzLmNoYXJ0U2VydmljZS5jcmVhdGVQaXZvdENoYXJ0KGUpKX1jcmVhdGVDcm9zc0ZpbHRlckNoYXJ0KGUpe3JldHVybiB0aGlzLmFzc2VydENoYXJ0KCJjcmVhdGVDcm9zc0ZpbHRlckNoYXJ0IiwoKT0+dGhpcy5jaGFydFNlcnZpY2UuY3JlYXRlQ3Jvc3NGaWx0ZXJDaGFydChlKSl9dXBkYXRlQ2hhcnQoZSl7cmV0dXJuIHRoaXMuYXNzZXJ0Q2hhcnQoInVwZGF0ZUNoYXJ0IiwoKT0+dGhpcy5jaGFydFNlcnZpY2UudXBkYXRlQ2hhcnQoZSkpfXJlc3RvcmVDaGFydChlLHQpe3JldHVybiB0aGlzLmFzc2VydENoYXJ0KCJyZXN0b3JlQ2hhcnQiLCgpPT50aGlzLmNoYXJ0U2VydmljZS5yZXN0b3JlQ2hhcnQoZSx0KSl9YXNzZXJ0Q2xpcGJvYXJkKGUsdCl7cmUuX19hc3NlcnRSZWdpc3RlcmVkKHNlLkNsaXBib2FyZE1vZHVsZSwiYXBpIitlLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSkmJnQoKX1jb3B5VG9DbGlwYm9hcmQoZSl7dGhpcy5hc3NlcnRDbGlwYm9hcmQoImNvcHlUb0NsaXBib2FyZCIsKCk9PnRoaXMuY2xpcGJvYXJkU2VydmljZS5jb3B5VG9DbGlwYm9hcmQoZSkpfWN1dFRvQ2xpcGJvYXJkKGUpe3RoaXMuYXNzZXJ0Q2xpcGJvYXJkKCJjdXRUb0NsaXBib2FyZCIsKCk9PnRoaXMuY2xpcGJvYXJkU2VydmljZS5jdXRUb0NsaXBib2FyZChlKSl9Y29weVNlbGVjdGVkUm93c1RvQ2xpcGJvYXJkKGUpe3RoaXMuYXNzZXJ0Q2xpcGJvYXJkKCJjb3B5U2VsZWN0ZWRSb3dzVG9DbGlwYm9hcmQiLCgpPT50aGlzLmNsaXBib2FyZFNlcnZpY2UuY29weVNlbGVjdGVkUm93c1RvQ2xpcGJvYXJkKGUpKX1jb3B5U2VsZWN0ZWRSYW5nZVRvQ2xpcGJvYXJkKGUpe3RoaXMuYXNzZXJ0Q2xpcGJvYXJkKCJjb3B5U2VsZWN0ZWRSYW5nZVRvQ2xpcGJvYXJkIiwoKT0+dGhpcy5jbGlwYm9hcmRTZXJ2aWNlLmNvcHlTZWxlY3RlZFJhbmdlVG9DbGlwYm9hcmQoZSkpfWNvcHlTZWxlY3RlZFJhbmdlRG93bigpe3RoaXMuYXNzZXJ0Q2xpcGJvYXJkKCJjb3B5U2VsZWN0ZWRSYW5nZURvd24iLCgpPT50aGlzLmNsaXBib2FyZFNlcnZpY2UuY29weVJhbmdlRG93bigpKX1wYXN0ZUZyb21DbGlwYm9hcmQoKXt0aGlzLmFzc2VydENsaXBib2FyZCgicGFzdGVGcm9tQ2xpcGJvYXJkIiwoKT0+dGhpcy5jbGlwYm9hcmRTZXJ2aWNlLnBhc3RlRnJvbUNsaXBib2FyZCgpKX1zaG93Q29sdW1uTWVudUFmdGVyQnV0dG9uQ2xpY2soZSx0KXtqKCInc2hvd0NvbHVtbk1lbnVBZnRlckJ1dHRvbkNsaWNrJyBpcyBkZXByZWNhdGVkLiBVc2UgJ0lIZWFkZXJQYXJhbXMuc2hvd0NvbHVtbk1lbnUnIHdpdGhpbiBhIGhlYWRlciBjb21wb25lbnQsIG9yICdhcGkuc2hvd0NvbHVtbk1lbnUnIGVsc2V3aGVyZS4iKTtjb25zdCBpPXRoaXMuY29sdW1uTW9kZWwuZ2V0R3JpZENvbHVtbihlKTt0aGlzLm1lbnVTZXJ2aWNlLnNob3dDb2x1bW5NZW51KHtjb2x1bW46aSxidXR0b25FbGVtZW50OnQscG9zaXRpb25CeToiYnV0dG9uIn0pfXNob3dDb2x1bW5NZW51QWZ0ZXJNb3VzZUNsaWNrKGUsdCl7aigiJ3Nob3dDb2x1bW5NZW51QWZ0ZXJNb3VzZUNsaWNrJyBpcyBkZXByZWNhdGVkLiBVc2UgJ0lIZWFkZXJQYXJhbXMuc2hvd0NvbHVtbk1lbnVBZnRlck1vdXNlQ2xpY2snIHdpdGhpbiBhIGhlYWRlciBjb21wb25lbnQsIG9yICdhcGkuc2hvd0NvbHVtbk1lbnUnIGVsc2V3aGVyZS4iKTtsZXQgaT10aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4oZSk7aXx8KGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKGUpKSxpP3RoaXMubWVudVNlcnZpY2Uuc2hvd0NvbHVtbk1lbnUoe2NvbHVtbjppLG1vdXNlRXZlbnQ6dCxwb3NpdGlvbkJ5OiJtb3VzZSJ9KTpjb25zb2xlLmVycm9yKGBBRyBHcmlkOiBjb2x1bW4gJyR7ZX0nIG5vdCBmb3VuZGApfXNob3dDb2x1bW5DaG9vc2VyKGUpe3RoaXMubWVudVNlcnZpY2Uuc2hvd0NvbHVtbkNob29zZXIoe2Nob29zZXJQYXJhbXM6ZX0pfXNob3dDb2x1bW5GaWx0ZXIoZSl7Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4oZSk7dD90aGlzLm1lbnVTZXJ2aWNlLnNob3dGaWx0ZXJNZW51KHtjb2x1bW46dCxjb250YWluZXJUeXBlOiJjb2x1bW5GaWx0ZXIiLHBvc2l0aW9uQnk6ImF1dG8ifSk6Y29uc29sZS5lcnJvcihgQUcgR3JpZDogY29sdW1uICcke2V9JyBub3QgZm91bmRgKX1zaG93Q29sdW1uTWVudShlKXtjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuZ2V0R3JpZENvbHVtbihlKTt0P3RoaXMubWVudVNlcnZpY2Uuc2hvd0NvbHVtbk1lbnUoe2NvbHVtbjp0LHBvc2l0aW9uQnk6ImF1dG8ifSk6Y29uc29sZS5lcnJvcihgQUcgR3JpZDogY29sdW1uICcke2V9JyBub3QgZm91bmRgKX1oaWRlUG9wdXBNZW51KCl7dGhpcy5tZW51U2VydmljZS5oaWRlUG9wdXBNZW51KCl9aGlkZUNvbHVtbkNob29zZXIoKXt0aGlzLm1lbnVTZXJ2aWNlLmhpZGVDb2x1bW5DaG9vc2VyKCl9dGFiVG9OZXh0Q2VsbChlKXtyZXR1cm4gdGhpcy5uYXZpZ2F0aW9uU2VydmljZS50YWJUb05leHRDZWxsKCExLGUpfXRhYlRvUHJldmlvdXNDZWxsKGUpe3JldHVybiB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLnRhYlRvTmV4dENlbGwoITAsZSl9Z2V0Q2VsbFJlbmRlcmVySW5zdGFuY2VzKGU9e30pe3JldHVybiB0aGlzLnJvd1JlbmRlcmVyLmdldENlbGxSZW5kZXJlckluc3RhbmNlcyhlKS5tYXAoam4pfWdldENlbGxFZGl0b3JJbnN0YW5jZXMoZT17fSl7cmV0dXJuIHRoaXMucm93UmVuZGVyZXIuZ2V0Q2VsbEVkaXRvckluc3RhbmNlcyhlKS5tYXAoam4pfWdldEVkaXRpbmdDZWxscygpe3JldHVybiB0aGlzLnJvd1JlbmRlcmVyLmdldEVkaXRpbmdDZWxscygpfXN0b3BFZGl0aW5nKGU9ITEpe3RoaXMucm93UmVuZGVyZXIuc3RvcEVkaXRpbmcoZSl9c3RhcnRFZGl0aW5nQ2VsbChlKXtjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuZ2V0R3JpZENvbHVtbihlLmNvbEtleSk7aWYoIXQpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKCJBRyBHcmlkOiBubyBjb2x1bW4gZm91bmQgZm9yICIrZS5jb2xLZXkpO2NvbnN0IGk9e3Jvd0luZGV4OmUucm93SW5kZXgscm93UGlubmVkOmUucm93UGlubmVkfHxudWxsLGNvbHVtbjp0fTtudWxsPT1lLnJvd1Bpbm5lZCYmdGhpcy5lbnN1cmVJbmRleFZpc2libGUoZS5yb3dJbmRleCksdGhpcy5lbnN1cmVDb2x1bW5WaXNpYmxlKGUuY29sS2V5KTtjb25zdCBzPXRoaXMubmF2aWdhdGlvblNlcnZpY2UuZ2V0Q2VsbEJ5UG9zaXRpb24oaSk7cyYmKHRoaXMuZm9jdXNTZXJ2aWNlLmlzQ2VsbEZvY3VzZWQoaSl8fHRoaXMuZm9jdXNTZXJ2aWNlLnNldEZvY3VzZWRDZWxsKGkpLHMuc3RhcnRSb3dPckNlbGxFZGl0KGUua2V5KSl9YWRkQWdnRnVuYyhlLHQpe3RoaXMubG9nRGVwcmVjYXRpb24oInYzMS4xIiwiYWRkQWdnRnVuYyhrZXksIGZ1bmMpIiwiYWRkQWdnRnVuY3MoeyBrZXk6IGZ1bmMgfSkiKSx0aGlzLmFnZ0Z1bmNTZXJ2aWNlJiZ0aGlzLmFnZ0Z1bmNTZXJ2aWNlLmFkZEFnZ0Z1bmNzKHtrZXk6dH0pfWFkZEFnZ0Z1bmNzKGUpe3RoaXMuYWdnRnVuY1NlcnZpY2UmJnRoaXMuYWdnRnVuY1NlcnZpY2UuYWRkQWdnRnVuY3MoZSl9Y2xlYXJBZ2dGdW5jcygpe3RoaXMuYWdnRnVuY1NlcnZpY2UmJnRoaXMuYWdnRnVuY1NlcnZpY2UuY2xlYXIoKX1hcHBseVNlcnZlclNpZGVUcmFuc2FjdGlvbihlKXtpZih0aGlzLnNlcnZlclNpZGVUcmFuc2FjdGlvbk1hbmFnZXIpcmV0dXJuIHRoaXMuc2VydmVyU2lkZVRyYW5zYWN0aW9uTWFuYWdlci5hcHBseVRyYW5zYWN0aW9uKGUpO3RoaXMubG9nTWlzc2luZ1Jvd01vZGVsKCJhcHBseVNlcnZlclNpZGVUcmFuc2FjdGlvbiIsInNlcnZlclNpZGUiKX1hcHBseVNlcnZlclNpZGVUcmFuc2FjdGlvbkFzeW5jKGUsdCl7aWYodGhpcy5zZXJ2ZXJTaWRlVHJhbnNhY3Rpb25NYW5hZ2VyKXJldHVybiB0aGlzLnNlcnZlclNpZGVUcmFuc2FjdGlvbk1hbmFnZXIuYXBwbHlUcmFuc2FjdGlvbkFzeW5jKGUsdCk7dGhpcy5sb2dNaXNzaW5nUm93TW9kZWwoImFwcGx5U2VydmVyU2lkZVRyYW5zYWN0aW9uQXN5bmMiLCJzZXJ2ZXJTaWRlIil9YXBwbHlTZXJ2ZXJTaWRlUm93RGF0YShlKXt2YXIgdCxpO2NvbnN0IHM9bnVsbCE9PSh0PWUuc3RhcnRSb3cpJiZ2b2lkIDAhPT10P3Q6MCxyPW51bGwhPT0oaT1lLnJvdXRlKSYmdm9pZCAwIT09aT9pOltdO3M8MD9jb25zb2xlLndhcm4oYEFHIEdyaWQ6IGludmFsaWQgdmFsdWUgJHtlLnN0YXJ0Um93fSBmb3Igc3RhcnRSb3csIHRoZSB2YWx1ZSBzaG91bGQgYmUgPj0gMGApOnRoaXMuc2VydmVyU2lkZVJvd01vZGVsP3RoaXMuc2VydmVyU2lkZVJvd01vZGVsLmFwcGx5Um93RGF0YShlLnN1Y2Nlc3NQYXJhbXMscyxyKTp0aGlzLmxvZ01pc3NpbmdSb3dNb2RlbCgic2V0U2VydmVyU2lkZURhdGFzb3VyY2UiLCJzZXJ2ZXJTaWRlIil9cmV0cnlTZXJ2ZXJTaWRlTG9hZHMoKXt0aGlzLnNlcnZlclNpZGVSb3dNb2RlbD90aGlzLnNlcnZlclNpZGVSb3dNb2RlbC5yZXRyeUxvYWRzKCk6dGhpcy5sb2dNaXNzaW5nUm93TW9kZWwoInJldHJ5U2VydmVyU2lkZUxvYWRzIiwic2VydmVyU2lkZSIpfWZsdXNoU2VydmVyU2lkZUFzeW5jVHJhbnNhY3Rpb25zKCl7aWYodGhpcy5zZXJ2ZXJTaWRlVHJhbnNhY3Rpb25NYW5hZ2VyKXJldHVybiB0aGlzLnNlcnZlclNpZGVUcmFuc2FjdGlvbk1hbmFnZXIuZmx1c2hBc3luY1RyYW5zYWN0aW9ucygpO3RoaXMubG9nTWlzc2luZ1Jvd01vZGVsKCJmbHVzaFNlcnZlclNpZGVBc3luY1RyYW5zYWN0aW9ucyIsInNlcnZlclNpZGUiKX1hcHBseVRyYW5zYWN0aW9uKGUpe2lmKHRoaXMuY2xpZW50U2lkZVJvd01vZGVsKXJldHVybiB0aGlzLmZyYW1ld29ya092ZXJyaWRlcy53cmFwSW5jb21pbmcoKCk9PnRoaXMuY2xpZW50U2lkZVJvd01vZGVsLnVwZGF0ZVJvd0RhdGEoZSkpO3RoaXMubG9nTWlzc2luZ1Jvd01vZGVsKCJhcHBseVRyYW5zYWN0aW9uIiwiY2xpZW50U2lkZSIpfWFwcGx5VHJhbnNhY3Rpb25Bc3luYyhlLHQpe3RoaXMuY2xpZW50U2lkZVJvd01vZGVsP3RoaXMuZnJhbWV3b3JrT3ZlcnJpZGVzLndyYXBJbmNvbWluZygoKT0+dGhpcy5jbGllbnRTaWRlUm93TW9kZWwuYmF0Y2hVcGRhdGVSb3dEYXRhKGUsdCkpOnRoaXMubG9nTWlzc2luZ1Jvd01vZGVsKCJhcHBseVRyYW5zYWN0aW9uQXN5bmMiLCJjbGllbnRTaWRlIil9Zmx1c2hBc3luY1RyYW5zYWN0aW9ucygpe3RoaXMuY2xpZW50U2lkZVJvd01vZGVsP3RoaXMuZnJhbWV3b3JrT3ZlcnJpZGVzLndyYXBJbmNvbWluZygoKT0+dGhpcy5jbGllbnRTaWRlUm93TW9kZWwuZmx1c2hBc3luY1RyYW5zYWN0aW9ucygpKTp0aGlzLmxvZ01pc3NpbmdSb3dNb2RlbCgiZmx1c2hBc3luY1RyYW5zYWN0aW9ucyIsImNsaWVudFNpZGUiKX1yZWZyZXNoSW5maW5pdGVDYWNoZSgpe3RoaXMuaW5maW5pdGVSb3dNb2RlbD90aGlzLmluZmluaXRlUm93TW9kZWwucmVmcmVzaENhY2hlKCk6dGhpcy5sb2dNaXNzaW5nUm93TW9kZWwoInJlZnJlc2hJbmZpbml0ZUNhY2hlIiwiaW5maW5pdGUiKX1wdXJnZUluZmluaXRlQ2FjaGUoKXt0aGlzLmluZmluaXRlUm93TW9kZWw/dGhpcy5pbmZpbml0ZVJvd01vZGVsLnB1cmdlQ2FjaGUoKTp0aGlzLmxvZ01pc3NpbmdSb3dNb2RlbCgicHVyZ2VJbmZpbml0ZUNhY2hlIiwiaW5maW5pdGUiKX1yZWZyZXNoU2VydmVyU2lkZShlKXt0aGlzLnNlcnZlclNpZGVSb3dNb2RlbD90aGlzLnNlcnZlclNpZGVSb3dNb2RlbC5yZWZyZXNoU3RvcmUoZSk6dGhpcy5sb2dNaXNzaW5nUm93TW9kZWwoInJlZnJlc2hTZXJ2ZXJTaWRlIiwic2VydmVyU2lkZSIpfWdldFNlcnZlclNpZGVHcm91cExldmVsU3RhdGUoKXtyZXR1cm4gdGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWw/dGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWwuZ2V0U3RvcmVTdGF0ZSgpOih0aGlzLmxvZ01pc3NpbmdSb3dNb2RlbCgiZ2V0U2VydmVyU2lkZUdyb3VwTGV2ZWxTdGF0ZSIsInNlcnZlclNpZGUiKSxbXSl9Z2V0SW5maW5pdGVSb3dDb3VudCgpe2lmKHRoaXMuaW5maW5pdGVSb3dNb2RlbClyZXR1cm4gdGhpcy5pbmZpbml0ZVJvd01vZGVsLmdldFJvd0NvdW50KCk7dGhpcy5sb2dNaXNzaW5nUm93TW9kZWwoImdldEluZmluaXRlUm93Q291bnQiLCJpbmZpbml0ZSIpfWlzTGFzdFJvd0luZGV4S25vd24oKXtpZih0aGlzLmluZmluaXRlUm93TW9kZWwpcmV0dXJuIHRoaXMuaW5maW5pdGVSb3dNb2RlbC5pc0xhc3RSb3dJbmRleEtub3duKCk7dGhpcy5sb2dNaXNzaW5nUm93TW9kZWwoImlzTGFzdFJvd0luZGV4S25vd24iLCJpbmZpbml0ZSIpfWdldENhY2hlQmxvY2tTdGF0ZSgpe3JldHVybiB0aGlzLnJvd05vZGVCbG9ja0xvYWRlci5nZXRCbG9ja1N0YXRlKCl9Z2V0Rmlyc3REaXNwbGF5ZWRSb3coKXtyZXR1cm4gdGhpcy5sb2dEZXByZWNhdGlvbigidjMxLjEiLCJnZXRGaXJzdERpc3BsYXllZFJvdyIsImdldEZpcnN0RGlzcGxheWVkUm93SW5kZXgiKSx0aGlzLmdldEZpcnN0RGlzcGxheWVkUm93SW5kZXgoKX1nZXRGaXJzdERpc3BsYXllZFJvd0luZGV4KCl7cmV0dXJuIHRoaXMucm93UmVuZGVyZXIuZ2V0Rmlyc3RWaXJ0dWFsUmVuZGVyZWRSb3coKX1nZXRMYXN0RGlzcGxheWVkUm93KCl7cmV0dXJuIHRoaXMubG9nRGVwcmVjYXRpb24oInYzMS4xIiwiZ2V0TGFzdERpc3BsYXllZFJvdyIsImdldExhc3REaXNwbGF5ZWRSb3dJbmRleCIpLHRoaXMuZ2V0TGFzdERpc3BsYXllZFJvd0luZGV4KCl9Z2V0TGFzdERpc3BsYXllZFJvd0luZGV4KCl7cmV0dXJuIHRoaXMucm93UmVuZGVyZXIuZ2V0TGFzdFZpcnR1YWxSZW5kZXJlZFJvdygpfWdldERpc3BsYXllZFJvd0F0SW5kZXgoZSl7cmV0dXJuIHRoaXMucm93TW9kZWwuZ2V0Um93KGUpfWdldERpc3BsYXllZFJvd0NvdW50KCl7cmV0dXJuIHRoaXMucm93TW9kZWwuZ2V0Um93Q291bnQoKX1wYWdpbmF0aW9uSXNMYXN0UGFnZUZvdW5kKCl7cmV0dXJuIHRoaXMucGFnaW5hdGlvblByb3h5LmlzTGFzdFBhZ2VGb3VuZCgpfXBhZ2luYXRpb25HZXRQYWdlU2l6ZSgpe3JldHVybiB0aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRQYWdlU2l6ZSgpfXBhZ2luYXRpb25HZXRDdXJyZW50UGFnZSgpe3JldHVybiB0aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRDdXJyZW50UGFnZSgpfXBhZ2luYXRpb25HZXRUb3RhbFBhZ2VzKCl7cmV0dXJuIHRoaXMucGFnaW5hdGlvblByb3h5LmdldFRvdGFsUGFnZXMoKX1wYWdpbmF0aW9uR2V0Um93Q291bnQoKXtyZXR1cm4gdGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0TWFzdGVyUm93Q291bnQoKX1wYWdpbmF0aW9uR29Ub05leHRQYWdlKCl7dGhpcy5wYWdpbmF0aW9uUHJveHkuZ29Ub05leHRQYWdlKCl9cGFnaW5hdGlvbkdvVG9QcmV2aW91c1BhZ2UoKXt0aGlzLnBhZ2luYXRpb25Qcm94eS5nb1RvUHJldmlvdXNQYWdlKCl9cGFnaW5hdGlvbkdvVG9GaXJzdFBhZ2UoKXt0aGlzLnBhZ2luYXRpb25Qcm94eS5nb1RvRmlyc3RQYWdlKCl9cGFnaW5hdGlvbkdvVG9MYXN0UGFnZSgpe3RoaXMucGFnaW5hdGlvblByb3h5LmdvVG9MYXN0UGFnZSgpfXBhZ2luYXRpb25Hb1RvUGFnZShlKXt0aGlzLnBhZ2luYXRpb25Qcm94eS5nb1RvUGFnZShlKX1zaXplQ29sdW1uc1RvRml0KGUpeyJudW1iZXIiPT10eXBlb2YgZT90aGlzLmNvbHVtbk1vZGVsLnNpemVDb2x1bW5zVG9GaXQoZSwiYXBpIik6dGhpcy5ncmlkQm9keUN0cmwuc2l6ZUNvbHVtbnNUb0ZpdChlKX1zZXRDb2x1bW5Hcm91cE9wZW5lZChlLHQpe3RoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uR3JvdXBPcGVuZWQoZSx0LCJhcGkiKX1nZXRDb2x1bW5Hcm91cChlLHQpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldENvbHVtbkdyb3VwKGUsdCl9Z2V0UHJvdmlkZWRDb2x1bW5Hcm91cChlKXtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5nZXRQcm92aWRlZENvbHVtbkdyb3VwKGUpfWdldERpc3BsYXlOYW1lRm9yQ29sdW1uKGUsdCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW4oZSx0KXx8IiJ9Z2V0RGlzcGxheU5hbWVGb3JDb2x1bW5Hcm91cChlLHQpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXlOYW1lRm9yQ29sdW1uR3JvdXAoZSx0KXx8IiJ9Z2V0Q29sdW1uKGUpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldFByaW1hcnlDb2x1bW4oZSl9Z2V0Q29sdW1ucygpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldEFsbFByaW1hcnlDb2x1bW5zKCl9YXBwbHlDb2x1bW5TdGF0ZShlKXtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5hcHBseUNvbHVtblN0YXRlKGUsImFwaSIpfWdldENvbHVtblN0YXRlKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0Q29sdW1uU3RhdGUoKX1yZXNldENvbHVtblN0YXRlKCl7dGhpcy5jb2x1bW5Nb2RlbC5yZXNldENvbHVtblN0YXRlKCJhcGkiKX1nZXRDb2x1bW5Hcm91cFN0YXRlKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0Q29sdW1uR3JvdXBTdGF0ZSgpfXNldENvbHVtbkdyb3VwU3RhdGUoZSl7dGhpcy5jb2x1bW5Nb2RlbC5zZXRDb2x1bW5Hcm91cFN0YXRlKGUsImFwaSIpfXJlc2V0Q29sdW1uR3JvdXBTdGF0ZSgpe3RoaXMuY29sdW1uTW9kZWwucmVzZXRDb2x1bW5Hcm91cFN0YXRlKCJhcGkiKX1pc1Bpbm5pbmcoKXtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5pc1Bpbm5pbmdMZWZ0KCl8fHRoaXMuY29sdW1uTW9kZWwuaXNQaW5uaW5nUmlnaHQoKX1pc1Bpbm5pbmdMZWZ0KCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuaXNQaW5uaW5nTGVmdCgpfWlzUGlubmluZ1JpZ2h0KCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuaXNQaW5uaW5nUmlnaHQoKX1nZXREaXNwbGF5ZWRDb2xBZnRlcihlKXtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5ZWRDb2xBZnRlcihlKX1nZXREaXNwbGF5ZWRDb2xCZWZvcmUoZSl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheWVkQ29sQmVmb3JlKGUpfXNldENvbHVtblZpc2libGUoZSx0KXt0aGlzLmxvZ0RlcHJlY2F0aW9uKCJ2MzEuMSIsInNldENvbHVtblZpc2libGUoa2V5LHZpc2libGUpIiwic2V0Q29sdW1uc1Zpc2libGUoW2tleV0sdmlzaWJsZSkiKSx0aGlzLmNvbHVtbk1vZGVsLnNldENvbHVtbnNWaXNpYmxlKFtlXSx0LCJhcGkiKX1zZXRDb2x1bW5zVmlzaWJsZShlLHQpe3RoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uc1Zpc2libGUoZSx0LCJhcGkiKX1zZXRDb2x1bW5QaW5uZWQoZSx0KXt0aGlzLmxvZ0RlcHJlY2F0aW9uKCJ2MzEuMSIsInNldENvbHVtblBpbm5lZChrZXkscGlubmVkKSIsInNldENvbHVtbnNQaW5uZWQoW2tleV0scGlubmVkKSIpLHRoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uc1Bpbm5lZChbZV0sdCwiYXBpIil9c2V0Q29sdW1uc1Bpbm5lZChlLHQpe3RoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uc1Bpbm5lZChlLHQsImFwaSIpfWdldEFsbEdyaWRDb2x1bW5zKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsR3JpZENvbHVtbnMoKX1nZXREaXNwbGF5ZWRMZWZ0Q29sdW1ucygpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXllZExlZnRDb2x1bW5zKCl9Z2V0RGlzcGxheWVkQ2VudGVyQ29sdW1ucygpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXllZENlbnRlckNvbHVtbnMoKX1nZXREaXNwbGF5ZWRSaWdodENvbHVtbnMoKXtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5ZWRSaWdodENvbHVtbnMoKX1nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsRGlzcGxheWVkQ29sdW1ucygpfWdldEFsbERpc3BsYXllZFZpcnR1YWxDb2x1bW5zKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0Vmlld3BvcnRDb2x1bW5zKCl9bW92ZUNvbHVtbihlLHQpe3RoaXMubG9nRGVwcmVjYXRpb24oInYzMS4xIiwibW92ZUNvbHVtbihrZXksIHRvSW5kZXgpIiwibW92ZUNvbHVtbnMoW2tleV0sIHRvSW5kZXgpIiksdGhpcy5jb2x1bW5Nb2RlbC5tb3ZlQ29sdW1ucyhbZV0sdCwiYXBpIil9bW92ZUNvbHVtbkJ5SW5kZXgoZSx0KXt0aGlzLmNvbHVtbk1vZGVsLm1vdmVDb2x1bW5CeUluZGV4KGUsdCwiYXBpIil9bW92ZUNvbHVtbnMoZSx0KXt0aGlzLmNvbHVtbk1vZGVsLm1vdmVDb2x1bW5zKGUsdCwiYXBpIil9bW92ZVJvd0dyb3VwQ29sdW1uKGUsdCl7dGhpcy5jb2x1bW5Nb2RlbC5tb3ZlUm93R3JvdXBDb2x1bW4oZSx0LCJhcGkiKX1zZXRDb2x1bW5BZ2dGdW5jKGUsdCl7dGhpcy5jb2x1bW5Nb2RlbC5zZXRDb2x1bW5BZ2dGdW5jKGUsdCwiYXBpIil9c2V0Q29sdW1uV2lkdGgoZSx0LGk9ITAscz0iYXBpIil7dGhpcy5sb2dEZXByZWNhdGlvbigidjMxLjEiLCJzZXRDb2x1bW5XaWR0aChjb2wsIHdpZHRoKSIsInNldENvbHVtbldpZHRocyhbe2tleTogY29sLCBuZXdXaWR0aDogd2lkdGh9XSkiKSx0aGlzLmNvbHVtbk1vZGVsLnNldENvbHVtbldpZHRocyhbe2tleTplLG5ld1dpZHRoOnR9XSwhMSxpLHMpfXNldENvbHVtbldpZHRocyhlLHQ9ITAsaT0iYXBpIil7dGhpcy5jb2x1bW5Nb2RlbC5zZXRDb2x1bW5XaWR0aHMoZSwhMSx0LGkpfWlzUGl2b3RNb2RlKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKX1nZXRQaXZvdFJlc3VsdENvbHVtbihlLHQpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldFNlY29uZGFyeVBpdm90Q29sdW1uKGUsdCl9c2V0VmFsdWVDb2x1bW5zKGUpe3RoaXMuY29sdW1uTW9kZWwuc2V0VmFsdWVDb2x1bW5zKGUsImFwaSIpfWdldFZhbHVlQ29sdW1ucygpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldFZhbHVlQ29sdW1ucygpfXJlbW92ZVZhbHVlQ29sdW1uKGUpe3RoaXMubG9nRGVwcmVjYXRpb24oInYzMS4xIiwicmVtb3ZlVmFsdWVDb2x1bW4oY29sS2V5KSIsInJlbW92ZVZhbHVlQ29sdW1ucyhbY29sS2V5XSkiKSx0aGlzLmNvbHVtbk1vZGVsLnJlbW92ZVZhbHVlQ29sdW1ucyhbZV0sImFwaSIpfXJlbW92ZVZhbHVlQ29sdW1ucyhlKXt0aGlzLmNvbHVtbk1vZGVsLnJlbW92ZVZhbHVlQ29sdW1ucyhlLCJhcGkiKX1hZGRWYWx1ZUNvbHVtbihlKXt0aGlzLmxvZ0RlcHJlY2F0aW9uKCJ2MzEuMSIsImFkZFZhbHVlQ29sdW1uKGNvbEtleSkiLCJhZGRWYWx1ZUNvbHVtbnMoW2NvbEtleV0pIiksdGhpcy5jb2x1bW5Nb2RlbC5hZGRWYWx1ZUNvbHVtbnMoW2VdLCJhcGkiKX1hZGRWYWx1ZUNvbHVtbnMoZSl7dGhpcy5jb2x1bW5Nb2RlbC5hZGRWYWx1ZUNvbHVtbnMoZSwiYXBpIil9c2V0Um93R3JvdXBDb2x1bW5zKGUpe3RoaXMuY29sdW1uTW9kZWwuc2V0Um93R3JvdXBDb2x1bW5zKGUsImFwaSIpfXJlbW92ZVJvd0dyb3VwQ29sdW1uKGUpe3RoaXMubG9nRGVwcmVjYXRpb24oInYzMS4xIiwicmVtb3ZlUm93R3JvdXBDb2x1bW4oY29sS2V5KSIsInJlbW92ZVJvd0dyb3VwQ29sdW1ucyhbY29sS2V5XSkiKSx0aGlzLmNvbHVtbk1vZGVsLnJlbW92ZVJvd0dyb3VwQ29sdW1ucyhbZV0sImFwaSIpfXJlbW92ZVJvd0dyb3VwQ29sdW1ucyhlKXt0aGlzLmNvbHVtbk1vZGVsLnJlbW92ZVJvd0dyb3VwQ29sdW1ucyhlLCJhcGkiKX1hZGRSb3dHcm91cENvbHVtbihlKXt0aGlzLmxvZ0RlcHJlY2F0aW9uKCJ2MzEuMSIsImFkZFJvd0dyb3VwQ29sdW1uKGNvbEtleSkiLCJhZGRSb3dHcm91cENvbHVtbnMoW2NvbEtleV0pIiksdGhpcy5jb2x1bW5Nb2RlbC5hZGRSb3dHcm91cENvbHVtbnMoW2VdLCJhcGkiKX1hZGRSb3dHcm91cENvbHVtbnMoZSl7dGhpcy5jb2x1bW5Nb2RlbC5hZGRSb3dHcm91cENvbHVtbnMoZSwiYXBpIil9Z2V0Um93R3JvdXBDb2x1bW5zKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0Um93R3JvdXBDb2x1bW5zKCl9c2V0UGl2b3RDb2x1bW5zKGUpe3RoaXMuY29sdW1uTW9kZWwuc2V0UGl2b3RDb2x1bW5zKGUsImFwaSIpfXJlbW92ZVBpdm90Q29sdW1uKGUpe3RoaXMubG9nRGVwcmVjYXRpb24oInYzMS4xIiwicmVtb3ZlUGl2b3RDb2x1bW4oY29sS2V5KSIsInJlbW92ZVBpdm90Q29sdW1ucyhbY29sS2V5XSkiKSx0aGlzLmNvbHVtbk1vZGVsLnJlbW92ZVBpdm90Q29sdW1ucyhbZV0sImFwaSIpfXJlbW92ZVBpdm90Q29sdW1ucyhlKXt0aGlzLmNvbHVtbk1vZGVsLnJlbW92ZVBpdm90Q29sdW1ucyhlLCJhcGkiKX1hZGRQaXZvdENvbHVtbihlKXt0aGlzLmxvZ0RlcHJlY2F0aW9uKCJ2MzEuMSIsImFkZFBpdm90Q29sdW1uKGNvbEtleSkiLCJhZGRQaXZvdENvbHVtbnMoW2NvbEtleV0pIiksdGhpcy5jb2x1bW5Nb2RlbC5hZGRQaXZvdENvbHVtbnMoW2VdLCJhcGkiKX1hZGRQaXZvdENvbHVtbnMoZSl7dGhpcy5jb2x1bW5Nb2RlbC5hZGRQaXZvdENvbHVtbnMoZSwiYXBpIil9Z2V0UGl2b3RDb2x1bW5zKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0UGl2b3RDb2x1bW5zKCl9Z2V0TGVmdERpc3BsYXllZENvbHVtbkdyb3Vwcygpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXllZFRyZWVMZWZ0KCl9Z2V0Q2VudGVyRGlzcGxheWVkQ29sdW1uR3JvdXBzKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheWVkVHJlZUNlbnRyZSgpfWdldFJpZ2h0RGlzcGxheWVkQ29sdW1uR3JvdXBzKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheWVkVHJlZVJpZ2h0KCl9Z2V0QWxsRGlzcGxheWVkQ29sdW1uR3JvdXBzKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsRGlzcGxheWVkVHJlZXMoKX1hdXRvU2l6ZUNvbHVtbihlLHQpe3JldHVybiB0aGlzLmxvZ0RlcHJlY2F0aW9uKCJ2MzEuMSIsImF1dG9TaXplQ29sdW1uKGtleSwgc2tpcEhlYWRlcikiLCJhdXRvU2l6ZUNvbHVtbnMoW2tleV0sIHNraXBIZWFkZXIpIiksdGhpcy5jb2x1bW5Nb2RlbC5hdXRvU2l6ZUNvbHVtbnMoe2NvbHVtbnM6W2VdLHNraXBIZWFkZXI6dCxzb3VyY2U6ImFwaSJ9KX1hdXRvU2l6ZUNvbHVtbnMoZSx0KXt0aGlzLmNvbHVtbk1vZGVsLmF1dG9TaXplQ29sdW1ucyh7Y29sdW1uczplLHNraXBIZWFkZXI6dCxzb3VyY2U6ImFwaSJ9KX1hdXRvU2l6ZUFsbENvbHVtbnMoZSl7dGhpcy5jb2x1bW5Nb2RlbC5hdXRvU2l6ZUFsbENvbHVtbnMoImFwaSIsZSl9c2V0UGl2b3RSZXN1bHRDb2x1bW5zKGUpe3RoaXMuY29sdW1uTW9kZWwuc2V0U2Vjb25kYXJ5Q29sdW1ucyhlLCJhcGkiKX1nZXRQaXZvdFJlc3VsdENvbHVtbnMoKXtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5nZXRTZWNvbmRhcnlDb2x1bW5zKCl9Z2V0U3RhdGUoKXtyZXR1cm4gdGhpcy5zdGF0ZVNlcnZpY2UuZ2V0U3RhdGUoKX1nZXRHcmlkT3B0aW9uKGUpe3JldHVybiB0aGlzLmdvcy5nZXQoZSl9c2V0R3JpZE9wdGlvbihlLHQpe3RoaXMudXBkYXRlR3JpZE9wdGlvbnMoe1tlXTp0fSl9dXBkYXRlR3JpZE9wdGlvbnMoZSl7dGhpcy5nb3MudXBkYXRlR3JpZE9wdGlvbnMoe29wdGlvbnM6ZX0pfV9faW50ZXJuYWxVcGRhdGVHcmlkT3B0aW9ucyhlKXt0aGlzLmdvcy51cGRhdGVHcmlkT3B0aW9ucyh7b3B0aW9uczplLHNvdXJjZToiZ3JpZE9wdGlvbnNVcGRhdGVkIn0pfWRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKGUsdCl7aihgc2V0JHtlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpfSR7ZS5zbGljZSgxLGUubGVuZ3RoKX0gaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSAnYXBpLnNldEdyaWRPcHRpb24oJyR7ZX0nLCBuZXdWYWx1ZSknIG9yICdhcGkudXBkYXRlR3JpZE9wdGlvbnMoeyAke2V9OiBuZXdWYWx1ZSB9KScgaW5zdGVhZC5gKSx0aGlzLnNldEdyaWRPcHRpb24oZSx0KX1zZXRQaXZvdE1vZGUoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigicGl2b3RNb2RlIixlKX1zZXRQaW5uZWRUb3BSb3dEYXRhKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInBpbm5lZFRvcFJvd0RhdGEiLGUpfXNldFBpbm5lZEJvdHRvbVJvd0RhdGEoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigicGlubmVkQm90dG9tUm93RGF0YSIsZSl9c2V0UG9wdXBQYXJlbnQoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigicG9wdXBQYXJlbnQiLGUpfXNldFN1cHByZXNzTW9kZWxVcGRhdGVBZnRlclVwZGF0ZVRyYW5zYWN0aW9uKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInN1cHByZXNzTW9kZWxVcGRhdGVBZnRlclVwZGF0ZVRyYW5zYWN0aW9uIixlKX1zZXREYXRhVHlwZURlZmluaXRpb25zKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImRhdGFUeXBlRGVmaW5pdGlvbnMiLGUpfXNldFBhZ2luYXRpb24oZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigicGFnaW5hdGlvbiIsZSl9cGFnaW5hdGlvblNldFBhZ2VTaXplKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInBhZ2luYXRpb25QYWdlU2l6ZSIsZSl9c2V0U2lkZUJhcihlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJzaWRlQmFyIixlKX1zZXRTdXBwcmVzc0NsaXBib2FyZFBhc3RlKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInN1cHByZXNzQ2xpcGJvYXJkUGFzdGUiLGUpfXNldEdyb3VwUmVtb3ZlU2luZ2xlQ2hpbGRyZW4oZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiZ3JvdXBSZW1vdmVTaW5nbGVDaGlsZHJlbiIsZSl9c2V0R3JvdXBSZW1vdmVMb3dlc3RTaW5nbGVDaGlsZHJlbihlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJncm91cFJlbW92ZUxvd2VzdFNpbmdsZUNoaWxkcmVuIixlKX1zZXRHcm91cERpc3BsYXlUeXBlKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImdyb3VwRGlzcGxheVR5cGUiLGUpfXNldEdyb3VwSW5jbHVkZUZvb3RlcihlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJncm91cEluY2x1ZGVGb290ZXIiLGUpfXNldEdyb3VwSW5jbHVkZVRvdGFsRm9vdGVyKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImdyb3VwSW5jbHVkZVRvdGFsRm9vdGVyIixlKX1zZXRSb3dDbGFzcyhlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJyb3dDbGFzcyIsZSl9c2V0RGVsdGFTb3J0KGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImRlbHRhU29ydCIsZSl9c2V0U3VwcHJlc3NSb3dEcmFnKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInN1cHByZXNzUm93RHJhZyIsZSl9c2V0U3VwcHJlc3NNb3ZlV2hlblJvd0RyYWdnaW5nKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInN1cHByZXNzTW92ZVdoZW5Sb3dEcmFnZ2luZyIsZSl9c2V0U3VwcHJlc3NSb3dDbGlja1NlbGVjdGlvbihlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJzdXBwcmVzc1Jvd0NsaWNrU2VsZWN0aW9uIixlKX1zZXRFbmFibGVBZHZhbmNlZEZpbHRlcihlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJlbmFibGVBZHZhbmNlZEZpbHRlciIsZSl9c2V0SW5jbHVkZUhpZGRlbkNvbHVtbnNJbkFkdmFuY2VkRmlsdGVyKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImluY2x1ZGVIaWRkZW5Db2x1bW5zSW5BZHZhbmNlZEZpbHRlciIsZSl9c2V0QWR2YW5jZWRGaWx0ZXJQYXJlbnQoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiYWR2YW5jZWRGaWx0ZXJQYXJlbnQiLGUpfXNldEFkdmFuY2VkRmlsdGVyQnVpbGRlclBhcmFtcyhlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJQYXJhbXMiLGUpfXNldFF1aWNrRmlsdGVyKGUpe2ooInNldFF1aWNrRmlsdGVyIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgJ2FwaS5zZXRHcmlkT3B0aW9uKCdxdWlja0ZpbHRlclRleHQnLCBuZXdWYWx1ZSknIG9yICdhcGkudXBkYXRlR3JpZE9wdGlvbnMoeyBxdWlja0ZpbHRlclRleHQ6IG5ld1ZhbHVlIH0pJyBpbnN0ZWFkLiIpLHRoaXMuZ29zLnVwZGF0ZUdyaWRPcHRpb25zKHtvcHRpb25zOntxdWlja0ZpbHRlclRleHQ6ZX19KX1zZXRFeGNsdWRlSGlkZGVuQ29sdW1uc0Zyb21RdWlja0ZpbHRlcihlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJpbmNsdWRlSGlkZGVuQ29sdW1uc0luUXVpY2tGaWx0ZXIiLCFlKX1zZXRJbmNsdWRlSGlkZGVuQ29sdW1uc0luUXVpY2tGaWx0ZXIoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiaW5jbHVkZUhpZGRlbkNvbHVtbnNJblF1aWNrRmlsdGVyIixlKX1zZXRRdWlja0ZpbHRlclBhcnNlcihlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJxdWlja0ZpbHRlclBhcnNlciIsZSl9c2V0UXVpY2tGaWx0ZXJNYXRjaGVyKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInF1aWNrRmlsdGVyTWF0Y2hlciIsZSl9c2V0QWx3YXlzU2hvd0hvcml6b250YWxTY3JvbGwoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiYWx3YXlzU2hvd0hvcml6b250YWxTY3JvbGwiLGUpfXNldEFsd2F5c1Nob3dWZXJ0aWNhbFNjcm9sbChlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJhbHdheXNTaG93VmVydGljYWxTY3JvbGwiLGUpfXNldEZ1bmN0aW9uc1JlYWRPbmx5KGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImZ1bmN0aW9uc1JlYWRPbmx5IixlKX1zZXRDb2x1bW5EZWZzKGUsdD0iYXBpIil7aigic2V0Q29sdW1uRGVmcyBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICdhcGkuc2V0R3JpZE9wdGlvbignY29sdW1uRGVmcycsIG5ld1ZhbHVlKScgb3IgJ2FwaS51cGRhdGVHcmlkT3B0aW9ucyh7IGNvbHVtbkRlZnM6IG5ld1ZhbHVlIH0pJyBpbnN0ZWFkLiIpLHRoaXMuZ29zLnVwZGF0ZUdyaWRPcHRpb25zKHtvcHRpb25zOntjb2x1bW5EZWZzOmV9LHNvdXJjZTp0fSl9c2V0QXV0b0dyb3VwQ29sdW1uRGVmKGUsdD0iYXBpIil7aigic2V0QXV0b0dyb3VwQ29sdW1uRGVmIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgJ2FwaS5zZXRHcmlkT3B0aW9uKCdhdXRvR3JvdXBDb2x1bW5EZWYnLCBuZXdWYWx1ZSknIG9yICdhcGkudXBkYXRlR3JpZE9wdGlvbnMoeyBhdXRvR3JvdXBDb2x1bW5EZWY6IG5ld1ZhbHVlIH0pJyBpbnN0ZWFkLiIpLHRoaXMuZ29zLnVwZGF0ZUdyaWRPcHRpb25zKHtvcHRpb25zOnthdXRvR3JvdXBDb2x1bW5EZWY6ZX0sc291cmNlOnR9KX1zZXREZWZhdWx0Q29sRGVmKGUsdD0iYXBpIil7aigic2V0RGVmYXVsdENvbERlZiBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICdhcGkuc2V0R3JpZE9wdGlvbignZGVmYXVsdENvbERlZicsIG5ld1ZhbHVlKScgb3IgJ2FwaS51cGRhdGVHcmlkT3B0aW9ucyh7IGRlZmF1bHRDb2xEZWY6IG5ld1ZhbHVlIH0pJyBpbnN0ZWFkLiIpLHRoaXMuZ29zLnVwZGF0ZUdyaWRPcHRpb25zKHtvcHRpb25zOntkZWZhdWx0Q29sRGVmOmV9LHNvdXJjZTp0fSl9c2V0Q29sdW1uVHlwZXMoZSx0PSJhcGkiKXtqKCJzZXRDb2x1bW5UeXBlcyBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICdhcGkuc2V0R3JpZE9wdGlvbignY29sdW1uVHlwZXMnLCBuZXdWYWx1ZSknIG9yICdhcGkudXBkYXRlR3JpZE9wdGlvbnMoeyBjb2x1bW5UeXBlczogbmV3VmFsdWUgfSknIGluc3RlYWQuIiksdGhpcy5nb3MudXBkYXRlR3JpZE9wdGlvbnMoe29wdGlvbnM6e2NvbHVtblR5cGVzOmV9LHNvdXJjZTp0fSl9c2V0VHJlZURhdGEoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigidHJlZURhdGEiLGUpfXNldFNlcnZlclNpZGVEYXRhc291cmNlKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInNlcnZlclNpZGVEYXRhc291cmNlIixlKX1zZXRDYWNoZUJsb2NrU2l6ZShlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJjYWNoZUJsb2NrU2l6ZSIsZSl9c2V0RGF0YXNvdXJjZShlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJkYXRhc291cmNlIixlKX1zZXRWaWV3cG9ydERhdGFzb3VyY2UoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigidmlld3BvcnREYXRhc291cmNlIixlKX1zZXRSb3dEYXRhKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInJvd0RhdGEiLGUpfXNldEVuYWJsZUNlbGxUZXh0U2VsZWN0aW9uKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImVuYWJsZUNlbGxUZXh0U2VsZWN0aW9uIixlKX1zZXRIZWFkZXJIZWlnaHQoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiaGVhZGVySGVpZ2h0IixlKX1zZXREb21MYXlvdXQoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiZG9tTGF5b3V0IixlKX1zZXRGaWxsSGFuZGxlRGlyZWN0aW9uKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImZpbGxIYW5kbGVEaXJlY3Rpb24iLGUpfXNldEdyb3VwSGVhZGVySGVpZ2h0KGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImdyb3VwSGVhZGVySGVpZ2h0IixlKX1zZXRGbG9hdGluZ0ZpbHRlcnNIZWlnaHQoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiZmxvYXRpbmdGaWx0ZXJzSGVpZ2h0IixlKX1zZXRQaXZvdEhlYWRlckhlaWdodChlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJwaXZvdEhlYWRlckhlaWdodCIsZSl9c2V0UGl2b3RHcm91cEhlYWRlckhlaWdodChlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJwaXZvdEdyb3VwSGVhZGVySGVpZ2h0IixlKX1zZXRBbmltYXRlUm93cyhlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJhbmltYXRlUm93cyIsZSl9c2V0SXNFeHRlcm5hbEZpbHRlclByZXNlbnQoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiaXNFeHRlcm5hbEZpbHRlclByZXNlbnQiLGUpfXNldERvZXNFeHRlcm5hbEZpbHRlclBhc3MoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiZG9lc0V4dGVybmFsRmlsdGVyUGFzcyIsZSl9c2V0TmF2aWdhdGVUb05leHRDZWxsKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oIm5hdmlnYXRlVG9OZXh0Q2VsbCIsZSl9c2V0VGFiVG9OZXh0Q2VsbChlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJ0YWJUb05leHRDZWxsIixlKX1zZXRUYWJUb05leHRIZWFkZXIoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigidGFiVG9OZXh0SGVhZGVyIixlKX1zZXROYXZpZ2F0ZVRvTmV4dEhlYWRlcihlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJuYXZpZ2F0ZVRvTmV4dEhlYWRlciIsZSl9c2V0Um93R3JvdXBQYW5lbFNob3coZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigicm93R3JvdXBQYW5lbFNob3ciLGUpfXNldEdldEdyb3VwUm93QWdnKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImdldEdyb3VwUm93QWdnIixlKX1zZXRHZXRCdXNpbmVzc0tleUZvck5vZGUoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiZ2V0QnVzaW5lc3NLZXlGb3JOb2RlIixlKX1zZXRHZXRDaGlsZENvdW50KGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImdldENoaWxkQ291bnQiLGUpfXNldFByb2Nlc3NSb3dQb3N0Q3JlYXRlKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInByb2Nlc3NSb3dQb3N0Q3JlYXRlIixlKX1zZXRHZXRSb3dJZChlKXtqKCJnZXRSb3dJZCBpcyBhIHN0YXRpYyBwcm9wZXJ0eSBhbmQgY2FuIG5vIGxvbmdlciBiZSB1cGRhdGVkLiIpfXNldEdldFJvd0NsYXNzKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImdldFJvd0NsYXNzIixlKX1zZXRJc0Z1bGxXaWR0aFJvdyhlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJpc0Z1bGxXaWR0aFJvdyIsZSl9c2V0SXNSb3dTZWxlY3RhYmxlKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImlzUm93U2VsZWN0YWJsZSIsZSl9c2V0SXNSb3dNYXN0ZXIoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiaXNSb3dNYXN0ZXIiLGUpfXNldFBvc3RTb3J0Um93cyhlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJwb3N0U29ydFJvd3MiLGUpfXNldEdldERvY3VtZW50KGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImdldERvY3VtZW50IixlKX1zZXRHZXRDb250ZXh0TWVudUl0ZW1zKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImdldENvbnRleHRNZW51SXRlbXMiLGUpfXNldEdldE1haW5NZW51SXRlbXMoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiZ2V0TWFpbk1lbnVJdGVtcyIsZSl9c2V0UHJvY2Vzc0NlbGxGb3JDbGlwYm9hcmQoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigicHJvY2Vzc0NlbGxGb3JDbGlwYm9hcmQiLGUpfXNldFNlbmRUb0NsaXBib2FyZChlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJzZW5kVG9DbGlwYm9hcmQiLGUpfXNldFByb2Nlc3NDZWxsRnJvbUNsaXBib2FyZChlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJwcm9jZXNzQ2VsbEZyb21DbGlwYm9hcmQiLGUpfXNldFByb2Nlc3NQaXZvdFJlc3VsdENvbERlZihlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJwcm9jZXNzUGl2b3RSZXN1bHRDb2xEZWYiLGUpfXNldFByb2Nlc3NQaXZvdFJlc3VsdENvbEdyb3VwRGVmKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInByb2Nlc3NQaXZvdFJlc3VsdENvbEdyb3VwRGVmIixlKX1zZXRQb3N0UHJvY2Vzc1BvcHVwKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInBvc3RQcm9jZXNzUG9wdXAiLGUpfXNldEluaXRpYWxHcm91cE9yZGVyQ29tcGFyYXRvcihlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJpbml0aWFsR3JvdXBPcmRlckNvbXBhcmF0b3IiLGUpfXNldEdldENoYXJ0VG9vbGJhckl0ZW1zKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImdldENoYXJ0VG9vbGJhckl0ZW1zIixlKX1zZXRQYWdpbmF0aW9uTnVtYmVyRm9ybWF0dGVyKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oInBhZ2luYXRpb25OdW1iZXJGb3JtYXR0ZXIiLGUpfXNldEdldFNlcnZlclNpZGVHcm91cExldmVsUGFyYW1zKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImdldFNlcnZlclNpZGVHcm91cExldmVsUGFyYW1zIixlKX1zZXRJc1NlcnZlclNpZGVHcm91cE9wZW5CeURlZmF1bHQoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiaXNTZXJ2ZXJTaWRlR3JvdXBPcGVuQnlEZWZhdWx0IixlKX1zZXRJc0FwcGx5U2VydmVyU2lkZVRyYW5zYWN0aW9uKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImlzQXBwbHlTZXJ2ZXJTaWRlVHJhbnNhY3Rpb24iLGUpfXNldElzU2VydmVyU2lkZUdyb3VwKGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImlzU2VydmVyU2lkZUdyb3VwIixlKX1zZXRHZXRTZXJ2ZXJTaWRlR3JvdXBLZXkoZSl7dGhpcy5kZXByZWNhdGVkVXBkYXRlR3JpZE9wdGlvbigiZ2V0U2VydmVyU2lkZUdyb3VwS2V5IixlKX1zZXRHZXRSb3dTdHlsZShlKXt0aGlzLmRlcHJlY2F0ZWRVcGRhdGVHcmlkT3B0aW9uKCJnZXRSb3dTdHlsZSIsZSl9c2V0R2V0Um93SGVpZ2h0KGUpe3RoaXMuZGVwcmVjYXRlZFVwZGF0ZUdyaWRPcHRpb24oImdldFJvd0hlaWdodCIsZSl9fTtXbihbaGUoImNzdkNyZWF0b3IiKV0sVW4ucHJvdG90eXBlLCJjc3ZDcmVhdG9yIix2b2lkIDApLFduKFtoZSgiZXhjZWxDcmVhdG9yIildLFVuLnByb3RvdHlwZSwiZXhjZWxDcmVhdG9yIix2b2lkIDApLFduKFtjZSgicm93UmVuZGVyZXIiKV0sVW4ucHJvdG90eXBlLCJyb3dSZW5kZXJlciIsdm9pZCAwKSxXbihbY2UoIm5hdmlnYXRpb25TZXJ2aWNlIildLFVuLnByb3RvdHlwZSwibmF2aWdhdGlvblNlcnZpY2UiLHZvaWQgMCksV24oW2NlKCJmaWx0ZXJNYW5hZ2VyIildLFVuLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSxXbihbY2UoImNvbHVtbk1vZGVsIildLFVuLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksV24oW2NlKCJzZWxlY3Rpb25TZXJ2aWNlIildLFVuLnByb3RvdHlwZSwic2VsZWN0aW9uU2VydmljZSIsdm9pZCAwKSxXbihbY2UoImdyaWRPcHRpb25zU2VydmljZSIpXSxVbi5wcm90b3R5cGUsImdvcyIsdm9pZCAwKSxXbihbY2UoInZhbHVlU2VydmljZSIpXSxVbi5wcm90b3R5cGUsInZhbHVlU2VydmljZSIsdm9pZCAwKSxXbihbY2UoImFsaWduZWRHcmlkc1NlcnZpY2UiKV0sVW4ucHJvdG90eXBlLCJhbGlnbmVkR3JpZHNTZXJ2aWNlIix2b2lkIDApLFduKFtjZSgiZXZlbnRTZXJ2aWNlIildLFVuLnByb3RvdHlwZSwiZXZlbnRTZXJ2aWNlIix2b2lkIDApLFduKFtjZSgicGlubmVkUm93TW9kZWwiKV0sVW4ucHJvdG90eXBlLCJwaW5uZWRSb3dNb2RlbCIsdm9pZCAwKSxXbihbY2UoImNvbnRleHQiKV0sVW4ucHJvdG90eXBlLCJjb250ZXh0Iix2b2lkIDApLFduKFtjZSgicm93TW9kZWwiKV0sVW4ucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSxXbihbY2UoInNvcnRDb250cm9sbGVyIildLFVuLnByb3RvdHlwZSwic29ydENvbnRyb2xsZXIiLHZvaWQgMCksV24oW2NlKCJwYWdpbmF0aW9uUHJveHkiKV0sVW4ucHJvdG90eXBlLCJwYWdpbmF0aW9uUHJveHkiLHZvaWQgMCksV24oW2NlKCJmb2N1c1NlcnZpY2UiKV0sVW4ucHJvdG90eXBlLCJmb2N1c1NlcnZpY2UiLHZvaWQgMCksV24oW2NlKCJkcmFnQW5kRHJvcFNlcnZpY2UiKV0sVW4ucHJvdG90eXBlLCJkcmFnQW5kRHJvcFNlcnZpY2UiLHZvaWQgMCksV24oW2hlKCJyYW5nZVNlcnZpY2UiKV0sVW4ucHJvdG90eXBlLCJyYW5nZVNlcnZpY2UiLHZvaWQgMCksV24oW2hlKCJjbGlwYm9hcmRTZXJ2aWNlIildLFVuLnByb3RvdHlwZSwiY2xpcGJvYXJkU2VydmljZSIsdm9pZCAwKSxXbihbaGUoImFnZ0Z1bmNTZXJ2aWNlIildLFVuLnByb3RvdHlwZSwiYWdnRnVuY1NlcnZpY2UiLHZvaWQgMCksV24oW2NlKCJtZW51U2VydmljZSIpXSxVbi5wcm90b3R5cGUsIm1lbnVTZXJ2aWNlIix2b2lkIDApLFduKFtjZSgidmFsdWVDYWNoZSIpXSxVbi5wcm90b3R5cGUsInZhbHVlQ2FjaGUiLHZvaWQgMCksV24oW2NlKCJhbmltYXRpb25GcmFtZVNlcnZpY2UiKV0sVW4ucHJvdG90eXBlLCJhbmltYXRpb25GcmFtZVNlcnZpY2UiLHZvaWQgMCksV24oW2hlKCJzdGF0dXNCYXJTZXJ2aWNlIildLFVuLnByb3RvdHlwZSwic3RhdHVzQmFyU2VydmljZSIsdm9pZCAwKSxXbihbaGUoImNoYXJ0U2VydmljZSIpXSxVbi5wcm90b3R5cGUsImNoYXJ0U2VydmljZSIsdm9pZCAwKSxXbihbaGUoInVuZG9SZWRvU2VydmljZSIpXSxVbi5wcm90b3R5cGUsInVuZG9SZWRvU2VydmljZSIsdm9pZCAwKSxXbihbaGUoInJvd05vZGVCbG9ja0xvYWRlciIpXSxVbi5wcm90b3R5cGUsInJvd05vZGVCbG9ja0xvYWRlciIsdm9pZCAwKSxXbihbaGUoInNzcm1UcmFuc2FjdGlvbk1hbmFnZXIiKV0sVW4ucHJvdG90eXBlLCJzZXJ2ZXJTaWRlVHJhbnNhY3Rpb25NYW5hZ2VyIix2b2lkIDApLFduKFtjZSgiY3RybHNTZXJ2aWNlIildLFVuLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLFduKFtjZSgib3ZlcmxheVNlcnZpY2UiKV0sVW4ucHJvdG90eXBlLCJvdmVybGF5U2VydmljZSIsdm9pZCAwKSxXbihbaGUoInNpZGVCYXJTZXJ2aWNlIildLFVuLnByb3RvdHlwZSwic2lkZUJhclNlcnZpY2UiLHZvaWQgMCksV24oW2NlKCJzdGF0ZVNlcnZpY2UiKV0sVW4ucHJvdG90eXBlLCJzdGF0ZVNlcnZpY2UiLHZvaWQgMCksV24oW2NlKCJleHBhbnNpb25TZXJ2aWNlIildLFVuLnByb3RvdHlwZSwiZXhwYW5zaW9uU2VydmljZSIsdm9pZCAwKSxXbihbY2UoImFwaUV2ZW50U2VydmljZSIpXSxVbi5wcm90b3R5cGUsImFwaUV2ZW50U2VydmljZSIsdm9pZCAwKSxXbihbY2UoImZyYW1ld29ya092ZXJyaWRlcyIpXSxVbi5wcm90b3R5cGUsImZyYW1ld29ya092ZXJyaWRlcyIsdm9pZCAwKSxXbihbYWVdLFVuLnByb3RvdHlwZSwiaW5pdCIsbnVsbCksVW49V24oW2RlKCJncmlkQXBpIildLFVuKTt2YXIgem4sS249ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IFluPXpuPWNsYXNzIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMucXVpY2tGaWx0ZXI9bnVsbCx0aGlzLnF1aWNrRmlsdGVyUGFydHM9bnVsbH1wb3N0Q29uc3RydWN0KCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ09MVU1OX1BJVk9UX01PREVfQ0hBTkdFRCwoKT0+dGhpcy5yZXNldFF1aWNrRmlsdGVyQ2FjaGUoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELCgpPT50aGlzLnJlc2V0UXVpY2tGaWx0ZXJDYWNoZSgpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fUk9XX0dST1VQX0NIQU5HRUQsKCk9PnRoaXMucmVzZXRRdWlja0ZpbHRlckNhY2hlKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9WSVNJQkxFLCgpPT57dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJpbmNsdWRlSGlkZGVuQ29sdW1uc0luUXVpY2tGaWx0ZXIiKXx8dGhpcy5yZXNldFF1aWNrRmlsdGVyQ2FjaGUoKX0pLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoInF1aWNrRmlsdGVyVGV4dCIsZT0+dGhpcy5zZXRRdWlja0ZpbHRlcihlLmN1cnJlbnRWYWx1ZSkpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoImluY2x1ZGVIaWRkZW5Db2x1bW5zSW5RdWlja0ZpbHRlciIsKCk9PnRoaXMub25JbmNsdWRlSGlkZGVuQ29sdW1uc0luUXVpY2tGaWx0ZXJDaGFuZ2VkKCkpLHRoaXMucXVpY2tGaWx0ZXI9dGhpcy5wYXJzZVF1aWNrRmlsdGVyKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicXVpY2tGaWx0ZXJUZXh0IikpLHRoaXMucGFyc2VyPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicXVpY2tGaWx0ZXJQYXJzZXIiKSx0aGlzLm1hdGNoZXI9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJxdWlja0ZpbHRlck1hdGNoZXIiKSx0aGlzLnNldFF1aWNrRmlsdGVyUGFydHMoKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhbInF1aWNrRmlsdGVyTWF0Y2hlciIsInF1aWNrRmlsdGVyUGFyc2VyIl0sKCk9PnRoaXMuc2V0UXVpY2tGaWx0ZXJQYXJzZXJBbmRNYXRjaGVyKCkpfWlzUXVpY2tGaWx0ZXJQcmVzZW50KCl7cmV0dXJuIG51bGwhPT10aGlzLnF1aWNrRmlsdGVyfWRvZXNSb3dQYXNzUXVpY2tGaWx0ZXIoZSl7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNhY2hlUXVpY2tGaWx0ZXIiKTtyZXR1cm4gdGhpcy5tYXRjaGVyP3RoaXMuZG9lc1Jvd1Bhc3NRdWlja0ZpbHRlck1hdGNoZXIodCxlKTp0aGlzLnF1aWNrRmlsdGVyUGFydHMuZXZlcnkoaT0+dD90aGlzLmRvZXNSb3dQYXNzUXVpY2tGaWx0ZXJDYWNoZShlLGkpOnRoaXMuZG9lc1Jvd1Bhc3NRdWlja0ZpbHRlck5vQ2FjaGUoZSxpKSl9cmVzZXRRdWlja0ZpbHRlckNhY2hlKCl7dGhpcy5yb3dNb2RlbC5mb3JFYWNoTm9kZShlPT5lLnF1aWNrRmlsdGVyQWdncmVnYXRlVGV4dD1udWxsKX1zZXRRdWlja0ZpbHRlclBhcnRzKCl7Y29uc3R7cXVpY2tGaWx0ZXI6ZSxwYXJzZXI6dH09dGhpczt0aGlzLnF1aWNrRmlsdGVyUGFydHM9ZT90P3QoZSk6ZS5zcGxpdCgiICIpOm51bGx9cGFyc2VRdWlja0ZpbHRlcihlKXtyZXR1cm4gYihlKT90aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd01vZGVsVHlwZSgiY2xpZW50U2lkZSIpP2UudG9VcHBlckNhc2UoKTooY29uc29sZS53YXJuKCJBRyBHcmlkIC0gUXVpY2sgZmlsdGVyaW5nIG9ubHkgd29ya3Mgd2l0aCB0aGUgQ2xpZW50LVNpZGUgUm93IE1vZGVsIiksbnVsbCk6bnVsbH1zZXRRdWlja0ZpbHRlcihlKXtpZihudWxsIT1lJiYic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKCJBRyBHcmlkIC0gR3JpZCBvcHRpb24gcXVpY2tGaWx0ZXJUZXh0IG9ubHkgc3VwcG9ydHMgc3RyaW5nIGlucHV0cywgcmVjZWl2ZWQ6ICIrdHlwZW9mIGUpO2NvbnN0IHQ9dGhpcy5wYXJzZVF1aWNrRmlsdGVyKGUpO3RoaXMucXVpY2tGaWx0ZXIhPT10JiYodGhpcy5xdWlja0ZpbHRlcj10LHRoaXMuc2V0UXVpY2tGaWx0ZXJQYXJ0cygpLHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTp6bi5FVkVOVF9RVUlDS19GSUxURVJfQ0hBTkdFRH0pKX1zZXRRdWlja0ZpbHRlclBhcnNlckFuZE1hdGNoZXIoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicXVpY2tGaWx0ZXJQYXJzZXIiKSx0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicXVpY2tGaWx0ZXJNYXRjaGVyIiksaT1lIT09dGhpcy5wYXJzZXJ8fHQhPT10aGlzLm1hdGNoZXI7dGhpcy5wYXJzZXI9ZSx0aGlzLm1hdGNoZXI9dCxpJiYodGhpcy5zZXRRdWlja0ZpbHRlclBhcnRzKCksdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOnpuLkVWRU5UX1FVSUNLX0ZJTFRFUl9DSEFOR0VEfSkpfW9uSW5jbHVkZUhpZGRlbkNvbHVtbnNJblF1aWNrRmlsdGVyQ2hhbmdlZCgpe3RoaXMuY29sdW1uTW9kZWwucmVmcmVzaFF1aWNrRmlsdGVyQ29sdW1ucygpLHRoaXMucmVzZXRRdWlja0ZpbHRlckNhY2hlKCksdGhpcy5pc1F1aWNrRmlsdGVyUHJlc2VudCgpJiZ0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6em4uRVZFTlRfUVVJQ0tfRklMVEVSX0NIQU5HRUR9KX1kb2VzUm93UGFzc1F1aWNrRmlsdGVyTm9DYWNoZShlLHQpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldEFsbENvbHVtbnNGb3JRdWlja0ZpbHRlcigpLnNvbWUoaT0+e2NvbnN0IHM9dGhpcy5nZXRRdWlja0ZpbHRlclRleHRGb3JDb2x1bW4oaSxlKTtyZXR1cm4gYihzKSYmcy5pbmRleE9mKHQpPj0wfSl9ZG9lc1Jvd1Bhc3NRdWlja0ZpbHRlckNhY2hlKGUsdCl7cmV0dXJuIHRoaXMuY2hlY2tHZW5lcmF0ZVF1aWNrRmlsdGVyQWdncmVnYXRlVGV4dChlKSxlLnF1aWNrRmlsdGVyQWdncmVnYXRlVGV4dC5pbmRleE9mKHQpPj0wfWRvZXNSb3dQYXNzUXVpY2tGaWx0ZXJNYXRjaGVyKGUsdCl7bGV0IGk7ZT8odGhpcy5jaGVja0dlbmVyYXRlUXVpY2tGaWx0ZXJBZ2dyZWdhdGVUZXh0KHQpLGk9dC5xdWlja0ZpbHRlckFnZ3JlZ2F0ZVRleHQpOmk9dGhpcy5nZXRRdWlja0ZpbHRlckFnZ3JlZ2F0ZVRleHQodCk7Y29uc3R7cXVpY2tGaWx0ZXJQYXJ0czpzLG1hdGNoZXI6cn09dGhpcztyZXR1cm4gcihzLGkpfWNoZWNrR2VuZXJhdGVRdWlja0ZpbHRlckFnZ3JlZ2F0ZVRleHQoZSl7ZS5xdWlja0ZpbHRlckFnZ3JlZ2F0ZVRleHR8fChlLnF1aWNrRmlsdGVyQWdncmVnYXRlVGV4dD10aGlzLmdldFF1aWNrRmlsdGVyQWdncmVnYXRlVGV4dChlKSl9Z2V0UXVpY2tGaWx0ZXJUZXh0Rm9yQ29sdW1uKGUsdCl7bGV0IGk9dGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUoZSx0LCEwKTtjb25zdCBzPWUuZ2V0Q29sRGVmKCk7aWYocy5nZXRRdWlja0ZpbHRlclRleHQpe2NvbnN0IHI9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7dmFsdWU6aSxub2RlOnQsZGF0YTp0LmRhdGEsY29sdW1uOmUsY29sRGVmOnN9KTtpPXMuZ2V0UXVpY2tGaWx0ZXJUZXh0KHIpfXJldHVybiBiKGkpP2kudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpOm51bGx9Z2V0UXVpY2tGaWx0ZXJBZ2dyZWdhdGVUZXh0KGUpe2NvbnN0IHQ9W107cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsQ29sdW1uc0ZvclF1aWNrRmlsdGVyKCkuZm9yRWFjaChpPT57Y29uc3Qgcz10aGlzLmdldFF1aWNrRmlsdGVyVGV4dEZvckNvbHVtbihpLGUpO2IocykmJnQucHVzaChzKX0pLHQuam9pbih6bi5RVUlDS19GSUxURVJfU0VQQVJBVE9SKX19O1luLkVWRU5UX1FVSUNLX0ZJTFRFUl9DSEFOR0VEPSJxdWlja0ZpbHRlckNoYW5nZWQiLFluLlFVSUNLX0ZJTFRFUl9TRVBBUkFUT1I9IlxuIixLbihbY2UoInZhbHVlU2VydmljZSIpXSxZbi5wcm90b3R5cGUsInZhbHVlU2VydmljZSIsdm9pZCAwKSxLbihbY2UoImNvbHVtbk1vZGVsIildLFluLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksS24oW2NlKCJyb3dNb2RlbCIpXSxZbi5wcm90b3R5cGUsInJvd01vZGVsIix2b2lkIDApLEtuKFthZV0sWW4ucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxZbj16bj1LbihbZGUoInF1aWNrRmlsdGVyU2VydmljZSIpXSxZbik7dmFyICRuPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBYbj1jbGFzcyBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmFsbENvbHVtbkZpbHRlcnM9bmV3IE1hcCx0aGlzLmFsbENvbHVtbkxpc3RlbmVycz1uZXcgTWFwLHRoaXMuYWN0aXZlQWdncmVnYXRlRmlsdGVycz1bXSx0aGlzLmFjdGl2ZUNvbHVtbkZpbHRlcnM9W10sdGhpcy5wcm9jZXNzaW5nRmlsdGVyQ2hhbmdlPSExLHRoaXMuZmlsdGVyTW9kZWxVcGRhdGVRdWV1ZT1bXSx0aGlzLmNvbHVtbkZpbHRlck1vZGVsVXBkYXRlUXVldWU9W10sdGhpcy5hZHZhbmNlZEZpbHRlck1vZGVsVXBkYXRlUXVldWU9W119aW5pdCgpe3ZhciBlLHQsaTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9HUklEX0NPTFVNTlNfQ0hBTkdFRCwoKT0+dGhpcy5vbkNvbHVtbnNDaGFuZ2VkKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9WQUxVRV9DSEFOR0VELCgpPT50aGlzLnJlZnJlc2hGaWx0ZXJzRm9yQWdncmVnYXRpb25zKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9QSVZPVF9DSEFOR0VELCgpPT50aGlzLnJlZnJlc2hGaWx0ZXJzRm9yQWdncmVnYXRpb25zKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9QSVZPVF9NT0RFX0NIQU5HRUQsKCk9PnRoaXMucmVmcmVzaEZpbHRlcnNGb3JBZ2dyZWdhdGlvbnMoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELCgpPT50aGlzLnVwZGF0ZUFkdmFuY2VkRmlsdGVyQ29sdW1ucygpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fVklTSUJMRSwoKT0+dGhpcy51cGRhdGVBZHZhbmNlZEZpbHRlckNvbHVtbnMoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfUk9XX0RBVEFfVVBEQVRFRCwoKT0+dGhpcy5vbk5ld1Jvd3NMb2FkZWQoInJvd0RhdGFVcGRhdGVkIikpLHRoaXMuZXh0ZXJuYWxGaWx0ZXJQcmVzZW50PXRoaXMuaXNFeHRlcm5hbEZpbHRlclByZXNlbnRDYWxsYmFjaygpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXJzKFsiaXNFeHRlcm5hbEZpbHRlclByZXNlbnQiLCJkb2VzRXh0ZXJuYWxGaWx0ZXJQYXNzIl0sKCk9Pnt0aGlzLm9uRmlsdGVyQ2hhbmdlZCh7c291cmNlOiJhcGkifSl9KSx0aGlzLnVwZGF0ZUFnZ0ZpbHRlcmluZygpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoImdyb3VwQWdnRmlsdGVyaW5nIiwoKT0+e3RoaXMudXBkYXRlQWdnRmlsdGVyaW5nKCksdGhpcy5vbkZpbHRlckNoYW5nZWQoKX0pLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoImFkdmFuY2VkRmlsdGVyTW9kZWwiLGU9PnRoaXMuc2V0QWR2YW5jZWRGaWx0ZXJNb2RlbChlLmN1cnJlbnRWYWx1ZSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0FEVkFOQ0VEX0ZJTFRFUl9FTkFCTEVEX0NIQU5HRUQsKHtlbmFibGVkOmV9KT0+dGhpcy5vbkFkdmFuY2VkRmlsdGVyRW5hYmxlZENoYW5nZWQoZSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0RBVEFfVFlQRVNfSU5GRVJSRUQsKCk9PnRoaXMucHJvY2Vzc0ZpbHRlck1vZGVsVXBkYXRlUXVldWUoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5xdWlja0ZpbHRlclNlcnZpY2UsWW4uRVZFTlRfUVVJQ0tfRklMVEVSX0NIQU5HRUQsKCk9PnRoaXMub25GaWx0ZXJDaGFuZ2VkKHtzb3VyY2U6InF1aWNrRmlsdGVyIn0pKSx0aGlzLmluaXRpYWxGaWx0ZXJNb2RlbD1PYmplY3QuYXNzaWduKHt9LG51bGwhPT0oaT1udWxsPT09KHQ9bnVsbD09PShlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiaW5pdGlhbFN0YXRlIikpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmZpbHRlcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmlsdGVyTW9kZWwpJiZ2b2lkIDAhPT1pP2k6e30pfWlzRXh0ZXJuYWxGaWx0ZXJQcmVzZW50Q2FsbGJhY2soKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJpc0V4dGVybmFsRmlsdGVyUHJlc2VudCIpO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlKHt9KX1kb2VzRXh0ZXJuYWxGaWx0ZXJQYXNzKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJkb2VzRXh0ZXJuYWxGaWx0ZXJQYXNzIik7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQoZSl9c2V0RmlsdGVyTW9kZWwoZSx0PSJhcGkiKXtpZih0aGlzLmlzQWR2YW5jZWRGaWx0ZXJFbmFibGVkKCkpcmV0dXJuIHZvaWQgdGhpcy53YXJuQWR2YW5jZWRGaWx0ZXJzKCk7aWYodGhpcy5kYXRhVHlwZVNlcnZpY2UuaXNQZW5kaW5nSW5mZXJlbmNlKCkpcmV0dXJuIHZvaWQgdGhpcy5maWx0ZXJNb2RlbFVwZGF0ZVF1ZXVlLnB1c2goe21vZGVsOmUsc291cmNlOnR9KTtjb25zdCBpPVtdLHM9dGhpcy5nZXRGaWx0ZXJNb2RlbCgpO2lmKGUpe2NvbnN0IHQ9WnMoT2JqZWN0LmtleXMoZSkpO3RoaXMuYWxsQ29sdW1uRmlsdGVycy5mb3JFYWNoKChzLHIpPT57Y29uc3Qgbz1lW3JdO2kucHVzaCh0aGlzLnNldE1vZGVsT25GaWx0ZXJXcmFwcGVyKHMuZmlsdGVyUHJvbWlzZSxvKSksdC5kZWxldGUocil9KSx0LmZvckVhY2godD0+e2NvbnN0IHM9dGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKHQpfHx0aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4odCk7aWYoIXMpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKCJBRyBHcmlkOiBzZXRGaWx0ZXJNb2RlbCgpIC0gbm8gY29sdW1uIGZvdW5kIGZvciBjb2xJZDogIit0KTtpZighcy5pc0ZpbHRlckFsbG93ZWQoKSlyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IHNldEZpbHRlck1vZGVsKCkgLSB1bmFibGUgdG8gZnVsbHkgYXBwbHkgbW9kZWwsIGZpbHRlcmluZyBkaXNhYmxlZCBmb3IgY29sSWQ6ICIrdCk7Y29uc3Qgcj10aGlzLmdldE9yQ3JlYXRlRmlsdGVyV3JhcHBlcihzLCJOT19VSSIpO3I/aS5wdXNoKHRoaXMuc2V0TW9kZWxPbkZpbHRlcldyYXBwZXIoci5maWx0ZXJQcm9taXNlLGVbdF0pKTpjb25zb2xlLndhcm4oIkFHLUdyaWQ6IHNldEZpbHRlck1vZGVsKCkgLSB1bmFibGUgdG8gZnVsbHkgYXBwbHkgbW9kZWwsIHVuYWJsZSB0byBjcmVhdGUgZmlsdGVyIGZvciBjb2xJZDogIit0KX0pfWVsc2UgdGhpcy5hbGxDb2x1bW5GaWx0ZXJzLmZvckVhY2goZT0+e2kucHVzaCh0aGlzLnNldE1vZGVsT25GaWx0ZXJXcmFwcGVyKGUuZmlsdGVyUHJvbWlzZSxudWxsKSl9KTt0ci5hbGwoaSkudGhlbigoKT0+e2NvbnN0IGU9dGhpcy5nZXRGaWx0ZXJNb2RlbCgpLGk9W107dGhpcy5hbGxDb2x1bW5GaWx0ZXJzLmZvckVhY2goKHQscik9Pntjb25zdCBvPXM/c1tyXTpudWxsLG49ZT9lW3JdOm51bGw7UXMuanNvbkVxdWFscyhvLG4pfHxpLnB1c2godC5jb2x1bW4pfSksaS5sZW5ndGg+MCYmdGhpcy5vbkZpbHRlckNoYW5nZWQoe2NvbHVtbnM6aSxzb3VyY2U6dH0pfSl9c2V0TW9kZWxPbkZpbHRlcldyYXBwZXIoZSx0KXtyZXR1cm4gbmV3IHRyKGk9PntlLnRoZW4oZT0+eyJmdW5jdGlvbiIhPXR5cGVvZiBlLnNldE1vZGVsJiYoY29uc29sZS53YXJuKCJBRyBHcmlkOiBmaWx0ZXIgbWlzc2luZyBzZXRNb2RlbCBtZXRob2QsIHdoaWNoIGlzIG5lZWRlZCBmb3Igc2V0RmlsdGVyTW9kZWwiKSxpKCkpLChlLnNldE1vZGVsKHQpfHx0ci5yZXNvbHZlKCkpLnRoZW4oKCk9PmkoKSl9KX0pfWdldEZpbHRlck1vZGVsKCl7Y29uc3QgZT17fTtyZXR1cm4gdGhpcy5hbGxDb2x1bW5GaWx0ZXJzLmZvckVhY2goKHQsaSk9Pntjb25zdCBzPXRoaXMuZ2V0TW9kZWxGcm9tRmlsdGVyV3JhcHBlcih0KTtiKHMpJiYoZVtpXT1zKX0pLGV9Z2V0TW9kZWxGcm9tRmlsdGVyV3JhcHBlcihlKXt2YXIgdDtjb25zdCBpPWUuZmlsdGVyUHJvbWlzZS5yZXNvbHZlTm93KG51bGwsZT0+ZSk7cmV0dXJuIG51bGw9PWk/bnVsbCE9PSh0PXRoaXMuaW5pdGlhbEZpbHRlck1vZGVsW2UuY29sdW1uLmdldENvbElkKCldKSYmdm9pZCAwIT09dD90Om51bGw6ImZ1bmN0aW9uIiE9dHlwZW9mIGkuZ2V0TW9kZWw/KGNvbnNvbGUud2FybigiQUcgR3JpZDogZmlsdGVyIEFQSSBtaXNzaW5nIGdldE1vZGVsIG1ldGhvZCwgd2hpY2ggaXMgbmVlZGVkIGZvciBnZXRGaWx0ZXJNb2RlbCIpLG51bGwpOmkuZ2V0TW9kZWwoKX1pc0NvbHVtbkZpbHRlclByZXNlbnQoKXtyZXR1cm4gdGhpcy5hY3RpdmVDb2x1bW5GaWx0ZXJzLmxlbmd0aD4wfWlzQWdncmVnYXRlRmlsdGVyUHJlc2VudCgpe3JldHVybiEhdGhpcy5hY3RpdmVBZ2dyZWdhdGVGaWx0ZXJzLmxlbmd0aH1pc0V4dGVybmFsRmlsdGVyUHJlc2VudCgpe3JldHVybiB0aGlzLmV4dGVybmFsRmlsdGVyUHJlc2VudH1pc0NoaWxkRmlsdGVyUHJlc2VudCgpe3JldHVybiB0aGlzLmlzQ29sdW1uRmlsdGVyUHJlc2VudCgpfHx0aGlzLmlzUXVpY2tGaWx0ZXJQcmVzZW50KCl8fHRoaXMuaXNFeHRlcm5hbEZpbHRlclByZXNlbnQoKXx8dGhpcy5pc0FkdmFuY2VkRmlsdGVyUHJlc2VudCgpfWlzQWR2YW5jZWRGaWx0ZXJQcmVzZW50KCl7cmV0dXJuIHRoaXMuaXNBZHZhbmNlZEZpbHRlckVuYWJsZWQoKSYmdGhpcy5hZHZhbmNlZEZpbHRlclNlcnZpY2UuaXNGaWx0ZXJQcmVzZW50KCl9b25BZHZhbmNlZEZpbHRlckVuYWJsZWRDaGFuZ2VkKGUpe3ZhciB0O2U/dGhpcy5hbGxDb2x1bW5GaWx0ZXJzLnNpemUmJih0aGlzLmFsbENvbHVtbkZpbHRlcnMuZm9yRWFjaChlPT50aGlzLmRpc3Bvc2VGaWx0ZXJXcmFwcGVyKGUsImFkdmFuY2VkRmlsdGVyRW5hYmxlZCIpKSx0aGlzLm9uRmlsdGVyQ2hhbmdlZCh7c291cmNlOiJhZHZhbmNlZEZpbHRlciJ9KSk6KG51bGw9PT0odD10aGlzLmFkdmFuY2VkRmlsdGVyU2VydmljZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaXNGaWx0ZXJQcmVzZW50KCkpJiYodGhpcy5hZHZhbmNlZEZpbHRlclNlcnZpY2Uuc2V0TW9kZWwobnVsbCksdGhpcy5vbkZpbHRlckNoYW5nZWQoe3NvdXJjZToiYWR2YW5jZWRGaWx0ZXIifSkpfWlzQWR2YW5jZWRGaWx0ZXJFbmFibGVkKCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10aGlzLmFkdmFuY2VkRmlsdGVyU2VydmljZSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuaXNFbmFibGVkKCl9aXNBZHZhbmNlZEZpbHRlckhlYWRlckFjdGl2ZSgpe3JldHVybiB0aGlzLmlzQWR2YW5jZWRGaWx0ZXJFbmFibGVkKCkmJnRoaXMuYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlLmlzSGVhZGVyQWN0aXZlKCl9ZG9BZ2dyZWdhdGVGaWx0ZXJzUGFzcyhlLHQpe3JldHVybiB0aGlzLmRvQ29sdW1uRmlsdGVyc1Bhc3MoZSx0LCEwKX11cGRhdGVBY3RpdmVGaWx0ZXJzKCl7dGhpcy5hY3RpdmVDb2x1bW5GaWx0ZXJzLmxlbmd0aD0wLHRoaXMuYWN0aXZlQWdncmVnYXRlRmlsdGVycy5sZW5ndGg9MDtjb25zdCBlPWU9PiEhZSYmKGUuaXNGaWx0ZXJBY3RpdmU/ZS5pc0ZpbHRlckFjdGl2ZSgpOihjb25zb2xlLndhcm4oIkFHIEdyaWQ6IEZpbHRlciBpcyBtaXNzaW5nIGlzRmlsdGVyQWN0aXZlKCkgbWV0aG9kIiksITEpKSx0PSEhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0R3JvdXBBZ2dGaWx0ZXJpbmcoKSxpPWU9PntpZighZS5pc1ByaW1hcnkoKSlyZXR1cm4hMDtjb25zdCBpPSF0aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RBY3RpdmUoKTtyZXR1cm4hKCFlLmlzVmFsdWVBY3RpdmUoKXx8IWkpJiYoISF0aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RNb2RlKCl8fHQpfTt0aGlzLmFsbENvbHVtbkZpbHRlcnMuZm9yRWFjaCh0PT57aWYodC5maWx0ZXJQcm9taXNlLnJlc29sdmVOb3coITEsZSkpe2NvbnN0IGU9dC5maWx0ZXJQcm9taXNlLnJlc29sdmVOb3cobnVsbCxlPT5lKTtpKHQuY29sdW1uKT90aGlzLmFjdGl2ZUFnZ3JlZ2F0ZUZpbHRlcnMucHVzaChlKTp0aGlzLmFjdGl2ZUNvbHVtbkZpbHRlcnMucHVzaChlKX19KX11cGRhdGVGaWx0ZXJGbGFnSW5Db2x1bW5zKGUsdCl7dGhpcy5hbGxDb2x1bW5GaWx0ZXJzLmZvckVhY2goaT0+e2NvbnN0IHM9aS5maWx0ZXJQcm9taXNlLnJlc29sdmVOb3coITEsZT0+ZS5pc0ZpbHRlckFjdGl2ZSgpKTtpLmNvbHVtbi5zZXRGaWx0ZXJBY3RpdmUocyxlLHQpfSl9aXNBbnlGaWx0ZXJQcmVzZW50KCl7cmV0dXJuIHRoaXMuaXNRdWlja0ZpbHRlclByZXNlbnQoKXx8dGhpcy5pc0NvbHVtbkZpbHRlclByZXNlbnQoKXx8dGhpcy5pc0FnZ3JlZ2F0ZUZpbHRlclByZXNlbnQoKXx8dGhpcy5pc0V4dGVybmFsRmlsdGVyUHJlc2VudCgpfHx0aGlzLmlzQWR2YW5jZWRGaWx0ZXJQcmVzZW50KCl9ZG9Db2x1bW5GaWx0ZXJzUGFzcyhlLHQsaSl7Y29uc3R7ZGF0YTpzLGFnZ0RhdGE6cn09ZSxvPWk/dGhpcy5hY3RpdmVBZ2dyZWdhdGVGaWx0ZXJzOnRoaXMuYWN0aXZlQ29sdW1uRmlsdGVycyxuPWk/cjpzO2ZvcihsZXQgaT0wO2k8by5sZW5ndGg7aSsrKXtjb25zdCBzPW9baV07aWYobnVsbCE9cyYmcyE9PXQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBzLmRvZXNGaWx0ZXJQYXNzKXRocm93IG5ldyBFcnJvcigiRmlsdGVyIGlzIG1pc3NpbmcgbWV0aG9kIGRvZXNGaWx0ZXJQYXNzIik7aWYoIXMuZG9lc0ZpbHRlclBhc3Moe25vZGU6ZSxkYXRhOm59KSlyZXR1cm4hMX19cmV0dXJuITB9cmVzZXRRdWlja0ZpbHRlckNhY2hlKCl7dGhpcy5xdWlja0ZpbHRlclNlcnZpY2UucmVzZXRRdWlja0ZpbHRlckNhY2hlKCl9cmVmcmVzaEZpbHRlcnNGb3JBZ2dyZWdhdGlvbnMoKXt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRHcm91cEFnZ0ZpbHRlcmluZygpJiZ0aGlzLm9uRmlsdGVyQ2hhbmdlZCgpfWNhbGxPbkZpbHRlckNoYW5nZWRPdXRzaWRlUmVuZGVyQ3ljbGUoZSl7Y29uc3QgdD0oKT0+dGhpcy5vbkZpbHRlckNoYW5nZWQoZSk7dGhpcy5yb3dSZW5kZXJlci5pc1JlZnJlc2hJblByb2dyZXNzKCk/c2V0VGltZW91dCh0LDApOnQoKX1vbkZpbHRlckNoYW5nZWQoZT17fSl7Y29uc3R7c291cmNlOnQsZmlsdGVySW5zdGFuY2U6aSxhZGRpdGlvbmFsRXZlbnRBdHRyaWJ1dGVzOnMsY29sdW1uczpyfT1lO3RoaXMudXBkYXRlRGVwZW5kYW50RmlsdGVycygpLHRoaXMudXBkYXRlQWN0aXZlRmlsdGVycygpLHRoaXMudXBkYXRlRmlsdGVyRmxhZ0luQ29sdW1ucygiZmlsdGVyQ2hhbmdlZCIscyksdGhpcy5leHRlcm5hbEZpbHRlclByZXNlbnQ9dGhpcy5pc0V4dGVybmFsRmlsdGVyUHJlc2VudENhbGxiYWNrKCksdGhpcy5hbGxDb2x1bW5GaWx0ZXJzLmZvckVhY2goZT0+e2UuZmlsdGVyUHJvbWlzZSYmZS5maWx0ZXJQcm9taXNlLnRoZW4oZT0+e2UmJmUhPT1pJiZlLm9uQW55RmlsdGVyQ2hhbmdlZCYmZS5vbkFueUZpbHRlckNoYW5nZWQoKX0pfSk7Y29uc3Qgbz17c291cmNlOnQsdHlwZTpsdC5FVkVOVF9GSUxURVJfQ0hBTkdFRCxjb2x1bW5zOnJ8fFtdfTtzJiZrKG8scyksdGhpcy5wcm9jZXNzaW5nRmlsdGVyQ2hhbmdlPSEwLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQobyksdGhpcy5wcm9jZXNzaW5nRmlsdGVyQ2hhbmdlPSExfWlzU3VwcHJlc3NGbGFzaGluZ0NlbGxzQmVjYXVzZUZpbHRlcmluZygpe3ZhciBlO3JldHVybiEobnVsbCE9PShlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiYWxsb3dTaG93Q2hhbmdlQWZ0ZXJGaWx0ZXIiKSkmJnZvaWQgMCE9PWUmJmUpJiZ0aGlzLnByb2Nlc3NpbmdGaWx0ZXJDaGFuZ2V9aXNRdWlja0ZpbHRlclByZXNlbnQoKXtyZXR1cm4gdGhpcy5xdWlja0ZpbHRlclNlcnZpY2UuaXNRdWlja0ZpbHRlclByZXNlbnQoKX11cGRhdGVBZ2dGaWx0ZXJpbmcoKXt0aGlzLmFnZ0ZpbHRlcmluZz0hIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldEdyb3VwQWdnRmlsdGVyaW5nKCl9aXNBZ2dyZWdhdGVRdWlja0ZpbHRlclByZXNlbnQoKXtyZXR1cm4gdGhpcy5pc1F1aWNrRmlsdGVyUHJlc2VudCgpJiYodGhpcy5hZ2dGaWx0ZXJpbmd8fHRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSl9aXNOb25BZ2dyZWdhdGVRdWlja0ZpbHRlclByZXNlbnQoKXtyZXR1cm4gdGhpcy5pc1F1aWNrRmlsdGVyUHJlc2VudCgpJiYhKHRoaXMuYWdnRmlsdGVyaW5nfHx0aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RNb2RlKCkpfWRvZXNSb3dQYXNzT3RoZXJGaWx0ZXJzKGUsdCl7cmV0dXJuIHRoaXMuZG9lc1Jvd1Bhc3NGaWx0ZXIoe3Jvd05vZGU6dCxmaWx0ZXJJbnN0YW5jZVRvU2tpcDplfSl9ZG9lc1Jvd1Bhc3NBZ2dyZWdhdGVGaWx0ZXJzKGUpe3JldHVybiEodGhpcy5pc0FnZ3JlZ2F0ZVF1aWNrRmlsdGVyUHJlc2VudCgpJiYhdGhpcy5xdWlja0ZpbHRlclNlcnZpY2UuZG9lc1Jvd1Bhc3NRdWlja0ZpbHRlcihlLnJvd05vZGUpKSYmISh0aGlzLmlzQWdncmVnYXRlRmlsdGVyUHJlc2VudCgpJiYhdGhpcy5kb0FnZ3JlZ2F0ZUZpbHRlcnNQYXNzKGUucm93Tm9kZSxlLmZpbHRlckluc3RhbmNlVG9Ta2lwKSl9ZG9lc1Jvd1Bhc3NGaWx0ZXIoZSl7cmV0dXJuISh0aGlzLmlzTm9uQWdncmVnYXRlUXVpY2tGaWx0ZXJQcmVzZW50KCkmJiF0aGlzLnF1aWNrRmlsdGVyU2VydmljZS5kb2VzUm93UGFzc1F1aWNrRmlsdGVyKGUucm93Tm9kZSkpJiYoISh0aGlzLmlzRXh0ZXJuYWxGaWx0ZXJQcmVzZW50KCkmJiF0aGlzLmRvZXNFeHRlcm5hbEZpbHRlclBhc3MoZS5yb3dOb2RlKSkmJighKHRoaXMuaXNDb2x1bW5GaWx0ZXJQcmVzZW50KCkmJiF0aGlzLmRvQ29sdW1uRmlsdGVyc1Bhc3MoZS5yb3dOb2RlLGUuZmlsdGVySW5zdGFuY2VUb1NraXApKSYmISh0aGlzLmlzQWR2YW5jZWRGaWx0ZXJQcmVzZW50KCkmJiF0aGlzLmFkdmFuY2VkRmlsdGVyU2VydmljZS5kb2VzRmlsdGVyUGFzcyhlLnJvd05vZGUpKSkpfW9uTmV3Um93c0xvYWRlZChlKXt0aGlzLmFsbENvbHVtbkZpbHRlcnMuZm9yRWFjaChlPT57ZS5maWx0ZXJQcm9taXNlLnRoZW4oZT0+e2Uub25OZXdSb3dzTG9hZGVkJiZlLm9uTmV3Um93c0xvYWRlZCgpfSl9KSx0aGlzLnVwZGF0ZUZpbHRlckZsYWdJbkNvbHVtbnMoZSx7YWZ0ZXJEYXRhQ2hhbmdlOiEwfSksdGhpcy51cGRhdGVBY3RpdmVGaWx0ZXJzKCl9Y3JlYXRlVmFsdWVHZXR0ZXIoZSl7cmV0dXJuKHtub2RlOnR9KT0+dGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUoZSx0LCEwKX1jcmVhdGVHZXRWYWx1ZShlKXtyZXR1cm4odCxpKT0+e2NvbnN0IHM9aT90aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4oaSk6ZTtyZXR1cm4gcz90aGlzLnZhbHVlU2VydmljZS5nZXRWYWx1ZShzLHQsITApOnZvaWQgMH19Z2V0RmlsdGVyQ29tcG9uZW50KGUsdCxpPSEwKXt2YXIgcztpZihpKXJldHVybihudWxsPT09KHM9dGhpcy5nZXRPckNyZWF0ZUZpbHRlcldyYXBwZXIoZSx0KSl8fHZvaWQgMD09PXM/dm9pZCAwOnMuZmlsdGVyUHJvbWlzZSl8fG51bGw7Y29uc3Qgcj10aGlzLmNhY2hlZEZpbHRlcihlKTtyZXR1cm4gcj9yLmZpbHRlclByb21pc2U6bnVsbH1pc0ZpbHRlckFjdGl2ZShlKXtjb25zdCB0PXRoaXMuY2FjaGVkRmlsdGVyKGUpO3JldHVybiEhdCYmdC5maWx0ZXJQcm9taXNlLnJlc29sdmVOb3coITEsZT0+ZS5pc0ZpbHRlckFjdGl2ZSgpKX1nZXRPckNyZWF0ZUZpbHRlcldyYXBwZXIoZSx0KXtpZighZS5pc0ZpbHRlckFsbG93ZWQoKSlyZXR1cm4gbnVsbDtsZXQgaT10aGlzLmNhY2hlZEZpbHRlcihlKTtyZXR1cm4gaT8iTk9fVUkiIT09dCYmdGhpcy5wdXRJbnRvR3VpKGksdCk6KGk9dGhpcy5jcmVhdGVGaWx0ZXJXcmFwcGVyKGUsdCksdGhpcy5zZXRDb2x1bW5GaWx0ZXJXcmFwcGVyKGUsaSkpLGl9Y2FjaGVkRmlsdGVyKGUpe3JldHVybiB0aGlzLmFsbENvbHVtbkZpbHRlcnMuZ2V0KGUuZ2V0Q29sSWQoKSl9Z2V0RGVmYXVsdEZpbHRlcihlKXtsZXQgdDtpZihyZS5fX2lzUmVnaXN0ZXJlZChzZS5TZXRGaWx0ZXJNb2R1bGUsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKSl0PSJhZ1NldENvbHVtbkZpbHRlciI7ZWxzZXtjb25zdCBpPXRoaXMuZGF0YVR5cGVTZXJ2aWNlLmdldEJhc2VEYXRhVHlwZShlKTt0PSJudW1iZXIiPT09aT8iYWdOdW1iZXJDb2x1bW5GaWx0ZXIiOiJkYXRlIj09PWl8fCJkYXRlU3RyaW5nIj09PWk/ImFnRGF0ZUNvbHVtbkZpbHRlciI6ImFnVGV4dENvbHVtbkZpbHRlciJ9cmV0dXJuIHR9Z2V0RGVmYXVsdEZsb2F0aW5nRmlsdGVyKGUpe2xldCB0O2lmKHJlLl9faXNSZWdpc3RlcmVkKHNlLlNldEZpbHRlck1vZHVsZSx0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpKXQ9ImFnU2V0Q29sdW1uRmxvYXRpbmdGaWx0ZXIiO2Vsc2V7Y29uc3QgaT10aGlzLmRhdGFUeXBlU2VydmljZS5nZXRCYXNlRGF0YVR5cGUoZSk7dD0ibnVtYmVyIj09PWk/ImFnTnVtYmVyQ29sdW1uRmxvYXRpbmdGaWx0ZXIiOiJkYXRlIj09PWl8fCJkYXRlU3RyaW5nIj09PWk/ImFnRGF0ZUNvbHVtbkZsb2F0aW5nRmlsdGVyIjoiYWdUZXh0Q29sdW1uRmxvYXRpbmdGaWx0ZXIifXJldHVybiB0fWNyZWF0ZUZpbHRlckluc3RhbmNlKGUpe2NvbnN0IHQ9dGhpcy5nZXREZWZhdWx0RmlsdGVyKGUpLGk9ZS5nZXRDb2xEZWYoKTtsZXQgcztjb25zdCByPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLmNyZWF0ZUZpbHRlclBhcmFtcyhlLGkpKSx7ZmlsdGVyTW9kaWZpZWRDYWxsYmFjazooKT0+dGhpcy5maWx0ZXJNb2RpZmllZENhbGxiYWNrRmFjdG9yeShzLGUpKCksZmlsdGVyQ2hhbmdlZENhbGxiYWNrOnQ9PnRoaXMuZmlsdGVyQ2hhbmdlZENhbGxiYWNrRmFjdG9yeShzLGUpKHQpLGRvZXNSb3dQYXNzT3RoZXJGaWx0ZXI6ZT0+dGhpcy5kb2VzUm93UGFzc090aGVyRmlsdGVycyhzLGUpfSksbz10aGlzLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldEZpbHRlckRldGFpbHMoaSxyLHQpO3JldHVybiBvP3tmaWx0ZXJQcm9taXNlOigpPT57Y29uc3QgZT1vLm5ld0FnU3RhY2tJbnN0YW5jZSgpO3JldHVybiBlJiZlLnRoZW4oZT0+cz1lKSxlfSxjb21wRGV0YWlsczpvfTp7ZmlsdGVyUHJvbWlzZTpudWxsLGNvbXBEZXRhaWxzOm51bGx9fWNyZWF0ZUZpbHRlclBhcmFtcyhlLHQpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHtjb2x1bW46ZSxjb2xEZWY6SSh0KSxyb3dNb2RlbDp0aGlzLnJvd01vZGVsLGZpbHRlckNoYW5nZWRDYWxsYmFjazooKT0+e30sZmlsdGVyTW9kaWZpZWRDYWxsYmFjazooKT0+e30sdmFsdWVHZXR0ZXI6dGhpcy5jcmVhdGVWYWx1ZUdldHRlcihlKSxnZXRWYWx1ZTp0aGlzLmNyZWF0ZUdldFZhbHVlKGUpLGRvZXNSb3dQYXNzT3RoZXJGaWx0ZXI6KCk9PiEwfSl9Y3JlYXRlRmlsdGVyV3JhcHBlcihlLHQpe3ZhciBpO2NvbnN0IHM9e2NvbHVtbjplLGZpbHRlclByb21pc2U6bnVsbCxjb21waWxlZEVsZW1lbnQ6bnVsbCxndWlQcm9taXNlOnRyLnJlc29sdmUobnVsbCksY29tcERldGFpbHM6bnVsbH0se2ZpbHRlclByb21pc2U6cixjb21wRGV0YWlsczpvfT10aGlzLmNyZWF0ZUZpbHRlckluc3RhbmNlKGUpO3JldHVybiBzLmZpbHRlclByb21pc2U9bnVsbCE9PShpPW51bGw9PXI/dm9pZCAwOnIoKSkmJnZvaWQgMCE9PWk/aTpudWxsLHMuY29tcERldGFpbHM9byxyJiZ0aGlzLnB1dEludG9HdWkocyx0KSxzfXB1dEludG9HdWkoZSx0KXtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2kuY2xhc3NOYW1lPSJhZy1maWx0ZXIiLGUuZ3VpUHJvbWlzZT1uZXcgdHIocz0+e2UuZmlsdGVyUHJvbWlzZS50aGVuKHI9PntsZXQgbz1yLmdldEd1aSgpO2Iobyl8fGNvbnNvbGUud2FybihgQUcgR3JpZDogZ2V0R3VpIG1ldGhvZCBmcm9tIGZpbHRlciByZXR1cm5lZCAke299LCBpdCBzaG91bGQgYmUgYSBET00gZWxlbWVudCBvciBhbiBIVE1MIHRlbXBsYXRlIHN0cmluZy5gKSwic3RyaW5nIj09dHlwZW9mIG8mJihvPXlzKG8pKSxpLmFwcGVuZENoaWxkKG8pLHMoaSk7Y29uc3Qgbj17dHlwZTpsdC5FVkVOVF9GSUxURVJfT1BFTkVELGNvbHVtbjplLmNvbHVtbixzb3VyY2U6dCxlR3VpOml9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQobil9KX0pfW9uQ29sdW1uc0NoYW5nZWQoKXtjb25zdCBlPVtdO3RoaXMuYWxsQ29sdW1uRmlsdGVycy5mb3JFYWNoKCh0LGkpPT57bGV0IHM7cz10LmNvbHVtbi5pc1ByaW1hcnkoKT90aGlzLmNvbHVtbk1vZGVsLmdldFByaW1hcnlDb2x1bW4oaSk6dGhpcy5jb2x1bW5Nb2RlbC5nZXRHcmlkQ29sdW1uKGkpLHN8fChlLnB1c2godC5jb2x1bW4pLHRoaXMuZGlzcG9zZUZpbHRlcldyYXBwZXIodCwiY29sdW1uQ2hhbmdlZCIpLHRoaXMuZGlzcG9zZUNvbHVtbkxpc3RlbmVyKGkpKX0pLGUubGVuZ3RoPjA/dGhpcy5vbkZpbHRlckNoYW5nZWQoe2NvbHVtbnM6ZSxzb3VyY2U6ImFwaSJ9KTp0aGlzLnVwZGF0ZURlcGVuZGFudEZpbHRlcnMoKX11cGRhdGVEZXBlbmRhbnRGaWx0ZXJzKCl7Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmdldEdyb3VwQXV0b0NvbHVtbnMoKTtudWxsPT1lfHxlLmZvckVhY2goZT0+eyJhZ0dyb3VwQ29sdW1uRmlsdGVyIj09PWUuZ2V0Q29sRGVmKCkuZmlsdGVyJiZ0aGlzLmdldE9yQ3JlYXRlRmlsdGVyV3JhcHBlcihlLCJOT19VSSIpfSl9aXNGaWx0ZXJBbGxvd2VkKGUpe3ZhciB0LGk7aWYodGhpcy5pc0FkdmFuY2VkRmlsdGVyRW5hYmxlZCgpKXJldHVybiExO2lmKCFlLmlzRmlsdGVyQWxsb3dlZCgpKXJldHVybiExO2NvbnN0IHM9dGhpcy5hbGxDb2x1bW5GaWx0ZXJzLmdldChlLmdldENvbElkKCkpO3JldHVybiBudWxsPT09KGk9bnVsbD09PSh0PW51bGw9PXM/dm9pZCAwOnMuZmlsdGVyUHJvbWlzZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQucmVzb2x2ZU5vdyghMCxlPT4iZnVuY3Rpb24iIT10eXBlb2YobnVsbD09ZT92b2lkIDA6ZS5pc0ZpbHRlckFsbG93ZWQpfHwobnVsbD09ZT92b2lkIDA6ZS5pc0ZpbHRlckFsbG93ZWQoKSkpKXx8dm9pZCAwPT09aXx8aX1nZXRGbG9hdGluZ0ZpbHRlckNvbXBEZXRhaWxzKGUsdCl7Y29uc3QgaT10PT57Y29uc3QgaT10aGlzLmdldEZpbHRlckNvbXBvbmVudChlLCJOT19VSSIpO251bGwhPWkmJmkudGhlbihlPT57dChqbihlKSl9KX0scz1lLmdldENvbERlZigpLHI9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuY3JlYXRlRmlsdGVyUGFyYW1zKGUscykpLHtmaWx0ZXJDaGFuZ2VkQ2FsbGJhY2s6KCk9PmkodD0+dGhpcy5maWx0ZXJDaGFuZ2VkQ2FsbGJhY2tGYWN0b3J5KHQsZSkoKSl9KSxvPXRoaXMudXNlckNvbXBvbmVudEZhY3RvcnkubWVyZ2VQYXJhbXNXaXRoQXBwbGljYXRpb25Qcm92aWRlZFBhcmFtcyhzLHduLHIpO2xldCBuPXRoaXMudXNlckNvbXBvbmVudEZhY3RvcnkuZ2V0RGVmYXVsdEZsb2F0aW5nRmlsdGVyVHlwZShzLCgpPT50aGlzLmdldERlZmF1bHRGbG9hdGluZ0ZpbHRlcihlKSk7bnVsbD09biYmKG49ImFnUmVhZE9ubHlGbG9hdGluZ0ZpbHRlciIpO2NvbnN0IGE9e2NvbHVtbjplLGZpbHRlclBhcmFtczpvLGN1cnJlbnRQYXJlbnRNb2RlbDooKT0+dGhpcy5nZXRDdXJyZW50RmxvYXRpbmdGaWx0ZXJQYXJlbnRNb2RlbChlKSxwYXJlbnRGaWx0ZXJJbnN0YW5jZTppLHNob3dQYXJlbnRGaWx0ZXI6dCxzdXBwcmVzc0ZpbHRlckJ1dHRvbjohMX07cmV0dXJuIHRoaXMudXNlckNvbXBvbmVudEZhY3RvcnkuZ2V0RmxvYXRpbmdGaWx0ZXJDb21wRGV0YWlscyhzLGEsbil9Z2V0Q3VycmVudEZsb2F0aW5nRmlsdGVyUGFyZW50TW9kZWwoZSl7Y29uc3QgdD10aGlzLmdldEZpbHRlckNvbXBvbmVudChlLCJOT19VSSIsITEpO3JldHVybiB0P3QucmVzb2x2ZU5vdyhudWxsLGU9PmUmJmUuZ2V0TW9kZWwoKSk6bnVsbH1kZXN0cm95RmlsdGVyKGUsdD0iYXBpIil7Y29uc3QgaT1lLmdldENvbElkKCkscz10aGlzLmFsbENvbHVtbkZpbHRlcnMuZ2V0KGkpO3RoaXMuZGlzcG9zZUNvbHVtbkxpc3RlbmVyKGkpLGRlbGV0ZSB0aGlzLmluaXRpYWxGaWx0ZXJNb2RlbFtpXSxzJiYodGhpcy5kaXNwb3NlRmlsdGVyV3JhcHBlcihzLHQpLHRoaXMub25GaWx0ZXJDaGFuZ2VkKHtjb2x1bW5zOltlXSxzb3VyY2U6ImFwaSJ9KSl9ZGlzcG9zZUNvbHVtbkxpc3RlbmVyKGUpe2NvbnN0IHQ9dGhpcy5hbGxDb2x1bW5MaXN0ZW5lcnMuZ2V0KGUpO3QmJih0aGlzLmFsbENvbHVtbkxpc3RlbmVycy5kZWxldGUoZSksdCgpKX1kaXNwb3NlRmlsdGVyV3JhcHBlcihlLHQpe2UuZmlsdGVyUHJvbWlzZS50aGVuKGk9Pnt0aGlzLmdldENvbnRleHQoKS5kZXN0cm95QmVhbihpKSxlLmNvbHVtbi5zZXRGaWx0ZXJBY3RpdmUoITEsImZpbHRlckRlc3Ryb3llZCIpLHRoaXMuYWxsQ29sdW1uRmlsdGVycy5kZWxldGUoZS5jb2x1bW4uZ2V0Q29sSWQoKSk7Y29uc3Qgcz17dHlwZTpsdC5FVkVOVF9GSUxURVJfREVTVFJPWUVELHNvdXJjZTp0LGNvbHVtbjplLmNvbHVtbn07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChzKX0pfWZpbHRlck1vZGlmaWVkQ2FsbGJhY2tGYWN0b3J5KGUsdCl7cmV0dXJuKCk9Pntjb25zdCBpPXt0eXBlOmx0LkVWRU5UX0ZJTFRFUl9NT0RJRklFRCxjb2x1bW46dCxmaWx0ZXJJbnN0YW5jZTplfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGkpfX1maWx0ZXJDaGFuZ2VkQ2FsbGJhY2tGYWN0b3J5KGUsdCl7cmV0dXJuIGk9Pnt2YXIgcztjb25zdCByPW51bGwhPT0ocz1udWxsPT1pP3ZvaWQgMDppLnNvdXJjZSkmJnZvaWQgMCE9PXM/czoiYXBpIixvPXtmaWx0ZXI6ZSxhZGRpdGlvbmFsRXZlbnRBdHRyaWJ1dGVzOmksY29sdW1uczpbdF0sc291cmNlOnJ9O3RoaXMuY2FsbE9uRmlsdGVyQ2hhbmdlZE91dHNpZGVSZW5kZXJDeWNsZShvKX19Y2hlY2tEZXN0cm95RmlsdGVyKGUpe2NvbnN0IHQ9dGhpcy5hbGxDb2x1bW5GaWx0ZXJzLmdldChlKTtpZighdClyZXR1cm47Y29uc3QgaT10LmNvbHVtbix7Y29tcERldGFpbHM6c309aS5pc0ZpbHRlckFsbG93ZWQoKT90aGlzLmNyZWF0ZUZpbHRlckluc3RhbmNlKGkpOntjb21wRGV0YWlsczpudWxsfTtpZih0aGlzLmFyZUZpbHRlckNvbXBzRGlmZmVyZW50KHQuY29tcERldGFpbHMscykpcmV0dXJuIHZvaWQgdGhpcy5kZXN0cm95RmlsdGVyKGksInBhcmFtc1VwZGF0ZWQiKTtjb25zdCByPWkuZ2V0Q29sRGVmKCkuZmlsdGVyUGFyYW1zO3QuZmlsdGVyUHJvbWlzZT90LmZpbHRlclByb21pc2UudGhlbihlPT57ITE9PT0oIShudWxsPT1lP3ZvaWQgMDplLnJlZnJlc2gpfHxlLnJlZnJlc2goT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5jcmVhdGVGaWx0ZXJQYXJhbXMoaSxpLmdldENvbERlZigpKSkse2ZpbHRlck1vZGlmaWVkQ2FsbGJhY2s6dGhpcy5maWx0ZXJNb2RpZmllZENhbGxiYWNrRmFjdG9yeShlLGkpLGZpbHRlckNoYW5nZWRDYWxsYmFjazp0aGlzLmZpbHRlckNoYW5nZWRDYWxsYmFja0ZhY3RvcnkoZSxpKSxkb2VzUm93UGFzc090aGVyRmlsdGVyOnQ9PnRoaXMuZG9lc1Jvd1Bhc3NPdGhlckZpbHRlcnMoZSx0KX0pLHIpKSkmJnRoaXMuZGVzdHJveUZpbHRlcihpLCJwYXJhbXNVcGRhdGVkIil9KTp0aGlzLmRlc3Ryb3lGaWx0ZXIoaSwicGFyYW1zVXBkYXRlZCIpfXNldENvbHVtbkZpbHRlcldyYXBwZXIoZSx0KXtjb25zdCBpPWUuZ2V0Q29sSWQoKTt0aGlzLmFsbENvbHVtbkZpbHRlcnMuc2V0KGksdCksdGhpcy5hbGxDb2x1bW5MaXN0ZW5lcnMuc2V0KGksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSxFZS5FVkVOVF9DT0xfREVGX0NIQU5HRUQsKCk9PnRoaXMuY2hlY2tEZXN0cm95RmlsdGVyKGkpKSl9YXJlRmlsdGVyQ29tcHNEaWZmZXJlbnQoZSx0KXtpZighdHx8IWUpcmV0dXJuITA7Y29uc3R7Y29tcG9uZW50Q2xhc3M6aX09ZSx7Y29tcG9uZW50Q2xhc3M6c309dDtyZXR1cm4hKGk9PT1zfHwobnVsbD09aT92b2lkIDA6aS5yZW5kZXIpJiYobnVsbD09cz92b2lkIDA6cy5yZW5kZXIpJiZpLnJlbmRlcj09PXMucmVuZGVyKX1nZXRBZHZhbmNlZEZpbHRlck1vZGVsKCl7cmV0dXJuIHRoaXMuaXNBZHZhbmNlZEZpbHRlckVuYWJsZWQoKT90aGlzLmFkdmFuY2VkRmlsdGVyU2VydmljZS5nZXRNb2RlbCgpOm51bGx9c2V0QWR2YW5jZWRGaWx0ZXJNb2RlbChlKXt0aGlzLmlzQWR2YW5jZWRGaWx0ZXJFbmFibGVkKCkmJih0aGlzLmRhdGFUeXBlU2VydmljZS5pc1BlbmRpbmdJbmZlcmVuY2UoKT90aGlzLmFkdmFuY2VkRmlsdGVyTW9kZWxVcGRhdGVRdWV1ZS5wdXNoKGUpOih0aGlzLmFkdmFuY2VkRmlsdGVyU2VydmljZS5zZXRNb2RlbChudWxsIT1lP2U6bnVsbCksdGhpcy5vbkZpbHRlckNoYW5nZWQoe3NvdXJjZToiYWR2YW5jZWRGaWx0ZXIifSkpKX1zaG93QWR2YW5jZWRGaWx0ZXJCdWlsZGVyKGUpe3RoaXMuaXNBZHZhbmNlZEZpbHRlckVuYWJsZWQoKSYmdGhpcy5hZHZhbmNlZEZpbHRlclNlcnZpY2UuZ2V0Q3RybCgpLnRvZ2dsZUZpbHRlckJ1aWxkZXIoZSwhMCl9dXBkYXRlQWR2YW5jZWRGaWx0ZXJDb2x1bW5zKCl7dGhpcy5pc0FkdmFuY2VkRmlsdGVyRW5hYmxlZCgpJiZ0aGlzLmFkdmFuY2VkRmlsdGVyU2VydmljZS51cGRhdGVWYWxpZGl0eSgpJiZ0aGlzLm9uRmlsdGVyQ2hhbmdlZCh7c291cmNlOiJhZHZhbmNlZEZpbHRlciJ9KX1oYXNGbG9hdGluZ0ZpbHRlcnMoKXtpZih0aGlzLmlzQWR2YW5jZWRGaWx0ZXJFbmFibGVkKCkpcmV0dXJuITE7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsR3JpZENvbHVtbnMoKS5zb21lKGU9PmUuZ2V0Q29sRGVmKCkuZmxvYXRpbmdGaWx0ZXIpfWdldEZpbHRlckluc3RhbmNlKGUsdCl7aWYodGhpcy5pc0FkdmFuY2VkRmlsdGVyRW5hYmxlZCgpKXJldHVybiB2b2lkIHRoaXMud2FybkFkdmFuY2VkRmlsdGVycygpO2NvbnN0IGk9dGhpcy5nZXRGaWx0ZXJJbnN0YW5jZUltcGwoZSxlPT57aWYoIXQpcmV0dXJuO2NvbnN0IGk9am4oZSk7dChpKX0pO3JldHVybiBqbihpKX1nZXRDb2x1bW5GaWx0ZXJJbnN0YW5jZShlKXtyZXR1cm4gbmV3IFByb21pc2UodD0+e3RoaXMuZ2V0RmlsdGVySW5zdGFuY2UoZSxlPT57dChlKX0pfSl9Z2V0RmlsdGVySW5zdGFuY2VJbXBsKGUsdCl7Y29uc3QgaT10aGlzLmNvbHVtbk1vZGVsLmdldFByaW1hcnlDb2x1bW4oZSk7aWYoIWkpcmV0dXJuO2NvbnN0IHM9dGhpcy5nZXRGaWx0ZXJDb21wb25lbnQoaSwiTk9fVUkiKSxyPXMmJnMucmVzb2x2ZU5vdyhudWxsLGU9PmUpO3JldHVybiByP3NldFRpbWVvdXQodCwwLHIpOnMmJnMudGhlbihlPT57dChlKX0pLHJ9d2FybkFkdmFuY2VkRmlsdGVycygpe2ooIkNvbHVtbiBGaWx0ZXIgQVBJIG1ldGhvZHMgaGF2ZSBiZWVuIGRpc2FibGVkIGFzIEFkdmFuY2VkIEZpbHRlcnMgYXJlIGVuYWJsZWQuIil9c2V0dXBBZHZhbmNlZEZpbHRlckhlYWRlckNvbXAoZSl7dmFyIHQ7bnVsbD09PSh0PXRoaXMuYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlKXx8dm9pZCAwPT09dHx8dC5nZXRDdHJsKCkuc2V0dXBIZWFkZXJDb21wKGUpfWdldEhlYWRlclJvd0NvdW50KCl7cmV0dXJuIHRoaXMuaXNBZHZhbmNlZEZpbHRlckhlYWRlckFjdGl2ZSgpPzE6MH1nZXRIZWFkZXJIZWlnaHQoKXtyZXR1cm4gdGhpcy5pc0FkdmFuY2VkRmlsdGVySGVhZGVyQWN0aXZlKCk/dGhpcy5hZHZhbmNlZEZpbHRlclNlcnZpY2UuZ2V0Q3RybCgpLmdldEhlYWRlckhlaWdodCgpOjB9cHJvY2Vzc0ZpbHRlck1vZGVsVXBkYXRlUXVldWUoKXt0aGlzLmZpbHRlck1vZGVsVXBkYXRlUXVldWUuZm9yRWFjaCgoe21vZGVsOmUsc291cmNlOnR9KT0+dGhpcy5zZXRGaWx0ZXJNb2RlbChlLHQpKSx0aGlzLmZpbHRlck1vZGVsVXBkYXRlUXVldWU9W10sdGhpcy5jb2x1bW5GaWx0ZXJNb2RlbFVwZGF0ZVF1ZXVlLmZvckVhY2goKHtrZXk6ZSxtb2RlbDp0LHJlc29sdmU6aX0pPT57dGhpcy5zZXRDb2x1bW5GaWx0ZXJNb2RlbChlLHQpLnRoZW4oKCk9PmkoKSl9KSx0aGlzLmNvbHVtbkZpbHRlck1vZGVsVXBkYXRlUXVldWU9W10sdGhpcy5hZHZhbmNlZEZpbHRlck1vZGVsVXBkYXRlUXVldWUuZm9yRWFjaChlPT50aGlzLnNldEFkdmFuY2VkRmlsdGVyTW9kZWwoZSkpLHRoaXMuYWR2YW5jZWRGaWx0ZXJNb2RlbFVwZGF0ZVF1ZXVlPVtdfWdldENvbHVtbkZpbHRlck1vZGVsKGUpe2NvbnN0IHQ9dGhpcy5nZXRGaWx0ZXJXcmFwcGVyKGUpO3JldHVybiB0P3RoaXMuZ2V0TW9kZWxGcm9tRmlsdGVyV3JhcHBlcih0KTpudWxsfXNldENvbHVtbkZpbHRlck1vZGVsKGUsdCl7aWYodGhpcy5pc0FkdmFuY2VkRmlsdGVyRW5hYmxlZCgpKXJldHVybiB0aGlzLndhcm5BZHZhbmNlZEZpbHRlcnMoKSxQcm9taXNlLnJlc29sdmUoKTtpZih0aGlzLmRhdGFUeXBlU2VydmljZS5pc1BlbmRpbmdJbmZlcmVuY2UoKSl7bGV0IGk9KCk9Pnt9O2NvbnN0IHM9bmV3IFByb21pc2UoZT0+e2k9ZX0pO3JldHVybiB0aGlzLmNvbHVtbkZpbHRlck1vZGVsVXBkYXRlUXVldWUucHVzaCh7a2V5OmUsbW9kZWw6dCxyZXNvbHZlOml9KSxzfWNvbnN0IGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKGUpLHM9aT90aGlzLmdldE9yQ3JlYXRlRmlsdGVyV3JhcHBlcihpLCJOT19VSSIpOm51bGw7cmV0dXJuIHM/KHI9dGhpcy5zZXRNb2RlbE9uRmlsdGVyV3JhcHBlcihzLmZpbHRlclByb21pc2UsdCksbmV3IFByb21pc2UoZT0+e3IudGhlbih0PT5lKHQpKX0pKTpQcm9taXNlLnJlc29sdmUoKTt2YXIgcn1nZXRGaWx0ZXJXcmFwcGVyKGUpe3ZhciB0O2NvbnN0IGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKGUpO3JldHVybiBpJiZudWxsIT09KHQ9dGhpcy5jYWNoZWRGaWx0ZXIoaSkpJiZ2b2lkIDAhPT10P3Q6bnVsbH1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLHRoaXMuYWxsQ29sdW1uRmlsdGVycy5mb3JFYWNoKGU9PnRoaXMuZGlzcG9zZUZpbHRlcldyYXBwZXIoZSwiZ3JpZERlc3Ryb3llZCIpKSx0aGlzLmFsbENvbHVtbkxpc3RlbmVycy5jbGVhcigpfX07JG4oW2NlKCJ2YWx1ZVNlcnZpY2UiKV0sWG4ucHJvdG90eXBlLCJ2YWx1ZVNlcnZpY2UiLHZvaWQgMCksJG4oW2NlKCJjb2x1bW5Nb2RlbCIpXSxYbi5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLCRuKFtjZSgicm93TW9kZWwiKV0sWG4ucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSwkbihbY2UoInVzZXJDb21wb25lbnRGYWN0b3J5IildLFhuLnByb3RvdHlwZSwidXNlckNvbXBvbmVudEZhY3RvcnkiLHZvaWQgMCksJG4oW2NlKCJyb3dSZW5kZXJlciIpXSxYbi5wcm90b3R5cGUsInJvd1JlbmRlcmVyIix2b2lkIDApLCRuKFtjZSgiZGF0YVR5cGVTZXJ2aWNlIildLFhuLnByb3RvdHlwZSwiZGF0YVR5cGVTZXJ2aWNlIix2b2lkIDApLCRuKFtjZSgicXVpY2tGaWx0ZXJTZXJ2aWNlIildLFhuLnByb3RvdHlwZSwicXVpY2tGaWx0ZXJTZXJ2aWNlIix2b2lkIDApLCRuKFtoZSgiYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlIildLFhuLnByb3RvdHlwZSwiYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlIix2b2lkIDApLCRuKFthZV0sWG4ucHJvdG90eXBlLCJpbml0IixudWxsKSxYbj0kbihbZGUoImZpbHRlck1hbmFnZXIiKV0sWG4pO2NsYXNzIHFuIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLmN0cmw9dH1nZXRDdHJsKCl7cmV0dXJuIHRoaXMuY3RybH19dmFyIFpuPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIFFuIGV4dGVuZHMgcW57Y29uc3RydWN0b3IoZSl7c3VwZXIoUW4uVEVNUExBVEUsZSl9cG9zdENvbnN0cnVjdCgpe2NvbnN0IGU9dGhpcy5nZXRHdWkoKSx0PXthZGRPclJlbW92ZUNzc0NsYXNzOihlLHQpPT50aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoZSx0KSxhZGRPclJlbW92ZUJvZHlDc3NDbGFzczooZSx0KT0+dGhpcy5lRmxvYXRpbmdGaWx0ZXJCb2R5LmNsYXNzTGlzdC50b2dnbGUoZSx0KSxzZXRCdXR0b25XcmFwcGVyRGlzcGxheWVkOmU9PmlzKHRoaXMuZUJ1dHRvbldyYXBwZXIsZSksc2V0Q29tcERldGFpbHM6ZT0+dGhpcy5zZXRDb21wRGV0YWlscyhlKSxnZXRGbG9hdGluZ0ZpbHRlckNvbXA6KCk9PnRoaXMuY29tcFByb21pc2Usc2V0V2lkdGg6dD0+ZS5zdHlsZS53aWR0aD10LHNldE1lbnVJY29uOmU9PnRoaXMuZUJ1dHRvblNob3dNYWluRmlsdGVyLmFwcGVuZENoaWxkKGUpfTt0aGlzLmN0cmwuc2V0Q29tcCh0LGUsdGhpcy5lQnV0dG9uU2hvd01haW5GaWx0ZXIsdGhpcy5lRmxvYXRpbmdGaWx0ZXJCb2R5KX1zZXRDb21wRGV0YWlscyhlKXtpZighZSlyZXR1cm4gdGhpcy5kZXN0cm95RmxvYXRpbmdGaWx0ZXJDb21wKCksdm9pZCh0aGlzLmNvbXBQcm9taXNlPW51bGwpO3RoaXMuY29tcFByb21pc2U9ZS5uZXdBZ1N0YWNrSW5zdGFuY2UoKSx0aGlzLmNvbXBQcm9taXNlLnRoZW4oZT0+dGhpcy5hZnRlckNvbXBDcmVhdGVkKGUpKX1kZXN0cm95RmxvYXRpbmdGaWx0ZXJDb21wKCl7dGhpcy5mbG9hdGluZ0ZpbHRlckNvbXAmJih0aGlzLmVGbG9hdGluZ0ZpbHRlckJvZHkucmVtb3ZlQ2hpbGQodGhpcy5mbG9hdGluZ0ZpbHRlckNvbXAuZ2V0R3VpKCkpLHRoaXMuZmxvYXRpbmdGaWx0ZXJDb21wPXRoaXMuZGVzdHJveUJlYW4odGhpcy5mbG9hdGluZ0ZpbHRlckNvbXApKX1hZnRlckNvbXBDcmVhdGVkKGUpe2UmJih0aGlzLmlzQWxpdmUoKT8odGhpcy5kZXN0cm95RmxvYXRpbmdGaWx0ZXJDb21wKCksdGhpcy5mbG9hdGluZ0ZpbHRlckNvbXA9ZSx0aGlzLmVGbG9hdGluZ0ZpbHRlckJvZHkuYXBwZW5kQ2hpbGQoZS5nZXRHdWkoKSksZS5hZnRlckd1aUF0dGFjaGVkJiZlLmFmdGVyR3VpQXR0YWNoZWQoKSk6dGhpcy5kZXN0cm95QmVhbihlKSl9fVFuLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1oZWFkZXItY2VsbCBhZy1mbG9hdGluZy1maWx0ZXIiIHJvbGU9ImdyaWRjZWxsIj5cbiAgICAgICAgICAgIDxkaXYgcmVmPSJlRmxvYXRpbmdGaWx0ZXJCb2R5IiByb2xlPSJwcmVzZW50YXRpb24iPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctZmxvYXRpbmctZmlsdGVyLWJ1dHRvbiBhZy1oaWRkZW4iIHJlZj0iZUJ1dHRvbldyYXBwZXIiIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJhZy1idXR0b24gYWctZmxvYXRpbmctZmlsdGVyLWJ1dHRvbi1idXR0b24iIHJlZj0iZUJ1dHRvblNob3dNYWluRmlsdGVyIiB0YWJpbmRleD0iLTEiPjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PicsWm4oW3VyKCJlRmxvYXRpbmdGaWx0ZXJCb2R5IildLFFuLnByb3RvdHlwZSwiZUZsb2F0aW5nRmlsdGVyQm9keSIsdm9pZCAwKSxabihbdXIoImVCdXR0b25XcmFwcGVyIildLFFuLnByb3RvdHlwZSwiZUJ1dHRvbldyYXBwZXIiLHZvaWQgMCksWm4oW3VyKCJlQnV0dG9uU2hvd01haW5GaWx0ZXIiKV0sUW4ucHJvdG90eXBlLCJlQnV0dG9uU2hvd01haW5GaWx0ZXIiLHZvaWQgMCksWm4oW2FlXSxRbi5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLFpuKFtsZV0sUW4ucHJvdG90eXBlLCJkZXN0cm95RmxvYXRpbmdGaWx0ZXJDb21wIixudWxsKTt2YXIgSm4sZWE9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07IWZ1bmN0aW9uKGUpe2UuQVVUT19IRUlHSFQ9ImFnLWxheW91dC1hdXRvLWhlaWdodCIsZS5OT1JNQUw9ImFnLWxheW91dC1ub3JtYWwiLGUuUFJJTlQ9ImFnLWxheW91dC1wcmludCJ9KEpufHwoSm49e30pKTtjbGFzcyB0YSBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy52aWV3PWV9cG9zdENvbnN0cnVjdCgpe3RoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoImRvbUxheW91dCIsdGhpcy51cGRhdGVMYXlvdXRDbGFzc2VzLmJpbmQodGhpcykpLHRoaXMudXBkYXRlTGF5b3V0Q2xhc3NlcygpfXVwZGF0ZUxheW91dENsYXNzZXMoKXtjb25zdCBlPXRoaXMuZ2V0RG9tTGF5b3V0KCksdD17YXV0b0hlaWdodDoiYXV0b0hlaWdodCI9PT1lLG5vcm1hbDoibm9ybWFsIj09PWUscHJpbnQ6InByaW50Ij09PWV9LGk9dC5hdXRvSGVpZ2h0P0puLkFVVE9fSEVJR0hUOnQucHJpbnQ/Sm4uUFJJTlQ6Sm4uTk9STUFMO3RoaXMudmlldy51cGRhdGVMYXlvdXRDbGFzc2VzKGksdCl9Z2V0RG9tTGF5b3V0KCl7dmFyIGU7Y29uc3QgdD1udWxsIT09KGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJkb21MYXlvdXQiKSkmJnZvaWQgMCE9PWU/ZToibm9ybWFsIjtyZXR1cm4tMT09PVsibm9ybWFsIiwicHJpbnQiLCJhdXRvSGVpZ2h0Il0uaW5kZXhPZih0KT8oaih0KyIgaXMgbm90IHZhbGlkIGZvciBET00gTGF5b3V0LCB2YWxpZCB2YWx1ZXMgYXJlICdub3JtYWwnLCAnYXV0b0hlaWdodCcsICdwcmludCcuIiksIm5vcm1hbCIpOnR9fWVhKFthZV0sdGEucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgaWEsc2EscmE9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07IWZ1bmN0aW9uKGUpe2VbZS5WZXJ0aWNhbD0wXT0iVmVydGljYWwiLGVbZS5Ib3Jpem9udGFsPTFdPSJIb3Jpem9udGFsIn0oaWF8fChpYT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Db250YWluZXI9MF09IkNvbnRhaW5lciIsZVtlLkZha2VDb250YWluZXI9MV09IkZha2VDb250YWluZXIifShzYXx8KHNhPXt9KSk7Y2xhc3Mgb2EgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMubGFzdFNjcm9sbFNvdXJjZT1bbnVsbCxudWxsXSx0aGlzLnNjcm9sbExlZnQ9LTEsdGhpcy5uZXh0U2Nyb2xsVG9wPS0xLHRoaXMuc2Nyb2xsVG9wPS0xLHRoaXMubGFzdE9mZnNldEhlaWdodD0tMSx0aGlzLmxhc3RTY3JvbGxUb3A9LTEsdGhpcy5lQm9keVZpZXdwb3J0PWUsdGhpcy5yZXNldExhc3RIU2Nyb2xsRGVib3VuY2VkPVEoKCk9PnRoaXMubGFzdFNjcm9sbFNvdXJjZVtpYS5Ib3Jpem9udGFsXT1udWxsLDUwMCksdGhpcy5yZXNldExhc3RWU2Nyb2xsRGVib3VuY2VkPVEoKCk9PnRoaXMubGFzdFNjcm9sbFNvdXJjZVtpYS5WZXJ0aWNhbF09bnVsbCw1MDApfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmVuYWJsZVJ0bD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0RJU1BMQVlFRF9DT0xVTU5TX1dJRFRIX0NIQU5HRUQsdGhpcy5vbkRpc3BsYXllZENvbHVtbnNXaWR0aENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5jdHJsc1NlcnZpY2Uud2hlblJlYWR5KGU9Pnt0aGlzLmNlbnRlclJvd0NvbnRhaW5lckN0cmw9ZS5jZW50ZXJSb3dDb250YWluZXJDdHJsLHRoaXMub25EaXNwbGF5ZWRDb2x1bW5zV2lkdGhDaGFuZ2VkKCksdGhpcy5hZGRTY3JvbGxMaXN0ZW5lcigpfSl9YWRkU2Nyb2xsTGlzdGVuZXIoKXtjb25zdCBlPXRoaXMuY3RybHNTZXJ2aWNlLmdldEZha2VIU2Nyb2xsQ29tcCgpLHQ9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0RmFrZVZTY3JvbGxDb21wKCk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsLmdldFZpZXdwb3J0RWxlbWVudCgpLCJzY3JvbGwiLHRoaXMub25IU2Nyb2xsLmJpbmQodGhpcykpLGUub25TY3JvbGxDYWxsYmFjayh0aGlzLm9uRmFrZUhTY3JvbGwuYmluZCh0aGlzKSk7Y29uc3QgaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImRlYm91bmNlVmVydGljYWxTY3JvbGxiYXIiKSxzPWk/USh0aGlzLm9uVlNjcm9sbC5iaW5kKHRoaXMpLDEwMCk6dGhpcy5vblZTY3JvbGwuYmluZCh0aGlzKSxyPWk/USh0aGlzLm9uRmFrZVZTY3JvbGwuYmluZCh0aGlzKSwxMDApOnRoaXMub25GYWtlVlNjcm9sbC5iaW5kKHRoaXMpO3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUJvZHlWaWV3cG9ydCwic2Nyb2xsIixzKSx0Lm9uU2Nyb2xsQ2FsbGJhY2socil9b25EaXNwbGF5ZWRDb2x1bW5zV2lkdGhDaGFuZ2VkKCl7dGhpcy5lbmFibGVSdGwmJnRoaXMuaG9yaXpvbnRhbGx5U2Nyb2xsSGVhZGVyQ2VudGVyQW5kRmxvYXRpbmdDZW50ZXIoKX1ob3Jpem9udGFsbHlTY3JvbGxIZWFkZXJDZW50ZXJBbmRGbG9hdGluZ0NlbnRlcihlKXtpZihudWxsPT10aGlzLmNlbnRlclJvd0NvbnRhaW5lckN0cmwpcmV0dXJuO3ZvaWQgMD09PWUmJihlPXRoaXMuY2VudGVyUm93Q29udGFpbmVyQ3RybC5nZXRDZW50ZXJWaWV3cG9ydFNjcm9sbExlZnQoKSk7Y29uc3QgdD10aGlzLmVuYWJsZVJ0bD9lOi1lLGk9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0VG9wQ2VudGVyUm93Q29udGFpbmVyQ3RybCgpLHM9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0U3RpY2t5VG9wQ2VudGVyUm93Q29udGFpbmVyQ3RybCgpLHI9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0Qm90dG9tQ2VudGVyUm93Q29udGFpbmVyQ3RybCgpLG89dGhpcy5jdHJsc1NlcnZpY2UuZ2V0RmFrZUhTY3JvbGxDb21wKCk7dGhpcy5jdHJsc1NlcnZpY2UuZ2V0SGVhZGVyUm93Q29udGFpbmVyQ3RybCgpLnNldEhvcml6b250YWxTY3JvbGwoLXQpLHIuc2V0Q29udGFpbmVyVHJhbnNsYXRlWCh0KSxpLnNldENvbnRhaW5lclRyYW5zbGF0ZVgodCkscy5zZXRDb250YWluZXJUcmFuc2xhdGVYKHQpO2NvbnN0IG49dGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsLmdldFZpZXdwb3J0RWxlbWVudCgpLGE9dGhpcy5sYXN0U2Nyb2xsU291cmNlW2lhLkhvcml6b250YWxdPT09c2EuQ29udGFpbmVyO2U9TWF0aC5hYnMoZSksYT9vLnNldFNjcm9sbFBvc2l0aW9uKGUpOmdzKG4sZSx0aGlzLmVuYWJsZVJ0bCl9aXNDb250cm9sbGluZ1Njcm9sbChlLHQpe3JldHVybiBudWxsPT10aGlzLmxhc3RTY3JvbGxTb3VyY2VbdF0/KHRoaXMubGFzdFNjcm9sbFNvdXJjZVt0XT1lLCEwKTp0aGlzLmxhc3RTY3JvbGxTb3VyY2VbdF09PT1lfW9uRmFrZUhTY3JvbGwoKXt0aGlzLmlzQ29udHJvbGxpbmdTY3JvbGwoc2EuRmFrZUNvbnRhaW5lcixpYS5Ib3Jpem9udGFsKSYmdGhpcy5vbkhTY3JvbGxDb21tb24oc2EuRmFrZUNvbnRhaW5lcil9b25IU2Nyb2xsKCl7dGhpcy5pc0NvbnRyb2xsaW5nU2Nyb2xsKHNhLkNvbnRhaW5lcixpYS5Ib3Jpem9udGFsKSYmdGhpcy5vbkhTY3JvbGxDb21tb24oc2EuQ29udGFpbmVyKX1vbkhTY3JvbGxDb21tb24oZSl7Y29uc3QgdD10aGlzLmNlbnRlclJvd0NvbnRhaW5lckN0cmwuZ2V0Vmlld3BvcnRFbGVtZW50KCkse3Njcm9sbExlZnQ6aX09dDtpZih0aGlzLnNob3VsZEJsb2NrU2Nyb2xsVXBkYXRlKGlhLkhvcml6b250YWwsaSwhMCkpcmV0dXJuO2xldCBzO3M9ZT09PXNhLkNvbnRhaW5lcj9wcyh0LHRoaXMuZW5hYmxlUnRsKTp0aGlzLmN0cmxzU2VydmljZS5nZXRGYWtlSFNjcm9sbENvbXAoKS5nZXRTY3JvbGxQb3NpdGlvbigpLHRoaXMuZG9Ib3Jpem9udGFsU2Nyb2xsKE1hdGgucm91bmQocykpLHRoaXMucmVzZXRMYXN0SFNjcm9sbERlYm91bmNlZCgpfW9uRmFrZVZTY3JvbGwoKXt0aGlzLmlzQ29udHJvbGxpbmdTY3JvbGwoc2EuRmFrZUNvbnRhaW5lcixpYS5WZXJ0aWNhbCkmJnRoaXMub25WU2Nyb2xsQ29tbW9uKHNhLkZha2VDb250YWluZXIpfW9uVlNjcm9sbCgpe3RoaXMuaXNDb250cm9sbGluZ1Njcm9sbChzYS5Db250YWluZXIsaWEuVmVydGljYWwpJiZ0aGlzLm9uVlNjcm9sbENvbW1vbihzYS5Db250YWluZXIpfW9uVlNjcm9sbENvbW1vbihlKXtsZXQgdDt0PWU9PT1zYS5Db250YWluZXI/dGhpcy5lQm9keVZpZXdwb3J0LnNjcm9sbFRvcDp0aGlzLmN0cmxzU2VydmljZS5nZXRGYWtlVlNjcm9sbENvbXAoKS5nZXRTY3JvbGxQb3NpdGlvbigpLHRoaXMuc2hvdWxkQmxvY2tTY3JvbGxVcGRhdGUoaWEuVmVydGljYWwsdCwhMCl8fCh0aGlzLmFuaW1hdGlvbkZyYW1lU2VydmljZS5zZXRTY3JvbGxUb3AodCksdGhpcy5uZXh0U2Nyb2xsVG9wPXQsZT09PXNhLkNvbnRhaW5lcj90aGlzLmN0cmxzU2VydmljZS5nZXRGYWtlVlNjcm9sbENvbXAoKS5zZXRTY3JvbGxQb3NpdGlvbih0KTp0aGlzLmVCb2R5Vmlld3BvcnQuc2Nyb2xsVG9wPXQsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0FuaW1hdGlvbkZyYW1lIik/dGhpcy5zY3JvbGxHcmlkSWZOZWVkZWQoKTp0aGlzLmFuaW1hdGlvbkZyYW1lU2VydmljZS5zY2hlZHVsZSgpLHRoaXMucmVzZXRMYXN0VlNjcm9sbERlYm91bmNlZCgpKX1kb0hvcml6b250YWxTY3JvbGwoZSl7Y29uc3QgdD10aGlzLmN0cmxzU2VydmljZS5nZXRGYWtlSFNjcm9sbENvbXAoKS5nZXRTY3JvbGxQb3NpdGlvbigpO3RoaXMuc2Nyb2xsTGVmdD09PWUmJmU9PT10fHwodGhpcy5zY3JvbGxMZWZ0PWUsdGhpcy5maXJlU2Nyb2xsRXZlbnQoaWEuSG9yaXpvbnRhbCksdGhpcy5ob3Jpem9udGFsbHlTY3JvbGxIZWFkZXJDZW50ZXJBbmRGbG9hdGluZ0NlbnRlcihlKSx0aGlzLmNlbnRlclJvd0NvbnRhaW5lckN0cmwub25Ib3Jpem9udGFsVmlld3BvcnRDaGFuZ2VkKCEwKSl9ZmlyZVNjcm9sbEV2ZW50KGUpe2NvbnN0IHQ9e3R5cGU6bHQuRVZFTlRfQk9EWV9TQ1JPTEwsZGlyZWN0aW9uOmU9PT1pYS5Ib3Jpem9udGFsPyJob3Jpem9udGFsIjoidmVydGljYWwiLGxlZnQ6dGhpcy5zY3JvbGxMZWZ0LHRvcDp0aGlzLnNjcm9sbFRvcH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KSx3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2Nyb2xsVGltZXIpLHRoaXMuc2Nyb2xsVGltZXI9dm9pZCAwLHRoaXMuc2Nyb2xsVGltZXI9d2luZG93LnNldFRpbWVvdXQoKCk9Pntjb25zdCBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7dHlwZTpsdC5FVkVOVF9CT0RZX1NDUk9MTF9FTkR9KTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfSwxMDApfXNob3VsZEJsb2NrU2Nyb2xsVXBkYXRlKGUsdCxpPSExKXtyZXR1cm4hKGkmJiFNaSgpKSYmKGU9PT1pYS5WZXJ0aWNhbD90aGlzLnNob3VsZEJsb2NrVmVydGljYWxTY3JvbGwodCk6dGhpcy5zaG91bGRCbG9ja0hvcml6b250YWxTY3JvbGwodCkpfXNob3VsZEJsb2NrVmVydGljYWxTY3JvbGwoZSl7Y29uc3QgdD1hcyh0aGlzLmVCb2R5Vmlld3BvcnQpLHtzY3JvbGxIZWlnaHQ6aX09dGhpcy5lQm9keVZpZXdwb3J0O3JldHVybiBlPDB8fGUrdD5pfXNob3VsZEJsb2NrSG9yaXpvbnRhbFNjcm9sbChlKXtjb25zdCB0PXRoaXMuY2VudGVyUm93Q29udGFpbmVyQ3RybC5nZXRDZW50ZXJXaWR0aCgpLHtzY3JvbGxXaWR0aDppfT10aGlzLmNlbnRlclJvd0NvbnRhaW5lckN0cmwuZ2V0Vmlld3BvcnRFbGVtZW50KCk7aWYodGhpcy5lbmFibGVSdGwmJnVzKCkpe2lmKGU+MClyZXR1cm4hMH1lbHNlIGlmKGU8MClyZXR1cm4hMDtyZXR1cm4gTWF0aC5hYnMoZSkrdD5pfXJlZHJhd1Jvd3NBZnRlclNjcm9sbCgpe3RoaXMuZmlyZVNjcm9sbEV2ZW50KGlhLlZlcnRpY2FsKX1jaGVja1Njcm9sbExlZnQoKXt0aGlzLnNjcm9sbExlZnQhPT10aGlzLmNlbnRlclJvd0NvbnRhaW5lckN0cmwuZ2V0Q2VudGVyVmlld3BvcnRTY3JvbGxMZWZ0KCkmJnRoaXMub25IU2Nyb2xsQ29tbW9uKHNhLkNvbnRhaW5lcil9c2Nyb2xsR3JpZElmTmVlZGVkKCl7Y29uc3QgZT10aGlzLnNjcm9sbFRvcCE9dGhpcy5uZXh0U2Nyb2xsVG9wO3JldHVybiBlJiYodGhpcy5zY3JvbGxUb3A9dGhpcy5uZXh0U2Nyb2xsVG9wLHRoaXMucmVkcmF3Um93c0FmdGVyU2Nyb2xsKCkpLGV9c2V0SG9yaXpvbnRhbFNjcm9sbFBvc2l0aW9uKGUsdD0hMSl7Y29uc3QgaT10aGlzLmNlbnRlclJvd0NvbnRhaW5lckN0cmwuZ2V0Vmlld3BvcnRFbGVtZW50KCkuc2Nyb2xsV2lkdGgtdGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsLmdldENlbnRlcldpZHRoKCk7IXQmJnRoaXMuc2hvdWxkQmxvY2tTY3JvbGxVcGRhdGUoaWEuSG9yaXpvbnRhbCxlKSYmKGU9dGhpcy5lbmFibGVSdGwmJnVzKCk/ZT4wPzA6aTpNYXRoLm1pbihNYXRoLm1heChlLDApLGkpKSxncyh0aGlzLmNlbnRlclJvd0NvbnRhaW5lckN0cmwuZ2V0Vmlld3BvcnRFbGVtZW50KCksTWF0aC5hYnMoZSksdGhpcy5lbmFibGVSdGwpLHRoaXMuZG9Ib3Jpem9udGFsU2Nyb2xsKGUpfXNldFZlcnRpY2FsU2Nyb2xsUG9zaXRpb24oZSl7dGhpcy5lQm9keVZpZXdwb3J0LnNjcm9sbFRvcD1lfWdldFZTY3JvbGxQb3NpdGlvbigpe3RoaXMubGFzdFNjcm9sbFRvcD10aGlzLmVCb2R5Vmlld3BvcnQuc2Nyb2xsVG9wLHRoaXMubGFzdE9mZnNldEhlaWdodD10aGlzLmVCb2R5Vmlld3BvcnQub2Zmc2V0SGVpZ2h0O3JldHVybnt0b3A6dGhpcy5sYXN0U2Nyb2xsVG9wLGJvdHRvbTp0aGlzLmxhc3RTY3JvbGxUb3ArdGhpcy5sYXN0T2Zmc2V0SGVpZ2h0fX1nZXRBcHByb3hpbWF0ZVZTY29sbFBvc2l0aW9uKCl7cmV0dXJuIHRoaXMubGFzdFNjcm9sbFRvcD49MCYmdGhpcy5sYXN0T2Zmc2V0SGVpZ2h0Pj0wP3t0b3A6dGhpcy5zY3JvbGxUb3AsYm90dG9tOnRoaXMuc2Nyb2xsVG9wK3RoaXMubGFzdE9mZnNldEhlaWdodH06dGhpcy5nZXRWU2Nyb2xsUG9zaXRpb24oKX1nZXRIU2Nyb2xsUG9zaXRpb24oKXtyZXR1cm4gdGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsLmdldEhTY3JvbGxQb3NpdGlvbigpfWlzSG9yaXpvbnRhbFNjcm9sbFNob3dpbmcoKXtyZXR1cm4gdGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsLmlzSG9yaXpvbnRhbFNjcm9sbFNob3dpbmcoKX1zY3JvbGxIb3Jpem9udGFsbHkoZSl7Y29uc3QgdD10aGlzLmNlbnRlclJvd0NvbnRhaW5lckN0cmwuZ2V0Vmlld3BvcnRFbGVtZW50KCkuc2Nyb2xsTGVmdDtyZXR1cm4gdGhpcy5zZXRIb3Jpem9udGFsU2Nyb2xsUG9zaXRpb24odCtlKSx0aGlzLmNlbnRlclJvd0NvbnRhaW5lckN0cmwuZ2V0Vmlld3BvcnRFbGVtZW50KCkuc2Nyb2xsTGVmdC10fXNjcm9sbFRvVG9wKCl7dGhpcy5lQm9keVZpZXdwb3J0LnNjcm9sbFRvcD0wfWVuc3VyZU5vZGVWaXNpYmxlKGUsdD1udWxsKXtjb25zdCBpPXRoaXMucm93TW9kZWwuZ2V0Um93Q291bnQoKTtsZXQgcz0tMTtmb3IobGV0IHQ9MDt0PGk7dCsrKXtjb25zdCBpPXRoaXMucm93TW9kZWwuZ2V0Um93KHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBlKXtjb25zdCByPWU7aWYoaSYmcihpKSl7cz10O2JyZWFrfX1lbHNlIGlmKGU9PT1pfHxlPT09aS5kYXRhKXtzPXQ7YnJlYWt9fXM+PTAmJnRoaXMuZW5zdXJlSW5kZXhWaXNpYmxlKHMsdCl9ZW5zdXJlSW5kZXhWaXNpYmxlKGUsdCl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNEb21MYXlvdXQoInByaW50IikpcmV0dXJuO2NvbnN0IGk9dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0Um93Q291bnQoKTtpZigibnVtYmVyIiE9dHlwZW9mIGV8fGU8MHx8ZT49aSlyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IEludmFsaWQgcm93IGluZGV4IGZvciBlbnN1cmVJbmRleFZpc2libGU6ICIrZSk7Y29uc3Qgcz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBhZ2luYXRpb24iKSYmIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NQYWdpbmF0aW9uUGFuZWwiKTt0aGlzLmdldEZyYW1ld29ya092ZXJyaWRlcygpLndyYXBJbmNvbWluZygoKT0+e3N8fHRoaXMucGFnaW5hdGlvblByb3h5LmdvVG9QYWdlV2l0aEluZGV4KGUpO2NvbnN0IGk9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0R3JpZEJvZHlDdHJsKCkuZ2V0U3RpY2t5VG9wSGVpZ2h0KCkscj10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRSb3coZSk7bGV0IG87ZG97Y29uc3QgZT1yLnJvd1RvcCxzPXIucm93SGVpZ2h0LG49dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0UGl4ZWxPZmZzZXQoKSxhPXIucm93VG9wLW4sbD1hK3Iucm93SGVpZ2h0LGQ9dGhpcy5nZXRWU2Nyb2xsUG9zaXRpb24oKSxjPXRoaXMuaGVpZ2h0U2NhbGVyLmdldERpdlN0cmV0Y2hPZmZzZXQoKSxoPWQudG9wK2MsdT1kLmJvdHRvbStjLHA9dS1oLGc9dGhpcy5oZWlnaHRTY2FsZXIuZ2V0U2Nyb2xsUG9zaXRpb25Gb3JQaXhlbChhKSxtPXRoaXMuaGVpZ2h0U2NhbGVyLmdldFNjcm9sbFBvc2l0aW9uRm9yUGl4ZWwobC1wKSxmPU1hdGgubWluKChnK20pLzIsYSksdj1oK2k+YSxDPXU8bDtsZXQgeT1udWxsOyJ0b3AiPT09dD95PWc6ImJvdHRvbSI9PT10P3k9bToibWlkZGxlIj09PXQ/eT1mOnY/eT1nLWk6QyYmKHk9bSksbnVsbCE9PXkmJih0aGlzLnNldFZlcnRpY2FsU2Nyb2xsUG9zaXRpb24oeSksdGhpcy5yb3dSZW5kZXJlci5yZWRyYXcoe2FmdGVyU2Nyb2xsOiEwfSkpLG89ZSE9PXIucm93VG9wfHxzIT09ci5yb3dIZWlnaHR9d2hpbGUobyk7dGhpcy5hbmltYXRpb25GcmFtZVNlcnZpY2UuZmx1c2hBbGxGcmFtZXMoKX0pfWVuc3VyZUNvbHVtblZpc2libGUoZSx0PSJhdXRvIil7Y29uc3QgaT10aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4oZSk7aWYoIWkpcmV0dXJuO2lmKGkuaXNQaW5uZWQoKSlyZXR1cm47aWYoIXRoaXMuY29sdW1uTW9kZWwuaXNDb2x1bW5EaXNwbGF5ZWQoaSkpcmV0dXJuO2NvbnN0IHM9dGhpcy5nZXRQb3NpdGlvbmVkSG9yaXpvbnRhbFNjcm9sbChpLHQpO3RoaXMuZ2V0RnJhbWV3b3JrT3ZlcnJpZGVzKCkud3JhcEluY29taW5nKCgpPT57bnVsbCE9PXMmJnRoaXMuY2VudGVyUm93Q29udGFpbmVyQ3RybC5zZXRDZW50ZXJWaWV3cG9ydFNjcm9sbExlZnQocyksdGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsLm9uSG9yaXpvbnRhbFZpZXdwb3J0Q2hhbmdlZCgpLHRoaXMuYW5pbWF0aW9uRnJhbWVTZXJ2aWNlLmZsdXNoQWxsRnJhbWVzKCl9KX1zZXRTY3JvbGxQb3NpdGlvbihlLHQpe3RoaXMuZ2V0RnJhbWV3b3JrT3ZlcnJpZGVzKCkud3JhcEluY29taW5nKCgpPT57dGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsLnNldENlbnRlclZpZXdwb3J0U2Nyb2xsTGVmdCh0KSx0aGlzLnNldFZlcnRpY2FsU2Nyb2xsUG9zaXRpb24oZSksdGhpcy5yb3dSZW5kZXJlci5yZWRyYXcoe2FmdGVyU2Nyb2xsOiEwfSksdGhpcy5hbmltYXRpb25GcmFtZVNlcnZpY2UuZmx1c2hBbGxGcmFtZXMoKX0pfWdldFBvc2l0aW9uZWRIb3Jpem9udGFsU2Nyb2xsKGUsdCl7Y29uc3R7Y29sdW1uQmVmb3JlU3RhcnQ6aSxjb2x1bW5BZnRlckVuZDpzfT10aGlzLmlzQ29sdW1uT3V0c2lkZVZpZXdwb3J0KGUpLHI9dGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsLmdldENlbnRlcldpZHRoKCk8ZS5nZXRBY3R1YWxXaWR0aCgpLG89dGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsLmdldENlbnRlcldpZHRoKCksbj10aGlzLmVuYWJsZVJ0bDtsZXQgYT0obj9pOnMpfHxyLGw9bj9zOmk7ImF1dG8iIT09dCYmKGE9InN0YXJ0Ij09PXQsbD0iZW5kIj09PXQpO2NvbnN0IGQ9Im1pZGRsZSI9PT10O2lmKGF8fGx8fGQpe2NvbnN0e2NvbExlZnQ6dCxjb2xNaWRkbGU6aSxjb2xSaWdodDpzfT10aGlzLmdldENvbHVtbkJvdW5kcyhlKTtyZXR1cm4gZD9pLW8vMjphP24/czp0Om4/dC1vOnMtb31yZXR1cm4gbnVsbH1pc0NvbHVtbk91dHNpZGVWaWV3cG9ydChlKXtjb25zdHtzdGFydDp0LGVuZDppfT10aGlzLmdldFZpZXdwb3J0Qm91bmRzKCkse2NvbExlZnQ6cyxjb2xSaWdodDpyfT10aGlzLmdldENvbHVtbkJvdW5kcyhlKSxvPXRoaXMuZW5hYmxlUnRsO3JldHVybntjb2x1bW5CZWZvcmVTdGFydDpvP3Q+cjppPHIsY29sdW1uQWZ0ZXJFbmQ6bz9pPHM6dD5zfX1nZXRDb2x1bW5Cb3VuZHMoZSl7Y29uc3QgdD10aGlzLmVuYWJsZVJ0bCxpPXRoaXMuY29sdW1uTW9kZWwuZ2V0Qm9keUNvbnRhaW5lcldpZHRoKCkscz1lLmdldEFjdHVhbFdpZHRoKCkscj1lLmdldExlZnQoKSxvPXQ/LTE6MSxuPXQ/aS1yOnI7cmV0dXJue2NvbExlZnQ6bixjb2xNaWRkbGU6bitzLzIqbyxjb2xSaWdodDpuK3Mqb319Z2V0Vmlld3BvcnRCb3VuZHMoKXtjb25zdCBlPXRoaXMuY2VudGVyUm93Q29udGFpbmVyQ3RybC5nZXRDZW50ZXJXaWR0aCgpLHQ9dGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsLmdldENlbnRlclZpZXdwb3J0U2Nyb2xsTGVmdCgpO3JldHVybntzdGFydDp0LGVuZDplK3Qsd2lkdGg6ZX19fXJhKFtjZSgiY3RybHNTZXJ2aWNlIildLG9hLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLHJhKFtjZSgiYW5pbWF0aW9uRnJhbWVTZXJ2aWNlIildLG9hLnByb3RvdHlwZSwiYW5pbWF0aW9uRnJhbWVTZXJ2aWNlIix2b2lkIDApLHJhKFtjZSgicGFnaW5hdGlvblByb3h5IildLG9hLnByb3RvdHlwZSwicGFnaW5hdGlvblByb3h5Iix2b2lkIDApLHJhKFtjZSgicm93TW9kZWwiKV0sb2EucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSxyYShbY2UoInJvd0NvbnRhaW5lckhlaWdodFNlcnZpY2UiKV0sb2EucHJvdG90eXBlLCJoZWlnaHRTY2FsZXIiLHZvaWQgMCkscmEoW2NlKCJyb3dSZW5kZXJlciIpXSxvYS5wcm90b3R5cGUsInJvd1JlbmRlcmVyIix2b2lkIDApLHJhKFtjZSgiY29sdW1uTW9kZWwiKV0sb2EucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxyYShbYWVdLG9hLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIG5hPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGFhIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmlzTXVsdGlSb3dEcmFnPSExLHRoaXMuZUNvbnRhaW5lcj1lfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd01vZGVsVHlwZSgiY2xpZW50U2lkZSIpJiYodGhpcy5jbGllbnRTaWRlUm93TW9kZWw9dGhpcy5yb3dNb2RlbCksdGhpcy5jdHJsc1NlcnZpY2Uud2hlblJlYWR5KCgpPT57Y29uc3QgZT10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKTt0aGlzLmF1dG9TY3JvbGxTZXJ2aWNlPW5ldyBrbih7c2Nyb2xsQ29udGFpbmVyOmUuZ2V0Qm9keVZpZXdwb3J0RWxlbWVudCgpLHNjcm9sbEF4aXM6InkiLGdldFZlcnRpY2FsUG9zaXRpb246KCk9PmUuZ2V0U2Nyb2xsRmVhdHVyZSgpLmdldFZTY3JvbGxQb3NpdGlvbigpLnRvcCxzZXRWZXJ0aWNhbFBvc2l0aW9uOnQ9PmUuZ2V0U2Nyb2xsRmVhdHVyZSgpLnNldFZlcnRpY2FsU2Nyb2xsUG9zaXRpb24odCksb25TY3JvbGxDYWxsYmFjazooKT0+e3RoaXMub25EcmFnZ2luZyh0aGlzLmxhc3REcmFnZ2luZ0V2ZW50KX19KX0pfWdldENvbnRhaW5lcigpe3JldHVybiB0aGlzLmVDb250YWluZXJ9aXNJbnRlcmVzdGVkSW4oZSl7cmV0dXJuIGU9PT1Jby5Sb3dEcmFnfWdldEljb25OYW1lKCl7cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicm93RHJhZ01hbmFnZWQiKSYmdGhpcy5zaG91bGRQcmV2ZW50Um93TW92ZSgpP0dvLklDT05fTk9UX0FMTE9XRUQ6R28uSUNPTl9NT1ZFfXNob3VsZFByZXZlbnRSb3dNb3ZlKCl7aWYodGhpcy5jb2x1bW5Nb2RlbC5nZXRSb3dHcm91cENvbHVtbnMoKS5sZW5ndGgpcmV0dXJuITA7aWYodGhpcy5maWx0ZXJNYW5hZ2VyLmlzQW55RmlsdGVyUHJlc2VudCgpKXJldHVybiEwO3JldHVybiEhdGhpcy5zb3J0Q29udHJvbGxlci5pc1NvcnRBY3RpdmUoKX1nZXRSb3dOb2RlcyhlKXtpZighdGhpcy5pc0Zyb21UaGlzR3JpZChlKSlyZXR1cm4gZS5kcmFnSXRlbS5yb3dOb2Rlc3x8W107Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0RyYWdNdWx0aVJvdyIpLGk9Wy4uLnRoaXMuc2VsZWN0aW9uU2VydmljZS5nZXRTZWxlY3RlZE5vZGVzKCldLnNvcnQoKGUsdCk9Pm51bGw9PWUucm93SW5kZXh8fG51bGw9PXQucm93SW5kZXg/MDp0aGlzLmdldFJvd0luZGV4TnVtYmVyKGUpLXRoaXMuZ2V0Um93SW5kZXhOdW1iZXIodCkpLHM9ZS5kcmFnSXRlbS5yb3dOb2RlO3JldHVybiB0JiYtMSE9PWkuaW5kZXhPZihzKT8odGhpcy5pc011bHRpUm93RHJhZz0hMCxpKToodGhpcy5pc011bHRpUm93RHJhZz0hMSxbc10pfW9uRHJhZ0VudGVyKGUpe2UuZHJhZ0l0ZW0ucm93Tm9kZXM9dGhpcy5nZXRSb3dOb2RlcyhlKSx0aGlzLmRpc3BhdGNoR3JpZEV2ZW50KGx0LkVWRU5UX1JPV19EUkFHX0VOVEVSLGUpLHRoaXMuZ2V0Um93Tm9kZXMoZSkuZm9yRWFjaChlPT57ZS5zZXREcmFnZ2luZyghMCl9KSx0aGlzLm9uRW50ZXJPckRyYWdnaW5nKGUpfW9uRHJhZ2dpbmcoZSl7dGhpcy5vbkVudGVyT3JEcmFnZ2luZyhlKX1pc0Zyb21UaGlzR3JpZChlKXtjb25zdHtkcmFnU291cmNlRG9tRGF0YUtleTp0fT1lLmRyYWdTb3VyY2U7cmV0dXJuIHQ9PT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb21EYXRhS2V5KCl9aXNEcm9wWm9uZVdpdGhpblRoaXNHcmlkKGUpe2NvbnN0IHQ9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0R3JpZEJvZHlDdHJsKCkuZ2V0R3VpKCkse2Ryb3Bab25lVGFyZ2V0Oml9PWU7cmV0dXJuIXQuY29udGFpbnMoaSl9b25FbnRlck9yRHJhZ2dpbmcoZSl7dGhpcy5kaXNwYXRjaEdyaWRFdmVudChsdC5FVkVOVF9ST1dfRFJBR19NT1ZFLGUpLHRoaXMubGFzdERyYWdnaW5nRXZlbnQ9ZTtjb25zdCB0PXRoaXMubW91c2VFdmVudFNlcnZpY2UuZ2V0Tm9ybWFsaXNlZFBvc2l0aW9uKGUpLnk7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJyb3dEcmFnTWFuYWdlZCIpJiZ0aGlzLmRvTWFuYWdlZERyYWcoZSx0KSx0aGlzLmF1dG9TY3JvbGxTZXJ2aWNlLmNoZWNrKGUuZXZlbnQpfWRvTWFuYWdlZERyYWcoZSx0KXtjb25zdCBpPXRoaXMuaXNGcm9tVGhpc0dyaWQoZSkscz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0RyYWdNYW5hZ2VkIikscj1lLmRyYWdJdGVtLnJvd05vZGVzO3MmJnRoaXMuc2hvdWxkUHJldmVudFJvd01vdmUoKXx8KHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NNb3ZlV2hlblJvd0RyYWdnaW5nIil8fCFpP3RoaXMuaXNEcm9wWm9uZVdpdGhpblRoaXNHcmlkKGUpfHx0aGlzLmNsaWVudFNpZGVSb3dNb2RlbC5oaWdobGlnaHRSb3dBdFBpeGVsKHJbMF0sdCk6dGhpcy5tb3ZlUm93cyhyLHQpKX1nZXRSb3dJbmRleE51bWJlcihlKXtyZXR1cm4gcGFyc2VJbnQoT2UoZS5nZXRSb3dJbmRleFN0cmluZygpLnNwbGl0KCItIikpLDEwKX1tb3ZlUm93QW5kQ2xlYXJIaWdobGlnaHQoZSl7Y29uc3QgdD10aGlzLmNsaWVudFNpZGVSb3dNb2RlbC5nZXRMYXN0SGlnaGxpZ2h0ZWRSb3dOb2RlKCksaT10JiZ0LmhpZ2hsaWdodGVkPT09SG4uQmVsb3cscz10aGlzLm1vdXNlRXZlbnRTZXJ2aWNlLmdldE5vcm1hbGlzZWRQb3NpdGlvbihlKS55LHI9ZS5kcmFnSXRlbS5yb3dOb2RlcztsZXQgbz1pPzE6MDtpZih0aGlzLmlzRnJvbVRoaXNHcmlkKGUpKXIuZm9yRWFjaChlPT57ZS5yb3dUb3A8cyYmKG8tPTEpfSksdGhpcy5tb3ZlUm93cyhyLHMsbyk7ZWxzZXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJnZXRSb3dJZCIpO2xldCB0PXRoaXMuY2xpZW50U2lkZVJvd01vZGVsLmdldFJvd0luZGV4QXRQaXhlbChzKSsxO3RoaXMuY2xpZW50U2lkZVJvd01vZGVsLmdldEhpZ2hsaWdodFBvc2l0aW9uKHMpPT09SG4uQWJvdmUmJnQtLSx0aGlzLmNsaWVudFNpZGVSb3dNb2RlbC51cGRhdGVSb3dEYXRhKHthZGQ6ci5tYXAoZT0+ZS5kYXRhKS5maWx0ZXIodD0+IXRoaXMuY2xpZW50U2lkZVJvd01vZGVsLmdldFJvd05vZGUoZT9lKHtkYXRhOnQsbGV2ZWw6MH0pOnQuaWQpKSxhZGRJbmRleDp0fSl9dGhpcy5jbGVhclJvd0hpZ2hsaWdodCgpfWNsZWFyUm93SGlnaGxpZ2h0KCl7dGhpcy5jbGllbnRTaWRlUm93TW9kZWwuaGlnaGxpZ2h0Um93QXRQaXhlbChudWxsKX1tb3ZlUm93cyhlLHQsaT0wKXt0aGlzLmNsaWVudFNpZGVSb3dNb2RlbC5lbnN1cmVSb3dzQXRQaXhlbChlLHQsaSkmJih0aGlzLmZvY3VzU2VydmljZS5jbGVhckZvY3VzZWRDZWxsKCksdGhpcy5yYW5nZVNlcnZpY2UmJnRoaXMucmFuZ2VTZXJ2aWNlLnJlbW92ZUFsbENlbGxSYW5nZXMoKSl9YWRkUm93RHJvcFpvbmUoZSl7aWYoIWUuZ2V0Q29udGFpbmVyKCkpcmV0dXJuIHZvaWQgaigiYWRkUm93RHJvcFpvbmUgLSBBIGNvbnRhaW5lciB0YXJnZXQgbmVlZHMgdG8gYmUgcHJvdmlkZWQiKTtpZih0aGlzLmRyYWdBbmREcm9wU2VydmljZS5maW5kRXh0ZXJuYWxab25lKGUpKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZDogYWRkUm93RHJvcFpvbmUgLSB0YXJnZXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlIGxpc3Qgb2YgRHJvcFpvbmVzLiBVc2UgYHJlbW92ZVJvd0Ryb3Bab25lYCBiZWZvcmUgYWRkaW5nIGl0IGFnYWluLiIpO2xldCB0PXtnZXRDb250YWluZXI6ZS5nZXRDb250YWluZXJ9O2UuZnJvbUdyaWQ/KGUuZnJvbUdyaWQ9dm9pZCAwLHQ9ZSk6KGUub25EcmFnRW50ZXImJih0Lm9uRHJhZ0VudGVyPXQ9PntlLm9uRHJhZ0VudGVyKHRoaXMuZHJhZ2dpbmdUb1Jvd0RyYWdFdmVudChsdC5FVkVOVF9ST1dfRFJBR19FTlRFUix0KSl9KSxlLm9uRHJhZ0xlYXZlJiYodC5vbkRyYWdMZWF2ZT10PT57ZS5vbkRyYWdMZWF2ZSh0aGlzLmRyYWdnaW5nVG9Sb3dEcmFnRXZlbnQobHQuRVZFTlRfUk9XX0RSQUdfTEVBVkUsdCkpfSksZS5vbkRyYWdnaW5nJiYodC5vbkRyYWdnaW5nPXQ9PntlLm9uRHJhZ2dpbmcodGhpcy5kcmFnZ2luZ1RvUm93RHJhZ0V2ZW50KGx0LkVWRU5UX1JPV19EUkFHX01PVkUsdCkpfSksZS5vbkRyYWdTdG9wJiYodC5vbkRyYWdTdG9wPXQ9PntlLm9uRHJhZ1N0b3AodGhpcy5kcmFnZ2luZ1RvUm93RHJhZ0V2ZW50KGx0LkVWRU5UX1JPV19EUkFHX0VORCx0KSl9KSksdGhpcy5kcmFnQW5kRHJvcFNlcnZpY2UuYWRkRHJvcFRhcmdldChPYmplY3QuYXNzaWduKHtpc0ludGVyZXN0ZWRJbjplPT5lPT09SW8uUm93RHJhZyxnZXRJY29uTmFtZTooKT0+R28uSUNPTl9NT1ZFLGV4dGVybmFsOiEwfSx0KSl9Z2V0Um93RHJvcFpvbmUoZSl7Y29uc3QgdD10aGlzLmdldENvbnRhaW5lci5iaW5kKHRoaXMpLGk9dGhpcy5vbkRyYWdFbnRlci5iaW5kKHRoaXMpLHM9dGhpcy5vbkRyYWdMZWF2ZS5iaW5kKHRoaXMpLHI9dGhpcy5vbkRyYWdnaW5nLmJpbmQodGhpcyksbz10aGlzLm9uRHJhZ1N0b3AuYmluZCh0aGlzKTtyZXR1cm4gZT97Z2V0Q29udGFpbmVyOnQsb25EcmFnRW50ZXI6ZS5vbkRyYWdFbnRlcj90PT57aSh0KSxlLm9uRHJhZ0VudGVyKHRoaXMuZHJhZ2dpbmdUb1Jvd0RyYWdFdmVudChsdC5FVkVOVF9ST1dfRFJBR19FTlRFUix0KSl9Omksb25EcmFnTGVhdmU6ZS5vbkRyYWdMZWF2ZT90PT57cyh0KSxlLm9uRHJhZ0xlYXZlKHRoaXMuZHJhZ2dpbmdUb1Jvd0RyYWdFdmVudChsdC5FVkVOVF9ST1dfRFJBR19MRUFWRSx0KSl9OnMsb25EcmFnZ2luZzplLm9uRHJhZ2dpbmc/dD0+e3IodCksZS5vbkRyYWdnaW5nKHRoaXMuZHJhZ2dpbmdUb1Jvd0RyYWdFdmVudChsdC5FVkVOVF9ST1dfRFJBR19NT1ZFLHQpKX06cixvbkRyYWdTdG9wOmUub25EcmFnU3RvcD90PT57byh0KSxlLm9uRHJhZ1N0b3AodGhpcy5kcmFnZ2luZ1RvUm93RHJhZ0V2ZW50KGx0LkVWRU5UX1JPV19EUkFHX0VORCx0KSl9Om8sZnJvbUdyaWQ6ITB9OntnZXRDb250YWluZXI6dCxvbkRyYWdFbnRlcjppLG9uRHJhZ0xlYXZlOnMsb25EcmFnZ2luZzpyLG9uRHJhZ1N0b3A6byxmcm9tR3JpZDohMH19ZHJhZ2dpbmdUb1Jvd0RyYWdFdmVudChlLHQpe2NvbnN0IGk9dGhpcy5tb3VzZUV2ZW50U2VydmljZS5nZXROb3JtYWxpc2VkUG9zaXRpb24odCkueTtsZXQgcyxyLG89LTE7c3dpdGNoKGk+dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0Q3VycmVudFBhZ2VIZWlnaHQoKXx8KG89dGhpcy5yb3dNb2RlbC5nZXRSb3dJbmRleEF0UGl4ZWwoaSkscz10aGlzLnJvd01vZGVsLmdldFJvdyhvKSksdC52RGlyZWN0aW9uKXtjYXNlIEFvLkRvd246cj0iZG93biI7YnJlYWs7Y2FzZSBBby5VcDpyPSJ1cCI7YnJlYWs7ZGVmYXVsdDpyPW51bGx9cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3R5cGU6ZSxldmVudDp0LmV2ZW50LG5vZGU6dC5kcmFnSXRlbS5yb3dOb2RlLG5vZGVzOnQuZHJhZ0l0ZW0ucm93Tm9kZXMsb3ZlckluZGV4Om8sb3Zlck5vZGU6cyx5OmksdkRpcmVjdGlvbjpyfSl9ZGlzcGF0Y2hHcmlkRXZlbnQoZSx0KXtjb25zdCBpPXRoaXMuZHJhZ2dpbmdUb1Jvd0RyYWdFdmVudChlLHQpO3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoaSl9b25EcmFnTGVhdmUoZSl7dGhpcy5kaXNwYXRjaEdyaWRFdmVudChsdC5FVkVOVF9ST1dfRFJBR19MRUFWRSxlKSx0aGlzLnN0b3BEcmFnZ2luZyhlKSx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0RyYWdNYW5hZ2VkIikmJnRoaXMuY2xlYXJSb3dIaWdobGlnaHQoKSx0aGlzLmlzRnJvbVRoaXNHcmlkKGUpJiYodGhpcy5pc011bHRpUm93RHJhZz0hMSl9b25EcmFnU3RvcChlKXt0aGlzLmRpc3BhdGNoR3JpZEV2ZW50KGx0LkVWRU5UX1JPV19EUkFHX0VORCxlKSx0aGlzLnN0b3BEcmFnZ2luZyhlKSwhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJyb3dEcmFnTWFuYWdlZCIpfHwhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc01vdmVXaGVuUm93RHJhZ2dpbmciKSYmdGhpcy5pc0Zyb21UaGlzR3JpZChlKXx8dGhpcy5pc0Ryb3Bab25lV2l0aGluVGhpc0dyaWQoZSl8fHRoaXMubW92ZVJvd0FuZENsZWFySGlnaGxpZ2h0KGUpfXN0b3BEcmFnZ2luZyhlKXt0aGlzLmF1dG9TY3JvbGxTZXJ2aWNlLmVuc3VyZUNsZWFyZWQoKSx0aGlzLmdldFJvd05vZGVzKGUpLmZvckVhY2goZT0+e2Uuc2V0RHJhZ2dpbmcoITEpfSl9fW5hKFtjZSgiZHJhZ0FuZERyb3BTZXJ2aWNlIildLGFhLnByb3RvdHlwZSwiZHJhZ0FuZERyb3BTZXJ2aWNlIix2b2lkIDApLG5hKFtjZSgicm93TW9kZWwiKV0sYWEucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSxuYShbY2UoInBhZ2luYXRpb25Qcm94eSIpXSxhYS5wcm90b3R5cGUsInBhZ2luYXRpb25Qcm94eSIsdm9pZCAwKSxuYShbY2UoImNvbHVtbk1vZGVsIildLGFhLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksbmEoW2NlKCJmb2N1c1NlcnZpY2UiKV0sYWEucHJvdG90eXBlLCJmb2N1c1NlcnZpY2UiLHZvaWQgMCksbmEoW2NlKCJzb3J0Q29udHJvbGxlciIpXSxhYS5wcm90b3R5cGUsInNvcnRDb250cm9sbGVyIix2b2lkIDApLG5hKFtjZSgiZmlsdGVyTWFuYWdlciIpXSxhYS5wcm90b3R5cGUsImZpbHRlck1hbmFnZXIiLHZvaWQgMCksbmEoW2NlKCJzZWxlY3Rpb25TZXJ2aWNlIildLGFhLnByb3RvdHlwZSwic2VsZWN0aW9uU2VydmljZSIsdm9pZCAwKSxuYShbY2UoIm1vdXNlRXZlbnRTZXJ2aWNlIildLGFhLnByb3RvdHlwZSwibW91c2VFdmVudFNlcnZpY2UiLHZvaWQgMCksbmEoW2NlKCJjdHJsc1NlcnZpY2UiKV0sYWEucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksbmEoW2hlKCJyYW5nZVNlcnZpY2UiKV0sYWEucHJvdG90eXBlLCJyYW5nZVNlcnZpY2UiLHZvaWQgMCksbmEoW2FlXSxhYS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBsYSxkYT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTshZnVuY3Rpb24oZSl7ZS5BTklNQVRJT05fT049ImFnLXJvdy1hbmltYXRpb24iLGUuQU5JTUFUSU9OX09GRj0iYWctcm93LW5vLWFuaW1hdGlvbiJ9KGxhfHwobGE9e30pKTtjbGFzcyBjYSBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnN0aWNreVRvcEhlaWdodD0wfWdldFNjcm9sbEZlYXR1cmUoKXtyZXR1cm4gdGhpcy5ib2R5U2Nyb2xsRmVhdHVyZX1nZXRCb2R5Vmlld3BvcnRFbGVtZW50KCl7cmV0dXJuIHRoaXMuZUJvZHlWaWV3cG9ydH1zZXRDb21wKGUsdCxpLHMscixvKXt0aGlzLmNvbXA9ZSx0aGlzLmVHcmlkQm9keT10LHRoaXMuZUJvZHlWaWV3cG9ydD1pLHRoaXMuZVRvcD1zLHRoaXMuZUJvdHRvbT1yLHRoaXMuZVN0aWNreVRvcD1vLHRoaXMuc2V0Q2VsbFRleHRTZWxlY3Rpb24odGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVDZWxsVGV4dFNlbGVjdGlvbiIpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJlbmFibGVDZWxsVGV4dFNlbGVjdGlvbiIsZT0+dGhpcy5zZXRDZWxsVGV4dFNlbGVjdGlvbihlLmN1cnJlbnRWYWx1ZSkpLHRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHRhKHRoaXMuY29tcCkpLHRoaXMuYm9keVNjcm9sbEZlYXR1cmU9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgb2EodGhpcy5lQm9keVZpZXdwb3J0KSksdGhpcy5hZGRSb3dEcmFnTGlzdGVuZXIoKSx0aGlzLnNldHVwUm93QW5pbWF0aW9uQ3NzQ2xhc3MoKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCksdGhpcy5hZGRGb2N1c0xpc3RlbmVycyhbcyxpLHIsb10pLHRoaXMub25HcmlkQ29sdW1uc0NoYW5nZWQoKSx0aGlzLmFkZEJvZHlWaWV3cG9ydExpc3RlbmVyKCksdGhpcy5zZXRGbG9hdGluZ0hlaWdodHMoKSx0aGlzLmRpc2FibGVCcm93c2VyRHJhZ2dpbmcoKSx0aGlzLmFkZFN0b3BFZGl0aW5nV2hlbkdyaWRMb3Nlc0ZvY3VzKCksdGhpcy5maWx0ZXJNYW5hZ2VyLnNldHVwQWR2YW5jZWRGaWx0ZXJIZWFkZXJDb21wKHMpLHRoaXMuY3RybHNTZXJ2aWNlLnJlZ2lzdGVyR3JpZEJvZHlDdHJsKHRoaXMpfWdldENvbXAoKXtyZXR1cm4gdGhpcy5jb21wfWFkZEV2ZW50TGlzdGVuZXJzKCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfR1JJRF9DT0xVTU5TX0NIQU5HRUQsdGhpcy5vbkdyaWRDb2x1bW5zQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9TQ1JPTExfVklTSUJJTElUWV9DSEFOR0VELHRoaXMub25TY3JvbGxWaXNpYmlsaXR5Q2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9QSU5ORURfUk9XX0RBVEFfQ0hBTkdFRCx0aGlzLm9uUGlubmVkUm93RGF0YUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfSEVBREVSX0hFSUdIVF9DSEFOR0VELHRoaXMub25IZWFkZXJIZWlnaHRDaGFuZ2VkLmJpbmQodGhpcykpfWFkZEZvY3VzTGlzdGVuZXJzKGUpe2UuZm9yRWFjaChlPT57dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSwiZm9jdXNpbiIsdD0+e2NvbnN0e3RhcmdldDppfT10LHM9b3MoaSwiYWctcm9vdCIsZSk7ZS5jbGFzc0xpc3QudG9nZ2xlKCJhZy1oYXMtZm9jdXMiLCFzKX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsImZvY3Vzb3V0Iix0PT57Y29uc3R7dGFyZ2V0OmkscmVsYXRlZFRhcmdldDpzfT10LHI9ZS5jb250YWlucyhzKSxvPW9zKHMsImFnLXJvb3QiLGUpO29zKGksImFnLXJvb3QiLGUpfHxyJiYhb3x8ZS5jbGFzc0xpc3QucmVtb3ZlKCJhZy1oYXMtZm9jdXMiKX0pfSl9c2V0Q29sdW1uTW92aW5nQ3NzKGUpe3RoaXMuY29tcC5zZXRDb2x1bW5Nb3ZpbmdDc3MoImFnLWNvbHVtbi1tb3ZpbmciLGUpfXNldENlbGxUZXh0U2VsZWN0aW9uKGU9ITEpe3RoaXMuY29tcC5zZXRDZWxsU2VsZWN0YWJsZUNzcygiYWctc2VsZWN0YWJsZSIsZSl9b25TY3JvbGxWaXNpYmlsaXR5Q2hhbmdlZCgpe2NvbnN0IGU9dGhpcy5zY3JvbGxWaXNpYmxlU2VydmljZS5pc1ZlcnRpY2FsU2Nyb2xsU2hvd2luZygpO3RoaXMuc2V0VmVydGljYWxTY3JvbGxQYWRkaW5nVmlzaWJsZShlKSx0aGlzLnNldFN0aWNreVRvcFdpZHRoKGUpO2NvbnN0IHQ9YGNhbGMoMTAwJSArICR7KGUmJnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFNjcm9sbGJhcldpZHRoKCl8fDApKyhWaSgpPzE2OjApfXB4KWA7dGhpcy5hbmltYXRpb25GcmFtZVNlcnZpY2UucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpPT50aGlzLmNvbXAuc2V0Qm9keVZpZXdwb3J0V2lkdGgodCkpfW9uR3JpZENvbHVtbnNDaGFuZ2VkKCl7Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmdldEFsbEdyaWRDb2x1bW5zKCk7dGhpcy5jb21wLnNldENvbHVtbkNvdW50KGUubGVuZ3RoKX1kaXNhYmxlQnJvd3NlckRyYWdnaW5nKCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lR3JpZEJvZHksImRyYWdzdGFydCIsZT0+e2lmKGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudClyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpLCExfSl9YWRkU3RvcEVkaXRpbmdXaGVuR3JpZExvc2VzRm9jdXMoKXtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdG9wRWRpdGluZ1doZW5DZWxsc0xvc2VGb2N1cyIpKXJldHVybjtjb25zdCBlPWU9Pntjb25zdCBpPWUucmVsYXRlZFRhcmdldDtpZihudWxsPT09RmkoaSkpcmV0dXJuIHZvaWQgdGhpcy5yb3dSZW5kZXJlci5zdG9wRWRpdGluZygpO2xldCBzPXQuc29tZShlPT5lLmNvbnRhaW5zKGkpKSYmdGhpcy5tb3VzZUV2ZW50U2VydmljZS5pc0VsZW1lbnRJblRoaXNHcmlkKGkpO2lmKCFzKXtjb25zdCBlPXRoaXMucG9wdXBTZXJ2aWNlO3M9ZS5nZXRBY3RpdmVQb3B1cHMoKS5zb21lKGU9PmUuY29udGFpbnMoaSkpfHxlLmlzRWxlbWVudFdpdGhpbkN1c3RvbVBvcHVwKGkpfXN8fHRoaXMucm93UmVuZGVyZXIuc3RvcEVkaXRpbmcoKX0sdD1bdGhpcy5lQm9keVZpZXdwb3J0LHRoaXMuZUJvdHRvbSx0aGlzLmVUb3AsdGhpcy5lU3RpY2t5VG9wXTt0LmZvckVhY2godD0+dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodCwiZm9jdXNvdXQiLGUpKX11cGRhdGVSb3dDb3VudCgpe2NvbnN0IGU9dGhpcy5oZWFkZXJOYXZpZ2F0aW9uU2VydmljZS5nZXRIZWFkZXJSb3dDb3VudCgpK3RoaXMuZmlsdGVyTWFuYWdlci5nZXRIZWFkZXJSb3dDb3VudCgpLHQ9dGhpcy5yb3dNb2RlbC5pc0xhc3RSb3dJbmRleEtub3duKCk/dGhpcy5yb3dNb2RlbC5nZXRSb3dDb3VudCgpOi0xLGk9LTE9PT10Py0xOmUrdDt0aGlzLmNvbXAuc2V0Um93Q291bnQoaSl9cmVnaXN0ZXJCb2R5Vmlld3BvcnRSZXNpemVMaXN0ZW5lcihlKXt0aGlzLmNvbXAucmVnaXN0ZXJCb2R5Vmlld3BvcnRSZXNpemVMaXN0ZW5lcihlKX1zZXRWZXJ0aWNhbFNjcm9sbFBhZGRpbmdWaXNpYmxlKGUpe2NvbnN0IHQ9ZT8ic2Nyb2xsIjoiaGlkZGVuIjt0aGlzLmNvbXAuc2V0UGlubmVkVG9wQm90dG9tT3ZlcmZsb3dZKHQpfWlzVmVydGljYWxTY3JvbGxTaG93aW5nKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImFsd2F5c1Nob3dWZXJ0aWNhbFNjcm9sbCIpLHQ9ZT8iYWctZm9yY2UtdmVydGljYWwtc2Nyb2xsIjpudWxsLGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNEb21MYXlvdXQoIm5vcm1hbCIpO3JldHVybiB0aGlzLmNvbXAuc2V0QWx3YXlzVmVydGljYWxTY3JvbGxDbGFzcyh0LGUpLGV8fGkmJnhzKHRoaXMuZUJvZHlWaWV3cG9ydCl9c2V0dXBSb3dBbmltYXRpb25Dc3NDbGFzcygpe2NvbnN0IGU9KCk9Pntjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzQW5pbWF0ZVJvd3MoKSYmIXRoaXMucm93Q29udGFpbmVySGVpZ2h0U2VydmljZS5pc1N0cmV0Y2hpbmcoKSx0PWU/bGEuQU5JTUFUSU9OX09OOmxhLkFOSU1BVElPTl9PRkY7dGhpcy5jb21wLnNldFJvd0FuaW1hdGlvbkNzc09uQm9keVZpZXdwb3J0KHQsZSl9O2UoKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9IRUlHSFRfU0NBTEVfQ0hBTkdFRCxlKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJhbmltYXRlUm93cyIsZSl9Z2V0R3JpZEJvZHlFbGVtZW50KCl7cmV0dXJuIHRoaXMuZUdyaWRCb2R5fWFkZEJvZHlWaWV3cG9ydExpc3RlbmVyKCl7Y29uc3QgZT10aGlzLm9uQm9keVZpZXdwb3J0Q29udGV4dE1lbnUuYmluZCh0aGlzKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVCb2R5Vmlld3BvcnQsImNvbnRleHRtZW51IixlKSx0aGlzLm1vY2tDb250ZXh0TWVudUZvcklQYWQoZSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lQm9keVZpZXdwb3J0LCJ3aGVlbCIsdGhpcy5vbkJvZHlWaWV3cG9ydFdoZWVsLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZVN0aWNreVRvcCwid2hlZWwiLHRoaXMub25TdGlja3lUb3BXaGVlbC5iaW5kKHRoaXMpKSx0aGlzLmFkZEZ1bGxXaWR0aENvbnRhaW5lcldoZWVsTGlzdGVuZXIoKX1hZGRGdWxsV2lkdGhDb250YWluZXJXaGVlbExpc3RlbmVyKCl7Y29uc3QgZT10aGlzLmVCb2R5Vmlld3BvcnQucXVlcnlTZWxlY3RvcigiLmFnLWZ1bGwtd2lkdGgtY29udGFpbmVyIiksdD10aGlzLmVCb2R5Vmlld3BvcnQucXVlcnlTZWxlY3RvcigiLmFnLWNlbnRlci1jb2xzLXZpZXdwb3J0Iik7ZSYmdCYmdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSwid2hlZWwiLGU9PnRoaXMub25GdWxsV2lkdGhDb250YWluZXJXaGVlbChlLHQpKX1vbkZ1bGxXaWR0aENvbnRhaW5lcldoZWVsKGUsdCl7IWUuZGVsdGFYfHxNYXRoLmFicyhlLmRlbHRhWSk+TWF0aC5hYnMoZS5kZWx0YVgpfHwhdGhpcy5tb3VzZUV2ZW50U2VydmljZS5pc0V2ZW50RnJvbVRoaXNHcmlkKGUpfHwoZS5wcmV2ZW50RGVmYXVsdCgpLHQuc2Nyb2xsQnkoe2xlZnQ6ZS5kZWx0YVh9KSl9b25Cb2R5Vmlld3BvcnRDb250ZXh0TWVudShlLHQsaSl7aWYoIWUmJiFpKXJldHVybjtpZih0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInByZXZlbnREZWZhdWx0T25Db250ZXh0TWVudSIpKXsoZXx8aSkucHJldmVudERlZmF1bHQoKX1jb25zdHt0YXJnZXQ6c309ZXx8dDtzIT09dGhpcy5lQm9keVZpZXdwb3J0JiZzIT09dGhpcy5jdHJsc1NlcnZpY2UuZ2V0Q2VudGVyUm93Q29udGFpbmVyQ3RybCgpLmdldFZpZXdwb3J0RWxlbWVudCgpfHx0aGlzLm1lbnVTZXJ2aWNlLnNob3dDb250ZXh0TWVudSh7bW91c2VFdmVudDplLHRvdWNoRXZlbnQ6aSx2YWx1ZTpudWxsLGFuY2hvclRvRWxlbWVudDp0aGlzLmVHcmlkQm9keX0pfW1vY2tDb250ZXh0TWVudUZvcklQYWQoZSl7aWYoIU1pKCkpcmV0dXJuO2NvbnN0IHQ9bmV3IGFvKHRoaXMuZUJvZHlWaWV3cG9ydCk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodCxhby5FVkVOVF9MT05HX1RBUCx0PT57ZSh2b2lkIDAsdC50b3VjaFN0YXJ0LHQudG91Y2hFdmVudCl9KSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT50LmRlc3Ryb3koKSl9b25Cb2R5Vmlld3BvcnRXaGVlbChlKXt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzU2Nyb2xsV2hlblBvcHVwc0FyZU9wZW4iKSYmdGhpcy5wb3B1cFNlcnZpY2UuaGFzQW5jaG9yZWRQb3B1cCgpJiZlLnByZXZlbnREZWZhdWx0KCl9b25TdGlja3lUb3BXaGVlbChlKXtlLnByZXZlbnREZWZhdWx0KCksZS5vZmZzZXRZJiZ0aGlzLnNjcm9sbFZlcnRpY2FsbHkoZS5kZWx0YVkpfWdldEd1aSgpe3JldHVybiB0aGlzLmVHcmlkQm9keX1zY3JvbGxWZXJ0aWNhbGx5KGUpe2NvbnN0IHQ9dGhpcy5lQm9keVZpZXdwb3J0LnNjcm9sbFRvcDtyZXR1cm4gdGhpcy5ib2R5U2Nyb2xsRmVhdHVyZS5zZXRWZXJ0aWNhbFNjcm9sbFBvc2l0aW9uKHQrZSksdGhpcy5lQm9keVZpZXdwb3J0LnNjcm9sbFRvcC10fWFkZFJvd0RyYWdMaXN0ZW5lcigpe3RoaXMucm93RHJhZ0ZlYXR1cmU9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgYWEodGhpcy5lQm9keVZpZXdwb3J0KSksdGhpcy5kcmFnQW5kRHJvcFNlcnZpY2UuYWRkRHJvcFRhcmdldCh0aGlzLnJvd0RyYWdGZWF0dXJlKX1nZXRSb3dEcmFnRmVhdHVyZSgpe3JldHVybiB0aGlzLnJvd0RyYWdGZWF0dXJlfW9uUGlubmVkUm93RGF0YUNoYW5nZWQoKXt0aGlzLnNldEZsb2F0aW5nSGVpZ2h0cygpfXNldEZsb2F0aW5nSGVpZ2h0cygpe2NvbnN0e3Bpbm5lZFJvd01vZGVsOmV9PXRoaXM7bGV0IHQ9ZS5nZXRQaW5uZWRUb3BUb3RhbEhlaWdodCgpLGk9ZS5nZXRQaW5uZWRCb3R0b21Ub3RhbEhlaWdodCgpO3RoaXMuY29tcC5zZXRUb3BIZWlnaHQodCksdGhpcy5jb21wLnNldEJvdHRvbUhlaWdodChpKSx0aGlzLmNvbXAuc2V0VG9wRGlzcGxheSh0PyJpbmhlcml0Ijoibm9uZSIpLHRoaXMuY29tcC5zZXRCb3R0b21EaXNwbGF5KGk/ImluaGVyaXQiOiJub25lIiksdGhpcy5zZXRTdGlja3lUb3BPZmZzZXRUb3AoKX1zZXRTdGlja3lUb3BIZWlnaHQoZT0wKXt0aGlzLmNvbXAuc2V0U3RpY2t5VG9wSGVpZ2h0KGUrInB4IiksdGhpcy5zdGlja3lUb3BIZWlnaHQ9ZX1nZXRTdGlja3lUb3BIZWlnaHQoKXtyZXR1cm4gdGhpcy5zdGlja3lUb3BIZWlnaHR9c2V0U3RpY2t5VG9wV2lkdGgoZSl7aWYoZSl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRTY3JvbGxiYXJXaWR0aCgpO3RoaXMuY29tcC5zZXRTdGlja3lUb3BXaWR0aChgY2FsYygxMDAlIC0gJHtlfXB4KWApfWVsc2UgdGhpcy5jb21wLnNldFN0aWNreVRvcFdpZHRoKCIxMDAlIil9b25IZWFkZXJIZWlnaHRDaGFuZ2VkKCl7dGhpcy5zZXRTdGlja3lUb3BPZmZzZXRUb3AoKX1zZXRTdGlja3lUb3BPZmZzZXRUb3AoKXtjb25zdCBlPXRoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRIZWFkZXJDdHJsKCkuZ2V0SGVhZGVySGVpZ2h0KCkrdGhpcy5maWx0ZXJNYW5hZ2VyLmdldEhlYWRlckhlaWdodCgpLHQ9dGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRUb3BUb3RhbEhlaWdodCgpO2xldCBpPTA7ZT4wJiYoaSs9ZSsxKSx0PjAmJihpKz10KzEpLHRoaXMuY29tcC5zZXRTdGlja3lUb3BUb3AoaSsicHgiKX1zaXplQ29sdW1uc1RvRml0KGUsdCl7Y29uc3QgaT10aGlzLmlzVmVydGljYWxTY3JvbGxTaG93aW5nKCk/dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0U2Nyb2xsYmFyV2lkdGgoKTowLHM9bHModGhpcy5lR3JpZEJvZHkpLWk7cz4wP3RoaXMuY29sdW1uTW9kZWwuc2l6ZUNvbHVtbnNUb0ZpdChzLCJzaXplQ29sdW1uc1RvRml0IiwhMSxlKTp2b2lkIDA9PT10P3dpbmRvdy5zZXRUaW1lb3V0KCgpPT57dGhpcy5zaXplQ29sdW1uc1RvRml0KGUsMTAwKX0sMCk6MTAwPT09dD93aW5kb3cuc2V0VGltZW91dCgoKT0+e3RoaXMuc2l6ZUNvbHVtbnNUb0ZpdChlLDUwMCl9LDEwMCk6NTAwPT09dD93aW5kb3cuc2V0VGltZW91dCgoKT0+e3RoaXMuc2l6ZUNvbHVtbnNUb0ZpdChlLC0xKX0sNTAwKTpjb25zb2xlLndhcm4oIkFHIEdyaWQ6IHRyaWVkIHRvIGNhbGwgc2l6ZUNvbHVtbnNUb0ZpdCgpIGJ1dCB0aGUgZ3JpZCBpcyBjb21pbmcgYmFjayB3aXRoIHplcm8gd2lkdGgsIG1heWJlIHRoZSBncmlkIGlzIG5vdCB2aXNpYmxlIHlldCBvbiB0aGUgc2NyZWVuPyIpfWFkZFNjcm9sbEV2ZW50TGlzdGVuZXIoZSl7dGhpcy5lQm9keVZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsZSx7cGFzc2l2ZTohMH0pfXJlbW92ZVNjcm9sbEV2ZW50TGlzdGVuZXIoZSl7dGhpcy5lQm9keVZpZXdwb3J0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNjcm9sbCIsZSl9fXZhciBoYSx1YTtkYShbY2UoImFuaW1hdGlvbkZyYW1lU2VydmljZSIpXSxjYS5wcm90b3R5cGUsImFuaW1hdGlvbkZyYW1lU2VydmljZSIsdm9pZCAwKSxkYShbY2UoInJvd0NvbnRhaW5lckhlaWdodFNlcnZpY2UiKV0sY2EucHJvdG90eXBlLCJyb3dDb250YWluZXJIZWlnaHRTZXJ2aWNlIix2b2lkIDApLGRhKFtjZSgiY3RybHNTZXJ2aWNlIildLGNhLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLGRhKFtjZSgiY29sdW1uTW9kZWwiKV0sY2EucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxkYShbY2UoInNjcm9sbFZpc2libGVTZXJ2aWNlIildLGNhLnByb3RvdHlwZSwic2Nyb2xsVmlzaWJsZVNlcnZpY2UiLHZvaWQgMCksZGEoW2NlKCJtZW51U2VydmljZSIpXSxjYS5wcm90b3R5cGUsIm1lbnVTZXJ2aWNlIix2b2lkIDApLGRhKFtjZSgiaGVhZGVyTmF2aWdhdGlvblNlcnZpY2UiKV0sY2EucHJvdG90eXBlLCJoZWFkZXJOYXZpZ2F0aW9uU2VydmljZSIsdm9pZCAwKSxkYShbY2UoImRyYWdBbmREcm9wU2VydmljZSIpXSxjYS5wcm90b3R5cGUsImRyYWdBbmREcm9wU2VydmljZSIsdm9pZCAwKSxkYShbY2UoInBpbm5lZFJvd01vZGVsIildLGNhLnByb3RvdHlwZSwicGlubmVkUm93TW9kZWwiLHZvaWQgMCksZGEoW2NlKCJyb3dSZW5kZXJlciIpXSxjYS5wcm90b3R5cGUsInJvd1JlbmRlcmVyIix2b2lkIDApLGRhKFtjZSgicG9wdXBTZXJ2aWNlIildLGNhLnByb3RvdHlwZSwicG9wdXBTZXJ2aWNlIix2b2lkIDApLGRhKFtjZSgibW91c2VFdmVudFNlcnZpY2UiKV0sY2EucHJvdG90eXBlLCJtb3VzZUV2ZW50U2VydmljZSIsdm9pZCAwKSxkYShbY2UoInJvd01vZGVsIildLGNhLnByb3RvdHlwZSwicm93TW9kZWwiLHZvaWQgMCksZGEoW2NlKCJmaWx0ZXJNYW5hZ2VyIildLGNhLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSxmdW5jdGlvbihlKXtlW2UuRklMTD0wXT0iRklMTCIsZVtlLlJBTkdFPTFdPSJSQU5HRSJ9KGhhfHwoaGE9e30pKSxmdW5jdGlvbihlKXtlW2UuVkFMVUU9MF09IlZBTFVFIixlW2UuRElNRU5TSU9OPTFdPSJESU1FTlNJT04ifSh1YXx8KHVhPXt9KSk7Y2xhc3MgcGF7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmJlYW5zPWUsdGhpcy5jZWxsQ3RybD10fXNldENvbXAoZSx0KXt0aGlzLmNlbGxDb21wPWUsdGhpcy5lR3VpPXQsdGhpcy5vblJhbmdlU2VsZWN0aW9uQ2hhbmdlZCgpfW9uUmFuZ2VTZWxlY3Rpb25DaGFuZ2VkKCl7dGhpcy5jZWxsQ29tcCYmKHRoaXMucmFuZ2VDb3VudD10aGlzLmJlYW5zLnJhbmdlU2VydmljZS5nZXRDZWxsUmFuZ2VDb3VudCh0aGlzLmNlbGxDdHJsLmdldENlbGxQb3NpdGlvbigpKSx0aGlzLmhhc0NoYXJ0UmFuZ2U9dGhpcy5nZXRIYXNDaGFydFJhbmdlKCksdGhpcy5jZWxsQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jZWxsLXJhbmdlLXNlbGVjdGVkIiwwIT09dGhpcy5yYW5nZUNvdW50KSx0aGlzLmNlbGxDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNlbGwtcmFuZ2Utc2VsZWN0ZWQtMSIsMT09PXRoaXMucmFuZ2VDb3VudCksdGhpcy5jZWxsQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jZWxsLXJhbmdlLXNlbGVjdGVkLTIiLDI9PT10aGlzLnJhbmdlQ291bnQpLHRoaXMuY2VsbENvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY2VsbC1yYW5nZS1zZWxlY3RlZC0zIiwzPT09dGhpcy5yYW5nZUNvdW50KSx0aGlzLmNlbGxDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNlbGwtcmFuZ2Utc2VsZWN0ZWQtNCIsdGhpcy5yYW5nZUNvdW50Pj00KSx0aGlzLmNlbGxDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNlbGwtcmFuZ2UtY2hhcnQiLHRoaXMuaGFzQ2hhcnRSYW5nZSksYmkodGhpcy5lR3VpLHRoaXMucmFuZ2VDb3VudD4wfHx2b2lkIDApLHRoaXMuY2VsbENvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY2VsbC1yYW5nZS1zaW5nbGUtY2VsbCIsdGhpcy5pc1NpbmdsZUNlbGwoKSksdGhpcy51cGRhdGVSYW5nZUJvcmRlcnMoKSx0aGlzLnJlZnJlc2hIYW5kbGUoKSl9dXBkYXRlUmFuZ2VCb3JkZXJzKCl7Y29uc3QgZT10aGlzLmdldFJhbmdlQm9yZGVycygpLHQ9dGhpcy5pc1NpbmdsZUNlbGwoKSxpPSF0JiZlLnRvcCxzPSF0JiZlLnJpZ2h0LHI9IXQmJmUuYm90dG9tLG89IXQmJmUubGVmdDt0aGlzLmNlbGxDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNlbGwtcmFuZ2UtdG9wIixpKSx0aGlzLmNlbGxDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNlbGwtcmFuZ2UtcmlnaHQiLHMpLHRoaXMuY2VsbENvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY2VsbC1yYW5nZS1ib3R0b20iLHIpLHRoaXMuY2VsbENvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY2VsbC1yYW5nZS1sZWZ0IixvKX1pc1NpbmdsZUNlbGwoKXtjb25zdHtyYW5nZVNlcnZpY2U6ZX09dGhpcy5iZWFucztyZXR1cm4gMT09PXRoaXMucmFuZ2VDb3VudCYmZSYmIWUuaXNNb3JlVGhhbk9uZUNlbGwoKX1nZXRIYXNDaGFydFJhbmdlKCl7Y29uc3R7cmFuZ2VTZXJ2aWNlOmV9PXRoaXMuYmVhbnM7aWYoIXRoaXMucmFuZ2VDb3VudHx8IWUpcmV0dXJuITE7Y29uc3QgdD1lLmdldENlbGxSYW5nZXMoKTtyZXR1cm4gdC5sZW5ndGg+MCYmdC5ldmVyeShlPT5CZShbdWEuRElNRU5TSU9OLHVhLlZBTFVFXSxlLnR5cGUpKX11cGRhdGVSYW5nZUJvcmRlcnNJZlJhbmdlQ291bnQoKXt0aGlzLnJhbmdlQ291bnQ+MCYmKHRoaXMudXBkYXRlUmFuZ2VCb3JkZXJzKCksdGhpcy5yZWZyZXNoSGFuZGxlKCkpfWdldFJhbmdlQm9yZGVycygpe2NvbnN0IGU9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKTtsZXQgdD0hMSxpPSExLHM9ITEscj0hMTtjb25zdCBvPXRoaXMuY2VsbEN0cmwuZ2V0Q2VsbFBvc2l0aW9uKCkuY29sdW1uLHtyYW5nZVNlcnZpY2U6bixjb2x1bW5Nb2RlbDphfT10aGlzLmJlYW5zO2xldCBsLGQ7ZT8obD1hLmdldERpc3BsYXllZENvbEFmdGVyKG8pLGQ9YS5nZXREaXNwbGF5ZWRDb2xCZWZvcmUobykpOihsPWEuZ2V0RGlzcGxheWVkQ29sQmVmb3JlKG8pLGQ9YS5nZXREaXNwbGF5ZWRDb2xBZnRlcihvKSk7Y29uc3QgYz1uLmdldENlbGxSYW5nZXMoKS5maWx0ZXIoZT0+bi5pc0NlbGxJblNwZWNpZmljUmFuZ2UodGhpcy5jZWxsQ3RybC5nZXRDZWxsUG9zaXRpb24oKSxlKSk7bHx8KHI9ITApLGR8fChpPSEwKTtmb3IobGV0IGU9MDtlPGMubGVuZ3RoJiYhKHQmJmkmJnMmJnIpO2UrKyl7Y29uc3Qgbz1jW2VdLGE9bi5nZXRSYW5nZVN0YXJ0Um93KG8pLGg9bi5nZXRSYW5nZUVuZFJvdyhvKTshdCYmdGhpcy5iZWFucy5yb3dQb3NpdGlvblV0aWxzLnNhbWVSb3coYSx0aGlzLmNlbGxDdHJsLmdldENlbGxQb3NpdGlvbigpKSYmKHQ9ITApLCFzJiZ0aGlzLmJlYW5zLnJvd1Bvc2l0aW9uVXRpbHMuc2FtZVJvdyhoLHRoaXMuY2VsbEN0cmwuZ2V0Q2VsbFBvc2l0aW9uKCkpJiYocz0hMCksIXImJmwmJm8uY29sdW1ucy5pbmRleE9mKGwpPDAmJihyPSEwKSwhaSYmZCYmby5jb2x1bW5zLmluZGV4T2YoZCk8MCYmKGk9ITApfXJldHVybnt0b3A6dCxyaWdodDppLGJvdHRvbTpzLGxlZnQ6cn19cmVmcmVzaEhhbmRsZSgpe2lmKCF0aGlzLmJlYW5zLnJhbmdlU2VydmljZXx8dGhpcy5iZWFucy5jb250ZXh0LmlzRGVzdHJveWVkKCkpcmV0dXJuO2NvbnN0IGU9dGhpcy5zaG91bGRIYXZlU2VsZWN0aW9uSGFuZGxlKCk7dGhpcy5zZWxlY3Rpb25IYW5kbGUmJiFlJiYodGhpcy5zZWxlY3Rpb25IYW5kbGU9dGhpcy5iZWFucy5jb250ZXh0LmRlc3Ryb3lCZWFuKHRoaXMuc2VsZWN0aW9uSGFuZGxlKSksZSYmdGhpcy5hZGRTZWxlY3Rpb25IYW5kbGUoKSx0aGlzLmNlbGxDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNlbGwtcmFuZ2UtaGFuZGxlIiwhIXRoaXMuc2VsZWN0aW9uSGFuZGxlKX1zaG91bGRIYXZlU2VsZWN0aW9uSGFuZGxlKCl7Y29uc3R7Z3JpZE9wdGlvbnNTZXJ2aWNlOmUscmFuZ2VTZXJ2aWNlOnR9PXRoaXMuYmVhbnMsaT10LmdldENlbGxSYW5nZXMoKSxzPWkubGVuZ3RoO2lmKHRoaXMucmFuZ2VDb3VudDwxfHxzPDEpcmV0dXJuITE7Y29uc3Qgcj1PZShpKSxvPXRoaXMuY2VsbEN0cmwuZ2V0Q2VsbFBvc2l0aW9uKCksbj1lLmdldCgiZW5hYmxlRmlsbEhhbmRsZSIpJiYhdGhpcy5jZWxsQ3RybC5pc1N1cHByZXNzRmlsbEhhbmRsZSgpLGE9ZS5nZXQoImVuYWJsZVJhbmdlSGFuZGxlIik7bGV0IGw9MT09PXMmJiF0aGlzLmNlbGxDdHJsLmlzRWRpdGluZygpJiYobnx8YSk7aWYodGhpcy5oYXNDaGFydFJhbmdlKXtjb25zdCBlPWlbMF0udHlwZT09PXVhLkRJTUVOU0lPTiYmdC5pc0NlbGxJblNwZWNpZmljUmFuZ2UobyxpWzBdKTt0aGlzLmNlbGxDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNlbGwtcmFuZ2UtY2hhcnQtY2F0ZWdvcnkiLGUpLGw9ci50eXBlPT09dWEuVkFMVUV9cmV0dXJuIGwmJm51bGwhPXIuZW5kUm93JiZ0LmlzQ29udGlndW91c1JhbmdlKHIpJiZ0LmlzQm90dG9tUmlnaHRDZWxsKHIsbyl9YWRkU2VsZWN0aW9uSGFuZGxlKCl7Y29uc3R7Z3JpZE9wdGlvbnNTZXJ2aWNlOmUscmFuZ2VTZXJ2aWNlOnR9PXRoaXMuYmVhbnMsaT1PZSh0LmdldENlbGxSYW5nZXMoKSkudHlwZSxzPWUuZ2V0KCJlbmFibGVGaWxsSGFuZGxlIikmJkUoaSk/aGEuRklMTDpoYS5SQU5HRTt0aGlzLnNlbGVjdGlvbkhhbmRsZSYmdGhpcy5zZWxlY3Rpb25IYW5kbGUuZ2V0VHlwZSgpIT09cyYmKHRoaXMuc2VsZWN0aW9uSGFuZGxlPXRoaXMuYmVhbnMuY29udGV4dC5kZXN0cm95QmVhbih0aGlzLnNlbGVjdGlvbkhhbmRsZSkpLHRoaXMuc2VsZWN0aW9uSGFuZGxlfHwodGhpcy5zZWxlY3Rpb25IYW5kbGU9dGhpcy5iZWFucy5zZWxlY3Rpb25IYW5kbGVGYWN0b3J5LmNyZWF0ZVNlbGVjdGlvbkhhbmRsZShzKSksdGhpcy5zZWxlY3Rpb25IYW5kbGUucmVmcmVzaCh0aGlzLmNlbGxDdHJsKX1kZXN0cm95KCl7dGhpcy5iZWFucy5jb250ZXh0LmRlc3Ryb3lCZWFuKHRoaXMuc2VsZWN0aW9uSGFuZGxlKX19Y2xhc3MgZ2EgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCksdGhpcy5jZWxsQ3RybD1lLHRoaXMuYmVhbnM9dCx0aGlzLmNvbHVtbj1lLmdldENvbHVtbigpLHRoaXMucm93Tm9kZT1lLmdldFJvd05vZGUoKSx0aGlzLnNldHVwQ29sU3BhbigpLHRoaXMuc2V0dXBSb3dTcGFuKCl9c2V0dXBSb3dTcGFuKCl7dGhpcy5yb3dTcGFuPXRoaXMuY29sdW1uLmdldFJvd1NwYW4odGhpcy5yb3dOb2RlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmJlYW5zLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ORVdfQ09MVU1OU19MT0FERUQsKCk9PnRoaXMub25OZXdDb2x1bW5zTG9hZGVkKCkpfXNldENvbXAoZSl7dGhpcy5lR3VpPWUsdGhpcy5vbkxlZnRDaGFuZ2VkKCksdGhpcy5vbldpZHRoQ2hhbmdlZCgpLHRoaXMuYXBwbHlSb3dTcGFuKCl9b25OZXdDb2x1bW5zTG9hZGVkKCl7Y29uc3QgZT10aGlzLmNvbHVtbi5nZXRSb3dTcGFuKHRoaXMucm93Tm9kZSk7dGhpcy5yb3dTcGFuIT09ZSYmKHRoaXMucm93U3Bhbj1lLHRoaXMuYXBwbHlSb3dTcGFuKCEwKSl9b25EaXNwbGF5Q29sdW1uc0NoYW5nZWQoKXtjb25zdCBlPXRoaXMuZ2V0Q29sU3Bhbm5pbmdMaXN0KCk7QWUodGhpcy5jb2xzU3Bhbm5pbmcsZSl8fCh0aGlzLmNvbHNTcGFubmluZz1lLHRoaXMub25XaWR0aENoYW5nZWQoKSx0aGlzLm9uTGVmdENoYW5nZWQoKSl9c2V0dXBDb2xTcGFuKCl7bnVsbCE9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCkuY29sU3BhbiYmKHRoaXMuY29sc1NwYW5uaW5nPXRoaXMuZ2V0Q29sU3Bhbm5pbmdMaXN0KCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5iZWFucy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRElTUExBWUVEX0NPTFVNTlNfQ0hBTkdFRCx0aGlzLm9uRGlzcGxheUNvbHVtbnNDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuYmVhbnMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0RJU1BMQVlFRF9DT0xVTU5TX1dJRFRIX0NIQU5HRUQsdGhpcy5vbldpZHRoQ2hhbmdlZC5iaW5kKHRoaXMpKSl9b25XaWR0aENoYW5nZWQoKXtpZighdGhpcy5lR3VpKXJldHVybjtjb25zdCBlPXRoaXMuZ2V0Q2VsbFdpZHRoKCk7dGhpcy5lR3VpLnN0eWxlLndpZHRoPWUrInB4In1nZXRDZWxsV2lkdGgoKXtyZXR1cm4gdGhpcy5jb2xzU3Bhbm5pbmc/dGhpcy5jb2xzU3Bhbm5pbmcucmVkdWNlKChlLHQpPT5lK3QuZ2V0QWN0dWFsV2lkdGgoKSwwKTp0aGlzLmNvbHVtbi5nZXRBY3R1YWxXaWR0aCgpfWdldENvbFNwYW5uaW5nTGlzdCgpe2NvbnN0IGU9dGhpcy5jb2x1bW4uZ2V0Q29sU3Bhbih0aGlzLnJvd05vZGUpLHQ9W107aWYoMT09PWUpdC5wdXNoKHRoaXMuY29sdW1uKTtlbHNle2xldCBpPXRoaXMuY29sdW1uO2NvbnN0IHM9dGhpcy5jb2x1bW4uZ2V0UGlubmVkKCk7Zm9yKGxldCByPTA7aSYmcjxlJiYodC5wdXNoKGkpLGk9dGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5ZWRDb2xBZnRlcihpKSxpJiYhRShpKSkmJnM9PT1pLmdldFBpbm5lZCgpO3IrKyk7fXJldHVybiB0fW9uTGVmdENoYW5nZWQoKXtpZighdGhpcy5lR3VpKXJldHVybjtjb25zdCBlPXRoaXMubW9kaWZ5TGVmdEZvclByaW50TGF5b3V0KHRoaXMuZ2V0Q2VsbExlZnQoKSk7dGhpcy5lR3VpLnN0eWxlLmxlZnQ9ZSsicHgifWdldENlbGxMZWZ0KCl7bGV0IGU7cmV0dXJuIGU9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKSYmdGhpcy5jb2xzU3Bhbm5pbmc/T2UodGhpcy5jb2xzU3Bhbm5pbmcpOnRoaXMuY29sdW1uLGUuZ2V0TGVmdCgpfW1vZGlmeUxlZnRGb3JQcmludExheW91dChlKXtpZighdGhpcy5jZWxsQ3RybC5pc1ByaW50TGF5b3V0KCl8fCJsZWZ0Ij09PXRoaXMuY29sdW1uLmdldFBpbm5lZCgpKXJldHVybiBlO2NvbnN0IHQ9dGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5ZWRDb2x1bW5zTGVmdFdpZHRoKCk7aWYoInJpZ2h0Ij09PXRoaXMuY29sdW1uLmdldFBpbm5lZCgpKXtyZXR1cm4gdCt0aGlzLmJlYW5zLmNvbHVtbk1vZGVsLmdldEJvZHlDb250YWluZXJXaWR0aCgpKyhlfHwwKX1yZXR1cm4gdCsoZXx8MCl9YXBwbHlSb3dTcGFuKGUpe2lmKDE9PT10aGlzLnJvd1NwYW4mJiFlKXJldHVybjtjb25zdCB0PXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFJvd0hlaWdodEFzTnVtYmVyKCkqdGhpcy5yb3dTcGFuO3RoaXMuZUd1aS5zdHlsZS5oZWlnaHQ9dCsicHgiLHRoaXMuZUd1aS5zdHlsZS56SW5kZXg9IjEifWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCl9fWNsYXNzIG1hIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoZSx0KXtzdXBlcigpLHRoaXMuc3RhdGljQ2xhc3Nlcz1bXSx0aGlzLmNlbGxDdHJsPWUsdGhpcy5iZWFucz10LHRoaXMuY29sdW1uPWUuZ2V0Q29sdW1uKCksdGhpcy5yb3dOb2RlPWUuZ2V0Um93Tm9kZSgpfXNldENvbXAoZSl7dGhpcy5jZWxsQ29tcD1lLHRoaXMuYXBwbHlVc2VyU3R5bGVzKCksdGhpcy5hcHBseUNlbGxDbGFzc1J1bGVzKCksdGhpcy5hcHBseUNsYXNzZXNGcm9tQ29sRGVmKCl9YXBwbHlDZWxsQ2xhc3NSdWxlcygpe2NvbnN0IGU9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCkse2NlbGxDbGFzc1J1bGVzOnR9PWUsaT10aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHt2YWx1ZTp0aGlzLmNlbGxDdHJsLmdldFZhbHVlKCksZGF0YTp0aGlzLnJvd05vZGUuZGF0YSxub2RlOnRoaXMucm93Tm9kZSxjb2xEZWY6ZSxjb2x1bW46dGhpcy5jb2x1bW4scm93SW5kZXg6dGhpcy5yb3dOb2RlLnJvd0luZGV4fSk7dGhpcy5iZWFucy5zdHlsaW5nU2VydmljZS5wcm9jZXNzQ2xhc3NSdWxlcyh0PT09dGhpcy5jZWxsQ2xhc3NSdWxlcz92b2lkIDA6dGhpcy5jZWxsQ2xhc3NSdWxlcyx0LGksZT0+dGhpcy5jZWxsQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKGUsITApLGU9PnRoaXMuY2VsbENvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcyhlLCExKSksdGhpcy5jZWxsQ2xhc3NSdWxlcz10fWFwcGx5VXNlclN0eWxlcygpe2NvbnN0IGU9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCk7aWYoIWUuY2VsbFN0eWxlKXJldHVybjtsZXQgdDtpZigiZnVuY3Rpb24iPT10eXBlb2YgZS5jZWxsU3R5bGUpe2NvbnN0IGk9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7Y29sdW1uOnRoaXMuY29sdW1uLHZhbHVlOnRoaXMuY2VsbEN0cmwuZ2V0VmFsdWUoKSxjb2xEZWY6ZSxkYXRhOnRoaXMucm93Tm9kZS5kYXRhLG5vZGU6dGhpcy5yb3dOb2RlLHJvd0luZGV4OnRoaXMucm93Tm9kZS5yb3dJbmRleH0pO3Q9KDAsZS5jZWxsU3R5bGUpKGkpfWVsc2UgdD1lLmNlbGxTdHlsZTt0JiZ0aGlzLmNlbGxDb21wLnNldFVzZXJTdHlsZXModCl9YXBwbHlDbGFzc2VzRnJvbUNvbERlZigpe2NvbnN0IGU9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCksdD10aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHt2YWx1ZTp0aGlzLmNlbGxDdHJsLmdldFZhbHVlKCksZGF0YTp0aGlzLnJvd05vZGUuZGF0YSxub2RlOnRoaXMucm93Tm9kZSxjb2x1bW46dGhpcy5jb2x1bW4sY29sRGVmOmUscm93SW5kZXg6dGhpcy5yb3dOb2RlLnJvd0luZGV4fSk7dGhpcy5zdGF0aWNDbGFzc2VzLmxlbmd0aCYmdGhpcy5zdGF0aWNDbGFzc2VzLmZvckVhY2goZT0+dGhpcy5jZWxsQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKGUsITEpKSx0aGlzLnN0YXRpY0NsYXNzZXM9dGhpcy5iZWFucy5zdHlsaW5nU2VydmljZS5nZXRTdGF0aWNDZWxsQ2xhc3NlcyhlLHQpLHRoaXMuc3RhdGljQ2xhc3Nlcy5sZW5ndGgmJnRoaXMuc3RhdGljQ2xhc3Nlcy5mb3JFYWNoKGU9PnRoaXMuY2VsbENvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcyhlLCEwKSl9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKX19Y2xhc3MgZmEgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCksdGhpcy5jdHJsPWUsdGhpcy5iZWFucz10fXNldENvbXAoZSl7dGhpcy5lR3VpPWUsdGhpcy5zZXR1cFRvb2x0aXAoKX1zZXRCcm93c2VyVG9vbHRpcChlKXtudWxsIT1lJiYiIiE9ZT90aGlzLmVHdWkuc2V0QXR0cmlidXRlKCJ0aXRsZSIsZSk6dGhpcy5lR3VpLnJlbW92ZUF0dHJpYnV0ZSgidGl0bGUiKX1zZXR1cFRvb2x0aXAoKXt0aGlzLmJyb3dzZXJUb29sdGlwcz10aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZUJyb3dzZXJUb29sdGlwcyIpLHRoaXMudXBkYXRlVG9vbHRpcFRleHQoKSx0aGlzLmJyb3dzZXJUb29sdGlwcz90aGlzLnNldEJyb3dzZXJUb29sdGlwKHRoaXMudG9vbHRpcCk6dGhpcy5jcmVhdGVUb29sdGlwRmVhdHVyZUlmTmVlZGVkKCl9dXBkYXRlVG9vbHRpcFRleHQoKXt0aGlzLnRvb2x0aXA9dGhpcy5jdHJsLmdldFRvb2x0aXBWYWx1ZSgpfWNyZWF0ZVRvb2x0aXBGZWF0dXJlSWZOZWVkZWQoKXt2YXIgZSx0LGkscztpZihudWxsIT10aGlzLmdlbmVyaWNUb29sdGlwRmVhdHVyZSlyZXR1cm47Y29uc3Qgcj17Z2V0VG9vbHRpcFBhcmFtczooKT0+dGhpcy5nZXRUb29sdGlwUGFyYW1zKCksZ2V0R3VpOigpPT50aGlzLmN0cmwuZ2V0R3VpKCl9O3RoaXMuZ2VuZXJpY1Rvb2x0aXBGZWF0dXJlPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IG5yKHIsbnVsbD09PSh0PShlPXRoaXMuY3RybCkuZ2V0VG9vbHRpcFNob3dEZWxheU92ZXJyaWRlKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jYWxsKGUpLG51bGw9PT0ocz0oaT10aGlzLmN0cmwpLmdldFRvb2x0aXBIaWRlRGVsYXlPdmVycmlkZSl8fHZvaWQgMD09PXM/dm9pZCAwOnMuY2FsbChpKSksdGhpcy5iZWFucy5jb250ZXh0KX1yZWZyZXNoVG9vbFRpcCgpe3RoaXMudXBkYXRlVG9vbHRpcFRleHQoKSx0aGlzLmJyb3dzZXJUb29sdGlwcyYmdGhpcy5zZXRCcm93c2VyVG9vbHRpcCh0aGlzLnRvb2x0aXApfWdldFRvb2x0aXBQYXJhbXMoKXtjb25zdCBlPXRoaXMuY3RybCx0PWUuZ2V0Q29sdW1uP2UuZ2V0Q29sdW1uKCk6dm9pZCAwLGk9ZS5nZXRDb2xEZWY/ZS5nZXRDb2xEZWYoKTp2b2lkIDAscz1lLmdldFJvd05vZGU/ZS5nZXRSb3dOb2RlKCk6dm9pZCAwO3JldHVybntsb2NhdGlvbjplLmdldExvY2F0aW9uKCksY29sRGVmOmksY29sdW1uOnQscm93SW5kZXg6ZS5nZXRSb3dJbmRleD9lLmdldFJvd0luZGV4KCk6dm9pZCAwLG5vZGU6cyxkYXRhOnM/cy5kYXRhOnZvaWQgMCx2YWx1ZTp0aGlzLmdldFRvb2x0aXBUZXh0KCksdmFsdWVGb3JtYXR0ZWQ6ZS5nZXRWYWx1ZUZvcm1hdHRlZD9lLmdldFZhbHVlRm9ybWF0dGVkKCk6dm9pZCAwLGhpZGVUb29sdGlwQ2FsbGJhY2s6KCk9PnRoaXMuZ2VuZXJpY1Rvb2x0aXBGZWF0dXJlLmhpZGVUb29sdGlwKCEwKX19Z2V0VG9vbHRpcFRleHQoKXtyZXR1cm4gdGhpcy50b29sdGlwfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCl9fXZhciB2YT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgQ2E9Y2xhc3N7cG9zdENvbnN0cnVjdCgpe3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzUm93TW9kZWxUeXBlKCJjbGllbnRTaWRlIikmJih0aGlzLmNsaWVudFNpZGVSb3dNb2RlbD10aGlzLnJvd01vZGVsKSx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd01vZGVsVHlwZSgic2VydmVyU2lkZSIpJiYodGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWw9dGhpcy5yb3dNb2RlbCl9fTt2YShbY2UoInJlc2l6ZU9ic2VydmVyU2VydmljZSIpXSxDYS5wcm90b3R5cGUsInJlc2l6ZU9ic2VydmVyU2VydmljZSIsdm9pZCAwKSx2YShbY2UoInBhZ2luYXRpb25Qcm94eSIpXSxDYS5wcm90b3R5cGUsInBhZ2luYXRpb25Qcm94eSIsdm9pZCAwKSx2YShbY2UoImNvbnRleHQiKV0sQ2EucHJvdG90eXBlLCJjb250ZXh0Iix2b2lkIDApLHZhKFtjZSgiY29sdW1uQXBpIildLENhLnByb3RvdHlwZSwiY29sdW1uQXBpIix2b2lkIDApLHZhKFtjZSgiZ3JpZEFwaSIpXSxDYS5wcm90b3R5cGUsImdyaWRBcGkiLHZvaWQgMCksdmEoW2NlKCJncmlkT3B0aW9uc1NlcnZpY2UiKV0sQ2EucHJvdG90eXBlLCJncmlkT3B0aW9uc1NlcnZpY2UiLHZvaWQgMCksdmEoW2NlKCJleHByZXNzaW9uU2VydmljZSIpXSxDYS5wcm90b3R5cGUsImV4cHJlc3Npb25TZXJ2aWNlIix2b2lkIDApLHZhKFtjZSgiZW52aXJvbm1lbnQiKV0sQ2EucHJvdG90eXBlLCJlbnZpcm9ubWVudCIsdm9pZCAwKSx2YShbY2UoInJvd1JlbmRlcmVyIildLENhLnByb3RvdHlwZSwicm93UmVuZGVyZXIiLHZvaWQgMCksdmEoW2NlKCJ0ZW1wbGF0ZVNlcnZpY2UiKV0sQ2EucHJvdG90eXBlLCJ0ZW1wbGF0ZVNlcnZpY2UiLHZvaWQgMCksdmEoW2NlKCJ2YWx1ZVNlcnZpY2UiKV0sQ2EucHJvdG90eXBlLCJ2YWx1ZVNlcnZpY2UiLHZvaWQgMCksdmEoW2NlKCJldmVudFNlcnZpY2UiKV0sQ2EucHJvdG90eXBlLCJldmVudFNlcnZpY2UiLHZvaWQgMCksdmEoW2NlKCJjb2x1bW5Nb2RlbCIpXSxDYS5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLHZhKFtjZSgiaGVhZGVyTmF2aWdhdGlvblNlcnZpY2UiKV0sQ2EucHJvdG90eXBlLCJoZWFkZXJOYXZpZ2F0aW9uU2VydmljZSIsdm9pZCAwKSx2YShbY2UoIm5hdmlnYXRpb25TZXJ2aWNlIildLENhLnByb3RvdHlwZSwibmF2aWdhdGlvblNlcnZpY2UiLHZvaWQgMCksdmEoW2NlKCJjb2x1bW5BbmltYXRpb25TZXJ2aWNlIildLENhLnByb3RvdHlwZSwiY29sdW1uQW5pbWF0aW9uU2VydmljZSIsdm9pZCAwKSx2YShbaGUoInJhbmdlU2VydmljZSIpXSxDYS5wcm90b3R5cGUsInJhbmdlU2VydmljZSIsdm9pZCAwKSx2YShbY2UoImZvY3VzU2VydmljZSIpXSxDYS5wcm90b3R5cGUsImZvY3VzU2VydmljZSIsdm9pZCAwKSx2YShbY2UoInBvcHVwU2VydmljZSIpXSxDYS5wcm90b3R5cGUsInBvcHVwU2VydmljZSIsdm9pZCAwKSx2YShbY2UoInZhbHVlRm9ybWF0dGVyU2VydmljZSIpXSxDYS5wcm90b3R5cGUsInZhbHVlRm9ybWF0dGVyU2VydmljZSIsdm9pZCAwKSx2YShbY2UoInN0eWxpbmdTZXJ2aWNlIildLENhLnByb3RvdHlwZSwic3R5bGluZ1NlcnZpY2UiLHZvaWQgMCksdmEoW2NlKCJjb2x1bW5Ib3ZlclNlcnZpY2UiKV0sQ2EucHJvdG90eXBlLCJjb2x1bW5Ib3ZlclNlcnZpY2UiLHZvaWQgMCksdmEoW2NlKCJ1c2VyQ29tcG9uZW50RmFjdG9yeSIpXSxDYS5wcm90b3R5cGUsInVzZXJDb21wb25lbnRGYWN0b3J5Iix2b2lkIDApLHZhKFtjZSgidXNlckNvbXBvbmVudFJlZ2lzdHJ5IildLENhLnByb3RvdHlwZSwidXNlckNvbXBvbmVudFJlZ2lzdHJ5Iix2b2lkIDApLHZhKFtjZSgiYW5pbWF0aW9uRnJhbWVTZXJ2aWNlIildLENhLnByb3RvdHlwZSwiYW5pbWF0aW9uRnJhbWVTZXJ2aWNlIix2b2lkIDApLHZhKFtjZSgiZHJhZ1NlcnZpY2UiKV0sQ2EucHJvdG90eXBlLCJkcmFnU2VydmljZSIsdm9pZCAwKSx2YShbY2UoImRyYWdBbmREcm9wU2VydmljZSIpXSxDYS5wcm90b3R5cGUsImRyYWdBbmREcm9wU2VydmljZSIsdm9pZCAwKSx2YShbY2UoInNvcnRDb250cm9sbGVyIildLENhLnByb3RvdHlwZSwic29ydENvbnRyb2xsZXIiLHZvaWQgMCksdmEoW2NlKCJmaWx0ZXJNYW5hZ2VyIildLENhLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSx2YShbY2UoInJvd0NvbnRhaW5lckhlaWdodFNlcnZpY2UiKV0sQ2EucHJvdG90eXBlLCJyb3dDb250YWluZXJIZWlnaHRTZXJ2aWNlIix2b2lkIDApLHZhKFtjZSgiZnJhbWV3b3JrT3ZlcnJpZGVzIildLENhLnByb3RvdHlwZSwiZnJhbWV3b3JrT3ZlcnJpZGVzIix2b2lkIDApLHZhKFtjZSgiY2VsbFBvc2l0aW9uVXRpbHMiKV0sQ2EucHJvdG90eXBlLCJjZWxsUG9zaXRpb25VdGlscyIsdm9pZCAwKSx2YShbY2UoInJvd1Bvc2l0aW9uVXRpbHMiKV0sQ2EucHJvdG90eXBlLCJyb3dQb3NpdGlvblV0aWxzIix2b2lkIDApLHZhKFtjZSgic2VsZWN0aW9uU2VydmljZSIpXSxDYS5wcm90b3R5cGUsInNlbGVjdGlvblNlcnZpY2UiLHZvaWQgMCksdmEoW2hlKCJzZWxlY3Rpb25IYW5kbGVGYWN0b3J5IildLENhLnByb3RvdHlwZSwic2VsZWN0aW9uSGFuZGxlRmFjdG9yeSIsdm9pZCAwKSx2YShbY2UoInJvd0Nzc0NsYXNzQ2FsY3VsYXRvciIpXSxDYS5wcm90b3R5cGUsInJvd0Nzc0NsYXNzQ2FsY3VsYXRvciIsdm9pZCAwKSx2YShbY2UoInJvd01vZGVsIildLENhLnByb3RvdHlwZSwicm93TW9kZWwiLHZvaWQgMCksdmEoW2NlKCJjdHJsc1NlcnZpY2UiKV0sQ2EucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksdmEoW2NlKCJjdHJsc0ZhY3RvcnkiKV0sQ2EucHJvdG90eXBlLCJjdHJsc0ZhY3RvcnkiLHZvaWQgMCksdmEoW2NlKCJhZ1N0YWNrQ29tcG9uZW50c1JlZ2lzdHJ5IildLENhLnByb3RvdHlwZSwiYWdTdGFja0NvbXBvbmVudHNSZWdpc3RyeSIsdm9pZCAwKSx2YShbY2UoInZhbHVlQ2FjaGUiKV0sQ2EucHJvdG90eXBlLCJ2YWx1ZUNhY2hlIix2b2lkIDApLHZhKFtjZSgicm93Tm9kZUV2ZW50VGhyb3R0bGUiKV0sQ2EucHJvdG90eXBlLCJyb3dOb2RlRXZlbnRUaHJvdHRsZSIsdm9pZCAwKSx2YShbY2UoImxvY2FsZVNlcnZpY2UiKV0sQ2EucHJvdG90eXBlLCJsb2NhbGVTZXJ2aWNlIix2b2lkIDApLHZhKFtjZSgidmFsdWVQYXJzZXJTZXJ2aWNlIildLENhLnByb3RvdHlwZSwidmFsdWVQYXJzZXJTZXJ2aWNlIix2b2lkIDApLHZhKFtjZSgic3luY1NlcnZpY2UiKV0sQ2EucHJvdG90eXBlLCJzeW5jU2VydmljZSIsdm9pZCAwKSx2YShbY2UoImFyaWFBbm5vdW5jZW1lbnRTZXJ2aWNlIildLENhLnByb3RvdHlwZSwiYXJpYUFubm91bmNlbWVudFNlcnZpY2UiLHZvaWQgMCksdmEoW2FlXSxDYS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLENhPXZhKFtkZSgiYmVhbnMiKV0sQ2EpO2NsYXNzIHlhIGV4dGVuZHMgQ2F7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKCksdGhpcy5jZWxsQ3RybD1lLHRoaXMuYmVhbnM9dCx0aGlzLmNvbHVtbj1pfW9uTW91c2VFdmVudChlLHQpe2lmKCEkZSh0KSlzd2l0Y2goZSl7Y2FzZSJjbGljayI6dGhpcy5vbkNlbGxDbGlja2VkKHQpO2JyZWFrO2Nhc2UibW91c2Vkb3duIjpjYXNlInRvdWNoc3RhcnQiOnRoaXMub25Nb3VzZURvd24odCk7YnJlYWs7Y2FzZSJkYmxjbGljayI6dGhpcy5vbkNlbGxEb3VibGVDbGlja2VkKHQpO2JyZWFrO2Nhc2UibW91c2VvdXQiOnRoaXMub25Nb3VzZU91dCh0KTticmVhaztjYXNlIm1vdXNlb3ZlciI6dGhpcy5vbk1vdXNlT3Zlcih0KX19b25DZWxsQ2xpY2tlZChlKXtpZih0aGlzLmlzRG91YmxlQ2xpY2tPbklQYWQoKSlyZXR1cm4gdGhpcy5vbkNlbGxEb3VibGVDbGlja2VkKGUpLHZvaWQgZS5wcmV2ZW50RGVmYXVsdCgpO2NvbnN0e2V2ZW50U2VydmljZTp0LHJhbmdlU2VydmljZTppLGdyaWRPcHRpb25zU2VydmljZTpzfT10aGlzLmJlYW5zLHI9ZS5jdHJsS2V5fHxlLm1ldGFLZXk7aSYmciYmaS5nZXRDZWxsUmFuZ2VDb3VudCh0aGlzLmNlbGxDdHJsLmdldENlbGxQb3NpdGlvbigpKT4xJiZpLmludGVyc2VjdExhc3RSYW5nZSghMCk7Y29uc3Qgbz10aGlzLmNlbGxDdHJsLmNyZWF0ZUV2ZW50KGUsbHQuRVZFTlRfQ0VMTF9DTElDS0VEKTt0LmRpc3BhdGNoRXZlbnQobyk7Y29uc3Qgbj10aGlzLmNvbHVtbi5nZXRDb2xEZWYoKTtuLm9uQ2VsbENsaWNrZWQmJndpbmRvdy5zZXRUaW1lb3V0KCgpPT57dGhpcy5iZWFucy5mcmFtZXdvcmtPdmVycmlkZXMud3JhcE91dGdvaW5nKCgpPT57bi5vbkNlbGxDbGlja2VkKG8pfSl9LDApOyEoKHMuZ2V0KCJzaW5nbGVDbGlja0VkaXQiKXx8bi5zaW5nbGVDbGlja0VkaXQpJiYhcy5nZXQoInN1cHByZXNzQ2xpY2tFZGl0IikpfHxlLnNoaWZ0S2V5JiYwIT0obnVsbD09aT92b2lkIDA6aS5nZXRDZWxsUmFuZ2VzKCkubGVuZ3RoKXx8dGhpcy5jZWxsQ3RybC5zdGFydFJvd09yQ2VsbEVkaXQoKX1pc0RvdWJsZUNsaWNrT25JUGFkKCl7aWYoIU1pKCl8fFhlKCJkYmxjbGljayIpKXJldHVybiExO2NvbnN0IGU9KG5ldyBEYXRlKS5nZXRUaW1lKCksdD1lLXRoaXMubGFzdElQYWRNb3VzZUNsaWNrRXZlbnQ8MjAwO3JldHVybiB0aGlzLmxhc3RJUGFkTW91c2VDbGlja0V2ZW50PWUsdH1vbkNlbGxEb3VibGVDbGlja2VkKGUpe2NvbnN0IHQ9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCksaT10aGlzLmNlbGxDdHJsLmNyZWF0ZUV2ZW50KGUsbHQuRVZFTlRfQ0VMTF9ET1VCTEVfQ0xJQ0tFRCk7dGhpcy5iZWFucy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChpKSwiZnVuY3Rpb24iPT10eXBlb2YgdC5vbkNlbGxEb3VibGVDbGlja2VkJiZ3aW5kb3cuc2V0VGltZW91dCgoKT0+e3RoaXMuYmVhbnMuZnJhbWV3b3JrT3ZlcnJpZGVzLndyYXBPdXRnb2luZygoKT0+e3Qub25DZWxsRG91YmxlQ2xpY2tlZChpKX0pfSwwKTshdGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzaW5nbGVDbGlja0VkaXQiKSYmIXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NDbGlja0VkaXQiKSYmdGhpcy5jZWxsQ3RybC5zdGFydFJvd09yQ2VsbEVkaXQobnVsbCxlKX1vbk1vdXNlRG93bihlKXtjb25zdHtjdHJsS2V5OnQsbWV0YUtleTppLHNoaWZ0S2V5OnN9PWUscj1lLnRhcmdldCx7Y2VsbEN0cmw6byxiZWFuczpufT10aGlzLHtldmVudFNlcnZpY2U6YSxyYW5nZVNlcnZpY2U6bCxmb2N1c1NlcnZpY2U6ZH09bjtpZih0aGlzLmlzUmlnaHRDbGlja0luRXhpc3RpbmdSYW5nZShlKSlyZXR1cm47Y29uc3QgYz1sJiYwIT1sLmdldENlbGxSYW5nZXMoKS5sZW5ndGg7aWYoIXN8fCFjKXtjb25zdCBlPVRpKCkmJiFvLmlzRWRpdGluZygpJiYhdHMocik7by5mb2N1c0NlbGwoZSl9aWYocyYmYyYmIWQuaXNDZWxsRm9jdXNlZChvLmdldENlbGxQb3NpdGlvbigpKSl7ZS5wcmV2ZW50RGVmYXVsdCgpO2NvbnN0IHQ9ZC5nZXRGb2N1c2VkQ2VsbCgpO2lmKHQpe2NvbnN0e2NvbHVtbjplLHJvd0luZGV4Omkscm93UGlubmVkOnN9PXQscj1uLnJvd1JlbmRlcmVyLmdldFJvd0J5UG9zaXRpb24oe3Jvd0luZGV4Omkscm93UGlubmVkOnN9KSxvPW51bGw9PXI/dm9pZCAwOnIuZ2V0Q2VsbEN0cmwoZSk7KG51bGw9PW8/dm9pZCAwOm8uaXNFZGl0aW5nKCkpJiZvLnN0b3BFZGl0aW5nKCksZC5zZXRGb2N1c2VkQ2VsbCh7Y29sdW1uOmUscm93SW5kZXg6aSxyb3dQaW5uZWQ6cyxmb3JjZUJyb3dzZXJGb2N1czohMCxwcmV2ZW50U2Nyb2xsT25Ccm93c2VyRm9jdXM6ITB9KX19aWYoIXRoaXMuY29udGFpbnNXaWRnZXQocikpe2lmKGwpe2NvbnN0IGU9dGhpcy5jZWxsQ3RybC5nZXRDZWxsUG9zaXRpb24oKTtpZihzKWwuZXh0ZW5kTGF0ZXN0UmFuZ2VUb0NlbGwoZSk7ZWxzZXtjb25zdCBzPXR8fGk7bC5zZXRSYW5nZVRvQ2VsbChlLHMpfX1hLmRpc3BhdGNoRXZlbnQodGhpcy5jZWxsQ3RybC5jcmVhdGVFdmVudChlLGx0LkVWRU5UX0NFTExfTU9VU0VfRE9XTikpfX1pc1JpZ2h0Q2xpY2tJbkV4aXN0aW5nUmFuZ2UoZSl7Y29uc3R7cmFuZ2VTZXJ2aWNlOnR9PXRoaXMuYmVhbnM7aWYodCl7Y29uc3QgaT10LmlzQ2VsbEluQW55UmFuZ2UodGhpcy5jZWxsQ3RybC5nZXRDZWxsUG9zaXRpb24oKSkscz0yPT09ZS5idXR0b258fGUuY3RybEtleSYmdGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJhbGxvd0NvbnRleHRNZW51V2l0aENvbnRyb2xLZXkiKTtpZihpJiZzKXJldHVybiEwfXJldHVybiExfWNvbnRhaW5zV2lkZ2V0KGUpe3JldHVybiBvcyhlLCJhZy1zZWxlY3Rpb24tY2hlY2tib3giLDMpfW9uTW91c2VPdXQoZSl7aWYodGhpcy5tb3VzZVN0YXlpbmdJbnNpZGVDZWxsKGUpKXJldHVybjtjb25zdCB0PXRoaXMuY2VsbEN0cmwuY3JlYXRlRXZlbnQoZSxsdC5FVkVOVF9DRUxMX01PVVNFX09VVCk7dGhpcy5iZWFucy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KSx0aGlzLmJlYW5zLmNvbHVtbkhvdmVyU2VydmljZS5jbGVhck1vdXNlT3ZlcigpfW9uTW91c2VPdmVyKGUpe2lmKHRoaXMubW91c2VTdGF5aW5nSW5zaWRlQ2VsbChlKSlyZXR1cm47Y29uc3QgdD10aGlzLmNlbGxDdHJsLmNyZWF0ZUV2ZW50KGUsbHQuRVZFTlRfQ0VMTF9NT1VTRV9PVkVSKTt0aGlzLmJlYW5zLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpLHRoaXMuYmVhbnMuY29sdW1uSG92ZXJTZXJ2aWNlLnNldE1vdXNlT3ZlcihbdGhpcy5jb2x1bW5dKX1tb3VzZVN0YXlpbmdJbnNpZGVDZWxsKGUpe2lmKCFlLnRhcmdldHx8IWUucmVsYXRlZFRhcmdldClyZXR1cm4hMTtjb25zdCB0PXRoaXMuY2VsbEN0cmwuZ2V0R3VpKCksaT10LmNvbnRhaW5zKGUudGFyZ2V0KSxzPXQuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KTtyZXR1cm4gaSYmc31kZXN0cm95KCl7fX1jbGFzcyBTYSBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUsdCxpLHMscil7c3VwZXIoKSx0aGlzLmNlbGxDdHJsPWUsdGhpcy5iZWFucz10LHRoaXMucm93Tm9kZT1zLHRoaXMucm93Q3RybD1yfXNldENvbXAoZSl7dGhpcy5lR3VpPWV9b25LZXlEb3duKGUpe2NvbnN0IHQ9ZS5rZXk7c3dpdGNoKHQpe2Nhc2UganMuRU5URVI6dGhpcy5vbkVudGVyS2V5RG93bihlKTticmVhaztjYXNlIGpzLkYyOnRoaXMub25GMktleURvd24oZSk7YnJlYWs7Y2FzZSBqcy5FU0NBUEU6dGhpcy5vbkVzY2FwZUtleURvd24oZSk7YnJlYWs7Y2FzZSBqcy5UQUI6dGhpcy5vblRhYktleURvd24oZSk7YnJlYWs7Y2FzZSBqcy5CQUNLU1BBQ0U6Y2FzZSBqcy5ERUxFVEU6dGhpcy5vbkJhY2tzcGFjZU9yRGVsZXRlS2V5RG93bih0LGUpO2JyZWFrO2Nhc2UganMuRE9XTjpjYXNlIGpzLlVQOmNhc2UganMuUklHSFQ6Y2FzZSBqcy5MRUZUOnRoaXMub25OYXZpZ2F0aW9uS2V5RG93bihlLHQpfX1vbk5hdmlnYXRpb25LZXlEb3duKGUsdCl7dGhpcy5jZWxsQ3RybC5pc0VkaXRpbmcoKXx8KGUuc2hpZnRLZXkmJnRoaXMuY2VsbEN0cmwuaXNSYW5nZVNlbGVjdGlvbkVuYWJsZWQoKT90aGlzLm9uU2hpZnRSYW5nZVNlbGVjdChlKTp0aGlzLmJlYW5zLm5hdmlnYXRpb25TZXJ2aWNlLm5hdmlnYXRlVG9OZXh0Q2VsbChlLHQsdGhpcy5jZWxsQ3RybC5nZXRDZWxsUG9zaXRpb24oKSwhMCksZS5wcmV2ZW50RGVmYXVsdCgpKX1vblNoaWZ0UmFuZ2VTZWxlY3QoZSl7aWYoIXRoaXMuYmVhbnMucmFuZ2VTZXJ2aWNlKXJldHVybjtjb25zdCB0PXRoaXMuYmVhbnMucmFuZ2VTZXJ2aWNlLmV4dGVuZExhdGVzdFJhbmdlSW5EaXJlY3Rpb24oZSk7dCYmdGhpcy5iZWFucy5uYXZpZ2F0aW9uU2VydmljZS5lbnN1cmVDZWxsVmlzaWJsZSh0KX1vblRhYktleURvd24oZSl7dGhpcy5iZWFucy5uYXZpZ2F0aW9uU2VydmljZS5vblRhYktleURvd24odGhpcy5jZWxsQ3RybCxlKX1vbkJhY2tzcGFjZU9yRGVsZXRlS2V5RG93bihlLHQpe2NvbnN0e2NlbGxDdHJsOmksYmVhbnM6cyxyb3dOb2RlOnJ9PXRoaXMse2dyaWRPcHRpb25zU2VydmljZTpvLHJhbmdlU2VydmljZTpuLGV2ZW50U2VydmljZTphfT1zO2kuaXNFZGl0aW5nKCl8fChhLmRpc3BhdGNoRXZlbnQoe3R5cGU6bHQuRVZFTlRfS0VZX1NIT1JUQ1VUX0NIQU5HRURfQ0VMTF9TVEFSVH0pLCRzKGUsby5nZXQoImVuYWJsZUNlbGxFZGl0aW5nT25CYWNrc3BhY2UiKSk/biYmby5nZXQoImVuYWJsZVJhbmdlU2VsZWN0aW9uIik/bi5jbGVhckNlbGxSYW5nZUNlbGxWYWx1ZXMoe2Rpc3BhdGNoV3JhcHBlckV2ZW50czohMCx3cmFwcGVyRXZlbnRTb3VyY2U6ImRlbGV0ZUtleSJ9KTppLmlzQ2VsbEVkaXRhYmxlKCkmJnIuc2V0RGF0YVZhbHVlKGkuZ2V0Q29sdW1uKCksbnVsbCwiY2VsbENsZWFyIik6aS5zdGFydFJvd09yQ2VsbEVkaXQoZSx0KSxhLmRpc3BhdGNoRXZlbnQoe3R5cGU6bHQuRVZFTlRfS0VZX1NIT1JUQ1VUX0NIQU5HRURfQ0VMTF9FTkR9KSl9b25FbnRlcktleURvd24oZSl7aWYodGhpcy5jZWxsQ3RybC5pc0VkaXRpbmcoKXx8dGhpcy5yb3dDdHJsLmlzRWRpdGluZygpKXRoaXMuY2VsbEN0cmwuc3RvcEVkaXRpbmdBbmRGb2N1cyghMSxlLnNoaWZ0S2V5KTtlbHNlIGlmKHRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW50ZXJOYXZpZ2F0ZXNWZXJ0aWNhbGx5Iikpe2NvbnN0IHQ9ZS5zaGlmdEtleT9qcy5VUDpqcy5ET1dOO3RoaXMuYmVhbnMubmF2aWdhdGlvblNlcnZpY2UubmF2aWdhdGVUb05leHRDZWxsKG51bGwsdCx0aGlzLmNlbGxDdHJsLmdldENlbGxQb3NpdGlvbigpLCExKX1lbHNlIHRoaXMuY2VsbEN0cmwuc3RhcnRSb3dPckNlbGxFZGl0KGpzLkVOVEVSLGUpLHRoaXMuY2VsbEN0cmwuaXNFZGl0aW5nKCkmJmUucHJldmVudERlZmF1bHQoKX1vbkYyS2V5RG93bihlKXt0aGlzLmNlbGxDdHJsLmlzRWRpdGluZygpfHx0aGlzLmNlbGxDdHJsLnN0YXJ0Um93T3JDZWxsRWRpdChqcy5GMixlKX1vbkVzY2FwZUtleURvd24oZSl7dGhpcy5jZWxsQ3RybC5pc0VkaXRpbmcoKSYmKHRoaXMuY2VsbEN0cmwuc3RvcFJvd09yQ2VsbEVkaXQoITApLHRoaXMuY2VsbEN0cmwuZm9jdXNDZWxsKCEwKSl9cHJvY2Vzc0NoYXJhY3RlcihlKXtpZihlLnRhcmdldCE9PXRoaXMuZUd1aXx8dGhpcy5jZWxsQ3RybC5pc0VkaXRpbmcoKSlyZXR1cm47Y29uc3QgdD1lLmtleTsiICI9PT10P3RoaXMub25TcGFjZUtleURvd24oZSk6KHRoaXMuY2VsbEN0cmwuc3RhcnRSb3dPckNlbGxFZGl0KHQsZSksZS5wcmV2ZW50RGVmYXVsdCgpKX1vblNwYWNlS2V5RG93bihlKXtjb25zdHtncmlkT3B0aW9uc1NlcnZpY2U6dH09dGhpcy5iZWFucztpZighdGhpcy5jZWxsQ3RybC5pc0VkaXRpbmcoKSYmdC5pc1Jvd1NlbGVjdGlvbigpKXtjb25zdCBpPXRoaXMucm93Tm9kZS5pc1NlbGVjdGVkKCkscz0haTtpZihzfHwhdC5nZXQoInN1cHByZXNzUm93RGVzZWxlY3Rpb24iKSl7Y29uc3QgdD10aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwU2VsZWN0c0ZpbHRlcmVkIikscj10aGlzLnJvd05vZGUuc2V0U2VsZWN0ZWRQYXJhbXMoe25ld1ZhbHVlOnMscmFuZ2VTZWxlY3Q6ZS5zaGlmdEtleSxncm91cFNlbGVjdHNGaWx0ZXJlZDp0LGV2ZW50OmUsc291cmNlOiJzcGFjZUtleSJ9KTt2b2lkIDA9PT1pJiYwPT09ciYmdGhpcy5yb3dOb2RlLnNldFNlbGVjdGVkUGFyYW1zKHtuZXdWYWx1ZTohMSxyYW5nZVNlbGVjdDplLnNoaWZ0S2V5LGdyb3VwU2VsZWN0c0ZpbHRlcmVkOnQsZXZlbnQ6ZSxzb3VyY2U6InNwYWNlS2V5In0pfX1lLnByZXZlbnREZWZhdWx0KCl9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKX19dmFyIHdhPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGJhIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKCc8ZGl2IGNsYXNzPSJhZy1kcmFnLWhhbmRsZSBhZy1yb3ctZHJhZyIgZHJhZ2dhYmxlPSJ0cnVlIj48L2Rpdj4nKSx0aGlzLnJvd05vZGU9ZSx0aGlzLmNvbHVtbj10LHRoaXMuZUNlbGw9aX1wb3N0Q29uc3RydWN0KCl7dGhpcy5nZXRHdWkoKS5hcHBlbmRDaGlsZChXcygicm93RHJhZyIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCkpLHRoaXMuYWRkR3VpRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIixlPT57ZS5zdG9wUHJvcGFnYXRpb24oKX0pLHRoaXMuYWRkRHJhZ1NvdXJjZSgpLHRoaXMuY2hlY2tWaXNpYmlsaXR5KCl9YWRkRHJhZ1NvdXJjZSgpe3RoaXMuYWRkR3VpRXZlbnRMaXN0ZW5lcigiZHJhZ3N0YXJ0Iix0aGlzLm9uRHJhZ1N0YXJ0LmJpbmQodGhpcykpfW9uRHJhZ1N0YXJ0KGUpe2NvbnN0IHQ9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCkuZG5kU291cmNlT25Sb3dEcmFnO2UuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZSh0aGlzLmVDZWxsLDAsMCk7Y29uc3QgaT0oKT0+e3RyeXtjb25zdCB0PUpTT04uc3RyaW5naWZ5KHRoaXMucm93Tm9kZS5kYXRhKTtlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCJhcHBsaWNhdGlvbi9qc29uIix0KSxlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCJ0ZXh0L3BsYWluIix0KX1jYXRjaChlKXt9fTtpZih0KXt0KHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3Jvd05vZGU6dGhpcy5yb3dOb2RlLGRyYWdFdmVudDplfSkpfWVsc2UgaSgpfWNoZWNrVmlzaWJpbGl0eSgpe2NvbnN0IGU9dGhpcy5jb2x1bW4uaXNEbmRTb3VyY2UodGhpcy5yb3dOb2RlKTt0aGlzLnNldERpc3BsYXllZChlKX19d2EoW2FlXSxiYS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO2NsYXNzIEVhe3N0YXRpYyBnZXRIZWFkZXJDbGFzc2VzRnJvbUNvbERlZihlLHQsaSxzKXtyZXR1cm4gRShlKT9bXTp0aGlzLmdldENvbHVtbkNsYXNzZXNGcm9tQ29sbERlZihlLmhlYWRlckNsYXNzLGUsdCxpLHMpfXN0YXRpYyBnZXRUb29sUGFuZWxDbGFzc2VzRnJvbUNvbERlZihlLHQsaSxzKXtyZXR1cm4gRShlKT9bXTp0aGlzLmdldENvbHVtbkNsYXNzZXNGcm9tQ29sbERlZihlLnRvb2xQYW5lbENsYXNzLGUsdCxpLHMpfXN0YXRpYyByZWZyZXNoRmlyc3RBbmRMYXN0U3R5bGVzKGUsdCxpKXtlLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNvbHVtbi1maXJzdCIsaS5pc0NvbHVtbkF0RWRnZSh0LCJmaXJzdCIpKSxlLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNvbHVtbi1sYXN0IixpLmlzQ29sdW1uQXRFZGdlKHQsImxhc3QiKSl9c3RhdGljIGdldENsYXNzUGFyYW1zKGUsdCxpLHMpe3JldHVybiB0LmFkZEdyaWRDb21tb25QYXJhbXMoe2NvbERlZjplLGNvbHVtbjppLGNvbHVtbkdyb3VwOnN9KX1zdGF0aWMgZ2V0Q29sdW1uQ2xhc3Nlc0Zyb21Db2xsRGVmKGUsdCxpLHMscil7aWYoRShlKSlyZXR1cm5bXTtsZXQgbztpZigiZnVuY3Rpb24iPT10eXBlb2YgZSl7bz1lKHRoaXMuZ2V0Q2xhc3NQYXJhbXModCxpLHMscikpfWVsc2Ugbz1lO3JldHVybiJzdHJpbmciPT10eXBlb2Ygbz9bb106QXJyYXkuaXNBcnJheShvKT9bLi4ub106W119fWxldCBSYT0wO2NsYXNzIHhhIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoZSx0LGkscyl7c3VwZXIoKSx0aGlzLmNlbGxSYW5nZUZlYXR1cmU9bnVsbCx0aGlzLmNlbGxQb3NpdGlvbkZlYXR1cmU9bnVsbCx0aGlzLmNlbGxDdXN0b21TdHlsZUZlYXR1cmU9bnVsbCx0aGlzLnRvb2x0aXBGZWF0dXJlPW51bGwsdGhpcy5jZWxsTW91c2VMaXN0ZW5lckZlYXR1cmU9bnVsbCx0aGlzLmNlbGxLZXlib2FyZExpc3RlbmVyRmVhdHVyZT1udWxsLHRoaXMuc3VwcHJlc3NSZWZyZXNoQ2VsbD0hMSx0aGlzLm9uQ2VsbENvbXBBdHRhY2hlZEZ1bmNzPVtdLHRoaXMuY29sdW1uPWUsdGhpcy5yb3dOb2RlPXQsdGhpcy5iZWFucz1pLHRoaXMucm93Q3RybD1zLHRoaXMuaW5zdGFuY2VJZD1lLmdldElkKCkrIi0iK1JhKyssdGhpcy5jb2xJZFNhbml0aXNlZD1mdCh0aGlzLmNvbHVtbi5nZXRJZCgpKSxpLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQ2VsbEZvY3VzIil8fCh0aGlzLnRhYkluZGV4PS0xKSx0aGlzLmNyZWF0ZUNlbGxQb3NpdGlvbigpLHRoaXMuYWRkRmVhdHVyZXMoKSx0aGlzLnVwZGF0ZUFuZEZvcm1hdFZhbHVlKCExKX1zaG91bGRSZXN0b3JlRm9jdXMoKXtyZXR1cm4gdGhpcy5iZWFucy5mb2N1c1NlcnZpY2Uuc2hvdWxkUmVzdG9yZUZvY3VzKHRoaXMuY2VsbFBvc2l0aW9uKX1hZGRGZWF0dXJlcygpe3RoaXMuY2VsbFBvc2l0aW9uRmVhdHVyZT1uZXcgZ2EodGhpcyx0aGlzLmJlYW5zKSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT57dmFyIGU7bnVsbD09PShlPXRoaXMuY2VsbFBvc2l0aW9uRmVhdHVyZSl8fHZvaWQgMD09PWV8fGUuZGVzdHJveSgpLHRoaXMuY2VsbFBvc2l0aW9uRmVhdHVyZT1udWxsfSksdGhpcy5jZWxsQ3VzdG9tU3R5bGVGZWF0dXJlPW5ldyBtYSh0aGlzLHRoaXMuYmVhbnMpLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9Pnt2YXIgZTtudWxsPT09KGU9dGhpcy5jZWxsQ3VzdG9tU3R5bGVGZWF0dXJlKXx8dm9pZCAwPT09ZXx8ZS5kZXN0cm95KCksdGhpcy5jZWxsQ3VzdG9tU3R5bGVGZWF0dXJlPW51bGx9KSx0aGlzLmNlbGxNb3VzZUxpc3RlbmVyRmVhdHVyZT1uZXcgeWEodGhpcyx0aGlzLmJlYW5zLHRoaXMuY29sdW1uKSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT57dmFyIGU7bnVsbD09PShlPXRoaXMuY2VsbE1vdXNlTGlzdGVuZXJGZWF0dXJlKXx8dm9pZCAwPT09ZXx8ZS5kZXN0cm95KCksdGhpcy5jZWxsTW91c2VMaXN0ZW5lckZlYXR1cmU9bnVsbH0pLHRoaXMuY2VsbEtleWJvYXJkTGlzdGVuZXJGZWF0dXJlPW5ldyBTYSh0aGlzLHRoaXMuYmVhbnMsdGhpcy5jb2x1bW4sdGhpcy5yb3dOb2RlLHRoaXMucm93Q3RybCksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+e3ZhciBlO251bGw9PT0oZT10aGlzLmNlbGxLZXlib2FyZExpc3RlbmVyRmVhdHVyZSl8fHZvaWQgMD09PWV8fGUuZGVzdHJveSgpLHRoaXMuY2VsbEtleWJvYXJkTGlzdGVuZXJGZWF0dXJlPW51bGx9KSx0aGlzLmNvbHVtbi5pc1Rvb2x0aXBFbmFibGVkKCkmJih0aGlzLmVuYWJsZVRvb2x0aXBGZWF0dXJlKCksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+e3RoaXMuZGlzYWJsZVRvb2x0aXBGZWF0dXJlKCl9KSk7dGhpcy5iZWFucy5yYW5nZVNlcnZpY2UmJnRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUmFuZ2VTZWxlY3Rpb24iKSYmKHRoaXMuY2VsbFJhbmdlRmVhdHVyZT1uZXcgcGEodGhpcy5iZWFucyx0aGlzKSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT57dmFyIGU7bnVsbD09PShlPXRoaXMuY2VsbFJhbmdlRmVhdHVyZSl8fHZvaWQgMD09PWV8fGUuZGVzdHJveSgpLHRoaXMuY2VsbFJhbmdlRmVhdHVyZT1udWxsfSkpfWVuYWJsZVRvb2x0aXBGZWF0dXJlKCl7Y29uc3QgZT17Z2V0Q29sdW1uOigpPT50aGlzLmNvbHVtbixnZXRDb2xEZWY6KCk9PnRoaXMuY29sdW1uLmdldENvbERlZigpLGdldFJvd0luZGV4OigpPT50aGlzLmNlbGxQb3NpdGlvbi5yb3dJbmRleCxnZXRSb3dOb2RlOigpPT50aGlzLnJvd05vZGUsZ2V0R3VpOigpPT50aGlzLmdldEd1aSgpLGdldExvY2F0aW9uOigpPT4iY2VsbCIsZ2V0VG9vbHRpcFZhbHVlOigpPT57Y29uc3QgZT10aGlzLmNvbHVtbi5nZXRDb2xEZWYoKSx0PXRoaXMucm93Tm9kZS5kYXRhO2lmKGUudG9vbHRpcEZpZWxkJiZiKHQpKXJldHVybiBfKHQsZS50b29sdGlwRmllbGQsdGhpcy5jb2x1bW4uaXNUb29sdGlwRmllbGRDb250YWluc0RvdHMoKSk7Y29uc3QgaT1lLnRvb2x0aXBWYWx1ZUdldHRlcjtyZXR1cm4gaT9pKHRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe2xvY2F0aW9uOiJjZWxsIixjb2xEZWY6dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCksY29sdW1uOnRoaXMuY29sdW1uLHJvd0luZGV4OnRoaXMuY2VsbFBvc2l0aW9uLnJvd0luZGV4LG5vZGU6dGhpcy5yb3dOb2RlLGRhdGE6dGhpcy5yb3dOb2RlLmRhdGEsdmFsdWU6dGhpcy52YWx1ZSx2YWx1ZUZvcm1hdHRlZDp0aGlzLnZhbHVlRm9ybWF0dGVkfSkpOm51bGx9LGdldFZhbHVlRm9ybWF0dGVkOigpPT50aGlzLnZhbHVlRm9ybWF0dGVkfTt0aGlzLnRvb2x0aXBGZWF0dXJlPW5ldyBmYShlLHRoaXMuYmVhbnMpfWRpc2FibGVUb29sdGlwRmVhdHVyZSgpe3RoaXMudG9vbHRpcEZlYXR1cmUmJih0aGlzLnRvb2x0aXBGZWF0dXJlLmRlc3Ryb3koKSx0aGlzLnRvb2x0aXBGZWF0dXJlPW51bGwpfXNldENvbXAoZSx0LGkscyxyKXt2YXIgbyxuLGEsbDt0aGlzLmNlbGxDb21wPWUsdGhpcy5lR3VpPXQsdGhpcy5wcmludExheW91dD1zLHRoaXMuYWRkRG9tRGF0YSgpLHRoaXMub25DZWxsRm9jdXNlZCh0aGlzLmZvY3VzRXZlbnRUb1Jlc3RvcmUpLHRoaXMuYXBwbHlTdGF0aWNDc3NDbGFzc2VzKCksdGhpcy5zZXRXcmFwVGV4dCgpLHRoaXMub25GaXJzdFJpZ2h0UGlubmVkQ2hhbmdlZCgpLHRoaXMub25MYXN0TGVmdFBpbm5lZENoYW5nZWQoKSx0aGlzLm9uQ29sdW1uSG92ZXIoKSx0aGlzLnNldHVwQ29udHJvbENvbXBzKCksdGhpcy5zZXR1cEF1dG9IZWlnaHQoaSksdGhpcy5yZWZyZXNoRmlyc3RBbmRMYXN0U3R5bGVzKCksdGhpcy5yZWZyZXNoQXJpYUNvbEluZGV4KCksbnVsbD09PShvPXRoaXMuY2VsbFBvc2l0aW9uRmVhdHVyZSl8fHZvaWQgMD09PW98fG8uc2V0Q29tcCh0KSxudWxsPT09KG49dGhpcy5jZWxsQ3VzdG9tU3R5bGVGZWF0dXJlKXx8dm9pZCAwPT09bnx8bi5zZXRDb21wKGUpLG51bGw9PT0oYT10aGlzLnRvb2x0aXBGZWF0dXJlKXx8dm9pZCAwPT09YXx8YS5zZXRDb21wKHQpLG51bGw9PT0obD10aGlzLmNlbGxLZXlib2FyZExpc3RlbmVyRmVhdHVyZSl8fHZvaWQgMD09PWx8fGwuc2V0Q29tcCh0aGlzLmVHdWkpLHRoaXMuY2VsbFJhbmdlRmVhdHVyZSYmdGhpcy5jZWxsUmFuZ2VGZWF0dXJlLnNldENvbXAoZSx0KSxyJiZ0aGlzLmlzQ2VsbEVkaXRhYmxlKCk/dGhpcy5zdGFydEVkaXRpbmcoKTp0aGlzLnNob3dWYWx1ZSgpLHRoaXMub25DZWxsQ29tcEF0dGFjaGVkRnVuY3MubGVuZ3RoJiYodGhpcy5vbkNlbGxDb21wQXR0YWNoZWRGdW5jcy5mb3JFYWNoKGU9PmUoKSksdGhpcy5vbkNlbGxDb21wQXR0YWNoZWRGdW5jcz1bXSl9c2V0dXBBdXRvSGVpZ2h0KGUpe2lmKHRoaXMuaXNBdXRvSGVpZ2h0PXRoaXMuY29sdW1uLmlzQXV0b0hlaWdodCgpLCF0aGlzLmlzQXV0b0hlaWdodHx8IWUpcmV0dXJuO2NvbnN0IHQ9ZS5wYXJlbnRFbGVtZW50LGk9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0Rm9yTm9kZSh0aGlzLnJvd05vZGUpLmhlaWdodCxzPXI9PntpZih0aGlzLmVkaXRpbmcpcmV0dXJuO2lmKCF0aGlzLmlzQWxpdmUoKSlyZXR1cm47Y29uc3R7cGFkZGluZ1RvcDpvLHBhZGRpbmdCb3R0b206bixib3JkZXJCb3R0b21XaWR0aDphLGJvcmRlclRvcFdpZHRoOmx9PW5zKHQpLGQ9bytuK2ErbCxjPWUub2Zmc2V0SGVpZ2h0K2Q7aWYocjw1KXtjb25zdCB0PXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCksaT0wPT1jO2lmKCF0fHwhdC5jb250YWlucyhlKXx8aSlyZXR1cm4gdm9pZCB3aW5kb3cuc2V0VGltZW91dCgoKT0+cyhyKzEpLDApfWNvbnN0IGg9TWF0aC5tYXgoYyxpKTt0aGlzLnJvd05vZGUuc2V0Um93QXV0b0hlaWdodChoLHRoaXMuY29sdW1uKX0scj0oKT0+cygwKTtyKCk7Y29uc3Qgbz10aGlzLmJlYW5zLnJlc2l6ZU9ic2VydmVyU2VydmljZS5vYnNlcnZlUmVzaXplKGUscik7dGhpcy5hZGREZXN0cm95RnVuYygoKT0+e28oKSx0aGlzLnJvd05vZGUuc2V0Um93QXV0b0hlaWdodCh2b2lkIDAsdGhpcy5jb2x1bW4pfSl9Z2V0Q2VsbEFyaWFSb2xlKCl7dmFyIGU7cmV0dXJuIG51bGwhPT0oZT10aGlzLmNvbHVtbi5nZXRDb2xEZWYoKS5jZWxsQXJpYVJvbGUpJiZ2b2lkIDAhPT1lP2U6ImdyaWRjZWxsIn1nZXRJbnN0YW5jZUlkKCl7cmV0dXJuIHRoaXMuaW5zdGFuY2VJZH1nZXRJbmNsdWRlU2VsZWN0aW9uKCl7cmV0dXJuIHRoaXMuaW5jbHVkZVNlbGVjdGlvbn1nZXRJbmNsdWRlUm93RHJhZygpe3JldHVybiB0aGlzLmluY2x1ZGVSb3dEcmFnfWdldEluY2x1ZGVEbmRTb3VyY2UoKXtyZXR1cm4gdGhpcy5pbmNsdWRlRG5kU291cmNlfWdldENvbHVtbklkU2FuaXRpc2VkKCl7cmV0dXJuIHRoaXMuY29sSWRTYW5pdGlzZWR9Z2V0VGFiSW5kZXgoKXtyZXR1cm4gdGhpcy50YWJJbmRleH1pc0NlbGxSZW5kZXJlcigpe2NvbnN0IGU9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCk7cmV0dXJuIG51bGwhPWUuY2VsbFJlbmRlcmVyfHxudWxsIT1lLmNlbGxSZW5kZXJlclNlbGVjdG9yfWdldFZhbHVlVG9EaXNwbGF5KCl7cmV0dXJuIG51bGwhPXRoaXMudmFsdWVGb3JtYXR0ZWQ/dGhpcy52YWx1ZUZvcm1hdHRlZDp0aGlzLnZhbHVlfXNob3dWYWx1ZShlPSExKXtjb25zdCB0PXRoaXMuZ2V0VmFsdWVUb0Rpc3BsYXkoKTtsZXQgaTtpZih0aGlzLmlzQ2VsbFJlbmRlcmVyKCkpe2NvbnN0IGU9dGhpcy5jcmVhdGVDZWxsUmVuZGVyZXJQYXJhbXMoKTtpPXRoaXMuYmVhbnMudXNlckNvbXBvbmVudEZhY3RvcnkuZ2V0Q2VsbFJlbmRlcmVyRGV0YWlscyh0aGlzLmNvbHVtbi5nZXRDb2xEZWYoKSxlKX10aGlzLmNlbGxDb21wLnNldFJlbmRlckRldGFpbHMoaSx0LGUpLHRoaXMucmVmcmVzaEhhbmRsZSgpfXNldHVwQ29udHJvbENvbXBzKCl7Y29uc3QgZT10aGlzLmNvbHVtbi5nZXRDb2xEZWYoKTt0aGlzLmluY2x1ZGVTZWxlY3Rpb249dGhpcy5pc0luY2x1ZGVDb250cm9sKGUuY2hlY2tib3hTZWxlY3Rpb24pLHRoaXMuaW5jbHVkZVJvd0RyYWc9dGhpcy5pc0luY2x1ZGVDb250cm9sKGUucm93RHJhZyksdGhpcy5pbmNsdWRlRG5kU291cmNlPXRoaXMuaXNJbmNsdWRlQ29udHJvbChlLmRuZFNvdXJjZSksdGhpcy5jZWxsQ29tcC5zZXRJbmNsdWRlU2VsZWN0aW9uKHRoaXMuaW5jbHVkZVNlbGVjdGlvbiksdGhpcy5jZWxsQ29tcC5zZXRJbmNsdWRlRG5kU291cmNlKHRoaXMuaW5jbHVkZURuZFNvdXJjZSksdGhpcy5jZWxsQ29tcC5zZXRJbmNsdWRlUm93RHJhZyh0aGlzLmluY2x1ZGVSb3dEcmFnKX1pc0ZvcmNlV3JhcHBlcigpe3JldHVybiB0aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZUNlbGxUZXh0U2VsZWN0aW9uIil8fHRoaXMuY29sdW1uLmlzQXV0b0hlaWdodCgpfWlzSW5jbHVkZUNvbnRyb2woZSl7cmV0dXJuIShudWxsIT10aGlzLnJvd05vZGUucm93UGlubmVkKSYmKCJmdW5jdGlvbiI9PXR5cGVvZiBlfHwhMD09PWUpfXJlZnJlc2hTaG91bGREZXN0cm95KCl7Y29uc3QgZT10aGlzLmNvbHVtbi5nZXRDb2xEZWYoKSx0PXRoaXMuaW5jbHVkZVNlbGVjdGlvbiE9dGhpcy5pc0luY2x1ZGVDb250cm9sKGUuY2hlY2tib3hTZWxlY3Rpb24pLGk9dGhpcy5pbmNsdWRlUm93RHJhZyE9dGhpcy5pc0luY2x1ZGVDb250cm9sKGUucm93RHJhZykscz10aGlzLmluY2x1ZGVEbmRTb3VyY2UhPXRoaXMuaXNJbmNsdWRlQ29udHJvbChlLmRuZFNvdXJjZSk7cmV0dXJuIHR8fGl8fHN9c3RhcnRFZGl0aW5nKGU9bnVsbCx0PSExLGk9bnVsbCl7aWYoIXRoaXMuaXNDZWxsRWRpdGFibGUoKXx8dGhpcy5lZGl0aW5nKXJldHVybjtpZighdGhpcy5jZWxsQ29tcClyZXR1cm4gdm9pZCB0aGlzLm9uQ2VsbENvbXBBdHRhY2hlZEZ1bmNzLnB1c2goKCk9Pnt0aGlzLnN0YXJ0RWRpdGluZyhlLHQsaSl9KTtjb25zdCBzPXRoaXMuY3JlYXRlQ2VsbEVkaXRvclBhcmFtcyhlLHQpLHI9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCksbz10aGlzLmJlYW5zLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldENlbGxFZGl0b3JEZXRhaWxzKHIscyk7dGhpcy5lZGl0Q29tcERldGFpbHM9bztjb25zdCBuPW51bGwhPShudWxsPT1vP3ZvaWQgMDpvLnBvcHVwRnJvbVNlbGVjdG9yKT9vLnBvcHVwRnJvbVNlbGVjdG9yOiEhci5jZWxsRWRpdG9yUG9wdXAsYT1udWxsIT0obnVsbD09bz92b2lkIDA6by5wb3B1cFBvc2l0aW9uRnJvbVNlbGVjdG9yKT9vLnBvcHVwUG9zaXRpb25Gcm9tU2VsZWN0b3I6ci5jZWxsRWRpdG9yUG9wdXBQb3NpdGlvbjt0aGlzLnNldEVkaXRpbmcoITApLHRoaXMuY2VsbENvbXAuc2V0RWRpdERldGFpbHMobyxuLGEsdGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJyZWFjdGl2ZUN1c3RvbUNvbXBvbmVudHMiKSk7Y29uc3QgbD10aGlzLmNyZWF0ZUV2ZW50KGksbHQuRVZFTlRfQ0VMTF9FRElUSU5HX1NUQVJURUQpO3RoaXMuYmVhbnMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQobCl9c2V0RWRpdGluZyhlKXt0aGlzLmVkaXRpbmchPT1lJiYodGhpcy5lZGl0aW5nPWUsdGhpcy5yZWZyZXNoSGFuZGxlKCkpfXN0b3BSb3dPckNlbGxFZGl0KGU9ITEpeyJmdWxsUm93Ij09PXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZWRpdFR5cGUiKT90aGlzLnJvd0N0cmwuc3RvcEVkaXRpbmcoZSk6dGhpcy5zdG9wRWRpdGluZyhlKX1vblBvcHVwRWRpdG9yQ2xvc2VkKCl7dGhpcy5pc0VkaXRpbmcoKSYmdGhpcy5zdG9wRWRpdGluZ0FuZEZvY3VzKCl9dGFrZVZhbHVlRnJvbUNlbGxFZGl0b3IoZSl7Y29uc3QgdD17bmV3VmFsdWVFeGlzdHM6ITF9O2lmKGUpcmV0dXJuIHQ7Y29uc3QgaT10aGlzLmNlbGxDb21wLmdldENlbGxFZGl0b3IoKTtpZighaSlyZXR1cm4gdDtpZihpLmlzQ2FuY2VsQWZ0ZXJFbmQmJmkuaXNDYW5jZWxBZnRlckVuZCgpKXJldHVybiB0O3JldHVybntuZXdWYWx1ZTppLmdldFZhbHVlKCksbmV3VmFsdWVFeGlzdHM6ITB9fXNhdmVOZXdWYWx1ZShlLHQpe2lmKHQ9PT1lKXJldHVybiExO3RoaXMuc3VwcHJlc3NSZWZyZXNoQ2VsbD0hMDtjb25zdCBpPXRoaXMucm93Tm9kZS5zZXREYXRhVmFsdWUodGhpcy5jb2x1bW4sdCwiZWRpdCIpO3JldHVybiB0aGlzLnN1cHByZXNzUmVmcmVzaENlbGw9ITEsaX1zdG9wRWRpdGluZyhlPSExKXtpZighdGhpcy5lZGl0aW5nKXJldHVybiExO2NvbnN0e25ld1ZhbHVlOnQsbmV3VmFsdWVFeGlzdHM6aX09dGhpcy50YWtlVmFsdWVGcm9tQ2VsbEVkaXRvcihlKSxzPXRoaXMucm93Tm9kZS5nZXRWYWx1ZUZyb21WYWx1ZVNlcnZpY2UodGhpcy5jb2x1bW4pO2xldCByPSExO3JldHVybiBpJiYocj10aGlzLnNhdmVOZXdWYWx1ZShzLHQpKSx0aGlzLnNldEVkaXRpbmcoITEpLHRoaXMuY2VsbENvbXAuc2V0RWRpdERldGFpbHMoKSx0aGlzLmVkaXRDb21wRGV0YWlscz12b2lkIDAsdGhpcy51cGRhdGVBbmRGb3JtYXRWYWx1ZSghMSksdGhpcy5yZWZyZXNoQ2VsbCh7Zm9yY2VSZWZyZXNoOiEwLHN1cHByZXNzRmxhc2g6ITB9KSx0aGlzLmRpc3BhdGNoRWRpdGluZ1N0b3BwZWRFdmVudChzLHQsIWUmJiEhcikscn1kaXNwYXRjaEVkaXRpbmdTdG9wcGVkRXZlbnQoZSx0LGkpe2NvbnN0IHM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuY3JlYXRlRXZlbnQobnVsbCxsdC5FVkVOVF9DRUxMX0VESVRJTkdfU1RPUFBFRCkpLHtvbGRWYWx1ZTplLG5ld1ZhbHVlOnQsdmFsdWVDaGFuZ2VkOml9KTt0aGlzLmJlYW5zLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHMpfWNyZWF0ZUNlbGxFZGl0b3JQYXJhbXMoZSx0KXtyZXR1cm4gdGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7dmFsdWU6dGhpcy5yb3dOb2RlLmdldFZhbHVlRnJvbVZhbHVlU2VydmljZSh0aGlzLmNvbHVtbiksZXZlbnRLZXk6ZSxjb2x1bW46dGhpcy5jb2x1bW4sY29sRGVmOnRoaXMuY29sdW1uLmdldENvbERlZigpLHJvd0luZGV4OnRoaXMuZ2V0Q2VsbFBvc2l0aW9uKCkucm93SW5kZXgsbm9kZTp0aGlzLnJvd05vZGUsZGF0YTp0aGlzLnJvd05vZGUuZGF0YSxjZWxsU3RhcnRlZEVkaXQ6dCxvbktleURvd246dGhpcy5vbktleURvd24uYmluZCh0aGlzKSxzdG9wRWRpdGluZzp0aGlzLnN0b3BFZGl0aW5nQW5kRm9jdXMuYmluZCh0aGlzKSxlR3JpZENlbGw6dGhpcy5nZXRHdWkoKSxwYXJzZVZhbHVlOnRoaXMucGFyc2VWYWx1ZS5iaW5kKHRoaXMpLGZvcm1hdFZhbHVlOnRoaXMuZm9ybWF0VmFsdWUuYmluZCh0aGlzKX0pfWNyZWF0ZUNlbGxSZW5kZXJlclBhcmFtcygpe3JldHVybiB0aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHt2YWx1ZTp0aGlzLnZhbHVlLHZhbHVlRm9ybWF0dGVkOnRoaXMudmFsdWVGb3JtYXR0ZWQsZ2V0VmFsdWU6KCk9PnRoaXMucm93Tm9kZS5nZXRWYWx1ZUZyb21WYWx1ZVNlcnZpY2UodGhpcy5jb2x1bW4pLHNldFZhbHVlOmU9PnRoaXMuYmVhbnMudmFsdWVTZXJ2aWNlLnNldFZhbHVlKHRoaXMucm93Tm9kZSx0aGlzLmNvbHVtbixlKSxmb3JtYXRWYWx1ZTp0aGlzLmZvcm1hdFZhbHVlLmJpbmQodGhpcyksZGF0YTp0aGlzLnJvd05vZGUuZGF0YSxub2RlOnRoaXMucm93Tm9kZSxwaW5uZWQ6dGhpcy5jb2x1bW4uZ2V0UGlubmVkKCksY29sRGVmOnRoaXMuY29sdW1uLmdldENvbERlZigpLGNvbHVtbjp0aGlzLmNvbHVtbixyb3dJbmRleDp0aGlzLmdldENlbGxQb3NpdGlvbigpLnJvd0luZGV4LHJlZnJlc2hDZWxsOnRoaXMucmVmcmVzaENlbGwuYmluZCh0aGlzKSxlR3JpZENlbGw6dGhpcy5nZXRHdWkoKSxlUGFyZW50T2ZWYWx1ZTp0aGlzLmNlbGxDb21wLmdldFBhcmVudE9mVmFsdWUoKSxyZWdpc3RlclJvd0RyYWdnZXI6KGUsdCxpLHMpPT50aGlzLnJlZ2lzdGVyUm93RHJhZ2dlcihlLHQscyl9KX1wYXJzZVZhbHVlKGUpe3JldHVybiB0aGlzLmJlYW5zLnZhbHVlUGFyc2VyU2VydmljZS5wYXJzZVZhbHVlKHRoaXMuY29sdW1uLHRoaXMucm93Tm9kZSxlLHRoaXMuZ2V0VmFsdWUoKSl9c2V0Rm9jdXNPdXRPbkVkaXRvcigpe2lmKCF0aGlzLmVkaXRpbmcpcmV0dXJuO2NvbnN0IGU9dGhpcy5jZWxsQ29tcC5nZXRDZWxsRWRpdG9yKCk7ZSYmZS5mb2N1c091dCYmZS5mb2N1c091dCgpfXNldEZvY3VzSW5PbkVkaXRvcigpe2lmKCF0aGlzLmVkaXRpbmcpcmV0dXJuO2NvbnN0IGU9dGhpcy5jZWxsQ29tcC5nZXRDZWxsRWRpdG9yKCk7ZSYmZS5mb2N1c0luP2UuZm9jdXNJbigpOnRoaXMuZm9jdXNDZWxsKCEwKX1vbkNlbGxDaGFuZ2VkKGUpe2UuY29sdW1uPT09dGhpcy5jb2x1bW4mJnRoaXMucmVmcmVzaENlbGwoe30pfXJlZnJlc2hPckRlc3Ryb3lDZWxsKGUpe3ZhciB0O3RoaXMucmVmcmVzaFNob3VsZERlc3Ryb3koKT9udWxsPT09KHQ9dGhpcy5yb3dDdHJsKXx8dm9pZCAwPT09dHx8dC5yZWZyZXNoQ2VsbCh0aGlzKTp0aGlzLnJlZnJlc2hDZWxsKGUpfXJlZnJlc2hDZWxsKGUpe3ZhciB0LGkscztpZih0aGlzLnN1cHByZXNzUmVmcmVzaENlbGx8fHRoaXMuZWRpdGluZylyZXR1cm47Y29uc3Qgcj10aGlzLmNvbHVtbi5nZXRDb2xEZWYoKSxvPW51bGwhPWUmJiEhZS5uZXdEYXRhLG49bnVsbCE9ZSYmISFlLnN1cHByZXNzRmxhc2h8fCEhci5zdXBwcmVzc0NlbGxGbGFzaCxhPW51bGw9PXIuZmllbGQmJm51bGw9PXIudmFsdWVHZXR0ZXImJm51bGw9PXIuc2hvd1Jvd0dyb3VwLGw9ZSYmZS5mb3JjZVJlZnJlc2h8fGF8fG8sZD0hIXRoaXMuY2VsbENvbXAsYz10aGlzLnVwZGF0ZUFuZEZvcm1hdFZhbHVlKGQpO2lmKGQpe2lmKGx8fGMpe3RoaXMuc2hvd1ZhbHVlKG8pO2NvbnN0IGU9dGhpcy5iZWFucy5maWx0ZXJNYW5hZ2VyLmlzU3VwcHJlc3NGbGFzaGluZ0NlbGxzQmVjYXVzZUZpbHRlcmluZygpOyFuJiYhZSYmKHRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlQ2VsbENoYW5nZUZsYXNoIil8fHIuZW5hYmxlQ2VsbENoYW5nZUZsYXNoKSYmdGhpcy5mbGFzaENlbGwoKSxudWxsPT09KHQ9dGhpcy5jZWxsQ3VzdG9tU3R5bGVGZWF0dXJlKXx8dm9pZCAwPT09dHx8dC5hcHBseVVzZXJTdHlsZXMoKSxudWxsPT09KGk9dGhpcy5jZWxsQ3VzdG9tU3R5bGVGZWF0dXJlKXx8dm9pZCAwPT09aXx8aS5hcHBseUNsYXNzZXNGcm9tQ29sRGVmKCl9dGhpcy5yZWZyZXNoVG9vbFRpcCgpLG51bGw9PT0ocz10aGlzLmNlbGxDdXN0b21TdHlsZUZlYXR1cmUpfHx2b2lkIDA9PT1zfHxzLmFwcGx5Q2VsbENsYXNzUnVsZXMoKX19c3RvcEVkaXRpbmdBbmRGb2N1cyhlPSExLHQ9ITEpe3RoaXMuc3RvcFJvd09yQ2VsbEVkaXQoKSx0aGlzLmZvY3VzQ2VsbCghMCksZXx8dGhpcy5uYXZpZ2F0ZUFmdGVyRWRpdCh0KX1uYXZpZ2F0ZUFmdGVyRWRpdChlKXtpZih0aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVudGVyTmF2aWdhdGVzVmVydGljYWxseUFmdGVyRWRpdCIpKXtjb25zdCB0PWU/anMuVVA6anMuRE9XTjt0aGlzLmJlYW5zLm5hdmlnYXRpb25TZXJ2aWNlLm5hdmlnYXRlVG9OZXh0Q2VsbChudWxsLHQsdGhpcy5nZXRDZWxsUG9zaXRpb24oKSwhMSl9fWZsYXNoQ2VsbChlKXt2YXIgdCxpO2NvbnN0IHM9bnVsbCE9PSh0PW51bGw9PWU/dm9pZCAwOmUuZmxhc2hEdXJhdGlvbikmJnZvaWQgMCE9PXQ/dDpudWxsPT1lP3ZvaWQgMDplLmZsYXNoRGVsYXkscj1udWxsIT09KGk9bnVsbD09ZT92b2lkIDA6ZS5mYWRlRHVyYXRpb24pJiZ2b2lkIDAhPT1pP2k6bnVsbD09ZT92b2lkIDA6ZS5mYWRlRGVsYXk7dGhpcy5hbmltYXRlQ2VsbCgiZGF0YS1jaGFuZ2VkIixzLHIpfWFuaW1hdGVDZWxsKGUsdCxpKXtpZighdGhpcy5jZWxsQ29tcClyZXR1cm47Y29uc3Qgcz0iYWctY2VsbC0iK2Uscj1gYWctY2VsbC0ke2V9LWFuaW1hdGlvbmAse2dyaWRPcHRpb25zU2VydmljZTpvfT10aGlzLmJlYW5zO3R8fCh0PW8uZ2V0KCJjZWxsRmxhc2hEdXJhdGlvbiIpKSxiKGkpfHwoaT1vLmdldCgiY2VsbEZhZGVEdXJhdGlvbiIpKSx0aGlzLmNlbGxDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MocywhMCksdGhpcy5jZWxsQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKHIsITEpLHRoaXMuYmVhbnMuZnJhbWV3b3JrT3ZlcnJpZGVzLndyYXBJbmNvbWluZygoKT0+e3dpbmRvdy5zZXRUaW1lb3V0KCgpPT57dGhpcy5pc0FsaXZlKCkmJih0aGlzLmNlbGxDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MocywhMSksdGhpcy5jZWxsQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKHIsITApLHRoaXMuZUd1aS5zdHlsZS50cmFuc2l0aW9uPWBiYWNrZ3JvdW5kLWNvbG9yICR7aX1tc2Asd2luZG93LnNldFRpbWVvdXQoKCk9Pnt0aGlzLmlzQWxpdmUoKSYmKHRoaXMuY2VsbENvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcyhyLCExKSx0aGlzLmVHdWkuc3R5bGUudHJhbnNpdGlvbj0iIil9LGkpKX0sdCl9KX1vbkZsYXNoQ2VsbHMoZSl7aWYoIXRoaXMuY2VsbENvbXApcmV0dXJuO2NvbnN0IHQ9dGhpcy5iZWFucy5jZWxsUG9zaXRpb25VdGlscy5jcmVhdGVJZCh0aGlzLmdldENlbGxQb3NpdGlvbigpKTtlLmNlbGxzW3RdJiZ0aGlzLmFuaW1hdGVDZWxsKCJoaWdobGlnaHQiKX1pc0NlbGxFZGl0YWJsZSgpe3JldHVybiB0aGlzLmNvbHVtbi5pc0NlbGxFZGl0YWJsZSh0aGlzLnJvd05vZGUpfWlzU3VwcHJlc3NGaWxsSGFuZGxlKCl7cmV0dXJuIHRoaXMuY29sdW1uLmlzU3VwcHJlc3NGaWxsSGFuZGxlKCl9Zm9ybWF0VmFsdWUoZSl7dmFyIHQ7cmV0dXJuIG51bGwhPT0odD10aGlzLmNhbGxWYWx1ZUZvcm1hdHRlcihlKSkmJnZvaWQgMCE9PXQ/dDplfWNhbGxWYWx1ZUZvcm1hdHRlcihlKXtyZXR1cm4gdGhpcy5iZWFucy52YWx1ZUZvcm1hdHRlclNlcnZpY2UuZm9ybWF0VmFsdWUodGhpcy5jb2x1bW4sdGhpcy5yb3dOb2RlLGUpfXVwZGF0ZUFuZEZvcm1hdFZhbHVlKGUpe2NvbnN0IHQ9dGhpcy52YWx1ZSxpPXRoaXMudmFsdWVGb3JtYXR0ZWQ7cmV0dXJuIHRoaXMudmFsdWU9dGhpcy5yb3dOb2RlLmdldFZhbHVlRnJvbVZhbHVlU2VydmljZSh0aGlzLmNvbHVtbiksdGhpcy52YWx1ZUZvcm1hdHRlZD10aGlzLmNhbGxWYWx1ZUZvcm1hdHRlcih0aGlzLnZhbHVlKSwhZXx8KCF0aGlzLnZhbHVlc0FyZUVxdWFsKHQsdGhpcy52YWx1ZSl8fHRoaXMudmFsdWVGb3JtYXR0ZWQhPWkpfXZhbHVlc0FyZUVxdWFsKGUsdCl7Y29uc3QgaT10aGlzLmNvbHVtbi5nZXRDb2xEZWYoKTtyZXR1cm4gaS5lcXVhbHM/aS5lcXVhbHMoZSx0KTplPT09dH1nZXRDb21wKCl7cmV0dXJuIHRoaXMuY2VsbENvbXB9Z2V0VmFsdWUoKXtyZXR1cm4gdGhpcy52YWx1ZX1nZXRWYWx1ZUZvcm1hdHRlZCgpe3JldHVybiB0aGlzLnZhbHVlRm9ybWF0dGVkfWFkZERvbURhdGEoKXtjb25zdCBlPXRoaXMuZ2V0R3VpKCk7dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2Uuc2V0RG9tRGF0YShlLHhhLkRPTV9EQVRBX0tFWV9DRUxMX0NUUkwsdGhpcyksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2Uuc2V0RG9tRGF0YShlLHhhLkRPTV9EQVRBX0tFWV9DRUxMX0NUUkwsbnVsbCkpfWNyZWF0ZUV2ZW50KGUsdCl7cmV0dXJuIHRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3R5cGU6dCxub2RlOnRoaXMucm93Tm9kZSxkYXRhOnRoaXMucm93Tm9kZS5kYXRhLHZhbHVlOnRoaXMudmFsdWUsY29sdW1uOnRoaXMuY29sdW1uLGNvbERlZjp0aGlzLmNvbHVtbi5nZXRDb2xEZWYoKSxyb3dQaW5uZWQ6dGhpcy5yb3dOb2RlLnJvd1Bpbm5lZCxldmVudDplLHJvd0luZGV4OnRoaXMucm93Tm9kZS5yb3dJbmRleH0pfXByb2Nlc3NDaGFyYWN0ZXIoZSl7dmFyIHQ7bnVsbD09PSh0PXRoaXMuY2VsbEtleWJvYXJkTGlzdGVuZXJGZWF0dXJlKXx8dm9pZCAwPT09dHx8dC5wcm9jZXNzQ2hhcmFjdGVyKGUpfW9uS2V5RG93bihlKXt2YXIgdDtudWxsPT09KHQ9dGhpcy5jZWxsS2V5Ym9hcmRMaXN0ZW5lckZlYXR1cmUpfHx2b2lkIDA9PT10fHx0Lm9uS2V5RG93bihlKX1vbk1vdXNlRXZlbnQoZSx0KXt2YXIgaTtudWxsPT09KGk9dGhpcy5jZWxsTW91c2VMaXN0ZW5lckZlYXR1cmUpfHx2b2lkIDA9PT1pfHxpLm9uTW91c2VFdmVudChlLHQpfWdldEd1aSgpe3JldHVybiB0aGlzLmVHdWl9cmVmcmVzaFRvb2xUaXAoKXt2YXIgZTtudWxsPT09KGU9dGhpcy50b29sdGlwRmVhdHVyZSl8fHZvaWQgMD09PWV8fGUucmVmcmVzaFRvb2xUaXAoKX1nZXRDb2xTcGFubmluZ0xpc3QoKXtyZXR1cm4gdGhpcy5jZWxsUG9zaXRpb25GZWF0dXJlLmdldENvbFNwYW5uaW5nTGlzdCgpfW9uTGVmdENoYW5nZWQoKXt2YXIgZTt0aGlzLmNlbGxDb21wJiYobnVsbD09PShlPXRoaXMuY2VsbFBvc2l0aW9uRmVhdHVyZSl8fHZvaWQgMD09PWV8fGUub25MZWZ0Q2hhbmdlZCgpKX1vbkRpc3BsYXllZENvbHVtbnNDaGFuZ2VkKCl7dGhpcy5lR3VpJiYodGhpcy5yZWZyZXNoQXJpYUNvbEluZGV4KCksdGhpcy5yZWZyZXNoRmlyc3RBbmRMYXN0U3R5bGVzKCkpfXJlZnJlc2hGaXJzdEFuZExhc3RTdHlsZXMoKXtjb25zdHtjZWxsQ29tcDplLGNvbHVtbjp0LGJlYW5zOml9PXRoaXM7RWEucmVmcmVzaEZpcnN0QW5kTGFzdFN0eWxlcyhlLHQsaS5jb2x1bW5Nb2RlbCl9cmVmcmVzaEFyaWFDb2xJbmRleCgpe2NvbnN0IGU9dGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5nZXRBcmlhQ29sdW1uSW5kZXgodGhpcy5jb2x1bW4pO0NpKHRoaXMuZ2V0R3VpKCksZSl9aXNTdXBwcmVzc05hdmlnYWJsZSgpe3JldHVybiB0aGlzLmNvbHVtbi5pc1N1cHByZXNzTmF2aWdhYmxlKHRoaXMucm93Tm9kZSl9b25XaWR0aENoYW5nZWQoKXt2YXIgZTtyZXR1cm4gbnVsbD09PShlPXRoaXMuY2VsbFBvc2l0aW9uRmVhdHVyZSl8fHZvaWQgMD09PWU/dm9pZCAwOmUub25XaWR0aENoYW5nZWQoKX1nZXRDb2x1bW4oKXtyZXR1cm4gdGhpcy5jb2x1bW59Z2V0Um93Tm9kZSgpe3JldHVybiB0aGlzLnJvd05vZGV9Z2V0QmVhbnMoKXtyZXR1cm4gdGhpcy5iZWFuc31pc1ByaW50TGF5b3V0KCl7cmV0dXJuIHRoaXMucHJpbnRMYXlvdXR9YXBwZW5kQ2hpbGQoZSl7dGhpcy5lR3VpLmFwcGVuZENoaWxkKGUpfXJlZnJlc2hIYW5kbGUoKXt0aGlzLmNlbGxSYW5nZUZlYXR1cmUmJnRoaXMuY2VsbFJhbmdlRmVhdHVyZS5yZWZyZXNoSGFuZGxlKCl9Z2V0Q2VsbFBvc2l0aW9uKCl7cmV0dXJuIHRoaXMuY2VsbFBvc2l0aW9ufWlzRWRpdGluZygpe3JldHVybiB0aGlzLmVkaXRpbmd9c3RhcnRSb3dPckNlbGxFZGl0KGUsdD1udWxsKXt0aGlzLmNlbGxDb21wPyJmdWxsUm93Ij09PXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZWRpdFR5cGUiKT90aGlzLnJvd0N0cmwuc3RhcnRSb3dFZGl0aW5nKGUsdGhpcyk6dGhpcy5zdGFydEVkaXRpbmcoZSwhMCx0KTp0aGlzLm9uQ2VsbENvbXBBdHRhY2hlZEZ1bmNzLnB1c2goKCk9Pnt0aGlzLnN0YXJ0Um93T3JDZWxsRWRpdChlLHQpfSl9Z2V0Um93Q3RybCgpe3JldHVybiB0aGlzLnJvd0N0cmx9Z2V0Um93UG9zaXRpb24oKXtyZXR1cm57cm93SW5kZXg6dGhpcy5jZWxsUG9zaXRpb24ucm93SW5kZXgscm93UGlubmVkOnRoaXMuY2VsbFBvc2l0aW9uLnJvd1Bpbm5lZH19dXBkYXRlUmFuZ2VCb3JkZXJzSWZSYW5nZUNvdW50KCl7dGhpcy5jZWxsQ29tcCYmdGhpcy5jZWxsUmFuZ2VGZWF0dXJlJiZ0aGlzLmNlbGxSYW5nZUZlYXR1cmUudXBkYXRlUmFuZ2VCb3JkZXJzSWZSYW5nZUNvdW50KCl9b25SYW5nZVNlbGVjdGlvbkNoYW5nZWQoKXt0aGlzLmNlbGxDb21wJiZ0aGlzLmNlbGxSYW5nZUZlYXR1cmUmJnRoaXMuY2VsbFJhbmdlRmVhdHVyZS5vblJhbmdlU2VsZWN0aW9uQ2hhbmdlZCgpfWlzUmFuZ2VTZWxlY3Rpb25FbmFibGVkKCl7cmV0dXJuIG51bGwhPXRoaXMuY2VsbFJhbmdlRmVhdHVyZX1mb2N1c0NlbGwoZT0hMSl7dGhpcy5iZWFucy5mb2N1c1NlcnZpY2Uuc2V0Rm9jdXNlZENlbGwoe3Jvd0luZGV4OnRoaXMuZ2V0Q2VsbFBvc2l0aW9uKCkucm93SW5kZXgsY29sdW1uOnRoaXMuY29sdW1uLHJvd1Bpbm5lZDp0aGlzLnJvd05vZGUucm93UGlubmVkLGZvcmNlQnJvd3NlckZvY3VzOmV9KX1vblJvd0luZGV4Q2hhbmdlZCgpe3RoaXMuY3JlYXRlQ2VsbFBvc2l0aW9uKCksdGhpcy5vbkNlbGxGb2N1c2VkKCksdGhpcy5jZWxsUmFuZ2VGZWF0dXJlJiZ0aGlzLmNlbGxSYW5nZUZlYXR1cmUub25SYW5nZVNlbGVjdGlvbkNoYW5nZWQoKX1vbkZpcnN0UmlnaHRQaW5uZWRDaGFuZ2VkKCl7aWYoIXRoaXMuY2VsbENvbXApcmV0dXJuO2NvbnN0IGU9dGhpcy5jb2x1bW4uaXNGaXJzdFJpZ2h0UGlubmVkKCk7dGhpcy5jZWxsQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jZWxsLWZpcnN0LXJpZ2h0LXBpbm5lZCIsZSl9b25MYXN0TGVmdFBpbm5lZENoYW5nZWQoKXtpZighdGhpcy5jZWxsQ29tcClyZXR1cm47Y29uc3QgZT10aGlzLmNvbHVtbi5pc0xhc3RMZWZ0UGlubmVkKCk7dGhpcy5jZWxsQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jZWxsLWxhc3QtbGVmdC1waW5uZWQiLGUpfW9uQ2VsbEZvY3VzZWQoZSl7aWYodGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0NlbGxGb2N1cyIpKXJldHVybjtjb25zdCB0PXRoaXMuYmVhbnMuZm9jdXNTZXJ2aWNlLmlzQ2VsbEZvY3VzZWQodGhpcy5jZWxsUG9zaXRpb24pO2lmKCF0aGlzLmNlbGxDb21wKXJldHVybiB2b2lkKHQmJihudWxsPT1lP3ZvaWQgMDplLmZvcmNlQnJvd3NlckZvY3VzKSYmKHRoaXMuZm9jdXNFdmVudFRvUmVzdG9yZT1lKSk7aWYodGhpcy5mb2N1c0V2ZW50VG9SZXN0b3JlPXZvaWQgMCx0aGlzLmNlbGxDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNlbGwtZm9jdXMiLHQpLHQmJmUmJmUuZm9yY2VCcm93c2VyRm9jdXMpe3RoaXMuY2VsbENvbXAuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiEhZS5wcmV2ZW50U2Nyb2xsT25Ccm93c2VyRm9jdXN9KX1jb25zdCBpPSJmdWxsUm93Ij09PXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZWRpdFR5cGUiKTt0fHxpfHwhdGhpcy5lZGl0aW5nfHx0aGlzLnN0b3BSb3dPckNlbGxFZGl0KCksdCYmdGhpcy5yb3dDdHJsLmFubm91bmNlRGVzY3JpcHRpb24oKX1jcmVhdGVDZWxsUG9zaXRpb24oKXt0aGlzLmNlbGxQb3NpdGlvbj17cm93SW5kZXg6dGhpcy5yb3dOb2RlLnJvd0luZGV4LHJvd1Bpbm5lZDp3KHRoaXMucm93Tm9kZS5yb3dQaW5uZWQpLGNvbHVtbjp0aGlzLmNvbHVtbn19YXBwbHlTdGF0aWNDc3NDbGFzc2VzKCl7dGhpcy5jZWxsQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jZWxsIiwhMCksdGhpcy5jZWxsQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jZWxsLW5vdC1pbmxpbmUtZWRpdGluZyIsITApO2NvbnN0IGU9MT09dGhpcy5jb2x1bW4uaXNBdXRvSGVpZ2h0KCk7dGhpcy5jZWxsQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jZWxsLWF1dG8taGVpZ2h0IixlKSx0aGlzLmNlbGxDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNlbGwtbm9ybWFsLWhlaWdodCIsIWUpfW9uQ29sdW1uSG92ZXIoKXtpZighdGhpcy5jZWxsQ29tcClyZXR1cm47aWYoIXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiY29sdW1uSG92ZXJIaWdobGlnaHQiKSlyZXR1cm47Y29uc3QgZT10aGlzLmJlYW5zLmNvbHVtbkhvdmVyU2VydmljZS5pc0hvdmVyZWQodGhpcy5jb2x1bW4pO3RoaXMuY2VsbENvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY29sdW1uLWhvdmVyIixlKX1vbkNvbERlZkNoYW5nZWQoKXt2YXIgZSx0O2lmKCF0aGlzLmNlbGxDb21wKXJldHVybjt0aGlzLmNvbHVtbi5pc0F1dG9IZWlnaHQoKSE9PXRoaXMuaXNBdXRvSGVpZ2h0JiYobnVsbD09PShlPXRoaXMucm93Q3RybCl8fHZvaWQgMD09PWV8fGUucmVmcmVzaENlbGwodGhpcykpO2lmKHRoaXMuY29sdW1uLmlzVG9vbHRpcEVuYWJsZWQoKT8odGhpcy5kaXNhYmxlVG9vbHRpcEZlYXR1cmUoKSx0aGlzLmVuYWJsZVRvb2x0aXBGZWF0dXJlKCksbnVsbD09PSh0PXRoaXMudG9vbHRpcEZlYXR1cmUpfHx2b2lkIDA9PT10fHx0LnNldENvbXAodGhpcy5lR3VpKSk6dGhpcy5kaXNhYmxlVG9vbHRpcEZlYXR1cmUoKSx0aGlzLnNldFdyYXBUZXh0KCksdGhpcy5lZGl0aW5nKXtjb25zdCBlPXRoaXMuZ2V0Q2VsbEVkaXRvcigpO2lmKG51bGw9PWU/dm9pZCAwOmUucmVmcmVzaCl7Y29uc3R7ZXZlbnRLZXk6dCxjZWxsU3RhcnRlZEVkaXQ6aX09dGhpcy5lZGl0Q29tcERldGFpbHMucGFyYW1zLHM9dGhpcy5jcmVhdGVDZWxsRWRpdG9yUGFyYW1zKHQsaSkscj10aGlzLmNvbHVtbi5nZXRDb2xEZWYoKSxvPXRoaXMuYmVhbnMudXNlckNvbXBvbmVudEZhY3RvcnkuZ2V0Q2VsbEVkaXRvckRldGFpbHMocixzKTtlLnJlZnJlc2goby5wYXJhbXMpfX1lbHNlIHRoaXMucmVmcmVzaE9yRGVzdHJveUNlbGwoe2ZvcmNlUmVmcmVzaDohMCxzdXBwcmVzc0ZsYXNoOiEwfSl9c2V0V3JhcFRleHQoKXtjb25zdCBlPTE9PXRoaXMuY29sdW1uLmdldENvbERlZigpLndyYXBUZXh0O3RoaXMuY2VsbENvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY2VsbC13cmFwLXRleHQiLGUpfWRpc3BhdGNoQ2VsbENvbnRleHRNZW51RXZlbnQoZSl7Y29uc3QgdD10aGlzLmNvbHVtbi5nZXRDb2xEZWYoKSxpPXRoaXMuY3JlYXRlRXZlbnQoZSxsdC5FVkVOVF9DRUxMX0NPTlRFWFRfTUVOVSk7dGhpcy5iZWFucy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChpKSx0Lm9uQ2VsbENvbnRleHRNZW51JiZ3aW5kb3cuc2V0VGltZW91dCgoKT0+e3RoaXMuYmVhbnMuZnJhbWV3b3JrT3ZlcnJpZGVzLndyYXBPdXRnb2luZygoKT0+e3Qub25DZWxsQ29udGV4dE1lbnUoaSl9KX0sMCl9Z2V0Q2VsbFJlbmRlcmVyKCl7cmV0dXJuIHRoaXMuY2VsbENvbXA/dGhpcy5jZWxsQ29tcC5nZXRDZWxsUmVuZGVyZXIoKTpudWxsfWdldENlbGxFZGl0b3IoKXtyZXR1cm4gdGhpcy5jZWxsQ29tcD90aGlzLmNlbGxDb21wLmdldENlbGxFZGl0b3IoKTpudWxsfWRlc3Ryb3koKXt0aGlzLm9uQ2VsbENvbXBBdHRhY2hlZEZ1bmNzPVtdLHN1cGVyLmRlc3Ryb3koKX1jcmVhdGVTZWxlY3Rpb25DaGVja2JveCgpe2NvbnN0IGU9bmV3IExvO3JldHVybiB0aGlzLmJlYW5zLmNvbnRleHQuY3JlYXRlQmVhbihlKSxlLmluaXQoe3Jvd05vZGU6dGhpcy5yb3dOb2RlLGNvbHVtbjp0aGlzLmNvbHVtbn0pLGV9Y3JlYXRlRG5kU291cmNlKCl7Y29uc3QgZT1uZXcgYmEodGhpcy5yb3dOb2RlLHRoaXMuY29sdW1uLHRoaXMuZUd1aSk7cmV0dXJuIHRoaXMuYmVhbnMuY29udGV4dC5jcmVhdGVCZWFuKGUpLGV9cmVnaXN0ZXJSb3dEcmFnZ2VyKGUsdCxpKXtpZih0aGlzLmN1c3RvbVJvd0RyYWdDb21wKXJldHVybiB2b2lkIHRoaXMuY3VzdG9tUm93RHJhZ0NvbXAuc2V0RHJhZ0VsZW1lbnQoZSx0KTtjb25zdCBzPXRoaXMuY3JlYXRlUm93RHJhZ0NvbXAoZSx0LGkpO3MmJih0aGlzLmN1c3RvbVJvd0RyYWdDb21wPXMsdGhpcy5hZGREZXN0cm95RnVuYygoKT0+e3RoaXMuYmVhbnMuY29udGV4dC5kZXN0cm95QmVhbihzKSx0aGlzLmN1c3RvbVJvd0RyYWdDb21wPW51bGx9KSl9Y3JlYXRlUm93RHJhZ0NvbXAoZSx0LGkpe2NvbnN0IHM9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJwYWdpbmF0aW9uIikscj10aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0RyYWdNYW5hZ2VkIiksbz10aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd01vZGVsVHlwZSgiY2xpZW50U2lkZSIpO2lmKHIpe2lmKCFvKXJldHVybiB2b2lkIGooIm1hbmFnZWQgcm93IGRyYWdnaW5nIGlzIG9ubHkgYWxsb3dlZCBpbiB0aGUgQ2xpZW50IFNpZGUgUm93IE1vZGVsIik7aWYocylyZXR1cm4gdm9pZCBqKCJtYW5hZ2VkIHJvdyBkcmFnZ2luZyBpcyBub3QgcG9zc2libGUgd2hlbiBkb2luZyBwYWdpbmF0aW9uIil9Y29uc3Qgbj1uZXcgX28oKCk9PnRoaXMudmFsdWUsdGhpcy5yb3dOb2RlLHRoaXMuY29sdW1uLGUsdCxpKTtyZXR1cm4gdGhpcy5iZWFucy5jb250ZXh0LmNyZWF0ZUJlYW4obiksbn19dmFyIFRhO3hhLkRPTV9EQVRBX0tFWV9DRUxMX0NUUkw9ImNlbGxDdHJsIixmdW5jdGlvbihlKXtlLk5vcm1hbD0iTm9ybWFsIixlLkZ1bGxXaWR0aD0iRnVsbFdpZHRoIixlLkZ1bGxXaWR0aExvYWRpbmc9IkZ1bGxXaWR0aExvYWRpbmciLGUuRnVsbFdpZHRoR3JvdXA9IkZ1bGxXaWR0aEdyb3VwIixlLkZ1bGxXaWR0aERldGFpbD0iRnVsbFdpZHRoRGV0YWlsIn0oVGF8fChUYT17fSkpO2xldCBEYT0wO2NsYXNzIE9hIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoZSx0LGkscyxyKXtzdXBlcigpLHRoaXMuYWxsUm93R3Vpcz1bXSx0aGlzLmFjdGl2ZT0hMCx0aGlzLmNlbnRlckNlbGxDdHJscz17bGlzdDpbXSxtYXA6e319LHRoaXMubGVmdENlbGxDdHJscz17bGlzdDpbXSxtYXA6e319LHRoaXMucmlnaHRDZWxsQ3RybHM9e2xpc3Q6W10sbWFwOnt9fSx0aGlzLnNsaWRlSW5BbmltYXRpb249e2xlZnQ6ITEsY2VudGVyOiExLHJpZ2h0OiExLGZ1bGxXaWR0aDohMX0sdGhpcy5mYWRlSW5BbmltYXRpb249e2xlZnQ6ITEsY2VudGVyOiExLHJpZ2h0OiExLGZ1bGxXaWR0aDohMX0sdGhpcy5yb3dEcmFnQ29tcHM9W10sdGhpcy5sYXN0TW91c2VEb3duT25EcmFnZ2VyPSExLHRoaXMuZW1wdHlTdHlsZT17fSx0aGlzLnVwZGF0ZUNvbHVtbkxpc3RzUGVuZGluZz0hMSx0aGlzLnJvd0lkPW51bGwsdGhpcy5idXNpbmVzc0tleVNhbml0aXNlZD1udWxsLHRoaXMuYmVhbnM9dCx0aGlzLmdyaWRPcHRpb25zU2VydmljZT10LmdyaWRPcHRpb25zU2VydmljZSx0aGlzLnJvd05vZGU9ZSx0aGlzLnBhZ2luYXRpb25QYWdlPXQucGFnaW5hdGlvblByb3h5LmdldEN1cnJlbnRQYWdlKCksdGhpcy51c2VBbmltYXRpb25GcmFtZUZvckNyZWF0ZT1zLHRoaXMucHJpbnRMYXlvdXQ9cix0aGlzLnN1cHByZXNzUm93VHJhbnNmb3JtPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NSb3dUcmFuc2Zvcm0iKSx0aGlzLmluc3RhbmNlSWQ9ZS5pZCsiLSIrRGErKyx0aGlzLnJvd0lkPWZ0KGUuaWQpLHRoaXMuaW5pdFJvd0J1c2luZXNzS2V5KCksdGhpcy5yb3dGb2N1c2VkPXQuZm9jdXNTZXJ2aWNlLmlzUm93Rm9jdXNlZCh0aGlzLnJvd05vZGUucm93SW5kZXgsdGhpcy5yb3dOb2RlLnJvd1Bpbm5lZCksdGhpcy5yb3dMZXZlbD10LnJvd0Nzc0NsYXNzQ2FsY3VsYXRvci5jYWxjdWxhdGVSb3dMZXZlbCh0aGlzLnJvd05vZGUpLHRoaXMuc2V0Um93VHlwZSgpLHRoaXMuc2V0QW5pbWF0ZUZsYWdzKGkpLHRoaXMucm93U3R5bGVzPXRoaXMucHJvY2Vzc1N0eWxlc0Zyb21HcmlkT3B0aW9ucygpLHRoaXMuaXNGdWxsV2lkdGgoKSYmIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NDZWxsRm9jdXMiKSYmKHRoaXMudGFiSW5kZXg9LTEpLHRoaXMuYWRkTGlzdGVuZXJzKCl9aW5pdFJvd0J1c2luZXNzS2V5KCl7dGhpcy5idXNpbmVzc0tleUZvck5vZGVGdW5jPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ2V0QnVzaW5lc3NLZXlGb3JOb2RlIiksdGhpcy51cGRhdGVSb3dCdXNpbmVzc0tleSgpfXVwZGF0ZVJvd0J1c2luZXNzS2V5KCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHRoaXMuYnVzaW5lc3NLZXlGb3JOb2RlRnVuYylyZXR1cm47Y29uc3QgZT10aGlzLmJ1c2luZXNzS2V5Rm9yTm9kZUZ1bmModGhpcy5yb3dOb2RlKTt0aGlzLmJ1c2luZXNzS2V5U2FuaXRpc2VkPWZ0KGUpfWdldFJvd0lkKCl7cmV0dXJuIHRoaXMucm93SWR9Z2V0Um93U3R5bGVzKCl7cmV0dXJuIHRoaXMucm93U3R5bGVzfWdldFRhYkluZGV4KCl7cmV0dXJuIHRoaXMudGFiSW5kZXh9aXNTdGlja3koKXtyZXR1cm4gdGhpcy5yb3dOb2RlLnN0aWNreX1nZXRCZWFucygpe3JldHVybiB0aGlzLmJlYW5zfWdldEluc3RhbmNlSWQoKXtyZXR1cm4gdGhpcy5pbnN0YW5jZUlkfXNldENvbXAoZSx0LGkpe2NvbnN0IHM9e3Jvd0NvbXA6ZSxlbGVtZW50OnQsY29udGFpbmVyVHlwZTppfTt0aGlzLmFsbFJvd0d1aXMucHVzaChzKSxpPT09VWEuTEVGVD90aGlzLmxlZnRHdWk9czppPT09VWEuUklHSFQ/dGhpcy5yaWdodEd1aT1zOmk9PT1VYS5GVUxMX1dJRFRIP3RoaXMuZnVsbFdpZHRoR3VpPXM6dGhpcy5jZW50ZXJHdWk9cyx0aGlzLmluaXRpYWxpc2VSb3dDb21wKHMpLCJGdWxsV2lkdGhMb2FkaW5nIj09PXRoaXMucm93VHlwZXx8dGhpcy5yb3dOb2RlLnJvd1Bpbm5lZHx8dGhpcy5iZWFucy5yb3dSZW5kZXJlci5kaXNwYXRjaEZpcnN0RGF0YVJlbmRlcmVkRXZlbnQoKX11bnNldENvbXAoZSl7c3dpdGNoKHRoaXMuYWxsUm93R3Vpcz10aGlzLmFsbFJvd0d1aXMuZmlsdGVyKHQ9PnQuY29udGFpbmVyVHlwZSE9PWUpLGUpe2Nhc2UgVWEuTEVGVDp0aGlzLmxlZnRHdWk9dm9pZCAwO2JyZWFrO2Nhc2UgVWEuUklHSFQ6dGhpcy5yaWdodEd1aT12b2lkIDA7YnJlYWs7Y2FzZSBVYS5GVUxMX1dJRFRIOnRoaXMuZnVsbFdpZHRoR3VpPXZvaWQgMDticmVhaztjYXNlIFVhLkNFTlRFUjp0aGlzLmNlbnRlckd1aT12b2lkIDB9fWlzQ2FjaGVhYmxlKCl7cmV0dXJuIHRoaXMucm93VHlwZT09PVRhLkZ1bGxXaWR0aERldGFpbCYmdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJrZWVwRGV0YWlsUm93cyIpfXNldENhY2hlZChlKXtjb25zdCB0PWU/Im5vbmUiOiIiO3RoaXMuYWxsUm93R3Vpcy5mb3JFYWNoKGU9PmUuZWxlbWVudC5zdHlsZS5kaXNwbGF5PXQpfWluaXRpYWxpc2VSb3dDb21wKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2U7dGhpcy5saXN0ZW5PbkRvbU9yZGVyKGUpLHRoaXMuYmVhbnMuY29sdW1uTW9kZWwud2FzQXV0b1Jvd0hlaWdodEV2ZXJBY3RpdmUoKSYmdGhpcy5yb3dOb2RlLmNoZWNrQXV0b0hlaWdodHMoKSx0aGlzLm9uUm93SGVpZ2h0Q2hhbmdlZChlKSx0aGlzLnVwZGF0ZVJvd0luZGV4ZXMoZSksdGhpcy5zZXRGb2N1c2VkQ2xhc3NlcyhlKSx0aGlzLnNldFN0eWxlc0Zyb21HcmlkT3B0aW9ucyghMSxlKSx0LmlzUm93U2VsZWN0aW9uKCkmJnRoaXMucm93Tm9kZS5zZWxlY3RhYmxlJiZ0aGlzLm9uUm93U2VsZWN0ZWQoZSksdGhpcy51cGRhdGVDb2x1bW5MaXN0cyghdGhpcy51c2VBbmltYXRpb25GcmFtZUZvckNyZWF0ZSk7Y29uc3QgaT1lLnJvd0NvbXA7dGhpcy5nZXRJbml0aWFsUm93Q2xhc3NlcyhlLmNvbnRhaW5lclR5cGUpLmZvckVhY2goZT0+aS5hZGRPclJlbW92ZUNzc0NsYXNzKGUsITApKSx0aGlzLmV4ZWN1dGVTbGlkZUFuZEZhZGVBbmltYXRpb25zKGUpLHRoaXMucm93Tm9kZS5ncm91cCYmY2koZS5lbGVtZW50LDE9PXRoaXMucm93Tm9kZS5leHBhbmRlZCksdGhpcy5zZXRSb3dDb21wUm93SWQoaSksdGhpcy5zZXRSb3dDb21wUm93QnVzaW5lc3NLZXkoaSksdC5zZXREb21EYXRhKGUuZWxlbWVudCxPYS5ET01fREFUQV9LRVlfUk9XX0NUUkwsdGhpcyksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+dC5zZXREb21EYXRhKGUuZWxlbWVudCxPYS5ET01fREFUQV9LRVlfUk9XX0NUUkwsbnVsbCkpLHRoaXMudXNlQW5pbWF0aW9uRnJhbWVGb3JDcmVhdGU/dGhpcy5iZWFucy5hbmltYXRpb25GcmFtZVNlcnZpY2UuY3JlYXRlVGFzayh0aGlzLmFkZEhvdmVyRnVuY3Rpb25hbGl0eS5iaW5kKHRoaXMsZS5lbGVtZW50KSx0aGlzLnJvd05vZGUucm93SW5kZXgsImNyZWF0ZVRhc2tzUDIiKTp0aGlzLmFkZEhvdmVyRnVuY3Rpb25hbGl0eShlLmVsZW1lbnQpLHRoaXMuaXNGdWxsV2lkdGgoKSYmdGhpcy5zZXR1cEZ1bGxXaWR0aChlKSx0LmdldCgicm93RHJhZ0VudGlyZVJvdyIpJiZ0aGlzLmFkZFJvd0RyYWdnZXJUb1JvdyhlKSx0aGlzLnVzZUFuaW1hdGlvbkZyYW1lRm9yQ3JlYXRlJiZ0aGlzLmJlYW5zLmFuaW1hdGlvbkZyYW1lU2VydmljZS5hZGREZXN0cm95VGFzaygoKT0+e3RoaXMuaXNBbGl2ZSgpJiZlLnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctYWZ0ZXItY3JlYXRlZCIsITApfSksdGhpcy5leGVjdXRlUHJvY2Vzc1Jvd1Bvc3RDcmVhdGVGdW5jKCl9c2V0Um93Q29tcFJvd0J1c2luZXNzS2V5KGUpe251bGwhPXRoaXMuYnVzaW5lc3NLZXlTYW5pdGlzZWQmJmUuc2V0Um93QnVzaW5lc3NLZXkodGhpcy5idXNpbmVzc0tleVNhbml0aXNlZCl9Z2V0QnVzaW5lc3NLZXkoKXtyZXR1cm4gdGhpcy5idXNpbmVzc0tleVNhbml0aXNlZH1zZXRSb3dDb21wUm93SWQoZSl7dGhpcy5yb3dJZD1mdCh0aGlzLnJvd05vZGUuaWQpLG51bGwhPXRoaXMucm93SWQmJmUuc2V0Um93SWQodGhpcy5yb3dJZCl9ZXhlY3V0ZVNsaWRlQW5kRmFkZUFuaW1hdGlvbnMoZSl7Y29uc3R7Y29udGFpbmVyVHlwZTp0fT1lO3RoaXMuc2xpZGVJbkFuaW1hdGlvblt0XSYmKHEoKCk9Pnt0aGlzLm9uVG9wQ2hhbmdlZCgpfSksdGhpcy5zbGlkZUluQW5pbWF0aW9uW3RdPSExKTt0aGlzLmZhZGVJbkFuaW1hdGlvblt0XSYmKHEoKCk9PntlLnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctb3BhY2l0eS16ZXJvIiwhMSl9KSx0aGlzLmZhZGVJbkFuaW1hdGlvblt0XT0hMSl9YWRkUm93RHJhZ2dlclRvUm93KGUpe2lmKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUmFuZ2VTZWxlY3Rpb24iKSlyZXR1cm4gdm9pZCBqKCJTZXR0aW5nIGByb3dEcmFnRW50aXJlUm93OiB0cnVlYCBpbiB0aGUgZ3JpZE9wdGlvbnMgZG9lc24ndCB3b3JrIHdpdGggYGVuYWJsZVJhbmdlU2VsZWN0aW9uOiB0cnVlYCIpO2NvbnN0IHQ9dGhpcy5iZWFucy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCksaT1uZXcgX28oKCk9PiIxICIrdCgicm93RHJhZ1JvdyIsInJvdyIpLHRoaXMucm93Tm9kZSx2b2lkIDAsZS5lbGVtZW50LHZvaWQgMCwhMCkscz10aGlzLmNyZWF0ZUJlYW4oaSx0aGlzLmJlYW5zLmNvbnRleHQpO3RoaXMucm93RHJhZ0NvbXBzLnB1c2gocyl9c2V0dXBGdWxsV2lkdGgoZSl7Y29uc3QgdD10aGlzLmdldFBpbm5lZEZvckNvbnRhaW5lcihlLmNvbnRhaW5lclR5cGUpLGk9dGhpcy5jcmVhdGVGdWxsV2lkdGhQYXJhbXMoZS5lbGVtZW50LHQpO2lmKHRoaXMucm93VHlwZT09VGEuRnVsbFdpZHRoRGV0YWlsJiYhcmUuX19hc3NlcnRSZWdpc3RlcmVkKHNlLk1hc3RlckRldGFpbE1vZHVsZSwiY2VsbCByZW5kZXJlciAnYWdEZXRhaWxDZWxsUmVuZGVyZXInIChmb3IgbWFzdGVyIGRldGFpbCkiLHRoaXMuYmVhbnMuY29udGV4dC5nZXRHcmlkSWQoKSkpcmV0dXJuO2xldCBzO3N3aXRjaCh0aGlzLnJvd1R5cGUpe2Nhc2UgVGEuRnVsbFdpZHRoRGV0YWlsOnM9dGhpcy5iZWFucy51c2VyQ29tcG9uZW50RmFjdG9yeS5nZXRGdWxsV2lkdGhEZXRhaWxDZWxsUmVuZGVyZXJEZXRhaWxzKGkpO2JyZWFrO2Nhc2UgVGEuRnVsbFdpZHRoR3JvdXA6cz10aGlzLmJlYW5zLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldEZ1bGxXaWR0aEdyb3VwQ2VsbFJlbmRlcmVyRGV0YWlscyhpKTticmVhaztjYXNlIFRhLkZ1bGxXaWR0aExvYWRpbmc6cz10aGlzLmJlYW5zLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldEZ1bGxXaWR0aExvYWRpbmdDZWxsUmVuZGVyZXJEZXRhaWxzKGkpO2JyZWFrO2RlZmF1bHQ6cz10aGlzLmJlYW5zLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldEZ1bGxXaWR0aENlbGxSZW5kZXJlckRldGFpbHMoaSl9ZS5yb3dDb21wLnNob3dGdWxsV2lkdGgocyl9aXNQcmludExheW91dCgpe3JldHVybiB0aGlzLnByaW50TGF5b3V0fWdldEZ1bGxXaWR0aENlbGxSZW5kZXJlcnMoKXt2YXIgZSx0O3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVtYmVkRnVsbFdpZHRoUm93cyIpP3RoaXMuYWxsUm93R3Vpcy5tYXAoZT0+e3ZhciB0O3JldHVybiBudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5yb3dDb21wKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRGdWxsV2lkdGhDZWxsUmVuZGVyZXIoKX0pOltudWxsPT09KHQ9bnVsbD09PShlPXRoaXMuZnVsbFdpZHRoR3VpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5yb3dDb21wKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRGdWxsV2lkdGhDZWxsUmVuZGVyZXIoKV19Z2V0Q2VsbEVsZW1lbnQoZSl7Y29uc3QgdD10aGlzLmdldENlbGxDdHJsKGUpO3JldHVybiB0P3QuZ2V0R3VpKCk6bnVsbH1leGVjdXRlUHJvY2Vzc1Jvd1Bvc3RDcmVhdGVGdW5jKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygicHJvY2Vzc1Jvd1Bvc3RDcmVhdGUiKTtpZighZXx8IXRoaXMuYXJlQWxsQ29udGFpbmVyc1JlYWR5KCkpcmV0dXJuO2Uoe2VSb3c6dGhpcy5jZW50ZXJHdWkuZWxlbWVudCxlUGlubmVkTGVmdFJvdzp0aGlzLmxlZnRHdWk/dGhpcy5sZWZ0R3VpLmVsZW1lbnQ6dm9pZCAwLGVQaW5uZWRSaWdodFJvdzp0aGlzLnJpZ2h0R3VpP3RoaXMucmlnaHRHdWkuZWxlbWVudDp2b2lkIDAsbm9kZTp0aGlzLnJvd05vZGUscm93SW5kZXg6dGhpcy5yb3dOb2RlLnJvd0luZGV4LGFkZFJlbmRlcmVkUm93TGlzdGVuZXI6dGhpcy5hZGRFdmVudExpc3RlbmVyLmJpbmQodGhpcyl9KX1hcmVBbGxDb250YWluZXJzUmVhZHkoKXtjb25zdCBlPSEhdGhpcy5sZWZ0R3VpfHwhdGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5pc1Bpbm5pbmdMZWZ0KCksdD0hIXRoaXMuY2VudGVyR3VpLGk9ISF0aGlzLnJpZ2h0R3VpfHwhdGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5pc1Bpbm5pbmdSaWdodCgpO3JldHVybiBlJiZ0JiZpfXNldFJvd1R5cGUoKXtjb25zdCBlPXRoaXMucm93Tm9kZS5zdHViLHQ9dGhpcy5yb3dOb2RlLmlzRnVsbFdpZHRoQ2VsbCgpLGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJtYXN0ZXJEZXRhaWwiKSYmdGhpcy5yb3dOb2RlLmRldGFpbCxzPXRoaXMuYmVhbnMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSxyPSEhdGhpcy5yb3dOb2RlLmdyb3VwJiYhdGhpcy5yb3dOb2RlLmZvb3RlciYmdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNHcm91cFVzZUVudGlyZVJvdyhzKTt0aGlzLnJvd1R5cGU9ZT9UYS5GdWxsV2lkdGhMb2FkaW5nOmk/VGEuRnVsbFdpZHRoRGV0YWlsOnQ/VGEuRnVsbFdpZHRoOnI/VGEuRnVsbFdpZHRoR3JvdXA6VGEuTm9ybWFsfXVwZGF0ZUNvbHVtbkxpc3RzKGU9ITEsdD0hMSl7aWYodGhpcy5pc0Z1bGxXaWR0aCgpKXJldHVybjtlfHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQW5pbWF0aW9uRnJhbWUiKXx8dGhpcy5wcmludExheW91dD90aGlzLnVwZGF0ZUNvbHVtbkxpc3RzSW1wbCh0KTp0aGlzLnVwZGF0ZUNvbHVtbkxpc3RzUGVuZGluZ3x8KHRoaXMuYmVhbnMuYW5pbWF0aW9uRnJhbWVTZXJ2aWNlLmNyZWF0ZVRhc2soKCk9Pnt0aGlzLmFjdGl2ZSYmdGhpcy51cGRhdGVDb2x1bW5MaXN0c0ltcGwoITApfSx0aGlzLnJvd05vZGUucm93SW5kZXgsImNyZWF0ZVRhc2tzUDEiKSx0aGlzLnVwZGF0ZUNvbHVtbkxpc3RzUGVuZGluZz0hMCl9Y3JlYXRlQ2VsbEN0cmxzKGUsdCxpPW51bGwpe2NvbnN0IHM9e2xpc3Q6W10sbWFwOnt9fSxyPShlLHQpPT57cy5saXN0LnB1c2godCkscy5tYXBbZV09dH07cmV0dXJuIHQuZm9yRWFjaCh0PT57Y29uc3QgaT10LmdldEluc3RhbmNlSWQoKTtsZXQgcz1lLm1hcFtpXTtzfHwocz1uZXcgeGEodCx0aGlzLnJvd05vZGUsdGhpcy5iZWFucyx0aGlzKSkscihpLHMpfSksZS5saXN0LmZvckVhY2goZT0+e2lmKG51bGwhPXMubWFwW2UuZ2V0Q29sdW1uKCkuZ2V0SW5zdGFuY2VJZCgpXSlyZXR1cm47dGhpcy5pc0NlbGxFbGlnaWJsZVRvQmVSZW1vdmVkKGUsaSk/ZS5kZXN0cm95KCk6cihlLmdldENvbHVtbigpLmdldEluc3RhbmNlSWQoKSxlKX0pLHN9dXBkYXRlQ29sdW1uTGlzdHNJbXBsKGUpe3RoaXMudXBkYXRlQ29sdW1uTGlzdHNQZW5kaW5nPSExLHRoaXMuY3JlYXRlQWxsQ2VsbEN0cmxzKCksdGhpcy5zZXRDZWxsQ3RybHMoZSl9c2V0Q2VsbEN0cmxzKGUpe3RoaXMuYWxsUm93R3Vpcy5mb3JFYWNoKHQ9Pntjb25zdCBpPXRoaXMuZ2V0Q2VsbEN0cmxzRm9yQ29udGFpbmVyKHQuY29udGFpbmVyVHlwZSk7dC5yb3dDb21wLnNldENlbGxDdHJscyhpLGUpfSl9Z2V0Q2VsbEN0cmxzRm9yQ29udGFpbmVyKGUpe3N3aXRjaChlKXtjYXNlIFVhLkxFRlQ6cmV0dXJuIHRoaXMubGVmdENlbGxDdHJscy5saXN0O2Nhc2UgVWEuUklHSFQ6cmV0dXJuIHRoaXMucmlnaHRDZWxsQ3RybHMubGlzdDtjYXNlIFVhLkZVTExfV0lEVEg6cmV0dXJuW107Y2FzZSBVYS5DRU5URVI6cmV0dXJuIHRoaXMuY2VudGVyQ2VsbEN0cmxzLmxpc3Q7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVuaGFuZGxlZCBjYXNlOiAiK2UpfX1jcmVhdGVBbGxDZWxsQ3RybHMoKXtjb25zdCBlPXRoaXMuYmVhbnMuY29sdW1uTW9kZWw7aWYodGhpcy5wcmludExheW91dCl0aGlzLmNlbnRlckNlbGxDdHJscz10aGlzLmNyZWF0ZUNlbGxDdHJscyh0aGlzLmNlbnRlckNlbGxDdHJscyxlLmdldEFsbERpc3BsYXllZENvbHVtbnMoKSksdGhpcy5sZWZ0Q2VsbEN0cmxzPXtsaXN0OltdLG1hcDp7fX0sdGhpcy5yaWdodENlbGxDdHJscz17bGlzdDpbXSxtYXA6e319O2Vsc2V7Y29uc3QgdD1lLmdldFZpZXdwb3J0Q2VudGVyQ29sdW1uc0ZvclJvdyh0aGlzLnJvd05vZGUpO3RoaXMuY2VudGVyQ2VsbEN0cmxzPXRoaXMuY3JlYXRlQ2VsbEN0cmxzKHRoaXMuY2VudGVyQ2VsbEN0cmxzLHQpO2NvbnN0IGk9ZS5nZXREaXNwbGF5ZWRMZWZ0Q29sdW1uc0ZvclJvdyh0aGlzLnJvd05vZGUpO3RoaXMubGVmdENlbGxDdHJscz10aGlzLmNyZWF0ZUNlbGxDdHJscyh0aGlzLmxlZnRDZWxsQ3RybHMsaSwibGVmdCIpO2NvbnN0IHM9ZS5nZXREaXNwbGF5ZWRSaWdodENvbHVtbnNGb3JSb3codGhpcy5yb3dOb2RlKTt0aGlzLnJpZ2h0Q2VsbEN0cmxzPXRoaXMuY3JlYXRlQ2VsbEN0cmxzKHRoaXMucmlnaHRDZWxsQ3RybHMscywicmlnaHQiKX19aXNDZWxsRWxpZ2libGVUb0JlUmVtb3ZlZChlLHQpe2lmKGUuZ2V0Q29sdW1uKCkuZ2V0UGlubmVkKCkhPXQpcmV0dXJuITA7Y29uc3QgaT1lLmlzRWRpdGluZygpLHM9dGhpcy5iZWFucy5mb2N1c1NlcnZpY2UuaXNDZWxsRm9jdXNlZChlLmdldENlbGxQb3NpdGlvbigpKTtpZihpfHxzKXtjb25zdCB0PWUuZ2V0Q29sdW1uKCk7cmV0dXJuISh0aGlzLmJlYW5zLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKS5pbmRleE9mKHQpPj0wKX1yZXR1cm4hMH1nZXREb21PcmRlcigpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuc3VyZURvbU9yZGVyIil8fHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzRG9tTGF5b3V0KCJwcmludCIpfWxpc3Rlbk9uRG9tT3JkZXIoZSl7Y29uc3QgdD0oKT0+e2Uucm93Q29tcC5zZXREb21PcmRlcih0aGlzLmdldERvbU9yZGVyKCkpfTt0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJkb21MYXlvdXQiLHQpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoImVuc3VyZURvbU9yZGVyIix0KX1zZXRBbmltYXRlRmxhZ3MoZSl7aWYodGhpcy5pc1N0aWNreSgpfHwhZSlyZXR1cm47Y29uc3QgdD1iKHRoaXMucm93Tm9kZS5vbGRSb3dUb3ApLGk9dGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5pc1Bpbm5pbmdMZWZ0KCkscz10aGlzLmJlYW5zLmNvbHVtbk1vZGVsLmlzUGlubmluZ1JpZ2h0KCk7aWYodCl7aWYodGhpcy5pc0Z1bGxXaWR0aCgpJiYhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbWJlZEZ1bGxXaWR0aFJvd3MiKSlyZXR1cm4gdm9pZCh0aGlzLnNsaWRlSW5BbmltYXRpb24uZnVsbFdpZHRoPSEwKTt0aGlzLnNsaWRlSW5BbmltYXRpb24uY2VudGVyPSEwLHRoaXMuc2xpZGVJbkFuaW1hdGlvbi5sZWZ0PWksdGhpcy5zbGlkZUluQW5pbWF0aW9uLnJpZ2h0PXN9ZWxzZXtpZih0aGlzLmlzRnVsbFdpZHRoKCkmJiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVtYmVkRnVsbFdpZHRoUm93cyIpKXJldHVybiB2b2lkKHRoaXMuZmFkZUluQW5pbWF0aW9uLmZ1bGxXaWR0aD0hMCk7dGhpcy5mYWRlSW5BbmltYXRpb24uY2VudGVyPSEwLHRoaXMuZmFkZUluQW5pbWF0aW9uLmxlZnQ9aSx0aGlzLmZhZGVJbkFuaW1hdGlvbi5yaWdodD1zfX1pc0VkaXRpbmcoKXtyZXR1cm4gdGhpcy5lZGl0aW5nUm93fWlzRnVsbFdpZHRoKCl7cmV0dXJuIHRoaXMucm93VHlwZSE9PVRhLk5vcm1hbH1nZXRSb3dUeXBlKCl7cmV0dXJuIHRoaXMucm93VHlwZX1yZWZyZXNoRnVsbFdpZHRoKCl7Y29uc3QgZT0oZSx0KT0+IWV8fGUucm93Q29tcC5yZWZyZXNoRnVsbFdpZHRoKCgpPT50aGlzLmNyZWF0ZUZ1bGxXaWR0aFBhcmFtcyhlLmVsZW1lbnQsdCkpLHQ9ZSh0aGlzLmZ1bGxXaWR0aEd1aSxudWxsKSxpPWUodGhpcy5jZW50ZXJHdWksbnVsbCkscz1lKHRoaXMubGVmdEd1aSwibGVmdCIpLHI9ZSh0aGlzLnJpZ2h0R3VpLCJyaWdodCIpO3JldHVybiB0JiZpJiZzJiZyfWFkZExpc3RlbmVycygpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucm93Tm9kZSxPby5FVkVOVF9IRUlHSFRfQ0hBTkdFRCwoKT0+dGhpcy5vblJvd0hlaWdodENoYW5nZWQoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yb3dOb2RlLE9vLkVWRU5UX1JPV19TRUxFQ1RFRCwoKT0+dGhpcy5vblJvd1NlbGVjdGVkKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucm93Tm9kZSxPby5FVkVOVF9ST1dfSU5ERVhfQ0hBTkdFRCx0aGlzLm9uUm93SW5kZXhDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucm93Tm9kZSxPby5FVkVOVF9UT1BfQ0hBTkdFRCx0aGlzLm9uVG9wQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnJvd05vZGUsT28uRVZFTlRfRVhQQU5ERURfQ0hBTkdFRCx0aGlzLnVwZGF0ZUV4cGFuZGVkQ3NzLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucm93Tm9kZSxPby5FVkVOVF9IQVNfQ0hJTERSRU5fQ0hBTkdFRCx0aGlzLnVwZGF0ZUV4cGFuZGVkQ3NzLmJpbmQodGhpcykpLHRoaXMucm93Tm9kZS5kZXRhaWwmJnRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucm93Tm9kZS5wYXJlbnQsT28uRVZFTlRfREFUQV9DSEFOR0VELHRoaXMub25Sb3dOb2RlRGF0YUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yb3dOb2RlLE9vLkVWRU5UX0RBVEFfQ0hBTkdFRCx0aGlzLm9uUm93Tm9kZURhdGFDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucm93Tm9kZSxPby5FVkVOVF9DRUxMX0NIQU5HRUQsdGhpcy5wb3N0UHJvY2Vzc0Nzcy5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnJvd05vZGUsT28uRVZFTlRfSElHSExJR0hUX0NIQU5HRUQsdGhpcy5vblJvd05vZGVIaWdobGlnaHRDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucm93Tm9kZSxPby5FVkVOVF9EUkFHR0lOR19DSEFOR0VELHRoaXMucG9zdFByb2Nlc3NSb3dEcmFnZ2luZy5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnJvd05vZGUsT28uRVZFTlRfVUlfTEVWRUxfQ0hBTkdFRCx0aGlzLm9uVWlMZXZlbENoYW5nZWQuYmluZCh0aGlzKSk7Y29uc3QgZT10aGlzLmJlYW5zLmV2ZW50U2VydmljZTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLGx0LkVWRU5UX1BBR0lOQVRJT05fUElYRUxfT0ZGU0VUX0NIQU5HRUQsdGhpcy5vblBhZ2luYXRpb25QaXhlbE9mZnNldENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSxsdC5FVkVOVF9IRUlHSFRfU0NBTEVfQ0hBTkdFRCx0aGlzLm9uVG9wQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLGx0LkVWRU5UX0RJU1BMQVlFRF9DT0xVTU5TX0NIQU5HRUQsdGhpcy5vbkRpc3BsYXllZENvbHVtbnNDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsbHQuRVZFTlRfVklSVFVBTF9DT0xVTU5TX0NIQU5HRUQsdGhpcy5vblZpcnR1YWxDb2x1bW5zQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLGx0LkVWRU5UX0NFTExfRk9DVVNFRCx0aGlzLm9uQ2VsbEZvY3VzQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLGx0LkVWRU5UX0NFTExfRk9DVVNfQ0xFQVJFRCx0aGlzLm9uQ2VsbEZvY3VzQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLGx0LkVWRU5UX1BBR0lOQVRJT05fQ0hBTkdFRCx0aGlzLm9uUGFnaW5hdGlvbkNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSxsdC5FVkVOVF9NT0RFTF9VUERBVEVELHRoaXMucmVmcmVzaEZpcnN0QW5kTGFzdFJvd1N0eWxlcy5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLGx0LkVWRU5UX0NPTFVNTl9NT1ZFRCx0aGlzLnVwZGF0ZUNvbHVtbkxpc3RzLmJpbmQodGhpcykpLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9Pnt0aGlzLmRlc3Ryb3lCZWFucyh0aGlzLnJvd0RyYWdDb21wcyx0aGlzLmJlYW5zLmNvbnRleHQpfSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcnMoWyJyb3dEcmFnRW50aXJlUm93Il0sKCk9Pnt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0RyYWdFbnRpcmVSb3ciKT90aGlzLmFsbFJvd0d1aXMuZm9yRWFjaChlPT57dGhpcy5hZGRSb3dEcmFnZ2VyVG9Sb3coZSl9KToodGhpcy5kZXN0cm95QmVhbnModGhpcy5yb3dEcmFnQ29tcHMsdGhpcy5iZWFucy5jb250ZXh0KSx0aGlzLnJvd0RyYWdDb21wcz1bXSl9KSx0aGlzLmFkZExpc3RlbmVyc0ZvckNlbGxDb21wcygpfWFkZExpc3RlbmVyc0ZvckNlbGxDb21wcygpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucm93Tm9kZSxPby5FVkVOVF9ST1dfSU5ERVhfQ0hBTkdFRCwoKT0+e3RoaXMuZ2V0QWxsQ2VsbEN0cmxzKCkuZm9yRWFjaChlPT5lLm9uUm93SW5kZXhDaGFuZ2VkKCkpfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yb3dOb2RlLE9vLkVWRU5UX0NFTExfQ0hBTkdFRCxlPT57dGhpcy5nZXRBbGxDZWxsQ3RybHMoKS5mb3JFYWNoKHQ9PnQub25DZWxsQ2hhbmdlZChlKSl9KX1vblJvd05vZGVEYXRhQ2hhbmdlZChlKXtpZih0aGlzLmlzRnVsbFdpZHRoKCkhPT0hIXRoaXMucm93Tm9kZS5pc0Z1bGxXaWR0aENlbGwoKSl0aGlzLmJlYW5zLnJvd1JlbmRlcmVyLnJlZHJhd1Jvdyh0aGlzLnJvd05vZGUpO2Vsc2UgaWYodGhpcy5pc0Z1bGxXaWR0aCgpKXt0aGlzLnJlZnJlc2hGdWxsV2lkdGgoKXx8dGhpcy5iZWFucy5yb3dSZW5kZXJlci5yZWRyYXdSb3codGhpcy5yb3dOb2RlKX1lbHNlIHRoaXMuZ2V0QWxsQ2VsbEN0cmxzKCkuZm9yRWFjaCh0PT50LnJlZnJlc2hDZWxsKHtzdXBwcmVzc0ZsYXNoOiFlLnVwZGF0ZSxuZXdEYXRhOiFlLnVwZGF0ZX0pKSx0aGlzLmFsbFJvd0d1aXMuZm9yRWFjaChlPT57dGhpcy5zZXRSb3dDb21wUm93SWQoZS5yb3dDb21wKSx0aGlzLnVwZGF0ZVJvd0J1c2luZXNzS2V5KCksdGhpcy5zZXRSb3dDb21wUm93QnVzaW5lc3NLZXkoZS5yb3dDb21wKX0pLHRoaXMub25Sb3dTZWxlY3RlZCgpLHRoaXMucG9zdFByb2Nlc3NDc3MoKX1wb3N0UHJvY2Vzc0Nzcygpe3RoaXMuc2V0U3R5bGVzRnJvbUdyaWRPcHRpb25zKCEwKSx0aGlzLnBvc3RQcm9jZXNzQ2xhc3Nlc0Zyb21HcmlkT3B0aW9ucygpLHRoaXMucG9zdFByb2Nlc3NSb3dDbGFzc1J1bGVzKCksdGhpcy5wb3N0UHJvY2Vzc1Jvd0RyYWdnaW5nKCl9b25Sb3dOb2RlSGlnaGxpZ2h0Q2hhbmdlZCgpe2NvbnN0IGU9dGhpcy5yb3dOb2RlLmhpZ2hsaWdodGVkO3RoaXMuYWxsUm93R3Vpcy5mb3JFYWNoKHQ9Pntjb25zdCBpPWU9PT1Ibi5BYm92ZSxzPWU9PT1Ibi5CZWxvdzt0LnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctcm93LWhpZ2hsaWdodC1hYm92ZSIsaSksdC5yb3dDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXJvdy1oaWdobGlnaHQtYmVsb3ciLHMpfSl9cG9zdFByb2Nlc3NSb3dEcmFnZ2luZygpe2NvbnN0IGU9dGhpcy5yb3dOb2RlLmRyYWdnaW5nO3RoaXMuYWxsUm93R3Vpcy5mb3JFYWNoKHQ9PnQucm93Q29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1yb3ctZHJhZ2dpbmciLGUpKX11cGRhdGVFeHBhbmRlZENzcygpe2NvbnN0IGU9dGhpcy5yb3dOb2RlLmlzRXhwYW5kYWJsZSgpLHQ9MT09dGhpcy5yb3dOb2RlLmV4cGFuZGVkO3RoaXMuYWxsUm93R3Vpcy5mb3JFYWNoKGk9PntpLnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctcm93LWdyb3VwIixlKSxpLnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctcm93LWdyb3VwLWV4cGFuZGVkIixlJiZ0KSxpLnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctcm93LWdyb3VwLWNvbnRyYWN0ZWQiLGUmJiF0KSxjaShpLmVsZW1lbnQsZSYmdCl9KX1vbkRpc3BsYXllZENvbHVtbnNDaGFuZ2VkKCl7dGhpcy51cGRhdGVDb2x1bW5MaXN0cyghMCksdGhpcy5iZWFucy5jb2x1bW5Nb2RlbC53YXNBdXRvUm93SGVpZ2h0RXZlckFjdGl2ZSgpJiZ0aGlzLnJvd05vZGUuY2hlY2tBdXRvSGVpZ2h0cygpfW9uVmlydHVhbENvbHVtbnNDaGFuZ2VkKCl7dGhpcy51cGRhdGVDb2x1bW5MaXN0cyghMSwhMCl9Z2V0Um93UG9zaXRpb24oKXtyZXR1cm57cm93UGlubmVkOncodGhpcy5yb3dOb2RlLnJvd1Bpbm5lZCkscm93SW5kZXg6dGhpcy5yb3dOb2RlLnJvd0luZGV4fX1vbktleWJvYXJkTmF2aWdhdGUoZSl7Y29uc3QgdD10aGlzLmFsbFJvd0d1aXMuZmluZCh0PT50LmVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQpKTtpZighKCh0P3QuZWxlbWVudDpudWxsKT09PWUudGFyZ2V0KSlyZXR1cm47Y29uc3QgaT10aGlzLnJvd05vZGUscz10aGlzLmJlYW5zLmZvY3VzU2VydmljZS5nZXRGb2N1c2VkQ2VsbCgpLHI9e3Jvd0luZGV4Omkucm93SW5kZXgscm93UGlubmVkOmkucm93UGlubmVkLGNvbHVtbjpzJiZzLmNvbHVtbn07dGhpcy5iZWFucy5uYXZpZ2F0aW9uU2VydmljZS5uYXZpZ2F0ZVRvTmV4dENlbGwoZSxlLmtleSxyLCEwKSxlLnByZXZlbnREZWZhdWx0KCl9b25UYWJLZXlEb3duKGUpe2lmKGUuZGVmYXVsdFByZXZlbnRlZHx8JGUoZSkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5hbGxSb3dHdWlzLmZpbmQodD0+dC5lbGVtZW50LmNvbnRhaW5zKGUudGFyZ2V0KSksaT10P3QuZWxlbWVudDpudWxsLHM9aT09PWUudGFyZ2V0O2xldCByPW51bGw7c3x8KHI9dGhpcy5iZWFucy5mb2N1c1NlcnZpY2UuZmluZE5leHRGb2N1c2FibGVFbGVtZW50KGksITEsZS5zaGlmdEtleSkpLCh0aGlzLmlzRnVsbFdpZHRoKCkmJnN8fCFyKSYmdGhpcy5iZWFucy5uYXZpZ2F0aW9uU2VydmljZS5vblRhYktleURvd24odGhpcyxlKX1vbkZ1bGxXaWR0aFJvd0ZvY3VzZWQoZSl7dmFyIHQ7Y29uc3QgaT10aGlzLnJvd05vZGUscz0hIWUmJih0aGlzLmlzRnVsbFdpZHRoKCkmJmUucm93SW5kZXg9PT1pLnJvd0luZGV4JiZlLnJvd1Bpbm5lZD09aS5yb3dQaW5uZWQpLHI9dGhpcy5mdWxsV2lkdGhHdWk/dGhpcy5mdWxsV2lkdGhHdWkuZWxlbWVudDpudWxsPT09KHQ9dGhpcy5jZW50ZXJHdWkpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmVsZW1lbnQ7ciYmKHIuY2xhc3NMaXN0LnRvZ2dsZSgiYWctZnVsbC13aWR0aC1mb2N1cyIscykscyYmci5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pKX1yZWZyZXNoQ2VsbChlKXt0aGlzLmNlbnRlckNlbGxDdHJscz10aGlzLnJlbW92ZUNlbGxDdHJsKHRoaXMuY2VudGVyQ2VsbEN0cmxzLGUpLHRoaXMubGVmdENlbGxDdHJscz10aGlzLnJlbW92ZUNlbGxDdHJsKHRoaXMubGVmdENlbGxDdHJscyxlKSx0aGlzLnJpZ2h0Q2VsbEN0cmxzPXRoaXMucmVtb3ZlQ2VsbEN0cmwodGhpcy5yaWdodENlbGxDdHJscyxlKSx0aGlzLnVwZGF0ZUNvbHVtbkxpc3RzKCl9cmVtb3ZlQ2VsbEN0cmwoZSx0KXtjb25zdCBpPXtsaXN0OltdLG1hcDp7fX07cmV0dXJuIGUubGlzdC5mb3JFYWNoKGU9PntlIT09dCYmKGkubGlzdC5wdXNoKGUpLGkubWFwW2UuZ2V0SW5zdGFuY2VJZCgpXT1lKX0pLGl9b25Nb3VzZUV2ZW50KGUsdCl7c3dpdGNoKGUpe2Nhc2UiZGJsY2xpY2siOnRoaXMub25Sb3dEYmxDbGljayh0KTticmVhaztjYXNlImNsaWNrIjp0aGlzLm9uUm93Q2xpY2sodCk7YnJlYWs7Y2FzZSJ0b3VjaHN0YXJ0IjpjYXNlIm1vdXNlZG93biI6dGhpcy5vblJvd01vdXNlRG93bih0KX19Y3JlYXRlUm93RXZlbnQoZSx0KXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7dHlwZTplLG5vZGU6dGhpcy5yb3dOb2RlLGRhdGE6dGhpcy5yb3dOb2RlLmRhdGEscm93SW5kZXg6dGhpcy5yb3dOb2RlLnJvd0luZGV4LHJvd1Bpbm5lZDp0aGlzLnJvd05vZGUucm93UGlubmVkLGV2ZW50OnR9KX1jcmVhdGVSb3dFdmVudFdpdGhTb3VyY2UoZSx0KXtjb25zdCBpPXRoaXMuY3JlYXRlUm93RXZlbnQoZSx0KTtyZXR1cm4gaS5zb3VyY2U9dGhpcyxpfW9uUm93RGJsQ2xpY2soZSl7aWYoJGUoZSkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5jcmVhdGVSb3dFdmVudFdpdGhTb3VyY2UobHQuRVZFTlRfUk9XX0RPVUJMRV9DTElDS0VELGUpO3RoaXMuYmVhbnMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9b25Sb3dNb3VzZURvd24oZSl7aWYodGhpcy5sYXN0TW91c2VEb3duT25EcmFnZ2VyPW9zKGUudGFyZ2V0LCJhZy1yb3ctZHJhZyIsMyksIXRoaXMuaXNGdWxsV2lkdGgoKSlyZXR1cm47Y29uc3QgdD10aGlzLnJvd05vZGUsaT10aGlzLmJlYW5zLmNvbHVtbk1vZGVsO3RoaXMuYmVhbnMucmFuZ2VTZXJ2aWNlJiZ0aGlzLmJlYW5zLnJhbmdlU2VydmljZS5yZW1vdmVBbGxDZWxsUmFuZ2VzKCksdGhpcy5iZWFucy5mb2N1c1NlcnZpY2Uuc2V0Rm9jdXNlZENlbGwoe3Jvd0luZGV4OnQucm93SW5kZXgsY29sdW1uOmkuZ2V0QWxsRGlzcGxheWVkQ29sdW1ucygpWzBdLHJvd1Bpbm5lZDp0LnJvd1Bpbm5lZCxmb3JjZUJyb3dzZXJGb2N1czohMH0pfW9uUm93Q2xpY2soZSl7aWYoJGUoZSl8fHRoaXMubGFzdE1vdXNlRG93bk9uRHJhZ2dlcilyZXR1cm47Y29uc3QgdD10aGlzLmNyZWF0ZVJvd0V2ZW50V2l0aFNvdXJjZShsdC5FVkVOVF9ST1dfQ0xJQ0tFRCxlKTt0aGlzLmJlYW5zLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpO2NvbnN0IGk9ZS5jdHJsS2V5fHxlLm1ldGFLZXkscz1lLnNoaWZ0S2V5O2lmKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBTZWxlY3RzQ2hpbGRyZW4iKSYmdGhpcy5yb3dOb2RlLmdyb3VwfHx0aGlzLmlzUm93U2VsZWN0aW9uQmxvY2tlZCgpfHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzUm93Q2xpY2tTZWxlY3Rpb24iKSlyZXR1cm47Y29uc3Qgcj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd011bHRpU2VsZWN0V2l0aENsaWNrIiksbz0hdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc1Jvd0Rlc2VsZWN0aW9uIiksbj0icm93Q2xpY2tlZCI7aWYodGhpcy5yb3dOb2RlLmlzU2VsZWN0ZWQoKSlyP3RoaXMucm93Tm9kZS5zZXRTZWxlY3RlZFBhcmFtcyh7bmV3VmFsdWU6ITEsZXZlbnQ6ZSxzb3VyY2U6bn0pOmk/byYmdGhpcy5yb3dOb2RlLnNldFNlbGVjdGVkUGFyYW1zKHtuZXdWYWx1ZTohMSxldmVudDplLHNvdXJjZTpufSk6dGhpcy5yb3dOb2RlLnNldFNlbGVjdGVkUGFyYW1zKHtuZXdWYWx1ZTohMCxjbGVhclNlbGVjdGlvbjohcyxyYW5nZVNlbGVjdDpzLGV2ZW50OmUsc291cmNlOm59KTtlbHNle2NvbnN0IHQ9IXImJiFpO3RoaXMucm93Tm9kZS5zZXRTZWxlY3RlZFBhcmFtcyh7bmV3VmFsdWU6ITAsY2xlYXJTZWxlY3Rpb246dCxyYW5nZVNlbGVjdDpzLGV2ZW50OmUsc291cmNlOm59KX19aXNSb3dTZWxlY3Rpb25CbG9ja2VkKCl7cmV0dXJuIXRoaXMucm93Tm9kZS5zZWxlY3RhYmxlfHwhIXRoaXMucm93Tm9kZS5yb3dQaW5uZWR8fCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd1NlbGVjdGlvbigpfXNldHVwRGV0YWlsUm93QXV0b0hlaWdodChlKXtpZih0aGlzLnJvd1R5cGUhPT1UYS5GdWxsV2lkdGhEZXRhaWwpcmV0dXJuO2lmKCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImRldGFpbFJvd0F1dG9IZWlnaHQiKSlyZXR1cm47Y29uc3QgdD0oKT0+e2NvbnN0IHQ9ZS5jbGllbnRIZWlnaHQ7aWYobnVsbCE9dCYmdD4wKXtjb25zdCBlPSgpPT57dGhpcy5yb3dOb2RlLnNldFJvd0hlaWdodCh0KSx0aGlzLmJlYW5zLmNsaWVudFNpZGVSb3dNb2RlbD90aGlzLmJlYW5zLmNsaWVudFNpZGVSb3dNb2RlbC5vblJvd0hlaWdodENoYW5nZWQoKTp0aGlzLmJlYW5zLnNlcnZlclNpZGVSb3dNb2RlbCYmdGhpcy5iZWFucy5zZXJ2ZXJTaWRlUm93TW9kZWwub25Sb3dIZWlnaHRDaGFuZ2VkKCl9O3dpbmRvdy5zZXRUaW1lb3V0KGUsMCl9fSxpPXRoaXMuYmVhbnMucmVzaXplT2JzZXJ2ZXJTZXJ2aWNlLm9ic2VydmVSZXNpemUoZSx0KTt0aGlzLmFkZERlc3Ryb3lGdW5jKGkpLHQoKX1jcmVhdGVGdWxsV2lkdGhQYXJhbXMoZSx0KXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7ZnVsbFdpZHRoOiEwLGRhdGE6dGhpcy5yb3dOb2RlLmRhdGEsbm9kZTp0aGlzLnJvd05vZGUsdmFsdWU6dGhpcy5yb3dOb2RlLmtleSx2YWx1ZUZvcm1hdHRlZDp0aGlzLnJvd05vZGUua2V5LHJvd0luZGV4OnRoaXMucm93Tm9kZS5yb3dJbmRleCxlR3JpZENlbGw6ZSxlUGFyZW50T2ZWYWx1ZTplLHBpbm5lZDp0LGFkZFJlbmRlcmVkUm93TGlzdGVuZXI6dGhpcy5hZGRFdmVudExpc3RlbmVyLmJpbmQodGhpcykscmVnaXN0ZXJSb3dEcmFnZ2VyOihlLHQsaSxzKT0+dGhpcy5hZGRGdWxsV2lkdGhSb3dEcmFnZ2luZyhlLHQsaSxzKX0pfWFkZEZ1bGxXaWR0aFJvd0RyYWdnaW5nKGUsdCxpPSIiLHMpe2lmKCF0aGlzLmlzRnVsbFdpZHRoKCkpcmV0dXJuO2NvbnN0IHI9bmV3IF9vKCgpPT5pLHRoaXMucm93Tm9kZSx2b2lkIDAsZSx0LHMpO3RoaXMuY3JlYXRlTWFuYWdlZEJlYW4ocix0aGlzLmJlYW5zLmNvbnRleHQpfW9uVWlMZXZlbENoYW5nZWQoKXtjb25zdCBlPXRoaXMuYmVhbnMucm93Q3NzQ2xhc3NDYWxjdWxhdG9yLmNhbGN1bGF0ZVJvd0xldmVsKHRoaXMucm93Tm9kZSk7aWYodGhpcy5yb3dMZXZlbCE9ZSl7Y29uc3QgdD0iYWctcm93LWxldmVsLSIrZSxpPSJhZy1yb3ctbGV2ZWwtIit0aGlzLnJvd0xldmVsO3RoaXMuYWxsUm93R3Vpcy5mb3JFYWNoKGU9PntlLnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcyh0LCEwKSxlLnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcyhpLCExKX0pfXRoaXMucm93TGV2ZWw9ZX1pc0ZpcnN0Um93T25QYWdlKCl7cmV0dXJuIHRoaXMucm93Tm9kZS5yb3dJbmRleD09PXRoaXMuYmVhbnMucGFnaW5hdGlvblByb3h5LmdldFBhZ2VGaXJzdFJvdygpfWlzTGFzdFJvd09uUGFnZSgpe3JldHVybiB0aGlzLnJvd05vZGUucm93SW5kZXg9PT10aGlzLmJlYW5zLnBhZ2luYXRpb25Qcm94eS5nZXRQYWdlTGFzdFJvdygpfXJlZnJlc2hGaXJzdEFuZExhc3RSb3dTdHlsZXMoKXtjb25zdCBlPXRoaXMuaXNGaXJzdFJvd09uUGFnZSgpLHQ9dGhpcy5pc0xhc3RSb3dPblBhZ2UoKTt0aGlzLmZpcnN0Um93T25QYWdlIT09ZSYmKHRoaXMuZmlyc3RSb3dPblBhZ2U9ZSx0aGlzLmFsbFJvd0d1aXMuZm9yRWFjaCh0PT50LnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctcm93LWZpcnN0IixlKSkpLHRoaXMubGFzdFJvd09uUGFnZSE9PXQmJih0aGlzLmxhc3RSb3dPblBhZ2U9dCx0aGlzLmFsbFJvd0d1aXMuZm9yRWFjaChlPT5lLnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctcm93LWxhc3QiLHQpKSl9c3RvcEVkaXRpbmcoZT0hMSl7aWYodGhpcy5zdG9wcGluZ1Jvd0VkaXQpcmV0dXJuO2NvbnN0IHQ9dGhpcy5nZXRBbGxDZWxsQ3RybHMoKSxpPXRoaXMuZWRpdGluZ1Jvdzt0aGlzLnN0b3BwaW5nUm93RWRpdD0hMDtsZXQgcz0hMTtmb3IoY29uc3QgciBvZiB0KXtjb25zdCB0PXIuc3RvcEVkaXRpbmcoZSk7aSYmIWUmJiFzJiZ0JiYocz0hMCl9aWYocyl7Y29uc3QgZT10aGlzLmNyZWF0ZVJvd0V2ZW50KGx0LkVWRU5UX1JPV19WQUxVRV9DSEFOR0VEKTt0aGlzLmJlYW5zLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfWkmJnRoaXMuc2V0RWRpdGluZ1JvdyghMSksdGhpcy5zdG9wcGluZ1Jvd0VkaXQ9ITF9c2V0SW5saW5lRWRpdGluZ0NzcyhlKXt0aGlzLmFsbFJvd0d1aXMuZm9yRWFjaCh0PT57dC5yb3dDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXJvdy1pbmxpbmUtZWRpdGluZyIsZSksdC5yb3dDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXJvdy1ub3QtaW5saW5lLWVkaXRpbmciLCFlKX0pfXNldEVkaXRpbmdSb3coZSl7dGhpcy5lZGl0aW5nUm93PWUsdGhpcy5hbGxSb3dHdWlzLmZvckVhY2godD0+dC5yb3dDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXJvdy1lZGl0aW5nIixlKSk7Y29uc3QgdD1lP3RoaXMuY3JlYXRlUm93RXZlbnQobHQuRVZFTlRfUk9XX0VESVRJTkdfU1RBUlRFRCk6dGhpcy5jcmVhdGVSb3dFdmVudChsdC5FVkVOVF9ST1dfRURJVElOR19TVE9QUEVEKTt0aGlzLmJlYW5zLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfXN0YXJ0Um93RWRpdGluZyhlPW51bGwsdD1udWxsLGk9bnVsbCl7aWYodGhpcy5lZGl0aW5nUm93KXJldHVybjt0aGlzLmdldEFsbENlbGxDdHJscygpLnJlZHVjZSgocyxyKT0+e2NvbnN0IG89cj09PXQ7cmV0dXJuIG8/ci5zdGFydEVkaXRpbmcoZSxvLGkpOnIuc3RhcnRFZGl0aW5nKG51bGwsbyxpKSwhIXN8fHIuaXNFZGl0aW5nKCl9LCExKSYmdGhpcy5zZXRFZGl0aW5nUm93KCEwKX1nZXRBbGxDZWxsQ3RybHMoKXtpZigwPT09dGhpcy5sZWZ0Q2VsbEN0cmxzLmxpc3QubGVuZ3RoJiYwPT09dGhpcy5yaWdodENlbGxDdHJscy5saXN0Lmxlbmd0aClyZXR1cm4gdGhpcy5jZW50ZXJDZWxsQ3RybHMubGlzdDtyZXR1cm5bLi4udGhpcy5jZW50ZXJDZWxsQ3RybHMubGlzdCwuLi50aGlzLmxlZnRDZWxsQ3RybHMubGlzdCwuLi50aGlzLnJpZ2h0Q2VsbEN0cmxzLmxpc3RdfXBvc3RQcm9jZXNzQ2xhc3Nlc0Zyb21HcmlkT3B0aW9ucygpe2NvbnN0IGU9dGhpcy5iZWFucy5yb3dDc3NDbGFzc0NhbGN1bGF0b3IucHJvY2Vzc0NsYXNzZXNGcm9tR3JpZE9wdGlvbnModGhpcy5yb3dOb2RlKTtlJiZlLmxlbmd0aCYmZS5mb3JFYWNoKGU9Pnt0aGlzLmFsbFJvd0d1aXMuZm9yRWFjaCh0PT50LnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcyhlLCEwKSl9KX1wb3N0UHJvY2Vzc1Jvd0NsYXNzUnVsZXMoKXt0aGlzLmJlYW5zLnJvd0Nzc0NsYXNzQ2FsY3VsYXRvci5wcm9jZXNzUm93Q2xhc3NSdWxlcyh0aGlzLnJvd05vZGUsZT0+e3RoaXMuYWxsUm93R3Vpcy5mb3JFYWNoKHQ9PnQucm93Q29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKGUsITApKX0sZT0+e3RoaXMuYWxsUm93R3Vpcy5mb3JFYWNoKHQ9PnQucm93Q29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKGUsITEpKX0pfXNldFN0eWxlc0Zyb21HcmlkT3B0aW9ucyhlLHQpe2UmJih0aGlzLnJvd1N0eWxlcz10aGlzLnByb2Nlc3NTdHlsZXNGcm9tR3JpZE9wdGlvbnMoKSksdGhpcy5mb3JFYWNoR3VpKHQsZT0+ZS5yb3dDb21wLnNldFVzZXJTdHlsZXModGhpcy5yb3dTdHlsZXMpKX1nZXRQaW5uZWRGb3JDb250YWluZXIoZSl7cmV0dXJuIGU9PT1VYS5MRUZUPyJsZWZ0IjplPT09VWEuUklHSFQ/InJpZ2h0IjpudWxsfWdldEluaXRpYWxSb3dDbGFzc2VzKGUpe2NvbnN0IHQ9dGhpcy5nZXRQaW5uZWRGb3JDb250YWluZXIoZSksaT17cm93Tm9kZTp0aGlzLnJvd05vZGUscm93Rm9jdXNlZDp0aGlzLnJvd0ZvY3VzZWQsZmFkZVJvd0luOnRoaXMuZmFkZUluQW5pbWF0aW9uW2VdLHJvd0lzRXZlbjp0aGlzLnJvd05vZGUucm93SW5kZXglMj09MCxyb3dMZXZlbDp0aGlzLnJvd0xldmVsLGZ1bGxXaWR0aFJvdzp0aGlzLmlzRnVsbFdpZHRoKCksZmlyc3RSb3dPblBhZ2U6dGhpcy5pc0ZpcnN0Um93T25QYWdlKCksbGFzdFJvd09uUGFnZTp0aGlzLmlzTGFzdFJvd09uUGFnZSgpLHByaW50TGF5b3V0OnRoaXMucHJpbnRMYXlvdXQsZXhwYW5kYWJsZTp0aGlzLnJvd05vZGUuaXNFeHBhbmRhYmxlKCkscGlubmVkOnR9O3JldHVybiB0aGlzLmJlYW5zLnJvd0Nzc0NsYXNzQ2FsY3VsYXRvci5nZXRJbml0aWFsUm93Q2xhc3NlcyhpKX1wcm9jZXNzU3R5bGVzRnJvbUdyaWRPcHRpb25zKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd1N0eWxlIik7aWYoZSYmImZ1bmN0aW9uIj09dHlwZW9mIGUpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKCJBRyBHcmlkOiByb3dTdHlsZSBzaG91bGQgYmUgYW4gb2JqZWN0IG9mIGtleS92YWx1ZSBzdHlsZXMsIG5vdCBiZSBhIGZ1bmN0aW9uLCB1c2UgZ2V0Um93U3R5bGUoKSBpbnN0ZWFkIik7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiZ2V0Um93U3R5bGUiKTtsZXQgaTtpZih0KXtpPXQoe2RhdGE6dGhpcy5yb3dOb2RlLmRhdGEsbm9kZTp0aGlzLnJvd05vZGUscm93SW5kZXg6dGhpcy5yb3dOb2RlLnJvd0luZGV4fSl9cmV0dXJuIGl8fGU/T2JqZWN0LmFzc2lnbih7fSxlLGkpOnRoaXMuZW1wdHlTdHlsZX1vblJvd1NlbGVjdGVkKGUpe2NvbnN0IHQ9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKSxpPSEhdGhpcy5yb3dOb2RlLmlzU2VsZWN0ZWQoKTt0aGlzLmZvckVhY2hHdWkoZSxlPT57ZS5yb3dDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXJvdy1zZWxlY3RlZCIsaSksYmkoZS5lbGVtZW50LGkpOyFlLmVsZW1lbnQuY29udGFpbnModC5hY3RpdmVFbGVtZW50KXx8ZSE9PXRoaXMuY2VudGVyR3VpJiZlIT09dGhpcy5mdWxsV2lkdGhHdWl8fHRoaXMuYW5ub3VuY2VEZXNjcmlwdGlvbigpfSl9YW5ub3VuY2VEZXNjcmlwdGlvbigpe2lmKHRoaXMuaXNSb3dTZWxlY3Rpb25CbG9ja2VkKCkpcmV0dXJuO2NvbnN0IGU9dGhpcy5yb3dOb2RlLmlzU2VsZWN0ZWQoKTtpZihlJiZ0aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzUm93RGVzZWxlY3Rpb24iKSlyZXR1cm47Y29uc3QgdD10aGlzLmJlYW5zLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKShlPyJhcmlhUm93RGVzZWxlY3QiOiJhcmlhUm93U2VsZWN0IixgUHJlc3MgU1BBQ0UgdG8gJHtlPyJkZXNlbGVjdCI6InNlbGVjdCJ9IHRoaXMgcm93LmApO3RoaXMuYmVhbnMuYXJpYUFubm91bmNlbWVudFNlcnZpY2UuYW5ub3VuY2VWYWx1ZSh0KX1pc1VzZUFuaW1hdGlvbkZyYW1lRm9yQ3JlYXRlKCl7cmV0dXJuIHRoaXMudXNlQW5pbWF0aW9uRnJhbWVGb3JDcmVhdGV9YWRkSG92ZXJGdW5jdGlvbmFsaXR5KGUpe3RoaXMuYWN0aXZlJiYodGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSwibW91c2VlbnRlciIsKCk9PnRoaXMucm93Tm9kZS5vbk1vdXNlRW50ZXIoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSwibW91c2VsZWF2ZSIsKCk9PnRoaXMucm93Tm9kZS5vbk1vdXNlTGVhdmUoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yb3dOb2RlLE9vLkVWRU5UX01PVVNFX0VOVEVSLCgpPT57dGhpcy5iZWFucy5kcmFnU2VydmljZS5pc0RyYWdnaW5nKCl8fHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NSb3dIb3ZlckhpZ2hsaWdodCIpfHwoZS5jbGFzc0xpc3QuYWRkKCJhZy1yb3ctaG92ZXIiKSx0aGlzLnJvd05vZGUuc2V0SG92ZXJlZCghMCkpfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yb3dOb2RlLE9vLkVWRU5UX01PVVNFX0xFQVZFLCgpPT57ZS5jbGFzc0xpc3QucmVtb3ZlKCJhZy1yb3ctaG92ZXIiKSx0aGlzLnJvd05vZGUuc2V0SG92ZXJlZCghMSl9KSl9cm91bmRSb3dUb3BUb0JvdW5kcyhlKXtjb25zdCB0PXRoaXMuYmVhbnMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLmdldFNjcm9sbEZlYXR1cmUoKS5nZXRBcHByb3hpbWF0ZVZTY29sbFBvc2l0aW9uKCksaT10aGlzLmFwcGx5UGFnaW5hdGlvbk9mZnNldCh0LnRvcCwhMCktMTAwLHM9dGhpcy5hcHBseVBhZ2luYXRpb25PZmZzZXQodC5ib3R0b20sITApKzEwMDtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoaSxlKSxzKX1nZXRGcmFtZXdvcmtPdmVycmlkZXMoKXtyZXR1cm4gdGhpcy5iZWFucy5mcmFtZXdvcmtPdmVycmlkZXN9Zm9yRWFjaEd1aShlLHQpe2U/dChlKTp0aGlzLmFsbFJvd0d1aXMuZm9yRWFjaCh0KX1vblJvd0hlaWdodENoYW5nZWQoZSl7aWYobnVsbD09dGhpcy5yb3dOb2RlLnJvd0hlaWdodClyZXR1cm47Y29uc3QgdD10aGlzLnJvd05vZGUucm93SGVpZ2h0LGk9dGhpcy5iZWFucy5lbnZpcm9ubWVudC5nZXREZWZhdWx0Um93SGVpZ2h0KCkscz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0dldFJvd0hlaWdodEZ1bmN0aW9uKCk/dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0Rm9yTm9kZSh0aGlzLnJvd05vZGUpLmhlaWdodDp2b2lkIDAscj1zP01hdGgubWluKGkscyktMisicHgiOnZvaWQgMDt0aGlzLmZvckVhY2hHdWkoZSxlPT57ZS5lbGVtZW50LnN0eWxlLmhlaWdodD10KyJweCIsciYmZS5lbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCItLWFnLWxpbmUtaGVpZ2h0IixyKX0pfWFkZEV2ZW50TGlzdGVuZXIoZSx0KXtzdXBlci5hZGRFdmVudExpc3RlbmVyKGUsdCl9cmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpe3N1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0KX1kZXN0cm95Rmlyc3RQYXNzKGU9ITEpe2lmKHRoaXMuYWN0aXZlPSExLCFlJiZ0aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0FuaW1hdGVSb3dzKCkmJiF0aGlzLmlzU3RpY2t5KCkpe2lmKG51bGwhPXRoaXMucm93Tm9kZS5yb3dUb3Ape2NvbnN0IGU9dGhpcy5yb3VuZFJvd1RvcFRvQm91bmRzKHRoaXMucm93Tm9kZS5yb3dUb3ApO3RoaXMuc2V0Um93VG9wKGUpfWVsc2UgdGhpcy5hbGxSb3dHdWlzLmZvckVhY2goZT0+ZS5yb3dDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLW9wYWNpdHktemVybyIsITApKX10aGlzLnJvd05vZGUuc2V0SG92ZXJlZCghMSk7Y29uc3QgdD10aGlzLmNyZWF0ZVJvd0V2ZW50KGx0LkVWRU5UX1ZJUlRVQUxfUk9XX1JFTU9WRUQpO3RoaXMuZGlzcGF0Y2hFdmVudCh0KSx0aGlzLmJlYW5zLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpLHN1cGVyLmRlc3Ryb3koKX1kZXN0cm95U2Vjb25kUGFzcygpe3RoaXMuYWxsUm93R3Vpcy5sZW5ndGg9MCx0aGlzLnN0b3BFZGl0aW5nKCk7Y29uc3QgZT1lPT4oZS5saXN0LmZvckVhY2goZT0+ZS5kZXN0cm95KCkpLHtsaXN0OltdLG1hcDp7fX0pO3RoaXMuY2VudGVyQ2VsbEN0cmxzPWUodGhpcy5jZW50ZXJDZWxsQ3RybHMpLHRoaXMubGVmdENlbGxDdHJscz1lKHRoaXMubGVmdENlbGxDdHJscyksdGhpcy5yaWdodENlbGxDdHJscz1lKHRoaXMucmlnaHRDZWxsQ3RybHMpfXNldEZvY3VzZWRDbGFzc2VzKGUpe3RoaXMuZm9yRWFjaEd1aShlLGU9PntlLnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctcm93LWZvY3VzIix0aGlzLnJvd0ZvY3VzZWQpLGUucm93Q29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1yb3ctbm8tZm9jdXMiLCF0aGlzLnJvd0ZvY3VzZWQpfSl9b25DZWxsRm9jdXNDaGFuZ2VkKCl7Y29uc3QgZT10aGlzLmJlYW5zLmZvY3VzU2VydmljZS5pc1Jvd0ZvY3VzZWQodGhpcy5yb3dOb2RlLnJvd0luZGV4LHRoaXMucm93Tm9kZS5yb3dQaW5uZWQpO2UhPT10aGlzLnJvd0ZvY3VzZWQmJih0aGlzLnJvd0ZvY3VzZWQ9ZSx0aGlzLnNldEZvY3VzZWRDbGFzc2VzKCkpLCFlJiZ0aGlzLmVkaXRpbmdSb3cmJnRoaXMuc3RvcEVkaXRpbmcoITEpfW9uUGFnaW5hdGlvbkNoYW5nZWQoKXtjb25zdCBlPXRoaXMuYmVhbnMucGFnaW5hdGlvblByb3h5LmdldEN1cnJlbnRQYWdlKCk7dGhpcy5wYWdpbmF0aW9uUGFnZSE9PWUmJih0aGlzLnBhZ2luYXRpb25QYWdlPWUsdGhpcy5vblRvcENoYW5nZWQoKSksdGhpcy5yZWZyZXNoRmlyc3RBbmRMYXN0Um93U3R5bGVzKCl9b25Ub3BDaGFuZ2VkKCl7dGhpcy5zZXRSb3dUb3AodGhpcy5yb3dOb2RlLnJvd1RvcCl9b25QYWdpbmF0aW9uUGl4ZWxPZmZzZXRDaGFuZ2VkKCl7dGhpcy5vblRvcENoYW5nZWQoKX1hcHBseVBhZ2luYXRpb25PZmZzZXQoZSx0PSExKXtpZih0aGlzLnJvd05vZGUuaXNSb3dQaW5uZWQoKXx8dGhpcy5yb3dOb2RlLnN0aWNreSlyZXR1cm4gZTtyZXR1cm4gZSt0aGlzLmJlYW5zLnBhZ2luYXRpb25Qcm94eS5nZXRQaXhlbE9mZnNldCgpKih0PzE6LTEpfXNldFJvd1RvcChlKXtpZighdGhpcy5wcmludExheW91dCYmYihlKSl7Y29uc3QgdD10aGlzLmFwcGx5UGFnaW5hdGlvbk9mZnNldChlKSxpPSh0aGlzLnJvd05vZGUuaXNSb3dQaW5uZWQoKXx8dGhpcy5yb3dOb2RlLnN0aWNreT90OnRoaXMuYmVhbnMucm93Q29udGFpbmVySGVpZ2h0U2VydmljZS5nZXRSZWFsUGl4ZWxQb3NpdGlvbih0KSkrInB4Ijt0aGlzLnNldFJvd1RvcFN0eWxlKGkpfX1nZXRJbml0aWFsUm93VG9wKGUpe3JldHVybiB0aGlzLnN1cHByZXNzUm93VHJhbnNmb3JtP3RoaXMuZ2V0SW5pdGlhbFJvd1RvcFNoYXJlZChlKTp2b2lkIDB9Z2V0SW5pdGlhbFRyYW5zZm9ybShlKXtyZXR1cm4gdGhpcy5zdXBwcmVzc1Jvd1RyYW5zZm9ybT92b2lkIDA6YHRyYW5zbGF0ZVkoJHt0aGlzLmdldEluaXRpYWxSb3dUb3BTaGFyZWQoZSl9KWB9Z2V0SW5pdGlhbFJvd1RvcFNoYXJlZChlKXtpZih0aGlzLnByaW50TGF5b3V0KXJldHVybiIiO2xldCB0O2lmKHRoaXMuaXNTdGlja3koKSl0PXRoaXMucm93Tm9kZS5zdGlja3lSb3dUb3A7ZWxzZXtjb25zdCBpPXRoaXMuc2xpZGVJbkFuaW1hdGlvbltlXT90aGlzLnJvdW5kUm93VG9wVG9Cb3VuZHModGhpcy5yb3dOb2RlLm9sZFJvd1RvcCk6dGhpcy5yb3dOb2RlLnJvd1RvcCxzPXRoaXMuYXBwbHlQYWdpbmF0aW9uT2Zmc2V0KGkpO3Q9dGhpcy5yb3dOb2RlLmlzUm93UGlubmVkKCk/czp0aGlzLmJlYW5zLnJvd0NvbnRhaW5lckhlaWdodFNlcnZpY2UuZ2V0UmVhbFBpeGVsUG9zaXRpb24ocyl9cmV0dXJuIHQrInB4In1zZXRSb3dUb3BTdHlsZShlKXt0aGlzLmFsbFJvd0d1aXMuZm9yRWFjaCh0PT50aGlzLnN1cHByZXNzUm93VHJhbnNmb3JtP3Qucm93Q29tcC5zZXRUb3AoZSk6dC5yb3dDb21wLnNldFRyYW5zZm9ybShgdHJhbnNsYXRlWSgke2V9KWApKX1nZXRSb3dOb2RlKCl7cmV0dXJuIHRoaXMucm93Tm9kZX1nZXRDZWxsQ3RybChlKXtsZXQgdD1udWxsO3JldHVybiB0aGlzLmdldEFsbENlbGxDdHJscygpLmZvckVhY2goaT0+e2kuZ2V0Q29sdW1uKCk9PWUmJih0PWkpfSksbnVsbCE9dHx8dGhpcy5nZXRBbGxDZWxsQ3RybHMoKS5mb3JFYWNoKGk9PntpLmdldENvbFNwYW5uaW5nTGlzdCgpLmluZGV4T2YoZSk+PTAmJih0PWkpfSksdH1vblJvd0luZGV4Q2hhbmdlZCgpe251bGwhPXRoaXMucm93Tm9kZS5yb3dJbmRleCYmKHRoaXMub25DZWxsRm9jdXNDaGFuZ2VkKCksdGhpcy51cGRhdGVSb3dJbmRleGVzKCksdGhpcy5wb3N0UHJvY2Vzc0NzcygpKX1nZXRSb3dJbmRleCgpe3JldHVybiB0aGlzLnJvd05vZGUuZ2V0Um93SW5kZXhTdHJpbmcoKX11cGRhdGVSb3dJbmRleGVzKGUpe2NvbnN0IHQ9dGhpcy5yb3dOb2RlLmdldFJvd0luZGV4U3RyaW5nKCksaT10aGlzLmJlYW5zLmhlYWRlck5hdmlnYXRpb25TZXJ2aWNlLmdldEhlYWRlclJvd0NvdW50KCkrdGhpcy5iZWFucy5maWx0ZXJNYW5hZ2VyLmdldEhlYWRlclJvd0NvdW50KCkscz10aGlzLnJvd05vZGUucm93SW5kZXglMj09MCxyPWkrdGhpcy5yb3dOb2RlLnJvd0luZGV4KzE7dGhpcy5mb3JFYWNoR3VpKGUsZT0+e2Uucm93Q29tcC5zZXRSb3dJbmRleCh0KSxlLnJvd0NvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctcm93LWV2ZW4iLHMpLGUucm93Q29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1yb3ctb2RkIiwhcyksZmkoZS5lbGVtZW50LHIpfSl9fU9hLkRPTV9EQVRBX0tFWV9ST1dfQ1RSTD0icmVuZGVyZWRSb3ciO3ZhciBBYT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBQYSBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5lbGVtZW50PWV9cG9zdENvbnN0cnVjdCgpe3RoaXMuYWRkS2V5Ym9hcmRMaXN0ZW5lcnMoKSx0aGlzLmFkZE1vdXNlTGlzdGVuZXJzKCksdGhpcy5tb2NrQ29udGV4dE1lbnVGb3JJUGFkKCl9YWRkS2V5Ym9hcmRMaXN0ZW5lcnMoKXtjb25zdCBlPXRoaXMucHJvY2Vzc0tleWJvYXJkRXZlbnQuYmluZCh0aGlzLCJrZXlkb3duIik7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lbGVtZW50LCJrZXlkb3duIixlKX1hZGRNb3VzZUxpc3RlbmVycygpe1siZGJsY2xpY2siLCJjb250ZXh0bWVudSIsIm1vdXNlb3ZlciIsIm1vdXNlb3V0IiwiY2xpY2siLFhlKCJ0b3VjaHN0YXJ0Iik/InRvdWNoc3RhcnQiOiJtb3VzZWRvd24iXS5mb3JFYWNoKGU9Pntjb25zdCB0PXRoaXMucHJvY2Vzc01vdXNlRXZlbnQuYmluZCh0aGlzLGUpO3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZWxlbWVudCxlLHQpfSl9cHJvY2Vzc01vdXNlRXZlbnQoZSx0KXtpZighdGhpcy5tb3VzZUV2ZW50U2VydmljZS5pc0V2ZW50RnJvbVRoaXNHcmlkKHQpfHwkZSh0KSlyZXR1cm47Y29uc3QgaT10aGlzLmdldFJvd0ZvckV2ZW50KHQpLHM9dGhpcy5tb3VzZUV2ZW50U2VydmljZS5nZXRSZW5kZXJlZENlbGxGb3JFdmVudCh0KTsiY29udGV4dG1lbnUiPT09ZT90aGlzLmhhbmRsZUNvbnRleHRNZW51TW91c2VFdmVudCh0LHZvaWQgMCxpLHMpOihzJiZzLm9uTW91c2VFdmVudChlLHQpLGkmJmkub25Nb3VzZUV2ZW50KGUsdCkpfW1vY2tDb250ZXh0TWVudUZvcklQYWQoKXtpZighTWkoKSlyZXR1cm47Y29uc3QgZT1uZXcgYW8odGhpcy5lbGVtZW50KTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLGFvLkVWRU5UX0xPTkdfVEFQLGU9Pntjb25zdCB0PXRoaXMuZ2V0Um93Rm9yRXZlbnQoZS50b3VjaEV2ZW50KSxpPXRoaXMubW91c2VFdmVudFNlcnZpY2UuZ2V0UmVuZGVyZWRDZWxsRm9yRXZlbnQoZS50b3VjaEV2ZW50KTt0aGlzLmhhbmRsZUNvbnRleHRNZW51TW91c2VFdmVudCh2b2lkIDAsZS50b3VjaEV2ZW50LHQsaSl9KSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT5lLmRlc3Ryb3koKSl9Z2V0Um93Rm9yRXZlbnQoZSl7bGV0IHQ9ZS50YXJnZXQ7Zm9yKDt0Oyl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb21EYXRhKHQsT2EuRE9NX0RBVEFfS0VZX1JPV19DVFJMKTtpZihlKXJldHVybiBlO3Q9dC5wYXJlbnRFbGVtZW50fXJldHVybiBudWxsfWhhbmRsZUNvbnRleHRNZW51TW91c2VFdmVudChlLHQsaSxzKXtjb25zdCByPWk/aS5nZXRSb3dOb2RlKCk6bnVsbCxvPXM/cy5nZXRDb2x1bW4oKTpudWxsO2xldCBuPW51bGw7aWYobyl7Y29uc3QgaT1lfHx0O3MuZGlzcGF0Y2hDZWxsQ29udGV4dE1lbnVFdmVudChudWxsIT1pP2k6bnVsbCksbj10aGlzLnZhbHVlU2VydmljZS5nZXRWYWx1ZShvLHIpfWNvbnN0IGE9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0R3JpZEJvZHlDdHJsKCksbD1zP3MuZ2V0R3VpKCk6YS5nZXRHcmlkQm9keUVsZW1lbnQoKTt0aGlzLm1lbnVTZXJ2aWNlLnNob3dDb250ZXh0TWVudSh7bW91c2VFdmVudDplLHRvdWNoRXZlbnQ6dCxyb3dOb2RlOnIsY29sdW1uOm8sdmFsdWU6bixhbmNob3JUb0VsZW1lbnQ6bH0pfWdldENvbnRyb2xzRm9yRXZlbnRUYXJnZXQoZSl7cmV0dXJue2NlbGxDdHJsOnFlKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLGUseGEuRE9NX0RBVEFfS0VZX0NFTExfQ1RSTCkscm93Q3RybDpxZSh0aGlzLmdyaWRPcHRpb25zU2VydmljZSxlLE9hLkRPTV9EQVRBX0tFWV9ST1dfQ1RSTCl9fXByb2Nlc3NLZXlib2FyZEV2ZW50KGUsdCl7Y29uc3R7Y2VsbEN0cmw6aSxyb3dDdHJsOnN9PXRoaXMuZ2V0Q29udHJvbHNGb3JFdmVudFRhcmdldCh0LnRhcmdldCk7dC5kZWZhdWx0UHJldmVudGVkfHwoaT90aGlzLnByb2Nlc3NDZWxsS2V5Ym9hcmRFdmVudChpLGUsdCk6cyYmcy5pc0Z1bGxXaWR0aCgpJiZ0aGlzLnByb2Nlc3NGdWxsV2lkdGhSb3dLZXlib2FyZEV2ZW50KHMsZSx0KSl9cHJvY2Vzc0NlbGxLZXlib2FyZEV2ZW50KGUsdCxpKXtjb25zdCBzPWUuZ2V0Um93Tm9kZSgpLHI9ZS5nZXRDb2x1bW4oKSxvPWUuaXNFZGl0aW5nKCk7aWYoIXpzKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLGkscyxyLG8pJiYia2V5ZG93biI9PT10KXshbyYmdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5oYW5kbGVQYWdlU2Nyb2xsaW5nS2V5KGkpfHxlLm9uS2V5RG93bihpKSx0aGlzLmRvR3JpZE9wZXJhdGlvbnMoaSxlLmlzRWRpdGluZygpKSxVcyhpKSYmZS5wcm9jZXNzQ2hhcmFjdGVyKGkpfWlmKCJrZXlkb3duIj09PXQpe2NvbnN0IHQ9ZS5jcmVhdGVFdmVudChpLGx0LkVWRU5UX0NFTExfS0VZX0RPV04pO3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9fXByb2Nlc3NGdWxsV2lkdGhSb3dLZXlib2FyZEV2ZW50KGUsdCxpKXtjb25zdCBzPWUuZ2V0Um93Tm9kZSgpLHI9dGhpcy5mb2N1c1NlcnZpY2UuZ2V0Rm9jdXNlZENlbGwoKSxvPXImJnIuY29sdW1uO2lmKCF6cyh0aGlzLmdyaWRPcHRpb25zU2VydmljZSxpLHMsbywhMSkpe2NvbnN0IHM9aS5rZXk7aWYoImtleWRvd24iPT09dClzd2l0Y2gocyl7Y2FzZSBqcy5QQUdFX0hPTUU6Y2FzZSBqcy5QQUdFX0VORDpjYXNlIGpzLlBBR0VfVVA6Y2FzZSBqcy5QQUdFX0RPV046dGhpcy5uYXZpZ2F0aW9uU2VydmljZS5oYW5kbGVQYWdlU2Nyb2xsaW5nS2V5KGksITApO2JyZWFrO2Nhc2UganMuVVA6Y2FzZSBqcy5ET1dOOmUub25LZXlib2FyZE5hdmlnYXRlKGkpO2JyZWFrO2Nhc2UganMuVEFCOmUub25UYWJLZXlEb3duKGkpfX1pZigia2V5ZG93biI9PT10KXtjb25zdCB0PWUuY3JlYXRlUm93RXZlbnQobHQuRVZFTlRfQ0VMTF9LRVlfRE9XTixpKTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfX1kb0dyaWRPcGVyYXRpb25zKGUsdCl7aWYoIWUuY3RybEtleSYmIWUubWV0YUtleSlyZXR1cm47aWYodClyZXR1cm47aWYoIXRoaXMubW91c2VFdmVudFNlcnZpY2UuaXNFdmVudEZyb21UaGlzR3JpZChlKSlyZXR1cm47Y29uc3QgaT1ZcyhlKTtyZXR1cm4gaT09PWpzLkE/dGhpcy5vbkN0cmxBbmRBKGUpOmk9PT1qcy5DP3RoaXMub25DdHJsQW5kQyhlKTppPT09anMuRD90aGlzLm9uQ3RybEFuZEQoZSk6aT09PWpzLlY/dGhpcy5vbkN0cmxBbmRWKGUpOmk9PT1qcy5YP3RoaXMub25DdHJsQW5kWChlKTppPT09anMuWT90aGlzLm9uQ3RybEFuZFkoKTppPT09anMuWj90aGlzLm9uQ3RybEFuZFooZSk6dm9pZCAwfW9uQ3RybEFuZEEoZSl7Y29uc3R7cGlubmVkUm93TW9kZWw6dCxwYWdpbmF0aW9uUHJveHk6aSxyYW5nZVNlcnZpY2U6c309dGhpcztpZihzJiZpLmlzUm93c1RvUmVuZGVyKCkpe2NvbnN0W2UsaV09W3QuaXNFbXB0eSgidG9wIiksdC5pc0VtcHR5KCJib3R0b20iKV0scj1lP251bGw6InRvcCI7bGV0IG8sbjtpPyhvPW51bGwsbj10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRSb3dDb3VudCgpLTEpOihvPSJib3R0b20iLG49dC5nZXRQaW5uZWRCb3R0b21Sb3dEYXRhKCkubGVuZ3RoLTEpO2NvbnN0IGE9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCk7aWYoUihhKSlyZXR1cm47cy5zZXRDZWxsUmFuZ2Uoe3Jvd1N0YXJ0SW5kZXg6MCxyb3dTdGFydFBpbm5lZDpyLHJvd0VuZEluZGV4Om4scm93RW5kUGlubmVkOm8sY29sdW1uU3RhcnQ6YVswXSxjb2x1bW5FbmQ6T2UoYSl9KX1lLnByZXZlbnREZWZhdWx0KCl9b25DdHJsQW5kQyhlKXtpZighdGhpcy5jbGlwYm9hcmRTZXJ2aWNlfHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZUNlbGxUZXh0U2VsZWN0aW9uIikpcmV0dXJuO2NvbnN0e2NlbGxDdHJsOnQscm93Q3RybDppfT10aGlzLmdldENvbnRyb2xzRm9yRXZlbnRUYXJnZXQoZS50YXJnZXQpOyhudWxsPT10P3ZvaWQgMDp0LmlzRWRpdGluZygpKXx8KG51bGw9PWk/dm9pZCAwOmkuaXNFZGl0aW5nKCkpfHwoZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuY2xpcGJvYXJkU2VydmljZS5jb3B5VG9DbGlwYm9hcmQoKSl9b25DdHJsQW5kWChlKXtpZighdGhpcy5jbGlwYm9hcmRTZXJ2aWNlfHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZUNlbGxUZXh0U2VsZWN0aW9uIil8fHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NDdXRUb0NsaXBib2FyZCIpKXJldHVybjtjb25zdHtjZWxsQ3RybDp0LHJvd0N0cmw6aX09dGhpcy5nZXRDb250cm9sc0ZvckV2ZW50VGFyZ2V0KGUudGFyZ2V0KTsobnVsbD09dD92b2lkIDA6dC5pc0VkaXRpbmcoKSl8fChudWxsPT1pP3ZvaWQgMDppLmlzRWRpdGluZygpKXx8KGUucHJldmVudERlZmF1bHQoKSx0aGlzLmNsaXBib2FyZFNlcnZpY2UuY3V0VG9DbGlwYm9hcmQodm9pZCAwLCJ1aSIpKX1vbkN0cmxBbmRWKGUpe2NvbnN0e2NlbGxDdHJsOnQscm93Q3RybDppfT10aGlzLmdldENvbnRyb2xzRm9yRXZlbnRUYXJnZXQoZS50YXJnZXQpOyhudWxsPT10P3ZvaWQgMDp0LmlzRWRpdGluZygpKXx8KG51bGw9PWk/dm9pZCAwOmkuaXNFZGl0aW5nKCkpfHx0aGlzLmNsaXBib2FyZFNlcnZpY2UmJiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQ2xpcGJvYXJkUGFzdGUiKSYmdGhpcy5jbGlwYm9hcmRTZXJ2aWNlLnBhc3RlRnJvbUNsaXBib2FyZCgpfW9uQ3RybEFuZEQoZSl7dGhpcy5jbGlwYm9hcmRTZXJ2aWNlJiYhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0NsaXBib2FyZFBhc3RlIikmJnRoaXMuY2xpcGJvYXJkU2VydmljZS5jb3B5UmFuZ2VEb3duKCksZS5wcmV2ZW50RGVmYXVsdCgpfW9uQ3RybEFuZFooZSl7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ1bmRvUmVkb0NlbGxFZGl0aW5nIikmJihlLnByZXZlbnREZWZhdWx0KCksZS5zaGlmdEtleT90aGlzLnVuZG9SZWRvU2VydmljZS5yZWRvKCJ1aSIpOnRoaXMudW5kb1JlZG9TZXJ2aWNlLnVuZG8oInVpIikpfW9uQ3RybEFuZFkoKXt0aGlzLnVuZG9SZWRvU2VydmljZS5yZWRvKCJ1aSIpfX1BYShbY2UoIm1vdXNlRXZlbnRTZXJ2aWNlIildLFBhLnByb3RvdHlwZSwibW91c2VFdmVudFNlcnZpY2UiLHZvaWQgMCksQWEoW2NlKCJ2YWx1ZVNlcnZpY2UiKV0sUGEucHJvdG90eXBlLCJ2YWx1ZVNlcnZpY2UiLHZvaWQgMCksQWEoW2NlKCJtZW51U2VydmljZSIpXSxQYS5wcm90b3R5cGUsIm1lbnVTZXJ2aWNlIix2b2lkIDApLEFhKFtjZSgiY3RybHNTZXJ2aWNlIildLFBhLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLEFhKFtjZSgibmF2aWdhdGlvblNlcnZpY2UiKV0sUGEucHJvdG90eXBlLCJuYXZpZ2F0aW9uU2VydmljZSIsdm9pZCAwKSxBYShbY2UoImZvY3VzU2VydmljZSIpXSxQYS5wcm90b3R5cGUsImZvY3VzU2VydmljZSIsdm9pZCAwKSxBYShbY2UoInVuZG9SZWRvU2VydmljZSIpXSxQYS5wcm90b3R5cGUsInVuZG9SZWRvU2VydmljZSIsdm9pZCAwKSxBYShbY2UoImNvbHVtbk1vZGVsIildLFBhLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksQWEoW2NlKCJwYWdpbmF0aW9uUHJveHkiKV0sUGEucHJvdG90eXBlLCJwYWdpbmF0aW9uUHJveHkiLHZvaWQgMCksQWEoW2NlKCJwaW5uZWRSb3dNb2RlbCIpXSxQYS5wcm90b3R5cGUsInBpbm5lZFJvd01vZGVsIix2b2lkIDApLEFhKFtoZSgicmFuZ2VTZXJ2aWNlIildLFBhLnByb3RvdHlwZSwicmFuZ2VTZXJ2aWNlIix2b2lkIDApLEFhKFtoZSgiY2xpcGJvYXJkU2VydmljZSIpXSxQYS5wcm90b3R5cGUsImNsaXBib2FyZFNlcnZpY2UiLHZvaWQgMCksQWEoW2FlXSxQYS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBNYT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBMYSBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5jZW50ZXJDb250YWluZXJDdHJsPWV9cG9zdENvbnN0cnVjdCgpe3RoaXMuY3RybHNTZXJ2aWNlLndoZW5SZWFkeSgoKT0+e3RoaXMuZ3JpZEJvZHlDdHJsPXRoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLHRoaXMubGlzdGVuRm9yUmVzaXplKCl9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9TQ1JPTExCQVJfV0lEVEhfQ0hBTkdFRCx0aGlzLm9uU2Nyb2xsYmFyV2lkdGhDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXJzKFsiYWx3YXlzU2hvd0hvcml6b250YWxTY3JvbGwiLCJhbHdheXNTaG93VmVydGljYWxTY3JvbGwiXSwoKT0+e3RoaXMuY2hlY2tWaWV3cG9ydEFuZFNjcm9sbHMoKX0pfWxpc3RlbkZvclJlc2l6ZSgpe2NvbnN0IGU9KCk9PnRoaXMub25DZW50ZXJWaWV3cG9ydFJlc2l6ZWQoKTt0aGlzLmNlbnRlckNvbnRhaW5lckN0cmwucmVnaXN0ZXJWaWV3cG9ydFJlc2l6ZUxpc3RlbmVyKGUpLHRoaXMuZ3JpZEJvZHlDdHJsLnJlZ2lzdGVyQm9keVZpZXdwb3J0UmVzaXplTGlzdGVuZXIoZSl9b25TY3JvbGxiYXJXaWR0aENoYW5nZWQoKXt0aGlzLmNoZWNrVmlld3BvcnRBbmRTY3JvbGxzKCl9b25DZW50ZXJWaWV3cG9ydFJlc2l6ZWQoKXtpZih0aGlzLmNlbnRlckNvbnRhaW5lckN0cmwuaXNWaWV3cG9ydEluVGhlRE9NVHJlZSgpKXt0aGlzLmtlZXBQaW5uZWRDb2x1bW5zTmFycm93ZXJUaGFuVmlld3BvcnQoKSx0aGlzLmNoZWNrVmlld3BvcnRBbmRTY3JvbGxzKCk7Y29uc3QgZT10aGlzLmNlbnRlckNvbnRhaW5lckN0cmwuZ2V0Q2VudGVyV2lkdGgoKTtlIT09dGhpcy5jZW50ZXJXaWR0aCYmKHRoaXMuY2VudGVyV2lkdGg9ZSx0aGlzLmNvbHVtbk1vZGVsLnJlZnJlc2hGbGV4ZWRDb2x1bW5zKHt2aWV3cG9ydFdpZHRoOnRoaXMuY2VudGVyV2lkdGgsdXBkYXRlQm9keVdpZHRoczohMCxmaXJlUmVzaXplZEV2ZW50OiEwfSkpfWVsc2UgdGhpcy5ib2R5SGVpZ2h0PTB9a2VlcFBpbm5lZENvbHVtbnNOYXJyb3dlclRoYW5WaWV3cG9ydCgpe2NvbnN0IGU9bHModGhpcy5ncmlkQm9keUN0cmwuZ2V0Qm9keVZpZXdwb3J0RWxlbWVudCgpKTtpZihlPD01MClyZXR1cm47bGV0IHQ9dGhpcy5nZXRQaW5uZWRDb2x1bW5zT3ZlcmZsb3dpbmdWaWV3cG9ydChlLTUwKTtjb25zdCBpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJwcm9jZXNzVW5waW5uZWRDb2x1bW5zIik7aWYodC5sZW5ndGgpe2lmKGkpe3Q9aSh7Y29sdW1uczp0LHZpZXdwb3J0V2lkdGg6ZX0pfXRoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uc1Bpbm5lZCh0LG51bGwsInZpZXdwb3J0U2l6ZUZlYXR1cmUiKX19Z2V0UGlubmVkQ29sdW1uc092ZXJmbG93aW5nVmlld3BvcnQoZSl7Y29uc3QgdD10aGlzLnBpbm5lZFdpZHRoU2VydmljZS5nZXRQaW5uZWRSaWdodFdpZHRoKCkrdGhpcy5waW5uZWRXaWR0aFNlcnZpY2UuZ2V0UGlubmVkTGVmdFdpZHRoKCk7aWYodDxlKXJldHVybltdO2NvbnN0IGk9Wy4uLnRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheWVkTGVmdENvbHVtbnMoKV0scz1bLi4udGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5ZWRSaWdodENvbHVtbnMoKV07bGV0IHI9MCxvPTA7Y29uc3Qgbj1bXTtsZXQgYT10LTAtZTtmb3IoOyhvPGkubGVuZ3RofHxyPHMubGVuZ3RoKSYmYT4wOyl7aWYocjxzLmxlbmd0aCl7Y29uc3QgZT1zW3IrK107YS09ZS5nZXRBY3R1YWxXaWR0aCgpLG4ucHVzaChlKX1pZihvPGkubGVuZ3RoJiZhPjApe2NvbnN0IGU9aVtvKytdO2EtPWUuZ2V0QWN0dWFsV2lkdGgoKSxuLnB1c2goZSl9fXJldHVybiBufWNoZWNrVmlld3BvcnRBbmRTY3JvbGxzKCl7dGhpcy51cGRhdGVTY3JvbGxWaXNpYmxlU2VydmljZSgpLHRoaXMuY2hlY2tCb2R5SGVpZ2h0KCksdGhpcy5vbkhvcml6b250YWxWaWV3cG9ydENoYW5nZWQoKSx0aGlzLmdyaWRCb2R5Q3RybC5nZXRTY3JvbGxGZWF0dXJlKCkuY2hlY2tTY3JvbGxMZWZ0KCl9Z2V0Qm9keUhlaWdodCgpe3JldHVybiB0aGlzLmJvZHlIZWlnaHR9Y2hlY2tCb2R5SGVpZ2h0KCl7Y29uc3QgZT1hcyh0aGlzLmdyaWRCb2R5Q3RybC5nZXRCb2R5Vmlld3BvcnRFbGVtZW50KCkpO2lmKHRoaXMuYm9keUhlaWdodCE9PWUpe3RoaXMuYm9keUhlaWdodD1lO2NvbnN0IHQ9e3R5cGU6bHQuRVZFTlRfQk9EWV9IRUlHSFRfQ0hBTkdFRH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KX19dXBkYXRlU2Nyb2xsVmlzaWJsZVNlcnZpY2UoKXt0aGlzLnVwZGF0ZVNjcm9sbFZpc2libGVTZXJ2aWNlSW1wbCgpLHNldFRpbWVvdXQodGhpcy51cGRhdGVTY3JvbGxWaXNpYmxlU2VydmljZUltcGwuYmluZCh0aGlzKSw1MDApfXVwZGF0ZVNjcm9sbFZpc2libGVTZXJ2aWNlSW1wbCgpe2NvbnN0IGU9e2hvcml6b250YWxTY3JvbGxTaG93aW5nOnRoaXMuaXNIb3Jpem9udGFsU2Nyb2xsU2hvd2luZygpLHZlcnRpY2FsU2Nyb2xsU2hvd2luZzp0aGlzLmdyaWRCb2R5Q3RybC5pc1ZlcnRpY2FsU2Nyb2xsU2hvd2luZygpfTt0aGlzLnNjcm9sbFZpc2libGVTZXJ2aWNlLnNldFNjcm9sbHNWaXNpYmxlKGUpfWlzSG9yaXpvbnRhbFNjcm9sbFNob3dpbmcoKXtyZXR1cm4gdGhpcy5jZW50ZXJDb250YWluZXJDdHJsLmlzSG9yaXpvbnRhbFNjcm9sbFNob3dpbmcoKX1vbkhvcml6b250YWxWaWV3cG9ydENoYW5nZWQoKXtjb25zdCBlPXRoaXMuY2VudGVyQ29udGFpbmVyQ3RybC5nZXRDZW50ZXJXaWR0aCgpLHQ9dGhpcy5jZW50ZXJDb250YWluZXJDdHJsLmdldFZpZXdwb3J0U2Nyb2xsTGVmdCgpO3RoaXMuY29sdW1uTW9kZWwuc2V0Vmlld3BvcnRQb3NpdGlvbihlLHQpfX1NYShbY2UoImN0cmxzU2VydmljZSIpXSxMYS5wcm90b3R5cGUsImN0cmxzU2VydmljZSIsdm9pZCAwKSxNYShbY2UoInBpbm5lZFdpZHRoU2VydmljZSIpXSxMYS5wcm90b3R5cGUsInBpbm5lZFdpZHRoU2VydmljZSIsdm9pZCAwKSxNYShbY2UoImNvbHVtbk1vZGVsIildLExhLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksTWEoW2NlKCJzY3JvbGxWaXNpYmxlU2VydmljZSIpXSxMYS5wcm90b3R5cGUsInNjcm9sbFZpc2libGVTZXJ2aWNlIix2b2lkIDApLE1hKFthZV0sTGEucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgRmE9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgSWEgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuZWxlbWVudD1lfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9MRUZUX1BJTk5FRF9XSURUSF9DSEFOR0VELHRoaXMub25QaW5uZWRMZWZ0V2lkdGhDaGFuZ2VkLmJpbmQodGhpcykpfW9uUGlubmVkTGVmdFdpZHRoQ2hhbmdlZCgpe2NvbnN0IGU9dGhpcy5waW5uZWRXaWR0aFNlcnZpY2UuZ2V0UGlubmVkTGVmdFdpZHRoKCksdD1lPjA7aXModGhpcy5lbGVtZW50LHQpLERzKHRoaXMuZWxlbWVudCxlKX1nZXRXaWR0aCgpe3JldHVybiB0aGlzLnBpbm5lZFdpZHRoU2VydmljZS5nZXRQaW5uZWRMZWZ0V2lkdGgoKX19RmEoW2NlKCJwaW5uZWRXaWR0aFNlcnZpY2UiKV0sSWEucHJvdG90eXBlLCJwaW5uZWRXaWR0aFNlcnZpY2UiLHZvaWQgMCksRmEoW2FlXSxJYS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBOYT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBHYSBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5lbGVtZW50PWV9cG9zdENvbnN0cnVjdCgpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1JJR0hUX1BJTk5FRF9XSURUSF9DSEFOR0VELHRoaXMub25QaW5uZWRSaWdodFdpZHRoQ2hhbmdlZC5iaW5kKHRoaXMpKX1vblBpbm5lZFJpZ2h0V2lkdGhDaGFuZ2VkKCl7Y29uc3QgZT10aGlzLnBpbm5lZFdpZHRoU2VydmljZS5nZXRQaW5uZWRSaWdodFdpZHRoKCksdD1lPjA7aXModGhpcy5lbGVtZW50LHQpLERzKHRoaXMuZWxlbWVudCxlKX1nZXRXaWR0aCgpe3JldHVybiB0aGlzLnBpbm5lZFdpZHRoU2VydmljZS5nZXRQaW5uZWRSaWdodFdpZHRoKCl9fU5hKFtjZSgicGlubmVkV2lkdGhTZXJ2aWNlIildLEdhLnByb3RvdHlwZSwicGlubmVkV2lkdGhTZXJ2aWNlIix2b2lkIDApLE5hKFthZV0sR2EucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIga2E9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgX2EgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCksdGhpcy5lQ29udGFpbmVyPWUsdGhpcy5lVmlld3BvcnQ9dH1wb3N0Q29uc3RydWN0KCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfUk9XX0NPTlRBSU5FUl9IRUlHSFRfQ0hBTkdFRCx0aGlzLm9uSGVpZ2h0Q2hhbmdlZC5iaW5kKHRoaXMpKX1vbkhlaWdodENoYW5nZWQoKXtjb25zdCBlPXRoaXMubWF4RGl2SGVpZ2h0U2NhbGVyLmdldFVpQ29udGFpbmVySGVpZ2h0KCksdD1udWxsIT1lP2UrInB4IjoiIjt0aGlzLmVDb250YWluZXIuc3R5bGUuaGVpZ2h0PXQsdGhpcy5lVmlld3BvcnQmJih0aGlzLmVWaWV3cG9ydC5zdHlsZS5oZWlnaHQ9dCl9fWthKFtjZSgicm93Q29udGFpbmVySGVpZ2h0U2VydmljZSIpXSxfYS5wcm90b3R5cGUsIm1heERpdkhlaWdodFNjYWxlciIsdm9pZCAwKSxrYShbYWVdLF9hLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIFZhPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIEJhIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmVDb250YWluZXI9ZX1wb3N0Q29uc3RydWN0KCl7aWYoRSh0aGlzLnJhbmdlU2VydmljZSkpcmV0dXJuO3RoaXMucGFyYW1zPXtlRWxlbWVudDp0aGlzLmVDb250YWluZXIsb25EcmFnU3RhcnQ6dGhpcy5yYW5nZVNlcnZpY2Uub25EcmFnU3RhcnQuYmluZCh0aGlzLnJhbmdlU2VydmljZSksb25EcmFnU3RvcDp0aGlzLnJhbmdlU2VydmljZS5vbkRyYWdTdG9wLmJpbmQodGhpcy5yYW5nZVNlcnZpY2UpLG9uRHJhZ2dpbmc6dGhpcy5yYW5nZVNlcnZpY2Uub25EcmFnZ2luZy5iaW5kKHRoaXMucmFuZ2VTZXJ2aWNlKX0sdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiZW5hYmxlUmFuZ2VTZWxlY3Rpb24iLGU9PntlLmN1cnJlbnRWYWx1ZT90aGlzLmVuYWJsZUZlYXR1cmUoKTp0aGlzLmRpc2FibGVGZWF0dXJlKCl9KSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT50aGlzLmRpc2FibGVGZWF0dXJlKCkpO3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUmFuZ2VTZWxlY3Rpb24iKSYmdGhpcy5lbmFibGVGZWF0dXJlKCl9ZW5hYmxlRmVhdHVyZSgpe3RoaXMuZHJhZ1NlcnZpY2UuYWRkRHJhZ1NvdXJjZSh0aGlzLnBhcmFtcyl9ZGlzYWJsZUZlYXR1cmUoKXt0aGlzLmRyYWdTZXJ2aWNlLnJlbW92ZURyYWdTb3VyY2UodGhpcy5wYXJhbXMpfX1WYShbaGUoInJhbmdlU2VydmljZSIpXSxCYS5wcm90b3R5cGUsInJhbmdlU2VydmljZSIsdm9pZCAwKSxWYShbY2UoImRyYWdTZXJ2aWNlIildLEJhLnByb3RvdHlwZSwiZHJhZ1NlcnZpY2UiLHZvaWQgMCksVmEoW2FlXSxCYS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBIYT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBXYSBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUsdD0hMSl7c3VwZXIoKSx0aGlzLmNhbGxiYWNrPWUsdGhpcy5hZGRTcGFjZXI9dH1wb3N0Q29uc3RydWN0KCl7Y29uc3QgZT10aGlzLnNldFdpZHRoLmJpbmQodGhpcyk7dGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiZG9tTGF5b3V0IixlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fQ09OVEFJTkVSX1dJRFRIX0NIQU5HRUQsZSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRElTUExBWUVEX0NPTFVNTlNfQ0hBTkdFRCxlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9MRUZUX1BJTk5FRF9XSURUSF9DSEFOR0VELGUpLHRoaXMuYWRkU3BhY2VyJiYodGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfUklHSFRfUElOTkVEX1dJRFRIX0NIQU5HRUQsZSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfU0NST0xMX1ZJU0lCSUxJVFlfQ0hBTkdFRCxlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9TQ1JPTExCQVJfV0lEVEhfQ0hBTkdFRCxlKSksdGhpcy5zZXRXaWR0aCgpfXNldFdpZHRoKCl7Y29uc3R7Y29sdW1uTW9kZWw6ZX09dGhpcyx0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzRG9tTGF5b3V0KCJwcmludCIpLGk9ZS5nZXRCb2R5Q29udGFpbmVyV2lkdGgoKSxzPWUuZ2V0RGlzcGxheWVkQ29sdW1uc0xlZnRXaWR0aCgpLHI9ZS5nZXREaXNwbGF5ZWRDb2x1bW5zUmlnaHRXaWR0aCgpO2xldCBvO2lmKHQpbz1pK3MrcjtlbHNlIGlmKG89aSx0aGlzLmFkZFNwYWNlcil7MD09PSh0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpP3M6cikmJnRoaXMuc2Nyb2xsVmlzaWJsZVNlcnZpY2UuaXNWZXJ0aWNhbFNjcm9sbFNob3dpbmcoKSYmKG8rPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFNjcm9sbGJhcldpZHRoKCkpfXRoaXMuY2FsbGJhY2sobyl9fUhhKFtjZSgiY29sdW1uTW9kZWwiKV0sV2EucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxIYShbY2UoInNjcm9sbFZpc2libGVTZXJ2aWNlIildLFdhLnByb3RvdHlwZSwic2Nyb2xsVmlzaWJsZVNlcnZpY2UiLHZvaWQgMCksSGEoW2FlXSxXYS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBqYSxVYSx6YT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtmdW5jdGlvbiBLYShlKXtzd2l0Y2goZSl7Y2FzZSBqYS5DRU5URVI6Y2FzZSBqYS5UT1BfQ0VOVEVSOmNhc2UgamEuU1RJQ0tZX1RPUF9DRU5URVI6Y2FzZSBqYS5CT1RUT01fQ0VOVEVSOnJldHVybiBVYS5DRU5URVI7Y2FzZSBqYS5MRUZUOmNhc2UgamEuVE9QX0xFRlQ6Y2FzZSBqYS5TVElDS1lfVE9QX0xFRlQ6Y2FzZSBqYS5CT1RUT01fTEVGVDpyZXR1cm4gVWEuTEVGVDtjYXNlIGphLlJJR0hUOmNhc2UgamEuVE9QX1JJR0hUOmNhc2UgamEuU1RJQ0tZX1RPUF9SSUdIVDpjYXNlIGphLkJPVFRPTV9SSUdIVDpyZXR1cm4gVWEuUklHSFQ7Y2FzZSBqYS5GVUxMX1dJRFRIOmNhc2UgamEuVE9QX0ZVTExfV0lEVEg6Y2FzZSBqYS5TVElDS1lfVE9QX0ZVTExfV0lEVEg6Y2FzZSBqYS5CT1RUT01fRlVMTF9XSURUSDpyZXR1cm4gVWEuRlVMTF9XSURUSDtkZWZhdWx0OnRocm93IEVycm9yKCJJbnZhbGlkIFJvdyBDb250YWluZXIgVHlwZSIpfX0hZnVuY3Rpb24oZSl7ZS5MRUZUPSJsZWZ0IixlLlJJR0hUPSJyaWdodCIsZS5DRU5URVI9ImNlbnRlciIsZS5GVUxMX1dJRFRIPSJmdWxsV2lkdGgiLGUuVE9QX0xFRlQ9InRvcExlZnQiLGUuVE9QX1JJR0hUPSJ0b3BSaWdodCIsZS5UT1BfQ0VOVEVSPSJ0b3BDZW50ZXIiLGUuVE9QX0ZVTExfV0lEVEg9InRvcEZ1bGxXaWR0aCIsZS5TVElDS1lfVE9QX0xFRlQ9InN0aWNreVRvcExlZnQiLGUuU1RJQ0tZX1RPUF9SSUdIVD0ic3RpY2t5VG9wUmlnaHQiLGUuU1RJQ0tZX1RPUF9DRU5URVI9InN0aWNreVRvcENlbnRlciIsZS5TVElDS1lfVE9QX0ZVTExfV0lEVEg9InN0aWNreVRvcEZ1bGxXaWR0aCIsZS5CT1RUT01fTEVGVD0iYm90dG9tTGVmdCIsZS5CT1RUT01fUklHSFQ9ImJvdHRvbVJpZ2h0IixlLkJPVFRPTV9DRU5URVI9ImJvdHRvbUNlbnRlciIsZS5CT1RUT01fRlVMTF9XSURUSD0iYm90dG9tRnVsbFdpZHRoIn0oamF8fChqYT17fSkpLGZ1bmN0aW9uKGUpe2UuTEVGVD0ibGVmdCIsZS5SSUdIVD0icmlnaHQiLGUuQ0VOVEVSPSJjZW50ZXIiLGUuRlVMTF9XSURUSD0iZnVsbFdpZHRoIn0oVWF8fChVYT17fSkpO2NvbnN0IFlhPXl0KFtbamEuQ0VOVEVSLCJhZy1jZW50ZXItY29scy1jb250YWluZXIiXSxbamEuTEVGVCwiYWctcGlubmVkLWxlZnQtY29scy1jb250YWluZXIiXSxbamEuUklHSFQsImFnLXBpbm5lZC1yaWdodC1jb2xzLWNvbnRhaW5lciJdLFtqYS5GVUxMX1dJRFRILCJhZy1mdWxsLXdpZHRoLWNvbnRhaW5lciJdLFtqYS5UT1BfQ0VOVEVSLCJhZy1mbG9hdGluZy10b3AtY29udGFpbmVyIl0sW2phLlRPUF9MRUZULCJhZy1waW5uZWQtbGVmdC1mbG9hdGluZy10b3AiXSxbamEuVE9QX1JJR0hULCJhZy1waW5uZWQtcmlnaHQtZmxvYXRpbmctdG9wIl0sW2phLlRPUF9GVUxMX1dJRFRILCJhZy1mbG9hdGluZy10b3AtZnVsbC13aWR0aC1jb250YWluZXIiXSxbamEuU1RJQ0tZX1RPUF9DRU5URVIsImFnLXN0aWNreS10b3AtY29udGFpbmVyIl0sW2phLlNUSUNLWV9UT1BfTEVGVCwiYWctcGlubmVkLWxlZnQtc3RpY2t5LXRvcCJdLFtqYS5TVElDS1lfVE9QX1JJR0hULCJhZy1waW5uZWQtcmlnaHQtc3RpY2t5LXRvcCJdLFtqYS5TVElDS1lfVE9QX0ZVTExfV0lEVEgsImFnLXN0aWNreS10b3AtZnVsbC13aWR0aC1jb250YWluZXIiXSxbamEuQk9UVE9NX0NFTlRFUiwiYWctZmxvYXRpbmctYm90dG9tLWNvbnRhaW5lciJdLFtqYS5CT1RUT01fTEVGVCwiYWctcGlubmVkLWxlZnQtZmxvYXRpbmctYm90dG9tIl0sW2phLkJPVFRPTV9SSUdIVCwiYWctcGlubmVkLXJpZ2h0LWZsb2F0aW5nLWJvdHRvbSJdLFtqYS5CT1RUT01fRlVMTF9XSURUSCwiYWctZmxvYXRpbmctYm90dG9tLWZ1bGwtd2lkdGgtY29udGFpbmVyIl1dKSwkYT15dChbW2phLkNFTlRFUiwiYWctY2VudGVyLWNvbHMtdmlld3BvcnQiXSxbamEuVE9QX0NFTlRFUiwiYWctZmxvYXRpbmctdG9wLXZpZXdwb3J0Il0sW2phLlNUSUNLWV9UT1BfQ0VOVEVSLCJhZy1zdGlja3ktdG9wLXZpZXdwb3J0Il0sW2phLkJPVFRPTV9DRU5URVIsImFnLWZsb2F0aW5nLWJvdHRvbS12aWV3cG9ydCJdXSk7Y2xhc3MgWGEgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMudmlzaWJsZT0hMCx0aGlzLkVNUFRZX0NUUkxTPVtdLHRoaXMubmFtZT1lLHRoaXMuaXNGdWxsV2l0aENvbnRhaW5lcj10aGlzLm5hbWU9PT1qYS5UT1BfRlVMTF9XSURUSHx8dGhpcy5uYW1lPT09amEuU1RJQ0tZX1RPUF9GVUxMX1dJRFRIfHx0aGlzLm5hbWU9PT1qYS5CT1RUT01fRlVMTF9XSURUSHx8dGhpcy5uYW1lPT09amEuRlVMTF9XSURUSH1zdGF0aWMgZ2V0Um93Q29udGFpbmVyQ3NzQ2xhc3NlcyhlKXtyZXR1cm57Y29udGFpbmVyOllhLmdldChlKSx2aWV3cG9ydDokYS5nZXQoZSl9fXN0YXRpYyBnZXRQaW5uZWQoZSl7c3dpdGNoKGUpe2Nhc2UgamEuQk9UVE9NX0xFRlQ6Y2FzZSBqYS5UT1BfTEVGVDpjYXNlIGphLlNUSUNLWV9UT1BfTEVGVDpjYXNlIGphLkxFRlQ6cmV0dXJuImxlZnQiO2Nhc2UgamEuQk9UVE9NX1JJR0hUOmNhc2UgamEuVE9QX1JJR0hUOmNhc2UgamEuU1RJQ0tZX1RPUF9SSUdIVDpjYXNlIGphLlJJR0hUOnJldHVybiJyaWdodCI7ZGVmYXVsdDpyZXR1cm4gbnVsbH19cG9zdENvbnN0cnVjdCgpe3RoaXMuZW5hYmxlUnRsPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIiksdGhpcy5mb3JDb250YWluZXJzKFtqYS5DRU5URVJdLCgpPT50aGlzLnZpZXdwb3J0U2l6ZUZlYXR1cmU9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgTGEodGhpcykpKX1yZWdpc3RlcldpdGhDdHJsc1NlcnZpY2UoKXtzd2l0Y2godGhpcy5uYW1lKXtjYXNlIGphLkNFTlRFUjp0aGlzLmN0cmxzU2VydmljZS5yZWdpc3RlckNlbnRlclJvd0NvbnRhaW5lckN0cmwodGhpcyk7YnJlYWs7Y2FzZSBqYS5MRUZUOnRoaXMuY3RybHNTZXJ2aWNlLnJlZ2lzdGVyTGVmdFJvd0NvbnRhaW5lckN0cmwodGhpcyk7YnJlYWs7Y2FzZSBqYS5SSUdIVDp0aGlzLmN0cmxzU2VydmljZS5yZWdpc3RlclJpZ2h0Um93Q29udGFpbmVyQ3RybCh0aGlzKTticmVhaztjYXNlIGphLlRPUF9DRU5URVI6dGhpcy5jdHJsc1NlcnZpY2UucmVnaXN0ZXJUb3BDZW50ZXJSb3dDb250YWluZXJDdHJsKHRoaXMpO2JyZWFrO2Nhc2UgamEuVE9QX0xFRlQ6dGhpcy5jdHJsc1NlcnZpY2UucmVnaXN0ZXJUb3BMZWZ0Um93Q29udGFpbmVyQ29uKHRoaXMpO2JyZWFrO2Nhc2UgamEuVE9QX1JJR0hUOnRoaXMuY3RybHNTZXJ2aWNlLnJlZ2lzdGVyVG9wUmlnaHRSb3dDb250YWluZXJDdHJsKHRoaXMpO2JyZWFrO2Nhc2UgamEuU1RJQ0tZX1RPUF9DRU5URVI6dGhpcy5jdHJsc1NlcnZpY2UucmVnaXN0ZXJTdGlja3lUb3BDZW50ZXJSb3dDb250YWluZXJDdHJsKHRoaXMpO2JyZWFrO2Nhc2UgamEuU1RJQ0tZX1RPUF9MRUZUOnRoaXMuY3RybHNTZXJ2aWNlLnJlZ2lzdGVyU3RpY2t5VG9wTGVmdFJvd0NvbnRhaW5lckNvbih0aGlzKTticmVhaztjYXNlIGphLlNUSUNLWV9UT1BfUklHSFQ6dGhpcy5jdHJsc1NlcnZpY2UucmVnaXN0ZXJTdGlja3lUb3BSaWdodFJvd0NvbnRhaW5lckN0cmwodGhpcyk7YnJlYWs7Y2FzZSBqYS5CT1RUT01fQ0VOVEVSOnRoaXMuY3RybHNTZXJ2aWNlLnJlZ2lzdGVyQm90dG9tQ2VudGVyUm93Q29udGFpbmVyQ3RybCh0aGlzKTticmVhaztjYXNlIGphLkJPVFRPTV9MRUZUOnRoaXMuY3RybHNTZXJ2aWNlLnJlZ2lzdGVyQm90dG9tTGVmdFJvd0NvbnRhaW5lckN0cmwodGhpcyk7YnJlYWs7Y2FzZSBqYS5CT1RUT01fUklHSFQ6dGhpcy5jdHJsc1NlcnZpY2UucmVnaXN0ZXJCb3R0b21SaWdodFJvd0NvbnRhaW5lckN0cmwodGhpcyl9fWZvckNvbnRhaW5lcnMoZSx0KXtlLmluZGV4T2YodGhpcy5uYW1lKT49MCYmdCgpfWdldENvbnRhaW5lckVsZW1lbnQoKXtyZXR1cm4gdGhpcy5lQ29udGFpbmVyfWdldFZpZXdwb3J0U2l6ZUZlYXR1cmUoKXtyZXR1cm4gdGhpcy52aWV3cG9ydFNpemVGZWF0dXJlfXNldENvbXAoZSx0LGkpe3RoaXMuY29tcD1lLHRoaXMuZUNvbnRhaW5lcj10LHRoaXMuZVZpZXdwb3J0PWksdGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgUGEodGhpcy5lQ29udGFpbmVyKSksdGhpcy5hZGRQcmV2ZW50U2Nyb2xsV2hpbGVEcmFnZ2luZygpLHRoaXMubGlzdGVuT25Eb21PcmRlcigpLHRoaXMuc3RvcEhTY3JvbGxPblBpbm5lZFJvd3MoKTtjb25zdCBzPVtqYS5UT1BfQ0VOVEVSLGphLlRPUF9MRUZULGphLlRPUF9SSUdIVF0scj1bamEuU1RJQ0tZX1RPUF9DRU5URVIsamEuU1RJQ0tZX1RPUF9MRUZULGphLlNUSUNLWV9UT1BfUklHSFRdLG89Wy4uLnMsLi4uW2phLkJPVFRPTV9DRU5URVIsamEuQk9UVE9NX0xFRlQsamEuQk9UVE9NX1JJR0hUXSwuLi5bamEuQ0VOVEVSLGphLkxFRlQsamEuUklHSFRdLC4uLnJdLG49W2phLkNFTlRFUixqYS5MRUZULGphLlJJR0hULGphLkZVTExfV0lEVEhdLGE9W2phLkNFTlRFUixqYS5UT1BfQ0VOVEVSLGphLlNUSUNLWV9UT1BfQ0VOVEVSLGphLkJPVFRPTV9DRU5URVJdLGw9W2phLkxFRlQsamEuQk9UVE9NX0xFRlQsamEuVE9QX0xFRlQsamEuU1RJQ0tZX1RPUF9MRUZUXSxkPVtqYS5SSUdIVCxqYS5CT1RUT01fUklHSFQsamEuVE9QX1JJR0hULGphLlNUSUNLWV9UT1BfUklHSFRdO3RoaXMuZm9yQ29udGFpbmVycyhsLCgpPT57dGhpcy5waW5uZWRXaWR0aEZlYXR1cmU9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgSWEodGhpcy5lQ29udGFpbmVyKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfTEVGVF9QSU5ORURfV0lEVEhfQ0hBTkdFRCwoKT0+dGhpcy5vblBpbm5lZFdpZHRoQ2hhbmdlZCgpKX0pLHRoaXMuZm9yQ29udGFpbmVycyhkLCgpPT57dGhpcy5waW5uZWRXaWR0aEZlYXR1cmU9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgR2EodGhpcy5lQ29udGFpbmVyKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfUklHSFRfUElOTkVEX1dJRFRIX0NIQU5HRUQsKCk9PnRoaXMub25QaW5uZWRXaWR0aENoYW5nZWQoKSl9KSx0aGlzLmZvckNvbnRhaW5lcnMobiwoKT0+dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgX2EodGhpcy5lQ29udGFpbmVyLHRoaXMubmFtZT09PWphLkNFTlRFUj9pOnZvaWQgMCkpKSx0aGlzLmZvckNvbnRhaW5lcnMobywoKT0+dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgQmEodGhpcy5lQ29udGFpbmVyKSkpLHRoaXMuZm9yQ29udGFpbmVycyhhLCgpPT50aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBXYShlPT50aGlzLmNvbXAuc2V0Q29udGFpbmVyV2lkdGgoZSsicHgiKSkpKSx0aGlzLmFkZExpc3RlbmVycygpLHRoaXMucmVnaXN0ZXJXaXRoQ3RybHNTZXJ2aWNlKCl9YWRkTGlzdGVuZXJzKCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRElTUExBWUVEX0NPTFVNTlNfQ0hBTkdFRCwoKT0+dGhpcy5vbkRpc3BsYXllZENvbHVtbnNDaGFuZ2VkKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0RJU1BMQVlFRF9DT0xVTU5TX1dJRFRIX0NIQU5HRUQsKCk9PnRoaXMub25EaXNwbGF5ZWRDb2x1bW5zV2lkdGhDaGFuZ2VkKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0RJU1BMQVlFRF9ST1dTX0NIQU5HRUQsZT0+dGhpcy5vbkRpc3BsYXllZFJvd3NDaGFuZ2VkKGUuYWZ0ZXJTY3JvbGwpKSx0aGlzLm9uRGlzcGxheWVkQ29sdW1uc0NoYW5nZWQoKSx0aGlzLm9uRGlzcGxheWVkQ29sdW1uc1dpZHRoQ2hhbmdlZCgpLHRoaXMub25EaXNwbGF5ZWRSb3dzQ2hhbmdlZCgpfWxpc3Rlbk9uRG9tT3JkZXIoKXtpZihbamEuU1RJQ0tZX1RPUF9DRU5URVIsamEuU1RJQ0tZX1RPUF9MRUZULGphLlNUSUNLWV9UT1BfUklHSFQsamEuU1RJQ0tZX1RPUF9GVUxMX1dJRFRIXS5pbmRleE9mKHRoaXMubmFtZSk+PTApcmV0dXJuIHZvaWQgdGhpcy5jb21wLnNldERvbU9yZGVyKCEwKTtjb25zdCBlPSgpPT57Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuc3VyZURvbU9yZGVyIiksdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0RvbUxheW91dCgicHJpbnQiKTt0aGlzLmNvbXAuc2V0RG9tT3JkZXIoZXx8dCl9O3RoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoImRvbUxheW91dCIsZSksZSgpfXN0b3BIU2Nyb2xsT25QaW5uZWRSb3dzKCl7dGhpcy5mb3JDb250YWluZXJzKFtqYS5UT1BfQ0VOVEVSLGphLlNUSUNLWV9UT1BfQ0VOVEVSLGphLkJPVFRPTV9DRU5URVJdLCgpPT57dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lVmlld3BvcnQsInNjcm9sbCIsKCk9PnRoaXMuZVZpZXdwb3J0LnNjcm9sbExlZnQ9MCl9KX1vbkRpc3BsYXllZENvbHVtbnNDaGFuZ2VkKCl7dGhpcy5mb3JDb250YWluZXJzKFtqYS5DRU5URVJdLCgpPT50aGlzLm9uSG9yaXpvbnRhbFZpZXdwb3J0Q2hhbmdlZCgpKX1vbkRpc3BsYXllZENvbHVtbnNXaWR0aENoYW5nZWQoKXt0aGlzLmZvckNvbnRhaW5lcnMoW2phLkNFTlRFUl0sKCk9PnRoaXMub25Ib3Jpem9udGFsVmlld3BvcnRDaGFuZ2VkKCkpfWFkZFByZXZlbnRTY3JvbGxXaGlsZURyYWdnaW5nKCl7Y29uc3QgZT1lPT57dGhpcy5kcmFnU2VydmljZS5pc0RyYWdnaW5nKCkmJmUuY2FuY2VsYWJsZSYmZS5wcmV2ZW50RGVmYXVsdCgpfTt0aGlzLmVDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIixlLHtwYXNzaXZlOiExfSksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+dGhpcy5lQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsZSkpfW9uSG9yaXpvbnRhbFZpZXdwb3J0Q2hhbmdlZChlPSExKXtjb25zdCB0PXRoaXMuZ2V0Q2VudGVyV2lkdGgoKSxpPXRoaXMuZ2V0Q2VudGVyVmlld3BvcnRTY3JvbGxMZWZ0KCk7dGhpcy5jb2x1bW5Nb2RlbC5zZXRWaWV3cG9ydFBvc2l0aW9uKHQsaSxlKX1nZXRDZW50ZXJXaWR0aCgpe3JldHVybiBscyh0aGlzLmVWaWV3cG9ydCl9Z2V0Q2VudGVyVmlld3BvcnRTY3JvbGxMZWZ0KCl7cmV0dXJuIHBzKHRoaXMuZVZpZXdwb3J0LHRoaXMuZW5hYmxlUnRsKX1yZWdpc3RlclZpZXdwb3J0UmVzaXplTGlzdGVuZXIoZSl7Y29uc3QgdD10aGlzLnJlc2l6ZU9ic2VydmVyU2VydmljZS5vYnNlcnZlUmVzaXplKHRoaXMuZVZpZXdwb3J0LGUpO3RoaXMuYWRkRGVzdHJveUZ1bmMoKCk9PnQoKSl9aXNWaWV3cG9ydEluVGhlRE9NVHJlZSgpe3JldHVybiB2cyh0aGlzLmVWaWV3cG9ydCl9Z2V0Vmlld3BvcnRTY3JvbGxMZWZ0KCl7cmV0dXJuIHBzKHRoaXMuZVZpZXdwb3J0LHRoaXMuZW5hYmxlUnRsKX1pc0hvcml6b250YWxTY3JvbGxTaG93aW5nKCl7cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiYWx3YXlzU2hvd0hvcml6b250YWxTY3JvbGwiKXx8UnModGhpcy5lVmlld3BvcnQpfWdldFZpZXdwb3J0RWxlbWVudCgpe3JldHVybiB0aGlzLmVWaWV3cG9ydH1zZXRDb250YWluZXJUcmFuc2xhdGVYKGUpe3RoaXMuZUNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm09YHRyYW5zbGF0ZVgoJHtlfXB4KWB9Z2V0SFNjcm9sbFBvc2l0aW9uKCl7cmV0dXJue2xlZnQ6dGhpcy5lVmlld3BvcnQuc2Nyb2xsTGVmdCxyaWdodDp0aGlzLmVWaWV3cG9ydC5zY3JvbGxMZWZ0K3RoaXMuZVZpZXdwb3J0Lm9mZnNldFdpZHRofX1zZXRDZW50ZXJWaWV3cG9ydFNjcm9sbExlZnQoZSl7Z3ModGhpcy5lVmlld3BvcnQsZSx0aGlzLmVuYWJsZVJ0bCl9aXNDb250YWluZXJWaXNpYmxlKCl7cmV0dXJuIVhhLmdldFBpbm5lZCh0aGlzLm5hbWUpfHwhIXRoaXMucGlubmVkV2lkdGhGZWF0dXJlJiZ0aGlzLnBpbm5lZFdpZHRoRmVhdHVyZS5nZXRXaWR0aCgpPjB9b25QaW5uZWRXaWR0aENoYW5nZWQoKXtjb25zdCBlPXRoaXMuaXNDb250YWluZXJWaXNpYmxlKCk7dGhpcy52aXNpYmxlIT1lJiYodGhpcy52aXNpYmxlPWUsdGhpcy5vbkRpc3BsYXllZFJvd3NDaGFuZ2VkKCkpfW9uRGlzcGxheWVkUm93c0NoYW5nZWQoZT0hMSl7aWYoIXRoaXMudmlzaWJsZSlyZXR1cm4gdm9pZCB0aGlzLmNvbXAuc2V0Um93Q3RybHMoe3Jvd0N0cmxzOnRoaXMuRU1QVFlfQ1RSTFN9KTtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzRG9tTGF5b3V0KCJwcmludCIpLGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbWJlZEZ1bGxXaWR0aFJvd3MiKXx8dCxzPXRoaXMuZ2V0Um93Q3RybHMoKS5maWx0ZXIoZT0+e2NvbnN0IHQ9ZS5pc0Z1bGxXaWR0aCgpO3JldHVybiB0aGlzLmlzRnVsbFdpdGhDb250YWluZXI/IWkmJnQ6aXx8IXR9KTt0aGlzLmNvbXAuc2V0Um93Q3RybHMoe3Jvd0N0cmxzOnMsdXNlRmx1c2hTeW5jOmV9KX1nZXRSb3dDdHJscygpe3N3aXRjaCh0aGlzLm5hbWUpe2Nhc2UgamEuVE9QX0NFTlRFUjpjYXNlIGphLlRPUF9MRUZUOmNhc2UgamEuVE9QX1JJR0hUOmNhc2UgamEuVE9QX0ZVTExfV0lEVEg6cmV0dXJuIHRoaXMucm93UmVuZGVyZXIuZ2V0VG9wUm93Q3RybHMoKTtjYXNlIGphLlNUSUNLWV9UT1BfQ0VOVEVSOmNhc2UgamEuU1RJQ0tZX1RPUF9MRUZUOmNhc2UgamEuU1RJQ0tZX1RPUF9SSUdIVDpjYXNlIGphLlNUSUNLWV9UT1BfRlVMTF9XSURUSDpyZXR1cm4gdGhpcy5yb3dSZW5kZXJlci5nZXRTdGlja3lUb3BSb3dDdHJscygpO2Nhc2UgamEuQk9UVE9NX0NFTlRFUjpjYXNlIGphLkJPVFRPTV9MRUZUOmNhc2UgamEuQk9UVE9NX1JJR0hUOmNhc2UgamEuQk9UVE9NX0ZVTExfV0lEVEg6cmV0dXJuIHRoaXMucm93UmVuZGVyZXIuZ2V0Qm90dG9tUm93Q3RybHMoKTtkZWZhdWx0OnJldHVybiB0aGlzLnJvd1JlbmRlcmVyLmdldENlbnRyZVJvd0N0cmxzKCl9fX16YShbY2UoImRyYWdTZXJ2aWNlIildLFhhLnByb3RvdHlwZSwiZHJhZ1NlcnZpY2UiLHZvaWQgMCksemEoW2NlKCJjdHJsc1NlcnZpY2UiKV0sWGEucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksemEoW2NlKCJjb2x1bW5Nb2RlbCIpXSxYYS5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLHphKFtjZSgicmVzaXplT2JzZXJ2ZXJTZXJ2aWNlIildLFhhLnByb3RvdHlwZSwicmVzaXplT2JzZXJ2ZXJTZXJ2aWNlIix2b2lkIDApLHphKFtjZSgicm93UmVuZGVyZXIiKV0sWGEucHJvdG90eXBlLCJyb3dSZW5kZXJlciIsdm9pZCAwKSx6YShbYWVdLFhhLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIHFhPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NvbnN0IFphPWA8ZGl2IGNsYXNzPSJhZy1yb290IGFnLXVuc2VsZWN0YWJsZSIgcm9sZT0idHJlZWdyaWQiPlxuICAgICAgICA8YWctaGVhZGVyLXJvb3QgcmVmPSJncmlkSGVhZGVyIj48L2FnLWhlYWRlci1yb290PlxuICAgICAgICA8ZGl2IGNsYXNzPSJhZy1mbG9hdGluZy10b3AiIHJlZj0iZVRvcCIgcm9sZT0icHJlc2VudGF0aW9uIj5cbiAgICAgICAgICAgIDxhZy1yb3ctY29udGFpbmVyIHJlZj0idG9wTGVmdENvbnRhaW5lciIgbmFtZT0iJHtqYS5UT1BfTEVGVH0iPjwvYWctcm93LWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxhZy1yb3ctY29udGFpbmVyIHJlZj0idG9wQ2VudGVyQ29udGFpbmVyIiBuYW1lPSIke2phLlRPUF9DRU5URVJ9Ij48L2FnLXJvdy1jb250YWluZXI+XG4gICAgICAgICAgICA8YWctcm93LWNvbnRhaW5lciByZWY9InRvcFJpZ2h0Q29udGFpbmVyIiBuYW1lPSIke2phLlRPUF9SSUdIVH0iPjwvYWctcm93LWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxhZy1yb3ctY29udGFpbmVyIHJlZj0idG9wRnVsbFdpZHRoQ29udGFpbmVyIiBuYW1lPSIke2phLlRPUF9GVUxMX1dJRFRIfSI+PC9hZy1yb3ctY29udGFpbmVyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz0iYWctYm9keSIgcmVmPSJlQm9keSIgcm9sZT0icHJlc2VudGF0aW9uIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWJvZHktdmlld3BvcnQiIHJlZj0iZUJvZHlWaWV3cG9ydCIgcm9sZT0icHJlc2VudGF0aW9uIj5cbiAgICAgICAgICAgICAgICA8YWctcm93LWNvbnRhaW5lciByZWY9ImxlZnRDb250YWluZXIiIG5hbWU9IiR7amEuTEVGVH0iPjwvYWctcm93LWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8YWctcm93LWNvbnRhaW5lciByZWY9ImNlbnRlckNvbnRhaW5lciIgbmFtZT0iJHtqYS5DRU5URVJ9Ij48L2FnLXJvdy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgPGFnLXJvdy1jb250YWluZXIgcmVmPSJyaWdodENvbnRhaW5lciIgbmFtZT0iJHtqYS5SSUdIVH0iPjwvYWctcm93LWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8YWctcm93LWNvbnRhaW5lciByZWY9ImZ1bGxXaWR0aENvbnRhaW5lciIgbmFtZT0iJHtqYS5GVUxMX1dJRFRIfSI+PC9hZy1yb3ctY29udGFpbmVyPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8YWctZmFrZS12ZXJ0aWNhbC1zY3JvbGw+PC9hZy1mYWtlLXZlcnRpY2FsLXNjcm9sbD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9ImFnLXN0aWNreS10b3AiIHJlZj0iZVN0aWNreVRvcCIgcm9sZT0icHJlc2VudGF0aW9uIj5cbiAgICAgICAgICAgIDxhZy1yb3ctY29udGFpbmVyIHJlZj0ic3RpY2t5VG9wTGVmdENvbnRhaW5lciIgbmFtZT0iJHtqYS5TVElDS1lfVE9QX0xFRlR9Ij48L2FnLXJvdy1jb250YWluZXI+XG4gICAgICAgICAgICA8YWctcm93LWNvbnRhaW5lciByZWY9InN0aWNreVRvcENlbnRlckNvbnRhaW5lciIgbmFtZT0iJHtqYS5TVElDS1lfVE9QX0NFTlRFUn0iPjwvYWctcm93LWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxhZy1yb3ctY29udGFpbmVyIHJlZj0ic3RpY2t5VG9wUmlnaHRDb250YWluZXIiIG5hbWU9IiR7amEuU1RJQ0tZX1RPUF9SSUdIVH0iPjwvYWctcm93LWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxhZy1yb3ctY29udGFpbmVyIHJlZj0ic3RpY2t5VG9wRnVsbFdpZHRoQ29udGFpbmVyIiBuYW1lPSIke2phLlNUSUNLWV9UT1BfRlVMTF9XSURUSH0iPjwvYWctcm93LWNvbnRhaW5lcj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9ImFnLWZsb2F0aW5nLWJvdHRvbSIgcmVmPSJlQm90dG9tIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgPGFnLXJvdy1jb250YWluZXIgcmVmPSJib3R0b21MZWZ0Q29udGFpbmVyIiBuYW1lPSIke2phLkJPVFRPTV9MRUZUfSI+PC9hZy1yb3ctY29udGFpbmVyPlxuICAgICAgICAgICAgPGFnLXJvdy1jb250YWluZXIgcmVmPSJib3R0b21DZW50ZXJDb250YWluZXIiIG5hbWU9IiR7amEuQk9UVE9NX0NFTlRFUn0iPjwvYWctcm93LWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxhZy1yb3ctY29udGFpbmVyIHJlZj0iYm90dG9tUmlnaHRDb250YWluZXIiIG5hbWU9IiR7amEuQk9UVE9NX1JJR0hUfSI+PC9hZy1yb3ctY29udGFpbmVyPlxuICAgICAgICAgICAgPGFnLXJvdy1jb250YWluZXIgcmVmPSJib3R0b21GdWxsV2lkdGhDb250YWluZXIiIG5hbWU9IiR7amEuQk9UVE9NX0ZVTExfV0lEVEh9Ij48L2FnLXJvdy1jb250YWluZXI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8YWctZmFrZS1ob3Jpem9udGFsLXNjcm9sbD48L2FnLWZha2UtaG9yaXpvbnRhbC1zY3JvbGw+XG4gICAgICAgIDxhZy1vdmVybGF5LXdyYXBwZXI+PC9hZy1vdmVybGF5LXdyYXBwZXI+XG4gICAgPC9kaXY+YDtjbGFzcyBRYSBleHRlbmRzIGNye2NvbnN0cnVjdG9yKCl7c3VwZXIoWmEpfWluaXQoKXtjb25zdCBlPShlLHQpPT57Y29uc3QgaT1lKyJweCI7dC5zdHlsZS5taW5IZWlnaHQ9aSx0LnN0eWxlLmhlaWdodD1pfSx0PXtzZXRSb3dBbmltYXRpb25Dc3NPbkJvZHlWaWV3cG9ydDooZSx0KT0+dGhpcy5zZXRSb3dBbmltYXRpb25Dc3NPbkJvZHlWaWV3cG9ydChlLHQpLHNldENvbHVtbkNvdW50OmU9PnZpKHRoaXMuZ2V0R3VpKCksZSksc2V0Um93Q291bnQ6ZT0+bWkodGhpcy5nZXRHdWkoKSxlKSxzZXRUb3BIZWlnaHQ6dD0+ZSh0LHRoaXMuZVRvcCksc2V0Qm90dG9tSGVpZ2h0OnQ9PmUodCx0aGlzLmVCb3R0b20pLHNldFRvcERpc3BsYXk6ZT0+dGhpcy5lVG9wLnN0eWxlLmRpc3BsYXk9ZSxzZXRCb3R0b21EaXNwbGF5OmU9PnRoaXMuZUJvdHRvbS5zdHlsZS5kaXNwbGF5PWUsc2V0U3RpY2t5VG9wSGVpZ2h0OmU9PnRoaXMuZVN0aWNreVRvcC5zdHlsZS5oZWlnaHQ9ZSxzZXRTdGlja3lUb3BUb3A6ZT0+dGhpcy5lU3RpY2t5VG9wLnN0eWxlLnRvcD1lLHNldFN0aWNreVRvcFdpZHRoOmU9PnRoaXMuZVN0aWNreVRvcC5zdHlsZS53aWR0aD1lLHNldENvbHVtbk1vdmluZ0NzczooZSx0KT0+dGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKGUsdCksdXBkYXRlTGF5b3V0Q2xhc3NlczooZSx0KT0+e1t0aGlzLmVCb2R5Vmlld3BvcnQuY2xhc3NMaXN0LHRoaXMuZUJvZHkuY2xhc3NMaXN0XS5mb3JFYWNoKGU9PntlLnRvZ2dsZShKbi5BVVRPX0hFSUdIVCx0LmF1dG9IZWlnaHQpLGUudG9nZ2xlKEpuLk5PUk1BTCx0Lm5vcm1hbCksZS50b2dnbGUoSm4uUFJJTlQsdC5wcmludCl9KSx0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoSm4uQVVUT19IRUlHSFQsdC5hdXRvSGVpZ2h0KSx0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoSm4uTk9STUFMLHQubm9ybWFsKSx0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoSm4uUFJJTlQsdC5wcmludCl9LHNldEFsd2F5c1ZlcnRpY2FsU2Nyb2xsQ2xhc3M6KGUsdCk9PnRoaXMuZUJvZHlWaWV3cG9ydC5jbGFzc0xpc3QudG9nZ2xlKCJhZy1mb3JjZS12ZXJ0aWNhbC1zY3JvbGwiLHQpLHJlZ2lzdGVyQm9keVZpZXdwb3J0UmVzaXplTGlzdGVuZXI6ZT0+e2NvbnN0IHQ9dGhpcy5yZXNpemVPYnNlcnZlclNlcnZpY2Uub2JzZXJ2ZVJlc2l6ZSh0aGlzLmVCb2R5Vmlld3BvcnQsZSk7dGhpcy5hZGREZXN0cm95RnVuYygoKT0+dCgpKX0sc2V0UGlubmVkVG9wQm90dG9tT3ZlcmZsb3dZOmU9PnRoaXMuZVRvcC5zdHlsZS5vdmVyZmxvd1k9dGhpcy5lQm90dG9tLnN0eWxlLm92ZXJmbG93WT1lLHNldENlbGxTZWxlY3RhYmxlQ3NzOihlLHQpPT57W3RoaXMuZVRvcCx0aGlzLmVCb2R5Vmlld3BvcnQsdGhpcy5lQm90dG9tXS5mb3JFYWNoKGk9PmkuY2xhc3NMaXN0LnRvZ2dsZShlLHQpKX0sc2V0Qm9keVZpZXdwb3J0V2lkdGg6ZT0+dGhpcy5lQm9keVZpZXdwb3J0LnN0eWxlLndpZHRoPWV9O3RoaXMuY3RybD10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBjYSksdGhpcy5jdHJsLnNldENvbXAodCx0aGlzLmdldEd1aSgpLHRoaXMuZUJvZHlWaWV3cG9ydCx0aGlzLmVUb3AsdGhpcy5lQm90dG9tLHRoaXMuZVN0aWNreVRvcCksKHRoaXMucmFuZ2VTZXJ2aWNlJiZ0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJhbmdlU2VsZWN0aW9uIil8fCJtdWx0aXBsZSI9PT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd1NlbGVjdGlvbiIpKSYmZ2kodGhpcy5nZXRHdWkoKSwhMCl9c2V0Um93QW5pbWF0aW9uQ3NzT25Cb2R5Vmlld3BvcnQoZSx0KXtjb25zdCBpPXRoaXMuZUJvZHlWaWV3cG9ydC5jbGFzc0xpc3Q7aS50b2dnbGUobGEuQU5JTUFUSU9OX09OLHQpLGkudG9nZ2xlKGxhLkFOSU1BVElPTl9PRkYsIXQpfWdldEZsb2F0aW5nVG9wQm90dG9tKCl7cmV0dXJuW3RoaXMuZVRvcCx0aGlzLmVCb3R0b21dfX1xYShbY2UoInJlc2l6ZU9ic2VydmVyU2VydmljZSIpXSxRYS5wcm90b3R5cGUsInJlc2l6ZU9ic2VydmVyU2VydmljZSIsdm9pZCAwKSxxYShbaGUoInJhbmdlU2VydmljZSIpXSxRYS5wcm90b3R5cGUsInJhbmdlU2VydmljZSIsdm9pZCAwKSxxYShbdXIoImVCb2R5Vmlld3BvcnQiKV0sUWEucHJvdG90eXBlLCJlQm9keVZpZXdwb3J0Iix2b2lkIDApLHFhKFt1cigiZVN0aWNreVRvcCIpXSxRYS5wcm90b3R5cGUsImVTdGlja3lUb3AiLHZvaWQgMCkscWEoW3VyKCJlVG9wIildLFFhLnByb3RvdHlwZSwiZVRvcCIsdm9pZCAwKSxxYShbdXIoImVCb3R0b20iKV0sUWEucHJvdG90eXBlLCJlQm90dG9tIix2b2lkIDApLHFhKFt1cigiZ3JpZEhlYWRlciIpXSxRYS5wcm90b3R5cGUsImhlYWRlclJvb3RDb21wIix2b2lkIDApLHFhKFt1cigiZUJvZHkiKV0sUWEucHJvdG90eXBlLCJlQm9keSIsdm9pZCAwKSxxYShbYWVdLFFhLnByb3RvdHlwZSwiaW5pdCIsbnVsbCk7dmFyIEphPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBlbD1jbGFzcyBleHRlbmRzIGl0e3Bvc3RDb25zdHJ1Y3QoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ESVNQTEFZRURfQ09MVU1OU19DSEFOR0VELHRoaXMub25EaXNwbGF5ZWRDb2x1bW5zQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ESVNQTEFZRURfQ09MVU1OU19XSURUSF9DSEFOR0VELHRoaXMub25EaXNwbGF5ZWRDb2x1bW5zV2lkdGhDaGFuZ2VkLmJpbmQodGhpcykpfW9uRGlzcGxheWVkQ29sdW1uc0NoYW5nZWQoKXt0aGlzLnVwZGF0ZSgpfW9uRGlzcGxheWVkQ29sdW1uc1dpZHRoQ2hhbmdlZCgpe3RoaXMudXBkYXRlKCl9dXBkYXRlKCl7dGhpcy5jb2x1bW5BbmltYXRpb25TZXJ2aWNlLmlzQWN0aXZlKCk/dGhpcy5jb2x1bW5BbmltYXRpb25TZXJ2aWNlLmV4ZWN1dGVMYXRlclZNVHVybigoKT0+e3RoaXMuY29sdW1uQW5pbWF0aW9uU2VydmljZS5leGVjdXRlTGF0ZXJWTVR1cm4oKCk9PnRoaXMudXBkYXRlSW1wbCgpKX0pOnRoaXMudXBkYXRlSW1wbCgpfXVwZGF0ZUltcGwoKXtjb25zdCBlPXRoaXMuY3RybHNTZXJ2aWNlLmdldENlbnRlclJvd0NvbnRhaW5lckN0cmwoKTtpZighZXx8dGhpcy5jb2x1bW5BbmltYXRpb25TZXJ2aWNlLmlzQWN0aXZlKCkpcmV0dXJuO2NvbnN0IHQ9e2hvcml6b250YWxTY3JvbGxTaG93aW5nOmUuaXNIb3Jpem9udGFsU2Nyb2xsU2hvd2luZygpLHZlcnRpY2FsU2Nyb2xsU2hvd2luZzp0aGlzLmlzVmVydGljYWxTY3JvbGxTaG93aW5nKCl9O3RoaXMuc2V0U2Nyb2xsc1Zpc2libGUodCl9c2V0U2Nyb2xsc1Zpc2libGUoZSl7aWYodGhpcy5ob3Jpem9udGFsU2Nyb2xsU2hvd2luZyE9PWUuaG9yaXpvbnRhbFNjcm9sbFNob3dpbmd8fHRoaXMudmVydGljYWxTY3JvbGxTaG93aW5nIT09ZS52ZXJ0aWNhbFNjcm9sbFNob3dpbmcpe3RoaXMuaG9yaXpvbnRhbFNjcm9sbFNob3dpbmc9ZS5ob3Jpem9udGFsU2Nyb2xsU2hvd2luZyx0aGlzLnZlcnRpY2FsU2Nyb2xsU2hvd2luZz1lLnZlcnRpY2FsU2Nyb2xsU2hvd2luZztjb25zdCB0PXt0eXBlOmx0LkVWRU5UX1NDUk9MTF9WSVNJQklMSVRZX0NIQU5HRUR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9fWlzSG9yaXpvbnRhbFNjcm9sbFNob3dpbmcoKXtyZXR1cm4gdGhpcy5ob3Jpem9udGFsU2Nyb2xsU2hvd2luZ31pc1ZlcnRpY2FsU2Nyb2xsU2hvd2luZygpe3JldHVybiB0aGlzLnZlcnRpY2FsU2Nyb2xsU2hvd2luZ319O0phKFtjZSgiY3RybHNTZXJ2aWNlIildLGVsLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLEphKFtjZSgiY29sdW1uQW5pbWF0aW9uU2VydmljZSIpXSxlbC5wcm90b3R5cGUsImNvbHVtbkFuaW1hdGlvblNlcnZpY2UiLHZvaWQgMCksSmEoW2FlXSxlbC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLGVsPUphKFtkZSgic2Nyb2xsVmlzaWJsZVNlcnZpY2UiKV0sZWwpO3ZhciB0bCxpbD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgc2w9dGw9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5ncmlkSW5zdGFuY2VJZD10bC5ncmlkSW5zdGFuY2VTZXF1ZW5jZS5uZXh0KCl9c3RhbXBUb3BMZXZlbEdyaWRDb21wV2l0aEdyaWRJbnN0YW5jZShlKXtlW3RsLkdSSURfRE9NX0tFWV09dGhpcy5ncmlkSW5zdGFuY2VJZH1nZXRSZW5kZXJlZENlbGxGb3JFdmVudChlKXtyZXR1cm4gcWUodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsZS50YXJnZXQseGEuRE9NX0RBVEFfS0VZX0NFTExfQ1RSTCl9aXNFdmVudEZyb21UaGlzR3JpZChlKXtyZXR1cm4gdGhpcy5pc0VsZW1lbnRJblRoaXNHcmlkKGUudGFyZ2V0KX1pc0VsZW1lbnRJblRoaXNHcmlkKGUpe2xldCB0PWU7Zm9yKDt0Oyl7Y29uc3QgZT10W3RsLkdSSURfRE9NX0tFWV07aWYoYihlKSl7cmV0dXJuIGU9PT10aGlzLmdyaWRJbnN0YW5jZUlkfXQ9dC5wYXJlbnRFbGVtZW50fXJldHVybiExfWdldENlbGxQb3NpdGlvbkZvckV2ZW50KGUpe2NvbnN0IHQ9dGhpcy5nZXRSZW5kZXJlZENlbGxGb3JFdmVudChlKTtyZXR1cm4gdD90LmdldENlbGxQb3NpdGlvbigpOm51bGx9Z2V0Tm9ybWFsaXNlZFBvc2l0aW9uKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNEb21MYXlvdXQoIm5vcm1hbCIpLGk9ZTtsZXQgcyxyO2lmKG51bGwhPWkuY2xpZW50WHx8bnVsbCE9aS5jbGllbnRZPyhzPWkuY2xpZW50WCxyPWkuY2xpZW50WSk6KHM9aS54LHI9aS55KSx0KXtjb25zdCBlPXRoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLHQ9ZS5nZXRTY3JvbGxGZWF0dXJlKCkuZ2V0VlNjcm9sbFBvc2l0aW9uKCk7cys9ZS5nZXRTY3JvbGxGZWF0dXJlKCkuZ2V0SFNjcm9sbFBvc2l0aW9uKCkubGVmdCxyKz10LnRvcH1yZXR1cm57eDpzLHk6cn19fTtzbC5ncmlkSW5zdGFuY2VTZXF1ZW5jZT1uZXcgSnMsc2wuR1JJRF9ET01fS0VZPSJfX2FnX2dyaWRfaW5zdGFuY2UiLGlsKFtjZSgiY3RybHNTZXJ2aWNlIildLHNsLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLHNsPXRsPWlsKFtkZSgibW91c2VFdmVudFNlcnZpY2UiKV0sc2wpO3ZhciBybD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgb2w9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5vblBhZ2VEb3duPUoodGhpcy5vblBhZ2VEb3duLDEwMCksdGhpcy5vblBhZ2VVcD1KKHRoaXMub25QYWdlVXAsMTAwKX1wb3N0Q29uc3RydWN0KCl7dGhpcy5jdHJsc1NlcnZpY2Uud2hlblJlYWR5KGU9Pnt0aGlzLmdyaWRCb2R5Q29uPWUuZ3JpZEJvZHlDdHJsfSl9aGFuZGxlUGFnZVNjcm9sbGluZ0tleShlLHQ9ITEpe2NvbnN0IGk9ZS5rZXkscz1lLmFsdEtleSxyPWUuY3RybEtleXx8ZS5tZXRhS2V5LG89ISF0aGlzLnJhbmdlU2VydmljZSYmZS5zaGlmdEtleSxuPXRoaXMubW91c2VFdmVudFNlcnZpY2UuZ2V0Q2VsbFBvc2l0aW9uRm9yRXZlbnQoZSk7bGV0IGE9ITE7c3dpdGNoKGkpe2Nhc2UganMuUEFHRV9IT01FOmNhc2UganMuUEFHRV9FTkQ6cnx8c3x8KHRoaXMub25Ib21lT3JFbmRLZXkoaSksYT0hMCk7YnJlYWs7Y2FzZSBqcy5MRUZUOmNhc2UganMuUklHSFQ6Y2FzZSBqcy5VUDpjYXNlIGpzLkRPV046aWYoIW4pcmV0dXJuITE7IXJ8fHN8fG98fCh0aGlzLm9uQ3RybFVwRG93bkxlZnRSaWdodChpLG4pLGE9ITApO2JyZWFrO2Nhc2UganMuUEFHRV9ET1dOOmNhc2UganMuUEFHRV9VUDpyfHxzfHwoYT10aGlzLmhhbmRsZVBhZ2VVcERvd24oaSxuLHQpKX1yZXR1cm4gYSYmZS5wcmV2ZW50RGVmYXVsdCgpLGF9aGFuZGxlUGFnZVVwRG93bihlLHQsaSl7cmV0dXJuIGkmJih0PXRoaXMuZm9jdXNTZXJ2aWNlLmdldEZvY3VzZWRDZWxsKCkpLCEhdCYmKGU9PT1qcy5QQUdFX1VQP3RoaXMub25QYWdlVXAodCk6dGhpcy5vblBhZ2VEb3duKHQpLCEwKX1uYXZpZ2F0ZVRvKGUpe2NvbnN0e3Njcm9sbEluZGV4OnQsc2Nyb2xsVHlwZTppLHNjcm9sbENvbHVtbjpzLGZvY3VzSW5kZXg6cixmb2N1c0NvbHVtbjpvfT1lO2lmKGIocykmJiFzLmlzUGlubmVkKCkmJnRoaXMuZ3JpZEJvZHlDb24uZ2V0U2Nyb2xsRmVhdHVyZSgpLmVuc3VyZUNvbHVtblZpc2libGUocyksYih0KSYmdGhpcy5ncmlkQm9keUNvbi5nZXRTY3JvbGxGZWF0dXJlKCkuZW5zdXJlSW5kZXhWaXNpYmxlKHQsaSksZS5pc0FzeW5jfHx0aGlzLmdyaWRCb2R5Q29uLmdldFNjcm9sbEZlYXR1cmUoKS5lbnN1cmVJbmRleFZpc2libGUociksdGhpcy5mb2N1c1NlcnZpY2Uuc2V0Rm9jdXNlZENlbGwoe3Jvd0luZGV4OnIsY29sdW1uOm8scm93UGlubmVkOm51bGwsZm9yY2VCcm93c2VyRm9jdXM6ITB9KSx0aGlzLnJhbmdlU2VydmljZSl7Y29uc3QgZT17cm93SW5kZXg6cixyb3dQaW5uZWQ6bnVsbCxjb2x1bW46b307dGhpcy5yYW5nZVNlcnZpY2Uuc2V0UmFuZ2VUb0NlbGwoZSl9fW9uUGFnZURvd24oZSl7Y29uc3QgdD10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKS5nZXRTY3JvbGxGZWF0dXJlKCkuZ2V0VlNjcm9sbFBvc2l0aW9uKCksaT10aGlzLmdldFZpZXdwb3J0SGVpZ2h0KCkscz10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRQaXhlbE9mZnNldCgpLHI9dC50b3AraSxvPXRoaXMucGFnaW5hdGlvblByb3h5LmdldFJvd0luZGV4QXRQaXhlbChyK3MpO3RoaXMuY29sdW1uTW9kZWwuaXNBdXRvUm93SGVpZ2h0QWN0aXZlKCk/dGhpcy5uYXZpZ2F0ZVRvTmV4dFBhZ2VXaXRoQXV0b0hlaWdodChlLG8pOnRoaXMubmF2aWdhdGVUb05leHRQYWdlKGUsbyl9b25QYWdlVXAoZSl7Y29uc3QgdD10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKS5nZXRTY3JvbGxGZWF0dXJlKCkuZ2V0VlNjcm9sbFBvc2l0aW9uKCksaT10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRQaXhlbE9mZnNldCgpLHM9dC50b3Ascj10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRSb3dJbmRleEF0UGl4ZWwocytpKTt0aGlzLmNvbHVtbk1vZGVsLmlzQXV0b1Jvd0hlaWdodEFjdGl2ZSgpP3RoaXMubmF2aWdhdGVUb05leHRQYWdlV2l0aEF1dG9IZWlnaHQoZSxyLCEwKTp0aGlzLm5hdmlnYXRlVG9OZXh0UGFnZShlLHIsITApfW5hdmlnYXRlVG9OZXh0UGFnZShlLHQsaT0hMSl7Y29uc3Qgcz10aGlzLmdldFZpZXdwb3J0SGVpZ2h0KCkscj10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRQYWdlRmlyc3RSb3coKSxvPXRoaXMucGFnaW5hdGlvblByb3h5LmdldFBhZ2VMYXN0Um93KCksbj10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRQaXhlbE9mZnNldCgpLGE9dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0Um93KGUucm93SW5kZXgpLGw9aT8obnVsbD09YT92b2lkIDA6YS5yb3dIZWlnaHQpLXMtbjpzLW4sZD0obnVsbD09YT92b2lkIDA6YS5yb3dUb3ApK2w7bGV0IGMsaD10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRSb3dJbmRleEF0UGl4ZWwoZCtuKTtpZihoPT09ZS5yb3dJbmRleCl7Y29uc3Qgcz1pPy0xOjE7dD1oPWUucm93SW5kZXgrc31pPyhjPSJib3R0b20iLGg8ciYmKGg9ciksdDxyJiYodD1yKSk6KGM9InRvcCIsaD5vJiYoaD1vKSx0Pm8mJih0PW8pKSx0aGlzLmlzUm93VGFsbGVyVGhhblZpZXcoaCkmJih0PWgsYz0idG9wIiksdGhpcy5uYXZpZ2F0ZVRvKHtzY3JvbGxJbmRleDp0LHNjcm9sbFR5cGU6YyxzY3JvbGxDb2x1bW46bnVsbCxmb2N1c0luZGV4OmgsZm9jdXNDb2x1bW46ZS5jb2x1bW59KX1uYXZpZ2F0ZVRvTmV4dFBhZ2VXaXRoQXV0b0hlaWdodChlLHQsaT0hMSl7dGhpcy5uYXZpZ2F0ZVRvKHtzY3JvbGxJbmRleDp0LHNjcm9sbFR5cGU6aT8iYm90dG9tIjoidG9wIixzY3JvbGxDb2x1bW46bnVsbCxmb2N1c0luZGV4OnQsZm9jdXNDb2x1bW46ZS5jb2x1bW59KSxzZXRUaW1lb3V0KCgpPT57Y29uc3Qgcz10aGlzLmdldE5leHRGb2N1c0luZGV4Rm9yQXV0b0hlaWdodChlLGkpO3RoaXMubmF2aWdhdGVUbyh7c2Nyb2xsSW5kZXg6dCxzY3JvbGxUeXBlOmk/ImJvdHRvbSI6InRvcCIsc2Nyb2xsQ29sdW1uOm51bGwsZm9jdXNJbmRleDpzLGZvY3VzQ29sdW1uOmUuY29sdW1uLGlzQXN5bmM6ITB9KX0sNTApfWdldE5leHRGb2N1c0luZGV4Rm9yQXV0b0hlaWdodChlLHQ9ITEpe3ZhciBpO2NvbnN0IHM9dD8tMToxLHI9dGhpcy5nZXRWaWV3cG9ydEhlaWdodCgpLG89dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0UGFnZUxhc3RSb3coKTtsZXQgbj0wLGE9ZS5yb3dJbmRleDtmb3IoO2E+PTAmJmE8PW87KXtjb25zdCBlPXRoaXMucGFnaW5hdGlvblByb3h5LmdldFJvdyhhKTtpZihlKXtjb25zdCB0PW51bGwhPT0oaT1lLnJvd0hlaWdodCkmJnZvaWQgMCE9PWk/aTowO2lmKG4rdD5yKWJyZWFrO24rPXR9YSs9c31yZXR1cm4gTWF0aC5tYXgoMCxNYXRoLm1pbihhLG8pKX1nZXRWaWV3cG9ydEhlaWdodCgpe2NvbnN0IGU9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0R3JpZEJvZHlDdHJsKCkuZ2V0U2Nyb2xsRmVhdHVyZSgpLmdldFZTY3JvbGxQb3NpdGlvbigpLHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0U2Nyb2xsYmFyV2lkdGgoKTtsZXQgaT1lLmJvdHRvbS1lLnRvcDtyZXR1cm4gdGhpcy5jdHJsc1NlcnZpY2UuZ2V0Q2VudGVyUm93Q29udGFpbmVyQ3RybCgpLmlzSG9yaXpvbnRhbFNjcm9sbFNob3dpbmcoKSYmKGktPXQpLGl9aXNSb3dUYWxsZXJUaGFuVmlldyhlKXtjb25zdCB0PXRoaXMucGFnaW5hdGlvblByb3h5LmdldFJvdyhlKTtpZighdClyZXR1cm4hMTtjb25zdCBpPXQucm93SGVpZ2h0O3JldHVybiJudW1iZXIiPT10eXBlb2YgaSYmaT50aGlzLmdldFZpZXdwb3J0SGVpZ2h0KCl9b25DdHJsVXBEb3duTGVmdFJpZ2h0KGUsdCl7Y29uc3QgaT10aGlzLmNlbGxOYXZpZ2F0aW9uU2VydmljZS5nZXROZXh0Q2VsbFRvRm9jdXMoZSx0LCEwKSx7cm93SW5kZXg6cyxjb2x1bW46cn09aTt0aGlzLm5hdmlnYXRlVG8oe3Njcm9sbEluZGV4OnMsc2Nyb2xsVHlwZTpudWxsLHNjcm9sbENvbHVtbjpyLGZvY3VzSW5kZXg6cyxmb2N1c0NvbHVtbjpyfSl9b25Ib21lT3JFbmRLZXkoZSl7Y29uc3QgdD1lPT09anMuUEFHRV9IT01FLGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCkscz10P2lbMF06T2UoaSkscj10P3RoaXMucGFnaW5hdGlvblByb3h5LmdldFBhZ2VGaXJzdFJvdygpOnRoaXMucGFnaW5hdGlvblByb3h5LmdldFBhZ2VMYXN0Um93KCk7dGhpcy5uYXZpZ2F0ZVRvKHtzY3JvbGxJbmRleDpyLHNjcm9sbFR5cGU6bnVsbCxzY3JvbGxDb2x1bW46cyxmb2N1c0luZGV4OnIsZm9jdXNDb2x1bW46c30pfW9uVGFiS2V5RG93bihlLHQpe2NvbnN0IGk9dC5zaGlmdEtleTtpZih0aGlzLnRhYlRvTmV4dENlbGxDb21tb24oZSxpLHQpKXQucHJldmVudERlZmF1bHQoKTtlbHNlIGlmKGkpe2NvbnN0e3Jvd0luZGV4Omkscm93UGlubmVkOnN9PWUuZ2V0Um93UG9zaXRpb24oKTsocz8wPT09aTppPT09dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0UGFnZUZpcnN0Um93KCkpJiYoMD09PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiaGVhZGVySGVpZ2h0Iil8fHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NIZWFkZXJGb2N1cyIpP3RoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzTmV4dEdyaWRDb3JlQ29udGFpbmVyKCEwLCEwKToodC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzUHJldmlvdXNGcm9tRmlyc3RDZWxsKHQpKSl9ZWxzZSBlIGluc3RhbmNlb2YgeGEmJmUuZm9jdXNDZWxsKCEwKSx0aGlzLmZvY3VzU2VydmljZS5mb2N1c05leHRHcmlkQ29yZUNvbnRhaW5lcihpKSYmdC5wcmV2ZW50RGVmYXVsdCgpfXRhYlRvTmV4dENlbGwoZSx0KXtjb25zdCBpPXRoaXMuZm9jdXNTZXJ2aWNlLmdldEZvY3VzZWRDZWxsKCk7aWYoIWkpcmV0dXJuITE7bGV0IHM9dGhpcy5nZXRDZWxsQnlQb3NpdGlvbihpKTtyZXR1cm4hIShzfHwocz10aGlzLnJvd1JlbmRlcmVyLmdldFJvd0J5UG9zaXRpb24oaSkscyYmcy5pc0Z1bGxXaWR0aCgpKSkmJnRoaXMudGFiVG9OZXh0Q2VsbENvbW1vbihzLGUsdCl9dGFiVG9OZXh0Q2VsbENvbW1vbihlLHQsaSl7bGV0IHMscj1lLmlzRWRpdGluZygpO2lmKCFyJiZlIGluc3RhbmNlb2YgeGEpe2NvbnN0IHQ9ZS5nZXRSb3dDdHJsKCk7dCYmKHI9dC5pc0VkaXRpbmcoKSl9cmV0dXJuIHM9cj8iZnVsbFJvdyI9PT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVkaXRUeXBlIik/dGhpcy5tb3ZlVG9OZXh0RWRpdGluZ1JvdyhlLHQsaSk6dGhpcy5tb3ZlVG9OZXh0RWRpdGluZ0NlbGwoZSx0LGkpOnRoaXMubW92ZVRvTmV4dENlbGxOb3RFZGl0aW5nKGUsdCksc3x8ISF0aGlzLmZvY3VzU2VydmljZS5nZXRGb2N1c2VkSGVhZGVyKCl9bW92ZVRvTmV4dEVkaXRpbmdDZWxsKGUsdCxpPW51bGwpe2NvbnN0IHM9ZS5nZXRDZWxsUG9zaXRpb24oKTtlLmdldEd1aSgpLmZvY3VzKCksZS5zdG9wRWRpdGluZygpO2NvbnN0IHI9dGhpcy5maW5kTmV4dENlbGxUb0ZvY3VzT24ocyx0LCEwKTtyZXR1cm4gbnVsbCE9ciYmKHIuc3RhcnRFZGl0aW5nKG51bGwsITAsaSksci5mb2N1c0NlbGwoITEpLCEwKX1tb3ZlVG9OZXh0RWRpdGluZ1JvdyhlLHQsaT1udWxsKXtjb25zdCBzPWUuZ2V0Q2VsbFBvc2l0aW9uKCkscj10aGlzLmZpbmROZXh0Q2VsbFRvRm9jdXNPbihzLHQsITApO2lmKG51bGw9PXIpcmV0dXJuITE7Y29uc3Qgbz1yLmdldENlbGxQb3NpdGlvbigpLG49dGhpcy5pc0NlbGxFZGl0YWJsZShzKSxhPXRoaXMuaXNDZWxsRWRpdGFibGUobyksbD1vJiZzLnJvd0luZGV4PT09by5yb3dJbmRleCYmcy5yb3dQaW5uZWQ9PT1vLnJvd1Bpbm5lZDtpZihuJiZlLnNldEZvY3VzT3V0T25FZGl0b3IoKSwhbCl7ZS5nZXRSb3dDdHJsKCkuc3RvcEVkaXRpbmcoKTtyLmdldFJvd0N0cmwoKS5zdGFydFJvd0VkaXRpbmcodm9pZCAwLHZvaWQgMCxpKX1yZXR1cm4gYT8oci5zZXRGb2N1c0luT25FZGl0b3IoKSxyLmZvY3VzQ2VsbCgpKTpyLmZvY3VzQ2VsbCghMCksITB9bW92ZVRvTmV4dENlbGxOb3RFZGl0aW5nKGUsdCl7Y29uc3QgaT10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKTtsZXQgcztzPWUgaW5zdGFuY2VvZiBPYT9PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZS5nZXRSb3dQb3NpdGlvbigpKSx7Y29sdW1uOnQ/aVswXTpPZShpKX0pOmUuZ2V0Q2VsbFBvc2l0aW9uKCk7Y29uc3Qgcj10aGlzLmZpbmROZXh0Q2VsbFRvRm9jdXNPbihzLHQsITEpO2lmKHIgaW5zdGFuY2VvZiB4YSlyLmZvY3VzQ2VsbCghMCk7ZWxzZSBpZihyKXJldHVybiB0aGlzLnRyeVRvRm9jdXNGdWxsV2lkdGhSb3coci5nZXRSb3dQb3NpdGlvbigpLHQpO3JldHVybiBiKHIpfWZpbmROZXh0Q2VsbFRvRm9jdXNPbihlLHQsaSl7bGV0IHM9ZTtmb3IoOzspe2UhPT1zJiYoZT1zKSx0fHwocz10aGlzLmdldExhc3RDZWxsT2ZDb2xTcGFuKHMpKSxzPXRoaXMuY2VsbE5hdmlnYXRpb25TZXJ2aWNlLmdldE5leHRUYWJiZWRDZWxsKHMsdCk7Y29uc3Qgcj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygidGFiVG9OZXh0Q2VsbCIpO2lmKGIocikpe2NvbnN0IG89cih7YmFja3dhcmRzOnQsZWRpdGluZzppLHByZXZpb3VzQ2VsbFBvc2l0aW9uOmUsbmV4dENlbGxQb3NpdGlvbjpzfHxudWxsfSk7YihvKT8oby5mbG9hdGluZyYmKGooInRhYlRvTmV4dENlbGxGdW5jIHJldHVybiB0eXBlIHNob3VsZCBoYXZlIGF0dHJpYnV0ZXM6IHJvd0luZGV4LCByb3dQaW5uZWQsIGNvbHVtbi4gSG93ZXZlciB5b3UgaGFkICdmbG9hdGluZycsIG1heWJlIHlvdSBtZWFudCAncm93UGlubmVkJz8iKSxvLnJvd1Bpbm5lZD1vLmZsb2F0aW5nKSxzPXtyb3dJbmRleDpvLnJvd0luZGV4LGNvbHVtbjpvLmNvbHVtbixyb3dQaW5uZWQ6by5yb3dQaW5uZWR9KTpzPW51bGx9aWYoIXMpcmV0dXJuIG51bGw7aWYocy5yb3dJbmRleDwwKXtjb25zdCBlPXRoaXMuaGVhZGVyTmF2aWdhdGlvblNlcnZpY2UuZ2V0SGVhZGVyUm93Q291bnQoKTtyZXR1cm4gdGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNIZWFkZXJQb3NpdGlvbih7aGVhZGVyUG9zaXRpb246e2hlYWRlclJvd0luZGV4OmUrcy5yb3dJbmRleCxjb2x1bW46cy5jb2x1bW59LGZyb21DZWxsOiEwfSksbnVsbH1jb25zdCBvPSJmdWxsUm93Ij09PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZWRpdFR5cGUiKTtpZihpJiYhbyl7aWYoIXRoaXMuaXNDZWxsRWRpdGFibGUocykpY29udGludWV9dGhpcy5lbnN1cmVDZWxsVmlzaWJsZShzKTtjb25zdCBuPXRoaXMuZ2V0Q2VsbEJ5UG9zaXRpb24ocyk7aWYoIW4pe2NvbnN0IGU9dGhpcy5yb3dSZW5kZXJlci5nZXRSb3dCeVBvc2l0aW9uKHMpO2lmKCFlfHwhZS5pc0Z1bGxXaWR0aCgpfHxpKWNvbnRpbnVlO3JldHVybiBlfWlmKCFuLmlzU3VwcHJlc3NOYXZpZ2FibGUoKSlyZXR1cm4gdGhpcy5yYW5nZVNlcnZpY2UmJnRoaXMucmFuZ2VTZXJ2aWNlLnNldFJhbmdlVG9DZWxsKHMpLG59fWlzQ2VsbEVkaXRhYmxlKGUpe2NvbnN0IHQ9dGhpcy5sb29rdXBSb3dOb2RlRm9yQ2VsbChlKTtyZXR1cm4hIXQmJmUuY29sdW1uLmlzQ2VsbEVkaXRhYmxlKHQpfWdldENlbGxCeVBvc2l0aW9uKGUpe2NvbnN0IHQ9dGhpcy5yb3dSZW5kZXJlci5nZXRSb3dCeVBvc2l0aW9uKGUpO3JldHVybiB0P3QuZ2V0Q2VsbEN0cmwoZS5jb2x1bW4pOm51bGx9bG9va3VwUm93Tm9kZUZvckNlbGwoZSl7cmV0dXJuInRvcCI9PT1lLnJvd1Bpbm5lZD90aGlzLnBpbm5lZFJvd01vZGVsLmdldFBpbm5lZFRvcFJvdyhlLnJvd0luZGV4KToiYm90dG9tIj09PWUucm93UGlubmVkP3RoaXMucGlubmVkUm93TW9kZWwuZ2V0UGlubmVkQm90dG9tUm93KGUucm93SW5kZXgpOnRoaXMucGFnaW5hdGlvblByb3h5LmdldFJvdyhlLnJvd0luZGV4KX1uYXZpZ2F0ZVRvTmV4dENlbGwoZSx0LGkscyl7bGV0IHI9aSxvPSExO2Zvcig7ciYmKHI9PT1pfHwhdGhpcy5pc1ZhbGlkTmF2aWdhdGVDZWxsKHIpKTspdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKT90PT09anMuTEVGVCYmKHI9dGhpcy5nZXRMYXN0Q2VsbE9mQ29sU3BhbihyKSk6dD09PWpzLlJJR0hUJiYocj10aGlzLmdldExhc3RDZWxsT2ZDb2xTcGFuKHIpKSxyPXRoaXMuY2VsbE5hdmlnYXRpb25TZXJ2aWNlLmdldE5leHRDZWxsVG9Gb2N1cyh0LHIpLG89RShyKTtpZihvJiZlJiZlLmtleT09PWpzLlVQJiYocj17cm93SW5kZXg6LTEscm93UGlubmVkOm51bGwsY29sdW1uOmkuY29sdW1ufSkscyl7Y29uc3Qgcz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygibmF2aWdhdGVUb05leHRDZWxsIik7aWYoYihzKSl7Y29uc3Qgbz1zKHtrZXk6dCxwcmV2aW91c0NlbGxQb3NpdGlvbjppLG5leHRDZWxsUG9zaXRpb246cnx8bnVsbCxldmVudDplfSk7YihvKT8oby5mbG9hdGluZyYmKGooInRhYlRvTmV4dENlbGxGdW5jIHJldHVybiB0eXBlIHNob3VsZCBoYXZlIGF0dHJpYnV0ZXM6IHJvd0luZGV4LCByb3dQaW5uZWQsIGNvbHVtbi4gSG93ZXZlciB5b3UgaGFkICdmbG9hdGluZycsIG1heWJlIHlvdSBtZWFudCAncm93UGlubmVkJz8iKSxvLnJvd1Bpbm5lZD1vLmZsb2F0aW5nKSxyPXtyb3dQaW5uZWQ6by5yb3dQaW5uZWQscm93SW5kZXg6by5yb3dJbmRleCxjb2x1bW46by5jb2x1bW59KTpyPW51bGx9fWlmKCFyKXJldHVybjtpZihyLnJvd0luZGV4PDApe2NvbnN0IHQ9dGhpcy5oZWFkZXJOYXZpZ2F0aW9uU2VydmljZS5nZXRIZWFkZXJSb3dDb3VudCgpO3JldHVybiB2b2lkIHRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzSGVhZGVyUG9zaXRpb24oe2hlYWRlclBvc2l0aW9uOntoZWFkZXJSb3dJbmRleDp0K3Iucm93SW5kZXgsY29sdW1uOmkuY29sdW1ufSxldmVudDplfHx2b2lkIDAsZnJvbUNlbGw6ITB9KX1jb25zdCBuPXRoaXMuZ2V0Tm9ybWFsaXNlZFBvc2l0aW9uKHIpO24/dGhpcy5mb2N1c1Bvc2l0aW9uKG4pOnRoaXMudHJ5VG9Gb2N1c0Z1bGxXaWR0aFJvdyhyKX1nZXROb3JtYWxpc2VkUG9zaXRpb24oZSl7dGhpcy5lbnN1cmVDZWxsVmlzaWJsZShlKTtjb25zdCB0PXRoaXMuZ2V0Q2VsbEJ5UG9zaXRpb24oZSk7cmV0dXJuIHQ/KGU9dC5nZXRDZWxsUG9zaXRpb24oKSx0aGlzLmVuc3VyZUNlbGxWaXNpYmxlKGUpLGUpOm51bGx9dHJ5VG9Gb2N1c0Z1bGxXaWR0aFJvdyhlLHQ9ITEpe2NvbnN0IGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCkscz10aGlzLnJvd1JlbmRlcmVyLmdldFJvd0J5UG9zaXRpb24oZSk7aWYoIXN8fCFzLmlzRnVsbFdpZHRoKCkpcmV0dXJuITE7Y29uc3Qgcj10aGlzLmZvY3VzU2VydmljZS5nZXRGb2N1c2VkQ2VsbCgpLG89e3Jvd0luZGV4OmUucm93SW5kZXgscm93UGlubmVkOmUucm93UGlubmVkLGNvbHVtbjplLmNvbHVtbnx8KHQ/T2UoaSk6aVswXSl9O3RoaXMuZm9jdXNQb3NpdGlvbihvKTtjb25zdCBuPW51bGwhPXImJnRoaXMucm93UG9zaXRpb25VdGlscy5iZWZvcmUobyxyKSxhPXt0eXBlOmx0LkVWRU5UX0ZVTExfV0lEVEhfUk9XX0ZPQ1VTRUQscm93SW5kZXg6by5yb3dJbmRleCxyb3dQaW5uZWQ6by5yb3dQaW5uZWQsY29sdW1uOm8uY29sdW1uLGlzRnVsbFdpZHRoQ2VsbDohMCxmbG9hdGluZzpvLnJvd1Bpbm5lZCxmcm9tQmVsb3c6bn07cmV0dXJuIHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoYSksITB9Zm9jdXNQb3NpdGlvbihlKXt0aGlzLmZvY3VzU2VydmljZS5zZXRGb2N1c2VkQ2VsbCh7cm93SW5kZXg6ZS5yb3dJbmRleCxjb2x1bW46ZS5jb2x1bW4scm93UGlubmVkOmUucm93UGlubmVkLGZvcmNlQnJvd3NlckZvY3VzOiEwfSksdGhpcy5yYW5nZVNlcnZpY2UmJnRoaXMucmFuZ2VTZXJ2aWNlLnNldFJhbmdlVG9DZWxsKGUpfWlzVmFsaWROYXZpZ2F0ZUNlbGwoZSl7cmV0dXJuISF0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuZ2V0Um93Tm9kZShlKX1nZXRMYXN0Q2VsbE9mQ29sU3BhbihlKXtjb25zdCB0PXRoaXMuZ2V0Q2VsbEJ5UG9zaXRpb24oZSk7aWYoIXQpcmV0dXJuIGU7Y29uc3QgaT10LmdldENvbFNwYW5uaW5nTGlzdCgpO3JldHVybiAxPT09aS5sZW5ndGg/ZTp7cm93SW5kZXg6ZS5yb3dJbmRleCxjb2x1bW46T2UoaSkscm93UGlubmVkOmUucm93UGlubmVkfX1lbnN1cmVDZWxsVmlzaWJsZShlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzR3JvdXBSb3dzU3RpY2t5KCksaT10aGlzLnJvd01vZGVsLmdldFJvdyhlLnJvd0luZGV4KTshKHQmJihudWxsPT1pP3ZvaWQgMDppLnN0aWNreSkpJiZFKGUucm93UGlubmVkKSYmdGhpcy5ncmlkQm9keUNvbi5nZXRTY3JvbGxGZWF0dXJlKCkuZW5zdXJlSW5kZXhWaXNpYmxlKGUucm93SW5kZXgpLGUuY29sdW1uLmlzUGlubmVkKCl8fHRoaXMuZ3JpZEJvZHlDb24uZ2V0U2Nyb2xsRmVhdHVyZSgpLmVuc3VyZUNvbHVtblZpc2libGUoZS5jb2x1bW4pfX07cmwoW2NlKCJtb3VzZUV2ZW50U2VydmljZSIpXSxvbC5wcm90b3R5cGUsIm1vdXNlRXZlbnRTZXJ2aWNlIix2b2lkIDApLHJsKFtjZSgicGFnaW5hdGlvblByb3h5IildLG9sLnByb3RvdHlwZSwicGFnaW5hdGlvblByb3h5Iix2b2lkIDApLHJsKFtjZSgiZm9jdXNTZXJ2aWNlIildLG9sLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLHJsKFtoZSgicmFuZ2VTZXJ2aWNlIildLG9sLnByb3RvdHlwZSwicmFuZ2VTZXJ2aWNlIix2b2lkIDApLHJsKFtjZSgiY29sdW1uTW9kZWwiKV0sb2wucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxybChbY2UoInJvd01vZGVsIildLG9sLnByb3RvdHlwZSwicm93TW9kZWwiLHZvaWQgMCkscmwoW2NlKCJjdHJsc1NlcnZpY2UiKV0sb2wucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCkscmwoW2NlKCJyb3dSZW5kZXJlciIpXSxvbC5wcm90b3R5cGUsInJvd1JlbmRlcmVyIix2b2lkIDApLHJsKFtjZSgiaGVhZGVyTmF2aWdhdGlvblNlcnZpY2UiKV0sb2wucHJvdG90eXBlLCJoZWFkZXJOYXZpZ2F0aW9uU2VydmljZSIsdm9pZCAwKSxybChbY2UoInJvd1Bvc2l0aW9uVXRpbHMiKV0sb2wucHJvdG90eXBlLCJyb3dQb3NpdGlvblV0aWxzIix2b2lkIDApLHJsKFtjZSgiY2VsbE5hdmlnYXRpb25TZXJ2aWNlIildLG9sLnByb3RvdHlwZSwiY2VsbE5hdmlnYXRpb25TZXJ2aWNlIix2b2lkIDApLHJsKFtjZSgicGlubmVkUm93TW9kZWwiKV0sb2wucHJvdG90eXBlLCJwaW5uZWRSb3dNb2RlbCIsdm9pZCAwKSxybChbYWVdLG9sLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksb2w9cmwoW2RlKCJuYXZpZ2F0aW9uU2VydmljZSIpXSxvbCk7dmFyIG5sPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGFsIGV4dGVuZHMgbW97Y29uc3RydWN0b3IoZSl7c3VwZXIoJzxkaXYgY2xhc3M9ImFnLXBvcHVwLWVkaXRvciIgdGFiaW5kZXg9Ii0xIi8+JyksdGhpcy5wYXJhbXM9ZX1wb3N0Q29uc3RydWN0KCl7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2Uuc2V0RG9tRGF0YSh0aGlzLmdldEd1aSgpLGFsLkRPTV9LRVlfUE9QVVBfRURJVE9SX1dSQVBQRVIsITApLHRoaXMuYWRkS2V5RG93bkxpc3RlbmVyKCl9YWRkS2V5RG93bkxpc3RlbmVyKCl7Y29uc3QgZT10aGlzLmdldEd1aSgpLHQ9dGhpcy5wYXJhbXM7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSwia2V5ZG93biIsZT0+e3pzKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLGUsdC5ub2RlLHQuY29sdW1uLCEwKXx8dC5vbktleURvd24oZSl9KX19YWwuRE9NX0tFWV9QT1BVUF9FRElUT1JfV1JBUFBFUj0icG9wdXBFZGl0b3JXcmFwcGVyIixubChbYWVdLGFsLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7Y2xhc3MgbGwgZXh0ZW5kcyBjcntjb25zdHJ1Y3RvcihlLHQsaSxzLHIpe3N1cGVyKCksdGhpcy5yZW5kZXJlclZlcnNpb249MCx0aGlzLmVkaXRvclZlcnNpb249MCx0aGlzLmJlYW5zPWUsdGhpcy5jb2x1bW49dC5nZXRDb2x1bW4oKSx0aGlzLnJvd05vZGU9dC5nZXRSb3dOb2RlKCksdGhpcy5yb3dDdHJsPXQuZ2V0Um93Q3RybCgpLHRoaXMuZVJvdz1zLHRoaXMuY2VsbEN0cmw9dDtjb25zdCBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO28uc2V0QXR0cmlidXRlKCJjb21wLWlkIiwiIit0aGlzLmdldENvbXBJZCgpKSx0aGlzLnNldFRlbXBsYXRlRnJvbUVsZW1lbnQobyk7Y29uc3Qgbj10aGlzLmdldEd1aSgpO3RoaXMuZm9yY2VXcmFwcGVyPXQuaXNGb3JjZVdyYXBwZXIoKSx0aGlzLnJlZnJlc2hXcmFwcGVyKCExKTtjb25zdCBhPShlLHQpPT57bnVsbCE9dCYmIiIhPXQ/bi5zZXRBdHRyaWJ1dGUoZSx0KTpuLnJlbW92ZUF0dHJpYnV0ZShlKX07WHQobix0LmdldENlbGxBcmlhUm9sZSgpKSxhKCJjb2wtaWQiLHQuZ2V0Q29sdW1uSWRTYW5pdGlzZWQoKSk7Y29uc3QgbD10LmdldFRhYkluZGV4KCk7dm9pZCAwIT09bCYmYSgidGFiaW5kZXgiLGwudG9TdHJpbmcoKSk7Y29uc3QgZD17YWRkT3JSZW1vdmVDc3NDbGFzczooZSx0KT0+dGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKGUsdCksc2V0VXNlclN0eWxlczplPT5FcyhuLGUpLGdldEZvY3VzYWJsZUVsZW1lbnQ6KCk9PnRoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLHNldEluY2x1ZGVTZWxlY3Rpb246ZT0+dGhpcy5pbmNsdWRlU2VsZWN0aW9uPWUsc2V0SW5jbHVkZVJvd0RyYWc6ZT0+dGhpcy5pbmNsdWRlUm93RHJhZz1lLHNldEluY2x1ZGVEbmRTb3VyY2U6ZT0+dGhpcy5pbmNsdWRlRG5kU291cmNlPWUsc2V0UmVuZGVyRGV0YWlsczooZSx0LGkpPT50aGlzLnNldFJlbmRlckRldGFpbHMoZSx0LGkpLHNldEVkaXREZXRhaWxzOihlLHQsaSk9PnRoaXMuc2V0RWRpdERldGFpbHMoZSx0LGkpLGdldENlbGxFZGl0b3I6KCk9PnRoaXMuY2VsbEVkaXRvcnx8bnVsbCxnZXRDZWxsUmVuZGVyZXI6KCk9PnRoaXMuY2VsbFJlbmRlcmVyfHxudWxsLGdldFBhcmVudE9mVmFsdWU6KCk9PnRoaXMuZ2V0UGFyZW50T2ZWYWx1ZSgpfTt0LnNldENvbXAoZCx0aGlzLmdldEd1aSgpLHRoaXMuZUNlbGxXcmFwcGVyLGkscil9Z2V0UGFyZW50T2ZWYWx1ZSgpe3JldHVybiB0aGlzLmVDZWxsVmFsdWU/dGhpcy5lQ2VsbFZhbHVlOnRoaXMuZUNlbGxXcmFwcGVyP3RoaXMuZUNlbGxXcmFwcGVyOnRoaXMuZ2V0R3VpKCl9c2V0UmVuZGVyRGV0YWlscyhlLHQsaSl7aWYodGhpcy5jZWxsRWRpdG9yJiYhdGhpcy5jZWxsRWRpdG9yUG9wdXBXcmFwcGVyKXJldHVybjt0aGlzLmZpcnN0UmVuZGVyPW51bGw9PXRoaXMuZmlyc3RSZW5kZXI7Y29uc3Qgcz10aGlzLnJlZnJlc2hXcmFwcGVyKCExKTtpZih0aGlzLnJlZnJlc2hFZGl0U3R5bGVzKCExKSxlKXshKGl8fHMpJiZ0aGlzLnJlZnJlc2hDZWxsUmVuZGVyZXIoZSl8fCh0aGlzLmRlc3Ryb3lSZW5kZXJlcigpLHRoaXMuY3JlYXRlQ2VsbFJlbmRlcmVySW5zdGFuY2UoZSkpfWVsc2UgdGhpcy5kZXN0cm95UmVuZGVyZXIoKSx0aGlzLmluc2VydFZhbHVlV2l0aG91dENlbGxSZW5kZXJlcih0KX1zZXRFZGl0RGV0YWlscyhlLHQsaSl7ZT90aGlzLmNyZWF0ZUNlbGxFZGl0b3JJbnN0YW5jZShlLHQsaSk6dGhpcy5kZXN0cm95RWRpdG9yKCl9cmVtb3ZlQ29udHJvbHMoKXt0aGlzLmNoZWNrYm94U2VsZWN0aW9uQ29tcD10aGlzLmJlYW5zLmNvbnRleHQuZGVzdHJveUJlYW4odGhpcy5jaGVja2JveFNlbGVjdGlvbkNvbXApLHRoaXMuZG5kU291cmNlQ29tcD10aGlzLmJlYW5zLmNvbnRleHQuZGVzdHJveUJlYW4odGhpcy5kbmRTb3VyY2VDb21wKSx0aGlzLnJvd0RyYWdnaW5nQ29tcD10aGlzLmJlYW5zLmNvbnRleHQuZGVzdHJveUJlYW4odGhpcy5yb3dEcmFnZ2luZ0NvbXApfXJlZnJlc2hXcmFwcGVyKGUpe2NvbnN0IHQ9dGhpcy5pbmNsdWRlUm93RHJhZ3x8dGhpcy5pbmNsdWRlRG5kU291cmNlfHx0aGlzLmluY2x1ZGVTZWxlY3Rpb24saT10fHx0aGlzLmZvcmNlV3JhcHBlcixzPWkmJm51bGw9PXRoaXMuZUNlbGxXcmFwcGVyO2lmKHMpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZS5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcmVzZW50YXRpb24iKSxlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCJhZy1jZWxsLXdyYXBwZXIiKSx0aGlzLmVDZWxsV3JhcHBlcj1lLHRoaXMuZ2V0R3VpKCkuYXBwZW5kQ2hpbGQodGhpcy5lQ2VsbFdyYXBwZXIpfWNvbnN0IHI9IWkmJm51bGwhPXRoaXMuZUNlbGxXcmFwcGVyO3ImJihmcyh0aGlzLmVDZWxsV3JhcHBlciksdGhpcy5lQ2VsbFdyYXBwZXI9dm9pZCAwKSx0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNlbGwtdmFsdWUiLCFpKTtjb25zdCBvPSFlJiZpLG49byYmbnVsbD09dGhpcy5lQ2VsbFZhbHVlO2lmKG4pe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2Uuc2V0QXR0cmlidXRlKCJyb2xlIiwicHJlc2VudGF0aW9uIiksZS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwiYWctY2VsbC12YWx1ZSIpLHRoaXMuZUNlbGxWYWx1ZT1lLHRoaXMuZUNlbGxXcmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuZUNlbGxWYWx1ZSl9Y29uc3QgYT0hbyYmbnVsbCE9dGhpcy5lQ2VsbFZhbHVlO2EmJihmcyh0aGlzLmVDZWxsVmFsdWUpLHRoaXMuZUNlbGxWYWx1ZT12b2lkIDApO2NvbnN0IGw9c3x8cnx8bnx8YTtyZXR1cm4gbCYmdGhpcy5yZW1vdmVDb250cm9scygpLGV8fHQmJnRoaXMuYWRkQ29udHJvbHMoKSxsfWFkZENvbnRyb2xzKCl7dGhpcy5pbmNsdWRlUm93RHJhZyYmbnVsbD09dGhpcy5yb3dEcmFnZ2luZ0NvbXAmJih0aGlzLnJvd0RyYWdnaW5nQ29tcD10aGlzLmNlbGxDdHJsLmNyZWF0ZVJvd0RyYWdDb21wKCksdGhpcy5yb3dEcmFnZ2luZ0NvbXAmJnRoaXMuZUNlbGxXcmFwcGVyLmluc2VydEJlZm9yZSh0aGlzLnJvd0RyYWdnaW5nQ29tcC5nZXRHdWkoKSx0aGlzLmVDZWxsVmFsdWUpKSx0aGlzLmluY2x1ZGVEbmRTb3VyY2UmJm51bGw9PXRoaXMuZG5kU291cmNlQ29tcCYmKHRoaXMuZG5kU291cmNlQ29tcD10aGlzLmNlbGxDdHJsLmNyZWF0ZURuZFNvdXJjZSgpLHRoaXMuZUNlbGxXcmFwcGVyLmluc2VydEJlZm9yZSh0aGlzLmRuZFNvdXJjZUNvbXAuZ2V0R3VpKCksdGhpcy5lQ2VsbFZhbHVlKSksdGhpcy5pbmNsdWRlU2VsZWN0aW9uJiZudWxsPT10aGlzLmNoZWNrYm94U2VsZWN0aW9uQ29tcCYmKHRoaXMuY2hlY2tib3hTZWxlY3Rpb25Db21wPXRoaXMuY2VsbEN0cmwuY3JlYXRlU2VsZWN0aW9uQ2hlY2tib3goKSx0aGlzLmVDZWxsV3JhcHBlci5pbnNlcnRCZWZvcmUodGhpcy5jaGVja2JveFNlbGVjdGlvbkNvbXAuZ2V0R3VpKCksdGhpcy5lQ2VsbFZhbHVlKSl9Y3JlYXRlQ2VsbEVkaXRvckluc3RhbmNlKGUsdCxpKXtjb25zdCBzPXRoaXMuZWRpdG9yVmVyc2lvbixyPWUubmV3QWdTdGFja0luc3RhbmNlKCk7aWYoIXIpcmV0dXJuO2NvbnN0e3BhcmFtczpvfT1lO3IudGhlbihlPT50aGlzLmFmdGVyQ2VsbEVkaXRvckNyZWF0ZWQocyxlLG8sdCxpKSk7RSh0aGlzLmNlbGxFZGl0b3IpJiZvLmNlbGxTdGFydGVkRWRpdCYmdGhpcy5jZWxsQ3RybC5mb2N1c0NlbGwoITApfWluc2VydFZhbHVlV2l0aG91dENlbGxSZW5kZXJlcihlKXtjb25zdCB0PXRoaXMuZ2V0UGFyZW50T2ZWYWx1ZSgpO21zKHQpO2NvbnN0IGk9bnVsbCE9ZT9mdChlLCEwKTpudWxsO251bGwhPWkmJih0LnRleHRDb250ZW50PWkpfWRlc3Ryb3lFZGl0b3JBbmRSZW5kZXJlcigpe3RoaXMuZGVzdHJveVJlbmRlcmVyKCksdGhpcy5kZXN0cm95RWRpdG9yKCl9ZGVzdHJveVJlbmRlcmVyKCl7Y29uc3R7Y29udGV4dDplfT10aGlzLmJlYW5zO3RoaXMuY2VsbFJlbmRlcmVyPWUuZGVzdHJveUJlYW4odGhpcy5jZWxsUmVuZGVyZXIpLGZzKHRoaXMuY2VsbFJlbmRlcmVyR3VpKSx0aGlzLmNlbGxSZW5kZXJlckd1aT1udWxsLHRoaXMucmVuZGVyZXJWZXJzaW9uKyt9ZGVzdHJveUVkaXRvcigpe2NvbnN0e2NvbnRleHQ6ZX09dGhpcy5iZWFuczt0aGlzLmhpZGVFZGl0b3JQb3B1cCYmdGhpcy5oaWRlRWRpdG9yUG9wdXAoKSx0aGlzLmhpZGVFZGl0b3JQb3B1cD12b2lkIDAsdGhpcy5jZWxsRWRpdG9yPWUuZGVzdHJveUJlYW4odGhpcy5jZWxsRWRpdG9yKSx0aGlzLmNlbGxFZGl0b3JQb3B1cFdyYXBwZXI9ZS5kZXN0cm95QmVhbih0aGlzLmNlbGxFZGl0b3JQb3B1cFdyYXBwZXIpLGZzKHRoaXMuY2VsbEVkaXRvckd1aSksdGhpcy5jZWxsRWRpdG9yR3VpPW51bGwsdGhpcy5lZGl0b3JWZXJzaW9uKyt9cmVmcmVzaENlbGxSZW5kZXJlcihlKXtpZihudWxsPT10aGlzLmNlbGxSZW5kZXJlcnx8bnVsbD09dGhpcy5jZWxsUmVuZGVyZXIucmVmcmVzaClyZXR1cm4hMTtpZih0aGlzLmNlbGxSZW5kZXJlckNsYXNzIT09ZS5jb21wb25lbnRDbGFzcylyZXR1cm4hMTtjb25zdCB0PXRoaXMuY2VsbFJlbmRlcmVyLnJlZnJlc2goZS5wYXJhbXMpO3JldHVybiEwPT09dHx8dm9pZCAwPT09dH1jcmVhdGVDZWxsUmVuZGVyZXJJbnN0YW5jZShlKXtjb25zdCB0PSF0aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQW5pbWF0aW9uRnJhbWUiKSxpPXRoaXMucmVuZGVyZXJWZXJzaW9uLHtjb21wb25lbnRDbGFzczpzfT1lLHI9KCk9PntpZih0aGlzLnJlbmRlcmVyVmVyc2lvbiE9PWl8fCF0aGlzLmlzQWxpdmUoKSlyZXR1cm47Y29uc3QgdD1lLm5ld0FnU3RhY2tJbnN0YW5jZSgpLHI9dGhpcy5hZnRlckNlbGxSZW5kZXJlckNyZWF0ZWQuYmluZCh0aGlzLGkscyk7dCYmdC50aGVuKHIpfTt0JiZ0aGlzLmZpcnN0UmVuZGVyP3RoaXMuYmVhbnMuYW5pbWF0aW9uRnJhbWVTZXJ2aWNlLmNyZWF0ZVRhc2socix0aGlzLnJvd05vZGUucm93SW5kZXgsImNyZWF0ZVRhc2tzUDIiKTpyKCl9Z2V0Q3RybCgpe3JldHVybiB0aGlzLmNlbGxDdHJsfWdldFJvd0N0cmwoKXtyZXR1cm4gdGhpcy5yb3dDdHJsfWdldENlbGxSZW5kZXJlcigpe3JldHVybiB0aGlzLmNlbGxSZW5kZXJlcn1nZXRDZWxsRWRpdG9yKCl7cmV0dXJuIHRoaXMuY2VsbEVkaXRvcn1hZnRlckNlbGxSZW5kZXJlckNyZWF0ZWQoZSx0LGkpe2lmKCF0aGlzLmlzQWxpdmUoKXx8ZSE9PXRoaXMucmVuZGVyZXJWZXJzaW9uKXRoaXMuYmVhbnMuY29udGV4dC5kZXN0cm95QmVhbihpKTtlbHNlIGlmKHRoaXMuY2VsbFJlbmRlcmVyPWksdGhpcy5jZWxsUmVuZGVyZXJDbGFzcz10LHRoaXMuY2VsbFJlbmRlcmVyR3VpPXRoaXMuY2VsbFJlbmRlcmVyLmdldEd1aSgpLG51bGwhPXRoaXMuY2VsbFJlbmRlcmVyR3VpKXtjb25zdCBlPXRoaXMuZ2V0UGFyZW50T2ZWYWx1ZSgpO21zKGUpLGUuYXBwZW5kQ2hpbGQodGhpcy5jZWxsUmVuZGVyZXJHdWkpfX1hZnRlckNlbGxFZGl0b3JDcmVhdGVkKGUsdCxpLHMscil7aWYoZSE9PXRoaXMuZWRpdG9yVmVyc2lvbilyZXR1cm4gdm9pZCB0aGlzLmJlYW5zLmNvbnRleHQuZGVzdHJveUJlYW4odCk7aWYodC5pc0NhbmNlbEJlZm9yZVN0YXJ0JiZ0LmlzQ2FuY2VsQmVmb3JlU3RhcnQoKSlyZXR1cm4gdGhpcy5iZWFucy5jb250ZXh0LmRlc3Ryb3lCZWFuKHQpLHZvaWQgdGhpcy5jZWxsQ3RybC5zdG9wRWRpdGluZyghMCk7aWYoIXQuZ2V0R3VpKXJldHVybiBjb25zb2xlLndhcm4oYEFHIEdyaWQ6IGNlbGxFZGl0b3IgZm9yIGNvbHVtbiAke3RoaXMuY29sdW1uLmdldElkKCl9IGlzIG1pc3NpbmcgZ2V0R3VpKCkgbWV0aG9kYCksdm9pZCB0aGlzLmJlYW5zLmNvbnRleHQuZGVzdHJveUJlYW4odCk7dGhpcy5jZWxsRWRpdG9yPXQsdGhpcy5jZWxsRWRpdG9yR3VpPXQuZ2V0R3VpKCk7Y29uc3Qgbz1zfHx2b2lkIDAhPT10LmlzUG9wdXAmJnQuaXNQb3B1cCgpO28/dGhpcy5hZGRQb3B1cENlbGxFZGl0b3IoaSxyKTp0aGlzLmFkZEluQ2VsbEVkaXRvcigpLHRoaXMucmVmcmVzaEVkaXRTdHlsZXMoITAsbyksdC5hZnRlckd1aUF0dGFjaGVkJiZ0LmFmdGVyR3VpQXR0YWNoZWQoKX1yZWZyZXNoRWRpdFN0eWxlcyhlLHQpe3ZhciBpO3RoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY2VsbC1pbmxpbmUtZWRpdGluZyIsZSYmIXQpLHRoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY2VsbC1wb3B1cC1lZGl0aW5nIixlJiYhIXQpLHRoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY2VsbC1ub3QtaW5saW5lLWVkaXRpbmciLCFlfHwhIXQpLG51bGw9PT0oaT10aGlzLnJvd0N0cmwpfHx2b2lkIDA9PT1pfHxpLnNldElubGluZUVkaXRpbmdDc3MoZSl9YWRkSW5DZWxsRWRpdG9yKCl7Y29uc3QgZT10aGlzLmdldEd1aSgpLHQ9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKTtpZihlLmNvbnRhaW5zKHQuYWN0aXZlRWxlbWVudCkmJmUuZm9jdXMoKSx0aGlzLmRlc3Ryb3lSZW5kZXJlcigpLHRoaXMucmVmcmVzaFdyYXBwZXIoITApLHRoaXMuY2xlYXJQYXJlbnRPZlZhbHVlKCksdGhpcy5jZWxsRWRpdG9yR3VpKXt0aGlzLmdldFBhcmVudE9mVmFsdWUoKS5hcHBlbmRDaGlsZCh0aGlzLmNlbGxFZGl0b3JHdWkpfX1hZGRQb3B1cENlbGxFZGl0b3IoZSx0KXsiZnVsbFJvdyI9PT10aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVkaXRUeXBlIikmJmNvbnNvbGUud2FybigiQUcgR3JpZDogcG9wdXAgY2VsbEVkaXRvciBkb2VzIG5vdCB3b3JrIHdpdGggZnVsbFJvd0VkaXQgLSB5b3UgY2Fubm90IHVzZSB0aGVtIGJvdGggLSBlaXRoZXIgdHVybiBvZmYgZnVsbFJvd0VkaXQsIG9yIHN0b3AgdXNpbmcgcG9wdXAgZWRpdG9ycy4iKTtjb25zdCBpPXRoaXMuY2VsbEVkaXRvcjt0aGlzLmNlbGxFZGl0b3JQb3B1cFdyYXBwZXI9dGhpcy5iZWFucy5jb250ZXh0LmNyZWF0ZUJlYW4obmV3IGFsKGUpKTtjb25zdCBzPXRoaXMuY2VsbEVkaXRvclBvcHVwV3JhcHBlci5nZXRHdWkoKTt0aGlzLmNlbGxFZGl0b3JHdWkmJnMuYXBwZW5kQ2hpbGQodGhpcy5jZWxsRWRpdG9yR3VpKTtjb25zdCByPXRoaXMuYmVhbnMucG9wdXBTZXJ2aWNlLG89dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdG9wRWRpdGluZ1doZW5DZWxsc0xvc2VGb2N1cyIpLG49bnVsbCE9dD90OmkuZ2V0UG9wdXBQb3NpdGlvbj9pLmdldFBvcHVwUG9zaXRpb24oKToib3ZlciIsYT10aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpLGw9e2VQb3B1cDpzLGNvbHVtbjp0aGlzLmNvbHVtbixyb3dOb2RlOnRoaXMucm93Tm9kZSx0eXBlOiJwb3B1cENlbGxFZGl0b3IiLGV2ZW50U291cmNlOnRoaXMuZ2V0R3VpKCkscG9zaXRpb246bixhbGlnblNpZGU6YT8icmlnaHQiOiJsZWZ0IixrZWVwV2l0aGluQm91bmRzOiEwfSxkPXIucG9zaXRpb25Qb3B1cEJ5Q29tcG9uZW50LmJpbmQocixsKSxjPXRoaXMuYmVhbnMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLGg9ci5hZGRQb3B1cCh7bW9kYWw6byxlQ2hpbGQ6cyxjbG9zZU9uRXNjOiEwLGNsb3NlZENhbGxiYWNrOigpPT57dGhpcy5jZWxsQ3RybC5vblBvcHVwRWRpdG9yQ2xvc2VkKCl9LGFuY2hvclRvRWxlbWVudDp0aGlzLmdldEd1aSgpLHBvc2l0aW9uQ2FsbGJhY2s6ZCxhcmlhTGFiZWw6YygiYXJpYUxhYmVsQ2VsbEVkaXRvciIsIkNlbGwgRWRpdG9yIil9KTtoJiYodGhpcy5oaWRlRWRpdG9yUG9wdXA9aC5oaWRlRnVuYyl9ZGV0YWNoKCl7dGhpcy5lUm93LnJlbW92ZUNoaWxkKHRoaXMuZ2V0R3VpKCkpfWRlc3Ryb3koKXt0aGlzLmNlbGxDdHJsLnN0b3BFZGl0aW5nKCksdGhpcy5kZXN0cm95RWRpdG9yQW5kUmVuZGVyZXIoKSx0aGlzLnJlbW92ZUNvbnRyb2xzKCksc3VwZXIuZGVzdHJveSgpfWNsZWFyUGFyZW50T2ZWYWx1ZSgpe2NvbnN0IGU9dGhpcy5nZXRHdWkoKSx0PXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCk7ZS5jb250YWlucyh0LmFjdGl2ZUVsZW1lbnQpJiZMaSgpJiZlLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiEwfSksbXModGhpcy5nZXRQYXJlbnRPZlZhbHVlKCkpfX1jbGFzcyBkbCBleHRlbmRzIGNye2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcigpLHRoaXMuY2VsbENvbXBzPXt9LHRoaXMuYmVhbnM9dCx0aGlzLnJvd0N0cmw9ZTtjb25zdCBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Muc2V0QXR0cmlidXRlKCJjb21wLWlkIiwiIit0aGlzLmdldENvbXBJZCgpKSxzLnNldEF0dHJpYnV0ZSgic3R5bGUiLHRoaXMuZ2V0SW5pdGlhbFN0eWxlKGkpKSx0aGlzLnNldFRlbXBsYXRlRnJvbUVsZW1lbnQocyk7Y29uc3Qgcj10aGlzLmdldEd1aSgpLG89ci5zdHlsZTt0aGlzLmRvbU9yZGVyPXRoaXMucm93Q3RybC5nZXREb21PcmRlcigpLFh0KHIsInJvdyIpO2NvbnN0IG49dGhpcy5yb3dDdHJsLmdldFRhYkluZGV4KCk7bnVsbCE9biYmci5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IixuLnRvU3RyaW5nKCkpO2NvbnN0IGE9e3NldERvbU9yZGVyOmU9PnRoaXMuZG9tT3JkZXI9ZSxzZXRDZWxsQ3RybHM6ZT0+dGhpcy5zZXRDZWxsQ3RybHMoZSksc2hvd0Z1bGxXaWR0aDplPT50aGlzLnNob3dGdWxsV2lkdGgoZSksZ2V0RnVsbFdpZHRoQ2VsbFJlbmRlcmVyOigpPT50aGlzLmdldEZ1bGxXaWR0aENlbGxSZW5kZXJlcigpLGFkZE9yUmVtb3ZlQ3NzQ2xhc3M6KGUsdCk9PnRoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcyhlLHQpLHNldFVzZXJTdHlsZXM6ZT0+RXMocixlKSxzZXRUb3A6ZT0+by50b3A9ZSxzZXRUcmFuc2Zvcm06ZT0+by50cmFuc2Zvcm09ZSxzZXRSb3dJbmRleDplPT5yLnNldEF0dHJpYnV0ZSgicm93LWluZGV4IixlKSxzZXRSb3dJZDplPT5yLnNldEF0dHJpYnV0ZSgicm93LWlkIixlKSxzZXRSb3dCdXNpbmVzc0tleTplPT5yLnNldEF0dHJpYnV0ZSgicm93LWJ1c2luZXNzLWtleSIsZSkscmVmcmVzaEZ1bGxXaWR0aDplPT50aGlzLnJlZnJlc2hGdWxsV2lkdGgoZSl9O2Uuc2V0Q29tcChhLHRoaXMuZ2V0R3VpKCksaSksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+e2UudW5zZXRDb21wKGkpfSl9Z2V0SW5pdGlhbFN0eWxlKGUpe2NvbnN0IHQ9dGhpcy5yb3dDdHJsLmdldEluaXRpYWxUcmFuc2Zvcm0oZSk7cmV0dXJuIHQ/InRyYW5zZm9ybTogIit0OiJ0b3A6ICIrdGhpcy5yb3dDdHJsLmdldEluaXRpYWxSb3dUb3AoZSl9c2hvd0Z1bGxXaWR0aChlKXtjb25zdCB0PWUubmV3QWdTdGFja0luc3RhbmNlKCk7dCYmdC50aGVuKGU9PntpZih0aGlzLmlzQWxpdmUoKSl7Y29uc3QgdD1lLmdldEd1aSgpO3RoaXMuZ2V0R3VpKCkuYXBwZW5kQ2hpbGQodCksdGhpcy5yb3dDdHJsLnNldHVwRGV0YWlsUm93QXV0b0hlaWdodCh0KSx0aGlzLnNldEZ1bGxXaWR0aFJvd0NvbXAoZSl9ZWxzZSB0aGlzLmJlYW5zLmNvbnRleHQuZGVzdHJveUJlYW4oZSl9KX1zZXRDZWxsQ3RybHMoZSl7Y29uc3QgdD1PYmplY3QuYXNzaWduKHt9LHRoaXMuY2VsbENvbXBzKTtlLmZvckVhY2goZT0+e2NvbnN0IGk9ZS5nZXRJbnN0YW5jZUlkKCk7bnVsbD09dGhpcy5jZWxsQ29tcHNbaV0/dGhpcy5uZXdDZWxsQ29tcChlKTp0W2ldPW51bGx9KTtjb25zdCBpPUcodCkuZmlsdGVyKGU9Pm51bGwhPWUpO3RoaXMuZGVzdHJveUNlbGxzKGkpLHRoaXMuZW5zdXJlRG9tT3JkZXIoZSl9ZW5zdXJlRG9tT3JkZXIoZSl7aWYoIXRoaXMuZG9tT3JkZXIpcmV0dXJuO2NvbnN0IHQ9W107ZS5mb3JFYWNoKGU9Pntjb25zdCBpPXRoaXMuY2VsbENvbXBzW2UuZ2V0SW5zdGFuY2VJZCgpXTtpJiZ0LnB1c2goaS5nZXRHdWkoKSl9KSx3cyh0aGlzLmdldEd1aSgpLHQpfW5ld0NlbGxDb21wKGUpe2NvbnN0IHQ9bmV3IGxsKHRoaXMuYmVhbnMsZSx0aGlzLnJvd0N0cmwuaXNQcmludExheW91dCgpLHRoaXMuZ2V0R3VpKCksdGhpcy5yb3dDdHJsLmlzRWRpdGluZygpKTt0aGlzLmNlbGxDb21wc1tlLmdldEluc3RhbmNlSWQoKV09dCx0aGlzLmdldEd1aSgpLmFwcGVuZENoaWxkKHQuZ2V0R3VpKCkpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksdGhpcy5kZXN0cm95QWxsQ2VsbHMoKX1kZXN0cm95QWxsQ2VsbHMoKXtjb25zdCBlPUcodGhpcy5jZWxsQ29tcHMpLmZpbHRlcihlPT5udWxsIT1lKTt0aGlzLmRlc3Ryb3lDZWxscyhlKX1zZXRGdWxsV2lkdGhSb3dDb21wKGUpe3RoaXMuZnVsbFdpZHRoQ2VsbFJlbmRlcmVyJiZjb25zb2xlLmVycm9yKCJBRyBHcmlkIC0gc2hvdWxkIG5vdCBiZSBzZXR0aW5nIGZ1bGxXaWR0aFJvd0NvbXBvbmVudCB0d2ljZSIpLHRoaXMuZnVsbFdpZHRoQ2VsbFJlbmRlcmVyPWUsdGhpcy5hZGREZXN0cm95RnVuYygoKT0+e3RoaXMuZnVsbFdpZHRoQ2VsbFJlbmRlcmVyPXRoaXMuYmVhbnMuY29udGV4dC5kZXN0cm95QmVhbih0aGlzLmZ1bGxXaWR0aENlbGxSZW5kZXJlcil9KX1nZXRGdWxsV2lkdGhDZWxsUmVuZGVyZXIoKXtyZXR1cm4gdGhpcy5mdWxsV2lkdGhDZWxsUmVuZGVyZXJ9ZGVzdHJveUNlbGxzKGUpe2UuZm9yRWFjaChlPT57aWYoIWUpcmV0dXJuO2NvbnN0IHQ9ZS5nZXRDdHJsKCkuZ2V0SW5zdGFuY2VJZCgpO3RoaXMuY2VsbENvbXBzW3RdPT09ZSYmKGUuZGV0YWNoKCksZS5kZXN0cm95KCksdGhpcy5jZWxsQ29tcHNbdF09bnVsbCl9KX1yZWZyZXNoRnVsbFdpZHRoKGUpe2NvbnN0e2Z1bGxXaWR0aENlbGxSZW5kZXJlcjp0fT10aGlzO2lmKCF0fHwhdC5yZWZyZXNoKXJldHVybiExO2NvbnN0IGk9ZSgpO3JldHVybiB0LnJlZnJlc2goaSl9fXZhciBjbD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBobCBleHRlbmRzIGNye2NvbnN0cnVjdG9yKCl7c3VwZXIoZnVuY3Rpb24oKXtjb25zdCBlPWNyLmVsZW1lbnRHZXR0aW5nQ3JlYXRlZC5nZXRBdHRyaWJ1dGUoIm5hbWUiKSx0PVhhLmdldFJvd0NvbnRhaW5lckNzc0NsYXNzZXMoZSk7bGV0IGk7cmV0dXJuIGk9ZT09PWphLkNFTlRFUnx8ZT09PWphLlRPUF9DRU5URVJ8fGU9PT1qYS5TVElDS1lfVE9QX0NFTlRFUnx8ZT09PWphLkJPVFRPTV9DRU5URVI/YDxkaXYgY2xhc3M9IiR7dC52aWV3cG9ydH0iIHJlZj0iZVZpZXdwb3J0IiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9IiR7dC5jb250YWluZXJ9IiByZWY9ImVDb250YWluZXIiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+YDpgPGRpdiBjbGFzcz0iJHt0LmNvbnRhaW5lcn0iIHJlZj0iZUNvbnRhaW5lciI+PC9kaXY+YCxpfSgpKSx0aGlzLnJvd0NvbXBzPXt9LHRoaXMubmFtZT1jci5lbGVtZW50R2V0dGluZ0NyZWF0ZWQuZ2V0QXR0cmlidXRlKCJuYW1lIiksdGhpcy50eXBlPUthKHRoaXMubmFtZSl9cG9zdENvbnN0cnVjdCgpe2NvbnN0IGU9e3NldFZpZXdwb3J0SGVpZ2h0OmU9PnRoaXMuZVZpZXdwb3J0LnN0eWxlLmhlaWdodD1lLHNldFJvd0N0cmxzOih7cm93Q3RybHM6ZX0pPT50aGlzLnNldFJvd0N0cmxzKGUpLHNldERvbU9yZGVyOmU9Pnt0aGlzLmRvbU9yZGVyPWV9LHNldENvbnRhaW5lcldpZHRoOmU9PnRoaXMuZUNvbnRhaW5lci5zdHlsZS53aWR0aD1lfTt0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBYYSh0aGlzLm5hbWUpKS5zZXRDb21wKGUsdGhpcy5lQ29udGFpbmVyLHRoaXMuZVZpZXdwb3J0KX1wcmVEZXN0cm95KCl7dGhpcy5zZXRSb3dDdHJscyhbXSl9c2V0Um93Q3RybHMoZSl7Y29uc3QgdD1PYmplY3QuYXNzaWduKHt9LHRoaXMucm93Q29tcHMpO3RoaXMucm93Q29tcHM9e30sdGhpcy5sYXN0UGxhY2VkRWxlbWVudD1udWxsO2UuZm9yRWFjaChlPT57Y29uc3QgaT1lLmdldEluc3RhbmNlSWQoKSxzPXRbaV07aWYocyl0aGlzLnJvd0NvbXBzW2ldPXMsZGVsZXRlIHRbaV0sdGhpcy5lbnN1cmVEb21PcmRlcihzLmdldEd1aSgpKTtlbHNle2lmKCFlLmdldFJvd05vZGUoKS5kaXNwbGF5ZWQpcmV0dXJuO2NvbnN0IHQ9bmV3IGRsKGUsdGhpcy5iZWFucyx0aGlzLnR5cGUpO3RoaXMucm93Q29tcHNbaV09dCx0aGlzLmFwcGVuZFJvdyh0LmdldEd1aSgpKX19KSxHKHQpLmZvckVhY2goZT0+e3RoaXMuZUNvbnRhaW5lci5yZW1vdmVDaGlsZChlLmdldEd1aSgpKSxlLmRlc3Ryb3koKX0pLFh0KHRoaXMuZUNvbnRhaW5lciwicm93Z3JvdXAiKX1hcHBlbmRSb3coZSl7dGhpcy5kb21PcmRlcj9icyh0aGlzLmVDb250YWluZXIsZSx0aGlzLmxhc3RQbGFjZWRFbGVtZW50KTp0aGlzLmVDb250YWluZXIuYXBwZW5kQ2hpbGQoZSksdGhpcy5sYXN0UGxhY2VkRWxlbWVudD1lfWVuc3VyZURvbU9yZGVyKGUpe3RoaXMuZG9tT3JkZXImJihTcyh0aGlzLmVDb250YWluZXIsZSx0aGlzLmxhc3RQbGFjZWRFbGVtZW50KSx0aGlzLmxhc3RQbGFjZWRFbGVtZW50PWUpfX1jbChbY2UoImJlYW5zIildLGhsLnByb3RvdHlwZSwiYmVhbnMiLHZvaWQgMCksY2woW3VyKCJlVmlld3BvcnQiKV0saGwucHJvdG90eXBlLCJlVmlld3BvcnQiLHZvaWQgMCksY2woW3VyKCJlQ29udGFpbmVyIildLGhsLnByb3RvdHlwZSwiZUNvbnRhaW5lciIsdm9pZCAwKSxjbChbYWVdLGhsLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksY2woW2xlXSxobC5wcm90b3R5cGUsInByZURlc3Ryb3kiLG51bGwpO3ZhciB1bD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBwbHtjb25zdHJ1Y3RvcihlKXt0aGlzLmNvbHVtbnNUb0FnZ3JlZ2F0ZT1bXSx0aGlzLmNvbHVtbnNUb0dyb3VwPVtdLHRoaXMuY29sdW1uc1RvUGl2b3Q9W10sdGhpcy5waW5uZWQ9ZX1vbkRyYWdFbnRlcihlKXtpZih0aGlzLmNsZWFyQ29sdW1uc0xpc3QoKSx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImZ1bmN0aW9uc1JlYWRPbmx5IikpcmV0dXJuO2NvbnN0IHQ9ZS5kcmFnSXRlbS5jb2x1bW5zO3QmJnQuZm9yRWFjaChlPT57ZS5pc1ByaW1hcnkoKSYmKGUuaXNBbnlGdW5jdGlvbkFjdGl2ZSgpfHwoZS5pc0FsbG93VmFsdWUoKT90aGlzLmNvbHVtbnNUb0FnZ3JlZ2F0ZS5wdXNoKGUpOmUuaXNBbGxvd1Jvd0dyb3VwKCk/dGhpcy5jb2x1bW5zVG9Hcm91cC5wdXNoKGUpOmUuaXNBbGxvd1Bpdm90KCkmJnRoaXMuY29sdW1uc1RvUGl2b3QucHVzaChlKSkpfSl9Z2V0SWNvbk5hbWUoKXtyZXR1cm4gdGhpcy5jb2x1bW5zVG9BZ2dyZWdhdGUubGVuZ3RoK3RoaXMuY29sdW1uc1RvR3JvdXAubGVuZ3RoK3RoaXMuY29sdW1uc1RvUGl2b3QubGVuZ3RoPjA/dGhpcy5waW5uZWQ/R28uSUNPTl9QSU5ORUQ6R28uSUNPTl9NT1ZFOm51bGx9b25EcmFnTGVhdmUoZSl7dGhpcy5jbGVhckNvbHVtbnNMaXN0KCl9Y2xlYXJDb2x1bW5zTGlzdCgpe3RoaXMuY29sdW1uc1RvQWdncmVnYXRlLmxlbmd0aD0wLHRoaXMuY29sdW1uc1RvR3JvdXAubGVuZ3RoPTAsdGhpcy5jb2x1bW5zVG9QaXZvdC5sZW5ndGg9MH1vbkRyYWdnaW5nKGUpe31vbkRyYWdTdG9wKGUpe3RoaXMuY29sdW1uc1RvQWdncmVnYXRlLmxlbmd0aD4wJiZ0aGlzLmNvbHVtbk1vZGVsLmFkZFZhbHVlQ29sdW1ucyh0aGlzLmNvbHVtbnNUb0FnZ3JlZ2F0ZSwidG9vbFBhbmVsRHJhZ0FuZERyb3AiKSx0aGlzLmNvbHVtbnNUb0dyb3VwLmxlbmd0aD4wJiZ0aGlzLmNvbHVtbk1vZGVsLmFkZFJvd0dyb3VwQ29sdW1ucyh0aGlzLmNvbHVtbnNUb0dyb3VwLCJ0b29sUGFuZWxEcmFnQW5kRHJvcCIpLHRoaXMuY29sdW1uc1RvUGl2b3QubGVuZ3RoPjAmJnRoaXMuY29sdW1uTW9kZWwuYWRkUGl2b3RDb2x1bW5zKHRoaXMuY29sdW1uc1RvUGl2b3QsInRvb2xQYW5lbERyYWdBbmREcm9wIil9fXVsKFtjZSgiY29sdW1uTW9kZWwiKV0scGwucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSx1bChbY2UoImdyaWRPcHRpb25zU2VydmljZSIpXSxwbC5wcm90b3R5cGUsImdyaWRPcHRpb25zU2VydmljZSIsdm9pZCAwKTtjbGFzcyBnbHtzdGF0aWMgYXR0ZW1wdE1vdmVDb2x1bW5zKGUpe2NvbnN0e2lzRnJvbUhlYWRlcjp0LGhEaXJlY3Rpb246aSx4UG9zaXRpb246cyxmcm9tRW50ZXI6cixmYWtlRXZlbnQ6byxwaW5uZWQ6bixncmlkT3B0aW9uc1NlcnZpY2U6YSxjb2x1bW5Nb2RlbDpsfT1lLGQ9aT09PVBvLkxlZnQsYz1pPT09UG8uUmlnaHQ7bGV0e2FsbE1vdmluZ0NvbHVtbnM6aH09ZTtpZih0KXtsZXQgZT1bXTtoLmZvckVhY2godD0+e3ZhciBpO2xldCBzPW51bGwscj10LmdldFBhcmVudCgpO2Zvcig7bnVsbCE9ciYmMT09PXIuZ2V0RGlzcGxheWVkTGVhZkNvbHVtbnMoKS5sZW5ndGg7KXM9cixyPXIuZ2V0UGFyZW50KCk7aWYobnVsbCE9cyl7KCEhKG51bGw9PT0oaT1zLmdldENvbEdyb3VwRGVmKCkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLm1hcnJ5Q2hpbGRyZW4pP3MuZ2V0UHJvdmlkZWRDb2x1bW5Hcm91cCgpLmdldExlYWZDb2x1bW5zKCk6cy5nZXRMZWFmQ29sdW1ucygpKS5mb3JFYWNoKHQ9PntlLmluY2x1ZGVzKHQpfHxlLnB1c2godCl9KX1lbHNlIGUuaW5jbHVkZXModCl8fGUucHVzaCh0KX0pLGg9ZX1jb25zdCB1PWguc2xpY2UoKTtsLnNvcnRDb2x1bW5zTGlrZUdyaWRDb2x1bW5zKHUpO2NvbnN0IHA9dGhpcy5jYWxjdWxhdGVWYWxpZE1vdmVzKHttb3ZpbmdDb2xzOnUsZHJhZ2dpbmdSaWdodDpjLHhQb3NpdGlvbjpzLHBpbm5lZDpuLGdyaWRPcHRpb25zU2VydmljZTphLGNvbHVtbk1vZGVsOmx9KSxnPXRoaXMuY2FsY3VsYXRlT2xkSW5kZXgodSxsKTtpZigwPT09cC5sZW5ndGgpcmV0dXJuO2NvbnN0IG09cFswXTtsZXQgZj1udWxsIT09ZyYmIXI7aWYodCYmKGY9bnVsbCE9PWcpLGYmJiFvKXtpZihkJiZtPj1nKXJldHVybjtpZihjJiZtPD1nKXJldHVybn1jb25zdCB2PWwuZ2V0QWxsRGlzcGxheWVkQ29sdW1ucygpO2xldCBDPVtdLHk9bnVsbDtmb3IobGV0IGU9MDtlPHAubGVuZ3RoO2UrKyl7Y29uc3QgdD1wW2VdLGk9bC5nZXRQcm9wb3NlZENvbHVtbk9yZGVyKHUsdCk7aWYoIWwuZG9lc09yZGVyUGFzc1J1bGVzKGkpKWNvbnRpbnVlO2NvbnN0IHM9aS5maWx0ZXIoZT0+di5pbmNsdWRlcyhlKSk7aWYobnVsbD09PXkpeT1zO2Vsc2UgaWYoIUFlKHMseSkpYnJlYWs7Y29uc3Qgcj10aGlzLmdyb3VwRnJhZ0NvdW50KGkpO0MucHVzaCh7bW92ZTp0LGZyYWdDb3VudDpyfSl9cmV0dXJuIDAhPT1DLmxlbmd0aD8oQy5zb3J0KChlLHQpPT5lLmZyYWdDb3VudC10LmZyYWdDb3VudCksdGhpcy5tb3ZlQ29sdW1ucyhoLENbMF0ubW92ZSwidWlDb2x1bW5Nb3ZlZCIsITEsbCkpOnZvaWQgMH1zdGF0aWMgbW92ZUNvbHVtbnMoZSx0LGkscyxyKXtyZXR1cm4gci5tb3ZlQ29sdW1ucyhlLHQsaSxzKSxzP251bGw6e2NvbHVtbnM6ZSx0b0luZGV4OnR9fXN0YXRpYyBjYWxjdWxhdGVPbGRJbmRleChlLHQpe2NvbnN0IGk9dC5nZXRBbGxHcmlkQ29sdW1ucygpLHM9TWUoZS5tYXAoZT0+aS5pbmRleE9mKGUpKSkscj1zWzBdO3JldHVybiBPZShzKS1yIT09cy5sZW5ndGgtMT9udWxsOnJ9c3RhdGljIGdyb3VwRnJhZ0NvdW50KGUpe2Z1bmN0aW9uIHQoZSl7bGV0IHQ9W10saT1lLmdldE9yaWdpbmFsUGFyZW50KCk7Zm9yKDtudWxsIT1pOyl0LnB1c2goaSksaT1pLmdldE9yaWdpbmFsUGFyZW50KCk7cmV0dXJuIHR9bGV0IGk9MDtmb3IobGV0IHM9MDtzPGUubGVuZ3RoLTE7cysrKXtsZXQgcj10KGVbc10pLG89dChlW3MrMV0pO1tyLG9dPXIubGVuZ3RoPm8ubGVuZ3RoP1tyLG9dOltvLHJdLHIuZm9yRWFjaChlPT57LTE9PT1vLmluZGV4T2YoZSkmJmkrK30pfXJldHVybiBpfXN0YXRpYyBjYWxjdWxhdGVWYWxpZE1vdmVzKGUpe2NvbnN0e21vdmluZ0NvbHM6dCxkcmFnZ2luZ1JpZ2h0OmkseFBvc2l0aW9uOnMscGlubmVkOnIsZ3JpZE9wdGlvbnNTZXJ2aWNlOm8sY29sdW1uTW9kZWw6bn09ZTtpZihvLmdldCgic3VwcHJlc3NNb3ZhYmxlQ29sdW1ucyIpfHx0LnNvbWUoZT0+ZS5nZXRDb2xEZWYoKS5zdXBwcmVzc01vdmFibGUpKXJldHVybltdO2NvbnN0IGE9bi5nZXREaXNwbGF5ZWRDb2x1bW5zKHIpLGw9bi5nZXRBbGxHcmlkQ29sdW1ucygpLGQ9YS5maWx0ZXIoZT0+QmUodCxlKSksYz1hLmZpbHRlcihlPT4hQmUodCxlKSksaD1sLmZpbHRlcihlPT4hQmUodCxlKSk7bGV0IHUscD0wLGc9cztpZihpKXtsZXQgZT0wO2QuZm9yRWFjaCh0PT5lKz10LmdldEFjdHVhbFdpZHRoKCkpLGctPWV9aWYoZz4wKXtmb3IobGV0IGU9MDtlPGMubGVuZ3RoO2UrKyl7aWYoZy09Y1tlXS5nZXRBY3R1YWxXaWR0aCgpLGc8MClicmVhaztwKyt9aSYmcCsrfWlmKHA+MCl7Y29uc3QgZT1jW3AtMV07dT1oLmluZGV4T2YoZSkrMX1lbHNlIHU9aC5pbmRleE9mKGNbMF0pLC0xPT09dSYmKHU9MCk7Y29uc3QgbT1bdV0sZj0oZSx0KT0+ZS10O2lmKGkpe2xldCBlPXUrMTtjb25zdCB0PWwubGVuZ3RoLTE7Zm9yKDtlPD10OyltLnB1c2goZSksZSsrO20uc29ydChmKX1lbHNle2xldCBlPXU7Y29uc3QgdD1sLmxlbmd0aC0xO2xldCBpPWxbZV07Zm9yKDtlPD10JiZhLmluZGV4T2YoaSk8MDspZSsrLG0ucHVzaChlKSxpPWxbZV07ZT11LTE7Y29uc3Qgcz0wO2Zvcig7ZT49czspbS5wdXNoKGUpLGUtLTttLnNvcnQoZikucmV2ZXJzZSgpfXJldHVybiBtfXN0YXRpYyBub3JtYWxpc2VYKGUsdCxpLHMscil7Y29uc3Qgbz1yLmdldEhlYWRlclJvd0NvbnRhaW5lckN0cmwodCkuZ2V0Vmlld3BvcnQoKTtpZihpJiYoZS09by5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0KSxzLmdldCgiZW5hYmxlUnRsIikpe2U9by5jbGllbnRXaWR0aC1lfXJldHVybiBudWxsPT10JiYoZSs9ci5nZXRDZW50ZXJSb3dDb250YWluZXJDdHJsKCkuZ2V0Q2VudGVyVmlld3BvcnRTY3JvbGxMZWZ0KCkpLGV9fXZhciBtbD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBmbHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMubmVlZFRvTW92ZUxlZnQ9ITEsdGhpcy5uZWVkVG9Nb3ZlUmlnaHQ9ITEsdGhpcy5sYXN0TW92ZWRJbmZvPW51bGwsdGhpcy5waW5uZWQ9ZSx0aGlzLmVDb250YWluZXI9dCx0aGlzLmNlbnRlckNvbnRhaW5lcj0hYihlKX1pbml0KCl7dGhpcy5jdHJsc1NlcnZpY2Uud2hlblJlYWR5KCgpPT57dGhpcy5ncmlkQm9keUNvbj10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKX0pfWdldEljb25OYW1lKCl7cmV0dXJuIHRoaXMucGlubmVkP0dvLklDT05fUElOTkVEOkdvLklDT05fTU9WRX1vbkRyYWdFbnRlcihlKXtjb25zdCB0PWUuZHJhZ0l0ZW0uY29sdW1ucztpZihlLmRyYWdTb3VyY2UudHlwZT09PUlvLlRvb2xQYW5lbCl0aGlzLnNldENvbHVtbnNWaXNpYmxlKHQsITAsInVpQ29sdW1uRHJhZ2dlZCIpO2Vsc2V7Y29uc3QgaT1lLmRyYWdJdGVtLnZpc2libGVTdGF0ZSxzPSh0fHxbXSkuZmlsdGVyKGU9PmlbZS5nZXRJZCgpXSk7dGhpcy5zZXRDb2x1bW5zVmlzaWJsZShzLCEwLCJ1aUNvbHVtbkRyYWdnZWQiKX10aGlzLnNldENvbHVtbnNQaW5uZWQodCx0aGlzLnBpbm5lZCwidWlDb2x1bW5EcmFnZ2VkIiksdGhpcy5vbkRyYWdnaW5nKGUsITAsITApfW9uRHJhZ0xlYXZlKCl7dGhpcy5lbnN1cmVJbnRlcnZhbENsZWFyZWQoKSx0aGlzLmxhc3RNb3ZlZEluZm89bnVsbH1zZXRDb2x1bW5zVmlzaWJsZShlLHQsaSl7aWYoZSl7Y29uc3Qgcz1lLmZpbHRlcihlPT4hZS5nZXRDb2xEZWYoKS5sb2NrVmlzaWJsZSk7dGhpcy5jb2x1bW5Nb2RlbC5zZXRDb2x1bW5zVmlzaWJsZShzLHQsaSl9fXNldENvbHVtbnNQaW5uZWQoZSx0LGkpe2lmKGUpe2NvbnN0IHM9ZS5maWx0ZXIoZT0+IWUuZ2V0Q29sRGVmKCkubG9ja1Bpbm5lZCk7dGhpcy5jb2x1bW5Nb2RlbC5zZXRDb2x1bW5zUGlubmVkKHMsdCxpKX19b25EcmFnU3RvcCgpe3RoaXMub25EcmFnZ2luZyh0aGlzLmxhc3REcmFnZ2luZ0V2ZW50LCExLCEwLCEwKSx0aGlzLmVuc3VyZUludGVydmFsQ2xlYXJlZCgpLHRoaXMubGFzdE1vdmVkSW5mbz1udWxsfWNoZWNrQ2VudGVyRm9yU2Nyb2xsaW5nKGUpe2lmKHRoaXMuY2VudGVyQ29udGFpbmVyKXtjb25zdCB0PXRoaXMuY3RybHNTZXJ2aWNlLmdldENlbnRlclJvd0NvbnRhaW5lckN0cmwoKS5nZXRDZW50ZXJWaWV3cG9ydFNjcm9sbExlZnQoKSxpPXQrdGhpcy5jdHJsc1NlcnZpY2UuZ2V0Q2VudGVyUm93Q29udGFpbmVyQ3RybCgpLmdldENlbnRlcldpZHRoKCk7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKT8odGhpcy5uZWVkVG9Nb3ZlUmlnaHQ9ZTx0KzUwLHRoaXMubmVlZFRvTW92ZUxlZnQ9ZT5pLTUwKToodGhpcy5uZWVkVG9Nb3ZlTGVmdD1lPHQrNTAsdGhpcy5uZWVkVG9Nb3ZlUmlnaHQ9ZT5pLTUwKSx0aGlzLm5lZWRUb01vdmVMZWZ0fHx0aGlzLm5lZWRUb01vdmVSaWdodD90aGlzLmVuc3VyZUludGVydmFsU3RhcnRlZCgpOnRoaXMuZW5zdXJlSW50ZXJ2YWxDbGVhcmVkKCl9fW9uRHJhZ2dpbmcoZT10aGlzLmxhc3REcmFnZ2luZ0V2ZW50LHQ9ITEsaT0hMSxzPSExKXt2YXIgcjtpZihzKXtpZih0aGlzLmxhc3RNb3ZlZEluZm8pe2NvbnN0e2NvbHVtbnM6ZSx0b0luZGV4OnR9PXRoaXMubGFzdE1vdmVkSW5mbztnbC5tb3ZlQ29sdW1ucyhlLHQsInVpQ29sdW1uTW92ZWQiLCEwLHRoaXMuY29sdW1uTW9kZWwpfXJldHVybn1pZih0aGlzLmxhc3REcmFnZ2luZ0V2ZW50PWUsRShlLmhEaXJlY3Rpb24pKXJldHVybjtjb25zdCBvPWdsLm5vcm1hbGlzZVgoZS54LHRoaXMucGlubmVkLCExLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLHRoaXMuY3RybHNTZXJ2aWNlKTt0fHx0aGlzLmNoZWNrQ2VudGVyRm9yU2Nyb2xsaW5nKG8pO2NvbnN0IG49dGhpcy5ub3JtYWxpc2VEaXJlY3Rpb24oZS5oRGlyZWN0aW9uKSxhPWUuZHJhZ1NvdXJjZS50eXBlLGw9KG51bGw9PT0ocj1lLmRyYWdTb3VyY2UuZ2V0RHJhZ0l0ZW0oKS5jb2x1bW5zKXx8dm9pZCAwPT09cj92b2lkIDA6ci5maWx0ZXIoZT0+IWUuZ2V0Q29sRGVmKCkubG9ja1Bpbm5lZHx8ZS5nZXRQaW5uZWQoKT09dGhpcy5waW5uZWQpKXx8W10sZD1nbC5hdHRlbXB0TW92ZUNvbHVtbnMoe2FsbE1vdmluZ0NvbHVtbnM6bCxpc0Zyb21IZWFkZXI6YT09PUlvLkhlYWRlckNlbGwsaERpcmVjdGlvbjpuLHhQb3NpdGlvbjpvLHBpbm5lZDp0aGlzLnBpbm5lZCxmcm9tRW50ZXI6dCxmYWtlRXZlbnQ6aSxncmlkT3B0aW9uc1NlcnZpY2U6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsY29sdW1uTW9kZWw6dGhpcy5jb2x1bW5Nb2RlbH0pO2QmJih0aGlzLmxhc3RNb3ZlZEluZm89ZCl9bm9ybWFsaXNlRGlyZWN0aW9uKGUpe2lmKCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpKXJldHVybiBlO3N3aXRjaChlKXtjYXNlIFBvLkxlZnQ6cmV0dXJuIFBvLlJpZ2h0O2Nhc2UgUG8uUmlnaHQ6cmV0dXJuIFBvLkxlZnQ7ZGVmYXVsdDpjb25zb2xlLmVycm9yKCJBRyBHcmlkOiBVbmtub3duIGRpcmVjdGlvbiAiK2UpfX1lbnN1cmVJbnRlcnZhbFN0YXJ0ZWQoKXt0aGlzLm1vdmluZ0ludGVydmFsSWR8fCh0aGlzLmludGVydmFsQ291bnQ9MCx0aGlzLmZhaWxlZE1vdmVBdHRlbXB0cz0wLHRoaXMubW92aW5nSW50ZXJ2YWxJZD13aW5kb3cuc2V0SW50ZXJ2YWwodGhpcy5tb3ZlSW50ZXJ2YWwuYmluZCh0aGlzKSwxMDApLHRoaXMubmVlZFRvTW92ZUxlZnQ/dGhpcy5kcmFnQW5kRHJvcFNlcnZpY2Uuc2V0R2hvc3RJY29uKEdvLklDT05fTEVGVCwhMCk6dGhpcy5kcmFnQW5kRHJvcFNlcnZpY2Uuc2V0R2hvc3RJY29uKEdvLklDT05fUklHSFQsITApKX1lbnN1cmVJbnRlcnZhbENsZWFyZWQoKXt0aGlzLm1vdmluZ0ludGVydmFsSWQmJih3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLm1vdmluZ0ludGVydmFsSWQpLHRoaXMubW92aW5nSW50ZXJ2YWxJZD1udWxsLHRoaXMuZHJhZ0FuZERyb3BTZXJ2aWNlLnNldEdob3N0SWNvbihHby5JQ09OX01PVkUpKX1tb3ZlSW50ZXJ2YWwoKXtsZXQgZTt0aGlzLmludGVydmFsQ291bnQrKyxlPTEwKzUqdGhpcy5pbnRlcnZhbENvdW50LGU+MTAwJiYoZT0xMDApO2xldCB0PW51bGw7Y29uc3QgaT10aGlzLmdyaWRCb2R5Q29uLmdldFNjcm9sbEZlYXR1cmUoKTtpZih0aGlzLm5lZWRUb01vdmVMZWZ0P3Q9aS5zY3JvbGxIb3Jpem9udGFsbHkoLWUpOnRoaXMubmVlZFRvTW92ZVJpZ2h0JiYodD1pLnNjcm9sbEhvcml6b250YWxseShlKSksMCE9PXQpdGhpcy5vbkRyYWdnaW5nKHRoaXMubGFzdERyYWdnaW5nRXZlbnQpLHRoaXMuZmFpbGVkTW92ZUF0dGVtcHRzPTA7ZWxzZXt0aGlzLmZhaWxlZE1vdmVBdHRlbXB0cysrO2NvbnN0IGU9dGhpcy5sYXN0RHJhZ2dpbmdFdmVudC5kcmFnSXRlbS5jb2x1bW5zLmZpbHRlcihlPT4hZS5nZXRDb2xEZWYoKS5sb2NrUGlubmVkKTtpZihlLmxlbmd0aD4wJiYodGhpcy5kcmFnQW5kRHJvcFNlcnZpY2Uuc2V0R2hvc3RJY29uKEdvLklDT05fUElOTkVEKSx0aGlzLmZhaWxlZE1vdmVBdHRlbXB0cz43KSl7Y29uc3QgdD10aGlzLm5lZWRUb01vdmVMZWZ0PyJsZWZ0IjoicmlnaHQiO3RoaXMuc2V0Q29sdW1uc1Bpbm5lZChlLHQsInVpQ29sdW1uRHJhZ2dlZCIpLHRoaXMuZHJhZ0FuZERyb3BTZXJ2aWNlLm51ZGdlKCl9fX19bWwoW2NlKCJjb2x1bW5Nb2RlbCIpXSxmbC5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLG1sKFtjZSgiZHJhZ0FuZERyb3BTZXJ2aWNlIildLGZsLnByb3RvdHlwZSwiZHJhZ0FuZERyb3BTZXJ2aWNlIix2b2lkIDApLG1sKFtjZSgiZ3JpZE9wdGlvbnNTZXJ2aWNlIildLGZsLnByb3RvdHlwZSwiZ3JpZE9wdGlvbnNTZXJ2aWNlIix2b2lkIDApLG1sKFtjZSgiY3RybHNTZXJ2aWNlIildLGZsLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLG1sKFthZV0sZmwucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgdmw9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgQ2wgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCksdGhpcy5waW5uZWQ9ZSx0aGlzLmVDb250YWluZXI9dH1wb3N0Q29uc3RydWN0KCl7dGhpcy5jdHJsc1NlcnZpY2Uud2hlblJlYWR5KGU9Pntzd2l0Y2godGhpcy5waW5uZWQpe2Nhc2UibGVmdCI6dGhpcy5lU2Vjb25kYXJ5Q29udGFpbmVycz1bW2UuZ3JpZEJvZHlDdHJsLmdldEJvZHlWaWV3cG9ydEVsZW1lbnQoKSxlLmxlZnRSb3dDb250YWluZXJDdHJsLmdldENvbnRhaW5lckVsZW1lbnQoKV0sW2UuYm90dG9tTGVmdFJvd0NvbnRhaW5lckN0cmwuZ2V0Q29udGFpbmVyRWxlbWVudCgpXSxbZS50b3BMZWZ0Um93Q29udGFpbmVyQ3RybC5nZXRDb250YWluZXJFbGVtZW50KCldXTticmVhaztjYXNlInJpZ2h0Ijp0aGlzLmVTZWNvbmRhcnlDb250YWluZXJzPVtbZS5ncmlkQm9keUN0cmwuZ2V0Qm9keVZpZXdwb3J0RWxlbWVudCgpLGUucmlnaHRSb3dDb250YWluZXJDdHJsLmdldENvbnRhaW5lckVsZW1lbnQoKV0sW2UuYm90dG9tUmlnaHRSb3dDb250YWluZXJDdHJsLmdldENvbnRhaW5lckVsZW1lbnQoKV0sW2UudG9wUmlnaHRSb3dDb250YWluZXJDdHJsLmdldENvbnRhaW5lckVsZW1lbnQoKV1dO2JyZWFrO2RlZmF1bHQ6dGhpcy5lU2Vjb25kYXJ5Q29udGFpbmVycz1bW2UuZ3JpZEJvZHlDdHJsLmdldEJvZHlWaWV3cG9ydEVsZW1lbnQoKSxlLmNlbnRlclJvd0NvbnRhaW5lckN0cmwuZ2V0Vmlld3BvcnRFbGVtZW50KCldLFtlLmJvdHRvbUNlbnRlclJvd0NvbnRhaW5lckN0cmwuZ2V0Vmlld3BvcnRFbGVtZW50KCldLFtlLnRvcENlbnRlclJvd0NvbnRhaW5lckN0cmwuZ2V0Vmlld3BvcnRFbGVtZW50KCldXX19KX1pc0ludGVyZXN0ZWRJbihlKXtyZXR1cm4gZT09PUlvLkhlYWRlckNlbGx8fGU9PT1Jby5Ub29sUGFuZWwmJnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiYWxsb3dEcmFnRnJvbUNvbHVtbnNUb29sUGFuZWwiKX1nZXRTZWNvbmRhcnlDb250YWluZXJzKCl7cmV0dXJuIHRoaXMuZVNlY29uZGFyeUNvbnRhaW5lcnN9Z2V0Q29udGFpbmVyKCl7cmV0dXJuIHRoaXMuZUNvbnRhaW5lcn1pbml0KCl7dGhpcy5tb3ZlQ29sdW1uRmVhdHVyZT10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBmbCh0aGlzLnBpbm5lZCx0aGlzLmVDb250YWluZXIpKSx0aGlzLmJvZHlEcm9wUGl2b3RUYXJnZXQ9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcGwodGhpcy5waW5uZWQpKSx0aGlzLmRyYWdBbmREcm9wU2VydmljZS5hZGREcm9wVGFyZ2V0KHRoaXMpfWdldEljb25OYW1lKCl7cmV0dXJuIHRoaXMuY3VycmVudERyb3BMaXN0ZW5lci5nZXRJY29uTmFtZSgpfWlzRHJvcENvbHVtbkluUGl2b3RNb2RlKGUpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RNb2RlKCkmJmUuZHJhZ1NvdXJjZS50eXBlPT09SW8uVG9vbFBhbmVsfW9uRHJhZ0VudGVyKGUpe3RoaXMuY3VycmVudERyb3BMaXN0ZW5lcj10aGlzLmlzRHJvcENvbHVtbkluUGl2b3RNb2RlKGUpP3RoaXMuYm9keURyb3BQaXZvdFRhcmdldDp0aGlzLm1vdmVDb2x1bW5GZWF0dXJlLHRoaXMuY3VycmVudERyb3BMaXN0ZW5lci5vbkRyYWdFbnRlcihlKX1vbkRyYWdMZWF2ZShlKXt0aGlzLmN1cnJlbnREcm9wTGlzdGVuZXIub25EcmFnTGVhdmUoZSl9b25EcmFnZ2luZyhlKXt0aGlzLmN1cnJlbnREcm9wTGlzdGVuZXIub25EcmFnZ2luZyhlKX1vbkRyYWdTdG9wKGUpe3RoaXMuY3VycmVudERyb3BMaXN0ZW5lci5vbkRyYWdTdG9wKGUpfX12bChbY2UoImRyYWdBbmREcm9wU2VydmljZSIpXSxDbC5wcm90b3R5cGUsImRyYWdBbmREcm9wU2VydmljZSIsdm9pZCAwKSx2bChbY2UoImNvbHVtbk1vZGVsIildLENsLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksdmwoW2NlKCJjdHJsc1NlcnZpY2UiKV0sQ2wucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksdmwoW2FlXSxDbC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLHZsKFthZV0sQ2wucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgeWw9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgU2wgZXh0ZW5kcyBxbntjb25zdHJ1Y3RvcihlKXtzdXBlcihTbC5URU1QTEFURSxlKSx0aGlzLmhlYWRlckNvbXBWZXJzaW9uPTAsdGhpcy5jb2x1bW49ZS5nZXRDb2x1bW5Hcm91cENoaWxkKCksdGhpcy5waW5uZWQ9ZS5nZXRQaW5uZWQoKX1wb3N0Q29uc3RydWN0KCl7Y29uc3QgZT10aGlzLmdldEd1aSgpO3ZhciB0LGk7dD0iY29sLWlkIixudWxsIT0oaT10aGlzLmNvbHVtbi5nZXRDb2xJZCgpKSYmIiIhPWk/ZS5zZXRBdHRyaWJ1dGUodCxpKTplLnJlbW92ZUF0dHJpYnV0ZSh0KTtjb25zdCBzPXtzZXRXaWR0aDp0PT5lLnN0eWxlLndpZHRoPXQsYWRkT3JSZW1vdmVDc3NDbGFzczooZSx0KT0+dGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKGUsdCksc2V0QXJpYVNvcnQ6dD0+dD9TaShlLHQpOndpKGUpLHNldFVzZXJDb21wRGV0YWlsczplPT50aGlzLnNldFVzZXJDb21wRGV0YWlscyhlKSxnZXRVc2VyQ29tcEluc3RhbmNlOigpPT50aGlzLmhlYWRlckNvbXB9O3RoaXMuY3RybC5zZXRDb21wKHMsdGhpcy5nZXRHdWkoKSx0aGlzLmVSZXNpemUsdGhpcy5lSGVhZGVyQ29tcFdyYXBwZXIpO2NvbnN0IHI9dGhpcy5jdHJsLmdldFNlbGVjdEFsbEd1aSgpO3RoaXMuZVJlc2l6ZS5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyZW5kIixyKX1kZXN0cm95SGVhZGVyQ29tcCgpe3RoaXMuaGVhZGVyQ29tcCYmKHRoaXMuZUhlYWRlckNvbXBXcmFwcGVyLnJlbW92ZUNoaWxkKHRoaXMuaGVhZGVyQ29tcEd1aSksdGhpcy5oZWFkZXJDb21wPXRoaXMuZGVzdHJveUJlYW4odGhpcy5oZWFkZXJDb21wKSx0aGlzLmhlYWRlckNvbXBHdWk9dm9pZCAwKX1zZXRVc2VyQ29tcERldGFpbHMoZSl7dGhpcy5oZWFkZXJDb21wVmVyc2lvbisrO2NvbnN0IHQ9dGhpcy5oZWFkZXJDb21wVmVyc2lvbjtlLm5ld0FnU3RhY2tJbnN0YW5jZSgpLnRoZW4oZT0+dGhpcy5hZnRlckNvbXBDcmVhdGVkKHQsZSkpfWFmdGVyQ29tcENyZWF0ZWQoZSx0KXtlPT10aGlzLmhlYWRlckNvbXBWZXJzaW9uJiZ0aGlzLmlzQWxpdmUoKT8odGhpcy5kZXN0cm95SGVhZGVyQ29tcCgpLHRoaXMuaGVhZGVyQ29tcD10LHRoaXMuaGVhZGVyQ29tcEd1aT10LmdldEd1aSgpLHRoaXMuZUhlYWRlckNvbXBXcmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuaGVhZGVyQ29tcEd1aSksdGhpcy5jdHJsLnNldERyYWdTb3VyY2UodGhpcy5nZXRHdWkoKSkpOnRoaXMuZGVzdHJveUJlYW4odCl9fVNsLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1oZWFkZXItY2VsbCIgcm9sZT0iY29sdW1uaGVhZGVyIj5cbiAgICAgICAgICAgIDxkaXYgcmVmPSJlUmVzaXplIiBjbGFzcz0iYWctaGVhZGVyLWNlbGwtcmVzaXplIiByb2xlPSJwcmVzZW50YXRpb24iPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiByZWY9ImVIZWFkZXJDb21wV3JhcHBlciIgY2xhc3M9ImFnLWhlYWRlci1jZWxsLWNvbXAtd3JhcHBlciIgcm9sZT0icHJlc2VudGF0aW9uIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+Jyx5bChbdXIoImVSZXNpemUiKV0sU2wucHJvdG90eXBlLCJlUmVzaXplIix2b2lkIDApLHlsKFt1cigiZUhlYWRlckNvbXBXcmFwcGVyIildLFNsLnByb3RvdHlwZSwiZUhlYWRlckNvbXBXcmFwcGVyIix2b2lkIDApLHlsKFthZV0sU2wucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSx5bChbbGVdLFNsLnByb3RvdHlwZSwiZGVzdHJveUhlYWRlckNvbXAiLG51bGwpO3ZhciB3bD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBibCBleHRlbmRzIHFue2NvbnN0cnVjdG9yKGUpe3N1cGVyKGJsLlRFTVBMQVRFLGUpfXBvc3RDb25zdHJ1Y3QoKXtjb25zdCBlPXRoaXMuZ2V0R3VpKCk7ZS5zZXRBdHRyaWJ1dGUoImNvbC1pZCIsdGhpcy5jdHJsLmdldENvbElkKCkpO2NvbnN0IHQ9e2FkZE9yUmVtb3ZlQ3NzQ2xhc3M6KGUsdCk9PnRoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcyhlLHQpLHNldFJlc2l6YWJsZURpc3BsYXllZDplPT5pcyh0aGlzLmVSZXNpemUsZSksc2V0V2lkdGg6dD0+ZS5zdHlsZS53aWR0aD10LHNldEFyaWFFeHBhbmRlZDp0PT57cmV0dXJuIGk9ImFyaWEtZXhwYW5kZWQiLG51bGwhPShzPXQpP2Uuc2V0QXR0cmlidXRlKGkscyk6ZS5yZW1vdmVBdHRyaWJ1dGUoaSk7dmFyIGksc30sc2V0VXNlckNvbXBEZXRhaWxzOmU9PnRoaXMuc2V0VXNlckNvbXBEZXRhaWxzKGUpLGdldFVzZXJDb21wSW5zdGFuY2U6KCk9PnRoaXMuaGVhZGVyR3JvdXBDb21wfTt0aGlzLmN0cmwuc2V0Q29tcCh0LGUsdGhpcy5lUmVzaXplKX1zZXRVc2VyQ29tcERldGFpbHMoZSl7ZS5uZXdBZ1N0YWNrSW5zdGFuY2UoKS50aGVuKGU9PnRoaXMuYWZ0ZXJIZWFkZXJDb21wQ3JlYXRlZChlKSl9YWZ0ZXJIZWFkZXJDb21wQ3JlYXRlZChlKXtjb25zdCB0PSgpPT50aGlzLmRlc3Ryb3lCZWFuKGUpO2lmKCF0aGlzLmlzQWxpdmUoKSlyZXR1cm4gdm9pZCB0KCk7Y29uc3QgaT10aGlzLmdldEd1aSgpLHM9ZS5nZXRHdWkoKTtpLmFwcGVuZENoaWxkKHMpLHRoaXMuYWRkRGVzdHJveUZ1bmModCksdGhpcy5oZWFkZXJHcm91cENvbXA9ZSx0aGlzLmN0cmwuc2V0RHJhZ1NvdXJjZShpKX19YmwuVEVNUExBVEU9JzxkaXYgY2xhc3M9ImFnLWhlYWRlci1ncm91cC1jZWxsIiByb2xlPSJjb2x1bW5oZWFkZXIiPlxuICAgICAgICAgICAgPGRpdiByZWY9ImVSZXNpemUiIGNsYXNzPSJhZy1oZWFkZXItY2VsbC1yZXNpemUiIHJvbGU9InByZXNlbnRhdGlvbiI+PC9kaXY+XG4gICAgICAgIDwvZGl2Picsd2woW3VyKCJlUmVzaXplIildLGJsLnByb3RvdHlwZSwiZVJlc2l6ZSIsdm9pZCAwKSx3bChbYWVdLGJsLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIEVsLFJsPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59OyFmdW5jdGlvbihlKXtlLkNPTFVNTl9HUk9VUD0iZ3JvdXAiLGUuQ09MVU1OPSJjb2x1bW4iLGUuRkxPQVRJTkdfRklMVEVSPSJmaWx0ZXIifShFbHx8KEVsPXt9KSk7Y2xhc3MgeGwgZXh0ZW5kcyBjcntjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuaGVhZGVyQ29tcHM9e30sdGhpcy5jdHJsPWUsdGhpcy5zZXRUZW1wbGF0ZShgPGRpdiBjbGFzcz0iJHt0aGlzLmN0cmwuZ2V0SGVhZGVyUm93Q2xhc3MoKX0iIHJvbGU9InJvdyI+PC9kaXY+YCl9aW5pdCgpe2ZpKHRoaXMuZ2V0R3VpKCksdGhpcy5jdHJsLmdldEFyaWFSb3dJbmRleCgpKTtjb25zdCBlPXtzZXRIZWlnaHQ6ZT0+dGhpcy5nZXRHdWkoKS5zdHlsZS5oZWlnaHQ9ZSxzZXRUb3A6ZT0+dGhpcy5nZXRHdWkoKS5zdHlsZS50b3A9ZSxzZXRIZWFkZXJDdHJsczooZSx0KT0+dGhpcy5zZXRIZWFkZXJDdHJscyhlLHQpLHNldFdpZHRoOmU9PnRoaXMuZ2V0R3VpKCkuc3R5bGUud2lkdGg9ZX07dGhpcy5jdHJsLnNldENvbXAoZSl9ZGVzdHJveUhlYWRlckN0cmxzKCl7dGhpcy5zZXRIZWFkZXJDdHJscyhbXSwhMSl9c2V0SGVhZGVyQ3RybHMoZSx0KXtpZighdGhpcy5pc0FsaXZlKCkpcmV0dXJuO2NvbnN0IGk9dGhpcy5oZWFkZXJDb21wcztpZih0aGlzLmhlYWRlckNvbXBzPXt9LGUuZm9yRWFjaChlPT57Y29uc3QgdD1lLmdldEluc3RhbmNlSWQoKTtsZXQgcz1pW3RdO2RlbGV0ZSBpW3RdLG51bGw9PXMmJihzPXRoaXMuY3JlYXRlSGVhZGVyQ29tcChlKSx0aGlzLmdldEd1aSgpLmFwcGVuZENoaWxkKHMuZ2V0R3VpKCkpKSx0aGlzLmhlYWRlckNvbXBzW3RdPXN9KSxGKGksKGUsdCk9Pnt0aGlzLmdldEd1aSgpLnJlbW92ZUNoaWxkKHQuZ2V0R3VpKCkpLHRoaXMuZGVzdHJveUJlYW4odCl9KSx0KXtjb25zdCBlPUcodGhpcy5oZWFkZXJDb21wcyk7ZS5zb3J0KChlLHQpPT5lLmdldEN0cmwoKS5nZXRDb2x1bW5Hcm91cENoaWxkKCkuZ2V0TGVmdCgpLXQuZ2V0Q3RybCgpLmdldENvbHVtbkdyb3VwQ2hpbGQoKS5nZXRMZWZ0KCkpO2NvbnN0IHQ9ZS5tYXAoZT0+ZS5nZXRHdWkoKSk7d3ModGhpcy5nZXRHdWkoKSx0KX19Y3JlYXRlSGVhZGVyQ29tcChlKXtsZXQgdDtzd2l0Y2godGhpcy5jdHJsLmdldFR5cGUoKSl7Y2FzZSBFbC5DT0xVTU5fR1JPVVA6dD1uZXcgYmwoZSk7YnJlYWs7Y2FzZSBFbC5GTE9BVElOR19GSUxURVI6dD1uZXcgUW4oZSk7YnJlYWs7ZGVmYXVsdDp0PW5ldyBTbChlKX1yZXR1cm4gdGhpcy5jcmVhdGVCZWFuKHQpLHQuc2V0UGFyZW50Q29tcG9uZW50KHRoaXMpLHR9fVJsKFthZV0seGwucHJvdG90eXBlLCJpbml0IixudWxsKSxSbChbbGVdLHhsLnByb3RvdHlwZSwiZGVzdHJveUhlYWRlckN0cmxzIixudWxsKTt2YXIgVGw9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IERsPTA7Y2xhc3MgT2wgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoKSx0aGlzLnJlc2l6ZVRvZ2dsZVRpbWVvdXQ9MCx0aGlzLnJlc2l6ZU11bHRpcGxpZXI9MSx0aGlzLnJlc2l6ZUZlYXR1cmU9bnVsbCx0aGlzLmxhc3RGb2N1c0V2ZW50PW51bGwsdGhpcy5kcmFnU291cmNlPW51bGwsdGhpcy5jb2x1bW5Hcm91cENoaWxkPWUsdGhpcy5wYXJlbnRSb3dDdHJsPWksdGhpcy5iZWFucz10LHRoaXMuaW5zdGFuY2VJZD1lLmdldFVuaXF1ZUlkKCkrIi0iK0RsKyt9cG9zdENvbnN0cnVjdCgpe3RoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXJzKFsic3VwcHJlc3NIZWFkZXJGb2N1cyJdLCgpPT50aGlzLnJlZnJlc2hUYWJJbmRleCgpKX1zaG91bGRTdG9wRXZlbnRQcm9wYWdhdGlvbihlKXtjb25zdHtoZWFkZXJSb3dJbmRleDp0LGNvbHVtbjppfT10aGlzLmZvY3VzU2VydmljZS5nZXRGb2N1c2VkSGVhZGVyKCk7cmV0dXJuIEtzKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLGUsdCxpKX1nZXRXcmFwcGVySGFzRm9jdXMoKXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKS5hY3RpdmVFbGVtZW50PT09dGhpcy5lR3VpfXNldEd1aShlKXt0aGlzLmVHdWk9ZSx0aGlzLmFkZERvbURhdGEoKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmJlYW5zLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ESVNQTEFZRURfQ09MVU1OU19DSEFOR0VELHRoaXMub25EaXNwbGF5ZWRDb2x1bW5zQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLm9uRGlzcGxheWVkQ29sdW1uc0NoYW5nZWQoKSx0aGlzLnJlZnJlc2hUYWJJbmRleCgpfW9uRGlzcGxheWVkQ29sdW1uc0NoYW5nZWQoKXt0aGlzLmNvbXAmJnRoaXMuY29sdW1uJiYodGhpcy5yZWZyZXNoRmlyc3RBbmRMYXN0U3R5bGVzKCksdGhpcy5yZWZyZXNoQXJpYUNvbEluZGV4KCkpfXJlZnJlc2hGaXJzdEFuZExhc3RTdHlsZXMoKXtjb25zdHtjb21wOmUsY29sdW1uOnQsYmVhbnM6aX09dGhpcztFYS5yZWZyZXNoRmlyc3RBbmRMYXN0U3R5bGVzKGUsdCxpLmNvbHVtbk1vZGVsKX1yZWZyZXNoQXJpYUNvbEluZGV4KCl7Y29uc3R7YmVhbnM6ZSxjb2x1bW46dH09dGhpcyxpPWUuY29sdW1uTW9kZWwuZ2V0QXJpYUNvbHVtbkluZGV4KHQpO0NpKHRoaXMuZUd1aSxpKX1hZGRSZXNpemVBbmRNb3ZlS2V5Ym9hcmRMaXN0ZW5lcnMoKXt0aGlzLnJlc2l6ZUZlYXR1cmUmJih0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVHdWksImtleWRvd24iLHRoaXMub25HdWlLZXlEb3duLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUd1aSwia2V5dXAiLHRoaXMub25HdWlLZXlVcC5iaW5kKHRoaXMpKSl9cmVmcmVzaFRhYkluZGV4KCl7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0hlYWRlckZvY3VzIik/dGhpcy5lR3VpLnJlbW92ZUF0dHJpYnV0ZSgidGFiaW5kZXgiKTp0aGlzLmVHdWkuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsIi0xIil9b25HdWlLZXlEb3duKGUpe3ZhciB0O2NvbnN0IGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKS5hY3RpdmVFbGVtZW50LHM9ZS5rZXk9PT1qcy5MRUZUfHxlLmtleT09PWpzLlJJR0hUO2lmKHRoaXMuaXNSZXNpemluZyYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKSxpIT09dGhpcy5lR3VpfHwhZS5zaGlmdEtleSYmIWUuYWx0S2V5KXJldHVybjtpZigodGhpcy5pc1Jlc2l6aW5nfHxzKSYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKSwhcylyZXR1cm47Y29uc3Qgcj1lLmtleT09PWpzLkxFRlQhPT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpLG89UG9bcj8iTGVmdCI6IlJpZ2h0Il07aWYoZS5hbHRLZXkpe3RoaXMuaXNSZXNpemluZz0hMCx0aGlzLnJlc2l6ZU11bHRpcGxpZXIrPTE7Y29uc3QgaT10aGlzLmdldFZpZXdwb3J0QWRqdXN0ZWRSZXNpemVEaWZmKGUpO3RoaXMucmVzaXplSGVhZGVyKGksZS5zaGlmdEtleSksbnVsbD09PSh0PXRoaXMucmVzaXplRmVhdHVyZSl8fHZvaWQgMD09PXR8fHQudG9nZ2xlQ29sdW1uUmVzaXppbmcoITApfWVsc2UgdGhpcy5tb3ZlSGVhZGVyKG8pfWdldFZpZXdwb3J0QWRqdXN0ZWRSZXNpemVEaWZmKGUpe2xldCB0PXRoaXMuZ2V0UmVzaXplRGlmZihlKTtpZih0aGlzLmNvbHVtbi5nZXRQaW5uZWQoKSl7Y29uc3QgZT10aGlzLnBpbm5lZFdpZHRoU2VydmljZS5nZXRQaW5uZWRMZWZ0V2lkdGgoKSxpPXRoaXMucGlubmVkV2lkdGhTZXJ2aWNlLmdldFBpbm5lZFJpZ2h0V2lkdGgoKSxzPWxzKHRoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLmdldEJvZHlWaWV3cG9ydEVsZW1lbnQoKSktNTA7aWYoZStpK3Q+cyl7aWYoIShzPmUraSkpcmV0dXJuIDA7dD1zLWUtaX19cmV0dXJuIHR9Z2V0UmVzaXplRGlmZihlKXtsZXQgdD1lLmtleT09PWpzLkxFRlQhPT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpO2NvbnN0IGk9dGhpcy5jb2x1bW4uZ2V0UGlubmVkKCkscz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpO3JldHVybiBpJiZzIT09KCJyaWdodCI9PT1pKSYmKHQ9IXQpLCh0Py0xOjEpKnRoaXMucmVzaXplTXVsdGlwbGllcn1vbkd1aUtleVVwKCl7dGhpcy5pc1Jlc2l6aW5nJiYodGhpcy5yZXNpemVUb2dnbGVUaW1lb3V0JiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRvZ2dsZVRpbWVvdXQpLHRoaXMucmVzaXplVG9nZ2xlVGltZW91dD0wKSx0aGlzLmlzUmVzaXppbmc9ITEsdGhpcy5yZXNpemVNdWx0aXBsaWVyPTEsdGhpcy5yZXNpemVUb2dnbGVUaW1lb3V0PXNldFRpbWVvdXQoKCk9Pnt2YXIgZTtudWxsPT09KGU9dGhpcy5yZXNpemVGZWF0dXJlKXx8dm9pZCAwPT09ZXx8ZS50b2dnbGVDb2x1bW5SZXNpemluZyghMSl9LDE1MCkpfWhhbmRsZUtleURvd24oZSl7Y29uc3QgdD10aGlzLmdldFdyYXBwZXJIYXNGb2N1cygpO3N3aXRjaChlLmtleSl7Y2FzZSBqcy5QQUdFX0RPV046Y2FzZSBqcy5QQUdFX1VQOmNhc2UganMuUEFHRV9IT01FOmNhc2UganMuUEFHRV9FTkQ6dCYmZS5wcmV2ZW50RGVmYXVsdCgpfX1hZGREb21EYXRhKCl7Y29uc3QgZT1PbC5ET01fREFUQV9LRVlfSEVBREVSX0NUUkw7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2Uuc2V0RG9tRGF0YSh0aGlzLmVHdWksZSx0aGlzKSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT50aGlzLmdyaWRPcHRpb25zU2VydmljZS5zZXREb21EYXRhKHRoaXMuZUd1aSxlLG51bGwpKX1nZXRHdWkoKXtyZXR1cm4gdGhpcy5lR3VpfWZvY3VzKGUpe3JldHVybiEhdGhpcy5lR3VpJiYodGhpcy5sYXN0Rm9jdXNFdmVudD1lfHxudWxsLHRoaXMuZUd1aS5mb2N1cygpLCEwKX1nZXRSb3dJbmRleCgpe3JldHVybiB0aGlzLnBhcmVudFJvd0N0cmwuZ2V0Um93SW5kZXgoKX1nZXRQYXJlbnRSb3dDdHJsKCl7cmV0dXJuIHRoaXMucGFyZW50Um93Q3RybH1nZXRQaW5uZWQoKXtyZXR1cm4gdGhpcy5wYXJlbnRSb3dDdHJsLmdldFBpbm5lZCgpfWdldEluc3RhbmNlSWQoKXtyZXR1cm4gdGhpcy5pbnN0YW5jZUlkfWdldENvbHVtbkdyb3VwQ2hpbGQoKXtyZXR1cm4gdGhpcy5jb2x1bW5Hcm91cENoaWxkfXJlbW92ZURyYWdTb3VyY2UoKXt0aGlzLmRyYWdTb3VyY2UmJih0aGlzLmRyYWdBbmREcm9wU2VydmljZS5yZW1vdmVEcmFnU291cmNlKHRoaXMuZHJhZ1NvdXJjZSksdGhpcy5kcmFnU291cmNlPW51bGwpfWhhbmRsZUNvbnRleHRNZW51TW91c2VFdmVudChlLHQsaSl7Y29uc3Qgcz1udWxsIT1lP2U6dDt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInByZXZlbnREZWZhdWx0T25Db250ZXh0TWVudSIpJiZzLnByZXZlbnREZWZhdWx0KCk7Y29uc3Qgcj1pIGluc3RhbmNlb2YgRWU/aTp2b2lkIDA7dGhpcy5tZW51U2VydmljZS5pc0hlYWRlckNvbnRleHRNZW51RW5hYmxlZChyKSYmdGhpcy5tZW51U2VydmljZS5zaG93SGVhZGVyQ29udGV4dE1lbnUocixlLHQpLHRoaXMuZGlzcGF0Y2hDb2x1bW5Nb3VzZUV2ZW50KGx0LkVWRU5UX0NPTFVNTl9IRUFERVJfQ09OVEVYVF9NRU5VLGkpfWRpc3BhdGNoQ29sdW1uTW91c2VFdmVudChlLHQpe2NvbnN0IGk9e3R5cGU6ZSxjb2x1bW46dH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChpKX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLHRoaXMucmVtb3ZlRHJhZ1NvdXJjZSgpLHRoaXMuY29tcD1udWxsLHRoaXMuY29sdW1uPW51bGwsdGhpcy5yZXNpemVGZWF0dXJlPW51bGwsdGhpcy5sYXN0Rm9jdXNFdmVudD1udWxsLHRoaXMuY29sdW1uR3JvdXBDaGlsZD1udWxsLHRoaXMucGFyZW50Um93Q3RybD1udWxsLHRoaXMuZUd1aT1udWxsfX1PbC5ET01fREFUQV9LRVlfSEVBREVSX0NUUkw9ImhlYWRlckN0cmwiLFRsKFtjZSgicGlubmVkV2lkdGhTZXJ2aWNlIildLE9sLnByb3RvdHlwZSwicGlubmVkV2lkdGhTZXJ2aWNlIix2b2lkIDApLFRsKFtjZSgiZm9jdXNTZXJ2aWNlIildLE9sLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLFRsKFtjZSgidXNlckNvbXBvbmVudEZhY3RvcnkiKV0sT2wucHJvdG90eXBlLCJ1c2VyQ29tcG9uZW50RmFjdG9yeSIsdm9pZCAwKSxUbChbY2UoImN0cmxzU2VydmljZSIpXSxPbC5wcm90b3R5cGUsImN0cmxzU2VydmljZSIsdm9pZCAwKSxUbChbY2UoImRyYWdBbmREcm9wU2VydmljZSIpXSxPbC5wcm90b3R5cGUsImRyYWdBbmREcm9wU2VydmljZSIsdm9pZCAwKSxUbChbY2UoIm1lbnVTZXJ2aWNlIildLE9sLnByb3RvdHlwZSwibWVudVNlcnZpY2UiLHZvaWQgMCksVGwoW2FlXSxPbC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBBbD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBQbCBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUsdCxpLHMpe3N1cGVyKCksdGhpcy5jb2x1bW5Pckdyb3VwPWUsdGhpcy5lQ2VsbD10LHRoaXMuYXJpYUVsPXRoaXMuZUNlbGwucXVlcnlTZWxlY3RvcigiW3JvbGU9Y29sdW1uaGVhZGVyXSIpfHx0aGlzLmVDZWxsLHRoaXMuY29sc1NwYW5uaW5nPXMsdGhpcy5iZWFucz1pfXNldENvbHNTcGFubmluZyhlKXt0aGlzLmNvbHNTcGFubmluZz1lLHRoaXMub25MZWZ0Q2hhbmdlZCgpfWdldENvbHVtbk9yR3JvdXAoKXtyZXR1cm4gdGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKSYmdGhpcy5jb2xzU3Bhbm5pbmc/T2UodGhpcy5jb2xzU3Bhbm5pbmcpOnRoaXMuY29sdW1uT3JHcm91cH1wb3N0Q29uc3RydWN0KCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jb2x1bW5Pckdyb3VwLEVlLkVWRU5UX0xFRlRfQ0hBTkdFRCx0aGlzLm9uTGVmdENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5zZXRMZWZ0Rmlyc3RUaW1lKCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRElTUExBWUVEX0NPTFVNTlNfV0lEVEhfQ0hBTkdFRCx0aGlzLm9uTGVmdENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiZG9tTGF5b3V0Iix0aGlzLm9uTGVmdENoYW5nZWQuYmluZCh0aGlzKSl9c2V0TGVmdEZpcnN0VGltZSgpe2NvbnN0IGU9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0NvbHVtbk1vdmVBbmltYXRpb24iKSx0PWIodGhpcy5jb2x1bW5Pckdyb3VwLmdldE9sZExlZnQoKSk7dGhpcy5iZWFucy5jb2x1bW5BbmltYXRpb25TZXJ2aWNlLmlzQWN0aXZlKCkmJnQmJiFlP3RoaXMuYW5pbWF0ZUluTGVmdCgpOnRoaXMub25MZWZ0Q2hhbmdlZCgpfWFuaW1hdGVJbkxlZnQoKXtjb25zdCBlPXRoaXMuZ2V0Q29sdW1uT3JHcm91cCgpLHQ9ZS5nZXRMZWZ0KCksaT1lLmdldE9sZExlZnQoKSxzPXRoaXMubW9kaWZ5TGVmdEZvclByaW50TGF5b3V0KGUsaSkscj10aGlzLm1vZGlmeUxlZnRGb3JQcmludExheW91dChlLHQpO3RoaXMuc2V0TGVmdChzKSx0aGlzLmFjdHVhbExlZnQ9cix0aGlzLmJlYW5zLmNvbHVtbkFuaW1hdGlvblNlcnZpY2UuZXhlY3V0ZU5leHRWTVR1cm4oKCk9Pnt0aGlzLmFjdHVhbExlZnQ9PT1yJiZ0aGlzLnNldExlZnQocil9KX1vbkxlZnRDaGFuZ2VkKCl7Y29uc3QgZT10aGlzLmdldENvbHVtbk9yR3JvdXAoKSx0PWUuZ2V0TGVmdCgpO3RoaXMuYWN0dWFsTGVmdD10aGlzLm1vZGlmeUxlZnRGb3JQcmludExheW91dChlLHQpLHRoaXMuc2V0TGVmdCh0aGlzLmFjdHVhbExlZnQpfW1vZGlmeUxlZnRGb3JQcmludExheW91dChlLHQpe2lmKCF0aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5pc0RvbUxheW91dCgicHJpbnQiKSlyZXR1cm4gdDtpZigibGVmdCI9PT1lLmdldFBpbm5lZCgpKXJldHVybiB0O2NvbnN0IGk9dGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5ZWRDb2x1bW5zTGVmdFdpZHRoKCk7aWYoInJpZ2h0Ij09PWUuZ2V0UGlubmVkKCkpe3JldHVybiBpK3RoaXMuYmVhbnMuY29sdW1uTW9kZWwuZ2V0Qm9keUNvbnRhaW5lcldpZHRoKCkrdH1yZXR1cm4gaSt0fXNldExlZnQoZSl7bGV0IHQ7aWYoYihlKSYmKHRoaXMuZUNlbGwuc3R5bGUubGVmdD1lKyJweCIpLHRoaXMuY29sdW1uT3JHcm91cCBpbnN0YW5jZW9mIEVlKXQ9dGhpcy5jb2x1bW5Pckdyb3VwO2Vsc2V7Y29uc3QgZT10aGlzLmNvbHVtbk9yR3JvdXAuZ2V0TGVhZkNvbHVtbnMoKTtpZighZS5sZW5ndGgpcmV0dXJuO2UubGVuZ3RoPjEmJnlpKHRoaXMuYXJpYUVsLGUubGVuZ3RoKSx0PWVbMF19fX1BbChbYWVdLFBsLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIE1sPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIExsIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoZSx0KXtzdXBlcigpLHRoaXMuY29sdW1ucz1lLHRoaXMuZWxlbWVudD10fXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNvbHVtbkhvdmVySGlnaGxpZ2h0IikmJnRoaXMuYWRkTW91c2VIb3Zlckxpc3RlbmVycygpfWFkZE1vdXNlSG92ZXJMaXN0ZW5lcnMoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVsZW1lbnQsIm1vdXNlb3V0Iix0aGlzLm9uTW91c2VPdXQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lbGVtZW50LCJtb3VzZW92ZXIiLHRoaXMub25Nb3VzZU92ZXIuYmluZCh0aGlzKSl9b25Nb3VzZU91dCgpe3RoaXMuY29sdW1uSG92ZXJTZXJ2aWNlLmNsZWFyTW91c2VPdmVyKCl9b25Nb3VzZU92ZXIoKXt0aGlzLmNvbHVtbkhvdmVyU2VydmljZS5zZXRNb3VzZU92ZXIodGhpcy5jb2x1bW5zKX19TWwoW2NlKCJjb2x1bW5Ib3ZlclNlcnZpY2UiKV0sTGwucHJvdG90eXBlLCJjb2x1bW5Ib3ZlclNlcnZpY2UiLHZvaWQgMCksTWwoW2FlXSxMbC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO2NsYXNzIEZsIGV4dGVuZHMgT2x7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKGUsdCxpKSx0aGlzLmljb25DcmVhdGVkPSExLHRoaXMuY29sdW1uPWV9c2V0Q29tcChlLHQsaSxzKXt0aGlzLmNvbXA9ZSx0aGlzLmVCdXR0b25TaG93TWFpbkZpbHRlcj1pLHRoaXMuZUZsb2F0aW5nRmlsdGVyQm9keT1zLHRoaXMuc2V0R3VpKHQpLHRoaXMuc2V0dXBBY3RpdmUoKSx0aGlzLnNldHVwV2lkdGgoKSx0aGlzLnNldHVwTGVmdCgpLHRoaXMuc2V0dXBIb3ZlcigpLHRoaXMuc2V0dXBGb2N1cygpLHRoaXMuc2V0dXBBcmlhKCksdGhpcy5zZXR1cEZpbHRlckJ1dHRvbigpLHRoaXMuc2V0dXBVc2VyQ29tcCgpLHRoaXMuc2V0dXBTeW5jV2l0aEZpbHRlcigpLHRoaXMuc2V0dXBVaSgpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUJ1dHRvblNob3dNYWluRmlsdGVyLCJjbGljayIsdGhpcy5zaG93UGFyZW50RmlsdGVyLmJpbmQodGhpcykpLHRoaXMuc2V0dXBGaWx0ZXJDaGFuZ2VkTGlzdGVuZXIoKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmNvbHVtbixFZS5FVkVOVF9DT0xfREVGX0NIQU5HRUQsdGhpcy5vbkNvbERlZkNoYW5nZWQuYmluZCh0aGlzKSl9cmVzaXplSGVhZGVyKCl7fW1vdmVIZWFkZXIoKXt9c2V0dXBBY3RpdmUoKXtjb25zdCBlPXRoaXMuY29sdW1uLmdldENvbERlZigpLHQ9ISFlLmZpbHRlcixpPSEhZS5mbG9hdGluZ0ZpbHRlcjt0aGlzLmFjdGl2ZT10JiZpfXNldHVwVWkoKXtpZih0aGlzLmNvbXAuc2V0QnV0dG9uV3JhcHBlckRpc3BsYXllZCghdGhpcy5zdXBwcmVzc0ZpbHRlckJ1dHRvbiYmdGhpcy5hY3RpdmUpLHRoaXMuY29tcC5hZGRPclJlbW92ZUJvZHlDc3NDbGFzcygiYWctZmxvYXRpbmctZmlsdGVyLWZ1bGwtYm9keSIsdGhpcy5zdXBwcmVzc0ZpbHRlckJ1dHRvbiksdGhpcy5jb21wLmFkZE9yUmVtb3ZlQm9keUNzc0NsYXNzKCJhZy1mbG9hdGluZy1maWx0ZXItYm9keSIsIXRoaXMuc3VwcHJlc3NGaWx0ZXJCdXR0b24pLCF0aGlzLmFjdGl2ZXx8dGhpcy5pY29uQ3JlYXRlZClyZXR1cm47Y29uc3QgZT1XcygiZmlsdGVyIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSx0aGlzLmNvbHVtbik7ZSYmKHRoaXMuaWNvbkNyZWF0ZWQ9ITAsdGhpcy5lQnV0dG9uU2hvd01haW5GaWx0ZXIuYXBwZW5kQ2hpbGQoZSkpfXNldHVwRm9jdXMoKXt0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBTcih0aGlzLmVHdWkse3Nob3VsZFN0b3BFdmVudFByb3BhZ2F0aW9uOnRoaXMuc2hvdWxkU3RvcEV2ZW50UHJvcGFnYXRpb24uYmluZCh0aGlzKSxvblRhYktleURvd246dGhpcy5vblRhYktleURvd24uYmluZCh0aGlzKSxoYW5kbGVLZXlEb3duOnRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpLG9uRm9jdXNJbjp0aGlzLm9uRm9jdXNJbi5iaW5kKHRoaXMpfSkpfXNldHVwQXJpYSgpe2NvbnN0IGU9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCk7ZWkodGhpcy5lQnV0dG9uU2hvd01haW5GaWx0ZXIsZSgiYXJpYUZpbHRlck1lbnVPcGVuIiwiT3BlbiBGaWx0ZXIgTWVudSIpKX1vblRhYktleURvd24oZSl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKS5hY3RpdmVFbGVtZW50PT09dGhpcy5lR3VpKXJldHVybjtjb25zdCB0PXRoaXMuZm9jdXNTZXJ2aWNlLmZpbmROZXh0Rm9jdXNhYmxlRWxlbWVudCh0aGlzLmVHdWksbnVsbCxlLnNoaWZ0S2V5KTtpZih0KXJldHVybiB0aGlzLmJlYW5zLmhlYWRlck5hdmlnYXRpb25TZXJ2aWNlLnNjcm9sbFRvQ29sdW1uKHRoaXMuY29sdW1uKSxlLnByZXZlbnREZWZhdWx0KCksdm9pZCB0LmZvY3VzKCk7Y29uc3QgaT10aGlzLmZpbmROZXh0Q29sdW1uV2l0aEZsb2F0aW5nRmlsdGVyKGUuc2hpZnRLZXkpO2kmJnRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzSGVhZGVyUG9zaXRpb24oe2hlYWRlclBvc2l0aW9uOntoZWFkZXJSb3dJbmRleDp0aGlzLmdldFBhcmVudFJvd0N0cmwoKS5nZXRSb3dJbmRleCgpLGNvbHVtbjppfSxldmVudDplfSkmJmUucHJldmVudERlZmF1bHQoKX1maW5kTmV4dENvbHVtbldpdGhGbG9hdGluZ0ZpbHRlcihlKXtjb25zdCB0PXRoaXMuYmVhbnMuY29sdW1uTW9kZWw7bGV0IGk9dGhpcy5jb2x1bW47ZG97aWYoaT1lP3QuZ2V0RGlzcGxheWVkQ29sQmVmb3JlKGkpOnQuZ2V0RGlzcGxheWVkQ29sQWZ0ZXIoaSksIWkpYnJlYWt9d2hpbGUoIWkuZ2V0Q29sRGVmKCkuZmlsdGVyfHwhaS5nZXRDb2xEZWYoKS5mbG9hdGluZ0ZpbHRlcik7cmV0dXJuIGl9aGFuZGxlS2V5RG93bihlKXtzdXBlci5oYW5kbGVLZXlEb3duKGUpO2NvbnN0IHQ9dGhpcy5nZXRXcmFwcGVySGFzRm9jdXMoKTtzd2l0Y2goZS5rZXkpe2Nhc2UganMuVVA6Y2FzZSBqcy5ET1dOOnR8fGUucHJldmVudERlZmF1bHQoKTtjYXNlIGpzLkxFRlQ6Y2FzZSBqcy5SSUdIVDppZih0KXJldHVybjtlLnN0b3BQcm9wYWdhdGlvbigpO2Nhc2UganMuRU5URVI6dCYmdGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNJbnRvKHRoaXMuZUd1aSkmJmUucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIGpzLkVTQ0FQRTp0fHx0aGlzLmVHdWkuZm9jdXMoKX19b25Gb2N1c0luKGUpe2lmKHRoaXMuZUd1aS5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpKXJldHVybjtjb25zdCB0PSEhZS5yZWxhdGVkVGFyZ2V0JiYhZS5yZWxhdGVkVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiYWctZmxvYXRpbmctZmlsdGVyIiksaT0hIWUucmVsYXRlZFRhcmdldCYmb3MoZS5yZWxhdGVkVGFyZ2V0LCJhZy1mbG9hdGluZy1maWx0ZXIiKTtpZih0JiZpJiZlLnRhcmdldD09PXRoaXMuZUd1aSl7Y29uc3QgZT10aGlzLmxhc3RGb2N1c0V2ZW50LHQ9ISghZXx8ZS5rZXkhPT1qcy5UQUIpO2lmKGUmJnQpe2NvbnN0IHQ9ZS5zaGlmdEtleTt0aGlzLmZvY3VzU2VydmljZS5mb2N1c0ludG8odGhpcy5lR3VpLHQpfX1jb25zdCBzPXRoaXMuZ2V0Um93SW5kZXgoKTt0aGlzLmJlYW5zLmZvY3VzU2VydmljZS5zZXRGb2N1c2VkSGVhZGVyKHMsdGhpcy5jb2x1bW4pfXNldHVwSG92ZXIoKXt0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBMbChbdGhpcy5jb2x1bW5dLHRoaXMuZUd1aSkpO2NvbnN0IGU9KCk9PntpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjb2x1bW5Ib3ZlckhpZ2hsaWdodCIpKXJldHVybjtjb25zdCBlPXRoaXMuYmVhbnMuY29sdW1uSG92ZXJTZXJ2aWNlLmlzSG92ZXJlZCh0aGlzLmNvbHVtbik7dGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNvbHVtbi1ob3ZlciIsZSl9O3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9IT1ZFUl9DSEFOR0VELGUpLGUoKX1zZXR1cExlZnQoKXtjb25zdCBlPW5ldyBQbCh0aGlzLmNvbHVtbix0aGlzLmVHdWksdGhpcy5iZWFucyk7dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihlKX1zZXR1cEZpbHRlckJ1dHRvbigpe3RoaXMuc3VwcHJlc3NGaWx0ZXJCdXR0b249IXRoaXMubWVudVNlcnZpY2UuaXNGbG9hdGluZ0ZpbHRlckJ1dHRvbkVuYWJsZWQodGhpcy5jb2x1bW4pLHRoaXMuaGlnaGxpZ2h0RmlsdGVyQnV0dG9uV2hlbkFjdGl2ZT0hdGhpcy5tZW51U2VydmljZS5pc0xlZ2FjeU1lbnVFbmFibGVkKCl9c2V0dXBVc2VyQ29tcCgpe2lmKCF0aGlzLmFjdGl2ZSlyZXR1cm47Y29uc3QgZT10aGlzLmJlYW5zLmZpbHRlck1hbmFnZXIuZ2V0RmxvYXRpbmdGaWx0ZXJDb21wRGV0YWlscyh0aGlzLmNvbHVtbiwoKT0+dGhpcy5zaG93UGFyZW50RmlsdGVyKCkpO2UmJnRoaXMuc2V0Q29tcERldGFpbHMoZSl9c2V0Q29tcERldGFpbHMoZSl7dGhpcy51c2VyQ29tcERldGFpbHM9ZSx0aGlzLmNvbXAuc2V0Q29tcERldGFpbHMoZSl9c2hvd1BhcmVudEZpbHRlcigpe2NvbnN0IGU9dGhpcy5zdXBwcmVzc0ZpbHRlckJ1dHRvbj90aGlzLmVGbG9hdGluZ0ZpbHRlckJvZHk6dGhpcy5lQnV0dG9uU2hvd01haW5GaWx0ZXI7dGhpcy5tZW51U2VydmljZS5zaG93RmlsdGVyTWVudSh7Y29sdW1uOnRoaXMuY29sdW1uLGJ1dHRvbkVsZW1lbnQ6ZSxjb250YWluZXJUeXBlOiJmbG9hdGluZ0ZpbHRlciIscG9zaXRpb25CeToiYnV0dG9uIn0pfXNldHVwU3luY1dpdGhGaWx0ZXIoKXtpZighdGhpcy5hY3RpdmUpcmV0dXJuO2NvbnN0e2ZpbHRlck1hbmFnZXI6ZX09dGhpcy5iZWFucyx0PXQ9Pntjb25zdCBpPXRoaXMuY29tcC5nZXRGbG9hdGluZ0ZpbHRlckNvbXAoKTtpJiZpLnRoZW4oaT0+e2lmKGkpe2NvbnN0IHM9ZS5nZXRDdXJyZW50RmxvYXRpbmdGaWx0ZXJQYXJlbnRNb2RlbCh0aGlzLmNvbHVtbik7aS5vblBhcmVudE1vZGVsQ2hhbmdlZChzLHQpfX0pfTt0aGlzLmRlc3Ryb3lTeW5jTGlzdGVuZXI9dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jb2x1bW4sRWUuRVZFTlRfRklMVEVSX0NIQU5HRUQsdCksZS5pc0ZpbHRlckFjdGl2ZSh0aGlzLmNvbHVtbikmJnQobnVsbCl9c2V0dXBXaWR0aCgpe2NvbnN0IGU9KCk9Pntjb25zdCBlPXRoaXMuY29sdW1uLmdldEFjdHVhbFdpZHRoKCkrInB4Ijt0aGlzLmNvbXAuc2V0V2lkdGgoZSl9O3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY29sdW1uLEVlLkVWRU5UX1dJRFRIX0NIQU5HRUQsZSksZSgpfXNldHVwRmlsdGVyQ2hhbmdlZExpc3RlbmVyKCl7dGhpcy5hY3RpdmUmJih0aGlzLmRlc3Ryb3lGaWx0ZXJDaGFuZ2VkTGlzdGVuZXI9dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jb2x1bW4sRWUuRVZFTlRfRklMVEVSX0NIQU5HRUQsdGhpcy51cGRhdGVGaWx0ZXJCdXR0b24uYmluZCh0aGlzKSksdGhpcy51cGRhdGVGaWx0ZXJCdXR0b24oKSl9dXBkYXRlRmlsdGVyQnV0dG9uKCl7aWYoIXRoaXMuc3VwcHJlc3NGaWx0ZXJCdXR0b24mJnRoaXMuY29tcCl7Y29uc3QgZT10aGlzLmJlYW5zLmZpbHRlck1hbmFnZXIuaXNGaWx0ZXJBbGxvd2VkKHRoaXMuY29sdW1uKTt0aGlzLmNvbXAuc2V0QnV0dG9uV3JhcHBlckRpc3BsYXllZChlKSx0aGlzLmhpZ2hsaWdodEZpbHRlckJ1dHRvbldoZW5BY3RpdmUmJmUmJnRoaXMuZUJ1dHRvblNob3dNYWluRmlsdGVyLmNsYXNzTGlzdC50b2dnbGUoImFnLWZpbHRlci1hY3RpdmUiLHRoaXMuY29sdW1uLmlzRmlsdGVyQWN0aXZlKCkpfX1vbkNvbERlZkNoYW5nZWQoKXt2YXIgZSx0O2NvbnN0IGk9dGhpcy5hY3RpdmU7dGhpcy5zZXR1cEFjdGl2ZSgpO2NvbnN0IHM9IWkmJnRoaXMuYWN0aXZlO2kmJiF0aGlzLmFjdGl2ZSYmKG51bGw9PT0oZT10aGlzLmRlc3Ryb3lTeW5jTGlzdGVuZXIpfHx2b2lkIDA9PT1lfHxlLmNhbGwodGhpcyksbnVsbD09PSh0PXRoaXMuZGVzdHJveUZpbHRlckNoYW5nZWRMaXN0ZW5lcil8fHZvaWQgMD09PXR8fHQuY2FsbCh0aGlzKSk7Y29uc3Qgcj10aGlzLmFjdGl2ZT90aGlzLmJlYW5zLmZpbHRlck1hbmFnZXIuZ2V0RmxvYXRpbmdGaWx0ZXJDb21wRGV0YWlscyh0aGlzLmNvbHVtbiwoKT0+dGhpcy5zaG93UGFyZW50RmlsdGVyKCkpOm51bGwsbz10aGlzLmNvbXAuZ2V0RmxvYXRpbmdGaWx0ZXJDb21wKCk7byYmcj9vLnRoZW4oZT0+e3ZhciB0OyFlfHx0aGlzLmJlYW5zLmZpbHRlck1hbmFnZXIuYXJlRmlsdGVyQ29tcHNEaWZmZXJlbnQobnVsbCE9PSh0PXRoaXMudXNlckNvbXBEZXRhaWxzKSYmdm9pZCAwIT09dD90Om51bGwscik/dGhpcy51cGRhdGVDb21wRGV0YWlscyhyLHMpOnRoaXMudXBkYXRlRmxvYXRpbmdGaWx0ZXJQYXJhbXMocil9KTp0aGlzLnVwZGF0ZUNvbXBEZXRhaWxzKHIscyl9dXBkYXRlQ29tcERldGFpbHMoZSx0KXt0aGlzLmlzQWxpdmUoKSYmKHRoaXMuc2V0Q29tcERldGFpbHMoZSksdGhpcy5zZXR1cEZpbHRlckJ1dHRvbigpLHRoaXMuc2V0dXBVaSgpLHQmJih0aGlzLnNldHVwU3luY1dpdGhGaWx0ZXIoKSx0aGlzLnNldHVwRmlsdGVyQ2hhbmdlZExpc3RlbmVyKCkpKX11cGRhdGVGbG9hdGluZ0ZpbHRlclBhcmFtcyhlKXt2YXIgdDtpZighZSlyZXR1cm47Y29uc3QgaT1lLnBhcmFtcztudWxsPT09KHQ9dGhpcy5jb21wLmdldEZsb2F0aW5nRmlsdGVyQ29tcCgpKXx8dm9pZCAwPT09dHx8dC50aGVuKGU9PntsZXQgdD0hMTtpZigobnVsbD09ZT92b2lkIDA6ZS5yZWZyZXNoKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUucmVmcmVzaCl7bnVsbCE9PWUucmVmcmVzaChpKSYmKHQ9ITApfWlmKCF0JiYobnVsbD09ZT92b2lkIDA6ZS5vblBhcmFtc1VwZGF0ZWQpJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5vblBhcmFtc1VwZGF0ZWQpe251bGwhPT1lLm9uUGFyYW1zVXBkYXRlZChpKSYmaigiQ3VzdG9tIGZsb2F0aW5nIGZpbHRlciBtZXRob2QgJ29uUGFyYW1zVXBkYXRlZCcgaXMgZGVwcmVjYXRlZC4gVXNlICdyZWZyZXNoJyBpbnN0ZWFkLiIpfX0pfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksdGhpcy5lQnV0dG9uU2hvd01haW5GaWx0ZXI9bnVsbCx0aGlzLmVGbG9hdGluZ0ZpbHRlckJvZHk9bnVsbCx0aGlzLnVzZXJDb21wRGV0YWlscz1udWxsLHRoaXMuZGVzdHJveVN5bmNMaXN0ZW5lcj1udWxsLHRoaXMuZGVzdHJveUZpbHRlckNoYW5nZWRMaXN0ZW5lcj1udWxsfX12YXIgSWw9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgTmwgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlLHQsaSxzLHIpe3N1cGVyKCksdGhpcy5waW5uZWQ9ZSx0aGlzLmNvbHVtbj10LHRoaXMuZVJlc2l6ZT1pLHRoaXMuY29tcD1zLHRoaXMuY3RybD1yfXBvc3RDb25zdHJ1Y3QoKXtjb25zdCBlPVtdO2xldCB0LGk7Y29uc3Qgcz0oKT0+e2lmKGlzKHRoaXMuZVJlc2l6ZSx0KSwhdClyZXR1cm47Y29uc3Qgcz10aGlzLmhvcml6b250YWxSZXNpemVTZXJ2aWNlLmFkZFJlc2l6ZUJhcih7ZVJlc2l6ZUJhcjp0aGlzLmVSZXNpemUsb25SZXNpemVTdGFydDp0aGlzLm9uUmVzaXplU3RhcnQuYmluZCh0aGlzKSxvblJlc2l6aW5nOnRoaXMub25SZXNpemluZy5iaW5kKHRoaXMsITEpLG9uUmVzaXplRW5kOnRoaXMub25SZXNpemluZy5iaW5kKHRoaXMsITApfSk7aWYoZS5wdXNoKHMpLGkpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJza2lwSGVhZGVyT25BdXRvU2l6ZSIpLGk9KCk9Pnt0aGlzLmNvbHVtbk1vZGVsLmF1dG9TaXplQ29sdW1uKHRoaXMuY29sdW1uLCJ1aUNvbHVtblJlc2l6ZWQiLHQpfTt0aGlzLmVSZXNpemUuYWRkRXZlbnRMaXN0ZW5lcigiZGJsY2xpY2siLGkpO2NvbnN0IHM9bmV3IGFvKHRoaXMuZVJlc2l6ZSk7cy5hZGRFdmVudExpc3RlbmVyKGFvLkVWRU5UX0RPVUJMRV9UQVAsaSksZS5wdXNoKCgpPT57dGhpcy5lUmVzaXplLnJlbW92ZUV2ZW50TGlzdGVuZXIoImRibGNsaWNrIixpKSxzLnJlbW92ZUV2ZW50TGlzdGVuZXIoYW8uRVZFTlRfRE9VQkxFX1RBUCxpKSxzLmRlc3Ryb3koKX0pfX0scj0oKT0+e2UuZm9yRWFjaChlPT5lKCkpLGUubGVuZ3RoPTB9LG89KCk9Pntjb25zdCBlPXRoaXMuY29sdW1uLmlzUmVzaXphYmxlKCksbz0hdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0F1dG9TaXplIikmJiF0aGlzLmNvbHVtbi5nZXRDb2xEZWYoKS5zdXBwcmVzc0F1dG9TaXplOyhlIT09dHx8byE9PWkpJiYodD1lLGk9byxyKCkscygpKX07bygpLHRoaXMuYWRkRGVzdHJveUZ1bmMociksdGhpcy5jdHJsLmFkZFJlZnJlc2hGdW5jdGlvbihvKX1vblJlc2l6aW5nKGUsdCl7Y29uc3R7Y29sdW1uOmksbGFzdFJlc2l6ZUFtb3VudDpzLHJlc2l6ZVN0YXJ0V2lkdGg6cn09dGhpcyxvPXRoaXMubm9ybWFsaXNlUmVzaXplQW1vdW50KHQpLG49W3trZXk6aSxuZXdXaWR0aDpyK299XTtpZih0aGlzLmNvbHVtbi5nZXRQaW5uZWQoKSl7aWYodGhpcy5waW5uZWRXaWR0aFNlcnZpY2UuZ2V0UGlubmVkTGVmdFdpZHRoKCkrdGhpcy5waW5uZWRXaWR0aFNlcnZpY2UuZ2V0UGlubmVkUmlnaHRXaWR0aCgpKyhvLXMpPmxzKHRoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLmdldEJvZHlWaWV3cG9ydEVsZW1lbnQoKSktNTApcmV0dXJufXRoaXMubGFzdFJlc2l6ZUFtb3VudD1vLHRoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uV2lkdGhzKG4sdGhpcy5yZXNpemVXaXRoU2hpZnRLZXksZSwidWlDb2x1bW5SZXNpemVkIiksZSYmdGhpcy50b2dnbGVDb2x1bW5SZXNpemluZyghMSl9b25SZXNpemVTdGFydChlKXt0aGlzLnJlc2l6ZVN0YXJ0V2lkdGg9dGhpcy5jb2x1bW4uZ2V0QWN0dWFsV2lkdGgoKSx0aGlzLmxhc3RSZXNpemVBbW91bnQ9MCx0aGlzLnJlc2l6ZVdpdGhTaGlmdEtleT1lLHRoaXMudG9nZ2xlQ29sdW1uUmVzaXppbmcoITApfXRvZ2dsZUNvbHVtblJlc2l6aW5nKGUpe3RoaXMuY29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jb2x1bW4tcmVzaXppbmciLGUpfW5vcm1hbGlzZVJlc2l6ZUFtb3VudChlKXtsZXQgdD1lO2NvbnN0IGk9ImxlZnQiIT09dGhpcy5waW5uZWQscz0icmlnaHQiPT09dGhpcy5waW5uZWQ7cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIik/aSYmKHQqPS0xKTpzJiYodCo9LTEpLHR9fUlsKFtjZSgiaG9yaXpvbnRhbFJlc2l6ZVNlcnZpY2UiKV0sTmwucHJvdG90eXBlLCJob3Jpem9udGFsUmVzaXplU2VydmljZSIsdm9pZCAwKSxJbChbY2UoInBpbm5lZFdpZHRoU2VydmljZSIpXSxObC5wcm90b3R5cGUsInBpbm5lZFdpZHRoU2VydmljZSIsdm9pZCAwKSxJbChbY2UoImN0cmxzU2VydmljZSIpXSxObC5wcm90b3R5cGUsImN0cmxzU2VydmljZSIsdm9pZCAwKSxJbChbY2UoImNvbHVtbk1vZGVsIildLE5sLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksSWwoW2FlXSxObC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBHbD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBrbCBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5jYlNlbGVjdEFsbFZpc2libGU9ITEsdGhpcy5wcm9jZXNzaW5nRXZlbnRGcm9tQ2hlY2tib3g9ITEsdGhpcy5jb2x1bW49ZX1vblNwYWNlS2V5RG93bihlKXtjb25zdCB0PXRoaXMuY2JTZWxlY3RBbGwsaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb2N1bWVudCgpO3QuaXNEaXNwbGF5ZWQoKSYmIXQuZ2V0R3VpKCkuY29udGFpbnMoaS5hY3RpdmVFbGVtZW50KSYmKGUucHJldmVudERlZmF1bHQoKSx0LnNldFZhbHVlKCF0LmdldFZhbHVlKCkpKX1nZXRDaGVja2JveEd1aSgpe3JldHVybiB0aGlzLmNiU2VsZWN0QWxsLmdldEd1aSgpfXNldENvbXAoZSl7dGhpcy5oZWFkZXJDZWxsQ3RybD1lLHRoaXMuY2JTZWxlY3RBbGw9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgTnIpLHRoaXMuY2JTZWxlY3RBbGwuYWRkQ3NzQ2xhc3MoImFnLWhlYWRlci1zZWxlY3QtYWxsIiksWHQodGhpcy5jYlNlbGVjdEFsbC5nZXRHdWkoKSwicHJlc2VudGF0aW9uIiksdGhpcy5zaG93T3JIaWRlU2VsZWN0QWxsKCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELHRoaXMub25OZXdDb2x1bW5zTG9hZGVkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0RJU1BMQVlFRF9DT0xVTU5TX0NIQU5HRUQsdGhpcy5vbkRpc3BsYXllZENvbHVtbnNDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1NFTEVDVElPTl9DSEFOR0VELHRoaXMub25TZWxlY3Rpb25DaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1BBR0lOQVRJT05fQ0hBTkdFRCx0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9NT0RFTF9VUERBVEVELHRoaXMub25Nb2RlbENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jYlNlbGVjdEFsbCxsdC5FVkVOVF9GSUVMRF9WQUxVRV9DSEFOR0VELHRoaXMub25DYlNlbGVjdEFsbC5iaW5kKHRoaXMpKSxsaSh0aGlzLmNiU2VsZWN0QWxsLmdldEd1aSgpLCEwKSx0aGlzLmNiU2VsZWN0QWxsLmdldElucHV0RWxlbWVudCgpLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCItMSIpLHRoaXMucmVmcmVzaFNlbGVjdEFsbExhYmVsKCl9b25OZXdDb2x1bW5zTG9hZGVkKCl7dGhpcy5zaG93T3JIaWRlU2VsZWN0QWxsKCl9b25EaXNwbGF5ZWRDb2x1bW5zQ2hhbmdlZCgpe3RoaXMuaXNBbGl2ZSgpJiZ0aGlzLnNob3dPckhpZGVTZWxlY3RBbGwoKX1zaG93T3JIaWRlU2VsZWN0QWxsKCl7dGhpcy5jYlNlbGVjdEFsbFZpc2libGU9dGhpcy5pc0NoZWNrYm94U2VsZWN0aW9uKCksdGhpcy5jYlNlbGVjdEFsbC5zZXREaXNwbGF5ZWQodGhpcy5jYlNlbGVjdEFsbFZpc2libGUse3NraXBBcmlhSGlkZGVuOiEwfSksdGhpcy5jYlNlbGVjdEFsbFZpc2libGUmJih0aGlzLmNoZWNrUmlnaHRSb3dNb2RlbFR5cGUoInNlbGVjdEFsbENoZWNrYm94IiksdGhpcy5jaGVja1NlbGVjdGlvblR5cGUoInNlbGVjdEFsbENoZWNrYm94IiksdGhpcy51cGRhdGVTdGF0ZU9mQ2hlY2tib3goKSksdGhpcy5yZWZyZXNoU2VsZWN0QWxsTGFiZWwoKX1vbk1vZGVsQ2hhbmdlZCgpe3RoaXMuY2JTZWxlY3RBbGxWaXNpYmxlJiZ0aGlzLnVwZGF0ZVN0YXRlT2ZDaGVja2JveCgpfW9uU2VsZWN0aW9uQ2hhbmdlZCgpe3RoaXMuY2JTZWxlY3RBbGxWaXNpYmxlJiZ0aGlzLnVwZGF0ZVN0YXRlT2ZDaGVja2JveCgpfXVwZGF0ZVN0YXRlT2ZDaGVja2JveCgpe2lmKHRoaXMucHJvY2Vzc2luZ0V2ZW50RnJvbUNoZWNrYm94KXJldHVybjt0aGlzLnByb2Nlc3NpbmdFdmVudEZyb21DaGVja2JveD0hMDtjb25zdCBlPXRoaXMuc2VsZWN0aW9uU2VydmljZS5nZXRTZWxlY3RBbGxTdGF0ZSh0aGlzLmlzRmlsdGVyZWRPbmx5KCksdGhpcy5pc0N1cnJlbnRQYWdlT25seSgpKTt0aGlzLmNiU2VsZWN0QWxsLnNldFZhbHVlKGUpO2NvbnN0IHQ9dGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmhhc05vZGVzVG9TZWxlY3QodGhpcy5pc0ZpbHRlcmVkT25seSgpLHRoaXMuaXNDdXJyZW50UGFnZU9ubHkoKSk7dGhpcy5jYlNlbGVjdEFsbC5zZXREaXNhYmxlZCghdCksdGhpcy5yZWZyZXNoU2VsZWN0QWxsTGFiZWwoKSx0aGlzLnByb2Nlc3NpbmdFdmVudEZyb21DaGVja2JveD0hMX1yZWZyZXNoU2VsZWN0QWxsTGFiZWwoKXtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLHQ9dGhpcy5jYlNlbGVjdEFsbC5nZXRWYWx1ZSgpP2UoImFyaWFDaGVja2VkIiwiY2hlY2tlZCIpOmUoImFyaWFVbmNoZWNrZWQiLCJ1bmNoZWNrZWQiKSxpPWUoImFyaWFSb3dTZWxlY3RBbGwiLCJQcmVzcyBTcGFjZSB0byB0b2dnbGUgYWxsIHJvd3Mgc2VsZWN0aW9uIik7dGhpcy5jYlNlbGVjdEFsbFZpc2libGU/dGhpcy5oZWFkZXJDZWxsQ3RybC5zZXRBcmlhRGVzY3JpcHRpb25Qcm9wZXJ0eSgic2VsZWN0QWxsIixgJHtpfSAoJHt0fSlgKTp0aGlzLmhlYWRlckNlbGxDdHJsLnNldEFyaWFEZXNjcmlwdGlvblByb3BlcnR5KCJzZWxlY3RBbGwiLG51bGwpLHRoaXMuY2JTZWxlY3RBbGwuc2V0SW5wdXRBcmlhTGFiZWwoYCR7aX0gKCR7dH0pYCksdGhpcy5oZWFkZXJDZWxsQ3RybC5hbm5vdW5jZUFyaWFEZXNjcmlwdGlvbigpfWNoZWNrU2VsZWN0aW9uVHlwZShlKXtyZXR1cm4hKCJtdWx0aXBsZSIhPT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd1NlbGVjdGlvbiIpKXx8KGNvbnNvbGUud2FybihgQUcgR3JpZDogJHtlfSBpcyBvbmx5IGF2YWlsYWJsZSBpZiB1c2luZyAnbXVsdGlwbGUnIHJvd1NlbGVjdGlvbi5gKSwhMSl9Y2hlY2tSaWdodFJvd01vZGVsVHlwZShlKXtjb25zdCB0PXRoaXMucm93TW9kZWwuZ2V0VHlwZSgpO3JldHVybiEoImNsaWVudFNpZGUiIT09dCYmInNlcnZlclNpZGUiIT09dCl8fChjb25zb2xlLndhcm4oYEFHIEdyaWQ6ICR7ZX0gaXMgb25seSBhdmFpbGFibGUgaWYgdXNpbmcgJ2NsaWVudFNpZGUnIG9yICdzZXJ2ZXJTaWRlJyByb3dNb2RlbFR5cGUsIHlvdSBhcmUgdXNpbmcgJHt0fS5gKSwhMSl9b25DYlNlbGVjdEFsbCgpe2lmKHRoaXMucHJvY2Vzc2luZ0V2ZW50RnJvbUNoZWNrYm94KXJldHVybjtpZighdGhpcy5jYlNlbGVjdEFsbFZpc2libGUpcmV0dXJuO2NvbnN0IGU9dGhpcy5jYlNlbGVjdEFsbC5nZXRWYWx1ZSgpLHQ9dGhpcy5pc0ZpbHRlcmVkT25seSgpLGk9dGhpcy5pc0N1cnJlbnRQYWdlT25seSgpO2xldCBzPSJ1aVNlbGVjdEFsbCI7aT9zPSJ1aVNlbGVjdEFsbEN1cnJlbnRQYWdlIjp0JiYocz0idWlTZWxlY3RBbGxGaWx0ZXJlZCIpO2NvbnN0IHI9e3NvdXJjZTpzLGp1c3RGaWx0ZXJlZDp0LGp1c3RDdXJyZW50UGFnZTppfTtlP3RoaXMuc2VsZWN0aW9uU2VydmljZS5zZWxlY3RBbGxSb3dOb2RlcyhyKTp0aGlzLnNlbGVjdGlvblNlcnZpY2UuZGVzZWxlY3RBbGxSb3dOb2RlcyhyKX1pc0NoZWNrYm94U2VsZWN0aW9uKCl7bGV0IGU9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCkuaGVhZGVyQ2hlY2tib3hTZWxlY3Rpb247aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUpe2U9ZSh0aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHtjb2x1bW46dGhpcy5jb2x1bW4sY29sRGVmOnRoaXMuY29sdW1uLmdldENvbERlZigpfSkpfXJldHVybiEhZSYmKHRoaXMuY2hlY2tSaWdodFJvd01vZGVsVHlwZSgiaGVhZGVyQ2hlY2tib3hTZWxlY3Rpb24iKSYmdGhpcy5jaGVja1NlbGVjdGlvblR5cGUoImhlYWRlckNoZWNrYm94U2VsZWN0aW9uIikpfWlzRmlsdGVyZWRPbmx5KCl7cmV0dXJuISF0aGlzLmNvbHVtbi5nZXRDb2xEZWYoKS5oZWFkZXJDaGVja2JveFNlbGVjdGlvbkZpbHRlcmVkT25seX1pc0N1cnJlbnRQYWdlT25seSgpe3JldHVybiEhdGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCkuaGVhZGVyQ2hlY2tib3hTZWxlY3Rpb25DdXJyZW50UGFnZU9ubHl9fUdsKFtjZSgicm93TW9kZWwiKV0sa2wucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSxHbChbY2UoInNlbGVjdGlvblNlcnZpY2UiKV0sa2wucHJvdG90eXBlLCJzZWxlY3Rpb25TZXJ2aWNlIix2b2lkIDApO2NsYXNzIF9sIGV4dGVuZHMgT2x7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKGUsdCxpKSx0aGlzLnJlZnJlc2hGdW5jdGlvbnM9W10sdGhpcy51c2VySGVhZGVyQ2xhc3Nlcz1uZXcgU2V0LHRoaXMuYXJpYURlc2NyaXB0aW9uUHJvcGVydGllcz1uZXcgTWFwLHRoaXMuY29sdW1uPWV9c2V0Q29tcChlLHQsaSxzKXt0aGlzLmNvbXA9ZSx0aGlzLnNldEd1aSh0KSx0aGlzLnVwZGF0ZVN0YXRlKCksdGhpcy5zZXR1cFdpZHRoKCksdGhpcy5zZXR1cE1vdmluZ0NzcygpLHRoaXMuc2V0dXBNZW51Q2xhc3MoKSx0aGlzLnNldHVwU29ydGFibGVDbGFzcygpLHRoaXMuc2V0dXBXcmFwVGV4dENsYXNzKCksdGhpcy5yZWZyZXNoU3BhbkhlYWRlckhlaWdodCgpLHRoaXMuc2V0dXBBdXRvSGVpZ2h0KHMpLHRoaXMuYWRkQ29sdW1uSG92ZXJMaXN0ZW5lcigpLHRoaXMuc2V0dXBGaWx0ZXJDbGFzcygpLHRoaXMuc2V0dXBDbGFzc2VzRnJvbUNvbERlZigpLHRoaXMuc2V0dXBUb29sdGlwKCksdGhpcy5hZGRBY3RpdmVIZWFkZXJNb3VzZUxpc3RlbmVycygpLHRoaXMuc2V0dXBTZWxlY3RBbGwoKSx0aGlzLnNldHVwVXNlckNvbXAoKSx0aGlzLnJlZnJlc2hBcmlhKCksdGhpcy5yZXNpemVGZWF0dXJlPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IE5sKHRoaXMuZ2V0UGlubmVkKCksdGhpcy5jb2x1bW4saSxlLHRoaXMpKSx0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBMbChbdGhpcy5jb2x1bW5dLHQpKSx0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBQbCh0aGlzLmNvbHVtbix0LHRoaXMuYmVhbnMpKSx0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBTcih0LHtzaG91bGRTdG9wRXZlbnRQcm9wYWdhdGlvbjplPT50aGlzLnNob3VsZFN0b3BFdmVudFByb3BhZ2F0aW9uKGUpLG9uVGFiS2V5RG93bjooKT0+bnVsbCxoYW5kbGVLZXlEb3duOnRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpLG9uRm9jdXNJbjp0aGlzLm9uRm9jdXNJbi5iaW5kKHRoaXMpLG9uRm9jdXNPdXQ6dGhpcy5vbkZvY3VzT3V0LmJpbmQodGhpcyl9KSksdGhpcy5hZGRSZXNpemVBbmRNb3ZlS2V5Ym9hcmRMaXN0ZW5lcnMoKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhbInN1cHByZXNzTW92YWJsZUNvbHVtbnMiLCJzdXBwcmVzc01lbnVIaWRlIiwic3VwcHJlc3NBZ2dGdW5jSW5IZWFkZXIiXSx0aGlzLnJlZnJlc2guYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jb2x1bW4sRWUuRVZFTlRfQ09MX0RFRl9DSEFOR0VELHRoaXMucmVmcmVzaC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fVkFMVUVfQ0hBTkdFRCx0aGlzLm9uQ29sdW1uVmFsdWVDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRCx0aGlzLm9uQ29sdW1uUm93R3JvdXBDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9QSVZPVF9DSEFOR0VELHRoaXMub25Db2x1bW5QaXZvdENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfSEVBREVSX0hFSUdIVF9DSEFOR0VELHRoaXMub25IZWFkZXJIZWlnaHRDaGFuZ2VkLmJpbmQodGhpcykpfXJlc2l6ZUhlYWRlcihlLHQpe3ZhciBpLHM7aWYoIXRoaXMuY29sdW1uLmlzUmVzaXphYmxlKCkpcmV0dXJuO2NvbnN0IHI9dGhpcy5jb2x1bW4uZ2V0QWN0dWFsV2lkdGgoKSxvPW51bGwhPT0oaT10aGlzLmNvbHVtbi5nZXRNaW5XaWR0aCgpKSYmdm9pZCAwIT09aT9pOjAsbj1udWxsIT09KHM9dGhpcy5jb2x1bW4uZ2V0TWF4V2lkdGgoKSkmJnZvaWQgMCE9PXM/czpOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixhPU1hdGgubWluKE1hdGgubWF4KHIrZSxvKSxuKTt0aGlzLmJlYW5zLmNvbHVtbk1vZGVsLnNldENvbHVtbldpZHRocyhbe2tleTp0aGlzLmNvbHVtbixuZXdXaWR0aDphfV0sdCwhMCwidWlDb2x1bW5SZXNpemVkIil9bW92ZUhlYWRlcihlKXtjb25zdHtlR3VpOnQsY29sdW1uOmksZ3JpZE9wdGlvbnNTZXJ2aWNlOnMsY3RybHNTZXJ2aWNlOnJ9PXRoaXMsbz10aGlzLmdldFBpbm5lZCgpLG49dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LGE9aS5nZXRBY3R1YWxXaWR0aCgpLGw9cy5nZXQoImVuYWJsZVJ0bCIpLGQ9ZT09PVBvLkxlZnQhPT1sLGM9Z2wubm9ybWFsaXNlWChkP24tMjA6bithKzIwLG8sITAscyxyKTtnbC5hdHRlbXB0TW92ZUNvbHVtbnMoe2FsbE1vdmluZ0NvbHVtbnM6W2ldLGlzRnJvbUhlYWRlcjohMCxoRGlyZWN0aW9uOmUseFBvc2l0aW9uOmMscGlubmVkOm8sZnJvbUVudGVyOiExLGZha2VFdmVudDohMSxncmlkT3B0aW9uc1NlcnZpY2U6cyxjb2x1bW5Nb2RlbDp0aGlzLmJlYW5zLmNvbHVtbk1vZGVsfSksci5nZXRHcmlkQm9keUN0cmwoKS5nZXRTY3JvbGxGZWF0dXJlKCkuZW5zdXJlQ29sdW1uVmlzaWJsZShpLCJhdXRvIil9c2V0dXBVc2VyQ29tcCgpe2NvbnN0IGU9dGhpcy5sb29rdXBVc2VyQ29tcERldGFpbHMoKTt0aGlzLnNldENvbXBEZXRhaWxzKGUpfXNldENvbXBEZXRhaWxzKGUpe3RoaXMudXNlckNvbXBEZXRhaWxzPWUsdGhpcy5jb21wLnNldFVzZXJDb21wRGV0YWlscyhlKX1sb29rdXBVc2VyQ29tcERldGFpbHMoKXtjb25zdCBlPXRoaXMuY3JlYXRlUGFyYW1zKCksdD10aGlzLmNvbHVtbi5nZXRDb2xEZWYoKTtyZXR1cm4gdGhpcy51c2VyQ29tcG9uZW50RmFjdG9yeS5nZXRIZWFkZXJDb21wRGV0YWlscyh0LGUpfWNyZWF0ZVBhcmFtcygpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHtjb2x1bW46dGhpcy5jb2x1bW4sZGlzcGxheU5hbWU6dGhpcy5kaXNwbGF5TmFtZSxlbmFibGVTb3J0aW5nOnRoaXMuY29sdW1uLmlzU29ydGFibGUoKSxlbmFibGVNZW51OnRoaXMubWVudUVuYWJsZWQsZW5hYmxlRmlsdGVyQnV0dG9uOnRoaXMub3BlbkZpbHRlckVuYWJsZWQmJnRoaXMubWVudVNlcnZpY2UuaXNIZWFkZXJGaWx0ZXJCdXR0b25FbmFibGVkKHRoaXMuY29sdW1uKSxlbmFibGVGaWx0ZXJJY29uOiF0aGlzLm9wZW5GaWx0ZXJFbmFibGVkfHx0aGlzLm1lbnVTZXJ2aWNlLmlzTGVnYWN5TWVudUVuYWJsZWQoKSxzaG93Q29sdW1uTWVudTplPT57dGhpcy5tZW51U2VydmljZS5zaG93Q29sdW1uTWVudSh7Y29sdW1uOnRoaXMuY29sdW1uLGJ1dHRvbkVsZW1lbnQ6ZSxwb3NpdGlvbkJ5OiJidXR0b24ifSl9LHNob3dDb2x1bW5NZW51QWZ0ZXJNb3VzZUNsaWNrOmU9Pnt0aGlzLm1lbnVTZXJ2aWNlLnNob3dDb2x1bW5NZW51KHtjb2x1bW46dGhpcy5jb2x1bW4sbW91c2VFdmVudDplLHBvc2l0aW9uQnk6Im1vdXNlIn0pfSxzaG93RmlsdGVyOmU9Pnt0aGlzLm1lbnVTZXJ2aWNlLnNob3dGaWx0ZXJNZW51KHtjb2x1bW46dGhpcy5jb2x1bW4sYnV0dG9uRWxlbWVudDplLGNvbnRhaW5lclR5cGU6ImNvbHVtbkZpbHRlciIscG9zaXRpb25CeToiYnV0dG9uIn0pfSxwcm9ncmVzc1NvcnQ6ZT0+e3RoaXMuYmVhbnMuc29ydENvbnRyb2xsZXIucHJvZ3Jlc3NTb3J0KHRoaXMuY29sdW1uLCEhZSwidWlDb2x1bW5Tb3J0ZWQiKX0sc2V0U29ydDooZSx0KT0+e3RoaXMuYmVhbnMuc29ydENvbnRyb2xsZXIuc2V0U29ydEZvckNvbHVtbih0aGlzLmNvbHVtbixlLCEhdCwidWlDb2x1bW5Tb3J0ZWQiKX0sZUdyaWRIZWFkZXI6dGhpcy5nZXRHdWkoKX0pfXNldHVwU2VsZWN0QWxsKCl7dGhpcy5zZWxlY3RBbGxGZWF0dXJlPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IGtsKHRoaXMuY29sdW1uKSksdGhpcy5zZWxlY3RBbGxGZWF0dXJlLnNldENvbXAodGhpcyl9Z2V0U2VsZWN0QWxsR3VpKCl7cmV0dXJuIHRoaXMuc2VsZWN0QWxsRmVhdHVyZS5nZXRDaGVja2JveEd1aSgpfWhhbmRsZUtleURvd24oZSl7c3VwZXIuaGFuZGxlS2V5RG93bihlKSxlLmtleT09PWpzLlNQQUNFJiZ0aGlzLnNlbGVjdEFsbEZlYXR1cmUub25TcGFjZUtleURvd24oZSksZS5rZXk9PT1qcy5FTlRFUiYmdGhpcy5vbkVudGVyS2V5RG93bihlKSxlLmtleT09PWpzLkRPV04mJmUuYWx0S2V5JiZ0aGlzLnNob3dNZW51T25LZXlQcmVzcyhlLCExKX1vbkVudGVyS2V5RG93bihlKXtpZihlLmN0cmxLZXl8fGUubWV0YUtleSl0aGlzLnNob3dNZW51T25LZXlQcmVzcyhlLCEwKTtlbHNlIGlmKHRoaXMuc29ydGFibGUpe2NvbnN0IHQ9ZS5zaGlmdEtleTt0aGlzLmJlYW5zLnNvcnRDb250cm9sbGVyLnByb2dyZXNzU29ydCh0aGlzLmNvbHVtbix0LCJ1aUNvbHVtblNvcnRlZCIpfX1zaG93TWVudU9uS2V5UHJlc3MoZSx0KXtjb25zdCBpPXRoaXMuY29tcC5nZXRVc2VyQ29tcEluc3RhbmNlKCk7aSYmaSBpbnN0YW5jZW9mIHVvJiZpLm9uTWVudUtleWJvYXJkU2hvcnRjdXQodCkmJmUucHJldmVudERlZmF1bHQoKX1vbkZvY3VzSW4oZSl7aWYoIXRoaXMuZ2V0R3VpKCkuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSl7Y29uc3QgZT10aGlzLmdldFJvd0luZGV4KCk7dGhpcy5mb2N1c1NlcnZpY2Uuc2V0Rm9jdXNlZEhlYWRlcihlLHRoaXMuY29sdW1uKSx0aGlzLmFubm91bmNlQXJpYURlc2NyaXB0aW9uKCl9dGhpcy5mb2N1c1NlcnZpY2UuaXNLZXlib2FyZE1vZGUoKSYmdGhpcy5zZXRBY3RpdmVIZWFkZXIoITApfW9uRm9jdXNPdXQoZSl7dGhpcy5nZXRHdWkoKS5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpfHx0aGlzLnNldEFjdGl2ZUhlYWRlcighMSl9c2V0dXBUb29sdGlwKCl7Y29uc3QgZT17Z2V0Q29sdW1uOigpPT50aGlzLmNvbHVtbixnZXRDb2xEZWY6KCk9PnRoaXMuY29sdW1uLmdldENvbERlZigpLGdldEd1aTooKT0+dGhpcy5lR3VpLGdldExvY2F0aW9uOigpPT4iaGVhZGVyIixnZXRUb29sdGlwVmFsdWU6KCk9PnRoaXMuY29sdW1uLmdldENvbERlZigpLmhlYWRlclRvb2x0aXB9LHQ9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgZmEoZSx0aGlzLmJlYW5zKSk7dC5zZXRDb21wKHRoaXMuZUd1aSksdGhpcy5yZWZyZXNoRnVuY3Rpb25zLnB1c2goKCk9PnQucmVmcmVzaFRvb2xUaXAoKSl9c2V0dXBDbGFzc2VzRnJvbUNvbERlZigpe2NvbnN0IGU9KCk9Pntjb25zdCBlPXRoaXMuY29sdW1uLmdldENvbERlZigpLHQ9RWEuZ2V0SGVhZGVyQ2xhc3Nlc0Zyb21Db2xEZWYoZSx0aGlzLmdyaWRPcHRpb25zU2VydmljZSx0aGlzLmNvbHVtbixudWxsKSxpPXRoaXMudXNlckhlYWRlckNsYXNzZXM7dGhpcy51c2VySGVhZGVyQ2xhc3Nlcz1uZXcgU2V0KHQpLHQuZm9yRWFjaChlPT57aS5oYXMoZSk/aS5kZWxldGUoZSk6dGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoZSwhMCl9KSxpLmZvckVhY2goZT0+dGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoZSwhMSkpfTt0aGlzLnJlZnJlc2hGdW5jdGlvbnMucHVzaChlKSxlKCl9c2V0RHJhZ1NvdXJjZShlKXtpZih0aGlzLmRyYWdTb3VyY2VFbGVtZW50PWUsdGhpcy5yZW1vdmVEcmFnU291cmNlKCksIWV8fCF0aGlzLmRyYWdnYWJsZSlyZXR1cm47Y29uc3R7Y29sdW1uOnQsYmVhbnM6aSxkaXNwbGF5TmFtZTpzLGRyYWdBbmREcm9wU2VydmljZTpyLGdyaWRPcHRpb25zU2VydmljZTpvfT10aGlzLHtjb2x1bW5Nb2RlbDpufT1pO2xldCBhPSF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzRHJhZ0xlYXZlSGlkZXNDb2x1bW5zIik7Y29uc3QgbD10aGlzLmRyYWdTb3VyY2U9e3R5cGU6SW8uSGVhZGVyQ2VsbCxlRWxlbWVudDplLGdldERlZmF1bHRJY29uTmFtZTooKT0+YT9Hby5JQ09OX0hJREU6R28uSUNPTl9OT1RfQUxMT1dFRCxnZXREcmFnSXRlbTooKT0+dGhpcy5jcmVhdGVEcmFnSXRlbSh0KSxkcmFnSXRlbU5hbWU6cyxvbkRyYWdTdGFydGVkOigpPT57YT0hby5nZXQoInN1cHByZXNzRHJhZ0xlYXZlSGlkZXNDb2x1bW5zIiksdC5zZXRNb3ZpbmcoITAsInVpQ29sdW1uTW92ZWQiKX0sb25EcmFnU3RvcHBlZDooKT0+dC5zZXRNb3ZpbmcoITEsInVpQ29sdW1uTW92ZWQiKSxvbkdyaWRFbnRlcjplPT57dmFyIHQ7aWYoYSl7Y29uc3QgaT0obnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuY29sdW1ucyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmlsdGVyKGU9PiFlLmdldENvbERlZigpLmxvY2tWaXNpYmxlKSl8fFtdO24uc2V0Q29sdW1uc1Zpc2libGUoaSwhMCwidWlDb2x1bW5Nb3ZlZCIpfX0sb25HcmlkRXhpdDplPT57dmFyIHQ7aWYoYSl7Y29uc3QgaT0obnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuY29sdW1ucyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmlsdGVyKGU9PiFlLmdldENvbERlZigpLmxvY2tWaXNpYmxlKSl8fFtdO24uc2V0Q29sdW1uc1Zpc2libGUoaSwhMSwidWlDb2x1bW5Nb3ZlZCIpfX19O3IuYWRkRHJhZ1NvdXJjZShsLCEwKX1jcmVhdGVEcmFnSXRlbShlKXtjb25zdCB0PXt9O3JldHVybiB0W2UuZ2V0SWQoKV09ZS5pc1Zpc2libGUoKSx7Y29sdW1uczpbZV0sdmlzaWJsZVN0YXRlOnR9fXVwZGF0ZVN0YXRlKCl7dGhpcy5tZW51RW5hYmxlZD10aGlzLm1lbnVTZXJ2aWNlLmlzQ29sdW1uTWVudUluSGVhZGVyRW5hYmxlZCh0aGlzLmNvbHVtbiksdGhpcy5vcGVuRmlsdGVyRW5hYmxlZD10aGlzLm1lbnVTZXJ2aWNlLmlzRmlsdGVyTWVudUluSGVhZGVyRW5hYmxlZCh0aGlzLmNvbHVtbiksdGhpcy5zb3J0YWJsZT10aGlzLmNvbHVtbi5pc1NvcnRhYmxlKCksdGhpcy5kaXNwbGF5TmFtZT10aGlzLmNhbGN1bGF0ZURpc3BsYXlOYW1lKCksdGhpcy5kcmFnZ2FibGU9dGhpcy53b3JrT3V0RHJhZ2dhYmxlKCl9YWRkUmVmcmVzaEZ1bmN0aW9uKGUpe3RoaXMucmVmcmVzaEZ1bmN0aW9ucy5wdXNoKGUpfXJlZnJlc2goKXt0aGlzLnVwZGF0ZVN0YXRlKCksdGhpcy5yZWZyZXNoSGVhZGVyQ29tcCgpLHRoaXMucmVmcmVzaEFyaWEoKSx0aGlzLnJlZnJlc2hGdW5jdGlvbnMuZm9yRWFjaChlPT5lKCkpfXJlZnJlc2hIZWFkZXJDb21wKCl7Y29uc3QgZT10aGlzLmxvb2t1cFVzZXJDb21wRGV0YWlscygpOyEhKG51bGwhPXRoaXMuY29tcC5nZXRVc2VyQ29tcEluc3RhbmNlKCkmJnRoaXMudXNlckNvbXBEZXRhaWxzLmNvbXBvbmVudENsYXNzPT1lLmNvbXBvbmVudENsYXNzKSYmdGhpcy5hdHRlbXB0SGVhZGVyQ29tcFJlZnJlc2goZS5wYXJhbXMpP3RoaXMuc2V0RHJhZ1NvdXJjZSh0aGlzLmRyYWdTb3VyY2VFbGVtZW50KTp0aGlzLnNldENvbXBEZXRhaWxzKGUpfWF0dGVtcHRIZWFkZXJDb21wUmVmcmVzaChlKXtjb25zdCB0PXRoaXMuY29tcC5nZXRVc2VyQ29tcEluc3RhbmNlKCk7aWYoIXQpcmV0dXJuITE7aWYoIXQucmVmcmVzaClyZXR1cm4hMTtyZXR1cm4gdC5yZWZyZXNoKGUpfWNhbGN1bGF0ZURpc3BsYXlOYW1lKCl7cmV0dXJuIHRoaXMuYmVhbnMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW4odGhpcy5jb2x1bW4sImhlYWRlciIsITApfWNoZWNrRGlzcGxheU5hbWUoKXt0aGlzLmRpc3BsYXlOYW1lIT09dGhpcy5jYWxjdWxhdGVEaXNwbGF5TmFtZSgpJiZ0aGlzLnJlZnJlc2goKX13b3JrT3V0RHJhZ2dhYmxlKCl7Y29uc3QgZT10aGlzLmNvbHVtbi5nZXRDb2xEZWYoKTtyZXR1cm4hISghdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc01vdmFibGVDb2x1bW5zIikmJiFlLnN1cHByZXNzTW92YWJsZSYmIWUubG9ja1Bvc2l0aW9uKXx8ISFlLmVuYWJsZVJvd0dyb3VwfHwhIWUuZW5hYmxlUGl2b3R9b25Db2x1bW5Sb3dHcm91cENoYW5nZWQoKXt0aGlzLmNoZWNrRGlzcGxheU5hbWUoKX1vbkNvbHVtblBpdm90Q2hhbmdlZCgpe3RoaXMuY2hlY2tEaXNwbGF5TmFtZSgpfW9uQ29sdW1uVmFsdWVDaGFuZ2VkKCl7dGhpcy5jaGVja0Rpc3BsYXlOYW1lKCl9c2V0dXBXaWR0aCgpe2NvbnN0IGU9KCk9Pntjb25zdCBlPXRoaXMuY29sdW1uLmdldEFjdHVhbFdpZHRoKCk7dGhpcy5jb21wLnNldFdpZHRoKGUrInB4Iil9O3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY29sdW1uLEVlLkVWRU5UX1dJRFRIX0NIQU5HRUQsZSksZSgpfXNldHVwTW92aW5nQ3NzKCl7Y29uc3QgZT0oKT0+e3RoaXMuY29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1oZWFkZXItY2VsbC1tb3ZpbmciLHRoaXMuY29sdW1uLmlzTW92aW5nKCkpfTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmNvbHVtbixFZS5FVkVOVF9NT1ZJTkdfQ0hBTkdFRCxlKSxlKCl9c2V0dXBNZW51Q2xhc3MoKXtjb25zdCBlPSgpPT57dGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNvbHVtbi1tZW51LXZpc2libGUiLHRoaXMuY29sdW1uLmlzTWVudVZpc2libGUoKSl9O3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY29sdW1uLEVlLkVWRU5UX01FTlVfVklTSUJMRV9DSEFOR0VELGUpLGUoKX1zZXR1cFNvcnRhYmxlQ2xhc3MoKXtjb25zdCBlPSgpPT57dGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWhlYWRlci1jZWxsLXNvcnRhYmxlIiwhIXRoaXMuc29ydGFibGUpfTtlKCksdGhpcy5hZGRSZWZyZXNoRnVuY3Rpb24oZSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsRWUuRVZFTlRfU09SVF9DSEFOR0VELHRoaXMucmVmcmVzaEFyaWFTb3J0LmJpbmQodGhpcykpfXNldHVwRmlsdGVyQ2xhc3MoKXtjb25zdCBlPSgpPT57Y29uc3QgZT10aGlzLmNvbHVtbi5pc0ZpbHRlckFjdGl2ZSgpO3RoaXMuY29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1oZWFkZXItY2VsbC1maWx0ZXJlZCIsZSksdGhpcy5yZWZyZXNoQXJpYSgpfTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmNvbHVtbixFZS5FVkVOVF9GSUxURVJfQUNUSVZFX0NIQU5HRUQsZSksZSgpfXNldHVwV3JhcFRleHRDbGFzcygpe2NvbnN0IGU9KCk9Pntjb25zdCBlPSEhdGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCkud3JhcEhlYWRlclRleHQ7dGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWhlYWRlci1jZWxsLXdyYXAtdGV4dCIsZSl9O2UoKSx0aGlzLmFkZFJlZnJlc2hGdW5jdGlvbihlKX1vbkRpc3BsYXllZENvbHVtbnNDaGFuZ2VkKCl7c3VwZXIub25EaXNwbGF5ZWRDb2x1bW5zQ2hhbmdlZCgpLHRoaXMuaXNBbGl2ZSgpJiZ0aGlzLm9uSGVhZGVySGVpZ2h0Q2hhbmdlZCgpfW9uSGVhZGVySGVpZ2h0Q2hhbmdlZCgpe3RoaXMucmVmcmVzaFNwYW5IZWFkZXJIZWlnaHQoKX1yZWZyZXNoU3BhbkhlYWRlckhlaWdodCgpe2NvbnN0e2VHdWk6ZSxjb2x1bW46dCxjb21wOmksYmVhbnM6c309dGhpcztpZighdC5pc1NwYW5IZWFkZXJIZWlnaHQoKSlyZXR1cm4gZS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgidG9wIiksZS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgiaGVpZ2h0IiksaS5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1oZWFkZXItc3Bhbi1oZWlnaHQiLCExKSx2b2lkIGkuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctaGVhZGVyLXNwYW4tdG90YWwiLCExKTtjb25zdHtudW1iZXJPZlBhcmVudHM6cixpc1NwYW5uaW5nVG90YWw6b309dGhpcy5jb2x1bW4uZ2V0Q29sdW1uR3JvdXBQYWRkaW5nSW5mbygpO2kuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctaGVhZGVyLXNwYW4taGVpZ2h0IixyPjApO2NvbnN0e2NvbHVtbk1vZGVsOm59PXMsYT1uLmdldENvbHVtbkhlYWRlclJvd0hlaWdodCgpO2lmKDA9PT1yKXJldHVybiBpLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWhlYWRlci1zcGFuLXRvdGFsIiwhMSksZS5zdHlsZS5zZXRQcm9wZXJ0eSgidG9wIiwiMHB4Iiksdm9pZCBlLnN0eWxlLnNldFByb3BlcnR5KCJoZWlnaHQiLGErInB4Iik7aS5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1oZWFkZXItc3Bhbi10b3RhbCIsbyk7Y29uc3QgbD1yKihuLmlzUGl2b3RNb2RlKCk/bi5nZXRQaXZvdEdyb3VwSGVhZGVySGVpZ2h0KCk6bi5nZXRHcm91cEhlYWRlckhlaWdodCgpKTtlLnN0eWxlLnNldFByb3BlcnR5KCJ0b3AiLC1sKyJweCIpLGUuc3R5bGUuc2V0UHJvcGVydHkoImhlaWdodCIsYStsKyJweCIpfXNldHVwQXV0b0hlaWdodChlKXtjb25zdHtjb2x1bW5Nb2RlbDp0LHJlc2l6ZU9ic2VydmVyU2VydmljZTppfT10aGlzLmJlYW5zLHM9aT0+e2lmKCF0aGlzLmlzQWxpdmUoKSlyZXR1cm47Y29uc3R7cGFkZGluZ1RvcDpyLHBhZGRpbmdCb3R0b206byxib3JkZXJCb3R0b21XaWR0aDpuLGJvcmRlclRvcFdpZHRoOmF9PW5zKHRoaXMuZ2V0R3VpKCkpLGw9citvK24rYSxkPWUub2Zmc2V0SGVpZ2h0K2w7aWYoaTw1KXtjb25zdCB0PXRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCkscj0wPT1kO2lmKCF0fHwhdC5jb250YWlucyhlKXx8cilyZXR1cm4gdm9pZCB3aW5kb3cuc2V0VGltZW91dCgoKT0+cyhpKzEpLDApfXQuc2V0Q29sdW1uSGVhZGVySGVpZ2h0KHRoaXMuY29sdW1uLGQpfTtsZXQgcixvPSExO2NvbnN0IG49KCk9Pntjb25zdCBlPXRoaXMuY29sdW1uLmlzQXV0b0hlYWRlckhlaWdodCgpO2UmJiFvJiZhKCksIWUmJm8mJmwoKX0sYT0oKT0+e289ITAscygwKSx0aGlzLmNvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctaGVhZGVyLWNlbGwtYXV0by1oZWlnaHQiLCEwKSxyPWkub2JzZXJ2ZVJlc2l6ZShlLCgpPT5zKDApKX0sbD0oKT0+e289ITEsciYmcigpLHRoaXMuY29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1oZWFkZXItY2VsbC1hdXRvLWhlaWdodCIsITEpLHI9dm9pZCAwfTtuKCksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+bCgpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmNvbHVtbixFZS5FVkVOVF9XSURUSF9DSEFOR0VELCgpPT5vJiZzKDApKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxFZS5FVkVOVF9TT1JUX0NIQU5HRUQsKCk9PntvJiZ3aW5kb3cuc2V0VGltZW91dCgoKT0+cygwKSl9KSx0aGlzLmFkZFJlZnJlc2hGdW5jdGlvbihuKX1yZWZyZXNoQXJpYVNvcnQoKXtpZih0aGlzLnNvcnRhYmxlKXtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLHQ9dGhpcy5iZWFucy5zb3J0Q29udHJvbGxlci5nZXREaXNwbGF5U29ydEZvckNvbHVtbih0aGlzLmNvbHVtbil8fG51bGw7dGhpcy5jb21wLnNldEFyaWFTb3J0KHF0KHQpKSx0aGlzLnNldEFyaWFEZXNjcmlwdGlvblByb3BlcnR5KCJzb3J0IixlKCJhcmlhU29ydGFibGVDb2x1bW4iLCJQcmVzcyBFTlRFUiB0byBzb3J0IikpfWVsc2UgdGhpcy5jb21wLnNldEFyaWFTb3J0KCksdGhpcy5zZXRBcmlhRGVzY3JpcHRpb25Qcm9wZXJ0eSgic29ydCIsbnVsbCl9cmVmcmVzaEFyaWFNZW51KCl7aWYodGhpcy5tZW51RW5hYmxlZCl7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTt0aGlzLnNldEFyaWFEZXNjcmlwdGlvblByb3BlcnR5KCJtZW51IixlKCJhcmlhTWVudUNvbHVtbiIsIlByZXNzIEFMVCBET1dOIHRvIG9wZW4gY29sdW1uIG1lbnUiKSl9ZWxzZSB0aGlzLnNldEFyaWFEZXNjcmlwdGlvblByb3BlcnR5KCJtZW51IixudWxsKX1yZWZyZXNoQXJpYUZpbHRlckJ1dHRvbigpe2lmKHRoaXMub3BlbkZpbHRlckVuYWJsZWQmJiF0aGlzLm1lbnVTZXJ2aWNlLmlzTGVnYWN5TWVudUVuYWJsZWQoKSl7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTt0aGlzLnNldEFyaWFEZXNjcmlwdGlvblByb3BlcnR5KCJmaWx0ZXJCdXR0b24iLGUoImFyaWFGaWx0ZXJDb2x1bW4iLCJQcmVzcyBDVFJMIEVOVEVSIHRvIG9wZW4gZmlsdGVyIikpfWVsc2UgdGhpcy5zZXRBcmlhRGVzY3JpcHRpb25Qcm9wZXJ0eSgiZmlsdGVyQnV0dG9uIixudWxsKX1yZWZyZXNoQXJpYUZpbHRlcmVkKCl7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTt0aGlzLmNvbHVtbi5pc0ZpbHRlckFjdGl2ZSgpP3RoaXMuc2V0QXJpYURlc2NyaXB0aW9uUHJvcGVydHkoImZpbHRlciIsZSgiYXJpYUNvbHVtbkZpbHRlcmVkIiwiQ29sdW1uIEZpbHRlcmVkIikpOnRoaXMuc2V0QXJpYURlc2NyaXB0aW9uUHJvcGVydHkoImZpbHRlciIsbnVsbCl9c2V0QXJpYURlc2NyaXB0aW9uUHJvcGVydHkoZSx0KXtudWxsIT10P3RoaXMuYXJpYURlc2NyaXB0aW9uUHJvcGVydGllcy5zZXQoZSx0KTp0aGlzLmFyaWFEZXNjcmlwdGlvblByb3BlcnRpZXMuZGVsZXRlKGUpfWFubm91bmNlQXJpYURlc2NyaXB0aW9uKCl7Y29uc3QgZT10aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXREb2N1bWVudCgpO2lmKCF0aGlzLmVHdWkuY29udGFpbnMoZS5hY3RpdmVFbGVtZW50KSlyZXR1cm47Y29uc3QgdD1BcnJheS5mcm9tKHRoaXMuYXJpYURlc2NyaXB0aW9uUHJvcGVydGllcy5rZXlzKCkpLnNvcnQoKGUsdCk9PiJmaWx0ZXIiPT09ZT8tMTp0LmNoYXJDb2RlQXQoMCktZS5jaGFyQ29kZUF0KDApKS5tYXAoZT0+dGhpcy5hcmlhRGVzY3JpcHRpb25Qcm9wZXJ0aWVzLmdldChlKSkuam9pbigiLiAiKTt0aGlzLmJlYW5zLmFyaWFBbm5vdW5jZW1lbnRTZXJ2aWNlLmFubm91bmNlVmFsdWUodCl9cmVmcmVzaEFyaWEoKXt0aGlzLnJlZnJlc2hBcmlhU29ydCgpLHRoaXMucmVmcmVzaEFyaWFNZW51KCksdGhpcy5yZWZyZXNoQXJpYUZpbHRlckJ1dHRvbigpLHRoaXMucmVmcmVzaEFyaWFGaWx0ZXJlZCgpfWFkZENvbHVtbkhvdmVyTGlzdGVuZXIoKXtjb25zdCBlPSgpPT57aWYoIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiY29sdW1uSG92ZXJIaWdobGlnaHQiKSlyZXR1cm47Y29uc3QgZT10aGlzLmJlYW5zLmNvbHVtbkhvdmVyU2VydmljZS5pc0hvdmVyZWQodGhpcy5jb2x1bW4pO3RoaXMuY29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jb2x1bW4taG92ZXIiLGUpfTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fSE9WRVJfQ0hBTkdFRCxlKSxlKCl9Z2V0Q29sSWQoKXtyZXR1cm4gdGhpcy5jb2x1bW4uZ2V0Q29sSWQoKX1hZGRBY3RpdmVIZWFkZXJNb3VzZUxpc3RlbmVycygpe2NvbnN0IGU9ZT0+dGhpcy5oYW5kbGVNb3VzZU92ZXJDaGFuZ2UoIm1vdXNlZW50ZXIiPT09ZS50eXBlKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmdldEd1aSgpLCJtb3VzZWVudGVyIixlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmdldEd1aSgpLCJtb3VzZWxlYXZlIixlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmdldEd1aSgpLCJjbGljayIsKCk9PnRoaXMuZGlzcGF0Y2hDb2x1bW5Nb3VzZUV2ZW50KGx0LkVWRU5UX0NPTFVNTl9IRUFERVJfQ0xJQ0tFRCx0aGlzLmNvbHVtbikpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZ2V0R3VpKCksImNvbnRleHRtZW51IixlPT50aGlzLmhhbmRsZUNvbnRleHRNZW51TW91c2VFdmVudChlLHZvaWQgMCx0aGlzLmNvbHVtbikpfWhhbmRsZU1vdXNlT3ZlckNoYW5nZShlKXt0aGlzLnNldEFjdGl2ZUhlYWRlcihlKTtjb25zdCB0PXt0eXBlOmU/bHQuRVZFTlRfQ09MVU1OX0hFQURFUl9NT1VTRV9PVkVSOmx0LkVWRU5UX0NPTFVNTl9IRUFERVJfTU9VU0VfTEVBVkUsY29sdW1uOnRoaXMuY29sdW1ufTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfXNldEFjdGl2ZUhlYWRlcihlKXt0aGlzLmNvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctaGVhZGVyLWFjdGl2ZSIsZSl9Z2V0QW5jaG9yRWxlbWVudEZvck1lbnUoZSl7Y29uc3QgdD10aGlzLmNvbXAuZ2V0VXNlckNvbXBJbnN0YW5jZSgpO3JldHVybiB0IGluc3RhbmNlb2YgdW8/dC5nZXRBbmNob3JFbGVtZW50Rm9yTWVudShlKTp0aGlzLmdldEd1aSgpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksdGhpcy5yZWZyZXNoRnVuY3Rpb25zPW51bGwsdGhpcy5zZWxlY3RBbGxGZWF0dXJlPW51bGwsdGhpcy5kcmFnU291cmNlRWxlbWVudD1udWxsLHRoaXMudXNlckNvbXBEZXRhaWxzPW51bGwsdGhpcy51c2VySGVhZGVyQ2xhc3Nlcz1udWxsLHRoaXMuYXJpYURlc2NyaXB0aW9uUHJvcGVydGllcz1udWxsfX12YXIgVmw9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgQmwgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlLHQsaSxzKXtzdXBlcigpLHRoaXMuZVJlc2l6ZT10LHRoaXMuY29tcD1lLHRoaXMucGlubmVkPWksdGhpcy5jb2x1bW5Hcm91cD1zfXBvc3RDb25zdHJ1Y3QoKXtpZighdGhpcy5jb2x1bW5Hcm91cC5pc1Jlc2l6YWJsZSgpKXJldHVybiB2b2lkIHRoaXMuY29tcC5zZXRSZXNpemFibGVEaXNwbGF5ZWQoITEpO2NvbnN0IGU9dGhpcy5ob3Jpem9udGFsUmVzaXplU2VydmljZS5hZGRSZXNpemVCYXIoe2VSZXNpemVCYXI6dGhpcy5lUmVzaXplLG9uUmVzaXplU3RhcnQ6dGhpcy5vblJlc2l6ZVN0YXJ0LmJpbmQodGhpcyksb25SZXNpemluZzp0aGlzLm9uUmVzaXppbmcuYmluZCh0aGlzLCExKSxvblJlc2l6ZUVuZDp0aGlzLm9uUmVzaXppbmcuYmluZCh0aGlzLCEwKX0pO2lmKHRoaXMuYWRkRGVzdHJveUZ1bmMoZSksIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NBdXRvU2l6ZSIpKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic2tpcEhlYWRlck9uQXV0b1NpemUiKTt0aGlzLmVSZXNpemUuYWRkRXZlbnRMaXN0ZW5lcigiZGJsY2xpY2siLCgpPT57Y29uc3QgdD1bXTt0aGlzLmNvbHVtbkdyb3VwLmdldERpc3BsYXllZExlYWZDb2x1bW5zKCkuZm9yRWFjaChlPT57ZS5nZXRDb2xEZWYoKS5zdXBwcmVzc0F1dG9TaXplfHx0LnB1c2goZS5nZXRDb2xJZCgpKX0pLHQubGVuZ3RoPjAmJnRoaXMuY29sdW1uTW9kZWwuYXV0b1NpemVDb2x1bW5zKHtjb2x1bW5zOnQsc2tpcEhlYWRlcjplLHN0b3BBdEdyb3VwOnRoaXMuY29sdW1uR3JvdXAsc291cmNlOiJ1aUNvbHVtblJlc2l6ZWQifSksdGhpcy5yZXNpemVMZWFmQ29sdW1uc1RvRml0KCJ1aUNvbHVtblJlc2l6ZWQiKX0pfX1vblJlc2l6ZVN0YXJ0KGUpe2NvbnN0IHQ9dGhpcy5nZXRJbml0aWFsVmFsdWVzKGUpO3RoaXMuc3RvcmVMb2NhbFZhbHVlcyh0KSx0aGlzLnRvZ2dsZUNvbHVtblJlc2l6aW5nKCEwKX1vblJlc2l6aW5nKGUsdCxpPSJ1aUNvbHVtblJlc2l6ZWQiKXtjb25zdCBzPXRoaXMubm9ybWFsaXNlRHJhZ0NoYW5nZSh0KSxyPXRoaXMucmVzaXplU3RhcnRXaWR0aCtzO3RoaXMucmVzaXplQ29sdW1uc0Zyb21Mb2NhbFZhbHVlcyhyLGksZSl9Z2V0SW5pdGlhbFZhbHVlcyhlKXtjb25zdCB0PXRoaXMuZ2V0Q29sdW1uc1RvUmVzaXplKCksaT10aGlzLmdldEluaXRpYWxTaXplT2ZDb2x1bW5zKHQpLHM9e2NvbHVtbnNUb1Jlc2l6ZTp0LHJlc2l6ZVN0YXJ0V2lkdGg6aSxyZXNpemVSYXRpb3M6dGhpcy5nZXRTaXplUmF0aW9zT2ZDb2x1bW5zKHQsaSl9O2xldCByPW51bGw7aWYoZSYmKHI9dGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5ZWRHcm91cEFmdGVyKHRoaXMuY29sdW1uR3JvdXApKSxyKXtjb25zdCBlPXIuZ2V0RGlzcGxheWVkTGVhZkNvbHVtbnMoKSx0PXMuZ3JvdXBBZnRlckNvbHVtbnM9ZS5maWx0ZXIoZT0+ZS5pc1Jlc2l6YWJsZSgpKSxpPXMuZ3JvdXBBZnRlclN0YXJ0V2lkdGg9dGhpcy5nZXRJbml0aWFsU2l6ZU9mQ29sdW1ucyh0KTtzLmdyb3VwQWZ0ZXJSYXRpb3M9dGhpcy5nZXRTaXplUmF0aW9zT2ZDb2x1bW5zKHQsaSl9ZWxzZSBzLmdyb3VwQWZ0ZXJDb2x1bW5zPXZvaWQgMCxzLmdyb3VwQWZ0ZXJTdGFydFdpZHRoPXZvaWQgMCxzLmdyb3VwQWZ0ZXJSYXRpb3M9dm9pZCAwO3JldHVybiBzfXN0b3JlTG9jYWxWYWx1ZXMoZSl7Y29uc3R7Y29sdW1uc1RvUmVzaXplOnQscmVzaXplU3RhcnRXaWR0aDppLHJlc2l6ZVJhdGlvczpzLGdyb3VwQWZ0ZXJDb2x1bW5zOnIsZ3JvdXBBZnRlclN0YXJ0V2lkdGg6byxncm91cEFmdGVyUmF0aW9zOm59PWU7dGhpcy5yZXNpemVDb2xzPXQsdGhpcy5yZXNpemVTdGFydFdpZHRoPWksdGhpcy5yZXNpemVSYXRpb3M9cyx0aGlzLnJlc2l6ZVRha2VGcm9tQ29scz1yLHRoaXMucmVzaXplVGFrZUZyb21TdGFydFdpZHRoPW8sdGhpcy5yZXNpemVUYWtlRnJvbVJhdGlvcz1ufWNsZWFyTG9jYWxWYWx1ZXMoKXt0aGlzLnJlc2l6ZUNvbHM9dm9pZCAwLHRoaXMucmVzaXplUmF0aW9zPXZvaWQgMCx0aGlzLnJlc2l6ZVRha2VGcm9tQ29scz12b2lkIDAsdGhpcy5yZXNpemVUYWtlRnJvbVJhdGlvcz12b2lkIDB9cmVzaXplTGVhZkNvbHVtbnNUb0ZpdChlKXtjb25zdCB0PXRoaXMuYXV0b1dpZHRoQ2FsY3VsYXRvci5nZXRQcmVmZXJyZWRXaWR0aEZvckNvbHVtbkdyb3VwKHRoaXMuY29sdW1uR3JvdXApLGk9dGhpcy5nZXRJbml0aWFsVmFsdWVzKCk7dD5pLnJlc2l6ZVN0YXJ0V2lkdGgmJnRoaXMucmVzaXplQ29sdW1ucyhpLHQsZSwhMCl9cmVzaXplQ29sdW1uc0Zyb21Mb2NhbFZhbHVlcyhlLHQsaT0hMCl7dmFyIHMscixvO2lmKCF0aGlzLnJlc2l6ZUNvbHN8fCF0aGlzLnJlc2l6ZVJhdGlvcylyZXR1cm47Y29uc3Qgbj17Y29sdW1uc1RvUmVzaXplOnRoaXMucmVzaXplQ29scyxyZXNpemVTdGFydFdpZHRoOnRoaXMucmVzaXplU3RhcnRXaWR0aCxyZXNpemVSYXRpb3M6dGhpcy5yZXNpemVSYXRpb3MsZ3JvdXBBZnRlckNvbHVtbnM6bnVsbCE9PShzPXRoaXMucmVzaXplVGFrZUZyb21Db2xzKSYmdm9pZCAwIT09cz9zOnZvaWQgMCxncm91cEFmdGVyU3RhcnRXaWR0aDpudWxsIT09KHI9dGhpcy5yZXNpemVUYWtlRnJvbVN0YXJ0V2lkdGgpJiZ2b2lkIDAhPT1yP3I6dm9pZCAwLGdyb3VwQWZ0ZXJSYXRpb3M6bnVsbCE9PShvPXRoaXMucmVzaXplVGFrZUZyb21SYXRpb3MpJiZ2b2lkIDAhPT1vP286dm9pZCAwfTt0aGlzLnJlc2l6ZUNvbHVtbnMobixlLHQsaSl9cmVzaXplQ29sdW1ucyhlLHQsaSxzPSEwKXtjb25zdHtjb2x1bW5zVG9SZXNpemU6cixyZXNpemVTdGFydFdpZHRoOm8scmVzaXplUmF0aW9zOm4sZ3JvdXBBZnRlckNvbHVtbnM6YSxncm91cEFmdGVyU3RhcnRXaWR0aDpsLGdyb3VwQWZ0ZXJSYXRpb3M6ZH09ZSxjPVtdO2lmKGMucHVzaCh7Y29sdW1uczpyLHJhdGlvczpuLHdpZHRoOnR9KSxhKXtjb25zdCBlPXQtbztjLnB1c2goe2NvbHVtbnM6YSxyYXRpb3M6ZCx3aWR0aDpsLWV9KX10aGlzLmNvbHVtbk1vZGVsLnJlc2l6ZUNvbHVtblNldHMoe3Jlc2l6ZVNldHM6YyxmaW5pc2hlZDpzLHNvdXJjZTppfSkscyYmdGhpcy50b2dnbGVDb2x1bW5SZXNpemluZyghMSl9dG9nZ2xlQ29sdW1uUmVzaXppbmcoZSl7dGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNvbHVtbi1yZXNpemluZyIsZSl9Z2V0Q29sdW1uc1RvUmVzaXplKCl7cmV0dXJuIHRoaXMuY29sdW1uR3JvdXAuZ2V0RGlzcGxheWVkTGVhZkNvbHVtbnMoKS5maWx0ZXIoZT0+ZS5pc1Jlc2l6YWJsZSgpKX1nZXRJbml0aWFsU2l6ZU9mQ29sdW1ucyhlKXtyZXR1cm4gZS5yZWR1Y2UoKGUsdCk9PmUrdC5nZXRBY3R1YWxXaWR0aCgpLDApfWdldFNpemVSYXRpb3NPZkNvbHVtbnMoZSx0KXtyZXR1cm4gZS5tYXAoZT0+ZS5nZXRBY3R1YWxXaWR0aCgpL3QpfW5vcm1hbGlzZURyYWdDaGFuZ2UoZSl7bGV0IHQ9ZTtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKT8ibGVmdCIhPT10aGlzLnBpbm5lZCYmKHQqPS0xKToicmlnaHQiPT09dGhpcy5waW5uZWQmJih0Kj0tMSksdH1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLHRoaXMuY2xlYXJMb2NhbFZhbHVlcygpfX1WbChbY2UoImhvcml6b250YWxSZXNpemVTZXJ2aWNlIildLEJsLnByb3RvdHlwZSwiaG9yaXpvbnRhbFJlc2l6ZVNlcnZpY2UiLHZvaWQgMCksVmwoW2NlKCJhdXRvV2lkdGhDYWxjdWxhdG9yIildLEJsLnByb3RvdHlwZSwiYXV0b1dpZHRoQ2FsY3VsYXRvciIsdm9pZCAwKSxWbChbY2UoImNvbHVtbk1vZGVsIildLEJsLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksVmwoW2FlXSxCbC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBIbD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBXbCBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLnJlbW92ZUNoaWxkTGlzdGVuZXJzRnVuY3M9W10sdGhpcy5jb2x1bW5Hcm91cD10LHRoaXMuY29tcD1lfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmFkZExpc3RlbmVyc1RvQ2hpbGRyZW5Db2x1bW5zKCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jb2x1bW5Hcm91cCxhdC5FVkVOVF9ESVNQTEFZRURfQ0hJTERSRU5fQ0hBTkdFRCx0aGlzLm9uRGlzcGxheWVkQ2hpbGRyZW5DaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMub25XaWR0aENoYW5nZWQoKSx0aGlzLmFkZERlc3Ryb3lGdW5jKHRoaXMucmVtb3ZlTGlzdGVuZXJzT25DaGlsZHJlbkNvbHVtbnMuYmluZCh0aGlzKSl9YWRkTGlzdGVuZXJzVG9DaGlsZHJlbkNvbHVtbnMoKXt0aGlzLnJlbW92ZUxpc3RlbmVyc09uQ2hpbGRyZW5Db2x1bW5zKCk7Y29uc3QgZT10aGlzLm9uV2lkdGhDaGFuZ2VkLmJpbmQodGhpcyk7dGhpcy5jb2x1bW5Hcm91cC5nZXRMZWFmQ29sdW1ucygpLmZvckVhY2godD0+e3QuYWRkRXZlbnRMaXN0ZW5lcigid2lkdGhDaGFuZ2VkIixlKSx0LmFkZEV2ZW50TGlzdGVuZXIoInZpc2libGVDaGFuZ2VkIixlKSx0aGlzLnJlbW92ZUNoaWxkTGlzdGVuZXJzRnVuY3MucHVzaCgoKT0+e3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigid2lkdGhDaGFuZ2VkIixlKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInZpc2libGVDaGFuZ2VkIixlKX0pfSl9cmVtb3ZlTGlzdGVuZXJzT25DaGlsZHJlbkNvbHVtbnMoKXt0aGlzLnJlbW92ZUNoaWxkTGlzdGVuZXJzRnVuY3MuZm9yRWFjaChlPT5lKCkpLHRoaXMucmVtb3ZlQ2hpbGRMaXN0ZW5lcnNGdW5jcz1bXX1vbkRpc3BsYXllZENoaWxkcmVuQ2hhbmdlZCgpe3RoaXMuYWRkTGlzdGVuZXJzVG9DaGlsZHJlbkNvbHVtbnMoKSx0aGlzLm9uV2lkdGhDaGFuZ2VkKCl9b25XaWR0aENoYW5nZWQoKXtjb25zdCBlPXRoaXMuY29sdW1uR3JvdXAuZ2V0QWN0dWFsV2lkdGgoKTt0aGlzLmNvbXAuc2V0V2lkdGgoZSsicHgiKSx0aGlzLmNvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctaGlkZGVuIiwwPT09ZSl9fUhsKFthZV0sV2wucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTtjbGFzcyBqbCBleHRlbmRzIE9se2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcihlLHQsaSksdGhpcy5vblN1cHByZXNzQ29sTW92ZUNoYW5nZT0oKT0+e2lmKCF0aGlzLmlzQWxpdmUoKXx8dGhpcy5pc1N1cHByZXNzTW92aW5nKCkpdGhpcy5yZW1vdmVEcmFnU291cmNlKCk7ZWxzZSBpZighdGhpcy5kcmFnU291cmNlKXtjb25zdCBlPXRoaXMuZ2V0R3VpKCk7dGhpcy5zZXREcmFnU291cmNlKGUpfX0sdGhpcy5jb2x1bW49ZX1zZXRDb21wKGUsdCxpKXt0aGlzLmNvbXA9ZSx0aGlzLnNldEd1aSh0KSx0aGlzLmRpc3BsYXlOYW1lPXRoaXMuYmVhbnMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW5Hcm91cCh0aGlzLmNvbHVtbiwiaGVhZGVyIiksdGhpcy5hZGRDbGFzc2VzKCksdGhpcy5zZXR1cE1vdmluZ0NzcygpLHRoaXMuc2V0dXBFeHBhbmRhYmxlKCksdGhpcy5zZXR1cFRvb2x0aXAoKSx0aGlzLnNldHVwVXNlckNvbXAoKSx0aGlzLmFkZEhlYWRlck1vdXNlTGlzdGVuZXJzKCk7Y29uc3Qgcz10aGlzLmdldFBhcmVudFJvd0N0cmwoKS5nZXRQaW5uZWQoKSxyPXRoaXMuY29sdW1uLmdldFByb3ZpZGVkQ29sdW1uR3JvdXAoKS5nZXRMZWFmQ29sdW1ucygpO3RoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IExsKHIsdCkpLHRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IFBsKHRoaXMuY29sdW1uLHQsdGhpcy5iZWFucykpLHRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IFdsKGUsdGhpcy5jb2x1bW4pKSx0aGlzLnJlc2l6ZUZlYXR1cmU9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgQmwoZSxpLHMsdGhpcy5jb2x1bW4pKSx0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBTcih0LHtzaG91bGRTdG9wRXZlbnRQcm9wYWdhdGlvbjp0aGlzLnNob3VsZFN0b3BFdmVudFByb3BhZ2F0aW9uLmJpbmQodGhpcyksb25UYWJLZXlEb3duOigpPT57fSxoYW5kbGVLZXlEb3duOnRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpLG9uRm9jdXNJbjp0aGlzLm9uRm9jdXNJbi5iaW5kKHRoaXMpfSkpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIobHQuRVZFTlRfU1VQUFJFU1NfQ09MVU1OX01PVkVfQ0hBTkdFRCx0aGlzLm9uU3VwcHJlc3NDb2xNb3ZlQ2hhbmdlKSx0aGlzLmFkZFJlc2l6ZUFuZE1vdmVLZXlib2FyZExpc3RlbmVycygpfXJlc2l6ZUhlYWRlcihlLHQpe2lmKCF0aGlzLnJlc2l6ZUZlYXR1cmUpcmV0dXJuO2NvbnN0IGk9dGhpcy5yZXNpemVGZWF0dXJlLmdldEluaXRpYWxWYWx1ZXModCk7dGhpcy5yZXNpemVGZWF0dXJlLnJlc2l6ZUNvbHVtbnMoaSxpLnJlc2l6ZVN0YXJ0V2lkdGgrZSwidWlDb2x1bW5SZXNpemVkIiwhMCl9bW92ZUhlYWRlcihlKXtjb25zdHtiZWFuczp0LGVHdWk6aSxjb2x1bW46cyxncmlkT3B0aW9uc1NlcnZpY2U6cixjdHJsc1NlcnZpY2U6b309dGhpcyxuPXIuZ2V0KCJlbmFibGVSdGwiKSxhPWU9PT1Qby5MZWZ0LGw9dGhpcy5nZXRQaW5uZWQoKSxkPWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYz1kLmxlZnQsaD1kLndpZHRoLHU9Z2wubm9ybWFsaXNlWChhIT09bj9jLTIwOmMraCsyMCxsLCEwLHIsbykscD1zLmdldEdyb3VwSWQoKSxnPXRoaXMuZm9jdXNTZXJ2aWNlLmdldEZvY3VzZWRIZWFkZXIoKTtnbC5hdHRlbXB0TW92ZUNvbHVtbnMoe2FsbE1vdmluZ0NvbHVtbnM6dGhpcy5jb2x1bW4uZ2V0TGVhZkNvbHVtbnMoKSxpc0Zyb21IZWFkZXI6ITAsaERpcmVjdGlvbjplLHhQb3NpdGlvbjp1LHBpbm5lZDpsLGZyb21FbnRlcjohMSxmYWtlRXZlbnQ6ITEsZ3JpZE9wdGlvbnNTZXJ2aWNlOnIsY29sdW1uTW9kZWw6dC5jb2x1bW5Nb2RlbH0pO2NvbnN0IG09cy5nZXREaXNwbGF5ZWRMZWFmQ29sdW1ucygpLGY9YT9tWzBdOk9lKG0pO3RoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLmdldFNjcm9sbEZlYXR1cmUoKS5lbnN1cmVDb2x1bW5WaXNpYmxlKGYsImF1dG8iKSwhdGhpcy5pc0FsaXZlKCkmJmcmJnRoaXMucmVzdG9yZUZvY3VzKHAscyxnKX1yZXN0b3JlRm9jdXMoZSx0LGkpe2NvbnN0IHM9dC5nZXRMZWFmQ29sdW1ucygpO2lmKCFzLmxlbmd0aClyZXR1cm47Y29uc3Qgcj1zWzBdLmdldFBhcmVudCgpO2lmKCFyKXJldHVybjtjb25zdCBvPXRoaXMuZmluZEdyb3VwV2lkdGhJZChyLGUpO28mJnRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzSGVhZGVyUG9zaXRpb24oe2hlYWRlclBvc2l0aW9uOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxpKSx7Y29sdW1uOm99KX0pfWZpbmRHcm91cFdpZHRoSWQoZSx0KXtmb3IoO2U7KXtpZihlLmdldEdyb3VwSWQoKT09PXQpcmV0dXJuIGU7ZT1lLmdldFBhcmVudCgpfXJldHVybiBudWxsfXJlc2l6ZUxlYWZDb2x1bW5zVG9GaXQoZSl7dGhpcy5yZXNpemVGZWF0dXJlJiZ0aGlzLnJlc2l6ZUZlYXR1cmUucmVzaXplTGVhZkNvbHVtbnNUb0ZpdChlKX1zZXR1cFVzZXJDb21wKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHtkaXNwbGF5TmFtZTp0aGlzLmRpc3BsYXlOYW1lLGNvbHVtbkdyb3VwOnRoaXMuY29sdW1uLHNldEV4cGFuZGVkOmU9Pnt0aGlzLmJlYW5zLmNvbHVtbk1vZGVsLnNldENvbHVtbkdyb3VwT3BlbmVkKHRoaXMuY29sdW1uLmdldFByb3ZpZGVkQ29sdW1uR3JvdXAoKSxlLCJncmlkSW5pdGlhbGl6aW5nIil9fSksdD10aGlzLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldEhlYWRlckdyb3VwQ29tcERldGFpbHMoZSk7dGhpcy5jb21wLnNldFVzZXJDb21wRGV0YWlscyh0KX1hZGRIZWFkZXJNb3VzZUxpc3RlbmVycygpe2NvbnN0IGU9ZT0+dGhpcy5oYW5kbGVNb3VzZU92ZXJDaGFuZ2UoIm1vdXNlZW50ZXIiPT09ZS50eXBlKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmdldEd1aSgpLCJtb3VzZWVudGVyIixlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmdldEd1aSgpLCJtb3VzZWxlYXZlIixlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmdldEd1aSgpLCJjbGljayIsKCk9PnRoaXMuZGlzcGF0Y2hDb2x1bW5Nb3VzZUV2ZW50KGx0LkVWRU5UX0NPTFVNTl9IRUFERVJfQ0xJQ0tFRCx0aGlzLmNvbHVtbi5nZXRQcm92aWRlZENvbHVtbkdyb3VwKCkpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmdldEd1aSgpLCJjb250ZXh0bWVudSIsZT0+dGhpcy5oYW5kbGVDb250ZXh0TWVudU1vdXNlRXZlbnQoZSx2b2lkIDAsdGhpcy5jb2x1bW4uZ2V0UHJvdmlkZWRDb2x1bW5Hcm91cCgpKSl9aGFuZGxlTW91c2VPdmVyQ2hhbmdlKGUpe2NvbnN0IHQ9e3R5cGU6ZT9sdC5FVkVOVF9DT0xVTU5fSEVBREVSX01PVVNFX09WRVI6bHQuRVZFTlRfQ09MVU1OX0hFQURFUl9NT1VTRV9MRUFWRSxjb2x1bW46dGhpcy5jb2x1bW4uZ2V0UHJvdmlkZWRDb2x1bW5Hcm91cCgpfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfXNldHVwVG9vbHRpcCgpe2NvbnN0IGU9dGhpcy5jb2x1bW4uZ2V0Q29sR3JvdXBEZWYoKSx0PXtnZXRDb2x1bW46KCk9PnRoaXMuY29sdW1uLGdldEd1aTooKT0+dGhpcy5lR3VpLGdldExvY2F0aW9uOigpPT4iaGVhZGVyR3JvdXAiLGdldFRvb2x0aXBWYWx1ZTooKT0+ZSYmZS5oZWFkZXJUb29sdGlwfTtlJiYodC5nZXRDb2xEZWY9KCk9PmUpO3RoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IGZhKHQsdGhpcy5iZWFucykpLnNldENvbXAodGhpcy5lR3VpKX1zZXR1cEV4cGFuZGFibGUoKXtjb25zdCBlPXRoaXMuY29sdW1uLmdldFByb3ZpZGVkQ29sdW1uR3JvdXAoKTt0aGlzLnJlZnJlc2hFeHBhbmRlZCgpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUseGUuRVZFTlRfRVhQQU5EQUJMRV9DSEFOR0VELHRoaXMucmVmcmVzaEV4cGFuZGVkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUseGUuRVZFTlRfRVhQQU5ERURfQ0hBTkdFRCx0aGlzLnJlZnJlc2hFeHBhbmRlZC5iaW5kKHRoaXMpKX1yZWZyZXNoRXhwYW5kZWQoKXtjb25zdCBlPXRoaXMuY29sdW1uO3RoaXMuZXhwYW5kYWJsZT1lLmlzRXhwYW5kYWJsZSgpO2NvbnN0IHQ9ZS5pc0V4cGFuZGVkKCk7dGhpcy5leHBhbmRhYmxlP3RoaXMuY29tcC5zZXRBcmlhRXhwYW5kZWQodD8idHJ1ZSI6ImZhbHNlIik6dGhpcy5jb21wLnNldEFyaWFFeHBhbmRlZCh2b2lkIDApfWdldENvbElkKCl7cmV0dXJuIHRoaXMuY29sdW1uLmdldFVuaXF1ZUlkKCl9YWRkQ2xhc3Nlcygpe2NvbnN0IGU9dGhpcy5jb2x1bW4uZ2V0Q29sR3JvdXBEZWYoKSx0PUVhLmdldEhlYWRlckNsYXNzZXNGcm9tQ29sRGVmKGUsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCx0aGlzLmNvbHVtbik7aWYodGhpcy5jb2x1bW4uaXNQYWRkaW5nKCkpe3QucHVzaCgiYWctaGVhZGVyLWdyb3VwLWNlbGwtbm8tZ3JvdXAiKTt0aGlzLmNvbHVtbi5nZXRMZWFmQ29sdW1ucygpLmV2ZXJ5KGU9PmUuaXNTcGFuSGVhZGVySGVpZ2h0KCkpJiZ0LnB1c2goImFnLWhlYWRlci1zcGFuLWhlaWdodCIpfWVsc2UgdC5wdXNoKCJhZy1oZWFkZXItZ3JvdXAtY2VsbC13aXRoLWdyb3VwIik7dC5mb3JFYWNoKGU9PnRoaXMuY29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKGUsITApKX1zZXR1cE1vdmluZ0Nzcygpe2NvbnN0IGU9dGhpcy5jb2x1bW4uZ2V0UHJvdmlkZWRDb2x1bW5Hcm91cCgpLmdldExlYWZDb2x1bW5zKCksdD0oKT0+dGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWhlYWRlci1jZWxsLW1vdmluZyIsdGhpcy5jb2x1bW4uaXNNb3ZpbmcoKSk7ZS5mb3JFYWNoKGU9Pnt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLEVlLkVWRU5UX01PVklOR19DSEFOR0VELHQpfSksdCgpfW9uRm9jdXNJbihlKXtpZighdGhpcy5lR3VpLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpe2NvbnN0IGU9dGhpcy5nZXRSb3dJbmRleCgpO3RoaXMuYmVhbnMuZm9jdXNTZXJ2aWNlLnNldEZvY3VzZWRIZWFkZXIoZSx0aGlzLmNvbHVtbil9fWhhbmRsZUtleURvd24oZSl7c3VwZXIuaGFuZGxlS2V5RG93bihlKTtjb25zdCB0PXRoaXMuZ2V0V3JhcHBlckhhc0ZvY3VzKCk7aWYodGhpcy5leHBhbmRhYmxlJiZ0JiZlLmtleT09PWpzLkVOVEVSKXtjb25zdCBlPXRoaXMuY29sdW1uLHQ9IWUuaXNFeHBhbmRlZCgpO3RoaXMuYmVhbnMuY29sdW1uTW9kZWwuc2V0Q29sdW1uR3JvdXBPcGVuZWQoZS5nZXRQcm92aWRlZENvbHVtbkdyb3VwKCksdCwidWlDb2x1bW5FeHBhbmRlZCIpfX1zZXREcmFnU291cmNlKGUpe2lmKCF0aGlzLmlzQWxpdmUoKXx8dGhpcy5pc1N1cHByZXNzTW92aW5nKCkpcmV0dXJuO2lmKHRoaXMucmVtb3ZlRHJhZ1NvdXJjZSgpLCFlKXJldHVybjtjb25zdHtiZWFuczp0LGNvbHVtbjppLGRpc3BsYXlOYW1lOnMsZ3JpZE9wdGlvbnNTZXJ2aWNlOnIsZHJhZ0FuZERyb3BTZXJ2aWNlOm99PXRoaXMse2NvbHVtbk1vZGVsOm59PXQsYT1pLmdldFByb3ZpZGVkQ29sdW1uR3JvdXAoKS5nZXRMZWFmQ29sdW1ucygpO2xldCBsPSFyLmdldCgic3VwcHJlc3NEcmFnTGVhdmVIaWRlc0NvbHVtbnMiKTtjb25zdCBkPXRoaXMuZHJhZ1NvdXJjZT17dHlwZTpJby5IZWFkZXJDZWxsLGVFbGVtZW50OmUsZ2V0RGVmYXVsdEljb25OYW1lOigpPT5sP0dvLklDT05fSElERTpHby5JQ09OX05PVF9BTExPV0VELGRyYWdJdGVtTmFtZTpzLGdldERyYWdJdGVtOigpPT50aGlzLmdldERyYWdJdGVtRm9yR3JvdXAoaSksb25EcmFnU3RhcnRlZDooKT0+e2w9IXIuZ2V0KCJzdXBwcmVzc0RyYWdMZWF2ZUhpZGVzQ29sdW1ucyIpLGEuZm9yRWFjaChlPT5lLnNldE1vdmluZyghMCwidWlDb2x1bW5EcmFnZ2VkIikpfSxvbkRyYWdTdG9wcGVkOigpPT5hLmZvckVhY2goZT0+ZS5zZXRNb3ZpbmcoITEsInVpQ29sdW1uRHJhZ2dlZCIpKSxvbkdyaWRFbnRlcjplPT57dmFyIHQ7aWYobCl7Y29uc3QgaT0obnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuY29sdW1ucyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmlsdGVyKGU9PiFlLmdldENvbERlZigpLmxvY2tWaXNpYmxlKSl8fFtdO24uc2V0Q29sdW1uc1Zpc2libGUoaSwhMCwidWlDb2x1bW5Nb3ZlZCIpfX0sb25HcmlkRXhpdDplPT57dmFyIHQ7aWYobCl7Y29uc3QgaT0obnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuY29sdW1ucyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmlsdGVyKGU9PiFlLmdldENvbERlZigpLmxvY2tWaXNpYmxlKSl8fFtdO24uc2V0Q29sdW1uc1Zpc2libGUoaSwhMSwidWlDb2x1bW5Nb3ZlZCIpfX19O28uYWRkRHJhZ1NvdXJjZShkLCEwKX1nZXREcmFnSXRlbUZvckdyb3VwKGUpe2NvbnN0IHQ9ZS5nZXRQcm92aWRlZENvbHVtbkdyb3VwKCkuZ2V0TGVhZkNvbHVtbnMoKSxpPXt9O3QuZm9yRWFjaChlPT5pW2UuZ2V0SWQoKV09ZS5pc1Zpc2libGUoKSk7Y29uc3Qgcz1bXTtyZXR1cm4gdGhpcy5iZWFucy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCkuZm9yRWFjaChlPT57dC5pbmRleE9mKGUpPj0wJiYocy5wdXNoKGUpLEllKHQsZSkpfSksdC5mb3JFYWNoKGU9PnMucHVzaChlKSkse2NvbHVtbnM6cyx2aXNpYmxlU3RhdGU6aX19aXNTdXBwcmVzc01vdmluZygpe2xldCBlPSExO3RoaXMuY29sdW1uLmdldExlYWZDb2x1bW5zKCkuZm9yRWFjaCh0PT57KHQuZ2V0Q29sRGVmKCkuc3VwcHJlc3NNb3ZhYmxlfHx0LmdldENvbERlZigpLmxvY2tQb3NpdGlvbikmJihlPSEwKX0pO3JldHVybiBlfHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzTW92YWJsZUNvbHVtbnMiKX19dmFyIFVsPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCB6bD0wO2NsYXNzIEtsIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKCksdGhpcy5pbnN0YW5jZUlkPXpsKyssdGhpcy5yb3dJbmRleD1lLHRoaXMucGlubmVkPXQsdGhpcy50eXBlPWk7Y29uc3Qgcz1pPT1FbC5DT0xVTU5fR1JPVVA/ImFnLWhlYWRlci1yb3ctY29sdW1uLWdyb3VwIjppPT1FbC5GTE9BVElOR19GSUxURVI/ImFnLWhlYWRlci1yb3ctY29sdW1uLWZpbHRlciI6ImFnLWhlYWRlci1yb3ctY29sdW1uIjt0aGlzLmhlYWRlclJvd0NsYXNzPSJhZy1oZWFkZXItcm93ICIrc31wb3N0Q29uc3RydWN0KCl7dGhpcy5pc1ByaW50TGF5b3V0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzRG9tTGF5b3V0KCJwcmludCIpLHRoaXMuaXNFbnN1cmVEb21PcmRlcj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuc3VyZURvbU9yZGVyIil9Z2V0SW5zdGFuY2VJZCgpe3JldHVybiB0aGlzLmluc3RhbmNlSWR9c2V0Q29tcChlLHQ9ITApe3RoaXMuY29tcD1lLHQmJih0aGlzLm9uUm93SGVpZ2h0Q2hhbmdlZCgpLHRoaXMub25WaXJ0dWFsQ29sdW1uc0NoYW5nZWQoKSksdGhpcy5zZXRXaWR0aCgpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKX1nZXRIZWFkZXJSb3dDbGFzcygpe3JldHVybiB0aGlzLmhlYWRlclJvd0NsYXNzfWdldEFyaWFSb3dJbmRleCgpe3JldHVybiB0aGlzLnJvd0luZGV4KzF9YWRkRXZlbnRMaXN0ZW5lcnMoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fUkVTSVpFRCx0aGlzLm9uQ29sdW1uUmVzaXplZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ESVNQTEFZRURfQ09MVU1OU19DSEFOR0VELHRoaXMub25EaXNwbGF5ZWRDb2x1bW5zQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9WSVJUVUFMX0NPTFVNTlNfQ0hBTkdFRCxlPT50aGlzLm9uVmlydHVhbENvbHVtbnNDaGFuZ2VkKGUuYWZ0ZXJTY3JvbGwpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fSEVBREVSX0hFSUdIVF9DSEFOR0VELHRoaXMub25Sb3dIZWlnaHRDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0dSSURfU1RZTEVTX0NIQU5HRUQsdGhpcy5vblJvd0hlaWdodENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQURWQU5DRURfRklMVEVSX0VOQUJMRURfQ0hBTkdFRCx0aGlzLm9uUm93SGVpZ2h0Q2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJkb21MYXlvdXQiLHRoaXMub25EaXNwbGF5ZWRDb2x1bW5zQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJlbnN1cmVEb21PcmRlciIsZT0+dGhpcy5pc0Vuc3VyZURvbU9yZGVyPWUuY3VycmVudFZhbHVlKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJoZWFkZXJIZWlnaHQiLHRoaXMub25Sb3dIZWlnaHRDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoInBpdm90SGVhZGVySGVpZ2h0Iix0aGlzLm9uUm93SGVpZ2h0Q2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJncm91cEhlYWRlckhlaWdodCIsdGhpcy5vblJvd0hlaWdodENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigicGl2b3RHcm91cEhlYWRlckhlaWdodCIsdGhpcy5vblJvd0hlaWdodENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiZmxvYXRpbmdGaWx0ZXJzSGVpZ2h0Iix0aGlzLm9uUm93SGVpZ2h0Q2hhbmdlZC5iaW5kKHRoaXMpKX1nZXRIZWFkZXJDZWxsQ3RybChlKXtpZih0aGlzLmhlYWRlckNlbGxDdHJscylyZXR1cm4gTSh0aGlzLmhlYWRlckNlbGxDdHJscykuZmluZCh0PT50LmdldENvbHVtbkdyb3VwQ2hpbGQoKT09PWUpfW9uRGlzcGxheWVkQ29sdW1uc0NoYW5nZWQoKXt0aGlzLmlzUHJpbnRMYXlvdXQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNEb21MYXlvdXQoInByaW50IiksdGhpcy5vblZpcnR1YWxDb2x1bW5zQ2hhbmdlZCgpLHRoaXMuc2V0V2lkdGgoKSx0aGlzLm9uUm93SGVpZ2h0Q2hhbmdlZCgpfWdldFR5cGUoKXtyZXR1cm4gdGhpcy50eXBlfW9uQ29sdW1uUmVzaXplZCgpe3RoaXMuc2V0V2lkdGgoKX1zZXRXaWR0aCgpe2NvbnN0IGU9dGhpcy5nZXRXaWR0aEZvclJvdygpO3RoaXMuY29tcC5zZXRXaWR0aChlKyJweCIpfWdldFdpZHRoRm9yUm93KCl7Y29uc3R7Y29sdW1uTW9kZWw6ZX09dGhpcy5iZWFucztpZih0aGlzLmlzUHJpbnRMYXlvdXQpe3JldHVybiBudWxsIT10aGlzLnBpbm5lZD8wOmUuZ2V0Q29udGFpbmVyV2lkdGgoInJpZ2h0IikrZS5nZXRDb250YWluZXJXaWR0aCgibGVmdCIpK2UuZ2V0Q29udGFpbmVyV2lkdGgobnVsbCl9cmV0dXJuIGUuZ2V0Q29udGFpbmVyV2lkdGgodGhpcy5waW5uZWQpfW9uUm93SGVpZ2h0Q2hhbmdlZCgpe3Zhcnt0b3BPZmZzZXQ6ZSxyb3dIZWlnaHQ6dH09dGhpcy5nZXRUb3BBbmRIZWlnaHQoKTt0aGlzLmNvbXAuc2V0VG9wKGUrInB4IiksdGhpcy5jb21wLnNldEhlaWdodCh0KyJweCIpfWdldFRvcEFuZEhlaWdodCgpe2NvbnN0e2NvbHVtbk1vZGVsOmUsZmlsdGVyTWFuYWdlcjp0fT10aGlzLmJlYW5zO2xldCBpPWUuZ2V0SGVhZGVyUm93Q291bnQoKTtjb25zdCBzPVtdO2xldCByPTA7dC5oYXNGbG9hdGluZ0ZpbHRlcnMoKSYmKGkrKyxyPTEpO2NvbnN0IG89ZS5nZXRDb2x1bW5Hcm91cEhlYWRlclJvd0hlaWdodCgpLG49ZS5nZXRDb2x1bW5IZWFkZXJSb3dIZWlnaHQoKSxhPWktKDErcik7Zm9yKGxldCBlPTA7ZTxhO2UrKylzLnB1c2gobyk7cy5wdXNoKG4pO2ZvcihsZXQgdD0wO3Q8cjt0Kyspcy5wdXNoKGUuZ2V0RmxvYXRpbmdGaWx0ZXJzSGVpZ2h0KCkpO2xldCBsPTA7Zm9yKGxldCBlPTA7ZTx0aGlzLnJvd0luZGV4O2UrKylsKz1zW2VdO3JldHVybnt0b3BPZmZzZXQ6bCxyb3dIZWlnaHQ6c1t0aGlzLnJvd0luZGV4XX19Z2V0UGlubmVkKCl7cmV0dXJuIHRoaXMucGlubmVkfWdldFJvd0luZGV4KCl7cmV0dXJuIHRoaXMucm93SW5kZXh9b25WaXJ0dWFsQ29sdW1uc0NoYW5nZWQoZT0hMSl7Y29uc3QgdD10aGlzLmdldEhlYWRlckN0cmxzKCksaT10aGlzLmlzRW5zdXJlRG9tT3JkZXJ8fHRoaXMuaXNQcmludExheW91dDt0aGlzLmNvbXAuc2V0SGVhZGVyQ3RybHModCxpLGUpfWdldEhlYWRlckN0cmxzKCl7Y29uc3QgZT10aGlzLmhlYWRlckNlbGxDdHJsczt0aGlzLmhlYWRlckNlbGxDdHJscz1uZXcgTWFwO2NvbnN0IHQ9dGhpcy5nZXRDb2x1bW5zSW5WaWV3cG9ydCgpO2Zvcihjb25zdCBpIG9mIHQpdGhpcy5yZWN5Y2xlQW5kQ3JlYXRlSGVhZGVyQ3RybHMoaSxlKTtjb25zdCBpPWU9Pntjb25zdHtmb2N1c1NlcnZpY2U6dCxjb2x1bW5Nb2RlbDppfT10aGlzLmJlYW5zO2lmKCF0LmlzSGVhZGVyV3JhcHBlckZvY3VzZWQoZSkpcmV0dXJuITE7cmV0dXJuIGkuaXNEaXNwbGF5ZWQoZS5nZXRDb2x1bW5Hcm91cENoaWxkKCkpfTtpZihlKWZvcihjb25zdFt0LHNdb2YgZSl7aShzKT90aGlzLmhlYWRlckNlbGxDdHJscy5zZXQodCxzKTp0aGlzLmRlc3Ryb3lCZWFuKHMpfXJldHVybiBBcnJheS5mcm9tKHRoaXMuaGVhZGVyQ2VsbEN0cmxzLnZhbHVlcygpKX1yZWN5Y2xlQW5kQ3JlYXRlSGVhZGVyQ3RybHMoZSx0KXtpZighdGhpcy5oZWFkZXJDZWxsQ3RybHMpcmV0dXJuO2lmKGUuaXNFbXB0eUdyb3VwKCkpcmV0dXJuO2NvbnN0IGk9ZS5nZXRVbmlxdWVJZCgpO2xldCBzO3QmJihzPXQuZ2V0KGkpLHQuZGVsZXRlKGkpKTtpZihzJiZzLmdldENvbHVtbkdyb3VwQ2hpbGQoKSE9ZSYmKHRoaXMuZGVzdHJveUJlYW4ocykscz12b2lkIDApLG51bGw9PXMpc3dpdGNoKHRoaXMudHlwZSl7Y2FzZSBFbC5GTE9BVElOR19GSUxURVI6cz10aGlzLmNyZWF0ZUJlYW4obmV3IEZsKGUsdGhpcy5iZWFucyx0aGlzKSk7YnJlYWs7Y2FzZSBFbC5DT0xVTU5fR1JPVVA6cz10aGlzLmNyZWF0ZUJlYW4obmV3IGpsKGUsdGhpcy5iZWFucyx0aGlzKSk7YnJlYWs7ZGVmYXVsdDpzPXRoaXMuY3JlYXRlQmVhbihuZXcgX2woZSx0aGlzLmJlYW5zLHRoaXMpKX10aGlzLmhlYWRlckNlbGxDdHJscy5zZXQoaSxzKX1nZXRDb2x1bW5zSW5WaWV3cG9ydCgpe3JldHVybiB0aGlzLmlzUHJpbnRMYXlvdXQ/dGhpcy5nZXRDb2x1bW5zSW5WaWV3cG9ydFByaW50TGF5b3V0KCk6dGhpcy5nZXRDb2x1bW5zSW5WaWV3cG9ydE5vcm1hbExheW91dCgpfWdldENvbHVtbnNJblZpZXdwb3J0UHJpbnRMYXlvdXQoKXtpZihudWxsIT10aGlzLnBpbm5lZClyZXR1cm5bXTtsZXQgZT1bXTtjb25zdCB0PXRoaXMuZ2V0QWN0dWFsRGVwdGgoKSx7Y29sdW1uTW9kZWw6aX09dGhpcy5iZWFucztyZXR1cm5bImxlZnQiLG51bGwsInJpZ2h0Il0uZm9yRWFjaChzPT57Y29uc3Qgcj1pLmdldFZpcnR1YWxIZWFkZXJHcm91cFJvdyhzLHQpO2U9ZS5jb25jYXQocil9KSxlfWdldEFjdHVhbERlcHRoKCl7cmV0dXJuIHRoaXMudHlwZT09RWwuRkxPQVRJTkdfRklMVEVSP3RoaXMucm93SW5kZXgtMTp0aGlzLnJvd0luZGV4fWdldENvbHVtbnNJblZpZXdwb3J0Tm9ybWFsTGF5b3V0KCl7cmV0dXJuIHRoaXMuYmVhbnMuY29sdW1uTW9kZWwuZ2V0VmlydHVhbEhlYWRlckdyb3VwUm93KHRoaXMucGlubmVkLHRoaXMuZ2V0QWN0dWFsRGVwdGgoKSl9Zm9jdXNIZWFkZXIoZSx0KXtpZighdGhpcy5oZWFkZXJDZWxsQ3RybHMpcmV0dXJuITE7Y29uc3QgaT1BcnJheS5mcm9tKHRoaXMuaGVhZGVyQ2VsbEN0cmxzLnZhbHVlcygpKS5maW5kKHQ9PnQuZ2V0Q29sdW1uR3JvdXBDaGlsZCgpPT1lKTtyZXR1cm4hIWkmJmkuZm9jdXModCl9ZGVzdHJveSgpe3RoaXMuaGVhZGVyQ2VsbEN0cmxzJiZ0aGlzLmhlYWRlckNlbGxDdHJscy5mb3JFYWNoKGU9Pnt0aGlzLmRlc3Ryb3lCZWFuKGUpfSksdGhpcy5oZWFkZXJDZWxsQ3RybHM9dm9pZCAwLHN1cGVyLmRlc3Ryb3koKX19VWwoW2NlKCJiZWFucyIpXSxLbC5wcm90b3R5cGUsImJlYW5zIix2b2lkIDApLFVsKFthZV0sS2wucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgWWw9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgJGwgZXh0ZW5kcyBpdHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuaGlkZGVuPSExLHRoaXMuaW5jbHVkZUZsb2F0aW5nRmlsdGVyPSExLHRoaXMuZ3JvdXBzUm93Q3RybHM9W10sdGhpcy5waW5uZWQ9ZX1zZXRDb21wKGUsdCl7dGhpcy5jb21wPWUsdGhpcy5lVmlld3BvcnQ9dCx0aGlzLnNldHVwQ2VudGVyV2lkdGgoKSx0aGlzLnNldHVwUGlubmVkV2lkdGgoKSx0aGlzLnNldHVwRHJhZ0FuZERyb3AodGhpcy5lVmlld3BvcnQpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0dSSURfQ09MVU1OU19DSEFOR0VELHRoaXMub25HcmlkQ29sdW1uc0NoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRElTUExBWUVEX0NPTFVNTlNfQ0hBTkdFRCx0aGlzLm9uRGlzcGxheWVkQ29sdW1uc0NoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQURWQU5DRURfRklMVEVSX0VOQUJMRURfQ0hBTkdFRCx0aGlzLm9uRGlzcGxheWVkQ29sdW1uc0NoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5jdHJsc1NlcnZpY2UucmVnaXN0ZXJIZWFkZXJDb250YWluZXIodGhpcyx0aGlzLnBpbm5lZCksdGhpcy5jb2x1bW5Nb2RlbC5pc1JlYWR5KCkmJnRoaXMucmVmcmVzaCgpfXNldHVwRHJhZ0FuZERyb3AoZSl7Y29uc3QgdD1uZXcgQ2wodGhpcy5waW5uZWQsZSk7dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbih0KX1yZWZyZXNoKGU9ITEpe2NvbnN0IHQ9bmV3IEpzLGk9dGhpcy5mb2N1c1NlcnZpY2UuZ2V0Rm9jdXNIZWFkZXJUb1VzZUFmdGVyUmVmcmVzaCgpOygoKT0+e2NvbnN0IGU9dGhpcy5jb2x1bW5Nb2RlbC5nZXRIZWFkZXJSb3dDb3VudCgpLTE7dGhpcy5ncm91cHNSb3dDdHJscz10aGlzLmRlc3Ryb3lCZWFucyh0aGlzLmdyb3Vwc1Jvd0N0cmxzKTtmb3IobGV0IGk9MDtpPGU7aSsrKXtjb25zdCBlPXRoaXMuY3JlYXRlQmVhbihuZXcgS2wodC5uZXh0KCksdGhpcy5waW5uZWQsRWwuQ09MVU1OX0dST1VQKSk7dGhpcy5ncm91cHNSb3dDdHJscy5wdXNoKGUpfX0pKCksKCgpPT57Y29uc3QgaT10Lm5leHQoKSxzPSEodGhpcy5oaWRkZW58fG51bGwhPXRoaXMuY29sdW1uc1Jvd0N0cmwmJmUmJnRoaXMuY29sdW1uc1Jvd0N0cmwuZ2V0Um93SW5kZXgoKT09PWkpOyhzfHx0aGlzLmhpZGRlbikmJih0aGlzLmNvbHVtbnNSb3dDdHJsPXRoaXMuZGVzdHJveUJlYW4odGhpcy5jb2x1bW5zUm93Q3RybCkpLHMmJih0aGlzLmNvbHVtbnNSb3dDdHJsPXRoaXMuY3JlYXRlQmVhbihuZXcgS2woaSx0aGlzLnBpbm5lZCxFbC5DT0xVTU4pKSl9KSgpLCgoKT0+e3RoaXMuaW5jbHVkZUZsb2F0aW5nRmlsdGVyPXRoaXMuZmlsdGVyTWFuYWdlci5oYXNGbG9hdGluZ0ZpbHRlcnMoKSYmIXRoaXMuaGlkZGVuO2NvbnN0IGk9KCk9Pnt0aGlzLmZpbHRlcnNSb3dDdHJsPXRoaXMuZGVzdHJveUJlYW4odGhpcy5maWx0ZXJzUm93Q3RybCl9O2lmKCF0aGlzLmluY2x1ZGVGbG9hdGluZ0ZpbHRlcilyZXR1cm4gdm9pZCBpKCk7Y29uc3Qgcz10Lm5leHQoKTtpZih0aGlzLmZpbHRlcnNSb3dDdHJsKXtjb25zdCB0PXRoaXMuZmlsdGVyc1Jvd0N0cmwuZ2V0Um93SW5kZXgoKSE9PXM7ZSYmIXR8fGkoKX10aGlzLmZpbHRlcnNSb3dDdHJsfHwodGhpcy5maWx0ZXJzUm93Q3RybD10aGlzLmNyZWF0ZUJlYW4obmV3IEtsKHMsdGhpcy5waW5uZWQsRWwuRkxPQVRJTkdfRklMVEVSKSkpfSkoKTtjb25zdCBzPXRoaXMuZ2V0QWxsQ3RybHMoKTt0aGlzLmNvbXAuc2V0Q3RybHMocyksdGhpcy5yZXN0b3JlRm9jdXNPbkhlYWRlcihpKX1yZXN0b3JlRm9jdXNPbkhlYWRlcihlKXtudWxsIT1lJiZlLmNvbHVtbi5nZXRQaW5uZWQoKT09dGhpcy5waW5uZWQmJnRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzSGVhZGVyUG9zaXRpb24oe2hlYWRlclBvc2l0aW9uOmV9KX1nZXRBbGxDdHJscygpe2NvbnN0IGU9Wy4uLnRoaXMuZ3JvdXBzUm93Q3RybHNdO3JldHVybiB0aGlzLmNvbHVtbnNSb3dDdHJsJiZlLnB1c2godGhpcy5jb2x1bW5zUm93Q3RybCksdGhpcy5maWx0ZXJzUm93Q3RybCYmZS5wdXNoKHRoaXMuZmlsdGVyc1Jvd0N0cmwpLGV9b25HcmlkQ29sdW1uc0NoYW5nZWQoKXt0aGlzLnJlZnJlc2goITApfW9uRGlzcGxheWVkQ29sdW1uc0NoYW5nZWQoKXtjb25zdCBlPXRoaXMuZmlsdGVyTWFuYWdlci5oYXNGbG9hdGluZ0ZpbHRlcnMoKSYmIXRoaXMuaGlkZGVuO3RoaXMuaW5jbHVkZUZsb2F0aW5nRmlsdGVyIT09ZSYmdGhpcy5yZWZyZXNoKCEwKX1zZXR1cENlbnRlcldpZHRoKCl7bnVsbD09dGhpcy5waW5uZWQmJnRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IFdhKGU9PnRoaXMuY29tcC5zZXRDZW50ZXJXaWR0aChlKyJweCIpLCEwKSl9c2V0SG9yaXpvbnRhbFNjcm9sbChlKXt0aGlzLmNvbXAuc2V0Vmlld3BvcnRTY3JvbGxMZWZ0KGUpfXNldHVwUGlubmVkV2lkdGgoKXtpZihudWxsPT10aGlzLnBpbm5lZClyZXR1cm47Y29uc3QgZT0ibGVmdCI9PT10aGlzLnBpbm5lZCx0PSJyaWdodCI9PT10aGlzLnBpbm5lZDt0aGlzLmhpZGRlbj0hMDtjb25zdCBpPSgpPT57Y29uc3QgaT1lP3RoaXMucGlubmVkV2lkdGhTZXJ2aWNlLmdldFBpbm5lZExlZnRXaWR0aCgpOnRoaXMucGlubmVkV2lkdGhTZXJ2aWNlLmdldFBpbm5lZFJpZ2h0V2lkdGgoKTtpZihudWxsPT1pKXJldHVybjtjb25zdCBzPTA9PWkscj10aGlzLmhpZGRlbiE9PXMsbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpLG49dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0U2Nyb2xsYmFyV2lkdGgoKSxhPXRoaXMuc2Nyb2xsVmlzaWJsZVNlcnZpY2UuaXNWZXJ0aWNhbFNjcm9sbFNob3dpbmcoKSYmKG8mJmV8fCFvJiZ0KT9pK246aTt0aGlzLmNvbXAuc2V0UGlubmVkQ29udGFpbmVyV2lkdGgoYSsicHgiKSx0aGlzLmNvbXAuc2V0RGlzcGxheWVkKCFzKSxyJiYodGhpcy5oaWRkZW49cyx0aGlzLnJlZnJlc2goKSl9O3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0xFRlRfUElOTkVEX1dJRFRIX0NIQU5HRUQsaSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfUklHSFRfUElOTkVEX1dJRFRIX0NIQU5HRUQsaSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfU0NST0xMX1ZJU0lCSUxJVFlfQ0hBTkdFRCxpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9TQ1JPTExCQVJfV0lEVEhfQ0hBTkdFRCxpKX1nZXRIZWFkZXJDdHJsRm9yQ29sdW1uKGUpe2lmKGUgaW5zdGFuY2VvZiBFZSl7aWYoIXRoaXMuY29sdW1uc1Jvd0N0cmwpcmV0dXJuO3JldHVybiB0aGlzLmNvbHVtbnNSb3dDdHJsLmdldEhlYWRlckNlbGxDdHJsKGUpfWlmKDAhPT10aGlzLmdyb3Vwc1Jvd0N0cmxzLmxlbmd0aClmb3IobGV0IHQ9MDt0PHRoaXMuZ3JvdXBzUm93Q3RybHMubGVuZ3RoO3QrKyl7Y29uc3QgaT10aGlzLmdyb3Vwc1Jvd0N0cmxzW3RdLmdldEhlYWRlckNlbGxDdHJsKGUpO2lmKGkpcmV0dXJuIGl9fWdldEh0bWxFbGVtZW50Rm9yQ29sdW1uSGVhZGVyKGUpe2NvbnN0IHQ9dGhpcy5nZXRIZWFkZXJDdHJsRm9yQ29sdW1uKGUpO3JldHVybiB0P3QuZ2V0R3VpKCk6bnVsbH1nZXRSb3dUeXBlKGUpe2NvbnN0IHQ9dGhpcy5nZXRBbGxDdHJscygpW2VdO3JldHVybiB0P3QuZ2V0VHlwZSgpOnZvaWQgMH1mb2N1c0hlYWRlcihlLHQsaSl7Y29uc3Qgcz10aGlzLmdldEFsbEN0cmxzKClbZV07cmV0dXJuISFzJiZzLmZvY3VzSGVhZGVyKHQsaSl9Z2V0Vmlld3BvcnQoKXtyZXR1cm4gdGhpcy5lVmlld3BvcnR9Z2V0Um93Q291bnQoKXtyZXR1cm4gdGhpcy5ncm91cHNSb3dDdHJscy5sZW5ndGgrKHRoaXMuY29sdW1uc1Jvd0N0cmw/MTowKSsodGhpcy5maWx0ZXJzUm93Q3RybD8xOjApfWRlc3Ryb3koKXt0aGlzLmZpbHRlcnNSb3dDdHJsJiYodGhpcy5maWx0ZXJzUm93Q3RybD10aGlzLmRlc3Ryb3lCZWFuKHRoaXMuZmlsdGVyc1Jvd0N0cmwpKSx0aGlzLmNvbHVtbnNSb3dDdHJsJiYodGhpcy5jb2x1bW5zUm93Q3RybD10aGlzLmRlc3Ryb3lCZWFuKHRoaXMuY29sdW1uc1Jvd0N0cmwpKSx0aGlzLmdyb3Vwc1Jvd0N0cmxzJiZ0aGlzLmdyb3Vwc1Jvd0N0cmxzLmxlbmd0aCYmKHRoaXMuZ3JvdXBzUm93Q3RybHM9dGhpcy5kZXN0cm95QmVhbnModGhpcy5ncm91cHNSb3dDdHJscykpLHN1cGVyLmRlc3Ryb3koKX19WWwoW2NlKCJjdHJsc1NlcnZpY2UiKV0sJGwucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksWWwoW2NlKCJzY3JvbGxWaXNpYmxlU2VydmljZSIpXSwkbC5wcm90b3R5cGUsInNjcm9sbFZpc2libGVTZXJ2aWNlIix2b2lkIDApLFlsKFtjZSgicGlubmVkV2lkdGhTZXJ2aWNlIildLCRsLnByb3RvdHlwZSwicGlubmVkV2lkdGhTZXJ2aWNlIix2b2lkIDApLFlsKFtjZSgiY29sdW1uTW9kZWwiKV0sJGwucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxZbChbY2UoImZvY3VzU2VydmljZSIpXSwkbC5wcm90b3R5cGUsImZvY3VzU2VydmljZSIsdm9pZCAwKSxZbChbY2UoImZpbHRlck1hbmFnZXIiKV0sJGwucHJvdG90eXBlLCJmaWx0ZXJNYW5hZ2VyIix2b2lkIDApO3ZhciBYbD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBxbCBleHRlbmRzIGNye2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5oZWFkZXJSb3dDb21wcz17fSx0aGlzLnJvd0NvbXBzTGlzdD1bXSx0aGlzLnBpbm5lZD1lfWluaXQoKXt0aGlzLnNlbGVjdEFuZFNldFRlbXBsYXRlKCk7Y29uc3QgZT17c2V0RGlzcGxheWVkOmU9PnRoaXMuc2V0RGlzcGxheWVkKGUpLHNldEN0cmxzOmU9PnRoaXMuc2V0Q3RybHMoZSksc2V0Q2VudGVyV2lkdGg6ZT0+dGhpcy5lQ2VudGVyQ29udGFpbmVyLnN0eWxlLndpZHRoPWUsc2V0Vmlld3BvcnRTY3JvbGxMZWZ0OmU9PnRoaXMuZ2V0R3VpKCkuc2Nyb2xsTGVmdD1lLHNldFBpbm5lZENvbnRhaW5lcldpZHRoOmU9Pntjb25zdCB0PXRoaXMuZ2V0R3VpKCk7dC5zdHlsZS53aWR0aD1lLHQuc3R5bGUubWF4V2lkdGg9ZSx0LnN0eWxlLm1pbldpZHRoPWV9fTt0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyAkbCh0aGlzLnBpbm5lZCkpLnNldENvbXAoZSx0aGlzLmdldEd1aSgpKX1zZWxlY3RBbmRTZXRUZW1wbGF0ZSgpe2NvbnN0IGU9ImxlZnQiPT10aGlzLnBpbm5lZCx0PSJyaWdodCI9PXRoaXMucGlubmVkLGk9ZT9xbC5QSU5ORURfTEVGVF9URU1QTEFURTp0P3FsLlBJTk5FRF9SSUdIVF9URU1QTEFURTpxbC5DRU5URVJfVEVNUExBVEU7dGhpcy5zZXRUZW1wbGF0ZShpKSx0aGlzLmVSb3dDb250YWluZXI9dGhpcy5lQ2VudGVyQ29udGFpbmVyP3RoaXMuZUNlbnRlckNvbnRhaW5lcjp0aGlzLmdldEd1aSgpfWRlc3Ryb3lSb3dDb21wcygpe3RoaXMuc2V0Q3RybHMoW10pfWRlc3Ryb3lSb3dDb21wKGUpe3RoaXMuZGVzdHJveUJlYW4oZSksdGhpcy5lUm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKGUuZ2V0R3VpKCkpfXNldEN0cmxzKGUpe2NvbnN0IHQ9dGhpcy5oZWFkZXJSb3dDb21wcztsZXQgaTt0aGlzLmhlYWRlclJvd0NvbXBzPXt9LHRoaXMucm93Q29tcHNMaXN0PVtdO2NvbnN0IHM9ZT0+e2NvbnN0IHQ9ZS5nZXRHdWkoKTt0LnBhcmVudEVsZW1lbnQhPXRoaXMuZVJvd0NvbnRhaW5lciYmdGhpcy5lUm93Q29udGFpbmVyLmFwcGVuZENoaWxkKHQpLGkmJlNzKHRoaXMuZVJvd0NvbnRhaW5lcix0LGkpLGk9dH07ZS5mb3JFYWNoKGU9Pntjb25zdCBpPWUuZ2V0SW5zdGFuY2VJZCgpLHI9dFtpXTtkZWxldGUgdFtpXTtjb25zdCBvPXJ8fHRoaXMuY3JlYXRlQmVhbihuZXcgeGwoZSkpO3RoaXMuaGVhZGVyUm93Q29tcHNbaV09byx0aGlzLnJvd0NvbXBzTGlzdC5wdXNoKG8pLHMobyl9KSxHKHQpLmZvckVhY2goZT0+dGhpcy5kZXN0cm95Um93Q29tcChlKSl9fXFsLlBJTk5FRF9MRUZUX1RFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1waW5uZWQtbGVmdC1oZWFkZXIiIHJvbGU9InJvd2dyb3VwIj48L2Rpdj4nLHFsLlBJTk5FRF9SSUdIVF9URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctcGlubmVkLXJpZ2h0LWhlYWRlciIgcm9sZT0icm93Z3JvdXAiPjwvZGl2PicscWwuQ0VOVEVSX1RFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1oZWFkZXItdmlld3BvcnQiIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1oZWFkZXItY29udGFpbmVyIiByZWY9ImVDZW50ZXJDb250YWluZXIiIHJvbGU9InJvd2dyb3VwIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+JyxYbChbdXIoImVDZW50ZXJDb250YWluZXIiKV0scWwucHJvdG90eXBlLCJlQ2VudGVyQ29udGFpbmVyIix2b2lkIDApLFhsKFthZV0scWwucHJvdG90eXBlLCJpbml0IixudWxsKSxYbChbbGVdLHFsLnByb3RvdHlwZSwiZGVzdHJveVJvd0NvbXBzIixudWxsKTt2YXIgWmwsUWw9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07IWZ1bmN0aW9uKGUpe2VbZS5VUD0wXT0iVVAiLGVbZS5ET1dOPTFdPSJET1dOIixlW2UuTEVGVD0yXT0iTEVGVCIsZVtlLlJJR0hUPTNdPSJSSUdIVCJ9KFpsfHwoWmw9e30pKTtsZXQgSmw9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jdXJyZW50SGVhZGVyUm93V2l0aG91dFNwYW49LTF9cG9zdENvbnN0cnVjdCgpe3RoaXMuY3RybHNTZXJ2aWNlLndoZW5SZWFkeShlPT57dGhpcy5ncmlkQm9keUNvbj1lLmdyaWRCb2R5Q3RybH0pO2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLCJtb3VzZWRvd24iLCgpPT50aGlzLnNldEN1cnJlbnRIZWFkZXJSb3dXaXRob3V0U3BhbigtMSkpfWdldEhlYWRlclJvd0NvdW50KCl7Y29uc3QgZT10aGlzLmN0cmxzU2VydmljZS5nZXRIZWFkZXJSb3dDb250YWluZXJDdHJsKCk7cmV0dXJuIGU/ZS5nZXRSb3dDb3VudCgpOjB9bmF2aWdhdGVWZXJ0aWNhbGx5KGUsdCxpKXtpZih0fHwodD10aGlzLmZvY3VzU2VydmljZS5nZXRGb2N1c2VkSGVhZGVyKCkpLCF0KXJldHVybiExO2NvbnN0e2hlYWRlclJvd0luZGV4OnMsY29sdW1uOnJ9PXQsbz10aGlzLmdldEhlYWRlclJvd0NvdW50KCksbj1lPT09WmwuVVA7bGV0e2hlYWRlclJvd0luZGV4OmEsY29sdW1uOmwsaGVhZGVyUm93SW5kZXhXaXRob3V0U3BhbjpkfT1uP3RoaXMuaGVhZGVyUG9zaXRpb25VdGlscy5nZXRDb2x1bW5WaXNpYmxlUGFyZW50KHIscyk6dGhpcy5oZWFkZXJQb3NpdGlvblV0aWxzLmdldENvbHVtblZpc2libGVDaGlsZChyLHMpLGM9ITE7cmV0dXJuIGE8MCYmKGE9MCxsPXIsYz0hMCksYT49bz8oYT0tMSx0aGlzLnNldEN1cnJlbnRIZWFkZXJSb3dXaXRob3V0U3BhbigtMSkpOnZvaWQgMCE9PWQmJih0aGlzLmN1cnJlbnRIZWFkZXJSb3dXaXRob3V0U3Bhbj1kKSwhKCFjJiYhbCkmJnRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzSGVhZGVyUG9zaXRpb24oe2hlYWRlclBvc2l0aW9uOntoZWFkZXJSb3dJbmRleDphLGNvbHVtbjpsfSxhbGxvd1VzZXJPdmVycmlkZTohMCxldmVudDppfSl9c2V0Q3VycmVudEhlYWRlclJvd1dpdGhvdXRTcGFuKGUpe3RoaXMuY3VycmVudEhlYWRlclJvd1dpdGhvdXRTcGFuPWV9bmF2aWdhdGVIb3Jpem9udGFsbHkoZSx0PSExLGkpe2NvbnN0IHM9dGhpcy5mb2N1c1NlcnZpY2UuZ2V0Rm9jdXNlZEhlYWRlcigpLHI9ZT09PVpsLkxFRlQsbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpO2xldCBuLGE7cmV0dXJuLTEhPT10aGlzLmN1cnJlbnRIZWFkZXJSb3dXaXRob3V0U3Bhbj9zLmhlYWRlclJvd0luZGV4PXRoaXMuY3VycmVudEhlYWRlclJvd1dpdGhvdXRTcGFuOnRoaXMuY3VycmVudEhlYWRlclJvd1dpdGhvdXRTcGFuPXMuaGVhZGVyUm93SW5kZXgsciE9PW8/KGE9IkJlZm9yZSIsbj10aGlzLmhlYWRlclBvc2l0aW9uVXRpbHMuZmluZEhlYWRlcihzLGEpKTooYT0iQWZ0ZXIiLG49dGhpcy5oZWFkZXJQb3NpdGlvblV0aWxzLmZpbmRIZWFkZXIocyxhKSksbnx8IXQ/dGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNIZWFkZXJQb3NpdGlvbih7aGVhZGVyUG9zaXRpb246bixkaXJlY3Rpb246YSxmcm9tVGFiOnQsYWxsb3dVc2VyT3ZlcnJpZGU6ITAsZXZlbnQ6aX0pOnRoaXMuZm9jdXNOZXh0SGVhZGVyUm93KHMsYSxpKX1mb2N1c05leHRIZWFkZXJSb3coZSx0LGkpe2NvbnN0IHM9ZS5oZWFkZXJSb3dJbmRleDtsZXQgcixvPW51bGw7aWYoIkJlZm9yZSI9PT10P3M+MCYmKHI9cy0xLHRoaXMuY3VycmVudEhlYWRlclJvd1dpdGhvdXRTcGFuLT0xLG89dGhpcy5oZWFkZXJQb3NpdGlvblV0aWxzLmZpbmRDb2xBdEVkZ2VGb3JIZWFkZXJSb3cociwiZW5kIikpOihyPXMrMSx0aGlzLmN1cnJlbnRIZWFkZXJSb3dXaXRob3V0U3Bhbjx0aGlzLmdldEhlYWRlclJvd0NvdW50KCk/dGhpcy5jdXJyZW50SGVhZGVyUm93V2l0aG91dFNwYW4rPTE6dGhpcy5zZXRDdXJyZW50SGVhZGVyUm93V2l0aG91dFNwYW4oLTEpLG89dGhpcy5oZWFkZXJQb3NpdGlvblV0aWxzLmZpbmRDb2xBdEVkZ2VGb3JIZWFkZXJSb3cociwic3RhcnQiKSksIW8pcmV0dXJuITE7Y29uc3R7Y29sdW1uOm4saGVhZGVyUm93SW5kZXg6YX09dGhpcy5oZWFkZXJQb3NpdGlvblV0aWxzLmdldEhlYWRlckluZGV4VG9Gb2N1cyhvLmNvbHVtbixudWxsPT1vP3ZvaWQgMDpvLmhlYWRlclJvd0luZGV4KTtyZXR1cm4gdGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNIZWFkZXJQb3NpdGlvbih7aGVhZGVyUG9zaXRpb246e2NvbHVtbjpuLGhlYWRlclJvd0luZGV4OmF9LGRpcmVjdGlvbjp0LGZyb21UYWI6ITAsYWxsb3dVc2VyT3ZlcnJpZGU6ITAsZXZlbnQ6aX0pfXNjcm9sbFRvQ29sdW1uKGUsdD0iQWZ0ZXIiKXtpZihlLmdldFBpbm5lZCgpKXJldHVybjtsZXQgaTtpZihlIGluc3RhbmNlb2YgYXQpe2NvbnN0IHM9ZS5nZXREaXNwbGF5ZWRMZWFmQ29sdW1ucygpO2k9IkJlZm9yZSI9PT10P09lKHMpOnNbMF19ZWxzZSBpPWU7dGhpcy5ncmlkQm9keUNvbi5nZXRTY3JvbGxGZWF0dXJlKCkuZW5zdXJlQ29sdW1uVmlzaWJsZShpKX19O1FsKFtjZSgiZm9jdXNTZXJ2aWNlIildLEpsLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLFFsKFtjZSgiaGVhZGVyUG9zaXRpb25VdGlscyIpXSxKbC5wcm90b3R5cGUsImhlYWRlclBvc2l0aW9uVXRpbHMiLHZvaWQgMCksUWwoW2NlKCJjdHJsc1NlcnZpY2UiKV0sSmwucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksUWwoW2FlXSxKbC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLEpsPVFsKFtkZSgiaGVhZGVyTmF2aWdhdGlvblNlcnZpY2UiKV0sSmwpO3ZhciBlZD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyB0ZCBleHRlbmRzIGl0e3NldENvbXAoZSx0LGkpe3RoaXMuY29tcD1lLHRoaXMuZUd1aT10LHRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IFNyKGkse29uVGFiS2V5RG93bjp0aGlzLm9uVGFiS2V5RG93bi5iaW5kKHRoaXMpLGhhbmRsZUtleURvd246dGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcyksb25Gb2N1c091dDp0aGlzLm9uRm9jdXNPdXQuYmluZCh0aGlzKX0pKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fUElWT1RfTU9ERV9DSEFOR0VELHRoaXMub25QaXZvdE1vZGVDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0RJU1BMQVlFRF9DT0xVTU5TX0NIQU5HRUQsdGhpcy5vbkRpc3BsYXllZENvbHVtbnNDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMub25QaXZvdE1vZGVDaGFuZ2VkKCksdGhpcy5zZXR1cEhlYWRlckhlaWdodCgpO2NvbnN0IHM9dGhpcy5vbkhlYWRlckNvbnRleHRNZW51LmJpbmQodGhpcyk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lR3VpLCJjb250ZXh0bWVudSIscyksdGhpcy5tb2NrQ29udGV4dE1lbnVGb3JJUGFkKHMpLHRoaXMuY3RybHNTZXJ2aWNlLnJlZ2lzdGVyR3JpZEhlYWRlckN0cmwodGhpcyl9c2V0dXBIZWFkZXJIZWlnaHQoKXtjb25zdCBlPXRoaXMuc2V0SGVhZGVySGVpZ2h0LmJpbmQodGhpcyk7ZSgpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoImhlYWRlckhlaWdodCIsZSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigicGl2b3RIZWFkZXJIZWlnaHQiLGUpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoImdyb3VwSGVhZGVySGVpZ2h0IixlKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJwaXZvdEdyb3VwSGVhZGVySGVpZ2h0IixlKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJmbG9hdGluZ0ZpbHRlcnNIZWlnaHQiLGUpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0RJU1BMQVlFRF9DT0xVTU5TX0NIQU5HRUQsZSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ09MVU1OX0hFQURFUl9IRUlHSFRfQ0hBTkdFRCxlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9HUklEX1NUWUxFU19DSEFOR0VELGUpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0FEVkFOQ0VEX0ZJTFRFUl9FTkFCTEVEX0NIQU5HRUQsZSl9Z2V0SGVhZGVySGVpZ2h0KCl7cmV0dXJuIHRoaXMuaGVhZGVySGVpZ2h0fXNldEhlYWRlckhlaWdodCgpe2NvbnN0e2NvbHVtbk1vZGVsOmV9PXRoaXM7bGV0IHQsaT0wLHM9ZS5nZXRIZWFkZXJSb3dDb3VudCgpO3RoaXMuZmlsdGVyTWFuYWdlci5oYXNGbG9hdGluZ0ZpbHRlcnMoKSYmKHMrKyxpPTEpO2NvbnN0IHI9dGhpcy5jb2x1bW5Nb2RlbC5nZXRDb2x1bW5Hcm91cEhlYWRlclJvd0hlaWdodCgpLG89dGhpcy5jb2x1bW5Nb2RlbC5nZXRDb2x1bW5IZWFkZXJSb3dIZWlnaHQoKSxuPXMtKDEraSk7aWYodD1pKmUuZ2V0RmxvYXRpbmdGaWx0ZXJzSGVpZ2h0KCksdCs9bipyLHQrPW8sdGhpcy5oZWFkZXJIZWlnaHQ9PT10KXJldHVybjt0aGlzLmhlYWRlckhlaWdodD10O2NvbnN0IGE9dCsxKyJweCI7dGhpcy5jb21wLnNldEhlaWdodEFuZE1pbkhlaWdodChhKSx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHt0eXBlOmx0LkVWRU5UX0hFQURFUl9IRUlHSFRfQ0hBTkdFRH0pfW9uUGl2b3RNb2RlQ2hhbmdlZCgpe2NvbnN0IGU9dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpO3RoaXMuY29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1waXZvdC1vbiIsZSksdGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXBpdm90LW9mZiIsIWUpfW9uRGlzcGxheWVkQ29sdW1uc0NoYW5nZWQoKXtjb25zdCBlPXRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsRGlzcGxheWVkQ29sdW1ucygpLnNvbWUoZT0+ZS5pc1NwYW5IZWFkZXJIZWlnaHQoKSk7dGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWhlYWRlci1hbGxvdy1vdmVyZmxvdyIsZSl9b25UYWJLZXlEb3duKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKSxpPWUuc2hpZnRLZXkhPT10P1psLkxFRlQ6WmwuUklHSFQ7KHRoaXMuaGVhZGVyTmF2aWdhdGlvblNlcnZpY2UubmF2aWdhdGVIb3Jpem9udGFsbHkoaSwhMCxlKXx8dGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNOZXh0R3JpZENvcmVDb250YWluZXIoZS5zaGlmdEtleSkpJiZlLnByZXZlbnREZWZhdWx0KCl9aGFuZGxlS2V5RG93bihlKXtsZXQgdD1udWxsO3N3aXRjaChlLmtleSl7Y2FzZSBqcy5MRUZUOnQ9WmwuTEVGVDtjYXNlIGpzLlJJR0hUOmIodCl8fCh0PVpsLlJJR0hUKSx0aGlzLmhlYWRlck5hdmlnYXRpb25TZXJ2aWNlLm5hdmlnYXRlSG9yaXpvbnRhbGx5KHQsITEsZSk7YnJlYWs7Y2FzZSBqcy5VUDp0PVpsLlVQO2Nhc2UganMuRE9XTjpiKHQpfHwodD1abC5ET1dOKSx0aGlzLmhlYWRlck5hdmlnYXRpb25TZXJ2aWNlLm5hdmlnYXRlVmVydGljYWxseSh0LG51bGwsZSkmJmUucHJldmVudERlZmF1bHQoKTticmVhaztkZWZhdWx0OnJldHVybn19b25Gb2N1c091dChlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCkse3JlbGF0ZWRUYXJnZXQ6aX09ZTshaSYmdGhpcy5lR3VpLmNvbnRhaW5zKHQuYWN0aXZlRWxlbWVudCl8fHRoaXMuZUd1aS5jb250YWlucyhpKXx8dGhpcy5mb2N1c1NlcnZpY2UuY2xlYXJGb2N1c2VkSGVhZGVyKCl9b25IZWFkZXJDb250ZXh0TWVudShlLHQsaSl7aWYoIWUmJiFpfHwhdGhpcy5tZW51U2VydmljZS5pc0hlYWRlckNvbnRleHRNZW51RW5hYmxlZCgpKXJldHVybjtjb25zdHt0YXJnZXQ6c309bnVsbCE9ZT9lOnQ7cyE9PXRoaXMuZUd1aSYmcyE9PXRoaXMuY3RybHNTZXJ2aWNlLmdldEhlYWRlclJvd0NvbnRhaW5lckN0cmwoKS5nZXRWaWV3cG9ydCgpfHx0aGlzLm1lbnVTZXJ2aWNlLnNob3dIZWFkZXJDb250ZXh0TWVudSh2b2lkIDAsZSxpKX1tb2NrQ29udGV4dE1lbnVGb3JJUGFkKGUpe2lmKCFNaSgpKXJldHVybjtjb25zdCB0PW5ldyBhbyh0aGlzLmVHdWkpO3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHQsYW8uRVZFTlRfTE9OR19UQVAsdD0+e2Uodm9pZCAwLHQudG91Y2hTdGFydCx0LnRvdWNoRXZlbnQpfSksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+dC5kZXN0cm95KCkpfX1lZChbY2UoImhlYWRlck5hdmlnYXRpb25TZXJ2aWNlIildLHRkLnByb3RvdHlwZSwiaGVhZGVyTmF2aWdhdGlvblNlcnZpY2UiLHZvaWQgMCksZWQoW2NlKCJmb2N1c1NlcnZpY2UiKV0sdGQucHJvdG90eXBlLCJmb2N1c1NlcnZpY2UiLHZvaWQgMCksZWQoW2NlKCJjb2x1bW5Nb2RlbCIpXSx0ZC5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLGVkKFtjZSgiY3RybHNTZXJ2aWNlIildLHRkLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLGVkKFtjZSgiZmlsdGVyTWFuYWdlciIpXSx0ZC5wcm90b3R5cGUsImZpbHRlck1hbmFnZXIiLHZvaWQgMCksZWQoW2NlKCJtZW51U2VydmljZSIpXSx0ZC5wcm90b3R5cGUsIm1lbnVTZXJ2aWNlIix2b2lkIDApO3ZhciBpZD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBzZCBleHRlbmRzIGNye2NvbnN0cnVjdG9yKCl7c3VwZXIoc2QuVEVNUExBVEUpfXBvc3RDb25zdHJ1Y3QoKXtjb25zdCBlPXthZGRPclJlbW92ZUNzc0NsYXNzOihlLHQpPT50aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoZSx0KSxzZXRIZWlnaHRBbmRNaW5IZWlnaHQ6ZT0+e3RoaXMuZ2V0R3VpKCkuc3R5bGUuaGVpZ2h0PWUsdGhpcy5nZXRHdWkoKS5zdHlsZS5taW5IZWlnaHQ9ZX19O3RoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHRkKS5zZXRDb21wKGUsdGhpcy5nZXRHdWkoKSx0aGlzLmdldEZvY3VzYWJsZUVsZW1lbnQoKSk7Y29uc3QgdD1lPT57dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihlKSx0aGlzLmFwcGVuZENoaWxkKGUpfTt0KG5ldyBxbCgibGVmdCIpKSx0KG5ldyBxbChudWxsKSksdChuZXcgcWwoInJpZ2h0IikpfX1zZC5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctaGVhZGVyIiByb2xlPSJwcmVzZW50YXRpb24iLz4nLGlkKFthZV0sc2QucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgcmQ9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IG9kPWNsYXNzIGV4dGVuZHMgaXR7YWRkUmVzaXplQmFyKGUpe2NvbnN0IHQ9e2RyYWdTdGFydFBpeGVsczplLmRyYWdTdGFydFBpeGVsc3x8MCxlRWxlbWVudDplLmVSZXNpemVCYXIsb25EcmFnU3RhcnQ6dGhpcy5vbkRyYWdTdGFydC5iaW5kKHRoaXMsZSksb25EcmFnU3RvcDp0aGlzLm9uRHJhZ1N0b3AuYmluZCh0aGlzLGUpLG9uRHJhZ2dpbmc6dGhpcy5vbkRyYWdnaW5nLmJpbmQodGhpcyxlKSxpbmNsdWRlVG91Y2g6ITAsc3RvcFByb3BhZ2F0aW9uRm9yVG91Y2g6ITB9O3RoaXMuZHJhZ1NlcnZpY2UuYWRkRHJhZ1NvdXJjZSh0KTtyZXR1cm4oKT0+dGhpcy5kcmFnU2VydmljZS5yZW1vdmVEcmFnU291cmNlKHQpfW9uRHJhZ1N0YXJ0KGUsdCl7dGhpcy5kcmFnU3RhcnRYPXQuY2xpZW50WCx0aGlzLnNldFJlc2l6ZUljb25zKCk7Y29uc3QgaT10IGluc3RhbmNlb2YgTW91c2VFdmVudCYmITA9PT10LnNoaWZ0S2V5O2Uub25SZXNpemVTdGFydChpKX1zZXRSZXNpemVJY29ucygpe2NvbnN0IGU9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0R3JpZEN0cmwoKTtlLnNldFJlc2l6ZUN1cnNvcighMCksZS5kaXNhYmxlVXNlclNlbGVjdCghMCl9b25EcmFnU3RvcChlLHQpe2Uub25SZXNpemVFbmQodGhpcy5yZXNpemVBbW91bnQpLHRoaXMucmVzZXRJY29ucygpfXJlc2V0SWNvbnMoKXtjb25zdCBlPXRoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRDdHJsKCk7ZS5zZXRSZXNpemVDdXJzb3IoITEpLGUuZGlzYWJsZVVzZXJTZWxlY3QoITEpfW9uRHJhZ2dpbmcoZSx0KXt0aGlzLnJlc2l6ZUFtb3VudD10LmNsaWVudFgtdGhpcy5kcmFnU3RhcnRYLGUub25SZXNpemluZyh0aGlzLnJlc2l6ZUFtb3VudCl9fTtyZChbY2UoImRyYWdTZXJ2aWNlIildLG9kLnByb3RvdHlwZSwiZHJhZ1NlcnZpY2UiLHZvaWQgMCkscmQoW2NlKCJjdHJsc1NlcnZpY2UiKV0sb2QucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksb2Q9cmQoW2RlKCJob3Jpem9udGFsUmVzaXplU2VydmljZSIpXSxvZCk7dmFyIG5kPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBhZD1jbGFzcyBleHRlbmRzIGl0e2hpZGVBY3RpdmVNZW51KCl7dGhpcy5oaWRlUG9wdXAmJnRoaXMuaGlkZVBvcHVwKCl9c2hvd01lbnVBZnRlck1vdXNlRXZlbnQoZSx0LGkpe3RoaXMuc2hvd1BvcHVwKGUscz0+e3RoaXMucG9wdXBTZXJ2aWNlLnBvc2l0aW9uUG9wdXBVbmRlck1vdXNlRXZlbnQoe2NvbHVtbjplLHR5cGU6aSxtb3VzZUV2ZW50OnQsZVBvcHVwOnN9KX0saSx0LnRhcmdldCx0aGlzLm1lbnVTZXJ2aWNlLmlzTGVnYWN5TWVudUVuYWJsZWQoKSl9c2hvd01lbnVBZnRlckJ1dHRvbkNsaWNrKGUsdCxpKXtsZXQgcz0tMSxyPSJsZWZ0Ijtjb25zdCBvPXRoaXMubWVudVNlcnZpY2UuaXNMZWdhY3lNZW51RW5hYmxlZCgpOyFvJiZ0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpJiYocz0xLHI9InJpZ2h0Iik7bGV0IG49bz92b2lkIDA6NCpzLGE9bz92b2lkIDA6NDt0aGlzLnNob3dQb3B1cChlLHM9Pnt0aGlzLnBvcHVwU2VydmljZS5wb3NpdGlvblBvcHVwQnlDb21wb25lbnQoe3R5cGU6aSxldmVudFNvdXJjZTp0LGVQb3B1cDpzLG51ZGdlWDpuLG51ZGdlWTphLGFsaWduU2lkZTpyLGtlZXBXaXRoaW5Cb3VuZHM6ITAscG9zaXRpb246InVuZGVyIixjb2x1bW46ZX0pfSxpLHQsbyl9c2hvd1BvcHVwKGUsdCxpLHMscil7Y29uc3Qgbz1lP3RoaXMuZmlsdGVyTWFuYWdlci5nZXRPckNyZWF0ZUZpbHRlcldyYXBwZXIoZSwiQ09MVU1OX01FTlUiKTp2b2lkIDA7aWYoIW98fCFlKXRocm93IG5ldyBFcnJvcigiQUcgR3JpZCAtIHVuYWJsZSB0byBzaG93IHBvcHVwIGZpbHRlciwgZmlsdGVyIGluc3RhbnRpYXRpb24gZmFpbGVkIik7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtsZXQgYTtYdChuLCJwcmVzZW50YXRpb24iKSxuLmNsYXNzTGlzdC5hZGQoImFnLW1lbnUiKSxyfHxuLmNsYXNzTGlzdC5hZGQoImFnLWZpbHRlci1tZW51IiksdGhpcy50YWJMaXN0ZW5lcj10aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihuLCJrZXlkb3duIixlPT50aGlzLnRyYXBGb2N1c1dpdGhpbihlLG4pKSxvLmd1aVByb21pc2UudGhlbihlPT5uLmFwcGVuZENoaWxkKGUpKTtjb25zdCBsPXRoaXMubWVudVNlcnZpY2UuaXNDb2x1bW5NZW51QW5jaG9yaW5nRW5hYmxlZCgpP251bGwhPXM/czp0aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKS5nZXRHdWkoKTp2b2lkIDAsZD10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSxjPXImJiJjb2x1bW5GaWx0ZXIiIT09aT9kKCJhcmlhTGFiZWxDb2x1bW5NZW51IiwiQ29sdW1uIE1lbnUiKTpkKCJhcmlhTGFiZWxDb2x1bW5GaWx0ZXIiLCJDb2x1bW4gRmlsdGVyIiksaD10aGlzLnBvcHVwU2VydmljZS5hZGRQb3B1cCh7bW9kYWw6ITAsZUNoaWxkOm4sY2xvc2VPbkVzYzohMCxjbG9zZWRDYWxsYmFjazp0PT57ZS5zZXRNZW51VmlzaWJsZSghMSwiY29udGV4dE1lbnUiKTtjb25zdCByPXQgaW5zdGFuY2VvZiBLZXlib2FyZEV2ZW50O2lmKHRoaXMudGFiTGlzdGVuZXImJih0aGlzLnRhYkxpc3RlbmVyPXRoaXMudGFiTGlzdGVuZXIoKSksciYmcyYmQ3Mocykpe2NvbnN0IGU9dGhpcy5mb2N1c1NlcnZpY2UuZmluZFRhYmJhYmxlUGFyZW50KHMpO2UmJmUuZm9jdXMoKX12YXIgbjtudWxsPT09KG49by5maWx0ZXJQcm9taXNlKXx8dm9pZCAwPT09bnx8bi50aGVuKGU9Pnt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuYWZ0ZXJHdWlEZXRhY2hlZCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY2FsbChlKX0pLHRoaXMuZGlzcGF0Y2hWaXNpYmxlQ2hhbmdlZEV2ZW50KCExLGksZSl9LHBvc2l0aW9uQ2FsbGJhY2s6KCk9PnQobiksYW5jaG9yVG9FbGVtZW50OmwsYXJpYUxhYmVsOmN9KTtoJiYodGhpcy5oaWRlUG9wdXA9YT1oLmhpZGVGdW5jKSxvLmZpbHRlclByb21pc2UudGhlbihlPT57dChuKSxlLmFmdGVyR3VpQXR0YWNoZWQmJmUuYWZ0ZXJHdWlBdHRhY2hlZCh7Y29udGFpbmVyOmksaGlkZVBvcHVwOmF9KX0pLGUuc2V0TWVudVZpc2libGUoITAsImNvbnRleHRNZW51IiksdGhpcy5kaXNwYXRjaFZpc2libGVDaGFuZ2VkRXZlbnQoITAsaSxlKX10cmFwRm9jdXNXaXRoaW4oZSx0KXtlLmtleSE9PWpzLlRBQnx8ZS5kZWZhdWx0UHJldmVudGVkfHx0aGlzLmZvY3VzU2VydmljZS5maW5kTmV4dEZvY3VzYWJsZUVsZW1lbnQodCwhMSxlLnNoaWZ0S2V5KXx8KGUucHJldmVudERlZmF1bHQoKSx0aGlzLmZvY3VzU2VydmljZS5mb2N1c0ludG8odCxlLnNoaWZ0S2V5KSl9ZGlzcGF0Y2hWaXNpYmxlQ2hhbmdlZEV2ZW50KGUsdCxpKXtjb25zdCBzPXt0eXBlOmx0LkVWRU5UX0NPTFVNTl9NRU5VX1ZJU0lCTEVfQ0hBTkdFRCx2aXNpYmxlOmUsc3dpdGNoaW5nVGFiOiExLGtleTp0LGNvbHVtbjpudWxsIT1pP2k6bnVsbH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChzKX1pc01lbnVFbmFibGVkKGUpe3ZhciB0O3JldHVybiBlLmlzRmlsdGVyQWxsb3dlZCgpJiYobnVsbCE9PSh0PWUuZ2V0Q29sRGVmKCkubWVudVRhYnMpJiZ2b2lkIDAhPT10P3Q6WyJmaWx0ZXJNZW51VGFiIl0pLmluY2x1ZGVzKCJmaWx0ZXJNZW51VGFiIil9c2hvd01lbnVBZnRlckNvbnRleHRNZW51RXZlbnQoKXt9fTtuZChbY2UoImZpbHRlck1hbmFnZXIiKV0sYWQucHJvdG90eXBlLCJmaWx0ZXJNYW5hZ2VyIix2b2lkIDApLG5kKFtjZSgicG9wdXBTZXJ2aWNlIildLGFkLnByb3RvdHlwZSwicG9wdXBTZXJ2aWNlIix2b2lkIDApLG5kKFtjZSgiZm9jdXNTZXJ2aWNlIildLGFkLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLG5kKFtjZSgiY3RybHNTZXJ2aWNlIildLGFkLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLG5kKFtjZSgibWVudVNlcnZpY2UiKV0sYWQucHJvdG90eXBlLCJtZW51U2VydmljZSIsdm9pZCAwKSxhZD1uZChbZGUoImZpbHRlck1lbnVGYWN0b3J5IildLGFkKTt2YXIgbGQsZGQ9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07IWZ1bmN0aW9uKGUpe2UuVEFCX0dVQVJEPSJhZy10YWItZ3VhcmQiLGUuVEFCX0dVQVJEX1RPUD0iYWctdGFiLWd1YXJkLXRvcCIsZS5UQUJfR1VBUkRfQk9UVE9NPSJhZy10YWItZ3VhcmQtYm90dG9tIn0obGR8fChsZD17fSkpO2NsYXNzIGNkIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnNraXBUYWJHdWFyZEZvY3VzPSExLHRoaXMuZm9yY2luZ0ZvY3VzT3V0PSExO2NvbnN0e2NvbXA6dCxlVG9wR3VhcmQ6aSxlQm90dG9tR3VhcmQ6cyxmb2N1c1RyYXBBY3RpdmU6cixmb3JjZUZvY3VzT3V0V2hlblRhYkd1YXJkc0FyZUVtcHR5Om8sZm9jdXNJbm5lckVsZW1lbnQ6bixvbkZvY3VzSW46YSxvbkZvY3VzT3V0Omwsc2hvdWxkU3RvcEV2ZW50UHJvcGFnYXRpb246ZCxvblRhYktleURvd246YyxoYW5kbGVLZXlEb3duOmgsZUZvY3VzYWJsZUVsZW1lbnQ6dX09ZTt0aGlzLmNvbXA9dCx0aGlzLmVUb3BHdWFyZD1pLHRoaXMuZUJvdHRvbUd1YXJkPXMsdGhpcy5wcm92aWRlZEZvY3VzSW5uZXJFbGVtZW50PW4sdGhpcy5lRm9jdXNhYmxlRWxlbWVudD11LHRoaXMuZm9jdXNUcmFwQWN0aXZlPSEhcix0aGlzLmZvcmNlRm9jdXNPdXRXaGVuVGFiR3VhcmRzQXJlRW1wdHk9ISFvLHRoaXMucHJvdmlkZWRGb2N1c0luPWEsdGhpcy5wcm92aWRlZEZvY3VzT3V0PWwsdGhpcy5wcm92aWRlZFNob3VsZFN0b3BFdmVudFByb3BhZ2F0aW9uPWQsdGhpcy5wcm92aWRlZE9uVGFiS2V5RG93bj1jLHRoaXMucHJvdmlkZWRIYW5kbGVLZXlEb3duPWh9cG9zdENvbnN0cnVjdCgpe3RoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IFNyKHRoaXMuZUZvY3VzYWJsZUVsZW1lbnQse3Nob3VsZFN0b3BFdmVudFByb3BhZ2F0aW9uOigpPT50aGlzLnNob3VsZFN0b3BFdmVudFByb3BhZ2F0aW9uKCksb25UYWJLZXlEb3duOmU9PnRoaXMub25UYWJLZXlEb3duKGUpLGhhbmRsZUtleURvd246ZT0+dGhpcy5oYW5kbGVLZXlEb3duKGUpLG9uRm9jdXNJbjplPT50aGlzLm9uRm9jdXNJbihlKSxvbkZvY3VzT3V0OmU9PnRoaXMub25Gb2N1c091dChlKX0pKSx0aGlzLmFjdGl2YXRlVGFiR3VhcmRzKCksW3RoaXMuZVRvcEd1YXJkLHRoaXMuZUJvdHRvbUd1YXJkXS5mb3JFYWNoKGU9PnRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsImZvY3VzIix0aGlzLm9uRm9jdXMuYmluZCh0aGlzKSkpfWhhbmRsZUtleURvd24oZSl7dGhpcy5wcm92aWRlZEhhbmRsZUtleURvd24mJnRoaXMucHJvdmlkZWRIYW5kbGVLZXlEb3duKGUpfXRhYkd1YXJkc0FyZUFjdGl2ZSgpe3JldHVybiEhdGhpcy5lVG9wR3VhcmQmJnRoaXMuZVRvcEd1YXJkLmhhc0F0dHJpYnV0ZSgidGFiSW5kZXgiKX1zaG91bGRTdG9wRXZlbnRQcm9wYWdhdGlvbigpe3JldHVybiEhdGhpcy5wcm92aWRlZFNob3VsZFN0b3BFdmVudFByb3BhZ2F0aW9uJiZ0aGlzLnByb3ZpZGVkU2hvdWxkU3RvcEV2ZW50UHJvcGFnYXRpb24oKX1hY3RpdmF0ZVRhYkd1YXJkcygpe2lmKHRoaXMuZm9yY2luZ0ZvY3VzT3V0KXJldHVybjtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidGFiSW5kZXgiKTt0aGlzLmNvbXAuc2V0VGFiSW5kZXgoZS50b1N0cmluZygpKX1kZWFjdGl2YXRlVGFiR3VhcmRzKCl7dGhpcy5jb21wLnNldFRhYkluZGV4KCl9b25Gb2N1cyhlKXtpZih0aGlzLnNraXBUYWJHdWFyZEZvY3VzKXJldHVybiB2b2lkKHRoaXMuc2tpcFRhYkd1YXJkRm9jdXM9ITEpO2lmKHRoaXMuZm9yY2VGb2N1c091dFdoZW5UYWJHdWFyZHNBcmVFbXB0eSl7aWYoMD09PXRoaXMuZm9jdXNTZXJ2aWNlLmZpbmRGb2N1c2FibGVFbGVtZW50cyh0aGlzLmVGb2N1c2FibGVFbGVtZW50LCIuYWctdGFiLWd1YXJkIikubGVuZ3RoKXJldHVybiB2b2lkIHRoaXMuZmluZE5leHRFbGVtZW50T3V0c2lkZUFuZEZvY3VzKGUudGFyZ2V0PT09dGhpcy5lQm90dG9tR3VhcmQpfWNvbnN0IHQ9ZS50YXJnZXQ9PT10aGlzLmVCb3R0b21HdWFyZDt0aGlzLnByb3ZpZGVkRm9jdXNJbm5lckVsZW1lbnQ/dGhpcy5wcm92aWRlZEZvY3VzSW5uZXJFbGVtZW50KHQpOnRoaXMuZm9jdXNJbm5lckVsZW1lbnQodCl9ZmluZE5leHRFbGVtZW50T3V0c2lkZUFuZEZvY3VzKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKSxpPXRoaXMuZm9jdXNTZXJ2aWNlLmZpbmRGb2N1c2FibGVFbGVtZW50cyh0LmJvZHksbnVsbCwhMCkscz1pLmluZGV4T2YoZT90aGlzLmVUb3BHdWFyZDp0aGlzLmVCb3R0b21HdWFyZCk7aWYoLTE9PT1zKXJldHVybjtsZXQgcixvO2U/KHI9MCxvPXMpOihyPXMrMSxvPWkubGVuZ3RoKTtjb25zdCBuPWkuc2xpY2UocixvKSxhPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidGFiSW5kZXgiKTtuLnNvcnQoKGUsdCk9Pntjb25zdCBpPXBhcnNlSW50KGUuZ2V0QXR0cmlidXRlKCJ0YWJpbmRleCIpfHwiMCIpLHM9cGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoInRhYmluZGV4Iil8fCIwIik7cmV0dXJuIHM9PT1hPzE6aT09PWE/LTE6MD09PWk/MTowPT09cz8tMTppLXN9KSxuW2U/bi5sZW5ndGgtMTowXS5mb2N1cygpfW9uRm9jdXNJbihlKXt0aGlzLmZvY3VzVHJhcEFjdGl2ZXx8KHRoaXMucHJvdmlkZWRGb2N1c0luJiZ0aGlzLnByb3ZpZGVkRm9jdXNJbihlKSx0aGlzLmRlYWN0aXZhdGVUYWJHdWFyZHMoKSl9b25Gb2N1c091dChlKXt0aGlzLmZvY3VzVHJhcEFjdGl2ZXx8KHRoaXMucHJvdmlkZWRGb2N1c091dCYmdGhpcy5wcm92aWRlZEZvY3VzT3V0KGUpLHRoaXMuZUZvY3VzYWJsZUVsZW1lbnQuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5hY3RpdmF0ZVRhYkd1YXJkcygpKX1vblRhYktleURvd24oZSl7aWYodGhpcy5wcm92aWRlZE9uVGFiS2V5RG93bilyZXR1cm4gdm9pZCB0aGlzLnByb3ZpZGVkT25UYWJLZXlEb3duKGUpO2lmKHRoaXMuZm9jdXNUcmFwQWN0aXZlKXJldHVybjtpZihlLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuO2NvbnN0IHQ9dGhpcy50YWJHdWFyZHNBcmVBY3RpdmUoKTt0JiZ0aGlzLmRlYWN0aXZhdGVUYWJHdWFyZHMoKTtjb25zdCBpPXRoaXMuZ2V0TmV4dEZvY3VzYWJsZUVsZW1lbnQoZS5zaGlmdEtleSk7dCYmc2V0VGltZW91dCgoKT0+dGhpcy5hY3RpdmF0ZVRhYkd1YXJkcygpLDApLGkmJihpLmZvY3VzKCksZS5wcmV2ZW50RGVmYXVsdCgpKX1mb2N1c0lubmVyRWxlbWVudChlPSExKXtjb25zdCB0PXRoaXMuZm9jdXNTZXJ2aWNlLmZpbmRGb2N1c2FibGVFbGVtZW50cyh0aGlzLmVGb2N1c2FibGVFbGVtZW50KTt0aGlzLnRhYkd1YXJkc0FyZUFjdGl2ZSgpJiYodC5zcGxpY2UoMCwxKSx0LnNwbGljZSh0Lmxlbmd0aC0xLDEpKSx0Lmxlbmd0aCYmdFtlP3QubGVuZ3RoLTE6MF0uZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KX1nZXROZXh0Rm9jdXNhYmxlRWxlbWVudChlKXtyZXR1cm4gdGhpcy5mb2N1c1NlcnZpY2UuZmluZE5leHRGb2N1c2FibGVFbGVtZW50KHRoaXMuZUZvY3VzYWJsZUVsZW1lbnQsITEsZSl9Zm9yY2VGb2N1c091dE9mQ29udGFpbmVyKGU9ITEpe2lmKHRoaXMuZm9yY2luZ0ZvY3VzT3V0KXJldHVybjtjb25zdCB0PWU/dGhpcy5lVG9wR3VhcmQ6dGhpcy5lQm90dG9tR3VhcmQ7dGhpcy5hY3RpdmF0ZVRhYkd1YXJkcygpLHRoaXMuc2tpcFRhYkd1YXJkRm9jdXM9ITAsdGhpcy5mb3JjaW5nRm9jdXNPdXQ9ITAsdC5mb2N1cygpLHdpbmRvdy5zZXRUaW1lb3V0KCgpPT57dGhpcy5mb3JjaW5nRm9jdXNPdXQ9ITEsdGhpcy5hY3RpdmF0ZVRhYkd1YXJkcygpfSl9aXNUYWJHdWFyZChlKXtyZXR1cm4gZT09PXRoaXMuZVRvcEd1YXJkfHxlPT09dGhpcy5lQm90dG9tR3VhcmR9fWRkKFtjZSgiZm9jdXNTZXJ2aWNlIildLGNkLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLGRkKFthZV0sY2QucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTtjbGFzcyBoZCBleHRlbmRzIGNye2luaXRpYWxpc2VUYWJHdWFyZChlKXt0aGlzLmVUb3BHdWFyZD10aGlzLmNyZWF0ZVRhYkd1YXJkKCJ0b3AiKSx0aGlzLmVCb3R0b21HdWFyZD10aGlzLmNyZWF0ZVRhYkd1YXJkKCJib3R0b20iKSx0aGlzLmVGb2N1c2FibGVFbGVtZW50PXRoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpO2NvbnN0IHQ9W3RoaXMuZVRvcEd1YXJkLHRoaXMuZUJvdHRvbUd1YXJkXSxpPXtzZXRUYWJJbmRleDplPT57dC5mb3JFYWNoKHQ9Pm51bGwhPWU/dC5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IixlKTp0LnJlbW92ZUF0dHJpYnV0ZSgidGFiaW5kZXgiKSl9fTt0aGlzLmFkZFRhYkd1YXJkcyh0aGlzLmVUb3BHdWFyZCx0aGlzLmVCb3R0b21HdWFyZCksdGhpcy50YWJHdWFyZEN0cmw9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgY2Qoe2NvbXA6aSxmb2N1c1RyYXBBY3RpdmU6ISFlLmZvY3VzVHJhcEFjdGl2ZSxlVG9wR3VhcmQ6dGhpcy5lVG9wR3VhcmQsZUJvdHRvbUd1YXJkOnRoaXMuZUJvdHRvbUd1YXJkLGVGb2N1c2FibGVFbGVtZW50OnRoaXMuZUZvY3VzYWJsZUVsZW1lbnQsb25Gb2N1c0luOmUub25Gb2N1c0luLG9uRm9jdXNPdXQ6ZS5vbkZvY3VzT3V0LGZvY3VzSW5uZXJFbGVtZW50OmUuZm9jdXNJbm5lckVsZW1lbnQsaGFuZGxlS2V5RG93bjplLmhhbmRsZUtleURvd24sb25UYWJLZXlEb3duOmUub25UYWJLZXlEb3duLHNob3VsZFN0b3BFdmVudFByb3BhZ2F0aW9uOmUuc2hvdWxkU3RvcEV2ZW50UHJvcGFnYXRpb24sZm9yY2VGb2N1c091dFdoZW5UYWJHdWFyZHNBcmVFbXB0eTplLmZvcmNlRm9jdXNPdXRXaGVuVGFiR3VhcmRzQXJlRW1wdHl9KSl9Y3JlYXRlVGFiR3VhcmQoZSl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpPSJ0b3AiPT09ZT9sZC5UQUJfR1VBUkRfVE9QOmxkLlRBQl9HVUFSRF9CT1RUT007cmV0dXJuIHQuY2xhc3NMaXN0LmFkZChsZC5UQUJfR1VBUkQsaSksWHQodCwicHJlc2VudGF0aW9uIiksdH1hZGRUYWJHdWFyZHMoZSx0KXt0aGlzLmVGb2N1c2FibGVFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCgiYWZ0ZXJiZWdpbiIsZSksdGhpcy5lRm9jdXNhYmxlRWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoImJlZm9yZWVuZCIsdCl9cmVtb3ZlQWxsQ2hpbGRyZW5FeGNlcHRUYWJHdWFyZHMoKXtjb25zdCBlPVt0aGlzLmVUb3BHdWFyZCx0aGlzLmVCb3R0b21HdWFyZF07bXModGhpcy5nZXRGb2N1c2FibGVFbGVtZW50KCkpLHRoaXMuYWRkVGFiR3VhcmRzKC4uLmUpfWZvcmNlRm9jdXNPdXRPZkNvbnRhaW5lcihlPSExKXt0aGlzLnRhYkd1YXJkQ3RybC5mb3JjZUZvY3VzT3V0T2ZDb250YWluZXIoZSl9YXBwZW5kQ2hpbGQoZSx0KXtNcyhlKXx8KGU9ZS5nZXRHdWkoKSk7Y29uc3R7ZUJvdHRvbUd1YXJkOml9PXRoaXM7aT9pLmluc2VydEFkamFjZW50RWxlbWVudCgiYmVmb3JlYmVnaW4iLGUpOnN1cGVyLmFwcGVuZENoaWxkKGUsdCl9fXZhciB1ZD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBwZCBleHRlbmRzIGhke2NvbnN0cnVjdG9yKGUpe3N1cGVyKHBkLmdldFRlbXBsYXRlKGUuY3NzQ2xhc3MpKSx0aGlzLml0ZW1zPVtdLHRoaXMudGFiYmVkSXRlbVNjcm9sbE1hcD1uZXcgTWFwLHRoaXMucGFyYW1zPWUsZS5pdGVtcyYmZS5pdGVtcy5mb3JFYWNoKGU9PnRoaXMuYWRkSXRlbShlKSl9cG9zdENvbnN0cnVjdCgpe3RoaXMuaW5pdGlhbGlzZVRhYkd1YXJkKHtvblRhYktleURvd246dGhpcy5vblRhYktleURvd24uYmluZCh0aGlzKSxoYW5kbGVLZXlEb3duOnRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpLGZvY3VzSW5uZXJFbGVtZW50OnRoaXMuZm9jdXNJbm5lckVsZW1lbnQuYmluZCh0aGlzKSxmb2N1c1RyYXBBY3RpdmU6ITB9KSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT57dmFyIGUsdCxpO3JldHVybiBudWxsPT09KGk9bnVsbD09PSh0PW51bGw9PT0oZT10aGlzLmFjdGl2ZUl0ZW0pfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnRhYmJlZEl0ZW0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmFmdGVyRGV0YWNoZWRDYWxsYmFjayl8fHZvaWQgMD09PWk/dm9pZCAwOmkuY2FsbCh0KX0pfXN0YXRpYyBnZXRUZW1wbGF0ZShlKXtyZXR1cm5gPGRpdiBjbGFzcz0iYWctdGFicyAke2V9Ij5cbiAgICAgICAgICAgIDxkaXYgcmVmPSJlSGVhZGVyIiByb2xlPSJ0YWJsaXN0IiBjbGFzcz0iYWctdGFicy1oZWFkZXIgJHtlP2UrIi1oZWFkZXIiOiIifSI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IHJlZj0iZUJvZHkiIHJvbGU9InByZXNlbnRhdGlvbiIgY2xhc3M9ImFnLXRhYnMtYm9keSAke2U/ZSsiLWJvZHkiOiIifSI+PC9kaXY+XG4gICAgICAgIDwvZGl2PmB9aGFuZGxlS2V5RG93bihlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCk7c3dpdGNoKGUua2V5KXtjYXNlIGpzLlJJR0hUOmNhc2UganMuTEVGVDppZighdGhpcy5lSGVhZGVyLmNvbnRhaW5zKHQuYWN0aXZlRWxlbWVudCkpcmV0dXJuO2NvbnN0IGk9ZS5rZXk9PT1qcy5SSUdIVCxzPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIikscj10aGlzLml0ZW1zLmluZGV4T2YodGhpcy5hY3RpdmVJdGVtKSxvPWkhPT1zP01hdGgubWluKHIrMSx0aGlzLml0ZW1zLmxlbmd0aC0xKTpNYXRoLm1heChyLTEsMCk7aWYocj09PW8pcmV0dXJuO2UucHJldmVudERlZmF1bHQoKTtjb25zdCBuPXRoaXMuaXRlbXNbb107dGhpcy5zaG93SXRlbVdyYXBwZXIobiksbi5lSGVhZGVyQnV0dG9uLmZvY3VzKCk7YnJlYWs7Y2FzZSBqcy5VUDpjYXNlIGpzLkRPV046ZS5zdG9wUHJvcGFnYXRpb24oKX19b25UYWJLZXlEb3duKGUpe2lmKGUuZGVmYXVsdFByZXZlbnRlZClyZXR1cm47Y29uc3R7Zm9jdXNTZXJ2aWNlOnQsZUhlYWRlcjppLGVCb2R5OnMsYWN0aXZlSXRlbTpyfT10aGlzLG89dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKS5hY3RpdmVFbGVtZW50LG49ZS50YXJnZXQ7aWYoZS5wcmV2ZW50RGVmYXVsdCgpLGkuY29udGFpbnMobykpcmV0dXJuIHZvaWQgdGhpcy5mb2N1c0JvZHkoZS5zaGlmdEtleSk7bGV0IGE9bnVsbDt0LmlzVGFyZ2V0VW5kZXJNYW5hZ2VkQ29tcG9uZW50KHMsbikmJihlLnNoaWZ0S2V5JiYoYT10aGlzLmZvY3VzU2VydmljZS5maW5kRm9jdXNhYmxlRWxlbWVudEJlZm9yZVRhYkd1YXJkKHMsbikpLGF8fChhPXIuZUhlYWRlckJ1dHRvbikpLCFhJiZzLmNvbnRhaW5zKG8pJiYoYT10LmZpbmROZXh0Rm9jdXNhYmxlRWxlbWVudChzLCExLGUuc2hpZnRLZXkpLGF8fHRoaXMuZm9jdXNIZWFkZXIoKSksYSYmYS5mb2N1cygpfWZvY3VzSW5uZXJFbGVtZW50KGUpe2U/dGhpcy5mb2N1c0hlYWRlcigpOnRoaXMuZm9jdXNCb2R5KCEwKX1mb2N1c0hlYWRlcigpe3RoaXMuYWN0aXZlSXRlbS5lSGVhZGVyQnV0dG9uLmZvY3VzKCl9Zm9jdXNCb2R5KGUpe3RoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzSW50byh0aGlzLmVCb2R5LGUpfXNldEFmdGVyQXR0YWNoZWRQYXJhbXMoZSl7dGhpcy5hZnRlckF0dGFjaGVkUGFyYW1zPWV9c2hvd0ZpcnN0SXRlbSgpe3RoaXMuaXRlbXMubGVuZ3RoPjAmJnRoaXMuc2hvd0l0ZW1XcmFwcGVyKHRoaXMuaXRlbXNbMF0pfWFkZEl0ZW0oZSl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7WHQodCwidGFiIiksdC5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwiLTEiKSx0LmFwcGVuZENoaWxkKGUudGl0bGUpLHQuY2xhc3NMaXN0LmFkZCgiYWctdGFiIiksdGhpcy5lSGVhZGVyLmFwcGVuZENoaWxkKHQpLGVpKHQsZS50aXRsZUxhYmVsKTtjb25zdCBpPXt0YWJiZWRJdGVtOmUsZUhlYWRlckJ1dHRvbjp0fTt0aGlzLml0ZW1zLnB1c2goaSksdC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5zaG93SXRlbVdyYXBwZXIuYmluZCh0aGlzLGkpKX1zaG93SXRlbShlKXtjb25zdCB0PXRoaXMuaXRlbXMuZmluZCh0PT50LnRhYmJlZEl0ZW09PT1lKTt0JiZ0aGlzLnNob3dJdGVtV3JhcHBlcih0KX1zaG93SXRlbVdyYXBwZXIoZSl7dmFyIHQsaSxzLHIsbyxuO2NvbnN0e3RhYmJlZEl0ZW06YSxlSGVhZGVyQnV0dG9uOmx9PWU7bnVsbD09PShpPSh0PXRoaXMucGFyYW1zKS5vbkl0ZW1DbGlja2VkKXx8dm9pZCAwPT09aXx8aS5jYWxsKHQse2l0ZW06YX0pLHRoaXMuYWN0aXZlSXRlbSE9PWU/KHRoaXMubGFzdFNjcm9sbExpc3RlbmVyJiYodGhpcy5sYXN0U2Nyb2xsTGlzdGVuZXI9dGhpcy5sYXN0U2Nyb2xsTGlzdGVuZXIoKSksbXModGhpcy5lQm9keSksYS5ib2R5UHJvbWlzZS50aGVuKGU9Pnt0aGlzLmVCb2R5LmFwcGVuZENoaWxkKGUpO2NvbnN0IHQ9IXRoaXMuZm9jdXNTZXJ2aWNlLmlzS2V5Ym9hcmRNb2RlKCk7aWYodGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNJbnRvKHRoaXMuZUJvZHksITEsdCksYS5hZnRlckF0dGFjaGVkQ2FsbGJhY2smJmEuYWZ0ZXJBdHRhY2hlZENhbGxiYWNrKHRoaXMuYWZ0ZXJBdHRhY2hlZFBhcmFtcyksdGhpcy5wYXJhbXMua2VlcFNjcm9sbFBvc2l0aW9uKXtjb25zdCB0PWEuZ2V0U2Nyb2xsYWJsZUNvbnRhaW5lciYmYS5nZXRTY3JvbGxhYmxlQ29udGFpbmVyKCl8fGU7dGhpcy5sYXN0U2Nyb2xsTGlzdGVuZXI9dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodCwic2Nyb2xsIiwoKT0+e3RoaXMudGFiYmVkSXRlbVNjcm9sbE1hcC5zZXQoYS5uYW1lLHQuc2Nyb2xsVG9wKX0pO2NvbnN0IGk9dGhpcy50YWJiZWRJdGVtU2Nyb2xsTWFwLmdldChhLm5hbWUpO3ZvaWQgMCE9PWkmJnNldFRpbWVvdXQoKCk9Pnt0LnNjcm9sbFRvcD1pfSwwKX19KSx0aGlzLmFjdGl2ZUl0ZW0mJih0aGlzLmFjdGl2ZUl0ZW0uZUhlYWRlckJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCJhZy10YWItc2VsZWN0ZWQiKSxudWxsPT09KG49KG89dGhpcy5hY3RpdmVJdGVtLnRhYmJlZEl0ZW0pLmFmdGVyRGV0YWNoZWRDYWxsYmFjayl8fHZvaWQgMD09PW58fG4uY2FsbChvKSksbC5jbGFzc0xpc3QuYWRkKCJhZy10YWItc2VsZWN0ZWQiKSx0aGlzLmFjdGl2ZUl0ZW09ZSk6bnVsbD09PShyPShzPXRoaXMucGFyYW1zKS5vbkFjdGl2ZUl0ZW1DbGlja2VkKXx8dm9pZCAwPT09cnx8ci5jYWxsKHMpfX11ZChbY2UoImZvY3VzU2VydmljZSIpXSxwZC5wcm90b3R5cGUsImZvY3VzU2VydmljZSIsdm9pZCAwKSx1ZChbdXIoImVIZWFkZXIiKV0scGQucHJvdG90eXBlLCJlSGVhZGVyIix2b2lkIDApLHVkKFt1cigiZUJvZHkiKV0scGQucHJvdG90eXBlLCJlQm9keSIsdm9pZCAwKSx1ZChbYWVdLHBkLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIGdkPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBtZD1jbGFzcyBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnBvbHlmaWxsRnVuY3Rpb25zPVtdfW9ic2VydmVSZXNpemUoZSx0KXtjb25zdCBpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFdpbmRvdygpLHM9KCk9Pnt2YXIgaSxzO2xldCByPW51bGwhPT0oaT1udWxsPT1lP3ZvaWQgMDplLmNsaWVudFdpZHRoKSYmdm9pZCAwIT09aT9pOjAsbz1udWxsIT09KHM9bnVsbD09ZT92b2lkIDA6ZS5jbGllbnRIZWlnaHQpJiZ2b2lkIDAhPT1zP3M6MCxuPSEwO2NvbnN0IGE9KCk9Pnt2YXIgaSxzO2lmKG4pe2NvbnN0IG49bnVsbCE9PShpPW51bGw9PWU/dm9pZCAwOmUuY2xpZW50V2lkdGgpJiZ2b2lkIDAhPT1pP2k6MCxsPW51bGwhPT0ocz1udWxsPT1lP3ZvaWQgMDplLmNsaWVudEhlaWdodCkmJnZvaWQgMCE9PXM/czowOyhuIT09cnx8bCE9PW8pJiYocj1uLG89bCx0KCkpLHRoaXMuZG9OZXh0UG9seWZpbGxUdXJuKGEpfX07cmV0dXJuIGEoKSwoKT0+bj0hMX0scj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQnJvd3NlclJlc2l6ZU9ic2VydmVyIik7cmV0dXJuISFpLlJlc2l6ZU9ic2VydmVyJiYhcj8oKCk9Pntjb25zdCBzPW5ldyBpLlJlc2l6ZU9ic2VydmVyKHQpO3JldHVybiBzLm9ic2VydmUoZSksKCk9PnMuZGlzY29ubmVjdCgpfSkoKTp0aGlzLmdldEZyYW1ld29ya092ZXJyaWRlcygpLndyYXBJbmNvbWluZygoKT0+cygpLCJyZXNpemUtb2JzZXJ2ZXIiKX1kb05leHRQb2x5ZmlsbFR1cm4oZSl7dGhpcy5wb2x5ZmlsbEZ1bmN0aW9ucy5wdXNoKGUpLHRoaXMuc2NoZWR1bGVQb2x5ZmlsbCgpfXNjaGVkdWxlUG9seWZpbGwoKXtpZih0aGlzLnBvbHlmaWxsU2NoZWR1bGVkKXJldHVybjt0aGlzLnBvbHlmaWxsU2NoZWR1bGVkPSEwLHdpbmRvdy5zZXRUaW1lb3V0KCgpPT57Y29uc3QgZT10aGlzLnBvbHlmaWxsRnVuY3Rpb25zO3RoaXMucG9seWZpbGxTY2hlZHVsZWQ9ITEsdGhpcy5wb2x5ZmlsbEZ1bmN0aW9ucz1bXSxlLmZvckVhY2goZT0+ZSgpKX0sNTApfX07bWQ9Z2QoW2RlKCJyZXNpemVPYnNlcnZlclNlcnZpY2UiKV0sbWQpO3ZhciBmZD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgdmQ9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jcmVhdGVUYXNrc1AxPXtsaXN0OltdLHNvcnRlZDohMX0sdGhpcy5jcmVhdGVUYXNrc1AyPXtsaXN0OltdLHNvcnRlZDohMX0sdGhpcy5kZXN0cm95VGFza3M9W10sdGhpcy50aWNraW5nPSExLHRoaXMuc2Nyb2xsR29pbmdEb3duPSEwLHRoaXMubGFzdFBhZ2U9MCx0aGlzLmxhc3RTY3JvbGxUb3A9MCx0aGlzLnRhc2tDb3VudD0wLHRoaXMuY2FuY2VsbGVkVGFza3M9bmV3IFNldH1zZXRTY3JvbGxUb3AoZSl7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBhZ2luYXRpb24iKTtpZih0aGlzLnNjcm9sbEdvaW5nRG93bj1lPj10aGlzLmxhc3RTY3JvbGxUb3AsdCYmMD09PWUpe2NvbnN0IGU9dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0Q3VycmVudFBhZ2UoKTtlIT09dGhpcy5sYXN0UGFnZSYmKHRoaXMubGFzdFBhZ2U9ZSx0aGlzLnNjcm9sbEdvaW5nRG93bj0hMCl9dGhpcy5sYXN0U2Nyb2xsVG9wPWV9aW5pdCgpe3RoaXMudXNlQW5pbWF0aW9uRnJhbWU9IXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NBbmltYXRpb25GcmFtZSIpfWlzT24oKXtyZXR1cm4gdGhpcy51c2VBbmltYXRpb25GcmFtZX12ZXJpZnlBbmltYXRpb25GcmFtZU9uKGUpeyExPT09dGhpcy51c2VBbmltYXRpb25GcmFtZSYmY29uc29sZS53YXJuKGBBRyBHcmlkOiBBbmltYXRpb25GcmFtZVNlcnZpY2UuJHtlfSBjYWxsZWQgYnV0IGFuaW1hdGlvbiBmcmFtZXMgYXJlIG9mZmApfWNyZWF0ZVRhc2soZSx0LGkpe3RoaXMudmVyaWZ5QW5pbWF0aW9uRnJhbWVPbihpKTtjb25zdCBzPXt0YXNrOmUsaW5kZXg6dCxjcmVhdGVPcmRlcjorK3RoaXMudGFza0NvdW50fTt0aGlzLmFkZFRhc2tUb0xpc3QodGhpc1tpXSxzKSx0aGlzLnNjaGVkdWxlKCl9Y2FuY2VsVGFzayhlKXt0aGlzLmNhbmNlbGxlZFRhc2tzLmFkZChlKX1hZGRUYXNrVG9MaXN0KGUsdCl7ZS5saXN0LnB1c2godCksZS5zb3J0ZWQ9ITF9c29ydFRhc2tMaXN0KGUpe2lmKGUuc29ydGVkKXJldHVybjtjb25zdCB0PXRoaXMuc2Nyb2xsR29pbmdEb3duPzE6LTE7ZS5saXN0LnNvcnQoKGUsaSk9PmUuaW5kZXghPT1pLmluZGV4P3QqKGkuaW5kZXgtZS5pbmRleCk6aS5jcmVhdGVPcmRlci1lLmNyZWF0ZU9yZGVyKSxlLnNvcnRlZD0hMH1hZGREZXN0cm95VGFzayhlKXt0aGlzLnZlcmlmeUFuaW1hdGlvbkZyYW1lT24oImNyZWF0ZVRhc2tzUDMiKSx0aGlzLmRlc3Ryb3lUYXNrcy5wdXNoKGUpLHRoaXMuc2NoZWR1bGUoKX1leGVjdXRlRnJhbWUoZSl7dGhpcy52ZXJpZnlBbmltYXRpb25GcmFtZU9uKCJleGVjdXRlRnJhbWUiKTtjb25zdCB0PXRoaXMuY3JlYXRlVGFza3NQMSxpPXQubGlzdCxzPXRoaXMuY3JlYXRlVGFza3NQMixyPXMubGlzdCxvPXRoaXMuZGVzdHJveVRhc2tzLG49KG5ldyBEYXRlKS5nZXRUaW1lKCk7bGV0IGE9KG5ldyBEYXRlKS5nZXRUaW1lKCktbjtjb25zdCBsPWU8PTAsZD10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKTtmb3IoO2x8fGE8ZTspe2lmKCFkLmdldFNjcm9sbEZlYXR1cmUoKS5zY3JvbGxHcmlkSWZOZWVkZWQoKSl7bGV0IGU7aWYoaS5sZW5ndGgpdGhpcy5zb3J0VGFza0xpc3QodCksZT1pLnBvcCgpLnRhc2s7ZWxzZSBpZihyLmxlbmd0aCl0aGlzLnNvcnRUYXNrTGlzdChzKSxlPXIucG9wKCkudGFzaztlbHNle2lmKCFvLmxlbmd0aCl7dGhpcy5jYW5jZWxsZWRUYXNrcy5jbGVhcigpO2JyZWFrfWU9by5wb3AoKX10aGlzLmNhbmNlbGxlZFRhc2tzLmhhcyhlKXx8ZSgpfWE9KG5ldyBEYXRlKS5nZXRUaW1lKCktbn1pLmxlbmd0aHx8ci5sZW5ndGh8fG8ubGVuZ3RoP3RoaXMucmVxdWVzdEZyYW1lKCk6dGhpcy5zdG9wVGlja2luZygpfXN0b3BUaWNraW5nKCl7dGhpcy50aWNraW5nPSExfWZsdXNoQWxsRnJhbWVzKCl7dGhpcy51c2VBbmltYXRpb25GcmFtZSYmdGhpcy5leGVjdXRlRnJhbWUoLTEpfXNjaGVkdWxlKCl7dGhpcy51c2VBbmltYXRpb25GcmFtZSYmKHRoaXMudGlja2luZ3x8KHRoaXMudGlja2luZz0hMCx0aGlzLnJlcXVlc3RGcmFtZSgpKSl9cmVxdWVzdEZyYW1lKCl7Y29uc3QgZT10aGlzLmV4ZWN1dGVGcmFtZS5iaW5kKHRoaXMsNjApO3RoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGUpfXJlcXVlc3RBbmltYXRpb25GcmFtZShlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFdpbmRvdygpO3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lP3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGUpOnQud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lP3Qud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lKGUpOnQuc2V0VGltZW91dChlLDApfWlzUXVldWVFbXB0eSgpe3JldHVybiF0aGlzLnRpY2tpbmd9ZGVib3VuY2UoZSl7bGV0IHQ9ITE7cmV0dXJuKCk9Pnt0aGlzLmlzT24oKT90fHwodD0hMCx0aGlzLmFkZERlc3Ryb3lUYXNrKCgpPT57dD0hMSxlKCl9KSk6d2luZG93LnNldFRpbWVvdXQoZSwwKX19fTt2YXIgQ2Q7ZmQoW2NlKCJjdHJsc1NlcnZpY2UiKV0sdmQucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksZmQoW2NlKCJwYWdpbmF0aW9uUHJveHkiKV0sdmQucHJvdG90eXBlLCJwYWdpbmF0aW9uUHJveHkiLHZvaWQgMCksZmQoW2FlXSx2ZC5wcm90b3R5cGUsImluaXQiLG51bGwpLHZkPWZkKFtkZSgiYW5pbWF0aW9uRnJhbWVTZXJ2aWNlIildLHZkKSxmdW5jdGlvbihlKXtlLkVWRVJZVEhJTkc9Imdyb3VwIixlLkZJTFRFUj0iZmlsdGVyIixlLlNPUlQ9InNvcnQiLGUuTUFQPSJtYXAiLGUuQUdHUkVHQVRFPSJhZ2dyZWdhdGUiLGUuRklMVEVSX0FHR1JFR0FURVM9ImZpbHRlcl9hZ2dyZWdhdGVzIixlLlBJVk9UPSJwaXZvdCIsZS5OT1RISU5HPSJub3RoaW5nIn0oQ2R8fChDZD17fSkpO3ZhciB5ZD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgU2Q9Y2xhc3MgZXh0ZW5kcyBpdHtwb3N0Q29uc3RydWN0KCl7dGhpcy5pc0NsaWVudFNpZGVSb3dNb2RlbD0iY2xpZW50U2lkZSI9PT10aGlzLnJvd01vZGVsLmdldFR5cGUoKX1leHBhbmRSb3dzKGUpe2lmKCF0aGlzLmlzQ2xpZW50U2lkZVJvd01vZGVsKXJldHVybjtjb25zdCB0PW5ldyBTZXQoZSk7dGhpcy5yb3dNb2RlbC5mb3JFYWNoTm9kZShlPT57ZS5pZCYmdC5oYXMoZS5pZCkmJihlLmV4cGFuZGVkPSEwKX0pLHRoaXMub25Hcm91cEV4cGFuZGVkT3JDb2xsYXBzZWQoKX1nZXRFeHBhbmRlZFJvd3MoKXtjb25zdCBlPVtdO3JldHVybiB0aGlzLnJvd01vZGVsLmZvckVhY2hOb2RlKCh7ZXhwYW5kZWQ6dCxpZDppfSk9Pnt0JiZpJiZlLnB1c2goaSl9KSxlfWV4cGFuZEFsbChlKXt0aGlzLmlzQ2xpZW50U2lkZVJvd01vZGVsJiZ0aGlzLnJvd01vZGVsLmV4cGFuZE9yQ29sbGFwc2VBbGwoZSl9c2V0Um93Tm9kZUV4cGFuZGVkKGUsdCxpKXtlJiYoaSYmZS5wYXJlbnQmJi0xIT09ZS5wYXJlbnQubGV2ZWwmJnRoaXMuc2V0Um93Tm9kZUV4cGFuZGVkKGUucGFyZW50LHQsaSksZS5zZXRFeHBhbmRlZCh0KSl9b25Hcm91cEV4cGFuZGVkT3JDb2xsYXBzZWQoKXt0aGlzLmlzQ2xpZW50U2lkZVJvd01vZGVsJiZ0aGlzLnJvd01vZGVsLnJlZnJlc2hNb2RlbCh7c3RlcDpDZC5NQVB9KX19O3lkKFtjZSgicm93TW9kZWwiKV0sU2QucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSx5ZChbYWVdLFNkLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksU2Q9eWQoW2RlKCJleHBhbnNpb25TZXJ2aWNlIildLFNkKTt2YXIgd2Q9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IGJkPWNsYXNzIGV4dGVuZHMgaXR7cG9zdENvbnN0cnVjdCgpe3ZhciBlO3RoaXMuYWN0aXZlTWVudUZhY3Rvcnk9bnVsbCE9PShlPXRoaXMuZW50ZXJwcmlzZU1lbnVGYWN0b3J5KSYmdm9pZCAwIT09ZT9lOnRoaXMuZmlsdGVyTWVudUZhY3Rvcnl9c2hvd0NvbHVtbk1lbnUoZSl7dGhpcy5zaG93Q29sdW1uTWVudUNvbW1vbih0aGlzLmFjdGl2ZU1lbnVGYWN0b3J5LGUsImNvbHVtbk1lbnUiKX1zaG93RmlsdGVyTWVudShlKXtjb25zdCB0PXRoaXMuZW50ZXJwcmlzZU1lbnVGYWN0b3J5JiZ0aGlzLmlzTGVnYWN5TWVudUVuYWJsZWQoKT90aGlzLmVudGVycHJpc2VNZW51RmFjdG9yeTp0aGlzLmZpbHRlck1lbnVGYWN0b3J5O3RoaXMuc2hvd0NvbHVtbk1lbnVDb21tb24odCxlLGUuY29udGFpbmVyVHlwZSwhMCl9c2hvd0hlYWRlckNvbnRleHRNZW51KGUsdCxpKXt0aGlzLmFjdGl2ZU1lbnVGYWN0b3J5LnNob3dNZW51QWZ0ZXJDb250ZXh0TWVudUV2ZW50KGUsdCxpKX1zaG93Q29udGV4dE1lbnUoZSl7dmFyIHQsaSxzO2NvbnN0e2NvbHVtbjpyLGFuY2hvclRvRWxlbWVudDpvLHJvd05vZGU6bix2YWx1ZTphfT1lO251bGw9PT0odD10aGlzLmNvbnRleHRNZW51RmFjdG9yeSl8fHZvaWQgMD09PXR8fHQub25Db250ZXh0TWVudShudWxsIT09KGk9ZS5tb3VzZUV2ZW50KSYmdm9pZCAwIT09aT9pOm51bGwsbnVsbCE9PShzPWUudG91Y2hFdmVudCkmJnZvaWQgMCE9PXM/czpudWxsLG51bGwhPW4/bjpudWxsLG51bGwhPXI/cjpudWxsLGEsbyl9c2hvd0NvbHVtbkNob29zZXIoZSl7dmFyIHQ7bnVsbD09PSh0PXRoaXMuY29sdW1uQ2hvb3NlckZhY3RvcnkpfHx2b2lkIDA9PT10fHx0LnNob3dDb2x1bW5DaG9vc2VyKGUpfWhpZGVQb3B1cE1lbnUoKXt2YXIgZTtudWxsPT09KGU9dGhpcy5jb250ZXh0TWVudUZhY3RvcnkpfHx2b2lkIDA9PT1lfHxlLmhpZGVBY3RpdmVNZW51KCksdGhpcy5hY3RpdmVNZW51RmFjdG9yeS5oaWRlQWN0aXZlTWVudSgpfWhpZGVDb2x1bW5DaG9vc2VyKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuY29sdW1uQ2hvb3NlckZhY3RvcnkpfHx2b2lkIDA9PT1lfHxlLmhpZGVBY3RpdmVDb2x1bW5DaG9vc2VyKCl9aXNDb2x1bW5NZW51SW5IZWFkZXJFbmFibGVkKGUpe2NvbnN0e3N1cHByZXNzTWVudTp0LHN1cHByZXNzSGVhZGVyTWVudUJ1dHRvbjppfT1lLmdldENvbERlZigpO3JldHVybiEobnVsbCE9aT9pOnQpJiZ0aGlzLmFjdGl2ZU1lbnVGYWN0b3J5LmlzTWVudUVuYWJsZWQoZSkmJih0aGlzLmlzTGVnYWN5TWVudUVuYWJsZWQoKXx8ISF0aGlzLmVudGVycHJpc2VNZW51RmFjdG9yeSl9aXNGaWx0ZXJNZW51SW5IZWFkZXJFbmFibGVkKGUpe3JldHVybiFlLmdldENvbERlZigpLnN1cHByZXNzSGVhZGVyRmlsdGVyQnV0dG9uJiZ0aGlzLmZpbHRlck1hbmFnZXIuaXNGaWx0ZXJBbGxvd2VkKGUpfWlzSGVhZGVyQ29udGV4dE1lbnVFbmFibGVkKGUpe3JldHVybiEobnVsbD09ZT92b2lkIDA6ZS5nZXRDb2xEZWYoKS5zdXBwcmVzc0hlYWRlckNvbnRleHRNZW51KSYmIm5ldyI9PT10aGlzLmdldENvbHVtbk1lbnVUeXBlKCl9aXNIZWFkZXJNZW51QnV0dG9uQWx3YXlzU2hvd0VuYWJsZWQoKXtyZXR1cm4gdGhpcy5pc1N1cHByZXNzTWVudUhpZGUoKX1pc0hlYWRlck1lbnVCdXR0b25FbmFibGVkKCl7Y29uc3QgZT0hdGhpcy5pc1N1cHByZXNzTWVudUhpZGUoKTtyZXR1cm4hKE1pKCkmJmUpfWlzSGVhZGVyRmlsdGVyQnV0dG9uRW5hYmxlZChlKXtyZXR1cm4gdGhpcy5pc0ZpbHRlck1lbnVJbkhlYWRlckVuYWJsZWQoZSkmJiF0aGlzLmlzTGVnYWN5TWVudUVuYWJsZWQoKSYmIXRoaXMuaXNGbG9hdGluZ0ZpbHRlckJ1dHRvbkRpc3BsYXllZChlKX1pc0ZpbHRlck1lbnVJdGVtRW5hYmxlZChlKXtyZXR1cm4gdGhpcy5maWx0ZXJNYW5hZ2VyLmlzRmlsdGVyQWxsb3dlZChlKSYmIXRoaXMuaXNMZWdhY3lNZW51RW5hYmxlZCgpJiYhdGhpcy5pc0ZpbHRlck1lbnVJbkhlYWRlckVuYWJsZWQoZSkmJiF0aGlzLmlzRmxvYXRpbmdGaWx0ZXJCdXR0b25EaXNwbGF5ZWQoZSl9aXNDb2x1bW5NZW51QW5jaG9yaW5nRW5hYmxlZCgpe3JldHVybiF0aGlzLmlzTGVnYWN5TWVudUVuYWJsZWQoKX1hcmVBZGRpdGlvbmFsQ29sdW1uTWVudUl0ZW1zRW5hYmxlZCgpe3JldHVybiJuZXciPT09dGhpcy5nZXRDb2x1bW5NZW51VHlwZSgpfWlzTGVnYWN5TWVudUVuYWJsZWQoKXtyZXR1cm4ibGVnYWN5Ij09PXRoaXMuZ2V0Q29sdW1uTWVudVR5cGUoKX1pc0Zsb2F0aW5nRmlsdGVyQnV0dG9uRW5hYmxlZChlKXt2YXIgdDtjb25zdCBpPWUuZ2V0Q29sRGVmKCkscz1udWxsPT09KHQ9aS5mbG9hdGluZ0ZpbHRlckNvbXBvbmVudFBhcmFtcyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc3VwcHJlc3NGaWx0ZXJCdXR0b247cmV0dXJuIG51bGwhPXMmJmooIkFzIG9mIHYzMS4xLCAnY29sRGVmLmZsb2F0aW5nRmlsdGVyQ29tcG9uZW50UGFyYW1zLnN1cHByZXNzRmlsdGVyQnV0dG9uJyBpcyBkZXByZWNhdGVkLiBVc2UgJ2NvbERlZi5zdXBwcmVzc0Zsb2F0aW5nRmlsdGVyQnV0dG9uJyBpbnN0ZWFkLiIpLG51bGw9PWkuc3VwcHJlc3NGbG9hdGluZ0ZpbHRlckJ1dHRvbj8hczohaS5zdXBwcmVzc0Zsb2F0aW5nRmlsdGVyQnV0dG9ufWdldENvbHVtbk1lbnVUeXBlKCl7dmFyIGU7cmV0dXJuIG51bGwhPT0oZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNvbHVtbk1lbnUiKSkmJnZvaWQgMCE9PWU/ZToibGVnYWN5In1pc0Zsb2F0aW5nRmlsdGVyQnV0dG9uRGlzcGxheWVkKGUpe3JldHVybiEhZS5nZXRDb2xEZWYoKS5mbG9hdGluZ0ZpbHRlciYmdGhpcy5pc0Zsb2F0aW5nRmlsdGVyQnV0dG9uRW5hYmxlZChlKX1pc1N1cHByZXNzTWVudUhpZGUoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NNZW51SGlkZSIpO3JldHVybiB0aGlzLmlzTGVnYWN5TWVudUVuYWJsZWQoKT9lOiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5leGlzdHMoInN1cHByZXNzTWVudUhpZGUiKXx8ZX1zaG93Q29sdW1uTWVudUNvbW1vbihlLHQsaSxzKXtjb25zdHtjb2x1bW46cixwb3NpdGlvbkJ5Om99PXQ7aWYoImJ1dHRvbiI9PT1vKXtjb25zdHtidXR0b25FbGVtZW50Om99PXQ7ZS5zaG93TWVudUFmdGVyQnV0dG9uQ2xpY2socixvLGkscyl9ZWxzZSBpZigibW91c2UiPT09byl7Y29uc3R7bW91c2VFdmVudDpvfT10O2Uuc2hvd01lbnVBZnRlck1vdXNlRXZlbnQocixvLGkscyl9ZWxzZSByJiYodGhpcy5jdHJsc1NlcnZpY2UuZ2V0R3JpZEJvZHlDdHJsKCkuZ2V0U2Nyb2xsRmVhdHVyZSgpLmVuc3VyZUNvbHVtblZpc2libGUociwiYXV0byIpLHRoaXMuYW5pbWF0aW9uRnJhbWVTZXJ2aWNlLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKT0+e2NvbnN0IHQ9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0SGVhZGVyUm93Q29udGFpbmVyQ3RybChyLmdldFBpbm5lZCgpKS5nZXRIZWFkZXJDdHJsRm9yQ29sdW1uKHIpO2Uuc2hvd01lbnVBZnRlckJ1dHRvbkNsaWNrKHIsdC5nZXRBbmNob3JFbGVtZW50Rm9yTWVudShzKSxpLCEwKX0pKX19O3dkKFtoZSgiZW50ZXJwcmlzZU1lbnVGYWN0b3J5IildLGJkLnByb3RvdHlwZSwiZW50ZXJwcmlzZU1lbnVGYWN0b3J5Iix2b2lkIDApLHdkKFtjZSgiZmlsdGVyTWVudUZhY3RvcnkiKV0sYmQucHJvdG90eXBlLCJmaWx0ZXJNZW51RmFjdG9yeSIsdm9pZCAwKSx3ZChbaGUoImNvbnRleHRNZW51RmFjdG9yeSIpXSxiZC5wcm90b3R5cGUsImNvbnRleHRNZW51RmFjdG9yeSIsdm9pZCAwKSx3ZChbY2UoImN0cmxzU2VydmljZSIpXSxiZC5wcm90b3R5cGUsImN0cmxzU2VydmljZSIsdm9pZCAwKSx3ZChbY2UoImFuaW1hdGlvbkZyYW1lU2VydmljZSIpXSxiZC5wcm90b3R5cGUsImFuaW1hdGlvbkZyYW1lU2VydmljZSIsdm9pZCAwKSx3ZChbaGUoImNvbHVtbkNob29zZXJGYWN0b3J5IildLGJkLnByb3RvdHlwZSwiY29sdW1uQ2hvb3NlckZhY3RvcnkiLHZvaWQgMCksd2QoW2NlKCJmaWx0ZXJNYW5hZ2VyIildLGJkLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSx3ZChbYWVdLGJkLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksYmQ9d2QoW2RlKCJtZW51U2VydmljZSIpXSxiZCk7dmFyIEVkPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBSZD1jbGFzcyBleHRlbmRzIGl0e3Bvc3RDb25zdHJ1Y3QoKXt0aGlzLmN0cmxzU2VydmljZS53aGVuUmVhZHkoZT0+e3RoaXMuY2VudGVyUm93Q29udGFpbmVyQ3RybD1lLmNlbnRlclJvd0NvbnRhaW5lckN0cmx9KX1nZXRQcmVmZXJyZWRXaWR0aEZvckNvbHVtbihlLHQpe2NvbnN0IGk9dGhpcy5nZXRIZWFkZXJDZWxsRm9yQ29sdW1uKGUpO2lmKCFpKXJldHVybi0xO2NvbnN0IHM9dGhpcy5yb3dSZW5kZXJlci5nZXRBbGxDZWxsc0ZvckNvbHVtbihlKTtyZXR1cm4gdHx8cy5wdXNoKGkpLHRoaXMuYWRkRWxlbWVudHNUb0NvbnRhaW5lckFuZEdldFdpZHRoKHMpfWdldFByZWZlcnJlZFdpZHRoRm9yQ29sdW1uR3JvdXAoZSl7Y29uc3QgdD10aGlzLmdldEhlYWRlckNlbGxGb3JDb2x1bW4oZSk7cmV0dXJuIHQ/dGhpcy5hZGRFbGVtZW50c1RvQ29udGFpbmVyQW5kR2V0V2lkdGgoW3RdKTotMX1hZGRFbGVtZW50c1RvQ29udGFpbmVyQW5kR2V0V2lkdGgoZSl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIik7dC5zdHlsZS5wb3NpdGlvbj0iZml4ZWQiO2NvbnN0IGk9dGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsLmdldENvbnRhaW5lckVsZW1lbnQoKTtlLmZvckVhY2goZT0+dGhpcy5jbG9uZUl0ZW1JbnRvRHVtbXkoZSx0KSksaS5hcHBlbmRDaGlsZCh0KTtjb25zdCBzPXQub2Zmc2V0V2lkdGg7aS5yZW1vdmVDaGlsZCh0KTtyZXR1cm4gcyt0aGlzLmdldEF1dG9TaXplUGFkZGluZygpfWdldEF1dG9TaXplUGFkZGluZygpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImF1dG9TaXplUGFkZGluZyIpfWdldEhlYWRlckNlbGxGb3JDb2x1bW4oZSl7bGV0IHQ9bnVsbDtyZXR1cm4gdGhpcy5jdHJsc1NlcnZpY2UuZ2V0SGVhZGVyUm93Q29udGFpbmVyQ3RybHMoKS5mb3JFYWNoKGk9Pntjb25zdCBzPWkuZ2V0SHRtbEVsZW1lbnRGb3JDb2x1bW5IZWFkZXIoZSk7bnVsbCE9cyYmKHQ9cyl9KSx0fWNsb25lSXRlbUludG9EdW1teShlLHQpe2NvbnN0IGk9ZS5jbG9uZU5vZGUoITApO2kuc3R5bGUud2lkdGg9IiIsaS5zdHlsZS5wb3NpdGlvbj0ic3RhdGljIixpLnN0eWxlLmxlZnQ9IiI7Y29uc3Qgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxyPXMuY2xhc3NMaXN0O1siYWctaGVhZGVyLWNlbGwiLCJhZy1oZWFkZXItZ3JvdXAtY2VsbCJdLnNvbWUoZT0+aS5jbGFzc0xpc3QuY29udGFpbnMoZSkpPyhyLmFkZCgiYWctaGVhZGVyIiwiYWctaGVhZGVyLXJvdyIpLHMuc3R5bGUucG9zaXRpb249InN0YXRpYyIpOnIuYWRkKCJhZy1yb3ciKTtsZXQgbz1lLnBhcmVudEVsZW1lbnQ7Zm9yKDtvOyl7aWYoWyJhZy1oZWFkZXItcm93IiwiYWctcm93Il0uc29tZShlPT5vLmNsYXNzTGlzdC5jb250YWlucyhlKSkpe2ZvcihsZXQgZT0wO2U8by5jbGFzc0xpc3QubGVuZ3RoO2UrKyl7Y29uc3QgdD1vLmNsYXNzTGlzdFtlXTsiYWctcm93LXBvc2l0aW9uLWFic29sdXRlIiE9dCYmci5hZGQodCl9YnJlYWt9bz1vLnBhcmVudEVsZW1lbnR9cy5hcHBlbmRDaGlsZChpKSx0LmFwcGVuZENoaWxkKHMpfX07RWQoW2NlKCJyb3dSZW5kZXJlciIpXSxSZC5wcm90b3R5cGUsInJvd1JlbmRlcmVyIix2b2lkIDApLEVkKFtjZSgiY3RybHNTZXJ2aWNlIildLFJkLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLEVkKFtjZSgicm93Q3NzQ2xhc3NDYWxjdWxhdG9yIildLFJkLnByb3RvdHlwZSwicm93Q3NzQ2xhc3NDYWxjdWxhdG9yIix2b2lkIDApLEVkKFthZV0sUmQucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxSZD1FZChbZGUoImF1dG9XaWR0aENhbGN1bGF0b3IiKV0sUmQpO3ZhciB4ZD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBUZCBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLmNyZWF0ZVJvd0Nvbj1lLHRoaXMuZGVzdHJveVJvd0N0cmxzPXQsdGhpcy5zdGlja3lSb3dDdHJscz1bXSx0aGlzLmNvbnRhaW5lckhlaWdodD0wfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmlzQ2xpZW50U2lkZT0iY2xpZW50U2lkZSI9PT10aGlzLnJvd01vZGVsLmdldFR5cGUoKSx0aGlzLmN0cmxzU2VydmljZS53aGVuUmVhZHkoZT0+e3RoaXMuZ3JpZEJvZHlDdHJsPWUuZ3JpZEJvZHlDdHJsfSl9Z2V0U3RpY2t5Um93Q3RybHMoKXtyZXR1cm4gdGhpcy5zdGlja3lSb3dDdHJsc31jaGVja1N0aWNreVJvd3MoKXtsZXQgZT0wO2lmKCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0dyb3VwUm93c1N0aWNreSgpKXJldHVybiB0aGlzLnJlZnJlc2hOb2Rlc0FuZENvbnRhaW5lckhlaWdodChbXSxlKTtjb25zdCB0PVtdLGk9dGhpcy5yb3dSZW5kZXJlci5nZXRGaXJzdFZpc2libGVWZXJ0aWNhbFBpeGVsKCkscz1zPT57dmFyIHIsbyxuO2xldCBhO2lmKHQucHVzaChzKSx0aGlzLmlzQ2xpZW50U2lkZSl7bGV0IGU9cztmb3IoO2UuaXNFeHBhbmRhYmxlKCkmJmUuZXhwYW5kZWQ7KWlmKGUubWFzdGVyKWU9ZS5kZXRhaWxOb2RlO2Vsc2UgaWYoZS5jaGlsZHJlbkFmdGVyU29ydCl7aWYoMD09PWUuY2hpbGRyZW5BZnRlclNvcnQubGVuZ3RoKWJyZWFrO2U9T2UoZS5jaGlsZHJlbkFmdGVyU29ydCl9YT1lLnJvd1RvcCtlLnJvd0hlaWdodH1lbHNlIGlmKHMubWFzdGVyKWE9cy5kZXRhaWxOb2RlLnJvd1RvcCtzLmRldGFpbE5vZGUucm93SGVpZ2h0O2Vsc2V7Y29uc3QgZT1udWxsPT09KHI9cy5jaGlsZFN0b3JlKXx8dm9pZCAwPT09cj92b2lkIDA6ci5nZXRTdG9yZUJvdW5kcygpO2E9KG51bGwhPT0obz1udWxsPT1lP3ZvaWQgMDplLmhlaWdodFB4KSYmdm9pZCAwIT09bz9vOjApKyhudWxsIT09KG49bnVsbD09ZT92b2lkIDA6ZS50b3BQeCkmJnZvaWQgMCE9PW4/bjowKX1jb25zdCBsPWkrZStzLnJvd0hlaWdodDtzLnN0aWNreVJvd1RvcD1hPGw/ZSsoYS1sKTplLGU9MCx0LmZvckVhY2godD0+e2NvbnN0IGk9dC5zdGlja3lSb3dUb3ArdC5yb3dIZWlnaHQ7ZTxpJiYoZT1pKX0pfTtsZXQgcj0wO2Zvcig7Oyl7Y29uc3Qgbz1pK2Usbj10aGlzLnJvd01vZGVsLmdldFJvd0luZGV4QXRQaXhlbChvKSxhPXRoaXMucm93TW9kZWwuZ2V0Um93KG4pO2lmKG51bGw9PWEpYnJlYWs7aWYoYS5sZXZlbDwwKWJyZWFrO2lmKDEwMD09cisrKWJyZWFrO2NvbnN0IGw9W107bGV0IGQ9YS5wYXJlbnQ7Zm9yKDtkLmxldmVsPj0wOylsLnB1c2goZCksZD1kLnBhcmVudDtjb25zdCBjPWwucmV2ZXJzZSgpLmZpbmQoZT0+dC5pbmRleE9mKGUpPDAmJmUuZGlzcGxheWVkKTtpZihjKXMoYyk7ZWxzZXtpZighKGEuaXNFeHBhbmRhYmxlKCkmJmEuZXhwYW5kZWQmJmEucm93VG9wPG8pKWJyZWFrO3MoYSl9fXJldHVybiB0aGlzLnJlZnJlc2hOb2Rlc0FuZENvbnRhaW5lckhlaWdodCh0LGUpfXJlZnJlc2hTdGlja3lOb2RlKGUpe2NvbnN0IHQ9W107Zm9yKGxldCBpPTA7aTx0aGlzLnN0aWNreVJvd0N0cmxzLmxlbmd0aDtpKyspe2NvbnN0IHM9dGhpcy5zdGlja3lSb3dDdHJsc1tpXS5nZXRSb3dOb2RlKCk7cyE9PWUmJnQucHVzaChzKX10aGlzLnJlZnJlc2hOb2Rlc0FuZENvbnRhaW5lckhlaWdodCh0LHRoaXMuY29udGFpbmVySGVpZ2h0KSYmdGhpcy5jaGVja1N0aWNreVJvd3MoKX1yZWZyZXNoTm9kZXNBbmRDb250YWluZXJIZWlnaHQoZSx0KXtsZXQgaT0hMTtjb25zdCBzPXRoaXMuc3RpY2t5Um93Q3RybHMuZmlsdGVyKHQ9Pi0xPT09ZS5pbmRleE9mKHQuZ2V0Um93Tm9kZSgpKSkscj1lLmZpbHRlcihlPT4tMT09PXRoaXMuc3RpY2t5Um93Q3RybHMuZmluZEluZGV4KHQ9PnQuZ2V0Um93Tm9kZSgpPT09ZSkpOyhzLmxlbmd0aHx8ci5sZW5ndGgpJiYoaT0hMCk7Y29uc3Qgbz17fTtzLmZvckVhY2goZT0+e29bZS5nZXRSb3dOb2RlKCkuaWRdPWUsdGhpcy5zdGlja3lSb3dDdHJscz10aGlzLnN0aWNreVJvd0N0cmxzLmZpbHRlcih0PT50IT09ZSl9KTtmb3IoY29uc3QgZSBvZiBPYmplY3QudmFsdWVzKG8pKWUuZ2V0Um93Tm9kZSgpLnN0aWNreT0hMTt0aGlzLmRlc3Ryb3lSb3dDdHJscyhvLCExKTtjb25zdCBuPXIubWFwKGU9PihlLnN0aWNreT0hMCx0aGlzLmNyZWF0ZVJvd0NvbihlLCExLCExKSkpO3JldHVybiB0aGlzLnN0aWNreVJvd0N0cmxzLnB1c2goLi4ubiksdGhpcy5zdGlja3lSb3dDdHJscy5mb3JFYWNoKGU9PmUuc2V0Um93VG9wKGUuZ2V0Um93Tm9kZSgpLnN0aWNreVJvd1RvcCkpLHRoaXMuc3RpY2t5Um93Q3RybHMuc29ydCgoZSx0KT0+dC5nZXRSb3dOb2RlKCkucm93SW5kZXgtZS5nZXRSb3dOb2RlKCkucm93SW5kZXgpLHRoaXMuY29udGFpbmVySGVpZ2h0IT09dCYmKHRoaXMuY29udGFpbmVySGVpZ2h0PXQsdGhpcy5ncmlkQm9keUN0cmwuc2V0U3RpY2t5VG9wSGVpZ2h0KHQpLGk9ITApLGl9fXhkKFtjZSgicm93TW9kZWwiKV0sVGQucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSx4ZChbY2UoInJvd1JlbmRlcmVyIildLFRkLnByb3RvdHlwZSwicm93UmVuZGVyZXIiLHZvaWQgMCkseGQoW2NlKCJjdHJsc1NlcnZpY2UiKV0sVGQucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCkseGQoW2FlXSxUZC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBEZD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgT2Q9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5kZXN0cm95RnVuY3NGb3JDb2x1bW5MaXN0ZW5lcnM9W10sdGhpcy5yb3dDdHJsc0J5Um93SW5kZXg9e30sdGhpcy56b21iaWVSb3dDdHJscz17fSx0aGlzLmFsbFJvd0N0cmxzPVtdLHRoaXMudG9wUm93Q3RybHM9W10sdGhpcy5ib3R0b21Sb3dDdHJscz1bXSx0aGlzLnJlZnJlc2hJblByb2dyZXNzPSExLHRoaXMuZGF0YUZpcnN0UmVuZGVyZWRGaXJlZD0hMSx0aGlzLnNldHVwUmFuZ2VTZWxlY3Rpb25MaXN0ZW5lcnM9KCk9Pntjb25zdCBlPSgpPT57dGhpcy5nZXRBbGxDZWxsQ3RybHMoKS5mb3JFYWNoKGU9PmUub25SYW5nZVNlbGVjdGlvbkNoYW5nZWQoKSl9LHQ9KCk9Pnt0aGlzLmdldEFsbENlbGxDdHJscygpLmZvckVhY2goZT0+ZS51cGRhdGVSYW5nZUJvcmRlcnNJZlJhbmdlQ291bnQoKSl9LGk9KCk9Pnt0aGlzLmV2ZW50U2VydmljZS5hZGRFdmVudExpc3RlbmVyKGx0LkVWRU5UX1JBTkdFX1NFTEVDVElPTl9DSEFOR0VELGUpLHRoaXMuZXZlbnRTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIobHQuRVZFTlRfQ09MVU1OX01PVkVELHQpLHRoaXMuZXZlbnRTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIobHQuRVZFTlRfQ09MVU1OX1BJTk5FRCx0KSx0aGlzLmV2ZW50U2VydmljZS5hZGRFdmVudExpc3RlbmVyKGx0LkVWRU5UX0NPTFVNTl9WSVNJQkxFLHQpfSxzPSgpPT57dGhpcy5ldmVudFNlcnZpY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihsdC5FVkVOVF9SQU5HRV9TRUxFQ1RJT05fQ0hBTkdFRCxlKSx0aGlzLmV2ZW50U2VydmljZS5yZW1vdmVFdmVudExpc3RlbmVyKGx0LkVWRU5UX0NPTFVNTl9NT1ZFRCx0KSx0aGlzLmV2ZW50U2VydmljZS5yZW1vdmVFdmVudExpc3RlbmVyKGx0LkVWRU5UX0NPTFVNTl9QSU5ORUQsdCksdGhpcy5ldmVudFNlcnZpY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihsdC5FVkVOVF9DT0xVTU5fVklTSUJMRSx0KX07dGhpcy5hZGREZXN0cm95RnVuYygoKT0+cygpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJlbmFibGVSYW5nZVNlbGVjdGlvbiIsZT0+e2UuY3VycmVudFZhbHVlP2koKTpzKCl9KTt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJhbmdlU2VsZWN0aW9uIikmJmkoKX19cG9zdENvbnN0cnVjdCgpe3RoaXMuY3RybHNTZXJ2aWNlLndoZW5SZWFkeSgoKT0+e3RoaXMuZ3JpZEJvZHlDdHJsPXRoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLHRoaXMuaW5pdGlhbGlzZSgpfSl9aW5pdGlhbGlzZSgpe2lmKHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1BBR0lOQVRJT05fQ0hBTkdFRCx0aGlzLm9uUGFnZUxvYWRlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9QSU5ORURfUk9XX0RBVEFfQ0hBTkdFRCx0aGlzLm9uUGlubmVkUm93RGF0YUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRElTUExBWUVEX0NPTFVNTlNfQ0hBTkdFRCx0aGlzLm9uRGlzcGxheWVkQ29sdW1uc0NoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQk9EWV9TQ1JPTEwsdGhpcy5vbkJvZHlTY3JvbGwuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQk9EWV9IRUlHSFRfQ0hBTkdFRCx0aGlzLnJlZHJhdy5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhbImRvbUxheW91dCIsImVtYmVkRnVsbFdpZHRoUm93cyJdLCgpPT50aGlzLm9uRG9tTGF5b3V0Q2hhbmdlZCgpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhbInN1cHByZXNzTWF4UmVuZGVyZWRSb3dSZXN0cmljdGlvbiIsInJvd0J1ZmZlciJdLCgpPT50aGlzLnJlZHJhdygpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhbInN1cHByZXNzQ2VsbEZvY3VzIiwiZ2V0QnVzaW5lc3NLZXlGb3JOb2RlIiwiZnVsbFdpZHRoQ2VsbFJlbmRlcmVyIiwiZnVsbFdpZHRoQ2VsbFJlbmRlcmVyUGFyYW1zIiwicm93U3R5bGUiLCJnZXRSb3dTdHlsZSIsInJvd0NsYXNzIiwiZ2V0Um93Q2xhc3MiLCJyb3dDbGFzc1J1bGVzIiwiZ3JvdXBSb3dSZW5kZXJlciIsImdyb3VwUm93UmVuZGVyZXJQYXJhbXMiLCJsb2FkaW5nQ2VsbFJlbmRlcmVyIiwibG9hZGluZ0NlbGxSZW5kZXJlclBhcmFtcyIsImRldGFpbENlbGxSZW5kZXJlciIsImRldGFpbENlbGxSZW5kZXJlclBhcmFtcyIsImVuYWJsZVJhbmdlU2VsZWN0aW9uIiwiZW5hYmxlQ2VsbFRleHRTZWxlY3Rpb24iXSwoKT0+dGhpcy5yZWRyYXdSb3dzKCkpLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzR3JvdXBSb3dzU3RpY2t5KCkpe2NvbnN0IGU9dGhpcy5yb3dNb2RlbC5nZXRUeXBlKCk7ImNsaWVudFNpZGUiIT09ZSYmInNlcnZlclNpZGUiIT09ZXx8KHRoaXMuc3RpY2t5Um93RmVhdHVyZT10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBUZCh0aGlzLmNyZWF0ZVJvd0Nvbi5iaW5kKHRoaXMpLHRoaXMuZGVzdHJveVJvd0N0cmxzLmJpbmQodGhpcykpKSl9dGhpcy5yZWdpc3RlckNlbGxFdmVudExpc3RlbmVycygpLHRoaXMuaW5pdGlhbGlzZUNhY2hlKCksdGhpcy5wcmludExheW91dD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0RvbUxheW91dCgicHJpbnQiKSx0aGlzLmVtYmVkRnVsbFdpZHRoUm93cz10aGlzLnByaW50TGF5b3V0fHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVtYmVkRnVsbFdpZHRoUm93cyIpLHRoaXMucmVkcmF3QWZ0ZXJNb2RlbFVwZGF0ZSgpfWluaXRpYWxpc2VDYWNoZSgpe2lmKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgia2VlcERldGFpbFJvd3MiKSl7Y29uc3QgZT10aGlzLmdldEtlZXBEZXRhaWxSb3dzQ291bnQoKSx0PW51bGwhPWU/ZTozO3RoaXMuY2FjaGVkUm93Q3RybHM9bmV3IEFkKHQpfX1nZXRLZWVwRGV0YWlsUm93c0NvdW50KCl7cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgia2VlcERldGFpbFJvd3NDb3VudCIpfWdldFN0aWNreVRvcFJvd0N0cmxzKCl7cmV0dXJuIHRoaXMuc3RpY2t5Um93RmVhdHVyZT90aGlzLnN0aWNreVJvd0ZlYXR1cmUuZ2V0U3RpY2t5Um93Q3RybHMoKTpbXX11cGRhdGVBbGxSb3dDdHJscygpe2NvbnN0IGU9Ryh0aGlzLnJvd0N0cmxzQnlSb3dJbmRleCksdD1HKHRoaXMuem9tYmllUm93Q3RybHMpLGk9dGhpcy5jYWNoZWRSb3dDdHJscz90aGlzLmNhY2hlZFJvd0N0cmxzLmdldEVudHJpZXMoKTpbXTt0Lmxlbmd0aD4wfHxpLmxlbmd0aD4wP3RoaXMuYWxsUm93Q3RybHM9Wy4uLmUsLi4udCwuLi5pXTp0aGlzLmFsbFJvd0N0cmxzPWV9b25DZWxsRm9jdXNDaGFuZ2VkKGUpe3RoaXMuZ2V0QWxsQ2VsbEN0cmxzKCkuZm9yRWFjaCh0PT50Lm9uQ2VsbEZvY3VzZWQoZSkpLHRoaXMuZ2V0RnVsbFdpZHRoUm93Q3RybHMoKS5mb3JFYWNoKHQ9PnQub25GdWxsV2lkdGhSb3dGb2N1c2VkKGUpKX1yZWdpc3RlckNlbGxFdmVudExpc3RlbmVycygpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NFTExfRk9DVVNFRCxlPT57dGhpcy5vbkNlbGxGb2N1c0NoYW5nZWQoZSl9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DRUxMX0ZPQ1VTX0NMRUFSRUQsKCk9Pnt0aGlzLm9uQ2VsbEZvY3VzQ2hhbmdlZCgpfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRkxBU0hfQ0VMTFMsZT0+e3RoaXMuZ2V0QWxsQ2VsbEN0cmxzKCkuZm9yRWFjaCh0PT50Lm9uRmxhc2hDZWxscyhlKSl9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fSE9WRVJfQ0hBTkdFRCwoKT0+e3RoaXMuZ2V0QWxsQ2VsbEN0cmxzKCkuZm9yRWFjaChlPT5lLm9uQ29sdW1uSG92ZXIoKSl9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ESVNQTEFZRURfQ09MVU1OU19DSEFOR0VELCgpPT57dGhpcy5nZXRBbGxDZWxsQ3RybHMoKS5mb3JFYWNoKGU9PmUub25EaXNwbGF5ZWRDb2x1bW5zQ2hhbmdlZCgpKX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0RJU1BMQVlFRF9DT0xVTU5TX1dJRFRIX0NIQU5HRUQsKCk9Pnt0aGlzLnByaW50TGF5b3V0JiZ0aGlzLmdldEFsbENlbGxDdHJscygpLmZvckVhY2goZT0+ZS5vbkxlZnRDaGFuZ2VkKCkpfSksdGhpcy5zZXR1cFJhbmdlU2VsZWN0aW9uTGlzdGVuZXJzKCksdGhpcy5yZWZyZXNoTGlzdGVuZXJzVG9Db2x1bW5zRm9yQ2VsbENvbXBzKCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfR1JJRF9DT0xVTU5TX0NIQU5HRUQsdGhpcy5yZWZyZXNoTGlzdGVuZXJzVG9Db2x1bW5zRm9yQ2VsbENvbXBzLmJpbmQodGhpcykpLHRoaXMuYWRkRGVzdHJveUZ1bmModGhpcy5yZW1vdmVHcmlkQ29sdW1uTGlzdGVuZXJzLmJpbmQodGhpcykpfXJlbW92ZUdyaWRDb2x1bW5MaXN0ZW5lcnMoKXt0aGlzLmRlc3Ryb3lGdW5jc0ZvckNvbHVtbkxpc3RlbmVycy5mb3JFYWNoKGU9PmUoKSksdGhpcy5kZXN0cm95RnVuY3NGb3JDb2x1bW5MaXN0ZW5lcnMubGVuZ3RoPTB9cmVmcmVzaExpc3RlbmVyc1RvQ29sdW1uc0ZvckNlbGxDb21wcygpe3RoaXMucmVtb3ZlR3JpZENvbHVtbkxpc3RlbmVycygpO3RoaXMuY29sdW1uTW9kZWwuZ2V0QWxsR3JpZENvbHVtbnMoKS5mb3JFYWNoKGU9Pntjb25zdCB0PXQ9Pnt0aGlzLmdldEFsbENlbGxDdHJscygpLmZvckVhY2goaT0+e2kuZ2V0Q29sdW1uKCk9PT1lJiZ0KGkpfSl9LGk9KCk9Pnt0KGU9PmUub25MZWZ0Q2hhbmdlZCgpKX0scz0oKT0+e3QoZT0+ZS5vbldpZHRoQ2hhbmdlZCgpKX0scj0oKT0+e3QoZT0+ZS5vbkZpcnN0UmlnaHRQaW5uZWRDaGFuZ2VkKCkpfSxvPSgpPT57dChlPT5lLm9uTGFzdExlZnRQaW5uZWRDaGFuZ2VkKCkpfSxuPSgpPT57dChlPT5lLm9uQ29sRGVmQ2hhbmdlZCgpKX07ZS5hZGRFdmVudExpc3RlbmVyKCJsZWZ0Q2hhbmdlZCIsaSksZS5hZGRFdmVudExpc3RlbmVyKCJ3aWR0aENoYW5nZWQiLHMpLGUuYWRkRXZlbnRMaXN0ZW5lcigiZmlyc3RSaWdodFBpbm5lZENoYW5nZWQiLHIpLGUuYWRkRXZlbnRMaXN0ZW5lcigibGFzdExlZnRQaW5uZWRDaGFuZ2VkIixvKSxlLmFkZEV2ZW50TGlzdGVuZXIoImNvbERlZkNoYW5nZWQiLG4pLHRoaXMuZGVzdHJveUZ1bmNzRm9yQ29sdW1uTGlzdGVuZXJzLnB1c2goKCk9PntlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxlZnRDaGFuZ2VkIixpKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIndpZHRoQ2hhbmdlZCIscyksZS5yZW1vdmVFdmVudExpc3RlbmVyKCJmaXJzdFJpZ2h0UGlubmVkQ2hhbmdlZCIsciksZS5yZW1vdmVFdmVudExpc3RlbmVyKCJsYXN0TGVmdFBpbm5lZENoYW5nZWQiLG8pLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY29sRGVmQ2hhbmdlZCIsbil9KX0pfW9uRG9tTGF5b3V0Q2hhbmdlZCgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNEb21MYXlvdXQoInByaW50IiksdD1lfHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVtYmVkRnVsbFdpZHRoUm93cyIpLGk9dCE9PXRoaXMuZW1iZWRGdWxsV2lkdGhSb3dzfHx0aGlzLnByaW50TGF5b3V0IT09ZTt0aGlzLnByaW50TGF5b3V0PWUsdGhpcy5lbWJlZEZ1bGxXaWR0aFJvd3M9dCxpJiZ0aGlzLnJlZHJhd0FmdGVyTW9kZWxVcGRhdGUoe2RvbUxheW91dENoYW5nZWQ6ITB9KX1kYXRhc291cmNlQ2hhbmdlZCgpe3RoaXMuZmlyc3RSZW5kZXJlZFJvdz0wLHRoaXMubGFzdFJlbmRlcmVkUm93PS0xO2NvbnN0IGU9T2JqZWN0LmtleXModGhpcy5yb3dDdHJsc0J5Um93SW5kZXgpO3RoaXMucmVtb3ZlUm93Q3RybHMoZSl9b25QYWdlTG9hZGVkKGUpe2NvbnN0IHQ9e3JlY3ljbGVSb3dzOmUua2VlcFJlbmRlcmVkUm93cyxhbmltYXRlOmUuYW5pbWF0ZSxuZXdEYXRhOmUubmV3RGF0YSxuZXdQYWdlOmUubmV3UGFnZSxvbmx5Qm9keTohMH07dGhpcy5yZWRyYXdBZnRlck1vZGVsVXBkYXRlKHQpfWdldEFsbENlbGxzRm9yQ29sdW1uKGUpe2NvbnN0IHQ9W107cmV0dXJuIHRoaXMuZ2V0QWxsUm93Q3RybHMoKS5mb3JFYWNoKGk9Pntjb25zdCBzPWkuZ2V0Q2VsbEVsZW1lbnQoZSk7cyYmdC5wdXNoKHMpfSksdH1yZWZyZXNoRmxvYXRpbmdSb3dDb21wcygpe3RoaXMucmVmcmVzaEZsb2F0aW5nUm93cyh0aGlzLnRvcFJvd0N0cmxzLHRoaXMucGlubmVkUm93TW9kZWwuZ2V0UGlubmVkVG9wUm93RGF0YSgpKSx0aGlzLnJlZnJlc2hGbG9hdGluZ1Jvd3ModGhpcy5ib3R0b21Sb3dDdHJscyx0aGlzLnBpbm5lZFJvd01vZGVsLmdldFBpbm5lZEJvdHRvbVJvd0RhdGEoKSl9Z2V0VG9wUm93Q3RybHMoKXtyZXR1cm4gdGhpcy50b3BSb3dDdHJsc31nZXRDZW50cmVSb3dDdHJscygpe3JldHVybiB0aGlzLmFsbFJvd0N0cmxzfWdldEJvdHRvbVJvd0N0cmxzKCl7cmV0dXJuIHRoaXMuYm90dG9tUm93Q3RybHN9cmVmcmVzaEZsb2F0aW5nUm93cyhlLHQpe2UuZm9yRWFjaChlPT57ZS5kZXN0cm95Rmlyc3RQYXNzKCksZS5kZXN0cm95U2Vjb25kUGFzcygpfSksZS5sZW5ndGg9MCx0JiZ0LmZvckVhY2godD0+e2NvbnN0IGk9bmV3IE9hKHQsdGhpcy5iZWFucywhMSwhMSx0aGlzLnByaW50TGF5b3V0KTtlLnB1c2goaSl9KX1vblBpbm5lZFJvd0RhdGFDaGFuZ2VkKCl7dGhpcy5yZWRyYXdBZnRlck1vZGVsVXBkYXRlKHtyZWN5Y2xlUm93czohMH0pfXJlZHJhd1JvdyhlLHQ9ITEpe3ZhciBpO2lmKGUuc3RpY2t5KXRoaXMuc3RpY2t5Um93RmVhdHVyZS5yZWZyZXNoU3RpY2t5Tm9kZShlKTtlbHNle2lmKG51bGw9PT0oaT10aGlzLmNhY2hlZFJvd0N0cmxzKXx8dm9pZCAwPT09aT92b2lkIDA6aS5oYXMoZSkpcmV0dXJuIHZvaWQgdGhpcy5jYWNoZWRSb3dDdHJscy5yZW1vdmVSb3coZSk7e2NvbnN0IHQ9dD0+e2NvbnN0IGk9dFtlLnJvd0luZGV4XTtpJiZpLmdldFJvd05vZGUoKT09PWUmJihpLmRlc3Ryb3lGaXJzdFBhc3MoKSxpLmRlc3Ryb3lTZWNvbmRQYXNzKCksdFtlLnJvd0luZGV4XT10aGlzLmNyZWF0ZVJvd0NvbihlLCExLCExKSl9O3N3aXRjaChlLnJvd1Bpbm5lZCl7Y2FzZSJ0b3AiOnQodGhpcy50b3BSb3dDdHJscyk7YnJlYWs7Y2FzZSJib3R0b20iOnQodGhpcy5ib3R0b21Sb3dDdHJscyk7YnJlYWs7ZGVmYXVsdDp0KHRoaXMucm93Q3RybHNCeVJvd0luZGV4KSx0aGlzLnVwZGF0ZUFsbFJvd0N0cmxzKCl9fX10fHx0aGlzLmRpc3BhdGNoRGlzcGxheWVkUm93c0NoYW5nZWQoITEpfXJlZHJhd1Jvd3MoZSl7aWYobnVsbCE9ZSlyZXR1cm4gbnVsbD09ZXx8ZS5mb3JFYWNoKGU9PnRoaXMucmVkcmF3Um93KGUsITApKSx2b2lkIHRoaXMuZGlzcGF0Y2hEaXNwbGF5ZWRSb3dzQ2hhbmdlZCghMSk7dGhpcy5yZWRyYXdBZnRlck1vZGVsVXBkYXRlKCl9Z2V0Q2VsbFRvUmVzdG9yZUZvY3VzVG9BZnRlclJlZnJlc2goZSl7Y29uc3QgdD0obnVsbD09ZT92b2lkIDA6ZS5zdXBwcmVzc0tlZXBGb2N1cyk/bnVsbDp0aGlzLmZvY3VzU2VydmljZS5nZXRGb2N1c0NlbGxUb1VzZUFmdGVyUmVmcmVzaCgpO2lmKG51bGw9PXQpcmV0dXJuIG51bGw7Y29uc3QgaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb2N1bWVudCgpLmFjdGl2ZUVsZW1lbnQscz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb21EYXRhKGkseGEuRE9NX0RBVEFfS0VZX0NFTExfQ1RSTCkscj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb21EYXRhKGksT2EuRE9NX0RBVEFfS0VZX1JPV19DVFJMKTtyZXR1cm4gc3x8cj90Om51bGx9cmVkcmF3QWZ0ZXJNb2RlbFVwZGF0ZShlPXt9KXt0aGlzLmdldExvY2tPblJlZnJlc2goKTtjb25zdCB0PXRoaXMuZ2V0Q2VsbFRvUmVzdG9yZUZvY3VzVG9BZnRlclJlZnJlc2goZSk7dGhpcy51cGRhdGVDb250YWluZXJIZWlnaHRzKCksdGhpcy5zY3JvbGxUb1RvcElmTmV3RGF0YShlKTtjb25zdCBpPSFlLmRvbUxheW91dENoYW5nZWQmJiEhZS5yZWN5Y2xlUm93cyxzPWUuYW5pbWF0ZSYmdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNBbmltYXRlUm93cygpLHI9aT90aGlzLmdldFJvd3NUb1JlY3ljbGUoKTpudWxsO2l8fHRoaXMucmVtb3ZlQWxsUm93Q29tcHMoKSx0aGlzLndvcmtPdXRGaXJzdEFuZExhc3RSb3dzVG9SZW5kZXIoKSx0aGlzLnN0aWNreVJvd0ZlYXR1cmUmJnRoaXMuc3RpY2t5Um93RmVhdHVyZS5jaGVja1N0aWNreVJvd3MoKSx0aGlzLnJlY3ljbGVSb3dzKHIscyksdGhpcy5ncmlkQm9keUN0cmwudXBkYXRlUm93Q291bnQoKSxlLm9ubHlCb2R5fHx0aGlzLnJlZnJlc2hGbG9hdGluZ1Jvd0NvbXBzKCksdGhpcy5kaXNwYXRjaERpc3BsYXllZFJvd3NDaGFuZ2VkKCksbnVsbCE9dCYmdGhpcy5yZXN0b3JlRm9jdXNlZENlbGwodCksdGhpcy5yZWxlYXNlTG9ja09uUmVmcmVzaCgpfXNjcm9sbFRvVG9wSWZOZXdEYXRhKGUpe2NvbnN0IHQ9ZS5uZXdEYXRhfHxlLm5ld1BhZ2UsaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzU2Nyb2xsT25OZXdEYXRhIik7dCYmIWkmJnRoaXMuZ3JpZEJvZHlDdHJsLmdldFNjcm9sbEZlYXR1cmUoKS5zY3JvbGxUb1RvcCgpfXVwZGF0ZUNvbnRhaW5lckhlaWdodHMoKXtpZih0aGlzLnByaW50TGF5b3V0KXJldHVybiB2b2lkIHRoaXMucm93Q29udGFpbmVySGVpZ2h0U2VydmljZS5zZXRNb2RlbEhlaWdodChudWxsKTtsZXQgZT10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRDdXJyZW50UGFnZUhlaWdodCgpOzA9PT1lJiYoZT0xKSx0aGlzLnJvd0NvbnRhaW5lckhlaWdodFNlcnZpY2Uuc2V0TW9kZWxIZWlnaHQoZSl9Z2V0TG9ja09uUmVmcmVzaCgpe2lmKHRoaXMucmVmcmVzaEluUHJvZ3Jlc3MpdGhyb3cgbmV3IEVycm9yKCJBRyBHcmlkOiBjYW5ub3QgZ2V0IGdyaWQgdG8gZHJhdyByb3dzIHdoZW4gaXQgaXMgaW4gdGhlIG1pZGRsZSBvZiBkcmF3aW5nIHJvd3MuIFlvdXIgY29kZSBwcm9iYWJseSBjYWxsZWQgYSBncmlkIEFQSSBtZXRob2Qgd2hpbGUgdGhlIGdyaWQgd2FzIGluIHRoZSByZW5kZXIgc3RhZ2UuIFRvIG92ZXJjb21lIHRoaXMsIHB1dCB0aGUgQVBJIGNhbGwgaW50byBhIHRpbWVvdXQsIGUuZy4gaW5zdGVhZCBvZiBhcGkucmVkcmF3Um93cygpLCBjYWxsIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGFwaS5yZWRyYXdSb3dzKCk7IH0sIDApLiBUbyBzZWUgd2hhdCBwYXJ0IG9mIHlvdXIgY29kZSB0aGF0IGNhdXNlZCB0aGUgcmVmcmVzaCBjaGVjayB0aGlzIHN0YWNrdHJhY2UuIik7dGhpcy5yZWZyZXNoSW5Qcm9ncmVzcz0hMH1yZWxlYXNlTG9ja09uUmVmcmVzaCgpe3RoaXMucmVmcmVzaEluUHJvZ3Jlc3M9ITF9aXNSZWZyZXNoSW5Qcm9ncmVzcygpe3JldHVybiB0aGlzLnJlZnJlc2hJblByb2dyZXNzfXJlc3RvcmVGb2N1c2VkQ2VsbChlKXtlJiYodGhpcy5mb2N1c1NlcnZpY2Uuc2V0UmVzdG9yZUZvY3VzZWRDZWxsKGUpLHRoaXMub25DZWxsRm9jdXNDaGFuZ2VkKHRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3Jvd0luZGV4OmUucm93SW5kZXgsY29sdW1uOmUuY29sdW1uLHJvd1Bpbm5lZDplLnJvd1Bpbm5lZCxmb3JjZUJyb3dzZXJGb2N1czohMCxwcmV2ZW50U2Nyb2xsT25Ccm93c2VyRm9jdXM6ITAsdHlwZToibW9jayJ9KSkpfXN0b3BFZGl0aW5nKGU9ITEpe3RoaXMuZ2V0QWxsUm93Q3RybHMoKS5mb3JFYWNoKHQ9Pnt0LnN0b3BFZGl0aW5nKGUpfSl9Z2V0QWxsQ2VsbEN0cmxzKCl7Y29uc3QgZT1bXSx0PXRoaXMuZ2V0QWxsUm93Q3RybHMoKSxpPXQubGVuZ3RoO2ZvcihsZXQgcz0wO3M8aTtzKyspe2NvbnN0IGk9dFtzXS5nZXRBbGxDZWxsQ3RybHMoKSxyPWkubGVuZ3RoO2ZvcihsZXQgdD0wO3Q8cjt0KyspZS5wdXNoKGlbdF0pfXJldHVybiBlfWdldEFsbFJvd0N0cmxzKCl7Y29uc3QgZT10aGlzLnN0aWNreVJvd0ZlYXR1cmUmJnRoaXMuc3RpY2t5Um93RmVhdHVyZS5nZXRTdGlja3lSb3dDdHJscygpfHxbXSx0PVsuLi50aGlzLnRvcFJvd0N0cmxzLC4uLnRoaXMuYm90dG9tUm93Q3RybHMsLi4uZV07Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LmtleXModGhpcy5yb3dDdHJsc0J5Um93SW5kZXgpKXQucHVzaCh0aGlzLnJvd0N0cmxzQnlSb3dJbmRleFtlXSk7cmV0dXJuIHR9YWRkUmVuZGVyZWRSb3dMaXN0ZW5lcihlLHQsaSl7Y29uc3Qgcz10aGlzLnJvd0N0cmxzQnlSb3dJbmRleFt0XTtzJiZzLmFkZEV2ZW50TGlzdGVuZXIoZSxpKX1mbGFzaENlbGxzKGU9e30pe3RoaXMuZ2V0Q2VsbEN0cmxzKGUucm93Tm9kZXMsZS5jb2x1bW5zKS5mb3JFYWNoKHQ9PnQuZmxhc2hDZWxsKGUpKX1yZWZyZXNoQ2VsbHMoZT17fSl7Y29uc3QgdD17Zm9yY2VSZWZyZXNoOmUuZm9yY2UsbmV3RGF0YTohMSxzdXBwcmVzc0ZsYXNoOmUuc3VwcHJlc3NGbGFzaH07dGhpcy5nZXRDZWxsQ3RybHMoZS5yb3dOb2RlcyxlLmNvbHVtbnMpLmZvckVhY2goZT0+ZS5yZWZyZXNoT3JEZXN0cm95Q2VsbCh0KSksZS5yb3dOb2RlcyYmKHRoaXMuZ2V0Um93Q3RybHMoZS5yb3dOb2RlcykuZm9yRWFjaChlPT57aWYoIWUuaXNGdWxsV2lkdGgoKSlyZXR1cm47ZS5yZWZyZXNoRnVsbFdpZHRoKCl8fHRoaXMucmVkcmF3Um93KGUuZ2V0Um93Tm9kZSgpLCEwKX0pLHRoaXMuZGlzcGF0Y2hEaXNwbGF5ZWRSb3dzQ2hhbmdlZCghMSkpfWdldENlbGxSZW5kZXJlckluc3RhbmNlcyhlKXt2YXIgdDtjb25zdCBpPXRoaXMuZ2V0Q2VsbEN0cmxzKGUucm93Tm9kZXMsZS5jb2x1bW5zKS5tYXAoZT0+ZS5nZXRDZWxsUmVuZGVyZXIoKSkuZmlsdGVyKGU9Pm51bGwhPWUpO2lmKG51bGw9PT0odD1lLmNvbHVtbnMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lmxlbmd0aClyZXR1cm4gaTtjb25zdCBzPVtdLHI9dGhpcy5tYXBSb3dOb2RlcyhlLnJvd05vZGVzKTtyZXR1cm4gdGhpcy5nZXRBbGxSb3dDdHJscygpLmZvckVhY2goZT0+e2lmKHImJiF0aGlzLmlzUm93SW5NYXAoZS5nZXRSb3dOb2RlKCkscikpcmV0dXJuO2lmKCFlLmlzRnVsbFdpZHRoKCkpcmV0dXJuO2NvbnN0IHQ9ZS5nZXRGdWxsV2lkdGhDZWxsUmVuZGVyZXJzKCk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspe2NvbnN0IGk9dFtlXTtudWxsIT1pJiZzLnB1c2goaSl9fSksWy4uLnMsLi4uaV19Z2V0Q2VsbEVkaXRvckluc3RhbmNlcyhlKXtjb25zdCB0PVtdO3JldHVybiB0aGlzLmdldENlbGxDdHJscyhlLnJvd05vZGVzLGUuY29sdW1ucykuZm9yRWFjaChlPT57Y29uc3QgaT1lLmdldENlbGxFZGl0b3IoKTtpJiZ0LnB1c2goaSl9KSx0fWdldEVkaXRpbmdDZWxscygpe2NvbnN0IGU9W107cmV0dXJuIHRoaXMuZ2V0QWxsQ2VsbEN0cmxzKCkuZm9yRWFjaCh0PT57aWYodC5pc0VkaXRpbmcoKSl7Y29uc3QgaT10LmdldENlbGxQb3NpdGlvbigpO2UucHVzaChpKX19KSxlfW1hcFJvd05vZGVzKGUpe2lmKCFlKXJldHVybjtjb25zdCB0PXt0b3A6e30sYm90dG9tOnt9LG5vcm1hbDp7fX07cmV0dXJuIGUuZm9yRWFjaChlPT57Y29uc3QgaT1lLmlkOyJ0b3AiPT09ZS5yb3dQaW5uZWQ/dC50b3BbaV09ZToiYm90dG9tIj09PWUucm93UGlubmVkP3QuYm90dG9tW2ldPWU6dC5ub3JtYWxbaV09ZX0pLHR9aXNSb3dJbk1hcChlLHQpe2NvbnN0IGk9ZS5pZCxzPWUucm93UGlubmVkO3JldHVybiJib3R0b20iPT09cz9udWxsIT10LmJvdHRvbVtpXToidG9wIj09PXM/bnVsbCE9dC50b3BbaV06bnVsbCE9dC5ub3JtYWxbaV19Z2V0Um93Q3RybHMoZSl7Y29uc3QgdD10aGlzLm1hcFJvd05vZGVzKGUpLGk9dGhpcy5nZXRBbGxSb3dDdHJscygpO3JldHVybiBlJiZ0P2kuZmlsdGVyKGU9Pntjb25zdCBpPWUuZ2V0Um93Tm9kZSgpO3JldHVybiB0aGlzLmlzUm93SW5NYXAoaSx0KX0pOml9Z2V0Q2VsbEN0cmxzKGUsdCl7bGV0IGk7Yih0KSYmKGk9e30sdC5mb3JFYWNoKGU9Pntjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuZ2V0R3JpZENvbHVtbihlKTtiKHQpJiYoaVt0LmdldElkKCldPSEwKX0pKTtjb25zdCBzPVtdO3JldHVybiB0aGlzLmdldFJvd0N0cmxzKGUpLmZvckVhY2goZT0+e2UuZ2V0QWxsQ2VsbEN0cmxzKCkuZm9yRWFjaChlPT57Y29uc3QgdD1lLmdldENvbHVtbigpLmdldElkKCk7aSYmIWlbdF18fHMucHVzaChlKX0pfSksc31kZXN0cm95KCl7dGhpcy5yZW1vdmVBbGxSb3dDb21wcygpLHN1cGVyLmRlc3Ryb3koKX1yZW1vdmVBbGxSb3dDb21wcygpe2NvbnN0IGU9T2JqZWN0LmtleXModGhpcy5yb3dDdHJsc0J5Um93SW5kZXgpO3RoaXMucmVtb3ZlUm93Q3RybHMoZSl9Z2V0Um93c1RvUmVjeWNsZSgpe2NvbnN0IGU9W107Rih0aGlzLnJvd0N0cmxzQnlSb3dJbmRleCwodCxpKT0+e251bGw9PWkuZ2V0Um93Tm9kZSgpLmlkJiZlLnB1c2godCl9KSx0aGlzLnJlbW92ZVJvd0N0cmxzKGUpO2NvbnN0IHQ9e307cmV0dXJuIEYodGhpcy5yb3dDdHJsc0J5Um93SW5kZXgsKGUsaSk9Pntjb25zdCBzPWkuZ2V0Um93Tm9kZSgpO3Rbcy5pZF09aX0pLHRoaXMucm93Q3RybHNCeVJvd0luZGV4PXt9LHR9cmVtb3ZlUm93Q3RybHMoZSx0PSExKXtlLmZvckVhY2goZT0+e2NvbnN0IGk9dGhpcy5yb3dDdHJsc0J5Um93SW5kZXhbZV07aSYmKGkuZGVzdHJveUZpcnN0UGFzcyh0KSxpLmRlc3Ryb3lTZWNvbmRQYXNzKCkpLGRlbGV0ZSB0aGlzLnJvd0N0cmxzQnlSb3dJbmRleFtlXX0pfW9uQm9keVNjcm9sbChlKXsidmVydGljYWwiPT09ZS5kaXJlY3Rpb24mJnRoaXMucmVkcmF3KHthZnRlclNjcm9sbDohMH0pfXJlZHJhdyhlPXt9KXtjb25zdHthZnRlclNjcm9sbDp0fT1lO2xldCBpO3RoaXMuc3RpY2t5Um93RmVhdHVyZSYmTGkoKSYmKGk9dGhpcy5nZXRDZWxsVG9SZXN0b3JlRm9jdXNUb0FmdGVyUmVmcmVzaCgpfHx2b2lkIDApO2NvbnN0IHM9dGhpcy5maXJzdFJlbmRlcmVkUm93LHI9dGhpcy5sYXN0UmVuZGVyZWRSb3c7dGhpcy53b3JrT3V0Rmlyc3RBbmRMYXN0Um93c1RvUmVuZGVyKCk7bGV0IG89ITE7dGhpcy5zdGlja3lSb3dGZWF0dXJlJiYobz10aGlzLnN0aWNreVJvd0ZlYXR1cmUuY2hlY2tTdGlja3lSb3dzKCkpO2NvbnN0IG49dGhpcy5maXJzdFJlbmRlcmVkUm93IT09c3x8dGhpcy5sYXN0UmVuZGVyZWRSb3chPT1yO2lmKCghdHx8b3x8bikmJih0aGlzLmdldExvY2tPblJlZnJlc2goKSx0aGlzLnJlY3ljbGVSb3dzKG51bGwsITEsdCksdGhpcy5yZWxlYXNlTG9ja09uUmVmcmVzaCgpLHRoaXMuZGlzcGF0Y2hEaXNwbGF5ZWRSb3dzQ2hhbmdlZCh0JiYhbyksbnVsbCE9aSkpe2NvbnN0IGU9dGhpcy5nZXRDZWxsVG9SZXN0b3JlRm9jdXNUb0FmdGVyUmVmcmVzaCgpO251bGwhPWkmJm51bGw9PWUmJih0aGlzLmFuaW1hdGlvbkZyYW1lU2VydmljZS5mbHVzaEFsbEZyYW1lcygpLHRoaXMucmVzdG9yZUZvY3VzZWRDZWxsKGkpKX19cmVtb3ZlUm93Q29tcHNOb3RUb0RyYXcoZSx0KXtjb25zdCBpPXt9O2UuZm9yRWFjaChlPT5pW2VdPSEwKTtjb25zdCBzPU9iamVjdC5rZXlzKHRoaXMucm93Q3RybHNCeVJvd0luZGV4KS5maWx0ZXIoZT0+IWlbZV0pO3RoaXMucmVtb3ZlUm93Q3RybHMocyx0KX1jYWxjdWxhdGVJbmRleGVzVG9EcmF3KGUpe2xldCB0PUhpKHRoaXMuZmlyc3RSZW5kZXJlZFJvdyx0aGlzLmxhc3RSZW5kZXJlZFJvdyk7Y29uc3QgaT0oZSxpKT0+e2NvbnN0IHM9aS5nZXRSb3dOb2RlKCkucm93SW5kZXg7bnVsbCE9cyYmKHM8dGhpcy5maXJzdFJlbmRlcmVkUm93fHxzPnRoaXMubGFzdFJlbmRlcmVkUm93KSYmdGhpcy5kb05vdFVuVmlydHVhbGlzZVJvdyhpKSYmdC5wdXNoKHMpfTtGKHRoaXMucm93Q3RybHNCeVJvd0luZGV4LGkpLEYoZSxpKSx0LnNvcnQoKGUsdCk9PmUtdCk7Y29uc3Qgcz1bXTtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKyl7Y29uc3QgaT10W2VdLHI9dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0Um93KGkpO3ImJiFyLnN0aWNreSYmcy5wdXNoKGkpfXJldHVybiBzfXJlY3ljbGVSb3dzKGUsdD0hMSxpPSExKXtjb25zdCBzPXRoaXMuY2FsY3VsYXRlSW5kZXhlc1RvRHJhdyhlKTsodGhpcy5wcmludExheW91dHx8aSkmJih0PSExKSx0aGlzLnJlbW92ZVJvd0NvbXBzTm90VG9EcmF3KHMsIXQpO2NvbnN0IHI9W107aWYocy5mb3JFYWNoKHM9Pntjb25zdCBvPXRoaXMuY3JlYXRlT3JVcGRhdGVSb3dDdHJsKHMsZSx0LGkpO2IobykmJnIucHVzaChvKX0pLGUpe2kmJiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQW5pbWF0aW9uRnJhbWUiKSYmIXRoaXMucHJpbnRMYXlvdXQ/dGhpcy5iZWFucy5hbmltYXRpb25GcmFtZVNlcnZpY2UuYWRkRGVzdHJveVRhc2soKCk9Pnt0aGlzLmRlc3Ryb3lSb3dDdHJscyhlLHQpLHRoaXMudXBkYXRlQWxsUm93Q3RybHMoKSx0aGlzLmRpc3BhdGNoRGlzcGxheWVkUm93c0NoYW5nZWQoKX0pOnRoaXMuZGVzdHJveVJvd0N0cmxzKGUsdCl9dGhpcy51cGRhdGVBbGxSb3dDdHJscygpfWRpc3BhdGNoRGlzcGxheWVkUm93c0NoYW5nZWQoZT0hMSl7Y29uc3QgdD17dHlwZTpsdC5FVkVOVF9ESVNQTEFZRURfUk9XU19DSEFOR0VELGFmdGVyU2Nyb2xsOmV9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9b25EaXNwbGF5ZWRDb2x1bW5zQ2hhbmdlZCgpe2NvbnN0IGU9dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpbm5pbmdMZWZ0KCksdD10aGlzLmNvbHVtbk1vZGVsLmlzUGlubmluZ1JpZ2h0KCk7KHRoaXMucGlubmluZ0xlZnQhPT1lfHx0IT09dGhpcy5waW5uaW5nUmlnaHQpJiYodGhpcy5waW5uaW5nTGVmdD1lLHRoaXMucGlubmluZ1JpZ2h0PXQsdGhpcy5lbWJlZEZ1bGxXaWR0aFJvd3MmJnRoaXMucmVkcmF3RnVsbFdpZHRoRW1iZWRkZWRSb3dzKCkpfXJlZHJhd0Z1bGxXaWR0aEVtYmVkZGVkUm93cygpe2NvbnN0IGU9W107dGhpcy5nZXRGdWxsV2lkdGhSb3dDdHJscygpLmZvckVhY2godD0+e2NvbnN0IGk9dC5nZXRSb3dOb2RlKCkucm93SW5kZXg7ZS5wdXNoKGkudG9TdHJpbmcoKSl9KSx0aGlzLnJlZnJlc2hGbG9hdGluZ1Jvd0NvbXBzKCksdGhpcy5yZW1vdmVSb3dDdHJscyhlKSx0aGlzLnJlZHJhdyh7YWZ0ZXJTY3JvbGw6ITB9KX1nZXRGdWxsV2lkdGhSb3dDdHJscyhlKXtjb25zdCB0PXRoaXMubWFwUm93Tm9kZXMoZSk7cmV0dXJuIHRoaXMuZ2V0QWxsUm93Q3RybHMoKS5maWx0ZXIoZT0+e2lmKCFlLmlzRnVsbFdpZHRoKCkpcmV0dXJuITE7Y29uc3QgaT1lLmdldFJvd05vZGUoKTtyZXR1cm4hKG51bGwhPXQmJiF0aGlzLmlzUm93SW5NYXAoaSx0KSl9KX1jcmVhdGVPclVwZGF0ZVJvd0N0cmwoZSx0LGkscyl7bGV0IHIsbz10aGlzLnJvd0N0cmxzQnlSb3dJbmRleFtlXTtvfHwocj10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRSb3coZSksYihyKSYmYih0KSYmdFtyLmlkXSYmci5hbHJlYWR5UmVuZGVyZWQmJihvPXRbci5pZF0sdFtyLmlkXT1udWxsKSk7aWYoIW8pe2lmKHJ8fChyPXRoaXMucGFnaW5hdGlvblByb3h5LmdldFJvdyhlKSksIWIocikpcmV0dXJuO289dGhpcy5jcmVhdGVSb3dDb24ocixpLHMpfXJldHVybiByJiYoci5hbHJlYWR5UmVuZGVyZWQ9ITApLHRoaXMucm93Q3RybHNCeVJvd0luZGV4W2VdPW8sb31kZXN0cm95Um93Q3RybHMoZSx0KXtjb25zdCBpPVtdO0YoZSwoZSxzKT0+e3MmJih0aGlzLmNhY2hlZFJvd0N0cmxzJiZzLmlzQ2FjaGVhYmxlKCk/dGhpcy5jYWNoZWRSb3dDdHJscy5hZGRSb3cocyk6KHMuZGVzdHJveUZpcnN0UGFzcyghdCksdD8odGhpcy56b21iaWVSb3dDdHJsc1tzLmdldEluc3RhbmNlSWQoKV09cyxpLnB1c2goKCk9PntzLmRlc3Ryb3lTZWNvbmRQYXNzKCksZGVsZXRlIHRoaXMuem9tYmllUm93Q3RybHNbcy5nZXRJbnN0YW5jZUlkKCldfSkpOnMuZGVzdHJveVNlY29uZFBhc3MoKSkpfSksdCYmKGkucHVzaCgoKT0+e3RoaXMudXBkYXRlQWxsUm93Q3RybHMoKSx0aGlzLmRpc3BhdGNoRGlzcGxheWVkUm93c0NoYW5nZWQoKX0pLFkoaSkpfWdldFJvd0J1ZmZlcigpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0J1ZmZlciIpfWdldFJvd0J1ZmZlckluUGl4ZWxzKCl7cmV0dXJuIHRoaXMuZ2V0Um93QnVmZmVyKCkqdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0QXNOdW1iZXIoKX13b3JrT3V0Rmlyc3RBbmRMYXN0Um93c1RvUmVuZGVyKCl7bGV0IGUsdDtpZih0aGlzLnJvd0NvbnRhaW5lckhlaWdodFNlcnZpY2UudXBkYXRlT2Zmc2V0KCksdGhpcy5wYWdpbmF0aW9uUHJveHkuaXNSb3dzVG9SZW5kZXIoKSlpZih0aGlzLnByaW50TGF5b3V0KXRoaXMuZW52aXJvbm1lbnQucmVmcmVzaFJvd0hlaWdodFZhcmlhYmxlKCksZT10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRQYWdlRmlyc3RSb3coKSx0PXRoaXMucGFnaW5hdGlvblByb3h5LmdldFBhZ2VMYXN0Um93KCk7ZWxzZXtjb25zdCBpPXRoaXMuZ2V0Um93QnVmZmVySW5QaXhlbHMoKSxzPXRoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLHI9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc1Jvd1ZpcnR1YWxpc2F0aW9uIik7bGV0IG8sbixhPSExO2Rve2NvbnN0IGU9dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0UGl4ZWxPZmZzZXQoKSx7cGFnZUZpcnN0UGl4ZWw6dCxwYWdlTGFzdFBpeGVsOmx9PXRoaXMucGFnaW5hdGlvblByb3h5LmdldEN1cnJlbnRQYWdlUGl4ZWxSYW5nZSgpLGQ9dGhpcy5yb3dDb250YWluZXJIZWlnaHRTZXJ2aWNlLmdldERpdlN0cmV0Y2hPZmZzZXQoKSxjPXMuZ2V0U2Nyb2xsRmVhdHVyZSgpLmdldFZTY3JvbGxQb3NpdGlvbigpLGg9Yy50b3AsdT1jLmJvdHRvbTtyPyhvPXQrZCxuPWwrZCk6KG89TWF0aC5tYXgoaCtlLWksdCkrZCxuPU1hdGgubWluKHUrZStpLGwpK2QpLHRoaXMuZmlyc3RWaXNpYmxlVlBpeGVsPU1hdGgubWF4KGgrZSx0KStkLGE9dGhpcy5lbnN1cmVBbGxSb3dzSW5SYW5nZUhhdmVIZWlnaHRzQ2FsY3VsYXRlZChvLG4pfXdoaWxlKGEpO2xldCBsPXRoaXMucGFnaW5hdGlvblByb3h5LmdldFJvd0luZGV4QXRQaXhlbChvKSxkPXRoaXMucGFnaW5hdGlvblByb3h5LmdldFJvd0luZGV4QXRQaXhlbChuKTtjb25zdCBjPXRoaXMucGFnaW5hdGlvblByb3h5LmdldFBhZ2VGaXJzdFJvdygpLGg9dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0UGFnZUxhc3RSb3coKTtsPGMmJihsPWMpLGQ+aCYmKGQ9aCksZT1sLHQ9ZH1lbHNlIGU9MCx0PS0xO2NvbnN0IGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNEb21MYXlvdXQoIm5vcm1hbCIpLHM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc01heFJlbmRlcmVkUm93UmVzdHJpY3Rpb24iKSxyPU1hdGgubWF4KHRoaXMuZ2V0Um93QnVmZmVyKCksNTAwKTtpJiYhcyYmdC1lPnImJih0PWUrcik7Y29uc3Qgbz1lIT09dGhpcy5maXJzdFJlbmRlcmVkUm93LG49dCE9PXRoaXMubGFzdFJlbmRlcmVkUm93O2lmKG98fG4pe3RoaXMuZmlyc3RSZW5kZXJlZFJvdz1lLHRoaXMubGFzdFJlbmRlcmVkUm93PXQ7Y29uc3QgaT17dHlwZTpsdC5FVkVOVF9WSUVXUE9SVF9DSEFOR0VELGZpcnN0Um93OmUsbGFzdFJvdzp0fTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGkpfX1kaXNwYXRjaEZpcnN0RGF0YVJlbmRlcmVkRXZlbnQoKXtpZih0aGlzLmRhdGFGaXJzdFJlbmRlcmVkRmlyZWQpcmV0dXJuO3RoaXMuZGF0YUZpcnN0UmVuZGVyZWRGaXJlZD0hMDtjb25zdCBlPXt0eXBlOmx0LkVWRU5UX0ZJUlNUX0RBVEFfUkVOREVSRUQsZmlyc3RSb3c6dGhpcy5maXJzdFJlbmRlcmVkUm93LGxhc3RSb3c6dGhpcy5sYXN0UmVuZGVyZWRSb3d9O3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCk9Pnt0aGlzLmJlYW5zLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfSl9ZW5zdXJlQWxsUm93c0luUmFuZ2VIYXZlSGVpZ2h0c0NhbGN1bGF0ZWQoZSx0KXtjb25zdCBpPXRoaXMucGFnaW5hdGlvblByb3h5LmVuc3VyZVJvd0hlaWdodHNWYWxpZChlLHQsLTEsLTEpO3JldHVybiBpJiZ0aGlzLnVwZGF0ZUNvbnRhaW5lckhlaWdodHMoKSxpfWdldEZpcnN0VmlzaWJsZVZlcnRpY2FsUGl4ZWwoKXtyZXR1cm4gdGhpcy5maXJzdFZpc2libGVWUGl4ZWx9Z2V0Rmlyc3RWaXJ0dWFsUmVuZGVyZWRSb3coKXtyZXR1cm4gdGhpcy5maXJzdFJlbmRlcmVkUm93fWdldExhc3RWaXJ0dWFsUmVuZGVyZWRSb3coKXtyZXR1cm4gdGhpcy5sYXN0UmVuZGVyZWRSb3d9ZG9Ob3RVblZpcnR1YWxpc2VSb3coZSl7Y29uc3QgdD1lLmdldFJvd05vZGUoKSxpPXRoaXMuZm9jdXNTZXJ2aWNlLmlzUm93Tm9kZUZvY3VzZWQodCkscz1lLmlzRWRpdGluZygpLHI9dC5kZXRhaWw7aWYoIShpfHxzfHxyKSlyZXR1cm4hMTtyZXR1cm4hIXRoaXMucGFnaW5hdGlvblByb3h5LmlzUm93UHJlc2VudCh0KX1jcmVhdGVSb3dDb24oZSx0LGkpe2NvbnN0IHM9dGhpcy5jYWNoZWRSb3dDdHJscz90aGlzLmNhY2hlZFJvd0N0cmxzLmdldFJvdyhlKTpudWxsO2lmKHMpcmV0dXJuIHM7Y29uc3Qgcj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQW5pbWF0aW9uRnJhbWUiKSxvPWkmJiFyJiYhdGhpcy5wcmludExheW91dDtyZXR1cm4gbmV3IE9hKGUsdGhpcy5iZWFucyx0LG8sdGhpcy5wcmludExheW91dCl9Z2V0UmVuZGVyZWROb2Rlcygpe2NvbnN0IGU9dGhpcy5yb3dDdHJsc0J5Um93SW5kZXg7cmV0dXJuIE9iamVjdC5rZXlzKGUpLm1hcCh0PT5lW3RdLmdldFJvd05vZGUoKSl9Z2V0Um93QnlQb3NpdGlvbihlKXtsZXQgdDtjb25zdHtyb3dJbmRleDppfT1lO3N3aXRjaChlLnJvd1Bpbm5lZCl7Y2FzZSJ0b3AiOnQ9dGhpcy50b3BSb3dDdHJsc1tpXTticmVhaztjYXNlImJvdHRvbSI6dD10aGlzLmJvdHRvbVJvd0N0cmxzW2ldO2JyZWFrO2RlZmF1bHQ6dD10aGlzLnJvd0N0cmxzQnlSb3dJbmRleFtpXSx0fHwodD10aGlzLmdldFN0aWNreVRvcFJvd0N0cmxzKCkuZmluZChlPT5lLmdldFJvd05vZGUoKS5yb3dJbmRleD09PWkpfHxudWxsKX1yZXR1cm4gdH1nZXRSb3dOb2RlKGUpe3N3aXRjaChlLnJvd1Bpbm5lZCl7Y2FzZSJ0b3AiOnJldHVybiB0aGlzLnBpbm5lZFJvd01vZGVsLmdldFBpbm5lZFRvcFJvd0RhdGEoKVtlLnJvd0luZGV4XTtjYXNlImJvdHRvbSI6cmV0dXJuIHRoaXMucGlubmVkUm93TW9kZWwuZ2V0UGlubmVkQm90dG9tUm93RGF0YSgpW2Uucm93SW5kZXhdO2RlZmF1bHQ6cmV0dXJuIHRoaXMucm93TW9kZWwuZ2V0Um93KGUucm93SW5kZXgpfX1pc1JhbmdlSW5SZW5kZXJlZFZpZXdwb3J0KGUsdCl7aWYobnVsbD09ZXx8bnVsbD09dClyZXR1cm4hMTtjb25zdCBpPWU+dGhpcy5sYXN0UmVuZGVyZWRSb3c7cmV0dXJuISh0PHRoaXMuZmlyc3RSZW5kZXJlZFJvdykmJiFpfX07RGQoW2NlKCJhbmltYXRpb25GcmFtZVNlcnZpY2UiKV0sT2QucHJvdG90eXBlLCJhbmltYXRpb25GcmFtZVNlcnZpY2UiLHZvaWQgMCksRGQoW2NlKCJwYWdpbmF0aW9uUHJveHkiKV0sT2QucHJvdG90eXBlLCJwYWdpbmF0aW9uUHJveHkiLHZvaWQgMCksRGQoW2NlKCJjb2x1bW5Nb2RlbCIpXSxPZC5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLERkKFtjZSgicGlubmVkUm93TW9kZWwiKV0sT2QucHJvdG90eXBlLCJwaW5uZWRSb3dNb2RlbCIsdm9pZCAwKSxEZChbY2UoInJvd01vZGVsIildLE9kLnByb3RvdHlwZSwicm93TW9kZWwiLHZvaWQgMCksRGQoW2NlKCJmb2N1c1NlcnZpY2UiKV0sT2QucHJvdG90eXBlLCJmb2N1c1NlcnZpY2UiLHZvaWQgMCksRGQoW2NlKCJiZWFucyIpXSxPZC5wcm90b3R5cGUsImJlYW5zIix2b2lkIDApLERkKFtjZSgicm93Q29udGFpbmVySGVpZ2h0U2VydmljZSIpXSxPZC5wcm90b3R5cGUsInJvd0NvbnRhaW5lckhlaWdodFNlcnZpY2UiLHZvaWQgMCksRGQoW2NlKCJjdHJsc1NlcnZpY2UiKV0sT2QucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksRGQoW2FlXSxPZC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLE9kPURkKFtkZSgicm93UmVuZGVyZXIiKV0sT2QpO2NsYXNzIEFke2NvbnN0cnVjdG9yKGUpe3RoaXMuZW50cmllc01hcD17fSx0aGlzLmVudHJpZXNMaXN0PVtdLHRoaXMubWF4Q291bnQ9ZX1hZGRSb3coZSl7aWYodGhpcy5lbnRyaWVzTWFwW2UuZ2V0Um93Tm9kZSgpLmlkXT1lLHRoaXMuZW50cmllc0xpc3QucHVzaChlKSxlLnNldENhY2hlZCghMCksdGhpcy5lbnRyaWVzTGlzdC5sZW5ndGg+dGhpcy5tYXhDb3VudCl7Y29uc3QgZT10aGlzLmVudHJpZXNMaXN0WzBdO2UuZGVzdHJveUZpcnN0UGFzcygpLGUuZGVzdHJveVNlY29uZFBhc3MoKSx0aGlzLnJlbW92ZUZyb21DYWNoZShlKX19Z2V0Um93KGUpe2lmKG51bGw9PWV8fG51bGw9PWUuaWQpcmV0dXJuIG51bGw7Y29uc3QgdD10aGlzLmVudHJpZXNNYXBbZS5pZF07aWYoIXQpcmV0dXJuIG51bGw7dGhpcy5yZW1vdmVGcm9tQ2FjaGUodCksdC5zZXRDYWNoZWQoITEpO3JldHVybiB0LmdldFJvd05vZGUoKSE9ZT9udWxsOnR9aGFzKGUpe3JldHVybiBudWxsIT10aGlzLmVudHJpZXNNYXBbZS5pZF19cmVtb3ZlUm93KGUpe2NvbnN0IHQ9ZS5pZCxpPXRoaXMuZW50cmllc01hcFt0XTtkZWxldGUgdGhpcy5lbnRyaWVzTWFwW3RdLEllKHRoaXMuZW50cmllc0xpc3QsaSl9cmVtb3ZlRnJvbUNhY2hlKGUpe2NvbnN0IHQ9ZS5nZXRSb3dOb2RlKCkuaWQ7ZGVsZXRlIHRoaXMuZW50cmllc01hcFt0XSxJZSh0aGlzLmVudHJpZXNMaXN0LGUpfWdldEVudHJpZXMoKXtyZXR1cm4gdGhpcy5lbnRyaWVzTGlzdH19dmFyIFBkPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBNZD1jbGFzcyBleHRlbmRzIGl0e2Zvcm1hdFZhbHVlKGUsdCxpLHMscj0hMCl7bGV0IG8sbj1udWxsO2NvbnN0IGE9ZS5nZXRDb2xEZWYoKTtpZihzP289czpyJiYobz1hLnZhbHVlRm9ybWF0dGVyKSxvKXtjb25zdCBzPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3ZhbHVlOmksbm9kZTp0LGRhdGE6dD90LmRhdGE6bnVsbCxjb2xEZWY6YSxjb2x1bW46ZX0pO249ImZ1bmN0aW9uIj09dHlwZW9mIG8/byhzKTp0aGlzLmV4cHJlc3Npb25TZXJ2aWNlLmV2YWx1YXRlKG8scyl9ZWxzZSBpZihhLnJlZkRhdGEpcmV0dXJuIGEucmVmRGF0YVtpXXx8IiI7cmV0dXJuIG51bGw9PW4mJkFycmF5LmlzQXJyYXkoaSkmJihuPWkuam9pbigiLCAiKSksbn19O1BkKFtjZSgiZXhwcmVzc2lvblNlcnZpY2UiKV0sTWQucHJvdG90eXBlLCJleHByZXNzaW9uU2VydmljZSIsdm9pZCAwKSxNZD1QZChbZGUoInZhbHVlRm9ybWF0dGVyU2VydmljZSIpXSxNZCk7dmFyIExkPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBGZD1jbGFzcyBleHRlbmRzIGl0e2luaXQoKXt0aGlzLnNldFBpbm5lZFRvcFJvd0RhdGEoKSx0aGlzLnNldFBpbm5lZEJvdHRvbVJvd0RhdGEoKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJwaW5uZWRUb3BSb3dEYXRhIiwoKT0+dGhpcy5zZXRQaW5uZWRUb3BSb3dEYXRhKCkpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoInBpbm5lZEJvdHRvbVJvd0RhdGEiLCgpPT50aGlzLnNldFBpbm5lZEJvdHRvbVJvd0RhdGEoKSl9aXNFbXB0eShlKXtyZXR1cm4gUigidG9wIj09PWU/dGhpcy5waW5uZWRUb3BSb3dzOnRoaXMucGlubmVkQm90dG9tUm93cyl9aXNSb3dzVG9SZW5kZXIoZSl7cmV0dXJuIXRoaXMuaXNFbXB0eShlKX1nZXRSb3dBdFBpeGVsKGUsdCl7Y29uc3QgaT0idG9wIj09PXQ/dGhpcy5waW5uZWRUb3BSb3dzOnRoaXMucGlubmVkQm90dG9tUm93cztpZihSKGkpKXJldHVybiAwO2ZvcihsZXQgdD0wO3Q8aS5sZW5ndGg7dCsrKXtjb25zdCBzPWlbdF07aWYocy5yb3dUb3Arcy5yb3dIZWlnaHQtMT49ZSlyZXR1cm4gdH1yZXR1cm4gaS5sZW5ndGgtMX1zZXRQaW5uZWRUb3BSb3dEYXRhKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBpbm5lZFRvcFJvd0RhdGEiKTt0aGlzLnBpbm5lZFRvcFJvd3M9dGhpcy5jcmVhdGVOb2Rlc0Zyb21EYXRhKGUsITApO2NvbnN0IHQ9e3R5cGU6bHQuRVZFTlRfUElOTkVEX1JPV19EQVRBX0NIQU5HRUR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9c2V0UGlubmVkQm90dG9tUm93RGF0YSgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJwaW5uZWRCb3R0b21Sb3dEYXRhIik7dGhpcy5waW5uZWRCb3R0b21Sb3dzPXRoaXMuY3JlYXRlTm9kZXNGcm9tRGF0YShlLCExKTtjb25zdCB0PXt0eXBlOmx0LkVWRU5UX1BJTk5FRF9ST1dfREFUQV9DSEFOR0VEfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfWNyZWF0ZU5vZGVzRnJvbURhdGEoZSx0KXtjb25zdCBpPVtdO2lmKGUpe2xldCBzPTA7ZS5mb3JFYWNoKChlLHIpPT57Y29uc3Qgbz1uZXcgT28odGhpcy5iZWFucyk7by5kYXRhPWU7Y29uc3Qgbj10P09vLklEX1BSRUZJWF9UT1BfUElOTkVEOk9vLklEX1BSRUZJWF9CT1RUT01fUElOTkVEO28uaWQ9bityLG8ucm93UGlubmVkPXQ/InRvcCI6ImJvdHRvbSIsby5zZXRSb3dUb3Aocyksby5zZXRSb3dIZWlnaHQodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0Rm9yTm9kZShvKS5oZWlnaHQpLG8uc2V0Um93SW5kZXgocikscys9by5yb3dIZWlnaHQsaS5wdXNoKG8pfSl9cmV0dXJuIGl9Z2V0UGlubmVkVG9wUm93RGF0YSgpe3JldHVybiB0aGlzLnBpbm5lZFRvcFJvd3N9Z2V0UGlubmVkQm90dG9tUm93RGF0YSgpe3JldHVybiB0aGlzLnBpbm5lZEJvdHRvbVJvd3N9Z2V0UGlubmVkVG9wVG90YWxIZWlnaHQoKXtyZXR1cm4gdGhpcy5nZXRUb3RhbEhlaWdodCh0aGlzLnBpbm5lZFRvcFJvd3MpfWdldFBpbm5lZFRvcFJvd0NvdW50KCl7cmV0dXJuIHRoaXMucGlubmVkVG9wUm93cz90aGlzLnBpbm5lZFRvcFJvd3MubGVuZ3RoOjB9Z2V0UGlubmVkQm90dG9tUm93Q291bnQoKXtyZXR1cm4gdGhpcy5waW5uZWRCb3R0b21Sb3dzP3RoaXMucGlubmVkQm90dG9tUm93cy5sZW5ndGg6MH1nZXRQaW5uZWRUb3BSb3coZSl7cmV0dXJuIHRoaXMucGlubmVkVG9wUm93c1tlXX1nZXRQaW5uZWRCb3R0b21Sb3coZSl7cmV0dXJuIHRoaXMucGlubmVkQm90dG9tUm93c1tlXX1mb3JFYWNoUGlubmVkVG9wUm93KGUpe1IodGhpcy5waW5uZWRUb3BSb3dzKXx8dGhpcy5waW5uZWRUb3BSb3dzLmZvckVhY2goZSl9Zm9yRWFjaFBpbm5lZEJvdHRvbVJvdyhlKXtSKHRoaXMucGlubmVkQm90dG9tUm93cyl8fHRoaXMucGlubmVkQm90dG9tUm93cy5mb3JFYWNoKGUpfWdldFBpbm5lZEJvdHRvbVRvdGFsSGVpZ2h0KCl7cmV0dXJuIHRoaXMuZ2V0VG90YWxIZWlnaHQodGhpcy5waW5uZWRCb3R0b21Sb3dzKX1nZXRUb3RhbEhlaWdodChlKXtpZighZXx8MD09PWUubGVuZ3RoKXJldHVybiAwO2NvbnN0IHQ9T2UoZSk7cmV0dXJuIHQucm93VG9wK3Qucm93SGVpZ2h0fX07dmFyIElkO0xkKFtjZSgiYmVhbnMiKV0sRmQucHJvdG90eXBlLCJiZWFucyIsdm9pZCAwKSxMZChbYWVdLEZkLnByb3RvdHlwZSwiaW5pdCIsbnVsbCksRmQ9TGQoW2RlKCJwaW5uZWRSb3dNb2RlbCIpXSxGZCksZnVuY3Rpb24oZSl7ZS5BcHBsaWVkPSJBcHBsaWVkIixlLlN0b3JlTm90Rm91bmQ9IlN0b3JlTm90Rm91bmQiLGUuU3RvcmVMb2FkaW5nPSJTdG9yZUxvYWRpbmciLGUuU3RvcmVXYWl0aW5nVG9Mb2FkPSJTdG9yZVdhaXRpbmdUb0xvYWQiLGUuU3RvcmVMb2FkaW5nRmFpbGVkPSJTdG9yZUxvYWRpbmdGYWlsZWQiLGUuU3RvcmVXcm9uZ1R5cGU9IlN0b3JlV3JvbmdUeXBlIixlLkNhbmNlbGxlZD0iQ2FuY2VsbGVkIixlLlN0b3JlTm90U3RhcnRlZD0iU3RvcmVOb3RTdGFydGVkIn0oSWR8fChJZD17fSkpO2NsYXNzIE5ke2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5hY3RpdmU9ITAsdGhpcy5ub2RlSWRzVG9Db2x1bW5zPXt9LHRoaXMubWFwVG9JdGVtcz17fSx0aGlzLmtlZXBpbmdDb2x1bW5zPWUsdGhpcy5wYXRoUm9vdD17cm93Tm9kZTp0LGNoaWxkcmVuOm51bGx9LHRoaXMubWFwVG9JdGVtc1t0LmlkXT10aGlzLnBhdGhSb290fXNldEluYWN0aXZlKCl7dGhpcy5hY3RpdmU9ITF9aXNBY3RpdmUoKXtyZXR1cm4gdGhpcy5hY3RpdmV9ZGVwdGhGaXJzdFNlYXJjaENoYW5nZWRQYXRoKGUsdCl7aWYoZS5jaGlsZHJlbilmb3IobGV0IGk9MDtpPGUuY2hpbGRyZW4ubGVuZ3RoO2krKyl0aGlzLmRlcHRoRmlyc3RTZWFyY2hDaGFuZ2VkUGF0aChlLmNoaWxkcmVuW2ldLHQpO3QoZS5yb3dOb2RlKX1kZXB0aEZpcnN0U2VhcmNoRXZlcnl0aGluZyhlLHQsaSl7aWYoZS5jaGlsZHJlbkFmdGVyR3JvdXApZm9yKGxldCBzPTA7czxlLmNoaWxkcmVuQWZ0ZXJHcm91cC5sZW5ndGg7cysrKXtjb25zdCByPWUuY2hpbGRyZW5BZnRlckdyb3VwW3NdO3IuY2hpbGRyZW5BZnRlckdyb3VwP3RoaXMuZGVwdGhGaXJzdFNlYXJjaEV2ZXJ5dGhpbmcoZS5jaGlsZHJlbkFmdGVyR3JvdXBbc10sdCxpKTppJiZ0KHIpfXQoZSl9Zm9yRWFjaENoYW5nZWROb2RlRGVwdGhGaXJzdChlLHQ9ITEsaT0hMSl7dGhpcy5hY3RpdmUmJiFpP3RoaXMuZGVwdGhGaXJzdFNlYXJjaENoYW5nZWRQYXRoKHRoaXMucGF0aFJvb3QsZSk6dGhpcy5kZXB0aEZpcnN0U2VhcmNoRXZlcnl0aGluZyh0aGlzLnBhdGhSb290LnJvd05vZGUsZSx0KX1leGVjdXRlRnJvbVJvb3ROb2RlKGUpe2UodGhpcy5wYXRoUm9vdC5yb3dOb2RlKX1jcmVhdGVQYXRoSXRlbXMoZSl7bGV0IHQ9ZSxpPTA7Zm9yKDshdGhpcy5tYXBUb0l0ZW1zW3QuaWRdOyl7Y29uc3QgZT17cm93Tm9kZTp0LGNoaWxkcmVuOm51bGx9O3RoaXMubWFwVG9JdGVtc1t0LmlkXT1lLGkrKyx0PXQucGFyZW50fXJldHVybiBpfXBvcHVsYXRlQ29sdW1uc01hcChlLHQpe2lmKCF0aGlzLmtlZXBpbmdDb2x1bW5zfHwhdClyZXR1cm47bGV0IGk9ZTtmb3IoO2k7KXRoaXMubm9kZUlkc1RvQ29sdW1uc1tpLmlkXXx8KHRoaXMubm9kZUlkc1RvQ29sdW1uc1tpLmlkXT17fSksdC5mb3JFYWNoKGU9PnRoaXMubm9kZUlkc1RvQ29sdW1uc1tpLmlkXVtlLmdldElkKCldPSEwKSxpPWkucGFyZW50fWxpbmtQYXRoSXRlbXMoZSx0KXtsZXQgaT1lO2ZvcihsZXQgZT0wO2U8dDtlKyspe2NvbnN0IGU9dGhpcy5tYXBUb0l0ZW1zW2kuaWRdLHQ9dGhpcy5tYXBUb0l0ZW1zW2kucGFyZW50LmlkXTt0LmNoaWxkcmVufHwodC5jaGlsZHJlbj1bXSksdC5jaGlsZHJlbi5wdXNoKGUpLGk9aS5wYXJlbnR9fWFkZFBhcmVudE5vZGUoZSx0KXtpZighZXx8ZS5pc1Jvd1Bpbm5lZCgpKXJldHVybjtjb25zdCBpPXRoaXMuY3JlYXRlUGF0aEl0ZW1zKGUpO3RoaXMubGlua1BhdGhJdGVtcyhlLGkpLHRoaXMucG9wdWxhdGVDb2x1bW5zTWFwKGUsdCl9Y2FuU2tpcChlKXtyZXR1cm4gdGhpcy5hY3RpdmUmJiF0aGlzLm1hcFRvSXRlbXNbZS5pZF19Z2V0VmFsdWVDb2x1bW5zRm9yTm9kZShlLHQpe2lmKCF0aGlzLmtlZXBpbmdDb2x1bW5zKXJldHVybiB0O2NvbnN0IGk9dGhpcy5ub2RlSWRzVG9Db2x1bW5zW2UuaWRdO3JldHVybiB0LmZpbHRlcihlPT5pW2UuZ2V0SWQoKV0pfWdldE5vdFZhbHVlQ29sdW1uc0Zvck5vZGUoZSx0KXtpZighdGhpcy5rZWVwaW5nQ29sdW1ucylyZXR1cm4gbnVsbDtjb25zdCBpPXRoaXMubm9kZUlkc1RvQ29sdW1uc1tlLmlkXTtyZXR1cm4gdC5maWx0ZXIoZT0+IWlbZS5nZXRJZCgpXSl9fWNsYXNzIEdkIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnN0YXRlPUdkLlNUQVRFX1dBSVRJTkdfVE9fTE9BRCx0aGlzLnZlcnNpb249MCx0aGlzLmlkPWV9Z2V0SWQoKXtyZXR1cm4gdGhpcy5pZH1sb2FkKCl7dGhpcy5zdGF0ZT1HZC5TVEFURV9MT0FESU5HLHRoaXMubG9hZEZyb21EYXRhc291cmNlKCl9Z2V0VmVyc2lvbigpe3JldHVybiB0aGlzLnZlcnNpb259c2V0U3RhdGVXYWl0aW5nVG9Mb2FkKCl7dGhpcy52ZXJzaW9uKyssdGhpcy5zdGF0ZT1HZC5TVEFURV9XQUlUSU5HX1RPX0xPQUR9Z2V0U3RhdGUoKXtyZXR1cm4gdGhpcy5zdGF0ZX1wYWdlTG9hZEZhaWxlZChlKXt0aGlzLmlzUmVxdWVzdE1vc3RSZWNlbnRBbmRMaXZlKGUpJiYodGhpcy5zdGF0ZT1HZC5TVEFURV9GQUlMRUQsdGhpcy5wcm9jZXNzU2VydmVyRmFpbCgpKSx0aGlzLmRpc3BhdGNoTG9hZENvbXBsZXRlZCghMSl9c3VjY2VzcyhlLHQpe3RoaXMuc3VjY2Vzc0NvbW1vbihlLHQpfXBhZ2VMb2FkZWQoZSx0LGkpe3RoaXMuc3VjY2Vzc0NvbW1vbihlLHtyb3dEYXRhOnQscm93Q291bnQ6aX0pfWlzUmVxdWVzdE1vc3RSZWNlbnRBbmRMaXZlKGUpe2NvbnN0IHQ9ZT09PXRoaXMudmVyc2lvbixpPXRoaXMuaXNBbGl2ZSgpO3JldHVybiB0JiZpfXN1Y2Nlc3NDb21tb24oZSx0KXt0aGlzLmRpc3BhdGNoTG9hZENvbXBsZXRlZCgpO3RoaXMuaXNSZXF1ZXN0TW9zdFJlY2VudEFuZExpdmUoZSkmJih0aGlzLnN0YXRlPUdkLlNUQVRFX0xPQURFRCx0aGlzLnByb2Nlc3NTZXJ2ZXJSZXN1bHQodCkpfWRpc3BhdGNoTG9hZENvbXBsZXRlZChlPSEwKXtjb25zdCB0PXt0eXBlOkdkLkVWRU5UX0xPQURfQ09NUExFVEUsc3VjY2VzczplLGJsb2NrOnRoaXN9O3RoaXMuZGlzcGF0Y2hFdmVudCh0KX19R2QuRVZFTlRfTE9BRF9DT01QTEVURT0ibG9hZENvbXBsZXRlIixHZC5TVEFURV9XQUlUSU5HX1RPX0xPQUQ9Im5lZWRzTG9hZGluZyIsR2QuU1RBVEVfTE9BRElORz0ibG9hZGluZyIsR2QuU1RBVEVfTE9BREVEPSJsb2FkZWQiLEdkLlNUQVRFX0ZBSUxFRD0iZmFpbGVkIjt2YXIga2QsX2Q9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn0sVmQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oaSxzKXt0KGkscyxlKX19O2xldCBCZD1rZD1jbGFzcyBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmFjdGl2ZUJsb2NrTG9hZHNDb3VudD0wLHRoaXMuYmxvY2tzPVtdLHRoaXMuYWN0aXZlPSEwfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLm1heENvbmN1cnJlbnRSZXF1ZXN0cz10aGlzLmdldE1heENvbmN1cnJlbnREYXRhc291cmNlUmVxdWVzdHMoKTtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiYmxvY2tMb2FkRGVib3VuY2VNaWxsaXMiKTtlJiZlPjAmJih0aGlzLmNoZWNrQmxvY2tUb0xvYWREZWJvdW5jZT1Rcy5kZWJvdW5jZSh0aGlzLnBlcmZvcm1DaGVja0Jsb2Nrc1RvTG9hZC5iaW5kKHRoaXMpLGUpKX1zZXRCZWFucyhlKXt0aGlzLmxvZ2dlcj1lLmNyZWF0ZSgiUm93Tm9kZUJsb2NrTG9hZGVyIil9Z2V0TWF4Q29uY3VycmVudERhdGFzb3VyY2VSZXF1ZXN0cygpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJtYXhDb25jdXJyZW50RGF0YXNvdXJjZVJlcXVlc3RzIik7cmV0dXJuIG51bGw9PWU/MjplPD0wP3ZvaWQgMDplfWFkZEJsb2NrKGUpe3RoaXMuYmxvY2tzLnB1c2goZSksZS5hZGRFdmVudExpc3RlbmVyKEdkLkVWRU5UX0xPQURfQ09NUExFVEUsdGhpcy5sb2FkQ29tcGxldGUuYmluZCh0aGlzKSksdGhpcy5jaGVja0Jsb2NrVG9Mb2FkKCl9cmVtb3ZlQmxvY2soZSl7UXMucmVtb3ZlRnJvbUFycmF5KHRoaXMuYmxvY2tzLGUpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksdGhpcy5hY3RpdmU9ITF9bG9hZENvbXBsZXRlKCl7dGhpcy5hY3RpdmVCbG9ja0xvYWRzQ291bnQtLSx0aGlzLmNoZWNrQmxvY2tUb0xvYWQoKSx0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6a2QuQkxPQ0tfTE9BREVEX0VWRU5UfSksMD09dGhpcy5hY3RpdmVCbG9ja0xvYWRzQ291bnQmJnRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTprZC5CTE9DS19MT0FERVJfRklOSVNIRURfRVZFTlR9KX1jaGVja0Jsb2NrVG9Mb2FkKCl7dGhpcy5jaGVja0Jsb2NrVG9Mb2FkRGVib3VuY2U/dGhpcy5jaGVja0Jsb2NrVG9Mb2FkRGVib3VuY2UoKTp0aGlzLnBlcmZvcm1DaGVja0Jsb2Nrc1RvTG9hZCgpfXBlcmZvcm1DaGVja0Jsb2Nrc1RvTG9hZCgpe2lmKCF0aGlzLmFjdGl2ZSlyZXR1cm47aWYodGhpcy5wcmludENhY2hlU3RhdHVzKCksbnVsbCE9dGhpcy5tYXhDb25jdXJyZW50UmVxdWVzdHMmJnRoaXMuYWN0aXZlQmxvY2tMb2Fkc0NvdW50Pj10aGlzLm1heENvbmN1cnJlbnRSZXF1ZXN0cylyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci5sb2coImNoZWNrQmxvY2tUb0xvYWQ6IG1heCBsb2FkcyBleGNlZWRlZCIpO2NvbnN0IGU9dGhpcy5nZXRBdmFpbGFibGVMb2FkaW5nQ291bnQoKSx0PXRoaXMuYmxvY2tzLmZpbHRlcihlPT5lLmdldFN0YXRlKCk9PT1HZC5TVEFURV9XQUlUSU5HX1RPX0xPQUQpLnNsaWNlKDAsZSk7dGhpcy5yZWdpc3RlckxvYWRzKHQubGVuZ3RoKSx0LmZvckVhY2goZT0+ZS5sb2FkKCkpLHRoaXMucHJpbnRDYWNoZVN0YXR1cygpfWdldEJsb2NrU3RhdGUoKXtpZih0aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd01vZGVsVHlwZSgic2VydmVyU2lkZSIpKXtyZXR1cm4gdGhpcy5yb3dNb2RlbC5nZXRCbG9ja1N0YXRlcygpfWNvbnN0IGU9e307cmV0dXJuIHRoaXMuYmxvY2tzLmZvckVhY2godD0+e2NvbnN0e2lkOmksc3RhdGU6c309dC5nZXRCbG9ja1N0YXRlSnNvbigpO2VbaV09c30pLGV9cHJpbnRDYWNoZVN0YXR1cygpe3RoaXMubG9nZ2VyLmlzTG9nZ2luZygpJiZ0aGlzLmxvZ2dlci5sb2coYHByaW50Q2FjaGVTdGF0dXM6IGFjdGl2ZVBhZ2VMb2Fkc0NvdW50ID0gJHt0aGlzLmFjdGl2ZUJsb2NrTG9hZHNDb3VudH0sIGJsb2NrcyA9IGArSlNPTi5zdHJpbmdpZnkodGhpcy5nZXRCbG9ja1N0YXRlKCkpKX1pc0xvYWRpbmcoKXtyZXR1cm4gdGhpcy5hY3RpdmVCbG9ja0xvYWRzQ291bnQ+MH1yZWdpc3RlckxvYWRzKGUpe3RoaXMuYWN0aXZlQmxvY2tMb2Fkc0NvdW50Kz1lfWdldEF2YWlsYWJsZUxvYWRpbmdDb3VudCgpe3JldHVybiB2b2lkIDAhPT10aGlzLm1heENvbmN1cnJlbnRSZXF1ZXN0cz90aGlzLm1heENvbmN1cnJlbnRSZXF1ZXN0cy10aGlzLmFjdGl2ZUJsb2NrTG9hZHNDb3VudDp2b2lkIDB9fTtCZC5CTE9DS19MT0FERURfRVZFTlQ9ImJsb2NrTG9hZGVkIixCZC5CTE9DS19MT0FERVJfRklOSVNIRURfRVZFTlQ9ImJsb2NrTG9hZGVyRmluaXNoZWQiLF9kKFtjZSgicm93TW9kZWwiKV0sQmQucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSxfZChbYWVdLEJkLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksX2QoW1ZkKDAscGUoImxvZ2dlckZhY3RvcnkiKSldLEJkLnByb3RvdHlwZSwic2V0QmVhbnMiLG51bGwpLEJkPWtkPV9kKFtkZSgicm93Tm9kZUJsb2NrTG9hZGVyIildLEJkKTt2YXIgSGQ9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IFdkPWNsYXNzIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY3VycmVudFBhZ2U9MCx0aGlzLnRvcERpc3BsYXllZFJvd0luZGV4PTAsdGhpcy5ib3R0b21EaXNwbGF5ZWRSb3dJbmRleD0wLHRoaXMucGl4ZWxPZmZzZXQ9MCx0aGlzLm1hc3RlclJvd0NvdW50PTB9cG9zdENvbnN0cnVjdCgpe3RoaXMuYWN0aXZlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicGFnaW5hdGlvbiIpLHRoaXMucGFnZVNpemVGcm9tR3JpZE9wdGlvbnM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJwYWdpbmF0aW9uUGFnZVNpemUiKSx0aGlzLnBhZ2luYXRlQ2hpbGRSb3dzPXRoaXMuaXNQYWdpbmF0ZUNoaWxkUm93cygpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX01PREVMX1VQREFURUQsdGhpcy5vbk1vZGVsVXBkYXRlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJwYWdpbmF0aW9uIix0aGlzLm9uUGFnaW5hdGlvbkdyaWRPcHRpb25DaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoInBhZ2luYXRpb25QYWdlU2l6ZSIsdGhpcy5vblBhZ2VTaXplR3JpZE9wdGlvbkNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5vbk1vZGVsVXBkYXRlZCgpfWVuc3VyZVJvd0hlaWdodHNWYWxpZChlLHQsaSxzKXtjb25zdCByPXRoaXMucm93TW9kZWwuZW5zdXJlUm93SGVpZ2h0c1ZhbGlkKGUsdCx0aGlzLmdldFBhZ2VGaXJzdFJvdygpLHRoaXMuZ2V0UGFnZUxhc3RSb3coKSk7cmV0dXJuIHImJnRoaXMuY2FsY3VsYXRlUGFnZXMoKSxyfWlzUGFnaW5hdGVDaGlsZFJvd3MoKXtyZXR1cm4hKCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwUmVtb3ZlU2luZ2xlQ2hpbGRyZW4iKSYmIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBSZW1vdmVMb3dlc3RTaW5nbGVDaGlsZHJlbiIpKXx8dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJwYWdpbmF0ZUNoaWxkUm93cyIpfW9uTW9kZWxVcGRhdGVkKGUpe3RoaXMuY2FsY3VsYXRlUGFnZXMoKTtjb25zdCB0PXt0eXBlOmx0LkVWRU5UX1BBR0lOQVRJT05fQ0hBTkdFRCxhbmltYXRlOiEhZSYmZS5hbmltYXRlLG5ld0RhdGE6ISFlJiZlLm5ld0RhdGEsbmV3UGFnZTohIWUmJmUubmV3UGFnZSxuZXdQYWdlU2l6ZTohIWUmJmUubmV3UGFnZVNpemUsa2VlcFJlbmRlcmVkUm93czohIWUmJmUua2VlcFJlbmRlcmVkUm93c307dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KX1vblBhZ2luYXRpb25HcmlkT3B0aW9uQ2hhbmdlZCgpe3RoaXMuYWN0aXZlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicGFnaW5hdGlvbiIpLHRoaXMuY2FsY3VsYXRlUGFnZXMoKTtjb25zdCBlPXt0eXBlOmx0LkVWRU5UX1BBR0lOQVRJT05fQ0hBTkdFRCxhbmltYXRlOiExLG5ld0RhdGE6ITEsbmV3UGFnZTohMSxuZXdQYWdlU2l6ZTohMSxrZWVwUmVuZGVyZWRSb3dzOiEwfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfW9uUGFnZVNpemVHcmlkT3B0aW9uQ2hhbmdlZCgpe3RoaXMuc2V0UGFnZVNpemUodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJwYWdpbmF0aW9uUGFnZVNpemUiKSwiZ3JpZE9wdGlvbnMiKX1nb1RvUGFnZShlKXtpZighdGhpcy5hY3RpdmV8fHRoaXMuY3VycmVudFBhZ2U9PT1lfHwibnVtYmVyIiE9dHlwZW9mIHRoaXMuY3VycmVudFBhZ2UpcmV0dXJuO3RoaXMuY3VycmVudFBhZ2U9ZTtjb25zdCB0PXt0eXBlOmx0LkVWRU5UX01PREVMX1VQREFURUQsYW5pbWF0ZTohMSxrZWVwUmVuZGVyZWRSb3dzOiExLG5ld0RhdGE6ITEsbmV3UGFnZTohMCxuZXdQYWdlU2l6ZTohMX07dGhpcy5vbk1vZGVsVXBkYXRlZCh0KX1nZXRQaXhlbE9mZnNldCgpe3JldHVybiB0aGlzLnBpeGVsT2Zmc2V0fWdldFJvdyhlKXtyZXR1cm4gdGhpcy5yb3dNb2RlbC5nZXRSb3coZSl9Z2V0Um93Tm9kZShlKXtyZXR1cm4gdGhpcy5yb3dNb2RlbC5nZXRSb3dOb2RlKGUpfWdldFJvd0luZGV4QXRQaXhlbChlKXtyZXR1cm4gdGhpcy5yb3dNb2RlbC5nZXRSb3dJbmRleEF0UGl4ZWwoZSl9Z2V0Q3VycmVudFBhZ2VIZWlnaHQoKXtyZXR1cm4gRSh0aGlzLnRvcFJvd0JvdW5kcyl8fEUodGhpcy5ib3R0b21Sb3dCb3VuZHMpPzA6TWF0aC5tYXgodGhpcy5ib3R0b21Sb3dCb3VuZHMucm93VG9wK3RoaXMuYm90dG9tUm93Qm91bmRzLnJvd0hlaWdodC10aGlzLnRvcFJvd0JvdW5kcy5yb3dUb3AsMCl9Z2V0Q3VycmVudFBhZ2VQaXhlbFJhbmdlKCl7cmV0dXJue3BhZ2VGaXJzdFBpeGVsOnRoaXMudG9wUm93Qm91bmRzP3RoaXMudG9wUm93Qm91bmRzLnJvd1RvcDowLHBhZ2VMYXN0UGl4ZWw6dGhpcy5ib3R0b21Sb3dCb3VuZHM/dGhpcy5ib3R0b21Sb3dCb3VuZHMucm93VG9wK3RoaXMuYm90dG9tUm93Qm91bmRzLnJvd0hlaWdodDowfX1pc1Jvd1ByZXNlbnQoZSl7aWYoIXRoaXMucm93TW9kZWwuaXNSb3dQcmVzZW50KGUpKXJldHVybiExO3JldHVybiBlLnJvd0luZGV4Pj10aGlzLnRvcERpc3BsYXllZFJvd0luZGV4JiZlLnJvd0luZGV4PD10aGlzLmJvdHRvbURpc3BsYXllZFJvd0luZGV4fWlzRW1wdHkoKXtyZXR1cm4gdGhpcy5yb3dNb2RlbC5pc0VtcHR5KCl9aXNSb3dzVG9SZW5kZXIoKXtyZXR1cm4gdGhpcy5yb3dNb2RlbC5pc1Jvd3NUb1JlbmRlcigpfWZvckVhY2hOb2RlKGUpe3JldHVybiB0aGlzLnJvd01vZGVsLmZvckVhY2hOb2RlKGUpfWZvckVhY2hOb2RlT25QYWdlKGUpe2NvbnN0IHQ9dGhpcy5nZXRQYWdlRmlyc3RSb3coKSxpPXRoaXMuZ2V0UGFnZUxhc3RSb3coKTtmb3IobGV0IHM9dDtzPD1pO3MrKyl7Y29uc3QgdD10aGlzLmdldFJvdyhzKTt0JiZlKHQpfX1nZXRUeXBlKCl7cmV0dXJuIHRoaXMucm93TW9kZWwuZ2V0VHlwZSgpfWdldFJvd0JvdW5kcyhlKXtjb25zdCB0PXRoaXMucm93TW9kZWwuZ2V0Um93Qm91bmRzKGUpO3JldHVybiB0LnJvd0luZGV4PWUsdH1nZXRQYWdlRmlyc3RSb3coKXtyZXR1cm4gdGhpcy50b3BSb3dCb3VuZHM/dGhpcy50b3BSb3dCb3VuZHMucm93SW5kZXg6LTF9Z2V0UGFnZUxhc3RSb3coKXtyZXR1cm4gdGhpcy5ib3R0b21Sb3dCb3VuZHM/dGhpcy5ib3R0b21Sb3dCb3VuZHMucm93SW5kZXg6LTF9Z2V0Um93Q291bnQoKXtyZXR1cm4gdGhpcy5yb3dNb2RlbC5nZXRSb3dDb3VudCgpfWdldFBhZ2VGb3JJbmRleChlKXtyZXR1cm4gTWF0aC5mbG9vcihlL3RoaXMucGFnZVNpemUpfWdvVG9QYWdlV2l0aEluZGV4KGUpe2lmKCF0aGlzLmFjdGl2ZSlyZXR1cm47Y29uc3QgdD10aGlzLmdldFBhZ2VGb3JJbmRleChlKTt0aGlzLmdvVG9QYWdlKHQpfWlzUm93SW5QYWdlKGUpe2lmKCF0aGlzLmFjdGl2ZSlyZXR1cm4hMDtyZXR1cm4gdGhpcy5nZXRQYWdlRm9ySW5kZXgoZS5yb3dJbmRleCk9PT10aGlzLmN1cnJlbnRQYWdlfWlzTGFzdFBhZ2VGb3VuZCgpe3JldHVybiB0aGlzLnJvd01vZGVsLmlzTGFzdFJvd0luZGV4S25vd24oKX1nZXRDdXJyZW50UGFnZSgpe3JldHVybiB0aGlzLmN1cnJlbnRQYWdlfWdvVG9OZXh0UGFnZSgpe3RoaXMuZ29Ub1BhZ2UodGhpcy5jdXJyZW50UGFnZSsxKX1nb1RvUHJldmlvdXNQYWdlKCl7dGhpcy5nb1RvUGFnZSh0aGlzLmN1cnJlbnRQYWdlLTEpfWdvVG9GaXJzdFBhZ2UoKXt0aGlzLmdvVG9QYWdlKDApfWdvVG9MYXN0UGFnZSgpe2NvbnN0IGU9dGhpcy5yb3dNb2RlbC5nZXRSb3dDb3VudCgpLHQ9TWF0aC5mbG9vcihlL3RoaXMucGFnZVNpemUpO3RoaXMuZ29Ub1BhZ2UodCl9Z2V0UGFnZVNpemUoKXtyZXR1cm4gdGhpcy5wYWdlU2l6ZX1nZXRUb3RhbFBhZ2VzKCl7cmV0dXJuIHRoaXMudG90YWxQYWdlc31zZXRQYWdlKGUpe3RoaXMuY3VycmVudFBhZ2U9ZX1nZXQgcGFnZVNpemUoKXtyZXR1cm4gYih0aGlzLnBhZ2VTaXplQXV0b0NhbGN1bGF0ZWQpP3RoaXMucGFnZVNpemVBdXRvQ2FsY3VsYXRlZDpiKHRoaXMucGFnZVNpemVGcm9tUGFnZVNpemVTZWxlY3Rvcik/dGhpcy5wYWdlU2l6ZUZyb21QYWdlU2l6ZVNlbGVjdG9yOmIodGhpcy5wYWdlU2l6ZUZyb21Jbml0aWFsU3RhdGUpP3RoaXMucGFnZVNpemVGcm9tSW5pdGlhbFN0YXRlOmIodGhpcy5wYWdlU2l6ZUZyb21HcmlkT3B0aW9ucyk/dGhpcy5wYWdlU2l6ZUZyb21HcmlkT3B0aW9uczp0aGlzLmRlZmF1bHRQYWdlU2l6ZX11bnNldEF1dG9DYWxjdWxhdGVkUGFnZVNpemUoKXtpZih2b2lkIDA9PT10aGlzLnBhZ2VTaXplQXV0b0NhbGN1bGF0ZWQpcmV0dXJuO2NvbnN0IGU9dGhpcy5wYWdlU2l6ZUF1dG9DYWxjdWxhdGVkO3RoaXMucGFnZVNpemVBdXRvQ2FsY3VsYXRlZD12b2lkIDAsdGhpcy5wYWdlU2l6ZSE9PWUmJnRoaXMub25Nb2RlbFVwZGF0ZWQoe3R5cGU6bHQuRVZFTlRfTU9ERUxfVVBEQVRFRCxhbmltYXRlOiExLGtlZXBSZW5kZXJlZFJvd3M6ITEsbmV3RGF0YTohMSxuZXdQYWdlOiExLG5ld1BhZ2VTaXplOiEwfSl9c2V0UGFnZVNpemUoZSx0KXtjb25zdCBpPXRoaXMucGFnZVNpemU7c3dpdGNoKHQpe2Nhc2UiYXV0b0NhbGN1bGF0ZWQiOnRoaXMucGFnZVNpemVBdXRvQ2FsY3VsYXRlZD1lO2JyZWFrO2Nhc2UicGFnZVNpemVTZWxlY3RvciI6dGhpcy5wYWdlU2l6ZUZyb21QYWdlU2l6ZVNlbGVjdG9yPWUsMCE9PXRoaXMuY3VycmVudFBhZ2UmJnRoaXMuZ29Ub0ZpcnN0UGFnZSgpO2JyZWFrO2Nhc2UiaW5pdGlhbFN0YXRlIjp0aGlzLnBhZ2VTaXplRnJvbUluaXRpYWxTdGF0ZT1lO2JyZWFrO2Nhc2UiZ3JpZE9wdGlvbnMiOnRoaXMucGFnZVNpemVGcm9tR3JpZE9wdGlvbnM9ZSx0aGlzLnBhZ2VTaXplRnJvbUluaXRpYWxTdGF0ZT12b2lkIDAsdGhpcy5wYWdlU2l6ZUZyb21QYWdlU2l6ZVNlbGVjdG9yPXZvaWQgMCwwIT09dGhpcy5jdXJyZW50UGFnZSYmdGhpcy5nb1RvRmlyc3RQYWdlKCl9aWYoaSE9PXRoaXMucGFnZVNpemUpe2NvbnN0IGU9e3R5cGU6bHQuRVZFTlRfTU9ERUxfVVBEQVRFRCxhbmltYXRlOiExLGtlZXBSZW5kZXJlZFJvd3M6ITEsbmV3RGF0YTohMSxuZXdQYWdlOiExLG5ld1BhZ2VTaXplOiEwfTt0aGlzLm9uTW9kZWxVcGRhdGVkKGUpfX1jYWxjdWxhdGVQYWdlcygpe3RoaXMuYWN0aXZlP3RoaXMucGFnaW5hdGVDaGlsZFJvd3M/dGhpcy5jYWxjdWxhdGVQYWdlc0FsbFJvd3MoKTp0aGlzLmNhbGN1bGF0ZVBhZ2VzTWFzdGVyUm93c09ubHkoKTp0aGlzLmNhbGN1bGF0ZWRQYWdlc05vdEFjdGl2ZSgpLHRoaXMudG9wUm93Qm91bmRzPXRoaXMucm93TW9kZWwuZ2V0Um93Qm91bmRzKHRoaXMudG9wRGlzcGxheWVkUm93SW5kZXgpLHRoaXMudG9wUm93Qm91bmRzJiYodGhpcy50b3BSb3dCb3VuZHMucm93SW5kZXg9dGhpcy50b3BEaXNwbGF5ZWRSb3dJbmRleCksdGhpcy5ib3R0b21Sb3dCb3VuZHM9dGhpcy5yb3dNb2RlbC5nZXRSb3dCb3VuZHModGhpcy5ib3R0b21EaXNwbGF5ZWRSb3dJbmRleCksdGhpcy5ib3R0b21Sb3dCb3VuZHMmJih0aGlzLmJvdHRvbVJvd0JvdW5kcy5yb3dJbmRleD10aGlzLmJvdHRvbURpc3BsYXllZFJvd0luZGV4KSx0aGlzLnNldFBpeGVsT2Zmc2V0KGIodGhpcy50b3BSb3dCb3VuZHMpP3RoaXMudG9wUm93Qm91bmRzLnJvd1RvcDowKX1zZXRQaXhlbE9mZnNldChlKXt0aGlzLnBpeGVsT2Zmc2V0IT09ZSYmKHRoaXMucGl4ZWxPZmZzZXQ9ZSx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHt0eXBlOmx0LkVWRU5UX1BBR0lOQVRJT05fUElYRUxfT0ZGU0VUX0NIQU5HRUR9KSl9c2V0WmVyb1Jvd3MoKXt0aGlzLm1hc3RlclJvd0NvdW50PTAsdGhpcy50b3BEaXNwbGF5ZWRSb3dJbmRleD0wLHRoaXMuYm90dG9tRGlzcGxheWVkUm93SW5kZXg9LTEsdGhpcy5jdXJyZW50UGFnZT0wLHRoaXMudG90YWxQYWdlcz0wfWFkanVzdEN1cnJlbnRQYWdlSWZJbnZhbGlkKCl7dGhpcy5jdXJyZW50UGFnZT49dGhpcy50b3RhbFBhZ2VzJiYodGhpcy5jdXJyZW50UGFnZT10aGlzLnRvdGFsUGFnZXMtMSksKCFpc0Zpbml0ZSh0aGlzLmN1cnJlbnRQYWdlKXx8aXNOYU4odGhpcy5jdXJyZW50UGFnZSl8fHRoaXMuY3VycmVudFBhZ2U8MCkmJih0aGlzLmN1cnJlbnRQYWdlPTApfWNhbGN1bGF0ZVBhZ2VzTWFzdGVyUm93c09ubHkoKXtpZih0aGlzLm1hc3RlclJvd0NvdW50PXRoaXMucm93TW9kZWwuZ2V0VG9wTGV2ZWxSb3dDb3VudCgpLHRoaXMubWFzdGVyUm93Q291bnQ8PTApcmV0dXJuIHZvaWQgdGhpcy5zZXRaZXJvUm93cygpO2NvbnN0IGU9dGhpcy5tYXN0ZXJSb3dDb3VudC0xO3RoaXMudG90YWxQYWdlcz1NYXRoLmZsb29yKGUvdGhpcy5wYWdlU2l6ZSkrMSx0aGlzLmFkanVzdEN1cnJlbnRQYWdlSWZJbnZhbGlkKCk7Y29uc3QgdD10aGlzLnBhZ2VTaXplKnRoaXMuY3VycmVudFBhZ2U7bGV0IGk9dGhpcy5wYWdlU2l6ZSoodGhpcy5jdXJyZW50UGFnZSsxKS0xO2lmKGk+ZSYmKGk9ZSksdGhpcy50b3BEaXNwbGF5ZWRSb3dJbmRleD10aGlzLnJvd01vZGVsLmdldFRvcExldmVsUm93RGlzcGxheWVkSW5kZXgodCksaT09PWUpdGhpcy5ib3R0b21EaXNwbGF5ZWRSb3dJbmRleD10aGlzLnJvd01vZGVsLmdldFJvd0NvdW50KCktMTtlbHNle2NvbnN0IGU9dGhpcy5yb3dNb2RlbC5nZXRUb3BMZXZlbFJvd0Rpc3BsYXllZEluZGV4KGkrMSk7dGhpcy5ib3R0b21EaXNwbGF5ZWRSb3dJbmRleD1lLTF9fWdldE1hc3RlclJvd0NvdW50KCl7cmV0dXJuIHRoaXMubWFzdGVyUm93Q291bnR9Y2FsY3VsYXRlUGFnZXNBbGxSb3dzKCl7aWYodGhpcy5tYXN0ZXJSb3dDb3VudD10aGlzLnJvd01vZGVsLmdldFJvd0NvdW50KCksMD09PXRoaXMubWFzdGVyUm93Q291bnQpcmV0dXJuIHZvaWQgdGhpcy5zZXRaZXJvUm93cygpO2NvbnN0IGU9dGhpcy5tYXN0ZXJSb3dDb3VudC0xO3RoaXMudG90YWxQYWdlcz1NYXRoLmZsb29yKGUvdGhpcy5wYWdlU2l6ZSkrMSx0aGlzLmFkanVzdEN1cnJlbnRQYWdlSWZJbnZhbGlkKCksdGhpcy50b3BEaXNwbGF5ZWRSb3dJbmRleD10aGlzLnBhZ2VTaXplKnRoaXMuY3VycmVudFBhZ2UsdGhpcy5ib3R0b21EaXNwbGF5ZWRSb3dJbmRleD10aGlzLnBhZ2VTaXplKih0aGlzLmN1cnJlbnRQYWdlKzEpLTEsdGhpcy5ib3R0b21EaXNwbGF5ZWRSb3dJbmRleD5lJiYodGhpcy5ib3R0b21EaXNwbGF5ZWRSb3dJbmRleD1lKX1jYWxjdWxhdGVkUGFnZXNOb3RBY3RpdmUoKXt0aGlzLnNldFBhZ2VTaXplKHRoaXMubWFzdGVyUm93Q291bnQsImF1dG9DYWxjdWxhdGVkIiksdGhpcy50b3RhbFBhZ2VzPTEsdGhpcy5jdXJyZW50UGFnZT0wLHRoaXMudG9wRGlzcGxheWVkUm93SW5kZXg9MCx0aGlzLmJvdHRvbURpc3BsYXllZFJvd0luZGV4PXRoaXMucm93TW9kZWwuZ2V0Um93Q291bnQoKS0xfX07SGQoW2NlKCJyb3dNb2RlbCIpXSxXZC5wcm90b3R5cGUsInJvd01vZGVsIix2b2lkIDApLEhkKFthZV0sV2QucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxXZD1IZChbZGUoInBhZ2luYXRpb25Qcm94eSIpXSxXZCk7dmFyIGpkPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBVZD1jbGFzcyBleHRlbmRzIGl0e3Byb2Nlc3NBbGxDZWxsQ2xhc3NlcyhlLHQsaSxzKXt0aGlzLnByb2Nlc3NDbGFzc1J1bGVzKHZvaWQgMCxlLmNlbGxDbGFzc1J1bGVzLHQsaSxzKSx0aGlzLnByb2Nlc3NTdGF0aWNDZWxsQ2xhc3NlcyhlLHQsaSl9cHJvY2Vzc0NsYXNzUnVsZXMoZSx0LGkscyxyKXtpZihudWxsPT10JiZudWxsPT1lKXJldHVybjtjb25zdCBvPXt9LG49e30sYT0oZSx0KT0+e2Uuc3BsaXQoIiAiKS5mb3JFYWNoKGU9PnsiIiE9ZS50cmltKCkmJnQoZSl9KX07aWYodCl7Y29uc3QgZT1PYmplY3Qua2V5cyh0KTtmb3IobGV0IHM9MDtzPGUubGVuZ3RoO3MrKyl7Y29uc3Qgcj1lW3NdLGw9dFtyXTtsZXQgZDsic3RyaW5nIj09dHlwZW9mIGw/ZD10aGlzLmV4cHJlc3Npb25TZXJ2aWNlLmV2YWx1YXRlKGwsaSk6ImZ1bmN0aW9uIj09dHlwZW9mIGwmJihkPWwoaSkpLGEocixlPT57ZD9vW2VdPSEwOm5bZV09ITB9KX19ZSYmciYmT2JqZWN0LmtleXMoZSkuZm9yRWFjaChlPT5hKGUsZT0+e29bZV18fChuW2VdPSEwKX0pKSxyJiZPYmplY3Qua2V5cyhuKS5mb3JFYWNoKHIpLE9iamVjdC5rZXlzKG8pLmZvckVhY2gocyl9Z2V0U3RhdGljQ2VsbENsYXNzZXMoZSx0KXtjb25zdHtjZWxsQ2xhc3M6aX09ZTtpZighaSlyZXR1cm5bXTtsZXQgcztpZigiZnVuY3Rpb24iPT10eXBlb2YgaSl7cz1pKHQpfWVsc2Ugcz1pO3JldHVybiJzdHJpbmciPT10eXBlb2YgcyYmKHM9W3NdKSxzfHxbXX1wcm9jZXNzU3RhdGljQ2VsbENsYXNzZXMoZSx0LGkpe3RoaXMuZ2V0U3RhdGljQ2VsbENsYXNzZXMoZSx0KS5mb3JFYWNoKGU9PntpKGUpfSl9fTtqZChbY2UoImV4cHJlc3Npb25TZXJ2aWNlIildLFVkLnByb3RvdHlwZSwiZXhwcmVzc2lvblNlcnZpY2UiLHZvaWQgMCksVWQ9amQoW2RlKCJzdHlsaW5nU2VydmljZSIpXSxVZCk7Y2xhc3MgemQgZXh0ZW5kcyBOcntjb25zdHJ1Y3RvcihlKXtzdXBlcihlLCJhZy10b2dnbGUtYnV0dG9uIil9c2V0VmFsdWUoZSx0KXtyZXR1cm4gc3VwZXIuc2V0VmFsdWUoZSx0KSx0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXNlbGVjdGVkIix0aGlzLmdldFZhbHVlKCkpLHRoaXN9fWNsYXNzIEtkIGV4dGVuZHMgSXJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSwiYWctdGV4dC1hcmVhIixudWxsLCJ0ZXh0YXJlYSIpfXNldFZhbHVlKGUsdCl7Y29uc3QgaT1zdXBlci5zZXRWYWx1ZShlLHQpO3JldHVybiB0aGlzLmVJbnB1dC52YWx1ZT1lLGl9c2V0Q29scyhlKXtyZXR1cm4gdGhpcy5lSW5wdXQuY29scz1lLHRoaXN9c2V0Um93cyhlKXtyZXR1cm4gdGhpcy5lSW5wdXQucm93cz1lLHRoaXN9fWNsYXNzIFlkIGV4dGVuZHMgJHJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSwiYWctZGF0ZS1maWVsZCIsImRhdGUiKX1wb3N0Q29uc3RydWN0KCl7c3VwZXIucG9zdENvbnN0cnVjdCgpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUlucHV0LCJ3aGVlbCIsdGhpcy5vbldoZWVsLmJpbmQodGhpcykpO2NvbnN0IGU9VGkoKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVJbnB1dCwibW91c2Vkb3duIiwoKT0+e3RoaXMuaXNEaXNhYmxlZCgpfHxlfHx0aGlzLmVJbnB1dC5mb2N1cygpfSksdGhpcy5lSW5wdXQuc3RlcD0iYW55In1vbldoZWVsKGUpe2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQ9PT10aGlzLmVJbnB1dCYmZS5wcmV2ZW50RGVmYXVsdCgpfXNldE1pbihlKXt2YXIgdDtjb25zdCBpPWUgaW5zdGFuY2VvZiBEYXRlP251bGwhPT0odD1ZaShudWxsIT1lP2U6bnVsbCwhMSkpJiZ2b2lkIDAhPT10P3Q6dm9pZCAwOmU7cmV0dXJuIHRoaXMubWluPT09aXx8KHRoaXMubWluPWksSXModGhpcy5lSW5wdXQsIm1pbiIsaSkpLHRoaXN9c2V0TWF4KGUpe3ZhciB0O2NvbnN0IGk9ZSBpbnN0YW5jZW9mIERhdGU/bnVsbCE9PSh0PVlpKG51bGwhPWU/ZTpudWxsLCExKSkmJnZvaWQgMCE9PXQ/dDp2b2lkIDA6ZTtyZXR1cm4gdGhpcy5tYXg9PT1pfHwodGhpcy5tYXg9aSxJcyh0aGlzLmVJbnB1dCwibWF4IixpKSksdGhpc31zZXRTdGVwKGUpe3JldHVybiB0aGlzLnN0ZXA9PT1lfHwodGhpcy5zdGVwPWUsSXModGhpcy5lSW5wdXQsInN0ZXAiLGUpKSx0aGlzfWdldERhdGUoKXt2YXIgZTtpZih0aGlzLmVJbnB1dC52YWxpZGl0eS52YWxpZClyZXR1cm4gbnVsbCE9PShlPXFpKHRoaXMuZ2V0VmFsdWUoKSkpJiZ2b2lkIDAhPT1lP2U6dm9pZCAwfXNldERhdGUoZSx0KXt0aGlzLnNldFZhbHVlKFlpKG51bGwhPWU/ZTpudWxsLCExKSx0KX19Y2xhc3MgJGQgZXh0ZW5kcyBJcntjb25zdHJ1Y3RvcihlKXtzdXBlcihlLCJhZy1yYW5nZS1maWVsZCIsInJhbmdlIil9cG9zdENvbnN0cnVjdCgpe3N1cGVyLnBvc3RDb25zdHJ1Y3QoKTtjb25zdHttaW46ZSxtYXg6dCxzdGVwOml9PXRoaXMuY29uZmlnO251bGwhPWUmJnRoaXMuc2V0TWluVmFsdWUoZSksbnVsbCE9dCYmdGhpcy5zZXRNYXhWYWx1ZSh0KSx0aGlzLnNldFN0ZXAoaXx8MSl9YWRkSW5wdXRMaXN0ZW5lcnMoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVJbnB1dCwiaW5wdXQiLGU9Pntjb25zdCB0PWUudGFyZ2V0LnZhbHVlO3RoaXMuc2V0VmFsdWUodCl9KX1zZXRNaW5WYWx1ZShlKXtyZXR1cm4gdGhpcy5taW49ZSx0aGlzLmVJbnB1dC5zZXRBdHRyaWJ1dGUoIm1pbiIsZS50b1N0cmluZygpKSx0aGlzfXNldE1heFZhbHVlKGUpe3JldHVybiB0aGlzLm1heD1lLHRoaXMuZUlucHV0LnNldEF0dHJpYnV0ZSgibWF4IixlLnRvU3RyaW5nKCkpLHRoaXN9c2V0U3RlcChlKXtyZXR1cm4gdGhpcy5lSW5wdXQuc2V0QXR0cmlidXRlKCJzdGVwIixlLnRvU3RyaW5nKCkpLHRoaXN9c2V0VmFsdWUoZSx0KXtudWxsIT10aGlzLm1pbiYmKGU9TWF0aC5tYXgocGFyc2VGbG9hdChlKSx0aGlzLm1pbikudG9TdHJpbmcoKSksbnVsbCE9dGhpcy5tYXgmJihlPU1hdGgubWluKHBhcnNlRmxvYXQoZSksdGhpcy5tYXgpLnRvU3RyaW5nKCkpO2NvbnN0IGk9c3VwZXIuc2V0VmFsdWUoZSx0KTtyZXR1cm4gdGhpcy5lSW5wdXQudmFsdWU9ZSxpfX12YXIgWGQ9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgcWQgZXh0ZW5kcyBjcntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCc8ZGl2IGNsYXNzPSJhZy1yaWNoLXNlbGVjdC1yb3ciIHJvbGU9InByZXNlbnRhdGlvbiI+PC9kaXY+JyksdGhpcy5wYXJhbXM9ZSx0aGlzLndyYXBwZXJFbD10fXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmdldEd1aSgpLCJjbGljayIsdGhpcy5vbkNsaWNrLmJpbmQodGhpcykpfXNldFN0YXRlKGUpe2xldCB0PSIiO3RoaXMucGFyYW1zLnZhbHVlRm9ybWF0dGVyJiYodD10aGlzLnBhcmFtcy52YWx1ZUZvcm1hdHRlcihlKSk7dGhpcy5wb3B1bGF0ZVdpdGhSZW5kZXJlcihlLHQpfHx0aGlzLnBvcHVsYXRlV2l0aG91dFJlbmRlcmVyKGUsdCksdGhpcy52YWx1ZT1lfWhpZ2hsaWdodFN0cmluZyhlKXtjb25zdHtwYXJzZWRWYWx1ZTp0fT10aGlzO2lmKHRoaXMucGFyYW1zLmNlbGxSZW5kZXJlcnx8IWIodCkpcmV0dXJuO2xldCBpPWIoZSk7aWYoaSl7Y29uc3Qgcz1udWxsPT10P3ZvaWQgMDp0LnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5kZXhPZihlLnRvTG9jYWxlTG93ZXJDYXNlKCkpO2lmKHM+PTApe2NvbnN0IGk9cytlLmxlbmd0aCxyPWZ0KHQuc2xpY2UoMCxzKSwhMCksbz1mdCh0LnNsaWNlKHMsaSksITApLG49ZnQodC5zbGljZShpKSk7dGhpcy5yZW5kZXJWYWx1ZVdpdGhvdXRSZW5kZXJlcihgJHtyfTxzcGFuIGNsYXNzPSJhZy1yaWNoLXNlbGVjdC1yb3ctdGV4dC1oaWdobGlnaHQiPiR7b308L3NwYW4+JHtufWApfWVsc2UgaT0hMX1pfHx0aGlzLnJlbmRlclZhbHVlV2l0aG91dFJlbmRlcmVyKHQpfXVwZGF0ZUhpZ2hsaWdodGVkKGUpe3ZhciB0O2NvbnN0IGk9dGhpcy5nZXRHdWkoKSxzPSJhZy1yaWNoLXNlbGVjdC1yb3ctIit0aGlzLmdldENvbXBJZCgpO2lmKG51bGw9PT0odD1pLnBhcmVudEVsZW1lbnQpfHx2b2lkIDA9PT10fHx0LnNldEF0dHJpYnV0ZSgiaWQiLHMpLGUpe2RpKHRoaXMuZ2V0UGFyZW50Q29tcG9uZW50KCkuZ2V0QXJpYUVsZW1lbnQoKSxzKSx0aGlzLndyYXBwZXJFbC5zZXRBdHRyaWJ1dGUoImRhdGEtYWN0aXZlLW9wdGlvbiIscyl9YmkoaS5wYXJlbnRFbGVtZW50LGUpLHRoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctcmljaC1zZWxlY3Qtcm93LXNlbGVjdGVkIixlKX1wb3B1bGF0ZVdpdGhvdXRSZW5kZXJlcihlLHQpe2NvbnN0IGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKSxzPXRoaXMuZ2V0R3VpKCkscj1pLmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtyLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iLHIuc3R5bGUudGV4dE92ZXJmbG93PSJlbGxpcHNpcyI7Y29uc3Qgbz1mdChiKHQpP3Q6ZSwhMCk7dGhpcy5wYXJzZWRWYWx1ZT1iKG8pP286bnVsbCxzLmFwcGVuZENoaWxkKHIpLHRoaXMucmVuZGVyVmFsdWVXaXRob3V0UmVuZGVyZXIobyl9cmVuZGVyVmFsdWVXaXRob3V0UmVuZGVyZXIoZSl7Y29uc3QgdD10aGlzLmdldEd1aSgpLnF1ZXJ5U2VsZWN0b3IoInNwYW4iKTt0JiYodC5pbm5lckhUTUw9YihlKT9lOiImbmJzcDsiKX1wb3B1bGF0ZVdpdGhSZW5kZXJlcihlLHQpe2xldCBpLHM7cmV0dXJuIHRoaXMucGFyYW1zLmNlbGxSZW5kZXJlciYmKHM9dGhpcy51c2VyQ29tcG9uZW50RmFjdG9yeS5nZXRDZWxsUmVuZGVyZXJEZXRhaWxzKHRoaXMucGFyYW1zLHt2YWx1ZTplLHZhbHVlRm9ybWF0dGVkOnR9KSkscyYmKGk9cy5uZXdBZ1N0YWNrSW5zdGFuY2UoKSksaSYmR3MoaSx0aGlzLmdldEd1aSgpKSwhIWkmJihpLnRoZW4oZT0+e3RoaXMuYWRkRGVzdHJveUZ1bmMoKCk9Pnt0aGlzLmdldENvbnRleHQoKS5kZXN0cm95QmVhbihlKX0pfSksITApfW9uQ2xpY2soKXtjb25zdCBlPXRoaXMuZ2V0UGFyZW50Q29tcG9uZW50KCksdD17dHlwZTpsdC5FVkVOVF9GSUVMRF9QSUNLRVJfVkFMVUVfU0VMRUNURUQsZnJvbUVudGVyS2V5OiExLHZhbHVlOnRoaXMudmFsdWV9O251bGw9PWV8fGUuZGlzcGF0Y2hFdmVudCh0KX19WGQoW2NlKCJ1c2VyQ29tcG9uZW50RmFjdG9yeSIpXSxxZC5wcm90b3R5cGUsInVzZXJDb21wb25lbnRGYWN0b3J5Iix2b2lkIDApLFhkKFthZV0scWQucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgWmQ9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgUWQgZXh0ZW5kcyBoZHtjb25zdHJ1Y3RvcihlKXtzdXBlcihRZC5nZXRUZW1wbGF0ZSgobnVsbD09ZT92b2lkIDA6ZS5jc3NJZGVudGlmaWVyKXx8ImRlZmF1bHQiKSksdGhpcy5yZW5kZXJlZFJvd3M9bmV3IE1hcCx0aGlzLnJvd0hlaWdodD0yMDtjb25zdHtjc3NJZGVudGlmaWVyOnQ9ImRlZmF1bHQiLGFyaWFSb2xlOmk9Imxpc3Rib3giLGxpc3ROYW1lOnN9PWV8fHt9O3RoaXMuY3NzSWRlbnRpZmllcj10LHRoaXMuYXJpYVJvbGU9aSx0aGlzLmxpc3ROYW1lPXN9cG9zdENvbnN0cnVjdCgpe3RoaXMuYWRkU2Nyb2xsTGlzdGVuZXIoKSx0aGlzLnJvd0hlaWdodD10aGlzLmdldEl0ZW1IZWlnaHQoKSx0aGlzLmFkZFJlc2l6ZU9ic2VydmVyKCksdGhpcy5pbml0aWFsaXNlVGFiR3VhcmQoe29uRm9jdXNJbjplPT50aGlzLm9uRm9jdXNJbihlKSxvbkZvY3VzT3V0OmU9PnRoaXMub25Gb2N1c091dChlKSxmb2N1c0lubmVyRWxlbWVudDplPT50aGlzLmZvY3VzSW5uZXJFbGVtZW50KGUpLG9uVGFiS2V5RG93bjplPT50aGlzLm9uVGFiS2V5RG93bihlKSxoYW5kbGVLZXlEb3duOmU9PnRoaXMuaGFuZGxlS2V5RG93bihlKX0pLHRoaXMuc2V0QXJpYVByb3BlcnRpZXMoKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9HUklEX1NUWUxFU19DSEFOR0VELHRoaXMub25HcmlkU3R5bGVzQ2hhbmdlZC5iaW5kKHRoaXMpKX1vbkdyaWRTdHlsZXNDaGFuZ2VkKCl7dGhpcy5yb3dIZWlnaHQ9dGhpcy5nZXRJdGVtSGVpZ2h0KCksdGhpcy5yZWZyZXNoKCl9c2V0QXJpYVByb3BlcnRpZXMoKXtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpKCJhcmlhRGVmYXVsdExpc3ROYW1lIix0aGlzLmxpc3ROYW1lfHwiTGlzdCIpLHQ9dGhpcy5lQ29udGFpbmVyO1h0KHQsdGhpcy5hcmlhUm9sZSksZWkodCxlKX1hZGRSZXNpemVPYnNlcnZlcigpe2NvbnN0IGU9dGhpcy5yZXNpemVPYnNlcnZlclNlcnZpY2Uub2JzZXJ2ZVJlc2l6ZSh0aGlzLmdldEd1aSgpLCgpPT50aGlzLmFuaW1hdGlvbkZyYW1lU2VydmljZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCk9PnRoaXMuZHJhd1ZpcnR1YWxSb3dzKCkpKTt0aGlzLmFkZERlc3Ryb3lGdW5jKGUpfWZvY3VzSW5uZXJFbGVtZW50KGUpe3RoaXMuZm9jdXNSb3coZT90aGlzLm1vZGVsLmdldFJvd0NvdW50KCktMTowKX1vbkZvY3VzSW4oZSl7Y29uc3QgdD1lLnRhcmdldDt0LmNsYXNzTGlzdC5jb250YWlucygiYWctdmlydHVhbC1saXN0LWl0ZW0iKSYmKHRoaXMubGFzdEZvY3VzZWRSb3dJbmRleD1RdCh0KS0xKX1vbkZvY3VzT3V0KGUpe3RoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCl8fCh0aGlzLmxhc3RGb2N1c2VkUm93SW5kZXg9bnVsbCl9aGFuZGxlS2V5RG93bihlKXtzd2l0Y2goZS5rZXkpe2Nhc2UganMuVVA6Y2FzZSBqcy5ET1dOOnRoaXMubmF2aWdhdGUoZS5rZXk9PT1qcy5VUCkmJmUucHJldmVudERlZmF1bHQoKX19b25UYWJLZXlEb3duKGUpe3RoaXMubmF2aWdhdGUoZS5zaGlmdEtleSk/ZS5wcmV2ZW50RGVmYXVsdCgpOihZZShlKSx0aGlzLmZvcmNlRm9jdXNPdXRPZkNvbnRhaW5lcihlLnNoaWZ0S2V5KSl9bmF2aWdhdGUoZSl7aWYobnVsbD09dGhpcy5sYXN0Rm9jdXNlZFJvd0luZGV4KXJldHVybiExO2NvbnN0IHQ9dGhpcy5sYXN0Rm9jdXNlZFJvd0luZGV4KyhlPy0xOjEpO3JldHVybiEodDwwfHx0Pj10aGlzLm1vZGVsLmdldFJvd0NvdW50KCkpJiYodGhpcy5mb2N1c1Jvdyh0KSwhMCl9Z2V0TGFzdEZvY3VzZWRSb3coKXtyZXR1cm4gdGhpcy5sYXN0Rm9jdXNlZFJvd0luZGV4fWZvY3VzUm93KGUpe3RoaXMuZW5zdXJlSW5kZXhWaXNpYmxlKGUpLHdpbmRvdy5zZXRUaW1lb3V0KCgpPT57aWYoIXRoaXMuaXNBbGl2ZSgpKXJldHVybjtjb25zdCB0PXRoaXMucmVuZGVyZWRSb3dzLmdldChlKTt0JiZ0LmVEaXYuZm9jdXMoKX0sMTApfWdldENvbXBvbmVudEF0KGUpe2NvbnN0IHQ9dGhpcy5yZW5kZXJlZFJvd3MuZ2V0KGUpO3JldHVybiB0JiZ0LnJvd0NvbXBvbmVudH1mb3JFYWNoUmVuZGVyZWRSb3coZSl7dGhpcy5yZW5kZXJlZFJvd3MuZm9yRWFjaCgodCxpKT0+ZSh0LnJvd0NvbXBvbmVudCxpKSl9c3RhdGljIGdldFRlbXBsYXRlKGUpe3JldHVybmA8ZGl2IGNsYXNzPSJhZy12aXJ0dWFsLWxpc3Qtdmlld3BvcnQgYWctJHtlfS12aXJ0dWFsLWxpc3Qtdmlld3BvcnQiIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctdmlydHVhbC1saXN0LWNvbnRhaW5lciBhZy0ke2V9LXZpcnR1YWwtbGlzdC1jb250YWluZXIiIHJlZj0iZUNvbnRhaW5lciI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5gfWdldEl0ZW1IZWlnaHQoKXtyZXR1cm4gdGhpcy5lbnZpcm9ubWVudC5nZXRMaXN0SXRlbUhlaWdodCgpfWVuc3VyZUluZGV4VmlzaWJsZShlLHQ9ITApe2NvbnN0IGk9dGhpcy5tb2RlbC5nZXRSb3dDb3VudCgpO2lmKCJudW1iZXIiIT10eXBlb2YgZXx8ZTwwfHxlPj1pKXJldHVybiBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGludmFsaWQgcm93IGluZGV4IGZvciBlbnN1cmVJbmRleFZpc2libGU6ICIrZSksITE7Y29uc3Qgcz1lKnRoaXMucm93SGVpZ2h0LHI9cyt0aGlzLnJvd0hlaWdodCxvPXRoaXMuZ2V0R3VpKCksbj1vLnNjcm9sbFRvcCxhPW8ub2Zmc2V0SGVpZ2h0LGw9bithLGQ9dD8wOnRoaXMucm93SGVpZ2h0LGM9bDxyLWQ7aWYobj5zK2QpcmV0dXJuIG8uc2Nyb2xsVG9wPXMsITA7aWYoYyl7Y29uc3QgZT1yLWE7cmV0dXJuIG8uc2Nyb2xsVG9wPWUsITB9cmV0dXJuITF9c2V0Q29tcG9uZW50Q3JlYXRvcihlKXt0aGlzLmNvbXBvbmVudENyZWF0b3I9ZX1zZXRDb21wb25lbnRVcGRhdGVyKGUpe3RoaXMuY29tcG9uZW50VXBkYXRlcj1lfWdldFJvd0hlaWdodCgpe3JldHVybiB0aGlzLnJvd0hlaWdodH1nZXRTY3JvbGxUb3AoKXtyZXR1cm4gdGhpcy5nZXRHdWkoKS5zY3JvbGxUb3B9c2V0Um93SGVpZ2h0KGUpe3RoaXMucm93SGVpZ2h0PWUsdGhpcy5yZWZyZXNoKCl9cmVmcmVzaChlKXtpZihudWxsPT10aGlzLm1vZGVsfHwhdGhpcy5pc0FsaXZlKCkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5tb2RlbC5nZXRSb3dDb3VudCgpO3RoaXMuZUNvbnRhaW5lci5zdHlsZS5oZWlnaHQ9dCp0aGlzLnJvd0hlaWdodCsicHgiLGVlKCgpPT50aGlzLmVDb250YWluZXIuY2xpZW50SGVpZ2h0Pj10KnRoaXMucm93SGVpZ2h0LCgpPT57dGhpcy5pc0FsaXZlKCkmJih0aGlzLmNhblNvZnRSZWZyZXNoKGUpP3RoaXMuZHJhd1ZpcnR1YWxSb3dzKCEwKToodGhpcy5jbGVhclZpcnR1YWxSb3dzKCksdGhpcy5kcmF3VmlydHVhbFJvd3MoKSkpfSl9Y2FuU29mdFJlZnJlc2goZSl7cmV0dXJuISEoZSYmdGhpcy5yZW5kZXJlZFJvd3Muc2l6ZSYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMubW9kZWwuYXJlUm93c0VxdWFsJiZ0aGlzLmNvbXBvbmVudFVwZGF0ZXIpfWNsZWFyVmlydHVhbFJvd3MoKXt0aGlzLnJlbmRlcmVkUm93cy5mb3JFYWNoKChlLHQpPT50aGlzLnJlbW92ZVJvdyh0KSl9ZHJhd1ZpcnR1YWxSb3dzKGUpe2lmKCF0aGlzLmlzQWxpdmUoKXx8IXRoaXMubW9kZWwpcmV0dXJuO2NvbnN0IHQ9dGhpcy5nZXRHdWkoKSxpPXQuc2Nyb2xsVG9wLHM9aSt0Lm9mZnNldEhlaWdodCxyPU1hdGguZmxvb3IoaS90aGlzLnJvd0hlaWdodCksbz1NYXRoLmZsb29yKHMvdGhpcy5yb3dIZWlnaHQpO3RoaXMuZW5zdXJlUm93c1JlbmRlcmVkKHIsbyxlKX1lbnN1cmVSb3dzUmVuZGVyZWQoZSx0LGkpe3RoaXMucmVuZGVyZWRSb3dzLmZvckVhY2goKGkscyk9PnsoczxlfHxzPnQpJiZzIT09dGhpcy5sYXN0Rm9jdXNlZFJvd0luZGV4JiZ0aGlzLnJlbW92ZVJvdyhzKX0pLGkmJnRoaXMucmVmcmVzaFJvd3MoKTtmb3IobGV0IGk9ZTtpPD10O2krKyl0aGlzLnJlbmRlcmVkUm93cy5oYXMoaSl8fGk8dGhpcy5tb2RlbC5nZXRSb3dDb3VudCgpJiZ0aGlzLmluc2VydFJvdyhpKX1pbnNlcnRSb3coZSl7Y29uc3QgdD10aGlzLm1vZGVsLmdldFJvdyhlKSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2kuY2xhc3NMaXN0LmFkZCgiYWctdmlydHVhbC1saXN0LWl0ZW0iLGBhZy0ke3RoaXMuY3NzSWRlbnRpZmllcn0tdmlydHVhbC1saXN0LWl0ZW1gKSxYdChpLCJ0cmVlIj09PXRoaXMuYXJpYVJvbGU/InRyZWVpdGVtIjoib3B0aW9uIiksdWkoaSx0aGlzLm1vZGVsLmdldFJvd0NvdW50KCkpLHBpKGksZSsxKSxpLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCItMSIpLGkuc3R5bGUuaGVpZ2h0PXRoaXMucm93SGVpZ2h0KyJweCIsaS5zdHlsZS50b3A9dGhpcy5yb3dIZWlnaHQqZSsicHgiO2NvbnN0IHM9dGhpcy5jb21wb25lbnRDcmVhdG9yKHQsaSk7cy5hZGRHdWlFdmVudExpc3RlbmVyKCJmb2N1c2luIiwoKT0+dGhpcy5sYXN0Rm9jdXNlZFJvd0luZGV4PWUpLGkuYXBwZW5kQ2hpbGQocy5nZXRHdWkoKSksdGhpcy5yZW5kZXJlZFJvd3MuaGFzKGUtMSk/dGhpcy5yZW5kZXJlZFJvd3MuZ2V0KGUtMSkuZURpdi5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyZW5kIixpKTp0aGlzLnJlbmRlcmVkUm93cy5oYXMoZSsxKT90aGlzLnJlbmRlcmVkUm93cy5nZXQoZSsxKS5lRGl2Lmluc2VydEFkamFjZW50RWxlbWVudCgiYmVmb3JlYmVnaW4iLGkpOnRoaXMuZUNvbnRhaW5lci5hcHBlbmRDaGlsZChpKSx0aGlzLnJlbmRlcmVkUm93cy5zZXQoZSx7cm93Q29tcG9uZW50OnMsZURpdjppLHZhbHVlOnR9KX1yZW1vdmVSb3coZSl7Y29uc3QgdD10aGlzLnJlbmRlcmVkUm93cy5nZXQoZSk7dGhpcy5lQ29udGFpbmVyLnJlbW92ZUNoaWxkKHQuZURpdiksdGhpcy5kZXN0cm95QmVhbih0LnJvd0NvbXBvbmVudCksdGhpcy5yZW5kZXJlZFJvd3MuZGVsZXRlKGUpfXJlZnJlc2hSb3dzKCl7Y29uc3QgZT10aGlzLm1vZGVsLmdldFJvd0NvdW50KCk7dGhpcy5yZW5kZXJlZFJvd3MuZm9yRWFjaCgodCxpKT0+e3ZhciBzLHI7aWYoaT49ZSl0aGlzLnJlbW92ZVJvdyhpKTtlbHNle2NvbnN0IGU9dGhpcy5tb2RlbC5nZXRSb3coaSk7KG51bGw9PT0ocj0ocz10aGlzLm1vZGVsKS5hcmVSb3dzRXF1YWwpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmNhbGwocyx0LnZhbHVlLGUpKT90aGlzLmNvbXBvbmVudFVwZGF0ZXIoZSx0LnJvd0NvbXBvbmVudCk6dGhpcy5yZW1vdmVSb3coaSl9fSl9YWRkU2Nyb2xsTGlzdGVuZXIoKXt0aGlzLmFkZEd1aUV2ZW50TGlzdGVuZXIoInNjcm9sbCIsKCk9PnRoaXMuZHJhd1ZpcnR1YWxSb3dzKCkse3Bhc3NpdmU6ITB9KX1zZXRNb2RlbChlKXt0aGlzLm1vZGVsPWV9Z2V0QXJpYUVsZW1lbnQoKXtyZXR1cm4gdGhpcy5lQ29udGFpbmVyfWRlc3Ryb3koKXt0aGlzLmlzQWxpdmUoKSYmKHRoaXMuY2xlYXJWaXJ0dWFsUm93cygpLHN1cGVyLmRlc3Ryb3koKSl9fVpkKFtjZSgicmVzaXplT2JzZXJ2ZXJTZXJ2aWNlIildLFFkLnByb3RvdHlwZSwicmVzaXplT2JzZXJ2ZXJTZXJ2aWNlIix2b2lkIDApLFpkKFtjZSgiYW5pbWF0aW9uRnJhbWVTZXJ2aWNlIildLFFkLnByb3RvdHlwZSwiYW5pbWF0aW9uRnJhbWVTZXJ2aWNlIix2b2lkIDApLFpkKFt1cigiZUNvbnRhaW5lciIpXSxRZC5wcm90b3R5cGUsImVDb250YWluZXIiLHZvaWQgMCksWmQoW2FlXSxRZC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBKZD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBlYyBleHRlbmRzIEFye2NvbnN0cnVjdG9yKGUpe3ZhciB0LGk7c3VwZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtwaWNrZXJBcmlhTGFiZWxLZXk6ImFyaWFMYWJlbFJpY2hTZWxlY3RGaWVsZCIscGlja2VyQXJpYUxhYmVsVmFsdWU6IlJpY2ggU2VsZWN0IEZpZWxkIixwaWNrZXJUeXBlOiJhZy1saXN0IixjbGFzc05hbWU6ImFnLXJpY2gtc2VsZWN0IixwaWNrZXJJY29uOiJzbWFsbERvd24iLGFyaWFSb2xlOiJjb21ib2JveCIsdGVtcGxhdGU6bnVsbCE9PSh0PW51bGw9PWU/dm9pZCAwOmUudGVtcGxhdGUpJiZ2b2lkIDAhPT10P3Q6J1xuICAgIDxkaXYgY2xhc3M9ImFnLXBpY2tlci1maWVsZCIgcm9sZT0icHJlc2VudGF0aW9uIj5cbiAgICAgICAgPGRpdiByZWY9ImVMYWJlbCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IHJlZj0iZVdyYXBwZXIiIGNsYXNzPSJhZy13cmFwcGVyIGFnLXBpY2tlci1maWVsZC13cmFwcGVyIGFnLXJpY2gtc2VsZWN0LXZhbHVlIGFnLXBpY2tlci1jb2xsYXBzZWQiPlxuICAgICAgICAgICAgPGRpdiByZWY9ImVEaXNwbGF5RmllbGQiIGNsYXNzPSJhZy1waWNrZXItZmllbGQtZGlzcGxheSI+PC9kaXY+XG4gICAgICAgICAgICA8YWctaW5wdXQtdGV4dC1maWVsZCByZWY9ImVJbnB1dCIgY2xhc3M9ImFnLXJpY2gtc2VsZWN0LWZpZWxkLWlucHV0Ij48L2FnLWlucHV0LXRleHQtZmllbGQ+XG4gICAgICAgICAgICA8ZGl2IHJlZj0iZUljb24iIGNsYXNzPSJhZy1waWNrZXItZmllbGQtaWNvbiIgYXJpYS1oaWRkZW49InRydWUiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj4nLG1vZGFsUGlja2VyOiExfSxlKSx7bWF4UGlja2VySGVpZ2h0Om51bGwhPT0oaT1udWxsPT1lP3ZvaWQgMDplLm1heFBpY2tlckhlaWdodCkmJnZvaWQgMCE9PWk/aToiY2FsYyh2YXIoLS1hZy1yb3ctaGVpZ2h0KSAqIDYuNSkifSkpLHRoaXMuc2VhcmNoU3RyaW5nPSIiLHRoaXMuaGlnaGxpZ2h0ZWRJdGVtPS0xLHRoaXMubGFzdFJvd0hvdmVyZWQ9LTEsdGhpcy5zZWFyY2hTdHJpbmdDcmVhdG9yPW51bGw7Y29uc3R7Y2VsbFJvd0hlaWdodDpzLHZhbHVlOnIsdmFsdWVMaXN0Om8sc2VhcmNoU3RyaW5nQ3JlYXRvcjpufT1lfHx7fTtudWxsIT1zJiYodGhpcy5jZWxsUm93SGVpZ2h0PXMpLHZvaWQgMCE9PXImJih0aGlzLnZhbHVlPXIpLG51bGwhPW8mJih0aGlzLnZhbHVlcz1vKSxuJiYodGhpcy5zZWFyY2hTdHJpbmdDcmVhdG9yPW4pfXBvc3RDb25zdHJ1Y3QoKXtzdXBlci5wb3N0Q29uc3RydWN0KCksdGhpcy5jcmVhdGVMb2FkaW5nRWxlbWVudCgpLHRoaXMuY3JlYXRlTGlzdENvbXBvbmVudCgpO2NvbnN0e2FsbG93VHlwaW5nOmUscGxhY2Vob2xkZXI6dH09dGhpcy5jb25maWc7ZT8odGhpcy5lSW5wdXQuc2V0QXV0b0NvbXBsZXRlKCExKS5zZXRJbnB1dFBsYWNlaG9sZGVyKHQpLHRoaXMuZURpc3BsYXlGaWVsZC5jbGFzc0xpc3QuYWRkKCJhZy1oaWRkZW4iKSk6dGhpcy5lSW5wdXQuc2V0RGlzcGxheWVkKCExKSx0aGlzLmVXcmFwcGVyLnRhYkluZGV4PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidGFiSW5kZXgiKTtjb25zdHtzZWFyY2hEZWJvdW5jZURlbGF5Omk9MzAwfT10aGlzLmNvbmZpZzt0aGlzLmNsZWFyU2VhcmNoU3RyaW5nPVEodGhpcy5jbGVhclNlYXJjaFN0cmluZyxpKSx0aGlzLnJlbmRlclNlbGVjdGVkVmFsdWUoKSxlJiYodGhpcy5lSW5wdXQub25WYWx1ZUNoYW5nZShlPT50aGlzLnNlYXJjaFRleHRGcm9tU3RyaW5nKGUpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVXcmFwcGVyLCJmb2N1cyIsdGhpcy5vbldyYXBwZXJGb2N1cy5iaW5kKHRoaXMpKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lV3JhcHBlciwiZm9jdXNvdXQiLHRoaXMub25XcmFwcGVyRm9jdXNPdXQuYmluZCh0aGlzKSl9Y3JlYXRlTG9hZGluZ0VsZW1lbnQoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCksdD10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSxpPWUuY3JlYXRlRWxlbWVudCgiZGl2Iik7aS5jbGFzc0xpc3QuYWRkKCJhZy1sb2FkaW5nLXRleHQiKSxpLmlubmVyVGV4dD10KCJsb2FkaW5nT29vIiwiTG9hZGluZy4uLiIpLHRoaXMuZUxvYWRpbmc9aX1jcmVhdGVMaXN0Q29tcG9uZW50KCl7dGhpcy5saXN0Q29tcG9uZW50PXRoaXMuY3JlYXRlQmVhbihuZXcgUWQoe2Nzc0lkZW50aWZpZXI6InJpY2gtc2VsZWN0In0pKSx0aGlzLmxpc3RDb21wb25lbnQuc2V0Q29tcG9uZW50Q3JlYXRvcih0aGlzLmNyZWF0ZVJvd0NvbXBvbmVudC5iaW5kKHRoaXMpKTt0aGlzLmxpc3RDb21wb25lbnQuc2V0Q29tcG9uZW50VXBkYXRlcigoZSx0KT0+e30pLHRoaXMubGlzdENvbXBvbmVudC5zZXRQYXJlbnRDb21wb25lbnQodGhpcyksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5saXN0Q29tcG9uZW50LGx0LkVWRU5UX0ZJRUxEX1BJQ0tFUl9WQUxVRV9TRUxFQ1RFRCxlPT57dGhpcy5vbkxpc3RWYWx1ZVNlbGVjdGVkKGUudmFsdWUsZS5mcm9tRW50ZXJLZXkpfSk7Y29uc3R7Y2VsbFJvd0hlaWdodDplfT10aGlzO2UmJnRoaXMubGlzdENvbXBvbmVudC5zZXRSb3dIZWlnaHQoZSk7Y29uc3QgdD10aGlzLmxpc3RDb21wb25lbnQuZ2V0R3VpKCksaT10aGlzLmxpc3RDb21wb25lbnQuZ2V0QXJpYUVsZW1lbnQoKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0LCJtb3VzZW1vdmUiLHRoaXMub25QaWNrZXJNb3VzZU1vdmUuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodCwibW91c2Vkb3duIixlPT5lLnByZXZlbnREZWZhdWx0KCkpLHQuY2xhc3NMaXN0LmFkZCgiYWctcmljaC1zZWxlY3QtbGlzdCIpO2NvbnN0IHM9ImFnLXJpY2gtc2VsZWN0LWxpc3QtIit0aGlzLmxpc3RDb21wb25lbnQuZ2V0Q29tcElkKCk7aS5zZXRBdHRyaWJ1dGUoImlkIixzKTtlaShpLHRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpKHRoaXMuY29uZmlnLnBpY2tlckFyaWFMYWJlbEtleSx0aGlzLmNvbmZpZy5waWNrZXJBcmlhTGFiZWxWYWx1ZSkpLFJpKHRoaXMuZVdyYXBwZXIsaSl9cmVuZGVyU2VsZWN0ZWRWYWx1ZSgpe2NvbnN0e3ZhbHVlOmUsZURpc3BsYXlGaWVsZDp0LGNvbmZpZzppfT10aGlzLHthbGxvd1R5cGluZzpzLGluaXRpYWxJbnB1dFZhbHVlOnJ9PXRoaXMuY29uZmlnLG89dGhpcy5jb25maWcudmFsdWVGb3JtYXR0ZXI/dGhpcy5jb25maWcudmFsdWVGb3JtYXR0ZXIoZSk6ZTtpZihzKXJldHVybiB2b2lkIHRoaXMuZUlucHV0LnNldFZhbHVlKG51bGwhPXI/cjpvKTtsZXQgbixhO2lmKGkuY2VsbFJlbmRlcmVyJiYobj10aGlzLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldENlbGxSZW5kZXJlckRldGFpbHModGhpcy5jb25maWcse3ZhbHVlOmUsdmFsdWVGb3JtYXR0ZWQ6b30pKSxuJiYoYT1uLm5ld0FnU3RhY2tJbnN0YW5jZSgpKSxhKW1zKHQpLEdzKGEsdCksYS50aGVuKGU9Pnt0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT50aGlzLmdldENvbnRleHQoKS5kZXN0cm95QmVhbihlKSl9KTtlbHNlIGlmKGIodGhpcy52YWx1ZSkpdC5pbm5lclRleHQ9byx0LmNsYXNzTGlzdC5yZW1vdmUoImFnLWRpc3BsYXktYXMtcGxhY2Vob2xkZXIiKTtlbHNle2NvbnN0e3BsYWNlaG9sZGVyOmV9PWk7YihlKT8odC5pbm5lckhUTUw9IiIrZnQoZSksdC5jbGFzc0xpc3QuYWRkKCJhZy1kaXNwbGF5LWFzLXBsYWNlaG9sZGVyIikpOm1zKHQpfX1nZXRDdXJyZW50VmFsdWVJbmRleCgpe2NvbnN0e2N1cnJlbnRMaXN0OmUsdmFsdWU6dH09dGhpcztpZihudWxsPT10fHwhZSlyZXR1cm4tMTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krKylpZihlW2ldPT09dClyZXR1cm4gaTtyZXR1cm4tMX1oaWdobGlnaHRGaWx0ZXJNYXRjaCgpe3ZhciBlO251bGw9PT0oZT10aGlzLmxpc3RDb21wb25lbnQpfHx2b2lkIDA9PT1lfHxlLmZvckVhY2hSZW5kZXJlZFJvdygoZSx0KT0+e2UuaGlnaGxpZ2h0U3RyaW5nKHRoaXMuc2VhcmNoU3RyaW5nKX0pfWhpZ2hsaWdodFNlbGVjdGVkVmFsdWUoZSl7dmFyIHQ7bnVsbD09ZSYmKGU9dGhpcy5nZXRDdXJyZW50VmFsdWVJbmRleCgpKSx0aGlzLmhpZ2hsaWdodGVkSXRlbT1lLG51bGw9PT0odD10aGlzLmxpc3RDb21wb25lbnQpfHx2b2lkIDA9PT10fHx0LmZvckVhY2hSZW5kZXJlZFJvdygodCxpKT0+e2NvbnN0IHM9LTEhPT1lJiZ0aGlzLmhpZ2hsaWdodGVkSXRlbT09PWk7dC51cGRhdGVIaWdobGlnaHRlZChzKX0pfXNldFJvd0hlaWdodChlKXtlIT09dGhpcy5jZWxsUm93SGVpZ2h0JiYodGhpcy5jZWxsUm93SGVpZ2h0PWUpLHRoaXMubGlzdENvbXBvbmVudCYmdGhpcy5saXN0Q29tcG9uZW50LnNldFJvd0hlaWdodChlKX1jcmVhdGVQaWNrZXJDb21wb25lbnQoKXtjb25zdHt2YWx1ZXM6ZX09dGhpcztyZXR1cm4gZSYmdGhpcy5zZXRWYWx1ZUxpc3Qoe3ZhbHVlTGlzdDplfSksdGhpcy5saXN0Q29tcG9uZW50fXNldFNlYXJjaFN0cmluZ0NyZWF0b3IoZSl7dGhpcy5zZWFyY2hTdHJpbmdDcmVhdG9yPWV9c2V0VmFsdWVMaXN0KGUpe2NvbnN0e3ZhbHVlTGlzdDp0LHJlZnJlc2g6aX09ZTt0aGlzLmxpc3RDb21wb25lbnQmJnRoaXMuY3VycmVudExpc3QhPT10JiYodGhpcy5jdXJyZW50TGlzdD10LHRoaXMubGlzdENvbXBvbmVudC5zZXRNb2RlbCh7Z2V0Um93Q291bnQ6KCk9PnQubGVuZ3RoLGdldFJvdzplPT50W2VdLGFyZVJvd3NFcXVhbDooZSx0KT0+ZT09PXR9KSxpJiYodGhpcy52YWx1ZXM/dGhpcy5saXN0Q29tcG9uZW50LnJlZnJlc2goITApOih0aGlzLnZhbHVlcz10LHRoaXMuaXNQaWNrZXJEaXNwbGF5ZWQmJnRoaXMuc2hvd0N1cnJlbnRWYWx1ZUluUGlja2VyKCkpKSl9c2hvd1BpY2tlcigpe3N1cGVyLnNob3dQaWNrZXIoKSx0aGlzLnNob3dDdXJyZW50VmFsdWVJblBpY2tlcigpLHRoaXMuZGlzcGxheU9ySGlkZVBpY2tlcigpfXNob3dDdXJyZW50VmFsdWVJblBpY2tlcigpe3ZhciBlLHQ7aWYoIXRoaXMubGlzdENvbXBvbmVudClyZXR1cm47aWYoIXRoaXMuY3VycmVudExpc3QpcmV0dXJuIHZvaWQodGhpcy5pc1BpY2tlckRpc3BsYXllZCYmdGhpcy5lTG9hZGluZyYmdGhpcy5saXN0Q29tcG9uZW50LmFwcGVuZENoaWxkKHRoaXMuZUxvYWRpbmcpKTsobnVsbD09PShlPXRoaXMuZUxvYWRpbmcpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLm9mZnNldFBhcmVudCkmJihudWxsPT09KHQ9dGhpcy5lTG9hZGluZy5wYXJlbnRFbGVtZW50KXx8dm9pZCAwPT09dHx8dC5yZW1vdmVDaGlsZCh0aGlzLmVMb2FkaW5nKSk7Y29uc3QgaT10aGlzLmdldEN1cnJlbnRWYWx1ZUluZGV4KCk7LTEhPT1pPyh0aGlzLmxpc3RDb21wb25lbnQucmVmcmVzaCgpLHRoaXMubGlzdENvbXBvbmVudC5lbnN1cmVJbmRleFZpc2libGUoaSksdGhpcy5saXN0Q29tcG9uZW50LnJlZnJlc2goITApLHRoaXMuaGlnaGxpZ2h0U2VsZWN0ZWRWYWx1ZShpKSk6dGhpcy5saXN0Q29tcG9uZW50LnJlZnJlc2goKX1iZWZvcmVIaWRlUGlja2VyKCl7dGhpcy5oaWdobGlnaHRlZEl0ZW09LTEsc3VwZXIuYmVmb3JlSGlkZVBpY2tlcigpfW9uV3JhcHBlckZvY3VzKCl7aWYoIXRoaXMuZUlucHV0KXJldHVybjtjb25zdCBlPXRoaXMuZUlucHV0LmdldEZvY3VzYWJsZUVsZW1lbnQoKTtlLmZvY3VzKCksZS5zZWxlY3QoKX1vbldyYXBwZXJGb2N1c091dChlKXt0aGlzLmVXcmFwcGVyLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCl8fHRoaXMuaGlkZVBpY2tlcigpfWJ1aWxkU2VhcmNoU3RyaW5nRnJvbUtleWJvYXJkRXZlbnQoZSl7bGV0e2tleTp0fT1lO2lmKHQ9PT1qcy5CQUNLU1BBQ0UpdGhpcy5zZWFyY2hTdHJpbmc9dGhpcy5zZWFyY2hTdHJpbmcuc2xpY2UoMCwtMSksdD0iIjtlbHNlIGlmKCFVcyhlKSlyZXR1cm47ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuc2VhcmNoVGV4dEZyb21DaGFyYWN0ZXIodCl9c2VhcmNoVGV4dEZyb21DaGFyYWN0ZXIoZSl7dGhpcy5zZWFyY2hTdHJpbmcrPWUsdGhpcy5ydW5TZWFyY2goKSx0aGlzLmNsZWFyU2VhcmNoU3RyaW5nKCl9c2VhcmNoVGV4dEZyb21TdHJpbmcoZSl7bnVsbD09ZSYmKGU9IiIpLHRoaXMuc2VhcmNoU3RyaW5nPWUsdGhpcy5ydW5TZWFyY2goKX1idWlsZFNlYXJjaFN0cmluZ3MoZSl7Y29uc3R7dmFsdWVGb3JtYXR0ZXI6dD0oZT0+ZSl9PXRoaXMuY29uZmlnO2xldCBpO3JldHVybiJudW1iZXIiPT10eXBlb2YgZVswXXx8InN0cmluZyI9PXR5cGVvZiBlWzBdP2k9ZS5tYXAoZT0+dChlKSk6Im9iamVjdCI9PXR5cGVvZiBlWzBdJiZ0aGlzLnNlYXJjaFN0cmluZ0NyZWF0b3ImJihpPXRoaXMuc2VhcmNoU3RyaW5nQ3JlYXRvcihlKSksaX1nZXRTdWdnZXN0aW9uc0FuZEZpbHRlcmVkVmFsdWVzKGUsdCl7bGV0IGk9W10scz1bXTtpZighZS5sZW5ndGgpcmV0dXJue3N1Z2dlc3Rpb25zOmksZmlsdGVyZWRWYWx1ZXM6c307Y29uc3R7c2VhcmNoVHlwZTpyPSJmdXp6eSIsZmlsdGVyTGlzdDpvfT10aGlzLmNvbmZpZztpZigiZnV6enkiPT09cil7Y29uc3QgZT1fcyh0aGlzLnNlYXJjaFN0cmluZyx0LCEwKTtpPWUudmFsdWVzO2NvbnN0IHI9ZS5pbmRpY2VzO2lmKG8mJnIubGVuZ3RoKWZvcihsZXQgZT0wO2U8ci5sZW5ndGg7ZSsrKXMucHVzaCh0aGlzLnZhbHVlc1tyW2VdXSl9ZWxzZSBpPXQuZmlsdGVyKChlLHQpPT57Y29uc3QgaT1lLnRvTG9jYWxlTG93ZXJDYXNlKCksbj10aGlzLnNlYXJjaFN0cmluZy50b0xvY2FsZUxvd2VyQ2FzZSgpLGE9Im1hdGNoIj09PXI/aS5zdGFydHNXaXRoKG4pOi0xIT09aS5pbmRleE9mKG4pO3JldHVybiBvJiZhJiZzLnB1c2godGhpcy52YWx1ZXNbdF0pLGF9KTtyZXR1cm57c3VnZ2VzdGlvbnM6aSxmaWx0ZXJlZFZhbHVlczpzfX1maWx0ZXJMaXN0TW9kZWwoZSl7Y29uc3R7ZmlsdGVyTGlzdDp0fT10aGlzLmNvbmZpZzt0JiYodGhpcy5zZXRWYWx1ZUxpc3Qoe3ZhbHVlTGlzdDplLHJlZnJlc2g6ITB9KSx0aGlzLmFsaWduUGlja2VyVG9Db21wb25lbnQoKSl9cnVuU2VhcmNoKCl7dmFyIGUsdDtjb25zdHt2YWx1ZXM6aX09dGhpcyxzPXRoaXMuYnVpbGRTZWFyY2hTdHJpbmdzKGkpO2lmKCFzKXJldHVybiB2b2lkIHRoaXMuaGlnaGxpZ2h0U2VsZWN0ZWRWYWx1ZSgtMSk7Y29uc3R7c3VnZ2VzdGlvbnM6cixmaWx0ZXJlZFZhbHVlczpvfT10aGlzLmdldFN1Z2dlc3Rpb25zQW5kRmlsdGVyZWRWYWx1ZXModGhpcy5zZWFyY2hTdHJpbmcscykse2ZpbHRlckxpc3Q6bixoaWdobGlnaHRNYXRjaDphLHNlYXJjaFR5cGU6bD0iZnV6enkifT10aGlzLmNvbmZpZyxkPW8ubGVuZ3RoLGM9ISghbnx8IiI9PT10aGlzLnNlYXJjaFN0cmluZyk7aWYodGhpcy5maWx0ZXJMaXN0TW9kZWwoYz9vOmkpLHIubGVuZ3RoKXtjb25zdCBlPWM/MDpzLmluZGV4T2YoclswXSk7dGhpcy5zZWxlY3RMaXN0SXRlbShlKX1lbHNlIGlmKHRoaXMuaGlnaGxpZ2h0U2VsZWN0ZWRWYWx1ZSgtMSksIWN8fGQpbnVsbD09PShlPXRoaXMubGlzdENvbXBvbmVudCl8fHZvaWQgMD09PWV8fGUuZW5zdXJlSW5kZXhWaXNpYmxlKDApO2Vsc2UgaWYoYyl7dGhpcy5nZXRBcmlhRWxlbWVudCgpLnJlbW92ZUF0dHJpYnV0ZSgiZGF0YS1hY3RpdmUtb3B0aW9uIik7Y29uc3QgZT1udWxsPT09KHQ9dGhpcy5saXN0Q29tcG9uZW50KXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRBcmlhRWxlbWVudCgpO2UmJmRpKGUsbnVsbCl9YSYmImZ1enp5IiE9PWwmJnRoaXMuaGlnaGxpZ2h0RmlsdGVyTWF0Y2goKSx0aGlzLmRpc3BsYXlPckhpZGVQaWNrZXIoKX1kaXNwbGF5T3JIaWRlUGlja2VyKCl7dmFyIGU7Y29uc3QgdD1udWxsPT09KGU9dGhpcy5saXN0Q29tcG9uZW50KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRHdWkoKSxpPSEhdGhpcy5jdXJyZW50TGlzdCYmMD09PXRoaXMuY3VycmVudExpc3QubGVuZ3RoO251bGw9PXR8fHQuY2xhc3NMaXN0LnRvZ2dsZSgiYWctaGlkZGVuIixpKX1jbGVhclNlYXJjaFN0cmluZygpe3RoaXMuc2VhcmNoU3RyaW5nPSIifXNlbGVjdExpc3RJdGVtKGUsdCl7aWYoIXRoaXMuaXNQaWNrZXJEaXNwbGF5ZWR8fCF0aGlzLmN1cnJlbnRMaXN0fHwhdGhpcy5saXN0Q29tcG9uZW50fHxlPDB8fGU+PXRoaXMuY3VycmVudExpc3QubGVuZ3RoKXJldHVybjt0aGlzLmxpc3RDb21wb25lbnQuZW5zdXJlSW5kZXhWaXNpYmxlKGUsIXQpJiYhdCYmdGhpcy5saXN0Q29tcG9uZW50LnJlZnJlc2goITApLHRoaXMuaGlnaGxpZ2h0U2VsZWN0ZWRWYWx1ZShlKX1zZXRWYWx1ZShlLHQsaSl7Y29uc3Qgcz10aGlzLmN1cnJlbnRMaXN0P3RoaXMuY3VycmVudExpc3QuaW5kZXhPZihlKTotMTtyZXR1cm4tMT09PXM/dGhpczoodGhpcy52YWx1ZT1lLGl8fHRoaXMuc2VsZWN0TGlzdEl0ZW0ocyksdGhpcy5yZW5kZXJTZWxlY3RlZFZhbHVlKCksc3VwZXIuc2V0VmFsdWUoZSx0KSl9Y3JlYXRlUm93Q29tcG9uZW50KGUpe2NvbnN0IHQ9bmV3IHFkKHRoaXMuY29uZmlnLHRoaXMuZVdyYXBwZXIpO3Quc2V0UGFyZW50Q29tcG9uZW50KHRoaXMubGlzdENvbXBvbmVudCksdGhpcy5nZXRDb250ZXh0KCkuY3JlYXRlQmVhbih0KSx0LnNldFN0YXRlKGUpO2NvbnN0e2hpZ2hsaWdodE1hdGNoOmksc2VhcmNoVHlwZTpzPSJmdXp6eSJ9PXRoaXMuY29uZmlnO3JldHVybiBpJiYiZnV6enkiIT09cyYmdC5oaWdobGlnaHRTdHJpbmcodGhpcy5zZWFyY2hTdHJpbmcpLHR9Z2V0Um93Rm9yTW91c2VFdmVudChlKXtjb25zdHtsaXN0Q29tcG9uZW50OnR9PXRoaXM7aWYoIXQpcmV0dXJuLTE7Y29uc3QgaT0obnVsbD09dD92b2lkIDA6dC5nZXRHdWkoKSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscz10LmdldFNjcm9sbFRvcCgpLHI9ZS5jbGllbnRZLWkudG9wK3M7cmV0dXJuIE1hdGguZmxvb3Ioci90LmdldFJvd0hlaWdodCgpKX1vblBpY2tlck1vdXNlTW92ZShlKXtpZighdGhpcy5saXN0Q29tcG9uZW50KXJldHVybjtjb25zdCB0PXRoaXMuZ2V0Um93Rm9yTW91c2VFdmVudChlKTstMSE9PXQmJnQhPXRoaXMubGFzdFJvd0hvdmVyZWQmJih0aGlzLmxhc3RSb3dIb3ZlcmVkPXQsdGhpcy5zZWxlY3RMaXN0SXRlbSh0LCEwKSl9b25OYXZpZ2F0aW9uS2V5RG93bihlLHQpe2UucHJldmVudERlZmF1bHQoKTtjb25zdCBpPXQ9PT1qcy5ET1dOO2lmKCF0aGlzLmlzUGlja2VyRGlzcGxheWVkJiZpKXJldHVybiB2b2lkIHRoaXMuc2hvd1BpY2tlcigpO2NvbnN0IHM9dGhpcy5oaWdobGlnaHRlZEl0ZW0scj0tMT09PXM/MDpzKyhpPzE6LTEpO3RoaXMuc2VsZWN0TGlzdEl0ZW0ocil9b25FbnRlcktleURvd24oZSl7dGhpcy5pc1BpY2tlckRpc3BsYXllZCYmKGUucHJldmVudERlZmF1bHQoKSx0aGlzLmN1cnJlbnRMaXN0JiZ0aGlzLm9uTGlzdFZhbHVlU2VsZWN0ZWQodGhpcy5jdXJyZW50TGlzdFt0aGlzLmhpZ2hsaWdodGVkSXRlbV0sITApKX1vblRhYktleURvd24oKXt0aGlzLmlzUGlja2VyRGlzcGxheWVkJiZ0aGlzLmN1cnJlbnRMaXN0JiZ0aGlzLnNldFZhbHVlKHRoaXMuY3VycmVudExpc3RbdGhpcy5oaWdobGlnaHRlZEl0ZW1dLCExLCEwKX1vbkxpc3RWYWx1ZVNlbGVjdGVkKGUsdCl7dGhpcy5zZXRWYWx1ZShlLCExLCEwKSx0aGlzLmRpc3BhdGNoUGlja2VyRXZlbnQoZSx0KSx0aGlzLmhpZGVQaWNrZXIoKX1kaXNwYXRjaFBpY2tlckV2ZW50KGUsdCl7Y29uc3QgaT17dHlwZTpsdC5FVkVOVF9GSUVMRF9QSUNLRVJfVkFMVUVfU0VMRUNURUQsZnJvbUVudGVyS2V5OnQsdmFsdWU6ZX07dGhpcy5kaXNwYXRjaEV2ZW50KGkpfWdldEZvY3VzYWJsZUVsZW1lbnQoKXtjb25zdHthbGxvd1R5cGluZzplfT10aGlzLmNvbmZpZztyZXR1cm4gZT90aGlzLmVJbnB1dC5nZXRGb2N1c2FibGVFbGVtZW50KCk6c3VwZXIuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpfW9uS2V5RG93bihlKXtjb25zdCB0PWUua2V5LHthbGxvd1R5cGluZzppfT10aGlzLmNvbmZpZztzd2l0Y2godCl7Y2FzZSBqcy5MRUZUOmNhc2UganMuUklHSFQ6Y2FzZSBqcy5QQUdFX0hPTUU6Y2FzZSBqcy5QQUdFX0VORDppfHxlLnByZXZlbnREZWZhdWx0KCk7YnJlYWs7Y2FzZSBqcy5QQUdFX1VQOmNhc2UganMuUEFHRV9ET1dOOmUucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIGpzLkRPV046Y2FzZSBqcy5VUDp0aGlzLm9uTmF2aWdhdGlvbktleURvd24oZSx0KTticmVhaztjYXNlIGpzLkVTQ0FQRTp0aGlzLmlzUGlja2VyRGlzcGxheWVkJiYoQ3ModGhpcy5saXN0Q29tcG9uZW50LmdldEd1aSgpKSYmKGUucHJldmVudERlZmF1bHQoKSxZZShlKSksdGhpcy5oaWRlUGlja2VyKCkpO2JyZWFrO2Nhc2UganMuRU5URVI6dGhpcy5vbkVudGVyS2V5RG93bihlKTticmVhaztjYXNlIGpzLlRBQjp0aGlzLm9uVGFiS2V5RG93bigpO2JyZWFrO2RlZmF1bHQ6aXx8dGhpcy5idWlsZFNlYXJjaFN0cmluZ0Zyb21LZXlib2FyZEV2ZW50KGUpfX1kZXN0cm95KCl7dGhpcy5saXN0Q29tcG9uZW50JiYodGhpcy5kZXN0cm95QmVhbih0aGlzLmxpc3RDb21wb25lbnQpLHRoaXMubGlzdENvbXBvbmVudD12b2lkIDApLHRoaXMuZUxvYWRpbmc9dm9pZCAwLHN1cGVyLmRlc3Ryb3koKX19SmQoW2NlKCJ1c2VyQ29tcG9uZW50RmFjdG9yeSIpXSxlYy5wcm90b3R5cGUsInVzZXJDb21wb25lbnRGYWN0b3J5Iix2b2lkIDApLEpkKFt1cigiZUlucHV0IildLGVjLnByb3RvdHlwZSwiZUlucHV0Iix2b2lkIDApO3ZhciB0Yz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBpYyBleHRlbmRzIFRye2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsaWMuVEVNUExBVEUpLHRoaXMubGFiZWxBbGlnbm1lbnQ9InRvcCJ9aW5pdCgpe3RoaXMuZVNsaWRlci5hZGRDc3NDbGFzcygiYWctc2xpZGVyLWZpZWxkIil9b25WYWx1ZUNoYW5nZShlKXtjb25zdCB0PWx0LkVWRU5UX0ZJRUxEX1ZBTFVFX0NIQU5HRUQ7cmV0dXJuIHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZVRleHQsdCwoKT0+e2NvbnN0IHQ9cGFyc2VGbG9hdCh0aGlzLmVUZXh0LmdldFZhbHVlKCkpO3RoaXMuZVNsaWRlci5zZXRWYWx1ZSh0LnRvU3RyaW5nKCksITApLGUodHx8MCl9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVTbGlkZXIsdCwoKT0+e2NvbnN0IHQ9dGhpcy5lU2xpZGVyLmdldFZhbHVlKCk7dGhpcy5lVGV4dC5zZXRWYWx1ZSh0LCEwKSxlKHBhcnNlRmxvYXQodCkpfSksdGhpc31zZXRTbGlkZXJXaWR0aChlKXtyZXR1cm4gdGhpcy5lU2xpZGVyLnNldFdpZHRoKGUpLHRoaXN9c2V0VGV4dEZpZWxkV2lkdGgoZSl7cmV0dXJuIHRoaXMuZVRleHQuc2V0V2lkdGgoZSksdGhpc31zZXRNaW5WYWx1ZShlKXtyZXR1cm4gdGhpcy5lU2xpZGVyLnNldE1pblZhbHVlKGUpLHRoaXMuZVRleHQuc2V0TWluKGUpLHRoaXN9c2V0TWF4VmFsdWUoZSl7cmV0dXJuIHRoaXMuZVNsaWRlci5zZXRNYXhWYWx1ZShlKSx0aGlzLmVUZXh0LnNldE1heChlKSx0aGlzfWdldFZhbHVlKCl7cmV0dXJuIHRoaXMuZVRleHQuZ2V0VmFsdWUoKX1zZXRWYWx1ZShlKXtyZXR1cm4gdGhpcy5nZXRWYWx1ZSgpPT09ZXx8KHRoaXMuZVRleHQuc2V0VmFsdWUoZSwhMCksdGhpcy5lU2xpZGVyLnNldFZhbHVlKGUsITApLHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpsdC5FVkVOVF9GSUVMRF9WQUxVRV9DSEFOR0VEfSkpLHRoaXN9c2V0U3RlcChlKXtyZXR1cm4gdGhpcy5lU2xpZGVyLnNldFN0ZXAoZSksdGhpcy5lVGV4dC5zZXRTdGVwKGUpLHRoaXN9fWljLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1zbGlkZXIiPlxuICAgICAgICAgICAgPGxhYmVsIHJlZj0iZUxhYmVsIj48L2xhYmVsPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctd3JhcHBlciBhZy1zbGlkZXItd3JhcHBlciI+XG4gICAgICAgICAgICAgICAgPGFnLWlucHV0LXJhbmdlIHJlZj0iZVNsaWRlciI+PC9hZy1pbnB1dC1yYW5nZT5cbiAgICAgICAgICAgICAgICA8YWctaW5wdXQtbnVtYmVyLWZpZWxkIHJlZj0iZVRleHQiPjwvYWctaW5wdXQtbnVtYmVyLWZpZWxkPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PicsdGMoW3VyKCJlTGFiZWwiKV0saWMucHJvdG90eXBlLCJlTGFiZWwiLHZvaWQgMCksdGMoW3VyKCJlU2xpZGVyIildLGljLnByb3RvdHlwZSwiZVNsaWRlciIsdm9pZCAwKSx0YyhbdXIoImVUZXh0IildLGljLnByb3RvdHlwZSwiZVRleHQiLHZvaWQgMCksdGMoW2FlXSxpYy5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBzYz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyByYyBleHRlbmRzIGNye2NvbnN0cnVjdG9yKGU9e30pe3N1cGVyKHJjLmdldFRlbXBsYXRlKGUpKSx0aGlzLnN1cHByZXNzRW5hYmxlZENoZWNrYm94PSEwLHRoaXMuc3VwcHJlc3NPcGVuQ2xvc2VJY29ucz0hMTtjb25zdHt0aXRsZTp0LGVuYWJsZWQ6aSxpdGVtczpzLHN1cHByZXNzRW5hYmxlZENoZWNrYm94OnIsc3VwcHJlc3NPcGVuQ2xvc2VJY29uczpvfT1lO3RoaXMudGl0bGU9dCx0aGlzLmNzc0lkZW50aWZpZXI9ZS5jc3NJZGVudGlmaWVyfHwiZGVmYXVsdCIsdGhpcy5lbmFibGVkPW51bGw9PWl8fGksdGhpcy5pdGVtcz1zfHxbXSx0aGlzLmFsaWduSXRlbXM9ZS5hbGlnbkl0ZW1zfHwiY2VudGVyIixudWxsIT1yJiYodGhpcy5zdXBwcmVzc0VuYWJsZWRDaGVja2JveD1yKSxudWxsIT1vJiYodGhpcy5zdXBwcmVzc09wZW5DbG9zZUljb25zPW8pfXN0YXRpYyBnZXRUZW1wbGF0ZShlKXtjb25zdCB0PWUuY3NzSWRlbnRpZmllcnx8ImRlZmF1bHQiO3JldHVybmA8ZGl2IGNsYXNzPSJhZy1ncm91cCBhZy0ke3R9LWdyb3VwIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctZ3JvdXAtdGl0bGUtYmFyIGFnLSR7dH0tZ3JvdXAtdGl0bGUtYmFyIGFnLXVuc2VsZWN0YWJsZSIgcmVmPSJlVGl0bGVCYXIiIHJvbGU9ImJ1dHRvbiI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFnLWdyb3VwLXRpdGxlLWJhci1pY29uIGFnLSR7dH0tZ3JvdXAtdGl0bGUtYmFyLWljb24iIHJlZj0iZUdyb3VwT3BlbmVkSWNvbiIgcm9sZT0icHJlc2VudGF0aW9uIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFnLWdyb3VwLXRpdGxlLWJhci1pY29uIGFnLSR7dH0tZ3JvdXAtdGl0bGUtYmFyLWljb24iIHJlZj0iZUdyb3VwQ2xvc2VkSWNvbiIgcm9sZT0icHJlc2VudGF0aW9uIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gcmVmPSJlVGl0bGUiIGNsYXNzPSJhZy1ncm91cC10aXRsZSBhZy0ke3R9LWdyb3VwLXRpdGxlIj48L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgcmVmPSJlVG9vbGJhciIgY2xhc3M9ImFnLWdyb3VwLXRvb2xiYXIgYWctJHt0fS1ncm91cC10b29sYmFyIj5cbiAgICAgICAgICAgICAgICA8YWctY2hlY2tib3ggcmVmPSJjYkdyb3VwRW5hYmxlZCI+PC9hZy1jaGVja2JveD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiByZWY9ImVDb250YWluZXIiIGNsYXNzPSJhZy1ncm91cC1jb250YWluZXIgYWctZ3JvdXAtY29udGFpbmVyLSR7ZS5kaXJlY3Rpb258fCJ2ZXJ0aWNhbCJ9IGFnLSR7dH0tZ3JvdXAtY29udGFpbmVyIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+YH1wb3N0Q29uc3RydWN0KCl7aWYodGhpcy5pdGVtcy5sZW5ndGgpe2NvbnN0IGU9dGhpcy5pdGVtczt0aGlzLml0ZW1zPVtdLHRoaXMuYWRkSXRlbXMoZSl9Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTt0aGlzLmNiR3JvdXBFbmFibGVkLnNldExhYmVsKGUoImVuYWJsZWQiLCJFbmFibGVkIikpLHRoaXMudGl0bGUmJnRoaXMuc2V0VGl0bGUodGhpcy50aXRsZSksdGhpcy5lbmFibGVkJiZ0aGlzLnNldEVuYWJsZWQodGhpcy5lbmFibGVkKSx0aGlzLnNldEFsaWduSXRlbXModGhpcy5hbGlnbkl0ZW1zKSx0aGlzLmhpZGVFbmFibGVkQ2hlY2tib3godGhpcy5zdXBwcmVzc0VuYWJsZWRDaGVja2JveCksdGhpcy5oaWRlT3BlbkNsb3NlSWNvbnModGhpcy5zdXBwcmVzc09wZW5DbG9zZUljb25zKSx0aGlzLnNldHVwRXhwYW5kQ29udHJhY3QoKSx0aGlzLnJlZnJlc2hBcmlhU3RhdHVzKCksdGhpcy5yZWZyZXNoQ2hpbGREaXNwbGF5KCl9c2V0dXBFeHBhbmRDb250cmFjdCgpe3RoaXMuZUdyb3VwQ2xvc2VkSWNvbi5hcHBlbmRDaGlsZChIcygiY29sdW1uU2VsZWN0Q2xvc2VkIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSksdGhpcy5lR3JvdXBPcGVuZWRJY29uLmFwcGVuZENoaWxkKEhzKCJjb2x1bW5TZWxlY3RPcGVuIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lVGl0bGVCYXIsImNsaWNrIiwoKT0+dGhpcy50b2dnbGVHcm91cEV4cGFuZCgpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVUaXRsZUJhciwia2V5ZG93biIsZT0+e3N3aXRjaChlLmtleSl7Y2FzZSBqcy5FTlRFUjpjYXNlIGpzLlNQQUNFOmUucHJldmVudERlZmF1bHQoKSx0aGlzLnRvZ2dsZUdyb3VwRXhwYW5kKCk7YnJlYWs7Y2FzZSBqcy5SSUdIVDpjYXNlIGpzLkxFRlQ6ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMudG9nZ2xlR3JvdXBFeHBhbmQoZS5rZXk9PT1qcy5SSUdIVCl9fSl9cmVmcmVzaEFyaWFTdGF0dXMoKXt0aGlzLnN1cHByZXNzT3BlbkNsb3NlSWNvbnN8fGNpKHRoaXMuZVRpdGxlQmFyLHRoaXMuZXhwYW5kZWQpfXJlZnJlc2hDaGlsZERpc3BsYXkoKXtjb25zdCBlPSF0aGlzLnN1cHByZXNzT3BlbkNsb3NlSWNvbnM7aXModGhpcy5lVG9vbGJhcix0aGlzLmV4cGFuZGVkJiYhdGhpcy5zdXBwcmVzc0VuYWJsZWRDaGVja2JveCksaXModGhpcy5lR3JvdXBPcGVuZWRJY29uLGUmJnRoaXMuZXhwYW5kZWQpLGlzKHRoaXMuZUdyb3VwQ2xvc2VkSWNvbixlJiYhdGhpcy5leHBhbmRlZCl9aXNFeHBhbmRlZCgpe3JldHVybiB0aGlzLmV4cGFuZGVkfXNldEFsaWduSXRlbXMoZSl7dGhpcy5hbGlnbkl0ZW1zIT09ZSYmdGhpcy5yZW1vdmVDc3NDbGFzcygiYWctZ3JvdXAtaXRlbS1hbGlnbm1lbnQtIit0aGlzLmFsaWduSXRlbXMpLHRoaXMuYWxpZ25JdGVtcz1lO2NvbnN0IHQ9ImFnLWdyb3VwLWl0ZW0tYWxpZ25tZW50LSIrdGhpcy5hbGlnbkl0ZW1zO3JldHVybiB0aGlzLmFkZENzc0NsYXNzKHQpLHRoaXN9dG9nZ2xlR3JvdXBFeHBhbmQoZSl7cmV0dXJuIHRoaXMuc3VwcHJlc3NPcGVuQ2xvc2VJY29ucz8odGhpcy5leHBhbmRlZD0hMCx0aGlzLnJlZnJlc2hDaGlsZERpc3BsYXkoKSxpcyh0aGlzLmVDb250YWluZXIsITApLHRoaXMpOihlPW51bGwhPWU/ZTohdGhpcy5leHBhbmRlZCx0aGlzLmV4cGFuZGVkPT09ZXx8KHRoaXMuZXhwYW5kZWQ9ZSx0aGlzLnJlZnJlc2hBcmlhU3RhdHVzKCksdGhpcy5yZWZyZXNoQ2hpbGREaXNwbGF5KCksaXModGhpcy5lQ29udGFpbmVyLGUpLHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTp0aGlzLmV4cGFuZGVkP3JjLkVWRU5UX0VYUEFOREVEOnJjLkVWRU5UX0NPTExBUFNFRH0pKSx0aGlzKX1hZGRJdGVtcyhlKXtlLmZvckVhY2goZT0+dGhpcy5hZGRJdGVtKGUpKX1wcmVwZW5kSXRlbShlKXt0aGlzLmluc2VydEl0ZW0oZSx0aGlzLmVDb250YWluZXIuZmlyc3RDaGlsZCl9YWRkSXRlbShlKXt0aGlzLmluc2VydEl0ZW0oZSxudWxsKX1pbnNlcnRJdGVtKGUsdCl7Y29uc3QgaT10aGlzLmVDb250YWluZXIscz1lIGluc3RhbmNlb2YgY3I/ZS5nZXRHdWkoKTplO3MuY2xhc3NMaXN0LmFkZCgiYWctZ3JvdXAtaXRlbSIsYGFnLSR7dGhpcy5jc3NJZGVudGlmaWVyfS1ncm91cC1pdGVtYCksaS5pbnNlcnRCZWZvcmUocyx0KSx0aGlzLml0ZW1zLnB1c2gocyl9aGlkZUl0ZW0oZSx0KXtpcyh0aGlzLml0ZW1zW3RdLCFlKX1zZXRUaXRsZShlKXtyZXR1cm4gdGhpcy5lVGl0bGUuaW5uZXJUZXh0PWUsdGhpc31hZGRDc3NDbGFzc1RvVGl0bGVCYXIoZSl7dGhpcy5lVGl0bGVCYXIuY2xhc3NMaXN0LmFkZChlKX1zZXRFbmFibGVkKGUsdCl7cmV0dXJuIHRoaXMuZW5hYmxlZD1lLHRoaXMucmVmcmVzaERpc2FibGVkU3R5bGVzKCksdGhpcy50b2dnbGVHcm91cEV4cGFuZChlKSx0fHx0aGlzLmNiR3JvdXBFbmFibGVkLnNldFZhbHVlKGUpLHRoaXN9aXNFbmFibGVkKCl7cmV0dXJuIHRoaXMuZW5hYmxlZH1vbkVuYWJsZUNoYW5nZShlKXtyZXR1cm4gdGhpcy5jYkdyb3VwRW5hYmxlZC5vblZhbHVlQ2hhbmdlKHQ9Pnt0aGlzLnNldEVuYWJsZWQodCwhMCksZSh0KX0pLHRoaXN9aGlkZUVuYWJsZWRDaGVja2JveChlKXtyZXR1cm4gdGhpcy5zdXBwcmVzc0VuYWJsZWRDaGVja2JveD1lLHRoaXMucmVmcmVzaENoaWxkRGlzcGxheSgpLHRoaXMucmVmcmVzaERpc2FibGVkU3R5bGVzKCksdGhpc31oaWRlT3BlbkNsb3NlSWNvbnMoZSl7cmV0dXJuIHRoaXMuc3VwcHJlc3NPcGVuQ2xvc2VJY29ucz1lLGUmJnRoaXMudG9nZ2xlR3JvdXBFeHBhbmQoITApLHRoaXN9cmVmcmVzaERpc2FibGVkU3R5bGVzKCl7dGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1kaXNhYmxlZCIsIXRoaXMuZW5hYmxlZCksdGhpcy5zdXBwcmVzc0VuYWJsZWRDaGVja2JveCYmIXRoaXMuZW5hYmxlZD8odGhpcy5lVGl0bGVCYXIuY2xhc3NMaXN0LmFkZCgiYWctZGlzYWJsZWQtZ3JvdXAtdGl0bGUtYmFyIiksdGhpcy5lVGl0bGVCYXIucmVtb3ZlQXR0cmlidXRlKCJ0YWJpbmRleCIpKToodGhpcy5lVGl0bGVCYXIuY2xhc3NMaXN0LnJlbW92ZSgiYWctZGlzYWJsZWQtZ3JvdXAtdGl0bGUtYmFyIiksdGhpcy5lVGl0bGVCYXIuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsIjAiKSksdGhpcy5lQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoImFnLWRpc2FibGVkLWdyb3VwLWNvbnRhaW5lciIsIXRoaXMuZW5hYmxlZCl9fXJjLkVWRU5UX0VYUEFOREVEPSJleHBhbmRlZCIscmMuRVZFTlRfQ09MTEFQU0VEPSJjb2xsYXBzZWQiLHNjKFt1cigiZVRpdGxlQmFyIildLHJjLnByb3RvdHlwZSwiZVRpdGxlQmFyIix2b2lkIDApLHNjKFt1cigiZUdyb3VwT3BlbmVkSWNvbiIpXSxyYy5wcm90b3R5cGUsImVHcm91cE9wZW5lZEljb24iLHZvaWQgMCksc2MoW3VyKCJlR3JvdXBDbG9zZWRJY29uIildLHJjLnByb3RvdHlwZSwiZUdyb3VwQ2xvc2VkSWNvbiIsdm9pZCAwKSxzYyhbdXIoImVUb29sYmFyIildLHJjLnByb3RvdHlwZSwiZVRvb2xiYXIiLHZvaWQgMCksc2MoW3VyKCJjYkdyb3VwRW5hYmxlZCIpXSxyYy5wcm90b3R5cGUsImNiR3JvdXBFbmFibGVkIix2b2lkIDApLHNjKFt1cigiZVRpdGxlIildLHJjLnByb3RvdHlwZSwiZVRpdGxlIix2b2lkIDApLHNjKFt1cigiZUNvbnRhaW5lciIpXSxyYy5wcm90b3R5cGUsImVDb250YWluZXIiLHZvaWQgMCksc2MoW2FlXSxyYy5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBvYz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBuYyBleHRlbmRzIGhke2NvbnN0cnVjdG9yKGU9MCx0KXtzdXBlcignPGRpdiBjbGFzcz0iYWctbWVudS1saXN0IiByb2xlPSJ0cmVlIj48L2Rpdj4nKSx0aGlzLmxldmVsPWUsdGhpcy5tZW51SXRlbXM9W10sdGhpcy5wYXJhbXM9bnVsbCE9dD90Ontjb2x1bW46bnVsbCxub2RlOm51bGwsdmFsdWU6bnVsbH19cG9zdENvbnN0cnVjdCgpe3RoaXMuaW5pdGlhbGlzZVRhYkd1YXJkKHtvblRhYktleURvd246ZT0+dGhpcy5vblRhYktleURvd24oZSksaGFuZGxlS2V5RG93bjplPT50aGlzLmhhbmRsZUtleURvd24oZSksb25Gb2N1c0luOmU9PnRoaXMuaGFuZGxlRm9jdXNJbihlKSxvbkZvY3VzT3V0OmU9PnRoaXMuaGFuZGxlRm9jdXNPdXQoZSl9KX1vblRhYktleURvd24oZSl7Y29uc3QgdD10aGlzLmdldFBhcmVudENvbXBvbmVudCgpLGk9dCYmdC5nZXRHdWkoKTtpJiZpLmNsYXNzTGlzdC5jb250YWlucygiYWctZm9jdXMtbWFuYWdlZCIpfHxlLnByZXZlbnREZWZhdWx0KCksZS5zaGlmdEtleSYmdGhpcy5jbG9zZUlmSXNDaGlsZChlKX1oYW5kbGVLZXlEb3duKGUpe3N3aXRjaChlLmtleSl7Y2FzZSBqcy5VUDpjYXNlIGpzLlJJR0hUOmNhc2UganMuRE9XTjpjYXNlIGpzLkxFRlQ6ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaGFuZGxlTmF2S2V5KGUua2V5KTticmVhaztjYXNlIGpzLkVTQ0FQRTp0aGlzLmNsb3NlSWZJc0NoaWxkKCkmJlllKGUpfX1oYW5kbGVGb2N1c0luKGUpe3ZhciB0LGk7Y29uc3Qgcz1lLnJlbGF0ZWRUYXJnZXQ7KHRoaXMudGFiR3VhcmRDdHJsLmlzVGFiR3VhcmQocyl8fCF0aGlzLmdldEd1aSgpLmNvbnRhaW5zKHMpJiYhKG51bGw9PT0oaT1udWxsPT09KHQ9dGhpcy5hY3RpdmVNZW51SXRlbSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0U3ViTWVudUd1aSgpKXx8dm9pZCAwPT09aT92b2lkIDA6aS5jb250YWlucyhzKSkpJiYodGhpcy5hY3RpdmVNZW51SXRlbT90aGlzLmFjdGl2ZU1lbnVJdGVtLmFjdGl2YXRlKCk6dGhpcy5hY3RpdmF0ZUZpcnN0SXRlbSgpKX1oYW5kbGVGb2N1c091dChlKXt2YXIgdDtjb25zdCBpPWUucmVsYXRlZFRhcmdldDshdGhpcy5hY3RpdmVNZW51SXRlbXx8dGhpcy5nZXRHdWkoKS5jb250YWlucyhpKXx8KG51bGw9PT0odD10aGlzLmFjdGl2ZU1lbnVJdGVtLmdldFN1Yk1lbnVHdWkoKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY29udGFpbnMoaSkpfHx0aGlzLmFjdGl2ZU1lbnVJdGVtLmlzU3ViTWVudU9wZW5pbmcoKXx8dGhpcy5hY3RpdmVNZW51SXRlbS5kZWFjdGl2YXRlKCl9Y2xlYXJBY3RpdmVJdGVtKCl7dGhpcy5hY3RpdmVNZW51SXRlbSYmKHRoaXMuYWN0aXZlTWVudUl0ZW0uZGVhY3RpdmF0ZSgpLHRoaXMuYWN0aXZlTWVudUl0ZW09bnVsbCl9YWRkTWVudUl0ZW1zKGUpe251bGwhPWUmJnRyLmFsbChlLm1hcChlPT4ic2VwYXJhdG9yIj09PWU/dHIucmVzb2x2ZSh7ZUd1aTp0aGlzLmNyZWF0ZVNlcGFyYXRvcigpfSk6InN0cmluZyI9PXR5cGVvZiBlPyhjb25zb2xlLndhcm4oIkFHIEdyaWQ6IHVucmVjb2duaXNlZCBtZW51IGl0ZW0gIitlKSx0ci5yZXNvbHZlKHtlR3VpOm51bGx9KSk6dGhpcy5hZGRJdGVtKGUpKSkudGhlbihlPT57ZS5mb3JFYWNoKGU9PnsobnVsbD09ZT92b2lkIDA6ZS5lR3VpKSYmKHRoaXMuYXBwZW5kQ2hpbGQoZS5lR3VpKSxlLmNvbXAmJnRoaXMubWVudUl0ZW1zLnB1c2goZS5jb21wKSl9KX0pfWFkZEl0ZW0oZSl7Y29uc3QgdD10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBjYyk7cmV0dXJuIHQuaW5pdCh7bWVudUl0ZW1EZWY6ZSxpc0Fub3RoZXJTdWJNZW51T3BlbjooKT0+dGhpcy5tZW51SXRlbXMuc29tZShlPT5lLmlzU3ViTWVudU9wZW4oKSksbGV2ZWw6dGhpcy5sZXZlbCxjb250ZXh0UGFyYW1zOnRoaXMucGFyYW1zfSkudGhlbigoKT0+KHQuc2V0UGFyZW50Q29tcG9uZW50KHRoaXMpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHQsY2MuRVZFTlRfQ0xPU0VfTUVOVSxlPT57dGhpcy5kaXNwYXRjaEV2ZW50KGUpfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodCxjYy5FVkVOVF9NRU5VX0lURU1fQUNUSVZBVEVELGU9Pnt0aGlzLmFjdGl2ZU1lbnVJdGVtJiZ0aGlzLmFjdGl2ZU1lbnVJdGVtIT09ZS5tZW51SXRlbSYmdGhpcy5hY3RpdmVNZW51SXRlbS5kZWFjdGl2YXRlKCksdGhpcy5hY3RpdmVNZW51SXRlbT1lLm1lbnVJdGVtfSkse2NvbXA6dCxlR3VpOnQuZ2V0R3VpKCl9KSl9YWN0aXZhdGVGaXJzdEl0ZW0oKXtjb25zdCBlPXRoaXMubWVudUl0ZW1zLmZpbHRlcihlPT4hZS5pc0Rpc2FibGVkKCkpWzBdO2UmJmUuYWN0aXZhdGUoKX1jcmVhdGVTZXBhcmF0b3IoKXtyZXR1cm4geXMoJ1xuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctbWVudS1zZXBhcmF0b3IiIGFyaWEtaGlkZGVuPSJ0cnVlIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1tZW51LXNlcGFyYXRvci1wYXJ0Ij48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1tZW51LXNlcGFyYXRvci1wYXJ0Ij48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1tZW51LXNlcGFyYXRvci1wYXJ0Ij48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1tZW51LXNlcGFyYXRvci1wYXJ0Ij48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PicpfWhhbmRsZU5hdktleShlKXtzd2l0Y2goZSl7Y2FzZSBqcy5VUDpjYXNlIGpzLkRPV046Y29uc3QgdD10aGlzLmZpbmROZXh0SXRlbShlPT09anMuVVApO3JldHVybiB2b2lkKHQmJnQhPT10aGlzLmFjdGl2ZU1lbnVJdGVtJiZ0LmFjdGl2YXRlKCkpfWU9PT0odGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKT9qcy5SSUdIVDpqcy5MRUZUKT90aGlzLmNsb3NlSWZJc0NoaWxkKCk6dGhpcy5vcGVuQ2hpbGQoKX1jbG9zZUlmSXNDaGlsZChlKXtjb25zdCB0PXRoaXMuZ2V0UGFyZW50Q29tcG9uZW50KCk7cmV0dXJuISEodCYmdCBpbnN0YW5jZW9mIGNjKSYmKGUmJmUucHJldmVudERlZmF1bHQoKSx0LmNsb3NlU3ViTWVudSgpLHQuZ2V0R3VpKCkuZm9jdXMoKSwhMCl9b3BlbkNoaWxkKCl7dGhpcy5hY3RpdmVNZW51SXRlbSYmdGhpcy5hY3RpdmVNZW51SXRlbS5vcGVuU3ViTWVudSghMCl9ZmluZE5leHRJdGVtKGUpe2NvbnN0IHQ9dGhpcy5tZW51SXRlbXMuZmlsdGVyKGU9PiFlLmlzRGlzYWJsZWQoKSk7aWYoIXQubGVuZ3RoKXJldHVybjtpZighdGhpcy5hY3RpdmVNZW51SXRlbSlyZXR1cm4gZT9PZSh0KTp0WzBdO2xldCBpO2UmJnQucmV2ZXJzZSgpO2xldCBzPSExO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKXtjb25zdCByPXRbZV07aWYocyl7aT1yO2JyZWFrfXI9PT10aGlzLmFjdGl2ZU1lbnVJdGVtJiYocz0hMCl9cmV0dXJuIHMmJiFpP3RbMF06aXx8dGhpcy5hY3RpdmVNZW51SXRlbX1kZXN0cm95KCl7dGhpcy5jbGVhckFjdGl2ZUl0ZW0oKSxzdXBlci5kZXN0cm95KCl9fW9jKFtjZSgiZm9jdXNTZXJ2aWNlIildLG5jLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLG9jKFthZV0sbmMucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgYWM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgbGMgZXh0ZW5kcyBoZHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMud3JhcHBlZENvbXBvbmVudD1lLHRoaXMuc2V0VGVtcGxhdGVGcm9tRWxlbWVudChlLmdldEd1aSgpKX1wb3N0Q29uc3RydWN0KCl7dGhpcy5pbml0aWFsaXNlVGFiR3VhcmQoe29uVGFiS2V5RG93bjplPT50aGlzLm9uVGFiS2V5RG93bihlKSxoYW5kbGVLZXlEb3duOmU9PnRoaXMuaGFuZGxlS2V5RG93bihlKX0pfWhhbmRsZUtleURvd24oZSl7ZS5rZXk9PT1qcy5FU0NBUEUmJnRoaXMuY2xvc2VQYW5lbCgpfW9uVGFiS2V5RG93bihlKXtlLmRlZmF1bHRQcmV2ZW50ZWR8fCh0aGlzLmNsb3NlUGFuZWwoKSxlLnByZXZlbnREZWZhdWx0KCkpfWNsb3NlUGFuZWwoKXtjb25zdCBlPXRoaXMucGFyZW50Q29tcG9uZW50O2UuY2xvc2VTdWJNZW51KCksc2V0VGltZW91dCgoKT0+ZS5nZXRHdWkoKS5mb2N1cygpLDApfX1hYyhbYWVdLGxjLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIGRjPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGNjIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuaXNBY3RpdmU9ITEsdGhpcy5zdWJNZW51SXNPcGVuPSExLHRoaXMuc3ViTWVudUlzT3BlbmluZz0hMSx0aGlzLnN1cHByZXNzUm9vdFN0eWxlcz0hMCx0aGlzLnN1cHByZXNzQXJpYT0hMCx0aGlzLnN1cHByZXNzRm9jdXM9ITB9aW5pdChlKXt2YXIgdCxpO2NvbnN0e21lbnVJdGVtRGVmOnMsaXNBbm90aGVyU3ViTWVudU9wZW46cixsZXZlbDpvLGNoaWxkQ29tcG9uZW50Om4sY29udGV4dFBhcmFtczphfT1lO3RoaXMucGFyYW1zPWUubWVudUl0ZW1EZWYsdGhpcy5sZXZlbD1vLHRoaXMuaXNBbm90aGVyU3ViTWVudU9wZW49cix0aGlzLmNoaWxkQ29tcG9uZW50PW4sdGhpcy5jb250ZXh0UGFyYW1zPWEsdGhpcy5jc3NDbGFzc1ByZWZpeD1udWxsIT09KGk9bnVsbD09PSh0PXRoaXMucGFyYW1zLm1lbnVJdGVtUGFyYW1zKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jc3NDbGFzc1ByZWZpeCkmJnZvaWQgMCE9PWk/aToiYWctbWVudS1vcHRpb24iO3JldHVybiB0aGlzLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldE1lbnVJdGVtQ29tcERldGFpbHModGhpcy5wYXJhbXMsT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHMpLHtsZXZlbDpvLGlzQW5vdGhlclN1Yk1lbnVPcGVuOnIsb3BlblN1Yk1lbnU6ZT0+dGhpcy5vcGVuU3ViTWVudShlKSxjbG9zZVN1Yk1lbnU6KCk9PnRoaXMuY2xvc2VTdWJNZW51KCksY2xvc2VNZW51OmU9PnRoaXMuY2xvc2VNZW51KGUpLHVwZGF0ZVRvb2x0aXA6ZT0+dGhpcy51cGRhdGVUb29sdGlwKGUpLG9uSXRlbUFjdGl2YXRlZDooKT0+dGhpcy5vbkl0ZW1BY3RpdmF0ZWQoKX0pKS5uZXdBZ1N0YWNrSW5zdGFuY2UoKS50aGVuKGU9Pnt2YXIgdDt0aGlzLm1lbnVJdGVtQ29tcD1lO2NvbnN0IGk9bnVsbD09PSh0PWUuY29uZmlndXJlRGVmYXVsdHMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNhbGwoZSk7aSYmdGhpcy5jb25maWd1cmVEZWZhdWx0cyghMD09PWk/dm9pZCAwOmkpfSl9YWRkTGlzdGVuZXJzKGUsdCl7KG51bGw9PXQ/dm9pZCAwOnQuc3VwcHJlc3NDbGljayl8fHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsImNsaWNrIixlPT50aGlzLm9uSXRlbVNlbGVjdGVkKGUpKSwobnVsbD09dD92b2lkIDA6dC5zdXBwcmVzc0tleWJvYXJkU2VsZWN0KXx8dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSwia2V5ZG93biIsZT0+e2Uua2V5IT09anMuRU5URVImJmUua2V5IT09anMuU1BBQ0V8fChlLnByZXZlbnREZWZhdWx0KCksdGhpcy5vbkl0ZW1TZWxlY3RlZChlKSl9KSwobnVsbD09dD92b2lkIDA6dC5zdXBwcmVzc01vdXNlRG93bil8fHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsIm1vdXNlZG93biIsZT0+e2Uuc3RvcFByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpfSksKG51bGw9PXQ/dm9pZCAwOnQuc3VwcHJlc3NNb3VzZU92ZXIpfHwodGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSwibW91c2VlbnRlciIsKCk9PnRoaXMub25Nb3VzZUVudGVyKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsIm1vdXNlbGVhdmUiLCgpPT50aGlzLm9uTW91c2VMZWF2ZSgpKSl9aXNEaXNhYmxlZCgpe3JldHVybiEhdGhpcy5wYXJhbXMuZGlzYWJsZWR9b3BlblN1Yk1lbnUoZT0hMSl7dmFyIHQsaTtpZih0aGlzLmNsb3NlU3ViTWVudSgpLCF0aGlzLnBhcmFtcy5zdWJNZW51KXJldHVybjt0aGlzLnN1Yk1lbnVJc09wZW5pbmc9ITA7Y29uc3Qgcz15cygnPGRpdiBjbGFzcz0iYWctbWVudSIgcm9sZT0icHJlc2VudGF0aW9uIj48L2Rpdj4nKTtsZXQgcjt0aGlzLmVTdWJNZW51R3VpPXM7bGV0IG89KCk9Pnt0aGlzLnN1Yk1lbnVJc09wZW5pbmc9ITF9O2lmKHRoaXMuY2hpbGRDb21wb25lbnQpe2NvbnN0IGU9dGhpcy5jcmVhdGVCZWFuKG5ldyBsYyh0aGlzLmNoaWxkQ29tcG9uZW50KSk7ZS5zZXRQYXJlbnRDb21wb25lbnQodGhpcyk7Y29uc3QgdD1lLmdldEd1aSgpLGk9Im1vdXNlZW50ZXIiLG49KCk9PnRoaXMuY2FuY2VsRGVhY3RpdmF0ZSgpO3QuYWRkRXZlbnRMaXN0ZW5lcihpLG4pLHI9KCk9PnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLG4pLHMuYXBwZW5kQ2hpbGQodCksdGhpcy5jaGlsZENvbXBvbmVudC5hZnRlckd1aUF0dGFjaGVkJiYobz0oKT0+e3RoaXMuY2hpbGRDb21wb25lbnQuYWZ0ZXJHdWlBdHRhY2hlZCgpLHRoaXMuc3ViTWVudUlzT3BlbmluZz0hMX0pfWVsc2UgaWYodGhpcy5wYXJhbXMuc3ViTWVudSl7Y29uc3QgdD10aGlzLmNyZWF0ZUJlYW4obmV3IG5jKHRoaXMubGV2ZWwrMSx0aGlzLmNvbnRleHRQYXJhbXMpKTt0LnNldFBhcmVudENvbXBvbmVudCh0aGlzKSx0LmFkZE1lbnVJdGVtcyh0aGlzLnBhcmFtcy5zdWJNZW51KSxzLmFwcGVuZENoaWxkKHQuZ2V0R3VpKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHQsY2MuRVZFTlRfQ0xPU0VfTUVOVSxlPT50aGlzLmRpc3BhdGNoRXZlbnQoZSkpLHQuYWRkR3VpRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsKCk9PnRoaXMuY2FuY2VsRGVhY3RpdmF0ZSgpKSxyPSgpPT50aGlzLmRlc3Ryb3lCZWFuKHQpLGUmJihvPSgpPT57dC5hY3RpdmF0ZUZpcnN0SXRlbSgpLHRoaXMuc3ViTWVudUlzT3BlbmluZz0hMX0pfWNvbnN0IG49dGhpcy5wb3B1cFNlcnZpY2UucG9zaXRpb25Qb3B1cEZvck1lbnUuYmluZCh0aGlzLnBvcHVwU2VydmljZSx7ZXZlbnRTb3VyY2U6dGhpcy5lR3VpLGVQb3B1cDpzfSksYT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSxsPXRoaXMucG9wdXBTZXJ2aWNlLmFkZFBvcHVwKHttb2RhbDohMCxlQ2hpbGQ6cyxwb3NpdGlvbkNhbGxiYWNrOm4sYW5jaG9yVG9FbGVtZW50OnRoaXMuZUd1aSxhcmlhTGFiZWw6YSgiYXJpYUxhYmVsU3ViTWVudSIsIlN1Yk1lbnUiKSxhZnRlckd1aUF0dGFjaGVkOm99KTt0aGlzLnN1Yk1lbnVJc09wZW49ITAsdGhpcy5zZXRBcmlhRXhwYW5kZWQoITApLHRoaXMuaGlkZVN1Yk1lbnU9KCk9Pnt2YXIgZSx0O2wmJmwuaGlkZUZ1bmMoKSx0aGlzLnN1Yk1lbnVJc09wZW49ITEsdGhpcy5zZXRBcmlhRXhwYW5kZWQoITEpLHIoKSxudWxsPT09KHQ9KGU9dGhpcy5tZW51SXRlbUNvbXApLnNldEV4cGFuZGVkKXx8dm9pZCAwPT09dHx8dC5jYWxsKGUsITEpLHRoaXMuZVN1Yk1lbnVHdWk9dm9pZCAwfSxudWxsPT09KGk9KHQ9dGhpcy5tZW51SXRlbUNvbXApLnNldEV4cGFuZGVkKXx8dm9pZCAwPT09aXx8aS5jYWxsKHQsITApfXNldEFyaWFFeHBhbmRlZChlKXt0aGlzLnN1cHByZXNzQXJpYXx8Y2kodGhpcy5lR3VpLGUpfWNsb3NlU3ViTWVudSgpe3RoaXMuaGlkZVN1Yk1lbnUmJih0aGlzLmhpZGVTdWJNZW51KCksdGhpcy5oaWRlU3ViTWVudT1udWxsLHRoaXMuc2V0QXJpYUV4cGFuZGVkKCExKSl9aXNTdWJNZW51T3Blbigpe3JldHVybiB0aGlzLnN1Yk1lbnVJc09wZW59aXNTdWJNZW51T3BlbmluZygpe3JldHVybiB0aGlzLnN1Yk1lbnVJc09wZW5pbmd9YWN0aXZhdGUoZSl7dmFyIHQsaTt0aGlzLmNhbmNlbEFjdGl2YXRlKCksdGhpcy5wYXJhbXMuZGlzYWJsZWR8fCh0aGlzLmlzQWN0aXZlPSEwLHRoaXMuc3VwcHJlc3NSb290U3R5bGVzfHx0aGlzLmVHdWkuY2xhc3NMaXN0LmFkZCh0aGlzLmNzc0NsYXNzUHJlZml4KyItYWN0aXZlIiksbnVsbD09PShpPSh0PXRoaXMubWVudUl0ZW1Db21wKS5zZXRBY3RpdmUpfHx2b2lkIDA9PT1pfHxpLmNhbGwodCwhMCksdGhpcy5zdXBwcmVzc0ZvY3VzfHx0aGlzLmVHdWkuZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KSxlJiZ0aGlzLnBhcmFtcy5zdWJNZW51JiZ3aW5kb3cuc2V0VGltZW91dCgoKT0+e3RoaXMuaXNBbGl2ZSgpJiZ0aGlzLmlzQWN0aXZlJiZ0aGlzLm9wZW5TdWJNZW51KCl9LDMwMCksdGhpcy5vbkl0ZW1BY3RpdmF0ZWQoKSl9ZGVhY3RpdmF0ZSgpe3ZhciBlLHQ7dGhpcy5jYW5jZWxEZWFjdGl2YXRlKCksdGhpcy5zdXBwcmVzc1Jvb3RTdHlsZXN8fHRoaXMuZUd1aS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY3NzQ2xhc3NQcmVmaXgrIi1hY3RpdmUiKSxudWxsPT09KHQ9KGU9dGhpcy5tZW51SXRlbUNvbXApLnNldEFjdGl2ZSl8fHZvaWQgMD09PXR8fHQuY2FsbChlLCExKSx0aGlzLmlzQWN0aXZlPSExLHRoaXMuc3ViTWVudUlzT3BlbiYmdGhpcy5oaWRlU3ViTWVudSgpfWdldEd1aSgpe3JldHVybiB0aGlzLm1lbnVJdGVtQ29tcC5nZXRHdWkoKX1nZXRQYXJlbnRDb21wb25lbnQoKXtyZXR1cm4gdGhpcy5wYXJlbnRDb21wb25lbnR9c2V0UGFyZW50Q29tcG9uZW50KGUpe3RoaXMucGFyZW50Q29tcG9uZW50PWV9Z2V0U3ViTWVudUd1aSgpe3JldHVybiB0aGlzLmVTdWJNZW51R3VpfW9uSXRlbVNlbGVjdGVkKGUpe3ZhciB0LGk7bnVsbD09PShpPSh0PXRoaXMubWVudUl0ZW1Db21wKS5zZWxlY3QpfHx2b2lkIDA9PT1pfHxpLmNhbGwodCksdGhpcy5wYXJhbXMuYWN0aW9uP3RoaXMuZ2V0RnJhbWV3b3JrT3ZlcnJpZGVzKCkud3JhcE91dGdvaW5nKCgpPT50aGlzLnBhcmFtcy5hY3Rpb24odGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyhPYmplY3QuYXNzaWduKHt9LHRoaXMuY29udGV4dFBhcmFtcykpKSk6dGhpcy5vcGVuU3ViTWVudShlJiYia2V5ZG93biI9PT1lLnR5cGUpLHRoaXMucGFyYW1zLnN1Yk1lbnUmJiF0aGlzLnBhcmFtcy5hY3Rpb258fHRoaXMucGFyYW1zLnN1cHByZXNzQ2xvc2VPblNlbGVjdHx8dGhpcy5jbG9zZU1lbnUoZSl9Y2xvc2VNZW51KGUpe2NvbnN0IHQ9e3R5cGU6Y2MuRVZFTlRfQ0xPU0VfTUVOVSxldmVudDplfTt0aGlzLmRpc3BhdGNoRXZlbnQodCl9b25JdGVtQWN0aXZhdGVkKCl7Y29uc3QgZT17dHlwZTpjYy5FVkVOVF9NRU5VX0lURU1fQUNUSVZBVEVELG1lbnVJdGVtOnRoaXN9O3RoaXMuZGlzcGF0Y2hFdmVudChlKX1jYW5jZWxBY3RpdmF0ZSgpe3RoaXMuYWN0aXZhdGVUaW1lb3V0SWQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuYWN0aXZhdGVUaW1lb3V0SWQpLHRoaXMuYWN0aXZhdGVUaW1lb3V0SWQ9MCl9Y2FuY2VsRGVhY3RpdmF0ZSgpe3RoaXMuZGVhY3RpdmF0ZVRpbWVvdXRJZCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5kZWFjdGl2YXRlVGltZW91dElkKSx0aGlzLmRlYWN0aXZhdGVUaW1lb3V0SWQ9MCl9b25Nb3VzZUVudGVyKCl7dGhpcy5jYW5jZWxEZWFjdGl2YXRlKCksdGhpcy5pc0Fub3RoZXJTdWJNZW51T3BlbigpP3RoaXMuYWN0aXZhdGVUaW1lb3V0SWQ9d2luZG93LnNldFRpbWVvdXQoKCk9PnRoaXMuYWN0aXZhdGUoITApLGNjLkFDVElWQVRJT05fREVMQVkpOnRoaXMuYWN0aXZhdGUoITApfW9uTW91c2VMZWF2ZSgpe3RoaXMuY2FuY2VsQWN0aXZhdGUoKSx0aGlzLmlzU3ViTWVudU9wZW4oKT90aGlzLmRlYWN0aXZhdGVUaW1lb3V0SWQ9d2luZG93LnNldFRpbWVvdXQoKCk9PnRoaXMuZGVhY3RpdmF0ZSgpLGNjLkFDVElWQVRJT05fREVMQVkpOnRoaXMuZGVhY3RpdmF0ZSgpfWNvbmZpZ3VyZURlZmF1bHRzKGUpe3ZhciB0LGkscztpZih0aGlzLnRvb2x0aXA9dGhpcy5wYXJhbXMudG9vbHRpcCwhdGhpcy5tZW51SXRlbUNvbXApcmV0dXJuIHZvaWQgc2V0VGltZW91dCgoKT0+dGhpcy5jb25maWd1cmVEZWZhdWx0cyhlKSk7bGV0IHI9dGhpcy5tZW51SXRlbUNvbXAuZ2V0R3VpKCk7Y29uc3Qgbz1udWxsPT09KGk9KHQ9dGhpcy5tZW51SXRlbUNvbXApLmdldFJvb3RFbGVtZW50KXx8dm9pZCAwPT09aT92b2lkIDA6aS5jYWxsKHQpO28mJigobnVsbD09ZT92b2lkIDA6ZS5zdXBwcmVzc1Jvb3RTdHlsZXMpfHxyLmNsYXNzTGlzdC5hZGQoImFnLW1lbnUtb3B0aW9uLWN1c3RvbSIpLHI9byksdGhpcy5lR3VpPXIsdGhpcy5zdXBwcmVzc1Jvb3RTdHlsZXM9ISEobnVsbD09ZT92b2lkIDA6ZS5zdXBwcmVzc1Jvb3RTdHlsZXMpLHRoaXMuc3VwcHJlc3NSb290U3R5bGVzfHwoci5jbGFzc0xpc3QuYWRkKHRoaXMuY3NzQ2xhc3NQcmVmaXgpLG51bGw9PT0ocz10aGlzLnBhcmFtcy5jc3NDbGFzc2VzKXx8dm9pZCAwPT09c3x8cy5mb3JFYWNoKGU9PnIuY2xhc3NMaXN0LmFkZChlKSksdGhpcy5wYXJhbXMuZGlzYWJsZWQmJnIuY2xhc3NMaXN0LmFkZCh0aGlzLmNzc0NsYXNzUHJlZml4KyItZGlzYWJsZWQiKSksKG51bGw9PWU/dm9pZCAwOmUuc3VwcHJlc3NUb29sdGlwKXx8dGhpcy5zZXRUb29sdGlwKCksdGhpcy5zdXBwcmVzc0FyaWE9ISEobnVsbD09ZT92b2lkIDA6ZS5zdXBwcmVzc0FyaWEpLHRoaXMuc3VwcHJlc3NBcmlhfHwoWHQociwidHJlZWl0ZW0iKSxuaShyLHRoaXMubGV2ZWwrMSksdGhpcy5wYXJhbXMuZGlzYWJsZWQmJmFpKHIsITApKSwobnVsbD09ZT92b2lkIDA6ZS5zdXBwcmVzc1RhYkluZGV4KXx8ci5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwiLTEiKSx0aGlzLnBhcmFtcy5kaXNhYmxlZHx8dGhpcy5hZGRMaXN0ZW5lcnMocixlKSx0aGlzLnN1cHByZXNzRm9jdXM9ISEobnVsbD09ZT92b2lkIDA6ZS5zdXBwcmVzc0ZvY3VzKX11cGRhdGVUb29sdGlwKGUpe3RoaXMudG9vbHRpcD1lLCF0aGlzLnRvb2x0aXBGZWF0dXJlJiZ0aGlzLm1lbnVJdGVtQ29tcCYmdGhpcy5zZXRUb29sdGlwKCl9c2V0VG9vbHRpcCgpe3RoaXMudG9vbHRpcCYmKHRoaXMudG9vbHRpcEZlYXR1cmU9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgZmEoe2dldEd1aTooKT0+dGhpcy5nZXRHdWkoKSxnZXRUb29sdGlwVmFsdWU6KCk9PnRoaXMudG9vbHRpcCxnZXRMb2NhdGlvbjooKT0+Im1lbnUifSx0aGlzLmJlYW5zKSksdGhpcy50b29sdGlwRmVhdHVyZS5zZXRDb21wKHRoaXMuZ2V0R3VpKCkpKX19Y2MuRVZFTlRfQ0xPU0VfTUVOVT0iY2xvc2VNZW51IixjYy5FVkVOVF9NRU5VX0lURU1fQUNUSVZBVEVEPSJtZW51SXRlbUFjdGl2YXRlZCIsY2MuQUNUSVZBVElPTl9ERUxBWT04MCxkYyhbY2UoInBvcHVwU2VydmljZSIpXSxjYy5wcm90b3R5cGUsInBvcHVwU2VydmljZSIsdm9pZCAwKSxkYyhbY2UoInVzZXJDb21wb25lbnRGYWN0b3J5IildLGNjLnByb3RvdHlwZSwidXNlckNvbXBvbmVudEZhY3RvcnkiLHZvaWQgMCksZGMoW2NlKCJiZWFucyIpXSxjYy5wcm90b3R5cGUsImJlYW5zIix2b2lkIDApO3ZhciBoYz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyB1YyBleHRlbmRzIGNye2NvbnN0cnVjdG9yKGUpe3N1cGVyKHVjLmdldFRlbXBsYXRlKGUpKSx0aGlzLmNvbmZpZz1lLHRoaXMuY2xvc2FibGU9ITB9c3RhdGljIGdldFRlbXBsYXRlKGUpe2NvbnN0IHQ9ZS5jc3NJZGVudGlmaWVyfHwiZGVmYXVsdCI7cmV0dXJuYDxkaXYgY2xhc3M9ImFnLXBhbmVsIGFnLSR7dH0tcGFuZWwiIHRhYmluZGV4PSItMSI+XG4gICAgICAgICAgICA8ZGl2IHJlZj0iZVRpdGxlQmFyIiBjbGFzcz0iYWctcGFuZWwtdGl0bGUtYmFyIGFnLSR7dH0tcGFuZWwtdGl0bGUtYmFyIGFnLXVuc2VsZWN0YWJsZSI+XG4gICAgICAgICAgICAgICAgPHNwYW4gcmVmPSJlVGl0bGUiIGNsYXNzPSJhZy1wYW5lbC10aXRsZS1iYXItdGl0bGUgYWctJHt0fS1wYW5lbC10aXRsZS1iYXItdGl0bGUiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj0iZVRpdGxlQmFyQnV0dG9ucyIgY2xhc3M9ImFnLXBhbmVsLXRpdGxlLWJhci1idXR0b25zIGFnLSR7dH0tcGFuZWwtdGl0bGUtYmFyLWJ1dHRvbnMiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IHJlZj0iZUNvbnRlbnRXcmFwcGVyIiBjbGFzcz0iYWctcGFuZWwtY29udGVudC13cmFwcGVyIGFnLSR7dH0tcGFuZWwtY29udGVudC13cmFwcGVyIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+YH1wb3N0Q29uc3RydWN0KCl7Y29uc3R7Y29tcG9uZW50OmUsY2xvc2FibGU6dCxoaWRlVGl0bGVCYXI6aSx0aXRsZTpzLG1pbldpZHRoOnI9MjUwLHdpZHRoOm8sbWluSGVpZ2h0Om49MjUwLGhlaWdodDphLGNlbnRlcmVkOmwscG9wdXA6ZCx4OmMseTpofT10aGlzLmNvbmZpZzt0aGlzLnBvc2l0aW9uYWJsZUZlYXR1cmU9bmV3IGJyKHRoaXMuZ2V0R3VpKCkse21pbldpZHRoOnIsd2lkdGg6byxtaW5IZWlnaHQ6bixoZWlnaHQ6YSxjZW50ZXJlZDpsLHg6Yyx5OmgscG9wdXA6ZCxjYWxjdWxhdGVUb3BCdWZmZXI6KCk9PnRoaXMucG9zaXRpb25hYmxlRmVhdHVyZS5nZXRIZWlnaHQoKS10aGlzLmdldEJvZHlIZWlnaHQoKX0pLHRoaXMuY3JlYXRlTWFuYWdlZEJlYW4odGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlKTtjb25zdCB1PXRoaXMuZ2V0R3VpKCk7ZSYmdGhpcy5zZXRCb2R5Q29tcG9uZW50KGUpLGk/aXModGhpcy5lVGl0bGVCYXIsITEpOihzJiZ0aGlzLnNldFRpdGxlKHMpLHRoaXMuc2V0Q2xvc2FibGUobnVsbCE9dD90OnRoaXMuY2xvc2FibGUpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVUaXRsZUJhciwibW91c2Vkb3duIixlPT57Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb2N1bWVudCgpO2lmKHUuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KXx8dS5jb250YWlucyh0LmFjdGl2ZUVsZW1lbnQpfHx0aGlzLmVUaXRsZUJhckJ1dHRvbnMuY29udGFpbnMoZS50YXJnZXQpKXJldHVybiB2b2lkIGUucHJldmVudERlZmF1bHQoKTtjb25zdCBpPXRoaXMuZUNvbnRlbnRXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoImJ1dHRvbiwgW2hyZWZdLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgW3RhYmluZGV4XSIpO2kmJmkuZm9jdXMoKX0pLGQmJnRoaXMucG9zaXRpb25hYmxlRmVhdHVyZS5pc1Bvc2l0aW9uZWQoKXx8KHRoaXMucmVuZGVyQ29tcG9uZW50JiZ0aGlzLnJlbmRlckNvbXBvbmVudCgpLHRoaXMucG9zaXRpb25hYmxlRmVhdHVyZS5pbml0aWFsaXNlUG9zaXRpb24oKSx0aGlzLmVDb250ZW50V3JhcHBlci5zdHlsZS5oZWlnaHQ9IjAiKX1yZW5kZXJDb21wb25lbnQoKXtjb25zdCBlPXRoaXMuZ2V0R3VpKCk7ZS5mb2N1cygpLHRoaXMuY2xvc2U9KCk9PntlLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZSksdGhpcy5kZXN0cm95KCl9fWdldEhlaWdodCgpe3JldHVybiB0aGlzLnBvc2l0aW9uYWJsZUZlYXR1cmUuZ2V0SGVpZ2h0KCl9c2V0SGVpZ2h0KGUpe3RoaXMucG9zaXRpb25hYmxlRmVhdHVyZS5zZXRIZWlnaHQoZSl9Z2V0V2lkdGgoKXtyZXR1cm4gdGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlLmdldFdpZHRoKCl9c2V0V2lkdGgoZSl7dGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlLnNldFdpZHRoKGUpfXNldENsb3NhYmxlKGUpe2lmKGUhPT10aGlzLmNsb3NhYmxlJiYodGhpcy5jbG9zYWJsZT1lKSxlKXtjb25zdCBlPXRoaXMuY2xvc2VCdXR0b25Db21wPW5ldyBjcih1Yy5DTE9TRV9CVE5fVEVNUExBVEUpO3RoaXMuZ2V0Q29udGV4dCgpLmNyZWF0ZUJlYW4oZSk7Y29uc3QgdD1lLmdldEd1aSgpLGk9V3MoImNsb3NlIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSk7aS5jbGFzc0xpc3QuYWRkKCJhZy1wYW5lbC10aXRsZS1iYXItYnV0dG9uLWljb24iKSx0LmFwcGVuZENoaWxkKGkpLHRoaXMuYWRkVGl0bGVCYXJCdXR0b24oZSksZS5hZGRNYW5hZ2VkTGlzdGVuZXIodCwiY2xpY2siLHRoaXMub25CdENsb3NlLmJpbmQodGhpcykpfWVsc2UgaWYodGhpcy5jbG9zZUJ1dHRvbkNvbXApe2NvbnN0IGU9dGhpcy5jbG9zZUJ1dHRvbkNvbXAuZ2V0R3VpKCk7ZS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGUpLHRoaXMuY2xvc2VCdXR0b25Db21wPXRoaXMuZGVzdHJveUJlYW4odGhpcy5jbG9zZUJ1dHRvbkNvbXApfX1zZXRCb2R5Q29tcG9uZW50KGUpe2Uuc2V0UGFyZW50Q29tcG9uZW50KHRoaXMpLHRoaXMuZUNvbnRlbnRXcmFwcGVyLmFwcGVuZENoaWxkKGUuZ2V0R3VpKCkpfWFkZFRpdGxlQmFyQnV0dG9uKGUsdCl7Y29uc3QgaT10aGlzLmVUaXRsZUJhckJ1dHRvbnMscz1pLmNoaWxkcmVuLHI9cy5sZW5ndGg7bnVsbD09dCYmKHQ9ciksdD1NYXRoLm1heCgwLE1hdGgubWluKHQscikpLGUuYWRkQ3NzQ2xhc3MoImFnLXBhbmVsLXRpdGxlLWJhci1idXR0b24iKTtjb25zdCBvPWUuZ2V0R3VpKCk7MD09PXQ/aS5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyYmVnaW4iLG8pOnQ9PT1yP2kuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJiZWZvcmVlbmQiLG8pOnNbdC0xXS5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyZW5kIixvKSxlLnNldFBhcmVudENvbXBvbmVudCh0aGlzKX1nZXRCb2R5SGVpZ2h0KCl7cmV0dXJuIGFzKHRoaXMuZUNvbnRlbnRXcmFwcGVyKX1nZXRCb2R5V2lkdGgoKXtyZXR1cm4gbHModGhpcy5lQ29udGVudFdyYXBwZXIpfXNldFRpdGxlKGUpe3RoaXMuZVRpdGxlLmlubmVyVGV4dD1lfW9uQnRDbG9zZSgpe3RoaXMuY2xvc2UoKX1kZXN0cm95KCl7dGhpcy5jbG9zZUJ1dHRvbkNvbXAmJih0aGlzLmNsb3NlQnV0dG9uQ29tcD10aGlzLmRlc3Ryb3lCZWFuKHRoaXMuY2xvc2VCdXR0b25Db21wKSk7Y29uc3QgZT10aGlzLmdldEd1aSgpO2UmJkNzKGUpJiZ0aGlzLmNsb3NlKCksc3VwZXIuZGVzdHJveSgpfX11Yy5DTE9TRV9CVE5fVEVNUExBVEU9JzxkaXYgY2xhc3M9ImFnLWJ1dHRvbiI+PC9kaXY+JyxoYyhbdXIoImVDb250ZW50V3JhcHBlciIpXSx1Yy5wcm90b3R5cGUsImVDb250ZW50V3JhcHBlciIsdm9pZCAwKSxoYyhbdXIoImVUaXRsZUJhciIpXSx1Yy5wcm90b3R5cGUsImVUaXRsZUJhciIsdm9pZCAwKSxoYyhbdXIoImVUaXRsZUJhckJ1dHRvbnMiKV0sdWMucHJvdG90eXBlLCJlVGl0bGVCYXJCdXR0b25zIix2b2lkIDApLGhjKFt1cigiZVRpdGxlIildLHVjLnByb3RvdHlwZSwiZVRpdGxlIix2b2lkIDApLGhjKFthZV0sdWMucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgcGM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgZ2MgZXh0ZW5kcyB1Y3tjb25zdHJ1Y3RvcihlKXtzdXBlcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3BvcHVwOiEwfSkpLHRoaXMuaXNNYXhpbWl6YWJsZT0hMSx0aGlzLmlzTWF4aW1pemVkPSExLHRoaXMubWF4aW1pemVMaXN0ZW5lcnM9W10sdGhpcy5yZXNpemVMaXN0ZW5lckRlc3Ryb3k9bnVsbCx0aGlzLmxhc3RQb3NpdGlvbj17eDowLHk6MCx3aWR0aDowLGhlaWdodDowfX1wb3N0Q29uc3RydWN0KCl7Y29uc3QgZT10aGlzLmdldEd1aSgpLHttb3ZhYmxlOnQscmVzaXphYmxlOmksbWF4aW1pemFibGU6c309dGhpcy5jb25maWc7dGhpcy5hZGRDc3NDbGFzcygiYWctZGlhbG9nIiksc3VwZXIucG9zdENvbnN0cnVjdCgpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsImZvY3VzaW4iLHQ9PntlLmNvbnRhaW5zKHQucmVsYXRlZFRhcmdldCl8fHRoaXMucG9wdXBTZXJ2aWNlLmJyaW5nUG9wdXBUb0Zyb250KGUpfSksdCYmdGhpcy5zZXRNb3ZhYmxlKHQpLHMmJnRoaXMuc2V0TWF4aW1pemFibGUocyksaSYmdGhpcy5zZXRSZXNpemFibGUoaSl9cmVuZGVyQ29tcG9uZW50KCl7Y29uc3QgZT10aGlzLmdldEd1aSgpLHthbHdheXNPblRvcDp0LG1vZGFsOmksdGl0bGU6cyxhZnRlckd1aUF0dGFjaGVkOnJ9PXRoaXMuY29uZmlnLG89dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCksbj10aGlzLnBvcHVwU2VydmljZS5hZGRQb3B1cCh7bW9kYWw6aSxlQ2hpbGQ6ZSxjbG9zZU9uRXNjOiEwLGNsb3NlZENhbGxiYWNrOnRoaXMub25DbG9zZWQuYmluZCh0aGlzKSxhbHdheXNPblRvcDp0LGFyaWFMYWJlbDpzfHxvKCJhcmlhTGFiZWxEaWFsb2ciLCJEaWFsb2ciKSxhZnRlckd1aUF0dGFjaGVkOnJ9KTtuJiYodGhpcy5jbG9zZT1uLmhpZGVGdW5jKX1vbkNsb3NlZChlKXt2YXIgdCxpO3RoaXMuZGVzdHJveSgpLG51bGw9PT0oaT0odD10aGlzLmNvbmZpZykuY2xvc2VkQ2FsbGJhY2spfHx2b2lkIDA9PT1pfHxpLmNhbGwodCxlKX10b2dnbGVNYXhpbWl6ZSgpe2NvbnN0IGU9dGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlLmdldFBvc2l0aW9uKCk7aWYodGhpcy5pc01heGltaXplZCl7Y29uc3R7eDplLHk6dCx3aWR0aDppLGhlaWdodDpzfT10aGlzLmxhc3RQb3NpdGlvbjt0aGlzLnNldFdpZHRoKGkpLHRoaXMuc2V0SGVpZ2h0KHMpLHRoaXMucG9zaXRpb25hYmxlRmVhdHVyZS5vZmZzZXRFbGVtZW50KGUsdCl9ZWxzZSB0aGlzLmxhc3RQb3NpdGlvbi53aWR0aD10aGlzLmdldFdpZHRoKCksdGhpcy5sYXN0UG9zaXRpb24uaGVpZ2h0PXRoaXMuZ2V0SGVpZ2h0KCksdGhpcy5sYXN0UG9zaXRpb24ueD1lLngsdGhpcy5sYXN0UG9zaXRpb24ueT1lLnksdGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlLm9mZnNldEVsZW1lbnQoMCwwKSx0aGlzLnNldEhlaWdodCgiMTAwJSIpLHRoaXMuc2V0V2lkdGgoIjEwMCUiKTt0aGlzLmlzTWF4aW1pemVkPSF0aGlzLmlzTWF4aW1pemVkLHRoaXMucmVmcmVzaE1heGltaXplSWNvbigpfXJlZnJlc2hNYXhpbWl6ZUljb24oKXtpcyh0aGlzLm1heGltaXplSWNvbiwhdGhpcy5pc01heGltaXplZCksaXModGhpcy5taW5pbWl6ZUljb24sdGhpcy5pc01heGltaXplZCl9Y2xlYXJNYXhpbWl6ZWJsZUxpc3RlbmVycygpe3RoaXMubWF4aW1pemVMaXN0ZW5lcnMubGVuZ3RoJiYodGhpcy5tYXhpbWl6ZUxpc3RlbmVycy5mb3JFYWNoKGU9PmUoKSksdGhpcy5tYXhpbWl6ZUxpc3RlbmVycy5sZW5ndGg9MCksdGhpcy5yZXNpemVMaXN0ZW5lckRlc3Ryb3kmJih0aGlzLnJlc2l6ZUxpc3RlbmVyRGVzdHJveSgpLHRoaXMucmVzaXplTGlzdGVuZXJEZXN0cm95PW51bGwpfWRlc3Ryb3koKXt0aGlzLm1heGltaXplQnV0dG9uQ29tcD10aGlzLmRlc3Ryb3lCZWFuKHRoaXMubWF4aW1pemVCdXR0b25Db21wKSx0aGlzLmNsZWFyTWF4aW1pemVibGVMaXN0ZW5lcnMoKSxzdXBlci5kZXN0cm95KCl9c2V0UmVzaXphYmxlKGUpe3RoaXMucG9zaXRpb25hYmxlRmVhdHVyZS5zZXRSZXNpemFibGUoZSl9c2V0TW92YWJsZShlKXt0aGlzLnBvc2l0aW9uYWJsZUZlYXR1cmUuc2V0TW92YWJsZShlLHRoaXMuZVRpdGxlQmFyKX1zZXRNYXhpbWl6YWJsZShlKXtpZighZSlyZXR1cm4gdGhpcy5jbGVhck1heGltaXplYmxlTGlzdGVuZXJzKCksdm9pZCh0aGlzLm1heGltaXplQnV0dG9uQ29tcCYmKHRoaXMuZGVzdHJveUJlYW4odGhpcy5tYXhpbWl6ZUJ1dHRvbkNvbXApLHRoaXMubWF4aW1pemVCdXR0b25Db21wPXRoaXMubWF4aW1pemVJY29uPXRoaXMubWluaW1pemVJY29uPXZvaWQgMCkpO2NvbnN0IHQ9dGhpcy5lVGl0bGVCYXI7aWYoIXR8fGU9PT10aGlzLmlzTWF4aW1pemFibGUpcmV0dXJuO2NvbnN0IGk9dGhpcy5idWlsZE1heGltaXplQW5kTWluaW1pemVFbGVtZW50cygpO3RoaXMucmVmcmVzaE1heGltaXplSWNvbigpLGkuYWRkTWFuYWdlZExpc3RlbmVyKGkuZ2V0R3VpKCksImNsaWNrIix0aGlzLnRvZ2dsZU1heGltaXplLmJpbmQodGhpcykpLHRoaXMuYWRkVGl0bGVCYXJCdXR0b24oaSwwKSx0aGlzLm1heGltaXplTGlzdGVuZXJzLnB1c2godGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodCwiZGJsY2xpY2siLHRoaXMudG9nZ2xlTWF4aW1pemUuYmluZCh0aGlzKSkpLHRoaXMucmVzaXplTGlzdGVuZXJEZXN0cm95PXRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMsInJlc2l6ZSIsKCk9Pnt0aGlzLmlzTWF4aW1pemVkPSExLHRoaXMucmVmcmVzaE1heGltaXplSWNvbigpfSl9YnVpbGRNYXhpbWl6ZUFuZE1pbmltaXplRWxlbWVudHMoKXtjb25zdCBlPXRoaXMubWF4aW1pemVCdXR0b25Db21wPXRoaXMuY3JlYXRlQmVhbihuZXcgY3IoJzxkaXYgY2xhc3M9ImFnLWRpYWxvZy1idXR0b24iPjwvc3Bhbj4nKSksdD1lLmdldEd1aSgpO3JldHVybiB0aGlzLm1heGltaXplSWNvbj1XcygibWF4aW1pemUiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKSx0LmFwcGVuZENoaWxkKHRoaXMubWF4aW1pemVJY29uKSx0aGlzLm1heGltaXplSWNvbi5jbGFzc0xpc3QuYWRkKCJhZy1wYW5lbC10aXRsZS1iYXItYnV0dG9uLWljb24iKSx0aGlzLm1pbmltaXplSWNvbj1XcygibWluaW1pemUiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKSx0LmFwcGVuZENoaWxkKHRoaXMubWluaW1pemVJY29uKSx0aGlzLm1pbmltaXplSWNvbi5jbGFzc0xpc3QuYWRkKCJhZy1wYW5lbC10aXRsZS1iYXItYnV0dG9uLWljb24iKSxlfX1wYyhbY2UoInBvcHVwU2VydmljZSIpXSxnYy5wcm90b3R5cGUsInBvcHVwU2VydmljZSIsdm9pZCAwKTt2YXIgbWMsZmMsdmM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07IWZ1bmN0aW9uKGUpe2VbZS52ZXJ0aWNhbD0wXT0idmVydGljYWwiLGVbZS5ob3Jpem9udGFsPTFdPSJob3Jpem9udGFsIn0oZmN8fChmYz17fSkpO2xldCBDYz0wLHljPW1jPWNsYXNzIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMucG9wdXBMaXN0PVtdfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmN0cmxzU2VydmljZS53aGVuUmVhZHkoZT0+e3RoaXMuZ3JpZEN0cmw9ZS5ncmlkQ3RybH0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0dSSURfU1RZTEVTX0NIQU5HRUQsdGhpcy5oYW5kbGVUaGVtZUNoYW5nZS5iaW5kKHRoaXMpKX1nZXRQb3B1cFBhcmVudCgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJwb3B1cFBhcmVudCIpO3JldHVybiBlfHx0aGlzLmdyaWRDdHJsLmdldEd1aSgpfXBvc2l0aW9uUG9wdXBGb3JNZW51KGUpe2NvbnN0e2V2ZW50U291cmNlOnQsZVBvcHVwOml9PWUscz10aGlzLmdldFBvcHVwSW5kZXgoaSk7aWYoLTEhPT1zKXt0aGlzLnBvcHVwTGlzdFtzXS5hbGlnbmVkVG9FbGVtZW50PXR9Y29uc3Qgcj10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89dGhpcy5nZXRQYXJlbnRSZWN0KCksbj10aGlzLmtlZXBYWVdpdGhpbkJvdW5kcyhpLHIudG9wLW8udG9wLGZjLnZlcnRpY2FsKSxhPWkuY2xpZW50V2lkdGg+MD9pLmNsaWVudFdpZHRoOjIwMDtpLnN0eWxlLm1pbldpZHRoPWErInB4Ijtjb25zdCBsPW8ucmlnaHQtby5sZWZ0LWE7bGV0IGQ7ZnVuY3Rpb24gYygpe3JldHVybiByLnJpZ2h0LW8ubGVmdC0yfWZ1bmN0aW9uIGgoKXtyZXR1cm4gci5sZWZ0LW8ubGVmdC1hfXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIik/KGQ9aCgpLGQ8MCYmKGQ9YygpLHRoaXMuc2V0QWxpZ25lZFN0eWxlcyhpLCJsZWZ0IikpLGQ+bCYmKGQ9MCx0aGlzLnNldEFsaWduZWRTdHlsZXMoaSwicmlnaHQiKSkpOihkPWMoKSxkPmwmJihkPWgoKSx0aGlzLnNldEFsaWduZWRTdHlsZXMoaSwicmlnaHQiKSksZDwwJiYoZD0wLHRoaXMuc2V0QWxpZ25lZFN0eWxlcyhpLCJsZWZ0IikpKSxpLnN0eWxlLmxlZnQ9ZCsicHgiLGkuc3R5bGUudG9wPW4rInB4In1wb3NpdGlvblBvcHVwVW5kZXJNb3VzZUV2ZW50KGUpe2NvbnN0e2VQb3B1cDp0LG51ZGdlWDppLG51ZGdlWTpzLHNraXBPYnNlcnZlcjpyfT1lO3RoaXMucG9zaXRpb25Qb3B1cCh7ZVBvcHVwOnQsbnVkZ2VYOmksbnVkZ2VZOnMsa2VlcFdpdGhpbkJvdW5kczohMCxza2lwT2JzZXJ2ZXI6cix1cGRhdGVQb3NpdGlvbjooKT0+dGhpcy5jYWxjdWxhdGVQb2ludGVyQWxpZ24oZS5tb3VzZUV2ZW50KSxwb3N0UHJvY2Vzc0NhbGxiYWNrOigpPT50aGlzLmNhbGxQb3N0UHJvY2Vzc1BvcHVwKGUudHlwZSxlLmVQb3B1cCxudWxsLGUubW91c2VFdmVudCxlLmNvbHVtbixlLnJvd05vZGUpfSl9Y2FsY3VsYXRlUG9pbnRlckFsaWduKGUpe2NvbnN0IHQ9dGhpcy5nZXRQYXJlbnRSZWN0KCk7cmV0dXJue3g6ZS5jbGllbnRYLXQubGVmdCx5OmUuY2xpZW50WS10LnRvcH19cG9zaXRpb25Qb3B1cEJ5Q29tcG9uZW50KGUpe2NvbnN0e2VQb3B1cDp0LG51ZGdlWDppLG51ZGdlWTpzLGtlZXBXaXRoaW5Cb3VuZHM6cixldmVudFNvdXJjZTpvLGFsaWduU2lkZTpuPSJsZWZ0Iixwb3NpdGlvbjphPSJvdmVyIixjb2x1bW46bCxyb3dOb2RlOmQsdHlwZTpjfT1lLGg9by5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSx1PXRoaXMuZ2V0UGFyZW50UmVjdCgpLHA9dGhpcy5nZXRQb3B1cEluZGV4KHQpO2lmKC0xIT09cCl7dGhpcy5wb3B1cExpc3RbcF0uYWxpZ25lZFRvRWxlbWVudD1vfXRoaXMucG9zaXRpb25Qb3B1cCh7ZVBvcHVwOnQsbnVkZ2VYOmksbnVkZ2VZOnMsa2VlcFdpdGhpbkJvdW5kczpyLHVwZGF0ZVBvc2l0aW9uOigpPT57bGV0IGkscj1oLmxlZnQtdS5sZWZ0O2lmKCJyaWdodCI9PT1uJiYoci09dC5vZmZzZXRXaWR0aC1oLndpZHRoKSwib3ZlciI9PT1hKWk9aC50b3AtdS50b3AsdGhpcy5zZXRBbGlnbmVkU3R5bGVzKHQsIm92ZXIiKTtlbHNle3RoaXMuc2V0QWxpZ25lZFN0eWxlcyh0LCJ1bmRlciIpO2k9InVuZGVyIj09PXRoaXMuc2hvdWxkUmVuZGVyVW5kZXJPckFib3ZlKHQsaCx1LGUubnVkZ2VZfHwwKT9oLnRvcC11LnRvcCtoLmhlaWdodDpoLnRvcC10Lm9mZnNldEhlaWdodC0yKihzfHwwKS11LnRvcH1yZXR1cm57eDpyLHk6aX19LHBvc3RQcm9jZXNzQ2FsbGJhY2s6KCk9PnRoaXMuY2FsbFBvc3RQcm9jZXNzUG9wdXAoYyx0LG8sbnVsbCxsLGQpfSl9c2hvdWxkUmVuZGVyVW5kZXJPckFib3ZlKGUsdCxpLHMpe2NvbnN0IHI9aS5ib3R0b20tdC5ib3R0b20sbz10LnRvcC1pLnRvcCxuPWUub2Zmc2V0SGVpZ2h0K3M7cmV0dXJuIHI+bj8idW5kZXIiOm8+bnx8bz5yPyJhYm92ZSI6InVuZGVyIn1zZXRBbGlnbmVkU3R5bGVzKGUsdCl7Y29uc3QgaT10aGlzLmdldFBvcHVwSW5kZXgoZSk7aWYoLTE9PT1pKXJldHVybjtjb25zdCBzPXRoaXMucG9wdXBMaXN0W2ldLHthbGlnbmVkVG9FbGVtZW50OnJ9PXM7aWYoIXIpcmV0dXJuO1sicmlnaHQiLCJsZWZ0Iiwib3ZlciIsImFib3ZlIiwidW5kZXIiXS5mb3JFYWNoKHQ9PntyLmNsYXNzTGlzdC5yZW1vdmUoImFnLWhhcy1wb3B1cC1wb3NpdGlvbmVkLSIrdCksZS5jbGFzc0xpc3QucmVtb3ZlKCJhZy1wb3B1cC1wb3NpdGlvbmVkLSIrdCl9KSx0JiYoci5jbGFzc0xpc3QuYWRkKCJhZy1oYXMtcG9wdXAtcG9zaXRpb25lZC0iK3QpLGUuY2xhc3NMaXN0LmFkZCgiYWctcG9wdXAtcG9zaXRpb25lZC0iK3QpKX1jYWxsUG9zdFByb2Nlc3NQb3B1cChlLHQsaSxzLHIsbyl7Y29uc3Qgbj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygicG9zdFByb2Nlc3NQb3B1cCIpO2lmKG4pe24oe2NvbHVtbjpyLHJvd05vZGU6byxlUG9wdXA6dCx0eXBlOmUsZXZlbnRTb3VyY2U6aSxtb3VzZUV2ZW50OnN9KX19cG9zaXRpb25Qb3B1cChlKXtjb25zdHtlUG9wdXA6dCxrZWVwV2l0aGluQm91bmRzOmksbnVkZ2VYOnMsbnVkZ2VZOnIsc2tpcE9ic2VydmVyOm8sdXBkYXRlUG9zaXRpb246bn09ZSxhPXt3aWR0aDowLGhlaWdodDowfSxsPShvPSExKT0+e2xldHt4OmwseTpkfT1uKCk7byYmdC5jbGllbnRXaWR0aD09PWEud2lkdGgmJnQuY2xpZW50SGVpZ2h0PT09YS5oZWlnaHR8fChhLndpZHRoPXQuY2xpZW50V2lkdGgsYS5oZWlnaHQ9dC5jbGllbnRIZWlnaHQscyYmKGwrPXMpLHImJihkKz1yKSxpJiYobD10aGlzLmtlZXBYWVdpdGhpbkJvdW5kcyh0LGwsZmMuaG9yaXpvbnRhbCksZD10aGlzLmtlZXBYWVdpdGhpbkJvdW5kcyh0LGQsZmMudmVydGljYWwpKSx0LnN0eWxlLmxlZnQ9bCsicHgiLHQuc3R5bGUudG9wPWQrInB4IixlLnBvc3RQcm9jZXNzQ2FsbGJhY2smJmUucG9zdFByb2Nlc3NDYWxsYmFjaygpKX07aWYobCgpLCFvKXtjb25zdCBlPXRoaXMucmVzaXplT2JzZXJ2ZXJTZXJ2aWNlLm9ic2VydmVSZXNpemUodCwoKT0+bCghMCkpO3NldFRpbWVvdXQoKCk9PmUoKSxtYy5XQUlUX0ZPUl9QT1BVUF9DT05URU5UX1JFU0laRSl9fWdldEFjdGl2ZVBvcHVwcygpe3JldHVybiB0aGlzLnBvcHVwTGlzdC5tYXAoZT0+ZS5lbGVtZW50KX1nZXRQb3B1cExpc3QoKXtyZXR1cm4gdGhpcy5wb3B1cExpc3R9Z2V0UGFyZW50UmVjdCgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKTtsZXQgdD10aGlzLmdldFBvcHVwUGFyZW50KCk7cmV0dXJuIHQ9PT1lLmJvZHk/dD1lLmRvY3VtZW50RWxlbWVudDoic3RhdGljIj09PWdldENvbXB1dGVkU3R5bGUodCkucG9zaXRpb24mJih0PXQub2Zmc2V0UGFyZW50KSxocyh0KX1rZWVwWFlXaXRoaW5Cb3VuZHMoZSx0LGkpe2NvbnN0IHM9aT09PWZjLnZlcnRpY2FsLHI9cz8iY2xpZW50SGVpZ2h0IjoiY2xpZW50V2lkdGgiLG89cz8idG9wIjoibGVmdCIsbj1zPyJvZmZzZXRIZWlnaHQiOiJvZmZzZXRXaWR0aCIsYT1zPyJzY3JvbGxUb3AiOiJzY3JvbGxMZWZ0IixsPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCksZD1sLmRvY3VtZW50RWxlbWVudCxjPXRoaXMuZ2V0UG9wdXBQYXJlbnQoKSxoPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdT1sLmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxwPWM9PT1sLmJvZHksZz1lW25dO2xldCBtPXA/KHM/ZHM6Y3MpKGQpK2RbYV06Y1tyXTtwJiYobS09TWF0aC5hYnModVtvXS1oW29dKSk7Y29uc3QgZj1tLWc7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHQsMCksTWF0aC5hYnMoZikpfWFkZFBvcHVwKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKSx7ZUNoaWxkOmksYXJpYUxhYmVsOnMsYWx3YXlzT25Ub3A6cixwb3NpdGlvbkNhbGxiYWNrOm8sYW5jaG9yVG9FbGVtZW50Om59PWU7aWYoIXQpcmV0dXJuIGNvbnNvbGUud2FybigiQUcgR3JpZDogY291bGQgbm90IGZpbmQgdGhlIGRvY3VtZW50LCBkb2N1bWVudCBpcyBlbXB0eSIpLHtoaWRlRnVuYzooKT0+e319O2NvbnN0IGE9dGhpcy5nZXRQb3B1cEluZGV4KGkpO2lmKC0xIT09YSl7cmV0dXJue2hpZGVGdW5jOnRoaXMucG9wdXBMaXN0W2FdLmhpZGVGdW5jfX10aGlzLmluaXRpYWxpc2VQb3B1cFBvc2l0aW9uKGkpO2NvbnN0IGw9dGhpcy5jcmVhdGVQb3B1cFdyYXBwZXIoaSxzLCEhciksZD10aGlzLmFkZEV2ZW50TGlzdGVuZXJzVG9Qb3B1cChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3dyYXBwZXJFbDpsfSkpO3JldHVybiBvJiZvKCksdGhpcy5hZGRQb3B1cFRvUG9wdXBMaXN0KGksbCxkLG4pLHtoaWRlRnVuYzpkfX1pbml0aWFsaXNlUG9wdXBQb3NpdGlvbihlKXtjb25zdCB0PXRoaXMuZ2V0UG9wdXBQYXJlbnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtiKGUuc3R5bGUudG9wKXx8KGUuc3R5bGUudG9wPS0xKnQudG9wKyJweCIpLGIoZS5zdHlsZS5sZWZ0KXx8KGUuc3R5bGUubGVmdD0tMSp0LmxlZnQrInB4Iil9Y3JlYXRlUG9wdXBXcmFwcGVyKGUsdCxpKXtjb25zdCBzPXRoaXMuZ2V0UG9wdXBQYXJlbnQoKSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHthbGxUaGVtZXM6b309dGhpcy5lbnZpcm9ubWVudC5nZXRUaGVtZSgpO3JldHVybiBvLmxlbmd0aCYmci5jbGFzc0xpc3QuYWRkKC4uLm8pLHIuY2xhc3NMaXN0LmFkZCgiYWctcG9wdXAiKSxlLmNsYXNzTGlzdC5hZGQodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKT8iYWctcnRsIjoiYWctbHRyIiwiYWctcG9wdXAtY2hpbGQiKSxlLmhhc0F0dHJpYnV0ZSgicm9sZSIpfHxYdChlLCJkaWFsb2ciKSxlaShlLHQpLHIuYXBwZW5kQ2hpbGQoZSkscy5hcHBlbmRDaGlsZChyKSxpP3RoaXMuc2V0QWx3YXlzT25Ub3AoZSwhMCk6dGhpcy5icmluZ1BvcHVwVG9Gcm9udChlKSxyfWhhbmRsZVRoZW1lQ2hhbmdlKCl7Y29uc3R7YWxsVGhlbWVzOmV9PXRoaXMuZW52aXJvbm1lbnQuZ2V0VGhlbWUoKTtmb3IoY29uc3QgdCBvZiB0aGlzLnBvcHVwTGlzdCl7Zm9yKGNvbnN0IGUgb2YgQXJyYXkuZnJvbSh0LndyYXBwZXIuY2xhc3NMaXN0KSllLnN0YXJ0c1dpdGgoImFnLXRoZW1lLSIpJiZ0LndyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZShlKTtlLmxlbmd0aCYmdC53cmFwcGVyLmNsYXNzTGlzdC5hZGQoLi4uZSl9fWFkZEV2ZW50TGlzdGVuZXJzVG9Qb3B1cChlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCksaT10aGlzLmdldFBvcHVwUGFyZW50KCkse3dyYXBwZXJFbDpzLGVDaGlsZDpyLGNsaWNrOm8sY2xvc2VkQ2FsbGJhY2s6bixhZnRlckd1aUF0dGFjaGVkOmEsY2xvc2VPbkVzYzpsLG1vZGFsOmR9PWU7bGV0IGM9ITE7Y29uc3QgaD1lPT57aWYoIXMuY29udGFpbnModC5hY3RpdmVFbGVtZW50KSlyZXR1cm47ZS5rZXkhPT1qcy5FU0NBUEV8fCRlKGUpfHxnKHtrZXlib2FyZEV2ZW50OmV9KX0sdT1lPT5nKHttb3VzZUV2ZW50OmV9KSxwPWU9Pmcoe3RvdWNoRXZlbnQ6ZX0pLGc9KGU9e30pPT57Y29uc3R7bW91c2VFdmVudDpvLHRvdWNoRXZlbnQ6YSxrZXlib2FyZEV2ZW50Omx9PWU7dGhpcy5pc0V2ZW50RnJvbUN1cnJlbnRQb3B1cCh7bW91c2VFdmVudDpvLHRvdWNoRXZlbnQ6YX0scil8fGN8fChjPSEwLGkucmVtb3ZlQ2hpbGQocyksdC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIixoKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsdSksdC5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IixwKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImNvbnRleHRtZW51Iix1KSx0aGlzLmV2ZW50U2VydmljZS5yZW1vdmVFdmVudExpc3RlbmVyKGx0LkVWRU5UX0RSQUdfU1RBUlRFRCx1KSxuJiZuKG98fGF8fGwpLHRoaXMucmVtb3ZlUG9wdXBGcm9tUG9wdXBMaXN0KHIpKX07cmV0dXJuIGEmJmEoe2hpZGVQb3B1cDpnfSksd2luZG93LnNldFRpbWVvdXQoKCk9PntsJiZ0LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLGgpLGQmJih0LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsdSksdGhpcy5ldmVudFNlcnZpY2UuYWRkRXZlbnRMaXN0ZW5lcihsdC5FVkVOVF9EUkFHX1NUQVJURUQsdSksdC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IixwKSx0LmFkZEV2ZW50TGlzdGVuZXIoImNvbnRleHRtZW51Iix1KSl9LDApLGd9YWRkUG9wdXBUb1BvcHVwTGlzdChlLHQsaSxzKXt0aGlzLnBvcHVwTGlzdC5wdXNoKHtlbGVtZW50OmUsd3JhcHBlcjp0LGhpZGVGdW5jOmksaW5zdGFuY2VJZDpDYysrLGlzQW5jaG9yZWQ6ISFzfSkscyYmdGhpcy5zZXRQb3B1cFBvc2l0aW9uUmVsYXRlZFRvRWxlbWVudChlLHMpfWdldFBvcHVwSW5kZXgoZSl7cmV0dXJuIHRoaXMucG9wdXBMaXN0LmZpbmRJbmRleCh0PT50LmVsZW1lbnQ9PT1lKX1zZXRQb3B1cFBvc2l0aW9uUmVsYXRlZFRvRWxlbWVudChlLHQpe2NvbnN0IGk9dGhpcy5nZXRQb3B1cEluZGV4KGUpO2lmKC0xPT09aSlyZXR1cm47Y29uc3Qgcz10aGlzLnBvcHVwTGlzdFtpXTtpZihzLnN0b3BBbmNob3JpbmdQcm9taXNlJiZzLnN0b3BBbmNob3JpbmdQcm9taXNlLnRoZW4oZT0+ZSYmZSgpKSxzLnN0b3BBbmNob3JpbmdQcm9taXNlPXZvaWQgMCxzLmlzQW5jaG9yZWQ9ITEsIXQpcmV0dXJuO2NvbnN0IHI9dGhpcy5rZWVwUG9wdXBQb3NpdGlvbmVkUmVsYXRpdmVUbyh7ZWxlbWVudDp0LGVQb3B1cDplLGhpZGVQb3B1cDpzLmhpZGVGdW5jfSk7cmV0dXJuIHMuc3RvcEFuY2hvcmluZ1Byb21pc2U9cixzLmlzQW5jaG9yZWQ9ITAscn1yZW1vdmVQb3B1cEZyb21Qb3B1cExpc3QoZSl7dGhpcy5zZXRBbGlnbmVkU3R5bGVzKGUsbnVsbCksdGhpcy5zZXRQb3B1cFBvc2l0aW9uUmVsYXRlZFRvRWxlbWVudChlLG51bGwpLHRoaXMucG9wdXBMaXN0PXRoaXMucG9wdXBMaXN0LmZpbHRlcih0PT50LmVsZW1lbnQhPT1lKX1rZWVwUG9wdXBQb3NpdGlvbmVkUmVsYXRpdmVUbyhlKXtjb25zdCB0PXRoaXMuZ2V0UG9wdXBQYXJlbnQoKSxpPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkse2VsZW1lbnQ6cyxlUG9wdXA6cn09ZSxvPXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbj1pLnRvcC1vLnRvcCxhPWkubGVmdC1vLmxlZnQ7bGV0IGw9bixkPWE7Y29uc3QgYz1yLnN0eWxlLnRvcCxoPXBhcnNlSW50KGMuc3Vic3RyaW5nKDAsYy5sZW5ndGgtMSksMTApLHU9ci5zdHlsZS5sZWZ0LHA9cGFyc2VJbnQodS5zdWJzdHJpbmcoMCx1Lmxlbmd0aC0xKSwxMCk7cmV0dXJuIG5ldyB0cihpPT57dGhpcy5nZXRGcmFtZXdvcmtPdmVycmlkZXMoKS5zZXRJbnRlcnZhbCgoKT0+e2NvbnN0IGk9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoMD09by50b3AmJjA9PW8ubGVmdCYmMD09by5oZWlnaHQmJjA9PW8ud2lkdGgpcmV0dXJuIHZvaWQgZS5oaWRlUG9wdXAoKTtjb25zdCBjPWkudG9wLW8udG9wO2lmKGMhPWwpe2NvbnN0IGU9dGhpcy5rZWVwWFlXaXRoaW5Cb3VuZHMocixoK24tYyxmYy52ZXJ0aWNhbCk7ci5zdHlsZS50b3A9ZSsicHgifWw9Yztjb25zdCB1PWkubGVmdC1vLmxlZnQ7aWYodSE9ZCl7Y29uc3QgZT10aGlzLmtlZXBYWVdpdGhpbkJvdW5kcyhyLHArYS11LGZjLmhvcml6b250YWwpO3Iuc3R5bGUubGVmdD1lKyJweCJ9ZD11fSwyMDApLnRoZW4oZT0+e2koKCk9PntudWxsIT1lJiZ3aW5kb3cuY2xlYXJJbnRlcnZhbChlKX0pfSl9KX1oYXNBbmNob3JlZFBvcHVwKCl7cmV0dXJuIHRoaXMucG9wdXBMaXN0LnNvbWUoZT0+ZS5pc0FuY2hvcmVkKX1pc0V2ZW50RnJvbUN1cnJlbnRQb3B1cChlLHQpe2NvbnN0e21vdXNlRXZlbnQ6aSx0b3VjaEV2ZW50OnN9PWUscj1pfHxzO2lmKCFyKXJldHVybiExO2NvbnN0IG89dGhpcy5nZXRQb3B1cEluZGV4KHQpO2lmKC0xPT09bylyZXR1cm4hMTtmb3IobGV0IGU9bztlPHRoaXMucG9wdXBMaXN0Lmxlbmd0aDtlKyspe2lmKFplKHRoaXMucG9wdXBMaXN0W2VdLmVsZW1lbnQscikpcmV0dXJuITB9cmV0dXJuIHRoaXMuaXNFbGVtZW50V2l0aGluQ3VzdG9tUG9wdXAoci50YXJnZXQpfWlzRWxlbWVudFdpdGhpbkN1c3RvbVBvcHVwKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKTtmb3IoO2UmJmUhPT10LmJvZHk7KXtpZihlLmNsYXNzTGlzdC5jb250YWlucygiYWctY3VzdG9tLWNvbXBvbmVudC1wb3B1cCIpfHxudWxsPT09ZS5wYXJlbnRFbGVtZW50KXJldHVybiEwO2U9ZS5wYXJlbnRFbGVtZW50fXJldHVybiExfWdldFdyYXBwZXIoZSl7Zm9yKDshZS5jbGFzc0xpc3QuY29udGFpbnMoImFnLXBvcHVwIikmJmUucGFyZW50RWxlbWVudDspZT1lLnBhcmVudEVsZW1lbnQ7cmV0dXJuIGUuY2xhc3NMaXN0LmNvbnRhaW5zKCJhZy1wb3B1cCIpP2U6bnVsbH1zZXRBbHdheXNPblRvcChlLHQpe2NvbnN0IGk9dGhpcy5nZXRXcmFwcGVyKGUpO2kmJihpLmNsYXNzTGlzdC50b2dnbGUoImFnLWFsd2F5cy1vbi10b3AiLCEhdCksdCYmdGhpcy5icmluZ1BvcHVwVG9Gcm9udChpKSl9YnJpbmdQb3B1cFRvRnJvbnQoZSl7Y29uc3QgdD10aGlzLmdldFBvcHVwUGFyZW50KCksaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LnF1ZXJ5U2VsZWN0b3JBbGwoIi5hZy1wb3B1cCIpKSxzPWkubGVuZ3RoLHI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodC5xdWVyeVNlbGVjdG9yQWxsKCIuYWctcG9wdXAuYWctYWx3YXlzLW9uLXRvcCIpKSxvPXIubGVuZ3RoLG49dGhpcy5nZXRXcmFwcGVyKGUpO2lmKCFufHxzPD0xfHwhdC5jb250YWlucyhlKSlyZXR1cm47Y29uc3QgYT1pLmluZGV4T2YobiksbD1uLnF1ZXJ5U2VsZWN0b3JBbGwoImRpdiIpLGQ9W107aWYobC5mb3JFYWNoKGU9PnswIT09ZS5zY3JvbGxUb3AmJmQucHVzaChbZSxlLnNjcm9sbFRvcF0pfSksbyl7bi5jbGFzc0xpc3QuY29udGFpbnMoImFnLWFsd2F5cy1vbi10b3AiKT9hIT09cy0xJiZPZShyKS5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyZW5kIixuKTphIT09cy1vLTEmJnJbMF0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJiZWZvcmViZWdpbiIsbil9ZWxzZSBhIT09cy0xJiZPZShpKS5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyZW5kIixuKTtmb3IoO2QubGVuZ3RoOyl7Y29uc3QgZT1kLnBvcCgpO2VbMF0uc2Nyb2xsVG9wPWVbMV19Y29uc3QgYz17dHlwZToicG9wdXBUb0Zyb250IixlV3JhcHBlcjpufTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGMpfX07eWMuV0FJVF9GT1JfUE9QVVBfQ09OVEVOVF9SRVNJWkU9MjAwLHZjKFtjZSgiZm9jdXNTZXJ2aWNlIildLHljLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLHZjKFtjZSgiY3RybHNTZXJ2aWNlIildLHljLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLHZjKFtjZSgicmVzaXplT2JzZXJ2ZXJTZXJ2aWNlIildLHljLnByb3RvdHlwZSwicmVzaXplT2JzZXJ2ZXJTZXJ2aWNlIix2b2lkIDApLHZjKFthZV0seWMucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSx5Yz1tYz12YyhbZGUoInBvcHVwU2VydmljZSIpXSx5Yyk7Y2xhc3MgU2MgZXh0ZW5kcyBjcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCdcbiAgICAgICAgPGRpdiBjbGFzcz0iYWctYXV0b2NvbXBsZXRlLXJvdyIgcm9sZT0icHJlc2VudGF0aW9uIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWF1dG9jb21wbGV0ZS1yb3ctbGFiZWwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj4nKSx0aGlzLmhhc0hpZ2hsaWdodGluZz0hMX1zZXRTdGF0ZShlLHQpe3RoaXMudmFsdWU9ZSx0aGlzLnJlbmRlcigpLHRoaXMudXBkYXRlU2VsZWN0ZWQodCl9dXBkYXRlU2VsZWN0ZWQoZSl7dGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1hdXRvY29tcGxldGUtcm93LXNlbGVjdGVkIixlKX1zZXRTZWFyY2hTdHJpbmcoZSl7dmFyIHQ7bGV0IGk9ITE7aWYoYihlKSl7Y29uc3Qgcz1udWxsPT09KHQ9dGhpcy52YWx1ZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKGUudG9Mb2NhbGVMb3dlckNhc2UoKSk7aWYocz49MCl7aT0hMCx0aGlzLmhhc0hpZ2hsaWdodGluZz0hMDtjb25zdCB0PXMrZS5sZW5ndGgscj1mdCh0aGlzLnZhbHVlLnNsaWNlKDAscykpLG89ZnQodGhpcy52YWx1ZS5zbGljZShzLHQpKSxuPWZ0KHRoaXMudmFsdWUuc2xpY2UodCkpO3RoaXMuZ2V0R3VpKCkubGFzdEVsZW1lbnRDaGlsZC5pbm5lckhUTUw9YCR7cn08Yj4ke299PC9iPiR7bn1gfX0haSYmdGhpcy5oYXNIaWdobGlnaHRpbmcmJih0aGlzLmhhc0hpZ2hsaWdodGluZz0hMSx0aGlzLnJlbmRlcigpKX1yZW5kZXIoKXt2YXIgZTt0aGlzLmdldEd1aSgpLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MPW51bGwhPT0oZT1mdCh0aGlzLnZhbHVlKSkmJnZvaWQgMCE9PWU/ZToiJm5ic3A7In19dmFyIHdjPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGJjIGV4dGVuZHMgbW97Y29uc3RydWN0b3IoZSl7c3VwZXIoYmMuVEVNUExBVEUpLHRoaXMucGFyYW1zPWUsdGhpcy5zZWFyY2hTdHJpbmc9IiJ9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKX1pbml0KCl7dGhpcy5hdXRvY29tcGxldGVFbnRyaWVzPXRoaXMucGFyYW1zLmF1dG9jb21wbGV0ZUVudHJpZXMsdGhpcy52aXJ0dWFsTGlzdD10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBRZCh7Y3NzSWRlbnRpZmllcjoiYXV0b2NvbXBsZXRlIn0pKSx0aGlzLnZpcnR1YWxMaXN0LnNldENvbXBvbmVudENyZWF0b3IodGhpcy5jcmVhdGVSb3dDb21wb25lbnQuYmluZCh0aGlzKSksdGhpcy5lTGlzdC5hcHBlbmRDaGlsZCh0aGlzLnZpcnR1YWxMaXN0LmdldEd1aSgpKSx0aGlzLnZpcnR1YWxMaXN0LnNldE1vZGVsKHtnZXRSb3dDb3VudDooKT0+dGhpcy5hdXRvY29tcGxldGVFbnRyaWVzLmxlbmd0aCxnZXRSb3c6ZT0+dGhpcy5hdXRvY29tcGxldGVFbnRyaWVzW2VdfSk7Y29uc3QgZT10aGlzLnZpcnR1YWxMaXN0LmdldEd1aSgpO3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsImNsaWNrIiwoKT0+dGhpcy5wYXJhbXMub25Db25maXJtZWQoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSwibW91c2Vtb3ZlIix0aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsIm1vdXNlZG93biIsZT0+ZS5wcmV2ZW50RGVmYXVsdCgpKSx0aGlzLnNldFNlbGVjdGVkVmFsdWUoMCl9b25OYXZpZ2F0aW9uS2V5RG93bihlLHQpe2UucHJldmVudERlZmF1bHQoKTtjb25zdCBpPXRoaXMuYXV0b2NvbXBsZXRlRW50cmllcy5pbmRleE9mKHRoaXMuc2VsZWN0ZWRWYWx1ZSkscz10PT09anMuVVA/aS0xOmkrMTt0aGlzLmNoZWNrU2V0U2VsZWN0ZWRWYWx1ZShzKX1zZXRTZWFyY2goZSl7dGhpcy5zZWFyY2hTdHJpbmc9ZSxiKGUpP3RoaXMucnVuU2VhcmNoKCk6KHRoaXMuYXV0b2NvbXBsZXRlRW50cmllcz10aGlzLnBhcmFtcy5hdXRvY29tcGxldGVFbnRyaWVzLHRoaXMudmlydHVhbExpc3QucmVmcmVzaCgpLHRoaXMuY2hlY2tTZXRTZWxlY3RlZFZhbHVlKDApKSx0aGlzLnVwZGF0ZVNlYXJjaEluTGlzdCgpfXJ1bkNvbnRhaW5zU2VhcmNoKGUsdCl7bGV0IGkscz0hMTtjb25zdCByPWUudG9Mb2NhbGVMb3dlckNhc2UoKSxvPXQuZmlsdGVyKGU9Pntjb25zdCB0PWUudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKHIpLG89MD09PXQsbj10Pj0wO3JldHVybiBuJiYoIWl8fCFzJiZvfHxzPT09byYmZS5sZW5ndGg8aS5sZW5ndGgpJiYoaT1lLHM9byksbn0pO3JldHVybiFpJiZvLmxlbmd0aCYmKGk9b1swXSkse3RvcE1hdGNoOmksYWxsTWF0Y2hlczpvfX1ydW5TZWFyY2goKXt2YXIgZSx0O2NvbnN0e2F1dG9jb21wbGV0ZUVudHJpZXM6aX09dGhpcy5wYXJhbXMscz1pLm1hcChlPT57dmFyIHQ7cmV0dXJuIG51bGwhPT0odD1lLmRpc3BsYXlWYWx1ZSkmJnZvaWQgMCE9PXQ/dDplLmtleX0pO2xldCByLG87aWYodGhpcy5wYXJhbXMudXNlRnV6enlTZWFyY2gpcj1fcyh0aGlzLnNlYXJjaFN0cmluZyxzLCEwKS52YWx1ZXMsbz1yLmxlbmd0aD9yWzBdOnZvaWQgMDtlbHNle2NvbnN0IGU9dGhpcy5ydW5Db250YWluc1NlYXJjaCh0aGlzLnNlYXJjaFN0cmluZyxzKTtyPWUuYWxsTWF0Y2hlcyxvPWUudG9wTWF0Y2h9bGV0IG49aS5maWx0ZXIoKHtrZXk6ZSxkaXNwbGF5VmFsdWU6dH0pPT5yLmluY2x1ZGVzKG51bGwhPXQ/dDplKSk7aWYoIW4ubGVuZ3RoJiZ0aGlzLnNlbGVjdGVkVmFsdWUmJihudWxsPT09KHQ9bnVsbD09PShlPXRoaXMucGFyYW1zKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5mb3JjZUxhc3RTZWxlY3Rpb24pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNhbGwoZSx0aGlzLnNlbGVjdGVkVmFsdWUsdGhpcy5zZWFyY2hTdHJpbmcpKSYmKG49W3RoaXMuc2VsZWN0ZWRWYWx1ZV0pLHRoaXMuYXV0b2NvbXBsZXRlRW50cmllcz1uLHRoaXMudmlydHVhbExpc3QucmVmcmVzaCgpLCFvKXJldHVybjtjb25zdCBhPXIuaW5kZXhPZihvKTt0aGlzLmNoZWNrU2V0U2VsZWN0ZWRWYWx1ZShhKX11cGRhdGVTZWFyY2hJbkxpc3QoKXt0aGlzLnZpcnR1YWxMaXN0LmZvckVhY2hSZW5kZXJlZFJvdyhlPT5lLnNldFNlYXJjaFN0cmluZyh0aGlzLnNlYXJjaFN0cmluZykpfWNoZWNrU2V0U2VsZWN0ZWRWYWx1ZShlKXtlPj0wJiZlPHRoaXMuYXV0b2NvbXBsZXRlRW50cmllcy5sZW5ndGgmJnRoaXMuc2V0U2VsZWN0ZWRWYWx1ZShlKX1zZXRTZWxlY3RlZFZhbHVlKGUpe2NvbnN0IHQ9dGhpcy5hdXRvY29tcGxldGVFbnRyaWVzW2VdO3RoaXMuc2VsZWN0ZWRWYWx1ZSE9PXQmJih0aGlzLnNlbGVjdGVkVmFsdWU9dCx0aGlzLnZpcnR1YWxMaXN0LmVuc3VyZUluZGV4VmlzaWJsZShlKSx0aGlzLnZpcnR1YWxMaXN0LmZvckVhY2hSZW5kZXJlZFJvdygodCxpKT0+e3QudXBkYXRlU2VsZWN0ZWQoZT09PWkpfSkpfWNyZWF0ZVJvd0NvbXBvbmVudChlKXt2YXIgdDtjb25zdCBpPW5ldyBTYztyZXR1cm4gdGhpcy5nZXRDb250ZXh0KCkuY3JlYXRlQmVhbihpKSxpLnNldFN0YXRlKG51bGwhPT0odD1lLmRpc3BsYXlWYWx1ZSkmJnZvaWQgMCE9PXQ/dDplLmtleSxlPT09dGhpcy5zZWxlY3RlZFZhbHVlKSxpfW9uTW91c2VNb3ZlKGUpe2NvbnN0IHQ9dGhpcy52aXJ0dWFsTGlzdC5nZXRHdWkoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPXRoaXMudmlydHVhbExpc3QuZ2V0U2Nyb2xsVG9wKCkscz1lLmNsaWVudFktdC50b3AraSxyPU1hdGguZmxvb3Iocy90aGlzLnZpcnR1YWxMaXN0LmdldFJvd0hlaWdodCgpKTt0aGlzLmNoZWNrU2V0U2VsZWN0ZWRWYWx1ZShyKX1hZnRlckd1aUF0dGFjaGVkKCl7dGhpcy52aXJ0dWFsTGlzdC5yZWZyZXNoKCl9Z2V0U2VsZWN0ZWRWYWx1ZSgpe3ZhciBlO3JldHVybiB0aGlzLmF1dG9jb21wbGV0ZUVudHJpZXMubGVuZ3RoJiZudWxsIT09KGU9dGhpcy5zZWxlY3RlZFZhbHVlKSYmdm9pZCAwIT09ZT9lOm51bGx9fWJjLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1hdXRvY29tcGxldGUtbGlzdC1wb3B1cCI+XG4gICAgICAgICAgICA8ZGl2IHJlZj0iZUxpc3QiIGNsYXNzPSJhZy1hdXRvY29tcGxldGUtbGlzdCI+PC9kaXY+XG4gICAgICAgIDxkaXY+Jyx3YyhbdXIoImVMaXN0IildLGJjLnByb3RvdHlwZSwiZUxpc3QiLHZvaWQgMCksd2MoW2FlXSxiYy5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBFYz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBSYyBleHRlbmRzIGNye2NvbnN0cnVjdG9yKCl7c3VwZXIoJ1xuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctYXV0b2NvbXBsZXRlIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgIDxhZy1pbnB1dC10ZXh0LWZpZWxkIHJlZj0iZUF1dG9jb21wbGV0ZUlucHV0Ij48L2FnLWlucHV0LXRleHQtZmllbGQ+XG4gICAgICAgICAgICA8L2Rpdj4nKSx0aGlzLmlzTGlzdE9wZW49ITEsdGhpcy5sYXN0UG9zaXRpb249MCx0aGlzLnZhbGlkPSEwfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmVBdXRvY29tcGxldGVJbnB1dC5vblZhbHVlQ2hhbmdlKGU9PnRoaXMub25WYWx1ZUNoYW5nZWQoZSkpLHRoaXMuZUF1dG9jb21wbGV0ZUlucHV0LmdldElucHV0RWxlbWVudCgpLnNldEF0dHJpYnV0ZSgiYXV0b2NvbXBsZXRlIiwib2ZmIiksdGhpcy5hZGRHdWlFdmVudExpc3RlbmVyKCJrZXlkb3duIix0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpKSx0aGlzLmFkZEd1aUV2ZW50TGlzdGVuZXIoImNsaWNrIix0aGlzLnVwZGF0ZVBvc2l0aW9uQW5kTGlzdC5iaW5kKHRoaXMpKSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT57dGhpcy5kZXN0cm95QmVhbih0aGlzLmF1dG9jb21wbGV0ZUxpc3QpfSksdGhpcy5hZGRHdWlFdmVudExpc3RlbmVyKCJmb2N1c291dCIsKCk9PnRoaXMub25Gb2N1c091dCgpKX1vblZhbHVlQ2hhbmdlZChlKXtjb25zdCB0PXcoZSk7dGhpcy51cGRhdGVWYWx1ZSh0KSx0aGlzLnVwZGF0ZUF1dG9jb21wbGV0ZUxpc3QodCl9dXBkYXRlVmFsdWUoZSl7dGhpcy51cGRhdGVMYXN0UG9zaXRpb24oKSx0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6UmMuRVZFTlRfVkFMVUVfQ0hBTkdFRCx2YWx1ZTplfSksdGhpcy52YWxpZGF0ZShlKX11cGRhdGVBdXRvY29tcGxldGVMaXN0KGUpe3ZhciB0LGkscyxyO2NvbnN0IG89bnVsbCE9PShpPW51bGw9PT0odD10aGlzLmxpc3RHZW5lcmF0b3IpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNhbGwodGhpcyxlLHRoaXMubGFzdFBvc2l0aW9uKSkmJnZvaWQgMCE9PWk/aTp7ZW5hYmxlZDohMX07aWYoby50eXBlJiZvLnR5cGU9PT0obnVsbD09PShzPXRoaXMuYXV0b2NvbXBsZXRlTGlzdFBhcmFtcyl8fHZvaWQgMD09PXM/dm9pZCAwOnMudHlwZSl8fHRoaXMuaXNMaXN0T3BlbiYmdGhpcy5jbG9zZUxpc3QoKSx0aGlzLmF1dG9jb21wbGV0ZUxpc3RQYXJhbXM9byxudWxsPT09KHI9dGhpcy5hdXRvY29tcGxldGVMaXN0UGFyYW1zKXx8dm9pZCAwPT09cj92b2lkIDA6ci5lbmFibGVkKXt0aGlzLmlzTGlzdE9wZW58fHRoaXMub3Blbkxpc3QoKTtjb25zdHtzZWFyY2hTdHJpbmc6ZX09dGhpcy5hdXRvY29tcGxldGVMaXN0UGFyYW1zO3RoaXMuYXV0b2NvbXBsZXRlTGlzdC5zZXRTZWFyY2gobnVsbCE9ZT9lOiIiKX1lbHNlIHRoaXMuaXNMaXN0T3BlbiYmdGhpcy5jbG9zZUxpc3QoKX1vbktleURvd24oZSl7Y29uc3QgdD1lLmtleTtzd2l0Y2godGhpcy51cGRhdGVMYXN0UG9zaXRpb24oKSx0KXtjYXNlIGpzLkVOVEVSOnRoaXMub25FbnRlcktleURvd24oZSk7YnJlYWs7Y2FzZSBqcy5UQUI6dGhpcy5vblRhYktleURvd24oZSk7YnJlYWs7Y2FzZSBqcy5ET1dOOmNhc2UganMuVVA6dGhpcy5vblVwRG93bktleURvd24oZSx0KTticmVhaztjYXNlIGpzLkxFRlQ6Y2FzZSBqcy5SSUdIVDpjYXNlIGpzLlBBR0VfSE9NRTpjYXNlIGpzLlBBR0VfRU5EOnNldFRpbWVvdXQoKCk9Pnt0aGlzLnVwZGF0ZVBvc2l0aW9uQW5kTGlzdCgpfSk7YnJlYWs7Y2FzZSBqcy5FU0NBUEU6dGhpcy5vbkVzY2FwZUtleURvd24oZSk7YnJlYWs7Y2FzZSBqcy5TUEFDRTplLmN0cmxLZXkmJiF0aGlzLmlzTGlzdE9wZW4mJihlLnByZXZlbnREZWZhdWx0KCksdGhpcy5mb3JjZU9wZW5MaXN0KCkpfX1jb25maXJtU2VsZWN0aW9uKCl7dmFyIGU7Y29uc3QgdD1udWxsPT09KGU9dGhpcy5hdXRvY29tcGxldGVMaXN0KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRTZWxlY3RlZFZhbHVlKCk7dCYmKHRoaXMuY2xvc2VMaXN0KCksdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlJjLkVWRU5UX09QVElPTl9TRUxFQ1RFRCx2YWx1ZTp0aGlzLmdldFZhbHVlKCkscG9zaXRpb246dGhpcy5sYXN0UG9zaXRpb24sdXBkYXRlRW50cnk6dCxhdXRvY29tcGxldGVUeXBlOnRoaXMuYXV0b2NvbXBsZXRlTGlzdFBhcmFtcy50eXBlfSkpfW9uVGFiS2V5RG93bihlKXt0aGlzLmlzTGlzdE9wZW4mJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLmNvbmZpcm1TZWxlY3Rpb24oKSl9b25FbnRlcktleURvd24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaXNMaXN0T3Blbj90aGlzLmNvbmZpcm1TZWxlY3Rpb24oKTp0aGlzLm9uQ29tcGxldGVkKCl9b25VcERvd25LZXlEb3duKGUsdCl7dmFyIGk7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaXNMaXN0T3Blbj9udWxsPT09KGk9dGhpcy5hdXRvY29tcGxldGVMaXN0KXx8dm9pZCAwPT09aXx8aS5vbk5hdmlnYXRpb25LZXlEb3duKGUsdCk6dGhpcy5mb3JjZU9wZW5MaXN0KCl9b25Fc2NhcGVLZXlEb3duKGUpe3RoaXMuaXNMaXN0T3BlbiYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuY2xvc2VMaXN0KCksdGhpcy5zZXRDYXJldCh0aGlzLmxhc3RQb3NpdGlvbiwhMCkpfW9uRm9jdXNPdXQoKXt0aGlzLmlzTGlzdE9wZW4mJnRoaXMuY2xvc2VMaXN0KCl9dXBkYXRlUG9zaXRpb25BbmRMaXN0KCl7dmFyIGU7dGhpcy51cGRhdGVMYXN0UG9zaXRpb24oKSx0aGlzLnVwZGF0ZUF1dG9jb21wbGV0ZUxpc3QobnVsbCE9PShlPXRoaXMuZUF1dG9jb21wbGV0ZUlucHV0LmdldFZhbHVlKCkpJiZ2b2lkIDAhPT1lP2U6bnVsbCl9c2V0Q2FyZXQoZSx0KXtjb25zdCBpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCk7dCYmaS5hY3RpdmVFbGVtZW50PT09aS5ib2R5JiZ0aGlzLmVBdXRvY29tcGxldGVJbnB1dC5nZXRGb2N1c2FibGVFbGVtZW50KCkuZm9jdXMoKTtjb25zdCBzPXRoaXMuZUF1dG9jb21wbGV0ZUlucHV0LmdldElucHV0RWxlbWVudCgpO3Muc2V0U2VsZWN0aW9uUmFuZ2UoZSxlKSxlPT09cy52YWx1ZS5sZW5ndGgmJihzLnNjcm9sbExlZnQ9cy5zY3JvbGxXaWR0aCl9Zm9yY2VPcGVuTGlzdCgpe3RoaXMub25WYWx1ZUNoYW5nZWQodGhpcy5lQXV0b2NvbXBsZXRlSW5wdXQuZ2V0VmFsdWUoKSl9dXBkYXRlTGFzdFBvc2l0aW9uKCl7dmFyIGU7dGhpcy5sYXN0UG9zaXRpb249bnVsbCE9PShlPXRoaXMuZUF1dG9jb21wbGV0ZUlucHV0LmdldElucHV0RWxlbWVudCgpLnNlbGVjdGlvblN0YXJ0KSYmdm9pZCAwIT09ZT9lOjB9dmFsaWRhdGUoZSl7dmFyIHQ7dGhpcy52YWxpZGF0b3ImJih0aGlzLnZhbGlkYXRpb25NZXNzYWdlPXRoaXMudmFsaWRhdG9yKGUpLHRoaXMuZUF1dG9jb21wbGV0ZUlucHV0LmdldElucHV0RWxlbWVudCgpLnNldEN1c3RvbVZhbGlkaXR5KG51bGwhPT0odD10aGlzLnZhbGlkYXRpb25NZXNzYWdlKSYmdm9pZCAwIT09dD90OiIiKSx0aGlzLnZhbGlkPSF0aGlzLnZhbGlkYXRpb25NZXNzYWdlLHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpSYy5FVkVOVF9WQUxJRF9DSEFOR0VELGlzVmFsaWQ6dGhpcy52YWxpZCx2YWxpZGF0aW9uTWVzc2FnZTp0aGlzLnZhbGlkYXRpb25NZXNzYWdlfSkpfW9wZW5MaXN0KCl7dGhpcy5pc0xpc3RPcGVuPSEwLHRoaXMuYXV0b2NvbXBsZXRlTGlzdD10aGlzLmNyZWF0ZUJlYW4obmV3IGJjKHthdXRvY29tcGxldGVFbnRyaWVzOnRoaXMuYXV0b2NvbXBsZXRlTGlzdFBhcmFtcy5lbnRyaWVzLG9uQ29uZmlybWVkOigpPT50aGlzLmNvbmZpcm1TZWxlY3Rpb24oKSxmb3JjZUxhc3RTZWxlY3Rpb246dGhpcy5mb3JjZUxhc3RTZWxlY3Rpb259KSk7Y29uc3QgZT10aGlzLmF1dG9jb21wbGV0ZUxpc3QuZ2V0R3VpKCksdD17ZVBvcHVwOmUsdHlwZToiYXV0b2NvbXBsZXRlIixldmVudFNvdXJjZTp0aGlzLmdldEd1aSgpLHBvc2l0aW9uOiJ1bmRlciIsYWxpZ25TaWRlOnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIik/InJpZ2h0IjoibGVmdCIsa2VlcFdpdGhpbkJvdW5kczohMH0saT10aGlzLnBvcHVwU2VydmljZS5hZGRQb3B1cCh7ZUNoaWxkOmUsYW5jaG9yVG9FbGVtZW50OnRoaXMuZ2V0R3VpKCkscG9zaXRpb25DYWxsYmFjazooKT0+dGhpcy5wb3B1cFNlcnZpY2UucG9zaXRpb25Qb3B1cEJ5Q29tcG9uZW50KHQpLGFyaWFMYWJlbDp0aGlzLmxpc3RBcmlhTGFiZWx9KTt0aGlzLmhpZGVQb3B1cD1pLmhpZGVGdW5jLHRoaXMuYXV0b2NvbXBsZXRlTGlzdC5hZnRlckd1aUF0dGFjaGVkKCl9Y2xvc2VMaXN0KCl7dGhpcy5pc0xpc3RPcGVuPSExLHRoaXMuaGlkZVBvcHVwKCksdGhpcy5kZXN0cm95QmVhbih0aGlzLmF1dG9jb21wbGV0ZUxpc3QpLHRoaXMuYXV0b2NvbXBsZXRlTGlzdD1udWxsfW9uQ29tcGxldGVkKCl7dGhpcy5pc0xpc3RPcGVuJiZ0aGlzLmNsb3NlTGlzdCgpLHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpSYy5FVkVOVF9WQUxVRV9DT05GSVJNRUQsdmFsdWU6dGhpcy5nZXRWYWx1ZSgpLGlzVmFsaWQ6dGhpcy5pc1ZhbGlkKCl9KX1nZXRWYWx1ZSgpe3JldHVybiB3KHRoaXMuZUF1dG9jb21wbGV0ZUlucHV0LmdldFZhbHVlKCkpfXNldElucHV0UGxhY2Vob2xkZXIoZSl7cmV0dXJuIHRoaXMuZUF1dG9jb21wbGV0ZUlucHV0LnNldElucHV0UGxhY2Vob2xkZXIoZSksdGhpc31zZXRJbnB1dEFyaWFMYWJlbChlKXtyZXR1cm4gdGhpcy5lQXV0b2NvbXBsZXRlSW5wdXQuc2V0SW5wdXRBcmlhTGFiZWwoZSksdGhpc31zZXRMaXN0QXJpYUxhYmVsKGUpe3JldHVybiB0aGlzLmxpc3RBcmlhTGFiZWw9ZSx0aGlzfXNldExpc3RHZW5lcmF0b3IoZSl7cmV0dXJuIHRoaXMubGlzdEdlbmVyYXRvcj1lLHRoaXN9c2V0VmFsaWRhdG9yKGUpe3JldHVybiB0aGlzLnZhbGlkYXRvcj1lLHRoaXN9aXNWYWxpZCgpe3JldHVybiB0aGlzLnZhbGlkfXNldFZhbHVlKGUpe2NvbnN0e3ZhbHVlOnQscG9zaXRpb246aSxzaWxlbnQ6cyx1cGRhdGVMaXN0T25seUlmT3BlbjpyLHJlc3RvcmVGb2N1czpvfT1lO3RoaXMuZUF1dG9jb21wbGV0ZUlucHV0LnNldFZhbHVlKHQsITApLHRoaXMuc2V0Q2FyZXQobnVsbCE9aT9pOnRoaXMubGFzdFBvc2l0aW9uLG8pLHN8fHRoaXMudXBkYXRlVmFsdWUodCksciYmIXRoaXMuaXNMaXN0T3Blbnx8dGhpcy51cGRhdGVBdXRvY29tcGxldGVMaXN0KHQpfXNldEZvcmNlTGFzdFNlbGVjdGlvbihlKXtyZXR1cm4gdGhpcy5mb3JjZUxhc3RTZWxlY3Rpb249ZSx0aGlzfXNldElucHV0RGlzYWJsZWQoZSl7cmV0dXJuIHRoaXMuZUF1dG9jb21wbGV0ZUlucHV0LnNldERpc2FibGVkKGUpLHRoaXN9fVJjLkVWRU5UX1ZBTFVFX0NIQU5HRUQ9ImV2ZW50VmFsdWVDaGFuZ2VkIixSYy5FVkVOVF9WQUxVRV9DT05GSVJNRUQ9ImV2ZW50VmFsdWVDb25maXJtZWQiLFJjLkVWRU5UX09QVElPTl9TRUxFQ1RFRD0iZXZlbnRPcHRpb25TZWxlY3RlZCIsUmMuRVZFTlRfVkFMSURfQ0hBTkdFRD0iZXZlbnRWYWxpZENoYW5nZWQiLEVjKFtjZSgicG9wdXBTZXJ2aWNlIildLFJjLnByb3RvdHlwZSwicG9wdXBTZXJ2aWNlIix2b2lkIDApLEVjKFt1cigiZUF1dG9jb21wbGV0ZUlucHV0IildLFJjLnByb3RvdHlwZSwiZUF1dG9jb21wbGV0ZUlucHV0Iix2b2lkIDApLEVjKFthZV0sUmMucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTtjb25zdCB4Yz1bInRvdWNoc3RhcnQiLCJ0b3VjaGVuZCIsInRvdWNobW92ZSIsInRvdWNoY2FuY2VsIl07Y2xhc3MgVGN7Y29uc3RydWN0b3IoZT0iamF2YXNjcmlwdCIpe3RoaXMuZnJhbWV3b3JrTmFtZT1lLHRoaXMucmVuZGVyaW5nRW5naW5lPSJ2YW5pbGxhIix0aGlzLndyYXBJbmNvbWluZz1lPT5lKCksdGhpcy53cmFwT3V0Z29pbmc9ZT0+ZSgpfXNldEludGVydmFsKGUsdCl7cmV0dXJuIG5ldyB0cihpPT57aSh3aW5kb3cuc2V0SW50ZXJ2YWwoZSx0KSl9KX1hZGRFdmVudExpc3RlbmVyKGUsdCxpLHMpe2NvbnN0IHI9QmUoeGMsdCk7ZS5hZGRFdmVudExpc3RlbmVyKHQsaSx7Y2FwdHVyZTohIXMscGFzc2l2ZTpyfSl9Z2V0IHNob3VsZFdyYXBPdXRnb2luZygpe3JldHVybiExfWZyYW1ld29ya0NvbXBvbmVudChlKXtyZXR1cm4gbnVsbH1pc0ZyYW1ld29ya0NvbXBvbmVudChlKXtyZXR1cm4hMX1nZXREb2NMaW5rKGUpe3JldHVybmBodHRwczovL3d3dy5hZy1ncmlkLmNvbS8keyJzb2xpZCI9PT10aGlzLmZyYW1ld29ya05hbWU/InJlYWN0Ijp0aGlzLmZyYW1ld29ya05hbWV9LWRhdGEtZ3JpZCR7ZT8iLyIrZToiIn1gfX12YXIgRGM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IE9jPWNsYXNzIGV4dGVuZHMgaXR7Z2V0TmV4dENlbGxUb0ZvY3VzKGUsdCxpPSExKXtyZXR1cm4gaT90aGlzLmdldE5leHRDZWxsVG9Gb2N1c1dpdGhDdHJsUHJlc3NlZChlLHQpOnRoaXMuZ2V0TmV4dENlbGxUb0ZvY3VzV2l0aG91dEN0cmxQcmVzc2VkKGUsdCl9Z2V0TmV4dENlbGxUb0ZvY3VzV2l0aEN0cmxQcmVzc2VkKGUsdCl7Y29uc3QgaT1lPT09anMuVVAscz1lPT09anMuRE9XTixyPWU9PT1qcy5MRUZUO2xldCBvLG47aWYoaXx8cyluPWk/dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0UGFnZUZpcnN0Um93KCk6dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0UGFnZUxhc3RSb3coKSxvPXQuY29sdW1uO2Vsc2V7Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKSxpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIik7bj10LnJvd0luZGV4LG89ciE9PWk/ZVswXTpPZShlKX1yZXR1cm57cm93SW5kZXg6bixyb3dQaW5uZWQ6bnVsbCxjb2x1bW46b319Z2V0TmV4dENlbGxUb0ZvY3VzV2l0aG91dEN0cmxQcmVzc2VkKGUsdCl7bGV0IGk9dCxzPSExO2Zvcig7IXM7KXtzd2l0Y2goZSl7Y2FzZSBqcy5VUDppPXRoaXMuZ2V0Q2VsbEFib3ZlKGkpO2JyZWFrO2Nhc2UganMuRE9XTjppPXRoaXMuZ2V0Q2VsbEJlbG93KGkpO2JyZWFrO2Nhc2UganMuUklHSFQ6aT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpP3RoaXMuZ2V0Q2VsbFRvTGVmdChpKTp0aGlzLmdldENlbGxUb1JpZ2h0KGkpO2JyZWFrO2Nhc2UganMuTEVGVDppPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIik/dGhpcy5nZXRDZWxsVG9SaWdodChpKTp0aGlzLmdldENlbGxUb0xlZnQoaSk7YnJlYWs7ZGVmYXVsdDppPW51bGwsY29uc29sZS53YXJuKCJBRyBHcmlkOiB1bmtub3duIGtleSBmb3IgbmF2aWdhdGlvbiAiK2UpfXM9IWl8fHRoaXMuaXNDZWxsR29vZFRvRm9jdXNPbihpKX1yZXR1cm4gaX1pc0NlbGxHb29kVG9Gb2N1c09uKGUpe2NvbnN0IHQ9ZS5jb2x1bW47bGV0IGk7c3dpdGNoKGUucm93UGlubmVkKXtjYXNlInRvcCI6aT10aGlzLnBpbm5lZFJvd01vZGVsLmdldFBpbm5lZFRvcFJvdyhlLnJvd0luZGV4KTticmVhaztjYXNlImJvdHRvbSI6aT10aGlzLnBpbm5lZFJvd01vZGVsLmdldFBpbm5lZEJvdHRvbVJvdyhlLnJvd0luZGV4KTticmVhaztkZWZhdWx0Omk9dGhpcy5yb3dNb2RlbC5nZXRSb3coZS5yb3dJbmRleCl9aWYoIWkpcmV0dXJuITE7cmV0dXJuIXQuaXNTdXBwcmVzc05hdmlnYWJsZShpKX1nZXRDZWxsVG9MZWZ0KGUpe2lmKCFlKXJldHVybiBudWxsO2NvbnN0IHQ9dGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5ZWRDb2xCZWZvcmUoZS5jb2x1bW4pO3JldHVybiB0P3tyb3dJbmRleDplLnJvd0luZGV4LGNvbHVtbjp0LHJvd1Bpbm5lZDplLnJvd1Bpbm5lZH06bnVsbH1nZXRDZWxsVG9SaWdodChlKXtpZighZSlyZXR1cm4gbnVsbDtjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheWVkQ29sQWZ0ZXIoZS5jb2x1bW4pO3JldHVybiB0P3tyb3dJbmRleDplLnJvd0luZGV4LGNvbHVtbjp0LHJvd1Bpbm5lZDplLnJvd1Bpbm5lZH06bnVsbH1nZXRSb3dCZWxvdyhlKXtjb25zdCB0PWUucm93SW5kZXgsaT1lLnJvd1Bpbm5lZDtpZih0aGlzLmlzTGFzdFJvd0luQ29udGFpbmVyKGUpKXN3aXRjaChpKXtjYXNlImJvdHRvbSI6cmV0dXJuIG51bGw7Y2FzZSJ0b3AiOnJldHVybiB0aGlzLnJvd01vZGVsLmlzUm93c1RvUmVuZGVyKCk/e3Jvd0luZGV4OnRoaXMucGFnaW5hdGlvblByb3h5LmdldFBhZ2VGaXJzdFJvdygpLHJvd1Bpbm5lZDpudWxsfTp0aGlzLnBpbm5lZFJvd01vZGVsLmlzUm93c1RvUmVuZGVyKCJib3R0b20iKT97cm93SW5kZXg6MCxyb3dQaW5uZWQ6ImJvdHRvbSJ9Om51bGw7ZGVmYXVsdDpyZXR1cm4gdGhpcy5waW5uZWRSb3dNb2RlbC5pc1Jvd3NUb1JlbmRlcigiYm90dG9tIik/e3Jvd0luZGV4OjAscm93UGlubmVkOiJib3R0b20ifTpudWxsfWNvbnN0IHM9dGhpcy5yb3dNb2RlbC5nZXRSb3coZS5yb3dJbmRleCkscj10aGlzLmdldE5leHRTdGlja3lQb3NpdGlvbihzKTtyZXR1cm4gcnx8e3Jvd0luZGV4OnQrMSxyb3dQaW5uZWQ6aX19Z2V0TmV4dFN0aWNreVBvc2l0aW9uKGUsdCl7aWYoIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzR3JvdXBSb3dzU3RpY2t5KCl8fCFlfHwhZS5zdGlja3kpcmV0dXJuO2NvbnN0IGk9Wy4uLnRoaXMucm93UmVuZGVyZXIuZ2V0U3RpY2t5VG9wUm93Q3RybHMoKV0uc29ydCgoZSx0KT0+ZS5nZXRSb3dOb2RlKCkucm93SW5kZXgtdC5nZXRSb3dOb2RlKCkucm93SW5kZXgpLHM9dD8tMToxLHI9aS5maW5kSW5kZXgodD0+dC5nZXRSb3dOb2RlKCkucm93SW5kZXg9PT1lLnJvd0luZGV4KSxvPWlbcitzXTtyZXR1cm4gbz97cm93SW5kZXg6by5nZXRSb3dOb2RlKCkucm93SW5kZXgscm93UGlubmVkOm51bGx9OnZvaWQgMH1nZXRDZWxsQmVsb3coZSl7aWYoIWUpcmV0dXJuIG51bGw7Y29uc3QgdD10aGlzLmdldFJvd0JlbG93KGUpO3JldHVybiB0P3tyb3dJbmRleDp0LnJvd0luZGV4LGNvbHVtbjplLmNvbHVtbixyb3dQaW5uZWQ6dC5yb3dQaW5uZWR9Om51bGx9aXNMYXN0Um93SW5Db250YWluZXIoZSl7Y29uc3QgdD1lLnJvd1Bpbm5lZCxpPWUucm93SW5kZXg7aWYoInRvcCI9PT10KXtyZXR1cm4gdGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRUb3BSb3dEYXRhKCkubGVuZ3RoLTE8PWl9aWYoImJvdHRvbSI9PT10KXtyZXR1cm4gdGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRCb3R0b21Sb3dEYXRhKCkubGVuZ3RoLTE8PWl9cmV0dXJuIHRoaXMucGFnaW5hdGlvblByb3h5LmdldFBhZ2VMYXN0Um93KCk8PWl9Z2V0Um93QWJvdmUoZSl7Y29uc3QgdD1lLnJvd0luZGV4LGk9ZS5yb3dQaW5uZWQ7aWYoaT8wPT09dDp0PT09dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0UGFnZUZpcnN0Um93KCkpcmV0dXJuInRvcCI9PT1pP251bGw6aSYmdGhpcy5yb3dNb2RlbC5pc1Jvd3NUb1JlbmRlcigpP3RoaXMuZ2V0TGFzdEJvZHlDZWxsKCk6dGhpcy5waW5uZWRSb3dNb2RlbC5pc1Jvd3NUb1JlbmRlcigidG9wIik/dGhpcy5nZXRMYXN0RmxvYXRpbmdUb3BSb3coKTpudWxsO2NvbnN0IHM9dGhpcy5yb3dNb2RlbC5nZXRSb3coZS5yb3dJbmRleCkscj10aGlzLmdldE5leHRTdGlja3lQb3NpdGlvbihzLCEwKTtyZXR1cm4gcnx8e3Jvd0luZGV4OnQtMSxyb3dQaW5uZWQ6aX19Z2V0Q2VsbEFib3ZlKGUpe2lmKCFlKXJldHVybiBudWxsO2NvbnN0IHQ9dGhpcy5nZXRSb3dBYm92ZSh7cm93SW5kZXg6ZS5yb3dJbmRleCxyb3dQaW5uZWQ6ZS5yb3dQaW5uZWR9KTtyZXR1cm4gdD97cm93SW5kZXg6dC5yb3dJbmRleCxjb2x1bW46ZS5jb2x1bW4scm93UGlubmVkOnQucm93UGlubmVkfTpudWxsfWdldExhc3RCb2R5Q2VsbCgpe3JldHVybntyb3dJbmRleDp0aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRQYWdlTGFzdFJvdygpLHJvd1Bpbm5lZDpudWxsfX1nZXRMYXN0RmxvYXRpbmdUb3BSb3coKXtyZXR1cm57cm93SW5kZXg6dGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRUb3BSb3dEYXRhKCkubGVuZ3RoLTEscm93UGlubmVkOiJ0b3AifX1nZXROZXh0VGFiYmVkQ2VsbChlLHQpe3JldHVybiB0P3RoaXMuZ2V0TmV4dFRhYmJlZENlbGxCYWNrd2FyZHMoZSk6dGhpcy5nZXROZXh0VGFiYmVkQ2VsbEZvcndhcmRzKGUpfWdldE5leHRUYWJiZWRDZWxsRm9yd2FyZHMoZSl7Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKTtsZXQgaT1lLnJvd0luZGV4LHM9ZS5yb3dQaW5uZWQscj10aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXllZENvbEFmdGVyKGUuY29sdW1uKTtpZighcil7cj10WzBdO2NvbnN0IG89dGhpcy5nZXRSb3dCZWxvdyhlKTtpZihFKG8pKXJldHVybiBudWxsO2lmKCFvLnJvd1Bpbm5lZCYmIXRoaXMucGFnaW5hdGlvblByb3h5LmlzUm93SW5QYWdlKG8pKXJldHVybiBudWxsO2k9bz9vLnJvd0luZGV4Om51bGwscz1vP28ucm93UGlubmVkOm51bGx9cmV0dXJue3Jvd0luZGV4OmksY29sdW1uOnIscm93UGlubmVkOnN9fWdldE5leHRUYWJiZWRDZWxsQmFja3dhcmRzKGUpe2NvbnN0IHQ9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCk7bGV0IGk9ZS5yb3dJbmRleCxzPWUucm93UGlubmVkLHI9dGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5ZWRDb2xCZWZvcmUoZS5jb2x1bW4pO2lmKCFyKXtyPU9lKHQpO2NvbnN0IG89dGhpcy5nZXRSb3dBYm92ZSh7cm93SW5kZXg6ZS5yb3dJbmRleCxyb3dQaW5uZWQ6ZS5yb3dQaW5uZWR9KTtpZihFKG8pKXJldHVybiBudWxsO2lmKCFvLnJvd1Bpbm5lZCYmIXRoaXMucGFnaW5hdGlvblByb3h5LmlzUm93SW5QYWdlKG8pKXJldHVybiBudWxsO2k9bz9vLnJvd0luZGV4Om51bGwscz1vP28ucm93UGlubmVkOm51bGx9cmV0dXJue3Jvd0luZGV4OmksY29sdW1uOnIscm93UGlubmVkOnN9fX07RGMoW2NlKCJjb2x1bW5Nb2RlbCIpXSxPYy5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLERjKFtjZSgicm93TW9kZWwiKV0sT2MucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSxEYyhbY2UoInJvd1JlbmRlcmVyIildLE9jLnByb3RvdHlwZSwicm93UmVuZGVyZXIiLHZvaWQgMCksRGMoW2NlKCJwaW5uZWRSb3dNb2RlbCIpXSxPYy5wcm90b3R5cGUsInBpbm5lZFJvd01vZGVsIix2b2lkIDApLERjKFtjZSgicGFnaW5hdGlvblByb3h5IildLE9jLnByb3RvdHlwZSwicGFnaW5hdGlvblByb3h5Iix2b2lkIDApLE9jPURjKFtkZSgiY2VsbE5hdmlnYXRpb25TZXJ2aWNlIildLE9jKTt2YXIgQWM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn0sUGM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oaSxzKXt0KGkscyxlKX19O2xldCBNYz1jbGFzcyBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvbnN1bWluZz0hMX1zZXRCZWFucyhlKXt0aGlzLmxvZ2dlcj1lLmNyZWF0ZSgiQWxpZ25lZEdyaWRzU2VydmljZSIpfWdldEFsaWduZWRHcmlkQXBpcygpe3ZhciBlO2xldCB0PW51bGwhPT0oZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImFsaWduZWRHcmlkcyIpKSYmdm9pZCAwIT09ZT9lOltdO2NvbnN0IGk9ImZ1bmN0aW9uIj09dHlwZW9mIHQ7ImZ1bmN0aW9uIj09dHlwZW9mIHQmJih0PXQoKSk7Y29uc3Qgcz0oKT0+IlNlZSAiK3RoaXMuZ2V0RnJhbWV3b3JrT3ZlcnJpZGVzKCkuZ2V0RG9jTGluaygiYWxpZ25lZC1ncmlkcyIpO3JldHVybiB0Lm1hcChlPT57dmFyIHQ7aWYoIWUpcmV0dXJuIFUoImFsaWduZWRHcmlkcyBjb250YWlucyBhbiB1bmRlZmluZWQgb3B0aW9uLiIpLGl8fFUoJ1lvdSBtYXkgd2FudCB0byBjb25maWd1cmUgdmlhIGEgY2FsbGJhY2sgdG8gYXZvaWQgc2V0dXAgcmFjZSBjb25kaXRpb25zOlxuICAgICAgICAgICAgICAgICAgICAgImFsaWduZWRHcmlkczogKCkgPT4gW2xpbmtlZEdyaWRdIicpLHZvaWQgVShzKCkpO2lmKGUgaW5zdGFuY2VvZiBVbilyZXR1cm4gZTtjb25zdCByPWU7cmV0dXJuImN1cnJlbnQiaW4gcj9udWxsPT09KHQ9ci5jdXJyZW50KXx8dm9pZCAwPT09dD92b2lkIDA6dC5hcGk6KHIuYXBpfHxVKCJhbGlnbmVkR3JpZHMgLSBObyBhcGkgZm91bmQgb24gdGhlIGxpbmtlZCBncmlkLiBJZiB5b3UgYXJlIHBhc3NpbmcgZ3JpZE9wdGlvbnMgdG8gYWxpZ25lZEdyaWRzIHNpbmNlIHYzMSB0aGlzIGlzIG5vIGxvbmdlciB2YWxpZC4gIitzKCkpLHIuYXBpKX0pLmZpbHRlcihlPT4hIWUmJiFlLmlzRGVzdHJveWVkKCkpfWluaXQoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fTU9WRUQsdGhpcy5maXJlQ29sdW1uRXZlbnQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ09MVU1OX1ZJU0lCTEUsdGhpcy5maXJlQ29sdW1uRXZlbnQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ09MVU1OX1BJTk5FRCx0aGlzLmZpcmVDb2x1bW5FdmVudC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fR1JPVVBfT1BFTkVELHRoaXMuZmlyZUNvbHVtbkV2ZW50LmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9SRVNJWkVELHRoaXMuZmlyZUNvbHVtbkV2ZW50LmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0JPRFlfU0NST0xMLHRoaXMuZmlyZVNjcm9sbEV2ZW50LmJpbmQodGhpcykpfWZpcmVFdmVudChlKXt0aGlzLmNvbnN1bWluZ3x8dGhpcy5nZXRBbGlnbmVkR3JpZEFwaXMoKS5mb3JFYWNoKHQ9Pntjb25zdCBpPXQuX19nZXRBbGlnbmVkR3JpZFNlcnZpY2UoKTtlKGkpfSl9b25FdmVudChlKXt0aGlzLmNvbnN1bWluZz0hMCxlKCksdGhpcy5jb25zdW1pbmc9ITF9ZmlyZUNvbHVtbkV2ZW50KGUpe3RoaXMuZmlyZUV2ZW50KHQ9Pnt0Lm9uQ29sdW1uRXZlbnQoZSl9KX1maXJlU2Nyb2xsRXZlbnQoZSl7Imhvcml6b250YWwiPT09ZS5kaXJlY3Rpb24mJnRoaXMuZmlyZUV2ZW50KHQ9Pnt0Lm9uU2Nyb2xsRXZlbnQoZSl9KX1vblNjcm9sbEV2ZW50KGUpe3RoaXMub25FdmVudCgoKT0+e3RoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLmdldFNjcm9sbEZlYXR1cmUoKS5zZXRIb3Jpem9udGFsU2Nyb2xsUG9zaXRpb24oZS5sZWZ0LCEwKX0pfWdldE1hc3RlckNvbHVtbnMoZSl7Y29uc3QgdD1bXTtyZXR1cm4gZS5jb2x1bW5zP2UuY29sdW1ucy5mb3JFYWNoKGU9Pnt0LnB1c2goZSl9KTplLmNvbHVtbiYmdC5wdXNoKGUuY29sdW1uKSx0fWdldENvbHVtbklkcyhlKXtjb25zdCB0PVtdO3JldHVybiBlLmNvbHVtbnM/ZS5jb2x1bW5zLmZvckVhY2goZT0+e3QucHVzaChlLmdldENvbElkKCkpfSk6ZS5jb2x1bW4mJnQucHVzaChlLmNvbHVtbi5nZXRDb2xJZCgpKSx0fW9uQ29sdW1uRXZlbnQoZSl7dGhpcy5vbkV2ZW50KCgpPT57c3dpdGNoKGUudHlwZSl7Y2FzZSBsdC5FVkVOVF9DT0xVTU5fTU9WRUQ6Y2FzZSBsdC5FVkVOVF9DT0xVTU5fVklTSUJMRTpjYXNlIGx0LkVWRU5UX0NPTFVNTl9QSU5ORUQ6Y2FzZSBsdC5FVkVOVF9DT0xVTU5fUkVTSVpFRDpjb25zdCB0PWU7dGhpcy5wcm9jZXNzQ29sdW1uRXZlbnQodCk7YnJlYWs7Y2FzZSBsdC5FVkVOVF9DT0xVTU5fR1JPVVBfT1BFTkVEOmNvbnN0IGk9ZTt0aGlzLnByb2Nlc3NHcm91cE9wZW5lZEV2ZW50KGkpO2JyZWFrO2Nhc2UgbHQuRVZFTlRfQ09MVU1OX1BJVk9UX0NIQU5HRUQ6Y29uc29sZS53YXJuKCJBRyBHcmlkOiBwaXZvdGluZyBpcyBub3Qgc3VwcG9ydGVkIHdpdGggYWxpZ25lZCBncmlkcy4gWW91IGNhbiBvbmx5IHVzZSBvbmUgb2YgdGhlc2UgZmVhdHVyZXMgYXQgYSB0aW1lIGluIGEgZ3JpZC4iKX19KX1wcm9jZXNzR3JvdXBPcGVuZWRFdmVudChlKXtlLmNvbHVtbkdyb3Vwcy5mb3JFYWNoKHQ9PntsZXQgaT1udWxsO2lmKHQpe2NvbnN0IGU9dC5nZXRHcm91cElkKCk7aT10aGlzLmNvbHVtbk1vZGVsLmdldFByb3ZpZGVkQ29sdW1uR3JvdXAoZSl9dCYmIWl8fCh0aGlzLmxvZ2dlci5sb2coIm9uQ29sdW1uRXZlbnQtPiBwcm9jZXNzaW5nICIrZSsiIGV4cGFuZGVkID0gIit0LmlzRXhwYW5kZWQoKSksdGhpcy5jb2x1bW5Nb2RlbC5zZXRDb2x1bW5Hcm91cE9wZW5lZChpLHQuaXNFeHBhbmRlZCgpLCJhbGlnbmVkR3JpZENoYW5nZWQiKSl9KX1wcm9jZXNzQ29sdW1uRXZlbnQoZSl7dmFyIHQ7Y29uc3QgaT1lLmNvbHVtbjtsZXQgcz1udWxsO2lmKGkmJihzPXRoaXMuY29sdW1uTW9kZWwuZ2V0UHJpbWFyeUNvbHVtbihpLmdldENvbElkKCkpKSxpJiYhcylyZXR1cm47Y29uc3Qgcj10aGlzLmdldE1hc3RlckNvbHVtbnMoZSk7c3dpdGNoKGUudHlwZSl7Y2FzZSBsdC5FVkVOVF9DT0xVTU5fTU9WRUQ6e2NvbnN0IHQ9ZSxpPWUuYXBpLmdldENvbHVtblN0YXRlKCkubWFwKGU9Pih7Y29sSWQ6ZS5jb2xJZH0pKTt0aGlzLmNvbHVtbk1vZGVsLmFwcGx5Q29sdW1uU3RhdGUoe3N0YXRlOmksYXBwbHlPcmRlcjohMH0sImFsaWduZWRHcmlkQ2hhbmdlZCIpLHRoaXMubG9nZ2VyLmxvZyhgb25Db2x1bW5FdmVudC0+IHByb2Nlc3NpbmcgJHtlLnR5cGV9IHRvSW5kZXggPSAke3QudG9JbmRleH1gKX1icmVhaztjYXNlIGx0LkVWRU5UX0NPTFVNTl9WSVNJQkxFOntjb25zdCB0PWUsaT1lLmFwaS5nZXRDb2x1bW5TdGF0ZSgpLm1hcChlPT4oe2NvbElkOmUuY29sSWQsaGlkZTplLmhpZGV9KSk7dGhpcy5jb2x1bW5Nb2RlbC5hcHBseUNvbHVtblN0YXRlKHtzdGF0ZTppfSwiYWxpZ25lZEdyaWRDaGFuZ2VkIiksdGhpcy5sb2dnZXIubG9nKGBvbkNvbHVtbkV2ZW50LT4gcHJvY2Vzc2luZyAke2UudHlwZX0gdmlzaWJsZSA9ICR7dC52aXNpYmxlfWApfWJyZWFrO2Nhc2UgbHQuRVZFTlRfQ09MVU1OX1BJTk5FRDp7Y29uc3QgdD1lLGk9ZS5hcGkuZ2V0Q29sdW1uU3RhdGUoKS5tYXAoZT0+KHtjb2xJZDplLmNvbElkLHBpbm5lZDplLnBpbm5lZH0pKTt0aGlzLmNvbHVtbk1vZGVsLmFwcGx5Q29sdW1uU3RhdGUoe3N0YXRlOml9LCJhbGlnbmVkR3JpZENoYW5nZWQiKSx0aGlzLmxvZ2dlci5sb2coYG9uQ29sdW1uRXZlbnQtPiBwcm9jZXNzaW5nICR7ZS50eXBlfSBwaW5uZWQgPSAke3QucGlubmVkfWApfWJyZWFrO2Nhc2UgbHQuRVZFTlRfQ09MVU1OX1JFU0laRUQ6Y29uc3QgaT1lLHM9e307ci5mb3JFYWNoKHQ9Pnt0aGlzLmxvZ2dlci5sb2coYG9uQ29sdW1uRXZlbnQtPiBwcm9jZXNzaW5nICR7ZS50eXBlfSBhY3R1YWxXaWR0aCA9ICR7dC5nZXRBY3R1YWxXaWR0aCgpfWApLHNbdC5nZXRJZCgpXT17a2V5OnQuZ2V0Q29sSWQoKSxuZXdXaWR0aDp0LmdldEFjdHVhbFdpZHRoKCl9fSksbnVsbD09PSh0PWkuZmxleENvbHVtbnMpfHx2b2lkIDA9PT10fHx0LmZvckVhY2goZT0+e3NbZS5nZXRJZCgpXSYmZGVsZXRlIHNbZS5nZXRJZCgpXX0pLHRoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uV2lkdGhzKE9iamVjdC52YWx1ZXMocyksITEsaS5maW5pc2hlZCwiYWxpZ25lZEdyaWRDaGFuZ2VkIil9Y29uc3Qgbz10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKS5pc1ZlcnRpY2FsU2Nyb2xsU2hvd2luZygpO3RoaXMuZ2V0QWxpZ25lZEdyaWRBcGlzKCkuZm9yRWFjaChlPT57ZS5zZXRHcmlkT3B0aW9uKCJhbHdheXNTaG93VmVydGljYWxTY3JvbGwiLG8pfSl9fTtBYyhbY2UoImNvbHVtbk1vZGVsIildLE1jLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksQWMoW2NlKCJjdHJsc1NlcnZpY2UiKV0sTWMucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksQWMoW1BjKDAscGUoImxvZ2dlckZhY3RvcnkiKSldLE1jLnByb3RvdHlwZSwic2V0QmVhbnMiLG51bGwpLEFjKFthZV0sTWMucHJvdG90eXBlLCJpbml0IixudWxsKSxNYz1BYyhbZGUoImFsaWduZWRHcmlkc1NlcnZpY2UiKV0sTWMpO3ZhciBMYz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgRmM9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5zZWxlY3RlZE5vZGVzPW5ldyBNYXAsdGhpcy5sYXN0Um93Tm9kZT1udWxsfWluaXQoKXt0aGlzLnJvd1NlbGVjdGlvbj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd1NlbGVjdGlvbiIpLHRoaXMuZ3JvdXBTZWxlY3RzQ2hpbGRyZW49dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cFNlbGVjdHNDaGlsZHJlbiIpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXJzKFsiZ3JvdXBTZWxlY3RzQ2hpbGRyZW4iLCJyb3dTZWxlY3Rpb24iXSwoKT0+e3RoaXMuZ3JvdXBTZWxlY3RzQ2hpbGRyZW49dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cFNlbGVjdHNDaGlsZHJlbiIpLHRoaXMucm93U2VsZWN0aW9uPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicm93U2VsZWN0aW9uIiksdGhpcy5kZXNlbGVjdEFsbFJvd05vZGVzKHtzb3VyY2U6ImFwaSJ9KX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1JPV19TRUxFQ1RFRCx0aGlzLm9uUm93U2VsZWN0ZWQuYmluZCh0aGlzKSl9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKSx0aGlzLnJlc2V0Tm9kZXMoKSx0aGlzLmxhc3RSb3dOb2RlPW51bGx9aXNNdWx0aXNlbGVjdCgpe3JldHVybiJtdWx0aXBsZSI9PT10aGlzLnJvd1NlbGVjdGlvbn1zZXROb2Rlc1NlbGVjdGVkKGUpe3ZhciB0O2NvbnN0e25ld1ZhbHVlOmksY2xlYXJTZWxlY3Rpb246cyxzdXBwcmVzc0ZpbmlzaEFjdGlvbnM6cixyYW5nZVNlbGVjdDpvLG5vZGVzOm4sZXZlbnQ6YSxzb3VyY2U6bD0iYXBpIn09ZTtpZigwPT09bi5sZW5ndGgpcmV0dXJuIDA7aWYobi5sZW5ndGg+MSYmIXRoaXMuaXNNdWx0aXNlbGVjdCgpKXJldHVybiBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGNhbm5vdCBtdWx0aSBzZWxlY3Qgd2hpbGUgcm93U2VsZWN0aW9uPSdzaW5nbGUnIiksMDtjb25zdCBkPXRoaXMuZ3JvdXBTZWxlY3RzQ2hpbGRyZW4mJiEwPT09ZS5ncm91cFNlbGVjdHNGaWx0ZXJlZCxjPW4ubWFwKGU9PmUuZm9vdGVyP2Uuc2libGluZzplKTtpZihvKXtpZihuLmxlbmd0aD4xKXJldHVybiBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGNhbm5vdCByYW5nZSBzZWxlY3Qgd2hpbGUgc2VsZWN0aW5nIG11bHRpcGxlIHJvd3MiKSwwO2xldCBlPW51bGw7aWYoImNoZWNrYm94U2VsZWN0ZWQiPT09bCYmITE9PT1pJiZ0aGlzLmxhc3RSb3dOb2RlJiYodGhpcy5sYXN0Um93Tm9kZS5pZD9lPXRoaXMubGFzdFJvd05vZGU6dGhpcy5sYXN0Um93Tm9kZT1udWxsKSxudWxsPT1lJiYoZT10aGlzLmdldExhc3RTZWxlY3RlZE5vZGUoKSksZSl7Y29uc3QgdD1jWzBdO2lmKHQhPT1lJiZ0aGlzLmlzTXVsdGlzZWxlY3QoKSlyZXR1cm4gdGhpcy5zZWxlY3RSYW5nZSh0LGUsaSxsKX19dGhpcy5sYXN0Um93Tm9kZT1pP251bGw6Y1swXTtsZXQgaD0wO2ZvcihsZXQgZT0wO2U8Yy5sZW5ndGg7ZSsrKXtjb25zdCBzPWNbZV07aWYoIShkJiZzLmdyb3VwKSl7cy5zZWxlY3RUaGlzTm9kZShpLGEsbCkmJmgrK310aGlzLmdyb3VwU2VsZWN0c0NoaWxkcmVuJiYobnVsbD09PSh0PXMuY2hpbGRyZW5BZnRlckdyb3VwKXx8dm9pZCAwPT09dD92b2lkIDA6dC5sZW5ndGgpJiYoaCs9dGhpcy5zZWxlY3RDaGlsZHJlbihzLGksZCxsKSl9aWYoIXIpe2lmKGkmJihzfHwhdGhpcy5pc011bHRpc2VsZWN0KCkpJiYoaCs9dGhpcy5jbGVhck90aGVyTm9kZXMoY1swXSxsKSksaD4wKXt0aGlzLnVwZGF0ZUdyb3Vwc0Zyb21DaGlsZHJlblNlbGVjdGlvbnMobCk7Y29uc3QgZT17dHlwZTpsdC5FVkVOVF9TRUxFQ1RJT05fQ0hBTkdFRCxzb3VyY2U6bH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX19cmV0dXJuIGh9c2VsZWN0UmFuZ2UoZSx0LGk9ITAscyl7Y29uc3Qgcj10aGlzLnJvd01vZGVsLmdldE5vZGVzSW5SYW5nZUZvclNlbGVjdGlvbihlLHQpO2xldCBvPTA7ci5mb3JFYWNoKGU9PntpZihlLmdyb3VwJiZ0aGlzLmdyb3VwU2VsZWN0c0NoaWxkcmVuKXJldHVybjtlLnNlbGVjdFRoaXNOb2RlKGksdm9pZCAwLHMpJiZvKyt9KSx0aGlzLnVwZGF0ZUdyb3Vwc0Zyb21DaGlsZHJlblNlbGVjdGlvbnMocyk7Y29uc3Qgbj17dHlwZTpsdC5FVkVOVF9TRUxFQ1RJT05fQ0hBTkdFRCxzb3VyY2U6c307cmV0dXJuIHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQobiksb31zZWxlY3RDaGlsZHJlbihlLHQsaSxzKXtjb25zdCByPWk/ZS5jaGlsZHJlbkFmdGVyQWdnRmlsdGVyOmUuY2hpbGRyZW5BZnRlckdyb3VwO3JldHVybiBFKHIpPzA6dGhpcy5zZXROb2Rlc1NlbGVjdGVkKHtuZXdWYWx1ZTp0LGNsZWFyU2VsZWN0aW9uOiExLHN1cHByZXNzRmluaXNoQWN0aW9uczohMCxncm91cFNlbGVjdHNGaWx0ZXJlZDppLHNvdXJjZTpzLG5vZGVzOnJ9KX1nZXRMYXN0U2VsZWN0ZWROb2RlKCl7Y29uc3QgZT1BcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWROb2Rlcy5rZXlzKCkpO2lmKDA9PWUubGVuZ3RoKXJldHVybiBudWxsO2NvbnN0IHQ9dGhpcy5zZWxlY3RlZE5vZGVzLmdldChPZShlKSk7cmV0dXJuIHR8fG51bGx9Z2V0U2VsZWN0ZWROb2Rlcygpe2NvbnN0IGU9W107cmV0dXJuIHRoaXMuc2VsZWN0ZWROb2Rlcy5mb3JFYWNoKHQ9Pnt0JiZlLnB1c2godCl9KSxlfWdldFNlbGVjdGVkUm93cygpe2NvbnN0IGU9W107cmV0dXJuIHRoaXMuc2VsZWN0ZWROb2Rlcy5mb3JFYWNoKHQ9Pnt0JiZ0LmRhdGEmJmUucHVzaCh0LmRhdGEpfSksZX1nZXRTZWxlY3Rpb25Db3VudCgpe3JldHVybiB0aGlzLnNlbGVjdGVkTm9kZXMuc2l6ZX1maWx0ZXJGcm9tU2VsZWN0aW9uKGUpe2NvbnN0IHQ9bmV3IE1hcDt0aGlzLnNlbGVjdGVkTm9kZXMuZm9yRWFjaCgoaSxzKT0+e2kmJmUoaSkmJnQuc2V0KHMsaSl9KSx0aGlzLnNlbGVjdGVkTm9kZXM9dH11cGRhdGVHcm91cHNGcm9tQ2hpbGRyZW5TZWxlY3Rpb25zKGUsdCl7aWYoIXRoaXMuZ3JvdXBTZWxlY3RzQ2hpbGRyZW4pcmV0dXJuITE7aWYoImNsaWVudFNpZGUiIT09dGhpcy5yb3dNb2RlbC5nZXRUeXBlKCkpcmV0dXJuITE7Y29uc3QgaT10aGlzLnJvd01vZGVsLmdldFJvb3ROb2RlKCk7dHx8KHQ9bmV3IE5kKCEwLGkpKS5zZXRJbmFjdGl2ZSgpO2xldCBzPSExO3JldHVybiB0LmZvckVhY2hDaGFuZ2VkTm9kZURlcHRoRmlyc3QodD0+e2lmKHQhPT1pKXtjb25zdCBpPXQuY2FsY3VsYXRlU2VsZWN0ZWRGcm9tQ2hpbGRyZW4oKTtzPXQuc2VsZWN0VGhpc05vZGUobnVsbCE9PWkmJmksdm9pZCAwLGUpfHxzfX0pLHN9Y2xlYXJPdGhlck5vZGVzKGUsdCl7Y29uc3QgaT1uZXcgTWFwO2xldCBzPTA7cmV0dXJuIHRoaXMuc2VsZWN0ZWROb2Rlcy5mb3JFYWNoKHI9PntpZihyJiZyLmlkIT09ZS5pZCl7Y29uc3QgZT10aGlzLnNlbGVjdGVkTm9kZXMuZ2V0KHIuaWQpO3MrPWUuc2V0U2VsZWN0ZWRQYXJhbXMoe25ld1ZhbHVlOiExLGNsZWFyU2VsZWN0aW9uOiExLHN1cHByZXNzRmluaXNoQWN0aW9uczohMCxzb3VyY2U6dH0pLHRoaXMuZ3JvdXBTZWxlY3RzQ2hpbGRyZW4mJnIucGFyZW50JiZpLnNldChyLnBhcmVudC5pZCxyLnBhcmVudCl9fSksaS5mb3JFYWNoKGU9Pntjb25zdCBpPWUuY2FsY3VsYXRlU2VsZWN0ZWRGcm9tQ2hpbGRyZW4oKTtlLnNlbGVjdFRoaXNOb2RlKG51bGwhPT1pJiZpLHZvaWQgMCx0KX0pLHN9b25Sb3dTZWxlY3RlZChlKXtjb25zdCB0PWUubm9kZTt0aGlzLmdyb3VwU2VsZWN0c0NoaWxkcmVuJiZ0Lmdyb3VwfHwodC5pc1NlbGVjdGVkKCk/dGhpcy5zZWxlY3RlZE5vZGVzLnNldCh0LmlkLHQpOnRoaXMuc2VsZWN0ZWROb2Rlcy5kZWxldGUodC5pZCkpfXN5bmNJblJvd05vZGUoZSx0KXt0aGlzLnN5bmNJbk9sZFJvd05vZGUoZSx0KSx0aGlzLnN5bmNJbk5ld1Jvd05vZGUoZSl9c3luY0luT2xkUm93Tm9kZShlLHQpe2lmKGIodCkmJmUuaWQhPT10LmlkJiZ0KXtjb25zdCBpPXQuaWQ7dGhpcy5zZWxlY3RlZE5vZGVzLmdldChpKT09ZSYmdGhpcy5zZWxlY3RlZE5vZGVzLnNldCh0LmlkLHQpfX1zeW5jSW5OZXdSb3dOb2RlKGUpe3RoaXMuc2VsZWN0ZWROb2Rlcy5oYXMoZS5pZCk/KGUuc2V0U2VsZWN0ZWRJbml0aWFsVmFsdWUoITApLHRoaXMuc2VsZWN0ZWROb2Rlcy5zZXQoZS5pZCxlKSk6ZS5zZXRTZWxlY3RlZEluaXRpYWxWYWx1ZSghMSl9cmVzZXQoZSl7Y29uc3QgdD10aGlzLmdldFNlbGVjdGlvbkNvdW50KCk7aWYodGhpcy5yZXNldE5vZGVzKCksdCl7Y29uc3QgdD17dHlwZTpsdC5FVkVOVF9TRUxFQ1RJT05fQ0hBTkdFRCxzb3VyY2U6ZX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KX19cmVzZXROb2Rlcygpe3ZhciBlO251bGw9PT0oZT10aGlzLnNlbGVjdGVkTm9kZXMpfHx2b2lkIDA9PT1lfHxlLmNsZWFyKCl9Z2V0QmVzdENvc3ROb2RlU2VsZWN0aW9uKCl7aWYoImNsaWVudFNpZGUiIT09dGhpcy5yb3dNb2RlbC5nZXRUeXBlKCkpcmV0dXJuO2NvbnN0IGU9dGhpcy5yb3dNb2RlbC5nZXRUb3BMZXZlbE5vZGVzKCk7aWYobnVsbD09PWUpcmV0dXJuO2NvbnN0IHQ9W107cmV0dXJuIGZ1bmN0aW9uIGUoaSl7Zm9yKGxldCBzPTAscj1pLmxlbmd0aDtzPHI7cysrKXtjb25zdCByPWlbc107aWYoci5pc1NlbGVjdGVkKCkpdC5wdXNoKHIpO2Vsc2V7Y29uc3QgdD1yO3QuZ3JvdXAmJnQuY2hpbGRyZW4mJmUodC5jaGlsZHJlbil9fX0oZSksdH1pc0VtcHR5KCl7bGV0IGU9MDtyZXR1cm4gdGhpcy5zZWxlY3RlZE5vZGVzLmZvckVhY2godD0+e3QmJmUrK30pLDA9PT1lfWRlc2VsZWN0QWxsUm93Tm9kZXMoZSl7Y29uc3QgdD1lPT5lLnNlbGVjdFRoaXNOb2RlKCExLHZvaWQgMCxzKSxpPSJjbGllbnRTaWRlIj09PXRoaXMucm93TW9kZWwuZ2V0VHlwZSgpLHtzb3VyY2U6cyxqdXN0RmlsdGVyZWQ6cixqdXN0Q3VycmVudFBhZ2U6b309ZTtpZihvfHxyKXtpZighaSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJBRyBHcmlkOiBzZWxlY3RpbmcganVzdCBmaWx0ZXJlZCBvbmx5IHdvcmtzIHdoZW4gZ3JpZE9wdGlvbnMucm93TW9kZWxUeXBlPSdjbGllbnRTaWRlJyIpO3RoaXMuZ2V0Tm9kZXNUb1NlbGVjdChyLG8pLmZvckVhY2godCl9ZWxzZSB0aGlzLnNlbGVjdGVkTm9kZXMuZm9yRWFjaChlPT57ZSYmdChlKX0pLHRoaXMucmVzZXQocyk7aSYmdGhpcy5ncm91cFNlbGVjdHNDaGlsZHJlbiYmdGhpcy51cGRhdGVHcm91cHNGcm9tQ2hpbGRyZW5TZWxlY3Rpb25zKHMpO2NvbnN0IG49e3R5cGU6bHQuRVZFTlRfU0VMRUNUSU9OX0NIQU5HRUQsc291cmNlOnN9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQobil9Z2V0U2VsZWN0ZWRDb3VudHMoZSx0KXtsZXQgaT0wLHM9MDtyZXR1cm4gdGhpcy5nZXROb2Rlc1RvU2VsZWN0KGUsdCkuZm9yRWFjaChlPT57dGhpcy5ncm91cFNlbGVjdHNDaGlsZHJlbiYmZS5ncm91cHx8KGUuaXNTZWxlY3RlZCgpP2krKzplLnNlbGVjdGFibGUmJnMrKyl9KSx7c2VsZWN0ZWRDb3VudDppLG5vdFNlbGVjdGVkQ291bnQ6c319Z2V0U2VsZWN0QWxsU3RhdGUoZSx0KXtjb25zdHtzZWxlY3RlZENvdW50Omksbm90U2VsZWN0ZWRDb3VudDpzfT10aGlzLmdldFNlbGVjdGVkQ291bnRzKGUsdCk7cmV0dXJuKDAhPT1pfHwwIT09cykmJihpPjAmJnM+MD9udWxsOmk+MCl9aGFzTm9kZXNUb1NlbGVjdChlPSExLHQ9ITEpe3JldHVybiB0aGlzLmdldE5vZGVzVG9TZWxlY3QoZSx0KS5maWx0ZXIoZT0+ZS5zZWxlY3RhYmxlKS5sZW5ndGg+MH1nZXROb2Rlc1RvU2VsZWN0KGU9ITEsdD0hMSl7aWYoImNsaWVudFNpZGUiIT09dGhpcy5yb3dNb2RlbC5nZXRUeXBlKCkpdGhyb3cgbmV3IEVycm9yKCJzZWxlY3RBbGwgb25seSBhdmFpbGFibGUgd2hlbiByb3dNb2RlbFR5cGU9J2NsaWVudFNpZGUnLCBpZSBub3QgIit0aGlzLnJvd01vZGVsLmdldFR5cGUoKSk7Y29uc3QgaT1bXTtpZih0KXJldHVybiB0aGlzLnBhZ2luYXRpb25Qcm94eS5mb3JFYWNoTm9kZU9uUGFnZShlPT57aWYoZS5ncm91cClpZihlLmV4cGFuZGVkKXRoaXMuZ3JvdXBTZWxlY3RzQ2hpbGRyZW58fGkucHVzaChlKTtlbHNle2NvbnN0IHQ9ZT0+e3ZhciBzO2kucHVzaChlKSwobnVsbD09PShzPWUuY2hpbGRyZW5BZnRlckZpbHRlcil8fHZvaWQgMD09PXM/dm9pZCAwOnMubGVuZ3RoKSYmZS5jaGlsZHJlbkFmdGVyRmlsdGVyLmZvckVhY2godCl9O3QoZSl9ZWxzZSBpLnB1c2goZSl9KSxpO2NvbnN0IHM9dGhpcy5yb3dNb2RlbDtyZXR1cm4gZT8ocy5mb3JFYWNoTm9kZUFmdGVyRmlsdGVyKGU9PntpLnB1c2goZSl9KSxpKToocy5mb3JFYWNoTm9kZShlPT57aS5wdXNoKGUpfSksaSl9c2VsZWN0QWxsUm93Tm9kZXMoZSl7aWYoImNsaWVudFNpZGUiIT09dGhpcy5yb3dNb2RlbC5nZXRUeXBlKCkpdGhyb3cgbmV3IEVycm9yKCJzZWxlY3RBbGwgb25seSBhdmFpbGFibGUgd2hlbiByb3dNb2RlbFR5cGU9J2NsaWVudFNpZGUnLCBpZSBub3QgIit0aGlzLnJvd01vZGVsLmdldFR5cGUoKSk7Y29uc3R7c291cmNlOnQsanVzdEZpbHRlcmVkOmksanVzdEN1cnJlbnRQYWdlOnN9PWU7dGhpcy5nZXROb2Rlc1RvU2VsZWN0KGkscykuZm9yRWFjaChlPT5lLnNlbGVjdFRoaXNOb2RlKCEwLHZvaWQgMCx0KSksImNsaWVudFNpZGUiPT09dGhpcy5yb3dNb2RlbC5nZXRUeXBlKCkmJnRoaXMuZ3JvdXBTZWxlY3RzQ2hpbGRyZW4mJnRoaXMudXBkYXRlR3JvdXBzRnJvbUNoaWxkcmVuU2VsZWN0aW9ucyh0KTtjb25zdCByPXt0eXBlOmx0LkVWRU5UX1NFTEVDVElPTl9DSEFOR0VELHNvdXJjZTp0fTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHIpfWdldFNlbGVjdGlvblN0YXRlKCl7Y29uc3QgZT1bXTtyZXR1cm4gdGhpcy5zZWxlY3RlZE5vZGVzLmZvckVhY2godD0+eyhudWxsPT10P3ZvaWQgMDp0LmlkKSYmZS5wdXNoKHQuaWQpfSksZS5sZW5ndGg/ZTpudWxsfXNldFNlbGVjdGlvblN0YXRlKGUsdCl7aWYoIUFycmF5LmlzQXJyYXkoZSkpcmV0dXJuO2NvbnN0IGk9bmV3IFNldChlKSxzPVtdO3RoaXMucm93TW9kZWwuZm9yRWFjaE5vZGUoZT0+e2kuaGFzKGUuaWQpJiZzLnB1c2goZSl9KSx0aGlzLnNldE5vZGVzU2VsZWN0ZWQoe25ld1ZhbHVlOiEwLG5vZGVzOnMsc291cmNlOnR9KX19O0xjKFtjZSgicm93TW9kZWwiKV0sRmMucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSxMYyhbY2UoInBhZ2luYXRpb25Qcm94eSIpXSxGYy5wcm90b3R5cGUsInBhZ2luYXRpb25Qcm94eSIsdm9pZCAwKSxMYyhbYWVdLEZjLnByb3RvdHlwZSwiaW5pdCIsbnVsbCksRmM9TGMoW2RlKCJzZWxlY3Rpb25TZXJ2aWNlIildLEZjKTt2YXIgSWM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IE5jPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMudmlhQXBpPShlLC4uLnQpPT4oaihgU2luY2UgdjMxLCAnY29sdW1uQXBpLiR7ZX0nIGlzIGRlcHJlY2F0ZWQgYW5kIG1vdmVkIHRvICdhcGkuJHtlfScuYCksdGhpcy5hcGlbZV0oLi4udCkpLHRoaXMuYXBpPWV9c2l6ZUNvbHVtbnNUb0ZpdChlKXt0aGlzLnZpYUFwaSgic2l6ZUNvbHVtbnNUb0ZpdCIsZSl9c2V0Q29sdW1uR3JvdXBPcGVuZWQoZSx0KXt0aGlzLnZpYUFwaSgic2V0Q29sdW1uR3JvdXBPcGVuZWQiLGUsdCl9Z2V0Q29sdW1uR3JvdXAoZSx0KXtyZXR1cm4gdGhpcy52aWFBcGkoImdldENvbHVtbkdyb3VwIixlLHQpfWdldFByb3ZpZGVkQ29sdW1uR3JvdXAoZSl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXRQcm92aWRlZENvbHVtbkdyb3VwIixlKX1nZXREaXNwbGF5TmFtZUZvckNvbHVtbihlLHQpe3JldHVybiB0aGlzLnZpYUFwaSgiZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW4iLGUsdCl9Z2V0RGlzcGxheU5hbWVGb3JDb2x1bW5Hcm91cChlLHQpe3JldHVybiB0aGlzLnZpYUFwaSgiZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW5Hcm91cCIsZSx0KX1nZXRDb2x1bW4oZSl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXRDb2x1bW4iLGUpfWdldENvbHVtbnMoKXtyZXR1cm4gdGhpcy52aWFBcGkoImdldENvbHVtbnMiKX1hcHBseUNvbHVtblN0YXRlKGUpe3JldHVybiB0aGlzLnZpYUFwaSgiYXBwbHlDb2x1bW5TdGF0ZSIsZSl9Z2V0Q29sdW1uU3RhdGUoKXtyZXR1cm4gdGhpcy52aWFBcGkoImdldENvbHVtblN0YXRlIil9cmVzZXRDb2x1bW5TdGF0ZSgpe3RoaXMudmlhQXBpKCJyZXNldENvbHVtblN0YXRlIil9Z2V0Q29sdW1uR3JvdXBTdGF0ZSgpe3JldHVybiB0aGlzLnZpYUFwaSgiZ2V0Q29sdW1uR3JvdXBTdGF0ZSIpfXNldENvbHVtbkdyb3VwU3RhdGUoZSl7dGhpcy52aWFBcGkoInNldENvbHVtbkdyb3VwU3RhdGUiLGUpfXJlc2V0Q29sdW1uR3JvdXBTdGF0ZSgpe3RoaXMudmlhQXBpKCJyZXNldENvbHVtbkdyb3VwU3RhdGUiKX1pc1Bpbm5pbmcoKXtyZXR1cm4gdGhpcy52aWFBcGkoImlzUGlubmluZyIpfWlzUGlubmluZ0xlZnQoKXtyZXR1cm4gdGhpcy52aWFBcGkoImlzUGlubmluZ0xlZnQiKX1pc1Bpbm5pbmdSaWdodCgpe3JldHVybiB0aGlzLnZpYUFwaSgiaXNQaW5uaW5nUmlnaHQiKX1nZXREaXNwbGF5ZWRDb2xBZnRlcihlKXtyZXR1cm4gdGhpcy52aWFBcGkoImdldERpc3BsYXllZENvbEFmdGVyIixlKX1nZXREaXNwbGF5ZWRDb2xCZWZvcmUoZSl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXREaXNwbGF5ZWRDb2xCZWZvcmUiLGUpfXNldENvbHVtblZpc2libGUoZSx0KXt0aGlzLnZpYUFwaSgic2V0Q29sdW1uVmlzaWJsZSIsZSx0KX1zZXRDb2x1bW5zVmlzaWJsZShlLHQpe3RoaXMudmlhQXBpKCJzZXRDb2x1bW5zVmlzaWJsZSIsZSx0KX1zZXRDb2x1bW5QaW5uZWQoZSx0KXt0aGlzLnZpYUFwaSgic2V0Q29sdW1uUGlubmVkIixlLHQpfXNldENvbHVtbnNQaW5uZWQoZSx0KXt0aGlzLnZpYUFwaSgic2V0Q29sdW1uc1Bpbm5lZCIsZSx0KX1nZXRBbGxHcmlkQ29sdW1ucygpe3JldHVybiB0aGlzLnZpYUFwaSgiZ2V0QWxsR3JpZENvbHVtbnMiKX1nZXREaXNwbGF5ZWRMZWZ0Q29sdW1ucygpe3JldHVybiB0aGlzLnZpYUFwaSgiZ2V0RGlzcGxheWVkTGVmdENvbHVtbnMiKX1nZXREaXNwbGF5ZWRDZW50ZXJDb2x1bW5zKCl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXREaXNwbGF5ZWRDZW50ZXJDb2x1bW5zIil9Z2V0RGlzcGxheWVkUmlnaHRDb2x1bW5zKCl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXREaXNwbGF5ZWRSaWdodENvbHVtbnMiKX1nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXRBbGxEaXNwbGF5ZWRDb2x1bW5zIil9Z2V0QWxsRGlzcGxheWVkVmlydHVhbENvbHVtbnMoKXtyZXR1cm4gdGhpcy52aWFBcGkoImdldEFsbERpc3BsYXllZFZpcnR1YWxDb2x1bW5zIil9bW92ZUNvbHVtbihlLHQpe3RoaXMudmlhQXBpKCJtb3ZlQ29sdW1uIixlLHQpfW1vdmVDb2x1bW5CeUluZGV4KGUsdCl7dGhpcy52aWFBcGkoIm1vdmVDb2x1bW5CeUluZGV4IixlLHQpfW1vdmVDb2x1bW5zKGUsdCl7dGhpcy52aWFBcGkoIm1vdmVDb2x1bW5zIixlLHQpfW1vdmVSb3dHcm91cENvbHVtbihlLHQpe3RoaXMudmlhQXBpKCJtb3ZlUm93R3JvdXBDb2x1bW4iLGUsdCl9c2V0Q29sdW1uQWdnRnVuYyhlLHQpe3RoaXMudmlhQXBpKCJzZXRDb2x1bW5BZ2dGdW5jIixlLHQpfXNldENvbHVtbldpZHRoKGUsdCxpPSEwLHMpe3RoaXMudmlhQXBpKCJzZXRDb2x1bW5XaWR0aCIsZSx0LGkscyl9c2V0Q29sdW1uV2lkdGhzKGUsdD0hMCxpKXt0aGlzLnZpYUFwaSgic2V0Q29sdW1uV2lkdGhzIixlLHQsaSl9c2V0UGl2b3RNb2RlKGUpe3RoaXMudmlhQXBpKCJzZXRQaXZvdE1vZGUiLGUpfWlzUGl2b3RNb2RlKCl7cmV0dXJuIHRoaXMudmlhQXBpKCJpc1Bpdm90TW9kZSIpfWdldFBpdm90UmVzdWx0Q29sdW1uKGUsdCl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXRQaXZvdFJlc3VsdENvbHVtbiIsZSx0KX1zZXRWYWx1ZUNvbHVtbnMoZSl7dGhpcy52aWFBcGkoInNldFZhbHVlQ29sdW1ucyIsZSl9Z2V0VmFsdWVDb2x1bW5zKCl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXRWYWx1ZUNvbHVtbnMiKX1yZW1vdmVWYWx1ZUNvbHVtbihlKXt0aGlzLnZpYUFwaSgicmVtb3ZlVmFsdWVDb2x1bW4iLGUpfXJlbW92ZVZhbHVlQ29sdW1ucyhlKXt0aGlzLnZpYUFwaSgicmVtb3ZlVmFsdWVDb2x1bW5zIixlKX1hZGRWYWx1ZUNvbHVtbihlKXt0aGlzLnZpYUFwaSgiYWRkVmFsdWVDb2x1bW4iLGUpfWFkZFZhbHVlQ29sdW1ucyhlKXt0aGlzLnZpYUFwaSgiYWRkVmFsdWVDb2x1bW5zIixlKX1zZXRSb3dHcm91cENvbHVtbnMoZSl7dGhpcy52aWFBcGkoInNldFJvd0dyb3VwQ29sdW1ucyIsZSl9cmVtb3ZlUm93R3JvdXBDb2x1bW4oZSl7dGhpcy52aWFBcGkoInJlbW92ZVJvd0dyb3VwQ29sdW1uIixlKX1yZW1vdmVSb3dHcm91cENvbHVtbnMoZSl7dGhpcy52aWFBcGkoInJlbW92ZVJvd0dyb3VwQ29sdW1ucyIsZSl9YWRkUm93R3JvdXBDb2x1bW4oZSl7dGhpcy52aWFBcGkoImFkZFJvd0dyb3VwQ29sdW1uIixlKX1hZGRSb3dHcm91cENvbHVtbnMoZSl7dGhpcy52aWFBcGkoImFkZFJvd0dyb3VwQ29sdW1ucyIsZSl9Z2V0Um93R3JvdXBDb2x1bW5zKCl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXRSb3dHcm91cENvbHVtbnMiKX1zZXRQaXZvdENvbHVtbnMoZSl7dGhpcy52aWFBcGkoInNldFBpdm90Q29sdW1ucyIsZSl9cmVtb3ZlUGl2b3RDb2x1bW4oZSl7dGhpcy52aWFBcGkoInJlbW92ZVBpdm90Q29sdW1uIixlKX1yZW1vdmVQaXZvdENvbHVtbnMoZSl7dGhpcy52aWFBcGkoInJlbW92ZVBpdm90Q29sdW1ucyIsZSl9YWRkUGl2b3RDb2x1bW4oZSl7dGhpcy52aWFBcGkoImFkZFBpdm90Q29sdW1uIixlKX1hZGRQaXZvdENvbHVtbnMoZSl7dGhpcy52aWFBcGkoImFkZFBpdm90Q29sdW1ucyIsZSl9Z2V0UGl2b3RDb2x1bW5zKCl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXRQaXZvdENvbHVtbnMiKX1nZXRMZWZ0RGlzcGxheWVkQ29sdW1uR3JvdXBzKCl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXRMZWZ0RGlzcGxheWVkQ29sdW1uR3JvdXBzIil9Z2V0Q2VudGVyRGlzcGxheWVkQ29sdW1uR3JvdXBzKCl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXRDZW50ZXJEaXNwbGF5ZWRDb2x1bW5Hcm91cHMiKX1nZXRSaWdodERpc3BsYXllZENvbHVtbkdyb3Vwcygpe3JldHVybiB0aGlzLnZpYUFwaSgiZ2V0UmlnaHREaXNwbGF5ZWRDb2x1bW5Hcm91cHMiKX1nZXRBbGxEaXNwbGF5ZWRDb2x1bW5Hcm91cHMoKXtyZXR1cm4gdGhpcy52aWFBcGkoImdldEFsbERpc3BsYXllZENvbHVtbkdyb3VwcyIpfWF1dG9TaXplQ29sdW1uKGUsdCl7cmV0dXJuIHRoaXMudmlhQXBpKCJhdXRvU2l6ZUNvbHVtbiIsZSx0KX1hdXRvU2l6ZUNvbHVtbnMoZSx0KXt0aGlzLnZpYUFwaSgiYXV0b1NpemVDb2x1bW5zIixlLHQpfWF1dG9TaXplQWxsQ29sdW1ucyhlKXt0aGlzLnZpYUFwaSgiYXV0b1NpemVBbGxDb2x1bW5zIixlKX1zZXRQaXZvdFJlc3VsdENvbHVtbnMoZSl7dGhpcy52aWFBcGkoInNldFBpdm90UmVzdWx0Q29sdW1ucyIsZSl9Z2V0UGl2b3RSZXN1bHRDb2x1bW5zKCl7cmV0dXJuIHRoaXMudmlhQXBpKCJnZXRQaXZvdFJlc3VsdENvbHVtbnMiKX19O0ljKFtjZSgiZ3JpZEFwaSIpXSxOYy5wcm90b3R5cGUsImFwaSIsdm9pZCAwKSxOYz1JYyhbZGUoImNvbHVtbkFwaSIpXSxOYyk7dmFyIEdjPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBrYz1jbGFzcyBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmluaXRpYWxpc2VkPSExLHRoaXMuaXNTc3JtPSExfWluaXQoKXt0aGlzLmlzU3NybT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd01vZGVsVHlwZSgic2VydmVyU2lkZSIpLHRoaXMuY2VsbEV4cHJlc3Npb25zPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlQ2VsbEV4cHJlc3Npb25zIiksdGhpcy5pc1RyZWVEYXRhPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidHJlZURhdGEiKSx0aGlzLmluaXRpYWxpc2VkPSEwO2NvbnN0IGU9ZT0+dGhpcy5jYWxsQ29sdW1uQ2VsbFZhbHVlQ2hhbmdlZEhhbmRsZXIoZSksdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS51c2VBc3luY0V2ZW50cygpO3RoaXMuZXZlbnRTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIobHQuRVZFTlRfQ0VMTF9WQUxVRV9DSEFOR0VELGUsdCksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+dGhpcy5ldmVudFNlcnZpY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihsdC5FVkVOVF9DRUxMX1ZBTFVFX0NIQU5HRUQsZSx0KSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigidHJlZURhdGEiLGU9PnRoaXMuaXNUcmVlRGF0YT1lLmN1cnJlbnRWYWx1ZSl9Z2V0VmFsdWUoZSx0LGk9ITEscz0hMSl7aWYodGhpcy5pbml0aWFsaXNlZHx8dGhpcy5pbml0KCksIXQpcmV0dXJuO2NvbnN0IHI9ZS5nZXRDb2xEZWYoKSxvPXIuZmllbGQsbj1lLmdldENvbElkKCksYT10LmRhdGE7bGV0IGw7Y29uc3QgZD10Lmdyb3VwRGF0YSYmdm9pZCAwIT09dC5ncm91cERhdGFbbl0sYz0hcyYmdC5hZ2dEYXRhJiZ2b2lkIDAhPT10LmFnZ0RhdGFbbl0saD10aGlzLmlzU3NybSYmcyYmISFlLmdldENvbERlZigpLmFnZ0Z1bmMsdT10aGlzLmlzU3NybSYmdC5mb290ZXImJnQuZmllbGQmJighMD09PWUuZ2V0Q29sRGVmKCkuc2hvd1Jvd0dyb3VwfHxlLmdldENvbERlZigpLnNob3dSb3dHcm91cD09PXQuZmllbGQpO2lmKGkmJnIuZmlsdGVyVmFsdWVHZXR0ZXI/bD10aGlzLmV4ZWN1dGVGaWx0ZXJWYWx1ZUdldHRlcihyLmZpbHRlclZhbHVlR2V0dGVyLGEsZSx0KTp0aGlzLmlzVHJlZURhdGEmJmM/bD10LmFnZ0RhdGFbbl06dGhpcy5pc1RyZWVEYXRhJiZyLnZhbHVlR2V0dGVyP2w9dGhpcy5leGVjdXRlVmFsdWVHZXR0ZXIoci52YWx1ZUdldHRlcixhLGUsdCk6dGhpcy5pc1RyZWVEYXRhJiZvJiZhP2w9XyhhLG8sZS5pc0ZpZWxkQ29udGFpbnNEb3RzKCkpOmQ/bD10Lmdyb3VwRGF0YVtuXTpjP2w9dC5hZ2dEYXRhW25dOnIudmFsdWVHZXR0ZXI/bD10aGlzLmV4ZWN1dGVWYWx1ZUdldHRlcihyLnZhbHVlR2V0dGVyLGEsZSx0KTp1P2w9XyhhLHQuZmllbGQsZS5pc0ZpZWxkQ29udGFpbnNEb3RzKCkpOm8mJmEmJiFoJiYobD1fKGEsbyxlLmlzRmllbGRDb250YWluc0RvdHMoKSkpLHRoaXMuY2VsbEV4cHJlc3Npb25zJiYic3RyaW5nIj09dHlwZW9mIGwmJjA9PT1sLmluZGV4T2YoIj0iKSl7Y29uc3QgaT1sLnN1YnN0cmluZygxKTtsPXRoaXMuZXhlY3V0ZVZhbHVlR2V0dGVyKGksYSxlLHQpfWlmKG51bGw9PWwpe2NvbnN0IGk9dGhpcy5nZXRPcGVuZWRHcm91cCh0LGUpO2lmKG51bGwhPWkpcmV0dXJuIGl9cmV0dXJuIGx9Z2V0T3BlbmVkR3JvdXAoZSx0KXtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzaG93T3BlbmVkR3JvdXAiKSlyZXR1cm47aWYoIXQuZ2V0Q29sRGVmKCkuc2hvd1Jvd0dyb3VwKXJldHVybjtjb25zdCBpPXQuZ2V0Q29sRGVmKCkuc2hvd1Jvd0dyb3VwO2xldCBzPWUucGFyZW50O2Zvcig7bnVsbCE9czspe2lmKHMucm93R3JvdXBDb2x1bW4mJighMD09PWl8fGk9PT1zLnJvd0dyb3VwQ29sdW1uLmdldENvbElkKCkpKXJldHVybiBzLmtleTtzPXMucGFyZW50fX1zZXRWYWx1ZShlLHQsaSxzKXtjb25zdCByPXRoaXMuY29sdW1uTW9kZWwuZ2V0UHJpbWFyeUNvbHVtbih0KTtpZighZXx8IXIpcmV0dXJuITE7RShlLmRhdGEpJiYoZS5kYXRhPXt9KTtjb25zdHtmaWVsZDpvLHZhbHVlU2V0dGVyOm59PXIuZ2V0Q29sRGVmKCk7aWYoRShvKSYmRShuKSlyZXR1cm4gY29uc29sZS53YXJuKCJBRyBHcmlkOiB5b3UgbmVlZCBlaXRoZXIgZmllbGQgb3IgdmFsdWVTZXR0ZXIgc2V0IG9uIGNvbERlZiBmb3IgZWRpdGluZyB0byB3b3JrIiksITE7aWYoIXRoaXMuZGF0YVR5cGVTZXJ2aWNlLmNoZWNrVHlwZShyLGkpKXJldHVybiBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IERhdGEgdHlwZSBvZiB0aGUgbmV3IHZhbHVlIGRvZXMgbm90IG1hdGNoIHRoZSBjZWxsIGRhdGEgdHlwZSBvZiB0aGUgY29sdW1uIiksITE7Y29uc3QgYT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHtub2RlOmUsZGF0YTplLmRhdGEsb2xkVmFsdWU6dGhpcy5nZXRWYWx1ZShyLGUpLG5ld1ZhbHVlOmksY29sRGVmOnIuZ2V0Q29sRGVmKCksY29sdW1uOnJ9KTtsZXQgbDtpZihhLm5ld1ZhbHVlPWksbD1iKG4pPyJmdW5jdGlvbiI9PXR5cGVvZiBuP24oYSk6dGhpcy5leHByZXNzaW9uU2VydmljZS5ldmFsdWF0ZShuLGEpOnRoaXMuc2V0VmFsdWVVc2luZ0ZpZWxkKGUuZGF0YSxvLGksci5pc0ZpZWxkQ29udGFpbnNEb3RzKCkpLHZvaWQgMD09PWwmJihsPSEwKSwhbClyZXR1cm4hMTtlLnJlc2V0UXVpY2tGaWx0ZXJBZ2dyZWdhdGVUZXh0KCksdGhpcy52YWx1ZUNhY2hlLm9uRGF0YUNoYW5nZWQoKSxhLm5ld1ZhbHVlPXRoaXMuZ2V0VmFsdWUocixlKTtjb25zdCBkPXt0eXBlOmx0LkVWRU5UX0NFTExfVkFMVUVfQ0hBTkdFRCxldmVudDpudWxsLHJvd0luZGV4OmUucm93SW5kZXgscm93UGlubmVkOmUucm93UGlubmVkLGNvbHVtbjphLmNvbHVtbixhcGk6YS5hcGksY29sdW1uQXBpOmEuY29sdW1uQXBpLGNvbERlZjphLmNvbERlZixjb250ZXh0OmEuY29udGV4dCxkYXRhOmUuZGF0YSxub2RlOmUsb2xkVmFsdWU6YS5vbGRWYWx1ZSxuZXdWYWx1ZTphLm5ld1ZhbHVlLHZhbHVlOmEubmV3VmFsdWUsc291cmNlOnN9O3JldHVybiB0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGQpLCEwfWNhbGxDb2x1bW5DZWxsVmFsdWVDaGFuZ2VkSGFuZGxlcihlKXtjb25zdCB0PWUuY29sRGVmLm9uQ2VsbFZhbHVlQ2hhbmdlZDsiZnVuY3Rpb24iPT10eXBlb2YgdCYmdGhpcy5nZXRGcmFtZXdvcmtPdmVycmlkZXMoKS53cmFwT3V0Z29pbmcoKCk9Pnt0KHtub2RlOmUubm9kZSxkYXRhOmUuZGF0YSxvbGRWYWx1ZTplLm9sZFZhbHVlLG5ld1ZhbHVlOmUubmV3VmFsdWUsY29sRGVmOmUuY29sRGVmLGNvbHVtbjplLmNvbHVtbixhcGk6ZS5hcGksY29sdW1uQXBpOmUuY29sdW1uQXBpLGNvbnRleHQ6ZS5jb250ZXh0fSl9KX1zZXRWYWx1ZVVzaW5nRmllbGQoZSx0LGkscyl7aWYoIXQpcmV0dXJuITE7bGV0IHI9ITE7aWYocyl7Y29uc3Qgcz10LnNwbGl0KCIuIik7bGV0IG89ZTtmb3IoO3MubGVuZ3RoPjAmJm87KXtjb25zdCBlPXMuc2hpZnQoKTswPT09cy5sZW5ndGg/KHI9b1tlXT09PWkscnx8KG9bZV09aSkpOm89b1tlXX19ZWxzZSByPWVbdF09PT1pLHJ8fChlW3RdPWkpO3JldHVybiFyfWV4ZWN1dGVGaWx0ZXJWYWx1ZUdldHRlcihlLHQsaSxzKXtjb25zdCByPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe2RhdGE6dCxub2RlOnMsY29sdW1uOmksY29sRGVmOmkuZ2V0Q29sRGVmKCksZ2V0VmFsdWU6dGhpcy5nZXRWYWx1ZUNhbGxiYWNrLmJpbmQodGhpcyxzKX0pO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlP2Uocik6dGhpcy5leHByZXNzaW9uU2VydmljZS5ldmFsdWF0ZShlLHIpfWV4ZWN1dGVWYWx1ZUdldHRlcihlLHQsaSxzKXtjb25zdCByPWkuZ2V0Q29sSWQoKSxvPXRoaXMudmFsdWVDYWNoZS5nZXRWYWx1ZShzLHIpO2lmKHZvaWQgMCE9PW8pcmV0dXJuIG87Y29uc3Qgbj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHtkYXRhOnQsbm9kZTpzLGNvbHVtbjppLGNvbERlZjppLmdldENvbERlZigpLGdldFZhbHVlOnRoaXMuZ2V0VmFsdWVDYWxsYmFjay5iaW5kKHRoaXMscyl9KTtsZXQgYTtyZXR1cm4gYT0iZnVuY3Rpb24iPT10eXBlb2YgZT9lKG4pOnRoaXMuZXhwcmVzc2lvblNlcnZpY2UuZXZhbHVhdGUoZSxuKSx0aGlzLnZhbHVlQ2FjaGUuc2V0VmFsdWUocyxyLGEpLGF9Z2V0VmFsdWVDYWxsYmFjayhlLHQpe2NvbnN0IGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKHQpO3JldHVybiBpP3RoaXMuZ2V0VmFsdWUoaSxlKTpudWxsfWdldEtleUZvck5vZGUoZSx0KXtjb25zdCBpPXRoaXMuZ2V0VmFsdWUoZSx0KSxzPWUuZ2V0Q29sRGVmKCkua2V5Q3JlYXRvcjtsZXQgcj1pO2lmKHMpe3I9cyh0aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHt2YWx1ZTppLGNvbERlZjplLmdldENvbERlZigpLGNvbHVtbjplLG5vZGU6dCxkYXRhOnQuZGF0YX0pKX1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIHJ8fG51bGw9PXJ8fChyPVN0cmluZyhyKSwiW29iamVjdCBPYmplY3RdIj09PXImJmooImEgY29sdW1uIHlvdSBhcmUgZ3JvdXBpbmcgb3IgcGl2b3RpbmcgYnkgaGFzIG9iamVjdHMgYXMgdmFsdWVzLiBJZiB5b3Ugd2FudCB0byBncm91cCBieSBjb21wbGV4IG9iamVjdHMgdGhlbiBlaXRoZXIgYSkgdXNlIGEgY29sRGVmLmtleUNyZWF0b3IgKHNlIEFHIEdyaWQgZG9jcykgb3IgYikgdG8gdG9TdHJpbmcoKSBvbiB0aGUgb2JqZWN0IHRvIHJldHVybiBhIGtleSIpKSxyfX07R2MoW2NlKCJleHByZXNzaW9uU2VydmljZSIpXSxrYy5wcm90b3R5cGUsImV4cHJlc3Npb25TZXJ2aWNlIix2b2lkIDApLEdjKFtjZSgiY29sdW1uTW9kZWwiKV0sa2MucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxHYyhbY2UoInZhbHVlQ2FjaGUiKV0sa2MucHJvdG90eXBlLCJ2YWx1ZUNhY2hlIix2b2lkIDApLEdjKFtjZSgiZGF0YVR5cGVTZXJ2aWNlIildLGtjLnByb3RvdHlwZSwiZGF0YVR5cGVTZXJ2aWNlIix2b2lkIDApLEdjKFthZV0sa2MucHJvdG90eXBlLCJpbml0IixudWxsKSxrYz1HYyhbZGUoInZhbHVlU2VydmljZSIpXSxrYyk7dmFyIF9jPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59LFZjPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGkscyl7dChpLHMsZSl9fTtsZXQgQmM9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5leHByZXNzaW9uVG9GdW5jdGlvbkNhY2hlPXt9fXNldEJlYW5zKGUpe3RoaXMubG9nZ2VyPWUuY3JlYXRlKCJFeHByZXNzaW9uU2VydmljZSIpfWV2YWx1YXRlKGUsdCl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihlLHQpO2NvbnNvbGUuZXJyb3IoIkFHIEdyaWQ6IHZhbHVlIHNob3VsZCBiZSBlaXRoZXIgYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiIsZSl9ZXZhbHVhdGVFeHByZXNzaW9uKGUsdCl7dHJ5e2NvbnN0IGk9dGhpcy5jcmVhdGVFeHByZXNzaW9uRnVuY3Rpb24oZSk7cmV0dXJuIGkodC52YWx1ZSx0LmNvbnRleHQsdC5vbGRWYWx1ZSx0Lm5ld1ZhbHVlLHQudmFsdWUsdC5ub2RlLHQuZGF0YSx0LmNvbERlZix0LnJvd0luZGV4LHQuYXBpLHQuY29sdW1uQXBpLHQuZ2V0VmFsdWUsdC5jb2x1bW4sdC5jb2x1bW5Hcm91cCl9Y2F0Y2goaSl7cmV0dXJuIGNvbnNvbGUubG9nKCJQcm9jZXNzaW5nIG9mIHRoZSBleHByZXNzaW9uIGZhaWxlZCIpLGNvbnNvbGUubG9nKCJFeHByZXNzaW9uID0gIitlKSxjb25zb2xlLmxvZygiUGFyYW1zID0iLHQpLGNvbnNvbGUubG9nKCJFeGNlcHRpb24gPSAiK2kpLG51bGx9fWNyZWF0ZUV4cHJlc3Npb25GdW5jdGlvbihlKXtpZih0aGlzLmV4cHJlc3Npb25Ub0Z1bmN0aW9uQ2FjaGVbZV0pcmV0dXJuIHRoaXMuZXhwcmVzc2lvblRvRnVuY3Rpb25DYWNoZVtlXTtjb25zdCB0PXRoaXMuY3JlYXRlRnVuY3Rpb25Cb2R5KGUpLGk9bmV3IEZ1bmN0aW9uKCJ4LCBjdHgsIG9sZFZhbHVlLCBuZXdWYWx1ZSwgdmFsdWUsIG5vZGUsIGRhdGEsIGNvbERlZiwgcm93SW5kZXgsIGFwaSwgY29sdW1uQXBpLCBnZXRWYWx1ZSwgY29sdW1uLCBjb2x1bW5Hcm91cCIsdCk7cmV0dXJuIHRoaXMuZXhwcmVzc2lvblRvRnVuY3Rpb25DYWNoZVtlXT1pLGl9Y3JlYXRlRnVuY3Rpb25Cb2R5KGUpe3JldHVybiBlLmluZGV4T2YoInJldHVybiIpPj0wP2U6InJldHVybiAiK2UrIjsifX07X2MoW1ZjKDAscGUoImxvZ2dlckZhY3RvcnkiKSldLEJjLnByb3RvdHlwZSwic2V0QmVhbnMiLG51bGwpLEJjPV9jKFtkZSgiZXhwcmVzc2lvblNlcnZpY2UiKV0sQmMpO3ZhciBIYz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgV2M9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy50ZW1wbGF0ZUNhY2hlPXt9LHRoaXMud2FpdGluZ0NhbGxiYWNrcz17fX1nZXRUZW1wbGF0ZShlLHQpe2NvbnN0IGk9dGhpcy50ZW1wbGF0ZUNhY2hlW2VdO2lmKGkpcmV0dXJuIGk7bGV0IHM9dGhpcy53YWl0aW5nQ2FsbGJhY2tzW2VdO2NvbnN0IHI9dGhpcztpZighcyl7cz1bXSx0aGlzLndhaXRpbmdDYWxsYmFja3NbZV09cztjb25zdCB0PW5ldyBYTUxIdHRwUmVxdWVzdDt0Lm9ubG9hZD1mdW5jdGlvbigpe3IuaGFuZGxlSHR0cFJlc3VsdCh0aGlzLGUpfSx0Lm9wZW4oIkdFVCIsZSksdC5zZW5kKCl9cmV0dXJuIHQmJnMucHVzaCh0KSxudWxsfWhhbmRsZUh0dHBSZXN1bHQoZSx0KXtpZigyMDAhPT1lLnN0YXR1c3x8bnVsbD09PWUucmVzcG9uc2UpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKGBBRyBHcmlkOiBVbmFibGUgdG8gZ2V0IHRlbXBsYXRlIGVycm9yICR7ZS5zdGF0dXN9IC0gJHt0fWApO3RoaXMudGVtcGxhdGVDYWNoZVt0XT1lLnJlc3BvbnNlfHxlLnJlc3BvbnNlVGV4dDtjb25zdCBpPXRoaXMud2FpdGluZ0NhbGxiYWNrc1t0XTtmb3IobGV0IGU9MDtlPGkubGVuZ3RoO2UrKyl7KDAsaVtlXSkoKX19fTtXYz1IYyhbZGUoInRlbXBsYXRlU2VydmljZSIpXSxXYyk7dmFyIGpjPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59LFVjPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGkscyl7dChpLHMsZSl9fTtsZXQgemM9Y2xhc3MgZXh0ZW5kcyBpdHtzZXRCZWFucyhlKXt0aGlzLmxvZ2dpbmc9ZS5nZXQoImRlYnVnIil9Y3JlYXRlKGUpe3JldHVybiBuZXcgS2MoZSx0aGlzLmlzTG9nZ2luZy5iaW5kKHRoaXMpKX1pc0xvZ2dpbmcoKXtyZXR1cm4gdGhpcy5sb2dnaW5nfX07amMoW1VjKDAscGUoImdyaWRPcHRpb25zU2VydmljZSIpKV0semMucHJvdG90eXBlLCJzZXRCZWFucyIsbnVsbCksemM9amMoW2RlKCJsb2dnZXJGYWN0b3J5IildLHpjKTtjbGFzcyBLY3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMubmFtZT1lLHRoaXMuaXNMb2dnaW5nRnVuYz10fWlzTG9nZ2luZygpe3JldHVybiB0aGlzLmlzTG9nZ2luZ0Z1bmMoKX1sb2coZSl7dGhpcy5pc0xvZ2dpbmdGdW5jKCkmJmNvbnNvbGUubG9nKCJBRyBHcmlkLiIrdGhpcy5uYW1lKyI6ICIrZSl9fXZhciBZYz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyAkYyBleHRlbmRzIGl0e3NldENvbXAoZSx0LGkpe3RoaXMudmlldz1lLHRoaXMuZUdyaWRIb3N0RGl2PXQsdGhpcy5lR3VpPWksdGhpcy5lR3VpLnNldEF0dHJpYnV0ZSgiZ3JpZC1pZCIsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKSx0aGlzLmRyYWdBbmREcm9wU2VydmljZS5hZGREcm9wVGFyZ2V0KHtnZXRDb250YWluZXI6KCk9PnRoaXMuZUd1aSxpc0ludGVyZXN0ZWRJbjplPT5lPT09SW8uSGVhZGVyQ2VsbHx8ZT09PUlvLlRvb2xQYW5lbCxnZXRJY29uTmFtZTooKT0+R28uSUNPTl9OT1RfQUxMT1dFRH0pLHRoaXMubW91c2VFdmVudFNlcnZpY2Uuc3RhbXBUb3BMZXZlbEdyaWRDb21wV2l0aEdyaWRJbnN0YW5jZSh0KSx0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyB0YSh0aGlzLnZpZXcpKSx0aGlzLmFkZFJ0bFN1cHBvcnQoKTtjb25zdCBzPXRoaXMucmVzaXplT2JzZXJ2ZXJTZXJ2aWNlLm9ic2VydmVSZXNpemUodGhpcy5lR3JpZEhvc3REaXYsdGhpcy5vbkdyaWRTaXplQ2hhbmdlZC5iaW5kKHRoaXMpKTt0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT5zKCkpLHRoaXMuY3RybHNTZXJ2aWNlLnJlZ2lzdGVyR3JpZEN0cmwodGhpcyl9aXNEZXRhaWxHcmlkKCl7dmFyIGU7Y29uc3QgdD10aGlzLmZvY3VzU2VydmljZS5maW5kVGFiYmFibGVQYXJlbnQodGhpcy5nZXRHdWkoKSk7cmV0dXJuKG51bGw9PT0oZT1udWxsPT10P3ZvaWQgMDp0LmdldEF0dHJpYnV0ZSgicm93LWlkIikpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnN0YXJ0c1dpdGgoImRldGFpbCIpKXx8ITF9c2hvd0Ryb3Bab25lcygpe3JldHVybiByZS5fX2lzUmVnaXN0ZXJlZChzZS5Sb3dHcm91cGluZ01vZHVsZSx0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpfXNob3dTaWRlQmFyKCl7cmV0dXJuIHJlLl9faXNSZWdpc3RlcmVkKHNlLlNpZGVCYXJNb2R1bGUsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKX1zaG93U3RhdHVzQmFyKCl7cmV0dXJuIHJlLl9faXNSZWdpc3RlcmVkKHNlLlN0YXR1c0Jhck1vZHVsZSx0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpfXNob3dXYXRlcm1hcmsoKXtyZXR1cm4gcmUuX19pc1JlZ2lzdGVyZWQoc2UuRW50ZXJwcmlzZUNvcmVNb2R1bGUsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKX1vbkdyaWRTaXplQ2hhbmdlZCgpe2NvbnN0IGU9e3R5cGU6bHQuRVZFTlRfR1JJRF9TSVpFX0NIQU5HRUQsY2xpZW50V2lkdGg6dGhpcy5lR3JpZEhvc3REaXYuY2xpZW50V2lkdGgsY2xpZW50SGVpZ2h0OnRoaXMuZUdyaWRIb3N0RGl2LmNsaWVudEhlaWdodH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX1hZGRSdGxTdXBwb3J0KCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpPyJhZy1ydGwiOiJhZy1sdHIiO3RoaXMudmlldy5zZXRSdGxDbGFzcyhlKX1kZXN0cm95R3JpZFVpKCl7dGhpcy52aWV3LmRlc3Ryb3lHcmlkVWkoKX1nZXRHdWkoKXtyZXR1cm4gdGhpcy5lR3VpfXNldFJlc2l6ZUN1cnNvcihlKXt0aGlzLnZpZXcuc2V0Q3Vyc29yKGU/ImV3LXJlc2l6ZSI6bnVsbCl9ZGlzYWJsZVVzZXJTZWxlY3QoZSl7dGhpcy52aWV3LnNldFVzZXJTZWxlY3QoZT8ibm9uZSI6bnVsbCl9Zm9jdXNOZXh0SW5uZXJDb250YWluZXIoZSl7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb2N1bWVudCgpLGk9dGhpcy52aWV3LmdldEZvY3VzYWJsZUNvbnRhaW5lcnMoKSxzPWkuZmluZEluZGV4KGU9PmUuY29udGFpbnModC5hY3RpdmVFbGVtZW50KSkrKGU/LTE6MSk7cmV0dXJuIShzPD0wfHxzPj1pLmxlbmd0aCkmJnRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzSW50byhpW3NdKX1mb2N1c0lubmVyRWxlbWVudChlKXtjb25zdCB0PXRoaXMudmlldy5nZXRGb2N1c2FibGVDb250YWluZXJzKCksaT10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKTtpZihlKXtpZih0Lmxlbmd0aD4xKXJldHVybiB0aGlzLmZvY3VzU2VydmljZS5mb2N1c0ludG8oT2UodCksITApO2NvbnN0IGU9T2UoaSk7aWYodGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNHcmlkVmlldyhlLCEwKSlyZXR1cm4hMH1pZigwPT09dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJoZWFkZXJIZWlnaHQiKXx8dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0hlYWRlckZvY3VzIikpe2lmKHRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzR3JpZFZpZXcoaVswXSkpcmV0dXJuITA7Zm9yKGxldCBlPTE7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNJbnRvKHRbZV0pKXJldHVybiEwO3JldHVybiExfXJldHVybiB0aGlzLmZvY3VzU2VydmljZS5mb2N1c0ZpcnN0SGVhZGVyKCl9Zm9yY2VGb2N1c091dE9mQ29udGFpbmVyKGU9ITEpe3RoaXMudmlldy5mb3JjZUZvY3VzT3V0T2ZDb250YWluZXIoZSl9fVljKFtjZSgiZm9jdXNTZXJ2aWNlIildLCRjLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLFljKFtjZSgicmVzaXplT2JzZXJ2ZXJTZXJ2aWNlIildLCRjLnByb3RvdHlwZSwicmVzaXplT2JzZXJ2ZXJTZXJ2aWNlIix2b2lkIDApLFljKFtjZSgiY29sdW1uTW9kZWwiKV0sJGMucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxZYyhbY2UoImN0cmxzU2VydmljZSIpXSwkYy5wcm90b3R5cGUsImN0cmxzU2VydmljZSIsdm9pZCAwKSxZYyhbY2UoIm1vdXNlRXZlbnRTZXJ2aWNlIildLCRjLnByb3RvdHlwZSwibW91c2VFdmVudFNlcnZpY2UiLHZvaWQgMCksWWMoW2NlKCJkcmFnQW5kRHJvcFNlcnZpY2UiKV0sJGMucHJvdG90eXBlLCJkcmFnQW5kRHJvcFNlcnZpY2UiLHZvaWQgMCk7dmFyIFhjPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIHFjIGV4dGVuZHMgaGR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmVHcmlkRGl2PWV9cG9zdENvbnN0cnVjdCgpe3RoaXMubG9nZ2VyPXRoaXMubG9nZ2VyRmFjdG9yeS5jcmVhdGUoIkdyaWRDb21wIik7Y29uc3QgZT17ZGVzdHJveUdyaWRVaTooKT0+dGhpcy5kZXN0cm95QmVhbih0aGlzKSxzZXRSdGxDbGFzczplPT50aGlzLmFkZENzc0NsYXNzKGUpLGZvcmNlRm9jdXNPdXRPZkNvbnRhaW5lcjp0aGlzLmZvcmNlRm9jdXNPdXRPZkNvbnRhaW5lci5iaW5kKHRoaXMpLHVwZGF0ZUxheW91dENsYXNzZXM6dGhpcy51cGRhdGVMYXlvdXRDbGFzc2VzLmJpbmQodGhpcyksZ2V0Rm9jdXNhYmxlQ29udGFpbmVyczp0aGlzLmdldEZvY3VzYWJsZUNvbnRhaW5lcnMuYmluZCh0aGlzKSxzZXRVc2VyU2VsZWN0OmU9Pnt0aGlzLmdldEd1aSgpLnN0eWxlLnVzZXJTZWxlY3Q9bnVsbCE9ZT9lOiIiLHRoaXMuZ2V0R3VpKCkuc3R5bGUud2Via2l0VXNlclNlbGVjdD1udWxsIT1lP2U6IiJ9LHNldEN1cnNvcjplPT57dGhpcy5nZXRHdWkoKS5zdHlsZS5jdXJzb3I9bnVsbCE9ZT9lOiIifX07dGhpcy5jdHJsPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3ICRjKTtjb25zdCB0PXRoaXMuY3JlYXRlVGVtcGxhdGUoKTt0aGlzLnNldFRlbXBsYXRlKHQpLHRoaXMuY3RybC5zZXRDb21wKGUsdGhpcy5lR3JpZERpdix0aGlzLmdldEd1aSgpKSx0aGlzLmluc2VydEdyaWRJbnRvRG9tKCksdGhpcy5pbml0aWFsaXNlVGFiR3VhcmQoe29uVGFiS2V5RG93bjooKT0+e30sZm9jdXNJbm5lckVsZW1lbnQ6ZT0+dGhpcy5jdHJsLmZvY3VzSW5uZXJFbGVtZW50KGUpLGZvcmNlRm9jdXNPdXRXaGVuVGFiR3VhcmRzQXJlRW1wdHk6ITB9KX1pbnNlcnRHcmlkSW50b0RvbSgpe2NvbnN0IGU9dGhpcy5nZXRHdWkoKTt0aGlzLmVHcmlkRGl2LmFwcGVuZENoaWxkKGUpLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9Pnt0aGlzLmVHcmlkRGl2LnJlbW92ZUNoaWxkKGUpLHRoaXMubG9nZ2VyLmxvZygiR3JpZCByZW1vdmVkIGZyb20gRE9NIil9KX11cGRhdGVMYXlvdXRDbGFzc2VzKGUsdCl7Y29uc3QgaT10aGlzLmVSb290V3JhcHBlckJvZHkuY2xhc3NMaXN0O2kudG9nZ2xlKEpuLkFVVE9fSEVJR0hULHQuYXV0b0hlaWdodCksaS50b2dnbGUoSm4uTk9STUFMLHQubm9ybWFsKSxpLnRvZ2dsZShKbi5QUklOVCx0LnByaW50KSx0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoSm4uQVVUT19IRUlHSFQsdC5hdXRvSGVpZ2h0KSx0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoSm4uTk9STUFMLHQubm9ybWFsKSx0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoSm4uUFJJTlQsdC5wcmludCl9Y3JlYXRlVGVtcGxhdGUoKXtyZXR1cm5gPGRpdiBjbGFzcz0iYWctcm9vdC13cmFwcGVyIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgICR7dGhpcy5jdHJsLnNob3dEcm9wWm9uZXMoKT8iPGFnLWdyaWQtaGVhZGVyLWRyb3Atem9uZXM+PC9hZy1ncmlkLWhlYWRlci1kcm9wLXpvbmVzPiI6IiJ9XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctcm9vdC13cmFwcGVyLWJvZHkiIHJlZj0icm9vdFdyYXBwZXJCb2R5IiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgICAgICA8YWctZ3JpZC1ib2R5IHJlZj0iZ3JpZEJvZHkiPjwvYWctZ3JpZC1ib2R5PlxuICAgICAgICAgICAgICAgICAgICAke3RoaXMuY3RybC5zaG93U2lkZUJhcigpPyc8YWctc2lkZS1iYXIgcmVmPSJzaWRlQmFyIj48L2FnLXNpZGUtYmFyPic6IiJ9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgJHt0aGlzLmN0cmwuc2hvd1N0YXR1c0JhcigpPyc8YWctc3RhdHVzLWJhciByZWY9InN0YXR1c0JhciI+PC9hZy1zdGF0dXMtYmFyPic6IiJ9XG4gICAgICAgICAgICAgICAgPGFnLXBhZ2luYXRpb24+PC9hZy1wYWdpbmF0aW9uPlxuICAgICAgICAgICAgICAgICR7dGhpcy5jdHJsLnNob3dXYXRlcm1hcmsoKT8iPGFnLXdhdGVybWFyaz48L2FnLXdhdGVybWFyaz4iOiIifVxuICAgICAgICAgICAgPC9kaXY+YH1nZXRGb2N1c2FibGVFbGVtZW50KCl7cmV0dXJuIHRoaXMuZVJvb3RXcmFwcGVyQm9keX1nZXRGb2N1c2FibGVDb250YWluZXJzKCl7Y29uc3QgZT1bdGhpcy5ncmlkQm9keUNvbXAuZ2V0R3VpKCldO3JldHVybiB0aGlzLnNpZGVCYXJDb21wJiZlLnB1c2godGhpcy5zaWRlQmFyQ29tcC5nZXRHdWkoKSksZS5maWx0ZXIoZT0+Q3MoZSkpfX1YYyhbY2UoImxvZ2dlckZhY3RvcnkiKV0scWMucHJvdG90eXBlLCJsb2dnZXJGYWN0b3J5Iix2b2lkIDApLFhjKFt1cigiZ3JpZEJvZHkiKV0scWMucHJvdG90eXBlLCJncmlkQm9keUNvbXAiLHZvaWQgMCksWGMoW3VyKCJzaWRlQmFyIildLHFjLnByb3RvdHlwZSwic2lkZUJhckNvbXAiLHZvaWQgMCksWGMoW3VyKCJyb290V3JhcHBlckJvZHkiKV0scWMucHJvdG90eXBlLCJlUm9vdFdyYXBwZXJCb2R5Iix2b2lkIDApLFhjKFthZV0scWMucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgWmMsUWM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IEpjPVpjPWNsYXNzIGV4dGVuZHMgaXR7cHJvZ3Jlc3NTb3J0KGUsdCxpKXtjb25zdCBzPXRoaXMuZ2V0TmV4dFNvcnREaXJlY3Rpb24oZSk7dGhpcy5zZXRTb3J0Rm9yQ29sdW1uKGUscyx0LGkpfXNldFNvcnRGb3JDb2x1bW4oZSx0LGkscyl7ImFzYyIhPT10JiYiZGVzYyIhPT10JiYodD1udWxsKTtsZXQgcj1bZV07aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNDb2x1bW5zU29ydGluZ0NvdXBsZWRUb0dyb3VwKCkmJmUuZ2V0Q29sRGVmKCkuc2hvd1Jvd0dyb3VwKXtjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuZ2V0U291cmNlQ29sdW1uc0Zvckdyb3VwQ29sdW1uKGUpLGk9bnVsbD09dD92b2lkIDA6dC5maWx0ZXIoZT0+ZS5pc1NvcnRhYmxlKCkpO2kmJihyPVtlLC4uLmldKX1yLmZvckVhY2goZT0+ZS5zZXRTb3J0KHQscykpO2NvbnN0IG89W107aWYoISgoaXx8dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJhbHdheXNNdWx0aVNvcnQiKSkmJiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzTXVsdGlTb3J0IikpKXtjb25zdCBlPXRoaXMuY2xlYXJTb3J0QmFyVGhlc2VDb2x1bW5zKHIscyk7by5wdXNoKC4uLmUpfXRoaXMudXBkYXRlU29ydEluZGV4KGUpLG8ucHVzaCguLi5yKSx0aGlzLmRpc3BhdGNoU29ydENoYW5nZWRFdmVudHMocyxvKX11cGRhdGVTb3J0SW5kZXgoZSl7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0NvbHVtbnNTb3J0aW5nQ291cGxlZFRvR3JvdXAoKSxpPXRoaXMuY29sdW1uTW9kZWwuZ2V0R3JvdXBEaXNwbGF5Q29sdW1uRm9yR3JvdXAoZS5nZXRJZCgpKSxzPXQmJml8fGUscj10aGlzLmdldENvbHVtbnNXaXRoU29ydGluZ09yZGVyZWQoKTt0aGlzLmNvbHVtbk1vZGVsLmdldFByaW1hcnlBbmRTZWNvbmRhcnlBbmRBdXRvQ29sdW1ucygpLmZvckVhY2goZT0+ZS5zZXRTb3J0SW5kZXgobnVsbCkpO2NvbnN0IG89ci5maWx0ZXIoZT0+KCF0fHwhZS5nZXRDb2xEZWYoKS5zaG93Um93R3JvdXApJiZlIT09cyk7KHMuZ2V0U29ydCgpP1suLi5vLHNdOm8pLmZvckVhY2goKGUsdCk9PntlLnNldFNvcnRJbmRleCh0KX0pfW9uU29ydENoYW5nZWQoZSx0KXt0aGlzLmRpc3BhdGNoU29ydENoYW5nZWRFdmVudHMoZSx0KX1pc1NvcnRBY3RpdmUoKXtjb25zdCBlPXRoaXMuY29sdW1uTW9kZWwuZ2V0UHJpbWFyeUFuZFNlY29uZGFyeUFuZEF1dG9Db2x1bW5zKCkuZmlsdGVyKGU9PiEhZS5nZXRTb3J0KCkpO3JldHVybiBlJiZlLmxlbmd0aD4wfWRpc3BhdGNoU29ydENoYW5nZWRFdmVudHMoZSx0KXtjb25zdCBpPXt0eXBlOmx0LkVWRU5UX1NPUlRfQ0hBTkdFRCxzb3VyY2U6ZX07dCYmKGkuY29sdW1ucz10KSx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGkpfWNsZWFyU29ydEJhclRoZXNlQ29sdW1ucyhlLHQpe2NvbnN0IGk9W107cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0UHJpbWFyeUFuZFNlY29uZGFyeUFuZEF1dG9Db2x1bW5zKCkuZm9yRWFjaChzPT57ZS5pbmNsdWRlcyhzKXx8KHMuZ2V0U29ydCgpJiZpLnB1c2gocykscy5zZXRTb3J0KHZvaWQgMCx0KSl9KSxpfWdldE5leHRTb3J0RGlyZWN0aW9uKGUpe2xldCB0O2lmKHQ9ZS5nZXRDb2xEZWYoKS5zb3J0aW5nT3JkZXI/ZS5nZXRDb2xEZWYoKS5zb3J0aW5nT3JkZXI6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzb3J0aW5nT3JkZXIiKT90aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInNvcnRpbmdPcmRlciIpOlpjLkRFRkFVTFRfU09SVElOR19PUkRFUiwhQXJyYXkuaXNBcnJheSh0KXx8dC5sZW5ndGg8PTApcmV0dXJuIGNvbnNvbGUud2FybigiQUcgR3JpZDogc29ydGluZ09yZGVyIG11c3QgYmUgYW4gYXJyYXkgd2l0aCBhdCBsZWFzdCBvbmUgZWxlbWVudCwgY3VycmVudGx5IGl0J3MgIit0KSxudWxsO2NvbnN0IGk9dC5pbmRleE9mKGUuZ2V0U29ydCgpKSxzPWk8MCxyPWk9PXQubGVuZ3RoLTE7bGV0IG87cmV0dXJuIG89c3x8cj90WzBdOnRbaSsxXSxaYy5ERUZBVUxUX1NPUlRJTkdfT1JERVIuaW5kZXhPZihvKTwwPyhjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGludmFsaWQgc29ydCB0eXBlICIrbyksbnVsbCk6b31nZXRJbmRleGVkU29ydE1hcCgpe2xldCBlPXRoaXMuY29sdW1uTW9kZWwuZ2V0UHJpbWFyeUFuZFNlY29uZGFyeUFuZEF1dG9Db2x1bW5zKCkuZmlsdGVyKGU9PiEhZS5nZXRTb3J0KCkpO2lmKHRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSl7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0NvbHVtbnNTb3J0aW5nQ291cGxlZFRvR3JvdXAoKTtlPWUuZmlsdGVyKGU9Pntjb25zdCBpPSEhZS5nZXRBZ2dGdW5jKCkscz0hZS5pc1ByaW1hcnkoKSxyPXQ/dGhpcy5jb2x1bW5Nb2RlbC5nZXRHcm91cERpc3BsYXlDb2x1bW5Gb3JHcm91cChlLmdldElkKCkpOmUuZ2V0Q29sRGVmKCkuc2hvd1Jvd0dyb3VwO3JldHVybiBpfHxzfHxyfSl9Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpLmZpbHRlcihlPT4hIWUuZ2V0U29ydCgpKSxpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzQ29sdW1uc1NvcnRpbmdDb3VwbGVkVG9Hcm91cCgpJiYhIXQubGVuZ3RoO2kmJihlPVsuLi5uZXcgU2V0KGUubWFwKGU9Pnt2YXIgdDtyZXR1cm4gbnVsbCE9PSh0PXRoaXMuY29sdW1uTW9kZWwuZ2V0R3JvdXBEaXNwbGF5Q29sdW1uRm9yR3JvdXAoZS5nZXRJZCgpKSkmJnZvaWQgMCE9PXQ/dDplfSkpXSk7Y29uc3Qgcz17fTtlLmZvckVhY2goKGUsdCk9PnNbZS5nZXRJZCgpXT10KSxlLnNvcnQoKGUsdCk9Pntjb25zdCBpPWUuZ2V0U29ydEluZGV4KCkscj10LmdldFNvcnRJbmRleCgpO2lmKG51bGwhPWkmJm51bGwhPXIpcmV0dXJuIGktcjtpZihudWxsPT1pJiZudWxsPT1yKXtyZXR1cm4gc1tlLmdldElkKCldPnNbdC5nZXRJZCgpXT8xOi0xfXJldHVybiBudWxsPT1yPy0xOjF9KTtjb25zdCByPW5ldyBNYXA7cmV0dXJuIGUuZm9yRWFjaCgoZSx0KT0+ci5zZXQoZSx0KSksaSYmdC5mb3JFYWNoKGU9Pntjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuZ2V0R3JvdXBEaXNwbGF5Q29sdW1uRm9yR3JvdXAoZS5nZXRJZCgpKTtyLnNldChlLHIuZ2V0KHQpKX0pLHJ9Z2V0Q29sdW1uc1dpdGhTb3J0aW5nT3JkZXJlZCgpe3JldHVyblsuLi50aGlzLmdldEluZGV4ZWRTb3J0TWFwKCkuZW50cmllcygpXS5zb3J0KChbZSx0XSxbaSxzXSk9PnQtcykubWFwKChbZV0pPT5lKX1nZXRTb3J0TW9kZWwoKXtyZXR1cm4gdGhpcy5nZXRDb2x1bW5zV2l0aFNvcnRpbmdPcmRlcmVkKCkuZmlsdGVyKGU9PmUuZ2V0U29ydCgpKS5tYXAoZT0+KHtzb3J0OmUuZ2V0U29ydCgpLGNvbElkOmUuZ2V0SWQoKX0pKX1nZXRTb3J0T3B0aW9ucygpe3JldHVybiB0aGlzLmdldENvbHVtbnNXaXRoU29ydGluZ09yZGVyZWQoKS5maWx0ZXIoZT0+ZS5nZXRTb3J0KCkpLm1hcChlPT4oe3NvcnQ6ZS5nZXRTb3J0KCksY29sdW1uOmV9KSl9Y2FuQ29sdW1uRGlzcGxheU1peGVkU29ydChlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzQ29sdW1uc1NvcnRpbmdDb3VwbGVkVG9Hcm91cCgpLGk9ISFlLmdldENvbERlZigpLnNob3dSb3dHcm91cDtyZXR1cm4gdCYmaX1nZXREaXNwbGF5U29ydEZvckNvbHVtbihlKXtjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuZ2V0U291cmNlQ29sdW1uc0Zvckdyb3VwQ29sdW1uKGUpO2lmKCF0aGlzLmNhbkNvbHVtbkRpc3BsYXlNaXhlZFNvcnQoZSl8fCEobnVsbD09dD92b2lkIDA6dC5sZW5ndGgpKXJldHVybiBlLmdldFNvcnQoKTtjb25zdCBpPW51bGwhPWUuZ2V0Q29sRGVmKCkuZmllbGR8fCEhZS5nZXRDb2xEZWYoKS52YWx1ZUdldHRlcj9bZSwuLi50XTp0LHM9aVswXS5nZXRTb3J0KCk7cmV0dXJuIGkuZXZlcnkoZT0+ZS5nZXRTb3J0KCk9PXMpP3M6Im1peGVkIn1nZXREaXNwbGF5U29ydEluZGV4Rm9yQ29sdW1uKGUpe3JldHVybiB0aGlzLmdldEluZGV4ZWRTb3J0TWFwKCkuZ2V0KGUpfX07SmMuREVGQVVMVF9TT1JUSU5HX09SREVSPVsiYXNjIiwiZGVzYyIsbnVsbF0sUWMoW2NlKCJjb2x1bW5Nb2RlbCIpXSxKYy5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLEpjPVpjPVFjKFtkZSgic29ydENvbnRyb2xsZXIiKV0sSmMpO3ZhciBlaCx0aD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgaWg9ZWg9Y2xhc3MgZXh0ZW5kcyBpdHtzdGF0aWMgYWRkS2V5Ym9hcmRNb2RlRXZlbnRzKGUpe3RoaXMuaW5zdGFuY2VDb3VudD4wfHwoZS5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIixlaC50b2dnbGVLZXlib2FyZE1vZGUpLGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIixlaC50b2dnbGVLZXlib2FyZE1vZGUpKX1zdGF0aWMgcmVtb3ZlS2V5Ym9hcmRNb2RlRXZlbnRzKGUpe3RoaXMuaW5zdGFuY2VDb3VudD4wfHwoZS5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIixlaC50b2dnbGVLZXlib2FyZE1vZGUpLGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIixlaC50b2dnbGVLZXlib2FyZE1vZGUpKX1zdGF0aWMgdG9nZ2xlS2V5Ym9hcmRNb2RlKGUpe2NvbnN0IHQ9ZWgua2V5Ym9hcmRNb2RlQWN0aXZlLGk9ImtleWRvd24iPT09ZS50eXBlO2kmJihlLmN0cmxLZXl8fGUubWV0YUtleXx8ZS5hbHRLZXkpfHx0IT09aSYmKGVoLmtleWJvYXJkTW9kZUFjdGl2ZT1pKX1zdGF0aWMgdW5yZWdpc3RlckdyaWRDb21wQ29udHJvbGxlcihlKXtlaC5yZW1vdmVLZXlib2FyZE1vZGVFdmVudHMoZSl9aW5pdCgpe2NvbnN0IGU9dGhpcy5jbGVhckZvY3VzZWRDZWxsLmJpbmQodGhpcyk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ09MVU1OX1BJVk9UX01PREVfQ0hBTkdFRCxlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ORVdfQ09MVU1OU19MT0FERUQsdGhpcy5vbkNvbHVtbkV2ZXJ5dGhpbmdDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9HUk9VUF9PUEVORUQsZSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ09MVU1OX1JPV19HUk9VUF9DSEFOR0VELGUpLHRoaXMucmVnaXN0ZXJLZXlib2FyZEZvY3VzRXZlbnRzKCksdGhpcy5jdHJsc1NlcnZpY2Uud2hlblJlYWR5KGU9Pnt0aGlzLmdyaWRDdHJsPWUuZ3JpZEN0cmx9KX1yZWdpc3RlcktleWJvYXJkRm9jdXNFdmVudHMoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCk7ZWguYWRkS2V5Ym9hcmRNb2RlRXZlbnRzKGUpLGVoLmluc3RhbmNlQ291bnQrKyx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT57ZWguaW5zdGFuY2VDb3VudC0tLGVoLnVucmVnaXN0ZXJHcmlkQ29tcENvbnRyb2xsZXIoZSl9KX1vbkNvbHVtbkV2ZXJ5dGhpbmdDaGFuZ2VkKCl7aWYoIXRoaXMuZm9jdXNlZENlbGxQb3NpdGlvbilyZXR1cm47Y29uc3QgZT10aGlzLmZvY3VzZWRDZWxsUG9zaXRpb24uY29sdW1uLHQ9dGhpcy5jb2x1bW5Nb2RlbC5nZXRHcmlkQ29sdW1uKGUuZ2V0SWQoKSk7ZSE9PXQmJnRoaXMuY2xlYXJGb2N1c2VkQ2VsbCgpfWlzS2V5Ym9hcmRNb2RlKCl7cmV0dXJuIGVoLmtleWJvYXJkTW9kZUFjdGl2ZX1nZXRGb2N1c0NlbGxUb1VzZUFmdGVyUmVmcmVzaCgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKTtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0ZvY3VzQWZ0ZXJSZWZyZXNoIil8fCF0aGlzLmZvY3VzZWRDZWxsUG9zaXRpb258fHRoaXMuaXNEb21EYXRhTWlzc2luZ0luSGllcmFyY2h5KGUuYWN0aXZlRWxlbWVudCxPYS5ET01fREFUQV9LRVlfUk9XX0NUUkwpP251bGw6dGhpcy5mb2N1c2VkQ2VsbFBvc2l0aW9ufWdldEZvY3VzSGVhZGVyVG9Vc2VBZnRlclJlZnJlc2goKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCk7cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NGb2N1c0FmdGVyUmVmcmVzaCIpfHwhdGhpcy5mb2N1c2VkSGVhZGVyUG9zaXRpb258fHRoaXMuaXNEb21EYXRhTWlzc2luZ0luSGllcmFyY2h5KGUuYWN0aXZlRWxlbWVudCxPbC5ET01fREFUQV9LRVlfSEVBREVSX0NUUkwpP251bGw6dGhpcy5mb2N1c2VkSGVhZGVyUG9zaXRpb259aXNEb21EYXRhTWlzc2luZ0luSGllcmFyY2h5KGUsdCl7bGV0IGk9ZTtmb3IoO2k7KXtpZih0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb21EYXRhKGksdCkpcmV0dXJuITE7aT1pLnBhcmVudE5vZGV9cmV0dXJuITB9Z2V0Rm9jdXNlZENlbGwoKXtyZXR1cm4gdGhpcy5mb2N1c2VkQ2VsbFBvc2l0aW9ufXNob3VsZFJlc3RvcmVGb2N1cyhlKXtyZXR1cm4hIXRoaXMuaXNDZWxsUmVzdG9yZUZvY3VzZWQoZSkmJihzZXRUaW1lb3V0KCgpPT57dGhpcy5yZXN0b3JlZEZvY3VzZWRDZWxsUG9zaXRpb249bnVsbH0sMCksITApfWlzQ2VsbFJlc3RvcmVGb2N1c2VkKGUpe3JldHVybiBudWxsIT10aGlzLnJlc3RvcmVkRm9jdXNlZENlbGxQb3NpdGlvbiYmdGhpcy5jZWxsUG9zaXRpb25VdGlscy5lcXVhbHMoZSx0aGlzLnJlc3RvcmVkRm9jdXNlZENlbGxQb3NpdGlvbil9c2V0UmVzdG9yZUZvY3VzZWRDZWxsKGUpeyJyZWFjdCI9PT10aGlzLmdldEZyYW1ld29ya092ZXJyaWRlcygpLnJlbmRlcmluZ0VuZ2luZSYmKHRoaXMucmVzdG9yZWRGb2N1c2VkQ2VsbFBvc2l0aW9uPWUpfWdldEZvY3VzRXZlbnRQYXJhbXMoKXtjb25zdHtyb3dJbmRleDplLHJvd1Bpbm5lZDp0LGNvbHVtbjppfT10aGlzLmZvY3VzZWRDZWxsUG9zaXRpb24scz17cm93SW5kZXg6ZSxyb3dQaW5uZWQ6dCxjb2x1bW46aSxpc0Z1bGxXaWR0aENlbGw6ITF9LHI9dGhpcy5yb3dSZW5kZXJlci5nZXRSb3dCeVBvc2l0aW9uKHtyb3dJbmRleDplLHJvd1Bpbm5lZDp0fSk7cmV0dXJuIHImJihzLmlzRnVsbFdpZHRoQ2VsbD1yLmlzRnVsbFdpZHRoKCkpLHN9Y2xlYXJGb2N1c2VkQ2VsbCgpe2lmKHRoaXMucmVzdG9yZWRGb2N1c2VkQ2VsbFBvc2l0aW9uPW51bGwsbnVsbD09dGhpcy5mb2N1c2VkQ2VsbFBvc2l0aW9uKXJldHVybjtjb25zdCBlPU9iamVjdC5hc3NpZ24oe3R5cGU6bHQuRVZFTlRfQ0VMTF9GT0NVU19DTEVBUkVEfSx0aGlzLmdldEZvY3VzRXZlbnRQYXJhbXMoKSk7dGhpcy5mb2N1c2VkQ2VsbFBvc2l0aW9uPW51bGwsdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX1zZXRGb2N1c2VkQ2VsbChlKXtjb25zdHtjb2x1bW46dCxyb3dJbmRleDppLHJvd1Bpbm5lZDpzLGZvcmNlQnJvd3NlckZvY3VzOnI9ITEscHJldmVudFNjcm9sbE9uQnJvd3NlckZvY3VzOm89ITF9PWUsbj10aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4odCk7aWYoIW4pcmV0dXJuIHZvaWQodGhpcy5mb2N1c2VkQ2VsbFBvc2l0aW9uPW51bGwpO3RoaXMuZm9jdXNlZENlbGxQb3NpdGlvbj1uP3tyb3dJbmRleDppLHJvd1Bpbm5lZDp3KHMpLGNvbHVtbjpufTpudWxsO2NvbnN0IGE9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt0eXBlOmx0LkVWRU5UX0NFTExfRk9DVVNFRH0sdGhpcy5nZXRGb2N1c0V2ZW50UGFyYW1zKCkpLHtmb3JjZUJyb3dzZXJGb2N1czpyLHByZXZlbnRTY3JvbGxPbkJyb3dzZXJGb2N1czpvLGZsb2F0aW5nOm51bGx9KTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGEpfWlzQ2VsbEZvY3VzZWQoZSl7cmV0dXJuIG51bGwhPXRoaXMuZm9jdXNlZENlbGxQb3NpdGlvbiYmdGhpcy5jZWxsUG9zaXRpb25VdGlscy5lcXVhbHMoZSx0aGlzLmZvY3VzZWRDZWxsUG9zaXRpb24pfWlzUm93Tm9kZUZvY3VzZWQoZSl7cmV0dXJuIHRoaXMuaXNSb3dGb2N1c2VkKGUucm93SW5kZXgsZS5yb3dQaW5uZWQpfWlzSGVhZGVyV3JhcHBlckZvY3VzZWQoZSl7aWYobnVsbD09dGhpcy5mb2N1c2VkSGVhZGVyUG9zaXRpb24pcmV0dXJuITE7Y29uc3QgdD1lLmdldENvbHVtbkdyb3VwQ2hpbGQoKSxpPWUuZ2V0Um93SW5kZXgoKSxzPWUuZ2V0UGlubmVkKCkse2NvbHVtbjpyLGhlYWRlclJvd0luZGV4Om99PXRoaXMuZm9jdXNlZEhlYWRlclBvc2l0aW9uO3JldHVybiB0PT09ciYmaT09PW8mJnM9PXIuZ2V0UGlubmVkKCl9Y2xlYXJGb2N1c2VkSGVhZGVyKCl7dGhpcy5mb2N1c2VkSGVhZGVyUG9zaXRpb249bnVsbH1nZXRGb2N1c2VkSGVhZGVyKCl7cmV0dXJuIHRoaXMuZm9jdXNlZEhlYWRlclBvc2l0aW9ufXNldEZvY3VzZWRIZWFkZXIoZSx0KXt0aGlzLmZvY3VzZWRIZWFkZXJQb3NpdGlvbj17aGVhZGVyUm93SW5kZXg6ZSxjb2x1bW46dH19Zm9jdXNIZWFkZXJQb3NpdGlvbihlKXtpZih0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzSGVhZGVyRm9jdXMiKSlyZXR1cm4hMTtjb25zdHtkaXJlY3Rpb246dCxmcm9tVGFiOmksYWxsb3dVc2VyT3ZlcnJpZGU6cyxldmVudDpyLGZyb21DZWxsOm8scm93V2l0aG91dFNwYW5WYWx1ZTpufT1lO2xldHtoZWFkZXJQb3NpdGlvbjphfT1lO2lmKG8mJnRoaXMuZmlsdGVyTWFuYWdlci5pc0FkdmFuY2VkRmlsdGVySGVhZGVyQWN0aXZlKCkpcmV0dXJuIHRoaXMuZm9jdXNBZHZhbmNlZEZpbHRlcihhKTtpZihzKXtjb25zdCBlPXRoaXMuZ2V0Rm9jdXNlZEhlYWRlcigpLHM9dGhpcy5oZWFkZXJOYXZpZ2F0aW9uU2VydmljZS5nZXRIZWFkZXJSb3dDb3VudCgpO2lmKGkpe2NvbnN0IGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soInRhYlRvTmV4dEhlYWRlciIpO2lmKGkpe2E9aSh7YmFja3dhcmRzOiJCZWZvcmUiPT09dCxwcmV2aW91c0hlYWRlclBvc2l0aW9uOmUsbmV4dEhlYWRlclBvc2l0aW9uOmEsaGVhZGVyUm93Q291bnQ6c30pfX1lbHNle2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soIm5hdmlnYXRlVG9OZXh0SGVhZGVyIik7aWYodCYmcil7YT10KHtrZXk6ci5rZXkscHJldmlvdXNIZWFkZXJQb3NpdGlvbjplLG5leHRIZWFkZXJQb3NpdGlvbjphLGhlYWRlclJvd0NvdW50OnMsZXZlbnQ6cn0pfX19aWYoIWEpcmV0dXJuITE7aWYoLTE9PT1hLmhlYWRlclJvd0luZGV4KXJldHVybiB0aGlzLmZpbHRlck1hbmFnZXIuaXNBZHZhbmNlZEZpbHRlckhlYWRlckFjdGl2ZSgpP3RoaXMuZm9jdXNBZHZhbmNlZEZpbHRlcihhKTp0aGlzLmZvY3VzR3JpZFZpZXcoYS5jb2x1bW4pO3RoaXMuaGVhZGVyTmF2aWdhdGlvblNlcnZpY2Uuc2Nyb2xsVG9Db2x1bW4oYS5jb2x1bW4sdCk7Y29uc3QgbD10aGlzLmN0cmxzU2VydmljZS5nZXRIZWFkZXJSb3dDb250YWluZXJDdHJsKGEuY29sdW1uLmdldFBpbm5lZCgpKS5mb2N1c0hlYWRlcihhLmhlYWRlclJvd0luZGV4LGEuY29sdW1uLHIpO3JldHVybiBsJiYobnVsbCE9bnx8bykmJnRoaXMuaGVhZGVyTmF2aWdhdGlvblNlcnZpY2Uuc2V0Q3VycmVudEhlYWRlclJvd1dpdGhvdXRTcGFuKG51bGwhPW4/bjotMSksbH1mb2N1c0ZpcnN0SGVhZGVyKCl7bGV0IGU9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKClbMF07aWYoIWUpcmV0dXJuITE7ZS5nZXRQYXJlbnQoKSYmKGU9dGhpcy5jb2x1bW5Nb2RlbC5nZXRDb2x1bW5Hcm91cEF0TGV2ZWwoZSwwKSk7Y29uc3QgdD10aGlzLmhlYWRlclBvc2l0aW9uVXRpbHMuZ2V0SGVhZGVySW5kZXhUb0ZvY3VzKGUsMCk7cmV0dXJuIHRoaXMuZm9jdXNIZWFkZXJQb3NpdGlvbih7aGVhZGVyUG9zaXRpb246dCxyb3dXaXRob3V0U3BhblZhbHVlOjB9KX1mb2N1c0xhc3RIZWFkZXIoZSl7Y29uc3QgdD10aGlzLmhlYWRlck5hdmlnYXRpb25TZXJ2aWNlLmdldEhlYWRlclJvd0NvdW50KCktMSxpPU9lKHRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsRGlzcGxheWVkQ29sdW1ucygpKTtyZXR1cm4gdGhpcy5mb2N1c0hlYWRlclBvc2l0aW9uKHtoZWFkZXJQb3NpdGlvbjp7aGVhZGVyUm93SW5kZXg6dCxjb2x1bW46aX0scm93V2l0aG91dFNwYW5WYWx1ZTotMSxldmVudDplfSl9Zm9jdXNQcmV2aW91c0Zyb21GaXJzdENlbGwoZSl7cmV0dXJuIHRoaXMuZmlsdGVyTWFuYWdlci5pc0FkdmFuY2VkRmlsdGVySGVhZGVyQWN0aXZlKCk/dGhpcy5mb2N1c0FkdmFuY2VkRmlsdGVyKG51bGwpOnRoaXMuZm9jdXNMYXN0SGVhZGVyKGUpfWlzQW55Q2VsbEZvY3VzZWQoKXtyZXR1cm4hIXRoaXMuZm9jdXNlZENlbGxQb3NpdGlvbn1pc1Jvd0ZvY3VzZWQoZSx0KXtyZXR1cm4gbnVsbCE9dGhpcy5mb2N1c2VkQ2VsbFBvc2l0aW9uJiYodGhpcy5mb2N1c2VkQ2VsbFBvc2l0aW9uLnJvd0luZGV4PT09ZSYmdGhpcy5mb2N1c2VkQ2VsbFBvc2l0aW9uLnJvd1Bpbm5lZD09PXcodCkpfWZpbmRGb2N1c2FibGVFbGVtZW50cyhlLHQsaT0hMSl7Y29uc3Qgcz1KaTtsZXQgcj1lczt0JiYocis9IiwgIit0KSxpJiYocis9JywgW3RhYmluZGV4PSItMSJdJyk7Y29uc3Qgbz1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoZS5xdWVyeVNlbGVjdG9yQWxsKHMpKS5maWx0ZXIoZT0+Q3MoZSkpLG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGUucXVlcnlTZWxlY3RvckFsbChyKSk7aWYoIW4ubGVuZ3RoKXJldHVybiBvO3JldHVybiBhPW4sby5maWx0ZXIoZT0+LTE9PT1hLmluZGV4T2YoZSkpO3ZhciBhfWZvY3VzSW50byhlLHQ9ITEsaT0hMSl7Y29uc3Qgcz10aGlzLmZpbmRGb2N1c2FibGVFbGVtZW50cyhlLG51bGwsaSkscj10P09lKHMpOnNbMF07cmV0dXJuISFyJiYoci5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pLCEwKX1maW5kRm9jdXNhYmxlRWxlbWVudEJlZm9yZVRhYkd1YXJkKGUsdCl7aWYoIXQpcmV0dXJuIG51bGw7Y29uc3QgaT10aGlzLmZpbmRGb2N1c2FibGVFbGVtZW50cyhlKSxzPWkuaW5kZXhPZih0KTtpZigtMT09PXMpcmV0dXJuIG51bGw7bGV0IHI9LTE7Zm9yKGxldCBlPXMtMTtlPj0wO2UtLSlpZihpW2VdLmNsYXNzTGlzdC5jb250YWlucyhsZC5UQUJfR1VBUkRfVE9QKSl7cj1lO2JyZWFrfXJldHVybiByPD0wP251bGw6aVtyLTFdfWZpbmROZXh0Rm9jdXNhYmxlRWxlbWVudChlPXRoaXMuZUdyaWREaXYsdCxpKXtjb25zdCBzPXRoaXMuZmluZEZvY3VzYWJsZUVsZW1lbnRzKGUsdD8nOm5vdChbdGFiaW5kZXg9Ii0xIl0pJzpudWxsKSxyPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCkuYWN0aXZlRWxlbWVudDtsZXQgbztvPXQ/cy5maW5kSW5kZXgoZT0+ZS5jb250YWlucyhyKSk6cy5pbmRleE9mKHIpO2NvbnN0IG49bysoaT8tMToxKTtyZXR1cm4gbjwwfHxuPj1zLmxlbmd0aD9udWxsOnNbbl19aXNUYXJnZXRVbmRlck1hbmFnZWRDb21wb25lbnQoZSx0KXtpZighdClyZXR1cm4hMTtjb25zdCBpPWUucXVlcnlTZWxlY3RvckFsbCgiLiIrU3IuRk9DVVNfTUFOQUdFRF9DTEFTUyk7aWYoIWkubGVuZ3RoKXJldHVybiExO2ZvcihsZXQgZT0wO2U8aS5sZW5ndGg7ZSsrKWlmKGlbZV0uY29udGFpbnModCkpcmV0dXJuITA7cmV0dXJuITF9ZmluZFRhYmJhYmxlUGFyZW50KGUsdD01KXtsZXQgaT0wO2Zvcig7ZSYmbnVsbD09PUZpKGUpJiYrK2k8PXQ7KWU9ZS5wYXJlbnRFbGVtZW50O3JldHVybiBudWxsPT09RmkoZSk/bnVsbDplfWZvY3VzR3JpZFZpZXcoZSx0KXtpZih0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQ2VsbEZvY3VzIikpcmV0dXJuIHQ/dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0hlYWRlckZvY3VzIik/dGhpcy5mb2N1c05leHRHcmlkQ29yZUNvbnRhaW5lcighMCwhMCk6dGhpcy5mb2N1c0xhc3RIZWFkZXIoKTp0aGlzLmZvY3VzTmV4dEdyaWRDb3JlQ29udGFpbmVyKCExKTtjb25zdCBpPXQ/dGhpcy5yb3dQb3NpdGlvblV0aWxzLmdldExhc3RSb3coKTp0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuZ2V0Rmlyc3RSb3coKTtpZighaSlyZXR1cm4hMTtjb25zdHtyb3dJbmRleDpzLHJvd1Bpbm5lZDpyfT1pLG89dGhpcy5nZXRGb2N1c2VkSGVhZGVyKCk7aWYoIWUmJm8mJihlPW8uY29sdW1uKSxudWxsPT1zfHwhZSlyZXR1cm4hMTtpZih0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmVuc3VyZUNlbGxWaXNpYmxlKHtyb3dJbmRleDpzLGNvbHVtbjplLHJvd1Bpbm5lZDpyfSksdGhpcy5zZXRGb2N1c2VkQ2VsbCh7cm93SW5kZXg6cyxjb2x1bW46ZSxyb3dQaW5uZWQ6dyhyKSxmb3JjZUJyb3dzZXJGb2N1czohMH0pLHRoaXMucmFuZ2VTZXJ2aWNlKXtjb25zdCB0PXtyb3dJbmRleDpzLHJvd1Bpbm5lZDpyLGNvbHVtbjplfTt0aGlzLnJhbmdlU2VydmljZS5zZXRSYW5nZVRvQ2VsbCh0KX1yZXR1cm4hMH1mb2N1c05leHRHcmlkQ29yZUNvbnRhaW5lcihlLHQ9ITEpe3JldHVybiEodHx8IXRoaXMuZ3JpZEN0cmwuZm9jdXNOZXh0SW5uZXJDb250YWluZXIoZSkpfHwoKHR8fCFlJiYhdGhpcy5ncmlkQ3RybC5pc0RldGFpbEdyaWQoKSkmJnRoaXMuZ3JpZEN0cmwuZm9yY2VGb2N1c091dE9mQ29udGFpbmVyKGUpLCExKX1mb2N1c0FkdmFuY2VkRmlsdGVyKGUpe3JldHVybiB0aGlzLmFkdmFuY2VkRmlsdGVyRm9jdXNDb2x1bW49bnVsbD09ZT92b2lkIDA6ZS5jb2x1bW4sdGhpcy5hZHZhbmNlZEZpbHRlclNlcnZpY2UuZ2V0Q3RybCgpLmZvY3VzSGVhZGVyQ29tcCgpfWZvY3VzTmV4dEZyb21BZHZhbmNlZEZpbHRlcihlLHQpe3ZhciBpLHM7Y29uc3Qgcj1udWxsIT09KGk9dD92b2lkIDA6dGhpcy5hZHZhbmNlZEZpbHRlckZvY3VzQ29sdW1uKSYmdm9pZCAwIT09aT9pOm51bGw9PT0ocz10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKSl8fHZvaWQgMD09PXM/dm9pZCAwOnNbMF07cmV0dXJuIGU/dGhpcy5mb2N1c0hlYWRlclBvc2l0aW9uKHtoZWFkZXJQb3NpdGlvbjp7Y29sdW1uOnIsaGVhZGVyUm93SW5kZXg6dGhpcy5oZWFkZXJOYXZpZ2F0aW9uU2VydmljZS5nZXRIZWFkZXJSb3dDb3VudCgpLTF9fSk6dGhpcy5mb2N1c0dyaWRWaWV3KHIpfWNsZWFyQWR2YW5jZWRGaWx0ZXJDb2x1bW4oKXt0aGlzLmFkdmFuY2VkRmlsdGVyRm9jdXNDb2x1bW49dm9pZCAwfX07aWgua2V5Ym9hcmRNb2RlQWN0aXZlPSExLGloLmluc3RhbmNlQ291bnQ9MCx0aChbY2UoImVHcmlkRGl2IildLGloLnByb3RvdHlwZSwiZUdyaWREaXYiLHZvaWQgMCksdGgoW2NlKCJjb2x1bW5Nb2RlbCIpXSxpaC5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLHRoKFtjZSgiaGVhZGVyTmF2aWdhdGlvblNlcnZpY2UiKV0saWgucHJvdG90eXBlLCJoZWFkZXJOYXZpZ2F0aW9uU2VydmljZSIsdm9pZCAwKSx0aChbY2UoImhlYWRlclBvc2l0aW9uVXRpbHMiKV0saWgucHJvdG90eXBlLCJoZWFkZXJQb3NpdGlvblV0aWxzIix2b2lkIDApLHRoKFtjZSgicm93UmVuZGVyZXIiKV0saWgucHJvdG90eXBlLCJyb3dSZW5kZXJlciIsdm9pZCAwKSx0aChbY2UoInJvd1Bvc2l0aW9uVXRpbHMiKV0saWgucHJvdG90eXBlLCJyb3dQb3NpdGlvblV0aWxzIix2b2lkIDApLHRoKFtjZSgiY2VsbFBvc2l0aW9uVXRpbHMiKV0saWgucHJvdG90eXBlLCJjZWxsUG9zaXRpb25VdGlscyIsdm9pZCAwKSx0aChbaGUoInJhbmdlU2VydmljZSIpXSxpaC5wcm90b3R5cGUsInJhbmdlU2VydmljZSIsdm9pZCAwKSx0aChbY2UoIm5hdmlnYXRpb25TZXJ2aWNlIildLGloLnByb3RvdHlwZSwibmF2aWdhdGlvblNlcnZpY2UiLHZvaWQgMCksdGgoW2NlKCJjdHJsc1NlcnZpY2UiKV0saWgucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksdGgoW2NlKCJmaWx0ZXJNYW5hZ2VyIildLGloLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSx0aChbaGUoImFkdmFuY2VkRmlsdGVyU2VydmljZSIpXSxpaC5wcm90b3R5cGUsImFkdmFuY2VkRmlsdGVyU2VydmljZSIsdm9pZCAwKSx0aChbYWVdLGloLnByb3RvdHlwZSwiaW5pdCIsbnVsbCksaWg9ZWg9dGgoW2RlKCJmb2N1c1NlcnZpY2UiKV0saWgpO3ZhciBzaD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgcmg9Y2xhc3MgZXh0ZW5kcyBpdHtzZXRNb3VzZU92ZXIoZSl7dGhpcy5zZWxlY3RlZENvbHVtbnM9ZTtjb25zdCB0PXt0eXBlOmx0LkVWRU5UX0NPTFVNTl9IT1ZFUl9DSEFOR0VEfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfWNsZWFyTW91c2VPdmVyKCl7dGhpcy5zZWxlY3RlZENvbHVtbnM9bnVsbDtjb25zdCBlPXt0eXBlOmx0LkVWRU5UX0NPTFVNTl9IT1ZFUl9DSEFOR0VEfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfWlzSG92ZXJlZChlKXtyZXR1cm4hIXRoaXMuc2VsZWN0ZWRDb2x1bW5zJiZ0aGlzLnNlbGVjdGVkQ29sdW1ucy5pbmRleE9mKGUpPj0wfX07cmg9c2goW2RlKCJjb2x1bW5Ib3ZlclNlcnZpY2UiKV0scmgpO3ZhciBvaD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgbmg9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5leGVjdXRlTmV4dEZ1bmNzPVtdLHRoaXMuZXhlY3V0ZUxhdGVyRnVuY3M9W10sdGhpcy5hY3RpdmU9ITEsdGhpcy5zdXBwcmVzc0FuaW1hdGlvbj0hMSx0aGlzLmFuaW1hdGlvblRocmVhZENvdW50PTB9cG9zdENvbnN0cnVjdCgpe3RoaXMuY3RybHNTZXJ2aWNlLndoZW5SZWFkeShlPT50aGlzLmdyaWRCb2R5Q3RybD1lLmdyaWRCb2R5Q3RybCl9aXNBY3RpdmUoKXtyZXR1cm4gdGhpcy5hY3RpdmUmJiF0aGlzLnN1cHByZXNzQW5pbWF0aW9ufXNldFN1cHByZXNzQW5pbWF0aW9uKGUpe3RoaXMuc3VwcHJlc3NBbmltYXRpb249ZX1zdGFydCgpe3RoaXMuYWN0aXZlfHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQ29sdW1uTW92ZUFuaW1hdGlvbiIpfHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpfHwodGhpcy5lbnN1cmVBbmltYXRpb25Dc3NDbGFzc1ByZXNlbnQoKSx0aGlzLmFjdGl2ZT0hMCl9ZmluaXNoKCl7dGhpcy5hY3RpdmUmJnRoaXMuZmx1c2goKCk9Pnt0aGlzLmFjdGl2ZT0hMX0pfWV4ZWN1dGVOZXh0Vk1UdXJuKGUpe3RoaXMuYWN0aXZlP3RoaXMuZXhlY3V0ZU5leHRGdW5jcy5wdXNoKGUpOmUoKX1leGVjdXRlTGF0ZXJWTVR1cm4oZSl7dGhpcy5hY3RpdmU/dGhpcy5leGVjdXRlTGF0ZXJGdW5jcy5wdXNoKGUpOmUoKX1lbnN1cmVBbmltYXRpb25Dc3NDbGFzc1ByZXNlbnQoKXt0aGlzLmFuaW1hdGlvblRocmVhZENvdW50Kys7Y29uc3QgZT10aGlzLmFuaW1hdGlvblRocmVhZENvdW50O3RoaXMuZ3JpZEJvZHlDdHJsLnNldENvbHVtbk1vdmluZ0NzcyghMCksdGhpcy5leGVjdXRlTGF0ZXJGdW5jcy5wdXNoKCgpPT57dGhpcy5hbmltYXRpb25UaHJlYWRDb3VudD09PWUmJnRoaXMuZ3JpZEJvZHlDdHJsLnNldENvbHVtbk1vdmluZ0NzcyghMSl9KX1mbHVzaChlKXtpZigwPT09dGhpcy5leGVjdXRlTmV4dEZ1bmNzLmxlbmd0aCYmMD09PXRoaXMuZXhlY3V0ZUxhdGVyRnVuY3MubGVuZ3RoKXJldHVybiB2b2lkIGUoKTtjb25zdCB0PWU9Pntmb3IoO2UubGVuZ3RoOyl7Y29uc3QgdD1lLnBvcCgpO3QmJnQoKX19O3RoaXMuZ2V0RnJhbWV3b3JrT3ZlcnJpZGVzKCkud3JhcEluY29taW5nKCgpPT57d2luZG93LnNldFRpbWVvdXQoKCk9PnQodGhpcy5leGVjdXRlTmV4dEZ1bmNzKSwwKSx3aW5kb3cuc2V0VGltZW91dCgoKT0+e3QodGhpcy5leGVjdXRlTGF0ZXJGdW5jcyksZSgpfSwyMDApfSl9fTtvaChbY2UoImN0cmxzU2VydmljZSIpXSxuaC5wcm90b3R5cGUsImN0cmxzU2VydmljZSIsdm9pZCAwKSxvaChbYWVdLG5oLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksbmg9b2goW2RlKCJjb2x1bW5BbmltYXRpb25TZXJ2aWNlIildLG5oKTt2YXIgYWg9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IGxoPWNsYXNzIGV4dGVuZHMgaXR7cG9zdENvbnN0cnVjdCgpe3RoaXMuY3RybHNTZXJ2aWNlLndoZW5SZWFkeShlPT57dGhpcy5jZW50ZXJSb3dDb250YWluZXJDb249ZS5jZW50ZXJSb3dDb250YWluZXJDdHJsLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0JPRFlfSEVJR0hUX0NIQU5HRUQsdGhpcy5jaGVja1BhZ2VTaXplLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1NDUk9MTF9WSVNJQklMSVRZX0NIQU5HRUQsdGhpcy5jaGVja1BhZ2VTaXplLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoInBhZ2luYXRpb25BdXRvUGFnZVNpemUiLHRoaXMub25QYWdpbmF0aW9uQXV0b1NpemVDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuY2hlY2tQYWdlU2l6ZSgpfSl9bm90QWN0aXZlKCl7cmV0dXJuIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicGFnaW5hdGlvbkF1dG9QYWdlU2l6ZSIpfHxudWxsPT10aGlzLmNlbnRlclJvd0NvbnRhaW5lckNvbn1vblBhZ2luYXRpb25BdXRvU2l6ZUNoYW5nZWQoKXt0aGlzLm5vdEFjdGl2ZSgpP3RoaXMucGFnaW5hdGlvblByb3h5LnVuc2V0QXV0b0NhbGN1bGF0ZWRQYWdlU2l6ZSgpOnRoaXMuY2hlY2tQYWdlU2l6ZSgpfWNoZWNrUGFnZVNpemUoKXtpZih0aGlzLm5vdEFjdGl2ZSgpKXJldHVybjtjb25zdCBlPXRoaXMuY2VudGVyUm93Q29udGFpbmVyQ29uLmdldFZpZXdwb3J0U2l6ZUZlYXR1cmUoKS5nZXRCb2R5SGVpZ2h0KCk7aWYoZT4wKXtjb25zdCB0PSgpPT57Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRSb3dIZWlnaHRBc051bWJlcigpLGk9TWF0aC5mbG9vcihlL3QpO3RoaXMucGFnaW5hdGlvblByb3h5LnNldFBhZ2VTaXplKGksImF1dG9DYWxjdWxhdGVkIil9O3RoaXMuaXNCb2R5UmVuZGVyZWQ/USgoKT0+dCgpLDUwKSgpOih0KCksdGhpcy5pc0JvZHlSZW5kZXJlZD0hMCl9ZWxzZSB0aGlzLmlzQm9keVJlbmRlcmVkPSExfX07YWgoW2NlKCJjdHJsc1NlcnZpY2UiKV0sbGgucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksYWgoW2NlKCJwYWdpbmF0aW9uUHJveHkiKV0sbGgucHJvdG90eXBlLCJwYWdpbmF0aW9uUHJveHkiLHZvaWQgMCksYWgoW2FlXSxsaC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLGxoPWFoKFtkZSgicGFnaW5hdGlvbkF1dG9QYWdlU2l6ZVNlcnZpY2UiKV0sbGgpO3ZhciBkaD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgY2g9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jYWNoZVZlcnNpb249MH1pbml0KCl7dGhpcy5hY3RpdmU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ2YWx1ZUNhY2hlIiksdGhpcy5uZXZlckV4cGlyZXM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ2YWx1ZUNhY2hlTmV2ZXJFeHBpcmVzIil9b25EYXRhQ2hhbmdlZCgpe3RoaXMubmV2ZXJFeHBpcmVzfHx0aGlzLmV4cGlyZSgpfWV4cGlyZSgpe3RoaXMuY2FjaGVWZXJzaW9uKyt9c2V0VmFsdWUoZSx0LGkpe3RoaXMuYWN0aXZlJiYoZS5fX2NhY2hlVmVyc2lvbiE9PXRoaXMuY2FjaGVWZXJzaW9uJiYoZS5fX2NhY2hlVmVyc2lvbj10aGlzLmNhY2hlVmVyc2lvbixlLl9fY2FjaGVEYXRhPXt9KSxlLl9fY2FjaGVEYXRhW3RdPWkpfWdldFZhbHVlKGUsdCl7aWYodGhpcy5hY3RpdmUmJmUuX19jYWNoZVZlcnNpb249PT10aGlzLmNhY2hlVmVyc2lvbilyZXR1cm4gZS5fX2NhY2hlRGF0YVt0XX19O2RoKFthZV0sY2gucHJvdG90eXBlLCJpbml0IixudWxsKSxjaD1kaChbZGUoInZhbHVlQ2FjaGUiKV0sY2gpO3ZhciBoaD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgdWg9Y2xhc3MgZXh0ZW5kcyBpdHtpbml0KCl7ImNsaWVudFNpZGUiPT09dGhpcy5yb3dNb2RlbC5nZXRUeXBlKCkmJih0aGlzLmNsaWVudFNpZGVSb3dNb2RlbD10aGlzLnJvd01vZGVsKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DRUxMX1ZBTFVFX0NIQU5HRUQsdGhpcy5vbkNlbGxWYWx1ZUNoYW5nZWQuYmluZCh0aGlzKSl9b25DZWxsVmFsdWVDaGFuZ2VkKGUpeyJwYXN0ZSIhPT1lLnNvdXJjZSYmdGhpcy5kb0NoYW5nZURldGVjdGlvbihlLm5vZGUsZS5jb2x1bW4pfWRvQ2hhbmdlRGV0ZWN0aW9uKGUsdCl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0NoYW5nZURldGVjdGlvbiIpKXJldHVybjtjb25zdCBpPVtlXTtpZih0aGlzLmNsaWVudFNpZGVSb3dNb2RlbCYmIWUuaXNSb3dQaW5uZWQoKSl7Y29uc3Qgcz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImFnZ3JlZ2F0ZU9ubHlDaGFuZ2VkQ29sdW1ucyIpLHI9bmV3IE5kKHMsdGhpcy5jbGllbnRTaWRlUm93TW9kZWwuZ2V0Um9vdE5vZGUoKSk7ci5hZGRQYXJlbnROb2RlKGUucGFyZW50LFt0XSksdGhpcy5jbGllbnRTaWRlUm93TW9kZWwuZG9BZ2dyZWdhdGUociksci5mb3JFYWNoQ2hhbmdlZE5vZGVEZXB0aEZpcnN0KGU9PntpLnB1c2goZSl9KX10aGlzLnJvd1JlbmRlcmVyLnJlZnJlc2hDZWxscyh7cm93Tm9kZXM6aX0pfX07aGgoW2NlKCJyb3dNb2RlbCIpXSx1aC5wcm90b3R5cGUsInJvd01vZGVsIix2b2lkIDApLGhoKFtjZSgicm93UmVuZGVyZXIiKV0sdWgucHJvdG90eXBlLCJyb3dSZW5kZXJlciIsdm9pZCAwKSxoaChbYWVdLHVoLnByb3RvdHlwZSwiaW5pdCIsbnVsbCksdWg9aGgoW2RlKCJjaGFuZ2VEZXRlY3Rpb25TZXJ2aWNlIildLHVoKTt2YXIgcGg9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IGdoPWNsYXNzIGV4dGVuZHMgaXR7YWRhcHRGdW5jdGlvbihlLHQpe2NvbnN0IGk9dGhpcy5jb21wb25lbnRNZXRhZGF0YVByb3ZpZGVyLnJldHJpZXZlKGUpO3JldHVybiBpJiZpLmZ1bmN0aW9uQWRhcHRlcj9pLmZ1bmN0aW9uQWRhcHRlcih0KTpudWxsfWFkYXB0Q2VsbFJlbmRlcmVyRnVuY3Rpb24oZSl7cmV0dXJuIGNsYXNze3JlZnJlc2goZSl7cmV0dXJuITF9Z2V0R3VpKCl7cmV0dXJuIHRoaXMuZUd1aX1pbml0KHQpe2NvbnN0IGk9ZSh0KSxzPXR5cGVvZiBpO3RoaXMuZUd1aT0ic3RyaW5nIiE9PXMmJiJudW1iZXIiIT09cyYmImJvb2xlYW4iIT09cz9udWxsIT1pP2k6eXMoIjxzcGFuPjwvc3Bhbj4iKTp5cygiPHNwYW4+IitpKyI8L3NwYW4+Iil9fX1kb2VzSW1wbGVtZW50SUNvbXBvbmVudChlKXtyZXR1cm4hIWUmJihlLnByb3RvdHlwZSYmImdldEd1aSJpbiBlLnByb3RvdHlwZSl9fTtwaChbY2UoImNvbXBvbmVudE1ldGFkYXRhUHJvdmlkZXIiKV0sZ2gucHJvdG90eXBlLCJjb21wb25lbnRNZXRhZGF0YVByb3ZpZGVyIix2b2lkIDApLGdoPXBoKFtkZSgiYWdDb21wb25lbnRVdGlscyIpXSxnaCk7dmFyIG1oPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBmaD1jbGFzcyBleHRlbmRzIGl0e3Bvc3RDb25zdHJ1Y3QoKXt0aGlzLmNvbXBvbmVudE1ldGFEYXRhPXtkYXRlQ29tcG9uZW50OnttYW5kYXRvcnlNZXRob2RMaXN0OlsiZ2V0RGF0ZSIsInNldERhdGUiXSxvcHRpb25hbE1ldGhvZExpc3Q6WyJhZnRlckd1aUF0dGFjaGVkIiwic2V0SW5wdXRQbGFjZWhvbGRlciIsInNldElucHV0QXJpYUxhYmVsIiwic2V0RGlzYWJsZWQiLCJvblBhcmFtc1VwZGF0ZWQiLCJyZWZyZXNoIl19LGRldGFpbENlbGxSZW5kZXJlcjp7bWFuZGF0b3J5TWV0aG9kTGlzdDpbXSxvcHRpb25hbE1ldGhvZExpc3Q6WyJyZWZyZXNoIl0sZnVuY3Rpb25BZGFwdGVyOnRoaXMuYWdDb21wb25lbnRVdGlscy5hZGFwdENlbGxSZW5kZXJlckZ1bmN0aW9uLmJpbmQodGhpcy5hZ0NvbXBvbmVudFV0aWxzKX0saGVhZGVyQ29tcG9uZW50OnttYW5kYXRvcnlNZXRob2RMaXN0OltdLG9wdGlvbmFsTWV0aG9kTGlzdDpbInJlZnJlc2giXX0saGVhZGVyR3JvdXBDb21wb25lbnQ6e21hbmRhdG9yeU1ldGhvZExpc3Q6W10sb3B0aW9uYWxNZXRob2RMaXN0OltdfSxsb2FkaW5nQ2VsbFJlbmRlcmVyOnttYW5kYXRvcnlNZXRob2RMaXN0OltdLG9wdGlvbmFsTWV0aG9kTGlzdDpbXX0sbG9hZGluZ092ZXJsYXlDb21wb25lbnQ6e21hbmRhdG9yeU1ldGhvZExpc3Q6W10sb3B0aW9uYWxNZXRob2RMaXN0OlsicmVmcmVzaCJdfSxub1Jvd3NPdmVybGF5Q29tcG9uZW50OnttYW5kYXRvcnlNZXRob2RMaXN0OltdLG9wdGlvbmFsTWV0aG9kTGlzdDpbInJlZnJlc2giXX0sZmxvYXRpbmdGaWx0ZXJDb21wb25lbnQ6e21hbmRhdG9yeU1ldGhvZExpc3Q6WyJvblBhcmVudE1vZGVsQ2hhbmdlZCJdLG9wdGlvbmFsTWV0aG9kTGlzdDpbImFmdGVyR3VpQXR0YWNoZWQiLCJvblBhcmFtc1VwZGF0ZWQiLCJyZWZyZXNoIl19LGNlbGxSZW5kZXJlcjp7bWFuZGF0b3J5TWV0aG9kTGlzdDpbXSxvcHRpb25hbE1ldGhvZExpc3Q6WyJyZWZyZXNoIiwiYWZ0ZXJHdWlBdHRhY2hlZCJdLGZ1bmN0aW9uQWRhcHRlcjp0aGlzLmFnQ29tcG9uZW50VXRpbHMuYWRhcHRDZWxsUmVuZGVyZXJGdW5jdGlvbi5iaW5kKHRoaXMuYWdDb21wb25lbnRVdGlscyl9LGNlbGxFZGl0b3I6e21hbmRhdG9yeU1ldGhvZExpc3Q6WyJnZXRWYWx1ZSJdLG9wdGlvbmFsTWV0aG9kTGlzdDpbImlzUG9wdXAiLCJpc0NhbmNlbEJlZm9yZVN0YXJ0IiwiaXNDYW5jZWxBZnRlckVuZCIsImdldFBvcHVwUG9zaXRpb24iLCJmb2N1c0luIiwiZm9jdXNPdXQiLCJhZnRlckd1aUF0dGFjaGVkIiwicmVmcmVzaCJdfSxpbm5lclJlbmRlcmVyOnttYW5kYXRvcnlNZXRob2RMaXN0OltdLG9wdGlvbmFsTWV0aG9kTGlzdDpbImFmdGVyR3VpQXR0YWNoZWQiXSxmdW5jdGlvbkFkYXB0ZXI6dGhpcy5hZ0NvbXBvbmVudFV0aWxzLmFkYXB0Q2VsbFJlbmRlcmVyRnVuY3Rpb24uYmluZCh0aGlzLmFnQ29tcG9uZW50VXRpbHMpfSxmdWxsV2lkdGhDZWxsUmVuZGVyZXI6e21hbmRhdG9yeU1ldGhvZExpc3Q6W10sb3B0aW9uYWxNZXRob2RMaXN0OlsicmVmcmVzaCIsImFmdGVyR3VpQXR0YWNoZWQiXSxmdW5jdGlvbkFkYXB0ZXI6dGhpcy5hZ0NvbXBvbmVudFV0aWxzLmFkYXB0Q2VsbFJlbmRlcmVyRnVuY3Rpb24uYmluZCh0aGlzLmFnQ29tcG9uZW50VXRpbHMpfSxncm91cFJvd1JlbmRlcmVyOnttYW5kYXRvcnlNZXRob2RMaXN0OltdLG9wdGlvbmFsTWV0aG9kTGlzdDpbImFmdGVyR3VpQXR0YWNoZWQiXSxmdW5jdGlvbkFkYXB0ZXI6dGhpcy5hZ0NvbXBvbmVudFV0aWxzLmFkYXB0Q2VsbFJlbmRlcmVyRnVuY3Rpb24uYmluZCh0aGlzLmFnQ29tcG9uZW50VXRpbHMpfSxmaWx0ZXI6e21hbmRhdG9yeU1ldGhvZExpc3Q6WyJpc0ZpbHRlckFjdGl2ZSIsImRvZXNGaWx0ZXJQYXNzIiwiZ2V0TW9kZWwiLCJzZXRNb2RlbCJdLG9wdGlvbmFsTWV0aG9kTGlzdDpbImFmdGVyR3VpQXR0YWNoZWQiLCJhZnRlckd1aURldGFjaGVkIiwib25OZXdSb3dzTG9hZGVkIiwiZ2V0TW9kZWxBc1N0cmluZyIsIm9uRmxvYXRpbmdGaWx0ZXJDaGFuZ2VkIiwib25BbnlGaWx0ZXJDaGFuZ2VkIiwicmVmcmVzaCJdfSxzdGF0dXNQYW5lbDp7bWFuZGF0b3J5TWV0aG9kTGlzdDpbXSxvcHRpb25hbE1ldGhvZExpc3Q6WyJyZWZyZXNoIl19LHRvb2xQYW5lbDp7bWFuZGF0b3J5TWV0aG9kTGlzdDpbXSxvcHRpb25hbE1ldGhvZExpc3Q6WyJyZWZyZXNoIiwiZ2V0U3RhdGUiXX0sdG9vbHRpcENvbXBvbmVudDp7bWFuZGF0b3J5TWV0aG9kTGlzdDpbXSxvcHRpb25hbE1ldGhvZExpc3Q6W119LG1lbnVJdGVtOnttYW5kYXRvcnlNZXRob2RMaXN0OltdLG9wdGlvbmFsTWV0aG9kTGlzdDpbInNldEFjdGl2ZSIsInNlbGVjdCIsInNldEV4cGFuZGVkIiwiY29uZmlndXJlRGVmYXVsdHMiXX19fXJldHJpZXZlKGUpe3JldHVybiB0aGlzLmNvbXBvbmVudE1ldGFEYXRhW2VdfX07bWgoW2NlKCJhZ0NvbXBvbmVudFV0aWxzIildLGZoLnByb3RvdHlwZSwiYWdDb21wb25lbnRVdGlscyIsdm9pZCAwKSxtaChbYWVdLGZoLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksZmg9bWgoW2RlKCJjb21wb25lbnRNZXRhZGF0YVByb3ZpZGVyIildLGZoKTt2YXIgdmg9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y29uc3QgQ2g9eyJhZy10aGVtZS1jdXN0b20iOntoZWFkZXJIZWlnaHQ6MjUsaGVhZGVyQ2VsbE1pbldpZHRoOjI0LGxpc3RJdGVtSGVpZ2h0OjIwLHJvd0hlaWdodDoyNSxjaGFydE1lbnVQYW5lbFdpZHRoOjIyMH0sImFnLXRoZW1lLW1hdGVyaWFsIjp7aGVhZGVySGVpZ2h0OjU2LGhlYWRlckNlbGxNaW5XaWR0aDo0OCxsaXN0SXRlbUhlaWdodDozMixyb3dIZWlnaHQ6NDgsY2hhcnRNZW51UGFuZWxXaWR0aDoyNDB9LCJhZy10aGVtZS1iYWxoYW0iOntoZWFkZXJIZWlnaHQ6MzIsaGVhZGVyQ2VsbE1pbldpZHRoOjI0LGxpc3RJdGVtSGVpZ2h0OjI0LHJvd0hlaWdodDoyOCxjaGFydE1lbnVQYW5lbFdpZHRoOjIyMH0sImFnLXRoZW1lLWFscGluZSI6e2hlYWRlckhlaWdodDo0OCxoZWFkZXJDZWxsTWluV2lkdGg6MzYsbGlzdEl0ZW1IZWlnaHQ6MjQscm93SGVpZ2h0OjQyLGNoYXJ0TWVudVBhbmVsV2lkdGg6MjQwfSwiYWctdGhlbWUtcXVhcnR6Ijp7aGVhZGVySGVpZ2h0OjQ4LGhlYWRlckNlbGxNaW5XaWR0aDozNixsaXN0SXRlbUhlaWdodDoyNCxyb3dIZWlnaHQ6NDIsY2hhcnRNZW51UGFuZWxXaWR0aDoyNjB9fSx5aD17aGVhZGVySGVpZ2h0OlsiYWctaGVhZGVyLXJvdyJdLGhlYWRlckNlbGxNaW5XaWR0aDpbImFnLWhlYWRlci1jZWxsIl0sbGlzdEl0ZW1IZWlnaHQ6WyJhZy12aXJ0dWFsLWxpc3QtaXRlbSJdLHJvd0hlaWdodDpbImFnLXJvdyJdLGNoYXJ0TWVudVBhbmVsV2lkdGg6WyJhZy1jaGFydC1kb2NrZWQtY29udGFpbmVyIl19O2xldCBTaD1jbGFzcyBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNhbGN1bGF0ZWRTaXplcz17fX1wb3N0Q29uc3RydWN0KCl7dmFyIGU7Y29uc3QgdD1udWxsIT09KGU9dGhpcy5nZXRUaGVtZSgpLmVsKSYmdm9pZCAwIT09ZT9lOnRoaXMuZUdyaWREaXY7dGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigicm93SGVpZ2h0IiwoKT0+dGhpcy5yZWZyZXNoUm93SGVpZ2h0VmFyaWFibGUoKSksdGhpcy5tdXRhdGlvbk9ic2VydmVyPW5ldyBNdXRhdGlvbk9ic2VydmVyKCgpPT57dGhpcy5jYWxjdWxhdGVkU2l6ZXM9e30sdGhpcy5maXJlR3JpZFN0eWxlc0NoYW5nZWRFdmVudCgpfSksdGhpcy5tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodHx8dGhpcy5lR3JpZERpdix7YXR0cmlidXRlczohMCxhdHRyaWJ1dGVGaWx0ZXI6WyJjbGFzcyJdfSl9ZmlyZUdyaWRTdHlsZXNDaGFuZ2VkRXZlbnQoKXtjb25zdCBlPXt0eXBlOmx0LkVWRU5UX0dSSURfU1RZTEVTX0NIQU5HRUR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9Z2V0U2Fzc1ZhcmlhYmxlKGUpe2NvbnN0e3RoZW1lRmFtaWx5OnQsZWw6aX09dGhpcy5nZXRUaGVtZSgpO2lmKCF0fHwwIT09dC5pbmRleE9mKCJhZy10aGVtZSIpKXJldHVybjt0aGlzLmNhbGN1bGF0ZWRTaXplc3x8KHRoaXMuY2FsY3VsYXRlZFNpemVzPXt9KSx0aGlzLmNhbGN1bGF0ZWRTaXplc1t0XXx8KHRoaXMuY2FsY3VsYXRlZFNpemVzW3RdPXt9KTtjb25zdCBzPXRoaXMuY2FsY3VsYXRlZFNpemVzW3RdW2VdO3JldHVybiBudWxsIT1zP3M6KHRoaXMuY2FsY3VsYXRlZFNpemVzW3RdW2VdPXRoaXMuY2FsY3VsYXRlVmFsdWVGb3JTYXNzUHJvcGVydHkoZSx0LGkpLHRoaXMuY2FsY3VsYXRlZFNpemVzW3RdW2VdKX1jYWxjdWxhdGVWYWx1ZUZvclNhc3NQcm9wZXJ0eShlLHQsaSl7Y29uc3Qgcz0iYWctdGhlbWUtIisodC5tYXRjaCgibWF0ZXJpYWwiKT8ibWF0ZXJpYWwiOnQubWF0Y2goImJhbGhhbSIpPyJiYWxoYW0iOnQubWF0Y2goImFscGluZSIpPyJhbHBpbmUiOiJjdXN0b20iKSxyPUNoW3NdW2VdLG89dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKTtpZihpfHwoaT10aGlzLmVHcmlkRGl2KSwheWhbZV0pcmV0dXJuIHI7Y29uc3Qgbj15aFtlXSxhPW8uY3JlYXRlRWxlbWVudCgiZGl2IiksbD1BcnJheS5mcm9tKGkuY2xhc3NMaXN0KTthLmNsYXNzTGlzdC5hZGQodCwuLi5sKSxhLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Y29uc3QgZD1uLnJlZHVjZSgoZSx0KT0+e2NvbnN0IGk9by5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gaS5zdHlsZS5wb3NpdGlvbj0ic3RhdGljIixpLmNsYXNzTGlzdC5hZGQodCksZS5hcHBlbmRDaGlsZChpKSxpfSxhKTtsZXQgYz0wO2lmKG8uYm9keSl7by5ib2R5LmFwcGVuZENoaWxkKGEpO2NvbnN0IHQ9LTEhPT1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiaGVpZ2h0Iik/ImhlaWdodCI6IndpZHRoIjtjPXBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGQpW3RdLDEwKSxvLmJvZHkucmVtb3ZlQ2hpbGQoYSl9cmV0dXJuIGN8fHJ9aXNUaGVtZURhcmsoKXtjb25zdHt0aGVtZTplfT10aGlzLmdldFRoZW1lKCk7cmV0dXJuISFlJiZlLmluZGV4T2YoImRhcmsiKT49MH1jaGFydE1lbnVQYW5lbFdpZHRoKCl7cmV0dXJuIHRoaXMuZ2V0U2Fzc1ZhcmlhYmxlKCJjaGFydE1lbnVQYW5lbFdpZHRoIil9Z2V0VGhlbWUoKXtjb25zdCBlPS9cYmFnLShtYXRlcmlhbHwoPzp0aGVtZS0oW1x3XC1dKikpKVxiL2c7bGV0IHQ9dGhpcy5lR3JpZERpdixpPW51bGwscz1bXTtmb3IoO3Q7KXtpZihpPWUuZXhlYyh0LmNsYXNzTmFtZSksaSl7Y29uc3QgaT10LmNsYXNzTmFtZS5tYXRjaChlKTtpJiYocz1pKTticmVha310PXQucGFyZW50RWxlbWVudHx8dm9pZCAwfWlmKCFpKXJldHVybnthbGxUaGVtZXM6c307Y29uc3Qgcj1pWzBdO3JldHVybnt0aGVtZTpyLGVsOnQsdGhlbWVGYW1pbHk6ci5yZXBsYWNlKC8tZGFyayQvLCIiKSxhbGxUaGVtZXM6c319Z2V0RnJvbVRoZW1lKGUsdCl7dmFyIGk7cmV0dXJuIG51bGwhPT0oaT10aGlzLmdldFNhc3NWYXJpYWJsZSh0KSkmJnZvaWQgMCE9PWk/aTplfWdldERlZmF1bHRSb3dIZWlnaHQoKXtyZXR1cm4gdGhpcy5nZXRGcm9tVGhlbWUoMjUsInJvd0hlaWdodCIpfWdldExpc3RJdGVtSGVpZ2h0KCl7cmV0dXJuIHRoaXMuZ2V0RnJvbVRoZW1lKDIwLCJsaXN0SXRlbUhlaWdodCIpfXJlZnJlc2hSb3dIZWlnaHRWYXJpYWJsZSgpe2NvbnN0IGU9dGhpcy5lR3JpZERpdi5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCItLWFnLWxpbmUtaGVpZ2h0IikudHJpbSgpLHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJyb3dIZWlnaHQiKTtpZihudWxsPT10fHxpc05hTih0KXx8IWlzRmluaXRlKHQpKXJldHVybiBudWxsIT09ZSYmdGhpcy5lR3JpZERpdi5zdHlsZS5zZXRQcm9wZXJ0eSgiLS1hZy1saW5lLWhlaWdodCIsbnVsbCksLTE7Y29uc3QgaT10KyJweCI7cmV0dXJuIGUhPWk/KHRoaXMuZUdyaWREaXYuc3R5bGUuc2V0UHJvcGVydHkoIi0tYWctbGluZS1oZWlnaHQiLGkpLHQpOiIiIT1lP3BhcnNlRmxvYXQoZSk6LTF9Z2V0TWluQ29sV2lkdGgoKXtjb25zdCBlPXRoaXMuZ2V0RnJvbVRoZW1lKG51bGwsImhlYWRlckNlbGxNaW5XaWR0aCIpO3JldHVybiBiKGUpP01hdGgubWF4KGUsMTApOjEwfWRlc3Ryb3koKXt0aGlzLmNhbGN1bGF0ZWRTaXplcz1udWxsLHRoaXMubXV0YXRpb25PYnNlcnZlciYmdGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKSxzdXBlci5kZXN0cm95KCl9fTt2aChbY2UoImVHcmlkRGl2IildLFNoLnByb3RvdHlwZSwiZUdyaWREaXYiLHZvaWQgMCksdmgoW2FlXSxTaC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLFNoPXZoKFtkZSgiZW52aXJvbm1lbnQiKV0sU2gpO3ZhciB3aD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufSxiaD1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3QoaSxzLGUpfX07bGV0IEVoPWNsYXNzIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuc2Nyb2xsWT0wLHRoaXMudWlCb2R5SGVpZ2h0PTB9YWdXaXJlKGUpe3RoaXMubG9nZ2VyPWUuY3JlYXRlKCJSb3dDb250YWluZXJIZWlnaHRTZXJ2aWNlIil9cG9zdENvbnN0cnVjdCgpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0JPRFlfSEVJR0hUX0NIQU5HRUQsdGhpcy51cGRhdGVPZmZzZXQuYmluZCh0aGlzKSksdGhpcy5tYXhEaXZIZWlnaHQ9SWkoKSx0aGlzLmxvZ2dlci5sb2coIm1heERpdkhlaWdodCA9ICIrdGhpcy5tYXhEaXZIZWlnaHQpfWlzU3RyZXRjaGluZygpe3JldHVybiB0aGlzLnN0cmV0Y2hpbmd9Z2V0RGl2U3RyZXRjaE9mZnNldCgpe3JldHVybiB0aGlzLmRpdlN0cmV0Y2hPZmZzZXR9dXBkYXRlT2Zmc2V0KCl7aWYoIXRoaXMuc3RyZXRjaGluZylyZXR1cm47Y29uc3QgZT10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKS5nZXRTY3JvbGxGZWF0dXJlKCkuZ2V0VlNjcm9sbFBvc2l0aW9uKCkudG9wLHQ9dGhpcy5nZXRVaUJvZHlIZWlnaHQoKTsoZSE9PXRoaXMuc2Nyb2xsWXx8dCE9PXRoaXMudWlCb2R5SGVpZ2h0KSYmKHRoaXMuc2Nyb2xsWT1lLHRoaXMudWlCb2R5SGVpZ2h0PXQsdGhpcy5jYWxjdWxhdGVPZmZzZXQoKSl9Y2FsY3VsYXRlT2Zmc2V0KCl7dGhpcy5zZXRVaUNvbnRhaW5lckhlaWdodCh0aGlzLm1heERpdkhlaWdodCksdGhpcy5waXhlbHNUb1NoYXZlPXRoaXMubW9kZWxIZWlnaHQtdGhpcy51aUNvbnRhaW5lckhlaWdodCx0aGlzLm1heFNjcm9sbFk9dGhpcy51aUNvbnRhaW5lckhlaWdodC10aGlzLnVpQm9keUhlaWdodDtjb25zdCBlPXRoaXMuc2Nyb2xsWS90aGlzLm1heFNjcm9sbFksdD1lKnRoaXMucGl4ZWxzVG9TaGF2ZTt0aGlzLmxvZ2dlci5sb2coYERpdiBTdHJldGNoIE9mZnNldCA9ICR7dH0gKCR7dGhpcy5waXhlbHNUb1NoYXZlfSAqICR7ZX0pYCksdGhpcy5zZXREaXZTdHJldGNoT2Zmc2V0KHQpfXNldFVpQ29udGFpbmVySGVpZ2h0KGUpe2UhPT10aGlzLnVpQ29udGFpbmVySGVpZ2h0JiYodGhpcy51aUNvbnRhaW5lckhlaWdodD1lLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6bHQuRVZFTlRfUk9XX0NPTlRBSU5FUl9IRUlHSFRfQ0hBTkdFRH0pKX1jbGVhck9mZnNldCgpe3RoaXMuc2V0VWlDb250YWluZXJIZWlnaHQodGhpcy5tb2RlbEhlaWdodCksdGhpcy5waXhlbHNUb1NoYXZlPTAsdGhpcy5zZXREaXZTdHJldGNoT2Zmc2V0KDApfXNldERpdlN0cmV0Y2hPZmZzZXQoZSl7Y29uc3QgdD0ibnVtYmVyIj09dHlwZW9mIGU/TWF0aC5mbG9vcihlKTpudWxsO3RoaXMuZGl2U3RyZXRjaE9mZnNldCE9PXQmJih0aGlzLmRpdlN0cmV0Y2hPZmZzZXQ9dCx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHt0eXBlOmx0LkVWRU5UX0hFSUdIVF9TQ0FMRV9DSEFOR0VEfSkpfXNldE1vZGVsSGVpZ2h0KGUpe3RoaXMubW9kZWxIZWlnaHQ9ZSx0aGlzLnN0cmV0Y2hpbmc9bnVsbCE9ZSYmdGhpcy5tYXhEaXZIZWlnaHQ+MCYmZT50aGlzLm1heERpdkhlaWdodCx0aGlzLnN0cmV0Y2hpbmc/dGhpcy5jYWxjdWxhdGVPZmZzZXQoKTp0aGlzLmNsZWFyT2Zmc2V0KCl9Z2V0VWlDb250YWluZXJIZWlnaHQoKXtyZXR1cm4gdGhpcy51aUNvbnRhaW5lckhlaWdodH1nZXRSZWFsUGl4ZWxQb3NpdGlvbihlKXtyZXR1cm4gZS10aGlzLmRpdlN0cmV0Y2hPZmZzZXR9Z2V0VWlCb2R5SGVpZ2h0KCl7Y29uc3QgZT10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKS5nZXRTY3JvbGxGZWF0dXJlKCkuZ2V0VlNjcm9sbFBvc2l0aW9uKCk7cmV0dXJuIGUuYm90dG9tLWUudG9wfWdldFNjcm9sbFBvc2l0aW9uRm9yUGl4ZWwoZSl7aWYodGhpcy5waXhlbHNUb1NoYXZlPD0wKXJldHVybiBlO2NvbnN0IHQ9ZS8odGhpcy5tb2RlbEhlaWdodC10aGlzLmdldFVpQm9keUhlaWdodCgpKTtyZXR1cm4gdGhpcy5tYXhTY3JvbGxZKnR9fTt3aChbY2UoImN0cmxzU2VydmljZSIpXSxFaC5wcm90b3R5cGUsImN0cmxzU2VydmljZSIsdm9pZCAwKSx3aChbYmgoMCxwZSgibG9nZ2VyRmFjdG9yeSIpKV0sRWgucHJvdG90eXBlLCJhZ1dpcmUiLG51bGwpLHdoKFthZV0sRWgucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxFaD13aChbZGUoInJvd0NvbnRhaW5lckhlaWdodFNlcnZpY2UiKV0sRWgpO3ZhciBSaD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgeGg9Y2xhc3MgZXh0ZW5kcyBpdHtpbml0KCl7dGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiaXNSb3dTZWxlY3RhYmxlIiwoKT0+dGhpcy51cGRhdGVTZWxlY3RhYmxlKCkpfXVwZGF0ZVNlbGVjdGFibGVBZnRlckdyb3VwaW5nKCl7dGhpcy51cGRhdGVTZWxlY3RhYmxlKCEwKX11cGRhdGVTZWxlY3RhYmxlKGU9ITEpe2NvbnN0IHQ9ISF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd1NlbGVjdGlvbiIpLGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJpc1Jvd1NlbGVjdGFibGUiKTtpZighdHx8IWkpcmV0dXJuO2NvbnN0IHM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cFNlbGVjdHNDaGlsZHJlbiIpLHI9ImNsaWVudFNpZGUiPT09dGhpcy5yb3dNb2RlbC5nZXRUeXBlKCkmJnMsbz1bXSxuPXQ9PntpZihlJiYhdC5ncm91cClyZXR1cm47aWYociYmdC5ncm91cCl7Y29uc3QgZT10LmNoaWxkcmVuQWZ0ZXJHcm91cC5zb21lKGU9PiEwPT09ZS5zZWxlY3RhYmxlKTtyZXR1cm4gdm9pZCB0LnNldFJvd1NlbGVjdGFibGUoZSwhMCl9Y29uc3Qgcz0haXx8aSh0KTt0LnNldFJvd1NlbGVjdGFibGUocywhMCksIXMmJnQuaXNTZWxlY3RlZCgpJiZvLnB1c2godCl9O2lmKHIpe2NvbnN0IGU9dGhpcy5yb3dNb2RlbDtuZXcgTmQoITEsZS5nZXRSb290Tm9kZSgpKS5mb3JFYWNoQ2hhbmdlZE5vZGVEZXB0aEZpcnN0KG4sITAsITApfWVsc2UgdGhpcy5yb3dNb2RlbC5mb3JFYWNoTm9kZShuKTtvLmxlbmd0aCYmdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNldE5vZGVzU2VsZWN0ZWQoe25vZGVzOm8sbmV3VmFsdWU6ITEsc291cmNlOiJzZWxlY3RhYmxlQ2hhbmdlZCJ9KSxyJiZ0aGlzLnNlbGVjdGlvblNlcnZpY2UgaW5zdGFuY2VvZiBGYyYmdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnVwZGF0ZUdyb3Vwc0Zyb21DaGlsZHJlblNlbGVjdGlvbnMoInNlbGVjdGFibGVDaGFuZ2VkIil9fTtSaChbY2UoInJvd01vZGVsIildLHhoLnByb3RvdHlwZSwicm93TW9kZWwiLHZvaWQgMCksUmgoW2NlKCJzZWxlY3Rpb25TZXJ2aWNlIildLHhoLnByb3RvdHlwZSwic2VsZWN0aW9uU2VydmljZSIsdm9pZCAwKSxSaChbYWVdLHhoLnByb3RvdHlwZSwiaW5pdCIsbnVsbCkseGg9UmgoW2RlKCJzZWxlY3RhYmxlU2VydmljZSIpXSx4aCk7dmFyIFRoPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIERoIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucHJldmlvdXNBbmRGaXJzdEJ1dHRvbnNEaXNhYmxlZD0hMSx0aGlzLm5leHRCdXR0b25EaXNhYmxlZD0hMSx0aGlzLmxhc3RCdXR0b25EaXNhYmxlZD0hMSx0aGlzLmFyZUxpc3RlbmVyc1NldHVwPSExfXBvc3RDb25zdHJ1Y3QoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIik7dGhpcy5zZXRUZW1wbGF0ZSh0aGlzLmdldFRlbXBsYXRlKCkpO2NvbnN0e2J0Rmlyc3Q6dCxidFByZXZpb3VzOmksYnROZXh0OnMsYnRMYXN0OnIscGFnZVNpemVDb21wOm99PXRoaXM7dGhpcy5hY3RpdmF0ZVRhYkluZGV4KFt0LGkscyxyXSksdC5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyYmVnaW4iLFdzKGU/Imxhc3QiOiJmaXJzdCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UpKSxpLmluc2VydEFkamFjZW50RWxlbWVudCgiYWZ0ZXJiZWdpbiIsV3MoZT8ibmV4dCI6InByZXZpb3VzIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSkpLHMuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmJlZ2luIixXcyhlPyJwcmV2aW91cyI6Im5leHQiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKSksci5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyYmVnaW4iLFdzKGU/ImZpcnN0IjoibGFzdCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJwYWdpbmF0aW9uIix0aGlzLm9uUGFnaW5hdGlvbkNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigic3VwcHJlc3NQYWdpbmF0aW9uUGFuZWwiLHRoaXMub25QYWdpbmF0aW9uQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhbInBhZ2luYXRpb25QYWdlU2l6ZVNlbGVjdG9yIiwicGFnaW5hdGlvbkF1dG9QYWdlU2l6ZSIsInN1cHByZXNzUGFnaW5hdGlvblBhbmVsIl0sKCk9PnRoaXMub25QYWdlU2l6ZVJlbGF0ZWRPcHRpb25zQ2hhbmdlKCkpLHRoaXMucGFnZVNpemVDb21wLnRvZ2dsZVNlbGVjdERpc3BsYXkodGhpcy5wYWdlU2l6ZUNvbXAuc2hvdWxkU2hvd1BhZ2VTaXplU2VsZWN0b3IoKSksdGhpcy5vblBhZ2luYXRpb25DaGFuZ2VkKCl9b25QYWdpbmF0aW9uQ2hhbmdlZCgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJwYWdpbmF0aW9uIikmJiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzUGFnaW5hdGlvblBhbmVsIik7dGhpcy5zZXREaXNwbGF5ZWQoZSksZSYmKHRoaXMuc2V0dXBMaXN0ZW5lcnMoKSx0aGlzLmVuYWJsZU9yRGlzYWJsZUJ1dHRvbnMoKSx0aGlzLnVwZGF0ZVJvd0xhYmVscygpLHRoaXMuc2V0Q3VycmVudFBhZ2VMYWJlbCgpLHRoaXMuc2V0VG90YWxMYWJlbHMoKSx0aGlzLm9uUGFnZVNpemVSZWxhdGVkT3B0aW9uc0NoYW5nZSgpKX1vblBhZ2VTaXplUmVsYXRlZE9wdGlvbnNDaGFuZ2UoKXt0aGlzLnBhZ2VTaXplQ29tcC50b2dnbGVTZWxlY3REaXNwbGF5KHRoaXMucGFnZVNpemVDb21wLnNob3VsZFNob3dQYWdlU2l6ZVNlbGVjdG9yKCkpfXNldHVwTGlzdGVuZXJzKCl7dGhpcy5hcmVMaXN0ZW5lcnNTZXR1cHx8KHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1BBR0lOQVRJT05fQ0hBTkdFRCx0aGlzLm9uUGFnaW5hdGlvbkNoYW5nZWQuYmluZCh0aGlzKSksW3tlbDp0aGlzLmJ0Rmlyc3QsZm46dGhpcy5vbkJ0Rmlyc3QuYmluZCh0aGlzKX0se2VsOnRoaXMuYnRQcmV2aW91cyxmbjp0aGlzLm9uQnRQcmV2aW91cy5iaW5kKHRoaXMpfSx7ZWw6dGhpcy5idE5leHQsZm46dGhpcy5vbkJ0TmV4dC5iaW5kKHRoaXMpfSx7ZWw6dGhpcy5idExhc3QsZm46dGhpcy5vbkJ0TGFzdC5iaW5kKHRoaXMpfV0uZm9yRWFjaChlPT57Y29uc3R7ZWw6dCxmbjppfT1lO3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHQsImNsaWNrIixpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0LCJrZXlkb3duIixlPT57ZS5rZXkhPT1qcy5FTlRFUiYmZS5rZXkhPT1qcy5TUEFDRXx8KGUucHJldmVudERlZmF1bHQoKSxpKCkpfSl9KSx0aGlzLmFyZUxpc3RlbmVyc1NldHVwPSEwKX1vbkJ0Rmlyc3QoKXt0aGlzLnByZXZpb3VzQW5kRmlyc3RCdXR0b25zRGlzYWJsZWR8fHRoaXMucGFnaW5hdGlvblByb3h5LmdvVG9GaXJzdFBhZ2UoKX1zZXRDdXJyZW50UGFnZUxhYmVsKCl7Y29uc3QgZT10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRUb3RhbFBhZ2VzKCk+MCx0PXRoaXMucGFnaW5hdGlvblByb3h5LmdldEN1cnJlbnRQYWdlKCksaT1lP3QrMTowO3RoaXMubGJDdXJyZW50LnRleHRDb250ZW50PXRoaXMuZm9ybWF0TnVtYmVyKGkpfWZvcm1hdE51bWJlcihlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJwYWdpbmF0aW9uTnVtYmVyRm9ybWF0dGVyIik7aWYodCl7cmV0dXJuIHQoe3ZhbHVlOmV9KX1jb25zdCBpPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpO3JldHVybiB6aShlLGkoInRob3VzYW5kU2VwYXJhdG9yIiwiLCIpLGkoImRlY2ltYWxTZXBhcmF0b3IiLCIuIikpfWdldFRlbXBsYXRlKCl7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSx0PWUoInBhZ2UiLCJQYWdlIiksaT1lKCJ0byIsInRvIikscz1lKCJvZiIsIm9mIikscj1lKCJmaXJzdFBhZ2UiLCJGaXJzdCBQYWdlIiksbz1lKCJwcmV2aW91c1BhZ2UiLCJQcmV2aW91cyBQYWdlIiksbj1lKCJuZXh0UGFnZSIsIk5leHQgUGFnZSIpLGE9ZSgibGFzdFBhZ2UiLCJMYXN0IFBhZ2UiKSxsPXRoaXMuZ2V0Q29tcElkKCk7cmV0dXJuYDxkaXYgY2xhc3M9ImFnLXBhZ2luZy1wYW5lbCBhZy11bnNlbGVjdGFibGUiIGlkPSJhZy0ke2x9Ij5cbiAgICAgICAgICAgICAgICA8YWctcGFnZS1zaXplLXNlbGVjdG9yIHJlZj0icGFnZVNpemVDb21wIj48L2FnLXBhZ2Utc2l6ZS1zZWxlY3Rvcj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYWctcGFnaW5nLXJvdy1zdW1tYXJ5LXBhbmVsIiByb2xlPSJzdGF0dXMiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iYWctJHtsfS1maXJzdC1yb3ciIHJlZj0ibGJGaXJzdFJvd09uUGFnZSIgY2xhc3M9ImFnLXBhZ2luZy1yb3ctc3VtbWFyeS1wYW5lbC1udW1iZXIiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImFnLSR7bH0tdG8iPiR7aX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJhZy0ke2x9LWxhc3Qtcm93IiByZWY9ImxiTGFzdFJvd09uUGFnZSIgY2xhc3M9ImFnLXBhZ2luZy1yb3ctc3VtbWFyeS1wYW5lbC1udW1iZXIiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImFnLSR7bH0tb2YiPiR7c308L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJhZy0ke2x9LXJvdy1jb3VudCIgcmVmPSJsYlJlY29yZENvdW50IiBjbGFzcz0iYWctcGFnaW5nLXJvdy1zdW1tYXJ5LXBhbmVsLW51bWJlciI+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYWctcGFnaW5nLXBhZ2Utc3VtbWFyeS1wYW5lbCIgcm9sZT0icHJlc2VudGF0aW9uIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiByZWY9ImJ0Rmlyc3QiIGNsYXNzPSJhZy1idXR0b24gYWctcGFnaW5nLWJ1dHRvbiIgcm9sZT0iYnV0dG9uIiBhcmlhLWxhYmVsPSIke3J9Ij48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiByZWY9ImJ0UHJldmlvdXMiIGNsYXNzPSJhZy1idXR0b24gYWctcGFnaW5nLWJ1dHRvbiIgcm9sZT0iYnV0dG9uIiBhcmlhLWxhYmVsPSIke299Ij48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFnLXBhZ2luZy1kZXNjcmlwdGlvbiIgcm9sZT0ic3RhdHVzIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJhZy0ke2x9LXN0YXJ0LXBhZ2UiPiR7dH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iYWctJHtsfS1zdGFydC1wYWdlLW51bWJlciIgcmVmPSJsYkN1cnJlbnQiIGNsYXNzPSJhZy1wYWdpbmctbnVtYmVyIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iYWctJHtsfS1vZi1wYWdlIj4ke3N9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImFnLSR7bH0tb2YtcGFnZS1udW1iZXIiIHJlZj0ibGJUb3RhbCIgY2xhc3M9ImFnLXBhZ2luZy1udW1iZXIiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj0iYnROZXh0IiBjbGFzcz0iYWctYnV0dG9uIGFnLXBhZ2luZy1idXR0b24iIHJvbGU9ImJ1dHRvbiIgYXJpYS1sYWJlbD0iJHtufSI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJidExhc3QiIGNsYXNzPSJhZy1idXR0b24gYWctcGFnaW5nLWJ1dHRvbiIgcm9sZT0iYnV0dG9uIiBhcmlhLWxhYmVsPSIke2F9Ij48L2Rpdj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5gfW9uQnROZXh0KCl7dGhpcy5uZXh0QnV0dG9uRGlzYWJsZWR8fHRoaXMucGFnaW5hdGlvblByb3h5LmdvVG9OZXh0UGFnZSgpfW9uQnRQcmV2aW91cygpe3RoaXMucHJldmlvdXNBbmRGaXJzdEJ1dHRvbnNEaXNhYmxlZHx8dGhpcy5wYWdpbmF0aW9uUHJveHkuZ29Ub1ByZXZpb3VzUGFnZSgpfW9uQnRMYXN0KCl7dGhpcy5sYXN0QnV0dG9uRGlzYWJsZWR8fHRoaXMucGFnaW5hdGlvblByb3h5LmdvVG9MYXN0UGFnZSgpfWVuYWJsZU9yRGlzYWJsZUJ1dHRvbnMoKXtjb25zdCBlPXRoaXMucGFnaW5hdGlvblByb3h5LmdldEN1cnJlbnRQYWdlKCksdD10aGlzLnBhZ2luYXRpb25Qcm94eS5pc0xhc3RQYWdlRm91bmQoKSxpPXRoaXMucGFnaW5hdGlvblByb3h5LmdldFRvdGFsUGFnZXMoKTt0aGlzLnByZXZpb3VzQW5kRmlyc3RCdXR0b25zRGlzYWJsZWQ9MD09PWUsdGhpcy50b2dnbGVCdXR0b25EaXNhYmxlZCh0aGlzLmJ0Rmlyc3QsdGhpcy5wcmV2aW91c0FuZEZpcnN0QnV0dG9uc0Rpc2FibGVkKSx0aGlzLnRvZ2dsZUJ1dHRvbkRpc2FibGVkKHRoaXMuYnRQcmV2aW91cyx0aGlzLnByZXZpb3VzQW5kRmlyc3RCdXR0b25zRGlzYWJsZWQpO2NvbnN0IHM9dGhpcy5pc1plcm9QYWdlc1RvRGlzcGxheSgpLHI9ZT09PWktMTt0aGlzLm5leHRCdXR0b25EaXNhYmxlZD1yfHxzLHRoaXMubGFzdEJ1dHRvbkRpc2FibGVkPSF0fHxzfHxlPT09aS0xLHRoaXMudG9nZ2xlQnV0dG9uRGlzYWJsZWQodGhpcy5idE5leHQsdGhpcy5uZXh0QnV0dG9uRGlzYWJsZWQpLHRoaXMudG9nZ2xlQnV0dG9uRGlzYWJsZWQodGhpcy5idExhc3QsdGhpcy5sYXN0QnV0dG9uRGlzYWJsZWQpfXRvZ2dsZUJ1dHRvbkRpc2FibGVkKGUsdCl7YWkoZSx0KSxlLmNsYXNzTGlzdC50b2dnbGUoImFnLWRpc2FibGVkIix0KX11cGRhdGVSb3dMYWJlbHMoKXtjb25zdCBlPXRoaXMucGFnaW5hdGlvblByb3h5LmdldEN1cnJlbnRQYWdlKCksdD10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRQYWdlU2l6ZSgpLGk9dGhpcy5wYWdpbmF0aW9uUHJveHkuaXNMYXN0UGFnZUZvdW5kKCkscz10aGlzLnBhZ2luYXRpb25Qcm94eS5pc0xhc3RQYWdlRm91bmQoKT90aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRNYXN0ZXJSb3dDb3VudCgpOm51bGw7bGV0IHIsbztpZih0aGlzLmlzWmVyb1BhZ2VzVG9EaXNwbGF5KCk/cj1vPTA6KHI9dCplKzEsbz1yK3QtMSxpJiZvPnMmJihvPXMpKSx0aGlzLmxiRmlyc3RSb3dPblBhZ2UudGV4dENvbnRlbnQ9dGhpcy5mb3JtYXROdW1iZXIociksdGhpcy5yb3dOb2RlQmxvY2tMb2FkZXIuaXNMb2FkaW5nKCkpe2NvbnN0IGU9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCk7dGhpcy5sYkxhc3RSb3dPblBhZ2UuaW5uZXJIVE1MPWUoInBhZ2VMYXN0Um93VW5rbm93biIsIj8iKX1lbHNlIHRoaXMubGJMYXN0Um93T25QYWdlLnRleHRDb250ZW50PXRoaXMuZm9ybWF0TnVtYmVyKG8pfWlzWmVyb1BhZ2VzVG9EaXNwbGF5KCl7Y29uc3QgZT10aGlzLnBhZ2luYXRpb25Qcm94eS5pc0xhc3RQYWdlRm91bmQoKSx0PXRoaXMucGFnaW5hdGlvblByb3h5LmdldFRvdGFsUGFnZXMoKTtyZXR1cm4gZSYmMD09PXR9c2V0VG90YWxMYWJlbHMoKXtjb25zdCBlPXRoaXMucGFnaW5hdGlvblByb3h5LmlzTGFzdFBhZ2VGb3VuZCgpLHQ9dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0VG90YWxQYWdlcygpLGk9ZT90aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRNYXN0ZXJSb3dDb3VudCgpOm51bGw7aWYoMT09PWkpe2NvbnN0IGU9dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0Um93KDApO2lmKGUmJmUuZ3JvdXAmJiEoZS5ncm91cERhdGF8fGUuYWdnRGF0YSkpcmV0dXJuIHZvaWQgdGhpcy5zZXRUb3RhbExhYmVsc1RvWmVybygpfWlmKGUpdGhpcy5sYlRvdGFsLnRleHRDb250ZW50PXRoaXMuZm9ybWF0TnVtYmVyKHQpLHRoaXMubGJSZWNvcmRDb3VudC50ZXh0Q29udGVudD10aGlzLmZvcm1hdE51bWJlcihpKTtlbHNle2NvbnN0IGU9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCkoIm1vcmUiLCJtb3JlIik7dGhpcy5sYlRvdGFsLmlubmVySFRNTD1lLHRoaXMubGJSZWNvcmRDb3VudC5pbm5lckhUTUw9ZX19c2V0VG90YWxMYWJlbHNUb1plcm8oKXt0aGlzLmxiRmlyc3RSb3dPblBhZ2UudGV4dENvbnRlbnQ9dGhpcy5mb3JtYXROdW1iZXIoMCksdGhpcy5sYkN1cnJlbnQudGV4dENvbnRlbnQ9dGhpcy5mb3JtYXROdW1iZXIoMCksdGhpcy5sYkxhc3RSb3dPblBhZ2UudGV4dENvbnRlbnQ9dGhpcy5mb3JtYXROdW1iZXIoMCksdGhpcy5sYlRvdGFsLnRleHRDb250ZW50PXRoaXMuZm9ybWF0TnVtYmVyKDApLHRoaXMubGJSZWNvcmRDb3VudC50ZXh0Q29udGVudD10aGlzLmZvcm1hdE51bWJlcigwKX19VGgoW2NlKCJwYWdpbmF0aW9uUHJveHkiKV0sRGgucHJvdG90eXBlLCJwYWdpbmF0aW9uUHJveHkiLHZvaWQgMCksVGgoW2NlKCJyb3dOb2RlQmxvY2tMb2FkZXIiKV0sRGgucHJvdG90eXBlLCJyb3dOb2RlQmxvY2tMb2FkZXIiLHZvaWQgMCksVGgoW3VyKCJidEZpcnN0IildLERoLnByb3RvdHlwZSwiYnRGaXJzdCIsdm9pZCAwKSxUaChbdXIoImJ0UHJldmlvdXMiKV0sRGgucHJvdG90eXBlLCJidFByZXZpb3VzIix2b2lkIDApLFRoKFt1cigiYnROZXh0IildLERoLnByb3RvdHlwZSwiYnROZXh0Iix2b2lkIDApLFRoKFt1cigiYnRMYXN0IildLERoLnByb3RvdHlwZSwiYnRMYXN0Iix2b2lkIDApLFRoKFt1cigibGJSZWNvcmRDb3VudCIpXSxEaC5wcm90b3R5cGUsImxiUmVjb3JkQ291bnQiLHZvaWQgMCksVGgoW3VyKCJsYkZpcnN0Um93T25QYWdlIildLERoLnByb3RvdHlwZSwibGJGaXJzdFJvd09uUGFnZSIsdm9pZCAwKSxUaChbdXIoImxiTGFzdFJvd09uUGFnZSIpXSxEaC5wcm90b3R5cGUsImxiTGFzdFJvd09uUGFnZSIsdm9pZCAwKSxUaChbdXIoImxiQ3VycmVudCIpXSxEaC5wcm90b3R5cGUsImxiQ3VycmVudCIsdm9pZCAwKSxUaChbdXIoImxiVG90YWwiKV0sRGgucHJvdG90eXBlLCJsYlRvdGFsIix2b2lkIDApLFRoKFt1cigicGFnZVNpemVDb21wIildLERoLnByb3RvdHlwZSwicGFnZVNpemVDb21wIix2b2lkIDApLFRoKFthZV0sRGgucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgT2g9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgQWggZXh0ZW5kcyBjcntjb25zdHJ1Y3Rvcigpe3N1cGVyKEFoLlRFTVBMQVRFKSx0aGlzLmluUHJvZ3Jlc3M9ITEsdGhpcy5kZXN0cm95UmVxdWVzdGVkPSExfXVwZGF0ZUxheW91dENsYXNzZXMoZSx0KXtjb25zdCBpPXRoaXMuZU92ZXJsYXlXcmFwcGVyLmNsYXNzTGlzdDtpLnRvZ2dsZShKbi5BVVRPX0hFSUdIVCx0LmF1dG9IZWlnaHQpLGkudG9nZ2xlKEpuLk5PUk1BTCx0Lm5vcm1hbCksaS50b2dnbGUoSm4uUFJJTlQsdC5wcmludCl9cG9zdENvbnN0cnVjdCgpe3RoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHRhKHRoaXMpKSx0aGlzLnNldERpc3BsYXllZCghMSx7c2tpcEFyaWFIaWRkZW46ITB9KSx0aGlzLm92ZXJsYXlTZXJ2aWNlLnJlZ2lzdGVyT3ZlcmxheVdyYXBwZXJDb21wKHRoaXMpfXNldFdyYXBwZXJUeXBlQ2xhc3MoZSl7Y29uc3QgdD10aGlzLmVPdmVybGF5V3JhcHBlci5jbGFzc0xpc3Q7dGhpcy5hY3RpdmVPdmVybGF5V3JhcHBlckNzc0NsYXNzJiZ0LnRvZ2dsZSh0aGlzLmFjdGl2ZU92ZXJsYXlXcmFwcGVyQ3NzQ2xhc3MsITEpLHRoaXMuYWN0aXZlT3ZlcmxheVdyYXBwZXJDc3NDbGFzcz1lLHQudG9nZ2xlKGUsITApfXNob3dPdmVybGF5KGUsdCxpKXt0aGlzLmluUHJvZ3Jlc3N8fCh0aGlzLnNldFdyYXBwZXJUeXBlQ2xhc3ModCksdGhpcy5kZXN0cm95QWN0aXZlT3ZlcmxheSgpLHRoaXMuaW5Qcm9ncmVzcz0hMCxlJiZlLnRoZW4oZT0+e3RoaXMuaW5Qcm9ncmVzcz0hMSx0aGlzLmVPdmVybGF5V3JhcHBlci5hcHBlbmRDaGlsZChlLmdldEd1aSgpKSx0aGlzLmFjdGl2ZU92ZXJsYXk9ZSx0aGlzLnVwZGF0ZUxpc3RlbmVyRGVzdHJveUZ1bmM9aSx0aGlzLmRlc3Ryb3lSZXF1ZXN0ZWQmJih0aGlzLmRlc3Ryb3lSZXF1ZXN0ZWQ9ITEsdGhpcy5kZXN0cm95QWN0aXZlT3ZlcmxheSgpKX0pLHRoaXMuc2V0RGlzcGxheWVkKCEwLHtza2lwQXJpYUhpZGRlbjohMH0pKX1kZXN0cm95QWN0aXZlT3ZlcmxheSgpe3ZhciBlO3RoaXMuaW5Qcm9ncmVzcz90aGlzLmRlc3Ryb3lSZXF1ZXN0ZWQ9ITA6dGhpcy5hY3RpdmVPdmVybGF5JiYodGhpcy5hY3RpdmVPdmVybGF5PXRoaXMuZ2V0Q29udGV4dCgpLmRlc3Ryb3lCZWFuKHRoaXMuYWN0aXZlT3ZlcmxheSksbnVsbD09PShlPXRoaXMudXBkYXRlTGlzdGVuZXJEZXN0cm95RnVuYyl8fHZvaWQgMD09PWV8fGUuY2FsbCh0aGlzKSxtcyh0aGlzLmVPdmVybGF5V3JhcHBlcikpfWhpZGVPdmVybGF5KCl7dGhpcy5kZXN0cm95QWN0aXZlT3ZlcmxheSgpLHRoaXMuc2V0RGlzcGxheWVkKCExLHtza2lwQXJpYUhpZGRlbjohMH0pfWRlc3Ryb3koKXt0aGlzLmRlc3Ryb3lBY3RpdmVPdmVybGF5KCksc3VwZXIuZGVzdHJveSgpfX1BaC5URU1QTEFURT0nXG4gICAgICAgIDxkaXYgY2xhc3M9ImFnLW92ZXJsYXkiIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1vdmVybGF5LXBhbmVsIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLW92ZXJsYXktd3JhcHBlciIgcmVmPSJlT3ZlcmxheVdyYXBwZXIiIHJvbGU9InByZXNlbnRhdGlvbiI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+JyxPaChbY2UoIm92ZXJsYXlTZXJ2aWNlIildLEFoLnByb3RvdHlwZSwib3ZlcmxheVNlcnZpY2UiLHZvaWQgMCksT2goW3VyKCJlT3ZlcmxheVdyYXBwZXIiKV0sQWgucHJvdG90eXBlLCJlT3ZlcmxheVdyYXBwZXIiLHZvaWQgMCksT2goW2FlXSxBaC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBQaD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgTWg9Y2xhc3MgZXh0ZW5kcyBpdHtnZXRGaXJzdFJvdygpe2xldCBlLHQ9MDtyZXR1cm4gdGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRUb3BSb3dDb3VudCgpP2U9InRvcCI6dGhpcy5yb3dNb2RlbC5nZXRSb3dDb3VudCgpPyhlPW51bGwsdD10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRQYWdlRmlyc3RSb3coKSk6dGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRCb3R0b21Sb3dDb3VudCgpJiYoZT0iYm90dG9tIiksdm9pZCAwPT09ZT9udWxsOntyb3dJbmRleDp0LHJvd1Bpbm5lZDplfX1nZXRMYXN0Um93KCl7bGV0IGUsdD1udWxsO2NvbnN0IGk9dGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRCb3R0b21Sb3dDb3VudCgpLHM9dGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRUb3BSb3dDb3VudCgpO3JldHVybiBpPyh0PSJib3R0b20iLGU9aS0xKTp0aGlzLnJvd01vZGVsLmdldFJvd0NvdW50KCk/KHQ9bnVsbCxlPXRoaXMucGFnaW5hdGlvblByb3h5LmdldFBhZ2VMYXN0Um93KCkpOnMmJih0PSJ0b3AiLGU9cy0xKSx2b2lkIDA9PT1lP251bGw6e3Jvd0luZGV4OmUscm93UGlubmVkOnR9fWdldFJvd05vZGUoZSl7c3dpdGNoKGUucm93UGlubmVkKXtjYXNlInRvcCI6cmV0dXJuIHRoaXMucGlubmVkUm93TW9kZWwuZ2V0UGlubmVkVG9wUm93RGF0YSgpW2Uucm93SW5kZXhdO2Nhc2UiYm90dG9tIjpyZXR1cm4gdGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRCb3R0b21Sb3dEYXRhKClbZS5yb3dJbmRleF07ZGVmYXVsdDpyZXR1cm4gdGhpcy5yb3dNb2RlbC5nZXRSb3coZS5yb3dJbmRleCl9fXNhbWVSb3coZSx0KXtyZXR1cm4hZSYmIXR8fCEoZSYmIXR8fCFlJiZ0KSYmKGUucm93SW5kZXg9PT10LnJvd0luZGV4JiZlLnJvd1Bpbm5lZD09dC5yb3dQaW5uZWQpfWJlZm9yZShlLHQpe3N3aXRjaChlLnJvd1Bpbm5lZCl7Y2FzZSJ0b3AiOmlmKCJ0b3AiIT09dC5yb3dQaW5uZWQpcmV0dXJuITA7YnJlYWs7Y2FzZSJib3R0b20iOmlmKCJib3R0b20iIT09dC5yb3dQaW5uZWQpcmV0dXJuITE7YnJlYWs7ZGVmYXVsdDppZihiKHQucm93UGlubmVkKSlyZXR1cm4idG9wIiE9PXQucm93UGlubmVkfXJldHVybiBlLnJvd0luZGV4PHQucm93SW5kZXh9cm93TWF4KGUpe2xldCB0O3JldHVybiBlLmZvckVhY2goZT0+eyh2b2lkIDA9PT10fHx0aGlzLmJlZm9yZSh0LGUpKSYmKHQ9ZSl9KSx0fXJvd01pbihlKXtsZXQgdDtyZXR1cm4gZS5mb3JFYWNoKGU9Pnsodm9pZCAwPT09dHx8dGhpcy5iZWZvcmUoZSx0KSkmJih0PWUpfSksdH19O1BoKFtjZSgicm93TW9kZWwiKV0sTWgucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSxQaChbY2UoInBpbm5lZFJvd01vZGVsIildLE1oLnByb3RvdHlwZSwicGlubmVkUm93TW9kZWwiLHZvaWQgMCksUGgoW2NlKCJwYWdpbmF0aW9uUHJveHkiKV0sTWgucHJvdG90eXBlLCJwYWdpbmF0aW9uUHJveHkiLHZvaWQgMCksTWg9UGgoW2RlKCJyb3dQb3NpdGlvblV0aWxzIildLE1oKTt2YXIgTGg9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IEZoPWNsYXNzIGV4dGVuZHMgaXR7Y3JlYXRlSWQoZSl7Y29uc3R7cm93SW5kZXg6dCxyb3dQaW5uZWQ6aSxjb2x1bW46c309ZTtyZXR1cm4gdGhpcy5jcmVhdGVJZEZyb21WYWx1ZXMoe3Jvd0luZGV4OnQsY29sdW1uOnMscm93UGlubmVkOml9KX1jcmVhdGVJZEZyb21WYWx1ZXMoZSl7Y29uc3R7cm93SW5kZXg6dCxyb3dQaW5uZWQ6aSxjb2x1bW46c309ZTtyZXR1cm5gJHt0fS4ke251bGw9PWk/Im51bGwiOml9LiR7cy5nZXRJZCgpfWB9ZXF1YWxzKGUsdCl7Y29uc3QgaT1lLmNvbHVtbj09PXQuY29sdW1uLHM9ZS5yb3dQaW5uZWQ9PT10LnJvd1Bpbm5lZCxyPWUucm93SW5kZXg9PT10LnJvd0luZGV4O3JldHVybiBpJiZzJiZyfX07Rmg9TGgoW2RlKCJjZWxsUG9zaXRpb25VdGlscyIpXSxGaCk7Y2xhc3MgSWh7Y29uc3RydWN0b3IoZSl7dGhpcy5jZWxsVmFsdWVDaGFuZ2VzPWV9fWNsYXNzIE5oIGV4dGVuZHMgSWh7Y29uc3RydWN0b3IoZSx0LGkscyl7c3VwZXIoZSksdGhpcy5pbml0aWFsUmFuZ2U9dCx0aGlzLmZpbmFsUmFuZ2U9aSx0aGlzLnJhbmdlcz1zfX1jbGFzcyBHaHtjb25zdHJ1Y3RvcihlKXt0aGlzLmFjdGlvblN0YWNrPVtdLHRoaXMubWF4U3RhY2tTaXplPWV8fEdoLkRFRkFVTFRfU1RBQ0tfU0laRSx0aGlzLmFjdGlvblN0YWNrPW5ldyBBcnJheSh0aGlzLm1heFN0YWNrU2l6ZSl9cG9wKCl7cmV0dXJuIHRoaXMuYWN0aW9uU3RhY2sucG9wKCl9cHVzaChlKXtlLmNlbGxWYWx1ZUNoYW5nZXMmJmUuY2VsbFZhbHVlQ2hhbmdlcy5sZW5ndGg+MCYmKHRoaXMuYWN0aW9uU3RhY2subGVuZ3RoPT09dGhpcy5tYXhTdGFja1NpemUmJnRoaXMuYWN0aW9uU3RhY2suc2hpZnQoKSx0aGlzLmFjdGlvblN0YWNrLnB1c2goZSkpfWNsZWFyKCl7dGhpcy5hY3Rpb25TdGFjaz1bXX1nZXRDdXJyZW50U3RhY2tTaXplKCl7cmV0dXJuIHRoaXMuYWN0aW9uU3RhY2subGVuZ3RofX1HaC5ERUZBVUxUX1NUQUNLX1NJWkU9MTA7dmFyIGtoPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBfaD1jbGFzcyBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNlbGxWYWx1ZUNoYW5nZXM9W10sdGhpcy5hY3RpdmVDZWxsRWRpdD1udWxsLHRoaXMuYWN0aXZlUm93RWRpdD1udWxsLHRoaXMuaXNQYXN0aW5nPSExLHRoaXMuaXNSYW5nZUluQWN0aW9uPSExLHRoaXMub25DZWxsVmFsdWVDaGFuZ2VkPWU9Pntjb25zdCB0PXtjb2x1bW46ZS5jb2x1bW4scm93SW5kZXg6ZS5yb3dJbmRleCxyb3dQaW5uZWQ6ZS5yb3dQaW5uZWR9LGk9bnVsbCE9PXRoaXMuYWN0aXZlQ2VsbEVkaXQmJnRoaXMuY2VsbFBvc2l0aW9uVXRpbHMuZXF1YWxzKHRoaXMuYWN0aXZlQ2VsbEVkaXQsdCkscz1udWxsIT09dGhpcy5hY3RpdmVSb3dFZGl0JiZ0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuc2FtZVJvdyh0aGlzLmFjdGl2ZVJvd0VkaXQsdCk7aWYoIShpfHxzfHx0aGlzLmlzUGFzdGluZ3x8dGhpcy5pc1JhbmdlSW5BY3Rpb24pKXJldHVybjtjb25zdHtyb3dQaW5uZWQ6cixyb3dJbmRleDpvLGNvbHVtbjpuLG9sZFZhbHVlOmEsdmFsdWU6bH09ZSxkPXtyb3dQaW5uZWQ6cixyb3dJbmRleDpvLGNvbHVtbklkOm4uZ2V0Q29sSWQoKSxuZXdWYWx1ZTpsLG9sZFZhbHVlOmF9O3RoaXMuY2VsbFZhbHVlQ2hhbmdlcy5wdXNoKGQpfSx0aGlzLmNsZWFyU3RhY2tzPSgpPT57dGhpcy51bmRvU3RhY2suY2xlYXIoKSx0aGlzLnJlZG9TdGFjay5jbGVhcigpfX1pbml0KCl7aWYoIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidW5kb1JlZG9DZWxsRWRpdGluZyIpKXJldHVybjtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidW5kb1JlZG9DZWxsRWRpdGluZ0xpbWl0Iik7ZTw9MHx8KHRoaXMudW5kb1N0YWNrPW5ldyBHaChlKSx0aGlzLnJlZG9TdGFjaz1uZXcgR2goZSksdGhpcy5hZGRSb3dFZGl0aW5nTGlzdGVuZXJzKCksdGhpcy5hZGRDZWxsRWRpdGluZ0xpc3RlbmVycygpLHRoaXMuYWRkUGFzdGVMaXN0ZW5lcnMoKSx0aGlzLmFkZEZpbGxMaXN0ZW5lcnMoKSx0aGlzLmFkZENlbGxLZXlMaXN0ZW5lcnMoKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DRUxMX1ZBTFVFX0NIQU5HRUQsdGhpcy5vbkNlbGxWYWx1ZUNoYW5nZWQpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX01PREVMX1VQREFURUQsZT0+e2Uua2VlcFVuZG9SZWRvU3RhY2t8fHRoaXMuY2xlYXJTdGFja3MoKX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9QSVZPVF9NT0RFX0NIQU5HRUQsdGhpcy5jbGVhclN0YWNrcyksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELHRoaXMuY2xlYXJTdGFja3MpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9HUk9VUF9PUEVORUQsdGhpcy5jbGVhclN0YWNrcyksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ09MVU1OX1JPV19HUk9VUF9DSEFOR0VELHRoaXMuY2xlYXJTdGFja3MpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9NT1ZFRCx0aGlzLmNsZWFyU3RhY2tzKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fUElOTkVELHRoaXMuY2xlYXJTdGFja3MpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9WSVNJQkxFLHRoaXMuY2xlYXJTdGFja3MpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1JPV19EUkFHX0VORCx0aGlzLmNsZWFyU3RhY2tzKSx0aGlzLmN0cmxzU2VydmljZS53aGVuUmVhZHkoKCk9Pnt0aGlzLmdyaWRCb2R5Q3RybD10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKX0pKX1nZXRDdXJyZW50VW5kb1N0YWNrU2l6ZSgpe3JldHVybiB0aGlzLnVuZG9TdGFjaz90aGlzLnVuZG9TdGFjay5nZXRDdXJyZW50U3RhY2tTaXplKCk6MH1nZXRDdXJyZW50UmVkb1N0YWNrU2l6ZSgpe3JldHVybiB0aGlzLnJlZG9TdGFjaz90aGlzLnJlZG9TdGFjay5nZXRDdXJyZW50U3RhY2tTaXplKCk6MH11bmRvKGUpe2NvbnN0IHQ9e3R5cGU6bHQuRVZFTlRfVU5ET19TVEFSVEVELHNvdXJjZTplfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpO2NvbnN0IGk9dGhpcy51bmRvUmVkbyh0aGlzLnVuZG9TdGFjayx0aGlzLnJlZG9TdGFjaywiaW5pdGlhbFJhbmdlIiwib2xkVmFsdWUiLCJ1bmRvIikscz17dHlwZTpsdC5FVkVOVF9VTkRPX0VOREVELHNvdXJjZTplLG9wZXJhdGlvblBlcmZvcm1lZDppfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHMpfXJlZG8oZSl7Y29uc3QgdD17dHlwZTpsdC5FVkVOVF9SRURPX1NUQVJURUQsc291cmNlOmV9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCk7Y29uc3QgaT10aGlzLnVuZG9SZWRvKHRoaXMucmVkb1N0YWNrLHRoaXMudW5kb1N0YWNrLCJmaW5hbFJhbmdlIiwibmV3VmFsdWUiLCJyZWRvIikscz17dHlwZTpsdC5FVkVOVF9SRURPX0VOREVELHNvdXJjZTplLG9wZXJhdGlvblBlcmZvcm1lZDppfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHMpfXVuZG9SZWRvKGUsdCxpLHMscil7aWYoIWUpcmV0dXJuITE7Y29uc3Qgbz1lLnBvcCgpO3JldHVybiEoIW98fCFvLmNlbGxWYWx1ZUNoYW5nZXMpJiYodGhpcy5wcm9jZXNzQWN0aW9uKG8sZT0+ZVtzXSxyKSxvIGluc3RhbmNlb2YgTmg/dGhpcy5wcm9jZXNzUmFuZ2Uoby5yYW5nZXN8fFtvW2ldXSk6dGhpcy5wcm9jZXNzQ2VsbChvLmNlbGxWYWx1ZUNoYW5nZXMpLHQucHVzaChvKSwhMCl9cHJvY2Vzc0FjdGlvbihlLHQsaSl7ZS5jZWxsVmFsdWVDaGFuZ2VzLmZvckVhY2goZT0+e2NvbnN0e3Jvd0luZGV4OnMscm93UGlubmVkOnIsY29sdW1uSWQ6b309ZSxuPXtyb3dJbmRleDpzLHJvd1Bpbm5lZDpyfSxhPXRoaXMuZ2V0Um93Tm9kZShuKTthLmRpc3BsYXllZCYmYS5zZXREYXRhVmFsdWUobyx0KGUpLGkpfSl9cHJvY2Vzc1JhbmdlKGUpe2xldCB0O3RoaXMucmFuZ2VTZXJ2aWNlLnJlbW92ZUFsbENlbGxSYW5nZXMoITApLGUuZm9yRWFjaCgoaSxzKT0+e2lmKCFpKXJldHVybjtjb25zdCByPWkuc3RhcnRSb3csbz1pLmVuZFJvdztzPT09ZS5sZW5ndGgtMSYmKHQ9e3Jvd1Bpbm5lZDpyLnJvd1Bpbm5lZCxyb3dJbmRleDpyLnJvd0luZGV4LGNvbHVtbklkOmkuc3RhcnRDb2x1bW4uZ2V0Q29sSWQoKX0sdGhpcy5zZXRMYXN0Rm9jdXNlZENlbGwodCkpO2NvbnN0IG49e3Jvd1N0YXJ0SW5kZXg6ci5yb3dJbmRleCxyb3dTdGFydFBpbm5lZDpyLnJvd1Bpbm5lZCxyb3dFbmRJbmRleDpvLnJvd0luZGV4LHJvd0VuZFBpbm5lZDpvLnJvd1Bpbm5lZCxjb2x1bW5TdGFydDppLnN0YXJ0Q29sdW1uLGNvbHVtbnM6aS5jb2x1bW5zfTt0aGlzLnJhbmdlU2VydmljZS5hZGRDZWxsUmFuZ2Uobil9KX1wcm9jZXNzQ2VsbChlKXtjb25zdCB0PWVbMF0se3Jvd0luZGV4Omkscm93UGlubmVkOnN9PXQscj17cm93SW5kZXg6aSxyb3dQaW5uZWQ6c30sbz10aGlzLmdldFJvd05vZGUociksbj17cm93UGlubmVkOnQucm93UGlubmVkLHJvd0luZGV4Om8ucm93SW5kZXgsY29sdW1uSWQ6dC5jb2x1bW5JZH07dGhpcy5zZXRMYXN0Rm9jdXNlZENlbGwobiwhIXRoaXMucmFuZ2VTZXJ2aWNlKX1zZXRMYXN0Rm9jdXNlZENlbGwoZSx0KXtjb25zdHtyb3dJbmRleDppLGNvbHVtbklkOnMscm93UGlubmVkOnJ9PWUsbz10aGlzLmdyaWRCb2R5Q3RybC5nZXRTY3JvbGxGZWF0dXJlKCksbj10aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4ocyk7aWYoIW4pcmV0dXJuO28uZW5zdXJlSW5kZXhWaXNpYmxlKGkpLG8uZW5zdXJlQ29sdW1uVmlzaWJsZShuKTtjb25zdCBhPXtyb3dJbmRleDppLGNvbHVtbjpuLHJvd1Bpbm5lZDpyfTt0aGlzLmZvY3VzU2VydmljZS5zZXRGb2N1c2VkQ2VsbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYSkse2ZvcmNlQnJvd3NlckZvY3VzOiEwfSkpLHQmJnRoaXMucmFuZ2VTZXJ2aWNlLnNldFJhbmdlVG9DZWxsKGEpfWFkZFJvd0VkaXRpbmdMaXN0ZW5lcnMoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ST1dfRURJVElOR19TVEFSVEVELGU9Pnt0aGlzLmFjdGl2ZVJvd0VkaXQ9e3Jvd0luZGV4OmUucm93SW5kZXgscm93UGlubmVkOmUucm93UGlubmVkfX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1JPV19FRElUSU5HX1NUT1BQRUQsKCk9Pntjb25zdCBlPW5ldyBJaCh0aGlzLmNlbGxWYWx1ZUNoYW5nZXMpO3RoaXMucHVzaEFjdGlvbnNUb1VuZG9TdGFjayhlKSx0aGlzLmFjdGl2ZVJvd0VkaXQ9bnVsbH0pfWFkZENlbGxFZGl0aW5nTGlzdGVuZXJzKCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ0VMTF9FRElUSU5HX1NUQVJURUQsZT0+e3RoaXMuYWN0aXZlQ2VsbEVkaXQ9e2NvbHVtbjplLmNvbHVtbixyb3dJbmRleDplLnJvd0luZGV4LHJvd1Bpbm5lZDplLnJvd1Bpbm5lZH19KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DRUxMX0VESVRJTkdfU1RPUFBFRCxlPT57dGhpcy5hY3RpdmVDZWxsRWRpdD1udWxsO2lmKGUudmFsdWVDaGFuZ2VkJiYhdGhpcy5hY3RpdmVSb3dFZGl0JiYhdGhpcy5pc1Bhc3RpbmcmJiF0aGlzLmlzUmFuZ2VJbkFjdGlvbil7Y29uc3QgZT1uZXcgSWgodGhpcy5jZWxsVmFsdWVDaGFuZ2VzKTt0aGlzLnB1c2hBY3Rpb25zVG9VbmRvU3RhY2soZSl9fSl9YWRkUGFzdGVMaXN0ZW5lcnMoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9QQVNURV9TVEFSVCwoKT0+e3RoaXMuaXNQYXN0aW5nPSEwfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfUEFTVEVfRU5ELCgpPT57Y29uc3QgZT1uZXcgSWgodGhpcy5jZWxsVmFsdWVDaGFuZ2VzKTt0aGlzLnB1c2hBY3Rpb25zVG9VbmRvU3RhY2soZSksdGhpcy5pc1Bhc3Rpbmc9ITF9KX1hZGRGaWxsTGlzdGVuZXJzKCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRklMTF9TVEFSVCwoKT0+e3RoaXMuaXNSYW5nZUluQWN0aW9uPSEwfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRklMTF9FTkQsZT0+e2NvbnN0IHQ9bmV3IE5oKHRoaXMuY2VsbFZhbHVlQ2hhbmdlcyxlLmluaXRpYWxSYW5nZSxlLmZpbmFsUmFuZ2UpO3RoaXMucHVzaEFjdGlvbnNUb1VuZG9TdGFjayh0KSx0aGlzLmlzUmFuZ2VJbkFjdGlvbj0hMX0pfWFkZENlbGxLZXlMaXN0ZW5lcnMoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9LRVlfU0hPUlRDVVRfQ0hBTkdFRF9DRUxMX1NUQVJULCgpPT57dGhpcy5pc1JhbmdlSW5BY3Rpb249ITB9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9LRVlfU0hPUlRDVVRfQ0hBTkdFRF9DRUxMX0VORCwoKT0+e2xldCBlO2U9dGhpcy5yYW5nZVNlcnZpY2UmJnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUmFuZ2VTZWxlY3Rpb24iKT9uZXcgTmgodGhpcy5jZWxsVmFsdWVDaGFuZ2VzLHZvaWQgMCx2b2lkIDAsWy4uLnRoaXMucmFuZ2VTZXJ2aWNlLmdldENlbGxSYW5nZXMoKV0pOm5ldyBJaCh0aGlzLmNlbGxWYWx1ZUNoYW5nZXMpLHRoaXMucHVzaEFjdGlvbnNUb1VuZG9TdGFjayhlKSx0aGlzLmlzUmFuZ2VJbkFjdGlvbj0hMX0pfXB1c2hBY3Rpb25zVG9VbmRvU3RhY2soZSl7dGhpcy51bmRvU3RhY2sucHVzaChlKSx0aGlzLmNlbGxWYWx1ZUNoYW5nZXM9W10sdGhpcy5yZWRvU3RhY2suY2xlYXIoKX1nZXRSb3dOb2RlKGUpe3N3aXRjaChlLnJvd1Bpbm5lZCl7Y2FzZSJ0b3AiOnJldHVybiB0aGlzLnBpbm5lZFJvd01vZGVsLmdldFBpbm5lZFRvcFJvd0RhdGEoKVtlLnJvd0luZGV4XTtjYXNlImJvdHRvbSI6cmV0dXJuIHRoaXMucGlubmVkUm93TW9kZWwuZ2V0UGlubmVkQm90dG9tUm93RGF0YSgpW2Uucm93SW5kZXhdO2RlZmF1bHQ6cmV0dXJuIHRoaXMucm93TW9kZWwuZ2V0Um93KGUucm93SW5kZXgpfX19O2toKFtjZSgiZm9jdXNTZXJ2aWNlIildLF9oLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLGtoKFtjZSgiY3RybHNTZXJ2aWNlIildLF9oLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLGtoKFtjZSgicm93TW9kZWwiKV0sX2gucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSxraChbY2UoInBpbm5lZFJvd01vZGVsIildLF9oLnByb3RvdHlwZSwicGlubmVkUm93TW9kZWwiLHZvaWQgMCksa2goW2NlKCJjZWxsUG9zaXRpb25VdGlscyIpXSxfaC5wcm90b3R5cGUsImNlbGxQb3NpdGlvblV0aWxzIix2b2lkIDApLGtoKFtjZSgicm93UG9zaXRpb25VdGlscyIpXSxfaC5wcm90b3R5cGUsInJvd1Bvc2l0aW9uVXRpbHMiLHZvaWQgMCksa2goW2NlKCJjb2x1bW5Nb2RlbCIpXSxfaC5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLGtoKFtoZSgicmFuZ2VTZXJ2aWNlIildLF9oLnByb3RvdHlwZSwicmFuZ2VTZXJ2aWNlIix2b2lkIDApLGtoKFthZV0sX2gucHJvdG90eXBlLCJpbml0IixudWxsKSxfaD1raChbZGUoInVuZG9SZWRvU2VydmljZSIpXSxfaCk7dmFyIFZoPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBCaD1jbGFzcyBleHRlbmRzIGl0e2ZpbmRIZWFkZXIoZSx0KXtsZXQgaSxzLHI7aWYoZS5jb2x1bW4gaW5zdGFuY2VvZiBhdD8ocz0iZ2V0RGlzcGxheWVkR3JvdXAiK3QsaT10aGlzLmNvbHVtbk1vZGVsW3NdKGUuY29sdW1uKSk6KHI9ImdldERpc3BsYXllZENvbCIrdCxpPXRoaXMuY29sdW1uTW9kZWxbcl0oZS5jb2x1bW4pKSwhaSlyZXR1cm47bGV0e2hlYWRlclJvd0luZGV4Om99PWU7aWYodGhpcy5nZXRIZWFkZXJSb3dUeXBlKG8pIT09RWwuRkxPQVRJTkdfRklMVEVSKXtjb25zdCBlPVtpXTtmb3IoO2kuZ2V0UGFyZW50KCk7KWk9aS5nZXRQYXJlbnQoKSxlLnB1c2goaSk7aT1lW2UubGVuZ3RoLTEtb119Y29uc3R7Y29sdW1uOm4saGVhZGVyUm93SW5kZXg6YX09dGhpcy5nZXRIZWFkZXJJbmRleFRvRm9jdXMoaSxvKTtyZXR1cm57Y29sdW1uOm4saGVhZGVyUm93SW5kZXg6YX19Z2V0SGVhZGVySW5kZXhUb0ZvY3VzKGUsdCl7bGV0IGk7aWYoZSBpbnN0YW5jZW9mIGF0JiZ0aGlzLmlzQW55Q2hpbGRTcGFubmluZ0hlYWRlckhlaWdodChlKSYmZS5pc1BhZGRpbmcoKSl7Y29uc3Qgcz1lO2k9cy5nZXRMZWFmQ29sdW1ucygpWzBdO2xldCByPWk7Zm9yKDtyIT09czspdCsrLHI9ci5nZXRQYXJlbnQoKX1yZXR1cm57Y29sdW1uOml8fGUsaGVhZGVyUm93SW5kZXg6dH19aXNBbnlDaGlsZFNwYW5uaW5nSGVhZGVySGVpZ2h0KGUpe3JldHVybiEhZSYmZS5nZXRMZWFmQ29sdW1ucygpLnNvbWUoZT0+ZS5pc1NwYW5IZWFkZXJIZWlnaHQoKSl9Z2V0Q29sdW1uVmlzaWJsZVBhcmVudChlLHQpe2NvbnN0IGk9dGhpcy5nZXRIZWFkZXJSb3dUeXBlKHQpLHM9aT09PUVsLkZMT0FUSU5HX0ZJTFRFUixyPWk9PT1FbC5DT0xVTU47bGV0IG89cz9lOmUuZ2V0UGFyZW50KCksbj10LTEsYT1uO2lmKHImJnRoaXMuaXNBbnlDaGlsZFNwYW5uaW5nSGVhZGVySGVpZ2h0KGUuZ2V0UGFyZW50KCkpKXtmb3IoO28mJm8uaXNQYWRkaW5nKCk7KW89by5nZXRQYXJlbnQoKSxuLS07YT1uLG48MCYmKG89ZSxuPXQsYT12b2lkIDApfXJldHVybntjb2x1bW46byxoZWFkZXJSb3dJbmRleDpuLGhlYWRlclJvd0luZGV4V2l0aG91dFNwYW46YX19Z2V0Q29sdW1uVmlzaWJsZUNoaWxkKGUsdCxpPSJBZnRlciIpe2xldCBzPWUscj10KzEsbz1yO2lmKHRoaXMuZ2V0SGVhZGVyUm93VHlwZSh0KT09PUVsLkNPTFVNTl9HUk9VUCl7Y29uc3QgdD1lLmdldERpc3BsYXllZExlYWZDb2x1bW5zKCksbz0iQWZ0ZXIiPT09aT90WzBdOk9lKHQpLG49W107bGV0IGE9bztmb3IoO2EuZ2V0UGFyZW50KCkhPT1lOylhPWEuZ2V0UGFyZW50KCksbi5wdXNoKGEpO2lmKHM9byxvLmlzU3BhbkhlYWRlckhlaWdodCgpKWZvcihsZXQgZT1uLmxlbmd0aC0xO2U+PTA7ZS0tKXtjb25zdCB0PW5bZV07aWYoIXQuaXNQYWRkaW5nKCkpe3M9dDticmVha31yKyt9ZWxzZSBzPU9lKG4pLHN8fChzPW8pfXJldHVybntjb2x1bW46cyxoZWFkZXJSb3dJbmRleDpyLGhlYWRlclJvd0luZGV4V2l0aG91dFNwYW46b319Z2V0SGVhZGVyUm93VHlwZShlKXtjb25zdCB0PXRoaXMuY3RybHNTZXJ2aWNlLmdldEhlYWRlclJvd0NvbnRhaW5lckN0cmwoKTtpZih0KXJldHVybiB0LmdldFJvd1R5cGUoZSl9ZmluZENvbEF0RWRnZUZvckhlYWRlclJvdyhlLHQpe2NvbnN0IGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCkscz1pWyJzdGFydCI9PT10PzA6aS5sZW5ndGgtMV07aWYoIXMpcmV0dXJuO2NvbnN0IHI9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0SGVhZGVyUm93Q29udGFpbmVyQ3RybChzLmdldFBpbm5lZCgpKS5nZXRSb3dUeXBlKGUpO2lmKHI9PUVsLkNPTFVNTl9HUk9VUCl7cmV0dXJue2hlYWRlclJvd0luZGV4OmUsY29sdW1uOnRoaXMuY29sdW1uTW9kZWwuZ2V0Q29sdW1uR3JvdXBBdExldmVsKHMsZSl9fXJldHVybntoZWFkZXJSb3dJbmRleDpudWxsPT1yPy0xOmUsY29sdW1uOnN9fX07VmgoW2NlKCJjb2x1bW5Nb2RlbCIpXSxCaC5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLFZoKFtjZSgiY3RybHNTZXJ2aWNlIildLEJoLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLEJoPVZoKFtkZSgiaGVhZGVyUG9zaXRpb25VdGlscyIpXSxCaCk7dmFyIEhoPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBXaD1jbGFzc3tidWlsZENvbHVtbkRlZnMoZSx0LGkpe2NvbnN0IHM9W10scj17fTtyZXR1cm4gZS5mb3JFYWNoKGU9PntsZXQgbz0hMCxuPXRoaXMuY3JlYXRlRGVmRnJvbUNvbHVtbihlLHQsaSksYT1lLmdldE9yaWdpbmFsUGFyZW50KCksbD1udWxsO2Zvcig7YTspe2xldCBlPW51bGw7aWYoYS5pc1BhZGRpbmcoKSl7YT1hLmdldE9yaWdpbmFsUGFyZW50KCk7Y29udGludWV9Y29uc3QgdD1yW2EuZ2V0R3JvdXBJZCgpXTtpZih0KXt0LmNoaWxkcmVuLnB1c2gobiksbz0hMTticmVha31pZihlPXRoaXMuY3JlYXRlRGVmRnJvbUdyb3VwKGEpLGUmJihlLmNoaWxkcmVuPVtuXSxyW2UuZ3JvdXBJZF09ZSxuPWUsYT1hLmdldE9yaWdpbmFsUGFyZW50KCkpLG51bGwhPWEmJmw9PT1hKXtvPSExO2JyZWFrfWw9YX1vJiZzLnB1c2gobil9KSxzfWNyZWF0ZURlZkZyb21Hcm91cChlKXtjb25zdCB0PU4oZS5nZXRDb2xHcm91cERlZigpLFsiY2hpbGRyZW4iXSk7cmV0dXJuIHQmJih0Lmdyb3VwSWQ9ZS5nZXRHcm91cElkKCkpLHR9Y3JlYXRlRGVmRnJvbUNvbHVtbihlLHQsaSl7Y29uc3Qgcz1OKGUuZ2V0Q29sRGVmKCkpO3JldHVybiBzLmNvbElkPWUuZ2V0Q29sSWQoKSxzLndpZHRoPWUuZ2V0QWN0dWFsV2lkdGgoKSxzLnJvd0dyb3VwPWUuaXNSb3dHcm91cEFjdGl2ZSgpLHMucm93R3JvdXBJbmRleD1lLmlzUm93R3JvdXBBY3RpdmUoKT90LmluZGV4T2YoZSk6bnVsbCxzLnBpdm90PWUuaXNQaXZvdEFjdGl2ZSgpLHMucGl2b3RJbmRleD1lLmlzUGl2b3RBY3RpdmUoKT9pLmluZGV4T2YoZSk6bnVsbCxzLmFnZ0Z1bmM9ZS5pc1ZhbHVlQWN0aXZlKCk/ZS5nZXRBZ2dGdW5jKCk6bnVsbCxzLmhpZGU9IWUuaXNWaXNpYmxlKCl8fHZvaWQgMCxzLnBpbm5lZD1lLmlzUGlubmVkKCk/ZS5nZXRQaW5uZWQoKTpudWxsLHMuc29ydD1lLmdldFNvcnQoKT9lLmdldFNvcnQoKTpudWxsLHMuc29ydEluZGV4PW51bGwhPWUuZ2V0U29ydEluZGV4KCk/ZS5nZXRTb3J0SW5kZXgoKTpudWxsLHN9fTtXaD1IaChbZGUoImNvbHVtbkRlZkZhY3RvcnkiKV0sV2gpO3ZhciBqaD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgVWg9Y2xhc3N7Z2V0SW5pdGlhbFJvd0NsYXNzZXMoZSl7Y29uc3QgdD1bXTtyZXR1cm4gYihlLmV4dHJhQ3NzQ2xhc3MpJiZ0LnB1c2goZS5leHRyYUNzc0NsYXNzKSx0LnB1c2goImFnLXJvdyIpLHQucHVzaChlLnJvd0ZvY3VzZWQ/ImFnLXJvdy1mb2N1cyI6ImFnLXJvdy1uby1mb2N1cyIpLGUuZmFkZVJvd0luJiZ0LnB1c2goImFnLW9wYWNpdHktemVybyIpLHQucHVzaChlLnJvd0lzRXZlbj8iYWctcm93LWV2ZW4iOiJhZy1yb3ctb2RkIiksZS5yb3dOb2RlLmlzUm93UGlubmVkKCkmJnQucHVzaCgiYWctcm93LXBpbm5lZCIpLGUucm93Tm9kZS5pc1NlbGVjdGVkKCkmJnQucHVzaCgiYWctcm93LXNlbGVjdGVkIiksZS5yb3dOb2RlLmZvb3RlciYmdC5wdXNoKCJhZy1yb3ctZm9vdGVyIiksdC5wdXNoKCJhZy1yb3ctbGV2ZWwtIitlLnJvd0xldmVsKSxlLnJvd05vZGUuc3R1YiYmdC5wdXNoKCJhZy1yb3ctbG9hZGluZyIpLGUuZnVsbFdpZHRoUm93JiZ0LnB1c2goImFnLWZ1bGwtd2lkdGgtcm93IiksZS5leHBhbmRhYmxlJiYodC5wdXNoKCJhZy1yb3ctZ3JvdXAiKSx0LnB1c2goZS5yb3dOb2RlLmV4cGFuZGVkPyJhZy1yb3ctZ3JvdXAtZXhwYW5kZWQiOiJhZy1yb3ctZ3JvdXAtY29udHJhY3RlZCIpKSxlLnJvd05vZGUuZHJhZ2dpbmcmJnQucHVzaCgiYWctcm93LWRyYWdnaW5nIiksV2UodCx0aGlzLnByb2Nlc3NDbGFzc2VzRnJvbUdyaWRPcHRpb25zKGUucm93Tm9kZSkpLFdlKHQsdGhpcy5wcmVQcm9jZXNzUm93Q2xhc3NSdWxlcyhlLnJvd05vZGUpKSx0LnB1c2goZS5wcmludExheW91dD8iYWctcm93LXBvc2l0aW9uLXJlbGF0aXZlIjoiYWctcm93LXBvc2l0aW9uLWFic29sdXRlIiksZS5maXJzdFJvd09uUGFnZSYmdC5wdXNoKCJhZy1yb3ctZmlyc3QiKSxlLmxhc3RSb3dPblBhZ2UmJnQucHVzaCgiYWctcm93LWxhc3QiKSxlLmZ1bGxXaWR0aFJvdyYmKCJsZWZ0Ij09PWUucGlubmVkJiZ0LnB1c2goImFnLWNlbGwtbGFzdC1sZWZ0LXBpbm5lZCIpLCJyaWdodCI9PT1lLnBpbm5lZCYmdC5wdXNoKCJhZy1jZWxsLWZpcnN0LXJpZ2h0LXBpbm5lZCIpKSx0fXByb2Nlc3NDbGFzc2VzRnJvbUdyaWRPcHRpb25zKGUpe2NvbnN0IHQ9W10saT1lPT57InN0cmluZyI9PXR5cGVvZiBlP3QucHVzaChlKTpBcnJheS5pc0FycmF5KGUpJiZlLmZvckVhY2goZT0+dC5wdXNoKGUpKX0scz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0NsYXNzIik7aWYocyl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHMpcmV0dXJuIGNvbnNvbGUud2FybigiQUcgR3JpZDogcm93Q2xhc3Mgc2hvdWxkIG5vdCBiZSBhIGZ1bmN0aW9uLCBwbGVhc2UgdXNlIGdldFJvd0NsYXNzIGluc3RlYWQiKSxbXTtpKHMpfWNvbnN0IHI9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soImdldFJvd0NsYXNzIik7aWYocil7aShyKHtkYXRhOmUuZGF0YSxub2RlOmUscm93SW5kZXg6ZS5yb3dJbmRleH0pKX1yZXR1cm4gdH1wcmVQcm9jZXNzUm93Q2xhc3NSdWxlcyhlKXtjb25zdCB0PVtdO3JldHVybiB0aGlzLnByb2Nlc3NSb3dDbGFzc1J1bGVzKGUsZT0+e3QucHVzaChlKX0sZT0+e30pLHR9cHJvY2Vzc1Jvd0NsYXNzUnVsZXMoZSx0LGkpe2NvbnN0IHM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7ZGF0YTplLmRhdGEsbm9kZTplLHJvd0luZGV4OmUucm93SW5kZXh9KTt0aGlzLnN0eWxpbmdTZXJ2aWNlLnByb2Nlc3NDbGFzc1J1bGVzKHZvaWQgMCx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0NsYXNzUnVsZXMiKSxzLHQsaSl9Y2FsY3VsYXRlUm93TGV2ZWwoZSl7cmV0dXJuIGUuZ3JvdXA/ZS5sZXZlbDplLnBhcmVudD9lLnBhcmVudC5sZXZlbCsxOjB9fTtqaChbY2UoInN0eWxpbmdTZXJ2aWNlIildLFVoLnByb3RvdHlwZSwic3R5bGluZ1NlcnZpY2UiLHZvaWQgMCksamgoW2NlKCJncmlkT3B0aW9uc1NlcnZpY2UiKV0sVWgucHJvdG90eXBlLCJncmlkT3B0aW9uc1NlcnZpY2UiLHZvaWQgMCksVWg9amgoW2RlKCJyb3dDc3NDbGFzc0NhbGN1bGF0b3IiKV0sVWgpO3ZhciB6aD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgS2g9Y2xhc3MgZXh0ZW5kcyBpdHtpbml0KCl7dGhpcy5pc0FjY2VudGVkU29ydD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImFjY2VudGVkU29ydCIpLHRoaXMucHJpbWFyeUNvbHVtbnNTb3J0R3JvdXBzPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzQ29sdW1uc1NvcnRpbmdDb3VwbGVkVG9Hcm91cCgpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoImFjY2VudGVkU29ydCIsZT0+dGhpcy5pc0FjY2VudGVkU29ydD1lLmN1cnJlbnRWYWx1ZSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiYXV0b0dyb3VwQ29sdW1uRGVmIiwoKT0+dGhpcy5wcmltYXJ5Q29sdW1uc1NvcnRHcm91cHM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNDb2x1bW5zU29ydGluZ0NvdXBsZWRUb0dyb3VwKCkpfWRvRnVsbFNvcnQoZSx0KXtjb25zdCBpPWUubWFwKChlLHQpPT4oe2N1cnJlbnRQb3M6dCxyb3dOb2RlOmV9KSk7cmV0dXJuIGkuc29ydCh0aGlzLmNvbXBhcmVSb3dOb2Rlcy5iaW5kKHRoaXMsdCkpLGkubWFwKGU9PmUucm93Tm9kZSl9Y29tcGFyZVJvd05vZGVzKGUsdCxpKXtjb25zdCBzPXQucm93Tm9kZSxyPWkucm93Tm9kZTtmb3IobGV0IHQ9MCxpPWUubGVuZ3RoO3Q8aTt0Kyspe2NvbnN0IGk9ZVt0XSxvPSJkZXNjIj09PWkuc29ydCxuPXRoaXMuZ2V0VmFsdWUocyxpLmNvbHVtbiksYT10aGlzLmdldFZhbHVlKHIsaS5jb2x1bW4pO2xldCBsO2NvbnN0IGQ9dGhpcy5nZXRDb21wYXJhdG9yKGkscyk7bD1kP2QobixhLHMscixvKTpRcy5kZWZhdWx0Q29tcGFyYXRvcihuLGEsdGhpcy5pc0FjY2VudGVkU29ydCk7aWYoIWlzTmFOKGwpJiYwIT09bClyZXR1cm4iYXNjIj09PWkuc29ydD9sOi0xKmx9cmV0dXJuIHQuY3VycmVudFBvcy1pLmN1cnJlbnRQb3N9Z2V0Q29tcGFyYXRvcihlLHQpe2NvbnN0IGk9ZS5jb2x1bW4scz1pLmdldENvbERlZigpLmNvbXBhcmF0b3I7aWYobnVsbCE9cylyZXR1cm4gcztpZighaS5nZXRDb2xEZWYoKS5zaG93Um93R3JvdXApcmV0dXJuO2NvbnN0IHI9IXQuZ3JvdXAmJmkuZ2V0Q29sRGVmKCkuZmllbGQ7aWYoIXIpcmV0dXJuO2NvbnN0IG89dGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKHIpO3JldHVybiBvP28uZ2V0Q29sRGVmKCkuY29tcGFyYXRvcjp2b2lkIDB9Z2V0VmFsdWUoZSx0KXt2YXIgaSxzO2lmKCF0aGlzLnByaW1hcnlDb2x1bW5zU29ydEdyb3VwcylyZXR1cm4gdGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUodCxlLCExLCExKTtpZihlLnJvd0dyb3VwQ29sdW1uPT09dCl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNHcm91cFVzZUVudGlyZVJvdyh0aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RBY3RpdmUoKSkpe2NvbnN0IHM9bnVsbD09PShpPWUuYWxsTGVhZkNoaWxkcmVuKXx8dm9pZCAwPT09aT92b2lkIDA6aVswXTtyZXR1cm4gcz90aGlzLnZhbHVlU2VydmljZS5nZXRWYWx1ZSh0LHMsITEsITEpOnZvaWQgMH1jb25zdCByPXRoaXMuY29sdW1uTW9kZWwuZ2V0R3JvdXBEaXNwbGF5Q29sdW1uRm9yR3JvdXAodC5nZXRJZCgpKTtpZighcilyZXR1cm47cmV0dXJuIG51bGw9PT0ocz1lLmdyb3VwRGF0YSl8fHZvaWQgMD09PXM/dm9pZCAwOnNbci5nZXRJZCgpXX1yZXR1cm4gZS5ncm91cCYmdC5nZXRDb2xEZWYoKS5zaG93Um93R3JvdXA/dm9pZCAwOnRoaXMudmFsdWVTZXJ2aWNlLmdldFZhbHVlKHQsZSwhMSwhMSl9fTt6aChbY2UoInZhbHVlU2VydmljZSIpXSxLaC5wcm90b3R5cGUsInZhbHVlU2VydmljZSIsdm9pZCAwKSx6aChbY2UoImNvbHVtbk1vZGVsIildLEtoLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksemgoW2FlXSxLaC5wcm90b3R5cGUsImluaXQiLG51bGwpLEtoPXpoKFtkZSgicm93Tm9kZVNvcnRlciIpXSxLaCk7dmFyIFloLCRoPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBYaD1ZaD1jbGFzcyBleHRlbmRzIGl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnJlYWR5PSExLHRoaXMucmVhZHlDYWxsYmFja3M9W119Y2hlY2tSZWFkeSgpe2lmKHRoaXMucmVhZHk9bnVsbCE9dGhpcy5ncmlkQ3RybCYmbnVsbCE9dGhpcy5ncmlkQm9keUN0cmwmJm51bGwhPXRoaXMuY2VudGVyUm93Q29udGFpbmVyQ3RybCYmbnVsbCE9dGhpcy5sZWZ0Um93Q29udGFpbmVyQ3RybCYmbnVsbCE9dGhpcy5yaWdodFJvd0NvbnRhaW5lckN0cmwmJm51bGwhPXRoaXMuYm90dG9tQ2VudGVyUm93Q29udGFpbmVyQ3RybCYmbnVsbCE9dGhpcy5ib3R0b21MZWZ0Um93Q29udGFpbmVyQ3RybCYmbnVsbCE9dGhpcy5ib3R0b21SaWdodFJvd0NvbnRhaW5lckN0cmwmJm51bGwhPXRoaXMudG9wQ2VudGVyUm93Q29udGFpbmVyQ3RybCYmbnVsbCE9dGhpcy50b3BMZWZ0Um93Q29udGFpbmVyQ3RybCYmbnVsbCE9dGhpcy50b3BSaWdodFJvd0NvbnRhaW5lckN0cmwmJm51bGwhPXRoaXMuc3RpY2t5VG9wQ2VudGVyUm93Q29udGFpbmVyQ3RybCYmbnVsbCE9dGhpcy5zdGlja3lUb3BMZWZ0Um93Q29udGFpbmVyQ3RybCYmbnVsbCE9dGhpcy5zdGlja3lUb3BSaWdodFJvd0NvbnRhaW5lckN0cmwmJm51bGwhPXRoaXMuY2VudGVySGVhZGVyUm93Q29udGFpbmVyQ3RybCYmbnVsbCE9dGhpcy5sZWZ0SGVhZGVyUm93Q29udGFpbmVyQ3RybCYmbnVsbCE9dGhpcy5yaWdodEhlYWRlclJvd0NvbnRhaW5lckN0cmwmJm51bGwhPXRoaXMuZmFrZUhTY3JvbGxDb21wJiZudWxsIT10aGlzLmZha2VWU2Nyb2xsQ29tcCYmbnVsbCE9dGhpcy5ncmlkSGVhZGVyQ3RybCx0aGlzLnJlYWR5KXtjb25zdCBlPXRoaXMuY3JlYXRlUmVhZHlQYXJhbXMoKTt0aGlzLnJlYWR5Q2FsbGJhY2tzLmZvckVhY2godD0+dChlKSksdGhpcy5yZWFkeUNhbGxiYWNrcy5sZW5ndGg9MH19d2hlblJlYWR5KGUpe3RoaXMucmVhZHk/ZSh0aGlzLmNyZWF0ZVJlYWR5UGFyYW1zKCkpOnRoaXMucmVhZHlDYWxsYmFja3MucHVzaChlKX1jcmVhdGVSZWFkeVBhcmFtcygpe3JldHVybntjZW50ZXJSb3dDb250YWluZXJDdHJsOnRoaXMuY2VudGVyUm93Q29udGFpbmVyQ3RybCxsZWZ0Um93Q29udGFpbmVyQ3RybDp0aGlzLmxlZnRSb3dDb250YWluZXJDdHJsLHJpZ2h0Um93Q29udGFpbmVyQ3RybDp0aGlzLnJpZ2h0Um93Q29udGFpbmVyQ3RybCxib3R0b21DZW50ZXJSb3dDb250YWluZXJDdHJsOnRoaXMuYm90dG9tQ2VudGVyUm93Q29udGFpbmVyQ3RybCxib3R0b21MZWZ0Um93Q29udGFpbmVyQ3RybDp0aGlzLmJvdHRvbUxlZnRSb3dDb250YWluZXJDdHJsLGJvdHRvbVJpZ2h0Um93Q29udGFpbmVyQ3RybDp0aGlzLmJvdHRvbVJpZ2h0Um93Q29udGFpbmVyQ3RybCx0b3BDZW50ZXJSb3dDb250YWluZXJDdHJsOnRoaXMudG9wQ2VudGVyUm93Q29udGFpbmVyQ3RybCx0b3BMZWZ0Um93Q29udGFpbmVyQ3RybDp0aGlzLnRvcExlZnRSb3dDb250YWluZXJDdHJsLHRvcFJpZ2h0Um93Q29udGFpbmVyQ3RybDp0aGlzLnRvcFJpZ2h0Um93Q29udGFpbmVyQ3RybCxzdGlja3lUb3BDZW50ZXJSb3dDb250YWluZXJDdHJsOnRoaXMuc3RpY2t5VG9wQ2VudGVyUm93Q29udGFpbmVyQ3RybCxzdGlja3lUb3BMZWZ0Um93Q29udGFpbmVyQ3RybDp0aGlzLnN0aWNreVRvcExlZnRSb3dDb250YWluZXJDdHJsLHN0aWNreVRvcFJpZ2h0Um93Q29udGFpbmVyQ3RybDp0aGlzLnN0aWNreVRvcFJpZ2h0Um93Q29udGFpbmVyQ3RybCxjZW50ZXJIZWFkZXJSb3dDb250YWluZXJDdHJsOnRoaXMuY2VudGVySGVhZGVyUm93Q29udGFpbmVyQ3RybCxsZWZ0SGVhZGVyUm93Q29udGFpbmVyQ3RybDp0aGlzLmxlZnRIZWFkZXJSb3dDb250YWluZXJDdHJsLHJpZ2h0SGVhZGVyUm93Q29udGFpbmVyQ3RybDp0aGlzLnJpZ2h0SGVhZGVyUm93Q29udGFpbmVyQ3RybCxmYWtlSFNjcm9sbENvbXA6dGhpcy5mYWtlSFNjcm9sbENvbXAsZmFrZVZTY3JvbGxDb21wOnRoaXMuZmFrZVZTY3JvbGxDb21wLGdyaWRCb2R5Q3RybDp0aGlzLmdyaWRCb2R5Q3RybCxncmlkQ3RybDp0aGlzLmdyaWRDdHJsLGdyaWRIZWFkZXJDdHJsOnRoaXMuZ3JpZEhlYWRlckN0cmx9fXJlZ2lzdGVyRmFrZUhTY3JvbGxDb21wKGUpe3RoaXMuZmFrZUhTY3JvbGxDb21wPWUsdGhpcy5jaGVja1JlYWR5KCl9cmVnaXN0ZXJGYWtlVlNjcm9sbENvbXAoZSl7dGhpcy5mYWtlVlNjcm9sbENvbXA9ZSx0aGlzLmNoZWNrUmVhZHkoKX1yZWdpc3RlckdyaWRIZWFkZXJDdHJsKGUpe3RoaXMuZ3JpZEhlYWRlckN0cmw9ZSx0aGlzLmNoZWNrUmVhZHkoKX1yZWdpc3RlckNlbnRlclJvd0NvbnRhaW5lckN0cmwoZSl7dGhpcy5jZW50ZXJSb3dDb250YWluZXJDdHJsPWUsdGhpcy5jaGVja1JlYWR5KCl9cmVnaXN0ZXJMZWZ0Um93Q29udGFpbmVyQ3RybChlKXt0aGlzLmxlZnRSb3dDb250YWluZXJDdHJsPWUsdGhpcy5jaGVja1JlYWR5KCl9cmVnaXN0ZXJSaWdodFJvd0NvbnRhaW5lckN0cmwoZSl7dGhpcy5yaWdodFJvd0NvbnRhaW5lckN0cmw9ZSx0aGlzLmNoZWNrUmVhZHkoKX1yZWdpc3RlclRvcENlbnRlclJvd0NvbnRhaW5lckN0cmwoZSl7dGhpcy50b3BDZW50ZXJSb3dDb250YWluZXJDdHJsPWUsdGhpcy5jaGVja1JlYWR5KCl9cmVnaXN0ZXJUb3BMZWZ0Um93Q29udGFpbmVyQ29uKGUpe3RoaXMudG9wTGVmdFJvd0NvbnRhaW5lckN0cmw9ZSx0aGlzLmNoZWNrUmVhZHkoKX1yZWdpc3RlclRvcFJpZ2h0Um93Q29udGFpbmVyQ3RybChlKXt0aGlzLnRvcFJpZ2h0Um93Q29udGFpbmVyQ3RybD1lLHRoaXMuY2hlY2tSZWFkeSgpfXJlZ2lzdGVyU3RpY2t5VG9wQ2VudGVyUm93Q29udGFpbmVyQ3RybChlKXt0aGlzLnN0aWNreVRvcENlbnRlclJvd0NvbnRhaW5lckN0cmw9ZSx0aGlzLmNoZWNrUmVhZHkoKX1yZWdpc3RlclN0aWNreVRvcExlZnRSb3dDb250YWluZXJDb24oZSl7dGhpcy5zdGlja3lUb3BMZWZ0Um93Q29udGFpbmVyQ3RybD1lLHRoaXMuY2hlY2tSZWFkeSgpfXJlZ2lzdGVyU3RpY2t5VG9wUmlnaHRSb3dDb250YWluZXJDdHJsKGUpe3RoaXMuc3RpY2t5VG9wUmlnaHRSb3dDb250YWluZXJDdHJsPWUsdGhpcy5jaGVja1JlYWR5KCl9cmVnaXN0ZXJCb3R0b21DZW50ZXJSb3dDb250YWluZXJDdHJsKGUpe3RoaXMuYm90dG9tQ2VudGVyUm93Q29udGFpbmVyQ3RybD1lLHRoaXMuY2hlY2tSZWFkeSgpfXJlZ2lzdGVyQm90dG9tTGVmdFJvd0NvbnRhaW5lckN0cmwoZSl7dGhpcy5ib3R0b21MZWZ0Um93Q29udGFpbmVyQ3RybD1lLHRoaXMuY2hlY2tSZWFkeSgpfXJlZ2lzdGVyQm90dG9tUmlnaHRSb3dDb250YWluZXJDdHJsKGUpe3RoaXMuYm90dG9tUmlnaHRSb3dDb250YWluZXJDdHJsPWUsdGhpcy5jaGVja1JlYWR5KCl9cmVnaXN0ZXJIZWFkZXJDb250YWluZXIoZSx0KXtzd2l0Y2godCl7Y2FzZSJsZWZ0Ijp0aGlzLmxlZnRIZWFkZXJSb3dDb250YWluZXJDdHJsPWU7YnJlYWs7Y2FzZSJyaWdodCI6dGhpcy5yaWdodEhlYWRlclJvd0NvbnRhaW5lckN0cmw9ZTticmVhaztkZWZhdWx0OnRoaXMuY2VudGVySGVhZGVyUm93Q29udGFpbmVyQ3RybD1lfXRoaXMuY2hlY2tSZWFkeSgpfXJlZ2lzdGVyR3JpZEJvZHlDdHJsKGUpe3RoaXMuZ3JpZEJvZHlDdHJsPWUsdGhpcy5jaGVja1JlYWR5KCl9cmVnaXN0ZXJHcmlkQ3RybChlKXt0aGlzLmdyaWRDdHJsPWUsdGhpcy5jaGVja1JlYWR5KCl9Z2V0RmFrZUhTY3JvbGxDb21wKCl7cmV0dXJuIHRoaXMuZmFrZUhTY3JvbGxDb21wfWdldEZha2VWU2Nyb2xsQ29tcCgpe3JldHVybiB0aGlzLmZha2VWU2Nyb2xsQ29tcH1nZXRHcmlkSGVhZGVyQ3RybCgpe3JldHVybiB0aGlzLmdyaWRIZWFkZXJDdHJsfWdldEdyaWRDdHJsKCl7cmV0dXJuIHRoaXMuZ3JpZEN0cmx9Z2V0Q2VudGVyUm93Q29udGFpbmVyQ3RybCgpe3JldHVybiB0aGlzLmNlbnRlclJvd0NvbnRhaW5lckN0cmx9Z2V0VG9wQ2VudGVyUm93Q29udGFpbmVyQ3RybCgpe3JldHVybiB0aGlzLnRvcENlbnRlclJvd0NvbnRhaW5lckN0cmx9Z2V0Qm90dG9tQ2VudGVyUm93Q29udGFpbmVyQ3RybCgpe3JldHVybiB0aGlzLmJvdHRvbUNlbnRlclJvd0NvbnRhaW5lckN0cmx9Z2V0U3RpY2t5VG9wQ2VudGVyUm93Q29udGFpbmVyQ3RybCgpe3JldHVybiB0aGlzLnN0aWNreVRvcENlbnRlclJvd0NvbnRhaW5lckN0cmx9Z2V0R3JpZEJvZHlDdHJsKCl7cmV0dXJuIHRoaXMuZ3JpZEJvZHlDdHJsfWdldEhlYWRlclJvd0NvbnRhaW5lckN0cmxzKCl7cmV0dXJuW3RoaXMubGVmdEhlYWRlclJvd0NvbnRhaW5lckN0cmwsdGhpcy5yaWdodEhlYWRlclJvd0NvbnRhaW5lckN0cmwsdGhpcy5jZW50ZXJIZWFkZXJSb3dDb250YWluZXJDdHJsXX1nZXRIZWFkZXJSb3dDb250YWluZXJDdHJsKGUpe3N3aXRjaChlKXtjYXNlImxlZnQiOnJldHVybiB0aGlzLmxlZnRIZWFkZXJSb3dDb250YWluZXJDdHJsO2Nhc2UicmlnaHQiOnJldHVybiB0aGlzLnJpZ2h0SGVhZGVyUm93Q29udGFpbmVyQ3RybDtkZWZhdWx0OnJldHVybiB0aGlzLmNlbnRlckhlYWRlclJvd0NvbnRhaW5lckN0cmx9fX07WGguTkFNRT0iY3RybHNTZXJ2aWNlIixYaD1ZaD0kaChbZGUoWWguTkFNRSldLFhoKTt2YXIgcWg9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IFpoPWNsYXNzIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMucmVnaXN0cnk9e319cmVnaXN0ZXIoZSl7dGhpcy5yZWdpc3RyeVtlLmNvbnRyb2xsZXJOYW1lXT1lLmNvbnRyb2xsZXJDbGFzc31nZXRJbnN0YW5jZShlKXtjb25zdCB0PXRoaXMucmVnaXN0cnlbZV07aWYobnVsbCE9dClyZXR1cm4gbmV3IHR9fTtaaD1xaChbZGUoImN0cmxzRmFjdG9yeSIpXSxaaCk7dmFyIFFoPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIEpoIGV4dGVuZHMgY3J7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLmRpcmVjdGlvbj10LHRoaXMuaGlkZVRpbWVvdXQ9bnVsbH1wb3N0Q29uc3RydWN0KCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfU0NST0xMX1ZJU0lCSUxJVFlfQ0hBTkdFRCx0aGlzLm9uU2Nyb2xsVmlzaWJpbGl0eUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5vblNjcm9sbFZpc2liaWxpdHlDaGFuZ2VkKCksdGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1hcHBsZS1zY3JvbGxiYXIiLFBpKCl8fE1pKCkpfWluaXRpYWxpc2VJbnZpc2libGVTY3JvbGxiYXIoKXt2b2lkIDA9PT10aGlzLmludmlzaWJsZVNjcm9sbGJhciYmKHRoaXMuaW52aXNpYmxlU2Nyb2xsYmFyPVZpKCksdGhpcy5pbnZpc2libGVTY3JvbGxiYXImJih0aGlzLmhpZGVBbmRTaG93SW52aXNpYmxlU2Nyb2xsQXNOZWVkZWQoKSx0aGlzLmFkZEFjdGl2ZUxpc3RlbmVyVG9nZ2xlcygpKSl9YWRkQWN0aXZlTGlzdGVuZXJUb2dnbGVzKCl7Y29uc3QgZT10aGlzLmdldEd1aSgpO1sibW91c2VlbnRlciIsIm1vdXNlZG93biIsInRvdWNoc3RhcnQiXS5mb3JFYWNoKHQ9PnRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsdCwoKT0+dGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1zY3JvbGxiYXItYWN0aXZlIiwhMCkpKSxbIm1vdXNlbGVhdmUiLCJ0b3VjaGVuZCJdLmZvckVhY2godD0+dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSx0LCgpPT50aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXNjcm9sbGJhci1hY3RpdmUiLCExKSkpfW9uU2Nyb2xsVmlzaWJpbGl0eUNoYW5nZWQoKXt2b2lkIDA9PT10aGlzLmludmlzaWJsZVNjcm9sbGJhciYmdGhpcy5pbml0aWFsaXNlSW52aXNpYmxlU2Nyb2xsYmFyKCksdGhpcy5hbmltYXRpb25GcmFtZVNlcnZpY2UucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpPT50aGlzLnNldFNjcm9sbFZpc2libGUoKSl9aGlkZUFuZFNob3dJbnZpc2libGVTY3JvbGxBc05lZWRlZCgpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0JPRFlfU0NST0xMLGU9PntlLmRpcmVjdGlvbj09PXRoaXMuZGlyZWN0aW9uJiYobnVsbCE9PXRoaXMuaGlkZVRpbWVvdXQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpLHRoaXMuaGlkZVRpbWVvdXQ9bnVsbCksdGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1zY3JvbGxiYXItc2Nyb2xsaW5nIiwhMCkpfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQk9EWV9TQ1JPTExfRU5ELCgpPT57dGhpcy5oaWRlVGltZW91dD13aW5kb3cuc2V0VGltZW91dCgoKT0+e3RoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctc2Nyb2xsYmFyLXNjcm9sbGluZyIsITEpLHRoaXMuaGlkZVRpbWVvdXQ9bnVsbH0sNDAwKX0pfWF0dGVtcHRTZXR0aW5nU2Nyb2xsUG9zaXRpb24oZSl7Y29uc3QgdD10aGlzLmdldFZpZXdwb3J0KCk7ZWUoKCk9PkNzKHQpLCgpPT50aGlzLnNldFNjcm9sbFBvc2l0aW9uKGUpLDEwMCl9Z2V0Vmlld3BvcnQoKXtyZXR1cm4gdGhpcy5lVmlld3BvcnR9Z2V0Q29udGFpbmVyKCl7cmV0dXJuIHRoaXMuZUNvbnRhaW5lcn1vblNjcm9sbENhbGxiYWNrKGUpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZ2V0Vmlld3BvcnQoKSwic2Nyb2xsIixlKX19UWgoW3VyKCJlVmlld3BvcnQiKV0sSmgucHJvdG90eXBlLCJlVmlld3BvcnQiLHZvaWQgMCksUWgoW3VyKCJlQ29udGFpbmVyIildLEpoLnByb3RvdHlwZSwiZUNvbnRhaW5lciIsdm9pZCAwKSxRaChbY2UoInNjcm9sbFZpc2libGVTZXJ2aWNlIildLEpoLnByb3RvdHlwZSwic2Nyb2xsVmlzaWJsZVNlcnZpY2UiLHZvaWQgMCksUWgoW2NlKCJjdHJsc1NlcnZpY2UiKV0sSmgucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksUWgoW2NlKCJhbmltYXRpb25GcmFtZVNlcnZpY2UiKV0sSmgucHJvdG90eXBlLCJhbmltYXRpb25GcmFtZVNlcnZpY2UiLHZvaWQgMCk7dmFyIGV1PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIHR1IGV4dGVuZHMgSmh7Y29uc3RydWN0b3IoKXtzdXBlcih0dS5URU1QTEFURSwiaG9yaXpvbnRhbCIpfXBvc3RDb25zdHJ1Y3QoKXtzdXBlci5wb3N0Q29uc3RydWN0KCk7Y29uc3QgZT10aGlzLnNldEZha2VIU2Nyb2xsU3BhY2VyV2lkdGhzLmJpbmQodGhpcyk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRElTUExBWUVEX0NPTFVNTlNfQ0hBTkdFRCxlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ESVNQTEFZRURfQ09MVU1OU19XSURUSF9DSEFOR0VELGUpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1BJTk5FRF9ST1dfREFUQV9DSEFOR0VELHRoaXMub25QaW5uZWRSb3dEYXRhQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJkb21MYXlvdXQiLGUpLHRoaXMuY3RybHNTZXJ2aWNlLnJlZ2lzdGVyRmFrZUhTY3JvbGxDb21wKHRoaXMpLHRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IFdhKGU9PnRoaXMuZUNvbnRhaW5lci5zdHlsZS53aWR0aD1lKyJweCIpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhbInN1cHByZXNzSG9yaXpvbnRhbFNjcm9sbCJdLHRoaXMub25TY3JvbGxWaXNpYmlsaXR5Q2hhbmdlZC5iaW5kKHRoaXMpKX1pbml0aWFsaXNlSW52aXNpYmxlU2Nyb2xsYmFyKCl7dm9pZCAwPT09dGhpcy5pbnZpc2libGVTY3JvbGxiYXImJih0aGlzLmVuYWJsZVJ0bD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpLHN1cGVyLmluaXRpYWxpc2VJbnZpc2libGVTY3JvbGxiYXIoKSx0aGlzLmludmlzaWJsZVNjcm9sbGJhciYmdGhpcy5yZWZyZXNoQ29tcEJvdHRvbSgpKX1vblBpbm5lZFJvd0RhdGFDaGFuZ2VkKCl7dGhpcy5yZWZyZXNoQ29tcEJvdHRvbSgpfXJlZnJlc2hDb21wQm90dG9tKCl7aWYoIXRoaXMuaW52aXNpYmxlU2Nyb2xsYmFyKXJldHVybjtjb25zdCBlPXRoaXMucGlubmVkUm93TW9kZWwuZ2V0UGlubmVkQm90dG9tVG90YWxIZWlnaHQoKTt0aGlzLmdldEd1aSgpLnN0eWxlLmJvdHRvbT1lKyJweCJ9b25TY3JvbGxWaXNpYmlsaXR5Q2hhbmdlZCgpe3N1cGVyLm9uU2Nyb2xsVmlzaWJpbGl0eUNoYW5nZWQoKSx0aGlzLnNldEZha2VIU2Nyb2xsU3BhY2VyV2lkdGhzKCl9c2V0RmFrZUhTY3JvbGxTcGFjZXJXaWR0aHMoKXtjb25zdCBlPXRoaXMuc2Nyb2xsVmlzaWJsZVNlcnZpY2UuaXNWZXJ0aWNhbFNjcm9sbFNob3dpbmcoKTtsZXQgdD10aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXllZENvbHVtbnNSaWdodFdpZHRoKCk7Y29uc3QgaT0hdGhpcy5lbmFibGVSdGwmJmUscz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRTY3JvbGxiYXJXaWR0aCgpO2kmJih0Kz1zKSxEcyh0aGlzLmVSaWdodFNwYWNlcix0KSx0aGlzLmVSaWdodFNwYWNlci5jbGFzc0xpc3QudG9nZ2xlKCJhZy1zY3JvbGxlci1jb3JuZXIiLHQ8PXMpO2xldCByPXRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheWVkQ29sdW1uc0xlZnRXaWR0aCgpO3RoaXMuZW5hYmxlUnRsJiZlJiYocis9cyksRHModGhpcy5lTGVmdFNwYWNlcixyKSx0aGlzLmVMZWZ0U3BhY2VyLmNsYXNzTGlzdC50b2dnbGUoImFnLXNjcm9sbGVyLWNvcm5lciIscjw9cyl9c2V0U2Nyb2xsVmlzaWJsZSgpe2NvbnN0IGU9dGhpcy5zY3JvbGxWaXNpYmxlU2VydmljZS5pc0hvcml6b250YWxTY3JvbGxTaG93aW5nKCksdD10aGlzLmludmlzaWJsZVNjcm9sbGJhcixpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NIb3Jpem9udGFsU2Nyb2xsIikscz1lJiZ0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRTY3JvbGxiYXJXaWR0aCgpfHwwLHI9aT8wOjA9PT1zJiZ0PzE2OnM7dGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1zY3JvbGxiYXItaW52aXNpYmxlIix0KSxBcyh0aGlzLmdldEd1aSgpLHIpLEFzKHRoaXMuZVZpZXdwb3J0LHIpLEFzKHRoaXMuZUNvbnRhaW5lcixyKSx0aGlzLnNldERpc3BsYXllZChlLHtza2lwQXJpYUhpZGRlbjohMH0pfWdldFNjcm9sbFBvc2l0aW9uKCl7cmV0dXJuIHBzKHRoaXMuZ2V0Vmlld3BvcnQoKSx0aGlzLmVuYWJsZVJ0bCl9c2V0U2Nyb2xsUG9zaXRpb24oZSl7Q3ModGhpcy5nZXRWaWV3cG9ydCgpKXx8dGhpcy5hdHRlbXB0U2V0dGluZ1Njcm9sbFBvc2l0aW9uKGUpLGdzKHRoaXMuZ2V0Vmlld3BvcnQoKSxlLHRoaXMuZW5hYmxlUnRsKX19dHUuVEVNUExBVEU9JzxkaXYgY2xhc3M9ImFnLWJvZHktaG9yaXpvbnRhbC1zY3JvbGwiIGFyaWEtaGlkZGVuPSJ0cnVlIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWhvcml6b250YWwtbGVmdC1zcGFjZXIiIHJlZj0iZUxlZnRTcGFjZXIiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctYm9keS1ob3Jpem9udGFsLXNjcm9sbC12aWV3cG9ydCIgcmVmPSJlVmlld3BvcnQiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWJvZHktaG9yaXpvbnRhbC1zY3JvbGwtY29udGFpbmVyIiByZWY9ImVDb250YWluZXIiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1ob3Jpem9udGFsLXJpZ2h0LXNwYWNlciIgcmVmPSJlUmlnaHRTcGFjZXIiPjwvZGl2PlxuICAgICAgICA8L2Rpdj4nLGV1KFt1cigiZUxlZnRTcGFjZXIiKV0sdHUucHJvdG90eXBlLCJlTGVmdFNwYWNlciIsdm9pZCAwKSxldShbdXIoImVSaWdodFNwYWNlciIpXSx0dS5wcm90b3R5cGUsImVSaWdodFNwYWNlciIsdm9pZCAwKSxldShbY2UoImNvbHVtbk1vZGVsIildLHR1LnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksZXUoW2NlKCJwaW5uZWRSb3dNb2RlbCIpXSx0dS5wcm90b3R5cGUsInBpbm5lZFJvd01vZGVsIix2b2lkIDApLGV1KFthZV0sdHUucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgaXU9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IHN1PWNsYXNzIGV4dGVuZHMgaXR7cG9zdENvbnN0cnVjdCgpe2NvbnN0IGU9dGhpcy5jaGVja0NvbnRhaW5lcldpZHRocy5iaW5kKHRoaXMpO3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0RJU1BMQVlFRF9DT0xVTU5TX0NIQU5HRUQsZSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRElTUExBWUVEX0NPTFVNTlNfV0lEVEhfQ0hBTkdFRCxlKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJkb21MYXlvdXQiLGUpfWNoZWNrQ29udGFpbmVyV2lkdGhzKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0RvbUxheW91dCgicHJpbnQiKSx0PWU/MDp0aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXllZENvbHVtbnNMZWZ0V2lkdGgoKSxpPWU/MDp0aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXllZENvbHVtbnNSaWdodFdpZHRoKCk7dCE9dGhpcy5sZWZ0V2lkdGgmJih0aGlzLmxlZnRXaWR0aD10LHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6bHQuRVZFTlRfTEVGVF9QSU5ORURfV0lEVEhfQ0hBTkdFRH0pKSxpIT10aGlzLnJpZ2h0V2lkdGgmJih0aGlzLnJpZ2h0V2lkdGg9aSx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHt0eXBlOmx0LkVWRU5UX1JJR0hUX1BJTk5FRF9XSURUSF9DSEFOR0VEfSkpfWdldFBpbm5lZFJpZ2h0V2lkdGgoKXtyZXR1cm4gdGhpcy5yaWdodFdpZHRofWdldFBpbm5lZExlZnRXaWR0aCgpe3JldHVybiB0aGlzLmxlZnRXaWR0aH19O2l1KFtjZSgiY29sdW1uTW9kZWwiKV0sc3UucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxpdShbYWVdLHN1LnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksc3U9aXUoW2RlKCJwaW5uZWRXaWR0aFNlcnZpY2UiKV0sc3UpO3ZhciBydT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgb3U9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5ldmVudHM9W119cG9zdENvbnN0cnVjdCgpeyJjbGllbnRTaWRlIj09dGhpcy5yb3dNb2RlbC5nZXRUeXBlKCkmJih0aGlzLmNsaWVudFNpZGVSb3dNb2RlbD10aGlzLnJvd01vZGVsKX1kaXNwYXRjaEV4cGFuZGVkKGUpe2lmKG51bGw9PXRoaXMuY2xpZW50U2lkZVJvd01vZGVsKXJldHVybiB2b2lkIHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSk7dGhpcy5ldmVudHMucHVzaChlKTtjb25zdCB0PSgpPT57dGhpcy5jbGllbnRTaWRlUm93TW9kZWwmJnRoaXMuY2xpZW50U2lkZVJvd01vZGVsLm9uUm93R3JvdXBPcGVuZWQoKSx0aGlzLmV2ZW50cy5mb3JFYWNoKGU9PnRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSkpLHRoaXMuZXZlbnRzPVtdfTtudWxsPT10aGlzLmRpc3BhdGNoRXhwYW5kZWREZWJvdW5jZWQmJih0aGlzLmRpc3BhdGNoRXhwYW5kZWREZWJvdW5jZWQ9dGhpcy5hbmltYXRpb25GcmFtZVNlcnZpY2UuZGVib3VuY2UodCkpLHRoaXMuZGlzcGF0Y2hFeHBhbmRlZERlYm91bmNlZCgpfX07cnUoW2NlKCJhbmltYXRpb25GcmFtZVNlcnZpY2UiKV0sb3UucHJvdG90eXBlLCJhbmltYXRpb25GcmFtZVNlcnZpY2UiLHZvaWQgMCkscnUoW2NlKCJyb3dNb2RlbCIpXSxvdS5wcm90b3R5cGUsInJvd01vZGVsIix2b2lkIDApLHJ1KFthZV0sb3UucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxvdT1ydShbZGUoInJvd05vZGVFdmVudFRocm90dGxlIildLG91KTtjb25zdCBudT0oZSx0KT0+e3ZhciBpO3JldHVybiJjbGllbnRTaWRlIj09PShudWxsIT09KGk9dC5yb3dNb2RlbFR5cGUpJiZ2b2lkIDAhPT1pP2k6ImNsaWVudFNpZGUiKT97bW9kdWxlOnNlLlJvd0dyb3VwaW5nTW9kdWxlfTpudWxsfSxhdT17ZW5hYmxlUm93R3JvdXA6bnUscm93R3JvdXA6bnUscm93R3JvdXBJbmRleDpudSxlbmFibGVQaXZvdDpudSxlbmFibGVWYWx1ZTpudSxwaXZvdDpudSxwaXZvdEluZGV4Om51LGFnZ0Z1bmM6bnUsY2VsbEVkaXRvcjplPT4iYWdSaWNoU2VsZWN0Ij09PWUuY2VsbEVkaXRvcnx8ImFnUmljaFNlbGVjdENlbGxFZGl0b3IiPT09ZS5jZWxsRWRpdG9yP3ttb2R1bGU6c2UuUmljaFNlbGVjdE1vZHVsZX06bnVsbCxtZW51VGFiczplPT57dmFyIHQ7Y29uc3QgaT1bImNvbHVtbnNNZW51VGFiIiwiZ2VuZXJhbE1lbnVUYWIiXTtyZXR1cm4obnVsbD09PSh0PWUubWVudVRhYnMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNvbWUoZT0+aS5pbmNsdWRlcyhlKSkpP3ttb2R1bGU6c2UuTWVudU1vZHVsZX06bnVsbH0sY29sdW1uc01lbnVQYXJhbXM6e21vZHVsZTpbc2UuTWVudU1vZHVsZSxzZS5Db2x1bW5zVG9vbFBhbmVsTW9kdWxlXX0sY29sdW1uQ2hvb3NlclBhcmFtczp7bW9kdWxlOltzZS5NZW51TW9kdWxlLHNlLkNvbHVtbnNUb29sUGFuZWxNb2R1bGVdfSxoZWFkZXJDaGVja2JveFNlbGVjdGlvbjp7c3VwcG9ydGVkUm93TW9kZWxzOlsiY2xpZW50U2lkZSIsInNlcnZlclNpZGUiXSxkZXBlbmRlbmNpZXM6KGUse3Jvd1NlbGVjdGlvbjp0fSk9PiJtdWx0aXBsZSI9PT10P251bGw6ImhlYWRlckNoZWNrYm94U2VsZWN0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIHdpdGggcm93U2VsZWN0aW9uPW11bHRpcGxlIn0saGVhZGVyQ2hlY2tib3hTZWxlY3Rpb25GaWx0ZXJlZE9ubHk6e3N1cHBvcnRlZFJvd01vZGVsczpbImNsaWVudFNpZGUiXSxkZXBlbmRlbmNpZXM6KGUse3Jvd1NlbGVjdGlvbjp0fSk9PiJtdWx0aXBsZSI9PT10P251bGw6ImhlYWRlckNoZWNrYm94U2VsZWN0aW9uRmlsdGVyZWRPbmx5IGlzIG9ubHkgc3VwcG9ydGVkIHdpdGggcm93U2VsZWN0aW9uPW11bHRpcGxlIn0saGVhZGVyQ2hlY2tib3hTZWxlY3Rpb25DdXJyZW50UGFnZU9ubHk6e3N1cHBvcnRlZFJvd01vZGVsczpbImNsaWVudFNpZGUiXSxkZXBlbmRlbmNpZXM6KGUse3Jvd1NlbGVjdGlvbjp0fSk9PiJtdWx0aXBsZSI9PT10P251bGw6ImhlYWRlckNoZWNrYm94U2VsZWN0aW9uQ3VycmVudFBhZ2VPbmx5IGlzIG9ubHkgc3VwcG9ydGVkIHdpdGggcm93U2VsZWN0aW9uPW11bHRpcGxlIn0sY2hpbGRyZW46KCk9Pmx1fSxsdT17b2JqZWN0TmFtZToiY29sRGVmIixhbGxQcm9wZXJ0aWVzOkZuLkFMTF9QUk9QRVJUSUVTLGRvY3NVcmw6ImNvbHVtbi1wcm9wZXJ0aWVzLyIsZGVwcmVjYXRpb25zOntjb2x1bW5zTWVudVBhcmFtczp7dmVyc2lvbjoiMzEuMSIsbWVzc2FnZToiVXNlIGBjb2x1bW5DaG9vc2VyUGFyYW1zYCBpbnN0ZWFkLiJ9LHN1cHByZXNzTWVudTp7dmVyc2lvbjoiMzEuMSIsbWVzc2FnZToiVXNlIGBzdXBwcmVzc0hlYWRlck1lbnVCdXR0b25gIGluc3RlYWQuIn19LHZhbGlkYXRpb25zOmF1fSxkdT17c3VwcHJlc3NDb250ZXh0TWVudTohMSxwcmV2ZW50RGVmYXVsdE9uQ29udGV4dE1lbnU6ITEsYWxsb3dDb250ZXh0TWVudVdpdGhDb250cm9sS2V5OiExLHN1cHByZXNzTWVudUhpZGU6ITEsZW5hYmxlQnJvd3NlclRvb2x0aXBzOiExLHRvb2x0aXBUcmlnZ2VyOiJob3ZlciIsdG9vbHRpcFNob3dEZWxheToyZTMsdG9vbHRpcEhpZGVEZWxheToxZTQsdG9vbHRpcE1vdXNlVHJhY2s6ITEsdG9vbHRpcEludGVyYWN0aW9uOiExLGNvcHlIZWFkZXJzVG9DbGlwYm9hcmQ6ITEsY29weUdyb3VwSGVhZGVyc1RvQ2xpcGJvYXJkOiExLGNsaXBib2FyZERlbGltaXRlcjoiXHQiLHN1cHByZXNzQ29weVJvd3NUb0NsaXBib2FyZDohMSxzdXBwcmVzc0NvcHlTaW5nbGVDZWxsUmFuZ2VzOiExLHN1cHByZXNzTGFzdEVtcHR5TGluZU9uUGFzdGU6ITEsc3VwcHJlc3NDbGlwYm9hcmRQYXN0ZTohMSxzdXBwcmVzc0NsaXBib2FyZEFwaTohMSxzdXBwcmVzc0N1dFRvQ2xpcGJvYXJkOiExLG1haW50YWluQ29sdW1uT3JkZXI6ITEsc3VwcHJlc3NGaWVsZERvdE5vdGF0aW9uOiExLGFsbG93RHJhZ0Zyb21Db2x1bW5zVG9vbFBhbmVsOiExLHN1cHByZXNzTW92YWJsZUNvbHVtbnM6ITEsc3VwcHJlc3NDb2x1bW5Nb3ZlQW5pbWF0aW9uOiExLHN1cHByZXNzRHJhZ0xlYXZlSGlkZXNDb2x1bW5zOiExLHN1cHByZXNzUm93R3JvdXBIaWRlc0NvbHVtbnM6ITEsc3VwcHJlc3NBdXRvU2l6ZTohMSxhdXRvU2l6ZVBhZGRpbmc6MjAsc2tpcEhlYWRlck9uQXV0b1NpemU6ITEsc2luZ2xlQ2xpY2tFZGl0OiExLHN1cHByZXNzQ2xpY2tFZGl0OiExLHJlYWRPbmx5RWRpdDohMSxzdG9wRWRpdGluZ1doZW5DZWxsc0xvc2VGb2N1czohMSxlbnRlck5hdmlnYXRlc1ZlcnRpY2FsbHk6ITEsZW50ZXJOYXZpZ2F0ZXNWZXJ0aWNhbGx5QWZ0ZXJFZGl0OiExLGVuYWJsZUNlbGxFZGl0aW5nT25CYWNrc3BhY2U6ITEsdW5kb1JlZG9DZWxsRWRpdGluZzohMSx1bmRvUmVkb0NlbGxFZGl0aW5nTGltaXQ6MTAsc3VwcHJlc3NDc3ZFeHBvcnQ6ITEsc3VwcHJlc3NFeGNlbEV4cG9ydDohMSxjYWNoZVF1aWNrRmlsdGVyOiExLGluY2x1ZGVIaWRkZW5Db2x1bW5zSW5RdWlja0ZpbHRlcjohMSxleGNsdWRlQ2hpbGRyZW5XaGVuVHJlZURhdGFGaWx0ZXJpbmc6ITEsZW5hYmxlQWR2YW5jZWRGaWx0ZXI6ITEsaW5jbHVkZUhpZGRlbkNvbHVtbnNJbkFkdmFuY2VkRmlsdGVyOiExLGVuYWJsZUNoYXJ0czohMSxzdXBwcmVzc0NoYXJ0VG9vbFBhbmVsc0J1dHRvbjohMSxtYXN0ZXJEZXRhaWw6ITEsa2VlcERldGFpbFJvd3M6ITEsa2VlcERldGFpbFJvd3NDb3VudDoxMCxkZXRhaWxSb3dBdXRvSGVpZ2h0OiExLHRhYkluZGV4OjAscm93QnVmZmVyOjEwLHZhbHVlQ2FjaGU6ITEsdmFsdWVDYWNoZU5ldmVyRXhwaXJlczohMSxlbmFibGVDZWxsRXhwcmVzc2lvbnM6ITEsc3VwcHJlc3NUb3VjaDohMSxzdXBwcmVzc0ZvY3VzQWZ0ZXJSZWZyZXNoOiExLHN1cHByZXNzQXN5bmNFdmVudHM6ITEsc3VwcHJlc3NCcm93c2VyUmVzaXplT2JzZXJ2ZXI6ITEsc3VwcHJlc3NQcm9wZXJ0eU5hbWVzQ2hlY2s6ITEsc3VwcHJlc3NDaGFuZ2VEZXRlY3Rpb246ITEsZGVidWc6ITEsc3VwcHJlc3NMb2FkaW5nT3ZlcmxheTohMSxzdXBwcmVzc05vUm93c092ZXJsYXk6ITEscGFnaW5hdGlvbjohMSxwYWdpbmF0aW9uUGFnZVNpemU6MTAwLHBhZ2luYXRpb25QYWdlU2l6ZVNlbGVjdG9yOiEwLHBhZ2luYXRpb25BdXRvUGFnZVNpemU6ITEscGFnaW5hdGVDaGlsZFJvd3M6ITEsc3VwcHJlc3NQYWdpbmF0aW9uUGFuZWw6ITEscGl2b3RNb2RlOiExLHBpdm90UGFuZWxTaG93OiJuZXZlciIscGl2b3REZWZhdWx0RXhwYW5kZWQ6MCxwaXZvdFN1cHByZXNzQXV0b0NvbHVtbjohMSxzdXBwcmVzc0V4cGFuZGFibGVQaXZvdEdyb3VwczohMSxmdW5jdGlvbnNSZWFkT25seTohMSxzdXBwcmVzc0FnZ0Z1bmNJbkhlYWRlcjohMSxhbHdheXNBZ2dyZWdhdGVBdFJvb3RMZXZlbDohMSxhZ2dyZWdhdGVPbmx5Q2hhbmdlZENvbHVtbnM6ITEsc3VwcHJlc3NBZ2dGaWx0ZXJlZE9ubHk6ITEscmVtb3ZlUGl2b3RIZWFkZXJSb3dXaGVuU2luZ2xlVmFsdWVDb2x1bW46ITEsYW5pbWF0ZVJvd3M6ITAsZW5hYmxlQ2VsbENoYW5nZUZsYXNoOiExLGNlbGxGbGFzaERlbGF5OjUwMCxjZWxsRmxhc2hEdXJhdGlvbjo1MDAsY2VsbEZhZGVEZWxheToxZTMsY2VsbEZhZGVEdXJhdGlvbjoxZTMsYWxsb3dTaG93Q2hhbmdlQWZ0ZXJGaWx0ZXI6ITEsZG9tTGF5b3V0OiJub3JtYWwiLGVuc3VyZURvbU9yZGVyOiExLGVuYWJsZVJ0bDohMSxzdXBwcmVzc0NvbHVtblZpcnR1YWxpc2F0aW9uOiExLHN1cHByZXNzTWF4UmVuZGVyZWRSb3dSZXN0cmljdGlvbjohMSxzdXBwcmVzc1Jvd1ZpcnR1YWxpc2F0aW9uOiExLHJvd0RyYWdNYW5hZ2VkOiExLHN1cHByZXNzUm93RHJhZzohMSxzdXBwcmVzc01vdmVXaGVuUm93RHJhZ2dpbmc6ITEscm93RHJhZ0VudGlyZVJvdzohMSxyb3dEcmFnTXVsdGlSb3c6ITEsZW1iZWRGdWxsV2lkdGhSb3dzOiExLGdyb3VwRGlzcGxheVR5cGU6InNpbmdsZUNvbHVtbiIsZ3JvdXBEZWZhdWx0RXhwYW5kZWQ6MCxncm91cE1haW50YWluT3JkZXI6ITEsZ3JvdXBTZWxlY3RzQ2hpbGRyZW46ITEsZ3JvdXBJbmNsdWRlVG90YWxGb290ZXI6ITEsZ3JvdXBTdXBwcmVzc0JsYW5rSGVhZGVyOiExLGdyb3VwU2VsZWN0c0ZpbHRlcmVkOiExLHNob3dPcGVuZWRHcm91cDohMSxncm91cFJlbW92ZVNpbmdsZUNoaWxkcmVuOiExLGdyb3VwUmVtb3ZlTG93ZXN0U2luZ2xlQ2hpbGRyZW46ITEsZ3JvdXBIaWRlT3BlblBhcmVudHM6ITEsZ3JvdXBBbGxvd1VuYmFsYW5jZWQ6ITEscm93R3JvdXBQYW5lbFNob3c6Im5ldmVyIixzdXBwcmVzc01ha2VDb2x1bW5WaXNpYmxlQWZ0ZXJVbkdyb3VwOiExLHRyZWVEYXRhOiExLHJvd0dyb3VwUGFuZWxTdXBwcmVzc1NvcnQ6ITEsc3VwcHJlc3NHcm91cFJvd3NTdGlja3k6ITEscm93TW9kZWxUeXBlOiJjbGllbnRTaWRlIixhc3luY1RyYW5zYWN0aW9uV2FpdE1pbGxpczo1MCxzdXBwcmVzc01vZGVsVXBkYXRlQWZ0ZXJVcGRhdGVUcmFuc2FjdGlvbjohMSxjYWNoZU92ZXJmbG93U2l6ZToxLGluZmluaXRlSW5pdGlhbFJvd0NvdW50OjEsc2VydmVyU2lkZUluaXRpYWxSb3dDb3VudDoxLHN1cHByZXNzU2VydmVyU2lkZUluZmluaXRlU2Nyb2xsOiExLGNhY2hlQmxvY2tTaXplOjEwMCxtYXhCbG9ja3NJbkNhY2hlOi0xLG1heENvbmN1cnJlbnREYXRhc291cmNlUmVxdWVzdHM6MixibG9ja0xvYWREZWJvdW5jZU1pbGxpczowLHB1cmdlQ2xvc2VkUm93Tm9kZXM6ITEsc2VydmVyU2lkZVNvcnRBbGxMZXZlbHM6ITEsc2VydmVyU2lkZU9ubHlSZWZyZXNoRmlsdGVyZWRHcm91cHM6ITEsc2VydmVyU2lkZVNvcnRPblNlcnZlcjohMSxzZXJ2ZXJTaWRlRmlsdGVyT25TZXJ2ZXI6ITEsc2VydmVyU2lkZVBpdm90UmVzdWx0RmllbGRTZXBhcmF0b3I6Il8iLHZpZXdwb3J0Um93TW9kZWxQYWdlU2l6ZTo1LHZpZXdwb3J0Um93TW9kZWxCdWZmZXJTaXplOjUsYWx3YXlzU2hvd0hvcml6b250YWxTY3JvbGw6ITEsYWx3YXlzU2hvd1ZlcnRpY2FsU2Nyb2xsOiExLGRlYm91bmNlVmVydGljYWxTY3JvbGxiYXI6ITEsc3VwcHJlc3NIb3Jpem9udGFsU2Nyb2xsOiExLHN1cHByZXNzU2Nyb2xsT25OZXdEYXRhOiExLHN1cHByZXNzU2Nyb2xsV2hlblBvcHVwc0FyZU9wZW46ITEsc3VwcHJlc3NBbmltYXRpb25GcmFtZTohMSxzdXBwcmVzc01pZGRsZUNsaWNrU2Nyb2xsczohMSxzdXBwcmVzc1ByZXZlbnREZWZhdWx0T25Nb3VzZVdoZWVsOiExLHJvd011bHRpU2VsZWN0V2l0aENsaWNrOiExLHN1cHByZXNzUm93RGVzZWxlY3Rpb246ITEsc3VwcHJlc3NSb3dDbGlja1NlbGVjdGlvbjohMSxzdXBwcmVzc0NlbGxGb2N1czohMSxzdXBwcmVzc0hlYWRlckZvY3VzOiExLHN1cHByZXNzTXVsdGlSYW5nZVNlbGVjdGlvbjohMSxlbmFibGVDZWxsVGV4dFNlbGVjdGlvbjohMSxlbmFibGVSYW5nZVNlbGVjdGlvbjohMSxlbmFibGVSYW5nZUhhbmRsZTohMSxlbmFibGVGaWxsSGFuZGxlOiExLGZpbGxIYW5kbGVEaXJlY3Rpb246Inh5IixzdXBwcmVzc0NsZWFyT25GaWxsUmVkdWN0aW9uOiExLGFjY2VudGVkU29ydDohMSx1blNvcnRJY29uOiExLHN1cHByZXNzTXVsdGlTb3J0OiExLGFsd2F5c011bHRpU29ydDohMSxzdXBwcmVzc01haW50YWluVW5zb3J0ZWRPcmRlcjohMSxzdXBwcmVzc1Jvd0hvdmVySGlnaGxpZ2h0OiExLHN1cHByZXNzUm93VHJhbnNmb3JtOiExLGNvbHVtbkhvdmVySGlnaGxpZ2h0OiExLGRlbHRhU29ydDohMSxlbmFibGVHcm91cEVkaXQ6ITEsc3VwcHJlc3NHcm91cE1haW50YWluVmFsdWVUeXBlOiExLGZ1bmN0aW9uc1Bhc3NpdmU6ITEsZ3JvdXBMb2NrR3JvdXBDb2x1bW5zOjAsc2VydmVyU2lkZUVuYWJsZUNsaWVudFNpZGVTb3J0OiExfSxjdT17c2lkZUJhcjp7bW9kdWxlOnNlLlNpZGVCYXJNb2R1bGV9LHN0YXR1c0Jhcjp7bW9kdWxlOnNlLlN0YXR1c0Jhck1vZHVsZX0sZW5hYmxlQ2hhcnRzOnttb2R1bGU6c2UuR3JpZENoYXJ0c01vZHVsZX0sZ2V0TWFpbk1lbnVJdGVtczp7bW9kdWxlOnNlLk1lbnVNb2R1bGV9LGdldENvbnRleHRNZW51SXRlbXM6e21vZHVsZTpzZS5NZW51TW9kdWxlfSxhbGxvd0NvbnRleHRNZW51V2l0aENvbnRyb2xLZXk6e21vZHVsZTpzZS5NZW51TW9kdWxlfSxlbmFibGVBZHZhbmNlZEZpbHRlcjp7bW9kdWxlOnNlLkFkdmFuY2VkRmlsdGVyTW9kdWxlfSx0cmVlRGF0YTp7c3VwcG9ydGVkUm93TW9kZWxzOlsiY2xpZW50U2lkZSIsInNlcnZlclNpZGUiXSxtb2R1bGU6c2UuUm93R3JvdXBpbmdNb2R1bGUsZGVwZW5kZW5jaWVzOmU9Pnt2YXIgdDtjb25zdCBpPW51bGwhPT0odD1lLnJvd01vZGVsVHlwZSkmJnZvaWQgMCE9PXQ/dDoiY2xpZW50U2lkZSI7c3dpdGNoKGkpe2Nhc2UiY2xpZW50U2lkZSI6Y29uc3QgdD1gdHJlZURhdGEgcmVxdWlyZXMgJ2dldERhdGFQYXRoJyBpbiB0aGUgJHtpfSByb3cgbW9kZWwuYDtyZXR1cm4gZS5nZXREYXRhUGF0aD9udWxsOnQ7Y2FzZSJzZXJ2ZXJTaWRlIjpjb25zdCBzPWB0cmVlRGF0YSByZXF1aXJlcyAnaXNTZXJ2ZXJTaWRlR3JvdXAnIGFuZCAnZ2V0U2VydmVyU2lkZUdyb3VwS2V5JyBpbiB0aGUgJHtpfSByb3cgbW9kZWwuYDtyZXR1cm4gZS5pc1NlcnZlclNpZGVHcm91cCYmZS5nZXRTZXJ2ZXJTaWRlR3JvdXBLZXk/bnVsbDpzfXJldHVybiBudWxsfX0sbWFzdGVyRGV0YWlsOnttb2R1bGU6c2UuTWFzdGVyRGV0YWlsTW9kdWxlfSxlbmFibGVSYW5nZVNlbGVjdGlvbjp7bW9kdWxlOnNlLlJhbmdlU2VsZWN0aW9uTW9kdWxlfSxlbmFibGVSYW5nZUhhbmRsZTp7ZGVwZW5kZW5jaWVzOntlbmFibGVSYW5nZVNlbGVjdGlvbjpbITBdfX0sZW5hYmxlRmlsbEhhbmRsZTp7ZGVwZW5kZW5jaWVzOntlbmFibGVSYW5nZVNlbGVjdGlvbjpbITBdfX0sZ3JvdXBEZWZhdWx0RXhwYW5kZWQ6e3N1cHBvcnRlZFJvd01vZGVsczpbImNsaWVudFNpZGUiXX0sZ3JvdXBJbmNsdWRlRm9vdGVyOntzdXBwb3J0ZWRSb3dNb2RlbHM6WyJjbGllbnRTaWRlIiwic2VydmVyU2lkZSJdLGRlcGVuZGVuY2llczplPT57dmFyIHQ7c3dpdGNoKG51bGwhPT0odD1lLnJvd01vZGVsVHlwZSkmJnZvaWQgMCE9PXQ/dDoiY2xpZW50U2lkZSIpe2Nhc2UiY2xpZW50U2lkZSI6cmV0dXJuIG51bGw7Y2FzZSJzZXJ2ZXJTaWRlIjpjb25zdCB0PSJncm91cEluY2x1ZGVGb290ZXIgaXMgbm90IHN1cHBvcnRlZCBhbG9uZ3NpZGUgc3VwcHJlc3NTZXJ2ZXJTaWRlSW5maW5pdGVTY3JvbGwiO3JldHVybiBlLnN1cHByZXNzU2VydmVyU2lkZUluZmluaXRlU2Nyb2xsP3Q6bnVsbH1yZXR1cm4gbnVsbH19LGdyb3VwSW5jbHVkZVRvdGFsRm9vdGVyOntzdXBwb3J0ZWRSb3dNb2RlbHM6WyJjbGllbnRTaWRlIl19LGdyb3VwUmVtb3ZlU2luZ2xlQ2hpbGRyZW46e2RlcGVuZGVuY2llczp7Z3JvdXBIaWRlT3BlblBhcmVudHM6W3ZvaWQgMCwhMV0sZ3JvdXBSZW1vdmVMb3dlc3RTaW5nbGVDaGlsZHJlbjpbdm9pZCAwLCExXX19LGdyb3VwUmVtb3ZlTG93ZXN0U2luZ2xlQ2hpbGRyZW46e2RlcGVuZGVuY2llczp7Z3JvdXBIaWRlT3BlblBhcmVudHM6W3ZvaWQgMCwhMV0sZ3JvdXBSZW1vdmVTaW5nbGVDaGlsZHJlbjpbdm9pZCAwLCExXX19LGdyb3VwU2VsZWN0c0NoaWxkcmVuOntkZXBlbmRlbmNpZXM6e3Jvd1NlbGVjdGlvbjpbIm11bHRpcGxlIl19fSxzdXBwcmVzc1BhcmVudHNJblJvd05vZGVzOntkZXBlbmRlbmNpZXM6e2dyb3VwU2VsZWN0c0NoaWxkcmVuOlt2b2lkIDAsITFdfX0sdmlld3BvcnREYXRhc291cmNlOntzdXBwb3J0ZWRSb3dNb2RlbHM6WyJ2aWV3cG9ydCJdLG1vZHVsZTpzZS5WaWV3cG9ydFJvd01vZGVsTW9kdWxlfSxzZXJ2ZXJTaWRlRGF0YXNvdXJjZTp7c3VwcG9ydGVkUm93TW9kZWxzOlsic2VydmVyU2lkZSJdLG1vZHVsZTpzZS5TZXJ2ZXJTaWRlUm93TW9kZWxNb2R1bGV9LGNhY2hlQmxvY2tTaXplOntzdXBwb3J0ZWRSb3dNb2RlbHM6WyJzZXJ2ZXJTaWRlIiwiaW5maW5pdGUiXX0sZGF0YXNvdXJjZTp7c3VwcG9ydGVkUm93TW9kZWxzOlsiaW5maW5pdGUiXSxtb2R1bGU6c2UuSW5maW5pdGVSb3dNb2RlbE1vZHVsZX0scm93RGF0YTp7c3VwcG9ydGVkUm93TW9kZWxzOlsiY2xpZW50U2lkZSJdLG1vZHVsZTpzZS5DbGllbnRTaWRlUm93TW9kZWxNb2R1bGV9LGNvbHVtbkRlZnM6KCk9Pmx1LGRlZmF1bHRDb2xEZWY6KCk9Pmx1LGRlZmF1bHRDb2xHcm91cERlZjooKT0+bHUsYXV0b0dyb3VwQ29sdW1uRGVmOigpPT5sdX0saHU9e29iamVjdE5hbWU6ImdyaWRPcHRpb25zIixhbGxQcm9wZXJ0aWVzOlsuLi5MdC5BTExfUFJPUEVSVElFUywuLi5JdC5FVkVOVF9DQUxMQkFDS1NdLHByb3BlcnR5RXhjZXB0aW9uczpbImFwaSIsImNvbHVtbkFwaSJdLGRvY3NVcmw6ImdyaWQtb3B0aW9ucy8iLGRlcHJlY2F0aW9uczp7ZW5hYmxlQ2hhcnRUb29sUGFuZWxzQnV0dG9uOnt2ZXJzaW9uOiIyOSIsbWVzc2FnZToiVGhlIENoYXJ0IFRvb2wgUGFuZWxzIGJ1dHRvbiBpcyBub3cgZW5hYmxlZCBieSBkZWZhdWx0LiBUbyBoaWRlIHRoZSBDaGFydCBUb29sIFBhbmVscyBidXR0b24gYW5kIGRpc3BsYXkgdGhlIGhhbWJ1cmdlciBidXR0b24gaW5zdGVhZCwgc2V0IHN1cHByZXNzQ2hhcnRUb29sUGFuZWxzQnV0dG9uPXRydWUuIn0sZnVuY3Rpb25zUGFzc2l2ZTp7dmVyc2lvbjoiMjkuMiJ9LG9uQ29sdW1uUm93R3JvdXBDaGFuZ2VSZXF1ZXN0Ont2ZXJzaW9uOiIyOS4yIn0sb25Db2x1bW5QaXZvdENoYW5nZVJlcXVlc3Q6e3ZlcnNpb246IjI5LjIifSxvbkNvbHVtblZhbHVlQ2hhbmdlUmVxdWVzdDp7dmVyc2lvbjoiMjkuMiJ9LG9uQ29sdW1uQWdnRnVuY0NoYW5nZVJlcXVlc3Q6e3ZlcnNpb246IjI5LjIifSxzZXJ2ZXJTaWRlRmlsdGVyQWxsTGV2ZWxzOnt2ZXJzaW9uOiIzMCIsbWVzc2FnZToiQWxsIHNlcnZlci1zaWRlIGdyb3VwIGxldmVscyBhcmUgbm93IGZpbHRlcmVkIGJ5IGRlZmF1bHQuIFRoaXMgY2FuIGJlIHRvZ2dsZWQgdXNpbmcgYHNlcnZlclNpZGVPbmx5UmVmcmVzaEZpbHRlcmVkR3JvdXBzYC4ifSxzdXBwcmVzc0FnZ0F0Um9vdExldmVsOnt2ZXJzaW9uOiIzMCIsbWVzc2FnZToiVGhlIHJvb3QgbGV2ZWwgYWdncmVnYXRpb24gaXMgbm93IHN1cHByZXNzZWQgYnkgZGVmYXVsdC4gVGhpcyBjYW4gYmUgdG9nZ2xlZCB1c2luZyAgYGFsd2F5c0FnZ3JlZ2F0ZUF0Um9vdExldmVsYC4ifSxleGNsdWRlSGlkZGVuQ29sdW1uc0Zyb21RdWlja0ZpbHRlcjp7dmVyc2lvbjoiMzAiLG1lc3NhZ2U6IkhpZGRlbiBjb2x1bW5zIGFyZSBub3cgZXhjbHVkZWQgZnJvbSB0aGUgUXVpY2sgRmlsdGVyIGJ5IGRlZmF1bHQuIFRoaXMgY2FuIGJlIHRvZ2dsZWQgdXNpbmcgYGluY2x1ZGVIaWRkZW5Db2x1bW5zSW5RdWlja0ZpbHRlcmAuIn0sZW50ZXJNb3Zlc0Rvd246e3ZlcnNpb246IjMwIixyZW5hbWVkOiJlbnRlck5hdmlnYXRlc1ZlcnRpY2FsbHkifSxlbnRlck1vdmVzRG93bkFmdGVyRWRpdDp7dmVyc2lvbjoiMzAiLHJlbmFtZWQ6ImVudGVyTmF2aWdhdGVzVmVydGljYWxseUFmdGVyRWRpdCJ9LHN1cHByZXNzUGFyZW50c0luUm93Tm9kZXM6e3ZlcnNpb246IjMwLjIiLG1lc3NhZ2U6IlVzaW5nIHN1cHByZXNzUGFyZW50c0luUm93Tm9kZXMgaXMgbm8gbG9uZ2VyIHJlY29tbWVuZGVkLiBUbyBzZXJpYWxpemUgbm9kZXMgaXQgaXMgbm93IHJlY29tbWVuZGVkIHRvIGluc3RlYWQgcmVtb3ZlIHRoZSBwYXJlbnQgbm9kZSByZWZlcmVuY2UgYmVmb3JlIHNlcmlhbGl6YXRpb24uIn0sYWR2YW5jZWRGaWx0ZXJNb2RlbDp7dmVyc2lvbjoiMzEiLG1lc3NhZ2U6IlVzZSBgaW5pdGlhbFN0YXRlLmZpbHRlci5hZHZhbmNlZEZpbHRlck1vZGVsYCBpbnN0ZWFkLiJ9LHN1cHByZXNzQXN5bmNFdmVudHM6e3ZlcnNpb246IjMxIixtZXNzYWdlOiJFdmVudHMgc2hvdWxkIGJlIGhhbmRsZWQgYXN5bmNocm9ub3VzbHkuIn0sY2VsbEZhZGVEZWxheTp7dmVyc2lvbjoiMzEuMSIscmVuYW1lZDoiY2VsbEZhZGVEdXJhdGlvbiJ9LGNlbGxGbGFzaERlbGF5Ont2ZXJzaW9uOiIzMS4xIixyZW5hbWVkOiJjZWxsRmxhc2hEdXJhdGlvbiJ9LHN1cHByZXNzU2VydmVyU2lkZUluZmluaXRlU2Nyb2xsOnt2ZXJzaW9uOiIzMS4xIn0sc2VydmVyU2lkZVNvcnRPblNlcnZlcjp7dmVyc2lvbjoiMzEuMSJ9LHNlcnZlclNpZGVGaWx0ZXJPblNlcnZlcjp7dmVyc2lvbjoiMzEuMSJ9fSx2YWxpZGF0aW9uczpjdX07dmFyIHV1LHB1PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBndT11dT1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuZGVzdHJveWVkPSExLHRoaXMuZG9tRGF0YUtleT0iX19BR18iK01hdGgucmFuZG9tKCkudG9TdHJpbmcoKSx0aGlzLnByb3BlcnR5RXZlbnRTZXJ2aWNlPW5ldyB2ZSx0aGlzLmdsb2JhbEV2ZW50SGFuZGxlckZhY3Rvcnk9ZT0+KHQsaSk9PntpZih0aGlzLmRlc3Ryb3llZClyZXR1cm47Y29uc3Qgcz11dS5hbHdheXNTeW5jR2xvYmFsRXZlbnRzLmhhcyh0KTtpZihzJiYhZXx8IXMmJmUpcmV0dXJuO2NvbnN0IHI9SXQuZ2V0Q2FsbGJhY2tGb3JFdmVudCh0KSxvPXRoaXMuZ3JpZE9wdGlvbnNbcl07ImZ1bmN0aW9uIj09dHlwZW9mIG8mJnRoaXMuZnJhbWV3b3JrT3ZlcnJpZGVzLndyYXBPdXRnb2luZygoKT0+e28oaSl9KX19Z2V0IGNvbnRleHQoKXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9ucy5jb250ZXh0fWluaXQoKXt0aGlzLmNvbHVtbkFwaT1uZXcgTmModGhpcy5hcGkpO2NvbnN0IGU9IXRoaXMuZ2V0KCJzdXBwcmVzc0FzeW5jRXZlbnRzIik7dGhpcy5ldmVudFNlcnZpY2UuYWRkR2xvYmFsTGlzdGVuZXIodGhpcy5nbG9iYWxFdmVudEhhbmRsZXJGYWN0b3J5KCkuYmluZCh0aGlzKSxlKSx0aGlzLmV2ZW50U2VydmljZS5hZGRHbG9iYWxMaXN0ZW5lcih0aGlzLmdsb2JhbEV2ZW50SGFuZGxlckZhY3RvcnkoITApLmJpbmQodGhpcyksITEpLHRoaXMucHJvcGVydHlFdmVudFNlcnZpY2Uuc2V0RnJhbWV3b3JrT3ZlcnJpZGVzKHRoaXMuZnJhbWV3b3JrT3ZlcnJpZGVzKSx0aGlzLmdldFNjcm9sbGJhcldpZHRoKCl9ZGVzdHJveSgpe3RoaXMuZGVzdHJveWVkPSEwLHRoaXMuY29sdW1uQXBpPXZvaWQgMH1nZXQoZSl7dmFyIHQ7cmV0dXJuIG51bGwhPT0odD10aGlzLmdyaWRPcHRpb25zW2VdKSYmdm9pZCAwIT09dD90OmR1W2VdfWdldENhbGxiYWNrKGUpe3JldHVybiB0aGlzLm1lcmdlR3JpZENvbW1vblBhcmFtcyh0aGlzLmdyaWRPcHRpb25zW2VdKX1leGlzdHMoZSl7cmV0dXJuIGIodGhpcy5ncmlkT3B0aW9uc1tlXSl9bWVyZ2VHcmlkQ29tbW9uUGFyYW1zKGUpe2lmKGUpe3JldHVybiB0PT57Y29uc3QgaT10O3JldHVybiBpLmFwaT10aGlzLmFwaSxpLmNvbHVtbkFwaT10aGlzLmNvbHVtbkFwaSxpLmNvbnRleHQ9dGhpcy5jb250ZXh0LGUoaSl9fXJldHVybiBlfXN0YXRpYyB0b0Jvb2xlYW4oZSl7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgZT9lOiJzdHJpbmciPT10eXBlb2YgZSYmKCJUUlVFIj09PWUudG9VcHBlckNhc2UoKXx8IiI9PWUpfXN0YXRpYyB0b051bWJlcihlKXtpZigibnVtYmVyIj09dHlwZW9mIGUpcmV0dXJuIGU7aWYoInN0cmluZyI9PXR5cGVvZiBlKXtjb25zdCB0PXBhcnNlSW50KGUpO2lmKGlzTmFOKHQpKXJldHVybjtyZXR1cm4gdH19c3RhdGljIHRvQ29uc3RyYWluZWROdW0oZSx0KXtyZXR1cm4gaT0+e2NvbnN0IHM9dXUudG9OdW1iZXIoaSk7aWYoIShudWxsPT1zfHxzPGV8fHM+dCkpcmV0dXJuIHN9fXN0YXRpYyBnZXRDb2VyY2VkVmFsdWUoZSx0KXtjb25zdCBpPXV1LlBST1BFUlRZX0NPRVJDSU9OUy5nZXQoZSk7cmV0dXJuIGk/aSh0KTp0fXN0YXRpYyBnZXRDb2VyY2VkR3JpZE9wdGlvbnMoZSl7Y29uc3QgdD17fTtyZXR1cm4gT2JqZWN0LmVudHJpZXMoZSkuZm9yRWFjaCgoW2UsaV0pPT57Y29uc3Qgcz11dS5nZXRDb2VyY2VkVmFsdWUoZSxpKTt0W2VdPXN9KSx0fXVwZGF0ZUdyaWRPcHRpb25zKHtvcHRpb25zOmUsc291cmNlOnQ9ImFwaSJ9KXtjb25zdCBpPXtpZDp1dS5jaGFuZ2VTZXRJZCsrLHByb3BlcnRpZXM6W119LHM9W107T2JqZWN0LmVudHJpZXMoZSkuZm9yRWFjaCgoW2Uscl0pPT57ImFwaSI9PT10JiZNdFtlXSYmaihlKyIgaXMgYW4gaW5pdGlhbCBwcm9wZXJ0eSBhbmQgY2Fubm90IGJlIHVwZGF0ZWQuIik7Y29uc3Qgbz11dS5nZXRDb2VyY2VkVmFsdWUoZSxyKSxuPSJvYmplY3QiPT10eXBlb2YgbyYmImFwaSI9PT10LGE9dGhpcy5ncmlkT3B0aW9uc1tlXTtpZihufHxhIT09byl7dGhpcy5ncmlkT3B0aW9uc1tlXT1vO2NvbnN0IHI9e3R5cGU6ZSxjdXJyZW50VmFsdWU6byxwcmV2aW91c1ZhbHVlOmEsY2hhbmdlU2V0Omksc291cmNlOnR9O3MucHVzaChyKX19KSx0aGlzLnZhbGlkYXRpb25TZXJ2aWNlLnByb2Nlc3NHcmlkT3B0aW9ucyh0aGlzLmdyaWRPcHRpb25zKSxpLnByb3BlcnRpZXM9cy5tYXAoZT0+ZS50eXBlKSxzLmZvckVhY2goZT0+e3RoaXMuZ3JpZE9wdGlvbnMuZGVidWcmJmNvbnNvbGUubG9nKGBBRyBHcmlkOiBVcGRhdGVkIHByb3BlcnR5ICR7ZS50eXBlfSBmcm9tIGAsZS5wcmV2aW91c1ZhbHVlLCIgdG8gICIsZS5jdXJyZW50VmFsdWUpLHRoaXMucHJvcGVydHlFdmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX0pfWFkZEV2ZW50TGlzdGVuZXIoZSx0KXt0aGlzLnByb3BlcnR5RXZlbnRTZXJ2aWNlLmFkZEV2ZW50TGlzdGVuZXIoZSx0KX1yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl7dGhpcy5wcm9wZXJ0eUV2ZW50U2VydmljZS5yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl9Z2V0U2Nyb2xsYmFyV2lkdGgoKXtpZihudWxsPT10aGlzLnNjcm9sbGJhcldpZHRoKXtjb25zdCBlPSJudW1iZXIiPT10eXBlb2YgdGhpcy5ncmlkT3B0aW9ucy5zY3JvbGxiYXJXaWR0aCYmdGhpcy5ncmlkT3B0aW9ucy5zY3JvbGxiYXJXaWR0aD49MD90aGlzLmdyaWRPcHRpb25zLnNjcm9sbGJhcldpZHRoOmtpKCk7bnVsbCE9ZSYmKHRoaXMuc2Nyb2xsYmFyV2lkdGg9ZSx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHt0eXBlOmx0LkVWRU5UX1NDUk9MTEJBUl9XSURUSF9DSEFOR0VEfSkpfXJldHVybiB0aGlzLnNjcm9sbGJhcldpZHRofWlzUm93TW9kZWxUeXBlKGUpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zLnJvd01vZGVsVHlwZT09PWV8fCJjbGllbnRTaWRlIj09PWUmJkUodGhpcy5ncmlkT3B0aW9ucy5yb3dNb2RlbFR5cGUpfWlzRG9tTGF5b3V0KGUpe3ZhciB0O3JldHVybihudWxsIT09KHQ9dGhpcy5ncmlkT3B0aW9ucy5kb21MYXlvdXQpJiZ2b2lkIDAhPT10P3Q6Im5vcm1hbCIpPT09ZX1pc1Jvd1NlbGVjdGlvbigpe3JldHVybiJzaW5nbGUiPT09dGhpcy5ncmlkT3B0aW9ucy5yb3dTZWxlY3Rpb258fCJtdWx0aXBsZSI9PT10aGlzLmdyaWRPcHRpb25zLnJvd1NlbGVjdGlvbn11c2VBc3luY0V2ZW50cygpe3JldHVybiF0aGlzLmdldCgic3VwcHJlc3NBc3luY0V2ZW50cyIpfWlzR2V0Um93SGVpZ2h0RnVuY3Rpb24oKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5ncmlkT3B0aW9ucy5nZXRSb3dIZWlnaHR9Z2V0Um93SGVpZ2h0Rm9yTm9kZShlLHQ9ITEsaSl7aWYobnVsbD09aSYmKGk9dGhpcy5lbnZpcm9ubWVudC5nZXREZWZhdWx0Um93SGVpZ2h0KCkpLHRoaXMuaXNHZXRSb3dIZWlnaHRGdW5jdGlvbigpKXtpZih0KXJldHVybntoZWlnaHQ6aSxlc3RpbWF0ZWQ6ITB9O2NvbnN0IHM9e25vZGU6ZSxkYXRhOmUuZGF0YX0scj10aGlzLmdldENhbGxiYWNrKCJnZXRSb3dIZWlnaHQiKShzKTtpZih0aGlzLmlzTnVtZXJpYyhyKSlyZXR1cm4gMD09PXImJmooIlRoZSByZXR1cm4gb2YgYGdldFJvd0hlaWdodGAgY2Fubm90IGJlIHplcm8uIElmIHRoZSBpbnRlbnRpb24gaXMgdG8gaGlkZSByb3dzLCB1c2UgYSBmaWx0ZXIgaW5zdGVhZC4iKSx7aGVpZ2h0Ok1hdGgubWF4KDEsciksZXN0aW1hdGVkOiExfX1pZihlLmRldGFpbCYmdGhpcy5nZXQoIm1hc3RlckRldGFpbCIpKXJldHVybiB0aGlzLmdldE1hc3RlckRldGFpbFJvd0hlaWdodCgpO3JldHVybntoZWlnaHQ6dGhpcy5ncmlkT3B0aW9ucy5yb3dIZWlnaHQmJnRoaXMuaXNOdW1lcmljKHRoaXMuZ3JpZE9wdGlvbnMucm93SGVpZ2h0KT90aGlzLmdyaWRPcHRpb25zLnJvd0hlaWdodDppLGVzdGltYXRlZDohMX19Z2V0TWFzdGVyRGV0YWlsUm93SGVpZ2h0KCl7cmV0dXJuIHRoaXMuZ2V0KCJkZXRhaWxSb3dBdXRvSGVpZ2h0Iik/e2hlaWdodDoxLGVzdGltYXRlZDohMX06dGhpcy5pc051bWVyaWModGhpcy5ncmlkT3B0aW9ucy5kZXRhaWxSb3dIZWlnaHQpP3toZWlnaHQ6dGhpcy5ncmlkT3B0aW9ucy5kZXRhaWxSb3dIZWlnaHQsZXN0aW1hdGVkOiExfTp7aGVpZ2h0OjMwMCxlc3RpbWF0ZWQ6ITF9fWdldFJvd0hlaWdodEFzTnVtYmVyKCl7aWYoIXRoaXMuZ3JpZE9wdGlvbnMucm93SGVpZ2h0fHxFKHRoaXMuZ3JpZE9wdGlvbnMucm93SGVpZ2h0KSlyZXR1cm4gdGhpcy5lbnZpcm9ubWVudC5nZXREZWZhdWx0Um93SGVpZ2h0KCk7Y29uc3QgZT10aGlzLmVudmlyb25tZW50LnJlZnJlc2hSb3dIZWlnaHRWYXJpYWJsZSgpO3JldHVybi0xIT09ZT9lOihjb25zb2xlLndhcm4oIkFHIEdyaWQgcm93IGhlaWdodCBtdXN0IGJlIGEgbnVtYmVyIGlmIG5vdCB1c2luZyBzdGFuZGFyZCByb3cgbW9kZWwiKSx0aGlzLmVudmlyb25tZW50LmdldERlZmF1bHRSb3dIZWlnaHQoKSl9aXNOdW1lcmljKGUpe3JldHVybiFpc05hTihlKSYmIm51bWJlciI9PXR5cGVvZiBlJiZpc0Zpbml0ZShlKX1nZXREb21EYXRhS2V5KCl7cmV0dXJuIHRoaXMuZG9tRGF0YUtleX1nZXREb21EYXRhKGUsdCl7Y29uc3QgaT1lW3RoaXMuZ2V0RG9tRGF0YUtleSgpXTtyZXR1cm4gaT9pW3RdOnZvaWQgMH1zZXREb21EYXRhKGUsdCxpKXtjb25zdCBzPXRoaXMuZ2V0RG9tRGF0YUtleSgpO2xldCByPWVbc107RShyKSYmKHI9e30sZVtzXT1yKSxyW3RdPWl9Z2V0RG9jdW1lbnQoKXtsZXQgZT1udWxsO3JldHVybiB0aGlzLmdyaWRPcHRpb25zLmdldERvY3VtZW50JiZiKHRoaXMuZ3JpZE9wdGlvbnMuZ2V0RG9jdW1lbnQpP2U9dGhpcy5ncmlkT3B0aW9ucy5nZXREb2N1bWVudCgpOnRoaXMuZUdyaWREaXYmJihlPXRoaXMuZUdyaWREaXYub3duZXJEb2N1bWVudCksZSYmYihlKT9lOmRvY3VtZW50fWdldFdpbmRvdygpe3JldHVybiB0aGlzLmdldERvY3VtZW50KCkuZGVmYXVsdFZpZXd8fHdpbmRvd31nZXRSb290Tm9kZSgpe3JldHVybiB0aGlzLmVHcmlkRGl2LmdldFJvb3ROb2RlKCl9Z2V0QXN5bmNUcmFuc2FjdGlvbldhaXRNaWxsaXMoKXtyZXR1cm4gYih0aGlzLmdyaWRPcHRpb25zLmFzeW5jVHJhbnNhY3Rpb25XYWl0TWlsbGlzKT90aGlzLmdyaWRPcHRpb25zLmFzeW5jVHJhbnNhY3Rpb25XYWl0TWlsbGlzOjUwfWlzQW5pbWF0ZVJvd3MoKXtyZXR1cm4hdGhpcy5nZXQoImVuc3VyZURvbU9yZGVyIikmJnRoaXMuZ2V0KCJhbmltYXRlUm93cyIpfWlzR3JvdXBSb3dzU3RpY2t5KCl7cmV0dXJuISh0aGlzLmdldCgic3VwcHJlc3NHcm91cFJvd3NTdGlja3kiKXx8dGhpcy5nZXQoInBhZ2luYXRlQ2hpbGRSb3dzIil8fHRoaXMuZ2V0KCJncm91cEhpZGVPcGVuUGFyZW50cyIpfHx0aGlzLmlzRG9tTGF5b3V0KCJwcmludCIpKX1pc0NvbHVtbnNTb3J0aW5nQ291cGxlZFRvR3JvdXAoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnMuYXV0b0dyb3VwQ29sdW1uRGVmO3JldHVybiEobnVsbD09ZT92b2lkIDA6ZS5jb21wYXJhdG9yKSYmIXRoaXMuZ2V0KCJ0cmVlRGF0YSIpfWdldEdyb3VwQWdnRmlsdGVyaW5nKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zLmdyb3VwQWdnRmlsdGVyaW5nO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlP3RoaXMuZ2V0Q2FsbGJhY2soImdyb3VwQWdnRmlsdGVyaW5nIik6ITA9PT1lPygpPT4hMDp2b2lkIDB9aXNHcm91cEluY2x1ZGVGb290ZXJUcnVlT3JDYWxsYmFjaygpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9ucy5ncm91cEluY2x1ZGVGb290ZXI7cmV0dXJuITA9PT1lfHwiZnVuY3Rpb24iPT10eXBlb2YgZX1nZXRHcm91cEluY2x1ZGVGb290ZXIoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnMuZ3JvdXBJbmNsdWRlRm9vdGVyO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlP3RoaXMuZ2V0Q2FsbGJhY2soImdyb3VwSW5jbHVkZUZvb3RlciIpOiEwPT09ZT8oKT0+ITA6KCk9PiExfWlzR3JvdXBNdWx0aUF1dG9Db2x1bW4oKXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9ucy5ncm91cERpc3BsYXlUeXBlPyJtdWx0aXBsZUNvbHVtbnMiPT09dGhpcy5ncmlkT3B0aW9ucy5ncm91cERpc3BsYXlUeXBlOnRoaXMuZ2V0KCJncm91cEhpZGVPcGVuUGFyZW50cyIpfWlzR3JvdXBVc2VFbnRpcmVSb3coZSl7cmV0dXJuIWUmJiJncm91cFJvd3MiPT09dGhpcy5ncmlkT3B0aW9ucy5ncm91cERpc3BsYXlUeXBlfWdldEdyaWRDb21tb25QYXJhbXMoKXtyZXR1cm57YXBpOnRoaXMuYXBpLGNvbHVtbkFwaTp0aGlzLmNvbHVtbkFwaSxjb250ZXh0OnRoaXMuY29udGV4dH19YWRkR3JpZENvbW1vblBhcmFtcyhlKXtjb25zdCB0PWU7cmV0dXJuIHQuYXBpPXRoaXMuYXBpLHQuY29sdW1uQXBpPXRoaXMuY29sdW1uQXBpLHQuY29udGV4dD10aGlzLmNvbnRleHQsdH19O2d1LmFsd2F5c1N5bmNHbG9iYWxFdmVudHM9bmV3IFNldChbbHQuRVZFTlRfR1JJRF9QUkVfREVTVFJPWUVEXSksZ3UuUFJPUEVSVFlfQ09FUkNJT05TPW5ldyBNYXAoWy4uLkx0LkJPT0xFQU5fUFJPUEVSVElFUy5tYXAoZT0+W2UsdXUudG9Cb29sZWFuXSksLi4uTHQuTlVNQkVSX1BST1BFUlRJRVMubWFwKGU9PltlLHV1LnRvTnVtYmVyXSksWyJncm91cEFnZ0ZpbHRlcmluZyIsZT0+ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTp1dS50b0Jvb2xlYW4oZSldLFsicGFnZVNpemUiLHV1LnRvQ29uc3RyYWluZWROdW0oMSxOdW1iZXIuTUFYX1ZBTFVFKV0sWyJhdXRvU2l6ZVBhZGRpbmciLHV1LnRvQ29uc3RyYWluZWROdW0oMCxOdW1iZXIuTUFYX1ZBTFVFKV0sWyJrZWVwRGV0YWlsUm93c0NvdW50Iix1dS50b0NvbnN0cmFpbmVkTnVtKDEsTnVtYmVyLk1BWF9WQUxVRSldLFsicm93QnVmZmVyIix1dS50b0NvbnN0cmFpbmVkTnVtKDAsTnVtYmVyLk1BWF9WQUxVRSldLFsiaW5maW5pdGVJbml0aWFsUm93Q291bnQiLHV1LnRvQ29uc3RyYWluZWROdW0oMSxOdW1iZXIuTUFYX1ZBTFVFKV0sWyJjYWNoZU92ZXJmbG93U2l6ZSIsdXUudG9Db25zdHJhaW5lZE51bSgxLE51bWJlci5NQVhfVkFMVUUpXSxbImNhY2hlQmxvY2tTaXplIix1dS50b0NvbnN0cmFpbmVkTnVtKDEsTnVtYmVyLk1BWF9WQUxVRSldLFsic2VydmVyU2lkZUluaXRpYWxSb3dDb3VudCIsdXUudG9Db25zdHJhaW5lZE51bSgxLE51bWJlci5NQVhfVkFMVUUpXSxbInZpZXdwb3J0Um93TW9kZWxQYWdlU2l6ZSIsdXUudG9Db25zdHJhaW5lZE51bSgxLE51bWJlci5NQVhfVkFMVUUpXSxbInZpZXdwb3J0Um93TW9kZWxCdWZmZXJTaXplIix1dS50b0NvbnN0cmFpbmVkTnVtKDAsTnVtYmVyLk1BWF9WQUxVRSldXSksZ3UuY2hhbmdlU2V0SWQ9MCxwdShbY2UoImdyaWRPcHRpb25zIildLGd1LnByb3RvdHlwZSwiZ3JpZE9wdGlvbnMiLHZvaWQgMCkscHUoW2NlKCJldmVudFNlcnZpY2UiKV0sZ3UucHJvdG90eXBlLCJldmVudFNlcnZpY2UiLHZvaWQgMCkscHUoW2NlKCJlbnZpcm9ubWVudCIpXSxndS5wcm90b3R5cGUsImVudmlyb25tZW50Iix2b2lkIDApLHB1KFtjZSgiZnJhbWV3b3JrT3ZlcnJpZGVzIildLGd1LnByb3RvdHlwZSwiZnJhbWV3b3JrT3ZlcnJpZGVzIix2b2lkIDApLHB1KFtjZSgiZUdyaWREaXYiKV0sZ3UucHJvdG90eXBlLCJlR3JpZERpdiIsdm9pZCAwKSxwdShbY2UoInZhbGlkYXRpb25TZXJ2aWNlIildLGd1LnByb3RvdHlwZSwidmFsaWRhdGlvblNlcnZpY2UiLHZvaWQgMCkscHUoW2NlKCJncmlkQXBpIildLGd1LnByb3RvdHlwZSwiYXBpIix2b2lkIDApLHB1KFthZV0sZ3UucHJvdG90eXBlLCJpbml0IixudWxsKSxwdShbbGVdLGd1LnByb3RvdHlwZSwiZGVzdHJveSIsbnVsbCksZ3U9dXU9cHUoW2RlKCJncmlkT3B0aW9uc1NlcnZpY2UiKV0sZ3UpO3ZhciBtdT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgZnU9Y2xhc3MgZXh0ZW5kcyBpdHtnZXRMb2NhbGVUZXh0RnVuYygpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soImdldExvY2FsZVRleHQiKTtpZihlKXJldHVybih0LGkscyk9PmUoe2tleTp0LGRlZmF1bHRWYWx1ZTppLHZhcmlhYmxlVmFsdWVzOnN9KTtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgibG9jYWxlVGV4dCIpO3JldHVybihlLGkscyk9PntsZXQgcj10JiZ0W2VdO2lmKHImJnMmJnMubGVuZ3RoKXtsZXQgZT0wO2Zvcig7IShlPj1zLmxlbmd0aCk7KXtpZigtMT09PXIuaW5kZXhPZigiJHt2YXJpYWJsZX0iKSlicmVhaztyPXIucmVwbGFjZSgiJHt2YXJpYWJsZX0iLHNbZSsrXSl9fXJldHVybiBudWxsIT1yP3I6aX19fTtmdT1tdShbZGUoImxvY2FsZVNlcnZpY2UiKV0sZnUpO3ZhciB2dT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBDdSBleHRlbmRzIEpoe2NvbnN0cnVjdG9yKCl7c3VwZXIoQ3UuVEVNUExBVEUsInZlcnRpY2FsIil9cG9zdENvbnN0cnVjdCgpe3N1cGVyLnBvc3RDb25zdHJ1Y3QoKSx0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBfYSh0aGlzLmVDb250YWluZXIpKSx0aGlzLmN0cmxzU2VydmljZS5yZWdpc3RlckZha2VWU2Nyb2xsQ29tcCh0aGlzKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ST1dfQ09OVEFJTkVSX0hFSUdIVF9DSEFOR0VELHRoaXMub25Sb3dDb250YWluZXJIZWlnaHRDaGFuZ2VkLmJpbmQodGhpcykpfXNldFNjcm9sbFZpc2libGUoKXtjb25zdCBlPXRoaXMuc2Nyb2xsVmlzaWJsZVNlcnZpY2UuaXNWZXJ0aWNhbFNjcm9sbFNob3dpbmcoKSx0PXRoaXMuaW52aXNpYmxlU2Nyb2xsYmFyLGk9ZSYmdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0U2Nyb2xsYmFyV2lkdGgoKXx8MCxzPTA9PT1pJiZ0PzE2Omk7dGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1zY3JvbGxiYXItaW52aXNpYmxlIix0KSxEcyh0aGlzLmdldEd1aSgpLHMpLERzKHRoaXMuZVZpZXdwb3J0LHMpLERzKHRoaXMuZUNvbnRhaW5lcixzKSx0aGlzLnNldERpc3BsYXllZChlLHtza2lwQXJpYUhpZGRlbjohMH0pfW9uUm93Q29udGFpbmVySGVpZ2h0Q2hhbmdlZCgpe2NvbnN0e2N0cmxzU2VydmljZTplfT10aGlzLHQ9ZS5nZXRHcmlkQm9keUN0cmwoKS5nZXRCb2R5Vmlld3BvcnRFbGVtZW50KCksaT10aGlzLmdldFNjcm9sbFBvc2l0aW9uKCkscz10LnNjcm9sbFRvcDtpIT1zJiZ0aGlzLnNldFNjcm9sbFBvc2l0aW9uKHMsITApfWdldFNjcm9sbFBvc2l0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Vmlld3BvcnQoKS5zY3JvbGxUb3B9c2V0U2Nyb2xsUG9zaXRpb24oZSx0KXt0fHxDcyh0aGlzLmdldFZpZXdwb3J0KCkpfHx0aGlzLmF0dGVtcHRTZXR0aW5nU2Nyb2xsUG9zaXRpb24oZSksdGhpcy5nZXRWaWV3cG9ydCgpLnNjcm9sbFRvcD1lfX1DdS5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctYm9keS12ZXJ0aWNhbC1zY3JvbGwiIGFyaWEtaGlkZGVuPSJ0cnVlIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWJvZHktdmVydGljYWwtc2Nyb2xsLXZpZXdwb3J0IiByZWY9ImVWaWV3cG9ydCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctYm9keS12ZXJ0aWNhbC1zY3JvbGwtY29udGFpbmVyIiByZWY9ImVDb250YWluZXIiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PicsdnUoW2FlXSxDdS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciB5dT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjb25zdCBTdT17amFudWFyeToiSmFudWFyeSIsZmVicnVhcnk6IkZlYnJ1YXJ5IixtYXJjaDoiTWFyY2giLGFwcmlsOiJBcHJpbCIsbWF5OiJNYXkiLGp1bmU6Ikp1bmUiLGp1bHk6Ikp1bHkiLGF1Z3VzdDoiQXVndXN0IixzZXB0ZW1iZXI6IlNlcHRlbWJlciIsb2N0b2JlcjoiT2N0b2JlciIsbm92ZW1iZXI6Ik5vdmVtYmVyIixkZWNlbWJlcjoiRGVjZW1iZXIifSx3dT1bImphbnVhcnkiLCJmZWJydWFyeSIsIm1hcmNoIiwiYXByaWwiLCJtYXkiLCJqdW5lIiwianVseSIsImF1Z3VzdCIsInNlcHRlbWJlciIsIm9jdG9iZXIiLCJub3ZlbWJlciIsImRlY2VtYmVyIl07bGV0IGJ1PWNsYXNzIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuZGF0YVR5cGVEZWZpbml0aW9ucz17fSx0aGlzLmlzV2FpdGluZ0ZvclJvd0RhdGE9ITEsdGhpcy5pc0NvbHVtblR5cGVPdmVycmlkZUluRGF0YVR5cGVEZWZpbml0aW9ucz0hMSx0aGlzLmNvbHVtblN0YXRlVXBkYXRlc1BlbmRpbmdJbmZlcmVuY2U9e30sdGhpcy5jb2x1bW5TdGF0ZVVwZGF0ZUxpc3RlbmVyRGVzdHJveUZ1bmNzPVtdfWluaXQoKXt0aGlzLmdyb3VwSGlkZU9wZW5QYXJlbnRzPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBIaWRlT3BlblBhcmVudHMiKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJncm91cEhpZGVPcGVuUGFyZW50cyIsKCk9Pnt0aGlzLmdyb3VwSGlkZU9wZW5QYXJlbnRzPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBIaWRlT3BlblBhcmVudHMiKX0pLHRoaXMucHJvY2Vzc0RhdGFUeXBlRGVmaW5pdGlvbnMoKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJkYXRhVHlwZURlZmluaXRpb25zIixlPT57dGhpcy5wcm9jZXNzRGF0YVR5cGVEZWZpbml0aW9ucygpLHRoaXMuY29sdW1uTW9kZWwucmVjcmVhdGVDb2x1bW5EZWZzKFR0KGUuc291cmNlKSl9KX1wcm9jZXNzRGF0YVR5cGVEZWZpbml0aW9ucygpe3ZhciBlO2NvbnN0IHQ9dGhpcy5nZXREZWZhdWx0RGF0YVR5cGVzKCk7dGhpcy5kYXRhVHlwZURlZmluaXRpb25zPXt9LE9iamVjdC5lbnRyaWVzKHQpLmZvckVhY2goKFtlLHRdKT0+e3RoaXMuZGF0YVR5cGVEZWZpbml0aW9uc1tlXT1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse2dyb3VwU2FmZVZhbHVlRm9ybWF0dGVyOnRoaXMuY3JlYXRlR3JvdXBTYWZlVmFsdWVGb3JtYXR0ZXIodCl9KX0pO2NvbnN0IGk9bnVsbCE9PShlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZGF0YVR5cGVEZWZpbml0aW9ucyIpKSYmdm9pZCAwIT09ZT9lOnt9O3RoaXMuZGF0YVR5cGVNYXRjaGVycz17fSxPYmplY3QuZW50cmllcyhpKS5mb3JFYWNoKChbZSxzXSk9Pntjb25zdCByPXRoaXMucHJvY2Vzc0RhdGFUeXBlRGVmaW5pdGlvbihzLGksW2VdLHQpO3ImJih0aGlzLmRhdGFUeXBlRGVmaW5pdGlvbnNbZV09cixzLmRhdGFUeXBlTWF0Y2hlciYmKHRoaXMuZGF0YVR5cGVNYXRjaGVyc1tlXT1zLmRhdGFUeXBlTWF0Y2hlcikpfSksdGhpcy5jaGVja09iamVjdFZhbHVlSGFuZGxlcnModCksWyJkYXRlU3RyaW5nIiwidGV4dCIsIm51bWJlciIsImJvb2xlYW4iLCJkYXRlIl0uZm9yRWFjaChlPT57Y29uc3QgaT10aGlzLmRhdGFUeXBlTWF0Y2hlcnNbZV07aSYmZGVsZXRlIHRoaXMuZGF0YVR5cGVNYXRjaGVyc1tlXSx0aGlzLmRhdGFUeXBlTWF0Y2hlcnNbZV09bnVsbCE9aT9pOnRbZV0uZGF0YVR5cGVNYXRjaGVyfSl9bWVyZ2VEYXRhVHlwZURlZmluaXRpb25zKGUsdCl7Y29uc3QgaT1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSksdCk7cmV0dXJuIGUuY29sdW1uVHlwZXMmJnQuY29sdW1uVHlwZXMmJnQuYXBwZW5kQ29sdW1uVHlwZXMmJihpLmNvbHVtblR5cGVzPVsuLi50aGlzLmNvbnZlcnRDb2x1bW5UeXBlcyhlLmNvbHVtblR5cGVzKSwuLi50aGlzLmNvbnZlcnRDb2x1bW5UeXBlcyh0LmNvbHVtblR5cGVzKV0pLGl9cHJvY2Vzc0RhdGFUeXBlRGVmaW5pdGlvbihlLHQsaSxzKXtsZXQgcjtjb25zdCBvPWUuZXh0ZW5kc0RhdGFUeXBlO2lmKGUuY29sdW1uVHlwZXMmJih0aGlzLmlzQ29sdW1uVHlwZU92ZXJyaWRlSW5EYXRhVHlwZURlZmluaXRpb25zPSEwKSxlLmV4dGVuZHNEYXRhVHlwZT09PWUuYmFzZURhdGFUeXBlKXtsZXQgaT1zW29dO2NvbnN0IG49dFtvXTtpZihpJiZuJiYoaT1uKSwhdGhpcy52YWxpZGF0ZURhdGFUeXBlRGVmaW5pdGlvbihlLGksbykpcmV0dXJuO3I9dGhpcy5tZXJnZURhdGFUeXBlRGVmaW5pdGlvbnMoaSxlKX1lbHNle2lmKGkuaW5jbHVkZXMobykpcmV0dXJuIHZvaWQgaignRGF0YSB0eXBlIGRlZmluaXRpb24gaGllcmFyY2hpZXMgKHZpYSB0aGUgImV4dGVuZHNEYXRhVHlwZSIgcHJvcGVydHkpIGNhbm5vdCBjb250YWluIGNpcmN1bGFyIHJlZmVyZW5jZXMuJyk7Y29uc3Qgbj10W29dO2lmKCF0aGlzLnZhbGlkYXRlRGF0YVR5cGVEZWZpbml0aW9uKGUsbixvKSlyZXR1cm47Y29uc3QgYT10aGlzLnByb2Nlc3NEYXRhVHlwZURlZmluaXRpb24obix0LFsuLi5pLG9dLHMpO2lmKCFhKXJldHVybjtyPXRoaXMubWVyZ2VEYXRhVHlwZURlZmluaXRpb25zKGEsZSl9cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSx7Z3JvdXBTYWZlVmFsdWVGb3JtYXR0ZXI6dGhpcy5jcmVhdGVHcm91cFNhZmVWYWx1ZUZvcm1hdHRlcihyKX0pfXZhbGlkYXRlRGF0YVR5cGVEZWZpbml0aW9uKGUsdCxpKXtyZXR1cm4gdD90LmJhc2VEYXRhVHlwZT09PWUuYmFzZURhdGFUeXBlfHwoaignVGhlICJiYXNlRGF0YVR5cGUiIHByb3BlcnR5IG9mIGEgZGF0YSB0eXBlIGRlZmluaXRpb24gbXVzdCBtYXRjaCB0aGF0IG9mIGl0cyBwYXJlbnQuJyksITEpOihqKGBUaGUgZGF0YSB0eXBlIGRlZmluaXRpb24gJHtpfSBkb2VzIG5vdCBleGlzdC5gKSwhMSl9Y3JlYXRlR3JvdXBTYWZlVmFsdWVGb3JtYXR0ZXIoZSl7aWYoZS52YWx1ZUZvcm1hdHRlcilyZXR1cm4gdD0+e3ZhciBpLHM7aWYobnVsbD09PShpPXQubm9kZSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZ3JvdXApe2NvbnN0IGk9dC5jb2x1bW4uZ2V0QWdnRnVuYygpO2lmKGkpe2lmKCJmaXJzdCI9PT1pfHwibGFzdCI9PT1pKXJldHVybiBlLnZhbHVlRm9ybWF0dGVyKHQpO2lmKCJudW1iZXIiPT09ZS5iYXNlRGF0YVR5cGUmJiJjb3VudCIhPT1pKXtpZigibnVtYmVyIj09dHlwZW9mIHQudmFsdWUpcmV0dXJuIGUudmFsdWVGb3JtYXR0ZXIodCk7aWYoIm9iamVjdCI9PXR5cGVvZiB0LnZhbHVlKXtpZighdC52YWx1ZSlyZXR1cm47aWYoInRvTnVtYmVyImluIHQudmFsdWUpcmV0dXJuIGUudmFsdWVGb3JtYXR0ZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHt2YWx1ZTp0LnZhbHVlLnRvTnVtYmVyKCl9KSk7aWYoInZhbHVlImluIHQudmFsdWUpcmV0dXJuIGUudmFsdWVGb3JtYXR0ZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHt2YWx1ZTp0LnZhbHVlLnZhbHVlfSkpfX19aWYoIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NHcm91cE1haW50YWluVmFsdWVUeXBlIikpcmV0dXJufWVsc2UgaWYodGhpcy5ncm91cEhpZGVPcGVuUGFyZW50cyYmdC5jb2x1bW4uaXNSb3dHcm91cEFjdGl2ZSgpKXtpZigic3RyaW5nIiE9dHlwZW9mIHQudmFsdWV8fChudWxsPT09KHM9ZS5kYXRhVHlwZU1hdGNoZXIpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmNhbGwoZSx0LnZhbHVlKSkpcmV0dXJuIGUudmFsdWVGb3JtYXR0ZXIodCk7aWYoIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NHcm91cE1haW50YWluVmFsdWVUeXBlIikpcmV0dXJufXJldHVybiBlLnZhbHVlRm9ybWF0dGVyKHQpfX11cGRhdGVDb2xEZWZBbmRHZXREYXRhVHlwZURlZmluaXRpb25Db2x1bW5UeXBlKGUsdCxpKXtsZXR7Y2VsbERhdGFUeXBlOnN9PXQ7Y29uc3R7ZmllbGQ6cn09dDtpZih2b2lkIDA9PT1zJiYocz1lLmNlbGxEYXRhVHlwZSksbnVsbCE9cyYmITAhPT1zfHwocz0hIXRoaXMuY2FuSW5mZXJDZWxsRGF0YVR5cGUoZSx0KSYmdGhpcy5pbmZlckNlbGxEYXRhVHlwZShyLGkpKSwhcylyZXR1cm4gdm9pZChlLmNlbGxEYXRhVHlwZT0hMSk7Y29uc3Qgbz10aGlzLmRhdGFUeXBlRGVmaW5pdGlvbnNbc107aWYobylyZXR1cm4gZS5jZWxsRGF0YVR5cGU9cyxvLmdyb3VwU2FmZVZhbHVlRm9ybWF0dGVyJiYoZS52YWx1ZUZvcm1hdHRlcj1vLmdyb3VwU2FmZVZhbHVlRm9ybWF0dGVyKSxvLnZhbHVlUGFyc2VyJiYoZS52YWx1ZVBhcnNlcj1vLnZhbHVlUGFyc2VyKSxvLnN1cHByZXNzRGVmYXVsdFByb3BlcnRpZXN8fHRoaXMuc2V0Q29sRGVmUHJvcGVydGllc0ZvckJhc2VEYXRhVHlwZShlLG8saSksby5jb2x1bW5UeXBlcztqKGBNaXNzaW5nIGRhdGEgdHlwZSBkZWZpbml0aW9uIC0gIiR7c30iYCl9dXBkYXRlQ29sRGVmQW5kR2V0Q29sdW1uVHlwZShlLHQsaSl7dmFyIHMscjtjb25zdCBvPXRoaXMudXBkYXRlQ29sRGVmQW5kR2V0RGF0YVR5cGVEZWZpbml0aW9uQ29sdW1uVHlwZShlLHQsaSksbj1udWxsIT09KHI9bnVsbCE9PShzPXQudHlwZSkmJnZvaWQgMCE9PXM/czpvKSYmdm9pZCAwIT09cj9yOmUudHlwZTtyZXR1cm4gZS50eXBlPW4sbj90aGlzLmNvbnZlcnRDb2x1bW5UeXBlcyhuKTp2b2lkIDB9YWRkQ29sdW1uTGlzdGVuZXJzKGUpe2lmKCF0aGlzLmlzV2FpdGluZ0ZvclJvd0RhdGEpcmV0dXJuO2NvbnN0IHQ9dGhpcy5jb2x1bW5TdGF0ZVVwZGF0ZXNQZW5kaW5nSW5mZXJlbmNlW2UuZ2V0Q29sSWQoKV07aWYoIXQpcmV0dXJuO2NvbnN0IGk9ZT0+e3QuYWRkKGUua2V5KX07ZS5hZGRFdmVudExpc3RlbmVyKEVlLkVWRU5UX1NUQVRFX1VQREFURUQsaSksdGhpcy5jb2x1bW5TdGF0ZVVwZGF0ZUxpc3RlbmVyRGVzdHJveUZ1bmNzLnB1c2goKCk9PmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihFZS5FVkVOVF9TVEFURV9VUERBVEVELGkpKX1jYW5JbmZlckNlbGxEYXRhVHlwZShlLHQpe3ZhciBpO2lmKCJjbGllbnRTaWRlIiE9PXRoaXMucm93TW9kZWwuZ2V0VHlwZSgpKXJldHVybiExO2NvbnN0IHM9e2NlbGxSZW5kZXJlcjohMCx2YWx1ZUdldHRlcjohMCx2YWx1ZVBhcnNlcjohMCxyZWZEYXRhOiEwfTtpZih0aGlzLmRvQ29sRGVmUHJvcHNQcmV2ZW50SW5mZXJlbmNlKHQscykpcmV0dXJuITE7Y29uc3Qgcj1udWxsPT09dC50eXBlP2UudHlwZTp0LnR5cGU7aWYocil7Y29uc3QgZT1udWxsIT09KGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjb2x1bW5UeXBlcyIpKSYmdm9pZCAwIT09aT9pOnt9O2lmKHRoaXMuY29udmVydENvbHVtblR5cGVzKHIpLnNvbWUodD0+e2NvbnN0IGk9ZVt0LnRyaW0oKV07cmV0dXJuIGkmJnRoaXMuZG9Db2xEZWZQcm9wc1ByZXZlbnRJbmZlcmVuY2UoaSxzKX0pKXJldHVybiExfXJldHVybiF0aGlzLmRvQ29sRGVmUHJvcHNQcmV2ZW50SW5mZXJlbmNlKGUscyl9ZG9Db2xEZWZQcm9wc1ByZXZlbnRJbmZlcmVuY2UoZSx0KXtyZXR1cm5bWyJjZWxsUmVuZGVyZXIiLCJhZ1NwYXJrbGluZUNlbGxSZW5kZXJlciJdLFsidmFsdWVHZXR0ZXIiLHZvaWQgMF0sWyJ2YWx1ZVBhcnNlciIsdm9pZCAwXSxbInJlZkRhdGEiLHZvaWQgMF1dLnNvbWUoKFtpLHNdKT0+dGhpcy5kb2VzQ29sRGVmUHJvcFByZXZlbnRJbmZlcmVuY2UoZSx0LGkscykpfWRvZXNDb2xEZWZQcm9wUHJldmVudEluZmVyZW5jZShlLHQsaSxzKXtpZighdFtpXSlyZXR1cm4hMTtjb25zdCByPWVbaV07cmV0dXJuIG51bGw9PT1yPyh0W2ldPSExLCExKTp2b2lkIDA9PT1zPyEhcjpyPT09c31pbmZlckNlbGxEYXRhVHlwZShlLHQpe3ZhciBpO2lmKCFlKXJldHVybjtsZXQgcztjb25zdCByPXRoaXMuZ2V0SW5pdGlhbERhdGEoKTtpZihyKXtjb25zdCB0PWUuaW5kZXhPZigiLiIpPj0wJiYhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0ZpZWxkRG90Tm90YXRpb24iKTtzPV8ocixlLHQpfWVsc2UgdGhpcy5pbml0V2FpdEZvclJvd0RhdGEodCk7aWYobnVsbD09cylyZXR1cm47Y29uc3Rbb109bnVsbCE9PShpPU9iamVjdC5lbnRyaWVzKHRoaXMuZGF0YVR5cGVNYXRjaGVycykuZmluZCgoW2UsdF0pPT50KHMpKSkmJnZvaWQgMCE9PWk/aTpbIm9iamVjdCJdO3JldHVybiBvfWdldEluaXRpYWxEYXRhKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0RhdGEiKTtpZihudWxsPT1lP3ZvaWQgMDplLmxlbmd0aClyZXR1cm4gZVswXTtpZih0aGlzLmluaXRpYWxEYXRhKXJldHVybiB0aGlzLmluaXRpYWxEYXRhO3tjb25zdCBlPXRoaXMucm93TW9kZWwuZ2V0Um9vdE5vZGUoKS5hbGxMZWFmQ2hpbGRyZW47aWYobnVsbD09ZT92b2lkIDA6ZS5sZW5ndGgpcmV0dXJuIGVbMF0uZGF0YX1yZXR1cm4gbnVsbH1pbml0V2FpdEZvclJvd0RhdGEoZSl7aWYodGhpcy5jb2x1bW5TdGF0ZVVwZGF0ZXNQZW5kaW5nSW5mZXJlbmNlW2VdPW5ldyBTZXQsdGhpcy5pc1dhaXRpbmdGb3JSb3dEYXRhKXJldHVybjt0aGlzLmlzV2FpdGluZ0ZvclJvd0RhdGE9ITA7Y29uc3QgdD10aGlzLmlzQ29sdW1uVHlwZU92ZXJyaWRlSW5EYXRhVHlwZURlZmluaXRpb25zO3QmJnRoaXMuY29sdW1uTW9kZWwucXVldWVSZXNpemVPcGVyYXRpb25zKCk7Y29uc3QgaT10aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ST1dfREFUQV9VUERBVEVfU1RBUlRFRCxlPT57Y29uc3R7Zmlyc3RSb3dEYXRhOnN9PWU7aWYoIXMpcmV0dXJuO251bGw9PWl8fGkoKSx0aGlzLmlzV2FpdGluZ0ZvclJvd0RhdGE9ITEsdGhpcy5wcm9jZXNzQ29sdW1uc1BlbmRpbmdJbmZlcmVuY2Uocyx0KSx0aGlzLmNvbHVtblN0YXRlVXBkYXRlc1BlbmRpbmdJbmZlcmVuY2U9e30sdCYmdGhpcy5jb2x1bW5Nb2RlbC5wcm9jZXNzUmVzaXplT3BlcmF0aW9ucygpO2NvbnN0IHI9e3R5cGU6bHQuRVZFTlRfREFUQV9UWVBFU19JTkZFUlJFRH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChyKX0pfWlzUGVuZGluZ0luZmVyZW5jZSgpe3JldHVybiB0aGlzLmlzV2FpdGluZ0ZvclJvd0RhdGF9cHJvY2Vzc0NvbHVtbnNQZW5kaW5nSW5mZXJlbmNlKGUsdCl7dGhpcy5pbml0aWFsRGF0YT1lO2NvbnN0IGk9W107dGhpcy5jb2x1bW5TdGF0ZVVwZGF0ZUxpc3RlbmVyRGVzdHJveUZ1bmNzLmZvckVhY2goZT0+ZSgpKSx0aGlzLmNvbHVtblN0YXRlVXBkYXRlTGlzdGVuZXJEZXN0cm95RnVuY3M9W107Y29uc3Qgcz17fSxyPXt9O09iamVjdC5lbnRyaWVzKHRoaXMuY29sdW1uU3RhdGVVcGRhdGVzUGVuZGluZ0luZmVyZW5jZSkuZm9yRWFjaCgoW2Usb10pPT57Y29uc3Qgbj10aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4oZSk7aWYoIW4pcmV0dXJuO2NvbnN0IGE9bi5nZXRDb2xEZWYoKTtpZighdGhpcy5jb2x1bW5Nb2RlbC5yZXNldENvbHVtbkRlZkludG9Db2x1bW4obiwiY2VsbERhdGFUeXBlSW5mZXJyZWQiKSlyZXR1cm47Y29uc3QgbD1uLmdldENvbERlZigpO2lmKHQmJmwudHlwZSYmbC50eXBlIT09YS50eXBlKXtjb25zdCB0PXRoaXMuZ2V0VXBkYXRlZENvbHVtblN0YXRlKG4sbyk7dC5yb3dHcm91cCYmbnVsbD09dC5yb3dHcm91cEluZGV4JiYoc1tlXT10KSx0LnBpdm90JiZudWxsPT10LnBpdm90SW5kZXgmJihyW2VdPXQpLGkucHVzaCh0KX19KSx0JiZpLnB1c2goLi4udGhpcy5jb2x1bW5Nb2RlbC5nZW5lcmF0ZUNvbHVtblN0YXRlRm9yUm93R3JvdXBBbmRQaXZvdEluZGV4ZXMocyxyKSksaS5sZW5ndGgmJnRoaXMuY29sdW1uTW9kZWwuYXBwbHlDb2x1bW5TdGF0ZSh7c3RhdGU6aX0sImNlbGxEYXRhVHlwZUluZmVycmVkIiksdGhpcy5pbml0aWFsRGF0YT1udWxsfWdldFVwZGF0ZWRDb2x1bW5TdGF0ZShlLHQpe2NvbnN0IGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRDb2x1bW5TdGF0ZUZyb21Db2xEZWYoZSk7cmV0dXJuIHQuZm9yRWFjaChlPT57ZGVsZXRlIGlbZV0sInJvd0dyb3VwIj09PWU/ZGVsZXRlIGkucm93R3JvdXBJbmRleDoicGl2b3QiPT09ZSYmZGVsZXRlIGkucGl2b3RJbmRleH0pLGl9Y2hlY2tPYmplY3RWYWx1ZUhhbmRsZXJzKGUpe2NvbnN0IHQ9dGhpcy5kYXRhVHlwZURlZmluaXRpb25zLm9iamVjdCxpPWUub2JqZWN0O3RoaXMuaGFzT2JqZWN0VmFsdWVQYXJzZXI9dC52YWx1ZVBhcnNlciE9PWkudmFsdWVQYXJzZXIsdGhpcy5oYXNPYmplY3RWYWx1ZUZvcm1hdHRlcj10LnZhbHVlRm9ybWF0dGVyIT09aS52YWx1ZUZvcm1hdHRlcn1jb252ZXJ0Q29sdW1uVHlwZXMoZSl7bGV0IHQ9W107aWYoZSBpbnN0YW5jZW9mIEFycmF5KXtlLnNvbWUoZT0+InN0cmluZyIhPXR5cGVvZiBlKT9jb25zb2xlLndhcm4oImlmIGNvbERlZi50eXBlIGlzIHN1cHBsaWVkIGFuIGFycmF5IGl0IHNob3VsZCBiZSBvZiB0eXBlICdzdHJpbmdbXSciKTp0PWV9ZWxzZSJzdHJpbmciPT10eXBlb2YgZT90PWUuc3BsaXQoIiwiKTpjb25zb2xlLndhcm4oImNvbERlZi50eXBlIHNob3VsZCBiZSBvZiB0eXBlICdzdHJpbmcnIHwgJ3N0cmluZ1tdJyIpO3JldHVybiB0fWdldERhdGVTdHJpbmdUeXBlRGVmaW5pdGlvbihlKXt2YXIgdDtyZXR1cm4gZSYmbnVsbCE9PSh0PXRoaXMuZ2V0RGF0YVR5cGVEZWZpbml0aW9uKGUpKSYmdm9pZCAwIT09dD90OnRoaXMuZGF0YVR5cGVEZWZpbml0aW9ucy5kYXRlU3RyaW5nfWdldERhdGVQYXJzZXJGdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXREYXRlU3RyaW5nVHlwZURlZmluaXRpb24oZSkuZGF0ZVBhcnNlcn1nZXREYXRlRm9ybWF0dGVyRnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0RGF0ZVN0cmluZ1R5cGVEZWZpbml0aW9uKGUpLmRhdGVGb3JtYXR0ZXJ9Z2V0RGF0YVR5cGVEZWZpbml0aW9uKGUpe2NvbnN0IHQ9ZS5nZXRDb2xEZWYoKTtpZih0LmNlbGxEYXRhVHlwZSlyZXR1cm4gdGhpcy5kYXRhVHlwZURlZmluaXRpb25zW3QuY2VsbERhdGFUeXBlXX1nZXRCYXNlRGF0YVR5cGUoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD10aGlzLmdldERhdGFUeXBlRGVmaW5pdGlvbihlKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuYmFzZURhdGFUeXBlfWNoZWNrVHlwZShlLHQpe3ZhciBpO2lmKG51bGw9PXQpcmV0dXJuITA7Y29uc3Qgcz1udWxsPT09KGk9dGhpcy5nZXREYXRhVHlwZURlZmluaXRpb24oZSkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmRhdGFUeXBlTWF0Y2hlcjtyZXR1cm4hc3x8cyh0KX12YWxpZGF0ZUNvbERlZihlKXsib2JqZWN0Ij09PWUuY2VsbERhdGFUeXBlJiYoZS52YWx1ZUZvcm1hdHRlciE9PXRoaXMuZGF0YVR5cGVEZWZpbml0aW9ucy5vYmplY3QuZ3JvdXBTYWZlVmFsdWVGb3JtYXR0ZXJ8fHRoaXMuaGFzT2JqZWN0VmFsdWVGb3JtYXR0ZXJ8fGooJ0NlbGwgZGF0YSB0eXBlIGlzICJvYmplY3QiIGJ1dCBubyB2YWx1ZSBmb3JtYXR0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuIFBsZWFzZSBlaXRoZXIgcHJvdmlkZSBhbiBvYmplY3QgZGF0YSB0eXBlIGRlZmluaXRpb24gd2l0aCBhIHZhbHVlIGZvcm1hdHRlciwgb3Igc2V0ICJjb2xEZWYudmFsdWVGb3JtYXR0ZXIiJyksZS5lZGl0YWJsZSYmZS52YWx1ZVBhcnNlcj09PXRoaXMuZGF0YVR5cGVEZWZpbml0aW9ucy5vYmplY3QudmFsdWVQYXJzZXImJiF0aGlzLmhhc09iamVjdFZhbHVlUGFyc2VyJiZqKCdDZWxsIGRhdGEgdHlwZSBpcyAib2JqZWN0IiBidXQgbm8gdmFsdWUgcGFyc2VyIGhhcyBiZWVuIHByb3ZpZGVkLiBQbGVhc2UgZWl0aGVyIHByb3ZpZGUgYW4gb2JqZWN0IGRhdGEgdHlwZSBkZWZpbml0aW9uIHdpdGggYSB2YWx1ZSBwYXJzZXIsIG9yIHNldCAiY29sRGVmLnZhbHVlUGFyc2VyIicpKX1zZXRDb2xEZWZQcm9wZXJ0aWVzRm9yQmFzZURhdGFUeXBlKGUsdCxpKXtjb25zdCBzPShlLGkscyk9PntsZXQgcj1lLmdldENvbERlZigpLnZhbHVlRm9ybWF0dGVyO3JldHVybiByPT09dC5ncm91cFNhZmVWYWx1ZUZvcm1hdHRlciYmKHI9dC52YWx1ZUZvcm1hdHRlciksdGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UuZm9ybWF0VmFsdWUoZSxpLHMscil9LHI9cmUuX19pc1JlZ2lzdGVyZWQoc2UuU2V0RmlsdGVyTW9kdWxlLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSksbz10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSxuPXQ9Pntjb25zdHtmaWx0ZXJQYXJhbXM6aX09ZTtlLmZpbHRlclBhcmFtcz0ib2JqZWN0Ij09dHlwZW9mIGk/T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGkpLHQpOnR9O3N3aXRjaCh0LmJhc2VEYXRhVHlwZSl7Y2FzZSJudW1iZXIiOmUuY2VsbEVkaXRvcj0iYWdOdW1iZXJDZWxsRWRpdG9yIixyJiZuKHtjb21wYXJhdG9yOihlLHQpPT57Y29uc3QgaT1udWxsPT1lPzA6cGFyc2VJbnQoZSkscz1udWxsPT10PzA6cGFyc2VJbnQodCk7cmV0dXJuIGk9PT1zPzA6aT5zPzE6LTF9fSk7YnJlYWs7Y2FzZSJib29sZWFuIjplLmNlbGxFZGl0b3I9ImFnQ2hlY2tib3hDZWxsRWRpdG9yIixlLmNlbGxSZW5kZXJlcj0iYWdDaGVja2JveENlbGxSZW5kZXJlciIsZS5zdXBwcmVzc0tleWJvYXJkRXZlbnQ9ZT0+ISFlLmNvbERlZi5lZGl0YWJsZSYmZS5ldmVudC5rZXk9PT1qcy5TUEFDRSxuKHI/e3ZhbHVlRm9ybWF0dGVyOmU9PmIoZS52YWx1ZSk/byhTdHJpbmcoZS52YWx1ZSksZS52YWx1ZT8iVHJ1ZSI6IkZhbHNlIik6bygiYmxhbmtzIiwiKEJsYW5rcykiKX06e21heE51bUNvbmRpdGlvbnM6MSxkZWJvdW5jZU1zOjAsZmlsdGVyT3B0aW9uczpbImVtcHR5Iix7ZGlzcGxheUtleToidHJ1ZSIsZGlzcGxheU5hbWU6IlRydWUiLHByZWRpY2F0ZTooZSx0KT0+dCxudW1iZXJPZklucHV0czowfSx7ZGlzcGxheUtleToiZmFsc2UiLGRpc3BsYXlOYW1lOiJGYWxzZSIscHJlZGljYXRlOihlLHQpPT4hMT09PXQsbnVtYmVyT2ZJbnB1dHM6MH1dfSk7YnJlYWs7Y2FzZSJkYXRlIjplLmNlbGxFZGl0b3I9ImFnRGF0ZUNlbGxFZGl0b3IiLGUua2V5Q3JlYXRvcj1lPT5zKGUuY29sdW1uLGUubm9kZSxlLnZhbHVlKSxyJiZuKHt2YWx1ZUZvcm1hdHRlcjplPT57Y29uc3QgdD1zKGUuY29sdW1uLGUubm9kZSxlLnZhbHVlKTtyZXR1cm4gYih0KT90Om8oImJsYW5rcyIsIihCbGFua3MpIil9LHRyZWVMaXN0OiEwLHRyZWVMaXN0Rm9ybWF0dGVyOihlLHQpPT57aWYoMT09PXQmJm51bGwhPWUpe2NvbnN0IHQ9d3VbTnVtYmVyKGUpLTFdO3JldHVybiBvKHQsU3VbdF0pfXJldHVybiBudWxsIT1lP2U6bygiYmxhbmtzIiwiKEJsYW5rcykiKX19KTticmVhaztjYXNlImRhdGVTdHJpbmciOntlLmNlbGxFZGl0b3I9ImFnRGF0ZVN0cmluZ0NlbGxFZGl0b3IiLGUua2V5Q3JlYXRvcj1lPT5zKGUuY29sdW1uLGUubm9kZSxlLnZhbHVlKTtjb25zdCBpPXQuZGF0ZVBhcnNlcjtuKHI/e3ZhbHVlRm9ybWF0dGVyOmU9Pntjb25zdCB0PXMoZS5jb2x1bW4sZS5ub2RlLGUudmFsdWUpO3JldHVybiBiKHQpP3Q6bygiYmxhbmtzIiwiKEJsYW5rcykiKX0sdHJlZUxpc3Q6ITAsdHJlZUxpc3RQYXRoR2V0dGVyOmU9Pntjb25zdCB0PWkobnVsbCE9ZT9lOnZvaWQgMCk7cmV0dXJuIHQ/W1N0cmluZyh0LmdldEZ1bGxZZWFyKCkpLFN0cmluZyh0LmdldE1vbnRoKCkrMSksU3RyaW5nKHQuZ2V0RGF0ZSgpKV06bnVsbH0sdHJlZUxpc3RGb3JtYXR0ZXI6KGUsdCk9PntpZigxPT09dCYmbnVsbCE9ZSl7Y29uc3QgdD13dVtOdW1iZXIoZSktMV07cmV0dXJuIG8odCxTdVt0XSl9cmV0dXJuIG51bGwhPWU/ZTpvKCJibGFua3MiLCIoQmxhbmtzKSIpfX06e2NvbXBhcmF0b3I6KGUsdCk9Pntjb25zdCBzPWkodCk7cmV0dXJuIG51bGw9PXR8fHM8ZT8tMTpzPmU/MTowfX0pO2JyZWFrfWNhc2Uib2JqZWN0IjplLmNlbGxFZGl0b3JQYXJhbXM9e3VzZUZvcm1hdHRlcjohMH0sZS5jb21wYXJhdG9yPShlLHQpPT57Y29uc3Qgcj10aGlzLmNvbHVtbk1vZGVsLmdldFByaW1hcnlDb2x1bW4oaSksbz1udWxsPT1yP3ZvaWQgMDpyLmdldENvbERlZigpO2lmKCFyfHwhbylyZXR1cm4gMDtjb25zdCBuPW51bGw9PWU/IiI6cyhyLG51bGwsZSksYT1udWxsPT10PyIiOnMocixudWxsLHQpO3JldHVybiBuPT09YT8wOm4+YT8xOi0xfSxlLmtleUNyZWF0b3I9ZT0+cyhlLmNvbHVtbixlLm5vZGUsZS52YWx1ZSkscj9uKHt2YWx1ZUZvcm1hdHRlcjplPT57Y29uc3QgdD1zKGUuY29sdW1uLGUubm9kZSxlLnZhbHVlKTtyZXR1cm4gYih0KT90Om8oImJsYW5rcyIsIihCbGFua3MpIil9fSk6ZS5maWx0ZXJWYWx1ZUdldHRlcj1lPT5zKGUuY29sdW1uLGUubm9kZSx0aGlzLnZhbHVlU2VydmljZS5nZXRWYWx1ZShlLmNvbHVtbixlLm5vZGUpKX19Z2V0RGVmYXVsdERhdGFUeXBlcygpe2NvbnN0IGU9ZT0+ISFlLm1hdGNoKCJeXFxkezR9LVxcZHsyfS1cXGR7Mn0kIiksdD10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTtyZXR1cm57bnVtYmVyOntiYXNlRGF0YVR5cGU6Im51bWJlciIsdmFsdWVQYXJzZXI6ZT0+e3ZhciB0LGk7cmV0dXJuIiI9PT0obnVsbD09PShpPW51bGw9PT0odD1lLm5ld1ZhbHVlKXx8dm9pZCAwPT09dD92b2lkIDA6dC50cmltKXx8dm9pZCAwPT09aT92b2lkIDA6aS5jYWxsKHQpKT9udWxsOk51bWJlcihlLm5ld1ZhbHVlKX0sdmFsdWVGb3JtYXR0ZXI6ZT0+bnVsbD09ZS52YWx1ZT8iIjoibnVtYmVyIiE9dHlwZW9mIGUudmFsdWV8fGlzTmFOKGUudmFsdWUpP3QoImludmFsaWROdW1iZXIiLCJJbnZhbGlkIE51bWJlciIpOlN0cmluZyhlLnZhbHVlKSxkYXRhVHlwZU1hdGNoZXI6ZT0+Im51bWJlciI9PXR5cGVvZiBlfSx0ZXh0OntiYXNlRGF0YVR5cGU6InRleHQiLHZhbHVlUGFyc2VyOmU9PiIiPT09ZS5uZXdWYWx1ZT9udWxsOngoZS5uZXdWYWx1ZSksZGF0YVR5cGVNYXRjaGVyOmU9PiJzdHJpbmciPT10eXBlb2YgZX0sYm9vbGVhbjp7YmFzZURhdGFUeXBlOiJib29sZWFuIix2YWx1ZVBhcnNlcjplPT57dmFyIHQsaTtyZXR1cm4gbnVsbD09ZS5uZXdWYWx1ZT9lLm5ld1ZhbHVlOiIiPT09KG51bGw9PT0oaT1udWxsPT09KHQ9ZS5uZXdWYWx1ZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudHJpbSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuY2FsbCh0KSk/bnVsbDoidHJ1ZSI9PT1TdHJpbmcoZS5uZXdWYWx1ZSkudG9Mb3dlckNhc2UoKX0sdmFsdWVGb3JtYXR0ZXI6ZT0+bnVsbD09ZS52YWx1ZT8iIjpTdHJpbmcoZS52YWx1ZSksZGF0YVR5cGVNYXRjaGVyOmU9PiJib29sZWFuIj09dHlwZW9mIGV9LGRhdGU6e2Jhc2VEYXRhVHlwZToiZGF0ZSIsdmFsdWVQYXJzZXI6ZT0+cWkobnVsbD09ZS5uZXdWYWx1ZT9udWxsOlN0cmluZyhlLm5ld1ZhbHVlKSksdmFsdWVGb3JtYXR0ZXI6ZT0+e3ZhciBpO3JldHVybiBudWxsPT1lLnZhbHVlPyIiOmUudmFsdWUgaW5zdGFuY2VvZiBEYXRlJiYhaXNOYU4oZS52YWx1ZS5nZXRUaW1lKCkpP251bGwhPT0oaT1ZaShlLnZhbHVlLCExKSkmJnZvaWQgMCE9PWk/aToiIjp0KCJpbnZhbGlkRGF0ZSIsIkludmFsaWQgRGF0ZSIpfSxkYXRhVHlwZU1hdGNoZXI6ZT0+ZSBpbnN0YW5jZW9mIERhdGV9LGRhdGVTdHJpbmc6e2Jhc2VEYXRhVHlwZToiZGF0ZVN0cmluZyIsZGF0ZVBhcnNlcjplPT57dmFyIHQ7cmV0dXJuIG51bGwhPT0odD1xaShlKSkmJnZvaWQgMCE9PXQ/dDp2b2lkIDB9LGRhdGVGb3JtYXR0ZXI6ZT0+e3ZhciB0O3JldHVybiBudWxsIT09KHQ9WWkobnVsbCE9ZT9lOm51bGwsITEpKSYmdm9pZCAwIT09dD90OnZvaWQgMH0sdmFsdWVQYXJzZXI6dD0+ZShTdHJpbmcodC5uZXdWYWx1ZSkpP3QubmV3VmFsdWU6bnVsbCx2YWx1ZUZvcm1hdHRlcjp0PT5lKFN0cmluZyh0LnZhbHVlKSk/dC52YWx1ZToiIixkYXRhVHlwZU1hdGNoZXI6dD0+InN0cmluZyI9PXR5cGVvZiB0JiZlKHQpfSxvYmplY3Q6e2Jhc2VEYXRhVHlwZToib2JqZWN0Iix2YWx1ZVBhcnNlcjooKT0+bnVsbCx2YWx1ZUZvcm1hdHRlcjplPT57dmFyIHQ7cmV0dXJuIG51bGwhPT0odD14KGUudmFsdWUpKSYmdm9pZCAwIT09dD90OiIifX19fX07eXUoW2NlKCJyb3dNb2RlbCIpXSxidS5wcm90b3R5cGUsInJvd01vZGVsIix2b2lkIDApLHl1KFtjZSgiY29sdW1uTW9kZWwiKV0sYnUucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSx5dShbY2UoImNvbHVtblV0aWxzIildLGJ1LnByb3RvdHlwZSwiY29sdW1uVXRpbHMiLHZvaWQgMCkseXUoW2NlKCJ2YWx1ZVNlcnZpY2UiKV0sYnUucHJvdG90eXBlLCJ2YWx1ZVNlcnZpY2UiLHZvaWQgMCkseXUoW2NlKCJ2YWx1ZUZvcm1hdHRlclNlcnZpY2UiKV0sYnUucHJvdG90eXBlLCJ2YWx1ZUZvcm1hdHRlclNlcnZpY2UiLHZvaWQgMCkseXUoW2FlXSxidS5wcm90b3R5cGUsImluaXQiLG51bGwpLGJ1PXl1KFtkZSgiZGF0YVR5cGVTZXJ2aWNlIildLGJ1KTt2YXIgRXU9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IFJ1PWNsYXNzIGV4dGVuZHMgaXR7cGFyc2VWYWx1ZShlLHQsaSxzKXtjb25zdCByPWUuZ2V0Q29sRGVmKCksbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHtub2RlOnQsZGF0YTpudWxsPT10P3ZvaWQgMDp0LmRhdGEsb2xkVmFsdWU6cyxuZXdWYWx1ZTppLGNvbERlZjpyLGNvbHVtbjplfSksbj1yLnZhbHVlUGFyc2VyO3JldHVybiBiKG4pPyJmdW5jdGlvbiI9PXR5cGVvZiBuP24obyk6dGhpcy5leHByZXNzaW9uU2VydmljZS5ldmFsdWF0ZShuLG8pOml9fTtFdShbY2UoImV4cHJlc3Npb25TZXJ2aWNlIildLFJ1LnByb3RvdHlwZSwiZXhwcmVzc2lvblNlcnZpY2UiLHZvaWQgMCksUnU9RXUoW2RlKCJ2YWx1ZVBhcnNlclNlcnZpY2UiKV0sUnUpO3ZhciB4dT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgVHU9Y2xhc3MgZXh0ZW5kcyBpdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy53YWl0aW5nRm9yQ29sdW1ucz0hMX1wb3N0Q29uc3RydWN0KCl7dGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiY29sdW1uRGVmcyIsZT0+dGhpcy5zZXRDb2x1bW5EZWZzKGUpKX1zdGFydCgpe3RoaXMuY3RybHNTZXJ2aWNlLndoZW5SZWFkeSgoKT0+e2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjb2x1bW5EZWZzIik7ZT90aGlzLnNldENvbHVtbnNBbmREYXRhKGUpOnRoaXMud2FpdGluZ0ZvckNvbHVtbnM9ITAsdGhpcy5ncmlkUmVhZHkoKX0pfXNldENvbHVtbnNBbmREYXRhKGUpe3RoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uRGVmcyhudWxsIT1lP2U6W10sImdyaWRJbml0aWFsaXppbmciKSx0aGlzLnJvd01vZGVsLnN0YXJ0KCl9Z3JpZFJlYWR5KCl7dGhpcy5kaXNwYXRjaEdyaWRSZWFkeUV2ZW50KCk7Y29uc3QgZT1yZS5fX2lzUmVnaXN0ZXJlZChzZS5FbnRlcnByaXNlQ29yZU1vZHVsZSx0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpO25ldyBLYygiQUcgR3JpZCIsKCk9PnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZGVidWciKSkubG9nKCJpbml0aWFsaXNlZCBzdWNjZXNzZnVsbHksIGVudGVycHJpc2UgPSAiK2UpfWRpc3BhdGNoR3JpZFJlYWR5RXZlbnQoKXtjb25zdCBlPXt0eXBlOmx0LkVWRU5UX0dSSURfUkVBRFl9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9c2V0Q29sdW1uRGVmcyhlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiY29sdW1uRGVmcyIpO2lmKHQpcmV0dXJuIHRoaXMud2FpdGluZ0ZvckNvbHVtbnM/KHRoaXMud2FpdGluZ0ZvckNvbHVtbnM9ITEsdm9pZCB0aGlzLnNldENvbHVtbnNBbmREYXRhKHQpKTp2b2lkIHRoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uRGVmcyh0LFR0KGUuc291cmNlKSl9fTt4dShbY2UoImN0cmxzU2VydmljZSIpXSxUdS5wcm90b3R5cGUsImN0cmxzU2VydmljZSIsdm9pZCAwKSx4dShbY2UoImNvbHVtbk1vZGVsIildLFR1LnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCkseHUoW2NlKCJyb3dNb2RlbCIpXSxUdS5wcm90b3R5cGUsInJvd01vZGVsIix2b2lkIDApLHh1KFthZV0sVHUucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxUdT14dShbZGUoInN5bmNTZXJ2aWNlIildLFR1KTt2YXIgRHU9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IE91PWNsYXNzIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMubWFudWFsbHlEaXNwbGF5ZWQ9ITF9cG9zdENvbnN0cnVjdCgpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1JPV19EQVRBX1VQREFURUQsKCk9PnRoaXMub25Sb3dEYXRhVXBkYXRlZCgpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9ORVdfQ09MVU1OU19MT0FERUQsKCk9PnRoaXMub25OZXdDb2x1bW5zTG9hZGVkKCkpfXJlZ2lzdGVyT3ZlcmxheVdyYXBwZXJDb21wKGUpe3RoaXMub3ZlcmxheVdyYXBwZXJDb21wPWUsKCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNvbHVtbkRlZnMiKXx8dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNSb3dNb2RlbFR5cGUoImNsaWVudFNpZGUiKSYmIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicm93RGF0YSIpKSYmdGhpcy5zaG93TG9hZGluZ092ZXJsYXkoKX1zaG93TG9hZGluZ092ZXJsYXkoKXtpZih0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzTG9hZGluZ092ZXJsYXkiKSlyZXR1cm47Y29uc3QgZT10aGlzLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldExvYWRpbmdPdmVybGF5Q29tcERldGFpbHMoe30pO3RoaXMuc2hvd092ZXJsYXkoZSwiYWctb3ZlcmxheS1sb2FkaW5nLXdyYXBwZXIiLCJsb2FkaW5nT3ZlcmxheUNvbXBvbmVudFBhcmFtcyIpfXNob3dOb1Jvd3NPdmVybGF5KCl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc05vUm93c092ZXJsYXkiKSlyZXR1cm47Y29uc3QgZT10aGlzLnVzZXJDb21wb25lbnRGYWN0b3J5LmdldE5vUm93c092ZXJsYXlDb21wRGV0YWlscyh7fSk7dGhpcy5zaG93T3ZlcmxheShlLCJhZy1vdmVybGF5LW5vLXJvd3Mtd3JhcHBlciIsIm5vUm93c092ZXJsYXlDb21wb25lbnRQYXJhbXMiKX1zaG93T3ZlcmxheShlLHQsaSl7Y29uc3Qgcz1lLm5ld0FnU3RhY2tJbnN0YW5jZSgpLHI9dGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcihpLCh7Y3VycmVudFZhbHVlOmV9KT0+e3MudGhlbih0PT57dC5yZWZyZXNoJiZ0LnJlZnJlc2godGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyhPYmplY3QuYXNzaWduKHt9LG51bGwhPWU/ZTp7fSkpKX0pfSk7dGhpcy5tYW51YWxseURpc3BsYXllZD10aGlzLmNvbHVtbk1vZGVsLmlzUmVhZHkoKSYmIXRoaXMucGFnaW5hdGlvblByb3h5LmlzRW1wdHkoKSx0aGlzLm92ZXJsYXlXcmFwcGVyQ29tcC5zaG93T3ZlcmxheShzLHQscil9aGlkZU92ZXJsYXkoKXt0aGlzLm1hbnVhbGx5RGlzcGxheWVkPSExLHRoaXMub3ZlcmxheVdyYXBwZXJDb21wLmhpZGVPdmVybGF5KCl9c2hvd09ySGlkZU92ZXJsYXkoKXtjb25zdCBlPXRoaXMucGFnaW5hdGlvblByb3h5LmlzRW1wdHkoKSx0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NOb1Jvd3NPdmVybGF5Iik7ZSYmIXQ/dGhpcy5zaG93Tm9Sb3dzT3ZlcmxheSgpOnRoaXMuaGlkZU92ZXJsYXkoKX1vblJvd0RhdGFVcGRhdGVkKCl7dGhpcy5zaG93T3JIaWRlT3ZlcmxheSgpfW9uTmV3Q29sdW1uc0xvYWRlZCgpeyF0aGlzLmNvbHVtbk1vZGVsLmlzUmVhZHkoKXx8dGhpcy5wYWdpbmF0aW9uUHJveHkuaXNFbXB0eSgpfHx0aGlzLm1hbnVhbGx5RGlzcGxheWVkfHx0aGlzLmhpZGVPdmVybGF5KCl9fTtEdShbY2UoInVzZXJDb21wb25lbnRGYWN0b3J5IildLE91LnByb3RvdHlwZSwidXNlckNvbXBvbmVudEZhY3RvcnkiLHZvaWQgMCksRHUoW2NlKCJwYWdpbmF0aW9uUHJveHkiKV0sT3UucHJvdG90eXBlLCJwYWdpbmF0aW9uUHJveHkiLHZvaWQgMCksRHUoW2NlKCJjb2x1bW5Nb2RlbCIpXSxPdS5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLER1KFthZV0sT3UucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxPdT1EdShbZGUoIm92ZXJsYXlTZXJ2aWNlIildLE91KTt2YXIgQXU9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IFB1PWNsYXNzIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuc3VwcHJlc3NFdmVudHM9ITAsdGhpcy5xdWV1ZWRVcGRhdGVTb3VyY2VzPW5ldyBTZXQsdGhpcy5kaXNwYXRjaFN0YXRlVXBkYXRlRXZlbnREZWJvdW5jZWQ9USgoKT0+dGhpcy5kaXNwYXRjaFF1ZXVlZFN0YXRlVXBkYXRlRXZlbnRzKCksMCl9cG9zdENvbnN0cnVjdCgpe3ZhciBlO3RoaXMuaXNDbGllbnRTaWRlUm93TW9kZWw9ImNsaWVudFNpZGUiPT09dGhpcy5yb3dNb2RlbC5nZXRUeXBlKCksdGhpcy5jYWNoZWRTdGF0ZT1udWxsIT09KGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJpbml0aWFsU3RhdGUiKSkmJnZvaWQgMCE9PWU/ZTp7fSx0aGlzLmN0cmxzU2VydmljZS53aGVuUmVhZHkoKCk9PnRoaXMuc3VwcHJlc3NFdmVudHNBbmREaXNwYXRjaEluaXRFdmVudCgoKT0+dGhpcy5zZXR1cFN0YXRlT25HcmlkUmVhZHkoKSkpO2NvbnN0IHQ9dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELCh7c291cmNlOmV9KT0+eyJncmlkSW5pdGlhbGl6aW5nIj09PWUmJihudWxsPT10fHx0KCksdGhpcy5zdXBwcmVzc0V2ZW50c0FuZERpc3BhdGNoSW5pdEV2ZW50KCgpPT50aGlzLnNldHVwU3RhdGVPbkNvbHVtbnNJbml0aWFsaXNlZCgpKSl9KSxpPXRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1JPV19DT1VOVF9SRUFEWSwoKT0+e251bGw9PWl8fGkoKSx0aGlzLnN1cHByZXNzRXZlbnRzQW5kRGlzcGF0Y2hJbml0RXZlbnQoKCk9PnRoaXMuc2V0dXBTdGF0ZU9uUm93Q291bnRSZWFkeSgpKX0pLHM9dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRklSU1RfREFUQV9SRU5ERVJFRCwoKT0+e251bGw9PXN8fHMoKSx0aGlzLnN1cHByZXNzRXZlbnRzQW5kRGlzcGF0Y2hJbml0RXZlbnQoKCk9PnRoaXMuc2V0dXBTdGF0ZU9uRmlyc3REYXRhUmVuZGVyZWQoKSl9KX1nZXRTdGF0ZSgpe3JldHVybiB0aGlzLmNhY2hlZFN0YXRlfXNldHVwU3RhdGVPbkdyaWRSZWFkeSgpe3RoaXMudXBkYXRlQ2FjaGVkU3RhdGUoInNpZGVCYXIiLHRoaXMuZ2V0U2lkZUJhclN0YXRlKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1RPT0xfUEFORUxfVklTSUJMRV9DSEFOR0VELCgpPT50aGlzLnVwZGF0ZUNhY2hlZFN0YXRlKCJzaWRlQmFyIix0aGlzLmdldFNpZGVCYXJTdGF0ZSgpKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfU0lERV9CQVJfVVBEQVRFRCwoKT0+dGhpcy51cGRhdGVDYWNoZWRTdGF0ZSgic2lkZUJhciIsdGhpcy5nZXRTaWRlQmFyU3RhdGUoKSkpfXNldHVwU3RhdGVPbkNvbHVtbnNJbml0aWFsaXNlZCgpe3ZhciBlO2NvbnN0IHQ9bnVsbCE9PShlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiaW5pdGlhbFN0YXRlIikpJiZ2b2lkIDAhPT1lP2U6e307dGhpcy5zZXRDb2x1bW5TdGF0ZSh0KSx0aGlzLnNldENvbHVtbkdyb3VwU3RhdGUodCksdGhpcy51cGRhdGVDb2x1bW5TdGF0ZShbImFnZ3JlZ2F0aW9uIiwiY29sdW1uT3JkZXIiLCJjb2x1bW5QaW5uaW5nIiwiY29sdW1uU2l6aW5nIiwiY29sdW1uVmlzaWJpbGl0eSIsInBpdm90IiwicGl2b3QiLCJyb3dHcm91cCIsInNvcnQiXSksdGhpcy51cGRhdGVDYWNoZWRTdGF0ZSgiY29sdW1uR3JvdXAiLHRoaXMuZ2V0Q29sdW1uR3JvdXBTdGF0ZSgpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fVkFMVUVfQ0hBTkdFRCwoKT0+dGhpcy51cGRhdGVDb2x1bW5TdGF0ZShbImFnZ3JlZ2F0aW9uIl0pKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fTU9WRUQsKCk9PnRoaXMudXBkYXRlQ29sdW1uU3RhdGUoWyJjb2x1bW5PcmRlciJdKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ09MVU1OX1BJTk5FRCwoKT0+dGhpcy51cGRhdGVDb2x1bW5TdGF0ZShbImNvbHVtblBpbm5pbmciXSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9SRVNJWkVELCgpPT50aGlzLnVwZGF0ZUNvbHVtblN0YXRlKFsiY29sdW1uU2l6aW5nIl0pKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9DT0xVTU5fVklTSUJMRSwoKT0+dGhpcy51cGRhdGVDb2x1bW5TdGF0ZShbImNvbHVtblZpc2liaWxpdHkiXSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9QSVZPVF9DSEFOR0VELCgpPT50aGlzLnVwZGF0ZUNvbHVtblN0YXRlKFsicGl2b3QiXSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9QSVZPVF9NT0RFX0NIQU5HRUQsKCk9PnRoaXMudXBkYXRlQ29sdW1uU3RhdGUoWyJwaXZvdCJdKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ09MVU1OX1JPV19HUk9VUF9DSEFOR0VELCgpPT50aGlzLnVwZGF0ZUNvbHVtblN0YXRlKFsicm93R3JvdXAiXSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1NPUlRfQ0hBTkdFRCwoKT0+dGhpcy51cGRhdGVDb2x1bW5TdGF0ZShbInNvcnQiXSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX05FV19DT0xVTU5TX0xPQURFRCwoKT0+dGhpcy51cGRhdGVDb2x1bW5TdGF0ZShbImFnZ3JlZ2F0aW9uIiwiY29sdW1uT3JkZXIiLCJjb2x1bW5QaW5uaW5nIiwiY29sdW1uU2l6aW5nIiwiY29sdW1uVmlzaWJpbGl0eSIsInBpdm90IiwicGl2b3QiLCJyb3dHcm91cCIsInNvcnQiXSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0NPTFVNTl9HUk9VUF9PUEVORUQsKCk9PnRoaXMudXBkYXRlQ2FjaGVkU3RhdGUoImNvbHVtbkdyb3VwIix0aGlzLmdldENvbHVtbkdyb3VwU3RhdGUoKSkpfXNldHVwU3RhdGVPblJvd0NvdW50UmVhZHkoKXt2YXIgZTtjb25zdHtmaWx0ZXI6dCxyb3dHcm91cEV4cGFuc2lvbjppLHJvd1NlbGVjdGlvbjpzLHBhZ2luYXRpb246cn09bnVsbCE9PShlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiaW5pdGlhbFN0YXRlIikpJiZ2b2lkIDAhPT1lP2U6e30sbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImFkdmFuY2VkRmlsdGVyTW9kZWwiKTsodHx8bykmJnRoaXMuc2V0RmlsdGVyU3RhdGUodCxvKSxpJiZ0aGlzLnNldFJvd0dyb3VwRXhwYW5zaW9uU3RhdGUoaSkscyYmdGhpcy5zZXRSb3dTZWxlY3Rpb25TdGF0ZShzKSxyJiZ0aGlzLnNldFBhZ2luYXRpb25TdGF0ZShyKSx0aGlzLnVwZGF0ZUNhY2hlZFN0YXRlKCJmaWx0ZXIiLHRoaXMuZ2V0RmlsdGVyU3RhdGUoKSksdGhpcy51cGRhdGVDYWNoZWRTdGF0ZSgicm93R3JvdXBFeHBhbnNpb24iLHRoaXMuZ2V0Um93R3JvdXBFeHBhbnNpb25TdGF0ZSgpKSx0aGlzLnVwZGF0ZUNhY2hlZFN0YXRlKCJyb3dTZWxlY3Rpb24iLHRoaXMuZ2V0Um93U2VsZWN0aW9uU3RhdGUoKSksdGhpcy51cGRhdGVDYWNoZWRTdGF0ZSgicGFnaW5hdGlvbiIsdGhpcy5nZXRQYWdpbmF0aW9uU3RhdGUoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRklMVEVSX0NIQU5HRUQsKCk9PnRoaXMudXBkYXRlQ2FjaGVkU3RhdGUoImZpbHRlciIsdGhpcy5nZXRGaWx0ZXJTdGF0ZSgpKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfUk9XX0dST1VQX09QRU5FRCwoKT0+dGhpcy51cGRhdGVDYWNoZWRTdGF0ZSgicm93R3JvdXBFeHBhbnNpb24iLHRoaXMuZ2V0Um93R3JvdXBFeHBhbnNpb25TdGF0ZSgpKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfRVhQQU5EX0NPTExBUFNFX0FMTCwoKT0+dGhpcy51cGRhdGVDYWNoZWRTdGF0ZSgicm93R3JvdXBFeHBhbnNpb24iLHRoaXMuZ2V0Um93R3JvdXBFeHBhbnNpb25TdGF0ZSgpKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfU0VMRUNUSU9OX0NIQU5HRUQsKCk9PnRoaXMudXBkYXRlQ2FjaGVkU3RhdGUoInJvd1NlbGVjdGlvbiIsdGhpcy5nZXRSb3dTZWxlY3Rpb25TdGF0ZSgpKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfUEFHSU5BVElPTl9DSEFOR0VELGU9PnsoZS5uZXdQYWdlfHxlLm5ld1BhZ2VTaXplKSYmdGhpcy51cGRhdGVDYWNoZWRTdGF0ZSgicGFnaW5hdGlvbiIsdGhpcy5nZXRQYWdpbmF0aW9uU3RhdGUoKSl9KX1zZXR1cFN0YXRlT25GaXJzdERhdGFSZW5kZXJlZCgpe3ZhciBlO2NvbnN0e3Njcm9sbDp0LHJhbmdlU2VsZWN0aW9uOmksZm9jdXNlZENlbGw6cyxjb2x1bW5PcmRlcjpyfT1udWxsIT09KGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJpbml0aWFsU3RhdGUiKSkmJnZvaWQgMCE9PWU/ZTp7fTtzJiZ0aGlzLnNldEZvY3VzZWRDZWxsU3RhdGUocyksaSYmdGhpcy5zZXRSYW5nZVNlbGVjdGlvblN0YXRlKGkpLHQmJnRoaXMuc2V0U2Nyb2xsU3RhdGUodCksdGhpcy5zZXRDb2x1bW5QaXZvdFN0YXRlKCEhKG51bGw9PXI/dm9pZCAwOnIub3JkZXJlZENvbElkcykpLHRoaXMudXBkYXRlQ2FjaGVkU3RhdGUoInNpZGVCYXIiLHRoaXMuZ2V0U2lkZUJhclN0YXRlKCkpLHRoaXMudXBkYXRlQ2FjaGVkU3RhdGUoImZvY3VzZWRDZWxsIix0aGlzLmdldEZvY3VzZWRDZWxsU3RhdGUoKSksdGhpcy51cGRhdGVDYWNoZWRTdGF0ZSgicmFuZ2VTZWxlY3Rpb24iLHRoaXMuZ2V0UmFuZ2VTZWxlY3Rpb25TdGF0ZSgpKSx0aGlzLnVwZGF0ZUNhY2hlZFN0YXRlKCJzY3JvbGwiLHRoaXMuZ2V0U2Nyb2xsU3RhdGUoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2UsbHQuRVZFTlRfQ0VMTF9GT0NVU0VELCgpPT50aGlzLnVwZGF0ZUNhY2hlZFN0YXRlKCJmb2N1c2VkQ2VsbCIsdGhpcy5nZXRGb2N1c2VkQ2VsbFN0YXRlKCkpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxsdC5FVkVOVF9SQU5HRV9TRUxFQ1RJT05fQ0hBTkdFRCxlPT57ZS5maW5pc2hlZCYmdGhpcy51cGRhdGVDYWNoZWRTdGF0ZSgicmFuZ2VTZWxlY3Rpb24iLHRoaXMuZ2V0UmFuZ2VTZWxlY3Rpb25TdGF0ZSgpKX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX0JPRFlfU0NST0xMX0VORCwoKT0+dGhpcy51cGRhdGVDYWNoZWRTdGF0ZSgic2Nyb2xsIix0aGlzLmdldFNjcm9sbFN0YXRlKCkpKX1nZXRDb2x1bW5TdGF0ZSgpe2NvbnN0IGU9dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpLHQ9W10saT1bXSxzPVtdLHI9W10sbz1bXSxuPVtdLGE9W10sbD1bXSxkPVtdLGM9dGhpcy5jb2x1bW5Nb2RlbC5nZXRDb2x1bW5TdGF0ZSgpO2ZvcihsZXQgZT0wO2U8Yy5sZW5ndGg7ZSsrKXtjb25zdHtjb2xJZDpoLHNvcnQ6dSxzb3J0SW5kZXg6cCxyb3dHcm91cDpnLHJvd0dyb3VwSW5kZXg6bSxhZ2dGdW5jOmYscGl2b3Q6dixwaXZvdEluZGV4OkMscGlubmVkOnksaGlkZTpTLHdpZHRoOncsZmxleDpifT1jW2VdO2QucHVzaChoKSx1JiYodFtudWxsIT1wP3A6MF09e2NvbElkOmgsc29ydDp1fSksZyYmKGlbbnVsbCE9bT9tOjBdPWgpLCJzdHJpbmciPT10eXBlb2YgZiYmcy5wdXNoKHtjb2xJZDpoLGFnZ0Z1bmM6Zn0pLHYmJihyW251bGwhPUM/QzowXT1oKSx5JiYoInJpZ2h0Ij09PXk/bjpvKS5wdXNoKGgpLFMmJmEucHVzaChoKSwoYnx8dykmJmwucHVzaCh7Y29sSWQ6aCxmbGV4Om51bGwhPWI/Yjp2b2lkIDAsd2lkdGg6d30pfXJldHVybntzb3J0OnQubGVuZ3RoP3tzb3J0TW9kZWw6dH06dm9pZCAwLHJvd0dyb3VwOmkubGVuZ3RoP3tncm91cENvbElkczppfTp2b2lkIDAsYWdncmVnYXRpb246cy5sZW5ndGg/e2FnZ3JlZ2F0aW9uTW9kZWw6c306dm9pZCAwLHBpdm90OnIubGVuZ3RofHxlP3twaXZvdE1vZGU6ZSxwaXZvdENvbElkczpyfTp2b2lkIDAsY29sdW1uUGlubmluZzpvLmxlbmd0aHx8bi5sZW5ndGg/e2xlZnRDb2xJZHM6byxyaWdodENvbElkczpufTp2b2lkIDAsY29sdW1uVmlzaWJpbGl0eTphLmxlbmd0aD97aGlkZGVuQ29sSWRzOmF9OnZvaWQgMCxjb2x1bW5TaXppbmc6bC5sZW5ndGg/e2NvbHVtblNpemluZ01vZGVsOmx9OnZvaWQgMCxjb2x1bW5PcmRlcjpkLmxlbmd0aD97b3JkZXJlZENvbElkczpkfTp2b2lkIDB9fXNldENvbHVtblN0YXRlKGUpe2NvbnN0e3NvcnQ6dCxyb3dHcm91cDppLGFnZ3JlZ2F0aW9uOnMscGl2b3Q6cixjb2x1bW5QaW5uaW5nOm8sY29sdW1uVmlzaWJpbGl0eTpuLGNvbHVtblNpemluZzphLGNvbHVtbk9yZGVyOmx9PWUsZD17fSxjPWU9PntsZXQgdD1kW2VdO3JldHVybiB0fHwodD17Y29sSWQ6ZX0sZFtlXT10LHQpfTt0JiZ0LnNvcnRNb2RlbC5mb3JFYWNoKCh7Y29sSWQ6ZSxzb3J0OnR9LGkpPT57Y29uc3Qgcz1jKGUpO3Muc29ydD10LHMuc29ydEluZGV4PWl9KSxpJiZpLmdyb3VwQ29sSWRzLmZvckVhY2goKGUsdCk9Pntjb25zdCBpPWMoZSk7aS5yb3dHcm91cD0hMCxpLnJvd0dyb3VwSW5kZXg9dH0pLHMmJnMuYWdncmVnYXRpb25Nb2RlbC5mb3JFYWNoKCh7Y29sSWQ6ZSxhZ2dGdW5jOnR9KT0+e2MoZSkuYWdnRnVuYz10fSksciYmKHIucGl2b3RDb2xJZHMuZm9yRWFjaCgoZSx0KT0+e2NvbnN0IGk9YyhlKTtpLnBpdm90PSEwLGkucGl2b3RJbmRleD10fSksdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UudXBkYXRlR3JpZE9wdGlvbnMoe29wdGlvbnM6e3Bpdm90TW9kZTpyLnBpdm90TW9kZX0sc291cmNlOiJncmlkSW5pdGlhbGl6aW5nIn0pKSxvJiYoby5sZWZ0Q29sSWRzLmZvckVhY2goZT0+e2MoZSkucGlubmVkPSJsZWZ0In0pLG8ucmlnaHRDb2xJZHMuZm9yRWFjaChlPT57YyhlKS5waW5uZWQ9InJpZ2h0In0pKSxuJiZuLmhpZGRlbkNvbElkcy5mb3JFYWNoKGU9PntjKGUpLmhpZGU9ITB9KSxhJiZhLmNvbHVtblNpemluZ01vZGVsLmZvckVhY2goKHtjb2xJZDplLGZsZXg6dCx3aWR0aDppfSk9Pntjb25zdCBzPWMoZSk7cy5mbGV4PW51bGwhPXQ/dDpudWxsLHMud2lkdGg9aX0pO2NvbnN0IGg9bnVsbD09bD92b2lkIDA6bC5vcmRlcmVkQ29sSWRzLHU9ISEobnVsbD09aD92b2lkIDA6aC5sZW5ndGgpLHA9dT9oLm1hcChlPT5jKGUpKTpPYmplY3QudmFsdWVzKGQpO2lmKHAubGVuZ3RoKXt0aGlzLmNvbHVtblN0YXRlcz1wO2NvbnN0IGU9e3NvcnQ6bnVsbCxzb3J0SW5kZXg6bnVsbCxyb3dHcm91cDpudWxsLHJvd0dyb3VwSW5kZXg6bnVsbCxhZ2dGdW5jOm51bGwscGl2b3Q6bnVsbCxwaXZvdEluZGV4Om51bGwscGlubmVkOm51bGwsaGlkZTpudWxsLGZsZXg6bnVsbH07dGhpcy5jb2x1bW5Nb2RlbC5hcHBseUNvbHVtblN0YXRlKHtzdGF0ZTpwLGFwcGx5T3JkZXI6dSxkZWZhdWx0U3RhdGU6ZX0sImdyaWRJbml0aWFsaXppbmciKX19c2V0Q29sdW1uUGl2b3RTdGF0ZShlKXtjb25zdCB0PXRoaXMuY29sdW1uU3RhdGVzO3RoaXMuY29sdW1uU3RhdGVzPXZvaWQgMDtjb25zdCBpPXRoaXMuY29sdW1uR3JvdXBTdGF0ZXM7aWYodGhpcy5jb2x1bW5Hcm91cFN0YXRlcz12b2lkIDAsdGhpcy5jb2x1bW5Nb2RlbC5pc1NlY29uZGFyeUNvbHVtbnNQcmVzZW50KCkpe2lmKHQpe2xldCBpPVtdO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5jb2x1bW5Nb2RlbC5nZXRTZWNvbmRhcnlDb2x1bW4oZS5jb2xJZCkmJmkucHVzaChlKTt0aGlzLmNvbHVtbk1vZGVsLmFwcGx5Q29sdW1uU3RhdGUoe3N0YXRlOmksYXBwbHlPcmRlcjplfSwiZ3JpZEluaXRpYWxpemluZyIpfWkmJnRoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uR3JvdXBTdGF0ZShpLCJncmlkSW5pdGlhbGl6aW5nIil9fWdldENvbHVtbkdyb3VwU3RhdGUoKXtjb25zdCBlPXRoaXMuY29sdW1uTW9kZWwuZ2V0Q29sdW1uR3JvdXBTdGF0ZSgpLHQ9W107cmV0dXJuIGUuZm9yRWFjaCgoe2dyb3VwSWQ6ZSxvcGVuOml9KT0+e2kmJnQucHVzaChlKX0pLHQubGVuZ3RoP3tvcGVuQ29sdW1uR3JvdXBJZHM6dH06dm9pZCAwfXNldENvbHVtbkdyb3VwU3RhdGUoZSl7dmFyIHQ7aWYoIWUuaGFzT3duUHJvcGVydHkoImNvbHVtbkdyb3VwIikpcmV0dXJuO2NvbnN0IGk9bmV3IFNldChudWxsPT09KHQ9ZS5jb2x1bW5Hcm91cCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub3BlbkNvbHVtbkdyb3VwSWRzKSxzPXRoaXMuY29sdW1uTW9kZWwuZ2V0Q29sdW1uR3JvdXBTdGF0ZSgpLm1hcCgoe2dyb3VwSWQ6ZX0pPT57Y29uc3QgdD1pLmhhcyhlKTtyZXR1cm4gdCYmaS5kZWxldGUoZSkse2dyb3VwSWQ6ZSxvcGVuOnR9fSk7aS5mb3JFYWNoKGU9PntzLnB1c2goe2dyb3VwSWQ6ZSxvcGVuOiEwfSl9KSxzLmxlbmd0aCYmKHRoaXMuY29sdW1uR3JvdXBTdGF0ZXM9cyksdGhpcy5jb2x1bW5Nb2RlbC5zZXRDb2x1bW5Hcm91cFN0YXRlKHMsImdyaWRJbml0aWFsaXppbmciKX1nZXRGaWx0ZXJTdGF0ZSgpe3ZhciBlO2xldCB0PXRoaXMuZmlsdGVyTWFuYWdlci5nZXRGaWx0ZXJNb2RlbCgpO3QmJjA9PT1PYmplY3Qua2V5cyh0KS5sZW5ndGgmJih0PXZvaWQgMCk7Y29uc3QgaT1udWxsIT09KGU9dGhpcy5maWx0ZXJNYW5hZ2VyLmdldEFkdmFuY2VkRmlsdGVyTW9kZWwoKSkmJnZvaWQgMCE9PWU/ZTp2b2lkIDA7cmV0dXJuIHR8fGk/e2ZpbHRlck1vZGVsOnQsYWR2YW5jZWRGaWx0ZXJNb2RlbDppfTp2b2lkIDB9c2V0RmlsdGVyU3RhdGUoZSx0KXtjb25zdHtmaWx0ZXJNb2RlbDppLGFkdmFuY2VkRmlsdGVyTW9kZWw6c309bnVsbCE9ZT9lOnthZHZhbmNlZEZpbHRlck1vZGVsOnR9O2kmJnRoaXMuZmlsdGVyTWFuYWdlci5zZXRGaWx0ZXJNb2RlbChpLCJjb2x1bW5GaWx0ZXIiKSxzJiZ0aGlzLmZpbHRlck1hbmFnZXIuc2V0QWR2YW5jZWRGaWx0ZXJNb2RlbChzKX1nZXRSYW5nZVNlbGVjdGlvblN0YXRlKCl7dmFyIGU7Y29uc3QgdD1udWxsPT09KGU9dGhpcy5yYW5nZVNlcnZpY2UpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldENlbGxSYW5nZXMoKS5tYXAoZT0+e2NvbnN0e2lkOnQsdHlwZTppLHN0YXJ0Um93OnMsZW5kUm93OnIsY29sdW1uczpvLHN0YXJ0Q29sdW1uOm59PWU7cmV0dXJue2lkOnQsdHlwZTppLHN0YXJ0Um93OnMsZW5kUm93OnIsY29sSWRzOm8ubWFwKGU9PmUuZ2V0Q29sSWQoKSksc3RhcnRDb2xJZDpuLmdldENvbElkKCl9fSk7cmV0dXJuKG51bGw9PXQ/dm9pZCAwOnQubGVuZ3RoKT97Y2VsbFJhbmdlczp0fTp2b2lkIDB9c2V0UmFuZ2VTZWxlY3Rpb25TdGF0ZShlKXt2YXIgdDtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSYW5nZVNlbGVjdGlvbiIpKXJldHVybjtjb25zdCBpPWUuY2VsbFJhbmdlcy5tYXAoZT0+T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtjb2x1bW5zOmUuY29sSWRzLm1hcChlPT50aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4oZSkpLHN0YXJ0Q29sdW1uOnRoaXMuY29sdW1uTW9kZWwuZ2V0R3JpZENvbHVtbihlLnN0YXJ0Q29sSWQpfSkpO251bGw9PT0odD10aGlzLnJhbmdlU2VydmljZSl8fHZvaWQgMD09PXR8fHQuc2V0Q2VsbFJhbmdlcyhpKX1nZXRTY3JvbGxTdGF0ZSgpe3ZhciBlLHQsaTtpZighdGhpcy5pc0NsaWVudFNpZGVSb3dNb2RlbClyZXR1cm47Y29uc3Qgcz1udWxsPT09KGU9dGhpcy5jdHJsc1NlcnZpY2UuZ2V0R3JpZEJvZHlDdHJsKCkpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldFNjcm9sbEZlYXR1cmUoKSx7bGVmdDpyfT1udWxsIT09KHQ9bnVsbD09cz92b2lkIDA6cy5nZXRIU2Nyb2xsUG9zaXRpb24oKSkmJnZvaWQgMCE9PXQ/dDp7bGVmdDowfSx7dG9wOm99PW51bGwhPT0oaT1udWxsPT1zP3ZvaWQgMDpzLmdldFZTY3JvbGxQb3NpdGlvbigpKSYmdm9pZCAwIT09aT9pOnt0b3A6MH07cmV0dXJuIG98fHI/e3RvcDpvLGxlZnQ6cn06dm9pZCAwfXNldFNjcm9sbFN0YXRlKGUpe3ZhciB0O2lmKCF0aGlzLmlzQ2xpZW50U2lkZVJvd01vZGVsKXJldHVybjtjb25zdHt0b3A6aSxsZWZ0OnN9PWU7bnVsbD09PSh0PXRoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpKXx8dm9pZCAwPT09dHx8dC5nZXRTY3JvbGxGZWF0dXJlKCkuc2V0U2Nyb2xsUG9zaXRpb24oaSxzKX1nZXRTaWRlQmFyU3RhdGUoKXt2YXIgZSx0O3JldHVybiBudWxsPT09KHQ9bnVsbD09PShlPXRoaXMuc2lkZUJhclNlcnZpY2UpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldFNpZGVCYXJDb21wKCkpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmdldFN0YXRlKCl9Z2V0Rm9jdXNlZENlbGxTdGF0ZSgpe2lmKCF0aGlzLmlzQ2xpZW50U2lkZVJvd01vZGVsKXJldHVybjtjb25zdCBlPXRoaXMuZm9jdXNTZXJ2aWNlLmdldEZvY3VzZWRDZWxsKCk7aWYoZSl7Y29uc3R7Y29sdW1uOnQscm93SW5kZXg6aSxyb3dQaW5uZWQ6c309ZTtyZXR1cm57Y29sSWQ6dC5nZXRDb2xJZCgpLHJvd0luZGV4Omkscm93UGlubmVkOnN9fX1zZXRGb2N1c2VkQ2VsbFN0YXRlKGUpe2lmKCF0aGlzLmlzQ2xpZW50U2lkZVJvd01vZGVsKXJldHVybjtjb25zdHtjb2xJZDp0LHJvd0luZGV4Omkscm93UGlubmVkOnN9PWU7dGhpcy5mb2N1c1NlcnZpY2Uuc2V0Rm9jdXNlZENlbGwoe2NvbHVtbjp0aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4odCkscm93SW5kZXg6aSxyb3dQaW5uZWQ6cyxmb3JjZUJyb3dzZXJGb2N1czohMCxwcmV2ZW50U2Nyb2xsT25Ccm93c2VyRm9jdXM6ITB9KX1nZXRQYWdpbmF0aW9uU3RhdGUoKXtjb25zdCBlPXRoaXMucGFnaW5hdGlvblByb3h5LmdldEN1cnJlbnRQYWdlKCksdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBhZ2luYXRpb25BdXRvUGFnZVNpemUiKT92b2lkIDA6dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0UGFnZVNpemUoKTtpZihlfHx0KXJldHVybntwYWdlOmUscGFnZVNpemU6dH19c2V0UGFnaW5hdGlvblN0YXRlKGUpe2UucGFnZVNpemUmJiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBhZ2luYXRpb25BdXRvUGFnZVNpemUiKSYmdGhpcy5wYWdpbmF0aW9uUHJveHkuc2V0UGFnZVNpemUoZS5wYWdlU2l6ZSwiaW5pdGlhbFN0YXRlIiksIm51bWJlciI9PXR5cGVvZiBlLnBhZ2UmJnRoaXMucGFnaW5hdGlvblByb3h5LnNldFBhZ2UoZS5wYWdlKX1nZXRSb3dTZWxlY3Rpb25TdGF0ZSgpe3ZhciBlO2NvbnN0IHQ9dGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmdldFNlbGVjdGlvblN0YXRlKCk7cmV0dXJuIXR8fCFBcnJheS5pc0FycmF5KHQpJiYoITE9PT10LnNlbGVjdEFsbHx8ITE9PT10LnNlbGVjdEFsbENoaWxkcmVuKSYmIShudWxsPT09KGU9bnVsbD09dD92b2lkIDA6dC50b2dnbGVkTm9kZXMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmxlbmd0aCk/dm9pZCAwOnR9c2V0Um93U2VsZWN0aW9uU3RhdGUoZSl7dGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnNldFNlbGVjdGlvblN0YXRlKGUsImdyaWRJbml0aWFsaXppbmciKX1nZXRSb3dHcm91cEV4cGFuc2lvblN0YXRlKCl7Y29uc3QgZT10aGlzLmV4cGFuc2lvblNlcnZpY2UuZ2V0RXhwYW5kZWRSb3dzKCk7cmV0dXJuIGUubGVuZ3RoP3tleHBhbmRlZFJvd0dyb3VwSWRzOmV9OnZvaWQgMH1zZXRSb3dHcm91cEV4cGFuc2lvblN0YXRlKGUpe3RoaXMuZXhwYW5zaW9uU2VydmljZS5leHBhbmRSb3dzKGUuZXhwYW5kZWRSb3dHcm91cElkcyl9dXBkYXRlQ29sdW1uU3RhdGUoZSl7Y29uc3QgdD10aGlzLmdldENvbHVtblN0YXRlKCk7bGV0IGk9ITE7T2JqZWN0LmVudHJpZXModCkuZm9yRWFjaCgoW2UsdF0pPT57QSh0LHRoaXMuY2FjaGVkU3RhdGVbZV0pfHwoaT0hMCl9KSx0aGlzLmNhY2hlZFN0YXRlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLmNhY2hlZFN0YXRlKSx0KSxpJiZ0aGlzLmRpc3BhdGNoU3RhdGVVcGRhdGVFdmVudChlKX11cGRhdGVDYWNoZWRTdGF0ZShlLHQpe2NvbnN0IGk9dGhpcy5jYWNoZWRTdGF0ZVtlXTt0aGlzLmNhY2hlZFN0YXRlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLmNhY2hlZFN0YXRlKSx7W2VdOnR9KSxBKHQsaSl8fHRoaXMuZGlzcGF0Y2hTdGF0ZVVwZGF0ZUV2ZW50KFtlXSl9ZGlzcGF0Y2hTdGF0ZVVwZGF0ZUV2ZW50KGUpe3RoaXMuc3VwcHJlc3NFdmVudHN8fChlLmZvckVhY2goZT0+dGhpcy5xdWV1ZWRVcGRhdGVTb3VyY2VzLmFkZChlKSksdGhpcy5kaXNwYXRjaFN0YXRlVXBkYXRlRXZlbnREZWJvdW5jZWQoKSl9ZGlzcGF0Y2hRdWV1ZWRTdGF0ZVVwZGF0ZUV2ZW50cygpe2NvbnN0IGU9QXJyYXkuZnJvbSh0aGlzLnF1ZXVlZFVwZGF0ZVNvdXJjZXMpO3RoaXMucXVldWVkVXBkYXRlU291cmNlcy5jbGVhcigpO2NvbnN0IHQ9e3R5cGU6bHQuRVZFTlRfU1RBVEVfVVBEQVRFRCxzb3VyY2VzOmUsc3RhdGU6dGhpcy5jYWNoZWRTdGF0ZX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KX1zdXBwcmVzc0V2ZW50c0FuZERpc3BhdGNoSW5pdEV2ZW50KGUpe3RoaXMuc3VwcHJlc3NFdmVudHM9ITAsdGhpcy5jb2x1bW5BbmltYXRpb25TZXJ2aWNlLnNldFN1cHByZXNzQW5pbWF0aW9uKCEwKSxlKCksc2V0VGltZW91dCgoKT0+e3RoaXMuc3VwcHJlc3NFdmVudHM9ITEsdGhpcy5xdWV1ZWRVcGRhdGVTb3VyY2VzLmNsZWFyKCksdGhpcy5pc0FsaXZlKCkmJih0aGlzLmNvbHVtbkFuaW1hdGlvblNlcnZpY2Uuc2V0U3VwcHJlc3NBbmltYXRpb24oITEpLHRoaXMuZGlzcGF0Y2hTdGF0ZVVwZGF0ZUV2ZW50KFsiZ3JpZEluaXRpYWxpemluZyJdKSl9KX19O0F1KFtjZSgiZmlsdGVyTWFuYWdlciIpXSxQdS5wcm90b3R5cGUsImZpbHRlck1hbmFnZXIiLHZvaWQgMCksQXUoW2hlKCJyYW5nZVNlcnZpY2UiKV0sUHUucHJvdG90eXBlLCJyYW5nZVNlcnZpY2UiLHZvaWQgMCksQXUoW2NlKCJjdHJsc1NlcnZpY2UiKV0sUHUucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksQXUoW2hlKCJzaWRlQmFyU2VydmljZSIpXSxQdS5wcm90b3R5cGUsInNpZGVCYXJTZXJ2aWNlIix2b2lkIDApLEF1KFtjZSgiZm9jdXNTZXJ2aWNlIildLFB1LnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLEF1KFtjZSgiY29sdW1uTW9kZWwiKV0sUHUucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxBdShbY2UoInBhZ2luYXRpb25Qcm94eSIpXSxQdS5wcm90b3R5cGUsInBhZ2luYXRpb25Qcm94eSIsdm9pZCAwKSxBdShbY2UoInJvd01vZGVsIildLFB1LnByb3RvdHlwZSwicm93TW9kZWwiLHZvaWQgMCksQXUoW2NlKCJzZWxlY3Rpb25TZXJ2aWNlIildLFB1LnByb3RvdHlwZSwic2VsZWN0aW9uU2VydmljZSIsdm9pZCAwKSxBdShbY2UoImV4cGFuc2lvblNlcnZpY2UiKV0sUHUucHJvdG90eXBlLCJleHBhbnNpb25TZXJ2aWNlIix2b2lkIDApLEF1KFtjZSgiY29sdW1uQW5pbWF0aW9uU2VydmljZSIpXSxQdS5wcm90b3R5cGUsImNvbHVtbkFuaW1hdGlvblNlcnZpY2UiLHZvaWQgMCksQXUoW2FlXSxQdS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLFB1PUF1KFtkZSgic3RhdGVTZXJ2aWNlIildLFB1KTt2YXIgTXU9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IEx1PWNsYXNzIGV4dGVuZHMgaXR7aW5pdCgpe3RoaXMucHJvY2Vzc0dyaWRPcHRpb25zKHRoaXMuZ3JpZE9wdGlvbnMpfXByb2Nlc3NHcmlkT3B0aW9ucyhlKXt0aGlzLnByb2Nlc3NPcHRpb25zKGUsaHUpfXByb2Nlc3NDb2x1bW5EZWZzKGUpe3RoaXMucHJvY2Vzc09wdGlvbnMoZSxsdSl9cHJvY2Vzc09wdGlvbnMoZSx0KXtjb25zdHt2YWxpZGF0aW9uczppLGRlcHJlY2F0aW9uczpzLGFsbFByb3BlcnRpZXM6cixwcm9wZXJ0eUV4Y2VwdGlvbnM6byxvYmplY3ROYW1lOm4sZG9jc1VybDphfT10O3ImJiEwIT09dGhpcy5ncmlkT3B0aW9ucy5zdXBwcmVzc1Byb3BlcnR5TmFtZXNDaGVjayYmdGhpcy5jaGVja1Byb3BlcnRpZXMoZSxbLi4ubnVsbCE9bz9vOltdLC4uLk9iamVjdC5rZXlzKHMpXSxyLG4sYSk7Y29uc3QgbD1uZXcgU2V0O09iamVjdC5rZXlzKGUpLmZvckVhY2godD0+e3ZhciByO2NvbnN0IG89c1t0XTtpZihvKWlmKCJyZW5hbWVkImluIG8pe2NvbnN0e3JlbmFtZWQ6aSx2ZXJzaW9uOnN9PW87bC5hZGQoYEFzIG9mIHYke3N9LCAke1N0cmluZyh0KX0gaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSAke1N0cmluZyhpKX0gaW5zdGVhZC5gKSxlW2ldPWVbdF19ZWxzZXtjb25zdHttZXNzYWdlOmUsdmVyc2lvbjppfT1vO2wuYWRkKGBBcyBvZiB2JHtpfSwgJHtTdHJpbmcodCl9IGlzIGRlcHJlY2F0ZWQuICR7bnVsbCE9ZT9lOiIifWApfWNvbnN0IG49ZVt0XTtpZihudWxsPT1ufHwhMT09PW4pcmV0dXJuO2NvbnN0IGE9aVt0XTtsZXQgZDtpZighYSlyZXR1cm47aWYoImZ1bmN0aW9uIj09dHlwZW9mIGEpe2NvbnN0IGk9YShlLHRoaXMuZ3JpZE9wdGlvbnMpO2lmKCFpKXJldHVybjtpZigib2JqZWN0TmFtZSJpbiBpKXtjb25zdCBzPWVbdF07cmV0dXJuIEFycmF5LmlzQXJyYXkocyk/dm9pZCBzLmZvckVhY2goZT0+e3RoaXMucHJvY2Vzc09wdGlvbnMoZSxpKX0pOnZvaWQgdGhpcy5wcm9jZXNzT3B0aW9ucyhlW3RdLGkpfWQ9aX1lbHNlIGQ9YTtjb25zdHttb2R1bGU6YyxkZXBlbmRlbmNpZXM6aCxzdXBwb3J0ZWRSb3dNb2RlbHM6dX09ZDtpZih1KXtjb25zdCBlPW51bGwhPT0ocj10aGlzLmdyaWRPcHRpb25zLnJvd01vZGVsVHlwZSkmJnZvaWQgMCE9PXI/cjoiY2xpZW50U2lkZSI7aWYoIXUuaW5jbHVkZXMoZSkpcmV0dXJuIHZvaWQgbC5hZGQoYCR7U3RyaW5nKHQpfSBpcyBub3Qgc3VwcG9ydGVkIHdpdGggdGhlICcke2V9JyByb3cgbW9kZWwuYCl9aWYoYyl7Y29uc3QgZT1BcnJheS5pc0FycmF5KGMpP2M6W2NdO2xldCBpPSEwO2lmKGUuZm9yRWFjaChlPT57cmUuX19hc3NlcnRSZWdpc3RlcmVkKGUsU3RyaW5nKHQpLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSl8fChpPSExLGwuYWRkKGAke1N0cmluZyh0KX0gaXMgb25seSBhdmFpbGFibGUgd2hlbiAke2V9IGlzIGxvYWRlZC5gKSl9KSwhaSlyZXR1cm59aWYoaCl7Y29uc3QgaT10aGlzLmNoZWNrRm9yV2FybmluZyh0LGgsZSk7aWYoaSlyZXR1cm4gdm9pZCBsLmFkZChpKX19KSxsLnNpemU+MCYmbC5mb3JFYWNoKGU9PntqKGUpfSl9Y2hlY2tGb3JXYXJuaW5nKGUsdCxpKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgdClyZXR1cm4gdChpLHRoaXMuZ3JpZE9wdGlvbnMpO2NvbnN0IHM9T2JqZWN0LmVudHJpZXModCkuZmluZCgoW2UsdF0pPT57Y29uc3Qgcz1pW2VdO3JldHVybiF0LmluY2x1ZGVzKHMpfSk7aWYoIXMpcmV0dXJuIG51bGw7Y29uc3RbcixvXT1zO3JldHVybiBvLmxlbmd0aD4xP2AnJHtTdHJpbmcoZSl9JyByZXF1aXJlcyAnJHtyfScgdG8gYmUgb25lIG9mIFske28uam9pbigiLCAiKX1dLmA6YCcke1N0cmluZyhlKX0nIHJlcXVpcmVzICcke3J9JyB0byBiZSAke29bMF19LmB9Y2hlY2tQcm9wZXJ0aWVzKGUsdCxpLHMscil7Y29uc3Qgbz1rcyhPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSxbIl9fb2JfXyIsIl9fdl9za2lwIiwiX19tZXRhZGF0YV9fIiwuLi50LC4uLmldLGkpO2lmKEYobywoZSx0KT0+e2ooYGludmFsaWQgJHtzfSBwcm9wZXJ0eSAnJHtlfScgZGlkIHlvdSBtZWFuIGFueSBvZiB0aGVzZTogJHt0LnNsaWNlKDAsOCkuam9pbigiLCAiKX1gKX0pLE9iamVjdC5rZXlzKG8pLmxlbmd0aD4wJiZyKXtjb25zdCBlPXRoaXMuZ2V0RnJhbWV3b3JrT3ZlcnJpZGVzKCkuZ2V0RG9jTGluayhyKTtqKGB0byBzZWUgYWxsIHRoZSB2YWxpZCAke3N9IHByb3BlcnRpZXMgcGxlYXNlIGNoZWNrOiAke2V9YCl9fX07TXUoW2NlKCJncmlkT3B0aW9ucyIpXSxMdS5wcm90b3R5cGUsImdyaWRPcHRpb25zIix2b2lkIDApLE11KFthZV0sTHUucHJvdG90eXBlLCJpbml0IixudWxsKSxMdT1NdShbZGUoInZhbGlkYXRpb25TZXJ2aWNlIildLEx1KTt2YXIgRnU9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IEl1PWNsYXNzIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuc3luY0V2ZW50TGlzdGVuZXJzPW5ldyBNYXAsdGhpcy5hc3luY0V2ZW50TGlzdGVuZXJzPW5ldyBNYXAsdGhpcy5zeW5jR2xvYmFsRXZlbnRMaXN0ZW5lcnM9bmV3IFNldCx0aGlzLmFzeW5jR2xvYmFsRXZlbnRMaXN0ZW5lcnM9bmV3IFNldH1wb3N0Q29uc3RydWN0KCl7dGhpcy5mcmFtZXdvcmtFdmVudFdyYXBwaW5nU2VydmljZT1uZXcgQ2UodGhpcy5nZXRGcmFtZXdvcmtPdmVycmlkZXMoKSl9YWRkRXZlbnRMaXN0ZW5lcihlLHQpe2NvbnN0IGk9dGhpcy5mcmFtZXdvcmtFdmVudFdyYXBwaW5nU2VydmljZS53cmFwKHQpLHM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UudXNlQXN5bmNFdmVudHMoKSxyPXM/dGhpcy5hc3luY0V2ZW50TGlzdGVuZXJzOnRoaXMuc3luY0V2ZW50TGlzdGVuZXJzO3IuaGFzKGUpfHxyLnNldChlLG5ldyBTZXQpLHIuZ2V0KGUpLmFkZChpKSx0aGlzLmV2ZW50U2VydmljZS5hZGRFdmVudExpc3RlbmVyKGUsaSxzKX1hZGRHbG9iYWxMaXN0ZW5lcihlKXtjb25zdCB0PXRoaXMuZnJhbWV3b3JrRXZlbnRXcmFwcGluZ1NlcnZpY2Uud3JhcEdsb2JhbChlKSxpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLnVzZUFzeW5jRXZlbnRzKCk7KGk/dGhpcy5hc3luY0dsb2JhbEV2ZW50TGlzdGVuZXJzOnRoaXMuc3luY0dsb2JhbEV2ZW50TGlzdGVuZXJzKS5hZGQodCksdGhpcy5ldmVudFNlcnZpY2UuYWRkR2xvYmFsTGlzdGVuZXIodCxpKX1yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl7dmFyIGk7Y29uc3Qgcz10aGlzLmZyYW1ld29ya0V2ZW50V3JhcHBpbmdTZXJ2aWNlLnVud3JhcCh0KSxyPXRoaXMuYXN5bmNFdmVudExpc3RlbmVycy5nZXQoZSksbz0hIShudWxsPT1yP3ZvaWQgMDpyLmRlbGV0ZShzKSk7b3x8bnVsbD09PShpPXRoaXMuYXN5bmNFdmVudExpc3RlbmVycy5nZXQoZSkpfHx2b2lkIDA9PT1pfHxpLmRlbGV0ZShzKSx0aGlzLmV2ZW50U2VydmljZS5yZW1vdmVFdmVudExpc3RlbmVyKGUscyxvKX1yZW1vdmVHbG9iYWxMaXN0ZW5lcihlKXtjb25zdCB0PXRoaXMuZnJhbWV3b3JrRXZlbnRXcmFwcGluZ1NlcnZpY2UudW53cmFwR2xvYmFsKGUpLGk9dGhpcy5hc3luY0dsb2JhbEV2ZW50TGlzdGVuZXJzLmRlbGV0ZSh0KTtpfHx0aGlzLnN5bmNHbG9iYWxFdmVudExpc3RlbmVycy5kZWxldGUodCksdGhpcy5ldmVudFNlcnZpY2UucmVtb3ZlR2xvYmFsTGlzdGVuZXIodCxpKX1kZXN0cm95RXZlbnRMaXN0ZW5lcnMoZSx0KXtlLmZvckVhY2goKGUsaSk9PntlLmZvckVhY2goZT0+dGhpcy5ldmVudFNlcnZpY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLGUsdCkpLGUuY2xlYXIoKX0pLGUuY2xlYXIoKX1kZXN0cm95R2xvYmFsTGlzdGVuZXJzKGUsdCl7ZS5mb3JFYWNoKGU9PnRoaXMuZXZlbnRTZXJ2aWNlLnJlbW92ZUdsb2JhbExpc3RlbmVyKGUsdCkpLGUuY2xlYXIoKX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLHRoaXMuZGVzdHJveUV2ZW50TGlzdGVuZXJzKHRoaXMuc3luY0V2ZW50TGlzdGVuZXJzLCExKSx0aGlzLmRlc3Ryb3lFdmVudExpc3RlbmVycyh0aGlzLmFzeW5jRXZlbnRMaXN0ZW5lcnMsITApLHRoaXMuZGVzdHJveUdsb2JhbExpc3RlbmVycyh0aGlzLnN5bmNHbG9iYWxFdmVudExpc3RlbmVycywhMSksdGhpcy5kZXN0cm95R2xvYmFsTGlzdGVuZXJzKHRoaXMuYXN5bmNHbG9iYWxFdmVudExpc3RlbmVycywhMCl9fTtGdShbYWVdLEl1LnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksSXU9RnUoW2RlKCJhcGlFdmVudFNlcnZpY2UiKV0sSXUpO3ZhciBOdT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBHdSBleHRlbmRzIGNye2NvbnN0cnVjdG9yKCl7c3VwZXIoJzxzcGFuIGNsYXNzPSJhZy1wYWdpbmctcGFnZS1zaXplIj48L3NwYW4+JyksdGhpcy5oYXNFbXB0eU9wdGlvbj0hMSx0aGlzLmhhbmRsZVBhZ2VTaXplSXRlbVNlbGVjdGVkPSgpPT57aWYoIXRoaXMuc2VsZWN0UGFnZVNpemVDb21wKXJldHVybjtjb25zdCBlPXRoaXMuc2VsZWN0UGFnZVNpemVDb21wLmdldFZhbHVlKCk7aWYoIWUpcmV0dXJuO2NvbnN0IHQ9TnVtYmVyKGUpO2lzTmFOKHQpfHx0PDF8fHQ9PT10aGlzLnBhZ2luYXRpb25Qcm94eS5nZXRQYWdlU2l6ZSgpfHwodGhpcy5wYWdpbmF0aW9uUHJveHkuc2V0UGFnZVNpemUodCwicGFnZVNpemVTZWxlY3RvciIpLHRoaXMuaGFzRW1wdHlPcHRpb24mJnRoaXMudG9nZ2xlU2VsZWN0RGlzcGxheSghMCksdGhpcy5zZWxlY3RQYWdlU2l6ZUNvbXAuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLmZvY3VzKCkpfX1pbml0KCl7dGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigicGFnaW5hdGlvblBhZ2VTaXplU2VsZWN0b3IiLCgpPT57dGhpcy5vblBhZ2VTaXplU2VsZWN0b3JWYWx1ZXNDaGFuZ2UoKX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGx0LkVWRU5UX1BBR0lOQVRJT05fQ0hBTkdFRCxlPT50aGlzLmhhbmRsZVBhZ2luYXRpb25DaGFuZ2VkKGUpKX1oYW5kbGVQYWdpbmF0aW9uQ2hhbmdlZChlKXtpZighdGhpcy5zZWxlY3RQYWdlU2l6ZUNvbXB8fCEobnVsbD09ZT92b2lkIDA6ZS5uZXdQYWdlU2l6ZSkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0UGFnZVNpemUoKTt0aGlzLmdldFBhZ2VTaXplU2VsZWN0b3JWYWx1ZXMoKS5pbmNsdWRlcyh0KT90aGlzLnNlbGVjdFBhZ2VTaXplQ29tcC5zZXRWYWx1ZSh0LnRvU3RyaW5nKCkpOnRoaXMuaGFzRW1wdHlPcHRpb24/dGhpcy5zZWxlY3RQYWdlU2l6ZUNvbXAuc2V0VmFsdWUoIiIpOnRoaXMudG9nZ2xlU2VsZWN0RGlzcGxheSghMCl9dG9nZ2xlU2VsZWN0RGlzcGxheShlKXt0aGlzLnNlbGVjdFBhZ2VTaXplQ29tcCYmdGhpcy5yZXNldCgpLGUmJih0aGlzLnJlbG9hZFBhZ2VTaXplc1NlbGVjdG9yKCksdGhpcy5zZWxlY3RQYWdlU2l6ZUNvbXAmJnRoaXMuYXBwZW5kQ2hpbGQodGhpcy5zZWxlY3RQYWdlU2l6ZUNvbXApKX1yZXNldCgpe21zKHRoaXMuZ2V0R3VpKCkpLHRoaXMuc2VsZWN0UGFnZVNpemVDb21wJiYodGhpcy5kZXN0cm95QmVhbih0aGlzLnNlbGVjdFBhZ2VTaXplQ29tcCksdGhpcy5zZWxlY3RQYWdlU2l6ZUNvbXA9dm9pZCAwKX1vblBhZ2VTaXplU2VsZWN0b3JWYWx1ZXNDaGFuZ2UoKXt0aGlzLnNlbGVjdFBhZ2VTaXplQ29tcCYmdGhpcy5zaG91bGRTaG93UGFnZVNpemVTZWxlY3RvcigpJiZ0aGlzLnJlbG9hZFBhZ2VTaXplc1NlbGVjdG9yKCl9c2hvdWxkU2hvd1BhZ2VTaXplU2VsZWN0b3IoKXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJwYWdpbmF0aW9uIikmJiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzUGFnaW5hdGlvblBhbmVsIikmJiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBhZ2luYXRpb25BdXRvUGFnZVNpemUiKSYmITEhPT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBhZ2luYXRpb25QYWdlU2l6ZVNlbGVjdG9yIil9cmVsb2FkUGFnZVNpemVzU2VsZWN0b3IoKXtjb25zdCBlPXRoaXMuZ2V0UGFnZVNpemVTZWxlY3RvclZhbHVlcygpLHQ9dGhpcy5wYWdpbmF0aW9uUHJveHkuZ2V0UGFnZVNpemUoKSxpPSF0fHwhZS5pbmNsdWRlcyh0KTtpJiYoZS51bnNoaWZ0KCIiKSxqKCJUaGUgcGFnaW5hdGlvblBhZ2VTaXplIGdyaWQgb3B0aW9uIGlzIHNldCB0byBhIHZhbHVlIHRoYXQgaXMgbm90IGluIHRoZSBsaXN0IG9mIHBhZ2Ugc2l6ZSBvcHRpb25zLlxuICAgICAgICAgICAgICAgIFBsZWFzZSBtYWtlIHN1cmUgdGhhdCB0aGUgcGFnaW5hdGlvblBhZ2VTaXplIGdyaWQgb3B0aW9uIGlzIHNldCB0byBvbmUgb2YgdGhlIHZhbHVlcyBpbiB0aGUgXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvblBhZ2VTaXplU2VsZWN0b3IgYXJyYXksIG9yIHNldCB0aGUgcGFnaW5hdGlvblBhZ2VTaXplU2VsZWN0b3IgdG8gZmFsc2UgdG8gaGlkZSB0aGUgcGFnZSBzaXplIHNlbGVjdG9yLiIpKSx0aGlzLnNlbGVjdFBhZ2VTaXplQ29tcCYmKHRoaXMuZGVzdHJveUJlYW4odGhpcy5zZWxlY3RQYWdlU2l6ZUNvbXApLHRoaXMuc2VsZWN0UGFnZVNpemVDb21wPXZvaWQgMCk7Y29uc3Qgcz10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSxyPXMoInBhZ2VTaXplU2VsZWN0b3JMYWJlbCIsIlBhZ2UgU2l6ZToiKSxvPWUubWFwKGU9Pih7dmFsdWU6U3RyaW5nKGUpLHRleHQ6U3RyaW5nKGUpfSkpLG49cygiYXJpYVBhZ2VTaXplU2VsZWN0b3JMYWJlbCIsIlBhZ2UgU2l6ZSIpO3RoaXMuc2VsZWN0UGFnZVNpemVDb21wPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IExyKS5hZGRPcHRpb25zKG8pLnNldFZhbHVlKFN0cmluZyhpPyIiOnQpKS5zZXRBcmlhTGFiZWwobikuc2V0TGFiZWwocikub25WYWx1ZUNoYW5nZSgoKT0+dGhpcy5oYW5kbGVQYWdlU2l6ZUl0ZW1TZWxlY3RlZCgpKSx0aGlzLmhhc0VtcHR5T3B0aW9uPWl9Z2V0UGFnZVNpemVTZWxlY3RvclZhbHVlcygpe2NvbnN0IGU9WzIwLDUwLDEwMF0sdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBhZ2luYXRpb25QYWdlU2l6ZVNlbGVjdG9yIik7cmV0dXJuIEFycmF5LmlzQXJyYXkodCkmJnRoaXMudmFsaWRhdGVWYWx1ZXModCk/Wy4uLnRdLnNvcnQoKGUsdCk9PmUtdCk6ZX12YWxpZGF0ZVZhbHVlcyhlKXtpZighZS5sZW5ndGgpcmV0dXJuIGooIlRoZSBwYWdpbmF0aW9uUGFnZVNpemVTZWxlY3RvciBncmlkIG9wdGlvbiBpcyBhbiBlbXB0eSBhcnJheS4gVGhpcyBpcyBtb3N0IGxpa2VseSBhIG1pc3Rha2UuXG4gICAgICAgICAgICAgICAgSWYgeW91IHdhbnQgdG8gaGlkZSB0aGUgcGFnZSBzaXplIHNlbGVjdG9yLCBwbGVhc2Ugc2V0IHRoZSBwYWdpbmF0aW9uUGFnZVNpemVTZWxlY3RvciB0byBmYWxzZS4iKSwhMTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7Y29uc3QgaT1lW3RdLHM9aT4wO2lmKCEoIm51bWJlciI9PXR5cGVvZiBpKSlyZXR1cm4gaigiVGhlIHBhZ2luYXRpb25QYWdlU2l6ZVNlbGVjdG9yIGdyaWQgb3B0aW9uIGNvbnRhaW5zIGEgbm9uLW51bWVyaWMgdmFsdWUuXG4gICAgICAgICAgICAgICAgICAgIFBsZWFzZSBtYWtlIHN1cmUgdGhhdCBhbGwgdmFsdWVzIGluIHRoZSBwYWdpbmF0aW9uUGFnZVNpemVTZWxlY3RvciBhcnJheSBhcmUgbnVtYmVycy4iKSwhMTtpZighcylyZXR1cm4gaigiVGhlIHBhZ2luYXRpb25QYWdlU2l6ZVNlbGVjdG9yIGdyaWQgb3B0aW9uIGNvbnRhaW5zIGEgbmVnYXRpdmUgbnVtYmVyIG9yIHplcm8uXG4gICAgICAgICAgICAgICAgICAgIFBsZWFzZSBtYWtlIHN1cmUgdGhhdCBhbGwgdmFsdWVzIGluIHRoZSBwYWdpbmF0aW9uUGFnZVNpemVTZWxlY3RvciBhcnJheSBhcmUgcG9zaXRpdmUuIiksITF9cmV0dXJuITB9ZGVzdHJveSgpe3RoaXMudG9nZ2xlU2VsZWN0RGlzcGxheSghMSksc3VwZXIuZGVzdHJveSgpfX1OdShbY2UoImxvY2FsZVNlcnZpY2UiKV0sR3UucHJvdG90eXBlLCJsb2NhbGVTZXJ2aWNlIix2b2lkIDApLE51KFtjZSgiZ3JpZE9wdGlvbnNTZXJ2aWNlIildLEd1LnByb3RvdHlwZSwiZ3JpZE9wdGlvbnNTZXJ2aWNlIix2b2lkIDApLE51KFtjZSgicGFnaW5hdGlvblByb3h5IildLEd1LnByb3RvdHlwZSwicGFnaW5hdGlvblByb3h5Iix2b2lkIDApLE51KFthZV0sR3UucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIga3U9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IF91PWNsYXNzIGV4dGVuZHMgaXR7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuZGVzY3JpcHRpb25Db250YWluZXI9bnVsbCx0aGlzLmFubm91bmNlVmFsdWU9USh0aGlzLmFubm91bmNlVmFsdWUuYmluZCh0aGlzKSwyMDApfXBvc3RDb25zdHJ1Y3QoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCksdD10aGlzLmRlc2NyaXB0aW9uQ29udGFpbmVyPWUuY3JlYXRlRWxlbWVudCgiZGl2Iik7dC5jbGFzc0xpc3QuYWRkKCJhZy1hcmlhLWRlc2NyaXB0aW9uLWNvbnRhaW5lciIpLHNpKHQsInBvbGl0ZSIpLG9pKHQsImFkZGl0aW9ucyB0ZXh0IikscmkodCwhMCksdGhpcy5lR3JpZERpdi5hcHBlbmRDaGlsZCh0KX1hbm5vdW5jZVZhbHVlKGUpe3RoaXMuZGVzY3JpcHRpb25Db250YWluZXImJih0aGlzLmRlc2NyaXB0aW9uQ29udGFpbmVyLnRleHRDb250ZW50PSIiLHNldFRpbWVvdXQoKCk9Pnt0aGlzLmRlc2NyaXB0aW9uQ29udGFpbmVyLnRleHRDb250ZW50PWV9LDUwKSl9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKTtjb25zdHtkZXNjcmlwdGlvbkNvbnRhaW5lcjplfT10aGlzO2UmJihtcyhlKSxlLnBhcmVudEVsZW1lbnQmJmUucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlKSksdGhpcy5kZXNjcmlwdGlvbkNvbnRhaW5lcj1udWxsLHRoaXMuZUdyaWREaXY9bnVsbH19O2Z1bmN0aW9uIFZ1KGUsdCxpKXtpZighdClyZXR1cm4gVSgiTm8gZ3JpZE9wdGlvbnMgcHJvdmlkZWQgdG8gY3JlYXRlR3JpZCIpLHt9O2NvbnN0IHM9Z3UuZ2V0Q29lcmNlZEdyaWRPcHRpb25zKHQpLHI9KG5ldyBXdSkuY3JlYXRlKGUscyx0PT57Y29uc3QgaT1uZXcgcWMoZSk7dC5jcmVhdGVCZWFuKGkpfSx2b2lkIDAsaSk7aWYoIU9iamVjdC5pc0Zyb3plbih0KSYmIShudWxsPT1pP3ZvaWQgMDppLmZyYW1ld29ya092ZXJyaWRlcykpe2NvbnN0IGU9Imh0dHBzOi8vYWctZ3JpZC5jb20vamF2YXNjcmlwdC1kYXRhLWdyaWQvZ3JpZC1pbnRlcmZhY2UvI2dyaWQtYXBpIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiYXBpIix7Z2V0OigpPT57VShgZ3JpZE9wdGlvbnMuYXBpIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFNlZSAke2V9LmApfSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiY29sdW1uQXBpIix7Z2V0OigpPT57VShgZ3JpZE9wdGlvbnMuY29sdW1uQXBpIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgYW5kIGFsbCBtZXRob2RzIG1vdmVkIHRvIHRoZSBncmlkIGFwaS4gU2VlICR7ZX0uYCl9LGNvbmZpZ3VyYWJsZTohMH0pfXJldHVybiByfWt1KFtjZSgiZUdyaWREaXYiKV0sX3UucHJvdG90eXBlLCJlR3JpZERpdiIsdm9pZCAwKSxrdShbYWVdLF91LnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCksX3U9a3UoW2RlKCJhcmlhQW5ub3VuY2VtZW50U2VydmljZSIpXSxfdSk7Y2xhc3MgQnV7Y29uc3RydWN0b3IoZSx0LGkpe2lmKGooIlNpbmNlIHYzMSBuZXcgR3JpZCguLi4pIGlzIGRlcHJlY2F0ZWQuIFVzZSBjcmVhdGVHcmlkIGluc3RlYWQ6IGBjb25zdCBncmlkQXBpID0gY3JlYXRlR3JpZCguLi4pYC4gVGhlIGdyaWQgYXBpIGlzIHJldHVybmVkIGZyb20gY3JlYXRlR3JpZCBhbmQgd2lsbCBub3QgYmUgYXZhaWxhYmxlIG9uIGdyaWRPcHRpb25zLiIpLCF0KXJldHVybiB2b2lkIFUoIk5vIGdyaWRPcHRpb25zIHByb3ZpZGVkIHRvIHRoZSBncmlkIik7dGhpcy5ncmlkT3B0aW9ucz10O2NvbnN0IHM9KG5ldyBXdSkuY3JlYXRlKGUsdCx0PT57Y29uc3QgaT1uZXcgcWMoZSk7dC5jcmVhdGVCZWFuKGkpLmFkZERlc3Ryb3lGdW5jKCgpPT57dGhpcy5kZXN0cm95KCl9KX0sdm9pZCAwLGkpO3RoaXMuZ3JpZE9wdGlvbnMuYXBpPXMsdGhpcy5ncmlkT3B0aW9ucy5jb2x1bW5BcGk9bmV3IE5jKHMpfWRlc3Ryb3koKXt2YXIgZTt0aGlzLmdyaWRPcHRpb25zJiYobnVsbD09PShlPXRoaXMuZ3JpZE9wdGlvbnMuYXBpKXx8dm9pZCAwPT09ZXx8ZS5kZXN0cm95KCksZGVsZXRlIHRoaXMuZ3JpZE9wdGlvbnMuYXBpLGRlbGV0ZSB0aGlzLmdyaWRPcHRpb25zLmNvbHVtbkFwaSl9fWxldCBIdT0xO2NsYXNzIFd1e2NyZWF0ZShlLHQsaSxzLHIpe3ZhciBvO2NvbnN0IG49ISF0LmRlYnVnLGE9bnVsbCE9PShvPXQuZ3JpZElkKSYmdm9pZCAwIT09bz9vOlN0cmluZyhIdSsrKSxsPXRoaXMuZ2V0UmVnaXN0ZXJlZE1vZHVsZXMocixhKSxkPXRoaXMuY3JlYXRlQmVhbnNMaXN0KHQucm93TW9kZWxUeXBlLGwsYSksYz10aGlzLmNyZWF0ZVByb3ZpZGVkQmVhbnMoZSx0LHIpO2lmKCFkKXJldHVybiB2b2lkIFUoIkZhaWxlZCB0byBjcmVhdGUgZ3JpZC4iKTtjb25zdCBoPXtwcm92aWRlZEJlYW5JbnN0YW5jZXM6YyxiZWFuQ2xhc3NlczpkLGRlYnVnOm4sZ3JpZElkOmF9LHU9bmV3IEtjKCJDb250ZXh0IiwoKT0+aC5kZWJ1ZykscD1uZXcgb2UoaCx1KSxnPXAuZ2V0QmVhbigiYmVhbnMiKTtyZXR1cm4gdGhpcy5yZWdpc3Rlck1vZHVsZVVzZXJDb21wb25lbnRzKGcsbCksdGhpcy5yZWdpc3RlclN0YWNrQ29tcG9uZW50cyhnLGwpLHRoaXMucmVnaXN0ZXJDb250cm9sbGVycyhnLGwpLGkocCksZy5zeW5jU2VydmljZS5zdGFydCgpLHMmJnMocCksZy5ncmlkQXBpfXJlZ2lzdGVyQ29udHJvbGxlcnMoZSx0KXt0LmZvckVhY2godD0+e3QuY29udHJvbGxlcnMmJnQuY29udHJvbGxlcnMuZm9yRWFjaCh0PT5lLmN0cmxzRmFjdG9yeS5yZWdpc3Rlcih0KSl9KX1yZWdpc3RlclN0YWNrQ29tcG9uZW50cyhlLHQpe2NvbnN0IGk9dGhpcy5jcmVhdGVBZ1N0YWNrQ29tcG9uZW50c0xpc3QodCk7ZS5hZ1N0YWNrQ29tcG9uZW50c1JlZ2lzdHJ5LnNldHVwQ29tcG9uZW50cyhpKX1nZXRSZWdpc3RlcmVkTW9kdWxlcyhlLHQpe2NvbnN0IGk9ZT9lLm1vZHVsZXM6bnVsbCxzPXJlLl9fZ2V0UmVnaXN0ZXJlZE1vZHVsZXModCkscj1bXSxvPXt9LG49KGUsdCxpKT0+e3ZhciBzO29bKHM9dCkubW9kdWxlTmFtZV18fChvW3MubW9kdWxlTmFtZV09ITAsci5wdXNoKHMpLHJlLl9fcmVnaXN0ZXIocyxlLGkpKSx0LmRlcGVuZGFudE1vZHVsZXMmJnQuZGVwZW5kYW50TW9kdWxlcy5mb3JFYWNoKHQ9Pm4oZSx0LGkpKX07cmV0dXJuIGkmJmkuZm9yRWFjaChlPT5uKCEwLGUsdCkpLHMmJnMuZm9yRWFjaChlPT5uKCFyZS5fX2lzUGFja2FnZUJhc2VkKCksZSx2b2lkIDApKSxyfXJlZ2lzdGVyTW9kdWxlVXNlckNvbXBvbmVudHMoZSx0KXt0aGlzLmV4dHJhY3RNb2R1bGVFbnRpdHkodCxlPT5lLnVzZXJDb21wb25lbnRzP2UudXNlckNvbXBvbmVudHM6W10pLmZvckVhY2godD0+e2UudXNlckNvbXBvbmVudFJlZ2lzdHJ5LnJlZ2lzdGVyRGVmYXVsdENvbXBvbmVudCh0LmNvbXBvbmVudE5hbWUsdC5jb21wb25lbnRDbGFzcyl9KX1jcmVhdGVQcm92aWRlZEJlYW5zKGUsdCxpKXtsZXQgcz1pP2kuZnJhbWV3b3JrT3ZlcnJpZGVzOm51bGw7RShzKSYmKHM9bmV3IFRjKTtjb25zdCByPXtncmlkT3B0aW9uczp0LGVHcmlkRGl2OmUsZ2xvYmFsRXZlbnRMaXN0ZW5lcjppP2kuZ2xvYmFsRXZlbnRMaXN0ZW5lcjpudWxsLGdsb2JhbFN5bmNFdmVudExpc3RlbmVyOmk/aS5nbG9iYWxTeW5jRXZlbnRMaXN0ZW5lcjpudWxsLGZyYW1ld29ya092ZXJyaWRlczpzfTtyZXR1cm4gaSYmaS5wcm92aWRlZEJlYW5JbnN0YW5jZXMmJk9iamVjdC5hc3NpZ24ocixpLnByb3ZpZGVkQmVhbkluc3RhbmNlcykscn1jcmVhdGVBZ1N0YWNrQ29tcG9uZW50c0xpc3QoZSl7bGV0IHQ9W3tjb21wb25lbnROYW1lOiJBZ0NoZWNrYm94Iixjb21wb25lbnRDbGFzczpOcn0se2NvbXBvbmVudE5hbWU6IkFnUmFkaW9CdXR0b24iLGNvbXBvbmVudENsYXNzOkdyfSx7Y29tcG9uZW50TmFtZToiQWdUb2dnbGVCdXR0b24iLGNvbXBvbmVudENsYXNzOnpkfSx7Y29tcG9uZW50TmFtZToiQWdJbnB1dFRleHRGaWVsZCIsY29tcG9uZW50Q2xhc3M6JHJ9LHtjb21wb25lbnROYW1lOiJBZ0lucHV0VGV4dEFyZWEiLGNvbXBvbmVudENsYXNzOktkfSx7Y29tcG9uZW50TmFtZToiQWdJbnB1dE51bWJlckZpZWxkIixjb21wb25lbnRDbGFzczpYcn0se2NvbXBvbmVudE5hbWU6IkFnSW5wdXREYXRlRmllbGQiLGNvbXBvbmVudENsYXNzOllkfSx7Y29tcG9uZW50TmFtZToiQWdJbnB1dFJhbmdlIixjb21wb25lbnRDbGFzczokZH0se2NvbXBvbmVudE5hbWU6IkFnUmljaFNlbGVjdCIsY29tcG9uZW50Q2xhc3M6ZWN9LHtjb21wb25lbnROYW1lOiJBZ1NlbGVjdCIsY29tcG9uZW50Q2xhc3M6THJ9LHtjb21wb25lbnROYW1lOiJBZ1NsaWRlciIsY29tcG9uZW50Q2xhc3M6aWN9LHtjb21wb25lbnROYW1lOiJBZ0dyaWRCb2R5Iixjb21wb25lbnRDbGFzczpRYX0se2NvbXBvbmVudE5hbWU6IkFnSGVhZGVyUm9vdCIsY29tcG9uZW50Q2xhc3M6c2R9LHtjb21wb25lbnROYW1lOiJBZ1NvcnRJbmRpY2F0b3IiLGNvbXBvbmVudENsYXNzOmNvfSx7Y29tcG9uZW50TmFtZToiQWdQYWdpbmF0aW9uIixjb21wb25lbnRDbGFzczpEaH0se2NvbXBvbmVudE5hbWU6IkFnUGFnZVNpemVTZWxlY3RvciIsY29tcG9uZW50Q2xhc3M6R3V9LHtjb21wb25lbnROYW1lOiJBZ092ZXJsYXlXcmFwcGVyIixjb21wb25lbnRDbGFzczpBaH0se2NvbXBvbmVudE5hbWU6IkFnR3JvdXBDb21wb25lbnQiLGNvbXBvbmVudENsYXNzOnJjfSx7Y29tcG9uZW50TmFtZToiQWdSb3dDb250YWluZXIiLGNvbXBvbmVudENsYXNzOmhsfSx7Y29tcG9uZW50TmFtZToiQWdGYWtlSG9yaXpvbnRhbFNjcm9sbCIsY29tcG9uZW50Q2xhc3M6dHV9LHtjb21wb25lbnROYW1lOiJBZ0Zha2VWZXJ0aWNhbFNjcm9sbCIsY29tcG9uZW50Q2xhc3M6Q3V9LHtjb21wb25lbnROYW1lOiJBZ0F1dG9jb21wbGV0ZSIsY29tcG9uZW50Q2xhc3M6UmN9XTtjb25zdCBpPXRoaXMuZXh0cmFjdE1vZHVsZUVudGl0eShlLGU9PmUuYWdTdGFja0NvbXBvbmVudHM/ZS5hZ1N0YWNrQ29tcG9uZW50czpbXSk7cmV0dXJuIHQ9dC5jb25jYXQoaSksdH1jcmVhdGVCZWFuc0xpc3QoZT0iY2xpZW50U2lkZSIsdCxpKXtjb25zdCBzPXQuZmlsdGVyKHQ9PiF0LnJvd01vZGVsfHx0LnJvd01vZGVsPT09ZSkscj17Y2xpZW50U2lkZTpzZS5DbGllbnRTaWRlUm93TW9kZWxNb2R1bGUsaW5maW5pdGU6c2UuSW5maW5pdGVSb3dNb2RlbE1vZHVsZSxzZXJ2ZXJTaWRlOnNlLlNlcnZlclNpZGVSb3dNb2RlbE1vZHVsZSx2aWV3cG9ydDpzZS5WaWV3cG9ydFJvd01vZGVsTW9kdWxlfTtpZighcltlXSlyZXR1cm4gdm9pZCBVKCJDb3VsZCBub3QgZmluZCByb3cgbW9kZWwgZm9yIHJvd01vZGVsVHlwZSA9ICIrZSk7aWYoIXJlLl9fYXNzZXJ0UmVnaXN0ZXJlZChyW2VdLGByb3dNb2RlbFR5cGUgPSAnJHtlfSdgLGkpKXJldHVybjtjb25zdCBvPVtDYSxNaCxGaCxCaCxsaCxVbixobixnaCxmaCxtZCxMbixFaCxvZCxmdSxMdSxGZCxHbixQdCx2ZSxndSx5YyxGYyxYbix4dCxKbCxXZCxPZCxCYyxvdCxXYyxNYyxvbCxjaCxrYyx6YyxPdCxSZCxhZCxHbyxOYyxpaCxzbCxTaCxPYyxNZCxVZCxlbCxKYyxyaCxuaCx4aCxodCx1aCx2ZCxfaCxVdCxXaCxVaCxCZCxLaCxYaCxzdSxvdSxaaCxidSxSdSxZbixUdSxPdSxQdSxTZCxJdSxfdSxiZF0sbj10aGlzLmV4dHJhY3RNb2R1bGVFbnRpdHkocyxlPT5lLmJlYW5zP2UuYmVhbnM6W10pO28ucHVzaCguLi5uKTtjb25zdCBhPVtdO3JldHVybiBvLmZvckVhY2goZT0+e2EuaW5kZXhPZihlKTwwJiZhLnB1c2goZSl9KSxhfWV4dHJhY3RNb2R1bGVFbnRpdHkoZSx0KXtyZXR1cm5bXS5jb25jYXQoLi4uZS5tYXAodCkpfX1jbGFzcyBqdXt3cmFwKGUsdCxpPVtdLHMpe2NvbnN0IHI9dGhpcy5jcmVhdGVXcmFwcGVyKGUscyk7cmV0dXJuIHQuZm9yRWFjaChlPT57dGhpcy5jcmVhdGVNZXRob2QocixlLCEwKX0pLGkuZm9yRWFjaChlPT57dGhpcy5jcmVhdGVNZXRob2QocixlLCExKX0pLHJ9dW53cmFwKGUpe3JldHVybiBlfWNyZWF0ZU1ldGhvZChlLHQsaSl7ZS5hZGRNZXRob2QodCx0aGlzLmNyZWF0ZU1ldGhvZFByb3h5KGUsdCxpKSl9Y3JlYXRlTWV0aG9kUHJveHkoZSx0LGkpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmhhc01ldGhvZCh0KT9lLmNhbGxNZXRob2QodCxhcmd1bWVudHMpOihpJiZjb25zb2xlLndhcm4oIkFHIEdyaWQ6IEZyYW1ld29yayBjb21wb25lbnQgaXMgbWlzc2luZyB0aGUgbWV0aG9kICIrdCsiKCkiKSxudWxsKX19fWNvbnN0IFV1PXtjb2x1bW5Hcm91cDpbImNvbHVtbiIsInN0YWNrZWRDb2x1bW4iLCJub3JtYWxpemVkQ29sdW1uIl0sYmFyR3JvdXA6WyJiYXIiLCJzdGFja2VkQmFyIiwibm9ybWFsaXplZEJhciJdLHBpZUdyb3VwOlsicGllIiwiZG9udXQiXSxsaW5lR3JvdXA6WyJsaW5lIl0sc2NhdHRlckdyb3VwOlsic2NhdHRlciIsImJ1YmJsZSJdLGFyZWFHcm91cDpbImFyZWEiLCJzdGFja2VkQXJlYSIsIm5vcm1hbGl6ZWRBcmVhIl0scG9sYXJHcm91cDpbInJhZGFyTGluZSIsInJhZGFyQXJlYSIsIm5pZ2h0aW5nYWxlIiwicmFkaWFsQ29sdW1uIiwicmFkaWFsQmFyIl0sc3RhdGlzdGljYWxHcm91cDpbImJveFBsb3QiLCJoaXN0b2dyYW0iLCJyYW5nZUJhciIsInJhbmdlQXJlYSJdLGhpZXJhcmNoaWNhbEdyb3VwOlsidHJlZW1hcCIsInN1bmJ1cnN0Il0sc3BlY2lhbGl6ZWRHcm91cDpbImhlYXRtYXAiLCJ3YXRlcmZhbGwiXSxjb21iaW5hdGlvbkdyb3VwOlsiY29sdW1uTGluZUNvbWJvIiwiYXJlYUNvbHVtbkNvbWJvIiwiY3VzdG9tQ29tYm8iXX0senU9WyJjaGFydFNldHRpbmdzIiwiY2hhcnREYXRhIiwiY2hhcnRGb3JtYXQiXSxLdT1bImNoYXJ0VW5saW5rIiwiY2hhcnRMaW5rIiwiY2hhcnREb3dubG9hZCJdLFl1PXtzZXR0aW5nczoiY2hhcnRTZXR0aW5ncyIsZGF0YToiY2hhcnREYXRhIixmb3JtYXQ6ImNoYXJ0Rm9ybWF0In07dmFyICR1OyFmdW5jdGlvbihlKXtlLkluc2lkZUJhc2U9Imluc2lkZUJhc2UiLGUuSW5zaWRlRW5kPSJpbnNpZGVFbmQiLGUuQ2VudGVyPSJjZW50ZXIiLGUuT3V0c2lkZUVuZD0ib3V0c2lkZUVuZCJ9KCR1fHwoJHU9e30pKSxpLmQodCwiQ29sdW1uRmFjdG9yeSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG90fSkpLGkuZCh0LCJDb2x1bW5Nb2RlbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHh0fSkpLGkuZCh0LCJDb2x1bW5LZXlDcmVhdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gTH0pKSxpLmQodCwiQ29sdW1uVXRpbHMiLChmdW5jdGlvbigpe3JldHVybiBPdH0pKSxpLmQodCwiRGlzcGxheWVkR3JvdXBDcmVhdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gUHR9KSksaS5kKHQsIkdyb3VwSW5zdGFuY2VJZENyZWF0b3IiLChmdW5jdGlvbigpe3JldHVybiBkdH0pKSxpLmQodCwiR1JPVVBfQVVUT19DT0xVTU5fSUQiLChmdW5jdGlvbigpe3JldHVybiJhZy1HcmlkLUF1dG9Db2x1bW4ifSkpLGkuZCh0LCJDb21wb25lbnRVdGlsIiwoZnVuY3Rpb24oKXtyZXR1cm4gSXR9KSksaS5kKHQsIkFnU3RhY2tDb21wb25lbnRzUmVnaXN0cnkiLChmdW5jdGlvbigpe3JldHVybiBVdH0pKSxpLmQodCwiVXNlckNvbXBvbmVudFJlZ2lzdHJ5IiwoZnVuY3Rpb24oKXtyZXR1cm4gaG59KSksaS5kKHQsIlVzZXJDb21wb25lbnRGYWN0b3J5IiwoZnVuY3Rpb24oKXtyZXR1cm4gTG59KSksaS5kKHQsIkNvbERlZlV0aWwiLChmdW5jdGlvbigpe3JldHVybiBGbn0pKSxpLmQodCwiQmVhblN0dWIiLChmdW5jdGlvbigpe3JldHVybiBpdH0pKSxpLmQodCwiQ29udGV4dCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG9lfSkpLGkuZCh0LCJBdXRvd2lyZWQiLChmdW5jdGlvbigpe3JldHVybiBjZX0pKSxpLmQodCwiUG9zdENvbnN0cnVjdCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGFlfSkpLGkuZCh0LCJQcmVDb25zdHJ1Y3QiLChmdW5jdGlvbigpe3JldHVybiBuZX0pKSxpLmQodCwiT3B0aW9uYWwiLChmdW5jdGlvbigpe3JldHVybiBoZX0pKSxpLmQodCwiQmVhbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIGRlfSkpLGkuZCh0LCJRdWFsaWZpZXIiLChmdW5jdGlvbigpe3JldHVybiBwZX0pKSxpLmQodCwiUHJlRGVzdHJveSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGxlfSkpLGkuZCh0LCJRdWVyeVNlbGVjdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gaHJ9KSksaS5kKHQsIlJlZlNlbGVjdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gdXJ9KSksaS5kKHQsIkV4Y2VsRmFjdG9yeU1vZGUiLChmdW5jdGlvbigpe3JldHVybiBJbn0pKSxpLmQodCwiRHJhZ0FuZERyb3BTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gR299KSksaS5kKHQsIkRyYWdTb3VyY2VUeXBlIiwoZnVuY3Rpb24oKXtyZXR1cm4gSW99KSksaS5kKHQsIkRyYWdTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gR259KSksaS5kKHQsIlZpcnR1YWxMaXN0RHJhZ0ZlYXR1cmUiLChmdW5jdGlvbigpe3JldHVybiBCbn0pKSxpLmQodCwiQ29sdW1uIiwoZnVuY3Rpb24oKXtyZXR1cm4gRWV9KSksaS5kKHQsIkNvbHVtbkdyb3VwIiwoZnVuY3Rpb24oKXtyZXR1cm4gYXR9KSksaS5kKHQsIlByb3ZpZGVkQ29sdW1uR3JvdXAiLChmdW5jdGlvbigpe3JldHVybiB4ZX0pKSxpLmQodCwiUm93Tm9kZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIE9vfSkpLGkuZCh0LCJSb3dIaWdobGlnaHRQb3NpdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIEhufSkpLGkuZCh0LCJGaWx0ZXJNYW5hZ2VyIiwoZnVuY3Rpb24oKXtyZXR1cm4gWG59KSksaS5kKHQsIlByb3ZpZGVkRmlsdGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUnJ9KSksaS5kKHQsIlNpbXBsZUZpbHRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIF9yfSkpLGkuZCh0LCJTY2FsYXJGaWx0ZXIiLChmdW5jdGlvbigpe3JldHVybiBWcn0pKSxpLmQodCwiTnVtYmVyRmlsdGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUXJ9KSksaS5kKHQsIlRleHRGaWx0ZXIiLChmdW5jdGlvbigpe3JldHVybiBlb30pKSxpLmQodCwiRGF0ZUZpbHRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFdyfSkpLGkuZCh0LCJUZXh0RmxvYXRpbmdGaWx0ZXIiLChmdW5jdGlvbigpe3JldHVybiBub30pKSxpLmQodCwiSGVhZGVyRmlsdGVyQ2VsbENvbXAiLChmdW5jdGlvbigpe3JldHVybiBRbn0pKSxpLmQodCwiRmxvYXRpbmdGaWx0ZXJNYXBwZXIiLChmdW5jdGlvbigpe3JldHVybiBQbn0pKSxpLmQodCwiR3JpZEJvZHlDb21wIiwoZnVuY3Rpb24oKXtyZXR1cm4gUWF9KSksaS5kKHQsIkdyaWRCb2R5Q3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGNhfSkpLGkuZCh0LCJSb3dBbmltYXRpb25Dc3NDbGFzc2VzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbGF9KSksaS5kKHQsIlNjcm9sbFZpc2libGVTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gZWx9KSksaS5kKHQsIk1vdXNlRXZlbnRTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gc2x9KSksaS5kKHQsIk5hdmlnYXRpb25TZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gb2x9KSksaS5kKHQsIlJvd0NvbnRhaW5lckNvbXAiLChmdW5jdGlvbigpe3JldHVybiBobH0pKSxpLmQodCwiUm93Q29udGFpbmVyTmFtZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGphfSkpLGkuZCh0LCJSb3dDb250YWluZXJDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gWGF9KSksaS5kKHQsIlJvd0NvbnRhaW5lclR5cGUiLChmdW5jdGlvbigpe3JldHVybiBVYX0pKSxpLmQodCwiZ2V0Um93Q29udGFpbmVyVHlwZUZvck5hbWUiLChmdW5jdGlvbigpe3JldHVybiBLYX0pKSxpLmQodCwiQm9keURyb3BQaXZvdFRhcmdldCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHBsfSkpLGkuZCh0LCJCb2R5RHJvcFRhcmdldCIsKGZ1bmN0aW9uKCl7cmV0dXJuIENsfSkpLGkuZCh0LCJDc3NDbGFzc0FwcGxpZXIiLChmdW5jdGlvbigpe3JldHVybiBFYX0pKSxpLmQodCwiSGVhZGVyUm93Q29udGFpbmVyQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHFsfSkpLGkuZCh0LCJHcmlkSGVhZGVyQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHNkfSkpLGkuZCh0LCJHcmlkSGVhZGVyQ3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHRkfSkpLGkuZCh0LCJIZWFkZXJSb3dDb21wIiwoZnVuY3Rpb24oKXtyZXR1cm4geGx9KSksaS5kKHQsIkhlYWRlclJvd1R5cGUiLChmdW5jdGlvbigpe3JldHVybiBFbH0pKSxpLmQodCwiSGVhZGVyUm93Q3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEtsfSkpLGkuZCh0LCJIZWFkZXJDZWxsQ3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIF9sfSkpLGkuZCh0LCJTb3J0SW5kaWNhdG9yQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGNvfSkpLGkuZCh0LCJIZWFkZXJGaWx0ZXJDZWxsQ3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEZsfSkpLGkuZCh0LCJIZWFkZXJHcm91cENlbGxDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gamx9KSksaS5kKHQsIkFic3RyYWN0SGVhZGVyQ2VsbEN0cmwiLChmdW5jdGlvbigpe3JldHVybiBPbH0pKSxpLmQodCwiSGVhZGVyUm93Q29udGFpbmVyQ3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuICRsfSkpLGkuZCh0LCJIb3Jpem9udGFsUmVzaXplU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG9kfSkpLGkuZCh0LCJNb3ZlQ29sdW1uRmVhdHVyZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZsfSkpLGkuZCh0LCJTdGFuZGFyZE1lbnVGYWN0b3J5IiwoZnVuY3Rpb24oKXtyZXR1cm4gYWR9KSksaS5kKHQsIlRhYmJlZExheW91dCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHBkfSkpLGkuZCh0LCJSZXNpemVPYnNlcnZlclNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBtZH0pKSxpLmQodCwiQW5pbWF0aW9uRnJhbWVTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gdmR9KSksaS5kKHQsIkV4cGFuc2lvblNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBTZH0pKSxpLmQodCwiTWVudVNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBiZH0pKSxpLmQodCwiTGFyZ2VUZXh0Q2VsbEVkaXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIHZvfSkpLGkuZCh0LCJQb3B1cEVkaXRvcldyYXBwZXIiLChmdW5jdGlvbigpe3JldHVybiBhbH0pKSxpLmQodCwiU2VsZWN0Q2VsbEVkaXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIHlvfSkpLGkuZCh0LCJUZXh0Q2VsbEVkaXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIEVvfSkpLGkuZCh0LCJOdW1iZXJDZWxsRWRpdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gUW99KSksaS5kKHQsIkRhdGVDZWxsRWRpdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gZW59KSksaS5kKHQsIkRhdGVTdHJpbmdDZWxsRWRpdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gcm59KSksaS5kKHQsIkNoZWNrYm94Q2VsbEVkaXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIGxufSkpLGkuZCh0LCJCZWFucyIsKGZ1bmN0aW9uKCl7cmV0dXJuIENhfSkpLGkuZCh0LCJBbmltYXRlU2hvd0NoYW5nZUNlbGxSZW5kZXJlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIHhvfSkpLGkuZCh0LCJBbmltYXRlU2xpZGVDZWxsUmVuZGVyZXIiLChmdW5jdGlvbigpe3JldHVybiBEb30pKSxpLmQodCwiR3JvdXBDZWxsUmVuZGVyZXIiLChmdW5jdGlvbigpe3JldHVybiB6b30pKSxpLmQodCwiR3JvdXBDZWxsUmVuZGVyZXJDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gam99KSksaS5kKHQsIlNldExlZnRGZWF0dXJlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUGx9KSksaS5kKHQsIlBvc2l0aW9uYWJsZUZlYXR1cmUiLChmdW5jdGlvbigpe3JldHVybiBicn0pKSxpLmQodCwiQXV0b1dpZHRoQ2FsY3VsYXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJkfSkpLGkuZCh0LCJDaGVja2JveFNlbGVjdGlvbkNvbXBvbmVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIExvfSkpLGkuZCh0LCJDZWxsQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGxsfSkpLGkuZCh0LCJDZWxsQ3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHhhfSkpLGkuZCh0LCJSb3dDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gT2F9KSksaS5kKHQsIlJvd1JlbmRlcmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gT2R9KSksaS5kKHQsIlZhbHVlRm9ybWF0dGVyU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIE1kfSkpLGkuZCh0LCJDc3NDbGFzc01hbmFnZXIiLChmdW5jdGlvbigpe3JldHVybiBhcn0pKSxpLmQodCwiQ2hlY2tib3hDZWxsUmVuZGVyZXIiLChmdW5jdGlvbigpe3JldHVybiBubn0pKSxpLmQodCwiUGlubmVkUm93TW9kZWwiLChmdW5jdGlvbigpe3JldHVybiBGZH0pKSxpLmQodCwiU2VydmVyU2lkZVRyYW5zYWN0aW9uUmVzdWx0U3RhdHVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gSWR9KSksaS5kKHQsIkNoYW5nZWRQYXRoIiwoZnVuY3Rpb24oKXtyZXR1cm4gTmR9KSksaS5kKHQsIlJvd05vZGVCbG9jayIsKGZ1bmN0aW9uKCl7cmV0dXJuIEdkfSkpLGkuZCh0LCJSb3dOb2RlQmxvY2tMb2FkZXIiLChmdW5jdGlvbigpe3JldHVybiBCZH0pKSxpLmQodCwiUGFnaW5hdGlvblByb3h5IiwoZnVuY3Rpb24oKXtyZXR1cm4gV2R9KSksaS5kKHQsIkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzIiwoZnVuY3Rpb24oKXtyZXR1cm4gQ2R9KSksaS5kKHQsIlN0eWxpbmdTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gVWR9KSksaS5kKHQsIkxheW91dENzc0NsYXNzZXMiLChmdW5jdGlvbigpe3JldHVybiBKbn0pKSxpLmQodCwiQWdBYnN0cmFjdEZpZWxkIiwoZnVuY3Rpb24oKXtyZXR1cm4gRHJ9KSksaS5kKHQsIkFnQ2hlY2tib3giLChmdW5jdGlvbigpe3JldHVybiBOcn0pKSxpLmQodCwiQWdSYWRpb0J1dHRvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIEdyfSkpLGkuZCh0LCJBZ1RvZ2dsZUJ1dHRvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIHpkfSkpLGkuZCh0LCJBZ0lucHV0VGV4dEZpZWxkIiwoZnVuY3Rpb24oKXtyZXR1cm4gJHJ9KSksaS5kKHQsIkFnSW5wdXRUZXh0QXJlYSIsKGZ1bmN0aW9uKCl7cmV0dXJuIEtkfSkpLGkuZCh0LCJBZ0lucHV0TnVtYmVyRmllbGQiLChmdW5jdGlvbigpe3JldHVybiBYcn0pKSxpLmQodCwiQWdJbnB1dERhdGVGaWVsZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFlkfSkpLGkuZCh0LCJBZ0lucHV0UmFuZ2UiLChmdW5jdGlvbigpe3JldHVybiAkZH0pKSxpLmQodCwiQWdSaWNoU2VsZWN0IiwoZnVuY3Rpb24oKXtyZXR1cm4gZWN9KSksaS5kKHQsIkFnU2VsZWN0IiwoZnVuY3Rpb24oKXtyZXR1cm4gTHJ9KSksaS5kKHQsIkFnU2xpZGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gaWN9KSksaS5kKHQsIkFnR3JvdXBDb21wb25lbnQiLChmdW5jdGlvbigpe3JldHVybiByY30pKSxpLmQodCwiQWdNZW51SXRlbVJlbmRlcmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gZG59KSksaS5kKHQsIkFnTWVudUl0ZW1Db21wb25lbnQiLChmdW5jdGlvbigpe3JldHVybiBjY30pKSxpLmQodCwiQWdNZW51TGlzdCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG5jfSkpLGkuZCh0LCJBZ01lbnVQYW5lbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGxjfSkpLGkuZCh0LCJBZ0RpYWxvZyIsKGZ1bmN0aW9uKCl7cmV0dXJuIGdjfSkpLGkuZCh0LCJBZ1BhbmVsIiwoZnVuY3Rpb24oKXtyZXR1cm4gdWN9KSksaS5kKHQsIkNvbXBvbmVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGNyfSkpLGkuZCh0LCJNYW5hZ2VkRm9jdXNGZWF0dXJlIiwoZnVuY3Rpb24oKXtyZXR1cm4gU3J9KSksaS5kKHQsIlRhYkd1YXJkQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGhkfSkpLGkuZCh0LCJUYWJHdWFyZEN0cmwiLChmdW5jdGlvbigpe3JldHVybiBjZH0pKSxpLmQodCwiVGFiR3VhcmRDbGFzc05hbWVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbGR9KSksaS5kKHQsIlBvcHVwQ29tcG9uZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gbW99KSksaS5kKHQsIlBvcHVwU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHljfSkpLGkuZCh0LCJUb3VjaExpc3RlbmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gYW99KSksaS5kKHQsIlZpcnR1YWxMaXN0IiwoZnVuY3Rpb24oKXtyZXR1cm4gUWR9KSksaS5kKHQsIkFnQWJzdHJhY3RMYWJlbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFRyfSkpLGkuZCh0LCJBZ1BpY2tlckZpZWxkIiwoZnVuY3Rpb24oKXtyZXR1cm4gQXJ9KSksaS5kKHQsIkFnQXV0b2NvbXBsZXRlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUmN9KSksaS5kKHQsIkNlbGxSYW5nZVR5cGUiLChmdW5jdGlvbigpe3JldHVybiB1YX0pKSxpLmQodCwiU2VsZWN0aW9uSGFuZGxlVHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGhhfSkpLGkuZCh0LCJBdXRvU2Nyb2xsU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGtufSkpLGkuZCh0LCJWYW5pbGxhRnJhbWV3b3JrT3ZlcnJpZGVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gVGN9KSksaS5kKHQsIkNlbGxOYXZpZ2F0aW9uU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIE9jfSkpLGkuZCh0LCJBbGlnbmVkR3JpZHNTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gTWN9KSksaS5kKHQsIktleUNvZGUiLChmdW5jdGlvbigpe3JldHVybiBqc30pKSxpLmQodCwiVmVydGljYWxEaXJlY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBBb30pKSxpLmQodCwiSG9yaXpvbnRhbERpcmVjdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIFBvfSkpLGkuZCh0LCJHcmlkIiwoZnVuY3Rpb24oKXtyZXR1cm4gQnV9KSksaS5kKHQsIkdyaWRDb3JlQ3JlYXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFd1fSkpLGkuZCh0LCJjcmVhdGVHcmlkIiwoZnVuY3Rpb24oKXtyZXR1cm4gVnV9KSksaS5kKHQsIkdyaWRBcGkiLChmdW5jdGlvbigpe3JldHVybiBVbn0pKSxpLmQodCwiRXZlbnRzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbHR9KSksaS5kKHQsIkZvY3VzU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGlofSkpLGkuZCh0LCJHcmlkT3B0aW9uc1NlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBndX0pKSxpLmQodCwiRXZlbnRTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gdmV9KSksaS5kKHQsIlNlbGVjdGFibGVTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4geGh9KSksaS5kKHQsIlJvd05vZGVTb3J0ZXIiLChmdW5jdGlvbigpe3JldHVybiBLaH0pKSxpLmQodCwiQ3RybHNTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gWGh9KSksaS5kKHQsIkdyaWRDb21wIiwoZnVuY3Rpb24oKXtyZXR1cm4gcWN9KSksaS5kKHQsIkdyaWRDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gJGN9KSksaS5kKHQsIkxvZ2dlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIEtjfSkpLGkuZCh0LCJMb2dnZXJGYWN0b3J5IiwoZnVuY3Rpb24oKXtyZXR1cm4gemN9KSksaS5kKHQsIlNvcnRDb250cm9sbGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gSmN9KSksaS5kKHQsIlRlbXBsYXRlU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFdjfSkpLGkuZCh0LCJMb2NhbGVTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gZnV9KSksaS5kKHQsIl8iLChmdW5jdGlvbigpe3JldHVybiBRc30pKSxpLmQodCwiTnVtYmVyU2VxdWVuY2UiLChmdW5jdGlvbigpe3JldHVybiBKc30pKSxpLmQodCwiQWdQcm9taXNlU3RhdHVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gZXJ9KSksaS5kKHQsIkFnUHJvbWlzZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHRyfSkpLGkuZCh0LCJUaW1lciIsKGZ1bmN0aW9uKCl7cmV0dXJuIGlyfSkpLGkuZCh0LCJWYWx1ZVNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBrY30pKSxpLmQodCwiVmFsdWVDYWNoZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGNofSkpLGkuZCh0LCJFeHByZXNzaW9uU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIEJjfSkpLGkuZCh0LCJWYWx1ZVBhcnNlclNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBSdX0pKSxpLmQodCwiQ2VsbFBvc2l0aW9uVXRpbHMiLChmdW5jdGlvbigpe3JldHVybiBGaH0pKSxpLmQodCwiUm93UG9zaXRpb25VdGlscyIsKGZ1bmN0aW9uKCl7cmV0dXJuIE1ofSkpLGkuZCh0LCJIZWFkZXJQb3NpdGlvblV0aWxzIiwoZnVuY3Rpb24oKXtyZXR1cm4gQmh9KSksaS5kKHQsIkhlYWRlck5hdmlnYXRpb25TZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gSmx9KSksaS5kKHQsIkhlYWRlck5hdmlnYXRpb25EaXJlY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBabH0pKSxpLmQodCwiRGF0YVR5cGVTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gYnV9KSksaS5kKHQsIlByb3BlcnR5S2V5cyIsKGZ1bmN0aW9uKCl7cmV0dXJuIEx0fSkpLGkuZCh0LCJDb2x1bW5BcGkiLChmdW5jdGlvbigpe3JldHVybiBOY30pKSxpLmQodCwiQmFzZUNvbXBvbmVudFdyYXBwZXIiLChmdW5jdGlvbigpe3JldHVybiBqdX0pKSxpLmQodCwiRW52aXJvbm1lbnQiLChmdW5jdGlvbigpe3JldHVybiBTaH0pKSxpLmQodCwiVG9vbHRpcEZlYXR1cmUiLChmdW5jdGlvbigpe3JldHVybiBmYX0pKSxpLmQodCwiQ3VzdG9tVG9vbHRpcEZlYXR1cmUiLChmdW5jdGlvbigpe3JldHVybiBucn0pKSxpLmQodCwiREVGQVVMVF9DSEFSVF9HUk9VUFMiLChmdW5jdGlvbigpe3JldHVybiBVdX0pKSxpLmQodCwiQ0hBUlRfVE9PTF9QQU5FTF9BTExPV19MSVNUIiwoZnVuY3Rpb24oKXtyZXR1cm4genV9KSksaS5kKHQsIkNIQVJUX1RPT0xCQVJfQUxMT1dfTElTVCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEt1fSkpLGkuZCh0LCJDSEFSVF9UT09MX1BBTkVMX01FTlVfT1BUSU9OUyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFl1fSkpLGkuZCh0LCJfX0ZPUkNFX01PRFVMRV9ERVRFQ1RJT04iLChmdW5jdGlvbigpe3JldHVybiAwfSkpLGkuZCh0LCJCYXJDb2x1bW5MYWJlbFBsYWNlbWVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuICR1fSkpLGkuZCh0LCJNb2R1bGVOYW1lcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIHNlfSkpLGkuZCh0LCJNb2R1bGVSZWdpc3RyeSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJlfSkpO2NvbnN0IFh1PSJ1bmRlZmluZWQiPT10eXBlb2YgZ2xvYmFsP3t9Omdsb2JhbDtYdS5IVE1MRWxlbWVudD0idW5kZWZpbmVkIj09dHlwZW9mIEhUTUxFbGVtZW50P3t9OkhUTUxFbGVtZW50LFh1LkhUTUxCdXR0b25FbGVtZW50PSJ1bmRlZmluZWQiPT10eXBlb2YgSFRNTEJ1dHRvbkVsZW1lbnQ/e306SFRNTEJ1dHRvbkVsZW1lbnQsWHUuSFRNTFNlbGVjdEVsZW1lbnQ9InVuZGVmaW5lZCI9PXR5cGVvZiBIVE1MU2VsZWN0RWxlbWVudD97fTpIVE1MU2VsZWN0RWxlbWVudCxYdS5IVE1MSW5wdXRFbGVtZW50PSJ1bmRlZmluZWQiPT10eXBlb2YgSFRNTElucHV0RWxlbWVudD97fTpIVE1MSW5wdXRFbGVtZW50LFh1Lk5vZGU9InVuZGVmaW5lZCI9PXR5cGVvZiBOb2RlP3t9Ok5vZGUsWHUuTW91c2VFdmVudD0idW5kZWZpbmVkIj09dHlwZW9mIE1vdXNlRXZlbnQ/e306TW91c2VFdmVudH0sZnVuY3Rpb24oZSx0LGkpeyJ1c2Ugc3RyaWN0IjtpLmQodCwiYSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFpwfSkpLGkuZCh0LCJiIiwoZnVuY3Rpb24oKXtyZXR1cm4gcXB9KSksaS5kKHQsImMiLChmdW5jdGlvbigpe3JldHVybiBSfSkpLGkuZCh0LCJkIiwoZnVuY3Rpb24oKXtyZXR1cm4geH0pKSxpLmQodCwiZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIEFkfSkpLGkuZCh0LCJmIiwoZnVuY3Rpb24oKXtyZXR1cm4gZWd9KSksaS5kKHQsImciLChmdW5jdGlvbigpe3JldHVybiBwZ30pKSxpLmQodCwiaCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGhnfSkpLGkuZCh0LCJpIiwoZnVuY3Rpb24oKXtyZXR1cm4gdGd9KSksaS5kKHQsImoiLChmdW5jdGlvbigpe3JldHVybiBkZ30pKSxpLmQodCwiayIsKGZ1bmN0aW9uKCl7cmV0dXJuIHVnfSkpLGkuZCh0LCJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gVH0pKSxpLmQodCwibSIsKGZ1bmN0aW9uKCl7cmV0dXJuIER9KSk7dmFyIHM9T2JqZWN0LmRlZmluZVByb3BlcnR5LHI9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMsbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLG49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsYT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLGw9T2JqZWN0LmdldFByb3RvdHlwZU9mLGQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxjPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsaD1SZWZsZWN0LmdldCx1PShlLHQpPT4odD1TeW1ib2xbZV0pP3Q6U3ltYm9sLmZvcigiU3ltYm9sLiIrZSkscD1NYXRoLnBvdyxnPShlLHQsaSk9PnQgaW4gZT9zKGUsdCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6aX0pOmVbdF09aSxtPShlLHQpPT57Zm9yKHZhciBpIGluIHR8fCh0PXt9KSlkLmNhbGwodCxpKSYmZyhlLGksdFtpXSk7aWYoYSlmb3IodmFyIGkgb2YgYSh0KSljLmNhbGwodCxpKSYmZyhlLGksdFtpXSk7cmV0dXJuIGV9LGY9KGUsdCk9PnIoZSxuKHQpKSx2PShlLHQpPT57dmFyIGk9e307Zm9yKHZhciBzIGluIGUpZC5jYWxsKGUscykmJnQuaW5kZXhPZihzKTwwJiYoaVtzXT1lW3NdKTtpZihudWxsIT1lJiZhKWZvcih2YXIgcyBvZiBhKGUpKXQuaW5kZXhPZihzKTwwJiZjLmNhbGwoZSxzKSYmKGlbc109ZVtzXSk7cmV0dXJuIGl9LEM9KGUsdCk9Pntmb3IodmFyIGkgaW4gdClzKGUsaSx7Z2V0OnRbaV0sZW51bWVyYWJsZTohMH0pfSx5PShlLHQsaSxyKT0+e2Zvcih2YXIgbixhPXI+MT92b2lkIDA6cj9vKHQsaSk6dCxsPWUubGVuZ3RoLTE7bD49MDtsLS0pKG49ZVtsXSkmJihhPShyP24odCxpLGEpOm4oYSkpfHxhKTtyZXR1cm4gciYmYSYmcyh0LGksYSksYX0sUz0oZSx0LGkpPT5oKGwoZSksaSx0KSx3PShlLHQsaSk9Pm5ldyBQcm9taXNlKChzLHIpPT57dmFyIG89ZT0+e3RyeXthKGkubmV4dChlKSl9Y2F0Y2goZSl7cihlKX19LG49ZT0+e3RyeXthKGkudGhyb3coZSkpfWNhdGNoKGUpe3IoZSl9fSxhPWU9PmUuZG9uZT9zKGUudmFsdWUpOlByb21pc2UucmVzb2x2ZShlLnZhbHVlKS50aGVuKG8sbik7YSgoaT1pLmFwcGx5KGUsdCkpLm5leHQoKSl9KSxiPWZ1bmN0aW9uKGUsdCl7dGhpc1swXT1lLHRoaXNbMV09dH0sRT1lPT57dmFyIHQsaT1lW3UoImFzeW5jSXRlcmF0b3IiKV0scz0hMSxyPXt9O3JldHVybiBudWxsPT1pPyhpPWVbdSgiaXRlcmF0b3IiKV0oKSx0PWU9PnJbZV09dD0+aVtlXSh0KSk6KGk9aS5jYWxsKGUpLHQ9ZT0+cltlXT10PT57aWYocyl7aWYocz0hMSwidGhyb3ciPT09ZSl0aHJvdyB0O3JldHVybiB0fXJldHVybiBzPSEwLHtkb25lOiExLHZhbHVlOm5ldyBiKG5ldyBQcm9taXNlKHM9Pnt2YXIgcj1pW2VdKHQpO2lmKCEociBpbnN0YW5jZW9mIE9iamVjdCkpdGhyb3cgVHlwZUVycm9yKCJPYmplY3QgZXhwZWN0ZWQiKTtzKHIpfSksMSl9fSksclt1KCJpdGVyYXRvciIpXT0oKT0+cix0KCJuZXh0IiksInRocm93ImluIGk/dCgidGhyb3ciKTpyLnRocm93PWU9Pnt0aHJvdyBlfSwicmV0dXJuImluIGkmJnQoInJldHVybiIpLHJ9LFI9WyJiYXIiLCJsaW5lIiwic2NhdHRlciJdLHg9KGU9PihlLlBPSU5URVI9InBvaW50ZXIiLGUuTk9ERT0ibm9kZSIsZSkpKHh8fHt9KSxUPTAsRD17fTtDKEQse2RheTooKT0+SyxmcmlkYXk6KCk9PmVlLGhvdXI6KCk9PlUsbWlsbGlzZWNvbmQ6KCk9Pk4sbWludXRlOigpPT5ILG1vbmRheTooKT0+cSxtb250aDooKT0+c2Usc2F0dXJkYXk6KCk9PnRlLHNlY29uZDooKT0+XyxzdW5kYXk6KCk9PlgsdGh1cnNkYXk6KCk9PkosdHVlc2RheTooKT0+Wix1dGNEYXk6KCk9PmRlLHV0Y0hvdXI6KCk9PmxlLHV0Y01pbnV0ZTooKT0+YWUsdXRjTW9udGg6KCk9PmNlLHV0Y1llYXI6KCk9PmhlLHdlZG5lc2RheTooKT0+USx5ZWFyOigpPT5vZX0pO3ZhciBPPW5ldyBNYXA7ZnVuY3Rpb24gQShlLHQpe08uaGFzKHQpfHwoTy5zZXQodCwhMCksZSgpKX1mdW5jdGlvbiBQKGUpe3JldHVybiBlfWZ1bmN0aW9uIE0oZSx0PTAsaSl7Y29uc3R7bGVhZGluZzpzPSEwLHRyYWlsaW5nOnI9ITB9PW51bGwhPWk/aTp7fTtsZXQgbyxuLGE9ITE7ZnVuY3Rpb24gbCgpe3ImJm4/KG89c2V0VGltZW91dChsLHQpLGUoLi4ubikpOmE9ITEsbj1udWxsfXJldHVybiBPYmplY3QuYXNzaWduKChmdW5jdGlvbiguLi5pKXthP249aTooYT0hMCxvPXNldFRpbWVvdXQobCx0KSxzP2UoLi4uaSk6bj1pKX0pLHtjYW5jZWwoKXtjbGVhclRpbWVvdXQobyksYT0hMSxuPW51bGx9fSl9QS5jbGVhcj0oKT0+Ty5jbGVhcigpO3ZhciBMPXtsb2coLi4uZSl7Y29uc29sZS5sb2coLi4uZSl9LHdhcm4oZSwuLi50KXtjb25zb2xlLndhcm4oIkFHIENoYXJ0cyAtICIrZSwuLi50KX0sZXJyb3IoZSwuLi50KXsib2JqZWN0Ij09dHlwZW9mIGU/Y29uc29sZS5lcnJvcigiQUcgQ2hhcnRzIGVycm9yIixlLC4uLnQpOmNvbnNvbGUuZXJyb3IoIkFHIENoYXJ0cyAtICIrZSwuLi50KX0sdGFibGUoLi4uZSl7Y29uc29sZS50YWJsZSguLi5lKX0sd2Fybk9uY2UoZSwuLi50KXtBKCgpPT5MLndhcm4oZSwuLi50KSwiTG9nZ2VyLndhcm46ICIrZSl9LGVycm9yT25jZShlLC4uLnQpe0EoKCk9PkwuZXJyb3IoZSwuLi50KSwiTG9nZ2VyLmVycm9yOiAiK2UpfX0sRj1jbGFzc3tjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5fZW5jb2RlPWUsdGhpcy5fZGVjb2RlPXQsdGhpcy5fcmFuZ2VDYWxsYmFjaz1pfWZsb29yKGUpe2NvbnN0IHQ9bmV3IERhdGUoZSksaT10aGlzLl9lbmNvZGUodCk7cmV0dXJuIHRoaXMuX2RlY29kZShpKX1jZWlsKGUpe2NvbnN0IHQ9bmV3IERhdGUoTnVtYmVyKGUpLTEpLGk9dGhpcy5fZW5jb2RlKHQpO3JldHVybiB0aGlzLl9kZWNvZGUoaSsxKX1yYW5nZShlLHQsaSl7dmFyIHM7Y29uc3Qgcj1udWxsPT0ocz10aGlzLl9yYW5nZUNhbGxiYWNrKT92b2lkIDA6cy5jYWxsKHRoaXMsZSx0KSxvPXRoaXMuX2VuY29kZShpP3RoaXMuZmxvb3IoZSk6dGhpcy5jZWlsKGUpKSxuPXRoaXMuX2VuY29kZShpP3RoaXMuY2VpbCh0KTp0aGlzLmZsb29yKHQpKTtpZihuPG8pcmV0dXJuW107Y29uc3QgYT1bXTtmb3IobGV0IGU9bztlPD1uO2UrKyl7Y29uc3QgdD10aGlzLl9kZWNvZGUoZSk7YS5wdXNoKHQpfXJldHVybiBudWxsPT1yfHxyKCksYX19LEk9Y2xhc3MgZXh0ZW5kcyBGe2dldE9mZnNldChlLHQpe2NvbnN0IGk9Im51bWJlciI9PXR5cGVvZiBlfHxlIGluc3RhbmNlb2YgRGF0ZT90aGlzLl9lbmNvZGUobmV3IERhdGUoZSkpOjA7cmV0dXJuIE1hdGguZmxvb3IoaSkldH1ldmVyeShlLHQpe2xldCBpLHM9MDtjb25zdCByPWU7ciE9PShlPU1hdGgubWF4KDEsTWF0aC5yb3VuZChlKSkpJiZMLndhcm5PbmNlKGBpbnRlcnZhbCBzdGVwIG9mIFske3J9XSByb3VuZGVkIHRvIFske2V9XS5gKTtjb25zdHtzbmFwVG86bz0ic3RhcnQifT1udWxsIT10P3Q6e307aWYoInN0cmluZyI9PXR5cGVvZiBvKXtjb25zdCB0PXM7aT0oaSxyKT0+e2NvbnN0IG49InN0YXJ0Ij09PW8/aTpyO3JldHVybiBzPXRoaXMuZ2V0T2Zmc2V0KG4sZSksKCk9PnM9dH19ZWxzZSJudW1iZXIiPT10eXBlb2Ygbz9zPXRoaXMuZ2V0T2Zmc2V0KG5ldyBEYXRlKG8pLGUpOm8gaW5zdGFuY2VvZiBEYXRlJiYocz10aGlzLmdldE9mZnNldChvLGUpKTtyZXR1cm4gbmV3IEYodD0+e2NvbnN0IGk9dGhpcy5fZW5jb2RlKHQpO3JldHVybiBNYXRoLmZsb29yKChpLXMpL2UpfSx0PT50aGlzLl9kZWNvZGUodCplK3MpLGkpfX07dmFyIE49bmV3IEkoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldFRpbWUoKX0pLChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IERhdGUoZSl9KSksRz1OLGs9KG5ldyBEYXRlKDApLmdldEZ1bGxZZWFyKCksNmU0KihuZXcgRGF0ZSkuZ2V0VGltZXpvbmVPZmZzZXQoKSk7dmFyIF89bmV3IEkoKGZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLmZsb29yKChlLmdldFRpbWUoKS1rKS8xZTMpfSksKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRGF0ZShrKzFlMyplKX0pKSxWPV8sQj02ZTQqKG5ldyBEYXRlKS5nZXRUaW1lem9uZU9mZnNldCgpO3ZhciBIPW5ldyBJKChmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5mbG9vcigoZS5nZXRUaW1lKCktQikvNmU0KX0pLChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IERhdGUoQis2ZTQqZSl9KSksVz1ILGo9NmU0KihuZXcgRGF0ZSkuZ2V0VGltZXpvbmVPZmZzZXQoKTt2YXIgVT1uZXcgSSgoZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGguZmxvb3IoKGUuZ2V0VGltZSgpLWopLzM2ZTUpfSksKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRGF0ZShqKzM2ZTUqZSl9KSksej1VO3ZhciBLPW5ldyBJKChmdW5jdGlvbihlKXtjb25zdCB0PTZlNCplLmdldFRpbWV6b25lT2Zmc2V0KCk7cmV0dXJuIE1hdGguZmxvb3IoKGUuZ2V0VGltZSgpLXQpLzg2NGU1KX0pLChmdW5jdGlvbihlKXtjb25zdCB0PW5ldyBEYXRlKDE5NzAsMCwxKTtyZXR1cm4gdC5zZXREYXRlKHQuZ2V0RGF0ZSgpK2UpLHR9KSksWT1LO2Z1bmN0aW9uICQoZSl7Y29uc3QgdD0oNytlLTQpJTc7cmV0dXJuIG5ldyBJKChmdW5jdGlvbihlKXtjb25zdCBpPTZlNCplLmdldFRpbWV6b25lT2Zmc2V0KCk7cmV0dXJuIE1hdGguZmxvb3IoKGUuZ2V0VGltZSgpLWkpLzYwNDhlNS10LzcpfSksKGZ1bmN0aW9uKGUpe2NvbnN0IGk9bmV3IERhdGUoMTk3MCwwLDEpO3JldHVybiBpLnNldERhdGUoaS5nZXREYXRlKCkrNyplK3QpLGl9KSl9dmFyIFg9JCgwKSxxPSQoMSksWj0kKDIpLFE9JCgzKSxKPSQoNCksZWU9JCg1KSx0ZT0kKDYpLGllPVg7dmFyIHNlPW5ldyBJKChmdW5jdGlvbihlKXtyZXR1cm4gMTIqZS5nZXRGdWxsWWVhcigpK2UuZ2V0TW9udGgoKX0pLChmdW5jdGlvbihlKXtjb25zdCB0PU1hdGguZmxvb3IoZS8xMik7cmV0dXJuIG5ldyBEYXRlKHQsZS0xMip0LDEpfSkpLHJlPXNlO3ZhciBvZT1uZXcgSSgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0RnVsbFllYXIoKX0pLChmdW5jdGlvbihlKXtjb25zdCB0PW5ldyBEYXRlO3JldHVybiB0LnNldEZ1bGxZZWFyKGUpLHQuc2V0TW9udGgoMCwxKSx0LnNldEhvdXJzKDAsMCwwLDApLHR9KSksbmU9b2U7dmFyIGFlPW5ldyBJKChmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5mbG9vcihlLmdldFRpbWUoKS82ZTQpfSksKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRGF0ZSg2ZTQqZSl9KSk7dmFyIGxlPW5ldyBJKChmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5mbG9vcihlLmdldFRpbWUoKS8zNmU1KX0pLChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IERhdGUoMzZlNSplKX0pKTt2YXIgZGU9bmV3IEkoKGZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLmZsb29yKGUuZ2V0VGltZSgpLzg2NGU1KX0pLChmdW5jdGlvbihlKXtjb25zdCB0PW5ldyBEYXRlKDApO3JldHVybiB0LnNldFVUQ0RhdGUodC5nZXRVVENEYXRlKCkrZSksdC5zZXRVVENIb3VycygwLDAsMCwwKSx0fSkpO3ZhciBjZT1uZXcgSSgoZnVuY3Rpb24oZSl7cmV0dXJuIDEyKmUuZ2V0VVRDRnVsbFllYXIoKStlLmdldFVUQ01vbnRoKCl9KSwoZnVuY3Rpb24oZSl7Y29uc3QgdD1NYXRoLmZsb29yKGUvMTIpLGk9ZS0xMip0O3JldHVybiBuZXcgRGF0ZShEYXRlLlVUQyh0LGksMSkpfSkpO3ZhciBoZT1uZXcgSSgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0VVRDRnVsbFllYXIoKX0pLChmdW5jdGlvbihlKXtjb25zdCB0PW5ldyBEYXRlO3JldHVybiB0LnNldFVUQ0Z1bGxZZWFyKGUpLHQuc2V0VVRDTW9udGgoMCwxKSx0LnNldFVUQ0hvdXJzKDAsMCwwLDApLHR9KSksdWU9e2lzRW50ZXJwcmlzZTohMX0scGU9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmRlc3Ryb3lGbnM9W119ZGVzdHJveSgpe2Zvcihjb25zdCBlIG9mIHRoaXMuZGVzdHJveUZucyllKCl9fSxnZT1bXTtmdW5jdGlvbiBtZShlKXtjb25zdCB0PWdlLmZpbmQodD0+ZS50eXBlPT09dC50eXBlJiZlLm9wdGlvbnNLZXk9PT10Lm9wdGlvbnNLZXkmJmUuaWRlbnRpZmllcj09PXQuaWRlbnRpZmllcik7aWYodCl7aWYoImVudGVycHJpc2UiPT09ZS5wYWNrYWdlVHlwZSYmImNvbW11bml0eSI9PT10LnBhY2thZ2VUeXBlKXtjb25zdCBpPWdlLmluZGV4T2YodCk7Z2Uuc3BsaWNlKGksMSxlKX19ZWxzZSBnZS5wdXNoKGUpfWZ1bmN0aW9uIGZlKCl7cmV0dXJuIGdlLnNvbWUoZT0+ImVudGVycHJpc2UiPT09ZS5wYWNrYWdlVHlwZSl9dmFyIHZlPXt9O2Z1bmN0aW9uIENlKGUsdCl7dmVbZV09dH1mdW5jdGlvbiB5ZShlLHQpe2NvbnN0IGk9dmVbZV07aWYoaSlyZXR1cm4gbmV3IGkodCk7dGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSB1bmtub3duIGF4aXMgdHlwZTogIitlKX12YXIgU2U9e2hhczplPT5PYmplY3QuaGFzT3duKHZlLGUpLGdldCBheGVzVHlwZXMoKXtyZXR1cm4gT2JqZWN0LmtleXModmUpfX0sd2U9e307ZnVuY3Rpb24gYmUoZSx0KXt3ZVtlXT10fWZ1bmN0aW9uIEVlKGUpe3ZhciB0O3JldHVybiBudWxsIT0odD13ZVtlXSk/dDp7fX12YXIgUmU9U3ltYm9sKCJCUkVBSyIpLHhlPSJfX2RlY29yYXRvcl9jb25maWciO2Z1bmN0aW9uIFRlKGUsdCl7bnVsbD09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHhlKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUseGUse3ZhbHVlOnt9fSk7Y29uc3QgaT1lW3hlXSxzPXQudG9TdHJpbmcoKTtpZih2b2lkIDAhPT1pW3NdKXJldHVybiBpW3NdO2NvbnN0IHI9bmV3IFdlYWtNYXA7aVtzXT17c2V0dGVyczpbXSxnZXR0ZXJzOltdLG9ic2VydmVyczpbXSx2YWx1ZXNNYXA6cn07Y29uc3Qgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCksbj1udWxsPT1vP3ZvaWQgMDpvLnNldCxhPW51bGw9PW8/dm9pZCAwOm8uZ2V0O3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtzZXQ6ZnVuY3Rpb24oZSl7Y29uc3R7c2V0dGVyczpvLG9ic2VydmVyczpsfT1pW3NdO2xldCBkO28uc29tZShlPT5lLmxlbmd0aD4yKSYmKGQ9YT9hLmNhbGwodGhpcyk6ci5nZXQodGhpcykpO2Zvcihjb25zdCBpIG9mIG8paWYoKGU9aSh0aGlzLHQsZSxkKSk9PT1SZSlyZXR1cm47bj9uLmNhbGwodGhpcyxlKTpyLnNldCh0aGlzLGUpO2Zvcihjb25zdCB0IG9mIGwpdCh0aGlzLGUsZCl9LGdldDpmdW5jdGlvbigpe2xldCBlPWE/YS5jYWxsKHRoaXMpOnIuZ2V0KHRoaXMpO2Zvcihjb25zdCByIG9mIGlbc10uZ2V0dGVycylpZihlPXIodGhpcyx0LGUpLGU9PT1SZSlyZXR1cm47cmV0dXJuIGV9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiExfSksaVtzXX1mdW5jdGlvbiBEZShlLHQsaSl7cmV0dXJuKHMscik9Pntjb25zdCBvPVRlKHMscik7by5zZXR0ZXJzLnB1c2goZSksdCYmby5nZXR0ZXJzLnVuc2hpZnQodCksaSYmT2JqZWN0LmFzc2lnbihvLGkpfX1mdW5jdGlvbiBPZShlKXtyZXR1cm4gdm9pZCAwIT09ZSYmeGUgaW4gZX1mdW5jdGlvbiBBZShlKXtjb25zdCB0PW5ldyBTZXQ7Zm9yKDtPZShlKTspdC5hZGQobnVsbD09ZT92b2lkIDA6ZVt4ZV0pLGU9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBBcnJheS5mcm9tKHQpLmZsYXRNYXAoZT0+T2JqZWN0LmtleXMoZSkpfWZ1bmN0aW9uIFBlKGUpe3JldHVybiBBZShlKS5yZWR1Y2UoKHQsaSk9Pnt2YXIgcztyZXR1cm4gdFtpXT1udWxsIT0ocz1lW2ldKT9zOm51bGwsdH0se30pfWZ1bmN0aW9uIE1lKGUpe3JldHVybiBudWxsIT1lfWZ1bmN0aW9uIExlKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpfWZ1bmN0aW9uIEZlKGUpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGV9ZnVuY3Rpb24gSWUoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBEYXRlfWZ1bmN0aW9uIE5lKGUpe3JldHVybiBJZShlKSYmIWlzTmFOKE51bWJlcihlKSl9ZnVuY3Rpb24gR2UoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBSZWdFeHB9ZnVuY3Rpb24ga2UoZSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGV9ZnVuY3Rpb24gX2UoZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmIUxlKGUpfWZ1bmN0aW9uIFZlKGUpe3JldHVybiBMZShlKXx8QmUoZSl9ZnVuY3Rpb24gQmUoZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmZS5jb25zdHJ1Y3Rvcj09PU9iamVjdH1mdW5jdGlvbiBIZShlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV9ZnVuY3Rpb24gV2UoZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlfWZ1bmN0aW9uIGplKGUpe3JldHVybiBXZShlKSYmTnVtYmVyLmlzRmluaXRlKGUpfWZ1bmN0aW9uIFVlKGUpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnR9ZnVuY3Rpb24gemUoZSx0KXtyZXR1cm4gSGUodCkmJk9iamVjdC5rZXlzKGUpLmluY2x1ZGVzKHQpfWZ1bmN0aW9uIEtlKGUsdCl7cmV0dXJuIE9iamVjdC52YWx1ZXMoZSkuaW5jbHVkZXModCl9ZnVuY3Rpb24gWWUoZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfWZ1bmN0aW9uICRlKC4uLmUpe3JldHVybiBYZSguLi5lLnJldmVyc2UoKSl9ZnVuY3Rpb24gWGUoLi4uZSl7Y29uc3QgdD17fTtmb3IoY29uc3QgaSBvZiBlKXtpZighX2UoaSkpY29udGludWU7Y29uc3QgZT1PZShpKT9BZShpKTpPYmplY3Qua2V5cyhpKTtmb3IoY29uc3QgcyBvZiBlKUJlKHRbc10pJiZCZShpW3NdKT90W3NdPVhlKHRbc10saVtzXSk6bnVsbCE9dFtzXXx8KHRbc109aVtzXSl9cmV0dXJuIHR9ZnVuY3Rpb24gcWUoZSwuLi50KXtyZXR1cm4gdCYmTGUoZSk/ZS5tYXAoZT0+WGUoZSwuLi50KSk6ZX1mdW5jdGlvbiBaZShlLHQpe3JldHVybiBPYmplY3QuZW50cmllcyhlKS5yZWR1Y2UoKGksW3Mscl0pPT4oaVtzXT10KHIscyxlKSxpKSx7fSl9ZnVuY3Rpb24gUWUoZSx0KXtyZXR1cm4oTGUodCk/dDp0LnNwbGl0KCIuIikpLnJlZHVjZSgoZSx0KT0+ZVt0XSxlKX1mdW5jdGlvbiBKZShlLHQsaSl7Y29uc3Qgcz1MZSh0KT90LnNsaWNlKCk6dC5zcGxpdCgiLiIpLHI9cy5wb3AoKTtzLnJlZHVjZSgoZSx0KT0+ZVt0XSxlKVtyXT1pfWZ1bmN0aW9uIGV0KGUsdCxpKXtpZih2b2lkIDA9PT1pKXJldHVybiB0O2Zvcihjb25zdCBzIG9mIGUpe2NvbnN0IGU9aVtzXTt2b2lkIDAhPT1lJiYodFtzXT1lKX1yZXR1cm4gdH12YXIgdHQ9e30saXQ9e30sc3Q9e2hhczplPT5PYmplY3QuaGFzT3duKHR0LGUpLGlzQ2FydGVzaWFuOmU9PiJjYXJ0ZXNpYW4iPT09dHRbZV0saXNQb2xhcjplPT4icG9sYXIiPT09dHRbZV0saXNIaWVyYXJjaHk6ZT0+ImhpZXJhcmNoeSI9PT10dFtlXSxnZXQgc2VyaWVzVHlwZXMoKXtyZXR1cm4gT2JqZWN0LmtleXModHQpfSxnZXQgY2FydGVzaWFuVHlwZXMoKXtyZXR1cm4gdGhpcy5zZXJpZXNUeXBlcy5maWx0ZXIoZT0+dGhpcy5pc0NhcnRlc2lhbihlKSl9LGdldCBwb2xhclR5cGVzKCl7cmV0dXJuIHRoaXMuc2VyaWVzVHlwZXMuZmlsdGVyKGU9PnRoaXMuaXNQb2xhcihlKSl9LGdldCBoaWVyYXJjaHlUeXBlcygpe3JldHVybiB0aGlzLnNlcmllc1R5cGVzLmZpbHRlcihlPT50aGlzLmlzSGllcmFyY2h5KGUpKX19O2Z1bmN0aW9uIHJ0KGUsdCl7aXRbZV09WGUodCxpdFtlXSl9ZnVuY3Rpb24gb3QoZSl7dmFyIHQ7cmV0dXJuIG51bGwhPSh0PWl0W2VdKT90Ont9fXZhciBudD1be3R5cGU6InJvb3QiLG9wdGlvbnNLZXk6ImFuaW1hdGlvbiIsY2hhcnRUeXBlczpbImNhcnRlc2lhbiIsInBvbGFyIiwiaGllcmFyY2h5Il19LHt0eXBlOiJyb290IixvcHRpb25zS2V5OiJiYWNrZ3JvdW5kIixjaGFydFR5cGVzOlsiY2FydGVzaWFuIiwicG9sYXIiLCJoaWVyYXJjaHkiXSxvcHRpb25zSW5uZXJLZXk6ImltYWdlIn0se3R5cGU6InJvb3QiLG9wdGlvbnNLZXk6ImNvbnRleHRNZW51IixjaGFydFR5cGVzOlsiY2FydGVzaWFuIiwicG9sYXIiLCJoaWVyYXJjaHkiXX0se3R5cGU6InJvb3QiLG9wdGlvbnNLZXk6ImRhdGFTb3VyY2UiLGNoYXJ0VHlwZXM6WyJjYXJ0ZXNpYW4iLCJwb2xhciIsImhpZXJhcmNoeSJdfSx7dHlwZToicm9vdCIsb3B0aW9uc0tleToic3luYyIsY2hhcnRUeXBlczpbImNhcnRlc2lhbiJdfSx7dHlwZToicm9vdCIsb3B0aW9uc0tleToiem9vbSIsY2hhcnRUeXBlczpbImNhcnRlc2lhbiJdfSx7dHlwZToibGVnZW5kIixvcHRpb25zS2V5OiJncmFkaWVudExlZ2VuZCIsY2hhcnRUeXBlczpbImNhcnRlc2lhbiIsInBvbGFyIiwiaGllcmFyY2h5Il0saWRlbnRpZmllcjoiZ3JhZGllbnQifSx7dHlwZToicm9vdCIsb3B0aW9uc0tleToibmF2aWdhdG9yIixjaGFydFR5cGVzOlsiY2FydGVzaWFuIl0sb3B0aW9uc0lubmVyS2V5OiJtaW5pQ2hhcnQifSx7dHlwZToiYXhpcyIsb3B0aW9uc0tleToiYXhlc1tdIixjaGFydFR5cGVzOlsicG9sYXIiXSxpZGVudGlmaWVyOiJhbmdsZS1jYXRlZ29yeSJ9LHt0eXBlOiJheGlzIixvcHRpb25zS2V5OiJheGVzW10iLGNoYXJ0VHlwZXM6WyJwb2xhciJdLGlkZW50aWZpZXI6ImFuZ2xlLW51bWJlciJ9LHt0eXBlOiJheGlzIixvcHRpb25zS2V5OiJheGVzW10iLGNoYXJ0VHlwZXM6WyJwb2xhciJdLGlkZW50aWZpZXI6InJhZGl1cy1jYXRlZ29yeSJ9LHt0eXBlOiJheGlzIixvcHRpb25zS2V5OiJheGVzW10iLGNoYXJ0VHlwZXM6WyJwb2xhciJdLGlkZW50aWZpZXI6InJhZGl1cy1udW1iZXIifSx7dHlwZToiYXhpcy1vcHRpb24iLG9wdGlvbnNLZXk6ImNyb3NzaGFpciIsY2hhcnRUeXBlczpbImNhcnRlc2lhbiJdfSx7dHlwZToic2VyaWVzIixvcHRpb25zS2V5OiJzZXJpZXNbXSIsY2hhcnRUeXBlczpbImNhcnRlc2lhbiJdLGlkZW50aWZpZXI6ImJveC1wbG90In0se3R5cGU6InNlcmllcyIsb3B0aW9uc0tleToic2VyaWVzW10iLGNoYXJ0VHlwZXM6WyJjYXJ0ZXNpYW4iXSxpZGVudGlmaWVyOiJidWxsZXQifSx7dHlwZToic2VyaWVzIixvcHRpb25zS2V5OiJzZXJpZXNbXSIsY2hhcnRUeXBlczpbImNhcnRlc2lhbiJdLGlkZW50aWZpZXI6ImhlYXRtYXAifSx7dHlwZToic2VyaWVzIixvcHRpb25zS2V5OiJzZXJpZXNbXSIsY2hhcnRUeXBlczpbInBvbGFyIl0saWRlbnRpZmllcjoibmlnaHRpbmdhbGUifSx7dHlwZToic2VyaWVzIixvcHRpb25zS2V5OiJzZXJpZXNbXSIsY2hhcnRUeXBlczpbInBvbGFyIl0saWRlbnRpZmllcjoicmFkYXItYXJlYSJ9LHt0eXBlOiJzZXJpZXMiLG9wdGlvbnNLZXk6InNlcmllc1tdIixjaGFydFR5cGVzOlsicG9sYXIiXSxpZGVudGlmaWVyOiJyYWRhci1saW5lIn0se3R5cGU6InNlcmllcyIsb3B0aW9uc0tleToic2VyaWVzW10iLGNoYXJ0VHlwZXM6WyJwb2xhciJdLGlkZW50aWZpZXI6InJhZGlhbC1iYXIifSx7dHlwZToic2VyaWVzIixvcHRpb25zS2V5OiJzZXJpZXNbXSIsY2hhcnRUeXBlczpbInBvbGFyIl0saWRlbnRpZmllcjoicmFkaWFsLWNvbHVtbiJ9LHt0eXBlOiJzZXJpZXMiLG9wdGlvbnNLZXk6InNlcmllc1tdIixjaGFydFR5cGVzOlsiY2FydGVzaWFuIl0saWRlbnRpZmllcjoicmFuZ2UtYXJlYSJ9LHt0eXBlOiJzZXJpZXMiLG9wdGlvbnNLZXk6InNlcmllc1tdIixjaGFydFR5cGVzOlsiY2FydGVzaWFuIl0saWRlbnRpZmllcjoicmFuZ2UtYmFyIn0se3R5cGU6InNlcmllcyIsb3B0aW9uc0tleToic2VyaWVzW10iLGNoYXJ0VHlwZXM6WyJoaWVyYXJjaHkiXSxpZGVudGlmaWVyOiJzdW5idXJzdCJ9LHt0eXBlOiJzZXJpZXMiLG9wdGlvbnNLZXk6InNlcmllc1tdIixjaGFydFR5cGVzOlsiaGllcmFyY2h5Il0saWRlbnRpZmllcjoidHJlZW1hcCJ9LHt0eXBlOiJzZXJpZXMiLG9wdGlvbnNLZXk6InNlcmllc1tdIixjaGFydFR5cGVzOlsiY2FydGVzaWFuIl0saWRlbnRpZmllcjoid2F0ZXJmYWxsIn0se3R5cGU6InNlcmllcy1vcHRpb24iLG9wdGlvbnNLZXk6ImVycm9yQmFyIixjaGFydFR5cGVzOlsiY2FydGVzaWFuIl0saWRlbnRpZmllcjoiZXJyb3ItYmFycyJ9XTtmdW5jdGlvbiBhdChlKXtyZXR1cm4gbnQuc29tZSh0PT4ic2VyaWVzIj09PXQudHlwZSYmdC5pZGVudGlmaWVyPT09ZSl9ZnVuY3Rpb24gbHQoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PSh0PW50LmZpbmQodD0+InNlcmllcyI9PT10LnR5cGUmJnQuaWRlbnRpZmllcj09PWUpKT92b2lkIDA6dC5jaGFydFR5cGVzfWZ1bmN0aW9uIGR0KGUpe3ZhciB0LGk7cmV0dXJuKG51bGwhPShpPW51bGw9PSh0PW50LmZpbmQodD0+InNlcmllcyI9PT10LnR5cGUmJnQuaWRlbnRpZmllcj09PWUpKT92b2lkIDA6dC51c2VDb3VudCk/aTowKT4wfWZ1bmN0aW9uIGN0KGUpe2lmKCFmdW5jdGlvbihlKXtyZXR1cm4iZW50ZXJwcmlzZSI9PT1lLnBhY2thZ2VUeXBlfShlKSl0aHJvdyBuZXcgRXJyb3IoIkFHIENoYXJ0cyAtIGludGVybmFsIGNvbmZpZ3VyYXRpb24gZXJyb3IsIG9ubHkgZW50ZXJwcmlzZSBtb2R1bGVzIG5lZWQgdmVyaWZpY2F0aW9uLiIpO2NvbnN0IHQ9bnQuZmluZCh0PT50LnR5cGU9PT1lLnR5cGUmJnQub3B0aW9uc0tleT09PWUub3B0aW9uc0tleSYmdC5pZGVudGlmaWVyPT09ZS5pZGVudGlmaWVyJiZlLmNoYXJ0VHlwZXMuZXZlcnkoZT0+dC5jaGFydFR5cGVzLmluY2x1ZGVzKGUpKSk7cmV0dXJuIHQmJihudWxsIT10LnVzZUNvdW50fHwodC51c2VDb3VudD0wKSx0LnVzZUNvdW50KyspLG51bGwhPXR9ZnVuY3Rpb24gaHQoZSl7dmFyIHQsaSxzO3JldHVybiBudWxsIT0ocz1udWxsPT0oaT1udWxsPT0odD1lLnNlcmllcyk/dm9pZCAwOnRbMF0pP3ZvaWQgMDppLnR5cGUpP3M6ImxpbmUifWZ1bmN0aW9uIHV0KGUpe2NvbnN0IHQ9aHQoZSk7cmV0dXJuIG51bGw9PXR8fCgiY2FydGVzaWFuIj09PXQ/KEwud2Fybk9uY2UoYHR5cGUgJyR7dH0nIGlzIGRlcHJlY2F0ZWQsIHVzZSBhIHNlcmllcyB0eXBlIGluc3RlYWRgKSwhMCk6c3QuaXNDYXJ0ZXNpYW4odCl8fCJjYXJ0ZXNpYW4iPT09KG51bGw9PShpPWx0KHQpKT92b2lkIDA6aS5maW5kKGU9PiJjYXJ0ZXNpYW4iPT09ZSkpKTt2YXIgaX1mdW5jdGlvbiBwdChlKXtjb25zdCB0PWh0KGUpO3JldHVybiBudWxsIT10JiYoImhpZXJhcmNoeSI9PT10PyhMLndhcm5PbmNlKGB0eXBlICcke3R9JyBpcyBkZXByZWNhdGVkLCB1c2UgYSBzZXJpZXMgdHlwZSBpbnN0ZWFkYCksITApOnN0LmlzSGllcmFyY2h5KHQpfHwiaGllcmFyY2h5Ij09PShudWxsPT0oaT1sdCh0KSk/dm9pZCAwOmkuZmluZChlPT4iaGllcmFyY2h5Ij09PWUpKSk7dmFyIGl9ZnVuY3Rpb24gZ3QoZSl7Y29uc3QgdD1odChlKTtyZXR1cm4gbnVsbCE9dCYmKCJwb2xhciI9PT10PyhMLndhcm5PbmNlKGB0eXBlICcke3R9JyBpcyBkZXByZWNhdGVkLCB1c2UgYSBzZXJpZXMgdHlwZSBpbnN0ZWFkYCksITApOnN0LmlzUG9sYXIodCl8fCJwb2xhciI9PT0obnVsbD09KGk9bHQodCkpP3ZvaWQgMDppLmZpbmQoZT0+InBvbGFyIj09PWUpKSk7dmFyIGl9ZnVuY3Rpb24gbXQoZSl7dmFyIHQsaSxzLHI7Y29uc3Qgbz1bXSxuPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBudWxsIT0odD10dFtlXSk/dDoidW5rbm93biJ9KGh0KGUpKTtmb3IoY29uc3R7dHlwZTphLGNoYXJ0VHlwZXM6bCxvcHRpb25zS2V5OmQsb3B0aW9uc0lubmVyS2V5OmMsaWRlbnRpZmllcjpofW9mIG50KWlmKCJ1bmtub3duIj09PW58fGwuaW5jbHVkZXMobikpaWYoInJvb3QiPT09YXx8ImxlZ2VuZCI9PT1hKXtjb25zdCB0PWVbZF07aWYobnVsbD09dCljb250aW51ZTtjP3RbY10mJihvLnB1c2goYCR7ZH0uJHtjfWApLGRlbGV0ZSB0W2NdKTooby5wdXNoKGQpLGRlbGV0ZSBlW2RdKX1lbHNlIGlmKCJheGlzIj09PWEpe2lmKCEoImF4ZXMiaW4gZSl8fCEobnVsbD09KHQ9ZS5heGVzKT92b2lkIDA6dC5zb21lKGU9PmUudHlwZT09PWgpKSljb250aW51ZTtvLnB1c2goYGF4aXNbdHlwZT0ke2h9XWApLGUuYXhlcz1lLmF4ZXMuZmlsdGVyKGU9PmUudHlwZSE9PWgpfWVsc2UgaWYoImF4aXMtb3B0aW9uIj09PWEpe2lmKCEoImF4ZXMiaW4gZSl8fCEobnVsbD09KGk9ZS5heGVzKT92b2lkIDA6aS5zb21lKGU9PmVbZF0pKSljb250aW51ZTtvLnB1c2goImF4aXMuIitkKSxlLmF4ZXMuZm9yRWFjaChlPT57ZVtkXSYmZGVsZXRlIGVbZF19KX1lbHNlIGlmKCJzZXJpZXMiPT09YSl7aWYoIShudWxsPT0ocz1lLnNlcmllcyk/dm9pZCAwOnMuc29tZShlPT5lLnR5cGU9PT1oKSkpY29udGludWU7by5wdXNoKGBzZXJpZXNbdHlwZT0ke2h9XWApLGUuc2VyaWVzPWUuc2VyaWVzLmZpbHRlcihlPT5lLnR5cGUhPT1oKX1lbHNlIGlmKCJzZXJpZXMtb3B0aW9uIj09PWEpe2lmKCEobnVsbD09KHI9ZS5zZXJpZXMpP3ZvaWQgMDpyLnNvbWUoZT0+ZVtkXSkpKWNvbnRpbnVlO28ucHVzaCgic2VyaWVzLiIrZCksZS5zZXJpZXMuZm9yRWFjaChlPT57ZVtkXSYmZGVsZXRlIGVbZF19KX1vLmxlbmd0aCYmTC53YXJuT25jZShbInVuYWJsZSB0byB1c2UgdGhlc2UgZW50ZXJwcmlzZSBmZWF0dXJlcyBhcyAnYWctY2hhcnRzLWVudGVycHJpc2UnIGhhcyBub3QgYmVlbiBsb2FkZWQ6XG4iLCIiLC4uLm8sIiIsIlNlZTogaHR0cHM6Ly9jaGFydHMuYWctZ3JpZC5jb20vamF2YXNjcmlwdC9pbnN0YWxsYXRpb24vIl0uam9pbigiXG4iKSl9dmFyIGZ0PWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuY2xhc3NOYW1lPWV9c2V0KGUpe2NvbnN0IHQ9bmV3IFNldChPYmplY3Qua2V5cyhlKSk7Zm9yKGNvbnN0IGkgb2YgQWUodGhpcykpaWYodC5oYXMoaSkpe2NvbnN0IHM9ZVtpXSxyPXRoaXM7Q3QocltpXSk/cltpXT1yW2ldaW5zdGFuY2VvZiB2dD9yW2ldLnJlc2V0KHMpOnJbaV0uc2V0KHMpOnJbaV09cyx0LmRlbGV0ZShpKX1mb3IoY29uc3QgZSBvZiB0KXtjb25zdHtjbGFzc05hbWU6dD10aGlzLmNvbnN0cnVjdG9yLm5hbWV9PXRoaXMuY29uc3RydWN0b3I7TC53YXJuKGB1bmFibGUgdG8gc2V0IFske2V9XSBpbiAke3R9IC0gcHJvcGVydHkgaXMgdW5rbm93bmApfXJldHVybiB0aGlzfWlzVmFsaWQoKXtyZXR1cm4gQWUodGhpcykuZXZlcnkoZT0+e2NvbnN0e29wdGlvbmFsOnR9PWZ1bmN0aW9uKGUsdCl7Y29uc3QgaT10LnRvU3RyaW5nKCk7Zm9yKDtPZShlKTspe2NvbnN0IHQ9ZVt4ZV07aWYoT2JqZWN0Lmhhc093bih0LGkpKXJldHVybiB0W2ldO2U9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfX0odGhpcyxlKTtyZXR1cm4gdHx8dm9pZCAwIT09dGhpc1tlXX0pfXRvSnNvbigpe3JldHVybiBBZSh0aGlzKS5yZWR1Y2UoKGUsdCk9Pntjb25zdCBpPXRoaXNbdF07cmV0dXJuIGVbdF09Q3QoaSk/aS50b0pzb24oKTppLGV9LHt9KX19LHZ0PWNsYXNzIGUgZXh0ZW5kcyBBcnJheXtjb25zdHJ1Y3RvcihlLC4uLnQpe3N1cGVyKHQubGVuZ3RoKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiaXRlbUZhY3RvcnkiLHt2YWx1ZTplLGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiExfSksdGhpcy5zZXQodCl9c2V0KGUpe2lmKExlKGUpKXt0aGlzLmxlbmd0aD1lLmxlbmd0aDtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl0aGlzW3RdPShuZXcgdGhpcy5pdGVtRmFjdG9yeSkuc2V0KGVbdF0pfXJldHVybiB0aGlzfXJlc2V0KHQpe3JldHVybiBuZXcgZSh0aGlzLml0ZW1GYWN0b3J5LC4uLnQpfXRvSnNvbigpe3JldHVybiB0aGlzLnNsaWNlKCl9fTtmdW5jdGlvbiBDdChlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGZ0fHxlIGluc3RhbmNlb2YgdnR9ZnVuY3Rpb24geXQoZSx0KXtpZihMZSh0KSl7aWYoIUxlKGUpfHxlLmxlbmd0aCE9PXQubGVuZ3RofHx0LnNvbWUoKHQsaSk9Pm51bGwhPXl0KGVbaV0sdCkpKXJldHVybiB0fWVsc2V7aWYoQmUodCkpe2lmKCFCZShlKSlyZXR1cm4gdDtjb25zdCBpPXt9LHM9bmV3IFNldChbLi4uT2JqZWN0LmtleXMoZSksLi4uT2JqZWN0LmtleXModCldKTtmb3IoY29uc3QgciBvZiBzKWlmKGVbcl0hPT10W3JdKWlmKHR5cGVvZiBlW3JdIT10eXBlb2YgdFtyXSlpW3JdPXRbcl07ZWxzZXtjb25zdCBzPXl0KGVbcl0sdFtyXSk7bnVsbCE9PXMmJihpW3JdPXMpfXJldHVybiBPYmplY3Qua2V5cyhpKS5sZW5ndGg/aTpudWxsfWlmKGUhPT10KXJldHVybiB0fXJldHVybiBudWxsfWZ1bmN0aW9uIFN0KGUsdCl7cmV0dXJuIExlKGUpP2UubWFwKGU9PlN0KGUsdCkpOkJlKGUpP09iamVjdC5lbnRyaWVzKGUpLnJlZHVjZSgoZSxbaSxzXSk9Pnt2YXIgcjtyZXR1cm4gZVtpXT0obnVsbD09KHI9bnVsbD09dD92b2lkIDA6dC5zaGFsbG93KT92b2lkIDA6ci5pbmNsdWRlcyhpKSk/d3Qocyk6U3Qocyx0KSxlfSx7fSk6d3QoZSl9ZnVuY3Rpb24gd3QoZSl7cmV0dXJuIExlKGUpP1suLi5lXTpCZShlKT9tKHt9LGUpOkllKGUpP25ldyBEYXRlKGUpOkdlKGUpP25ldyBSZWdFeHAoZS5zb3VyY2UsZS5mbGFncyk6ZX1mdW5jdGlvbiBidChlLHQsaSwuLi5zKXt2YXIgcjtpZihMZShlKSl0KGUsLi4ucyksZS5mb3JFYWNoKChlLHIpPT57YnQoZSx0LGksLi4uUnQocyxyKSl9KTtlbHNlIGlmKEJlKGUpKXt0KGUsLi4ucyk7Zm9yKGNvbnN0IG8gb2YgT2JqZWN0LmtleXMoZSkpe2lmKG51bGw9PShyPW51bGw9PWk/dm9pZCAwOmkuc2tpcCk/dm9pZCAwOnIuaW5jbHVkZXMobykpY29udGludWU7Y29uc3Qgbj1lW29dOyhMZShuKXx8QmUobikpJiZidChuLHQsaSwuLi5SdChzLG8pKX19fWZ1bmN0aW9uIEV0KGUsdCxpPXt9KXt2YXIgcyxyLG87Y29uc3R7cGF0aDpuLG1hdGNoZXJQYXRoOmE9KG4/bi5yZXBsYWNlKC8oXFtbMC05K10rXSkvaSwiW10iKTp2b2lkIDApLHNraXA6bD1bXSxjb25zdHJ1Y3RvcnM6ZD17fSxjb25zdHJ1Y3RlZEFycmF5czpjPW5ldyBXZWFrTWFwLGFsbG93ZWRUeXBlczpoPXt9LGlkeDp1fT1pO2lmKG51bGw9PWUpdGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSB0YXJnZXQgaXMgdW5pbml0aWFsaXNlZDogIisobnVsbCE9bj9uOiI8cm9vdD4iKSk7aWYobnVsbD09dClyZXR1cm4gZTtpZihDdChlKSlyZXR1cm4gZS5zZXQodCk7Y29uc3QgcD1lO251bGwhPXUmJiJfZGVjbGFyYXRpb25PcmRlciJpbiBwJiYocC5fZGVjbGFyYXRpb25PcmRlcj11KTtjb25zdCBnPXh0KGUpO2Zvcihjb25zdCB1IGluIHQpe2NvbnN0IHY9YCR7YT9hKyIuIjoiIn0ke3V9YDtpZihsLmluZGV4T2Yodik+PTApY29udGludWU7Y29uc3QgQz10W3VdLHk9YCR7bj9uKyIuIjoiIn0ke3V9YCxTPXAuY29uc3RydWN0b3Isdz1wW3VdO2xldCBiPW51bGwhPShzPWRbdl0pP3M6ZFt1XTt0cnl7Y29uc3QgdD14dCh3KSxzPXh0KEMpO2lmKCJjbGFzcy1pbnN0YW5jZSI9PT1nJiYhKHUgaW4gZSkmJiFPYmplY3QuaGFzT3duKHAsdSkpe0wud2FybihgdW5hYmxlIHRvIHNldCBbJHt5fV0gaW4gJHtudWxsPT1TP3ZvaWQgMDpTLm5hbWV9IC0gcHJvcGVydHkgaXMgdW5rbm93bmApO2NvbnRpbnVlfWNvbnN0IG49bnVsbCE9KHI9aFt2XSk/cjpbdF07aWYoImNsYXNzLWluc3RhbmNlIj09PXQmJiJvYmplY3QiPT09cyk7ZWxzZSBpZihudWxsIT10JiZudWxsIT1zJiYhbi5pbmNsdWRlcyhzKSl7TC53YXJuKGB1bmFibGUgdG8gc2V0IFske3l9XSBpbiAke251bGw9PVM/dm9pZCAwOlMubmFtZX0gLSBjYW4ndCBhcHBseSB0eXBlIG9mIFske3N9XSwgYWxsb3dlZCB0eXBlcyBhcmU6IFske259XWApO2NvbnRpbnVlfWlmKCJhcnJheSI9PT1zKWlmKGI9bnVsbCE9KG89bnVsbCE9Yj9iOmMuZ2V0KHcpKT9vOmRbdisiW10iXSxDdChwW3VdKSlwW3VdLnNldChDKTtlbHNlIGlmKG51bGwhPWIpe2NvbnN0IGU9QztwW3VdPWUubWFwKChlLHQpPT5FdChuZXcgYixlLGYobSh7fSxpKSx7cGF0aDp5LG1hdGNoZXJQYXRoOnYrIltdIixpZHg6dH0pKSl9ZWxzZSBwW3VdPUM7ZWxzZSBpZigiY2xhc3MtaW5zdGFuY2UiPT09cylwW3VdPUM7ZWxzZSBpZigib2JqZWN0Ij09PXMpaWYoQ3QodykpcFt1XS5zZXQoQyk7ZWxzZSBpZihudWxsIT13KUV0KHcsQyxmKG0oe30saSkse3BhdGg6eSxtYXRjaGVyUGF0aDp2LGlkeDp2b2lkIDB9KSk7ZWxzZSBpZihudWxsIT1iKXtjb25zdCBlPW5ldyBiO0N0KGUpP3BbdV09ZS5zZXQoQyk6cFt1XT1FdChlLEMsZihtKHt9LGkpLHtwYXRoOnksbWF0Y2hlclBhdGg6dixpZHg6dm9pZCAwfSkpfWVsc2UgcFt1XT1DO2Vsc2UgQ3QocFt1XSk/cFt1XS5zZXQoQyk6cFt1XT1DfWNhdGNoKGUpe0wud2FybihgdW5hYmxlIHRvIHNldCBbJHt5fV0gaW4gWyR7bnVsbD09Uz92b2lkIDA6Uy5uYW1lfV07IG5lc3RlZCBlcnJvciBpczogJHtlLm1lc3NhZ2V9YCl9fXJldHVybiBlfWZ1bmN0aW9uIFJ0KGUsdCl7cmV0dXJuIGUubWFwKGU9Pm51bGw9PWU/dm9pZCAwOmVbdF0pfWZ1bmN0aW9uIHh0KGUpe3JldHVybiBudWxsPT1lP251bGw6VWUoZSl8fEllKGUpPyJwcmltaXRpdmUiOkxlKGUpPyJhcnJheSI6X2UoZSk/QmUoZSk/Im9iamVjdCI6ImNsYXNzLWluc3RhbmNlIjprZShlKT8iZnVuY3Rpb24iOiJwcmltaXRpdmUifXZhciBUdD17fSxEdD17fSxPdD17fSxBdD17fSxQdD17fSxNdD1uZXcgU2V0LEx0PW5ldyBTZXQsRnQ9bmV3IFNldCxJdD1uZXcgU2V0LE50PXt9O2Z1bmN0aW9uIEd0KHtpZGVudGlmaWVyOmUsY2hhcnRUeXBlczpbdF0saW5zdGFuY2VDb25zdHJ1Y3RvcjppLHNlcmllc0RlZmF1bHRzOnMsdGhlbWVUZW1wbGF0ZTpyLGVudGVycHJpc2VUaGVtZVRlbXBsYXRlOm8scGFsZXR0ZUZhY3Rvcnk6bixzb2xvOmEsc3RhY2thYmxlOmwsZ3JvdXBhYmxlOmQsc3RhY2tlZEJ5RGVmYXVsdDpjLHN3YXBEZWZhdWx0QXhlc0NvbmRpdGlvbjpofSl7VHRbZV09aSxEdFtlXT1zLGt0KGUscixvKSxuJiZmdW5jdGlvbihlLHQpe1B0W2VdPXR9KGUsbiksYSYmZnVuY3Rpb24oZSl7TXQuYWRkKGUpfShlKSxsJiZmdW5jdGlvbihlKXtMdC5hZGQoZSl9KGUpLGQmJmZ1bmN0aW9uKGUpe0Z0LmFkZChlKX0oZSksYyYmZnVuY3Rpb24oZSl7SXQuYWRkKGUpfShlKSxoJiZmdW5jdGlvbihlLHQpe050W2VdPXR9KGUsaCksZnVuY3Rpb24oZSx0KXt0dFtlXT10fShlLHQpfWZ1bmN0aW9uIGt0KGUsdCxpPXt9KXtjb25zdCBzPU90W2VdO090W2VdPVhlKHQscyksQXRbZV09WGUoaSx0LHMpfWZ1bmN0aW9uIF90KGUsdCl7Y29uc3QgaT1UdFtlXTtpZihpKXJldHVybiBuZXcgaSh0KTt0aHJvdyBuZXcgRXJyb3IoIkFHIENoYXJ0cyAtIHVua25vd24gc2VyaWVzIHR5cGU6ICIrZSl9ZnVuY3Rpb24gVnQoZSl7cmV0dXJuIHVlLmlzRW50ZXJwcmlzZT9BdFtlXTpPdFtlXX1mdW5jdGlvbiBCdChlKXtyZXR1cm4gTXQuaGFzKGUpfXZhciBIdD17fSxXdD17fTtmdW5jdGlvbiBqdChlLHQsaSxzKXtIdFtlXT1pLFd0W2VdPXQsVXRbdF09c312YXIgVXQ9e307dmFyIHp0PShlPT4oZVtlLlNNQUxMPTEyXT0iU01BTEwiLGVbZS5NRURJVU09MTNdPSJNRURJVU0iLGVbZS5MQVJHRT0xN109IkxBUkdFIixlKSkoenR8fHt9KSxLdD0oZT0+KGUuTk9STUFMPSJub3JtYWwiLGUuQk9MRD0iYm9sZCIsZS5CT0xERVI9ImJvbGRlciIsZS5MSUdIVEVSPSJsaWdodGVyIixlKSkoS3R8fHt9KSxZdD0oZT0+KGUuVE9QPSJ0b3AiLGUuUklHSFQ9InJpZ2h0IixlLkJPVFRPTT0iYm90dG9tIixlLkxFRlQ9ImxlZnQiLGUpKShZdHx8e30pLCR0PShlPT4oZS5DQVRFR09SWT0iY2F0ZWdvcnkiLGUuTlVNQkVSPSJudW1iZXIiLGUuVElNRT0idGltZSIsZS5MT0c9ImxvZyIsZSkpKCR0fHx7fSksWHQ9KGU9PihlLkFOR0xFX0NBVEVHT1JZPSJhbmdsZS1jYXRlZ29yeSIsZS5BTkdMRV9OVU1CRVI9ImFuZ2xlLW51bWJlciIsZS5SQURJVVNfQ0FURUdPUlk9InJhZGl1cy1jYXRlZ29yeSIsZS5SQURJVVNfTlVNQkVSPSJyYWRpdXMtbnVtYmVyIixlKSkoWHR8fHt9KSxxdD0oZT0+KGUuQ0lSQ0xFPSJjaXJjbGUiLGUuUE9MWUdPTj0icG9seWdvbiIsZSkpKHF0fHx7fSksWnQ9e0JMVUU6IiM1MDkwZGMiLE9SQU5HRToiI2ZmYTAzYSIsR1JFRU46IiM0NTlkNTUiLENZQU46IiMzNGJmZTEiLFlFTExPVzoiI2UxY2MwMCIsVklPTEVUOiIjOTY2OWNiIixHUkFZOiIjYjViNWI1IixNQUdFTlRBOiIjYmQ1YWE3IixCUk9XTjoiIzhhNjIyNCIsUkVEOiIjZWY1NDUyIn0sUXQ9e0JMVUU6IiMyYjVjOTUiLE9SQU5HRToiI2NjNmYxMCIsR1JFRU46IiMxZTY1MmUiLENZQU46IiMxODg1OWUiLFlFTExPVzoiI2E2OTQwMCIsVklPTEVUOiIjNjAzYzg4IixHUkFZOiIjNTc1NzU3IixNQUdFTlRBOiIjN2QyZjZkIixCUk9XTjoiIzRmMzUwOCIsUkVEOiIjYTgyNTI5In0sSnQ9U3ltYm9sKCJpcy1kYXJrLXRoZW1lIiksZWk9U3ltYm9sKCJleHRlbmRzLWNoYXJ0LWRlZmF1bHRzIiksdGk9U3ltYm9sKCJleHRlbmRzLWxlZ2VuZC1kZWZhdWx0cyIpLGlpPVN5bWJvbCgiZXh0ZW5kcy1sZWdlbmQtaXRlbS1kZWZhdWx0cyIpLHNpPVN5bWJvbCgiZXh0ZW5kcy1sZWdlbmQtaXRlbS1tYXJrZXItZGVmYXVsdHMiKSxyaT1TeW1ib2woImV4dGVuZHMtYXhlcy1kZWZhdWx0cyIpLG9pPVN5bWJvbCgiZXh0ZW5kcy1heGVzLWxhYmVsLWRlZmF1bHRzIiksbmk9U3ltYm9sKCJleHRlbmRzLWF4ZXMtbGluZS1kZWZhdWx0cyIpLGFpPVN5bWJvbCgiZXh0ZW5kcy1heGVzLXRpY2stZGVmYXVsdHMiKSxsaT1TeW1ib2woImV4dGVuZHMtYXhlcy1ncmlkLWxpbmUtZGVmYXVsdHMiKSxkaT1TeW1ib2woImV4dGVuZHMtc2VyaWVzLWRlZmF1bHRzIiksY2k9U3ltYm9sKCJleHRlbmRzLWNhcnRlc2lhbi1tYXJrZXItZGVmYXVsdHMiKSxoaT1TeW1ib2woIm92ZXJyaWRlLXNlcmllcy1sYWJlbC1kZWZhdWx0cyIpLHVpPVN5bWJvbCgiZGVmYXVsdC1mb250IikscGk9U3ltYm9sKCJkZWZhdWx0LWxhYmVsLWNvbG91ciIpLGdpPVN5bWJvbCgiZGVmYXVsdC1pbnZlcnRlZC1sYWJlbC1jb2xvdXIiKSxtaT1TeW1ib2woImRlZmF1bHQtaW5zaWRlLXNlcmllcy1sYWJlbC1jb2xvdXIiKSxmaT1TeW1ib2woImRlZmF1bHQtbXV0ZWQtbGFiZWwtY29sb3VyIiksdmk9U3ltYm9sKCJkZWZhdWx0LWF4aXMtZ3JpZC1jb2xvdXIiKSxDaT1TeW1ib2woImRlZmF1bHQtYXhpcy1saW5lLWNvbG91ciIpLHlpPVN5bWJvbCgiZGVmYXVsdC1jcm9zcy1saW5lcy1jb2xvdXIiKSxTaT1TeW1ib2woImRlZmF1bHQtYmFja2dyb3VuZC1jb2xvdXIiKSx3aT1TeW1ib2woImRlZmF1bHQtc2hhZG93LWNvbG91ciIpLGJpPVN5bWJvbCgiZGVmYXVsdC13YXRlcmZhbGwtc2VyaWVzLXBvc2l0aXZlLWNvbG9ycyIpLEVpPVN5bWJvbCgiZGVmYXVsdC13YXRlcmZhbGwtc2VyaWVzLW5lZ2F0aXZlLWNvbG9ycyIpLFJpPVN5bWJvbCgiZGVmYXVsdC13YXRlcmZhbGwtc2VyaWVzLXRvdGFsLWNvbG9ycyIpLHhpPVN5bWJvbCgiZGVmYXVsdC13YXRlcmZhbGwtc2VyaWVzLWNvbm5lY3Rvci1saW5lLXN0cm9rZSIpLFRpPVN5bWJvbCgiZGVmYXVsdC1wb2xhci1zZXJpZXMtc3Ryb2tlIiksRGk9U3ltYm9sKCJkZWZhdWx0LWRpdmVyZ2luZy1zZXJpZXMtY29sb3VyLXJhbmdlIiksT2k9U3ltYm9sKCJkZWZhdWx0LWhpZXJhcmNoeS1maWxscyIpLEFpPVN5bWJvbCgiZGVmYXVsdC1oaWVyYXJjaHktc3Ryb2tlcyIpLFBpPXtmaWxsczpPYmplY3QudmFsdWVzKFp0KSxzdHJva2VzOk9iamVjdC52YWx1ZXMoUXQpfSxNaT17Z2V0IGNhcnRlc2lhbigpe3JldHVybntzZXJpZXNUeXBlczpzdC5jYXJ0ZXNpYW5UeXBlcyxjb21tb25PcHRpb25zOlsiem9vbSIsIm5hdmlnYXRvciJdfX0sZ2V0IHBvbGFyKCl7cmV0dXJue3Nlcmllc1R5cGVzOnN0LnBvbGFyVHlwZXMsY29tbW9uT3B0aW9uczpbXX19LGdldCBoaWVyYXJjaHkoKXtyZXR1cm57c2VyaWVzVHlwZXM6c3QuaGllcmFyY2h5VHlwZXMsY29tbW9uT3B0aW9uczpbXX19fSxMaT1PYmplY3QudmFsdWVzKE1pKS5yZWR1Y2UoKGUse2NvbW1vbk9wdGlvbnM6dH0pPT5bLi4uZSwuLi50XSxbXSk7dmFyIEZpPWNsYXNzIGV7Z2V0UGFsZXR0ZSgpe3JldHVybiBQaX1zdGF0aWMgZ2V0QXhpc0RlZmF1bHRzKGUpe3JldHVybiBYZShlLHt0b3A6e30scmlnaHQ6e30sYm90dG9tOnt9LGxlZnQ6e30sdGl0bGU6e2VuYWJsZWQ6ITEsdGV4dDoiQXhpcyBUaXRsZSIsc3BhY2luZzoyNSxmb250V2VpZ2h0OiJub3JtYWwiLGZvbnRTaXplOjEzLGZvbnRGYW1pbHk6dWksY29sb3I6cGl9LGxhYmVsOntmb250U2l6ZToxMixmb250RmFtaWx5OnVpLHBhZGRpbmc6NSxjb2xvcjpwaSxhdm9pZENvbGxpc2lvbnM6ITB9LGxpbmU6e2VuYWJsZWQ6ITAsd2lkdGg6MSxjb2xvcjpDaX0sdGljazp7ZW5hYmxlZDohMSx3aWR0aDoxLGNvbG9yOkNpfSxncmlkTGluZTp7ZW5hYmxlZDohMCxzdHlsZTpbe3N0cm9rZTp2aSxsaW5lRGFzaDpbXX1dfSxjcm9zc0xpbmVzOntlbmFibGVkOiExLGZpbGw6eWksc3Ryb2tlOnlpLGZpbGxPcGFjaXR5Oi4xLHN0cm9rZVdpZHRoOjEsbGFiZWw6e2VuYWJsZWQ6ITEsZm9udFNpemU6MTIsZm9udEZhbWlseTp1aSxwYWRkaW5nOjUsY29sb3I6cGl9fX0pfXN0YXRpYyBnZXRTZXJpZXNEZWZhdWx0cygpe3JldHVybnt0b29sdGlwOntlbmFibGVkOiEwfSx2aXNpYmxlOiEwLHNob3dJbkxlZ2VuZDohMCxoaWdobGlnaHRTdHlsZTp7aXRlbTp7ZmlsbDoicmdiYSgyNTUsMjU1LDI1NSwgMC4zMykiLHN0cm9rZToicmdiYSgwLCAwLCAwLCAwLjQpIixzdHJva2VXaWR0aDoyfSxzZXJpZXM6e2RpbU9wYWNpdHk6MX0sdGV4dDp7Y29sb3I6ImJsYWNrIn19LG5vZGVDbGlja1JhbmdlOiJleGFjdCJ9fXN0YXRpYyBnZXRDYXJ0ZXNpYW5TZXJpZXNNYXJrZXJEZWZhdWx0cygpe3JldHVybntlbmFibGVkOiEwLHNoYXBlOiJjaXJjbGUiLHNpemU6NyxzdHJva2VXaWR0aDoxfX1zdGF0aWMgZ2V0TGVnZW5kSXRlbU1hcmtlckRlZmF1bHRzKCl7cmV0dXJue3NpemU6MTUscGFkZGluZzo4fX1zdGF0aWMgZ2V0Q2FwdGlvbldyYXBwaW5nRGVmYXVsdHMoKXtyZXR1cm4iaHlwaGVuYXRlIn1zdGF0aWMgZ2V0Q2hhcnREZWZhdWx0cygpe3JldHVybntiYWNrZ3JvdW5kOnt2aXNpYmxlOiEwLGZpbGw6U2l9LHBhZGRpbmc6e3RvcDoyMCxyaWdodDoyMCxib3R0b206MjAsbGVmdDoyMH0sdGl0bGU6e2VuYWJsZWQ6ITEsdGV4dDoiVGl0bGUiLGZvbnRXZWlnaHQ6Im5vcm1hbCIsZm9udFNpemU6MTcsZm9udEZhbWlseTp1aSxjb2xvcjpwaSx3cmFwcGluZzplLmdldENhcHRpb25XcmFwcGluZ0RlZmF1bHRzKCl9LHN1YnRpdGxlOntlbmFibGVkOiExLHRleHQ6IlN1YnRpdGxlIixzcGFjaW5nOjIwLGZvbnRTaXplOjEzLGZvbnRGYW1pbHk6dWksY29sb3I6Zmksd3JhcHBpbmc6ZS5nZXRDYXB0aW9uV3JhcHBpbmdEZWZhdWx0cygpfSxmb290bm90ZTp7ZW5hYmxlZDohMSx0ZXh0OiJGb290bm90ZSIsc3BhY2luZzoyMCxmb250U2l6ZToxMyxmb250RmFtaWx5OnVpLGNvbG9yOiJyZ2IoMTQwLCAxNDAsIDE0MCkiLHdyYXBwaW5nOmUuZ2V0Q2FwdGlvbldyYXBwaW5nRGVmYXVsdHMoKX0sbGVnZW5kOntwb3NpdGlvbjoiYm90dG9tIixzcGFjaW5nOjMwLGxpc3RlbmVyczp7fSxpdGVtOntwYWRkaW5nWDoxNixwYWRkaW5nWTo4LG1hcmtlcjplLmdldExlZ2VuZEl0ZW1NYXJrZXJEZWZhdWx0cygpLHRvZ2dsZVNlcmllc1Zpc2libGU6ITAsbGFiZWw6e2NvbG9yOnBpLGZvbnRTaXplOjEyLGZvbnRGYW1pbHk6dWl9fSxyZXZlcnNlT3JkZXI6ITEscGFnaW5hdGlvbjp7bWFya2VyOntzaXplOjEyfSxhY3RpdmVTdHlsZTp7ZmlsbDpwaX0saW5hY3RpdmVTdHlsZTp7ZmlsbDpmaX0saGlnaGxpZ2h0U3R5bGU6e2ZpbGw6cGl9LGxhYmVsOntjb2xvcjpwaX19fSx0b29sdGlwOntlbmFibGVkOiEwLGRhcmtUaGVtZTpKdCxyYW5nZToibmVhcmVzdCIsZGVsYXk6MH0sb3ZlcmxheXM6e2xvYWRpbmc6e2RhcmtUaGVtZTpKdH0sbm9EYXRhOntkYXJrVGhlbWU6SnR9LG5vVmlzaWJsZVNlcmllczp7ZGFya1RoZW1lOkp0fX0sbGlzdGVuZXJzOnt9fX1jb25zdHJ1Y3RvcihlKXt2YXIgdDtlPVN0KG51bGwhPWU/ZTp7fSk7Y29uc3R7b3ZlcnJpZGVzOmk9bnVsbCxwYWxldHRlOnM9bnVsbH09ZSxyPXRoaXMuY3JlYXRlQ2hhcnRDb25maWdQZXJDaGFydFR5cGUodGhpcy5nZXREZWZhdWx0cygpKTtpZihpKXtjb25zdHtjb21tb246ZX09aSx0PShlLHQpPT57aWYodClmb3IoY29uc3QgaSBvZiBlKXtjb25zdCBlPWk7cltlXT1YZSh0LHJbZV0pfX07Zm9yKGNvbnN0Wyx7c2VyaWVzVHlwZXM6aSxjb21tb25PcHRpb25zOnN9XW9mIE9iamVjdC5lbnRyaWVzKE1pKSl7Y29uc3Qgcj1tKHt9LGUpO2Zvcihjb25zdCBlIG9mIExpKXMuaW5jbHVkZXMoZSl8fGRlbGV0ZSByW2VdO3QoaSxyKX1zdC5zZXJpZXNUeXBlcy5mb3JFYWNoKGU9Pntjb25zdCB0PWU7aVt0XSYmKHJbdF09WGUoaVt0XSxyW3RdKSl9KX1jb25zdCBvPXRoaXMuZ2V0UGFsZXR0ZSgpO3RoaXMucGFsZXR0ZT1udWxsIT0odD1mdW5jdGlvbihlLHQpe3ZhciBpLHM7cmV0dXJuIG51bGw9PWU/bnVsbDp7ZmlsbHM6bnVsbCE9KGk9ZS5maWxscyk/aTp0LmZpbGxzLHN0cm9rZXM6bnVsbCE9KHM9ZS5zdHJva2VzKT9zOnQuc3Ryb2tlc319KHMsbykpP3Q6byx0aGlzLmNvbmZpZz1PYmplY3QuZnJlZXplKHRoaXMudGVtcGxhdGVUaGVtZShyKSl9Y3JlYXRlQ2hhcnRDb25maWdQZXJDaGFydFR5cGUoZSl7cmV0dXJuIE9iamVjdC5lbnRyaWVzKE1pKS5mb3JFYWNoKChbdCx7c2VyaWVzVHlwZXM6aX1dKT0+e2NvbnN0IHM9b3QodCk7aS5mb3JFYWNoKHQ9Pntjb25zdCBpPXQ7ZVtpXXx8KGVbaV09U3QocykpfSl9KSxlfWdldERlZmF1bHRzKCl7Y29uc3QgdD10PT5tKG0obSh7YXhlczp7fX0sVXQpLGUuZ2V0Q2hhcnREZWZhdWx0cygpKSxvdCh0KSksaT0oaSxzKT0+e3ZhciByO2NvbnN0IG89dChpKSxuPXt9O2Zvcihjb25zdCB0IG9mIHMpe25bdF09WGUoVnQodCksbnVsbCE9KHI9blt0XSk/cjpTdChvKSk7Y29uc3R7YXhlczpzfT1uW3RdO2Zvcihjb25zdCB0IG9mIFNlLmF4ZXNUeXBlcylzW3RdPVhlKHNbdF0sRWUodCksImNhcnRlc2lhbiI9PT1pJiZlLmNhcnRlc2lhbkF4aXNEZWZhdWx0W3RdKX1yZXR1cm4gbn07cmV0dXJuIFhlKGkoImNhcnRlc2lhbiIsc3QuY2FydGVzaWFuVHlwZXMpLGkoInBvbGFyIixzdC5wb2xhclR5cGVzKSxpKCJoaWVyYXJjaHkiLHN0LmhpZXJhcmNoeVR5cGVzKSl9dGVtcGxhdGVUaGVtZShlKXtjb25zdCB0PVN0KGUpLHtleHRlbnNpb25zOmkscHJvcGVydGllczpzfT10aGlzLmdldFRlbXBsYXRlUGFyYW1ldGVycygpO3JldHVybiBidCh0LGU9PntpZihlLl9fZXh0ZW5kc19fKXtjb25zdCB0PWUuX19leHRlbmRzX18scz1pLmdldCh0KTtpZihudWxsPT1zKXRocm93IG5ldyBFcnJvcigiQUcgQ2hhcnRzIC0gbm8gdGVtcGxhdGUgdmFyaWFibGUgcHJvdmlkZWQgZm9yOiAiK3QpO09iamVjdC5rZXlzKHMpLmZvckVhY2godD0+e3QgaW4gZT9fZShlW3RdKSYmKGVbdF09WGUoZVt0XSxzW3RdKSk6ZVt0XT1zW3RdfSksZGVsZXRlIGUuX19leHRlbmRzX199aWYoZS5fX292ZXJyaWRlc19fKXtjb25zdCB0PWUuX19vdmVycmlkZXNfXyxzPWkuZ2V0KHQpO2lmKG51bGw9PXMpdGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSBubyB0ZW1wbGF0ZSB2YXJpYWJsZSBwcm92aWRlZCBmb3I6ICIrdCk7T2JqZWN0LmFzc2lnbihlLHMpLGRlbGV0ZSBlLl9fb3ZlcnJpZGVzX199aWYoTGUoZSkpZm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IGk9ZVt0XTtzLmhhcyhpKSYmKGVbdF09cy5nZXQoaSkpfWVsc2UgZm9yKGNvbnN0W3QsaV1vZiBPYmplY3QuZW50cmllcyhlKSlzLmhhcyhpKSYmKGVbdF09cy5nZXQoaSkpfSksU3QodCl9c3RhdGljIGdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRQb3NpdGl2ZUNvbG9ycygpe3JldHVybntmaWxsOlp0LkJMVUUsc3Ryb2tlOlF0LkJMVUUsbGFiZWw6e2NvbG9yOnBpfX19c3RhdGljIGdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHROZWdhdGl2ZUNvbG9ycygpe3JldHVybntmaWxsOlp0Lk9SQU5HRSxzdHJva2U6UXQuT1JBTkdFLGxhYmVsOntjb2xvcjpwaX19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKXtyZXR1cm57ZmlsbDpadC5HUkFZLHN0cm9rZTpRdC5HUkFZLGxhYmVsOntjb2xvcjpwaX19fWdldFRlbXBsYXRlUGFyYW1ldGVycygpe2NvbnN0IHQ9bmV3IE1hcDt0LnNldChlaSxlLmdldENoYXJ0RGVmYXVsdHMoKSksdC5zZXQocmksZS5nZXRBeGlzRGVmYXVsdHMoKSksdC5zZXQodGksZS5nZXRDaGFydERlZmF1bHRzKCkubGVnZW5kKSx0LnNldChpaSxlLmdldENoYXJ0RGVmYXVsdHMoKS5sZWdlbmQuaXRlbSksdC5zZXQoc2ksZS5nZXRMZWdlbmRJdGVtTWFya2VyRGVmYXVsdHMoKSksdC5zZXQob2ksZS5nZXRBeGlzRGVmYXVsdHMoKS5sYWJlbCksdC5zZXQobmksZS5nZXRBeGlzRGVmYXVsdHMoKS5saW5lKSx0LnNldChhaSxlLmdldEF4aXNEZWZhdWx0cygpLnRpY2spLHQuc2V0KGxpLGUuZ2V0QXhpc0RlZmF1bHRzKCkuZ3JpZExpbmUpLHQuc2V0KGRpLGUuZ2V0U2VyaWVzRGVmYXVsdHMoKSksdC5zZXQoaGkse30pLHQuc2V0KGNpLGUuZ2V0Q2FydGVzaWFuU2VyaWVzTWFya2VyRGVmYXVsdHMoKSk7Y29uc3QgaT1uZXcgTWFwO3JldHVybiBpLnNldChKdCwhMSksaS5zZXQodWksIlZlcmRhbmEsIHNhbnMtc2VyaWYiKSxpLnNldChwaSwicmdiKDcwLCA3MCwgNzApIiksaS5zZXQoZ2ksIndoaXRlIiksaS5zZXQoZmksInJnYigxNDAsIDE0MCwgMTQwKSIpLGkuc2V0KHZpLCJyZ2IoMjI0LDIzNCwyNDEpIiksaS5zZXQoQ2ksInJnYigxOTUsIDE5NSwgMTk1KSIpLGkuc2V0KHlpLCJyZ2IoNzAsIDcwLCA3MCkiKSxpLnNldChtaSwid2hpdGUiKSxpLnNldChTaSwid2hpdGUiKSxpLnNldCh3aSwicmdiYSgwLCAwLCAwLCAwLjUpIiksaS5zZXQoRGksW1p0Lk9SQU5HRSxadC5ZRUxMT1csWnQuR1JFRU5dKSxpLnNldChPaSxbIiNmZmZmZmYiLCIjZTBlNWVhIiwiI2MxY2NkNSIsIiNhM2I0YzEiLCIjODU5Y2FkIl0pLGkuc2V0KEFpLFsiI2ZmZmZmZiIsIiNjNWNiZDEiLCIjYTRiMWJkIiwiIzg0OThhOSIsIiM2NDgwOTYiXSksaS5zZXQoVGksIndoaXRlIiksaS5zZXQoYmksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0UG9zaXRpdmVDb2xvcnMoKSksaS5zZXQoRWksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0TmVnYXRpdmVDb2xvcnMoKSksaS5zZXQoUmksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKSksaS5zZXQoeGksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKS5zdHJva2UpLHtleHRlbnNpb25zOnQscHJvcGVydGllczppfX19O0ZpLmNhcnRlc2lhbkF4aXNEZWZhdWx0PXtudW1iZXI6RmkuZ2V0QXhpc0RlZmF1bHRzKHtsaW5lOntlbmFibGVkOiExfX0pLGxvZzpGaS5nZXRBeGlzRGVmYXVsdHMoe2Jhc2U6MTAsbGluZTp7ZW5hYmxlZDohMX19KSxjYXRlZ29yeTpGaS5nZXRBeGlzRGVmYXVsdHMoe2dyb3VwUGFkZGluZ0lubmVyOi4xLGxhYmVsOnthdXRvUm90YXRlOiEwfSxncmlkTGluZTp7ZW5hYmxlZDohMX19KSx0aW1lOkZpLmdldEF4aXNEZWZhdWx0cyh7Z3JpZExpbmU6e2VuYWJsZWQ6ITF9fSksImdyb3VwZWQtY2F0ZWdvcnkiOkZpLmdldEF4aXNEZWZhdWx0cygpfTt2YXIgSWk9RmksTmk9e0JMVUU6IiM1MDkwZGMiLE9SQU5HRToiI2ZmYTAzYSIsR1JFRU46IiM0NTlkNTUiLENZQU46IiMzNGJmZTEiLFlFTExPVzoiI2UxY2MwMCIsVklPTEVUOiIjOTY2OWNiIixHUkFZOiIjYjViNWI1IixNQUdFTlRBOiIjYmQ1YWE3IixCUk9XTjoiIzhhNjIyNCIsUkVEOiIjZWY1NDUyIn0sR2k9e0JMVUU6IiM3NGE4ZTYiLE9SQU5HRToiI2ZmYmU3MCIsR1JFRU46IiM2Y2IxNzYiLENZQU46IiM3NWQ0ZWYiLFlFTExPVzoiI2Y2ZTU1OSIsVklPTEVUOiIjYWE4NmQ4IixHUkFZOiIjYTFhMWExIixNQUdFTlRBOiIjY2U3YWI5IixCUk9XTjoiIzk5N2I1MiIsUkVEOiIjZmY3ODcyIn0sa2k9e2ZpbGxzOk9iamVjdC52YWx1ZXMoTmkpLHN0cm9rZXM6T2JqZWN0LnZhbHVlcyhHaSl9LF9pPWNsYXNzIGUgZXh0ZW5kcyBJaXtzdGF0aWMgZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFBvc2l0aXZlQ29sb3JzKCl7cmV0dXJue2ZpbGw6TmkuQkxVRSxzdHJva2U6R2kuQkxVRSxsYWJlbDp7Y29sb3I6IndoaXRlIn19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0TmVnYXRpdmVDb2xvcnMoKXtyZXR1cm57ZmlsbDpOaS5PUkFOR0Usc3Ryb2tlOkdpLk9SQU5HRSxsYWJlbDp7Y29sb3I6IndoaXRlIn19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKXtyZXR1cm57ZmlsbDpOaS5HUkFZLHN0cm9rZTpHaS5HUkFZLGxhYmVsOntjb2xvcjoid2hpdGUifX19Z2V0VGVtcGxhdGVQYXJhbWV0ZXJzKCl7Y29uc3QgdD1zdXBlci5nZXRUZW1wbGF0ZVBhcmFtZXRlcnMoKTtyZXR1cm4gdC5wcm9wZXJ0aWVzLnNldChKdCwhMCksdC5wcm9wZXJ0aWVzLnNldChiaSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRQb3NpdGl2ZUNvbG9ycygpKSx0LnByb3BlcnRpZXMuc2V0KEVpLGUuZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdE5lZ2F0aXZlQ29sb3JzKCkpLHQucHJvcGVydGllcy5zZXQoUmksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKSksdC5wcm9wZXJ0aWVzLnNldCh4aSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRUb3RhbENvbG9ycygpLnN0cm9rZSksdC5wcm9wZXJ0aWVzLnNldChUaSwiIzE5MjIzMiIpLHQucHJvcGVydGllcy5zZXQocGksIndoaXRlIiksdC5wcm9wZXJ0aWVzLnNldChmaSwiIzdEOTFBMCIpLHQucHJvcGVydGllcy5zZXQodmksIiM1NDVBNkUiKSx0LnByb3BlcnRpZXMuc2V0KHlpLCJ3aGl0ZSIpLHQucHJvcGVydGllcy5zZXQoRGksW05pLk9SQU5HRSxOaS5ZRUxMT1csTmkuR1JFRU5dKSx0LnByb3BlcnRpZXMuc2V0KE9pLFsiIzE5MjgzNCIsIiMyNTM3NDYiLCIjMzI0ODU5IiwiIzNmNTk2YyIsIiM0ZDZhODAiXSksdC5wcm9wZXJ0aWVzLnNldChBaSxbIiMxOTI4MzQiLCIjM2I1MTY0IiwiIzQ5NjI3NSIsIiM1NzcyODciLCIjNjY4Mzk5Il0pLHQucHJvcGVydGllcy5zZXQoU2ksIiMxOTIyMzIiKSx0LnByb3BlcnRpZXMuc2V0KG1pLCIjMTkyMjMyIiksdH1nZXRQYWxldHRlKCl7cmV0dXJuIGtpfWNvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfX0sVmk9e0JMVUU6IiMyMTk2RjMiLE9SQU5HRToiI0ZGOTgwMCIsR1JFRU46IiM0Q0FGNTAiLENZQU46IiMwMEJDRDQiLFlFTExPVzoiI0ZGRUIzQiIsVklPTEVUOiIjN0U1N0MyIixHUkFZOiIjOUU5RTlFIixNQUdFTlRBOiIjRjA2MjkyIixCUk9XTjoiIzc5NTU0OCIsUkVEOiIjRjQ0MzM2In0sQmk9e0JMVUU6IiM5MENBRjkiLE9SQU5HRToiI0ZGQ0M4MCIsR1JFRU46IiNBNUQ2QTciLENZQU46IiM4MERFRUEiLFlFTExPVzoiI0ZGRjlDNCIsVklPTEVUOiIjQjM5RERCIixHUkFZOiIjRTBFMEUwIixNQUdFTlRBOiIjRjQ4RkIxIixCUk9XTjoiI0ExODg3RiIsUkVEOiIjRUY5QTlBIn0sSGk9e2ZpbGxzOk9iamVjdC52YWx1ZXMoVmkpLHN0cm9rZXM6T2JqZWN0LnZhbHVlcyhCaSl9LFdpPWNsYXNzIGUgZXh0ZW5kcyBfaXtzdGF0aWMgZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFBvc2l0aXZlQ29sb3JzKCl7cmV0dXJue2ZpbGw6VmkuQkxVRSxzdHJva2U6QmkuQkxVRSxsYWJlbDp7Y29sb3I6IndoaXRlIn19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0TmVnYXRpdmVDb2xvcnMoKXtyZXR1cm57ZmlsbDpWaS5SRUQsc3Ryb2tlOkJpLlJFRCxsYWJlbDp7Y29sb3I6IndoaXRlIn19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKXtyZXR1cm57ZmlsbDpWaS5HUkFZLHN0cm9rZTpCaS5HUkFZLGxhYmVsOntjb2xvcjoid2hpdGUifX19Z2V0VGVtcGxhdGVQYXJhbWV0ZXJzKCl7Y29uc3QgdD1zdXBlci5nZXRUZW1wbGF0ZVBhcmFtZXRlcnMoKTtyZXR1cm4gdC5wcm9wZXJ0aWVzLnNldChiaSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRQb3NpdGl2ZUNvbG9ycygpKSx0LnByb3BlcnRpZXMuc2V0KEVpLGUuZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdE5lZ2F0aXZlQ29sb3JzKCkpLHQucHJvcGVydGllcy5zZXQoUmksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKSksdC5wcm9wZXJ0aWVzLnNldChEaSxbVmkuT1JBTkdFLFZpLllFTExPVyxWaS5HUkVFTl0pLHQucHJvcGVydGllcy5zZXQoeGksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKS5zdHJva2UpLHR9Z2V0UGFsZXR0ZSgpe3JldHVybiBIaX19LGppPXtCTFVFOiIjMjE5NkYzIixPUkFOR0U6IiNGRjk4MDAiLEdSRUVOOiIjNENBRjUwIixDWUFOOiIjMDBCQ0Q0IixZRUxMT1c6IiNGRkVCM0IiLFZJT0xFVDoiIzdFNTdDMiIsR1JBWToiIzlFOUU5RSIsTUFHRU5UQToiI0YwNjI5MiIsQlJPV046IiM3OTU1NDgiLFJFRDoiI0Y0NDMzNiJ9LFVpPXtCTFVFOiIjMTU2NUMwIixPUkFOR0U6IiNFNjUxMDAiLEdSRUVOOiIjMkU3RDMyIixDWUFOOiIjMDA4MzhGIixZRUxMT1c6IiNGOUE4MjUiLFZJT0xFVDoiIzQ1MjdBMCIsR1JBWToiIzYxNjE2MSIsTUFHRU5UQToiI0MyMTg1QiIsQlJPV046IiM0RTM0MkUiLFJFRDoiI0I3MUMxQyJ9LHppPXtmaWxsczpPYmplY3QudmFsdWVzKGppKSxzdHJva2VzOk9iamVjdC52YWx1ZXMoVWkpfSxLaT1jbGFzcyBlIGV4dGVuZHMgSWl7c3RhdGljIGdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRQb3NpdGl2ZUNvbG9ycygpe3JldHVybntmaWxsOmppLkJMVUUsc3Ryb2tlOlVpLkJMVUUsbGFiZWw6e2NvbG9yOnBpfX19c3RhdGljIGdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHROZWdhdGl2ZUNvbG9ycygpe3JldHVybntmaWxsOmppLlJFRCxzdHJva2U6VWkuUkVELGxhYmVsOntjb2xvcjpwaX19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKXtyZXR1cm57ZmlsbDpqaS5HUkFZLHN0cm9rZTpVaS5HUkFZLGxhYmVsOntjb2xvcjpwaX19fWdldFRlbXBsYXRlUGFyYW1ldGVycygpe2NvbnN0IHQ9c3VwZXIuZ2V0VGVtcGxhdGVQYXJhbWV0ZXJzKCk7cmV0dXJuIHQucHJvcGVydGllcy5zZXQoYmksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0UG9zaXRpdmVDb2xvcnMoKSksdC5wcm9wZXJ0aWVzLnNldChFaSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHROZWdhdGl2ZUNvbG9ycygpKSx0LnByb3BlcnRpZXMuc2V0KFJpLGUuZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFRvdGFsQ29sb3JzKCkpLHQucHJvcGVydGllcy5zZXQoRGksW2ppLk9SQU5HRSxqaS5ZRUxMT1csamkuR1JFRU5dKSx0LnByb3BlcnRpZXMuc2V0KHhpLGUuZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFRvdGFsQ29sb3JzKCkuc3Ryb2tlKSx0fWdldFBhbGV0dGUoKXtyZXR1cm4geml9fSxZaT17QkxVRToiIzQzNmZmNCIsUFVSUExFOiIjOWE3YmZmIixNQUdFTlRBOiIjZDE2NWQyIixQSU5LOiIjZjA1OThiIixSRUQ6IiNmNDczNDgiLE9SQU5HRToiI2YyYTYwMiIsWUVMTE9XOiIjZTllMjAxIixHUkVFTjoiIzIxYjQ0OCIsQ1lBTjoiIzAwYjlhMiIsTU9ERVJBVEVfQkxVRToiIzAwYWVlNCJ9LCRpPXtCTFVFOiIjNjY5OGZmIixQVVJQTEU6IiNjMGEzZmYiLE1BR0VOVEE6IiNmYzhkZmMiLFBJTks6IiNmZjgyYjEiLFJFRDoiI2ZmOWI3MCIsT1JBTkdFOiIjZmZjZjRlIixZRUxMT1c6IiNmZmZmNTgiLEdSRUVOOiIjNThkZDcwIixDWUFOOiIjNTFlMmM5IixNT0RFUkFURV9CTFVFOiIjNGZkN2ZmIn0sWGk9e2ZpbGxzOk9iamVjdC52YWx1ZXMoWWkpLHN0cm9rZXM6T2JqZWN0LnZhbHVlcygkaSl9LHFpPWNsYXNzIGUgZXh0ZW5kcyBfaXtzdGF0aWMgZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFBvc2l0aXZlQ29sb3JzKCl7cmV0dXJue2ZpbGw6WWkuQkxVRSxzdHJva2U6JGkuQkxVRSxsYWJlbDp7Y29sb3I6IndoaXRlIn19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0TmVnYXRpdmVDb2xvcnMoKXtyZXR1cm57ZmlsbDpZaS5SRUQsc3Ryb2tlOiRpLlJFRCxsYWJlbDp7Y29sb3I6IndoaXRlIn19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKXtyZXR1cm57ZmlsbDoiI2JiYmJiYiIsc3Ryb2tlOiIjZWVlZWVlIixsYWJlbDp7Y29sb3I6IndoaXRlIn19fWdldFRlbXBsYXRlUGFyYW1ldGVycygpe2NvbnN0IHQ9c3VwZXIuZ2V0VGVtcGxhdGVQYXJhbWV0ZXJzKCk7cmV0dXJuIHQucHJvcGVydGllcy5zZXQoYmksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0UG9zaXRpdmVDb2xvcnMoKSksdC5wcm9wZXJ0aWVzLnNldChFaSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHROZWdhdGl2ZUNvbG9ycygpKSx0LnByb3BlcnRpZXMuc2V0KFJpLGUuZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFRvdGFsQ29sb3JzKCkpLHQucHJvcGVydGllcy5zZXQoRGksW1lpLkJMVUUsWWkuUkVEXSksdC5wcm9wZXJ0aWVzLnNldCh4aSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRUb3RhbENvbG9ycygpLnN0cm9rZSksdH1nZXRQYWxldHRlKCl7cmV0dXJuIFhpfX0sWmk9e0JMVUU6IiM0MzZmZjQiLFBVUlBMRToiIzlhN2JmZiIsTUFHRU5UQToiI2QxNjVkMiIsUElOSzoiI2YwNTk4YiIsUkVEOiIjZjQ3MzQ4IixPUkFOR0U6IiNmMmE2MDIiLFlFTExPVzoiI2U5ZTIwMSIsR1JFRU46IiMyMWI0NDgiLENZQU46IiMwMGI5YTIiLE1PREVSQVRFX0JMVUU6IiMwMGFlZTQifSxRaT17QkxVRToiIzIzNDZjOSIsUFVSUExFOiIjNzY1M2Q0IixNQUdFTlRBOiIjYTczZGE5IixQSU5LOiIjYzMyZDY2IixSRUQ6IiNjODRiMWMiLE9SQU5HRToiI2M4N2YwMCIsWUVMTE9XOiIjYzFiOTAwIixHUkVFTjoiIzAwOGMxYyIsQ1lBTjoiIzAwOTI3YyIsTU9ERVJBVEVfQkxVRToiIzAwODdiYiJ9LEppPXtmaWxsczpPYmplY3QudmFsdWVzKFppKSxzdHJva2VzOk9iamVjdC52YWx1ZXMoUWkpfSxlcz1jbGFzcyBlIGV4dGVuZHMgSWl7c3RhdGljIGdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRQb3NpdGl2ZUNvbG9ycygpe3JldHVybntmaWxsOlppLkJMVUUsc3Ryb2tlOlFpLkJMVUUsbGFiZWw6e2NvbG9yOnBpfX19c3RhdGljIGdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHROZWdhdGl2ZUNvbG9ycygpe3JldHVybntmaWxsOlppLlJFRCxzdHJva2U6UWkuUkVELGxhYmVsOntjb2xvcjpwaX19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKXtyZXR1cm57ZmlsbDoiI2JiYmJiYiIsc3Ryb2tlOiIjODg4ODg4IixsYWJlbDp7Y29sb3I6cGl9fX1nZXRUZW1wbGF0ZVBhcmFtZXRlcnMoKXtjb25zdCB0PXN1cGVyLmdldFRlbXBsYXRlUGFyYW1ldGVycygpO3JldHVybiB0LnByb3BlcnRpZXMuc2V0KGJpLGUuZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFBvc2l0aXZlQ29sb3JzKCkpLHQucHJvcGVydGllcy5zZXQoRWksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0TmVnYXRpdmVDb2xvcnMoKSksdC5wcm9wZXJ0aWVzLnNldChSaSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRUb3RhbENvbG9ycygpKSx0LnByb3BlcnRpZXMuc2V0KERpLFtaaS5CTFVFLFppLlJFRF0pLHQucHJvcGVydGllcy5zZXQoeGksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKS5zdHJva2UpLHR9Z2V0UGFsZXR0ZSgpe3JldHVybiBKaX19LHRzPXtCTFVFOiIjNDQ3MkM0IixPUkFOR0U6IiNFRDdEMzEiLEdSQVk6IiNBNUE1QTUiLFlFTExPVzoiI0ZGQzAwMCIsTU9ERVJBVEVfQkxVRToiIzVCOUJENSIsR1JFRU46IiM3MEFENDciLERBUktfR1JBWToiIzdCN0I3QiIsREFSS19CTFVFOiIjMjY0NDc4IixWRVJZX0RBUktfR1JBWToiIzYzNjM2MyIsREFSS19ZRUxMT1c6IiM5OTczMDAifSxpcz17QkxVRToiIzY4OTllZSIsT1JBTkdFOiIjZmZhNTVkIixHUkFZOiIjY2RjZGNkIixZRUxMT1c6IiNmZmVhNTMiLE1PREVSQVRFX0JMVUU6IiM4MmMzZmYiLEdSRUVOOiIjOTZkNTZmIixEQVJLX0dSQVk6IiNhMWExYTEiLERBUktfQkxVRToiIzQ3Njg5ZiIsVkVSWV9EQVJLX0dSQVk6IiM4Nzg3ODciLERBUktfWUVMTE9XOiIjYzA5OTNkIn0sc3M9e2ZpbGxzOk9iamVjdC52YWx1ZXModHMpLHN0cm9rZXM6T2JqZWN0LnZhbHVlcyhpcyl9LHJzPWNsYXNzIGUgZXh0ZW5kcyBfaXtzdGF0aWMgZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFBvc2l0aXZlQ29sb3JzKCl7cmV0dXJue2ZpbGw6dHMuQkxVRSxzdHJva2U6aXMuQkxVRSxsYWJlbDp7Y29sb3I6IndoaXRlIn19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0TmVnYXRpdmVDb2xvcnMoKXtyZXR1cm57ZmlsbDp0cy5PUkFOR0Usc3Ryb2tlOmlzLk9SQU5HRSxsYWJlbDp7Y29sb3I6IndoaXRlIn19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKXtyZXR1cm57ZmlsbDp0cy5HUkFZLHN0cm9rZTppcy5HUkFZLGxhYmVsOntjb2xvcjoid2hpdGUifX19Z2V0VGVtcGxhdGVQYXJhbWV0ZXJzKCl7Y29uc3QgdD1zdXBlci5nZXRUZW1wbGF0ZVBhcmFtZXRlcnMoKTtyZXR1cm4gdC5wcm9wZXJ0aWVzLnNldChiaSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRQb3NpdGl2ZUNvbG9ycygpKSx0LnByb3BlcnRpZXMuc2V0KEVpLGUuZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdE5lZ2F0aXZlQ29sb3JzKCkpLHQucHJvcGVydGllcy5zZXQoUmksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKSksdC5wcm9wZXJ0aWVzLnNldChEaSxbdHMuT1JBTkdFLHRzLllFTExPVyx0cy5HUkVFTl0pLHQucHJvcGVydGllcy5zZXQoeGksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKS5zdHJva2UpLHR9Z2V0UGFsZXR0ZSgpe3JldHVybiBzc319LG9zPXtCTFVFOiIjNTI4MWQ1IixPUkFOR0U6IiNmZjhkNDQiLEdSQVk6IiNiNWI1YjUiLFlFTExPVzoiI2ZmZDAyZiIsTU9ERVJBVEVfQkxVRToiIzZhYWJlNiIsR1JFRU46IiM3ZmJkNTciLERBUktfR1JBWToiIzhhOGE4YSIsREFSS19CTFVFOiIjMzM1Mjg3IixWRVJZX0RBUktfR1JBWToiIzcxNzE3MSIsREFSS19ZRUxMT1c6IiNhOTgyMjAifSxucz17QkxVRToiIzIxNGQ5YiIsT1JBTkdFOiIjYzI1NjAwIixHUkFZOiIjN2Y3ZjdmIixZRUxMT1c6IiNkNTk4MDAiLE1PREVSQVRFX0JMVUU6IiMzNTc1YWMiLEdSRUVOOiIjNGI4NjFhIixEQVJLX0dSQVk6IiM1NzU3NTciLERBUktfQkxVRToiIzA2MjI1MyIsVkVSWV9EQVJLX0dSQVk6IiM0MTQxNDEiLERBUktfWUVMTE9XOiIjNzM0ZjAwIn0sYXM9e2ZpbGxzOk9iamVjdC52YWx1ZXMob3MpLHN0cm9rZXM6T2JqZWN0LnZhbHVlcyhucyl9LGxzPWNsYXNzIGUgZXh0ZW5kcyBJaXtzdGF0aWMgZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFBvc2l0aXZlQ29sb3JzKCl7cmV0dXJue2ZpbGw6b3MuQkxVRSxzdHJva2U6bnMuQkxVRSxsYWJlbDp7Y29sb3I6cGl9fX1zdGF0aWMgZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdE5lZ2F0aXZlQ29sb3JzKCl7cmV0dXJue2ZpbGw6b3MuT1JBTkdFLHN0cm9rZTpucy5PUkFOR0UsbGFiZWw6e2NvbG9yOnBpfX19c3RhdGljIGdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRUb3RhbENvbG9ycygpe3JldHVybntmaWxsOm9zLkdSQVksc3Ryb2tlOm5zLkdSQVksbGFiZWw6e2NvbG9yOnBpfX19Z2V0VGVtcGxhdGVQYXJhbWV0ZXJzKCl7Y29uc3QgdD1zdXBlci5nZXRUZW1wbGF0ZVBhcmFtZXRlcnMoKTtyZXR1cm4gdC5wcm9wZXJ0aWVzLnNldChiaSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRQb3NpdGl2ZUNvbG9ycygpKSx0LnByb3BlcnRpZXMuc2V0KEVpLGUuZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdE5lZ2F0aXZlQ29sb3JzKCkpLHQucHJvcGVydGllcy5zZXQoUmksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKSksdC5wcm9wZXJ0aWVzLnNldChEaSxbb3MuT1JBTkdFLG9zLllFTExPVyxvcy5HUkVFTl0pLHQucHJvcGVydGllcy5zZXQoeGksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0VG90YWxDb2xvcnMoKS5zdHJva2UpLHR9Z2V0UGFsZXR0ZSgpe3JldHVybiBhc319LGRzPXtCTFVFOiIjMDA4M2ZmIixPUkFOR0U6IiNmZjY2MDAiLEdSRUVOOiIjMDBhZjAwIixDWUFOOiIjMDBjY2ZmIixZRUxMT1c6IiNmN2M3MDAiLFZJT0xFVDoiI2FjMjZmZiIsR1JBWToiI2E3YTdiNyIsTUFHRU5UQToiI2U4MDBjNSIsQlJPV046IiNiNTQzMDAiLFJFRDoiI2ZmMDAwMCJ9LGNzPXtCTFVFOiIjNjdiN2ZmIixPUkFOR0U6IiNmZmMyNGQiLEdSRUVOOiIjNWNjODZmIixDWUFOOiIjNTRlYmZmIixWSU9MRVQ6IiNjMThhZmYiLFlFTExPVzoiI2ZmZjY1MyIsR1JBWToiI2FlYWVhZSIsTUFHRU5UQToiI2YwNzhkNCIsQlJPV046IiNiYTg0MzgiLFJFRDoiI2ZmNzI2ZSJ9LGhzPXtmaWxsczpPYmplY3QudmFsdWVzKGRzKSxzdHJva2VzOk9iamVjdC52YWx1ZXMoY3MpfSx1cz1jbGFzcyBlIGV4dGVuZHMgX2l7c3RhdGljIGdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRQb3NpdGl2ZUNvbG9ycygpe3JldHVybntmaWxsOmRzLkJMVUUsc3Ryb2tlOmNzLkJMVUUsbGFiZWw6e2NvbG9yOiJ3aGl0ZSJ9fX1zdGF0aWMgZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdE5lZ2F0aXZlQ29sb3JzKCl7cmV0dXJue2ZpbGw6ZHMuT1JBTkdFLHN0cm9rZTpjcy5PUkFOR0UsbGFiZWw6e2NvbG9yOiJ3aGl0ZSJ9fX1zdGF0aWMgZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFRvdGFsQ29sb3JzKCl7cmV0dXJue2ZpbGw6ZHMuR1JBWSxzdHJva2U6Y3MuR1JBWSxsYWJlbDp7Y29sb3I6IndoaXRlIn19fWdldFRlbXBsYXRlUGFyYW1ldGVycygpe2NvbnN0IHQ9c3VwZXIuZ2V0VGVtcGxhdGVQYXJhbWV0ZXJzKCk7cmV0dXJuIHQucHJvcGVydGllcy5zZXQoYmksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0UG9zaXRpdmVDb2xvcnMoKSksdC5wcm9wZXJ0aWVzLnNldChFaSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHROZWdhdGl2ZUNvbG9ycygpKSx0LnByb3BlcnRpZXMuc2V0KFJpLGUuZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFRvdGFsQ29sb3JzKCkpLHQucHJvcGVydGllcy5zZXQoRGksW2RzLk9SQU5HRSxkcy5ZRUxMT1csZHMuR1JFRU5dKSx0LnByb3BlcnRpZXMuc2V0KHhpLGUuZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFRvdGFsQ29sb3JzKCkuc3Ryb2tlKSx0fWdldFBhbGV0dGUoKXtyZXR1cm4gaHN9fSxwcz17QkxVRToiIzAwODNmZiIsT1JBTkdFOiIjZmY2NjAwIixHUkVFTjoiIzAwYWYwMCIsQ1lBTjoiIzAwY2NmZiIsWUVMTE9XOiIjZjdjNzAwIixWSU9MRVQ6IiNhYzI2ZmYiLEdSQVk6IiNhN2E3YjciLE1BR0VOVEE6IiNlODAwYzUiLEJST1dOOiIjYjU0MzAwIixSRUQ6IiNmZjAwMDAifSxncz17QkxVRToiIzBmNjhjMCIsT1JBTkdFOiIjZDQ3MTAwIixHUkVFTjoiIzAwNzkyMiIsQ1lBTjoiIzAwOWFjMiIsVklPTEVUOiIjYmNhNDAwIixZRUxMT1c6IiM3NTNjYWMiLEdSQVk6IiM2NDY0NjQiLE1BR0VOVEE6IiM5YjI2ODUiLEJST1dOOiIjNmMzYjAwIixSRUQ6IiNjYjAwMjEifSxtcz17ZmlsbHM6T2JqZWN0LnZhbHVlcyhwcyksc3Ryb2tlczpPYmplY3QudmFsdWVzKGdzKX0sZnM9Y2xhc3MgZSBleHRlbmRzIElpe3N0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0UG9zaXRpdmVDb2xvcnMoKXtyZXR1cm57ZmlsbDpwcy5CTFVFLHN0cm9rZTpncy5CTFVFLGxhYmVsOntjb2xvcjpwaX19fXN0YXRpYyBnZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0TmVnYXRpdmVDb2xvcnMoKXtyZXR1cm57ZmlsbDpwcy5PUkFOR0Usc3Ryb2tlOmdzLk9SQU5HRSxsYWJlbDp7Y29sb3I6cGl9fX1zdGF0aWMgZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFRvdGFsQ29sb3JzKCl7cmV0dXJue2ZpbGw6cHMuR1JBWSxzdHJva2U6Z3MuR1JBWSxsYWJlbDp7Y29sb3I6cGl9fX1nZXRUZW1wbGF0ZVBhcmFtZXRlcnMoKXtjb25zdCB0PXN1cGVyLmdldFRlbXBsYXRlUGFyYW1ldGVycygpO3JldHVybiB0LnByb3BlcnRpZXMuc2V0KGJpLGUuZ2V0V2F0ZXJmYWxsU2VyaWVzRGVmYXVsdFBvc2l0aXZlQ29sb3JzKCkpLHQucHJvcGVydGllcy5zZXQoRWksZS5nZXRXYXRlcmZhbGxTZXJpZXNEZWZhdWx0TmVnYXRpdmVDb2xvcnMoKSksdC5wcm9wZXJ0aWVzLnNldChSaSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRUb3RhbENvbG9ycygpKSx0LnByb3BlcnRpZXMuc2V0KERpLFtwcy5PUkFOR0UscHMuWUVMTE9XLHBzLkdSRUVOXSksdC5wcm9wZXJ0aWVzLnNldCh4aSxlLmdldFdhdGVyZmFsbFNlcmllc0RlZmF1bHRUb3RhbENvbG9ycygpLnN0cm9rZSksdH1nZXRQYWxldHRlKCl7cmV0dXJuIG1zfX0sdnM9KCk9Pm5ldyBJaSxDcz0oKT0+bmV3IF9pLHlzPXt1bmRlZmluZWQ6dnMsbnVsbDp2cywiYWctZGVmYXVsdCI6dnMsImFnLXNoZWV0cyI6KCk9Pm5ldyBscywiYWctcG9seWNocm9tYSI6KCk9Pm5ldyBlcywiYWctdml2aWQiOigpPT5uZXcgZnMsImFnLW1hdGVyaWFsIjooKT0+bmV3IEtpfSxTcz1tKG0oe30se3VuZGVmaW5lZDpDcyxudWxsOkNzLCJhZy1kZWZhdWx0LWRhcmsiOkNzLCJhZy1zaGVldHMtZGFyayI6KCk9Pm5ldyBycywiYWctcG9seWNocm9tYS1kYXJrIjooKT0+bmV3IHFpLCJhZy12aXZpZC1kYXJrIjooKT0+bmV3IHVzLCJhZy1tYXRlcmlhbC1kYXJrIjooKT0+bmV3IFdpfSkseXMpO2Z1bmN0aW9uIHdzKGUpe3JldHVybiB2b2lkIDA9PT1lfHwic3RyaW5nIj09dHlwZW9mIGV8fGUgaW5zdGFuY2VvZiBJaT9lOiJvYmplY3QiPT10eXBlb2YgZT9mdW5jdGlvbihlKXtpZihudWxsPT09ZSlyZXR1cm47bGV0IHQ9ITA7Y29uc3R7YmFzZVRoZW1lOmkscGFsZXR0ZTpzLG92ZXJyaWRlczpyfT1lO2lmKHZvaWQgMCE9PWkmJiJzdHJpbmciIT10eXBlb2YgaSYmIm9iamVjdCIhPXR5cGVvZiBpJiYoTC53YXJuKGBpbnZhbGlkIHRoZW1lLmJhc2VUaGVtZSB0eXBlICR7dHlwZW9mIGl9LCBleHBlY3RlZCAoc3RyaW5nIHwgb2JqZWN0KS5gKSx0PSExKSx2b2lkIDAhPT1yJiYib2JqZWN0IiE9dHlwZW9mIHImJihMLndhcm4oYGludmFsaWQgdGhlbWUub3ZlcnJpZGVzIHR5cGUgJHt0eXBlb2Ygcn0sIGV4cGVjdGVkIG9iamVjdC5gKSx0PSExKSwib2JqZWN0Ij09dHlwZW9mIHMpe2lmKG51bGwhPT1zKXtjb25zdHtmaWxsczplLHN0cm9rZXM6aX09czt2b2lkIDA9PT1lfHxBcnJheS5pc0FycmF5KGUpfHwoTC53YXJuKCJ0aGVtZS5vdmVycmlkZXMuZmlsbHMgbXVzdCBiZSB1bmRlZmluZWQgb3IgYW4gYXJyYXkiKSx0PSExKSx2b2lkIDA9PT1pfHxBcnJheS5pc0FycmF5KGkpfHwoTC53YXJuKCJ0aGVtZS5vdmVycmlkZXMuc3Ryb2tlcyBtdXN0IGJlIHVuZGVmaW5lZCBvciBhbiBhcnJheSIpLHQ9ITEpfX1lbHNlIHZvaWQgMCE9PXMmJihMLndhcm4oYGludmFsaWQgdGhlbWUucGFsZXR0ZSB0eXBlICR7dHlwZW9mIHN9LCBleHBlY3RlZCBvYmplY3QuYCksdD0hMSk7cmV0dXJuIHQ/ZTp2b2lkIDB9KGUpOnZvaWQgTC53YXJuKGBpbnZhbGlkIHRoZW1lIHZhbHVlIHR5cGUgJHt0eXBlb2YgZX0sIGV4cGVjdGVkIG9iamVjdCBvciBzdHJpbmcuYCl9ZnVuY3Rpb24gYnMoZSl7bGV0IHQ9d3MoZSk7aWYodCBpbnN0YW5jZW9mIElpKXJldHVybiB0O2lmKHZvaWQgMD09PXR8fCJzdHJpbmciPT10eXBlb2YgdCl7Y29uc3QgZT1Tc1t0XTtyZXR1cm4gZT9lKCk6KEwud2Fybk9uY2UoYHRoZSB0aGVtZSBbJHt0fV0gaXMgaW52YWxpZCwgdXNpbmcgW2FnLWRlZmF1bHRdIGluc3RlYWQuYCksdnMoKSl9Y29uc3QgaT1bXTtsZXQgcztmb3IoOyJvYmplY3QiPT10eXBlb2YgdDspaS5wdXNoKHQub3ZlcnJpZGVzKSxudWxsIT1zfHwocz10LnBhbGV0dGUpLHQ9dC5iYXNlVGhlbWU7Y29uc3Qgcj17YmFzZVRoZW1lOnQsb3ZlcnJpZGVzOlhlKC4uLmkpLHBhbGV0dGU6c307cmV0dXJuIG5ldygoci5iYXNlVGhlbWU/YnMoci5iYXNlVGhlbWUpOnZzKCkpLmNvbnN0cnVjdG9yKShyKX1mdW5jdGlvbiBFcyhlKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuO2xldCB0PTEvMCxpPS0xLzA7Zm9yKGxldCBzIG9mIGUpcyBpbnN0YW5jZW9mIERhdGUmJihzPXMuZ2V0VGltZSgpKSwibnVtYmVyIj09dHlwZW9mIHMmJihzPHQmJih0PXMpLHM+aSYmKGk9cykpO2NvbnN0IHM9W3QsaV07cmV0dXJuIHMuZXZlcnkoaXNGaW5pdGUpP3M6dm9pZCAwfWZ1bmN0aW9uIFJzKGUsdCxpKXtyZXR1cm4geHMoZSx0LGkpLmV4dGVudH1mdW5jdGlvbiB4cyhlLHQsaSl7dmFyIHM7bGV0IHI9ITE7cmV0dXJuIGUubGVuZ3RoPjImJihlPW51bGwhPShzPUVzKGUpKT9zOltOYU4sTmFOXSksaXNOYU4odCl8fChyfHwocj10PmVbMF0pLGU9W3QsZVsxXV0pLGlzTmFOKGkpfHwocnx8KHI9aTxlWzFdKSxlPVtlWzBdLGldKSxlWzBdPmVbMV0mJihlPVtdKSx7ZXh0ZW50OmUsY2xpcHBlZDpyfX1mdW5jdGlvbiBUcyhlLHQpe2lmKG51bGw9PWV8fG51bGw9PXR8fGUubGVuZ3RoIT09dC5sZW5ndGgpcmV0dXJuITE7Zm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKyspaWYoQXJyYXkuaXNBcnJheShlW2ldKSYmQXJyYXkuaXNBcnJheSh0W2ldKSl7aWYoIVRzKGVbaV0sdFtpXSkpcmV0dXJuITF9ZWxzZSBpZihlW2ldIT09dFtpXSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBEcyhlKXtyZXR1cm4gdm9pZCAwPT09ZT9bXTpBcnJheS5pc0FycmF5KGUpP2U6W2VdfWZ1bmN0aW9uIE9zKGUpe3JldHVybiBBcnJheS5mcm9tKG5ldyBTZXQoZSkpfWZ1bmN0aW9uIEFzKGUsdCl7cmV0dXJuIGUucmVkdWNlKChlLGkpPT57Y29uc3Qgcz10KGkpO3JldHVybiBudWxsIT1lW3NdfHwoZVtzXT1bXSksZVtzXS5wdXNoKGkpLGV9LHt9KX1mdW5jdGlvbiBQcyhlLHQsaT0wKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuW107Y29uc3Qgcz1bXTtmb3IobGV0IHI9MDtyPHQ7cisrKXMucHVzaChlLmF0KChyK2kpJWUubGVuZ3RoKSk7cmV0dXJuIHN9ZnVuY3Rpb24gTXMoZSl7Y29uc3QgdD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dm9pZCAwO3JldHVybiBudWxsPT10P3ZvaWQgMDp0W2VdfXZhciBMcz1EYXRlLm5vdygpLEZzPXtjcmVhdGU6KC4uLmUpPT5PYmplY3QuYXNzaWduKCguLi50KT0+e0ZzLmNoZWNrKC4uLmUpJiYoImZ1bmN0aW9uIj09dHlwZW9mIHRbMF0mJih0PURzKHRbMF0oKSkpLCgoKT0+e2NvbnN0IGU9RGF0ZS5ub3coKS1McztpZihlPjJlMyl7Y29uc3QgdD0oTWF0aC5mbG9vcihlLzEwMCkvMTApLnRvRml4ZWQoMSk7TC5sb2coYCoqKiogJHt0fXMgc2luY2UgbGFzdCBsb2cgbWVzc2FnZSAqKioqYCl9THM9RGF0ZS5ub3coKX0pKCksTC5sb2coLi4udCkpfSx7Y2hlY2s6KCk9PkZzLmNoZWNrKC4uLmUpfSksY2hlY2soLi4uZSl7MD09PWUubGVuZ3RoJiZlLnB1c2goITApO3JldHVybiBEcyhNcygiYWdDaGFydHNEZWJ1ZyIpKS5zb21lKHQ9PmUuaW5jbHVkZXModCkpfX0sSXM9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt2YXIgaSxzO2NvbnN0IHI9e3NoYWxsb3c6WyJkYXRhIl19LG89U3QoZSxyKSxuPXRoaXMub3B0aW9uc1R5cGUobyk7dGhpcy5zYW5pdHlDaGVja0FuZENsZWFudXAobyksdGhpcy51c2VyT3B0aW9ucz1vLHRoaXMuYWN0aXZlVGhlbWU9YnMoby50aGVtZSksdGhpcy5zZXJpZXNEZWZhdWx0cz10aGlzLmdldE9wdGlvbnNEZWZhdWx0cyhvKSx0aGlzLnNwZWNpYWxPdmVycmlkZXM9dGhpcy5zcGVjaWFsT3ZlcnJpZGVzRGVmYXVsdHMobSh7fSx0KSk7Y29uc3QgYT10aGlzLmdldFNlcmllc1RoZW1lQ29uZmlnKG4pLHtheGVzOmw9e30sc2VyaWVzOmR9PWEsYz12KGEsWyJheGVzIiwic2VyaWVzIl0pO3RoaXMucHJvY2Vzc2VkT3B0aW9ucz1TdChYZSh0aGlzLnVzZXJPcHRpb25zLGMsdGhpcy5zZXJpZXNEZWZhdWx0cyksciksdGhpcy5wcm9jZXNzQXhlc09wdGlvbnModGhpcy5wcm9jZXNzZWRPcHRpb25zLGwpLHRoaXMucHJvY2Vzc1Nlcmllc09wdGlvbnModGhpcy5wcm9jZXNzZWRPcHRpb25zKSwodXQodGhpcy5wcm9jZXNzZWRPcHRpb25zKXx8ZnVuY3Rpb24oZSl7Y29uc3QgdD1odChlKTtyZXR1cm4gZ3QoZSkmJiJwaWUiIT09dCYmImRvbnV0IiE9PXR9KHRoaXMucHJvY2Vzc2VkT3B0aW9ucykpJiZudWxsPT0obnVsbD09KGk9dGhpcy5wcm9jZXNzZWRPcHRpb25zLmxlZ2VuZCk/dm9pZCAwOmkuZW5hYmxlZCkmJihudWxsIT0ocz10aGlzLnByb2Nlc3NlZE9wdGlvbnMpLmxlZ2VuZHx8KHMubGVnZW5kPXt9KSx0aGlzLnByb2Nlc3NlZE9wdGlvbnMubGVnZW5kLmVuYWJsZWQ9dGhpcy5wcm9jZXNzZWRPcHRpb25zLnNlcmllcy5sZW5ndGg+MSksdGhpcy5lbmFibGVDb25maWd1cmVkT3B0aW9ucyh0aGlzLnByb2Nlc3NlZE9wdGlvbnMpLHVlLmlzRW50ZXJwcmlzZXx8bXQodGhpcy5wcm9jZXNzZWRPcHRpb25zKX1nZXRPcHRpb25zKCl7dmFyIGU7cmV0dXJuIG51bGwhPShlPXRoaXMucHJvY2Vzc2VkT3B0aW9ucyk/ZTp7fX1kaWZmT3B0aW9ucyhlKXtyZXR1cm4geXQoZSx0aGlzLnByb2Nlc3NlZE9wdGlvbnMpfWdldFNlcmllc1RoZW1lQ29uZmlnKGUpe3ZhciB0LGk7cmV0dXJuIFN0KG51bGwhPShpPW51bGw9PSh0PXRoaXMuYWN0aXZlVGhlbWUpP3ZvaWQgMDp0LmNvbmZpZ1tlXSk/aTp7fSl9Z2V0T3B0aW9uc0RlZmF1bHRzKGUpe2NvbnN0IHQ9dGhpcy5vcHRpb25zVHlwZShlKSxpPVN0KG51bGwhPShzPUR0W3RdKT9zOnt9KTt2YXIgcztyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQsaTtsZXQgcztmb3IoY29uc3QgciBvZiBudWxsIT0odD1lLnNlcmllcyk/dDpbXSl7Y29uc3R7dHlwZTplPSJsaW5lIn09cix0PW51bGw9PShpPU50W2VdKT92b2lkIDA6aS5jYWxsKE50LHIpO2lmKG51bGwhPXQpe2lmKG51bGwhPXMmJnMhPXQpdGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSBUaGUgcHJvdmlkZWQgc2VyaWVzIGhhdmUgaW5jb21wYXRpYmxlIGRpcmVjdGlvbnMiKTtzPXR9fXJldHVybiBzfShlKSYmdGhpcy5zd2FwQXhlc1Bvc2l0aW9uKGkpLGl9b3B0aW9uc1R5cGUoZSl7dmFyIHQsaSxzO3JldHVybiBudWxsIT0ocz1udWxsPT0oaT1udWxsPT0odD1lLnNlcmllcyk/dm9pZCAwOnRbMF0pP3ZvaWQgMDppLnR5cGUpP3M6ImxpbmUifXNhbml0eUNoZWNrQW5kQ2xlYW51cChlKXt2YXIgdDt0aGlzLmRlcHJlY2F0aW9uV2FybmluZ3MoZSksdGhpcy5heGVzVHlwZUludGVncml0eShlKSx0aGlzLnNlcmllc1R5cGVJbnRlZ3JpdHkoZSksdGhpcy5zb2xvU2VyaWVzSW50ZWdyaXR5KGUpLHRoaXMucmVtb3ZlRGlzYWJsZWRPcHRpb25zKGUpLHRoaXMucmVtb3ZlTGVmdG92ZXJTeW1ib2xzKGUpLChudWxsPT0odD1lLnNlcmllcyk/dm9pZCAwOnQuc29tZShlPT4iYnVsbGV0Ij09PWUudHlwZSkpJiZudWxsIT1lLnN5bmMmJiExIT09ZS5zeW5jLmVuYWJsZWQmJihMLndhcm5PbmNlKCJidWxsZXQgc2VyaWVzIGNhbm5vdCBiZSBzeW5jZWQsIGRpc2FibGluZyBzeW5jaHJvbml6YXRpb24uIiksZGVsZXRlIGUuc3luYyl9c3dhcEF4ZXNQb3NpdGlvbihlKXt2YXIgdDtpZih1dChlKSl7Y29uc3RbaSxzXT1udWxsIT0odD1lLmF4ZXMpP3Q6W107ZS5heGVzPVtmKG0oe30saSkse3Bvc2l0aW9uOnMucG9zaXRpb259KSxmKG0oe30scykse3Bvc2l0aW9uOmkucG9zaXRpb259KV19fXByb2Nlc3NBeGVzT3B0aW9ucyhlLHQpeyJheGVzImluIGUmJihlLmF4ZXM9ZS5heGVzLm1hcChlPT57dmFyIGkscyxyLG87Y29uc3Qgbj1YZShudWxsPT0oaT10aGlzLnNlcmllc0RlZmF1bHRzLmF4ZXMpP3ZvaWQgMDppLmZpbmQoKHt0eXBlOnR9KT0+dD09PWUudHlwZSksbnVsbD09KHM9dFtlLnR5cGVdKT92b2lkIDA6c1tlLnBvc2l0aW9uXSx0W2UudHlwZV0pLHtjcm9zc0xpbmVzOmF9PW4sbD12KG4sWyJjcm9zc0xpbmVzIl0pO2UuY3Jvc3NMaW5lcyYmKGUuY3Jvc3NMaW5lcz1xZShlLmNyb3NzTGluZXMsYSkpO2NvbnN0IGQ9bnVsbD09KHI9bC5ncmlkTGluZSk/dm9pZCAwOnIuc3R5bGU7KG51bGw9PShvPWUuZ3JpZExpbmUpP3ZvaWQgMDpvLnN0eWxlKSYmKG51bGw9PWQ/dm9pZCAwOmQubGVuZ3RoKSYmKGUuZ3JpZExpbmUuc3R5bGU9ZS5ncmlkTGluZS5zdHlsZS5tYXAoKGUsdCk9Pm51bGwhPWUuc3Ryb2tlfHxudWxsIT1lLmxpbmVEYXNoP1hlKGUsZC5hdCh0JWQubGVuZ3RoKSk6ZSkpO2NvbnN0IGM9WGUoZSxsKSx7dG9wOmgscmlnaHQ6dSxib3R0b206cCxsZWZ0Omd9PWM7cmV0dXJuIHYoYyxbInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCJdKX0pKX1wcm9jZXNzU2VyaWVzT3B0aW9ucyhlKXtjb25zdCB0PXRoaXMuZ2V0RGVmYXVsdFNlcmllc1R5cGUoZSksaT10aGlzLmdldFRvb2x0aXBQb3NpdGlvbkRlZmF1bHRzKGUpLHM9e2NvbG91ckluZGV4OjAsdXNlclBhbGV0dGU6Qm9vbGVhbihfZShlLnRoZW1lKSYmZS50aGVtZS5wYWxldHRlKX0scj1lLnNlcmllcy5tYXAoZT0+e3ZhciByO251bGwhPWUudHlwZXx8KGUudHlwZT10KTtjb25zdCBvPW51bGwhPShyPXRoaXMuZ2V0U2VyaWVzVGhlbWVDb25maWcoZS50eXBlKS5zZXJpZXMpP3I6e30se2lubmVyTGFiZWxzOm59PW8sYT12KG8sWyJpbm5lckxhYmVscyJdKSxsPVhlKHRoaXMuZ2V0U2VyaWVzR3JvdXBpbmdPcHRpb25zKGUpLGUsaSxhLHRoaXMuZ2V0U2VyaWVzUGFsZXR0ZShlLnR5cGUscykpO3JldHVybiBsLmlubmVyTGFiZWxzJiYobC5pbm5lckxhYmVscz1xZShsLmlubmVyTGFiZWxzLG4pKSx0aGlzLmFjdGl2ZVRoZW1lLnRlbXBsYXRlVGhlbWUobCl9KTtlLnNlcmllcz10aGlzLnNldFNlcmllc0dyb3VwaW5nT3B0aW9ucyhyKX1nZXRTZXJpZXNQYWxldHRlKGUsdCl7Y29uc3QgaT1mdW5jdGlvbihlKXtyZXR1cm4gUHRbZV19KGUpLHtjb2xvdXJJbmRleDpzLHVzZXJQYWxldHRlOnJ9PXQse2ZpbGxzOm89W10sc3Ryb2tlczpuPVtdfT10aGlzLmFjdGl2ZVRoZW1lLnBhbGV0dGU7cmV0dXJuIG51bGw9PWk/dm9pZCAwOmkoe3VzZXJQYWxldHRlOnIsY29sb3JzQ291bnQ6TWF0aC5tYXgoby5sZW5ndGgsbi5sZW5ndGgpLHRoZW1lVGVtcGxhdGVQYXJhbWV0ZXJzOnRoaXMuYWN0aXZlVGhlbWUuZ2V0VGVtcGxhdGVQYXJhbWV0ZXJzKCksdGFrZUNvbG9yczplPT4odC5jb2xvdXJJbmRleCs9ZSx7ZmlsbHM6UHMobyxlLHMpLHN0cm9rZXM6UHMobixlLHMpfSl9KX1nZXRTZXJpZXNHcm91cGluZ09wdGlvbnMoZSl7Y29uc3QgdD0oaT1lLnR5cGUsRnQuaGFzKGkpKTt2YXIgaTtjb25zdCBzPWZ1bmN0aW9uKGUpe3JldHVybiBMdC5oYXMoZSl9KGUudHlwZSkscj1mdW5jdGlvbihlKXtyZXR1cm4gSXQuaGFzKGUpfShlLnR5cGUpO2UuZ3JvdXBlZCYmIXQmJkwud2Fybk9uY2UoYHVuc3VwcG9ydGVkIGdyb3VwaW5nIG9mIHNlcmllcyB0eXBlICIke2UudHlwZX0iLmApLCFlLnN0YWNrZWQmJiFlLnN0YWNrR3JvdXB8fHN8fEwud2Fybk9uY2UoYHVuc3VwcG9ydGVkIHN0YWNraW5nIG9mIHNlcmllcyB0eXBlICIke2UudHlwZX0iLmApO2xldHtncm91cGVkOm8sc3RhY2tlZDpufT1lO3JldHVybiBudWxsIT1ufHwobj0ocnx8bnVsbCE9ZS5zdGFja0dyb3VwKSYmISh0JiZvKSksbnVsbCE9b3x8KG89ITApLHtzdGFja2VkOnMmJm4sZ3JvdXBlZDp0JiZvJiYhKHMmJm4pfX1zZXRTZXJpZXNHcm91cGluZ09wdGlvbnMoZSl7Y29uc3QgdD10aGlzLmdldFNlcmllc0dyb3VwaW5nKGUpO0ZzLmNyZWF0ZSghMCwib3B0cyIpKCJzZXRTZXJpZXNHcm91cGluZ09wdGlvbnMoKSAtIHNlcmllcyBncm91cGluZzogIix0KTtjb25zdCBpPXt9LHM9dC5yZWR1Y2UoKGUsdCk9Pnt2YXIgaTtyZXR1cm4iZGVmYXVsdCI9PT10Lmdyb3VwVHlwZXx8KG51bGwhPWVbaT10LnNlcmllc1R5cGVdfHwoZVtpXT0wKSxlW3Quc2VyaWVzVHlwZV0rPSJzdGFjayI9PT10Lmdyb3VwVHlwZT8xOnQuc2VyaWVzLmxlbmd0aCksZX0se30pO3JldHVybiB0LmZsYXRNYXAoZT0+e3ZhciB0O3N3aXRjaChudWxsIT1pW3Q9ZS5zZXJpZXNUeXBlXXx8KGlbdF09MCksZS5ncm91cFR5cGUpe2Nhc2Uic3RhY2siOmNvbnN0IHQ9aVtlLnNlcmllc1R5cGVdKys7cmV0dXJuIGUuc2VyaWVzLm1hcCgoaSxyKT0+T2JqZWN0LmFzc2lnbihpLHtzZXJpZXNHcm91cGluZzp7Z3JvdXBJbmRleDp0LGdyb3VwQ291bnQ6c1tlLnNlcmllc1R5cGVdLHN0YWNrSW5kZXg6cixzdGFja0NvdW50OmUuc2VyaWVzLmxlbmd0aH19KSk7Y2FzZSJncm91cCI6cmV0dXJuIGUuc2VyaWVzLm1hcCh0PT5PYmplY3QuYXNzaWduKHQse3Nlcmllc0dyb3VwaW5nOntncm91cEluZGV4OmlbZS5zZXJpZXNUeXBlXSsrLGdyb3VwQ291bnQ6c1tlLnNlcmllc1R5cGVdLHN0YWNrSW5kZXg6MCxzdGFja0NvdW50OjB9fSkpfXJldHVybiBlLnNlcmllc30pLm1hcChlPT57dmFyIHQ9ZSx7c3RhY2tlZDppLGdyb3VwZWQ6c309dDtyZXR1cm4gdih0LFsic3RhY2tlZCIsImdyb3VwZWQiXSl9KX1nZXRTZXJpZXNHcm91cElkKGUpe3ZhciB0O3JldHVybiBlLnN0YWNrZWR8fGUuZ3JvdXBlZD9bZS50eXBlLGUueEtleSxlLnN0YWNrZWQ/bnVsbCE9KHQ9ZS5zdGFja0dyb3VwKT90OiJzdGFja2VkIjoiZ3JvdXBlZCJdLmZpbHRlcihCb29sZWFuKS5qb2luKCItIik6ImRlZmF1bHQtYWctY2hhcnRzLWdyb3VwIn1nZXRTZXJpZXNHcm91cGluZyhlKXtjb25zdCB0PW5ldyBNYXA7cmV0dXJuIGUucmVkdWNlKChlLGkpPT57Y29uc3Qgcz1pLnR5cGU7aWYoaS5zdGFja2VkfHxpLmdyb3VwZWQpe2NvbnN0IHI9dGhpcy5nZXRTZXJpZXNHcm91cElkKGkpO2lmKCF0LmhhcyhyKSl7Y29uc3Qgbz17Z3JvdXBUeXBlOmkuc3RhY2tlZD8ic3RhY2siOiJncm91cCIsc2VyaWVzVHlwZTpzLHNlcmllczpbXX07dC5zZXQocixvKSxlLnB1c2gobyl9dC5nZXQocikuc2VyaWVzLnB1c2goaSl9ZWxzZSBlLnB1c2goe2dyb3VwVHlwZToiZGVmYXVsdCIsc2VyaWVzVHlwZTpzLHNlcmllczpbaV19KTtyZXR1cm4gZX0sW10pfWdldERlZmF1bHRTZXJpZXNUeXBlKGUpe2lmKHV0KGUpKXJldHVybiJsaW5lIjtpZihwdChlKSlyZXR1cm4idHJlZW1hcCI7aWYoZ3QoZSkpcmV0dXJuInBpZSI7dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGNoYXJ0IG9wdGlvbnMgdHlwZSBkZXRlY3RlZC4iKX1nZXRUb29sdGlwUG9zaXRpb25EZWZhdWx0cyhlKXt2YXIgdDtjb25zdCBpPW51bGw9PSh0PWUudG9vbHRpcCk/dm9pZCAwOnQucG9zaXRpb247aWYoIUJlKGkpKXJldHVybjtjb25zdHt0eXBlOnMseE9mZnNldDpyLHlPZmZzZXQ6b309aSxuPXt9O3JldHVybiBIZShzKSYmS2UoeCxzKSYmKG4udHlwZT1zKSxqZShyKSYmKG4ueE9mZnNldD1yKSxqZShvKSYmKG4ueU9mZnNldD1vKSx7dG9vbHRpcDp7cG9zaXRpb246bn19fWRlcHJlY2F0aW9uV2FybmluZ3MoZSl7T2JqZWN0LmVudHJpZXMoe3lLZXlzOiJ5S2V5Iix5TmFtZXM6InlOYW1lIn0pLmZvckVhY2goKFt0LGldKT0+e3ZhciBzOyhudWxsPT0ocz1lLnNlcmllcyk/dm9pZCAwOnMuc29tZShlPT5udWxsIT1lW3RdKSkmJkwud2Fybk9uY2UoYFByb3BlcnR5IFtzZXJpZXMuJHt0fV0gaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBbc2VyaWVzLiR7aX1dIGFuZCBtdWx0aXBsZSBzZXJpZXMgaW5zdGVhZC5gKX0pfWF4ZXNUeXBlSW50ZWdyaXR5KGUpe3ZhciB0LGk7aWYoImF4ZXMiaW4gZSl7Y29uc3Qgcz1udWxsIT0odD1lLmF4ZXMpP3Q6W107Zm9yKGNvbnN0e3R5cGU6dH1vZiBzKW51bGwhPShpPXQpJiZTZS5oYXMoaSl8fChkZWxldGUgZS5heGVzLEwud2Fybk9uY2UoYHVua25vd24gYXhpcyB0eXBlOiAke3R9OyBleHBlY3RlZCBvbmUgb2Y6ICR7U2UuYXhlc1R5cGVzLmpvaW4oIiwgIil9LCBpZ25vcmluZy5gKSl9fXNlcmllc1R5cGVJbnRlZ3JpdHkoZSl7dmFyIHQ7Y29uc3QgaT1udWxsIT0odD1lLnNlcmllcyk/dDpbXTtlLnNlcmllcz1pLmZpbHRlcigoe3R5cGU6ZX0pPT57aWYobnVsbD09ZXx8bnVsbCE9KHQ9ZSkmJnN0Lmhhcyh0KXx8YXQoZSkpcmV0dXJuITA7dmFyIHQ7TC53YXJuT25jZShgdW5rbm93biBzZXJpZXMgdHlwZTogJHtlfTsgZXhwZWN0ZWQgb25lIG9mOiAke3N0LnNlcmllc1R5cGVzLmpvaW4oIiwgIil9YCl9KX1zb2xvU2VyaWVzSW50ZWdyaXR5KGUpe2NvbnN0IHQ9ZS5zZXJpZXM7aWYodCYmdC5sZW5ndGg+MSYmdC5zb21lKGU9PkJ0KGUudHlwZSkpKXtjb25zdCBpPXRoaXMub3B0aW9uc1R5cGUoZSk7aWYoQnQoaSkpTC53YXJuKGBzZXJpZXNbMF0gb2YgdHlwZSAnJHtpfScgaXMgaW5jb21wYXRpYmxlIHdpdGggb3RoZXIgc2VyaWVzIHR5cGVzLiBPbmx5IHByb2Nlc3Npbmcgc2VyaWVzWzBdYCksZS5zZXJpZXM9dC5zbGljZSgwLDEpO2Vsc2V7Y29uc3R7c29sbzppLG5vblNvbG86c309QXModCxlPT5CdChlLnR5cGUpPyJzb2xvIjoibm9uU29sbyIpLHI9T3MoaS5tYXAoZT0+ZS50eXBlKSkuam9pbigiLCAiKTtMLndhcm4oIlVuYWJsZSB0byBtaXggdGhlc2Ugc2VyaWVzIHR5cGVzIHdpdGggdGhlIGxlYWQgc2VyaWVzIHR5cGU6ICIrciksZS5zZXJpZXM9c319fWVuYWJsZUNvbmZpZ3VyZWRPcHRpb25zKGUpe2J0KHRoaXMudXNlck9wdGlvbnMsKGUsdCk9Pnt0JiYiZW5hYmxlZCJpbiB0JiYhdC5fZW5hYmxlZEZyb21UaGVtZSYmbnVsbD09ZS5lbmFibGVkJiYodC5lbmFibGVkPSEwKX0se3NraXA6WyJkYXRhIiwidGhlbWUiXX0sZSksYnQoZSxlPT57bnVsbCE9ZS5fZW5hYmxlZEZyb21UaGVtZSYmZGVsZXRlIGUuX2VuYWJsZWRGcm9tVGhlbWV9LHtza2lwOlsiZGF0YSIsInRoZW1lIl19KX1yZW1vdmVEaXNhYmxlZE9wdGlvbnMoZSl7YnQoZSxlPT57ImVuYWJsZWQiaW4gZSYmITE9PT1lLmVuYWJsZWQmJk9iamVjdC5rZXlzKGUpLmZvckVhY2godD0+eyJlbmFibGVkIiE9PXQmJmRlbGV0ZSBlW3RdfSl9LHtza2lwOlsiZGF0YSIsInRoZW1lIl19KX1yZW1vdmVMZWZ0b3ZlclN5bWJvbHMoZSl7YnQoZSxlPT57aWYoZSYmX2UoZSkpZm9yKGNvbnN0W3QsaV1vZiBPYmplY3QuZW50cmllcyhlKSlZZShpKSYmZGVsZXRlIGVbdF19LHtza2lwOlsiZGF0YSJdfSl9c3BlY2lhbE92ZXJyaWRlc0RlZmF1bHRzKGUpe2lmKG51bGw9PWUud2luZG93KWlmKCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93KWUud2luZG93PXdpbmRvdztlbHNle2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZ2xvYmFsKXRocm93IG5ldyBFcnJvcigiQUcgQ2hhcnRzIC0gdW5hYmxlIHRvIHJlc29sdmUgZ2xvYmFsIHdpbmRvdyIpO2Uud2luZG93PWdsb2JhbC53aW5kb3d9aWYobnVsbD09ZS5kb2N1bWVudClpZigidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50KWUuZG9jdW1lbnQ9ZG9jdW1lbnQ7ZWxzZXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGdsb2JhbCl0aHJvdyBuZXcgRXJyb3IoIkFHIENoYXJ0cyAtIHVuYWJsZSB0byByZXNvbHZlIGdsb2JhbCBkb2N1bWVudCIpO2UuZG9jdW1lbnQ9Z2xvYmFsLmRvY3VtZW50fXJldHVybiBlfX07ZnVuY3Rpb24gTnMoKXtyZXR1cm4oZSx0KT0+e2NvbnN0IGk9W2BQcm9wZXJ0eSBbJHtlfV0gaXMgZGVwcmVjYXRlZC5gLHRdLmZpbHRlcihCb29sZWFuKS5qb2luKCIgIik7TC53YXJuT25jZShpKX19ZnVuY3Rpb24gR3MoZSx0KXtjb25zdCBpPU5zKCkscz1udWxsPT10P3ZvaWQgMDp0LmRlZmF1bHQ7cmV0dXJuIERlKCh0LHIsbyk9PihvIT09cyYmaShyLnRvU3RyaW5nKCksZSksbykpfWZ1bmN0aW9uIGtzKGUsdCl7Y29uc3QgaT1OcygpO3JldHVybiBEZSgocyxyLG8pPT4obyE9PXNbZV0mJihpKHIudG9TdHJpbmcoKSxgVXNlIFske2V9XSBpbnN0ZWFkLmApLHNbZV09dD90KG8pOm8pLFJlKSwodCxzKT0+KGkocy50b1N0cmluZygpLGBVc2UgWyR7ZX1dIGluc3RlYWQuYCksdFtlXSkpfXZhciBfcz17fTtmdW5jdGlvbiBWcyhlLHQpe2NvbnN0IGk9e307aWYoQXJyYXkuaXNBcnJheSh0KSlmb3IobGV0IHM9MDtzPGUubGVuZ3RoO3MrKylpWyIiK2Vbc11dPXRbc107ZWxzZSBmb3IobGV0IHM9MDtzPGUubGVuZ3RoO3MrKylpWyIiK2Vbc11dPXQ7cmV0dXJuIGl9Qyhfcyx7Tk9ERV9VUERBVEVfUEhBU0VTOigpPT5HcixOT0RFX1VQREFURV9TVEFURV9UT19QSEFTRV9NQVBQSU5HOigpPT5rcixmcm9tVG9Nb3Rpb246KCk9Pl9yLHN0YXRpY0Zyb21Ub01vdGlvbjooKT0+VnJ9KTt2YXIgQnM9bmV3IE1hcDtmdW5jdGlvbiBIcygpe0JzLmNsZWFyKCl9ZnVuY3Rpb24gV3MoZSl7dmFyIHQ7Y29uc3QgaT1lLmNvbnN0cnVjdG9yLHM9T2JqZWN0Lmhhc093bihpLCJjbGFzc05hbWUiKT9pLmNsYXNzTmFtZTppLm5hbWU7aWYoIXMpdGhyb3cgbmV3IEVycm9yKGBUaGUgJHtpfSBpcyBtaXNzaW5nIHRoZSAnY2xhc3NOYW1lJyBwcm9wZXJ0eS5gKTtjb25zdCByPShudWxsIT0odD1Ccy5nZXQocykpP3Q6MCkrMTtyZXR1cm4gQnMuc2V0KHMsciksYCR7c30tJHtyfWB9dmFyIGpzPShlPT4oZVtlLk5PTkU9MF09Ik5PTkUiLGVbZS5UUklWSUFMPTFdPSJUUklWSUFMIixlW2UuTUlOT1I9Ml09Ik1JTk9SIixlW2UuTUFKT1I9M109Ik1BSk9SIixlKSkoanN8fHt9KTt2YXIgVXM9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBGdW5jdGlvbigicmV0dXJuIHRydWUiKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19KCk7ZnVuY3Rpb24genMoZSl7Y29uc3R7Y2hhbmdlQ2I6dCxjb252ZXJ0b3I6aX09bnVsbCE9ZT9lOnt9O3JldHVybiBmdW5jdGlvbihzLHIpe2NvbnN0IG89Il9fIityO3Nbcl18fChVcyYmbnVsbD09dCYmbnVsbD09aT9mdW5jdGlvbihlLHQsaSxzKXtjb25zdHtyZWRyYXc6cj0xLHR5cGU6bz0ibm9ybWFsIixjaGVja0RpcnR5T25Bc3NpZ25tZW50Om49ITF9PW51bGwhPXM/czp7fSxhPW5ldyBGdW5jdGlvbigidmFsdWUiLGBcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLiR7aX07XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuJHtpfSA9IHZhbHVlO1xuICAgICAgICAgICAgJHsibm9ybWFsIj09PW8/YHRoaXMubWFya0RpcnR5KHRoaXMsICR7cn0pO2A6IiJ9XG4gICAgICAgICAgICAkeyJ0cmFuc2Zvcm0iPT09bz9gdGhpcy5tYXJrRGlydHlUcmFuc2Zvcm0oJHtyfSk7YDoiIn1cbiAgICAgICAgICAgICR7InBhdGgiPT09bz9gaWYgKCF0aGlzLl9kaXJ0eVBhdGgpIHsgdGhpcy5fZGlydHlQYXRoID0gdHJ1ZTsgdGhpcy5tYXJrRGlydHkodGhpcywgJHtyfSk7IH1gOiIifVxuICAgICAgICAgICAgJHsiZm9udCI9PT1vP2BpZiAoIXRoaXMuX2RpcnR5Rm9udCkgeyB0aGlzLl9kaXJ0eUZvbnQgPSB0cnVlOyB0aGlzLm1hcmtEaXJ0eSh0aGlzLCAke3J9KTsgfWA6IiJ9XG4gICAgICAgIH1cbiAgICAgICAgJHtuPyJpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZS5fZGlydHkgPiAwKSB7IHRoaXMubWFya0RpcnR5KHZhbHVlLCB2YWx1ZS5fZGlydHkpOyB9IjoiIn1cbmApLGw9bmV3IEZ1bmN0aW9uKGByZXR1cm4gdGhpcy4ke2l9O2ApO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3NldDphLGdldDpsLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9KHMscixvLGUpOmZ1bmN0aW9uKGUsdCxpLHMpe2NvbnN0e3JlZHJhdzpyPTEsdHlwZTpvPSJub3JtYWwiLGNoYW5nZUNiOm4sY29udmVydG9yOmEsY2hlY2tEaXJ0eU9uQXNzaWdubWVudDpsPSExfT1udWxsIT1zP3M6e307T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7c2V0OmZ1bmN0aW9uKGUpe2NvbnN0IHQ9dGhpc1tpXTsoZT1hP2EoZSk6ZSkhPT10JiYodGhpc1tpXT1lLCJub3JtYWwiPT09byYmdGhpcy5tYXJrRGlydHkodGhpcyxyKSwidHJhbnNmb3JtIj09PW8mJnRoaXMubWFya0RpcnR5VHJhbnNmb3JtKHIpLCJwYXRoIiE9PW98fHRoaXMuX2RpcnR5UGF0aHx8KHRoaXMuX2RpcnR5UGF0aD0hMCx0aGlzLm1hcmtEaXJ0eSh0aGlzLHIpKSwiZm9udCIhPT1vfHx0aGlzLl9kaXJ0eUZvbnR8fCh0aGlzLl9kaXJ0eUZvbnQ9ITAsdGhpcy5tYXJrRGlydHkodGhpcyxyKSksbiYmbih0aGlzKSksbCYmbnVsbCE9ZSYmZS5fZGlydHk+MCYmdGhpcy5tYXJrRGlydHkoZSxlLl9kaXJ0eSl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzW2ldfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfShzLHIsbyxlKSl9fWZ1bmN0aW9uIEtzKGUsdCxpKXtyZXR1cm4gTWF0aC5taW4oaSxNYXRoLm1heChlLHQpKX1mdW5jdGlvbiBZcyhlLHQpe2NvbnN0W2ksc109JHModCk7cmV0dXJuIEtzKGksZSxzKX1mdW5jdGlvbiAkcyhlKXtyZXR1cm4gZS5sZW5ndGg/W01hdGgubWluKC4uLmUpLE1hdGgubWF4KC4uLmUpXTpbXX1mdW5jdGlvbiBYcyhlKXtjb25zdFt0LGldPSRzKGUpO3JldHVybiBpLXR9ZnVuY3Rpb24gcXMoZSx0LGk9MWUtMTApe3JldHVybiBNYXRoLmFicyhlLXQpPGl9ZnVuY3Rpb24gWnMoZSl7cmV0dXJuLTE9PT1NYXRoLnNpZ24oZSl8fE9iamVjdC5pcyhlLC0wKX1mdW5jdGlvbiBRcyhlLHQ9Mil7Y29uc3QgaT1wKDEwLHQpO3JldHVybiBNYXRoLnJvdW5kKGUqaSkvaX1mdW5jdGlvbiBKcyhlLHQ9Mil7Y29uc3QgaT1NYXRoLmZsb29yKE1hdGgubG9nKE1hdGguYWJzKGUpKS9NYXRoLkxOMTApO3JldHVybiBpPj0wfHwhaXNGaW5pdGUoaSk/ZS50b0ZpeGVkKHQpOmUudG9GaXhlZChNYXRoLmFicyhpKS0xK3QpfWZ1bmN0aW9uIGVyKGUsdCl7cmV0dXJuIE1hdGguZmxvb3IoZSV0KyhlPDA/dDowKSl9ZnVuY3Rpb24gdHIoZSx0PTEwKXtjb25zdFssaT0iIl09KE1hdGguYWJzKGUpJTEpLnRvTG9jYWxlU3RyaW5nKCJlbi1HQiIse21pbmltdW1GcmFjdGlvbkRpZ2l0czowLG1heGltdW1GcmFjdGlvbkRpZ2l0czp0fSkuc3BsaXQoIi4iKTtyZXR1cm4gaS5sZW5ndGh9ZnVuY3Rpb24gaXIoZSx0LGk9MS8wKXtjb25zdCBzPXtuZWFyZXN0OnZvaWQgMCxkaXN0YW5jZVNxdWFyZWQ6aX07Zm9yKGNvbnN0IGkgb2YgdCl7Y29uc3QgdD1pLmRpc3RhbmNlU3F1YXJlZChlKTtpZigwPT09dClyZXR1cm57bmVhcmVzdDppLGRpc3RhbmNlU3F1YXJlZDowfTt0PHMuZGlzdGFuY2VTcXVhcmVkJiYocy5uZWFyZXN0PWkscy5kaXN0YW5jZVNxdWFyZWQ9dCl9cmV0dXJuIHN9ZnVuY3Rpb24gc3IoZSx0LGk9MS8wKXtjb25zdCBzPXQudHJhbnNmb3JtUG9pbnQoZS54LGUueSkscj17bmVhcmVzdDp2b2lkIDAsZGlzdGFuY2VTcXVhcmVkOml9O2Zvcihjb25zdCBlIG9mIHQuY2hpbGRyZW4pe2NvbnN0e25lYXJlc3Q6dCxkaXN0YW5jZVNxdWFyZWQ6aX09ZS5uZWFyZXN0U3F1YXJlZChzLHIuZGlzdGFuY2VTcXVhcmVkKTtpZigwPT09aSlyZXR1cm57bmVhcmVzdDp0LGRpc3RhbmNlU3F1YXJlZDppfTtpPHIuZGlzdGFuY2VTcXVhcmVkJiYoci5uZWFyZXN0PXQsci5kaXN0YW5jZVNxdWFyZWQ9aSl9cmV0dXJuIHJ9dmFyIHJyPWNsYXNzIGV7Y29uc3RydWN0b3IoZSx0LGkscyl7dGhpcy54PWUsdGhpcy55PXQsdGhpcy53aWR0aD1pLHRoaXMuaGVpZ2h0PXN9Y2xvbmUoKXtjb25zdHt4OnQseTppLHdpZHRoOnMsaGVpZ2h0OnJ9PXRoaXM7cmV0dXJuIG5ldyBlKHQsaSxzLHIpfWVxdWFscyhlKXtyZXR1cm4gdGhpcy54PT09ZS54JiZ0aGlzLnk9PT1lLnkmJnRoaXMud2lkdGg9PT1lLndpZHRoJiZ0aGlzLmhlaWdodD09PWUuaGVpZ2h0fWNvbnRhaW5zUG9pbnQoZSx0KXtyZXR1cm4gZT49dGhpcy54JiZlPD10aGlzLngrdGhpcy53aWR0aCYmdD49dGhpcy55JiZ0PD10aGlzLnkrdGhpcy5oZWlnaHR9Y29sbGlkZXNCQm94KGUpe3JldHVybiB0aGlzLng8ZS54K2Uud2lkdGgmJnRoaXMueCt0aGlzLndpZHRoPmUueCYmdGhpcy55PGUueStlLmhlaWdodCYmdGhpcy55K3RoaXMuaGVpZ2h0PmUueX1pc0luZmluaXRlKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCk9PT0xLzB8fE1hdGguYWJzKHRoaXMueSk9PT0xLzB8fE1hdGguYWJzKHRoaXMud2lkdGgpPT09MS8wfHxNYXRoLmFicyh0aGlzLmhlaWdodCk9PT0xLzB9ZGlzdGFuY2VTcXVhcmVkKGUpe2lmKHRoaXMuY29udGFpbnNQb2ludChlLngsZS55KSlyZXR1cm4gMDtjb25zdCB0PWUueC1Lcyh0aGlzLngsZS54LHRoaXMueCt0aGlzLndpZHRoKSxpPWUueS1Lcyh0aGlzLnksZS55LHRoaXMueSt0aGlzLmhlaWdodCk7cmV0dXJuIHQqdCtpKml9c3RhdGljIG5lYXJlc3RCb3goZSx0KXtyZXR1cm4gaXIoZSx0KX1zaHJpbmsoZSx0KXtjb25zdCBpPShlLHQpPT57c3dpdGNoKGUpe2Nhc2UidG9wIjp0aGlzLnkrPXQ7Y2FzZSJib3R0b20iOnRoaXMuaGVpZ2h0LT10O2JyZWFrO2Nhc2UibGVmdCI6dGhpcy54Kz10O2Nhc2UicmlnaHQiOnRoaXMud2lkdGgtPXQ7YnJlYWs7Y2FzZSJ2ZXJ0aWNhbCI6dGhpcy55Kz10LHRoaXMuaGVpZ2h0LT0yKnQ7YnJlYWs7Y2FzZSJob3Jpem9udGFsIjp0aGlzLngrPXQsdGhpcy53aWR0aC09Mip0O2JyZWFrO2Nhc2Ugdm9pZCAwOnRoaXMueCs9dCx0aGlzLndpZHRoLT0yKnQsdGhpcy55Kz10LHRoaXMuaGVpZ2h0LT0yKnR9fTtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGU/aSh0LGUpOiJvYmplY3QiPT10eXBlb2YgZSYmT2JqZWN0LmVudHJpZXMoZSkuZm9yRWFjaCgoW2UsdF0pPT5pKGUsdCkpLHRoaXN9Z3JvdyhlLHQpe2lmKCJudW1iZXIiPT10eXBlb2YgZSl0aGlzLnNocmluaygtZSx0KTtlbHNle2NvbnN0IHQ9bSh7fSxlKTtmb3IoY29uc3QgZSBpbiB0KXRbZV0qPS0xO3RoaXMuc2hyaW5rKHQpfXJldHVybiB0aGlzfXN0YXRpYyBtZXJnZSh0KXtsZXQgaT0xLzAscz0xLzAscj0tMS8wLG89LTEvMDtyZXR1cm4gdC5mb3JFYWNoKGU9PntlLng8aSYmKGk9ZS54KSxlLnk8cyYmKHM9ZS55KSxlLngrZS53aWR0aD5yJiYocj1lLngrZS53aWR0aCksZS55K2UuaGVpZ2h0Pm8mJihvPWUueStlLmhlaWdodCl9KSxuZXcgZShpLHMsci1pLG8tcyl9fTtyci56ZXJvPW5ldyBycigwLDAsMCwwKTt2YXIgb3I9cnIsbnI9Y2xhc3MgZXtnZXQgZSgpe3JldHVyblsuLi50aGlzLmVsZW1lbnRzXX1jb25zdHJ1Y3RvcihlPVsxLDAsMCwxLDAsMF0pe3RoaXMuZWxlbWVudHM9ZX1zZXRFbGVtZW50cyhlKXtjb25zdCB0PXRoaXMuZWxlbWVudHM7cmV0dXJuIHRbMF09ZVswXSx0WzFdPWVbMV0sdFsyXT1lWzJdLHRbM109ZVszXSx0WzRdPWVbNF0sdFs1XT1lWzVdLHRoaXN9Z2V0IGlkZW50aXR5KCl7Y29uc3QgZT10aGlzLmVsZW1lbnRzO3JldHVybiAxPT09ZVswXSYmMD09PWVbMV0mJjA9PT1lWzJdJiYxPT09ZVszXSYmMD09PWVbNF0mJjA9PT1lWzVdfUF4QihlLHQsaSl7Y29uc3Qgcz1lWzBdKnRbMF0rZVsyXSp0WzFdLHI9ZVsxXSp0WzBdK2VbM10qdFsxXSxvPWVbMF0qdFsyXStlWzJdKnRbM10sbj1lWzFdKnRbMl0rZVszXSp0WzNdLGE9ZVswXSp0WzRdK2VbMl0qdFs1XStlWzRdLGw9ZVsxXSp0WzRdK2VbM10qdFs1XStlWzVdOyhpPW51bGwhPWk/aTplKVswXT1zLGlbMV09cixpWzJdPW8saVszXT1uLGlbNF09YSxpWzVdPWx9bXVsdGlwbHlTZWxmKGUpe3JldHVybiB0aGlzLkF4Qih0aGlzLmVsZW1lbnRzLGUuZWxlbWVudHMpLHRoaXN9bXVsdGlwbHkodCl7Y29uc3QgaT1uZXcgQXJyYXkoNik7cmV0dXJuIHRoaXMuQXhCKHRoaXMuZWxlbWVudHMsdC5lbGVtZW50cyxpKSxuZXcgZShpKX1wcmVNdWx0aXBseVNlbGYoZSl7cmV0dXJuIHRoaXMuQXhCKGUuZWxlbWVudHMsdGhpcy5lbGVtZW50cyx0aGlzLmVsZW1lbnRzKSx0aGlzfWludmVyc2UoKXtjb25zdCB0PXRoaXMuZWxlbWVudHM7bGV0IGk9dFswXSxzPXRbMV0scj10WzJdLG89dFszXTtjb25zdCBuPXRbNF0sYT10WzVdLGw9MS8oaSpvLXMqcik7cmV0dXJuIGkqPWwscyo9bCxyKj1sLG8qPWwsbmV3IGUoW28sLXMsLXIsaSxyKmEtbypuLHMqbi1pKmFdKX1pbnZlcnNlVG8oZSl7Y29uc3QgdD10aGlzLmVsZW1lbnRzO2xldCBpPXRbMF0scz10WzFdLHI9dFsyXSxvPXRbM107Y29uc3Qgbj10WzRdLGE9dFs1XSxsPTEvKGkqby1zKnIpO3JldHVybiBpKj1sLHMqPWwscio9bCxvKj1sLGUuc2V0RWxlbWVudHMoW28sLXMsLXIsaSxyKmEtbypuLHMqbi1pKmFdKSx0aGlzfWludmVydFNlbGYoKXtjb25zdCBlPXRoaXMuZWxlbWVudHM7bGV0IHQ9ZVswXSxpPWVbMV0scz1lWzJdLHI9ZVszXTtjb25zdCBvPWVbNF0sbj1lWzVdLGE9MS8odCpyLWkqcyk7cmV0dXJuIHQqPWEsaSo9YSxzKj1hLHIqPWEsZVswXT1yLGVbMV09LWksZVsyXT0tcyxlWzNdPXQsZVs0XT1zKm4tcipvLGVbNV09aSpvLXQqbix0aGlzfXRyYW5zZm9ybVBvaW50KGUsdCl7Y29uc3QgaT10aGlzLmVsZW1lbnRzO3JldHVybnt4OmUqaVswXSt0KmlbMl0raVs0XSx5OmUqaVsxXSt0KmlbM10raVs1XX19dHJhbnNmb3JtQkJveChlLHQpe2NvbnN0IGk9dGhpcy5lbGVtZW50cyxzPWlbMF0scj1pWzFdLG89aVsyXSxuPWlbM10sYT0uNSplLndpZHRoLGw9LjUqZS5oZWlnaHQsZD1lLngrYSxjPWUueStsLGg9TWF0aC5hYnMoYSpzKStNYXRoLmFicyhsKm8pLHU9TWF0aC5hYnMoYSpyKStNYXRoLmFicyhsKm4pO3JldHVybiB0fHwodD1uZXcgb3IoMCwwLDAsMCkpLHQueD1kKnMrYypvK2lbNF0taCx0Lnk9ZCpyK2MqbitpWzVdLXUsdC53aWR0aD1oK2gsdC5oZWlnaHQ9dSt1LHR9dG9Db250ZXh0KGUpe2lmKHRoaXMuaWRlbnRpdHkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5lbGVtZW50cztlLnRyYW5zZm9ybSh0WzBdLHRbMV0sdFsyXSx0WzNdLHRbNF0sdFs1XSl9c3RhdGljIGZseXdlaWdodCh0KXtyZXR1cm4gZS5pbnN0YW5jZS5zZXRFbGVtZW50cyh0LmVsZW1lbnRzKX1zdGF0aWMgdXBkYXRlVHJhbnNmb3JtTWF0cml4KGUsdCxpLHMscixvLG4pe2NvbnN0W2EsbF09WzAsMF0sZD10LGM9aTtsZXQgaCx1OzE9PT1kJiYxPT09Yz8oaD0wLHU9MCk6KGg9bnVsbD09KG51bGw9PW4/dm9pZCAwOm4uc2NhbGluZ0NlbnRlclgpP2E6bnVsbD09bj92b2lkIDA6bi5zY2FsaW5nQ2VudGVyWCx1PW51bGw9PShudWxsPT1uP3ZvaWQgMDpuLnNjYWxpbmdDZW50ZXJZKT9sOm51bGw9PW4/dm9pZCAwOm4uc2NhbGluZ0NlbnRlclkpO2NvbnN0IHA9cyxnPU1hdGguY29zKHApLG09TWF0aC5zaW4ocCk7bGV0IGYsdjswPT09cD8oZj0wLHY9MCk6KGY9bnVsbD09KG51bGw9PW4/dm9pZCAwOm4ucm90YXRpb25DZW50ZXJYKT9hOm51bGw9PW4/dm9pZCAwOm4ucm90YXRpb25DZW50ZXJYLHY9bnVsbD09KG51bGw9PW4/dm9pZCAwOm4ucm90YXRpb25DZW50ZXJZKT9sOm51bGw9PW4/dm9pZCAwOm4ucm90YXRpb25DZW50ZXJZKTtjb25zdCBDPXIseT1vLFM9aCooMS1kKS1mLHc9dSooMS1jKS12O3JldHVybiBlLnNldEVsZW1lbnRzKFtnKmQsbSpkLC1tKmMsZypjLGcqUy1tKncrZitDLG0qUytnKncrdit5XSksZX1zdGF0aWMgZnJvbUNvbnRleHQodCl7Y29uc3QgaT10LmdldFRyYW5zZm9ybSgpO3JldHVybiBuZXcgZShbaS5hLGkuYixpLmMsaS5kLGkuZSxpLmZdKX19O25yLmluc3RhbmNlPW5ldyBucjt2YXIgYXI9bnIsbHI9KGU9PihlW2UuQWxsPTBdPSJBbGwiLGVbZS5Ob25lPTFdPSJOb25lIixlKSkobHJ8fHt9KSxkcj1lPT57ZS5wYXJlbnQmJihlLnBhcmVudC5kaXJ0eVpJbmRleD0hMCksZS56SW5kZXhDaGFuZ2VkKCl9LGNyPWNsYXNzIGUgZXh0ZW5kcyBjbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuX2RpcnR5PTN9bWFya0RpcnR5KGUsdD0xKXt0aGlzLl9kaXJ0eTx0JiYodGhpcy5fZGlydHk9dCl9bWFya0NsZWFuKGUpe3RoaXMuX2RpcnR5PTB9aXNEaXJ0eSgpe3JldHVybiB0aGlzLl9kaXJ0eT4wfX17Y29uc3RydWN0b3Ioe2lzVmlydHVhbDp0LHRhZzppfT17fSl7c3VwZXIoKSx0aGlzLnNlcmlhbE51bWJlcj1lLl9uZXh0U2VyaWFsTnVtYmVyKyssdGhpcy5pZD1Xcyh0aGlzKSx0aGlzLmlzQ29udGFpbmVyTm9kZT0hMSx0aGlzLl92aXJ0dWFsQ2hpbGRyZW49W10sdGhpcy5fY2hpbGRyZW49W10sdGhpcy5jaGlsZFNldD17fSx0aGlzLm1hdHJpeD1uZXcgYXIsdGhpcy5pbnZlcnNlTWF0cml4PW5ldyBhcix0aGlzLmRpcnR5VHJhbnNmb3JtPSExLHRoaXMuc2NhbGluZ1g9MSx0aGlzLnNjYWxpbmdZPTEsdGhpcy5zY2FsaW5nQ2VudGVyWD1udWxsLHRoaXMuc2NhbGluZ0NlbnRlclk9bnVsbCx0aGlzLnJvdGF0aW9uQ2VudGVyWD1udWxsLHRoaXMucm90YXRpb25DZW50ZXJZPW51bGwsdGhpcy5yb3RhdGlvbj0wLHRoaXMudHJhbnNsYXRpb25YPTAsdGhpcy50cmFuc2xhdGlvblk9MCx0aGlzLnZpc2libGU9ITAsdGhpcy5kaXJ0eVpJbmRleD0hMSx0aGlzLnpJbmRleD0wLHRoaXMuekluZGV4U3ViT3JkZXI9dm9pZCAwLHRoaXMucG9pbnRlckV2ZW50cz0wLHRoaXMuaXNWaXJ0dWFsPW51bGwhPXQmJnQsdGhpcy50YWc9bnVsbCE9aT9pOk5hTn1nZXQgZGF0dW0oKXt2YXIgZSx0O3JldHVybiBudWxsIT0odD10aGlzLl9kYXR1bSk/dDpudWxsPT0oZT10aGlzLl9wYXJlbnQpP3ZvaWQgMDplLmRhdHVtfWdldCBwcmV2aW91c0RhdHVtKCl7cmV0dXJuIHRoaXMuX3ByZXZpb3VzRGF0dW19c2V0IGRhdHVtKGUpe3RoaXMuX2RhdHVtIT09ZSYmKHRoaXMuX3ByZXZpb3VzRGF0dW09dGhpcy5fZGF0dW0pLHRoaXMuX2RhdHVtPWV9X3NldExheWVyTWFuYWdlcihlKXt0aGlzLl9sYXllck1hbmFnZXI9ZSx0aGlzLl9kZWJ1Zz1udWxsPT1lP3ZvaWQgMDplLmRlYnVnO2Zvcihjb25zdCB0IG9mIHRoaXMuX2NoaWxkcmVuKXQuX3NldExheWVyTWFuYWdlcihlKTtmb3IoY29uc3QgdCBvZiB0aGlzLl92aXJ0dWFsQ2hpbGRyZW4pdC5fc2V0TGF5ZXJNYW5hZ2VyKGUpfWdldCBsYXllck1hbmFnZXIoKXtyZXR1cm4gdGhpcy5fbGF5ZXJNYW5hZ2VyfWdldCBwYXJlbnQoKXtyZXR1cm4gdGhpcy5fcGFyZW50fWdldCBjaGlsZHJlbigpe2lmKDA9PT10aGlzLl92aXJ0dWFsQ2hpbGRyZW4ubGVuZ3RoKXJldHVybiB0aGlzLl9jaGlsZHJlbjtjb25zdCBlPVsuLi50aGlzLl9jaGlsZHJlbl07Zm9yKGNvbnN0IHQgb2YgdGhpcy5fdmlydHVhbENoaWxkcmVuKWUucHVzaCguLi50LmNoaWxkcmVuKTtyZXR1cm4gZX1nZXQgdmlydHVhbENoaWxkcmVuKCl7cmV0dXJuIHRoaXMuX3ZpcnR1YWxDaGlsZHJlbn1oYXNWaXJ0dWFsQ2hpbGRyZW4oKXtyZXR1cm4gdGhpcy5fdmlydHVhbENoaWxkcmVuLmxlbmd0aD4wfXNldFByb3BlcnRpZXMoZSx0KXtjb25zdCBpPW51bGwhPXQ/dDpPYmplY3Qua2V5cyhlKTtmb3IoY29uc3QgdCBvZiBpKXRoaXNbdF09ZVt0XTtyZXR1cm4gdGhpc31hcHBlbmQoZSl7QXJyYXkuaXNBcnJheShlKXx8KGU9W2VdKTtmb3IoY29uc3QgdCBvZiBlKXtpZih0LnBhcmVudCl0aHJvdyBuZXcgRXJyb3IoYCR7dH0gYWxyZWFkeSBiZWxvbmdzIHRvIGFub3RoZXIgcGFyZW50OiAke3QucGFyZW50fS5gKTtpZih0LmxheWVyTWFuYWdlcil0aHJvdyBuZXcgRXJyb3IoYCR7dH0gYWxyZWFkeSBiZWxvbmdzIHRvIGEgc2NlbmU6ICR7dC5sYXllck1hbmFnZXJ9LmApO2lmKHRoaXMuY2hpbGRTZXRbdC5pZF0pdGhyb3cgbmV3IEVycm9yKGBEdXBsaWNhdGUgJHt0LmNvbnN0cnVjdG9yLm5hbWV9IG5vZGU6ICR7dH1gKTt0LmlzVmlydHVhbD90aGlzLl92aXJ0dWFsQ2hpbGRyZW4ucHVzaCh0KTp0aGlzLl9jaGlsZHJlbi5wdXNoKHQpLHRoaXMuY2hpbGRTZXRbdC5pZF09ITAsdC5fcGFyZW50PXRoaXMsdC5fc2V0TGF5ZXJNYW5hZ2VyKHRoaXMubGF5ZXJNYW5hZ2VyKX10aGlzLmRpcnR5WkluZGV4PSEwLHRoaXMubWFya0RpcnR5KHRoaXMsMyl9YXBwZW5kQ2hpbGQoZSl7cmV0dXJuIHRoaXMuYXBwZW5kKGUpLGV9cmVtb3ZlQ2hpbGQoZSl7Y29uc3QgdD0oKT0+e3Rocm93IG5ldyBFcnJvcigiVGhlIG5vZGUgdG8gYmUgcmVtb3ZlZCBpcyBub3QgYSBjaGlsZCBvZiB0aGlzIG5vZGUuIil9O2lmKGUucGFyZW50IT09dGhpcyYmdCgpLGUuaXNWaXJ0dWFsKXtjb25zdCBpPXRoaXMuX3ZpcnR1YWxDaGlsZHJlbi5pbmRleE9mKGUpO2k8MCYmdCgpLHRoaXMuX3ZpcnR1YWxDaGlsZHJlbi5zcGxpY2UoaSwxKX1lbHNle2NvbnN0IGk9dGhpcy5fY2hpbGRyZW4uaW5kZXhPZihlKTtpPDAmJnQoKSx0aGlzLl9jaGlsZHJlbi5zcGxpY2UoaSwxKX1yZXR1cm4gZGVsZXRlIHRoaXMuY2hpbGRTZXRbZS5pZF0sZS5fcGFyZW50PXZvaWQgMCxlLl9zZXRMYXllck1hbmFnZXIoKSx0aGlzLmRpcnR5WkluZGV4PSEwLHRoaXMubWFya0RpcnR5KGUsMyksZX1jYWxjdWxhdGVDdW11bGF0aXZlTWF0cml4KCl7dGhpcy5jb21wdXRlVHJhbnNmb3JtTWF0cml4KCk7Y29uc3QgZT1hci5mbHl3ZWlnaHQodGhpcy5tYXRyaXgpO2xldCB0PXRoaXMucGFyZW50O2Zvcig7dDspdC5jb21wdXRlVHJhbnNmb3JtTWF0cml4KCksZS5wcmVNdWx0aXBseVNlbGYodC5tYXRyaXgpLHQ9dC5wYXJlbnQ7cmV0dXJuIGV9dHJhbnNmb3JtUG9pbnQoZSx0KXtyZXR1cm4gdGhpcy5jYWxjdWxhdGVDdW11bGF0aXZlTWF0cml4KCkuaW52ZXJ0U2VsZigpLnRyYW5zZm9ybVBvaW50KGUsdCl9aW52ZXJzZVRyYW5zZm9ybVBvaW50KGUsdCl7cmV0dXJuIHRoaXMuY2FsY3VsYXRlQ3VtdWxhdGl2ZU1hdHJpeCgpLnRyYW5zZm9ybVBvaW50KGUsdCl9dHJhbnNmb3JtQkJveChlKXtyZXR1cm4gdGhpcy5jYWxjdWxhdGVDdW11bGF0aXZlTWF0cml4KCkuaW52ZXJ0U2VsZigpLnRyYW5zZm9ybUJCb3goZSl9aW52ZXJzZVRyYW5zZm9ybUJCb3goZSl7cmV0dXJuIHRoaXMuY2FsY3VsYXRlQ3VtdWxhdGl2ZU1hdHJpeCgpLnRyYW5zZm9ybUJCb3goZSl9bWFya0RpcnR5VHJhbnNmb3JtKCl7dGhpcy5kaXJ0eVRyYW5zZm9ybT0hMCx0aGlzLm1hcmtEaXJ0eSh0aGlzLDMpfWNvbnRhaW5zUG9pbnQoZSx0KXtyZXR1cm4hMX1waWNrTm9kZShlLHQpe3ZhciBpO2lmKCF0aGlzLnZpc2libGV8fDE9PT10aGlzLnBvaW50ZXJFdmVudHN8fCF0aGlzLmNvbnRhaW5zUG9pbnQoZSx0KSlyZXR1cm47Y29uc3Qgcz10aGlzLmNoaWxkcmVuO2lmKHMubGVuZ3RoPjFlMylmb3IobGV0IHI9cy5sZW5ndGgtMTtyPj0wO3ItLSl7Y29uc3Qgbz1zW3JdLG49KG51bGw9PShpPW8uY29tcHV0ZVRyYW5zZm9ybWVkQkJveCgpKT92b2lkIDA6aS5jb250YWluc1BvaW50KGUsdCkpP28ucGlja05vZGUoZSx0KTp2b2lkIDA7aWYobilyZXR1cm4gbn1lbHNlIGlmKHMubGVuZ3RoKWZvcihsZXQgaT1zLmxlbmd0aC0xO2k+PTA7aS0tKXtjb25zdCByPXNbaV0ucGlja05vZGUoZSx0KTtpZihyKXJldHVybiByfWVsc2UgaWYoIXRoaXMuaXNDb250YWluZXJOb2RlKXJldHVybiB0aGlzfWZpbmROb2RlcyhlKXtjb25zdCB0PWUodGhpcyk/W3RoaXNdOltdO2Zvcihjb25zdCBpIG9mIHRoaXMuY2hpbGRyZW4pe2NvbnN0IHM9aS5maW5kTm9kZXMoZSk7cyYmdC5wdXNoKC4uLnMpfXJldHVybiB0fWNvbXB1dGVCQm94KCl7fWNvbXB1dGVUcmFuc2Zvcm1lZEJCb3goKXtjb25zdCBlPXRoaXMuY29tcHV0ZUJCb3goKTtpZighZSlyZXR1cm47dGhpcy5jb21wdXRlVHJhbnNmb3JtTWF0cml4KCk7Y29uc3QgdD1hci5mbHl3ZWlnaHQodGhpcy5tYXRyaXgpO2xldCBpPXRoaXMucGFyZW50O2Zvcig7aTspaS5jb21wdXRlVHJhbnNmb3JtTWF0cml4KCksdC5wcmVNdWx0aXBseVNlbGYoaS5tYXRyaXgpLGk9aS5wYXJlbnQ7cmV0dXJuIHQudHJhbnNmb3JtQkJveChlLGUpLGV9Y29tcHV0ZVRyYW5zZm9ybU1hdHJpeCgpe2lmKCF0aGlzLmRpcnR5VHJhbnNmb3JtKXJldHVybjtjb25zdHttYXRyaXg6ZSxzY2FsaW5nWDp0LHNjYWxpbmdZOmkscm90YXRpb246cyx0cmFuc2xhdGlvblg6cix0cmFuc2xhdGlvblk6byxzY2FsaW5nQ2VudGVyWDpuLHNjYWxpbmdDZW50ZXJZOmEscm90YXRpb25DZW50ZXJYOmwscm90YXRpb25DZW50ZXJZOmR9PXRoaXM7YXIudXBkYXRlVHJhbnNmb3JtTWF0cml4KGUsdCxpLHMscixvLHtzY2FsaW5nQ2VudGVyWDpuLHNjYWxpbmdDZW50ZXJZOmEscm90YXRpb25DZW50ZXJYOmwscm90YXRpb25DZW50ZXJZOmR9KSxlLmludmVyc2VUbyh0aGlzLmludmVyc2VNYXRyaXgpLHRoaXMuZGlydHlUcmFuc2Zvcm09ITF9cmVuZGVyKGUpe2NvbnN0e3N0YXRzOnR9PWU7dGhpcy5fZGlydHk9MCx0JiZ0Lm5vZGVzUmVuZGVyZWQrK31jbGVhckJCb3goZSl7Y29uc3QgdD10aGlzLmNvbXB1dGVCQm94KCk7aWYobnVsbD09dClyZXR1cm47Y29uc3R7eDppLHk6cyx3aWR0aDpyLGhlaWdodDpvfT10LG49dGhpcy50cmFuc2Zvcm1Qb2ludChpLHMpLGE9dGhpcy50cmFuc2Zvcm1Qb2ludChpK3IscytvKTtlLmNsZWFyUmVjdChuLngsbi55LGEueC1uLngsYS55LW4ueSl9bWFya0RpcnR5KGUsdD0xLGk9dCl7dGhpcy5fZGlydHk+dHx8dGhpcy5fZGlydHk9PT10JiZ0PT09aXx8KHRoaXMuX2RpcnR5PXQsdGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQubWFya0RpcnR5KHRoaXMsaSk6dGhpcy5sYXllck1hbmFnZXImJnRoaXMubGF5ZXJNYW5hZ2VyLm1hcmtEaXJ0eSgpKX1nZXQgZGlydHkoKXtyZXR1cm4gdGhpcy5fZGlydHl9bWFya0NsZWFuKGUpe2NvbnN0e2ZvcmNlOnQ9ITEscmVjdXJzaXZlOmk9ITB9PW51bGwhPWU/ZTp7fTtpZigwIT09dGhpcy5fZGlydHl8fHQpe2lmKHRoaXMuX2RpcnR5PTAsITEhPT1pKWZvcihjb25zdCBlIG9mIHRoaXMuX3ZpcnR1YWxDaGlsZHJlbillLm1hcmtDbGVhbih7Zm9yY2U6dH0pO2lmKCEwPT09aSlmb3IoY29uc3QgZSBvZiB0aGlzLl9jaGlsZHJlbillLm1hcmtDbGVhbih7Zm9yY2U6dH0pfX12aXNpYmlsaXR5Q2hhbmdlZCgpe31nZXQgbm9kZUNvdW50KCl7bGV0IGU9MSx0PXRoaXMuX2RpcnR5Pj0wfHx0aGlzLmRpcnR5VHJhbnNmb3JtPzE6MCxpPXRoaXMudmlzaWJsZT8xOjA7Y29uc3Qgcz1zPT57Y29uc3R7Y291bnQ6cix2aXNpYmxlQ291bnQ6byxkaXJ0eUNvdW50Om59PXMubm9kZUNvdW50O2UrPXIsaSs9byx0Kz1ufTtmb3IoY29uc3QgZSBvZiB0aGlzLl9jaGlsZHJlbilzKGUpO2Zvcihjb25zdCBlIG9mIHRoaXMuX3ZpcnR1YWxDaGlsZHJlbilzKGUpO3JldHVybntjb3VudDplLHZpc2libGVDb3VudDppLGRpcnR5Q291bnQ6dH19ekluZGV4Q2hhbmdlZCgpe319O2NyLl9uZXh0U2VyaWFsTnVtYmVyPTAseShbenMoe3R5cGU6InRyYW5zZm9ybSJ9KV0sY3IucHJvdG90eXBlLCJzY2FsaW5nWCIsMikseShbenMoe3R5cGU6InRyYW5zZm9ybSJ9KV0sY3IucHJvdG90eXBlLCJzY2FsaW5nWSIsMikseShbenMoe3R5cGU6InRyYW5zZm9ybSJ9KV0sY3IucHJvdG90eXBlLCJzY2FsaW5nQ2VudGVyWCIsMikseShbenMoe3R5cGU6InRyYW5zZm9ybSJ9KV0sY3IucHJvdG90eXBlLCJzY2FsaW5nQ2VudGVyWSIsMikseShbenMoe3R5cGU6InRyYW5zZm9ybSJ9KV0sY3IucHJvdG90eXBlLCJyb3RhdGlvbkNlbnRlclgiLDIpLHkoW3pzKHt0eXBlOiJ0cmFuc2Zvcm0ifSldLGNyLnByb3RvdHlwZSwicm90YXRpb25DZW50ZXJZIiwyKSx5KFt6cyh7dHlwZToidHJhbnNmb3JtIn0pXSxjci5wcm90b3R5cGUsInJvdGF0aW9uIiwyKSx5KFt6cyh7dHlwZToidHJhbnNmb3JtIn0pXSxjci5wcm90b3R5cGUsInRyYW5zbGF0aW9uWCIsMikseShbenMoe3R5cGU6InRyYW5zZm9ybSJ9KV0sY3IucHJvdG90eXBlLCJ0cmFuc2xhdGlvblkiLDIpLHkoW3pzKHtyZWRyYXc6MyxjaGFuZ2VDYjplPT5lLnZpc2liaWxpdHlDaGFuZ2VkKCl9KV0sY3IucHJvdG90eXBlLCJ2aXNpYmxlIiwyKSx5KFt6cyh7cmVkcmF3OjEsY2hhbmdlQ2I6ZHJ9KV0sY3IucHJvdG90eXBlLCJ6SW5kZXgiLDIpLHkoW3pzKHtyZWRyYXc6MSxjaGFuZ2VDYjpkcn0pXSxjci5wcm90b3R5cGUsInpJbmRleFN1Yk9yZGVyIiwyKTt2YXIgaHI9Y3IsdXI9ZT0+e2NvbnN0IHQ9ZTwwPy0xOjEsaT1NYXRoLmFicyhlKTtyZXR1cm4gaTw9LjA0MDQ1P2UvMTIuOTI6dCpwKChpKy4wNTUpLzEuMDU1LDIuNCl9LHByPWU9Pntjb25zdCB0PWU8MD8tMToxLGk9TWF0aC5hYnMoZSk7cmV0dXJuIGk+LjAwMzEzMDg/dCooMS4wNTUqcChpLDEvMi40KS0uMDU1KToxMi45MiplfSxncj1jbGFzcyBle2NvbnN0cnVjdG9yKGUsdCxpLHM9MSl7dGhpcy5yPUtzKDAsZXx8MCwxKSx0aGlzLmc9S3MoMCx0fHwwLDEpLHRoaXMuYj1LcygwLGl8fDAsMSksdGhpcy5hPUtzKDAsc3x8MCwxKX1zdGF0aWMgdmFsaWRDb2xvclN0cmluZyh0KXtyZXR1cm4gdC5pbmRleE9mKCIjIik+PTA/ISFlLnBhcnNlSGV4KHQpOnQuaW5kZXhPZigicmdiIik+PTA/ISFlLnN0cmluZ1RvUmdiYSh0KTohIWUubmFtZVRvSGV4W3QudG9Mb3dlckNhc2UoKV19c3RhdGljIGZyb21TdHJpbmcodCl7aWYodC5pbmRleE9mKCIjIik+PTApcmV0dXJuIGUuZnJvbUhleFN0cmluZyh0KTtjb25zdCBpPWUubmFtZVRvSGV4W3QudG9Mb3dlckNhc2UoKV07aWYoaSlyZXR1cm4gZS5mcm9tSGV4U3RyaW5nKGkpO2lmKHQuaW5kZXhPZigicmdiIik+PTApcmV0dXJuIGUuZnJvbVJnYmFTdHJpbmcodCk7dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGNvbG9yIHN0cmluZzogJyR7dH0nYCl9c3RhdGljIHRyeVBhcnNlRnJvbVN0cmluZyh0KXt0cnl7cmV0dXJuIGUuZnJvbVN0cmluZyh0KX1jYXRjaChpKXtyZXR1cm4gTC53YXJuT25jZShgaW52YWxpZCBjb2xvciBzdHJpbmc6ICcke3R9Jy5gKSxlLmZyb21BcnJheShbMCwwLDBdKX19c3RhdGljIHBhcnNlSGV4KGUpe2xldCB0O3N3aXRjaCgoZT1lLnJlcGxhY2UoLyAvZywiIikuc2xpY2UoMSkpLmxlbmd0aCl7Y2FzZSA2OmNhc2UgODp0PVtdO2ZvcihsZXQgaT0wO2k8ZS5sZW5ndGg7aSs9Mil0LnB1c2gocGFyc2VJbnQoYCR7ZVtpXX0ke2VbaSsxXX1gLDE2KSk7YnJlYWs7Y2FzZSAzOmNhc2UgNDp0PWUuc3BsaXQoIiIpLm1hcChlPT5wYXJzZUludChlLDE2KSkubWFwKGU9PmUrMTYqZSl9aWYoKG51bGw9PXQ/dm9pZCAwOnQubGVuZ3RoKT49MyYmdC5ldmVyeShlPT5lPj0wKSlyZXR1cm4gMz09PXQubGVuZ3RoJiZ0LnB1c2goMjU1KSx0fXN0YXRpYyBmcm9tSGV4U3RyaW5nKHQpe2NvbnN0IGk9ZS5wYXJzZUhleCh0KTtpZihpKXtjb25zdFt0LHMscixvXT1pO3JldHVybiBuZXcgZSh0LzI1NSxzLzI1NSxyLzI1NSxvLzI1NSl9dGhyb3cgbmV3IEVycm9yKGBNYWxmb3JtZWQgaGV4YWRlY2ltYWwgY29sb3Igc3RyaW5nOiAnJHt0fSdgKX1zdGF0aWMgc3RyaW5nVG9SZ2JhKGUpe2xldFt0LGldPVtOYU4sTmFOXTtmb3IobGV0IHM9MDtzPGUubGVuZ3RoO3MrKyl7Y29uc3Qgcj1lW3NdO2lmKHR8fCIoIiE9PXIpe2lmKCIpIj09PXIpe2k9czticmVha319ZWxzZSB0PXN9Y29uc3Qgcz10JiZpJiZlLnN1YnN0cmluZyh0KzEsaSk7aWYoIXMpcmV0dXJuO2NvbnN0IHI9cy5zcGxpdCgiLCIpLG89W107Zm9yKGxldCBlPTA7ZTxyLmxlbmd0aDtlKyspe2NvbnN0IHQ9cltlXTtsZXQgaT1wYXJzZUZsb2F0KHQpO2lmKGlzTmFOKGkpKXJldHVybjt0LmluZGV4T2YoIiUiKT49MD8oaT1LcygwLGksMTAwKSxpLz0xMDApOjM9PT1lP2k9S3MoMCxpLDEpOihpPUtzKDAsaSwyNTUpLGkvPTI1NSksby5wdXNoKGkpfXJldHVybiBvfXN0YXRpYyBmcm9tUmdiYVN0cmluZyh0KXtjb25zdCBpPWUuc3RyaW5nVG9SZ2JhKHQpO2lmKGkpe2lmKDM9PT1pLmxlbmd0aClyZXR1cm4gbmV3IGUoaVswXSxpWzFdLGlbMl0pO2lmKDQ9PT1pLmxlbmd0aClyZXR1cm4gbmV3IGUoaVswXSxpWzFdLGlbMl0saVszXSl9dGhyb3cgbmV3IEVycm9yKGBNYWxmb3JtZWQgcmdiL3JnYmEgY29sb3Igc3RyaW5nOiAnJHt0fSdgKX1zdGF0aWMgZnJvbUFycmF5KHQpe2lmKDQ9PT10Lmxlbmd0aClyZXR1cm4gbmV3IGUodFswXSx0WzFdLHRbMl0sdFszXSk7aWYoMz09PXQubGVuZ3RoKXJldHVybiBuZXcgZSh0WzBdLHRbMV0sdFsyXSk7dGhyb3cgbmV3IEVycm9yKCJUaGUgZ2l2ZW4gYXJyYXkgc2hvdWxkIGNvbnRhaW4gMyBvciA0IGNvbG9yIGNvbXBvbmVudHMgKG51bWJlcnMpLiIpfXN0YXRpYyBmcm9tSFNCKHQsaSxzLHI9MSl7Y29uc3Qgbz1lLkhTQnRvUkdCKHQsaSxzKTtyZXR1cm4gbmV3IGUob1swXSxvWzFdLG9bMl0scil9c3RhdGljIGZyb21IU0wodCxpLHMscj0xKXtjb25zdCBvPWUuSFNMdG9SR0IodCxpLHMpO3JldHVybiBuZXcgZShvWzBdLG9bMV0sb1syXSxyKX1zdGF0aWMgZnJvbU9LTENIKHQsaSxzLHI9MSl7Y29uc3Qgbz1lLk9LTENIdG9SR0IodCxpLHMpO3JldHVybiBuZXcgZShvWzBdLG9bMV0sb1syXSxyKX1zdGF0aWMgcGFkSGV4KGUpe3JldHVybiAxPT09ZS5sZW5ndGg/IjAiK2U6ZX10b0hleFN0cmluZygpe2xldCB0PSIjIitlLnBhZEhleChNYXRoLnJvdW5kKDI1NSp0aGlzLnIpLnRvU3RyaW5nKDE2KSkrZS5wYWRIZXgoTWF0aC5yb3VuZCgyNTUqdGhpcy5nKS50b1N0cmluZygxNikpK2UucGFkSGV4KE1hdGgucm91bmQoMjU1KnRoaXMuYikudG9TdHJpbmcoMTYpKTtyZXR1cm4gdGhpcy5hPDEmJih0Kz1lLnBhZEhleChNYXRoLnJvdW5kKDI1NSp0aGlzLmEpLnRvU3RyaW5nKDE2KSkpLHR9dG9SZ2JhU3RyaW5nKGU9Myl7Y29uc3QgdD1bTWF0aC5yb3VuZCgyNTUqdGhpcy5yKSxNYXRoLnJvdW5kKDI1NSp0aGlzLmcpLE1hdGgucm91bmQoMjU1KnRoaXMuYildLGk9TWF0aC5wb3coMTAsZSk7cmV0dXJuIDEhPT10aGlzLmE/KHQucHVzaChNYXRoLnJvdW5kKHRoaXMuYSppKS9pKSxgcmdiYSgke3Quam9pbigiLCAiKX0pYCk6YHJnYigke3Quam9pbigiLCAiKX0pYH10b1N0cmluZygpe3JldHVybiAxPT09dGhpcy5hP3RoaXMudG9IZXhTdHJpbmcoKTp0aGlzLnRvUmdiYVN0cmluZygpfXRvSFNCKCl7cmV0dXJuIGUuUkdCdG9IU0IodGhpcy5yLHRoaXMuZyx0aGlzLmIpfXN0YXRpYyBSR0J0b09LTENIKGUsdCxpKXtjb25zdCBzPXVyKGUpLHI9dXIodCksbz11cihpKSxuPU1hdGguY2JydCguNDEyMjIxNDcwOCpzKy41MzYzMzI1MzYzKnIrLjA1MTQ0NTk5MjkqbyksYT1NYXRoLmNicnQoLjIxMTkwMzQ5ODIqcysuNjgwNjk5NTQ1MSpyKy4xMDczOTY5NTY2Km8pLGw9TWF0aC5jYnJ0KC4wODgzMDI0NjE5KnMrLjI4MTcxODgzNzYqcisuNjI5OTc4NzAwNSpvKSxkPS4yMTA0NTQyNTUzKm4rLjc5MzYxNzc4NSphLS4wMDQwNzIwNDY4KmwsYz0xLjk3Nzk5ODQ5NTEqbi0yLjQyODU5MjIwNSphKy40NTA1OTM3MDk5KmwsaD0uMDI1OTA0MDM3MSpuKy43ODI3NzE3NjYyKmEtLjgwODY3NTc2NipsLHU9MTgwKk1hdGguYXRhbjIoaCxjKS9NYXRoLlBJO3JldHVybltkLE1hdGguaHlwb3QoYyxoKSx1Pj0wP3U6dSszNjBdfXN0YXRpYyBPS0xDSHRvUkdCKGUsdCxpKXtjb25zdCBzPWUscj10Kk1hdGguY29zKGkqTWF0aC5QSS8xODApLG89dCpNYXRoLnNpbihpKk1hdGguUEkvMTgwKSxuPXAocysuMzk2MzM3Nzc3NCpyKy4yMTU4MDM3NTczKm8sMyksYT1wKHMtLjEwNTU2MTM0NTgqci0uMDYzODU0MTcyOCpvLDMpLGw9cChzLS4wODk0ODQxNzc1KnItMS4yOTE0ODU1NDgqbywzKSxkPS0xLjI2ODQzODAwNDYqbisyLjYwOTc1NzQwMTEqYS0uMzQxMzE5Mzk2NSpsLGM9LS4wMDQxOTYwODYzKm4tLjcwMzQxODYxNDcqYSsxLjcwNzYxNDcwMSpsO3JldHVybltwcig0LjA3Njc0MTY2MjEqbi0zLjMwNzcxMTU5MTMqYSsuMjMwOTY5OTI5MipsKSxwcihkKSxwcihjKV19c3RhdGljIFJHQnRvSFNMKGUsdCxpKXtjb25zdCBzPU1hdGgubWluKGUsdCxpKSxyPU1hdGgubWF4KGUsdCxpKSxvPShyK3MpLzI7bGV0IG4sYTtpZihyPT09cyluPU5hTixhPTA7ZWxzZXtjb25zdCBsPXItczthPW8+LjU/bC8oMi1yLXMpOmwvKHIrcyksbj1yPT09ZT8odC1pKS9sKyh0PGk/NjowKTpyPT09dD8oaS1lKS9sKzI6KGUtdCkvbCs0LG4qPTYwfXJldHVybltuLGEsb119c3RhdGljIEhTTHRvUkdCKGUsdCxpKXtpZigwPT09dClyZXR1cm5baSxpLGldO2NvbnN0IHM9aTwuNT9pKigxK3QpOmkrdC1pKnQscj0yKmktcztmdW5jdGlvbiBvKGUpe3JldHVybiBlPDAmJihlKz0xKSxlPjEmJihlLT0xKSxlPDEvNj9yKzYqKHMtcikqZTplPC41P3M6ZTwyLzM/cisocy1yKSooMi8zLWUpKjY6cn1yZXR1cm5bbyhlLzM2MCsxLzMpLG8oZS8zNjApLG8oZS8zNjAtMS8zKV19c3RhdGljIFJHQnRvSFNCKGUsdCxpKXtjb25zdCBzPU1hdGgubWluKGUsdCxpKSxyPU1hdGgubWF4KGUsdCxpKTtsZXQgbz1OYU47aWYocyE9PXIpe2NvbnN0IG49ci1zLGE9KHItZSkvbixsPShyLXQpL24sZD0oci1pKS9uO289ZT09PXI/ZC1sOnQ9PT1yPzIrYS1kOjQrbC1hLG8vPTYsbzwwJiYobys9MSl9cmV0dXJuWzM2MCpvLDAhPT1yPyhyLXMpL3I6MCxyXX1zdGF0aWMgSFNCdG9SR0IoZSx0LGkpe2lzTmFOKGUpJiYoZT0wKSxlPShlJTM2MCszNjApJTM2MC8zNjA7bGV0IHM9MCxyPTAsbz0wO2lmKDA9PT10KXM9cj1vPWk7ZWxzZXtjb25zdCBuPTYqKGUtTWF0aC5mbG9vcihlKSksYT1uLU1hdGguZmxvb3IobiksbD1pKigxLXQpLGQ9aSooMS10KmEpLGM9aSooMS10KigxLWEpKTtzd2l0Y2gobj4+MCl7Y2FzZSAwOnM9aSxyPWMsbz1sO2JyZWFrO2Nhc2UgMTpzPWQscj1pLG89bDticmVhaztjYXNlIDI6cz1sLHI9aSxvPWM7YnJlYWs7Y2FzZSAzOnM9bCxyPWQsbz1pO2JyZWFrO2Nhc2UgNDpzPWMscj1sLG89aTticmVhaztjYXNlIDU6cz1pLHI9bCxvPWR9fXJldHVybltzLHIsb119ZGVyaXZlKHQsaSxzLHIpe2NvbnN0IG89ZS5SR0J0b0hTQih0aGlzLnIsdGhpcy5nLHRoaXMuYik7bGV0IG49b1syXTswPT1uJiZzPjEmJihuPS4wNSk7Y29uc3QgYT0oKG9bMF0rdCklMzYwKzM2MCklMzYwLGw9S3MoMCxvWzFdKmksMSk7bj1LcygwLG4qcywxKTtjb25zdCBkPUtzKDAsdGhpcy5hKnIsMSksYz1lLkhTQnRvUkdCKGEsbCxuKTtyZXR1cm4gYy5wdXNoKGQpLGUuZnJvbUFycmF5KGMpfWJyaWdodGVyKCl7cmV0dXJuIHRoaXMuZGVyaXZlKDAsMSwxLy43LDEpfWRhcmtlcigpe3JldHVybiB0aGlzLmRlcml2ZSgwLDEsLjcsMSl9c3RhdGljIGludGVycG9sYXRlKHQsaSl7Y29uc3Qgcz1lLnRyeVBhcnNlRnJvbVN0cmluZyh0KSxyPWUudHJ5UGFyc2VGcm9tU3RyaW5nKGkpO3JldHVybiB0PT57Y29uc3QgaT0oZSxpKT0+ZSooMS10KStpKnQ7cmV0dXJuIG5ldyBlKGkocy5yLHIuciksaShzLmcsci5nKSxpKHMuYixyLmIpLGkocy5hLHIuYSkpLnRvU3RyaW5nKCl9fX07Z3IuZGlkRGVidWc9ITEsZ3IubmFtZVRvSGV4PU9iamVjdC5mcmVlemUoe2FsaWNlYmx1ZToiI0YwRjhGRiIsYW50aXF1ZXdoaXRlOiIjRkFFQkQ3IixhcXVhOiIjMDBGRkZGIixhcXVhbWFyaW5lOiIjN0ZGRkQ0IixhenVyZToiI0YwRkZGRiIsYmVpZ2U6IiNGNUY1REMiLGJpc3F1ZToiI0ZGRTRDNCIsYmxhY2s6IiMwMDAwMDAiLGJsYW5jaGVkYWxtb25kOiIjRkZFQkNEIixibHVlOiIjMDAwMEZGIixibHVldmlvbGV0OiIjOEEyQkUyIixicm93bjoiI0E1MkEyQSIsYnVybHl3b29kOiIjREVCODg3IixjYWRldGJsdWU6IiM1RjlFQTAiLGNoYXJ0cmV1c2U6IiM3RkZGMDAiLGNob2NvbGF0ZToiI0QyNjkxRSIsY29yYWw6IiNGRjdGNTAiLGNvcm5mbG93ZXJibHVlOiIjNjQ5NUVEIixjb3Juc2lsazoiI0ZGRjhEQyIsY3JpbXNvbjoiI0RDMTQzQyIsY3lhbjoiIzAwRkZGRiIsZGFya2JsdWU6IiMwMDAwOEIiLGRhcmtjeWFuOiIjMDA4QjhCIixkYXJrZ29sZGVucm9kOiIjQjg4NjBCIixkYXJrZ3JheToiI0E5QTlBOSIsZGFya2dyZWVuOiIjMDA2NDAwIixkYXJrZ3JleToiI0E5QTlBOSIsZGFya2toYWtpOiIjQkRCNzZCIixkYXJrbWFnZW50YToiIzhCMDA4QiIsZGFya29saXZlZ3JlZW46IiM1NTZCMkYiLGRhcmtvcmFuZ2U6IiNGRjhDMDAiLGRhcmtvcmNoaWQ6IiM5OTMyQ0MiLGRhcmtyZWQ6IiM4QjAwMDAiLGRhcmtzYWxtb246IiNFOTk2N0EiLGRhcmtzZWFncmVlbjoiIzhGQkM4RiIsZGFya3NsYXRlYmx1ZToiIzQ4M0Q4QiIsZGFya3NsYXRlZ3JheToiIzJGNEY0RiIsZGFya3NsYXRlZ3JleToiIzJGNEY0RiIsZGFya3R1cnF1b2lzZToiIzAwQ0VEMSIsZGFya3Zpb2xldDoiIzk0MDBEMyIsZGVlcHBpbms6IiNGRjE0OTMiLGRlZXBza3libHVlOiIjMDBCRkZGIixkaW1ncmF5OiIjNjk2OTY5IixkaW1ncmV5OiIjNjk2OTY5Iixkb2RnZXJibHVlOiIjMUU5MEZGIixmaXJlYnJpY2s6IiNCMjIyMjIiLGZsb3JhbHdoaXRlOiIjRkZGQUYwIixmb3Jlc3RncmVlbjoiIzIyOEIyMiIsZnVjaHNpYToiI0ZGMDBGRiIsZ2FpbnNib3JvOiIjRENEQ0RDIixnaG9zdHdoaXRlOiIjRjhGOEZGIixnb2xkOiIjRkZENzAwIixnb2xkZW5yb2Q6IiNEQUE1MjAiLGdyYXk6IiM4MDgwODAiLGdyZWVuOiIjMDA4MDAwIixncmVlbnllbGxvdzoiI0FERkYyRiIsZ3JleToiIzgwODA4MCIsaG9uZXlkZXc6IiNGMEZGRjAiLGhvdHBpbms6IiNGRjY5QjQiLGluZGlhbnJlZDoiI0NENUM1QyIsaW5kaWdvOiIjNEIwMDgyIixpdm9yeToiI0ZGRkZGMCIsa2hha2k6IiNGMEU2OEMiLGxhdmVuZGVyOiIjRTZFNkZBIixsYXZlbmRlcmJsdXNoOiIjRkZGMEY1IixsYXduZ3JlZW46IiM3Q0ZDMDAiLGxlbW9uY2hpZmZvbjoiI0ZGRkFDRCIsbGlnaHRibHVlOiIjQUREOEU2IixsaWdodGNvcmFsOiIjRjA4MDgwIixsaWdodGN5YW46IiNFMEZGRkYiLGxpZ2h0Z29sZGVucm9keWVsbG93OiIjRkFGQUQyIixsaWdodGdyYXk6IiNEM0QzRDMiLGxpZ2h0Z3JlZW46IiM5MEVFOTAiLGxpZ2h0Z3JleToiI0QzRDNEMyIsbGlnaHRwaW5rOiIjRkZCNkMxIixsaWdodHNhbG1vbjoiI0ZGQTA3QSIsbGlnaHRzZWFncmVlbjoiIzIwQjJBQSIsbGlnaHRza3libHVlOiIjODdDRUZBIixsaWdodHNsYXRlZ3JheToiIzc3ODg5OSIsbGlnaHRzbGF0ZWdyZXk6IiM3Nzg4OTkiLGxpZ2h0c3RlZWxibHVlOiIjQjBDNERFIixsaWdodHllbGxvdzoiI0ZGRkZFMCIsbGltZToiIzAwRkYwMCIsbGltZWdyZWVuOiIjMzJDRDMyIixsaW5lbjoiI0ZBRjBFNiIsbWFnZW50YToiI0ZGMDBGRiIsbWFyb29uOiIjODAwMDAwIixtZWRpdW1hcXVhbWFyaW5lOiIjNjZDREFBIixtZWRpdW1ibHVlOiIjMDAwMENEIixtZWRpdW1vcmNoaWQ6IiNCQTU1RDMiLG1lZGl1bXB1cnBsZToiIzkzNzBEQiIsbWVkaXVtc2VhZ3JlZW46IiMzQ0IzNzEiLG1lZGl1bXNsYXRlYmx1ZToiIzdCNjhFRSIsbWVkaXVtc3ByaW5nZ3JlZW46IiMwMEZBOUEiLG1lZGl1bXR1cnF1b2lzZToiIzQ4RDFDQyIsbWVkaXVtdmlvbGV0cmVkOiIjQzcxNTg1IixtaWRuaWdodGJsdWU6IiMxOTE5NzAiLG1pbnRjcmVhbToiI0Y1RkZGQSIsbWlzdHlyb3NlOiIjRkZFNEUxIixtb2NjYXNpbjoiI0ZGRTRCNSIsbmF2YWpvd2hpdGU6IiNGRkRFQUQiLG5hdnk6IiMwMDAwODAiLG9sZGxhY2U6IiNGREY1RTYiLG9saXZlOiIjODA4MDAwIixvbGl2ZWRyYWI6IiM2QjhFMjMiLG9yYW5nZToiI0ZGQTUwMCIsb3JhbmdlcmVkOiIjRkY0NTAwIixvcmNoaWQ6IiNEQTcwRDYiLHBhbGVnb2xkZW5yb2Q6IiNFRUU4QUEiLHBhbGVncmVlbjoiIzk4RkI5OCIscGFsZXR1cnF1b2lzZToiI0FGRUVFRSIscGFsZXZpb2xldHJlZDoiI0RCNzA5MyIscGFwYXlhd2hpcDoiI0ZGRUZENSIscGVhY2hwdWZmOiIjRkZEQUI5IixwZXJ1OiIjQ0Q4NTNGIixwaW5rOiIjRkZDMENCIixwbHVtOiIjRERBMEREIixwb3dkZXJibHVlOiIjQjBFMEU2IixwdXJwbGU6IiM4MDAwODAiLHJlYmVjY2FwdXJwbGU6IiM2NjMzOTkiLHJlZDoiI0ZGMDAwMCIscm9zeWJyb3duOiIjQkM4RjhGIixyb3lhbGJsdWU6IiM0MTY5RTEiLHNhZGRsZWJyb3duOiIjOEI0NTEzIixzYWxtb246IiNGQTgwNzIiLHNhbmR5YnJvd246IiNGNEE0NjAiLHNlYWdyZWVuOiIjMkU4QjU3IixzZWFzaGVsbDoiI0ZGRjVFRSIsc2llbm5hOiIjQTA1MjJEIixzaWx2ZXI6IiNDMEMwQzAiLHNreWJsdWU6IiM4N0NFRUIiLHNsYXRlYmx1ZToiIzZBNUFDRCIsc2xhdGVncmF5OiIjNzA4MDkwIixzbGF0ZWdyZXk6IiM3MDgwOTAiLHNub3c6IiNGRkZBRkEiLHNwcmluZ2dyZWVuOiIjMDBGRjdGIixzdGVlbGJsdWU6IiM0NjgyQjQiLHRhbjoiI0QyQjQ4QyIsdGVhbDoiIzAwODA4MCIsdGhpc3RsZToiI0Q4QkZEOCIsdG9tYXRvOiIjRkY2MzQ3Iix0cmFuc3BhcmVudDoiIzAwMDAwMDAwIix0dXJxdW9pc2U6IiM0MEUwRDAiLHZpb2xldDoiI0VFODJFRSIsd2hlYXQ6IiNGNURFQjMiLHdoaXRlOiIjRkZGRkZGIix3aGl0ZXNtb2tlOiIjRjVGNUY1Iix5ZWxsb3c6IiNGRkZGMDAiLHllbGxvd2dyZWVuOiIjOUFDRDMyIn0pO3ZhciBtcj1ncjtmdW5jdGlvbiBmcihlLHQpe3JldHVybiBpPT5OdW1iZXIoZSkqKDEtaSkrTnVtYmVyKHQpKml9dmFyIHZyPXt9O0ModnIse2Vhc2VJbjooKT0+eXIsZWFzZUluT3V0OigpPT53cixlYXNlSW5PdXRRdWFkOigpPT5ScixlYXNlSW5RdWFkOigpPT5icixlYXNlT3V0OigpPT5TcixlYXNlT3V0UXVhZDooKT0+RXIsaW52ZXJzZUVhc2VPdXQ6KCk9PnhyLGxpbmVhcjooKT0+Q3J9KTt2YXIgQ3I9ZT0+ZSx5cj1lPT4xLU1hdGguY29zKGUqTWF0aC5QSS8yKSxTcj1lPT5NYXRoLnNpbihlKk1hdGguUEkvMiksd3I9ZT0+LShNYXRoLmNvcyhlKk1hdGguUEkpLTEpLzIsYnI9ZT0+ZSplLEVyPWU9PjEtcCgxLWUsMiksUnI9ZT0+ZTwuNT8yKmUqZToxLXAoLTIqZSsyLDIpLzIseHI9ZT0+MipNYXRoLmFzaW4oZSkvTWF0aC5QSSxUcj17YW5pbWF0aW9uRHVyYXRpb246MSxhbmltYXRpb25EZWxheTowfSxEcj17YW5pbWF0aW9uRHVyYXRpb246LjI1LGFuaW1hdGlvbkRlbGF5OjB9LE9yPXthbmltYXRpb25EdXJhdGlvbjouNSxhbmltYXRpb25EZWxheTouMjV9LEFyPXthbmltYXRpb25EdXJhdGlvbjouMjUsYW5pbWF0aW9uRGVsYXk6Ljc1fSxQcj17YW5pbWF0aW9uRHVyYXRpb246LjIsYW5pbWF0aW9uRGVsYXk6MX0sTXI9WyJpbml0aWFsIiwicmVtb3ZlIiwidXBkYXRlIiwiYWRkIiwidHJhaWxpbmciLCJlbmQiXSxMcj17aW5pdGlhbDpUcixhZGQ6QXIscmVtb3ZlOkRyLHVwZGF0ZTpPcix0cmFpbGluZzpQcixlbmQ6e2FuaW1hdGlvbkRlbGF5OjEuMixhbmltYXRpb25EdXJhdGlvbjowfX0sRnI9KGU9PihlLkxvb3A9Imxvb3AiLGUuUmV2ZXJzZT0icmV2ZXJzZSIsZSkpKEZyfHx7fSk7ZnVuY3Rpb24gSXIoZSl7cmV0dXJuIGUuZXZlcnkoZT0+ZSBpbnN0YW5jZW9mIGhyKT97bm9kZXM6ZSxzZWxlY3Rpb25zOltdfTp7bm9kZXM6W10sc2VsZWN0aW9uczplfX12YXIgTnI9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dmFyIHQsaSxzLHIsbyxuLGEsbDt0aGlzLmlzQ29tcGxldGU9ITEsdGhpcy5lbGFwc2VkPTAsdGhpcy5pdGVyYXRpb249MCx0aGlzLmlzUGxheWluZz0hMSx0aGlzLmlzUmV2ZXJzZT0hMSx0aGlzLmlkPWUuaWQsdGhpcy5ncm91cElkPWUuZ3JvdXBJZCx0aGlzLmF1dG9wbGF5PW51bGw9PSh0PWUuYXV0b3BsYXkpfHx0LHRoaXMuZWFzZT1udWxsIT0oaT1lLmVhc2UpP2k6Q3IsdGhpcy5waGFzZT1lLnBoYXNlO2NvbnN0IGQ9bnVsbCE9KHM9ZS5kdXJhdGlvbik/czpMclt0aGlzLnBoYXNlXS5hbmltYXRpb25EdXJhdGlvbjt0aGlzLmR1cmF0aW9uPWQqZS5kZWZhdWx0RHVyYXRpb24sdGhpcy5kZWxheT0obnVsbCE9KHI9ZS5kZWxheSk/cjowKSplLmRlZmF1bHREdXJhdGlvbix0aGlzLm9uQ29tcGxldGU9ZS5vbkNvbXBsZXRlLHRoaXMub25QbGF5PWUub25QbGF5LHRoaXMub25TdG9wPWUub25TdG9wLHRoaXMub25VcGRhdGU9ZS5vblVwZGF0ZSx0aGlzLmludGVycG9sYXRlPXRoaXMuY3JlYXRlSW50ZXJwb2xhdG9yKGUuZnJvbSxlLnRvKSwhMD09PWUuc2tpcD8obnVsbD09KG89dGhpcy5vblVwZGF0ZSl8fG8uY2FsbCh0aGlzLGUudG8sITEsdGhpcyksbnVsbD09KG49dGhpcy5vblN0b3ApfHxuLmNhbGwodGhpcyx0aGlzKSxudWxsPT0oYT10aGlzLm9uQ29tcGxldGUpfHxhLmNhbGwodGhpcyx0aGlzKSx0aGlzLmlzQ29tcGxldGU9ITApOnRoaXMuYXV0b3BsYXkmJih0aGlzLnBsYXkoKSxudWxsPT0obD10aGlzLm9uVXBkYXRlKXx8bC5jYWxsKHRoaXMsZS5mcm9tLCEwLHRoaXMpKSwhMSE9PWUuY29sbGFwc2FibGUmJih0aGlzLmR1cmF0aW9uPXRoaXMuY2hlY2tDb2xsYXBzZShlLHRoaXMuZHVyYXRpb24pKX1jaGVja0NvbGxhcHNlKGUsdCl7bGV0IGk9ZS5mcm9tPT09ZS50bztyZXR1cm4gaXx8KGk9Im9iamVjdCI9PXR5cGVvZiBlLmZyb20mJm51bGw9PXl0KGUuZnJvbSxlLnRvKSksaT8wOnR9cGxheSgpe3ZhciBlO3RoaXMuaXNQbGF5aW5nfHx0aGlzLmlzQ29tcGxldGV8fCh0aGlzLmlzUGxheWluZz0hMCxudWxsPT0oZT10aGlzLm9uUGxheSl8fGUuY2FsbCh0aGlzLHRoaXMpKX1wYXVzZSgpe3RoaXMuaXNQbGF5aW5nJiYodGhpcy5pc1BsYXlpbmc9ITEpfXN0b3AoKXt2YXIgZTt0aGlzLmlzUGxheWluZyYmKHRoaXMuaXNQbGF5aW5nPSExLHRoaXMuaXNDb21wbGV0ZT0hMCxudWxsPT0oZT10aGlzLm9uU3RvcCl8fGUuY2FsbCh0aGlzLHRoaXMpKX11cGRhdGUoZSl7dmFyIHQsaTtjb25zdCBzPXRoaXMuZWxhcHNlZDtpZih0aGlzLmVsYXBzZWQrPWUsdGhpcy5kZWxheT50aGlzLmVsYXBzZWQpcmV0dXJuIDA7Y29uc3Qgcj10aGlzLmludGVycG9sYXRlKHRoaXMuaXNSZXZlcnNlPzEtdGhpcy5kZWx0YTp0aGlzLmRlbHRhKTtudWxsPT0odD10aGlzLm9uVXBkYXRlKXx8dC5jYWxsKHRoaXMsciwhMSx0aGlzKTtjb25zdCBvPXRoaXMuZGVsYXkrdGhpcy5kdXJhdGlvbjtyZXR1cm4gdGhpcy5lbGFwc2VkPj1vPyh0aGlzLnN0b3AoKSx0aGlzLmlzQ29tcGxldGU9ITAsbnVsbD09KGk9dGhpcy5vbkNvbXBsZXRlKXx8aS5jYWxsKHRoaXMsdGhpcyksZS0oby1zKSk6MH1nZXQgZGVsdGEoKXtyZXR1cm4gdGhpcy5lYXNlKEtzKDAsKHRoaXMuZWxhcHNlZC10aGlzLmRlbGF5KS90aGlzLmR1cmF0aW9uLDEpKX1jcmVhdGVJbnRlcnBvbGF0b3IoZSx0KXtpZigib2JqZWN0IiE9dHlwZW9mIHQpcmV0dXJuIHRoaXMuaW50ZXJwb2xhdGVWYWx1ZShlLHQpO2NvbnN0IGk9W107Zm9yKGNvbnN0IHMgaW4gdCl7Y29uc3Qgcj10aGlzLmludGVycG9sYXRlVmFsdWUoZVtzXSx0W3NdKTtudWxsIT1yJiZpLnB1c2goW3Mscl0pfXJldHVybiBlPT57Y29uc3QgdD17fTtmb3IoY29uc3RbcyxyXW9mIGkpdFtzXT1yKGUpO3JldHVybiB0fX1pbnRlcnBvbGF0ZVZhbHVlKGUsdCl7aWYodm9pZCAwIT09ZSYmdm9pZCAwIT09dCl7dHJ5e3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJudW1iZXIiOnJldHVybiBmcihlLHQpO2Nhc2Uic3RyaW5nIjpyZXR1cm4gZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIj09dHlwZW9mIGUpdHJ5e2U9bXIuZnJvbVN0cmluZyhlKX1jYXRjaCh0KXtlPW1yLmZyb21BcnJheShbMCwwLDBdKX1pZigic3RyaW5nIj09dHlwZW9mIHQpdHJ5e3Q9bXIuZnJvbVN0cmluZyh0KX1jYXRjaChlKXt0PW1yLmZyb21BcnJheShbMCwwLDBdKX1jb25zdCBpPWZyKGUucix0LnIpLHM9ZnIoZS5nLHQuZykscj1mcihlLmIsdC5iKSxvPWZyKGUuYSx0LmEpO3JldHVybiBlPT5tci5mcm9tQXJyYXkoW2koZSkscyhlKSxyKGUpLG8oZSldKS50b1JnYmFTdHJpbmcoKX0oZSx0KX19Y2F0Y2goZSl7fXRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGludGVycG9sYXRlIHZhbHVlczogJHtlfSwgJHt0fWApfX19LEdyPVsicmVtb3ZlZCIsInVwZGF0ZWQiLCJhZGRlZCJdLGtyPXthZGRlZDoiYWRkIix1cGRhdGVkOiJ1cGRhdGUiLHJlbW92ZWQ6InJlbW92ZSIsdW5rbm93bjoiaW5pdGlhbCJ9O2Z1bmN0aW9uIF9yKGUsdCxpLHMscixvLG4pe2NvbnN0e2Zyb21GbjphLHRvRm46bCxpbnRlcm1lZGlhdGVGbjpkfT1yLHtub2RlczpjLHNlbGVjdGlvbnM6aH09SXIocyksdT17YWRkZWQ6e30scmVtb3ZlZDp7fX07byYmbiYmKHUuYWRkZWQ9VnMobi5hZGRlZCwhMCksdS5yZW1vdmVkPVZzKG4ucmVtb3ZlZCwhMCkpO2NvbnN0IHA9KHMscik9Pnt2YXIgYztsZXQgaCxwPTAsZz0wO2Zvcihjb25zdCBmIG9mIHIpe2NvbnN0IEM9c1twXT09PWYseT17bGFzdDpnPj1yLmxlbmd0aC0xLGxhc3RMaXZlOnA+PXMubGVuZ3RoLTEscHJldjpyW2ctMV0scHJldkZyb21Qcm9wczpoLHByZXZMaXZlOnNbcC0xXSxuZXh0OnJbZysxXSxuZXh0TGl2ZTpzW3ArKEM/MTowKV19LFM9YCR7ZX1fJHt0fV8ke2YuaWR9YDtpLnN0b3BCeUFuaW1hdGlvbklkKFMpO2xldCB3PSJ1bmtub3duIjtDP28mJm4mJih3PUJyKGYsZi5kYXR1bSxvLHUpKTp3PSJyZW1vdmVkIjtjb25zdCBiPWEoZixmLmRhdHVtLHcseSkse3BoYXNlOkUsc3RhcnQ6UixmaW5pc2g6eCxkZWxheTpULGR1cmF0aW9uOkR9PWIsTz12KGIsWyJwaGFzZSIsInN0YXJ0IiwiZmluaXNoIiwiZGVsYXkiLCJkdXJhdGlvbiJdKSxBPWwoZixmLmRhdHVtLHcseSkse3BoYXNlOlAsc3RhcnQ6TSxmaW5pc2g6TCxkZWxheTpGLGR1cmF0aW9uOkl9PUEsTj12KEEsWyJwaGFzZSIsInN0YXJ0IiwiZmluaXNoIiwiZGVsYXkiLCJkdXJhdGlvbiJdKSxHPW51bGw9PXgmJm51bGw9PUw7aS5hbmltYXRlKHtpZDpTLGdyb3VwSWQ6ZSxwaGFzZTpudWxsIT0oYz1udWxsIT1FP0U6UCk/YzoidXBkYXRlIixkdXJhdGlvbjpudWxsIT1EP0Q6SSxkZWxheTpudWxsIT1UP1Q6Rixmcm9tOk8sdG86TixlYXNlOlNyLGNvbGxhcHNhYmxlOkcsb25QbGF5OigpPT57Zi5zZXRQcm9wZXJ0aWVzKG0obSh7fSxSKSxNKSl9LG9uVXBkYXRlKGUpe2Yuc2V0UHJvcGVydGllcyhlKSxkJiZmLnNldFByb3BlcnRpZXMoZChmLGYuZGF0dW0sdyx5KSl9LG9uU3RvcDooKT0+e2Yuc2V0UHJvcGVydGllcyhtKG0obSh7fSxOKSx4KSxMKSl9fSksQyYmcCsrLGcrKyxoPU99fTtsZXQgZz0wO2Zvcihjb25zdCBzIG9mIGgpe2NvbnN0IHI9cy5ub2RlcygpO3Aoci5maWx0ZXIoZT0+IXMuaXNHYXJiYWdlKGUpKSxyKSxpLmFuaW1hdGUoe2lkOmAke2V9XyR7dH1fc2VsZWN0aW9uXyR7Z31gLGdyb3VwSWQ6ZSxwaGFzZToiZW5kIixmcm9tOjAsdG86MSxlYXNlOlNyLG9uU3RvcCgpe3MuY2xlYW51cCgpfX0pLGcrK31wKGMsYyl9ZnVuY3Rpb24gVnIoZSx0LGkscyxyLG8sbil7Y29uc3R7bm9kZXM6YSxzZWxlY3Rpb25zOmx9PUlyKHMpLHtzdGFydDpkPXt9LGZpbmlzaDpjLHBoYXNlOmh9PW4sdT1udWxsPT1jO2kuYW5pbWF0ZSh7aWQ6YCR7ZX1fJHt0fWAsZ3JvdXBJZDplLHBoYXNlOm51bGwhPWg/aDoidXBkYXRlIixmcm9tOnIsdG86byxlYXNlOlNyLGNvbGxhcHNhYmxlOnUsb25QbGF5OigpPT57Zm9yKGNvbnN0IGUgb2YgYSllLnNldFByb3BlcnRpZXMoZCk7Zm9yKGNvbnN0IGUgb2YgbClmb3IoY29uc3QgdCBvZiBlLm5vZGVzKCkpdC5zZXRQcm9wZXJ0aWVzKGQpfSxvblVwZGF0ZShlKXtmb3IoY29uc3QgdCBvZiBhKXQuc2V0UHJvcGVydGllcyhlKTtmb3IoY29uc3QgdCBvZiBsKWZvcihjb25zdCBpIG9mIHQubm9kZXMoKSlpLnNldFByb3BlcnRpZXMoZSl9LG9uU3RvcDooKT0+e2Zvcihjb25zdCBlIG9mIGEpZS5zZXRQcm9wZXJ0aWVzKG0obSh7fSxvKSxjKSk7Zm9yKGNvbnN0IGUgb2YgbClmb3IoY29uc3QgdCBvZiBlLm5vZGVzKCkpdC5zZXRQcm9wZXJ0aWVzKG0obSh7fSxvKSxjKSl9fSl9ZnVuY3Rpb24gQnIoZSx0LGkscyl7Y29uc3Qgcj1pKGUsdCk7cmV0dXJuIHMuYWRkZWRbcl0/ImFkZGVkIjoidXBkYXRlZCJ9dmFyIEhyPTIqTWF0aC5QSTtmdW5jdGlvbiBXcihlKXtyZXR1cm4gZSU9SHIsZSs9SHIsZSU9SHJ9ZnVuY3Rpb24ganIoZSl7cmV0dXJuIGUlPUhyLChlKz1IcikhPT1IciYmKGUlPUhyKSxlfWZ1bmN0aW9uIFVyKGUpe3JldHVybihlJT1Icik8LU1hdGguUEk/ZSs9SHI6ZT49TWF0aC5QSSYmKGUtPUhyKSxlfWZ1bmN0aW9uIHpyKGUpe3JldHVybiBlLzE4MCpNYXRoLlBJfWZ1bmN0aW9uIEtyKGUpe3JldHVybiBlL01hdGguUEkqMTgwfWZ1bmN0aW9uIFlyKGUsdCl7cmV0dXJuIGU9V3IoZSksKHQ9V3IodCkpLWUrKGU+dD8yKk1hdGguUEk6MCl9dmFyICRyPShlLHQpPT57Y29uc3QgaT1TeW1ib2woU3RyaW5nKHQpKTtlW2ldPXZvaWQgMCxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtnZXQoKXtyZXR1cm4gdGhpc1tpXX0sc2V0KGUpe3RoaXNbaV0hPT1lJiYodGhpc1tpXT1lLHRoaXMuaW52YWxpZD0hMCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiExfSl9LFhyPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy50eXBlPSJiYW5kIix0aGlzLmludmFsaWQ9ITAsdGhpcy5pbnRlcnZhbD0xLHRoaXMuaW5kZXg9bmV3IE1hcCx0aGlzLm9yZGluYWxSYW5nZT1bXSx0aGlzLl9kb21haW49W10sdGhpcy5yYW5nZT1bMCwxXSx0aGlzLl9iYW5kd2lkdGg9MSx0aGlzLl9zdGVwPTEsdGhpcy5fcmF3QmFuZHdpZHRoPTEsdGhpcy5fcGFkZGluZ0lubmVyPTAsdGhpcy5fcGFkZGluZ091dGVyPTAsdGhpcy5yb3VuZD0hMX1yZWZyZXNoKCl7dGhpcy5pbnZhbGlkJiYodGhpcy5pbnZhbGlkPSExLHRoaXMudXBkYXRlKCksdGhpcy5pbnZhbGlkJiZMLndhcm5PbmNlKCJFeHBlY3RlZCB1cGRhdGUgdG8gbm90IGludmFsaWRhdGUgc2NhbGUiKSl9c2V0IGRvbWFpbihlKXt0aGlzLmludmFsaWQ9ITA7Y29uc3QgdD1bXTt0aGlzLmluZGV4PW5ldyBNYXA7Y29uc3QgaT10aGlzLmluZGV4O2UuZm9yRWFjaChlPT57dm9pZCAwPT09aS5nZXQoZSkmJmkuc2V0KGUsdC5wdXNoKGUpLTEpfSksdGhpcy5fZG9tYWluPXR9Z2V0IGRvbWFpbigpe3JldHVybiB0aGlzLl9kb21haW59dGlja3MoKXt0aGlzLnJlZnJlc2goKTtjb25zdHtpbnRlcnZhbDplPTF9PXRoaXMsdD1NYXRoLmFicyhNYXRoLnJvdW5kKGUpKTtyZXR1cm4gdGhpcy5fZG9tYWluLmZpbHRlcigoZSxpKT0+aSV0PT0wKX1jb252ZXJ0KGUpe3RoaXMucmVmcmVzaCgpO2NvbnN0IHQ9dGhpcy5pbmRleC5nZXQoZSk7aWYodm9pZCAwPT09dClyZXR1cm4gTmFOO2NvbnN0IGk9dGhpcy5vcmRpbmFsUmFuZ2VbdF07cmV0dXJuIHZvaWQgMD09PWk/TmFOOml9aW52ZXJ0KGUpe3RoaXMucmVmcmVzaCgpO2NvbnN0IHQ9dGhpcy5vcmRpbmFsUmFuZ2UuZmluZEluZGV4KHQ9PnQ9PT1lKTtyZXR1cm4gdGhpcy5kb21haW5bdF19Z2V0IGJhbmR3aWR0aCgpe3JldHVybiB0aGlzLnJlZnJlc2goKSx0aGlzLl9iYW5kd2lkdGh9Z2V0IHN0ZXAoKXtyZXR1cm4gdGhpcy5yZWZyZXNoKCksdGhpcy5fc3RlcH1nZXQgcmF3QmFuZHdpZHRoKCl7cmV0dXJuIHRoaXMucmVmcmVzaCgpLHRoaXMuX3Jhd0JhbmR3aWR0aH1zZXQgcGFkZGluZyhlKXtlPUtzKDAsZSwxKSx0aGlzLl9wYWRkaW5nSW5uZXI9ZSx0aGlzLl9wYWRkaW5nT3V0ZXI9ZX1nZXQgcGFkZGluZygpe3JldHVybiB0aGlzLl9wYWRkaW5nSW5uZXJ9c2V0IHBhZGRpbmdJbm5lcihlKXt0aGlzLl9wYWRkaW5nSW5uZXI9S3MoMCxlLDEpfWdldCBwYWRkaW5nSW5uZXIoKXtyZXR1cm4gdGhpcy5fcGFkZGluZ0lubmVyfXNldCBwYWRkaW5nT3V0ZXIoZSl7dGhpcy5fcGFkZGluZ091dGVyPUtzKDAsZSwxKX1nZXQgcGFkZGluZ091dGVyKCl7cmV0dXJuIHRoaXMuX3BhZGRpbmdPdXRlcn11cGRhdGUoKXtjb25zdCBlPXRoaXMuX2RvbWFpbi5sZW5ndGg7aWYoMD09PWUpcmV0dXJuO2NvbnN0IHQ9dGhpcy5yb3VuZCxpPXRoaXMuX3BhZGRpbmdJbm5lcixzPXRoaXMuX3BhZGRpbmdPdXRlcixbcixvXT10aGlzLnJhbmdlLG49by1yLGE9bi9NYXRoLm1heCgxLGUrMipzLWkpLGw9dD9NYXRoLmZsb29yKGEpOmEsZD1yKyhuLWwqKGUtaSkpLzIsYz10P01hdGgucm91bmQoZCk6ZCxoPWwqKDEtaSksdT10P01hdGgucm91bmQoaCk6aCxwPWEqKDEtaSksZz1bXTtmb3IobGV0IHQ9MDt0PGU7dCsrKWcucHVzaChjK2wqdCk7dGhpcy5fYmFuZHdpZHRoPXUsdGhpcy5fcmF3QmFuZHdpZHRoPXAsdGhpcy5fc3RlcD1sLHRoaXMub3JkaW5hbFJhbmdlPWd9fTtmdW5jdGlvbiBxcihlLHQ9e30pe2NvbnN0e29wdGlvbmFsOmk9ITF9PXQ7cmV0dXJuIERlKChzLHIsbyk9Pnt2YXIgbjtjb25zdCBhPWYobSh7fSx0KSx7dGFyZ2V0OnMscHJvcGVydHk6cn0pO2lmKGkmJnZvaWQgMD09PW98fGUobyxhKSlyZXR1cm4gQ3Qoc1tyXSkmJiFDdChvKT8oc1tyXS5zZXQobyksc1tyXSk6bztjb25zdCBsPVN0cmluZyhyKS5yZXBsYWNlKC9eXyovLCIiKSxkPW51bGwhPShuPXMuY29uc3RydWN0b3IuY2xhc3NOYW1lKT9uOnMuY29uc3RydWN0b3IubmFtZS5yZXBsYWNlKC9Qcm9wZXJ0aWVzJC8sIiIpO3JldHVybiBMLndhcm4oYFByb3BlcnR5IFske2x9XSBvZiBbJHtkfV0gY2Fubm90IGJlIHNldCB0byBbJHtVbyhvKX1dJHtlLm1lc3NhZ2U/IjsgZXhwZWN0aW5nICIram8oZSxhKToiIn0sIGlnbm9yaW5nLmApLFJlfSx2b2lkIDAse29wdGlvbmFsOml9KX15KFskcl0sWHIucHJvdG90eXBlLCJpbnRlcnZhbCIsMikseShbJHJdLFhyLnByb3RvdHlwZSwicmFuZ2UiLDIpLHkoWyRyXSxYci5wcm90b3R5cGUsInJvdW5kIiwyKTt2YXIgWnIsUXI9KC4uLmUpPT57Y29uc3QgdD1bXTtyZXR1cm4gV28oKGkscyk9Pih0Lmxlbmd0aD0wLGUuZXZlcnkoZT0+e2NvbnN0IHI9ZShpLHMpO3JldHVybiByfHx0LnB1c2goam8oZSxzKSkscn0pKSwoKT0+dC5maWx0ZXIoQm9vbGVhbikuam9pbigiIEFORCAiKSl9LEpyPSguLi5lKT0+V28oKHQsaSk9PmUuc29tZShlPT5lKHQsaSkpLHQ9PmUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0PT5qbyh0LGUpfSh0KSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oIiBPUiAiKSksZW89KFpyPVdvKChlLHQpPT5DdChlKXx8X2UoZSkmJkN0KHQudGFyZ2V0W3QucHJvcGVydHldKSwiYW4gb2JqZWN0IiksT2JqZWN0LmFzc2lnbihacix7cmVzdHJpY3QoZSl7Y29uc3QgdD10PT5DdCh0KSYmdCBpbnN0YW5jZW9mIGU7cmV0dXJuIFdvKChlLGkpPT50KGUpfHxfZShlKSYmdChpLnRhcmdldFtpLnByb3BlcnR5XSksZT0+e3ZhciB0O3JldHVybiBudWxsIT0odD1qbyhacixlKSk/dDoiYW4gb2JqZWN0In0pfX0pKSx0bz1XbyhGZSwiYSBib29sZWFuIiksaW89V28oa2UsImEgZnVuY3Rpb24iKSxzbz1XbyhIZSwiYSBzdHJpbmciKSxybz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHtyZXN0cmljdCh7bWluOmUsbWF4OnR9PXt9KXtjb25zdCBpPVsiYSBudW1iZXIiXSxzPVdlKGUpLHI9V2UodCk7cmV0dXJuIHMmJnI/aS5wdXNoKGBiZXR3ZWVuICR7ZX0gYW5kICR7dH0gaW5jbHVzaXZlYCk6cz9pLnB1c2goImdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAiK2UpOnImJmkucHVzaCgibGVzcyB0aGFuIG9yIGVxdWFsIHRvICIrdCksV28oaT0+amUoaSkmJighc3x8aT49ZSkmJighcnx8aTw9dCksaS5qb2luKCIgIikpfX0pfShXbyhqZSwiYSBudW1iZXIiKSksb289V28oZT0+V2UoZSkmJmlzTmFOKGUpLCJOYU4iKSxubz1yby5yZXN0cmljdCh7bWluOjB9KSxhbz1yby5yZXN0cmljdCh7bWluOjAsbWF4OjF9KSxsbz1yby5yZXN0cmljdCh7bWluOi0zNjAsbWF4OjM2MH0pLGNvPUpyKHJvLG9vKSxobz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHtyZXN0cmljdDooe2xlbmd0aDplLG1pbkxlbmd0aDp0fT17fSk9PldvKGk9PkxlKGkpJiYoIVdlKGUpfHxpLmxlbmd0aD09PWUpJiYoIVdlKHQpfHxpLmxlbmd0aD49dCksV2UodCkmJnQ+MD8iYSBub24tZW1wdHkgYXJyYXkiOldlKGUpPyJhbiBhcnJheSBvZiBsZW5ndGggIitlOiJhbiBhcnJheSIpfSl9KFdvKExlLCJhbiBhcnJheSIpKSx1bz0oZSx0KT0+V28oKHQsaSk9PkxlKHQpJiZ0LmV2ZXJ5KHQ9PmUodCxpKSksZT0+e3ZhciBpO2NvbnN0IHM9bnVsbCE9KGk9am8oaG8sZSkpP2k6IiI7cmV0dXJuIHQ/YCR7c30gb2YgJHt0fWA6c30pLHBvPWU9PmplKGUpfHxOZShlKSxnbz1lPT5XbygodCxpKT0+IXBvKHQpfHwhcG8oaS50YXJnZXRbZV0pfHx0PGkudGFyZ2V0W2VdLCJleHBlY3RlZCB0byBiZSBsZXNzIHRoYW4gIitlKSxtbz1lPT5XbygodCxpKT0+IXBvKHQpfHwhcG8oaS50YXJnZXRbZV0pfHx0PmkudGFyZ2V0W2VdLCJleHBlY3RlZCB0byBiZSBncmVhdGVyIHRoYW4gIitlKSxmbz1XbyhOZSwiRGF0ZSBvYmplY3QiKSx2bz1KcihmbyxubyksQ289IkEgY29sb3Igc3RyaW5nIGNhbiBiZSBpbiBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtYXRzIHRvIGJlIHZhbGlkOiAjcmdiLCAjcnJnZ2JiLCByZ2IociwgZywgYiksIHJnYmEociwgZywgYiwgYSkgb3IgYSBDU1MgY29sb3IgbmFtZSBzdWNoIGFzICd3aGl0ZScsICdvcmFuZ2UnLCAnY3lhbicsIGV0YyIseW89V28oZT0+SGUoZSkmJm1yLnZhbGlkQ29sb3JTdHJpbmcoZSksImNvbG9yIFN0cmluZy4gIitDbyksU289V28odW8oeW8pLCJjb2xvciBzdHJpbmdzLiAiK0NvKSx3bz11byh0bywiYm9vbGVhbiB2YWx1ZXMiKSxibz11byhybywibnVtYmVycyIpLEVvPXVvKHNvLCJzdHJpbmdzIiksUm89V28odW8oZm8pLCJEYXRlIG9iamVjdHMiKSx4bz1Xbyh1byhlbyksIm9iamVjdHMiKSxUbz1WbyhbImJ1dHQiLCJyb3VuZCIsInNxdWFyZSJdLCJhIGxpbmUgY2FwIiksRG89Vm8oWyJyb3VuZCIsImJldmVsIiwibWl0ZXIiXSwiYSBsaW5lIGpvaW4iKSxPbz1Xbyh1byhubyksIm51bWJlcnMgc3BlY2lmeWluZyB0aGUgbGVuZ3RoIGluIHBpeGVscyBvZiBhbHRlcm5hdGluZyBkYXNoZXMgYW5kIGdhcHMsIGZvciBleGFtcGxlLCBbNiwgM10gbWVhbnMgZGFzaGVzIHdpdGggYSBsZW5ndGggb2YgNiBwaXhlbHMgd2l0aCBnYXBzIGJldHdlZW4gb2YgMyBwaXhlbHMuIiksQW89Vm8oWyJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiXSwiYSBwb3NpdGlvbiIpLFBvPVZvKFsibm9ybWFsIiwiaXRhbGljIiwib2JsaXF1ZSJdLCJhIGZvbnQgc3R5bGUiKSxNbz1KcihWbyhbIm5vcm1hbCIsImJvbGQiLCJib2xkZXIiLCJsaWdodGVyIl0sImEgZm9udCB3ZWlnaHQiKSxyby5yZXN0cmljdCh7bWluOjEsbWF4OjFlM30pKSxMbz1WbyhbIm5ldmVyIiwiYWx3YXlzIiwiaHlwaGVuYXRlIiwib24tc3BhY2UiXSwiYSB0ZXh0IHdyYXAgc3RyYXRlZ3kiKSxGbz1WbyhbImxlZnQiLCJjZW50ZXIiLCJyaWdodCJdLCJhIHRleHQgYWxpZ24iKSxJbz1WbyhbInRvcCIsIm1pZGRsZSIsImJvdHRvbSJdLCJhIHZlcnRpY2FsIGFsaWduIiksTm89Vm8oWyJlbGxpcHNpcyIsImhpZGUiXSwiYW4gb3ZlcmZsb3cgc3RyYXRlZ3kiKSxHbz1WbyhbImhvcml6b250YWwiLCJ2ZXJ0aWNhbCJdLCJhIGRpcmVjdGlvbiIpLGtvPVZvKFsiaW5zaWRlIiwib3V0c2lkZSJdLCJhIHBsYWNlbWVudCIpLF9vPUpyKFZvKFsiZXhhY3QiLCJuZWFyZXN0Il0sImludGVyYWN0aW9uIHJhbmdlIikscm8pO2Z1bmN0aW9uIFZvKGUsdD0iYSIpe3JldHVybiBXbyh0PT5lLmluY2x1ZGVzKHQpLGAke3R9IGtleXdvcmQgc3VjaCBhcyAke2Z1bmN0aW9uKGUpe2NvbnN0IHQ9ZS5tYXAoZT0+YCcke2V9J2ApO2lmKDE9PT10Lmxlbmd0aClyZXR1cm4gdFswXTtjb25zdCBpPXQucG9wKCk7cmV0dXJuYCR7dC5qb2luKCIsICIpfSBvciAke2l9YH0oZSl9YCl9dmFyIEJvPUpyKFFyKHJvLnJlc3RyaWN0KHttaW46MX0pLGdvKCJtYXhTcGFjaW5nIikpLG9vKSxIbz1KcihRcihyby5yZXN0cmljdCh7bWluOjF9KSxtbygibWluU3BhY2luZyIpKSxvbyk7ZnVuY3Rpb24gV28oZSx0KXtyZXR1cm4gZS5tZXNzYWdlPXQsZX1mdW5jdGlvbiBqbyhlLHQpe3JldHVybiBrZShlLm1lc3NhZ2UpP2UubWVzc2FnZSh0KTplLm1lc3NhZ2V9ZnVuY3Rpb24gVW8oZSl7aWYoIm51bWJlciI9PXR5cGVvZiBlKXtpZihpc05hTihlKSlyZXR1cm4iTmFOIjtpZihlPT09MS8wKXJldHVybiJJbmZpbml0eSI7aWYoZT09PS0xLzApcmV0dXJuIi1JbmZpbml0eSJ9cmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpfXZhciB6bz0oZT0+KGUuWD0ieCIsZS5ZPSJ5IixlKSkoem98fHt9KTtmdW5jdGlvbiBLbygpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgbmF2aWdhdG9yKXJldHVybiExO2NvbnN0IGU9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvXChpUGhvbmU7IENQVSBpUGhvbmUgT1MgKFxkK19cZCtfXGQrKSBsaWtlIE1hYyBPUyBYXCkvKTtpZihudWxsPT1lKXJldHVybiExO2NvbnN0IHQ9ZVsxXS5zcGxpdCgiXyIpLGk9TnVtYmVyKHRbMF0pO2lmKGk+MTYpcmV0dXJuITE7aWYoMTY9PT1pKXtyZXR1cm4gTnVtYmVyKHRbMV0pPDZ9cmV0dXJuITB9dmFyIFlvPWNsYXNzIGV7Y29uc3RydWN0b3IodCl7dGhpcy5fZW5hYmxlZD0hMCx0aGlzLl9waXhlbFJhdGlvPU5hTix0aGlzLl93aWR0aD0wLHRoaXMuX2hlaWdodD0wO2NvbnN0e2RvY3VtZW50Omksd2luZG93OnMsd2lkdGg6cj02MDAsaGVpZ2h0Om89MzAwLGRvbUxheWVyOm49ITEsekluZGV4OmE9MCxuYW1lOmwsb3ZlcnJpZGVEZXZpY2VQaXhlbFJhdGlvOmR9PXQ7dGhpcy5kb2N1bWVudD1pLHRoaXMud2luZG93PXMsZS5kb2N1bWVudD1pLHRoaXMuZWxlbWVudD1pLmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLHRoaXMuZWxlbWVudC53aWR0aD1yLHRoaXMuZWxlbWVudC5oZWlnaHQ9byx0aGlzLnJlYWxDb250ZXh0PXRoaXMuZWxlbWVudC5nZXRDb250ZXh0KCIyZCIpLHRoaXMuaW1hZ2VTb3VyY2U9dGhpcy5yZWFsQ29udGV4dC5jYW52YXM7Y29uc3R7c3R5bGU6Y309dGhpcy5lbGVtZW50O2MudXNlclNlbGVjdD0ibm9uZSIsYy5kaXNwbGF5PSJibG9jayIsbiYmKGMucG9zaXRpb249ImFic29sdXRlIixjLnpJbmRleD1TdHJpbmcoYSksYy50b3A9IjAiLGMubGVmdD0iMCIsYy5wb2ludGVyRXZlbnRzPSJub25lIixjLm9wYWNpdHk9IjEiLGwmJih0aGlzLmVsZW1lbnQuaWQ9bCkpLHRoaXMuY29udGV4dD10aGlzLnNldFBpeGVsUmF0aW8oZCksdGhpcy5yZXNpemUocixvKX1zZXQgY29udGFpbmVyKGUpe3RoaXMuX2NvbnRhaW5lciE9PWUmJih0aGlzLnJlbW92ZSgpLGUmJmUuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KSx0aGlzLl9jb250YWluZXI9ZSl9Z2V0IGNvbnRhaW5lcigpe3JldHVybiB0aGlzLl9jb250YWluZXJ9c2V0IGVuYWJsZWQoZSl7dGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk9ZT8iYmxvY2siOiJub25lIix0aGlzLl9lbmFibGVkPSEhZX1nZXQgZW5hYmxlZCgpe3JldHVybiB0aGlzLl9lbmFibGVkfXJlbW92ZSgpe2NvbnN0e3BhcmVudE5vZGU6ZX09dGhpcy5lbGVtZW50O251bGwhPWUmJmUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KX1kZXN0cm95KCl7dGhpcy5lbGVtZW50LnJlbW92ZSgpLHRoaXMuZWxlbWVudC53aWR0aD0wLHRoaXMuZWxlbWVudC5oZWlnaHQ9MCx0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsMCwwLDApLE9iamVjdC5mcmVlemUodGhpcyl9c25hcHNob3QoKXt9Y2xlYXIoKXt0aGlzLmNvbnRleHQuc2F2ZSgpLHRoaXMuY29udGV4dC5yZXNldFRyYW5zZm9ybSgpLHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwwLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpLHRoaXMuY29udGV4dC5yZXN0b3JlKCl9dG9JbWFnZSgpe2NvbnN0IGU9dGhpcy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTtyZXR1cm4gZS5zcmM9dGhpcy5nZXREYXRhVVJMKCksZX1nZXREYXRhVVJMKGUpe3JldHVybiB0aGlzLmVsZW1lbnQudG9EYXRhVVJMKGUpfWRvd25sb2FkKGUsdD0iaW1hZ2UvcG5nIil7ZT0obnVsbCE9ZT9lOiIiKS50cmltKCl8fCJpbWFnZSI7Y29uc3QgaT10aGlzLmdldERhdGFVUkwodCkscz10aGlzLmRvY3VtZW50LHI9cy5jcmVhdGVFbGVtZW50KCJhIik7ci5ocmVmPWksci5kb3dubG9hZD1lLHIuc3R5bGUuZGlzcGxheT0ibm9uZSIscy5ib2R5LmFwcGVuZENoaWxkKHIpLHIuY2xpY2soKSxzLmJvZHkucmVtb3ZlQ2hpbGQocil9Z2V0IHBpeGVsUmF0aW8oKXtyZXR1cm4gdGhpcy5fcGl4ZWxSYXRpb31zZXRQaXhlbFJhdGlvKHQpe2xldCBpPW51bGwhPXQ/dDp0aGlzLndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO3JldHVybiBLbygpJiYoaT0xKSx0aGlzLl9waXhlbFJhdGlvPWksZS5vdmVycmlkZVNjYWxlKHRoaXMucmVhbENvbnRleHQsaSl9c2V0IHBpeGVsYXRlZChlKXt0aGlzLmVsZW1lbnQuc3R5bGUuaW1hZ2VSZW5kZXJpbmc9ZT8icGl4ZWxhdGVkIjoiYXV0byJ9Z2V0IHBpeGVsYXRlZCgpe3JldHVybiJwaXhlbGF0ZWQiPT09dGhpcy5lbGVtZW50LnN0eWxlLmltYWdlUmVuZGVyaW5nfWdldCB3aWR0aCgpe3JldHVybiB0aGlzLl93aWR0aH1nZXQgaGVpZ2h0KCl7cmV0dXJuIHRoaXMuX2hlaWdodH1yZXNpemUoZSx0KXtpZighKGU+MCYmdD4wKSlyZXR1cm47Y29uc3R7ZWxlbWVudDppLGNvbnRleHQ6cyxwaXhlbFJhdGlvOnJ9PXRoaXM7aS53aWR0aD1NYXRoLnJvdW5kKGUqciksaS5oZWlnaHQ9TWF0aC5yb3VuZCh0KnIpLGkuc3R5bGUud2lkdGg9ZSsicHgiLGkuc3R5bGUuaGVpZ2h0PXQrInB4IixzLnJlc2V0VHJhbnNmb3JtKCksdGhpcy5fd2lkdGg9ZSx0aGlzLl9oZWlnaHQ9dH1zdGF0aWMgZ2V0IHRleHRNZWFzdXJpbmdDb250ZXh0KCl7aWYodGhpcy5fdGV4dE1lYXN1cmluZ0NvbnRleHQpcmV0dXJuIHRoaXMuX3RleHRNZWFzdXJpbmdDb250ZXh0O2NvbnN0IGU9dGhpcy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTtyZXR1cm4gdGhpcy5fdGV4dE1lYXN1cmluZ0NvbnRleHQ9ZS5nZXRDb250ZXh0KCIyZCIpLHRoaXMuX3RleHRNZWFzdXJpbmdDb250ZXh0fXN0YXRpYyBnZXQgc3ZnVGV4dCgpe2lmKHRoaXMuX3N2Z1RleHQpcmV0dXJuIHRoaXMuX3N2Z1RleHQ7Y29uc3QgZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGUsInN2ZyIpO3Quc2V0QXR0cmlidXRlKCJ3aWR0aCIsIjEwMCIpLHQuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCIxMDAiKSx0LmNsYXNzTGlzdD90LmNsYXNzTGlzdC5hZGQoInRleHQtbWVhc3VyaW5nLXN2ZyIpOnQuc2V0QXR0cmlidXRlKCJjbGFzcyIsInRleHQtbWVhc3VyaW5nLXN2ZyIpLHQuc3R5bGUucG9zaXRpb249ImFic29sdXRlIix0LnN0eWxlLnRvcD0iLTEwMDBweCIsdC5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGUsInRleHQiKTtyZXR1cm4gaS5zZXRBdHRyaWJ1dGUoIngiLCIwIiksaS5zZXRBdHRyaWJ1dGUoInkiLCIzMCIpLGkuc2V0QXR0cmlidXRlKCJ0ZXh0IiwiYmxhY2siKSx0LmFwcGVuZENoaWxkKGkpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCksdGhpcy5fc3ZnVGV4dD1pLGl9c3RhdGljIGdldCBoYXMoKXtpZih0aGlzLl9oYXMpcmV0dXJuIHRoaXMuX2hhcztjb25zdCBlPSJ1bmRlZmluZWQiPT10eXBlb2YgbmF2aWdhdG9yfHxuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkNocm9tZSIpPi0xLHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveCIpPi0xLGk9IWUmJiJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlNhZmFyaSIpPi0xO3JldHVybiB0aGlzLl9oYXM9T2JqZWN0LmZyZWV6ZSh7dGV4dE1ldHJpY3M6dm9pZCAwIT09dGhpcy50ZXh0TWVhc3VyaW5nQ29udGV4dC5tZWFzdXJlVGV4dCgidGVzdCIpLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCYmIXQmJiFpLGdldFRyYW5zZm9ybTp2b2lkIDAhPT10aGlzLnRleHRNZWFzdXJpbmdDb250ZXh0LmdldFRyYW5zZm9ybX0pLHRoaXMuX2hhc31zdGF0aWMgbWVhc3VyZVRleHQoZSx0LGkscyl7Y29uc3Qgcj10aGlzLnRleHRNZWFzdXJpbmdDb250ZXh0O3JldHVybiByLmZvbnQ9dCxyLnRleHRCYXNlbGluZT1pLHIudGV4dEFsaWduPXMsci5tZWFzdXJlVGV4dChlKX1zdGF0aWMgZ2V0VGV4dFNpemUoZSx0KXtpZih0aGlzLmhhcy50ZXh0TWV0cmljcyl7Y29uc3QgaT10aGlzLnRleHRNZWFzdXJpbmdDb250ZXh0O2kuZm9udD10O2NvbnN0IHM9aS5tZWFzdXJlVGV4dChlKTtyZXR1cm57d2lkdGg6cy53aWR0aCxoZWlnaHQ6cy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudCtzLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudH19cmV0dXJuIHRoaXMubWVhc3VyZVN2Z1RleHQoZSx0KX1zdGF0aWMgbWVhc3VyZVN2Z1RleHQoZSx0KXtjb25zdCBpPXRoaXMudGV4dFNpemVDYWNoZSxzPWlbdF07aWYocyl7Y29uc3QgdD1zW2VdO2lmKHQpcmV0dXJuIHR9ZWxzZSBpW3RdPXt9O2NvbnN0IHI9dGhpcy5zdmdUZXh0O3Iuc3R5bGUuZm9udD10LHIudGV4dENvbnRlbnQ9ZTtjb25zdCBvPXIuZ2V0QkJveCgpLG49e3dpZHRoOm8ud2lkdGgsaGVpZ2h0Om8uaGVpZ2h0fTtyZXR1cm4gaVt0XVtlXT1uLG59c3RhdGljIG92ZXJyaWRlU2NhbGUoZSx0KXtsZXQgaT0wO2NvbnN0IHM9e3NhdmUoKXt0aGlzLiRzYXZlKCksaSsrfSxyZXN0b3JlKCl7aWYoIShpPjApKXRocm93IG5ldyBFcnJvcigiQUcgQ2hhcnRzIC0gVW5hYmxlIHRvIHJlc3RvcmUoKSBwYXN0IGRlcHRoIDAiKTt0aGlzLiRyZXN0b3JlKCksaS0tfSxzZXRUcmFuc2Zvcm0oZSxpLHMscixvLG4peyJvYmplY3QiPT10eXBlb2YgZT90aGlzLiRzZXRUcmFuc2Zvcm0oZSk6dGhpcy4kc2V0VHJhbnNmb3JtKGUqdCxpKnQscyp0LHIqdCxvKnQsbip0KX0scmVzZXRUcmFuc2Zvcm0oKXt0aGlzLiRzZXRUcmFuc2Zvcm0odCwwLDAsdCwwLDApfSx2ZXJpZnlEZXB0aFplcm8oKXtpZigwIT09aSl0aHJvdyBuZXcgRXJyb3IoIkFHIENoYXJ0cyAtIFNhdmUvcmVzdG9yZSBkZXB0aCBpcyBub24temVybzogIitpKX19O2Zvcihjb25zdCB0IGluIHMpT2JqZWN0Lmhhc093bihzLHQpJiYoZVsiJCIrdF18fChlWyIkIit0XT1lW3RdKSxlW3RdPXNbdF0pO3JldHVybiBlfX07WW8uZG9jdW1lbnQ9Z2xvYmFsVGhpcy5kb2N1bWVudCxZby50ZXh0U2l6ZUNhY2hlPXt9O3ZhciAkbz1ZbyxYbz0vXmxpbmVhci1ncmFkaWVudFwoKC4qPylkZWcsXHMqKC4qPylccypcKSQvaSxxbz1jbGFzcyBlIGV4dGVuZHMgaHJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuZmlsbE9wYWNpdHk9MSx0aGlzLnN0cm9rZU9wYWNpdHk9MSx0aGlzLmZpbGw9ZS5kZWZhdWx0U3R5bGVzLmZpbGwsdGhpcy5zdHJva2U9ZS5kZWZhdWx0U3R5bGVzLnN0cm9rZSx0aGlzLnN0cm9rZVdpZHRoPWUuZGVmYXVsdFN0eWxlcy5zdHJva2VXaWR0aCx0aGlzLmxpbmVEYXNoPWUuZGVmYXVsdFN0eWxlcy5saW5lRGFzaCx0aGlzLmxpbmVEYXNoT2Zmc2V0PWUuZGVmYXVsdFN0eWxlcy5saW5lRGFzaE9mZnNldCx0aGlzLmxpbmVDYXA9ZS5kZWZhdWx0U3R5bGVzLmxpbmVDYXAsdGhpcy5saW5lSm9pbj1lLmRlZmF1bHRTdHlsZXMubGluZUpvaW4sdGhpcy5vcGFjaXR5PWUuZGVmYXVsdFN0eWxlcy5vcGFjaXR5LHRoaXMuZmlsbFNoYWRvdz1lLmRlZmF1bHRTdHlsZXMuZmlsbFNoYWRvd31yZXN0b3JlT3duU3R5bGVzKCl7Y29uc3QgZT10aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRTdHlsZXMsdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKTtmb3IobGV0IGk9MCxzPXQubGVuZ3RoO2k8cztpKyspe2NvbnN0IHM9dFtpXTt0aGlzW3NdPWVbc119fXVwZGF0ZUdyYWRpZW50KCl7Y29uc3R7ZmlsbDplfT10aGlzO2xldCB0O2lmKChudWxsPT1lP3ZvaWQgMDplLnN0YXJ0c1dpdGgoImxpbmVhci1ncmFkaWVudCIpKSYmKHQ9WG8uZXhlYyhlKSkpe2NvbnN0IGU9cGFyc2VGbG9hdCh0WzFdKSxpPVtdLHM9dFsyXSxyPS8oI1swLTlhLWZdKyl8KHJnYmE/XCguKz9cKSl8KFthLXpdKykvZ2k7bGV0IG87Zm9yKDtvPXIuZXhlYyhzKTspaS5wdXNoKG9bMF0pO3RoaXMuZ3JhZGllbnQ9bmV3IGNsYXNzIGV4dGVuZHMgY2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLnN0b3BzPVtdfX17Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuYW5nbGU9MH1jcmVhdGVHcmFkaWVudChlLHQpe2NvbnN0e3N0b3BzOmksYW5nbGU6c309dGhpcyxyPVdyKHpyKHMrOTApKSxvPU1hdGguY29zKHIpLG49TWF0aC5zaW4ociksYT10LndpZHRoLGw9dC5oZWlnaHQsZD10LngrLjUqYSxjPXQueSsuNSpsO2lmKGE+MCYmbD4wKXtjb25zdCB0PU1hdGguc3FydChsKmwrYSphKS8yLHM9TWF0aC5hdGFuMihsLGEpO2xldCBoO2g9cjxNYXRoLlBJLzI/cjpyPE1hdGguUEk/TWF0aC5QSS1yOnI8MypNYXRoLlBJLzI/ci1NYXRoLlBJOjIqTWF0aC5QSS1yO2NvbnN0IHU9dCpNYXRoLmFicyhNYXRoLmNvcyhoLXMpKSxwPWUuY3JlYXRlTGluZWFyR3JhZGllbnQoZCtvKnUsYytuKnUsZC1vKnUsYy1uKnUpO3JldHVybiBpLmZvckVhY2goZT0+e3AuYWRkQ29sb3JTdG9wKGUub2Zmc2V0LGUuY29sb3IpfSkscH1yZXR1cm4iYmxhY2sifX0sdGhpcy5ncmFkaWVudC5hbmdsZT1lLHRoaXMuZ3JhZGllbnQuc3RvcHM9aS5tYXAoKGUsdCk9Pih7b2Zmc2V0OnQvKGkubGVuZ3RoLTEpLGNvbG9yOmV9KSl9ZWxzZSB0aGlzLmdyYWRpZW50PXZvaWQgMH1hbGlnbihlLHQpe3ZhciBpLHMscjtjb25zdCBvPW51bGwhPShyPW51bGw9PShzPW51bGw9PShpPXRoaXMubGF5ZXJNYW5hZ2VyKT92b2lkIDA6aS5jYW52YXMpP3ZvaWQgMDpzLnBpeGVsUmF0aW8pP3I6MSxuPU1hdGgucm91bmQoZSpvKS9vO3JldHVybiBudWxsPT10P246MD09PXQ/MDp0PDE/TWF0aC5jZWlsKHQqbykvbzpNYXRoLnJvdW5kKCh0K2UpKm8pL28tbn1maWxsU3Ryb2tlKGUpe3RoaXMucmVuZGVyRmlsbChlKSx0aGlzLnJlbmRlclN0cm9rZShlKX1yZW5kZXJGaWxsKGUpe2lmKHRoaXMuZmlsbCl7Y29uc3R7Z2xvYmFsQWxwaGE6dH09ZTt0aGlzLmFwcGx5RmlsbChlKSx0aGlzLmFwcGx5RmlsbEFscGhhKGUpLHRoaXMuYXBwbHlTaGFkb3coZSksZS5maWxsKCksZS5nbG9iYWxBbHBoYT10fWUuc2hhZG93Q29sb3I9InJnYmEoMCwgMCwgMCwgMCkifWFwcGx5RmlsbChlKXt0aGlzLmdyYWRpZW50P2UuZmlsbFN0eWxlPXRoaXMuZ3JhZGllbnQuY3JlYXRlR3JhZGllbnQoZSx0aGlzLmNvbXB1dGVCQm94KCkpOmUuZmlsbFN0eWxlPXRoaXMuZmlsbH1hcHBseUZpbGxBbHBoYShlKXtjb25zdHtnbG9iYWxBbHBoYTp0fT1lO2UuZ2xvYmFsQWxwaGE9dCp0aGlzLm9wYWNpdHkqdGhpcy5maWxsT3BhY2l0eX1hcHBseVNoYWRvdyhlKXt2YXIgdCxpO2NvbnN0IHM9bnVsbCE9KGk9bnVsbD09KHQ9dGhpcy5sYXllck1hbmFnZXIpP3ZvaWQgMDp0LmNhbnZhcy5waXhlbFJhdGlvKT9pOjEscj10aGlzLmZpbGxTaGFkb3c7KG51bGw9PXI/dm9pZCAwOnIuZW5hYmxlZCkmJihlLnNoYWRvd0NvbG9yPXIuY29sb3IsZS5zaGFkb3dPZmZzZXRYPXIueE9mZnNldCpzLGUuc2hhZG93T2Zmc2V0WT1yLnlPZmZzZXQqcyxlLnNoYWRvd0JsdXI9ci5ibHVyKnMpfXJlbmRlclN0cm9rZShlKXtpZih0aGlzLnN0cm9rZSYmdGhpcy5zdHJva2VXaWR0aCl7Y29uc3R7Z2xvYmFsQWxwaGE6dH09ZTtlLnN0cm9rZVN0eWxlPXRoaXMuc3Ryb2tlLGUuZ2xvYmFsQWxwaGE9dCp0aGlzLm9wYWNpdHkqdGhpcy5zdHJva2VPcGFjaXR5LGUubGluZVdpZHRoPXRoaXMuc3Ryb2tlV2lkdGgsdGhpcy5saW5lRGFzaCYmZS5zZXRMaW5lRGFzaCh0aGlzLmxpbmVEYXNoKSx0aGlzLmxpbmVEYXNoT2Zmc2V0JiYoZS5saW5lRGFzaE9mZnNldD10aGlzLmxpbmVEYXNoT2Zmc2V0KSx0aGlzLmxpbmVDYXAmJihlLmxpbmVDYXA9dGhpcy5saW5lQ2FwKSx0aGlzLmxpbmVKb2luJiYoZS5saW5lSm9pbj10aGlzLmxpbmVKb2luKSxlLnN0cm9rZSgpLGUuZ2xvYmFsQWxwaGE9dH19Y29udGFpbnNQb2ludChlLHQpe3JldHVybiB0aGlzLmlzUG9pbnRJblBhdGgoZSx0KX19O3FvLmRlZmF1bHRTdHlsZXM9T2JqZWN0LmFzc2lnbih7fSx7ZmlsbDoiYmxhY2siLHN0cm9rZTp2b2lkIDAsc3Ryb2tlV2lkdGg6MCxsaW5lRGFzaDp2b2lkIDAsbGluZURhc2hPZmZzZXQ6MCxsaW5lQ2FwOnZvaWQgMCxsaW5lSm9pbjp2b2lkIDAsb3BhY2l0eToxLGZpbGxTaGFkb3c6dm9pZCAwfSkseShbenMoe3JlZHJhdzoyfSldLHFvLnByb3RvdHlwZSwiZmlsbE9wYWNpdHkiLDIpLHkoW3pzKHtyZWRyYXc6Mn0pXSxxby5wcm90b3R5cGUsInN0cm9rZU9wYWNpdHkiLDIpLHkoW3pzKHtyZWRyYXc6MixjaGFuZ2VDYjplPT5lLnVwZGF0ZUdyYWRpZW50KCl9KV0scW8ucHJvdG90eXBlLCJmaWxsIiwyKSx5KFt6cyh7cmVkcmF3OjJ9KV0scW8ucHJvdG90eXBlLCJzdHJva2UiLDIpLHkoW3pzKHtyZWRyYXc6Mn0pXSxxby5wcm90b3R5cGUsInN0cm9rZVdpZHRoIiwyKSx5KFt6cyh7cmVkcmF3OjJ9KV0scW8ucHJvdG90eXBlLCJsaW5lRGFzaCIsMikseShbenMoe3JlZHJhdzoyfSldLHFvLnByb3RvdHlwZSwibGluZURhc2hPZmZzZXQiLDIpLHkoW3pzKHtyZWRyYXc6Mn0pXSxxby5wcm90b3R5cGUsImxpbmVDYXAiLDIpLHkoW3pzKHtyZWRyYXc6Mn0pXSxxby5wcm90b3R5cGUsImxpbmVKb2luIiwyKSx5KFt6cyh7cmVkcmF3OjIsY29udmVydG9yOmU9PktzKDAsZSwxKX0pXSxxby5wcm90b3R5cGUsIm9wYWNpdHkiLDIpLHkoW3pzKHtyZWRyYXc6MixjaGVja0RpcnR5T25Bc3NpZ25tZW50OiEwfSldLHFvLnByb3RvdHlwZSwiZmlsbFNoYWRvdyIsMik7dmFyIFpvPXFvO2Z1bmN0aW9uIFFvKGUpe2NvbnN0e3JlZHJhdzp0PTMsY2hhbmdlQ2I6aX09bnVsbCE9ZT9lOnt9O3JldHVybiB6cyh7cmVkcmF3OnQsdHlwZToiZm9udCIsY2hhbmdlQ2I6aX0pfXZhciBKbz1jbGFzcyBlIGV4dGVuZHMgWm97Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMueD0wLHRoaXMueT0wLHRoaXMubGluZXM9W10sdGhpcy50ZXh0PXZvaWQgMCx0aGlzLl9kaXJ0eUZvbnQ9ITAsdGhpcy5mb250U2l6ZT0xMCx0aGlzLmZvbnRGYW1pbHk9InNhbnMtc2VyaWYiLHRoaXMudGV4dEFsaWduPWUuZGVmYXVsdFN0eWxlcy50ZXh0QWxpZ24sdGhpcy50ZXh0QmFzZWxpbmU9ZS5kZWZhdWx0U3R5bGVzLnRleHRCYXNlbGluZSx0aGlzLmxpbmVIZWlnaHQ9dm9pZCAwfV9zZXRMaW5lcygpe3RoaXMubGluZXM9YW4odGhpcy50ZXh0KX1nZXQgZm9udCgpe3JldHVybihudWxsPT10aGlzLl9mb250fHx0aGlzLl9kaXJ0eUZvbnQpJiYodGhpcy5fZGlydHlGb250PSExLHRoaXMuX2ZvbnQ9dG4odGhpcykpLHRoaXMuX2ZvbnR9Y29tcHV0ZUJCb3goKXtyZXR1cm4gJG8uaGFzLnRleHRNZXRyaWNzP3JuKHRoaXMubGluZXMsdGhpcy54LHRoaXMueSx0aGlzKTpvbih0aGlzLmxpbmVzLHRoaXMueCx0aGlzLnksdGhpcyl9Z2V0TGluZUhlaWdodChlKXt2YXIgdCxpO2lmKHRoaXMubGluZUhlaWdodClyZXR1cm4gdGhpcy5saW5lSGVpZ2h0O2lmKCRvLmhhcy50ZXh0TWV0cmljcyl7Y29uc3Qgcz0kby5tZWFzdXJlVGV4dChlLHRoaXMuZm9udCx0aGlzLnRleHRCYXNlbGluZSx0aGlzLnRleHRBbGlnbik7cmV0dXJuKG51bGwhPSh0PXMuZm9udEJvdW5kaW5nQm94QXNjZW50KT90OnMuZW1IZWlnaHRBc2NlbnQpKyhudWxsIT0oaT1zLmZvbnRCb3VuZGluZ0JveERlc2NlbnQpP2k6cy5lbUhlaWdodERlc2NlbnQpfXJldHVybiAkby5nZXRUZXh0U2l6ZShlLHRoaXMuZm9udCkuaGVpZ2h0fWlzUG9pbnRJblBhdGgoZSx0KXtjb25zdCBpPXRoaXMudHJhbnNmb3JtUG9pbnQoZSx0KSxzPXRoaXMuY29tcHV0ZUJCb3goKTtyZXR1cm4hIXMmJnMuY29udGFpbnNQb2ludChpLngsaS55KX1yZW5kZXIoZSl7Y29uc3R7Y3R4OnQsZm9yY2VSZW5kZXI6aSxzdGF0czpzfT1lO2lmKDA9PT10aGlzLmRpcnR5JiYhaSlyZXR1cm4gdm9pZChzJiYocy5ub2Rlc1NraXBwZWQrPXRoaXMubm9kZUNvdW50LmNvdW50KSk7aWYoIXRoaXMubGluZXMubGVuZ3RofHwhdGhpcy5sYXllck1hbmFnZXIpcmV0dXJuIHZvaWQocyYmKHMubm9kZXNTa2lwcGVkKz10aGlzLm5vZGVDb3VudC5jb3VudCkpO3RoaXMuY29tcHV0ZVRyYW5zZm9ybU1hdHJpeCgpLHRoaXMubWF0cml4LnRvQ29udGV4dCh0KTtjb25zdHtmaWxsOnIsc3Ryb2tlOm8sc3Ryb2tlV2lkdGg6bn09dGhpczt0LmZvbnQ9dGhpcy5mb250LHQudGV4dEFsaWduPXRoaXMudGV4dEFsaWduLHQudGV4dEJhc2VsaW5lPXRoaXMudGV4dEJhc2VsaW5lO2NvbnN0IGE9dGhpcy5sYXllck1hbmFnZXIuY2FudmFzLnBpeGVsUmF0aW98fDEse2dsb2JhbEFscGhhOmx9PXQ7aWYocil7dC5maWxsU3R5bGU9cix0Lmdsb2JhbEFscGhhPWwqdGhpcy5vcGFjaXR5KnRoaXMuZmlsbE9wYWNpdHk7Y29uc3R7ZmlsbFNoYWRvdzplfT10aGlzOyhudWxsPT1lP3ZvaWQgMDplLmVuYWJsZWQpJiYodC5zaGFkb3dDb2xvcj1lLmNvbG9yLHQuc2hhZG93T2Zmc2V0WD1lLnhPZmZzZXQqYSx0LnNoYWRvd09mZnNldFk9ZS55T2Zmc2V0KmEsdC5zaGFkb3dCbHVyPWUuYmx1ciphKSx0aGlzLnJlbmRlckxpbmVzKChlLGkscyk9PnQuZmlsbFRleHQoZSxpLHMpKX1pZihvJiZuKXt0LnN0cm9rZVN0eWxlPW8sdC5saW5lV2lkdGg9bix0Lmdsb2JhbEFscGhhPWwqdGhpcy5vcGFjaXR5KnRoaXMuc3Ryb2tlT3BhY2l0eTtjb25zdHtsaW5lRGFzaDplLGxpbmVEYXNoT2Zmc2V0OmksbGluZUNhcDpzLGxpbmVKb2luOnJ9PXRoaXM7ZSYmdC5zZXRMaW5lRGFzaChlKSxpJiYodC5saW5lRGFzaE9mZnNldD1pKSxzJiYodC5saW5lQ2FwPXMpLHImJih0LmxpbmVKb2luPXIpLHRoaXMucmVuZGVyTGluZXMoKGUsaSxzKT0+dC5zdHJva2VUZXh0KGUsaSxzKSl9c3VwZXIucmVuZGVyKGUpfXJlbmRlckxpbmVzKGUpe2NvbnN0e2xpbmVzOnQseDppLHk6c309dGhpcyxyPXRoaXMubGluZXMubWFwKGU9PnRoaXMuZ2V0TGluZUhlaWdodChlKSk7bGV0IG89LShyLnJlZHVjZSgoZSx0KT0+ZSt0LDApLXJbMF0pKm5uKHRoaXMudGV4dEJhc2VsaW5lKTtmb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKyllKHRbbl0saSxzK28pLG8rPXJbbl19c3RhdGljIHdyYXBMaW5lcyh0LGkscyxyLG8sbil7Y29uc3QgYT0iaGlkZSIhPT1uLGw9ZnVuY3Rpb24oZSl7Y29uc3QgdD1uZXcgTWFwLGk9dD0+JG8uZ2V0VGV4dFNpemUodCxlKTtyZXR1cm57c2l6ZTppLHdpZHRoOmU9PntpZih0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7Y29uc3R7d2lkdGg6c309aShlKTtyZXR1cm4gdC5zZXQoZSxzKSxzfX19KHRuKHIpKSxkPXQuc3BsaXQoL1xyP1xuL2cpO2lmKDA9PT1kLmxlbmd0aClyZXR1cm57bGluZXM6dm9pZCAwLHRydW5jYXRlZDohMX07aWYoIm5ldmVyIj09PW8pe2NvbnN0e3RleHQ6dCx0cnVuY2F0ZWQ6c309ZS50cnVuY2F0ZUxpbmUoZFswXSxpLGwsYT8iYXV0byI6Im5ldmVyIik7cmV0dXJue2xpbmVzOm51bGwhPXQ/W3RdOnZvaWQgMCx0cnVuY2F0ZWQ6c319Y29uc3QgYz1bXTtsZXQgaD0wLHU9ITE7Zm9yKGNvbnN0IHQgb2YgZCl7Y29uc3Qgbj1lLndyYXBMaW5lKHQsaSxzLGwscixvLGgsYSk7aWYobnVsbD09bilyZXR1cm57bGluZXM6dm9pZCAwLHRydW5jYXRlZDohMX07aWYoYy5wdXNoKC4uLm4ucmVzdWx0KSxoPW4uY3VtdWxhdGl2ZUhlaWdodCxuLnRydW5jYXRlZCl7dT0hMDticmVha319cmV0dXJue2xpbmVzOmMsdHJ1bmNhdGVkOnV9fXN0YXRpYyB3cmFwKHQsaSxzLHIsbyxuPSJlbGxpcHNpcyIpe2NvbnN0e2xpbmVzOmEsdHJ1bmNhdGVkOmx9PWUud3JhcExpbmVzKHQsaSxzLHIsbyxuKTtyZXR1cm57dGV4dDpudWxsIT1hP2Euam9pbigiXG4iKS50cmltKCk6IiIsdHJ1bmNhdGVkOmx9fXN0YXRpYyB3cmFwTGluZSh0LGkscyxyLG8sbixhLGwpe2lmKCEodD10LnRyaW0oKSkpcmV0dXJue3Jlc3VsdDpbXSx0cnVuY2F0ZWQ6ITEsY3VtdWxhdGl2ZUhlaWdodDphfTtjb25zdCBkPXIuc2l6ZSh0KTtpZihkLndpZHRoPD1pKXJldHVybntyZXN1bHQ6W3RdLHRydW5jYXRlZDohMSxjdW11bGF0aXZlSGVpZ2h0OmErZC5oZWlnaHR9O2lmKGQuaGVpZ2h0PnN8fHIud2lkdGgoIlciKT5pKXJldHVybiBsP3tyZXN1bHQ6W10sdHJ1bmNhdGVkOiEwLGN1bXVsYXRpdmVIZWlnaHQ6YX06dm9pZCAwO2NvbnN0IGM9dC5zcGxpdCgvXHMrL2cpLGg9ZS53cmFwTGluZVNlcXVlbnRpYWxseShjLGkscyxyLG8sbixhLGwpO2lmKG51bGw9PWgpcmV0dXJuO2E9aC5jdW11bGF0aXZlSGVpZ2h0O2xldHtsaW5lczp1fT1oO2lmKCFoLndvcmRzQnJva2VuT3JUcnVuY2F0ZWQmJiFoLmxpbmVzVHJ1bmNhdGVkKXtjb25zdCB0PWgubGluZXMubGVuZ3RoLHM9ZS53cmFwTGluZUJhbGFuY2VkKGMsaSxyLHQpO3MubGVuZ3RoPT09dS5sZW5ndGgmJih1PXMpfXJldHVybntyZXN1bHQ6dS5tYXAoZT0+ZS5qb2luKCIgIikpLHRydW5jYXRlZDpoLmxpbmVzVHJ1bmNhdGVkLGN1bXVsYXRpdmVIZWlnaHQ6YX19c3RhdGljIGJyZWFrV29yZCh0LGkscyxyLG8pe2NvbnN0IG49aT0+ZS5wdW5jdHVhdGlvbk1hcmtzLmluY2x1ZGVzKHRbaV0pLGE9cj9vLndpZHRoKCItIik6MCxsPVtdO2xldCBkPTAsYz0wO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKXtjb25zdCByPXRbZV0sbj1vLndpZHRoKHIpO2QrbithPigwPT09Yz9pOnMpJiYobC5wdXNoKGUpLGQ9MCxjKyspLGQrPW59Y29uc3QgaD1bXTtsZXQgdT0wO2Zvcihjb25zdCBlIG9mIGwpe2xldCBpPXQuc3Vic3RyaW5nKHUsZSk7ciYmaS5sZW5ndGg+MCYmIW4oZS0xKSYmIW4oZSkmJihpKz0iLSIpLGgucHVzaChpKSx1PWV9cmV0dXJuIGgucHVzaCh0LnN1YnN0cmluZyh1KSksaH1zdGF0aWMgdHJ1bmNhdGVMaW5lKGUsdCxpLHMpe2U9ZS50cmltRW5kKCk7Y29uc3Qgcj1pLndpZHRoKGUpO2lmKHI+dCYmIm5ldmVyIj09PXMpcmV0dXJue3RleHQ6dm9pZCAwLHRydW5jYXRlZDohMX07aWYocjw9dCYmImZvcmNlIiE9PXMpcmV0dXJue3RleHQ6ZSx0cnVuY2F0ZWQ6ITF9O2NvbnN0IG89aS53aWR0aCgi4oCmIik7bGV0IG49ZSxhPXI7Zm9yKDtuLmxlbmd0aD4wJiZhK28+dDspbj1uLnNsaWNlKDAsLTEpLnRyaW1FbmQoKSxhPWkud2lkdGgobik7cmV0dXJuIGErbzw9dD97dGV4dDpuKyLigKYiLHRydW5jYXRlZDohMH06e3RleHQ6dm9pZCAwLHRydW5jYXRlZDohMX19c3RhdGljIHdyYXBMaW5lU2VxdWVudGlhbGx5KHQsaSxzLHIsbyxuLGEsbCl7Y29uc3R7Zm9udFNpemU6ZD0wLGxpbmVIZWlnaHQ6Yz1kKmUuZGVmYXVsdExpbmVIZWlnaHRSYXRpb309byxoPSJhbHdheXMiPT09bnx8Imh5cGhlbmF0ZSI9PT1uLHU9Imh5cGhlbmF0ZSI9PT1uLHA9ci53aWR0aCgiICIpO2xldCBnPSExLG09ITE7Y29uc3QgZj1bXTtsZXQgdj1bXSxDPTA7Y29uc3QgeT0oKT0+KHtsaW5lczpmLGxpbmVzVHJ1bmNhdGVkOm0sd29yZHNCcm9rZW5PclRydW5jYXRlZDpnLGN1bXVsYXRpdmVIZWlnaHQ6YX0pLFM9KCk9PntpZighbClyZXR1cm47Y29uc3QgdD12LmpvaW4oIiAiKSx7dGV4dDpzfT1lLnRydW5jYXRlTGluZSh0LGksciwiZm9yY2UiKTtyZXR1cm4gbnVsbCE9cz8odi5zcGxpY2UoMCx2Lmxlbmd0aCxzKSxtPSEwLHkoKSk6dm9pZCAwfSx3PSgpPT57Y29uc3QgZT1hK2M7cmV0dXJuIShlPj1zKSYmKHY9W10sQz0wLGE9ZSxmLnB1c2godiksITApfTtpZighdygpKXJldHVybiBTKCk7Zm9yKGxldCBzPTA7czx0Lmxlbmd0aDtzKyspe2NvbnN0IG89dFtzXSxuPXIud2lkdGgobyksYT0wPT09di5sZW5ndGg/MDpwLGQ9QythK247aWYoZDw9aSl2LnB1c2gobyksQz1kO2Vsc2UgaWYobjw9aSl7aWYoIXcoKSlyZXR1cm4gUygpO3YucHVzaChvKSxDPW59ZWxzZXtpZihnPSEwLCFoKXtpZihsKXtpZighdygpKXJldHVybiBTKCk7Y29uc3R7dGV4dDpufT1lLnRydW5jYXRlTGluZShvLGksciwiZm9yY2UiKTtpZihudWxsPT1uKXJldHVybjt2LnB1c2gobiksczx0Lmxlbmd0aC0xJiYobT0hMCk7YnJlYWt9cmV0dXJufXtjb25zdCB0PWktQy1hLHM9ZS5icmVha1dvcmQobyx0LGksdSxyKTtmb3IobGV0IGU9MDtlPHMubGVuZ3RoO2UrKyl7Y29uc3QgdD1zW2VdO2lmKHQmJnYucHVzaCh0KSxlPT09cy5sZW5ndGgtMSlDPXIud2lkdGgodCk7ZWxzZSBpZighdygpKXJldHVybiBTKCl9fX19cmV0dXJuIHkoKX1zdGF0aWMgd3JhcExpbmVCYWxhbmNlZChlLHQsaSxzKXtjb25zdCByPWUucmVkdWNlKChlLHQpPT5lK2kud2lkdGgodCksMCksbz1pLndpZHRoKCIgIiksbj0ocitvKihlLmxlbmd0aC1zLTIpKS9zLGE9W107bGV0IGw9W10sZD1pLndpZHRoKGVbMF0pLGM9ITA7Zm9yKGNvbnN0IHMgb2YgZSl7Y29uc3QgZT1pLndpZHRoKHMpO2lmKGMpe2w9W10sbC5wdXNoKHMpLGQ9ZSxjPSExLGEucHVzaChsKTtjb250aW51ZX1jb25zdCByPWQrbytlO3I8PW4/KGwucHVzaChzKSxkPXIpOnI8PXQ/KGwucHVzaChzKSxjPSEwKToobD1bc10sZD1lLGEucHVzaChsKSl9cmV0dXJuIGF9c2V0Rm9udChlKXt0aGlzLmZvbnRGYW1pbHk9ZS5mb250RmFtaWx5LHRoaXMuZm9udFNpemU9ZS5mb250U2l6ZSx0aGlzLmZvbnRTdHlsZT1lLmZvbnRTdHlsZSx0aGlzLmZvbnRXZWlnaHQ9ZS5mb250V2VpZ2h0fXNldEFsaWduKGUpe3RoaXMudGV4dEFsaWduPWUudGV4dEFsaWduLHRoaXMudGV4dEJhc2VsaW5lPWUudGV4dEJhc2VsaW5lfX07Sm8uY2xhc3NOYW1lPSJUZXh0IixKby5kZWZhdWx0TGluZUhlaWdodFJhdGlvPTEuMTUsSm8uZGVmYXVsdFN0eWxlcz1PYmplY3QuYXNzaWduKHt9LFpvLmRlZmF1bHRTdHlsZXMse3RleHRBbGlnbjoic3RhcnQiLGZvbnRTdHlsZTp2b2lkIDAsZm9udFdlaWdodDp2b2lkIDAsZm9udFNpemU6MTAsZm9udEZhbWlseToic2Fucy1zZXJpZiIsdGV4dEJhc2VsaW5lOiJhbHBoYWJldGljIn0pLEpvLmVsbGlwc2lzPSLigKYiLEpvLnB1bmN0dWF0aW9uTWFya3M9WyIuIiwiLCIsIi0iLCI6IiwiOyIsIiEiLCI/IiwiJyIsJyInLCIoIiwiKSJdLHkoW3pzKHtyZWRyYXc6M30pXSxKby5wcm90b3R5cGUsIngiLDIpLHkoW3pzKHtyZWRyYXc6M30pXSxKby5wcm90b3R5cGUsInkiLDIpLHkoW3pzKHtyZWRyYXc6MyxjaGFuZ2VDYjplPT5lLl9zZXRMaW5lcygpfSldLEpvLnByb3RvdHlwZSwidGV4dCIsMikseShbUW8oKV0sSm8ucHJvdG90eXBlLCJmb250U3R5bGUiLDIpLHkoW1FvKCldLEpvLnByb3RvdHlwZSwiZm9udFdlaWdodCIsMikseShbUW8oKV0sSm8ucHJvdG90eXBlLCJmb250U2l6ZSIsMikseShbUW8oKV0sSm8ucHJvdG90eXBlLCJmb250RmFtaWx5IiwyKSx5KFt6cyh7cmVkcmF3OjN9KV0sSm8ucHJvdG90eXBlLCJ0ZXh0QWxpZ24iLDIpLHkoW3pzKHtyZWRyYXc6M30pXSxKby5wcm90b3R5cGUsInRleHRCYXNlbGluZSIsMikseShbenMoe3JlZHJhdzozfSldLEpvLnByb3RvdHlwZSwibGluZUhlaWdodCIsMik7dmFyIGVuPUpvO2Z1bmN0aW9uIHRuKGUpe2NvbnN0e2ZvbnRGYW1pbHk6dCxmb250U2l6ZTppLGZvbnRTdHlsZTpzLGZvbnRXZWlnaHQ6cn09ZTtyZXR1cm5bbnVsbCE9cz9zOiIiLG51bGwhPXI/cjoiIixpKyJweCIsdF0uam9pbigiICIpLnRyaW0oKX1mdW5jdGlvbiBzbihlLHQsaSxzKXtyZXR1cm4gJG8uaGFzLnRleHRNZXRyaWNzP3JuKGUsdCxpLHMpOm9uKGUsdCxpLHMpfWZ1bmN0aW9uIHJuKGUsdCxpLHMpe3ZhciByLG87bGV0IG49MCxhPTAsbD0wLGQ9MCxjPTA7Y29uc3QgaD10bihzKSx7bGluZUhlaWdodDp1LHRleHRCYXNlbGluZTpwPWVuLmRlZmF1bHRTdHlsZXMudGV4dEJhc2VsaW5lLHRleHRBbGlnbjpnPWVuLmRlZmF1bHRTdHlsZXMudGV4dEFsaWdufT1zO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCBpPSRvLm1lYXN1cmVUZXh0KGVbdF0saCxwLGcpO249TWF0aC5tYXgobixpLmFjdHVhbEJvdW5kaW5nQm94TGVmdCksbD1NYXRoLm1heChsLGkud2lkdGgpLDA9PXQ/KGErPWkuYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQsZCs9aS5hY3R1YWxCb3VuZGluZ0JveEFzY2VudCk6Yys9bnVsbCE9KHI9aS5mb250Qm91bmRpbmdCb3hBc2NlbnQpP3I6aS5lbUhlaWdodEFzY2VudCx0PT1lLmxlbmd0aC0xP2QrPWkuYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50OmMrPW51bGwhPShvPWkuZm9udEJvdW5kaW5nQm94RGVzY2VudCk/bzppLmVtSGVpZ2h0RGVzY2VudH1yZXR1cm4gdm9pZCAwIT09dSYmKGM9KGUubGVuZ3RoLTEpKnUpLGQrPWMsYSs9YypubihwKSxuZXcgb3IodC1uLGktYSxsLGQpfWZ1bmN0aW9uIG9uKGUsdCxpLHMpe2xldCByPTAsbz0wLG49MDtjb25zdCBhPXRuKHMpLHtsaW5lSGVpZ2h0OmwsdGV4dEJhc2VsaW5lOmQ9ZW4uZGVmYXVsdFN0eWxlcy50ZXh0QmFzZWxpbmUsdGV4dEFsaWduOmM9ZW4uZGVmYXVsdFN0eWxlcy50ZXh0QWxpZ259PXM7aWYoZS5sZW5ndGg+MCl7Y29uc3QgdD0kby5nZXRUZXh0U2l6ZShlWzBdLGEpO3I9dC53aWR0aCxvPXQuaGVpZ2h0fWZvcihsZXQgdD0xO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCBpPSRvLmdldFRleHRTaXplKGVbdF0sYSk7cj1NYXRoLm1heChyLGkud2lkdGgpLG4rPW51bGwhPWw/bDppLmhlaWdodH1zd2l0Y2goYyl7Y2FzZSJlbmQiOmNhc2UicmlnaHQiOnQtPXI7YnJlYWs7Y2FzZSJjZW50ZXIiOnQtPXIvMn1zd2l0Y2goZCl7Y2FzZSJhbHBoYWJldGljIjppLT0uNypvKy41Km47YnJlYWs7Y2FzZSJtaWRkbGUiOmktPS40NSpvKy41Km47YnJlYWs7Y2FzZSJpZGVvZ3JhcGhpYyI6aS09bytuO2JyZWFrO2Nhc2UiaGFuZ2luZyI6aS09LjIqbysuNSpuO2JyZWFrO2Nhc2UiYm90dG9tIjppLT1vK259cmV0dXJuIG5ldyBvcih0LGkscixvK24pfWZ1bmN0aW9uIG5uKGUpe3N3aXRjaChlKXtjYXNlInRvcCI6Y2FzZSJoYW5naW5nIjpyZXR1cm4gMDtjYXNlImJvdHRvbSI6Y2FzZSJhbHBoYWJldGljIjpjYXNlImlkZW9ncmFwaGljIjpyZXR1cm4gMTtjYXNlIm1pZGRsZSI6cmV0dXJuLjV9fWZ1bmN0aW9uIGFuKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZT9lLnNwbGl0KC9ccj9cbi9nKTpbXX1mdW5jdGlvbiBsbihlKXtjb25zdCB0PUxlKGUpP2U6ZS5zcGxpdCgiLiIpO2lmKDE9PT10Lmxlbmd0aCl7Y29uc3RbZV09dDtyZXR1cm4gRGUoKHQsaSxzKT0+dFtlXT1zLHQ9PnRbZV0pfXJldHVybiBEZSgoZSxpLHMpPT5KZShlLHQscyksZT0+UWUoZSx0KSl9ZnVuY3Rpb24gZG4oZSl7cmV0dXJuIERlKCh0LGkscyk9PnRbZV09cyl9ZnVuY3Rpb24gY24oZSx0KXtyZXR1cm4gRGUoKGkscyxyKT0+aVtlXVtudWxsIT10P3Q6c109cil9ZnVuY3Rpb24gaG4oZSl7Y29uc3R7bmV3VmFsdWU6dCxvbGRWYWx1ZTppLGNoYW5nZVZhbHVlOnN9PWU7cmV0dXJuIERlKChlLHIsbyxuKT0+KG8hPT1uJiYodm9pZCAwIT09biYmKG51bGw9PWl8fGkuY2FsbChlLG4pKSx2b2lkIDAhPT1vJiYobnVsbD09dHx8dC5jYWxsKGUsbykpLG51bGw9PXN8fHMuY2FsbChlLG8sbikpLG8pKX1mdW5jdGlvbiB1bihlKXtyZXR1cm4gdD1lLChlLGkpPT57VGUoZSxpKS5vYnNlcnZlcnMucHVzaCh0KX07dmFyIHR9ZnVuY3Rpb24gcG4oZSx0KXtjb25zdCBpPWUuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtpLmlubmVySFRNTD10LGUuaGVhZC5pbnNlcnRCZWZvcmUoaSxlLmhlYWQucXVlcnlTZWxlY3Rvcigic3R5bGUiKSl9ZnVuY3Rpb24gZ24oZSx0KXt2YXIgaSxzLHI7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBlO2NvbnN0e2NvbnRlbnQ6bz0obnVsbCE9KGk9bnVsbD09dD92b2lkIDA6dC5jb250ZW50KT9pOiIiKSx0aXRsZTpuPShudWxsPT10P3ZvaWQgMDp0LnRpdGxlKSxjb2xvcjphPShudWxsIT0ocz1udWxsPT10P3ZvaWQgMDp0LmNvbG9yKT9zOiJ3aGl0ZSIpLGJhY2tncm91bmRDb2xvcjpsPShudWxsIT0ocj1udWxsPT10P3ZvaWQgMDp0LmJhY2tncm91bmRDb2xvcik/cjoiIzg4OCIpfT1lO3JldHVybmAke24/YDxkaXYgY2xhc3M9ImFnLWNoYXJ0LXRvb2x0aXAtdGl0bGUiXG4gICAgICAgIHN0eWxlPSJjb2xvcjogJHthfTsgYmFja2dyb3VuZC1jb2xvcjogJHtsfSI+JHtufTwvZGl2PmA6IiJ9JHtvP2A8ZGl2IGNsYXNzPSJhZy1jaGFydC10b29sdGlwLWNvbnRlbnQiPiR7b308L2Rpdj5gOiIifWB9dmFyIG1uPWNsYXNzIGV4dGVuZHMgZnR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMudHlwZT0icG9pbnRlciIsdGhpcy54T2Zmc2V0PTAsdGhpcy55T2Zmc2V0PTB9fTt5KFtxcihWbyhbInBvaW50ZXIiLCJub2RlIl0sImEgcG9zaXRpb24gdHlwZSIpKV0sbW4ucHJvdG90eXBlLCJ0eXBlIiwyKSx5KFtxcihybyldLG1uLnByb3RvdHlwZSwieE9mZnNldCIsMikseShbcXIocm8pXSxtbi5wcm90b3R5cGUsInlPZmZzZXQiLDIpO3ZhciBmbj1jbGFzcyBle2NvbnN0cnVjdG9yKHQsaSxzLHIpe3RoaXMuZW5hYmxlSW50ZXJhY3Rpb249ITEsdGhpcy5lbmFibGVkPSEwLHRoaXMuc2hvd0Fycm93PXZvaWQgMCx0aGlzLmNsYXNzPXZvaWQgMCx0aGlzLmxhc3RDbGFzcz12b2lkIDAsdGhpcy5kZWxheT0wLHRoaXMucmFuZ2U9Im5lYXJlc3QiLHRoaXMud3JhcHBpbmc9Imh5cGhlbmF0ZSIsdGhpcy5kYXJrVGhlbWU9ITEsdGhpcy5sYXN0VmlzaWJpbGl0eUNoYW5nZT1EYXRlLm5vdygpLHRoaXMucG9zaXRpb249bmV3IG1uLHRoaXMuc2hvd1RpbWVvdXQ9MCx0aGlzLl9zaG93QXJyb3c9ITAsdGhpcy50b29sdGlwUm9vdD1yLHRoaXMud2luZG93PXM7Y29uc3Qgbz1pLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKHRoaXMuZWxlbWVudD10aGlzLnRvb2x0aXBSb290LmFwcGVuZENoaWxkKG8pLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJhZy1jaGFydC10b29sdGlwIiksdGhpcy5jYW52YXNFbGVtZW50PXQsInVuZGVmaW5lZCIhPXR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlcil7Y29uc3QgZT1uZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZT0+e2Zvcihjb25zdCB0IG9mIGUpdC50YXJnZXQ9PT10aGlzLmNhbnZhc0VsZW1lbnQmJjA9PT10LmludGVyc2VjdGlvblJhdGlvJiZ0aGlzLnRvZ2dsZSghMSl9LHtyb290OnRoaXMudG9vbHRpcFJvb3R9KTtlLm9ic2VydmUodGhpcy5jYW52YXNFbGVtZW50KSx0aGlzLm9ic2VydmVyPWV9ZS50b29sdGlwRG9jdW1lbnRzLmluZGV4T2YoaSk8MCYmKHBuKGksJ1xuLmFnLWNoYXJ0LXRvb2x0aXAge1xuICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjFzIGVhc2U7XG4gICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICBsZWZ0OiAwcHg7XG4gICAgdG9wOiAwcHg7XG4gICAgei1pbmRleDogOTk5OTk7XG4gICAgZm9udDogMTJweCBWZXJkYW5hLCBzYW5zLXNlcmlmO1xuICAgIGNvbG9yOiByZ2IoNzAsIDcwLCA3MCk7XG4gICAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4wOCk7XG59XG5cbi5hZy1jaGFydC10b29sdGlwLXdyYXAtYWx3YXlzIHtcbiAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO1xuICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gICAgaHlwaGVuczogbm9uZTtcbn1cblxuLmFnLWNoYXJ0LXRvb2x0aXAtd3JhcC1oeXBoZW5hdGUge1xuICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICBoeXBoZW5zOiBhdXRvO1xufVxuXG4uYWctY2hhcnQtdG9vbHRpcC13cmFwLW9uLXNwYWNlIHtcbiAgICBvdmVyZmxvdy13cmFwOiBub3JtYWw7XG4gICAgd29yZC1icmVhazogbm9ybWFsO1xufVxuXG4uYWctY2hhcnQtdG9vbHRpcC13cmFwLW5ldmVyIHtcbiAgICB3aGl0ZS1zcGFjZTogcHJlO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xufVxuXG4uYWctY2hhcnQtdG9vbHRpcC1uby1pbnRlcmFjdGlvbiB7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG59XG5cbi5hZy1jaGFydC10b29sdGlwLW5vLWFuaW1hdGlvbiB7XG4gICAgdHJhbnNpdGlvbjogbm9uZSAhaW1wb3J0YW50O1xufVxuXG4uYWctY2hhcnQtdG9vbHRpcC1oaWRkZW4ge1xuICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbn1cblxuLmFnLWNoYXJ0LXRvb2x0aXAtdGl0bGUge1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHBhZGRpbmc6IDhweCAxNHB4O1xuICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDJweDtcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMnB4O1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODg4ODg4O1xuICAgIHotaW5kZXg6IDE7XG4gICAgdGV4dC1vdmVyZmxvdzogaW5oZXJpdDtcbn1cblxuLmFnLWNoYXJ0LXRvb2x0aXAtdGl0bGU6b25seS1jaGlsZCB7XG4gICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMnB4O1xuICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAycHg7XG59XG5cbi5hZy1jaGFydC10b29sdGlwLWNvbnRlbnQge1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgcGFkZGluZzogNnB4IDE0cHg7XG4gICAgbGluZS1oZWlnaHQ6IDEuN2VtO1xuICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDJweDtcbiAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMnB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0ZXh0LW92ZXJmbG93OiBpbmhlcml0O1xufVxuXG4uYWctY2hhcnQtdG9vbHRpcC1hcnJvdzo6YmVmb3JlIHtcbiAgICBjb250ZW50OiAiIjtcblxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDEwMCU7XG4gICAgbGVmdDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcblxuICAgIGJvcmRlcjogNXB4IHNvbGlkICNkOWQ5ZDk7XG5cbiAgICBib3JkZXItbGVmdC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItYm90dG9tLWNvbG9yOiB0cmFuc3BhcmVudDtcblxuICAgIHdpZHRoOiAwO1xuICAgIGhlaWdodDogMDtcblxuICAgIG1hcmdpbjogMCBhdXRvO1xufVxuXG4uYWctY2hhcnQtdG9vbHRpcC1hcnJvdzo6YWZ0ZXIge1xuICAgIGNvbnRlbnQ6ICIiO1xuXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogY2FsYygxMDAlIC0gMXB4KTtcbiAgICBsZWZ0OiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xuXG4gICAgYm9yZGVyOiA1cHggc29saWQgd2hpdGU7XG5cbiAgICBib3JkZXItbGVmdC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItYm90dG9tLWNvbG9yOiB0cmFuc3BhcmVudDtcblxuICAgIHdpZHRoOiAwO1xuICAgIGhlaWdodDogMDtcblxuICAgIG1hcmdpbjogMCBhdXRvO1xufVxuXG4uYWctY2hhcnQtd3JhcHBlciB7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xufVxuJyksZS50b29sdGlwRG9jdW1lbnRzLnB1c2goaSkpfWRlc3Ryb3koKXtjb25zdHtwYXJlbnROb2RlOmV9PXRoaXMuZWxlbWVudDtlJiZlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5vYnNlcnZlciYmdGhpcy5vYnNlcnZlci51bm9ic2VydmUodGhpcy5jYW52YXNFbGVtZW50KX1pc1Zpc2libGUoKXtjb25zdHtlbGVtZW50OmV9PXRoaXM7cmV0dXJuIWUuY2xhc3NMaXN0LmNvbnRhaW5zKCJhZy1jaGFydC10b29sdGlwLWhpZGRlbiIpfXVwZGF0ZUNsYXNzKGUsdCxpPSEwKXtjb25zdHtlbGVtZW50OnMsY2xhc3M6cixsYXN0Q2xhc3M6byxlbmFibGVJbnRlcmFjdGlvbjpuLGxhc3RWaXNpYmlsaXR5Q2hhbmdlOmF9PXRoaXMsbD10aGlzLmlzVmlzaWJsZSgpLGQ9ISFlO2xldCBjPTEvMDtpZihsIT09ZCl7Y29uc3QgZT1EYXRlLm5vdygpO2M9ZS1hLHRoaXMubGFzdFZpc2liaWxpdHlDaGFuZ2U9ZX1jb25zdCBoPShlLHQpPT57Y29uc3QgaT0iYWctY2hhcnQtdG9vbHRpcC0iK2U7dD9zLmNsYXNzTGlzdC5hZGQoaSk6cy5jbGFzc0xpc3QucmVtb3ZlKGkpfTtjPjUmJmgoIm5vLWFuaW1hdGlvbiIsIWwmJmQmJmM+MTAwKSxoKCJuby1pbnRlcmFjdGlvbiIsIW4pLGgoImhpZGRlbiIsIWUpLGgoImFycm93IiwhIXQpLHMuY2xhc3NMaXN0LnRvZ2dsZSgiYWctY2hhcnQtZGFyay10b29sdGlwIix0aGlzLmRhcmtUaGVtZSksdGhpcy51cGRhdGVXcmFwcGluZygpLGk/KHIhPT1vJiYobyYmcy5jbGFzc0xpc3QucmVtb3ZlKG8pLHImJnMuY2xhc3NMaXN0LmFkZChyKSksdGhpcy5sYXN0Q2xhc3M9cik6KG8mJnMuY2xhc3NMaXN0LnJlbW92ZShvKSx0aGlzLmxhc3RDbGFzcz12b2lkIDApfXVwZGF0ZVdyYXBwaW5nKCl7Y29uc3R7ZWxlbWVudDplLHdyYXBwaW5nOnR9PXRoaXMsaT17YWx3YXlzOiExLGh5cGhlbmF0ZTohMSwib24tc3BhY2UiOiExLG5ldmVyOiExfTtpW3RdPSEwLE9iamVjdC5lbnRyaWVzKGkpLmZvckVhY2goKFt0LGldKT0+e2UuY2xhc3NMaXN0LnRvZ2dsZSgiYWctY2hhcnQtdG9vbHRpcC13cmFwLSIrdCxpKX0pfXNob3coZSx0LGk9ITEpe3ZhciBzLHIsbyxuLGEsbCxkO2NvbnN0e2VsZW1lbnQ6YyxjYW52YXNFbGVtZW50Omh9PXRoaXM7aWYodm9pZCAwIT09dCljLmlubmVySFRNTD10O2Vsc2UgaWYoIWMuaW5uZXJIVE1MKXJldHVybiB2b2lkIHRoaXMudG9nZ2xlKCExKTtjb25zdCB1PW51bGwhPShyPW51bGw9PShzPWUucG9zaXRpb24pP3ZvaWQgMDpzLnhPZmZzZXQpP3I6MCxwPW51bGwhPShuPW51bGw9PShvPWUucG9zaXRpb24pP3ZvaWQgMDpvLnlPZmZzZXQpP246MCxnPWguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbT1nLmxlZnQrZS5vZmZzZXRYLWMuY2xpZW50V2lkdGgvMit1LGY9Zy50b3ArZS5vZmZzZXRZLWMuY2xpZW50SGVpZ2h0LTgrcCx2PXRoaXMuZ2V0V2luZG93Qm91bmRpbmdCb3goKSxDPXYueCt2LndpZHRoLWMuY2xpZW50V2lkdGgtMSx5PXYueSt2LmhlaWdodC1jLmNsaWVudEhlaWdodCxTPUtzKHYueCxtLEMpLHc9S3Modi55LGYseSksYj0hKFMhPT1tfHx3IT09ZikmJiF1JiYhcCxFPW51bGwhPShsPW51bGwhPShhPWUuc2hvd0Fycm93KT9hOnRoaXMuc2hvd0Fycm93KT9sOmI7aWYodGhpcy51cGRhdGVTaG93QXJyb3coRSksYy5zdHlsZS50cmFuc2Zvcm09YHRyYW5zbGF0ZSgke01hdGgucm91bmQoUyl9cHgsICR7TWF0aC5yb3VuZCh3KX1weClgLHRoaXMuZW5hYmxlSW50ZXJhY3Rpb249bnVsbCE9KGQ9ZS5lbmFibGVJbnRlcmFjdGlvbikmJmQsdGhpcy5kZWxheT4wJiYhaSlyZXR1cm4gdGhpcy50b2dnbGUoITEpLHZvaWQodGhpcy5zaG93VGltZW91dD10aGlzLndpbmRvdy5zZXRUaW1lb3V0KCgpPT57dGhpcy50b2dnbGUoITAsZS5hZGRDdXN0b21DbGFzcyl9LHRoaXMuZGVsYXkpKTt0aGlzLnRvZ2dsZSghMCxlLmFkZEN1c3RvbUNsYXNzKX1nZXRXaW5kb3dCb3VuZGluZ0JveCgpe3JldHVybiBuZXcgb3IoMCwwLHRoaXMud2luZG93LmlubmVyV2lkdGgsdGhpcy53aW5kb3cuaW5uZXJIZWlnaHQpfXRvZ2dsZShlLHQpe2V8fHRoaXMud2luZG93LmNsZWFyVGltZW91dCh0aGlzLnNob3dUaW1lb3V0KSx0aGlzLnVwZGF0ZUNsYXNzKGUsdGhpcy5fc2hvd0Fycm93LHQpfXBvaW50ZXJMZWZ0T250b1Rvb2x0aXAoZSl7dmFyIHQ7aWYoIXRoaXMuZW5hYmxlSW50ZXJhY3Rpb24pcmV0dXJuITE7Y29uc3QgaT1udWxsPT0odD1lLnNvdXJjZUV2ZW50LnJlbGF0ZWRUYXJnZXQpP3ZvaWQgMDp0LmNsYXNzTGlzdCxzPUJvb2xlYW4oWyIiLCItdGl0bGUiLCItY29udGVudCJdLmZpbHRlcihlPT5udWxsPT1pP3ZvaWQgMDppLmNvbnRhaW5zKCJhZy1jaGFydC10b29sdGlwIitlKSkpO3JldHVybiB2b2lkIDAhPT1pJiZzfXVwZGF0ZVNob3dBcnJvdyhlKXt0aGlzLl9zaG93QXJyb3c9ZX19O2ZuLnRvb2x0aXBEb2N1bWVudHM9W10seShbcXIodG8pXSxmbi5wcm90b3R5cGUsImVuYWJsZWQiLDIpLHkoW3FyKHRvLHtvcHRpb25hbDohMH0pXSxmbi5wcm90b3R5cGUsInNob3dBcnJvdyIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLGZuLnByb3RvdHlwZSwiY2xhc3MiLDIpLHkoW3FyKG5vKV0sZm4ucHJvdG90eXBlLCJkZWxheSIsMikseShbcXIoX28pXSxmbi5wcm90b3R5cGUsInJhbmdlIiwyKSx5KFtxcihMbyldLGZuLnByb3RvdHlwZSwid3JhcHBpbmciLDIpLHkoW3FyKHRvKV0sZm4ucHJvdG90eXBlLCJkYXJrVGhlbWUiLDIpO3ZhciB2bj1mbixDbj1jbGFzcyBleHRlbmRzIGZ0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmlkPVdzKHRoaXMpLHRoaXMubm9kZT0obmV3IGVuKS5zZXRQcm9wZXJ0aWVzKHt0ZXh0QWxpZ246ImNlbnRlciIscG9pbnRlckV2ZW50czoxfSksdGhpcy5lbmFibGVkPSExLHRoaXMudGV4dEFsaWduPSJjZW50ZXIiLHRoaXMuZm9udFNpemU9MTAsdGhpcy5mb250RmFtaWx5PSJzYW5zLXNlcmlmIix0aGlzLndyYXBwaW5nPSJhbHdheXMiLHRoaXMudHJ1bmNhdGVkPSExfXJlZ2lzdGVySW50ZXJhY3Rpb24oZSl7cmV0dXJuIGUuaW50ZXJhY3Rpb25NYW5hZ2VyLmFkZExpc3RlbmVyKCJob3ZlciIsdD0+dGhpcy5oYW5kbGVNb3VzZU1vdmUoZSx0KSl9Y29tcHV0ZVRleHRXcmFwKGUsdCl7dmFyIGkscztjb25zdHt0ZXh0OnIsd3JhcHBpbmc6b309dGhpcyxuPU1hdGgubWluKG51bGwhPShpPXRoaXMubWF4V2lkdGgpP2k6MS8wLGUpLGE9bnVsbCE9KHM9dGhpcy5tYXhIZWlnaHQpP3M6dDtpZighaXNGaW5pdGUobikmJiFpc0Zpbml0ZShhKSlyZXR1cm4gdm9pZCh0aGlzLm5vZGUudGV4dD1yKTtjb25zdHt0ZXh0OmwsdHJ1bmNhdGVkOmR9PWVuLndyYXAobnVsbCE9cj9yOiIiLG4sYSx0aGlzLG8pO3RoaXMubm9kZS50ZXh0PWwsdGhpcy50cnVuY2F0ZWQ9ZH1oYW5kbGVNb3VzZU1vdmUoZSx0KXtpZighdGhpcy5lbmFibGVkKXJldHVybjtjb25zdHtvZmZzZXRYOmksb2Zmc2V0WTpzfT10LHI9dGhpcy5ub2RlLmNvbXB1dGVCQm94KCksbz10aGlzLm5vZGUudmlzaWJsZSYmci5jb250YWluc1BvaW50KGkscyk7byYmdC5jb25zdW1lKCksdGhpcy50cnVuY2F0ZWQmJm8/ZS50b29sdGlwTWFuYWdlci51cGRhdGVUb29sdGlwKHRoaXMuaWQse29mZnNldFg6aSxvZmZzZXRZOnMsbGFzdFBvaW50ZXJFdmVudDp0LHNob3dBcnJvdzohMSxhZGRDdXN0b21DbGFzczohMX0sZ24oe2NvbnRlbnQ6dGhpcy50ZXh0fSkpOmUudG9vbHRpcE1hbmFnZXIucmVtb3ZlVG9vbHRpcCh0aGlzLmlkKX19O0NuLlNNQUxMX1BBRERJTkc9MTAsQ24uTEFSR0VfUEFERElORz0yMCx5KFtxcih0byldLENuLnByb3RvdHlwZSwiZW5hYmxlZCIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSksY24oIm5vZGUiKV0sQ24ucHJvdG90eXBlLCJ0ZXh0IiwyKSx5KFtxcihGbyx7b3B0aW9uYWw6ITB9KSxjbigibm9kZSIpXSxDbi5wcm90b3R5cGUsInRleHRBbGlnbiIsMikseShbcXIoUG8se29wdGlvbmFsOiEwfSksY24oIm5vZGUiKV0sQ24ucHJvdG90eXBlLCJmb250U3R5bGUiLDIpLHkoW3FyKE1vLHtvcHRpb25hbDohMH0pLGNuKCJub2RlIildLENuLnByb3RvdHlwZSwiZm9udFdlaWdodCIsMikseShbcXIobm8pLGNuKCJub2RlIildLENuLnByb3RvdHlwZSwiZm9udFNpemUiLDIpLHkoW3FyKHNvKSxjbigibm9kZSIpXSxDbi5wcm90b3R5cGUsImZvbnRGYW1pbHkiLDIpLHkoW3FyKHlvLHtvcHRpb25hbDohMH0pLGNuKCJub2RlIiwiZmlsbCIpXSxDbi5wcm90b3R5cGUsImNvbG9yIiwyKSx5KFtxcihubyx7b3B0aW9uYWw6ITB9KV0sQ24ucHJvdG90eXBlLCJzcGFjaW5nIiwyKSx5KFtxcihubyx7b3B0aW9uYWw6ITB9KV0sQ24ucHJvdG90eXBlLCJsaW5lSGVpZ2h0IiwyKSx5KFtxcihubyx7b3B0aW9uYWw6ITB9KV0sQ24ucHJvdG90eXBlLCJtYXhXaWR0aCIsMikseShbcXIobm8se29wdGlvbmFsOiEwfSldLENuLnByb3RvdHlwZSwibWF4SGVpZ2h0IiwyKSx5KFtxcihMbyldLENuLnByb3RvdHlwZSwid3JhcHBpbmciLDIpO3ZhciB5bj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuZW5hYmxlZD0hMSx0aGlzLnNwYWNpbmc9Q24uU01BTExfUEFERElORyx0aGlzLmZvbnRTaXplPTEwLHRoaXMuZm9udEZhbWlseT0ic2Fucy1zZXJpZiIsdGhpcy53cmFwcGluZz0iYWx3YXlzIn19O3koW3FyKHRvKV0seW4ucHJvdG90eXBlLCJlbmFibGVkIiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0seW4ucHJvdG90eXBlLCJ0ZXh0IiwyKSx5KFtxcihubyx7b3B0aW9uYWw6ITB9KV0seW4ucHJvdG90eXBlLCJzcGFjaW5nIiwyKSx5KFtxcihQbyx7b3B0aW9uYWw6ITB9KV0seW4ucHJvdG90eXBlLCJmb250U3R5bGUiLDIpLHkoW3FyKE1vLHtvcHRpb25hbDohMH0pXSx5bi5wcm90b3R5cGUsImZvbnRXZWlnaHQiLDIpLHkoW3FyKG5vKV0seW4ucHJvdG90eXBlLCJmb250U2l6ZSIsMikseShbcXIoc28pXSx5bi5wcm90b3R5cGUsImZvbnRGYW1pbHkiLDIpLHkoW3FyKHlvLHtvcHRpb25hbDohMH0pXSx5bi5wcm90b3R5cGUsImNvbG9yIiwyKSx5KFtxcihMbyldLHluLnByb3RvdHlwZSwid3JhcHBpbmciLDIpLHkoW3FyKGlvLHtvcHRpb25hbDohMH0pXSx5bi5wcm90b3R5cGUsImZvcm1hdHRlciIsMik7dmFyIFNuPXtjb25zdHJ1Y3RlZEFycmF5czpuZXcgV2Vha01hcH07ZnVuY3Rpb24gd24oZSx0KXt2YXIgaTtudWxsPT0oaT1Tbi5jb25zdHJ1Y3RlZEFycmF5cyl8fGkuc2V0KGUsdCl9dmFyIGJuPXtjb25zdHJ1Y3RvcnM6eyJheGVzW10udGl0bGUiOnlufSxhbGxvd2VkVHlwZXM6eyJsZWdlbmQucGFnaW5hdGlvbi5tYXJrZXIuc2hhcGUiOlsicHJpbWl0aXZlIiwiZnVuY3Rpb24iXSwiYXhpc1tdLnRpY2suY291bnQiOlsicHJpbWl0aXZlIiwiY2xhc3MtaW5zdGFuY2UiXX19LEVuPWNsYXNzIGV7Y29uc3RydWN0b3IodCxpKXt0aGlzLmludmFsaWQ9ITAsdGhpcy5uaWNlPSExLHRoaXMuaW50ZXJ2YWw9dm9pZCAwLHRoaXMudGlja0NvdW50PWUuZGVmYXVsdFRpY2tDb3VudCx0aGlzLm1pblRpY2tDb3VudD0wLHRoaXMubWF4VGlja0NvdW50PTEvMCx0aGlzLm5pY2VEb21haW49W10sdGhpcy5kZWZhdWx0Q2xhbXBNb2RlPSJyYXciLHRoaXMuZG9tYWluPXQsdGhpcy5yYW5nZT1pfXN0YXRpYyBpcyh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGV9dHJhbnNmb3JtKGUpe3JldHVybiBlfXRyYW5zZm9ybUludmVydChlKXtyZXR1cm4gZX1jYWxjQmFuZHdpZHRoKGU9MSl7Y29uc3R7cmFuZ2U6dH09dGhpcyxpPXRoaXMuZ2V0RG9tYWluKCkscz1NYXRoLmFicyh0WzFdLXRbMF0pLHI9TWF0aC5hYnMoaVsxXS1pWzBdKS9lKzEsbz1NYXRoLmZsb29yKHMpLG49TWF0aC5taW4ocixvKTtyZXR1cm4gcy9NYXRoLm1heCgxLG4pfWZyb21Eb21haW4oZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlP2U6ZSBpbnN0YW5jZW9mIERhdGU/ZS5nZXRUaW1lKCk6TmFOfWdldERvbWFpbigpe3JldHVybiB0aGlzLm5pY2UmJih0aGlzLnJlZnJlc2goKSx0aGlzLm5pY2VEb21haW4ubGVuZ3RoKT90aGlzLm5pY2VEb21haW46dGhpcy5kb21haW59Y29udmVydChlLHQpe3ZhciBpO2NvbnN0IHM9bnVsbCE9KGk9bnVsbD09dD92b2lkIDA6dC5jbGFtcE1vZGUpP2k6dGhpcy5kZWZhdWx0Q2xhbXBNb2RlO2lmKCF0aGlzLmRvbWFpbnx8dGhpcy5kb21haW4ubGVuZ3RoPDIpcmV0dXJuIE5hTjt0aGlzLnJlZnJlc2goKTtjb25zdCByPXRoaXMuZ2V0RG9tYWluKCkubWFwKGU9PnRoaXMudHJhbnNmb3JtKGUpKSxbbyxuXT1yLHtyYW5nZTphfT10aGlzLFtsLGRdPWE7aWYoZT10aGlzLnRyYW5zZm9ybShlKSwiY2xhbXBlZCI9PT1zKXtjb25zdCB0PU1hdGgubWluKHRoaXMuZnJvbURvbWFpbihvKSx0aGlzLmZyb21Eb21haW4obikpLGk9TWF0aC5tYXgodGhpcy5mcm9tRG9tYWluKG8pLHRoaXMuZnJvbURvbWFpbihuKSk7aWYodGhpcy5mcm9tRG9tYWluKGUpPHQpcmV0dXJuIGw7aWYodGhpcy5mcm9tRG9tYWluKGUpPmkpcmV0dXJuIGR9cmV0dXJuIG89PT1uPyhsK2QpLzI6ZT09PW8/bDplPT09bj9kOmwrKHRoaXMuZnJvbURvbWFpbihlKS10aGlzLmZyb21Eb21haW4obykpLyh0aGlzLmZyb21Eb21haW4obiktdGhpcy5mcm9tRG9tYWluKG8pKSooZC1sKX1pbnZlcnQoZSl7dGhpcy5yZWZyZXNoKCk7Y29uc3QgdD10aGlzLmdldERvbWFpbigpLm1hcChlPT50aGlzLnRyYW5zZm9ybShlKSksW2ksc109dCx7cmFuZ2U6cn09dGhpcyxbbyxuXT1yLGE9bz5uO2xldCBsO3JldHVybiBlPChhP246byk/YT9zOmk6ZT4oYT9vOm4pP2E/aTpzOihsPW89PT1uP3RoaXMudG9Eb21haW4oKHRoaXMuZnJvbURvbWFpbihpKSt0aGlzLmZyb21Eb21haW4ocykpLzIpOnRoaXMudG9Eb21haW4odGhpcy5mcm9tRG9tYWluKGkpKyhlLW8pLyhuLW8pKih0aGlzLmZyb21Eb21haW4ocyktdGhpcy5mcm9tRG9tYWluKGkpKSksdGhpcy50cmFuc2Zvcm1JbnZlcnQobCkpfXJlZnJlc2goKXt0aGlzLmludmFsaWQmJih0aGlzLmludmFsaWQ9ITEsdGhpcy51cGRhdGUoKSx0aGlzLmludmFsaWQmJkwud2Fybk9uY2UoIkV4cGVjdGVkIHVwZGF0ZSB0byBub3QgaW52YWxpZGF0ZSBzY2FsZSIpKX1nZXRQaXhlbFJhbmdlKCl7Y29uc3QgZT10aGlzLnJhbmdlLnNsaWNlKCkuc29ydCgoZSx0KT0+ZS10KTtyZXR1cm4gZVsxXS1lWzBdfWlzRGVuc2VJbnRlcnZhbCh7c3RhcnQ6ZSxzdG9wOnQsaW50ZXJ2YWw6aSxjb3VudDpzfSl7cmV0dXJuIG51bGwhPXN8fChzPSh0LWUpLygibnVtYmVyIj09dHlwZW9mIGk/aToxKSkscz49dGhpcy5nZXRQaXhlbFJhbmdlKCkmJihMLndhcm4oInRoZSBjb25maWd1cmVkIGludGVydmFsIHJlc3VsdHMgaW4gbW9yZSB0aGFuIDEgaXRlbSBwZXIgcGl4ZWwsIGlnbm9yaW5nLiBTdXBwbHkgYSBsYXJnZXIgaW50ZXJ2YWwgb3Igb21pdCB0aGlzIGNvbmZpZ3VyYXRpb24iKSwhMCl9fTtFbi5kZWZhdWx0VGlja0NvdW50PTUsRW4uZGVmYXVsdE1heFRpY2tDb3VudD02LHkoWyRyXSxFbi5wcm90b3R5cGUsImRvbWFpbiIsMikseShbJHJdLEVuLnByb3RvdHlwZSwicmFuZ2UiLDIpLHkoWyRyXSxFbi5wcm90b3R5cGUsIm5pY2UiLDIpLHkoWyRyXSxFbi5wcm90b3R5cGUsImludGVydmFsIiwyKSx5KFskcl0sRW4ucHJvdG90eXBlLCJ0aWNrQ291bnQiLDIpLHkoWyRyXSxFbi5wcm90b3R5cGUsIm1pblRpY2tDb3VudCIsMikseShbJHJdLEVuLnByb3RvdHlwZSwibWF4VGlja0NvdW50IiwyKTt2YXIgUm49RW47ZnVuY3Rpb24geG4oZSx0KXtsZXQgaT0wO3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmIm51bWJlciI9PXR5cGVvZiB0P2k9ZS10OiJzdHJpbmciPT10eXBlb2YgZSYmInN0cmluZyI9PXR5cGVvZiB0P2k9ZS5sb2NhbGVDb21wYXJlKHQpOm51bGw9PWUmJm51bGw9PXR8fChpPW51bGw9PWU/LTE6bnVsbD09dD8xOlN0cmluZyhlKS5sb2NhbGVDb21wYXJlKFN0cmluZyh0KSkpLGl9ZnVuY3Rpb24gVG4oZSx0LGkpe2NvbnN0IHM9ZT0+ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZSgpOmU7Zm9yKGNvbnN0IHIgaW4gZSl7Y29uc3Qgbz1pKHMoZVtyXSkscyh0W3JdKSk7aWYoMCE9PW8pcmV0dXJuIG99cmV0dXJuIDB9dmFyIERuPWNsYXNzIGUgZXh0ZW5kcyBocntjb25zdHJ1Y3RvcihlKXt2YXIgdDtzdXBlcih7aXNWaXJ0dWFsOm51bGw9PWU/dm9pZCAwOmUuaXNWaXJ0dWFsfSksdGhpcy5vcHRzPWUsdGhpcy5vcGFjaXR5PTEsdGhpcy5sYXN0QkJveD12b2lkIDA7Y29uc3R7ekluZGV4OmksekluZGV4U3ViT3JkZXI6c309bnVsbCE9ZT9lOnt9O3RoaXMuaXNDb250YWluZXJOb2RlPSEwLHZvaWQgMCE9PWkmJih0aGlzLnpJbmRleD1pKSx2b2lkIDAhPT1zJiYodGhpcy56SW5kZXhTdWJPcmRlcj1zKSx0aGlzLm5hbWU9bnVsbD09KHQ9dGhpcy5vcHRzKT92b2lkIDA6dC5uYW1lfXpJbmRleENoYW5nZWQoKXt2YXIgZTt0aGlzLmxheWVyJiYobnVsbD09KGU9dGhpcy5fbGF5ZXJNYW5hZ2VyKXx8ZS5tb3ZlTGF5ZXIodGhpcy5sYXllcix0aGlzLnpJbmRleCx0aGlzLnpJbmRleFN1Yk9yZGVyKSl9aXNMYXllcigpe3JldHVybiBudWxsIT10aGlzLmxheWVyfV9zZXRMYXllck1hbmFnZXIoZSl7dmFyIHQsaTtpZih0aGlzLl9sYXllck1hbmFnZXImJnRoaXMubGF5ZXImJih0aGlzLl9sYXllck1hbmFnZXIucmVtb3ZlTGF5ZXIodGhpcy5sYXllciksdGhpcy5sYXllcj12b2lkIDApLHRoaXMubGF5ZXIpdGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSB1bmFibGUgdG8gZGVyZWdpc3RlciBzY2VuZSByZW5kZXJpbmcgbGF5ZXIhIik7aWYoc3VwZXIuX3NldExheWVyTWFuYWdlcihlKSxlJiYobnVsbD09KHQ9dGhpcy5vcHRzKT92b2lkIDA6dC5sYXllcikpe2NvbnN0e3pJbmRleDp0LHpJbmRleFN1Yk9yZGVyOnMsbmFtZTpyfT1udWxsIT0oaT10aGlzLm9wdHMpP2k6e30sbz0oKT0+dGhpcy5nZXRDb21wdXRlZE9wYWNpdHkoKSxuPSgpPT50aGlzLmdldFZpc2liaWxpdHkoKTt0aGlzLmxheWVyPWUuYWRkTGF5ZXIoe3pJbmRleDp0LHpJbmRleFN1Yk9yZGVyOnMsbmFtZTpyLGdldENvbXB1dGVkT3BhY2l0eTpvLGdldFZpc2liaWxpdHk6bn0pfX1nZXRDb21wdXRlZE9wYWNpdHkoKXtsZXQgdD0xLGk9dGhpcztkb3tpIGluc3RhbmNlb2YgZSYmKHQqPWkub3BhY2l0eSl9d2hpbGUoaT1pLnBhcmVudCk7cmV0dXJuIHR9Z2V0VmlzaWJpbGl0eSgpe2xldCBlPXRoaXMsdD10aGlzLnZpc2libGU7Zm9yKDtlPWUucGFyZW50OyllLnZpc2libGV8fCh0PWUudmlzaWJsZSk7cmV0dXJuIHR9dmlzaWJpbGl0eUNoYW5nZWQoKXt0aGlzLmxheWVyJiYodGhpcy5sYXllci5lbmFibGVkPXRoaXMudmlzaWJsZSl9bWFya0RpcnR5KGUsdD0xKXtpZih0aGlzLmlzVmlydHVhbClyZXR1cm4gdm9pZCBzdXBlci5tYXJrRGlydHkoZSx0KTtsZXQgaT10Oyh0PDJ8fG51bGwhPXRoaXMubGF5ZXIpJiYoaT0xKSxzdXBlci5tYXJrRGlydHkoZSx0LGkpfWNvbnRhaW5zUG9pbnQoZSx0KXtyZXR1cm4hMH1jb21wdXRlQkJveCgpe3JldHVybiB0aGlzLmNvbXB1dGVUcmFuc2Zvcm1NYXRyaXgoKSxlLmNvbXB1dGVCQm94KHRoaXMuY2hpbGRyZW4pfWNvbXB1dGVUcmFuc2Zvcm1lZEJCb3goKXtyZXR1cm4gdGhpcy5jb21wdXRlQkJveCgpfXJlbmRlcihlKXt2YXIgdCxpO2NvbnN0e29wdHM6e25hbWU6c309e30sX2RlYnVnOnI9KCgpPT57fSl9PXRoaXMse2RpcnR5Om8sZGlydHlaSW5kZXg6bixsYXllcjphLGNoaWxkcmVuOmwsY2xpcFJlY3Q6ZCxkaXJ0eVRyYW5zZm9ybTpjfT10aGlzO2xldHtjdHg6aCxmb3JjZVJlbmRlcjp1LGNsaXBCQm94OnB9PWU7Y29uc3R7cmVzaXplZDpnLHN0YXRzOnZ9PWUsQz1oLmdldFRyYW5zZm9ybSgpLHk9bz49Mnx8bnx8ZztsZXQgUz15LHc9ITE7Zm9yKGNvbnN0IGUgb2YgbClpZihTfHwoUz1udWxsPT1lLmxheWVyTWFuYWdlciYmZS5kaXJ0eT49MSksd3x8KHc9bnVsbCE9ZS5sYXllck1hbmFnZXImJmUuZGlydHk+PTEpLFMpYnJlYWs7aWYocyYmcih7bmFtZTpzLGdyb3VwOnRoaXMsaXNEaXJ0eTp5LGlzQ2hpbGREaXJ0eTpTLGRpcnR5VHJhbnNmb3JtOmMscmVuZGVyQ3R4OmUsZm9yY2VSZW5kZXI6dX0pLGMpdT0iZGlydHlUcmFuc2Zvcm0iO2Vsc2UgaWYoYSl7Y29uc3QgZT10aGlzLmNvbXB1dGVCQm94KCk7dm9pZCAwIT09dGhpcy5sYXN0QkJveCYmdGhpcy5sYXN0QkJveC5lcXVhbHMoZSl8fCh1PSJkaXJ0eVRyYW5zZm9ybSIsdGhpcy5sYXN0QkJveD1lKX1pZighKHl8fFN8fHd8fHUpKXJldHVybiBzJiZ2JiZyKHtuYW1lOnMscmVzdWx0OiJza2lwcGluZyIscmVuZGVyQ3R4OmUsY291bnRzOnRoaXMubm9kZUNvdW50LGdyb3VwOnRoaXN9KSxhJiZ2JiYodi5sYXllcnNTa2lwcGVkKyssdi5ub2Rlc1NraXBwZWQrPXRoaXMubm9kZUNvdW50LmNvdW50KSx2b2lkIHRoaXMubWFya0NsZWFuKHtyZWN1cnNpdmU6ITF9KTtjb25zdCBiPXRoaXMudmlzaWJsZTtpZihhKXtpZihoPWEuY29udGV4dCxoLnNhdmUoKSxoLnJlc2V0VHJhbnNmb3JtKCksImRpcnR5VHJhbnNmb3JtIiE9PXUmJih1PVN8fG4pLHUmJmEuY2xlYXIoKSxwKXtjb25zdHt3aWR0aDp0LGhlaWdodDppLHg6byx5Om59PXA7cigoKT0+KHtuYW1lOnMsY2xpcEJCb3g6cCxjdHhUcmFuc2Zvcm06aC5nZXRUcmFuc2Zvcm0oKSxyZW5kZXJDdHg6ZSxncm91cDp0aGlzfSkpLHRoaXMuY2xpcEN0eChoLG8sbix0LGkpfWguc2V0VHJhbnNmb3JtKEMpfWVsc2UgaC5nbG9iYWxBbHBoYSo9dGhpcy5vcGFjaXR5O2lmKHRoaXMuY29tcHV0ZVRyYW5zZm9ybU1hdHJpeCgpLHRoaXMubWF0cml4LnRvQ29udGV4dChoKSxkKXtjb25zdHt4OnQseTppLHdpZHRoOm8saGVpZ2h0Om59PWQ7aC5zYXZlKCkscigoKT0+KHtuYW1lOnMsY2xpcFJlY3Q6ZCxjdHhUcmFuc2Zvcm06aC5nZXRUcmFuc2Zvcm0oKSxyZW5kZXJDdHg6ZSxncm91cDp0aGlzfSkpLHRoaXMuY2xpcEN0eChoLHQsaSxvLG4pLHA9dGhpcy5tYXRyaXgudHJhbnNmb3JtQkJveChkKX1jb25zdCBFPXRoaXMuaGFzVmlydHVhbENoaWxkcmVuKCk7bj8odGhpcy5zb3J0Q2hpbGRyZW4obCksImRpcnR5VHJhbnNmb3JtIiE9PXUmJih1PSEwKSk6RSYmdGhpcy5zb3J0Q2hpbGRyZW4obCk7Y29uc3QgUj11IT09ZS5mb3JjZVJlbmRlcnx8cCE9PWUuY2xpcEJCb3h8fGghPT1lLmN0eD9mKG0oe30sZSkse2N0eDpoLGZvcmNlUmVuZGVyOnUsY2xpcEJCb3g6cH0pOmU7bGV0IHg9MDtmb3IoY29uc3QgZSBvZiBsKWUudmlzaWJsZSYmYj91fHwwIT09ZS5kaXJ0eT8oaC5zYXZlKCksZS5yZW5kZXIoUiksaC5yZXN0b3JlKCkpOnYmJih4Kz1lLm5vZGVDb3VudC5jb3VudCk6KGUubWFya0NsZWFuKCksdiYmKHgrPWUubm9kZUNvdW50LmNvdW50KSk7aWYodiYmKHYubm9kZXNTa2lwcGVkKz14KSxzdXBlci5yZW5kZXIoZSksZCYmaC5yZXN0b3JlKCksRSlmb3IoY29uc3QgZSBvZiB0aGlzLnZpcnR1YWxDaGlsZHJlbillLm1hcmtDbGVhbih7cmVjdXJzaXZlOiJ2aXJ0dWFsIn0pO2EmJih2JiZ2LmxheWVyc1JlbmRlcmVkKyssaC5yZXN0b3JlKCksdSYmYS5zbmFwc2hvdCgpLG51bGw9PShpPSh0PWEuY29udGV4dCkudmVyaWZ5RGVwdGhaZXJvKXx8aS5jYWxsKHQpKSxzJiZ2JiZyKHtuYW1lOnMscmVzdWx0OiJyZW5kZXJlZCIsc2tpcHBlZDp4LHJlbmRlckN0eDplLGNvdW50czp0aGlzLm5vZGVDb3VudCxncm91cDp0aGlzfSl9c29ydENoaWxkcmVuKGUpe3RoaXMuZGlydHlaSW5kZXg9ITEsZS5zb3J0KChlLHQpPT57dmFyIGkscztyZXR1cm4gVG4oW2UuekluZGV4LC4uLm51bGwhPShpPWUuekluZGV4U3ViT3JkZXIpP2k6W3ZvaWQgMCx2b2lkIDBdLGUuc2VyaWFsTnVtYmVyXSxbdC56SW5kZXgsLi4ubnVsbCE9KHM9dC56SW5kZXhTdWJPcmRlcik/czpbdm9pZCAwLHZvaWQgMF0sdC5zZXJpYWxOdW1iZXJdLHhuKX0pfWNsaXBDdHgoZSx0LGkscyxyKXtlLmJlZ2luUGF0aCgpLGUubW92ZVRvKHQsaSksZS5saW5lVG8odCtzLGkpLGUubGluZVRvKHQrcyxpK3IpLGUubGluZVRvKHQsaStyKSxlLmNsb3NlUGF0aCgpLGUuY2xpcCgpfXN0YXRpYyBjb21wdXRlQkJveChlKXtsZXQgdD0xLzAsaT0tMS8wLHM9MS8wLHI9LTEvMDtyZXR1cm4gZS5mb3JFYWNoKGU9PntpZighZS52aXNpYmxlKXJldHVybjtjb25zdCBvPWUuY29tcHV0ZVRyYW5zZm9ybWVkQkJveCgpO2lmKCFvKXJldHVybjtjb25zdCBuPW8ueCxhPW8ueTtuPHQmJih0PW4pLGE8cyYmKHM9YSksbitvLndpZHRoPmkmJihpPW4rby53aWR0aCksYStvLmhlaWdodD5yJiYocj1hK28uaGVpZ2h0KX0pLG5ldyBvcih0LHMsaS10LHItcyl9c2V0Q2xpcFJlY3RJbkdyb3VwQ29vcmRpbmF0ZVNwYWNlKGUpe3RoaXMuY2xpcFJlY3Q9ZT90aGlzLnRyYW5zZm9ybUJCb3goZSk6dm9pZCAwfX07RG4uY2xhc3NOYW1lPSJHcm91cCIseShbenMoe3JlZHJhdzozLGNvbnZlcnRvcjplPT5LcygwLGUsMSl9KV0sRG4ucHJvdG90eXBlLCJvcGFjaXR5IiwyKTt2YXIgT249RG4sQW49Y2xhc3MgZXh0ZW5kcyBab3tjb25zdHJ1Y3RvcihlPXt9KXtzdXBlcihlKSx0aGlzLngxPTAsdGhpcy55MT0wLHRoaXMueDI9MCx0aGlzLnkyPTAsdGhpcy5zdGFydExpbmU9ITEsdGhpcy5lbmRMaW5lPSExLHRoaXMuaXNSYW5nZT0hMSx0aGlzLnJlc3RvcmVPd25TdHlsZXMoKX1jb21wdXRlQkJveCgpe3JldHVybiBuZXcgb3IodGhpcy54MSx0aGlzLnkxLHRoaXMueDItdGhpcy54MSx0aGlzLnkyLXRoaXMueTEpfWlzUG9pbnRJblBhdGgoZSx0KXtyZXR1cm4hMX1yZW5kZXIoZSl7dmFyIHQ7Y29uc3R7Y3R4OmksZm9yY2VSZW5kZXI6cyxzdGF0czpyfT1lO2lmKDA9PT10aGlzLmRpcnR5JiYhcylyZXR1cm4gdm9pZChyJiYoci5ub2Rlc1NraXBwZWQrPXRoaXMubm9kZUNvdW50LmNvdW50KSk7dGhpcy5jb21wdXRlVHJhbnNmb3JtTWF0cml4KCksdGhpcy5tYXRyaXgudG9Db250ZXh0KGkpO2xldHt4MTpvLHkxOm4seDI6YSx5MjpsfT10aGlzO289dGhpcy5hbGlnbihvKSxuPXRoaXMuYWxpZ24obiksYT10aGlzLmFsaWduKGEpLGw9dGhpcy5hbGlnbihsKTtjb25zdHtmaWxsOmQsb3BhY2l0eTpjLGlzUmFuZ2U6aH09dGhpcztpZighKCFofHwhZCkpe2NvbnN0e2ZpbGxPcGFjaXR5OmV9PXRoaXM7aS5maWxsU3R5bGU9ZCxpLmdsb2JhbEFscGhhPWMqZSxpLmJlZ2luUGF0aCgpLGkubW92ZVRvKG8sbiksaS5saW5lVG8oYSxuKSxpLmxpbmVUbyhhLGwpLGkubGluZVRvKG8sbCksaS5jbG9zZVBhdGgoKSxpLmZpbGwoKX1jb25zdHtzdHJva2U6dSxzdHJva2VXaWR0aDpwLHN0YXJ0TGluZTpnLGVuZExpbmU6bX09dGhpcztpZighKCFnJiYhbXx8IXV8fCFwKSl7Y29uc3R7c3Ryb2tlT3BhY2l0eTplLGxpbmVEYXNoOnQsbGluZURhc2hPZmZzZXQ6cyxsaW5lQ2FwOnIsbGluZUpvaW46ZH09dGhpcztpLnN0cm9rZVN0eWxlPXUsaS5nbG9iYWxBbHBoYT1jKmUsaS5saW5lV2lkdGg9cCx0JiZpLnNldExpbmVEYXNoKHQpLHMmJihpLmxpbmVEYXNoT2Zmc2V0PXMpLHImJihpLmxpbmVDYXA9ciksZCYmKGkubGluZUpvaW49ZCksaS5iZWdpblBhdGgoKSxnJiYoaS5tb3ZlVG8obyxuKSxpLmxpbmVUbyhhLG4pKSxtJiYoaS5tb3ZlVG8oYSxsKSxpLmxpbmVUbyhvLGwpKSxpLnN0cm9rZSgpfW51bGw9PSh0PXRoaXMuZmlsbFNoYWRvdyl8fHQubWFya0NsZWFuKCksc3VwZXIucmVuZGVyKGUpfX07QW4uY2xhc3NOYW1lPSJSYW5nZSIsQW4uZGVmYXVsdFN0eWxlcz1mKG0oe30sWm8uZGVmYXVsdFN0eWxlcykse3N0cm9rZVdpZHRoOjF9KSx5KFt6cyh7cmVkcmF3OjJ9KV0sQW4ucHJvdG90eXBlLCJ4MSIsMikseShbenMoe3JlZHJhdzoyfSldLEFuLnByb3RvdHlwZSwieTEiLDIpLHkoW3pzKHtyZWRyYXc6Mn0pXSxBbi5wcm90b3R5cGUsIngyIiwyKSx5KFt6cyh7cmVkcmF3OjJ9KV0sQW4ucHJvdG90eXBlLCJ5MiIsMikseShbenMoe3JlZHJhdzoyfSldLEFuLnByb3RvdHlwZSwic3RhcnRMaW5lIiwyKSx5KFt6cyh7cmVkcmF3OjJ9KV0sQW4ucHJvdG90eXBlLCJlbmRMaW5lIiwyKSx5KFt6cyh7cmVkcmF3OjJ9KV0sQW4ucHJvdG90eXBlLCJpc1JhbmdlIiwyKTt2YXIgUG49Y2xhc3MgZXh0ZW5kcyBmdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5lbmFibGVkPSEwLHRoaXMuY29sb3I9IiM0NjQ2NDYiLHRoaXMuZm9udFNpemU9MTIsdGhpcy5mb250RmFtaWx5PSJWZXJkYW5hLCBzYW5zLXNlcmlmIn1nZXRGb250KCl7cmV0dXJuIHRuKHRoaXMpfX07ZnVuY3Rpb24gTW4oZSl7Y29uc3R7cGFyYWxsZWxGbGlwUm90YXRpb246dD0wLHJlZ3VsYXJGbGlwUm90YXRpb246aT0wfT1lLHM9ZS5yb3RhdGlvbj9Xcih6cihlLnJvdGF0aW9uKSk6MCxyPSFzJiZ0Pj0wJiZ0PD1NYXRoLlBJPy0xOjEsbz0hcyYmaT49MCYmaTw9TWF0aC5QST8tMToxO2xldCBuPTA7cmV0dXJuIGUucGFyYWxsZWw/bj1yKk1hdGguUEkvMjotMT09PW8mJihuPU1hdGguUEkpLHtjb25maWd1cmVkUm90YXRpb246cyxkZWZhdWx0Um90YXRpb246bixwYXJhbGxlbEZsaXBGbGFnOnIscmVndWxhckZsaXBGbGFnOm99fWZ1bmN0aW9uIExuKGUsdCxpLHMscil7Y29uc3Qgbz10PjAmJnQ8PU1hdGguUEksbj1pPjAmJmk8PU1hdGguUEk7aWYoZSl7aWYoIXQmJiFpKXJldHVybiJjZW50ZXIiO2lmKHMqKG98fG4/LTE6MSk9PS0xKXJldHVybiJlbmQifWVsc2UgaWYocypyPT0tMSlyZXR1cm4iZW5kIjtyZXR1cm4ic3RhcnQifWZ1bmN0aW9uIEZuKGUsdCxpLHMscil7Y29uc3R7d2lkdGg6byxoZWlnaHQ6bn09dCxhPW5ldyBvcihpLHMsMCwwKTtyLnRyYW5zZm9ybUJCb3goYSx0KTtjb25zdHt4Omw9MCx5OmQ9MH09dDtyZXR1cm4gdC53aWR0aD1vLHQuaGVpZ2h0PW4se3BvaW50Ont4OmwseTpkLHNpemU6MH0sbGFiZWw6e3dpZHRoOm8saGVpZ2h0Om4sdGV4dDplfX19eShbcXIodG8pXSxQbi5wcm90b3R5cGUsImVuYWJsZWQiLDIpLHkoW3FyKHlvKV0sUG4ucHJvdG90eXBlLCJjb2xvciIsMikseShbcXIoUG8se29wdGlvbmFsOiEwfSldLFBuLnByb3RvdHlwZSwiZm9udFN0eWxlIiwyKSx5KFtxcihNbyx7b3B0aW9uYWw6ITB9KV0sUG4ucHJvdG90eXBlLCJmb250V2VpZ2h0IiwyKSx5KFtxcihubyldLFBuLnByb3RvdHlwZSwiZm9udFNpemUiLDIpLHkoW3FyKHNvKV0sUG4ucHJvdG90eXBlLCJmb250RmFtaWx5IiwyKSx5KFtxcihpbyx7b3B0aW9uYWw6ITB9KV0sUG4ucHJvdG90eXBlLCJmb3JtYXR0ZXIiLDIpO3ZhciBJbj0oZT0+KGVbZS5TRVJJRVNfQkFDS0dST1VORF9aSU5ERVg9MF09IlNFUklFU19CQUNLR1JPVU5EX1pJTkRFWCIsZVtlLkFYSVNfR1JJRF9aSU5ERVg9MV09IkFYSVNfR1JJRF9aSU5ERVgiLGVbZS5BWElTX1pJTkRFWD0yXT0iQVhJU19aSU5ERVgiLGVbZS5TRVJJRVNfQ1JPU1NMSU5FX1JBTkdFX1pJTkRFWD0zXT0iU0VSSUVTX0NST1NTTElORV9SQU5HRV9aSU5ERVgiLGVbZS5TRVJJRVNfTEFZRVJfWklOREVYPTRdPSJTRVJJRVNfTEFZRVJfWklOREVYIixlW2UuQVhJU19GT1JFR1JPVU5EX1pJTkRFWD01XT0iQVhJU19GT1JFR1JPVU5EX1pJTkRFWCIsZVtlLlNFUklFU19DUk9TU0hBSVJfWklOREVYPTZdPSJTRVJJRVNfQ1JPU1NIQUlSX1pJTkRFWCIsZVtlLlNFUklFU19MQUJFTF9aSU5ERVg9N109IlNFUklFU19MQUJFTF9aSU5ERVgiLGVbZS5TRVJJRVNfQ1JPU1NMSU5FX0xJTkVfWklOREVYPThdPSJTRVJJRVNfQ1JPU1NMSU5FX0xJTkVfWklOREVYIixlW2UuTEVHRU5EX1pJTkRFWD05XT0iTEVHRU5EX1pJTkRFWCIsZSkpKElufHx7fSksTm49ZT0+ISFlJiZPYmplY3QuaGFzT3duKGUsInRvU3RyaW5nIikmJkhlKGUudG9TdHJpbmcoKSksR249ZT0+amUoZSl8fChlPT4hIWUmJk9iamVjdC5oYXNPd24oZSwidmFsdWVPZiIpJiZqZShlLnZhbHVlT2YoKSkpKGUpfHxOZShlKTtmdW5jdGlvbiBrbihlLHQpe3JldHVybiB0JiZHbihlKT9lOnQ/dm9pZCAwOkhlKGUpfHxObihlKT9lOlN0cmluZyhlKX1mdW5jdGlvbiBfbihlKXtyZXR1cm4gTm4oZSkmJk9iamVjdC5oYXNPd24oZSwiaWQiKT9lLmlkOmV9dmFyIFZuPWU9PiJ2YWx1ZSI9PT1lP1dvKChlLHQpPT4ibGluZSI9PT10LnRhcmdldC50eXBlLGU9PiJyYW5nZSI9PT1lLnRhcmdldC50eXBlPyJjcm9zc0xpbmUgdHlwZSAncmFuZ2UnIHRvIGhhdmUgYSAncmFuZ2UnIHByb3BlcnR5IGluc3RlYWQgb2YgJ3ZhbHVlJyI6ImNyb3NzTGluZSBwcm9wZXJ0eSAndHlwZScgdG8gYmUgJ2xpbmUnIik6V28oKGUsdCk9PiJyYW5nZSI9PT10LnRhcmdldC50eXBlLGU9PiJsaW5lIj09PWUudGFyZ2V0LnR5cGU/ImNyb3NzTGluZSB0eXBlICdsaW5lJyB0byBoYXZlIGEgJ3ZhbHVlJyBwcm9wZXJ0eSBpbnN0ZWFkIG9mICdyYW5nZSciOiJjcm9zc0xpbmUgcHJvcGVydHkgJ3R5cGUnIHRvIGJlICdyYW5nZSciKSxCbj0oZSx0LGkscyk9Pntjb25zdCByPSJsaW5lIj09PWUmJnZvaWQgMCE9PXQsbz0icmFuZ2UiPT09ZSYmdm9pZCAwIT09aTtpZighciYmIW8pcmV0dXJuITA7Y29uc3RbbixhXT1udWxsIT1pP2k6W3Qsdm9pZCAwXSxsPVJuLmlzKHMpLGQ9bnVsbCE9a24obixsKSYmIWlzTmFOKHMuY29udmVydChuKSksYz1udWxsIT1rbihhLGwpJiYhaXNOYU4ocy5jb252ZXJ0KGEpKTtpZihyJiZkfHxvJiZkJiZjKXJldHVybiEwO2NvbnN0IGg9WyJFeHBlY3RpbmcgY3Jvc3NMaW5lIl07cmV0dXJuIG8/KGR8fGgucHVzaCgicmFuZ2Ugc3RhcnQgIitVbyhuKSksY3x8aC5wdXNoKGAke2Q/IiI6ImFuZCAifXJhbmdlIGVuZCAke1VvKGEpfWApKTpoLnB1c2goInZhbHVlICIrVW8obikpLGgucHVzaCgidG8gbWF0Y2ggdGhlIGF4aXMgc2NhbGUgZG9tYWluLiIpLEwud2Fybk9uY2UoaC5qb2luKCIgIikpLCExfSxIbj17dG9wOnt4VHJhbnNsYXRpb25EaXJlY3Rpb246MCx5VHJhbnNsYXRpb25EaXJlY3Rpb246LTF9LGJvdHRvbTp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOjAseVRyYW5zbGF0aW9uRGlyZWN0aW9uOjF9LGxlZnQ6e3hUcmFuc2xhdGlvbkRpcmVjdGlvbjotMSx5VHJhbnNsYXRpb25EaXJlY3Rpb246MH0scmlnaHQ6e3hUcmFuc2xhdGlvbkRpcmVjdGlvbjoxLHlUcmFuc2xhdGlvbkRpcmVjdGlvbjowfSx0b3BMZWZ0Ont4VHJhbnNsYXRpb25EaXJlY3Rpb246MSx5VHJhbnNsYXRpb25EaXJlY3Rpb246LTF9LHRvcFJpZ2h0Ont4VHJhbnNsYXRpb25EaXJlY3Rpb246LTEseVRyYW5zbGF0aW9uRGlyZWN0aW9uOi0xfSxib3R0b21MZWZ0Ont4VHJhbnNsYXRpb25EaXJlY3Rpb246MSx5VHJhbnNsYXRpb25EaXJlY3Rpb246MX0sYm90dG9tUmlnaHQ6e3hUcmFuc2xhdGlvbkRpcmVjdGlvbjotMSx5VHJhbnNsYXRpb25EaXJlY3Rpb246MX0saW5zaWRlOnt4VHJhbnNsYXRpb25EaXJlY3Rpb246MCx5VHJhbnNsYXRpb25EaXJlY3Rpb246MH0saW5zaWRlTGVmdDp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOjEseVRyYW5zbGF0aW9uRGlyZWN0aW9uOjB9LGluc2lkZVJpZ2h0Ont4VHJhbnNsYXRpb25EaXJlY3Rpb246LTEseVRyYW5zbGF0aW9uRGlyZWN0aW9uOjB9LGluc2lkZVRvcDp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOjAseVRyYW5zbGF0aW9uRGlyZWN0aW9uOjF9LGluc2lkZUJvdHRvbTp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOjAseVRyYW5zbGF0aW9uRGlyZWN0aW9uOi0xfSxpbnNpZGVUb3BMZWZ0Ont4VHJhbnNsYXRpb25EaXJlY3Rpb246MSx5VHJhbnNsYXRpb25EaXJlY3Rpb246MX0saW5zaWRlQm90dG9tTGVmdDp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOjEseVRyYW5zbGF0aW9uRGlyZWN0aW9uOi0xfSxpbnNpZGVUb3BSaWdodDp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOi0xLHlUcmFuc2xhdGlvbkRpcmVjdGlvbjoxfSxpbnNpZGVCb3R0b21SaWdodDp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOi0xLHlUcmFuc2xhdGlvbkRpcmVjdGlvbjotMX19LFduPXt0b3A6e3hUcmFuc2xhdGlvbkRpcmVjdGlvbjoxLHlUcmFuc2xhdGlvbkRpcmVjdGlvbjowfSxib3R0b206e3hUcmFuc2xhdGlvbkRpcmVjdGlvbjotMSx5VHJhbnNsYXRpb25EaXJlY3Rpb246MH0sbGVmdDp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOjAseVRyYW5zbGF0aW9uRGlyZWN0aW9uOi0xfSxyaWdodDp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOjAseVRyYW5zbGF0aW9uRGlyZWN0aW9uOjF9LHRvcExlZnQ6e3hUcmFuc2xhdGlvbkRpcmVjdGlvbjotMSx5VHJhbnNsYXRpb25EaXJlY3Rpb246LTF9LHRvcFJpZ2h0Ont4VHJhbnNsYXRpb25EaXJlY3Rpb246LTEseVRyYW5zbGF0aW9uRGlyZWN0aW9uOjF9LGJvdHRvbUxlZnQ6e3hUcmFuc2xhdGlvbkRpcmVjdGlvbjoxLHlUcmFuc2xhdGlvbkRpcmVjdGlvbjotMX0sYm90dG9tUmlnaHQ6e3hUcmFuc2xhdGlvbkRpcmVjdGlvbjoxLHlUcmFuc2xhdGlvbkRpcmVjdGlvbjoxfSxpbnNpZGU6e3hUcmFuc2xhdGlvbkRpcmVjdGlvbjowLHlUcmFuc2xhdGlvbkRpcmVjdGlvbjowfSxpbnNpZGVMZWZ0Ont4VHJhbnNsYXRpb25EaXJlY3Rpb246MCx5VHJhbnNsYXRpb25EaXJlY3Rpb246MX0saW5zaWRlUmlnaHQ6e3hUcmFuc2xhdGlvbkRpcmVjdGlvbjowLHlUcmFuc2xhdGlvbkRpcmVjdGlvbjotMX0saW5zaWRlVG9wOnt4VHJhbnNsYXRpb25EaXJlY3Rpb246LTEseVRyYW5zbGF0aW9uRGlyZWN0aW9uOjB9LGluc2lkZUJvdHRvbTp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOjEseVRyYW5zbGF0aW9uRGlyZWN0aW9uOjB9LGluc2lkZVRvcExlZnQ6e3hUcmFuc2xhdGlvbkRpcmVjdGlvbjotMSx5VHJhbnNsYXRpb25EaXJlY3Rpb246MX0saW5zaWRlQm90dG9tTGVmdDp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOjEseVRyYW5zbGF0aW9uRGlyZWN0aW9uOjF9LGluc2lkZVRvcFJpZ2h0Ont4VHJhbnNsYXRpb25EaXJlY3Rpb246LTEseVRyYW5zbGF0aW9uRGlyZWN0aW9uOi0xfSxpbnNpZGVCb3R0b21SaWdodDp7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOjEseVRyYW5zbGF0aW9uRGlyZWN0aW9uOi0xfX07ZnVuY3Rpb24gam4oe3lEaXJlY3Rpb246ZSxwYWRkaW5nOnQ9MCxwb3NpdGlvbjppPSJ0b3AiLGJib3g6c30pe2NvbnN0IHI9ZT9IbjpXbix7eFRyYW5zbGF0aW9uRGlyZWN0aW9uOm8seVRyYW5zbGF0aW9uRGlyZWN0aW9uOm59PXJbaV07cmV0dXJue3hUcmFuc2xhdGlvbjpvKih0KyhlP3Mud2lkdGg6cy5oZWlnaHQpLzIpLHlUcmFuc2xhdGlvbjpuKih0KyhlP3MuaGVpZ2h0OnMud2lkdGgpLzIpfX12YXIgVW49KHt5RGlyZWN0aW9uOmUseEVuZDp0LHlTdGFydDppLHlFbmQ6c30pPT5lP3t4OnQvMix5Oml9Ont4OnQseTppc05hTihzKT9pOihpK3MpLzJ9LHpuPSh7eURpcmVjdGlvbjplLHhTdGFydDp0LHhFbmQ6aSx5U3RhcnQ6cyx5RW5kOnJ9KT0+ZT97eDp0LHk6aXNOYU4ocik/czoocytyKS8yfTp7eDppLzIseTpzfSxLbj0oe3lEaXJlY3Rpb246ZSx4RW5kOnQseVN0YXJ0OmkseUVuZDpzfSk9PmU/e3g6dCx5OmlzTmFOKHMpP2k6KGkrcykvMn06e3g6dC8yLHk6aXNOYU4ocyk/aTpzfSxZbj0oe3lEaXJlY3Rpb246ZSx4U3RhcnQ6dCx4RW5kOmkseVN0YXJ0OnMseUVuZDpyfSk9PmU/e3g6aS8yLHk6aXNOYU4ocik/czpyfTp7eDp0LHk6aXNOYU4ocik/czoocytyKS8yfSwkbj0oe3lEaXJlY3Rpb246ZSx4U3RhcnQ6dCx4RW5kOmkseVN0YXJ0OnN9KT0+ZT97eDp0LzIseTpzfTp7eDppLHk6c30sWG49KHt5RGlyZWN0aW9uOmUseFN0YXJ0OnQseVN0YXJ0OmkseUVuZDpzfSk9PmU/e3g6dCx5OmlzTmFOKHMpP2k6c306e3g6dCx5Oml9LHFuPSh7eURpcmVjdGlvbjplLHhFbmQ6dCx5U3RhcnQ6aSx5RW5kOnN9KT0+ZT97eDp0LHk6aX06e3g6dCx5OmlzTmFOKHMpP2k6c30sWm49KHt5RGlyZWN0aW9uOmUseFN0YXJ0OnQseEVuZDppLHlTdGFydDpzLHlFbmQ6cn0pPT5lP3t4OmkseTppc05hTihyKT9zOnJ9Ont4OnQseTppc05hTihyKT9zOnJ9LFFuPXt0b3A6e2M6VW59LGJvdHRvbTp7YzpZbn0sbGVmdDp7Yzp6bn0scmlnaHQ6e2M6S259LHRvcExlZnQ6e2M6JG59LHRvcFJpZ2h0OntjOnFufSxib3R0b21MZWZ0OntjOlhufSxib3R0b21SaWdodDp7Yzpabn0saW5zaWRlOntjOih7eEVuZDplLHlTdGFydDp0LHlFbmQ6aX0pPT4oe3g6ZS8yLHk6aXNOYU4oaSk/dDoodCtpKS8yfSl9LGluc2lkZUxlZnQ6e2M6em59LGluc2lkZVJpZ2h0OntjOktufSxpbnNpZGVUb3A6e2M6VW59LGluc2lkZUJvdHRvbTp7YzpZbn0saW5zaWRlVG9wTGVmdDp7Yzokbn0saW5zaWRlQm90dG9tTGVmdDp7YzpYbn0saW5zaWRlVG9wUmlnaHQ6e2M6cW59LGluc2lkZUJvdHRvbVJpZ2h0OntjOlpufX0sSm49Vm8oWyJ0b3AiLCJsZWZ0IiwicmlnaHQiLCJib3R0b20iLCJ0b3BMZWZ0IiwidG9wUmlnaHQiLCJib3R0b21MZWZ0IiwiYm90dG9tUmlnaHQiLCJpbnNpZGUiLCJpbnNpZGVMZWZ0IiwiaW5zaWRlUmlnaHQiLCJpbnNpZGVUb3AiLCJpbnNpZGVCb3R0b20iLCJpbnNpZGVUb3BMZWZ0IiwiaW5zaWRlQm90dG9tTGVmdCIsImluc2lkZVRvcFJpZ2h0IiwiaW5zaWRlQm90dG9tUmlnaHQiXSwiY3Jvc3NMaW5lIGxhYmVsIHBvc2l0aW9uIiksZWE9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmVuYWJsZWQ9dm9pZCAwLHRoaXMudGV4dD12b2lkIDAsdGhpcy5mb250U3R5bGU9dm9pZCAwLHRoaXMuZm9udFdlaWdodD12b2lkIDAsdGhpcy5mb250U2l6ZT0xNCx0aGlzLmZvbnRGYW1pbHk9IlZlcmRhbmEsIHNhbnMtc2VyaWYiLHRoaXMucGFkZGluZz01LHRoaXMuY29sb3I9InJnYmEoODcsIDg3LCA4NywgMSkiLHRoaXMucG9zaXRpb249dm9pZCAwLHRoaXMucm90YXRpb249dm9pZCAwLHRoaXMucGFyYWxsZWw9dm9pZCAwfX07eShbcXIodG8se29wdGlvbmFsOiEwfSldLGVhLnByb3RvdHlwZSwiZW5hYmxlZCIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLGVhLnByb3RvdHlwZSwidGV4dCIsMikseShbcXIoUG8se29wdGlvbmFsOiEwfSldLGVhLnByb3RvdHlwZSwiZm9udFN0eWxlIiwyKSx5KFtxcihNbyx7b3B0aW9uYWw6ITB9KV0sZWEucHJvdG90eXBlLCJmb250V2VpZ2h0IiwyKSx5KFtxcihubyldLGVhLnByb3RvdHlwZSwiZm9udFNpemUiLDIpLHkoW3FyKHNvKV0sZWEucHJvdG90eXBlLCJmb250RmFtaWx5IiwyKSx5KFtxcihybyldLGVhLnByb3RvdHlwZSwicGFkZGluZyIsMikseShbcXIoeW8se29wdGlvbmFsOiEwfSldLGVhLnByb3RvdHlwZSwiY29sb3IiLDIpLHkoW3FyKEpuLHtvcHRpb25hbDohMH0pXSxlYS5wcm90b3R5cGUsInBvc2l0aW9uIiwyKSx5KFtxcihsbyx7b3B0aW9uYWw6ITB9KV0sZWEucHJvdG90eXBlLCJyb3RhdGlvbiIsMikseShbcXIodG8se29wdGlvbmFsOiEwfSldLGVhLnByb3RvdHlwZSwicGFyYWxsZWwiLDIpO3ZhciB0YT1jbGFzcyBle2NvbnN0cnVjdG9yKCl7dGhpcy5pZD1Xcyh0aGlzKSx0aGlzLmVuYWJsZWQ9dm9pZCAwLHRoaXMudHlwZT12b2lkIDAsdGhpcy5yYW5nZT12b2lkIDAsdGhpcy52YWx1ZT12b2lkIDAsdGhpcy5maWxsPXZvaWQgMCx0aGlzLmZpbGxPcGFjaXR5PXZvaWQgMCx0aGlzLnN0cm9rZT12b2lkIDAsdGhpcy5zdHJva2VXaWR0aD12b2lkIDAsdGhpcy5zdHJva2VPcGFjaXR5PXZvaWQgMCx0aGlzLmxpbmVEYXNoPXZvaWQgMCx0aGlzLmxhYmVsPW5ldyBlYSx0aGlzLnNjYWxlPXZvaWQgMCx0aGlzLmNsaXBwZWRSYW5nZT1bLTEvMCwxLzBdLHRoaXMuZ3JpZExlbmd0aD0wLHRoaXMuc2lkZUZsYWc9LTEsdGhpcy5wYXJhbGxlbEZsaXBSb3RhdGlvbj0wLHRoaXMucmVndWxhckZsaXBSb3RhdGlvbj0wLHRoaXMuZGlyZWN0aW9uPSJ4Iix0aGlzLmdyb3VwPW5ldyBPbih7bmFtZToiIit0aGlzLmlkLGxheWVyOiEwLHpJbmRleDplLkxJTkVfTEFZRVJfWklOREVYfSksdGhpcy5sYWJlbEdyb3VwPW5ldyBPbih7bmFtZToiIit0aGlzLmlkLGxheWVyOiEwLHpJbmRleDplLkxBQkVMX0xBWUVSX1pJTkRFWH0pLHRoaXMuY3Jvc3NMaW5lUmFuZ2U9bmV3IEFuLHRoaXMuY3Jvc3NMaW5lTGFiZWw9bmV3IGVuLHRoaXMubGFiZWxQb2ludD12b2lkIDAsdGhpcy5kYXRhPVtdLHRoaXMuc3RhcnRMaW5lPSExLHRoaXMuZW5kTGluZT0hMSx0aGlzLmlzUmFuZ2U9ITE7Y29uc3R7Z3JvdXA6dCxsYWJlbEdyb3VwOmksY3Jvc3NMaW5lUmFuZ2U6cyxjcm9zc0xpbmVMYWJlbDpyfT10aGlzO3QuYXBwZW5kKHMpLGkuYXBwZW5kKHIpLHMucG9pbnRlckV2ZW50cz0xfXVwZGF0ZShlKXtjb25zdHtlbmFibGVkOnQsZGF0YTppLHR5cGU6cyx2YWx1ZTpyLHJhbmdlOm8sc2NhbGU6bn09dGhpcztpZighKHMmJm4mJnQmJmUmJkJuKHMscixvLG4pJiYwIT09aS5sZW5ndGgpKXJldHVybiB0aGlzLmdyb3VwLnZpc2libGU9ITEsdm9pZCh0aGlzLmxhYmVsR3JvdXAudmlzaWJsZT0hMSk7dGhpcy5ncm91cC52aXNpYmxlPWUsdGhpcy5sYWJlbEdyb3VwLnZpc2libGU9ZSx0aGlzLmdyb3VwLnpJbmRleD10aGlzLmdldFpJbmRleCh0aGlzLmlzUmFuZ2UpLHRoaXMudXBkYXRlTm9kZXMoKX1jYWxjdWxhdGVMYXlvdXQoZSx0KXtpZighZSlyZXR1cm47aWYoIXRoaXMuY3JlYXRlTm9kZURhdGEodCkpcmV0dXJuO2NvbnN0e3NpZGVGbGFnOmksZ3JpZExlbmd0aDpzLGRhdGE6cn09dGhpcyxvPVtdLG49aSpzLGE9clswXSxsPXJbMV0sZD1uZXcgb3IoTWF0aC5taW4oMCxuKSxNYXRoLm1pbihhLGwpLE1hdGguYWJzKDAtbiksTWF0aC5hYnMoYS1sKSk7by5wdXNoKGQpO2NvbnN0IGM9dGhpcy5jb21wdXRlTGFiZWxCQm94KCk7cmV0dXJuIGMmJm8ucHVzaChjKSxvci5tZXJnZShvKX11cGRhdGVOb2Rlcygpe3RoaXMudXBkYXRlUmFuZ2VOb2RlKCksdGhpcy5sYWJlbC5lbmFibGVkJiYodGhpcy51cGRhdGVMYWJlbCgpLHRoaXMucG9zaXRpb25MYWJlbCgpKX1jcmVhdGVOb2RlRGF0YShlKXt2YXIgdCxpLHM7Y29uc3R7c2NhbGU6cixncmlkTGVuZ3RoOm8sc2lkZUZsYWc6bixkaXJlY3Rpb246YSxsYWJlbDp7cG9zaXRpb246bD0idG9wIn0sY2xpcHBlZFJhbmdlOmQsc3Ryb2tlV2lkdGg6Yz0wfT10aGlzO2lmKHRoaXMuZGF0YT1bXSwhcilyZXR1cm4hMTtjb25zdCBoPW51bGwhPSh0PXIuYmFuZHdpZHRoKT90OjAsdT1udWxsIT0oaT1yLnN0ZXApP2k6MCxwPShlPy0xOjEpKihyIGluc3RhbmNlb2YgWHI/KHUtaCkvMjowKSxbZyxtXT1bMCxuKm9dO2xldFtmLHZdPXRoaXMuZ2V0UmFuZ2UoKSxbQyx5XT1bTnVtYmVyKHIuY29udmVydChmLHtjbGFtcE1vZGU6ImNsYW1wZWQifSkpLXAsci5jb252ZXJ0KHYse2NsYW1wTW9kZToiY2xhbXBlZCJ9KStoK3BdO0M9WXMoQyxkKSx5PVlzKHksZCksW2Ysdl09W051bWJlcihyLmNvbnZlcnQoZikpLHIuY29udmVydCh2KStoXTtjb25zdCBTPShmPT09Q3x8dj09PXl8fEMhPT15KSYmTWF0aC5hYnMoeS1DKT4wO2lmKFMmJkM+eSYmKFtDLHldPVt5LENdLFtmLHZdPVt2LGZdKSxmLXA+PUMmJihmLT1wKSx2K3A8PXkmJih2Kz1wKSx0aGlzLmlzUmFuZ2U9Uyx0aGlzLnN0YXJ0TGluZT1jPjAmJmY+PUMmJmY8PUMrcCx0aGlzLmVuZExpbmU9Yz4wJiZ2Pj15LWgtcCYmdjw9eSwhUyYmIXRoaXMuc3RhcnRMaW5lJiYhdGhpcy5lbmRMaW5lKXJldHVybiExO2lmKHRoaXMuZGF0YT1bQyx5XSx0aGlzLmxhYmVsLmVuYWJsZWQpe2NvbnN0IGU9InkiPT09YSx7Yzp0PVVufT1udWxsIT0ocz1RbltsXSk/czp7fSx7eDppLHk6cn09dCh7eURpcmVjdGlvbjplLHhTdGFydDpnLHhFbmQ6bSx5U3RhcnQ6Qyx5RW5kOnl9KTt0aGlzLmxhYmVsUG9pbnQ9e3g6aSx5OnJ9fXJldHVybiEwfXVwZGF0ZVJhbmdlTm9kZSgpe3ZhciBlO2NvbnN0e2Nyb3NzTGluZVJhbmdlOnQsc2lkZUZsYWc6aSxncmlkTGVuZ3RoOnMsZGF0YTpyLHN0YXJ0TGluZTpvLGVuZExpbmU6bixpc1JhbmdlOmEsZmlsbDpsLGZpbGxPcGFjaXR5OmQsc3Ryb2tlOmMsc3Ryb2tlV2lkdGg6aCxsaW5lRGFzaDp1fT10aGlzO3QueDE9MCx0LngyPWkqcyx0LnkxPXJbMF0sdC55Mj1yWzFdLHQuc3RhcnRMaW5lPW8sdC5lbmRMaW5lPW4sdC5pc1JhbmdlPWEsdC5maWxsPWwsdC5maWxsT3BhY2l0eT1udWxsIT1kP2Q6MSx0LnN0cm9rZT1jLHQuc3Ryb2tlV2lkdGg9bnVsbCE9aD9oOjEsdC5zdHJva2VPcGFjaXR5PW51bGwhPShlPXRoaXMuc3Ryb2tlT3BhY2l0eSk/ZToxLHQubGluZURhc2g9dX11cGRhdGVMYWJlbCgpe2NvbnN0e2Nyb3NzTGluZUxhYmVsOmUsbGFiZWw6dH09dGhpczt0LnRleHQmJihlLmZvbnRTdHlsZT10LmZvbnRTdHlsZSxlLmZvbnRXZWlnaHQ9dC5mb250V2VpZ2h0LGUuZm9udFNpemU9dC5mb250U2l6ZSxlLmZvbnRGYW1pbHk9dC5mb250RmFtaWx5LGUuZmlsbD10LmNvbG9yLGUudGV4dD10LnRleHQpfXBvc2l0aW9uTGFiZWwoKXtjb25zdHtjcm9zc0xpbmVMYWJlbDplLGxhYmVsUG9pbnQ6e3g6dCx5Oml9PXt9LGxhYmVsOntwYXJhbGxlbDpzLHJvdGF0aW9uOnIscG9zaXRpb246bz0idG9wIixwYWRkaW5nOm49MH0sZGlyZWN0aW9uOmEscGFyYWxsZWxGbGlwUm90YXRpb246bCxyZWd1bGFyRmxpcFJvdGF0aW9uOmR9PXRoaXM7aWYodm9pZCAwPT09dHx8dm9pZCAwPT09aSlyZXR1cm47Y29uc3R7ZGVmYXVsdFJvdGF0aW9uOmMsY29uZmlndXJlZFJvdGF0aW9uOmh9PU1uKHtyb3RhdGlvbjpyLHBhcmFsbGVsOnMscmVndWxhckZsaXBSb3RhdGlvbjpkLHBhcmFsbGVsRmxpcFJvdGF0aW9uOmx9KTtlLnJvdGF0aW9uPWMraCxlLnRleHRCYXNlbGluZT0ibWlkZGxlIixlLnRleHRBbGlnbj0iY2VudGVyIjtjb25zdCB1PWUuY29tcHV0ZVRyYW5zZm9ybWVkQkJveCgpO2lmKCF1KXJldHVybjtjb25zdCBwPSJ5Ij09PWEse3hUcmFuc2xhdGlvbjpnLHlUcmFuc2xhdGlvbjptfT1qbih7eURpcmVjdGlvbjpwLHBhZGRpbmc6bixwb3NpdGlvbjpvLGJib3g6dX0pO2UudHJhbnNsYXRpb25YPXQrZyxlLnRyYW5zbGF0aW9uWT1pK219Z2V0WkluZGV4KHQ9ITEpe3JldHVybiB0P2UuUkFOR0VfTEFZRVJfWklOREVYOmUuTElORV9MQVlFUl9aSU5ERVh9Z2V0UmFuZ2UoKXt2YXIgZTtjb25zdHt2YWx1ZTp0LHJhbmdlOmksc2NhbGU6c309dGhpcyxyPVJuLmlzKHMpLG89bnVsbCE9KGU9bnVsbD09aT92b2lkIDA6aVswXSk/ZTp0O2xldCBuPW51bGw9PWk/dm9pZCAwOmlbMV07cmV0dXJuIHJ8fHZvaWQgMCE9PW58fChuPW8pLHImJm89PT1uJiYobj12b2lkIDApLFtvLG5dfWNvbXB1dGVMYWJlbEJCb3goKXtjb25zdHtsYWJlbDplfT10aGlzO2lmKCFlLmVuYWJsZWQpcmV0dXJuO2NvbnN0IHQ9bmV3IGVuO3QuZm9udEZhbWlseT1lLmZvbnRGYW1pbHksdC5mb250U2l6ZT1lLmZvbnRTaXplLHQuZm9udFN0eWxlPWUuZm9udFN0eWxlLHQuZm9udFdlaWdodD1lLmZvbnRXZWlnaHQsdC50ZXh0PWUudGV4dDtjb25zdHtsYWJlbFBvaW50Ont4OmkseTpzfT17fSxsYWJlbDp7cGFyYWxsZWw6cixyb3RhdGlvbjpvLHBvc2l0aW9uOm49InRvcCIscGFkZGluZzphPTB9LGRpcmVjdGlvbjpsLHBhcmFsbGVsRmxpcFJvdGF0aW9uOmQscmVndWxhckZsaXBSb3RhdGlvbjpjfT10aGlzO2lmKHZvaWQgMD09PWl8fHZvaWQgMD09PXMpcmV0dXJuO2NvbnN0e2NvbmZpZ3VyZWRSb3RhdGlvbjpofT1Nbih7cm90YXRpb246byxwYXJhbGxlbDpyLHJlZ3VsYXJGbGlwUm90YXRpb246YyxwYXJhbGxlbEZsaXBSb3RhdGlvbjpkfSk7dC5yb3RhdGlvbj1oLHQudGV4dEJhc2VsaW5lPSJtaWRkbGUiLHQudGV4dEFsaWduPSJjZW50ZXIiO2NvbnN0IHU9dC5jb21wdXRlVHJhbnNmb3JtZWRCQm94KCk7aWYoIXUpcmV0dXJuO2NvbnN0IHA9InkiPT09bCx7eFRyYW5zbGF0aW9uOmcseVRyYW5zbGF0aW9uOm19PWpuKHt5RGlyZWN0aW9uOnAscGFkZGluZzphLHBvc2l0aW9uOm4sYmJveDp1fSk7cmV0dXJuIHQudHJhbnNsYXRpb25YPWkrZyx0LnRyYW5zbGF0aW9uWT1zK20sdC5jb21wdXRlVHJhbnNmb3JtZWRCQm94KCl9Y2FsY3VsYXRlUGFkZGluZyhlKXt2YXIgdCxpLHMscixvLG4sYSxsO2NvbnN0e2lzUmFuZ2U6ZCxzdGFydExpbmU6YyxlbmRMaW5lOmgsZGlyZWN0aW9uOnUsbGFiZWw6e3BhZGRpbmc6cD0wLHBvc2l0aW9uOmc9InRvcCJ9fT10aGlzO2lmKCFkJiYhYyYmIWgpcmV0dXJuO2NvbnN0IG09dGhpcy5jb21wdXRlTGFiZWxCQm94KCk7aWYobnVsbD09KG51bGw9PW0/dm9pZCAwOm0ueCl8fG51bGw9PShudWxsPT1tP3ZvaWQgMDptLnkpKXJldHVybjtjb25zdCBmPWZ1bmN0aW9uKHt5RGlyZWN0aW9uOmUsYmJveDp0LHBhZGRpbmc6aT0wLHBvc2l0aW9uOnM9InRvcCJ9KXtjb25zdCByPXt9O3JldHVybiBzLnN0YXJ0c1dpdGgoImluc2lkZSIpfHwoInRvcCIhPT1zfHxlPyJib3R0b20iIT09c3x8ZT8ibGVmdCI9PT1zJiZlP3IubGVmdD1pK3Qud2lkdGg6InJpZ2h0Ij09PXMmJmUmJihyLnJpZ2h0PWkrdC53aWR0aCk6ci5ib3R0b209aSt0LmhlaWdodDpyLnRvcD1pK3QuaGVpZ2h0KSxyfSh7eURpcmVjdGlvbjoieSI9PT11LHBhZGRpbmc6cCxwb3NpdGlvbjpnLGJib3g6bX0pO2UubGVmdD1NYXRoLm1heChudWxsIT0odD1lLmxlZnQpP3Q6MCxudWxsIT0oaT1mLmxlZnQpP2k6MCksZS5yaWdodD1NYXRoLm1heChudWxsIT0ocz1lLnJpZ2h0KT9zOjAsbnVsbCE9KHI9Zi5yaWdodCk/cjowKSxlLnRvcD1NYXRoLm1heChudWxsIT0obz1lLnRvcCk/bzowLG51bGwhPShuPWYudG9wKT9uOjApLGUuYm90dG9tPU1hdGgubWF4KG51bGwhPShhPWUuYm90dG9tKT9hOjAsbnVsbCE9KGw9Zi5ib3R0b20pP2w6MCl9fTt0YS5MSU5FX0xBWUVSX1pJTkRFWD04LHRhLlJBTkdFX0xBWUVSX1pJTkRFWD0zLHRhLkxBQkVMX0xBWUVSX1pJTkRFWD03LHRhLmNsYXNzTmFtZT0iQ3Jvc3NMaW5lIix5KFtxcih0byx7b3B0aW9uYWw6ITB9KV0sdGEucHJvdG90eXBlLCJlbmFibGVkIiwyKSx5KFtxcihWbyhbInJhbmdlIiwibGluZSJdLCJhIGNyb3NzTGluZSB0eXBlIikse29wdGlvbmFsOiEwfSldLHRhLnByb3RvdHlwZSwidHlwZSIsMikseShbcXIoUXIoVm4oInJhbmdlIiksaG8ucmVzdHJpY3Qoe2xlbmd0aDoyfSkpLHtvcHRpb25hbDohMH0pXSx0YS5wcm90b3R5cGUsInJhbmdlIiwyKSx5KFtxcihWbigidmFsdWUiKSx7b3B0aW9uYWw6ITB9KV0sdGEucHJvdG90eXBlLCJ2YWx1ZSIsMikseShbcXIoeW8se29wdGlvbmFsOiEwfSldLHRhLnByb3RvdHlwZSwiZmlsbCIsMikseShbcXIoYW8se29wdGlvbmFsOiEwfSldLHRhLnByb3RvdHlwZSwiZmlsbE9wYWNpdHkiLDIpLHkoW3FyKHlvLHtvcHRpb25hbDohMH0pXSx0YS5wcm90b3R5cGUsInN0cm9rZSIsMikseShbcXIocm8se29wdGlvbmFsOiEwfSldLHRhLnByb3RvdHlwZSwic3Ryb2tlV2lkdGgiLDIpLHkoW3FyKGFvLHtvcHRpb25hbDohMH0pXSx0YS5wcm90b3R5cGUsInN0cm9rZU9wYWNpdHkiLDIpLHkoW3FyKE9vLHtvcHRpb25hbDohMH0pXSx0YS5wcm90b3R5cGUsImxpbmVEYXNoIiwyKTt2YXIgaWE9dGEsc2E9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLm1vZHVsZU1hcD1uZXcgTWFwfWFkZE1vZHVsZShlLHQpe2lmKHRoaXMubW9kdWxlTWFwLmhhcyhlLm9wdGlvbnNLZXkpKXRocm93IG5ldyBFcnJvcigiQUcgQ2hhcnRzIC0gbW9kdWxlIGFscmVhZHkgaW5pdGlhbGlzZWQ6ICIrZS5vcHRpb25zS2V5KTt0aGlzLm1vZHVsZU1hcC5zZXQoZS5vcHRpb25zS2V5LHQoZSkpfXJlbW92ZU1vZHVsZShlKXt2YXIgdDtjb25zdCBpPUhlKGUpP2U6ZS5vcHRpb25zS2V5O251bGw9PSh0PXRoaXMubW9kdWxlTWFwLmdldChpKSl8fHQuZGVzdHJveSgpLHRoaXMubW9kdWxlTWFwLmRlbGV0ZShpKX1pc01vZHVsZUVuYWJsZWQoZSl7cmV0dXJuIHRoaXMubW9kdWxlTWFwLmhhcyhIZShlKT9lOmUub3B0aW9uc0tleSl9Z2V0TW9kdWxlKGUpe3JldHVybiB0aGlzLm1vZHVsZU1hcC5nZXQoSGUoZSk/ZTplLm9wdGlvbnNLZXkpfWdldCBtb2R1bGVzKCl7cmV0dXJuIHRoaXMubW9kdWxlTWFwLnZhbHVlcygpfW1hcFZhbHVlcyhlKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm1vZHVsZU1hcC52YWx1ZXMoKSkubWFwKGUpfWRlc3Ryb3koKXtmb3IoY29uc3QgZSBvZiB0aGlzLm1vZHVsZU1hcC5rZXlzKCkpdGhpcy5yZW1vdmVNb2R1bGUoe29wdGlvbnNLZXk6ZX0pfX0scmE9e307ZnVuY3Rpb24gb2EoZSx0KXtjb25zdHtub2RlczppLHNlbGVjdGlvbnM6c309SXIoZSk7Zm9yKGNvbnN0IGUgb2Ygcyl7Zm9yKGNvbnN0IGkgb2YgZS5ub2RlcygpKXtjb25zdCBlPXQoaSxpLmRhdHVtKTtpLnNldFByb3BlcnRpZXMoZSl9ZS5jbGVhbnVwKCl9Zm9yKGNvbnN0IGUgb2YgaSl7Y29uc3QgaT10KGUsZS5kYXR1bSk7ZS5zZXRQcm9wZXJ0aWVzKGkpfX1DKHJhLHtyZXNldE1vdGlvbjooKT0+b2F9KTt2YXIgbmE9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMuc3RhdGVzPXQsdGhpcy5wcmVUcmFuc2l0aW9uQ2I9aSx0aGlzLmRlYnVnPUZzLmNyZWF0ZSghMCwiYW5pbWF0aW9uIiksdGhpcy5zdGF0ZT1lLHRoaXMuZGVidWcoYCVjJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9IHwgaW5pdCAtPiAke2V9YCwiY29sb3I6IGdyZWVuIil9dHJhbnNpdGlvbihlLHQpe3ZhciBpLHM7Y29uc3Qgcj10aGlzLnN0YXRlc1t0aGlzLnN0YXRlXSxvPW51bGw9PXI/dm9pZCAwOnJbZV07aWYoIW8pcmV0dXJuIHZvaWQgdGhpcy5kZWJ1ZyhgJWMke3RoaXMuY29uc3RydWN0b3IubmFtZX0gfCAke3RoaXMuc3RhdGV9IC0+ICR7ZX0gLT4gJHt0aGlzLnN0YXRlfWAsImNvbG9yOiBncmV5Iik7bGV0IG49dGhpcy5zdGF0ZTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIG8/bj1vOiJvYmplY3QiPT10eXBlb2YgbyYmKG49by50YXJnZXQpLHRoaXMuZGVidWcoYCVjJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9IHwgJHt0aGlzLnN0YXRlfSAtPiAke2V9IC0+ICR7bn1gLCJjb2xvcjogZ3JlZW4iKSxudWxsPT0oaT10aGlzLnByZVRyYW5zaXRpb25DYil8fGkuY2FsbCh0aGlzLHRoaXMuc3RhdGUsbiksdGhpcy5zdGF0ZT1uLCJmdW5jdGlvbiI9PXR5cGVvZiBvP28odCk6Im9iamVjdCI9PXR5cGVvZiBvJiYobnVsbD09KHM9by5hY3Rpb24pfHxzLmNhbGwobyx0KSksdGhpcy5zdGF0ZX19LGFhPWU9PmAoJHtlfSlgLGxhPWU9PmFhKGUpKyI/IixkYT1lPT5sYSgiPzoiK2UpLGNhPW5ldyBSZWdFeHAoWyJeIixkYShgJHtsYSgiLiIpfSR7YWEoIls8Pj1eXSIpfWApLGxhKCJbK1xcLSggXSIpLGxhKCJbJOKCrMKjwqXigqPigrkjXSIpLGxhKCIwIiksbGEoIlxcZCsiKSxsYSgiLCIpLGRhKCJcXC4iK2FhKCJcXGQrIikpLGxhKCJ+IiksbGEoIlslYS16XSIpLCIkIl0uam9pbigiIiksImkiKSxoYT1uZXcgUmVnRXhwKFsiXiIsYWEoIi4qPyIpLGAjXFx7JHthYSgiLis/Iil9XFx9YCxhYSgiLio/IiksIiQiXS5qb2luKCIiKSk7ZnVuY3Rpb24gdWEoZSl7bGV0IHQsaTtjb25zdCBzPWhhLmV4ZWMoZSk7cyYmKFssdCxlLGldPXMpO2NvbnN0IHI9Y2EuZXhlYyhlKTtpZighcil0aHJvdyBuZXcgRXJyb3IoIlRoZSBudW1iZXIgZm9ybWF0dGVyIGlzIGludmFsaWQ6ICIrZSk7Y29uc3RbLG8sbixhLGwsZCxjLGgsdSxwLGddPXI7cmV0dXJue2ZpbGw6byxhbGlnbjpuLHNpZ246YSxzeW1ib2w6bCx6ZXJvOmQsd2lkdGg6cGFyc2VJbnQoYyksY29tbWE6aCxwcmVjaXNpb246cGFyc2VJbnQodSksdHJpbTpCb29sZWFuKHApLHR5cGU6ZyxwcmVmaXg6dCxzdWZmaXg6aX19ZnVuY3Rpb24gcGEoZSl7Y29uc3QgdD0ic3RyaW5nIj09dHlwZW9mIGU/dWEoZSk6ZSx7ZmlsbDppLGFsaWduOnMsc2lnbjpyPSItIixzeW1ib2w6byx6ZXJvOm4sd2lkdGg6YSxjb21tYTpsLHR5cGU6ZCxwcmVmaXg6Yz0iIixzdWZmaXg6aD0iIixwcmVjaXNpb246dX09dDtsZXR7dHJpbTpwfT10O2NvbnN0IGc9dm9pZCAwPT09dXx8aXNOYU4odSk7bGV0IG0sZjtpZihkKWlmKGQgaW4gZmEmJmQgaW4gbWEpbT1nP21hW2RdOmZhW2RdO2Vsc2UgaWYoZCBpbiBmYSltPWZhW2RdO2Vsc2V7aWYoIShkIGluIG1hKSl0aHJvdyBuZXcgRXJyb3IoIlRoZSBudW1iZXIgZm9ybWF0dGVyIHR5cGUgaXMgaW52YWxpZDogIitkKTttPW1hW2RdfWVsc2UgbT1mYS5nLHA9ITA7cmV0dXJuIGY9bnVsbD09dXx8Zz9kPzY6MTI6dSxlPT57bGV0IHQ9bShlLGYpO3JldHVybiBwJiYodD10LnJlcGxhY2UoL1wuMCskLywiIikucmVwbGFjZSgvKFwuWzEtOV0pMCskLywiJDEiKSksbCYmKHQ9ZnVuY3Rpb24oZSx0KXtsZXQgaT1lLmluZGV4T2YoIi4iKTtpPDAmJihpPWUubGVuZ3RoKTtjb25zdCBzPWUuc3Vic3RyaW5nKDAsaSkuc3BsaXQoIiIpLHI9ZS5zdWJzdHJpbmcoaSk7Zm9yKGxldCBlPXMubGVuZ3RoLTM7ZT4wO2UtPTMpcy5zcGxpY2UoZSwwLHQpO3JldHVybmAke3Muam9pbigiIil9JHtyfWB9KHQsbCkpLHQ9ZnVuY3Rpb24oZSx0LGk9IiIpe2lmKCIoIj09PWkpcmV0dXJuIGU+PTA/dDpgKCR7dH0pYDtjb25zdCBzPSIrIj09PWk/IisiOiIiO3JldHVybmAke2U+PTA/czoi4oiSIn0ke3R9YH0oZSx0LHIpLG8mJiIjIiE9PW8mJih0PWAke299JHt0fWApLCIjIj09PW8mJiJ4Ij09PWQmJih0PSIweCIrdCksInMiPT09ZCYmKHQ9YCR7dH0ke2Z1bmN0aW9uKGUpe3JldHVybiBTYVt2YShlKV19KGUpfWApLCIlIiE9PWQmJiJwIiE9PWR8fCh0Kz0iJSIpLG51bGw9PWF8fGlzTmFOKGEpfHwodD1mdW5jdGlvbihlLHQsaT0iICIscz0iPiIpe2xldCByPWU7aWYoIj4iIT09cyYmcyl7aWYoIjwiPT09cylyPXIucGFkRW5kKHQsaSk7ZWxzZSBpZigiXiI9PT1zKXtjb25zdCBlPU1hdGgubWF4KDAsdC1yLmxlbmd0aCkscz1NYXRoLmNlaWwoZS8yKSxvPU1hdGguZmxvb3IoZS8yKTtyPXIucGFkU3RhcnQocytyLmxlbmd0aCxpKSxyPXIucGFkRW5kKG8rci5sZW5ndGgsaSl9fWVsc2Ugcj1yLnBhZFN0YXJ0KHQsaSk7cmV0dXJuIHJ9KHQsYSxudWxsIT1pP2k6bixzKSksdD1gJHtjfSR7dH0ke2h9YCx0fX12YXIgZ2E9ZT0+TWF0aC5mbG9vcihNYXRoLmFicyhlKSksbWE9e2I6ZT0+Z2EoZSkudG9TdHJpbmcoMiksYzplPT5TdHJpbmcuZnJvbUNoYXJDb2RlKGUpLGQ6ZT0+TWF0aC5yb3VuZChNYXRoLmFicyhlKSkudG9GaXhlZCgwKSxvOmU9PmdhKGUpLnRvU3RyaW5nKDgpLHg6ZT0+Z2EoZSkudG9TdHJpbmcoMTYpLFg6ZT0+bWEueChlKS50b1VwcGVyQ2FzZSgpLG46ZT0+bWEuZChlKSwiJSI6ZT0+IiIrZ2EoMTAwKmUpLnRvRml4ZWQoMCl9LGZhPXtlOihlLHQpPT5NYXRoLmFicyhlKS50b0V4cG9uZW50aWFsKHQpLEU6KGUsdCk9PmZhLmUoZSx0KS50b1VwcGVyQ2FzZSgpLGY6KGUsdCk9Pk1hdGguYWJzKGUpLnRvRml4ZWQodCksRjooZSx0KT0+ZmEuZihlLHQpLnRvVXBwZXJDYXNlKCksZzooZSx0KT0+e2lmKDA9PT1lKXJldHVybiIwIjtjb25zdCBpPU1hdGguYWJzKGUpLHM9TWF0aC5mbG9vcihNYXRoLmxvZzEwKGkpKTtyZXR1cm4gcz49LTQmJnM8dD9pLnRvRml4ZWQodC0xLXMpOmkudG9FeHBvbmVudGlhbCh0LTEpfSxHOihlLHQpPT5mYS5nKGUsdCkudG9VcHBlckNhc2UoKSxuOihlLHQpPT5mYS5nKGUsdCkscDooZSx0KT0+ZmEucigxMDAqZSx0KSxyOihlLHQpPT57aWYoMD09PWUpcmV0dXJuIjAiO2NvbnN0IGk9TWF0aC5hYnMoZSkscz1NYXRoLmZsb29yKE1hdGgubG9nMTAoaSkpLSh0LTEpO2lmKHM8PTApcmV0dXJuIGkudG9GaXhlZCgtcyk7Y29uc3Qgcj1NYXRoLnBvdygxMCxzKTtyZXR1cm4oTWF0aC5yb3VuZChpL3IpKnIpLnRvRml4ZWQoKX0sczooZSx0KT0+e2NvbnN0IGk9dmEoZSk7cmV0dXJuIGZhLnIoZS9NYXRoLnBvdygxMCxpKSx0KX0sIiUiOihlLHQpPT5mYS5mKDEwMCplLHQpfTtmdW5jdGlvbiB2YShlKXtyZXR1cm4gS3MoQ2EsMypNYXRoLmZsb29yKE1hdGgubG9nMTAoTWF0aC5hYnMoZSkpLzMpLHlhKX12YXIgQ2E9LTI0LHlhPTI0LFNhPXtbQ2FdOiJ5IixbLTIxXToieiIsWy0xOF06ImEiLFstMTVdOiJmIixbLTEyXToicCIsWy05XToibiIsWy02XToiwrUiLFstM106Im0iLDA6IiIsMzoiayIsNjoiTSIsOToiRyIsMTI6IlQiLDE1OiJQIiwxODoiRSIsMjE6IloiLFt5YV06IlkifTtmdW5jdGlvbiB3YShlLHQpe2NvbnN0IGk9dWEobnVsbCE9dD90OiIsZiIpLHtwcmVjaXNpb246c309aTsobnVsbD09c3x8aXNOYU4ocykpJiYoImYiPT09aS50eXBlfHwiJSI9PT1pLnR5cGU/aS5wcmVjaXNpb249TWF0aC5tYXgoLi4uZS5tYXAoZT0+e2lmKCJudW1iZXIiIT10eXBlb2YgZXx8MD09PWUpcmV0dXJuIDA7Y29uc3QgdD1NYXRoLmZsb29yKE1hdGgubG9nMTAoTWF0aC5hYnMoZSkpKSxzPWkudHlwZT82OjEyLHI9ZS50b0V4cG9uZW50aWFsKHMtMSkucmVwbGFjZSgvXC4/MCtlLywiZSIpLG89ci5pbmRleE9mKCIuIik7aWYobzwwKXJldHVybiB0Pj0wPzA6LXQ7Y29uc3Qgbj1yLmluZGV4T2YoImUiKS1vO3JldHVybiBNYXRoLm1heCgwLG4tdC0xKX0pKTppLnR5cGUmJiEoaS50eXBlIGluIGZhKXx8KGkucHJlY2lzaW9uPU1hdGgubWF4KC4uLmUubWFwKGU9PntpZigibnVtYmVyIiE9dHlwZW9mIGUpcmV0dXJuIDA7Y29uc3QgdD1lLnRvRXhwb25lbnRpYWwoKGkudHlwZT82OjEyKS0xKS5yZXBsYWNlKC9cLj8wK2UvLCJlIik7cmV0dXJuIHQuc3Vic3RyaW5nKDAsdC5pbmRleE9mKCJlIikpLnJlcGxhY2UoIi4iLCIiKS5sZW5ndGh9KSkpKTtjb25zdCByPXBhKGkpO3JldHVybiBlPT5yKE51bWJlcihlKSl9dmFyIGJhPShlLHQ9W10pPT5PYmplY3QuYXNzaWduKHQse2ZyYWN0aW9uRGlnaXRzOmV9KTtmdW5jdGlvbiBFYShlLHQsaSxzLHIpe2lmKGk8MilyZXR1cm4gVGEoZSx0LHQtZSk7Y29uc3Qgbz14YShlLHQsaSxzLHIpO3JldHVybiBpc05hTihvKT9iYSgwKTpUYShlPU1hdGguY2VpbChlL28pKm8sdD1NYXRoLmZsb29yKHQvbykqbyxvKX12YXIgUmE9WzEsMiw1LDEwXTtmdW5jdGlvbiB4YShlLHQsaSxzPTAscj0xLzApe2NvbnN0IG89TWF0aC5hYnModC1lKSxuPW8vaSxhPU1hdGguZmxvb3IoTWF0aC5sb2cxMChuKSksbD1NYXRoLnBvdygxMCxhKSxkPVJhLm1hcChlPT57Y29uc3QgdD1lKmwsbj1NYXRoLmNlaWwoby90KTtyZXR1cm57bXVsdGlwbGllcjplLGlzV2l0aGluQm91bmRzOm4+PXMmJm48PXIsZGlmZkNvdW50Ok1hdGguYWJzKG4taSl9fSkuc29ydCgoZSx0KT0+ZS5pc1dpdGhpbkJvdW5kcyE9PXQuaXNXaXRoaW5Cb3VuZHM/ZS5pc1dpdGhpbkJvdW5kcz8tMToxOmUuZGlmZkNvdW50LXQuZGlmZkNvdW50KVswXS5tdWx0aXBsaWVyO3JldHVybiFkfHxpc05hTihkKT9OYU46ZCpsfWZ1bmN0aW9uIFRhKGUsdCxpKXtjb25zdCBzPU1hdGgubWluKGUsdCkscj1NYXRoLm1heChlLHQpLG89dHIoaSksbj1NYXRoLnBvdygxMCxvKSxhPU1hdGguY2VpbCgoci1zKS9pKSxsPWJhKG8pO2ZvcihsZXQgZT0wO2U8PWE7ZSsrKXtjb25zdCB0PXMraSplO2wucHVzaChNYXRoLnJvdW5kKHQqbikvbil9cmV0dXJuIGx9dmFyIERhPWNsYXNzIGUgZXh0ZW5kcyBSbntjb25zdHJ1Y3Rvcigpe3N1cGVyKFsxLDEwXSxbMCwxXSksdGhpcy50eXBlPSJsb2ciLHRoaXMuYmFzZT0xMCx0aGlzLmJhc2VMb2c9UCx0aGlzLmJhc2VQb3c9UCx0aGlzLmxvZz1lPT5NYXRoLm1pbiguLi50aGlzLmRvbWFpbik+PTA/dGhpcy5iYXNlTG9nKGUpOi10aGlzLmJhc2VMb2coLWUpLHRoaXMucG93PWU9Pk1hdGgubWluKC4uLnRoaXMuZG9tYWluKT49MD90aGlzLmJhc2VQb3coZSk6LXRoaXMuYmFzZVBvdygtZSksdGhpcy5kZWZhdWx0Q2xhbXBNb2RlPSJjbGFtcGVkIn10b0RvbWFpbihlKXtyZXR1cm4gZX10cmFuc2Zvcm0oZSl7cmV0dXJuIE1hdGgubWluKC4uLnRoaXMuZG9tYWluKT49MD9NYXRoLmxvZyhlKTotTWF0aC5sb2coLWUpfXRyYW5zZm9ybUludmVydChlKXtyZXR1cm4gTWF0aC5taW4oLi4udGhpcy5kb21haW4pPj0wP01hdGguZXhwKGUpOi1NYXRoLmV4cCgtZSl9cmVmcmVzaCgpe3RoaXMuYmFzZTw9MCYmKHRoaXMuYmFzZT0wLEwud2Fybk9uY2UoImV4cGVjdGluZyBhIGZpbml0ZSBOdW1iZXIgZ3JlYXRlciB0aGFuIHRvIDAiKSksc3VwZXIucmVmcmVzaCgpfXVwZGF0ZSgpeyF0aGlzLmRvbWFpbnx8dGhpcy5kb21haW4ubGVuZ3RoPDJ8fCh0aGlzLmJhc2VMb2c9ZS5nZXRCYXNlTG9nTWV0aG9kKHRoaXMuYmFzZSksdGhpcy5iYXNlUG93PWUuZ2V0QmFzZVBvd2VyTWV0aG9kKHRoaXMuYmFzZSksdGhpcy5uaWNlJiZ0aGlzLnVwZGF0ZU5pY2VEb21haW4oKSl9dXBkYXRlTmljZURvbWFpbigpe2NvbnN0W2UsdF09dGhpcy5kb21haW4saT1lPnQ/TWF0aC5jZWlsOk1hdGguZmxvb3Iscz1lPnQ/TWF0aC5mbG9vcjpNYXRoLmNlaWwscj10aGlzLnBvdyhpKHRoaXMubG9nKGUpKSksbz10aGlzLnBvdyhzKHRoaXMubG9nKHQpKSk7dGhpcy5uaWNlRG9tYWluPVtyLG9dfXRpY2tzKCl7dmFyIGU7Y29uc3QgdD1udWxsIT0oZT10aGlzLnRpY2tDb3VudCk/ZToxMDtpZighdGhpcy5kb21haW58fHRoaXMuZG9tYWluLmxlbmd0aDwyfHx0PDEpcmV0dXJuW107dGhpcy5yZWZyZXNoKCk7Y29uc3QgaT10aGlzLmJhc2UsW3Mscl09dGhpcy5nZXREb21haW4oKSxvPU1hdGgubWluKHMsciksbj1NYXRoLm1heChzLHIpO2xldCBhPXRoaXMubG9nKG8pLGw9dGhpcy5sb2cobik7aWYodGhpcy5pbnRlcnZhbCl7Y29uc3QgZT1NYXRoLmFicyh0aGlzLmludGVydmFsKSx0PU1hdGguYWJzKGwtYSk7bGV0IGk9VGEoYSxsLE1hdGgubWluKHQsZSkpO2lmKGk9YmEoaS5mcmFjdGlvbkRpZ2l0cyxpLm1hcChlPT50aGlzLnBvdyhlKSkuZmlsdGVyKGU9PmU+PW8mJmU8PW4pKSwhdGhpcy5pc0RlbnNlSW50ZXJ2YWwoe3N0YXJ0Om8sc3RvcDpuLGludGVydmFsOmUsY291bnQ6aS5sZW5ndGh9KSlyZXR1cm4gaX1pZighKGklMT09MCl8fGwtYT49dCl7bGV0IGU9RWEoYSxsLE1hdGgubWluKGwtYSx0KSk7cmV0dXJuIGU9YmEoZS5mcmFjdGlvbkRpZ2l0cyxlLm1hcChlPT50aGlzLnBvdyhlKSkpLGV9Y29uc3QgZD1bXSxjPW8+MDthPU1hdGguZmxvb3IoYSktMSxsPU1hdGgucm91bmQobCkrMTtjb25zdCBoPVhzKHRoaXMucmFuZ2UpL3Q7bGV0IHU9MS8wO2ZvcihsZXQgZT1hO2U8PWw7ZSsrKXtjb25zdCB0PXRoaXMuY29udmVydCh0aGlzLnBvdyhlKzEpKTtmb3IobGV0IHM9MTtzPGk7cysrKXtjb25zdCByPWM/czppLXMrMSxhPXRoaXMucG93KGUpKnIsbD10aGlzLmNvbnZlcnQoYSkscD1NYXRoLmFicyh1LWwpLGc9TWF0aC5hYnMobC10KSxtPXA+PWgmJmc+PWg7YT49byYmYTw9biYmKDE9PT1zfHxtKSYmKGQucHVzaChhKSx1PWwpfX1yZXR1cm4gZH10aWNrRm9ybWF0KHtjb3VudDplLHRpY2tzOnQsc3BlY2lmaWVyOml9KXtyZXR1cm4gZSE9PTEvMCYmbnVsbD09dCYmdGhpcy50aWNrcygpLG51bGwhPWl8fChpPTEwPT09dGhpcy5iYXNlPyIuMGUiOiIsIiksSGUoaSk/cGEoaSk6aX1zdGF0aWMgZ2V0QmFzZUxvZ01ldGhvZChlKXtzd2l0Y2goZSl7Y2FzZSAxMDpyZXR1cm4gTWF0aC5sb2cxMDtjYXNlIE1hdGguRTpyZXR1cm4gTWF0aC5sb2c7Y2FzZSAyOnJldHVybiBNYXRoLmxvZzI7ZGVmYXVsdDpjb25zdCB0PU1hdGgubG9nKGUpO3JldHVybiBlPT5NYXRoLmxvZyhlKS90fX1zdGF0aWMgZ2V0QmFzZVBvd2VyTWV0aG9kKGUpe3N3aXRjaChlKXtjYXNlIDEwOnJldHVybiBlPT5lPj0wP3AoMTAsZSk6MS9wKDEwLC1lKTtjYXNlIE1hdGguRTpyZXR1cm4gTWF0aC5leHA7ZGVmYXVsdDpyZXR1cm4gdD0+cChlLHQpfX19O3koWyRyXSxEYS5wcm90b3R5cGUsImJhc2UiLDIpO3ZhciBPYT1EYSxBYT17cGVyaW9kczpbIkFNIiwiUE0iXSxkYXlzOlsiU3VuZGF5IiwiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiXSxzaG9ydERheXM6WyJTdW4iLCJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiXSxtb250aHM6WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLHNob3J0TW9udGhzOlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl19O2Z1bmN0aW9uIFBhKGUsdD1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksMCwxKSl7Y29uc3QgaT1lLmdldFRpbWV6b25lT2Zmc2V0KCktdC5nZXRUaW1lem9uZU9mZnNldCgpLHM9ZS5nZXRUaW1lKCktdC5nZXRUaW1lKCkrNmU0Kmk7cmV0dXJuIE1hdGguZmxvb3Iocy84NjRlNSl9ZnVuY3Rpb24gTWEoZSx0KXtjb25zdCBpPSh0LW5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSwwLDEpLmdldERheSgpKzcpJTcscz1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksMCxpKzEpO3JldHVybiBzPD1lP01hdGguZmxvb3IoUGEoZSxzKS83KSsxOjB9dmFyIExhPXthOmU9PkFhLnNob3J0RGF5c1tlLmdldERheSgpXSxBOmU9PkFhLmRheXNbZS5nZXREYXkoKV0sYjplPT5BYS5zaG9ydE1vbnRoc1tlLmdldE1vbnRoKCldLEI6ZT0+QWEubW9udGhzW2UuZ2V0TW9udGgoKV0sYzoiJXgsICVYIixkOihlLHQpPT5JYShlLmdldERhdGUoKSwyLG51bGwhPXQ/dDoiMCIpLGU6IiVfZCIsZjooZSx0KT0+SWEoMWUzKmUuZ2V0TWlsbGlzZWNvbmRzKCksNixudWxsIT10P3Q6IjAiKSxIOihlLHQpPT5JYShlLmdldEhvdXJzKCksMixudWxsIT10P3Q6IjAiKSxJOihlLHQpPT57Y29uc3QgaT1lLmdldEhvdXJzKCklMTI7cmV0dXJuIDA9PT1pPyIxMiI6SWEoaSwyLG51bGwhPXQ/dDoiMCIpfSxqOihlLHQpPT5JYShQYShlKSsxLDMsbnVsbCE9dD90OiIwIiksbTooZSx0KT0+SWEoZS5nZXRNb250aCgpKzEsMixudWxsIT10P3Q6IjAiKSxNOihlLHQpPT5JYShlLmdldE1pbnV0ZXMoKSwyLG51bGwhPXQ/dDoiMCIpLEw6KGUsdCk9PklhKGUuZ2V0TWlsbGlzZWNvbmRzKCksMyxudWxsIT10P3Q6IjAiKSxwOmU9PmUuZ2V0SG91cnMoKTwxMj8iQU0iOiJQTSIsUTplPT5TdHJpbmcoZS5nZXRUaW1lKCkpLHM6ZT0+U3RyaW5nKE1hdGguZmxvb3IoZS5nZXRUaW1lKCkvMWUzKSksUzooZSx0KT0+SWEoZS5nZXRTZWNvbmRzKCksMixudWxsIT10P3Q6IjAiKSx1OmU9PntsZXQgdD1lLmdldERheSgpO3JldHVybiB0PDEmJih0Kz03KSxTdHJpbmcodCU3KX0sVTooZSx0KT0+SWEoTWEoZSwwKSwyLG51bGwhPXQ/dDoiMCIpLFY6KGUsdCk9PklhKGZ1bmN0aW9uIGUodCxpPXQuZ2V0RnVsbFllYXIoKSl7Y29uc3Qgcz1uZXcgRGF0ZShpLDAsMSkuZ2V0RGF5KCkscj1uZXcgRGF0ZShpLDAsKDQtcys3KSU3LTMrMSk7cmV0dXJuIHI8PXQ/TWF0aC5mbG9vcihQYSh0LHIpLzcpKzE6ZSh0LGktMSl9KGUpLDIsbnVsbCE9dD90OiIwIiksdzooZSx0KT0+SWEoZS5nZXREYXkoKSwyLG51bGwhPXQ/dDoiMCIpLFc6KGUsdCk9PklhKE1hKGUsMSksMixudWxsIT10P3Q6IjAiKSx4OiIlLW0vJS1kLyVZIixYOiIlLUk6JU06JVMgJXAiLHk6KGUsdCk9PklhKGUuZ2V0RnVsbFllYXIoKSUxMDAsMixudWxsIT10P3Q6IjAiKSxZOihlLHQpPT5JYShlLmdldEZ1bGxZZWFyKCksNCxudWxsIT10P3Q6IjAiKSxaOmU9PmZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZS5nZXRUaW1lem9uZU9mZnNldCgpLGk9TWF0aC5hYnModCk7cmV0dXJuYCR7dD4wPyItIjoiKyJ9JHtJYShNYXRoLmZsb29yKGkvNjApLDIsIjAiKX0ke0lhKE1hdGguZmxvb3IoaSU2MCksMiwiMCIpfWB9KGUpLCIlIjooKT0+IiUifSxGYT17XzoiICIsMDoiMCIsIi0iOiIifTtmdW5jdGlvbiBJYShlLHQsaSl7Y29uc3Qgcz1TdHJpbmcoTWF0aC5mbG9vcihlKSk7cmV0dXJuIHMubGVuZ3RoPj10P3M6YCR7aS5yZXBlYXQodC1zLmxlbmd0aCl9JHtzfWB9ZnVuY3Rpb24gTmEoZSl7Y29uc3QgdD1bXTtmb3IoO2UubGVuZ3RoPjA7KXtsZXQgaT1lLmluZGV4T2YoIiUiKTtpZigwIT09aSl7Y29uc3Qgcz1pPjA/ZS5zdWJzdHJpbmcoMCxpKTplO3QucHVzaChzKX1pZihpPDApYnJlYWs7Y29uc3Qgcz1lW2krMV0scj1GYVtzXTtudWxsIT1yJiZpKys7Y29uc3Qgbz1lW2krMV0sbj1MYVtvXTtpZigiZnVuY3Rpb24iPT10eXBlb2Ygbil0LnB1c2goW24scl0pO2Vsc2UgaWYoInN0cmluZyI9PXR5cGVvZiBuKXtjb25zdCBlPU5hKG4pO3QucHVzaChbZSxyXSl9ZWxzZSB0LnB1c2goYCR7bnVsbCE9cj9yOiIifSR7b31gKTtlPWUuc3Vic3RyaW5nKGkrMil9cmV0dXJuIGU9Pntjb25zdCBpPSJudW1iZXIiPT10eXBlb2YgZT9uZXcgRGF0ZShlKTplO3JldHVybiB0Lm1hcChlPT4ic3RyaW5nIj09dHlwZW9mIGU/ZTplWzBdKGksZVsxXSkpLmpvaW4oIiIpfX12YXIgR2E9ezA6Ii4lTCIsMToiOiVTIiwyOiIlSTolTSIsMzoiJUkgJXAiLDQ6IiVhIiw1OiIlYiAlZCIsNjoiJUIiLDc6IiV5Iiw4OiIlWSJ9O2Z1bmN0aW9uIGthKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRGF0ZT9lLmdldFRpbWUoKTplfXZhciBfYT1jbGFzcyBleHRlbmRzIFJue2NvbnN0cnVjdG9yKCl7c3VwZXIoW10sWzAsMV0pLHRoaXMudHlwZT0idGltZSIsdGhpcy55ZWFyPW5lLHRoaXMubW9udGg9cmUsdGhpcy53ZWVrPWllLHRoaXMuZGF5PVksdGhpcy5ob3VyPXosdGhpcy5taW51dGU9Vyx0aGlzLnNlY29uZD1WLHRoaXMubWlsbGlzZWNvbmQ9Ryx0aGlzLnRpY2tJbnRlcnZhbHM9W1t0aGlzLnNlY29uZCwxLDFlM10sW3RoaXMuc2Vjb25kLDUsNWUzXSxbdGhpcy5zZWNvbmQsMTUsMTVlM10sW3RoaXMuc2Vjb25kLDMwLDNlNF0sW3RoaXMubWludXRlLDEsNmU0XSxbdGhpcy5taW51dGUsNSwzZTVdLFt0aGlzLm1pbnV0ZSwxNSw5ZTVdLFt0aGlzLm1pbnV0ZSwzMCwxOGU1XSxbdGhpcy5ob3VyLDEsMzZlNV0sW3RoaXMuaG91ciwzLDEwOGU1XSxbdGhpcy5ob3VyLDYsMjE2ZTVdLFt0aGlzLmhvdXIsMTIsNDMyZTVdLFt0aGlzLmRheSwxLDg2NGU1XSxbdGhpcy5kYXksMiwxNzI4ZTVdLFt0aGlzLndlZWssMSw2MDQ4ZTVdLFt0aGlzLndlZWssMiwxMjA5NmU1XSxbdGhpcy53ZWVrLDMsMTgxNDRlNV0sW3RoaXMubW9udGgsMSwyNTkyZTZdLFt0aGlzLm1vbnRoLDIsNTE4NGU2XSxbdGhpcy5tb250aCwzLDc3NzZlNl0sW3RoaXMubW9udGgsNCwxMDM2OGU2XSxbdGhpcy5tb250aCw2LDE1NTUyZTZdLFt0aGlzLnllYXIsMSwzMTUzNmU2XV19dG9Eb21haW4oZSl7cmV0dXJuIG5ldyBEYXRlKGUpfWNhbGN1bGF0ZURlZmF1bHRUaWNrRm9ybWF0KGU9W10pe2xldCB0PTg7Y29uc3QgaT1lPT57ZTx0JiYodD1lKX07Zm9yKGNvbnN0IHQgb2YgZSl7aSh0aGlzLmdldExvd2VzdEdyYW51bGFyaXR5Rm9ybWF0KHQpKX1jb25zdCBzPWthKGVbMF0pLHI9a2EoZS5hdCgtMSkpLG89bmV3IERhdGUocykuZ2V0RnVsbFllYXIoKSxuPW5ldyBEYXRlKHIpLmdldEZ1bGxZZWFyKCktbz4wO3JldHVybiB0aGlzLmJ1aWxkRm9ybWF0U3RyaW5nKHQsbil9YnVpbGRGb3JtYXRTdHJpbmcoZSx0KXtsZXQgaT1bR2FbZV1dLHM9MDtjb25zdCByPVhzKHRoaXMuZ2V0RG9tYWluKCkubWFwKGthKSk7c3dpdGNoKGUpe2Nhc2UgMTpyLzZlND4xJiZpLnB1c2goR2FbMl0pO2Nhc2UgMjpyLzM2ZTU+MSYmaS5wdXNoKEdhWzNdKTtjYXNlIDM6cz1pLmxlbmd0aCxyLzg2NGU1PjEmJmkucHVzaChHYVs0XSk7Y2FzZSA0OmlmKHIvNjA0OGU1PjF8fHQpe2NvbnN0IGU9aS5pbmRleE9mKEdhWzRdKTtlPi0xJiZpLnNwbGljZShlLDEsR2FbNV0pfWNhc2UgNTpjYXNlIDY6KHIvMzE1MzZlNj4xfHx0KSYmaS5wdXNoKEdhWzhdKX1yZXR1cm4gczxpLmxlbmd0aCYmKGk9Wy4uLmkuc2xpY2UoMCxzKSxpLnNsaWNlKHMpLmpvaW4oIiAiKV0pLHM+MCYmKGk9Wy4uLmkuc2xpY2UoMCxzKS5yZXZlcnNlKCksLi4uaS5zbGljZShzKV0sczxpLmxlbmd0aCYmaS5zcGxpY2UocywwLCIgIikpLGkuam9pbigiIil9Z2V0TG93ZXN0R3JhbnVsYXJpdHlGb3JtYXQoZSl7cmV0dXJuIHRoaXMuc2Vjb25kLmZsb29yKGUpPGU/MDp0aGlzLm1pbnV0ZS5mbG9vcihlKTxlPzE6dGhpcy5ob3VyLmZsb29yKGUpPGU/Mjp0aGlzLmRheS5mbG9vcihlKTxlPzM6dGhpcy5tb250aC5mbG9vcihlKTxlP3RoaXMud2Vlay5mbG9vcihlKTxlPzQ6NTp0aGlzLnllYXIuZmxvb3IoZSk8ZT82Ojh9ZGVmYXVsdFRpY2tGb3JtYXQoZSl7Y29uc3QgdD10aGlzLmNhbGN1bGF0ZURlZmF1bHRUaWNrRm9ybWF0KGUpO3JldHVybiBlPT5OYSh0KShlKX1nZXRUaWNrSW50ZXJ2YWwoe3N0YXJ0OmUsc3RvcDp0LGNvdW50OmksbWluQ291bnQ6cyxtYXhDb3VudDpyfSl7Y29uc3R7dGlja0ludGVydmFsczpvfT10aGlzO2xldCBuLGE7Y29uc3QgbD1udWxsIT1pP2k6Um4uZGVmYXVsdFRpY2tDb3VudCxkPU1hdGguYWJzKHQtZSkvTWF0aC5tYXgobCwxKTtsZXQgYz0wO2Zvcig7YzxvLmxlbmd0aCYmZD5vW2NdWzJdOyljKys7aWYoMD09PWMpYT1NYXRoLm1heCh4YShlLHQsbCxzLHIpLDEpLG49dGhpcy5taWxsaXNlY29uZDtlbHNlIGlmKGM9PT1vLmxlbmd0aCl7YT14YShlLzMxNTM2ZTYsdC8zMTUzNmU2LGwscyxyKSxuPXRoaXMueWVhcn1lbHNle2NvbnN0IGU9ZC1vW2MtMV1bMl08b1tjXVsyXS1kP2MtMTpjO1tuLGFdPW9bZV19cmV0dXJuIG4uZXZlcnkoYSl9aW52ZXJ0KGUpe3JldHVybiBuZXcgRGF0ZShzdXBlci5pbnZlcnQoZSkpfXRpY2tzKCl7aWYoIXRoaXMuZG9tYWlufHx0aGlzLmRvbWFpbi5sZW5ndGg8MilyZXR1cm5bXTt0aGlzLnJlZnJlc2goKTtjb25zdFtlLHRdPXRoaXMuZ2V0RG9tYWluKCkubWFwKGthKSxpPU1hdGgubWluKGUsdCkscz1NYXRoLm1heChlLHQpO2lmKHZvaWQgMCE9PXRoaXMuaW50ZXJ2YWwpcmV0dXJuIHRoaXMuZ2V0VGlja3NGb3JJbnRlcnZhbCh7c3RhcnQ6aSxzdG9wOnN9KTtpZih0aGlzLm5pY2Upe2NvbnN0e3RpY2tDb3VudDplfT10aGlzO2lmKDI9PT1lKXJldHVybiB0aGlzLm5pY2VEb21haW47aWYoMT09PWUpcmV0dXJuIHRoaXMubmljZURvbWFpbi5zbGljZSgwLDEpfXJldHVybiB0aGlzLmdldERlZmF1bHRUaWNrcyh7c3RhcnQ6aSxzdG9wOnN9KX1nZXREZWZhdWx0VGlja3Moe3N0YXJ0OmUsc3RvcDp0fSl7Y29uc3QgaT10aGlzLmdldFRpY2tJbnRlcnZhbCh7c3RhcnQ6ZSxzdG9wOnQsY291bnQ6dGhpcy50aWNrQ291bnQsbWluQ291bnQ6dGhpcy5taW5UaWNrQ291bnQsbWF4Q291bnQ6dGhpcy5tYXhUaWNrQ291bnR9KTtyZXR1cm4gaT9pLnJhbmdlKG5ldyBEYXRlKGUpLG5ldyBEYXRlKHQpKTpbXX1nZXRUaWNrc0ZvckludGVydmFsKHtzdGFydDplLHN0b3A6dH0pe2NvbnN0e2ludGVydmFsOmksdGlja0ludGVydmFsczpzfT10aGlzO2lmKCFpKXJldHVybltdO2lmKGkgaW5zdGFuY2VvZiBGKXtjb25zdCBzPWkucmFuZ2UobmV3IERhdGUoZSksbmV3IERhdGUodCkpO3JldHVybiB0aGlzLmlzRGVuc2VJbnRlcnZhbCh7c3RhcnQ6ZSxzdG9wOnQsaW50ZXJ2YWw6aSxjb3VudDpzLmxlbmd0aH0pP3RoaXMuZ2V0RGVmYXVsdFRpY2tzKHtzdGFydDplLHN0b3A6dH0pOnN9Y29uc3Qgcj1NYXRoLmFicyhpKTtpZih0aGlzLmlzRGVuc2VJbnRlcnZhbCh7c3RhcnQ6ZSxzdG9wOnQsaW50ZXJ2YWw6cn0pKXJldHVybiB0aGlzLmdldERlZmF1bHRUaWNrcyh7c3RhcnQ6ZSxzdG9wOnR9KTtjb25zdCBvPVsuLi5zXTtvLnJldmVyc2UoKTtjb25zdCBuPW8uZmluZChlPT5yJWVbMl09PTApO2lmKG4pe3JldHVybiBuWzBdLmV2ZXJ5KHIvKG5bMl0vblsxXSkpLnJhbmdlKG5ldyBEYXRlKGUpLG5ldyBEYXRlKHQpKX1sZXQgYT1uZXcgRGF0ZShlKTtjb25zdCBsPW5ldyBEYXRlKHQpLGQ9W107Zm9yKDthPD1sOylkLnB1c2goYSksYT1uZXcgRGF0ZShhKSxhLnNldE1pbGxpc2Vjb25kcyhhLmdldE1pbGxpc2Vjb25kcygpK3IpO3JldHVybiBkfXRpY2tGb3JtYXQoe3RpY2tzOmUsc3BlY2lmaWVyOnR9KXtyZXR1cm4gbnVsbD09dD90aGlzLmRlZmF1bHRUaWNrRm9ybWF0KGUpOk5hKHQpfXVwZGF0ZSgpeyF0aGlzLmRvbWFpbnx8dGhpcy5kb21haW4ubGVuZ3RoPDJ8fHRoaXMubmljZSYmdGhpcy51cGRhdGVOaWNlRG9tYWluKCl9dXBkYXRlTmljZURvbWFpbigpe2xldFtlLHRdPXRoaXMuZG9tYWluO2ZvcihsZXQgaT0wO2k8NDtpKyspe3RoaXMudXBkYXRlTmljZURvbWFpbkl0ZXJhdGlvbihlLHQpO2NvbnN0W2ksc109dGhpcy5uaWNlRG9tYWluO2lmKGthKGUpPT09a2EoaSkmJmthKHQpPT09a2EocykpYnJlYWs7ZT1pLHQ9c319dXBkYXRlTmljZURvbWFpbkl0ZXJhdGlvbihlLHQpe2NvbnN0IGk9TWF0aC5taW4oa2EoZSksa2EodCkpLHM9TWF0aC5tYXgoa2EoZSksa2EodCkpLHI9ZT50LHtpbnRlcnZhbDpvfT10aGlzO2xldCBuO2lmKG8gaW5zdGFuY2VvZiBGKW49bztlbHNle2NvbnN0IGU9Im51bWJlciI9PXR5cGVvZiBvPyhzLWkpL01hdGgubWF4KG8sMSk6dGhpcy50aWNrQ291bnQ7bj10aGlzLmdldFRpY2tJbnRlcnZhbCh7c3RhcnQ6aSxzdG9wOnMsY291bnQ6ZSxtaW5Db3VudDp0aGlzLm1pblRpY2tDb3VudCxtYXhDb3VudDp0aGlzLm1heFRpY2tDb3VudH0pfWlmKG4pe2NvbnN0IGU9bi5yYW5nZShuZXcgRGF0ZShpKSxuZXcgRGF0ZShzKSwhMCksdD1yP1suLi5lXS5yZXZlcnNlKCk6ZSxvPXRbMF0sYT10LmF0KC0xKTt0aGlzLm5pY2VEb21haW49W28sYV19fX0sVmE9Y2xhc3MgZXtjb25zdHJ1Y3RvcihlLHQsaT0hMCl7dGhpcy5wYXJlbnROb2RlPWUsdGhpcy5hdXRvQ2xlYW51cD1pLHRoaXMuZ2FyYmFnZUJpbj1uZXcgU2V0LHRoaXMuX25vZGVzTWFwPW5ldyBNYXAsdGhpcy5fbm9kZXM9W10sdGhpcy5kYXRhPVtdLHRoaXMuZGVidWc9RnMuY3JlYXRlKCEwLCJzY2VuZSIsInNjZW5lOnNlbGVjdGlvbnMiKSx0aGlzLm5vZGVGYWN0b3J5PU9iamVjdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZi5jYWxsKGhyLHQpPygpPT5uZXcgdDp0fXN0YXRpYyBzZWxlY3QodCxpLHM9ITApe3JldHVybiBuZXcgZSh0LGkscyl9c3RhdGljIHNlbGVjdEFsbChlLHQpe2NvbnN0IGk9W10scz1lPT57dChlKSYmaS5wdXNoKGUpLGUuY2hpbGRyZW4uZm9yRWFjaChzKX07cmV0dXJuIHMoZSksaX1zdGF0aWMgc2VsZWN0QnlDbGFzcyh0LGkpe3JldHVybiBlLnNlbGVjdEFsbCh0LGU9PmUgaW5zdGFuY2VvZiBpKX1zdGF0aWMgc2VsZWN0QnlUYWcodCxpKXtyZXR1cm4gZS5zZWxlY3RBbGwodCxlPT5lLnRhZz09PWkpfWNyZWF0ZU5vZGUoZSx0LGkpe2NvbnN0IHM9dGhpcy5ub2RlRmFjdG9yeShlKTtyZXR1cm4gcy5kYXR1bT1lLG51bGw9PXR8fHQocyksbnVsbCE9aT90aGlzLl9ub2Rlcy5zcGxpY2UoaSwwLHMpOnRoaXMuX25vZGVzLnB1c2gocyksdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHMpLHN9dXBkYXRlKGUsdCxpKXtpZih0aGlzLmdhcmJhZ2VCaW4uc2l6ZT4wJiZ0aGlzLmRlYnVnKCJTZWxlY3Rpb24gLSB1cGRhdGUoKSBjYWxsZWQgd2l0aCBwZW5kaW5nIGdhcmJhZ2U6ICIrZSksaSl7Y29uc3Qgcz1uZXcgTWFwKGUubWFwKChlLHQpPT5baShlKSxbZSx0XV0pKTtmb3IoY29uc3RbZSx0XW9mIHRoaXMuX25vZGVzTWFwLmVudHJpZXMoKSlpZihzLmhhcyh0KSl7Y29uc3RbaV09cy5nZXQodCk7ZS5kYXR1bT1pLHRoaXMuZ2FyYmFnZUJpbi5kZWxldGUoZSkscy5kZWxldGUodCl9ZWxzZSB0aGlzLmdhcmJhZ2VCaW4uYWRkKGUpO2Zvcihjb25zdFtlLFtpLHJdXW9mIHMuZW50cmllcygpKXRoaXMuX25vZGVzTWFwLnNldCh0aGlzLmNyZWF0ZU5vZGUoaSx0LHIpLGUpfWVsc2V7Y29uc3QgaT1NYXRoLm1heChlLmxlbmd0aCx0aGlzLmRhdGEubGVuZ3RoKTtmb3IobGV0IHM9MDtzPGk7cysrKXM+PWUubGVuZ3RoP3RoaXMuZ2FyYmFnZUJpbi5hZGQodGhpcy5fbm9kZXNbc10pOnM+PXRoaXMuX25vZGVzLmxlbmd0aD90aGlzLmNyZWF0ZU5vZGUoZVtzXSx0KToodGhpcy5fbm9kZXNbc10uZGF0dW09ZVtzXSx0aGlzLmdhcmJhZ2VCaW4uZGVsZXRlKHRoaXMuX25vZGVzW3NdKSl9cmV0dXJuIHRoaXMuZGF0YT1lLnNsaWNlKCksdGhpcy5hdXRvQ2xlYW51cCYmdGhpcy5jbGVhbnVwKCksdGhpc31jbGVhbnVwKCl7cmV0dXJuIDA9PT10aGlzLmdhcmJhZ2VCaW4uc2l6ZXx8KHRoaXMuX25vZGVzPXRoaXMuX25vZGVzLmZpbHRlcihlPT4hdGhpcy5nYXJiYWdlQmluLmhhcyhlKXx8KHRoaXMuX25vZGVzTWFwLmRlbGV0ZShlKSx0aGlzLmdhcmJhZ2VCaW4uZGVsZXRlKGUpLHRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKSwhMSkpKSx0aGlzfWNsZWFyKCl7cmV0dXJuIHRoaXMudXBkYXRlKFtdKSx0aGlzfWlzR2FyYmFnZShlKXtyZXR1cm4gdGhpcy5nYXJiYWdlQmluLmhhcyhlKX1oYXNHYXJiYWdlKCl7cmV0dXJuIHRoaXMuZ2FyYmFnZUJpbi5zaXplPjB9ZWFjaChlKXtyZXR1cm4gdGhpcy5fbm9kZXMuZm9yRWFjaCgodCxpKT0+ZSh0LHQuZGF0dW0saSkpLHRoaXN9KltTeW1ib2wuaXRlcmF0b3JdKCl7Zm9yKGxldCBlPTA7ZTx0aGlzLl9ub2Rlcy5sZW5ndGg7ZSsrKXtjb25zdCB0PXRoaXMuX25vZGVzW2VdLGk9dGhpcy5fbm9kZXNbZV0uZGF0dW07eWllbGR7bm9kZTp0LGRhdHVtOmksaW5kZXg6ZX19fXNlbGVjdCh0KXtyZXR1cm4gZS5zZWxlY3RBbGwodGhpcy5wYXJlbnROb2RlLHQpfXNlbGVjdEJ5Q2xhc3ModCl7cmV0dXJuIGUuc2VsZWN0QnlDbGFzcyh0aGlzLnBhcmVudE5vZGUsdCl9c2VsZWN0QnlUYWcodCl7cmV0dXJuIGUuc2VsZWN0QnlUYWcodGhpcy5wYXJlbnROb2RlLHQpfW5vZGVzKCl7cmV0dXJuIHRoaXMuX25vZGVzfX0sQmE9Y2xhc3MgZXh0ZW5kcyBab3tjb25zdHJ1Y3RvcihlPXt9KXtzdXBlcihlKSx0aGlzLngxPTAsdGhpcy55MT0wLHRoaXMueDI9MCx0aGlzLnkyPTAsdGhpcy5yZXN0b3JlT3duU3R5bGVzKCl9c2V0IHgoZSl7dGhpcy54MT1lLHRoaXMueDI9ZX1zZXQgeShlKXt0aGlzLnkxPWUsdGhpcy55Mj1lfWNvbXB1dGVCQm94KCl7cmV0dXJuIG5ldyBvcihNYXRoLm1pbih0aGlzLngxLHRoaXMueDIpLE1hdGgubWluKHRoaXMueTEsdGhpcy55MiksTWF0aC5hYnModGhpcy54Mi10aGlzLngxKSxNYXRoLmFicyh0aGlzLnkyLXRoaXMueTEpKX1pc1BvaW50SW5QYXRoKGUsdCl7aWYodGhpcy54MT09PXRoaXMueDJ8fHRoaXMueTE9PT10aGlzLnkyKXtjb25zdHt4OmkseTpzfT10aGlzLnRyYW5zZm9ybVBvaW50KGUsdCk7cmV0dXJuIHRoaXMuY29tcHV0ZUJCb3goKS5ncm93KHRoaXMuc3Ryb2tlV2lkdGgvMikuY29udGFpbnNQb2ludChpLHMpfXJldHVybiExfXJlbmRlcihlKXt2YXIgdDtjb25zdHtjdHg6aSxmb3JjZVJlbmRlcjpzLHN0YXRzOnIsZGV2aWNlUGl4ZWxSYXRpbzpvfT1lO2lmKDA9PT10aGlzLmRpcnR5JiYhcylyZXR1cm4gdm9pZChyJiYoci5ub2Rlc1NraXBwZWQrPXRoaXMubm9kZUNvdW50LmNvdW50KSk7dGhpcy5jb21wdXRlVHJhbnNmb3JtTWF0cml4KCksdGhpcy5tYXRyaXgudG9Db250ZXh0KGkpO2xldHt4MTpuLHkxOmEseDI6bCx5MjpkfT10aGlzO2lmKG49PT1sKXtjb25zdHtzdHJva2VXaWR0aDplfT10aGlzLHQ9TWF0aC5yb3VuZChuKm8pL28rTWF0aC50cnVuYyhlKm8pJTIvKDIqbyk7bj10LGw9dH1lbHNlIGlmKGE9PT1kKXtjb25zdHtzdHJva2VXaWR0aDplfT10aGlzLHQ9TWF0aC5yb3VuZChhKm8pL28rTWF0aC50cnVuYyhlKm8pJTIvKDIqbyk7YT10LGQ9dH1pLmJlZ2luUGF0aCgpLGkubW92ZVRvKG4sYSksaS5saW5lVG8obCxkKSx0aGlzLmZpbGxTdHJva2UoaSksbnVsbD09KHQ9dGhpcy5maWxsU2hhZG93KXx8dC5tYXJrQ2xlYW4oKSxzdXBlci5yZW5kZXIoZSl9fTtmdW5jdGlvbiBIYShlLHQsaSxzLHIpe2xldCBvPWUueDtlLng8dD9vPXQ6ZS54PnQrcyYmKG89dCtzKTtsZXQgbj1lLnk7ZS55PGk/bj1pOmUueT5pK3ImJihuPWkrcik7Y29uc3QgYT1lLngtbyxsPWUueS1uO3JldHVybiBNYXRoLnNxcnQoYSphK2wqbCk8PS41KmUuc2l6ZX1mdW5jdGlvbiBXYShlLHQsaSxzLHIpe2NvbnN0IG89ZS54K2Uud2lkdGg+dCYmZS54PHQrcyxuPWUueStlLmhlaWdodD5pJiZlLnk8aStyO3JldHVybiBvJiZufWZ1bmN0aW9uIGphKGUsdCl7cmV0dXJuIGUubGVuZ3RoPT09dC5sZW5ndGgmJmUuZXZlcnkoKGUsaSk9Pk51bWJlcihlKT09PU51bWJlcih0W2ldKSl9QmEuY2xhc3NOYW1lPSJMaW5lIixCYS5kZWZhdWx0U3R5bGVzPU9iamVjdC5hc3NpZ24oe30sWm8uZGVmYXVsdFN0eWxlcyx7ZmlsbDp2b2lkIDAsc3Ryb2tlV2lkdGg6MX0pLHkoW3pzKHtyZWRyYXc6M30pXSxCYS5wcm90b3R5cGUsIngxIiwyKSx5KFt6cyh7cmVkcmF3OjN9KV0sQmEucHJvdG90eXBlLCJ5MSIsMikseShbenMoe3JlZHJhdzozfSldLEJhLnByb3RvdHlwZSwieDIiLDIpLHkoW3pzKHtyZWRyYXc6M30pXSxCYS5wcm90b3R5cGUsInkyIiwyKTt2YXIgVWE9WyJzdHJva2UiLCJsaW5lRGFzaCJdLHphPXVvKGU9Pl9lKGUpJiZPYmplY3Qua2V5cyhlKS5ldmVyeShlPT5VYS5pbmNsdWRlcyhlKSksIm9iamVjdHMgd2l0aCBncmlkbGluZSBzdHlsZSBwcm9wZXJ0aWVzIHN1Y2ggYXMgJ3N0cm9rZScgb3IgJ2xpbmVEYXNoJyIpLEthPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5lbmFibGVkPSEwLHRoaXMud2lkdGg9MSx0aGlzLnN0eWxlPVt7c3Ryb2tlOnZvaWQgMCxsaW5lRGFzaDpbXX1dfX07ZnVuY3Rpb24gWWEoZSx0PVt2b2lkIDBdKXtyZXR1cm4gRGUoKGkscyxyKT0+dC5pbmNsdWRlcyhyKT9rZShlKT9lKHIpOmU6cil9eShbcXIodG8pXSxLYS5wcm90b3R5cGUsImVuYWJsZWQiLDIpLHkoW3FyKG5vKV0sS2EucHJvdG90eXBlLCJ3aWR0aCIsMikseShbcXIoemEpXSxLYS5wcm90b3R5cGUsInN0eWxlIiwyKTt2YXIgJGE9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmVuYWJsZWQ9ITAsdGhpcy5hdXRvV3JhcD0hMSx0aGlzLm1heFdpZHRoPXZvaWQgMCx0aGlzLm1heEhlaWdodD12b2lkIDAsdGhpcy5mb250U3R5bGU9dm9pZCAwLHRoaXMuZm9udFdlaWdodD12b2lkIDAsdGhpcy5mb250U2l6ZT0xMix0aGlzLmZvbnRGYW1pbHk9IlZlcmRhbmEsIHNhbnMtc2VyaWYiLHRoaXMucGFkZGluZz01LHRoaXMubWluU3BhY2luZz1OYU4sdGhpcy5jb2xvcj0icmdiYSg4NywgODcsIDg3LCAxKSIsdGhpcy5yb3RhdGlvbj12b2lkIDAsdGhpcy5hdm9pZENvbGxpc2lvbnM9ITAsdGhpcy5taXJyb3JlZD0hMSx0aGlzLnBhcmFsbGVsPSExLHRoaXMuZm9ybWF0dGVyPXZvaWQgMH1nZXRTaWRlRmxhZygpe3JldHVybiB0aGlzLm1pcnJvcmVkPzE6LTF9Z2V0Rm9udCgpe3JldHVybiB0bih0aGlzKX19O3koW3FyKHRvKV0sJGEucHJvdG90eXBlLCJlbmFibGVkIiwyKSx5KFtxcih0byx7b3B0aW9uYWw6ITB9KV0sJGEucHJvdG90eXBlLCJhdXRvV3JhcCIsMikseShbcXIobm8se29wdGlvbmFsOiEwfSldLCRhLnByb3RvdHlwZSwibWF4V2lkdGgiLDIpLHkoW3FyKG5vLHtvcHRpb25hbDohMH0pXSwkYS5wcm90b3R5cGUsIm1heEhlaWdodCIsMikseShbcXIoUG8se29wdGlvbmFsOiEwfSldLCRhLnByb3RvdHlwZSwiZm9udFN0eWxlIiwyKSx5KFtxcihNbyx7b3B0aW9uYWw6ITB9KV0sJGEucHJvdG90eXBlLCJmb250V2VpZ2h0IiwyKSx5KFtxcihyby5yZXN0cmljdCh7bWluOjF9KSldLCRhLnByb3RvdHlwZSwiZm9udFNpemUiLDIpLHkoW3FyKHNvKV0sJGEucHJvdG90eXBlLCJmb250RmFtaWx5IiwyKSx5KFtxcihubyldLCRhLnByb3RvdHlwZSwicGFkZGluZyIsMikseShbcXIoY28pLFlhKE5hTildLCRhLnByb3RvdHlwZSwibWluU3BhY2luZyIsMikseShbcXIoeW8se29wdGlvbmFsOiEwfSldLCRhLnByb3RvdHlwZSwiY29sb3IiLDIpLHkoW3FyKGxvLHtvcHRpb25hbDohMH0pXSwkYS5wcm90b3R5cGUsInJvdGF0aW9uIiwyKSx5KFtxcih0byldLCRhLnByb3RvdHlwZSwiYXZvaWRDb2xsaXNpb25zIiwyKSx5KFtxcih0byldLCRhLnByb3RvdHlwZSwibWlycm9yZWQiLDIpLHkoW3FyKHRvKV0sJGEucHJvdG90eXBlLCJwYXJhbGxlbCIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLCRhLnByb3RvdHlwZSwiZm9ybWF0IiwyKTt2YXIgWGE9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmVuYWJsZWQ9ITAsdGhpcy53aWR0aD0xLHRoaXMuY29sb3I9dm9pZCAwfX07eShbcXIodG8pXSxYYS5wcm90b3R5cGUsImVuYWJsZWQiLDIpLHkoW3FyKG5vKV0sWGEucHJvdG90eXBlLCJ3aWR0aCIsMikseShbcXIoeW8se29wdGlvbmFsOiEwfSldLFhhLnByb3RvdHlwZSwiY29sb3IiLDIpO3ZhciBxYT1XbyhlPT5qZShlKSYmZT4wfHxlIGluc3RhbmNlb2YgRiwiYSBub24temVybyBwb3NpdGl2ZSBOdW1iZXIgdmFsdWUgb3IsIGZvciBhIHRpbWUgYXhpcywgYSBUaW1lIEludGVydmFsIHN1Y2ggYXMgJ2FnQ2hhcnRzLnRpbWUubW9udGgnIiksWmE9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmVuYWJsZWQ9ITAsdGhpcy53aWR0aD0xLHRoaXMuc2l6ZT02LHRoaXMuY29sb3I9dm9pZCAwLHRoaXMuaW50ZXJ2YWw9dm9pZCAwLHRoaXMudmFsdWVzPXZvaWQgMCx0aGlzLm1pblNwYWNpbmc9TmFOfX07ZnVuY3Rpb24gUWEoZSl7Y29uc3RbdCxpXT0kcyhlLnJhbmdlKSxzPU1hdGguZmxvb3IodCkscj1NYXRoLmNlaWwoaSk7cmV0dXJue21pbjpzLG1heDpyLHZpc2libGU6cyE9PXJ9fXkoW3FyKHRvKV0sWmEucHJvdG90eXBlLCJlbmFibGVkIiwyKSx5KFtxcihubyldLFphLnByb3RvdHlwZSwid2lkdGgiLDIpLHkoW3FyKG5vKV0sWmEucHJvdG90eXBlLCJzaXplIiwyKSx5KFtxcih5byx7b3B0aW9uYWw6ITB9KV0sWmEucHJvdG90eXBlLCJjb2xvciIsMikseShbcXIocWEse29wdGlvbmFsOiEwfSldLFphLnByb3RvdHlwZSwiaW50ZXJ2YWwiLDIpLHkoW3FyKGhvLHtvcHRpb25hbDohMH0pXSxaYS5wcm90b3R5cGUsInZhbHVlcyIsMikseShbcXIoQm8pLFlhKE5hTildLFphLnByb3RvdHlwZSwibWluU3BhY2luZyIsMik7dmFyIEphPTIqTWF0aC5QSSxlbD1KYS8yO2Z1bmN0aW9uIHRsKGUpe2NvbnN0IHQ9KHQsaSk9Pntjb25zdFtzPWUubWluLHI9ZS5tYXhdPSRzKG51bGwhPWk/aTpbXSk7cmV0dXJuIHQ8c3x8dD5yfTtyZXR1cm57dGljazp7ZnJvbUZuKGUsaSxzKXtsZXQgcj1lLnkxK2UudHJhbnNsYXRpb25ZLG89ZS5vcGFjaXR5O3JldHVybigiYWRkZWQiPT09c3x8dChlLmRhdHVtLnRyYW5zbGF0aW9uWSxlLmRhdHVtLnJhbmdlKSkmJihyPWkudHJhbnNsYXRpb25ZLG89MCkse3k6MCx0cmFuc2xhdGlvblk6cixvcGFjaXR5Om8scGhhc2U6a3Jbc119fSx0b0ZuKGUsdCxpKXtjb25zdCBzPXQudHJhbnNsYXRpb25ZO2xldCByPTE7cmV0dXJuInJlbW92ZWQiPT09aSYmKHI9MCkse3k6MCx0cmFuc2xhdGlvblk6cyxvcGFjaXR5OnIsZmluaXNoOnt5OnMsdHJhbnNsYXRpb25ZOjB9fX0saW50ZXJtZWRpYXRlRm46KGUsaSxzKT0+KHt2aXNpYmxlOiF0KGUueSl9KX0sbGluZTp7ZnJvbUZuKGUsdCl7dmFyIGk7cmV0dXJuIGYobSh7fSxudWxsIT0oaT1lLnByZXZpb3VzRGF0dW0pP2k6dCkse3BoYXNlOmtyLnVwZGF0ZWR9KX0sdG9GbjooZSx0KT0+bSh7fSx0KX0sbGFiZWw6e2Zyb21GbihlLGkscyl7dmFyIHI7Y29uc3Qgbz1udWxsIT0ocj1lLnByZXZpb3VzRGF0dW0pP3I6aSxuPW8ueCxhPW8ueSxsPW8ucm90YXRpb25DZW50ZXJYO2xldCBkPU1hdGgucm91bmQoZS50cmFuc2xhdGlvblkpLGM9by5yb3RhdGlvbixoPWUub3BhY2l0eTtyZXR1cm4icmVtb3ZlZCI9PT1zfHx0KG8ueSxvLnJhbmdlKXx8KCJhZGRlZCI9PT1zfHx0KGUuZGF0dW0ueSxlLmRhdHVtLnJhbmdlKSkmJihkPU1hdGgucm91bmQoby50cmFuc2xhdGlvblkpLGg9MCxjPWkucm90YXRpb24pLHt4Om4seTphLHJvdGF0aW9uQ2VudGVyWDpsLHRyYW5zbGF0aW9uWTpkLHJvdGF0aW9uOmMsb3BhY2l0eTpoLHBoYXNlOmtyW3NdfX0sdG9GbihlLHQsaSl7dmFyIHMscjtjb25zdCBvPXQueCxuPXQueSxhPXQucm90YXRpb25DZW50ZXJYLGw9TWF0aC5yb3VuZCh0LnRyYW5zbGF0aW9uWSk7bGV0IGQ9MCxjPTE7dmFyIGgsdTtyZXR1cm4iYWRkZWQiPT09aT8oYz0xLGQ9dC5yb3RhdGlvbik6InJlbW92ZWQiPT09aT8oYz0wLGQ9dC5yb3RhdGlvbik6KGg9bnVsbCE9KHI9bnVsbD09KHM9ZS5wcmV2aW91c0RhdHVtKT92b2lkIDA6cy5yb3RhdGlvbik/cjp0LnJvdGF0aW9uLHU9dC5yb3RhdGlvbixkPU1hdGguYWJzKHUtaCk8ZWw/dTpoPnU/dStKYTp1LUphKSx7eDpvLHk6bixyb3RhdGlvbkNlbnRlclg6YSx0cmFuc2xhdGlvblk6bCxyb3RhdGlvbjpkLG9wYWNpdHk6YyxmaW5pc2g6e3JvdGF0aW9uOnQucm90YXRpb259fX19LGdyb3VwOntmcm9tRm4oZSx0KXtjb25zdHtyb3RhdGlvbjppLHRyYW5zbGF0aW9uWDpzLHRyYW5zbGF0aW9uWTpyfT1lO3JldHVybntyb3RhdGlvbjppLHRyYW5zbGF0aW9uWDpzLHRyYW5zbGF0aW9uWTpyLHBoYXNlOmtyLnVwZGF0ZWR9fSx0b0ZuKGUsdCl7Y29uc3R7cm90YXRpb246aSx0cmFuc2xhdGlvblg6cyx0cmFuc2xhdGlvblk6cn09dDtyZXR1cm57cm90YXRpb246aSx0cmFuc2xhdGlvblg6cyx0cmFuc2xhdGlvblk6cn19fX19ZnVuY3Rpb24gaWwoKXtyZXR1cm4oZSx0KT0+KHtyb3RhdGlvbjp0LnJvdGF0aW9uLHJvdGF0aW9uQ2VudGVyWDp0LnJvdGF0aW9uQ2VudGVyWCxyb3RhdGlvbkNlbnRlclk6dC5yb3RhdGlvbkNlbnRlclksdHJhbnNsYXRpb25YOnQudHJhbnNsYXRpb25YLHRyYW5zbGF0aW9uWTp0LnRyYW5zbGF0aW9uWX0pfWZ1bmN0aW9uIHNsKGUpe2NvbnN0e3Zpc2libGU6dCxtaW46aSxtYXg6c309ZTtyZXR1cm4oZSxyKT0+e2NvbnN0IG89ci50cmFuc2xhdGlvblk7cmV0dXJue3k6byx0cmFuc2xhdGlvblk6MCxvcGFjaXR5OjEsdmlzaWJsZTp0JiZvPj1pJiZvPD1zfX19ZnVuY3Rpb24gcmwoKXtyZXR1cm4oZSx0KT0+KHt4OnQueCx5OnQueSx0cmFuc2xhdGlvblk6dC50cmFuc2xhdGlvblkscm90YXRpb246dC5yb3RhdGlvbixyb3RhdGlvbkNlbnRlclg6dC5yb3RhdGlvbkNlbnRlclh9KX1mdW5jdGlvbiBvbCgpe3JldHVybihlLHQpPT5tKHt9LHQpfXZhciBubD0oZT0+KGVbZS5UaWNrTGluZT0wXT0iVGlja0xpbmUiLGVbZS5UaWNrTGFiZWw9MV09IlRpY2tMYWJlbCIsZVtlLkdyaWRMaW5lPTJdPSJHcmlkTGluZSIsZVtlLkdyaWRBcmM9M109IkdyaWRBcmMiLGVbZS5BeGlzTGluZT00XT0iQXhpc0xpbmUiLGUpKShubHx8e30pLGFsPWNsYXNzIGV7Y29uc3RydWN0b3IodCxpLHMpe3RoaXMubW9kdWxlQ3R4PXQsdGhpcy5zY2FsZT1pLHRoaXMuaWQ9V3ModGhpcyksdGhpcy5uaWNlPSEwLHRoaXMucmV2ZXJzZT0hMSx0aGlzLmtleXM9W10sdGhpcy5kYXRhRG9tYWluPXtkb21haW46W10sY2xpcHBlZDohMX0sdGhpcy5ib3VuZFNlcmllcz1bXSx0aGlzLmluY2x1ZGVJbnZpc2libGVEb21haW5zPSExLHRoaXMuaW50ZXJhY3Rpb25FbmFibGVkPSEwLHRoaXMuYXhpc0dyb3VwPW5ldyBPbih7bmFtZTp0aGlzLmlkKyItYXhpcyIsekluZGV4OjJ9KSx0aGlzLmxpbmVOb2RlPXRoaXMuYXhpc0dyb3VwLmFwcGVuZENoaWxkKG5ldyBCYSksdGhpcy50aWNrTGluZUdyb3VwPXRoaXMuYXhpc0dyb3VwLmFwcGVuZENoaWxkKG5ldyBPbih7bmFtZTp0aGlzLmlkKyItQXhpcy10aWNrLWxpbmVzIix6SW5kZXg6Mn0pKSx0aGlzLnRpY2tMYWJlbEdyb3VwPXRoaXMuYXhpc0dyb3VwLmFwcGVuZENoaWxkKG5ldyBPbih7bmFtZTp0aGlzLmlkKyItQXhpcy10aWNrLWxhYmVscyIsekluZGV4OjJ9KSksdGhpcy5jcm9zc0xpbmVHcm91cD1uZXcgT24oe25hbWU6dGhpcy5pZCsiLUNyb3NzTGluZXMifSksdGhpcy5ncmlkR3JvdXA9bmV3IE9uKHtuYW1lOnRoaXMuaWQrIi1BeGlzLWdyaWQifSksdGhpcy5ncmlkTGluZUdyb3VwPXRoaXMuZ3JpZEdyb3VwLmFwcGVuZENoaWxkKG5ldyBPbih7bmFtZTp0aGlzLmlkKyItZ3JpZExpbmVzIix6SW5kZXg6MX0pKSx0aGlzLnRpY2tMaW5lR3JvdXBTZWxlY3Rpb249VmEuc2VsZWN0KHRoaXMudGlja0xpbmVHcm91cCxCYSwhMSksdGhpcy50aWNrTGFiZWxHcm91cFNlbGVjdGlvbj1WYS5zZWxlY3QodGhpcy50aWNrTGFiZWxHcm91cCxlbiwhMSksdGhpcy5ncmlkTGluZUdyb3VwU2VsZWN0aW9uPVZhLnNlbGVjdCh0aGlzLmdyaWRMaW5lR3JvdXAsQmEsITEpLHRoaXMubGluZT1uZXcgWGEsdGhpcy50aWNrPXRoaXMuY3JlYXRlVGljaygpLHRoaXMuZ3JpZExpbmU9bmV3IEthLHRoaXMubGFiZWw9dGhpcy5jcmVhdGVMYWJlbCgpLHRoaXMuZGVmYXVsdFRpY2tNaW5TcGFjaW5nPWUuZGVmYXVsdFRpY2tNaW5TcGFjaW5nLHRoaXMudHJhbnNsYXRpb249e3g6MCx5OjB9LHRoaXMucm90YXRpb249MCx0aGlzLmxheW91dD17bGFiZWw6e2ZyYWN0aW9uRGlnaXRzOjAscGFkZGluZzp0aGlzLmxhYmVsLnBhZGRpbmcsZm9ybWF0OnRoaXMubGFiZWwuZm9ybWF0fX0sdGhpcy5kZXN0cm95Rm5zPVtdLHRoaXMucmFuZ2U9WzAsMV0sdGhpcy52aXNpYmxlUmFuZ2U9WzAsMV0sdGhpcy50aXRsZT12b2lkIDAsdGhpcy5fdGl0bGVDYXB0aW9uPW5ldyBDbix0aGlzLmdyaWRMZW5ndGg9MCx0aGlzLmZyYWN0aW9uRGlnaXRzPTAsdGhpcy5ncmlkUGFkZGluZz0wLHRoaXMuc2VyaWVzQXJlYVBhZGRpbmc9MCx0aGlzLnRpY2tHZW5lcmF0aW9uUmVzdWx0PXZvaWQgMCx0aGlzLm1heFRoaWNrbmVzcz0xLzAsdGhpcy5tb2R1bGVNYXA9bmV3IHNhLHRoaXMucmVmcmVzaFNjYWxlKCksdGhpcy5fdGl0bGVDYXB0aW9uLnJlZ2lzdGVySW50ZXJhY3Rpb24odGhpcy5tb2R1bGVDdHgpLHRoaXMuX3RpdGxlQ2FwdGlvbi5ub2RlLnJvdGF0aW9uPS1NYXRoLlBJLzIsdGhpcy5heGlzR3JvdXAuYXBwZW5kQ2hpbGQodGhpcy5fdGl0bGVDYXB0aW9uLm5vZGUpLHRoaXMuZGVzdHJveUZucy5wdXNoKHQuaW50ZXJhY3Rpb25NYW5hZ2VyLmFkZExpc3RlbmVyKCJob3ZlciIsZT0+dGhpcy5jaGVja0F4aXNIb3ZlcihlKSkpLHRoaXMuYW5pbWF0aW9uTWFuYWdlcj10LmFuaW1hdGlvbk1hbmFnZXIsdGhpcy5hbmltYXRpb25TdGF0ZT1uZXcgbmEoImVtcHR5Iix7ZW1wdHk6e3VwZGF0ZTp7dGFyZ2V0OiJyZWFkeSIsYWN0aW9uOigpPT50aGlzLnJlc2V0U2VsZWN0aW9uTm9kZXMoKX0scmVzZXQ6ImVtcHR5In0scmVhZHk6e3VwZGF0ZTplPT50aGlzLmFuaW1hdGVSZWFkeVVwZGF0ZShlKSxyZXNpemU6KCk9PnRoaXMucmVzZXRTZWxlY3Rpb25Ob2RlcygpLHJlc2V0OiJlbXB0eSJ9fSksdGhpcy5fY3Jvc3NMaW5lcz1bXSx0aGlzLmFzc2lnbkNyb3NzTGluZUFycmF5Q29uc3RydWN0b3IodGhpcy5fY3Jvc3NMaW5lcyk7bGV0IHI9dm9pZCAwO3RoaXMuZGVzdHJveUZucy5wdXNoKHQubGF5b3V0U2VydmljZS5hZGRMaXN0ZW5lcigibGF5b3V0LWNvbXBsZXRlIixlPT57bnVsbCE9ciYmbnVsbCE9eXQoZS5jaGFydCxyKSYmdGhpcy5hbmltYXRpb25TdGF0ZS50cmFuc2l0aW9uKCJyZXNpemUiKSxyPW0oe30sZS5jaGFydCl9KSksITEhPT0obnVsbD09cz92b2lkIDA6cy5yZXNwb25kc1RvWm9vbSkmJnRoaXMuZGVzdHJveUZucy5wdXNoKHQudXBkYXRlU2VydmljZS5hZGRMaXN0ZW5lcigidXBkYXRlLWNvbXBsZXRlIixlPT57dGhpcy5taW5SZWN0PWUubWluUmVjdH0pKX1nZXQgdHlwZSgpe3ZhciBlO3JldHVybiBudWxsIT0oZT10aGlzLmNvbnN0cnVjdG9yLnR5cGUpP2U6IiJ9c2V0IGNyb3NzTGluZXMoZSl7dmFyIHQsaTtudWxsPT0odD10aGlzLl9jcm9zc0xpbmVzKXx8dC5mb3JFYWNoKGU9PnRoaXMuZGV0YWNoQ3Jvc3NMaW5lKGUpKSxlJiZ0aGlzLmFzc2lnbkNyb3NzTGluZUFycmF5Q29uc3RydWN0b3IoZSksdGhpcy5fY3Jvc3NMaW5lcz1lLG51bGw9PShpPXRoaXMuX2Nyb3NzTGluZXMpfHxpLmZvckVhY2goZT0+e3RoaXMuYXR0YWNoQ3Jvc3NMaW5lKGUpLHRoaXMuaW5pdENyb3NzTGluZShlKX0pfWdldCBjcm9zc0xpbmVzKCl7cmV0dXJuIHRoaXMuX2Nyb3NzTGluZXN9cmVzZXRBbmltYXRpb24oZSl7ImluaXRpYWwiPT09ZSYmdGhpcy5hbmltYXRpb25TdGF0ZS50cmFuc2l0aW9uKCJyZXNldCIpfWF0dGFjaENyb3NzTGluZShlKXt0aGlzLmNyb3NzTGluZUdyb3VwLmFwcGVuZENoaWxkKGUuZ3JvdXApLHRoaXMuY3Jvc3NMaW5lR3JvdXAuYXBwZW5kQ2hpbGQoZS5sYWJlbEdyb3VwKX1kZXRhY2hDcm9zc0xpbmUoZSl7dGhpcy5jcm9zc0xpbmVHcm91cC5yZW1vdmVDaGlsZChlLmdyb3VwKSx0aGlzLmNyb3NzTGluZUdyb3VwLnJlbW92ZUNoaWxkKGUubGFiZWxHcm91cCl9ZGVzdHJveSgpe3RoaXMubW9kdWxlTWFwLmRlc3Ryb3koKSx0aGlzLmRlc3Ryb3lGbnMuZm9yRWFjaChlPT5lKCkpfXJlZnJlc2hTY2FsZSgpe3ZhciBlO3RoaXMucmFuZ2U9dGhpcy5zY2FsZS5yYW5nZS5zbGljZSgpLG51bGw9PShlPXRoaXMuY3Jvc3NMaW5lcyl8fGUuZm9yRWFjaCh0aGlzLmluaXRDcm9zc0xpbmUsdGhpcyl9dXBkYXRlUmFuZ2UoKXt2YXIgZTtjb25zdHtyYW5nZTp0LHZpc2libGVSYW5nZTppLHNjYWxlOnN9PXRoaXMscj0odFsxXS10WzBdKS8oaVsxXS1pWzBdKSxvPXIqaVswXSxuPXRbMF0tbztzLnJhbmdlPVtuLG4rcl0sbnVsbD09KGU9dGhpcy5jcm9zc0xpbmVzKXx8ZS5mb3JFYWNoKGU9PntlLmNsaXBwZWRSYW5nZT1bdFswXSx0WzFdXX0pfXNldENyb3NzTGluZXNWaXNpYmxlKGUpe3RoaXMuY3Jvc3NMaW5lR3JvdXAudmlzaWJsZT1lfWF0dGFjaEF4aXMoZSx0KXt0LmFwcGVuZENoaWxkKHRoaXMuZ3JpZEdyb3VwKSxlLmFwcGVuZENoaWxkKHRoaXMuYXhpc0dyb3VwKSxlLmFwcGVuZENoaWxkKHRoaXMuY3Jvc3NMaW5lR3JvdXApfWRldGFjaEF4aXMoZSx0KXt0LnJlbW92ZUNoaWxkKHRoaXMuZ3JpZEdyb3VwKSxlLnJlbW92ZUNoaWxkKHRoaXMuYXhpc0dyb3VwKSxlLnJlbW92ZUNoaWxkKHRoaXMuY3Jvc3NMaW5lR3JvdXApfWluUmFuZ2UoZSx0PTAsaT0wKXtjb25zdFtzLHJdPSRzKHRoaXMucmFuZ2UpO3JldHVybiBlK3Q+PXMtaSYmZTw9citpfW9uTGFiZWxGb3JtYXRDaGFuZ2UoZSx0KXtjb25zdHtzY2FsZTppLGZyYWN0aW9uRGlnaXRzOnN9PXRoaXMscj0hKGkgaW5zdGFuY2VvZiBPYSkmJnM+MD9lPT4ibnVtYmVyIj09dHlwZW9mIGU/ZS50b0ZpeGVkKHMpOlN0cmluZyhlKTplPT5TdHJpbmcoZSk7aWYodCYmaSYmaS50aWNrRm9ybWF0KXRyeXt0aGlzLmxhYmVsRm9ybWF0dGVyPWkudGlja0Zvcm1hdCh7dGlja3M6ZSxzcGVjaWZpZXI6dH0pfWNhdGNoKGUpe3RoaXMubGFiZWxGb3JtYXR0ZXI9cixMLndhcm5PbmNlKGB0aGUgYXhpcyBsYWJlbCBmb3JtYXQgc3RyaW5nICR7dH0gaXMgaW52YWxpZC4gTm8gZm9ybWF0dGluZyB3aWxsIGJlIGFwcGxpZWRgKX1lbHNlIHRoaXMubGFiZWxGb3JtYXR0ZXI9cn1zZXRUaWNrSW50ZXJ2YWwoZSl7dmFyIHQ7dGhpcy5zY2FsZS5pbnRlcnZhbD1udWxsIT0odD10aGlzLnRpY2suaW50ZXJ2YWwpP3Q6ZX1zZXRUaWNrQ291bnQoZSx0LGkpe2NvbnN0e3NjYWxlOnN9PXRoaXM7aWYoZSYmUm4uaXMocykpcmV0dXJuIm51bWJlciI9PXR5cGVvZiBlPyhzLnRpY2tDb3VudD1lLHMubWluVGlja0NvdW50PW51bGwhPXQ/dDowLHZvaWQocy5tYXhUaWNrQ291bnQ9bnVsbCE9aT9pOjEvMCkpOnZvaWQocyBpbnN0YW5jZW9mIF9hJiZ0aGlzLnNldFRpY2tJbnRlcnZhbChlKSl9b25HcmlkTGVuZ3RoQ2hhbmdlKGUsdCl7dmFyIGk7KHQmJiFlfHwhdCYmZSkmJnRoaXMub25HcmlkVmlzaWJpbGl0eUNoYW5nZSgpLG51bGw9PShpPXRoaXMuY3Jvc3NMaW5lcyl8fGkuZm9yRWFjaCh0aGlzLmluaXRDcm9zc0xpbmUsdGhpcyl9b25HcmlkVmlzaWJpbGl0eUNoYW5nZSgpe3RoaXMuZ3JpZExpbmVHcm91cFNlbGVjdGlvbi5jbGVhcigpfWNyZWF0ZVRpY2soKXtyZXR1cm4gbmV3IFphfWNyZWF0ZUxhYmVsKCl7cmV0dXJuIG5ldyAkYX1jaGVja0F4aXNIb3ZlcihlKXtpZighdGhpcy5pbnRlcmFjdGlvbkVuYWJsZWQpcmV0dXJuO3RoaXMuY29tcHV0ZUJCb3goKS5jb250YWluc1BvaW50KGUub2Zmc2V0WCxlLm9mZnNldFkpJiZ0aGlzLm1vZHVsZUN0eC5jaGFydEV2ZW50TWFuYWdlci5heGlzSG92ZXIodGhpcy5pZCx0aGlzLmRpcmVjdGlvbil9dXBkYXRlKGU9MCx0PSEwKXtpZighdGhpcy50aWNrR2VuZXJhdGlvblJlc3VsdClyZXR1cm47Y29uc3R7cm90YXRpb246aSxwYXJhbGxlbEZsaXBSb3RhdGlvbjpzLHJlZ3VsYXJGbGlwUm90YXRpb246cn09dGhpcy5jYWxjdWxhdGVSb3RhdGlvbnMoKSxvPXRoaXMubGFiZWwuZ2V0U2lkZUZsYWcoKTt0aGlzLnVwZGF0ZVBvc2l0aW9uKCk7Y29uc3Qgbj10aGlzLmdldEF4aXNMaW5lQ29vcmRpbmF0ZXMoKSx7dGlja0RhdGE6YSxjb21iaW5lZFJvdGF0aW9uOmwsdGV4dEJhc2VsaW5lOmQsdGV4dEFsaWduOmMscHJpbWFyeVRpY2tDb3VudDpofT10aGlzLnRpY2tHZW5lcmF0aW9uUmVzdWx0LHU9dGhpcy50aWNrTGFiZWxHcm91cFNlbGVjdGlvbi5ub2RlcygpLm1hcChlPT5lLmRhdHVtLnRpY2tJZCk7aWYodGhpcy51cGRhdGVTZWxlY3Rpb25zKG4sYS50aWNrcyx7Y29tYmluZWRSb3RhdGlvbjpsLHRleHRBbGlnbjpjLHRleHRCYXNlbGluZTpkLHJhbmdlOnRoaXMuc2NhbGUucmFuZ2V9KSwhdHx8dGhpcy5hbmltYXRpb25NYW5hZ2VyLmlzU2tpcHBlZCgpKXRoaXMucmVzZXRTZWxlY3Rpb25Ob2RlcygpO2Vsc2V7Y29uc3QgZT10aGlzLmNhbGN1bGF0ZVVwZGF0ZURpZmYodSxhKTt0aGlzLmFuaW1hdGlvblN0YXRlLnRyYW5zaXRpb24oInVwZGF0ZSIsZSl9cmV0dXJuIHRoaXMudXBkYXRlQXhpc0xpbmUoKSx0aGlzLnVwZGF0ZUxhYmVscygpLHRoaXMudXBkYXRlVmlzaWJpbGl0eSgpLHRoaXMudXBkYXRlR3JpZExpbmVzKG8pLHRoaXMudXBkYXRlVGlja0xpbmVzKCksdGhpcy51cGRhdGVUaXRsZSh7YW55VGlja1Zpc2libGU6YS50aWNrcy5sZW5ndGg+MH0pLHRoaXMudXBkYXRlQ3Jvc3NMaW5lcyh7cm90YXRpb246aSxwYXJhbGxlbEZsaXBSb3RhdGlvbjpzLHJlZ3VsYXJGbGlwUm90YXRpb246cn0pLHRoaXMudXBkYXRlTGF5b3V0U3RhdGUoKSxofWdldEF4aXNMaW5lQ29vcmRpbmF0ZXMoKXtjb25zdFtlLHRdPSRzKHRoaXMucmFuZ2UpO3JldHVybnt4OjAseTE6ZSx5Mjp0fX1nZXRUaWNrTGluZUNvb3JkaW5hdGVzKGUpe2NvbnN0IHQ9dGhpcy5sYWJlbC5nZXRTaWRlRmxhZygpKnRoaXMuZ2V0VGlja1NpemUoKSxpPU1hdGgubWluKDAsdCk7cmV0dXJue3gxOmkseDI6aStNYXRoLmFicyh0KSx5OmUudHJhbnNsYXRpb25ZfX1nZXRUaWNrTGFiZWxQcm9wcyhlLHQpe2NvbnN0e2xhYmVsOml9PXRoaXMse2NvbWJpbmVkUm90YXRpb246cyx0ZXh0QmFzZWxpbmU6cix0ZXh0QWxpZ246byxyYW5nZTpufT10LGE9ZS50aWNrTGFiZWwsbD1pLmdldFNpZGVGbGFnKCkqKHRoaXMuZ2V0VGlja1NpemUoKStpLnBhZGRpbmcrdGhpcy5zZXJpZXNBcmVhUGFkZGluZyksZD0iIiE9PWEmJm51bGwhPWE7cmV0dXJue3RpY2tJZDplLnRpY2tJZCx0cmFuc2xhdGlvblk6ZS50cmFuc2xhdGlvblksZmlsbDppLmNvbG9yLGZvbnRGYW1pbHk6aS5mb250RmFtaWx5LGZvbnRTaXplOmkuZm9udFNpemUsZm9udFN0eWxlOmkuZm9udFN0eWxlLGZvbnRXZWlnaHQ6aS5mb250V2VpZ2h0LHJvdGF0aW9uOnMscm90YXRpb25DZW50ZXJYOmwsdGV4dDphLHRleHRBbGlnbjpvLHRleHRCYXNlbGluZTpyLHZpc2libGU6ZCx4OmwseTowLHJhbmdlOm59fWdldFRpY2tTaXplKCl7cmV0dXJuIHRoaXMudGljay5lbmFibGVkP3RoaXMudGljay5zaXplOnRoaXMuY3JlYXRlVGljaygpLnNpemV9c2V0VGl0bGVQcm9wcyhlLHQpe3ZhciBpO2NvbnN0e3RpdGxlOnN9PXRoaXM7aWYocyl7aWYoZS5jb2xvcj1zLmNvbG9yLGUuZm9udEZhbWlseT1zLmZvbnRGYW1pbHksZS5mb250U2l6ZT1zLmZvbnRTaXplLGUuZm9udFN0eWxlPXMuZm9udFN0eWxlLGUuZm9udFdlaWdodD1zLmZvbnRXZWlnaHQsZS5lbmFibGVkPXMuZW5hYmxlZCxlLndyYXBwaW5nPXMud3JhcHBpbmcscy5lbmFibGVkKXtjb25zdCByPWUubm9kZSxvPShudWxsIT0oaT1zLnNwYWNpbmcpP2k6MCkrdC5zcGFjaW5nLG49dGhpcy5sYWJlbC5nZXRTaWRlRmxhZygpLGE9V3IodGhpcy5yb3RhdGlvbiksbD0tMT09PW4mJmE+TWF0aC5QSSYmYTwyKk1hdGguUEk/LTE6MSxkPWwqbipNYXRoLlBJLzIsYz0xPT09bD8iYm90dG9tIjoidG9wIix7cmFuZ2U6aH09dGhpcyx1PU1hdGguZmxvb3IobCpuKihoWzBdK2hbMV0pLzIpLHA9LTE9PT1uP01hdGguZmxvb3IobCotbyk6TWF0aC5mbG9vcigtbykse2NhbGxiYWNrQ2FjaGU6Z309dGhpcy5tb2R1bGVDdHgse2Zvcm1hdHRlcjptPShlPT5lLmRlZmF1bHRWYWx1ZSl9PXMsZj1nLmNhbGwobSx0aGlzLmdldFRpdGxlRm9ybWF0dGVyUGFyYW1zKCkpO3Iuc2V0UHJvcGVydGllcyh7cm90YXRpb246ZCx0ZXh0OmYsdGV4dEJhc2VsaW5lOmMsdmlzaWJsZTohMCx4OnUseTpwfSl9fWVsc2UgZS5lbmFibGVkPSExfWNhbGN1bGF0ZUxheW91dChlKXt2YXIgdCxpO2NvbnN0e3JvdGF0aW9uOnMscGFyYWxsZWxGbGlwUm90YXRpb246cixyZWd1bGFyRmxpcFJvdGF0aW9uOm99PXRoaXMuY2FsY3VsYXRlUm90YXRpb25zKCksbj10aGlzLmxhYmVsLmdldFNpZGVGbGFnKCksYT1uKih0aGlzLmdldFRpY2tTaXplKCkrdGhpcy5sYWJlbC5wYWRkaW5nK3RoaXMuc2VyaWVzQXJlYVBhZGRpbmcpO3RoaXMudXBkYXRlU2NhbGUoKSx0aGlzLnRpY2tHZW5lcmF0aW9uUmVzdWx0PXRoaXMuZ2VuZXJhdGVUaWNrcyh7cHJpbWFyeVRpY2tDb3VudDplLHBhcmFsbGVsRmxpcFJvdGF0aW9uOnIscmVndWxhckZsaXBSb3RhdGlvbjpvLGxhYmVsWDphLHNpZGVGbGFnOm59KSx0aGlzLnVwZGF0ZUxheW91dFN0YXRlKCk7Y29uc3QgbD10aGlzLnRpY2tHZW5lcmF0aW9uUmVzdWx0LHt0aWNrRGF0YTpkLGNvbWJpbmVkUm90YXRpb246Yyx0ZXh0QmFzZWxpbmU6aCx0ZXh0QWxpZ246dX09bCxwPXYobCxbInRpY2tEYXRhIiwiY29tYmluZWRSb3RhdGlvbiIsInRleHRCYXNlbGluZSIsInRleHRBbGlnbiJdKSxnPVtdLHt4OkMseTE6eSx5MjpTfT10aGlzLmdldEF4aXNMaW5lQ29vcmRpbmF0ZXMoKSx3PW5ldyBvcihDK01hdGgubWluKG4qdGhpcy5zZXJpZXNBcmVhUGFkZGluZywwKSx5LHRoaXMuc2VyaWVzQXJlYVBhZGRpbmcsUy15KTtpZihnLnB1c2godyksdGhpcy50aWNrLmVuYWJsZWQmJmQudGlja3MuZm9yRWFjaChlPT57Y29uc3R7eDE6dCx4MjppLHk6c309dGhpcy5nZXRUaWNrTGluZUNvb3JkaW5hdGVzKGUpLHI9bmV3IG9yKHQscyxpLXQsMCk7Zy5wdXNoKHIpfSksdGhpcy5sYWJlbC5lbmFibGVkKXtjb25zdCBlPW5ldyBlbjtkLnRpY2tzLmZvckVhY2godD0+e2NvbnN0IGk9dGhpcy5nZXRUaWNrTGFiZWxQcm9wcyh0LHtjb21iaW5lZFJvdGF0aW9uOmMsdGV4dEFsaWduOnUsdGV4dEJhc2VsaW5lOmgscmFuZ2U6dGhpcy5zY2FsZS5yYW5nZX0pO2lmKCFpLnZpc2libGUpcmV0dXJuO2Uuc2V0UHJvcGVydGllcyhmKG0oe30saSkse3RyYW5zbGF0aW9uWTpNYXRoLnJvdW5kKHQudHJhbnNsYXRpb25ZKX0pKTtjb25zdCBzPWUuY29tcHV0ZVRyYW5zZm9ybWVkQkJveCgpO3MmJmcucHVzaChzKX0pfWlmKG51bGw9PSh0PXRoaXMudGl0bGUpP3ZvaWQgMDp0LmVuYWJsZWQpe2NvbnN0IGU9bmV3IENuLHQ9b3IubWVyZ2UoZykud2lkdGg7dGhpcy5zZXRUaXRsZVByb3BzKGUse3NwYWNpbmc6dH0pO2NvbnN0IGk9ZS5ub2RlLmNvbXB1dGVUcmFuc2Zvcm1lZEJCb3goKTtpJiZnLnB1c2goaSl9Y29uc3QgYj0oZT0+e2NvbnN0IHQ9bmV3IGFyLHtyb3RhdGlvbjppLHRyYW5zbGF0aW9uWDpzLHRyYW5zbGF0aW9uWTpyLHJvdGF0aW9uQ2VudGVyWDpvLHJvdGF0aW9uQ2VudGVyWTpufT10aGlzLmdldEF4aXNUcmFuc2Zvcm0oKTtyZXR1cm4gYXIudXBkYXRlVHJhbnNmb3JtTWF0cml4KHQsMSwxLGkscyxyLHtzY2FsaW5nQ2VudGVyWDowLHNjYWxpbmdDZW50ZXJZOjAscm90YXRpb25DZW50ZXJYOm8scm90YXRpb25DZW50ZXJZOm59KSx0LnRyYW5zZm9ybUJCb3goZSl9KShvci5tZXJnZShnKSksRT10aGlzLmlzQW55U2VyaWVzQWN0aXZlKCk7cmV0dXJuIG51bGw9PShpPXRoaXMuY3Jvc3NMaW5lcyl8fGkuZm9yRWFjaChlPT57dmFyIHQ7ZS5zaWRlRmxhZz0tbixlLmRpcmVjdGlvbj1zPT09LU1hdGguUEkvMj8ieCI6InkiLGUgaW5zdGFuY2VvZiBpYSYmKGUubGFiZWwucGFyYWxsZWw9bnVsbCE9KHQ9ZS5sYWJlbC5wYXJhbGxlbCk/dDp0aGlzLmxhYmVsLnBhcmFsbGVsKSxlLnBhcmFsbGVsRmxpcFJvdGF0aW9uPXIsZS5yZWd1bGFyRmxpcFJvdGF0aW9uPW8sZS5jYWxjdWxhdGVMYXlvdXQoRSx0aGlzLnJldmVyc2UpfSkse3ByaW1hcnlUaWNrQ291bnQ6ZT1wLnByaW1hcnlUaWNrQ291bnQsYmJveDpifX11cGRhdGVMYXlvdXRTdGF0ZSgpe3RoaXMubGF5b3V0LmxhYmVsPXtmcmFjdGlvbkRpZ2l0czp0aGlzLmZyYWN0aW9uRGlnaXRzLHBhZGRpbmc6dGhpcy5sYWJlbC5wYWRkaW5nLGZvcm1hdDp0aGlzLmxhYmVsLmZvcm1hdH19c2V0RG9tYWluKGUpe3RoaXMuZGF0YURvbWFpbj10aGlzLm5vcm1hbGlzZURhdGFEb21haW4oZSksdGhpcy5yZXZlcnNlJiZ0aGlzLmRhdGFEb21haW4uZG9tYWluLnJldmVyc2UoKSx0aGlzLnNjYWxlLmRvbWFpbj10aGlzLmRhdGFEb21haW4uZG9tYWlufXVwZGF0ZVNjYWxlKCl7dGhpcy51cGRhdGVSYW5nZSgpLHRoaXMuY2FsY3VsYXRlRG9tYWluKCksdGhpcy5zZXRUaWNrSW50ZXJ2YWwodGhpcy50aWNrLmludGVydmFsKTtjb25zdHtzY2FsZTplLG5pY2U6dH09dGhpcztSbi5pcyhlKSYmKGUubmljZT10LGUudXBkYXRlKCkpfWNhbGN1bGF0ZVJvdGF0aW9ucygpe2NvbnN0IGU9enIodGhpcy5yb3RhdGlvbik7cmV0dXJue3JvdGF0aW9uOmUscGFyYWxsZWxGbGlwUm90YXRpb246V3IoZSkscmVndWxhckZsaXBSb3RhdGlvbjpXcihlLU1hdGguUEkvMil9fWdlbmVyYXRlVGlja3Moe3ByaW1hcnlUaWNrQ291bnQ6ZSxwYXJhbGxlbEZsaXBSb3RhdGlvbjp0LHJlZ3VsYXJGbGlwUm90YXRpb246aSxsYWJlbFg6cyxzaWRlRmxhZzpyfSl7dmFyIG87Y29uc3R7c2NhbGU6bix0aWNrOmEsbGFiZWw6e3BhcmFsbGVsOmwscm90YXRpb246ZCxmb250RmFtaWx5OmMsZm9udFNpemU6aCxmb250U3R5bGU6dSxmb250V2VpZ2h0OnB9fT10aGlzLGc9dm9pZCAwIT09ZSx7ZGVmYXVsdFJvdGF0aW9uOnYsY29uZmlndXJlZFJvdGF0aW9uOkMscGFyYWxsZWxGbGlwRmxhZzp5LHJlZ3VsYXJGbGlwRmxhZzpTfT1Nbih7cm90YXRpb246ZCxwYXJhbGxlbDpsLHJlZ3VsYXJGbGlwUm90YXRpb246aSxwYXJhbGxlbEZsaXBSb3RhdGlvbjp0fSksdz1DK3YsYj1uZXcgYXIse21heFRpY2tDb3VudDpFfT10aGlzLmVzdGltYXRlVGlja0NvdW50KHttaW5TcGFjaW5nOmEubWluU3BhY2luZyxtYXhTcGFjaW5nOm51bGwhPShvPWEubWF4U3BhY2luZyk/bzpOYU59KSxSPSFSbi5pcyhuKXx8aXNOYU4oRSk/MTA6RTtsZXQgeD1MbihsLEMsMCxyLFMpO2NvbnN0IFQ9ZnVuY3Rpb24oZSx0LGkscyl7cmV0dXJuIGUmJiF0P2kqcz09LTE/ImhhbmdpbmciOiJib3R0b20iOiJtaWRkbGUifShsLEMscix5KSxEPXtmb250RmFtaWx5OmMsZm9udFNpemU6aCxmb250U3R5bGU6dSxmb250V2VpZ2h0OnAsdGV4dEJhc2VsaW5lOlQsdGV4dEFsaWduOnh9O2xldCBPPXtyYXdUaWNrczpbXSx0aWNrczpbXSxsYWJlbENvdW50OjB9LEE9MCxQPTAsTT0hMCxMPSExO2Zvcig7TSYmQTw9UiYmIUw7KXtQPTAseD1MbihsLEMsMCxyLFMpO2NvbnN0IHQ9dGhpcy5nZXRUaWNrU3RyYXRlZ2llcyh7c2Vjb25kYXJ5QXhpczpnLGluZGV4OkF9KTtmb3IoY29uc3QgaSBvZiB0KXsoe3RpY2tEYXRhOk8saW5kZXg6QSxhdXRvUm90YXRpb246UCx0ZXJtaW5hdGU6TH09aSh7aW5kZXg6QSx0aWNrRGF0YTpPLHRleHRQcm9wczpELGxhYmVsT3ZlcmxhcDpNLHRlcm1pbmF0ZTpMLHByaW1hcnlUaWNrQ291bnQ6ZX0pKTtjb25zdCB0PTAhPT1DfHwwIT09UCxvPXcrUDt4PUxuKGwsQyxQLHIsUyksTT10aGlzLmNoZWNrTGFiZWxPdmVybGFwKG8sdCxiLE8udGlja3MscyxmKG0oe30sRCkse3RleHRBbGlnbjp4fSkpfX1jb25zdCBGPXYrQytQO3JldHVybiFnJiZPLnJhd1RpY2tzLmxlbmd0aD4wJiYoZT1PLnJhd1RpY2tzLmxlbmd0aCkse3RpY2tEYXRhOk8scHJpbWFyeVRpY2tDb3VudDplLGNvbWJpbmVkUm90YXRpb246Rix0ZXh0QmFzZWxpbmU6VCx0ZXh0QWxpZ246eH19Z2V0VGlja1N0cmF0ZWdpZXMoe2luZGV4OmUsc2Vjb25kYXJ5QXhpczp0fSl7Y29uc3R7c2NhbGU6aSxsYWJlbDpzLHRpY2s6cn09dGhpcyxvPVJuLmlzKGkpLG49cy5lbmFibGVkJiZzLmF2b2lkQ29sbGlzaW9ucyxhPSFvJiYwIT09ZSYmbixsPSEwPT09cy5hdXRvUm90YXRlJiZ2b2lkIDA9PT1zLnJvdGF0aW9uLGQ9W107bGV0IGM7Yz10aGlzLnRpY2sudmFsdWVzPzM6dD8xOmE/MjowO2lmKGQucHVzaCgoe2luZGV4OmUsdGlja0RhdGE6dCxwcmltYXJ5VGlja0NvdW50OmksdGVybWluYXRlOnN9KT0+dGhpcy5jcmVhdGVUaWNrRGF0YShjLGUsdCxzLGkpKSwhbyYmIWlzTmFOKHIubWluU3BhY2luZykpe2NvbnN0IGU9KHtpbmRleDplLHRpY2tEYXRhOnQscHJpbWFyeVRpY2tDb3VudDppLHRlcm1pbmF0ZTpzfSk9PnRoaXMuY3JlYXRlVGlja0RhdGEoMixlLHQscyxpKTtkLnB1c2goZSl9aWYoIW4pcmV0dXJuIGQ7aWYocy5hdXRvV3JhcCl7Y29uc3QgZT0oe2luZGV4OmUsdGlja0RhdGE6dCx0ZXh0UHJvcHM6aX0pPT50aGlzLndyYXBMYWJlbHModCxlLGkpO2QucHVzaChlKX1lbHNlIGlmKGwpe2NvbnN0IGU9KHtpbmRleDplLHRpY2tEYXRhOnQsbGFiZWxPdmVybGFwOmksdGVybWluYXRlOnN9KT0+KHtpbmRleDplLHRpY2tEYXRhOnQsYXV0b1JvdGF0aW9uOnRoaXMuZ2V0QXV0b1JvdGF0aW9uKGkpLHRlcm1pbmF0ZTpzfSk7ZC5wdXNoKGUpfXJldHVybiBkfWNyZWF0ZVRpY2tEYXRhKGUsdCxpLHMscil7dmFyIG87Y29uc3R7c2NhbGU6bix0aWNrOmF9PXRoaXMse21heFRpY2tDb3VudDpsLG1pblRpY2tDb3VudDpkLGRlZmF1bHRUaWNrQ291bnQ6Y309dGhpcy5lc3RpbWF0ZVRpY2tDb3VudCh7bWluU3BhY2luZzphLm1pblNwYWNpbmcsbWF4U3BhY2luZzpudWxsIT0obz1hLm1heFNwYWNpbmcpP286TmFOfSksaD1Sbi5pcyhuKSx1PSFofHxpc05hTihsKT8xMDpsO2xldCBwPWg/TWF0aC5tYXgoYy10LGQpOmw7Y29uc3QgZz12b2lkIDA9PT1hLmludGVydmFsJiZ2b2lkIDA9PT1hLnZhbHVlcyYmcD5kJiYoaHx8Mj09PWUpO2xldCBtPSEwO2Zvcig7bSYmdDw9dTspe2NvbnN0IHM9aS5yYXdUaWNrcztwPWg/TWF0aC5tYXgoYy10LGQpOmw7Y29uc3R7cmF3VGlja3M6byx0aWNrczpuLGxhYmVsQ291bnQ6YX09dGhpcy5nZXRUaWNrcyh7dGlja0dlbmVyYXRpb25UeXBlOmUscHJldmlvdXNUaWNrczpzLHRpY2tDb3VudDpwLG1pblRpY2tDb3VudDpkLG1heFRpY2tDb3VudDpsLHByaW1hcnlUaWNrQ291bnQ6cn0pO2kucmF3VGlja3M9byxpLnRpY2tzPW4saS5sYWJlbENvdW50PWEsbT0hIWcmJmphKG8scyksdCsrfWNvbnN0IGY9dm9pZCAwIT09YS5pbnRlcnZhbHx8dm9pZCAwIT09YS52YWx1ZXM7cmV0dXJuIHN8fChzPWYpLHt0aWNrRGF0YTppLGluZGV4OnQsYXV0b1JvdGF0aW9uOjAsdGVybWluYXRlOnN9fWNoZWNrTGFiZWxPdmVybGFwKGUsdCxpLHMscixvKXthci51cGRhdGVUcmFuc2Zvcm1NYXRyaXgoaSwxLDEsZSwwLDApO3JldHVybiBmdW5jdGlvbihlLHQpe2NvbnN0IGk9W107Zm9yKGxldCBzPTA7czxlLmxlbmd0aDtzKyspe2NvbnN0IHI9ZVtzXSx7cG9pbnQ6e3g6byx5Om59LGxhYmVsOnt0ZXh0OmF9fT1yO2xldHtsYWJlbDp7d2lkdGg6bCxoZWlnaHQ6ZH19PXI7bCs9bnVsbCE9dD90OjAsZCs9bnVsbCE9dD90OjA7aWYoaS5zb21lKGU9PldhKGUsbyxuLGwsZCkpKXJldHVybiEwO2kucHVzaCh7aW5kZXg6cyx0ZXh0OmEseDpvLHk6bix3aWR0aDpsLGhlaWdodDpkLGRhdHVtOnJ9KX1yZXR1cm4hMX0odGhpcy5jcmVhdGVMYWJlbERhdGEocyxyLG8saSksZnVuY3Rpb24oZSx0KXtyZXR1cm4gaXNOYU4oZSk/dD8wOjEwOmV9KHRoaXMubGFiZWwubWluU3BhY2luZyx0KSl9Y3JlYXRlTGFiZWxEYXRhKGUsdCxpLHMpe2NvbnN0IHI9W107Zm9yKGNvbnN0IG8gb2YgZSl7Y29uc3R7dGlja0xhYmVsOmUsdHJhbnNsYXRpb25ZOm59PW87aWYoIiI9PT1lfHxudWxsPT1lKWNvbnRpbnVlO2NvbnN0IGE9YW4oZSkse3dpZHRoOmwsaGVpZ2h0OmR9PXNuKGEsdCxuLGkpLGM9Rm4oZSxuZXcgb3IodCxuLGwsZCksdCxuLHMpO3IucHVzaChjKX1yZXR1cm4gcn1nZXRBdXRvUm90YXRpb24oZSl7dmFyIHQ7cmV0dXJuIGU/V3IoenIobnVsbCE9KHQ9dGhpcy5sYWJlbC5hdXRvUm90YXRlQW5nbGUpP3Q6MCkpOjB9Z2V0VGlja3Moe3RpY2tHZW5lcmF0aW9uVHlwZTplLHByZXZpb3VzVGlja3M6dCx0aWNrQ291bnQ6aSxtaW5UaWNrQ291bnQ6cyxtYXhUaWNrQ291bnQ6cixwcmltYXJ5VGlja0NvdW50Om99KXt2YXIgbjtjb25zdHtyYW5nZTphLHNjYWxlOmwsdmlzaWJsZVJhbmdlOmR9PXRoaXM7bGV0IGM7c3dpdGNoKGUpe2Nhc2UgMzppZihSbi5pcyhsKSl7Y29uc3QgZT1sLmdldERvbWFpbigpLHQ9bC5mcm9tRG9tYWluKGVbMF0pLGk9bC5mcm9tRG9tYWluKGVbMV0pLHM9TWF0aC5taW4odCxpKSxyPU1hdGgubWF4KHQsaSk7Yz10aGlzLnRpY2sudmFsdWVzLmZpbHRlcihlPT5lPj1zJiZlPD1yKS5zb3J0KChlLHQpPT5lLXQpfWVsc2UgYz10aGlzLnRpY2sudmFsdWVzO2JyZWFrO2Nhc2UgMTpjPXRoaXMudXBkYXRlU2Vjb25kYXJ5QXhpc1RpY2tzKG8pO2JyZWFrO2Nhc2UgMjpjPXRoaXMuZmlsdGVyVGlja3ModCxpKTticmVhaztkZWZhdWx0OmM9dGhpcy5jcmVhdGVUaWNrcyhpLHMscil9dGhpcy5mcmFjdGlvbkRpZ2l0cz1jLmZyYWN0aW9uRGlnaXRzPj0wP2MuZnJhY3Rpb25EaWdpdHM6MCx0aGlzLm9uTGFiZWxGb3JtYXRDaGFuZ2UoYyx0aGlzLmxhYmVsLmZvcm1hdCk7Y29uc3QgaD0obnVsbCE9KG49bC5iYW5kd2lkdGgpP246MCkvMix1PVtdO2xldCBwPTA7Y29uc3QgZz1uZXcgTWFwLG09TWF0aC5tYXgoMCxNYXRoLmZsb29yKGRbMF0qYy5sZW5ndGgpKSxmPU1hdGgubWluKGMubGVuZ3RoLE1hdGguY2VpbChkWzFdKmMubGVuZ3RoKSk7Zm9yKGxldCBlPW07ZTxmO2UrKyl7Y29uc3QgdD1jW2VdLGk9bC5jb252ZXJ0KHQpK2g7aWYoYS5sZW5ndGg+MCYmIXRoaXMuaW5SYW5nZShpLDAsLjAwMSkpY29udGludWU7Y29uc3Qgcz10aGlzLmZvcm1hdFRpY2sodCxlKTtsZXQgcj1zO2lmKGcuaGFzKHIpKXtjb25zdCBlPWcuZ2V0KHIpO2cuc2V0KHIsZSsxKSxyPWAke3J9XyR7ZX1gfWVsc2UgZy5zZXQociwxKTt1LnB1c2goe3RpY2s6dCx0aWNrSWQ6cix0aWNrTGFiZWw6cyx0cmFuc2xhdGlvblk6aX0pLCIiIT09cyYmbnVsbCE9cyYmcCsrfXJldHVybntyYXdUaWNrczpjLHRpY2tzOnUsbGFiZWxDb3VudDpwfX1maWx0ZXJUaWNrcyhlLHQpe3ZhciBpO2NvbnN0IHM9IWlzTmFOKHRoaXMudGljay5taW5TcGFjaW5nKXx8IWlzTmFOKG51bGwhPShpPXRoaXMudGljay5tYXhTcGFjaW5nKT9pOk5hTik/TWF0aC5jZWlsKGUubGVuZ3RoL3QpOjI7cmV0dXJuIGUuZmlsdGVyKChlLHQpPT50JXM9PTApfWNyZWF0ZVRpY2tzKGUsdCxpKXt2YXIgcyxyLG87cmV0dXJuIHRoaXMuc2V0VGlja0NvdW50KGUsdCxpKSxudWxsIT0obz1udWxsPT0ocj0ocz10aGlzLnNjYWxlKS50aWNrcyk/dm9pZCAwOnIuY2FsbChzKSk/bzpbXX1lc3RpbWF0ZVRpY2tDb3VudCh7bWluU3BhY2luZzplLG1heFNwYWNpbmc6dH0pe2NvbnN0e21pblJlY3Q6aX09dGhpcyxzPXRoaXMuY2FsY3VsYXRlUmFuZ2VXaXRoQmxlZWQoKSxyPU1hdGgubWF4KHRoaXMuZGVmYXVsdFRpY2tNaW5TcGFjaW5nLHMvUm4uZGVmYXVsdE1heFRpY2tDb3VudCk7bGV0IG89IWlzTmFOKHQpO2lzTmFOKGUpJiYoZT1yKSxpc05hTih0KSYmKHQ9cyksZT50JiYoZT09PXI/ZT10OnQ9ZSk7Y29uc3Qgbj1pPyJ4Ij09PXRoaXMuZGlyZWN0aW9uP2kud2lkdGg6aS5oZWlnaHQ6MTtvJiYobz1uPHIpO2NvbnN0IGE9S3MoMSxNYXRoLmZsb29yKHMvZSksbz9NYXRoLmZsb29yKHMvbik6MS8wKSxsPU1hdGgubWluKGEsTWF0aC5jZWlsKHMvdCkpO3JldHVybnttaW5UaWNrQ291bnQ6bCxtYXhUaWNrQ291bnQ6YSxkZWZhdWx0VGlja0NvdW50OktzKGwsUm4uZGVmYXVsdFRpY2tDb3VudCxhKX19dXBkYXRlVmlzaWJpbGl0eSgpe3RoaXMubW9kdWxlQ3R4LmFuaW1hdGlvbk1hbmFnZXIuaXNTa2lwcGVkKCkmJnRoaXMucmVzZXRTZWxlY3Rpb25Ob2RlcygpLHRoaXMudGlja0xpbmVHcm91cC52aXNpYmxlPXRoaXMudGljay5lbmFibGVkLHRoaXMuZ3JpZExpbmVHcm91cC52aXNpYmxlPXRoaXMuZ3JpZExpbmUuZW5hYmxlZCx0aGlzLnRpY2tMYWJlbEdyb3VwLnZpc2libGU9dGhpcy5sYWJlbC5lbmFibGVkfXVwZGF0ZUNyb3NzTGluZXMoe3JvdGF0aW9uOmUscGFyYWxsZWxGbGlwUm90YXRpb246dCxyZWd1bGFyRmxpcFJvdGF0aW9uOml9KXt2YXIgcztjb25zdCByPXRoaXMubGFiZWwuZ2V0U2lkZUZsYWcoKSxvPXRoaXMuaXNBbnlTZXJpZXNBY3RpdmUoKTtudWxsPT0ocz10aGlzLmNyb3NzTGluZXMpfHxzLmZvckVhY2gocz0+e3ZhciBuO3Muc2lkZUZsYWc9LXIscy5kaXJlY3Rpb249ZT09PS1NYXRoLlBJLzI/IngiOiJ5IixzIGluc3RhbmNlb2YgaWEmJihzLmxhYmVsLnBhcmFsbGVsPW51bGwhPShuPXMubGFiZWwucGFyYWxsZWwpP246dGhpcy5sYWJlbC5wYXJhbGxlbCkscy5wYXJhbGxlbEZsaXBSb3RhdGlvbj10LHMucmVndWxhckZsaXBSb3RhdGlvbj1pLHMudXBkYXRlKG8pfSl9dXBkYXRlVGlja0xpbmVzKCl7Y29uc3R7dGljazplLGxhYmVsOnR9PXRoaXMsaT10LmdldFNpZGVGbGFnKCk7dGhpcy50aWNrTGluZUdyb3VwU2VsZWN0aW9uLmVhY2godD0+e3Quc3Ryb2tlV2lkdGg9ZS53aWR0aCx0LnN0cm9rZT1lLmNvbG9yLHQueDE9aSp0aGlzLmdldFRpY2tTaXplKCksdC54Mj0wfSl9Y2FsY3VsYXRlQXZhaWxhYmxlUmFuZ2UoKXtyZXR1cm4gWHModGhpcy5yYW5nZSl9Y2FsY3VsYXRlUmFuZ2VXaXRoQmxlZWQoKXtjb25zdCBlPTEvWHModGhpcy52aXNpYmxlUmFuZ2UpO3JldHVybiBRcyh0aGlzLmNhbGN1bGF0ZUF2YWlsYWJsZVJhbmdlKCkqZSwyKX1jYWxjdWxhdGVEb21haW4oKXtjb25zdCBlPXRoaXMuYm91bmRTZXJpZXMuZmlsdGVyKGU9PnRoaXMuaW5jbHVkZUludmlzaWJsZURvbWFpbnN8fGUuaXNFbmFibGVkKCkpLmZsYXRNYXAoZT0+ZS5nZXREb21haW4odGhpcy5kaXJlY3Rpb24pKTt0aGlzLnNldERvbWFpbihlKX1nZXRBeGlzVHJhbnNmb3JtKCl7cmV0dXJue3JvdGF0aW9uOnpyKHRoaXMucm90YXRpb24pLHJvdGF0aW9uQ2VudGVyWDowLHJvdGF0aW9uQ2VudGVyWTowLHRyYW5zbGF0aW9uWDpNYXRoLmZsb29yKHRoaXMudHJhbnNsYXRpb24ueCksdHJhbnNsYXRpb25ZOk1hdGguZmxvb3IodGhpcy50cmFuc2xhdGlvbi55KX19dXBkYXRlUG9zaXRpb24oKXtjb25zdHtjcm9zc0xpbmVHcm91cDplLGF4aXNHcm91cDp0LGdyaWRHcm91cDppLHRyYW5zbGF0aW9uOnMsZ3JpZExpbmVHcm91cFNlbGVjdGlvbjpyLGdyaWRQYWRkaW5nOm8sZ3JpZExlbmd0aDpufT10aGlzLHtyb3RhdGlvbjphfT10aGlzLmNhbGN1bGF0ZVJvdGF0aW9ucygpLGw9dGhpcy5sYWJlbC5nZXRTaWRlRmxhZygpLGQ9TWF0aC5mbG9vcihzLngpLGM9TWF0aC5mbG9vcihzLnkpO2Uuc2V0UHJvcGVydGllcyh7cm90YXRpb246YSx0cmFuc2xhdGlvblg6ZCx0cmFuc2xhdGlvblk6Y30pLGkuc2V0UHJvcGVydGllcyh7cm90YXRpb246YSx0cmFuc2xhdGlvblg6ZCx0cmFuc2xhdGlvblk6Y30pLHQuZGF0dW09dGhpcy5nZXRBeGlzVHJhbnNmb3JtKCksci5lYWNoKGU9PntlLngxPW8sZS54Mj0tbCpuK299KX11cGRhdGVTZWNvbmRhcnlBeGlzVGlja3MoZSl7dGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSB1bmV4cGVjdGVkIGNhbGwgdG8gdXBkYXRlU2Vjb25kYXJ5QXhpc1RpY2tzKCkgLSBjaGVjayBheGVzIGNvbmZpZ3VyYXRpb24uIil9dXBkYXRlU2VsZWN0aW9ucyhlLHQsaSl7dGhpcy5saW5lTm9kZS5kYXR1bT1lLHRoaXMuZ3JpZExpbmVHcm91cFNlbGVjdGlvbi51cGRhdGUodGhpcy5ncmlkTGVuZ3RoP3Q6W10sZT0+ZS5hcHBlbmQobmV3IEJhKHt0YWc6Mn0pKSxlPT5lLnRpY2tJZCksdGhpcy50aWNrTGluZUdyb3VwU2VsZWN0aW9uLnVwZGF0ZSh0LGU9PmUuYXBwZW5kQ2hpbGQobmV3IEJhKHt0YWc6MH0pKSxlPT5lLnRpY2tJZCksdGhpcy50aWNrTGFiZWxHcm91cFNlbGVjdGlvbi51cGRhdGUodC5tYXAoZT0+dGhpcy5nZXRUaWNrTGFiZWxQcm9wcyhlLGkpKSxlPT5lLmFwcGVuZENoaWxkKG5ldyBlbih7dGFnOjF9KSksZT0+ZS50aWNrSWQpfXVwZGF0ZUF4aXNMaW5lKCl7Y29uc3R7bGluZTplfT10aGlzLHQ9ZS5lbmFibGVkP2Uud2lkdGg6MDt0aGlzLmxpbmVOb2RlLnNldFByb3BlcnRpZXMoe3N0cm9rZTplLmNvbG9yLHN0cm9rZVdpZHRoOnR9KX11cGRhdGVHcmlkTGluZXMoZSl7Y29uc3R7Z3JpZExpbmU6e3N0eWxlOnQsd2lkdGg6aX0sZ3JpZFBhZGRpbmc6cyxncmlkTGVuZ3RoOnJ9PXRoaXM7MCE9PXImJjAhPT10Lmxlbmd0aCYmdGhpcy5ncmlkTGluZUdyb3VwU2VsZWN0aW9uLmVhY2goKG8sbixhKT0+e2NvbnN0e3N0cm9rZTpsLGxpbmVEYXNoOmR9PXRbYSV0Lmxlbmd0aF07by5zZXRQcm9wZXJ0aWVzKHt4MTpzLHgyOi1lKnIrcyxmaWxsOnZvaWQgMCxzdHJva2U6bCxzdHJva2VXaWR0aDppLGxpbmVEYXNoOmR9KX0pfXVwZGF0ZUxhYmVscygpe2NvbnN0e2xhYmVsOmV9PXRoaXM7ZS5lbmFibGVkJiZ0aGlzLnRpY2tMYWJlbEdyb3VwU2VsZWN0aW9uLmVhY2goKGUsdCk9PntlLnNldFByb3BlcnRpZXModCxbImZpbGwiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJmb250U3R5bGUiLCJmb250V2VpZ2h0IiwidGV4dCIsInRleHRBbGlnbiIsInRleHRCYXNlbGluZSJdKX0pfXdyYXBMYWJlbHMoZSx0LGkpe2NvbnN0e3BhcmFsbGVsOnMsbWF4V2lkdGg6cixtYXhIZWlnaHQ6b309dGhpcy5sYWJlbDtsZXQgbj10aGlzLm1heFRoaWNrbmVzcyxhPU1hdGgucm91bmQodGhpcy5jYWxjdWxhdGVBdmFpbGFibGVSYW5nZSgpL2UubGFiZWxDb3VudCk7cmV0dXJuIHMmJihbbixhXT1bYSxuXSksZS50aWNrcy5mb3JFYWNoKGU9Pntjb25zdHt0ZXh0OnR9PWVuLndyYXAoZS50aWNrTGFiZWwsbnVsbCE9cj9yOm4sbnVsbCE9bz9vOmEsaSwiaHlwaGVuYXRlIik7ZS50aWNrTGFiZWw9dH0pLHt0aWNrRGF0YTplLGluZGV4OnQsYXV0b1JvdGF0aW9uOjAsdGVybWluYXRlOiEwfX11cGRhdGVUaXRsZShlKXtjb25zdHtyb3RhdGlvbjp0LHRpdGxlOmksX3RpdGxlQ2FwdGlvbjpzLGxpbmVOb2RlOnIsdGlja0xpbmVHcm91cDpvLHRpY2tMYWJlbEdyb3VwOm59PXRoaXM7aWYoIWkpcmV0dXJuIHZvaWQocy5lbmFibGVkPSExKTtsZXQgYT0wO2lmKGkuZW5hYmxlZCYmZS5hbnlUaWNrVmlzaWJsZSl7Y29uc3QgZT1Pbi5jb21wdXRlQkJveChbbyxuLHJdKTthKz0oMD09PXQ/ZS53aWR0aDplLmhlaWdodCkrKHRoaXMudGlja0xhYmVsR3JvdXAudmlzaWJsZT8wOnRoaXMuc2VyaWVzQXJlYVBhZGRpbmcpfXRoaXMuc2V0VGl0bGVQcm9wcyhzLHtzcGFjaW5nOmF9KX1mb3JtYXRUaWNrKGUsdCl7dmFyIGkscztjb25zdHtsYWJlbDpyLGxhYmVsRm9ybWF0dGVyOm8sZnJhY3Rpb25EaWdpdHM6bixtb2R1bGVDdHg6e2NhbGxiYWNrQ2FjaGU6YX19PXRoaXM7aWYoci5mb3JtYXR0ZXIpe2NvbnN0IHM9bj4wP2U6U3RyaW5nKGUpO3JldHVybiBudWxsIT0oaT1hLmNhbGwoci5mb3JtYXR0ZXIse3ZhbHVlOnMsaW5kZXg6dCxmcmFjdGlvbkRpZ2l0czpuLGZvcm1hdHRlcjpvfSkpP2k6c31yZXR1cm4gbyYmbnVsbCE9KHM9YS5jYWxsKG8sZSkpP3M6U3RyaW5nKGUpfWZvcm1hdERhdHVtKGUpe3JldHVybiBTdHJpbmcoZSl9Y29tcHV0ZUJCb3goKXtyZXR1cm4gdGhpcy5heGlzR3JvdXAuY29tcHV0ZUJCb3goKX1pbml0Q3Jvc3NMaW5lKGUpe2Uuc2NhbGU9dGhpcy5zY2FsZSxlLmdyaWRMZW5ndGg9dGhpcy5ncmlkTGVuZ3RofWlzQW55U2VyaWVzQWN0aXZlKCl7cmV0dXJuIHRoaXMuYm91bmRTZXJpZXMuc29tZShlPT50aGlzLmluY2x1ZGVJbnZpc2libGVEb21haW5zfHxlLmlzRW5hYmxlZCgpKX1jbGlwVGlja0xpbmVzKGUsdCxpLHMpe3RoaXMudGlja0xpbmVHcm91cC5zZXRDbGlwUmVjdEluR3JvdXBDb29yZGluYXRlU3BhY2UobmV3IG9yKGUsdCxpLHMpKX1jbGlwR3JpZChlLHQsaSxzKXt0aGlzLmdyaWRHcm91cC5zZXRDbGlwUmVjdEluR3JvdXBDb29yZGluYXRlU3BhY2UobmV3IG9yKGUsdCxpLHMpKX1jYWxjdWxhdGVQYWRkaW5nKGUsdCxpKXtjb25zdCBzPS4wMSpNYXRoLmFicyhpP3Q6ZSk7cmV0dXJuW3Msc119Z2V0VGl0bGVGb3JtYXR0ZXJQYXJhbXMoKXt2YXIgZTtjb25zdCB0PXRoaXMuYm91bmRTZXJpZXMucmVkdWNlKChlLHQpPT57Y29uc3QgaT10LmdldEtleXModGhpcy5kaXJlY3Rpb24pLHM9dC5nZXROYW1lcyh0aGlzLmRpcmVjdGlvbik7Zm9yKGxldCB0PTA7dDxpLmxlbmd0aDt0KyspZS5wdXNoKHtrZXk6aVt0XSxuYW1lOnNbdF19KTtyZXR1cm4gZX0sW10pO3JldHVybntkaXJlY3Rpb246dGhpcy5kaXJlY3Rpb24sYm91bmRTZXJpZXM6dCxkZWZhdWx0VmFsdWU6bnVsbD09KGU9dGhpcy50aXRsZSk/dm9pZCAwOmUudGV4dH19bm9ybWFsaXNlRGF0YURvbWFpbihlKXtyZXR1cm57ZG9tYWluOlsuLi5lXSxjbGlwcGVkOiExfX1nZXRMYXlvdXRTdGF0ZSgpe3JldHVybiBtKHtyZWN0OnRoaXMuY29tcHV0ZUJCb3goKSxncmlkUGFkZGluZzp0aGlzLmdyaWRQYWRkaW5nLHNlcmllc0FyZWFQYWRkaW5nOnRoaXMuc2VyaWVzQXJlYVBhZGRpbmcsdGlja1NpemU6dGhpcy5nZXRUaWNrU2l6ZSgpfSx0aGlzLmxheW91dCl9Z2V0TW9kdWxlTWFwKCl7cmV0dXJuIHRoaXMubW9kdWxlTWFwfWNyZWF0ZU1vZHVsZUNvbnRleHQoKXtyZXR1cm4gbnVsbCE9dGhpcy5heGlzQ29udGV4dHx8KHRoaXMuYXhpc0NvbnRleHQ9dGhpcy5jcmVhdGVBeGlzQ29udGV4dCgpKSxmKG0oe30sdGhpcy5tb2R1bGVDdHgpLHtwYXJlbnQ6dGhpcy5heGlzQ29udGV4dH0pfWNyZWF0ZUF4aXNDb250ZXh0KCl7cmV0dXJue2F4aXNJZDp0aGlzLmlkLGRpcmVjdGlvbjp0aGlzLmRpcmVjdGlvbixjb250aW51b3VzOlJuLmlzKHRoaXMuc2NhbGUpLGtleXM6KCk9PnRoaXMuYm91bmRTZXJpZXMuZmxhdE1hcChlPT5lLmdldEtleXModGhpcy5kaXJlY3Rpb24pKSxzY2FsZVZhbHVlRm9ybWF0dGVyOmU9Pnt2YXIgdCxpO3JldHVybiBudWxsPT0oaT0odD10aGlzLnNjYWxlKS50aWNrRm9ybWF0KT92b2lkIDA6aS5jYWxsKHQse3NwZWNpZmllcjplfSl9LHNjYWxlQmFuZHdpZHRoOigpPT57dmFyIGU7cmV0dXJuIG51bGwhPShlPXRoaXMuc2NhbGUuYmFuZHdpZHRoKT9lOjB9LHNjYWxlQ29udmVydDplPT50aGlzLnNjYWxlLmNvbnZlcnQoZSksc2NhbGVJbnZlcnQ6ZT0+e3ZhciB0LGk7cmV0dXJuIG51bGw9PShpPSh0PXRoaXMuc2NhbGUpLmludmVydCk/dm9pZCAwOmkuY2FsbCh0LGUpfX19YW5pbWF0ZVJlYWR5VXBkYXRlKGUpe2NvbnN0e2FuaW1hdGlvbk1hbmFnZXI6dH09dGhpcy5tb2R1bGVDdHgsaT10bChRYSh0aGlzKSk7X3IodGhpcy5pZCwiYXhpcy1ncm91cCIsdCxbdGhpcy5heGlzR3JvdXBdLGkuZ3JvdXApLF9yKHRoaXMuaWQsImxpbmUiLHQsW3RoaXMubGluZU5vZGVdLGkubGluZSksX3IodGhpcy5pZCwibGluZS1wYXRocyIsdCxbdGhpcy5ncmlkTGluZUdyb3VwU2VsZWN0aW9uLHRoaXMudGlja0xpbmVHcm91cFNlbGVjdGlvbl0saS50aWNrLChlLHQpPT50LnRpY2tJZCxlKSxfcih0aGlzLmlkLCJ0aWNrLWxhYmVscyIsdCxbdGhpcy50aWNrTGFiZWxHcm91cFNlbGVjdGlvbl0saS5sYWJlbCwoZSx0KT0+dC50aWNrSWQsZSl9cmVzZXRTZWxlY3Rpb25Ob2Rlcygpe2NvbnN0e2dyaWRMaW5lR3JvdXBTZWxlY3Rpb246ZSx0aWNrTGluZUdyb3VwU2VsZWN0aW9uOnQsdGlja0xhYmVsR3JvdXBTZWxlY3Rpb246aSxsaW5lTm9kZTpzfT10aGlzLHI9UWEodGhpcyk7b2EoW3RoaXMuYXhpc0dyb3VwXSwoZSx0KT0+KHtyb3RhdGlvbjp0LnJvdGF0aW9uLHJvdGF0aW9uQ2VudGVyWDp0LnJvdGF0aW9uQ2VudGVyWCxyb3RhdGlvbkNlbnRlclk6dC5yb3RhdGlvbkNlbnRlclksdHJhbnNsYXRpb25YOnQudHJhbnNsYXRpb25YLHRyYW5zbGF0aW9uWTp0LnRyYW5zbGF0aW9uWX0pKSxvYShbZSx0XSxzbChyKSksb2EoW2ldLChlLHQpPT4oe3g6dC54LHk6dC55LHRyYW5zbGF0aW9uWTp0LnRyYW5zbGF0aW9uWSxyb3RhdGlvbjp0LnJvdGF0aW9uLHJvdGF0aW9uQ2VudGVyWDp0LnJvdGF0aW9uQ2VudGVyWH0pKSxvYShbc10sb2woKSl9Y2FsY3VsYXRlVXBkYXRlRGlmZihlLHQpe2NvbnN0IGk9bmV3IFNldCxzPW5ldyBTZXQscj17fSxvPU1hdGgubWF4KGUubGVuZ3RoLHQudGlja3MubGVuZ3RoKTtmb3IobGV0IG49MDtuPG87bisrKXtjb25zdCBvPXQudGlja3Nbbl0sYT1lW25dLGw9bnVsbD09bz92b2lkIDA6by50aWNrSWQ7cltudWxsIT1sP2w6YV09byxhIT09bCYmKHMuaGFzKGwpP3MuZGVsZXRlKGwpOmwmJmkuYWRkKGwpLGkuaGFzKGEpP2kuZGVsZXRlKGEpOmEmJnMuYWRkKGEpKX1yZXR1cm57Y2hhbmdlZDppLnNpemU+MHx8cy5zaXplPjAsYWRkZWQ6QXJyYXkuZnJvbShpLnZhbHVlcygpKSxyZW1vdmVkOkFycmF5LmZyb20ocy52YWx1ZXMoKSl9fWlzUmV2ZXJzZWQoKXtyZXR1cm4gdGhpcy5yZXZlcnNlfX07YWwuZGVmYXVsdFRpY2tNaW5TcGFjaW5nPTUwLHkoW3FyKHRvKV0sYWwucHJvdG90eXBlLCJuaWNlIiwyKSx5KFtxcih0byldLGFsLnByb3RvdHlwZSwicmV2ZXJzZSIsMikseShbcXIoRW8pXSxhbC5wcm90b3R5cGUsImtleXMiLDIpLHkoW3FyKFdvKGU9PiJvYmplY3QiPT10eXBlb2YgZSwiVGl0bGUgb2JqZWN0Iikse29wdGlvbmFsOiEwfSldLGFsLnByb3RvdHlwZSwidGl0bGUiLDIpLHkoW3VuKChlLHQsaSk9PmUub25HcmlkTGVuZ3RoQ2hhbmdlKHQsaSkpXSxhbC5wcm90b3R5cGUsImdyaWRMZW5ndGgiLDIpO3ZhciBsbD1hbCxkbD1jbGFzcyBleHRlbmRzICRhe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmF1dG9Sb3RhdGVBbmdsZT0zMzV9fTt5KFtxcih0byx7b3B0aW9uYWw6ITB9KV0sZGwucHJvdG90eXBlLCJhdXRvUm90YXRlIiwyKSx5KFtxcihsbyldLGRsLnByb3RvdHlwZSwiYXV0b1JvdGF0ZUFuZ2xlIiwyKTt2YXIgY2w9Y2xhc3MgZSBleHRlbmRzIGxse2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnRoaWNrbmVzcz0wLHRoaXMucG9zaXRpb249ImxlZnQifXN0YXRpYyBpcyh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGV9Z2V0IGRpcmVjdGlvbigpe3JldHVyblsidG9wIiwiYm90dG9tIl0uaW5jbHVkZXModGhpcy5wb3NpdGlvbik/IngiOiJ5In11cGRhdGVEaXJlY3Rpb24oKXtzd2l0Y2godGhpcy5wb3NpdGlvbil7Y2FzZSJ0b3AiOnRoaXMucm90YXRpb249LTkwLHRoaXMubGFiZWwubWlycm9yZWQ9ITAsdGhpcy5sYWJlbC5wYXJhbGxlbD0hMDticmVhaztjYXNlInJpZ2h0Ijp0aGlzLnJvdGF0aW9uPTAsdGhpcy5sYWJlbC5taXJyb3JlZD0hMCx0aGlzLmxhYmVsLnBhcmFsbGVsPSExO2JyZWFrO2Nhc2UiYm90dG9tIjp0aGlzLnJvdGF0aW9uPS05MCx0aGlzLmxhYmVsLm1pcnJvcmVkPSExLHRoaXMubGFiZWwucGFyYWxsZWw9ITA7YnJlYWs7Y2FzZSJsZWZ0Ijp0aGlzLnJvdGF0aW9uPTAsdGhpcy5sYWJlbC5taXJyb3JlZD0hMSx0aGlzLmxhYmVsLnBhcmFsbGVsPSExfXRoaXMuYXhpc0NvbnRleHQmJih0aGlzLmF4aXNDb250ZXh0LnBvc2l0aW9uPXRoaXMucG9zaXRpb24sdGhpcy5heGlzQ29udGV4dC5kaXJlY3Rpb249dGhpcy5kaXJlY3Rpb24pfXVwZGF0ZShlLHQpe3JldHVybiB0aGlzLnVwZGF0ZURpcmVjdGlvbigpLHN1cGVyLnVwZGF0ZShlLHQpfWNhbGN1bGF0ZUxheW91dChlKXtyZXR1cm4gdGhpcy51cGRhdGVEaXJlY3Rpb24oKSxzdXBlci5jYWxjdWxhdGVMYXlvdXQoZSl9Y3JlYXRlQXhpc0NvbnRleHQoKXtyZXR1cm4gZihtKHt9LHN1cGVyLmNyZWF0ZUF4aXNDb250ZXh0KCkpLHtwb3NpdGlvbjp0aGlzLnBvc2l0aW9ufSl9YXNzaWduQ3Jvc3NMaW5lQXJyYXlDb25zdHJ1Y3RvcihlKXt3bihlLGlhKX1jcmVhdGVMYWJlbCgpe3JldHVybiBuZXcgZGx9fTt5KFtxcihubyldLGNsLnByb3RvdHlwZSwidGhpY2tuZXNzIiwyKSx5KFtxcihBbyldLGNsLnByb3RvdHlwZSwicG9zaXRpb24iLDIpO3ZhciBobD1jbCx1bD1jbGFzcyBleHRlbmRzIGhse2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsbmV3IFhyKSx0aGlzLl9wYWRkaW5nT3ZlcnJpZGVFbmFibGVkPSExLHRoaXMuZ3JvdXBQYWRkaW5nSW5uZXI9LjEsdGhpcy5pbmNsdWRlSW52aXNpYmxlRG9tYWlucz0hMH1zZXQgcGFkZGluZ0lubmVyKGUpe3RoaXMuX3BhZGRpbmdPdmVycmlkZUVuYWJsZWQ9ITAsdGhpcy5zY2FsZS5wYWRkaW5nSW5uZXI9ZX1nZXQgcGFkZGluZ0lubmVyKCl7cmV0dXJuIHRoaXMuX3BhZGRpbmdPdmVycmlkZUVuYWJsZWQ9ITAsdGhpcy5zY2FsZS5wYWRkaW5nSW5uZXJ9c2V0IHBhZGRpbmdPdXRlcihlKXt0aGlzLnNjYWxlLnBhZGRpbmdPdXRlcj1lfWdldCBwYWRkaW5nT3V0ZXIoKXtyZXR1cm4gdGhpcy5zY2FsZS5wYWRkaW5nT3V0ZXJ9bm9ybWFsaXNlRGF0YURvbWFpbihlKXtjb25zdCB0PVtdLGk9bmV3IFNldDtmb3IoY29uc3QgcyBvZiBlKXtjb25zdCBlPXMgaW5zdGFuY2VvZiBEYXRlP3MuZ2V0VGltZSgpOnM7aS5oYXMoZSl8fChpLmFkZChlKSx0LnB1c2gocykpfXJldHVybntkb21haW46dCxjbGlwcGVkOiExfX1jYWxjdWxhdGVEb21haW4oKXtpZighdGhpcy5fcGFkZGluZ092ZXJyaWRlRW5hYmxlZCl7Y29uc3QgZT10aGlzLmJvdW5kU2VyaWVzLm1hcChlPT57dmFyIHQ7cmV0dXJuIG51bGw9PSh0PWUuZ2V0QmFuZFNjYWxlUGFkZGluZyk/dm9pZCAwOnQuY2FsbChlKX0pLmZpbHRlcihlPT5udWxsIT1lKTtlLmxlbmd0aD4wJiYodGhpcy5zY2FsZS5wYWRkaW5nSW5uZXI9TWF0aC5taW4oLi4uZS5tYXAoZT0+ZS5pbm5lcikpLHRoaXMuc2NhbGUucGFkZGluZ091dGVyPU1hdGgubWF4KC4uLmUubWFwKGU9PmUub3V0ZXIpKSl9cmV0dXJuIHN1cGVyLmNhbGN1bGF0ZURvbWFpbigpfX07dWwuY2xhc3NOYW1lPSJDYXRlZ29yeUF4aXMiLHVsLnR5cGU9ImNhdGVnb3J5Iix5KFtxcihhbyldLHVsLnByb3RvdHlwZSwiZ3JvdXBQYWRkaW5nSW5uZXIiLDIpO3ZhciBwbD1jbGFzc3tjb25zdHJ1Y3RvcihlPSIiLHQsaT0wKXt0aGlzLng9MCx0aGlzLnk9MCx0aGlzLnN1YnRyZWVMZWZ0PU5hTix0aGlzLnN1YnRyZWVSaWdodD1OYU4sdGhpcy5zY3JlZW5YPTAsdGhpcy5zY3JlZW5ZPTAsdGhpcy5jaGlsZHJlbj1bXSx0aGlzLmxlYWZDb3VudD0wLHRoaXMucHJlbGltPTAsdGhpcy5tb2Q9MCx0aGlzLmFuY2VzdG9yPXRoaXMsdGhpcy5jaGFuZ2U9MCx0aGlzLnNoaWZ0PTAsdGhpcy5sYWJlbD1lLHRoaXMucGFyZW50PXQsdGhpcy5kZXB0aD10P3QuZGVwdGgrMTowLHRoaXMubnVtYmVyPWl9Z2V0TGVmdFNpYmxpbmcoKXtyZXR1cm4gdGhpcy5udW1iZXI+MCYmdGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuY2hpbGRyZW5bdGhpcy5udW1iZXItMV06dm9pZCAwfWdldExlZnRtb3N0U2libGluZygpe3JldHVybiB0aGlzLm51bWJlcj4wJiZ0aGlzLnBhcmVudD90aGlzLnBhcmVudC5jaGlsZHJlblswXTp2b2lkIDB9bmV4dExlZnQoKXtyZXR1cm4gdGhpcy5jaGlsZHJlbj90aGlzLmNoaWxkcmVuWzBdOnRoaXMudGhyZWFkfW5leHRSaWdodCgpe3JldHVybiB0aGlzLmNoaWxkcmVuP3RoaXMuY2hpbGRyZW5bdGhpcy5jaGlsZHJlbi5sZW5ndGgtMV06dGhpcy50aHJlYWR9Z2V0U2libGluZ3MoKXtyZXR1cm4gdGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuY2hpbGRyZW4uZmlsdGVyKChlLHQpPT50IT09dGhpcy5udW1iZXIpOltdfX07ZnVuY3Rpb24gZ2woZSx0PSEwKXtjb25zdCBpPW5ldyBwbDtsZXQgcz0wO3JldHVybiB0JiZlLmZvckVhY2goZT0+cz1NYXRoLm1heChzLGUubGFiZWxzLmxlbmd0aCkpLGUuZm9yRWFjaChlPT57aWYodClmb3IoO2UubGFiZWxzLmxlbmd0aDxzOyllLmxhYmVscy51bnNoaWZ0KCIiKTshZnVuY3Rpb24oZSx0KXtjb25zdCBpPXQubGFiZWxzLnNsaWNlKCkucmV2ZXJzZSgpLHM9aS5sZW5ndGgtMTtpLmZvckVhY2goKHQsaSk9Pntjb25zdCByPWUuY2hpbGRyZW4sbz1yLmZpbmQoZT0+ZS5sYWJlbD09PXQpLG49aSE9PXM7aWYobyYmbillPW87ZWxzZXtjb25zdCBpPW5ldyBwbCh0LGUpO2kubnVtYmVyPXIubGVuZ3RoLHIucHVzaChpKSxuJiYoZT1pKX19KX0oaSxlKX0pLGl9ZnVuY3Rpb24gbWwoZSx0LGkpe2NvbnN0IHM9aS8odC5udW1iZXItZS5udW1iZXIpO3QuY2hhbmdlLT1zLHQuc2hpZnQrPWksZS5jaGFuZ2UrPXMsdC5wcmVsaW0rPWksdC5tb2QrPWl9ZnVuY3Rpb24gZmwoZSx0LGkpe3JldHVybiB0LmdldFNpYmxpbmdzKCkuaW5kZXhPZihlLmFuY2VzdG9yKT49MD9lLmFuY2VzdG9yOml9ZnVuY3Rpb24gdmwoZSx0KXtjb25zdCBpPWUuY2hpbGRyZW47aWYoaS5sZW5ndGgpe2xldCBzPWlbMF07aS5mb3JFYWNoKGU9Pnt2bChlLHQpLHM9ZnVuY3Rpb24oZSx0LGkpe2NvbnN0IHM9ZS5nZXRMZWZ0U2libGluZygpO2lmKHMpe2xldCByPWUsbz1lLG49cyxhPW8uZ2V0TGVmdG1vc3RTaWJsaW5nKCksbD1vLm1vZCxkPXIubW9kLGM9bi5tb2QsaD1hLm1vZDtmb3IoO24ubmV4dFJpZ2h0KCkmJm8ubmV4dExlZnQoKTspe249bi5uZXh0UmlnaHQoKSxvPW8ubmV4dExlZnQoKSxhPWEubmV4dExlZnQoKSxyPXIubmV4dFJpZ2h0KCksci5hbmNlc3Rvcj1lO2NvbnN0IHM9bi5wcmVsaW0rYy0oby5wcmVsaW0rbCkraTtzPjAmJihtbChmbChuLGUsdCksZSxzKSxsKz1zLGQrPXMpLGMrPW4ubW9kLGwrPW8ubW9kLGgrPWEubW9kLGQrPXIubW9kfW4ubmV4dFJpZ2h0KCkmJiFyLm5leHRSaWdodCgpPyhyLnRocmVhZD1uLm5leHRSaWdodCgpLHIubW9kKz1jLWQpOihvLm5leHRMZWZ0KCkmJiFhLm5leHRMZWZ0KCkmJihhLnRocmVhZD1vLm5leHRMZWZ0KCksYS5tb2QrPWwtaCksdD1lKX1yZXR1cm4gdH0oZSxzLHQpfSksZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmNoaWxkcmVuO2lmKHQpe2xldCBlPTAsaT0wO2ZvcihsZXQgcz10Lmxlbmd0aC0xO3M+PTA7cy0tKXtjb25zdCByPXRbc107ci5wcmVsaW0rPWUsci5tb2QrPWUsaSs9ci5jaGFuZ2UsZSs9ci5zaGlmdCtpfX19KGUpO2NvbnN0IHI9KGlbMF0ucHJlbGltK2kuYXQoLTEpLnByZWxpbSkvMixvPWUuZ2V0TGVmdFNpYmxpbmcoKTtvPyhlLnByZWxpbT1vLnByZWxpbSt0LGUubW9kPWUucHJlbGltLXIpOmUucHJlbGltPXJ9ZWxzZXtjb25zdCBpPWUuZ2V0TGVmdFNpYmxpbmcoKTtlLnByZWxpbT1pP2kucHJlbGltK3Q6MH19dmFyIENsPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy50b3A9MS8wLHRoaXMucmlnaHQ9LTEvMCx0aGlzLmJvdHRvbT0tMS8wLHRoaXMubGVmdD0xLzB9dXBkYXRlKGUsdCl7Y29uc3R7eDppLHk6c309dChlKTtpPnRoaXMucmlnaHQmJih0aGlzLnJpZ2h0PWkpLGk8dGhpcy5sZWZ0JiYodGhpcy5sZWZ0PWkpLHM+dGhpcy5ib3R0b20mJih0aGlzLmJvdHRvbT1zKSxzPHRoaXMudG9wJiYodGhpcy50b3A9cyl9fTtmdW5jdGlvbiB5bChlKXtjb25zdCB0PW5ldyBTbDtyZXR1cm4gdmwoZSwxKSxmdW5jdGlvbiBlKHQsaSxzKXt0Lng9dC5wcmVsaW0raSx0Lnk9dC5kZXB0aCxzLnVwZGF0ZSh0KSx0LmNoaWxkcmVuLmZvckVhY2gocj0+ZShyLGkrdC5tb2QscykpfShlLC1lLnByZWxpbSx0KSxmdW5jdGlvbiBlKHQpe2NvbnN0IGk9dC5jaGlsZHJlbjtsZXQgcz0wO2kuZm9yRWFjaCh0PT57ZSh0KSx0LmNoaWxkcmVuLmxlbmd0aD9zKz10LmxlYWZDb3VudDpzKyt9KSx0LmxlYWZDb3VudD1zLGkubGVuZ3RoPyh0LnN1YnRyZWVMZWZ0PWlbMF0uc3VidHJlZUxlZnQsdC5zdWJ0cmVlUmlnaHQ9aVt0LmNoaWxkcmVuLmxlbmd0aC0xXS5zdWJ0cmVlUmlnaHQsdC54PSh0LnN1YnRyZWVMZWZ0K3Quc3VidHJlZVJpZ2h0KS8yKToodC5zdWJ0cmVlTGVmdD10LngsdC5zdWJ0cmVlUmlnaHQ9dC54KX0oZSksdH12YXIgU2w9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmRpbWVuc2lvbnM9bmV3IENsLHRoaXMubGVhZkNvdW50PTAsdGhpcy5ub2Rlcz1bXSx0aGlzLmxlYWZOb2Rlcz1bXSx0aGlzLm5vbkxlYWZOb2Rlcz1bXSx0aGlzLmRlcHRoPTB9dXBkYXRlKGUpe3RoaXMuZGltZW5zaW9ucy51cGRhdGUoZSxlPT4oe3g6ZS54LHk6ZS55fSkpLGUuY2hpbGRyZW4ubGVuZ3RoP3RoaXMubm9uTGVhZk5vZGVzLnB1c2goZSk6KHRoaXMubGVhZkNvdW50KyssdGhpcy5sZWFmTm9kZXMucHVzaChlKSksZS5kZXB0aD50aGlzLmRlcHRoJiYodGhpcy5kZXB0aD1lLmRlcHRoKSx0aGlzLm5vZGVzLnB1c2goZSl9cmVzaXplKGUsdCxpPTAscz0wLHI9ITEpe2NvbnN0IG89dGhpcy5sZWFmQ291bnQtMSxuPXRoaXMuZGVwdGgsYT10aGlzLmRpbWVuc2lvbnM7bGV0IGw9MSxkPTE7aWYoZT4wJiZvKXtjb25zdCB0PShhLnJpZ2h0LWEubGVmdCkvbztsPWUvby90LHImJihsPS1sKX1pZih0PjAmJm4pe2NvbnN0IGU9KGEuYm90dG9tLWEudG9wKS9uO2Q9dC9uL2V9Y29uc3QgYz1uZXcgQ2w7dGhpcy5ub2Rlcy5mb3JFYWNoKGU9PntlLnNjcmVlblg9ZS54KmwsZS5zY3JlZW5ZPWUueSpkLGMudXBkYXRlKGUsZT0+KHt4OmUuc2NyZWVuWCx5OmUuc2NyZWVuWX0pKX0pO2NvbnN0IGg9LWMubGVmdCx1PS1jLnRvcDt0aGlzLm5vZGVzLmZvckVhY2goZT0+e2Uuc2NyZWVuWCs9aCtpLGUuc2NyZWVuWSs9dStzfSl9fSx3bD1jbGFzcyBleHRlbmRzICRhe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmdyaWQ9ITF9fTt5KFtxcih0byldLHdsLnByb3RvdHlwZSwiZ3JpZCIsMik7dmFyIGJsPWNsYXNzIGV4dGVuZHMgaGx7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSxuZXcgWHIpLHRoaXMudGlja1NjYWxlPW5ldyBYcix0aGlzLmxpbmU9bmV3IFhhLHRoaXMubGFiZWw9bmV3IHdsLHRoaXMubGFiZWxDb2xvcj0icmdiYSg4NywgODcsIDg3LCAxKSIsdGhpcy5pbmNsdWRlSW52aXNpYmxlRG9tYWlucz0hMDtjb25zdHt0aWNrTGluZUdyb3VwOnQsdGlja0xhYmVsR3JvdXA6aSxncmlkTGluZUdyb3VwOnMsdGlja1NjYWxlOnIsc2NhbGU6b309dGhpcztvLnBhZGRpbmdPdXRlcj0uMSxvLnBhZGRpbmdJbm5lcj0yKm8ucGFkZGluZ091dGVyLHRoaXMucmVmcmVzaFNjYWxlKCksci5wYWRkaW5nSW5uZXI9MSxyLnBhZGRpbmdPdXRlcj0wLHRoaXMuZ3JpZExpbmVTZWxlY3Rpb249VmEuc2VsZWN0KHMsQmEpLHRoaXMuYXhpc0xpbmVTZWxlY3Rpb249VmEuc2VsZWN0KHQsQmEpLHRoaXMuc2VwYXJhdG9yU2VsZWN0aW9uPVZhLnNlbGVjdCh0LEJhKSx0aGlzLmxhYmVsU2VsZWN0aW9uPVZhLnNlbGVjdChpLGVuKX11cGRhdGVSYW5nZSgpe2NvbnN0e3JhbmdlOmUsdmlzaWJsZVJhbmdlOnQsc2NhbGU6aX09dGhpcyxzPShlWzFdLWVbMF0pLyh0WzFdLXRbMF0pLHI9cyp0WzBdLG89ZVswXS1yO3RoaXMudGlja1NjYWxlLnJhbmdlPWkucmFuZ2U9W28sbytzXSx0aGlzLnJlc2l6ZVRpY2tUcmVlKCl9cmVzaXplVGlja1RyZWUoKXt2YXIgZTtjb25zdCB0PXRoaXMuc2NhbGUsaT10LmRvbWFpbi5sZW5ndGg/W3QuY29udmVydCh0LmRvbWFpblswXSksdC5jb252ZXJ0KHQuZG9tYWluW3QuZG9tYWluLmxlbmd0aC0xXSldOnQucmFuZ2Uscz10aGlzLnRpY2tUcmVlTGF5b3V0LHI9dGhpcy5saW5lSGVpZ2h0O3MmJnMucmVzaXplKE1hdGguYWJzKGlbMV0taVswXSkscy5kZXB0aCpyLChNYXRoLm1pbihpWzBdLGlbMV0pfHwwKSsobnVsbCE9KGU9dC5iYW5kd2lkdGgpP2U6MCkvMiwtcy5kZXB0aCpyLGlbMV0taVswXTwwKX1nZXQgbGluZUhlaWdodCgpe3JldHVybiAxLjUqdGhpcy5sYWJlbC5mb250U2l6ZX1vbkdyaWRWaXNpYmlsaXR5Q2hhbmdlKCl7dGhpcy5ncmlkTGluZVNlbGVjdGlvbi5jbGVhcigpLHRoaXMubGFiZWxTZWxlY3Rpb24uY2xlYXIoKX1jYWxjdWxhdGVEb21haW4oKXt2YXIgZTtjb25zdHtkaXJlY3Rpb246dH09dGhpcztsZXQgaT1udWxsO2NvbnN0IHM9dGhpcy5ib3VuZFNlcmllcy5maWx0ZXIoZT0+ZS52aXNpYmxlKS5mbGF0TWFwKGU9PntpZigieSI9PT10fHxpKXJldHVybiBlLmdldERvbWFpbih0KTtpZihudWxsPT09aSl7Y29uc3Qgcz1lLmdldERvbWFpbih0KTtyZXR1cm4gaT1XZShzWzBdKSxzfXJldHVybltdfSk7dGhpcy5zZXREb21haW4obnVsbCE9KGU9RXMocykpP2U6T3MocykpO2NvbnN0e2RvbWFpbjpyfT10aGlzLmRhdGFEb21haW47dGhpcy50aWNrVHJlZUxheW91dD15bChnbChyKSksdGhpcy50aWNrU2NhbGUuZG9tYWluPXIuY29uY2F0KCIiKSx0aGlzLnJlc2l6ZVRpY2tUcmVlKCl9dXBkYXRlKCl7dGhpcy5jb21wdXRlZExheW91dCYmKHRoaXMudXBkYXRlUG9zaXRpb24oKSx0aGlzLnVwZGF0ZVRpdGxlQ2FwdGlvbigpLHRoaXMudXBkYXRlQ2F0ZWdvcnlMYWJlbHMoKSx0aGlzLnVwZGF0ZVNlcGFyYXRvcnMoKSx0aGlzLnVwZGF0ZUF4aXNMaW5lcygpLHRoaXMudXBkYXRlQ2F0ZWdvcnlHcmlkTGluZXMoKSx0aGlzLnJlc2V0U2VsZWN0aW9uTm9kZXMoKSl9dXBkYXRlVGl0bGVDYXB0aW9uKCl7Y29uc3R7X3RpdGxlQ2FwdGlvbjplfT10aGlzO2Uubm9kZS52aXNpYmxlPSExfXVwZGF0ZUNhdGVnb3J5TGFiZWxzKCl7aWYoIXRoaXMuY29tcHV0ZWRMYXlvdXQpcmV0dXJuO2NvbnN0e3RpY2tMYWJlbExheW91dDplfT10aGlzLmNvbXB1dGVkTGF5b3V0O3RoaXMubGFiZWxTZWxlY3Rpb24udXBkYXRlKGUpLmVhY2goKGUsdCk9PntlLnNldFByb3BlcnRpZXModCl9KX11cGRhdGVTZXBhcmF0b3JzKCl7aWYoIXRoaXMuY29tcHV0ZWRMYXlvdXQpcmV0dXJuO2NvbnN0e3NlcGFyYXRvckxheW91dDplfT10aGlzLmNvbXB1dGVkTGF5b3V0LHtyYW5nZTp0fT10aGlzO3RoaXMuc2VwYXJhdG9yU2VsZWN0aW9uLnVwZGF0ZShlKS5lYWNoKChlLGkpPT57ZS54MT1pLngxLGUueDI9aS54MixlLnkxPWkueSxlLnkyPWkueSxlLnZpc2libGU9aS55Pj10WzBdLTFlLTcmJmkueTw9dFsxXSsxZS03LGUuc3Ryb2tlPXRoaXMudGljay5jb2xvcixlLmZpbGw9dm9pZCAwLGUuc3Ryb2tlV2lkdGg9MX0pfXVwZGF0ZUF4aXNMaW5lcygpe2lmKCF0aGlzLmNvbXB1dGVkTGF5b3V0KXJldHVybjtjb25zdHtheGlzTGluZUxheW91dDplfT10aGlzLmNvbXB1dGVkTGF5b3V0O3RoaXMuYXhpc0xpbmVTZWxlY3Rpb24udXBkYXRlKGUpLmVhY2goKGUsdCk9PntlLnNldFByb3BlcnRpZXMoZihtKHt9LHQpLHtzdHJva2U6dGhpcy5saW5lLmNvbG9yLHN0cm9rZVdpZHRoOnRoaXMubGluZS53aWR0aH0pKSxlLngxPXQueCxlLngyPXQueCxlLnkxPXQueTEsZS55Mj10LnkyLGUuc3Ryb2tlV2lkdGg9dGhpcy5saW5lLndpZHRoLGUuc3Ryb2tlPXRoaXMubGluZS5jb2xvcn0pfXVwZGF0ZUNhdGVnb3J5R3JpZExpbmVzKCl7Y29uc3R7Z3JpZExlbmd0aDplLGdyaWRMaW5lOnQsbGFiZWw6aSxyYW5nZTpzLHRpY2tTY2FsZTpyfT10aGlzLG89ci50aWNrcygpLG49aS5nZXRTaWRlRmxhZygpLGE9dGhpcy5ncmlkTGluZVNlbGVjdGlvbi51cGRhdGUoZT9vOltdKTtpZihlKXtjb25zdHt3aWR0aDppLHN0eWxlOm99PXQsbD1vLmxlbmd0aDthLmVhY2goKHQsYSxkKT0+e2NvbnN0IGM9TWF0aC5yb3VuZChyLmNvbnZlcnQoYSkpO3QueDE9MCx0LngyPS1uKmUsdC55MT1jLHQueTI9Yyx0LnZpc2libGU9Yz49c1swXSYmYzw9c1sxXTtjb25zdHtzdHJva2U6aCxsaW5lRGFzaDp1fT1vW2QlbF07dC5zdHJva2U9aCx0LnN0cm9rZVdpZHRoPWksdC5saW5lRGFzaD11LHQuZmlsbD12b2lkIDB9KX19Y29tcHV0ZUxheW91dCgpe3RoaXMudXBkYXRlRGlyZWN0aW9uKCksdGhpcy5jYWxjdWxhdGVEb21haW4oKSx0aGlzLnVwZGF0ZVJhbmdlKCk7Y29uc3R7c2NhbGU6ZSxsYWJlbDp0LGxhYmVsOntwYXJhbGxlbDppfSxtb2R1bGVDdHg6e2NhbGxiYWNrQ2FjaGU6c30scmFuZ2U6cix0aXRsZTpvLHRpdGxlOntmb3JtYXR0ZXI6bj0oZT0+ZS5kZWZhdWx0VmFsdWUpfT17fX09dGhpcyxhPWUucmFuZ2VbMF0sbD1lLnJhbmdlWzFdLGQ9TWF0aC5hYnMobC1hKS9lLmRvbWFpbi5sZW5ndGh8fDAsYz1NYXRoLmNlaWwodC5mb250U2l6ZS9kKSxoPXpyKHRoaXMucm90YXRpb24pLHU9TWF0aC5hYnMoTWF0aC5jb3MoaCkpPDFlLTgscD10LmdldFNpZGVGbGFnKCksZz10aGlzLmxpbmVIZWlnaHQsdj10aGlzLnRpY2tUcmVlTGF5b3V0LEM9ZS50aWNrcygpLHk9dj92Lm5vZGVzOltdLFM9ISF2JiZ2LmRlcHRoPjEse2RlZmF1bHRSb3RhdGlvbjp3LGNvbmZpZ3VyZWRSb3RhdGlvbjpiLHBhcmFsbGVsRmxpcEZsYWc6RX09TW4oe3JvdGF0aW9uOnQucm90YXRpb24scGFyYWxsZWw6aSxyZWd1bGFyRmxpcFJvdGF0aW9uOldyKGgtTWF0aC5QSS8yKSxwYXJhbGxlbEZsaXBSb3RhdGlvbjpXcihoKX0pLFI9W10seD1uZXcgTWFwO2xldCBUPTA7Y29uc3QgRD1uZXcgZW4sTz0oZSxpKT0+e3ZhciBhO2lmKEQuc2V0UHJvcGVydGllcyh7ZmlsbDp0LmNvbG9yLGZvbnRGYW1pbHk6dC5mb250RmFtaWx5LGZvbnRTaXplOnQuZm9udFNpemUsZm9udFN0eWxlOnQuZm9udFN0eWxlLGZvbnRXZWlnaHQ6dC5mb250V2VpZ2h0LHRleHRBbGlnbjoiY2VudGVyIix0ZXh0QmFzZWxpbmU6LTE9PT1FPyJib3R0b20iOiJoYW5naW5nIix0cmFuc2xhdGlvblg6ZS5zY3JlZW5ZLS4yNSp0LmZvbnRTaXplLHRyYW5zbGF0aW9uWTplLnNjcmVlblh9KSwwPT09aSl7aWYoISgobnVsbD09bz92b2lkIDA6by5lbmFibGVkKSYmQy5sZW5ndGg+MCkpcmV0dXJuITE7Y29uc3QgaT1zLmNhbGwobix0aGlzLmdldFRpdGxlRm9ybWF0dGVyUGFyYW1zKCkpO0Quc2V0UHJvcGVydGllcyh7ZmlsbDpvLmNvbG9yLGZvbnRGYW1pbHk6by5mb250RmFtaWx5LGZvbnRTaXplOm8uZm9udFNpemUsZm9udFN0eWxlOm8uZm9udFN0eWxlLGZvbnRXZWlnaHQ6by5mb250V2VpZ2h0LHRleHQ6aSx0ZXh0QmFzZWxpbmU6ImhhbmdpbmciLHRyYW5zbGF0aW9uWDplLnNjcmVlblktLjI1KnQuZm9udFNpemUsdHJhbnNsYXRpb25ZOmUuc2NyZWVuWH0pfWVsc2V7aWYoaSVjIT0wKXJldHVybiExO2lmKCEoZS5zY3JlZW5YPj1yWzBdJiZlLnNjcmVlblg8PXJbMV0pKXJldHVybiExO3QuZm9ybWF0dGVyP0QudGV4dD1udWxsIT0oYT1zLmNhbGwodC5mb3JtYXR0ZXIse3ZhbHVlOlN0cmluZyhlLmxhYmVsKSxpbmRleDppfSkpP2E6U3RyaW5nKGUubGFiZWwpOkQudGV4dD1TdHJpbmcoZS5sYWJlbCl9cmV0dXJuITB9O3kuZm9yRWFjaCgoZSx0KT0+e2lmKCFPKGUsdCkpcmV0dXJuO2NvbnN0IGk9RC5jb21wdXRlVHJhbnNmb3JtZWRCQm94KCk7aWYoIWkpcmV0dXJuO3guc2V0KHQsaSk7IWUuY2hpbGRyZW4ubGVuZ3RoJiZpLndpZHRoPlQmJihUPWkud2lkdGgpfSk7Y29uc3QgQT1wKnQucGFkZGluZyxQPXRoaXMubGFiZWwuZ3JpZCxNPVtdO3kuZm9yRWFjaCgoZSx0KT0+e2xldCBpPU8oZSx0KTtjb25zdCBzPXQ7RC54PUEsRC5yb3RhdGlvbkNlbnRlclg9QTtjb25zdCByPSFlLmNoaWxkcmVuLmxlbmd0aDtpZihyKUQucm90YXRpb249YixELnRleHRBbGlnbj0iZW5kIixELnRleHRCYXNlbGluZT0ibWlkZGxlIjtlbHNle0QudHJhbnNsYXRpb25YLT1ULWcrdGhpcy5sYWJlbC5wYWRkaW5nO2NvbnN0IHQ9ZS5sZWFmQ291bnQqZCxyPXguZ2V0KHMpO3ImJnIud2lkdGg+dD8oaT0hMSx4LmRlbGV0ZShzKSk6RC5yb3RhdGlvbj11P3c6LU1hdGguUEkvMn1pZihlLnBhcmVudCYmUyl7Y29uc3QgdD1yP2Uuc2NyZWVuWC1kLzI6ZS5zY3JlZW5YLWUubGVhZkNvdW50KmQvMjtpZihyKShlLm51bWJlciE9PWUuY2hpbGRyZW4ubGVuZ3RoLTF8fFApJiZNLnB1c2goe3k6dCx4MTowLHgyOi1ULTIqdGhpcy5sYWJlbC5wYWRkaW5nfSk7ZWxzZXtjb25zdCBpPS1ULTIqdGhpcy5sYWJlbC5wYWRkaW5nK2Uuc2NyZWVuWTtNLnB1c2goe3k6dCx4MTppK2cseDI6aX0pfX1sZXQgbztpZihpKXtjb25zdCBlPUQuY29tcHV0ZVRyYW5zZm9ybWVkQkJveCgpO2UmJnguc2V0KHQsZSksbz1mKG0oe30se2ZpbGw6KG49RCkuZmlsbCxmb250RmFtaWx5Om4uZm9udEZhbWlseSxmb250U2l6ZTpuLmZvbnRTaXplLGZvbnRTdHlsZTpuLmZvbnRTdHlsZSxmb250V2VpZ2h0Om4uZm9udFdlaWdodCxyb3RhdGlvbjpuLnJvdGF0aW9uLHJvdGF0aW9uQ2VudGVyWDpuLnJvdGF0aW9uQ2VudGVyWCxyb3RhdGlvbkNlbnRlclk6bi5yb3RhdGlvbkNlbnRlclksdGV4dDpuLnRleHQsdGV4dEFsaWduOm4udGV4dEFsaWduLHRleHRCYXNlbGluZTpuLnRleHRCYXNlbGluZSx0cmFuc2xhdGlvblg6bi50cmFuc2xhdGlvblgsdHJhbnNsYXRpb25ZOm4udHJhbnNsYXRpb25ZLHZpc2libGU6bi52aXNpYmxlLHg6bi54LHk6bi55fSkse3Zpc2libGU6aX0pfWVsc2UgeC5kZWxldGUodCksbz17dmlzaWJsZTppfTt2YXIgbjtSLnB1c2gobyl9KTtsZXQgTD0wO00uZm9yRWFjaChlPT5MPU1hdGgubWluKEwsZS54MikpLE0ucHVzaCh7eTpNYXRoLm1heChhLGwpLHgxOjAseDI6TH0pO2NvbnN0IEY9W10sST1bXTtNLmZvckVhY2goZT0+e2lmKGUueT49clswXS0xZS03JiZlLnk8PXJbMV0rMWUtNyl7Y29uc3R7eDE6dCx4MjppLHk6c309ZSxyPW5ldyBvcihNYXRoLm1pbih0LGkpLHMsTWF0aC5hYnModC1pKSwwKTtJLnB1c2gociksRi5wdXNoKHt4MTp0LHgyOmkseTpzfSl9fSk7Y29uc3QgTj1bXSxHPVtdLGs9dj92LmRlcHRoKzE6MTtmb3IobGV0IGU9MDtlPGs7ZSsrKXtjb25zdCB0PUMubGVuZ3RoPjAmJigwPT09ZXx8UCYmUyksaT1lPjA/LVQtMip0aGlzLmxhYmVsLnBhZGRpbmctKGUtMSkqZzowLHM9bmV3IG9yKGksTWF0aC5taW4oLi4uciksMCxNYXRoLmFicyhyWzFdLXJbMF0pKTtHLnB1c2gocyksTi5wdXNoKHt4OmkseTE6clswXSx5MjpyWzFdLHZpc2libGU6dH0pfXJldHVybntiYm94OihlPT57Y29uc3QgdD1uZXcgYXIse3JvdGF0aW9uOmksdHJhbnNsYXRpb25YOnMsdHJhbnNsYXRpb25ZOnIscm90YXRpb25DZW50ZXJYOm8scm90YXRpb25DZW50ZXJZOm59PXRoaXMuZ2V0QXhpc1RyYW5zZm9ybSgpO3JldHVybiBhci51cGRhdGVUcmFuc2Zvcm1NYXRyaXgodCwxLDEsaSxzLHIse3NjYWxpbmdDZW50ZXJYOjAsc2NhbGluZ0NlbnRlclk6MCxyb3RhdGlvbkNlbnRlclg6byxyb3RhdGlvbkNlbnRlclk6bn0pLHQudHJhbnNmb3JtQkJveChlKX0pKG9yLm1lcmdlKFsuLi54LnZhbHVlcygpLC4uLkksLi4uR10pKSx0aWNrTGFiZWxMYXlvdXQ6UixzZXBhcmF0b3JMYXlvdXQ6RixheGlzTGluZUxheW91dDpOfX1jYWxjdWxhdGVMYXlvdXQoKXtjb25zdHtheGlzTGluZUxheW91dDplLHNlcGFyYXRvckxheW91dDp0LHRpY2tMYWJlbExheW91dDppLGJib3g6c309dGhpcy5jb21wdXRlTGF5b3V0KCk7cmV0dXJuIHRoaXMuY29tcHV0ZWRMYXlvdXQ9e2F4aXNMaW5lTGF5b3V0OmUsc2VwYXJhdG9yTGF5b3V0OnQsdGlja0xhYmVsTGF5b3V0Oml9LHtiYm94OnMscHJpbWFyeVRpY2tDb3VudDp2b2lkIDB9fX07YmwuY2xhc3NOYW1lPSJHcm91cGVkQ2F0ZWdvcnlBeGlzIixibC50eXBlPSJncm91cGVkLWNhdGVnb3J5Iix5KFtxcih5byx7b3B0aW9uYWw6ITB9KV0sYmwucHJvdG90eXBlLCJsYWJlbENvbG9yIiwyKTt2YXIgRWw9Y2xhc3N7Y29uc3RydWN0b3Ioe3dpZHRoOmU9NjAwLGhlaWdodDp0PTMwMCxvdmVycmlkZURldmljZVBpeGVsUmF0aW86aX0pe3RoaXMuZW5hYmxlZD0hMCx0aGlzLl9waXhlbFJhdGlvPU5hTix0aGlzLl93aWR0aD0wLHRoaXMuX2hlaWdodD0wLHRoaXMuY2FudmFzPW5ldyBPZmZzY3JlZW5DYW52YXMoZSx0KSx0aGlzLnJlYWxDb250ZXh0PXRoaXMuY2FudmFzLmdldENvbnRleHQoIjJkIiksdGhpcy5pbWFnZVNvdXJjZT10aGlzLmNhbnZhcy50cmFuc2ZlclRvSW1hZ2VCaXRtYXAoKSx0aGlzLmNvbnRleHQ9dGhpcy5zZXRQaXhlbFJhdGlvKGkpLHRoaXMucmVzaXplKGUsdCl9c3RhdGljIGlzU3VwcG9ydGVkKCl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBPZmZzY3JlZW5DYW52YXMmJm51bGwhPU9mZnNjcmVlbkNhbnZhcy5wcm90b3R5cGUudHJhbnNmZXJUb0ltYWdlQml0bWFwfXNuYXBzaG90KCl7dGhpcy5pbWFnZVNvdXJjZS5jbG9zZSgpLHRoaXMuaW1hZ2VTb3VyY2U9dGhpcy5jYW52YXMudHJhbnNmZXJUb0ltYWdlQml0bWFwKCl9ZGVzdHJveSgpe3RoaXMuaW1hZ2VTb3VyY2UuY2xvc2UoKSx0aGlzLmNhbnZhcy53aWR0aD0wLHRoaXMuY2FudmFzLmhlaWdodD0wLHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwwLDAsMCl9Y2xlYXIoKXt0aGlzLmNvbnRleHQuc2F2ZSgpLHRoaXMuY29udGV4dC5yZXNldFRyYW5zZm9ybSgpLHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwwLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpLHRoaXMuY29udGV4dC5yZXN0b3JlKCl9Z2V0IHBpeGVsUmF0aW8oKXtyZXR1cm4gdGhpcy5fcGl4ZWxSYXRpb31zZXRQaXhlbFJhdGlvKGUpe2xldCB0PW51bGwhPWU/ZTp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztyZXR1cm4gS28oKSYmKHQ9MSksdGhpcy5fcGl4ZWxSYXRpbz10LCRvLm92ZXJyaWRlU2NhbGUodGhpcy5yZWFsQ29udGV4dCx0KX1nZXQgd2lkdGgoKXtyZXR1cm4gdGhpcy5fd2lkdGh9Z2V0IGhlaWdodCgpe3JldHVybiB0aGlzLl9oZWlnaHR9cmVzaXplKGUsdCl7aWYoIShlPjAmJnQ+MCkpcmV0dXJuO2NvbnN0e2NhbnZhczppLGNvbnRleHQ6cyxwaXhlbFJhdGlvOnJ9PXRoaXM7aS53aWR0aD1NYXRoLnJvdW5kKGUqciksaS5oZWlnaHQ9TWF0aC5yb3VuZCh0KnIpLHMucmVzZXRUcmFuc2Zvcm0oKSx0aGlzLl93aWR0aD1lLHRoaXMuX2hlaWdodD10fX0sUmw9ImFkdi1jb21wb3NpdGUiLHhsPWNsYXNze2NvbnN0cnVjdG9yKGUpe3ZhciB0O3RoaXMuaWQ9V3ModGhpcyksdGhpcy5sYXllcnM9W10sdGhpcy5fbmV4dFpJbmRleD0wLHRoaXMuX25leHRMYXllcklkPTAsdGhpcy5fZGlydHk9ITEsdGhpcy5fcm9vdD1udWxsLHRoaXMuZGVidWc9RnMuY3JlYXRlKCEwLCJzY2VuZSIpO2NvbnN0e2RvY3VtZW50Omksd2luZG93OnMsbW9kZTpyPShudWxsIT0odD1NcygiYWdDaGFydHNTY2VuZVJlbmRlck1vZGVsIikpP3Q6UmwpLHdpZHRoOm8saGVpZ2h0Om4sb3ZlcnJpZGVEZXZpY2VQaXhlbFJhdGlvOmF9PWU7dGhpcy5vdmVycmlkZURldmljZVBpeGVsUmF0aW89YSx0aGlzLm9wdHM9e2RvY3VtZW50Omksd2luZG93OnMsbW9kZTpyfSx0aGlzLmNhbnZhcz1uZXcgJG8oe2RvY3VtZW50Omksd2luZG93OnMsd2lkdGg6byxoZWlnaHQ6bixvdmVycmlkZURldmljZVBpeGVsUmF0aW86YX0pfXNldCBjb250YWluZXIoZSl7dGhpcy5jYW52YXMuY29udGFpbmVyPWV9Z2V0IGNvbnRhaW5lcigpe3JldHVybiB0aGlzLmNhbnZhcy5jb250YWluZXJ9ZG93bmxvYWQoZSx0KXt0aGlzLmNhbnZhcy5kb3dubG9hZChlLHQpfWdldERhdGFVUkwoZSl7cmV0dXJuIHRoaXMuY2FudmFzLmdldERhdGFVUkwoZSl9Z2V0IHdpZHRoKCl7cmV0dXJuIHRoaXMucGVuZGluZ1NpemU/dGhpcy5wZW5kaW5nU2l6ZVswXTp0aGlzLmNhbnZhcy53aWR0aH1nZXQgaGVpZ2h0KCl7cmV0dXJuIHRoaXMucGVuZGluZ1NpemU/dGhpcy5wZW5kaW5nU2l6ZVsxXTp0aGlzLmNhbnZhcy5oZWlnaHR9cmVzaXplKGUsdCl7ZT1NYXRoLnJvdW5kKGUpLHQ9TWF0aC5yb3VuZCh0KTtjb25zdCBpPWU8PTB8fHQ8PTAscz1pc05hTihlKXx8aXNOYU4odCk7cmV0dXJuIShlPT09dGhpcy53aWR0aCYmdD09PXRoaXMuaGVpZ2h0fHxzfHxpKSYmKHRoaXMucGVuZGluZ1NpemU9W2UsdF0sdGhpcy5tYXJrRGlydHkoKSwhMCl9YWRkTGF5ZXIoZSl7dmFyIHQ7Y29uc3R7bW9kZTppfT10aGlzLm9wdHM7aWYoIVsiY29tcG9zaXRlIiwiZG9tLWNvbXBvc2l0ZSIsUmxdLmluY2x1ZGVzKGkpKXJldHVybjtjb25zdHt6SW5kZXg6cz10aGlzLl9uZXh0WkluZGV4KyssbmFtZTpyLHpJbmRleFN1Yk9yZGVyOm8sZ2V0Q29tcHV0ZWRPcGFjaXR5Om4sZ2V0VmlzaWJpbGl0eTphfT1lLHt3aWR0aDpsLGhlaWdodDpkLG92ZXJyaWRlRGV2aWNlUGl4ZWxSYXRpbzpjfT10aGlzLGg9ImRvbS1jb21wb3NpdGUiPT09aSx1PWk9PT1SbCYmRWwuaXNTdXBwb3J0ZWQoKT9uZXcgRWwoe3dpZHRoOmwsaGVpZ2h0OmQsb3ZlcnJpZGVEZXZpY2VQaXhlbFJhdGlvOmN9KTpuZXcgJG8oe2RvY3VtZW50OnRoaXMub3B0cy5kb2N1bWVudCx3aW5kb3c6dGhpcy5vcHRzLndpbmRvdyx3aWR0aDpsLGhlaWdodDpkLGRvbUxheWVyOmgsekluZGV4OnMsbmFtZTpyLG92ZXJyaWRlRGV2aWNlUGl4ZWxSYXRpbzpjfSkscD17aWQ6dGhpcy5fbmV4dExheWVySWQrKyxuYW1lOnIsekluZGV4OnMsekluZGV4U3ViT3JkZXI6byxjYW52YXM6dSxnZXRDb21wdXRlZE9wYWNpdHk6bixnZXRWaXNpYmlsaXR5OmF9O2lmKHM+PXRoaXMuX25leHRaSW5kZXgmJih0aGlzLl9uZXh0WkluZGV4PXMrMSksdGhpcy5sYXllcnMucHVzaChwKSx0aGlzLnNvcnRMYXllcnMoKSxoKXtjb25zdCBlPXRoaXMubGF5ZXJzLm1hcChlPT5lLmNhbnZhcykuZmlsdGVyKGU9PmUgaW5zdGFuY2VvZiAkbyksaT1lLmZpbmRJbmRleChlPT5lPT09dSk7KG51bGwhPSh0PWVbaS0xXSk/dDp0aGlzLmNhbnZhcykuZWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyZW5kIix1LmVsZW1lbnQpfXJldHVybiB0aGlzLmRlYnVnKCJTY2VuZS5hZGRMYXllcigpIC0gbGF5ZXJzIix0aGlzLmxheWVycykscC5jYW52YXN9cmVtb3ZlTGF5ZXIoZSl7Y29uc3QgdD10aGlzLmxheWVycy5maW5kSW5kZXgodD0+dC5jYW52YXM9PT1lKTt0Pj0wJiYodGhpcy5sYXllcnMuc3BsaWNlKHQsMSksZS5kZXN0cm95KCksdGhpcy5tYXJrRGlydHkoKSx0aGlzLmRlYnVnKCJTY2VuZS5yZW1vdmVMYXllcigpIC0gIGxheWVycyIsdGhpcy5sYXllcnMpKX1tb3ZlTGF5ZXIoZSx0LGkpe2NvbnN0IHM9dGhpcy5sYXllcnMuZmluZCh0PT50LmNhbnZhcz09PWUpO3MmJihzLnpJbmRleD10LHMuekluZGV4U3ViT3JkZXI9aSx0aGlzLnNvcnRMYXllcnMoKSx0aGlzLm1hcmtEaXJ0eSgpLHRoaXMuZGVidWcoIlNjZW5lLm1vdmVMYXllcigpIC0gIGxheWVycyIsdGhpcy5sYXllcnMpKX1zb3J0TGF5ZXJzKCl7dGhpcy5sYXllcnMuc29ydCgoZSx0KT0+e3ZhciBpLHM7cmV0dXJuIFRuKFtlLnpJbmRleCwuLi5udWxsIT0oaT1lLnpJbmRleFN1Yk9yZGVyKT9pOlt2b2lkIDAsdm9pZCAwXSxlLmlkXSxbdC56SW5kZXgsLi4ubnVsbCE9KHM9dC56SW5kZXhTdWJPcmRlcik/czpbdm9pZCAwLHZvaWQgMF0sdC5pZF0seG4pfSl9bWFya0RpcnR5KCl7dGhpcy5fZGlydHk9ITB9Z2V0IGRpcnR5KCl7cmV0dXJuIHRoaXMuX2RpcnR5fXNldCByb290KGUpe3ZhciB0O2UhPT10aGlzLl9yb290JiYobnVsbD09KHQ9dGhpcy5fcm9vdCl8fHQuX3NldExheWVyTWFuYWdlcigpLHRoaXMuX3Jvb3Q9ZSxlJiZlLl9zZXRMYXllck1hbmFnZXIoe2FkZExheWVyOmU9PnRoaXMuYWRkTGF5ZXIoZSksbW92ZUxheWVyOiguLi5lKT0+dGhpcy5tb3ZlTGF5ZXIoLi4uZSkscmVtb3ZlTGF5ZXI6KC4uLmUpPT50aGlzLnJlbW92ZUxheWVyKC4uLmUpLG1hcmtEaXJ0eTooKT0+dGhpcy5tYXJrRGlydHkoKSxjYW52YXM6dGhpcy5jYW52YXMsZGVidWc6RnMuY3JlYXRlKCJzY2VuZSIpfSksdGhpcy5tYXJrRGlydHkoKSl9Z2V0IHJvb3QoKXtyZXR1cm4gdGhpcy5fcm9vdH1zdHJpcCgpe2NvbnN0e2xheWVyczplfT10aGlzO2Zvcihjb25zdCB0IG9mIGUpdC5jYW52YXMuZGVzdHJveSgpLGRlbGV0ZSB0LmNhbnZhcztlLnNwbGljZSgwLGUubGVuZ3RoKSx0aGlzLnJvb3Q9bnVsbCx0aGlzLl9kaXJ0eT0hMSx0aGlzLmNhbnZhcy5jb250ZXh0LnJlc2V0VHJhbnNmb3JtKCl9ZGVzdHJveSgpe3RoaXMuY29udGFpbmVyPXZvaWQgMCx0aGlzLnN0cmlwKCksdGhpcy5jYW52YXMuZGVzdHJveSgpLE9iamVjdC5hc3NpZ24odGhpcyx7Y2FudmFzOnZvaWQgMCxjdHg6dm9pZCAwfSl9cmVuZGVyKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7dmFyIHQsaTtjb25zdHtkZWJ1Z1NwbGl0VGltZXM6cz17c3RhcnQ6cGVyZm9ybWFuY2Uubm93KCl9LGV4dHJhRGVidWdTdGF0czpyPXt9fT1udWxsIT1lP2U6e30se2NhbnZhczpvLGNhbnZhczp7Y29udGV4dDpufSxyb290OmEsbGF5ZXJzOmwscGVuZGluZ1NpemU6ZCxvcHRzOnttb2RlOmN9fT10aGlzO2lmKGQmJih0aGlzLmNhbnZhcy5yZXNpemUoLi4uZCksdGhpcy5sYXllcnMuZm9yRWFjaChlPT5lLmNhbnZhcy5yZXNpemUoLi4uZCkpLHRoaXMucGVuZGluZ1NpemU9dm9pZCAwKSxhJiYhYS52aXNpYmxlKXJldHVybiB2b2lkKHRoaXMuX2RpcnR5PSExKTtpZihhJiYhdGhpcy5kaXJ0eSlyZXR1cm4gdGhpcy5kZWJ1ZygiU2NlbmUucmVuZGVyKCkgLSBuby1vcCIse3JlZHJhd1R5cGU6anNbYS5kaXJ0eV0sdHJlZTp0aGlzLmJ1aWxkVHJlZShhKX0pLHZvaWQgdGhpcy5kZWJ1Z1N0YXRzKHMsbix2b2lkIDAscik7Y29uc3QgaD17Y3R4Om4sZGV2aWNlUGl4ZWxSYXRpbzpudWxsIT0odD10aGlzLmNhbnZhcy5waXhlbFJhdGlvKT90OjEsZm9yY2VSZW5kZXI6ITAscmVzaXplZDohIWQsZGVidWdOb2Rlczp7fX07RnMuY2hlY2soInNjZW5lOnN0YXRzOnZlcmJvc2UiKSYmKGguc3RhdHM9e2xheWVyc1JlbmRlcmVkOjAsbGF5ZXJzU2tpcHBlZDowLG5vZGVzUmVuZGVyZWQ6MCxub2Rlc1NraXBwZWQ6MH0pO2xldCB1PSExO2lmKCghYXx8YS5kaXJ0eT49MSkmJih1PSEwLG8uY2xlYXIoKSksYSYmRnMuY2hlY2soInNjZW5lOmRpcnR5VHJlZSIpKXtjb25zdHtkaXJ0eVRyZWU6ZSxwYXRoczp0fT10aGlzLmJ1aWxkRGlydHlUcmVlKGEpO0ZzLmNyZWF0ZSgic2NlbmU6ZGlydHlUcmVlIikoIlNjZW5lLnJlbmRlcigpIC0gZGlydHlUcmVlIix7ZGlydHlUcmVlOmUscGF0aHM6dH0pfWEmJnUmJih0aGlzLmRlYnVnKCJTY2VuZS5yZW5kZXIoKSAtIGJlZm9yZSIse3JlZHJhd1R5cGU6anNbYS5kaXJ0eV0sY2FudmFzQ2xlYXJlZDp1LHRyZWU6dGhpcy5idWlsZFRyZWUoYSl9KSxhLnZpc2libGUmJihuLnNhdmUoKSxhLnJlbmRlcihoKSxuLnJlc3RvcmUoKSkpLHNbIuKcje+4jyJdPXBlcmZvcm1hbmNlLm5vdygpLCJkb20tY29tcG9zaXRlIiE9PWMmJmwubGVuZ3RoPjAmJnUmJih0aGlzLnNvcnRMYXllcnMoKSxuLnNhdmUoKSxuLnNldFRyYW5zZm9ybSgxL28ucGl4ZWxSYXRpbywwLDAsMS9vLnBpeGVsUmF0aW8sMCwwKSxsLmZvckVhY2goKHtjYW52YXM6e2ltYWdlU291cmNlOmUsZW5hYmxlZDp0fSxnZXRDb21wdXRlZE9wYWNpdHk6aSxnZXRWaXNpYmlsaXR5OnN9KT0+e3QmJnMoKSYmKG4uZ2xvYmFsQWxwaGE9aSgpLG4uZHJhd0ltYWdlKGUsMCwwKSl9KSxuLnJlc3RvcmUoKSxzWyLim5kiXT1wZXJmb3JtYW5jZS5ub3coKSksbnVsbD09KGk9bi52ZXJpZnlEZXB0aFplcm8pfHxpLmNhbGwobiksdGhpcy5fZGlydHk9ITEsdGhpcy5kZWJ1Z1N0YXRzKHMsbixoLnN0YXRzLHIpLHRoaXMuZGVidWdTY2VuZU5vZGVIaWdobGlnaHQobixoLmRlYnVnTm9kZXMpLGEmJnRoaXMuZGVidWcoIlNjZW5lLnJlbmRlcigpIC0gYWZ0ZXIiLHtyZWRyYXdUeXBlOmpzW2EuZGlydHldLGNhbnZhc0NsZWFyZWQ6dSx0cmVlOnRoaXMuYnVpbGRUcmVlKGEpfSl9KSl9ZGVidWdTdGF0cyhlLHQsaSxzPXt9KXtpZihGcy5jaGVjaygic2NlbmU6c3RhdHMiLCJzY2VuZTpzdGF0czp2ZXJib3NlIikpe2NvbnN0IHI9cGVyZm9ybWFuY2Uubm93KCksbz1lLnN0YXJ0O2UuZW5kPXBlcmZvcm1hbmNlLm5vdygpO2NvbnN0IG49KGUsdCk9Pntjb25zdCBpPWUrdDtyZXR1cm5gJHtlfSAvICR7aX0gKCR7TWF0aC5yb3VuZCgxMDAqZS9pKX0lKWB9LGE9KGUsdCxpKT0+YCR7ZX06ICR7TWF0aC5yb3VuZCgxMDAqKGktdCkpLzEwMH1tc2Ase2xheWVyc1JlbmRlcmVkOmw9MCxsYXllcnNTa2lwcGVkOmQ9MCxub2Rlc1JlbmRlcmVkOmM9MCxub2Rlc1NraXBwZWQ6aD0wfT1udWxsIT1pP2k6e307bGV0IHU9MDtjb25zdCBwPU9iamVjdC5lbnRyaWVzKGUpLmZpbHRlcigoW2VdKT0+ImVuZCIhPT1lKS5tYXAoKFtlLHRdLGkpPT57Y29uc3Qgcz1pPjA/YShlLHUsdCk6bnVsbDtyZXR1cm4gdT10LHN9KS5maWx0ZXIoZT0+bnVsbCE9ZSkuam9pbigiICsgIiksZz1PYmplY3QuZW50cmllcyhzKS5tYXAoKFtlLHRdKT0+YCR7ZX06ICR7dH1gKS5qb2luKCIgOyAiKSxtPUZzLmNoZWNrKCJzY2VuZTpzdGF0czp2ZXJib3NlIiksZj1bYCR7YSgi4o+x77iPIixvLHIpfSAoJHtwfSlgLCIiK2csIkxheWVyczogIisobT9uKGwsZCk6dGhpcy5sYXllcnMubGVuZ3RoKSxtPyJOb2RlczogIituKGMsaCk6bnVsbF0uZmlsdGVyKGU9Pm51bGwhPWUpLm1hcChlPT5bZSwkby5nZXRUZXh0U2l6ZShlLHQuZm9udCldKSx2PU1hdGgubWF4KC4uLmYubWFwKChbLHt3aWR0aDplfV0pPT5lKSksQz1mLnJlZHVjZSgoZSxbLHtoZWlnaHQ6dH1dKT0+ZSt0LDApO3Quc2F2ZSgpLHQuZmlsbFN0eWxlPSJ3aGl0ZSIsdC5maWxsUmVjdCgwLDAsdixDKSx0LmZpbGxTdHlsZT0iYmxhY2siO2xldCB5PTA7Zm9yKGNvbnN0W2UsaV1vZiBmKXkrPWkuaGVpZ2h0LHQuZmlsbFRleHQoZSwyLHkpO3QucmVzdG9yZSgpfX1kZWJ1Z1NjZW5lTm9kZUhpZ2hsaWdodChlLHQpe3ZhciBpO2NvbnN0IHM9ZT0+dD0+ISFlLnRlc3QodC5pZCl8fHQgaW5zdGFuY2VvZiBPbiYmbnVsbCE9dC5uYW1lJiZlLnRlc3QodC5uYW1lKSxyPWU9PnQ9PmU9PT10LmlkfHx0IGluc3RhbmNlb2YgT24mJm51bGwhPXQubmFtZSYmZT09PXQubmFtZSxvPURzKE1zKCJhZ0NoYXJ0c1NjZW5lRGVidWciKSkuZmxhdE1hcChlPT4ibGF5b3V0Ij09PWU/WyJzZXJpZXNSb290IiwibGVnZW5kIiwicm9vdCIsLy4qQXhpcy1cZCstYXhpcy4qL106ZSk7Zm9yKGNvbnN0IGUgb2Ygbyl7aWYoInN0cmluZyI9PXR5cGVvZiBlJiZudWxsIT10W2VdKWNvbnRpbnVlO2NvbnN0IG89InN0cmluZyI9PXR5cGVvZiBlP3IoZSk6cyhlKSxuPW51bGw9PShpPXRoaXMucm9vdCk/dm9pZCAwOmkuZmluZE5vZGVzKG8pO2lmKG4mJjAhPT1uLmxlbmd0aClmb3IoY29uc3QgZSBvZiBuKWUgaW5zdGFuY2VvZiBPbiYmZS5uYW1lP3RbZS5uYW1lXT1lOnRbZS5pZF09ZTtlbHNlIEwubG9nKGBTY2VuZS5yZW5kZXIoKSAtIG5vIGRlYnVnZ2luZyBub2RlIHdpdGggaWQgWyR7ZX1dIGluIHNjZW5lIGdyYXBoLmApfWUuc2F2ZSgpO2Zvcihjb25zdFtpLHNdb2YgT2JqZWN0LmVudHJpZXModCkpe2NvbnN0IHQ9cy5jb21wdXRlVHJhbnNmb3JtZWRCQm94KCk7dD8oZS5nbG9iYWxBbHBoYT0uOCxlLnN0cm9rZVN0eWxlPSJyZWQiLGUubGluZVdpZHRoPTEsZS5zdHJva2VSZWN0KHQueCx0LnksdC53aWR0aCx0LmhlaWdodCksZS5maWxsU3R5bGU9InJlZCIsZS5zdHJva2VTdHlsZT0id2hpdGUiLGUuZm9udD0iMTZweCBzYW5zLXNlcmlmIixlLnRleHRCYXNlbGluZT0idG9wIixlLnRleHRBbGlnbj0ibGVmdCIsZS5saW5lV2lkdGg9MixlLnN0cm9rZVRleHQoaSx0LngsdC55LHQud2lkdGgpLGUuZmlsbFRleHQoaSx0LngsdC55LHQud2lkdGgpKTpMLmxvZyhgU2NlbmUucmVuZGVyKCkgLSBubyBiYm94IGZvciBkZWJ1Z2dlZCBub2RlIFske2l9XS5gKX1lLnJlc3RvcmUoKX1idWlsZFRyZWUoZSl7dmFyIHQsaTtjb25zdCBzPW51bGwhPSh0PWUgaW5zdGFuY2VvZiBPbj9lLm5hbWU6bnVsbCk/dDplLmlkO3JldHVybiB0aGlzLmRlYnVnLmNoZWNrKCk/bShtKHtuYW1lOnMsbm9kZTplLGRpcnR5OmpzW2UuZGlydHldfSwobnVsbD09KGk9ZS5wYXJlbnQpP3ZvaWQgMDppLmlzVmlydHVhbCk/e3ZpcnR1YWxQYXJlbnREaXJ0eTpqc1tlLnBhcmVudC5kaXJ0eV0sdmlydHVhbFBhcmVudDplLnBhcmVudH06e30pLGUuY2hpbGRyZW4ubWFwKGU9PnRoaXMuYnVpbGRUcmVlKGUpKS5yZWR1Y2UoKGUsdCk9PntsZXR7bmFtZTppfT10O2NvbnN0e25vZGU6e3Zpc2libGU6cyxvcGFjaXR5OnIsekluZGV4Om8sekluZGV4U3ViT3JkZXI6bn0sbm9kZTphLHZpcnR1YWxQYXJlbnQ6bH09dDsoIXN8fHI8PTApJiYoaT1gKCR7aX0pYCksYSBpbnN0YW5jZW9mIE9uJiZhLmlzTGF5ZXIoKSYmKGk9YCoke2l9KmApO2NvbnN0IGQ9WyIiKyhudWxsIT1pP2k6Ijx1bmtub3duPiIpLCJ6OiAiK28sbiYmInpvOiAiK24ubWFwKGU9PiJmdW5jdGlvbiI9PXR5cGVvZiBlP2UoKSsiIChmbikiOmUpLmpvaW4oIiAvICIpLGwmJiIodmlydHVhbCBwYXJlbnQpIl0uZmlsdGVyKGU9PiEhZSkuam9pbigiICIpO2xldCBjPWQsaD0xO2Zvcig7bnVsbCE9ZVtjXSYmaDwxMDA7KWM9YCR7ZH0gKCR7aCsrfSlgO3JldHVybiBlW2NdPXQsZX0se30pKTp7fX1idWlsZERpcnR5VHJlZShlKXt2YXIgdDtpZigwPT09ZS5kaXJ0eSlyZXR1cm57ZGlydHlUcmVlOnt9LHBhdGhzOltdfTtjb25zdCBpPWUuY2hpbGRyZW4ubWFwKGU9PnRoaXMuYnVpbGREaXJ0eVRyZWUoZSkpLmZpbHRlcihlPT5lLnBhdGhzLmxlbmd0aD4wKSxzPW51bGwhPSh0PWUgaW5zdGFuY2VvZiBPbj9lLm5hbWU6bnVsbCk/dDplLmlkLHI9MD09PWkubGVuZ3RoP1tzXTppLm1hcChlPT5lLnBhdGhzKS5yZWR1Y2UoKGUsdCk9PmUuY29uY2F0KHQpLFtdKS5tYXAoZT0+YCR7c30uJHtlfWApO3JldHVybntkaXJ0eVRyZWU6bSh7bmFtZTpzLG5vZGU6ZSxkaXJ0eTpqc1tlLmRpcnR5XX0saS5tYXAoZT0+ZS5kaXJ0eVRyZWUpLmZpbHRlcihlPT52b2lkIDAhPT1lLmRpcnR5KS5yZWR1Y2UoKGUsdCk9Pnt2YXIgaTtyZXR1cm4gZVtudWxsIT0oaT10Lm5hbWUpP2k6Ijx1bmtub3duPiJdPXQsZX0se30pKSxwYXRoczpyfX19O2Z1bmN0aW9uIFRsKGUpe3JldHVybiBuZXcgUHJvbWlzZSh0PT57c2V0VGltZW91dCgoKT0+dCh2b2lkIDApLGUpfSl9eGwuY2xhc3NOYW1lPSJTY2VuZSI7dmFyIERsPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5ldmVudExpc3RlbmVycz1uZXcgTWFwfWFkZEV2ZW50TGlzdGVuZXIoZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgRXJyb3IoIkFHIENoYXJ0cyAtIGxpc3RlbmVyIG11c3QgYmUgYSBGdW5jdGlvbiIpO2NvbnN0IGk9dGhpcy5ldmVudExpc3RlbmVycy5nZXQoZSk7aT9pLmFkZCh0KTp0aGlzLmV2ZW50TGlzdGVuZXJzLnNldChlLG5ldyBTZXQoW3RdKSl9cmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpe3ZhciBpO251bGw9PShpPXRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGUpKXx8aS5kZWxldGUodCksMD09PXRoaXMuZXZlbnRMaXN0ZW5lcnMuc2l6ZSYmdGhpcy5ldmVudExpc3RlbmVycy5kZWxldGUoZSl9aGFzRXZlbnRMaXN0ZW5lcihlKXtyZXR1cm4gdGhpcy5ldmVudExpc3RlbmVycy5oYXMoZSl9Y2xlYXJFdmVudExpc3RlbmVycygpe3RoaXMuZXZlbnRMaXN0ZW5lcnMuY2xlYXIoKX1maXJlRXZlbnQoZSl7dmFyIHQ7bnVsbD09KHQ9dGhpcy5ldmVudExpc3RlbmVycy5nZXQoZS50eXBlKSl8fHQuZm9yRWFjaCh0PT50KGUpKX19LE9sPWNsYXNzIGV4dGVuZHMgZnR7Y29uc3RydWN0b3IoZT0wLHQ9ZSxpPWUscz10KXtzdXBlcigpLHRoaXMudG9wPWUsdGhpcy5yaWdodD10LHRoaXMuYm90dG9tPWksdGhpcy5sZWZ0PXN9Y2xlYXIoKXt0aGlzLnRvcD10aGlzLnJpZ2h0PXRoaXMuYm90dG9tPXRoaXMubGVmdD0wfX07ZnVuY3Rpb24gQWwoZSx0KXtsZXQgaSxzLHI9MCxvPSExO2NvbnN0IG49KCk9Pm8sYT0oKT0+e289ITEsbnVsbD09c3x8cygpLHM9dm9pZCAwLGk9dm9pZCAwLHI+MCYmZShsKX0sbD0oKT0+e2NvbnN0IGU9cjtyPTAsbz0hMDtjb25zdCBpPXQoe2NvdW50OmV9KTtpP2kudGhlbihhLGEpOmEoKX07cmV0dXJue3NjaGVkdWxlKHQpezAhPT1yfHxuKCl8fGUobCx0KSxyKyt9LGF3YWl0KCl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtpZihuKCkpZm9yKG51bGw9PWkmJihpPW5ldyBQcm9taXNlKGU9PntzPWV9KSk7bigpOyl5aWVsZCBpfSkpfX19eShbcXIobm8pXSxPbC5wcm90b3R5cGUsInRvcCIsMikseShbcXIobm8pXSxPbC5wcm90b3R5cGUsInJpZ2h0IiwyKSx5KFtxcihubyldLE9sLnByb3RvdHlwZSwiYm90dG9tIiwyKSx5KFtxcihubyldLE9sLnByb3RvdHlwZSwibGVmdCIsMik7dmFyIFBsPWNsYXNze3N0YXRpYyBpbml0KGUpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgUmVzaXplT2JzZXJ2ZXIpdGhpcy5yZXNpemVPYnNlcnZlcj1uZXcgUmVzaXplT2JzZXJ2ZXIoZT0+e2Zvcihjb25zdCB0IG9mIGUpe2NvbnN0e3dpZHRoOmUsaGVpZ2h0Oml9PXQuY29udGVudFJlY3Q7dGhpcy5jaGVja1NpemUodGhpcy5lbGVtZW50cy5nZXQodC50YXJnZXQpLHQudGFyZ2V0LGUsaSl9fSksdGhpcy5vd25lckRvY3VtZW50PWUsdGhpcy5yZWFkeT0hMCx0aGlzLmRvY3VtZW50UmVhZHk9ImxvYWRpbmciIT09ZS5yZWFkeVN0YXRlLHRoaXMuZG9jdW1lbnRSZWFkeXx8ZS5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIix0aGlzLm9uQ29udGVudExvYWRlZCk7ZWxzZSBmb3IoY29uc3RbZSx0XW9mIHRoaXMuZWxlbWVudHMpdGhpcy5jaGVja0NsaWVudFNpemUoZSx0KX1zdGF0aWMgZGVzdHJveSgpe3ZhciBlLHQ7bnVsbD09KGU9dGhpcy5vd25lckRvY3VtZW50KXx8ZS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIix0aGlzLm9uQ29udGVudExvYWRlZCksbnVsbD09KHQ9dGhpcy5yZXNpemVPYnNlcnZlcil8fHQuZGlzY29ubmVjdCgpLGRlbGV0ZSB0aGlzLnJlc2l6ZU9ic2VydmVyLGRlbGV0ZSB0aGlzLm93bmVyRG9jdW1lbnQsdGhpcy5yZWFkeT0hMX1zdGF0aWMgY2hlY2tTaXplKGUsdCxpLHMpe3ZhciByLG87ZSYmKGk9PT0obnVsbD09KHI9ZS5zaXplKT92b2lkIDA6ci53aWR0aCkmJnM9PT0obnVsbD09KG89ZS5zaXplKT92b2lkIDA6by5oZWlnaHQpfHwoZS5zaXplPXt3aWR0aDppLGhlaWdodDpzfSxlLmNiKGUuc2l6ZSx0KSkpfXN0YXRpYyBvYnNlcnZlKGUsdCl7dmFyIGk7dGhpcy5yZWFkeXx8dGhpcy5pbml0KGUub3duZXJEb2N1bWVudCksdGhpcy5kb2N1bWVudFJlYWR5Pyh0aGlzLmVsZW1lbnRzLmhhcyhlKT90aGlzLnJlbW92ZUZyb21RdWV1ZShlKTpudWxsPT0oaT10aGlzLnJlc2l6ZU9ic2VydmVyKXx8aS5vYnNlcnZlKGUpLHRoaXMuZWxlbWVudHMuc2V0KGUse2NiOnR9KSk6dGhpcy5xdWV1ZWRPYnNlcnZlUmVxdWVzdHMucHVzaChbZSx0XSl9c3RhdGljIHVub2JzZXJ2ZShlKXt2YXIgdDtudWxsPT0odD10aGlzLnJlc2l6ZU9ic2VydmVyKXx8dC51bm9ic2VydmUoZSksdGhpcy5lbGVtZW50cy5kZWxldGUoZSksdGhpcy5yZW1vdmVGcm9tUXVldWUoZSksdGhpcy5lbGVtZW50cy5zaXplfHx0aGlzLmRlc3Ryb3koKX1zdGF0aWMgcmVtb3ZlRnJvbVF1ZXVlKGUpe3RoaXMucXVldWVkT2JzZXJ2ZVJlcXVlc3RzPXRoaXMucXVldWVkT2JzZXJ2ZVJlcXVlc3RzLmZpbHRlcigoW3RdKT0+dCE9PWUpfXN0YXRpYyBjaGVja0NsaWVudFNpemUoZSx0KXt2YXIgaSxzO2NvbnN0IHI9bnVsbCE9KGk9ZS5jbGllbnRXaWR0aCk/aTowLG89bnVsbCE9KHM9ZS5jbGllbnRIZWlnaHQpP3M6MDt0aGlzLmNoZWNrU2l6ZSh0LGUscixvKX19O1BsLmVsZW1lbnRzPW5ldyBNYXAsUGwucmVhZHk9ITEsUGwuZG9jdW1lbnRSZWFkeT0hMSxQbC5xdWV1ZWRPYnNlcnZlUmVxdWVzdHM9W10sUGwub25Db250ZW50TG9hZGVkPSgpPT57dmFyIGU7Y29uc3QgdD0ibG9hZGluZyIhPT0obnVsbD09KGU9UGwub3duZXJEb2N1bWVudCk/dm9pZCAwOmUucmVhZHlTdGF0ZSksaT1QbC5kb2N1bWVudFJlYWR5O1BsLmRvY3VtZW50UmVhZHk9dCx0JiZ0IT09aSYmKFBsLnF1ZXVlZE9ic2VydmVSZXF1ZXN0cy5mb3JFYWNoKChbZSx0XSk9PlBsLm9ic2VydmUoZSx0KSksUGwucXVldWVkT2JzZXJ2ZVJlcXVlc3RzPVtdKX07dmFyIE1sPVBsLExsPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5yYW5nZT0idG9vbHRpcCJ9fTt5KFtxcihWbyhbInRvb2x0aXAiLCJub2RlIl0sImEgcmFuZ2UiKSldLExsLnByb3RvdHlwZSwicmFuZ2UiLDIpO3ZhciBGbD0oZT0+KGVbZS5GVUxMPTBdPSJGVUxMIixlW2UuVVBEQVRFX0RBVEE9MV09IlVQREFURV9EQVRBIixlW2UuUFJPQ0VTU19EQVRBPTJdPSJQUk9DRVNTX0RBVEEiLGVbZS5QRVJGT1JNX0xBWU9VVD0zXT0iUEVSRk9STV9MQVlPVVQiLGVbZS5TRVJJRVNfVVBEQVRFPTRdPSJTRVJJRVNfVVBEQVRFIixlW2UuVE9PTFRJUF9SRUNBTENVTEFUSU9OPTVdPSJUT09MVElQX1JFQ0FMQ1VMQVRJT04iLGVbZS5TQ0VORV9SRU5ERVI9Nl09IlNDRU5FX1JFTkRFUiIsZVtlLk5PTkU9N109Ik5PTkUiLGUpKShGbHx8e30pLElsPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMudHlwZT1lLHRoaXMuY29udGludW91c0RvbWFpbj1bMS8wLC0xLzBdLHRoaXMuZGlzY3JldGVEb21haW49bmV3IFNldH1leHRlbmQoZSl7ImRpc2NyZXRlIj09PXRoaXMudHlwZT90aGlzLmRpc2NyZXRlRG9tYWluLmFkZChlKToiY29udGludW91cyI9PT10aGlzLnR5cGUmJih0aGlzLmNvbnRpbnVvdXNEb21haW5bMF0+ZSYmKHRoaXMuY29udGludW91c0RvbWFpblswXT1lKSx0aGlzLmNvbnRpbnVvdXNEb21haW5bMV08ZSYmKHRoaXMuY29udGludW91c0RvbWFpblsxXT1lKSl9Z2V0RG9tYWluKCl7aWYoImRpc2NyZXRlIj09PXRoaXMudHlwZSlyZXR1cm4gdGhpcy5kaXNjcmV0ZURvbWFpbjtpZigiY29udGludW91cyI9PT10aGlzLnR5cGUpcmV0dXJuIHRoaXMuY29udGludW91c0RvbWFpbjt0aHJvdyBuZXcgRXJyb3IoIkFHIENoYXJ0cyAtIFVuc3VwcG9ydGVkIGRhdGEgZG9tYWluIHR5cGU6ICIrdGhpcy50eXBlKX19O2Z1bmN0aW9uIE5sKGUsdD1bMS8wLC0xLzBdKXtmb3IoY29uc3QgaSBvZiBlKSJudW1iZXIiPT10eXBlb2YgaSYmKGk8dFswXSYmKHRbMF09aSksaT50WzFdJiYodFsxXT1pKSk7cmV0dXJuIHR9ZnVuY3Rpb24gR2woZSl7cmV0dXJuIGUubWFwKGU9Pl9lKGUpP0pTT04uc3RyaW5naWZ5KGUpOmUpLmpvaW4oIi0iKX1mdW5jdGlvbiBrbChlLHQpe3ZhciBpO2NvbnN0IHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSlyZXR1cm5bXTtsZXRbdCxpXT1lO3JldHVybiB0PU51bWJlcih0KSxpPU51bWJlcihpKSwwPT09dCYmMD09PWk/WzAsMV06dD09PTEvMCYmaT09PS0xLzA/W106KHQ9PT0xLzAmJih0PTApLGk9PT0tMS8wJiYoaT0wKSxqZSh0KSYmamUoaSk/W3QsaV06W10pfShlKTtpZigwPT09cy5sZW5ndGgpcmV0dXJuIHM7bGV0W3Isb109cztpZihyPT09byl7Y29uc3RbZSxzXT1udWxsIT0oaT1udWxsPT10P3ZvaWQgMDp0LmNhbGN1bGF0ZVBhZGRpbmcocixvLHQuaXNSZXZlcnNlZCgpKSk/aTpbMSwxXTtyLT1lLG8rPXN9cmV0dXJuW3Isb119ZnVuY3Rpb24gX2woKXtyZXR1cm4gbmV3IE1hcChbW3ZvaWQgMCwwXV0pfWZ1bmN0aW9uIFZsKGUsdCl7dmFyIGk7cmV0dXJuIHZvaWQgMD09PXQ/MDpudWxsIT0oaT10LmdldChlLmlkKSk/aTowfXZhciBCbD1TeW1ib2woImludmFsaWQiKSxIbD1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLmRlYnVnPUZzLmNyZWF0ZSghMCwiZGF0YS1tb2RlbCIpO2NvbnN0e3Byb3BzOnQsbW9kZTppPSJzdGFuZGFsb25lIn09ZTt0aGlzLm1vZGU9aTtsZXQgcz0hMDtmb3IoY29uc3QgZSBvZiB0KXtpZigia2V5Ij09PWUudHlwZSYmIXMpdGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSBpbnRlcm5hbCBjb25maWcgZXJyb3I6IGtleXMgbXVzdCBjb21lIGJlZm9yZSB2YWx1ZXMuIik7InZhbHVlIj09PWUudHlwZSYmcyYmKHM9ITEpfXRoaXMub3B0cz1tKHtkYXRhVmlzaWJsZTohMH0sZSksdGhpcy5rZXlzPXQuZmlsdGVyKGU9PiJrZXkiPT09ZS50eXBlKS5tYXAoKGUsdCk9PmYobSh7fSxlKSx7aW5kZXg6dCxtaXNzaW5nOl9sKCl9KSksdGhpcy52YWx1ZXM9dC5maWx0ZXIoZT0+InZhbHVlIj09PWUudHlwZSkubWFwKChlLHQpPT5mKG0oe30sZSkse2luZGV4OnQsbWlzc2luZzpfbCgpfSkpLHRoaXMuYWdncmVnYXRlcz10LmZpbHRlcihlPT4iYWdncmVnYXRlIj09PWUudHlwZSkubWFwKChlLHQpPT5mKG0oe30sZSkse2luZGV4OnR9KSksdGhpcy5ncm91cFByb2Nlc3NvcnM9dC5maWx0ZXIoZT0+Imdyb3VwLXZhbHVlLXByb2Nlc3NvciI9PT1lLnR5cGUpLm1hcCgoZSx0KT0+ZihtKHt9LGUpLHtpbmRleDp0fSkpLHRoaXMucHJvcGVydHlQcm9jZXNzb3JzPXQuZmlsdGVyKGU9PiJwcm9wZXJ0eS12YWx1ZS1wcm9jZXNzb3IiPT09ZS50eXBlKS5tYXAoKGUsdCk9PmYobSh7fSxlKSx7aW5kZXg6dH0pKSx0aGlzLnJlZHVjZXJzPXQuZmlsdGVyKGU9PiJyZWR1Y2VyIj09PWUudHlwZSkubWFwKChlLHQpPT5mKG0oe30sZSkse2luZGV4OnR9KSksdGhpcy5wcm9jZXNzb3JzPXQuZmlsdGVyKGU9PiJwcm9jZXNzb3IiPT09ZS50eXBlKS5tYXAoKGUsdCk9PmYobSh7fSxlKSx7aW5kZXg6dH0pKTtmb3IoY29uc3QgZSBvZiB0aGlzLnZhbHVlcylpZihudWxsPT1lLnByb3BlcnR5KXRocm93IG5ldyBFcnJvcigiQUcgQ2hhcnRzIC0gaW50ZXJuYWwgY29uZmlnIGVycm9yOiBubyBwcm9wZXJ0aWVzIHNwZWNpZmllZCBmb3IgdmFsdWUgZGVmaW5pdGlvbnM6ICIrSlNPTi5zdHJpbmdpZnkoZSkpO2NvbnN0IHI9KHttYXRjaEdyb3VwSWRzOmV9KT0+e2Zvcihjb25zdCB0IG9mIG51bGwhPWU/ZTpbXSlpZighdGhpcy52YWx1ZXMuc29tZShlPT5lLmdyb3VwSWQ9PT10KSl0aHJvdyBuZXcgRXJyb3IoYEFHIENoYXJ0cyAtIGludGVybmFsIGNvbmZpZyBlcnJvcjogbWF0Y2hHcm91cElkcyBwcm9wZXJ0aWVzIG11c3QgbWF0Y2ggZGVmaW5lZCBncm91cHMgKCR7dH0pLmApfSxvPSh7bWF0Y2hJZHM6ZX0pPT57Zm9yKGNvbnN0IHQgb2YgbnVsbCE9ZT9lOltdKWlmKCF0aGlzLnZhbHVlcy5zb21lKGU9Pnt2YXIgaTtyZXR1cm4gbnVsbD09KGk9ZS5pZHMpP3ZvaWQgMDppLnNvbWUoKFtlLGldKT0+ZT09PXRbMF0mJmk9PT10WzFdKX0pKXRocm93IG5ldyBFcnJvcihgQUcgQ2hhcnRzIC0gaW50ZXJuYWwgY29uZmlnIGVycm9yOiBtYXRjaEdyb3VwSWRzIHByb3BlcnRpZXMgbXVzdCBtYXRjaCBkZWZpbmVkIGdyb3VwcyAoJHt0fSkuYCl9O2Zvcihjb25zdCBlIG9mWy4uLnRoaXMuZ3JvdXBQcm9jZXNzb3JzLC4uLnRoaXMuYWdncmVnYXRlc10pbyhlKSxyKGUpfXJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKGUsdCl7dmFyIGk7Y29uc3R7aW5kZXg6cyxkZWY6cn09bnVsbCE9KGk9dGhpcy5yZXNvbHZlUHJvY2Vzc2VkRGF0YURlZkJ5SWQoZSx0KSk/aTp7fTtyZXR1cm57aW5kZXg6cyxkZWY6cn19cmVzb2x2ZVByb2Nlc3NlZERhdGFJbmRpY2VzQnlJZChlLHQpe3JldHVybiB0aGlzLnJlc29sdmVQcm9jZXNzZWREYXRhRGVmc0J5SWQoZSx0KS5tYXAoKHtpbmRleDplLGRlZjp0fSk9Pih7aW5kZXg6ZSxkZWY6dH0pKX1yZXNvbHZlUHJvY2Vzc2VkRGF0YURlZkJ5SWQoZSx0KXtyZXR1cm4gdGhpcy5yZXNvbHZlUHJvY2Vzc2VkRGF0YURlZnNCeUlkKGUsdClbMF19cmVzb2x2ZVByb2Nlc3NlZERhdGFEZWZzQnlJZHMoZSx0KXtjb25zdCBpPVtdO2Zvcihjb25zdCBzIG9mIHQpaS5wdXNoKFtzLHRoaXMucmVzb2x2ZVByb2Nlc3NlZERhdGFEZWZzQnlJZChlLHMpXSk7cmV0dXJuIGl9cmVzb2x2ZVByb2Nlc3NlZERhdGFEZWZzVmFsdWVzKGUse2tleXM6dCx2YWx1ZXM6aX0pe2NvbnN0IHM9e307Zm9yKGNvbnN0W3IsW3tpbmRleDpvLGRlZjpufV1db2YgZSl7Y29uc3QgZT0ia2V5Ij09PW4udHlwZT90Omk7c1tyXT1lW29dfXJldHVybiBzfXJlc29sdmVQcm9jZXNzZWREYXRhRGVmc0J5SWQoZSx0KXtjb25zdHtrZXlzOmksdmFsdWVzOnMsYWdncmVnYXRlczpyLGdyb3VwUHJvY2Vzc29yczpvLHJlZHVjZXJzOm59PXRoaXMsYT1pPT57Y29uc3R7aWRzOnMsc2NvcGVzOnJ9PWk7cmV0dXJuIG51bGwhPXMmJighKG51bGwhPWUmJiEobnVsbD09cj92b2lkIDA6ci5zb21lKHQ9PnQ9PT1lLmlkKSkpJiZzLnNvbWUoKFtpLHNdKT0+aT09PWUuaWQmJigic3RyaW5nIj09dHlwZW9mIHQ/cz09PXQ6dC50ZXN0KHMpKSkpfSxsPVtpLHMscixvLG5dLGQ9W107Zm9yKGNvbnN0IGUgb2YgbClkLnB1c2goLi4uZS5maWx0ZXIoYSkubWFwKGU9Pih7aW5kZXg6ZS5pbmRleCxkZWY6ZX0pKSk7aWYoZC5sZW5ndGg+MClyZXR1cm4gZDt0aHJvdyBuZXcgRXJyb3IoYEFHIENoYXJ0cyAtIGRpZG4ndCBmaW5kIHByb3BlcnR5IGRlZmluaXRpb24gZm9yIFske3R9LCAke2UuaWR9XWApfWdldERvbWFpbihlLHQsaT0idmFsdWUiLHMpe3ZhciByLG8sbixhO2xldCBsLGQ7dHJ5e2w9dGhpcy5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGljZXNCeUlkKGUsdCl9Y2F0Y2goZSl7aWYoInN0cmluZyIhPXR5cGVvZiB0JiYvZGlkbid0IGZpbmQgcHJvcGVydHkgZGVmaW5pdGlvbi8udGVzdChlLm1lc3NhZ2UpKXJldHVybltdO3Rocm93IGV9c3dpdGNoKGkpe2Nhc2Uia2V5IjpkPSJrZXlzIjticmVhaztjYXNlInZhbHVlIjpkPSJ2YWx1ZXMiO2JyZWFrO2Nhc2UiYWdncmVnYXRlIjpkPSJhZ2dWYWx1ZXMiO2JyZWFrO2Nhc2UiZ3JvdXAtdmFsdWUtcHJvY2Vzc29yIjpkPSJncm91cHMiO2JyZWFrO2RlZmF1bHQ6cmV0dXJuW119Y29uc3QgYz1udWxsIT0obz1udWxsPT0ocj1zLmRvbWFpbltkXSk/dm9pZCAwOnJbbFswXS5pbmRleF0pP286W107aWYoMT09PWwubGVuZ3RoKXJldHVybiBjO2NvbnN0IGg9Wy4uLmNdO2Zvcihjb25zdCBlIG9mIGwuc2xpY2UoMSkpTmwobnVsbCE9KGE9bnVsbD09KG49cy5kb21haW5bZF0pP3ZvaWQgMDpuW2UuaW5kZXhdKT9hOltdLGgpO3JldHVybiBofXByb2Nlc3NEYXRhKGUsdCl7Y29uc3R7b3B0czp7Z3JvdXBCeUtleXM6aSxncm91cEJ5Rm46c30sYWdncmVnYXRlczpyLGdyb3VwUHJvY2Vzc29yczpvLHJlZHVjZXJzOm4scHJvY2Vzc29yczphLHByb3BlcnR5UHJvY2Vzc29yczpsfT10aGlzLGQ9cGVyZm9ybWFuY2Uubm93KCk7aWYoaSYmMD09PXRoaXMua2V5cy5sZW5ndGgpcmV0dXJuO2xldCBjPXRoaXMuZXh0cmFjdERhdGEoZSx0KTtpP2M9dGhpcy5ncm91cERhdGEoYyk6cyYmKGM9dGhpcy5ncm91cERhdGEoYyxzKGMpKSksby5sZW5ndGg+MCYmdGhpcy5wb3N0UHJvY2Vzc0dyb3VwcyhjKSxyLmxlbmd0aD4wJiZ0aGlzLmFnZ3JlZ2F0ZURhdGEoYyksbC5sZW5ndGg+MCYmdGhpcy5wb3N0UHJvY2Vzc1Byb3BlcnRpZXMoYyksbi5sZW5ndGg+MCYmdGhpcy5yZWR1Y2VEYXRhKGMpLGEubGVuZ3RoPjAmJnRoaXMucG9zdFByb2Nlc3NEYXRhKGMpO2Zvcihjb25zdCB0IG9mWy4uLnRoaXMua2V5cywuLi50aGlzLnZhbHVlc10paWYoZS5sZW5ndGg+MClmb3IoY29uc3RbaSxzXW9mIHQubWlzc2luZylpZihzPj1lLmxlbmd0aCl7Y29uc3QgZT12b2lkIDA9PT1pPyIiOiIgZm9yICIraTtMLndhcm5PbmNlKGB0aGUga2V5ICcke3QucHJvcGVydHl9JyB3YXMgbm90IGZvdW5kIGluIGFueSBkYXRhIGVsZW1lbnQke2V9LmApfWNvbnN0IGg9cGVyZm9ybWFuY2Uubm93KCk7cmV0dXJuIGMudGltZT1oLWQsdGhpcy5kZWJ1Zy5jaGVjaygpJiZmdW5jdGlvbihlKXt2YXIgdCxpO2NvbnN0IHM9KGUsdCk9Pnt0Lmxlbmd0aD4wJiYoTC5sb2coIkRhdGFNb2RlbC5wcm9jZXNzRGF0YSgpIC0gIitlKSxMLnRhYmxlKHQpKX07aWYoTC5sb2coIkRhdGFNb2RlbC5wcm9jZXNzRGF0YSgpIC0gcHJvY2Vzc2VkRGF0YSIsZSkscygiS2V5IERvbWFpbnMiLGUuZG9tYWluLmtleXMpLHMoIkdyb3VwIERvbWFpbnMiLG51bGwhPSh0PWUuZG9tYWluLmdyb3Vwcyk/dDpbXSkscygiVmFsdWUgRG9tYWlucyIsZS5kb21haW4udmFsdWVzKSxzKCJBZ2dyZWdhdGUgRG9tYWlucyIsbnVsbCE9KGk9ZS5kb21haW4uYWdnVmFsdWVzKT9pOltdKSwiZ3JvdXBlZCI9PT1lLnR5cGUpe2NvbnN0IHQ9ZS5kYXRhLnJlZHVjZSgoZSx0KT0+e3ZhciBpLHM7Y29uc3Qgcj1udWxsIT0oaT10LmtleXMpP2k6W10sbz1udWxsIT0ocz10LmFnZ1ZhbHVlcyk/czpbXSxuPXQua2V5cy5tYXAoKCk9Pnt9KSxhPW51bGw9PW8/dm9pZCAwOm8ubWFwKCgpPT57fSk7cmV0dXJuIGUucHVzaCguLi50LnZhbHVlcy5tYXAoKGUsdCk9PlsuLi4wPT09dD9yOm4sLi4ubnVsbCE9ZT9lOltdLC4uLjA9PXQ/bzphXSkpLGV9LFtdKTtzKCJWYWx1ZXMiLHQpfWVsc2V7Y29uc3QgdD1lLmRhdGEucmVkdWNlKChlLHQpPT57dmFyIGk7Y29uc3Qgcz1udWxsIT0oaT10LmFnZ1ZhbHVlcyk/aTpbXTtyZXR1cm4gZS5wdXNoKFsuLi50LmtleXMsLi4udC52YWx1ZXMsLi4uc10pLGV9LFtdKTtzKCJWYWx1ZXMiLHQpfX0oYyksY312YWx1ZUdyb3VwSWR4TG9va3VwKHttYXRjaEdyb3VwSWRzOmUsbWF0Y2hJZHM6dH0pe3JldHVybiB0aGlzLnZhbHVlcy5tYXAoKGUsdCk9Pih7ZGVmOmUsaW5kZXg6dH0pKS5maWx0ZXIoKHtkZWY6aX0pPT4hKGUmJihudWxsPT1pLmdyb3VwSWR8fCFlLmluY2x1ZGVzKGkuZ3JvdXBJZCkpKSYmKCF0fHxudWxsIT1pLmlkcyYmdC5zb21lKChbZSx0XSk9Pnt2YXIgcztyZXR1cm4gbnVsbD09KHM9aS5pZHMpP3ZvaWQgMDpzLnNvbWUoKFtpLHNdKT0+aT09PWUmJnM9PT10KX0pKSkubWFwKCh7aW5kZXg6ZX0pPT5lKX12YWx1ZUlkeExvb2t1cChlLHQpe2NvbnN0IGk9bnVsbD09ZXx8MD09PWUubGVuZ3RoLHM9dD0+e2lmKG51bGw9PXQpcmV0dXJuITA7Y29uc3Qgcz1udWxsPT10fHwwPT09dC5sZW5ndGg7cmV0dXJuIGk9PT1zfHwobnVsbD09dD92b2lkIDA6dC5zb21lKHQ9PmUuaW5jbHVkZXModCkpKX0scj0ic3RyaW5nIj09dHlwZW9mIHQ/dDp0LmlkLG89dGhpcy52YWx1ZXMuZmluZEluZGV4KGU9Pnt2YXIgdDtyZXR1cm4gcyhlLnNjb3BlcykmJigobnVsbD09KHQ9ZS5pZHMpP3ZvaWQgMDp0LnNvbWUoZT0+KChbZSx0XSk9PnMoW2VdKSYmdD09PXIpKGUpKSl8fGUucHJvcGVydHk9PT1yfHxlLmlkPT09cil9KTtpZihvPj0wKXJldHVybiBvO3Rocm93IG5ldyBFcnJvcihgQUcgQ2hhcnRzIC0gY29uZmlndXJhdGlvbiBlcnJvciwgdW5rbm93biBwcm9wZXJ0eSAke0pTT04uc3RyaW5naWZ5KHQpfSBpbiBzY29wZShzKSAke0pTT04uc3RyaW5naWZ5KGUpfWApfWV4dHJhY3REYXRhKGUsdCl7dmFyIGkscyxyLG87Y29uc3R7a2V5czpuLHZhbHVlczphLG9wdHM6e2RhdGFWaXNpYmxlOmx9fT10aGlzLHtkYXRhRG9tYWluOmQscHJvY2Vzc1ZhbHVlOmMsc2NvcGVzOmgsYWxsU2NvcGVzSGF2ZVNhbWVEZWZzOnV9PXRoaXMuaW5pdERhdGFEb21haW5Qcm9jZXNzb3IoKSxwPW5ldyBBcnJheShsP2UubGVuZ3RoOjApO2xldCBnPTAsZj0wO2Zvcihjb25zdFtkLHZdb2YgZS5lbnRyaWVzKCkpe2NvbnN0IGU9e30sQz1oLnNpemU+MD9uZXcgU2V0KGgpOnZvaWQgMCx5PWw/bmV3IEFycmF5KG4ubGVuZ3RoKTp2b2lkIDA7bGV0IFMsdz0wO2Zvcihjb25zdCBlIG9mIG4pe2lmKFM9YyhlLHYsUyksUz09PUJsKWJyZWFrO3kmJih5W3crK109Uyl9aWYoUz09PUJsKWNvbnRpbnVlO2NvbnN0IGI9bCYmYS5sZW5ndGg+MD9uZXcgQXJyYXkoYS5sZW5ndGgpOnZvaWQgMDtsZXQgRTtjb25zdCBSPXt9O2Zvcihjb25zdCBlIG9mIG51bGwhPXQ/dDpbXSlSW2UuaWRdPWU7Zm9yKGNvbnN0W3Qsbl1vZiBhLmVudHJpZXMoKSl7Zm9yKGNvbnN0IG8gb2YgbnVsbCE9KGk9bi5zY29wZXMpP2k6aCl7Y29uc3QgaT1SW29dO0U9YyhuLG51bGwhPShzPW51bGw9PWk/dm9pZCAwOmkuZGF0YVtkXSk/czp2LEUsbyksRSE9PUJsJiZiJiYodm9pZCAwIT09aSYmKG51bGwhPWVbcj1pLmlkXXx8KGVbcl09e30pLGVbaS5pZF1bbi5wcm9wZXJ0eV09RSksbi51c2VTY29wZWRWYWx1ZXM/KG51bGwhPWJbdF18fChiW3RdPXt9KSxiW3RdW29dPUUpOmJbdF09RSl9aWYoRT09PUJsKXtpZih1KWJyZWFrO2Zvcihjb25zdCBlIG9mIG51bGwhPShvPW4uc2NvcGVzKT9vOmgpbnVsbD09Q3x8Qy5kZWxldGUoZSk7aWYoMD09PShudWxsPT1DP3ZvaWQgMDpDLnNpemUpKWJyZWFrfX1pZigoRSE9PUJsfHwhdSkmJigwIT09KG51bGw9PUM/dm9pZCAwOkMuc2l6ZSkmJmwpKXtjb25zdCB0PXtkYXR1bTptKG0oe30sdiksZSksa2V5czp5LHZhbHVlczpifTshdSYmQyYmQy5zaXplPGguc2l6ZSYmKGYrKyx0LnZhbGlkU2NvcGVzPVsuLi5DXSkscFtnKytdPXR9fXAubGVuZ3RoPWc7Y29uc3Qgdj1lPT57Y29uc3QgdD1kLmdldChlKS5nZXREb21haW4oKTtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KSYmdFswXT50WzFdP1tdOlsuLi50XX07cmV0dXJue3R5cGU6InVuZ3JvdXBlZCIsaW5wdXQ6e2NvdW50OmUubGVuZ3RofSxkYXRhOnAsZG9tYWluOntrZXlzOm4ubWFwKGU9PnYoZSkpLHZhbHVlczphLm1hcChlPT52KGUpKX0sZGVmczp7YWxsU2NvcGVzSGF2ZVNhbWVEZWZzOnUsa2V5czpuLHZhbHVlczphfSxwYXJ0aWFsVmFsaWREYXRhQ291bnQ6Zix0aW1lOjB9fWdyb3VwRGF0YShlLHQpe3ZhciBpLHMscixvO2NvbnN0IG49bmV3IE1hcDtmb3IoY29uc3QgYSBvZiBlLmRhdGEpe2NvbnN0e2tleXM6ZSx2YWx1ZXM6bCxkYXR1bTpkLHZhbGlkU2NvcGVzOmN9PWEsaD10P3QoYSk6ZSx1PUdsKGgpO2lmKG4uaGFzKHUpKXtjb25zdCBlPW4uZ2V0KHUpO2lmKGUudmFsdWVzLnB1c2gobCksZS5kYXR1bS5wdXNoKGQpLG51bGwhPWMpZm9yKGxldCB0PTA7dDwobnVsbCE9KHM9bnVsbD09KGk9ZS52YWxpZFNjb3Blcyk/dm9pZCAwOmkubGVuZ3RoKT9zOjApO3QrKyl7Y29uc3QgaT1udWxsPT0ocj1lLnZhbGlkU2NvcGVzKT92b2lkIDA6clt0XTtjLnNvbWUoZT0+ZT09PWkpfHwobnVsbD09KG89ZS52YWxpZFNjb3Blcyl8fG8uc3BsaWNlKHQsMSkpfX1lbHNlIG4uc2V0KHUse2tleXM6aCx2YWx1ZXM6W2xdLGRhdHVtOltkXSx2YWxpZFNjb3BlczpjfSl9Y29uc3QgYT1uZXcgQXJyYXkobi5zaXplKSxsPW5ldyBBcnJheShuLnNpemUpO2xldCBkPTA7Zm9yKGNvbnN0Wyx7a2V5czplLHZhbHVlczp0LGRhdHVtOmksdmFsaWRTY29wZXM6c31db2Ygbi5lbnRyaWVzKCkpMCE9PShudWxsPT1zP3ZvaWQgMDpzLmxlbmd0aCkmJihsW2RdPWUsYVtkKytdPXtrZXlzOmUsdmFsdWVzOnQsZGF0dW06aSx2YWxpZFNjb3BlczpzfSk7cmV0dXJuIGYobSh7fSxlKSx7dHlwZToiZ3JvdXBlZCIsZGF0YTphLGRvbWFpbjpmKG0oe30sZS5kb21haW4pLHtncm91cHM6bH0pfSl9YWdncmVnYXRlRGF0YShlKXt2YXIgdCxpLHMscixvLG4sYTtjb25zdHthZ2dyZWdhdGVzOmx9PXRoaXM7aWYoIWwpcmV0dXJuO2NvbnN0IGQ9bC5tYXAoKCk9PlsxLzAsLTEvMF0pLGM9bC5tYXAoZT0+dGhpcy52YWx1ZUdyb3VwSWR4TG9va3VwKGUpKSxoPWwubWFwKGU9PmUuYWdncmVnYXRlRnVuY3Rpb24pLHU9bC5tYXAoZT0+ZS5ncm91cEFnZ3JlZ2F0ZUZ1bmN0aW9uKSxwPWwubWFwKGU9PmUuZmluYWxGdW5jdGlvbik7Zm9yKGNvbnN0IGcgb2YgZS5kYXRhKXtsZXR7dmFsdWVzOm19PWc7Y29uc3R7dmFsaWRTY29wZXM6Zn09ZztudWxsIT1nLmFnZ1ZhbHVlc3x8KGcuYWdnVmFsdWVzPW5ldyBBcnJheShjLmxlbmd0aCkpLCJ1bmdyb3VwZWQiPT09ZS50eXBlJiYobT1bbV0pO2xldCB2PTA7Zm9yKGNvbnN0IGUgb2YgYyl7aWYoIShudWxsPT0odD1udWxsPT1mP3ZvaWQgMDpmLnNvbWUoZT0+e3ZhciB0O3JldHVybiBudWxsPT0odD1sW3ZdLm1hdGNoU2NvcGVzKT92b2lkIDA6dC5zb21lKHQ9PmU9PT10KX0pKXx8dCkpe3YrKztjb250aW51ZX1sZXQgYz1udWxsIT0ocz1udWxsPT0oaT11W3ZdKT92b2lkIDA6aS5jYWxsKHUpKT9zOk5sKFtdKTtmb3IoY29uc3QgdCBvZiBtKXtjb25zdCBpPWUubWFwKGU9PnRbZV0pLHM9aFt2XShpLGcua2V5cyk7cyYmKGM9bnVsbCE9KG89bnVsbD09KHI9dVt2XSk/dm9pZCAwOnIuY2FsbCh1LHMsYykpP286TmwocyxjKSl9Y29uc3QgQz0obnVsbCE9KGE9bnVsbD09KG49cFt2XSk/dm9pZCAwOm4uY2FsbChwLGMpKT9hOmMpLm1hcChlPT57cmV0dXJuIHQ9ZSxOdW1iZXIuaXNJbnRlZ2VyKHQpP3Q6TWF0aC5hYnModCk+MWU0P01hdGgudHJ1bmModCk6TWF0aC5yb3VuZCgxZTQqdCkvMWU0O3ZhciB0fSk7TmwoQyxkW3ZdKSxnLmFnZ1ZhbHVlc1t2KytdPUN9fWUuZG9tYWluLmFnZ1ZhbHVlcz1kfXBvc3RQcm9jZXNzR3JvdXBzKGUpe3ZhciB0LGkscyxyLG87Y29uc3R7Z3JvdXBQcm9jZXNzb3JzOm59PXRoaXM7aWYoIW4pcmV0dXJuO2NvbnN0IGE9bmV3IFNldCxsPW5ldyBNYXAsZD1uZXcgTWFwLGM9bmV3IE1hcDtmb3IoY29uc3QgZSBvZiBuKXtjb25zdCB0PXRoaXMudmFsdWVHcm91cElkeExvb2t1cChlKTtkLnNldChlLHQpLGMuc2V0KGUsZS5hZGp1c3QoKSk7Zm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD10aGlzLnZhbHVlc1tlXTthLmFkZChlKSxsLnNldChlLG5ldyBJbCgiY2F0ZWdvcnkiPT09dC52YWx1ZVR5cGU/ImRpc2NyZXRlIjoiY29udGludW91cyIpKX19Y29uc3QgaD1lPT57dmFyIHQ7Zm9yKGNvbnN0IGkgb2YgYSludWxsPT0odD1sLmdldChpKSl8fHQuZXh0ZW5kKGVbaV0pfTtmb3IoY29uc3QgYSBvZiBlLmRhdGEpe2Zvcihjb25zdCBsIG9mIG4pe2lmKCEobnVsbD09KGk9bnVsbD09KHQ9YS52YWxpZFNjb3Blcyk/dm9pZCAwOnQuc29tZShlPT57dmFyIHQ7cmV0dXJuIG51bGw9PSh0PWwubWF0Y2hTY29wZXMpP3ZvaWQgMDp0LnNvbWUodD0+ZT09PXQpfSkpfHxpKSljb250aW51ZTtjb25zdCBuPW51bGwhPShzPWQuZ2V0KGwpKT9zOltdLGg9bnVsbCE9KG89bnVsbD09KHI9Yy5nZXQobCkpP3ZvaWQgMDpyKCkpP286KCk9Pnt9O2lmKCJncm91cGVkIiE9PWUudHlwZSlhLnZhbHVlcyYmaChhLnZhbHVlcyxuKTtlbHNlIGZvcihjb25zdCBlIG9mIGEudmFsdWVzKWUmJmgoZSxuKX1pZigiZ3JvdXBlZCI9PT1lLnR5cGUpZm9yKGNvbnN0IGUgb2YgYS52YWx1ZXMpaChlKTtlbHNlIGgoYS52YWx1ZXMpfWZvcihjb25zdFt0LGldb2YgbCllLmRvbWFpbi52YWx1ZXNbdF09Wy4uLmkuZ2V0RG9tYWluKCldfXBvc3RQcm9jZXNzUHJvcGVydGllcyhlKXtjb25zdHtwcm9wZXJ0eVByb2Nlc3NvcnM6dH09dGhpcztpZih0KWZvcihjb25zdHthZGp1c3Q6aSxwcm9wZXJ0eTpzLHNjb3BlczpyfW9mIHQpaSgpKGUsdGhpcy52YWx1ZUlkeExvb2t1cChudWxsIT1yP3I6W10scykpfXJlZHVjZURhdGEoZSl7dmFyIHQsaTtjb25zdHtyZWR1Y2VyczpzfT10aGlzLHI9cy5tYXAoZT0+ZS5zY29wZXMpLG89cy5tYXAoZT0+ZS5yZWR1Y2VyKCkpLG49cy5tYXAoZT0+ZS5pbml0aWFsVmFsdWUpO2Zvcihjb25zdCBzIG9mIGUuZGF0YSl7bGV0IGU9MDtmb3IoY29uc3QgYSBvZiBvKXtudWxsPT0oaT1udWxsPT0odD1zLnZhbGlkU2NvcGVzKT92b2lkIDA6dC5zb21lKHQ9Pnt2YXIgaTtyZXR1cm4gbnVsbD09KGk9cltlXSk/dm9pZCAwOmkuc29tZShlPT50PT09ZSl9KSl8fGk/KG5bZV09YShuW2VdLHMpLGUrKyk6ZSsrfX1mb3IobGV0IHQ9MDt0PG4ubGVuZ3RoO3QrKyludWxsIT1lLnJlZHVjZWR8fChlLnJlZHVjZWQ9e30pLGUucmVkdWNlZFtzW3RdLnByb3BlcnR5XT1uW3RdfXBvc3RQcm9jZXNzRGF0YShlKXtjb25zdHtwcm9jZXNzb3JzOnR9PXRoaXM7Zm9yKGNvbnN0IGkgb2YgdCludWxsIT1lLnJlZHVjZWR8fChlLnJlZHVjZWQ9e30pLGUucmVkdWNlZFtpLnByb3BlcnR5XT1pLmNhbGN1bGF0ZShlKX1pbml0RGF0YURvbWFpblByb2Nlc3Nvcigpe3ZhciBlO2NvbnN0e2tleXM6dCx2YWx1ZXM6aX09dGhpcyxzPW5ldyBTZXQ7Zm9yKGNvbnN0IHQgb2YgaSlmb3IoY29uc3QgaSBvZiBudWxsIT0oZT10LnNjb3Blcyk/ZTpbXSlzLmFkZChpKTtjb25zdCByPXMuc2l6ZSxvPW5ldyBNYXAsbj1uZXcgTWFwO2xldCBhPSEwO2NvbnN0IGw9KGUsdCxpPW8pPT57dmFyIHM7ImNhdGVnb3J5Ij09PXQ/aS5zZXQoZSxuZXcgSWwoImRpc2NyZXRlIikpOihpLnNldChlLG5ldyBJbCgiY29udGludW91cyIpKSxhJiYoYT0obnVsbCE9KHM9ZS5zY29wZXMpP3M6W10pLmxlbmd0aD09PXIpKX0sZD0oKT0+e3QuZm9yRWFjaChlPT5sKGUsZS52YWx1ZVR5cGUpKSxpLmZvckVhY2goZT0+bChlLGUudmFsdWVUeXBlKSl9O2QoKTtjb25zdCBjPXRoaXMuYnVpbGRBY2Nlc3NvcnMoLi4udCwuLi5pKTtyZXR1cm57ZGF0YURvbWFpbjpvLHByb2Nlc3NWYWx1ZTooZSx0LGkscyk9Pnt2YXIgcixhLGwsaCx1O2xldCBwLGc9ITE7aWYoZS5wcm9wZXJ0eSBpbiBjKXt0cnl7cD1jW2UucHJvcGVydHldKHQpfWNhdGNoKGUpe31nPXZvaWQgMCE9PXB9ZWxzZSBnPWUucHJvcGVydHkgaW4gdCxwPWc/dFtlLnByb3BlcnR5XTplLm1pc3NpbmdWYWx1ZTtpZihudWxsIT1lLmZvcmNlVmFsdWUpe3A9ZyYmWnMocCk/LTEqZS5mb3JjZVZhbHVlOmUuZm9yY2VWYWx1ZSxnPSEwfWlmKCFnJiYhKCJtaXNzaW5nVmFsdWUiaW4gZSkpe2NvbnN0IHQ9bnVsbCE9KHI9ZS5taXNzaW5nLmdldChzKSk/cjowO2UubWlzc2luZy5zZXQocyx0KzEpfWlmKG8uaGFzKGUpfHxkKCksZyl7aWYoIShudWxsPT0obD1udWxsPT0oYT1lLnZhbGlkYXRpb24pP3ZvaWQgMDphLmNhbGwoZSxwLHQpKXx8bCkpe2lmKCEoImludmFsaWRWYWx1ZSJpbiBlKSlyZXR1cm4iaW50ZWdyYXRlZCIhPT10aGlzLm1vZGUmJkwud2Fybk9uY2UoYGludmFsaWQgdmFsdWUgb2YgdHlwZSBbJHt0eXBlb2YgcH1dIGlnbm9yZWQ6YCxgWyR7cH1dYCksQmw7cD1lLmludmFsaWRWYWx1ZX19cmV0dXJuIGUucHJvY2Vzc29yJiYobi5oYXMoZSl8fG4uc2V0KGUsZS5wcm9jZXNzb3IoKSkscD1udWxsPT0oaD1uLmdldChlKSk/dm9pZCAwOmgocCxpIT09Qmw/aTp2b2lkIDApKSxudWxsPT0odT1vLmdldChlKSl8fHUuZXh0ZW5kKHApLHB9LGluaXREYXRhRG9tYWluOmQsc2NvcGVzOnMsYWxsU2NvcGVzSGF2ZVNhbWVEZWZzOmF9fWJ1aWxkQWNjZXNzb3JzKC4uLmUpe2NvbnN0IHQ9e307aWYoImludGVncmF0ZWQiPT09dGhpcy5tb2RlKXJldHVybiB0O2Zvcihjb25zdCBpIG9mIGUpe2lmKCEoaS5wcm9wZXJ0eS5pbmRleE9mKCIuIik+PTB8fGkucHJvcGVydHkuaW5kZXhPZigiWyIpPj0wKSljb250aW51ZTtsZXQgZTtlPWkucHJvcGVydHkuc3RhcnRzV2l0aCgiWyIpP2ByZXR1cm4gZGF0dW0ke2kucHJvcGVydHl9O2A6YHJldHVybiBkYXR1bS4ke2kucHJvcGVydHl9O2AsdFtpLnByb3BlcnR5XT1uZXcgRnVuY3Rpb24oImRhdHVtIixlKX1yZXR1cm4gdH19O3ZhciBXbD1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLm1vZGU9ZSx0aGlzLmRlYnVnPUZzLmNyZWF0ZSghMCwiZGF0YS1tb2RlbCIpLHRoaXMucmVxdWVzdGVkPVtdLHRoaXMuc3RhdHVzPSJzZXR1cCJ9cmVxdWVzdChlLHQsaSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtpZigic2V0dXAiIT09dGhpcy5zdGF0dXMpdGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSBkYXRhIHJlcXVlc3QgYWZ0ZXIgZGF0YSBzZXR1cCBwaGFzZS4iKTtyZXR1cm4gbmV3IFByb21pc2UoKHMscik9Pnt0aGlzLnJlcXVlc3RlZC5wdXNoKHtpZDplLG9wdHM6aSxkYXRhOnQscmVzdWx0Q2I6cyxyZWplY3Q6cn0pfSl9KSl9ZXhlY3V0ZSgpe2lmKCJzZXR1cCIhPT10aGlzLnN0YXR1cyl0aHJvdyBuZXcgRXJyb3IoIkFHIENoYXJ0cyAtIGRhdGEgcmVxdWVzdCBhZnRlciBkYXRhIHNldHVwIHBoYXNlLiIpO3RoaXMuc3RhdHVzPSJleGVjdXRlZCIsdGhpcy5kZWJ1ZygiRGF0YUNvbnRyb2xsZXIuZXhlY3V0ZSgpIC0gcmVxdWVzdGVkIix0aGlzLnJlcXVlc3RlZCk7Y29uc3R7dmFsaWQ6ZSxpbnZhbGlkOnR9PXRoaXMudmFsaWRhdGVSZXF1ZXN0cyh0aGlzLnJlcXVlc3RlZCk7dGhpcy5kZWJ1ZygiRGF0YUNvbnRyb2xsZXIuZXhlY3V0ZSgpIC0gdmFsaWRhdGVkIixlKTtjb25zdCBpPXRoaXMubWVyZ2VSZXF1ZXN0ZWQoZSk7dGhpcy5kZWJ1ZygiRGF0YUNvbnRyb2xsZXIuZXhlY3V0ZSgpIC0gbWVyZ2VkIixpKSx0aGlzLmRlYnVnLmNoZWNrKCkmJih3aW5kb3cucHJvY2Vzc2VkRGF0YT1bXSk7Y29uc3Qgcz1lLnNvbWUoZT0+bnVsbCE9ZS5kYXRhKTtmb3IoY29uc3R7b3B0czp0LGRhdGE6cixyZXN1bHRDYnM6byxyZWplY3RzOm4saWRzOmF9b2YgaSl7Y29uc3QgaT1zfHx0LnByb3BzLnNvbWUoZT0+e3ZhciB0O3JldHVybigidmFsdWUiPT09ZS50eXBlfHwia2V5Ij09PWUudHlwZSkmJihudWxsIT0odD1lLnVzZVNjb3BlZFZhbHVlcykmJnQpfSk7dHJ5e2NvbnN0IHM9bmV3IEhsKGYobSh7fSx0KSx7bW9kZTp0aGlzLm1vZGV9KSksbD1zLnByb2Nlc3NEYXRhKHIsZSk7dGhpcy5kZWJ1Zy5jaGVjaygpJiZ3aW5kb3cucHJvY2Vzc2VkRGF0YS5wdXNoKGwpLGwmJjA9PT1sLnBhcnRpYWxWYWxpZERhdGFDb3VudD9vLmZvckVhY2goKGUsdCk9Pntjb25zdCByPWFbdF07bGV0IG89bDtpJiYobz10aGlzLmV4dHJhY3RTY29wZWREYXRhKHIsbCkpLGUoe2RhdGFNb2RlbDpzLHByb2Nlc3NlZERhdGE6b30pfSk6bD90aGlzLnNwbGl0UmVzdWx0KHMsbCxhLG8pOm4uZm9yRWFjaChlPT5lKG5ldyBFcnJvcigiQUcgQ2hhcnRzIC0gbm8gcHJvY2Vzc2VkIGRhdGEgZ2VuZXJhdGVkIikpKX1jYXRjaChlKXtuLmZvckVhY2godD0+dChlKSl9fXQuZm9yRWFjaCgoe2Vycm9yOmUscmVqZWN0OnR9KT0+dChlKSl9ZXh0cmFjdFNjb3BlZERhdGEoZSx0KXtjb25zdCBpPXQ9PkFycmF5LmlzQXJyYXkodCk/dC5tYXAoaSk6bShtKHt9LHQpLHRbZV0pLHM9dD0+e3ZhciBpO3JldHVybiBBcnJheS5pc0FycmF5KHQpP3QubWFwKHMpOm51bGwhPShpPW51bGw9PXQ/dm9pZCAwOnRbZV0pP2k6dH07cmV0dXJuIGYobSh7fSx0KSx7ZGF0YTp0LmRhdGEubWFwKGU9PmYobSh7fSxlKSx7ZGF0dW06aShlLmRhdHVtKSx2YWx1ZXM6ZS52YWx1ZXMubWFwKHMpfSkpfSl9dmFsaWRhdGVSZXF1ZXN0cyhlKXtjb25zdCB0PVtdLGk9W107Zm9yKGNvbnN0W3Mscl1vZiBlLmVudHJpZXMoKSlzPjAmJnIuZGF0YS5sZW5ndGghPT1lWzBdLmRhdGEubGVuZ3RoJiYhMT09PXIub3B0cy5ncm91cEJ5RGF0YT9pLnB1c2goZihtKHt9LHIpLHtlcnJvcjpuZXcgRXJyb3IoImFsbCBzZXJpZXNbXS5kYXRhIGFycmF5cyBtdXN0IGJlIG9mIHRoZSBzYW1lIGxlbmd0aCBhbmQgaGF2ZSBtYXRjaGluZyBrZXlzLiIpfSkpOnQucHVzaChyKTtyZXR1cm57dmFsaWQ6dCxpbnZhbGlkOml9fW1lcmdlUmVxdWVzdGVkKGUpe2NvbnN0IHQ9W10saT1lPT5lLmZpbHRlcihlPT4ia2V5Ij09PWUudHlwZSkubWFwKGU9PmUucHJvcGVydHkpLmpvaW4oIjsiKSxzPSh7b3B0czplLGRhdGE6dH0pPT5zPT4oITE9PT1lLmdyb3VwQnlEYXRhfHxzWzBdLmRhdGE9PT10KSYmc1swXS5vcHRzLmdyb3VwQnlLZXlzPT09ZS5ncm91cEJ5S2V5cyYmc1swXS5vcHRzLmRhdGFWaXNpYmxlPT09ZS5kYXRhVmlzaWJsZSYmc1swXS5vcHRzLmdyb3VwQnlGbj09PWUuZ3JvdXBCeUZuJiZpKHNbMF0ub3B0cy5wcm9wcyk9PT1pKGUucHJvcHMpLHI9ZT0+dD0+e3ZhciBpO2lmKHQudHlwZSE9PWUudHlwZSlyZXR1cm4hMTtjb25zdCBzPW51bGwhPShpPXl0KHQsZSkpP2k6e307cmV0dXJuIGRlbGV0ZSBzLnNjb3BlcyxkZWxldGUgcy5pZCxkZWxldGUgcy5pZHMsInVzZVNjb3BlZFZhbHVlcyJpbiBzJiZkZWxldGUgcy51c2VTY29wZWRWYWx1ZXMsMD09PU9iamVjdC5rZXlzKHMpLmxlbmd0aH0sbz1lPT57dmFyIHQ7aWYoImtleSIhPT1lLnR5cGUmJiJ2YWx1ZSIhPT1lLnR5cGUpcmV0dXJuO2NvbnN0IGk9bmV3IFNldChudWxsIT0odD1lLnNjb3Blcyk/dDpbXSk7ZS51c2VTY29wZWRWYWx1ZXM9aS5zaXplPjF9LG49ZT0+ZihtKHt9LGVbMF0pLHtwcm9wczplLnJlZHVjZSgoZSx0KT0+e3ZhciBpLHMsbixhO2Zvcihjb25zdCBsIG9mIHQucHJvcHMpe2lmKG51bGwhPWwuaWQpe251bGwhPWwuaWRzfHwobC5pZHM9W10pO2Zvcihjb25zdCBlIG9mIG51bGwhPShpPWwuc2NvcGVzKT9pOltdKWwuaWRzLnB1c2goW2UsbC5pZF0pfWNvbnN0IHQ9ZS5maW5kKHIobCkpO3Q/KG51bGwhPXQuc2NvcGVzfHwodC5zY29wZXM9W10pLHQuc2NvcGVzLnB1c2goLi4ubnVsbCE9KHM9bC5zY29wZXMpP3M6W10pLG8obCksImtleSIhPT10LnR5cGUmJiJ2YWx1ZSIhPT10LnR5cGV8fCEobnVsbD09KG49bC5pZHMpP3ZvaWQgMDpuLmxlbmd0aCl8fG51bGw9PShhPXQuaWRzKXx8YS5wdXNoKC4uLmwuaWRzKSk6KG8obCksZS5wdXNoKGwpKX1yZXR1cm4gZX0sW10pfSk7Zm9yKGNvbnN0IGkgb2YgZSl7Y29uc3QgZT10LmZpbmQocyhpKSk7ZT9lLnB1c2goaSk6dC5wdXNoKFtpXSl9cmV0dXJuIHQubWFwKGU9Pih7aWRzOmUubWFwKCh7aWQ6ZX0pPT5lKSxyZXN1bHRDYnM6ZS5tYXAoKHtyZXN1bHRDYjplfSk9PmUpLHJlamVjdHM6ZS5tYXAoKHtyZWplY3Q6ZX0pPT5lKSxkYXRhOmVbMF0uZGF0YSxvcHRzOm4oZS5tYXAoKHtvcHRzOmV9KT0+ZSkpfSkpfXNwbGl0UmVzdWx0KGUsdCxpLHMpe2ZvcihsZXQgcj0wO3I8aS5sZW5ndGg7cisrKXtjb25zdCBvPWlbcl07KDAsc1tyXSkoe2RhdGFNb2RlbDplLHByb2Nlc3NlZERhdGE6ZihtKHt9LHQpLHtkYXRhOnQuZGF0YS5maWx0ZXIoKHt2YWxpZFNjb3BlczplfSk9Pm51bGw9PWV8fGUuc29tZShlPT5lPT09bykpfSl9KX19fSxqbD1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMucmVnaXN0ZXJlZExpc3RlbmVycz1uZXcgTWFwfWFkZExpc3RlbmVyKGUsdCl7Y29uc3QgaT17c3ltYm9sOlN5bWJvbChlKSxoYW5kbGVyOnR9O3JldHVybiB0aGlzLnJlZ2lzdGVyZWRMaXN0ZW5lcnMuaGFzKGUpP3RoaXMucmVnaXN0ZXJlZExpc3RlbmVycy5nZXQoZSkucHVzaChpKTp0aGlzLnJlZ2lzdGVyZWRMaXN0ZW5lcnMuc2V0KGUsW2ldKSwoKT0+dGhpcy5yZW1vdmVMaXN0ZW5lcihpLnN5bWJvbCl9cmVtb3ZlTGlzdGVuZXIoZSl7Zm9yKGNvbnN0W3QsaV1vZiB0aGlzLnJlZ2lzdGVyZWRMaXN0ZW5lcnMuZW50cmllcygpKXtjb25zdCBzPWkuZmluZEluZGV4KHQ9PnQuc3ltYm9sPT09ZSk7aWYocz49MCl7aS5zcGxpY2UocywxKSwwPT09aS5sZW5ndGgmJnRoaXMucmVnaXN0ZXJlZExpc3RlbmVycy5kZWxldGUodCk7YnJlYWt9fX1kaXNwYXRjaChlLC4uLnQpe2Zvcihjb25zdCBpIG9mIHRoaXMuZ2V0TGlzdGVuZXJzQnlUeXBlKGUpKXRyeXtpLmhhbmRsZXIoLi4udCl9Y2F0Y2goZSl7TC5lcnJvck9uY2UoZSl9fWRpc3BhdGNoV3JhcEhhbmRsZXJzKGUsdCwuLi5pKXtmb3IoY29uc3QgcyBvZiB0aGlzLmdldExpc3RlbmVyc0J5VHlwZShlKSl0cnl7dChzLmhhbmRsZXIsLi4uaSl9Y2F0Y2goZSl7TC5lcnJvck9uY2UoZSl9fWdldExpc3RlbmVyc0J5VHlwZShlKXt2YXIgdDtyZXR1cm4gbnVsbCE9KHQ9dGhpcy5yZWdpc3RlcmVkTGlzdGVuZXJzLmdldChlKSk/dDpbXX1kZXN0cm95KCl7dGhpcy5yZWdpc3RlcmVkTGlzdGVuZXJzLmNsZWFyKCl9fSxVbD1jbGFzcyBleHRlbmRzIGpse2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5hbmltYXRpb25NYW5hZ2VyPWUsdGhpcy5kaXNwYXRjaE9ubHlMYXRlc3Q9ITAsdGhpcy5kaXNwYXRjaFRocm90dGxlPTAsdGhpcy5yZXF1ZXN0VGhyb3R0bGU9MzAwLHRoaXMuaXNMb2FkaW5nSW5pdGlhbERhdGE9ITEsdGhpcy5mcmVzaFJlcXVlc3RzPVtdLHRoaXMucmVxdWVzdENvdW50ZXI9MCx0aGlzLmRlYnVnPUZzLmNyZWF0ZSghMCwiZGF0YS1tb2RlbCIsImRhdGEtc291cmNlIiksdGhpcy50aHJvdHRsZWRGZXRjaD10aGlzLmNyZWF0ZVRocm90dGxlZEZldGNoKHRoaXMucmVxdWVzdFRocm90dGxlKSx0aGlzLnRocm90dGxlZERpc3BhdGNoPXRoaXMuY3JlYXRlVGhyb3R0bGVkRGlzcGF0Y2godGhpcy5kaXNwYXRjaFRocm90dGxlKX11cGRhdGVDYWxsYmFjayhlKXsiZnVuY3Rpb24iPT10eXBlb2YgZSYmKHRoaXMuZGVidWcoIkRhdGFTZXJ2aWNlIC0gdXBkYXRlZCBkYXRhIHNvdXJjZSBjYWxsYmFjayIpLHRoaXMuZGF0YVNvdXJjZUNhbGxiYWNrPWUsdGhpcy5pc0xvYWRpbmdJbml0aWFsRGF0YT0hMCx0aGlzLmFuaW1hdGlvbk1hbmFnZXIuc2tpcCgpLHRoaXMuZGlzcGF0Y2goImRhdGEtc291cmNlLWNoYW5nZSIpKX1jbGVhckNhbGxiYWNrKCl7dGhpcy5kYXRhU291cmNlQ2FsbGJhY2s9dm9pZCAwfWxvYWQoZSl7dGhpcy50aHJvdHRsZWRGZXRjaChlKX1pc0xhenkoKXtyZXR1cm4gbnVsbCE9dGhpcy5kYXRhU291cmNlQ2FsbGJhY2t9aXNMb2FkaW5nKCl7cmV0dXJuIHRoaXMuaXNMYXp5KCkmJih0aGlzLmlzTG9hZGluZ0luaXRpYWxEYXRhfHx0aGlzLmZyZXNoUmVxdWVzdHMubGVuZ3RoPjApfWNyZWF0ZVRocm90dGxlZEZldGNoKGUpe3JldHVybiBNKGU9PnRoaXMuZmV0Y2goZSksZSx7bGVhZGluZzohMSx0cmFpbGluZzohMH0pfWNyZWF0ZVRocm90dGxlZERpc3BhdGNoKGUpe3JldHVybiBNKChlLHQpPT57dGhpcy5kZWJ1ZygiRGF0YVNlcnZpY2UgLSBkaXNwYXRjaGluZyAnZGF0YS1sb2FkJyB8ICIrZSksdGhpcy5kaXNwYXRjaCgiZGF0YS1sb2FkIix7dHlwZToiZGF0YS1sb2FkIixkYXRhOnR9KX0sZSx7bGVhZGluZzohMCx0cmFpbGluZzohMH0pfWZldGNoKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7aWYoIXRoaXMuZGF0YVNvdXJjZUNhbGxiYWNrKXRocm93IG5ldyBFcnJvcigiRGF0YVNlcnZpY2UgLSBbZGF0YVNvdXJjZS5nZXREYXRhXSBjYWxsYmFjayBub3QgaW5pdGlhbGlzZWQiKTtjb25zdCB0PXBlcmZvcm1hbmNlLm5vdygpLGk9dGhpcy5yZXF1ZXN0Q291bnRlcisrO2xldCBzO3RoaXMuZGVidWcoIkRhdGFTZXJ2aWNlIC0gcmVxdWVzdGluZyB8ICIraSksdGhpcy5mcmVzaFJlcXVlc3RzLnB1c2goaSk7dHJ5e3M9eWllbGQgdGhpcy5kYXRhU291cmNlQ2FsbGJhY2soZSksdGhpcy5kZWJ1ZyhgRGF0YVNlcnZpY2UgLSByZXNwb25zZSB8ICR7cGVyZm9ybWFuY2Uubm93KCktdH1tcyB8ICR7aX1gKX1jYXRjaChlKXt0aGlzLmRlYnVnKCJEYXRhU2VydmljZSAtIHJlcXVlc3QgZmFpbGVkIHwgIitpKSxMLmVycm9yT25jZShgRGF0YVNlcnZpY2UgLSByZXF1ZXN0IGZhaWxlZCB8IFske2V9XWApfXRoaXMuaXNMb2FkaW5nSW5pdGlhbERhdGE9ITE7Y29uc3Qgcj10aGlzLmZyZXNoUmVxdWVzdHMuZmluZEluZGV4KGU9PmU9PT1pKTstMT09PXJ8fHRoaXMuZGlzcGF0Y2hPbmx5TGF0ZXN0JiZyIT09dGhpcy5mcmVzaFJlcXVlc3RzLmxlbmd0aC0xP3RoaXMuZGVidWcoIkRhdGFTZXJ2aWNlIC0gZGlzY2FyZGluZyBzdGFsZSByZXF1ZXN0IHwgIitpKToodGhpcy5mcmVzaFJlcXVlc3RzPXRoaXMuZnJlc2hSZXF1ZXN0cy5zbGljZShyKzEpLEFycmF5LmlzQXJyYXkocyk/dGhpcy50aHJvdHRsZWREaXNwYXRjaChpLHMpOnRoaXMuZGlzcGF0Y2goImRhdGEtZXJyb3IiKSl9KSl9fTt5KFtobih7bmV3VmFsdWUoZSl7dGhpcy50aHJvdHRsZWREaXNwYXRjaD10aGlzLmNyZWF0ZVRocm90dGxlZERpc3BhdGNoKGUpfX0pXSxVbC5wcm90b3R5cGUsImRpc3BhdGNoVGhyb3R0bGUiLDIpLHkoW2huKHtuZXdWYWx1ZShlKXt0aGlzLnRocm90dGxlZEZldGNoPXRoaXMuY3JlYXRlVGhyb3R0bGVkRmV0Y2goZSl9fSldLFVsLnByb3RvdHlwZSwicmVxdWVzdFRocm90dGxlIiwyKTt2YXIgemw9WyEwLCJhbmltYXRpb24iXSxLbD1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuc3RvcHBlZENicz1uZXcgU2V0LHRoaXMuY29udHJvbGxlcnM9bmV3IE1hcCx0aGlzLmRlYnVnPUZzLmNyZWF0ZSguLi56bCksdGhpcy5jdXJyZW50UGhhc2U9MCx0aGlzLnBoYXNlcz1uZXcgTWFwKE1yLm1hcChlPT5bZSxbXV0pKSx0aGlzLnNraXBBbmltYXRpb25zPSExfWdldCBzaXplKCl7cmV0dXJuIHRoaXMuY29udHJvbGxlcnMuc2l6ZX1pc0FjdGl2ZSgpe3JldHVybiB0aGlzLmNvbnRyb2xsZXJzLnNpemU+MH1nZXRBY3RpdmVDb250cm9sbGVycygpe3ZhciBlO3JldHVybiBudWxsIT0oZT10aGlzLnBoYXNlcy5nZXQoTXJbdGhpcy5jdXJyZW50UGhhc2VdKSk/ZTpbXX1jaGVja092ZXJsYXBwaW5nSWQoZSl7bnVsbCE9ZSYmdGhpcy5jb250cm9sbGVycy5oYXMoZSkmJih0aGlzLmNvbnRyb2xsZXJzLmdldChlKS5zdG9wKCksdGhpcy5kZWJ1ZygiU2tpcHBpbmcgYW5pbWF0aW9uIGJhdGNoIGR1ZSB0byB1cGRhdGUgb2YgZXhpc3RpbmcgYW5pbWF0aW9uOiAiK2UpLHRoaXMuc2tpcCgpKX1hZGRBbmltYXRpb24oZSl7dmFyIHQ7aWYoZS5pc0NvbXBsZXRlKXJldHVybjtpZihNci5pbmRleE9mKGUucGhhc2UpPHRoaXMuY3VycmVudFBoYXNlKXJldHVybiB0aGlzLmRlYnVnKCJTa2lwcGluZyBhbmltYXRpb24gZHVlIHRvIGJlaW5nIGZvciBhbiBlYXJsaWVyIHBoYXNlIixlLmlkKSx2b2lkIGUuc3RvcCgpO3RoaXMuY29udHJvbGxlcnMuc2V0KGUuaWQsZSksbnVsbD09KHQ9dGhpcy5waGFzZXMuZ2V0KGUucGhhc2UpKXx8dC5wdXNoKGUpfXJlbW92ZUFuaW1hdGlvbihlKXt0aGlzLmNvbnRyb2xsZXJzLmRlbGV0ZShlLmlkKTtjb25zdCB0PXRoaXMucGhhc2VzLmdldChlLnBoYXNlKSxpPW51bGw9PXQ/dm9pZCAwOnQuaW5kZXhPZihlKTtudWxsIT1pJiZpPj0wJiYobnVsbD09dHx8dC5zcGxpY2UoaSwxKSl9cHJvZ3Jlc3MoZSl7Y29uc3QgdD1Nclt0aGlzLmN1cnJlbnRQaGFzZV07bGV0IGk9Wy4uLnRoaXMuZ2V0QWN0aXZlQ29udHJvbGxlcnMoKV07Y29uc3Qgcz10aGlzLmNvbnRyb2xsZXJzLnNpemU7dGhpcy5kZWJ1ZyhgQW5pbWF0aW9uQmF0Y2ggLSBwcm9ncmVzc2luZyBieSAke2V9OyBjdXJyZW50IHBoYXNlICR7dH0gd2l0aCAke251bGw9PWk/dm9pZCAwOmkubGVuZ3RofSBhY3RpdmUgY29udHJvbGxlcnMgb2YgJHtzfSB0b3RhbGAsdGhpcy5waGFzZXMpO2xldCByPTA9PT1lPy4wMTplO2NvbnN0IG89KCk9Pm51bGw9PU1yW3RoaXMuY3VycmVudFBoYXNlXSxuPSgpPT57Zm9yKGk9Wy4uLnRoaXMuZ2V0QWN0aXZlQ29udHJvbGxlcnMoKV07IW8oKSYmMD09PWkubGVuZ3RoOyl0aGlzLmN1cnJlbnRQaGFzZSsrLGk9Wy4uLnRoaXMuZ2V0QWN0aXZlQ29udHJvbGxlcnMoKV0sdGhpcy5kZWJ1ZygiQW5pbWF0aW9uQmF0Y2ggLSBwaGFzZSBjaGFuZ2luZyB0byAiK01yW3RoaXMuY3VycmVudFBoYXNlXSx7dW51c2VkVGltZTpyfSxpKX07Zm9yKDtyPjAmJiFvKCk7KXtuKCk7Y29uc3QgZT1yO2xldCB0PTA7Zm9yKGNvbnN0IHMgb2YgaSlyPU1hdGgubWluKHMudXBkYXRlKGUpLHIpLHMuaXNDb21wbGV0ZSYmKHQrKyx0aGlzLnJlbW92ZUFuaW1hdGlvbihzKSk7dGhpcy5kZWJ1ZyhgQW5pbWF0aW9uQmF0Y2ggLSB1cGRhdGVkICR7aS5sZW5ndGh9IGNvbnRyb2xsZXJzOyAke3R9IGNvbXBsZXRlZGApfX1za2lwKGU9ITApe2lmKCExPT09dGhpcy5za2lwQW5pbWF0aW9ucyYmITA9PT1lKXtmb3IoY29uc3QgZSBvZiB0aGlzLmNvbnRyb2xsZXJzLnZhbHVlcygpKWUuc3RvcCgpO3RoaXMuY29udHJvbGxlcnMuY2xlYXIoKX10aGlzLnNraXBBbmltYXRpb25zPWV9cGxheSgpe2Zvcihjb25zdCBlIG9mIHRoaXMuY29udHJvbGxlcnMudmFsdWVzKCkpZS5wbGF5KCl9cGF1c2UoKXtmb3IoY29uc3QgZSBvZiB0aGlzLmNvbnRyb2xsZXJzLnZhbHVlcygpKWUucGF1c2UoKX1zdG9wKCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5jb250cm9sbGVycy52YWx1ZXMoKSl0cnl7ZS5zdG9wKCksdGhpcy5yZW1vdmVBbmltYXRpb24oZSl9Y2F0Y2goZSl7TC5lcnJvcigiRXJyb3IgZHVyaW5nIGFuaW1hdGlvbiBzdG9wIixlKX10aGlzLmRpc3BhdGNoU3RvcHBlZCgpfXN0b3BCeUFuaW1hdGlvbklkKGUpe2lmKG51bGwhPWUmJnRoaXMuY29udHJvbGxlcnMuaGFzKGUpKXtjb25zdCB0PXRoaXMuY29udHJvbGxlcnMuZ2V0KGUpO3QmJih0LnN0b3AoKSx0aGlzLnJlbW92ZUFuaW1hdGlvbih0KSl9fXN0b3BCeUFuaW1hdGlvbkdyb3VwSWQoZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5jb250cm9sbGVycy52YWx1ZXMoKSl0Lmdyb3VwSWQ9PT1lJiZ0aGlzLnN0b3BCeUFuaW1hdGlvbklkKHQuaWQpfWRpc3BhdGNoU3RvcHBlZCgpe3RoaXMuc3RvcHBlZENicy5mb3JFYWNoKGU9PmUoKSksdGhpcy5zdG9wcGVkQ2JzLmNsZWFyKCl9aXNTa2lwcGVkKCl7cmV0dXJuIHRoaXMuc2tpcEFuaW1hdGlvbnN9ZGVzdHJveSgpe319LFlsPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5saXN0ZW5lcnM9bmV3IGpsfWFkZExpc3RlbmVyKGUsdCl7cmV0dXJuIHRoaXMubGlzdGVuZXJzLmFkZExpc3RlbmVyKGUsdCl9cmVtb3ZlTGlzdGVuZXIoZSl7dGhpcy5saXN0ZW5lcnMucmVtb3ZlTGlzdGVuZXIoZSl9ZGVzdHJveSgpe3RoaXMubGlzdGVuZXJzLmRlc3Ryb3koKX19LCRsPVsiY2xpY2siLCJkYmxjbGljayIsImNvbnRleHRtZW51IiwiaG92ZXIiLCJkcmFnLXN0YXJ0IiwiZHJhZyIsImRyYWctZW5kIiwibGVhdmUiLCJwYWdlLWxlZnQiLCJ3aGVlbCJdLFhsPVsicGFnZWhpZGUiLCJtb3VzZW1vdmUiLCJtb3VzZXVwIl0scWw9WyJjbGljayIsImRibGNsaWNrIiwiY29udGV4dG1lbnUiLCJtb3VzZWRvd24iLCJtb3VzZW91dCIsIm1vdXNlZW50ZXIiLCJ0b3VjaHN0YXJ0IiwidG91Y2htb3ZlIiwidG91Y2hlbmQiLCJ0b3VjaGNhbmNlbCIsIndoZWVsIl0sWmw9KGU9PihlW2UuRGVmYXVsdD04XT0iRGVmYXVsdCIsZVtlLlpvb21EcmFnPTRdPSJab29tRHJhZyIsZVtlLkNvbnRleHRNZW51PTJdPSJDb250ZXh0TWVudSIsZVtlLkFuaW1hdGlvbj0xXT0iQW5pbWF0aW9uIixlW2UuQWxsPTE1XT0iQWxsIixlKSkoWmx8fHt9KSxRbD1bITAsImludGVyYWN0aW9uIl0sSmw9Y2xhc3MgZSBleHRlbmRzIFlse2NvbnN0cnVjdG9yKHQsaSxzKXtzdXBlcigpLHRoaXMuZGVidWc9RnMuY3JlYXRlKC4uLlFsKSx0aGlzLmV2ZW50SGFuZGxlcj1lPT50aGlzLnByb2Nlc3NFdmVudChlKSx0aGlzLm1vdXNlRG93bj0hMSx0aGlzLnRvdWNoRG93bj0hMSx0aGlzLnN0YXRlUXVldWU9OCx0aGlzLnJvb3RFbGVtZW50PWkuYm9keSx0aGlzLmVsZW1lbnQ9dCx0aGlzLndpbmRvdz1zO2Zvcihjb25zdCBlIG9mIHFsKWUuc3RhcnRzV2l0aCgidG91Y2giKT90LmFkZEV2ZW50TGlzdGVuZXIoZSx0aGlzLmV2ZW50SGFuZGxlcix7cGFzc2l2ZTohMH0pOiJ3aGVlbCI9PT1lP3QuYWRkRXZlbnRMaXN0ZW5lcihlLHRoaXMuZXZlbnRIYW5kbGVyLHtwYXNzaXZlOiExfSk6dC5hZGRFdmVudExpc3RlbmVyKGUsdGhpcy5ldmVudEhhbmRsZXIpO2Zvcihjb25zdCBlIG9mIFhsKXRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZSx0aGlzLmV2ZW50SGFuZGxlcik7ZS5pbnRlcmFjdGlvbkRvY3VtZW50cy5pbmNsdWRlcyhpKXx8KHBuKGksIlxuLmFnLWNoYXJ0LXdyYXBwZXIge1xuICAgIHRvdWNoLWFjdGlvbjogbm9uZTtcbn1cbiIpLGUuaW50ZXJhY3Rpb25Eb2N1bWVudHMucHVzaChpKSl9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKTtmb3IoY29uc3QgZSBvZiBYbCl0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGUsdGhpcy5ldmVudEhhbmRsZXIpO2Zvcihjb25zdCBlIG9mIHFsKXRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGUsdGhpcy5ldmVudEhhbmRsZXIpfWFkZExpc3RlbmVyKGUsdCxpPTgpe3JldHVybiBzdXBlci5hZGRMaXN0ZW5lcihlLGU9Pnt0aGlzLmdldFN0YXRlKCkmaSYmdChlKX0pfXB1c2hTdGF0ZShlKXt0aGlzLnN0YXRlUXVldWV8PWV9cG9wU3RhdGUoZSl7dGhpcy5zdGF0ZVF1ZXVlJj1+ZX1nZXRTdGF0ZSgpe3JldHVybiB0aGlzLnN0YXRlUXVldWUmLXRoaXMuc3RhdGVRdWV1ZX1wcm9jZXNzRXZlbnQoZSl7Y29uc3QgdD10aGlzLmRlY2lkZUludGVyYWN0aW9uRXZlbnRUeXBlcyhlKTt0Lmxlbmd0aD4wJiZ0aGlzLmRpc3BhdGNoRXZlbnQoZSx0KS5jYXRjaChlPT5MLmVycm9yT25jZShlKSl9ZGlzcGF0Y2hFdmVudChlLHQpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3QgaT10aGlzLmNhbGN1bGF0ZUNvb3JkaW5hdGVzKGUpO2lmKG51bGwhPWkpZm9yKGNvbnN0IHMgb2YgdCl0aGlzLmxpc3RlbmVycy5kaXNwYXRjaFdyYXBIYW5kbGVycyhzLChlLHQpPT57dC5jb25zdW1lZHx8ZSh0KX0sdGhpcy5idWlsZEV2ZW50KG0oe3R5cGU6cyxldmVudDplfSxpKSkpfSkpfWRlY2lkZUludGVyYWN0aW9uRXZlbnRUeXBlcyhlKXtzd2l0Y2goZS50eXBlKXtjYXNlImNsaWNrIjpjYXNlImRibGNsaWNrIjpjYXNlImNvbnRleHRtZW51IjpjYXNlIndoZWVsIjpyZXR1cm5bZS50eXBlXTtjYXNlIm1vdXNlZG93biI6cmV0dXJuIHRoaXMubW91c2VEb3duPSEwLHRoaXMuZHJhZ1N0YXJ0RWxlbWVudD1lLnRhcmdldCxbImRyYWctc3RhcnQiXTtjYXNlInRvdWNoc3RhcnQiOnJldHVybiB0aGlzLnRvdWNoRG93bj0hMCx0aGlzLmRyYWdTdGFydEVsZW1lbnQ9ZS50YXJnZXQsWyJkcmFnLXN0YXJ0Il07Y2FzZSJ0b3VjaG1vdmUiOmNhc2UibW91c2Vtb3ZlIjpyZXR1cm4gdGhpcy5tb3VzZURvd258fHRoaXMudG91Y2hEb3dufHx0aGlzLmlzRXZlbnRPdmVyRWxlbWVudChlKT90aGlzLm1vdXNlRG93bnx8dGhpcy50b3VjaERvd24/WyJkcmFnIl06WyJob3ZlciJdOltdO2Nhc2UibW91c2V1cCI6cmV0dXJuIHRoaXMubW91c2VEb3dufHx0aGlzLmlzRXZlbnRPdmVyRWxlbWVudChlKT8odGhpcy5tb3VzZURvd249ITEsdGhpcy5kcmFnU3RhcnRFbGVtZW50PXZvaWQgMCxbImRyYWctZW5kIl0pOltdO2Nhc2UidG91Y2hlbmQiOnJldHVybiB0aGlzLnRvdWNoRG93bnx8dGhpcy5pc0V2ZW50T3ZlckVsZW1lbnQoZSk/KHRoaXMudG91Y2hEb3duPSExLHRoaXMuZHJhZ1N0YXJ0RWxlbWVudD12b2lkIDAsWyJkcmFnLWVuZCJdKTpbXTtjYXNlIm1vdXNlb3V0IjpjYXNlInRvdWNoY2FuY2VsIjpyZXR1cm5bImxlYXZlIl07Y2FzZSJtb3VzZWVudGVyIjpjb25zdCB0PWUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50JiYxPT0oMSZlLmJ1dHRvbnMpO3JldHVybiB0aGlzLm1vdXNlRG93biE9PXQ/KHRoaXMubW91c2VEb3duPXQsW3Q/ImRyYWctc3RhcnQiOiJkcmFnLWVuZCJdKTpbXTtjYXNlInBhZ2VoaWRlIjpyZXR1cm5bInBhZ2UtbGVmdCJdfXJldHVybltdfWlzRXZlbnRPdmVyRWxlbWVudChlKXt2YXIgdDtyZXR1cm4gZS50YXJnZXQ9PT10aGlzLmVsZW1lbnR8fChudWxsPT0odD1lLnRhcmdldCk/dm9pZCAwOnQucGFyZW50RWxlbWVudCk9PT10aGlzLmVsZW1lbnR9Y2FsY3VsYXRlQ29vcmRpbmF0ZXModCl7dmFyIGk7aWYodCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQpcmV0dXJuIHRoaXMuZ2V0TW91c2VFdmVudENvb3Jkcyh0KTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIFRvdWNoRXZlbnQmJnQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50KXtjb25zdCBzPW51bGwhPShpPXQudG91Y2hlc1swXSk/aTp0LmNoYW5nZWRUb3VjaGVzWzBdLHtjbGllbnRYOnIsY2xpZW50WTpvLHBhZ2VYOm4scGFnZVk6YX09cztyZXR1cm4gZihtKHt9LGUuTlVMTF9DT09SRFMpLHtjbGllbnRYOnIsY2xpZW50WTpvLHBhZ2VYOm4scGFnZVk6YX0pfWlmKHQgaW5zdGFuY2VvZiBQYWdlVHJhbnNpdGlvbkV2ZW50KXtpZih0LnBlcnNpc3RlZClyZXR1cm47cmV0dXJuIGUuTlVMTF9DT09SRFN9fWdldE1vdXNlRXZlbnRDb29yZHMoZSl7Y29uc3R7Y2xpZW50WDp0LGNsaWVudFk6aSxwYWdlWDpzLHBhZ2VZOnJ9PWU7bGV0e29mZnNldFg6byxvZmZzZXRZOm59PWU7Y29uc3QgYT1lPT57bGV0IHQ9MCxpPTA7Zm9yKDtlOyl0Kz1lLm9mZnNldExlZnQsaSs9ZS5vZmZzZXRUb3AsZT1lLm9mZnNldFBhcmVudDtyZXR1cm57eDp0LHk6aX19O2lmKG51bGwhPXRoaXMuZHJhZ1N0YXJ0RWxlbWVudCYmZS50YXJnZXQhPT10aGlzLmRyYWdTdGFydEVsZW1lbnQpe2NvbnN0IHQ9YSh0aGlzLmRyYWdTdGFydEVsZW1lbnQpLGk9YShlLnRhcmdldCk7by09dC54LWkueCxuLT10LnktaS55fXJldHVybntjbGllbnRYOnQsY2xpZW50WTppLHBhZ2VYOnMscGFnZVk6cixvZmZzZXRYOm8sb2Zmc2V0WTpufX1pc1doZWVsRXZlbnQoZSl7cmV0dXJuIndoZWVsIj09PWUudHlwZX1idWlsZEV2ZW50KGUpe2NvbnN0e3R5cGU6dCxldmVudDppLGNsaWVudFg6cyxjbGllbnRZOnJ9PWU7bGV0e29mZnNldFg6byxvZmZzZXRZOm4scGFnZVg6YSxwYWdlWTpsfT1lO2lmKCFqZShvKXx8IWplKG4pKXtjb25zdCBlPXRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtvPXMtZS5sZWZ0LG49ci1lLnRvcH1pZighamUoYSl8fCFqZShsKSl7Y29uc3QgZT10aGlzLnJvb3RFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2E9cy1lLmxlZnQsbD1yLWUudG9wfWNvbnN0IGQ9ZT0+e2NvbnN0IHQ9TWF0aC5zaWduKGUpO3JldHVybigzKk1hdGgubG9nMTAoTWF0aC5hYnMoZSkvNjArLjEpKzMpKnR9O2xldFtjLGhdPVtOYU4sTmFOXTtpZih0aGlzLmlzV2hlZWxFdmVudChpKSl7Y29uc3QgZT0wPT09aS5kZWx0YU1vZGU/ZDplPT5lO2M9ZShpLmRlbHRhWCksaD1lKGkuZGVsdGFZKX1jb25zdCB1PXt0eXBlOnQsb2Zmc2V0WDpvLG9mZnNldFk6bixwYWdlWDphLHBhZ2VZOmwsZGVsdGFYOmMsZGVsdGFZOmgsc291cmNlRXZlbnQ6aSxjb25zdW1lZDohMSxjb25zdW1lKCl7dS5jb25zdW1lZD0hMH19O3JldHVybiB0aGlzLmRlYnVnKCJJbnRlcmFjdGlvbk1hbmFnZXIgLSBidWlsdEV2ZW50OiAiLHUpLHV9fTtKbC5pbnRlcmFjdGlvbkRvY3VtZW50cz1bXSxKbC5OVUxMX0NPT1JEUz17Y2xpZW50WDotMS8wLGNsaWVudFk6LTEvMCxwYWdlWDotMS8wLHBhZ2VZOi0xLzAsb2Zmc2V0WDotMS8wLG9mZnNldFk6LTEvMH07dmFyIGVkPUpsLHRkPVshMCwiYW5pbWF0aW9uIl0saWQ9Y2xhc3MgZXh0ZW5kcyBZbHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCksdGhpcy5pbnRlcmFjdGlvbk1hbmFnZXI9ZSx0aGlzLmNoYXJ0VXBkYXRlTXV0ZXg9dCx0aGlzLmRlZmF1bHREdXJhdGlvbj0xZTMsdGhpcy5iYXRjaD1uZXcgS2wsdGhpcy5kZWJ1Zz1Gcy5jcmVhdGUoLi4udGQpLHRoaXMucmFmQXZhaWxhYmxlPSJ1bmRlZmluZWQiIT10eXBlb2YgcmVxdWVzdEFuaW1hdGlvbkZyYW1lLHRoaXMuaXNQbGF5aW5nPSExLHRoaXMucmVxdWVzdElkPW51bGwsdGhpcy5za2lwQW5pbWF0aW9ucz0hMX1hbmltYXRlKGUpe3ZhciB0LGk9ZSx7ZGlzYWJsZUludGVyYWN0aW9uczpzPSEwfT1pLHI9dihpLFsiZGlzYWJsZUludGVyYWN0aW9ucyJdKTtjb25zdCBvPXRoaXMuYmF0Y2g7dHJ5e28uY2hlY2tPdmVybGFwcGluZ0lkKHIuaWQpfWNhdGNoKGUpe3JldHVybiB2b2lkIHRoaXMuZmFpbHNhZmVPbkVycm9yKGUpfWNvbnN0IG49bnVsbCE9KHQ9ci5pZCk/dDpNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCksYT10aGlzLmlzU2tpcHBlZCgpO2EmJnRoaXMuZGVidWcoIkFuaW1hdGlvbk1hbmFnZXIgLSBza2lwcGluZyBhbmltYXRpb24iKTtjb25zdCBsPW5ldyBOcihmKG0oe30scikse2lkOm4sc2tpcDphLGF1dG9wbGF5OiEhdGhpcy5pc1BsYXlpbmcmJnIuYXV0b3BsYXkscGhhc2U6ci5waGFzZSxkZWZhdWx0RHVyYXRpb246dGhpcy5kZWZhdWx0RHVyYXRpb259KSk7aWYoIXRoaXMuZm9yY2VUaW1lSnVtcChsLHRoaXMuZGVmYXVsdER1cmF0aW9uKSlyZXR1cm4gdGhpcy5iYXRjaC5hZGRBbmltYXRpb24obCksbH1wbGF5KCl7aWYoIXRoaXMuaXNQbGF5aW5nKXt0aGlzLmlzUGxheWluZz0hMCx0aGlzLmRlYnVnKCJBbmltYXRpb25NYW5hZ2VyLnBsYXkoKSIpO3RyeXt0aGlzLmJhdGNoLnBsYXkoKX1jYXRjaChlKXt0aGlzLmZhaWxzYWZlT25FcnJvcihlKX10aGlzLnJlcXVlc3RBbmltYXRpb24oKX19cGF1c2UoKXtpZih0aGlzLmlzUGxheWluZyl7dGhpcy5pc1BsYXlpbmc9ITEsdGhpcy5jYW5jZWxBbmltYXRpb24oKSx0aGlzLmRlYnVnKCJBbmltYXRpb25NYW5hZ2VyLnBhdXNlKCkiKTt0cnl7dGhpcy5iYXRjaC5wYXVzZSgpfWNhdGNoKGUpe3RoaXMuZmFpbHNhZmVPbkVycm9yKGUpfX19c3RvcCgpe3RoaXMuaXNQbGF5aW5nPSExLHRoaXMuY2FuY2VsQW5pbWF0aW9uKCksdGhpcy5kZWJ1ZygiQW5pbWF0aW9uTWFuYWdlci5zdG9wKCkiKSx0aGlzLmJhdGNoLnN0b3AoKX1zdG9wQnlBbmltYXRpb25JZChlKXt0cnl7dGhpcy5iYXRjaC5zdG9wQnlBbmltYXRpb25JZChlKX1jYXRjaChlKXt0aGlzLmZhaWxzYWZlT25FcnJvcihlKX19c3RvcEJ5QW5pbWF0aW9uR3JvdXBJZChlKXt0cnl7dGhpcy5iYXRjaC5zdG9wQnlBbmltYXRpb25Hcm91cElkKGUpfWNhdGNoKGUpe3RoaXMuZmFpbHNhZmVPbkVycm9yKGUpfX1yZXNldCgpe3RoaXMuaXNQbGF5aW5nPyh0aGlzLnN0b3AoKSx0aGlzLnBsYXkoKSk6dGhpcy5zdG9wKCl9c2tpcChlPSEwKXt0aGlzLnNraXBBbmltYXRpb25zPWV9aXNTa2lwcGVkKCl7cmV0dXJuIXRoaXMucmFmQXZhaWxhYmxlfHx0aGlzLnNraXBBbmltYXRpb25zfHx0aGlzLmJhdGNoLmlzU2tpcHBlZCgpfWlzQWN0aXZlKCl7cmV0dXJuIHRoaXMuaXNQbGF5aW5nJiZ0aGlzLmJhdGNoLmlzQWN0aXZlKCl9c2tpcEN1cnJlbnRCYXRjaCgpe3RoaXMuZGVidWcuY2hlY2soKSYmdGhpcy5kZWJ1ZygiQW5pbWF0aW9uTWFuYWdlciAtIHNraXBDdXJyZW50QmF0Y2goKSIse3N0YWNrOihuZXcgRXJyb3IpLnN0YWNrfSksdGhpcy5iYXRjaC5za2lwKCl9aXNTa2lwcGluZ0ZyYW1lcygpe3JldHVybiEwfXNjaGVkdWxlQW5pbWF0aW9uRnJhbWUoZSl7dGhpcy5yZXF1ZXN0SWQ9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGUpfWZvcmNlVGltZUp1bXAoZSx0KXtyZXR1cm4hMX1yZXF1ZXN0QW5pbWF0aW9uKCl7aWYoIXRoaXMucmFmQXZhaWxhYmxlKXJldHVybjtpZighdGhpcy5iYXRjaC5pc0FjdGl2ZSgpfHxudWxsIT09dGhpcy5yZXF1ZXN0SWQpcmV0dXJuO2xldCBlO2NvbnN0IHQ9aT0+dyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0IHM9KCk9PncodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdCB0PWktKG51bGwhPWU/ZTppKTtlPWksdGhpcy5kZWJ1ZygiQW5pbWF0aW9uTWFuYWdlciAtIG9uQW5pbWF0aW9uRnJhbWUoKSIse2NvbnRyb2xsZXJzQ291bnQ6dGhpcy5iYXRjaC5zaXplLGRlbHRhVGltZTp0fSksdGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIucHVzaFN0YXRlKDEpO3RyeXt0aGlzLmJhdGNoLnByb2dyZXNzKHQpfWNhdGNoKGUpe3RoaXMuZmFpbHNhZmVPbkVycm9yKGUpfXRoaXMubGlzdGVuZXJzLmRpc3BhdGNoKCJhbmltYXRpb24tZnJhbWUiLHt0eXBlOiJhbmltYXRpb24tZnJhbWUiLGRlbHRhTXM6dH0pfSkpO3RoaXMuaXNTa2lwcGluZ0ZyYW1lcygpP3lpZWxkIHRoaXMuY2hhcnRVcGRhdGVNdXRleC5hY3F1aXJlSW1tZWRpYXRlbHkocyk6eWllbGQgdGhpcy5jaGFydFVwZGF0ZU11dGV4LmFjcXVpcmUocyksdGhpcy5iYXRjaC5pc0FjdGl2ZSgpP3RoaXMuc2NoZWR1bGVBbmltYXRpb25GcmFtZSh0KTp0aGlzLmJhdGNoLnN0b3AoKX0pKTt0aGlzLnNjaGVkdWxlQW5pbWF0aW9uRnJhbWUodCl9Y2FuY2VsQW5pbWF0aW9uKCl7bnVsbCE9PXRoaXMucmVxdWVzdElkJiYoY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yZXF1ZXN0SWQpLHRoaXMucmVxdWVzdElkPW51bGwsdGhpcy5zdGFydEJhdGNoKCkpfWZhaWxzYWZlT25FcnJvcihlLHQ9ITApe0wuZXJyb3IoIkVycm9yIGR1cmluZyBhbmltYXRpb24sIHNraXBwaW5nIGFuaW1hdGlvbnMiLGUpLHQmJnRoaXMuY2FuY2VsQW5pbWF0aW9uKCl9c3RhcnRCYXRjaChlKXt0aGlzLmRlYnVnKGBBbmltYXRpb25NYW5hZ2VyIC0gc3RhcnRCYXRjaCgpIHdpdGggc2tpcEFuaW1hdGlvbnM9JHtlfS5gKSx0aGlzLnJlc2V0KCksdGhpcy5iYXRjaC5zdG9wKCksdGhpcy5iYXRjaC5kZXN0cm95KCksdGhpcy5iYXRjaD1uZXcgS2wsITA9PT1lJiZ0aGlzLmJhdGNoLnNraXAoKX1lbmRCYXRjaCgpe3RoaXMuZGVidWcoYEFuaW1hdGlvbk1hbmFnZXIgLSBlbmRCYXRjaCgpIHdpdGggJHt0aGlzLmJhdGNoLnNpemV9IGFuaW1hdGlvbnM7IHNraXBwZWQ6ICR7dGhpcy5iYXRjaC5pc1NraXBwZWQoKX0uYCksdGhpcy5iYXRjaC5pc0FjdGl2ZSgpfHx0aGlzLmludGVyYWN0aW9uTWFuYWdlci5wb3BTdGF0ZSgxKSx0aGlzLmJhdGNoLmlzU2tpcHBlZCgpJiYhdGhpcy5iYXRjaC5pc0FjdGl2ZSgpJiZ0aGlzLmJhdGNoLnNraXAoITEpLHRoaXMucmVxdWVzdEFuaW1hdGlvbigpfW9uQmF0Y2hTdG9wKGUpe3RoaXMuYmF0Y2guc3RvcHBlZENicy5hZGQoZSl9fSxzZD1jbGFzcyBleHRlbmRzIFlse2xlZ2VuZEl0ZW1DbGljayhlLHQsaSxzKXtjb25zdCByPXt0eXBlOiJsZWdlbmQtaXRlbS1jbGljayIsc2VyaWVzOmUsaXRlbUlkOnQsZW5hYmxlZDppLGxlZ2VuZEl0ZW1OYW1lOnN9O3RoaXMubGlzdGVuZXJzLmRpc3BhdGNoKCJsZWdlbmQtaXRlbS1jbGljayIscil9bGVnZW5kSXRlbURvdWJsZUNsaWNrKGUsdCxpLHMscil7Y29uc3Qgbz17dHlwZToibGVnZW5kLWl0ZW0tZG91YmxlLWNsaWNrIixzZXJpZXM6ZSxpdGVtSWQ6dCxlbmFibGVkOmksbGVnZW5kSXRlbU5hbWU6cixudW1WaXNpYmxlSXRlbXM6c307dGhpcy5saXN0ZW5lcnMuZGlzcGF0Y2goImxlZ2VuZC1pdGVtLWRvdWJsZS1jbGljayIsbyl9YXhpc0hvdmVyKGUsdCl7Y29uc3QgaT17dHlwZToiYXhpcy1ob3ZlciIsYXhpc0lkOmUsZGlyZWN0aW9uOnR9O3RoaXMubGlzdGVuZXJzLmRpc3BhdGNoKCJheGlzLWhvdmVyIixpKX19LHJkPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5kZWZhdWx0QWN0aW9ucz1bXSx0aGlzLmRpc2FibGVkQWN0aW9ucz1uZXcgU2V0fWNvcHlEZWZhdWx0QWN0aW9uKCl7cmV0dXJuWy4uLnRoaXMuZGVmYXVsdEFjdGlvbnNdfXJlZ2lzdGVyRGVmYXVsdEFjdGlvbihlKXtlLmlkJiZ0aGlzLmRlZmF1bHRBY3Rpb25zLmZpbmQoKHtpZDp0fSk9PnQ9PT1lLmlkKXx8dGhpcy5kZWZhdWx0QWN0aW9ucy5wdXNoKGUpfWVuYWJsZUFjdGlvbihlKXt0aGlzLmRpc2FibGVkQWN0aW9ucy5kZWxldGUoZSl9ZGlzYWJsZUFjdGlvbihlKXt0aGlzLmRpc2FibGVkQWN0aW9ucy5hZGQoZSl9aXNEaXNhYmxlZChlKXtyZXR1cm4gdGhpcy5kaXNhYmxlZEFjdGlvbnMuaGFzKGUpfX0sb2Q9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5zdGF0ZXM9e30sdGhpcy5lbGVtZW50PWV9dXBkYXRlQ3Vyc29yKGUsdCl7ZGVsZXRlIHRoaXMuc3RhdGVzW2VdLG51bGwhPXQmJih0aGlzLnN0YXRlc1tlXT17c3R5bGU6dH0pLHRoaXMuYXBwbHlTdGF0ZXMoKX1hcHBseVN0YXRlcygpe2xldCBlPSJkZWZhdWx0IjtPYmplY3QuZW50cmllcyh0aGlzLnN0YXRlcykucmV2ZXJzZSgpLnNsaWNlKDAsMSkuZm9yRWFjaCgoW3Qse3N0eWxlOml9XSk9PmU9aSksdGhpcy5lbGVtZW50LnN0eWxlLmN1cnNvcj1lfWdldEN1cnNvcigpe3JldHVybiB0aGlzLmVsZW1lbnQuc3R5bGUuY3Vyc29yfX07ZnVuY3Rpb24gbmQoZSx0KXtyZXR1cm4gTWF0aC5zcXJ0KGZ1bmN0aW9uKGUsdCl7Y29uc3QgaT1lLnNjcmVlblgtdC5zY3JlZW5YLHM9ZS5zY3JlZW5ZLXQuc2NyZWVuWTtyZXR1cm4gaSppK3Mqc30oZSx0KSl9dmFyIGFkPWNsYXNzIGV4dGVuZHMgWWx7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnRvdWNoc3RhcnQ9ZT0+dGhpcy5vblRvdWNoU3RhcnQoZSksdGhpcy50b3VjaG1vdmU9ZT0+dGhpcy5vblRvdWNoTW92ZShlKSx0aGlzLnRvdWNoZW5kPWU9PnRoaXMub25Ub3VjaEVuZChlKSx0aGlzLnRvdWNoY2FuY2VsPWU9PnRoaXMub25Ub3VjaENhbmNlbChlKSx0aGlzLnBpbmNoPXtmaW5nZXIxOntpZGVudGlmaWVyOk5hTixzY3JlZW5YOk5hTixzY3JlZW5ZOk5hTn0sZmluZ2VyMjp7aWRlbnRpZmllcjpOYU4sc2NyZWVuWDpOYU4sc2NyZWVuWTpOYU59LG9yaWdpbjp7eDpOYU4seTpOYU59LGRpc3RhbmNlOk5hTixzdGF0dXM6MH0sdGhpcy5lbGVtZW50PWUsZS5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0Iix0aGlzLnRvdWNoc3RhcnQse3Bhc3NpdmU6ITB9KSxlLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsdGhpcy50b3VjaG1vdmUse3Bhc3NpdmU6ITB9KSxlLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoZW5kIix0aGlzLnRvdWNoZW5kKSxlLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoY2FuY2VsIix0aGlzLnRvdWNoY2FuY2VsKX1kZXN0cm95KCl7Y29uc3R7ZWxlbWVudDplfT10aGlzO2UucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsdGhpcy50b3VjaHN0YXJ0KSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsdGhpcy50b3VjaG1vdmUpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2hlbmQiLHRoaXMudG91Y2hlbmQpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2hjYW5jZWwiLHRoaXMudG91Y2hjYW5jZWwpfWZpbmRQaW5jaFRvdWNoZXMoZSl7Y29uc3R7dG91Y2hlczp0fT1lLHtmaW5nZXIxOmksZmluZ2VyMjpzfT10aGlzLnBpbmNoO2lmKDAhPT10aGlzLnBpbmNoLnN0YXR1cyYmMj09PXQubGVuZ3RoKXtpZih0WzBdLmlkZW50aWZpZXI9PT1pLmlkZW50aWZpZXImJnRbMV0uaWRlbnRpZmllcj09PXMuaWRlbnRpZmllcilyZXR1cm5bdFswXSx0WzFdXTtpZih0WzBdLmlkZW50aWZpZXI9PT1zLmlkZW50aWZpZXImJnRbMV0uaWRlbnRpZmllcj09PWkuaWRlbnRpZmllcilyZXR1cm5bdFsxXSx0WzBdXX19Y29weVRvdWNoRGF0YShlKXtjb25zdCB0PVsiaWRlbnRpZmllciIsInNjcmVlblgiLCJzY3JlZW5ZIl07ZXQodCx0aGlzLnBpbmNoLmZpbmdlcjEsZS50b3VjaGVzWzBdKSxldCh0LHRoaXMucGluY2guZmluZ2VyMixlLnRvdWNoZXNbMV0pLHRoaXMucGluY2guZGlzdGFuY2U9bmQodGhpcy5waW5jaC5maW5nZXIxLHRoaXMucGluY2guZmluZ2VyMil9ZGlzcGF0Y2hQaW5jaEV2ZW50KGUsdCl7Y29uc3R7ZmluZ2VyMTppLGZpbmdlcjI6cyxvcmlnaW46cn09dGhpcy5waW5jaCxvPXt0eXBlOmUsZmluZ2VyMTppLGZpbmdlcjI6cyxkZWx0YURpc3RhbmNlOnQsb3JpZ2luOnJ9O3RoaXMubGlzdGVuZXJzLmRpc3BhdGNoKGUsbyl9b25Ub3VjaFN0YXJ0KGUpe3RoaXMuc3RvcFBpbmNoVHJhY2tpbmcoKTtjb25zdHtwaW5jaDp0fT10aGlzOzI9PT1lLnRvdWNoZXMubGVuZ3RoJiYodC5zdGF0dXM9MSx0aGlzLmNvcHlUb3VjaERhdGEoZSksdC5vcmlnaW4ueD0oZS50b3VjaGVzWzBdLmNsaWVudFgrZS50b3VjaGVzWzFdLmNsaWVudFgpLzIsdC5vcmlnaW4ueT0oZS50b3VjaGVzWzBdLmNsaWVudFkrZS50b3VjaGVzWzFdLmNsaWVudFkpLzIpfW9uVG91Y2hNb3ZlKGUpe2NvbnN0IHQ9dGhpcy5maW5kUGluY2hUb3VjaGVzKGUpO2lmKHZvaWQgMCE9PXQpe2NvbnN0W2ksc109dCx7cGluY2g6cn09dGhpcyxvPW5kKGkscyksbj1vLXIuZGlzdGFuY2U7MT09PXIuc3RhdHVzP01hdGguYWJzKG4pPjEmJihyLnN0YXR1cz0yLHRoaXMuY29weVRvdWNoRGF0YShlKSx0aGlzLmRpc3BhdGNoUGluY2hFdmVudCgicGluY2gtc3RhcnQiLDApKToyPT09ci5zdGF0dXM/KHIuZGlzdGFuY2U9byx0aGlzLmNvcHlUb3VjaERhdGEoZSksdGhpcy5kaXNwYXRjaFBpbmNoRXZlbnQoInBpbmNoLW1vdmUiLG4pKTpMLmVycm9yKCJ1bmV4cGVjdGVkIHBpbmNoLnN0YXR1czogIityLnN0YXR1cyl9fW9uVG91Y2hFbmQoZSl7dGhpcy5zdG9wUGluY2hUcmFja2luZygpfW9uVG91Y2hDYW5jZWwoZSl7dGhpcy5zdG9wUGluY2hUcmFja2luZygpfXN0b3BQaW5jaFRyYWNraW5nKCl7Y29uc3R7cGluY2g6ZX09dGhpczsyPT09ZS5zdGF0dXMmJnRoaXMuZGlzcGF0Y2hQaW5jaEV2ZW50KCJwaW5jaC1lbmQiLDApLHRoaXMucGluY2guc3RhdHVzPTB9fSxsZD1jbGFzcyBleHRlbmRzIFlse2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmhpZ2hsaWdodFN0YXRlcz1uZXcgTWFwLHRoaXMucGlja2VkU3RhdGVzPW5ldyBNYXB9dXBkYXRlSGlnaGxpZ2h0KGUsdCl7dGhpcy5oaWdobGlnaHRTdGF0ZXMuZGVsZXRlKGUpLG51bGwhPXQmJnRoaXMuaGlnaGxpZ2h0U3RhdGVzLnNldChlLHQpLHRoaXMuYXBwbHlIaWdobGlnaHRTdGF0ZXMoKX1nZXRBY3RpdmVIaWdobGlnaHQoKXtyZXR1cm4gdGhpcy5hY3RpdmVIaWdobGlnaHR9dXBkYXRlUGlja2VkKGUsdCl7dGhpcy5waWNrZWRTdGF0ZXMuZGVsZXRlKGUpLG51bGwhPXQmJnRoaXMucGlja2VkU3RhdGVzLnNldChlLHQpLHRoaXMuYXBwbHlQaWNrZWRTdGF0ZXMoKX1nZXRBY3RpdmVQaWNrZWQoKXtyZXR1cm4gdGhpcy5hY3RpdmVQaWNrZWR9YXBwbHlIaWdobGlnaHRTdGF0ZXMoKXtjb25zdHthY3RpdmVIaWdobGlnaHQ6ZX09dGhpczt0aGlzLmFjdGl2ZUhpZ2hsaWdodD1BcnJheS5mcm9tKHRoaXMuaGlnaGxpZ2h0U3RhdGVzLnZhbHVlcygpKS5wb3AoKSx0aGlzLmlzRXF1YWwodGhpcy5hY3RpdmVIaWdobGlnaHQsZSl8fHRoaXMubGlzdGVuZXJzLmRpc3BhdGNoKCJoaWdobGlnaHQtY2hhbmdlIix7dHlwZToiaGlnaGxpZ2h0LWNoYW5nZSIsY3VycmVudEhpZ2hsaWdodDp0aGlzLmFjdGl2ZUhpZ2hsaWdodCxwcmV2aW91c0hpZ2hsaWdodDplfSl9YXBwbHlQaWNrZWRTdGF0ZXMoKXt0aGlzLmFjdGl2ZVBpY2tlZD1BcnJheS5mcm9tKHRoaXMucGlja2VkU3RhdGVzLnZhbHVlcygpKS5wb3AoKX1pc0VxdWFsKGUsdCl7cmV0dXJuIGU9PT10fHwobnVsbD09ZT92b2lkIDA6ZS5zZXJpZXMpPT09KG51bGw9PXQ/dm9pZCAwOnQuc2VyaWVzKSYmKG51bGw9PWU/dm9pZCAwOmUuaXRlbUlkKT09PShudWxsPT10P3ZvaWQgMDp0Lml0ZW1JZCkmJihudWxsPT1lP3ZvaWQgMDplLmRhdHVtKT09PShudWxsPT10P3ZvaWQgMDp0LmRhdHVtKX19O2Z1bmN0aW9uIGRkKGUpe3ZhciB0O2NvbnN0e3dpZHRoOmk9MCxoZWlnaHQ6cz0wfT1udWxsIT0odD1lLmJib3guY29tcHV0ZUJCb3goKSk/dDp7fTtyZXR1cm4gaSpzfXZhciBjZD1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMubm9kZXM9W119YWRkKGUsdCl7dGhpcy5ub2Rlcy5wdXNoKHt2YWx1ZTplLGJib3g6dH0pfWZpbmQoZSx0KXtyZXR1cm4gdGhpcy5ub2Rlcy5maWx0ZXIoaT0+ZnVuY3Rpb24oZSx0LGkpe3ZhciBzLHI7cmV0dXJuIG51bGwhPShyPW51bGw9PShzPWUuYmJveC5jb21wdXRlQkJveCgpKT92b2lkIDA6cy5jb250YWluc1BvaW50KHQsaSkpJiZyfShpLGUsdCkpLnNvcnQoKGUsdCk9PmRkKGUpLWRkKHQpKS5tYXAoZT0+ZS52YWx1ZSl9KltTeW1ib2wuaXRlcmF0b3JdKCl7Zm9yKGNvbnN0e3ZhbHVlOmV9b2YgT2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKSl5aWVsZCBlfWNsZWFyKCl7dGhpcy5ub2Rlcy5sZW5ndGg9MH19LGhkPWNsYXNzIGV4dGVuZHMgamx7fSx1ZD1jbGFzcyBlIGV4dGVuZHMgWWx7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmNoYXJ0PWV9c3Vic2NyaWJlKHQ9ZS5ERUZBVUxUX0dST1VQKXtsZXQgaT10aGlzLmdldCh0KTtyZXR1cm4gaXx8KGk9bmV3IFNldCxlLmNoYXJ0c0dyb3Vwcy5zZXQodCxpKSksaS5hZGQodGhpcy5jaGFydCksdGhpc311bnN1YnNjcmliZSh0PWUuREVGQVVMVF9HUk9VUCl7dmFyIGk7cmV0dXJuIG51bGw9PShpPXRoaXMuZ2V0KHQpKXx8aS5kZWxldGUodGhpcy5jaGFydCksdGhpc31nZXRDaGFydCgpe3JldHVybiB0aGlzLmNoYXJ0fWdldEdyb3VwKHQ9ZS5ERUZBVUxUX0dST1VQKXtjb25zdCBpPXRoaXMuZ2V0KHQpO3JldHVybiBpP0FycmF5LmZyb20oaSk6W119Z2V0R3JvdXBTaWJsaW5ncyh0PWUuREVGQVVMVF9HUk9VUCl7cmV0dXJuIHRoaXMuZ2V0R3JvdXAodCkuZmlsdGVyKGU9PmUhPT10aGlzLmNoYXJ0KX1nZXQodCl7cmV0dXJuIGUuY2hhcnRzR3JvdXBzLmdldCh0KX19O3VkLmNoYXJ0c0dyb3Vwcz1uZXcgTWFwLHVkLkRFRkFVTFRfR1JPVVA9U3ltYm9sKCJzeW5jLWdyb3VwLWRlZmF1bHQiKTt2YXIgcGQ9dWQsZ2Q9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnN0YXRlcz17fSx0aGlzLmV4Y2x1c2l2ZUFyZWFzPXt9LHRoaXMuZGVzdHJveUZucz1bXSx0aGlzLnRvb2x0aXA9ZSx0aGlzLmRlc3Ryb3lGbnMucHVzaCh0LmFkZExpc3RlbmVyKCJob3ZlciIsZT0+dGhpcy5jaGVja0V4Y2x1c2l2ZVJlY3RzKGUpKSl9Z2V0UmFuZ2UoKXtyZXR1cm4gdGhpcy50b29sdGlwLnJhbmdlfXVwZGF0ZVRvb2x0aXAoZSx0LGkpe3ZhciBzO251bGw9PWkmJihpPW51bGw9PShzPXRoaXMuc3RhdGVzW2VdKT92b2lkIDA6cy5jb250ZW50KSx0aGlzLnN0YXRlc1tlXT17Y29udGVudDppLG1ldGE6dH0sdGhpcy5hcHBseVN0YXRlcygpfXVwZGF0ZUV4Y2x1c2l2ZVJlY3QoZSx0KXt0P3RoaXMuZXhjbHVzaXZlQXJlYXNbZV09dDpkZWxldGUgdGhpcy5leGNsdXNpdmVBcmVhc1tlXX1yZW1vdmVUb29sdGlwKGUpe2RlbGV0ZSB0aGlzLnN0YXRlc1tlXSx0aGlzLmFwcGx5U3RhdGVzKCl9Z2V0VG9vbHRpcE1ldGEoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PSh0PXRoaXMuc3RhdGVzW2VdKT92b2lkIDA6dC5tZXRhfWRlc3Ryb3koKXtmb3IoY29uc3QgZSBvZiB0aGlzLmRlc3Ryb3lGbnMpZSgpfWNoZWNrRXhjbHVzaXZlUmVjdHMoZSl7bGV0IHQ7Zm9yKGNvbnN0W2ksc11vZiBPYmplY3QuZW50cmllcyh0aGlzLmV4Y2x1c2l2ZUFyZWFzKSlpZihzLmNvbnRhaW5zUG9pbnQoZS5vZmZzZXRYLGUub2Zmc2V0WSkpe3Q9aTticmVha310IT09dGhpcy5hcHBsaWVkRXhjbHVzaXZlQXJlYSYmKHRoaXMuYXBwbGllZEV4Y2x1c2l2ZUFyZWE9dCx0aGlzLmFwcGx5U3RhdGVzKCkpfWFwcGx5U3RhdGVzKCl7dmFyIGU7Y29uc3QgdD10aGlzLmFwcGxpZWRFeGNsdXNpdmVBcmVhP1t0aGlzLmFwcGxpZWRFeGNsdXNpdmVBcmVhXTpPYmplY3Qua2V5cyh0aGlzLnN0YXRlcyk7bGV0IGkscztpZih0LnJldmVyc2UoKSx0LnNsaWNlKDAsMSkuZm9yRWFjaChlPT57dmFyIHQ7Y29uc3R7Y29udGVudDpyLG1ldGE6b309bnVsbCE9KHQ9dGhpcy5zdGF0ZXNbZV0pP3Q6e307aT1yLHM9b30pLHZvaWQgMD09PXN8fHZvaWQgMD09PWkpcmV0dXJuIHRoaXMuYXBwbGllZFN0YXRlPXZvaWQgMCx2b2lkIHRoaXMudG9vbHRpcC50b2dnbGUoITEpO2lmKChudWxsPT0oZT10aGlzLmFwcGxpZWRTdGF0ZSk/dm9pZCAwOmUuY29udGVudCk9PT1pKXtjb25zdCBlPXRoaXMudG9vbHRpcC5pc1Zpc2libGUoKTt0aGlzLnRvb2x0aXAuc2hvdyhzLHZvaWQgMCxlKX1lbHNlIHRoaXMudG9vbHRpcC5zaG93KHMsaSk7dGhpcy5hcHBsaWVkU3RhdGU9e2NvbnRlbnQ6aSxtZXRhOnN9fXN0YXRpYyBtYWtlVG9vbHRpcE1ldGEoZSx0KXt2YXIgaSxzLHIsbztjb25zdHtvZmZzZXRYOm4sb2Zmc2V0WTphfT1lLHt0b29sdGlwOmx9PXQuc2VyaWVzLnByb3BlcnRpZXMsZD17eE9mZnNldDpsLnBvc2l0aW9uLnhPZmZzZXQseU9mZnNldDpsLnBvc2l0aW9uLnlPZmZzZXR9LGM9e29mZnNldFg6bixvZmZzZXRZOmEsbGFzdFBvaW50ZXJFdmVudDp7b2Zmc2V0WDpuLG9mZnNldFk6YX0sc2hvd0Fycm93Omwuc2hvd0Fycm93LHBvc2l0aW9uOmR9LGg9bnVsbCE9KHM9bnVsbD09KGk9dC55QmFyKT92b2lkIDA6aS51cHBlclBvaW50KT9zOnQubWlkUG9pbnQ7aWYoIm5vZGUiPT09bC5wb3NpdGlvbi50eXBlJiZoKXtjb25zdHt4OmUseTppfT1oLHM9dC5zZXJpZXMuY29udGVudEdyb3VwLmludmVyc2VUcmFuc2Zvcm1Qb2ludChlLGkpO3JldHVybiBmKG0oe30sYykse29mZnNldFg6TWF0aC5yb3VuZChzLngpLG9mZnNldFk6TWF0aC5yb3VuZChzLnkpfSl9cmV0dXJuIGMuZW5hYmxlSW50ZXJhY3Rpb249bnVsbCE9KG89bnVsbD09KHI9bC5pbnRlcmFjdGlvbik/dm9pZCAwOnIuZW5hYmxlZCkmJm8sY319LG1kPWNsYXNzIGV4dGVuZHMgWWx7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuYXhpc1pvb21NYW5hZ2Vycz1uZXcgTWFwfXVwZGF0ZUF4ZXMoZSl7dmFyIHQ7Y29uc3QgaT1uZXcgTWFwKGUubWFwKGU9PltlLmlkLHRoaXMuYXhpc1pvb21NYW5hZ2Vycy5nZXQoZS5pZCldKSk7dGhpcy5heGlzWm9vbU1hbmFnZXJzLmNsZWFyKCk7Zm9yKGNvbnN0IHMgb2YgZSl0aGlzLmF4aXNab29tTWFuYWdlcnMuc2V0KHMuaWQsbnVsbCE9KHQ9aS5nZXQocy5pZCkpP3Q6bmV3IGZkKHMpKTt0aGlzLmluaXRpYWxab29tJiYodGhpcy51cGRhdGVab29tKHRoaXMuaW5pdGlhbFpvb20pLHRoaXMuaW5pdGlhbFpvb209dm9pZCAwKX11cGRhdGVab29tKGUpezAhPT10aGlzLmF4aXNab29tTWFuYWdlcnMuc2l6ZT8odGhpcy5heGlzWm9vbU1hbmFnZXJzLmZvckVhY2godD0+e3QudXBkYXRlWm9vbShudWxsPT1lP3ZvaWQgMDplW3QuZ2V0RGlyZWN0aW9uKCldKX0pLHRoaXMuYXBwbHlDaGFuZ2VzKCkpOnRoaXMuaW5pdGlhbFpvb209ZX11cGRhdGVBeGlzWm9vbShlLHQpe3ZhciBpO251bGw9PShpPXRoaXMuYXhpc1pvb21NYW5hZ2Vycy5nZXQoZSkpfHxpLnVwZGF0ZVpvb20odCksdGhpcy5hcHBseUNoYW5nZXMoKX1nZXRab29tKCl7bGV0IGUsdDtpZih0aGlzLmF4aXNab29tTWFuYWdlcnMuZm9yRWFjaChpPT57IngiPT09aS5nZXREaXJlY3Rpb24oKT9udWxsIT1lfHwoZT1pLmdldFpvb20oKSk6InkiPT09aS5nZXREaXJlY3Rpb24oKSYmKG51bGwhPXR8fCh0PWkuZ2V0Wm9vbSgpKSl9KSxlfHx0KXJldHVybnt4OmUseTp0fX1nZXRBeGlzWm9vbShlKXt2YXIgdCxpO3JldHVybiBudWxsIT0oaT1udWxsPT0odD10aGlzLmF4aXNab29tTWFuYWdlcnMuZ2V0KGUpKT92b2lkIDA6dC5nZXRab29tKCkpP2k6e21pbjowLG1heDoxfX1nZXRBeGlzWm9vbXMoKXtjb25zdCBlPXt9O2Zvcihjb25zdFt0LGldb2YgdGhpcy5heGlzWm9vbU1hbmFnZXJzLmVudHJpZXMoKSllW3RdPXtkaXJlY3Rpb246aS5nZXREaXJlY3Rpb24oKSx6b29tOmkuZ2V0Wm9vbSgpfTtyZXR1cm4gZX1hcHBseUNoYW5nZXMoKXtpZighQXJyYXkuZnJvbSh0aGlzLmF4aXNab29tTWFuYWdlcnMudmFsdWVzKCkpLm1hcChlPT5lLmFwcGx5Q2hhbmdlcygpKS5zb21lKEJvb2xlYW4pKXJldHVybjtjb25zdCBlPXt9O2Zvcihjb25zdFt0LGldb2YgdGhpcy5heGlzWm9vbU1hbmFnZXJzLmVudHJpZXMoKSllW3RdPWkuZ2V0Wm9vbSgpO3RoaXMubGlzdGVuZXJzLmRpc3BhdGNoKCJ6b29tLWNoYW5nZSIsZihtKHt0eXBlOiJ6b29tLWNoYW5nZSJ9LHRoaXMuZ2V0Wm9vbSgpKSx7YXhlczplfSkpfX0sZmQ9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5wZW5kaW5nWm9vbT1udWxsLHRoaXMuYXhpcz1lO2NvbnN0W3Q9MCxpPTFdPWUudmlzaWJsZVJhbmdlO3RoaXMuaW5pdGlhbFpvb209dGhpcy5jdXJyZW50Wm9vbT17bWluOnQsbWF4Oml9fWdldERpcmVjdGlvbigpe3JldHVybiB0aGlzLmF4aXMuZGlyZWN0aW9ufXVwZGF0ZVpvb20oZSl7dGhpcy5wZW5kaW5nWm9vbT1lP20oe30sZSk6bnVsbH1nZXRab29tKCl7cmV0dXJuIFN0KHRoaXMuY3VycmVudFpvb20pfWFwcGx5Q2hhbmdlcygpe3ZhciBlO2NvbnN0IHQ9dGhpcy5jdXJyZW50Wm9vbTtyZXR1cm4gdGhpcy5jdXJyZW50Wm9vbT1udWxsIT0oZT10aGlzLnBlbmRpbmdab29tKT9lOnRoaXMuaW5pdGlhbFpvb20sdC5taW4hPT10aGlzLmN1cnJlbnRab29tLm1pbnx8dC5tYXghPT10aGlzLmN1cnJlbnRab29tLm1heH19LHZkPWNsYXNzIGV4dGVuZHMgamx7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMubGF5b3V0Q29tcGxldGU9ImxheW91dC1jb21wbGV0ZSJ9YWRkTGlzdGVuZXIoZSx0KXtpZih0aGlzLmlzTGF5b3V0U3RhZ2UoZSl8fHRoaXMuaXNMYXlvdXRDb21wbGV0ZShlKSlyZXR1cm4gc3VwZXIuYWRkTGlzdGVuZXIoZSx0KTt0aHJvdyBuZXcgRXJyb3IoIkFHIENoYXJ0cyAtIHVuc3VwcG9ydGVkIGxpc3RlbmVyIHR5cGU6ICIrZSl9ZGlzcGF0Y2hQZXJmb3JtTGF5b3V0KGUsdCl7cmV0dXJuIHRoaXMuaXNMYXlvdXRTdGFnZShlKT90aGlzLmdldExpc3RlbmVyc0J5VHlwZShlKS5yZWR1Y2UoKGUsdCk9Pnt0cnl7cmV0dXJuIHQuaGFuZGxlcihlKX1jYXRjaCh0KXtyZXR1cm4gTC5lcnJvck9uY2UodCksZX19LHQpOnR9ZGlzcGF0Y2hMYXlvdXRDb21wbGV0ZShlKXt0aGlzLmRpc3BhdGNoKHRoaXMubGF5b3V0Q29tcGxldGUsZSl9aXNMYXlvdXRTdGFnZShlKXtyZXR1cm4gZSE9PXRoaXMubGF5b3V0Q29tcGxldGV9aXNMYXlvdXRDb21wbGV0ZShlKXtyZXR1cm4gZT09PXRoaXMubGF5b3V0Q29tcGxldGV9fTtmdW5jdGlvbiBDZCh7b3JpZW50YXRpb246ZSxiYm94ZXM6dCxtYXhIZWlnaHQ6aSxtYXhXaWR0aDpzLGl0ZW1QYWRkaW5nWTpyPTAsaXRlbVBhZGRpbmdYOm89MCxmb3JjZVJlc3VsdDpuPSExfSl7Y29uc3QgYT0iaG9yaXpvbnRhbCI9PT1lLGw9e21heDphP3M6aSxmbjphP2U9PmUud2lkdGg6ZT0+ZS5oZWlnaHQscGFkZGluZzphP286cn0sZD17bWF4OmE/aTpzLGZuOmE/ZT0+ZS5oZWlnaHQ6ZT0+ZS53aWR0aCxwYWRkaW5nOmE/cjpvfTtsZXQgYz0wO2NvbnN0IGg9W107Zm9yKDtjPHQubGVuZ3RoOyl7Y29uc3QgZT15ZCh0LnNsaWNlKGMpLGMsbCxkLG4pO2lmKCFlKXJldHVybjtjKz1lLnByb2Nlc3NlZEJCb3hDb3VudCxoLnB1c2goZS5wYWdlSW5kaWNlcyl9cmV0dXJuIGZ1bmN0aW9uKGUsdCxpLHMscil7bGV0IG89MCxuPTA7cmV0dXJue3BhZ2VzOmUubWFwKGU9PnsiaG9yaXpvbnRhbCI9PT10JiYoZT1mdW5jdGlvbihlKXtjb25zdCB0PVtdO2Zvcihjb25zdCBpIG9mIGVbMF0pdC5wdXNoKFtdKTtyZXR1cm4gZS5mb3JFYWNoKChlLGkpPT57ZS5mb3JFYWNoKChlLHMpPT57dFtzXVtpXT1lfSl9KSx0fShlKSk7bGV0IGE9MDtjb25zdCBsPWUubWFwKGU9Pntjb25zdCB0PWUubWFwKGU9PihhPU1hdGgubWF4KGUsYSksaVtlXSkpO2xldCBvPTAsbj0wO3JldHVybiB0LmZvckVhY2goZT0+e28rPWUuaGVpZ2h0K3Msbj1NYXRoLm1heChuLGUud2lkdGgrcil9KSx7aW5kaWNlczplLGJib3hlczp0LGNvbHVtbkhlaWdodDpNYXRoLmNlaWwobyksY29sdW1uV2lkdGg6TWF0aC5jZWlsKG4pfX0pO2xldCBkPTAsYz0wO3JldHVybiBsLmZvckVhY2goZT0+e2QrPWUuY29sdW1uV2lkdGgsYz1NYXRoLm1heChjLGUuY29sdW1uSGVpZ2h0KX0pLG89TWF0aC5tYXgoZCxvKSxuPU1hdGgubWF4KGMsbikse2NvbHVtbnM6bCxzdGFydEluZGV4OmVbMF1bMF0sZW5kSW5kZXg6YSxwYWdlV2lkdGg6ZCxwYWdlSGVpZ2h0OmN9fSksbWF4UGFnZVdpZHRoOm8sbWF4UGFnZUhlaWdodDpufX0oaCxlLHQscixvKX1mdW5jdGlvbiB5ZChlLHQsaSxzLHIpe2xldCBvPWZ1bmN0aW9uKGUsdCl7Y29uc3QgaT1lLmxlbmd0aDtsZXQgcz0wO2ZvcihsZXQgcj0wO3I8aTtyKyspaWYocys9dC5mbihlW3JdKSt0LnBhZGRpbmcscz50Lm1heCl7cmV0dXJuIGkvcjwyP01hdGguY2VpbChpLzIpOnJ9cmV0dXJuIGl9KGUsaSk7aWYobzwxKXtpZighcilyZXR1cm47bz0xfWZvcihsZXQgbj1vO24+PTE7bi0tKXtjb25zdCBvPVNkKGUsdCxuLGkscyxyKTtpZihudWxsPT1vJiZuPD0xKXJldHVybjtpZihudWxsPT1vKWNvbnRpbnVlO2lmKCJudW1iZXIiPT10eXBlb2Ygbyl7aWYobzw9MSlyZXR1cm47bj1vPG4mJm8+MT9vOm47Y29udGludWV9cmV0dXJue3Byb2Nlc3NlZEJCb3hDb3VudDpvLmxlbmd0aCpvWzBdLmxlbmd0aCxwYWdlSW5kaWNlczpvfX19ZnVuY3Rpb24gU2QoZSx0LGkscyxyLG8pe3ZhciBuO2NvbnN0IGE9W107bGV0IGw9MCxkPTAsYz1bXTtjb25zdCBoPVtdO2ZvcihsZXQgdT0wO3U8ZS5sZW5ndGg7dSsrKXtjb25zdCBwPSh1K2kpJWk7MD09PXAmJihsKz1kLGQ9MCxjLmxlbmd0aD4wJiZhLnB1c2goYyksYz1bXSk7Y29uc3QgZz1zLmZuKGVbdV0pK3MucGFkZGluZztoW3BdPU1hdGgubWF4KG51bGwhPShuPWhbcF0pP246MCxnKSxkPU1hdGgubWF4KGQsci5mbihlW3VdKStyLnBhZGRpbmcpO2NvbnN0IG09bCtkLGY9IW98fGEubGVuZ3RoPjA7aWYobT5yLm1heCYmZil7Yz1bXTticmVha31pZihoLnJlZHVjZSgoZSx0KT0+ZSt0LDApPnMubWF4JiYhbylyZXR1cm4gaC5sZW5ndGg8aT9oLmxlbmd0aDp2b2lkIDA7Yy5wdXNoKHUrdCl9cmV0dXJuIGMubGVuZ3RoPjAmJmEucHVzaChjKSxhLmxlbmd0aD4wP2E6dm9pZCAwfWZ1bmN0aW9uIHdkKGUsdCxpLHMpe2lmKDA9PT1lKXJldHVybiBmdW5jdGlvbihlLHQsaSl7aWYoMD09PWUpcmV0dXJuIGZ1bmN0aW9uKGUsdCl7Y29uc3QgaT0tdC9lO3JldHVybiAwIT09ZSYmaT49MCYmaTw9MT9baV06W119KHQsaSk7Y29uc3Qgcz10KnQtNCplKmkscj1bXTtpZigwPT09cyl7Y29uc3QgaT0tdC8oMiplKTtpPj0wJiZpPD0xJiZyLnB1c2goaSl9ZWxzZSBpZihzPjApe2NvbnN0IGk9TWF0aC5zcXJ0KHMpLG89KC10LWkpLygyKmUpLG49KC10K2kpLygyKmUpO28+PTAmJm88PTEmJnIucHVzaChvKSxuPj0wJiZuPD0xJiZyLnB1c2gobil9cmV0dXJuIHJ9KHQsaSxzKTtjb25zdCByPXQvZSxvPWkvZSxuPSgzKm8tcipyKS85LGE9KDkqcipvLTI3KihzL2UpLTIqcipyKnIpLzU0LGw9bipuKm4rYSphLGQ9W107aWYobD49MCl7Y29uc3QgZT1NYXRoLnNxcnQobCksdD1NYXRoLnNpZ24oYStlKSpNYXRoLnBvdyhNYXRoLmFicyhhK2UpLDEvMyksaT1NYXRoLnNpZ24oYS1lKSpNYXRoLnBvdyhNYXRoLmFicyhhLWUpLDEvMykscz1NYXRoLmFicyhNYXRoLnNxcnQoMykqKHQtaSkvMiksbz0tMS8zKnIrKHQraSk7aWYobz49MCYmbzw9MSYmZC5wdXNoKG8pLDA9PT1zKXtjb25zdCBlPS0xLzMqci0odCtpKS8yO2U+PTAmJmU8PTEmJmQucHVzaChlKX19ZWxzZXtjb25zdCBlPU1hdGguYWNvcyhhL01hdGguc3FydCgtbipuKm4pKSx0PTEvMypyLGk9MipNYXRoLnNxcnQoLW4pLHM9aSpNYXRoLmNvcygxLzMqZSktdCxvPWkqTWF0aC5jb3MoMS8zKihlKzIqTWF0aC5QSSkpLXQsbD1pKk1hdGguY29zKDEvMyooZSs0Kk1hdGguUEkpKS10O3M+PTAmJnM8PTEmJmQucHVzaChzKSxvPj0wJiZvPD0xJiZkLnB1c2gobyksbD49MCYmbDw9MSYmZC5wdXNoKGwpfXJldHVybiBkfWZ1bmN0aW9uIGJkKGUsdCxpLHMscixvLG4sYSl7Y29uc3QgbD0oaS1lKSooYS1vKS0ocy10KSoobi1yKTtpZigwPT09bClyZXR1cm4gbnVsbDtjb25zdCBkPSgobi1yKSoodC1vKS0oZS1yKSooYS1vKSkvbCxjPSgoaS1lKSoodC1vKS0ocy10KSooZS1yKSkvbDtyZXR1cm4gZD49MCYmZDw9MSYmYz49MCYmYzw9MT97eDplK2QqKGktZSkseTp0K2QqKHMtdCl9Om51bGx9ZnVuY3Rpb24gRWQoZSx0LGkscyxyLG8sbixhLGwsZCxjLGgpe2NvbnN0IHU9W10scD1kLWgsZz1jLWwsbT1sKihoLWQpLWQqKGMtbCksZj1SZChlLGkscixuKSx2PVJkKHQscyxvLGEpLEM9d2QocCpmWzBdK2cqdlswXSxwKmZbMV0rZyp2WzFdLHAqZlsyXStnKnZbMl0scCpmWzNdK2cqdlszXSttKTtmb3IoY29uc3QgZSBvZiBDKXtjb25zdCB0PWUqZSxpPWUqdCxzPWZbMF0qaStmWzFdKnQrZlsyXSplK2ZbM10scj12WzBdKmkrdlsxXSp0K3ZbMl0qZSt2WzNdO2xldCBvO289bCE9PWM/KHMtbCkvKGMtbCk6KHItZCkvKGgtZCksbz49MCYmbzw9MSYmdS5wdXNoKHt4OnMseTpyfSl9cmV0dXJuIHV9ZnVuY3Rpb24gUmQoZSx0LGkscyl7cmV0dXJuWzMqdC1lLTMqaStzLDMqZS02KnQrMyppLC0zKmUrMyp0LGVdfWZ1bmN0aW9uIHhkKGUsdCxpLHMscixvLG4sYSxsLGQpe2NvbnN0IGM9KGQtYSkvKGwtbiksaD1hLWMqbix1PU1hdGgucG93KGMsMikrMSxwPTIqKGMqKGgtdCktZSksZz1NYXRoLnBvdyhlLDIpK01hdGgucG93KGgtdCwyKS1NYXRoLnBvdyhpLDIpLG09TWF0aC5wb3cocCwyKS00KnUqZztpZihtPDApcmV0dXJuW107Y29uc3QgZj0oLXArTWF0aC5zcXJ0KG0pKS8yL3Usdj0oLXAtTWF0aC5zcXJ0KG0pKS8yL3UsQz1bXTtyZXR1cm5bZix2XS5mb3JFYWNoKGU9PntpZighKGU+PU1hdGgubWluKG4sbCkmJmU8PU1hdGgubWF4KG4sbCkpKXJldHVybjtjb25zdCB0PWMqZStoLGk9V3Iocyk7bGV0IGE9V3IociksZD1XcihNYXRoLmF0YW4yKHQsZSkpO2E8PWkmJihhKz0yKk1hdGguUEkpLGQ8aSYmKGQrPTIqTWF0aC5QSSksbyE9PShkPj1pJiZkPD1hKSYmQy5wdXNoKHt4OmUseTp0fSl9KSxDfXZhciBUZD1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMucHJldmlvdXNDb21tYW5kcz1bXSx0aGlzLnByZXZpb3VzUGFyYW1zPVtdLHRoaXMucHJldmlvdXNDbG9zZWRQYXRoPSExLHRoaXMuY29tbWFuZHM9W10sdGhpcy5wYXJhbXM9W10sdGhpcy5fY2xvc2VkUGF0aD0hMX1pc0RpcnR5KCl7aWYodGhpcy5fY2xvc2VkUGF0aCE9PXRoaXMucHJldmlvdXNDbG9zZWRQYXRoKXJldHVybiEwO2lmKHRoaXMucHJldmlvdXNDb21tYW5kcy5sZW5ndGghPT10aGlzLmNvbW1hbmRzLmxlbmd0aClyZXR1cm4hMDtpZih0aGlzLnByZXZpb3VzUGFyYW1zLmxlbmd0aCE9PXRoaXMucGFyYW1zLmxlbmd0aClyZXR1cm4hMDtmb3IobGV0IGU9MDtlPHRoaXMuY29tbWFuZHMubGVuZ3RoO2UrKylpZih0aGlzLmNvbW1hbmRzW2VdIT09dGhpcy5wcmV2aW91c0NvbW1hbmRzW2VdKXJldHVybiEwO2ZvcihsZXQgZT0wO2U8dGhpcy5wYXJhbXMubGVuZ3RoO2UrKylpZih0aGlzLnBhcmFtc1tlXSE9PXRoaXMucHJldmlvdXNQYXJhbXNbZV0pcmV0dXJuITA7cmV0dXJuITF9ZHJhdyhlKXtjb25zdCB0PXRoaXMuY29tbWFuZHMsaT10aGlzLnBhcmFtcztsZXQgcz0wO2UuYmVnaW5QYXRoKCk7Zm9yKGNvbnN0IHIgb2YgdClzd2l0Y2gocil7Y2FzZSAwOmUubW92ZVRvKGlbcysrXSxpW3MrK10pO2JyZWFrO2Nhc2UgMTplLmxpbmVUbyhpW3MrK10saVtzKytdKTticmVhaztjYXNlIDM6ZS5iZXppZXJDdXJ2ZVRvKGlbcysrXSxpW3MrK10saVtzKytdLGlbcysrXSxpW3MrK10saVtzKytdKTticmVhaztjYXNlIDI6ZS5hcmMoaVtzKytdLGlbcysrXSxpW3MrK10saVtzKytdLGlbcysrXSwxPT09aVtzKytdKTticmVhaztjYXNlIDQ6ZS5jbG9zZVBhdGgoKX0wPT09dC5sZW5ndGgmJmUuY2xvc2VQYXRoKCl9bW92ZVRvKGUsdCl7dGhpcy54eT8odGhpcy54eVswXT1lLHRoaXMueHlbMV09dCk6dGhpcy54eT1bZSx0XSx0aGlzLmNvbW1hbmRzLnB1c2goMCksdGhpcy5wYXJhbXMucHVzaChlLHQpfWxpbmVUbyhlLHQpe3RoaXMueHk/KHRoaXMuY29tbWFuZHMucHVzaCgxKSx0aGlzLnBhcmFtcy5wdXNoKGUsdCksdGhpcy54eVswXT1lLHRoaXMueHlbMV09dCk6dGhpcy5tb3ZlVG8oZSx0KX1yZWN0KGUsdCxpLHMpe3RoaXMubW92ZVRvKGUsdCksdGhpcy5saW5lVG8oZStpLHQpLHRoaXMubGluZVRvKGUraSx0K3MpLHRoaXMubGluZVRvKGUsdCtzKSx0aGlzLmNsb3NlUGF0aCgpfXJvdW5kUmVjdChlLHQsaSxzLHIpe3I9TWF0aC5taW4ocixpLzIscy8yKSx0aGlzLm1vdmVUbyhlLHQrciksdGhpcy5hcmMoZStyLHQrcixyLE1hdGguUEksMypNYXRoLlBJLzIpLHRoaXMubGluZVRvKGUrcix0KSx0aGlzLmxpbmVUbyhlK2ktcix0KSx0aGlzLmFyYyhlK2ktcix0K3IsciwzKk1hdGguUEkvMiwyKk1hdGguUEkpLHRoaXMubGluZVRvKGUraSx0K3IpLHRoaXMubGluZVRvKGUraSx0K3MtciksdGhpcy5hcmMoZStpLXIsdCtzLXIsciwwLE1hdGguUEkvMiksdGhpcy5saW5lVG8oZStpLXIsdCtzKSx0aGlzLmxpbmVUbyhlK3IsdCtzKSx0aGlzLmFyYyhlKyArcix0K3MtcixyLE1hdGguUEkvMixNYXRoLlBJKSx0aGlzLmxpbmVUbyhlLHQrcy1yKSx0aGlzLmNsb3NlUGF0aCgpfWFyYyhlLHQsaSxzLHIsbz0hMSl7Y29uc3Qgbj1lK2kqTWF0aC5jb3MociksYT10K2kqTWF0aC5zaW4ocik7dGhpcy54eT8odGhpcy54eVswXT1uLHRoaXMueHlbMV09YSk6dGhpcy54eT1bbixhXSx0aGlzLmNvbW1hbmRzLnB1c2goMiksdGhpcy5wYXJhbXMucHVzaChlLHQsaSxzLHIsbz8xOjApfWN1YmljQ3VydmVUbyhlLHQsaSxzLHIsbyl7dGhpcy54eXx8dGhpcy5tb3ZlVG8oZSx0KSx0aGlzLmNvbW1hbmRzLnB1c2goMyksdGhpcy5wYXJhbXMucHVzaChlLHQsaSxzLHIsbyksdGhpcy54eSYmKHRoaXMueHlbMF09cix0aGlzLnh5WzFdPW8pfWdldCBjbG9zZWRQYXRoKCl7cmV0dXJuIHRoaXMuX2Nsb3NlZFBhdGh9Y2xvc2VQYXRoKCl7dGhpcy54eSYmKHRoaXMueHk9dm9pZCAwLHRoaXMuY29tbWFuZHMucHVzaCg0KSx0aGlzLl9jbG9zZWRQYXRoPSEwKX1jbGVhcih7dHJhY2tDaGFuZ2VzOmV9PXt0cmFja0NoYW5nZXM6ITF9KXtlPyh0aGlzLnByZXZpb3VzQ29tbWFuZHM9dGhpcy5jb21tYW5kcyx0aGlzLnByZXZpb3VzUGFyYW1zPXRoaXMucGFyYW1zLHRoaXMucHJldmlvdXNDbG9zZWRQYXRoPXRoaXMuX2Nsb3NlZFBhdGgsdGhpcy5jb21tYW5kcz1bXSx0aGlzLnBhcmFtcz1bXSk6KHRoaXMuY29tbWFuZHMubGVuZ3RoPTAsdGhpcy5wYXJhbXMubGVuZ3RoPTApLHRoaXMueHk9dm9pZCAwLHRoaXMuX2Nsb3NlZFBhdGg9ITF9aXNQb2ludEluUGF0aChlLHQpe2NvbnN0IGk9dGhpcy5jb21tYW5kcyxzPXRoaXMucGFyYW1zLHI9aS5sZW5ndGgsbz0tMWU0LG49LTFlNDtsZXQgYT1OYU4sbD1OYU4sZD0wLGM9MCxoPTA7Zm9yKGxldCB1PTAscD0wO3U8cjt1Kyspc3dpdGNoKGlbdV0pe2Nhc2UgMDohaXNOYU4oYSkmJmJkKGEsbCxkLGMsbyxuLGUsdCkmJmgrKyxkPXNbcCsrXSxhPWQsYz1zW3ArK10sbD1jO2JyZWFrO2Nhc2UgMTpiZChkLGMsc1twKytdLHNbcCsrXSxvLG4sZSx0KSYmaCsrLGQ9c1twLTJdLGM9c1twLTFdO2JyZWFrO2Nhc2UgMzpoKz1FZChkLGMsc1twKytdLHNbcCsrXSxzW3ArK10sc1twKytdLHNbcCsrXSxzW3ArK10sbyxuLGUsdCkubGVuZ3RoLGQ9c1twLTJdLGM9c1twLTFdO2JyZWFrO2Nhc2UgMjpjb25zdCBpPXNbcCsrXSxyPXNbcCsrXSx1PXNbcCsrXSxnPXNbcCsrXSxtPXNbcCsrXTtoKz14ZChpLHIsdSxnLG0sQm9vbGVhbihzW3ArK10pLG8sbixlLHQpLmxlbmd0aCxkPWkrTWF0aC5jb3MobSkqdSxjPXIrTWF0aC5zaW4obSkqdTticmVhaztjYXNlIDQ6IWlzTmFOKGEpJiZiZChhLGwsZCxjLG8sbixlLHQpJiZoKyt9cmV0dXJuIGglMj09MX1nZXRQb2ludHMoKXtjb25zdHtjb21tYW5kczplLHBhcmFtczp0fT10aGlzLGk9W107bGV0IHM9MDtmb3IobGV0IHI9MDtyPGUubGVuZ3RoO3IrKylzd2l0Y2goZVtyXSl7Y2FzZSAwOmNhc2UgMTppLnB1c2goe3g6dFtzKytdLHk6dFtzKytdfSk7YnJlYWs7Y2FzZSAzOnMrPTQsaS5wdXNoKHt4OnRbcysrXSx5OnRbcysrXX0pO2JyZWFrO2Nhc2UgMjppLnB1c2goe3g6dFtzKytdLHk6dFtzKytdfSkscys9NH1yZXR1cm4gaX19O2Z1bmN0aW9uIERkKGUpe2NvbnN0e3JlZHJhdzp0PTMsY2hhbmdlQ2I6aSxjb252ZXJ0b3I6c309bnVsbCE9ZT9lOnt9O3JldHVybiB6cyh7cmVkcmF3OnQsdHlwZToicGF0aCIsY29udmVydG9yOnMsY2hhbmdlQ2I6aX0pfXZhciBPZD1jbGFzcyBleHRlbmRzIFpve2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnBhdGg9bmV3IFRkLHRoaXMuX2NsaXBYPU5hTix0aGlzLl9jbGlwWT1OYU4sdGhpcy5fZGlydHlQYXRoPSEwfXNldCBjbGlwWChlKXt0aGlzLl9jbGlwWD1lLHRoaXMuZGlydHlQYXRoPSEwfXNldCBjbGlwWShlKXt0aGlzLl9jbGlwWT1lLHRoaXMuZGlydHlQYXRoPSEwfXNldCBkaXJ0eVBhdGgoZSl7dGhpcy5fZGlydHlQYXRoIT09ZSYmKHRoaXMuX2RpcnR5UGF0aD1lLGUmJnRoaXMubWFya0RpcnR5KHRoaXMsMykpfWdldCBkaXJ0eVBhdGgoKXtyZXR1cm4gdGhpcy5fZGlydHlQYXRofWNoZWNrUGF0aERpcnR5KCl7dmFyIGUsdCxpLHM7dGhpcy5fZGlydHlQYXRofHwodGhpcy5kaXJ0eVBhdGg9dGhpcy5wYXRoLmlzRGlydHkoKXx8bnVsbCE9KHQ9bnVsbD09KGU9dGhpcy5maWxsU2hhZG93KT92b2lkIDA6ZS5pc0RpcnR5KCkpJiZ0fHxudWxsIT0ocz1udWxsPT0oaT10aGlzLl9jbGlwUGF0aCk/dm9pZCAwOmkuaXNEaXJ0eSgpKSYmcyl9aXNQb2ludEluUGF0aChlLHQpe2NvbnN0IGk9dGhpcy50cmFuc2Zvcm1Qb2ludChlLHQpO3JldHVybiB0aGlzLnBhdGguY2xvc2VkUGF0aCYmdGhpcy5wYXRoLmlzUG9pbnRJblBhdGgoaS54LGkueSl9aXNEaXJ0eVBhdGgoKXtyZXR1cm4hMX11cGRhdGVQYXRoKCl7fXJlbmRlcihlKXt2YXIgdCxpLHMscjtjb25zdHtjdHg6byxmb3JjZVJlbmRlcjpuLHN0YXRzOmF9PWU7aWYoMCE9PXRoaXMuZGlydHl8fG4pe2lmKHRoaXMuY29tcHV0ZVRyYW5zZm9ybU1hdHJpeCgpLHRoaXMubWF0cml4LnRvQ29udGV4dChvKSwodGhpcy5kaXJ0eVBhdGh8fHRoaXMuaXNEaXJ0eVBhdGgoKSkmJih0aGlzLnVwZGF0ZVBhdGgoKSx0aGlzLmRpcnR5UGF0aD0hMSksaXNOYU4odGhpcy5fY2xpcFgpfHxpc05hTih0aGlzLl9jbGlwWSl8fG51bGw9PXRoaXMuY2xpcE1vZGUpdGhpcy5wYXRoLmRyYXcobyksdGhpcy5maWxsU3Ryb2tlKG8pO2Vsc2V7by5zYXZlKCk7Y29uc3QgZT10aGlzLnN0cm9rZVdpZHRoLzI7aWYobnVsbCE9dGhpcy5fY2xpcFBhdGh8fCh0aGlzLl9jbGlwUGF0aD1uZXcgVGQpLHRoaXMuX2NsaXBQYXRoLmNsZWFyKCksdGhpcy5fY2xpcFBhdGgucmVjdCgtZSwtZSx0aGlzLl9jbGlwWCtlLHRoaXMuX2NsaXBZK2UrZSksIm5vcm1hbCI9PT10aGlzLmNsaXBNb2RlJiYobnVsbD09KHQ9dGhpcy5fY2xpcFBhdGgpfHx0LmRyYXcobyksby5jbGlwKCkpLHRoaXMuX2NsaXBYPjAmJnRoaXMuX2NsaXBZPjAmJih0aGlzLnBhdGguZHJhdyhvKSx0aGlzLmZpbGxTdHJva2UobykpLCJwdW5jaC1vdXQiPT09dGhpcy5jbGlwTW9kZSl7bnVsbD09KGk9dGhpcy5fY2xpcFBhdGgpfHxpLmRyYXcobyksby5jbGlwKCk7Y29uc3R7eDplPS0xZTQseTp0PS0xZTQsd2lkdGg6cj0yZTQsaGVpZ2h0Om49MmU0fT1udWxsIT0ocz10aGlzLmNvbXB1dGVCQm94KCkpP3M6e307by5jbGVhclJlY3QoZSx0LHIsbil9by5yZXN0b3JlKCl9bnVsbD09KHI9dGhpcy5maWxsU2hhZG93KXx8ci5tYXJrQ2xlYW4oKSxzdXBlci5yZW5kZXIoZSl9ZWxzZSBhJiYoYS5ub2Rlc1NraXBwZWQrPXRoaXMubm9kZUNvdW50LmNvdW50KX19O09kLmNsYXNzTmFtZT0iUGF0aCIseShbRGQoKV0sT2QucHJvdG90eXBlLCJjbGlwTW9kZSIsMikseShbRGQoKV0sT2QucHJvdG90eXBlLCJjbGlwWCIsMSkseShbRGQoKV0sT2QucHJvdG90eXBlLCJjbGlwWSIsMSk7dmFyIEFkPWNsYXNzIGV4dGVuZHMgT2R7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMueD0wLHRoaXMueT0wLHRoaXMuc2l6ZT0xMn1jb21wdXRlQkJveCgpe2NvbnN0e3g6ZSx5OnQsc2l6ZTppfT10aGlzLHM9aS8yO3JldHVybiBuZXcgb3IoZS1zLHQtcyxpLGkpfWFwcGx5UGF0aChlLHQpe2NvbnN0e3BhdGg6aX09dGhpcztsZXR7eDpzLHk6cn09dGhpcztpLmNsZWFyKCk7Zm9yKGNvbnN0e3g6byx5Om4sdDphfW9mIHQpcys9byplLHIrPW4qZSwibW92ZSI9PT1hP2kubW92ZVRvKHMscik6aS5saW5lVG8ocyxyKTtpLmNsb3NlUGF0aCgpfX07eShbRGQoKV0sQWQucHJvdG90eXBlLCJ4IiwyKSx5KFtEZCgpXSxBZC5wcm90b3R5cGUsInkiLDIpLHkoW0RkKHtjb252ZXJ0b3I6TWF0aC5hYnN9KV0sQWQucHJvdG90eXBlLCJzaXplIiwyKTt2YXIgUGQ9Y2xhc3MgZXh0ZW5kcyBBZHt1cGRhdGVQYXRoKCl7Y29uc3R7eDplLHk6dCxwYXRoOmksc2l6ZTpzfT10aGlzLHI9cy8yO2kuY2xlYXIoKSxpLmFyYyhlLHQsciwwLDIqTWF0aC5QSSksaS5jbG9zZVBhdGgoKX19O1BkLmNsYXNzTmFtZT0iQ2lyY2xlIjt2YXIgTWQ9Y2xhc3MgZSBleHRlbmRzIEFke3VwZGF0ZVBhdGgoKXtjb25zdCB0PXRoaXMuc2l6ZS80LjI7c3VwZXIuYXBwbHlQYXRoKHQsZS5tb3Zlcyl9fTtNZC5jbGFzc05hbWU9IkNyb3NzIixNZC5tb3Zlcz1be3g6LTEseTowLHQ6Im1vdmUifSx7eDotMSx5Oi0xfSx7eDoxLHk6LTF9LHt4OjEseToxfSx7eDoxLHk6LTF9LHt4OjEseToxfSx7eDotMSx5OjF9LHt4OjEseToxfSx7eDotMSx5OjF9LHt4Oi0xLHk6LTF9LHt4Oi0xLHk6MX0se3g6LTEseTotMX1dO3ZhciBMZD1NZCxGZD1jbGFzcyBlIGV4dGVuZHMgQWR7dXBkYXRlUGF0aCgpe2NvbnN0IHQ9dGhpcy5zaXplLzI7c3VwZXIuYXBwbHlQYXRoKHQsZS5tb3Zlcyl9fTtGZC5jbGFzc05hbWU9IkRpYW1vbmQiLEZkLm1vdmVzPVt7eDowLHk6LTEsdDoibW92ZSJ9LHt4OjEseToxfSx7eDotMSx5OjF9LHt4Oi0xLHk6LTF9LHt4OjEseTotMX1dO3ZhciBJZD1GZCxOZD1jbGFzcyBleHRlbmRzIEFke3JhZChlKXtyZXR1cm4gZS8xODAqTWF0aC5QSX11cGRhdGVQYXRoKCl7Y29uc3R7eDplLHBhdGg6dCxzaXplOmkscmFkOnN9PXRoaXMscj1pLzQsbz10aGlzLnkrci8yO3QuY2xlYXIoKSx0LmFyYyhlLXIsby1yLHIscygxMzApLHMoMzMwKSksdC5hcmMoZStyLG8tcixyLHMoMjIwKSxzKDUwKSksdC5saW5lVG8oZSxvK3IpLHQuY2xvc2VQYXRoKCl9fTtOZC5jbGFzc05hbWU9IkhlYXJ0Ijt2YXIgR2Q9Y2xhc3MgZSBleHRlbmRzIEFke3VwZGF0ZVBhdGgoKXtjb25zdCB0PXRoaXMuc2l6ZS8zO3N1cGVyLmFwcGx5UGF0aCh0LGUubW92ZXMpfX07R2QuY2xhc3NOYW1lPSJQbHVzIixHZC5tb3Zlcz1be3g6LS41LHk6LS41LHQ6Im1vdmUifSx7eDowLHk6LTF9LHt4OjEseTowfSx7eDowLHk6MX0se3g6MSx5OjB9LHt4OjAseToxfSx7eDotMSx5OjB9LHt4OjAseToxfSx7eDotMSx5OjB9LHt4OjAseTotMX0se3g6LTEseTowfSx7eDowLHk6LTF9XTt2YXIga2Q9R2QsX2Q9Y2xhc3MgZXh0ZW5kcyBBZHt1cGRhdGVQYXRoKCl7Y29uc3R7cGF0aDplLHg6dCx5Oml9PXRoaXMscz10aGlzLnNpemUvMjtlLmNsZWFyKCksZS5tb3ZlVG8odGhpcy5hbGlnbih0LXMpLHRoaXMuYWxpZ24oaS1zKSksZS5saW5lVG8odGhpcy5hbGlnbih0K3MpLHRoaXMuYWxpZ24oaS1zKSksZS5saW5lVG8odGhpcy5hbGlnbih0K3MpLHRoaXMuYWxpZ24oaStzKSksZS5saW5lVG8odGhpcy5hbGlnbih0LXMpLHRoaXMuYWxpZ24oaStzKSksZS5jbG9zZVBhdGgoKX19O19kLmNsYXNzTmFtZT0iU3F1YXJlIjt2YXIgVmQ9Y2xhc3MgZSBleHRlbmRzIEFke3VwZGF0ZVBhdGgoKXtjb25zdCB0PTEuMSp0aGlzLnNpemU7c3VwZXIuYXBwbHlQYXRoKHQsZS5tb3Zlcyl9fTtWZC5jbGFzc05hbWU9IlRyaWFuZ2xlIixWZC5tb3Zlcz1be3g6MCx5Oi0uNDgsdDoibW92ZSJ9LHt4Oi41LHk6Ljg3fSx7eDotMSx5OjB9XTt2YXIgQmQ9VmQsSGQ9e2NpcmNsZTpQZCxjcm9zczpMZCxkaWFtb25kOklkLGhlYXJ0Ok5kLHBsdXM6a2Qsc3F1YXJlOl9kLHRyaWFuZ2xlOkJkfSxXZD1PYmplY3Qua2V5cyhIZCk7ZnVuY3Rpb24gamQoZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlJiZXZC5pbmNsdWRlcyhlKX1mdW5jdGlvbiBVZChlPV9kKXtyZXR1cm4gamQoZSk/SGRbZV06ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTpfZH12YXIgemQ9Y2xhc3MgZXh0ZW5kcyBPbntjb25zdHJ1Y3Rvcigpe3N1cGVyKHtuYW1lOiJtYXJrZXJMYWJlbEdyb3VwIn0pLHRoaXMubGFiZWw9bmV3IGVuLHRoaXMubGluZT1uZXcgQmEsdGhpcy5fbWFya2VyPW5ldyBfZCx0aGlzLl9tYXJrZXJTaXplPTE1LHRoaXMuX3NwYWNpbmc9ODtjb25zdHttYXJrZXI6ZSxsYWJlbDp0LGxpbmU6aX09dGhpczt0LnRleHRCYXNlbGluZT0ibWlkZGxlIix0LmZvbnRTaXplPTEyLHQuZm9udEZhbWlseT0iVmVyZGFuYSwgc2Fucy1zZXJpZiIsdC5maWxsPSJibGFjayIsdC55PSRvLmhhcy50ZXh0TWV0cmljcz8xOjAsdGhpcy5hcHBlbmQoW2ksZSx0XSksdGhpcy51cGRhdGUoKX1zZXQgbWFya2VyKGUpe3RoaXMuX21hcmtlciE9PWUmJih0aGlzLnJlbW92ZUNoaWxkKHRoaXMuX21hcmtlciksdGhpcy5fbWFya2VyPWUsdGhpcy5hcHBlbmRDaGlsZChlKSx0aGlzLnVwZGF0ZSgpKX1nZXQgbWFya2VyKCl7cmV0dXJuIHRoaXMuX21hcmtlcn1zZXQgbWFya2VyU2l6ZShlKXt0aGlzLl9tYXJrZXJTaXplIT09ZSYmKHRoaXMuX21hcmtlclNpemU9ZSx0aGlzLnVwZGF0ZSgpKX1nZXQgbWFya2VyU2l6ZSgpe3JldHVybiB0aGlzLl9tYXJrZXJTaXplfXNldCBzcGFjaW5nKGUpe3RoaXMuX3NwYWNpbmchPT1lJiYodGhpcy5fc3BhY2luZz1lLHRoaXMudXBkYXRlKCkpfWdldCBzcGFjaW5nKCl7cmV0dXJuIHRoaXMuX3NwYWNpbmd9c2V0U2VyaWVzU3Ryb2tlT2Zmc2V0KGUpe2NvbnN0IHQ9dGhpcy5tYXJrZXIuc2l6ZS8yK2U7dGhpcy5saW5lLngxPS10LHRoaXMubGluZS54Mj10LHRoaXMubGluZS55MT0wLHRoaXMubGluZS55Mj0wLHRoaXMubGluZS5tYXJrRGlydHlUcmFuc2Zvcm0oKSx0aGlzLnVwZGF0ZSgpfXVwZGF0ZSgpe3RoaXMubWFya2VyLnNpemU9dGhpcy5tYXJrZXJTaXplO2NvbnN0IGU9dGhpcy5saW5lLnZpc2libGU/dGhpcy5saW5lLngyOi0xLzAsdD10aGlzLm1hcmtlclNpemUvMjt0aGlzLmxhYmVsLng9TWF0aC5tYXgoZSx0KSt0aGlzLnNwYWNpbmd9cmVuZGVyKGUpe3RoaXMubWFya2VyLm9wYWNpdHk9dGhpcy5vcGFjaXR5LHRoaXMubGFiZWwub3BhY2l0eT10aGlzLm9wYWNpdHksdGhpcy5saW5lLm9wYWNpdHk9dGhpcy5vcGFjaXR5LHN1cGVyLnJlbmRlcihlKX19O3pkLmNsYXNzTmFtZT0iTWFya2VyTGFiZWwiLHkoW2NuKCJsYWJlbCIpXSx6ZC5wcm90b3R5cGUsInRleHQiLDIpLHkoW2NuKCJsYWJlbCIpXSx6ZC5wcm90b3R5cGUsImZvbnRTdHlsZSIsMikseShbY24oImxhYmVsIildLHpkLnByb3RvdHlwZSwiZm9udFdlaWdodCIsMikseShbY24oImxhYmVsIildLHpkLnByb3RvdHlwZSwiZm9udFNpemUiLDIpLHkoW2NuKCJsYWJlbCIpXSx6ZC5wcm90b3R5cGUsImZvbnRGYW1pbHkiLDIpLHkoW2NuKCJsYWJlbCIsImZpbGwiKV0semQucHJvdG90eXBlLCJjb2xvciIsMikseShbY24oIm1hcmtlciIsImZpbGwiKV0semQucHJvdG90eXBlLCJtYXJrZXJGaWxsIiwyKSx5KFtjbigibWFya2VyIiwic3Ryb2tlIildLHpkLnByb3RvdHlwZSwibWFya2VyU3Ryb2tlIiwyKSx5KFtjbigibWFya2VyIiwic3Ryb2tlV2lkdGgiKV0semQucHJvdG90eXBlLCJtYXJrZXJTdHJva2VXaWR0aCIsMikseShbY24oIm1hcmtlciIsImZpbGxPcGFjaXR5IildLHpkLnByb3RvdHlwZSwibWFya2VyRmlsbE9wYWNpdHkiLDIpLHkoW2NuKCJtYXJrZXIiLCJzdHJva2VPcGFjaXR5IildLHpkLnByb3RvdHlwZSwibWFya2VyU3Ryb2tlT3BhY2l0eSIsMikseShbY24oIm1hcmtlciIsInZpc2libGUiKV0semQucHJvdG90eXBlLCJtYXJrZXJWaXNpYmxlIiwyKSx5KFtjbigibGluZSIsInN0cm9rZSIpXSx6ZC5wcm90b3R5cGUsImxpbmVTdHJva2UiLDIpLHkoW2NuKCJsaW5lIiwic3Ryb2tlV2lkdGgiKV0semQucHJvdG90eXBlLCJsaW5lU3Ryb2tlV2lkdGgiLDIpLHkoW2NuKCJsaW5lIiwic3Ryb2tlT3BhY2l0eSIpXSx6ZC5wcm90b3R5cGUsImxpbmVTdHJva2VPcGFjaXR5IiwyKSx5KFtjbigibGluZSIsImxpbmVEYXNoIildLHpkLnByb3RvdHlwZSwibGluZUxpbmVEYXNoIiwyKSx5KFtjbigibGluZSIsInZpc2libGUiKV0semQucHJvdG90eXBlLCJsaW5lVmlzaWJsZSIsMik7dmFyIEtkPWNsYXNzIGV4dGVuZHMgZnR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29sb3I9ImJsYWNrIix0aGlzLmZvbnRTdHlsZT12b2lkIDAsdGhpcy5mb250V2VpZ2h0PXZvaWQgMCx0aGlzLmZvbnRTaXplPTEyLHRoaXMuZm9udEZhbWlseT0iVmVyZGFuYSwgc2Fucy1zZXJpZiJ9fTt5KFtxcih5byldLEtkLnByb3RvdHlwZSwiY29sb3IiLDIpLHkoW3FyKFBvLHtvcHRpb25hbDohMH0pXSxLZC5wcm90b3R5cGUsImZvbnRTdHlsZSIsMikseShbcXIoTW8se29wdGlvbmFsOiEwfSldLEtkLnByb3RvdHlwZSwiZm9udFdlaWdodCIsMikseShbcXIobm8pXSxLZC5wcm90b3R5cGUsImZvbnRTaXplIiwyKSx5KFtxcihzbyldLEtkLnByb3RvdHlwZSwiZm9udEZhbWlseSIsMik7dmFyIFlkPWNsYXNzIGV4dGVuZHMgZnR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuc2l6ZT0xNSx0aGlzLmZpbGw9dm9pZCAwLHRoaXMuZmlsbE9wYWNpdHk9dm9pZCAwLHRoaXMuc3Ryb2tlPXZvaWQgMCx0aGlzLnN0cm9rZVdpZHRoPTEsdGhpcy5zdHJva2VPcGFjaXR5PTF9fTt5KFtxcihubyldLFlkLnByb3RvdHlwZSwic2l6ZSIsMikseShbcXIoeW8se29wdGlvbmFsOiEwfSldLFlkLnByb3RvdHlwZSwiZmlsbCIsMikseShbcXIoYW8se29wdGlvbmFsOiEwfSldLFlkLnByb3RvdHlwZSwiZmlsbE9wYWNpdHkiLDIpLHkoW3FyKHlvLHtvcHRpb25hbDohMH0pXSxZZC5wcm90b3R5cGUsInN0cm9rZSIsMikseShbcXIobm8pXSxZZC5wcm90b3R5cGUsInN0cm9rZVdpZHRoIiwyKSx5KFtxcihhbyldLFlkLnByb3RvdHlwZSwic3Ryb2tlT3BhY2l0eSIsMik7dmFyICRkPWNsYXNzIGV4dGVuZHMgZnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnBhcmVudD1lLHRoaXMuc2hhcGU9QmQsdGhpcy5zaXplPTE1LHRoaXMucGFkZGluZz04fX07eShbaG4oe2NoYW5nZVZhbHVlKCl7dGhpcy5wYXJlbnQubWFya2VyPT09dGhpcyYmdGhpcy5wYXJlbnQub25NYXJrZXJTaGFwZUNoYW5nZSgpfX0pXSwkZC5wcm90b3R5cGUsInNoYXBlIiwyKSx5KFtxcihubyldLCRkLnByb3RvdHlwZSwic2l6ZSIsMikseShbcXIobm8pXSwkZC5wcm90b3R5cGUsInBhZGRpbmciLDIpO3ZhciBYZD1jbGFzcyBleHRlbmRzIGZ0e2NvbnN0cnVjdG9yKGUsdCxpLHMpe3N1cGVyKCksdGhpcy5jaGFydFVwZGF0ZUNhbGxiYWNrPWUsdGhpcy5wYWdlVXBkYXRlQ2FsbGJhY2s9dCx0aGlzLnJlZ2lvbk1hbmFnZXI9aSx0aGlzLmN1cnNvck1hbmFnZXI9cyx0aGlzLmlkPVdzKHRoaXMpLHRoaXMubWFya2VyPW5ldyAkZCh0aGlzKSx0aGlzLmFjdGl2ZVN0eWxlPW5ldyBZZCx0aGlzLmluYWN0aXZlU3R5bGU9bmV3IFlkLHRoaXMuaGlnaGxpZ2h0U3R5bGU9bmV3IFlkLHRoaXMubGFiZWw9bmV3IEtkLHRoaXMuZ3JvdXA9bmV3IE9uKHtuYW1lOiJwYWdpbmF0aW9uIn0pLHRoaXMubGFiZWxOb2RlPW5ldyBlbix0aGlzLmRlc3Ryb3lGbnM9W10sdGhpcy50b3RhbFBhZ2VzPTAsdGhpcy5jdXJyZW50UGFnZT0wLHRoaXMudHJhbnNsYXRpb25YPTAsdGhpcy50cmFuc2xhdGlvblk9MCx0aGlzLm5leHRCdXR0b25EaXNhYmxlZD0hMSx0aGlzLnByZXZpb3VzQnV0dG9uRGlzYWJsZWQ9ITEsdGhpcy5fdmlzaWJsZT0hMCx0aGlzLl9lbmFibGVkPSEwLHRoaXMuX29yaWVudGF0aW9uPSJ2ZXJ0aWNhbCIsdGhpcy5fbmV4dEJ1dHRvbj1uZXcgQmQsdGhpcy5fcHJldmlvdXNCdXR0b249bmV3IEJkLHRoaXMubGFiZWxOb2RlLnNldFByb3BlcnRpZXMoe3RleHRCYXNlbGluZToibWlkZGxlIixmb250U2l6ZToxMixmb250RmFtaWx5OiJWZXJkYW5hLCBzYW5zLXNlcmlmIixmaWxsOiJibGFjayIseTokby5oYXMudGV4dE1ldHJpY3M/MTowfSksdGhpcy5ncm91cC5hcHBlbmQoW3RoaXMubmV4dEJ1dHRvbix0aGlzLnByZXZpb3VzQnV0dG9uLHRoaXMubGFiZWxOb2RlXSk7Y29uc3Qgcj10aGlzLnJlZ2lvbk1hbmFnZXIuYWRkUmVnaW9uKCJwYWdpbmF0aW9uIix0aGlzLmdyb3VwKTt0aGlzLmRlc3Ryb3lGbnMucHVzaChyLmFkZExpc3RlbmVyKCJjbGljayIsZT0+dGhpcy5vblBhZ2luYXRpb25DbGljayhlKSksci5hZGRMaXN0ZW5lcigiaG92ZXIiLGU9PnRoaXMub25QYWdpbmF0aW9uTW91c2VNb3ZlKGUpKSksdGhpcy51cGRhdGUoKSx0aGlzLnVwZGF0ZU1hcmtlcnMoKX1kZXN0cm95KCl7dGhpcy5kZXN0cm95Rm5zLmZvckVhY2goZT0+ZSgpKX1zZXQgdmlzaWJsZShlKXt0aGlzLl92aXNpYmxlPWUsdGhpcy51cGRhdGVHcm91cFZpc2liaWxpdHkoKX1nZXQgdmlzaWJsZSgpe3JldHVybiB0aGlzLl92aXNpYmxlfXNldCBlbmFibGVkKGUpe3RoaXMuX2VuYWJsZWQ9ZSx0aGlzLnVwZGF0ZUdyb3VwVmlzaWJpbGl0eSgpfWdldCBlbmFibGVkKCl7cmV0dXJuIHRoaXMuX2VuYWJsZWR9dXBkYXRlR3JvdXBWaXNpYmlsaXR5KCl7dGhpcy5ncm91cC52aXNpYmxlPXRoaXMuZW5hYmxlZCYmdGhpcy52aXNpYmxlfXNldCBvcmllbnRhdGlvbihlKXtzd2l0Y2godGhpcy5fb3JpZW50YXRpb249ZSxlKXtjYXNlImhvcml6b250YWwiOnRoaXMucHJldmlvdXNCdXR0b24ucm90YXRpb249LU1hdGguUEkvMix0aGlzLm5leHRCdXR0b24ucm90YXRpb249TWF0aC5QSS8yO2JyZWFrO2Nhc2UidmVydGljYWwiOmRlZmF1bHQ6dGhpcy5wcmV2aW91c0J1dHRvbi5yb3RhdGlvbj0wLHRoaXMubmV4dEJ1dHRvbi5yb3RhdGlvbj1NYXRoLlBJfX1nZXQgb3JpZW50YXRpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb259c2V0IG5leHRCdXR0b24oZSl7dGhpcy5fbmV4dEJ1dHRvbiE9PWUmJih0aGlzLmdyb3VwLnJlbW92ZUNoaWxkKHRoaXMuX25leHRCdXR0b24pLHRoaXMuX25leHRCdXR0b249ZSx0aGlzLmdyb3VwLmFwcGVuZENoaWxkKGUpKX1nZXQgbmV4dEJ1dHRvbigpe3JldHVybiB0aGlzLl9uZXh0QnV0dG9ufXNldCBwcmV2aW91c0J1dHRvbihlKXt0aGlzLl9wcmV2aW91c0J1dHRvbiE9PWUmJih0aGlzLmdyb3VwLnJlbW92ZUNoaWxkKHRoaXMuX3ByZXZpb3VzQnV0dG9uKSx0aGlzLl9wcmV2aW91c0J1dHRvbj1lLHRoaXMuZ3JvdXAuYXBwZW5kQ2hpbGQoZSkpfWdldCBwcmV2aW91c0J1dHRvbigpe3JldHVybiB0aGlzLl9wcmV2aW91c0J1dHRvbn11cGRhdGUoKXt0aGlzLnVwZGF0ZUxhYmVsKCksdGhpcy51cGRhdGVQb3NpdGlvbnMoKSx0aGlzLmVuYWJsZU9yRGlzYWJsZUJ1dHRvbnMoKX11cGRhdGVQb3NpdGlvbnMoKXt0aGlzLmdyb3VwLnRyYW5zbGF0aW9uWD10aGlzLnRyYW5zbGF0aW9uWCx0aGlzLmdyb3VwLnRyYW5zbGF0aW9uWT10aGlzLnRyYW5zbGF0aW9uWSx0aGlzLnVwZGF0ZUxhYmVsUG9zaXRpb24oKSx0aGlzLnVwZGF0ZU5leHRCdXR0b25Qb3NpdGlvbigpfXVwZGF0ZUxhYmVsUG9zaXRpb24oKXtjb25zdHtzaXplOmUscGFkZGluZzp0fT10aGlzLm1hcmtlcjt0aGlzLm5leHRCdXR0b24uc2l6ZT1lLHRoaXMucHJldmlvdXNCdXR0b24uc2l6ZT1lLHRoaXMubGFiZWxOb2RlLng9ZS8yK3R9dXBkYXRlTmV4dEJ1dHRvblBvc2l0aW9uKCl7Y29uc3QgZT10aGlzLmxhYmVsTm9kZS5jb21wdXRlQkJveCgpO3RoaXMubmV4dEJ1dHRvbi50cmFuc2xhdGlvblg9ZS54K2Uud2lkdGgrdGhpcy5tYXJrZXIuc2l6ZS8yK3RoaXMubWFya2VyLnBhZGRpbmd9dXBkYXRlTGFiZWwoKXtjb25zdHtjdXJyZW50UGFnZTplLHRvdGFsUGFnZXM6dCxsYWJlbE5vZGU6aSxsYWJlbDp7Y29sb3I6cyxmb250U3R5bGU6cixmb250V2VpZ2h0Om8sZm9udFNpemU6bixmb250RmFtaWx5OmF9fT10aGlzO2kudGV4dD1gJHtlKzF9IC8gJHt0fWAsaS5maWxsPXMsaS5mb250U3R5bGU9cixpLmZvbnRXZWlnaHQ9byxpLmZvbnRTaXplPW4saS5mb250RmFtaWx5PWF9dXBkYXRlTWFya2Vycygpe2NvbnN0e25leHRCdXR0b246ZSxwcmV2aW91c0J1dHRvbjp0LG5leHRCdXR0b25EaXNhYmxlZDppLHByZXZpb3VzQnV0dG9uRGlzYWJsZWQ6cyxhY3RpdmVTdHlsZTpyLGluYWN0aXZlU3R5bGU6byxoaWdobGlnaHRTdHlsZTpuLGhpZ2hsaWdodEFjdGl2ZTphfT10aGlzLGw9KGUsdCk9PnQ/bzplPT09YT9uOnI7dGhpcy51cGRhdGVNYXJrZXIoZSxsKCJuZXh0IixpKSksdGhpcy51cGRhdGVNYXJrZXIodCxsKCJwcmV2aW91cyIscykpfXVwZGF0ZU1hcmtlcihlLHQpe3ZhciBpO2NvbnN0e3NpemU6c309dGhpcy5tYXJrZXI7ZS5zaXplPXMsZS5maWxsPXQuZmlsbCxlLmZpbGxPcGFjaXR5PW51bGwhPShpPXQuZmlsbE9wYWNpdHkpP2k6MSxlLnN0cm9rZT10LnN0cm9rZSxlLnN0cm9rZVdpZHRoPXQuc3Ryb2tlV2lkdGgsZS5zdHJva2VPcGFjaXR5PXQuc3Ryb2tlT3BhY2l0eX1lbmFibGVPckRpc2FibGVCdXR0b25zKCl7Y29uc3R7Y3VycmVudFBhZ2U6ZSx0b3RhbFBhZ2VzOnR9PXRoaXMsaT0wPT09dCxzPWU9PT10LTEscj0wPT09ZTt0aGlzLm5leHRCdXR0b25EaXNhYmxlZD1zfHxpLHRoaXMucHJldmlvdXNCdXR0b25EaXNhYmxlZD1yfHxpfW5leHRCdXR0b25Db250YWluc1BvaW50KGUsdCl7cmV0dXJuIXRoaXMubmV4dEJ1dHRvbkRpc2FibGVkJiZ0aGlzLm5leHRCdXR0b24uY29udGFpbnNQb2ludChlLHQpfXByZXZpb3VzQnV0dG9uQ29udGFpbnNQb2ludChlLHQpe3JldHVybiF0aGlzLnByZXZpb3VzQnV0dG9uRGlzYWJsZWQmJnRoaXMucHJldmlvdXNCdXR0b24uY29udGFpbnNQb2ludChlLHQpfW9uUGFnaW5hdGlvbkNsaWNrKGUpe2NvbnN0e29mZnNldFg6dCxvZmZzZXRZOml9PWU7dGhpcy5uZXh0QnV0dG9uQ29udGFpbnNQb2ludCh0LGkpPyh0aGlzLmluY3JlbWVudFBhZ2UoKSx0aGlzLm9uUGFnaW5hdGlvbkNoYW5nZWQoKSxlLmNvbnN1bWUoKSk6dGhpcy5wcmV2aW91c0J1dHRvbkNvbnRhaW5zUG9pbnQodCxpKSYmKHRoaXMuZGVjcmVtZW50UGFnZSgpLHRoaXMub25QYWdpbmF0aW9uQ2hhbmdlZCgpLGUuY29uc3VtZSgpKX1vblBhZ2luYXRpb25Nb3VzZU1vdmUoZSl7Y29uc3R7b2Zmc2V0WDp0LG9mZnNldFk6aX09ZTt0aGlzLm5leHRCdXR0b25Db250YWluc1BvaW50KHQsaSk/KHRoaXMuY3Vyc29yTWFuYWdlci51cGRhdGVDdXJzb3IodGhpcy5pZCwicG9pbnRlciIpLHRoaXMuaGlnaGxpZ2h0QWN0aXZlPSJuZXh0Iik6dGhpcy5wcmV2aW91c0J1dHRvbkNvbnRhaW5zUG9pbnQodCxpKT8odGhpcy5jdXJzb3JNYW5hZ2VyLnVwZGF0ZUN1cnNvcih0aGlzLmlkLCJwb2ludGVyIiksdGhpcy5oaWdobGlnaHRBY3RpdmU9InByZXZpb3VzIik6KHRoaXMuY3Vyc29yTWFuYWdlci51cGRhdGVDdXJzb3IodGhpcy5pZCksdGhpcy5oaWdobGlnaHRBY3RpdmU9dm9pZCAwKSx0aGlzLnVwZGF0ZU1hcmtlcnMoKSx0aGlzLmNoYXJ0VXBkYXRlQ2FsbGJhY2soNil9b25QYWdpbmF0aW9uQ2hhbmdlZCgpe3RoaXMucGFnZVVwZGF0ZUNhbGxiYWNrKHRoaXMuY3VycmVudFBhZ2UpfWluY3JlbWVudFBhZ2UoKXt0aGlzLmN1cnJlbnRQYWdlPU1hdGgubWluKHRoaXMuY3VycmVudFBhZ2UrMSx0aGlzLnRvdGFsUGFnZXMtMSl9ZGVjcmVtZW50UGFnZSgpe3RoaXMuY3VycmVudFBhZ2U9TWF0aC5tYXgodGhpcy5jdXJyZW50UGFnZS0xLDApfW9uTWFya2VyU2hhcGVDaGFuZ2UoKXtjb25zdCBlPVVkKHRoaXMubWFya2VyLnNoYXBlfHxCZCk7dGhpcy5wcmV2aW91c0J1dHRvbj1uZXcgZSx0aGlzLm5leHRCdXR0b249bmV3IGUsdGhpcy51cGRhdGVQb3NpdGlvbnMoKSx0aGlzLnVwZGF0ZU1hcmtlcnMoKSx0aGlzLmNoYXJ0VXBkYXRlQ2FsbGJhY2soNil9YXR0YWNoUGFnaW5hdGlvbihlKXtlLmFwcGVuZCh0aGlzLmdyb3VwKX1jb21wdXRlQkJveCgpe3JldHVybiB0aGlzLmdyb3VwLmNvbXB1dGVCQm94KCl9fTtYZC5jbGFzc05hbWU9IlBhZ2luYXRpb24iLHkoW3FyKGVvKV0sWGQucHJvdG90eXBlLCJtYXJrZXIiLDIpLHkoW3FyKGVvKV0sWGQucHJvdG90eXBlLCJhY3RpdmVTdHlsZSIsMikseShbcXIoZW8pXSxYZC5wcm90b3R5cGUsImluYWN0aXZlU3R5bGUiLDIpLHkoW3FyKGVvKV0sWGQucHJvdG90eXBlLCJoaWdobGlnaHRTdHlsZSIsMikseShbcXIoZW8pXSxYZC5wcm90b3R5cGUsImxhYmVsIiwyKTt2YXIgcWQ9Y2xhc3MgZXh0ZW5kcyBmdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5tYXhMZW5ndGg9dm9pZCAwLHRoaXMuY29sb3I9ImJsYWNrIix0aGlzLmZvbnRTdHlsZT12b2lkIDAsdGhpcy5mb250V2VpZ2h0PXZvaWQgMCx0aGlzLmZvbnRTaXplPTEyLHRoaXMuZm9udEZhbWlseT0iVmVyZGFuYSwgc2Fucy1zZXJpZiIsdGhpcy5mb3JtYXR0ZXI9dm9pZCAwfX07eShbcXIobm8se29wdGlvbmFsOiEwfSldLHFkLnByb3RvdHlwZSwibWF4TGVuZ3RoIiwyKSx5KFtxcih5byldLHFkLnByb3RvdHlwZSwiY29sb3IiLDIpLHkoW3FyKFBvLHtvcHRpb25hbDohMH0pXSxxZC5wcm90b3R5cGUsImZvbnRTdHlsZSIsMikseShbcXIoTW8se29wdGlvbmFsOiEwfSldLHFkLnByb3RvdHlwZSwiZm9udFdlaWdodCIsMikseShbcXIobm8pXSxxZC5wcm90b3R5cGUsImZvbnRTaXplIiwyKSx5KFtxcihzbyldLHFkLnByb3RvdHlwZSwiZm9udEZhbWlseSIsMikseShbcXIoaW8se29wdGlvbmFsOiEwfSldLHFkLnByb3RvdHlwZSwiZm9ybWF0dGVyIiwyKTt2YXIgWmQ9Y2xhc3MgZXh0ZW5kcyBmdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5zaXplPTE1LHRoaXMucGFkZGluZz04LHRoaXMuZW5hYmxlZD0hMH19O3koW3VuKGU9Pnt2YXIgdDtyZXR1cm4gbnVsbD09KHQ9ZS5wYXJlbnQpP3ZvaWQgMDp0Lm9uTWFya2VyU2hhcGVDaGFuZ2UoKX0pXSxaZC5wcm90b3R5cGUsInNoYXBlIiwyKSx5KFtxcihubyldLFpkLnByb3RvdHlwZSwic2l6ZSIsMikseShbcXIobm8pXSxaZC5wcm90b3R5cGUsInBhZGRpbmciLDIpLHkoW3FyKG5vLHtvcHRpb25hbDohMH0pXSxaZC5wcm90b3R5cGUsInN0cm9rZVdpZHRoIiwyKSx5KFtxcih0byldLFpkLnByb3RvdHlwZSwiZW5hYmxlZCIsMik7dmFyIFFkPWNsYXNzIGV4dGVuZHMgZnR7fTt5KFtxcihubyx7b3B0aW9uYWw6ITB9KV0sUWQucHJvdG90eXBlLCJzdHJva2VXaWR0aCIsMikseShbcXIobm8se29wdGlvbmFsOiEwfSldLFFkLnByb3RvdHlwZSwibGVuZ3RoIiwyKTt2YXIgSmQ9Y2xhc3MgZXh0ZW5kcyBmdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5wYWRkaW5nWD0xNix0aGlzLnBhZGRpbmdZPTgsdGhpcy50b2dnbGVTZXJpZXNWaXNpYmxlPSEwLHRoaXMuc2hvd1Nlcmllc1N0cm9rZT0hMSx0aGlzLm1hcmtlcj1uZXcgWmQsdGhpcy5sYWJlbD1uZXcgcWQsdGhpcy5saW5lPW5ldyBRZH19O3koW3FyKG5vLHtvcHRpb25hbDohMH0pXSxKZC5wcm90b3R5cGUsIm1heFdpZHRoIiwyKSx5KFtxcihubyldLEpkLnByb3RvdHlwZSwicGFkZGluZ1giLDIpLHkoW3FyKG5vKV0sSmQucHJvdG90eXBlLCJwYWRkaW5nWSIsMikseShbcXIodG8pXSxKZC5wcm90b3R5cGUsInRvZ2dsZVNlcmllc1Zpc2libGUiLDIpLHkoW3FyKHRvKV0sSmQucHJvdG90eXBlLCJzaG93U2VyaWVzU3Ryb2tlIiwyKSx5KFtxcihlbyldLEpkLnByb3RvdHlwZSwibWFya2VyIiwyKSx5KFtxcihlbyldLEpkLnByb3RvdHlwZSwibGFiZWwiLDIpLHkoW3FyKGVvKV0sSmQucHJvdG90eXBlLCJsaW5lIiwyKTt2YXIgZWM9Y2xhc3MgZXh0ZW5kcyBmdHt9O3koW3FyKGlvLHtvcHRpb25hbDohMH0pXSxlYy5wcm90b3R5cGUsImxlZ2VuZEl0ZW1DbGljayIsMikseShbcXIoaW8se29wdGlvbmFsOiEwfSldLGVjLnByb3RvdHlwZSwibGVnZW5kSXRlbURvdWJsZUNsaWNrIiwyKTt2YXIgdGM9Y2xhc3MgZXh0ZW5kcyBmdHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuY3R4PWUsdGhpcy5pZD1Xcyh0aGlzKSx0aGlzLmdyb3VwPW5ldyBPbih7bmFtZToibGVnZW5kIixsYXllcjohMCx6SW5kZXg6OX0pLHRoaXMuaXRlbVNlbGVjdGlvbj1WYS5zZWxlY3QodGhpcy5ncm91cCx6ZCksdGhpcy5vbGRTaXplPVswLDBdLHRoaXMucGFnZXM9W10sdGhpcy5tYXhQYWdlU2l6ZT1bMCwwXSx0aGlzLnBhZ2luYXRpb25UcmFja2luZ0luZGV4PTAsdGhpcy50cnVuY2F0ZWRJdGVtcz1uZXcgU2V0LHRoaXMuX2RhdGE9W10sdGhpcy5pdGVtPW5ldyBKZCx0aGlzLmxpc3RlbmVycz1uZXcgZWMsdGhpcy5lbmFibGVkPSEwLHRoaXMucG9zaXRpb249ImJvdHRvbSIsdGhpcy5zcGFjaW5nPTIwLHRoaXMuY2hhcmFjdGVyV2lkdGhzPW5ldyBNYXAsdGhpcy5kZXN0cm95Rm5zPVtdLHRoaXMuc2l6ZT1bMCwwXSx0aGlzLl92aXNpYmxlPSEwLHRoaXMuaXRlbS5tYXJrZXIucGFyZW50PXRoaXMsdGhpcy5wYWdpbmF0aW9uPW5ldyBYZCh0PT5lLnVwZGF0ZVNlcnZpY2UudXBkYXRlKHQpLGU9PnRoaXMudXBkYXRlUGFnZU51bWJlcihlKSxlLnJlZ2lvbk1hbmFnZXIsZS5jdXJzb3JNYW5hZ2VyKSx0aGlzLnBhZ2luYXRpb24uYXR0YWNoUGFnaW5hdGlvbih0aGlzLmdyb3VwKSx0aGlzLml0ZW0ubWFya2VyLnBhcmVudD10aGlzO2NvbnN0IHQ9ZS5yZWdpb25NYW5hZ2VyLmFkZFJlZ2lvbigibGVnZW5kIix0aGlzLmdyb3VwKTt0aGlzLmRlc3Ryb3lGbnMucHVzaCh0LmFkZExpc3RlbmVyKCJjbGljayIsZT0+dGhpcy5jaGVja0xlZ2VuZENsaWNrKGUpLDkpLHQuYWRkTGlzdGVuZXIoImRibGNsaWNrIixlPT50aGlzLmNoZWNrTGVnZW5kRG91YmxlQ2xpY2soZSksOSksdC5hZGRMaXN0ZW5lcigiaG92ZXIiLGU9PnRoaXMuaGFuZGxlTGVnZW5kTW91c2VNb3ZlKGUpKSx0LmFkZExpc3RlbmVyKCJsZWF2ZSIsZT0+dGhpcy5oYW5kbGVMZWdlbmRNb3VzZUV4aXQoZSkpLGUubGF5b3V0U2VydmljZS5hZGRMaXN0ZW5lcigic3RhcnQtbGF5b3V0IixlPT50aGlzLnBvc2l0aW9uTGVnZW5kKGUuc2hyaW5rUmVjdCkpLCgpPT50aGlzLmRldGFjaExlZ2VuZCgpKX1zZXQgZGF0YShlKXt0aGlzLl9kYXRhPWUsdGhpcy51cGRhdGVHcm91cFZpc2liaWxpdHkoKX1nZXQgZGF0YSgpe3JldHVybiB0aGlzLl9kYXRhfWRlc3Ryb3koKXt0aGlzLmRlc3Ryb3lGbnMuZm9yRWFjaChlPT5lKCkpLHRoaXMucGFnaW5hdGlvbi5kZXN0cm95KCl9b25NYXJrZXJTaGFwZUNoYW5nZSgpe3RoaXMuaXRlbVNlbGVjdGlvbi5jbGVhcigpLHRoaXMuZ3JvdXAubWFya0RpcnR5KHRoaXMuZ3JvdXAsMil9Z2V0T3JpZW50YXRpb24oKXtpZih2b2lkIDAhPT10aGlzLm9yaWVudGF0aW9uKXJldHVybiB0aGlzLm9yaWVudGF0aW9uO3N3aXRjaCh0aGlzLnBvc2l0aW9uKXtjYXNlInJpZ2h0IjpjYXNlImxlZnQiOnJldHVybiJ2ZXJ0aWNhbCI7Y2FzZSJib3R0b20iOmNhc2UidG9wIjpyZXR1cm4iaG9yaXpvbnRhbCJ9fWdldENoYXJhY3RlcldpZHRocyhlKXtjb25zdHtjaGFyYWN0ZXJXaWR0aHM6dH09dGhpcztpZih0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7Y29uc3QgaT17Ii4uLiI6JG8uZ2V0VGV4dFNpemUoIi4uLiIsZSkud2lkdGh9O3JldHVybiB0LnNldChlLGkpLGl9c2V0IHZpc2libGUoZSl7dGhpcy5fdmlzaWJsZT1lLHRoaXMudXBkYXRlR3JvdXBWaXNpYmlsaXR5KCl9Z2V0IHZpc2libGUoKXtyZXR1cm4gdGhpcy5fdmlzaWJsZX11cGRhdGVHcm91cFZpc2liaWxpdHkoKXt0aGlzLmdyb3VwLnZpc2libGU9dGhpcy5lbmFibGVkJiZ0aGlzLnZpc2libGUmJnRoaXMuZGF0YS5sZW5ndGg+MH1hdHRhY2hMZWdlbmQoZSl7ZS5hcHBlbmQodGhpcy5ncm91cCl9ZGV0YWNoTGVnZW5kKCl7dmFyIGU7bnVsbD09KGU9dGhpcy5ncm91cC5wYXJlbnQpfHxlLnJlbW92ZUNoaWxkKHRoaXMuZ3JvdXApfWdldEl0ZW1MYWJlbChlKXtjb25zdHtjdHg6e2NhbGxiYWNrQ2FjaGU6dH19PXRoaXMse2Zvcm1hdHRlcjppfT10aGlzLml0ZW0ubGFiZWw7cmV0dXJuIGk/dC5jYWxsKGkse2l0ZW1JZDplLml0ZW1JZCx2YWx1ZTplLmxhYmVsLnRleHQsc2VyaWVzSWQ6ZS5zZXJpZXNJZH0pOmUubGFiZWwudGV4dH1wZXJmb3JtTGF5b3V0KGUsdCl7Y29uc3R7cGFkZGluZ1g6aSxwYWRkaW5nWTpzLGxhYmVsOnIsbWF4V2lkdGg6byxtYXJrZXI6e3NpemU6bixwYWRkaW5nOmEsc2hhcGU6bH0sbGFiZWw6e21heExlbmd0aDpkPTEvMCxmb250U3R5bGU6Yyxmb250V2VpZ2h0OmgsZm9udFNpemU6dSxmb250RmFtaWx5OnB9LGxpbmU6ZyxzaG93U2VyaWVzU3Ryb2tlOm19PXRoaXMuaXRlbSxmPVsuLi50aGlzLmRhdGFdO3RoaXMucmV2ZXJzZU9yZGVyJiZmLnJldmVyc2UoKSx0aGlzLml0ZW1TZWxlY3Rpb24udXBkYXRlKGYpO2NvbnN0IHY9W10sQz10bihyKSx5PW51bGwhPW8/bzouOCplLFM9bithK2k7aWYodGhpcy5pdGVtU2VsZWN0aW9uLmVhY2goKGUsdCk9Pnt2YXIgaSxzLHI7Y29uc3Qgbz1VZChudWxsIT1sP2w6dC5tYXJrZXIuc2hhcGUpLGY9bnVsbCE9KGk9dC5tYXJrZXIuZW5hYmxlZCk/aTp0aGlzLml0ZW0ubWFya2VyLmVuYWJsZWQ7ZS5tYXJrZXImJmUubWFya2VyIGluc3RhbmNlb2Ygb3x8KGUubWFya2VyPW5ldyBvKSxlLm1hcmtlclNpemU9bixlLnNwYWNpbmc9YSxlLmZvbnRTdHlsZT1jLGUuZm9udFdlaWdodD1oLGUuZm9udFNpemU9dSxlLmZvbnRGYW1pbHk9cDtjb25zdCB3PW51bGwhPShzPXQuaXRlbUlkKT9zOnQuaWQsYj10aGlzLmdldEl0ZW1MYWJlbCh0KSxFPShudWxsIT1iP2I6Ijx1bmtub3duPiIpLnJlcGxhY2UoL1xyP1xuL2csIiAiKTtlLnRleHQ9dGhpcy50cnVuY2F0ZShFLGQseSxTLEMsdyksbSYmdm9pZCAwIT09dC5saW5lPyhlLmxpbmVWaXNpYmxlPSEwLGUubWFya2VyVmlzaWJsZT1mLGUuc2V0U2VyaWVzU3Ryb2tlT2Zmc2V0KG51bGwhPShyPWcubGVuZ3RoKT9yOjUpKTooZS5saW5lVmlzaWJsZT0hMSxlLm1hcmtlclZpc2libGU9ITApLHYucHVzaChlLmNvbXB1dGVCQm94KCkpfSksZT1NYXRoLm1heCgxLGUpLHQ9TWF0aC5tYXgoMSx0KSwhaXNGaW5pdGUoZSkpcmV0dXJuITE7Y29uc3Qgdz10aGlzLnNpemUsYj10aGlzLm9sZFNpemU7d1swXT1lLHdbMV09dCx3WzBdPT09YlswXSYmd1sxXT09PWJbMV18fChiWzBdPXdbMF0sYlsxXT13WzFdKTtjb25zdHtwYWdlczpFLG1heFBhZ2VIZWlnaHQ6UixtYXhQYWdlV2lkdGg6eH09dGhpcy51cGRhdGVQYWdpbmF0aW9uKHYsZSx0KTt0aGlzLnBhZ2VzPUUsdGhpcy5tYXhQYWdlU2l6ZT1beC1pLFItc107Y29uc3QgVD10aGlzLnBhZ2luYXRpb24uY3VycmVudFBhZ2UsRD10aGlzLnBhZ2VzW1RdO3RoaXMucGFnZXMubGVuZ3RoPDF8fCFEP3RoaXMudmlzaWJsZT0hMToodGhpcy52aXNpYmxlPSEwLHRoaXMudXBkYXRlUG9zaXRpb25zKFQpLHRoaXMudXBkYXRlKCkpfXRydW5jYXRlKGUsdCxpLHMscixvKXtjb25zdCBuPWUuc3BsaXQoIiIpO2xldCBhPSExO2UubGVuZ3RoPnQmJihlPSIiK2Uuc3Vic3RyaW5nKDAsdCksYT0hMCk7aWYoTWF0aC5mbG9vcihzKyRvLmdldFRleHRTaXplKGUscikud2lkdGgpPmkpe2xldCB0PSIiO2NvbnN0IG89dGhpcy5nZXRDaGFyYWN0ZXJXaWR0aHMocik7bGV0IGw9cytvWyIuLi4iXTtmb3IoY29uc3QgZSBvZiBuKXtpZihvW2VdfHwob1tlXT0kby5nZXRUZXh0U2l6ZShlLHIpLndpZHRoKSxsKz1vW2VdLGw+aSlicmVhazt0Kz1lfWU9dCxhPSEwfXJldHVybiBhPyhlKz0iLi4uIix0aGlzLnRydW5jYXRlZEl0ZW1zLmFkZChvKSk6dGhpcy50cnVuY2F0ZWRJdGVtcy5kZWxldGUobyksZX11cGRhdGVQYWdpbmF0aW9uKGUsdCxpKXtjb25zdCBzPXRoaXMuZ2V0T3JpZW50YXRpb24oKSxyPU1hdGgubWluKHRoaXMucGFnaW5hdGlvblRyYWNraW5nSW5kZXgsZS5sZW5ndGgpO3RoaXMucGFnaW5hdGlvbi5vcmllbnRhdGlvbj1zLHRoaXMucGFnaW5hdGlvbi50cmFuc2xhdGlvblg9MCx0aGlzLnBhZ2luYXRpb24udHJhbnNsYXRpb25ZPTA7Y29uc3R7cGFnZXM6byxtYXhQYWdlSGVpZ2h0Om4sbWF4UGFnZVdpZHRoOmEscGFnaW5hdGlvbkJCb3g6bCxwYWdpbmF0aW9uVmVydGljYWw6ZH09dGhpcy5jYWxjdWxhdGVQYWdpbmF0aW9uKGUsdCxpKSxjPW8uZmluZEluZGV4KGU9PmUuZW5kSW5kZXg+PXIpO3RoaXMucGFnaW5hdGlvbi5jdXJyZW50UGFnZT1LcygwLGMsby5sZW5ndGgtMSk7Y29uc3R7cGFkZGluZ1g6aCxwYWRkaW5nWTp1fT10aGlzLml0ZW0scD1hLWgsZz1uLXU7bGV0IG09MCxmPS1sLnktdGhpcy5pdGVtLm1hcmtlci5zaXplLzI7cmV0dXJuIGQ/Zis9Zys4OihtKz0tbC54K3ArOCxmKz0oZy1sLmhlaWdodCkvMiksdGhpcy5wYWdpbmF0aW9uLnRyYW5zbGF0aW9uWD1tLHRoaXMucGFnaW5hdGlvbi50cmFuc2xhdGlvblk9Zix0aGlzLnBhZ2luYXRpb24udXBkYXRlKCksdGhpcy5wYWdpbmF0aW9uLnVwZGF0ZU1hcmtlcnMoKSx7bWF4UGFnZUhlaWdodDpuLG1heFBhZ2VXaWR0aDphLHBhZ2VzOm99fWNhbGN1bGF0ZVBhZ2luYXRpb24oZSx0LGkpe3ZhciBzLHIsbztjb25zdHtwYWRkaW5nWDpuLHBhZGRpbmdZOmF9PXRoaXMuaXRlbSxsPXRoaXMuZ2V0T3JpZW50YXRpb24oKSxkPVsibGVmdCIsInJpZ2h0Il0uaW5jbHVkZXModGhpcy5wb3NpdGlvbik7bGV0IGM9dGhpcy5wYWdpbmF0aW9uLmNvbXB1dGVCQm94KCksaD1uZXcgb3IoMCwwLDAsMCksdT1bXSxwPTAsZz0wLG09MDtjb25zdCBmPWU9Pntjb25zdHt3aWR0aDp0LGhlaWdodDppfT1lO3JldHVybiB0PT09Yy53aWR0aCYmaT09PWMuaGVpZ2h0fSx2PXZvaWQgMCE9PXRoaXMubWF4V2lkdGh8fHZvaWQgMCE9PXRoaXMubWF4SGVpZ2h0O2Rve2lmKG0rKz4xMCl7TC53YXJuKCJ1bmFibGUgdG8gZmluZCBzdGFibGUgbGVnZW5kIGxheW91dC4iKTticmVha31jPWg7Y29uc3QgZj10LShkPzA6Yy53aWR0aCksQz1DZCh7b3JpZW50YXRpb246bCxiYm94ZXM6ZSxtYXhIZWlnaHQ6aS0oZD9jLmhlaWdodDowKSxtYXhXaWR0aDpmLGl0ZW1QYWRkaW5nWTphLGl0ZW1QYWRkaW5nWDpuLGZvcmNlUmVzdWx0OnZ9KTt1PW51bGwhPShzPW51bGw9PUM/dm9pZCAwOkMucGFnZXMpP3M6W10scD1udWxsIT0ocj1udWxsPT1DP3ZvaWQgMDpDLm1heFBhZ2VXaWR0aCk/cjowLGc9bnVsbCE9KG89bnVsbD09Qz92b2lkIDA6Qy5tYXhQYWdlSGVpZ2h0KT9vOjA7Y29uc3QgeT11Lmxlbmd0aDtpZih0aGlzLnBhZ2luYXRpb24udmlzaWJsZT15PjEsdGhpcy5wYWdpbmF0aW9uLnRvdGFsUGFnZXM9eSx0aGlzLnBhZ2luYXRpb24udXBkYXRlKCksaD10aGlzLnBhZ2luYXRpb24uY29tcHV0ZUJCb3goKSwhdGhpcy5wYWdpbmF0aW9uLnZpc2libGUpYnJlYWt9d2hpbGUoIWYoaCkpO3JldHVybnttYXhQYWdlV2lkdGg6cCxtYXhQYWdlSGVpZ2h0OmcscGFnZXM6dSxwYWdpbmF0aW9uQkJveDpjLHBhZ2luYXRpb25WZXJ0aWNhbDpkfX11cGRhdGVQb3NpdGlvbnMoZT0wKXtjb25zdHtpdGVtOntwYWRkaW5nWTp0fSxpdGVtU2VsZWN0aW9uOmkscGFnZXM6c309dGhpcztpZihzLmxlbmd0aDwxfHwhc1tlXSlyZXR1cm47Y29uc3R7Y29sdW1uczpyLHN0YXJ0SW5kZXg6byxlbmRJbmRleDpufT1zW2VdO2xldCBhPTAsbD0wO2NvbnN0IGQ9ci5sZW5ndGgsYz1yWzBdLmluZGljZXMubGVuZ3RoLGg9Imhvcml6b250YWwiPT09dGhpcy5nZXRPcmllbnRhdGlvbigpLHU9clswXS5iYm94ZXNbMF0uaGVpZ2h0K3QscD1bXTtpLmVhY2goKGUsdCxpKT0+e3ZhciBzLGc7aWYoaTxvfHxpPm4pcmV0dXJuIHZvaWQoZS52aXNpYmxlPSExKTtjb25zdCBtPWktbztsZXQgZj0wLHY9MDtoPyhmPW0lZCx2PU1hdGguZmxvb3IobS9kKSk6KGY9TWF0aC5mbG9vcihtL2MpLHY9bSVjKSxlLnZpc2libGU9ITA7Y29uc3QgQz1yW2ZdO0MmJihsPXUqdixhPW51bGwhPShzPXBbdl0pP3M6MCxwW3ZdPShudWxsIT0oZz1wW3ZdKT9nOjApK0MuY29sdW1uV2lkdGgsZS50cmFuc2xhdGlvblg9TWF0aC5mbG9vcihhKSxlLnRyYW5zbGF0aW9uWT1NYXRoLmZsb29yKGwpKX0pfXVwZGF0ZVBhZ2VOdW1iZXIoZSl7Y29uc3R7cGFnZXM6dH09dGhpcyx7c3RhcnRJbmRleDppLGVuZEluZGV4OnN9PXRbZV07MD09PWk/dGhpcy5wYWdpbmF0aW9uVHJhY2tpbmdJbmRleD0wOmU9PT10Lmxlbmd0aC0xP3RoaXMucGFnaW5hdGlvblRyYWNraW5nSW5kZXg9czp0aGlzLnBhZ2luYXRpb25UcmFja2luZ0luZGV4PU1hdGguZmxvb3IoKGkrcykvMiksdGhpcy5wYWdpbmF0aW9uLnVwZGF0ZSgpLHRoaXMucGFnaW5hdGlvbi51cGRhdGVNYXJrZXJzKCksdGhpcy51cGRhdGVQb3NpdGlvbnMoZSksdGhpcy5jdHgudXBkYXRlU2VydmljZS51cGRhdGUoNil9dXBkYXRlKCl7Y29uc3R7bGFiZWw6e2NvbG9yOmV9LG1hcmtlcjp0LGxpbmU6aSxzaG93U2VyaWVzU3Ryb2tlOnN9PXRoaXMuaXRlbTt0aGlzLml0ZW1TZWxlY3Rpb24uZWFjaCgocixvKT0+e3ZhciBuLGE7Y29uc3QgbD1vLm1hcmtlcjtyLm1hcmtlckZpbGw9bC5maWxsLHIubWFya2VyU3Ryb2tlPWwuc3Ryb2tlLHIubWFya2VyU3Ryb2tlV2lkdGg9bnVsbCE9KG49dC5zdHJva2VXaWR0aCk/bjpNYXRoLm1pbigyLGwuc3Ryb2tlV2lkdGgpLHIubWFya2VyRmlsbE9wYWNpdHk9bC5maWxsT3BhY2l0eSxyLm1hcmtlclN0cm9rZU9wYWNpdHk9bC5zdHJva2VPcGFjaXR5LHIub3BhY2l0eT1vLmVuYWJsZWQ/MTouNSxyLmNvbG9yPWU7Y29uc3R7bGluZTpkfT1vO3MmJnZvaWQgMCE9PWQmJihyLmxpbmVTdHJva2U9ZC5zdHJva2Usci5saW5lU3Ryb2tlT3BhY2l0eT1kLnN0cm9rZU9wYWNpdHksci5saW5lU3Ryb2tlV2lkdGg9bnVsbCE9KGE9aS5zdHJva2VXaWR0aCk/YTpNYXRoLm1pbigyLGQuc3Ryb2tlV2lkdGgpLHIubGluZUxpbmVEYXNoPWQubGluZURhc2gpfSl9Z2V0RGF0dW1Gb3JQb2ludChlLHQpe2NvbnN0IGk9W10scz17ZGlzdDoxLzAsZGF0dW06dm9pZCAwfTtmb3IoY29uc3QgciBvZiB0aGlzLmdyb3VwLmNoaWxkcmVuKXtpZighci52aXNpYmxlKWNvbnRpbnVlO2lmKCEociBpbnN0YW5jZW9mIHpkKSljb250aW51ZTtjb25zdCBvPXIuY29tcHV0ZUJCb3goKTtpZihvLmdyb3codGhpcy5pdGVtLnBhZGRpbmdYLzIsImhvcml6b250YWwiKSxvLmdyb3codGhpcy5pdGVtLnBhZGRpbmdZLzIsInZlcnRpY2FsIiksby5jb250YWluc1BvaW50KGUsdCkpcmV0dXJuIHIuZGF0dW07Y29uc3Qgbj1lLW8ueC10aGlzLml0ZW0ucGFkZGluZ1gvMixhPXQtby55LXRoaXMuaXRlbS5wYWRkaW5nWS8yLGw9cChuLDIpK3AoYSwyKTtuPj0wJiZhPj0wJiZsPHMuZGlzdCYmKHMuZGlzdD1sLHMuZGF0dW09ci5kYXR1bSksaS5wdXNoKG8pfWlmKG9yLm1lcmdlKGkpLmNvbnRhaW5zUG9pbnQoZSx0KSlyZXR1cm4gcy5kYXR1bX1jb21wdXRlUGFnZWRCQm94KCl7Y29uc3QgZT10aGlzLmdyb3VwLmNvbXB1dGVCQm94KCk7aWYodGhpcy5wYWdlcy5sZW5ndGg8PTEpcmV0dXJuIGU7Y29uc3RbdCxpXT10aGlzLm1heFBhZ2VTaXplO3JldHVybiBlLmhlaWdodD1NYXRoLm1heChpLGUuaGVpZ2h0KSxlLndpZHRoPU1hdGgubWF4KHQsZS53aWR0aCksZX1jaGVja0xlZ2VuZENsaWNrKGUpe2NvbnN0e2xpc3RlbmVyczp7bGVnZW5kSXRlbUNsaWNrOnR9LGN0eDp7Y2hhcnRTZXJ2aWNlOmksaGlnaGxpZ2h0TWFuYWdlcjpzfSxpdGVtOnt0b2dnbGVTZXJpZXNWaXNpYmxlOnJ9LHByZXZlbnRIaWRpbmdBbGw6b309dGhpcyxuPXRoaXMuZ2V0RGF0dW1Gb3JQb2ludChlLm9mZnNldFgsZS5vZmZzZXRZKTtpZighbilyZXR1cm47Y29uc3R7aWQ6YSxpdGVtSWQ6bCxlbmFibGVkOmR9PW4sYz1pLnNlcmllcy5maW5kKGU9PmUuaWQ9PT1hKTtpZighYylyZXR1cm47ZS5jb25zdW1lKCk7bGV0IGg9ZDtpZihyKXtpZihoPSFkLG8mJiFoKXtpLnNlcmllcy5mbGF0TWFwKGU9PmUuZ2V0TGVnZW5kRGF0YSgiY2F0ZWdvcnkiKSkuZmlsdGVyKGU9PmUuZW5hYmxlZCkubGVuZ3RoPDImJihoPSEwKX10aGlzLmN0eC5jaGFydEV2ZW50TWFuYWdlci5sZWdlbmRJdGVtQ2xpY2soYyxsLGgsbi5sZWdlbmRJdGVtTmFtZSl9aD9zLnVwZGF0ZUhpZ2hsaWdodCh0aGlzLmlkLHtzZXJpZXM6YyxpdGVtSWQ6bCxkYXR1bTp2b2lkIDB9KTpzLnVwZGF0ZUhpZ2hsaWdodCh0aGlzLmlkKSx0aGlzLmN0eC51cGRhdGVTZXJ2aWNlLnVwZGF0ZSgyLHtmb3JjZU5vZGVEYXRhUmVmcmVzaDohMH0pLG51bGw9PXR8fHQoe3R5cGU6ImNsaWNrIixlbmFibGVkOmgsaXRlbUlkOmwsc2VyaWVzSWQ6Yy5pZH0pfWNoZWNrTGVnZW5kRG91YmxlQ2xpY2soZSl7dmFyIHQ7Y29uc3R7bGlzdGVuZXJzOntsZWdlbmRJdGVtRG91YmxlQ2xpY2s6aX0sY3R4OntjaGFydFNlcnZpY2U6c30saXRlbTp7dG9nZ2xlU2VyaWVzVmlzaWJsZTpyfX09dGhpcztpZigiaW50ZWdyYXRlZCI9PT1zLm1vZGUpcmV0dXJuO2NvbnN0IG89dGhpcy5nZXREYXR1bUZvclBvaW50KGUub2Zmc2V0WCxlLm9mZnNldFkpO2lmKCFvKXJldHVybjtjb25zdHtpZDpuLGl0ZW1JZDphLHNlcmllc0lkOmx9PW8sZD1zLnNlcmllcy5maW5kKGU9PmUuaWQ9PT1uKTtpZihkKXtpZihlLmNvbnN1bWUoKSxyKXtjb25zdCBlPXMuc2VyaWVzLmZsYXRNYXAoZT0+ZS5nZXRMZWdlbmREYXRhKCJjYXRlZ29yeSIpKSxpPWUuZmlsdGVyKGU9PmUuZW5hYmxlZCkubGVuZ3RoLHI9ZS5maW5kKGU9PmUuaXRlbUlkPT09YSYmZS5zZXJpZXNJZD09PWwpO3RoaXMuY3R4LmNoYXJ0RXZlbnRNYW5hZ2VyLmxlZ2VuZEl0ZW1Eb3VibGVDbGljayhkLGEsbnVsbCE9KHQ9bnVsbD09cj92b2lkIDA6ci5lbmFibGVkKSYmdCxpLG51bGw9PXI/dm9pZCAwOnIubGVnZW5kSXRlbU5hbWUpfXRoaXMuY3R4LnVwZGF0ZVNlcnZpY2UudXBkYXRlKDIse2ZvcmNlTm9kZURhdGFSZWZyZXNoOiEwfSksbnVsbD09aXx8aSh7dHlwZToiZGJsY2xpY2siLGVuYWJsZWQ6ITAsaXRlbUlkOmEsc2VyaWVzSWQ6ZC5pZH0pfX1oYW5kbGVMZWdlbmRNb3VzZU1vdmUoZSl7dmFyIHQ7Y29uc3R7ZW5hYmxlZDppLGl0ZW06e3RvZ2dsZVNlcmllc1Zpc2libGU6c30sbGlzdGVuZXJzOnJ9PXRoaXM7aWYoIWkpcmV0dXJuO2NvbnN0e29mZnNldFg6byxvZmZzZXRZOm59PWU7ZS5jb25zdW1lKCk7Y29uc3QgYT10aGlzLmdldERhdHVtRm9yUG9pbnQobyxuKTtpZih2b2lkIDA9PT1hKXJldHVybiB0aGlzLmN0eC5jdXJzb3JNYW5hZ2VyLnVwZGF0ZUN1cnNvcih0aGlzLmlkKSx2b2lkIHRoaXMuY3R4LmhpZ2hsaWdodE1hbmFnZXIudXBkYXRlSGlnaGxpZ2h0KHRoaXMuaWQpO2NvbnN0IGw9YT90aGlzLmN0eC5jaGFydFNlcnZpY2Uuc2VyaWVzLmZpbmQoZT0+ZS5pZD09PShudWxsPT1hP3ZvaWQgMDphLmlkKSk6dm9pZCAwO2EmJnRoaXMudHJ1bmNhdGVkSXRlbXMuaGFzKG51bGwhPSh0PWEuaXRlbUlkKT90OmEuaWQpP3RoaXMuY3R4LnRvb2x0aXBNYW5hZ2VyLnVwZGF0ZVRvb2x0aXAodGhpcy5pZCx7b2Zmc2V0WDpvLG9mZnNldFk6bixsYXN0UG9pbnRlckV2ZW50OmUsc2hvd0Fycm93OiExLGFkZEN1c3RvbUNsYXNzOiExfSxnbih7Y29udGVudDp0aGlzLmdldEl0ZW1MYWJlbChhKX0pKTp0aGlzLmN0eC50b29sdGlwTWFuYWdlci5yZW1vdmVUb29sdGlwKHRoaXMuaWQpLChzfHxudWxsIT1yLmxlZ2VuZEl0ZW1DbGlja3x8bnVsbCE9ci5sZWdlbmRJdGVtRG91YmxlQ2xpY2spJiZ0aGlzLmN0eC5jdXJzb3JNYW5hZ2VyLnVwZGF0ZUN1cnNvcih0aGlzLmlkLCJwb2ludGVyIiksKG51bGw9PWE/dm9pZCAwOmEuZW5hYmxlZCkmJmw/dGhpcy5jdHguaGlnaGxpZ2h0TWFuYWdlci51cGRhdGVIaWdobGlnaHQodGhpcy5pZCx7c2VyaWVzOmwsaXRlbUlkOm51bGw9PWE/dm9pZCAwOmEuaXRlbUlkLGRhdHVtOnZvaWQgMH0pOnRoaXMuY3R4LmhpZ2hsaWdodE1hbmFnZXIudXBkYXRlSGlnaGxpZ2h0KHRoaXMuaWQpfWhhbmRsZUxlZ2VuZE1vdXNlRXhpdChlKXt0aGlzLmN0eC5jdXJzb3JNYW5hZ2VyLnVwZGF0ZUN1cnNvcih0aGlzLmlkKSx0aGlzLmN0eC5oaWdobGlnaHRNYW5hZ2VyLnVwZGF0ZUhpZ2hsaWdodCh0aGlzLmlkKSx0aGlzLmN0eC50b29sdGlwTWFuYWdlci5yZW1vdmVUb29sdGlwKHRoaXMuaWQpfXBvc2l0aW9uTGVnZW5kKGUpe2NvbnN0IHQ9ZS5jbG9uZSgpO2lmKCF0aGlzLmVuYWJsZWR8fCF0aGlzLmRhdGEubGVuZ3RoKXJldHVybntzaHJpbmtSZWN0OnR9O2NvbnN0W2ksc109dGhpcy5jYWxjdWxhdGVMZWdlbmREaW1lbnNpb25zKGUpO3RoaXMuZ3JvdXAudHJhbnNsYXRpb25YPTAsdGhpcy5ncm91cC50cmFuc2xhdGlvblk9MCx0aGlzLnBlcmZvcm1MYXlvdXQoaSxzKTtjb25zdCByPXRoaXMuY29tcHV0ZVBhZ2VkQkJveCgpLG89KCk9Pntzd2l0Y2godGhpcy5wb3NpdGlvbil7Y2FzZSJ0b3AiOmNhc2UibGVmdCI6cmV0dXJuIDA7Y2FzZSJib3R0b20iOnJldHVybiBlLmhlaWdodC1yLmhlaWdodDtjYXNlInJpZ2h0IjpkZWZhdWx0OnJldHVybiBlLndpZHRoLXIud2lkdGh9fTtpZih0aGlzLnZpc2libGUpe2xldCBpLHM7c3dpdGNoKHRoaXMucG9zaXRpb24pe2Nhc2UidG9wIjpjYXNlImJvdHRvbSI6aT0oZS53aWR0aC1yLndpZHRoKS8yLHM9bygpLHQuc2hyaW5rKHIuaGVpZ2h0LHRoaXMucG9zaXRpb24pO2JyZWFrO2Nhc2UibGVmdCI6Y2FzZSJyaWdodCI6ZGVmYXVsdDppPW8oKSxzPShlLmhlaWdodC1yLmhlaWdodCkvMix0LnNocmluayhyLndpZHRoLHRoaXMucG9zaXRpb24pfXRoaXMuZ3JvdXAudHJhbnNsYXRpb25YPU1hdGguZmxvb3IoLXIueCtlLngraSksdGhpcy5ncm91cC50cmFuc2xhdGlvblk9TWF0aC5mbG9vcigtci55K2UueStzKX1pZih0aGlzLnZpc2libGUmJnRoaXMuZW5hYmxlZCYmdGhpcy5kYXRhLmxlbmd0aCl7Y29uc3QgZT10aGlzLnNwYWNpbmc7dC5zaHJpbmsoZSx0aGlzLnBvc2l0aW9uKTtjb25zdCBpPXIuY2xvbmUoKTtpLngrPXRoaXMuZ3JvdXAudHJhbnNsYXRpb25YLGkueSs9dGhpcy5ncm91cC50cmFuc2xhdGlvblksdGhpcy5jdHgudG9vbHRpcE1hbmFnZXIudXBkYXRlRXhjbHVzaXZlUmVjdCh0aGlzLmlkLGkpfWVsc2UgdGhpcy5jdHgudG9vbHRpcE1hbmFnZXIudXBkYXRlRXhjbHVzaXZlUmVjdCh0aGlzLmlkKTtyZXR1cm57c2hyaW5rUmVjdDp0fX1jYWxjdWxhdGVMZWdlbmREaW1lbnNpb25zKGUpe2NvbnN0e3dpZHRoOnQsaGVpZ2h0Oml9PWUscz10L2k7bGV0IHIsbztzd2l0Y2godGhpcy5wb3NpdGlvbil7Y2FzZSJ0b3AiOmNhc2UiYm90dG9tIjpjb25zdCBlPXM8MT9NYXRoLm1pbiguNSwxL3MqLjIpOi4yO3I9dGhpcy5tYXhXaWR0aD9NYXRoLm1pbih0aGlzLm1heFdpZHRoLHQpOnQsbz10aGlzLm1heEhlaWdodD9NYXRoLm1pbih0aGlzLm1heEhlaWdodCxpKTpNYXRoLnJvdW5kKGkqZSk7YnJlYWs7Y2FzZSJsZWZ0IjpjYXNlInJpZ2h0IjpkZWZhdWx0OmNvbnN0IG49cz4xP01hdGgubWluKC41LC4yNSpzKTouMjU7cj10aGlzLm1heFdpZHRoP01hdGgubWluKHRoaXMubWF4V2lkdGgsdCk6TWF0aC5yb3VuZCh0Km4pLG89dGhpcy5tYXhIZWlnaHQ/TWF0aC5taW4odGhpcy5tYXhIZWlnaHQsaSk6aX1yZXR1cm5bcixvXX19O3RjLmNsYXNzTmFtZT0iTGVnZW5kIix5KFtxcihlbyldLHRjLnByb3RvdHlwZSwicGFnaW5hdGlvbiIsMikseShbcXIoZW8pXSx0Yy5wcm90b3R5cGUsIml0ZW0iLDIpLHkoW3FyKGVvKV0sdGMucHJvdG90eXBlLCJsaXN0ZW5lcnMiLDIpLHkoW3VuKGU9PmUudXBkYXRlR3JvdXBWaXNpYmlsaXR5KCkpLHFyKHRvKV0sdGMucHJvdG90eXBlLCJlbmFibGVkIiwyKSx5KFtxcihBbyldLHRjLnByb3RvdHlwZSwicG9zaXRpb24iLDIpLHkoW3FyKG5vLHtvcHRpb25hbDohMH0pXSx0Yy5wcm90b3R5cGUsIm1heFdpZHRoIiwyKSx5KFtxcihubyx7b3B0aW9uYWw6ITB9KV0sdGMucHJvdG90eXBlLCJtYXhIZWlnaHQiLDIpLHkoW3FyKHRvLHtvcHRpb25hbDohMH0pXSx0Yy5wcm90b3R5cGUsInJldmVyc2VPcmRlciIsMikseShbcXIoVm8oWyJob3Jpem9udGFsIiwidmVydGljYWwiXSwiYW4gb3JpZW50YXRpb24iKSx7b3B0aW9uYWw6ITB9KV0sdGMucHJvdG90eXBlLCJvcmllbnRhdGlvbiIsMikseShbcXIodG8se29wdGlvbmFsOiEwfSldLHRjLnByb3RvdHlwZSwicHJldmVudEhpZGluZ0FsbCIsMikseShbcXIobm8pXSx0Yy5wcm90b3R5cGUsInNwYWNpbmciLDIpO3ZhciBpYz1bInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCJdLHNjPVsiY2F0ZWdvcnkiLCJncm91cGVkLWNhdGVnb3J5IiwibnVtYmVyIiwibG9nIiwidGltZSJdO3ZhciByYz1jbGFzc3tjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5jbGFzc05hbWU9ZSx0aGlzLnBhcmVudEVsZW1lbnQ9dCx0aGlzLmFuaW1hdGlvbk1hbmFnZXI9aSx0aGlzLmRhcmtUaGVtZT0hMX1zaG93KGUpe3ZhciB0LGk7dGhpcy5lbGVtZW50fHwodGhpcy5lbGVtZW50PXRoaXMuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc05hbWUsImFnLWNoYXJ0LW92ZXJsYXkiKSksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoImFnLWNoYXJ0LWRhcmstb3ZlcmxheSIsdGhpcy5kYXJrVGhlbWUpO2NvbnN0e2VsZW1lbnQ6c309dGhpcztpZihzLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIscy5zdHlsZS5sZWZ0PWUueCsicHgiLHMuc3R5bGUudG9wPWUueSsicHgiLHMuc3R5bGUud2lkdGg9ZS53aWR0aCsicHgiLHMuc3R5bGUuaGVpZ2h0PWUuaGVpZ2h0KyJweCIsdGhpcy5yZW5kZXJlcilzLmlubmVySFRNTD10aGlzLnJlbmRlcmVyKCk7ZWxzZXtjb25zdCBlPXRoaXMuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZS5zdHlsZS5hbGlnbkl0ZW1zPSJjZW50ZXIiLGUuc3R5bGUuYm94U2l6aW5nPSJib3JkZXItYm94IixlLnN0eWxlLmRpc3BsYXk9ImZsZXgiLGUuc3R5bGUuanVzdGlmeUNvbnRlbnQ9ImNlbnRlciIsZS5zdHlsZS5tYXJnaW49IjhweCIsZS5zdHlsZS5oZWlnaHQ9IjEwMCUiLGUuc3R5bGUuZm9udD0iMTJweCBWZXJkYW5hLCBzYW5zLXNlcmlmIixlLmlubmVyVGV4dD1udWxsIT0odD10aGlzLnRleHQpP3Q6Ik5vIGRhdGEgdG8gZGlzcGxheSIscy5yZXBsYWNlQ2hpbGRyZW4oZSksdGhpcy5hbmltYXRpb25NYW5hZ2VyLmFuaW1hdGUoe2Zyb206MCx0bzoxLHBoYXNlOiJhZGQiLGlkOiJvdmVybGF5Iixncm91cElkOiJvcGFjaXR5IixvblVwZGF0ZShlKXtzLnN0eWxlLm9wYWNpdHk9U3RyaW5nKGUpfSxvblN0b3AoKXtzLnN0eWxlLm9wYWNpdHk9IjEifX0pfW51bGw9PShpPXRoaXMucGFyZW50RWxlbWVudCl8fGkuYXBwZW5kKHMpfWhpZGUoKXtpZighdGhpcy5lbGVtZW50KXJldHVybjtjb25zdCBlPXRoaXMuZWxlbWVudDt0aGlzLmFuaW1hdGlvbk1hbmFnZXIuYW5pbWF0ZSh7ZnJvbToxLHRvOjAscGhhc2U6InJlbW92ZSIsaWQ6Im92ZXJsYXkiLGdyb3VwSWQ6Im9wYWNpdHkiLG9uVXBkYXRlKHQpe2Uuc3R5bGUub3BhY2l0eT1TdHJpbmcodCl9LG9uU3RvcCgpe2UucmVtb3ZlKCl9fSksdGhpcy5lbGVtZW50PXZvaWQgMH1jcmVhdGVFbGVtZW50KGUsdCl7cmV0dXJuIHRoaXMucGFyZW50RWxlbWVudC5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZSx0KX19O3koW3FyKGlvLHtvcHRpb25hbDohMH0pXSxyYy5wcm90b3R5cGUsInJlbmRlcmVyIiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0scmMucHJvdG90eXBlLCJ0ZXh0IiwyKSx5KFtxcih0byldLHJjLnByb3RvdHlwZSwiZGFya1RoZW1lIiwyKTt2YXIgb2M9Y2xhc3MgZXtjb25zdHJ1Y3Rvcih0LGkpe3RoaXMubG9hZGluZz1uZXcgcmMoImFnLWNoYXJ0LWxvYWRpbmctb3ZlcmxheSIsdCxpKSx0aGlzLmxvYWRpbmcudGV4dD0iTG9hZGluZyBkYXRhLi4uIix0aGlzLmxvYWRpbmcucmVuZGVyZXI9KCk9PnRoaXMucmVuZGVyTG9hZGluZ1NwaW5uZXIodCxpKSx0aGlzLm5vRGF0YT1uZXcgcmMoImFnLWNoYXJ0LW5vLWRhdGEtb3ZlcmxheSIsdCxpKSx0aGlzLm5vVmlzaWJsZVNlcmllcz1uZXcgcmMoImFnLWNoYXJ0LW5vLXZpc2libGUtc2VyaWVzIix0LGkpLHRoaXMubm9WaXNpYmxlU2VyaWVzLnRleHQ9Ik5vIHZpc2libGUgc2VyaWVzIixlLm92ZXJsYXlEb2N1bWVudHMuaW5kZXhPZih0Lm93bmVyRG9jdW1lbnQpPDAmJihwbih0Lm93bmVyRG9jdW1lbnQsIlxuLmFnLWNoYXJ0LW92ZXJsYXkge1xuICAgIGNvbG9yOiAjMTgxZDFmO1xufVxuXG4uYWctY2hhcnQtb3ZlcmxheS5hZy1jaGFydC1kYXJrLW92ZXJsYXkge1xuICAgIGNvbG9yOiAjZmZmZmZmO1xufVxuXG4uYWctY2hhcnQtb3ZlcmxheS0tbG9hZGluZyB7XG4gICAgY29sb3I6IHJnYigxNDAsIDE0MCwgMTQwKTsgLyogREVGQVVMVF9NVVRFRF9MQUJFTF9DT0xPVVIgKi9cbn1cblxuLmFnLWNoYXJ0LW92ZXJsYXlfX2xvYWRpbmctYmFja2dyb3VuZCB7XG4gICAgYmFja2dyb3VuZDogd2hpdGU7IC8qIERFRkFVTFRfQkFDS0dST1VORF9GSUxMICovXG59XG5cbi5hZy1jaGFydC1vdmVybGF5LmFnLWNoYXJ0LWRhcmstb3ZlcmxheSAuYWctY2hhcnQtb3ZlcmxheV9fbG9hZGluZy1iYWNrZ3JvdW5kIHtcbiAgICBiYWNrZ3JvdW5kOiAjMTkyMjMyOyAvKiBERUZBVUxUX0RBUktfQkFDS0dST1VORF9GSUxMICovXG59XG4iKSxlLm92ZXJsYXlEb2N1bWVudHMucHVzaCh0Lm93bmVyRG9jdW1lbnQpKX1kZXN0cm95KCl7dGhpcy5sb2FkaW5nLmhpZGUoKSx0aGlzLm5vRGF0YS5oaWRlKCksdGhpcy5ub1Zpc2libGVTZXJpZXMuaGlkZSgpfXJlbmRlckxvYWRpbmdTcGlubmVyKGUsdCl7dmFyIGk7Y29uc3Qgcz10aGlzLmNyZWF0ZUVsZW1lbnQoZSwiZGl2Iik7cy5jbGFzc05hbWU9ImFnLWNoYXJ0LW92ZXJsYXktLWxvYWRpbmciLHMuc3R5bGUuZGlzcGxheT0iZmxleCIscy5zdHlsZS5hbGlnbkl0ZW1zPSJjZW50ZXIiLHMuc3R5bGUuanVzdGlmeUNvbnRlbnQ9ImNlbnRlciIscy5zdHlsZS5mbGV4RGlyZWN0aW9uPSJjb2x1bW4iLHMuc3R5bGUuaGVpZ2h0PSIxMDAlIixzLnN0eWxlLmJveFNpemluZz0iYm9yZGVyLWJveCIscy5zdHlsZS5mb250PSIxM3B4IFZlcmRhbmEsIHNhbnMtc2VyaWYiLHMuc3R5bGUudXNlclNlbGVjdD0ibm9uZSIscy5zdHlsZS5hbmltYXRpb249YGFnLWNoYXJ0cy1sb2FkaW5nICR7QXIuYW5pbWF0aW9uRHVyYXRpb24qdC5kZWZhdWx0RHVyYXRpb259bXMgbGluZWFyIDUwbXMgYm90aGA7Y29uc3Qgcj10aGlzLmNyZWF0ZUVsZW1lbnQocywic3BhbiIpO3Iuc3R5bGUud2lkdGg9IjQ1cHgiLHIuc3R5bGUuaGVpZ2h0PSI0MHB4IixyLnN0eWxlLmJhY2tncm91bmRJbWFnZT0iIitbImxpbmVhci1ncmFkaWVudCgjMDAwMCBjYWxjKDEgKiAxMDAlIC8gNiksICNjY2MgMCBjYWxjKDMgKiAxMDAlIC8gNiksICMwMDAwIDApLCAiLCJsaW5lYXItZ3JhZGllbnQoIzAwMDAgY2FsYygyICogMTAwJSAvIDYpLCAjY2NjIDAgY2FsYyg0ICogMTAwJSAvIDYpLCAjMDAwMCAwKSwgIiwibGluZWFyLWdyYWRpZW50KCMwMDAwIGNhbGMoMyAqIDEwMCUgLyA2KSwgI2NjYyAwIGNhbGMoNSAqIDEwMCUgLyA2KSwgIzAwMDAgMCkiXS5qb2luKCIiKSxyLnN0eWxlLmJhY2tncm91bmRTaXplPSIxMHB4IDQwMCUiLHIuc3R5bGUuYmFja2dyb3VuZFJlcGVhdD0ibm8tcmVwZWF0IixyLnN0eWxlLmFuaW1hdGlvbj0iYWctY2hhcnRzLWxvYWRpbmctbWF0cml4IDFzIGluZmluaXRlIGxpbmVhciI7Y29uc3Qgbz10aGlzLmNyZWF0ZUVsZW1lbnQocywicCIpO28uc3R5bGUubWFyZ2luVG9wPSIxZW0iLG8uaW5uZXJUZXh0PW51bGwhPShpPXRoaXMubG9hZGluZy50ZXh0KT9pOiJMb2FkaW5nIGRhdGEuLi4iO2NvbnN0IG49dGhpcy5jcmVhdGVFbGVtZW50KGUsImRpdiIpO24uY2xhc3NOYW1lPSJhZy1jaGFydC1vdmVybGF5X19sb2FkaW5nLWJhY2tncm91bmQiLG4uc3R5bGUucG9zaXRpb249ImFic29sdXRlIixuLnN0eWxlLnRvcD0iMCIsbi5zdHlsZS5yaWdodD0iMCIsbi5zdHlsZS5ib3R0b209IjAiLG4uc3R5bGUubGVmdD0iMCIsbi5zdHlsZS5vcGFjaXR5PSIwLjUiLG4uc3R5bGUuekluZGV4PSItMSI7Y29uc3QgYT10aGlzLmNyZWF0ZUVsZW1lbnQocywic3R5bGUiKTtyZXR1cm4gYS5pbm5lclRleHQ9WyJAa2V5ZnJhbWVzIGFnLWNoYXJ0cy1sb2FkaW5nIHsgZnJvbSB7IG9wYWNpdHk6IDAgfSB0byB7IG9wYWNpdHk6IDEgfSB9IiwiQGtleWZyYW1lcyBhZy1jaGFydHMtbG9hZGluZy1tYXRyaXggeyIsIjAlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCUgMCUsIDUwJSAwJSwgMTAwJSAwJTsgfSIsIjEwMCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwJSAxMDAlLCA1MCUgMTAwJSwgMTAwJSAxMDAlOyB9IiwifSJdLmpvaW4oIiAiKSxzLnJlcGxhY2VDaGlsZHJlbihhLHIsbyxuKSxzLm91dGVySFRNTH1jcmVhdGVFbGVtZW50KGUsdCxpKXtyZXR1cm4gZS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCxpKX19O29jLm92ZXJsYXlEb2N1bWVudHM9W107dmFyIG5jPW9jO2Z1bmN0aW9uIGFjKGUsdD1bMCwwXSl7Zm9yKGNvbnN0IGkgb2YgZSkibnVtYmVyIj09dHlwZW9mIGkmJihpPDAmJih0WzBdKz1pKSxpPjAmJih0WzFdKz1pKSk7cmV0dXJuIHR9ZnVuY3Rpb24gbGMoZSx0LGkpe3JldHVybntpZDp0LHNjb3BlczpbZS5pZF0sbWF0Y2hHcm91cElkczpbaV0sdHlwZToiYWdncmVnYXRlIixhZ2dyZWdhdGVGdW5jdGlvbjplPT5hYyhlKX19ZnVuY3Rpb24gZGMoZSx0LGkpe3JldHVybntpZDp0LHNjb3BlczpbZS5pZF0sdHlwZToiYWdncmVnYXRlIixtYXRjaEdyb3VwSWRzOmk/W2ldOnZvaWQgMCxhZ2dyZWdhdGVGdW5jdGlvbjplPT5hYyhlKSxncm91cEFnZ3JlZ2F0ZUZ1bmN0aW9uOihlLHQ9WzAsMF0pPT57dmFyIGkscztyZXR1cm4gdFswXSs9bnVsbCE9KGk9bnVsbD09ZT92b2lkIDA6ZVswXSk/aTowLHRbMV0rPW51bGwhPShzPW51bGw9PWU/dm9pZCAwOmVbMV0pP3M6MCx0fX19ZnVuY3Rpb24gY2MoZSx0LGkpe3JldHVybntpZDp0LHNjb3BlczpbZS5pZF0sbWF0Y2hHcm91cElkczpbaV0sdHlwZToiYWdncmVnYXRlIixhZ2dyZWdhdGVGdW5jdGlvbjplPT5ObChlKX19ZnVuY3Rpb24gaGMoZSx0KXtyZXR1cm57aWQ6dCxzY29wZXM6W2UuaWRdLHR5cGU6ImFnZ3JlZ2F0ZSIsYWdncmVnYXRlRnVuY3Rpb246KCk9PlswLDFdfX1mdW5jdGlvbiB1YyhlLHQpe3JldHVybntpZDp0LHNjb3BlczpbZS5pZF0sdHlwZToiYWdncmVnYXRlIixhZ2dyZWdhdGVGdW5jdGlvbjooKT0+WzAsMV0sZ3JvdXBBZ2dyZWdhdGVGdW5jdGlvbjooZSx0PVswLDBdKT0+e3ZhciBpLHM7cmV0dXJuIHRbMF0rPW51bGwhPShpPW51bGw9PWU/dm9pZCAwOmVbMF0pP2k6MCx0WzFdKz1udWxsIT0ocz1udWxsPT1lP3ZvaWQgMDplWzFdKT9zOjAsdH19fWZ1bmN0aW9uIHBjKGUsdCxpKXtyZXR1cm57aWQ6dCxzY29wZXM6W2UuaWRdLG1hdGNoR3JvdXBJZHM6W2ldLHR5cGU6ImFnZ3JlZ2F0ZSIsYWdncmVnYXRlRnVuY3Rpb246ZT0+YWMoZSkubWFwKHQ9PnQvZS5sZW5ndGgpfX1mdW5jdGlvbiBnYyhlLHQsaSl7cmV0dXJue2lkOnQsc2NvcGVzOltlLmlkXSxtYXRjaEdyb3VwSWRzOmk/W2ldOnZvaWQgMCx0eXBlOiJhZ2dyZWdhdGUiLGFnZ3JlZ2F0ZUZ1bmN0aW9uOmU9PmFjKGUpLGdyb3VwQWdncmVnYXRlRnVuY3Rpb246KGUsdD1bMCwwLC0xXSk9Pnt2YXIgaSxzO3JldHVybiB0WzBdKz1udWxsIT0oaT1udWxsPT1lP3ZvaWQgMDplWzBdKT9pOjAsdFsxXSs9bnVsbCE9KHM9bnVsbD09ZT92b2lkIDA6ZVsxXSk/czowLHRbMl0rKyx0fSxmaW5hbEZ1bmN0aW9uOihlPVswLDAsMF0pPT57Y29uc3QgdD1lWzBdK2VbMV07cmV0dXJuIHQ+PTA/WzAsdC9lWzJdXTpbdC9lWzJdLDBdfX19ZnVuY3Rpb24gbWMoZSx0LGkscyl7Y29uc3Qgcj17aWQ6dCxzY29wZXM6W2UuaWRdLG1hdGNoR3JvdXBJZHM6cz9bc106dm9pZCAwLHR5cGU6ImFnZ3JlZ2F0ZSIsYWdncmVnYXRlRnVuY3Rpb246KGUsdD1bXSk9Pntjb25zdCBzPXRbMV0tdFswXTtyZXR1cm4gaS5hZ2dyZWdhdGVGdW5jdGlvbihlKS5tYXAoZT0+ZS9zKX19O3JldHVybiBpLmdyb3VwQWdncmVnYXRlRnVuY3Rpb24mJihyLmdyb3VwQWdncmVnYXRlRnVuY3Rpb249aS5ncm91cEFnZ3JlZ2F0ZUZ1bmN0aW9uKSxyfWZ1bmN0aW9uIGZjKGUpe3JldHVybigpPT57bGV0IHQ9MDtyZXR1cm4gaT0+amUoaSk/KHQrPWU/TWF0aC5tYXgoMCxpKTppLHQpOml9fWZ1bmN0aW9uIHZjKCl7cmV0dXJuKCk9PntsZXQgZT0wO3JldHVybiB0PT57aWYoIWplKHQpKXJldHVybiB0O2NvbnN0IGk9ZTtyZXR1cm4gZSs9dCxpfX19dmFyIENjPW5ldyBNYXA7ZnVuY3Rpb24geWMoZSx0KXt2YXIgaSxzLHI7Y29uc3Qgbz1KU09OLnN0cmluZ2lmeShlLG51bGwsMCk7cmV0dXJuIENjLmhhcyh0KXx8Q2Muc2V0KHQsbmV3IE1hcCksKG51bGw9PShpPUNjLmdldCh0KSk/dm9pZCAwOmkuaGFzKG8pKXx8bnVsbD09KHM9Q2MuZ2V0KHQpKXx8cy5zZXQobyx0KGUpKSxudWxsPT0ocj1DYy5nZXQodCkpP3ZvaWQgMDpyLmdldChvKX12YXIgU2M9e3R5cGU6InJlZHVjZXIiLHByb3BlcnR5OiJzbWFsbGVzdEtleUludGVydmFsIixpbml0aWFsVmFsdWU6MS8wLHJlZHVjZXI6KCk9PntsZXQgZT1OYU47cmV0dXJuKHQ9MS8wLGkpPT57Y29uc3Qgcz1pLmtleXNbMF0scj1NYXRoLmFicyhzLWUpO3JldHVybiBlPXMsIWlzTmFOKHIpJiZyPjAmJnI8dD9yOnR9fX0sd2M9e3R5cGU6InByb2Nlc3NvciIscHJvcGVydHk6ImFnZ1ZhbHVlc0V4dGVudCIsY2FsY3VsYXRlOmU9Pnt2YXIgdCxpLHMscjtjb25zdCBvPVsuLi5udWxsIT0oaT1udWxsPT0odD1lLmRvbWFpbi5hZ2dWYWx1ZXMpP3ZvaWQgMDp0WzBdKT9pOlswLDBdXTtmb3IoY29uc3RbdCxpXW9mIG51bGwhPShyPW51bGw9PShzPWUuZG9tYWluLmFnZ1ZhbHVlcyk/dm9pZCAwOnMuc2xpY2UoMSkpP3I6W10pdDxvWzBdJiYob1swXT10KSxpPm9bMV0mJihvWzFdPWkpO3JldHVybiBvfX0sYmM9e3R5cGU6InByb2Nlc3NvciIscHJvcGVydHk6InNvcnRlZEdyb3VwRG9tYWluIixjYWxjdWxhdGU6KHtkb21haW46e2dyb3VwczplfX0pPT57aWYobnVsbCE9ZSlyZXR1cm5bLi4uZV0uc29ydCgoZSx0KT0+e2ZvcihsZXQgaT0wO2k8ZS5sZW5ndGg7aSsrKXtjb25zdCBzPWVbaV0tdFtpXTtpZigwIT09cylyZXR1cm4gc31yZXR1cm4gMH0pfX07ZnVuY3Rpb24gRWMoe25vcm1hbGlzZVRvOmUsbW9kZTp0fSl7Y29uc3QgaT0odCxpKT0+e2NvbnN0IHM9dCplL2k7cmV0dXJuIHM+PTA/TWF0aC5taW4oZSxzKTpNYXRoLm1heCgtZSxzKX07cmV0dXJuKCk9PigpPT4oZSxzKT0+e2NvbnN0IHI9WzAsMF07Zm9yKGNvbnN0IGkgb2Ygcyl7Y29uc3Qgcz1lW2ldLG89czwwPzA6MTsic3VtIj09PXQ/cltvXSs9czpyW29dPTA9PT1vP01hdGgubWluKHJbb10scyk6TWF0aC5tYXgocltvXSxzKX1jb25zdCBvPU1hdGgubWF4KE1hdGguYWJzKHJbMF0pLHJbMV0pO2Zvcihjb25zdCB0IG9mIHMpZVt0XT1pKGVbdF0sbyl9fWZ1bmN0aW9uIFJjKGUsdCxpLHM9InN1bSIpe3JldHVybntzY29wZXM6W2UuaWRdLHR5cGU6Imdyb3VwLXZhbHVlLXByb2Nlc3NvciIsbWF0Y2hHcm91cElkczp0LGFkanVzdDp5Yyh7bm9ybWFsaXNlVG86aSxtb2RlOnN9LEVjKX19ZnVuY3Rpb24geGMoe25vcm1hbGlzZVRvOmUsemVyb0RvbWFpbjp0LHJhbmdlTWluOmkscmFuZ2VNYXg6c30pe2NvbnN0IHI9ZVsxXS1lWzBdLG89KGkscyxvKT0+e2NvbnN0IG49ZVswXSsoaS1zKS9vKnI7cmV0dXJuIDA9PT1vP3Q6bj49ZVsxXT9lWzFdOm48ZVswXT9lWzBdOm59O3JldHVybigpPT4odCxyKT0+e2xldFtuLGFdPXQuZG9tYWluLnZhbHVlc1tyXTtudWxsIT1pJiYobj1pKSxudWxsIT1zJiYoYT1zKTtjb25zdCBsPWEtbjt0LmRvbWFpbi52YWx1ZXNbcl09W2VbMF0sZVsxXV07Zm9yKGNvbnN0IGUgb2YgdC5kYXRhKXtsZXQgaT1lLnZhbHVlczsidW5ncm91cGVkIj09PXQudHlwZSYmKGk9W2ldKTtmb3IoY29uc3QgZSBvZiBpKWVbcl09byhlW3JdLG4sbCl9fX1mdW5jdGlvbiBUYyhlLHQsaSxzLHIsbyl7cmV0dXJue3Njb3BlczpbZS5pZF0sdHlwZToicHJvcGVydHktdmFsdWUtcHJvY2Vzc29yIixwcm9wZXJ0eTp0LGFkanVzdDp5Yyh7bm9ybWFsaXNlVG86aSxyYW5nZU1pbjpyLHJhbmdlTWF4Om8semVyb0RvbWFpbjpzfSx4Yyl9fWZ1bmN0aW9uIERjKGUsdD1bXSl7cmV0dXJue3R5cGU6InByb2Nlc3NvciIsc2NvcGVzOltlLmlkXSxwcm9wZXJ0eToiYW5pbWF0aW9uVmFsaWRhdGlvbiIsY2FsY3VsYXRlKGkpe3ZhciBzO2NvbnN0e2tleXM6cix2YWx1ZXM6b309aS5kZWZzLHtpbnB1dDpuLGRhdGE6YX09aTtsZXQgbD0hMCxkPSEwO2NvbnN0IGM9W107Zm9yKGxldCBpPTA7aTxvLmxlbmd0aDtpKyspKG51bGw9PShzPW9baV0uc2NvcGVzKT92b2lkIDA6cy5zb21lKHQ9PnQ9PT1lLmlkKSkmJnQuc29tZShlPT5vW2ldLmlkPT09ZSkmJmMucHVzaChbaSxvW2ldXSk7Y29uc3QgaD0oZSx0LHMpPT57dmFyIHI7aWYoImNhdGVnb3J5Ij09PXQudmFsdWVUeXBlKXtjb25zdCB0PWkuZG9tYWluW3NdW2VdO3JldHVybiB2b2lkKGwmJihsPXQubGVuZ3RoPT09bi5jb3VudCkpfWxldCBvPW51bGw9PShyPWFbMF0pP3ZvaWQgMDpyW3NdW2VdO2ZvcihsZXQgdD0xOyhsfHxkKSYmdDxhLmxlbmd0aDt0Kyspe2NvbnN0IGk9YVt0XVtzXVtlXTtkJiYoZD1vPD1pKSxsJiYobD1vIT09aSksbz1pfX07Zm9yKGxldCBlPTA7KGx8fGQpJiZlPHIubGVuZ3RoO2UrKyloKGUscltlXSwia2V5cyIpO2ZvcihsZXQgZT0wOyhsfHxkKSYmZTxjLmxlbmd0aDtlKyspe2NvbnN0W3QsaV09Y1tlXTtoKHQsaSwidmFsdWVzIil9cmV0dXJue3VuaXF1ZUtleXM6bCxvcmRlcmVkS2V5czpkfX19fWZ1bmN0aW9uIE9jKHttb2RlOmUsc2VwYXJhdGVOZWdhdGl2ZTp0fSl7cmV0dXJuKCk9PigpPT4oaSxzKT0+e2NvbnN0IHI9WzAsMF07Zm9yKGNvbnN0IG8gb2Ygcyl7Y29uc3Qgcz1pW29dLG49WnMocykmJnQ/MDoxO2plKHMpJiYoIm5vcm1hbCI9PT1lJiYocltuXSs9cyksaVtvXT1yW25dLCJ0cmFpbGluZyI9PT1lJiYocltuXSs9cykpfX19ZnVuY3Rpb24gQWMoe21vZGU6ZSxzdW06dH0pe3JldHVybigpPT57Y29uc3QgaT1bXTtsZXQgcz0hMDtyZXR1cm4oKT0+KHIsbyk9PntsZXQgbj0wO2Zvcihjb25zdCBhIG9mIG8pe2NvbnN0IG89clthXSxsPXMmJiJjdXJyZW50Ij09PXQ/MDppW2FdO2lbYV09bztjb25zdCBkPSJjdXJyZW50Ij09PXQ/bzpsO2plKG8pJiZqZShsKT8oIm5vcm1hbCI9PT1lJiYobis9ZCksclthXT1uLCJ0cmFpbGluZyI9PT1lJiYobis9ZCkpOnJbYV09bn1zPSExfX19ZnVuY3Rpb24gUGMoZSx0LGkscyxyPSExKXtsZXQgbztpZihpLnN0YXJ0c1dpdGgoIndpbmRvdyIpKXtvPXljKHttb2RlOmkuZW5kc1dpdGgoIi10cmFpbGluZyIpPyJ0cmFpbGluZyI6Im5vcm1hbCIsc3VtOnN9LEFjKX1lbHNlIG89eWMoe21vZGU6aSxzZXBhcmF0ZU5lZ2F0aXZlOnJ9LE9jKTtyZXR1cm57c2NvcGVzOltlLmlkXSx0eXBlOiJncm91cC12YWx1ZS1wcm9jZXNzb3IiLG1hdGNoR3JvdXBJZHM6W3RdLGFkanVzdDpvfX1mdW5jdGlvbiBNYyhlLHQ9ITApe3JldHVybnt0eXBlOiJwcm9jZXNzb3IiLHByb3BlcnR5OiJkaWZmIixjYWxjdWxhdGU6aT0+e2NvbnN0IHM9e2NoYW5nZWQ6ITEsbW92ZWQ6W10sYWRkZWQ6W10sdXBkYXRlZDpbXSxyZW1vdmVkOltdLGFkZGVkSW5kaWNlczpbXSx1cGRhdGVkSW5kaWNlczpbXSxyZW1vdmVkSW5kaWNlczpbXX0scj1uZXcgTWFwLG89bmV3IE1hcCxuPW5ldyBNYXAsYT1uZXcgTWFwLGw9bmV3IE1hcCxkPW5ldyBNYXAsYz1uZXcgTWFwO2ZvcihsZXQgcz0wO3M8TWF0aC5tYXgoZS5kYXRhLmxlbmd0aCxpLmRhdGEubGVuZ3RoKTtzKyspe2NvbnN0IGg9ZS5kYXRhW3NdLHU9aS5kYXRhW3NdLHA9aD9MYyhoLmtleXMpOiIiLGc9dT9MYyh1LmtleXMpOiIiO3AhPT1nPyhhLmhhcyhnKT8oIXQmJlRzKGEuZ2V0KGcpLnZhbHVlcyx1LnZhbHVlcyl8fChuLnNldChnLHUpLGQuc2V0KGcscyksci5zZXQoZyx1KSksYS5kZWxldGUoZyksYy5kZWxldGUoZykpOnUmJihvLnNldChnLHUpLGwuc2V0KGcscykpLG8uaGFzKHApPyghdCYmVHMoby5nZXQocCkudmFsdWVzLGgudmFsdWVzKXx8KG4uc2V0KHAsaCksZC5zZXQocCxzKSxyLnNldChwLGgpKSxvLmRlbGV0ZShwKSxsLmRlbGV0ZShwKSk6aCYmKG4uZGVsZXRlKHApLGQuZGVsZXRlKHApLGEuc2V0KHAsaCksYy5zZXQocCxzKSkpOlRzKGgudmFsdWVzLHUudmFsdWVzKXx8KG4uc2V0KGcsdSksZC5zZXQoZyxzKSl9cmV0dXJuIHMuYWRkZWQ9QXJyYXkuZnJvbShvLmtleXMoKSkscy51cGRhdGVkPUFycmF5LmZyb20obi5rZXlzKCkpLHMucmVtb3ZlZD1BcnJheS5mcm9tKGEua2V5cygpKSxzLm1vdmVkPUFycmF5LmZyb20oci5rZXlzKCkpLHMuYWRkZWRJbmRpY2VzPUFycmF5LmZyb20obC52YWx1ZXMoKSkscy51cGRhdGVkSW5kaWNlcz1BcnJheS5mcm9tKGQudmFsdWVzKCkpLHMucmVtb3ZlZEluZGljZXM9QXJyYXkuZnJvbShjLnZhbHVlcygpKSxzLmNoYW5nZWQ9cy5hZGRlZC5sZW5ndGg+MHx8cy51cGRhdGVkLmxlbmd0aD4wfHxzLnJlbW92ZWQubGVuZ3RoPjAsc319fWZ1bmN0aW9uIExjKGUpe3JldHVybiBMZShlKT9lLm1hcChlPT5fbihlKSkuam9pbigiX19fIik6X24oZSl9dmFyIEZjPShlPT4oZVtlLkVYQUNUX1NIQVBFX01BVENIPTBdPSJFWEFDVF9TSEFQRV9NQVRDSCIsZVtlLk5FQVJFU1RfQllfTUFJTl9BWElTX0ZJUlNUPTFdPSJORUFSRVNUX0JZX01BSU5fQVhJU19GSVJTVCIsZVtlLk5FQVJFU1RfQllfTUFJTl9DQVRFR09SWV9BWElTX0ZJUlNUPTJdPSJORUFSRVNUX0JZX01BSU5fQ0FURUdPUllfQVhJU19GSVJTVCIsZVtlLk5FQVJFU1RfTk9ERT0zXT0iTkVBUkVTVF9OT0RFIixlKSkoRmN8fHt9KTtmdW5jdGlvbiBJYyhlKXtyZXR1cm4gbnVsbCE9a24oZSwhMCl9ZnVuY3Rpb24gTmMoZSl7cmV0dXJuIG51bGwhPWtuKGUsITEpfWZ1bmN0aW9uIEdjKGUsdCxpLHM9e30pe3JldHVybiBtKHtzY29wZXM6W2UuaWRdLHByb3BlcnR5OnQsdHlwZToia2V5Iix2YWx1ZVR5cGU6aT8icmFuZ2UiOiJjYXRlZ29yeSIsdmFsaWRhdGlvbjppP0ljOk5jfSxzKX1mdW5jdGlvbiBrYyhlLHQsaSxzPXt9KXtyZXR1cm4gbSh7c2NvcGVzOltlLmlkXSxwcm9wZXJ0eTp0LHR5cGU6InZhbHVlIix2YWx1ZVR5cGU6aT8icmFuZ2UiOiJjYXRlZ29yeSIsdmFsaWRhdGlvbjppP0ljOk5jfSxzKX1mdW5jdGlvbiBfYyhlLHQsaT17fSl7Y29uc3Qgcz1pLHttaW46cj0tMS8wLG1heDpvPTEvMH09cyxuPXYocyxbIm1pbiIsIm1heCJdKTtyZXR1cm4gbSh7c2NvcGVzOltlLmlkXSx0eXBlOiJ2YWx1ZSIscHJvcGVydHk6dCx2YWx1ZVR5cGU6InJhbmdlIix2YWxpZGF0aW9uOkljLHByb2Nlc3NvcjooKT0+ZT0+amUoZSk/S3MocixlLG8pOmV9LG4pfWZ1bmN0aW9uIFZjKGUsdCxpLHM9e30pe3JldHVybiBmKG0oe30sa2MoZSx0LGkscykpLHtwcm9jZXNzb3I6KCk9PntsZXQgZT0wO3JldHVybiB0PT57Y29uc3QgaT1lO3JldHVybiBlPXQsaX19fSl9ZnVuY3Rpb24gQmMoKXtyZXR1cm4oKT0+e2xldCBlPTA7cmV0dXJuIHQ9Pntjb25zdCBpPWU7cmV0dXJuIGU9dCxpfX19ZnVuY3Rpb24gSGMoZSx0LGkscz17fSl7Y29uc3Qgcj1zLHtvbmx5UG9zaXRpdmU6b309cixuPXYocixbIm9ubHlQb3NpdGl2ZSJdKTtyZXR1cm4gZihtKHt9LGtjKGUsdCxpLG4pKSx7cHJvY2Vzc29yOmZjKG8pfSl9ZnVuY3Rpb24gV2MoZSx0LGkscz17fSl7cmV0dXJuIGYobSh7fSxrYyhlLHQsaSxzKSkse3Byb2Nlc3Nvcjp2YygpfSl9ZnVuY3Rpb24gamMoZSx0LGkscyxyPSJjdXJyZW50IixvKXtyZXR1cm5ba2MoZSx0LGksbyksUGMoZSxvLmdyb3VwSWQscyxyLG8uc2VwYXJhdGVOZWdhdGl2ZSksLi4ubnVsbCE9by5yYW5nZUlkP1tjYyhlLG8ucmFuZ2VJZCxvLmdyb3VwSWQpXTpbXV19dmFyIFVjPWNsYXNze2NvbnN0cnVjdG9yKGUsdCx7ZGF0dW06aX0scyl7dGhpcy50eXBlPWUsdGhpcy5ldmVudD10LHRoaXMuZGF0dW09aSx0aGlzLnNlcmllc0lkPXMuaWR9fSx6Yz1jbGFzc3tjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5zZXJpZXM9ZSx0aGlzLnNlcmllc0dyb3VwaW5nPXQsdGhpcy5vbGRHcm91cGluZz1pLHRoaXMudHlwZT0iZ3JvdXBpbmdDaGFuZ2VkIn19LEtjPWNsYXNzIGV4dGVuZHMgRGx7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmRlc3Ryb3lGbnM9W10sdGhpcy5zZXJpZXNHcm91cGluZz12b2lkIDAsdGhpcy5Ob2RlQ2xpY2tFdmVudD1VYyx0aGlzLmludGVybmFsSWQ9V3ModGhpcyksdGhpcy5yb290R3JvdXA9bmV3IE9uKHtuYW1lOiJzZXJpZXNSb290Iixpc1ZpcnR1YWw6ITB9KSx0aGlzLmF4ZXM9e3g6dm9pZCAwLHk6dm9pZCAwfSx0aGlzLmRpcmVjdGlvbnM9WyJ4IiwieSJdLHRoaXMubm9kZURhdGFSZWZyZXNoPSEwLHRoaXMubW9kdWxlTWFwPW5ldyBzYSx0aGlzLl9kZWNsYXJhdGlvbk9yZGVyPS0xLHRoaXMuc2VyaWVzTGlzdGVuZXJzPW5ldyBqbDtjb25zdHttb2R1bGVDdHg6dCx1c2VMYWJlbExheWVyOmk9ITEscGlja01vZGVzOnM9WzFdLGRpcmVjdGlvbktleXM6cj17fSxkaXJlY3Rpb25OYW1lczpvPXt9LGNvbnRlbnRHcm91cFZpcnR1YWw6bj0hMCxjYW5IYXZlQXhlczphPSExfT1lO3RoaXMuY3R4PXQsdGhpcy5kaXJlY3Rpb25LZXlzPXIsdGhpcy5kaXJlY3Rpb25OYW1lcz1vLHRoaXMuY2FuSGF2ZUF4ZXM9YSx0aGlzLmNvbnRlbnRHcm91cD10aGlzLnJvb3RHcm91cC5hcHBlbmRDaGlsZChuZXcgT24oe25hbWU6dGhpcy5pbnRlcm5hbElkKyItY29udGVudCIsbGF5ZXI6IW4saXNWaXJ0dWFsOm4sekluZGV4OjQsekluZGV4U3ViT3JkZXI6dGhpcy5nZXRHcm91cFpJbmRleFN1Yk9yZGVyKCJkYXRhIil9KSksdGhpcy5oaWdobGlnaHRHcm91cD1uZXcgT24oe25hbWU6dGhpcy5pbnRlcm5hbElkKyItaGlnaGxpZ2h0IixsYXllcjohbixpc1ZpcnR1YWw6bix6SW5kZXg6NCx6SW5kZXhTdWJPcmRlcjp0aGlzLmdldEdyb3VwWkluZGV4U3ViT3JkZXIoImhpZ2hsaWdodCIpfSksdGhpcy5oaWdobGlnaHROb2RlPXRoaXMuaGlnaGxpZ2h0R3JvdXAuYXBwZW5kQ2hpbGQobmV3IE9uKHtuYW1lOiJoaWdobGlnaHROb2RlIix6SW5kZXg6MH0pKSx0aGlzLmhpZ2hsaWdodExhYmVsPXRoaXMuaGlnaGxpZ2h0R3JvdXAuYXBwZW5kQ2hpbGQobmV3IE9uKHtuYW1lOiJoaWdobGlnaHRMYWJlbCIsekluZGV4OjEwfSkpLHRoaXMucGlja01vZGVzPXMsdGhpcy5sYWJlbEdyb3VwPXRoaXMucm9vdEdyb3VwLmFwcGVuZENoaWxkKG5ldyBPbih7bmFtZTp0aGlzLmludGVybmFsSWQrIi1zZXJpZXMtbGFiZWxzIixsYXllcjppLHpJbmRleDo3fSkpLHRoaXMuYW5ub3RhdGlvbkdyb3VwPW5ldyBPbih7bmFtZTp0aGlzLmlkKyItYW5ub3RhdGlvbiIsbGF5ZXI6IW4saXNWaXJ0dWFsOm4sekluZGV4OjQsekluZGV4U3ViT3JkZXI6dGhpcy5nZXRHcm91cFpJbmRleFN1Yk9yZGVyKCJhbm5vdGF0aW9uIil9KX1nZXQgaWQoKXt2YXIgZSx0O3JldHVybiBudWxsIT0odD1udWxsPT0oZT10aGlzLnByb3BlcnRpZXMpP3ZvaWQgMDplLmlkKT90OnRoaXMuaW50ZXJuYWxJZH1nZXQgdHlwZSgpe3ZhciBlO3JldHVybiBudWxsIT0oZT10aGlzLmNvbnN0cnVjdG9yLnR5cGUpP2U6IiJ9c2V0IGRhdGEoZSl7dGhpcy5fZGF0YT1lLHRoaXMub25EYXRhQ2hhbmdlKCl9Z2V0IGRhdGEoKXt2YXIgZTtyZXR1cm4gbnVsbCE9KGU9dGhpcy5fZGF0YSk/ZTp0aGlzLl9jaGFydERhdGF9c2V0IHZpc2libGUoZSl7dGhpcy5wcm9wZXJ0aWVzLnZpc2libGU9ZSx0aGlzLnZpc2libGVDaGFuZ2VkKCl9Z2V0IHZpc2libGUoKXtyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLnZpc2libGV9b25EYXRhQ2hhbmdlKCl7dGhpcy5ub2RlRGF0YVJlZnJlc2g9ITB9c2V0Q2hhcnREYXRhKGUpe3RoaXMuX2NoYXJ0RGF0YT1lLHRoaXMuZGF0YT09PWUmJnRoaXMub25EYXRhQ2hhbmdlKCl9b25TZXJpZXNHcm91cGluZ0NoYW5nZShlLHQpe2NvbnN0e2ludGVybmFsSWQ6aSx0eXBlOnMsdmlzaWJsZTpyfT10aGlzO2UmJnRoaXMuY3R4LnNlcmllc1N0YXRlTWFuYWdlci5kZXJlZ2lzdGVyU2VyaWVzKHtpZDppLHR5cGU6c30pLHQmJnRoaXMuY3R4LnNlcmllc1N0YXRlTWFuYWdlci5yZWdpc3RlclNlcmllcyh7aWQ6aSx0eXBlOnMsdmlzaWJsZTpyLHNlcmllc0dyb3VwaW5nOnR9KSx0aGlzLmZpcmVFdmVudChuZXcgemModGhpcyx0LGUpKX1nZXRCYW5kU2NhbGVQYWRkaW5nKCl7cmV0dXJue2lubmVyOjEsb3V0ZXI6MH19Z2V0R3JvdXBaSW5kZXhTdWJPcmRlcihlLHQ9MCl7bGV0IGk9MDtzd2l0Y2goZSl7Y2FzZSJkYXRhIjpjYXNlInBhdGhzIjpicmVhaztjYXNlImxhYmVscyI6aSs9MmU0O2JyZWFrO2Nhc2UibWFya2VyIjppKz0xZTQ7YnJlYWs7Y2FzZSJoaWdobGlnaHQiOnQrPTE1ZTM7YnJlYWs7Y2FzZSJhbm5vdGF0aW9uIjppKz0xNWUzfXJldHVyblsoKT0+dGhpcy5fZGVjbGFyYXRpb25PcmRlcitpLHRdfWFkZExpc3RlbmVyKGUsdCl7cmV0dXJuIHRoaXMuc2VyaWVzTGlzdGVuZXJzLmFkZExpc3RlbmVyKGUsdCl9ZGlzcGF0Y2goZSx0KXt0aGlzLnNlcmllc0xpc3RlbmVycy5kaXNwYXRjaChlLHQpfWFkZENoYXJ0RXZlbnRMaXN0ZW5lcnMoKXt9ZGVzdHJveSgpe3RoaXMuZGVzdHJveUZucy5mb3JFYWNoKGU9PmUoKSksdGhpcy5kZXN0cm95Rm5zPVtdLHRoaXMuY3R4LnNlcmllc1N0YXRlTWFuYWdlci5kZXJlZ2lzdGVyU2VyaWVzKHRoaXMpfWdldERpcmVjdGlvblZhbHVlcyhlLHQpe2NvbnN0IGk9dGhpcy5yZXNvbHZlS2V5RGlyZWN0aW9uKGUpLHM9bnVsbD09dD92b2lkIDA6dFtpXSxyPVtdO2lmKCFzKXJldHVybiByO2NvbnN0IG89KC4uLmUpPT57Zm9yKGNvbnN0IHQgb2YgZSlBcnJheS5pc0FycmF5KHQpP28oLi4udCk6Im9iamVjdCI9PXR5cGVvZiB0P28oLi4uT2JqZWN0LnZhbHVlcyh0KSk6ci5wdXNoKHQpfTtyZXR1cm4gbyguLi5zLm1hcChlPT50aGlzLnByb3BlcnRpZXNbZV0pKSxyfWdldEtleXMoZSl7cmV0dXJuIHRoaXMuZ2V0RGlyZWN0aW9uVmFsdWVzKGUsdGhpcy5kaXJlY3Rpb25LZXlzKX1nZXROYW1lcyhlKXtyZXR1cm4gdGhpcy5nZXREaXJlY3Rpb25WYWx1ZXMoZSx0aGlzLmRpcmVjdGlvbk5hbWVzKX1yZXNvbHZlS2V5RGlyZWN0aW9uKGUpe3JldHVybiBlfWdldERvbWFpbihlKXtjb25zdCB0PXRoaXMuZ2V0U2VyaWVzRG9tYWluKGUpLGk9dGhpcy5tb2R1bGVNYXAubWFwVmFsdWVzKHQ9PnQuZ2V0RG9tYWluKGUpKTtyZXR1cm4gdC5jb25jYXQoaS5mbGF0KCkpfW1hcmtOb2RlRGF0YURpcnR5KCl7dGhpcy5ub2RlRGF0YVJlZnJlc2g9ITB9dmlzaWJsZUNoYW5nZWQoKXt0aGlzLmN0eC5zZXJpZXNTdGF0ZU1hbmFnZXIucmVnaXN0ZXJTZXJpZXModGhpcyl9Z2V0T3BhY2l0eSgpe2NvbnN0e2RpbU9wYWNpdHk6ZT0xLGVuYWJsZWQ6dD0hMH09dGhpcy5wcm9wZXJ0aWVzLmhpZ2hsaWdodFN0eWxlLnNlcmllcztpZighdHx8MT09PWUpcmV0dXJuIDE7c3dpdGNoKHRoaXMuaXNJdGVtSWRIaWdobGlnaHRlZCgpKXtjYXNlIDA6Y2FzZSAxOnJldHVybiAxO2Nhc2UgMjpkZWZhdWx0OnJldHVybiBlfX1nZXRTdHJva2VXaWR0aChlKXtjb25zdHtzdHJva2VXaWR0aDp0LGVuYWJsZWQ6aT0hMH09dGhpcy5wcm9wZXJ0aWVzLmhpZ2hsaWdodFN0eWxlLnNlcmllcztpZighaXx8dm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2godGhpcy5pc0l0ZW1JZEhpZ2hsaWdodGVkKCkpe2Nhc2UgMTpyZXR1cm4gdDtjYXNlIDA6Y2FzZSAyOnJldHVybiBlfX1pc0l0ZW1JZEhpZ2hsaWdodGVkKCl7dmFyIGUsdDtjb25zdHtzZXJpZXM6aX09bnVsbCE9KHQ9bnVsbD09KGU9dGhpcy5jdHguaGlnaGxpZ2h0TWFuYWdlcik/dm9pZCAwOmUuZ2V0QWN0aXZlSGlnaGxpZ2h0KCkpP3Q6e307cmV0dXJuIG51bGw9PWk/MDppIT09dGhpcz8yOjF9Z2V0TW9kdWxlVG9vbHRpcFBhcmFtcygpe3JldHVybiB0aGlzLm1vZHVsZU1hcC5tYXBWYWx1ZXMoZT0+ZS5nZXRUb29sdGlwUGFyYW1zKCkpLnJlZHVjZSgoZSx0KT0+bShtKHt9LHQpLGUpLHt9KX1waWNrTm9kZShlLHQpe2NvbnN0e3BpY2tNb2RlczppLHZpc2libGU6cyxyb290R3JvdXA6cn09dGhpcztpZihzJiZyLnZpc2libGUpZm9yKGNvbnN0IHMgb2YgaSl7aWYodCYmIXQuaW5jbHVkZXMocykpY29udGludWU7bGV0IGk7c3dpdGNoKHMpe2Nhc2UgMDppPXRoaXMucGlja05vZGVFeGFjdFNoYXBlKGUpO2JyZWFrO2Nhc2UgMTpjYXNlIDI6aT10aGlzLnBpY2tOb2RlTWFpbkF4aXNGaXJzdChlLDI9PT1zKTticmVhaztjYXNlIDM6aT10aGlzLnBpY2tOb2RlQ2xvc2VzdERhdHVtKGUpfWlmKGkpcmV0dXJue3BpY2tNb2RlOnMsbWF0Y2g6aS5kYXR1bSxkaXN0YW5jZTppLmRpc3RhbmNlfX19cGlja05vZGVFeGFjdFNoYXBlKGUpe2NvbnN0IHQ9dGhpcy5jb250ZW50R3JvdXAucGlja05vZGUoZS54LGUueSk7cmV0dXJuIHQmJntkYXR1bTp0LmRhdHVtLGRpc3RhbmNlOjB9fXBpY2tOb2RlQ2xvc2VzdERhdHVtKGUpe3Rocm93IG5ldyBFcnJvcigiQUcgQ2hhcnRzIC0gU2VyaWVzLnBpY2tOb2RlQ2xvc2VzdERhdHVtKCkgbm90IGltcGxlbWVudGVkIil9cGlja05vZGVNYWluQXhpc0ZpcnN0KGUsdCl7dGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSBTZXJpZXMucGlja05vZGVNYWluQXhpc0ZpcnN0KCkgbm90IGltcGxlbWVudGVkIil9ZmlyZU5vZGVDbGlja0V2ZW50KGUsdCl7dGhpcy5maXJlRXZlbnQobmV3IHRoaXMuTm9kZUNsaWNrRXZlbnQoIm5vZGVDbGljayIsZSx0LHRoaXMpKX1maXJlTm9kZURvdWJsZUNsaWNrRXZlbnQoZSx0KXt0aGlzLmZpcmVFdmVudChuZXcgdGhpcy5Ob2RlQ2xpY2tFdmVudCgibm9kZURvdWJsZUNsaWNrIixlLHQsdGhpcykpfXRvZ2dsZVNlcmllc0l0ZW0oZSx0KXt0aGlzLnZpc2libGU9dCx0aGlzLm5vZGVEYXRhUmVmcmVzaD0hMCx0aGlzLmRpc3BhdGNoKCJ2aXNpYmlsaXR5LWNoYW5nZWQiLHtpdGVtSWQ6ZSxlbmFibGVkOnR9KX1pc0VuYWJsZWQoKXtyZXR1cm4gdGhpcy52aXNpYmxlfWdldE1vZHVsZU1hcCgpe3JldHVybiB0aGlzLm1vZHVsZU1hcH1jcmVhdGVNb2R1bGVDb250ZXh0KCl7cmV0dXJuIGYobSh7fSx0aGlzLmN0eCkse3Nlcmllczp0aGlzfSl9Z2V0TGFiZWxUZXh0KGUsdCxpPVN0cmluZyl7dmFyIHM7cmV0dXJuIGUuZm9ybWF0dGVyJiZudWxsIT0ocz10aGlzLmN0eC5jYWxsYmFja0NhY2hlLmNhbGwoZS5mb3JtYXR0ZXIsbSh7c2VyaWVzSWQ6dGhpcy5pZH0sdCkpKT9zOmkodC52YWx1ZSl9Z2V0TWFya2VyU3R5bGUoZSx0LGk9ZS5nZXRTdHlsZSgpKXt2YXIgcyxyO2NvbnN0IG89WGUoe3NpemU6bnVsbCE9KHI9bnVsbD09KHM9dC5kYXR1bS5wb2ludCk/dm9pZCAwOnMuc2l6ZSk/cjowfSxpKTtpZihlLmZvcm1hdHRlcil7cmV0dXJuIFhlKHRoaXMuY3R4LmNhbGxiYWNrQ2FjaGUuY2FsbChlLmZvcm1hdHRlcixmKG0obSh7c2VyaWVzSWQ6dGhpcy5pZH0sbyksdCkse2RhdHVtOnQuZGF0dW0uZGF0dW19KSksbyl9cmV0dXJuIG99dXBkYXRlTWFya2VyU3R5bGUoZSx0LGkscz10LmdldFN0eWxlKCkse2FwcGx5VHJhbnNsYXRpb246cj0hMH09e30pe2NvbnN0e3BvaW50Om99PWkuZGF0dW0sbj10aGlzLmdldE1hcmtlclN0eWxlKHQsaSxzKSxhPXRoaXMudmlzaWJsZSYmbi5zaXplPjAmJm8mJiFpc05hTihvLngpJiYhaXNOYU4oby55KTtyP2Uuc2V0UHJvcGVydGllcyhmKG0oe3Zpc2libGU6YX0sbikse3RyYW5zbGF0aW9uWDpudWxsPT1vP3ZvaWQgMDpvLngsdHJhbnNsYXRpb25ZOm51bGw9PW8/dm9pZCAwOm8ueX0pKTplLnNldFByb3BlcnRpZXMobSh7dmlzaWJsZTphfSxuKSksImZ1bmN0aW9uIiE9dHlwZW9mIHQuc2hhcGV8fGUuZGlydHlQYXRofHwoZS5wYXRoLmNsZWFyKHt0cmFja0NoYW5nZXM6ITB9KSxlLnVwZGF0ZVBhdGgoKSxlLmNoZWNrUGF0aERpcnR5KCkpfWdldE1pblJlY3QoKXt9Z2V0IG5vZGVEYXRhRGVwZW5kZW5jaWVzKCl7dmFyIGU7cmV0dXJuIG51bGwhPShlPXRoaXMuX25vZGVEYXRhRGVwZW5kZW5jaWVzKT9lOntzZXJpZXNSZWN0V2lkdGg6TmFOLHNlcmllc1JlY3RIZWlnaHQ6TmFOfX1jaGVja1Jlc2l6ZShlKXtjb25zdHt3aWR0aDp0LGhlaWdodDppfT1udWxsIT1lP2U6e3dpZHRoOk5hTixoZWlnaHQ6TmFOfSxzPWU/e3Nlcmllc1JlY3RXaWR0aDp0LHNlcmllc1JlY3RIZWlnaHQ6aX06dm9pZCAwLHI9bnVsbCE9eXQodGhpcy5ub2RlRGF0YURlcGVuZGVuY2llcyxzKTtyZXR1cm4gciYmKHRoaXMuX25vZGVEYXRhRGVwZW5kZW5jaWVzPXMsdGhpcy5tYXJrTm9kZURhdGFEaXJ0eSgpKSxyfX07S2MuaGlnaGxpZ2h0ZWRaSW5kZXg9MWUxMix5KFtobih7Y2hhbmdlVmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLm9uU2VyaWVzR3JvdXBpbmdDaGFuZ2UodCxlKX19KV0sS2MucHJvdG90eXBlLCJzZXJpZXNHcm91cGluZyIsMik7dmFyIFljPWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5jaGFydExpa2U9ZSx0aGlzLmxheW91dFNlcnZpY2U9dCx0aGlzLmRlc3Ryb3lGbnM9W10sdGhpcy5kZXN0cm95Rm5zLnB1c2godGhpcy5sYXlvdXRTZXJ2aWNlLmFkZExpc3RlbmVyKCJsYXlvdXQtY29tcGxldGUiLGU9PnRoaXMubGF5b3V0Q29tcGxldGUoZSkpLHRoaXMubGF5b3V0U2VydmljZS5hZGRMaXN0ZW5lcigic3RhcnQtbGF5b3V0IixlPT50aGlzLnBvc2l0aW9uUGFkZGluZyhlLnNocmlua1JlY3QpKSx0aGlzLmxheW91dFNlcnZpY2UuYWRkTGlzdGVuZXIoInN0YXJ0LWxheW91dCIsZT0+dGhpcy5wb3NpdGlvbkNhcHRpb25zKGUuc2hyaW5rUmVjdCkpKX1kZXN0cm95KCl7dGhpcy5kZXN0cm95Rm5zLmZvckVhY2goZT0+ZSgpKX1sYXlvdXRDb21wbGV0ZSh7Y2xpcFNlcmllczplLHNlcmllczp7cGFkZGVkUmVjdDp0fX0pe2NvbnN0e3Nlcmllc0FyZWE6aSxzZXJpZXNSb290OnN9PXRoaXMuY2hhcnRMaWtlO2kuY2xpcHx8ZT9zLnNldENsaXBSZWN0SW5Hcm91cENvb3JkaW5hdGVTcGFjZSh0KTpzLnNldENsaXBSZWN0SW5Hcm91cENvb3JkaW5hdGVTcGFjZSgpfXBvc2l0aW9uUGFkZGluZyhlKXtjb25zdHtwYWRkaW5nOnR9PXRoaXMuY2hhcnRMaWtlO3JldHVybiBlLnNocmluayh0LmxlZnQsImxlZnQiKSxlLnNocmluayh0LnRvcCwidG9wIiksZS5zaHJpbmsodC5yaWdodCwicmlnaHQiKSxlLnNocmluayh0LmJvdHRvbSwiYm90dG9tIikse3Nocmlua1JlY3Q6ZX19cG9zaXRpb25DYXB0aW9ucyhlKXt2YXIgdCxpLHMscjtjb25zdHt0aXRsZTpvLHN1YnRpdGxlOm4sZm9vdG5vdGU6YX09dGhpcy5jaGFydExpa2UsbD1lLmNsb25lKCksZD10PT57dmFyIGk7Y29uc3Qgcz1lLmhlaWdodC8xMCxyPW51bGwhPShpPXQubGluZUhlaWdodCk/aTp0LmZvbnRTaXplKmVuLmRlZmF1bHRMaW5lSGVpZ2h0UmF0aW8sbz1lLndpZHRoLG49TWF0aC5tYXgocixzKTt0LmNvbXB1dGVUZXh0V3JhcChvLG4pfSxjPWU9PiJsZWZ0Ij09PWU/bC54OiJyaWdodCI9PT1lP2wueCtsLndpZHRoOigiY2VudGVyIiE9PWUmJkwuZXJyb3IoImludmFsaWQgdGV4dEFsaWduIHZhbHVlOiAiK2UpLGwueCtsLndpZHRoLzIpLGg9KGUsdCk9Pntjb25zdCBpPWwueTtlLm5vZGUueD1jKGUudGV4dEFsaWduKSxlLm5vZGUueT1pLGUubm9kZS50ZXh0QmFzZWxpbmU9InRvcCIsZChlKTtjb25zdCBzPWUubm9kZS5jb21wdXRlQkJveCgpLHI9TWF0aC5jZWlsKHMueS1pK3MuaGVpZ2h0K3QpO2wuc2hyaW5rKHIsInRvcCIpfTtpZihuJiYobi5ub2RlLnZpc2libGU9bnVsbCE9KHQ9bi5lbmFibGVkKSYmdCksbyYmKG8ubm9kZS52aXNpYmxlPW8uZW5hYmxlZCxvLm5vZGUudmlzaWJsZSkpe2NvbnN0IGU9KG51bGw9PW4/dm9pZCAwOm4ubm9kZS52aXNpYmxlKT9Dbi5TTUFMTF9QQURESU5HOkNuLkxBUkdFX1BBRERJTkc7aChvLG51bGwhPShpPW8uc3BhY2luZyk/aTplKX1yZXR1cm4gbiYmbi5ub2RlLnZpc2libGUmJmgobixudWxsIT0ocz1uLnNwYWNpbmcpP3M6MCksYSYmKGEubm9kZS52aXNpYmxlPWEuZW5hYmxlZCxhLm5vZGUudmlzaWJsZSYmKChlLHQpPT57Y29uc3QgaT1sLnkrbC5oZWlnaHQ7ZS5ub2RlLng9YyhlLnRleHRBbGlnbiksZS5ub2RlLnk9aSxlLm5vZGUudGV4dEJhc2VsaW5lPSJib3R0b20iLGQoZSk7Y29uc3Qgcz1lLm5vZGUuY29tcHV0ZUJCb3goKSxyPU1hdGguY2VpbChpLXMueSt0KTtsLnNocmluayhyLCJib3R0b20iKX0pKGEsbnVsbCE9KHI9YS5zcGFjaW5nKT9yOjApKSx7c2hyaW5rUmVjdDpsfX19LCRjPWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpLHMpe3RoaXMuY2hhcnQ9ZSx0aGlzLmRhdGFTZXJ2aWNlPXQsdGhpcy51cGRhdGVTZXJ2aWNlPWksdGhpcy56b29tTWFuYWdlcj1zLHRoaXMuZGlydHlab29tPSExLHRoaXMuZGlydHlEYXRhU291cmNlPSExLHRoaXMubGFzdEF4aXNab29tcz1uZXcgTWFwLHRoaXMuZGVzdHJveUZucz1bXSx0aGlzLmRlc3Ryb3lGbnMucHVzaCh0aGlzLmRhdGFTZXJ2aWNlLmFkZExpc3RlbmVyKCJkYXRhLXNvdXJjZS1jaGFuZ2UiLCgpPT50aGlzLm9uRGF0YVNvdXJjZUNoYW5nZSgpKSx0aGlzLmRhdGFTZXJ2aWNlLmFkZExpc3RlbmVyKCJkYXRhLWxvYWQiLCgpPT50aGlzLm9uRGF0YUxvYWQoKSksdGhpcy5kYXRhU2VydmljZS5hZGRMaXN0ZW5lcigiZGF0YS1lcnJvciIsKCk9PnRoaXMub25EYXRhRXJyb3IoKSksdGhpcy51cGRhdGVTZXJ2aWNlLmFkZExpc3RlbmVyKCJ1cGRhdGUtY29tcGxldGUiLCgpPT50aGlzLm9uVXBkYXRlQ29tcGxldGUoKSksdGhpcy56b29tTWFuYWdlci5hZGRMaXN0ZW5lcigiem9vbS1jaGFuZ2UiLCgpPT50aGlzLm9uWm9vbUNoYW5nZSgpKSl9ZGVzdHJveSgpe3RoaXMuZGVzdHJveUZucy5mb3JFYWNoKGU9PmUoKSl9b25EYXRhTG9hZCgpe3RoaXMudXBkYXRlU2VydmljZS51cGRhdGUoMSl9b25EYXRhRXJyb3IoKXt0aGlzLnVwZGF0ZVNlcnZpY2UudXBkYXRlKDMpfW9uRGF0YVNvdXJjZUNoYW5nZSgpe3RoaXMuZGlydHlEYXRhU291cmNlPSEwfW9uVXBkYXRlQ29tcGxldGUoKXsodGhpcy5kaXJ0eVpvb218fHRoaXMuZGlydHlEYXRhU291cmNlKSYmdGhpcy51cGRhdGVXaW5kb3coKX1vblpvb21DaGFuZ2UoKXt0aGlzLmRpcnR5Wm9vbT0hMH11cGRhdGVXaW5kb3coKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2lmKCF0aGlzLmRhdGFTZXJ2aWNlLmlzTGF6eSgpKXJldHVybjtjb25zdCBlPXRoaXMuZ2V0VmFsaWRBeGlzKCk7bGV0IHQsaT0hMDtpZihlKXtjb25zdCBzPXRoaXMuem9vbU1hbmFnZXIuZ2V0QXhpc1pvb20oZS5pZCk7dD10aGlzLmdldEF4aXNXaW5kb3coZSxzKSxpPXRoaXMuc2hvdWxkUmVmcmVzaChlLHMpfXRoaXMuZGlydHlab29tPSExLHRoaXMuZGlydHlEYXRhU291cmNlPSExLGkmJnRoaXMuZGF0YVNlcnZpY2UubG9hZCh7d2luZG93U3RhcnQ6bnVsbD09dD92b2lkIDA6dC5taW4sd2luZG93RW5kOm51bGw9PXQ/dm9pZCAwOnQubWF4fSl9KSl9Z2V0VmFsaWRBeGlzKCl7cmV0dXJuIHRoaXMuY2hhcnQuYXhlcy5maW5kKGU9PiJ0aW1lIj09PWUudHlwZSl9c2hvdWxkUmVmcmVzaChlLHQpe2lmKHRoaXMuZGlydHlEYXRhU291cmNlKXJldHVybiEwO2lmKCF0aGlzLmRpcnR5Wm9vbSlyZXR1cm4hMTtjb25zdCBpPXRoaXMubGFzdEF4aXNab29tcy5nZXQoZS5pZCk7cmV0dXJuKCFpfHx0Lm1pbiE9PWkubWlufHx0Lm1heCE9PWkubWF4KSYmKHRoaXMubGFzdEF4aXNab29tcy5zZXQoZS5pZCx0KSwhMCl9Z2V0QXhpc1dpbmRvdyhlLHQpe3ZhciBpLHM7Y29uc3Qgcj1udWxsPT0ocz0oaT1lLnNjYWxlKS5nZXREb21haW4pP3ZvaWQgMDpzLmNhbGwoaSk7aWYoIXR8fCFyfHwwPT09ci5sZW5ndGh8fGlzTmFOKE51bWJlcihyWzBdKSkpcmV0dXJuO2NvbnN0IG89TnVtYmVyKHJbMV0pLU51bWJlcihyWzBdKTtyZXR1cm57bWluOm5ldyBEYXRlKE51bWJlcihyWzBdKStvKnQubWluKSxtYXg6bmV3IERhdGUoTnVtYmVyKHJbMF0pK28qdC5tYXgpfX19LFhjPWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpLHMpe3RoaXMuY2hhcnRMaWtlPWUsdGhpcy5vdmVybGF5cz10LHRoaXMuZGF0YVNlcnZpY2U9aSx0aGlzLmxheW91dFNlcnZpY2U9cyx0aGlzLmRlc3Ryb3lGbnM9W10sdGhpcy5kZXN0cm95Rm5zLnB1c2godGhpcy5sYXlvdXRTZXJ2aWNlLmFkZExpc3RlbmVyKCJsYXlvdXQtY29tcGxldGUiLGU9PnRoaXMub25MYXlvdXRDb21wbGV0ZShlKSkpfWRlc3Ryb3koKXt0aGlzLmRlc3Ryb3lGbnMuZm9yRWFjaChlPT5lKCkpfW9uTGF5b3V0Q29tcGxldGUoe3Nlcmllczp7cmVjdDplfX0pe2NvbnN0IHQ9dGhpcy5kYXRhU2VydmljZS5pc0xvYWRpbmcoKSxpPXRoaXMuY2hhcnRMaWtlLnNlcmllcy5zb21lKGU9Pnt2YXIgdDtyZXR1cm4gbnVsbD09KHQ9ZS5kYXRhKT92b2lkIDA6dC5sZW5ndGh9KSxzPXRoaXMuY2hhcnRMaWtlLnNlcmllcy5zb21lKGU9PmUudmlzaWJsZSk7dGhpcy50b2dnbGVPdmVybGF5KHRoaXMub3ZlcmxheXMubG9hZGluZyxlLHQpLHRoaXMudG9nZ2xlT3ZlcmxheSh0aGlzLm92ZXJsYXlzLm5vRGF0YSxlLCF0JiYhaSksdGhpcy50b2dnbGVPdmVybGF5KHRoaXMub3ZlcmxheXMubm9WaXNpYmxlU2VyaWVzLGUsaSYmIXMpfXRvZ2dsZU92ZXJsYXkoZSx0LGkpe2kmJnQ/ZS5zaG93KHQpOmUuaGlkZSgpfX0scWM9Y2xhc3MgZXh0ZW5kcyBqbHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMudXBkYXRlQ2FsbGJhY2s9ZX11cGRhdGUoZT0wLHQpe3RoaXMudXBkYXRlQ2FsbGJhY2soZSx0KX1kaXNwYXRjaFVwZGF0ZUNvbXBsZXRlKGUpe3RoaXMuZGlzcGF0Y2goInVwZGF0ZS1jb21wbGV0ZSIse3R5cGU6InVwZGF0ZS1jb21wbGV0ZSIsbWluUmVjdDplfSl9fSxaYz1Gcy5jcmVhdGUoITAsIm9wdHMiKSxRYz1jbGFzcyBleHRlbmRzIGZ0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnBhZGRpbmc9bmV3IE9sKDApfX07eShbcXIodG8se29wdGlvbmFsOiEwfSldLFFjLnByb3RvdHlwZSwiY2xpcCIsMikseShbcXIoZW8pXSxRYy5wcm90b3R5cGUsInBhZGRpbmciLDIpO3ZhciBKYz1jbGFzcyBlIGV4dGVuZHMgRGx7Y29uc3RydWN0b3IoZSx0KXt2YXIgaTtzdXBlcigpLHRoaXMuaWQ9V3ModGhpcyksdGhpcy5zZXJpZXNSb290PW5ldyBPbih7bmFtZTp0aGlzLmlkKyItU2VyaWVzLXJvb3QifSksdGhpcy5kZWJ1Zz1Gcy5jcmVhdGUoKSx0aGlzLmV4dHJhRGVidWdTdGF0cz17fSx0aGlzLmRhdGE9W10sdGhpcy5fZmlyc3RBdXRvU2l6ZT0hMCx0aGlzLnBhZGRpbmc9bmV3IE9sKDIwKSx0aGlzLnNlcmllc0FyZWE9bmV3IFFjLHRoaXMubW9kZT0ic3RhbmRhbG9uZSIsdGhpcy5kZXN0cm95ZWQ9ITEsdGhpcy5fc2tpcFN5bmM9ITEsdGhpcy5fZGVzdHJveUZucz1bXSx0aGlzLmNoYXJ0QW5pbWF0aW9uUGhhc2U9ImluaXRpYWwiLHRoaXMuaGlnaGxpZ2h0TWFuYWdlcj1uZXcgbGQsdGhpcy5zeW5jTWFuYWdlcj1uZXcgcGQodGhpcyksdGhpcy56b29tTWFuYWdlcj1uZXcgbWQsdGhpcy5tb2R1bGVzPW5ldyBNYXAsdGhpcy5sZWdlbmRzPW5ldyBNYXAsdGhpcy5wcm9jZXNzb3JzPVtdLHRoaXMucHJvY2Vzc2VkT3B0aW9ucz17fSx0aGlzLnVzZXJPcHRpb25zPXt9LHRoaXMucXVldWVkVXNlck9wdGlvbnM9W10sdGhpcy5fcGVuZGluZ0ZhY3RvcnlVcGRhdGVzQ291bnQ9MCx0aGlzLl9wZXJmb3JtVXBkYXRlTm9SZW5kZXJDb3VudD0wLHRoaXMuX3BlcmZvcm1VcGRhdGVTa2lwQW5pbWF0aW9ucz0hMSx0aGlzLnBlcmZvcm1VcGRhdGVUeXBlPTcsdGhpcy51cGRhdGVTaG9ydGN1dENvdW50PTAsdGhpcy5zZXJpZXNUb1VwZGF0ZT1uZXcgU2V0LHRoaXMudXBkYXRlTXV0ZXg9bmV3IGNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5hdmFpbGFibGU9ITAsdGhpcy5hY3F1aXJlUXVldWU9W119YWNxdWlyZShlKXtyZXR1cm4gbmV3IFByb21pc2UodD0+e3RoaXMuYWNxdWlyZVF1ZXVlLnB1c2goW2UsdF0pLHRoaXMuYXZhaWxhYmxlJiZ0aGlzLmRpc3BhdGNoTmV4dCgpfSl9YWNxdWlyZUltbWVkaWF0ZWx5KGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7cmV0dXJuISF0aGlzLmF2YWlsYWJsZSYmKHlpZWxkIHRoaXMuYWNxdWlyZShlKSwhMCl9KSl9d2FpdEZvckNsZWFyQWNxdWlyZVF1ZXVlKCl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5hY3F1aXJlKCgpPT53KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7fSkpKX0pKX1kaXNwYXRjaE5leHQoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciBlLHQ7dGhpcy5hdmFpbGFibGU9ITE7bGV0W2ksc109bnVsbCE9KGU9dGhpcy5hY3F1aXJlUXVldWUuc2hpZnQoKSk/ZTpbXTtmb3IoO2k7KXt0cnl7eWllbGQgaSgpLG51bGw9PXN8fHMoKX1jYXRjaChlKXtMLmVycm9yKCJtdXRleCBjYWxsYmFjayBlcnJvciIsZSksbnVsbD09c3x8cygpfVtpLHNdPW51bGwhPSh0PXRoaXMuYWNxdWlyZVF1ZXVlLnNoaWZ0KCkpP3Q6W119dGhpcy5hdmFpbGFibGU9ITB9KSl9fSx0aGlzLnVwZGF0ZVJlcXVlc3RvcnM9e30sdGhpcy5wZXJmb3JtVXBkYXRlVHJpZ2dlcj1BbCgoZSx0PTApPT5zZXRUaW1lb3V0KGUsdCksZT0+dyh0aGlzLFtlXSwoZnVuY3Rpb24qKHtjb3VudDplfSl7dGhpcy5kZXN0cm95ZWR8fHRoaXMudXBkYXRlTXV0ZXguYWNxdWlyZSgoKT0+dyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3RyeXt5aWVsZCB0aGlzLnBlcmZvcm1VcGRhdGUoZSl9Y2F0Y2goZSl7TC5lcnJvcigidXBkYXRlIGVycm9yIixlKX19KSkpfSkpKSx0aGlzLmF4ZXM9W10sdGhpcy5zZXJpZXM9W10sdGhpcy5sYXN0SW50ZXJhY3Rpb25FdmVudD12b2lkIDAsdGhpcy5wb2ludGVyU2NoZWR1bGVyPWZ1bmN0aW9uKGUpe3JldHVybiBBbCgoZSx0KT0+cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGUpLGUpfSgoKT0+e3RoaXMubGFzdEludGVyYWN0aW9uRXZlbnQmJih0aGlzLmhhbmRsZVBvaW50ZXIodGhpcy5sYXN0SW50ZXJhY3Rpb25FdmVudCwhMSksdGhpcy5sYXN0SW50ZXJhY3Rpb25FdmVudD12b2lkIDApfSksdGhpcy5vblNlcmllc05vZGVDbGljaz1lPT57Y29uc3QgdD1mKG0oe30sZSkse3R5cGU6InNlcmllc05vZGVDbGljayJ9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwic2VyaWVzIix7ZW51bWVyYWJsZTohMSxnZXQ6KCk9PmUuc2VyaWVzfSksdGhpcy5maXJlRXZlbnQodCl9LHRoaXMub25TZXJpZXNOb2RlRG91YmxlQ2xpY2s9ZT0+e2NvbnN0IHQ9ZihtKHt9LGUpLHt0eXBlOiJzZXJpZXNOb2RlRG91YmxlQ2xpY2sifSk7dGhpcy5maXJlRXZlbnQodCl9LHRoaXMuc2VyaWVzR3JvdXBpbmdDaGFuZ2VkPWU9PntpZighKGUgaW5zdGFuY2VvZiB6YykpcmV0dXJuO2NvbnN0e3Nlcmllczp0LHNlcmllc0dyb3VwaW5nOmksb2xkR3JvdXBpbmc6c309ZTtudWxsIT10LnJvb3RHcm91cC5wYXJlbnQmJnRoaXMuc2VyaWVzTGF5ZXJNYW5hZ2VyLmNoYW5nZUdyb3VwKHtpbnRlcm5hbElkOnQuaW50ZXJuYWxJZCx0eXBlOnQudHlwZSxyb290R3JvdXA6dC5yb290R3JvdXAsaGlnaGxpZ2h0R3JvdXA6dC5oaWdobGlnaHRHcm91cCxhbm5vdGF0aW9uR3JvdXA6dC5hbm5vdGF0aW9uR3JvdXAsZ2V0R3JvdXBaSW5kZXhTdWJPcmRlcjplPT50LmdldEdyb3VwWkluZGV4U3ViT3JkZXIoZSksc2VyaWVzR3JvdXBpbmc6aSxvbGRHcm91cGluZzpzfSl9LHRoaXMuY2hhcnRPcHRpb25zPWU7Y29uc3R7d2luZG93OnMsZG9jdW1lbnQ6cn09ZS5zcGVjaWFsT3ZlcnJpZGVzLG89bnVsbD09dD92b2lkIDA6dC5zY2VuZSxuPW51bGwhPShpPW51bGw9PXQ/dm9pZCAwOnQuZWxlbWVudCk/aTpyLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGE9bnVsbD09dD92b2lkIDA6dC5jb250YWluZXIsbD1uZXcgT24oe25hbWU6InJvb3QifSk7bC52aXNpYmxlPSExLGwuYXBwZW5kKHRoaXMuc2VyaWVzUm9vdCksdGhpcy5heGlzR3JpZEdyb3VwPW5ldyBPbih7bmFtZToiQXhlcy1HcmlkcyIsbGF5ZXI6ITAsekluZGV4OjF9KSxsLmFwcGVuZENoaWxkKHRoaXMuYXhpc0dyaWRHcm91cCksdGhpcy5heGlzR3JvdXA9bmV3IE9uKHtuYW1lOiJBeGVzIixsYXllcjohMCx6SW5kZXg6Mn0pLGwuYXBwZW5kQ2hpbGQodGhpcy5heGlzR3JvdXApLHRoaXMuZWxlbWVudD1uLG4uY2xhc3NMaXN0LmFkZCgiYWctY2hhcnQtd3JhcHBlciIpLG4uc3R5bGUucG9zaXRpb249InJlbGF0aXZlIix0aGlzLnNjZW5lPW51bGwhPW8/bzpuZXcgeGwodGhpcy5jaGFydE9wdGlvbnMuc3BlY2lhbE92ZXJyaWRlcyksdGhpcy5zY2VuZS5yb290PWwsdGhpcy5zY2VuZS5jb250YWluZXI9bix0aGlzLmF1dG9TaXplPSEwLHRoaXMuY2hhcnRFdmVudE1hbmFnZXI9bmV3IHNkLHRoaXMuY29udGV4dE1lbnVSZWdpc3RyeT1uZXcgcmQsdGhpcy5jdXJzb3JNYW5hZ2VyPW5ldyBvZChuKSx0aGlzLmhpZ2hsaWdodE1hbmFnZXI9bmV3IGxkLHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyPW5ldyBlZChuLHIscyksdGhpcy5yZWdpb25NYW5hZ2VyPW5ldyBjbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLmludGVyYWN0aW9uTWFuYWdlcj1lLHRoaXMuZXZlbnRIYW5kbGVyPWU9PnRoaXMucHJvY2Vzc0V2ZW50KGUpLHRoaXMucmVnaW9ucz1uZXcgY2QsdGhpcy5kZXN0cm95Rm5zPVtdLCRsLmZvckVhY2godD0+dGhpcy5kZXN0cm95Rm5zLnB1c2goZS5hZGRMaXN0ZW5lcih0LHRoaXMuZXZlbnRIYW5kbGVyLDE1KSkpfWRlc3Ryb3koKXt0aGlzLmRlc3Ryb3lGbnMuZm9yRWFjaChlPT5lKCkpLHRoaXMuY3VycmVudFJlZ2lvbj12b2lkIDA7Zm9yKGNvbnN0IGUgb2YgdGhpcy5yZWdpb25zKWUubGlzdGVuZXJzLmRlc3Ryb3koKTt0aGlzLnJlZ2lvbnMuY2xlYXIoKX1wdXNoUmVnaW9uKGUsdCl7Y29uc3QgaT17bmFtZTplLGxpc3RlbmVyczpuZXcgaGR9O3JldHVybiB0aGlzLnJlZ2lvbnMuYWRkKGksdCksaX1hZGRSZWdpb24oZSx0KXtjb25zdCBpPXRoaXMucHVzaFJlZ2lvbihlLHQpLHtpbnRlcmFjdGlvbk1hbmFnZXI6c309dGhpcztyZXR1cm4gbmV3IGNsYXNze2FkZExpc3RlbmVyKGUsdCxyPTgpe3JldHVybiBpLmxpc3RlbmVycy5hZGRMaXN0ZW5lcihlLGU9PntpZighZS5jb25zdW1lZCl7cy5nZXRTdGF0ZSgpJnImJnQoZSl9fSl9fX1wcm9jZXNzRXZlbnQoZSl7Y29uc3R7Y3VycmVudFJlZ2lvbjp0fT10aGlzLGk9dGhpcy5waWNrUmVnaW9uKGUub2Zmc2V0WCxlLm9mZnNldFkpO2lmKHZvaWQgMCE9PXQmJihudWxsPT1pP3ZvaWQgMDppLm5hbWUpIT09dC5uYW1lJiYobnVsbD09dHx8dC5saXN0ZW5lcnMuZGlzcGF0Y2goImxlYXZlIixmKG0oe30sZSkse3R5cGU6ImxlYXZlIn0pKSksdm9pZCAwIT09aSl7KCgpPT53KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7cmV0dXJuIGkubGlzdGVuZXJzLmRpc3BhdGNoKGUudHlwZSxlKX0pKSkoKS5jYXRjaChlPT5MLmVycm9yT25jZShlKSl9dGhpcy5jdXJyZW50UmVnaW9uPWl9cGlja1JlZ2lvbihlLHQpe2NvbnN0IGk9dGhpcy5yZWdpb25zLmZpbmQoZSx0KTtyZXR1cm4gaS5sZW5ndGg+MD9pWzBdOnZvaWQgMH19KHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyKSx0aGlzLmdlc3R1cmVEZXRlY3Rvcj1uZXcgYWQobiksdGhpcy5sYXlvdXRTZXJ2aWNlPW5ldyB2ZCx0aGlzLnVwZGF0ZVNlcnZpY2U9bmV3IHFjKChlPTAsdCk9PnRoaXMudXBkYXRlKGUsdCkpLHRoaXMuc2VyaWVzU3RhdGVNYW5hZ2VyPW5ldyBjbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuZ3JvdXBzPXt9fXJlZ2lzdGVyU2VyaWVzKHtpZDplLHNlcmllc0dyb3VwaW5nOnQsdmlzaWJsZTppLHR5cGU6c30pe3ZhciByO3QmJihudWxsIT0ocj10aGlzLmdyb3Vwcylbc118fChyW3NdPXt9KSx0aGlzLmdyb3Vwc1tzXVtlXT17Z3JvdXBpbmc6dCx2aXNpYmxlOml9KX1kZXJlZ2lzdGVyU2VyaWVzKHtpZDplLHR5cGU6dH0pe3RoaXMuZ3JvdXBzW3RdJiZkZWxldGUgdGhpcy5ncm91cHNbdF1bZV0sdGhpcy5ncm91cHNbdF0mJjA9PT1PYmplY3Qua2V5cyh0aGlzLmdyb3Vwc1t0XSkubGVuZ3RoJiZkZWxldGUgdGhpcy5ncm91cHNbdF19Z2V0VmlzaWJsZVBlZXJHcm91cEluZGV4KHt0eXBlOmUsc2VyaWVzR3JvdXBpbmc6dCx2aXNpYmxlOml9KXt2YXIgcztpZighdClyZXR1cm57dmlzaWJsZUdyb3VwQ291bnQ6aT8xOjAsdmlzaWJsZVNhbWVTdGFja0NvdW50Omk/MTowLGluZGV4OjB9O2NvbnN0IHI9bmV3IFNldCxvPW5ldyBTZXQ7Zm9yKGNvbnN0W2ksbl1vZiBPYmplY3QuZW50cmllcyhudWxsIT0ocz10aGlzLmdyb3Vwc1tlXSk/czp7fSkpbi52aXNpYmxlJiYoci5hZGQobi5ncm91cGluZy5ncm91cEluZGV4KSxuLmdyb3VwaW5nLmdyb3VwSW5kZXg9PT10Lmdyb3VwSW5kZXgmJm8uYWRkKG4uZ3JvdXBpbmcuc3RhY2tJbmRleCkpO2NvbnN0IG49Wy4uLnIudmFsdWVzKCldO3JldHVybiBuLnNvcnQoKGUsdCk9PmUtdCkse3Zpc2libGVHcm91cENvdW50Om4ubGVuZ3RoLHZpc2libGVTYW1lU3RhY2tDb3VudDpvLnNpemUsaW5kZXg6bi5pbmRleE9mKHQuZ3JvdXBJbmRleCl9fX0sdGhpcy5zZXJpZXNMYXllck1hbmFnZXI9bmV3IGNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuZ3JvdXBzPXt9LHRoaXMuc2VyaWVzPXt9LHRoaXMuZXhwZWN0ZWRTZXJpZXNDb3VudD0xLHRoaXMubW9kZT0ibm9ybWFsIix0aGlzLnJvb3RHcm91cD1lfXNldFNlcmllc0NvdW50KGUpe3RoaXMuZXhwZWN0ZWRTZXJpZXNDb3VudD1lfXJlcXVlc3RHcm91cChlKXt2YXIgdCxpLHM7Y29uc3R7aW50ZXJuYWxJZDpyLHR5cGU6byxyb290R3JvdXA6bixoaWdobGlnaHRHcm91cDphLGFubm90YXRpb25Hcm91cDpsLHNlcmllc0dyb3VwaW5nOmR9PWUse2dyb3VwSW5kZXg6Yz1yfT1udWxsIT1kP2Q6e307aWYobnVsbCE9dGhpcy5zZXJpZXNbcl0pdGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSBzZXJpZXMgYWxyZWFkeSBoYXMgYW4gYWxsb2NhdGVkIGxheWVyOiAiK3RoaXMuc2VyaWVzW3JdKTswPT09T2JqZWN0LmtleXModGhpcy5zZXJpZXMpLmxlbmd0aCYmKHRoaXMubW9kZT10aGlzLmV4cGVjdGVkU2VyaWVzQ291bnQ+PTMwPyJhZ2dyZXNzaXZlLWdyb3VwaW5nIjoibm9ybWFsIiksbnVsbCE9KHQ9dGhpcy5ncm91cHMpW29dfHwodFtvXT17fSk7Y29uc3QgaD10aGlzLmxvb2t1cElkeChjKTtsZXQgdT10aGlzLmdyb3Vwc1tvXVtoXTtyZXR1cm4gdXx8KHU9bnVsbCE9KHM9KGk9dGhpcy5ncm91cHNbb10pW2hdKT9zOmlbaF09e3Nlcmllc0lkczpbXSxncm91cDp0aGlzLnJvb3RHcm91cC5hcHBlbmRDaGlsZChuZXcgT24oe25hbWU6bysiLWNvbnRlbnQiLGxheWVyOiEwLHpJbmRleDo0LHpJbmRleFN1Yk9yZGVyOmUuZ2V0R3JvdXBaSW5kZXhTdWJPcmRlcigiZGF0YSIpfSkpLGhpZ2hsaWdodDp0aGlzLnJvb3RHcm91cC5hcHBlbmRDaGlsZChuZXcgT24oe25hbWU6bysiLWhpZ2hsaWdodCIsbGF5ZXI6ITAsekluZGV4OjQsekluZGV4U3ViT3JkZXI6ZS5nZXRHcm91cFpJbmRleFN1Yk9yZGVyKCJoaWdobGlnaHQiKX0pKSxhbm5vdGF0aW9uOnRoaXMucm9vdEdyb3VwLmFwcGVuZENoaWxkKG5ldyBPbih7bmFtZTpvKyItYW5ub3RhdGlvbiIsbGF5ZXI6ITAsekluZGV4OjQsekluZGV4U3ViT3JkZXI6ZS5nZXRHcm91cFpJbmRleFN1Yk9yZGVyKCJhbm5vdGF0aW9uIil9KSl9KSx0aGlzLnNlcmllc1tyXT17bGF5ZXJTdGF0ZTp1LHNlcmllc0NvbmZpZzplfSx1LnNlcmllc0lkcy5wdXNoKHIpLHUuZ3JvdXAuYXBwZW5kQ2hpbGQobiksdS5oaWdobGlnaHQuYXBwZW5kQ2hpbGQoYSksdS5hbm5vdGF0aW9uLmFwcGVuZENoaWxkKGwpLHUuZ3JvdXB9Y2hhbmdlR3JvdXAoZSl7dmFyIHQsaTtjb25zdHtpbnRlcm5hbElkOnMsc2VyaWVzR3JvdXBpbmc6cix0eXBlOm8scm9vdEdyb3VwOm4saGlnaGxpZ2h0R3JvdXA6YSxhbm5vdGF0aW9uR3JvdXA6bCxvbGRHcm91cGluZzpkfT1lLHtncm91cEluZGV4OmM9c309bnVsbCE9cj9yOnt9OyhudWxsPT0oaT1udWxsPT0odD10aGlzLmdyb3Vwc1tvXSk/dm9pZCAwOnRbY10pP3ZvaWQgMDppLnNlcmllc0lkcy5pbmNsdWRlcyhzKSl8fChudWxsIT10aGlzLnNlcmllc1tzXSYmdGhpcy5yZWxlYXNlR3JvdXAoe2ludGVybmFsSWQ6cyxzZXJpZXNHcm91cGluZzpkLHR5cGU6byxyb290R3JvdXA6bixoaWdobGlnaHRHcm91cDphLGFubm90YXRpb25Hcm91cDpsfSksdGhpcy5yZXF1ZXN0R3JvdXAoZSkpfXJlbGVhc2VHcm91cChlKXt2YXIgdCxpLHMscixvO2NvbnN0e2ludGVybmFsSWQ6bixzZXJpZXNHcm91cGluZzphLHJvb3RHcm91cDpsLGhpZ2hsaWdodEdyb3VwOmQsYW5ub3RhdGlvbkdyb3VwOmMsdHlwZTpofT1lLHtncm91cEluZGV4OnU9bn09bnVsbCE9YT9hOnt9O2lmKG51bGw9PXRoaXMuc2VyaWVzW25dKXRocm93IG5ldyBFcnJvcigiQUcgQ2hhcnRzIC0gc2VyaWVzIGRvZXNuJ3QgaGF2ZSBhbiBhbGxvY2F0ZWQgbGF5ZXI6ICIrbik7Y29uc3QgcD10aGlzLmxvb2t1cElkeCh1KSxnPW51bGwhPShzPW51bGw9PSh0PXRoaXMuZ3JvdXBzW2hdKT92b2lkIDA6dFtwXSk/czpudWxsPT0oaT10aGlzLnNlcmllc1tuXSk/dm9pZCAwOmkubGF5ZXJTdGF0ZTtpZihnJiYoZy5zZXJpZXNJZHM9Zy5zZXJpZXNJZHMuZmlsdGVyKGU9PmUhPT1uKSxnLmdyb3VwLnJlbW92ZUNoaWxkKGwpLGcuaGlnaGxpZ2h0LnJlbW92ZUNoaWxkKGQpLGcuYW5ub3RhdGlvbi5yZW1vdmVDaGlsZChjKSksMD09PShudWxsPT1nP3ZvaWQgMDpnLnNlcmllc0lkcy5sZW5ndGgpKXRoaXMucm9vdEdyb3VwLnJlbW92ZUNoaWxkKGcuZ3JvdXApLHRoaXMucm9vdEdyb3VwLnJlbW92ZUNoaWxkKGcuaGlnaGxpZ2h0KSx0aGlzLnJvb3RHcm91cC5yZW1vdmVDaGlsZChnLmFubm90YXRpb24pLGRlbGV0ZSB0aGlzLmdyb3Vwc1toXVtwXSxkZWxldGUgdGhpcy5ncm91cHNbaF1bbl07ZWxzZSBpZigobnVsbD09Zz92b2lkIDA6Zy5zZXJpZXNJZHMubGVuZ3RoKT4wKXtjb25zdCBlPW51bGw9PShvPXRoaXMuc2VyaWVzW251bGw9PShyPW51bGw9PWc/dm9pZCAwOmcuc2VyaWVzSWRzKT92b2lkIDA6clswXV0pP3ZvaWQgMDpvLnNlcmllc0NvbmZpZztnLmdyb3VwLnpJbmRleFN1Yk9yZGVyPW51bGw9PWU/dm9pZCAwOmUuZ2V0R3JvdXBaSW5kZXhTdWJPcmRlcigiZGF0YSIpLGcuaGlnaGxpZ2h0LnpJbmRleFN1Yk9yZGVyPW51bGw9PWU/dm9pZCAwOmUuZ2V0R3JvdXBaSW5kZXhTdWJPcmRlcigiaGlnaGxpZ2h0IiksZy5hbm5vdGF0aW9uLnpJbmRleFN1Yk9yZGVyPW51bGw9PWU/dm9pZCAwOmUuZ2V0R3JvdXBaSW5kZXhTdWJPcmRlcigiYW5ub3RhdGlvbiIpfWRlbGV0ZSB0aGlzLnNlcmllc1tuXX1sb29rdXBJZHgoZSl7cmV0dXJuIm5vcm1hbCI9PT10aGlzLm1vZGU/ZToic3RyaW5nIiE9dHlwZW9mIGV8fChlPU51bWJlcihlLnNwbGl0KCItIikuc2xpY2UoLTEpWzBdKSk/TWF0aC5mbG9vcigzMCpNYXRoLm1heChNYXRoLm1pbihlL3RoaXMuZXhwZWN0ZWRTZXJpZXNDb3VudCwxKSwwKSk6MH1kZXN0cm95KCl7Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLmdyb3VwcykpZm9yKGNvbnN0IHQgb2YgT2JqZWN0LnZhbHVlcyhlKSl0aGlzLnJvb3RHcm91cC5yZW1vdmVDaGlsZCh0Lmdyb3VwKSx0aGlzLnJvb3RHcm91cC5yZW1vdmVDaGlsZCh0LmhpZ2hsaWdodCksdGhpcy5yb290R3JvdXAucmVtb3ZlQ2hpbGQodC5hbm5vdGF0aW9uKTt0aGlzLmdyb3Vwcz17fSx0aGlzLnNlcmllcz17fX19KHRoaXMuc2VyaWVzUm9vdCksdGhpcy5jYWxsYmFja0NhY2hlPW5ldyBjbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuY2FjaGU9bmV3IFdlYWtNYXB9Y2FsbChlLC4uLnQpe2xldCBpLHM9dGhpcy5jYWNoZS5nZXQoZSk7Y29uc3Qgcj0oKT0+e3RyeXtjb25zdCByPWUoLi4udCk7cmV0dXJuIHMmJm51bGwhPWkmJnMuc2V0KGkscikscn1jYXRjaChlKXtyZXR1cm4gdm9pZCBMLndhcm5PbmNlKCJVc2VyIGNhbGxiYWNrIGVycm9yZWQsIGlnbm9yaW5nIixlKX19O3RyeXtpPUpTT04uc3RyaW5naWZ5KHQpfWNhdGNoKGUpe3JldHVybiByKCl9cmV0dXJuIG51bGw9PXMmJihzPW5ldyBNYXAsdGhpcy5jYWNoZS5zZXQoZSxzKSkscy5oYXMoaSk/cy5nZXQoaSk6cigpfWludmFsaWRhdGVDYWNoZSgpe3RoaXMuY2FjaGU9bmV3IFdlYWtNYXB9fSx0aGlzLmFuaW1hdGlvbk1hbmFnZXI9bmV3IGlkKHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyLHRoaXMudXBkYXRlTXV0ZXgpLHRoaXMuYW5pbWF0aW9uTWFuYWdlci5za2lwKCksdGhpcy5hbmltYXRpb25NYW5hZ2VyLnBsYXkoKSx0aGlzLmRhdGFTZXJ2aWNlPW5ldyBVbCh0aGlzLmFuaW1hdGlvbk1hbmFnZXIpLHRoaXMub3ZlcmxheXM9bmV3IG5jKHRoaXMuZWxlbWVudCx0aGlzLmFuaW1hdGlvbk1hbmFnZXIpLHRoaXMucHJvY2Vzc29ycz1bbmV3IFljKHRoaXMsdGhpcy5sYXlvdXRTZXJ2aWNlKSxuZXcgJGModGhpcyx0aGlzLmRhdGFTZXJ2aWNlLHRoaXMudXBkYXRlU2VydmljZSx0aGlzLnpvb21NYW5hZ2VyKSxuZXcgWGModGhpcyx0aGlzLm92ZXJsYXlzLHRoaXMuZGF0YVNlcnZpY2UsdGhpcy5sYXlvdXRTZXJ2aWNlKV0sdGhpcy50b29sdGlwPW5ldyB2bih0aGlzLnNjZW5lLmNhbnZhcy5lbGVtZW50LHIscyxyLmJvZHkpLHRoaXMudG9vbHRpcE1hbmFnZXI9bmV3IGdkKHRoaXMudG9vbHRpcCx0aGlzLmludGVyYWN0aW9uTWFuYWdlciksdGhpcy5oaWdobGlnaHQ9bmV3IExsLHRoaXMuY29udGFpbmVyPWEsdGhpcy5hdHRhY2hMZWdlbmQoImNhdGVnb3J5Iix0YyksdGhpcy5sZWdlbmQ9dGhpcy5sZWdlbmRzLmdldCgiY2F0ZWdvcnkiKTtjb25zdHtBbGw6ZH09Wmw7TWwub2JzZXJ2ZSh0aGlzLmVsZW1lbnQsZT0+dGhpcy5yYXdSZXNpemUoZSkpLHRoaXMuX2Rlc3Ryb3lGbnMucHVzaCh0aGlzLmRhdGFTZXJ2aWNlLmFkZExpc3RlbmVyKCJkYXRhLWxvYWQiLGU9Pnt0aGlzLmRhdGE9ZS5kYXRhfSksdGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIuYWRkTGlzdGVuZXIoImNsaWNrIixlPT50aGlzLm9uQ2xpY2soZSkpLHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyLmFkZExpc3RlbmVyKCJkYmxjbGljayIsZT0+dGhpcy5vbkRvdWJsZUNsaWNrKGUpKSx0aGlzLmludGVyYWN0aW9uTWFuYWdlci5hZGRMaXN0ZW5lcigiaG92ZXIiLGU9PnRoaXMub25Nb3VzZU1vdmUoZSkpLHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyLmFkZExpc3RlbmVyKCJsZWF2ZSIsZT0+dGhpcy5vbkxlYXZlKGUpKSx0aGlzLmludGVyYWN0aW9uTWFuYWdlci5hZGRMaXN0ZW5lcigicGFnZS1sZWZ0IiwoKT0+dGhpcy5kZXN0cm95KCkpLHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyLmFkZExpc3RlbmVyKCJ3aGVlbCIsKCk9PnRoaXMucmVzZXRQb2ludGVyKCkpLHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyLmFkZExpc3RlbmVyKCJkcmFnIiwoKT0+dGhpcy5yZXNldFBvaW50ZXIoKSksdGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIuYWRkTGlzdGVuZXIoImNvbnRleHRtZW51IixlPT50aGlzLm9uQ29udGV4dE1lbnUoZSksZCksdGhpcy5hbmltYXRpb25NYW5hZ2VyLmFkZExpc3RlbmVyKCJhbmltYXRpb24tZnJhbWUiLCgpPT57dGhpcy51cGRhdGUoNil9KSx0aGlzLmhpZ2hsaWdodE1hbmFnZXIuYWRkTGlzdGVuZXIoImhpZ2hsaWdodC1jaGFuZ2UiLGU9PnRoaXMuY2hhbmdlSGlnaGxpZ2h0RGF0dW0oZSkpLHRoaXMuem9vbU1hbmFnZXIuYWRkTGlzdGVuZXIoInpvb20tY2hhbmdlIiwoKT0+dGhpcy51cGRhdGUoMix7Zm9yY2VOb2RlRGF0YVJlZnJlc2g6ITAsc2tpcEFuaW1hdGlvbnM6ITB9KSkpfXN0YXRpYyBnZXRJbnN0YW5jZSh0KXtyZXR1cm4gZS5jaGFydHNJbnN0YW5jZXMuZ2V0KHQpfW9uQXV0b1NpemVDaGFuZ2UoZSl7Y29uc3R7c3R5bGU6dH09dGhpcy5lbGVtZW50O2lmKGUpe2lmKHQuZGlzcGxheT0iYmxvY2siLHQud2lkdGg9IjEwMCUiLHQuaGVpZ2h0PSIxMDAlIiwhdGhpcy5fbGFzdEF1dG9TaXplKXJldHVybjt0aGlzLnJlc2l6ZSh2b2lkIDAsdm9pZCAwLCJhdXRvU2l6ZSBvcHRpb24iKX1lbHNlIHQuZGlzcGxheT0iaW5saW5lLWJsb2NrIix0LndpZHRoPSJhdXRvIix0LmhlaWdodD0iYXV0byJ9ZG93bmxvYWQoZSx0KXt0aGlzLnNjZW5lLmRvd25sb2FkKGUsdCl9Z2V0T3B0aW9ucygpe3ZhciBlO3JldHVybiBudWxsIT0oZT10aGlzLnF1ZXVlZFVzZXJPcHRpb25zLmF0KC0xKSk/ZTp0aGlzLnVzZXJPcHRpb25zfWFkZE1vZHVsZShlKXtpZih0aGlzLm1vZHVsZXMuaGFzKGUub3B0aW9uc0tleSkpdGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSBtb2R1bGUgYWxyZWFkeSBpbml0aWFsaXNlZDogIitlLm9wdGlvbnNLZXkpO2NvbnN0IHQ9bmV3IGUuaW5zdGFuY2VDb25zdHJ1Y3Rvcih0aGlzLmdldE1vZHVsZUNvbnRleHQoKSk7aWYoImxlZ2VuZCI9PT1lLnR5cGUpe2NvbnN0IGk9dDt0aGlzLmxlZ2VuZHMuc2V0KGUuaWRlbnRpZmllcixpKSxpLmF0dGFjaExlZ2VuZCh0aGlzLnNjZW5lLnJvb3QpfXRoaXMubW9kdWxlcy5zZXQoZS5vcHRpb25zS2V5LHQpfXJlbW92ZU1vZHVsZShlKXt2YXIgdDsibGVnZW5kIj09PWUudHlwZSYmdGhpcy5sZWdlbmRzLmRlbGV0ZShlLmlkZW50aWZpZXIpLG51bGw9PSh0PXRoaXMubW9kdWxlcy5nZXQoZS5vcHRpb25zS2V5KSl8fHQuZGVzdHJveSgpLHRoaXMubW9kdWxlcy5kZWxldGUoZS5vcHRpb25zS2V5KX1hdHRhY2hMZWdlbmQoZSx0KXtjb25zdCBpPW5ldyB0KHRoaXMuZ2V0TW9kdWxlQ29udGV4dCgpKTt0aGlzLmxlZ2VuZHMuc2V0KGUsaSksaS5hdHRhY2hMZWdlbmQodGhpcy5zY2VuZS5yb290KX1pc01vZHVsZUVuYWJsZWQoZSl7cmV0dXJuIHRoaXMubW9kdWxlcy5oYXMoZS5vcHRpb25zS2V5KX1nZXRNb2R1bGVDb250ZXh0KCl7cmV0dXJue3dpbmRvdzp0aGlzLmNoYXJ0T3B0aW9ucy5zcGVjaWFsT3ZlcnJpZGVzLndpbmRvdyxkb2N1bWVudDp0aGlzLmNoYXJ0T3B0aW9ucy5zcGVjaWFsT3ZlcnJpZGVzLmRvY3VtZW50LHNjZW5lOnRoaXMuc2NlbmUsYW5pbWF0aW9uTWFuYWdlcjp0aGlzLmFuaW1hdGlvbk1hbmFnZXIsY2hhcnRFdmVudE1hbmFnZXI6dGhpcy5jaGFydEV2ZW50TWFuYWdlcixjb250ZXh0TWVudVJlZ2lzdHJ5OnRoaXMuY29udGV4dE1lbnVSZWdpc3RyeSxjdXJzb3JNYW5hZ2VyOnRoaXMuY3Vyc29yTWFuYWdlcixoaWdobGlnaHRNYW5hZ2VyOnRoaXMuaGlnaGxpZ2h0TWFuYWdlcixpbnRlcmFjdGlvbk1hbmFnZXI6dGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIscmVnaW9uTWFuYWdlcjp0aGlzLnJlZ2lvbk1hbmFnZXIsZ2VzdHVyZURldGVjdG9yOnRoaXMuZ2VzdHVyZURldGVjdG9yLHRvb2x0aXBNYW5hZ2VyOnRoaXMudG9vbHRpcE1hbmFnZXIsc3luY01hbmFnZXI6dGhpcy5zeW5jTWFuYWdlcix6b29tTWFuYWdlcjp0aGlzLnpvb21NYW5hZ2VyLGNoYXJ0U2VydmljZTp0aGlzLGRhdGFTZXJ2aWNlOnRoaXMuZGF0YVNlcnZpY2UsbGF5b3V0U2VydmljZTp0aGlzLmxheW91dFNlcnZpY2UsdXBkYXRlU2VydmljZTp0aGlzLnVwZGF0ZVNlcnZpY2Usc2VyaWVzU3RhdGVNYW5hZ2VyOnRoaXMuc2VyaWVzU3RhdGVNYW5hZ2VyLGNhbGxiYWNrQ2FjaGU6dGhpcy5jYWxsYmFja0NhY2hlfX1yZXNldEFuaW1hdGlvbnMoKXt2YXIgZTt0aGlzLmNoYXJ0QW5pbWF0aW9uUGhhc2U9ImluaXRpYWwiO2Zvcihjb25zdCBlIG9mIHRoaXMuc2VyaWVzKWUucmVzZXRBbmltYXRpb24odGhpcy5jaGFydEFuaW1hdGlvblBoYXNlKTtmb3IoY29uc3QgZSBvZiB0aGlzLmF4ZXMpZS5yZXNldEFuaW1hdGlvbih0aGlzLmNoYXJ0QW5pbWF0aW9uUGhhc2UpO3RoaXMuYW5pbWF0aW9uUmVjdD12b2lkIDAsbnVsbD09KGU9dGhpcy5hbmltYXRpb25NYW5hZ2VyKXx8ZS5yZXNldCgpfXNraXBBbmltYXRpb25zKCl7dGhpcy5hbmltYXRpb25NYW5hZ2VyLnNraXBDdXJyZW50QmF0Y2goKSx0aGlzLl9wZXJmb3JtVXBkYXRlU2tpcEFuaW1hdGlvbnM9ITB9ZGVzdHJveShlKXtpZih0aGlzLmRlc3Ryb3llZClyZXR1cm47Y29uc3QgdD1udWxsPT1lP3ZvaWQgMDplLmtlZXBUcmFuc2ZlcmFibGVSZXNvdXJjZXM7bGV0IGk7dGhpcy5wZXJmb3JtVXBkYXRlVHlwZT03LHRoaXMuX2Rlc3Ryb3lGbnMuZm9yRWFjaChlPT5lKCkpLHRoaXMucHJvY2Vzc29ycy5mb3JFYWNoKGU9PmUuZGVzdHJveSgpKSx0aGlzLnRvb2x0aXBNYW5hZ2VyLmRlc3Ryb3koKSx0aGlzLnRvb2x0aXAuZGVzdHJveSgpLHRoaXMubGVnZW5kcy5mb3JFYWNoKGU9PmUuZGVzdHJveSgpKSx0aGlzLmxlZ2VuZHMuY2xlYXIoKSx0aGlzLm92ZXJsYXlzLmRlc3Ryb3koKSxNbC51bm9ic2VydmUodGhpcy5lbGVtZW50KTtmb3IoY29uc3QgZSBvZiB0aGlzLm1vZHVsZXMudmFsdWVzKCkpbnVsbD09ZXx8ZS5kZXN0cm95KCk7cmV0dXJuIHRoaXMubW9kdWxlcy5jbGVhcigpLHRoaXMucmVnaW9uTWFuYWdlci5kZXN0cm95KCksdGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIuZGVzdHJveSgpLHRoaXMuYW5pbWF0aW9uTWFuYWdlci5zdG9wKCksdGhpcy5hbmltYXRpb25NYW5hZ2VyLmRlc3Ryb3koKSx0aGlzLmNoYXJ0RXZlbnRNYW5hZ2VyLmRlc3Ryb3koKSx0aGlzLmhpZ2hsaWdodE1hbmFnZXIuZGVzdHJveSgpLHRoaXMuem9vbU1hbmFnZXIuZGVzdHJveSgpLHQ/KHRoaXMuc2NlbmUuc3RyaXAoKSxpPXtjb250YWluZXI6dGhpcy5jb250YWluZXIsc2NlbmU6dGhpcy5zY2VuZSxlbGVtZW50OnRoaXMuZWxlbWVudH0pOih0aGlzLnNjZW5lLmRlc3Ryb3koKSx0aGlzLmNvbnRhaW5lcj12b2lkIDApLHRoaXMuZGVzdHJveVNlcmllcyh0aGlzLnNlcmllcyksdGhpcy5zZXJpZXNMYXllck1hbmFnZXIuZGVzdHJveSgpLHRoaXMuYXhlcy5mb3JFYWNoKGU9PmUuZGVzdHJveSgpKSx0aGlzLmF4ZXM9W10sdGhpcy5jYWxsYmFja0NhY2hlLmludmFsaWRhdGVDYWNoZSgpLHRoaXMuYW5pbWF0aW9uUmVjdD12b2lkIDAsdGhpcy5hbmltYXRpb25NYW5hZ2VyLnJlc2V0KCksdGhpcy5zeW5jTWFuYWdlci5kZXN0cm95KCksdGhpcy5kZXN0cm95ZWQ9ITAsT2JqZWN0LmZyZWV6ZSh0aGlzKSxpfXJlc2V0UG9pbnRlcihlPSExKXtlfHx0aGlzLnRvb2x0aXBNYW5hZ2VyLnJlbW92ZVRvb2x0aXAodGhpcy5pZCksdGhpcy5oaWdobGlnaHRNYW5hZ2VyLnVwZGF0ZUhpZ2hsaWdodCh0aGlzLmlkKSx0aGlzLmxhc3RJbnRlcmFjdGlvbkV2ZW50PXZvaWQgMH1yZXF1ZXN0RmFjdG9yeVVwZGF0ZShlKXt0aGlzLmRlc3Ryb3llZHx8KHRoaXMuX3BlbmRpbmdGYWN0b3J5VXBkYXRlc0NvdW50KyssdGhpcy51cGRhdGVNdXRleC5hY3F1aXJlKCgpPT53KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7dGhpcy5kZXN0cm95ZWR8fCh5aWVsZCBlKHRoaXMpLHRoaXMuZGVzdHJveWVkfHx0aGlzLl9wZW5kaW5nRmFjdG9yeVVwZGF0ZXNDb3VudC0tKX0pKSkpfXVwZGF0ZShlPTAsdCl7dmFyIGkscztjb25zdHtmb3JjZU5vZGVEYXRhUmVmcmVzaDpyPSExLHNraXBBbmltYXRpb25zOm8sc2VyaWVzVG9VcGRhdGU6bj10aGlzLnNlcmllcyxuZXdBbmltYXRpb25CYXRjaDphfT1udWxsIT10P3Q6e307ciYmdGhpcy5zZXJpZXMuZm9yRWFjaChlPT5lLm1hcmtOb2RlRGF0YURpcnR5KCkpO2Zvcihjb25zdCBlIG9mIG4pdGhpcy5zZXJpZXNUb1VwZGF0ZS5hZGQoZSk7aWYobyYmKHRoaXMuYW5pbWF0aW9uTWFuYWdlci5za2lwQ3VycmVudEJhdGNoKCksdGhpcy5fcGVyZm9ybVVwZGF0ZVNraXBBbmltYXRpb25zPSEwKSxhJiZ0aGlzLmFuaW1hdGlvbk1hbmFnZXIuaXNBY3RpdmUoKSYmKHRoaXMuX3BlcmZvcm1VcGRhdGVTa2lwQW5pbWF0aW9ucz0hMCksdGhpcy5fc2tpcFN5bmM9bnVsbCE9KGk9bnVsbD09dD92b2lkIDA6dC5za2lwU3luYykmJmksdGhpcy5kZWJ1Zy5jaGVjaygpKXtsZXQgdD1udWxsIT0ocz0obmV3IEVycm9yKS5zdGFjayk/czoiPHVua25vd24+Ijt0PXQucmVwbGFjZSgvXChbXildKi9nLCIiKSx0aGlzLnVwZGF0ZVJlcXVlc3RvcnNbdF09ZX1lPHRoaXMucGVyZm9ybVVwZGF0ZVR5cGUmJih0aGlzLnBlcmZvcm1VcGRhdGVUeXBlPWUsdGhpcy5wZXJmb3JtVXBkYXRlVHJpZ2dlci5zY2hlZHVsZShudWxsPT10P3ZvaWQgMDp0LmJhY2tPZmZNcykpfXBlcmZvcm1VcGRhdGUoZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHtwZXJmb3JtVXBkYXRlVHlwZTp0LGV4dHJhRGVidWdTdGF0czppfT10aGlzLHM9Wy4uLnRoaXMuc2VyaWVzVG9VcGRhdGVdO3RoaXMucGVyZm9ybVVwZGF0ZVR5cGU9Nyx0aGlzLnNlcmllc1RvVXBkYXRlLmNsZWFyKCksMD09PXRoaXMudXBkYXRlU2hvcnRjdXRDb3VudCYmdDw2JiYodGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0YXJ0QmF0Y2godGhpcy5fcGVyZm9ybVVwZGF0ZVNraXBBbmltYXRpb25zKSx0aGlzLmFuaW1hdGlvbk1hbmFnZXIub25CYXRjaFN0b3AoKCk9PnRoaXMuY2hhcnRBbmltYXRpb25QaGFzZT0icmVhZHkiKSksdGhpcy5kZWJ1ZygiQ2hhcnQucGVyZm9ybVVwZGF0ZSgpIC0gc3RhcnQiLEZsW3RdKTtjb25zdCByPXtzdGFydDpwZXJmb3JtYW5jZS5ub3coKX07c3dpdGNoKHQpe2Nhc2UgMDpjYXNlIDE6eWllbGQgdGhpcy51cGRhdGVEYXRhKCksclsi4qyH77iPIl09cGVyZm9ybWFuY2Uubm93KCk7Y2FzZSAyOnlpZWxkIHRoaXMucHJvY2Vzc0RhdGEoKSx0aGlzLnJlc2V0UG9pbnRlcighMCksclsi7aC87b+tIl09cGVyZm9ybWFuY2Uubm93KCk7Y2FzZSAzOmlmKHRoaXMuY2hlY2tVcGRhdGVTaG9ydGN1dCgzKSlicmVhaztpZighdGhpcy5jaGVja0ZpcnN0QXV0b1NpemUocykpYnJlYWs7eWllbGQgdGhpcy5wcm9jZXNzTGF5b3V0KCksclsi4oyWIl09cGVyZm9ybWFuY2Uubm93KCk7Y2FzZSA0OmlmKHRoaXMuY2hlY2tVcGRhdGVTaG9ydGN1dCg0KSlicmVhaztjb25zdHtzZXJpZXNSZWN0OmV9PXRoaXM7eWllbGQgUHJvbWlzZS5hbGwocy5tYXAodD0+dC51cGRhdGUoe3Nlcmllc1JlY3Q6ZX0pKSksclsi7aC+7bSUIl09cGVyZm9ybWFuY2Uubm93KCk7Y2FzZSA1OmlmKHRoaXMuY2hlY2tVcGRhdGVTaG9ydGN1dCg1KSlicmVhaztjb25zdCBvPXRoaXMudG9vbHRpcE1hbmFnZXIuZ2V0VG9vbHRpcE1ldGEodGhpcy5pZCk7dDw9NCYmdm9pZCAwIT09byYmdGhpcy5oYW5kbGVQb2ludGVyKG8ubGFzdFBvaW50ZXJFdmVudCwhMCksclsi4oaWIl09cGVyZm9ybWFuY2Uubm93KCk7Y2FzZSA2OmlmKHRoaXMuY2hlY2tVcGRhdGVTaG9ydGN1dCg2KSlicmVhaztpLnVwZGF0ZVNob3J0Y3V0Q291bnQ9dGhpcy51cGRhdGVTaG9ydGN1dENvdW50LHlpZWxkIHRoaXMuc2NlbmUucmVuZGVyKHtkZWJ1Z1NwbGl0VGltZXM6cixleHRyYURlYnVnU3RhdHM6aX0pLHRoaXMuZXh0cmFEZWJ1Z1N0YXRzPXt9O2Nhc2UgNzp0aGlzLnVwZGF0ZVNob3J0Y3V0Q291bnQ9MCx0aGlzLnVwZGF0ZVJlcXVlc3RvcnM9e30sdGhpcy5fcGVyZm9ybVVwZGF0ZVNraXBBbmltYXRpb25zPSExLHRoaXMuYW5pbWF0aW9uTWFuYWdlci5lbmRCYXRjaCgpfXRoaXMudXBkYXRlU2VydmljZS5kaXNwYXRjaFVwZGF0ZUNvbXBsZXRlKHRoaXMuZ2V0TWluUmVjdCgpKTtjb25zdCBvPXBlcmZvcm1hbmNlLm5vdygpO3RoaXMuZGVidWcoIkNoYXJ0LnBlcmZvcm1VcGRhdGUoKSAtIGVuZCIse2NoYXJ0OnRoaXMsZHVyYXRpb25NczpNYXRoLnJvdW5kKDEwMCooby1yLnN0YXJ0KSkvMTAwLGNvdW50OmUscGVyZm9ybVVwZGF0ZVR5cGU6RmxbdF19KX0pKX1jaGVja1VwZGF0ZVNob3J0Y3V0KGUpe3JldHVybiB0aGlzLnVwZGF0ZVNob3J0Y3V0Q291bnQ+Mz8oTC53YXJuKCJleGNlZWRlZCB0aGUgbWF4aW11bSBudW1iZXIgb2Ygc2ltdWx0YW5lb3VzIHVwZGF0ZXMgKDQpLCBkaXNjYXJkaW5nIGNoYW5nZXMgYW5kIHJlbmRlcmluZyIsdGhpcy51cGRhdGVSZXF1ZXN0b3JzKSwhMSk6dGhpcy5wZXJmb3JtVXBkYXRlVHlwZTw9ZSYmKHRoaXMudXBkYXRlU2hvcnRjdXRDb3VudCsrLCEwKX1jaGVja0ZpcnN0QXV0b1NpemUoZSl7aWYodGhpcy5hdXRvU2l6ZSYmIXRoaXMuX2xhc3RBdXRvU2l6ZSl7Y29uc3QgdD10aGlzLl9wZXJmb3JtVXBkYXRlTm9SZW5kZXJDb3VudCsrLGk9MTAqcCh0LDIpO2lmKHQ8OClyZXR1cm4gdGhpcy51cGRhdGUoMyx7c2VyaWVzVG9VcGRhdGU6ZSxiYWNrT2ZmTXM6aX0pLHRoaXMuZGVidWcoIkNoYXJ0LmNoZWNrRmlyc3RBdXRvU2l6ZSgpIC0gYmFja2luZyBvZmYgdW50aWwgZmlyc3Qgc2l6ZSB1cGRhdGUiLGkpLCExO3RoaXMuZGVidWcoIkNoYXJ0LmNoZWNrRmlyc3RBdXRvU2l6ZSgpIC0gdGltZW91dCBmb3IgZmlyc3Qgc2l6ZSB1cGRhdGUuIil9cmV0dXJuIHRoaXMuX3BlcmZvcm1VcGRhdGVOb1JlbmRlckNvdW50PTAsITB9b25TZXJpZXNDaGFuZ2UoZSx0KXt2YXIgaSxzO2NvbnN0IHI9bnVsbCE9KGk9bnVsbD09dD92b2lkIDA6dC5maWx0ZXIodD0+IWUuaW5jbHVkZXModCkpKT9pOltdO3RoaXMuZGVzdHJveVNlcmllcyhyKSxudWxsPT0ocz10aGlzLnNlcmllc0xheWVyTWFuYWdlcil8fHMuc2V0U2VyaWVzQ291bnQoZS5sZW5ndGgpO2Zvcihjb25zdCBpIG9mIGUpe2lmKG51bGw9PXQ/dm9pZCAwOnQuaW5jbHVkZXMoaSkpY29udGludWU7bnVsbD09aS5yb290R3JvdXAucGFyZW50JiZ0aGlzLnNlcmllc0xheWVyTWFuYWdlci5yZXF1ZXN0R3JvdXAoaSk7Y29uc3QgZT10aGlzO2kuY2hhcnQ9e2dldCBtb2RlKCl7cmV0dXJuIGUubW9kZX0sZ2V0IGlzTWluaUNoYXJ0KCl7cmV0dXJuITF9LGdldCBzZXJpZXNSZWN0KCl7cmV0dXJuIGUuc2VyaWVzUmVjdH0scGxhY2VMYWJlbHM6KCk9PmUucGxhY2VMYWJlbHMoKX0saS5yZXNldEFuaW1hdGlvbih0aGlzLmNoYXJ0QW5pbWF0aW9uUGhhc2UpLHRoaXMuYWRkU2VyaWVzTGlzdGVuZXJzKGkpLGkuYWRkQ2hhcnRFdmVudExpc3RlbmVycygpfX1kZXN0cm95U2VyaWVzKGUpe251bGw9PWV8fGUuZm9yRWFjaChlPT57ZS5yZW1vdmVFdmVudExpc3RlbmVyKCJub2RlQ2xpY2siLHRoaXMub25TZXJpZXNOb2RlQ2xpY2spLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibm9kZURvdWJsZUNsaWNrIix0aGlzLm9uU2VyaWVzTm9kZURvdWJsZUNsaWNrKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImdyb3VwaW5nQ2hhbmdlZCIsdGhpcy5zZXJpZXNHcm91cGluZ0NoYW5nZWQpLGUuZGVzdHJveSgpLHRoaXMuc2VyaWVzTGF5ZXJNYW5hZ2VyLnJlbGVhc2VHcm91cChlKSxlLmNoYXJ0PXZvaWQgMH0pfWFkZFNlcmllc0xpc3RlbmVycyhlKXt0aGlzLmhhc0V2ZW50TGlzdGVuZXIoInNlcmllc05vZGVDbGljayIpJiZlLmFkZEV2ZW50TGlzdGVuZXIoIm5vZGVDbGljayIsdGhpcy5vblNlcmllc05vZGVDbGljayksdGhpcy5oYXNFdmVudExpc3RlbmVyKCJzZXJpZXNOb2RlRG91YmxlQ2xpY2siKSYmZS5hZGRFdmVudExpc3RlbmVyKCJub2RlRG91YmxlQ2xpY2siLHRoaXMub25TZXJpZXNOb2RlRG91YmxlQ2xpY2spLGUuYWRkRXZlbnRMaXN0ZW5lcigiZ3JvdXBpbmdDaGFuZ2VkIix0aGlzLnNlcmllc0dyb3VwaW5nQ2hhbmdlZCl9dXBkYXRlQWxsU2VyaWVzTGlzdGVuZXJzKCl7dGhpcy5zZXJpZXMuZm9yRWFjaChlPT57ZS5yZW1vdmVFdmVudExpc3RlbmVyKCJub2RlQ2xpY2siLHRoaXMub25TZXJpZXNOb2RlQ2xpY2spLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibm9kZURvdWJsZUNsaWNrIix0aGlzLm9uU2VyaWVzTm9kZURvdWJsZUNsaWNrKSx0aGlzLmFkZFNlcmllc0xpc3RlbmVycyhlKX0pfWFzc2lnblNlcmllc1RvQXhlcygpe3RoaXMuYXhlcy5mb3JFYWNoKGU9PntlLmJvdW5kU2VyaWVzPXRoaXMuc2VyaWVzLmZpbHRlcih0PT50LmF4ZXNbZS5kaXJlY3Rpb25dPT09ZSl9KX1hc3NpZ25BeGVzVG9TZXJpZXMoKXtjb25zdCBlPUFzKHRoaXMuYXhlcyxlPT5lLmRpcmVjdGlvbik7dGhpcy5zZXJpZXMuZm9yRWFjaCh0PT57dC5kaXJlY3Rpb25zLmZvckVhY2goaT0+e2NvbnN0IHM9ZVtpXTtpZighcylyZXR1cm4gdm9pZCBMLndhcm5PbmNlKGBubyBhdmFpbGFibGUgYXhpcyBmb3IgZGlyZWN0aW9uIFske2l9XTsgY2hlY2sgc2VyaWVzIGFuZCBheGVzIGNvbmZpZ3VyYXRpb24uYCk7Y29uc3Qgcj10LmdldEtleXMoaSksbz10aGlzLmZpbmRNYXRjaGluZ0F4aXMocyxyKTtvP3QuYXhlc1tpXT1vOkwud2Fybk9uY2UoYG5vIG1hdGNoaW5nIGF4aXMgZm9yIGRpcmVjdGlvbiBbJHtpfV0gYW5kIGtleXMgWyR7cn1dOyBjaGVjayBzZXJpZXMgYW5kIGF4ZXMgY29uZmlndXJhdGlvbi5gKX0pfSl9ZmluZE1hdGNoaW5nQXhpcyhlLHQpe2Zvcihjb25zdCBpIG9mIGUpe2lmKCFpLmtleXMubGVuZ3RoKXJldHVybiBpO2lmKHQpZm9yKGNvbnN0IGUgb2YgdClpZihpLmtleXMuaW5jbHVkZXMoZSkpcmV0dXJuIGl9fXJhd1Jlc2l6ZShlKXt2YXIgdDtsZXR7d2lkdGg6aSxoZWlnaHQ6c309ZTtpZihpPU1hdGguZmxvb3IoaSkscz1NYXRoLmZsb29yKHMpLCF0aGlzLmF1dG9TaXplKXJldHVybjtpZigwPT09aSYmMD09PXMpcmV0dXJuO2NvbnN0W3I9MCxvPTBdPW51bGwhPSh0PXRoaXMuX2xhc3RBdXRvU2l6ZSk/dDpbXTtyPT09aSYmbz09PXN8fCh0aGlzLl9sYXN0QXV0b1NpemU9W2ksc10sdGhpcy5yZXNpemUodm9pZCAwLHZvaWQgMCwiU2l6ZU1vbml0b3IiKSl9cmVzaXplKGUsdCxpKXt2YXIgcyxyLG8sbjtpZihudWxsIT1lfHwoZT1udWxsIT0ocj10aGlzLndpZHRoKT9yOnRoaXMuYXV0b1NpemU/bnVsbD09KHM9dGhpcy5fbGFzdEF1dG9TaXplKT92b2lkIDA6c1swXTp0aGlzLnNjZW5lLmNhbnZhcy53aWR0aCksbnVsbCE9dHx8KHQ9bnVsbCE9KG49dGhpcy5oZWlnaHQpP246dGhpcy5hdXRvU2l6ZT9udWxsPT0obz10aGlzLl9sYXN0QXV0b1NpemUpP3ZvaWQgMDpvWzFdOnRoaXMuc2NlbmUuY2FudmFzLmhlaWdodCksdGhpcy5kZWJ1ZygiQ2hhcnQucmVzaXplKCkgZnJvbSAiK2kse3dpZHRoOmUsaGVpZ2h0OnQsc3RhY2s6KG5ldyBFcnJvcikuc3RhY2t9KSxlJiZ0JiZqZShlKSYmamUodCkmJnRoaXMuc2NlbmUucmVzaXplKGUsdCkpe3RoaXMucmVzZXRQb2ludGVyKCksdGhpcy5hbmltYXRpb25NYW5hZ2VyLnJlc2V0KCk7bGV0IGU9ITA7dGhpcy5hdXRvU2l6ZSYmdGhpcy5fZmlyc3RBdXRvU2l6ZSYmKGU9ITEsdGhpcy5fZmlyc3RBdXRvU2l6ZT0hMSksdGhpcy51cGRhdGUoMyx7Zm9yY2VOb2RlRGF0YVJlZnJlc2g6ITAsc2tpcEFuaW1hdGlvbnM6ZX0pfX11cGRhdGVEYXRhKCl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXt0aGlzLnNlcmllcy5mb3JFYWNoKGU9PmUuc2V0Q2hhcnREYXRhKHRoaXMuZGF0YSkpO2NvbnN0IGU9QXJyYXkuZnJvbSh0aGlzLm1vZHVsZXMudmFsdWVzKCksZT0+e3ZhciB0O3JldHVybiBudWxsPT0odD1lLnVwZGF0ZURhdGEpP3ZvaWQgMDp0LmNhbGwoZSx7ZGF0YTp0aGlzLmRhdGF9KX0pO3lpZWxkIFByb21pc2UuYWxsKGUpfSkpfXByb2Nlc3NEYXRhKCl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtpZih0aGlzLnNlcmllcy5zb21lKGU9PmUuY2FuSGF2ZUF4ZXMpKXt0aGlzLmFzc2lnbkF4ZXNUb1NlcmllcygpLHRoaXMuYXNzaWduU2VyaWVzVG9BeGVzKCk7Y29uc3QgZT10aGlzLm1vZHVsZXMuZ2V0KCJzeW5jIik7KG51bGw9PWU/dm9pZCAwOmUuZW5hYmxlZCkmJmUuc3luY0F4ZXModGhpcy5fc2tpcFN5bmMpfWNvbnN0IGU9bmV3IFdsKHRoaXMubW9kZSksdD10aGlzLnNlcmllcy5tYXAodD0+dC5wcm9jZXNzRGF0YShlKSksaT1BcnJheS5mcm9tKHRoaXMubW9kdWxlcy52YWx1ZXMoKSx0PT57dmFyIGk7cmV0dXJuIG51bGw9PShpPXQucHJvY2Vzc0RhdGEpP3ZvaWQgMDppLmNhbGwodCx7ZGF0YUNvbnRyb2xsZXI6ZX0pfSk7ZS5leGVjdXRlKCkseWllbGQgUHJvbWlzZS5hbGwoWy4uLnQsLi4uaV0pLHlpZWxkIHRoaXMudXBkYXRlTGVnZW5kKCl9KSl9cGxhY2VMYWJlbHMoKXtjb25zdCBlPVtdLHQ9W107Zm9yKGNvbnN0IHMgb2YgdGhpcy5zZXJpZXMpe2lmKCFzLnZpc2libGUpY29udGludWU7Y29uc3Qgcj1zLmdldExhYmVsRGF0YSgpO251bGwhPShpPW51bGw9PXI/dm9pZCAwOnJbMF0pJiYib2JqZWN0Ij09dHlwZW9mIGkucG9pbnQmJiJvYmplY3QiPT10eXBlb2YgaS5sYWJlbCYmKHQucHVzaChyKSxlLnB1c2gocykpfXZhciBpO2NvbnN0e3Nlcmllc1JlY3Q6c309dGhpcyx7dG9wOnIscmlnaHQ6byxib3R0b206bixsZWZ0OmF9PXRoaXMuc2VyaWVzQXJlYS5wYWRkaW5nLGw9cyYmdC5sZW5ndGg+MD9mdW5jdGlvbihlLHQsaT01KXtjb25zdCBzPVtdO2U9ZS5tYXAoZT0+ZS5zbGljZSgpLnNvcnQoKGUsdCk9PnQucG9pbnQuc2l6ZS1lLnBvaW50LnNpemUpKTtmb3IobGV0IGw9MDtsPGUubGVuZ3RoO2wrKyl7Y29uc3QgZD1zW2xdPVtdLGM9ZVtsXTtpZigobnVsbD09Yz92b2lkIDA6Yy5sZW5ndGgpJiZjWzBdLmxhYmVsKWZvcihsZXQgbD0wLGg9Yy5sZW5ndGg7bDxoO2wrKyl7Y29uc3QgaD1jW2xdLHU9aC5sYWJlbCxwPS41KmgucG9pbnQuc2l6ZSxnPWgucG9pbnQueC0uNSp1LndpZHRoLG09aC5wb2ludC55LXAtdS5oZWlnaHQtaSx7d2lkdGg6ZixoZWlnaHQ6dn09dTtpZighKCF0fHwobj1tLGE9diwobz1nKStmPChyPXQpLngrci53aWR0aCYmbz5yLngmJm4+ci55JiZuK2E8ci55K3IuaGVpZ2h0KSkpY29udGludWU7aWYoZS5zb21lKGU9PmUuc29tZShlPT5IYShlLnBvaW50LGcsbSxmLHYpKSkpY29udGludWU7cy5zb21lKGU9PmUuc29tZShlPT5XYShlLGcsbSxmLHYpKSl8fGQucHVzaCh7aW5kZXg6bCx0ZXh0OnUudGV4dCx4OmcseTptLHdpZHRoOmYsaGVpZ2h0OnYsZGF0dW06aH0pfX12YXIgcixvLG4sYTtyZXR1cm4gc30odCx7eDotYSx5Oi1yLHdpZHRoOnMud2lkdGgrYStvLGhlaWdodDpzLmhlaWdodCtyK259KTpbXTtyZXR1cm4gbmV3IE1hcChsLm1hcCgodCxpKT0+W2VbaV0sdF0pKX11cGRhdGVMZWdlbmQoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3RoaXMubGVnZW5kcy5mb3JFYWNoKChlLHQpPT57Y29uc3QgaT10aGlzLnNlcmllcy5maWx0ZXIoZT0+ZS5wcm9wZXJ0aWVzLnNob3dJbkxlZ2VuZCkuZmxhdE1hcChlPT5lLmdldExlZ2VuZERhdGEodCkpO2kuZXZlcnkoZT0+ImNhdGVnb3J5Ij09PWUubGVnZW5kVHlwZSkmJiJpbnRlZ3JhdGVkIiE9PXRoaXMubW9kZSYmdGhpcy52YWxpZGF0ZUNhdGVnb3J5TGVnZW5kRGF0YShpKSxlLmRhdGE9aX0pfSkpfXZhbGlkYXRlQ2F0ZWdvcnlMZWdlbmREYXRhKGUpe2NvbnN0IHQ9e307ZS5mb3JFYWNoKGU9Pnt2YXIgaSxzLHI7Y29uc3Qgbz1udWxsPT0oaT10aGlzLnNlcmllcy5maW5kKHQ9PnQuaWQ9PT1lLnNlcmllc0lkKSk/dm9pZCAwOmkudHlwZTtvJiYobnVsbCE9dFtvXXx8KHRbb109e30pLG51bGwhPShzPXRbb10pW3I9ZS5sYWJlbC50ZXh0XXx8KHNbcl09bmV3IFNldCksbnVsbCE9ZS5tYXJrZXIuZmlsbCYmdFtvXVtlLmxhYmVsLnRleHRdLmFkZChlLm1hcmtlci5maWxsKSl9KTtmb3IoY29uc3QgZSBvZiBPYmplY3QudmFsdWVzKHQpKWZvcihjb25zdFt0LGldb2YgT2JqZWN0LmVudHJpZXMoZSkpaS5zaXplPjEmJkwud2Fybk9uY2UoYGxlZ2VuZCBpdGVtICcke3R9JyBoYXMgbXVsdGlwbGUgZmlsbCBjb2xvcnMsIHRoaXMgbWF5IGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3VyLmApfXByb2Nlc3NMYXlvdXQoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciBlO2NvbnN0IHQ9dGhpcy5hbmltYXRpb25SZWN0O3lpZWxkIHRoaXMucGVyZm9ybUxheW91dCgpLHQmJiEobnVsbD09KGU9dGhpcy5hbmltYXRpb25SZWN0KT92b2lkIDA6ZS5lcXVhbHModCkpJiZ0aGlzLmFuaW1hdGlvbk1hbmFnZXIuc2tpcEN1cnJlbnRCYXRjaCgpLHRoaXMuZGVidWcoIkNoYXJ0LnBlcmZvcm1VcGRhdGUoKSAtIHNlcmllc1JlY3QiLHRoaXMuc2VyaWVzUmVjdCl9KSl9cGVyZm9ybUxheW91dCgpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7dGhpcy5zY2VuZS5yb290JiYodGhpcy5zY2VuZS5yb290LnZpc2libGU9ITApO2NvbnN0e3dpZHRoOmUsaGVpZ2h0OnR9PXRoaXMuc2NlbmU7bGV0IGk9e3Nocmlua1JlY3Q6bmV3IG9yKDAsMCxlLHQpfTtpPXRoaXMubGF5b3V0U2VydmljZS5kaXNwYXRjaFBlcmZvcm1MYXlvdXQoInN0YXJ0LWxheW91dCIsaSksaT10aGlzLmxheW91dFNlcnZpY2UuZGlzcGF0Y2hQZXJmb3JtTGF5b3V0KCJiZWZvcmUtc2VyaWVzIixpKTtjb25zdCBzPUFycmF5LmZyb20odGhpcy5tb2R1bGVzLnZhbHVlcygpLGU9PncodGhpcyxudWxsLChmdW5jdGlvbiooKXt2YXIgdDtudWxsIT1lLnBlcmZvcm1MYXlvdXQmJihpPXlpZWxkIG51bGw9PSh0PWUucGVyZm9ybUxheW91dCk/dm9pZCAwOnQuY2FsbChlLGkpKX0pKSk7cmV0dXJuIHlpZWxkIFByb21pc2UuYWxsKHMpLGkuc2hyaW5rUmVjdH0pKX1waWNrU2VyaWVzTm9kZShlLHQsaSl7dmFyIHMscjtjb25zdCBvPXBlcmZvcm1hbmNlLm5vdygpLG49dD9bMF06dm9pZCAwLGE9Wy4uLnRoaXMuc2VyaWVzXS5yZXZlcnNlKCk7bGV0IGw7Zm9yKGNvbnN0IHQgb2YgYSl7aWYoIXQudmlzaWJsZXx8IXQucm9vdEdyb3VwLnZpc2libGUpY29udGludWU7Y29uc3R7bWF0Y2g6cixkaXN0YW5jZTpvfT1udWxsIT0ocz10LnBpY2tOb2RlKGUsbikpP3M6e307aWYociYmbnVsbCE9byYmKCghbHx8bC5kaXN0YW5jZT5vKSYmbzw9KG51bGwhPWk/aToxLzApJiYobD17c2VyaWVzOnQsZGlzdGFuY2U6byxkYXR1bTpyfSksMD09PW8pKWJyZWFrfXJldHVybiB0aGlzLmV4dHJhRGVidWdTdGF0cy5waWNrU2VyaWVzTm9kZT1NYXRoLnJvdW5kKChudWxsIT0ocj10aGlzLmV4dHJhRGVidWdTdGF0cy5waWNrU2VyaWVzTm9kZSk/cjowKSsocGVyZm9ybWFuY2Uubm93KCktbykpLGx9b25Nb3VzZU1vdmUoZSl7dGhpcy5sYXN0SW50ZXJhY3Rpb25FdmVudD1lLHRoaXMucG9pbnRlclNjaGVkdWxlci5zY2hlZHVsZSgpLHRoaXMuZXh0cmFEZWJ1Z1N0YXRzLm1vdXNlWD1lLm9mZnNldFgsdGhpcy5leHRyYURlYnVnU3RhdHMubW91c2VZPWUub2Zmc2V0WSx0aGlzLnVwZGF0ZSg2KX1vbkxlYXZlKGUpe3RoaXMudG9vbHRpcC5wb2ludGVyTGVmdE9udG9Ub29sdGlwKGUpfHwodGhpcy5yZXNldFBvaW50ZXIoKSx0aGlzLnVwZGF0ZSg2KSl9b25Db250ZXh0TWVudShlKXt0aGlzLnRvb2x0aXBNYW5hZ2VyLnJlbW92ZVRvb2x0aXAodGhpcy5pZCk7Y29uc3R7RGVmYXVsdDp0LENvbnRleHRNZW51Oml9PVpsO3RoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyLmdldFN0YXRlKCkmKHR8aSkmJnRoaXMuY2hlY2tTZXJpZXNOb2RlUmFuZ2UoZSwoZSx0KT0+e3RoaXMuaGlnaGxpZ2h0TWFuYWdlci51cGRhdGVIaWdobGlnaHQodGhpcy5pZCx0KX0pfWhhbmRsZVBvaW50ZXIoZSx0KXtpZig4IT09dGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIuZ2V0U3RhdGUoKSlyZXR1cm47Y29uc3R7bGFzdFBpY2s6aSxob3ZlclJlY3Q6c309dGhpcyx7b2Zmc2V0WDpyLG9mZnNldFk6b309ZSxuPShlPSExKT0+e2kmJnRoaXMucmVzZXRQb2ludGVyKGUpfTt0JiZ0aGlzLmFuaW1hdGlvbk1hbmFnZXIuaXNBY3RpdmUoKT9uKCk6KG51bGw9PXM/dm9pZCAwOnMuY29udGFpbnNQb2ludChyLG8pKT8odGhpcy5oYW5kbGVQb2ludGVyVG9vbHRpcChlLG4pLHRoaXMuaGFuZGxlUG9pbnRlck5vZGUoZSkpOm4oKX1oYW5kbGVQb2ludGVyVG9vbHRpcChlLHQpe2NvbnN0e2xhc3RQaWNrOmksdG9vbHRpcDpzfT10aGlzLHtyYW5nZTpyfT1zLHtvZmZzZXRYOm8sb2Zmc2V0WTpufT1lO2xldCBhO2plKHIpJiYoYT1yKTtjb25zdCBsPXRoaXMucGlja1Nlcmllc05vZGUoe3g6byx5Om59LCJleGFjdCI9PT1yLGEpO2lmKCFsKXJldHVybiB0aGlzLnRvb2x0aXBNYW5hZ2VyLnJlbW92ZVRvb2x0aXAodGhpcy5pZCksdm9pZCgidG9vbHRpcCI9PT10aGlzLmhpZ2hsaWdodC5yYW5nZSYmdCghMCkpO2NvbnN0IGQ9Im5vZGUiPT09dGhpcy5oaWdobGlnaHQucmFuZ2V8fCFpfHxpIT09bC5kYXR1bTtsZXQgYztkJiYoYz1sLnNlcmllcy5nZXRUb29sdGlwSHRtbChsLmRhdHVtKSwidG9vbHRpcCI9PT10aGlzLmhpZ2hsaWdodC5yYW5nZSYmdGhpcy5oaWdobGlnaHRNYW5hZ2VyLnVwZGF0ZUhpZ2hsaWdodCh0aGlzLmlkLGwuZGF0dW0pKTtjb25zdCBoPW51bGwhPWEsdT10aGlzLnRvb2x0aXAuZW5hYmxlZCYmbC5zZXJpZXMucHJvcGVydGllcy50b29sdGlwLmVuYWJsZWQscD0iZXhhY3QiPT09ciYmMD09PWwuZGlzdGFuY2UsZz11JiYoIm5lYXJlc3QiPT09cnx8aHx8cCkmJighZHx8dm9pZCAwIT09YyksbT1nZC5tYWtlVG9vbHRpcE1ldGEoZSxsLmRhdHVtKTtnJiZ0aGlzLnRvb2x0aXBNYW5hZ2VyLnVwZGF0ZVRvb2x0aXAodGhpcy5pZCxtLGMpfWhhbmRsZVBvaW50ZXJOb2RlKGUpe3RoaXMuY2hlY2tTZXJpZXNOb2RlUmFuZ2UoZSwoZSx0KT0+eyhlLmhhc0V2ZW50TGlzdGVuZXIoIm5vZGVDbGljayIpfHxlLmhhc0V2ZW50TGlzdGVuZXIoIm5vZGVEb3VibGVDbGljayIpKSYmdGhpcy5jdXJzb3JNYW5hZ2VyLnVwZGF0ZUN1cnNvcigiY2hhcnQiLCJwb2ludGVyIiksIm5vZGUiPT09dGhpcy5oaWdobGlnaHQucmFuZ2UmJnRoaXMuaGlnaGxpZ2h0TWFuYWdlci51cGRhdGVIaWdobGlnaHQodGhpcy5pZCx0KX0pfHwodGhpcy5jdXJzb3JNYW5hZ2VyLnVwZGF0ZUN1cnNvcigiY2hhcnQiKSwibm9kZSI9PT10aGlzLmhpZ2hsaWdodC5yYW5nZSYmdGhpcy5oaWdobGlnaHRNYW5hZ2VyLnVwZGF0ZUhpZ2hsaWdodCh0aGlzLmlkKSl9b25DbGljayhlKXt0aGlzLmNoZWNrU2VyaWVzTm9kZUNsaWNrKGUpP3RoaXMudXBkYXRlKDQpOnRoaXMuZmlyZUV2ZW50KHt0eXBlOiJjbGljayIsZXZlbnQ6ZS5zb3VyY2VFdmVudH0pfW9uRG91YmxlQ2xpY2soZSl7dGhpcy5jaGVja1Nlcmllc05vZGVEb3VibGVDbGljayhlKT90aGlzLnVwZGF0ZSg0KTp0aGlzLmZpcmVFdmVudCh7dHlwZToiZG91YmxlQ2xpY2siLGV2ZW50OmUuc291cmNlRXZlbnR9KX1jaGVja1Nlcmllc05vZGVDbGljayhlKXtyZXR1cm4gdGhpcy5jaGVja1Nlcmllc05vZGVSYW5nZShlLCh0LGkpPT50LmZpcmVOb2RlQ2xpY2tFdmVudChlLnNvdXJjZUV2ZW50LGkpKX1jaGVja1Nlcmllc05vZGVEb3VibGVDbGljayhlKXtyZXR1cm4gdGhpcy5jaGVja1Nlcmllc05vZGVSYW5nZShlLCh0LGkpPT50LmZpcmVOb2RlRG91YmxlQ2xpY2tFdmVudChlLnNvdXJjZUV2ZW50LGkpKX1jaGVja1Nlcmllc05vZGVSYW5nZShlLHQpe2NvbnN0IGk9dGhpcy5waWNrU2VyaWVzTm9kZSh7eDplLm9mZnNldFgseTplLm9mZnNldFl9LCExKSxzPW51bGw9PWk/dm9pZCAwOmkuZGF0dW0scj1udWxsPT1zP3ZvaWQgMDpzLnNlcmllcy5wcm9wZXJ0aWVzLm5vZGVDbGlja1JhbmdlO2xldCBvO2plKHIpJiYobz1yKTtsZXQgbj10aGlzLnBpY2tTZXJpZXNOb2RlKHt4OmUub2Zmc2V0WCx5OmUub2Zmc2V0WX0sITApO2lmKG4/dGhpcy5oaWdobGlnaHRNYW5hZ2VyLnVwZGF0ZVBpY2tlZCh0aGlzLmlkLG4uZGF0dW0pOnRoaXMuaGlnaGxpZ2h0TWFuYWdlci51cGRhdGVQaWNrZWQodGhpcy5pZCkscyYmIm5lYXJlc3QiPT09cilyZXR1cm4gdChzLnNlcmllcyxzKSwhMDtpZigiZXhhY3QiIT09ciYmKG49dGhpcy5waWNrU2VyaWVzTm9kZSh7eDplLm9mZnNldFgseTplLm9mZnNldFl9LCExLG8pKSwhbilyZXR1cm4hMTtjb25zdCBhPW51bGwhPW8sbD0iZXhhY3QiPT09ciYmMD09PW4uZGlzdGFuY2U7cmV0dXJuISghYSYmIWwpJiYodChuLnNlcmllcyxuLmRhdHVtKSwhMCl9Y2hhbmdlSGlnaGxpZ2h0RGF0dW0oZSl7dmFyIHQsaTtjb25zdCBzPW5ldyBTZXQse3NlcmllczpyLGRhdHVtOm99PW51bGwhPSh0PWUuY3VycmVudEhpZ2hsaWdodCk/dDp7fSx7c2VyaWVzOm4sZGF0dW06YX09bnVsbCE9KGk9ZS5wcmV2aW91c0hpZ2hsaWdodCk/aTp7fTtuJiZzLmFkZChuKSxyJiZzLmFkZChyKSwobnVsbD09bj92b2lkIDA6bi5wcm9wZXJ0aWVzLmN1cnNvcikmJmEmJnRoaXMuY3Vyc29yTWFuYWdlci51cGRhdGVDdXJzb3Iobi5pZCksKG51bGw9PXI/dm9pZCAwOnIucHJvcGVydGllcy5jdXJzb3IpJiZvJiZ0aGlzLmN1cnNvck1hbmFnZXIudXBkYXRlQ3Vyc29yKHIuaWQsci5wcm9wZXJ0aWVzLmN1cnNvciksdGhpcy5sYXN0UGljaz1lLmN1cnJlbnRIaWdobGlnaHQ7bnVsbD09cnx8bnVsbD09bj90aGlzLnVwZGF0ZSg0KTp0aGlzLnVwZGF0ZSg0LHtzZXJpZXNUb1VwZGF0ZTpzfSl9d2FpdEZvclVwZGF0ZShlPTVlMyl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdCB0PXBlcmZvcm1hbmNlLm5vdygpO2Zvcih0aGlzLl9wZW5kaW5nRmFjdG9yeVVwZGF0ZXNDb3VudD4wJiYoeWllbGQgdGhpcy51cGRhdGVNdXRleC53YWl0Rm9yQ2xlYXJBY3F1aXJlUXVldWUoKSk7NyE9PXRoaXMucGVyZm9ybVVwZGF0ZVR5cGU7KXtpZihwZXJmb3JtYW5jZS5ub3coKS10PmUpdGhyb3cgbmV3IEVycm9yKCJ3YWl0Rm9yVXBkYXRlKCkgdGltZW91dCByZWFjaGVkLiIpO3lpZWxkIFRsKDUpfXlpZWxkIHRoaXMudXBkYXRlTXV0ZXgud2FpdEZvckNsZWFyQWNxdWlyZVF1ZXVlKCl9KSl9Z2V0TWluUmVjdCgpe2NvbnN0IGU9dGhpcy5zZXJpZXMubWFwKGU9PmUuZ2V0TWluUmVjdCgpKS5maWx0ZXIoZT0+dm9pZCAwIT09ZSk7aWYoZS5sZW5ndGgpcmV0dXJuIG5ldyBvcigwLDAsZS5yZWR1Y2UoKGUsdCk9Pk1hdGgubWF4KGUsdC53aWR0aCksMCksZS5yZWR1Y2UoKGUsdCk9Pk1hdGgubWF4KGUsdC5oZWlnaHQpLDApKX1maWx0ZXJNaW5pQ2hhcnRTZXJpZXMoZSl7cmV0dXJuIG51bGwhPWU/ZS5maWx0ZXIoZT0+ITEhPT1lLnNob3dJbk1pbmlDaGFydCk6ZX1hcHBseU9wdGlvbnMoZSl7dmFyIHQsaSxzLHIsbyxuO2NvbnN0IGE9dGhpcy5wcm9jZXNzZWRPcHRpb25zLGw9ZS5kaWZmT3B0aW9ucyhhKSxkPWUudXNlck9wdGlvbnM7aWYobnVsbD09bClyZXR1cm47WmMoIkFnQ2hhcnRWMi51cGRhdGVEZWx0YSgpIC0gYXBwbHlpbmcgZGVsdGEiLGwpO2NvbnN0IGM9WGUobCxhKSxoPXRoaXMuYXBwbHlNb2R1bGVzKGMpLHU9WyJ0eXBlIiwiZGF0YSIsInNlcmllcyIsImxpc3RlbmVycyIsInRoZW1lIiwibGVnZW5kLmxpc3RlbmVycyIsIm5hdmlnYXRvci5taW5pQ2hhcnQubGFiZWwiXTsodXQobCl8fGd0KGwpKSYmdS5wdXNoKCJheGVzIiksbC5saXN0ZW5lcnMmJnRoaXMucmVnaXN0ZXJMaXN0ZW5lcnModGhpcyxsLmxpc3RlbmVycyksdGhpcy5hcHBseU9wdGlvblZhbHVlcyh0aGlzLGwse3NraXA6dX0pO2xldCBwPSExLGc9Im5vLW9wIjtsLnNlcmllcyYmbC5zZXJpZXMubGVuZ3RoPjAmJihnPXRoaXMuYXBwbHlTZXJpZXModGhpcyxsLnNlcmllcyxudWxsPT1hP3ZvaWQgMDphLnNlcmllcykscD0hMCksInJlcGxhY2VkIj09PWcmJnRoaXMucmVzZXRBbmltYXRpb25zKCksdGhpcy5hcHBseUF4ZXModGhpcyxjLGEsZykmJihwPSEwKTtjb25zdCBtPSEhbC5kYXRhfHwiZGF0YS1jaGFuZ2UiPT09Z3x8InJlcGxhY2VkIj09PWcsZj1XdCx2PU9iamVjdC52YWx1ZXMoZikuc29tZShlPT5udWxsIT1sW2VdKSxDPW51bGwhPWwudGl0bGUmJm51bGwhPWwuc3VidGl0bGU7cD1wfHxtfHx2fHxDLGwuZGF0YSYmKHRoaXMuZGF0YT1sLmRhdGEpLChudWxsPT0odD1sLmxlZ2VuZCk/dm9pZCAwOnQubGlzdGVuZXJzKSYmT2JqZWN0LmFzc2lnbih0aGlzLmxlZ2VuZC5saXN0ZW5lcnMsbC5sZWdlbmQubGlzdGVuZXJzKSxsLmxpc3RlbmVycyYmdGhpcy51cGRhdGVBbGxTZXJpZXNMaXN0ZW5lcnMoKSx0aGlzLmNoYXJ0T3B0aW9ucz1lLHRoaXMucHJvY2Vzc2VkT3B0aW9ucz1jLHRoaXMudXNlck9wdGlvbnM9WGUoZCx0aGlzLnVzZXJPcHRpb25zKTtjb25zdCB5PXRoaXMubW9kdWxlcy5nZXQoIm5hdmlnYXRvciIpLFM9dGhpcy5tb2R1bGVzLmdldCgiem9vbSIpOyhudWxsPT15P3ZvaWQgMDp5LmVuYWJsZWQpfHwobnVsbD09Uz92b2lkIDA6Uy5lbmFibGVkKXx8dGhpcy56b29tTWFuYWdlci51cGRhdGVab29tKCk7Y29uc3Qgdz1udWxsPT15P3ZvaWQgMDp5Lm1pbmlDaGFydDtpZighMD09PShudWxsPT13P3ZvaWQgMDp3LmVuYWJsZWQpJiZudWxsIT0obnVsbD09bD92b2lkIDA6bC5zZXJpZXMpKXtjb25zdCBlPXRoaXMuYXBwbHlTZXJpZXModyx0aGlzLmZpbHRlck1pbmlDaGFydFNlcmllcyhsLnNlcmllcyksdGhpcy5maWx0ZXJNaW5pQ2hhcnRTZXJpZXMobnVsbD09YT92b2lkIDA6YS5zZXJpZXMpKTt0aGlzLmFwcGx5QXhlcyh3LGwsYSxlLFsiYXhlc1tdLnRpY2siLCJheGVzW10udGhpY2tuZXNzIiwiYXhlc1tdLnRpdGxlIiwiYXhlc1tdLmNyb3NzaGFpciIsImF4ZXNbXS5ncmlkTGluZSIsImF4ZXNbXS5sYWJlbCJdKTtjb25zdCB0PXcuYXhlcyxkPXQuZmluZChlPT4ieCI9PT1lLmRpcmVjdGlvbik7Zm9yKGNvbnN0IGUgb2YgdCllLmdyaWRMaW5lLmVuYWJsZWQ9ITEsZS5sYWJlbC5lbmFibGVkPWU9PT1kLGUudGljay5lbmFibGVkPSExLGUuaW50ZXJhY3Rpb25FbmFibGVkPSExO2lmKG51bGwhPWQpe2NvbnN0IGU9bnVsbD09KHM9bnVsbD09KGk9bC5uYXZpZ2F0b3IpP3ZvaWQgMDppLm1pbmlDaGFydCk/dm9pZCAwOnMubGFiZWwsdD1udWxsPT0obj1udWxsPT0obz1udWxsPT0ocj1sLm5hdmlnYXRvcik/dm9pZCAwOnIubWluaUNoYXJ0KT92b2lkIDA6by5sYWJlbCk/dm9pZCAwOm4uaW50ZXJ2YWw7RXQoZC5sYWJlbCxlLHtwYXRoOiJuYXZpZ2F0b3IubWluaUNoYXJ0LmxhYmVsIixza2lwOlsibmF2aWdhdG9yLm1pbmlDaGFydC5sYWJlbC5pbnRlcnZhbCIsIm5hdmlnYXRvci5taW5pQ2hhcnQubGFiZWwucm90YXRpb24iLCJuYXZpZ2F0b3IubWluaUNoYXJ0LmxhYmVsLm1pblNwYWNpbmciLCJuYXZpZ2F0b3IubWluaUNoYXJ0LmxhYmVsLmF1dG9Sb3RhdGUiLCJuYXZpZ2F0b3IubWluaUNoYXJ0LmxhYmVsLmF1dG9Sb3RhdGVBbmdsZSJdfSksRXQoZC50aWNrLHQse3BhdGg6Im5hdmlnYXRvci5taW5pQ2hhcnQuaW50ZXJ2YWwiLHNraXA6WyJuYXZpZ2F0b3IubWluaUNoYXJ0LmludGVydmFsLmVuYWJsZWQiLCJuYXZpZ2F0b3IubWluaUNoYXJ0LmludGVydmFsLndpZHRoIiwibmF2aWdhdG9yLm1pbmlDaGFydC5pbnRlcnZhbC5zaXplIiwibmF2aWdhdG9yLm1pbmlDaGFydC5pbnRlcnZhbC5jb2xvciIsIm5hdmlnYXRvci5taW5pQ2hhcnQuaW50ZXJ2YWwuaW50ZXJ2YWwiLCJuYXZpZ2F0b3IubWluaUNoYXJ0LmludGVydmFsLnN0ZXAiXX0pO2NvbnN0IGE9bnVsbD09dD92b2lkIDA6dC5zdGVwO251bGwhPWEmJihkLnRpY2suaW50ZXJ2YWw9YSl9fWVsc2UhMT09PShudWxsPT13P3ZvaWQgMDp3LmVuYWJsZWQpJiYody5zZXJpZXM9W10sdy5heGVzPVtdKTtjb25zdCBiPXB8fGg/MTozO1pjKCJBZ0NoYXJ0VjIuYXBwbHlDaGFydE9wdGlvbnMoKSAtIHVwZGF0ZSB0eXBlIixGbFtiXSksdGhpcy51cGRhdGUoYix7Zm9yY2VOb2RlRGF0YVJlZnJlc2g6cCxuZXdBbmltYXRpb25CYXRjaDohMH0pfWFwcGx5TW9kdWxlcyhlKXtsZXQgdD0hMTtmb3IoY29uc3QgaSBvZiBnZSl7aWYoInJvb3QiIT09aS50eXBlJiYibGVnZW5kIiE9PWkudHlwZSljb250aW51ZTtjb25zdCBzPWVbaS5vcHRpb25zS2V5XSxyPWkuY2hhcnRUeXBlcy5pbmNsdWRlcyh0aGlzLmNvbnN0cnVjdG9yLnR5cGUpJiZudWxsIT1zO3IhPT10aGlzLmlzTW9kdWxlRW5hYmxlZChpKSYmKHI/KHRoaXMuYWRkTW9kdWxlKGkpLHRoaXNbaS5vcHRpb25zS2V5XT10aGlzLm1vZHVsZXMuZ2V0KGkub3B0aW9uc0tleSkpOih0aGlzLnJlbW92ZU1vZHVsZShpKSxkZWxldGUgdGhpc1tpLm9wdGlvbnNLZXldKSx0PSEwKX1yZXR1cm4gdH1hcHBseVNlcmllcyhlLHQsaSl7aWYoIXQpcmV0dXJuIm5vLWNoYW5nZSI7Y29uc3Qgcz1mdW5jdGlvbihlLHQsaSl7dmFyIHMscixvO2NvbnN0IG49WyJkaXJlY3Rpb24iLCJ4S2V5IiwieUtleSIsInNpemVLZXkiLCJhbmdsZUtleSIsInJhZGl1c0tleSIsIm5vcm1hbGl6ZWRUbyJdLGE9KGUsdCk9Pntjb25zdCBpPVtlXTtmb3IoY29uc3QgZSBvZiBuKWUgaW4gdCYmbnVsbCE9dFtlXSYmaS5wdXNoKGAke2V9PSR7dFtlXX1gKTtyZXR1cm4gaS5qb2luKCI7Iil9LGw9bmV3IE1hcDtsZXQgZD0wO2Zvcihjb25zdCB0IG9mIGUpe2NvbnN0IGU9YSh0LnR5cGUsdC5wcm9wZXJ0aWVzKTtsLmhhcyhlKXx8bC5zZXQoZSxbXSksbnVsbD09KHM9bC5nZXQoZSkpfHxzLnB1c2goW3QsZCsrXSl9Y29uc3QgYz1uZXcgTWFwO2Zvcihjb25zdCBlIG9mIHQpe2NvbnN0IHQ9YShlLnR5cGUsZSk7Yy5oYXModCl8fGMuc2V0KHQsW10pLG51bGw9PShyPWMuZ2V0KHQpKXx8ci5wdXNoKGUpfWlmKCFbLi4ubC5rZXlzKCldLnNvbWUoZT0+Yy5oYXMoZSkpKXJldHVybntzdGF0dXM6Im5vLW92ZXJsYXAiLG9sZEtleXM6bC5rZXlzKCksbmV3S2V5czpjLmtleXMoKX07Y29uc3QgaD1bXTtsZXQgdT0tMTtmb3IoY29uc3RbZSx0XW9mIGMuZW50cmllcygpKWZvcihjb25zdCBzIG9mIHQpe3UrKztjb25zdCB0PWwuZ2V0KGUpO2lmKG51bGw9PXR8fHQubGVuZ3RoPDEpe2gucHVzaCh7b3B0czpzLGlkeDp1LHN0YXR1czoiYWRkIn0pLGwuZGVsZXRlKGUpO2NvbnRpbnVlfWNvbnN0W3Isbl09dC5zaGlmdCgpLGE9eXQobnVsbCE9KG89bnVsbD09aT92b2lkIDA6aVtuXSk/bzp7fSxudWxsIT1zP3M6e30pO2E/aC5wdXNoKHtvcHRzOnMsc2VyaWVzOnIsZGlmZjphLGlkeDpuLHN0YXR1czoidXBkYXRlIn0pOmgucHVzaCh7b3B0czpzLHNlcmllczpyLGlkeDpuLHN0YXR1czoibm8tb3AifSksMD09PXQubGVuZ3RoJiZsLmRlbGV0ZShlKX1mb3IoY29uc3QgZSBvZiBsLnZhbHVlcygpKWZvcihjb25zdFt0LGldb2YgZSloLnB1c2goe3Nlcmllczp0LGlkeDppLHN0YXR1czoicmVtb3ZlIn0pO3JldHVybntzdGF0dXM6Im92ZXJsYXAiLGNoYW5nZXM6aH19KGUuc2VyaWVzLHQsaSk7aWYoIm5vLW92ZXJsYXAiPT09cy5zdGF0dXMpcmV0dXJuIFpjKCJBZ0NoYXJ0VjIuYXBwbHlTZXJpZXMoKSAtIGNyZWF0aW5nIG5ldyBzZXJpZXMgaW5zdGFuY2VzLCBzdGF0dXM6ICIrcy5zdGF0dXMscyksZS5zZXJpZXM9dGhpcy5jcmVhdGVTZXJpZXModCksInJlcGxhY2VkIjtaYygiQWdDaGFydFYyLmFwcGx5U2VyaWVzKCkgLSBtYXRjaFJlc3VsdCIscyk7Y29uc3Qgcj1bXTtmb3IoY29uc3QgZSBvZiBzLmNoYW5nZXMpe2lmKCJhZGQiPT09ZS5zdGF0dXMpe2NvbnN0IHQ9dGhpcy5jcmVhdGVTZXJpZXMoW2Uub3B0c10pWzBdO3IucHVzaCh0KSxaYygiQWdDaGFydFYyLmFwcGx5U2VyaWVzKCkgLSBjcmVhdGVkIG5ldyBzZXJpZXMiLHQpO2NvbnRpbnVlfWlmKCJyZW1vdmUiPT09ZS5zdGF0dXMpe1pjKCJBZ0NoYXJ0VjIuYXBwbHlTZXJpZXMoKSAtIHJlbW92aW5nIHNlcmllcyBhdCBwcmV2aW91cyBpZHggIitlLmlkeCxlLnNlcmllcyk7Y29udGludWV9aWYoIm5vLW9wIj09PWUuc3RhdHVzKXtyLnB1c2goZS5zZXJpZXMpLFpjKCJBZ0NoYXJ0VjIuYXBwbHlTZXJpZXMoKSAtIG5vIGNoYW5nZSB0byBzZXJpZXMgYXQgcHJldmlvdXMgaWR4ICIrZS5pZHgsZS5zZXJpZXMpO2NvbnRpbnVlfWNvbnN0e3Nlcmllczp0LGRpZmY6aSxpZHg6c309ZTtaYygiQWdDaGFydFYyLmFwcGx5U2VyaWVzKCkgLSBhcHBseWluZyBzZXJpZXMgZGlmZiBwcmV2aW91cyBpZHggIitzLGksdCksdGhpcy5hcHBseVNlcmllc1ZhbHVlcyh0LGkpLHQubWFya05vZGVEYXRhRGlydHkoKSxyLnB1c2godCl9Zm9yKGxldCBlPTA7ZTxyLmxlbmd0aDtlKyspcltlXS5fZGVjbGFyYXRpb25PcmRlcj1lO1pjKCJBZ0NoYXJ0VjIuYXBwbHlTZXJpZXMoKSAtIGZpbmFsIHNlcmllcyBpbnN0YW5jZXMiLHIpLGUuc2VyaWVzPXI7Y29uc3Qgbz1zLmNoYW5nZXMuc29tZSgoe2RpZmY6ZX0pPT5lJiYobnVsbCE9ZS5zZXJpZXNHcm91cGluZ3x8bnVsbCE9ZS5kYXRhKSksbj1zLmNoYW5nZXMuZXZlcnkoZT0+Im5vLW9wIj09PWUuc3RhdHVzKTtyZXR1cm4gbz8iZGF0YS1jaGFuZ2UiOm4/Im5vLW9wIjoidXBkYXRlZCJ9YXBwbHlBeGVzKGUsdCxpLHMscj1bXSl7aWYoISgiYXhlcyJpbiB0KXx8IXQuYXhlcylyZXR1cm4hMTtyPVsiYXhlc1tdLnR5cGUiLC4uLnJdO2NvbnN0e2F4ZXM6b309dDtyZXR1cm4icmVwbGFjZWQiIT09cyYmZS5heGVzLmxlbmd0aD09PW8ubGVuZ3RoJiZlLmF4ZXMuZXZlcnkoKGUsdCk9PmUudHlwZT09PW9bdF0udHlwZSkmJnV0KGkpPyhlLmF4ZXMuZm9yRWFjaCgoZSx0KT0+e3ZhciBzLG47Y29uc3QgYT15dChudWxsIT0obj1udWxsPT0ocz1pLmF4ZXMpP3ZvaWQgMDpzW3RdKT9uOnt9LG9bdF0pO1pjKCJBZ0NoYXJ0VjIuYXBwbHlBeGVzKCkgLSBhcHBseWluZyBheGlzIGRpZmYgaWR4ICIrdCxhKTtjb25zdCBsPWBheGVzWyR7dH1dYDt0aGlzLmFwcGx5T3B0aW9uVmFsdWVzKGUsYSx7cGF0aDpsLHNraXA6cn0pfSksITApOihaYygiQWdDaGFydFYyLmFwcGx5QXhlcygpIC0gY3JlYXRpbmcgbmV3IGF4ZXMgaW5zdGFuY2VzOyBzZXJpZXNTdGF0dXM6ICIrcyksZS5heGVzPXRoaXMuY3JlYXRlQXhpcyhvLHIpLCEwKX1jcmVhdGVTZXJpZXMoZSl7dmFyIHQ7Y29uc3QgaT1bXSxzPXRoaXMuZ2V0TW9kdWxlQ29udGV4dCgpO2Zvcihjb25zdCByIG9mIG51bGwhPWU/ZTpbXSl7Y29uc3QgZT1udWxsIT0odD1yLnR5cGUpP3Q6InVua25vd24iO2lmKGF0KGUpJiYhZHQoZSkpY29udGludWU7Y29uc3Qgbz1fdChlLHMpO3RoaXMuYXBwbHlTZXJpZXNPcHRpb25Nb2R1bGVzKG8sciksdGhpcy5hcHBseVNlcmllc1ZhbHVlcyhvLHIpLGkucHVzaChvKX1yZXR1cm4gaX1hcHBseVNlcmllc09wdGlvbk1vZHVsZXMoZSx0KXtjb25zdCBpPWUuY3JlYXRlTW9kdWxlQ29udGV4dCgpLHM9ZS5nZXRNb2R1bGVNYXAoKTtmb3IoY29uc3QgciBvZiBnZSkic2VyaWVzLW9wdGlvbiI9PT1yLnR5cGUmJnIub3B0aW9uc0tleSBpbiB0JiZyLnNlcmllc1R5cGVzLmluY2x1ZGVzKGUudHlwZSkmJnMuYWRkTW9kdWxlKHIsZT0+bmV3IGUuaW5zdGFuY2VDb25zdHJ1Y3RvcihpKSl9YXBwbHlTZXJpZXNWYWx1ZXMoZSx0KXtjb25zdCBpPWUuZ2V0TW9kdWxlTWFwKCkscz10LHt0eXBlOnIsZGF0YTpvLGVycm9yQmFyOm4sbGlzdGVuZXJzOmEsc2VyaWVzR3JvdXBpbmc6bCxzaG93SW5NaW5pQ2hhcnQ6ZH09cyxjPXYocyxbInR5cGUiLCJkYXRhIiwiZXJyb3JCYXIiLCJsaXN0ZW5lcnMiLCJzZXJpZXNHcm91cGluZyIsInNob3dJbk1pbmlDaGFydCJdKTtlLnByb3BlcnRpZXMuc2V0KGMpLCJkYXRhImluIHQmJihlLmRhdGE9dC5kYXRhKSwiZXJyb3JCYXIiaW4gdCYmaS5pc01vZHVsZUVuYWJsZWQoImVycm9yQmFyIikmJmkuZ2V0TW9kdWxlKCJlcnJvckJhciIpLnByb3BlcnRpZXMuc2V0KHQuZXJyb3JCYXIpLChudWxsPT10P3ZvaWQgMDp0Lmxpc3RlbmVycykmJnRoaXMucmVnaXN0ZXJMaXN0ZW5lcnMoZSx0Lmxpc3RlbmVycyksbCYmKGUuc2VyaWVzR3JvdXBpbmc9bShtKHt9LGUuc2VyaWVzR3JvdXBpbmcpLGwpKX1jcmVhdGVBeGlzKGUsdCl7Y29uc3QgaT1uZXcgY2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLnJlc3VsdD1bXSx0aGlzLnZhbGlkPVtdLHRoaXMuaW52YWxpZD1bXX1wdXNoKGUsdCl7Y29uc3R7cmVzdWx0OmksdmFsaWQ6cyxpbnZhbGlkOnJ9PXRoaXM7dmFyIG87KGZ1bmN0aW9uKGUpe3JldHVybiBzYy5pbmNsdWRlcyhlLnR5cGUpfSkodCkmJigic3RyaW5nIj09dHlwZW9mKG89dC5wb3NpdGlvbikmJmljLmluY2x1ZGVzKG8pP3MucHVzaChlKTpyLnB1c2goZSkpLGkucHVzaChlKX1ndWVzc0ludmFsaWRQb3NpdGlvbnMoKXtjb25zdCBlPXRoaXMudmFsaWQuZmlsdGVyKGU9PnNjLmluY2x1ZGVzKGUudHlwZSkpLm1hcChlPT5lLnBvc2l0aW9uKS5maWx0ZXIoZT0+dm9pZCAwIT09ZSksdD1bInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCJdO2Zvcihjb25zdCBpIG9mIHRoaXMuaW52YWxpZCl7bGV0IHM9dC5wb3AoKTtmb3IoO2UuaW5jbHVkZXMocykmJnZvaWQgMCE9PXM7KXM9dC5wb3AoKTtpZih2b2lkIDA9PT1zKWJyZWFrO2kucG9zaXRpb249c31yZXR1cm4gdGhpcy5yZXN1bHR9fSxzPXRoaXMuZ2V0TW9kdWxlQ29udGV4dCgpO2xldCByPTA7Zm9yKGNvbnN0IG8gb2YgbnVsbCE9ZT9lOltdKXtjb25zdCBlPXllKG8udHlwZSxzKSxuPWBheGVzWyR7cisrfV1gO3RoaXMuYXBwbHlBeGlzTW9kdWxlcyhlLG8pLHRoaXMuYXBwbHlPcHRpb25WYWx1ZXMoZSxvLHtwYXRoOm4sc2tpcDp0fSksaS5wdXNoKGUsbyl9cmV0dXJuIGkuZ3Vlc3NJbnZhbGlkUG9zaXRpb25zKCl9YXBwbHlBeGlzTW9kdWxlcyhlLHQpe2xldCBpPSExO2NvbnN0IHM9Z2UuZmlsdGVyKGU9PiJheGlzLW9wdGlvbiI9PT1lLnR5cGUpLHI9ZS5jcmVhdGVNb2R1bGVDb250ZXh0KCk7Zm9yKGNvbnN0IG8gb2Ygcyl7Y29uc3Qgcz1udWxsIT10W28ub3B0aW9uc0tleV0sbj1lLmdldE1vZHVsZU1hcCgpO3MhPT1uLmlzTW9kdWxlRW5hYmxlZChvKSYmKGk9ITAscz8obi5hZGRNb2R1bGUobyxlPT5uZXcgZS5pbnN0YW5jZUNvbnN0cnVjdG9yKHIpKSxlW28ub3B0aW9uc0tleV09bi5nZXRNb2R1bGUobykpOihuLnJlbW92ZU1vZHVsZShvKSxkZWxldGUgZVtvLm9wdGlvbnNLZXldKSl9cmV0dXJuIGl9YXBwbHlPcHRpb25WYWx1ZXMoZSx0LHtza2lwOmkscGF0aDpzfT17fSl7Y29uc3Qgcj10aGlzLmdldE1vZHVsZUNvbnRleHQoKTtjbGFzcyBvIGV4dGVuZHMgQ257Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucmVnaXN0ZXJJbnRlcmFjdGlvbihyKX19cmV0dXJuIEV0KGUsdCx7Y29uc3RydWN0b3JzOmYobSh7fSxibi5jb25zdHJ1Y3RvcnMpLHt0aXRsZTpvLHN1YnRpdGxlOm8sZm9vdG5vdGU6b30pLGNvbnN0cnVjdGVkQXJyYXlzOlNuLmNvbnN0cnVjdGVkQXJyYXlzLGFsbG93ZWRUeXBlczptKHt9LGJuLmFsbG93ZWRUeXBlcyksc2tpcDppLHBhdGg6c30pfXJlZ2lzdGVyTGlzdGVuZXJzKGUsdCl7ZS5jbGVhckV2ZW50TGlzdGVuZXJzKCk7Zm9yKGNvbnN0W2ksc11vZiBPYmplY3QuZW50cmllcyh0KSlrZShzKSYmZS5hZGRFdmVudExpc3RlbmVyKGkscyl9fTtKYy5jaGFydHNJbnN0YW5jZXM9bmV3IFdlYWtNYXAsSmMuTm9kZVZhbHVlQ2hhbmdlT3B0aW9ucz17bmV3VmFsdWUoZSl7dmFyIHQ7bnVsbD09KHQ9dGhpcy5zY2VuZS5yb290KXx8dC5hcHBlbmRDaGlsZChlLm5vZGUpfSxvbGRWYWx1ZShlKXt2YXIgdDtudWxsPT0odD10aGlzLnNjZW5lLnJvb3QpfHx0LnJlbW92ZUNoaWxkKGUubm9kZSl9fSx5KFtobih7bmV3VmFsdWUoZSl7dGhpcy5kZXN0cm95ZWR8fChlLnNldEF0dHJpYnV0ZSgiZGF0YS1hZy1jaGFydHMiLCIiKSxlLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCksSmMuY2hhcnRzSW5zdGFuY2VzLnNldChlLHRoaXMpKX0sb2xkVmFsdWUoZSl7ZS5yZW1vdmVBdHRyaWJ1dGUoImRhdGEtYWctY2hhcnRzIiksZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLEpjLmNoYXJ0c0luc3RhbmNlcy5kZWxldGUoZSl9fSldLEpjLnByb3RvdHlwZSwiY29udGFpbmVyIiwyKSx5KFtobih7bmV3VmFsdWUoZSl7dGhpcy5yZXNpemUoZSx2b2lkIDAsIndpZHRoIG9wdGlvbiIpfX0pXSxKYy5wcm90b3R5cGUsIndpZHRoIiwyKSx5KFtobih7bmV3VmFsdWUoZSl7dGhpcy5yZXNpemUodm9pZCAwLGUsImhlaWdodCBvcHRpb24iKX19KV0sSmMucHJvdG90eXBlLCJoZWlnaHQiLDIpLHkoW2huKHtuZXdWYWx1ZShlKXt0aGlzLm9uQXV0b1NpemVDaGFuZ2UoZSl9fSkscXIodG8pXSxKYy5wcm90b3R5cGUsImF1dG9TaXplIiwyKSx5KFtxcihlbyldLEpjLnByb3RvdHlwZSwicGFkZGluZyIsMikseShbcXIoZW8pXSxKYy5wcm90b3R5cGUsInNlcmllc0FyZWEiLDIpLHkoW2huKEpjLk5vZGVWYWx1ZUNoYW5nZU9wdGlvbnMpXSxKYy5wcm90b3R5cGUsInRpdGxlIiwyKSx5KFtobihKYy5Ob2RlVmFsdWVDaGFuZ2VPcHRpb25zKV0sSmMucHJvdG90eXBlLCJzdWJ0aXRsZSIsMikseShbaG4oSmMuTm9kZVZhbHVlQ2hhbmdlT3B0aW9ucyldLEpjLnByb3RvdHlwZSwiZm9vdG5vdGUiLDIpLHkoW3FyKFZvKFsic3RhbmRhbG9uZSIsImludGVncmF0ZWQiXSwiYSBjaGFydCBtb2RlIikpXSxKYy5wcm90b3R5cGUsIm1vZGUiLDIpLHkoW2huKHtjaGFuZ2VWYWx1ZShlLHQ9W10pe2Zvcihjb25zdCBpIG9mIHQpZS5pbmNsdWRlcyhpKXx8KGkuZGV0YWNoQXhpcyh0aGlzLmF4aXNHcm91cCx0aGlzLmF4aXNHcmlkR3JvdXApLGkuZGVzdHJveSgpKTtmb3IoY29uc3QgaSBvZiBlKShudWxsPT10P3ZvaWQgMDp0LmluY2x1ZGVzKGkpKXx8aS5hdHRhY2hBeGlzKHRoaXMuYXhpc0dyb3VwLHRoaXMuYXhpc0dyaWRHcm91cCk7dGhpcy56b29tTWFuYWdlci51cGRhdGVBeGVzKGUpfX0pXSxKYy5wcm90b3R5cGUsImF4ZXMiLDIpLHkoW2huKHtjaGFuZ2VWYWx1ZShlLHQpe3RoaXMub25TZXJpZXNDaGFuZ2UoZSx0KX19KV0sSmMucHJvdG90eXBlLCJzZXJpZXMiLDIpO3ZhciBlaD1KYyx0aD1jbGFzcyBleHRlbmRzIEtje2lzQ29udGludW91cygpe3ZhciBlLHQ7cmV0dXJue2lzQ29udGludW91c1g6Um4uaXMobnVsbD09KGU9dGhpcy5heGVzLngpP3ZvaWQgMDplLnNjYWxlKSxpc0NvbnRpbnVvdXNZOlJuLmlzKG51bGw9PSh0PXRoaXMuYXhlcy55KT92b2lkIDA6dC5zY2FsZSl9fWdldE1vZHVsZVByb3BlcnR5RGVmaW5pdGlvbnMoKXtyZXR1cm4gdGhpcy5tb2R1bGVNYXAubWFwVmFsdWVzKGU9PmUuZ2V0UHJvcGVydHlEZWZpbml0aW9ucyh0aGlzLmlzQ29udGludW91cygpKSkuZmxhdCgpfXJlcXVlc3REYXRhTW9kZWwoZSx0LGkpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7aS5wcm9wcy5wdXNoKC4uLnRoaXMuZ2V0TW9kdWxlUHJvcGVydHlEZWZpbml0aW9ucygpKTtjb25zdHtkYXRhTW9kZWw6cyxwcm9jZXNzZWREYXRhOnJ9PXlpZWxkIGUucmVxdWVzdCh0aGlzLmlkLG51bGwhPXQ/dDpbXSxpKTtyZXR1cm4gdGhpcy5kYXRhTW9kZWw9cyx0aGlzLnByb2Nlc3NlZERhdGE9cix0aGlzLmRpc3BhdGNoKCJkYXRhLXByb2Nlc3NlZCIse2RhdGFNb2RlbDpzLHByb2Nlc3NlZERhdGE6cn0pLHtkYXRhTW9kZWw6cyxwcm9jZXNzZWREYXRhOnJ9fSkpfWlzUHJvY2Vzc2VkRGF0YUFuaW1hdGFibGUoKXt2YXIgZSx0O2NvbnN0IGk9bnVsbD09KHQ9bnVsbD09KGU9dGhpcy5wcm9jZXNzZWREYXRhKT92b2lkIDA6ZS5yZWR1Y2VkKT92b2lkIDA6dC5hbmltYXRpb25WYWxpZGF0aW9uO2lmKCFpKXJldHVybiEwO2NvbnN0e29yZGVyZWRLZXlzOnMsdW5pcXVlS2V5czpyfT1pO3JldHVybiBzJiZyfWNoZWNrUHJvY2Vzc2VkRGF0YUFuaW1hdGFibGUoKXt0aGlzLmlzUHJvY2Vzc2VkRGF0YUFuaW1hdGFibGUoKXx8dGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlci5za2lwQ3VycmVudEJhdGNoKCl9fSxpaD1jbGFzcyBleHRlbmRzIGZ0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmZpbGw9InJnYmEoMjU1LDI1NSwyNTUsIDAuMzMpIix0aGlzLnN0cm9rZT0icmdiYSgwLCAwLCAwLCAwLjQpIix0aGlzLnN0cm9rZVdpZHRoPTJ9fTt5KFtxcih5byx7b3B0aW9uYWw6ITB9KV0saWgucHJvdG90eXBlLCJmaWxsIiwyKSx5KFtxcihhbyx7b3B0aW9uYWw6ITB9KV0saWgucHJvdG90eXBlLCJmaWxsT3BhY2l0eSIsMikseShbcXIoeW8se29wdGlvbmFsOiEwfSldLGloLnByb3RvdHlwZSwic3Ryb2tlIiwyKSx5KFtxcihubyx7b3B0aW9uYWw6ITB9KV0saWgucHJvdG90eXBlLCJzdHJva2VXaWR0aCIsMikseShbcXIoYW8se29wdGlvbmFsOiEwfSldLGloLnByb3RvdHlwZSwic3Ryb2tlT3BhY2l0eSIsMikseShbcXIoT28se29wdGlvbmFsOiEwfSldLGloLnByb3RvdHlwZSwibGluZURhc2giLDIpLHkoW3FyKG5vLHtvcHRpb25hbDohMH0pXSxpaC5wcm90b3R5cGUsImxpbmVEYXNoT2Zmc2V0IiwyKTt2YXIgc2g9Y2xhc3MgZXh0ZW5kcyBmdHt9O3koW3FyKG5vLHtvcHRpb25hbDohMH0pXSxzaC5wcm90b3R5cGUsInN0cm9rZVdpZHRoIiwyKSx5KFtxcihhbyx7b3B0aW9uYWw6ITB9KV0sc2gucHJvdG90eXBlLCJkaW1PcGFjaXR5IiwyKSx5KFtxcih0byx7b3B0aW9uYWw6ITB9KV0sc2gucHJvdG90eXBlLCJlbmFibGVkIiwyKTt2YXIgcmg9Y2xhc3MgZXh0ZW5kcyBmdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2xvcj0iYmxhY2sifX07eShbcXIoeW8se29wdGlvbmFsOiEwfSldLHJoLnByb3RvdHlwZSwiY29sb3IiLDIpO3ZhciBvaD1jbGFzcyBleHRlbmRzIGZ0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLml0ZW09bmV3IGloLHRoaXMuc2VyaWVzPW5ldyBzaCx0aGlzLnRleHQ9bmV3IHJofX07eShbcXIoZW8pXSxvaC5wcm90b3R5cGUsIml0ZW0iLDIpLHkoW3FyKGVvKV0sb2gucHJvdG90eXBlLCJzZXJpZXMiLDIpLHkoW3FyKGVvKV0sb2gucHJvdG90eXBlLCJ0ZXh0IiwyKTt2YXIgbmg9Y2xhc3MgZXh0ZW5kcyBmdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy52aXNpYmxlPSEwLHRoaXMuc2hvd0luTGVnZW5kPSEwLHRoaXMuY3Vyc29yPSJkZWZhdWx0Iix0aGlzLm5vZGVDbGlja1JhbmdlPSJleGFjdCIsdGhpcy5oaWdobGlnaHRTdHlsZT1uZXcgb2h9fTt5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sbmgucHJvdG90eXBlLCJpZCIsMikseShbcXIodG8pXSxuaC5wcm90b3R5cGUsInZpc2libGUiLDIpLHkoW3FyKHRvKV0sbmgucHJvdG90eXBlLCJzaG93SW5MZWdlbmQiLDIpLHkoW3FyKHNvKV0sbmgucHJvdG90eXBlLCJjdXJzb3IiLDIpLHkoW3FyKF9vKV0sbmgucHJvdG90eXBlLCJub2RlQ2xpY2tSYW5nZSIsMikseShbcXIoZW8pXSxuaC5wcm90b3R5cGUsImhpZ2hsaWdodFN0eWxlIiwyKTt2YXIgYWg9e3g6WyJ4S2V5Il0seTpbInlLZXkiXX0sbGg9e3g6WyJ4TmFtZSJdLHk6WyJ5TmFtZSJdfSxkaD1jbGFzcyBleHRlbmRzIFVje2NvbnN0cnVjdG9yKGUsdCxpLHMpe3N1cGVyKGUsdCxpLHMpLHRoaXMueEtleT1zLnByb3BlcnRpZXMueEtleSx0aGlzLnlLZXk9cy5wcm9wZXJ0aWVzLnlLZXl9fSxjaD1jbGFzcyBleHRlbmRzIG5oe307eShbcXIoc28se29wdGlvbmFsOiEwfSldLGNoLnByb3RvdHlwZSwibGVnZW5kSXRlbU5hbWUiLDIpO3ZhciBoaD1jbGFzcyBleHRlbmRzIHRoe2NvbnN0cnVjdG9yKGUpe3ZhciB0PWUse3BhdGhzUGVyU2VyaWVzOmk9MSxoYXNNYXJrZXJzOnM9ITEsaGFzSGlnaGxpZ2h0ZWRMYWJlbHM6cj0hMSxwYXRoc1pJbmRleFN1Yk9yZGVyT2Zmc2V0Om89W10sZGlyZWN0aW9uS2V5czpuPWFoLGRpcmVjdGlvbk5hbWVzOmE9bGgsZGF0dW1TZWxlY3Rpb25HYXJiYWdlQ29sbGVjdGlvbjpsPSEwLG1hcmtlclNlbGVjdGlvbkdhcmJhZ2VDb2xsZWN0aW9uOmQ9ITAsYW5pbWF0aW9uQWx3YXlzVXBkYXRlU2VsZWN0aW9uczpjPSExLGFuaW1hdGlvblJlc2V0Rm5zOmh9PXQsdT12KHQsWyJwYXRoc1BlclNlcmllcyIsImhhc01hcmtlcnMiLCJoYXNIaWdobGlnaHRlZExhYmVscyIsInBhdGhzWkluZGV4U3ViT3JkZXJPZmZzZXQiLCJkaXJlY3Rpb25LZXlzIiwiZGlyZWN0aW9uTmFtZXMiLCJkYXR1bVNlbGVjdGlvbkdhcmJhZ2VDb2xsZWN0aW9uIiwibWFya2VyU2VsZWN0aW9uR2FyYmFnZUNvbGxlY3Rpb24iLCJhbmltYXRpb25BbHdheXNVcGRhdGVTZWxlY3Rpb25zIiwiYW5pbWF0aW9uUmVzZXRGbnMiXSk7c3VwZXIobSh7ZGlyZWN0aW9uS2V5czpuLGRpcmVjdGlvbk5hbWVzOmEsdXNlU2VyaWVzR3JvdXBMYXllcjohMCxjYW5IYXZlQXhlczohMH0sdSkpLHRoaXMuX2NvbnRleHROb2RlRGF0YT1bXSx0aGlzLk5vZGVDbGlja0V2ZW50PWRoLHRoaXMuaGlnaGxpZ2h0U2VsZWN0aW9uPVZhLnNlbGVjdCh0aGlzLmhpZ2hsaWdodE5vZGUsKCk9PnRoaXMub3B0cy5oYXNNYXJrZXJzP3RoaXMubWFya2VyRmFjdG9yeSgpOnRoaXMubm9kZUZhY3RvcnkoKSksdGhpcy5oaWdobGlnaHRMYWJlbFNlbGVjdGlvbj1WYS5zZWxlY3QodGhpcy5oaWdobGlnaHRMYWJlbCxlbiksdGhpcy5hbm5vdGF0aW9uU2VsZWN0aW9ucz1uZXcgU2V0LHRoaXMuc3ViR3JvdXBzPVtdLHRoaXMuc3ViR3JvdXBJZD0wLHRoaXMuZGVidWc9RnMuY3JlYXRlKCksdGhpcy5vcHRzPXtwYXRoc1BlclNlcmllczppLGhhc01hcmtlcnM6cyxoYXNIaWdobGlnaHRlZExhYmVsczpyLHBhdGhzWkluZGV4U3ViT3JkZXJPZmZzZXQ6byxkaXJlY3Rpb25LZXlzOm4sZGlyZWN0aW9uTmFtZXM6YSxhbmltYXRpb25SZXNldEZuczpoLGFuaW1hdGlvbkFsd2F5c1VwZGF0ZVNlbGVjdGlvbnM6YyxkYXR1bVNlbGVjdGlvbkdhcmJhZ2VDb2xsZWN0aW9uOmwsbWFya2VyU2VsZWN0aW9uR2FyYmFnZUNvbGxlY3Rpb246ZH0sdGhpcy5hbmltYXRpb25TdGF0ZT1uZXcgbmEoImVtcHR5Iix7ZW1wdHk6e3VwZGF0ZTp7dGFyZ2V0OiJyZWFkeSIsYWN0aW9uOmU9PnRoaXMuYW5pbWF0ZUVtcHR5VXBkYXRlUmVhZHkoZSl9LHJlc2V0OiJlbXB0eSIsc2tpcDoicmVhZHkifSxyZWFkeTp7dXBkYXRlRGF0YToid2FpdGluZyIsY2xlYXI6ImNsZWFyaW5nIixoaWdobGlnaHQ6ZT0+dGhpcy5hbmltYXRlUmVhZHlIaWdobGlnaHQoZSksaGlnaGxpZ2h0TWFya2VyczplPT50aGlzLmFuaW1hdGVSZWFkeUhpZ2hsaWdodE1hcmtlcnMoZSkscmVzaXplOmU9PnRoaXMuYW5pbWF0ZVJlYWR5UmVzaXplKGUpLHJlc2V0OiJlbXB0eSIsc2tpcDoicmVhZHkifSx3YWl0aW5nOnt1cGRhdGU6e3RhcmdldDoicmVhZHkiLGFjdGlvbjplPT50aGlzLmFuaW1hdGVXYWl0aW5nVXBkYXRlUmVhZHkoZSl9LHJlc2V0OiJlbXB0eSIsc2tpcDoicmVhZHkifSxjbGVhcmluZzp7dXBkYXRlOnt0YXJnZXQ6ImVtcHR5IixhY3Rpb246ZT0+dGhpcy5hbmltYXRlQ2xlYXJpbmdVcGRhdGVFbXB0eShlKX0scmVzZXQ6ImVtcHR5Iixza2lwOiJyZWFkeSJ9fSwoKT0+dGhpcy5jaGVja1Byb2Nlc3NlZERhdGFBbmltYXRhYmxlKCkpfWdldCBjb250ZXh0Tm9kZURhdGEoKXtyZXR1cm4gdGhpcy5fY29udGV4dE5vZGVEYXRhLnNsaWNlKCl9cmVzZXRBbmltYXRpb24oZSl7ImluaXRpYWwiPT09ZT90aGlzLmFuaW1hdGlvblN0YXRlLnRyYW5zaXRpb24oInJlc2V0Iik6InJlYWR5Ij09PWUmJnRoaXMuYW5pbWF0aW9uU3RhdGUudHJhbnNpdGlvbigic2tpcCIpfWFkZENoYXJ0RXZlbnRMaXN0ZW5lcnMoKXt0aGlzLmRlc3Ryb3lGbnMucHVzaCh0aGlzLmN0eC5jaGFydEV2ZW50TWFuYWdlci5hZGRMaXN0ZW5lcigibGVnZW5kLWl0ZW0tY2xpY2siLGU9PnRoaXMub25MZWdlbmRJdGVtQ2xpY2soZSkpLHRoaXMuY3R4LmNoYXJ0RXZlbnRNYW5hZ2VyLmFkZExpc3RlbmVyKCJsZWdlbmQtaXRlbS1kb3VibGUtY2xpY2siLGU9PnRoaXMub25MZWdlbmRJdGVtRG91YmxlQ2xpY2soZSkpKX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLHRoaXMuX2NvbnRleHROb2RlRGF0YS5zcGxpY2UoMCx0aGlzLl9jb250ZXh0Tm9kZURhdGEubGVuZ3RoKSx0aGlzLnN1Ykdyb3Vwcy5zcGxpY2UoMCx0aGlzLnN1Ykdyb3Vwcy5sZW5ndGgpfXVwZGF0ZShlKXtyZXR1cm4gdyh0aGlzLGFyZ3VtZW50cywoZnVuY3Rpb24qKHtzZXJpZXNSZWN0OmV9KXt2YXIgdCxpO2NvbnN0e3Zpc2libGU6cyxfY29udGV4dE5vZGVEYXRhOnJ9PXRoaXMse3NlcmllczpvfT1udWxsIT0oaT1udWxsPT0odD10aGlzLmN0eC5oaWdobGlnaHRNYW5hZ2VyKT92b2lkIDA6dC5nZXRBY3RpdmVIaWdobGlnaHQoKSk/aTp7fSxuPW8/bz09PXRoaXM6dm9pZCAwLGE9dGhpcy5jaGVja1Jlc2l6ZShlKSxsPXlpZWxkIHRoaXMudXBkYXRlSGlnaGxpZ2h0U2VsZWN0aW9uKG4pO3lpZWxkIHRoaXMudXBkYXRlU2VsZWN0aW9ucyhzKSx5aWVsZCB0aGlzLnVwZGF0ZU5vZGVzKGwsbixzKTtjb25zdCBkPXRoaXMuZ2V0QW5pbWF0aW9uRGF0YShlLHIpO2EmJnRoaXMuYW5pbWF0aW9uU3RhdGUudHJhbnNpdGlvbigicmVzaXplIixkKSx0aGlzLmFuaW1hdGlvblN0YXRlLnRyYW5zaXRpb24oInVwZGF0ZSIsZCl9KSl9dXBkYXRlU2VsZWN0aW9ucyhlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9IXRoaXMub3B0cy5hbmltYXRpb25BbHdheXNVcGRhdGVTZWxlY3Rpb25zJiZ0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLmlzU2tpcHBlZCgpO2lmKChlfHwhdCkmJih0aGlzLm5vZGVEYXRhUmVmcmVzaHx8dGhpcy5pc1BhdGhPclNlbGVjdGlvbkRpcnR5KCkpKXtpZih0aGlzLm5vZGVEYXRhUmVmcmVzaCl7dGhpcy5ub2RlRGF0YVJlZnJlc2g9ITEsdGhpcy5kZWJ1ZygiQ2FydGVzaWFuU2VyaWVzLnVwZGF0ZVNlbGVjdGlvbnMoKSAtIGNhbGxpbmcgY3JlYXRlTm9kZURhdGEoKSBmb3IiLHRoaXMuaWQpLHRoaXMuX2NvbnRleHROb2RlRGF0YT15aWVsZCB0aGlzLmNyZWF0ZU5vZGVEYXRhKCk7Y29uc3QgZT10aGlzLmlzUHJvY2Vzc2VkRGF0YUFuaW1hdGFibGUoKTt0aGlzLl9jb250ZXh0Tm9kZURhdGEuZm9yRWFjaCh0PT57bnVsbCE9dC5hbmltYXRpb25WYWxpZHx8KHQuYW5pbWF0aW9uVmFsaWQ9ZSl9KSx5aWVsZCB0aGlzLnVwZGF0ZVNlcmllc0dyb3VwcygpO2NvbnN0e2RhdGFNb2RlbDp0LHByb2Nlc3NlZERhdGE6aX09dGhpczt2b2lkIDAhPT10JiZ2b2lkIDAhPT1pJiZ0aGlzLmRpc3BhdGNoKCJkYXRhLXVwZGF0ZSIse2RhdGFNb2RlbDp0LHByb2Nlc3NlZERhdGE6aX0pfXlpZWxkIFByb21pc2UuYWxsKHRoaXMuc3ViR3JvdXBzLm1hcCgoZSx0KT0+dGhpcy51cGRhdGVTZXJpZXNHcm91cFNlbGVjdGlvbnMoZSx0KSkpfX0pKX11cGRhdGVTZXJpZXNHcm91cFNlbGVjdGlvbnMoZSx0LGkpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7ZGF0dW1TZWxlY3Rpb246cyxsYWJlbFNlbGVjdGlvbjpyLG1hcmtlclNlbGVjdGlvbjpvLHBhdGhzOm59PWUsYT10aGlzLl9jb250ZXh0Tm9kZURhdGFbdF0se25vZGVEYXRhOmwsbGFiZWxEYXRhOmQsaXRlbUlkOmN9PWE7eWllbGQgdGhpcy51cGRhdGVQYXRocyh7c2VyaWVzSGlnaGxpZ2h0ZWQ6aSxpdGVtSWQ6Yyxjb250ZXh0RGF0YTphLHBhdGhzOm4sc2VyaWVzSWR4OnR9KSxlLmRhdHVtU2VsZWN0aW9uPXlpZWxkIHRoaXMudXBkYXRlRGF0dW1TZWxlY3Rpb24oe25vZGVEYXRhOmwsZGF0dW1TZWxlY3Rpb246cyxzZXJpZXNJZHg6dH0pLGUubGFiZWxTZWxlY3Rpb249eWllbGQgdGhpcy51cGRhdGVMYWJlbFNlbGVjdGlvbih7bGFiZWxEYXRhOmQsbGFiZWxTZWxlY3Rpb246cixzZXJpZXNJZHg6dH0pLG8mJihlLm1hcmtlclNlbGVjdGlvbj15aWVsZCB0aGlzLnVwZGF0ZU1hcmtlclNlbGVjdGlvbih7bm9kZURhdGE6bCxtYXJrZXJTZWxlY3Rpb246byxzZXJpZXNJZHg6dH0pKX0pKX1tYXJrZXJGYWN0b3J5KCl7cmV0dXJuIG5ldyhVZCgpKX11cGRhdGVTZXJpZXNHcm91cHMoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e19jb250ZXh0Tm9kZURhdGE6ZSxjb250ZW50R3JvdXA6dCxzdWJHcm91cHM6aSxvcHRzOntwYXRoc1BlclNlcmllczpzLGhhc01hcmtlcnM6cixkYXR1bVNlbGVjdGlvbkdhcmJhZ2VDb2xsZWN0aW9uOm8sbWFya2VyU2VsZWN0aW9uR2FyYmFnZUNvbGxlY3Rpb246bn19PXRoaXM7aWYoZS5sZW5ndGg9PT1pLmxlbmd0aClyZXR1cm47ZS5sZW5ndGg8aS5sZW5ndGgmJmkuc3BsaWNlKGUubGVuZ3RoKS5mb3JFYWNoKCh7ZGF0YU5vZGVHcm91cDplLG1hcmtlckdyb3VwOmksbGFiZWxHcm91cDpzLHBhdGhzOnJ9KT0+e3QucmVtb3ZlQ2hpbGQoZSksaSYmdC5yZW1vdmVDaGlsZChpKSxzJiZ0LnJlbW92ZUNoaWxkKHMpO2Zvcihjb25zdCBlIG9mIHIpdC5yZW1vdmVDaGlsZChlKX0pO2NvbnN0IGE9ZS5sZW5ndGg7Zm9yKDthPmkubGVuZ3RoOyl7Y29uc3QgZT0hMSxhPXRoaXMuc3ViR3JvdXBJZCsrLGw9bmV3IE9uKHtuYW1lOmAke3RoaXMuaWR9LXNlcmllcy1zdWIke2F9LWRhdGFOb2Rlc2AsbGF5ZXI6ZSx6SW5kZXg6NCx6SW5kZXhTdWJPcmRlcjp0aGlzLmdldEdyb3VwWkluZGV4U3ViT3JkZXIoImRhdGEiLGEpfSksZD1yP25ldyBPbih7bmFtZTpgJHt0aGlzLmlkfS1zZXJpZXMtc3ViJHt0aGlzLnN1Ykdyb3VwSWQrK30tbWFya2Vyc2AsbGF5ZXI6ZSx6SW5kZXg6NCx6SW5kZXhTdWJPcmRlcjp0aGlzLmdldEdyb3VwWkluZGV4U3ViT3JkZXIoIm1hcmtlciIsYSl9KTp2b2lkIDAsYz1uZXcgT24oe25hbWU6YCR7dGhpcy5pZH0tc2VyaWVzLXN1YiR7dGhpcy5zdWJHcm91cElkKyt9LWxhYmVsc2AsbGF5ZXI6ZSx6SW5kZXg6Nyx6SW5kZXhTdWJPcmRlcjp0aGlzLmdldEdyb3VwWkluZGV4U3ViT3JkZXIoImxhYmVscyIsYSl9KTt0LmFwcGVuZENoaWxkKGwpLHQuYXBwZW5kQ2hpbGQoYyksZCYmdC5hcHBlbmRDaGlsZChkKTtjb25zdCBoPVtdO2ZvcihsZXQgZT0wO2U8cztlKyspaFtlXT1uZXcgT2QsaFtlXS56SW5kZXg9NCxoW2VdLnpJbmRleFN1Yk9yZGVyPXRoaXMuZ2V0R3JvdXBaSW5kZXhTdWJPcmRlcigicGF0aHMiLGUpLHQuYXBwZW5kQ2hpbGQoaFtlXSk7aS5wdXNoKHtwYXRoczpoLGRhdGFOb2RlR3JvdXA6bCxtYXJrZXJHcm91cDpkLGxhYmVsR3JvdXA6YyxsYWJlbFNlbGVjdGlvbjpWYS5zZWxlY3QoYyxlbiksZGF0dW1TZWxlY3Rpb246VmEuc2VsZWN0KGwsKCk9PnRoaXMubm9kZUZhY3RvcnkoKSxvKSxtYXJrZXJTZWxlY3Rpb246ZD9WYS5zZWxlY3QoZCwoKT0+dGhpcy5tYXJrZXJGYWN0b3J5KCksbik6dm9pZCAwfSl9fSkpfWdldEdyb3VwWkluZGV4U3ViT3JkZXIoZSx0PTApe3ZhciBpO2NvbnN0IHM9c3VwZXIuZ2V0R3JvdXBaSW5kZXhTdWJPcmRlcihlLHQpO2lmKCJwYXRocyI9PT1lKXtjb25zdCBlPW51bGwhPShpPXRoaXMub3B0cy5wYXRoc1pJbmRleFN1Yk9yZGVyT2Zmc2V0W3RdKT9pOjAscj1zWzBdO3NbMF09ImZ1bmN0aW9uIj09dHlwZW9mIHI/KCk9PityKCkrZTorcitlfXJldHVybiBzfXVwZGF0ZU5vZGVzKGUsdCxpKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciBzO2NvbnN0e2hpZ2hsaWdodFNlbGVjdGlvbjpyLGhpZ2hsaWdodExhYmVsU2VsZWN0aW9uOm8sb3B0czp7aGFzTWFya2VyczpuLGhhc0hpZ2hsaWdodGVkTGFiZWxzOmF9fT10aGlzLGw9IXRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIuaXNTa2lwcGVkKCksZD10aGlzLnZpc2libGUmJihudWxsPT0ocz10aGlzLl9jb250ZXh0Tm9kZURhdGEpP3ZvaWQgMDpzLmxlbmd0aCk+MCYmaTt0aGlzLnJvb3RHcm91cC52aXNpYmxlPWx8fGQsdGhpcy5jb250ZW50R3JvdXAudmlzaWJsZT1sfHxkLHRoaXMuaGlnaGxpZ2h0R3JvdXAudmlzaWJsZT0obHx8ZCkmJiEhdDtjb25zdCBjPXRoaXMuZ2V0T3BhY2l0eSgpO24/KHlpZWxkIHRoaXMudXBkYXRlTWFya2VyTm9kZXMoe21hcmtlclNlbGVjdGlvbjpyLGlzSGlnaGxpZ2h0OiEwLHNlcmllc0lkeDotMX0pLHRoaXMuYW5pbWF0aW9uU3RhdGUudHJhbnNpdGlvbigiaGlnaGxpZ2h0TWFya2VycyIscikpOih5aWVsZCB0aGlzLnVwZGF0ZURhdHVtTm9kZXMoe2RhdHVtU2VsZWN0aW9uOnIsaXNIaWdobGlnaHQ6ITAsc2VyaWVzSWR4Oi0xfSksdGhpcy5hbmltYXRpb25TdGF0ZS50cmFuc2l0aW9uKCJoaWdobGlnaHQiLHIpKSxhJiYoeWllbGQgdGhpcy51cGRhdGVMYWJlbE5vZGVzKHtsYWJlbFNlbGVjdGlvbjpvLHNlcmllc0lkeDotMX0pKSx5aWVsZCBQcm9taXNlLmFsbCh0aGlzLnN1Ykdyb3Vwcy5tYXAoKGkscyk9PncodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHtkYXRhTm9kZUdyb3VwOnIsbWFya2VyR3JvdXA6byxkYXR1bVNlbGVjdGlvbjphLGxhYmVsU2VsZWN0aW9uOmgsbWFya2VyU2VsZWN0aW9uOnUscGF0aHM6cCxsYWJlbEdyb3VwOmd9PWkse2l0ZW1JZDptfT10aGlzLmNvbnRleHROb2RlRGF0YVtzXSxmPWQ7ci5vcGFjaXR5PWMsci52aXNpYmxlPWx8fGYsZy52aXNpYmxlPWYsbyYmKG8ub3BhY2l0eT1jLG8uekluZGV4PXIuekluZGV4Pj00P3IuekluZGV4OnIuekluZGV4KzEsby52aXNpYmxlPWYpLGcmJihnLm9wYWNpdHk9YykseWllbGQgdGhpcy51cGRhdGVQYXRoTm9kZXMoe3Nlcmllc0hpZ2hsaWdodGVkOnQsaXRlbUlkOm0scGF0aHM6cCxzZXJpZXNJZHg6cyxvcGFjaXR5OmMsdmlzaWJsZTpmLGFuaW1hdGlvbkVuYWJsZWQ6bH0pLHIudmlzaWJsZSYmKHlpZWxkIHRoaXMudXBkYXRlRGF0dW1Ob2Rlcyh7ZGF0dW1TZWxlY3Rpb246YSxoaWdobGlnaHRlZEl0ZW1zOmUsaXNIaWdobGlnaHQ6ITEsc2VyaWVzSWR4OnN9KSx5aWVsZCB0aGlzLnVwZGF0ZUxhYmVsTm9kZXMoe2xhYmVsU2VsZWN0aW9uOmgsc2VyaWVzSWR4OnN9KSxuJiZ1JiYoeWllbGQgdGhpcy51cGRhdGVNYXJrZXJOb2Rlcyh7bWFya2VyU2VsZWN0aW9uOnUsaXNIaWdobGlnaHQ6ITEsc2VyaWVzSWR4OnN9KSkpfSkpKSl9KSl9Z2V0SGlnaGxpZ2h0TGFiZWxEYXRhKGUsdCl7Y29uc3QgaT1lLmZpbHRlcihlPT5lLmRhdHVtPT09dC5kYXR1bSYmZS5pdGVtSWQ9PT10Lml0ZW1JZCk7cmV0dXJuIDAhPT1pLmxlbmd0aD9pOnZvaWQgMH1nZXRIaWdobGlnaHREYXRhKGUsdCl7cmV0dXJuIHQ/W3RdOnZvaWQgMH11cGRhdGVIaWdobGlnaHRTZWxlY3Rpb24oZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXt2YXIgdDtjb25zdHtoaWdobGlnaHRTZWxlY3Rpb246aSxoaWdobGlnaHRMYWJlbFNlbGVjdGlvbjpzLF9jb250ZXh0Tm9kZURhdGE6cn09dGhpcyxvPW51bGw9PSh0PXRoaXMuY3R4LmhpZ2hsaWdodE1hbmFnZXIpP3ZvaWQgMDp0LmdldEFjdGl2ZUhpZ2hsaWdodCgpLG49ZSYmKG51bGw9PW8/dm9pZCAwOm8uZGF0dW0pP286dm9pZCAwO2xldCBhLGw7aWYobnVsbCE9bil7Y29uc3QgZT10aGlzLmlzTGFiZWxFbmFibGVkKCk7Zm9yKGNvbnN0e2xhYmVsRGF0YTp0LG5vZGVEYXRhOml9b2YgcilpZihsPXRoaXMuZ2V0SGlnaGxpZ2h0RGF0YShpLG4pLGE9ZT90aGlzLmdldEhpZ2hsaWdodExhYmVsRGF0YSh0LG4pOnZvaWQgMCwoIWV8fG51bGwhPWEpJiZudWxsIT1sKWJyZWFrfXJldHVybiB0aGlzLmhpZ2hsaWdodFNlbGVjdGlvbj15aWVsZCB0aGlzLnVwZGF0ZUhpZ2hsaWdodFNlbGVjdGlvbkl0ZW0oe2l0ZW1zOmwsaGlnaGxpZ2h0U2VsZWN0aW9uOml9KSx0aGlzLmhpZ2hsaWdodExhYmVsU2VsZWN0aW9uPXlpZWxkIHRoaXMudXBkYXRlSGlnaGxpZ2h0U2VsZWN0aW9uTGFiZWwoe2l0ZW1zOmEsaGlnaGxpZ2h0TGFiZWxTZWxlY3Rpb246c30pLGx9KSl9cGlja05vZGVFeGFjdFNoYXBlKGUpe3ZhciB0O2NvbnN0IGk9c3VwZXIucGlja05vZGVFeGFjdFNoYXBlKGUpO2lmKGkpcmV0dXJuIGk7Y29uc3R7eDpzLHk6cn09ZSx7b3B0czp7aGFzTWFya2VyczpvfX09dGhpcztmb3IoY29uc3R7ZGF0YU5vZGVHcm91cDplLG1hcmtlckdyb3VwOnR9b2YgdGhpcy5zdWJHcm91cHMpe2xldCBpPWUucGlja05vZGUocyxyKTtpZighaSYmbyYmKGk9bnVsbD09dD92b2lkIDA6dC5waWNrTm9kZShzLHIpKSxpKWJyZWFrfWZvcihjb25zdCBpIG9mIHRoaXMubW9kdWxlTWFwLm1vZHVsZXMpe2NvbnN0e2RhdHVtOnN9PW51bGwhPSh0PWkucGlja05vZGVFeGFjdChlKSk/dDp7fTtpZih2b2lkIDAhPT1zKXJldHVybntkYXR1bTpzLGRpc3RhbmNlOjB9fX1waWNrTm9kZUNsb3Nlc3REYXR1bShlKXt2YXIgdCxpO2NvbnN0e3g6cyx5OnJ9PWUse2F4ZXM6byxyb290R3JvdXA6bixfY29udGV4dE5vZGVEYXRhOmF9PXRoaXMsbD1vLngsZD1vLnksYz1uLnRyYW5zZm9ybVBvaW50KHMscik7bGV0IGgsdT0xLzA7Zm9yKGNvbnN0IGUgb2YgYSlmb3IoY29uc3QgdCBvZiBlLm5vZGVEYXRhKXtjb25zdHtwb2ludDp7eDplPU5hTix5Omk9TmFOfT17fX09dDtpZihpc05hTihlKXx8aXNOYU4oaSkpY29udGludWU7aWYoISgobnVsbD09bD92b2lkIDA6bC5pblJhbmdlKGUpKSYmKG51bGw9PWQ/dm9pZCAwOmQuaW5SYW5nZShpKSkpKWNvbnRpbnVlO2NvbnN0IHM9TWF0aC5tYXgocChjLngtZSwyKStwKGMueS1pLDIpLDApO3M8dSYmKHU9cyxoPXQpfWZvcihjb25zdCB0IG9mIHRoaXMubW9kdWxlTWFwLm1vZHVsZXMpe2NvbnN0IGk9dC5waWNrTm9kZU5lYXJlc3QoZSk7aWYodm9pZCAwIT09aSYmaS5kaXN0YW5jZVNxdWFyZWQ8dSl7dT1pLmRpc3RhbmNlU3F1YXJlZCxoPWkuZGF0dW07YnJlYWt9fWlmKGgpe3JldHVybntkYXR1bTpoLGRpc3RhbmNlOk1hdGgubWF4KE1hdGguc3FydCh1KS0obnVsbCE9KGk9bnVsbD09KHQ9aC5wb2ludCk/dm9pZCAwOnQuc2l6ZSk/aTowKSwwKX19fXBpY2tOb2RlTWFpbkF4aXNGaXJzdChlLHQpe3ZhciBpLHM7Y29uc3R7eDpyLHk6b309ZSx7YXhlczpuLHJvb3RHcm91cDphLF9jb250ZXh0Tm9kZURhdGE6bH09dGhpcyxkPW4ueCxjPW4ueSxoPVtkLGNdLmZpbHRlcihlPT5lIGluc3RhbmNlb2YgdWwpLm1hcChlPT5lLmRpcmVjdGlvbik7aWYodCYmMD09PWgubGVuZ3RoKXJldHVybjtjb25zdFt1PSJ4Il09aCxnPWEudHJhbnNmb3JtUG9pbnQocixvKSxtPSJ4Ij09PXU/W2cueCxnLnldOltnLnksZy54XSxmPVsxLzAsMS8wXTtsZXQgdjtmb3IoY29uc3QgZSBvZiBsKWZvcihjb25zdCB0IG9mIGUubm9kZURhdGEpe2NvbnN0e3BvaW50Ont4OmU9TmFOLHk6aT1OYU59PXt9fT10O2lmKGlzTmFOKGUpfHxpc05hTihpKSljb250aW51ZTtpZighKChudWxsPT1kP3ZvaWQgMDpkLmluUmFuZ2UoZSkpJiYobnVsbD09Yz92b2lkIDA6Yy5pblJhbmdlKGkpKSkpY29udGludWU7Y29uc3Qgcz0ieCI9PT11P1tlLGldOltpLGVdO2xldCByPSEwO2ZvcihsZXQgZT0wO2U8cy5sZW5ndGg7ZSsrKXtjb25zdCB0PU1hdGguYWJzKHNbZV0tbVtlXSk7aWYodD5mW2VdKXtyPSExO2JyZWFrfXQ8ZltlXSYmKGZbZV09dCxmLmZpbGwoMS8wLGUrMSxmLmxlbmd0aCkpfXImJih2PXQpfWlmKHYpe2xldCB0PU1hdGgubWF4KHAoZlswXSwyKStwKGZbMV0sMiktKG51bGwhPShzPW51bGw9PShpPXYucG9pbnQpP3ZvaWQgMDppLnNpemUpP3M6MCksMCk7Zm9yKGNvbnN0IGkgb2YgdGhpcy5tb2R1bGVNYXAubW9kdWxlcyl7Y29uc3Qgcz1pLnBpY2tOb2RlTWFpbkF4aXNGaXJzdChlKTtpZih2b2lkIDAhPT1zJiZzLmRpc3RhbmNlU3F1YXJlZDx0KXt2PXMuZGF0dW0sdD1zLmRpc3RhbmNlU3F1YXJlZDticmVha319cmV0dXJue2RhdHVtOnYsZGlzdGFuY2U6TWF0aC5zcXJ0KHQpfX19b25MZWdlbmRJdGVtQ2xpY2soZSl7Y29uc3R7bGVnZW5kSXRlbU5hbWU6dH09dGhpcy5wcm9wZXJ0aWVzLHtlbmFibGVkOmksaXRlbUlkOnMsc2VyaWVzOnJ9PWUsbz1udWxsIT10JiZ0PT09ZS5sZWdlbmRJdGVtTmFtZTsoci5pZD09PXRoaXMuaWR8fG8pJiZ0aGlzLnRvZ2dsZVNlcmllc0l0ZW0ocyxpKX1vbkxlZ2VuZEl0ZW1Eb3VibGVDbGljayhlKXtjb25zdHtlbmFibGVkOnQsaXRlbUlkOmksc2VyaWVzOnMsbnVtVmlzaWJsZUl0ZW1zOnJ9PWUse2xlZ2VuZEl0ZW1OYW1lOm99PXRoaXMucHJvcGVydGllcyxuPW51bGwhPW8mJm89PT1lLmxlZ2VuZEl0ZW1OYW1lO3MuaWQ9PT10aGlzLmlkfHxufHx0JiYxPT09cj90aGlzLnRvZ2dsZVNlcmllc0l0ZW0oaSwhMCk6dGhpcy50b2dnbGVTZXJpZXNJdGVtKGksITEpfWlzUGF0aE9yU2VsZWN0aW9uRGlydHkoKXtyZXR1cm4hMX1nZXRMYWJlbERhdGEoKXtyZXR1cm5bXX1zaG91bGRGbGlwWFkoKXtyZXR1cm4hMX1nZXRNaW5SZWN0KCl7Y29uc3RbZV09dGhpcy5fY29udGV4dE5vZGVEYXRhO2lmKCEobnVsbD09ZT92b2lkIDA6ZS5ub2RlRGF0YS5sZW5ndGgpKXJldHVybjtjb25zdCB0PWUubm9kZURhdGEubWFwKCh7bWlkUG9pbnQ6ZX0pPT57dmFyIHQ7cmV0dXJuIG51bGwhPSh0PW51bGw9PWU/dm9pZCAwOmUueCk/dDowfSkuc29ydCgoZSx0KT0+ZS10KS5yZWR1Y2UoKGUsdCxpLHMpPT5pPjA/TWF0aC5tYXgoZSx0LXNbaS0xXSk6ZSwwKSxpPWUubm9kZURhdGEubWFwKCh7bWlkUG9pbnQ6ZX0pPT57dmFyIHQ7cmV0dXJuIG51bGwhPSh0PW51bGw9PWU/dm9pZCAwOmUueSk/dDowfSkuc29ydCgoZSx0KT0+ZS10KS5yZWR1Y2UoKGUsdCxpLHMpPT5pPjA/TWF0aC5tYXgoZSx0LXNbaS0xXSk6ZSwwKTtyZXR1cm4gbmV3IG9yKDAsMCx0LGkpfXVwZGF0ZUhpZ2hsaWdodFNlbGVjdGlvbkl0ZW0oZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHtvcHRzOntoYXNNYXJrZXJzOnR9fT10aGlzLHtpdGVtczppLGhpZ2hsaWdodFNlbGVjdGlvbjpzfT1lLHI9bnVsbCE9aT9pOltdO2lmKHQpe2NvbnN0IGU9cztyZXR1cm4gdGhpcy51cGRhdGVNYXJrZXJTZWxlY3Rpb24oe25vZGVEYXRhOnIsbWFya2VyU2VsZWN0aW9uOmUsc2VyaWVzSWR4Oi0xfSl9cmV0dXJuIHRoaXMudXBkYXRlRGF0dW1TZWxlY3Rpb24oe25vZGVEYXRhOnIsZGF0dW1TZWxlY3Rpb246cyxzZXJpZXNJZHg6LTF9KX0pKX11cGRhdGVIaWdobGlnaHRTZWxlY3Rpb25MYWJlbChlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciB0O3JldHVybiB0aGlzLnVwZGF0ZUxhYmVsU2VsZWN0aW9uKHtsYWJlbERhdGE6bnVsbCE9KHQ9ZS5pdGVtcyk/dDpbXSxsYWJlbFNlbGVjdGlvbjplLmhpZ2hsaWdodExhYmVsU2VsZWN0aW9uLHNlcmllc0lkeDotMX0pfSkpfXVwZGF0ZURhdHVtU2VsZWN0aW9uKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7cmV0dXJuIGUuZGF0dW1TZWxlY3Rpb259KSl9dXBkYXRlRGF0dW1Ob2RlcyhlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe30pKX11cGRhdGVNYXJrZXJTZWxlY3Rpb24oZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtyZXR1cm4gZS5tYXJrZXJTZWxlY3Rpb259KSl9dXBkYXRlTWFya2VyTm9kZXMoZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXt9KSl9dXBkYXRlUGF0aHMoZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtlLnBhdGhzLmZvckVhY2goZT0+ZS52aXNpYmxlPSExKX0pKX11cGRhdGVQYXRoTm9kZXMoZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHtwYXRoczp0LG9wYWNpdHk6aSx2aXNpYmxlOnN9PWU7Zm9yKGNvbnN0IGUgb2YgdCllLm9wYWNpdHk9aSxlLnZpc2libGU9c30pKX1yZXNldEFsbEFuaW1hdGlvbihlKXt2YXIgdCxpO2NvbnN0e3BhdGg6cyxkYXR1bTpyLGxhYmVsOm8sbWFya2VyOm59PW51bGwhPShpPW51bGw9PSh0PXRoaXMub3B0cyk/dm9pZCAwOnQuYW5pbWF0aW9uUmVzZXRGbnMpP2k6e307dGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlci5zdG9wQnlBbmltYXRpb25Hcm91cElkKHRoaXMuaWQpLHMmJmUucGF0aHMuZm9yRWFjaChlPT57b2EoZSxzKX0pLHImJm9hKGUuZGF0dW1TZWxlY3Rpb25zLHIpLG8mJm9hKGUubGFiZWxTZWxlY3Rpb25zLG8pLG4mJm9hKGUubWFya2VyU2VsZWN0aW9ucyxuKSxlLmNvbnRleHREYXRhLnNvbWUoZT0+ITE9PT1lLmFuaW1hdGlvblZhbGlkKSYmdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlci5za2lwQ3VycmVudEJhdGNoKCl9YW5pbWF0ZUVtcHR5VXBkYXRlUmVhZHkoZSl7dGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlci5za2lwQ3VycmVudEJhdGNoKCksdGhpcy5yZXNldEFsbEFuaW1hdGlvbihlKX1hbmltYXRlV2FpdGluZ1VwZGF0ZVJlYWR5KGUpe3RoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIuc2tpcEN1cnJlbnRCYXRjaCgpLHRoaXMucmVzZXRBbGxBbmltYXRpb24oZSl9YW5pbWF0ZVJlYWR5SGlnaGxpZ2h0KGUpe3ZhciB0LGk7Y29uc3R7ZGF0dW06c309bnVsbCE9KGk9bnVsbD09KHQ9dGhpcy5vcHRzKT92b2lkIDA6dC5hbmltYXRpb25SZXNldEZucyk/aTp7fTtzJiZvYShbZV0scyl9YW5pbWF0ZVJlYWR5SGlnaGxpZ2h0TWFya2VycyhlKXt2YXIgdCxpO2NvbnN0e21hcmtlcjpzfT1udWxsIT0oaT1udWxsPT0odD10aGlzLm9wdHMpP3ZvaWQgMDp0LmFuaW1hdGlvblJlc2V0Rm5zKT9pOnt9O3MmJm9hKFtlXSxzKX1hbmltYXRlUmVhZHlSZXNpemUoZSl7dGhpcy5yZXNldEFsbEFuaW1hdGlvbihlKX1hbmltYXRlQ2xlYXJpbmdVcGRhdGVFbXB0eShlKXt0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLnNraXBDdXJyZW50QmF0Y2goKSx0aGlzLnJlc2V0QWxsQW5pbWF0aW9uKGUpfWFuaW1hdGlvblRyYW5zaXRpb25DbGVhcigpe3RoaXMuYW5pbWF0aW9uU3RhdGUudHJhbnNpdGlvbigiY2xlYXIiLHRoaXMuZ2V0QW5pbWF0aW9uRGF0YSgpKX1nZXRBbmltYXRpb25EYXRhKGUsdCl7cmV0dXJue2RhdHVtU2VsZWN0aW9uczp0aGlzLnN1Ykdyb3Vwcy5tYXAoKHtkYXR1bVNlbGVjdGlvbjplfSk9PmUpLG1hcmtlclNlbGVjdGlvbnM6dGhpcy5zdWJHcm91cHMuZmlsdGVyKCh7bWFya2VyU2VsZWN0aW9uOmV9KT0+dm9pZCAwIT09ZSkubWFwKCh7bWFya2VyU2VsZWN0aW9uOmV9KT0+ZSksbGFiZWxTZWxlY3Rpb25zOnRoaXMuc3ViR3JvdXBzLm1hcCgoe2xhYmVsU2VsZWN0aW9uOmV9KT0+ZSksYW5ub3RhdGlvblNlbGVjdGlvbnM6Wy4uLnRoaXMuYW5ub3RhdGlvblNlbGVjdGlvbnNdLGNvbnRleHREYXRhOnRoaXMuX2NvbnRleHROb2RlRGF0YSxwcmV2aW91c0NvbnRleHREYXRhOnQscGF0aHM6dGhpcy5zdWJHcm91cHMubWFwKCh7cGF0aHM6ZX0pPT5lKSxzZXJpZXNSZWN0OmV9fWNhbGN1bGF0ZVNjYWxpbmcoKXtjb25zdCBlPXt9LHQ9dD0+e2NvbnN0IGk9dGhpcy5heGVzW3RdO2lmKGkpaWYoaS5zY2FsZSBpbnN0YW5jZW9mIE9hKXtjb25zdHtyYW5nZTpzLGRvbWFpbjpyfT1pLnNjYWxlO2VbdF09e3R5cGU6ImxvZyIsY29udmVydDplPT5pLnNjYWxlLmNvbnZlcnQoZSksZG9tYWluOltyWzBdLHJbMV1dLHJhbmdlOltzWzBdLHNbMV1dfX1lbHNlIGlmKGkuc2NhbGUgaW5zdGFuY2VvZiBSbil7Y29uc3R7cmFuZ2U6c309aS5zY2FsZSxyPWkuc2NhbGUuZ2V0RG9tYWluKCk7ZVt0XT17dHlwZToiY29udGludW91cyIsZG9tYWluOltyWzBdLHJbMV1dLHJhbmdlOltzWzBdLHNbMV1dfX1lbHNlIGlmKGkuc2NhbGUpe2NvbnN0e2RvbWFpbjpzfT1pLnNjYWxlO2VbdF09e3R5cGU6ImNhdGVnb3J5Iixkb21haW46cyxyYW5nZTpzLm1hcChlPT5pLnNjYWxlLmNvbnZlcnQoZSkpfX19O3JldHVybiB0KCJ4IiksdCgieSIpLGV9fSx1aD1bInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCJdLHBoPWNsYXNzIGUgZXh0ZW5kcyBlaHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsdCksdGhpcy5wYWlyZWQ9ITAsdGhpcy5maXJzdFNlcmllc1RyYW5zbGF0aW9uPSEwLHRoaXMuX2xhc3RDcm9zc0xpbmVJZHM9dm9pZCAwLHRoaXMuX2xhc3RBeGlzV2lkdGhzPXt0b3A6MCxib3R0b206MCxsZWZ0OjAscmlnaHQ6MH0sdGhpcy5fbGFzdFZpc2liaWxpdHk9e2Nyb3NzTGluZXM6ITAsc2VyaWVzOiEwfX1kZXN0cm95U2VyaWVzKGUpe3N1cGVyLmRlc3Ryb3lTZXJpZXMoZSksdGhpcy5maXJzdFNlcmllc1RyYW5zbGF0aW9uPSEwfXBlcmZvcm1MYXlvdXQoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgUyhlLnByb3RvdHlwZSx0aGlzLCJwZXJmb3JtTGF5b3V0IikuY2FsbCh0aGlzKSx7Zmlyc3RTZXJpZXNUcmFuc2xhdGlvbjppLHNlcmllc1Jvb3Q6c309dGhpcyx7YW5pbWF0aW9uUmVjdDpyLHNlcmllc1JlY3Q6byx2aXNpYmlsaXR5Om4sY2xpcFNlcmllczphfT10aGlzLnVwZGF0ZUF4ZXModCk7dGhpcy5zZXJpZXNSb290LnZpc2libGU9bi5zZXJpZXMsdGhpcy5zZXJpZXNSZWN0PW8sdGhpcy5hbmltYXRpb25SZWN0PXI7Y29uc3R7eDpsLHk6ZH09bztpZihpKXMudHJhbnNsYXRpb25YPU1hdGguZmxvb3IobCkscy50cmFuc2xhdGlvblk9TWF0aC5mbG9vcihkKSx0aGlzLmZpcnN0U2VyaWVzVHJhbnNsYXRpb249ITE7ZWxzZXtjb25zdHt0cmFuc2xhdGlvblg6ZSx0cmFuc2xhdGlvblk6dH09cztWcih0aGlzLmlkLCJzZXJpZXNSZWN0Iix0aGlzLmFuaW1hdGlvbk1hbmFnZXIsW3RoaXMuc2VyaWVzUm9vdF0se3RyYW5zbGF0aW9uWDplLHRyYW5zbGF0aW9uWTp0fSx7dHJhbnNsYXRpb25YOk1hdGguZmxvb3IobCksdHJhbnNsYXRpb25ZOk1hdGguZmxvb3IoZCl9LHtwaGFzZToidXBkYXRlIn0pfWNvbnN0IGM9by5jbG9uZSgpLmdyb3codGhpcy5zZXJpZXNBcmVhLnBhZGRpbmcpO3RoaXMuaG92ZXJSZWN0PWMsdGhpcy5sYXlvdXRTZXJ2aWNlLmRpc3BhdGNoTGF5b3V0Q29tcGxldGUoe3R5cGU6ImxheW91dC1jb21wbGV0ZSIsY2hhcnQ6e3dpZHRoOnRoaXMuc2NlbmUud2lkdGgsaGVpZ2h0OnRoaXMuc2NlbmUuaGVpZ2h0fSxjbGlwU2VyaWVzOmEsc2VyaWVzOntyZWN0Om8scGFkZGVkUmVjdDpjLHZpc2libGU6bi5zZXJpZXMsc2hvdWxkRmxpcFhZOnRoaXMuc2hvdWxkRmxpcFhZKCl9LGF4ZXM6dGhpcy5heGVzLm1hcChlPT5tKHtpZDplLmlkfSxlLmdldExheW91dFN0YXRlKCkpKX0pO2NvbnN0IGg9QXJyYXkuZnJvbSh0aGlzLm1vZHVsZXMudmFsdWVzKCksZT0+e3ZhciB0O3JldHVybiBudWxsPT0odD1lLnBlcmZvcm1DYXJ0ZXNpYW5MYXlvdXQpP3ZvaWQgMDp0LmNhbGwoZSx7c2VyaWVzUmVjdDpvfSl9KTtyZXR1cm4geWllbGQgUHJvbWlzZS5hbGwoaCksdH0pKX11cGRhdGVBeGVzKGUpe3ZhciB0O2NvbnN0IGk9dGhpcy5heGVzLmZsYXRNYXAoZT0+e3ZhciB0O3JldHVybiBudWxsIT0odD1lLmNyb3NzTGluZXMpP3Q6W119KS5tYXAoZT0+ZS5pZCk7bGV0IHMscjtudWxsIT10aGlzLl9sYXN0Q3Jvc3NMaW5lSWRzJiZ0aGlzLl9sYXN0Q3Jvc3NMaW5lSWRzLmxlbmd0aD09PWkubGVuZ3RoJiZ0aGlzLl9sYXN0Q3Jvc3NMaW5lSWRzLmV2ZXJ5KChlLHQpPT5pW3RdPT09ZSk/KHM9bSh7fSx0aGlzLl9sYXN0QXhpc1dpZHRocykscj1tKHt9LHRoaXMuX2xhc3RWaXNpYmlsaXR5KSk6KHM9e3RvcDowLGJvdHRvbTowLGxlZnQ6MCxyaWdodDowfSxyPXtjcm9zc0xpbmVzOiEwLHNlcmllczohMH0sdGhpcy5fbGFzdENyb3NzTGluZUlkcz1pKTtjb25zdCBvPW5ldyBTZXQodGhpcy5heGVzLm1hcChlPT5lLnBvc2l0aW9uKSk7Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LmtleXMocykpby5oYXMoZSl8fGRlbGV0ZSBzW2VdO2NvbnN0IG49KGUsdCk9PiFPYmplY3Qua2V5cyhlKS5zb21lKGU9Pm51bGw9PXNbZV0pJiYoci5jcm9zc0xpbmVzPT09dC5jcm9zc0xpbmVzJiZyLnNlcmllcz09PXQuc2VyaWVzJiZPYmplY3QuZW50cmllcyhzKS5ldmVyeSgoW3QsaV0pPT57Y29uc3Qgcz1lW3RdO3JldHVybiBudWxsPT1pJiZudWxsPT1zfHxpPT09c30pKTtsZXQgYT17fSxsPXt9LGQ9ITEsYz1udWxsPT0odD10aGlzLnNlcmllc1JlY3QpP3ZvaWQgMDp0LmNsb25lKCksaD0wLHU9e307ZG97T2JqZWN0LmFzc2lnbihzLGEpLE9iamVjdC5hc3NpZ24ocixsKTtjb25zdCB0PXRoaXMudXBkYXRlQXhlc1Bhc3MocyxlLmNsb25lKCksYyk7aWYoYT1aZSh0LmF4aXNXaWR0aHMsZT0+ZSYmTWF0aC5hYnMoZSk9PT0xLzA/MDpudWxsIT1lP01hdGguY2VpbChlKTplKSxsPXQudmlzaWJpbGl0eSxkPXQuY2xpcFNlcmllcyxjPXQuc2VyaWVzUmVjdCx1PXQucHJpbWFyeVRpY2tDb3VudHMsaCsrPjEwKXtMLndhcm4oInVuYWJsZSB0byBmaW5kIHN0YWJsZSBheGlzIGxheW91dC4iKTticmVha319d2hpbGUoIW4oYSxsKSk7dGhpcy5heGVzLmZvckVhY2goZT0+e2UudXBkYXRlKHVbZS5kaXJlY3Rpb25dKX0pO3JldHVybiB0aGlzLmF4ZXMuZm9yRWFjaCh0PT57aWYodC5zZXRDcm9zc0xpbmVzVmlzaWJsZShyLmNyb3NzTGluZXMpLGMpc3dpdGNoKHQuY2xpcEdyaWQoYy54LGMueSxjLndpZHRoKzUsYy5oZWlnaHQrNSksdC5wb3NpdGlvbil7Y2FzZSJsZWZ0IjpjYXNlInJpZ2h0Ijp0LmNsaXBUaWNrTGluZXMoZS54LGMueSxlLndpZHRoKzUsYy5oZWlnaHQrNSk7YnJlYWs7Y2FzZSJ0b3AiOmNhc2UiYm90dG9tIjp0LmNsaXBUaWNrTGluZXMoYy54LGUueSxjLndpZHRoKzUsZS5oZWlnaHQrNSl9fSksdGhpcy5fbGFzdEF4aXNXaWR0aHM9cyx0aGlzLl9sYXN0VmlzaWJpbGl0eT1yLHtzZXJpZXNSZWN0OmMsYW5pbWF0aW9uUmVjdDplLHZpc2liaWxpdHk6cixjbGlwU2VyaWVzOmR9fXVwZGF0ZUF4ZXNQYXNzKGUsdCxpKXtjb25zdCBzPXt9LHI9e30sbz17c2VyaWVzOiEwLGNyb3NzTGluZXM6ITB9O2xldCBuPSExO2NvbnN0IGE9e30sbD10aGlzLmFwcGx5U2VyaWVzUGFkZGluZyh0KSxkPWk/dGhpcy5idWlsZENyb3NzTGluZVBhZGRpbmcoZSk6e30sYz10aGlzLmJ1aWxkQXhpc0JvdW5kKGwsZSxkLG8pLGg9dGhpcy5idWlsZFNlcmllc1JlY3QoYyxlKTtyZXR1cm4gdGhpcy5heGVzLmZvckVhY2godD0+e3ZhciBpLG87Y29uc3R7cG9zaXRpb246ZD0ibGVmdCJ9PXQse2NsaXBTZXJpZXM6dSxheGlzVGhpY2tuZXNzOnAsYXhpc09mZnNldDpnfT10aGlzLmNhbGN1bGF0ZUF4aXNEaW1lbnNpb25zKHtheGlzOnQsc2VyaWVzUmVjdDpoLHBhZGRlZEJvdW5kczpsLGF4aXNXaWR0aHM6ZSxuZXdBeGlzV2lkdGhzOnIscHJpbWFyeVRpY2tDb3VudHM6YSxjbGlwU2VyaWVzOm4sYWRkSW50ZXJBeGlzUGFkZGluZzoobnVsbCE9KGk9c1tkXSk/aTowKT4wfSk7c1tkXT0obnVsbCE9KG89c1tkXSk/bzowKSsxLG49bnx8dSx0aGlzLnBvc2l0aW9uQXhpcyh7YXhpczp0LGF4aXNCb3VuZDpjLGF4aXNPZmZzZXQ6ZyxheGlzVGhpY2tuZXNzOnAsYXhpc1dpZHRoczplLHByaW1hcnlUaWNrQ291bnRzOmEsc2VyaWVzUmVjdDpofSl9KSx7Y2xpcFNlcmllczpuLHNlcmllc1JlY3Q6aCxheGlzV2lkdGhzOnIsdmlzaWJpbGl0eTpvLHByaW1hcnlUaWNrQ291bnRzOmF9fWJ1aWxkQ3Jvc3NMaW5lUGFkZGluZyhlKXt2YXIgdDtjb25zdCBpPXt9O3RoaXMuYXhlcy5mb3JFYWNoKGU9PntlLmNyb3NzTGluZXMmJmUuY3Jvc3NMaW5lcy5mb3JFYWNoKGU9PntlLmNhbGN1bGF0ZVBhZGRpbmcoaSl9KX0pO2Zvcihjb25zdFtzLHI9MF1vZiBPYmplY3QuZW50cmllcyhpKSlpW3NdPU1hdGgubWF4KHItKG51bGwhPSh0PWVbc10pP3Q6MCksMCk7cmV0dXJuIGl9YXBwbHlTZXJpZXNQYWRkaW5nKGUpe2NvbnN0IHQ9ZS5jbG9uZSgpLGk9dGhpcy5heGVzLnNsaWNlKCkucmV2ZXJzZSgpO3JldHVybiB1aC5mb3JFYWNoKGU9Pntjb25zdCBzPXRoaXMuc2VyaWVzQXJlYS5wYWRkaW5nW2VdLHI9aS5maW5kKHQ9PnQucG9zaXRpb249PT1lKTtyP3Iuc2VyaWVzQXJlYVBhZGRpbmc9czp0LnNocmluayhzLGUpfSksdH1idWlsZEF4aXNCb3VuZChlLHQsaSxzKXt2YXIgcixvLG4sYTtjb25zdCBsPWUuY2xvbmUoKSx7dG9wOmQ9MCxyaWdodDpjPTAsYm90dG9tOmg9MCxsZWZ0OnU9MH09aSxwPXUrYyxnPWQraCxtPShudWxsIT0ocj10LmxlZnQpP3I6MCkrKG51bGwhPShvPXQucmlnaHQpP286MCkrcCxmPShudWxsIT0obj10LnRvcCk/bjowKSsobnVsbCE9KGE9dC5ib3R0b20pP2E6MCkrZztyZXR1cm4gbC53aWR0aDw9bXx8bC5oZWlnaHQ8PWY/KHMuY3Jvc3NMaW5lcz0hMSxzLnNlcmllcz0hMSxsKToobC54Kz11LGwueSs9ZCxsLndpZHRoLT1wLGwuaGVpZ2h0LT1nLGwpfWJ1aWxkU2VyaWVzUmVjdChlLHQpe2NvbnN0IGk9ZS5jbG9uZSgpLHt0b3A6cyxib3R0b206cixsZWZ0Om8scmlnaHQ6bn09dDtyZXR1cm4gaS54Kz1udWxsIT1vP286MCxpLnkrPW51bGwhPXM/czowLGkud2lkdGgtPShudWxsIT1vP286MCkrKG51bGwhPW4/bjowKSxpLmhlaWdodC09KG51bGwhPXM/czowKSsobnVsbCE9cj9yOjApLGkud2lkdGg9TWF0aC5tYXgoMCxpLndpZHRoKSxpLmhlaWdodD1NYXRoLm1heCgwLGkuaGVpZ2h0KSxpfWNsYW1wVG9PdXRzaWRlU2VyaWVzUmVjdChlLHQsaSxzKXtjb25zdHt4OnIseTpvLHdpZHRoOm4saGVpZ2h0OmF9PWUsbD1bcixvLHIrbixvK2FdWygieCI9PT1pPzA6MSkrKDE9PT1zPzA6MildO3JldHVybigxPT09cz9NYXRoLm1pbjpNYXRoLm1heCkodCxsKX1jYWxjdWxhdGVBeGlzRGltZW5zaW9ucyhlKXt2YXIgdCxpLHMscjtjb25zdHtheGlzOm8sc2VyaWVzUmVjdDpuLHBhZGRlZEJvdW5kczphLGF4aXNXaWR0aHM6bCxuZXdBeGlzV2lkdGhzOmQscHJpbWFyeVRpY2tDb3VudHM6YyxhZGRJbnRlckF4aXNQYWRkaW5nOmh9PWU7bGV0e2NsaXBTZXJpZXM6dX09ZTtjb25zdHtwb3NpdGlvbjpwPSJsZWZ0IixkaXJlY3Rpb246Z309byxtPW51bGwhPSh0PWRbcF0pP3Q6MDtzd2l0Y2gocCl7Y2FzZSJ0b3AiOmNhc2UiYm90dG9tIjpvLnJhbmdlPVswLG4ud2lkdGhdLG8uZ3JpZExlbmd0aD1uLmhlaWdodDticmVhaztjYXNlInJpZ2h0IjpjYXNlImxlZnQiOm8ucmFuZ2U9KGY9bylpbnN0YW5jZW9mIHVsfHxmIGluc3RhbmNlb2YgYmw/WzAsbi5oZWlnaHRdOltuLmhlaWdodCwwXSxvLmdyaWRMZW5ndGg9bi53aWR0aH12YXIgZjtjb25zdHttaW46dixtYXg6Q309dGhpcy56b29tTWFuYWdlci5nZXRBeGlzWm9vbShvLmlkKTtvLnZpc2libGVSYW5nZT1bdixDXSx1fHwodT1vLmRhdGFEb21haW4uY2xpcHBlZHx8by52aXNpYmxlUmFuZ2VbMF0+MHx8by52aXNpYmxlUmFuZ2VbMV08MSk7bGV0IHk9by5uaWNlP2NbZ106dm9pZCAwO2NvbnN0IFM9InkiPT09ZztvLm1heFRoaWNrbmVzcz1vLnRoaWNrbmVzc3x8LjMqKFM/YS53aWR0aDphLmhlaWdodCk7Y29uc3Qgdz1vLmNhbGN1bGF0ZUxheW91dCh5KTtsZXQgYjtpZih5PXcucHJpbWFyeVRpY2tDb3VudCxudWxsIT1jW2ddfHwoY1tnXT15KSxudWxsIT1vLnRoaWNrbmVzcyYmby50aGlja25lc3M+MCliPW8udGhpY2tuZXNzO2Vsc2V7Y29uc3R7YmJveDplfT13O2I9Uz9lLndpZHRoOmUuaGVpZ2h0fXJldHVybiBoJiYoYis9MTUpLGI9TWF0aC5jZWlsKGIpLGRbcF09KG51bGwhPShpPWRbcF0pP2k6MCkrYixvLmdyaWRQYWRkaW5nPShudWxsIT0ocz1sW3BdKT9zOjApLShudWxsIT0ocj1kW3BdKT9yOjApLHtjbGlwU2VyaWVzOnUsYXhpc1RoaWNrbmVzczpiLGF4aXNPZmZzZXQ6bSxwcmltYXJ5VGlja0NvdW50Onl9fXBvc2l0aW9uQXhpcyhlKXt2YXIgdCxpLHMscjtjb25zdHtheGlzOm8sYXhpc0JvdW5kOm4sYXhpc1dpZHRoczphLHNlcmllc1JlY3Q6bCxheGlzT2Zmc2V0OmQsYXhpc1RoaWNrbmVzczpjfT1lLHtwb3NpdGlvbjpofT1vO3N3aXRjaChoKXtjYXNlInRvcCI6by50cmFuc2xhdGlvbi54PW4ueCsobnVsbCE9KHQ9YS5sZWZ0KT90OjApLG8udHJhbnNsYXRpb24ueT10aGlzLmNsYW1wVG9PdXRzaWRlU2VyaWVzUmVjdChsLG4ueSsxK2QrYywieSIsMSk7YnJlYWs7Y2FzZSJib3R0b20iOm8udHJhbnNsYXRpb24ueD1uLngrKG51bGwhPShpPWEubGVmdCk/aTowKSxvLnRyYW5zbGF0aW9uLnk9dGhpcy5jbGFtcFRvT3V0c2lkZVNlcmllc1JlY3QobCxuLnkrbi5oZWlnaHQrMS1jLWQsInkiLC0xKTticmVhaztjYXNlImxlZnQiOm8udHJhbnNsYXRpb24ueT1uLnkrKG51bGwhPShzPWEudG9wKT9zOjApLG8udHJhbnNsYXRpb24ueD10aGlzLmNsYW1wVG9PdXRzaWRlU2VyaWVzUmVjdChsLG4ueCtkK2MsIngiLDEpO2JyZWFrO2Nhc2UicmlnaHQiOm8udHJhbnNsYXRpb24ueT1uLnkrKG51bGwhPShyPWEudG9wKT9yOjApLG8udHJhbnNsYXRpb24ueD10aGlzLmNsYW1wVG9PdXRzaWRlU2VyaWVzUmVjdChsLG4ueCtuLndpZHRoLWMtZCwieCIsLTEpfW8udXBkYXRlUG9zaXRpb24oe3JvdGF0aW9uOnpyKG8ucm90YXRpb24pLHNpZGVGbGFnOm8ubGFiZWwuZ2V0U2lkZUZsYWcoKX0pfXNob3VsZEZsaXBYWSgpe3JldHVybiF0aGlzLnNlcmllcy5zb21lKGU9PiEoZSBpbnN0YW5jZW9mIGhoJiZlLnNob3VsZEZsaXBYWSgpKSl9fTtwaC5jbGFzc05hbWU9IkNhcnRlc2lhbkNoYXJ0IixwaC50eXBlPSJjYXJ0ZXNpYW4iO3ZhciBnaD1waCxtaD1jbGFzcyBle3N0YXRpYyBpc0luc3RhbmNlKHQpe3ZhciBpO3JldHVybiB0IGluc3RhbmNlb2YgZXx8KCJBZ0NoYXJ0SW5zdGFuY2VQcm94eSI9PT0obnVsbD09KGk9dC5jb25zdHJ1Y3Rvcik/dm9pZCAwOmkubmFtZSkmJm51bGwhPXQuY2hhcnR8fG51bGwhPXQuY2hhcnQmJnRoaXMudmFsaWRhdGVJbXBsZW1lbnRhdGlvbih0KSl9c3RhdGljIHZhbGlkYXRlSW1wbGVtZW50YXRpb24oZSl7dmFyIHQ7Y29uc3QgaT1PYmplY3Qua2V5cyhudWxsIT0odD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpP3Q6e30pO3JldHVyblsiZ2V0T3B0aW9ucyIsImRlc3Ryb3kiXS5ldmVyeShlPT5pLmluY2x1ZGVzKGUpKX1jb25zdHJ1Y3RvcihlKXt0aGlzLmNoYXJ0PWV9Z2V0T3B0aW9ucygpe3JldHVybiBTdCh0aGlzLmNoYXJ0LmdldE9wdGlvbnMoKSl9cmVzZXRBbmltYXRpb25zKCl7dGhpcy5jaGFydC5yZXNldEFuaW1hdGlvbnMoKX1za2lwQW5pbWF0aW9ucygpe3RoaXMuY2hhcnQuc2tpcEFuaW1hdGlvbnMoKX1kZXN0cm95KCl7dGhpcy5jaGFydC5kZXN0cm95KCl9fTttaC5jaGFydEluc3RhbmNlcz1uZXcgV2Vha01hcCx5KFtobih7b2xkVmFsdWUoZSl7bWguY2hhcnRJbnN0YW5jZXMuZGVsZXRlKGUpfSxuZXdWYWx1ZShlKXttaC5jaGFydEluc3RhbmNlcy5zZXQoZSx0aGlzKX19KV0sbWgucHJvdG90eXBlLCJjaGFydCIsMik7dmFyIGZoPW1oLHZoPWNsYXNzIGV4dGVuZHMgUm57Y29uc3RydWN0b3IoKXtzdXBlcihbMCwxXSxbMCwxXSksdGhpcy50eXBlPSJsaW5lYXIifXRvRG9tYWluKGUpe3JldHVybiBlfXRpY2tzKCl7dmFyIGU7Y29uc3QgdD1udWxsIT0oZT10aGlzLnRpY2tDb3VudCk/ZTpSbi5kZWZhdWx0VGlja0NvdW50O2lmKCF0aGlzLmRvbWFpbnx8dGhpcy5kb21haW4ubGVuZ3RoPDJ8fHQ8MXx8dGhpcy5kb21haW4uc29tZShlPT4haXNGaW5pdGUoZSkpKXJldHVybltdO3RoaXMucmVmcmVzaCgpO2NvbnN0W2ksc109dGhpcy5nZXREb21haW4oKSx7aW50ZXJ2YWw6cn09dGhpcztpZihyKXtjb25zdCBlPU1hdGguYWJzKHIpO2lmKCF0aGlzLmlzRGVuc2VJbnRlcnZhbCh7c3RhcnQ6aSxzdG9wOnMsaW50ZXJ2YWw6ZX0pKXJldHVybiBUYShpLHMsZSl9cmV0dXJuIEVhKGkscyx0LHRoaXMubWluVGlja0NvdW50LHRoaXMubWF4VGlja0NvdW50KX11cGRhdGUoKXshdGhpcy5kb21haW58fHRoaXMuZG9tYWluLmxlbmd0aDwyfHx0aGlzLm5pY2UmJnRoaXMudXBkYXRlTmljZURvbWFpbigpfWdldFRpY2tTdGVwKGUsdCl7dmFyIGkscztjb25zdCByPW51bGwhPShpPXRoaXMudGlja0NvdW50KT9pOlJuLmRlZmF1bHRUaWNrQ291bnQ7cmV0dXJuIG51bGwhPShzPXRoaXMuaW50ZXJ2YWwpP3M6eGEoZSx0LHIsdGhpcy5taW5UaWNrQ291bnQsdGhpcy5tYXhUaWNrQ291bnQpfXVwZGF0ZU5pY2VEb21haW4oKXt2YXIgZTtjb25zdCB0PW51bGwhPShlPXRoaXMudGlja0NvdW50KT9lOlJuLmRlZmF1bHRUaWNrQ291bnQ7aWYodDwxKXJldHVybiB2b2lkKHRoaXMubmljZURvbWFpbj1bLi4udGhpcy5kb21haW5dKTtsZXRbaSxzXT10aGlzLmRvbWFpbjtpZigxPT09dClbaSxzXT1mdW5jdGlvbihlLHQpe2NvbnN0IGk9TWF0aC5hYnModC1lKSxzPU1hdGguZmxvb3IoTWF0aC5sb2cxMChpKSkscj1NYXRoLnBvdygxMCxzKSxvPWU+dD9NYXRoLmNlaWw6TWF0aC5mbG9vcixuPXQ8ZT9NYXRoLmZsb29yOk1hdGguY2VpbDtyZXR1cm4gUmEubWFwKHM9Pntjb25zdCBhPXMqcixsPW8oZS9hKSphLGQ9bih0L2EpKmE7cmV0dXJue2Vycm9yOjEtaS9NYXRoLmFicyhkLWwpLGRvbWFpbjpbbCxkXX19KS5zb3J0KChlLHQpPT5lLmVycm9yLXQuZXJyb3IpWzBdLmRvbWFpbn0oaSxzKTtlbHNle2NvbnN0IGU9aT5zP01hdGguY2VpbDpNYXRoLmZsb29yLHQ9czxpP01hdGguZmxvb3I6TWF0aC5jZWlsLHI9NDtmb3IobGV0IG89MDtvPHI7bysrKXtjb25zdCByPWksbz1zLG49dGhpcy5nZXRUaWNrU3RlcChpLHMpLFthLGxdPXRoaXMuZG9tYWluO2lmKG4+PTEpaT1lKGEvbikqbixzPXQobC9uKSpuO2Vsc2V7Y29uc3Qgcj0xL247aT1lKGEqcikvcixzPXQobCpyKS9yfWlmKGk9PT1yJiZzPT09bylicmVha319dGhpcy5uaWNlRG9tYWluPVtpLHNdfXRpY2tGb3JtYXQoe3RpY2tzOmUsc3BlY2lmaWVyOnR9KXtyZXR1cm4gd2EobnVsbCE9ZT9lOnRoaXMudGlja3MoKSx0KX19O2Z1bmN0aW9uIENoKGUsdCxpKXtsZXRbcyxyXT0kcyhlKTtzPWZ1bmN0aW9uKGUsdCxpKXtjb25zdCBzPU1hdGguYWJzKHQtZSkvKGktMSkscj1NYXRoLmZsb29yKE1hdGgubG9nMTAocykpLG89TWF0aC5wb3coMTAscik7cmV0dXJuIE1hdGguZmxvb3IoZS9vKSpvfShNYXRoLmZsb29yKHMpLHIsdCk7Y29uc3Qgbz1mdW5jdGlvbihlLHQsaSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2NvbnN0IHQ9TWF0aC5mbG9vcihNYXRoLmxvZzEwKGUpKSxpPU1hdGgucG93KDEwLHQpLHM9ZS9pKjEwO2lmKHM+MCYmczw9MSlyZXR1cm4gaS8xMDtpZihzPjEmJnM8PTIpcmV0dXJuIDIqaS8xMDtpZihzPjEmJnM8PTUpcmV0dXJuIDUqaS8xMDtpZihzPjUmJnM8PTEwKXJldHVybiAxMCppLzEwO2lmKHM+MTAmJnM8PTIwKXJldHVybiAyMCppLzEwO2lmKHM+MjAmJnM8PTQwKXJldHVybiA0MCppLzEwO2lmKHM+NDAmJnM8PTUwKXJldHVybiA1MCppLzEwO2lmKHM+NTAmJnM8PTEwMClyZXR1cm4gMTAwKmkvMTA7cmV0dXJuIHN9KCh0LWUpLyhpLTEpKX0ocyxyLHQpO3I9cysodC0xKSpvO3JldHVybltpP1tyLHNdOltzLHJdLGZ1bmN0aW9uKGUsdCxpKXtjb25zdCBzPU1hdGguZmxvb3IoTWF0aC5sb2cxMCh0KSkscj10PjAmJnQ8MT9NYXRoLmFicyhzKTowLG89TWF0aC5wb3coMTAsciksbj1iYShyKTtmb3IobGV0IHM9MDtzPGk7cysrKXtjb25zdCBpPWUrdCpzO25bc109TWF0aC5yb3VuZChpKm8pL299cmV0dXJuIG59KHMsbyx0KV19dmFyIHloPWNsYXNzIGV4dGVuZHMgWmF7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMubWF4U3BhY2luZz1OYU59fTt5KFtxcihIbyksWWEoTmFOKV0seWgucHJvdG90eXBlLCJtYXhTcGFjaW5nIiwyKTt2YXIgU2g9Y2xhc3MgZXh0ZW5kcyBobHtjb25zdHJ1Y3RvcihlLHQ9bmV3IHZoKXtzdXBlcihlLHQpLHRoaXMubWluPU5hTix0aGlzLm1heD1OYU59bm9ybWFsaXNlRGF0YURvbWFpbihlKXtjb25zdHttaW46dCxtYXg6aX09dGhpcyx7ZXh0ZW50OnMsY2xpcHBlZDpyfT14cyhlLHQsaSk7cmV0dXJue2RvbWFpbjpzLGNsaXBwZWQ6cn19Zm9ybWF0RGF0dW0oZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlP2UudG9GaXhlZCgyKTooTC53YXJuT25jZSgiZGF0YSBjb250YWlucyBEYXRlIG9iamVjdHMgd2hpY2ggYXJlIGJlaW5nIHBsb3R0ZWQgYWdhaW5zdCBhIG51bWJlciBheGlzLCBwbGVhc2Ugb25seSB1c2UgYSBudW1iZXIgYXhpcyBmb3IgbnVtYmVycy4iKSxTdHJpbmcoZSkpfWNyZWF0ZVRpY2soKXtyZXR1cm4gbmV3IHlofXVwZGF0ZVNlY29uZGFyeUF4aXNUaWNrcyhlKXtpZihudWxsPT10aGlzLmRhdGFEb21haW4pdGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSBkYXRhRG9tYWluIG5vdCBjYWxjdWxhdGVkLCBjYW5ub3QgcGVyZm9ybSB0aWNrIGNhbGN1bGF0aW9uLiIpO2lmKDA9PT10aGlzLmRhdGFEb21haW4uZG9tYWluLmxlbmd0aClyZXR1cm5bXTtjb25zdFt0LGldPUNoKHRoaXMuZGF0YURvbWFpbi5kb21haW4sbnVsbCE9ZT9lOjAsdGhpcy5yZXZlcnNlKTtyZXR1cm4gdGhpcy5zY2FsZS5uaWNlPSExLHRoaXMuc2NhbGUuZG9tYWluPXQsdGhpcy5zY2FsZS51cGRhdGUoKSxpfX07U2guY2xhc3NOYW1lPSJOdW1iZXJBeGlzIixTaC50eXBlPSJudW1iZXIiLHkoW3FyKFFyKGNvLGdvKCJtYXgiKSkpLFlhKE5hTildLFNoLnByb3RvdHlwZSwibWluIiwyKSx5KFtxcihRcihjbyxtbygibWluIikpKSxZYShOYU4pXSxTaC5wcm90b3R5cGUsIm1heCIsMik7dmFyIHdoPVdvKGU9PldlKGUpJiYwIT09ZSwiYSBub24temVybyBudW1iZXIiKSxiaD1jbGFzcyBleHRlbmRzIFNoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsbmV3IE9hKSx0aGlzLm1pbj1OYU4sdGhpcy5tYXg9TmFOfW5vcm1hbGlzZURhdGFEb21haW4oZSl7Y29uc3R7bWluOnQsbWF4Oml9PXRoaXMse2V4dGVudDpzLGNsaXBwZWQ6cn09eHMoZSx0LGkpLG89c1swXT5zWzFdLG49c1swXTwwJiZzWzFdPjAsYT0wPT09c1swXSYmMD09PXNbMV07cmV0dXJuKG98fG58fGEpJiYoZT1bXSxuP0wud2FybigidGhlIGRhdGEgZG9tYWluIGNyb3NzZXMgemVybywgdGhlIGNoYXJ0IGRhdGEgY2Fubm90IGJlIHJlbmRlcmVkLiBTZWUgbG9nIGF4aXMgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbi4iKTphJiZMLndhcm4oInRoZSBkYXRhIGRvbWFpbiBoYXMgMCBleHRlbnQsIG5vIGRhdGEgaXMgcmVuZGVyZWQuIikpLDA9PT1zWzBdJiYoc1swXT0xKSwwPT09c1sxXSYmKHNbMV09LTEpLHtkb21haW46cyxjbGlwcGVkOnJ9fXNldCBiYXNlKGUpe3RoaXMuc2NhbGUuYmFzZT1lfWdldCBiYXNlKCl7cmV0dXJuIHRoaXMuc2NhbGUuYmFzZX19O2JoLmNsYXNzTmFtZT0iTG9nQXhpcyIsYmgudHlwZT0ibG9nIix5KFtxcihRcihjbyx3aCxnbygibWF4IikpKSxZYShOYU4pXSxiaC5wcm90b3R5cGUsIm1pbiIsMikseShbcXIoUXIoY28sd2gsbW8oIm1pbiIpKSksWWEoTmFOKV0sYmgucHJvdG90eXBlLCJtYXgiLDIpO3ZhciBFaD1jbGFzcyBleHRlbmRzIFphe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLm1heFNwYWNpbmc9TmFOfX07eShbcXIoSG8pLFlhKE5hTildLEVoLnByb3RvdHlwZSwibWF4U3BhY2luZyIsMik7dmFyIFJoPWNsYXNzIGV4dGVuZHMgaGx7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSxuZXcgX2EpLHRoaXMuZGF0dW1Gb3JtYXQ9IiVtLyVkLyV5LCAlSDolTTolUyIsdGhpcy5taW49dm9pZCAwLHRoaXMubWF4PXZvaWQgMDtjb25zdHtzY2FsZTp0fT10aGlzO3RoaXMucmVmcmVzaFNjYWxlKCksdGhpcy5kYXR1bUZvcm1hdHRlcj10LnRpY2tGb3JtYXQoe3NwZWNpZmllcjp0aGlzLmRhdHVtRm9ybWF0fSl9bm9ybWFsaXNlRGF0YURvbWFpbihlKXt2YXIgdDtsZXR7bWluOmksbWF4OnN9PXRoaXMscj0hMTtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGkmJihpPW5ldyBEYXRlKGkpKSwibnVtYmVyIj09dHlwZW9mIHMmJihzPW5ldyBEYXRlKHMpKSxlLmxlbmd0aD4yJiYoZT0obnVsbCE9KHQ9RXMoZSkpP3Q6WzAsMWUzXSkubWFwKGU9Pm5ldyBEYXRlKGUpKSksaSBpbnN0YW5jZW9mIERhdGUmJihyfHwocj1pPmVbMF0pLGU9W2ksZVsxXV0pLHMgaW5zdGFuY2VvZiBEYXRlJiYocnx8KHI9czxlWzFdKSxlPVtlWzBdLHNdKSxlWzBdPmVbMV0mJihlPVtdKSx7ZG9tYWluOmUsY2xpcHBlZDpyfX1jcmVhdGVUaWNrKCl7cmV0dXJuIG5ldyBFaH1vbkxhYmVsRm9ybWF0Q2hhbmdlKGUsdCl7dD9zdXBlci5vbkxhYmVsRm9ybWF0Q2hhbmdlKGUsdCk6dGhpcy5sYWJlbEZvcm1hdHRlcj10aGlzLnNjYWxlLnRpY2tGb3JtYXQoe3RpY2tzOmV9KX1mb3JtYXREYXR1bShlKXt2YXIgdDtyZXR1cm4gbnVsbCE9KHQ9dGhpcy5tb2R1bGVDdHguY2FsbGJhY2tDYWNoZS5jYWxsKHRoaXMuZGF0dW1Gb3JtYXR0ZXIsZSkpP3Q6U3RyaW5nKGUpfWNhbGN1bGF0ZVBhZGRpbmcoZSx0LGkpe3JldHVybiBpP1sxLDBdOlswLDFdfX07UmguY2xhc3NOYW1lPSJUaW1lQXhpcyIsUmgudHlwZT0idGltZSIseShbcXIoUXIodm8sZ28oIm1heCIpKSx7b3B0aW9uYWw6ITB9KV0sUmgucHJvdG90eXBlLCJtaW4iLDIpLHkoW3FyKFFyKHZvLG1vKCJtaW4iKSkse29wdGlvbmFsOiEwfSldLFJoLnByb3RvdHlwZSwibWF4IiwyKTt2YXIgeGg9KGUsdCxpLHMscik9PntsZXQgbz0hMSxuPSExLGE9cy1NYXRoLnNxcnQoTWF0aC5tYXgocChyLDIpLXAoaSwyKSwwKSksbD0wLGQ9MCxjPWktTWF0aC5zcXJ0KE1hdGgubWF4KHAociwyKS1wKHMsMiksMCkpO3JldHVybiBhPmU/KG89ITAsYT1lLGw9aS1NYXRoLnNxcnQoTWF0aC5tYXgocChyLDIpLXAocy1lLDIpKSkpOmE8MWUtNiYmKGE9MCksYz50PyhuPSEwLGQ9cy1NYXRoLnNxcnQoTWF0aC5tYXgocChyLDIpLXAoaS10LDIpKSksYz10KTpjPDFlLTYmJihjPTApLHtsZWFkaW5nMDphLGxlYWRpbmcxOmwsdHJhaWxpbmcwOmQsdHJhaWxpbmcxOmMsbGVhZGluZ0NsaXBwZWQ6byx0cmFpbGluZ0NsaXBwZWQ6bn19LFRoPShlLHt4MDp0LHkwOmkseDE6cyx5MTpyLGN4Om8sY3k6bn0sYSxsKT0+e2lmKGwmJmUubW92ZVRvKHQsaSksdCE9PXN8fGkhPT1yKXtjb25zdCBsPU1hdGguYXRhbjIoaS1uLHQtbyksZD1NYXRoLmF0YW4yKHItbixzLW8pO2UuYXJjKG8sbixhLGwsZCl9ZWxzZSBlLmxpbmVUbyh0LGkpfSxEaD0oZSx0LGkscyxyLG8sbik9PntsZXR7dG9wTGVmdDphLHRvcFJpZ2h0OmwsYm90dG9tUmlnaHQ6ZCxib3R0b21MZWZ0OmN9PW87Y29uc3QgaD1NYXRoLm1heChhK2MsbCtkKSx1PU1hdGgubWF4KGErbCxjK2QpO2lmKGg8PTAmJnU8PTApcmV0dXJuIHZvaWQgZS5yZWN0KHQsaSxzLHIpO2lmKG51bGw9PW4mJmE9PT1sJiZhPT09ZCYmYT09PWMpcmV0dXJuIHZvaWQgZS5yb3VuZFJlY3QodCxpLHMscixhKTtpZihzPDAmJih0Kz1zLHM9TWF0aC5hYnMocykpLHI8MCYmKGkrPXIscj1NYXRoLmFicyhyKSksbnVsbCE9bil7Y29uc3QgZT1NYXRoLm1heCh0LG4ueCksbz1NYXRoLm1pbih0K3Msbi54K24ud2lkdGgpLGE9TWF0aC5tYXgoaSxuLnkpLGw9TWF0aC5taW4oaStyLG4ueStuLmhlaWdodCk7dD1lLGk9YSxzPW8tZSxyPWwtYX1pZihzPD0wfHxyPD0wKXJldHVybjtudWxsIT1ufHwobj1uZXcgb3IodCxpLHMscikpO2NvbnN0IHA9TWF0aC5tYXgoaC9uLmhlaWdodCx1L24ud2lkdGgsMSk7cD4xJiYoYS89cCxsLz1wLGQvPXAsYy89cCk7bGV0IGcsbSxmLHYsQz0hMCx5PSEwLFM9ITAsdz0hMDtpZihDKXtjb25zdCBlPXhoKHIscyxNYXRoLm1heChuLngrYS10LDApLE1hdGgubWF4KG4ueSthLWksMCksYSk7ZS5sZWFkaW5nQ2xpcHBlZCYmKHc9ITEpLGUudHJhaWxpbmdDbGlwcGVkJiYoeT0hMSk7Zz17eDA6TWF0aC5tYXgodCtlLmxlYWRpbmcxLHQpLHkwOk1hdGgubWF4KGkrZS5sZWFkaW5nMCxpKSx4MTpNYXRoLm1heCh0K2UudHJhaWxpbmcxLHQpLHkxOk1hdGgubWF4KGkrZS50cmFpbGluZzAsaSksY3g6bi54K2EsY3k6bi55K2F9fWlmKHkpe2NvbnN0IGU9eGgocyxyLE1hdGgubWF4KG4ueStsLWksMCksTWF0aC5tYXgodCtzLShuLngrbi53aWR0aC1sKSwwKSxsKTtlLmxlYWRpbmdDbGlwcGVkJiYoQz0hMSksZS50cmFpbGluZ0NsaXBwZWQmJihTPSExKTttPXt4MDpNYXRoLm1pbih0K3MtZS5sZWFkaW5nMCx0K3MpLHkwOk1hdGgubWF4KGkrZS5sZWFkaW5nMSxpKSx4MTpNYXRoLm1pbih0K3MtZS50cmFpbGluZzAsdCtzKSx5MTpNYXRoLm1heChpK2UudHJhaWxpbmcxLGkpLGN4Om4ueCtuLndpZHRoLWwsY3k6bi55K2x9fWlmKFMpe2NvbnN0IGU9eGgocixzLE1hdGgubWF4KHQrcy0obi54K24ud2lkdGgtZCksMCksTWF0aC5tYXgoaStyLShuLnkrbi5oZWlnaHQtZCksMCksZCk7ZS5sZWFkaW5nQ2xpcHBlZCYmKHk9ITEpLGUudHJhaWxpbmdDbGlwcGVkJiYodz0hMSk7Zj17eDA6TWF0aC5taW4odCtzLWUubGVhZGluZzEsdCtzKSx5MDpNYXRoLm1pbihpK3ItZS5sZWFkaW5nMCxpK3IpLHgxOk1hdGgubWluKHQrcy1lLnRyYWlsaW5nMSx0K3MpLHkxOk1hdGgubWluKGkrci1lLnRyYWlsaW5nMCxpK3IpLGN4Om4ueCtuLndpZHRoLWQsY3k6bi55K24uaGVpZ2h0LWR9fWlmKHcpe2NvbnN0IGU9eGgocyxyLE1hdGgubWF4KGkrci0obi55K24uaGVpZ2h0LWMpLDApLE1hdGgubWF4KG4ueCtjLXQsMCksYyk7ZS5sZWFkaW5nQ2xpcHBlZCYmKFM9ITEpLGUudHJhaWxpbmdDbGlwcGVkJiYoQz0hMSk7dj17eDA6TWF0aC5tYXgodCtlLmxlYWRpbmcwLHQpLHkwOk1hdGgubWluKGkrci1lLmxlYWRpbmcxLGkrcikseDE6TWF0aC5tYXgodCtlLnRyYWlsaW5nMCx0KSx5MTpNYXRoLm1pbihpK3ItZS50cmFpbGluZzEsaStyKSxjeDpuLngrYyxjeTpuLnkrbi5oZWlnaHQtY319bGV0IGI9ITE7QyYmbnVsbCE9ZyYmKFRoKGUsZyxhLCFiKSxifHwoYj0hMCkpLHkmJm51bGwhPW0mJihUaChlLG0sbCwhYiksYnx8KGI9ITApKSxTJiZudWxsIT1mJiYoVGgoZSxmLGQsIWIpLGJ8fChiPSEwKSksdyYmbnVsbCE9diYmKFRoKGUsdixjLCFiKSxifHwoYj0hMCkpLGUuY2xvc2VQYXRoKCl9LE9oPWNsYXNzIGV4dGVuZHMgT2R7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuYm9yZGVyUGF0aD1uZXcgVGQsdGhpcy54PTAsdGhpcy55PTAsdGhpcy53aWR0aD0xMCx0aGlzLmhlaWdodD0xMCx0aGlzLnRvcExlZnRDb3JuZXJSYWRpdXM9MCx0aGlzLnRvcFJpZ2h0Q29ybmVyUmFkaXVzPTAsdGhpcy5ib3R0b21SaWdodENvcm5lclJhZGl1cz0wLHRoaXMuYm90dG9tTGVmdENvcm5lclJhZGl1cz0wLHRoaXMuY29ybmVyUmFkaXVzQmJveD12b2lkIDAsdGhpcy5jcmlzcD0hMSx0aGlzLmxhc3RVcGRhdGVQYXRoU3Ryb2tlV2lkdGg9Wm8uZGVmYXVsdFN0eWxlcy5zdHJva2VXaWR0aCx0aGlzLmVmZmVjdGl2ZVN0cm9rZVdpZHRoPVpvLmRlZmF1bHRTdHlsZXMuc3Ryb2tlV2lkdGgsdGhpcy5taWNyb1BpeGVsRWZmZWN0T3BhY2l0eT0xfXNldCBjb3JuZXJSYWRpdXMoZSl7dGhpcy50b3BMZWZ0Q29ybmVyUmFkaXVzPWUsdGhpcy50b3BSaWdodENvcm5lclJhZGl1cz1lLHRoaXMuYm90dG9tUmlnaHRDb3JuZXJSYWRpdXM9ZSx0aGlzLmJvdHRvbUxlZnRDb3JuZXJSYWRpdXM9ZX1pc0RpcnR5UGF0aCgpe3JldHVybiB0aGlzLmxhc3RVcGRhdGVQYXRoU3Ryb2tlV2lkdGghPT10aGlzLnN0cm9rZVdpZHRofHwhKCF0aGlzLnBhdGguaXNEaXJ0eSgpJiYhdGhpcy5ib3JkZXJQYXRoLmlzRGlydHkoKSl9dXBkYXRlUGF0aCgpe3ZhciBlLHQsaTtjb25zdHtwYXRoOnMsYm9yZGVyUGF0aDpyLGNyaXNwOm8sdG9wTGVmdENvcm5lclJhZGl1czpuLHRvcFJpZ2h0Q29ybmVyUmFkaXVzOmEsYm90dG9tUmlnaHRDb3JuZXJSYWRpdXM6bCxib3R0b21MZWZ0Q29ybmVyUmFkaXVzOmR9PXRoaXM7bGV0e3g6Yyx5Omgsd2lkdGg6dSxoZWlnaHQ6cCxzdHJva2VXaWR0aDpnLGNvcm5lclJhZGl1c0Jib3g6bX09dGhpcztjb25zdCBmPTEvKG51bGwhPSh0PW51bGw9PShlPXRoaXMubGF5ZXJNYW5hZ2VyKT92b2lkIDA6ZS5jYW52YXMucGl4ZWxSYXRpbyk/dDoxKTtsZXQgdj0xO2lmKHMuY2xlYXIoe3RyYWNrQ2hhbmdlczohMH0pLHIuY2xlYXIoe3RyYWNrQ2hhbmdlczohMH0pLG8mJih1PD1mJiYodio9dS9mKSxwPD1mJiYodio9cC9mKSx1PXRoaXMuYWxpZ24oYyx1KSxwPXRoaXMuYWxpZ24oaCxwKSxjPXRoaXMuYWxpZ24oYyksaD10aGlzLmFsaWduKGgpLG09bnVsbCE9bT9uZXcgb3IodGhpcy5hbGlnbihtLngpLHRoaXMuYWxpZ24obS55KSx0aGlzLmFsaWduKG0ueCxtLndpZHRoKSx0aGlzLmFsaWduKG0ueSxtLmhlaWdodCkpOnZvaWQgMCksZylpZih1PGYpe2NvbnN0IGU9YytmLzI7ci5tb3ZlVG8oZSxoKSxyLmxpbmVUbyhlLGgrcCksZz1mLHRoaXMuYm9yZGVyQ2xpcFBhdGg9dm9pZCAwfWVsc2UgaWYocDxmKXtjb25zdCBlPWgrZi8yO3IubW92ZVRvKGMsZSksci5saW5lVG8oYyt1LGUpLGc9Zix0aGlzLmJvcmRlckNsaXBQYXRoPXZvaWQgMH1lbHNlIGlmKGc8dSYmZzxwKXtjb25zdCBlPWcvMjtjKz1lLGgrPWUsdS09ZyxwLT1nO2NvbnN0IHQ9bnVsbD09bT92b2lkIDA6bS5jbG9uZSgpLnNocmluayhlKSxpPXt0b3BMZWZ0Om4+MD9uLWc6MCx0b3BSaWdodDphPjA/YS1nOjAsYm90dG9tUmlnaHQ6bD4wP2wtZzowLGJvdHRvbUxlZnQ6ZD4wP2QtZzowfTt0aGlzLmJvcmRlckNsaXBQYXRoPXZvaWQgMCxEaChzLGMsaCx1LHAsaSx0KSxEaChyLGMsaCx1LHAsaSx0KX1lbHNlIHRoaXMuYm9yZGVyQ2xpcFBhdGg9bnVsbCE9KGk9dGhpcy5ib3JkZXJDbGlwUGF0aCk/aTpuZXcgVGQsdGhpcy5ib3JkZXJDbGlwUGF0aC5jbGVhcih7dHJhY2tDaGFuZ2VzOiEwfSksdGhpcy5ib3JkZXJDbGlwUGF0aC5yZWN0KGMsaCx1LHApLHIucmVjdChjLGgsdSxwKTtlbHNle2NvbnN0IGU9e3RvcExlZnQ6bix0b3BSaWdodDphLGJvdHRvbVJpZ2h0OmwsYm90dG9tTGVmdDpkfTt0aGlzLmJvcmRlckNsaXBQYXRoPXZvaWQgMCxEaChzLGMsaCx1LHAsZSxtKX10aGlzLmVmZmVjdGl2ZVN0cm9rZVdpZHRoPWcsdGhpcy5sYXN0VXBkYXRlUGF0aFN0cm9rZVdpZHRoPWcsdGhpcy5taWNyb1BpeGVsRWZmZWN0T3BhY2l0eT12fWNvbXB1dGVCQm94KCl7Y29uc3R7eDplLHk6dCx3aWR0aDppLGhlaWdodDpzfT10aGlzO3JldHVybiBuZXcgb3IoZSx0LGkscyl9aXNQb2ludEluUGF0aChlLHQpe2NvbnN0IGk9dGhpcy50cmFuc2Zvcm1Qb2ludChlLHQpO3JldHVybiB0aGlzLmNvbXB1dGVCQm94KCkuY29udGFpbnNQb2ludChpLngsaS55KX1hcHBseUZpbGxBbHBoYShlKXtjb25zdHtmaWxsT3BhY2l0eTp0LG1pY3JvUGl4ZWxFZmZlY3RPcGFjaXR5Omksb3BhY2l0eTpzfT10aGlzLHtnbG9iYWxBbHBoYTpyfT1lO2UuZ2xvYmFsQWxwaGE9cipzKnQqaX1yZW5kZXJTdHJva2UoZSl7Y29uc3R7c3Ryb2tlOnQsZWZmZWN0aXZlU3Ryb2tlV2lkdGg6aSxib3JkZXJQYXRoOnMsYm9yZGVyQ2xpcFBhdGg6cixvcGFjaXR5Om8sbWljcm9QaXhlbEVmZmVjdE9wYWNpdHk6bn09dGhpcztpZighIXQmJiEhaSl7Y29uc3R7c3Ryb2tlT3BhY2l0eTphLGxpbmVEYXNoOmwsbGluZURhc2hPZmZzZXQ6ZCxsaW5lQ2FwOmMsbGluZUpvaW46aH09dGhpcztyJiYoci5kcmF3KGUpLGUuY2xpcCgpKSxzLmRyYXcoZSk7Y29uc3R7Z2xvYmFsQWxwaGE6dX09ZTtlLnN0cm9rZVN0eWxlPXQsZS5nbG9iYWxBbHBoYT11Km8qYSpuLGUubGluZVdpZHRoPWksbCYmZS5zZXRMaW5lRGFzaChsKSxkJiYoZS5saW5lRGFzaE9mZnNldD1kKSxjJiYoZS5saW5lQ2FwPWMpLGgmJihlLmxpbmVKb2luPWgpLGUuc3Ryb2tlKCksZS5nbG9iYWxBbHBoYT11fX19O09oLmNsYXNzTmFtZT0iUmVjdCIseShbRGQoKV0sT2gucHJvdG90eXBlLCJ4IiwyKSx5KFtEZCgpXSxPaC5wcm90b3R5cGUsInkiLDIpLHkoW0RkKCldLE9oLnByb3RvdHlwZSwid2lkdGgiLDIpLHkoW0RkKCldLE9oLnByb3RvdHlwZSwiaGVpZ2h0IiwyKSx5KFtEZCgpXSxPaC5wcm90b3R5cGUsInRvcExlZnRDb3JuZXJSYWRpdXMiLDIpLHkoW0RkKCldLE9oLnByb3RvdHlwZSwidG9wUmlnaHRDb3JuZXJSYWRpdXMiLDIpLHkoW0RkKCldLE9oLnByb3RvdHlwZSwiYm90dG9tUmlnaHRDb3JuZXJSYWRpdXMiLDIpLHkoW0RkKCldLE9oLnByb3RvdHlwZSwiYm90dG9tTGVmdENvcm5lclJhZGl1cyIsMikseShbRGQoKV0sT2gucHJvdG90eXBlLCJjb3JuZXJSYWRpdXNCYm94IiwyKSx5KFtEZCgpXSxPaC5wcm90b3R5cGUsImNyaXNwIiwyKTt2YXIgQWg9Y2xhc3MgZXh0ZW5kcyBwZXtjb25zdHJ1Y3RvcihlKXt2YXIgdDtzdXBlcigpLHRoaXMubm9kZT1uZXcgT24oe25hbWU6ImJhY2tncm91bmQiLHpJbmRleDowfSksdGhpcy5yZWN0Tm9kZT1uZXcgT2gsdGhpcy52aXNpYmxlPSEwLHRoaXMuZmlsbD0id2hpdGUiLHRoaXMuaW1hZ2U9dm9pZCAwLHRoaXMubm9kZS5hcHBlbmRDaGlsZCh0aGlzLnJlY3ROb2RlKSxudWxsPT0odD1lLnNjZW5lLnJvb3QpfHx0LmFwcGVuZENoaWxkKHRoaXMubm9kZSksdGhpcy5kZXN0cm95Rm5zLnB1c2goKCk9Pnt2YXIgdDtyZXR1cm4gbnVsbD09KHQ9ZS5zY2VuZS5yb290KT92b2lkIDA6dC5yZW1vdmVDaGlsZCh0aGlzLm5vZGUpfSxlLmxheW91dFNlcnZpY2UuYWRkTGlzdGVuZXIoImxheW91dC1jb21wbGV0ZSIsZT0+dGhpcy5vbkxheW91dENvbXBsZXRlKGUpKSl9b25MYXlvdXRDb21wbGV0ZShlKXtjb25zdHt3aWR0aDp0LGhlaWdodDppfT1lLmNoYXJ0O3RoaXMucmVjdE5vZGUud2lkdGg9dCx0aGlzLnJlY3ROb2RlLmhlaWdodD1pfX07eShbcXIodG8pLGNuKCJub2RlIiwidmlzaWJsZSIpXSxBaC5wcm90b3R5cGUsInZpc2libGUiLDIpLHkoW3FyKHlvLHtvcHRpb25hbDohMH0pLGNuKCJyZWN0Tm9kZSIsImZpbGwiKV0sQWgucHJvdG90eXBlLCJmaWxsIiwyKSx5KFtxcihlbyx7b3B0aW9uYWw6ITB9KV0sQWgucHJvdG90eXBlLCJpbWFnZSIsMik7dmFyIFBoPXt0eXBlOiJyb290IixvcHRpb25zS2V5OiJiYWNrZ3JvdW5kIixwYWNrYWdlVHlwZToiY29tbXVuaXR5IixjaGFydFR5cGVzOlsiY2FydGVzaWFuIiwicG9sYXIiLCJoaWVyYXJjaHkiXSxpbnN0YW5jZUNvbnN0cnVjdG9yOkFofSxNaD1jbGFzcyBleHRlbmRzIE9ke2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLl9maWxsPSIjZjJmMmYyIix0aGlzLl9zdHJva2U9IiM5OTk5OTkiLHRoaXMuX3N0cm9rZVdpZHRoPTEsdGhpcy5fbGluZUNhcD0ic3F1YXJlIix0aGlzLl9jZW50ZXJYPTAsdGhpcy5fY2VudGVyWT0wLHRoaXMuX3dpZHRoPTgsdGhpcy5fZ3JpcExpbmVHYXA9Mix0aGlzLl9ncmlwTGluZUxlbmd0aD04LHRoaXMuX2hlaWdodD0xNn1zZXQgY2VudGVyWChlKXt0aGlzLl9jZW50ZXJYIT09ZSYmKHRoaXMuX2NlbnRlclg9ZSx0aGlzLmRpcnR5UGF0aD0hMCl9Z2V0IGNlbnRlclgoKXtyZXR1cm4gdGhpcy5fY2VudGVyWH1zZXQgY2VudGVyWShlKXt0aGlzLl9jZW50ZXJZIT09ZSYmKHRoaXMuX2NlbnRlclk9ZSx0aGlzLmRpcnR5UGF0aD0hMCl9Z2V0IGNlbnRlclkoKXtyZXR1cm4gdGhpcy5fY2VudGVyWX1zZXQgd2lkdGgoZSl7dGhpcy5fd2lkdGghPT1lJiYodGhpcy5fd2lkdGg9ZSx0aGlzLmRpcnR5UGF0aD0hMCl9Z2V0IHdpZHRoKCl7cmV0dXJuIHRoaXMuX3dpZHRofXNldCBncmlwTGluZUdhcChlKXt0aGlzLl9ncmlwTGluZUdhcCE9PWUmJih0aGlzLl9ncmlwTGluZUdhcD1lLHRoaXMuZGlydHlQYXRoPSEwKX1nZXQgZ3JpcExpbmVHYXAoKXtyZXR1cm4gdGhpcy5fZ3JpcExpbmVHYXB9c2V0IGdyaXBMaW5lTGVuZ3RoKGUpe3RoaXMuX2dyaXBMaW5lTGVuZ3RoIT09ZSYmKHRoaXMuX2dyaXBMaW5lTGVuZ3RoPWUsdGhpcy5kaXJ0eVBhdGg9ITApfWdldCBncmlwTGluZUxlbmd0aCgpe3JldHVybiB0aGlzLl9ncmlwTGluZUxlbmd0aH1zZXQgaGVpZ2h0KGUpe3RoaXMuX2hlaWdodCE9PWUmJih0aGlzLl9oZWlnaHQ9ZSx0aGlzLmRpcnR5UGF0aD0hMCl9Z2V0IGhlaWdodCgpe3JldHVybiB0aGlzLl9oZWlnaHR9Y29tcHV0ZUJCb3goKXtjb25zdHtjZW50ZXJYOmUsY2VudGVyWTp0LHdpZHRoOmksaGVpZ2h0OnN9PXRoaXM7cmV0dXJuIG5ldyBvcihlLWkvMix0LXMvMixpLHMpfWlzUG9pbnRJblBhdGgoZSx0KXtjb25zdCBpPXRoaXMudHJhbnNmb3JtUG9pbnQoZSx0KTtyZXR1cm4gdGhpcy5jb21wdXRlQkJveCgpLmNvbnRhaW5zUG9pbnQoaS54LGkueSl9dXBkYXRlUGF0aCgpe2NvbnN0e3BhdGg6ZSxjZW50ZXJYOnQsY2VudGVyWTppLHdpZHRoOnMsaGVpZ2h0OnJ9PXRoaXM7ZS5jbGVhcigpO2NvbnN0IG89dC1zLzIsbj1pLXIvMixhPXRoaXMuYWxpZ24obyksbD10aGlzLmFsaWduKG4pLGQ9YSt0aGlzLmFsaWduKG8scyksYz1sK3RoaXMuYWxpZ24obixyKTtlLm1vdmVUbyhhLGwpLGUubGluZVRvKGQsbCksZS5saW5lVG8oZCxjKSxlLmxpbmVUbyhhLGMpLGUuY2xvc2VQYXRoKCk7Y29uc3QgaD10aGlzLmdyaXBMaW5lR2FwLzIsdT10aGlzLmdyaXBMaW5lTGVuZ3RoLzI7ZS5tb3ZlVG8odGhpcy5hbGlnbih0LWgpLHRoaXMuYWxpZ24oaS11KSksZS5saW5lVG8odGhpcy5hbGlnbih0LWgpLHRoaXMuYWxpZ24oaSt1KSksZS5tb3ZlVG8odGhpcy5hbGlnbih0K2gpLHRoaXMuYWxpZ24oaS11KSksZS5saW5lVG8odGhpcy5hbGlnbih0K2gpLHRoaXMuYWxpZ24oaSt1KSl9fTtmdW5jdGlvbiBMaChlLHQpe2UhPT10JiYodGhpcy5kaXJ0eVBhdGg9ITApfU1oLmNsYXNzTmFtZT0iUmFuZ2VIYW5kbGUiLHkoW3FyKHlvKV0sTWgucHJvdG90eXBlLCJfZmlsbCIsMikseShbcXIoeW8pXSxNaC5wcm90b3R5cGUsIl9zdHJva2UiLDIpLHkoW3FyKG5vKV0sTWgucHJvdG90eXBlLCJfc3Ryb2tlV2lkdGgiLDIpLHkoW3FyKFRvKV0sTWgucHJvdG90eXBlLCJfbGluZUNhcCIsMikseShbcXIobm8pXSxNaC5wcm90b3R5cGUsIl93aWR0aCIsMikseShbcXIobm8pXSxNaC5wcm90b3R5cGUsIl9ncmlwTGluZUdhcCIsMikseShbcXIobm8pXSxNaC5wcm90b3R5cGUsIl9ncmlwTGluZUxlbmd0aCIsMikseShbcXIobm8pXSxNaC5wcm90b3R5cGUsIl9oZWlnaHQiLDIpO3ZhciBGaD1jbGFzcyBleHRlbmRzIE9ke2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLng9MCx0aGlzLnk9MCx0aGlzLndpZHRoPTIwMCx0aGlzLmhlaWdodD0zMCx0aGlzLm1pblJhbmdlPS4wMDEsdGhpcy5fbWluPTAsdGhpcy5fbWF4PTF9c2V0IG1pbihlKXt2YXIgdDtlPUtzKDAsZSx0aGlzLm1heC10aGlzLm1pblJhbmdlKSx0aGlzLl9taW49PT1lfHxpc05hTihlKXx8KHRoaXMuX21pbj1lLHRoaXMuZGlydHlQYXRoPSEwLG51bGw9PSh0PXRoaXMub25SYW5nZUNoYW5nZSl8fHQuY2FsbCh0aGlzKSl9Z2V0IG1pbigpe3JldHVybiB0aGlzLl9taW59c2V0IG1heChlKXt2YXIgdDtlPUtzKHRoaXMubWluK3RoaXMubWluUmFuZ2UsZSwxKSx0aGlzLl9tYXg9PT1lfHxpc05hTihlKXx8KHRoaXMuX21heD1lLHRoaXMuZGlydHlQYXRoPSEwLG51bGw9PSh0PXRoaXMub25SYW5nZUNoYW5nZSl8fHQuY2FsbCh0aGlzKSl9Z2V0IG1heCgpe3JldHVybiB0aGlzLl9tYXh9Y29tcHV0ZUJCb3goKXtjb25zdHt4OmUseTp0LHdpZHRoOmksaGVpZ2h0OnN9PXRoaXM7cmV0dXJuIG5ldyBvcihlLHQsaSxzKX1jb21wdXRlVmlzaWJsZVJhbmdlQkJveCgpe2NvbnN0e3g6ZSx5OnQsd2lkdGg6aSxoZWlnaHQ6cyxtaW46cixtYXg6b309dGhpcyxuPWUraSpyO3JldHVybiBuZXcgb3Iobix0LGUraSpvLW4scyl9dXBkYXRlUGF0aCgpe2NvbnN0e3BhdGg6ZSx4OnQseTppLHdpZHRoOnMsaGVpZ2h0OnIsbWluOm8sbWF4Om59PXRoaXM7ZS5jbGVhcigpO2NvbnN0IGE9dGhpcy5hbGlnbih0KSxsPXRoaXMuYWxpZ24oaSksZD1hK3RoaXMuYWxpZ24odCxzKSxjPWwrdGhpcy5hbGlnbihpLHIpO2UubW92ZVRvKGEsbCksZS5saW5lVG8oZCxsKSxlLmxpbmVUbyhkLGMpLGUubGluZVRvKGEsYyksZS5saW5lVG8oYSxsKTtjb25zdCBoPXRoaXMuYWxpZ24odCtzKm8pLHU9dGhpcy5hbGlnbih0K3Mqbik7ZS5tb3ZlVG8oaCxsKSxlLmxpbmVUbyhoLGMpLGUubGluZVRvKHUsYyksZS5saW5lVG8odSxsKSxlLmxpbmVUbyhoLGwpfX07RmguY2xhc3NOYW1lPSJSYW5nZU1hc2siLHkoW2huKHtjaGFuZ2VWYWx1ZTpMaH0pLHFyKG5vKV0sRmgucHJvdG90eXBlLCJ4IiwyKSx5KFtobih7Y2hhbmdlVmFsdWU6TGh9KSxxcihubyldLEZoLnByb3RvdHlwZSwieSIsMikseShbaG4oe2NoYW5nZVZhbHVlOkxofSkscXIobm8pXSxGaC5wcm90b3R5cGUsIndpZHRoIiwyKSx5KFtobih7Y2hhbmdlVmFsdWU6TGh9KSxxcihubyldLEZoLnByb3RvdHlwZSwiaGVpZ2h0IiwyKSx5KFtxcihybyldLEZoLnByb3RvdHlwZSwiX21pbiIsMikseShbcXIocm8pXSxGaC5wcm90b3R5cGUsIl9tYXgiLDIpO3ZhciBJaD1jbGFzcyBlIGV4dGVuZHMgT257Y29uc3RydWN0b3IoKXtzdXBlcih7bmFtZToicmFuZ2VTZWxlY3Rvckdyb3VwIixsYXllcjohMH0pLHRoaXMubWluSGFuZGxlPW5ldyBNaCx0aGlzLm1heEhhbmRsZT1uZXcgTWgsdGhpcy5iYWNrZ3JvdW5kPSgoKT0+e2NvbnN0IGU9bmV3IE9uKHtuYW1lOiJuYXZpZ2F0b3ItYmFja2dyb3VuZCJ9KTtyZXR1cm4gZS56SW5kZXg9MSx0aGlzLmFwcGVuZENoaWxkKGUpLGV9KSgpLHRoaXMubWFzaz0oKCk9Pntjb25zdHt4OnQseTppLHdpZHRoOnMsaGVpZ2h0OnIsbWluOm8sbWF4Om59PWUuZGVmYXVsdHMsYT1uZXcgRmg7YS54PXQsYS55PWksYS53aWR0aD1zLGEuaGVpZ2h0PXIsYS5taW49byxhLm1heD1uLGEuekluZGV4PTI7Y29uc3R7bWluSGFuZGxlOmwsbWF4SGFuZGxlOmR9PXRoaXM7cmV0dXJuIGwuY2VudGVyWD10LGQuY2VudGVyWD10K3MsbC5jZW50ZXJZPWQuY2VudGVyWT1pK3IvMixsLnpJbmRleD00LGQuekluZGV4PTMsdGhpcy5hcHBlbmQoW2EsbCxkXSksYS5vblJhbmdlQ2hhbmdlPSgpPT57dmFyIGU7dGhpcy51cGRhdGVIYW5kbGVzKCksbnVsbD09KGU9dGhpcy5vblJhbmdlQ2hhbmdlKXx8ZS5jYWxsKHRoaXMpfSxhfSkoKSx0aGlzLmlzQ29udGFpbmVyTm9kZT0hMH1sYXlvdXQoZSx0LGkscyl7dGhpcy5tYXNrLng9ZSx0aGlzLm1hc2sueT10LHRoaXMubWFzay53aWR0aD1pLHRoaXMubWFzay5oZWlnaHQ9cyx0aGlzLnVwZGF0ZUhhbmRsZXMoKSx0aGlzLmJhY2tncm91bmQudHJhbnNsYXRpb25YPWUsdGhpcy5iYWNrZ3JvdW5kLnRyYW5zbGF0aW9uWT10fXVwZGF0ZUhhbmRsZXMoKXtjb25zdHt4OmUseTp0LHdpZHRoOmksaGVpZ2h0OnN9PXRoaXMubWFzayx7bWluSGFuZGxlOnIsbWF4SGFuZGxlOm8sbWluOm4sbWF4OmF9PXRoaXM7ci5jZW50ZXJYPWUraSpuLG8uY2VudGVyWD1lK2kqYSxyLmNlbnRlclk9by5jZW50ZXJZPXQrcy8yLG4rKGEtbikvMjwuNT8oci56SW5kZXg9MyxvLnpJbmRleD00KTooci56SW5kZXg9NCxvLnpJbmRleD0zKX1jb21wdXRlQkJveCgpe3JldHVybiB0aGlzLm1hc2suY29tcHV0ZUJCb3goKX1jb21wdXRlVmlzaWJsZVJhbmdlQkJveCgpe3JldHVybiB0aGlzLm1hc2suY29tcHV0ZVZpc2libGVSYW5nZUJCb3goKX19O0loLmNsYXNzTmFtZT0iUmFuZ2UiLEloLmRlZmF1bHRzPXt4OjAseTowLHdpZHRoOjIwMCxoZWlnaHQ6MzAsbWluOjAsbWF4OjF9LHkoW2xuKCJtYXNrLm1pbiIpXSxJaC5wcm90b3R5cGUsIm1pbiIsMikseShbbG4oIm1hc2subWF4IildLEloLnByb3RvdHlwZSwibWF4IiwyKTt2YXIgTmg9SWgsR2g9Y2xhc3MgZXh0ZW5kcyBwZXtjb25zdHJ1Y3RvcihlKXt2YXIgdDtzdXBlcigpLHRoaXMuY3R4PWUsdGhpcy5ycz1uZXcgTmgsdGhpcy5taW5pQ2hhcnQ9dm9pZCAwLHRoaXMubWluSGFuZGxlRHJhZ2dpbmc9ITEsdGhpcy5tYXhIYW5kbGVEcmFnZ2luZz0hMSx0aGlzLnBhbkhhbmRsZU9mZnNldD1OYU4sdGhpcy5lbmFibGVkPSExLHRoaXMuaGVpZ2h0PTMwLHRoaXMubWFyZ2luPTEwLHRoaXMudmlzaWJsZT0hMCx0aGlzLng9MCx0aGlzLnk9MCx0aGlzLndpZHRoPTAsdGhpcy5ycy5vblJhbmdlQ2hhbmdlPWZ1bmN0aW9uKGUsdD0wLGkpe2NvbnN0e2xlYWRpbmc6cz0hMSx0cmFpbGluZzpyPSEwLG1heFdhaXQ6bz0xLzB9PW51bGwhPWk/aTp7fTtsZXQgbixhO2lmKG88dCl0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG9mIG1heFdhaXQgY2Fubm90IGJlIGxvd2VyIHRoYW4gd2FpdE1zLiIpO3JldHVybiBPYmplY3QuYXNzaWduKChmdW5jdGlvbiguLi5pKXtpZihzJiYhYSlyZXR1cm4gYT1EYXRlLm5vdygpLG49c2V0VGltZW91dCgoKT0+YT1udWxsLHQpLHZvaWQgZSguLi5pKTtsZXQgbD10O2lmKG8hPT0xLzAmJmEpe2NvbnN0IGU9RGF0ZS5ub3coKS1hO3Q+by1lJiYobD1vLWUpfWNsZWFyVGltZW91dChuKSxudWxsIT1hfHwoYT1EYXRlLm5vdygpKSxuPXNldFRpbWVvdXQoKCk9PnthPW51bGwsciYmZSguLi5pKX0sbCl9KSx7Y2FuY2VsKCl7Y2xlYXJUaW1lb3V0KG4pLGE9bnVsbH19KX0oKCk9PnRoaXMub25SYW5nZUNoYW5nZSgpKSxudWxsPT0odD1lLnNjZW5lLnJvb3QpfHx0LmFwcGVuZENoaWxkKHRoaXMucnMpO3RoaXMuZGVzdHJveUZucy5wdXNoKGUuaW50ZXJhY3Rpb25NYW5hZ2VyLmFkZExpc3RlbmVyKCJkcmFnLXN0YXJ0IixlPT50aGlzLm9uRHJhZ1N0YXJ0KGUpLDEzKSxlLmludGVyYWN0aW9uTWFuYWdlci5hZGRMaXN0ZW5lcigiZHJhZyIsZT0+dGhpcy5vbkRyYWcoZSksMTMpLGUuaW50ZXJhY3Rpb25NYW5hZ2VyLmFkZExpc3RlbmVyKCJob3ZlciIsZT0+dGhpcy5vbkRyYWcoZSksMTMpLGUuaW50ZXJhY3Rpb25NYW5hZ2VyLmFkZExpc3RlbmVyKCJkcmFnLWVuZCIsKCk9PnRoaXMub25EcmFnU3RvcCgpLDEzKSxlLnpvb21NYW5hZ2VyLmFkZExpc3RlbmVyKCJ6b29tLWNoYW5nZSIsKCk9PnRoaXMub25ab29tQ2hhbmdlKCkpLCgpPT57dmFyIHQ7cmV0dXJuIG51bGw9PSh0PWUuc2NlbmUucm9vdCk/dm9pZCAwOnQucmVtb3ZlQ2hpbGQodGhpcy5ycyl9LCgpPT5kZWxldGUgdGhpcy5ycy5vblJhbmdlQ2hhbmdlKSx0aGlzLnVwZGF0ZUdyb3VwVmlzaWJpbGl0eSgpfXVwZGF0ZUdyb3VwVmlzaWJpbGl0eSgpe2NvbnN0IGU9Qm9vbGVhbih0aGlzLmVuYWJsZWQmJnRoaXMudmlzaWJsZSk7ZSE9PXRoaXMucnMudmlzaWJsZSYmKHRoaXMucnMudmlzaWJsZT1lLGUmJnRoaXMub25SYW5nZUNoYW5nZSgpKX1wZXJmb3JtTGF5b3V0KGUpe3JldHVybiB3KHRoaXMsYXJndW1lbnRzLChmdW5jdGlvbiooe3Nocmlua1JlY3Q6ZX0pe2lmKHRoaXMuZW5hYmxlZCl7Y29uc3QgdD10aGlzLmhlaWdodCt0aGlzLm1hcmdpbjtlLnNocmluayh0LCJib3R0b20iKSx0aGlzLnk9ZS55K2UuaGVpZ2h0K3RoaXMubWFyZ2lufWVsc2UgdGhpcy55PTA7cmV0dXJue3Nocmlua1JlY3Q6ZX19KSl9cGVyZm9ybUNhcnRlc2lhbkxheW91dChlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e3g6dCx3aWR0aDppfT1lLnNlcmllc1JlY3Q7aWYodGhpcy5lbmFibGVkKXtjb25zdHt5OmUsaGVpZ2h0OnN9PXRoaXM7dGhpcy5ycy5sYXlvdXQodCxlLGkscyl9dGhpcy52aXNpYmxlPSEwLHRoaXMueD10LHRoaXMud2lkdGg9aX0pKX1vblJhbmdlQ2hhbmdlKCl7dmFyIGUsdDtjb25zdHttaW46aSxtYXg6c309dGhpcy5ycyxyPXRoaXMuY3R4Lnpvb21NYW5hZ2VyLmdldFpvb20oKTsobnVsbD09KGU9bnVsbD09cj92b2lkIDA6ci54KT92b2lkIDA6ZS5taW4pPT09aSYmKG51bGw9PSh0PW51bGw9PXI/dm9pZCAwOnIueCk/dm9pZCAwOnQubWF4KT09PXN8fHRoaXMuY3R4Lnpvb21NYW5hZ2VyLnVwZGF0ZVpvb20oe3g6e21pbjppLG1heDpzfSx5Om51bGw9PXI/dm9pZCAwOnIueX0pfW9uWm9vbUNoYW5nZSgpe2NvbnN0IGU9dGhpcy5jdHguem9vbU1hbmFnZXIuZ2V0Wm9vbSgpO2UmJmUueCYmKHRoaXMubWluPWUueC5taW4sdGhpcy5tYXg9ZS54Lm1heCl9b25EcmFnU3RhcnQoZSl7aWYoIXRoaXMuZW5hYmxlZClyZXR1cm47Y29uc3R7b2Zmc2V0WDp0LG9mZnNldFk6aX09ZSx7cnM6c309dGhpcyx7bWluSGFuZGxlOnIsbWF4SGFuZGxlOm8sbWluOm59PXMse3g6YSx3aWR0aDpsfT10aGlzLGQ9cy5jb21wdXRlVmlzaWJsZVJhbmdlQkJveCgpO3RoaXMubWluSGFuZGxlRHJhZ2dpbmd8fHRoaXMubWF4SGFuZGxlRHJhZ2dpbmd8fChyLnpJbmRleDxvLnpJbmRleD9vLmNvbnRhaW5zUG9pbnQodCxpKT90aGlzLm1heEhhbmRsZURyYWdnaW5nPSEwOnIuY29udGFpbnNQb2ludCh0LGkpJiYodGhpcy5taW5IYW5kbGVEcmFnZ2luZz0hMCk6ci5jb250YWluc1BvaW50KHQsaSk/dGhpcy5taW5IYW5kbGVEcmFnZ2luZz0hMDpvLmNvbnRhaW5zUG9pbnQodCxpKSYmKHRoaXMubWF4SGFuZGxlRHJhZ2dpbmc9ITApLHRoaXMubWluSGFuZGxlRHJhZ2dpbmd8fHRoaXMubWF4SGFuZGxlRHJhZ2dpbmd8fCFkLmNvbnRhaW5zUG9pbnQodCxpKXx8KHRoaXMucGFuSGFuZGxlT2Zmc2V0PSh0LWEpL2wtbikpfW9uRHJhZyhlKXtpZighdGhpcy5lbmFibGVkKXJldHVybjtjb25zdHtyczp0LHBhbkhhbmRsZU9mZnNldDppfT10aGlzLHttaW5IYW5kbGU6cyxtYXhIYW5kbGU6cn09dCx7eDpvLHk6bix3aWR0aDphLGhlaWdodDpsfT10aGlzLHtvZmZzZXRYOmQsb2Zmc2V0WTpjfT1lLGg9bythKnQubWluLHU9bythKnQubWF4LHA9bmV3IG9yKGgsbix1LWgsbCksZz0oKT0+S3MoMCwoZC1vKS9hLDEpO2lmKHMuY29udGFpbnNQb2ludChkLGMpfHxyLmNvbnRhaW5zUG9pbnQoZCxjKT90aGlzLmN0eC5jdXJzb3JNYW5hZ2VyLnVwZGF0ZUN1cnNvcigibmF2aWdhdG9yIiwiZXctcmVzaXplIik6cC5jb250YWluc1BvaW50KGQsYyk/dGhpcy5jdHguY3Vyc29yTWFuYWdlci51cGRhdGVDdXJzb3IoIm5hdmlnYXRvciIsImdyYWIiKTp0aGlzLmN0eC5jdXJzb3JNYW5hZ2VyLnVwZGF0ZUN1cnNvcigibmF2aWdhdG9yIiksdGhpcy5taW5IYW5kbGVEcmFnZ2luZyl0Lm1pbj1nKCk7ZWxzZSBpZih0aGlzLm1heEhhbmRsZURyYWdnaW5nKXQubWF4PWcoKTtlbHNlIGlmKCFpc05hTihpKSl7Y29uc3QgZT10Lm1heC10Lm1pbixzPU1hdGgubWluKGcoKS1pLDEtZSk7czw9dC5taW4/KHQubWluPXMsdC5tYXg9dC5taW4rZSk6KHQubWF4PXMrZSx0Lm1pbj10Lm1heC1lKX19b25EcmFnU3RvcCgpe3RoaXMuc3RvcEhhbmRsZURyYWdnaW5nKCl9c3RvcEhhbmRsZURyYWdnaW5nKCl7dGhpcy5taW5IYW5kbGVEcmFnZ2luZz10aGlzLm1heEhhbmRsZURyYWdnaW5nPSExLHRoaXMucGFuSGFuZGxlT2Zmc2V0PU5hTn19O3koW3FyKGVvLHtvcHRpb25hbDohMH0pXSxHaC5wcm90b3R5cGUsIm1pbmlDaGFydCIsMikseShbcXIodG8pLHVuKGU9PmUudXBkYXRlR3JvdXBWaXNpYmlsaXR5KCkpXSxHaC5wcm90b3R5cGUsImVuYWJsZWQiLDIpLHkoW2xuKCJycy5tYXNrIildLEdoLnByb3RvdHlwZSwibWFzayIsMikseShbbG4oInJzLm1pbkhhbmRsZSIpXSxHaC5wcm90b3R5cGUsIm1pbkhhbmRsZSIsMikseShbbG4oInJzLm1heEhhbmRsZSIpXSxHaC5wcm90b3R5cGUsIm1heEhhbmRsZSIsMikseShbbG4oInJzLm1pbiIpXSxHaC5wcm90b3R5cGUsIm1pbiIsMikseShbbG4oInJzLm1heCIpXSxHaC5wcm90b3R5cGUsIm1heCIsMikseShbcXIobm8pXSxHaC5wcm90b3R5cGUsIm1hcmdpbiIsMikseShbcXIodG8pLHVuKGU9PmUudXBkYXRlR3JvdXBWaXNpYmlsaXR5KCkpXSxHaC5wcm90b3R5cGUsInZpc2libGUiLDIpO3ZhciBraD17dHlwZToicm9vdCIsb3B0aW9uc0tleToibmF2aWdhdG9yIixwYWNrYWdlVHlwZToiY29tbXVuaXR5IixjaGFydFR5cGVzOlsiY2FydGVzaWFuIl0saW5zdGFuY2VDb25zdHJ1Y3RvcjpHaCx0aGVtZVRlbXBsYXRlOntuYXZpZ2F0b3I6e2VuYWJsZWQ6ITEsaGVpZ2h0OjMwLG1hc2s6e2ZpbGw6IiM5OTk5OTkiLHN0cm9rZToiIzk5OTk5OSIsc3Ryb2tlV2lkdGg6MSxmaWxsT3BhY2l0eTouMn0sbWluSGFuZGxlOntmaWxsOiIjZjJmMmYyIixzdHJva2U6IiM5OTk5OTkiLHN0cm9rZVdpZHRoOjEsd2lkdGg6OCxoZWlnaHQ6MTYsZ3JpcExpbmVHYXA6MixncmlwTGluZUxlbmd0aDo4fSxtYXhIYW5kbGU6e2ZpbGw6IiNmMmYyZjIiLHN0cm9rZToiIzk5OTk5OSIsc3Ryb2tlV2lkdGg6MSx3aWR0aDo4LGhlaWdodDoxNixncmlwTGluZUdhcDoyLGdyaXBMaW5lTGVuZ3RoOjh9fX19LF9oPSh7dGFrZUNvbG9yczplfSk9Pntjb25zdHtmaWxsczpbdF0sc3Ryb2tlczpbaV19PWUoMSk7cmV0dXJue2ZpbGw6dCxzdHJva2U6aX19LFZoPWU9Pntjb25zdHtmaWxsOnQsc3Ryb2tlOml9PV9oKGUpO3JldHVybnttYXJrZXI6e2ZpbGw6dCxzdHJva2U6aX19fTtmdW5jdGlvbiBCaChlLHQsaSxzLHIpe2NvbnN0e2FkZFBoYXNlRm46byx1cGRhdGVQaGFzZUZuOm4scmVtb3ZlUGhhc2VGbjphfT1yLGw9KHMscixvKT0+e2kuYW5pbWF0ZSh7aWQ6YCR7ZX1fJHt0fV8ke3IuaWR9XyR7c31gLGdyb3VwSWQ6ZSxmcm9tOjAsdG86MSxlYXNlOlNyLG9uVXBkYXRlKGUsdCl7dCYmInJlbW92ZWQiIT09c3x8KHIucGF0aC5jbGVhcih7dHJhY2tDaGFuZ2VzOiEwfSksbyhlLHIpLHIuY2hlY2tQYXRoRGlydHkoKSl9LG9uU3RvcCgpeyJhZGRlZCI9PT1zJiYoci5wYXRoLmNsZWFyKHt0cmFja0NoYW5nZXM6ITB9KSxvKDEsciksci5jaGVja1BhdGhEaXJ0eSgpKX0scGhhc2U6a3Jbc119KX07Zm9yKGNvbnN0IGUgb2YgcylpLmlzU2tpcHBlZCgpfHwobCgicmVtb3ZlZCIsZSxhKSxsKCJ1cGRhdGVkIixlLG4pKSxsKCJhZGRlZCIsZSxvKX12YXIgSGg9bnVsbDtmdW5jdGlvbiBXaChlKXtpZihudWxsIT1lKXJldHVybiIiPT09ZT8iIjoobnVsbCE9SGh8fChIaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSksSGgudGV4dENvbnRlbnQ9U3RyaW5nKGUpLEhoLmlubmVySFRNTCl9ZnVuY3Rpb24gamgoe2lkOmV9LHQsaSxzKXtWcihlLHQsaSxzLHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9LHtwaGFzZToidHJhaWxpbmcifSl9ZnVuY3Rpb24gVWgoe2lkOmV9LHQsaSxzKXtWcihlLHQsaSxzLHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9LHtwaGFzZToicmVtb3ZlIn0pfWZ1bmN0aW9uIHpoKGUpe3JldHVybntvcGFjaXR5OjF9fXZhciBLaD1jbGFzcyBleHRlbmRzIGZ0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLl9kaXJ0eT0zfW1hcmtEaXJ0eShlLHQ9MSl7dGhpcy5fZGlydHk8dCYmKHRoaXMuX2RpcnR5PXQpfW1hcmtDbGVhbihlKXt0aGlzLl9kaXJ0eT0wfWlzRGlydHkoKXtyZXR1cm4gdGhpcy5fZGlydHk+MH19LFloPWNsYXNzIGV4dGVuZHMgS2h7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuZW5hYmxlZD0hMCx0aGlzLmNvbG9yPSJyZ2JhKDAsIDAsIDAsIDAuNSkiLHRoaXMueE9mZnNldD0wLHRoaXMueU9mZnNldD0wLHRoaXMuYmx1cj01fX07eShbcXIodG8pLHpzKHtyZWRyYXc6M30pXSxZaC5wcm90b3R5cGUsImVuYWJsZWQiLDIpLHkoW3FyKHlvKSx6cyh7cmVkcmF3OjN9KV0sWWgucHJvdG90eXBlLCJjb2xvciIsMikseShbcXIocm8pLHpzKHtyZWRyYXc6M30pXSxZaC5wcm90b3R5cGUsInhPZmZzZXQiLDIpLHkoW3FyKHJvKSx6cyh7cmVkcmF3OjN9KV0sWWgucHJvdG90eXBlLCJ5T2Zmc2V0IiwyKSx5KFtxcihubyksenMoe3JlZHJhdzozfSldLFloLnByb3RvdHlwZSwiYmx1ciIsMik7dmFyICRoPVdvKGU9PmpkKGUpfHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk9PT1BZCwiYSBtYXJrZXIgc2hhcGUga2V5d29yZCBzdWNoIGFzICdjaXJjbGUnLCAnZGlhbW9uZCcgb3IgJ3NxdWFyZScgb3IgYW4gb2JqZWN0IGV4dGVuZGluZyB0aGUgTWFya2VyIGNsYXNzIiksWGg9Y2xhc3MgZXh0ZW5kcyBLaHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5lbmFibGVkPSEwLHRoaXMuc2hhcGU9UGQsdGhpcy5zaXplPTYsdGhpcy5maWxsT3BhY2l0eT0xLHRoaXMuc3Ryb2tlV2lkdGg9MSx0aGlzLnN0cm9rZU9wYWNpdHk9MX1nZXRTdHlsZSgpe2NvbnN0e3NpemU6ZSxmaWxsOnQsZmlsbE9wYWNpdHk6aSxzdHJva2U6cyxzdHJva2VXaWR0aDpyLHN0cm9rZU9wYWNpdHk6b309dGhpcztyZXR1cm57c2l6ZTplLGZpbGw6dCxmaWxsT3BhY2l0eTppLHN0cm9rZTpzLHN0cm9rZVdpZHRoOnIsc3Ryb2tlT3BhY2l0eTpvfX1nZXREaWFtZXRlcigpe3JldHVybiB0aGlzLnNpemUrdGhpcy5zdHJva2VXaWR0aH19O3koW3FyKHRvKSx6cyh7cmVkcmF3OjN9KV0sWGgucHJvdG90eXBlLCJlbmFibGVkIiwyKSx5KFtxcigkaCksenMoe3JlZHJhdzozfSldLFhoLnByb3RvdHlwZSwic2hhcGUiLDIpLHkoW3FyKG5vKSx6cyh7cmVkcmF3OjN9KV0sWGgucHJvdG90eXBlLCJzaXplIiwyKSx5KFtxcih5byx7b3B0aW9uYWw6ITB9KSx6cyh7cmVkcmF3OjN9KV0sWGgucHJvdG90eXBlLCJmaWxsIiwyKSx5KFtxcihhbyksenMoe3JlZHJhdzozfSldLFhoLnByb3RvdHlwZSwiZmlsbE9wYWNpdHkiLDIpLHkoW3FyKHlvLHtvcHRpb25hbDohMH0pLHpzKHtyZWRyYXc6M30pXSxYaC5wcm90b3R5cGUsInN0cm9rZSIsMikseShbcXIobm8pLHpzKHtyZWRyYXc6M30pXSxYaC5wcm90b3R5cGUsInN0cm9rZVdpZHRoIiwyKSx5KFtxcihhbyksenMoe3JlZHJhdzozfSldLFhoLnByb3RvdHlwZSwic3Ryb2tlT3BhY2l0eSIsMikseShbcXIoaW8se29wdGlvbmFsOiEwfSksenMoe3JlZHJhdzozfSldLFhoLnByb3RvdHlwZSwiZm9ybWF0dGVyIiwyKTt2YXIgcWg9Y2xhc3MgZXh0ZW5kcyBmdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5lbmFibGVkPSExfX07eShbcXIodG8pXSxxaC5wcm90b3R5cGUsImVuYWJsZWQiLDIpO3ZhciBaaD1jbGFzcyBleHRlbmRzIGZ0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmVuYWJsZWQ9ITAsdGhpcy5pbnRlcmFjdGlvbj1uZXcgcWgsdGhpcy5wb3NpdGlvbj1uZXcgbW59dG9Ub29sdGlwSHRtbChlLHQpe3JldHVybiB0aGlzLnJlbmRlcmVyP2duKHRoaXMucmVuZGVyZXIodCksZSk6Z24oZSl9fTt5KFtxcih0byldLFpoLnByb3RvdHlwZSwiZW5hYmxlZCIsMikseShbcXIodG8se29wdGlvbmFsOiEwfSldLFpoLnByb3RvdHlwZSwic2hvd0Fycm93IiwyKSx5KFtxcihpbyx7b3B0aW9uYWw6ITB9KV0sWmgucHJvdG90eXBlLCJyZW5kZXJlciIsMikseShbcXIoZW8pXSxaaC5wcm90b3R5cGUsImludGVyYWN0aW9uIiwyKSx5KFtxcihlbyldLFpoLnByb3RvdHlwZSwicG9zaXRpb24iLDIpO3ZhciBRaD1jbGFzcyBleHRlbmRzIGNoe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnhOYW1lPXZvaWQgMCx0aGlzLmZpbGw9IiNjMTYwNjgiLHRoaXMuZmlsbE9wYWNpdHk9MSx0aGlzLnN0cm9rZT0iIzg3NDM0OSIsdGhpcy5zdHJva2VXaWR0aD0yLHRoaXMuc3Ryb2tlT3BhY2l0eT0xLHRoaXMubGluZURhc2g9WzBdLHRoaXMubGluZURhc2hPZmZzZXQ9MCx0aGlzLnNoYWRvdz1uZXcgWWgsdGhpcy5tYXJrZXI9bmV3IFhoLHRoaXMubGFiZWw9bmV3IFBuLHRoaXMudG9vbHRpcD1uZXcgWmgsdGhpcy5jb25uZWN0TWlzc2luZ0RhdGE9ITF9fTtmdW5jdGlvbiBKaCh7aWQ6ZX0sdCxpLHMpe1ZyKGUsIm1hcmtlcnMiLHQsaSx7b3BhY2l0eTowfSx7b3BhY2l0eToxfSx7cGhhc2U6cz9rcltzXToidHJhaWxpbmcifSksaS5mb3JFYWNoKGU9PmUuY2xlYW51cCgpKX1mdW5jdGlvbiBldSh7aWQ6ZX0sdCxpKXtWcihlLCJtYXJrZXJzIix0LGkse3NjYWxpbmdYOjAsc2NhbGluZ1k6MH0se3NjYWxpbmdYOjEsc2NhbGluZ1k6MX0se3BoYXNlOiJpbml0aWFsIn0pLGkuZm9yRWFjaChlPT5lLmNsZWFudXAoKSl9ZnVuY3Rpb24gdHUoe2lkOmUsbm9kZURhdGFEZXBlbmRlbmNpZXM6dH0saSxzKXtjb25zdCByPXQuc2VyaWVzUmVjdFdpZHRoO19yKGUsIm1hcmtlcnMiLGkscyx7ZnJvbUZuOihlLHQpPT57dmFyIGkscztjb25zdCBvPW51bGwhPShzPW51bGw9PShpPXQubWlkUG9pbnQpP3ZvaWQgMDppLngpP3M6cjtyZXR1cm57c2NhbGluZ1g6MCxzY2FsaW5nWTowLGRlbGF5OktzKDAseHIoby9yKSwxKSxkdXJhdGlvbjouMixwaGFzZToiaW5pdGlhbCJ9fSx0b0ZuOigpPT4oe3NjYWxpbmdYOjEsc2NhbGluZ1k6MX0pfSl9ZnVuY3Rpb24gaXUoZSl7cmV0dXJue29wYWNpdHk6MSxzY2FsaW5nWDoxLHNjYWxpbmdZOjF9fWZ1bmN0aW9uIHN1KGUsdCl7dmFyIGkscyxyLG87cmV0dXJue3RyYW5zbGF0aW9uWDpudWxsIT0ocz1udWxsPT0oaT10LnBvaW50KT92b2lkIDA6aS54KT9zOk5hTix0cmFuc2xhdGlvblk6bnVsbCE9KG89bnVsbD09KHI9dC5wb2ludCk/dm9pZCAwOnIueSk/bzpOYU59fWZ1bmN0aW9uIHJ1KGUsdCl7Y29uc3QgaT0odCxpKT0+e2NvbnN0IHM9ZVtpXVt0XTtyZXR1cm4gQXJyYXkuaXNBcnJheShzKT9zWzBdOnN9LHM9dD0+e2NvbnN0e3hWYWx1ZTpzfT10O3JldHVybiBlLm1vdmVkW3NdP3twb2ludDppKHMsIm1vdmVkIiksc3RhdHVzOiJ1cGRhdGVkIn06ZS5yZW1vdmVkW3NdP3twb2ludDppKHMsInJlbW92ZWQiKSxzdGF0dXM6InJlbW92ZWQifTplLmFkZGVkW3NdP3twb2ludDppKHMsImFkZGVkIiksc3RhdHVzOiJhZGRlZCJ9OntzdGF0dXM6InVua25vd24ifX07cmV0dXJue2Zyb21GbjooZSxpKT0+e3ZhciByLG8sbixhLGwsZDtjb25zdHtzdGF0dXM6Yyxwb2ludDpofT1zKGkpO2lmKCJ1bmtub3duIj09PWMpcmV0dXJue29wYWNpdHk6MH07Y29uc3QgdT17dHJhbnNsYXRpb25YOm51bGwhPShvPW51bGw9PShyPW51bGw9PWg/dm9pZCAwOmguZnJvbSk/dm9pZCAwOnIueCk/bzplLnRyYW5zbGF0aW9uWCx0cmFuc2xhdGlvblk6bnVsbCE9KGE9bnVsbD09KG49bnVsbD09aD92b2lkIDA6aC5mcm9tKT92b2lkIDA6bi55KT9hOmUudHJhbnNsYXRpb25ZLG9wYWNpdHk6ZS5vcGFjaXR5LHBoYXNlOmtyW2NdfTtyZXR1cm4iYWRkZWQiPT09dD9mKG0oe30sdSkse29wYWNpdHk6MCx0cmFuc2xhdGlvblg6bnVsbD09KGw9bnVsbD09aD92b2lkIDA6aC50byk/dm9pZCAwOmwueCx0cmFuc2xhdGlvblk6bnVsbD09KGQ9bnVsbD09aD92b2lkIDA6aC50byk/dm9pZCAwOmQueSxwaGFzZTprci5hZGRlZH0pOigiYWRkZWQiPT09YyYmKHUub3BhY2l0eT0wKSx1KX0sdG9GbjooZSxpKT0+e3ZhciByLG87Y29uc3R7c3RhdHVzOm4scG9pbnQ6YX09cyhpKTtpZigidW5rbm93biI9PT1uKXJldHVybntvcGFjaXR5OjB9O2NvbnN0IGw9e3RyYW5zbGF0aW9uWDppLnBvaW50LngsdHJhbnNsYXRpb25ZOmkucG9pbnQueSxvcGFjaXR5OjEscGhhc2U6a3Jbbl19O3JldHVybiJyZW1vdmVkIj09PW58fCJyZW1vdmVkIj09PXQ/ZihtKHt9LGwpLHt0cmFuc2xhdGlvblg6bnVsbD09KHI9bnVsbD09YT92b2lkIDA6YS50byk/dm9pZCAwOnIueCx0cmFuc2xhdGlvblk6bnVsbD09KG89bnVsbD09YT92b2lkIDA6YS50byk/dm9pZCAwOm8ueSxvcGFjaXR5OjAscGhhc2U6a3IucmVtb3ZlZH0pOmx9fX1mdW5jdGlvbiBvdShlKXtyZXR1cm4gZS5yZWR1Y2UoKHttaW46ZSxtYXg6dH0saSk9PigobnVsbD09ZXx8ZS5wb2ludC54PmkucG9pbnQueCkmJihlPWkpLChudWxsPT10fHx0LnBvaW50Lng8aS5wb2ludC54KSYmKHQ9aSkse21pbjplLG1heDp0fSkse30pfWZ1bmN0aW9uIG51KGUsdCxpKXtjb25zdCBzPSh0LnktZS55KS8odC54LWUueCk7cmV0dXJue3g6aSx5OihpLWUueCkqcytlLnl9fWZ1bmN0aW9uIGF1KGUsdCxpLHMpe2xldCByPS0xLG89MDtjb25zdCBuPVtdO2Zvcig7bzxlLmxlbmd0aDspZVtvXS5jaGFuZ2UhPT10P2Vbb10uY2hhbmdlIT09aT8obi5sZW5ndGg+MCYmKHMobixyLG8pLG4ubGVuZ3RoPTApLHI9byxvKyspOm8rKzoobi5wdXNoKGVbb10pLG8rKyk7bi5sZW5ndGg+MCYmcyhuLHIsbyl9ZnVuY3Rpb24gbHUoZSx0KXthdShlLCJvdXQiLCJpbiIsKGkscyxyKT0+e3ZhciBvLG47LTE9PT1zJiZlW3JdP2kuZm9yRWFjaCh0PT50LnRvPWVbcl0uZnJvbSk6cj09PWUubGVuZ3RoJiZlW3NdP2kuZm9yRWFjaCh0PT50LnRvPWVbc10uZnJvbSk6ImludGVyc2VjdCI9PT10JiYobnVsbD09KG89ZVtzXSk/dm9pZCAwOm8uZnJvbSkmJihudWxsPT0obj1lW3JdKT92b2lkIDA6bi5mcm9tKT9pLmZvckVhY2godD0+dC50bz1udShlW3NdLmZyb20sZVtyXS5mcm9tLHQuZnJvbS54KSk6aS5mb3JFYWNoKGU9PmUudG89ZS5mcm9tKX0pLGF1KGUsImluIiwib3V0IiwoaSxzLHIpPT57dmFyIG8sbjstMT09PXMmJmVbcl0/aS5mb3JFYWNoKHQ9PnQuZnJvbT1lW3JdLnRvKTpyPT09ZS5sZW5ndGgmJmVbc10/aS5mb3JFYWNoKHQ9PnQuZnJvbT1lW3NdLnRvKToiaW50ZXJzZWN0Ij09PXQmJihudWxsPT0obz1lW3NdKT92b2lkIDA6by50bykmJihudWxsPT0obj1lW3JdKT92b2lkIDA6bi50byk/aS5mb3JFYWNoKHQ9PnQuZnJvbT1udShlW3NdLnRvLGVbcl0udG8sdC50by54KSk6aS5mb3JFYWNoKGU9PmUuZnJvbT1lLnRvKX0pfWZ1bmN0aW9uIGR1KGUsdCxpKXtjb25zdCBzPWlzTmFOKGUueCk/dC54OmUueCxyPWlzTmFOKGUueSk/dC55OmUueSxvPXQueC1lLngsbj10LnktZS55O3JldHVybnt4OnMrKGlzTmFOKG8pPzA6byppKSx5OnIrKGlzTmFOKG4pPzA6bippKX19ZnVuY3Rpb24gY3UoZSx0LGkpe2NvbnN0e3BhdGg6c309aTtsZXQgcjtmb3IoY29uc3QgaSBvZiBlKXtjb25zdHtmcm9tOmUsdG86b309aSxuPXRbaS5jaGFuZ2VdO2lmKG51bGw9PW58fG51bGw9PWV8fG51bGw9PW8pY29udGludWU7Y29uc3R7eDphLHk6bH09ZHUoZSxvLG4pO2lmKCExPT09aS5tb3ZlVG8pcy5saW5lVG8oYSxsKTtlbHNlIGlmKCEwIT09aS5tb3ZlVG8mJnIpe2lmKHIpe2NvbnN0IGU9ImluIj09PWkubW92ZVRvP246MS1uLHt4OnQseTpvfT1kdShyLHt4OmEseTpsfSxlKTtzLmxpbmVUbyh0LG8pLHMubW92ZVRvKGEsbCl9fWVsc2Ugcy5tb3ZlVG8oYSxsKTtyPXt4OmEseTpsfX19ZnVuY3Rpb24gaHUoe2lkOmUsdmlzaWJsZTp0LG5vZGVEYXRhRGVwZW5kZW5jaWVzOml9LHMscil7Y29uc3R7c2VyaWVzUmVjdFdpZHRoOm8sc2VyaWVzUmVjdEhlaWdodDpufT1pO1ZyKGUsInBhdGhfcHJvcGVydGllcyIscyxyLHtjbGlwWDowfSx7Y2xpcFg6b30se3BoYXNlOiJpbml0aWFsIixzdGFydDp7Y2xpcE1vZGU6Im5vcm1hbCIsY2xpcFk6bix2aXNpYmxlOnR9LGZpbmlzaDp7Y2xpcE1vZGU6dm9pZCAwLHZpc2libGU6dH19KX1mdW5jdGlvbiB1dSh7aWQ6ZX0sdCxpLHMscj0iYWRkIil7VnIoZSx0LGkscyx7b3BhY2l0eTowfSx7b3BhY2l0eToxfSx7cGhhc2U6cn0pfWZ1bmN0aW9uIHB1KHtpZDplfSx0LGkscyl7VnIoZSx0LGkscyx7b3BhY2l0eToxfSx7b3BhY2l0eTowfSx7cGhhc2U6InJlbW92ZSJ9KX1mdW5jdGlvbiBndShlKXtyZXR1cm4gdD0+KHtvcGFjaXR5OmUuZ2V0T3BhY2l0eSgpLGNsaXBTY2FsaW5nWDoxLGNsaXBNb2RlOnZvaWQgMH0pfWZ1bmN0aW9uIG11KHtub2RlRGF0YURlcGVuZGVuY2llczplfSx0KXtjb25zdCBpPWU9PmlzRmluaXRlKGUpP2U6MDt0LmNsaXBYPWkoZS5zZXJpZXNSZWN0V2lkdGgpLHQuY2xpcFk9aShlLnNlcmllc1JlY3RIZWlnaHQpfWZ1bmN0aW9uIGZ1KGUpe3JldHVybiJjb250aW51b3VzIj09PWUudHlwZXx8ImxvZyI9PT1lLnR5cGV9ZnVuY3Rpb24gdnUoZSl7cmV0dXJuImNhdGVnb3J5Ij09PWUudHlwZX1mdW5jdGlvbiBDdShlLHQpe3JldHVybiBlLmRvbWFpbi5sZW5ndGg9PT10LmRvbWFpbi5sZW5ndGgmJmUucmFuZ2UubGVuZ3RoPT09dC5yYW5nZS5sZW5ndGgmJmUuZG9tYWluLmV2ZXJ5KChlLGkpPT5lPT09dC5kb21haW5baV0pJiZlLnJhbmdlLmV2ZXJ5KChlLGkpPT5lPT09dC5yYW5nZVtpXSl9ZnVuY3Rpb24geXUoZSx0KXtyZXR1cm4gdm9pZCAwPT09ZXx8dm9pZCAwPT09dD92b2lkIDAhPT1lfHx2b2lkIDAhPT10OmZ1KGUpJiZmdSh0KT9lLnR5cGU9PT10LnR5cGUmJkN1KGUsdCk6ISghdnUoZSl8fCF2dSh0KSkmJkN1KGUsdCl9ZnVuY3Rpb24gU3UoZSx0KXtpZighdClyZXR1cm4gTmFOO2lmKGUgaW5zdGFuY2VvZiBEYXRlJiYoZT1lLmdldFRpbWUoKSksImNvbnRpbnVvdXMiPT09dC50eXBlJiYibnVtYmVyIj09dHlwZW9mIGUpe3JldHVybihlLXQuZG9tYWluWzBdKS8odC5kb21haW5bMV0tdC5kb21haW5bMF0pKih0LnJhbmdlWzFdLXQucmFuZ2VbMF0pK3QucmFuZ2VbMF19aWYoImxvZyI9PT10LnR5cGUmJiJudW1iZXIiPT10eXBlb2YgZSlyZXR1cm4gdC5jb252ZXJ0KGUpO2NvbnN0IGk9dC5kb21haW4uZmluZEluZGV4KHQ9PnQ9PT1lKTtyZXR1cm4gaT49MD90LnJhbmdlW2ldOk5hTn1mdW5jdGlvbiB3dShlLHQpe2NvbnN0IGk9TnVtYmVyKGUpLHM9TnVtYmVyKHQpO3JldHVybiBpc05hTihpKXx8aXNOYU4ocyk/ZT09PXQ6TWF0aC5hYnMocy1pKTwuMjV9ZnVuY3Rpb24gYnUoZT0hMSx0PSExKXtyZXR1cm4gZT09PXQ/ISFlOmU/ImluIjoib3V0In1mdW5jdGlvbiBFdShlLHQsaT17fSl7dmFyIHMscixvLG47Y29uc3R7YmFja2ZpbGxTcGxpdE1vZGU6YT0iaW50ZXJzZWN0In09aSxsPWU9Pnt2YXIgaSxzO3JldHVybnt4OlN1KG51bGwhPShpPWUueFZhbHVlKT9pOk5hTix0LnNjYWxlcy54KSx5OlN1KG51bGwhPShzPWUueVZhbHVlKT9zOk5hTix0LnNjYWxlcy55KX19LGQ9W10sYz17YWRkZWQ6e30sbW92ZWQ6e30scmVtb3ZlZDp7fX0saD0oZSx0LGkscz0ibW92ZSIpPT57ZSYmKGlzTmFOKGUucG9pbnQueCl8fGlzTmFOKGUucG9pbnQueSkpJiYoZT10KTtjb25zdCByPXtmcm9tOm51bGw9PWU/dm9pZCAwOmUucG9pbnQsdG86bnVsbD09dD92b2lkIDA6dC5wb2ludCxtb3ZlVG86YnUobnVsbD09ZT92b2lkIDA6ZS5wb2ludC5tb3ZlVG8sbnVsbD09dD92b2lkIDA6dC5wb2ludC5tb3ZlVG8pLGNoYW5nZTpzfTsibW92ZSI9PT1zPyhjLm1vdmVkW2ldPXIsZisrLHYrKyk6ImluIj09PXM/KGMuYWRkZWRbaV09cix2KyspOiJvdXQiPT09cyYmKGMucmVtb3ZlZFtpXT1yLGYrKyksZC5wdXNoKHIpfSx7bWluOnUsbWF4OnB9PW91KHQubm9kZURhdGEpLHttaW46ZyxtYXg6bX09b3UoZS5ub2RlRGF0YSk7bGV0IGY9MCx2PTA7Zm9yKDtmPHQubm9kZURhdGEubGVuZ3RofHx2PGUubm9kZURhdGEubGVuZ3RoOyl7Y29uc3QgaT10Lm5vZGVEYXRhW2ZdLGE9ZS5ub2RlRGF0YVt2XSxkPWk/KHk9dm9pZCAwLFM9dm9pZCAwLHt4OlN1KG51bGwhPSh5PShDPWkpLnhWYWx1ZSk/eTpOYU4sZS5zY2FsZXMueCkseTpTdShudWxsIT0oUz1DLnlWYWx1ZSk/UzpOYU4sZS5zY2FsZXMueSl9KTp2b2lkIDAsYz1hP2woYSk6dm9pZCAwLHc9dm9pZCAwO2lmKGQmJnd1KGQueCxudWxsPT1hP3ZvaWQgMDphLnBvaW50LngpKWgoaSxhLGEueFZhbHVlLCJtb3ZlIik7ZWxzZSBpZihkJiZkLng8KG51bGwhPShzPW51bGw9PWc/dm9pZCAwOmcucG9pbnQueCk/czotMS8wKSloKGksdyxpLnhWYWx1ZSwib3V0Iik7ZWxzZSBpZihkJiZkLng+KG51bGwhPShyPW51bGw9PW0/dm9pZCAwOm0ucG9pbnQueCk/cjoxLzApKWgoaSx3LGkueFZhbHVlLCJvdXQiKTtlbHNlIGlmKGMmJmMueDwobnVsbCE9KG89bnVsbD09dT92b2lkIDA6dS5wb2ludC54KT9vOi0xLzApKWgodyxhLGEueFZhbHVlLCJpbiIpO2Vsc2UgaWYoYyYmYy54PihudWxsIT0obj1udWxsPT1wP3ZvaWQgMDpwLnBvaW50LngpP246MS8wKSloKHcsYSxhLnhWYWx1ZSwiaW4iKTtlbHNlIGlmKGQmJmQueDwobnVsbD09YT92b2lkIDA6YS5wb2ludC54KSloKGksdyxpLnhWYWx1ZSwib3V0Iik7ZWxzZSBpZihjJiZjLng8KG51bGw9PWk/dm9pZCAwOmkucG9pbnQueCkpaCh3LGEsYS54VmFsdWUsImluIik7ZWxzZSBpZihpKWgoaSx3LGkueFZhbHVlLCJvdXQiKTtlbHNle2lmKCFhKXRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIHByb2Nlc3MgcG9pbnRzIik7aCh3LGEsYS54VmFsdWUsImluIil9fXZhciBDLHksUztyZXR1cm4gbHUoZCxhKSx7cmVzdWx0OmQscmVzdWx0TWFwOmN9fWZ1bmN0aW9uIFJ1KGUsdCxpLHM9e30pe3ZhciByLG8sbjtjb25zdHtiYWNrZmlsbFNwbGl0TW9kZTphPSJpbnRlcnNlY3QiLG11bHRpRGF0dW06bD0hMX09cyxkPVtdLGM9e2FkZGVkOnt9LG1vdmVkOnt9LHJlbW92ZWQ6e319LGg9e2FkZGVkOnt9LG1vdmVkOnt9LHJlbW92ZWQ6e319O2xldCB1PXZvaWQgMCxwPXZvaWQgMDtjb25zdCBnPShlLHQpPT57dmFyIGk7Y29uc3Qgcz0ibW92ZSI9PT10LmNoYW5nZT8ibW92ZWQiOiJpbiI9PT10LmNoYW5nZT8iYWRkZWQiOiJyZW1vdmVkIjtsPyhudWxsIT0oaT1oW3NdKVtlXXx8KGlbZV09W10pLGhbc11bZV0ucHVzaCh0KSk6Y1tzXVtlXT10LHU9dCxwPV9uKGUpfTtsZXQgZj0wLHY9MCxDPSExO2Zvcig7Zjx0Lm5vZGVEYXRhLmxlbmd0aHx8djxlLm5vZGVEYXRhLmxlbmd0aDspe2NvbnN0IHM9dC5ub2RlRGF0YVtmXSxhPWUubm9kZURhdGFbdl0sYz1fbihudWxsPT1zP3ZvaWQgMDpzLnhWYWx1ZSksaD1fbihudWxsPT1hP3ZvaWQgMDphLnhWYWx1ZSk7bGV0IHk7aWYoYz09PWgpeT17Y2hhbmdlOiJtb3ZlIixtb3ZlVG86YnUobnVsbCE9KHI9cy5wb2ludC5tb3ZlVG8pJiZyLGEucG9pbnQubW92ZVRvKSxmcm9tOnMucG9pbnQsdG86YS5wb2ludH0sZyhudWxsPT1zP3ZvaWQgMDpzLnhWYWx1ZSx5KSxmKyssdisrO2Vsc2UgaWYodm9pZCAwIT09aSYmaS5yZW1vdmVkLmluZGV4T2YoU3RyaW5nKGMpKT49MCl5PXtjaGFuZ2U6Im91dCIsbW92ZVRvOm51bGwhPShvPXMucG9pbnQubW92ZVRvKSYmbyxmcm9tOnMucG9pbnR9LGcobnVsbD09cz92b2lkIDA6cy54VmFsdWUseSksZisrO2Vsc2UgaWYodm9pZCAwIT09aSYmaS5hZGRlZC5pbmRleE9mKFN0cmluZyhoKSk+PTApeT17Y2hhbmdlOiJpbiIsbW92ZVRvOm51bGwhPShuPWEucG9pbnQubW92ZVRvKSYmbix0bzphLnBvaW50fSxnKG51bGw9PWE/dm9pZCAwOmEueFZhbHVlLHkpLHYrKztlbHNlIGlmKGwmJnUmJnA9PT1jKXk9bSh7fSx1KSxnKG51bGw9PXM/dm9pZCAwOnMueFZhbHVlLHkpLGYrKztlbHNle2lmKCFsfHwhdXx8cCE9PWgpe0M9ITA7YnJlYWt9eT1tKHt9LHUpLGcobnVsbD09YT92b2lkIDA6YS54VmFsdWUseSksdisrfWQucHVzaCh5KX1sZXQgeT0tMS8wO3JldHVybiBDfHwoQz1kLnNvbWUoZT0+e2NvbnN0e2NoYW5nZTp0LHRvOnt4Omk9LTEvMH09e319PWU7aWYoIm91dCI9PT10KXJldHVybjtjb25zdCBzPWk8eTtyZXR1cm4geT1pLHN9KSksQz97cmVzdWx0OnZvaWQgMCxyZXN1bHRNYXA6dm9pZCAwfToobHUoZCxhKSxsP3tyZXN1bHQ6ZCxyZXN1bHRNYXA6aH06e3Jlc3VsdDpkLHJlc3VsdE1hcDpjfSl9ZnVuY3Rpb24geHUoZSx0KXtsZXQgaT0idXBkYXRlZCI7Y29uc3Qgcz1lPT5lLnZpc2libGU7cmV0dXJuIXModCkmJnMoZSk/aT0iYWRkZWQiOnModCkmJiFzKGUpJiYoaT0icmVtb3ZlZCIpLGl9ZnVuY3Rpb24gVHUoZSx0LGkscyxyKXtjb25zdCBvPXh1KGUsdCk7cmV0dXJue3N0YXR1czpvLHBhdGg6e2FkZFBoYXNlRm46KGUsdCk9PntyKGkse21vdmU6MSxpbjplfSx0KX0sdXBkYXRlUGhhc2VGbjooZSx0KT0+e3IoaSx7bW92ZTplfSx0KX0scmVtb3ZlUGhhc2VGbjooZSx0KT0+e3IoaSx7bW92ZTowLG91dDplfSx0KX19LHBhdGhQcm9wZXJ0aWVzOmZ1bmN0aW9uKGUsdCl7Y29uc3QgaT0ibm9uZSI9PT10PyJ1cGRhdGVkIjplLHM9e2Zyb21Gbjp0PT57bGV0IHM7cmV0dXJuIHM9InJlbW92ZWQiPT09ZT97ZmluaXNoOnt2aXNpYmxlOiExfX06ImFkZGVkIj09PWU/e3N0YXJ0Ont2aXNpYmxlOiEwfX06e30sbSh7cGhhc2U6a3JbaV19LHMpfSx0b0ZuOmU9Pih7cGhhc2U6a3JbaV19KX07cmV0dXJuImZhZGUiPT09dD97ZnJvbUZuOnQ9Pntjb25zdCBpPSJhZGRlZCI9PT1lPzA6dC5vcGFjaXR5O3JldHVybiBtKHtvcGFjaXR5Oml9LHMuZnJvbUZuKHQpKX0sdG9Gbjp0PT5tKHtvcGFjaXR5OiJyZW1vdmVkIj09PWU/MDoxfSxzLnRvRm4odCkpfTpzfShvLHMpfX1mdW5jdGlvbiBEdShlLHQsaSl7dmFyIHMscixvO2NvbnN0IG49ImNhdGVnb3J5Ij09PShudWxsPT0ocz1lLnNjYWxlcy54KT92b2lkIDA6cy50eXBlKTtpZihuIT09KCJjYXRlZ29yeSI9PT0obnVsbD09KHI9dC5zY2FsZXMueCk/dm9pZCAwOnIudHlwZSkpKXJldHVybjtjb25zdHtyZXN1bHQ6YSxyZXN1bHRNYXA6bH09bj9SdShlLHQsaSk6RXUoZSx0KTtsZXQgZD0idXBkYXRlZCI7aWYodC52aXNpYmxlJiYhZS52aXNpYmxlP2Q9InJlbW92ZWQiOiF0LnZpc2libGUmJmUudmlzaWJsZSYmKGQ9ImFkZGVkIiksdm9pZCAwPT09YXx8dm9pZCAwPT09bClyZXR1cm47Y29uc3QgYz1udWxsPT0obz1udWxsPT1pP3ZvaWQgMDppLmNoYW5nZWQpfHxvfHxmdW5jdGlvbihlLHQpe3JldHVybiF5dShlLnNjYWxlcy54LHQuc2NhbGVzLngpfHwheXUoZS5zY2FsZXMueSx0LnNjYWxlcy55KX0oZSx0KXx8InVwZGF0ZWQiIT09ZCxoPVR1KGUsdCxhLCJmYWRlIixjdSksdT1ydShsLGQpO3JldHVybiBmKG0oe30saCkse21hcmtlcjp1LGhhc01vdGlvbjpjfSl9eShbcXIoc28pXSxRaC5wcm90b3R5cGUsInhLZXkiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxRaC5wcm90b3R5cGUsInhOYW1lIiwyKSx5KFtxcihzbyldLFFoLnByb3RvdHlwZSwieUtleSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLFFoLnByb3RvdHlwZSwieU5hbWUiLDIpLHkoW3FyKG5vLHtvcHRpb25hbDohMH0pXSxRaC5wcm90b3R5cGUsIm5vcm1hbGl6ZWRUbyIsMikseShbcXIoeW8pXSxRaC5wcm90b3R5cGUsImZpbGwiLDIpLHkoW3FyKGFvKV0sUWgucHJvdG90eXBlLCJmaWxsT3BhY2l0eSIsMikseShbcXIoeW8pXSxRaC5wcm90b3R5cGUsInN0cm9rZSIsMikseShbcXIobm8pXSxRaC5wcm90b3R5cGUsInN0cm9rZVdpZHRoIiwyKSx5KFtxcihhbyldLFFoLnByb3RvdHlwZSwic3Ryb2tlT3BhY2l0eSIsMikseShbcXIoT28pXSxRaC5wcm90b3R5cGUsImxpbmVEYXNoIiwyKSx5KFtxcihubyldLFFoLnByb3RvdHlwZSwibGluZURhc2hPZmZzZXQiLDIpLHkoW3FyKGVvKV0sUWgucHJvdG90eXBlLCJzaGFkb3ciLDIpLHkoW3FyKGVvKV0sUWgucHJvdG90eXBlLCJtYXJrZXIiLDIpLHkoW3FyKGVvKV0sUWgucHJvdG90eXBlLCJsYWJlbCIsMikseShbcXIoZW8pXSxRaC5wcm90b3R5cGUsInRvb2x0aXAiLDIpLHkoW3FyKHRvKV0sUWgucHJvdG90eXBlLCJjb25uZWN0TWlzc2luZ0RhdGEiLDIpO3ZhciBPdT0oZT0+KGVbZS5GaWxsPTBdPSJGaWxsIixlW2UuU3Ryb2tlPTFdPSJTdHJva2UiLGVbZS5NYXJrZXI9Ml09Ik1hcmtlciIsZVtlLkxhYmVsPTNdPSJMYWJlbCIsZSkpKE91fHx7fSk7ZnVuY3Rpb24gQXUoZSl7Y29uc3R7cG9pbnRzOnR9PWUuZmlsbERhdGE7cmV0dXJue3RvcDp0LnNsaWNlKDAsdC5sZW5ndGgvMiksYm90dG9tOnQuc2xpY2UodC5sZW5ndGgvMikucmV2ZXJzZSgpfX1mdW5jdGlvbiBQdShlLHQsaSl7cmV0dXJue3NjYWxlczp0LnNjYWxlcyxub2RlRGF0YTppW2VdLHZpc2libGU6dC52aXNpYmxlfX1mdW5jdGlvbiBNdShlLHQsaSl7dmFyIHMscjtjb25zdCBvPSJjYXRlZ29yeSI9PT0obnVsbD09KHM9ZS5zY2FsZXMueCk/dm9pZCAwOnMudHlwZSksbj0iY2F0ZWdvcnkiPT09KG51bGw9PShyPXQuc2NhbGVzLngpP3ZvaWQgMDpyLnR5cGUpO2lmKG8hPT1uKXJldHVybjtsZXQgYT0idXBkYXRlZCI7dC52aXNpYmxlJiYhZS52aXNpYmxlP2E9InJlbW92ZWQiOiF0LnZpc2libGUmJmUudmlzaWJsZSYmKGE9ImFkZGVkIik7Y29uc3R7cmVzdWx0TWFwOmx9PW8/UnUoZSx0LGkse2JhY2tmaWxsU3BsaXRNb2RlOiJzdGF0aWMiLG11bHRpRGF0dW06ITB9KTpFdShlLHQse2JhY2tmaWxsU3BsaXRNb2RlOiJzdGF0aWMifSkse3RvcDpkLGJvdHRvbTpjfT1vP2Z1bmN0aW9uKGUsdCxpKXtjb25zdCBzPUF1KHQpLHI9QXUoZSksbz17bXVsdGlEYXR1bTohMH07cmV0dXJue3RvcDpSdShQdSgidG9wIixlLHIpLFB1KCJ0b3AiLHQscyksaSxvKSxib3R0b206UnUoUHUoImJvdHRvbSIsZSxyKSxQdSgiYm90dG9tIix0LHMpLGksbyl9fShlLHQsaSk6ZnVuY3Rpb24oZSx0KXtjb25zdCBpPUF1KHQpLHM9QXUoZSk7cmV0dXJue3RvcDpFdShQdSgidG9wIixlLHMpLFB1KCJ0b3AiLHQsaSkpLGJvdHRvbTpFdShQdSgiYm90dG9tIixlLHMpLFB1KCJib3R0b20iLHQsaSkpfX0oZSx0KTtpZih2b2lkIDA9PT1sfHx2b2lkIDA9PT1kLnJlc3VsdHx8dm9pZCAwPT09Yy5yZXN1bHQpcmV0dXJuO2NvbnN0IGg9Wy4uLmQucmVzdWx0LC4uLmMucmVzdWx0LnJldmVyc2UoKV0sdT0hIXQuc3RhY2tWaXNpYmxlJiZlLnN0YWNrVmlzaWJsZTtyZXR1cm57ZmlsbDpUdShlLHQsaCx1PyJub25lIjoiZmFkZSIsY3UpLG1hcmtlcjpydShsLGEpfX12YXIgTHU9Y2xhc3MgZSBleHRlbmRzIGhoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKHttb2R1bGVDdHg6ZSxwYXRoc1BlclNlcmllczoyLHBhdGhzWkluZGV4U3ViT3JkZXJPZmZzZXQ6WzAsMWUzXSxoYXNNYXJrZXJzOiEwLG1hcmtlclNlbGVjdGlvbkdhcmJhZ2VDb2xsZWN0aW9uOiExLHBpY2tNb2RlczpbMSwwXSxhbmltYXRpb25SZXNldEZuczp7cGF0aDpndSh7Z2V0T3BhY2l0eTooKT0+dGhpcy5nZXRPcGFjaXR5KCl9KSxsYWJlbDp6aCxtYXJrZXI6KGUsdCk9Pm0obSh7fSx7b3BhY2l0eToxLHNjYWxpbmdYOjEsc2NhbGluZ1k6MX0pLHN1KDAsdCkpfX0pLHRoaXMucHJvcGVydGllcz1uZXcgUWh9cHJvY2Vzc0RhdGEoZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtpZihudWxsPT10aGlzLmRhdGF8fCF0aGlzLnByb3BlcnRpZXMuaXNWYWxpZCgpKXJldHVybjtjb25zdHtkYXRhOnQsdmlzaWJsZTppLHNlcmllc0dyb3VwaW5nOntncm91cEluZGV4OnM9dGhpcy5pZCxzdGFja0NvdW50OnI9MX09e319PXRoaXMse3hLZXk6byx5S2V5Om4sY29ubmVjdE1pc3NpbmdEYXRhOmEsbm9ybWFsaXplZFRvOmx9PXRoaXMucHJvcGVydGllcyxkPSF0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLmlzU2tpcHBlZCgpLHtpc0NvbnRpbnVvdXNYOmMsaXNDb250aW51b3VzWTpofT10aGlzLmlzQ29udGludW91cygpLHU9W2BhcmVhLXN0YWNrLSR7c30teVZhbHVlc2AsYGFyZWEtc3RhY2stJHtzfS15VmFsdWVzLXRyYWlsaW5nYCxgYXJlYS1zdGFjay0ke3N9LXlWYWx1ZXMtcHJldmAsYGFyZWEtc3RhY2stJHtzfS15VmFsdWVzLXRyYWlsaW5nLXByZXZgLGBhcmVhLXN0YWNrLSR7c30teVZhbHVlcy1tYXJrZXJgXSxwPVtdO01lKGwpJiYocC5wdXNoKFJjKHRoaXMsW3VbMF0sdVsxXSx1WzRdXSxsLCJyYW5nZSIpKSxwLnB1c2goUmModGhpcyxbdVsyXSx1WzNdXSxsLCJyYW5nZSIpKSksIWMmJmQmJnRoaXMucHJvY2Vzc2VkRGF0YSYmcC5wdXNoKE1jKHRoaXMucHJvY2Vzc2VkRGF0YSkpLGQmJnAucHVzaChEYyh0aGlzKSk7Y29uc3QgZz17aW52YWxpZFZhbHVlOm51bGx9O2EmJnI+MSYmKGcuaW52YWxpZFZhbHVlPTApLGl8fChnLmZvcmNlVmFsdWU9MCkseWllbGQgdGhpcy5yZXF1ZXN0RGF0YU1vZGVsKGUsdCx7cHJvcHM6W0djKHRoaXMsbyxjLHtpZDoieFZhbHVlIn0pLGtjKHRoaXMsbixoLG0oe2lkOiJ5VmFsdWVSYXcifSxnKSksLi4uamModGhpcyxuLGgsIndpbmRvdyIsImN1cnJlbnQiLGYobSh7aWQ6InlWYWx1ZUVuZCJ9LGcpLHtncm91cElkOnVbMF19KSksLi4uamModGhpcyxuLGgsIndpbmRvdy10cmFpbGluZyIsImN1cnJlbnQiLGYobSh7aWQ6InlWYWx1ZVN0YXJ0In0sZykse2dyb3VwSWQ6dVsxXX0pKSwuLi5qYyh0aGlzLG4saCwid2luZG93IiwibGFzdCIsZihtKHtpZDoieVZhbHVlUHJldmlvdXNFbmQifSxnKSx7Z3JvdXBJZDp1WzJdfSkpLC4uLmpjKHRoaXMsbixoLCJ3aW5kb3ctdHJhaWxpbmciLCJsYXN0IixmKG0oe2lkOiJ5VmFsdWVQcmV2aW91c1N0YXJ0In0sZykse2dyb3VwSWQ6dVszXX0pKSwuLi5qYyh0aGlzLG4saCwibm9ybWFsIiwiY3VycmVudCIsZihtKHtpZDoieVZhbHVlQ3VtdWxhdGl2ZSJ9LGcpLHtncm91cElkOnVbNF19KSksLi4ucF0sZ3JvdXBCeUtleXM6ITAsZ3JvdXBCeURhdGE6ITF9KSx0aGlzLmFuaW1hdGlvblN0YXRlLnRyYW5zaXRpb24oInVwZGF0ZURhdGEiKX0pKX1nZXRTZXJpZXNEb21haW4oZSl7Y29uc3R7cHJvY2Vzc2VkRGF0YTp0LGRhdGFNb2RlbDppLGF4ZXM6c309dGhpcztpZighdHx8IWl8fDA9PT10LmRhdGEubGVuZ3RoKXJldHVybltdO2NvbnN0IHI9cy54LG89cy55LG49aS5yZXNvbHZlUHJvY2Vzc2VkRGF0YURlZkJ5SWQodGhpcywieFZhbHVlIiksYT1pLmdldERvbWFpbih0aGlzLCJ4VmFsdWUiLCJrZXkiLHQpLGw9aS5nZXREb21haW4odGhpcywieVZhbHVlRW5kIiwidmFsdWUiLHQpO2lmKCJ4Ij09PWUpcmV0dXJuImtleSI9PT0obnVsbD09bj92b2lkIDA6bi5kZWYudHlwZSkmJiJjYXRlZ29yeSI9PT1uLmRlZi52YWx1ZVR5cGU/YTprbChFcyhhKSxyKTtpZihvIGluc3RhbmNlb2YgYmh8fG8gaW5zdGFuY2VvZiBSaClyZXR1cm4ga2wobCxvKTtyZXR1cm4ga2woW2xbMF0+MD8wOmxbMF0sbFsxXTwwPzA6bFsxXV0sbyl9Y3JlYXRlTm9kZURhdGEoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciB0O2NvbnN0e2F4ZXM6aSxkYXRhOnMscHJvY2Vzc2VkRGF0YTp7ZGF0YTpyfT17fSxkYXRhTW9kZWw6b309dGhpcyxuPWkueCxhPWkueTtpZighKG4mJmEmJnMmJm8mJnRoaXMucHJvcGVydGllcy5pc1ZhbGlkKCkpKXJldHVybltdO2NvbnN0e3lLZXk6bCx4S2V5OmQsbWFya2VyOmMsbGFiZWw6aCxmaWxsOnUsc3Ryb2tlOnAsY29ubmVjdE1pc3NpbmdEYXRhOmd9PXRoaXMucHJvcGVydGllcyx7c2NhbGU6Q309bix7c2NhbGU6eX09YSx3PVJuLmlzKHkpLGI9KG51bGwhPSh0PUMuYmFuZHdpZHRoKT90OjApLzIsRT1vLnJlc29sdmVQcm9jZXNzZWREYXRhRGVmc0J5SWRzKHRoaXMsWyJ5VmFsdWVTdGFydCIsInlWYWx1ZUVuZCIsInlWYWx1ZVJhdyIsInlWYWx1ZVByZXZpb3VzU3RhcnQiLCJ5VmFsdWVQcmV2aW91c0VuZCIsInlWYWx1ZUN1bXVsYXRpdmUiXSksUj1lPT57Y29uc3QgdD1lLHtwb2ludDppfT10LHM9dih0LFsicG9pbnQiXSk7cmV0dXJuIGYobSh7fSxzKSx7cG9pbnQ6ZihtKHt9LGkpLHttb3ZlVG86ITB9KX0pfSx4PShlLHQsaSk9Pntjb25zdCBzPUMuY29udmVydChlKStiLHI9eS5jb252ZXJ0KHQpO3JldHVyblt7cG9pbnQ6e3g6cyx5OnkuY29udmVydChpKX0seVZhbHVlOmkseFZhbHVlOmV9LHtwb2ludDp7eDpzLHk6cn0seVZhbHVlOnQseFZhbHVlOmV9XX0sVD0oZSx0LGkpPT57bGV0IHM7cmV0dXJuKE1lKHRoaXMucHJvcGVydGllcy5ub3JtYWxpemVkVG8pP3cmJkduKGkpOiFpc05hTihpKSkmJihzPXQpLHt4OkMuY29udmVydChlKStiLHk6eS5jb252ZXJ0KHMpLHNpemU6Yy5zaXplfX0sRD1sLE89W10sQT1bXSx7dmlzaWJsZVNhbWVTdGFja0NvdW50OlB9PXRoaXMuY3R4LnNlcmllc1N0YXRlTWFuYWdlci5nZXRWaXNpYmxlUGVlckdyb3VwSW5kZXgodGhpcyksTT17aXRlbUlkOkQsZmlsbERhdGE6e2l0ZW1JZDpELHBvaW50czpbXX0sc3Ryb2tlRGF0YTp7aXRlbUlkOkQscG9pbnRzOltdfSxsYWJlbERhdGE6Tyxub2RlRGF0YTpBLHNjYWxlczpTKGUucHJvdG90eXBlLHRoaXMsImNhbGN1bGF0ZVNjYWxpbmciKS5jYWxsKHRoaXMpLHZpc2libGU6dGhpcy52aXNpYmxlLHN0YWNrVmlzaWJsZTpQPjB9LEw9TS5maWxsRGF0YS5wb2ludHMsRj1bXSxJPU0uc3Ryb2tlRGF0YS5wb2ludHM7bGV0IE4sRz0tMSxrPS0xLzA7cmV0dXJuIG51bGw9PXJ8fHIuZm9yRWFjaChlPT57Y29uc3R7a2V5czp0LGtleXM6W2ldLGRhdHVtOnMsdmFsdWVzOnJ9PWU7ci5mb3JFYWNoKChlLHIpPT57dmFyIG4sYSxtO0crKztjb25zdCBmPXNbcl0sdj1vLnJlc29sdmVQcm9jZXNzZWREYXRhRGVmc1ZhbHVlcyhFLHtrZXlzOnQsdmFsdWVzOmV9KSx7eVZhbHVlUmF3OkMseVZhbHVlQ3VtdWxhdGl2ZTp5fT12O2xldHt5VmFsdWVTdGFydDpTLHlWYWx1ZUVuZDp3LHlWYWx1ZVByZXZpb3VzU3RhcnQ6Yix5VmFsdWVQcmV2aW91c0VuZDpQfT12O2NvbnN0IE09bnVsbCE9QyxfPVQoaSwreSxDKTtpZihNJiZjJiZBLnB1c2goe2luZGV4Okcsc2VyaWVzOnRoaXMsaXRlbUlkOkQsZGF0dW06ZixtaWRQb2ludDp7eDpfLngseTpfLnl9LGN1bXVsYXRpdmVWYWx1ZTp3LHlWYWx1ZTpDLHhWYWx1ZTppLHlLZXk6bCx4S2V5OmQscG9pbnQ6XyxmaWxsOm51bGwhPShuPWMuZmlsbCk/bjp1LHN0cm9rZTpudWxsIT0oYT1jLnN0cm9rZSk/YTpwLHN0cm9rZVdpZHRoOm51bGwhPShtPWMuc3Ryb2tlV2lkdGgpP206dGhpcy5nZXRTdHJva2VXaWR0aCh0aGlzLnByb3BlcnRpZXMuc3Ryb2tlV2lkdGgpfSksTSYmaCl7Y29uc3QgZT10aGlzLmdldExhYmVsVGV4dChoLHt2YWx1ZTpDLGRhdHVtOmYseEtleTpkLHlLZXk6bCx4TmFtZTp0aGlzLnByb3BlcnRpZXMueE5hbWUseU5hbWU6dGhpcy5wcm9wZXJ0aWVzLnlOYW1lfSxlPT5qZShlKT9lLnRvRml4ZWQoMik6U3RyaW5nKGUpKTtPLnB1c2goe2luZGV4Okcsc2VyaWVzOnRoaXMsaXRlbUlkOmwsZGF0dW06Zix4Ol8ueCx5Ol8ueSxsYWJlbDplP3t0ZXh0OmUsZm9udFN0eWxlOmguZm9udFN0eWxlLGZvbnRXZWlnaHQ6aC5mb250V2VpZ2h0LGZvbnRTaXplOmguZm9udFNpemUsZm9udEZhbWlseTpoLmZvbnRGYW1pbHksdGV4dEFsaWduOiJjZW50ZXIiLHRleHRCYXNlbGluZToiYm90dG9tIixmaWxsOmguY29sb3J9OnZvaWQgMH0pfWNvbnN0IFY9bnVsbCE9TiYmbnVsbCE9aSxCPW51bGwhPWsmJk07Qnx8KFM9bnVsbCE9Uz9TOjAsdz1udWxsIT1TP1M6MCxiPW51bGwhPWI/YjowLFA9bnVsbCE9Yj9iOjApO2NvbnN0W0gsV109eChOLGIsUCksW2osVV09eChpLFMsdyk7IVZ8fGcmJiFCfHwoTC5wdXNoKEgpLEYucHVzaChXKSxMLnB1c2goaiksRi5wdXNoKFUpKSxCJiZHPjAmJihJLnB1c2goUihIKSksSS5wdXNoKGopKSxOPWksaz1DfSl9KSxJLmxlbmd0aD4wJiYoSVswXT1SKElbMF0pKSxGLnJldmVyc2UoKSxMLnB1c2goLi4uRiksW01dfSkpfWlzUGF0aE9yU2VsZWN0aW9uRGlydHkoKXtyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLm1hcmtlci5pc0RpcnR5KCl9bWFya2VyRmFjdG9yeSgpe2NvbnN0e3NoYXBlOmV9PXRoaXMucHJvcGVydGllcy5tYXJrZXI7cmV0dXJuIG5ldyhVZChlKSl9dXBkYXRlUGF0aE5vZGVzKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7b3BhY2l0eTp0LHZpc2libGU6aSxhbmltYXRpb25FbmFibGVkOnN9PWUsW3Isb109ZS5wYXRocyxuPXRoaXMuZ2V0U3Ryb2tlV2lkdGgodGhpcy5wcm9wZXJ0aWVzLnN0cm9rZVdpZHRoKTtvLnNldFByb3BlcnRpZXMoe3RhZzoxLGZpbGw6dm9pZCAwLGxpbmVKb2luOm8ubGluZUNhcD0icm91bmQiLHBvaW50ZXJFdmVudHM6MSxzdHJva2U6dGhpcy5wcm9wZXJ0aWVzLnN0cm9rZSxzdHJva2VXaWR0aDpuLHN0cm9rZU9wYWNpdHk6dGhpcy5wcm9wZXJ0aWVzLnN0cm9rZU9wYWNpdHksbGluZURhc2g6dGhpcy5wcm9wZXJ0aWVzLmxpbmVEYXNoLGxpbmVEYXNoT2Zmc2V0OnRoaXMucHJvcGVydGllcy5saW5lRGFzaE9mZnNldCxvcGFjaXR5OnQsdmlzaWJsZTppfSksci5zZXRQcm9wZXJ0aWVzKHt0YWc6MCxzdHJva2U6dm9pZCAwLGxpbmVKb2luOiJyb3VuZCIscG9pbnRlckV2ZW50czoxLGZpbGw6dGhpcy5wcm9wZXJ0aWVzLmZpbGwsZmlsbE9wYWNpdHk6dGhpcy5wcm9wZXJ0aWVzLmZpbGxPcGFjaXR5LGxpbmVEYXNoOnRoaXMucHJvcGVydGllcy5saW5lRGFzaCxsaW5lRGFzaE9mZnNldDp0aGlzLnByb3BlcnRpZXMubGluZURhc2hPZmZzZXQsc3Ryb2tlT3BhY2l0eTp0aGlzLnByb3BlcnRpZXMuc3Ryb2tlT3BhY2l0eSxmaWxsU2hhZG93OnRoaXMucHJvcGVydGllcy5zaGFkb3csb3BhY2l0eTp0LHZpc2libGU6aXx8cyxzdHJva2VXaWR0aDpufSksbXUodGhpcyxvKSxtdSh0aGlzLHIpfSkpfXVwZGF0ZVBhdGhzKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7dGhpcy51cGRhdGVBcmVhUGF0aHMoW2UucGF0aHNdLFtlLmNvbnRleHREYXRhXSl9KSl9dXBkYXRlQXJlYVBhdGhzKGUsdCl7dGhpcy51cGRhdGVGaWxsUGF0aChlLHQpLHRoaXMudXBkYXRlU3Ryb2tlUGF0aChlLHQpfXVwZGF0ZUZpbGxQYXRoKGUsdCl7dC5mb3JFYWNoKCh7ZmlsbERhdGE6dH0saSk9Pntjb25zdFtzXT1lW2ldLHtwYXRoOnJ9PXM7ci5jbGVhcih7dHJhY2tDaGFuZ2VzOiEwfSk7Zm9yKGNvbnN0e3BvaW50OmV9b2YgdC5wb2ludHMpZS5tb3ZlVG8/ci5tb3ZlVG8oZS54LGUueSk6ci5saW5lVG8oZS54LGUueSk7ci5jbG9zZVBhdGgoKSxzLmNoZWNrUGF0aERpcnR5KCl9KX11cGRhdGVTdHJva2VQYXRoKGUsdCl7dC5mb3JFYWNoKCh7c3Ryb2tlRGF0YTp0fSxpKT0+e2NvbnN0WyxzXT1lW2ldLHtwYXRoOnJ9PXM7ci5jbGVhcih7dHJhY2tDaGFuZ2VzOiEwfSk7Zm9yKGNvbnN0e3BvaW50OmV9b2YgdC5wb2ludHMpZS5tb3ZlVG8/ci5tb3ZlVG8oZS54LGUueSk6ci5saW5lVG8oZS54LGUueSk7cy5jaGVja1BhdGhEaXJ0eSgpfSl9dXBkYXRlTWFya2VyU2VsZWN0aW9uKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7bm9kZURhdGE6dCxtYXJrZXJTZWxlY3Rpb246aX09ZTtyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLm1hcmtlci5pc0RpcnR5KCkmJihpLmNsZWFyKCksaS5jbGVhbnVwKCkpLGkudXBkYXRlKHRoaXMucHJvcGVydGllcy5tYXJrZXIuZW5hYmxlZD90OltdKX0pKX11cGRhdGVNYXJrZXJOb2RlcyhlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e21hcmtlclNlbGVjdGlvbjp0LGlzSGlnaGxpZ2h0Oml9PWUse3hLZXk6cyx5S2V5OnIsbWFya2VyOm8sZmlsbDpuLHN0cm9rZTphLHN0cm9rZVdpZHRoOmwsZmlsbE9wYWNpdHk6ZCxzdHJva2VPcGFjaXR5OmMsaGlnaGxpZ2h0U3R5bGU6aH09dGhpcy5wcm9wZXJ0aWVzLHU9WGUoaSYmaC5pdGVtLG8uZ2V0U3R5bGUoKSx7ZmlsbDpuLHN0cm9rZTphLHN0cm9rZVdpZHRoOmwsZmlsbE9wYWNpdHk6ZCxzdHJva2VPcGFjaXR5OmN9KTt0LmVhY2goKGUsdCk9Pnt0aGlzLnVwZGF0ZU1hcmtlclN0eWxlKGUsbyx7ZGF0dW06dCxoaWdobGlnaHRlZDppLHhLZXk6cyx5S2V5OnJ9LHUpfSksaXx8dGhpcy5wcm9wZXJ0aWVzLm1hcmtlci5tYXJrQ2xlYW4oKX0pKX11cGRhdGVMYWJlbFNlbGVjdGlvbihlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e2xhYmVsRGF0YTp0LGxhYmVsU2VsZWN0aW9uOml9PWU7cmV0dXJuIGkudXBkYXRlKHQsZT0+e2UudGFnPTN9KX0pKX11cGRhdGVMYWJlbE5vZGVzKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7bGFiZWxTZWxlY3Rpb246dH09ZSx7ZW5hYmxlZDppLGZvbnRTdHlsZTpzLGZvbnRXZWlnaHQ6cixmb250U2l6ZTpvLGZvbnRGYW1pbHk6bixjb2xvcjphfT10aGlzLnByb3BlcnRpZXMubGFiZWw7dC5lYWNoKChlLHQpPT57Y29uc3R7eDpsLHk6ZCxsYWJlbDpjfT10O2MmJmkmJnRoaXMudmlzaWJsZT8oZS5mb250U3R5bGU9cyxlLmZvbnRXZWlnaHQ9cixlLmZvbnRTaXplPW8sZS5mb250RmFtaWx5PW4sZS50ZXh0QWxpZ249Yy50ZXh0QWxpZ24sZS50ZXh0QmFzZWxpbmU9Yy50ZXh0QmFzZWxpbmUsZS50ZXh0PWMudGV4dCxlLng9bCxlLnk9ZC0xMCxlLmZpbGw9YSxlLnZpc2libGU9ITApOmUudmlzaWJsZT0hMX0pfSkpfWdldFRvb2x0aXBIdG1sKGUpe2NvbnN0e2lkOnQsYXhlczppLGRhdGFNb2RlbDpzfT10aGlzLHt4S2V5OnIseE5hbWU6byx5TmFtZTpuLHRvb2x0aXA6YSxtYXJrZXI6bH09dGhpcy5wcm9wZXJ0aWVzLHt5S2V5OmQseFZhbHVlOmMseVZhbHVlOmgsZGF0dW06dX09ZSxwPWkueCxnPWkueTtpZighdGhpcy5wcm9wZXJ0aWVzLmlzVmFsaWQoKXx8IShwJiZnJiZqZShoKSl8fCFzKXJldHVybiIiO2NvbnN0IG09cC5mb3JtYXREYXR1bShjKSxmPWcuZm9ybWF0RGF0dW0oaCksdj1XaChuKSxDPVdoKG0rIjogIitmKSx5PVhlKHtmaWxsOnRoaXMucHJvcGVydGllcy5maWxsfSxsLmdldFN0eWxlKCkse3N0cm9rZTp0aGlzLnByb3BlcnRpZXMuc3Ryb2tlLHN0cm9rZVdpZHRoOnRoaXMucHJvcGVydGllcy5zdHJva2VXaWR0aH0pLHtmaWxsOlN9PXRoaXMuZ2V0TWFya2VyU3R5bGUobCx7ZGF0dW06ZSx4S2V5OnIseUtleTpkLGhpZ2hsaWdodGVkOiExfSx5KTtyZXR1cm4gYS50b1Rvb2x0aXBIdG1sKHt0aXRsZTp2LGNvbnRlbnQ6QyxiYWNrZ3JvdW5kQ29sb3I6U30se2RhdHVtOnUseEtleTpyLHhOYW1lOm8seUtleTpkLHlOYW1lOm4sY29sb3I6Uyx0aXRsZTp2LHNlcmllc0lkOnR9KX1nZXRMZWdlbmREYXRhKGUpe3ZhciB0LGkscyxyO2lmKCEobnVsbD09KHQ9dGhpcy5kYXRhKT92b2lkIDA6dC5sZW5ndGgpfHwhdGhpcy5wcm9wZXJ0aWVzLmlzVmFsaWQoKXx8ImNhdGVnb3J5IiE9PWUpcmV0dXJuW107Y29uc3R7eUtleTpvLHlOYW1lOm4sZmlsbDphLHN0cm9rZTpsLGZpbGxPcGFjaXR5OmQsc3Ryb2tlT3BhY2l0eTpjLHN0cm9rZVdpZHRoOmgsbGluZURhc2g6dSxtYXJrZXI6cCx2aXNpYmxlOmd9PXRoaXMucHJvcGVydGllcyxtPSFwLmVuYWJsZWR8fHZvaWQgMD09PXAuZmlsbDtyZXR1cm5be2xlZ2VuZFR5cGU6ZSxpZDp0aGlzLmlkLGl0ZW1JZDpvLHNlcmllc0lkOnRoaXMuaWQsZW5hYmxlZDpnLGxhYmVsOnt0ZXh0Om51bGwhPW4/bjpvfSxtYXJrZXI6e3NoYXBlOnAuc2hhcGUsZmlsbDptP2E6cC5maWxsLGZpbGxPcGFjaXR5Om0/ZDpwLmZpbGxPcGFjaXR5LHN0cm9rZTpudWxsIT0oaT1wLnN0cm9rZSk/aTpsLHN0cm9rZU9wYWNpdHk6bnVsbCE9KHM9cC5zdHJva2VPcGFjaXR5KT9zOmMsc3Ryb2tlV2lkdGg6bnVsbCE9KHI9cC5zdHJva2VXaWR0aCk/cjowLGVuYWJsZWQ6cC5lbmFibGVkfHxoPD0wfSxsaW5lOntzdHJva2U6bCxzdHJva2VPcGFjaXR5OmMsc3Ryb2tlV2lkdGg6aCxsaW5lRGFzaDp1fX1dfWFuaW1hdGVFbXB0eVVwZGF0ZVJlYWR5KGUpe2NvbnN0e21hcmtlclNlbGVjdGlvbnM6dCxsYWJlbFNlbGVjdGlvbnM6aSxjb250ZXh0RGF0YTpzLHBhdGhzOnJ9PWUse2FuaW1hdGlvbk1hbmFnZXI6b309dGhpcy5jdHg7dGhpcy51cGRhdGVBcmVhUGF0aHMocixzKSxodSh0aGlzLG8sci5mbGF0KCkpLG9hKHQsc3UpLHR1KHRoaXMsbyx0KSxqaCh0aGlzLCJsYWJlbHMiLG8saSl9YW5pbWF0ZVJlYWR5UmVzaXplKGUpe2NvbnN0e2NvbnRleHREYXRhOnQscGF0aHM6aX09ZTt0aGlzLnVwZGF0ZUFyZWFQYXRocyhpLHQpLHN1cGVyLmFuaW1hdGVSZWFkeVJlc2l6ZShlKX1hbmltYXRlV2FpdGluZ1VwZGF0ZVJlYWR5KGUpe3ZhciB0LGk7Y29uc3R7YW5pbWF0aW9uTWFuYWdlcjpzfT10aGlzLmN0eCx7bWFya2VyU2VsZWN0aW9uczpyLGxhYmVsU2VsZWN0aW9uczpvLGNvbnRleHREYXRhOm4scGF0aHM6YSxwcmV2aW91c0NvbnRleHREYXRhOmx9PWUsW1tkLGNdXT1hO3N1cGVyLnJlc2V0QWxsQW5pbWF0aW9uKGUpO2NvbnN0IGg9KCk9Pnt0aGlzLnVwZGF0ZUFyZWFQYXRocyhhLG4pLHRoaXMudXBkYXRlU3Ryb2tlUGF0aChhLG4pfTtpZigwPT09bi5sZW5ndGh8fDA9PT0obnVsbD09bD92b2lkIDA6bC5sZW5ndGgpKXJldHVybiBoKCksSmgodGhpcyxzLHIsImFkZGVkIiksdXUodGhpcywiZmlsbF9wYXRoX3Byb3BlcnRpZXMiLHMsW2RdKSx1dSh0aGlzLCJzdHJva2UiLHMsW2NdLCJ0cmFpbGluZyIpLHZvaWQgamgodGhpcywibGFiZWxzIixzLG8pO2NvbnN0W3VdPW4sW3BdPW51bGwhPWw/bDpbXSxnPU11KHUscCxudWxsPT0oaT1udWxsPT0odD10aGlzLnByb2Nlc3NlZERhdGEpP3ZvaWQgMDp0LnJlZHVjZWQpP3ZvaWQgMDppLmRpZmYpO2lmKHZvaWQgMD09PWcpcmV0dXJuIHMuc2tpcEN1cnJlbnRCYXRjaCgpLHZvaWQgaCgpO0poKHRoaXMscyxyKSxfcih0aGlzLmlkLCJmaWxsX3BhdGhfcHJvcGVydGllcyIscyxbZF0sZy5maWxsLnBhdGhQcm9wZXJ0aWVzKSxCaCh0aGlzLmlkLCJmaWxsX3BhdGhfdXBkYXRlIixzLFtkXSxnLmZpbGwucGF0aCksdGhpcy51cGRhdGVTdHJva2VQYXRoKGEsbiksdXUodGhpcywic3Ryb2tlIixzLFtjXSwidHJhaWxpbmciKSxqaCh0aGlzLCJsYWJlbHMiLHMsbyl9aXNMYWJlbEVuYWJsZWQoKXtyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmxhYmVsLmVuYWJsZWR9bm9kZUZhY3RvcnkoKXtyZXR1cm4gbmV3IE9ufX07THUuY2xhc3NOYW1lPSJBcmVhU2VyaWVzIixMdS50eXBlPSJhcmVhIjt2YXIgRnU9e3R5cGU6InNlcmllcyIsb3B0aW9uc0tleToic2VyaWVzW10iLHBhY2thZ2VUeXBlOiJjb21tdW5pdHkiLGNoYXJ0VHlwZXM6WyJjYXJ0ZXNpYW4iXSxpZGVudGlmaWVyOiJhcmVhIixpbnN0YW5jZUNvbnN0cnVjdG9yOkx1LHN0YWNrYWJsZTohMCxzZXJpZXNEZWZhdWx0czp7YXhlczpbe3R5cGU6Im51bWJlciIscG9zaXRpb246ImxlZnQifSx7dHlwZToiY2F0ZWdvcnkiLHBvc2l0aW9uOiJib3R0b20ifV19LHRoZW1lVGVtcGxhdGU6e3Nlcmllczp7X19leHRlbmRzX186ZGksbm9kZUNsaWNrUmFuZ2U6Im5lYXJlc3QiLHRvb2x0aXA6e3Bvc2l0aW9uOnt0eXBlOiJub2RlIn19LGZpbGxPcGFjaXR5Oi44LHN0cm9rZU9wYWNpdHk6MSxzdHJva2VXaWR0aDowLGxpbmVEYXNoOlswXSxsaW5lRGFzaE9mZnNldDowLHNoYWRvdzp7ZW5hYmxlZDohMSxjb2xvcjp3aSx4T2Zmc2V0OjMseU9mZnNldDozLGJsdXI6NX0sbWFya2VyOntfX2V4dGVuZHNfXzpjaSxlbmFibGVkOiExLGZpbGxPcGFjaXR5OjEsc3Ryb2tlT3BhY2l0eToxLHN0cm9rZVdpZHRoOjB9LGxhYmVsOntlbmFibGVkOiExLGZvbnRTdHlsZTp2b2lkIDAsZm9udFdlaWdodDp2b2lkIDAsZm9udFNpemU6MTIsZm9udEZhbWlseTp1aSxjb2xvcjpwaSxmb3JtYXR0ZXI6dm9pZCAwfX19LHBhbGV0dGVGYWN0b3J5OmU9Pntjb25zdHttYXJrZXI6dH09VmgoZSk7cmV0dXJue2ZpbGw6dC5maWxsLHN0cm9rZTp0LnN0cm9rZSxtYXJrZXI6dH19fSxJdT1jbGFzcyBleHRlbmRzIGNoe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmRpcmVjdGlvbj0idmVydGljYWwifX07eShbcXIoR28pXSxJdS5wcm90b3R5cGUsImRpcmVjdGlvbiIsMik7dmFyIE51PWNsYXNzIGV4dGVuZHMgaGh7Z2V0QmFuZFNjYWxlUGFkZGluZygpe3JldHVybntpbm5lcjouMixvdXRlcjouMX19c2hvdWxkRmxpcFhZKCl7cmV0dXJuIXRoaXMuaXNWZXJ0aWNhbCgpfWlzVmVydGljYWwoKXtyZXR1cm4idmVydGljYWwiPT09dGhpcy5wcm9wZXJ0aWVzLmRpcmVjdGlvbn1nZXRCYXJEaXJlY3Rpb24oKXtyZXR1cm4gdGhpcy5zaG91bGRGbGlwWFkoKT8ieCI6InkifWdldENhdGVnb3J5RGlyZWN0aW9uKCl7cmV0dXJuIHRoaXMuc2hvdWxkRmxpcFhZKCk/InkiOiJ4In1nZXRWYWx1ZUF4aXMoKXtjb25zdCBlPXRoaXMuZ2V0QmFyRGlyZWN0aW9uKCk7cmV0dXJuIHRoaXMuYXhlc1tlXX1nZXRDYXRlZ29yeUF4aXMoKXtjb25zdCBlPXRoaXMuZ2V0Q2F0ZWdvcnlEaXJlY3Rpb24oKTtyZXR1cm4gdGhpcy5heGVzW2VdfX0sR3U9Y2xhc3MgZXh0ZW5kcyBQbntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5wbGFjZW1lbnQ9Imluc2lkZSJ9fTt5KFtxcihrbyldLEd1LnByb3RvdHlwZSwicGxhY2VtZW50IiwyKTt2YXIga3U9Y2xhc3MgZXh0ZW5kcyBJdXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5maWxsPSIjYzE2MDY4Iix0aGlzLmZpbGxPcGFjaXR5PTEsdGhpcy5zdHJva2U9IiM4NzQzNDkiLHRoaXMuc3Ryb2tlV2lkdGg9MSx0aGlzLnN0cm9rZU9wYWNpdHk9MSx0aGlzLmxpbmVEYXNoPVswXSx0aGlzLmxpbmVEYXNoT2Zmc2V0PTAsdGhpcy5jb3JuZXJSYWRpdXM9MCx0aGlzLnNoYWRvdz1uZXcgWWgsdGhpcy5sYWJlbD1uZXcgR3UsdGhpcy50b29sdGlwPW5ldyBaaH19O2Z1bmN0aW9uIF91KHtyZWN0OmUsY29uZmlnOnR9KXtjb25zdHtjcmlzcDppPSEwLGZpbGw6cyxzdHJva2U6cixzdHJva2VXaWR0aDpvLGZpbGxPcGFjaXR5Om4sc3Ryb2tlT3BhY2l0eTphLGxpbmVEYXNoOmwsbGluZURhc2hPZmZzZXQ6ZCxmaWxsU2hhZG93OmMsY29ybmVyUmFkaXVzOmg9MCx0b3BMZWZ0Q29ybmVyUmFkaXVzOnUsdG9wUmlnaHRDb3JuZXJSYWRpdXM6cCxib3R0b21SaWdodENvcm5lclJhZGl1czpnLGJvdHRvbUxlZnRDb3JuZXJSYWRpdXM6bSxjb3JuZXJSYWRpdXNCYm94OmYsdmlzaWJsZTp2PSEwfT10O2UuY3Jpc3A9aSxlLmZpbGw9cyxlLnN0cm9rZT1yLGUuc3Ryb2tlV2lkdGg9byxlLmZpbGxPcGFjaXR5PW4sZS5zdHJva2VPcGFjaXR5PWEsZS5saW5lRGFzaD1sLGUubGluZURhc2hPZmZzZXQ9ZCxlLmZpbGxTaGFkb3c9YyxlLnRvcExlZnRDb3JuZXJSYWRpdXM9dT9oOjAsZS50b3BSaWdodENvcm5lclJhZGl1cz1wP2g6MCxlLmJvdHRvbVJpZ2h0Q29ybmVyUmFkaXVzPWc/aDowLGUuYm90dG9tTGVmdENvcm5lclJhZGl1cz1tP2g6MCxlLmNvcm5lclJhZGl1c0Jib3g9ZixlLnZpc2libGU9dn1mdW5jdGlvbiBWdShlKXt2YXIgdCxpLHMscixvLG4sYT1lLHtkYXR1bTpsLGlzSGlnaGxpZ2h0ZWQ6ZCxzdHlsZTpjLGhpZ2hsaWdodFN0eWxlOmgsZm9ybWF0dGVyOnUsc2VyaWVzSWQ6cCxjdHg6e2NhbGxiYWNrQ2FjaGU6Z319PWEsZj12KGEsWyJkYXR1bSIsImlzSGlnaGxpZ2h0ZWQiLCJzdHlsZSIsImhpZ2hsaWdodFN0eWxlIiwiZm9ybWF0dGVyIiwic2VyaWVzSWQiLCJjdHgiXSk7Y29uc3R7ZmlsbDpDLGZpbGxPcGFjaXR5Onksc3Ryb2tlOlMsc3Ryb2tlV2lkdGg6d309WGUoZCYmaCxjKSx7c3Ryb2tlT3BhY2l0eTpiLGZpbGxTaGFkb3c6RSxsaW5lRGFzaDpSLGxpbmVEYXNoT2Zmc2V0OngsY29ybmVyUmFkaXVzOlQ9MCx0b3BMZWZ0Q29ybmVyUmFkaXVzOkQ9ITAsdG9wUmlnaHRDb3JuZXJSYWRpdXM6Tz0hMCxib3R0b21SaWdodENvcm5lclJhZGl1czpBPSEwLGJvdHRvbUxlZnRDb3JuZXJSYWRpdXM6UD0hMCxjb3JuZXJSYWRpdXNCYm94Ok19PWM7bGV0IEw7cmV0dXJuIHUmJihMPWcuY2FsbCh1LG0oe2RhdHVtOmwuZGF0dW0seEtleTpsLnhLZXksZmlsbDpDLHN0cm9rZTpTLHN0cm9rZVdpZHRoOncsY29ybmVyUmFkaXVzOlQsaGlnaGxpZ2h0ZWQ6ZCxzZXJpZXNJZDpwfSxmKSkpLHtmaWxsOm51bGwhPSh0PW51bGw9PUw/dm9pZCAwOkwuZmlsbCk/dDpDLHN0cm9rZTpudWxsIT0oaT1udWxsPT1MP3ZvaWQgMDpMLnN0cm9rZSk/aTpTLHN0cm9rZVdpZHRoOm51bGwhPShzPW51bGw9PUw/dm9pZCAwOkwuc3Ryb2tlV2lkdGgpP3M6dyxmaWxsT3BhY2l0eTpudWxsIT0ocj1udWxsPT1MP3ZvaWQgMDpMLmZpbGxPcGFjaXR5KT9yOnksc3Ryb2tlT3BhY2l0eTpudWxsIT0obz1udWxsPT1MP3ZvaWQgMDpMLnN0cm9rZU9wYWNpdHkpP286YixsaW5lRGFzaDpSLGxpbmVEYXNoT2Zmc2V0OngsZmlsbFNoYWRvdzpFLGNvcm5lclJhZGl1czpudWxsIT0obj1udWxsPT1MP3ZvaWQgMDpMLmNvcm5lclJhZGl1cyk/bjpULHRvcExlZnRDb3JuZXJSYWRpdXM6RCx0b3BSaWdodENvcm5lclJhZGl1czpPLGJvdHRvbVJpZ2h0Q29ybmVyUmFkaXVzOkEsYm90dG9tTGVmdENvcm5lclJhZGl1czpQLGNvcm5lclJhZGl1c0Jib3g6TX19ZnVuY3Rpb24gQnUoZT1bXSl7Y29uc3RbdCxpXT1lO3JldHVybiEoMCE9PXR8fDEhPT1pKX15KFtxcihzbyldLGt1LnByb3RvdHlwZSwieEtleSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLGt1LnByb3RvdHlwZSwieE5hbWUiLDIpLHkoW3FyKHNvKV0sa3UucHJvdG90eXBlLCJ5S2V5IiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sa3UucHJvdG90eXBlLCJ5TmFtZSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLGt1LnByb3RvdHlwZSwic3RhY2tHcm91cCIsMikseShbcXIocm8se29wdGlvbmFsOiEwfSldLGt1LnByb3RvdHlwZSwibm9ybWFsaXplZFRvIiwyKSx5KFtxcih5byldLGt1LnByb3RvdHlwZSwiZmlsbCIsMikseShbcXIoYW8pXSxrdS5wcm90b3R5cGUsImZpbGxPcGFjaXR5IiwyKSx5KFtxcih5byldLGt1LnByb3RvdHlwZSwic3Ryb2tlIiwyKSx5KFtxcihubyldLGt1LnByb3RvdHlwZSwic3Ryb2tlV2lkdGgiLDIpLHkoW3FyKGFvKV0sa3UucHJvdG90eXBlLCJzdHJva2VPcGFjaXR5IiwyKSx5KFtxcihPbyldLGt1LnByb3RvdHlwZSwibGluZURhc2giLDIpLHkoW3FyKG5vKV0sa3UucHJvdG90eXBlLCJsaW5lRGFzaE9mZnNldCIsMikseShbcXIobm8pXSxrdS5wcm90b3R5cGUsImNvcm5lclJhZGl1cyIsMikseShbcXIoaW8se29wdGlvbmFsOiEwfSldLGt1LnByb3RvdHlwZSwiZm9ybWF0dGVyIiwyKSx5KFtxcihlbyx7b3B0aW9uYWw6ITB9KV0sa3UucHJvdG90eXBlLCJzaGFkb3ciLDIpLHkoW3FyKGVvKV0sa3UucHJvdG90eXBlLCJsYWJlbCIsMikseShbcXIoZW8pXSxrdS5wcm90b3R5cGUsInRvb2x0aXAiLDIpO3ZhciBIdT1lPT57dmFyIHQ7cmV0dXJuIFpzKG51bGwhPSh0PWUueVZhbHVlKT90OjApfTtmdW5jdGlvbiBXdShlLHQsaSl7Y29uc3R7c3RhcnRpbmdYOnMsc3RhcnRpbmdZOnJ9PWZ1bmN0aW9uKGUsdCl7Y29uc3QgaT10W2U/InkiOiJ4Il07bGV0IHM9MS8wLHI9MDtpZighaSlyZXR1cm57c3RhcnRpbmdYOnMsc3RhcnRpbmdZOnJ9O2U/cj1pLnNjYWxlLmNvbnZlcnQoUm4uaXMoaS5zY2FsZSk/MDpNYXRoLm1heCguLi5pLnJhbmdlKSk6cz1pLnNjYWxlLmNvbnZlcnQoUm4uaXMoaS5zY2FsZSk/MDpNYXRoLm1pbiguLi5pLnJhbmdlKSk7cmV0dXJue3N0YXJ0aW5nWDpzLHN0YXJ0aW5nWTpyfX0oZSx0KTtyZXR1cm57aXNWZXJ0aWNhbDplLGNhbGN1bGF0ZToodCxpKT0+e2xldCBvPWU/dC54OnMsbj1lP3I6dC55LGE9ZT90LndpZHRoOjAsbD1lPzA6dC5oZWlnaHQ7Y29uc3QgZD10Lm9wYWNpdHk7cmV0dXJuIGkmJihpc05hTihvKXx8aXNOYU4obikpJiYoKHt4Om8seTpufT1pKSxhPWU/aS53aWR0aDowLGw9ZT8wOmkuaGVpZ2h0LGUmJiFIdShpKT9uKz1pLmhlaWdodDohZSYmSHUoaSkmJihvKz1pLndpZHRoKSkse3g6byx5Om4sd2lkdGg6YSxoZWlnaHQ6bCxvcGFjaXR5OmR9fSxtb2RlOml9fWZ1bmN0aW9uIGp1KGUsdCl7cmV0dXJue2lzVmVydGljYWw6ZSxjYWxjdWxhdGU6dD0+KHt4OmU/dC54OnQueCt0LndpZHRoLzIseTplP3QueSt0LmhlaWdodC8yOnQueSx3aWR0aDplP3Qud2lkdGg6MCxoZWlnaHQ6ZT8wOnQuaGVpZ2h0LG9wYWNpdHk6dC5vcGFjaXR5fSksbW9kZTp0fX1mdW5jdGlvbiBVdShlKXtjb25zdCB0PWU9Pm51bGw9PWV8fGlzTmFOKGUueCl8fGlzTmFOKGUueSk7cmV0dXJue3RvRm46KGkscyxyKT0+InJlbW92ZWQiPT09ciYmbnVsbD09aS5kYXR1bSYmImZhZGUiPT09ZS5tb2RlP2YobSh7fSx6dShpLHMpKSx7b3BhY2l0eTowfSk6InJlbW92ZWQiPT09cnx8dChzKT9lLmNhbGN1bGF0ZShzLGkucHJldmlvdXNEYXR1bSk6e3g6cy54LHk6cy55LHdpZHRoOnMud2lkdGgsaGVpZ2h0OnMuaGVpZ2h0LG9wYWNpdHk6cy5vcGFjaXR5fSxmcm9tRm46KGkscyxyKT0+eyJ1cGRhdGVkIj09PXImJnQocyk/cj0icmVtb3ZlZCI6InVwZGF0ZWQiPT09ciYmdChpLnByZXZpb3VzRGF0dW0pJiYocj0iYWRkZWQiKTtsZXQgbz17eDppLngseTppLnksd2lkdGg6aS53aWR0aCxoZWlnaHQ6aS5oZWlnaHQsb3BhY2l0eTppLm9wYWNpdHl9OyJhZGRlZCI9PT1yJiZudWxsPT1pLnByZXZpb3VzRGF0dW0mJiJmYWRlIj09PWUubW9kZT9vPWYobSh7fSx6dShpLHMpKSx7b3BhY2l0eTowfSk6InVua25vd24iIT09ciYmImFkZGVkIiE9PXJ8fChvPWUuY2FsY3VsYXRlKHMsaS5wcmV2aW91c0RhdHVtKSk7Y29uc3Qgbj1rcltyXTtyZXR1cm4gZihtKHt9LG8pLHtwaGFzZTpufSl9fX1mdW5jdGlvbiB6dShlLHt4OnQseTppLHdpZHRoOnMsaGVpZ2h0OnIsb3BhY2l0eTpvfSl7cmV0dXJue3g6dCx5Omksd2lkdGg6cyxoZWlnaHQ6cixvcGFjaXR5Om99fWZ1bmN0aW9uIEt1KGUsdCxpKXtpZih0LmVuYWJsZWQmJmkpe2NvbnN0e3g6cyx5OnIsdGV4dDpvLHRleHRBbGlnbjpuLHRleHRCYXNlbGluZTphfT1pLHtjb2xvcjpsLGZvbnRTdHlsZTpkLGZvbnRXZWlnaHQ6Yyxmb250U2l6ZTpoLGZvbnRGYW1pbHk6dX09dDtlLnNldFByb3BlcnRpZXMoe3Zpc2libGU6ITAseDpzLHk6cix0ZXh0Om8sZmlsbDpsLGZvbnRTdHlsZTpkLGZvbnRXZWlnaHQ6Yyxmb250U2l6ZTpoLGZvbnRGYW1pbHk6dSx0ZXh0QWxpZ246bix0ZXh0QmFzZWxpbmU6YX0pfWVsc2UgZS52aXNpYmxlPSExfWZ1bmN0aW9uIFl1KHtpc1Bvc2l0aXZlOmUsaXNWZXJ0aWNhbDp0LHBsYWNlbWVudDppLHBhZGRpbmc6cz0wLHJlY3Q6cn0pe2xldCBvPXIueCtyLndpZHRoLzIsbj1yLnkrci5oZWlnaHQvMixhPSJjZW50ZXIiLGw9Im1pZGRsZSI7c3dpdGNoKGkpe2Nhc2Uic3RhcnQiOnQ/KG49ZT9yLnkrci5oZWlnaHQrczpyLnktcyxsPWU/InRvcCI6ImJvdHRvbSIpOihvPWU/ci54LXM6ci54K3Iud2lkdGgrcyxhPWU/InN0YXJ0IjoiZW5kIik7YnJlYWs7Y2FzZSJvdXRzaWRlIjpjYXNlImVuZCI6dD8obj1lP3IueS1zOnIueStyLmhlaWdodCtzLGw9ZT8iYm90dG9tIjoidG9wIik6KG89ZT9yLngrci53aWR0aCtzOnIueC1zLGE9ZT8ic3RhcnQiOiJlbmQiKX1yZXR1cm57eDpvLHk6bix0ZXh0QWxpZ246YSx0ZXh0QmFzZWxpbmU6bH19dmFyICR1PWNsYXNzIGUgZXh0ZW5kcyBOdXtjb25zdHJ1Y3RvcihlKXtzdXBlcih7bW9kdWxlQ3R4OmUscGlja01vZGVzOlswXSxwYXRoc1BlclNlcmllczowLGhhc0hpZ2hsaWdodGVkTGFiZWxzOiEwLGRhdHVtU2VsZWN0aW9uR2FyYmFnZUNvbGxlY3Rpb246ITEsYW5pbWF0aW9uQWx3YXlzVXBkYXRlU2VsZWN0aW9uczohMCxhbmltYXRpb25SZXNldEZuczp7ZGF0dW06enUsbGFiZWw6emh9fSksdGhpcy5wcm9wZXJ0aWVzPW5ldyBrdSx0aGlzLmdyb3VwU2NhbGU9bmV3IFhyLHRoaXMuc21hbGxlc3REYXRhSW50ZXJ2YWw9dm9pZCAwfXJlc29sdmVLZXlEaXJlY3Rpb24oZSl7cmV0dXJuIngiPT09dGhpcy5nZXRCYXJEaXJlY3Rpb24oKT8ieCI9PT1lPyJ5IjoieCI6ZX1wcm9jZXNzRGF0YShlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciB0LGkscyxyO2lmKCF0aGlzLnByb3BlcnRpZXMuaXNWYWxpZCgpfHwhdGhpcy5kYXRhKXJldHVybjtjb25zdHtzZXJpZXNHcm91cGluZzp7Z3JvdXBJbmRleDpvPXRoaXMuaWR9PXt9LGRhdGE6bj1bXX09dGhpcyx7eEtleTphLHlLZXk6bCxub3JtYWxpemVkVG86ZH09dGhpcy5wcm9wZXJ0aWVzLGM9IXRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIuaXNTa2lwcGVkKCksaD1NYXRoLmFicyhudWxsIT1kP2Q6TmFOKSx1PVJuLmlzKG51bGw9PSh0PXRoaXMuZ2V0Q2F0ZWdvcnlBeGlzKCkpP3ZvaWQgMDp0LnNjYWxlKSxwPVJuLmlzKG51bGw9PShpPXRoaXMuZ2V0VmFsdWVBeGlzKCkpP3ZvaWQgMDppLnNjYWxlKSxnPWBiYXItc3RhY2stJHtvfS15VmFsdWVzYCxmPWcrIi10cmFpbGluZyIsdj1oJiZpc0Zpbml0ZShoKT9oOnZvaWQgMCxDPVtdO3YmJkMucHVzaChSYyh0aGlzLFtnLGZdLHYsInJhbmdlIikpLGMmJnRoaXMucHJvY2Vzc2VkRGF0YSYmQy5wdXNoKE1jKHRoaXMucHJvY2Vzc2VkRGF0YSkpLGMmJkMucHVzaChEYyh0aGlzKSk7Y29uc3QgeT10aGlzLnZpc2libGU/e306e2ZvcmNlVmFsdWU6MH0se3Byb2Nlc3NlZERhdGE6U309eWllbGQgdGhpcy5yZXF1ZXN0RGF0YU1vZGVsKGUsbix7cHJvcHM6W0djKHRoaXMsYSx1LHtpZDoieFZhbHVlIn0pLGtjKHRoaXMsbCxwLG0oe2lkOiJ5VmFsdWUtcmF3IixpbnZhbGlkVmFsdWU6bnVsbH0seSkpLC4uLmpjKHRoaXMsbCxwLCJub3JtYWwiLCJjdXJyZW50IixtKHtpZDoieVZhbHVlLWVuZCIscmFuZ2VJZDoieVZhbHVlLXJhbmdlIixpbnZhbGlkVmFsdWU6bnVsbCxtaXNzaW5nVmFsdWU6MCxncm91cElkOmcsc2VwYXJhdGVOZWdhdGl2ZTohMH0seSkpLC4uLmpjKHRoaXMsbCxwLCJ0cmFpbGluZyIsImN1cnJlbnQiLG0oe2lkOiJ5VmFsdWUtc3RhcnQiLGludmFsaWRWYWx1ZTpudWxsLG1pc3NpbmdWYWx1ZTowLGdyb3VwSWQ6ZixzZXBhcmF0ZU5lZ2F0aXZlOiEwfSx5KSksLi4udT9bU2NdOltdLC4uLkNdLGdyb3VwQnlLZXlzOiEwLGdyb3VwQnlEYXRhOiExfSk7dGhpcy5zbWFsbGVzdERhdGFJbnRlcnZhbD17eDpudWxsIT0ocj1udWxsPT0ocz1TLnJlZHVjZWQpP3ZvaWQgMDpzLnNtYWxsZXN0S2V5SW50ZXJ2YWwpP3I6MS8wLHk6MS8wfSx0aGlzLmFuaW1hdGlvblN0YXRlLnRyYW5zaXRpb24oInVwZGF0ZURhdGEiKX0pKX1nZXRTZXJpZXNEb21haW4oZSl7dmFyIHQ7Y29uc3R7cHJvY2Vzc2VkRGF0YTppLGRhdGFNb2RlbDpzfT10aGlzO2lmKCFpfHwhc3x8MD09PWkuZGF0YS5sZW5ndGgpcmV0dXJuW107Y29uc3R7cmVkdWNlZDp7W1NjLnByb3BlcnR5XTpyfT17fX09aSxvPXRoaXMuZ2V0Q2F0ZWdvcnlBeGlzKCksbj10aGlzLmdldFZhbHVlQXhpcygpLGE9cy5yZXNvbHZlUHJvY2Vzc2VkRGF0YURlZkJ5SWQodGhpcywieFZhbHVlIiksbD1zLmdldERvbWFpbih0aGlzLCJ4VmFsdWUiLCJrZXkiLGkpLGQ9cy5nZXREb21haW4odGhpcywieVZhbHVlLWVuZCIsInZhbHVlIixpKTtpZihlPT09dGhpcy5nZXRDYXRlZ29yeURpcmVjdGlvbigpKXtpZigia2V5Ij09PShudWxsPT1hP3ZvaWQgMDphLmRlZi50eXBlKSYmImNhdGVnb3J5Ij09PShudWxsPT1hP3ZvaWQgMDphLmRlZi52YWx1ZVR5cGUpKXJldHVybiBsO2NvbnN0IGk9bnVsbCE9ciYmaXNGaW5pdGUocik/cjowLHM9bnVsbCE9KHQ9RXMobCkpP3Q6W05hTixOYU5dLG49bnVsbD09bz92b2lkIDA6by5pc1JldmVyc2VkKCk7aWYoInkiPT09ZSl7cmV0dXJuIGtsKFtzWzBdKyhuPzA6LWkpLHNbMV0rKG4/aTowKV0sbyl9cmV0dXJuIGtsKFtzWzBdKyhuPy1pOjApLHNbMV0rKG4/MDppKV0sbyl9aWYodGhpcy5nZXRWYWx1ZUF4aXMoKWluc3RhbmNlb2YgYmgpcmV0dXJuIGtsKGQsbik7cmV0dXJuIGtsKFtkWzBdPjA/MDpkWzBdLGRbMV08MD8wOmRbMV1dLG4pfWNyZWF0ZU5vZGVEYXRhKCl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHtkYXRhTW9kZWw6dH09dGhpcyxpPXRoaXMuZ2V0Q2F0ZWdvcnlBeGlzKCkscz10aGlzLmdldFZhbHVlQXhpcygpO2lmKCEodCYmaSYmcyYmdGhpcy5wcm9wZXJ0aWVzLmlzVmFsaWQoKSkpcmV0dXJuW107Y29uc3Qgcj1pLnNjYWxlLG89cy5zY2FsZSx7Z3JvdXBTY2FsZTpuLHByb2Nlc3NlZERhdGE6YSxzbWFsbGVzdERhdGFJbnRlcnZhbDpsLGN0eDp7c2VyaWVzU3RhdGVNYW5hZ2VyOmR9fT10aGlzLHt4S2V5OmMseUtleTpoLHhOYW1lOnUseU5hbWU6cCxmaWxsOmcsc3Ryb2tlOmYsc3Ryb2tlV2lkdGg6dixjb3JuZXJSYWRpdXM6QyxsZWdlbmRJdGVtTmFtZTp5LGxhYmVsOnd9PXRoaXMucHJvcGVydGllcyxiPXMuaXNSZXZlcnNlZCgpLEU9Um4uaXMocik/ci5jYWxjQmFuZHdpZHRoKG51bGw9PWw/dm9pZCAwOmwueCk6ci5iYW5kd2lkdGgsUj1bXSx7aW5kZXg6eCx2aXNpYmxlR3JvdXBDb3VudDpUfT1kLmdldFZpc2libGVQZWVyR3JvdXBJbmRleCh0aGlzKTtmb3IobGV0IGU9MDtlPFQ7ZSsrKVIucHVzaChTdHJpbmcoZSkpO24uZG9tYWluPVIsbi5yYW5nZT1bMCxudWxsIT1FP0U6MF0saSBpbnN0YW5jZW9mIHVsP24ucGFkZGluZ0lubmVyPWkuZ3JvdXBQYWRkaW5nSW5uZXI6bi5wYWRkaW5nPWkgaW5zdGFuY2VvZiBibD8uMTowLG4ucm91bmQ9MCE9PW4ucGFkZGluZztjb25zdCBEPW4uYmFuZHdpZHRoPj0xP24uYmFuZHdpZHRoOm4ucmF3QmFuZHdpZHRoLE89dC5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGV4QnlJZCh0aGlzLCJ4VmFsdWUiKS5pbmRleCxBPXQucmVzb2x2ZVByb2Nlc3NlZERhdGFJbmRleEJ5SWQodGhpcywieVZhbHVlLXJhdyIpLmluZGV4LFA9dC5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGV4QnlJZCh0aGlzLCJ5VmFsdWUtc3RhcnQiKS5pbmRleCxNPXQucmVzb2x2ZVByb2Nlc3NlZERhdGFJbmRleEJ5SWQodGhpcywieVZhbHVlLWVuZCIpLmluZGV4LEw9dC5yZXNvbHZlUHJvY2Vzc2VkRGF0YURlZkJ5SWQodGhpcywieVZhbHVlLXJhbmdlIikuaW5kZXgsRj0hdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlci5pc1NraXBwZWQoKSxJPVtdO3JldHVybiBudWxsPT1hfHxhLmRhdGEuZm9yRWFjaCgoe2tleXM6dCxkYXR1bTppLHZhbHVlczpzLGFnZ1ZhbHVlczphfSk9PntzLmZvckVhY2goKHMsbCk9Pnt2YXIgZDtudWxsIT1JW2xdfHwoSVtsXT17aXRlbUlkOmgsbm9kZURhdGE6W10sbGFiZWxEYXRhOltdLHNjYWxlczpTKGUucHJvdG90eXBlLHRoaXMsImNhbGN1bGF0ZVNjYWxpbmciKS5jYWxsKHRoaXMpLHZpc2libGU6dGhpcy52aXNpYmxlfHxGfSk7Y29uc3QgRT10W09dLFI9ci5jb252ZXJ0KEUpLFQ9K3NbTV0sTj0rc1tQXSxHPXNbQV0saz1HPj0wLF89ayE9PWIsVj1udWxsIT0oZD1udWxsPT1hP3ZvaWQgMDphW0xdW2s/MTowXSk/ZDowLEI9UituLmNvbnZlcnQoU3RyaW5nKHgpKTtpZihpc05hTihUKSlyZXR1cm47Y29uc3QgSD1vLmNvbnZlcnQoVCksVz1vLmNvbnZlcnQoTiksaj0ieCI9PT10aGlzLmdldEJhckRpcmVjdGlvbigpLFU9by5jb252ZXJ0KFYpLHo9by5jb252ZXJ0KDApLEs9bmV3IG9yKGo/TWF0aC5taW4oeixVKTpCLGo/QjpNYXRoLm1pbih6LFUpLGo/TWF0aC5hYnMoei1VKTpELGo/RDpNYXRoLmFicyh6LVUpKSxZPXt4Omo/TWF0aC5taW4oSCxXKTpCLHk6aj9COk1hdGgubWluKEgsVyksd2lkdGg6aj9NYXRoLmFicyhXLUgpOkQsaGVpZ2h0Omo/RDpNYXRoLmFicyhXLUgpLGNvcm5lclJhZGl1c0Jib3g6S30se2ZvbnRTdHlsZTokLGZvbnRXZWlnaHQ6WCxmb250U2l6ZTpxLGZvbnRGYW1pbHk6Wixjb2xvcjpRLHBsYWNlbWVudDpKfT13LGVlPXRoaXMuZ2V0TGFiZWxUZXh0KHRoaXMucHJvcGVydGllcy5sYWJlbCx7ZGF0dW06aVtsXSx2YWx1ZTpHLHhLZXk6Yyx5S2V5OmgseE5hbWU6dSx5TmFtZTpwLGxlZ2VuZEl0ZW1OYW1lOnl9LGU9PmplKGUpP2UudG9GaXhlZCgyKToiIiksdGU9ZWU/bSh7dGV4dDplZSxmaWxsOlEsZm9udFN0eWxlOiQsZm9udFdlaWdodDpYLGZvbnRTaXplOnEsZm9udEZhbWlseTpafSxZdSh7aXNQb3NpdGl2ZTprLGlzVmVydGljYWw6IWoscGxhY2VtZW50OkoscmVjdDpZfSkpOnZvaWQgMCxpZT10aGlzLnNob3VsZEZsaXBYWSgpP1kuaGVpZ2h0Olkud2lkdGgsc2U9e3Nlcmllczp0aGlzLGl0ZW1JZDpoLGRhdHVtOmlbbF0sY3VtdWxhdGl2ZVZhbHVlOlQseFZhbHVlOkUseVZhbHVlOkcseUtleTpoLHhLZXk6YyxjYXBEZWZhdWx0czp7bGVuZ3RoUmF0aW9NdWx0aXBsaWVyOmllLGxlbmd0aE1heDppZX0seDpZLngseTpZLnksd2lkdGg6WS53aWR0aCxoZWlnaHQ6WS5oZWlnaHQsbWlkUG9pbnQ6e3g6WS54K1kud2lkdGgvMix5OlkueStZLmhlaWdodC8yfSxmaWxsOmcsc3Ryb2tlOmYsb3BhY2l0eToxLHN0cm9rZVdpZHRoOnYsY29ybmVyUmFkaXVzOkMsdG9wTGVmdENvcm5lclJhZGl1czohKGo9PT1fKSx0b3BSaWdodENvcm5lclJhZGl1czpfLGJvdHRvbVJpZ2h0Q29ybmVyUmFkaXVzOmo9PT1fLGJvdHRvbUxlZnRDb3JuZXJSYWRpdXM6IV8sY29ybmVyUmFkaXVzQmJveDpLLGxhYmVsOnRlfTtJW2xdLm5vZGVEYXRhLnB1c2goc2UpLElbbF0ubGFiZWxEYXRhLnB1c2goc2UpfSl9KSxJfSkpfW5vZGVGYWN0b3J5KCl7cmV0dXJuIG5ldyBPaH11cGRhdGVEYXR1bVNlbGVjdGlvbihlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3JldHVybiBlLmRhdHVtU2VsZWN0aW9uLnVwZGF0ZShlLm5vZGVEYXRhLGU9PntlLnRhZz0wfSxlPT5MYyhlLnhWYWx1ZSkpfSkpfXVwZGF0ZURhdHVtTm9kZXMoZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtpZighdGhpcy5wcm9wZXJ0aWVzLmlzVmFsaWQoKSlyZXR1cm47Y29uc3R7eUtleTp0LHN0YWNrR3JvdXA6aSxmaWxsOnMsZmlsbE9wYWNpdHk6cixzdHJva2U6byxzdHJva2VXaWR0aDpuLHN0cm9rZU9wYWNpdHk6YSxsaW5lRGFzaDpsLGxpbmVEYXNoT2Zmc2V0OmQsZm9ybWF0dGVyOmMsc2hhZG93OmgsaGlnaGxpZ2h0U3R5bGU6e2l0ZW06dX19PXRoaXMucHJvcGVydGllcyxwPXRoaXMuYXhlcy54LGc9QnUobnVsbD09cD92b2lkIDA6cC52aXNpYmxlUmFuZ2UpLG09IngiPT09dGhpcy5nZXRDYXRlZ29yeURpcmVjdGlvbigpO2UuZGF0dW1TZWxlY3Rpb24uZWFjaCgocCxmKT0+e2NvbnN0IHY9e2ZpbGw6cyxzdHJva2U6byxmaWxsT3BhY2l0eTpyLHN0cm9rZU9wYWNpdHk6YSxsaW5lRGFzaDpsLGxpbmVEYXNoT2Zmc2V0OmQsZmlsbFNoYWRvdzpoLHN0cm9rZVdpZHRoOnRoaXMuZ2V0U3Ryb2tlV2lkdGgobiksY29ybmVyUmFkaXVzOmYuY29ybmVyUmFkaXVzLHRvcExlZnRDb3JuZXJSYWRpdXM6Zi50b3BMZWZ0Q29ybmVyUmFkaXVzLHRvcFJpZ2h0Q29ybmVyUmFkaXVzOmYudG9wUmlnaHRDb3JuZXJSYWRpdXMsYm90dG9tUmlnaHRDb3JuZXJSYWRpdXM6Zi5ib3R0b21SaWdodENvcm5lclJhZGl1cyxib3R0b21MZWZ0Q29ybmVyUmFkaXVzOmYuYm90dG9tTGVmdENvcm5lclJhZGl1cyxjb3JuZXJSYWRpdXNCYm94OmYuY29ybmVyUmFkaXVzQmJveH0sQz1tP2Yud2lkdGg+MDpmLmhlaWdodD4wLHk9VnUoe2RhdHVtOmYsY3R4OnRoaXMuY3R4LHNlcmllc0lkOnRoaXMuaWQsaXNIaWdobGlnaHRlZDplLmlzSGlnaGxpZ2h0LGhpZ2hsaWdodFN0eWxlOnUseUtleTp0LHN0eWxlOnYsZm9ybWF0dGVyOmMsc3RhY2tHcm91cDppfSk7eS5jcmlzcD1nLHkudmlzaWJsZT1DLF91KHtyZWN0OnAsY29uZmlnOnl9KX0pfSkpfXVwZGF0ZUxhYmVsU2VsZWN0aW9uKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLmlzTGFiZWxFbmFibGVkKCk/ZS5sYWJlbERhdGE6W107cmV0dXJuIGUubGFiZWxTZWxlY3Rpb24udXBkYXRlKHQsZT0+e2UudGFnPTEsZS5wb2ludGVyRXZlbnRzPTF9KX0pKX11cGRhdGVMYWJlbE5vZGVzKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7ZS5sYWJlbFNlbGVjdGlvbi5lYWNoKChlLHQpPT57S3UoZSx0aGlzLnByb3BlcnRpZXMubGFiZWwsdC5sYWJlbCl9KX0pKX1nZXRUb29sdGlwSHRtbChlKXt2YXIgdDtjb25zdHtpZDppLHByb2Nlc3NlZERhdGE6cyxjdHg6e2NhbGxiYWNrQ2FjaGU6cn19PXRoaXMsbz10aGlzLmdldENhdGVnb3J5QXhpcygpLG49dGhpcy5nZXRWYWx1ZUF4aXMoKTtpZighKHMmJnRoaXMucHJvcGVydGllcy5pc1ZhbGlkKCkmJm8mJm4pKXJldHVybiIiO2NvbnN0e3hLZXk6YSx5S2V5OmwseE5hbWU6ZCx5TmFtZTpjLGZpbGw6aCxzdHJva2U6dSxzdHJva2VXaWR0aDpwLHRvb2x0aXA6Zyxmb3JtYXR0ZXI6ZixzdGFja0dyb3VwOnZ9PXRoaXMucHJvcGVydGllcyx7eFZhbHVlOkMseVZhbHVlOnksZGF0dW06U309ZSx3PW8uZm9ybWF0RGF0dW0oQyksYj1uLmZvcm1hdERhdHVtKHkpLEU9V2goYyksUj1XaCh3KyI6ICIrYik7bGV0IHg7ZiYmKHg9ci5jYWxsKGYse3Nlcmllc0lkOmksZGF0dW06Uyx4S2V5OmEseUtleTpsLHN0YWNrR3JvdXA6dixmaWxsOmgsc3Ryb2tlOnUsc3Ryb2tlV2lkdGg6dGhpcy5nZXRTdHJva2VXaWR0aChwKSxoaWdobGlnaHRlZDohMX0pKTtjb25zdCBUPW51bGwhPSh0PW51bGw9PXg/dm9pZCAwOnguZmlsbCk/dDpoO3JldHVybiBnLnRvVG9vbHRpcEh0bWwoe3RpdGxlOkUsY29udGVudDpSLGJhY2tncm91bmRDb2xvcjpUfSxtKHtzZXJpZXNJZDppLGRhdHVtOlMseEtleTphLHlLZXk6bCx4TmFtZTpkLHlOYW1lOmMsc3RhY2tHcm91cDp2LHRpdGxlOkUsY29sb3I6VH0sdGhpcy5nZXRNb2R1bGVUb29sdGlwUGFyYW1zKCkpKX1nZXRMZWdlbmREYXRhKGUpe3ZhciB0LGk7Y29uc3R7c2hvd0luTGVnZW5kOnN9PXRoaXMucHJvcGVydGllcztpZigiY2F0ZWdvcnkiIT09ZXx8IShudWxsPT0odD10aGlzLmRhdGEpP3ZvaWQgMDp0Lmxlbmd0aCl8fCF0aGlzLnByb3BlcnRpZXMuaXNWYWxpZCgpfHwhcylyZXR1cm5bXTtjb25zdHt5S2V5OnIseU5hbWU6byxmaWxsOm4sc3Ryb2tlOmEsc3Ryb2tlV2lkdGg6bCxmaWxsT3BhY2l0eTpkLHN0cm9rZU9wYWNpdHk6YyxsZWdlbmRJdGVtTmFtZTpoLHZpc2libGU6dX09dGhpcy5wcm9wZXJ0aWVzO3JldHVyblt7bGVnZW5kVHlwZToiY2F0ZWdvcnkiLGlkOnRoaXMuaWQsaXRlbUlkOnIsc2VyaWVzSWQ6dGhpcy5pZCxlbmFibGVkOnUsbGFiZWw6e3RleHQ6bnVsbCE9KGk9bnVsbCE9aD9oOm8pP2k6cn0sbWFya2VyOntmaWxsOm4sZmlsbE9wYWNpdHk6ZCxzdHJva2U6YSxzdHJva2VXaWR0aDpsLHN0cm9rZU9wYWNpdHk6Y30sbGVnZW5kSXRlbU5hbWU6aH1dfWFuaW1hdGVFbXB0eVVwZGF0ZVJlYWR5KHtkYXR1bVNlbGVjdGlvbnM6ZSxsYWJlbFNlbGVjdGlvbnM6dCxhbm5vdGF0aW9uU2VsZWN0aW9uczppfSl7Y29uc3Qgcz1VdShXdSh0aGlzLmlzVmVydGljYWwoKSx0aGlzLmF4ZXMsIm5vcm1hbCIpKTtfcih0aGlzLmlkLCJub2RlcyIsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcixlLHMpLGpoKHRoaXMsImxhYmVscyIsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcix0KSxqaCh0aGlzLCJhbm5vdGF0aW9ucyIsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcixpKX1hbmltYXRlV2FpdGluZ1VwZGF0ZVJlYWR5KGUpe3ZhciB0LGkscztjb25zdHtkYXR1bVNlbGVjdGlvbnM6cixsYWJlbFNlbGVjdGlvbnM6byxhbm5vdGF0aW9uU2VsZWN0aW9uczpuLHByZXZpb3VzQ29udGV4dERhdGE6YX09ZTt0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLnN0b3BCeUFuaW1hdGlvbkdyb3VwSWQodGhpcy5pZCk7Y29uc3QgbD1udWxsPT0oaT1udWxsPT0odD10aGlzLnByb2Nlc3NlZERhdGEpP3ZvaWQgMDp0LnJlZHVjZWQpP3ZvaWQgMDppLmRpZmYsZD0wPT09KG51bGw9PWE/dm9pZCAwOmEubGVuZ3RoKT8iZmFkZSI6Im5vcm1hbCIsYz1VdShXdSh0aGlzLmlzVmVydGljYWwoKSx0aGlzLmF4ZXMsZCkpO19yKHRoaXMuaWQsIm5vZGVzIix0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLHIsYywoZSx0KT0+TGModC54VmFsdWUpLGwpOyhudWxsPT0ocz1udWxsPT1sP3ZvaWQgMDpsLmNoYW5nZWQpfHxzKSYmKGpoKHRoaXMsImxhYmVscyIsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcixvKSxqaCh0aGlzLCJhbm5vdGF0aW9ucyIsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcixuKSl9aXNMYWJlbEVuYWJsZWQoKXtyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmxhYmVsLmVuYWJsZWR9fTskdS5jbGFzc05hbWU9IkJhclNlcmllcyIsJHUudHlwZT0iYmFyIjt2YXIgWHU9e3R5cGU6InNlcmllcyIsb3B0aW9uc0tleToic2VyaWVzW10iLHBhY2thZ2VUeXBlOiJjb21tdW5pdHkiLGNoYXJ0VHlwZXM6WyJjYXJ0ZXNpYW4iXSxpZGVudGlmaWVyOiJiYXIiLGluc3RhbmNlQ29uc3RydWN0b3I6JHUsc3RhY2thYmxlOiEwLGdyb3VwYWJsZTohMCxzZXJpZXNEZWZhdWx0czp7YXhlczpbe3R5cGU6Im51bWJlciIscG9zaXRpb246ImxlZnQifSx7dHlwZToiY2F0ZWdvcnkiLHBvc2l0aW9uOiJib3R0b20ifV19LHN3YXBEZWZhdWx0QXhlc0NvbmRpdGlvbjplPT4iaG9yaXpvbnRhbCI9PT0obnVsbD09ZT92b2lkIDA6ZS5kaXJlY3Rpb24pLHRoZW1lVGVtcGxhdGU6e3Nlcmllczp7X19leHRlbmRzX186ZGksZGlyZWN0aW9uOiJ2ZXJ0aWNhbCIsZmlsbE9wYWNpdHk6MSxzdHJva2VXaWR0aDowLGxpbmVEYXNoOlswXSxsaW5lRGFzaE9mZnNldDowLGxhYmVsOntlbmFibGVkOiExLGZvbnRTdHlsZTp2b2lkIDAsZm9udFdlaWdodDoibm9ybWFsIixmb250U2l6ZToxMixmb250RmFtaWx5OnVpLGNvbG9yOm1pLGZvcm1hdHRlcjp2b2lkIDAscGxhY2VtZW50OiJpbnNpZGUifSxzaGFkb3c6e2VuYWJsZWQ6ITEsY29sb3I6d2kseE9mZnNldDozLHlPZmZzZXQ6MyxibHVyOjV9fX0sZW50ZXJwcmlzZVRoZW1lVGVtcGxhdGU6e3Nlcmllczp7ZXJyb3JCYXI6e2NhcDp7bGVuZ3RoUmF0aW86LjN9fX19LHBhbGV0dGVGYWN0b3J5Ol9ofSxxdT1lPT57Y29uc3QgdD1tci5mcm9tU3RyaW5nKGUpLFtpLHMscl09bXIuUkdCdG9PS0xDSCh0LnIsdC5nLHQuYik7cmV0dXJue2w6aSxjOnMsaDpyLGE6dC5hfX0sWnU9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmludmFsaWQ9ITAsdGhpcy5kb21haW49WzAsMV0sdGhpcy5yYW5nZT1bInJlZCIsImJsdWUiXSx0aGlzLnBhcnNlZFJhbmdlPXRoaXMucmFuZ2UubWFwKHF1KX11cGRhdGUoKXtjb25zdHtkb21haW46ZSxyYW5nZTp0fT10aGlzO2UubGVuZ3RoPDImJihMLndhcm5PbmNlKCJgY29sb3JEb21haW5gIHNob3VsZCBoYXZlIGF0IGxlYXN0IDIgdmFsdWVzLiIpLDA9PT1lLmxlbmd0aD9lLnB1c2goMCwxKToxPT09ZS5sZW5ndGgmJmUucHVzaChlWzBdKzEpKTtmb3IobGV0IHQ9MTt0PGUubGVuZ3RoO3QrKyl7aWYoZVt0LTFdPj1lW3RdKXtMLndhcm5PbmNlKCJgY29sb3JEb21haW5gIHZhbHVlcyBzaG91bGQgYmUgc3VwcGxpZWQgaW4gYXNjZW5kaW5nIG9yZGVyLiIpLGUuc29ydCgoZSx0KT0+ZS10KTticmVha319aWYodC5sZW5ndGg8ZS5sZW5ndGgpZm9yKGxldCBpPXQubGVuZ3RoO2k8ZS5sZW5ndGg7aSsrKXQucHVzaCh0Lmxlbmd0aD4wP3RbMF06ImJsYWNrIik7dGhpcy5wYXJzZWRSYW5nZT10aGlzLnJhbmdlLm1hcChxdSl9Y29udmVydChlKXt0aGlzLnJlZnJlc2goKTtjb25zdHtkb21haW46dCxyYW5nZTppLHBhcnNlZFJhbmdlOnN9PXRoaXMscj10WzBdLG89dC5hdCgtMSksbj1pWzBdLGE9aVtpLmxlbmd0aC0xXTtpZihlPD1yKXJldHVybiBuO2lmKGU+PW8pcmV0dXJuIGE7bGV0IGwsZDtpZigyPT09dC5sZW5ndGgpe2NvbnN0IHQ9KGUtcikvKG8tcikscz0xLyhpLmxlbmd0aC0xKTtsPWkubGVuZ3RoPD0yPzA6TWF0aC5taW4oTWF0aC5mbG9vcih0KihpLmxlbmd0aC0xKSksaS5sZW5ndGgtMiksZD0odC1sKnMpL3N9ZWxzZXtmb3IobD0wO2w8dC5sZW5ndGgtMiYmIShlPHRbbCsxXSk7bCsrKTtjb25zdCBpPXRbbF07ZD0oZS1pKS8odFtsKzFdLWkpfXJldHVybigoZSx0LGkpPT57bGV0IHMscjtpZihpPUtzKDAsaSwxKSxOdW1iZXIuaXNOYU4oZS5oKSYmTnVtYmVyLmlzTmFOKHQuaCkpcz0wLHI9MDtlbHNlIGlmKE51bWJlci5pc05hTihlLmgpKXM9dC5oLHI9dC5jO2Vsc2UgaWYoTnVtYmVyLmlzTmFOKHQuaCkpcz1lLmgscj1lLmM7ZWxzZXtjb25zdCBvPWUuaDtsZXQgbj10Lmg7Y29uc3QgYT10LmgtZS5oO2E+MTgwP24tPTM2MDphPC0xODAmJihuKz0zNjApLHM9byooMS1pKStuKmkscj1lLmMqKDEtaSkrdC5jKml9Y29uc3Qgbz1lLmwqKDEtaSkrdC5sKmksbj1lLmEqKDEtaSkrdC5hKmk7cmV0dXJuIG1yLmZyb21PS0xDSChvLHIscyxuKX0pKHNbbF0sc1tsKzFdLGQpLnRvUmdiYVN0cmluZygpfXJlZnJlc2goKXt0aGlzLmludmFsaWQmJih0aGlzLmludmFsaWQ9ITEsdGhpcy51cGRhdGUoKSx0aGlzLmludmFsaWQmJkwud2Fybk9uY2UoIkV4cGVjdGVkIHVwZGF0ZSB0byBub3QgaW52YWxpZGF0ZSBzY2FsZSIpKX19O3koWyRyXSxadS5wcm90b3R5cGUsImRvbWFpbiIsMikseShbJHJdLFp1LnByb3RvdHlwZSwicmFuZ2UiLDIpO3ZhciBRdT1jbGFzcyBleHRlbmRzIFhoe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLm1heFNpemU9MzB9fTt5KFtxcihubyksenMoe3JlZHJhdzozfSldLFF1LnByb3RvdHlwZSwibWF4U2l6ZSIsMikseShbcXIoYm8se29wdGlvbmFsOiEwfSksenMoe3JlZHJhdzozfSldLFF1LnByb3RvdHlwZSwiZG9tYWluIiwyKTt2YXIgSnU9Y2xhc3MgZXh0ZW5kcyBjaHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2xvclJhbmdlPVsiI2ZmZmYwMCIsIiMwMGZmMDAiLCIjMDAwMGZmIl0sdGhpcy5tYXJrZXI9bmV3IFF1LHRoaXMubGFiZWw9bmV3IFBuLHRoaXMudG9vbHRpcD1uZXcgWmh9fTt5KFtxcihzbyldLEp1LnByb3RvdHlwZSwieEtleSIsMikseShbcXIoc28pXSxKdS5wcm90b3R5cGUsInlLZXkiLDIpLHkoW3FyKHNvKV0sSnUucHJvdG90eXBlLCJzaXplS2V5IiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sSnUucHJvdG90eXBlLCJsYWJlbEtleSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLEp1LnByb3RvdHlwZSwiY29sb3JLZXkiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxKdS5wcm90b3R5cGUsInhOYW1lIiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sSnUucHJvdG90eXBlLCJ5TmFtZSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLEp1LnByb3RvdHlwZSwic2l6ZU5hbWUiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxKdS5wcm90b3R5cGUsImxhYmVsTmFtZSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLEp1LnByb3RvdHlwZSwiY29sb3JOYW1lIiwyKSx5KFtxcihibyx7b3B0aW9uYWw6ITB9KV0sSnUucHJvdG90eXBlLCJjb2xvckRvbWFpbiIsMikseShbcXIoU28pXSxKdS5wcm90b3R5cGUsImNvbG9yUmFuZ2UiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxKdS5wcm90b3R5cGUsInRpdGxlIiwyKSx5KFtxcihlbyldLEp1LnByb3RvdHlwZSwibWFya2VyIiwyKSx5KFtxcihlbyldLEp1LnByb3RvdHlwZSwibGFiZWwiLDIpLHkoW3FyKGVvKV0sSnUucHJvdG90eXBlLCJ0b29sdGlwIiwyKTt2YXIgZXA9Y2xhc3MgZXh0ZW5kcyBkaHtjb25zdHJ1Y3RvcihlLHQsaSxzKXtzdXBlcihlLHQsaSxzKSx0aGlzLnNpemVLZXk9cy5wcm9wZXJ0aWVzLnNpemVLZXl9fSx0cD1jbGFzcyBlIGV4dGVuZHMgaGh7Y29uc3RydWN0b3IoZSl7c3VwZXIoe21vZHVsZUN0eDplLHBpY2tNb2RlczpbMiwzLDBdLHBhdGhzUGVyU2VyaWVzOjAsaGFzTWFya2VyczohMCxtYXJrZXJTZWxlY3Rpb25HYXJiYWdlQ29sbGVjdGlvbjohMSxhbmltYXRpb25SZXNldEZuczp7bGFiZWw6emgsbWFya2VyOml1fX0pLHRoaXMuTm9kZUNsaWNrRXZlbnQ9ZXAsdGhpcy5wcm9wZXJ0aWVzPW5ldyBKdSx0aGlzLnNpemVTY2FsZT1uZXcgdmgsdGhpcy5jb2xvclNjYWxlPW5ldyBadX1wcm9jZXNzRGF0YShlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciB0LGk7aWYoIXRoaXMucHJvcGVydGllcy5pc1ZhbGlkKCl8fG51bGw9PXRoaXMuZGF0YSlyZXR1cm47Y29uc3R7aXNDb250aW51b3VzWDpzLGlzQ29udGludW91c1k6cn09dGhpcy5pc0NvbnRpbnVvdXMoKSx7eEtleTpvLHlLZXk6bixzaXplS2V5OmEsbGFiZWxLZXk6bCxjb2xvckRvbWFpbjpkLGNvbG9yUmFuZ2U6Yyxjb2xvcktleTpoLG1hcmtlcjp1fT10aGlzLnByb3BlcnRpZXMse2RhdGFNb2RlbDpwLHByb2Nlc3NlZERhdGE6Z309eWllbGQgdGhpcy5yZXF1ZXN0RGF0YU1vZGVsKGUsdGhpcy5kYXRhLHtwcm9wczpbR2ModGhpcyxvLHMse2lkOiJ4S2V5LXJhdyJ9KSxHYyh0aGlzLG4scix7aWQ6InlLZXktcmF3In0pLC4uLmw/W0djKHRoaXMsbCwhMSx7aWQ6ImxhYmVsS2V5LXJhdyJ9KV06W10sa2ModGhpcyxvLHMse2lkOiJ4VmFsdWUifSksa2ModGhpcyxuLHIse2lkOiJ5VmFsdWUifSksa2ModGhpcyxhLCEwLHtpZDoic2l6ZVZhbHVlIn0pLC4uLmg/W2tjKHRoaXMsaCwhMCx7aWQ6ImNvbG9yVmFsdWUifSldOltdLC4uLmw/W2tjKHRoaXMsbCwhMSx7aWQ6ImxhYmVsVmFsdWUifSldOltdXSxkYXRhVmlzaWJsZTp0aGlzLnZpc2libGV9KSxtPXAucmVzb2x2ZVByb2Nlc3NlZERhdGFJbmRleEJ5SWQodGhpcywic2l6ZVZhbHVlIikuaW5kZXgsZj1udWxsIT0odD1nLmRvbWFpbi52YWx1ZXNbbV0pP3Q6W107aWYodGhpcy5zaXplU2NhbGUuZG9tYWluPXUuZG9tYWluP3UuZG9tYWluOmYsaCl7Y29uc3QgZT1wLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsImNvbG9yVmFsdWUiKS5pbmRleDt0aGlzLmNvbG9yU2NhbGUuZG9tYWluPW51bGwhPShpPW51bGwhPWQ/ZDpnLmRvbWFpbi52YWx1ZXNbZV0pP2k6W10sdGhpcy5jb2xvclNjYWxlLnJhbmdlPWMsdGhpcy5jb2xvclNjYWxlLnVwZGF0ZSgpfXRoaXMuYW5pbWF0aW9uU3RhdGUudHJhbnNpdGlvbigidXBkYXRlRGF0YSIpfSkpfWdldFNlcmllc0RvbWFpbihlKXtjb25zdHtkYXRhTW9kZWw6dCxwcm9jZXNzZWREYXRhOml9PXRoaXM7aWYoIWl8fCF0KXJldHVybltdO2NvbnN0IHM9IngiPT09ZT8ieFZhbHVlIjoieVZhbHVlIixyPXQucmVzb2x2ZVByb2Nlc3NlZERhdGFEZWZCeUlkKHRoaXMscyksbz10LmdldERvbWFpbih0aGlzLHMsInZhbHVlIixpKTtpZigidmFsdWUiPT09KG51bGw9PXI/dm9pZCAwOnIuZGVmLnR5cGUpJiYiY2F0ZWdvcnkiPT09KG51bGw9PXI/dm9pZCAwOnIuZGVmLnZhbHVlVHlwZSkpcmV0dXJuIG87Y29uc3Qgbj10aGlzLmF4ZXNbZV07cmV0dXJuIGtsKEVzKG8pLG4pfWNyZWF0ZU5vZGVEYXRhKCl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXt2YXIgdCxpLHM7Y29uc3R7YXhlczpyLGRhdGFNb2RlbDpvLHByb2Nlc3NlZERhdGE6bixjb2xvclNjYWxlOmEsc2l6ZVNjYWxlOmx9PXRoaXMse3hLZXk6ZCx5S2V5OmMsc2l6ZUtleTpoLGxhYmVsS2V5OnUseE5hbWU6cCx5TmFtZTpnLHNpemVOYW1lOmYsbGFiZWxOYW1lOnYsbGFiZWw6Qyxjb2xvcktleTp5LG1hcmtlcjp3LHZpc2libGU6Yn09dGhpcy5wcm9wZXJ0aWVzLEU9ci54LFI9ci55O2lmKCEobyYmbiYmYiYmRSYmUikpcmV0dXJuW107Y29uc3QgeD1vLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsInhWYWx1ZSIpLmluZGV4LFQ9by5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGV4QnlJZCh0aGlzLCJ5VmFsdWUiKS5pbmRleCxEPWg/by5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGV4QnlJZCh0aGlzLCJzaXplVmFsdWUiKS5pbmRleDotMSxPPXk/by5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGV4QnlJZCh0aGlzLCJjb2xvclZhbHVlIikuaW5kZXg6LTEsQT11P28ucmVzb2x2ZVByb2Nlc3NlZERhdGFJbmRleEJ5SWQodGhpcywibGFiZWxWYWx1ZSIpLmluZGV4Oi0xLFA9RS5zY2FsZSxNPVIuc2NhbGUsTD0obnVsbCE9KHQ9UC5iYW5kd2lkdGgpP3Q6MCkvMixGPShudWxsIT0oaT1NLmJhbmR3aWR0aCk/aTowKS8yLEk9W107bC5yYW5nZT1bdy5zaXplLHcubWF4U2l6ZV07Y29uc3QgTj1DLmdldEZvbnQoKTtmb3IoY29uc3R7dmFsdWVzOmUsZGF0dW06dH1vZiBudWxsIT0ocz1uLmRhdGEpP3M6W10pe2NvbnN0IGk9ZVt4XSxzPWVbVF0scj1QLmNvbnZlcnQoaSkrTCxvPU0uY29udmVydChzKStGLG49dGhpcy5nZXRMYWJlbFRleHQoQyx7dmFsdWU6dT9lW0FdOnMsZGF0dW06dCx4S2V5OmQseUtleTpjLHNpemVLZXk6aCxsYWJlbEtleTp1LHhOYW1lOnAseU5hbWU6ZyxzaXplTmFtZTpmLGxhYmVsTmFtZTp2fSksUz0kby5nZXRUZXh0U2l6ZShTdHJpbmcobiksTiksYj1oP2wuY29udmVydChlW0RdKTp3LnNpemUsRT15P2EuY29udmVydChlW09dKTp2b2lkIDA7SS5wdXNoKHtzZXJpZXM6dGhpcyxpdGVtSWQ6Yyx5S2V5OmMseEtleTpkLGRhdHVtOnQseFZhbHVlOmkseVZhbHVlOnMsc2l6ZVZhbHVlOmVbRF0scG9pbnQ6e3g6cix5Om8sc2l6ZTpifSxtaWRQb2ludDp7eDpyLHk6b30sZmlsbDpFLGxhYmVsOm0oe3RleHQ6bn0sUyl9KX1yZXR1cm5be2l0ZW1JZDpjLG5vZGVEYXRhOkksbGFiZWxEYXRhOkksc2NhbGVzOlMoZS5wcm90b3R5cGUsdGhpcywiY2FsY3VsYXRlU2NhbGluZyIpLmNhbGwodGhpcyksdmlzaWJsZTp0aGlzLnZpc2libGV9XX0pKX1pc1BhdGhPclNlbGVjdGlvbkRpcnR5KCl7cmV0dXJuIHRoaXMucHJvcGVydGllcy5tYXJrZXIuaXNEaXJ0eSgpfWdldExhYmVsRGF0YSgpe3ZhciBlO3JldHVybiBudWxsPT0oZT10aGlzLmNvbnRleHROb2RlRGF0YSk/dm9pZCAwOmUucmVkdWNlKChlLHQpPT5lLmNvbmNhdCh0LmxhYmVsRGF0YSksW10pfW1hcmtlckZhY3RvcnkoKXtjb25zdHtzaGFwZTplfT10aGlzLnByb3BlcnRpZXMubWFya2VyO3JldHVybiBuZXcoVWQoZSkpfXVwZGF0ZU1hcmtlclNlbGVjdGlvbihlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e25vZGVEYXRhOnQsbWFya2VyU2VsZWN0aW9uOml9PWU7dGhpcy5wcm9wZXJ0aWVzLm1hcmtlci5pc0RpcnR5KCkmJihpLmNsZWFyKCksaS5jbGVhbnVwKCkpO2NvbnN0IHM9dGhpcy5wcm9wZXJ0aWVzLm1hcmtlci5lbmFibGVkP3Q6W107cmV0dXJuIGkudXBkYXRlKHMsdm9pZCAwLGU9PkxjKFtlLnhWYWx1ZSxlLnlWYWx1ZSxlLmxhYmVsLnRleHRdKSl9KSl9dXBkYXRlTWFya2VyTm9kZXMoZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHttYXJrZXJTZWxlY3Rpb246dCxpc0hpZ2hsaWdodDppfT1lLHt4S2V5OnMseUtleTpyLHNpemVLZXk6byxsYWJlbEtleTpuLG1hcmtlcjphfT10aGlzLnByb3BlcnRpZXMsbD1YZShpJiZ0aGlzLnByb3BlcnRpZXMuaGlnaGxpZ2h0U3R5bGUuaXRlbSxhLmdldFN0eWxlKCkpO3RoaXMuc2l6ZVNjYWxlLnJhbmdlPVthLnNpemUsYS5tYXhTaXplXSx0LmVhY2goKGUsdCk9Pnt0aGlzLnVwZGF0ZU1hcmtlclN0eWxlKGUsYSx7ZGF0dW06dCxoaWdobGlnaHRlZDppLHhLZXk6cyx5S2V5OnIsc2l6ZUtleTpvLGxhYmVsS2V5Om59LGwpfSksaXx8dGhpcy5wcm9wZXJ0aWVzLm1hcmtlci5tYXJrQ2xlYW4oKX0pKX11cGRhdGVMYWJlbFNlbGVjdGlvbihlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciB0LGk7Y29uc3Qgcz10aGlzLnByb3BlcnRpZXMubGFiZWwuZW5hYmxlZCYmbnVsbCE9KGk9bnVsbD09KHQ9dGhpcy5jaGFydCk/dm9pZCAwOnQucGxhY2VMYWJlbHMoKS5nZXQodGhpcykpP2k6W107cmV0dXJuIGUubGFiZWxTZWxlY3Rpb24udXBkYXRlKHMubWFwKGU9PmYobSh7fSxlLmRhdHVtKSx7cG9pbnQ6e3g6ZS54LHk6ZS55LHNpemU6ZS5kYXR1bS5wb2ludC5zaXplfX0pKSl9KSl9dXBkYXRlTGFiZWxOb2RlcyhlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e2xhYmVsOnR9PXRoaXMucHJvcGVydGllcztlLmxhYmVsU2VsZWN0aW9uLmVhY2goKGUsaSk9Pnt2YXIgcyxyLG8sbjtlLnRleHQ9aS5sYWJlbC50ZXh0LGUuZmlsbD10LmNvbG9yLGUueD1udWxsIT0ocj1udWxsPT0ocz1pLnBvaW50KT92b2lkIDA6cy54KT9yOjAsZS55PW51bGwhPShuPW51bGw9PShvPWkucG9pbnQpP3ZvaWQgMDpvLnkpP246MCxlLmZvbnRTdHlsZT10LmZvbnRTdHlsZSxlLmZvbnRXZWlnaHQ9dC5mb250V2VpZ2h0LGUuZm9udFNpemU9dC5mb250U2l6ZSxlLmZvbnRGYW1pbHk9dC5mb250RmFtaWx5LGUudGV4dEFsaWduPSJsZWZ0IixlLnRleHRCYXNlbGluZT0idG9wIn0pfSkpfWdldFRvb2x0aXBIdG1sKGUpe3ZhciB0O2NvbnN0IGk9dGhpcy5heGVzLngscz10aGlzLmF4ZXMueTtpZighdGhpcy5wcm9wZXJ0aWVzLmlzVmFsaWQoKXx8IWl8fCFzKXJldHVybiIiO2NvbnN0e3hLZXk6cix5S2V5Om8sc2l6ZUtleTpuLGxhYmVsS2V5OmEseE5hbWU6bCx5TmFtZTpkLHNpemVOYW1lOmMsbGFiZWxOYW1lOmgsbWFya2VyOnUsdG9vbHRpcDpwfT10aGlzLnByb3BlcnRpZXMsZz1udWxsIT0odD10aGlzLnByb3BlcnRpZXMudGl0bGUpP3Q6ZCxtPVhlKHtmaWxsOmUuZmlsbCxzdHJva2VXaWR0aDp0aGlzLmdldFN0cm9rZVdpZHRoKHUuc3Ryb2tlV2lkdGgpfSx1LmdldFN0eWxlKCkpLHtmaWxsOmY9ImdyYXkifT10aGlzLmdldE1hcmtlclN0eWxlKHUse2RhdHVtOmUsaGlnaGxpZ2h0ZWQ6ITEseEtleTpyLHlLZXk6byxzaXplS2V5Om4sbGFiZWxLZXk6YX0sbSkse2RhdHVtOnYseFZhbHVlOkMseVZhbHVlOnksc2l6ZVZhbHVlOlMsbGFiZWw6e3RleHQ6d319PWUsYj1XaChpLmZvcm1hdERhdHVtKEMpKSxFPVdoKHMuZm9ybWF0RGF0dW0oeSkpO2xldCBSPWA8Yj4ke1doKG51bGwhPWw/bDpyKX08L2I+OiAke2J9PGJyPjxiPiR7V2gobnVsbCE9ZD9kOm8pfTwvYj46ICR7RX1gO3JldHVybiBuJiYoUis9YDxicj48Yj4ke1doKG51bGwhPWM/YzpuKX08L2I+OiAke1doKFN0cmluZyhTKSl9YCksYSYmKFI9YDxiPiR7V2gobnVsbCE9aD9oOmEpfTwvYj46ICR7V2godyl9PGJyPmArUikscC50b1Rvb2x0aXBIdG1sKHt0aXRsZTpnLGNvbnRlbnQ6UixiYWNrZ3JvdW5kQ29sb3I6Zn0se2RhdHVtOnYseEtleTpyLHhOYW1lOmwseUtleTpvLHlOYW1lOmQsc2l6ZUtleTpuLHNpemVOYW1lOmMsbGFiZWxLZXk6YSxsYWJlbE5hbWU6aCx0aXRsZTpnLGNvbG9yOmYsc2VyaWVzSWQ6dGhpcy5pZH0pfWdldExlZ2VuZERhdGEoKXt2YXIgZSx0O2lmKCEobnVsbD09KGU9dGhpcy5kYXRhKT92b2lkIDA6ZS5sZW5ndGgpfHwhdGhpcy5wcm9wZXJ0aWVzLmlzVmFsaWQoKSlyZXR1cm5bXTtjb25zdHt5S2V5OmkseU5hbWU6cyx0aXRsZTpyLG1hcmtlcjpvLHZpc2libGU6bn09dGhpcy5wcm9wZXJ0aWVzLHtzaGFwZTphLGZpbGw6bCxzdHJva2U6ZCxmaWxsT3BhY2l0eTpjLHN0cm9rZU9wYWNpdHk6aCxzdHJva2VXaWR0aDp1fT1vO3JldHVyblt7bGVnZW5kVHlwZToiY2F0ZWdvcnkiLGlkOnRoaXMuaWQsaXRlbUlkOmksc2VyaWVzSWQ6dGhpcy5pZCxlbmFibGVkOm4sbGFiZWw6e3RleHQ6bnVsbCE9KHQ9bnVsbCE9cj9yOnMpP3Q6aX0sbWFya2VyOntzaGFwZTphLGZpbGw6bnVsbCE9bD9sOiJyZ2JhKDAsIDAsIDAsIDApIixzdHJva2U6bnVsbCE9ZD9kOiJyZ2JhKDAsIDAsIDAsIDApIixmaWxsT3BhY2l0eTpudWxsIT1jP2M6MSxzdHJva2VPcGFjaXR5Om51bGwhPWg/aDoxLHN0cm9rZVdpZHRoOm51bGwhPXU/dTowfX1dfWFuaW1hdGVFbXB0eVVwZGF0ZVJlYWR5KHttYXJrZXJTZWxlY3Rpb25zOmUsbGFiZWxTZWxlY3Rpb25zOnR9KXtldSh0aGlzLHRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIsZSksamgodGhpcywibGFiZWxzIix0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLHQpfWlzTGFiZWxFbmFibGVkKCl7cmV0dXJuIHRoaXMucHJvcGVydGllcy5sYWJlbC5lbmFibGVkfW5vZGVGYWN0b3J5KCl7cmV0dXJuIG5ldyBPbn19O3RwLmNsYXNzTmFtZT0iQnViYmxlU2VyaWVzIix0cC50eXBlPSJidWJibGUiO3ZhciBpcD17dHlwZToic2VyaWVzIixvcHRpb25zS2V5OiJzZXJpZXNbXSIscGFja2FnZVR5cGU6ImNvbW11bml0eSIsY2hhcnRUeXBlczpbImNhcnRlc2lhbiJdLGlkZW50aWZpZXI6ImJ1YmJsZSIsaW5zdGFuY2VDb25zdHJ1Y3Rvcjp0cCxzZXJpZXNEZWZhdWx0czp7YXhlczpbe3R5cGU6Im51bWJlciIscG9zaXRpb246ImJvdHRvbSJ9LHt0eXBlOiJudW1iZXIiLHBvc2l0aW9uOiJsZWZ0In1dfSx0aGVtZVRlbXBsYXRlOntzZXJpZXM6e19fZXh0ZW5kc19fOmRpLHRvb2x0aXA6e3Bvc2l0aW9uOnt0eXBlOiJub2RlIn19LG1hcmtlcjp7X19leHRlbmRzX186Y2ksbWF4U2l6ZTozMCxmaWxsT3BhY2l0eTouOH0sbGFiZWw6e2VuYWJsZWQ6ITEsZm9udFN0eWxlOnZvaWQgMCxmb250V2VpZ2h0OnZvaWQgMCxmb250U2l6ZToxMixmb250RmFtaWx5OnVpLGNvbG9yOnBpfX19LHBhbGV0dGVGYWN0b3J5OlZofSxzcD1jbGFzcyBleHRlbmRzIGNoe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmZpbGxPcGFjaXR5PTEsdGhpcy5zdHJva2VXaWR0aD0xLHRoaXMuc3Ryb2tlT3BhY2l0eT0xLHRoaXMubGluZURhc2g9WzBdLHRoaXMubGluZURhc2hPZmZzZXQ9MCx0aGlzLmFyZWFQbG90PSExLHRoaXMuYWdncmVnYXRpb249InN1bSIsdGhpcy5zaGFkb3c9bmV3IFloLHRoaXMubGFiZWw9bmV3IFBuLHRoaXMudG9vbHRpcD1uZXcgWmh9fTt5KFtxcihzbyldLHNwLnByb3RvdHlwZSwieEtleSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLHNwLnByb3RvdHlwZSwieUtleSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLHNwLnByb3RvdHlwZSwieE5hbWUiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxzcC5wcm90b3R5cGUsInlOYW1lIiwyKSx5KFtxcih5byx7b3B0aW9uYWw6ITB9KV0sc3AucHJvdG90eXBlLCJmaWxsIiwyKSx5KFtxcihhbyldLHNwLnByb3RvdHlwZSwiZmlsbE9wYWNpdHkiLDIpLHkoW3FyKHlvLHtvcHRpb25hbDohMH0pXSxzcC5wcm90b3R5cGUsInN0cm9rZSIsMikseShbcXIobm8pXSxzcC5wcm90b3R5cGUsInN0cm9rZVdpZHRoIiwyKSx5KFtxcihhbyldLHNwLnByb3RvdHlwZSwic3Ryb2tlT3BhY2l0eSIsMikseShbcXIoT28pXSxzcC5wcm90b3R5cGUsImxpbmVEYXNoIiwyKSx5KFtxcihubyldLHNwLnByb3RvdHlwZSwibGluZURhc2hPZmZzZXQiLDIpLHkoW3FyKHRvKV0sc3AucHJvdG90eXBlLCJhcmVhUGxvdCIsMikseShbcXIoaG8se29wdGlvbmFsOiEwfSldLHNwLnByb3RvdHlwZSwiYmlucyIsMikseShbcXIoVm8oWyJjb3VudCIsInN1bSIsIm1lYW4iXSwiYSBoaXN0b2dyYW0gYWdncmVnYXRpb24iKSldLHNwLnByb3RvdHlwZSwiYWdncmVnYXRpb24iLDIpLHkoW3FyKG5vLHtvcHRpb25hbDohMH0pXSxzcC5wcm90b3R5cGUsImJpbkNvdW50IiwyKSx5KFtxcihlbyldLHNwLnByb3RvdHlwZSwic2hhZG93IiwyKSx5KFtxcihlbyldLHNwLnByb3RvdHlwZSwibGFiZWwiLDIpLHkoW3FyKGVvKV0sc3AucHJvdG90eXBlLCJ0b29sdGlwIiwyKTt2YXIgcnA9Y2xhc3MgZSBleHRlbmRzIGhoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKHttb2R1bGVDdHg6ZSxwaWNrTW9kZXM6WzBdLGRhdHVtU2VsZWN0aW9uR2FyYmFnZUNvbGxlY3Rpb246ITEsYW5pbWF0aW9uUmVzZXRGbnM6e2RhdHVtOnp1LGxhYmVsOnpofX0pLHRoaXMucHJvcGVydGllcz1uZXcgc3AsdGhpcy5jYWxjdWxhdGVkQmlucz1bXX1kZXJpdmVCaW5zKGUpe2lmKHRoaXMucHJvcGVydGllcy5iaW5Db3VudClyZXR1cm4gdGhpcy5jYWxjdWxhdGVOaWNlQmlucyhlLHRoaXMucHJvcGVydGllcy5iaW5Db3VudCk7Y29uc3QgdD1FYShlWzBdLGVbMV0sMTApLGk9eGEoZVswXSxlWzFdLDEwKSxbc109dDtyZXR1cm5bW3MtaSxzXSwuLi50Lm1hcChlPT5bZSxlK2ldKV19Y2FsY3VsYXRlTmljZUJpbnMoZSx0KXtjb25zdCBpPU1hdGguZmxvb3IoZVswXSkscz1lWzFdLHI9dHx8MSx7c3RhcnQ6byxiaW5TaXplOm59PXRoaXMuY2FsY3VsYXRlTmljZVN0YXJ0KGkscyxyKTtyZXR1cm4gdGhpcy5nZXRCaW5zKG8scyxuLHIpfWdldEJpbnMoZSx0LGkscyl7Y29uc3Qgcj1bXSxvPXRoaXMuY2FsY3VsYXRlUHJlY2lzaW9uKGkpO2ZvcihsZXQgbj0wO248cztuKyspe2NvbnN0IGE9TWF0aC5yb3VuZCgoZStuKmkpKm8pL287bGV0IGw9TWF0aC5yb3VuZCgoZSsobisxKSppKSpvKS9vO249PT1zLTEmJihsPU1hdGgubWF4KGwsdCkpLHJbbl09W2EsbF19cmV0dXJuIHJ9Y2FsY3VsYXRlUHJlY2lzaW9uKGUpe2xldCB0PTEwO2lmKGlzRmluaXRlKGUpJiZlPjApZm9yKDtlPDE7KXQqPTEwLGUqPTEwO3JldHVybiB0fWNhbGN1bGF0ZU5pY2VTdGFydChlLHQsaSl7Y29uc3Qgcz1NYXRoLmFicyh0LWUpL2kscj1NYXRoLmZsb29yKE1hdGgubG9nMTAocykpLG89TWF0aC5wb3coMTAscik7cmV0dXJue3N0YXJ0Ok1hdGguZmxvb3IoZS9vKSpvLGJpblNpemU6c319cHJvY2Vzc0RhdGEoZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXt2YXIgdDtjb25zdHt4S2V5OmkseUtleTpzLGFyZWFQbG90OnIsYWdncmVnYXRpb246b309dGhpcy5wcm9wZXJ0aWVzLG49W0djKHRoaXMsaSwhMCksYmNdO2lmKHMpe2xldCBlPXVjKHRoaXMsImdyb3VwQ291bnQiKTsiY291bnQiPT09b3x8KCJzdW0iPT09bz9lPWRjKHRoaXMsImdyb3VwQWdnIik6Im1lYW4iPT09byYmKGU9Z2ModGhpcywiZ3JvdXBBZ2ciKSkpLHImJihlPW1jKHRoaXMsImdyb3VwQWdnIixlKSksbi5wdXNoKGtjKHRoaXMscywhMCx7aW52YWxpZFZhbHVlOnZvaWQgMH0pLGUpfWVsc2V7bGV0IGU9dWModGhpcywiZ3JvdXBBZ2ciKTtyJiYoZT1tYyh0aGlzLCJncm91cEFnZyIsZSkpLG4ucHVzaChlKX0hdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlci5pc1NraXBwZWQoKSYmdGhpcy5wcm9jZXNzZWREYXRhJiZuLnB1c2goTWModGhpcy5wcm9jZXNzZWREYXRhLCExKSkseWllbGQgdGhpcy5yZXF1ZXN0RGF0YU1vZGVsKGUsbnVsbCE9KHQ9dGhpcy5kYXRhKT90OltdLHtwcm9wczpuLGRhdGFWaXNpYmxlOnRoaXMudmlzaWJsZSxncm91cEJ5Rm46ZT0+e3ZhciB0O2NvbnN0IGk9a2woZS5kb21haW4ua2V5c1swXSk7aWYoMD09PWkubGVuZ3RoKXJldHVybiBlLmRvbWFpbi5ncm91cHM9W10sKCk9PltdO2NvbnN0IHM9bnVsbCE9KHQ9dGhpcy5wcm9wZXJ0aWVzLmJpbnMpP3Q6dGhpcy5kZXJpdmVCaW5zKGkpLHI9cy5sZW5ndGg7cmV0dXJuIHRoaXMuY2FsY3VsYXRlZEJpbnM9Wy4uLnNdLGU9Pntjb25zdCB0PWUua2V5c1swXTtmb3IobGV0IGU9MDtlPHI7ZSsrKXtjb25zdCBpPXNbZV07aWYodD49aVswXSYmdDxpWzFdKXJldHVybiBpO2lmKGU9PT1yLTEmJnQ8PWlbMV0pcmV0dXJuIGl9cmV0dXJuW119fX0pLHRoaXMuYW5pbWF0aW9uU3RhdGUudHJhbnNpdGlvbigidXBkYXRlRGF0YSIpfSkpfWdldFNlcmllc0RvbWFpbihlKXt2YXIgdCxpLHMscjtjb25zdHtwcm9jZXNzZWREYXRhOm8sZGF0YU1vZGVsOm59PXRoaXM7aWYoIW98fCFufHwhdGhpcy5jYWxjdWxhdGVkQmlucy5sZW5ndGgpcmV0dXJuW107Y29uc3QgYT1uLmdldERvbWFpbih0aGlzLCJncm91cEFnZyIsImFnZ3JlZ2F0ZSIsbyksbD1udWxsPT0odD10aGlzLmNhbGN1bGF0ZWRCaW5zKT92b2lkIDA6dFswXVswXSxkPW51bGw9PShyPXRoaXMuY2FsY3VsYXRlZEJpbnMpP3ZvaWQgMDpyWyhudWxsIT0ocz1udWxsPT0oaT10aGlzLmNhbGN1bGF0ZWRCaW5zKT92b2lkIDA6aS5sZW5ndGgpP3M6MCktMV1bMV07cmV0dXJuIGtsKCJ4Ij09PWU/W2wsZF06YSl9Y3JlYXRlTm9kZURhdGEoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciB0O2NvbnN0e2lkOmksYXhlczpzLHByb2Nlc3NlZERhdGE6cixjdHg6e2NhbGxiYWNrQ2FjaGU6b319PXRoaXMsbj1zLngsYT1zLnk7aWYoISh0aGlzLnZpc2libGUmJm4mJmEmJnImJiJncm91cGVkIj09PXIudHlwZSkpcmV0dXJuW107Y29uc3R7c2NhbGU6bH09bix7c2NhbGU6ZH09YSx7eEtleTpjLHlLZXk6aCx4TmFtZTp1LHlOYW1lOnAsZmlsbDpnLHN0cm9rZTptLHN0cm9rZVdpZHRoOmZ9PXRoaXMucHJvcGVydGllcyx7Zm9ybWF0dGVyOnY9KGU9PlN0cmluZyhlLnZhbHVlKSksZm9udFN0eWxlOkMsZm9udFdlaWdodDp5LGZvbnRTaXplOncsZm9udEZhbWlseTpiLGNvbG9yOkV9PXRoaXMucHJvcGVydGllcy5sYWJlbCxSPVtdO3JldHVybiByLmRhdGEuZm9yRWFjaChlPT57dmFyIHQ7Y29uc3R7YWdnVmFsdWVzOltbcyxyXV09W1swLDBdXSxkYXR1bTpuLGRhdHVtOntsZW5ndGg6YX0sa2V5czpTLGtleXM6W3gsVF19PWUsRD1sLmNvbnZlcnQoeCksTz1sLmNvbnZlcnQoVCksQT1zK3IsUD1kLmNvbnZlcnQoMCksTT1kLmNvbnZlcnQoQSksTD1NYXRoLmFicyhPLUQpLEY9TWF0aC5hYnMoTS1QKSxJPU1hdGgubWluKEQsTyksTj1NYXRoLm1pbihQLE0pLEc9MCE9PUE/e3RleHQ6bnVsbCE9KHQ9by5jYWxsKHYse3ZhbHVlOkEsZGF0dW06bixzZXJpZXNJZDppLHhLZXk6Yyx5S2V5OmgseE5hbWU6dSx5TmFtZTpwfSkpP3Q6U3RyaW5nKEEpLGZvbnRTdHlsZTpDLGZvbnRXZWlnaHQ6eSxmb250U2l6ZTp3LGZvbnRGYW1pbHk6YixmaWxsOkUseDpJK0wvMix5Ok4rRi8yfTp2b2lkIDAsaz17eDpJK0wvMix5Ok4rRi8yfTtSLnB1c2goe3Nlcmllczp0aGlzLGRhdHVtOm4sYWdncmVnYXRlZFZhbHVlOkEsZnJlcXVlbmN5OmEsZG9tYWluOlMseUtleTpoLHhLZXk6Yyx4OkkseTpOLHhWYWx1ZTpELHlWYWx1ZTpNLHdpZHRoOkwsaGVpZ2h0OkYsbWlkUG9pbnQ6ayxmaWxsOmcsc3Ryb2tlOm0sb3BhY2l0eToxLHN0cm9rZVdpZHRoOmYsbGFiZWw6R30pfSksW3tpdGVtSWQ6bnVsbCE9KHQ9dGhpcy5wcm9wZXJ0aWVzLnlLZXkpP3Q6dGhpcy5pZCxub2RlRGF0YTpSLGxhYmVsRGF0YTpSLHNjYWxlczpTKGUucHJvdG90eXBlLHRoaXMsImNhbGN1bGF0ZVNjYWxpbmciKS5jYWxsKHRoaXMpLGFuaW1hdGlvblZhbGlkOiEwLHZpc2libGU6dGhpcy52aXNpYmxlfV19KSl9bm9kZUZhY3RvcnkoKXtyZXR1cm4gbmV3IE9ofXVwZGF0ZURhdHVtU2VsZWN0aW9uKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7bm9kZURhdGE6dCxkYXR1bVNlbGVjdGlvbjppfT1lO3JldHVybiBpLnVwZGF0ZSh0LGU9PntlLnRhZz0wLGUuY3Jpc3A9ITB9LGU9PmUuZG9tYWluLmpvaW4oIl8iKSl9KSl9dXBkYXRlRGF0dW1Ob2RlcyhlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e2lzSGlnaGxpZ2h0OnR9PWUse2ZpbGxPcGFjaXR5Omksc3Ryb2tlT3BhY2l0eTpzLGxpbmVEYXNoOnIsbGluZURhc2hPZmZzZXQ6byxzaGFkb3c6bixoaWdobGlnaHRTdHlsZTp7aXRlbTp7ZmlsbDphLGZpbGxPcGFjaXR5Omw9aSxzdHJva2U6ZCxzdHJva2VXaWR0aDpjfX19PXRoaXMucHJvcGVydGllcztlLmRhdHVtU2VsZWN0aW9uLmVhY2goKGUsaCx1KT0+e3ZhciBwLGc7Y29uc3QgbT10JiZ2b2lkIDAhPT1jP2M6aC5zdHJva2VXaWR0aCxmPXQ/bDppO2UuZmlsbD1udWxsIT0ocD10P2E6dm9pZCAwKT9wOmguZmlsbCxlLnN0cm9rZT1udWxsIT0oZz10P2Q6dm9pZCAwKT9nOmguc3Ryb2tlLGUuZmlsbE9wYWNpdHk9ZixlLnN0cm9rZU9wYWNpdHk9cyxlLnN0cm9rZVdpZHRoPW0sZS5saW5lRGFzaD1yLGUubGluZURhc2hPZmZzZXQ9byxlLmZpbGxTaGFkb3c9bixlLnpJbmRleD10P0tjLmhpZ2hsaWdodGVkWkluZGV4OnUsZS52aXNpYmxlPWguaGVpZ2h0PjB9KX0pKX11cGRhdGVMYWJlbFNlbGVjdGlvbihlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e2xhYmVsRGF0YTp0LGxhYmVsU2VsZWN0aW9uOml9PWU7cmV0dXJuIGkudXBkYXRlKHQsZT0+e2UudGFnPTEsZS5wb2ludGVyRXZlbnRzPTEsZS50ZXh0QWxpZ249ImNlbnRlciIsZS50ZXh0QmFzZWxpbmU9Im1pZGRsZSJ9KX0pKX11cGRhdGVMYWJlbE5vZGVzKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLmlzTGFiZWxFbmFibGVkKCk7ZS5sYWJlbFNlbGVjdGlvbi5lYWNoKChlLGkpPT57Y29uc3Qgcz1pLmxhYmVsO3MmJnQ/KGUudGV4dD1zLnRleHQsZS54PXMueCxlLnk9cy55LGUuZm9udFN0eWxlPXMuZm9udFN0eWxlLGUuZm9udFdlaWdodD1zLmZvbnRXZWlnaHQsZS5mb250U2l6ZT1zLmZvbnRTaXplLGUuZm9udEZhbWlseT1zLmZvbnRGYW1pbHksZS5maWxsPXMuZmlsbCxlLnZpc2libGU9ITApOmUudmlzaWJsZT0hMX0pfSkpfWdldFRvb2x0aXBIdG1sKGUpe2NvbnN0IHQ9dGhpcy5heGVzLngsaT10aGlzLmF4ZXMueTtpZighdGhpcy5wcm9wZXJ0aWVzLmlzVmFsaWQoKXx8IXR8fCFpKXJldHVybiIiO2NvbnN0e3hLZXk6cyx5S2V5OnIseE5hbWU6byx5TmFtZTpuLGZpbGw6YSxhZ2dyZWdhdGlvbjpsLHRvb2x0aXA6ZH09dGhpcy5wcm9wZXJ0aWVzLHthZ2dyZWdhdGVkVmFsdWU6YyxmcmVxdWVuY3k6aCxkb21haW46W3UscF19PWUsZz1gJHtXaChudWxsIT1vP286cyl9OiAke3QuZm9ybWF0RGF0dW0odSl9IC0gJHt0LmZvcm1hdERhdHVtKHApfWA7bGV0IG09cj9gPGI+JHtXaChudWxsIT1uP246cil9ICgke2x9KTwvYj46ICR7aS5mb3JtYXREYXR1bShjKX08YnI+YDoiIjttKz0iPGI+RnJlcXVlbmN5PC9iPjogIitoO2NvbnN0IGY9e3RpdGxlOmcsYmFja2dyb3VuZENvbG9yOmEsY29udGVudDptfTtyZXR1cm4gZC50b1Rvb2x0aXBIdG1sKGYse2RhdHVtOntkYXRhOmUuZGF0dW0sYWdncmVnYXRlZFZhbHVlOmUuYWdncmVnYXRlZFZhbHVlLGRvbWFpbjplLmRvbWFpbixmcmVxdWVuY3k6ZS5mcmVxdWVuY3l9LHhLZXk6cyx4TmFtZTpvLHlLZXk6cix5TmFtZTpuLGNvbG9yOmEsdGl0bGU6ZyxzZXJpZXNJZDp0aGlzLmlkfSl9Z2V0TGVnZW5kRGF0YShlKXt2YXIgdCxpO2lmKCEobnVsbD09KHQ9dGhpcy5kYXRhKT92b2lkIDA6dC5sZW5ndGgpfHwiY2F0ZWdvcnkiIT09ZSlyZXR1cm5bXTtjb25zdHt4S2V5OnMseU5hbWU6cixmaWxsOm8sZmlsbE9wYWNpdHk6bixzdHJva2U6YSxzdHJva2VXaWR0aDpsLHN0cm9rZU9wYWNpdHk6ZCx2aXNpYmxlOmN9PXRoaXMucHJvcGVydGllcztyZXR1cm5be2xlZ2VuZFR5cGU6ImNhdGVnb3J5IixpZDp0aGlzLmlkLGl0ZW1JZDpzLHNlcmllc0lkOnRoaXMuaWQsZW5hYmxlZDpjLGxhYmVsOnt0ZXh0Om51bGwhPShpPW51bGwhPXI/cjpzKT9pOiJGcmVxdWVuY3kifSxtYXJrZXI6e2ZpbGw6bnVsbCE9bz9vOiJyZ2JhKDAsIDAsIDAsIDApIixzdHJva2U6bnVsbCE9YT9hOiJyZ2JhKDAsIDAsIDAsIDApIixmaWxsT3BhY2l0eTpuLHN0cm9rZU9wYWNpdHk6ZCxzdHJva2VXaWR0aDpsfX1dfWFuaW1hdGVFbXB0eVVwZGF0ZVJlYWR5KHtkYXR1bVNlbGVjdGlvbnM6ZSxsYWJlbFNlbGVjdGlvbnM6dH0pe2NvbnN0IGk9VXUoV3UoITAsdGhpcy5heGVzLCJub3JtYWwiKSk7X3IodGhpcy5pZCwiZGF0dW1zIix0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLGUsaSksamgodGhpcywibGFiZWxzIix0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLHQpfWFuaW1hdGVXYWl0aW5nVXBkYXRlUmVhZHkoZSl7dmFyIHQsaTtjb25zdCBzPW51bGw9PShpPW51bGw9PSh0PXRoaXMucHJvY2Vzc2VkRGF0YSk/dm9pZCAwOnQucmVkdWNlZCk/dm9pZCAwOmkuZGlmZixyPVV1KFd1KCEwLHRoaXMuYXhlcywibm9ybWFsIikpO19yKHRoaXMuaWQsImRhdHVtcyIsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcixlLmRhdHVtU2VsZWN0aW9ucyxyLChlLHQpPT5MYyh0LmRvbWFpbikscyksamgodGhpcywibGFiZWxzIix0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLGUubGFiZWxTZWxlY3Rpb25zKX1pc0xhYmVsRW5hYmxlZCgpe3JldHVybiB0aGlzLnByb3BlcnRpZXMubGFiZWwuZW5hYmxlZH19O3JwLmNsYXNzTmFtZT0iSGlzdG9ncmFtU2VyaWVzIixycC50eXBlPSJoaXN0b2dyYW0iO3ZhciBvcD17dHlwZToic2VyaWVzIixvcHRpb25zS2V5OiJzZXJpZXNbXSIscGFja2FnZVR5cGU6ImNvbW11bml0eSIsY2hhcnRUeXBlczpbImNhcnRlc2lhbiJdLGlkZW50aWZpZXI6Imhpc3RvZ3JhbSIsaW5zdGFuY2VDb25zdHJ1Y3RvcjpycCxzZXJpZXNEZWZhdWx0czp7YXhlczpbe3R5cGU6Im51bWJlciIscG9zaXRpb246ImJvdHRvbSJ9LHt0eXBlOiJudW1iZXIiLHBvc2l0aW9uOiJsZWZ0In1dfSx0aGVtZVRlbXBsYXRlOntzZXJpZXM6e19fZXh0ZW5kc19fOmRpLHN0cm9rZVdpZHRoOjEsZmlsbE9wYWNpdHk6MSxzdHJva2VPcGFjaXR5OjEsbGluZURhc2g6WzBdLGxpbmVEYXNoT2Zmc2V0OjAsbGFiZWw6e2VuYWJsZWQ6ITEsZm9udFN0eWxlOnZvaWQgMCxmb250V2VpZ2h0OnZvaWQgMCxmb250U2l6ZToxMixmb250RmFtaWx5OnVpLGNvbG9yOm1pLGZvcm1hdHRlcjp2b2lkIDB9LHNoYWRvdzp7ZW5hYmxlZDohMSxjb2xvcjp3aSx4T2Zmc2V0OjMseU9mZnNldDozLGJsdXI6NX19fSxwYWxldHRlRmFjdG9yeTooe3Rha2VDb2xvcnM6ZX0pPT57Y29uc3R7ZmlsbHM6W3RdLHN0cm9rZXM6W2ldfT1lKDEpO3JldHVybntmaWxsOnQsc3Ryb2tlOml9fX0sbnA9Y2xhc3MgZXh0ZW5kcyBjaHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5zdHJva2U9IiM4NzQzNDkiLHRoaXMuc3Ryb2tlV2lkdGg9Mix0aGlzLnN0cm9rZU9wYWNpdHk9MSx0aGlzLmxpbmVEYXNoPVswXSx0aGlzLmxpbmVEYXNoT2Zmc2V0PTAsdGhpcy5tYXJrZXI9bmV3IFhoLHRoaXMubGFiZWw9bmV3IFBuLHRoaXMudG9vbHRpcD1uZXcgWmgsdGhpcy5jb25uZWN0TWlzc2luZ0RhdGE9ITF9fTt5KFtxcihzbyldLG5wLnByb3RvdHlwZSwieEtleSIsMikseShbcXIoc28pXSxucC5wcm90b3R5cGUsInlLZXkiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxucC5wcm90b3R5cGUsInhOYW1lIiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sbnAucHJvdG90eXBlLCJ5TmFtZSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLG5wLnByb3RvdHlwZSwidGl0bGUiLDIpLHkoW3FyKHlvKV0sbnAucHJvdG90eXBlLCJzdHJva2UiLDIpLHkoW3FyKG5vKV0sbnAucHJvdG90eXBlLCJzdHJva2VXaWR0aCIsMikseShbcXIoYW8pXSxucC5wcm90b3R5cGUsInN0cm9rZU9wYWNpdHkiLDIpLHkoW3FyKE9vKV0sbnAucHJvdG90eXBlLCJsaW5lRGFzaCIsMikseShbcXIobm8pXSxucC5wcm90b3R5cGUsImxpbmVEYXNoT2Zmc2V0IiwyKSx5KFtxcihlbyldLG5wLnByb3RvdHlwZSwibWFya2VyIiwyKSx5KFtxcihlbyldLG5wLnByb3RvdHlwZSwibGFiZWwiLDIpLHkoW3FyKGVvKV0sbnAucHJvdG90eXBlLCJ0b29sdGlwIiwyKSx5KFtxcih0byldLG5wLnByb3RvdHlwZSwiY29ubmVjdE1pc3NpbmdEYXRhIiwyKTt2YXIgYXA9Y2xhc3MgZSBleHRlbmRzIGhoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKHttb2R1bGVDdHg6ZSxoYXNNYXJrZXJzOiEwLHBpY2tNb2RlczpbMiwzLDBdLG1hcmtlclNlbGVjdGlvbkdhcmJhZ2VDb2xsZWN0aW9uOiExLGFuaW1hdGlvblJlc2V0Rm5zOntwYXRoOmd1KHtnZXRPcGFjaXR5OigpPT50aGlzLmdldE9wYWNpdHkoKX0pLGxhYmVsOnpoLG1hcmtlcjooZSx0KT0+bShtKHt9LHtvcGFjaXR5OjEsc2NhbGluZ1g6MSxzY2FsaW5nWToxfSksc3UoMCx0KSl9fSksdGhpcy5wcm9wZXJ0aWVzPW5ldyBucH1wcm9jZXNzRGF0YShlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2lmKCF0aGlzLnByb3BlcnRpZXMuaXNWYWxpZCgpfHxudWxsPT10aGlzLmRhdGEpcmV0dXJuO2NvbnN0e3hLZXk6dCx5S2V5Oml9PXRoaXMucHJvcGVydGllcyxzPSF0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLmlzU2tpcHBlZCgpLHtpc0NvbnRpbnVvdXNYOnIsaXNDb250aW51b3VzWTpvfT10aGlzLmlzQ29udGludW91cygpLG49W107cnx8KG4ucHVzaChHYyh0aGlzLHQscix7aWQ6InhLZXkifSkpLHMmJnRoaXMucHJvY2Vzc2VkRGF0YSYmbi5wdXNoKE1jKHRoaXMucHJvY2Vzc2VkRGF0YSkpKSxzJiZuLnB1c2goRGModGhpcyxyP1sieFZhbHVlIl06W10pKSxuLnB1c2goa2ModGhpcyx0LHIse2lkOiJ4VmFsdWUifSksa2ModGhpcyxpLG8se2lkOiJ5VmFsdWUiLGludmFsaWRWYWx1ZTp2b2lkIDB9KSkseWllbGQgdGhpcy5yZXF1ZXN0RGF0YU1vZGVsKGUsdGhpcy5kYXRhLHtwcm9wczpufSksdGhpcy5hbmltYXRpb25TdGF0ZS50cmFuc2l0aW9uKCJ1cGRhdGVEYXRhIil9KSl9Z2V0U2VyaWVzRG9tYWluKGUpe2NvbnN0e2F4ZXM6dCxkYXRhTW9kZWw6aSxwcm9jZXNzZWREYXRhOnN9PXRoaXM7aWYoIXN8fCFpKXJldHVybltdO2NvbnN0IHI9dC54LG89dC55LG49aS5yZXNvbHZlUHJvY2Vzc2VkRGF0YURlZkJ5SWQodGhpcywieFZhbHVlIik7aWYoIngiPT09ZSl7Y29uc3QgZT1pLmdldERvbWFpbih0aGlzLCJ4VmFsdWUiLCJ2YWx1ZSIscyk7cmV0dXJuInZhbHVlIj09PShudWxsPT1uP3ZvaWQgMDpuLmRlZi50eXBlKSYmImNhdGVnb3J5Ij09PW4uZGVmLnZhbHVlVHlwZT9lOmtsKEVzKGUpLHIpfXJldHVybiBrbChpLmdldERvbWFpbih0aGlzLCJ5VmFsdWUiLCJ2YWx1ZSIscyksbyl9Y3JlYXRlTm9kZURhdGEoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciB0LGkscztjb25zdHtwcm9jZXNzZWREYXRhOnIsZGF0YU1vZGVsOm8sYXhlczpufT10aGlzLGE9bi54LGw9bi55O2lmKCEociYmbyYmYSYmbCkpcmV0dXJuW107Y29uc3R7eEtleTpkLHlLZXk6Yyx4TmFtZTpoLHlOYW1lOnUsbWFya2VyOnAsbGFiZWw6Zyxjb25uZWN0TWlzc2luZ0RhdGE6bX09dGhpcy5wcm9wZXJ0aWVzLGY9YS5zY2FsZSx2PWwuc2NhbGUsQz0obnVsbCE9KHQ9Zi5iYW5kd2lkdGgpP3Q6MCkvMix5PShudWxsIT0oaT12LmJhbmR3aWR0aCk/aTowKS8yLHc9W10sYj1wLmVuYWJsZWQ/cC5zaXplOjAsRT1vLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsInhWYWx1ZSIpLmluZGV4LFI9by5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGV4QnlJZCh0aGlzLCJ5VmFsdWUiKS5pbmRleDtsZXQgeCxUPSEwO2ZvcihsZXQgZT0wO2U8ci5kYXRhLmxlbmd0aDtlKyspe2NvbnN0e2RhdHVtOnQsdmFsdWVzOml9PW51bGwhPXg/eDpyLmRhdGFbZV0sbz1pW0VdLG49aVtSXTtpZih2b2lkIDA9PT1uKVQ9IW07ZWxzZXtjb25zdCBpPWYuY29udmVydChvKStDO2lmKGlzTmFOKGkpKXtUPSFtLHg9dm9pZCAwO2NvbnRpbnVlfXg9dm9pZCAwPT09KG51bGw9PShzPXIuZGF0YVtlKzFdKT92b2lkIDA6cy52YWx1ZXNbUl0pP3ZvaWQgMDpyLmRhdGFbZSsxXTtjb25zdCBhPXYuY29udmVydChuKSt5LGw9dGhpcy5nZXRMYWJlbFRleHQoZyx7dmFsdWU6bixkYXR1bTp0LHhLZXk6ZCx5S2V5OmMseE5hbWU6aCx5TmFtZTp1fSxlPT5qZShlKT9lLnRvRml4ZWQoMik6U3RyaW5nKGUpKTt3LnB1c2goe3Nlcmllczp0aGlzLGRhdHVtOnQseUtleTpjLHhLZXk6ZCxwb2ludDp7eDppLHk6YSxtb3ZlVG86VCxzaXplOmJ9LG1pZFBvaW50Ont4OmkseTphfSx5VmFsdWU6bix4VmFsdWU6byxjYXBEZWZhdWx0czp7bGVuZ3RoUmF0aW9NdWx0aXBsaWVyOnRoaXMucHJvcGVydGllcy5tYXJrZXIuZ2V0RGlhbWV0ZXIoKSxsZW5ndGhNYXg6MS8wfSxsYWJlbDpsP3t0ZXh0OmwsZm9udFN0eWxlOmcuZm9udFN0eWxlLGZvbnRXZWlnaHQ6Zy5mb250V2VpZ2h0LGZvbnRTaXplOmcuZm9udFNpemUsZm9udEZhbWlseTpnLmZvbnRGYW1pbHksdGV4dEFsaWduOiJjZW50ZXIiLHRleHRCYXNlbGluZToiYm90dG9tIixmaWxsOmcuY29sb3J9OnZvaWQgMH0pLFQ9ITF9fXJldHVyblt7aXRlbUlkOmMsbm9kZURhdGE6dyxsYWJlbERhdGE6dyxzY2FsZXM6UyhlLnByb3RvdHlwZSx0aGlzLCJjYWxjdWxhdGVTY2FsaW5nIikuY2FsbCh0aGlzKSx2aXNpYmxlOnRoaXMudmlzaWJsZX1dfSkpfWlzUGF0aE9yU2VsZWN0aW9uRGlydHkoKXtyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLm1hcmtlci5pc0RpcnR5KCl9bWFya2VyRmFjdG9yeSgpe2NvbnN0e3NoYXBlOmV9PXRoaXMucHJvcGVydGllcy5tYXJrZXI7cmV0dXJuIG5ldyhVZChlKSl9dXBkYXRlUGF0aE5vZGVzKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7cGF0aHM6W3RdLG9wYWNpdHk6aSx2aXNpYmxlOnMsYW5pbWF0aW9uRW5hYmxlZDpyfT1lO3Quc2V0UHJvcGVydGllcyh7ZmlsbDp2b2lkIDAsbGluZUpvaW46InJvdW5kIixwb2ludGVyRXZlbnRzOjEsb3BhY2l0eTppLHN0cm9rZTp0aGlzLnByb3BlcnRpZXMuc3Ryb2tlLHN0cm9rZVdpZHRoOnRoaXMuZ2V0U3Ryb2tlV2lkdGgodGhpcy5wcm9wZXJ0aWVzLnN0cm9rZVdpZHRoKSxzdHJva2VPcGFjaXR5OnRoaXMucHJvcGVydGllcy5zdHJva2VPcGFjaXR5LGxpbmVEYXNoOnRoaXMucHJvcGVydGllcy5saW5lRGFzaCxsaW5lRGFzaE9mZnNldDp0aGlzLnByb3BlcnRpZXMubGluZURhc2hPZmZzZXR9KSxyfHwodC52aXNpYmxlPXMpLG11KHRoaXMsdCl9KSl9dXBkYXRlTWFya2VyU2VsZWN0aW9uKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7bGV0e25vZGVEYXRhOnR9PWU7Y29uc3R7bWFya2VyU2VsZWN0aW9uOml9PWUse3NoYXBlOnMsZW5hYmxlZDpyfT10aGlzLnByb3BlcnRpZXMubWFya2VyO3JldHVybiB0PXMmJnI/dDpbXSx0aGlzLnByb3BlcnRpZXMubWFya2VyLmlzRGlydHkoKSYmKGkuY2xlYXIoKSxpLmNsZWFudXAoKSksaS51cGRhdGUodCx2b2lkIDAsZT0+TGMoZS54VmFsdWUpKX0pKX11cGRhdGVNYXJrZXJOb2RlcyhlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e21hcmtlclNlbGVjdGlvbjp0LGlzSGlnaGxpZ2h0Oml9PWUse3hLZXk6cyx5S2V5OnIsc3Ryb2tlOm8sc3Ryb2tlV2lkdGg6bixzdHJva2VPcGFjaXR5OmEsbWFya2VyOmwsaGlnaGxpZ2h0U3R5bGU6ZH09dGhpcy5wcm9wZXJ0aWVzLGM9WGUoaSYmZC5pdGVtLGwuZ2V0U3R5bGUoKSx7c3Ryb2tlOm8sc3Ryb2tlV2lkdGg6bixzdHJva2VPcGFjaXR5OmF9KSxoPXRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIuaXNTa2lwcGVkKCk7dC5lYWNoKChlLHQpPT57dGhpcy51cGRhdGVNYXJrZXJTdHlsZShlLGwse2RhdHVtOnQsaGlnaGxpZ2h0ZWQ6aSx4S2V5OnMseUtleTpyfSxjLHthcHBseVRyYW5zbGF0aW9uOmh9KX0pLGl8fGwubWFya0NsZWFuKCl9KSl9dXBkYXRlTGFiZWxTZWxlY3Rpb24oZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtyZXR1cm4gZS5sYWJlbFNlbGVjdGlvbi51cGRhdGUodGhpcy5pc0xhYmVsRW5hYmxlZCgpP2UubGFiZWxEYXRhOltdKX0pKX11cGRhdGVMYWJlbE5vZGVzKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7ZW5hYmxlZDp0LGZvbnRTdHlsZTppLGZvbnRXZWlnaHQ6cyxmb250U2l6ZTpyLGZvbnRGYW1pbHk6byxjb2xvcjpufT10aGlzLnByb3BlcnRpZXMubGFiZWw7ZS5sYWJlbFNlbGVjdGlvbi5lYWNoKChlLGEpPT57Y29uc3R7cG9pbnQ6bCxsYWJlbDpkfT1hO2EmJmQmJnQ/KGUuZm9udFN0eWxlPWksZS5mb250V2VpZ2h0PXMsZS5mb250U2l6ZT1yLGUuZm9udEZhbWlseT1vLGUudGV4dEFsaWduPWQudGV4dEFsaWduLGUudGV4dEJhc2VsaW5lPWQudGV4dEJhc2VsaW5lLGUudGV4dD1kLnRleHQsZS54PWwueCxlLnk9bC55LTEwLGUuZmlsbD1uLGUudmlzaWJsZT0hMCk6ZS52aXNpYmxlPSExfSl9KSl9Z2V0VG9vbHRpcEh0bWwoZSl7dmFyIHQ7Y29uc3QgaT10aGlzLmF4ZXMueCxzPXRoaXMuYXhlcy55O2lmKCF0aGlzLnByb3BlcnRpZXMuaXNWYWxpZCgpfHwhaXx8IXMpcmV0dXJuIiI7Y29uc3R7eEtleTpyLHlLZXk6byx4TmFtZTpuLHlOYW1lOmEsc3Ryb2tlV2lkdGg6bCxtYXJrZXI6ZCx0b29sdGlwOmN9PXRoaXMucHJvcGVydGllcyx7ZGF0dW06aCx4VmFsdWU6dSx5VmFsdWU6cH09ZSxnPWkuZm9ybWF0RGF0dW0odSksZj1zLmZvcm1hdERhdHVtKHApLHY9V2gobnVsbCE9KHQ9dGhpcy5wcm9wZXJ0aWVzLnRpdGxlKT90OmEpLEM9V2goZysiOiAiK2YpLHk9WGUoe2ZpbGw6ZC5zdHJva2V9LGQuZ2V0U3R5bGUoKSx7c3Ryb2tlV2lkdGg6bH0pLHtmaWxsOlN9PXRoaXMuZ2V0TWFya2VyU3R5bGUoZCx7ZGF0dW06ZSx4S2V5OnIseUtleTpvLGhpZ2hsaWdodGVkOiExfSx5KTtyZXR1cm4gYy50b1Rvb2x0aXBIdG1sKHt0aXRsZTp2LGNvbnRlbnQ6QyxiYWNrZ3JvdW5kQ29sb3I6U30sbSh7ZGF0dW06aCx4S2V5OnIseE5hbWU6bix5S2V5Om8seU5hbWU6YSx0aXRsZTp2LGNvbG9yOlMsc2VyaWVzSWQ6dGhpcy5pZH0sdGhpcy5nZXRNb2R1bGVUb29sdGlwUGFyYW1zKCkpKX1nZXRMZWdlbmREYXRhKGUpe3ZhciB0LGkscyxyLG8sbixhLGwsZDtpZighKG51bGw9PSh0PXRoaXMuZGF0YSk/dm9pZCAwOnQubGVuZ3RoKXx8IXRoaXMucHJvcGVydGllcy5pc1ZhbGlkKCl8fCJjYXRlZ29yeSIhPT1lKXJldHVybltdO2NvbnN0e3lLZXk6Yyx5TmFtZTpoLHN0cm9rZTp1LHN0cm9rZU9wYWNpdHk6cCxzdHJva2VXaWR0aDpnLGxpbmVEYXNoOm0sdGl0bGU6ZixtYXJrZXI6dix2aXNpYmxlOkN9PXRoaXMucHJvcGVydGllcyx5PSJyZ2JhKDAsIDAsIDAsIDApIjtyZXR1cm5be2xlZ2VuZFR5cGU6ImNhdGVnb3J5IixpZDp0aGlzLmlkLGl0ZW1JZDpjLHNlcmllc0lkOnRoaXMuaWQsZW5hYmxlZDpDLGxhYmVsOnt0ZXh0Om51bGwhPShpPW51bGwhPWY/ZjpoKT9pOmN9LG1hcmtlcjp7c2hhcGU6di5zaGFwZSxmaWxsOm51bGwhPShzPXYuZmlsbCk/czp5LHN0cm9rZTpudWxsIT0obz1udWxsIT0ocj12LnN0cm9rZSk/cjp1KT9vOnksZmlsbE9wYWNpdHk6bnVsbCE9KG49di5maWxsT3BhY2l0eSk/bjoxLHN0cm9rZU9wYWNpdHk6bnVsbCE9KGw9bnVsbCE9KGE9di5zdHJva2VPcGFjaXR5KT9hOnApP2w6MSxzdHJva2VXaWR0aDpudWxsIT0oZD12LnN0cm9rZVdpZHRoKT9kOjAsZW5hYmxlZDp2LmVuYWJsZWR9LGxpbmU6e3N0cm9rZTpudWxsIT11P3U6eSxzdHJva2VPcGFjaXR5OnAsc3Ryb2tlV2lkdGg6ZyxsaW5lRGFzaDptfX1dfXVwZGF0ZVBhdGhzKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7dGhpcy51cGRhdGVMaW5lUGF0aHMoW2UucGF0aHNdLFtlLmNvbnRleHREYXRhXSl9KSl9dXBkYXRlTGluZVBhdGhzKGUsdCl7dC5mb3JFYWNoKCh7bm9kZURhdGE6dH0saSk9Pntjb25zdFtzXT1lW2ldLHtwYXRoOnJ9PXM7ci5jbGVhcih7dHJhY2tDaGFuZ2VzOiEwfSk7Zm9yKGNvbnN0IGUgb2YgdCllLnBvaW50Lm1vdmVUbz9yLm1vdmVUbyhlLnBvaW50LngsZS5wb2ludC55KTpyLmxpbmVUbyhlLnBvaW50LngsZS5wb2ludC55KTtzLmNoZWNrUGF0aERpcnR5KCl9KX1hbmltYXRlRW1wdHlVcGRhdGVSZWFkeShlKXtjb25zdHttYXJrZXJTZWxlY3Rpb25zOnQsbGFiZWxTZWxlY3Rpb25zOmksYW5ub3RhdGlvblNlbGVjdGlvbnM6cyxjb250ZXh0RGF0YTpyLHBhdGhzOm99PWUse2FuaW1hdGlvbk1hbmFnZXI6bn09dGhpcy5jdHg7dGhpcy51cGRhdGVMaW5lUGF0aHMobyxyKSxodSh0aGlzLG4sby5mbGF0KCkpLG9hKHQsc3UpLHR1KHRoaXMsbix0KSxqaCh0aGlzLCJsYWJlbHMiLG4saSksamgodGhpcywiYW5ub3RhdGlvbnMiLG4scyl9YW5pbWF0ZVJlYWR5UmVzaXplKGUpe2NvbnN0e2NvbnRleHREYXRhOnQscGF0aHM6aX09ZTt0aGlzLnVwZGF0ZUxpbmVQYXRocyhpLHQpLHN1cGVyLmFuaW1hdGVSZWFkeVJlc2l6ZShlKX1hbmltYXRlV2FpdGluZ1VwZGF0ZVJlYWR5KGUpe3ZhciB0LGk7Y29uc3R7YW5pbWF0aW9uTWFuYWdlcjpzfT10aGlzLmN0eCx7bWFya2VyU2VsZWN0aW9uczpyLGxhYmVsU2VsZWN0aW9uczpvLGFubm90YXRpb25TZWxlY3Rpb25zOm4sY29udGV4dERhdGE6YSxwYXRoczpsLHByZXZpb3VzQ29udGV4dERhdGE6ZH09ZSxbY109bDtzdXBlci5yZXNldEFsbEFuaW1hdGlvbihlKTtjb25zdCBoPSgpPT57dGhpcy51cGRhdGVMaW5lUGF0aHMobCxhKX07aWYoMD09PWEubGVuZ3RofHwwPT09KG51bGw9PWQ/dm9pZCAwOmQubGVuZ3RoKSlyZXR1cm4gaCgpLEpoKHRoaXMscyxyLCJhZGRlZCIpLHV1KHRoaXMsInBhdGhfcHJvcGVydGllcyIscyxudWxsIT1jP2M6W10pLGpoKHRoaXMsImxhYmVscyIscyxvKSx2b2lkIGpoKHRoaXMsImFubm90YXRpb25zIixzLG4pO2NvbnN0W3VdPWEsW3BdPW51bGwhPWQ/ZDpbXSxnPUR1KHUscCxudWxsPT0oaT1udWxsPT0odD10aGlzLnByb2Nlc3NlZERhdGEpP3ZvaWQgMDp0LnJlZHVjZWQpP3ZvaWQgMDppLmRpZmYpO2lmKHZvaWQgMD09PWcpcmV0dXJuIHMuc2tpcEN1cnJlbnRCYXRjaCgpLHZvaWQgaCgpO0poKHRoaXMscyxyKSxfcih0aGlzLmlkLCJwYXRoX3Byb3BlcnRpZXMiLHMsYyxnLnBhdGhQcm9wZXJ0aWVzKSxCaCh0aGlzLmlkLCJwYXRoX3VwZGF0ZSIscyxjLGcucGF0aCksZy5oYXNNb3Rpb24mJihqaCh0aGlzLCJsYWJlbHMiLHMsbyksamgodGhpcywiYW5ub3RhdGlvbnMiLHMsbikpfWlzTGFiZWxFbmFibGVkKCl7cmV0dXJuIHRoaXMucHJvcGVydGllcy5sYWJlbC5lbmFibGVkfWdldEJhbmRTY2FsZVBhZGRpbmcoKXtyZXR1cm57aW5uZXI6MSxvdXRlcjouMX19bm9kZUZhY3RvcnkoKXtyZXR1cm4gbmV3IE9ufX07YXAuY2xhc3NOYW1lPSJMaW5lU2VyaWVzIixhcC50eXBlPSJsaW5lIjt2YXIgbHA9e3R5cGU6InNlcmllcyIsb3B0aW9uc0tleToic2VyaWVzW10iLHBhY2thZ2VUeXBlOiJjb21tdW5pdHkiLGNoYXJ0VHlwZXM6WyJjYXJ0ZXNpYW4iXSxpZGVudGlmaWVyOiJsaW5lIixpbnN0YW5jZUNvbnN0cnVjdG9yOmFwLHNlcmllc0RlZmF1bHRzOntheGVzOlt7dHlwZToibnVtYmVyIixwb3NpdGlvbjoibGVmdCJ9LHt0eXBlOiJjYXRlZ29yeSIscG9zaXRpb246ImJvdHRvbSJ9XX0sdGhlbWVUZW1wbGF0ZTp7c2VyaWVzOntfX2V4dGVuZHNfXzpkaSx0b29sdGlwOntwb3NpdGlvbjp7dHlwZToibm9kZSJ9fSxzdHJva2VXaWR0aDoyLHN0cm9rZU9wYWNpdHk6MSxsaW5lRGFzaDpbMF0sbGluZURhc2hPZmZzZXQ6MCxtYXJrZXI6e19fZXh0ZW5kc19fOmNpLGZpbGxPcGFjaXR5OjEsc3Ryb2tlT3BhY2l0eToxLHN0cm9rZVdpZHRoOjB9LGxhYmVsOntlbmFibGVkOiExLGZvbnRTdHlsZTp2b2lkIDAsZm9udFdlaWdodDp2b2lkIDAsZm9udFNpemU6MTIsZm9udEZhbWlseTp1aSxjb2xvcjpwaSxmb3JtYXR0ZXI6dm9pZCAwfX19LGVudGVycHJpc2VUaGVtZVRlbXBsYXRlOntzZXJpZXM6e2Vycm9yQmFyOntjYXA6e2xlbmd0aFJhdGlvOjF9fX19LHBhbGV0dGVGYWN0b3J5OmU9Pntjb25zdHttYXJrZXI6dH09VmgoZSk7cmV0dXJue3N0cm9rZTp0LmZpbGwsbWFya2VyOnR9fX0sZHA9Y2xhc3MgZXh0ZW5kcyBjaHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2xvclJhbmdlPVsiI2ZmZmYwMCIsIiMwMGZmMDAiLCIjMDAwMGZmIl0sdGhpcy5tYXJrZXI9bmV3IFhoLHRoaXMubGFiZWw9bmV3IFBuLHRoaXMudG9vbHRpcD1uZXcgWmh9fTt5KFtxcihzbyldLGRwLnByb3RvdHlwZSwieEtleSIsMikseShbcXIoc28pXSxkcC5wcm90b3R5cGUsInlLZXkiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxkcC5wcm90b3R5cGUsImxhYmVsS2V5IiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sZHAucHJvdG90eXBlLCJjb2xvcktleSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLGRwLnByb3RvdHlwZSwieE5hbWUiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxkcC5wcm90b3R5cGUsInlOYW1lIiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sZHAucHJvdG90eXBlLCJsYWJlbE5hbWUiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxkcC5wcm90b3R5cGUsImNvbG9yTmFtZSIsMikseShbcXIoYm8se29wdGlvbmFsOiEwfSldLGRwLnByb3RvdHlwZSwiY29sb3JEb21haW4iLDIpLHkoW3FyKFNvKV0sZHAucHJvdG90eXBlLCJjb2xvclJhbmdlIiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sZHAucHJvdG90eXBlLCJ0aXRsZSIsMikseShbcXIoZW8pXSxkcC5wcm90b3R5cGUsIm1hcmtlciIsMikseShbcXIoZW8pXSxkcC5wcm90b3R5cGUsImxhYmVsIiwyKSx5KFtxcihlbyldLGRwLnByb3RvdHlwZSwidG9vbHRpcCIsMik7dmFyIGNwPWNsYXNzIGUgZXh0ZW5kcyBoaHtjb25zdHJ1Y3RvcihlKXtzdXBlcih7bW9kdWxlQ3R4OmUscGlja01vZGVzOlsyLDMsMF0scGF0aHNQZXJTZXJpZXM6MCxoYXNNYXJrZXJzOiEwLG1hcmtlclNlbGVjdGlvbkdhcmJhZ2VDb2xsZWN0aW9uOiExLGFuaW1hdGlvblJlc2V0Rm5zOnttYXJrZXI6aXUsbGFiZWw6emh9fSksdGhpcy5wcm9wZXJ0aWVzPW5ldyBkcCx0aGlzLmNvbG9yU2NhbGU9bmV3IFp1fXByb2Nlc3NEYXRhKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7dmFyIHQ7aWYoIXRoaXMucHJvcGVydGllcy5pc1ZhbGlkKCl8fG51bGw9PXRoaXMuZGF0YSlyZXR1cm47Y29uc3R7aXNDb250aW51b3VzWDppLGlzQ29udGludW91c1k6c309dGhpcy5pc0NvbnRpbnVvdXMoKSx7eEtleTpyLHlLZXk6byxsYWJlbEtleTpuLGNvbG9yS2V5OmEsY29sb3JEb21haW46bCxjb2xvclJhbmdlOmR9PXRoaXMucHJvcGVydGllcyx7ZGF0YU1vZGVsOmMscHJvY2Vzc2VkRGF0YTpofT15aWVsZCB0aGlzLnJlcXVlc3REYXRhTW9kZWwoZSx0aGlzLmRhdGEse3Byb3BzOltHYyh0aGlzLHIsaSx7aWQ6InhLZXktcmF3In0pLEdjKHRoaXMsbyxzLHtpZDoieUtleS1yYXcifSksLi4ubj9bR2ModGhpcyxuLCExLHtpZDoibGFiZWxLZXktcmF3In0pXTpbXSxrYyh0aGlzLHIsaSx7aWQ6InhWYWx1ZSJ9KSxrYyh0aGlzLG8scyx7aWQ6InlWYWx1ZSJ9KSwuLi5hP1trYyh0aGlzLGEsITAse2lkOiJjb2xvclZhbHVlIn0pXTpbXSwuLi5uP1trYyh0aGlzLG4sITEse2lkOiJsYWJlbFZhbHVlIn0pXTpbXV0sZGF0YVZpc2libGU6dGhpcy52aXNpYmxlfSk7aWYoYSl7Y29uc3QgZT1jLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsImNvbG9yVmFsdWUiKS5pbmRleDt0aGlzLmNvbG9yU2NhbGUuZG9tYWluPW51bGwhPSh0PW51bGwhPWw/bDpoLmRvbWFpbi52YWx1ZXNbZV0pP3Q6W10sdGhpcy5jb2xvclNjYWxlLnJhbmdlPWQsdGhpcy5jb2xvclNjYWxlLnVwZGF0ZSgpfXRoaXMuYW5pbWF0aW9uU3RhdGUudHJhbnNpdGlvbigidXBkYXRlRGF0YSIpfSkpfWdldFNlcmllc0RvbWFpbihlKXtjb25zdHtkYXRhTW9kZWw6dCxwcm9jZXNzZWREYXRhOml9PXRoaXM7aWYoIWl8fCF0KXJldHVybltdO2NvbnN0IHM9IngiPT09ZT8ieFZhbHVlIjoieVZhbHVlIixyPXQucmVzb2x2ZVByb2Nlc3NlZERhdGFEZWZCeUlkKHRoaXMscyksbz10LmdldERvbWFpbih0aGlzLHMsInZhbHVlIixpKTtpZigidmFsdWUiPT09KG51bGw9PXI/dm9pZCAwOnIuZGVmLnR5cGUpJiYiY2F0ZWdvcnkiPT09KG51bGw9PXI/dm9pZCAwOnIuZGVmLnZhbHVlVHlwZSkpcmV0dXJuIG87Y29uc3Qgbj10aGlzLmF4ZXNbZV07cmV0dXJuIGtsKEVzKG8pLG4pfWNyZWF0ZU5vZGVEYXRhKCl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXt2YXIgdCxpLHM7Y29uc3R7YXhlczpyLGRhdGFNb2RlbDpvLHByb2Nlc3NlZERhdGE6bixjb2xvclNjYWxlOmF9PXRoaXMse3hLZXk6bCx5S2V5OmQsbGFiZWxLZXk6Yyxjb2xvcktleTpoLHhOYW1lOnUseU5hbWU6cCxsYWJlbE5hbWU6ZyxtYXJrZXI6ZixsYWJlbDp2LHZpc2libGU6Q309dGhpcy5wcm9wZXJ0aWVzLHk9ci54LHc9ci55O2lmKCEobyYmbiYmQyYmeSYmdykpcmV0dXJuW107Y29uc3QgYj1vLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsInhWYWx1ZSIpLmluZGV4LEU9by5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGV4QnlJZCh0aGlzLCJ5VmFsdWUiKS5pbmRleCxSPWg/by5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGV4QnlJZCh0aGlzLCJjb2xvclZhbHVlIikuaW5kZXg6LTEseD1jP28ucmVzb2x2ZVByb2Nlc3NlZERhdGFJbmRleEJ5SWQodGhpcywibGFiZWxWYWx1ZSIpLmluZGV4Oi0xLFQ9eS5zY2FsZSxEPXcuc2NhbGUsTz0obnVsbCE9KHQ9VC5iYW5kd2lkdGgpP3Q6MCkvMixBPShudWxsIT0oaT1ELmJhbmR3aWR0aCk/aTowKS8yLFA9W10sTT12LmdldEZvbnQoKTtmb3IoY29uc3R7dmFsdWVzOmUsZGF0dW06dH1vZiBudWxsIT0ocz1uLmRhdGEpP3M6W10pe2NvbnN0IGk9ZVtiXSxzPWVbRV0scj1ULmNvbnZlcnQoaSkrTyxvPUQuY29udmVydChzKStBLG49dGhpcy5nZXRMYWJlbFRleHQodix7dmFsdWU6Yz9lW3hdOnMsZGF0dW06dCx4S2V5OmwseUtleTpkLGxhYmVsS2V5OmMseE5hbWU6dSx5TmFtZTpwLGxhYmVsTmFtZTpnfSksQz0kby5nZXRUZXh0U2l6ZShuLE0pLHk9aD9hLmNvbnZlcnQoZVtSXSk6dm9pZCAwO1AucHVzaCh7c2VyaWVzOnRoaXMsaXRlbUlkOmQseUtleTpkLHhLZXk6bCxkYXR1bTp0LHhWYWx1ZTppLHlWYWx1ZTpzLGNhcERlZmF1bHRzOntsZW5ndGhSYXRpb011bHRpcGxpZXI6Zi5nZXREaWFtZXRlcigpLGxlbmd0aE1heDoxLzB9LHBvaW50Ont4OnIseTpvLHNpemU6Zi5zaXplfSxtaWRQb2ludDp7eDpyLHk6b30sZmlsbDp5LGxhYmVsOm0oe3RleHQ6bn0sQyl9KX1yZXR1cm5be2l0ZW1JZDpkLG5vZGVEYXRhOlAsbGFiZWxEYXRhOlAsc2NhbGVzOlMoZS5wcm90b3R5cGUsdGhpcywiY2FsY3VsYXRlU2NhbGluZyIpLmNhbGwodGhpcyksdmlzaWJsZTp0aGlzLnZpc2libGV9XX0pKX1pc1BhdGhPclNlbGVjdGlvbkRpcnR5KCl7cmV0dXJuIHRoaXMucHJvcGVydGllcy5tYXJrZXIuaXNEaXJ0eSgpfWdldExhYmVsRGF0YSgpe3ZhciBlO3JldHVybiBudWxsPT0oZT10aGlzLmNvbnRleHROb2RlRGF0YSk/dm9pZCAwOmUucmVkdWNlKChlLHQpPT5lLmNvbmNhdCh0LmxhYmVsRGF0YSksW10pfW1hcmtlckZhY3RvcnkoKXtjb25zdHtzaGFwZTplfT10aGlzLnByb3BlcnRpZXMubWFya2VyO3JldHVybiBuZXcoVWQoZSkpfXVwZGF0ZU1hcmtlclNlbGVjdGlvbihlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e25vZGVEYXRhOnQsbWFya2VyU2VsZWN0aW9uOml9PWU7cmV0dXJuIHRoaXMucHJvcGVydGllcy5tYXJrZXIuaXNEaXJ0eSgpJiYoaS5jbGVhcigpLGkuY2xlYW51cCgpKSxpLnVwZGF0ZSh0aGlzLnByb3BlcnRpZXMubWFya2VyLmVuYWJsZWQ/dDpbXSl9KSl9dXBkYXRlTWFya2VyTm9kZXMoZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHttYXJrZXJTZWxlY3Rpb246dCxpc0hpZ2hsaWdodDppfT1lLHt4S2V5OnMseUtleTpyLGxhYmVsS2V5Om8sbWFya2VyOm4saGlnaGxpZ2h0U3R5bGU6YX09dGhpcy5wcm9wZXJ0aWVzLGw9WGUoaSYmYS5pdGVtLG4uZ2V0U3R5bGUoKSk7dC5lYWNoKChlLHQpPT57dGhpcy51cGRhdGVNYXJrZXJTdHlsZShlLG4se2RhdHVtOnQsaGlnaGxpZ2h0ZWQ6aSx4S2V5OnMseUtleTpyLGxhYmVsS2V5Om99LGwpfSksaXx8bi5tYXJrQ2xlYW4oKX0pKX11cGRhdGVMYWJlbFNlbGVjdGlvbihlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciB0LGk7Y29uc3Qgcz10aGlzLmlzTGFiZWxFbmFibGVkKCkmJm51bGwhPShpPW51bGw9PSh0PXRoaXMuY2hhcnQpP3ZvaWQgMDp0LnBsYWNlTGFiZWxzKCkuZ2V0KHRoaXMpKT9pOltdO3JldHVybiBlLmxhYmVsU2VsZWN0aW9uLnVwZGF0ZShzLm1hcCgoe2RhdHVtOmUseDp0LHk6aX0pPT5mKG0oe30sZSkse3BvaW50Ont4OnQseTppLHNpemU6ZS5wb2ludC5zaXplfX0pKSxlPT57ZS5wb2ludGVyRXZlbnRzPTF9KX0pKX11cGRhdGVMYWJlbE5vZGVzKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7bGFiZWw6dH09dGhpcy5wcm9wZXJ0aWVzO2UubGFiZWxTZWxlY3Rpb24uZWFjaCgoZSxpKT0+e3ZhciBzLHIsbyxuO2UudGV4dD1pLmxhYmVsLnRleHQsZS5maWxsPXQuY29sb3IsZS54PW51bGwhPShyPW51bGw9PShzPWkucG9pbnQpP3ZvaWQgMDpzLngpP3I6MCxlLnk9bnVsbCE9KG49bnVsbD09KG89aS5wb2ludCk/dm9pZCAwOm8ueSk/bjowLGUuZm9udFN0eWxlPXQuZm9udFN0eWxlLGUuZm9udFdlaWdodD10LmZvbnRXZWlnaHQsZS5mb250U2l6ZT10LmZvbnRTaXplLGUuZm9udEZhbWlseT10LmZvbnRGYW1pbHksZS50ZXh0QWxpZ249ImxlZnQiLGUudGV4dEJhc2VsaW5lPSJ0b3AifSl9KSl9Z2V0VG9vbHRpcEh0bWwoZSl7Y29uc3QgdD10aGlzLmF4ZXMueCxpPXRoaXMuYXhlcy55O2lmKCF0aGlzLnByb3BlcnRpZXMuaXNWYWxpZCgpfHwhdHx8IWkpcmV0dXJuIiI7Y29uc3R7eEtleTpzLHlLZXk6cixsYWJlbEtleTpvLHhOYW1lOm4seU5hbWU6YSxsYWJlbE5hbWU6bCx0aXRsZTpkPWEsbWFya2VyOmMsdG9vbHRpcDpofT10aGlzLnByb3BlcnRpZXMse2RhdHVtOnUseFZhbHVlOnAseVZhbHVlOmcsbGFiZWw6Zn09ZSx2PVhlKHtmaWxsOmUuZmlsbCxzdHJva2VXaWR0aDp0aGlzLmdldFN0cm9rZVdpZHRoKGMuc3Ryb2tlV2lkdGgpfSxjLmdldFN0eWxlKCkpLHtmaWxsOkM9ImdyYXkifT10aGlzLmdldE1hcmtlclN0eWxlKGMse2RhdHVtOmUsaGlnaGxpZ2h0ZWQ6ITEseEtleTpzLHlLZXk6cixsYWJlbEtleTpvfSx2KSx5PVdoKHQuZm9ybWF0RGF0dW0ocCkpLFM9V2goaS5mb3JtYXREYXR1bShnKSk7bGV0IHc9YDxiPiR7V2gobnVsbCE9bj9uOnMpfTwvYj46ICR7eX08YnI+PGI+JHtXaChudWxsIT1hP2E6cil9PC9iPjogJHtTfWA7cmV0dXJuIG8mJih3PWA8Yj4ke1doKG51bGwhPWw/bDpvKX08L2I+OiAke1doKGYudGV4dCl9PGJyPmArdyksaC50b1Rvb2x0aXBIdG1sKHt0aXRsZTpkLGNvbnRlbnQ6dyxiYWNrZ3JvdW5kQ29sb3I6Q30sbSh7ZGF0dW06dSx4S2V5OnMseE5hbWU6bix5S2V5OnIseU5hbWU6YSxsYWJlbEtleTpvLGxhYmVsTmFtZTpsLHRpdGxlOmQsY29sb3I6QyxzZXJpZXNJZDp0aGlzLmlkfSx0aGlzLmdldE1vZHVsZVRvb2x0aXBQYXJhbXMoKSkpfWdldExlZ2VuZERhdGEoZSl7dmFyIHQsaSxzLHIsbyxuO2NvbnN0e3lLZXk6YSx5TmFtZTpsLHRpdGxlOmQsbWFya2VyOmMsdmlzaWJsZTpofT10aGlzLnByb3BlcnRpZXMse2ZpbGw6dSxzdHJva2U6cCxmaWxsT3BhY2l0eTpnLHN0cm9rZU9wYWNpdHk6bSxzdHJva2VXaWR0aDpmfT1jO3JldHVybihudWxsPT0odD10aGlzLmRhdGEpP3ZvaWQgMDp0Lmxlbmd0aCkmJnRoaXMucHJvcGVydGllcy5pc1ZhbGlkKCkmJiJjYXRlZ29yeSI9PT1lP1t7bGVnZW5kVHlwZToiY2F0ZWdvcnkiLGlkOnRoaXMuaWQsaXRlbUlkOmEsc2VyaWVzSWQ6dGhpcy5pZCxlbmFibGVkOmgsbGFiZWw6e3RleHQ6bnVsbCE9KGk9bnVsbCE9ZD9kOmwpP2k6YX0sbWFya2VyOntzaGFwZTpjLnNoYXBlLGZpbGw6bnVsbCE9KHI9bnVsbCE9KHM9Yy5maWxsKT9zOnUpP3I6InJnYmEoMCwgMCwgMCwgMCkiLHN0cm9rZTpudWxsIT0obj1udWxsIT0obz1jLnN0cm9rZSk/bzpwKT9uOiJyZ2JhKDAsIDAsIDAsIDApIixmaWxsT3BhY2l0eTpudWxsIT1nP2c6MSxzdHJva2VPcGFjaXR5Om51bGwhPW0/bToxLHN0cm9rZVdpZHRoOm51bGwhPWY/ZjowfX1dOltdfWFuaW1hdGVFbXB0eVVwZGF0ZVJlYWR5KGUpe2NvbnN0e21hcmtlclNlbGVjdGlvbnM6dCxsYWJlbFNlbGVjdGlvbnM6aSxhbm5vdGF0aW9uU2VsZWN0aW9uczpzfT1lO2V1KHRoaXMsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcix0KSxqaCh0aGlzLCJsYWJlbHMiLHRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIsaSksamgodGhpcywiYW5ub3RhdGlvbnMiLHRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIscyl9aXNMYWJlbEVuYWJsZWQoKXtyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmxhYmVsLmVuYWJsZWR9bm9kZUZhY3RvcnkoKXtyZXR1cm4gbmV3IE9ufX07Y3AuY2xhc3NOYW1lPSJTY2F0dGVyU2VyaWVzIixjcC50eXBlPSJzY2F0dGVyIjt2YXIgaHA9e3R5cGU6InNlcmllcyIsb3B0aW9uc0tleToic2VyaWVzW10iLHBhY2thZ2VUeXBlOiJjb21tdW5pdHkiLGNoYXJ0VHlwZXM6WyJjYXJ0ZXNpYW4iXSxpZGVudGlmaWVyOiJzY2F0dGVyIixpbnN0YW5jZUNvbnN0cnVjdG9yOmNwLHNlcmllc0RlZmF1bHRzOntheGVzOlt7dHlwZToibnVtYmVyIixwb3NpdGlvbjoiYm90dG9tIn0se3R5cGU6Im51bWJlciIscG9zaXRpb246ImxlZnQifV19LHRoZW1lVGVtcGxhdGU6e3Nlcmllczp7X19leHRlbmRzX186ZGksdG9vbHRpcDp7cG9zaXRpb246e3R5cGU6Im5vZGUifX0sbWFya2VyOntfX2V4dGVuZHNfXzpjaSxmaWxsT3BhY2l0eTouOH0sbGFiZWw6e2VuYWJsZWQ6ITEsZm9udFN0eWxlOnZvaWQgMCxmb250V2VpZ2h0OnZvaWQgMCxmb250U2l6ZToxMixmb250RmFtaWx5OnVpLGNvbG9yOnBpfX19LGVudGVycHJpc2VUaGVtZVRlbXBsYXRlOntzZXJpZXM6e2Vycm9yQmFyOntjYXA6e2xlbmd0aFJhdGlvOjF9fX19LHBhbGV0dGVGYWN0b3J5OlZofTtmdW5jdGlvbiB1cChlLHQsaSl7Y29uc3Qgcz1NYXRoLnNxcnQoTWF0aC5wb3coZSwyKStNYXRoLnBvdyh0LDIpKSx7aW5uZXJSYWRpdXM6cixvdXRlclJhZGl1czpvfT1pO2lmKGkuc3RhcnRBbmdsZT09PWkuZW5kQW5nbGV8fHM8TWF0aC5taW4ocixvKXx8cz5NYXRoLm1heChyLG8pKXJldHVybiExO2NvbnN0IG49VXIoaS5zdGFydEFuZ2xlKSxhPVVyKGkuZW5kQW5nbGUpLGw9TWF0aC5hdGFuMih0LGUpO3JldHVybiBuPGE/bDw9YSYmbD49bjpsPD1hJiZsPj0tTWF0aC5QSXx8bD49biYmbDw9TWF0aC5QSX1mdW5jdGlvbiBwcChlLHQpe2NvbnN0e3N0YXJ0QW5nbGU6aSxlbmRBbmdsZTpzLGlubmVyUmFkaXVzOnIsb3V0ZXJSYWRpdXM6b309dCxuPXt4Om8qTWF0aC5jb3MoaSkseTpvKk1hdGguc2luKGkpfSxhPXt4Om8qTWF0aC5jb3MocykseTpvKk1hdGguc2luKHMpfSxsPTA9PT1yP3t4OjAseTowfTp7eDpyKk1hdGguY29zKGkpLHk6cipNYXRoLnNpbihpKX0sZD0wPT09cj97eDowLHk6MH06e3g6cipNYXRoLmNvcyhzKSx5OnIqTWF0aC5zaW4ocyl9O3JldHVybiBudWxsIT1iZChlLnN0YXJ0LngsZS5zdGFydC55LGUuZW5kLngsZS5lbmQueSxuLngsbi55LGwueCxsLnkpfHxudWxsIT1iZChlLnN0YXJ0LngsZS5zdGFydC55LGUuZW5kLngsZS5lbmQueSxhLngsYS55LGQueCxkLnkpfHx4ZCgwLDAsbyxpLHMsITAsZS5zdGFydC54LGUuc3RhcnQueSxlLmVuZC54LGUuZW5kLnkpLmxlbmd0aD4wfWZ1bmN0aW9uIGdwKGUsdCl7Y29uc3QgaT17eDplLngseTplLnl9LHM9e3g6ZS54K2Uud2lkdGgseTplLnl9LHI9e3g6ZS54LHk6ZS55K2UuaGVpZ2h0fSxvPXt4OmUueCtlLndpZHRoLHk6ZS55K2UuaGVpZ2h0fTtyZXR1cm4gcHAoe3N0YXJ0OmksZW5kOnN9LHQpfHxwcCh7c3RhcnQ6cixlbmQ6b30sdCl9dmFyIG1wPWNsYXNzIGV4dGVuZHMgT2R7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY2VudGVyWD0wLHRoaXMuY2VudGVyWT0wLHRoaXMuaW5uZXJSYWRpdXM9MTAsdGhpcy5vdXRlclJhZGl1cz0yMCx0aGlzLnN0YXJ0QW5nbGU9MCx0aGlzLmVuZEFuZ2xlPTIqTWF0aC5QSSx0aGlzLmFuZ2xlT2Zmc2V0PTAsdGhpcy5pbnNldD0wfWNvbXB1dGVCQm94KCl7Y29uc3QgZT10aGlzLm91dGVyUmFkaXVzO3JldHVybiBuZXcgb3IodGhpcy5jZW50ZXJYLWUsdGhpcy5jZW50ZXJZLWUsMiplLDIqZSl9dXBkYXRlUGF0aCgpe2NvbnN0IGU9dGhpcy5wYXRoLHthbmdsZU9mZnNldDp0LGluc2V0Oml9PXRoaXMscz10aGlzLnN0YXJ0QW5nbGUrdCxyPXRoaXMuZW5kQW5nbGUrdCxvPXM8PXI/ci1zOjIqTWF0aC5QSS0ocy1yKSxuPU1hdGgubWF4KE1hdGgubWluKHRoaXMuaW5uZXJSYWRpdXMsdGhpcy5vdXRlclJhZGl1cykraSwwKSxhPU1hdGgubWF4KE1hdGgubWF4KHRoaXMuaW5uZXJSYWRpdXMsdGhpcy5vdXRlclJhZGl1cyktaSwwKSxsPW8+PTIqTWF0aC5QSSxkPXRoaXMuY2VudGVyWCxjPXRoaXMuY2VudGVyWTtpZihlLmNsZWFyKCksbCllLmFyYyhkLGMsYSxzLHIpLG4+aSYmKGUubW92ZVRvKGQrbipNYXRoLmNvcyhyKSxjK24qTWF0aC5zaW4ocikpLGUuYXJjKGQsYyxuLHIscywhMCkpO2Vsc2V7Y29uc3QgdD1uPjA/aS9uOjAsbD1hPjA/aS9hOjA7aWYobzwyKmwpcmV0dXJuO2NvbnN0IGg9bjw9aXx8bzwyKnQ7aWYoaCl7Y29uc3QgdD1vPC41Kk1hdGguUEk/aSooMStNYXRoLmNvcyhvKSkvTWF0aC5zaW4obyk6TmFOO2xldCByO3I9dD4wJiZ0PGE/TWF0aC5tYXgoTWF0aC5oeXBvdChpLHQpLG4pOm47Y29uc3QgbD1zKy41Km87ZS5tb3ZlVG8oZCtyKk1hdGguY29zKGwpLGMrcipNYXRoLnNpbihsKSl9ZWxzZSBlLm1vdmVUbyhkK24qTWF0aC5jb3Mocyt0KSxjK24qTWF0aC5zaW4ocyt0KSk7ZS5hcmMoZCxjLGEscytsLHItbCksaHx8KG4+MD9lLmFyYyhkLGMsbixyLXQscyt0LCEwKTplLmxpbmVUbyhkLGMpKX1lLmNsb3NlUGF0aCgpLHRoaXMuZGlydHlQYXRoPSExfWlzUG9pbnRJblBhdGgoZSx0KXtjb25zdHthbmdsZU9mZnNldDppfT10aGlzLHM9dGhpcy5zdGFydEFuZ2xlK2kscj10aGlzLmVuZEFuZ2xlK2ksbz1NYXRoLm1pbih0aGlzLmlubmVyUmFkaXVzLHRoaXMub3V0ZXJSYWRpdXMpLG49TWF0aC5tYXgodGhpcy5pbm5lclJhZGl1cyx0aGlzLm91dGVyUmFkaXVzKSxhPXRoaXMudHJhbnNmb3JtUG9pbnQoZSx0KTtyZXR1cm4gdXAoYS54LGEueSx7c3RhcnRBbmdsZTpzLGVuZEFuZ2xlOnIsaW5uZXJSYWRpdXM6byxvdXRlclJhZGl1czpufSl9fTttcC5jbGFzc05hbWU9IlNlY3RvciIseShbRGQoKV0sbXAucHJvdG90eXBlLCJjZW50ZXJYIiwyKSx5KFtEZCgpXSxtcC5wcm90b3R5cGUsImNlbnRlclkiLDIpLHkoW0RkKCldLG1wLnByb3RvdHlwZSwiaW5uZXJSYWRpdXMiLDIpLHkoW0RkKCldLG1wLnByb3RvdHlwZSwib3V0ZXJSYWRpdXMiLDIpLHkoW0RkKCldLG1wLnByb3RvdHlwZSwic3RhcnRBbmdsZSIsMikseShbRGQoKV0sbXAucHJvdG90eXBlLCJlbmRBbmdsZSIsMikseShbRGQoKV0sbXAucHJvdG90eXBlLCJhbmdsZU9mZnNldCIsMikseShbRGQoKV0sbXAucHJvdG90eXBlLCJpbnNldCIsMik7dmFyIGZwPWNsYXNzIGV4dGVuZHMgQ257Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuc2hvd0luTGVnZW5kPSExfX07eShbcXIodG8pXSxmcC5wcm90b3R5cGUsInNob3dJbkxlZ2VuZCIsMik7dmFyIHZwPWNsYXNzIGV4dGVuZHMgUG57Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMubWFyZ2luPTJ9c2V0KGUsdCl7cmV0dXJuIHN1cGVyLnNldChlKX19O3koW3FyKHNvKV0sdnAucHJvdG90eXBlLCJ0ZXh0IiwyKSx5KFtxcihybyldLHZwLnByb3RvdHlwZSwibWFyZ2luIiwyKTt2YXIgQ3A9Y2xhc3MgZXh0ZW5kcyBmdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5maWxsPSJ0cmFuc3BhcmVudCIsdGhpcy5maWxsT3BhY2l0eT0xfX07eShbcXIoeW8pXSxDcC5wcm90b3R5cGUsImZpbGwiLDIpLHkoW3FyKGFvKV0sQ3AucHJvdG90eXBlLCJmaWxsT3BhY2l0eSIsMik7dmFyIHlwPWNsYXNzIGV4dGVuZHMgUG57Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMub2Zmc2V0PTMsdGhpcy5taW5BbmdsZT0wLHRoaXMubWluU3BhY2luZz00LHRoaXMubWF4Q29sbGlzaW9uT2Zmc2V0PTUwLHRoaXMuYXZvaWRDb2xsaXNpb25zPSEwfX07eShbcXIobm8pXSx5cC5wcm90b3R5cGUsIm9mZnNldCIsMikseShbcXIobG8pXSx5cC5wcm90b3R5cGUsIm1pbkFuZ2xlIiwyKSx5KFtxcihubyldLHlwLnByb3RvdHlwZSwibWluU3BhY2luZyIsMikseShbcXIobm8pXSx5cC5wcm90b3R5cGUsIm1heENvbGxpc2lvbk9mZnNldCIsMikseShbcXIodG8pXSx5cC5wcm90b3R5cGUsImF2b2lkQ29sbGlzaW9ucyIsMik7dmFyIFNwPWNsYXNzIGV4dGVuZHMgUG57Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMucG9zaXRpb25PZmZzZXQ9MCx0aGlzLnBvc2l0aW9uUmF0aW89LjV9fTt5KFtxcihybyldLFNwLnByb3RvdHlwZSwicG9zaXRpb25PZmZzZXQiLDIpLHkoW3FyKGFvKV0sU3AucHJvdG90eXBlLCJwb3NpdGlvblJhdGlvIiwyKTt2YXIgd3A9Y2xhc3MgZXh0ZW5kcyBmdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5sZW5ndGg9MTAsdGhpcy5zdHJva2VXaWR0aD0xfX07eShbcXIoU28se29wdGlvbmFsOiEwfSldLHdwLnByb3RvdHlwZSwiY29sb3JzIiwyKSx5KFtxcihubyldLHdwLnByb3RvdHlwZSwibGVuZ3RoIiwyKSx5KFtxcihubyldLHdwLnByb3RvdHlwZSwic3Ryb2tlV2lkdGgiLDIpO3ZhciBicD1jbGFzcyBleHRlbmRzIG5oe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmZpbGxzPU9iamVjdC52YWx1ZXMoWnQpLHRoaXMuc3Ryb2tlcz1PYmplY3QudmFsdWVzKFF0KSx0aGlzLmZpbGxPcGFjaXR5PTEsdGhpcy5zdHJva2VPcGFjaXR5PTEsdGhpcy5saW5lRGFzaD1bMF0sdGhpcy5saW5lRGFzaE9mZnNldD0wLHRoaXMucm90YXRpb249MCx0aGlzLm91dGVyUmFkaXVzT2Zmc2V0PTAsdGhpcy5vdXRlclJhZGl1c1JhdGlvPTEsdGhpcy5zdHJva2VXaWR0aD0xLHRoaXMuc2VjdG9yU3BhY2luZz12b2lkIDAsdGhpcy5pbm5lckxhYmVscz1uZXcgdnQodnApLHRoaXMudGl0bGU9bmV3IGZwLHRoaXMuaW5uZXJDaXJjbGU9bmV3IENwLHRoaXMuc2hhZG93PW5ldyBZaCx0aGlzLmNhbGxvdXRMYWJlbD1uZXcgeXAsdGhpcy5zZWN0b3JMYWJlbD1uZXcgU3AsdGhpcy5jYWxsb3V0TGluZT1uZXcgd3AsdGhpcy50b29sdGlwPW5ldyBaaCx0aGlzLl9fQkFDS0dST1VORF9DT0xPUl9ET19OT1RfVVNFPXZvaWQgMH1pc1ZhbGlkKCl7Y29uc3QgZT1zdXBlci5pc1ZhbGlkKCk7cmV0dXJuIG51bGw9PXRoaXMuaW5uZXJSYWRpdXNSYXRpbyYmbnVsbD09dGhpcy5pbm5lclJhZGl1c09mZnNldD8oTC53YXJuT25jZSgiRWl0aGVyIGFuIFtpbm5lclJhZGl1c1JhdGlvXSBvciBhbiBbaW5uZXJSYWRpdXNPZmZzZXRdIG11c3QgYmUgc2V0IHRvIHJlbmRlciBhIGRvbnV0IHNlcmllcy4iKSwhMSk6ZX19O2Z1bmN0aW9uIEVwKGUsdCxpLHMpe2NvbnN0IHI9W2kuY29udmVydCgwKSxpLmNvbnZlcnQoMSldLG89W3MuY29udmVydCgwKSxzLmNvbnZlcnQoMSldLG49TWF0aC5QSS8tMit6cih0KTtyZXR1cm57bm9kZXM6e3RvRm46KGUsdCxpLHtwcmV2TGl2ZTpzfSk9Pnt2YXIgbyxhO2xldHtzdGFydEFuZ2xlOmwsZW5kQW5nbGU6ZCxpbm5lclJhZGl1czpjLG91dGVyUmFkaXVzOmh9PXQ7Y29uc3R7c3Ryb2tlOnUsZmlsbDpwfT10LnNlY3RvckZvcm1hdDtpZigicmVtb3ZlZCI9PT1pJiZzPyhsPW51bGw9PShvPXMuZGF0dW0pP3ZvaWQgMDpvLmVuZEFuZ2xlLGQ9bnVsbD09KGE9cy5kYXR1bSk/dm9pZCAwOmEuZW5kQW5nbGUpOiJyZW1vdmVkIiE9PWl8fHN8fChsPW4sZD1uKSwicmVtb3ZlZCI9PT1pKXtjb25zdCBlPSgoe3JhZGl1czplfSk9Pih7aW5uZXJSYWRpdXM6clswXSxvdXRlclJhZGl1czpyWzBdKyhyWzFdLXJbMF0pKmV9KSkodCk7Yz1lLmlubmVyUmFkaXVzLGg9ZS5vdXRlclJhZGl1c31yZXR1cm57c3RhcnRBbmdsZTpsLGVuZEFuZ2xlOmQsb3V0ZXJSYWRpdXM6aCxpbm5lclJhZGl1czpjLHN0cm9rZTp1LGZpbGw6cH19LGZyb21GbjoodCxpLHMse3ByZXZGcm9tUHJvcHM6cn0pPT57dmFyIGEsbCxkLGMsaCx1O2xldHtzdGFydEFuZ2xlOnAsZW5kQW5nbGU6Zyxpbm5lclJhZGl1czptLG91dGVyUmFkaXVzOmZ9PXQse2ZpbGw6dixzdHJva2U6Q309aS5zZWN0b3JGb3JtYXQ7aWYoInVua25vd24iPT09c3x8ImFkZGVkIj09PXMmJiFyPyhwPW4sZz1uLG09aS5pbm5lclJhZGl1cyxmPWkub3V0ZXJSYWRpdXMpOiJhZGRlZCI9PT1zJiZyJiYocD1udWxsIT0oYT1yLmVuZEFuZ2xlKT9hOm4sZz1udWxsIT0obD1yLmVuZEFuZ2xlKT9sOm4sbT1udWxsIT0oZD1yLmlubmVyUmFkaXVzKT9kOmkuaW5uZXJSYWRpdXMsZj1udWxsIT0oYz1yLm91dGVyUmFkaXVzKT9jOmkub3V0ZXJSYWRpdXMpLCJhZGRlZCI9PT1zJiYhZSl7Y29uc3QgZT0oKHtyYWRpdXM6ZX0pPT4oe2lubmVyUmFkaXVzOm9bMF0sb3V0ZXJSYWRpdXM6b1swXSsob1sxXS1vWzBdKSplfSkpKGkpO209ZS5pbm5lclJhZGl1cyxmPWUub3V0ZXJSYWRpdXN9cmV0dXJuInVwZGF0ZWQiPT09cyYmKHY9bnVsbCE9KGg9dC5maWxsKT9oOnYsQz1udWxsIT0odT10LnN0cm9rZSk/dTpDKSx7c3RhcnRBbmdsZTpwLGVuZEFuZ2xlOmcsaW5uZXJSYWRpdXM6bSxvdXRlclJhZGl1czpmLGZpbGw6dixzdHJva2U6QyxwaGFzZToiaW5pdGlhbCJ9fX0saW5uZXJDaXJjbGU6e2Zyb21GbjooZSx0KT0+e3ZhciBpLHMscjtyZXR1cm57c2l6ZTpudWxsIT0ocj1udWxsIT0ocz1udWxsPT0oaT1lLnByZXZpb3VzRGF0dW0pP3ZvaWQgMDppLnJhZGl1cyk/czplLnNpemUpP3I6MCxwaGFzZToiaW5pdGlhbCJ9fSx0b0ZuOihlLHQpPT57dmFyIGk7cmV0dXJue3NpemU6bnVsbCE9KGk9dC5yYWRpdXMpP2k6MH19fX19ZnVuY3Rpb24gUnAoZSx0KXtyZXR1cm57c3RhcnRBbmdsZTp0LnN0YXJ0QW5nbGUsZW5kQW5nbGU6dC5lbmRBbmdsZSxpbm5lclJhZGl1czp0LmlubmVyUmFkaXVzLG91dGVyUmFkaXVzOnQub3V0ZXJSYWRpdXMsZmlsbDp0LnNlY3RvckZvcm1hdC5maWxsLHN0cm9rZTp0LnNlY3RvckZvcm1hdC5zdHJva2V9fXkoW3FyKHNvKV0sYnAucHJvdG90eXBlLCJhbmdsZUtleSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLGJwLnByb3RvdHlwZSwiYW5nbGVOYW1lIiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sYnAucHJvdG90eXBlLCJyYWRpdXNLZXkiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxicC5wcm90b3R5cGUsInJhZGl1c05hbWUiLDIpLHkoW3FyKG5vLHtvcHRpb25hbDohMH0pXSxicC5wcm90b3R5cGUsInJhZGl1c01pbiIsMikseShbcXIobm8se29wdGlvbmFsOiEwfSldLGJwLnByb3RvdHlwZSwicmFkaXVzTWF4IiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sYnAucHJvdG90eXBlLCJjYWxsb3V0TGFiZWxLZXkiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxicC5wcm90b3R5cGUsImNhbGxvdXRMYWJlbE5hbWUiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxicC5wcm90b3R5cGUsInNlY3RvckxhYmVsS2V5IiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sYnAucHJvdG90eXBlLCJzZWN0b3JMYWJlbE5hbWUiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxicC5wcm90b3R5cGUsImxlZ2VuZEl0ZW1LZXkiLDIpLHkoW3FyKFNvKV0sYnAucHJvdG90eXBlLCJmaWxscyIsMikseShbcXIoU28pXSxicC5wcm90b3R5cGUsInN0cm9rZXMiLDIpLHkoW3FyKGFvKV0sYnAucHJvdG90eXBlLCJmaWxsT3BhY2l0eSIsMikseShbcXIoYW8pXSxicC5wcm90b3R5cGUsInN0cm9rZU9wYWNpdHkiLDIpLHkoW3FyKE9vKV0sYnAucHJvdG90eXBlLCJsaW5lRGFzaCIsMikseShbcXIobm8pXSxicC5wcm90b3R5cGUsImxpbmVEYXNoT2Zmc2V0IiwyKSx5KFtxcihpbyx7b3B0aW9uYWw6ITB9KV0sYnAucHJvdG90eXBlLCJmb3JtYXR0ZXIiLDIpLHkoW3FyKGxvKV0sYnAucHJvdG90eXBlLCJyb3RhdGlvbiIsMikseShbcXIocm8pXSxicC5wcm90b3R5cGUsIm91dGVyUmFkaXVzT2Zmc2V0IiwyKSx5KFtxcihhbyldLGJwLnByb3RvdHlwZSwib3V0ZXJSYWRpdXNSYXRpbyIsMikseShbcXIocm8se29wdGlvbmFsOiEwfSldLGJwLnByb3RvdHlwZSwiaW5uZXJSYWRpdXNPZmZzZXQiLDIpLHkoW3FyKGFvLHtvcHRpb25hbDohMH0pXSxicC5wcm90b3R5cGUsImlubmVyUmFkaXVzUmF0aW8iLDIpLHkoW3FyKG5vKV0sYnAucHJvdG90eXBlLCJzdHJva2VXaWR0aCIsMikseShbcXIobm8se29wdGlvbmFsOiEwfSldLGJwLnByb3RvdHlwZSwic2VjdG9yU3BhY2luZyIsMikseShbcXIoeG8pXSxicC5wcm90b3R5cGUsImlubmVyTGFiZWxzIiwyKSx5KFtxcihlbyldLGJwLnByb3RvdHlwZSwidGl0bGUiLDIpLHkoW3FyKGVvKV0sYnAucHJvdG90eXBlLCJpbm5lckNpcmNsZSIsMikseShbcXIoZW8pXSxicC5wcm90b3R5cGUsInNoYWRvdyIsMikseShbcXIoZW8pXSxicC5wcm90b3R5cGUsImNhbGxvdXRMYWJlbCIsMikseShbcXIoZW8pXSxicC5wcm90b3R5cGUsInNlY3RvckxhYmVsIiwyKSx5KFtxcihlbyldLGJwLnByb3RvdHlwZSwiY2FsbG91dExpbmUiLDIpLHkoW3FyKGVvKV0sYnAucHJvdG90eXBlLCJ0b29sdGlwIiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sYnAucHJvdG90eXBlLCJfX0JBQ0tHUk9VTkRfQ09MT1JfRE9fTk9UX1VTRSIsMik7dmFyIHhwPWNsYXNzIGV4dGVuZHMgdGh7Y29uc3RydWN0b3IoZSl7dmFyIHQ9ZSx7dXNlTGFiZWxMYXllcjppPSExLHBpY2tNb2RlczpzPVswXSxjYW5IYXZlQXhlczpyPSExLGFuaW1hdGlvblJlc2V0Rm5zOm99PXQsbj12KHQsWyJ1c2VMYWJlbExheWVyIiwicGlja01vZGVzIiwiY2FuSGF2ZUF4ZXMiLCJhbmltYXRpb25SZXNldEZucyJdKTtzdXBlcihmKG0oe30sbikse3VzZUxhYmVsTGF5ZXI6aSxwaWNrTW9kZXM6cyxjb250ZW50R3JvdXBWaXJ0dWFsOiExLGRpcmVjdGlvbktleXM6e3g6WyJhbmdsZUtleSJdLHk6WyJyYWRpdXNLZXkiXX0sZGlyZWN0aW9uTmFtZXM6e3g6WyJhbmdsZU5hbWUiXSx5OlsicmFkaXVzTmFtZSJdfSxjYW5IYXZlQXhlczpyfSkpLHRoaXMuaXRlbUdyb3VwPXRoaXMuY29udGVudEdyb3VwLmFwcGVuZENoaWxkKG5ldyBPbiksdGhpcy5pdGVtU2VsZWN0aW9uPVZhLnNlbGVjdCh0aGlzLml0ZW1Hcm91cCwoKT0+dGhpcy5ub2RlRmFjdG9yeSgpLCExKSx0aGlzLmxhYmVsU2VsZWN0aW9uPVZhLnNlbGVjdCh0aGlzLmxhYmVsR3JvdXAsZW4sITEpLHRoaXMuaGlnaGxpZ2h0U2VsZWN0aW9uPVZhLnNlbGVjdCh0aGlzLmhpZ2hsaWdodEdyb3VwLCgpPT50aGlzLm5vZGVGYWN0b3J5KCkpLHRoaXMuY2VudGVyWD0wLHRoaXMuY2VudGVyWT0wLHRoaXMucmFkaXVzPTAsdGhpcy5pdGVtR3JvdXAuekluZGV4U3ViT3JkZXI9WygpPT50aGlzLl9kZWNsYXJhdGlvbk9yZGVyLDFdLHRoaXMuYW5pbWF0aW9uUmVzZXRGbnM9byx0aGlzLmFuaW1hdGlvblN0YXRlPW5ldyBuYSgiZW1wdHkiLHtlbXB0eTp7dXBkYXRlOnt0YXJnZXQ6InJlYWR5IixhY3Rpb246ZT0+dGhpcy5hbmltYXRlRW1wdHlVcGRhdGVSZWFkeShlKX0scmVzZXQ6ImVtcHR5Iixza2lwOiJyZWFkeSJ9LHJlYWR5Ont1cGRhdGVEYXRhOiJ3YWl0aW5nIixjbGVhcjoiY2xlYXJpbmciLGhpZ2hsaWdodDplPT50aGlzLmFuaW1hdGVSZWFkeUhpZ2hsaWdodChlKSxoaWdobGlnaHRNYXJrZXJzOmU9PnRoaXMuYW5pbWF0ZVJlYWR5SGlnaGxpZ2h0TWFya2VycyhlKSxyZXNpemU6ZT0+dGhpcy5hbmltYXRlUmVhZHlSZXNpemUoZSkscmVzZXQ6ImVtcHR5Iixza2lwOiJyZWFkeSJ9LHdhaXRpbmc6e3VwZGF0ZTp7dGFyZ2V0OiJyZWFkeSIsYWN0aW9uOmU9PnRoaXMuYW5pbWF0ZVdhaXRpbmdVcGRhdGVSZWFkeShlKX0scmVzZXQ6ImVtcHR5Iixza2lwOiJyZWFkeSJ9LGNsZWFyaW5nOnt1cGRhdGU6e3RhcmdldDoiZW1wdHkiLGFjdGlvbjplPT50aGlzLmFuaW1hdGVDbGVhcmluZ1VwZGF0ZUVtcHR5KGUpfSxyZXNldDoiZW1wdHkiLHNraXA6InJlYWR5In19LCgpPT50aGlzLmNoZWNrUHJvY2Vzc2VkRGF0YUFuaW1hdGFibGUoKSl9cmVzZXRBbmltYXRpb24oZSl7ImluaXRpYWwiPT09ZT90aGlzLmFuaW1hdGlvblN0YXRlLnRyYW5zaXRpb24oInJlc2V0Iik6InJlYWR5Ij09PWUmJnRoaXMuYW5pbWF0aW9uU3RhdGUudHJhbnNpdGlvbigic2tpcCIpfWdldExhYmVsRGF0YSgpe3JldHVybltdfWNvbXB1dGVMYWJlbHNCQm94KGUsdCl7cmV0dXJuIG51bGx9cmVzZXRBbGxBbmltYXRpb24oKXt2YXIgZTtjb25zdHtpdGVtOnQsbGFiZWw6aX09bnVsbCE9KGU9dGhpcy5hbmltYXRpb25SZXNldEZucyk/ZTp7fTt0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLnN0b3BCeUFuaW1hdGlvbkdyb3VwSWQodGhpcy5pZCksdCYmb2EoW3RoaXMuaXRlbVNlbGVjdGlvbix0aGlzLmhpZ2hsaWdodFNlbGVjdGlvbl0sdCksaSYmb2EoW3RoaXMubGFiZWxTZWxlY3Rpb25dLGkpLHRoaXMuaXRlbVNlbGVjdGlvbi5jbGVhbnVwKCksdGhpcy5sYWJlbFNlbGVjdGlvbi5jbGVhbnVwKCksdGhpcy5oaWdobGlnaHRTZWxlY3Rpb24uY2xlYW51cCgpfWFuaW1hdGVFbXB0eVVwZGF0ZVJlYWR5KGUpe3RoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIuc2tpcEN1cnJlbnRCYXRjaCgpLHRoaXMucmVzZXRBbGxBbmltYXRpb24oKX1hbmltYXRlV2FpdGluZ1VwZGF0ZVJlYWR5KGUpe3RoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIuc2tpcEN1cnJlbnRCYXRjaCgpLHRoaXMucmVzZXRBbGxBbmltYXRpb24oKX1hbmltYXRlUmVhZHlIaWdobGlnaHQoZSl7dmFyIHQ7Y29uc3R7aXRlbTppfT1udWxsIT0odD10aGlzLmFuaW1hdGlvblJlc2V0Rm5zKT90Ont9O2kmJm9hKFt0aGlzLmhpZ2hsaWdodFNlbGVjdGlvbl0saSl9YW5pbWF0ZVJlYWR5SGlnaGxpZ2h0TWFya2VycyhlKXt9YW5pbWF0ZVJlYWR5UmVzaXplKGUpe3RoaXMucmVzZXRBbGxBbmltYXRpb24oKX1hbmltYXRlQ2xlYXJpbmdVcGRhdGVFbXB0eShlKXt0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLnNraXBDdXJyZW50QmF0Y2goKSx0aGlzLnJlc2V0QWxsQW5pbWF0aW9uKCl9YW5pbWF0aW9uVHJhbnNpdGlvbkNsZWFyKCl7dGhpcy5hbmltYXRpb25TdGF0ZS50cmFuc2l0aW9uKCJjbGVhciIsdGhpcy5nZXRBbmltYXRpb25EYXRhKCkpfWdldEFuaW1hdGlvbkRhdGEoZSl7cmV0dXJue3Nlcmllc1JlY3Q6ZX19fSxUcD1jbGFzcyBleHRlbmRzIFVje2NvbnN0cnVjdG9yKGUsdCxpLHMpe3N1cGVyKGUsdCxpLHMpLHRoaXMuYW5nbGVLZXk9cy5wcm9wZXJ0aWVzLmFuZ2xlS2V5LHRoaXMucmFkaXVzS2V5PXMucHJvcGVydGllcy5yYWRpdXNLZXksdGhpcy5jYWxsb3V0TGFiZWxLZXk9cy5wcm9wZXJ0aWVzLmNhbGxvdXRMYWJlbEtleSx0aGlzLnNlY3RvckxhYmVsS2V5PXMucHJvcGVydGllcy5zZWN0b3JMYWJlbEtleX19LERwPWNsYXNzIGV4dGVuZHMgeHB7Y29uc3RydWN0b3IoZSl7c3VwZXIoe21vZHVsZUN0eDplLHVzZUxhYmVsTGF5ZXI6ITAsYW5pbWF0aW9uUmVzZXRGbnM6e2l0ZW06UnAsbGFiZWw6emh9fSksdGhpcy5wcm9wZXJ0aWVzPW5ldyBicCx0aGlzLnByZXZpb3VzUmFkaXVzU2NhbGU9bmV3IHZoLHRoaXMucmFkaXVzU2NhbGU9bmV3IHZoLHRoaXMuYmFja2dyb3VuZEdyb3VwPXRoaXMucm9vdEdyb3VwLmFwcGVuZENoaWxkKG5ldyBPbih7bmFtZTp0aGlzLmlkKyItYmFja2dyb3VuZCIsbGF5ZXI6ITAsekluZGV4OjB9KSksdGhpcy56ZXJvc3VtUmluZ3NHcm91cD10aGlzLmJhY2tncm91bmRHcm91cC5hcHBlbmRDaGlsZChuZXcgT24oe25hbWU6dGhpcy5pZCsiLXplcm9zdW1SaW5ncyJ9KSksdGhpcy56ZXJvc3VtT3V0ZXJSaW5nPXRoaXMuemVyb3N1bVJpbmdzR3JvdXAuYXBwZW5kQ2hpbGQobmV3IFBkKSx0aGlzLnplcm9zdW1Jbm5lclJpbmc9dGhpcy56ZXJvc3VtUmluZ3NHcm91cC5hcHBlbmRDaGlsZChuZXcgUGQpLHRoaXMuaW5uZXJDaXJjbGVHcm91cD10aGlzLmJhY2tncm91bmRHcm91cC5hcHBlbmRDaGlsZChuZXcgT24oe25hbWU6dGhpcy5pZCsiLWlubmVyQ2lyY2xlIn0pKSx0aGlzLm5vZGVEYXRhPVtdLHRoaXMuc2VyaWVzSXRlbUVuYWJsZWQ9W10sdGhpcy5zdXJyb3VuZGluZ1JhZGl1cz12b2lkIDAsdGhpcy5Ob2RlQ2xpY2tFdmVudD1UcCx0aGlzLmFuZ2xlU2NhbGU9bmV3IHZoLHRoaXMuYW5nbGVTY2FsZS5kb21haW49WzAsMV0sdGhpcy5hbmdsZVNjYWxlLnJhbmdlPVstTWF0aC5QSSxNYXRoLlBJXS5tYXAoZT0+ZStNYXRoLlBJLzIpO2NvbnN0IHQ9bmV3IE9uKHtuYW1lOiJwaWVDYWxsb3V0TGFiZWxzIn0pLGk9bmV3IE9uKHtuYW1lOiJwaWVTZWN0b3JMYWJlbHMifSkscz1uZXcgT24oe25hbWU6ImlubmVyTGFiZWxzIn0pO3RoaXMubGFiZWxHcm91cC5hcHBlbmQodCksdGhpcy5sYWJlbEdyb3VwLmFwcGVuZChpKSx0aGlzLmxhYmVsR3JvdXAuYXBwZW5kKHMpLHRoaXMuY2FsbG91dExhYmVsU2VsZWN0aW9uPVZhLnNlbGVjdCh0LE9uKSx0aGlzLnNlY3RvckxhYmVsU2VsZWN0aW9uPVZhLnNlbGVjdChpLGVuKSx0aGlzLmlubmVyTGFiZWxzU2VsZWN0aW9uPVZhLnNlbGVjdChzLGVuKSx0aGlzLmlubmVyQ2lyY2xlU2VsZWN0aW9uPVZhLnNlbGVjdCh0aGlzLmlubmVyQ2lyY2xlR3JvdXAsUGQpO2Zvcihjb25zdCBlIG9mW3RoaXMuemVyb3N1bUlubmVyUmluZyx0aGlzLnplcm9zdW1PdXRlclJpbmddKWUuZmlsbE9wYWNpdHk9MCxlLnN0cm9rZT10aGlzLnByb3BlcnRpZXMuY2FsbG91dExhYmVsLmNvbG9yLGUuc3Ryb2tlV2lkdGg9MSxlLnN0cm9rZU9wYWNpdHk9MX1hZGRDaGFydEV2ZW50TGlzdGVuZXJzKCl7dmFyIGU7dGhpcy5kZXN0cm95Rm5zLnB1c2gobnVsbD09KGU9dGhpcy5jdHguY2hhcnRFdmVudE1hbmFnZXIpP3ZvaWQgMDplLmFkZExpc3RlbmVyKCJsZWdlbmQtaXRlbS1jbGljayIsZT0+dGhpcy5vbkxlZ2VuZEl0ZW1DbGljayhlKSkpfXZpc2libGVDaGFuZ2VkKCl7dGhpcy5wcm9jZXNzU2VyaWVzSXRlbUVuYWJsZWQoKX1nZXQgdmlzaWJsZSgpe3JldHVybiB0aGlzLnNlcmllc0l0ZW1FbmFibGVkLmxlbmd0aD90aGlzLnNlcmllc0l0ZW1FbmFibGVkLnNvbWUoZT0+ZSk6c3VwZXIudmlzaWJsZX1wcm9jZXNzU2VyaWVzSXRlbUVuYWJsZWQoKXt2YXIgZTtjb25zdHtkYXRhOnQsdmlzaWJsZTppfT10aGlzO3RoaXMuc2VyaWVzSXRlbUVuYWJsZWQ9bnVsbCE9KGU9bnVsbD09dD92b2lkIDA6dC5tYXAoKCk9PmkpKT9lOltdfW5vZGVGYWN0b3J5KCl7cmV0dXJuIG5ldyBtcH1nZXRTZXJpZXNEb21haW4oZSl7cmV0dXJuIngiPT09ZT90aGlzLmFuZ2xlU2NhbGUuZG9tYWluOnRoaXMucmFkaXVzU2NhbGUuZG9tYWlufXByb2Nlc3NEYXRhKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7dmFyIHQsaSxzLHIsbztpZihudWxsPT10aGlzLmRhdGF8fCF0aGlzLnByb3BlcnRpZXMuaXNWYWxpZCgpKXJldHVybjtsZXR7ZGF0YTpufT10aGlzO2NvbnN0e3Nlcmllc0l0ZW1FbmFibGVkOmF9PXRoaXMse2FuZ2xlS2V5OmwscmFkaXVzS2V5OmQsY2FsbG91dExhYmVsS2V5OmMsc2VjdG9yTGFiZWxLZXk6aCxsZWdlbmRJdGVtS2V5OnV9PXRoaXMucHJvcGVydGllcyxwPSF0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLmlzU2tpcHBlZCgpLGc9W10sdj1bXTt1P2cucHVzaChHYyh0aGlzLHUsITEse2lkOiJsZWdlbmRJdGVtS2V5In0pKTpjP2cucHVzaChHYyh0aGlzLGMsITEse2lkOiJjYWxsb3V0TGFiZWxLZXkifSkpOmgmJmcucHVzaChHYyh0aGlzLGgsITEse2lkOiJzZWN0b3JMYWJlbEtleSJ9KSksZCYmdi5wdXNoKF9jKHRoaXMsZCx7aWQ6InJhZGl1c1ZhbHVlIixtaW46bnVsbCE9KHQ9dGhpcy5wcm9wZXJ0aWVzLnJhZGl1c01pbik/dDowLG1heDp0aGlzLnByb3BlcnRpZXMucmFkaXVzTWF4fSksa2ModGhpcyxkLCEwLHtpZDoicmFkaXVzUmF3In0pLFRjKHRoaXMse2lkOiJyYWRpdXNWYWx1ZSJ9LFswLDFdLDEsbnVsbCE9KGk9dGhpcy5wcm9wZXJ0aWVzLnJhZGl1c01pbik/aTowLHRoaXMucHJvcGVydGllcy5yYWRpdXNNYXgpKSxjJiZ2LnB1c2goa2ModGhpcyxjLCExLHtpZDoiY2FsbG91dExhYmVsVmFsdWUifSkpLGgmJnYucHVzaChrYyh0aGlzLGgsITEse2lkOiJzZWN0b3JMYWJlbFZhbHVlIn0pKSx1JiZ2LnB1c2goa2ModGhpcyx1LCExLHtpZDoibGVnZW5kSXRlbVZhbHVlIn0pKSxwJiZ0aGlzLnByb2Nlc3NlZERhdGEmJmcubGVuZ3RoPjAmJnYucHVzaChNYyh0aGlzLnByb2Nlc3NlZERhdGEpKSx2LnB1c2goRGModGhpcykpLG49bi5tYXAoKGUsdCk9PmFbdF0/ZTpmKG0oe30sZSkse1tsXTowfSkpLHlpZWxkIHRoaXMucmVxdWVzdERhdGFNb2RlbChlLG4se3Byb3BzOlsuLi5nLEhjKHRoaXMsbCwhMCx7aWQ6ImFuZ2xlVmFsdWUiLG9ubHlQb3NpdGl2ZTohMH0pLGtjKHRoaXMsbCwhMCx7aWQ6ImFuZ2xlUmF3In0pLFRjKHRoaXMse2lkOiJhbmdsZVZhbHVlIn0sWzAsMV0sMCwwKSwuLi52XX0pO2Zvcihjb25zdCBlIG9mIG51bGwhPShvPW51bGw9PShyPW51bGw9PShzPXRoaXMucHJvY2Vzc2VkRGF0YSk/dm9pZCAwOnMuZGVmcyk/dm9pZCAwOnIudmFsdWVzKT9vOltdKXtjb25zdHtpZDp0LG1pc3Npbmc6aSxwcm9wZXJ0eTpzfT1lLHI9VmwodGhpcyxpKTsiYW5nbGVSYXciIT09dCYmcj4wJiZMLndhcm5PbmNlKGBubyB2YWx1ZSB3YXMgZm91bmQgZm9yIHRoZSBrZXkgJyR7U3RyaW5nKHMpfScgb24gJHtyfSBkYXRhIGVsZW1lbnQke3I+MT8icyI6IiJ9YCl9dGhpcy5hbmltYXRpb25TdGF0ZS50cmFuc2l0aW9uKCJ1cGRhdGVEYXRhIil9KSl9bWF5YmVSZWZyZXNoTm9kZURhdGEoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2lmKCF0aGlzLm5vZGVEYXRhUmVmcmVzaClyZXR1cm47Y29uc3Rbe25vZGVEYXRhOmU9W119PXt9XT15aWVsZCB0aGlzLmNyZWF0ZU5vZGVEYXRhKCk7dGhpcy5ub2RlRGF0YT1lLHRoaXMubm9kZURhdGFSZWZyZXNoPSExfSkpfWdldFByb2Nlc3NlZERhdGFJbmRleGVzKGUpe3JldHVybnthbmdsZUlkeDplLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsImFuZ2xlVmFsdWUiKS5pbmRleCxyYWRpdXNJZHg6dGhpcy5wcm9wZXJ0aWVzLnJhZGl1c0tleT9lLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsInJhZGl1c1ZhbHVlIikuaW5kZXg6LTEsY2FsbG91dExhYmVsSWR4OnRoaXMucHJvcGVydGllcy5jYWxsb3V0TGFiZWxLZXk/ZS5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGV4QnlJZCh0aGlzLCJjYWxsb3V0TGFiZWxWYWx1ZSIpLmluZGV4Oi0xLHNlY3RvckxhYmVsSWR4OnRoaXMucHJvcGVydGllcy5zZWN0b3JMYWJlbEtleT9lLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsInNlY3RvckxhYmVsVmFsdWUiKS5pbmRleDotMSxsZWdlbmRJdGVtSWR4OnRoaXMucHJvcGVydGllcy5sZWdlbmRJdGVtS2V5P2UucmVzb2x2ZVByb2Nlc3NlZERhdGFJbmRleEJ5SWQodGhpcywibGVnZW5kSXRlbVZhbHVlIikuaW5kZXg6LTF9fWNyZWF0ZU5vZGVEYXRhKCl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHtpZDplLHByb2Nlc3NlZERhdGE6dCxkYXRhTW9kZWw6aSxhbmdsZVNjYWxlOnN9PXRoaXMse3JvdGF0aW9uOnIsaW5uZXJSYWRpdXNSYXRpbzpvfT10aGlzLnByb3BlcnRpZXM7aWYoIXRoaXMucHJvcGVydGllcy5pc1ZhbGlkKCkpcmV0dXJuIHRoaXMuemVyb3N1bU91dGVyUmluZy52aXNpYmxlPSEwLHRoaXMuemVyb3N1bUlubmVyUmluZy52aXNpYmxlPSEwLFt7aXRlbUlkOmUsbm9kZURhdGE6W10sbGFiZWxEYXRhOltdfV07aWYoIXR8fCFpfHwidW5ncm91cGVkIiE9PXQudHlwZSlyZXR1cm5bXTtjb25zdHthbmdsZUlkeDpuLHJhZGl1c0lkeDphLGNhbGxvdXRMYWJlbElkeDpsLHNlY3RvckxhYmVsSWR4OmQsbGVnZW5kSXRlbUlkeDpjfT10aGlzLmdldFByb2Nlc3NlZERhdGFJbmRleGVzKGkpO2xldCBoPTAsdT0wO2NvbnN0IHA9dC5kYXRhLm1hcCgoZSx0KT0+e3ZhciBpO2NvbnN0e2RhdHVtOm8sdmFsdWVzOnB9PWUsZz1wW25dLGY9cy5jb252ZXJ0KGgpK3pyKHIpO2g9Zyx1Kz1nO2NvbnN0IHY9cy5jb252ZXJ0KGgpK3pyKHIpLEM9TWF0aC5hYnModi1mKSx5PWYrQy8yLFM9cFtuKzFdLHc9YT49MCYmbnVsbCE9KGk9cFthXSk/aToxLGI9YT49MD9wW2ErMV06dm9pZCAwLEU9Yz49MD9wW2NdOnZvaWQgMCxSPXRoaXMuZ2V0TGFiZWxzKG8seSxDLCEwLHBbbF0scFtkXSxFKSx4PXRoaXMuZ2V0U2VjdG9yRm9ybWF0KG8sdCwhMSk7cmV0dXJuIG0oe2l0ZW1JZDp0LHNlcmllczp0aGlzLGRhdHVtOm8saW5kZXg6dCxhbmdsZVZhbHVlOlMsbWlkQW5nbGU6eSxtaWRDb3M6TWF0aC5jb3MoeSksbWlkU2luOk1hdGguc2luKHkpLHN0YXJ0QW5nbGU6ZixlbmRBbmdsZTp2LHNlY3RvckZvcm1hdDp4LHJhZGl1c1ZhbHVlOmIscmFkaXVzOncsaW5uZXJSYWRpdXM6TWF0aC5tYXgodGhpcy5yYWRpdXNTY2FsZS5jb252ZXJ0KDApLDApLG91dGVyUmFkaXVzOk1hdGgubWF4KHRoaXMucmFkaXVzU2NhbGUuY29udmVydCh3KSwwKSxsZWdlbmRJdGVtVmFsdWU6RX0sUil9KTtyZXR1cm4gdGhpcy56ZXJvc3VtT3V0ZXJSaW5nLnZpc2libGU9MD09PXUsdGhpcy56ZXJvc3VtSW5uZXJSaW5nLnZpc2libGU9MD09PXUmJm51bGwhPW8mJjEhPT1vJiZvPjAsW3tpdGVtSWQ6ZSxub2RlRGF0YTpwLGxhYmVsRGF0YTpwfV19KSl9Z2V0TGFiZWxzKGUsdCxpLHMscixvLG4pe2NvbnN0e2NhbGxvdXRMYWJlbDphLHNlY3RvckxhYmVsOmwsbGVnZW5kSXRlbUtleTpkfT10aGlzLnByb3BlcnRpZXMsYz0hc3x8YS5lbmFibGVkP3RoaXMucHJvcGVydGllcy5jYWxsb3V0TGFiZWxLZXk6dm9pZCAwLGg9IXN8fGwuZW5hYmxlZD90aGlzLnByb3BlcnRpZXMuc2VjdG9yTGFiZWxLZXk6dm9pZCAwO2lmKCFjJiYhaCYmIWQpcmV0dXJue307Y29uc3QgdT17ZGF0dW06ZSxhbmdsZUtleTp0aGlzLnByb3BlcnRpZXMuYW5nbGVLZXksYW5nbGVOYW1lOnRoaXMucHJvcGVydGllcy5hbmdsZU5hbWUscmFkaXVzS2V5OnRoaXMucHJvcGVydGllcy5yYWRpdXNLZXkscmFkaXVzTmFtZTp0aGlzLnByb3BlcnRpZXMucmFkaXVzTmFtZSxjYWxsb3V0TGFiZWxLZXk6dGhpcy5wcm9wZXJ0aWVzLmNhbGxvdXRMYWJlbEtleSxjYWxsb3V0TGFiZWxOYW1lOnRoaXMucHJvcGVydGllcy5jYWxsb3V0TGFiZWxOYW1lLHNlY3RvckxhYmVsS2V5OnRoaXMucHJvcGVydGllcy5zZWN0b3JMYWJlbEtleSxzZWN0b3JMYWJlbE5hbWU6dGhpcy5wcm9wZXJ0aWVzLnNlY3RvckxhYmVsTmFtZSxsZWdlbmRJdGVtS2V5OnRoaXMucHJvcGVydGllcy5sZWdlbmRJdGVtS2V5fSxwPXt9O3JldHVybiBjJiZpPnpyKGEubWluQW5nbGUpJiYocC5jYWxsb3V0TGFiZWw9ZihtKHt9LHRoaXMuZ2V0VGV4dEFsaWdubWVudCh0KSkse3RleHQ6dGhpcy5nZXRMYWJlbFRleHQoYSxmKG0oe30sdSkse3ZhbHVlOnJ9KSksaGlkZGVuOiExLGNvbGxpc2lvblRleHRBbGlnbjp2b2lkIDAsY29sbGlzaW9uT2Zmc2V0WTowLGJveDp2b2lkIDB9KSksaCYmKHAuc2VjdG9yTGFiZWw9e3RleHQ6dGhpcy5nZXRMYWJlbFRleHQobCxmKG0oe30sdSkse3ZhbHVlOm99KSl9KSxudWxsIT1kJiZudWxsIT1uJiYocC5sZWdlbmRJdGVtPXtrZXk6ZCx0ZXh0Om59KSxwfWdldFRleHRBbGlnbm1lbnQoZSl7Y29uc3QgdD1be3RleHRBbGlnbjoiY2VudGVyIix0ZXh0QmFzZWxpbmU6ImJvdHRvbSJ9LHt0ZXh0QWxpZ246ImxlZnQiLHRleHRCYXNlbGluZToibWlkZGxlIn0se3RleHRBbGlnbjoiY2VudGVyIix0ZXh0QmFzZWxpbmU6ImhhbmdpbmcifSx7dGV4dEFsaWduOiJyaWdodCIsdGV4dEJhc2VsaW5lOiJtaWRkbGUifV0saT1VcihlKS0gLTMqTWF0aC5QSS80O3JldHVybiB0W2VyKE1hdGguZmxvb3IoaS8oTWF0aC5QSS8yKSksdC5sZW5ndGgpXX1nZXRTZWN0b3JGb3JtYXQoZSx0LGkpe3ZhciBzLHIsbyxuLGE7Y29uc3R7Y2FsbGJhY2tDYWNoZTpsLGhpZ2hsaWdodE1hbmFnZXI6ZH09dGhpcy5jdHgse2FuZ2xlS2V5OmMscmFkaXVzS2V5OmgsZmlsbHM6dSxzdHJva2VzOnAsZm9ybWF0dGVyOmcsc2VjdG9yU3BhY2luZzptLF9fQkFDS0dST1VORF9DT0xPUl9ET19OT1RfVVNFOmZ9PXRoaXMucHJvcGVydGllcyx2PWQuZ2V0QWN0aXZlSGlnaGxpZ2h0KCksQz1pJiYobnVsbD09dj92b2lkIDA6di5zZXJpZXMpPT09dGhpcyYmdD09PXYuaXRlbUlkLHtmaWxsOnksZmlsbE9wYWNpdHk6UyxzdHJva2U6dyxzdHJva2VXaWR0aDpiLHN0cm9rZU9wYWNpdHk6RX09WGUoQyYmdGhpcy5wcm9wZXJ0aWVzLmhpZ2hsaWdodFN0eWxlLml0ZW0se2ZpbGw6dS5sZW5ndGg+MD91W3QldS5sZW5ndGhdOnZvaWQgMCxmaWxsT3BhY2l0eTp0aGlzLnByb3BlcnRpZXMuZmlsbE9wYWNpdHksc3Ryb2tlOm51bGwhPW0/cC5sZW5ndGg+MD9wW3QlcC5sZW5ndGhdOnZvaWQgMDpwLmxlbmd0aD4wP3BbdCVwLmxlbmd0aF06ZixzdHJva2VXaWR0aDp0aGlzLmdldFN0cm9rZVdpZHRoKHRoaXMucHJvcGVydGllcy5zdHJva2VXaWR0aCksc3Ryb2tlT3BhY2l0eTp0aGlzLmdldE9wYWNpdHkoKX0pO2xldCBSO3JldHVybiBnJiYoUj1sLmNhbGwoZyx7ZGF0dW06ZSxhbmdsZUtleTpjLHJhZGl1c0tleTpoLGZpbGw6eSxzdHJva2U6dyxmaWxsczp1LHN0cm9rZXM6cCxzdHJva2VXaWR0aDpiLGhpZ2hsaWdodGVkOkMsc2VyaWVzSWQ6dGhpcy5pZH0pKSx7ZmlsbDpudWxsIT0ocz1udWxsPT1SP3ZvaWQgMDpSLmZpbGwpP3M6eSxmaWxsT3BhY2l0eTpudWxsIT0ocj1udWxsPT1SP3ZvaWQgMDpSLmZpbGxPcGFjaXR5KT9yOlMsc3Ryb2tlOm51bGwhPShvPW51bGw9PVI/dm9pZCAwOlIuc3Ryb2tlKT9vOncsc3Ryb2tlV2lkdGg6bnVsbCE9KG49bnVsbD09Uj92b2lkIDA6Ui5zdHJva2VXaWR0aCk/bjpiLHN0cm9rZU9wYWNpdHk6bnVsbCE9KGE9bnVsbD09Uj92b2lkIDA6Ui5zdHJva2VPcGFjaXR5KT9hOkV9fWdldElubmVyUmFkaXVzKCl7Y29uc3R7cmFkaXVzOmV9PXRoaXMse2lubmVyUmFkaXVzUmF0aW86dD0xLGlubmVyUmFkaXVzT2Zmc2V0Omk9MH09dGhpcy5wcm9wZXJ0aWVzLHM9ZSp0K2k7cmV0dXJuIHM9PT1lfHxzPDA/MDpzfWdldE91dGVyUmFkaXVzKCl7Y29uc3R7b3V0ZXJSYWRpdXNSYXRpbzplLG91dGVyUmFkaXVzT2Zmc2V0OnR9PXRoaXMucHJvcGVydGllcztyZXR1cm4gTWF0aC5tYXgodGhpcy5yYWRpdXMqZSt0LDApfXVwZGF0ZVJhZGl1c1NjYWxlKGUpe2NvbnN0IHQ9W3RoaXMuZ2V0SW5uZXJSYWRpdXMoKSx0aGlzLmdldE91dGVyUmFkaXVzKCldO3RoaXMucmFkaXVzU2NhbGUucmFuZ2U9dCxlJiYodGhpcy5wcmV2aW91c1JhZGl1c1NjYWxlLnJhbmdlPXQpLHRoaXMubm9kZURhdGE9dGhpcy5ub2RlRGF0YS5tYXAoZT0+e3ZhciB0PWUse3JhZGl1czppfT10LHM9dih0LFsicmFkaXVzIl0pO3JldHVybiBmKG0oe30scykse3JhZGl1czppLGlubmVyUmFkaXVzOk1hdGgubWF4KHRoaXMucmFkaXVzU2NhbGUuY29udmVydCgwKSwwKSxvdXRlclJhZGl1czpNYXRoLm1heCh0aGlzLnJhZGl1c1NjYWxlLmNvbnZlcnQoaSksMCl9KX0pfWdldFRpdGxlVHJhbnNsYXRpb25ZKCl7dmFyIGUsdDtjb25zdCBpPU1hdGgubWF4KDAsdGhpcy5yYWRpdXNTY2FsZS5yYW5nZVsxXSk7aWYoMD09PWkpcmV0dXJuIE5hTjtyZXR1cm4taS0oMisobnVsbCE9KHQ9bnVsbD09KGU9dGhpcy5wcm9wZXJ0aWVzLnRpdGxlKT92b2lkIDA6ZS5zcGFjaW5nKT90OjApKS1NYXRoLm1heCgwLC1pKX11cGRhdGUoZSl7cmV0dXJuIHcodGhpcyxhcmd1bWVudHMsKGZ1bmN0aW9uKih7c2VyaWVzUmVjdDplfSl7Y29uc3R7dGl0bGU6dH09dGhpcy5wcm9wZXJ0aWVzLGk9e3Nlcmllc1JlY3RXaWR0aDpudWxsPT1lP3ZvaWQgMDplLndpZHRoLHNlcmllc1JlY3RIZWlnaHQ6bnVsbD09ZT92b2lkIDA6ZS5oZWlnaHR9LHM9bnVsbCE9eXQodGhpcy5ub2RlRGF0YURlcGVuZGVuY2llcyxpKTtpZihzJiYodGhpcy5fbm9kZURhdGFEZXBlbmRlbmNpZXM9aSkseWllbGQgdGhpcy5tYXliZVJlZnJlc2hOb2RlRGF0YSgpLHRoaXMudXBkYXRlVGl0bGVOb2RlcygpLHRoaXMudXBkYXRlUmFkaXVzU2NhbGUocyksdGhpcy5jb250ZW50R3JvdXAudHJhbnNsYXRpb25YPXRoaXMuY2VudGVyWCx0aGlzLmNvbnRlbnRHcm91cC50cmFuc2xhdGlvblk9dGhpcy5jZW50ZXJZLHRoaXMuaGlnaGxpZ2h0R3JvdXAudHJhbnNsYXRpb25YPXRoaXMuY2VudGVyWCx0aGlzLmhpZ2hsaWdodEdyb3VwLnRyYW5zbGF0aW9uWT10aGlzLmNlbnRlclksdGhpcy5iYWNrZ3JvdW5kR3JvdXAudHJhbnNsYXRpb25YPXRoaXMuY2VudGVyWCx0aGlzLmJhY2tncm91bmRHcm91cC50cmFuc2xhdGlvblk9dGhpcy5jZW50ZXJZLHRoaXMubGFiZWxHcm91cCYmKHRoaXMubGFiZWxHcm91cC50cmFuc2xhdGlvblg9dGhpcy5jZW50ZXJYLHRoaXMubGFiZWxHcm91cC50cmFuc2xhdGlvblk9dGhpcy5jZW50ZXJZKSx0KXtjb25zdCBlPXRoaXMuZ2V0VGl0bGVUcmFuc2xhdGlvblkoKSxpPXQubm9kZS5jb21wdXRlQkJveCgpO3Qubm9kZS52aXNpYmxlPXQuZW5hYmxlZCYmaXNGaW5pdGUoZSkmJiF0aGlzLmJib3hJbnRlcnNlY3RzU3Vycm91bmRpbmdTZXJpZXMoaSwwLGUpLHQubm9kZS50cmFuc2xhdGlvblk9aXNGaW5pdGUoZSk/ZTowfXRoaXMudXBkYXRlTm9kZU1pZFBvaW50KCkseWllbGQgdGhpcy51cGRhdGVTZWxlY3Rpb25zKCkseWllbGQgdGhpcy51cGRhdGVOb2RlcyhlKX0pKX11cGRhdGVUaXRsZU5vZGVzKCl7dmFyIGUsdDtjb25zdHtvbGRUaXRsZTppfT10aGlzLHt0aXRsZTpzfT10aGlzLnByb3BlcnRpZXM7aSE9PXMmJihpJiYobnVsbD09KGU9dGhpcy5sYWJlbEdyb3VwKXx8ZS5yZW1vdmVDaGlsZChpLm5vZGUpKSxzJiYocy5ub2RlLnRleHRCYXNlbGluZT0iYm90dG9tIixudWxsPT0odD10aGlzLmxhYmVsR3JvdXApfHx0LmFwcGVuZENoaWxkKHMubm9kZSkpLHRoaXMub2xkVGl0bGU9cyl9dXBkYXRlTm9kZU1pZFBvaW50KCl7dGhpcy5ub2RlRGF0YS5mb3JFYWNoKGU9Pntjb25zdCB0PWUuaW5uZXJSYWRpdXMrKGUub3V0ZXJSYWRpdXMtZS5pbm5lclJhZGl1cykvMjtlLm1pZFBvaW50PXt4OmUubWlkQ29zKk1hdGgubWF4KDAsdCkseTplLm1pZFNpbipNYXRoLm1heCgwLHQpfX0pfXVwZGF0ZVNlbGVjdGlvbnMoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMudXBkYXRlR3JvdXBTZWxlY3Rpb24oKSx0aGlzLnVwZGF0ZUlubmVyQ2lyY2xlU2VsZWN0aW9uKCl9KSl9dXBkYXRlR3JvdXBTZWxlY3Rpb24oKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e2l0ZW1TZWxlY3Rpb246ZSxoaWdobGlnaHRTZWxlY3Rpb246dCxjYWxsb3V0TGFiZWxTZWxlY3Rpb246aSxzZWN0b3JMYWJlbFNlbGVjdGlvbjpzLGlubmVyTGFiZWxzU2VsZWN0aW9uOnJ9PXRoaXMsbz0oZSx0KT0+e2xldCBpPXRoaXMubm9kZURhdGE7dCYmKGk9aS5tYXAoZT0+ZihtKHt9LGUpLHtzZWN0b3JGb3JtYXQ6bSh7fSxlLnNlY3RvckZvcm1hdCl9KSkpLGUudXBkYXRlKGksdm9pZCAwLGU9PnRoaXMuZ2V0RGF0dW1JZChlKSksdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlci5pc1NraXBwZWQoKSYmZS5jbGVhbnVwKCl9O28oZSwhMSksbyh0LCEwKSxpLnVwZGF0ZSh0aGlzLm5vZGVEYXRhLGU9Pntjb25zdCB0PW5ldyBCYTt0LnRhZz0xLHQucG9pbnRlckV2ZW50cz0xLGUuYXBwZW5kQ2hpbGQodCk7Y29uc3QgaT1uZXcgZW47aS50YWc9MixpLnBvaW50ZXJFdmVudHM9MSxlLmFwcGVuZENoaWxkKGkpfSkscy51cGRhdGUodGhpcy5ub2RlRGF0YSxlPT57ZS5wb2ludGVyRXZlbnRzPTF9KSxyLnVwZGF0ZSh0aGlzLnByb3BlcnRpZXMuaW5uZXJMYWJlbHMsZT0+e2UucG9pbnRlckV2ZW50cz0xfSl9KSl9dXBkYXRlSW5uZXJDaXJjbGVTZWxlY3Rpb24oKXtjb25zdHtpbm5lckNpcmNsZTplfT10aGlzLnByb3BlcnRpZXM7bGV0IHQ9MDtjb25zdCBpPXRoaXMuZ2V0SW5uZXJSYWRpdXMoKTtpZihpPjApe2NvbnN0IGU9TWF0aC5taW4oaSx0aGlzLmdldE91dGVyUmFkaXVzKCkpLHM9MTt0PU1hdGguY2VpbCgyKmUrcyl9Y29uc3Qgcz1lP1t7cmFkaXVzOnR9XTpbXTt0aGlzLmlubmVyQ2lyY2xlU2VsZWN0aW9uLnVwZGF0ZShzKX11cGRhdGVOb2RlcyhlKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5jdHguaGlnaGxpZ2h0TWFuYWdlci5nZXRBY3RpdmVIaWdobGlnaHQoKSxpPXRoaXMuc2VyaWVzSXRlbUVuYWJsZWQuaW5kZXhPZighMCk+PTA7dGhpcy5yb290R3JvdXAudmlzaWJsZT1pLHRoaXMuYmFja2dyb3VuZEdyb3VwLnZpc2libGU9aSx0aGlzLmNvbnRlbnRHcm91cC52aXNpYmxlPWksdGhpcy5oaWdobGlnaHRHcm91cC52aXNpYmxlPWkmJihudWxsPT10P3ZvaWQgMDp0LnNlcmllcyk9PT10aGlzLHRoaXMubGFiZWxHcm91cCYmKHRoaXMubGFiZWxHcm91cC52aXNpYmxlPWkpLHRoaXMuY29udGVudEdyb3VwLm9wYWNpdHk9dGhpcy5nZXRPcGFjaXR5KCksdGhpcy5pbm5lckNpcmNsZVNlbGVjdGlvbi5lYWNoKChlLHtyYWRpdXM6dH0pPT57dmFyIGkscztlLnNldFByb3BlcnRpZXMoe2ZpbGw6bnVsbD09KGk9dGhpcy5wcm9wZXJ0aWVzLmlubmVyQ2lyY2xlKT92b2lkIDA6aS5maWxsLG9wYWNpdHk6bnVsbD09KHM9dGhpcy5wcm9wZXJ0aWVzLmlubmVyQ2lyY2xlKT92b2lkIDA6cy5maWxsT3BhY2l0eSxzaXplOnR9KX0pO2NvbnN0IHM9KGUsdCxpLHMpPT57Y29uc3Qgcj10aGlzLmdldFNlY3RvckZvcm1hdCh0LmRhdHVtLHQuaXRlbUlkLHMpO3Quc2VjdG9yRm9ybWF0LmZpbGw9ci5maWxsLHQuc2VjdG9yRm9ybWF0LnN0cm9rZT1yLnN0cm9rZTtjb25zdCBvPXRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIuaXNTa2lwcGVkKCk7byYmKGUuc3RhcnRBbmdsZT10LnN0YXJ0QW5nbGUsZS5lbmRBbmdsZT10LmVuZEFuZ2xlLGUuaW5uZXJSYWRpdXM9dC5pbm5lclJhZGl1cyxlLm91dGVyUmFkaXVzPXQub3V0ZXJSYWRpdXMpLChzfHxvKSYmKGUuZmlsbD1yLmZpbGwsZS5zdHJva2U9ci5zdHJva2UpLGUuc3Ryb2tlV2lkdGg9ci5zdHJva2VXaWR0aCxlLmZpbGxPcGFjaXR5PXIuZmlsbE9wYWNpdHksZS5zdHJva2VPcGFjaXR5PXRoaXMucHJvcGVydGllcy5zdHJva2VPcGFjaXR5LGUubGluZURhc2g9dGhpcy5wcm9wZXJ0aWVzLmxpbmVEYXNoLGUubGluZURhc2hPZmZzZXQ9dGhpcy5wcm9wZXJ0aWVzLmxpbmVEYXNoT2Zmc2V0LGUuZmlsbFNoYWRvdz10aGlzLnByb3BlcnRpZXMuc2hhZG93LGUuaW5zZXQ9bnVsbCE9dGhpcy5wcm9wZXJ0aWVzLnNlY3RvclNwYWNpbmc/KHRoaXMucHJvcGVydGllcy5zZWN0b3JTcGFjaW5nKyhudWxsIT1yLnN0cm9rZT9yLnN0cm9rZVdpZHRoOjApKS8yOjAsZS5saW5lSm9pbj1udWxsIT10aGlzLnByb3BlcnRpZXMuc2VjdG9yU3BhY2luZz8ibWl0ZXIiOiJyb3VuZCJ9O3RoaXMuaXRlbVNlbGVjdGlvbi5lYWNoKChlLHQsaSk9PnMoZSx0LDAsITEpKSx0aGlzLmhpZ2hsaWdodFNlbGVjdGlvbi5lYWNoKChlLGkscik9Pntjb25zdCBvPShudWxsPT10P3ZvaWQgMDp0LnNlcmllcyk9PT10aGlzJiZlLmRhdHVtLml0ZW1JZD09PXQuaXRlbUlkO3MoZSxpLDAsITApLGUudmlzaWJsZT1vfSksdGhpcy51cGRhdGVDYWxsb3V0TGluZU5vZGVzKCksdGhpcy51cGRhdGVDYWxsb3V0TGFiZWxOb2RlcyhlKSx0aGlzLnVwZGF0ZVNlY3RvckxhYmVsTm9kZXMoKSx0aGlzLnVwZGF0ZUlubmVyTGFiZWxOb2RlcygpLHRoaXMudXBkYXRlWmVyb3N1bVJpbmdzKCksdGhpcy5hbmltYXRpb25TdGF0ZS50cmFuc2l0aW9uKCJ1cGRhdGUiKX0pKX11cGRhdGVDYWxsb3V0TGluZU5vZGVzKCl7dmFyIGU7Y29uc3R7Y2FsbG91dExpbmU6dH09dGhpcy5wcm9wZXJ0aWVzLGk9dC5sZW5ndGgscz10LnN0cm9rZVdpZHRoLHI9bnVsbCE9KGU9dC5jb2xvcnMpP2U6dGhpcy5wcm9wZXJ0aWVzLnN0cm9rZXMse29mZnNldDpvfT10aGlzLnByb3BlcnRpZXMuY2FsbG91dExhYmVsO3RoaXMuY2FsbG91dExhYmVsU2VsZWN0aW9uLnNlbGVjdEJ5VGFnKDEpLmZvckVhY2goKGUsdCk9Pntjb25zdCBuPWUuZGF0dW0se2NhbGxvdXRMYWJlbDphLG91dGVyUmFkaXVzOmx9PW47aWYoKG51bGw9PWE/dm9pZCAwOmEudGV4dCkmJiFhLmhpZGRlbiYmMCE9PWwpe2UudmlzaWJsZT0hMCxlLnN0cm9rZVdpZHRoPXMsZS5zdHJva2U9clt0JXIubGVuZ3RoXSxlLmZpbGw9dm9pZCAwO2NvbnN0IGQ9bi5taWRDb3MqbCxjPW4ubWlkU2luKmw7bGV0IGg9bi5taWRDb3MqKGwraSksdT1uLm1pZFNpbioobCtpKTtpZigoYS5jb2xsaXNpb25UZXh0QWxpZ258fDAhPT1hLmNvbGxpc2lvbk9mZnNldFkpJiZudWxsIT1hLmJveCl7Y29uc3QgZT1hLmJveDtsZXQgdD1oLGk9dTtoPGUueD90PWUueDpoPmUueCtlLndpZHRoJiYodD1lLngrZS53aWR0aCksdTxlLnk/aT1lLnk6dT5lLnkrZS5oZWlnaHQmJihpPWUueStlLmhlaWdodCk7Y29uc3Qgcz10LWgscj1pLXUsbj1NYXRoLnNxcnQoTWF0aC5wb3cocywyKStNYXRoLnBvdyhyLDIpKSxsPW4tbztsPjAmJihoKz1zKmwvbix1Kz1yKmwvbil9ZS54MT1kLGUueTE9YyxlLngyPWgsZS55Mj11fWVsc2UgZS52aXNpYmxlPSExfSl9Z2V0TGFiZWxPdmVyZmxvdyhlLHQsaSl7Y29uc3Qgcz1pLngtdGhpcy5jZW50ZXJYLHI9aS54K2kud2lkdGgtdGhpcy5jZW50ZXJYLG89aS55LXRoaXMuY2VudGVyWSxuPWkueStpLmhlaWdodC10aGlzLmNlbnRlclk7bGV0IGE9MTt0LngrMTxzP2E9KHQueCt0LndpZHRoLXMpL3Qud2lkdGg6dC54K3Qud2lkdGgtMT5yJiYoYT0oci10LngpL3Qud2lkdGgpO2NvbnN0IGw9dC55KzE8b3x8dC55K3QuaGVpZ2h0LTE+bjtyZXR1cm57dGV4dExlbmd0aDoxPT09YT9lLmxlbmd0aDpNYXRoLmZsb29yKGUubGVuZ3RoKmEpLTEsaGFzVmVydGljYWxPdmVyZmxvdzpsLGhhc1N1cnJvdW5kaW5nU2VyaWVzT3ZlcmZsb3c6dGhpcy5iYm94SW50ZXJzZWN0c1N1cnJvdW5kaW5nU2VyaWVzKHQpfX1iYm94SW50ZXJzZWN0c1N1cnJvdW5kaW5nU2VyaWVzKGUsdD0wLGk9MCl7Y29uc3R7c3Vycm91bmRpbmdSYWRpdXM6c309dGhpcztpZihudWxsPT1zKXJldHVybiExO2NvbnN0IHI9W3t4OmUueCt0LHk6ZS55K2l9LHt4OmUueCtlLndpZHRoK3QseTplLnkraX0se3g6ZS54K2Uud2lkdGgrdCx5OmUueStlLmhlaWdodCtpfSx7eDplLngrdCx5OmUueStlLmhlaWdodCtpfV0sbz1wKHMsMik7cmV0dXJuIHIuc29tZShlPT5wKGUueCwyKStwKGUueSwyKT5vKX1jb21wdXRlQ2FsbG91dExhYmVsQ29sbGlzaW9uT2Zmc2V0cygpe2NvbnN0e3JhZGl1c1NjYWxlOmV9PXRoaXMse2NhbGxvdXRMYWJlbDp0LGNhbGxvdXRMaW5lOml9PXRoaXMucHJvcGVydGllcyx7b2Zmc2V0OnMsbWluU3BhY2luZzpyfT10LG89ZS5jb252ZXJ0KDApLG49dGhpcy5ub2RlRGF0YSxhPXRoaXMubm9kZURhdGEuZmlsdGVyKGU9PntyZXR1cm4hKCEodD1lKS5jYWxsb3V0TGFiZWx8fDA9PT10Lm91dGVyUmFkaXVzKTt2YXIgdH0pO2lmKGEuZm9yRWFjaChlPT57Y29uc3QgdD1lLmNhbGxvdXRMYWJlbDtudWxsIT10JiYodC5oaWRkZW49ITEsdC5jb2xsaXNpb25UZXh0QWxpZ249dm9pZCAwLHQuY29sbGlzaW9uT2Zmc2V0WT0wKX0pLGEubGVuZ3RoPD0xKXJldHVybjtjb25zdCBsPWEuZmlsdGVyKGU9PmUubWlkQ29zPDApLnNvcnQoKGUsdCk9PmUubWlkU2luLXQubWlkU2luKSxkPWEuZmlsdGVyKGU9PmUubWlkQ29zPj0wKS5zb3J0KChlLHQpPT5lLm1pZFNpbi10Lm1pZFNpbiksYz1hLmZpbHRlcihlPT57dmFyIHQ7cmV0dXJuIGUubWlkU2luPDAmJiJjZW50ZXIiPT09KG51bGw9PSh0PWUuY2FsbG91dExhYmVsKT92b2lkIDA6dC50ZXh0QWxpZ24pfSkuc29ydCgoZSx0KT0+ZS5taWRDb3MtdC5taWRDb3MpLGg9YS5maWx0ZXIoZT0+e3ZhciB0O3JldHVybiBlLm1pZFNpbj49MCYmImNlbnRlciI9PT0obnVsbD09KHQ9ZS5jYWxsb3V0TGFiZWwpP3ZvaWQgMDp0LnRleHRBbGlnbil9KS5zb3J0KChlLHQpPT5lLm1pZENvcy10Lm1pZENvcyksdT1uZXcgZW4scD1lPT57dmFyIHQ7Y29uc3Qgcj1lLmNhbGxvdXRMYWJlbDtpZihudWxsPT1yKXJldHVybiBuZXcgb3IoMCwwLDAsMCk7Y29uc3Qgbz1lLm91dGVyUmFkaXVzK2kubGVuZ3RoK3Msbj1lLm1pZENvcypvLGE9ZS5taWRTaW4qbytyLmNvbGxpc2lvbk9mZnNldFk7cmV0dXJuIHUudGV4dD1yLnRleHQsdS54PW4sdS55PWEsdS5zZXRGb250KHRoaXMucHJvcGVydGllcy5jYWxsb3V0TGFiZWwpLHUuc2V0QWxpZ24oe3RleHRBbGlnbjpudWxsIT0odD1yLmNvbGxpc2lvblRleHRBbGlnbik/dDpyLnRleHRBbGlnbix0ZXh0QmFzZWxpbmU6ci50ZXh0QmFzZWxpbmV9KSx1LmNvbXB1dGVCQm94KCl9LGc9KGUsdCxpKT0+e2NvbnN0IHM9cChlKS5ncm93KHIvMiksbz1wKHQpLmdyb3coci8yKTtpZihzLng8by54K28ud2lkdGgmJnMueCtzLndpZHRoPm8ueCYmKCJ0by10b3AiPT09aT9zLnk8by55K28uaGVpZ2h0OnMueStzLmhlaWdodD5vLnkpKXtjb25zdCBlPSJ0by10b3AiPT09aT9zLnktby55LW8uaGVpZ2h0OnMueStzLmhlaWdodC1vLnk7dC5jYWxsb3V0TGFiZWwuY29sbGlzaW9uT2Zmc2V0WT1lfX0sbT1lPT57Y29uc3QgdD1lLnNsaWNlKCkuc29ydCgoZSx0KT0+TWF0aC5hYnMoZS5taWRTaW4pLU1hdGguYWJzKHQubWlkU2luKSlbMF0saT1lLmluZGV4T2YodCk7Zm9yKGxldCB0PWktMTt0Pj0wO3QtLSl7Y29uc3QgaT1lW3QrMV0scz1lW3RdO2coaSxzLCJ0by10b3AiKX1mb3IobGV0IHQ9aSsxO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCBpPWVbdC0xXSxzPWVbdF07ZyhpLHMsInRvLWJvdHRvbSIpfX0sZj1lPT57Y29uc3QgdD1hLnNvbWUoZT0+MCE9PWUuY2FsbG91dExhYmVsLmNvbGxpc2lvbk9mZnNldFkpLGk9ZS5tYXAoZT0+cChlKSkscz1pLm1hcChlPT5lLmNsb25lKCkuZ3JvdyhyLzIpKTtsZXQgbD0hMTtmb3IobGV0IHQ9MDt0PHMubGVuZ3RoJiYhbDt0Kyspe2NvbnN0IGk9c1t0XTtmb3IobGV0IHI9dCsxO3I8ZS5sZW5ndGg7cisrKXtjb25zdCBlPXNbcl07aWYoaS5jb2xsaWRlc0JCb3goZSkpe2w9ITA7YnJlYWt9fX1jb25zdCBkPW4ubWFwKGU9Pntjb25zdHtzdGFydEFuZ2xlOnQsZW5kQW5nbGU6aSxvdXRlclJhZGl1czpzfT1lO3JldHVybntzdGFydEFuZ2xlOnQsZW5kQW5nbGU6aSxpbm5lclJhZGl1czpvLG91dGVyUmFkaXVzOnN9fSksYz1pLnNvbWUoZT0+ZC5zb21lKHQ9PmdwKGUsdCkpKTsobHx8dHx8YykmJmUuZmlsdGVyKGU9PiJjZW50ZXIiPT09ZS5jYWxsb3V0TGFiZWwudGV4dEFsaWduKS5mb3JFYWNoKGU9Pntjb25zdCB0PWUuY2FsbG91dExhYmVsO2UubWlkQ29zPDA/dC5jb2xsaXNpb25UZXh0QWxpZ249InJpZ2h0IjplLm1pZENvcz4wP3QuY29sbGlzaW9uVGV4dEFsaWduPSJsZWZ0Ijp0LmNvbGxpc2lvblRleHRBbGlnbj0iY2VudGVyIn0pfTttKGwpLG0oZCksZihjKSxmKGgpfXVwZGF0ZUNhbGxvdXRMYWJlbE5vZGVzKGUpe2NvbnN0e3JhZGl1c1NjYWxlOnR9PXRoaXMse2NhbGxvdXRMYWJlbDppLGNhbGxvdXRMaW5lOnN9PXRoaXMucHJvcGVydGllcyxyPXMubGVuZ3RoLHtvZmZzZXQ6byxjb2xvcjpufT1pLGE9bmV3IGVuO3RoaXMuY2FsbG91dExhYmVsU2VsZWN0aW9uLnNlbGVjdEJ5VGFnKDIpLmZvckVhY2gocz0+e3ZhciBsO2NvbnN0e2RhdHVtOmR9PXMsYz1kLmNhbGxvdXRMYWJlbCxoPXQuY29udmVydChkLnJhZGl1cyksdT1NYXRoLm1heCgwLGgpO2lmKCEobnVsbD09Yz92b2lkIDA6Yy50ZXh0KXx8MD09PXV8fGMuaGlkZGVuKXJldHVybiB2b2lkKHMudmlzaWJsZT0hMSk7Y29uc3QgcD11K3IrbyxnPWQubWlkQ29zKnAsbT1kLm1pZFNpbipwK2MuY29sbGlzaW9uT2Zmc2V0WSxmPXt0ZXh0QWxpZ246bnVsbCE9KGw9Yy5jb2xsaXNpb25UZXh0QWxpZ24pP2w6Yy50ZXh0QWxpZ24sdGV4dEJhc2VsaW5lOmMudGV4dEJhc2VsaW5lfTthLnRleHQ9Yy50ZXh0LGEueD1nLGEueT1tLGEuc2V0Rm9udCh0aGlzLnByb3BlcnRpZXMuY2FsbG91dExhYmVsKSxhLnNldEFsaWduKGYpO2NvbnN0IHY9YS5jb21wdXRlQkJveCgpO2xldCBDPWMudGV4dCx5PSEwO2lmKGkuYXZvaWRDb2xsaXNpb25zKXtjb25zdHt0ZXh0TGVuZ3RoOnQsaGFzVmVydGljYWxPdmVyZmxvdzppfT10aGlzLmdldExhYmVsT3ZlcmZsb3coYy50ZXh0LHYsZSk7Qz1jLnRleHQubGVuZ3RoPT09dD9jLnRleHQ6Yy50ZXh0LnN1YnN0cmluZygwLHQpKyLigKYiLHk9IWl9cy50ZXh0PUMscy54PWcscy55PW0scy5zZXRGb250KHRoaXMucHJvcGVydGllcy5jYWxsb3V0TGFiZWwpLHMuc2V0QWxpZ24oZikscy5maWxsPW4scy52aXNpYmxlPXl9KX1jb21wdXRlTGFiZWxzQkJveChlLHQpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7Y2FsbG91dExhYmVsOmksY2FsbG91dExpbmU6c309dGhpcy5wcm9wZXJ0aWVzLHI9cy5sZW5ndGgse29mZnNldDpvLG1heENvbGxpc2lvbk9mZnNldDpuLG1pblNwYWNpbmc6YX09aTtpZighaS5hdm9pZENvbGxpc2lvbnMpcmV0dXJuIG51bGw7eWllbGQgdGhpcy5tYXliZVJlZnJlc2hOb2RlRGF0YSgpLHRoaXMudXBkYXRlUmFkaXVzU2NhbGUoITEpLHRoaXMuY29tcHV0ZUNhbGxvdXRMYWJlbENvbGxpc2lvbk9mZnNldHMoKTtjb25zdCBsPVtdLGQ9bmV3IGVuO2xldCBjO2NvbnN0e3RpdGxlOmh9PXRoaXMucHJvcGVydGllcztpZigobnVsbD09aD92b2lkIDA6aC50ZXh0KSYmaC5lbmFibGVkKXtjb25zdCBlPXRoaXMuZ2V0VGl0bGVUcmFuc2xhdGlvblkoKTtpc0Zpbml0ZShlKSYmKGQudGV4dD1oLnRleHQsZC54PTAsZC55PWUsZC5zZXRGb250KGgpLGQuc2V0QWxpZ24oe3RleHRCYXNlbGluZToiYm90dG9tIix0ZXh0QWxpZ246ImNlbnRlciJ9KSxjPWQuY29tcHV0ZUJCb3goKSxsLnB1c2goYykpfXJldHVybiB0aGlzLm5vZGVEYXRhLmZvckVhY2goaT0+e3ZhciBzO2NvbnN0IGg9aS5jYWxsb3V0TGFiZWw7aWYoIWh8fDA9PT1pLm91dGVyUmFkaXVzKXJldHVybiBudWxsO2NvbnN0IHU9aS5vdXRlclJhZGl1cytyK28scD1pLm1pZENvcyp1LGc9aS5taWRTaW4qdStoLmNvbGxpc2lvbk9mZnNldFk7ZC50ZXh0PWgudGV4dCxkLng9cCxkLnk9ZyxkLnNldEZvbnQodGhpcy5wcm9wZXJ0aWVzLmNhbGxvdXRMYWJlbCksZC5zZXRBbGlnbih7dGV4dEFsaWduOm51bGwhPShzPWguY29sbGlzaW9uVGV4dEFsaWduKT9zOmgudGV4dEFsaWduLHRleHRCYXNlbGluZTpoLnRleHRCYXNlbGluZX0pO2NvbnN0IG09ZC5jb21wdXRlQkJveCgpO2lmKGguYm94PW0sTWF0aC5hYnMoaC5jb2xsaXNpb25PZmZzZXRZKT5uKWguaGlkZGVuPSEwO2Vsc2V7aWYoYyl7Y29uc3QgZT10LnktdGhpcy5jZW50ZXJZLGk9bmV3IG9yKGMueC1hLGUsYy53aWR0aCsyKmEsYy55K2MuaGVpZ2h0K2EtZSk7aWYobS5jb2xsaWRlc0JCb3goaSkpcmV0dXJuIHZvaWQoaC5oaWRkZW49ITApfWlmKGUuaGlkZVdoZW5OZWNlc3Nhcnkpe2NvbnN0e3RleHRMZW5ndGg6ZSxoYXNWZXJ0aWNhbE92ZXJmbG93OmksaGFzU3Vycm91bmRpbmdTZXJpZXNPdmVyZmxvdzpzfT10aGlzLmdldExhYmVsT3ZlcmZsb3coaC50ZXh0LG0sdCkscj1oLnRleHQubGVuZ3RoPjImJmU8MjtpZihpfHxyfHxzKXJldHVybiB2b2lkKGguaGlkZGVuPSEwKX1oLmhpZGRlbj0hMSxsLnB1c2gobSl9fSksMD09PWwubGVuZ3RoP251bGw6b3IubWVyZ2UobCl9KSl9dXBkYXRlU2VjdG9yTGFiZWxOb2Rlcygpe2NvbnN0e3JhZGl1c1NjYWxlOmV9PXRoaXMsdD1lLmNvbnZlcnQoMCkse2ZvbnRTaXplOmksZm9udFN0eWxlOnMsZm9udFdlaWdodDpyLGZvbnRGYW1pbHk6byxwb3NpdGlvbk9mZnNldDpuLHBvc2l0aW9uUmF0aW86YSxjb2xvcjpsfT10aGlzLnByb3BlcnRpZXMuc2VjdG9yTGFiZWw7dGhpcy5zZWN0b3JMYWJlbFNlbGVjdGlvbi5lYWNoKChlLGQpPT57Y29uc3R7c2VjdG9yTGFiZWw6YyxvdXRlclJhZGl1czpofT1kO2xldCB1PSExO2lmKGMmJjAhPT1oKXtjb25zdCBwPXQqKDEtYSkraCphK247ZS5maWxsPWwsZS5mb250U3R5bGU9cyxlLmZvbnRXZWlnaHQ9cixlLmZvbnRTaXplPWksZS5mb250RmFtaWx5PW8sZS50ZXh0PWMudGV4dCxlLng9ZC5taWRDb3MqcCxlLnk9ZC5taWRTaW4qcCxlLnRleHRBbGlnbj0iY2VudGVyIixlLnRleHRCYXNlbGluZT0ibWlkZGxlIjtjb25zdCBnPWUuY29tcHV0ZUJCb3goKSxtPVtbZy54LGcueV0sW2cueCtnLndpZHRoLGcueV0sW2cueCtnLndpZHRoLGcueStnLmhlaWdodF0sW2cueCxnLnkrZy5oZWlnaHRdXSx7c3RhcnRBbmdsZTpmLGVuZEFuZ2xlOnZ9PWQsQz17c3RhcnRBbmdsZTpmLGVuZEFuZ2xlOnYsaW5uZXJSYWRpdXM6dCxvdXRlclJhZGl1czpofTttLmV2ZXJ5KChbZSx0XSk9PnVwKGUsdCxDKSkmJih1PSEwKX1lLnZpc2libGU9dX0pfXVwZGF0ZUlubmVyTGFiZWxOb2Rlcygpe2NvbnN0IGU9W10sdD1bXTt0aGlzLmlubmVyTGFiZWxzU2VsZWN0aW9uLmVhY2goKGkscyk9Pntjb25zdHtmb250U3R5bGU6cixmb250V2VpZ2h0Om8sZm9udFNpemU6bixmb250RmFtaWx5OmEsY29sb3I6bH09cztpLmZvbnRTdHlsZT1yLGkuZm9udFdlaWdodD1vLGkuZm9udFNpemU9bixpLmZvbnRGYW1pbHk9YSxpLnRleHQ9cy50ZXh0LGkueD0wLGkueT0wLGkuZmlsbD1sLGkudGV4dEFsaWduPSJjZW50ZXIiLGkudGV4dEJhc2VsaW5lPSJhbHBoYWJldGljIixlLnB1c2goaS5jb21wdXRlQkJveCgpKSx0LnB1c2gocy5tYXJnaW4pfSk7Y29uc3QgaT1lPT4wPT09ZT8wOnRbZV0scz1lPT5lPT09dC5sZW5ndGgtMT8wOnRbZV0scj1lLnJlZHVjZSgoZSx0LHIpPT5lK3QuaGVpZ2h0K2kocikrcyhyKSwwKSxvPU1hdGgubWF4KC4uLmUubWFwKGU9PmUud2lkdGgpKSxuPXRoaXMuZ2V0SW5uZXJSYWRpdXMoKSxhPU1hdGguc3FydChNYXRoLnBvdyhvLzIsMikrTWF0aC5wb3coci8yLDIpKTw9KG4+MD9uOnRoaXMuZ2V0T3V0ZXJSYWRpdXMoKSksbD1bXTtmb3IobGV0IHQ9MCxvPS1yLzI7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IHI9ZVt0XS5oZWlnaHQrbytpKHQpO2wucHVzaChyKSxvPXIrcyh0KX10aGlzLmlubmVyTGFiZWxzU2VsZWN0aW9uLmVhY2goKGUsdCxpKT0+e2UueT1sW2ldLGUudmlzaWJsZT1hfSl9dXBkYXRlWmVyb3N1bVJpbmdzKCl7dGhpcy56ZXJvc3VtT3V0ZXJSaW5nLnNpemU9Mip0aGlzLmdldE91dGVyUmFkaXVzKCksdGhpcy56ZXJvc3VtSW5uZXJSaW5nLnNpemU9Mip0aGlzLmdldElubmVyUmFkaXVzKCl9Z2V0RGF0dW1MZWdlbmROYW1lKGUpe2NvbnN0e2FuZ2xlS2V5OnQsY2FsbG91dExhYmVsS2V5Omksc2VjdG9yTGFiZWxLZXk6cyxsZWdlbmRJdGVtS2V5OnJ9PXRoaXMucHJvcGVydGllcyx7c2VjdG9yTGFiZWw6byxjYWxsb3V0TGFiZWw6bixsZWdlbmRJdGVtOmF9PWU7cmV0dXJuIHImJnZvaWQgMCE9PWE/YS50ZXh0OmkmJmkhPT10JiZ2b2lkIDAhPT0obnVsbD09bj92b2lkIDA6bi50ZXh0KT9uLnRleHQ6cyYmcyE9PXQmJnZvaWQgMCE9PShudWxsPT1vP3ZvaWQgMDpvLnRleHQpP28udGV4dDp2b2lkIDB9Z2V0VG9vbHRpcEh0bWwoZSl7dmFyIHQ7aWYoIXRoaXMucHJvcGVydGllcy5pc1ZhbGlkKCkpcmV0dXJuIiI7Y29uc3R7ZGF0dW06aSxhbmdsZVZhbHVlOnMsc2VjdG9yRm9ybWF0OntmaWxsOnJ9fT1lLG89V2gobnVsbD09KHQ9dGhpcy5wcm9wZXJ0aWVzLnRpdGxlKT92b2lkIDA6dC50ZXh0KSxuPWplKHMpP0pzKHMpOlN0cmluZyhzKSxhPXRoaXMuZ2V0RGF0dW1MZWdlbmROYW1lKGUpO3JldHVybiB0aGlzLnByb3BlcnRpZXMudG9vbHRpcC50b1Rvb2x0aXBIdG1sKHt0aXRsZTpudWxsIT1vP286YSxjb250ZW50Om8mJmE/YCR7YX06ICR7bn1gOm4sYmFja2dyb3VuZENvbG9yOnJ9LHtkYXR1bTppLHRpdGxlOm8sY29sb3I6cixzZXJpZXNJZDp0aGlzLmlkLGFuZ2xlS2V5OnRoaXMucHJvcGVydGllcy5hbmdsZUtleSxhbmdsZU5hbWU6dGhpcy5wcm9wZXJ0aWVzLmFuZ2xlTmFtZSxyYWRpdXNLZXk6dGhpcy5wcm9wZXJ0aWVzLnJhZGl1c0tleSxyYWRpdXNOYW1lOnRoaXMucHJvcGVydGllcy5yYWRpdXNOYW1lLGNhbGxvdXRMYWJlbEtleTp0aGlzLnByb3BlcnRpZXMuY2FsbG91dExhYmVsS2V5LGNhbGxvdXRMYWJlbE5hbWU6dGhpcy5wcm9wZXJ0aWVzLmNhbGxvdXRMYWJlbE5hbWUsc2VjdG9yTGFiZWxLZXk6dGhpcy5wcm9wZXJ0aWVzLnNlY3RvckxhYmVsS2V5LHNlY3RvckxhYmVsTmFtZTp0aGlzLnByb3BlcnRpZXMuc2VjdG9yTGFiZWxOYW1lfSl9Z2V0TGVnZW5kRGF0YShlKXt2YXIgdCxpLHMscixvO2NvbnN0e3Byb2Nlc3NlZERhdGE6bixkYXRhTW9kZWw6YX09dGhpcztpZighYXx8IShudWxsPT1uP3ZvaWQgMDpuLmRhdGEubGVuZ3RoKXx8IXRoaXMucHJvcGVydGllcy5pc1ZhbGlkKCl8fCJjYXRlZ29yeSIhPT1lKXJldHVybltdO2NvbnN0e2FuZ2xlS2V5OmwsY2FsbG91dExhYmVsS2V5OmQsc2VjdG9yTGFiZWxLZXk6YyxsZWdlbmRJdGVtS2V5Omh9PXRoaXMucHJvcGVydGllcztpZighKGh8fGQmJmQhPT1sfHxjJiZjIT09bCkpcmV0dXJuW107Y29uc3R7Y2FsbG91dExhYmVsSWR4OnUsc2VjdG9yTGFiZWxJZHg6cCxsZWdlbmRJdGVtSWR4Omd9PXRoaXMuZ2V0UHJvY2Vzc2VkRGF0YUluZGV4ZXMoYSksbT0obnVsbD09KHQ9dGhpcy5wcm9wZXJ0aWVzLnRpdGxlKT92b2lkIDA6dC5zaG93SW5MZWdlbmQpJiZ0aGlzLnByb3BlcnRpZXMudGl0bGUudGV4dCxmPVtdO2ZvcihsZXQgZT0wO2U8bi5kYXRhLmxlbmd0aDtlKyspe2NvbnN0e2RhdHVtOnQsdmFsdWVzOmF9PW4uZGF0YVtlXSx2PVtdO20mJnYucHVzaChtKTtjb25zdCBDPXRoaXMuZ2V0TGFiZWxzKHQsMipNYXRoLlBJLDIqTWF0aC5QSSwhMSxhW3VdLGFbcF0sYVtnXSk7aWYoaCYmdm9pZCAwIT09Qy5sZWdlbmRJdGVtP3YucHVzaChDLmxlZ2VuZEl0ZW0udGV4dCk6ZCYmZCE9PWwmJnZvaWQgMCE9PShudWxsPT0oaT1DLmNhbGxvdXRMYWJlbCk/dm9pZCAwOmkudGV4dCk/di5wdXNoKG51bGw9PShzPUMuY2FsbG91dExhYmVsKT92b2lkIDA6cy50ZXh0KTpjJiZjIT09bCYmdm9pZCAwIT09KG51bGw9PShyPUMuc2VjdG9yTGFiZWwpP3ZvaWQgMDpyLnRleHQpJiZ2LnB1c2gobnVsbD09KG89Qy5zZWN0b3JMYWJlbCk/dm9pZCAwOm8udGV4dCksMD09PXYubGVuZ3RoKWNvbnRpbnVlO2NvbnN0IHk9dGhpcy5nZXRTZWN0b3JGb3JtYXQodCxlLCExKTtmLnB1c2goe2xlZ2VuZFR5cGU6ImNhdGVnb3J5IixpZDp0aGlzLmlkLGl0ZW1JZDplLHNlcmllc0lkOnRoaXMuaWQsZW5hYmxlZDp0aGlzLnNlcmllc0l0ZW1FbmFibGVkW2VdLGxhYmVsOnt0ZXh0OnYuam9pbigiIC0gIil9LG1hcmtlcjp7ZmlsbDp5LmZpbGwsc3Ryb2tlOnkuc3Ryb2tlLGZpbGxPcGFjaXR5OnRoaXMucHJvcGVydGllcy5maWxsT3BhY2l0eSxzdHJva2VPcGFjaXR5OnRoaXMucHJvcGVydGllcy5zdHJva2VPcGFjaXR5LHN0cm9rZVdpZHRoOnRoaXMucHJvcGVydGllcy5zdHJva2VXaWR0aH0sbGVnZW5kSXRlbU5hbWU6bnVsbCE9aD90W2hdOnZvaWQgMH0pfXJldHVybiBmfW9uTGVnZW5kSXRlbUNsaWNrKGUpe2NvbnN0e2VuYWJsZWQ6dCxpdGVtSWQ6aSxzZXJpZXM6cyxsZWdlbmRJdGVtTmFtZTpyfT1lO3MuaWQ9PT10aGlzLmlkP3RoaXMudG9nZ2xlU2VyaWVzSXRlbShpLHQpOm51bGwhPXImJnRoaXMudG9nZ2xlT3RoZXJTZXJpZXNJdGVtcyhyLHQpfXRvZ2dsZVNlcmllc0l0ZW0oZSx0KXt0aGlzLnNlcmllc0l0ZW1FbmFibGVkW2VdPXQsdGhpcy5ub2RlRGF0YVJlZnJlc2g9ITB9dG9nZ2xlT3RoZXJTZXJpZXNJdGVtcyhlLHQpe3ZhciBpO2lmKCF0aGlzLnByb3BlcnRpZXMubGVnZW5kSXRlbUtleXx8IXRoaXMuZGF0YU1vZGVsKXJldHVybjtjb25zdCBzPXRoaXMuZGF0YU1vZGVsLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsImxlZ2VuZEl0ZW1WYWx1ZSIpLmluZGV4O251bGw9PShpPXRoaXMucHJvY2Vzc2VkRGF0YSl8fGkuZGF0YS5mb3JFYWNoKCh7dmFsdWVzOml9LHIpPT57aVtzXT09PWUmJnRoaXMudG9nZ2xlU2VyaWVzSXRlbShyLHQpfSl9YW5pbWF0ZUVtcHR5VXBkYXRlUmVhZHkoZSl7Y29uc3R7YW5pbWF0aW9uTWFuYWdlcjp0fT10aGlzLmN0eCxpPUVwKCEwLHRoaXMucHJvcGVydGllcy5yb3RhdGlvbix0aGlzLnJhZGl1c1NjYWxlLHRoaXMucHJldmlvdXNSYWRpdXNTY2FsZSk7X3IodGhpcy5pZCwibm9kZXMiLHQsW3RoaXMuaXRlbVNlbGVjdGlvbix0aGlzLmhpZ2hsaWdodFNlbGVjdGlvbl0saS5ub2RlcyksX3IodGhpcy5pZCwiaW5uZXJDaXJjbGUiLHQsW3RoaXMuaW5uZXJDaXJjbGVTZWxlY3Rpb25dLGkuaW5uZXJDaXJjbGUpLGpoKHRoaXMsImNhbGxvdXQiLHQsW3RoaXMuY2FsbG91dExhYmVsU2VsZWN0aW9uXSksamgodGhpcywic2VjdG9yIix0LFt0aGlzLnNlY3RvckxhYmVsU2VsZWN0aW9uXSksamgodGhpcywiaW5uZXIiLHQsW3RoaXMuaW5uZXJMYWJlbHNTZWxlY3Rpb25dKSx0aGlzLnByZXZpb3VzUmFkaXVzU2NhbGUucmFuZ2U9dGhpcy5yYWRpdXNTY2FsZS5yYW5nZX1hbmltYXRlV2FpdGluZ1VwZGF0ZVJlYWR5KCl7dmFyIGUsdCxpLHMscixvO2NvbnN0e2l0ZW1TZWxlY3Rpb246bixoaWdobGlnaHRTZWxlY3Rpb246YSxwcm9jZXNzZWREYXRhOmwscmFkaXVzU2NhbGU6ZCxwcmV2aW91c1JhZGl1c1NjYWxlOmN9PXRoaXMse2FuaW1hdGlvbk1hbmFnZXI6aH09dGhpcy5jdHgsdT1udWxsPT0oZT1udWxsPT1sP3ZvaWQgMDpsLnJlZHVjZWQpP3ZvaWQgMDplLmRpZmY7dGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlci5zdG9wQnlBbmltYXRpb25Hcm91cElkKHRoaXMuaWQpO2NvbnN0IHA9MD09PShudWxsIT0odD1udWxsPT11P3ZvaWQgMDp1Lm1vdmVkLmxlbmd0aCk/dDowKSYmKG51bGw9PXU/dm9pZCAwOnUuYWRkZWRJbmRpY2VzLmV2ZXJ5KGU9PiF1LnJlbW92ZWRJbmRpY2VzLmluY2x1ZGVzKGUpKSksZz0obnVsbCE9KGk9bnVsbD09bD92b2lkIDA6bC5kZWZzLmtleXMubGVuZ3RoKT9pOjApPjAsbT1udWxsPT0obz1udWxsPT0ocj1udWxsPT0ocz1udWxsPT1sP3ZvaWQgMDpsLnJlZHVjZWQpP3ZvaWQgMDpzLmFuaW1hdGlvblZhbGlkYXRpb24pP3ZvaWQgMDpyLnVuaXF1ZUtleXMpfHxvO3AmJmcmJm18fHRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIuc2tpcEN1cnJlbnRCYXRjaCgpO2NvbnN0IGY9RXAoITEsdGhpcy5wcm9wZXJ0aWVzLnJvdGF0aW9uLGQsYyk7X3IodGhpcy5pZCwibm9kZXMiLGgsW24sYV0sZi5ub2RlcywoZSx0KT0+dGhpcy5nZXREYXR1bUlkKHQpLHUpLF9yKHRoaXMuaWQsImlubmVyQ2lyY2xlIixoLFt0aGlzLmlubmVyQ2lyY2xlU2VsZWN0aW9uXSxmLmlubmVyQ2lyY2xlKSxqaCh0aGlzLCJjYWxsb3V0Iix0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLFt0aGlzLmNhbGxvdXRMYWJlbFNlbGVjdGlvbl0pLGpoKHRoaXMsInNlY3RvciIsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcixbdGhpcy5zZWN0b3JMYWJlbFNlbGVjdGlvbl0pLGpoKHRoaXMsImlubmVyIix0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLFt0aGlzLmlubmVyTGFiZWxzU2VsZWN0aW9uXSksdGhpcy5wcmV2aW91c1JhZGl1c1NjYWxlLnJhbmdlPXRoaXMucmFkaXVzU2NhbGUucmFuZ2V9YW5pbWF0ZUNsZWFyaW5nVXBkYXRlRW1wdHkoKXtjb25zdHtpdGVtU2VsZWN0aW9uOmUsaGlnaGxpZ2h0U2VsZWN0aW9uOnQscmFkaXVzU2NhbGU6aSxwcmV2aW91c1JhZGl1c1NjYWxlOnN9PXRoaXMse2FuaW1hdGlvbk1hbmFnZXI6cn09dGhpcy5jdHgsbz1FcCghMSx0aGlzLnByb3BlcnRpZXMucm90YXRpb24saSxzKTtfcih0aGlzLmlkLCJub2RlcyIscixbZSx0XSxvLm5vZGVzKSxfcih0aGlzLmlkLCJpbm5lckNpcmNsZSIscixbdGhpcy5pbm5lckNpcmNsZVNlbGVjdGlvbl0sby5pbm5lckNpcmNsZSksVWgodGhpcywiY2FsbG91dCIsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcixbdGhpcy5jYWxsb3V0TGFiZWxTZWxlY3Rpb25dKSxVaCh0aGlzLCJzZWN0b3IiLHRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIsW3RoaXMuc2VjdG9yTGFiZWxTZWxlY3Rpb25dKSxVaCh0aGlzLCJpbm5lciIsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcixbdGhpcy5pbm5lckxhYmVsc1NlbGVjdGlvbl0pLHRoaXMucHJldmlvdXNSYWRpdXNTY2FsZS5yYW5nZT10aGlzLnJhZGl1c1NjYWxlLnJhbmdlfWdldERhdHVtSWRGcm9tRGF0YShlKXt2YXIgdCxpLHM7Y29uc3R7Y2FsbG91dExhYmVsS2V5OnIsc2VjdG9yTGFiZWxLZXk6byxsZWdlbmRJdGVtS2V5Om59PXRoaXMucHJvcGVydGllcztpZihudWxsPT0ocz1udWxsPT0oaT1udWxsPT0odD10aGlzLnByb2Nlc3NlZERhdGEpP3ZvaWQgMDp0LnJlZHVjZWQpP3ZvaWQgMDppLmFuaW1hdGlvblZhbGlkYXRpb24pP3ZvaWQgMDpzLnVuaXF1ZUtleXMpcmV0dXJuIG4/ZVtuXTpyP2Vbcl06bz9lW29dOnZvaWQgMH1nZXREYXR1bUlkKGUpe3ZhciB0O2NvbnN0e2luZGV4Oml9PWU7cmV0dXJuIG51bGwhPSh0PXRoaXMuZ2V0RGF0dW1JZEZyb21EYXRhKGUuZGF0dW0pKT90OiIiK2l9b25EYXRhQ2hhbmdlKCl7dGhpcy5wcm9jZXNzU2VyaWVzSXRlbUVuYWJsZWQoKX19O0RwLmNsYXNzTmFtZT0iRG9udXRTZXJpZXMiLERwLnR5cGU9ImRvbnV0Ijt2YXIgT3A9e3Nlcmllczp7X19leHRlbmRzX186ZGksdGl0bGU6e2VuYWJsZWQ6ITAsZm9udFN0eWxlOnZvaWQgMCxmb250V2VpZ2h0OiJub3JtYWwiLGZvbnRTaXplOjE0LGZvbnRGYW1pbHk6dWksY29sb3I6Zmksc3BhY2luZzo1fSxjYWxsb3V0TGFiZWw6e2VuYWJsZWQ6ITAsZm9udFN0eWxlOnZvaWQgMCxmb250V2VpZ2h0OnZvaWQgMCxmb250U2l6ZToxMixmb250RmFtaWx5OnVpLGNvbG9yOnBpLG9mZnNldDozLG1pbkFuZ2xlOjB9LHNlY3RvckxhYmVsOntlbmFibGVkOiEwLGZvbnRTdHlsZTp2b2lkIDAsZm9udFdlaWdodDoibm9ybWFsIixmb250U2l6ZToxMixmb250RmFtaWx5OnVpLGNvbG9yOm1pLHBvc2l0aW9uT2Zmc2V0OjAscG9zaXRpb25SYXRpbzouNX0sY2FsbG91dExpbmU6e2xlbmd0aDoxMCxzdHJva2VXaWR0aDoyfSxmaWxsT3BhY2l0eToxLHN0cm9rZU9wYWNpdHk6MSxzdHJva2VXaWR0aDoxLGxpbmVEYXNoOlswXSxsaW5lRGFzaE9mZnNldDowLHJvdGF0aW9uOjAsc2hhZG93OntlbmFibGVkOiExLGNvbG9yOndpLHhPZmZzZXQ6Myx5T2Zmc2V0OjMsYmx1cjo1fSxpbm5lckxhYmVsczp7Zm9udFN0eWxlOnZvaWQgMCxmb250V2VpZ2h0OnZvaWQgMCxmb250U2l6ZToxMixmb250RmFtaWx5OnVpLGNvbG9yOnBpLG1hcmdpbjoyfSxfX0JBQ0tHUk9VTkRfQ09MT1JfRE9fTk9UX1VTRTpTaX19LEFwPSh7dGFrZUNvbG9yczplLGNvbG9yc0NvdW50OnQsdXNlclBhbGV0dGU6aX0pPT57Y29uc3R7ZmlsbHM6cyxzdHJva2VzOnJ9PWUodCk7cmV0dXJue2ZpbGxzOnMsc3Ryb2tlczppP3I6W10sY2FsbG91dExpbmU6e2NvbG9yczpyfX19LFBwPXt0eXBlOiJzZXJpZXMiLG9wdGlvbnNLZXk6InNlcmllc1tdIixwYWNrYWdlVHlwZToiY29tbXVuaXR5IixjaGFydFR5cGVzOlsicG9sYXIiXSxpZGVudGlmaWVyOiJkb251dCIsaW5zdGFuY2VDb25zdHJ1Y3RvcjpEcCxzZXJpZXNEZWZhdWx0czp7fSx0aGVtZVRlbXBsYXRlOk9wLHBhbGV0dGVGYWN0b3J5OkFwfSxNcD1jbGFzcyBleHRlbmRzIENue2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnNob3dJbkxlZ2VuZD0hMX19O3koW3FyKHRvKV0sTXAucHJvdG90eXBlLCJzaG93SW5MZWdlbmQiLDIpO3ZhciBMcD1jbGFzcyBleHRlbmRzIFBue3NldChlLHQpe3JldHVybiBzdXBlci5zZXQoZSl9fTt5KFtHcygiVXNlIGEgRG9udXQgU2VyaWVzIGluc3RlYWQiKSxxcihzbyx7b3B0aW9uYWw6ITB9KV0sTHAucHJvdG90eXBlLCJ0ZXh0IiwyKSx5KFtHcygiVXNlIGEgRG9udXQgU2VyaWVzIGluc3RlYWQiKSxxcihybyx7b3B0aW9uYWw6ITB9KV0sTHAucHJvdG90eXBlLCJtYXJnaW4iLDIpO3ZhciBGcD1jbGFzcyBleHRlbmRzIGZ0e307eShbR3MoIlVzZSBhIERvbnV0IFNlcmllcyBpbnN0ZWFkIikscXIoeW8se29wdGlvbmFsOiEwfSldLEZwLnByb3RvdHlwZSwiZmlsbCIsMikseShbR3MoIlVzZSBhIERvbnV0IFNlcmllcyBpbnN0ZWFkIikscXIoYW8se29wdGlvbmFsOiEwfSldLEZwLnByb3RvdHlwZSwiZmlsbE9wYWNpdHkiLDIpO3ZhciBJcD1jbGFzcyBleHRlbmRzIFBue2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLm9mZnNldD0zLHRoaXMubWluQW5nbGU9MCx0aGlzLm1pblNwYWNpbmc9NCx0aGlzLm1heENvbGxpc2lvbk9mZnNldD01MCx0aGlzLmF2b2lkQ29sbGlzaW9ucz0hMH19O3koW3FyKG5vKV0sSXAucHJvdG90eXBlLCJvZmZzZXQiLDIpLHkoW3FyKGxvKV0sSXAucHJvdG90eXBlLCJtaW5BbmdsZSIsMikseShbcXIobm8pXSxJcC5wcm90b3R5cGUsIm1pblNwYWNpbmciLDIpLHkoW3FyKG5vKV0sSXAucHJvdG90eXBlLCJtYXhDb2xsaXNpb25PZmZzZXQiLDIpLHkoW3FyKHRvKV0sSXAucHJvdG90eXBlLCJhdm9pZENvbGxpc2lvbnMiLDIpO3ZhciBOcD1jbGFzcyBleHRlbmRzIFBue2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnBvc2l0aW9uT2Zmc2V0PTAsdGhpcy5wb3NpdGlvblJhdGlvPS41fX07eShbcXIocm8pXSxOcC5wcm90b3R5cGUsInBvc2l0aW9uT2Zmc2V0IiwyKSx5KFtxcihhbyldLE5wLnByb3RvdHlwZSwicG9zaXRpb25SYXRpbyIsMik7dmFyIEdwPWNsYXNzIGV4dGVuZHMgZnR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMubGVuZ3RoPTEwLHRoaXMuc3Ryb2tlV2lkdGg9MX19O3koW3FyKFNvLHtvcHRpb25hbDohMH0pXSxHcC5wcm90b3R5cGUsImNvbG9ycyIsMikseShbcXIobm8pXSxHcC5wcm90b3R5cGUsImxlbmd0aCIsMikseShbcXIobm8pXSxHcC5wcm90b3R5cGUsInN0cm9rZVdpZHRoIiwyKTt2YXIga3A9Y2xhc3MgZXh0ZW5kcyBuaHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5maWxscz1PYmplY3QudmFsdWVzKFp0KSx0aGlzLnN0cm9rZXM9T2JqZWN0LnZhbHVlcyhRdCksdGhpcy5maWxsT3BhY2l0eT0xLHRoaXMuc3Ryb2tlT3BhY2l0eT0xLHRoaXMubGluZURhc2g9WzBdLHRoaXMubGluZURhc2hPZmZzZXQ9MCx0aGlzLnJvdGF0aW9uPTAsdGhpcy5vdXRlclJhZGl1c09mZnNldD0wLHRoaXMub3V0ZXJSYWRpdXNSYXRpbz0xLHRoaXMuc3Ryb2tlV2lkdGg9MSx0aGlzLnNlY3RvclNwYWNpbmc9dm9pZCAwLHRoaXMuaW5uZXJMYWJlbHM9bmV3IHZ0KExwKSx0aGlzLnRpdGxlPW5ldyBNcCx0aGlzLmlubmVyQ2lyY2xlPW5ldyBGcCx0aGlzLnNoYWRvdz1uZXcgWWgsdGhpcy5jYWxsb3V0TGFiZWw9bmV3IElwLHRoaXMuc2VjdG9yTGFiZWw9bmV3IE5wLHRoaXMuY2FsbG91dExpbmU9bmV3IEdwLHRoaXMudG9vbHRpcD1uZXcgWmgsdGhpcy5fX0JBQ0tHUk9VTkRfQ09MT1JfRE9fTk9UX1VTRT12b2lkIDB9fTt5KFtxcihzbyldLGtwLnByb3RvdHlwZSwiYW5nbGVLZXkiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxrcC5wcm90b3R5cGUsImFuZ2xlTmFtZSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLGtwLnByb3RvdHlwZSwicmFkaXVzS2V5IiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sa3AucHJvdG90eXBlLCJyYWRpdXNOYW1lIiwyKSx5KFtxcihubyx7b3B0aW9uYWw6ITB9KV0sa3AucHJvdG90eXBlLCJyYWRpdXNNaW4iLDIpLHkoW3FyKG5vLHtvcHRpb25hbDohMH0pXSxrcC5wcm90b3R5cGUsInJhZGl1c01heCIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLGtwLnByb3RvdHlwZSwiY2FsbG91dExhYmVsS2V5IiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sa3AucHJvdG90eXBlLCJjYWxsb3V0TGFiZWxOYW1lIiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sa3AucHJvdG90eXBlLCJzZWN0b3JMYWJlbEtleSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLGtwLnByb3RvdHlwZSwic2VjdG9yTGFiZWxOYW1lIiwyKSx5KFtxcihzbyx7b3B0aW9uYWw6ITB9KV0sa3AucHJvdG90eXBlLCJsZWdlbmRJdGVtS2V5IiwyKSx5KFtxcihTbyldLGtwLnByb3RvdHlwZSwiZmlsbHMiLDIpLHkoW3FyKFNvKV0sa3AucHJvdG90eXBlLCJzdHJva2VzIiwyKSx5KFtxcihhbyldLGtwLnByb3RvdHlwZSwiZmlsbE9wYWNpdHkiLDIpLHkoW3FyKGFvKV0sa3AucHJvdG90eXBlLCJzdHJva2VPcGFjaXR5IiwyKSx5KFtxcihPbyldLGtwLnByb3RvdHlwZSwibGluZURhc2giLDIpLHkoW3FyKG5vKV0sa3AucHJvdG90eXBlLCJsaW5lRGFzaE9mZnNldCIsMikseShbcXIoaW8se29wdGlvbmFsOiEwfSldLGtwLnByb3RvdHlwZSwiZm9ybWF0dGVyIiwyKSx5KFtxcihsbyldLGtwLnByb3RvdHlwZSwicm90YXRpb24iLDIpLHkoW3FyKHJvKV0sa3AucHJvdG90eXBlLCJvdXRlclJhZGl1c09mZnNldCIsMikseShbcXIoYW8pXSxrcC5wcm90b3R5cGUsIm91dGVyUmFkaXVzUmF0aW8iLDIpLHkoW0dzKCJVc2UgYSBEb251dCBTZXJpZXMgaW5zdGVhZCIpLHFyKHJvLHtvcHRpb25hbDohMH0pXSxrcC5wcm90b3R5cGUsImlubmVyUmFkaXVzT2Zmc2V0IiwyKSx5KFtHcygiVXNlIGEgRG9udXQgU2VyaWVzIGluc3RlYWQiKSxxcihhbyx7b3B0aW9uYWw6ITB9KV0sa3AucHJvdG90eXBlLCJpbm5lclJhZGl1c1JhdGlvIiwyKSx5KFtxcihubyldLGtwLnByb3RvdHlwZSwic3Ryb2tlV2lkdGgiLDIpLHkoW3FyKG5vLHtvcHRpb25hbDohMH0pXSxrcC5wcm90b3R5cGUsInNlY3RvclNwYWNpbmciLDIpLHkoW3FyKHhvKV0sa3AucHJvdG90eXBlLCJpbm5lckxhYmVscyIsMikseShbcXIoZW8pXSxrcC5wcm90b3R5cGUsInRpdGxlIiwyKSx5KFtxcihlbyldLGtwLnByb3RvdHlwZSwiaW5uZXJDaXJjbGUiLDIpLHkoW3FyKGVvKV0sa3AucHJvdG90eXBlLCJzaGFkb3ciLDIpLHkoW3FyKGVvKV0sa3AucHJvdG90eXBlLCJjYWxsb3V0TGFiZWwiLDIpLHkoW3FyKGVvKV0sa3AucHJvdG90eXBlLCJzZWN0b3JMYWJlbCIsMikseShbcXIoZW8pXSxrcC5wcm90b3R5cGUsImNhbGxvdXRMaW5lIiwyKSx5KFtxcihlbyldLGtwLnByb3RvdHlwZSwidG9vbHRpcCIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLGtwLnByb3RvdHlwZSwiX19CQUNLR1JPVU5EX0NPTE9SX0RPX05PVF9VU0UiLDIpO3ZhciBfcD1jbGFzcyBleHRlbmRzIFVje2NvbnN0cnVjdG9yKGUsdCxpLHMpe3N1cGVyKGUsdCxpLHMpLHRoaXMuYW5nbGVLZXk9cy5wcm9wZXJ0aWVzLmFuZ2xlS2V5LHRoaXMucmFkaXVzS2V5PXMucHJvcGVydGllcy5yYWRpdXNLZXksdGhpcy5jYWxsb3V0TGFiZWxLZXk9cy5wcm9wZXJ0aWVzLmNhbGxvdXRMYWJlbEtleSx0aGlzLnNlY3RvckxhYmVsS2V5PXMucHJvcGVydGllcy5zZWN0b3JMYWJlbEtleX19LFZwPWNsYXNzIGV4dGVuZHMgeHB7Y29uc3RydWN0b3IoZSl7c3VwZXIoe21vZHVsZUN0eDplLHVzZUxhYmVsTGF5ZXI6ITAsYW5pbWF0aW9uUmVzZXRGbnM6e2l0ZW06UnAsbGFiZWw6emh9fSksdGhpcy5wcm9wZXJ0aWVzPW5ldyBrcCx0aGlzLnByZXZpb3VzUmFkaXVzU2NhbGU9bmV3IHZoLHRoaXMucmFkaXVzU2NhbGU9bmV3IHZoLHRoaXMuYmFja2dyb3VuZEdyb3VwPXRoaXMucm9vdEdyb3VwLmFwcGVuZENoaWxkKG5ldyBPbih7bmFtZTp0aGlzLmlkKyItYmFja2dyb3VuZCIsbGF5ZXI6ITAsekluZGV4OjB9KSksdGhpcy56ZXJvc3VtUmluZ3NHcm91cD10aGlzLmJhY2tncm91bmRHcm91cC5hcHBlbmRDaGlsZChuZXcgT24oe25hbWU6dGhpcy5pZCsiLXplcm9zdW1SaW5ncyJ9KSksdGhpcy56ZXJvc3VtT3V0ZXJSaW5nPXRoaXMuemVyb3N1bVJpbmdzR3JvdXAuYXBwZW5kQ2hpbGQobmV3IFBkKSx0aGlzLnplcm9zdW1Jbm5lclJpbmc9dGhpcy56ZXJvc3VtUmluZ3NHcm91cC5hcHBlbmRDaGlsZChuZXcgUGQpLHRoaXMuaW5uZXJDaXJjbGVHcm91cD10aGlzLmJhY2tncm91bmRHcm91cC5hcHBlbmRDaGlsZChuZXcgT24oe25hbWU6dGhpcy5pZCsiLWlubmVyQ2lyY2xlIn0pKSx0aGlzLm5vZGVEYXRhPVtdLHRoaXMuc2VyaWVzSXRlbUVuYWJsZWQ9W10sdGhpcy5zdXJyb3VuZGluZ1JhZGl1cz12b2lkIDAsdGhpcy5Ob2RlQ2xpY2tFdmVudD1fcCx0aGlzLmFuZ2xlU2NhbGU9bmV3IHZoLHRoaXMuYW5nbGVTY2FsZS5kb21haW49WzAsMV0sdGhpcy5hbmdsZVNjYWxlLnJhbmdlPVstTWF0aC5QSSxNYXRoLlBJXS5tYXAoZT0+ZStNYXRoLlBJLzIpO2NvbnN0IHQ9bmV3IE9uKHtuYW1lOiJwaWVDYWxsb3V0TGFiZWxzIn0pLGk9bmV3IE9uKHtuYW1lOiJwaWVTZWN0b3JMYWJlbHMifSkscz1uZXcgT24oe25hbWU6ImlubmVyTGFiZWxzIn0pO3RoaXMubGFiZWxHcm91cC5hcHBlbmQodCksdGhpcy5sYWJlbEdyb3VwLmFwcGVuZChpKSx0aGlzLmxhYmVsR3JvdXAuYXBwZW5kKHMpLHRoaXMuY2FsbG91dExhYmVsU2VsZWN0aW9uPVZhLnNlbGVjdCh0LE9uKSx0aGlzLnNlY3RvckxhYmVsU2VsZWN0aW9uPVZhLnNlbGVjdChpLGVuKSx0aGlzLmlubmVyTGFiZWxzU2VsZWN0aW9uPVZhLnNlbGVjdChzLGVuKSx0aGlzLmlubmVyQ2lyY2xlU2VsZWN0aW9uPVZhLnNlbGVjdCh0aGlzLmlubmVyQ2lyY2xlR3JvdXAsUGQpO2Zvcihjb25zdCBlIG9mW3RoaXMuemVyb3N1bUlubmVyUmluZyx0aGlzLnplcm9zdW1PdXRlclJpbmddKWUuZmlsbE9wYWNpdHk9MCxlLnN0cm9rZT10aGlzLnByb3BlcnRpZXMuY2FsbG91dExhYmVsLmNvbG9yLGUuc3Ryb2tlV2lkdGg9MSxlLnN0cm9rZU9wYWNpdHk9MX1hZGRDaGFydEV2ZW50TGlzdGVuZXJzKCl7dmFyIGU7dGhpcy5kZXN0cm95Rm5zLnB1c2gobnVsbD09KGU9dGhpcy5jdHguY2hhcnRFdmVudE1hbmFnZXIpP3ZvaWQgMDplLmFkZExpc3RlbmVyKCJsZWdlbmQtaXRlbS1jbGljayIsZT0+dGhpcy5vbkxlZ2VuZEl0ZW1DbGljayhlKSkpfXZpc2libGVDaGFuZ2VkKCl7dGhpcy5wcm9jZXNzU2VyaWVzSXRlbUVuYWJsZWQoKX1nZXQgdmlzaWJsZSgpe3JldHVybiB0aGlzLnNlcmllc0l0ZW1FbmFibGVkLmxlbmd0aD90aGlzLnNlcmllc0l0ZW1FbmFibGVkLnNvbWUoZT0+ZSk6c3VwZXIudmlzaWJsZX1wcm9jZXNzU2VyaWVzSXRlbUVuYWJsZWQoKXt2YXIgZTtjb25zdHtkYXRhOnQsdmlzaWJsZTppfT10aGlzO3RoaXMuc2VyaWVzSXRlbUVuYWJsZWQ9bnVsbCE9KGU9bnVsbD09dD92b2lkIDA6dC5tYXAoKCk9PmkpKT9lOltdfW5vZGVGYWN0b3J5KCl7cmV0dXJuIG5ldyBtcH1nZXRTZXJpZXNEb21haW4oZSl7cmV0dXJuIngiPT09ZT90aGlzLmFuZ2xlU2NhbGUuZG9tYWluOnRoaXMucmFkaXVzU2NhbGUuZG9tYWlufXByb2Nlc3NEYXRhKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7dmFyIHQsaSxzLHIsbztpZihudWxsPT10aGlzLmRhdGF8fCF0aGlzLnByb3BlcnRpZXMuaXNWYWxpZCgpKXJldHVybjtsZXR7ZGF0YTpufT10aGlzO2NvbnN0e3Nlcmllc0l0ZW1FbmFibGVkOmF9PXRoaXMse2FuZ2xlS2V5OmwscmFkaXVzS2V5OmQsY2FsbG91dExhYmVsS2V5OmMsc2VjdG9yTGFiZWxLZXk6aCxsZWdlbmRJdGVtS2V5OnV9PXRoaXMucHJvcGVydGllcyxwPSF0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLmlzU2tpcHBlZCgpLGc9W10sdj1bXTt1P2cucHVzaChHYyh0aGlzLHUsITEse2lkOiJsZWdlbmRJdGVtS2V5In0pKTpjP2cucHVzaChHYyh0aGlzLGMsITEse2lkOiJjYWxsb3V0TGFiZWxLZXkifSkpOmgmJmcucHVzaChHYyh0aGlzLGgsITEse2lkOiJzZWN0b3JMYWJlbEtleSJ9KSksZCYmdi5wdXNoKF9jKHRoaXMsZCx7aWQ6InJhZGl1c1ZhbHVlIixtaW46bnVsbCE9KHQ9dGhpcy5wcm9wZXJ0aWVzLnJhZGl1c01pbik/dDowLG1heDp0aGlzLnByb3BlcnRpZXMucmFkaXVzTWF4fSksa2ModGhpcyxkLCEwLHtpZDoicmFkaXVzUmF3In0pLFRjKHRoaXMse2lkOiJyYWRpdXNWYWx1ZSJ9LFswLDFdLDEsbnVsbCE9KGk9dGhpcy5wcm9wZXJ0aWVzLnJhZGl1c01pbik/aTowLHRoaXMucHJvcGVydGllcy5yYWRpdXNNYXgpKSxjJiZ2LnB1c2goa2ModGhpcyxjLCExLHtpZDoiY2FsbG91dExhYmVsVmFsdWUifSkpLGgmJnYucHVzaChrYyh0aGlzLGgsITEse2lkOiJzZWN0b3JMYWJlbFZhbHVlIn0pKSx1JiZ2LnB1c2goa2ModGhpcyx1LCExLHtpZDoibGVnZW5kSXRlbVZhbHVlIn0pKSxwJiZ0aGlzLnByb2Nlc3NlZERhdGEmJmcubGVuZ3RoPjAmJnYucHVzaChNYyh0aGlzLnByb2Nlc3NlZERhdGEpKSx2LnB1c2goRGModGhpcykpLG49bi5tYXAoKGUsdCk9PmFbdF0/ZTpmKG0oe30sZSkse1tsXTowfSkpLHlpZWxkIHRoaXMucmVxdWVzdERhdGFNb2RlbChlLG4se3Byb3BzOlsuLi5nLEhjKHRoaXMsbCwhMCx7aWQ6ImFuZ2xlVmFsdWUiLG9ubHlQb3NpdGl2ZTohMH0pLGtjKHRoaXMsbCwhMCx7aWQ6ImFuZ2xlUmF3In0pLFRjKHRoaXMse2lkOiJhbmdsZVZhbHVlIn0sWzAsMV0sMCwwKSwuLi52XX0pO2Zvcihjb25zdCBlIG9mIG51bGwhPShvPW51bGw9PShyPW51bGw9PShzPXRoaXMucHJvY2Vzc2VkRGF0YSk/dm9pZCAwOnMuZGVmcyk/dm9pZCAwOnIudmFsdWVzKT9vOltdKXtjb25zdHtpZDp0LG1pc3Npbmc6aSxwcm9wZXJ0eTpzfT1lLHI9VmwodGhpcyxpKTsiYW5nbGVSYXciIT09dCYmcj4wJiZMLndhcm5PbmNlKGBubyB2YWx1ZSB3YXMgZm91bmQgZm9yIHRoZSBrZXkgJyR7U3RyaW5nKHMpfScgb24gJHtyfSBkYXRhIGVsZW1lbnQke3I+MT8icyI6IiJ9YCl9dGhpcy5hbmltYXRpb25TdGF0ZS50cmFuc2l0aW9uKCJ1cGRhdGVEYXRhIil9KSl9bWF5YmVSZWZyZXNoTm9kZURhdGEoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2lmKCF0aGlzLm5vZGVEYXRhUmVmcmVzaClyZXR1cm47Y29uc3Rbe25vZGVEYXRhOmU9W119PXt9XT15aWVsZCB0aGlzLmNyZWF0ZU5vZGVEYXRhKCk7dGhpcy5ub2RlRGF0YT1lLHRoaXMubm9kZURhdGFSZWZyZXNoPSExfSkpfWdldFByb2Nlc3NlZERhdGFJbmRleGVzKGUpe3JldHVybnthbmdsZUlkeDplLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsImFuZ2xlVmFsdWUiKS5pbmRleCxyYWRpdXNJZHg6dGhpcy5wcm9wZXJ0aWVzLnJhZGl1c0tleT9lLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsInJhZGl1c1ZhbHVlIikuaW5kZXg6LTEsY2FsbG91dExhYmVsSWR4OnRoaXMucHJvcGVydGllcy5jYWxsb3V0TGFiZWxLZXk/ZS5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGV4QnlJZCh0aGlzLCJjYWxsb3V0TGFiZWxWYWx1ZSIpLmluZGV4Oi0xLHNlY3RvckxhYmVsSWR4OnRoaXMucHJvcGVydGllcy5zZWN0b3JMYWJlbEtleT9lLnJlc29sdmVQcm9jZXNzZWREYXRhSW5kZXhCeUlkKHRoaXMsInNlY3RvckxhYmVsVmFsdWUiKS5pbmRleDotMSxsZWdlbmRJdGVtSWR4OnRoaXMucHJvcGVydGllcy5sZWdlbmRJdGVtS2V5P2UucmVzb2x2ZVByb2Nlc3NlZERhdGFJbmRleEJ5SWQodGhpcywibGVnZW5kSXRlbVZhbHVlIikuaW5kZXg6LTF9fWNyZWF0ZU5vZGVEYXRhKCl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHtpZDplLHByb2Nlc3NlZERhdGE6dCxkYXRhTW9kZWw6aSxhbmdsZVNjYWxlOnN9PXRoaXMse3JvdGF0aW9uOnJ9PXRoaXMucHJvcGVydGllcztpZighdHx8IWl8fCJ1bmdyb3VwZWQiIT09dC50eXBlKXJldHVybltdO2NvbnN0e2FuZ2xlSWR4Om8scmFkaXVzSWR4Om4sY2FsbG91dExhYmVsSWR4OmEsc2VjdG9yTGFiZWxJZHg6bCxsZWdlbmRJdGVtSWR4OmR9PXRoaXMuZ2V0UHJvY2Vzc2VkRGF0YUluZGV4ZXMoaSk7bGV0IGM9MCxoPTA7Y29uc3QgdT10LmRhdGEubWFwKChlLHQpPT57dmFyIGk7Y29uc3R7ZGF0dW06dSx2YWx1ZXM6cH09ZSxnPXBbb10sZj1zLmNvbnZlcnQoYykrenIocik7Yz1nLGgrPWc7Y29uc3Qgdj1zLmNvbnZlcnQoYykrenIociksQz1NYXRoLmFicyh2LWYpLHk9ZitDLzIsUz1wW28rMV0sdz1uPj0wJiZudWxsIT0oaT1wW25dKT9pOjEsYj1uPj0wP3BbbisxXTp2b2lkIDAsRT1kPj0wP3BbZF06dm9pZCAwLFI9dGhpcy5nZXRMYWJlbHModSx5LEMsITAscFthXSxwW2xdLEUpLHg9dGhpcy5nZXRTZWN0b3JGb3JtYXQodSx0LCExKTtyZXR1cm4gbSh7aXRlbUlkOnQsc2VyaWVzOnRoaXMsZGF0dW06dSxpbmRleDp0LGFuZ2xlVmFsdWU6UyxtaWRBbmdsZTp5LG1pZENvczpNYXRoLmNvcyh5KSxtaWRTaW46TWF0aC5zaW4oeSksc3RhcnRBbmdsZTpmLGVuZEFuZ2xlOnYsc2VjdG9yRm9ybWF0OngscmFkaXVzVmFsdWU6YixyYWRpdXM6dyxpbm5lclJhZGl1czpNYXRoLm1heCh0aGlzLnJhZGl1c1NjYWxlLmNvbnZlcnQoMCksMCksb3V0ZXJSYWRpdXM6TWF0aC5tYXgodGhpcy5yYWRpdXNTY2FsZS5jb252ZXJ0KHcpLDApLGxlZ2VuZEl0ZW1WYWx1ZTpFfSxSKX0pO3RoaXMuemVyb3N1bU91dGVyUmluZy52aXNpYmxlPTA9PT1oO2NvbnN0e2lubmVyUmFkaXVzUmF0aW86cD0xfT10aGlzLnByb3BlcnRpZXM7cmV0dXJuIHRoaXMuemVyb3N1bUlubmVyUmluZy52aXNpYmxlPTA9PT1oJiYxIT09cCYmcD4wLFt7aXRlbUlkOmUsbm9kZURhdGE6dSxsYWJlbERhdGE6dX1dfSkpfWdldExhYmVscyhlLHQsaSxzLHIsbyxuKXtjb25zdHtjYWxsb3V0TGFiZWw6YSxzZWN0b3JMYWJlbDpsLGxlZ2VuZEl0ZW1LZXk6ZH09dGhpcy5wcm9wZXJ0aWVzLGM9IXN8fGEuZW5hYmxlZD90aGlzLnByb3BlcnRpZXMuY2FsbG91dExhYmVsS2V5OnZvaWQgMCxoPSFzfHxsLmVuYWJsZWQ/dGhpcy5wcm9wZXJ0aWVzLnNlY3RvckxhYmVsS2V5OnZvaWQgMDtpZighYyYmIWgmJiFkKXJldHVybnt9O2NvbnN0IHU9e2RhdHVtOmUsYW5nbGVLZXk6dGhpcy5wcm9wZXJ0aWVzLmFuZ2xlS2V5LGFuZ2xlTmFtZTp0aGlzLnByb3BlcnRpZXMuYW5nbGVOYW1lLHJhZGl1c0tleTp0aGlzLnByb3BlcnRpZXMucmFkaXVzS2V5LHJhZGl1c05hbWU6dGhpcy5wcm9wZXJ0aWVzLnJhZGl1c05hbWUsY2FsbG91dExhYmVsS2V5OnRoaXMucHJvcGVydGllcy5jYWxsb3V0TGFiZWxLZXksY2FsbG91dExhYmVsTmFtZTp0aGlzLnByb3BlcnRpZXMuY2FsbG91dExhYmVsTmFtZSxzZWN0b3JMYWJlbEtleTp0aGlzLnByb3BlcnRpZXMuc2VjdG9yTGFiZWxLZXksc2VjdG9yTGFiZWxOYW1lOnRoaXMucHJvcGVydGllcy5zZWN0b3JMYWJlbE5hbWUsbGVnZW5kSXRlbUtleTp0aGlzLnByb3BlcnRpZXMubGVnZW5kSXRlbUtleX0scD17fTtyZXR1cm4gYyYmaT56cihhLm1pbkFuZ2xlKSYmKHAuY2FsbG91dExhYmVsPWYobSh7fSx0aGlzLmdldFRleHRBbGlnbm1lbnQodCkpLHt0ZXh0OnRoaXMuZ2V0TGFiZWxUZXh0KGEsZihtKHt9LHUpLHt2YWx1ZTpyfSkpLGhpZGRlbjohMSxjb2xsaXNpb25UZXh0QWxpZ246dm9pZCAwLGNvbGxpc2lvbk9mZnNldFk6MCxib3g6dm9pZCAwfSkpLGgmJihwLnNlY3RvckxhYmVsPXt0ZXh0OnRoaXMuZ2V0TGFiZWxUZXh0KGwsZihtKHt9LHUpLHt2YWx1ZTpvfSkpfSksbnVsbCE9ZCYmbnVsbCE9biYmKHAubGVnZW5kSXRlbT17a2V5OmQsdGV4dDpufSkscH1nZXRUZXh0QWxpZ25tZW50KGUpe2NvbnN0IHQ9W3t0ZXh0QWxpZ246ImNlbnRlciIsdGV4dEJhc2VsaW5lOiJib3R0b20ifSx7dGV4dEFsaWduOiJsZWZ0Iix0ZXh0QmFzZWxpbmU6Im1pZGRsZSJ9LHt0ZXh0QWxpZ246ImNlbnRlciIsdGV4dEJhc2VsaW5lOiJoYW5naW5nIn0se3RleHRBbGlnbjoicmlnaHQiLHRleHRCYXNlbGluZToibWlkZGxlIn1dLGk9VXIoZSktIC0zKk1hdGguUEkvNDtyZXR1cm4gdFtlcihNYXRoLmZsb29yKGkvKE1hdGguUEkvMikpLHQubGVuZ3RoKV19Z2V0U2VjdG9yRm9ybWF0KGUsdCxpKXt2YXIgcyxyLG8sbixhO2NvbnN0e2NhbGxiYWNrQ2FjaGU6bCxoaWdobGlnaHRNYW5hZ2VyOmR9PXRoaXMuY3R4LHthbmdsZUtleTpjLHJhZGl1c0tleTpoLGZpbGxzOnUsc3Ryb2tlczpwLGZvcm1hdHRlcjpnLHNlY3RvclNwYWNpbmc6bSxfX0JBQ0tHUk9VTkRfQ09MT1JfRE9fTk9UX1VTRTpmfT10aGlzLnByb3BlcnRpZXMsdj1kLmdldEFjdGl2ZUhpZ2hsaWdodCgpLEM9aSYmKG51bGw9PXY/dm9pZCAwOnYuc2VyaWVzKT09PXRoaXMmJnQ9PT12Lml0ZW1JZCx7ZmlsbDp5LGZpbGxPcGFjaXR5OlMsc3Ryb2tlOncsc3Ryb2tlV2lkdGg6YixzdHJva2VPcGFjaXR5OkV9PVhlKEMmJnRoaXMucHJvcGVydGllcy5oaWdobGlnaHRTdHlsZS5pdGVtLHtmaWxsOnUubGVuZ3RoPjA/dVt0JXUubGVuZ3RoXTp2b2lkIDAsZmlsbE9wYWNpdHk6dGhpcy5wcm9wZXJ0aWVzLmZpbGxPcGFjaXR5LHN0cm9rZTpudWxsIT1tP3AubGVuZ3RoPjA/cFt0JXAubGVuZ3RoXTp2b2lkIDA6cC5sZW5ndGg+MD9wW3QlcC5sZW5ndGhdOmYsc3Ryb2tlV2lkdGg6dGhpcy5nZXRTdHJva2VXaWR0aCh0aGlzLnByb3BlcnRpZXMuc3Ryb2tlV2lkdGgpLHN0cm9rZU9wYWNpdHk6dGhpcy5nZXRPcGFjaXR5KCl9KTtsZXQgUjtyZXR1cm4gZyYmKFI9bC5jYWxsKGcse2RhdHVtOmUsYW5nbGVLZXk6YyxyYWRpdXNLZXk6aCxmaWxsOnksc3Ryb2tlOncsZmlsbHM6dSxzdHJva2VzOnAsc3Ryb2tlV2lkdGg6YixoaWdobGlnaHRlZDpDLHNlcmllc0lkOnRoaXMuaWR9KSkse2ZpbGw6bnVsbCE9KHM9bnVsbD09Uj92b2lkIDA6Ui5maWxsKT9zOnksZmlsbE9wYWNpdHk6bnVsbCE9KHI9bnVsbD09Uj92b2lkIDA6Ui5maWxsT3BhY2l0eSk/cjpTLHN0cm9rZTpudWxsIT0obz1udWxsPT1SP3ZvaWQgMDpSLnN0cm9rZSk/bzp3LHN0cm9rZVdpZHRoOm51bGwhPShuPW51bGw9PVI/dm9pZCAwOlIuc3Ryb2tlV2lkdGgpP246YixzdHJva2VPcGFjaXR5Om51bGwhPShhPW51bGw9PVI/dm9pZCAwOlIuc3Ryb2tlT3BhY2l0eSk/YTpFfX1nZXRJbm5lclJhZGl1cygpe2NvbnN0e3JhZGl1czplfT10aGlzLHtpbm5lclJhZGl1c1JhdGlvOnQ9MSxpbm5lclJhZGl1c09mZnNldDppPTB9PXRoaXMucHJvcGVydGllcyxzPWUqdCtpO3JldHVybiBzPT09ZXx8czwwPzA6c31nZXRPdXRlclJhZGl1cygpe3JldHVybiBNYXRoLm1heCh0aGlzLnJhZGl1cyp0aGlzLnByb3BlcnRpZXMub3V0ZXJSYWRpdXNSYXRpbyt0aGlzLnByb3BlcnRpZXMub3V0ZXJSYWRpdXNPZmZzZXQsMCl9dXBkYXRlUmFkaXVzU2NhbGUoZSl7Y29uc3QgdD1bdGhpcy5nZXRJbm5lclJhZGl1cygpLHRoaXMuZ2V0T3V0ZXJSYWRpdXMoKV07dGhpcy5yYWRpdXNTY2FsZS5yYW5nZT10LGUmJih0aGlzLnByZXZpb3VzUmFkaXVzU2NhbGUucmFuZ2U9dCksdGhpcy5ub2RlRGF0YT10aGlzLm5vZGVEYXRhLm1hcChlPT57dmFyIHQ9ZSx7cmFkaXVzOml9PXQscz12KHQsWyJyYWRpdXMiXSk7cmV0dXJuIGYobSh7fSxzKSx7cmFkaXVzOmksaW5uZXJSYWRpdXM6TWF0aC5tYXgodGhpcy5yYWRpdXNTY2FsZS5jb252ZXJ0KDApLDApLG91dGVyUmFkaXVzOk1hdGgubWF4KHRoaXMucmFkaXVzU2NhbGUuY29udmVydChpKSwwKX0pfSl9Z2V0VGl0bGVUcmFuc2xhdGlvblkoKXt2YXIgZSx0O2NvbnN0IGk9TWF0aC5tYXgoMCx0aGlzLnJhZGl1c1NjYWxlLnJhbmdlWzFdKTtpZigwPT09aSlyZXR1cm4gTmFOO3JldHVybi1pLSgyKyhudWxsIT0odD1udWxsPT0oZT10aGlzLnByb3BlcnRpZXMudGl0bGUpP3ZvaWQgMDplLnNwYWNpbmcpP3Q6MCkpLU1hdGgubWF4KDAsLWkpfXVwZGF0ZShlKXtyZXR1cm4gdyh0aGlzLGFyZ3VtZW50cywoZnVuY3Rpb24qKHtzZXJpZXNSZWN0OmV9KXtjb25zdHt0aXRsZTp0fT10aGlzLnByb3BlcnRpZXMsaT17c2VyaWVzUmVjdFdpZHRoOm51bGw9PWU/dm9pZCAwOmUud2lkdGgsc2VyaWVzUmVjdEhlaWdodDpudWxsPT1lP3ZvaWQgMDplLmhlaWdodH0scz1udWxsIT15dCh0aGlzLm5vZGVEYXRhRGVwZW5kZW5jaWVzLGkpO2lmKHMmJih0aGlzLl9ub2RlRGF0YURlcGVuZGVuY2llcz1pKSx5aWVsZCB0aGlzLm1heWJlUmVmcmVzaE5vZGVEYXRhKCksdGhpcy51cGRhdGVUaXRsZU5vZGVzKCksdGhpcy51cGRhdGVSYWRpdXNTY2FsZShzKSx0aGlzLmNvbnRlbnRHcm91cC50cmFuc2xhdGlvblg9dGhpcy5jZW50ZXJYLHRoaXMuY29udGVudEdyb3VwLnRyYW5zbGF0aW9uWT10aGlzLmNlbnRlclksdGhpcy5oaWdobGlnaHRHcm91cC50cmFuc2xhdGlvblg9dGhpcy5jZW50ZXJYLHRoaXMuaGlnaGxpZ2h0R3JvdXAudHJhbnNsYXRpb25ZPXRoaXMuY2VudGVyWSx0aGlzLmJhY2tncm91bmRHcm91cC50cmFuc2xhdGlvblg9dGhpcy5jZW50ZXJYLHRoaXMuYmFja2dyb3VuZEdyb3VwLnRyYW5zbGF0aW9uWT10aGlzLmNlbnRlclksdGhpcy5sYWJlbEdyb3VwJiYodGhpcy5sYWJlbEdyb3VwLnRyYW5zbGF0aW9uWD10aGlzLmNlbnRlclgsdGhpcy5sYWJlbEdyb3VwLnRyYW5zbGF0aW9uWT10aGlzLmNlbnRlclkpLHQpe2NvbnN0IGU9dGhpcy5nZXRUaXRsZVRyYW5zbGF0aW9uWSgpLGk9dC5ub2RlLmNvbXB1dGVCQm94KCk7dC5ub2RlLnZpc2libGU9dC5lbmFibGVkJiZpc0Zpbml0ZShlKSYmIXRoaXMuYmJveEludGVyc2VjdHNTdXJyb3VuZGluZ1NlcmllcyhpLDAsZSksdC5ub2RlLnRyYW5zbGF0aW9uWT1pc0Zpbml0ZShlKT9lOjB9dGhpcy51cGRhdGVOb2RlTWlkUG9pbnQoKSx5aWVsZCB0aGlzLnVwZGF0ZVNlbGVjdGlvbnMoKSx5aWVsZCB0aGlzLnVwZGF0ZU5vZGVzKGUpfSkpfXVwZGF0ZVRpdGxlTm9kZXMoKXt2YXIgZSx0O2NvbnN0e29sZFRpdGxlOml9PXRoaXMse3RpdGxlOnN9PXRoaXMucHJvcGVydGllcztpIT09cyYmKGkmJihudWxsPT0oZT10aGlzLmxhYmVsR3JvdXApfHxlLnJlbW92ZUNoaWxkKGkubm9kZSkpLHMmJihzLm5vZGUudGV4dEJhc2VsaW5lPSJib3R0b20iLG51bGw9PSh0PXRoaXMubGFiZWxHcm91cCl8fHQuYXBwZW5kQ2hpbGQocy5ub2RlKSksdGhpcy5vbGRUaXRsZT1zKX11cGRhdGVOb2RlTWlkUG9pbnQoKXt0aGlzLm5vZGVEYXRhLmZvckVhY2goZT0+e2NvbnN0IHQ9ZS5pbm5lclJhZGl1cysoZS5vdXRlclJhZGl1cy1lLmlubmVyUmFkaXVzKS8yO2UubWlkUG9pbnQ9e3g6ZS5taWRDb3MqTWF0aC5tYXgoMCx0KSx5OmUubWlkU2luKk1hdGgubWF4KDAsdCl9fSl9dXBkYXRlU2VsZWN0aW9ucygpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy51cGRhdGVHcm91cFNlbGVjdGlvbigpLHRoaXMudXBkYXRlSW5uZXJDaXJjbGVTZWxlY3Rpb24oKX0pKX11cGRhdGVHcm91cFNlbGVjdGlvbigpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7aXRlbVNlbGVjdGlvbjplLGhpZ2hsaWdodFNlbGVjdGlvbjp0LGNhbGxvdXRMYWJlbFNlbGVjdGlvbjppLHNlY3RvckxhYmVsU2VsZWN0aW9uOnMsaW5uZXJMYWJlbHNTZWxlY3Rpb246cn09dGhpcyxvPShlLHQpPT57bGV0IGk9dGhpcy5ub2RlRGF0YTt0JiYoaT1pLm1hcChlPT5mKG0oe30sZSkse3NlY3RvckZvcm1hdDptKHt9LGUuc2VjdG9yRm9ybWF0KX0pKSksZS51cGRhdGUoaSx2b2lkIDAsZT0+dGhpcy5nZXREYXR1bUlkKGUpKSx0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLmlzU2tpcHBlZCgpJiZlLmNsZWFudXAoKX07byhlLCExKSxvKHQsITApLGkudXBkYXRlKHRoaXMubm9kZURhdGEsZT0+e2NvbnN0IHQ9bmV3IEJhO3QudGFnPTEsdC5wb2ludGVyRXZlbnRzPTEsZS5hcHBlbmRDaGlsZCh0KTtjb25zdCBpPW5ldyBlbjtpLnRhZz0yLGkucG9pbnRlckV2ZW50cz0xLGUuYXBwZW5kQ2hpbGQoaSl9KSxzLnVwZGF0ZSh0aGlzLm5vZGVEYXRhLGU9PntlLnBvaW50ZXJFdmVudHM9MX0pLHIudXBkYXRlKHRoaXMucHJvcGVydGllcy5pbm5lckxhYmVscyxlPT57ZS5wb2ludGVyRXZlbnRzPTF9KX0pKX11cGRhdGVJbm5lckNpcmNsZVNlbGVjdGlvbigpe2NvbnN0e2lubmVyQ2lyY2xlOmV9PXRoaXMucHJvcGVydGllcztsZXQgdD0wO2NvbnN0IGk9dGhpcy5nZXRJbm5lclJhZGl1cygpO2lmKGk+MCl7Y29uc3QgZT1NYXRoLm1pbihpLHRoaXMuZ2V0T3V0ZXJSYWRpdXMoKSkscz0xO3Q9TWF0aC5jZWlsKDIqZStzKX1jb25zdCBzPWU/W3tyYWRpdXM6dH1dOltdO3RoaXMuaW5uZXJDaXJjbGVTZWxlY3Rpb24udXBkYXRlKHMpfXVwZGF0ZU5vZGVzKGUpe3JldHVybiB3KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLmN0eC5oaWdobGlnaHRNYW5hZ2VyLmdldEFjdGl2ZUhpZ2hsaWdodCgpLGk9dGhpcy5zZXJpZXNJdGVtRW5hYmxlZC5pbmRleE9mKCEwKT49MDt0aGlzLnJvb3RHcm91cC52aXNpYmxlPWksdGhpcy5iYWNrZ3JvdW5kR3JvdXAudmlzaWJsZT1pLHRoaXMuY29udGVudEdyb3VwLnZpc2libGU9aSx0aGlzLmhpZ2hsaWdodEdyb3VwLnZpc2libGU9aSYmKG51bGw9PXQ/dm9pZCAwOnQuc2VyaWVzKT09PXRoaXMsdGhpcy5sYWJlbEdyb3VwJiYodGhpcy5sYWJlbEdyb3VwLnZpc2libGU9aSksdGhpcy5jb250ZW50R3JvdXAub3BhY2l0eT10aGlzLmdldE9wYWNpdHkoKSx0aGlzLmlubmVyQ2lyY2xlU2VsZWN0aW9uLmVhY2goKGUse3JhZGl1czp0fSk9Pnt2YXIgaSxzO2Uuc2V0UHJvcGVydGllcyh7ZmlsbDpudWxsPT0oaT10aGlzLnByb3BlcnRpZXMuaW5uZXJDaXJjbGUpP3ZvaWQgMDppLmZpbGwsb3BhY2l0eTpudWxsPT0ocz10aGlzLnByb3BlcnRpZXMuaW5uZXJDaXJjbGUpP3ZvaWQgMDpzLmZpbGxPcGFjaXR5LHNpemU6dH0pfSk7Y29uc3Qgcz0oZSx0LGkscyk9Pntjb25zdCByPXRoaXMuZ2V0U2VjdG9yRm9ybWF0KHQuZGF0dW0sdC5pdGVtSWQscyk7dC5zZWN0b3JGb3JtYXQuZmlsbD1yLmZpbGwsdC5zZWN0b3JGb3JtYXQuc3Ryb2tlPXIuc3Ryb2tlO2NvbnN0IG89dGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlci5pc1NraXBwZWQoKTtvJiYoZS5zdGFydEFuZ2xlPXQuc3RhcnRBbmdsZSxlLmVuZEFuZ2xlPXQuZW5kQW5nbGUsZS5pbm5lclJhZGl1cz10LmlubmVyUmFkaXVzLGUub3V0ZXJSYWRpdXM9dC5vdXRlclJhZGl1cyksKHN8fG8pJiYoZS5maWxsPXIuZmlsbCxlLnN0cm9rZT1yLnN0cm9rZSksZS5zdHJva2VXaWR0aD1yLnN0cm9rZVdpZHRoLGUuZmlsbE9wYWNpdHk9ci5maWxsT3BhY2l0eSxlLnN0cm9rZU9wYWNpdHk9dGhpcy5wcm9wZXJ0aWVzLnN0cm9rZU9wYWNpdHksZS5saW5lRGFzaD10aGlzLnByb3BlcnRpZXMubGluZURhc2gsZS5saW5lRGFzaE9mZnNldD10aGlzLnByb3BlcnRpZXMubGluZURhc2hPZmZzZXQsZS5maWxsU2hhZG93PXRoaXMucHJvcGVydGllcy5zaGFkb3csZS5pbnNldD1udWxsIT10aGlzLnByb3BlcnRpZXMuc2VjdG9yU3BhY2luZz8odGhpcy5wcm9wZXJ0aWVzLnNlY3RvclNwYWNpbmcrKG51bGwhPXIuc3Ryb2tlP3Iuc3Ryb2tlV2lkdGg6MCkpLzI6MCxlLmxpbmVKb2luPW51bGwhPXRoaXMucHJvcGVydGllcy5zZWN0b3JTcGFjaW5nPyJtaXRlciI6InJvdW5kIn07dGhpcy5pdGVtU2VsZWN0aW9uLmVhY2goKGUsdCxpKT0+cyhlLHQsMCwhMSkpLHRoaXMuaGlnaGxpZ2h0U2VsZWN0aW9uLmVhY2goKGUsaSxyKT0+e2NvbnN0IG89KG51bGw9PXQ/dm9pZCAwOnQuc2VyaWVzKT09PXRoaXMmJmUuZGF0dW0uaXRlbUlkPT09dC5pdGVtSWQ7cyhlLGksMCwhMCksZS52aXNpYmxlPW99KSx0aGlzLnVwZGF0ZUNhbGxvdXRMaW5lTm9kZXMoKSx0aGlzLnVwZGF0ZUNhbGxvdXRMYWJlbE5vZGVzKGUpLHRoaXMudXBkYXRlU2VjdG9yTGFiZWxOb2RlcygpLHRoaXMudXBkYXRlSW5uZXJMYWJlbE5vZGVzKCksdGhpcy51cGRhdGVaZXJvc3VtUmluZ3MoKSx0aGlzLmFuaW1hdGlvblN0YXRlLnRyYW5zaXRpb24oInVwZGF0ZSIpfSkpfXVwZGF0ZUNhbGxvdXRMaW5lTm9kZXMoKXt2YXIgZTtjb25zdHtjYWxsb3V0TGluZTp0fT10aGlzLnByb3BlcnRpZXMsaT10Lmxlbmd0aCxzPXQuc3Ryb2tlV2lkdGgscj1udWxsIT0oZT10LmNvbG9ycyk/ZTp0aGlzLnByb3BlcnRpZXMuc3Ryb2tlcyx7b2Zmc2V0Om99PXRoaXMucHJvcGVydGllcy5jYWxsb3V0TGFiZWw7dGhpcy5jYWxsb3V0TGFiZWxTZWxlY3Rpb24uc2VsZWN0QnlUYWcoMSkuZm9yRWFjaCgoZSx0KT0+e2NvbnN0IG49ZS5kYXR1bSx7Y2FsbG91dExhYmVsOmEsb3V0ZXJSYWRpdXM6bH09bjtpZigobnVsbD09YT92b2lkIDA6YS50ZXh0KSYmIWEuaGlkZGVuJiYwIT09bCl7ZS52aXNpYmxlPSEwLGUuc3Ryb2tlV2lkdGg9cyxlLnN0cm9rZT1yW3Qlci5sZW5ndGhdLGUuZmlsbD12b2lkIDA7Y29uc3QgZD1uLm1pZENvcypsLGM9bi5taWRTaW4qbDtsZXQgaD1uLm1pZENvcyoobCtpKSx1PW4ubWlkU2luKihsK2kpO2lmKChhLmNvbGxpc2lvblRleHRBbGlnbnx8MCE9PWEuY29sbGlzaW9uT2Zmc2V0WSkmJm51bGwhPWEuYm94KXtjb25zdCBlPWEuYm94O2xldCB0PWgsaT11O2g8ZS54P3Q9ZS54Omg+ZS54K2Uud2lkdGgmJih0PWUueCtlLndpZHRoKSx1PGUueT9pPWUueTp1PmUueStlLmhlaWdodCYmKGk9ZS55K2UuaGVpZ2h0KTtjb25zdCBzPXQtaCxyPWktdSxuPU1hdGguc3FydChNYXRoLnBvdyhzLDIpK01hdGgucG93KHIsMikpLGw9bi1vO2w+MCYmKGgrPXMqbC9uLHUrPXIqbC9uKX1lLngxPWQsZS55MT1jLGUueDI9aCxlLnkyPXV9ZWxzZSBlLnZpc2libGU9ITF9KX1nZXRMYWJlbE92ZXJmbG93KGUsdCxpKXtjb25zdCBzPWkueC10aGlzLmNlbnRlclgscj1pLngraS53aWR0aC10aGlzLmNlbnRlclgsbz1pLnktdGhpcy5jZW50ZXJZLG49aS55K2kuaGVpZ2h0LXRoaXMuY2VudGVyWTtsZXQgYT0xO3QueCsxPHM/YT0odC54K3Qud2lkdGgtcykvdC53aWR0aDp0LngrdC53aWR0aC0xPnImJihhPShyLXQueCkvdC53aWR0aCk7Y29uc3QgbD10LnkrMTxvfHx0LnkrdC5oZWlnaHQtMT5uO3JldHVybnt0ZXh0TGVuZ3RoOjE9PT1hP2UubGVuZ3RoOk1hdGguZmxvb3IoZS5sZW5ndGgqYSktMSxoYXNWZXJ0aWNhbE92ZXJmbG93OmwsaGFzU3Vycm91bmRpbmdTZXJpZXNPdmVyZmxvdzp0aGlzLmJib3hJbnRlcnNlY3RzU3Vycm91bmRpbmdTZXJpZXModCl9fWJib3hJbnRlcnNlY3RzU3Vycm91bmRpbmdTZXJpZXMoZSx0PTAsaT0wKXtjb25zdHtzdXJyb3VuZGluZ1JhZGl1czpzfT10aGlzO2lmKG51bGw9PXMpcmV0dXJuITE7Y29uc3Qgcj1be3g6ZS54K3QseTplLnkraX0se3g6ZS54K2Uud2lkdGgrdCx5OmUueStpfSx7eDplLngrZS53aWR0aCt0LHk6ZS55K2UuaGVpZ2h0K2l9LHt4OmUueCt0LHk6ZS55K2UuaGVpZ2h0K2l9XSxvPXAocywyKTtyZXR1cm4gci5zb21lKGU9PnAoZS54LDIpK3AoZS55LDIpPm8pfWNvbXB1dGVDYWxsb3V0TGFiZWxDb2xsaXNpb25PZmZzZXRzKCl7Y29uc3R7cmFkaXVzU2NhbGU6ZX09dGhpcyx7Y2FsbG91dExhYmVsOnQsY2FsbG91dExpbmU6aX09dGhpcy5wcm9wZXJ0aWVzLHtvZmZzZXQ6cyxtaW5TcGFjaW5nOnJ9PXQsbz1lLmNvbnZlcnQoMCksbj10aGlzLm5vZGVEYXRhLGE9dGhpcy5ub2RlRGF0YS5maWx0ZXIoZT0+e3JldHVybiEoISh0PWUpLmNhbGxvdXRMYWJlbHx8MD09PXQub3V0ZXJSYWRpdXMpO3ZhciB0fSk7aWYoYS5mb3JFYWNoKGU9Pntjb25zdCB0PWUuY2FsbG91dExhYmVsO251bGwhPXQmJih0LmhpZGRlbj0hMSx0LmNvbGxpc2lvblRleHRBbGlnbj12b2lkIDAsdC5jb2xsaXNpb25PZmZzZXRZPTApfSksYS5sZW5ndGg8PTEpcmV0dXJuO2NvbnN0IGw9YS5maWx0ZXIoZT0+ZS5taWRDb3M8MCkuc29ydCgoZSx0KT0+ZS5taWRTaW4tdC5taWRTaW4pLGQ9YS5maWx0ZXIoZT0+ZS5taWRDb3M+PTApLnNvcnQoKGUsdCk9PmUubWlkU2luLXQubWlkU2luKSxjPWEuZmlsdGVyKGU9Pnt2YXIgdDtyZXR1cm4gZS5taWRTaW48MCYmImNlbnRlciI9PT0obnVsbD09KHQ9ZS5jYWxsb3V0TGFiZWwpP3ZvaWQgMDp0LnRleHRBbGlnbil9KS5zb3J0KChlLHQpPT5lLm1pZENvcy10Lm1pZENvcyksaD1hLmZpbHRlcihlPT57dmFyIHQ7cmV0dXJuIGUubWlkU2luPj0wJiYiY2VudGVyIj09PShudWxsPT0odD1lLmNhbGxvdXRMYWJlbCk/dm9pZCAwOnQudGV4dEFsaWduKX0pLnNvcnQoKGUsdCk9PmUubWlkQ29zLXQubWlkQ29zKSx1PW5ldyBlbixwPWU9Pnt2YXIgdDtjb25zdCByPWUuY2FsbG91dExhYmVsO2lmKG51bGw9PXIpcmV0dXJuIG5ldyBvcigwLDAsMCwwKTtjb25zdCBvPWUub3V0ZXJSYWRpdXMraS5sZW5ndGgrcyxuPWUubWlkQ29zKm8sYT1lLm1pZFNpbipvK3IuY29sbGlzaW9uT2Zmc2V0WTtyZXR1cm4gdS50ZXh0PXIudGV4dCx1Lng9bix1Lnk9YSx1LnNldEZvbnQodGhpcy5wcm9wZXJ0aWVzLmNhbGxvdXRMYWJlbCksdS5zZXRBbGlnbih7dGV4dEFsaWduOm51bGwhPSh0PXIuY29sbGlzaW9uVGV4dEFsaWduKT90OnIudGV4dEFsaWduLHRleHRCYXNlbGluZTpyLnRleHRCYXNlbGluZX0pLHUuY29tcHV0ZUJCb3goKX0sZz0oZSx0LGkpPT57Y29uc3Qgcz1wKGUpLmdyb3coci8yKSxvPXAodCkuZ3JvdyhyLzIpO2lmKHMueDxvLngrby53aWR0aCYmcy54K3Mud2lkdGg+by54JiYoInRvLXRvcCI9PT1pP3MueTxvLnkrby5oZWlnaHQ6cy55K3MuaGVpZ2h0Pm8ueSkpe2NvbnN0IGU9InRvLXRvcCI9PT1pP3MueS1vLnktby5oZWlnaHQ6cy55K3MuaGVpZ2h0LW8ueTt0LmNhbGxvdXRMYWJlbC5jb2xsaXNpb25PZmZzZXRZPWV9fSxtPWU9Pntjb25zdCB0PWUuc2xpY2UoKS5zb3J0KChlLHQpPT5NYXRoLmFicyhlLm1pZFNpbiktTWF0aC5hYnModC5taWRTaW4pKVswXSxpPWUuaW5kZXhPZih0KTtmb3IobGV0IHQ9aS0xO3Q+PTA7dC0tKXtjb25zdCBpPWVbdCsxXSxzPWVbdF07ZyhpLHMsInRvLXRvcCIpfWZvcihsZXQgdD1pKzE7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IGk9ZVt0LTFdLHM9ZVt0XTtnKGkscywidG8tYm90dG9tIil9fSxmPWU9Pntjb25zdCB0PWEuc29tZShlPT4wIT09ZS5jYWxsb3V0TGFiZWwuY29sbGlzaW9uT2Zmc2V0WSksaT1lLm1hcChlPT5wKGUpKSxzPWkubWFwKGU9PmUuY2xvbmUoKS5ncm93KHIvMikpO2xldCBsPSExO2ZvcihsZXQgdD0wO3Q8cy5sZW5ndGgmJiFsO3QrKyl7Y29uc3QgaT1zW3RdO2ZvcihsZXQgcj10KzE7cjxlLmxlbmd0aDtyKyspe2NvbnN0IGU9c1tyXTtpZihpLmNvbGxpZGVzQkJveChlKSl7bD0hMDticmVha319fWNvbnN0IGQ9bi5tYXAoZT0+e2NvbnN0e3N0YXJ0QW5nbGU6dCxlbmRBbmdsZTppLG91dGVyUmFkaXVzOnN9PWU7cmV0dXJue3N0YXJ0QW5nbGU6dCxlbmRBbmdsZTppLGlubmVyUmFkaXVzOm8sb3V0ZXJSYWRpdXM6c319KSxjPWkuc29tZShlPT5kLnNvbWUodD0+Z3AoZSx0KSkpOyhsfHx0fHxjKSYmZS5maWx0ZXIoZT0+ImNlbnRlciI9PT1lLmNhbGxvdXRMYWJlbC50ZXh0QWxpZ24pLmZvckVhY2goZT0+e2NvbnN0IHQ9ZS5jYWxsb3V0TGFiZWw7ZS5taWRDb3M8MD90LmNvbGxpc2lvblRleHRBbGlnbj0icmlnaHQiOmUubWlkQ29zPjA/dC5jb2xsaXNpb25UZXh0QWxpZ249ImxlZnQiOnQuY29sbGlzaW9uVGV4dEFsaWduPSJjZW50ZXIifSl9O20obCksbShkKSxmKGMpLGYoaCl9dXBkYXRlQ2FsbG91dExhYmVsTm9kZXMoZSl7Y29uc3R7cmFkaXVzU2NhbGU6dH09dGhpcyx7Y2FsbG91dExhYmVsOmksY2FsbG91dExpbmU6c309dGhpcy5wcm9wZXJ0aWVzLHI9cy5sZW5ndGgse29mZnNldDpvLGNvbG9yOm59PWksYT1uZXcgZW47dGhpcy5jYWxsb3V0TGFiZWxTZWxlY3Rpb24uc2VsZWN0QnlUYWcoMikuZm9yRWFjaChzPT57dmFyIGw7Y29uc3R7ZGF0dW06ZH09cyxjPWQuY2FsbG91dExhYmVsLGg9dC5jb252ZXJ0KGQucmFkaXVzKSx1PU1hdGgubWF4KDAsaCk7aWYoIShudWxsPT1jP3ZvaWQgMDpjLnRleHQpfHwwPT09dXx8Yy5oaWRkZW4pcmV0dXJuIHZvaWQocy52aXNpYmxlPSExKTtjb25zdCBwPXUrcitvLGc9ZC5taWRDb3MqcCxtPWQubWlkU2luKnArYy5jb2xsaXNpb25PZmZzZXRZLGY9e3RleHRBbGlnbjpudWxsIT0obD1jLmNvbGxpc2lvblRleHRBbGlnbik/bDpjLnRleHRBbGlnbix0ZXh0QmFzZWxpbmU6Yy50ZXh0QmFzZWxpbmV9O2EudGV4dD1jLnRleHQsYS54PWcsYS55PW0sYS5zZXRGb250KHRoaXMucHJvcGVydGllcy5jYWxsb3V0TGFiZWwpLGEuc2V0QWxpZ24oZik7Y29uc3Qgdj1hLmNvbXB1dGVCQm94KCk7bGV0IEM9Yy50ZXh0LHk9ITA7aWYoaS5hdm9pZENvbGxpc2lvbnMpe2NvbnN0e3RleHRMZW5ndGg6dCxoYXNWZXJ0aWNhbE92ZXJmbG93Oml9PXRoaXMuZ2V0TGFiZWxPdmVyZmxvdyhjLnRleHQsdixlKTtDPWMudGV4dC5sZW5ndGg9PT10P2MudGV4dDpjLnRleHQuc3Vic3RyaW5nKDAsdCkrIuKApiIseT0haX1zLnRleHQ9QyxzLng9ZyxzLnk9bSxzLnNldEZvbnQodGhpcy5wcm9wZXJ0aWVzLmNhbGxvdXRMYWJlbCkscy5zZXRBbGlnbihmKSxzLmZpbGw9bixzLnZpc2libGU9eX0pfWNvbXB1dGVMYWJlbHNCQm94KGUsdCl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdHtjYWxsb3V0TGFiZWw6aSxjYWxsb3V0TGluZTpzfT10aGlzLnByb3BlcnRpZXMscj1zLmxlbmd0aCx7b2Zmc2V0Om8sbWF4Q29sbGlzaW9uT2Zmc2V0Om4sbWluU3BhY2luZzphfT1pO2lmKCFpLmF2b2lkQ29sbGlzaW9ucylyZXR1cm4gbnVsbDt5aWVsZCB0aGlzLm1heWJlUmVmcmVzaE5vZGVEYXRhKCksdGhpcy51cGRhdGVSYWRpdXNTY2FsZSghMSksdGhpcy5jb21wdXRlQ2FsbG91dExhYmVsQ29sbGlzaW9uT2Zmc2V0cygpO2NvbnN0IGw9W10sZD1uZXcgZW47bGV0IGM7Y29uc3R7dGl0bGU6aH09dGhpcy5wcm9wZXJ0aWVzO2lmKChudWxsPT1oP3ZvaWQgMDpoLnRleHQpJiZoLmVuYWJsZWQpe2NvbnN0IGU9dGhpcy5nZXRUaXRsZVRyYW5zbGF0aW9uWSgpO2lzRmluaXRlKGUpJiYoZC50ZXh0PWgudGV4dCxkLng9MCxkLnk9ZSxkLnNldEZvbnQoaCksZC5zZXRBbGlnbih7dGV4dEJhc2VsaW5lOiJib3R0b20iLHRleHRBbGlnbjoiY2VudGVyIn0pLGM9ZC5jb21wdXRlQkJveCgpLGwucHVzaChjKSl9cmV0dXJuIHRoaXMubm9kZURhdGEuZm9yRWFjaChpPT57dmFyIHM7Y29uc3QgaD1pLmNhbGxvdXRMYWJlbDtpZighaHx8MD09PWkub3V0ZXJSYWRpdXMpcmV0dXJuIG51bGw7Y29uc3QgdT1pLm91dGVyUmFkaXVzK3IrbyxwPWkubWlkQ29zKnUsZz1pLm1pZFNpbip1K2guY29sbGlzaW9uT2Zmc2V0WTtkLnRleHQ9aC50ZXh0LGQueD1wLGQueT1nLGQuc2V0Rm9udCh0aGlzLnByb3BlcnRpZXMuY2FsbG91dExhYmVsKSxkLnNldEFsaWduKHt0ZXh0QWxpZ246bnVsbCE9KHM9aC5jb2xsaXNpb25UZXh0QWxpZ24pP3M6aC50ZXh0QWxpZ24sdGV4dEJhc2VsaW5lOmgudGV4dEJhc2VsaW5lfSk7Y29uc3QgbT1kLmNvbXB1dGVCQm94KCk7aWYoaC5ib3g9bSxNYXRoLmFicyhoLmNvbGxpc2lvbk9mZnNldFkpPm4paC5oaWRkZW49ITA7ZWxzZXtpZihjKXtjb25zdCBlPXQueS10aGlzLmNlbnRlclksaT1uZXcgb3IoYy54LWEsZSxjLndpZHRoKzIqYSxjLnkrYy5oZWlnaHQrYS1lKTtpZihtLmNvbGxpZGVzQkJveChpKSlyZXR1cm4gdm9pZChoLmhpZGRlbj0hMCl9aWYoZS5oaWRlV2hlbk5lY2Vzc2FyeSl7Y29uc3R7dGV4dExlbmd0aDplLGhhc1ZlcnRpY2FsT3ZlcmZsb3c6aSxoYXNTdXJyb3VuZGluZ1Nlcmllc092ZXJmbG93OnN9PXRoaXMuZ2V0TGFiZWxPdmVyZmxvdyhoLnRleHQsbSx0KSxyPWgudGV4dC5sZW5ndGg+MiYmZTwyO2lmKGl8fHJ8fHMpcmV0dXJuIHZvaWQoaC5oaWRkZW49ITApfWguaGlkZGVuPSExLGwucHVzaChtKX19KSwwPT09bC5sZW5ndGg/bnVsbDpvci5tZXJnZShsKX0pKX11cGRhdGVTZWN0b3JMYWJlbE5vZGVzKCl7Y29uc3R7cmFkaXVzU2NhbGU6ZX09dGhpcyx0PWUuY29udmVydCgwKSx7Zm9udFNpemU6aSxmb250U3R5bGU6cyxmb250V2VpZ2h0OnIsZm9udEZhbWlseTpvLHBvc2l0aW9uT2Zmc2V0Om4scG9zaXRpb25SYXRpbzphLGNvbG9yOmx9PXRoaXMucHJvcGVydGllcy5zZWN0b3JMYWJlbCxkPXQ+MCxjPTE9PT10aGlzLnNlcmllc0l0ZW1FbmFibGVkLmZpbHRlcihCb29sZWFuKS5sZW5ndGg7dGhpcy5zZWN0b3JMYWJlbFNlbGVjdGlvbi5lYWNoKChlLGgpPT57Y29uc3R7c2VjdG9yTGFiZWw6dSxvdXRlclJhZGl1czpwfT1oO2xldCBnPSExO2lmKHUmJjAhPT1wKXtjb25zdCBtPXQqKDEtYSkrcCphK247ZS5maWxsPWwsZS5mb250U3R5bGU9cyxlLmZvbnRXZWlnaHQ9cixlLmZvbnRTaXplPWksZS5mb250RmFtaWx5PW8sZS50ZXh0PXUudGV4dDshZCYmYz8oZS54PTAsZS55PTApOihlLng9aC5taWRDb3MqbSxlLnk9aC5taWRTaW4qbSksZS50ZXh0QWxpZ249ImNlbnRlciIsZS50ZXh0QmFzZWxpbmU9Im1pZGRsZSI7Y29uc3QgZj1lLmNvbXB1dGVCQm94KCksdj1bW2YueCxmLnldLFtmLngrZi53aWR0aCxmLnldLFtmLngrZi53aWR0aCxmLnkrZi5oZWlnaHRdLFtmLngsZi55K2YuaGVpZ2h0XV0se3N0YXJ0QW5nbGU6QyxlbmRBbmdsZTp5fT1oLFM9e3N0YXJ0QW5nbGU6QyxlbmRBbmdsZTp5LGlubmVyUmFkaXVzOnQsb3V0ZXJSYWRpdXM6cH07di5ldmVyeSgoW2UsdF0pPT51cChlLHQsUykpJiYoZz0hMCl9ZS52aXNpYmxlPWd9KX11cGRhdGVJbm5lckxhYmVsTm9kZXMoKXtjb25zdCBlPVtdLHQ9W107dGhpcy5pbm5lckxhYmVsc1NlbGVjdGlvbi5lYWNoKChpLHMpPT57Y29uc3R7Zm9udFN0eWxlOnIsZm9udFdlaWdodDpvLGZvbnRTaXplOm4sZm9udEZhbWlseTphLGNvbG9yOmwsbWFyZ2luOmQ9Mn09cztpLmZvbnRTdHlsZT1yLGkuZm9udFdlaWdodD1vLGkuZm9udFNpemU9bixpLmZvbnRGYW1pbHk9YSxpLnRleHQ9cy50ZXh0LGkueD0wLGkueT0wLGkuZmlsbD1sLGkudGV4dEFsaWduPSJjZW50ZXIiLGkudGV4dEJhc2VsaW5lPSJhbHBoYWJldGljIixlLnB1c2goaS5jb21wdXRlQkJveCgpKSx0LnB1c2goZCl9KTtjb25zdCBpPWU9PjA9PT1lPzA6dFtlXSxzPWU9PmU9PT10Lmxlbmd0aC0xPzA6dFtlXSxyPWUucmVkdWNlKChlLHQscik9PmUrdC5oZWlnaHQraShyKStzKHIpLDApLG89TWF0aC5tYXgoLi4uZS5tYXAoZT0+ZS53aWR0aCkpLG49dGhpcy5nZXRJbm5lclJhZGl1cygpLGE9TWF0aC5zcXJ0KE1hdGgucG93KG8vMiwyKStNYXRoLnBvdyhyLzIsMikpPD0obj4wP246dGhpcy5nZXRPdXRlclJhZGl1cygpKSxsPVtdO2ZvcihsZXQgdD0wLG89LXIvMjt0PGUubGVuZ3RoO3QrKyl7Y29uc3Qgcj1lW3RdLmhlaWdodCtvK2kodCk7bC5wdXNoKHIpLG89citzKHQpfXRoaXMuaW5uZXJMYWJlbHNTZWxlY3Rpb24uZWFjaCgoZSx0LGkpPT57ZS55PWxbaV0sZS52aXNpYmxlPWF9KX11cGRhdGVaZXJvc3VtUmluZ3MoKXt0aGlzLnplcm9zdW1PdXRlclJpbmcuc2l6ZT0yKnRoaXMuZ2V0T3V0ZXJSYWRpdXMoKSx0aGlzLnplcm9zdW1Jbm5lclJpbmcuc2l6ZT0yKnRoaXMuZ2V0SW5uZXJSYWRpdXMoKX1nZXREYXR1bUxlZ2VuZE5hbWUoZSl7Y29uc3R7YW5nbGVLZXk6dCxjYWxsb3V0TGFiZWxLZXk6aSxzZWN0b3JMYWJlbEtleTpzLGxlZ2VuZEl0ZW1LZXk6cn09dGhpcy5wcm9wZXJ0aWVzLHtzZWN0b3JMYWJlbDpvLGNhbGxvdXRMYWJlbDpuLGxlZ2VuZEl0ZW06YX09ZTtyZXR1cm4gciYmdm9pZCAwIT09YT9hLnRleHQ6aSYmaSE9PXQmJnZvaWQgMCE9PShudWxsPT1uP3ZvaWQgMDpuLnRleHQpP24udGV4dDpzJiZzIT09dCYmdm9pZCAwIT09KG51bGw9PW8/dm9pZCAwOm8udGV4dCk/by50ZXh0OnZvaWQgMH1nZXRUb29sdGlwSHRtbChlKXt2YXIgdDtpZighdGhpcy5wcm9wZXJ0aWVzLmlzVmFsaWQoKSlyZXR1cm4iIjtjb25zdHtkYXR1bTppLGFuZ2xlVmFsdWU6cyxzZWN0b3JGb3JtYXQ6e2ZpbGw6cn19PWUsbz1XaChudWxsPT0odD10aGlzLnByb3BlcnRpZXMudGl0bGUpP3ZvaWQgMDp0LnRleHQpLG49amUocyk/SnMocyk6U3RyaW5nKHMpLGE9dGhpcy5nZXREYXR1bUxlZ2VuZE5hbWUoZSk7cmV0dXJuIHRoaXMucHJvcGVydGllcy50b29sdGlwLnRvVG9vbHRpcEh0bWwoe3RpdGxlOm51bGwhPW8/bzphLGNvbnRlbnQ6byYmYT9gJHthfTogJHtufWA6bixiYWNrZ3JvdW5kQ29sb3I6cn0se2RhdHVtOmksdGl0bGU6byxjb2xvcjpyLHNlcmllc0lkOnRoaXMuaWQsYW5nbGVLZXk6dGhpcy5wcm9wZXJ0aWVzLmFuZ2xlS2V5LGFuZ2xlTmFtZTp0aGlzLnByb3BlcnRpZXMuYW5nbGVOYW1lLHJhZGl1c0tleTp0aGlzLnByb3BlcnRpZXMucmFkaXVzS2V5LHJhZGl1c05hbWU6dGhpcy5wcm9wZXJ0aWVzLnJhZGl1c05hbWUsY2FsbG91dExhYmVsS2V5OnRoaXMucHJvcGVydGllcy5jYWxsb3V0TGFiZWxLZXksY2FsbG91dExhYmVsTmFtZTp0aGlzLnByb3BlcnRpZXMuY2FsbG91dExhYmVsTmFtZSxzZWN0b3JMYWJlbEtleTp0aGlzLnByb3BlcnRpZXMuc2VjdG9yTGFiZWxLZXksc2VjdG9yTGFiZWxOYW1lOnRoaXMucHJvcGVydGllcy5zZWN0b3JMYWJlbE5hbWV9KX1nZXRMZWdlbmREYXRhKGUpe3ZhciB0LGkscyxyLG87Y29uc3R7cHJvY2Vzc2VkRGF0YTpuLGRhdGFNb2RlbDphfT10aGlzO2lmKCFhfHwhKG51bGw9PW4/dm9pZCAwOm4uZGF0YS5sZW5ndGgpfHwiY2F0ZWdvcnkiIT09ZSlyZXR1cm5bXTtjb25zdHthbmdsZUtleTpsLGNhbGxvdXRMYWJlbEtleTpkLHNlY3RvckxhYmVsS2V5OmMsbGVnZW5kSXRlbUtleTpofT10aGlzLnByb3BlcnRpZXM7aWYoIShofHxkJiZkIT09bHx8YyYmYyE9PWwpKXJldHVybltdO2NvbnN0e2NhbGxvdXRMYWJlbElkeDp1LHNlY3RvckxhYmVsSWR4OnAsbGVnZW5kSXRlbUlkeDpnfT10aGlzLmdldFByb2Nlc3NlZERhdGFJbmRleGVzKGEpLG09KG51bGw9PSh0PXRoaXMucHJvcGVydGllcy50aXRsZSk/dm9pZCAwOnQuc2hvd0luTGVnZW5kKSYmdGhpcy5wcm9wZXJ0aWVzLnRpdGxlLnRleHQsZj1bXTtmb3IobGV0IGU9MDtlPG4uZGF0YS5sZW5ndGg7ZSsrKXtjb25zdHtkYXR1bTp0LHZhbHVlczphfT1uLmRhdGFbZV0sdj1bXTttJiZ2LnB1c2gobSk7Y29uc3QgQz10aGlzLmdldExhYmVscyh0LDIqTWF0aC5QSSwyKk1hdGguUEksITEsYVt1XSxhW3BdLGFbZ10pO2lmKGgmJnZvaWQgMCE9PUMubGVnZW5kSXRlbT92LnB1c2goQy5sZWdlbmRJdGVtLnRleHQpOmQmJmQhPT1sJiZ2b2lkIDAhPT0obnVsbD09KGk9Qy5jYWxsb3V0TGFiZWwpP3ZvaWQgMDppLnRleHQpP3YucHVzaChudWxsPT0ocz1DLmNhbGxvdXRMYWJlbCk/dm9pZCAwOnMudGV4dCk6YyYmYyE9PWwmJnZvaWQgMCE9PShudWxsPT0ocj1DLnNlY3RvckxhYmVsKT92b2lkIDA6ci50ZXh0KSYmdi5wdXNoKG51bGw9PShvPUMuc2VjdG9yTGFiZWwpP3ZvaWQgMDpvLnRleHQpLDA9PT12Lmxlbmd0aCljb250aW51ZTtjb25zdCB5PXRoaXMuZ2V0U2VjdG9yRm9ybWF0KHQsZSwhMSk7Zi5wdXNoKHtsZWdlbmRUeXBlOiJjYXRlZ29yeSIsaWQ6dGhpcy5pZCxpdGVtSWQ6ZSxzZXJpZXNJZDp0aGlzLmlkLGVuYWJsZWQ6dGhpcy5zZXJpZXNJdGVtRW5hYmxlZFtlXSxsYWJlbDp7dGV4dDp2LmpvaW4oIiAtICIpfSxtYXJrZXI6e2ZpbGw6eS5maWxsLHN0cm9rZTp5LnN0cm9rZSxmaWxsT3BhY2l0eTp0aGlzLnByb3BlcnRpZXMuZmlsbE9wYWNpdHksc3Ryb2tlT3BhY2l0eTp0aGlzLnByb3BlcnRpZXMuc3Ryb2tlT3BhY2l0eSxzdHJva2VXaWR0aDp0aGlzLnByb3BlcnRpZXMuc3Ryb2tlV2lkdGh9LGxlZ2VuZEl0ZW1OYW1lOm51bGwhPWg/dFtoXTp2b2lkIDB9KX1yZXR1cm4gZn1vbkxlZ2VuZEl0ZW1DbGljayhlKXtjb25zdHtlbmFibGVkOnQsaXRlbUlkOmksc2VyaWVzOnMsbGVnZW5kSXRlbU5hbWU6cn09ZTtzLmlkPT09dGhpcy5pZD90aGlzLnRvZ2dsZVNlcmllc0l0ZW0oaSx0KTpudWxsIT1yJiZ0aGlzLnRvZ2dsZU90aGVyU2VyaWVzSXRlbXMocix0KX10b2dnbGVTZXJpZXNJdGVtKGUsdCl7dGhpcy5zZXJpZXNJdGVtRW5hYmxlZFtlXT10LHRoaXMubm9kZURhdGFSZWZyZXNoPSEwfXRvZ2dsZU90aGVyU2VyaWVzSXRlbXMoZSx0KXt2YXIgaTtpZighdGhpcy5wcm9wZXJ0aWVzLmxlZ2VuZEl0ZW1LZXl8fCF0aGlzLmRhdGFNb2RlbClyZXR1cm47Y29uc3Qgcz10aGlzLmRhdGFNb2RlbC5yZXNvbHZlUHJvY2Vzc2VkRGF0YUluZGV4QnlJZCh0aGlzLCJsZWdlbmRJdGVtVmFsdWUiKS5pbmRleDtudWxsPT0oaT10aGlzLnByb2Nlc3NlZERhdGEpfHxpLmRhdGEuZm9yRWFjaCgoe3ZhbHVlczppfSxyKT0+e2lbc109PT1lJiZ0aGlzLnRvZ2dsZVNlcmllc0l0ZW0ocix0KX0pfWFuaW1hdGVFbXB0eVVwZGF0ZVJlYWR5KGUpe2NvbnN0e2FuaW1hdGlvbk1hbmFnZXI6dH09dGhpcy5jdHgsaT1FcCghMCx0aGlzLnByb3BlcnRpZXMucm90YXRpb24sdGhpcy5yYWRpdXNTY2FsZSx0aGlzLnByZXZpb3VzUmFkaXVzU2NhbGUpO19yKHRoaXMuaWQsIm5vZGVzIix0LFt0aGlzLml0ZW1TZWxlY3Rpb24sdGhpcy5oaWdobGlnaHRTZWxlY3Rpb25dLGkubm9kZXMpLF9yKHRoaXMuaWQsImlubmVyQ2lyY2xlIix0LFt0aGlzLmlubmVyQ2lyY2xlU2VsZWN0aW9uXSxpLmlubmVyQ2lyY2xlKSxqaCh0aGlzLCJjYWxsb3V0Iix0LFt0aGlzLmNhbGxvdXRMYWJlbFNlbGVjdGlvbl0pLGpoKHRoaXMsInNlY3RvciIsdCxbdGhpcy5zZWN0b3JMYWJlbFNlbGVjdGlvbl0pLGpoKHRoaXMsImlubmVyIix0LFt0aGlzLmlubmVyTGFiZWxzU2VsZWN0aW9uXSksdGhpcy5wcmV2aW91c1JhZGl1c1NjYWxlLnJhbmdlPXRoaXMucmFkaXVzU2NhbGUucmFuZ2V9YW5pbWF0ZVdhaXRpbmdVcGRhdGVSZWFkeSgpe3ZhciBlLHQsaSxzLHIsbztjb25zdHtpdGVtU2VsZWN0aW9uOm4saGlnaGxpZ2h0U2VsZWN0aW9uOmEscHJvY2Vzc2VkRGF0YTpsLHJhZGl1c1NjYWxlOmQscHJldmlvdXNSYWRpdXNTY2FsZTpjfT10aGlzLHthbmltYXRpb25NYW5hZ2VyOmh9PXRoaXMuY3R4LHU9bnVsbD09KGU9bnVsbD09bD92b2lkIDA6bC5yZWR1Y2VkKT92b2lkIDA6ZS5kaWZmO3RoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIuc3RvcEJ5QW5pbWF0aW9uR3JvdXBJZCh0aGlzLmlkKTtjb25zdCBwPTA9PT0obnVsbCE9KHQ9bnVsbD09dT92b2lkIDA6dS5tb3ZlZC5sZW5ndGgpP3Q6MCkmJihudWxsPT11P3ZvaWQgMDp1LmFkZGVkSW5kaWNlcy5ldmVyeShlPT4hdS5yZW1vdmVkSW5kaWNlcy5pbmNsdWRlcyhlKSkpLGc9KG51bGwhPShpPW51bGw9PWw/dm9pZCAwOmwuZGVmcy5rZXlzLmxlbmd0aCk/aTowKT4wLG09bnVsbD09KG89bnVsbD09KHI9bnVsbD09KHM9bnVsbD09bD92b2lkIDA6bC5yZWR1Y2VkKT92b2lkIDA6cy5hbmltYXRpb25WYWxpZGF0aW9uKT92b2lkIDA6ci51bmlxdWVLZXlzKXx8bztwJiZnJiZtfHx0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLnNraXBDdXJyZW50QmF0Y2goKTtjb25zdCBmPUVwKCExLHRoaXMucHJvcGVydGllcy5yb3RhdGlvbixkLGMpO19yKHRoaXMuaWQsIm5vZGVzIixoLFtuLGFdLGYubm9kZXMsKGUsdCk9PnRoaXMuZ2V0RGF0dW1JZCh0KSx1KSxfcih0aGlzLmlkLCJpbm5lckNpcmNsZSIsaCxbdGhpcy5pbm5lckNpcmNsZVNlbGVjdGlvbl0sZi5pbm5lckNpcmNsZSksamgodGhpcywiY2FsbG91dCIsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcixbdGhpcy5jYWxsb3V0TGFiZWxTZWxlY3Rpb25dKSxqaCh0aGlzLCJzZWN0b3IiLHRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIsW3RoaXMuc2VjdG9yTGFiZWxTZWxlY3Rpb25dKSxqaCh0aGlzLCJpbm5lciIsdGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlcixbdGhpcy5pbm5lckxhYmVsc1NlbGVjdGlvbl0pLHRoaXMucHJldmlvdXNSYWRpdXNTY2FsZS5yYW5nZT10aGlzLnJhZGl1c1NjYWxlLnJhbmdlfWFuaW1hdGVDbGVhcmluZ1VwZGF0ZUVtcHR5KCl7Y29uc3R7aXRlbVNlbGVjdGlvbjplLGhpZ2hsaWdodFNlbGVjdGlvbjp0LHJhZGl1c1NjYWxlOmkscHJldmlvdXNSYWRpdXNTY2FsZTpzfT10aGlzLHthbmltYXRpb25NYW5hZ2VyOnJ9PXRoaXMuY3R4LG89RXAoITEsdGhpcy5wcm9wZXJ0aWVzLnJvdGF0aW9uLGkscyk7X3IodGhpcy5pZCwibm9kZXMiLHIsW2UsdF0sby5ub2RlcyksX3IodGhpcy5pZCwiaW5uZXJDaXJjbGUiLHIsW3RoaXMuaW5uZXJDaXJjbGVTZWxlY3Rpb25dLG8uaW5uZXJDaXJjbGUpLFVoKHRoaXMsImNhbGxvdXQiLHRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIsW3RoaXMuY2FsbG91dExhYmVsU2VsZWN0aW9uXSksVWgodGhpcywic2VjdG9yIix0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLFt0aGlzLnNlY3RvckxhYmVsU2VsZWN0aW9uXSksVWgodGhpcywiaW5uZXIiLHRoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIsW3RoaXMuaW5uZXJMYWJlbHNTZWxlY3Rpb25dKSx0aGlzLnByZXZpb3VzUmFkaXVzU2NhbGUucmFuZ2U9dGhpcy5yYWRpdXNTY2FsZS5yYW5nZX1nZXREYXR1bUlkRnJvbURhdGEoZSl7dmFyIHQsaSxzO2NvbnN0e2NhbGxvdXRMYWJlbEtleTpyLHNlY3RvckxhYmVsS2V5Om8sbGVnZW5kSXRlbUtleTpufT10aGlzLnByb3BlcnRpZXM7aWYobnVsbD09KHM9bnVsbD09KGk9bnVsbD09KHQ9dGhpcy5wcm9jZXNzZWREYXRhKT92b2lkIDA6dC5yZWR1Y2VkKT92b2lkIDA6aS5hbmltYXRpb25WYWxpZGF0aW9uKT92b2lkIDA6cy51bmlxdWVLZXlzKXJldHVybiBuP2Vbbl06cj9lW3JdOm8/ZVtvXTp2b2lkIDB9Z2V0RGF0dW1JZChlKXt2YXIgdDtjb25zdHtpbmRleDppfT1lO3JldHVybiBudWxsIT0odD10aGlzLmdldERhdHVtSWRGcm9tRGF0YShlLmRhdHVtKSk/dDoiIitpfW9uRGF0YUNoYW5nZSgpe3RoaXMucHJvY2Vzc1Nlcmllc0l0ZW1FbmFibGVkKCl9fTtWcC5jbGFzc05hbWU9IlBpZVNlcmllcyIsVnAudHlwZT0icGllIjt2YXIgQnA9e3R5cGU6InNlcmllcyIsb3B0aW9uc0tleToic2VyaWVzW10iLHBhY2thZ2VUeXBlOiJjb21tdW5pdHkiLGNoYXJ0VHlwZXM6WyJwb2xhciJdLGlkZW50aWZpZXI6InBpZSIsaW5zdGFuY2VDb25zdHJ1Y3RvcjpWcCxzZXJpZXNEZWZhdWx0czp7fSx0aGVtZVRlbXBsYXRlOk9wLHBhbGV0dGVGYWN0b3J5OkFwfTtmdW5jdGlvbiBIcCgpe2Zvcihjb25zdCBlIG9mIGdlKXtpZigiZW50ZXJwcmlzZSIhPT1lLnBhY2thZ2VUeXBlfHxjdChlKXx8TC5lcnJvck9uY2UoIlVuZXhwZWN0ZWQgZW50ZXJwcmlzZSBtb2R1bGUgcmVnaXN0ZXJlZDogIitlLmlkZW50aWZpZXIpLCJyb290Ij09PWUudHlwZSYmZS50aGVtZVRlbXBsYXRlKWZvcihjb25zdCB0IG9mIGUuY2hhcnRUeXBlcylydCh0LGUudGhlbWVUZW1wbGF0ZSk7aWYoInNlcmllcyI9PT1lLnR5cGUpe2lmKGUuY2hhcnRUeXBlcy5sZW5ndGg+MSl0aHJvdyBuZXcgRXJyb3IoIkFHIENoYXJ0cyAtIE1vZHVsZSBkZWZpbml0aW9uIGVycm9yOiAiK2UuaWRlbnRpZmllcik7R3QoZSl9aWYoInNlcmllcy1vcHRpb24iPT09ZS50eXBlJiZlLnRoZW1lVGVtcGxhdGUpZm9yKGNvbnN0IHQgb2YgZS5zZXJpZXNUeXBlcylrdCh0LGUudGhlbWVUZW1wbGF0ZSk7aWYoImF4aXMtb3B0aW9uIj09PWUudHlwZSYmZS50aGVtZVRlbXBsYXRlKWZvcihjb25zdCB0IG9mIGUuYXhpc1R5cGVzKXtjb25zdCBpPWUudGhlbWVUZW1wbGF0ZVt0XSxzPW0obSh7fSxlLnRoZW1lVGVtcGxhdGUpLGkpO2Zvcihjb25zdCB0IG9mIGUuYXhpc1R5cGVzKWRlbGV0ZSBzW3RdO2JlKHQscyl9ImF4aXMiPT09ZS50eXBlJiYoQ2UoZS5pZGVudGlmaWVyLGUuaW5zdGFuY2VDb25zdHJ1Y3RvciksZS50aGVtZVRlbXBsYXRlJiZiZShlLmlkZW50aWZpZXIsZS50aGVtZVRlbXBsYXRlKSksImxlZ2VuZCI9PT1lLnR5cGUmJmp0KGUuaWRlbnRpZmllcixlLm9wdGlvbnNLZXksZS5pbnN0YW5jZUNvbnN0cnVjdG9yLGUudGhlbWVUZW1wbGF0ZSl9aWYoZmUoKSl7Y29uc3QgZT1udC5maWx0ZXIoKHt1c2VDb3VudDplfSk9Pm51bGw9PWV8fDA9PT1lKTtlLmxlbmd0aD4wJiZMLmVycm9yT25jZSgiRW50ZXJwcmlzZSBtb2R1bGVzIGV4cGVjdGVkIGJ1dCBub3QgcmVnaXN0ZXJlZDogIixlKX19dmFyIFdwPWNsYXNzIGUgZXh0ZW5kcyBlaHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsdCksdGhpcy5fZGF0YT17fX1wZXJmb3JtTGF5b3V0KCl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIFMoZS5wcm90b3R5cGUsdGhpcywicGVyZm9ybUxheW91dCIpLmNhbGwodGhpcykse3Nlcmllc0FyZWE6e3BhZGRpbmc6aX0sc2VyaWVzUm9vdDpzfT10aGlzLHI9dC5jbG9uZSgpO3JldHVybiB0LnNocmluayhpLmxlZnQsImxlZnQiKSx0LnNocmluayhpLnRvcCwidG9wIiksdC5zaHJpbmsoaS5yaWdodCwicmlnaHQiKSx0LnNocmluayhpLmJvdHRvbSwiYm90dG9tIiksdGhpcy5zZXJpZXNSZWN0PXQsdGhpcy5hbmltYXRpb25SZWN0PXQsdGhpcy5ob3ZlclJlY3Q9dCxzLnRyYW5zbGF0aW9uWD1NYXRoLmZsb29yKHQueCkscy50cmFuc2xhdGlvblk9TWF0aC5mbG9vcih0LnkpLHlpZWxkIFByb21pc2UuYWxsKHRoaXMuc2VyaWVzLm1hcChlPT53KHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7eWllbGQgZS51cGRhdGUoe3Nlcmllc1JlY3Q6dH0pfSkpKSkscy52aXNpYmxlPXRoaXMuc2VyaWVzWzBdLnZpc2libGUscy5zZXRDbGlwUmVjdEluR3JvdXBDb29yZGluYXRlU3BhY2UobmV3IG9yKHQueCx0LnksdC53aWR0aCx0LmhlaWdodCkpLHRoaXMubGF5b3V0U2VydmljZS5kaXNwYXRjaExheW91dENvbXBsZXRlKHt0eXBlOiJsYXlvdXQtY29tcGxldGUiLGNoYXJ0Ont3aWR0aDp0aGlzLnNjZW5lLndpZHRoLGhlaWdodDp0aGlzLnNjZW5lLmhlaWdodH0sY2xpcFNlcmllczohMSxzZXJpZXM6e3JlY3Q6cixwYWRkZWRSZWN0OnQsdmlzaWJsZTohMH0sYXhlczpbXX0pLHR9KSl9fTtXcC5jbGFzc05hbWU9IkhpZXJhcmNoeUNoYXJ0IixXcC50eXBlPSJoaWVyYXJjaHkiO3ZhciBqcD1XcCxVcD1jbGFzcyBleHRlbmRzIGxse2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnNoYXBlPSJwb2x5Z29uIix0aGlzLmlubmVyUmFkaXVzUmF0aW89MCx0aGlzLmRlZmF1bHRUaWNrTWluU3BhY2luZz0yMH1jb21wdXRlTGFiZWxzQkJveChlLHQpe3JldHVybiBudWxsfX07eShbcXIoVm8oWyJwb2x5Z29uIiwiY2lyY2xlIl0sImEgcG9sYXIgYXhpcyBzaGFwZSIpKV0sVXAucHJvdG90eXBlLCJzaGFwZSIsMikseShbcXIoYW8pXSxVcC5wcm90b3R5cGUsImlubmVyUmFkaXVzUmF0aW8iLDIpO3ZhciB6cD1jbGFzcyBlIGV4dGVuZHMgZWh7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLHQpLHRoaXMucGFkZGluZz1uZXcgT2woNDApLHRoaXMuYXhpc0dyb3VwLnpJbmRleD01fXBlcmZvcm1MYXlvdXQoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgUyhlLnByb3RvdHlwZSx0aGlzLCJwZXJmb3JtTGF5b3V0IikuY2FsbCh0aGlzKSxpPXQuY2xvbmUoKTtyZXR1cm4gdGhpcy5jb21wdXRlU2VyaWVzUmVjdCh0KSx5aWVsZCB0aGlzLmNvbXB1dGVDaXJjbGUodCksdGhpcy5heGVzLmZvckVhY2goZT0+ZS51cGRhdGUoKSksdGhpcy5ob3ZlclJlY3Q9dCx0aGlzLmxheW91dFNlcnZpY2UuZGlzcGF0Y2hMYXlvdXRDb21wbGV0ZSh7dHlwZToibGF5b3V0LWNvbXBsZXRlIixjaGFydDp7d2lkdGg6dGhpcy5zY2VuZS53aWR0aCxoZWlnaHQ6dGhpcy5zY2VuZS5oZWlnaHR9LGNsaXBTZXJpZXM6ITEsc2VyaWVzOntyZWN0OmkscGFkZGVkUmVjdDp0LHZpc2libGU6ITB9LGF4ZXM6W119KSx0fSkpfXVwZGF0ZUF4ZXMoZSx0LGkpe3ZhciBzLHI7Y29uc3Qgbz10aGlzLmF4ZXMuZmluZChlPT4ieCI9PT1lLmRpcmVjdGlvbiksbj10aGlzLmF4ZXMuZmluZChlPT4ieSI9PT1lLmRpcmVjdGlvbik7aWYoIShvIGluc3RhbmNlb2YgVXAmJm4gaW5zdGFuY2VvZiBVcCkpcmV0dXJuO2NvbnN0IGE9by5zY2FsZSxsPW51bGw9PShzPWEudGlja3MpP3ZvaWQgMDpzLmNhbGwoYSkubWFwKGU9PmEuY29udmVydChlKSksZD1uLmlubmVyUmFkaXVzUmF0aW87by5pbm5lclJhZGl1c1JhdGlvPWQsbnVsbD09KHI9by5jb21wdXRlUmFuZ2UpfHxyLmNhbGwobyksby5ncmlkTGVuZ3RoPWksbi5ncmlkQW5nbGVzPWwsbi5ncmlkUmFuZ2U9by5yYW5nZSxuLnJhbmdlPVtpLGkqZF0sW28sbl0uZm9yRWFjaChpPT57aS50cmFuc2xhdGlvbi54PWUsaS50cmFuc2xhdGlvbi55PXQsaS5jYWxjdWxhdGVMYXlvdXQoKX0pfWNvbXB1dGVTZXJpZXNSZWN0KGUpe2NvbnN0e3Nlcmllc0FyZWE6e3BhZGRpbmc6dH19PXRoaXM7ZS5zaHJpbmsodC5sZWZ0LCJsZWZ0IiksZS5zaHJpbmsodC50b3AsInRvcCIpLGUuc2hyaW5rKHQucmlnaHQsInJpZ2h0IiksZS5zaHJpbmsodC5ib3R0b20sImJvdHRvbSIpLHRoaXMuc2VyaWVzUmVjdD1lLHRoaXMuYW5pbWF0aW9uUmVjdD1lfWNvbXB1dGVDaXJjbGUoZSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuc2VyaWVzLmZpbHRlcihlPT5lIGluc3RhbmNlb2YgeHApLGk9dGhpcy5heGVzLmZpbHRlcihlPT5lIGluc3RhbmNlb2YgVXApLHM9KGUsaSxzKT0+e3RoaXMudXBkYXRlQXhlcyhlLGkscyksdC5mb3JFYWNoKHQ9Pnt0LmNlbnRlclg9ZSx0LmNlbnRlclk9aSx0LnJhZGl1cz1zfSk7Y29uc3Qgcj10LmZpbHRlcihlPT5lIGluc3RhbmNlb2YgVnB8fGUgaW5zdGFuY2VvZiBEcCk7aWYoci5sZW5ndGg+MSl7Y29uc3QgZT1yLm1hcChlPT57Y29uc3QgdD1lLmdldElubmVyUmFkaXVzKCk7cmV0dXJue3NlcmllczplLGlubmVyUmFkaXVzOnR9fSkuc29ydCgoZSx0KT0+ZS5pbm5lclJhZGl1cy10LmlubmVyUmFkaXVzKTtlLmF0KC0xKS5zZXJpZXMuc3Vycm91bmRpbmdSYWRpdXM9dm9pZCAwO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGgtMTt0KyspZVt0XS5zZXJpZXMuc3Vycm91bmRpbmdSYWRpdXM9ZVt0KzFdLmlubmVyUmFkaXVzfX0scj1lLngrZS53aWR0aC8yLG89ZS55K2UuaGVpZ2h0LzIsbj1NYXRoLm1heCgwLE1hdGgubWluKGUud2lkdGgsZS5oZWlnaHQpLzIpO2xldCBhPW47cyhyLG8sYSk7Y29uc3QgbD0oLi4ubCk9PncodGhpcyxbLi4ubF0sKGZ1bmN0aW9uKih7aGlkZVdoZW5OZWNlc3Nhcnk6bD0hMX09e30pe2NvbnN0IGQ9W107Zm9yKGNvbnN0IHMgb2ZbLi4uaSwuLi50XSl7Y29uc3QgdD15aWVsZCBzLmNvbXB1dGVMYWJlbHNCQm94KHtoaWRlV2hlbk5lY2Vzc2FyeTpsfSxlKTt0JiZkLnB1c2godCl9aWYoMD09PWQubGVuZ3RoKXJldHVybiB2b2lkIHMocixvLG4pO2NvbnN0IGM9b3IubWVyZ2UoZCksaD10aGlzLnJlZmluZUNpcmNsZShjLGEsZSk7cyhoLmNlbnRlclgsaC5jZW50ZXJZLGgucmFkaXVzKSxoLnJhZGl1cyE9PWEmJihhPWgucmFkaXVzKX0pKTtyZXR1cm4geWllbGQgbCgpLHlpZWxkIGwoKSx5aWVsZCBsKCkseWllbGQgbCh7aGlkZVdoZW5OZWNlc3Nhcnk6ITB9KSx5aWVsZCBsKHtoaWRlV2hlbk5lY2Vzc2FyeTohMH0pLHtyYWRpdXM6YSxjZW50ZXJYOnIsY2VudGVyWTpvfX0pKX1yZWZpbmVDaXJjbGUoZSx0LGkpe2NvbnN0IHM9LXQscj0tdCxvPXQsbj10O2xldCBhPU1hdGgubWF4KDAscy1lLngpLGw9TWF0aC5tYXgoMCxyLWUueSksZD1NYXRoLm1heCgwLGUueCtlLndpZHRoLW8pLGM9TWF0aC5tYXgoMCxlLnkrZS5oZWlnaHQtbik7YT1kPU1hdGgubWF4KGEsZCksbD1jPU1hdGgubWF4KGwsYyk7Y29uc3QgaD1pLndpZHRoLWEtZCx1PWkuaGVpZ2h0LWwtYztsZXQgcD1NYXRoLm1pbihoLHUpLzI7Y29uc3QgZz0uNSppLndpZHRoLzIsbT0uNSppLmhlaWdodC8yLGY9TWF0aC5taW4oZyxtKTtpZihwPGYpe3A9Zjtjb25zdCBlPWErZDtpZigyKnArKGwrYyk+aS5oZWlnaHQpe2NvbnN0IGU9aS5oZWlnaHQtMipwOzIqTWF0aC5taW4obCxjKT5lPyhsPWUvMixjPWUvMik6bD5jP2w9ZS1jOmM9ZS1sfWlmKDIqcCtlPmkud2lkdGgpe2NvbnN0IGU9aS53aWR0aC0yKnA7MipNYXRoLm1pbihhLGQpPmU/KGE9ZS8yLGQ9ZS8yKTphPmQ/YT1lLWQ6ZD1lLWF9fWNvbnN0IHY9YSsyKnArZCxDPWwrMipwK2M7cmV0dXJue2NlbnRlclg6aS54KyhpLndpZHRoLXYpLzIrYStwLGNlbnRlclk6aS55KyhpLmhlaWdodC1DKS8yK2wrcCxyYWRpdXM6cH19fTt6cC5jbGFzc05hbWU9IlBvbGFyQ2hhcnQiLHpwLnR5cGU9InBvbGFyIjt2YXIgS3A9enAsWXA9RnMuY3JlYXRlKCEwLCJvcHRzIik7ZnVuY3Rpb24gJHAoZSl7aWYodXQoZSkpcmV0dXJuImNhcnRlc2lhbiI7aWYoZ3QoZSkpcmV0dXJuInBvbGFyIjtpZihwdChlKSlyZXR1cm4iaGllcmFyY2h5Ijt0aHJvdyBuZXcgRXJyb3IoIkFHIENoYXJ0IC0gdW5rbm93biB0eXBlIG9mIGNoYXJ0IGZvciBvcHRpb25zIHdpdGggdHlwZTogIitlLnR5cGUpfXZhciBYcD1jbGFzcyBle3N0YXRpYyBsaWNlbnNlQ2hlY2soZSl7dmFyIHQsaSxzLHI7dGhpcy5saWNlbnNlQ2hlY2tlZHx8KHRoaXMubGljZW5zZU1hbmFnZXI9bnVsbD09KGk9KHQ9dWUpLmxpY2Vuc2VNYW5hZ2VyKT92b2lkIDA6aS5jYWxsKHQsZSksbnVsbD09KHM9dGhpcy5saWNlbnNlTWFuYWdlcil8fHMuc2V0TGljZW5zZUtleSh0aGlzLmxpY2Vuc2VLZXksdGhpcy5ncmlkQ29udGV4dCksbnVsbD09KHI9dGhpcy5saWNlbnNlTWFuYWdlcil8fHIudmFsaWRhdGVMaWNlbnNlKCksdGhpcy5saWNlbnNlQ2hlY2tlZD0hMCl9c3RhdGljIHNldExpY2Vuc2VLZXkoZSl7dGhpcy5saWNlbnNlS2V5PWV9c3RhdGljIHNldEdyaWRDb250ZXh0KGUpe3RoaXMuZ3JpZENvbnRleHQ9ZX1zdGF0aWMgZ2V0TGljZW5zZURldGFpbHMoZSl7dmFyIHQsaTtyZXR1cm4gbnVsbD09KGk9KHQ9dWUpLmxpY2Vuc2VNYW5hZ2VyKT92b2lkIDA6aS5jYWxsKHQse30pLmdldExpY2Vuc2VEZXRhaWxzKGUpfXN0YXRpYyBnZXRJbnN0YW5jZShlKXtyZXR1cm4gSnAuZ2V0SW5zdGFuY2UoZSl9c3RhdGljIGNyZWF0ZShlKXt2YXIgdCxpLHMscjt0aGlzLmxpY2Vuc2VDaGVjayhlKTtjb25zdCBvPUpwLmNyZWF0ZU9yVXBkYXRlKGUpO3JldHVybihudWxsPT0odD10aGlzLmxpY2Vuc2VNYW5hZ2VyKT92b2lkIDA6dC5pc0Rpc3BsYXlXYXRlcm1hcmsoKSkmJihudWxsPT0ocj0ocz11ZSkuaW5qZWN0V2F0ZXJtYXJrKXx8ci5jYWxsKHMsbnVsbCE9KGk9ZS5kb2N1bWVudCk/aTpkb2N1bWVudCxvLmNoYXJ0LmVsZW1lbnQsdGhpcy5saWNlbnNlTWFuYWdlci5nZXRXYXRlcm1hcmtNZXNzYWdlKCkpKSxvfXN0YXRpYyB1cGRhdGUodCxpKXtpZighZmguaXNJbnN0YW5jZSh0KSl0aHJvdyBuZXcgRXJyb3IoZS5JTlZBTElEX0NIQVJUX1JFRl9NRVNTQUdFKTtKcC5jcmVhdGVPclVwZGF0ZShpLHQpfXN0YXRpYyB1cGRhdGVEZWx0YSh0LGkpe2lmKCFmaC5pc0luc3RhbmNlKHQpKXRocm93IG5ldyBFcnJvcihlLklOVkFMSURfQ0hBUlRfUkVGX01FU1NBR0UpO0pwLnVwZGF0ZVVzZXJEZWx0YSh0LGkpfXN0YXRpYyBkb3dubG9hZCh0LGkpe2lmKCEodCBpbnN0YW5jZW9mIGZoKSl0aHJvdyBuZXcgRXJyb3IoZS5JTlZBTElEX0NIQVJUX1JFRl9NRVNTQUdFKTtKcC5kb3dubG9hZCh0LGkpfXN0YXRpYyBnZXRJbWFnZURhdGFVUkwodCxpKXtpZighKHQgaW5zdGFuY2VvZiBmaCkpdGhyb3cgbmV3IEVycm9yKGUuSU5WQUxJRF9DSEFSVF9SRUZfTUVTU0FHRSk7cmV0dXJuIEpwLmdldEltYWdlRGF0YVVSTCh0LGkpfX07WHAuSU5WQUxJRF9DSEFSVF9SRUZfTUVTU0FHRT0iQUcgQ2hhcnRzIC0gaW52YWxpZCBjaGFydCByZWZlcmVuY2UgcGFzc2VkIixYcC5saWNlbnNlQ2hlY2tlZD0hMSxYcC5ncmlkQ29udGV4dD0hMTt2YXIgcXA9WHAsWnA9Y2xhc3MgZXtzdGF0aWMgd2FybkRlcHJlY2F0ZWQoZSl7TnMoKSgiQWdDaGFydC4iK2UsYFVzZSBBZ0NoYXJ0cy4ke2V9IGluc3RlYWRgKX1zdGF0aWMgY3JlYXRlKHQpe3JldHVybiBlLndhcm5EZXByZWNhdGVkKCJjcmVhdGUiKSxxcC5jcmVhdGUodCl9c3RhdGljIHVwZGF0ZSh0LGkpe3JldHVybiBlLndhcm5EZXByZWNhdGVkKCJ1cGRhdGUiKSxxcC51cGRhdGUodCxpKX1zdGF0aWMgdXBkYXRlRGVsdGEodCxpKXtyZXR1cm4gZS53YXJuRGVwcmVjYXRlZCgidXBkYXRlRGVsdGEiKSxxcC51cGRhdGVEZWx0YSh0LGkpfXN0YXRpYyBkb3dubG9hZCh0LGkpe3JldHVybiBlLndhcm5EZXByZWNhdGVkKCJkb3dubG9hZCIpLHFwLmRvd25sb2FkKHQsaSl9c3RhdGljIGdldEltYWdlRGF0YVVSTCh0LGkpe3JldHVybiBlLndhcm5EZXByZWNhdGVkKCJnZXRJbWFnZURhdGFVUkwiKSxxcC5nZXRJbWFnZURhdGFVUkwodCxpKX19LFFwPWNsYXNzIGV7c3RhdGljIGdldEluc3RhbmNlKGUpe2NvbnN0IHQ9ZWguZ2V0SW5zdGFuY2UoZSk7cmV0dXJuIG51bGwhPXQ/ZmguY2hhcnRJbnN0YW5jZXMuZ2V0KHQpOnZvaWQgMH1zdGF0aWMgaW5pdGlhbGlzZU1vZHVsZXMoKXtlLmluaXRpYWxpc2VkfHwobWUoUGgpLG1lKGtoKSxtZShGdSksbWUoWHUpLG1lKGlwKSxtZShscCksbWUoaHApLG1lKFBwKSxtZShCcCksbWUob3ApLG5ldyBNYXAoW1tTaC50eXBlLFNoXSxbdWwudHlwZSx1bF0sW1JoLnR5cGUsUmhdLFtibC50eXBlLGJsXSxbYmgudHlwZSxiaF1dKS5mb3JFYWNoKChlLHQpPT57Q2UodCxlKX0pLGp0KCJjYXRlZ29yeSIsImxlZ2VuZCIsdGMsdm9pZCAwKSxIcCgpLGUuaW5pdGlhbGlzZWQ9ITApfXN0YXRpYyBjcmVhdGVPclVwZGF0ZSh0LGkpe2UuaW5pdGlhbGlzZU1vZHVsZXMoKSxZcCgiPj4+IEFnQ2hhcnRWMi5jcmVhdGVPclVwZGF0ZSgpIHVzZXIgb3B0aW9ucyIsdCk7Y29uc3Qgcz10LHtvdmVycmlkZURldmljZVBpeGVsUmF0aW86cixkb2N1bWVudDpvLHdpbmRvdzpufT1zLGE9dihzLFsib3ZlcnJpZGVEZXZpY2VQaXhlbFJhdGlvIiwiZG9jdW1lbnQiLCJ3aW5kb3ciXSksbD1uZXcgSXMoYSx7b3ZlcnJpZGVEZXZpY2VQaXhlbFJhdGlvOnIsZG9jdW1lbnQ6byx3aW5kb3c6bn0pO2xldCBkPW51bGw9PWk/dm9pZCAwOmkuY2hhcnQ7cmV0dXJuIG51bGwhPWQmJiRwKGEpPT09JHAoZC5wcm9jZXNzZWRPcHRpb25zKXx8KGQ9ZS5jcmVhdGVDaGFydEluc3RhbmNlKGwsZCkpLG51bGw9PWk/aT1uZXcgZmgoZCk6aS5jaGFydD1kLFlwLmNoZWNrKCkmJiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiYobnVsbCE9d2luZG93LmFnQ2hhcnRJbnN0YW5jZXN8fCh3aW5kb3cuYWdDaGFydEluc3RhbmNlcz17fSksd2luZG93LmFnQ2hhcnRJbnN0YW5jZXNbZC5pZF09ZCksZC5xdWV1ZWRVc2VyT3B0aW9ucy5wdXNoKGEpLGQucmVxdWVzdEZhY3RvcnlVcGRhdGUoZT0+e2UuYXBwbHlPcHRpb25zKGwpLGUucXVldWVkVXNlck9wdGlvbnMuc3BsaWNlKDAsZS5xdWV1ZWRVc2VyT3B0aW9ucy5pbmRleE9mKGEpKX0pLGl9c3RhdGljIHVwZGF0ZVVzZXJEZWx0YSh0LGkpe2J0KGk9U3QoaSx7c2hhbGxvdzpbImRhdGEiXX0pLGU9PntpZigib2JqZWN0Ij09dHlwZW9mIGUpZm9yKGNvbnN0W3QsaV1vZiBPYmplY3QuZW50cmllcyhlKSl2b2lkIDA9PT1pJiZPYmplY3QuYXNzaWduKGUse1t0XTpTeW1ib2woIlVOU0VUIil9KX0se3NraXA6WyJkYXRhIl19KTtjb25zdHtjaGFydDpzfT10LHI9cy5nZXRPcHRpb25zKCksbz1YZShpLHIpO1lwKCI+Pj4gQWdDaGFydFYyLnVwZGF0ZVVzZXJEZWx0YSgpIHVzZXIgZGVsdGEiLGkpLFlwKCJBZ0NoYXJ0VjIudXBkYXRlVXNlckRlbHRhKCkgLSBiYXNlIG9wdGlvbnMiLHIpLGUuY3JlYXRlT3JVcGRhdGUobyx0KX1zdGF0aWMgZG93bmxvYWQodCxpKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3RyeXtjb25zdCBzPXlpZWxkIGUucHJlcGFyZVJlc2l6ZWRDaGFydCh0LGkpO3MuY2hhcnQuc2NlbmUuZG93bmxvYWQobnVsbD09aT92b2lkIDA6aS5maWxlTmFtZSxudWxsPT1pP3ZvaWQgMDppLmZpbGVGb3JtYXQpLHMuZGVzdHJveSgpfWNhdGNoKGUpe0wuZXJyb3JPbmNlKGUpfX0pKX1zdGF0aWMgZ2V0SW1hZ2VEYXRhVVJMKHQsaSl7cmV0dXJuIHcodGhpcyxudWxsLChmdW5jdGlvbiooKXtjb25zdCBzPXlpZWxkIGUucHJlcGFyZVJlc2l6ZWRDaGFydCh0LGkpLHtjYW52YXM6cn09cy5jaGFydC5zY2VuZSxvPXIuZ2V0RGF0YVVSTChudWxsPT1pP3ZvaWQgMDppLmZpbGVGb3JtYXQpO3JldHVybiBzLmRlc3Ryb3koKSxvfSkpfXN0YXRpYyBwcmVwYXJlUmVzaXplZENoYXJ0KHQpe3JldHVybiB3KHRoaXMsYXJndW1lbnRzLChmdW5jdGlvbioodCxpPXt9KXtjb25zdHtjaGFydDpzfT10LHt3aWR0aDpyPXMud2lkdGgsaGVpZ2h0Om89cy5oZWlnaHR9PWksbj1YZSh7Y29udGFpbmVyOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLG92ZXJyaWRlRGV2aWNlUGl4ZWxSYXRpbzoxLGF1dG9TaXplOiExLHdpZHRoOnIsaGVpZ2h0Om99LGZlKCkmJnthbmltYXRpb246e2VuYWJsZWQ6ITF9fSxzLnVzZXJPcHRpb25zKSxhPWUuY3JlYXRlT3JVcGRhdGUobik7cmV0dXJuIGEuY2hhcnQuem9vbU1hbmFnZXIudXBkYXRlWm9vbSh0LmNoYXJ0Lnpvb21NYW5hZ2VyLmdldFpvb20oKSksdC5jaGFydC5zZXJpZXMuZm9yRWFjaCgoZSx0KT0+eyEwIT09ZS52aXNpYmxlJiYoYS5jaGFydC5zZXJpZXNbdF0udmlzaWJsZT1lLnZpc2libGUpfSksdC5jaGFydC51cGRhdGUoMCx7Zm9yY2VOb2RlRGF0YVJlZnJlc2g6ITB9KSx5aWVsZCBhLmNoYXJ0LndhaXRGb3JVcGRhdGUoKSxhfSkpfXN0YXRpYyBjcmVhdGVDaGFydEluc3RhbmNlKHQsaSl7Y29uc3Qgcz1udWxsPT1pP3ZvaWQgMDppLmRlc3Ryb3koe2tlZXBUcmFuc2ZlcmFibGVSZXNvdXJjZXM6ITB9KTtyZXR1cm4gbmV3KGUuZ2V0Q2hhcnRCeU9wdGlvbnModC5wcm9jZXNzZWRPcHRpb25zKSkodCxzKX1zdGF0aWMgZ2V0Q2hhcnRCeU9wdGlvbnMoZSl7aWYodXQoZSkpcmV0dXJuIGdoO2lmKHB0KGUpKXJldHVybiBqcDtpZihndChlKSlyZXR1cm4gS3A7dGhyb3cgbmV3IEVycm9yKCJBRyBDaGFydHMgLSBjb3VsZG4ndCBhcHBseSBjb25maWd1cmF0aW9uLCBjaGVjayBvcHRpb25zIGFyZSBjb3JyZWN0bHkgc3RydWN0dXJlZCBhbmQgc2VyaWVzIHR5cGVzIGFyZSBzcGVjaWZpZWQiKX19O1FwLmluaXRpYWxpc2VkPSExO3ZhciBKcD1RcCxlZz0iOS4xLjEiLHRnPXt9O0ModGcse0FyYzooKT0+aWcsQkJveDooKT0+b3IsQmFuZFNjYWxlOigpPT5YcixDYXB0aW9uOigpPT5DbixDaXJjbGU6KCk9PlBkLENvbnRpbnVvdXNTY2FsZTooKT0+Um4sRGlhbW9uZDooKT0+SWQsRHJvcFNoYWRvdzooKT0+WWgsR3JvdXA6KCk9Pk9uLEhkcGlDYW52YXM6KCk9PiRvLEltYWdlOigpPT5hZyxMYWJlbDooKT0+UG4sTGluZTooKT0+QmEsTGluZWFyR3JhZGllbnRGaWxsOigpPT5zZyxMaW5lYXJTY2FsZTooKT0+dmgsTWFya2VyOigpPT5BZCxOb2RlOigpPT5ocixQYXRoOigpPT5PZCxQYXRoMkQ6KCk9PlRkLFBvaW50ZXJFdmVudHM6KCk9PmxyLFJhZGlhbENvbHVtblNoYXBlOigpPT5vZyxSZWN0OigpPT5PaCxSZWRyYXdUeXBlOigpPT5qcyxTY2VuZTooKT0+eGwsU2NlbmVDaGFuZ2VEZXRlY3Rpb246KCk9PnpzLFNjZW5lUGF0aENoYW5nZURldGVjdGlvbjooKT0+RGQsU2VjdG9yOigpPT5tcCxTZWxlY3Rpb246KCk9PlZhLFNoYXBlOigpPT5abyxTcXVhcmU6KCk9Pl9kLFRleHQ6KCk9PmVuLFRvb2x0aXA6KCk9PnZuLFRyaWFuZ2xlOigpPT5CZCxlYXNpbmc6KCk9PnZyLGdldEZvbnQ6KCk9PnRuLGdldE1hcmtlcjooKT0+VWQsZ2V0UmFkaWFsQ29sdW1uV2lkdGg6KCk9Pm5nLG1vdGlvbjooKT0+bGcsbmVhcmVzdFNxdWFyZWQ6KCk9PmlyLG5lYXJlc3RTcXVhcmVkSW5Db250YWluZXI6KCk9PnNyLHRvUmFkaWFuczooKT0+enIsdG9Ub29sdGlwSHRtbDooKT0+Z259KTt2YXIgaWc9Y2xhc3MgZXh0ZW5kcyBPZHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5jZW50ZXJYPTAsdGhpcy5jZW50ZXJZPTAsdGhpcy5yYWRpdXM9MTAsdGhpcy5zdGFydEFuZ2xlPTAsdGhpcy5lbmRBbmdsZT0yKk1hdGguUEksdGhpcy5jb3VudGVyQ2xvY2t3aXNlPSExLHRoaXMudHlwZT0wLHRoaXMucmVzdG9yZU93blN0eWxlcygpfWdldCBmdWxsUGllKCl7cmV0dXJuIHFzKFdyKHRoaXMuc3RhcnRBbmdsZSksV3IodGhpcy5lbmRBbmdsZSkpfXVwZGF0ZVBhdGgoKXtjb25zdCBlPXRoaXMucGF0aDtlLmNsZWFyKCksZS5hcmModGhpcy5jZW50ZXJYLHRoaXMuY2VudGVyWSx0aGlzLnJhZGl1cyx0aGlzLnN0YXJ0QW5nbGUsdGhpcy5lbmRBbmdsZSx0aGlzLmNvdW50ZXJDbG9ja3dpc2UpLDE9PT10aGlzLnR5cGU/ZS5jbG9zZVBhdGgoKToyIT09dGhpcy50eXBlfHx0aGlzLmZ1bGxQaWV8fChlLmxpbmVUbyh0aGlzLmNlbnRlclgsdGhpcy5jZW50ZXJZKSxlLmNsb3NlUGF0aCgpKX1jb21wdXRlQkJveCgpe3JldHVybiBuZXcgb3IodGhpcy5jZW50ZXJYLXRoaXMucmFkaXVzLHRoaXMuY2VudGVyWS10aGlzLnJhZGl1cywyKnRoaXMucmFkaXVzLDIqdGhpcy5yYWRpdXMpfWlzUG9pbnRJblBhdGgoZSx0KXtjb25zdCBpPXRoaXMudHJhbnNmb3JtUG9pbnQoZSx0KSxzPXRoaXMuY29tcHV0ZUJCb3goKTtyZXR1cm4gMCE9PXRoaXMudHlwZSYmcy5jb250YWluc1BvaW50KGkueCxpLnkpJiZ0aGlzLnBhdGguaXNQb2ludEluUGF0aChpLngsaS55KX19O2lnLmNsYXNzTmFtZT0iQXJjIixpZy5kZWZhdWx0U3R5bGVzPU9iamVjdC5hc3NpZ24oe30sWm8uZGVmYXVsdFN0eWxlcyx7bGluZVdpZHRoOjEsZmlsbFN0eWxlOm51bGx9KSx5KFtEZCgpXSxpZy5wcm90b3R5cGUsImNlbnRlclgiLDIpLHkoW0RkKCldLGlnLnByb3RvdHlwZSwiY2VudGVyWSIsMikseShbRGQoKV0saWcucHJvdG90eXBlLCJyYWRpdXMiLDIpLHkoW0RkKCldLGlnLnByb3RvdHlwZSwic3RhcnRBbmdsZSIsMikseShbRGQoKV0saWcucHJvdG90eXBlLCJlbmRBbmdsZSIsMikseShbRGQoKV0saWcucHJvdG90eXBlLCJjb3VudGVyQ2xvY2t3aXNlIiwyKSx5KFtEZCgpXSxpZy5wcm90b3R5cGUsInR5cGUiLDIpO3ZhciBzZz1jbGFzcyBleHRlbmRzIFpve2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmRpcmVjdGlvbj0idG8tcmlnaHQiLHRoaXMuc3RvcHM9dm9pZCAwLHRoaXMuX21hc2s9dm9pZCAwfWdldCBtYXNrKCl7cmV0dXJuIHRoaXMuX21hc2t9c2V0IG1hc2soZSl7bnVsbCE9dGhpcy5fbWFzayYmdGhpcy5yZW1vdmVDaGlsZCh0aGlzLl9tYXNrKSxudWxsIT1lJiZ0aGlzLmFwcGVuZENoaWxkKGUpLHRoaXMuX21hc2s9ZX1pc1BvaW50SW5QYXRoKGUsdCl7dmFyIGkscztyZXR1cm4gbnVsbCE9KHM9bnVsbD09KGk9dGhpcy5tYXNrKT92b2lkIDA6aS5pc1BvaW50SW5QYXRoKGUsdCkpJiZzfWNvbXB1dGVCQm94KCl7dmFyIGU7cmV0dXJuIG51bGw9PShlPXRoaXMubWFzayk/dm9pZCAwOmUuY29tcHV0ZUJCb3goKX1yZW5kZXIoZSl7Y29uc3R7bWFzazp0LHN0b3BzOml9PXRoaXMse2N0eDpzLGRldmljZVBpeGVsUmF0aW86cn09ZSxvPTEvcixuPW51bGw9PXQ/dm9pZCAwOnQuY29tcHV0ZVRyYW5zZm9ybWVkQkJveCgpO2lmKG51bGw9PXR8fG51bGw9PWl8fG51bGw9PW4pcmV0dXJuO3QuZGlydHlQYXRoJiYodC51cGRhdGVQYXRoKCksdC5kaXJ0eVBhdGg9ITEpLHMuc2F2ZSgpLHMuYmVnaW5QYXRoKCksdC5wYXRoLmRyYXcocykscy5jbGlwKCkscy5yZXNldFRyYW5zZm9ybSgpO2NvbnN0IGE9TWF0aC5mbG9vcihuLngpLGw9TWF0aC5jZWlsKG4ueCtuLndpZHRoKSxkPU1hdGguZmxvb3Iobi55KSxjPU1hdGguY2VpbChuLnkrbi5oZWlnaHQpLGg9bmV3IFp1LFt1LHBdPSJ0by1yaWdodCI9PT10aGlzLmRpcmVjdGlvbj9bYSxsXTpbZCxjXTtpZihoLmRvbWFpbj1pLm1hcCgoZSx0KT0+dSsocC11KSp0LyhpLmxlbmd0aC0xKSksaC5yYW5nZT1pLGgudXBkYXRlKCksInRvLXJpZ2h0Ij09PXRoaXMuZGlyZWN0aW9uKXtjb25zdCBlPWMtZDtmb3IobGV0IHQ9YTt0PD1sO3QrPW8pcy5maWxsU3R5bGU9aC5jb252ZXJ0KHQpLHMuZmlsbFJlY3QodCxkLG8sZSl9ZWxzZXtjb25zdCBlPWwtYTtmb3IobGV0IHQ9ZDt0PD1jO3QrPW8pcy5maWxsU3R5bGU9aC5jb252ZXJ0KHQpLHMuZmlsbFJlY3QoYSx0LGUsbyl9cy5yZXN0b3JlKCl9fTtmdW5jdGlvbiByZyhlLHQsaSl7Y29uc3Qgcz1NYXRoLnNxcnQocChlLDIpK3AodCwyKSkscj1NYXRoLmF0YW4yKHQsZSkraTtyZXR1cm57eDpNYXRoLmNvcyhyKSpzLHk6TWF0aC5zaW4ocikqc319eShbenMoe3JlZHJhdzozfSldLHNnLnByb3RvdHlwZSwiZGlyZWN0aW9uIiwyKSx5KFt6cyh7cmVkcmF3OjN9KV0sc2cucHJvdG90eXBlLCJzdG9wcyIsMikseShbenMoe3JlZHJhdzozfSldLHNnLnByb3RvdHlwZSwiX21hc2siLDIpO3ZhciBvZz1jbGFzcyBleHRlbmRzIE9ke2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmJvcmRlclBhdGg9bmV3IFRkLHRoaXMuaXNCZXZlbGVkPSEwLHRoaXMuY29sdW1uV2lkdGg9MCx0aGlzLnN0YXJ0QW5nbGU9MCx0aGlzLmVuZEFuZ2xlPTAsdGhpcy5vdXRlclJhZGl1cz0wLHRoaXMuaW5uZXJSYWRpdXM9MCx0aGlzLmF4aXNJbm5lclJhZGl1cz0wLHRoaXMuYXhpc091dGVyUmFkaXVzPTAsdGhpcy5pc1JhZGl1c0F4aXNSZXZlcnNlZD0hMX1nZXRSb3RhdGlvbigpe2NvbnN0e3N0YXJ0QW5nbGU6ZSxlbmRBbmdsZTp0fT10aGlzO3JldHVybiBXcihlK1lyKGUsdCkvMitNYXRoLlBJLzIpfXVwZGF0ZVBhdGgoKXtjb25zdHtpc0JldmVsZWQ6ZX09dGhpcztlP3RoaXMudXBkYXRlQmV2ZWxlZFBhdGgoKTp0aGlzLnVwZGF0ZVJlY3Rhbmd1bGFyUGF0aCgpLHRoaXMuY2hlY2tQYXRoRGlydHkoKX11cGRhdGVSZWN0YW5ndWxhclBhdGgoKXtjb25zdHtjb2x1bW5XaWR0aDplLGlubmVyUmFkaXVzOnQsb3V0ZXJSYWRpdXM6aSxwYXRoOnN9PXRoaXMscj0tZS8yLG89ZS8yLG49LWksYT0tdCxsPXRoaXMuZ2V0Um90YXRpb24oKSxkPVtbcixhXSxbcixuXSxbbyxuXSxbbyxhXSxbcixhXV0ubWFwKChbZSx0XSk9PnJnKGUsdCxsKSk7cy5jbGVhcih7dHJhY2tDaGFuZ2VzOiEwfSkscy5tb3ZlVG8oZFswXS54LGRbMF0ueSkscy5saW5lVG8oZFsxXS54LGRbMV0ueSkscy5saW5lVG8oZFsyXS54LGRbMl0ueSkscy5saW5lVG8oZFszXS54LGRbM10ueSkscy5saW5lVG8oZFswXS54LGRbMF0ueSkscy5jbG9zZVBhdGgoKX11cGRhdGVCZXZlbGVkUGF0aCgpe2NvbnN0e2NvbHVtbldpZHRoOmUscGF0aDp0LG91dGVyUmFkaXVzOmksaW5uZXJSYWRpdXM6cyxheGlzSW5uZXJSYWRpdXM6cixheGlzT3V0ZXJSYWRpdXM6byxpc1JhZGl1c0F4aXNSZXZlcnNlZDpufT10aGlzLGE9cXMocyxyKSxsPU1hdGguYXNpbihlLzIvcyksZD10aGlzLmdldFJvdGF0aW9uKCksYz0oZSx0KT0+cmcoZSx0LGQpLGg9KGUsdCk9Pk1hdGguc3FydChwKGUsMikrcCh0LDIpKSx1PShlLHQpPT50PmU/MDpNYXRoLnNxcnQocChlLDIpLXAodCwyKSksZz0oZSx0LGkpPT5pP2U8dDplPnQsbT1hJiYhaXNOYU4obCkmJmw8TWF0aC5QSS82O2xldCBmPS1lLzIsdj1lLzI7Y29uc3QgQz0taSx5PS1zKihtP01hdGguY29zKGwpOjEpLFM9ZyhvLGgocyxlLzIpLCFuKTtpZihTKXtjb25zdCBlPXUobyxzKTtmPS1lLHY9ZX10LmNsZWFyKHt0cmFja0NoYW5nZXM6ITB9KTtjb25zdCB3PWMoZix5KTt0Lm1vdmVUbyh3Lngsdy55KTtjb25zdCBiPXFzKHMsaSksRT1nKG8saChpLGUvMiksIW4pO2lmKGImJm0pdC5hcmMoMCwwLHMsV3IoLWwtTWF0aC5QSS8yKStkLFdyKGwtTWF0aC5QSS8yKStkLCExKTtlbHNlIGlmKEUpe2NvbnN0IHM9LXUobyxlLzIpLHI9dShvLGkpO2lmKCFTKXtjb25zdCBlPWMoZixzKTt0LmxpbmVUbyhlLngsZS55KX1pZih0LmFyYygwLDAsbyxNYXRoLmF0YW4yKHMsZikrZCxNYXRoLmF0YW4yKEMsLXIpK2QsITEpLCFxcyhyLDApKXtjb25zdCBlPWMocixDKTt0LmxpbmVUbyhlLngsZS55KX10LmFyYygwLDAsbyxNYXRoLmF0YW4yKEMscikrZCxNYXRoLmF0YW4yKHMsdikrZCwhMSl9ZWxzZXtjb25zdCBlPWMoZixDKSxpPWModixDKTt0LmxpbmVUbyhlLngsZS55KSx0LmxpbmVUbyhpLngsaS55KX1jb25zdCBSPWModix5KTtpZih0LmxpbmVUbyhSLngsUi55KSxtKXQuYXJjKDAsMCxzLFdyKGwtTWF0aC5QSS8yKStkLFdyKC1sLU1hdGguUEkvMikrZCwhMCk7ZWxzZXtjb25zdCBlPWMoZix5KTt0LmxpbmVUbyhlLngsZS55KX10LmNsb3NlUGF0aCgpfX07ZnVuY3Rpb24gbmcoZSx0LGkscyxyKXtjb25zdCBvPVlyKGUsdCksbj1vKigxLXMpLzI7aWYoZSs9bix0LT1uLG88LjAwMSlyZXR1cm4gMippKnI7aWYobz49MipNYXRoLlBJKXtjb25zdCBpPWUrby8yO2U9aS1NYXRoLlBJLHQ9aStNYXRoLlBJfWNvbnN0IGE9aSpNYXRoLmNvcyhlKSxsPWkqTWF0aC5zaW4oZSksZD1pKk1hdGguY29zKHQpLGM9aSpNYXRoLnNpbih0KSxoPU1hdGguZmxvb3IoTWF0aC5zcXJ0KHAoYS1kLDIpK3AobC1jLDIpKSksdT0yKmkqcjtyZXR1cm4gTWF0aC5tYXgoMSxNYXRoLm1pbih1LGgpKX1vZy5jbGFzc05hbWU9IlJhZGlhbENvbHVtblNoYXBlIix5KFtEZCgpXSxvZy5wcm90b3R5cGUsImlzQmV2ZWxlZCIsMikseShbRGQoKV0sb2cucHJvdG90eXBlLCJjb2x1bW5XaWR0aCIsMikseShbRGQoKV0sb2cucHJvdG90eXBlLCJzdGFydEFuZ2xlIiwyKSx5KFtEZCgpXSxvZy5wcm90b3R5cGUsImVuZEFuZ2xlIiwyKSx5KFtEZCgpXSxvZy5wcm90b3R5cGUsIm91dGVyUmFkaXVzIiwyKSx5KFtEZCgpXSxvZy5wcm90b3R5cGUsImlubmVyUmFkaXVzIiwyKSx5KFtEZCgpXSxvZy5wcm90b3R5cGUsImF4aXNJbm5lclJhZGl1cyIsMikseShbRGQoKV0sb2cucHJvdG90eXBlLCJheGlzT3V0ZXJSYWRpdXMiLDIpLHkoW0RkKCldLG9nLnByb3RvdHlwZSwiaXNSYWRpdXNBeGlzUmV2ZXJzZWQiLDIpO3ZhciBhZz1jbGFzcyBleHRlbmRzIGhye2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy54PTAsdGhpcy55PTAsdGhpcy53aWR0aD0wLHRoaXMuaGVpZ2h0PTAsdGhpcy5vcGFjaXR5PTEsdGhpcy5zb3VyY2VJbWFnZT1lfXJlbmRlcihlKXtjb25zdHtjdHg6dCxmb3JjZVJlbmRlcjppLHN0YXRzOnN9PWU7aWYoMD09PXRoaXMuZGlydHkmJiFpKXJldHVybiB2b2lkKHMmJnMubm9kZXNTa2lwcGVkKyspO3RoaXMuY29tcHV0ZVRyYW5zZm9ybU1hdHJpeCgpLHRoaXMubWF0cml4LnRvQ29udGV4dCh0KTtjb25zdCByPXRoaXMuc291cmNlSW1hZ2U7dC5nbG9iYWxBbHBoYT10aGlzLm9wYWNpdHksdC5kcmF3SW1hZ2UociwwLDAsci53aWR0aCxyLmhlaWdodCx0aGlzLngsdGhpcy55LHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpLHN1cGVyLnJlbmRlcihlKX19O3koW3pzKHtyZWRyYXc6M30pXSxhZy5wcm90b3R5cGUsIngiLDIpLHkoW3pzKHtyZWRyYXc6M30pXSxhZy5wcm90b3R5cGUsInkiLDIpLHkoW3pzKHtyZWRyYXc6M30pXSxhZy5wcm90b3R5cGUsIndpZHRoIiwyKSx5KFt6cyh7cmVkcmF3OjN9KV0sYWcucHJvdG90eXBlLCJoZWlnaHQiLDIpLHkoW3pzKHtyZWRyYXc6M30pXSxhZy5wcm90b3R5cGUsIm9wYWNpdHkiLDIpO3ZhciBsZz1tKG0oe30sX3MpLHJhKSxkZz17fTtDKGRnLHtDQVJURVNJQU5fQVhJU19UWVBFOigpPT4kdCxDaGFydFRoZW1lOigpPT5JaSxERUZBVUxUX0FYSVNfR1JJRF9DT0xPVVI6KCk9PnZpLERFRkFVTFRfQVhJU19MSU5FX0NPTE9VUjooKT0+Q2ksREVGQVVMVF9CQUNLR1JPVU5EX0NPTE9VUjooKT0+U2ksREVGQVVMVF9DUk9TU19MSU5FU19DT0xPVVI6KCk9PnlpLERFRkFVTFRfRElWRVJHSU5HX1NFUklFU19DT0xPVVJfUkFOR0U6KCk9PkRpLERFRkFVTFRfRk9OVF9GQU1JTFk6KCk9PnVpLERFRkFVTFRfSElFUkFSQ0hZX0ZJTExTOigpPT5PaSxERUZBVUxUX0hJRVJBUkNIWV9TVFJPS0VTOigpPT5BaSxERUZBVUxUX0lOU0lERV9TRVJJRVNfTEFCRUxfQ09MT1VSOigpPT5taSxERUZBVUxUX0lOVkVSVEVEX0xBQkVMX0NPTE9VUjooKT0+Z2ksREVGQVVMVF9MQUJFTF9DT0xPVVI6KCk9PnBpLERFRkFVTFRfTVVURURfTEFCRUxfQ09MT1VSOigpPT5maSxERUZBVUxUX1BPTEFSX1NFUklFU19TVFJPS0U6KCk9PlRpLERFRkFVTFRfU0hBRE9XX0NPTE9VUjooKT0+d2ksREVGQVVMVF9XQVRFUkZBTExfU0VSSUVTX0NPTk5FQ1RPUl9MSU5FX1NUUk9LRTooKT0+eGksREVGQVVMVF9XQVRFUkZBTExfU0VSSUVTX05FR0FUSVZFX0NPTE9VUlM6KCk9PkVpLERFRkFVTFRfV0FURVJGQUxMX1NFUklFU19QT1NJVElWRV9DT0xPVVJTOigpPT5iaSxERUZBVUxUX1dBVEVSRkFMTF9TRVJJRVNfVE9UQUxfQ09MT1VSUzooKT0+UmksRVhURU5EU19BWEVTX0RFRkFVTFRTOigpPT5yaSxFWFRFTkRTX0FYRVNfR1JJRF9MSU5FX0RFRkFVTFRTOigpPT5saSxFWFRFTkRTX0FYRVNfTEFCRUxfREVGQVVMVFM6KCk9Pm9pLEVYVEVORFNfQVhFU19MSU5FX0RFRkFVTFRTOigpPT5uaSxFWFRFTkRTX0FYRVNfVElDS19ERUZBVUxUUzooKT0+YWksRVhURU5EU19DQVJURVNJQU5fTUFSS0VSX0RFRkFVTFRTOigpPT5jaSxFWFRFTkRTX0NIQVJUX0RFRkFVTFRTOigpPT5laSxFWFRFTkRTX0xFR0VORF9ERUZBVUxUUzooKT0+dGksRVhURU5EU19MRUdFTkRfSVRFTV9ERUZBVUxUUzooKT0+aWksRVhURU5EU19MRUdFTkRfSVRFTV9NQVJLRVJfREVGQVVMVFM6KCk9PnNpLEVYVEVORFNfU0VSSUVTX0RFRkFVTFRTOigpPT5kaSxGT05UX1NJWkU6KCk9Pnp0LEZPTlRfV0VJR0hUOigpPT5LdCxJU19EQVJLX1RIRU1FOigpPT5KdCxPVkVSUklERV9TRVJJRVNfTEFCRUxfREVGQVVMVFM6KCk9PmhpLFBPTEFSX0FYSVNfU0hBUEU6KCk9PnF0LFBPTEFSX0FYSVNfVFlQRTooKT0+WHQsUE9TSVRJT046KCk9Pll0LGdldENoYXJ0VGhlbWU6KCk9PmJzLHRoZW1lczooKT0+Y2d9KTt2YXIgY2c9T2JqZWN0LmVudHJpZXMoU3MpLnJlZHVjZSgoZSxbdCxpXSk9PihlW3RdPWkoKSxlKSx7fSksaGc9e307QyhoZyx7QmFuZFNjYWxlOigpPT5YcixDb2xvclNjYWxlOigpPT5adSxDb250aW51b3VzU2NhbGU6KCk9PlJuLEludmFsaWRhdGluZzooKT0+JHIsTGluZWFyU2NhbGU6KCk9PnZoLFRpbWVTY2FsZTooKT0+X2F9KTt2YXIgdWc9e307Qyh1Zyx7Q29sb3I6KCk9Pm1yLExvZ2dlcjooKT0+TCxQYWRkaW5nOigpPT5PbCxhbmdsZUJldHdlZW46KCk9PllyLGNoZWNrRGF0dW06KCk9PmtuLGNsYW1wOigpPT5LcyxjbGFtcEFycmF5OigpPT5Zcyxjb3VudEZyYWN0aW9uRGlnaXRzOigpPT50cixjcmVhdGVJZDooKT0+V3MsZGVlcENsb25lOigpPT5TdCxleHRlbnQ6KCk9PkVzLGZpbmRNaW5NYXg6KCk9PiRzLGZpbmRSYW5nZUV4dGVudDooKT0+WHMsaXNDb250aW51b3VzOigpPT5Hbixpc0RhdGU6KCk9Pk5lLGlzRXF1YWw6KCk9PnFzLGlzTmVnYXRpdmU6KCk9PlpzLGlzTnVtYmVyOigpPT5qZSxpc051bWJlckVxdWFsOigpPT5xcyxpc1N0cmluZzooKT0+SGUsaXNTdHJpbmdPYmplY3Q6KCk9Pk5uLGpzb25BcHBseTooKT0+RXQsanNvbkRpZmY6KCk9Pnl0LGpzb25XYWxrOigpPT5idCxtb2Q6KCk9PmVyLG5vcm1hbGlzZWRFeHRlbnQ6KCk9PlJzLG5vcm1hbGlzZWRFeHRlbnRXaXRoTWV0YWRhdGE6KCk9PnhzLG5vcm1hbGl6ZUFuZ2xlMTgwOigpPT5Vcixub3JtYWxpemVBbmdsZTM2MDooKT0+V3Isbm9ybWFsaXplQW5nbGUzNjBJbmNsdXNpdmU6KCk9PmpyLHJhbmdlOigpPT5UYSxyZXNldElkczooKT0+SHMscm91bmQ6KCk9PlFzLHNhbml0aXplSHRtbDooKT0+V2gsc2hhbGxvd0Nsb25lOigpPT53dCx0aWNrRm9ybWF0OigpPT53YSx0aWNrU3RlcDooKT0+eGEsdGlja3M6KCk9PkVhLHRvRGVncmVlczooKT0+S3IsdG9GaXhlZDooKT0+SnMsdG9SYWRpYW5zOigpPT56cix0cmFuc2Zvcm1JbnRlZ3JhdGVkQ2F0ZWdvcnlWYWx1ZTooKT0+X24semlwT2JqZWN0OigpPT5Wc30pO3ZhciBwZz17fTtmdW5jdGlvbiBnZyguLi5lKXtmb3IoY29uc3QgdCBvZiBlKWlmKHQgaW5zdGFuY2VvZiBPaCl7Y29uc3R7eDplLHk6aSx3aWR0aDpzLGhlaWdodDpyfT10O3Quc2V0UHJvcGVydGllcyh7eDppLHk6ZSx3aWR0aDpyLGhlaWdodDpzfSl9ZWxzZSBpZih0IGluc3RhbmNlb2YgQmEpe2NvbnN0e3gxOmUseTE6aSx4MjpzLHkyOnJ9PXQ7dC5zZXRQcm9wZXJ0aWVzKHt4MTppLHkxOmUseDI6cix5MjpzfSl9fUMocGcse0FERF9QSEFTRTooKT0+QXIsQUdHX1ZBTFVFU19FWFRFTlQ6KCk9PndjLEFORDooKT0+UXIsQU5JTUFUSU9OX1BIQVNFX09SREVSOigpPT5NcixBTklNQVRJT05fUEhBU0VfVElNSU5HUzooKT0+THIsQVJSQVk6KCk9PmhvLEFSUkFZX09GOigpPT51byxBYnN0cmFjdEJhclNlcmllczooKT0+TnUsQWJzdHJhY3RCYXJTZXJpZXNQcm9wZXJ0aWVzOigpPT5JdSxBY3Rpb25PblNldDooKT0+aG4sQW5pbWF0aW9uOigpPT5OcixBbmltYXRpb25NYW5hZ2VyOigpPT5pZCxBcmVhU2VyaWVzVGFnOigpPT5PdSxBeGlzOigpPT5sbCxBeGlzTGFiZWw6KCk9PiRhLEF4aXNUaWNrOigpPT5aYSxCT09MRUFOOigpPT50byxCT09MRUFOX0FSUkFZOigpPT53byxCYWNrZ3JvdW5kOigpPT5BaCxCYWNrZ3JvdW5kTW9kdWxlOigpPT5QaCxCYXNlTW9kdWxlSW5zdGFuY2U6KCk9PnBlLEJhc2VQcm9wZXJ0aWVzOigpPT5mdCxDT0xPUl9TVFJJTkc6KCk9PnlvLENPTE9SX1NUUklOR19BUlJBWTooKT0+U28sQ2FydGVzaWFuQXhpczooKT0+aGwsQ2FydGVzaWFuU2VyaWVzOigpPT5oaCxDYXJ0ZXNpYW5TZXJpZXNOb2RlQ2xpY2tFdmVudDooKT0+ZGgsQ2FydGVzaWFuU2VyaWVzUHJvcGVydGllczooKT0+Y2gsQ2F0ZWdvcnlBeGlzOigpPT51bCxDaGFydEF4aXNEaXJlY3Rpb246KCk9PnpvLENoYXJ0RXZlbnRNYW5hZ2VyOigpPT5zZCxDaGFydE9wdGlvbnM6KCk9PklzLENoYXJ0VXBkYXRlVHlwZTooKT0+RmwsQ29udGV4dE1lbnVSZWdpc3RyeTooKT0+cmQsQ3Vyc29yTWFuYWdlcjooKT0+b2QsREFURTooKT0+Zm8sREFURV9BUlJBWTooKT0+Um8sREFURV9PUl9EQVRFVElNRV9NUzooKT0+dm8sREVHUkVFOigpPT5sbyxESVJFQ1RJT046KCk9PkdvLERhdGFDb250cm9sbGVyOigpPT5XbCxEYXRhTW9kZWw6KCk9PkhsLERhdGFTZXJ2aWNlOigpPT5VbCxEZWZhdWx0OigpPT5ZYSxEZXByZWNhdGVkOigpPT5HcyxEZXByZWNhdGVkQW5kUmVuYW1lZFRvOigpPT5rcyxGT05UX1NUWUxFOigpPT5QbyxGT05UX1dFSUdIVDooKT0+TW8sRlVOQ1RJT046KCk9PmlvLEdSRUFURVJfVEhBTjooKT0+bW8sR2VzdHVyZURldGVjdG9yOigpPT5hZCxHcm91cGVkQ2F0ZWdvcnlBeGlzOigpPT5ibCxIaWVyYXJjaHlOb2RlOigpPT5mZyxIaWVyYXJjaHlTZXJpZXM6KCk9PnZnLEhpZXJhcmNoeVNlcmllc1Byb3BlcnRpZXM6KCk9PkNnLEhpZ2hsaWdodE1hbmFnZXI6KCk9PmxkLEhpZ2hsaWdodFN0eWxlOigpPT5vaCxJTklUSUFMX0xPQUQ6KCk9PlRyLElOVEVSQUNUSU9OX1JBTkdFOigpPT5fbyxJTlRFUkFDVElPTl9UWVBFUzooKT0+JGwsSW50ZXJhY3Rpb25NYW5hZ2VyOigpPT5lZCxJbnRlcmFjdGlvblN0YXRlOigpPT5abCxMQUJFTF9QSEFTRTooKT0+UHIsTEVTU19USEFOOigpPT5nbyxMSU5FX0NBUDooKT0+VG8sTElORV9EQVNIOigpPT5PbyxMSU5FX0pPSU46KCk9PkRvLExheWVyczooKT0+SW4sTGF5b3V0U2VydmljZTooKT0+dmQsTUFUQ0hJTkdfQ1JPU1NMSU5FX1RZUEU6KCk9PlZuLE1BWF9TUEFDSU5HOigpPT5IbyxNSU5fU1BBQ0lORzooKT0+Qm8sTW90aW9uOigpPT52cixOQU46KCk9Pm9vLE5PREVfVVBEQVRFX1BIQVNFUzooKT0+R3IsTk9ERV9VUERBVEVfU1RBVEVfVE9fUEhBU0VfTUFQUElORzooKT0+a3IsTlVNQkVSOigpPT5ybyxOVU1CRVJfQVJSQVk6KCk9PmJvLE5VTUJFUl9PUl9OQU46KCk9PmNvLE5hdmlnYXRvcjooKT0+R2gsTmF2aWdhdG9yTW9kdWxlOigpPT5raCxPQkpFQ1Q6KCk9PmVvLE9CSkVDVF9BUlJBWTooKT0+eG8sT1I6KCk9PkpyLE9WRVJGTE9XX1NUUkFURUdZOigpPT5ObyxPYnNlcnZlQ2hhbmdlczooKT0+dW4sUExBQ0VNRU5UOigpPT5rbyxQT1NJVElPTjooKT0+QW8sUE9TSVRJVkVfTlVNQkVSOigpPT5ubyxQb2xhckF4aXM6KCk9PlVwLFBvbGFyU2VyaWVzOigpPT54cCxQcm9wZXJ0aWVzQXJyYXk6KCk9PnZ0LFByb3h5T25Xcml0ZTooKT0+ZG4sUHJveHlQcm9wZXJ0eTooKT0+bG4sUHJveHlQcm9wZXJ0eU9uV3JpdGU6KCk9PmNuLFFVSUNLX1RSQU5TSVRJT046KCk9Pi4yLFJBVElPOigpPT5hbyxSRUdJU1RFUkVEX01PRFVMRVM6KCk9PmdlLFJFTU9WRV9QSEFTRTooKT0+RHIsUmVwZWF0VHlwZTooKT0+RnIsU01BTExFU1RfS0VZX0lOVEVSVkFMOigpPT5TYyxTT1JUX0RPTUFJTl9HUk9VUFM6KCk9PmJjLFNUUklORzooKT0+c28sU1RSSU5HX0FSUkFZOigpPT5FbyxTZXJpZXM6KCk9PktjLFNlcmllc0dyb3VwaW5nQ2hhbmdlZEV2ZW50OigpPT56YyxTZXJpZXNJdGVtSGlnaGxpZ2h0U3R5bGU6KCk9PmloLFNlcmllc01hcmtlcjooKT0+WGgsU2VyaWVzTm9kZUNsaWNrRXZlbnQ6KCk9PlVjLFNlcmllc05vZGVQaWNrTW9kZTooKT0+RmMsU2VyaWVzUHJvcGVydGllczooKT0+bmgsU2VyaWVzVG9vbHRpcDooKT0+WmgsU3RhdGVNYWNoaW5lOigpPT5uYSxURVhUX0FMSUdOOigpPT5GbyxURVhUX1dSQVA6KCk9PkxvLFRhZ3M6KCk9Pm5sLFRvb2x0aXBNYW5hZ2VyOigpPT5nZCxVTklPTjooKT0+Vm8sVVBEQVRFX1BIQVNFOigpPT5PcixVcGRhdGVTZXJ2aWNlOigpPT5xYyxWRVJUSUNBTF9BTElHTjooKT0+SW8sVmFsaWRhdGU6KCk9PnFyLFpvb21NYW5hZ2VyOigpPT5tZCxfX0ZPUkNFX01PRFVMRV9ERVRFQ1RJT046KCk9PnlnLGFjY3VtdWxhdGVHcm91cDooKT0+UGMsYWNjdW11bGF0ZWRWYWx1ZTooKT0+ZmMsYWNjdW11bGF0aXZlVmFsdWVQcm9wZXJ0eTooKT0+SGMsYWRqdXN0TGFiZWxQbGFjZW1lbnQ6KCk9Pll1LGFuaW1hdGlvblZhbGlkYXRpb246KCk9PkRjLGFyZWE6KCk9Pm1jLGFycmF5c0VxdWFsOigpPT5Ucyxhc3NpZ25Kc29uQXBwbHlDb25zdHJ1Y3RlZEFycmF5OigpPT53bixhdmVyYWdlOigpPT5wYyxiYWNrZmlsbFBhdGhQb2ludERhdGE6KCk9Pmx1LGJ1aWxkUmVzZXRQYXRoRm46KCk9Pmd1LGNoZWNrQ3Jpc3A6KCk9PkJ1LGNpcmN1bGFyU2xpY2VBcnJheTooKT0+UHMsY2xhbXA6KCk9PktzLGNsYW1wQXJyYXk6KCk9PllzLGNvbGxhcHNlZFN0YXJ0aW5nQmFyUG9zaXRpb246KCk9Pld1LGNvdW50OigpPT5oYyxjb3VudEZyYWN0aW9uRGlnaXRzOigpPT50cixjcmVhdGVEYXR1bUlkOigpPT5MYyxjcmVhdGVEZXByZWNhdGlvbldhcm5pbmc6KCk9Pk5zLGRlY29uc3RydWN0U2VsZWN0aW9uc09yTm9kZXM6KCk9PklyLGRlZXBDbG9uZTooKT0+U3QsZGVlcE1lcmdlOigpPT4kZSxkZXRlcm1pbmVQYXRoU3RhdHVzOigpPT54dSxkaWZmOigpPT5NYyxlbnRlcnByaXNlTW9kdWxlOigpPT51ZSxleHRlbnQ6KCk9PkVzLGV4dHJhY3REZWNvcmF0ZWRQcm9wZXJ0aWVzOigpPT5QZSxmaW5kTWluTWF4OigpPT4kcyxmaW5kUmFuZ2VFeHRlbnQ6KCk9PlhzLGZpeE51bWVyaWNFeHRlbnQ6KCk9PmtsLGZyb21Ub01vdGlvbjooKT0+X3IsZ2V0TWlzc0NvdW50OigpPT5WbCxnZXRQYXRoOigpPT5RZSxnZXRSZWN0Q29uZmlnOigpPT5WdSxncm91cEFjY3VtdWxhdGl2ZVZhbHVlUHJvcGVydHk6KCk9PmpjLGdyb3VwQXZlcmFnZTooKT0+Z2MsZ3JvdXBCeTooKT0+QXMsZ3JvdXBDb3VudDooKT0+dWMsZ3JvdXBTdW06KCk9PmRjLGhhc1JlZ2lzdGVyZWRFbnRlcnByaXNlTW9kdWxlczooKT0+ZmUsaW5qZWN0U3R5bGU6KCk9PnBuLGludmVydFNoYXBlRGlyZWN0aW9uOigpPT5nZyxpc0FycmF5OigpPT5MZSxpc0Jvb2xlYW46KCk9PkZlLGlzRGF0ZTooKT0+SWUsaXNEZWNvcmF0ZWRPYmplY3Q6KCk9Pk9lLGlzRGVmaW5lZDooKT0+TWUsaXNFbnVtS2V5OigpPT56ZSxpc0VudW1WYWx1ZTooKT0+S2UsaXNFcXVhbDooKT0+cXMsaXNGaW5pdGVOdW1iZXI6KCk9PmplLGlzRnVuY3Rpb246KCk9PmtlLGlzSHRtbEVsZW1lbnQ6KCk9PlVlLGlzTmVnYXRpdmU6KCk9PlpzLGlzTnVtYmVyOigpPT5XZSxpc09iamVjdDooKT0+X2UsaXNPYmplY3RMaWtlOigpPT5WZSxpc1BsYWluT2JqZWN0OigpPT5CZSxpc1Byb3BlcnRpZXM6KCk9PkN0LGlzUmVnRXhwOigpPT5HZSxpc1N0cmluZzooKT0+SGUsaXNTeW1ib2w6KCk9PlllLGlzVmFsaWREYXRlOigpPT5OZSxqc29uQXBwbHk6KCk9PkV0LGpzb25EaWZmOigpPT55dCxqc29uV2FsazooKT0+YnQsa2V5UHJvcGVydHk6KCk9PkdjLGxpc3REZWNvcmF0ZWRQcm9wZXJ0aWVzOigpPT5BZSxtYXBWYWx1ZXM6KCk9PlplLG1hcmtlckZhZGVJbkFuaW1hdGlvbjooKT0+SmgsbWFya2VyUGFsZXR0ZUZhY3Rvcnk6KCk9PlZoLG1hcmtlclNjYWxlSW5BbmltYXRpb246KCk9PmV1LG1hcmtlclN3aXBlU2NhbGVJbkFuaW1hdGlvbjooKT0+dHUsbWVyZ2VBcnJheURlZmF1bHRzOigpPT5xZSxtZXJnZURlZmF1bHRzOigpPT5YZSxtaWRwb2ludFN0YXJ0aW5nQmFyUG9zaXRpb246KCk9Pmp1LG1pbk1heDooKT0+b3UsbW9kOigpPT5lcixub3JtYWxpc2VHcm91cFRvOigpPT5SYyxub3JtYWxpc2VQcm9wZXJ0eVRvOigpPT5UYyxub3JtYWxpc2VkRXh0ZW50OigpPT5Scyxub3JtYWxpc2VkRXh0ZW50V2l0aE1ldGFkYXRhOigpPT54cyxwYWlyQ2F0ZWdvcnlEYXRhOigpPT5SdSxwYWlyQ29udGludW91c0RhdGE6KCk9PkV1LHBhcnRpYWxBc3NpZ246KCk9PmV0LHBhdGhGYWRlSW5BbmltYXRpb246KCk9PnV1LHBhdGhGYWRlT3V0QW5pbWF0aW9uOigpPT5wdSxwYXRoU3dpcGVJbkFuaW1hdGlvbjooKT0+aHUscHJlZGljYXRlV2l0aE1lc3NhZ2U6KCk9PldvLHByZXBhcmVBcmVhUGF0aEFuaW1hdGlvbjooKT0+TXUscHJlcGFyZUF4aXNBbmltYXRpb25Db250ZXh0OigpPT5RYSxwcmVwYXJlQXhpc0FuaW1hdGlvbkZ1bmN0aW9uczooKT0+dGwscHJlcGFyZUJhckFuaW1hdGlvbkZ1bmN0aW9uczooKT0+VXUscHJlcGFyZUxpbmVQYXRoQW5pbWF0aW9uOigpPT5EdSxwcmVwYXJlTGluZVBhdGhBbmltYXRpb25GbnM6KCk9PlR1LHByZXBhcmVNYXJrZXJBbmltYXRpb246KCk9PnJ1LHJhbmdlOigpPT5jYyxyYW5nZWRWYWx1ZVByb3BlcnR5OigpPT5fYyxyZWdpc3Rlck1vZHVsZTooKT0+bWUscmVuZGVyUGFydGlhbFBhdGg6KCk9PmN1LHJlc2V0QXhpc0dyb3VwRm46KCk9PmlsLHJlc2V0QXhpc0xhYmVsU2VsZWN0aW9uRm46KCk9PnJsLHJlc2V0QXhpc0xpbmVTZWxlY3Rpb25GbjooKT0+b2wscmVzZXRBeGlzU2VsZWN0aW9uRm46KCk9PnNsLHJlc2V0QmFyU2VsZWN0aW9uc0ZuOigpPT56dSxyZXNldElkczooKT0+SHMscmVzZXRMYWJlbEZuOigpPT56aCxyZXNldE1hcmtlckZuOigpPT5pdSxyZXNldE1hcmtlclBvc2l0aW9uRm46KCk9PnN1LHJlc2V0TW90aW9uOigpPT5vYSxyb3VuZDooKT0+UXMsc2VyaWVzTGFiZWxGYWRlSW5BbmltYXRpb246KCk9PmpoLHNlcmllc0xhYmVsRmFkZU91dEFuaW1hdGlvbjooKT0+VWgsc2V0UGF0aDooKT0+SmUsc2hhbGxvd0Nsb25lOigpPT53dCxzaW5nbGVTZXJpZXNQYWxldHRlRmFjdG9yeTooKT0+X2gsc3RhdGljRnJvbVRvTW90aW9uOigpPT5WcixzdHJpbmdpZnk6KCk9PlVvLHN1bTooKT0+bGMsdG9BcnJheTooKT0+RHMsdG9GaXhlZDooKT0+SnMsdHJhaWxpbmdBY2N1bXVsYXRlZFZhbHVlOigpPT52Yyx0cmFpbGluZ0FjY3VtdWxhdGVkVmFsdWVQcm9wZXJ0eTooKT0+V2MsdHJhaWxpbmdWYWx1ZTooKT0+QmMsdHJhaWxpbmdWYWx1ZVByb3BlcnR5OigpPT5WYyx1bmlxdWU6KCk9Pk9zLHVwZGF0ZUNsaXBQYXRoOigpPT5tdSx1cGRhdGVMYWJlbE5vZGU6KCk9Pkt1LHVwZGF0ZVJlY3Q6KCk9Pl91LHZhbGlkYXRlQ3Jvc3NMaW5lVmFsdWVzOigpPT5Cbix2YWx1ZVByb3BlcnR5OigpPT5rY30pO3ZhciBtZz1jbGFzcyBle2NvbnN0cnVjdG9yKGUsdCxpLHMscixvLG4sYSxsLGQsYyl7dGhpcy5zZXJpZXM9ZSx0aGlzLmluZGV4PXQsdGhpcy5kYXR1bT1pLHRoaXMuc2l6ZT1zLHRoaXMuY29sb3JWYWx1ZT1yLHRoaXMuZmlsbD1vLHRoaXMuc3Ryb2tlPW4sdGhpcy5zdW1TaXplPWEsdGhpcy5kZXB0aD1sLHRoaXMucGFyZW50PWQsdGhpcy5jaGlsZHJlbj1jLHRoaXMubWlkUG9pbnQ9e3g6MCx5OjB9fWNvbnRhaW5zKGUpe2xldCB0PWU7Zm9yKDtudWxsIT10JiZ0LmluZGV4Pj10aGlzLmluZGV4Oyl7aWYodD09PXRoaXMpcmV0dXJuITA7dD10LnBhcmVudH1yZXR1cm4hMX13YWxrKHQsaT1lLldhbGsuUHJlT3JkZXIpe2k9PT1lLldhbGsuUHJlT3JkZXImJnQodGhpcyksdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGU9PntlLndhbGsodCxpKX0pLGk9PT1lLldhbGsuUG9zdE9yZGVyJiZ0KHRoaXMpfSpbU3ltYm9sLml0ZXJhdG9yXSgpe3lpZWxkIHRoaXM7Zm9yKGNvbnN0IGUgb2YgdGhpcy5jaGlsZHJlbil5aWVsZCpFKGUpfX07bWcuV2Fsaz17UHJlT3JkZXI6MCxQb3N0T3JkZXI6MX07dmFyIGZnPW1nLHZnPWNsYXNzIGV4dGVuZHMgS2N7Y29uc3RydWN0b3IoZSl7c3VwZXIoe21vZHVsZUN0eDplLHBpY2tNb2RlczpbMF0sY29udGVudEdyb3VwVmlydHVhbDohMX0pLHRoaXMucm9vdE5vZGU9bmV3IGZnKHRoaXMsMCx2b2lkIDAsMCx2b2lkIDAsdm9pZCAwLHZvaWQgMCwwLHZvaWQgMCx2b2lkIDAsW10pLHRoaXMuY29sb3JEb21haW49WzAsMF0sdGhpcy5tYXhEZXB0aD0wLHRoaXMuYW5pbWF0aW9uU3RhdGU9bmV3IG5hKCJlbXB0eSIse2VtcHR5Ont1cGRhdGU6e3RhcmdldDoicmVhZHkiLGFjdGlvbjplPT50aGlzLmFuaW1hdGVFbXB0eVVwZGF0ZVJlYWR5KGUpfSxyZXNldDoiZW1wdHkiLHNraXA6InJlYWR5In0scmVhZHk6e3VwZGF0ZURhdGE6IndhaXRpbmciLGNsZWFyOiJjbGVhcmluZyIsaGlnaGxpZ2h0OmU9PnRoaXMuYW5pbWF0ZVJlYWR5SGlnaGxpZ2h0KGUpLHJlc2l6ZTplPT50aGlzLmFuaW1hdGVSZWFkeVJlc2l6ZShlKSxyZXNldDoiZW1wdHkiLHNraXA6InJlYWR5In0sd2FpdGluZzp7dXBkYXRlOnt0YXJnZXQ6InJlYWR5IixhY3Rpb246ZT0+dGhpcy5hbmltYXRlV2FpdGluZ1VwZGF0ZVJlYWR5KGUpfSxyZXNldDoiZW1wdHkiLHNraXA6InJlYWR5In0sY2xlYXJpbmc6e3VwZGF0ZTp7dGFyZ2V0OiJlbXB0eSIsYWN0aW9uOmU9PnRoaXMuYW5pbWF0ZUNsZWFyaW5nVXBkYXRlRW1wdHkoZSl9LHJlc2V0OiJlbXB0eSIsc2tpcDoicmVhZHkifX0sKCk9PnRoaXMuY2hlY2tQcm9jZXNzZWREYXRhQW5pbWF0YWJsZSgpKX1yZXNldEFuaW1hdGlvbihlKXsiaW5pdGlhbCI9PT1lP3RoaXMuYW5pbWF0aW9uU3RhdGUudHJhbnNpdGlvbigicmVzZXQiKToicmVhZHkiPT09ZSYmdGhpcy5hbmltYXRpb25TdGF0ZS50cmFuc2l0aW9uKCJza2lwIil9cHJvY2Vzc0RhdGEoKXtyZXR1cm4gdyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3ZhciBlLHQ7Y29uc3R7Y2hpbGRyZW5LZXk6aSxzaXplS2V5OnMsY29sb3JLZXk6cixmaWxsczpvLHN0cm9rZXM6bixjb2xvclJhbmdlOmF9PXRoaXMucHJvcGVydGllcztsZXQgbD0wO2xldCBkPTAsYz0xLzAsaD0tMS8wO2NvbnN0IHU9bmV3IEFycmF5KChudWxsIT0odD1udWxsPT0oZT10aGlzLmRhdGEpP3ZvaWQgMDplLmxlbmd0aCk/dDowKSsxKS5maWxsKHZvaWQgMCkscD0oZSx0KT0+e2NvbnN0IG89KGwrPTEsbCksbj1udWxsIT10LmRlcHRoP3QuZGVwdGgrMTowLGE9bnVsbCE9aT9lW2ldOnZvaWQgMCxwPW51bGw9PWF8fDA9PT1hLmxlbmd0aDtsZXQgbT1udWxsIT1zP2Vbc106dm9pZCAwO209TnVtYmVyLmlzRmluaXRlKG0pP01hdGgubWF4KG0sMCk6cD8xOjA7Y29uc3QgZj1tO2Q9TWF0aC5tYXgoZCxuKTtjb25zdCB2PW51bGwhPXI/ZVtyXTp2b2lkIDA7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB2JiYodVtvXT12LGM9TWF0aC5taW4oYyx2KSxoPU1hdGgubWF4KGgsdikpLGcobmV3IGZnKHRoaXMsbyxlLG0sdix2b2lkIDAsdm9pZCAwLGYsbix0LFtdKSxhKX0sZz0oZSx0KT0+KG51bGw9PXR8fHQuZm9yRWFjaCh0PT57Y29uc3QgaT1wKHQsZSk7ZS5jaGlsZHJlbi5wdXNoKGkpLGUuc3VtU2l6ZSs9aS5zdW1TaXplfSksZSksbT1nKG5ldyBmZyh0aGlzLDAsdm9pZCAwLDAsdm9pZCAwLHZvaWQgMCx2b2lkIDAsMCx2b2lkIDAsdm9pZCAwLFtdKSx0aGlzLmRhdGEpLGY9W2MsaF07bGV0IHY7bnVsbCE9YSYmTnVtYmVyLmlzRmluaXRlKGMpJiZOdW1iZXIuaXNGaW5pdGUoaCkmJih2PW5ldyBadSx2LmRvbWFpbj1mLHYucmFuZ2U9YSx2LnVwZGF0ZSgpKSxtLmNoaWxkcmVuLmZvckVhY2goKGUsdCk9PntlLndhbGsoZT0+e2xldCBpO2NvbnN0IHM9dVtlLmluZGV4XTtudWxsIT1zJiYoaT1udWxsPT12P3ZvaWQgMDp2LmNvbnZlcnQocykpLG51bGwhPWl8fChpPW51bGw9PW8/dm9pZCAwOm9bdCVvLmxlbmd0aF0pLGUuZmlsbD1pLGUuc3Ryb2tlPW51bGw9PXY/bnVsbD09bj92b2lkIDA6blt0JW4ubGVuZ3RoXToicmdiYSgwLCAwLCAwLCAwLjIpIn0pfSksdGhpcy5yb290Tm9kZT1tLHRoaXMubWF4RGVwdGg9ZCx0aGlzLmNvbG9yRG9tYWluPWZ9KSl9dXBkYXRlKGUpe3JldHVybiB3KHRoaXMsYXJndW1lbnRzLChmdW5jdGlvbiooe3Nlcmllc1JlY3Q6ZX0pe3lpZWxkIHRoaXMudXBkYXRlU2VsZWN0aW9ucygpLHlpZWxkIHRoaXMudXBkYXRlTm9kZXMoKTtjb25zdCB0PXRoaXMuZ2V0QW5pbWF0aW9uRGF0YSgpO3RoaXMuY2hlY2tSZXNpemUoZSkmJnRoaXMuYW5pbWF0aW9uU3RhdGUudHJhbnNpdGlvbigicmVzaXplIix0KSx0aGlzLmFuaW1hdGlvblN0YXRlLnRyYW5zaXRpb24oInVwZGF0ZSIsdCl9KSl9cmVzZXRBbGxBbmltYXRpb24oZSl7dmFyIHQ7Y29uc3QgaT1udWxsPT0odD10aGlzLmFuaW1hdGlvblJlc2V0Rm5zKT92b2lkIDA6dC5kYXR1bTt0aGlzLmN0eC5hbmltYXRpb25NYW5hZ2VyLnN0b3BCeUFuaW1hdGlvbkdyb3VwSWQodGhpcy5pZCksbnVsbCE9aSYmb2EoZS5kYXR1bVNlbGVjdGlvbnMsaSl9YW5pbWF0ZUVtcHR5VXBkYXRlUmVhZHkoZSl7dGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlci5za2lwQ3VycmVudEJhdGNoKCksdGhpcy5yZXNldEFsbEFuaW1hdGlvbihlKX1hbmltYXRlV2FpdGluZ1VwZGF0ZVJlYWR5KGUpe3RoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIuc2tpcEN1cnJlbnRCYXRjaCgpLHRoaXMucmVzZXRBbGxBbmltYXRpb24oZSl9YW5pbWF0ZVJlYWR5SGlnaGxpZ2h0KGUpe3ZhciB0O2NvbnN0IGk9bnVsbD09KHQ9dGhpcy5hbmltYXRpb25SZXNldEZucyk/dm9pZCAwOnQuZGF0dW07bnVsbCE9aSYmb2EoW2VdLGkpfWFuaW1hdGVSZWFkeVJlc2l6ZShlKXt0aGlzLnJlc2V0QWxsQW5pbWF0aW9uKGUpfWFuaW1hdGVDbGVhcmluZ1VwZGF0ZUVtcHR5KGUpe3RoaXMuY3R4LmFuaW1hdGlvbk1hbmFnZXIuc2tpcEN1cnJlbnRCYXRjaCgpLHRoaXMucmVzZXRBbGxBbmltYXRpb24oZSl9YW5pbWF0aW9uVHJhbnNpdGlvbkNsZWFyKCl7dGhpcy5hbmltYXRpb25TdGF0ZS50cmFuc2l0aW9uKCJjbGVhciIsdGhpcy5nZXRBbmltYXRpb25EYXRhKCkpfWdldEFuaW1hdGlvbkRhdGEoKXtyZXR1cm57ZGF0dW1TZWxlY3Rpb25zOlt0aGlzLmdyb3VwU2VsZWN0aW9uXX19aXNQcm9jZXNzZWREYXRhQW5pbWF0YWJsZSgpe3JldHVybiEwfWNoZWNrUHJvY2Vzc2VkRGF0YUFuaW1hdGFibGUoKXt0aGlzLmlzUHJvY2Vzc2VkRGF0YUFuaW1hdGFibGUoKXx8dGhpcy5jdHguYW5pbWF0aW9uTWFuYWdlci5za2lwQ3VycmVudEJhdGNoKCl9Z2V0TGFiZWxEYXRhKCl7cmV0dXJuW119Z2V0U2VyaWVzRG9tYWluKCl7cmV0dXJuW05hTixOYU5dfWdldExlZ2VuZERhdGEoZSl7Y29uc3R7Y29sb3JLZXk6dCxjb2xvck5hbWU6aSxjb2xvclJhbmdlOnMsdmlzaWJsZTpyfT10aGlzLnByb3BlcnRpZXM7cmV0dXJuImdyYWRpZW50Ij09PWUmJm51bGwhPXQmJm51bGwhPXM/W3tsZWdlbmRUeXBlOiJncmFkaWVudCIsZW5hYmxlZDpyLHNlcmllc0lkOnRoaXMuaWQsY29sb3JOYW1lOmksY29sb3JSYW5nZTpzLGNvbG9yRG9tYWluOnRoaXMuY29sb3JEb21haW59XTpbXX1nZXREYXR1bUlkRnJvbURhdGEoZSl7cmV0dXJuIiIrZS5pbmRleH1nZXREYXR1bUlkKGUpe3JldHVybiB0aGlzLmdldERhdHVtSWRGcm9tRGF0YShlKX19LENnPWNsYXNzIGV4dGVuZHMgbmh7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY2hpbGRyZW5LZXk9ImNoaWxkcmVuIix0aGlzLmZpbGxzPU9iamVjdC52YWx1ZXMoWnQpLHRoaXMuc3Ryb2tlcz1PYmplY3QudmFsdWVzKFF0KX19O3koW3FyKHNvKV0sQ2cucHJvdG90eXBlLCJjaGlsZHJlbktleSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLENnLnByb3RvdHlwZSwic2l6ZUtleSIsMikseShbcXIoc28se29wdGlvbmFsOiEwfSldLENnLnByb3RvdHlwZSwiY29sb3JLZXkiLDIpLHkoW3FyKHNvLHtvcHRpb25hbDohMH0pXSxDZy5wcm90b3R5cGUsImNvbG9yTmFtZSIsMikseShbcXIoU28pXSxDZy5wcm90b3R5cGUsImZpbGxzIiwyKSx5KFtxcihTbyldLENnLnByb3RvdHlwZSwic3Ryb2tlcyIsMikseShbcXIoU28se29wdGlvbmFsOiEwfSldLENnLnByb3RvdHlwZSwiY29sb3JSYW5nZSIsMik7dmFyIHlnPTB9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpO2NsYXNzIHN7c2V0QmVhbnMoZSl7dGhpcy5iZWFucz1lfWdldEZpbGVOYW1lKGUpe2NvbnN0IHQ9dGhpcy5nZXREZWZhdWx0RmlsZUV4dGVuc2lvbigpO3JldHVybiBudWxsIT1lJiZlLmxlbmd0aHx8KGU9dGhpcy5nZXREZWZhdWx0RmlsZU5hbWUoKSksLTE9PT1lLmluZGV4T2YoIi4iKT9gJHtlfS4ke3R9YDplfWdldERhdGEoZSl7Y29uc3QgdD10aGlzLmNyZWF0ZVNlcmlhbGl6aW5nU2Vzc2lvbihlKTtyZXR1cm4gdGhpcy5iZWFucy5ncmlkU2VyaWFsaXplci5zZXJpYWxpemUodCxlKX1nZXREZWZhdWx0RmlsZU5hbWUoKXtyZXR1cm4iZXhwb3J0LiIrdGhpcy5nZXREZWZhdWx0RmlsZUV4dGVuc2lvbigpfX1jbGFzcyBye2NvbnN0cnVjdG9yKGUpe3RoaXMuZ3JvdXBDb2x1bW5zPVtdO2NvbnN0e2NvbHVtbk1vZGVsOnQsdmFsdWVTZXJ2aWNlOmksZ3JpZE9wdGlvbnNTZXJ2aWNlOnMsdmFsdWVGb3JtYXR0ZXJTZXJ2aWNlOnIsdmFsdWVQYXJzZXJTZXJ2aWNlOm8scHJvY2Vzc0NlbGxDYWxsYmFjazpuLHByb2Nlc3NIZWFkZXJDYWxsYmFjazphLHByb2Nlc3NHcm91cEhlYWRlckNhbGxiYWNrOmwscHJvY2Vzc1Jvd0dyb3VwQ2FsbGJhY2s6ZH09ZTt0aGlzLmNvbHVtbk1vZGVsPXQsdGhpcy52YWx1ZVNlcnZpY2U9aSx0aGlzLmdyaWRPcHRpb25zU2VydmljZT1zLHRoaXMudmFsdWVGb3JtYXR0ZXJTZXJ2aWNlPXIsdGhpcy52YWx1ZVBhcnNlclNlcnZpY2U9byx0aGlzLnByb2Nlc3NDZWxsQ2FsbGJhY2s9bix0aGlzLnByb2Nlc3NIZWFkZXJDYWxsYmFjaz1hLHRoaXMucHJvY2Vzc0dyb3VwSGVhZGVyQ2FsbGJhY2s9bCx0aGlzLnByb2Nlc3NSb3dHcm91cENhbGxiYWNrPWR9cHJlcGFyZShlKXt0aGlzLmdyb3VwQ29sdW1ucz1lLmZpbHRlcihlPT4hIWUuZ2V0Q29sRGVmKCkuc2hvd1Jvd0dyb3VwKX1leHRyYWN0SGVhZGVyVmFsdWUoZSl7Y29uc3QgdD10aGlzLmdldEhlYWRlck5hbWUodGhpcy5wcm9jZXNzSGVhZGVyQ2FsbGJhY2ssZSk7cmV0dXJuIG51bGwhPXQ/dDoiIn1leHRyYWN0Um93Q2VsbFZhbHVlKGUsdCxpLHMscil7Y29uc3Qgbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwSGlkZU9wZW5QYXJlbnRzIikmJiFyLmZvb3Rlcnx8IXRoaXMuc2hvdWxkUmVuZGVyR3JvdXBTdW1tYXJ5Q2VsbChyLGUsdCk/dGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUoZSxyKTp0aGlzLmNyZWF0ZVZhbHVlRm9yR3JvdXBOb2RlKGUscik7cmV0dXJuIHRoaXMucHJvY2Vzc0NlbGwoe2FjY3VtdWxhdGVkUm93SW5kZXg6aSxyb3dOb2RlOnIsY29sdW1uOmUsdmFsdWU6byxwcm9jZXNzQ2VsbENhbGxiYWNrOnRoaXMucHJvY2Vzc0NlbGxDYWxsYmFjayx0eXBlOnN9KX1zaG91bGRSZW5kZXJHcm91cFN1bW1hcnlDZWxsKGUsdCxpKXt2YXIgcztpZighKGUmJmUuZ3JvdXApKXJldHVybiExO2lmKC0xIT09dGhpcy5ncm91cENvbHVtbnMuaW5kZXhPZih0KSl7aWYobnVsbCE9KG51bGw9PT0ocz1lLmdyb3VwRGF0YSl8fHZvaWQgMD09PXM/dm9pZCAwOnNbdC5nZXRJZCgpXSkpcmV0dXJuITA7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNSb3dNb2RlbFR5cGUoInNlcnZlclNpZGUiKSYmZS5ncm91cClyZXR1cm4hMDtpZihlLmZvb3RlciYmLTE9PT1lLmxldmVsKXtjb25zdCBlPXQuZ2V0Q29sRGVmKCk7cmV0dXJuIG51bGw9PWV8fCEwPT09ZS5zaG93Um93R3JvdXB8fGUuc2hvd1Jvd0dyb3VwPT09dGhpcy5jb2x1bW5Nb2RlbC5nZXRSb3dHcm91cENvbHVtbnMoKVswXS5nZXRJZCgpfX1jb25zdCByPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzR3JvdXBVc2VFbnRpcmVSb3codGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpKTtyZXR1cm4gMD09PWkmJnJ9Z2V0SGVhZGVyTmFtZShlLHQpe3JldHVybiBlP2UodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7Y29sdW1uOnR9KSk6dGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5TmFtZUZvckNvbHVtbih0LCJjc3YiLCEwKX1jcmVhdGVWYWx1ZUZvckdyb3VwTm9kZShlLHQpe2lmKHRoaXMucHJvY2Vzc1Jvd0dyb3VwQ2FsbGJhY2spcmV0dXJuIHRoaXMucHJvY2Vzc1Jvd0dyb3VwQ2FsbGJhY2sodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7Y29sdW1uOmUsbm9kZTp0fSkpO2NvbnN0IGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpLHM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0dyb3VwTWFpbnRhaW5WYWx1ZVR5cGUiKSxyPXQ9Pnt2YXIgcixvO2lmKGl8fHMpcmV0dXJuIHQua2V5O2NvbnN0IG49bnVsbD09PShyPXQuZ3JvdXBEYXRhKXx8dm9pZCAwPT09cj92b2lkIDA6cltlLmdldElkKCldO3JldHVybiBuJiZ0LnJvd0dyb3VwQ29sdW1uJiYhMSE9PXQucm93R3JvdXBDb2x1bW4uZ2V0Q29sRGVmKCkudXNlVmFsdWVGb3JtYXR0ZXJGb3JFeHBvcnQmJm51bGwhPT0obz10aGlzLnZhbHVlRm9ybWF0dGVyU2VydmljZS5mb3JtYXRWYWx1ZSh0LnJvd0dyb3VwQ29sdW1uLHQsbikpJiZ2b2lkIDAhPT1vP286bn0sbz10LmZvb3RlcixuPVtyKHQpXTtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNHcm91cE11bHRpQXV0b0NvbHVtbigpKWZvcig7dC5wYXJlbnQ7KXQ9dC5wYXJlbnQsbi5wdXNoKHIodCkpO2NvbnN0IGE9bi5yZXZlcnNlKCkuam9pbigiIC0+ICIpO3JldHVybiBvPyJUb3RhbCAiK2E6YX1wcm9jZXNzQ2VsbChlKXt2YXIgdDtjb25zdHthY2N1bXVsYXRlZFJvd0luZGV4Omkscm93Tm9kZTpzLGNvbHVtbjpyLHZhbHVlOm8scHJvY2Vzc0NlbGxDYWxsYmFjazpuLHR5cGU6YX09ZTtyZXR1cm4gbj97dmFsdWU6bnVsbCE9PSh0PW4odGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7YWNjdW11bGF0ZWRSb3dJbmRleDppLGNvbHVtbjpyLG5vZGU6cyx2YWx1ZTpvLHR5cGU6YSxwYXJzZVZhbHVlOmU9PnRoaXMudmFsdWVQYXJzZXJTZXJ2aWNlLnBhcnNlVmFsdWUocixzLGUsdGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUocixzKSksZm9ybWF0VmFsdWU6ZT0+e3ZhciB0O3JldHVybiBudWxsIT09KHQ9dGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UuZm9ybWF0VmFsdWUocixzLGUpKSYmdm9pZCAwIT09dD90OmV9fSkpKSYmdm9pZCAwIT09dD90OiIifTohMSE9PXIuZ2V0Q29sRGVmKCkudXNlVmFsdWVGb3JtYXR0ZXJGb3JFeHBvcnQ/e3ZhbHVlOm51bGwhPW8/bzoiIix2YWx1ZUZvcm1hdHRlZDp0aGlzLnZhbHVlRm9ybWF0dGVyU2VydmljZS5mb3JtYXRWYWx1ZShyLHMsbyl9Ont2YWx1ZTpudWxsIT1vP286IiJ9fX12YXIgbz1pKDApO2NsYXNzIG57c3RhdGljIGRvd25sb2FkKGUsdCl7Y29uc3QgaT1kb2N1bWVudC5kZWZhdWx0Vmlld3x8d2luZG93O2lmKCFpKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZDogVGhlcmUgaXMgbm8gYHdpbmRvd2AgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IGBkb2N1bWVudGAiKTtjb25zdCBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSxyPWkuVVJMLmNyZWF0ZU9iamVjdFVSTCh0KTtzLnNldEF0dHJpYnV0ZSgiaHJlZiIscikscy5zZXRBdHRyaWJ1dGUoImRvd25sb2FkIixlKSxzLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocykscy5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCJjbGljayIse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMCx2aWV3Oml9KSksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzKSxpLnNldFRpbWVvdXQoKCk9PntpLlVSTC5yZXZva2VPYmplY3RVUkwocil9LDApfX1jbGFzcyBhIGV4dGVuZHMgcntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmlzRmlyc3RMaW5lPSEwLHRoaXMucmVzdWx0PSIiO2NvbnN0e3N1cHByZXNzUXVvdGVzOnQsY29sdW1uU2VwYXJhdG9yOml9PWU7dGhpcy5zdXBwcmVzc1F1b3Rlcz10LHRoaXMuY29sdW1uU2VwYXJhdG9yPWl9YWRkQ3VzdG9tQ29udGVudChlKXtlJiYoInN0cmluZyI9PXR5cGVvZiBlPygvXlxzKlxuLy50ZXN0KGUpfHx0aGlzLmJlZ2luTmV3TGluZSgpLGU9ZS5yZXBsYWNlKC9ccj9cbi9nLCJcclxuIiksdGhpcy5yZXN1bHQrPWUpOmUuZm9yRWFjaChlPT57dGhpcy5iZWdpbk5ld0xpbmUoKSxlLmZvckVhY2goKGUsdCk9PnswIT09dCYmKHRoaXMucmVzdWx0Kz10aGlzLmNvbHVtblNlcGFyYXRvciksdGhpcy5yZXN1bHQrPXRoaXMucHV0SW5RdW90ZXMoZS5kYXRhLnZhbHVlfHwiIiksZS5tZXJnZUFjcm9zcyYmdGhpcy5hcHBlbmRFbXB0eUNlbGxzKGUubWVyZ2VBY3Jvc3MpfSl9KSl9b25OZXdIZWFkZXJHcm91cGluZ1Jvdygpe3JldHVybiB0aGlzLmJlZ2luTmV3TGluZSgpLHtvbkNvbHVtbjp0aGlzLm9uTmV3SGVhZGVyR3JvdXBpbmdSb3dDb2x1bW4uYmluZCh0aGlzKX19b25OZXdIZWFkZXJHcm91cGluZ1Jvd0NvbHVtbihlLHQsaSxzKXswIT1pJiYodGhpcy5yZXN1bHQrPXRoaXMuY29sdW1uU2VwYXJhdG9yKSx0aGlzLnJlc3VsdCs9dGhpcy5wdXRJblF1b3Rlcyh0KSx0aGlzLmFwcGVuZEVtcHR5Q2VsbHMocyl9YXBwZW5kRW1wdHlDZWxscyhlKXtmb3IobGV0IHQ9MTt0PD1lO3QrKyl0aGlzLnJlc3VsdCs9dGhpcy5jb2x1bW5TZXBhcmF0b3IrdGhpcy5wdXRJblF1b3RlcygiIil9b25OZXdIZWFkZXJSb3coKXtyZXR1cm4gdGhpcy5iZWdpbk5ld0xpbmUoKSx7b25Db2x1bW46dGhpcy5vbk5ld0hlYWRlclJvd0NvbHVtbi5iaW5kKHRoaXMpfX1vbk5ld0hlYWRlclJvd0NvbHVtbihlLHQpezAhPXQmJih0aGlzLnJlc3VsdCs9dGhpcy5jb2x1bW5TZXBhcmF0b3IpLHRoaXMucmVzdWx0Kz10aGlzLnB1dEluUXVvdGVzKHRoaXMuZXh0cmFjdEhlYWRlclZhbHVlKGUpKX1vbk5ld0JvZHlSb3coKXtyZXR1cm4gdGhpcy5iZWdpbk5ld0xpbmUoKSx7b25Db2x1bW46dGhpcy5vbk5ld0JvZHlSb3dDb2x1bW4uYmluZCh0aGlzKX19b25OZXdCb2R5Um93Q29sdW1uKGUsdCxpKXt2YXIgczswIT10JiYodGhpcy5yZXN1bHQrPXRoaXMuY29sdW1uU2VwYXJhdG9yKTtjb25zdCByPXRoaXMuZXh0cmFjdFJvd0NlbGxWYWx1ZShlLHQsdCwiY3N2IixpKTt0aGlzLnJlc3VsdCs9dGhpcy5wdXRJblF1b3RlcyhudWxsIT09KHM9ci52YWx1ZUZvcm1hdHRlZCkmJnZvaWQgMCE9PXM/czpyLnZhbHVlKX1wdXRJblF1b3RlcyhlKXtpZih0aGlzLnN1cHByZXNzUXVvdGVzKXJldHVybiBlO2lmKG51bGw9PWUpcmV0dXJuJyIiJztsZXQgdDsic3RyaW5nIj09dHlwZW9mIGU/dD1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlLnRvU3RyaW5nP3Q9ZS50b1N0cmluZygpOihjb25zb2xlLndhcm4oIkFHIEdyaWQ6IHVua25vd24gdmFsdWUgdHlwZSBkdXJpbmcgY3N2IGNvbnZlcnNpb24iKSx0PSIiKTtyZXR1cm4nIicrdC5yZXBsYWNlKC8iL2csJyIiJykrJyInfXBhcnNlKCl7cmV0dXJuIHRoaXMucmVzdWx0fWJlZ2luTmV3TGluZSgpe3RoaXMuaXNGaXJzdExpbmV8fCh0aGlzLnJlc3VsdCs9IlxyXG4iKSx0aGlzLmlzRmlyc3RMaW5lPSExfX12YXIgbD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgZD1jbGFzcyBleHRlbmRzIHN7cG9zdENvbnN0cnVjdCgpe3RoaXMuc2V0QmVhbnMoe2dyaWRTZXJpYWxpemVyOnRoaXMuZ3JpZFNlcmlhbGl6ZXIsZ3JpZE9wdGlvbnNTZXJ2aWNlOnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlfSl9Z2V0TWVyZ2VkUGFyYW1zKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJkZWZhdWx0Q3N2RXhwb3J0UGFyYW1zIik7cmV0dXJuIE9iamVjdC5hc3NpZ24oe30sdCxlKX1leHBvcnQoZSl7aWYodGhpcy5pc0V4cG9ydFN1cHByZXNzZWQoKSlyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IEV4cG9ydCBjYW5jZWxsZWQuIEV4cG9ydCBpcyBub3QgYWxsb3dlZCBhcyBwZXIgeW91ciBjb25maWd1cmF0aW9uLiIpO2NvbnN0IHQ9dGhpcy5nZXRNZXJnZWRQYXJhbXMoZSksaT10aGlzLmdldERhdGEodCkscz1uZXcgQmxvYihbIlx1ZmVmZiIsaV0se3R5cGU6InRleHQvcGxhaW4ifSkscj0iZnVuY3Rpb24iPT10eXBlb2YgdC5maWxlTmFtZT90LmZpbGVOYW1lKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldEdyaWRDb21tb25QYXJhbXMoKSk6dC5maWxlTmFtZTtuLmRvd25sb2FkKHRoaXMuZ2V0RmlsZU5hbWUocikscyl9ZXhwb3J0RGF0YUFzQ3N2KGUpe3RoaXMuZXhwb3J0KGUpfWdldERhdGFBc0NzdihlLHQ9ITEpe2NvbnN0IGk9dD9PYmplY3QuYXNzaWduKHt9LGUpOnRoaXMuZ2V0TWVyZ2VkUGFyYW1zKGUpO3JldHVybiB0aGlzLmdldERhdGEoaSl9Z2V0RGVmYXVsdEZpbGVFeHRlbnNpb24oKXtyZXR1cm4iY3N2In1jcmVhdGVTZXJpYWxpemluZ1Nlc3Npb24oZSl7Y29uc3R7Y29sdW1uTW9kZWw6dCx2YWx1ZVNlcnZpY2U6aSxncmlkT3B0aW9uc1NlcnZpY2U6cyx2YWx1ZUZvcm1hdHRlclNlcnZpY2U6cix2YWx1ZVBhcnNlclNlcnZpY2U6b309dGhpcyx7cHJvY2Vzc0NlbGxDYWxsYmFjazpuLHByb2Nlc3NIZWFkZXJDYWxsYmFjazpsLHByb2Nlc3NHcm91cEhlYWRlckNhbGxiYWNrOmQscHJvY2Vzc1Jvd0dyb3VwQ2FsbGJhY2s6YyxzdXBwcmVzc1F1b3RlczpoLGNvbHVtblNlcGFyYXRvcjp1fT1lO3JldHVybiBuZXcgYSh7Y29sdW1uTW9kZWw6dCx2YWx1ZVNlcnZpY2U6aSxncmlkT3B0aW9uc1NlcnZpY2U6cyx2YWx1ZUZvcm1hdHRlclNlcnZpY2U6cix2YWx1ZVBhcnNlclNlcnZpY2U6byxwcm9jZXNzQ2VsbENhbGxiYWNrOm58fHZvaWQgMCxwcm9jZXNzSGVhZGVyQ2FsbGJhY2s6bHx8dm9pZCAwLHByb2Nlc3NHcm91cEhlYWRlckNhbGxiYWNrOmR8fHZvaWQgMCxwcm9jZXNzUm93R3JvdXBDYWxsYmFjazpjfHx2b2lkIDAsc3VwcHJlc3NRdW90ZXM6aHx8ITEsY29sdW1uU2VwYXJhdG9yOnV8fCIsIn0pfWlzRXhwb3J0U3VwcHJlc3NlZCgpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQ3N2RXhwb3J0Iil9fTtsKFtPYmplY3Qoby5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSxkLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksbChbT2JqZWN0KG8uQXV0b3dpcmVkKSgidmFsdWVTZXJ2aWNlIildLGQucHJvdG90eXBlLCJ2YWx1ZVNlcnZpY2UiLHZvaWQgMCksbChbT2JqZWN0KG8uQXV0b3dpcmVkKSgiZ3JpZFNlcmlhbGl6ZXIiKV0sZC5wcm90b3R5cGUsImdyaWRTZXJpYWxpemVyIix2b2lkIDApLGwoW09iamVjdChvLkF1dG93aXJlZCkoImdyaWRPcHRpb25zU2VydmljZSIpXSxkLnByb3RvdHlwZSwiZ3JpZE9wdGlvbnNTZXJ2aWNlIix2b2lkIDApLGwoW09iamVjdChvLkF1dG93aXJlZCkoInZhbHVlRm9ybWF0dGVyU2VydmljZSIpXSxkLnByb3RvdHlwZSwidmFsdWVGb3JtYXR0ZXJTZXJ2aWNlIix2b2lkIDApLGwoW09iamVjdChvLkF1dG93aXJlZCkoInZhbHVlUGFyc2VyU2VydmljZSIpXSxkLnByb3RvdHlwZSwidmFsdWVQYXJzZXJTZXJ2aWNlIix2b2lkIDApLGwoW28uUG9zdENvbnN0cnVjdF0sZC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLGQ9bChbT2JqZWN0KG8uQmVhbikoImNzdkNyZWF0b3IiKV0sZCk7dmFyIGMsaD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTshZnVuY3Rpb24oZSl7ZVtlLkhFQURFUl9HUk9VUElORz0wXT0iSEVBREVSX0dST1VQSU5HIixlW2UuSEVBREVSPTFdPSJIRUFERVIiLGVbZS5CT0RZPTJdPSJCT0RZIn0oY3x8KGM9e30pKTtsZXQgdT1jbGFzcyBleHRlbmRzIG8uQmVhblN0dWJ7c2VyaWFsaXplKGUsdD17fSl7Y29uc3R7YWxsQ29sdW1uczppLGNvbHVtbktleXM6cyxza2lwUm93R3JvdXBzOnJ9PXQsbj10aGlzLmdldENvbHVtbnNUb0V4cG9ydChpLHIscyk7cmV0dXJuIG8uXy5jb21wb3NlKHRoaXMucHJlcGFyZVNlc3Npb24obiksdGhpcy5wcmVwZW5kQ29udGVudCh0KSx0aGlzLmV4cG9ydENvbHVtbkdyb3Vwcyh0LG4pLHRoaXMuZXhwb3J0SGVhZGVycyh0LG4pLHRoaXMucHJvY2Vzc1Bpbm5lZFRvcFJvd3ModCxuKSx0aGlzLnByb2Nlc3NSb3dzKHQsbiksdGhpcy5wcm9jZXNzUGlubmVkQm90dG9tUm93cyh0LG4pLHRoaXMuYXBwZW5kQ29udGVudCh0KSkoZSkucGFyc2UoKX1wcm9jZXNzUm93KGUsdCxpLHMpe2NvbnN0IHI9dC5zaG91bGRSb3dCZVNraXBwZWR8fCgoKT0+ITEpLG89dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cFJlbW92ZVNpbmdsZUNoaWxkcmVuIiksbj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwUmVtb3ZlTG93ZXN0U2luZ2xlQ2hpbGRyZW4iKSxhPW51bGwhPXQucm93UG9zaXRpb25zfHwhIXQub25seVNlbGVjdGVkLGw9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cEhpZGVPcGVuUGFyZW50cyIpJiYhYSxkPXRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKT9zLmxlYWZHcm91cDohcy5ncm91cCxjPSEhcy5mb290ZXIsaD0odC5za2lwUm93R3JvdXBzLG4mJnMubGVhZkdyb3VwKSx1PTE9PT1zLmFsbENoaWxkcmVuQ291bnQmJihvfHxoKTtpZighZCYmIWMmJih0LnNraXBSb3dHcm91cHN8fHV8fGwpfHx0Lm9ubHlTZWxlY3RlZCYmIXMuaXNTZWxlY3RlZCgpfHx0LnNraXBQaW5uZWRUb3AmJiJ0b3AiPT09cy5yb3dQaW5uZWR8fHQuc2tpcFBpbm5lZEJvdHRvbSYmImJvdHRvbSI9PT1zLnJvd1Bpbm5lZClyZXR1cm47aWYoLTE9PT1zLmxldmVsJiYhZCYmIWMpcmV0dXJuO2lmKHIodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7bm9kZTpzfSkpKXJldHVybjtjb25zdCBwPWUub25OZXdCb2R5Um93KHMpO2lmKGkuZm9yRWFjaCgoZSx0KT0+e3Aub25Db2x1bW4oZSx0LHMpfSksdC5nZXRDdXN0b21Db250ZW50QmVsb3dSb3cpe2NvbnN0IGk9dC5nZXRDdXN0b21Db250ZW50QmVsb3dSb3codGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7bm9kZTpzfSkpO2kmJmUuYWRkQ3VzdG9tQ29udGVudChpKX19YXBwZW5kQ29udGVudChlKXtyZXR1cm4gdD0+e2NvbnN0IGk9ZS5hcHBlbmRDb250ZW50O3JldHVybiBpJiZ0LmFkZEN1c3RvbUNvbnRlbnQoaSksdH19cHJlcGVuZENvbnRlbnQoZSl7cmV0dXJuIHQ9Pntjb25zdCBpPWUucHJlcGVuZENvbnRlbnQ7cmV0dXJuIGkmJnQuYWRkQ3VzdG9tQ29udGVudChpKSx0fX1wcmVwYXJlU2Vzc2lvbihlKXtyZXR1cm4gdD0+KHQucHJlcGFyZShlKSx0KX1leHBvcnRDb2x1bW5Hcm91cHMoZSx0KXtyZXR1cm4gaT0+e2lmKCFlLnNraXBDb2x1bW5Hcm91cEhlYWRlcnMpe2NvbnN0IHM9bmV3IG8uR3JvdXBJbnN0YW5jZUlkQ3JlYXRvcixyPXRoaXMuZGlzcGxheWVkR3JvdXBDcmVhdG9yLmNyZWF0ZURpc3BsYXllZEdyb3Vwcyh0LHMsbnVsbCk7dGhpcy5yZWN1cnNpdmVseUFkZEhlYWRlckdyb3VwcyhyLGksZS5wcm9jZXNzR3JvdXBIZWFkZXJDYWxsYmFjayl9cmV0dXJuIGl9fWV4cG9ydEhlYWRlcnMoZSx0KXtyZXR1cm4gaT0+e2lmKCFlLnNraXBDb2x1bW5IZWFkZXJzKXtjb25zdCBlPWkub25OZXdIZWFkZXJSb3coKTt0LmZvckVhY2goKHQsaSk9PntlLm9uQ29sdW1uKHQsaSx2b2lkIDApfSl9cmV0dXJuIGl9fXByb2Nlc3NQaW5uZWRUb3BSb3dzKGUsdCl7cmV0dXJuIGk9Pntjb25zdCBzPXRoaXMucHJvY2Vzc1Jvdy5iaW5kKHRoaXMsaSxlLHQpO3JldHVybiBlLnJvd1Bvc2l0aW9ucz9lLnJvd1Bvc2l0aW9ucy5maWx0ZXIoZT0+InRvcCI9PT1lLnJvd1Bpbm5lZCkuc29ydCgoZSx0KT0+ZS5yb3dJbmRleC10LnJvd0luZGV4KS5tYXAoZT0+dGhpcy5waW5uZWRSb3dNb2RlbC5nZXRQaW5uZWRUb3BSb3coZS5yb3dJbmRleCkpLmZvckVhY2gocyk6dGhpcy5waW5uZWRSb3dNb2RlbC5mb3JFYWNoUGlubmVkVG9wUm93KHMpLGl9fXByb2Nlc3NSb3dzKGUsdCl7cmV0dXJuIGk9Pntjb25zdCBzPXRoaXMucm93TW9kZWwscj1zLmdldFR5cGUoKSxvPSJjbGllbnRTaWRlIj09PXIsbj0ic2VydmVyU2lkZSI9PT1yLGE9IW8mJmUub25seVNlbGVjdGVkLGw9dGhpcy5wcm9jZXNzUm93LmJpbmQodGhpcyxpLGUsdCkse2V4cG9ydGVkUm93czpkPSJmaWx0ZXJlZEFuZFNvcnRlZCJ9PWU7aWYoZS5yb3dQb3NpdGlvbnMpZS5yb3dQb3NpdGlvbnMuZmlsdGVyKGU9Pm51bGw9PWUucm93UGlubmVkKS5zb3J0KChlLHQpPT5lLnJvd0luZGV4LXQucm93SW5kZXgpLm1hcChlPT5zLmdldFJvdyhlLnJvd0luZGV4KSkuZm9yRWFjaChsKTtlbHNlIGlmKHRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSlvP3MuZm9yRWFjaFBpdm90Tm9kZShsLCEwKTpuP3MuZm9yRWFjaE5vZGVBZnRlckZpbHRlckFuZFNvcnQobCwhMCk6cy5mb3JFYWNoTm9kZShsKTtlbHNlIGlmKGUub25seVNlbGVjdGVkQWxsUGFnZXN8fGEpe2NvbnN0IGU9dGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmdldFNlbGVjdGVkTm9kZXMoKTt0aGlzLnJlcGxpY2F0ZVNvcnRlZE9yZGVyKGUpLGUuZm9yRWFjaChsKX1lbHNlImFsbCI9PT1kP3MuZm9yRWFjaE5vZGUobCk6b3x8bj9zLmZvckVhY2hOb2RlQWZ0ZXJGaWx0ZXJBbmRTb3J0KGwsITApOnMuZm9yRWFjaE5vZGUobCk7cmV0dXJuIGl9fXJlcGxpY2F0ZVNvcnRlZE9yZGVyKGUpe2NvbnN0IHQ9dGhpcy5zb3J0Q29udHJvbGxlci5nZXRTb3J0T3B0aW9ucygpLGk9KGUscyk9Pnt2YXIgcixvLG4sYTtyZXR1cm4gbnVsbCE9ZS5yb3dJbmRleCYmbnVsbCE9cy5yb3dJbmRleD9lLnJvd0luZGV4LXMucm93SW5kZXg6ZS5sZXZlbD09PXMubGV2ZWw/KG51bGw9PT0ocj1lLnBhcmVudCl8fHZvaWQgMD09PXI/dm9pZCAwOnIuaWQpPT09KG51bGw9PT0obz1zLnBhcmVudCl8fHZvaWQgMD09PW8/dm9pZCAwOm8uaWQpP3RoaXMucm93Tm9kZVNvcnRlci5jb21wYXJlUm93Tm9kZXModCx7cm93Tm9kZTplLGN1cnJlbnRQb3M6bnVsbCE9PShuPWUucm93SW5kZXgpJiZ2b2lkIDAhPT1uP246LTF9LHtyb3dOb2RlOnMsY3VycmVudFBvczpudWxsIT09KGE9cy5yb3dJbmRleCkmJnZvaWQgMCE9PWE/YTotMX0pOmkoZS5wYXJlbnQscy5wYXJlbnQpOmUubGV2ZWw+cy5sZXZlbD9pKGUucGFyZW50LHMpOmkoZSxzLnBhcmVudCl9O2Uuc29ydChpKX1wcm9jZXNzUGlubmVkQm90dG9tUm93cyhlLHQpe3JldHVybiBpPT57Y29uc3Qgcz10aGlzLnByb2Nlc3NSb3cuYmluZCh0aGlzLGksZSx0KTtyZXR1cm4gZS5yb3dQb3NpdGlvbnM/ZS5yb3dQb3NpdGlvbnMuZmlsdGVyKGU9PiJib3R0b20iPT09ZS5yb3dQaW5uZWQpLnNvcnQoKGUsdCk9PmUucm93SW5kZXgtdC5yb3dJbmRleCkubWFwKGU9PnRoaXMucGlubmVkUm93TW9kZWwuZ2V0UGlubmVkQm90dG9tUm93KGUucm93SW5kZXgpKS5mb3JFYWNoKHMpOnRoaXMucGlubmVkUm93TW9kZWwuZm9yRWFjaFBpbm5lZEJvdHRvbVJvdyhzKSxpfX1nZXRDb2x1bW5zVG9FeHBvcnQoZT0hMSx0PSExLGkpe2NvbnN0IHM9dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpO2lmKGkmJmkubGVuZ3RoKXJldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW5zKGkpO2NvbnN0IHI9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpO2xldCBuPVtdO3JldHVybiBuPWUmJiFzP3RoaXMuY29sdW1uTW9kZWwuZ2V0QWxsR3JpZENvbHVtbnMoKTp0aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKSx0JiYhciYmKG49bi5maWx0ZXIoZT0+ZS5nZXRDb2xJZCgpIT09by5HUk9VUF9BVVRPX0NPTFVNTl9JRCkpLG59cmVjdXJzaXZlbHlBZGRIZWFkZXJHcm91cHMoZSx0LGkpe2NvbnN0IHM9W107ZS5mb3JFYWNoKGU9Pntjb25zdCB0PWU7dC5nZXRDaGlsZHJlbiYmdC5nZXRDaGlsZHJlbigpLmZvckVhY2goZT0+cy5wdXNoKGUpKX0pLGUubGVuZ3RoPjAmJmVbMF1pbnN0YW5jZW9mIG8uQ29sdW1uR3JvdXAmJnRoaXMuZG9BZGRIZWFkZXJIZWFkZXIodCxlLGkpLHMmJnMubGVuZ3RoPjAmJnRoaXMucmVjdXJzaXZlbHlBZGRIZWFkZXJHcm91cHMocyx0LGkpfWRvQWRkSGVhZGVySGVhZGVyKGUsdCxpKXtjb25zdCBzPWUub25OZXdIZWFkZXJHcm91cGluZ1JvdygpO2xldCByPTA7dC5mb3JFYWNoKGU9Pntjb25zdCB0PWU7bGV0IG47bj1pP2kodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7Y29sdW1uR3JvdXA6dH0pKTp0aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXlOYW1lRm9yQ29sdW1uR3JvdXAodCwiaGVhZGVyIik7Y29uc3QgYT10LmdldExlYWZDb2x1bW5zKCkucmVkdWNlKChlLHQsaSxzKT0+e2xldCByPW8uXy5sYXN0KGUpO3JldHVybiJvcGVuIj09PXQuZ2V0Q29sdW1uR3JvdXBTaG93KCk/ciYmbnVsbD09clsxXXx8KHI9W2ldLGUucHVzaChyKSk6ciYmbnVsbD09clsxXSYmKHJbMV09aS0xKSxpPT09cy5sZW5ndGgtMSYmciYmbnVsbD09clsxXSYmKHJbMV09aSksZX0sW10pO3Mub25Db2x1bW4odCxufHwiIixyKyssdC5nZXRMZWFmQ29sdW1ucygpLmxlbmd0aC0xLGEpfSl9fTtoKFtPYmplY3Qoby5BdXRvd2lyZWQpKCJkaXNwbGF5ZWRHcm91cENyZWF0b3IiKV0sdS5wcm90b3R5cGUsImRpc3BsYXllZEdyb3VwQ3JlYXRvciIsdm9pZCAwKSxoKFtPYmplY3Qoby5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSx1LnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksaChbT2JqZWN0KG8uQXV0b3dpcmVkKSgicm93TW9kZWwiKV0sdS5wcm90b3R5cGUsInJvd01vZGVsIix2b2lkIDApLGgoW09iamVjdChvLkF1dG93aXJlZCkoInBpbm5lZFJvd01vZGVsIildLHUucHJvdG90eXBlLCJwaW5uZWRSb3dNb2RlbCIsdm9pZCAwKSxoKFtPYmplY3Qoby5BdXRvd2lyZWQpKCJzZWxlY3Rpb25TZXJ2aWNlIildLHUucHJvdG90eXBlLCJzZWxlY3Rpb25TZXJ2aWNlIix2b2lkIDApLGgoW09iamVjdChvLkF1dG93aXJlZCkoInJvd05vZGVTb3J0ZXIiKV0sdS5wcm90b3R5cGUsInJvd05vZGVTb3J0ZXIiLHZvaWQgMCksaChbT2JqZWN0KG8uQXV0b3dpcmVkKSgic29ydENvbnRyb2xsZXIiKV0sdS5wcm90b3R5cGUsInNvcnRDb250cm9sbGVyIix2b2lkIDApLHU9aChbT2JqZWN0KG8uQmVhbikoImdyaWRTZXJpYWxpemVyIildLHUpO2NvbnN0IHA9e3ZlcnNpb246IjMxLjEuMSIsbW9kdWxlTmFtZTpvLk1vZHVsZU5hbWVzLkNzdkV4cG9ydE1vZHVsZSxiZWFuczpbZCx1XX07Y2xhc3MgZ3tzdGF0aWMgY3JlYXRlSGVhZGVyKGU9e30pe2NvbnN0IHQ9WyJ2ZXJzaW9uIl07ZS52ZXJzaW9ufHwoZS52ZXJzaW9uPSIxLjAiKSxlLmVuY29kaW5nJiZ0LnB1c2goImVuY29kaW5nIiksZS5zdGFuZGFsb25lJiZ0LnB1c2goInN0YW5kYWxvbmUiKTtyZXR1cm5gPD94bWwgJHt0Lm1hcCh0PT5gJHt0fT0iJHtlW3RdfSJgKS5qb2luKCIgIil9ID8+YH1zdGF0aWMgY3JlYXRlWG1sKGUsdCl7bGV0IGk9IiI7ZS5wcm9wZXJ0aWVzJiYoZS5wcm9wZXJ0aWVzLnByZWZpeGVkQXR0cmlidXRlcyYmZS5wcm9wZXJ0aWVzLnByZWZpeGVkQXR0cmlidXRlcy5mb3JFYWNoKGU9PntPYmplY3Qua2V5cyhlLm1hcCkuZm9yRWFjaChzPT57aSs9dGhpcy5yZXR1cm5BdHRyaWJ1dGVJZlBvcHVsYXRlZChlLnByZWZpeCtzLGUubWFwW3NdLHQpfSl9KSxlLnByb3BlcnRpZXMucmF3TWFwJiZPYmplY3Qua2V5cyhlLnByb3BlcnRpZXMucmF3TWFwKS5mb3JFYWNoKHM9PntpKz10aGlzLnJldHVybkF0dHJpYnV0ZUlmUG9wdWxhdGVkKHMsZS5wcm9wZXJ0aWVzLnJhd01hcFtzXSx0KX0pKTtsZXQgcz0iPCIrZS5uYW1lK2k7cmV0dXJuIGUuY2hpbGRyZW58fG51bGwhPWUudGV4dE5vZGU/bnVsbCE9ZS50ZXh0Tm9kZT9zKyI+IitlLnRleHROb2RlKyI8LyIrZS5uYW1lKyI+XHJcbiI6KHMrPSI+XHJcbiIsZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5mb3JFYWNoKGU9PntzKz10aGlzLmNyZWF0ZVhtbChlLHQpfSkscysiPC8iK2UubmFtZSsiPlxyXG4iKTpzKyIvPlxyXG4ifXN0YXRpYyByZXR1cm5BdHRyaWJ1dGVJZlBvcHVsYXRlZChlLHQsaSl7aWYoIXQmJiIiIT09dCYmMCE9PXQpcmV0dXJuIiI7bGV0IHM9dDtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiB0JiZpJiYocz1pKHQpKSxgICR7ZX09IiR7c30iYH19ZnVuY3Rpb24gbShlLHQpe2xldCBpPSIiO2ZvcihsZXQgcz0wO3M8dDtzKyspaSs9U3RyaW5nLmZyb21DaGFyQ29kZSgyNTUmZSksZT4+Pj04O3JldHVybiBpfWNvbnN0IGY9ZT0+e2lmKCFlLmxlbmd0aClyZXR1cm4gMDtsZXQgdD0tMSxpPTAscz0wLHI9MDtmb3IobGV0IG89MDtvPGUubGVuZ3RoO28rKylpPWVbb10scz0yNTUmKHReaSkscj1DW3NdLHQ9dD4+PjhecjtyZXR1cm4tMV50fSx2PWU9PmUubGVuZ3RoP2YoInN0cmluZyI9PXR5cGVvZiBlPyhuZXcgVGV4dEVuY29kZXIpLmVuY29kZShlKTplKTowLEM9bmV3IFVpbnQzMkFycmF5KFswLDE5OTY5NTk4OTQsMzk5MzkxOTc4OCwyNTY3NTI0Nzk0LDEyNDYzNDEzNywxODg2MDU3NjE1LDM5MTU2MjE2ODUsMjY1NzM5MjAzNSwyNDkyNjgyNzQsMjA0NDUwODMyNCwzNzcyMTE1MjMwLDI1NDcxNzc4NjQsMTYyOTQxOTk1LDIxMjU1NjEwMjEsMzg4NzYwNzA0NywyNDI4NDQ0MDQ5LDQ5ODUzNjU0OCwxNzg5OTI3NjY2LDQwODkwMTY2NDgsMjIyNzA2MTIxNCw0NTA1NDg4NjEsMTg0MzI1ODYwMyw0MTA3NTgwNzUzLDIyMTE2Nzc2MzksMzI1ODgzOTkwLDE2ODQ3NzcxNTIsNDI1MTEyMjA0MiwyMzIxOTI2NjM2LDMzNTYzMzQ4NywxNjYxMzY1NDY1LDQxOTUzMDI3NTUsMjM2NjExNTMxNyw5OTcwNzMwOTYsMTI4MTk1Mzg4NiwzNTc5ODU1MzMyLDI3MjQ2ODgyNDIsMTAwNjg4ODE0NSwxMjU4NjA3Njg3LDM1MjQxMDE2MjksMjc2ODk0MjQ0Myw5MDEwOTc3MjIsMTExOTAwMDY4NCwzNjg2NTE3MjA2LDI4OTgwNjU3MjgsODUzMDQ0NDUxLDExNzIyNjYxMDEsMzcwNTAxNTc1OSwyODgyNjE2NjY1LDY1MTc2Nzk4MCwxMzczNTAzNTQ2LDMzNjk1NTQzMDQsMzIxODEwNDU5OCw1NjU1MDcyNTMsMTQ1NDYyMTczMSwzNDg1MTExNzA1LDMwOTk0MzYzMDMsNjcxMjY2OTc0LDE1OTQxOTgwMjQsMzMyMjczMDkzMCwyOTcwMzQ3ODEyLDc5NTgzNTUyNywxNDgzMjMwMjI1LDMyNDQzNjcyNzUsMzA2MDE0OTU2NSwxOTk0MTQ2MTkyLDMxMTU4NTM0LDI1NjM5MDc3NzIsNDAyMzcxNzkzMCwxOTA3NDU5NDY1LDExMjYzNzIxNSwyNjgwMTUzMjUzLDM5MDQ0MjcwNTksMjAxMzc3NjI5MCwyNTE3MjIwMzYsMjUxNzIxNTM3NCwzNzc1ODMwMDQwLDIxMzc2NTY3NjMsMTQxMzc2ODEzLDI0MzkyNzc3MTksMzg2NTI3MTI5NywxODAyMTk1NDQ0LDQ3Njg2NDg2NiwyMjM4MDAxMzY4LDQwNjY1MDg4NzgsMTgxMjM3MDkyNSw0NTMwOTI3MzEsMjE4MTYyNTAyNSw0MTExNDUxMjIzLDE3MDYwODg5MDIsMzE0MDQyNzA0LDIzNDQ1MzIyMDIsNDI0MDAxNzUzMiwxNjU4NjU4MjcxLDM2NjYxOTk3NywyMzYyNjcwMzIzLDQyMjQ5OTQ0MDUsMTMwMzUzNTk2MCw5ODQ5NjE0ODYsMjc0NzAwNzA5MiwzNTY5MDM3NTM4LDEyNTYxNzA4MTcsMTAzNzYwNDMxMSwyNzY1MjEwNzMzLDM1NTQwNzk5OTUsMTEzMTAxNDUwNiw4Nzk2Nzk5OTYsMjkwOTI0MzQ2MiwzNjYzNzcxODU2LDExNDExMjQ0NjcsODU1ODQyMjc3LDI4NTI4MDE2MzEsMzcwODY0ODY0OSwxMzQyNTMzOTQ4LDY1NDQ1OTMwNiwzMTg4Mzk2MDQ4LDMzNzMwMTUxNzQsMTQ2NjQ3OTkwOSw1NDQxNzk2MzUsMzExMDUyMzkxMywzNDYyNTIyMDE1LDE1OTE2NzEwNTQsNzAyMTM4Nzc2LDI5NjY0NjA0NTAsMzM1Mjc5OTQxMiwxNTA0OTE4ODA3LDc4MzU1MTg3MywzMDgyNjQwNDQzLDMyMzM0NDI5ODksMzk4ODI5MjM4NCwyNTk2MjU0NjQ2LDYyMzE3MDY4LDE5NTc4MTA4NDIsMzkzOTg0NTk0NSwyNjQ3ODE2MTExLDgxNDcwOTk3LDE5NDM4MDM1MjMsMzgxNDkxODkzMCwyNDg5NTk2ODA0LDIyNTI3NDQzMCwyMDUzNzkwMzc2LDM4MjYxNzU3NTUsMjQ2NjkwNjAxMywxNjc4MTY3NDMsMjA5NzY1MTM3Nyw0MDI3NTUyNTgwLDIyNjU0OTAzODYsNTAzNDQ0MDcyLDE3NjIwNTA4MTQsNDE1MDQxNzI0NSwyMTU0MTI5MzU1LDQyNjUyMjIyNSwxODUyNTA3ODc5LDQyNzUzMTM1MjYsMjMxMjMxNzkyMCwyODI3NTM2MjYsMTc0MjU1NTg1Miw0MTg5NzA4MTQzLDIzOTQ4Nzc5NDUsMzk3OTE3NzYzLDE2MjIxODM2MzcsMzYwNDM5MDg4OCwyNzE0ODY2NTU4LDk1MzcyOTczMiwxMzQwMDc2NjI2LDM1MTg3MTk5ODUsMjc5NzM2MDk5OSwxMDY4ODI4MzgxLDEyMTk2Mzg4NTksMzYyNDc0MTg1MCwyOTM2Njc1MTQ4LDkwNjE4NTQ2MiwxMDkwODEyNTEyLDM3NDc2NzIwMDMsMjgyNTM3OTY2OSw4MjkzMjkxMzUsMTE4MTMzNTE2MSwzNDEyMTc3ODA0LDMxNjA4MzQ4NDIsNjI4MDg1NDA4LDEzODI2MDUzNjYsMzQyMzM2OTEwOSwzMTM4MDc4NDY3LDU3MDU2MjIzMywxNDI2NDAwODE1LDMzMTczMTY1NDIsMjk5ODczMzYwOCw3MzMyMzk5NTQsMTU1NTI2MTk1NiwzMjY4OTM1NTkxLDMwNTAzNjA2MjUsNzUyNDU5NDAzLDE1NDEzMjAyMjEsMjYwNzA3MTkyMCwzOTY1OTczMDMwLDE5Njk5MjI5NzIsNDA3MzU0OTgsMjYxNzgzNzIyNSwzOTQzNTc3MTUxLDE5MTMwODc4NzcsODM5MDgzNzEsMjUxMjM0MTYzNCwzODAzNzQwNjkyLDIwNzUyMDg2MjIsMjEzMjYxMTEyLDI0NjMyNzI2MDMsMzg1NTk5MDI4NSwyMDk0ODU0MDcxLDE5ODk1ODg4MSwyMjYyMDI5MDEyLDQwNTcyNjA2MTAsMTc1OTM1OTk5Miw1MzQ0MTQxOTAsMjE3NjcxODU0MSw0MTM5MzI5MTE1LDE4NzM4MzYwMDEsNDE0NjY0NTY3LDIyODIyNDg5MzQsNDI3OTIwMDM2OCwxNzExNjg0NTU0LDI4NTI4MTExNiwyNDA1ODAxNzI3LDQxNjcyMTY3NDUsMTYzNDQ2Nzc5NSwzNzYyMjk3MDEsMjY4NTA2Nzg5NiwzNjA4MDA3NDA2LDEzMDg5MTg2MTIsOTU2NTQzOTM4LDI4MDg1NTUxMDUsMzQ5NTk1ODI2MywxMjMxNjM2MzAxLDEwNDc0MjcwMzUsMjkzMjk1OTgxOCwzNjU0NzAzODM2LDEwODgzNTkyNzAsOTM2OTE4ZTMsMjg0NzcxNDg5OSwzNzM2ODM3ODI5LDEyMDI5MDA4NjMsODE3MjMzODk3LDMxODMzNDIxMDgsMzQwMTIzNzEzMCwxNDA0Mjc3NTUyLDYxNTgxODE1MCwzMTM0MjA3NDkzLDM0NTM0MjEyMDMsMTQyMzg1NzQ0OSw2MDE0NTA0MzEsMzAwOTgzNzYxNCwzMjk0NzEwNDU2LDE1NjcxMDM3NDYsNzExOTI4NzI0LDMwMjA2Njg0NzEsMzI3MjM4MDA2NSwxNTEwMzM0MjM1LDc1NTE2NzExN10pO3ZhciB5PWZ1bmN0aW9uKGUsdCxpLHMpe3JldHVybiBuZXcoaXx8KGk9UHJvbWlzZSkpKChmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIG4oZSl7dHJ5e2wocy5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBhKGUpe3RyeXtsKHMudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGwoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2YgaT90Om5ldyBpKChmdW5jdGlvbihlKXtlKHQpfSkpKS50aGVuKG4sYSl9bCgocz1zLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSkpfTtjb25zdCBTPWU9Pnkodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9bmV3IEJsb2IoW2VdKSx7c2l6ZTppLGNvbnRlbnQ6c309eWllbGQocj10LHkodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2xldCBlPTA7Y29uc3QgdD1bXSxpPW5ldyBXcml0YWJsZVN0cmVhbSh7d3JpdGU6aT0+e3QucHVzaChpKSxlKz1pLmxlbmd0aH19KSxzPW5ldyBSZWFkYWJsZVN0cmVhbSh7c3RhcnQ6ZT0+e2NvbnN0IHQ9bmV3IEZpbGVSZWFkZXI7dC5vbmxvYWQ9dD0+e3ZhciBpOyhudWxsPT09KGk9dC50YXJnZXQpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnJlc3VsdCkmJmUuZW5xdWV1ZSh0LnRhcmdldC5yZXN1bHQpLGUuY2xvc2UoKX0sdC5yZWFkQXNBcnJheUJ1ZmZlcihyKX19KSxvPW5ldyB3aW5kb3cuQ29tcHJlc3Npb25TdHJlYW0oImRlZmxhdGUtcmF3Iik7cmV0dXJuIHlpZWxkIHMucGlwZVRocm91Z2gobykucGlwZVRvKGkpLHtzaXplOmUsY29udGVudDpuZXcgQmxvYih0KX19KSkpO3ZhciByO3JldHVybntzaXplOmksY29udGVudDpuZXcgVWludDhBcnJheSh5aWVsZCBzLmFycmF5QnVmZmVyKCkpfX0pKTt2YXIgdz1mdW5jdGlvbihlLHQsaSxzKXtyZXR1cm4gbmV3KGl8fChpPVByb21pc2UpKSgoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBuKGUpe3RyeXtsKHMubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gYShlKXt0cnl7bChzLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBsKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIGk/dDpuZXcgaSgoZnVuY3Rpb24oZSl7ZSh0KX0pKSkudGhlbihuLGEpfWwoKHM9cy5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pKX07Y29uc3R7dXRmOF9lbmNvZGU6Yn09by5fLEU9KGUsdCk9Pncodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0e2NvbnRlbnQ6aX09ZSx7c2l6ZTpzLGNvbnRlbnQ6cn09aT9UKGkpOntzaXplOjAsY29udGVudDpVaW50OEFycmF5LmZyb20oW10pfTtsZXQgbz12b2lkIDAsbj12b2lkIDAsYT0hMTtpZigiZmlsZSI9PT1lLnR5cGUmJnImJnM+MCl7Y29uc3QgZT15aWVsZCBTKHIpO289ZS5jb250ZW50LG49ZS5zaXplLGE9ITB9Y29uc3QgbD14KGUsYSx0LHMscixuKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGwpLHtjb250ZW50Om98fHIsaXNDb21wcmVzc2VkOmF9KX0pKSxSPShlLHQpPT57Y29uc3R7Y29udGVudDppfT1lLHtjb250ZW50OnN9PWk/VChpKTp7Y29udGVudDpVaW50OEFycmF5LmZyb20oW10pfSxyPXgoZSwhMSx0LHMubGVuZ3RoLHMsdm9pZCAwKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIpLHtjb250ZW50OnMsaXNDb21wcmVzc2VkOiExfSl9LHg9KGUsdCxpLHMscixvKT0+e2NvbnN0e2NvbnRlbnQ6bixwYXRoOmEsY3JlYXRlZDpsfT1lLGQ9KGU9PntsZXQgdD1lLmdldEhvdXJzKCk7cmV0dXJuIHQ8PD02LHR8PWUuZ2V0TWludXRlcygpLHQ8PD01LHR8PWUuZ2V0U2Vjb25kcygpLzIsdH0pKGwpLGM9KGU9PntsZXQgdD1lLmdldEZ1bGxZZWFyKCktMTk4MDtyZXR1cm4gdDw8PTQsdHw9ZS5nZXRNb250aCgpKzEsdDw8PTUsdHw9ZS5nZXREYXRlKCksdH0pKGwpLGg9dihyKSx1PXZvaWQgMCE9PW8/bzpzLHA9YihhKSxnPXAhPT1hO2xldCBmPSIiO2lmKGcpe2NvbnN0IGU9bSgxLDEpK20odihwKSw0KStwO2Y9InVwIittKGUubGVuZ3RoLDIpK2V9Y29uc3QgQz0iFFwwIisoZz8iXDBcYiI6IlwwXDAiKSttKHQ/ODowLDIpK20oZCwyKSttKGMsMikrbSh1P2g6MCw0KSttKG51bGwhPW8/bzpzLDQpK20ocyw0KSttKHAubGVuZ3RoLDIpK20oZi5sZW5ndGgsMikseT0iUEsDBCIrQytwK2YsUz0iUEsBAhRcMCIrQysiXDBcMFwwXDBcMFwwIisobj8iXDBcMFwwXDAiOiIQXDBcMFwwIikrbShpLDQpK3ArZjtyZXR1cm57bG9jYWxGaWxlSGVhZGVyOlVpbnQ4QXJyYXkuZnJvbSh5LGU9PmUuY2hhckNvZGVBdCgwKSksY2VudHJhbERpcmVjdG9yeUhlYWRlcjpVaW50OEFycmF5LmZyb20oUyxlPT5lLmNoYXJDb2RlQXQoMCkpfX0sVD1lPT57bGV0IHQ7aWYoInN0cmluZyI9PXR5cGVvZiBlKXt0PShlPT57Y29uc3QgdD1uZXcgVWludDhBcnJheShlLmxlbmd0aCk7Zm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKyspdFtpXT1lLmNoYXJDb2RlQXQoaSk7cmV0dXJuIHR9KShhdG9iKGUuc3BsaXQoIjtiYXNlNjQsIilbMV0pKX1lbHNlIHQ9ZTtyZXR1cm57c2l6ZTp0Lmxlbmd0aCxjb250ZW50OnR9fTt2YXIgRD1mdW5jdGlvbihlLHQsaSxzKXtyZXR1cm4gbmV3KGl8fChpPVByb21pc2UpKSgoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBuKGUpe3RyeXtsKHMubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gYShlKXt0cnl7bChzLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBsKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIGk/dDpuZXcgaSgoZnVuY3Rpb24oZSl7ZSh0KX0pKSkudGhlbihuLGEpfWwoKHM9cy5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pKX07Y2xhc3MgT3tzdGF0aWMgYWRkRm9sZGVycyhlKXtlLmZvckVhY2godGhpcy5hZGRGb2xkZXIuYmluZCh0aGlzKSl9c3RhdGljIGFkZEZvbGRlcihlKXt0aGlzLmZvbGRlcnMucHVzaCh7cGF0aDplLGNyZWF0ZWQ6bmV3IERhdGUsaXNCYXNlNjQ6ITEsdHlwZToiZm9sZGVyIn0pfXN0YXRpYyBhZGRGaWxlKGUsdCxpPSExKXt0aGlzLmZpbGVzLnB1c2goe3BhdGg6ZSxjcmVhdGVkOm5ldyBEYXRlLGNvbnRlbnQ6aT90OihuZXcgVGV4dEVuY29kZXIpLmVuY29kZSh0KSxpc0Jhc2U2NDppLHR5cGU6ImZpbGUifSl9c3RhdGljIGdldFppcEZpbGUoZT0iYXBwbGljYXRpb24vemlwIil7cmV0dXJuIEQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuYnVpbGRDb21wcmVzc2VkRmlsZVN0cmVhbSgpO3JldHVybiB0aGlzLmNsZWFyU3RyZWFtKCksbmV3IEJsb2IoW3RdLHt0eXBlOmV9KX0pKX1zdGF0aWMgZ2V0VW5jb21wcmVzc2VkWmlwRmlsZShlPSJhcHBsaWNhdGlvbi96aXAiKXtjb25zdCB0PXRoaXMuYnVpbGRGaWxlU3RyZWFtKCk7cmV0dXJuIHRoaXMuY2xlYXJTdHJlYW0oKSxuZXcgQmxvYihbdF0se3R5cGU6ZX0pfXN0YXRpYyBjbGVhclN0cmVhbSgpe3RoaXMuZm9sZGVycz1bXSx0aGlzLmZpbGVzPVtdfXN0YXRpYyBwYWNrYWdlRmlsZXMoZSl7bGV0IHQ9bmV3IFVpbnQ4QXJyYXkoMCksaT1uZXcgVWludDhBcnJheSgwKSxzPTAscj0wO2Zvcihjb25zdCBvIG9mIGUpe2NvbnN0e2xvY2FsRmlsZUhlYWRlcjplLGNlbnRyYWxEaXJlY3RvcnlIZWFkZXI6bixjb250ZW50OmF9PW8sbD1uZXcgVWludDhBcnJheSh0Lmxlbmd0aCtlLmxlbmd0aCk7bC5zZXQodCksbC5zZXQoZSx0Lmxlbmd0aCksdD1sO2NvbnN0IGQ9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgrYS5sZW5ndGgpO2Quc2V0KHQpLGQuc2V0KGEsdC5sZW5ndGgpLHQ9ZDtjb25zdCBjPW5ldyBVaW50OEFycmF5KGkubGVuZ3RoK24ubGVuZ3RoKTtjLnNldChpKSxjLnNldChuLGkubGVuZ3RoKSxpPWMscys9ZS5sZW5ndGgrYS5sZW5ndGgscis9bi5sZW5ndGh9Y29uc3Qgbz0oKGUsdCxpKT0+e2NvbnN0IHM9IlBLBQZcMFwwXDBcMCIrbShlLDIpK20oZSwyKSttKHQsNCkrbShpLDQpKyJcMFwwIjtyZXR1cm4gVWludDhBcnJheS5mcm9tKHMsZT0+ZS5jaGFyQ29kZUF0KDApKX0pKGUubGVuZ3RoLHIscyksbj1uZXcgVWludDhBcnJheSh0Lmxlbmd0aCtpLmxlbmd0aCtvLmxlbmd0aCk7cmV0dXJuIG4uc2V0KHQpLG4uc2V0KGksdC5sZW5ndGgpLG4uc2V0KG8sdC5sZW5ndGgraS5sZW5ndGgpLG59c3RhdGljIGJ1aWxkQ29tcHJlc3NlZEZpbGVTdHJlYW0oKXtyZXR1cm4gRCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGU9Wy4uLnRoaXMuZm9sZGVycywuLi50aGlzLmZpbGVzXSx0PVtdO2xldCBpPTA7Zm9yKGNvbnN0IHMgb2YgZSl7Y29uc3QgZT15aWVsZCBFKHMsaSkse2xvY2FsRmlsZUhlYWRlcjpyLGNvbnRlbnQ6b309ZTt0LnB1c2goZSksaSs9ci5sZW5ndGgrby5sZW5ndGh9cmV0dXJuIHRoaXMucGFja2FnZUZpbGVzKHQpfSkpfXN0YXRpYyBidWlsZEZpbGVTdHJlYW0oKXtjb25zdCBlPVsuLi50aGlzLmZvbGRlcnMsLi4udGhpcy5maWxlc10sdD1bXTtsZXQgaT0wO2Zvcihjb25zdCBzIG9mIGUpe2NvbnN0IGU9UihzLGkpLHtsb2NhbEZpbGVIZWFkZXI6cixjb250ZW50Om99PWU7dC5wdXNoKGUpLGkrPXIubGVuZ3RoK28ubGVuZ3RofXJldHVybiB0aGlzLnBhY2thZ2VGaWxlcyh0KX19Ty5mb2xkZXJzPVtdLE8uZmlsZXM9W10saS5kKHQsIkJhc2VDcmVhdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gc30pKSxpLmQodCwiQmFzZUdyaWRTZXJpYWxpemluZ1Nlc3Npb24iLChmdW5jdGlvbigpe3JldHVybiByfSkpLGkuZCh0LCJDc3ZDcmVhdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gZH0pKSxpLmQodCwiQ3N2RXhwb3J0TW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gcH0pKSxpLmQodCwiRG93bmxvYWRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG59KSksaS5kKHQsIkdyaWRTZXJpYWxpemVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gdX0pKSxpLmQodCwiUm93VHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGN9KSksaS5kKHQsIlhtbEZhY3RvcnkiLChmdW5jdGlvbigpe3JldHVybiBnfSkpLGkuZCh0LCJaaXBDb250YWluZXIiLChmdW5jdGlvbigpe3JldHVybiBPfSkpfSxmdW5jdGlvbihlLHQsaSl7InVzZSBzdHJpY3QiO2kucih0KTt2YXIgcz1pKDApO2NsYXNzIHJ7Y29uc3RydWN0b3IoKXt0aGlzLmllQ29tcGF0aWJpbGl0eT0hMX1pbml0KCl7dGhpcy5pZUNvbXBhdGliaWxpdHk9IjVkNDE0MDJhYmM0YjJhNzZiOTcxOWQ5MTEwMTdjNTkyIiE9dGhpcy5tZDUoImhlbGxvIil9bWQ1Y3ljbGUoZSx0KXtsZXQgaT1lWzBdLHM9ZVsxXSxyPWVbMl0sbz1lWzNdO2k9dGhpcy5mZihpLHMscixvLHRbMF0sNywtNjgwODc2OTM2KSxvPXRoaXMuZmYobyxpLHMscix0WzFdLDEyLC0zODk1NjQ1ODYpLHI9dGhpcy5mZihyLG8saSxzLHRbMl0sMTcsNjA2MTA1ODE5KSxzPXRoaXMuZmYocyxyLG8saSx0WzNdLDIyLC0xMDQ0NTI1MzMwKSxpPXRoaXMuZmYoaSxzLHIsbyx0WzRdLDcsLTE3NjQxODg5Nyksbz10aGlzLmZmKG8saSxzLHIsdFs1XSwxMiwxMjAwMDgwNDI2KSxyPXRoaXMuZmYocixvLGkscyx0WzZdLDE3LC0xNDczMjMxMzQxKSxzPXRoaXMuZmYocyxyLG8saSx0WzddLDIyLC00NTcwNTk4MyksaT10aGlzLmZmKGkscyxyLG8sdFs4XSw3LDE3NzAwMzU0MTYpLG89dGhpcy5mZihvLGkscyxyLHRbOV0sMTIsLTE5NTg0MTQ0MTcpLHI9dGhpcy5mZihyLG8saSxzLHRbMTBdLDE3LC00MjA2Mykscz10aGlzLmZmKHMscixvLGksdFsxMV0sMjIsLTE5OTA0MDQxNjIpLGk9dGhpcy5mZihpLHMscixvLHRbMTJdLDcsMTgwNDYwMzY4Miksbz10aGlzLmZmKG8saSxzLHIsdFsxM10sMTIsLTQwMzQxMTAxKSxyPXRoaXMuZmYocixvLGkscyx0WzE0XSwxNywtMTUwMjAwMjI5MCkscz10aGlzLmZmKHMscixvLGksdFsxNV0sMjIsMTIzNjUzNTMyOSksaT10aGlzLmdnKGkscyxyLG8sdFsxXSw1LC0xNjU3OTY1MTApLG89dGhpcy5nZyhvLGkscyxyLHRbNl0sOSwtMTA2OTUwMTYzMikscj10aGlzLmdnKHIsbyxpLHMsdFsxMV0sMTQsNjQzNzE3NzEzKSxzPXRoaXMuZ2cocyxyLG8saSx0WzBdLDIwLC0zNzM4OTczMDIpLGk9dGhpcy5nZyhpLHMscixvLHRbNV0sNSwtNzAxNTU4NjkxKSxvPXRoaXMuZ2cobyxpLHMscix0WzEwXSw5LDM4MDE2MDgzKSxyPXRoaXMuZ2cocixvLGkscyx0WzE1XSwxNCwtNjYwNDc4MzM1KSxzPXRoaXMuZ2cocyxyLG8saSx0WzRdLDIwLC00MDU1Mzc4NDgpLGk9dGhpcy5nZyhpLHMscixvLHRbOV0sNSw1Njg0NDY0MzgpLG89dGhpcy5nZyhvLGkscyxyLHRbMTRdLDksLTEwMTk4MDM2OTApLHI9dGhpcy5nZyhyLG8saSxzLHRbM10sMTQsLTE4NzM2Mzk2MSkscz10aGlzLmdnKHMscixvLGksdFs4XSwyMCwxMTYzNTMxNTAxKSxpPXRoaXMuZ2coaSxzLHIsbyx0WzEzXSw1LC0xNDQ0NjgxNDY3KSxvPXRoaXMuZ2cobyxpLHMscix0WzJdLDksLTUxNDAzNzg0KSxyPXRoaXMuZ2cocixvLGkscyx0WzddLDE0LDE3MzUzMjg0NzMpLHM9dGhpcy5nZyhzLHIsbyxpLHRbMTJdLDIwLC0xOTI2NjA3NzM0KSxpPXRoaXMuaGgoaSxzLHIsbyx0WzVdLDQsLTM3ODU1OCksbz10aGlzLmhoKG8saSxzLHIsdFs4XSwxMSwtMjAyMjU3NDQ2Mykscj10aGlzLmhoKHIsbyxpLHMsdFsxMV0sMTYsMTgzOTAzMDU2Mikscz10aGlzLmhoKHMscixvLGksdFsxNF0sMjMsLTM1MzA5NTU2KSxpPXRoaXMuaGgoaSxzLHIsbyx0WzFdLDQsLTE1MzA5OTIwNjApLG89dGhpcy5oaChvLGkscyxyLHRbNF0sMTEsMTI3Mjg5MzM1Mykscj10aGlzLmhoKHIsbyxpLHMsdFs3XSwxNiwtMTU1NDk3NjMyKSxzPXRoaXMuaGgocyxyLG8saSx0WzEwXSwyMywtMTA5NDczMDY0MCksaT10aGlzLmhoKGkscyxyLG8sdFsxM10sNCw2ODEyNzkxNzQpLG89dGhpcy5oaChvLGkscyxyLHRbMF0sMTEsLTM1ODUzNzIyMikscj10aGlzLmhoKHIsbyxpLHMsdFszXSwxNiwtNzIyNTIxOTc5KSxzPXRoaXMuaGgocyxyLG8saSx0WzZdLDIzLDc2MDI5MTg5KSxpPXRoaXMuaGgoaSxzLHIsbyx0WzldLDQsLTY0MDM2NDQ4Nyksbz10aGlzLmhoKG8saSxzLHIsdFsxMl0sMTEsLTQyMTgxNTgzNSkscj10aGlzLmhoKHIsbyxpLHMsdFsxNV0sMTYsNTMwNzQyNTIwKSxzPXRoaXMuaGgocyxyLG8saSx0WzJdLDIzLC05OTUzMzg2NTEpLGk9dGhpcy5paShpLHMscixvLHRbMF0sNiwtMTk4NjMwODQ0KSxvPXRoaXMuaWkobyxpLHMscix0WzddLDEwLDExMjY4OTE0MTUpLHI9dGhpcy5paShyLG8saSxzLHRbMTRdLDE1LC0xNDE2MzU0OTA1KSxzPXRoaXMuaWkocyxyLG8saSx0WzVdLDIxLC01NzQzNDA1NSksaT10aGlzLmlpKGkscyxyLG8sdFsxMl0sNiwxNzAwNDg1NTcxKSxvPXRoaXMuaWkobyxpLHMscix0WzNdLDEwLC0xODk0OTg2NjA2KSxyPXRoaXMuaWkocixvLGkscyx0WzEwXSwxNSwtMTA1MTUyMykscz10aGlzLmlpKHMscixvLGksdFsxXSwyMSwtMjA1NDkyMjc5OSksaT10aGlzLmlpKGkscyxyLG8sdFs4XSw2LDE4NzMzMTMzNTkpLG89dGhpcy5paShvLGkscyxyLHRbMTVdLDEwLC0zMDYxMTc0NCkscj10aGlzLmlpKHIsbyxpLHMsdFs2XSwxNSwtMTU2MDE5ODM4MCkscz10aGlzLmlpKHMscixvLGksdFsxM10sMjEsMTMwOTE1MTY0OSksaT10aGlzLmlpKGkscyxyLG8sdFs0XSw2LC0xNDU1MjMwNzApLG89dGhpcy5paShvLGkscyxyLHRbMTFdLDEwLC0xMTIwMjEwMzc5KSxyPXRoaXMuaWkocixvLGkscyx0WzJdLDE1LDcxODc4NzI1OSkscz10aGlzLmlpKHMscixvLGksdFs5XSwyMSwtMzQzNDg1NTUxKSxlWzBdPXRoaXMuYWRkMzIoaSxlWzBdKSxlWzFdPXRoaXMuYWRkMzIocyxlWzFdKSxlWzJdPXRoaXMuYWRkMzIocixlWzJdKSxlWzNdPXRoaXMuYWRkMzIobyxlWzNdKX1jbW4oZSx0LGkscyxyLG8pe3JldHVybiB0PXRoaXMuYWRkMzIodGhpcy5hZGQzMih0LGUpLHRoaXMuYWRkMzIocyxvKSksdGhpcy5hZGQzMih0PDxyfHQ+Pj4zMi1yLGkpfWZmKGUsdCxpLHMscixvLG4pe3JldHVybiB0aGlzLmNtbih0Jml8fnQmcyxlLHQscixvLG4pfWdnKGUsdCxpLHMscixvLG4pe3JldHVybiB0aGlzLmNtbih0JnN8aSZ+cyxlLHQscixvLG4pfWhoKGUsdCxpLHMscixvLG4pe3JldHVybiB0aGlzLmNtbih0XmlecyxlLHQscixvLG4pfWlpKGUsdCxpLHMscixvLG4pe3JldHVybiB0aGlzLmNtbihpXih0fH5zKSxlLHQscixvLG4pfW1kNTEoZSl7Y29uc3QgdD1lLmxlbmd0aCxpPVsxNzMyNTg0MTkzLC0yNzE3MzM4NzksLTE3MzI1ODQxOTQsMjcxNzMzODc4XTtsZXQgcztmb3Iocz02NDtzPD1lLmxlbmd0aDtzKz02NCl0aGlzLm1kNWN5Y2xlKGksdGhpcy5tZDVibGsoZS5zdWJzdHJpbmcocy02NCxzKSkpO2U9ZS5zdWJzdHJpbmcocy02NCk7Y29uc3Qgcj1bMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMF07Zm9yKHM9MDtzPGUubGVuZ3RoO3MrKylyW3M+PjJdfD1lLmNoYXJDb2RlQXQocyk8PChzJTQ8PDMpO2lmKHJbcz4+Ml18PTEyODw8KHMlNDw8Mykscz41NSlmb3IodGhpcy5tZDVjeWNsZShpLHIpLHM9MDtzPDE2O3MrKylyW3NdPTA7cmV0dXJuIHJbMTRdPTgqdCx0aGlzLm1kNWN5Y2xlKGksciksaX1tZDVibGsoZSl7Y29uc3QgdD1bXTtmb3IobGV0IGk9MDtpPDY0O2krPTQpdFtpPj4yXT1lLmNoYXJDb2RlQXQoaSkrKGUuY2hhckNvZGVBdChpKzEpPDw4KSsoZS5jaGFyQ29kZUF0KGkrMik8PDE2KSsoZS5jaGFyQ29kZUF0KGkrMyk8PDI0KTtyZXR1cm4gdH1yaGV4KGUpe2NvbnN0IHQ9IjAxMjM0NTY3ODlhYmNkZWYiLnNwbGl0KCIiKTtsZXQgaT0iIixzPTA7Zm9yKDtzPDQ7cysrKWkrPXRbZT4+OCpzKzQmMTVdK3RbZT4+OCpzJjE1XTtyZXR1cm4gaX1oZXgoZSl7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0KyspZVt0XT10aGlzLnJoZXgoZVt0XSk7cmV0dXJuIGUuam9pbigiIil9bWQ1KGUpe3JldHVybiB0aGlzLmhleCh0aGlzLm1kNTEoZSkpfWFkZDMyKGUsdCl7cmV0dXJuIHRoaXMuaWVDb21wYXRpYmlsaXR5P3RoaXMuYWRkMzJDb21wYXQoZSx0KTp0aGlzLmFkZDMyU3RkKGUsdCl9YWRkMzJTdGQoZSx0KXtyZXR1cm4gZSt0JjQyOTQ5NjcyOTV9YWRkMzJDb21wYXQoZSx0KXtjb25zdCBpPSg2NTUzNSZlKSsoNjU1MzUmdCk7cmV0dXJuKGU+PjE2KSsodD4+MTYpKyhpPj4xNik8PDE2fDY1NTM1Jml9fWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG51bGw9PWV8fDA9PT1lLmxlbmd0aH1jb25zdCBuPXsiMDEiOiJHUklEIiwiMDIiOiJDSEFSVFMiLCIwMTAyIjoiQk9USCJ9O2NsYXNzIGF7Y29uc3RydWN0b3IoZSl7dGhpcy53YXRlcm1hcmtNZXNzYWdlPXZvaWQgMCx0aGlzLnRvdGFsTWVzc2FnZUxlbmd0aD0xMjQsdGhpcy5kb2N1bWVudD1lLHRoaXMubWQ1PW5ldyByLHRoaXMubWQ1LmluaXQoKX12YWxpZGF0ZUxpY2Vuc2UoKXtjb25zdCBlPXRoaXMuZ2V0TGljZW5zZURldGFpbHMoYS5saWNlbnNlS2V5KSx0PWBBRyBHcmlkICR7IkJPVEgiPT09ZS5jdXJyZW50TGljZW5zZVR5cGU/ImFuZCBBRyBDaGFydHMgIjoiIn1FbnRlcnByaXNlYCxpPXZvaWQgMD09PWUuc3VwcGxpZWRMaWNlbnNlVHlwZT8iIjpgQUcgJHsiQk9USCI9PT1lLnN1cHBsaWVkTGljZW5zZVR5cGU/IkdyaWQgYW5kIEFHIENoYXJ0cyI6IkdSSUQiPT09ZS5zdXBwbGllZExpY2Vuc2VUeXBlPyJHcmlkIjoiQ2hhcnRzIn0gRW50ZXJwcmlzZWA7aWYoZS5taXNzaW5nKXRoaXMuaXNXZWJzaXRlVXJsKCkmJiF0aGlzLmlzRm9yY2VXYXRlcm1hcmsoKXx8dGhpcy5vdXRwdXRNaXNzaW5nTGljZW5zZUtleSh0KTtlbHNlIGlmKGUuZXhwaXJlZCl7Y29uc3Qgcz1hLmdldEdyaWRSZWxlYXNlRGF0ZSgpLHI9YS5mb3JtYXREYXRlKHMpO3RoaXMub3V0cHV0RXhwaXJlZEtleShlLmV4cGlyeSxyLHQsaSl9ZWxzZSBlLnZhbGlkP2UuaXNUcmlhbCYmZS50cmlhbEV4cGlyZWQmJnRoaXMub3V0cHV0RXhwaXJlZFRyaWFsS2V5KGUuZXhwaXJ5LHQsaSk6dGhpcy5vdXRwdXRJbnZhbGlkTGljZW5zZUtleSghIWUuaW5jb3JyZWN0TGljZW5zZVR5cGUsdCxpKX1zdGF0aWMgZXh0cmFjdEV4cGlyeShlKXtjb25zdCB0PWUuc3Vic3RyaW5nKGUubGFzdEluZGV4T2YoIl8iKSsxLGUubGVuZ3RoKTtyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQoYS5kZWNvZGUodCksMTApKX1zdGF0aWMgZXh0cmFjdExpY2Vuc2VDb21wb25lbnRzKGUpe2xldCB0PWUucmVwbGFjZSgvW1x1MjAwQi1cdTIwMERcdUZFRkZdL2csIiIpO2lmKHQ9dC5yZXBsYWNlKC9ccj9cbnxcci9nLCIiKSxlLmxlbmd0aDw9MzIpcmV0dXJue21kNTpudWxsLGxpY2Vuc2U6ZSx2ZXJzaW9uOm51bGwsaXNUcmlhbDpudWxsfTtjb25zdCBpPXQubGVuZ3RoLTMyLHM9dC5zdWJzdHJpbmcoaSkscj10LnN1YnN0cmluZygwLGkpLFtvLG4sbF09YS5leHRyYWN0QnJhY2tldGVkSW5mb3JtYXRpb24odCk7cmV0dXJue21kNTpzLGxpY2Vuc2U6cix2ZXJzaW9uOm8saXNUcmlhbDpuLHR5cGU6bH19Z2V0TGljZW5zZURldGFpbHMoZSl7Y29uc3QgdD1hLmNoYXJ0c0xpY2Vuc2VNYW5hZ2VyPyJCT1RIIjoiR1JJRCI7aWYobyhlKSlyZXR1cm57bGljZW5zZUtleTplLHZhbGlkOiExLG1pc3Npbmc6ITAsY3VycmVudExpY2Vuc2VUeXBlOnR9O2NvbnN0IGk9YS5nZXRHcmlkUmVsZWFzZURhdGUoKSx7bWQ1OnMsbGljZW5zZTpyLHZlcnNpb246bCxpc1RyaWFsOmQsdHlwZTpjfT1hLmV4dHJhY3RMaWNlbnNlQ29tcG9uZW50cyhlKTtsZXQgaD1zPT09dGhpcy5tZDUubWQ1KHIpJiYtMT09PWUuaW5kZXhPZigiRm9yX1RyaWFsaW5nX2FnLUdyaWRfT25seSIpLHU9dm9pZCAwLHA9dm9pZCAwLGc9bnVsbCxtPSExLGY9dm9pZCAwO2Z1bmN0aW9uIHYoKXtjb25zdCBlPW5ldyBEYXRlO3U9ZzxlLHA9dm9pZCAwfWlmKGgmJihnPWEuZXh0cmFjdEV4cGlyeShyKSxoPSFpc05hTihnLmdldFRpbWUoKSksaCkpc3dpdGNoKHA9aT5nLGwpe2Nhc2UibGVnYWN5IjpjYXNlIjIiOmQmJnYoKTticmVhaztjYXNlIjMiOm8oYyk/aD0hMTooZj1jLGMhPT1uWyIwMSJdJiZjIT09blsiMDEwMiJdfHwiQk9USCI9PT10JiYiQk9USCIhPT1mPyhoPSExLG09ITApOmQmJnYoKSl9cmV0dXJuIGg/e2xpY2Vuc2VLZXk6ZSx2YWxpZDpoLGV4cGlyeTphLmZvcm1hdERhdGUoZyksZXhwaXJlZDpwLHZlcnNpb246bCxpc1RyaWFsOmQsdHJpYWxFeHBpcmVkOnUsaW5jb3JyZWN0TGljZW5zZVR5cGU6bSxjdXJyZW50TGljZW5zZVR5cGU6dCxzdXBwbGllZExpY2Vuc2VUeXBlOmZ9OntsaWNlbnNlS2V5OmUsdmFsaWQ6aCxpbmNvcnJlY3RMaWNlbnNlVHlwZTptLGN1cnJlbnRMaWNlbnNlVHlwZTp0LHN1cHBsaWVkTGljZW5zZVR5cGU6Zn19aXNEaXNwbGF5V2F0ZXJtYXJrKCl7cmV0dXJuIHRoaXMuaXNGb3JjZVdhdGVybWFyaygpfHwhdGhpcy5pc0xvY2FsaG9zdCgpJiYhdGhpcy5pc1dlYnNpdGVVcmwoKSYmIW8odGhpcy53YXRlcm1hcmtNZXNzYWdlKX1nZXRXYXRlcm1hcmtNZXNzYWdlKCl7cmV0dXJuIHRoaXMud2F0ZXJtYXJrTWVzc2FnZXx8IiJ9Z2V0SG9zdG5hbWUoKXtjb25zdCBlPSh0aGlzLmRvY3VtZW50LmRlZmF1bHRWaWV3fHx3aW5kb3cpLmxvY2F0aW9uLHtob3N0bmFtZTp0PSIifT1lO3JldHVybiB0fWlzRm9yY2VXYXRlcm1hcmsoKXtjb25zdCBlPSh0aGlzLmRvY3VtZW50LmRlZmF1bHRWaWV3fHx3aW5kb3cpLmxvY2F0aW9uLHtwYXRobmFtZTp0fT1lO3JldHVybiEhdCYmLTEhPT10LmluZGV4T2YoImZvcmNlV2F0ZXJtYXJrIil9aXNXZWJzaXRlVXJsKCl7cmV0dXJuIG51bGwhPT10aGlzLmdldEhvc3RuYW1lKCkubWF0Y2goL14oKD86XHcrXC4pP2FnLWdyaWRcLmNvbSkkLyl9aXNMb2NhbGhvc3QoKXtyZXR1cm4gbnVsbCE9PXRoaXMuZ2V0SG9zdG5hbWUoKS5tYXRjaCgvXig/OjEyN1wuMFwuMFwuMXxsb2NhbGhvc3QpJC8pfXN0YXRpYyBmb3JtYXREYXRlKGUpe2NvbnN0IHQ9ZS5nZXREYXRlKCksaT1lLmdldE1vbnRoKCkscz1lLmdldEZ1bGxZZWFyKCk7cmV0dXJuIHQrIiAiK1siSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXVtpXSsiICIrc31zdGF0aWMgZ2V0R3JpZFJlbGVhc2VEYXRlKCl7cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KGEuZGVjb2RlKGEuUkVMRUFTRV9JTkZPUk1BVElPTiksMTApKX1zdGF0aWMgZGVjb2RlKGUpe2NvbnN0IHQ9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89IjtsZXQgaSxzLHIsbyxuLGwsZCxjPSIiLGg9MDtjb25zdCB1PWUucmVwbGFjZSgvW15BLVphLXowLTkrLz1dL2csIiIpO2Zvcig7aDx1Lmxlbmd0aDspbz10LmluZGV4T2YodS5jaGFyQXQoaCsrKSksbj10LmluZGV4T2YodS5jaGFyQXQoaCsrKSksbD10LmluZGV4T2YodS5jaGFyQXQoaCsrKSksZD10LmluZGV4T2YodS5jaGFyQXQoaCsrKSksaT1vPDwyfG4+PjQscz0oMTUmbik8PDR8bD4+MixyPSgzJmwpPDw2fGQsYys9U3RyaW5nLmZyb21DaGFyQ29kZShpKSw2NCE9bCYmKGMrPVN0cmluZy5mcm9tQ2hhckNvZGUocykpLDY0IT1kJiYoYys9U3RyaW5nLmZyb21DaGFyQ29kZShyKSk7cmV0dXJuIGM9YS51dGY4X2RlY29kZShjKSxjfXN0YXRpYyB1dGY4X2RlY29kZShlKXtlPWUucmVwbGFjZSgvcm4vZywibiIpO2xldCB0PSIiO2ZvcihsZXQgaT0wO2k8ZS5sZW5ndGg7aSsrKXtjb25zdCBzPWUuY2hhckNvZGVBdChpKTtzPDEyOD90Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHMpOnM+MTI3JiZzPDIwNDg/KHQrPVN0cmluZy5mcm9tQ2hhckNvZGUocz4+NnwxOTIpLHQrPVN0cmluZy5mcm9tQ2hhckNvZGUoNjMmc3wxMjgpKToodCs9U3RyaW5nLmZyb21DaGFyQ29kZShzPj4xMnwyMjQpLHQrPVN0cmluZy5mcm9tQ2hhckNvZGUocz4+NiY2M3wxMjgpLHQrPVN0cmluZy5mcm9tQ2hhckNvZGUoNjMmc3wxMjgpKX1yZXR1cm4gdH1zdGF0aWMgc2V0Q2hhcnRzTGljZW5zZU1hbmFnZXIoZSl7dGhpcy5jaGFydHNMaWNlbnNlTWFuYWdlcj1lfXN0YXRpYyBzZXRMaWNlbnNlS2V5KGUpe3RoaXMubGljZW5zZUtleT1lLHRoaXMuY2hhcnRzTGljZW5zZU1hbmFnZXImJnRoaXMuY2hhcnRzTGljZW5zZU1hbmFnZXIuc2V0TGljZW5zZUtleShlLCEwKX1zdGF0aWMgZXh0cmFjdEJyYWNrZXRlZEluZm9ybWF0aW9uKGUpe2lmKCFlLmluY2x1ZGVzKCJbIikpcmV0dXJuWyJsZWdhY3kiLCExLHZvaWQgMF07Y29uc3QgdD1lLm1hdGNoKC9cWyguKj8pXF0vZykubWFwKGU9PmUucmVwbGFjZSgiWyIsIiIpLnJlcGxhY2UoIl0iLCIiKSk7aWYoIXR8fDA9PT10Lmxlbmd0aClyZXR1cm5bImxlZ2FjeSIsITEsdm9pZCAwXTtjb25zdCBpPTE9PT10LmZpbHRlcihlPT4iVFJJQUwiPT09ZSkubGVuZ3RoLHM9dC5maWx0ZXIoZT0+MD09PWUuaW5kZXhPZigidiIpKVswXTtyZXR1cm5bcz9zLnJlcGxhY2UoInYiLCIiKToibGVnYWN5IixpLG5bdC5maWx0ZXIoZT0+bltlXSlbMF1dXX1jZW50ZXJQYWRBbmRPdXRwdXQoZSl7Y29uc3QgdD10aGlzLnRvdGFsTWVzc2FnZUxlbmd0aC1lLmxlbmd0aDtjb25zb2xlLmVycm9yKGUucGFkU3RhcnQodC8yK2UubGVuZ3RoLCIqIikucGFkRW5kKHRoaXMudG90YWxNZXNzYWdlTGVuZ3RoLCIqIikpfXBhZEFuZE91dHB1dChlLHQ9IioiLGk9IiIpe2NvbnNvbGUuZXJyb3IoZS5wYWRFbmQodGhpcy50b3RhbE1lc3NhZ2VMZW5ndGgtaS5sZW5ndGgsdCkraSl9b3V0cHV0SW52YWxpZExpY2Vuc2VLZXkoZSx0LGkpe2U/KHRoaXMuY2VudGVyUGFkQW5kT3V0cHV0KCIiKSx0aGlzLmNlbnRlclBhZEFuZE91dHB1dChgICR7dH0gTGljZW5zZSBgKSx0aGlzLmNlbnRlclBhZEFuZE91dHB1dCgiIEluY29tcGF0aWJsZSBMaWNlbnNlIEtleSAiKSx0aGlzLnBhZEFuZE91dHB1dChgKiBZb3VyIGxpY2Vuc2Uga2V5IGlzIGZvciAke2l9IG9ubHkgYW5kIGRvZXMgbm90IGNvdmVyIHlvdSBmb3IgJHt0fS5gLCIgIiwiKiIpLHRoaXMucGFkQW5kT3V0cHV0KCIqIFBsZWFzZSBjb250YWN0IGluZm9AYWctZ3JpZC5jb20gdG8gb2J0YWluIGEgY29tYmluZWQgbGljZW5zZSBrZXkuIiwiICIsIioiKSx0aGlzLmNlbnRlclBhZEFuZE91dHB1dCgiIiksdGhpcy5jZW50ZXJQYWRBbmRPdXRwdXQoIiIpKToodGhpcy5jZW50ZXJQYWRBbmRPdXRwdXQoIiIpLHRoaXMuY2VudGVyUGFkQW5kT3V0cHV0KGAgJHt0fSBMaWNlbnNlIGApLHRoaXMuY2VudGVyUGFkQW5kT3V0cHV0KCIgSW52YWxpZCBMaWNlbnNlIEtleSAiKSx0aGlzLnBhZEFuZE91dHB1dCgiKiBZb3VyIGxpY2Vuc2Uga2V5IGlzIG5vdCB2YWxpZCAtIHBsZWFzZSBjb250YWN0IGluZm9AYWctZ3JpZC5jb20gdG8gb2J0YWluIGEgdmFsaWQgbGljZW5zZS4iLCIgIiwiKiIpLHRoaXMuY2VudGVyUGFkQW5kT3V0cHV0KCIiKSx0aGlzLmNlbnRlclBhZEFuZE91dHB1dCgiIikpLHRoaXMud2F0ZXJtYXJrTWVzc2FnZT0iSW52YWxpZCBMaWNlbnNlIn1vdXRwdXRFeHBpcmVkVHJpYWxLZXkoZSx0LGkpe3RoaXMuY2VudGVyUGFkQW5kT3V0cHV0KCIiKSx0aGlzLmNlbnRlclBhZEFuZE91dHB1dChgICR7dH0gTGljZW5zZSBgKSx0aGlzLmNlbnRlclBhZEFuZE91dHB1dCgiIFRyaWFsIFBlcmlvZCBFeHBpcmVkLiAiKSx0aGlzLnBhZEFuZE91dHB1dChgKiBZb3VyIHRyaWFsIG9ubHkgbGljZW5zZSBmb3IgJHtpfSBleHBpcmVkIG9uICR7ZX0uYCwiICIsIioiKSx0aGlzLnBhZEFuZE91dHB1dCgiKiBQbGVhc2UgZW1haWwgaW5mb0BhZy1ncmlkLmNvbSB0byBwdXJjaGFzZSBhIGxpY2Vuc2UuIiwiICIsIioiKSx0aGlzLmNlbnRlclBhZEFuZE91dHB1dCgiIiksdGhpcy5jZW50ZXJQYWRBbmRPdXRwdXQoIiIpLHRoaXMud2F0ZXJtYXJrTWVzc2FnZT0iVHJpYWwgUGVyaW9kIEV4cGlyZWQifW91dHB1dE1pc3NpbmdMaWNlbnNlS2V5KGUpe3RoaXMuY2VudGVyUGFkQW5kT3V0cHV0KCIiKSx0aGlzLmNlbnRlclBhZEFuZE91dHB1dChgICR7ZX0gTGljZW5zZSBgKSx0aGlzLmNlbnRlclBhZEFuZE91dHB1dCgiIExpY2Vuc2UgS2V5IE5vdCBGb3VuZCAiKSx0aGlzLnBhZEFuZE91dHB1dChgKiBBbGwgJHtlfSBmZWF0dXJlcyBhcmUgdW5sb2NrZWQgZm9yIHRyaWFsLmAsIiAiLCIqIiksdGhpcy5wYWRBbmRPdXRwdXQoIiogSWYgeW91IHdhbnQgdG8gaGlkZSB0aGUgd2F0ZXJtYXJrIHBsZWFzZSBlbWFpbCBpbmZvQGFnLWdyaWQuY29tIGZvciBhIHRyaWFsIGxpY2Vuc2Uga2V5LiIsIiAiLCIqIiksdGhpcy5jZW50ZXJQYWRBbmRPdXRwdXQoIiIpLHRoaXMuY2VudGVyUGFkQW5kT3V0cHV0KCIiKSx0aGlzLndhdGVybWFya01lc3NhZ2U9IkZvciBUcmlhbCBVc2UgT25seSJ9b3V0cHV0RXhwaXJlZEtleShlLHQsaSxzKXt0aGlzLmNlbnRlclBhZEFuZE91dHB1dCgiIiksdGhpcy5jZW50ZXJQYWRBbmRPdXRwdXQoYCAke2l9IExpY2Vuc2UgYCksdGhpcy5jZW50ZXJQYWRBbmRPdXRwdXQoIiBJbmNvbXBhdGlibGUgU29mdHdhcmUgVmVyc2lvbiAiKSx0aGlzLnBhZEFuZE91dHB1dChgKiBZb3VyIGxpY2Vuc2Uga2V5IHdvcmtzIHdpdGggdmVyc2lvbnMgb2YgJHtzfSByZWxlYXNlZCBiZWZvcmUgJHtlfS5gLCIgIiwiKiIpLHRoaXMucGFkQW5kT3V0cHV0KGAqIFRoZSB2ZXJzaW9uIHlvdSBhcmUgdHJ5aW5nIHRvIHVzZSB3YXMgcmVsZWFzZWQgb24gJHt0fS5gLCIgIiwiKiIpLHRoaXMucGFkQW5kT3V0cHV0KCIqIFBsZWFzZSBjb250YWN0IGluZm9AYWctZ3JpZC5jb20gdG8gcmVuZXcgeW91ciBsaWNlbnNlIGtleS4iLCIgIiwiKiIpLHRoaXMuY2VudGVyUGFkQW5kT3V0cHV0KCIiKSx0aGlzLmNlbnRlclBhZEFuZE91dHB1dCgiIiksdGhpcy53YXRlcm1hcmtNZXNzYWdlPSJMaWNlbnNlIEV4cGlyZWQifX1hLlJFTEVBU0VfSU5GT1JNQVRJT049Ik1UY3dPREkzTnprd05qSTVOdz09Ijt2YXIgbD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgZD1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7dmFsaWRhdGVMaWNlbnNlKCl7dGhpcy5saWNlbnNlTWFuYWdlcj1uZXcgYSh0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb2N1bWVudCgpKSx0aGlzLmxpY2Vuc2VNYW5hZ2VyLnZhbGlkYXRlTGljZW5zZSgpfXN0YXRpYyBnZXRMaWNlbnNlRGV0YWlscyhlKXtyZXR1cm4gbmV3IGEobnVsbCkuZ2V0TGljZW5zZURldGFpbHMoZSl9aXNEaXNwbGF5V2F0ZXJtYXJrKCl7cmV0dXJuIHRoaXMubGljZW5zZU1hbmFnZXIuaXNEaXNwbGF5V2F0ZXJtYXJrKCl9Z2V0V2F0ZXJtYXJrTWVzc2FnZSgpe3JldHVybiB0aGlzLmxpY2Vuc2VNYW5hZ2VyLmdldFdhdGVybWFya01lc3NhZ2UoKX1zdGF0aWMgc2V0TGljZW5zZUtleShlKXthLnNldExpY2Vuc2VLZXkoZSl9c3RhdGljIHNldENoYXJ0c0xpY2Vuc2VNYW5hZ2VyKGUpe2Euc2V0Q2hhcnRzTGljZW5zZU1hbmFnZXIoZSl9fTtsKFtzLlByZUNvbnN0cnVjdF0sZC5wcm90b3R5cGUsInZhbGlkYXRlTGljZW5zZSIsbnVsbCksZD1sKFtPYmplY3Qocy5CZWFuKSgibGljZW5zZU1hbmFnZXIiKV0sZCk7dmFyIGM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgaCBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoJzxkaXYgY2xhc3M9ImFnLXdhdGVybWFyayI+XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9ImVMaWNlbnNlVGV4dFJlZiIgY2xhc3M9ImFnLXdhdGVybWFyay10ZXh0Ij48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PicpfXBvc3RDb25zdHJ1Y3QoKXtjb25zdCBlPXRoaXMuc2hvdWxkRGlzcGxheVdhdGVybWFyaygpO3RoaXMuc2V0RGlzcGxheWVkKGUpLGUmJih0aGlzLmVMaWNlbnNlVGV4dFJlZi5pbm5lclRleHQ9dGhpcy5saWNlbnNlTWFuYWdlci5nZXRXYXRlcm1hcmtNZXNzYWdlKCksd2luZG93LnNldFRpbWVvdXQoKCk9PnRoaXMuYWRkQ3NzQ2xhc3MoImFnLW9wYWNpdHktemVybyIpLDApLHdpbmRvdy5zZXRUaW1lb3V0KCgpPT50aGlzLnNldERpc3BsYXllZCghMSksNWUzKSl9c2hvdWxkRGlzcGxheVdhdGVybWFyaygpe3JldHVybiB0aGlzLmxpY2Vuc2VNYW5hZ2VyLmlzRGlzcGxheVdhdGVybWFyaygpfX1jKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJsaWNlbnNlTWFuYWdlciIpXSxoLnByb3RvdHlwZSwibGljZW5zZU1hbmFnZXIiLHZvaWQgMCksYyhbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlTGljZW5zZVRleHRSZWYiKV0saC5wcm90b3R5cGUsImVMaWNlbnNlVGV4dFJlZiIsdm9pZCAwKSxjKFtzLlBvc3RDb25zdHJ1Y3RdLGgucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTtjb25zdCB1PXt2ZXJzaW9uOiIzMS4xLjEiLG1vZHVsZU5hbWU6cy5Nb2R1bGVOYW1lcy5FbnRlcnByaXNlQ29yZU1vZHVsZSxiZWFuczpbZF0sYWdTdGFja0NvbXBvbmVudHM6W3tjb21wb25lbnROYW1lOiJBZ1dhdGVybWFyayIsY29tcG9uZW50Q2xhc3M6aH1dfTtpLmQodCwiRW50ZXJwcmlzZUNvcmVNb2R1bGUiLChmdW5jdGlvbigpe3JldHVybiB1fSkpLGkuZCh0LCJMaWNlbnNlTWFuYWdlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIGR9KSl9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpO3ZhciBzPWkoMCkscj1pKDMpLG89ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IG49Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie2V4ZWN1dGUoZSl7Y29uc3QgdD1zLl8ubWlzc2luZ09yRW1wdHkodGhpcy5jb2x1bW5Nb2RlbC5nZXRWYWx1ZUNvbHVtbnMoKSksaT0hdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soImdldEdyb3VwUm93QWdnIikscj1lLmNoYW5nZWRQYXRoJiZlLmNoYW5nZWRQYXRoLmlzQWN0aXZlKCk7aWYodCYmaSYmcilyZXR1cm47Y29uc3Qgbz10aGlzLmNyZWF0ZUFnZ0RldGFpbHMoZSk7dGhpcy5yZWN1cnNpdmVseUNyZWF0ZUFnZ0RhdGEobyl9Y3JlYXRlQWdnRGV0YWlscyhlKXtjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdEFjdGl2ZSgpLGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRWYWx1ZUNvbHVtbnMoKSxzPXQ/dGhpcy5jb2x1bW5Nb2RlbC5nZXRQaXZvdENvbHVtbnMoKTpbXTtyZXR1cm57YWx3YXlzQWdncmVnYXRlQXRSb290TGV2ZWw6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJhbHdheXNBZ2dyZWdhdGVBdFJvb3RMZXZlbCIpLGdyb3VwSW5jbHVkZVRvdGFsRm9vdGVyOnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBJbmNsdWRlVG90YWxGb290ZXIiKSxjaGFuZ2VkUGF0aDplLmNoYW5nZWRQYXRoLHZhbHVlQ29sdW1uczppLHBpdm90Q29sdW1uczpzLGZpbHRlcmVkT25seTohdGhpcy5pc1N1cHByZXNzQWdnRmlsdGVyZWRPbmx5KCksdXNlckFnZ0Z1bmM6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soImdldEdyb3VwUm93QWdnIil9fWlzU3VwcHJlc3NBZ2dGaWx0ZXJlZE9ubHkoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0R3JvdXBBZ2dGaWx0ZXJpbmcoKXx8dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0FnZ0ZpbHRlcmVkT25seSIpfXJlY3Vyc2l2ZWx5Q3JlYXRlQWdnRGF0YShlKXtlLmNoYW5nZWRQYXRoLmZvckVhY2hDaGFuZ2VkTm9kZURlcHRoRmlyc3QodD0+e2lmKCF0Lmhhc0NoaWxkcmVuKCkpcmV0dXJuIHZvaWQodC5hZ2dEYXRhJiZ0LnNldEFnZ0RhdGEobnVsbCkpO2lmKC0xPT09dC5sZXZlbCYmIWUuZ3JvdXBJbmNsdWRlVG90YWxGb290ZXIpe2NvbnN0IGk9IXRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKTtpZighZS5hbHdheXNBZ2dyZWdhdGVBdFJvb3RMZXZlbCYmaSlyZXR1cm4gdm9pZCB0LnNldEFnZ0RhdGEobnVsbCl9dGhpcy5hZ2dyZWdhdGVSb3dOb2RlKHQsZSl9LCEwKX1hZ2dyZWdhdGVSb3dOb2RlKGUsdCl7Y29uc3QgaT0wPT09dC52YWx1ZUNvbHVtbnMubGVuZ3RoLHM9MD09PXQucGl2b3RDb2x1bW5zLmxlbmd0aDtsZXQgcjtyPXQudXNlckFnZ0Z1bmM/dC51c2VyQWdnRnVuYyh7bm9kZXM6ZS5jaGlsZHJlbkFmdGVyRmlsdGVyfSk6aT9udWxsOnM/dGhpcy5hZ2dyZWdhdGVSb3dOb2RlVXNpbmdWYWx1ZXNPbmx5KGUsdCk6dGhpcy5hZ2dyZWdhdGVSb3dOb2RlVXNpbmdWYWx1ZXNBbmRQaXZvdChlKSxlLnNldEFnZ0RhdGEociksZS5zaWJsaW5nJiZlLnNpYmxpbmcuc2V0QWdnRGF0YShyKX1hZ2dyZWdhdGVSb3dOb2RlVXNpbmdWYWx1ZXNBbmRQaXZvdChlKXt2YXIgdCxpO2NvbnN0IHM9e30scj1udWxsIT09KHQ9dGhpcy5jb2x1bW5Nb2RlbC5nZXRTZWNvbmRhcnlDb2x1bW5zKCkpJiZ2b2lkIDAhPT10P3Q6W107bGV0IG89ITA7Zm9yKGxldCB0PTA7dDxyLmxlbmd0aDt0Kyspe2NvbnN0IG49clt0XSxhPW4uZ2V0Q29sRGVmKCk7aWYobnVsbCE9YS5waXZvdFRvdGFsQ29sdW1uSWRzKXtvPSExO2NvbnRpbnVlfWNvbnN0IGw9bnVsbCE9PShpPWEucGl2b3RLZXlzKSYmdm9pZCAwIT09aT9pOltdO2xldCBkO2Q9ZS5sZWFmR3JvdXA/dGhpcy5nZXRWYWx1ZXNGcm9tTWFwcGVkU2V0KGUuY2hpbGRyZW5NYXBwZWQsbCxhLnBpdm90VmFsdWVDb2x1bW4pOnRoaXMuZ2V0VmFsdWVzUGl2b3ROb25MZWFmKGUsYS5jb2xJZCksc1thLmNvbElkXT10aGlzLmFnZ3JlZ2F0ZVZhbHVlcyhkLGEucGl2b3RWYWx1ZUNvbHVtbi5nZXRBZ2dGdW5jKCksYS5waXZvdFZhbHVlQ29sdW1uLGUsbil9aWYoIW8pZm9yKGxldCB0PTA7dDxyLmxlbmd0aDt0Kyspe2NvbnN0IGk9clt0XSxvPWkuZ2V0Q29sRGVmKCk7aWYobnVsbD09by5waXZvdFRvdGFsQ29sdW1uSWRzfHwhby5waXZvdFRvdGFsQ29sdW1uSWRzLmxlbmd0aCljb250aW51ZTtjb25zdCBuPW8ucGl2b3RUb3RhbENvbHVtbklkcy5tYXAoZT0+c1tlXSk7c1tvLmNvbElkXT10aGlzLmFnZ3JlZ2F0ZVZhbHVlcyhuLG8ucGl2b3RWYWx1ZUNvbHVtbi5nZXRBZ2dGdW5jKCksby5waXZvdFZhbHVlQ29sdW1uLGUsaSl9cmV0dXJuIHN9YWdncmVnYXRlUm93Tm9kZVVzaW5nVmFsdWVzT25seShlLHQpe2NvbnN0IGk9e30scz10LmNoYW5nZWRQYXRoLmlzQWN0aXZlKCk/dC5jaGFuZ2VkUGF0aC5nZXRWYWx1ZUNvbHVtbnNGb3JOb2RlKGUsdC52YWx1ZUNvbHVtbnMpOnQudmFsdWVDb2x1bW5zLHI9dC5jaGFuZ2VkUGF0aC5pc0FjdGl2ZSgpP3QuY2hhbmdlZFBhdGguZ2V0Tm90VmFsdWVDb2x1bW5zRm9yTm9kZShlLHQudmFsdWVDb2x1bW5zKTpudWxsLG89dGhpcy5nZXRWYWx1ZXNOb3JtYWwoZSxzLHQuZmlsdGVyZWRPbmx5KSxuPWUuYWdnRGF0YTtyZXR1cm4gcy5mb3JFYWNoKCh0LHMpPT57aVt0LmdldElkKCldPXRoaXMuYWdncmVnYXRlVmFsdWVzKG9bc10sdC5nZXRBZ2dGdW5jKCksdCxlKX0pLHImJm4mJnIuZm9yRWFjaChlPT57aVtlLmdldElkKCldPW5bZS5nZXRJZCgpXX0pLGl9Z2V0VmFsdWVzUGl2b3ROb25MZWFmKGUsdCl7cmV0dXJuIGUuY2hpbGRyZW5BZnRlckZpbHRlci5tYXAoZT0+ZS5hZ2dEYXRhW3RdKX1nZXRWYWx1ZXNGcm9tTWFwcGVkU2V0KGUsdCxpKXtsZXQgcz1lO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKXtjb25zdCBpPXRbZV07cz1zP3NbaV06bnVsbH1yZXR1cm4gcz9zLm1hcChlPT50aGlzLnZhbHVlU2VydmljZS5nZXRWYWx1ZShpLGUpKTpbXX1nZXRWYWx1ZXNOb3JtYWwoZSx0LGkpe2NvbnN0IHM9W107dC5mb3JFYWNoKCgpPT5zLnB1c2goW10pKTtjb25zdCByPXQubGVuZ3RoLG89aT9lLmNoaWxkcmVuQWZ0ZXJGaWx0ZXI6ZS5jaGlsZHJlbkFmdGVyR3JvdXAsbj1vLmxlbmd0aDtmb3IobGV0IGU9MDtlPG47ZSsrKXtjb25zdCBpPW9bZV07Zm9yKGxldCBlPTA7ZTxyO2UrKyl7Y29uc3Qgcj10W2VdLG89dGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUocixpKTtzW2VdLnB1c2gobyl9fXJldHVybiBzfWFnZ3JlZ2F0ZVZhbHVlcyhlLHQsaSxzLHIpe2NvbnN0IG89InN0cmluZyI9PXR5cGVvZiB0P3RoaXMuYWdnRnVuY1NlcnZpY2UuZ2V0QWdnRnVuYyh0KTp0O2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBvKXJldHVybiBjb25zb2xlLmVycm9yKCJBRyBHcmlkOiB1bnJlY29nbmlzZWQgYWdncmVnYXRpb24gZnVuY3Rpb24gIit0KSxudWxsO3JldHVybiBvKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3ZhbHVlczplLGNvbHVtbjppLGNvbERlZjppP2kuZ2V0Q29sRGVmKCk6dm9pZCAwLHBpdm90UmVzdWx0Q29sdW1uOnIscm93Tm9kZTpzLGRhdGE6cz9zLmRhdGE6dm9pZCAwfSkpfX07byhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sbi5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoInZhbHVlU2VydmljZSIpXSxuLnByb3RvdHlwZSwidmFsdWVTZXJ2aWNlIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoImFnZ0Z1bmNTZXJ2aWNlIildLG4ucHJvdG90eXBlLCJhZ2dGdW5jU2VydmljZSIsdm9pZCAwKSxuPW8oW09iamVjdChzLkJlYW4pKCJhZ2dyZWdhdGlvblN0YWdlIildLG4pO2NsYXNzIGF7Y29uc3RydWN0b3IoKXt0aGlzLmFsbFNldHM9e30sdGhpcy5hbGxQYXJlbnRzPVtdfXJlbW92ZUZyb21DaGlsZHJlbkFmdGVyR3JvdXAoZSx0KXt0aGlzLmdldFNldChlKS5yZW1vdmVGcm9tQ2hpbGRyZW5BZnRlckdyb3VwW3QuaWRdPSEwfWlzUmVtb3ZlRnJvbUFsbExlYWZDaGlsZHJlbihlLHQpe3JldHVybiEhdGhpcy5nZXRTZXQoZSkucmVtb3ZlRnJvbUFsbExlYWZDaGlsZHJlblt0LmlkXX1wcmV2ZW50UmVtb3ZlRnJvbUFsbExlYWZDaGlsZHJlbihlLHQpe2RlbGV0ZSB0aGlzLmdldFNldChlKS5yZW1vdmVGcm9tQWxsTGVhZkNoaWxkcmVuW3QuaWRdfXJlbW92ZUZyb21BbGxMZWFmQ2hpbGRyZW4oZSx0KXt0aGlzLmdldFNldChlKS5yZW1vdmVGcm9tQWxsTGVhZkNoaWxkcmVuW3QuaWRdPSEwfWdldFNldChlKXtyZXR1cm4gdGhpcy5hbGxTZXRzW2UuaWRdfHwodGhpcy5hbGxTZXRzW2UuaWRdPXtyZW1vdmVGcm9tQWxsTGVhZkNoaWxkcmVuOnt9LHJlbW92ZUZyb21DaGlsZHJlbkFmdGVyR3JvdXA6e319LHRoaXMuYWxsUGFyZW50cy5wdXNoKGUpKSx0aGlzLmFsbFNldHNbZS5pZF19Z2V0QWxsUGFyZW50cygpe3JldHVybiB0aGlzLmFsbFBhcmVudHN9Zmx1c2goKXt0aGlzLmFsbFBhcmVudHMuZm9yRWFjaChlPT57Y29uc3QgdD10aGlzLmFsbFNldHNbZS5pZF07ZS5jaGlsZHJlbkFmdGVyR3JvdXA9ZS5jaGlsZHJlbkFmdGVyR3JvdXAuZmlsdGVyKGU9PiF0LnJlbW92ZUZyb21DaGlsZHJlbkFmdGVyR3JvdXBbZS5pZF0pLGUuYWxsTGVhZkNoaWxkcmVuPWUuYWxsTGVhZkNoaWxkcmVuLmZpbHRlcihlPT4hdC5yZW1vdmVGcm9tQWxsTGVhZkNoaWxkcmVuW2UuaWRdKSxlLnVwZGF0ZUhhc0NoaWxkcmVuKCksZS5zaWJsaW5nJiYoZS5zaWJsaW5nLmNoaWxkcmVuQWZ0ZXJHcm91cD1lLmNoaWxkcmVuQWZ0ZXJHcm91cCxlLnNpYmxpbmcuYWxsTGVhZkNoaWxkcmVuPWUuYWxsTGVhZkNoaWxkcmVuKX0pLHRoaXMuYWxsU2V0cz17fSx0aGlzLmFsbFBhcmVudHMubGVuZ3RoPTB9fXZhciBsPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBkPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1YntleGVjdXRlKGUpe2NvbnN0IHQ9dGhpcy5jcmVhdGVHcm91cGluZ0RldGFpbHMoZSk7aWYodC50cmFuc2FjdGlvbnMpdGhpcy5oYW5kbGVUcmFuc2FjdGlvbih0KTtlbHNle2NvbnN0IGk9ITA9PT1lLmFmdGVyQ29sdW1uc0NoYW5nZWQ7dGhpcy5zaG90Z3VuUmVzZXRFdmVyeXRoaW5nKHQsaSl9dC51c2luZ1RyZWVEYXRhfHwodGhpcy5wb3NpdGlvbkxlYWZzQW5kR3JvdXBzKGUuY2hhbmdlZFBhdGgpLHRoaXMub3JkZXJHcm91cHModCkpLHRoaXMuc2VsZWN0YWJsZVNlcnZpY2UudXBkYXRlU2VsZWN0YWJsZUFmdGVyR3JvdXBpbmcoKX1wb3NpdGlvbkxlYWZzQW5kR3JvdXBzKGUpe2UuZm9yRWFjaENoYW5nZWROb2RlRGVwdGhGaXJzdChlPT57aWYoZS5jaGlsZHJlbkFmdGVyR3JvdXApe2NvbnN0IHQ9W10saT1bXTtsZXQgcztlLmNoaWxkcmVuQWZ0ZXJHcm91cC5mb3JFYWNoKGU9Pnt2YXIgcjsobnVsbD09PShyPWUuY2hpbGRyZW5BZnRlckdyb3VwKXx8dm9pZCAwPT09cj92b2lkIDA6ci5sZW5ndGgpPyIiIT09ZS5rZXl8fHM/aS5wdXNoKGUpOnM9ZTp0LnB1c2goZSl9KSxzJiZpLnB1c2gocyksZS5jaGlsZHJlbkFmdGVyR3JvdXA9Wy4uLnQsLi4uaV19fSwhMSl9Y3JlYXRlR3JvdXBpbmdEZXRhaWxzKGUpe3ZhciB0O2NvbnN0e3Jvd05vZGU6aSxjaGFuZ2VkUGF0aDpzLHJvd05vZGVUcmFuc2FjdGlvbnM6cixyb3dOb2RlT3JkZXI6b309ZSxuPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidHJlZURhdGEiKSxhPW4/bnVsbDp0aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpO3JldHVybntpbmNsdWRlUGFyZW50czohdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc1BhcmVudHNJblJvd05vZGVzIiksZXhwYW5kQnlEZWZhdWx0OnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBEZWZhdWx0RXhwYW5kZWQiKSxncm91cGVkQ29sczphLHJvb3ROb2RlOmkscGl2b3RNb2RlOnRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSxncm91cGVkQ29sQ291bnQ6bnx8IWE/MDphLmxlbmd0aCxyb3dOb2RlT3JkZXI6byx0cmFuc2FjdGlvbnM6cixjaGFuZ2VkUGF0aDpzLGdyb3VwQWxsb3dVbmJhbGFuY2VkOnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBBbGxvd1VuYmFsYW5jZWQiKSxpc0dyb3VwT3BlbkJ5RGVmYXVsdDp0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiaXNHcm91cE9wZW5CeURlZmF1bHQiKSxpbml0aWFsR3JvdXBPcmRlckNvbXBhcmF0b3I6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soImluaXRpYWxHcm91cE9yZGVyQ29tcGFyYXRvciIpLHVzaW5nVHJlZURhdGE6bixzdXBwcmVzc0dyb3VwTWFpbnRhaW5WYWx1ZVR5cGU6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0dyb3VwTWFpbnRhaW5WYWx1ZVR5cGUiKSxnZXREYXRhUGF0aDpuP3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ2V0RGF0YVBhdGgiKTp2b2lkIDAsa2V5Q3JlYXRvcnM6bnVsbCE9PSh0PW51bGw9PWE/dm9pZCAwOmEubWFwKGU9PmUuZ2V0Q29sRGVmKCkua2V5Q3JlYXRvcikpJiZ2b2lkIDAhPT10P3Q6W119fWhhbmRsZVRyYW5zYWN0aW9uKGUpe2UudHJhbnNhY3Rpb25zLmZvckVhY2godD0+e2NvbnN0IGk9ZS51c2luZ1RyZWVEYXRhP3ZvaWQgMDpuZXcgYTtpZihzLl8uZXhpc3RzQW5kTm90RW1wdHkodC5yZW1vdmUpJiZ0aGlzLnJlbW92ZU5vZGVzKHQucmVtb3ZlLGUsaSkscy5fLmV4aXN0c0FuZE5vdEVtcHR5KHQudXBkYXRlKSYmdGhpcy5tb3ZlTm9kZXNJbldyb25nUGF0aCh0LnVwZGF0ZSxlLGkpLHMuXy5leGlzdHNBbmROb3RFbXB0eSh0LmFkZCkmJnRoaXMuaW5zZXJ0Tm9kZXModC5hZGQsZSwhMSksaSl7Y29uc3QgdD1pLmdldEFsbFBhcmVudHMoKS5zbGljZSgpO2kuZmx1c2goKSx0aGlzLnJlbW92ZUVtcHR5R3JvdXBzKHQsZSl9fSksZS5yb3dOb2RlT3JkZXImJnRoaXMuc29ydENoaWxkcmVuKGUpfXNvcnRDaGlsZHJlbihlKXtlLmNoYW5nZWRQYXRoLmZvckVhY2hDaGFuZ2VkTm9kZURlcHRoRmlyc3QodD0+e2lmKCF0LmNoaWxkcmVuQWZ0ZXJHcm91cClyZXR1cm47cy5fLnNvcnRSb3dOb2Rlc0J5T3JkZXIodC5jaGlsZHJlbkFmdGVyR3JvdXAsZS5yb3dOb2RlT3JkZXIpJiZlLmNoYW5nZWRQYXRoLmFkZFBhcmVudE5vZGUodCl9LCExLCEwKX1vcmRlckdyb3VwcyhlKXtjb25zdCB0PWUuaW5pdGlhbEdyb3VwT3JkZXJDb21wYXJhdG9yO3MuXy5leGlzdHModCkmJmZ1bmN0aW9uIGUoaSl7cy5fLmV4aXN0cyhpLmNoaWxkcmVuQWZ0ZXJHcm91cCkmJiFpLmxlYWZHcm91cCYmKGkuY2hpbGRyZW5BZnRlckdyb3VwLnNvcnQoKGUsaSk9PnQoe25vZGVBOmUsbm9kZUI6aX0pKSxpLmNoaWxkcmVuQWZ0ZXJHcm91cC5mb3JFYWNoKHQ9PmUodCkpKX0oZS5yb290Tm9kZSl9Z2V0RXhpc3RpbmdQYXRoRm9yTm9kZShlLHQpe2NvbnN0IGk9W107bGV0IHM9dC51c2luZ1RyZWVEYXRhP2U6ZS5wYXJlbnQ7Zm9yKDtzJiZzIT09dC5yb290Tm9kZTspaS5wdXNoKHtrZXk6cy5rZXkscm93R3JvdXBDb2x1bW46cy5yb3dHcm91cENvbHVtbixmaWVsZDpzLmZpZWxkfSkscz1zLnBhcmVudDtyZXR1cm4gaS5yZXZlcnNlKCksaX1tb3ZlTm9kZXNJbldyb25nUGF0aChlLHQsaSl7ZS5mb3JFYWNoKGU9Pnt0LmNoYW5nZWRQYXRoLmlzQWN0aXZlKCkmJnQuY2hhbmdlZFBhdGguYWRkUGFyZW50Tm9kZShlLnBhcmVudCk7Y29uc3Qgcj1lPT5lLmtleSxvPXRoaXMuZ2V0RXhpc3RpbmdQYXRoRm9yTm9kZShlLHQpLm1hcChyKSxuPXRoaXMuZ2V0R3JvdXBJbmZvKGUsdCkubWFwKHIpO3MuXy5hcmVFcXVhbChvLG4pfHx0aGlzLm1vdmVOb2RlKGUsdCxpKX0pfW1vdmVOb2RlKGUsdCxpKXtpZih0aGlzLnJlbW92ZU5vZGVzSW5TdGFnZXMoW2VdLHQsaSksdGhpcy5pbnNlcnRPbmVOb2RlKGUsdCwhMCxpKSxlLnNldERhdGEoZS5kYXRhKSx0LmNoYW5nZWRQYXRoLmlzQWN0aXZlKCkpe2NvbnN0IGk9ZS5wYXJlbnQ7dC5jaGFuZ2VkUGF0aC5hZGRQYXJlbnROb2RlKGkpfX1yZW1vdmVOb2RlcyhlLHQsaSl7dGhpcy5yZW1vdmVOb2Rlc0luU3RhZ2VzKGUsdCxpKSx0LmNoYW5nZWRQYXRoLmlzQWN0aXZlKCkmJmUuZm9yRWFjaChlPT50LmNoYW5nZWRQYXRoLmFkZFBhcmVudE5vZGUoZS5wYXJlbnQpKX1yZW1vdmVOb2Rlc0luU3RhZ2VzKGUsdCxpKXtpZih0aGlzLnJlbW92ZU5vZGVzRnJvbVBhcmVudHMoZSx0LGkpLHQudXNpbmdUcmVlRGF0YSl7dGhpcy5wb3N0UmVtb3ZlQ3JlYXRlRmlsbGVyTm9kZXMoZSx0KTtjb25zdCBpPWUubWFwKGU9PmUucGFyZW50KTt0aGlzLnJlbW92ZUVtcHR5R3JvdXBzKGksdCl9fWZvckVhY2hQYXJlbnRHcm91cChlLHQsaSl7bGV0IHM9dDtmb3IoO3MmJnMhPT1lLnJvb3ROb2RlOylpKHMpLHM9cy5wYXJlbnR9cmVtb3ZlTm9kZXNGcm9tUGFyZW50cyhlLHQsaSl7Y29uc3Qgcz1udWxsPT1pLHI9aXx8bmV3IGE7ZS5mb3JFYWNoKGU9Pnt0aGlzLnJlbW92ZUZyb21QYXJlbnQoZSxyKSx0aGlzLmZvckVhY2hQYXJlbnRHcm91cCh0LGUucGFyZW50LHQ9PntyLnJlbW92ZUZyb21BbGxMZWFmQ2hpbGRyZW4odCxlKX0pfSkscyYmci5mbHVzaCgpfXBvc3RSZW1vdmVDcmVhdGVGaWxsZXJOb2RlcyhlLHQpe2UuZm9yRWFjaChlPT57aWYoZS5oYXNDaGlsZHJlbigpKXtjb25zdCBpPXRoaXMuZ2V0RXhpc3RpbmdQYXRoRm9yTm9kZShlLHQpLHM9dGhpcy5maW5kUGFyZW50Rm9yTm9kZShlLGksdCk7cy5leHBhbmRlZD1lLmV4cGFuZGVkLHMuYWxsTGVhZkNoaWxkcmVuPWUuYWxsTGVhZkNoaWxkcmVuLHMuY2hpbGRyZW5BZnRlckdyb3VwPWUuY2hpbGRyZW5BZnRlckdyb3VwLHMuY2hpbGRyZW5NYXBwZWQ9ZS5jaGlsZHJlbk1hcHBlZCxzLnVwZGF0ZUhhc0NoaWxkcmVuKCkscy5jaGlsZHJlbkFmdGVyR3JvdXAuZm9yRWFjaChlPT5lLnBhcmVudD1zKX19KX1yZW1vdmVFbXB0eUdyb3VwcyhlLHQpe2xldCBpPSEwO2NvbnN0IHM9ZT0+e2NvbnN0IHQ9dGhpcy5nZXRDaGlsZHJlbk1hcHBlZEtleShlLmtleSxlLnJvd0dyb3VwQ29sdW1uKSxpPWUucGFyZW50O3JldHVybiEoIWl8fCFpLmNoaWxkcmVuTWFwcGVkfHwhaS5jaGlsZHJlbk1hcHBlZFt0XSkmJiEhZS5pc0VtcHR5Um93R3JvdXBOb2RlKCl9O2Zvcig7aTspe2k9ITE7Y29uc3Qgcj1uZXcgYTtlLmZvckVhY2goZT0+e3RoaXMuZm9yRWFjaFBhcmVudEdyb3VwKHQsZSxlPT57cyhlKSYmKGk9ITAsdGhpcy5yZW1vdmVGcm9tUGFyZW50KGUsciksZS5zZXRTZWxlY3RlZFBhcmFtcyh7bmV3VmFsdWU6ITEsc291cmNlOiJyb3dHcm91cENoYW5nZWQifSkpfSl9KSxyLmZsdXNoKCl9fXJlbW92ZUZyb21QYXJlbnQoZSx0KXtlLnBhcmVudCYmKHQ/dC5yZW1vdmVGcm9tQ2hpbGRyZW5BZnRlckdyb3VwKGUucGFyZW50LGUpOihzLl8ucmVtb3ZlRnJvbUFycmF5KGUucGFyZW50LmNoaWxkcmVuQWZ0ZXJHcm91cCxlKSxlLnBhcmVudC51cGRhdGVIYXNDaGlsZHJlbigpKSk7Y29uc3QgaT10aGlzLmdldENoaWxkcmVuTWFwcGVkS2V5KGUua2V5LGUucm93R3JvdXBDb2x1bW4pO2UucGFyZW50JiZlLnBhcmVudC5jaGlsZHJlbk1hcHBlZCYmKGUucGFyZW50LmNoaWxkcmVuTWFwcGVkW2ldPXZvaWQgMCksZS5zZXRSb3dUb3AobnVsbCksZS5zZXRSb3dJbmRleChudWxsKX1hZGRUb1BhcmVudChlLHQpe2NvbnN0IGk9dGhpcy5nZXRDaGlsZHJlbk1hcHBlZEtleShlLmtleSxlLnJvd0dyb3VwQ29sdW1uKTtpZih0KXtudWxsIT10LmNoaWxkcmVuTWFwcGVkJiYodC5jaGlsZHJlbk1hcHBlZFtpXT1lKSx0LmNoaWxkcmVuQWZ0ZXJHcm91cC5wdXNoKGUpLHQudXBkYXRlSGFzQ2hpbGRyZW4oKX19YXJlR3JvdXBDb2xzRXF1YWwoZSx0KXtyZXR1cm4gbnVsbCE9ZSYmbnVsbCE9dCYmZS5waXZvdE1vZGU9PT10LnBpdm90TW9kZSYmKHMuXy5hcmVFcXVhbChlLmdyb3VwZWRDb2xzLHQuZ3JvdXBlZENvbHMpJiZzLl8uYXJlRXF1YWwoZS5rZXlDcmVhdG9ycyx0LmtleUNyZWF0b3JzKSl9Y2hlY2tBbGxHcm91cERhdGFBZnRlckNvbHNDaGFuZ2VkKGUpe2NvbnN0IHQ9aT0+e2kmJmkuZm9yRWFjaChpPT57aWYoIWUudXNpbmdUcmVlRGF0YSYmIWkuZ3JvdXApcmV0dXJuO2NvbnN0IHM9e2ZpZWxkOmkuZmllbGQsa2V5Omkua2V5LHJvd0dyb3VwQ29sdW1uOmkucm93R3JvdXBDb2x1bW4sbGVhZk5vZGU6aS5hbGxMZWFmQ2hpbGRyZW5bMF19O3RoaXMuc2V0R3JvdXBEYXRhKGkscyxlKSx0KGkuY2hpbGRyZW5BZnRlckdyb3VwKX0pfTt0KGUucm9vdE5vZGUuY2hpbGRyZW5BZnRlckdyb3VwKX1zaG90Z3VuUmVzZXRFdmVyeXRoaW5nKGUsdCl7aWYodGhpcy5ub0NoYW5nZUluR3JvdXBpbmdDb2x1bW5zKGUsdCkpcmV0dXJuO3RoaXMuc2VsZWN0aW9uU2VydmljZS5maWx0ZXJGcm9tU2VsZWN0aW9uKGU9PmUmJiFlLmdyb3VwKTtjb25zdHtyb290Tm9kZTppLGdyb3VwZWRDb2xzOnN9PWU7aS5sZWFmR3JvdXA9IWUudXNpbmdUcmVlRGF0YSYmMD09PXMubGVuZ3RoLGkuY2hpbGRyZW5BZnRlckdyb3VwPVtdLGkuY2hpbGRyZW5NYXBwZWQ9e30saS51cGRhdGVIYXNDaGlsZHJlbigpO2NvbnN0IHI9aS5zaWJsaW5nO3ImJihyLmNoaWxkcmVuQWZ0ZXJHcm91cD1pLmNoaWxkcmVuQWZ0ZXJHcm91cCxyLmNoaWxkcmVuTWFwcGVkPWkuY2hpbGRyZW5NYXBwZWQpLHRoaXMuaW5zZXJ0Tm9kZXMoaS5hbGxMZWFmQ2hpbGRyZW4sZSwhMSl9bm9DaGFuZ2VJbkdyb3VwaW5nQ29sdW1ucyhlLHQpe2xldCBpPSExO2NvbnN0IHM9dGhpcy5jb2x1bW5Nb2RlbC5nZXRHcm91cERpc3BsYXlDb2x1bW5zKCkscj1zP3MubWFwKGU9PmUuZ2V0SWQoKSkuam9pbigiLSIpOiIiO3JldHVybiB0JiYoaT1lLnVzaW5nVHJlZURhdGF8fHRoaXMuYXJlR3JvdXBDb2xzRXF1YWwoZSx0aGlzLm9sZEdyb3VwaW5nRGV0YWlscyksdGhpcy5vbGRHcm91cERpc3BsYXlDb2xJZHMhPT1yJiZ0aGlzLmNoZWNrQWxsR3JvdXBEYXRhQWZ0ZXJDb2xzQ2hhbmdlZChlKSksdGhpcy5vbGRHcm91cGluZ0RldGFpbHM9ZSx0aGlzLm9sZEdyb3VwRGlzcGxheUNvbElkcz1yLGl9aW5zZXJ0Tm9kZXMoZSx0LGkpe2UuZm9yRWFjaChlPT57dGhpcy5pbnNlcnRPbmVOb2RlKGUsdCxpKSx0LmNoYW5nZWRQYXRoLmlzQWN0aXZlKCkmJnQuY2hhbmdlZFBhdGguYWRkUGFyZW50Tm9kZShlLnBhcmVudCl9KX1pbnNlcnRPbmVOb2RlKGUsdCxpLHMpe2NvbnN0IHI9dGhpcy5nZXRHcm91cEluZm8oZSx0KSxvPXRoaXMuZmluZFBhcmVudEZvck5vZGUoZSxyLHQscyk7by5ncm91cHx8Y29uc29sZS53YXJuKCJBRyBHcmlkOiBkdXBsaWNhdGUgZ3JvdXAga2V5cyBmb3Igcm93IGRhdGEsIGtleXMgc2hvdWxkIGJlIHVuaXF1ZSIsW28uZGF0YSxlLmRhdGFdKSx0LnVzaW5nVHJlZURhdGE/dGhpcy5zd2FwR3JvdXBXaXRoVXNlck5vZGUobyxlLGkpOihlLnBhcmVudD1vLGUubGV2ZWw9ci5sZW5ndGgsby5jaGlsZHJlbkFmdGVyR3JvdXAucHVzaChlKSxvLnVwZGF0ZUhhc0NoaWxkcmVuKCkpfWZpbmRQYXJlbnRGb3JOb2RlKGUsdCxpLHMpe2xldCByPWkucm9vdE5vZGU7cmV0dXJuIHQuZm9yRWFjaCgodCxvKT0+e3I9dGhpcy5nZXRPckNyZWF0ZU5leHROb2RlKHIsdCxvLGkpLChudWxsPT1zP3ZvaWQgMDpzLmlzUmVtb3ZlRnJvbUFsbExlYWZDaGlsZHJlbihyLGUpKT9udWxsPT1zfHxzLnByZXZlbnRSZW1vdmVGcm9tQWxsTGVhZkNoaWxkcmVuKHIsZSk6ci5hbGxMZWFmQ2hpbGRyZW4ucHVzaChlKX0pLHJ9c3dhcEdyb3VwV2l0aFVzZXJOb2RlKGUsdCxpKXt0LnBhcmVudD1lLnBhcmVudCx0LmtleT1lLmtleSx0LmZpZWxkPWUuZmllbGQsdC5ncm91cERhdGE9ZS5ncm91cERhdGEsdC5sZXZlbD1lLmxldmVsLGl8fCh0LmV4cGFuZGVkPWUuZXhwYW5kZWQpLHQubGVhZkdyb3VwPWUubGVhZkdyb3VwLHQucm93R3JvdXBJbmRleD1lLnJvd0dyb3VwSW5kZXgsdC5hbGxMZWFmQ2hpbGRyZW49ZS5hbGxMZWFmQ2hpbGRyZW4sdC5jaGlsZHJlbkFmdGVyR3JvdXA9ZS5jaGlsZHJlbkFmdGVyR3JvdXAsdC5jaGlsZHJlbk1hcHBlZD1lLmNoaWxkcmVuTWFwcGVkLHQuc2libGluZz1lLnNpYmxpbmcsdC51cGRhdGVIYXNDaGlsZHJlbigpLHRoaXMucmVtb3ZlRnJvbVBhcmVudChlKSx0LmNoaWxkcmVuQWZ0ZXJHcm91cC5mb3JFYWNoKGU9PmUucGFyZW50PXQpLHRoaXMuYWRkVG9QYXJlbnQodCxlLnBhcmVudCl9Z2V0T3JDcmVhdGVOZXh0Tm9kZShlLHQsaSxzKXtjb25zdCByPXRoaXMuZ2V0Q2hpbGRyZW5NYXBwZWRLZXkodC5rZXksdC5yb3dHcm91cENvbHVtbik7bGV0IG89ZS5jaGlsZHJlbk1hcHBlZD9lLmNoaWxkcmVuTWFwcGVkW3JdOnZvaWQgMDtyZXR1cm4gb3x8KG89dGhpcy5jcmVhdGVHcm91cCh0LGUsaSxzKSx0aGlzLmFkZFRvUGFyZW50KG8sZSkpLG99Y3JlYXRlR3JvdXAoZSx0LGkscil7Y29uc3Qgbz1uZXcgcy5Sb3dOb2RlKHRoaXMuYmVhbnMpO3JldHVybiBvLmdyb3VwPSEwLG8uZmllbGQ9ZS5maWVsZCxvLnJvd0dyb3VwQ29sdW1uPWUucm93R3JvdXBDb2x1bW4sdGhpcy5zZXRHcm91cERhdGEobyxlLHIpLG8ua2V5PWUua2V5LG8uaWQ9dGhpcy5jcmVhdGVHcm91cElkKG8sdCxyLnVzaW5nVHJlZURhdGEsaSksby5sZXZlbD1pLG8ubGVhZkdyb3VwPSFyLnVzaW5nVHJlZURhdGEmJmk9PT1yLmdyb3VwZWRDb2xDb3VudC0xLG8uYWxsTGVhZkNoaWxkcmVuPVtdLG8uc2V0QWxsQ2hpbGRyZW5Db3VudCgwKSxvLnJvd0dyb3VwSW5kZXg9ci51c2luZ1RyZWVEYXRhP251bGw6aSxvLmNoaWxkcmVuQWZ0ZXJHcm91cD1bXSxvLmNoaWxkcmVuTWFwcGVkPXt9LG8udXBkYXRlSGFzQ2hpbGRyZW4oKSxvLnBhcmVudD1yLmluY2x1ZGVQYXJlbnRzP3Q6bnVsbCx0aGlzLnNldEV4cGFuZGVkSW5pdGlhbFZhbHVlKHIsbyksb31jcmVhdGVHcm91cElkKGUsdCxpLHIpe2xldCBvO3JldHVybiBvPWk/KGUsdCxpKT0+e2lmKGk8MClyZXR1cm4gbnVsbDtjb25zdCBzPXQ/byh0LHQucGFyZW50LGktMSk6bnVsbDtyZXR1cm5gJHtudWxsPT1zPyIiOnMrIi0ifSR7aX0tJHtlLmtleX1gfTooZSx0KT0+e2lmKCFlLnJvd0dyb3VwQ29sdW1uKXJldHVybiBudWxsO2NvbnN0IGk9dD9vKHQsdC5wYXJlbnQsMCk6bnVsbDtyZXR1cm5gJHtudWxsPT1pPyIiOmkrIi0ifSR7ZS5yb3dHcm91cENvbHVtbi5nZXRDb2xJZCgpfS0ke2Uua2V5fWB9LHMuUm93Tm9kZS5JRF9QUkVGSVhfUk9XX0dST1VQK28oZSx0LHIpfXNldEdyb3VwRGF0YShlLHQsaSl7ZS5ncm91cERhdGE9e307dGhpcy5jb2x1bW5Nb2RlbC5nZXRHcm91cERpc3BsYXlDb2x1bW5zKCkuZm9yRWFjaChzPT57aWYoaS51c2luZ1RyZWVEYXRhKXJldHVybiB2b2lkKGUuZ3JvdXBEYXRhW3MuZ2V0Q29sSWQoKV09dC5rZXkpO2NvbnN0IHI9ZS5yb3dHcm91cENvbHVtbjtudWxsIT09ciYmcy5pc1Jvd0dyb3VwRGlzcGxheWVkKHIuZ2V0SWQoKSkmJihpLnN1cHByZXNzR3JvdXBNYWludGFpblZhbHVlVHlwZT9lLmdyb3VwRGF0YVtzLmdldENvbElkKCldPXQua2V5OmUuZ3JvdXBEYXRhW3MuZ2V0Q29sSWQoKV09dGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUocix0LmxlYWZOb2RlKSl9KX1nZXRDaGlsZHJlbk1hcHBlZEtleShlLHQpe3JldHVybiB0P3QuZ2V0SWQoKSsiLSIrZTplfXNldEV4cGFuZGVkSW5pdGlhbFZhbHVlKGUsdCl7aWYoZS5waXZvdE1vZGUmJnQubGVhZkdyb3VwKXJldHVybiB2b2lkKHQuZXhwYW5kZWQ9ITEpO2NvbnN0IGk9ZS5pc0dyb3VwT3BlbkJ5RGVmYXVsdDtpZihpKXtjb25zdCBlPXtyb3dOb2RlOnQsZmllbGQ6dC5maWVsZCxrZXk6dC5rZXksbGV2ZWw6dC5sZXZlbCxyb3dHcm91cENvbHVtbjp0LnJvd0dyb3VwQ29sdW1ufTtyZXR1cm4gdm9pZCh0LmV4cGFuZGVkPTE9PWkoZSkpfWNvbnN0e2V4cGFuZEJ5RGVmYXVsdDpzfT1lOy0xIT09ZS5leHBhbmRCeURlZmF1bHQ/dC5leHBhbmRlZD10LmxldmVsPHM6dC5leHBhbmRlZD0hMH1nZXRHcm91cEluZm8oZSx0KXtyZXR1cm4gdC51c2luZ1RyZWVEYXRhP3RoaXMuZ2V0R3JvdXBJbmZvRnJvbUNhbGxiYWNrKGUsdCk6dGhpcy5nZXRHcm91cEluZm9Gcm9tR3JvdXBDb2x1bW5zKGUsdCl9Z2V0R3JvdXBJbmZvRnJvbUNhbGxiYWNrKGUsdCl7Y29uc3QgaT10LmdldERhdGFQYXRoP3QuZ2V0RGF0YVBhdGgoZS5kYXRhKTpudWxsO251bGwhPWkmJjAhPT1pLmxlbmd0aHx8cy5fLndhcm5PbmNlKCJnZXREYXRhUGF0aCgpIHNob3VsZCBub3QgcmV0dXJuIGFuIGVtcHR5IHBhdGggZm9yIGRhdGEgIitlLmRhdGEpO3JldHVybiBpP2kubWFwKGU9Pih7a2V5OmUsZmllbGQ6bnVsbCxyb3dHcm91cENvbHVtbjpudWxsfSkpOltdfWdldEdyb3VwSW5mb0Zyb21Hcm91cENvbHVtbnMoZSx0KXtjb25zdCBpPVtdO3JldHVybiB0Lmdyb3VwZWRDb2xzLmZvckVhY2gocz0+e2xldCByPXRoaXMudmFsdWVTZXJ2aWNlLmdldEtleUZvck5vZGUocyxlKSxvPW51bGwhPXImJiIiIT09cjtpZigodC5waXZvdE1vZGV8fCF0Lmdyb3VwQWxsb3dVbmJhbGFuY2VkKSYmIW8mJihyPSIiLG89ITApLG8pe2NvbnN0IHQ9e2tleTpyLGZpZWxkOnMuZ2V0Q29sRGVmKCkuZmllbGQscm93R3JvdXBDb2x1bW46cyxsZWFmTm9kZTplfTtpLnB1c2godCl9fSksaX19O2woW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLGQucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxsKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJzZWxlY3RhYmxlU2VydmljZSIpXSxkLnByb3RvdHlwZSwic2VsZWN0YWJsZVNlcnZpY2UiLHZvaWQgMCksbChbT2JqZWN0KHMuQXV0b3dpcmVkKSgidmFsdWVTZXJ2aWNlIildLGQucHJvdG90eXBlLCJ2YWx1ZVNlcnZpY2UiLHZvaWQgMCksbChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiYmVhbnMiKV0sZC5wcm90b3R5cGUsImJlYW5zIix2b2lkIDApLGwoW09iamVjdChzLkF1dG93aXJlZCkoInNlbGVjdGlvblNlcnZpY2UiKV0sZC5wcm90b3R5cGUsInNlbGVjdGlvblNlcnZpY2UiLHZvaWQgMCksZD1sKFtPYmplY3Qocy5CZWFuKSgiZ3JvdXBTdGFnZSIpXSxkKTt2YXIgYyxoPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCB1PWM9Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie2luaXQoKXtjb25zdCBlPSgpPT57dmFyIGU7cmV0dXJuIG51bGwhPT0oZT10aGlzLmdvcy5nZXQoInNlcnZlclNpZGVQaXZvdFJlc3VsdEZpZWxkU2VwYXJhdG9yIikpJiZ2b2lkIDAhPT1lP2U6Il8ifTt0aGlzLmZpZWxkU2VwYXJhdG9yPWUoKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJzZXJ2ZXJTaWRlUGl2b3RSZXN1bHRGaWVsZFNlcGFyYXRvciIsKCk9Pnt0aGlzLmZpZWxkU2VwYXJhdG9yPWUoKX0pO2NvbnN0IHQ9KCk9PnRoaXMuZ29zLmdldCgicGl2b3REZWZhdWx0RXhwYW5kZWQiKTt0aGlzLnBpdm90RGVmYXVsdEV4cGFuZGVkPXQoKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJwaXZvdERlZmF1bHRFeHBhbmRlZCIsKCk9Pnt0aGlzLnBpdm90RGVmYXVsdEV4cGFuZGVkPXQoKX0pfWNyZWF0ZVBpdm90Q29sdW1uRGVmcyhlKXtjb25zdCB0PXRoaXMuY3JlYXRlUGl2b3RDb2x1bW5zRnJvbVVuaXF1ZVZhbHVlcyhlKTtjb25zdCBpPWZ1bmN0aW9uIGUodCxpPVtdKXtyZXR1cm4gdC5mb3JFYWNoKHQ9Pnt2b2lkIDAhPT10LmNoaWxkcmVuP2UodC5jaGlsZHJlbixpKTppLnB1c2godCl9KSxpfSh0KTt0aGlzLmFkZFJvd0dyb3VwVG90YWxzKHQsaSksdGhpcy5hZGRFeHBhbmRhYmxlUGl2b3RHcm91cHModCxpKSx0aGlzLmFkZFBpdm90VG90YWxzVG9Hcm91cHModCxpKTtyZXR1cm57cGl2b3RDb2x1bW5Hcm91cERlZnM6dCxwaXZvdENvbHVtbkRlZnM6aS5tYXAoZT0+cy5fLmNsb25lT2JqZWN0KGUpKX19Y3JlYXRlUGl2b3RDb2x1bW5zRnJvbVVuaXF1ZVZhbHVlcyhlKXtjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuZ2V0UGl2b3RDb2x1bW5zKCksaT10Lmxlbmd0aDtyZXR1cm4gdGhpcy5yZWN1cnNpdmVseUJ1aWxkR3JvdXAoMCxlLFtdLGksdCl9cmVjdXJzaXZlbHlCdWlsZEdyb3VwKGUsdCxpLHIsbyl7Y29uc3Qgbj10aGlzLmNvbHVtbk1vZGVsLmdldFZhbHVlQ29sdW1ucygpO2lmKGU+PXIpcmV0dXJuIHRoaXMuYnVpbGRNZWFzdXJlQ29scyhpKTtjb25zdCBhPW9bZV0uZ2V0Q29sRGVmKCksbD10aGlzLmhlYWRlck5hbWVDb21wYXJhdG9yLmJpbmQodGhpcyxhLnBpdm90Q29tcGFyYXRvcik7aWYoMT09PW4ubGVuZ3RoJiZ0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJlbW92ZVBpdm90SGVhZGVyUm93V2hlblNpbmdsZVZhbHVlQ29sdW1uIikmJmU9PT1yLTEpe2NvbnN0IGU9W107cmV0dXJuIHMuXy5pdGVyYXRlT2JqZWN0KHQsdD0+e2NvbnN0IHM9Wy4uLmksdF0scj10aGlzLmNyZWF0ZUNvbERlZihuWzBdLHQscyk7ci5jb2x1bW5Hcm91cFNob3c9Im9wZW4iLGUucHVzaChyKX0pLGUuc29ydChsKSxlfWNvbnN0IGQ9W107cmV0dXJuIHMuXy5pdGVyYXRlT2JqZWN0KHQsKHQscyk9Pntjb25zdCBuPS0xPT09dGhpcy5waXZvdERlZmF1bHRFeHBhbmRlZHx8ZTx0aGlzLnBpdm90RGVmYXVsdEV4cGFuZGVkLGE9Wy4uLmksdF07ZC5wdXNoKHtjaGlsZHJlbjp0aGlzLnJlY3Vyc2l2ZWx5QnVpbGRHcm91cChlKzEscyxhLHIsbyksaGVhZGVyTmFtZTp0LHBpdm90S2V5czphLGNvbHVtbkdyb3VwU2hvdzoib3BlbiIsb3BlbkJ5RGVmYXVsdDpuLGdyb3VwSWQ6dGhpcy5nZW5lcmF0ZUNvbHVtbkdyb3VwSWQoYSl9KX0pLGQuc29ydChsKSxkfWJ1aWxkTWVhc3VyZUNvbHMoZSl7Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldFZhbHVlQ29sdW1ucygpO3JldHVybiAwPT09dC5sZW5ndGg/W3RoaXMuY3JlYXRlQ29sRGVmKG51bGwsIi0iLGUpXTp0Lm1hcCh0PT57Y29uc3QgaT10aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXlOYW1lRm9yQ29sdW1uKHQsImhlYWRlciIpO3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5jcmVhdGVDb2xEZWYodCxpLGUpKSx7Y29sdW1uR3JvdXBTaG93OiJvcGVuIn0pfSl9YWRkRXhwYW5kYWJsZVBpdm90R3JvdXBzKGUsdCl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0V4cGFuZGFibGVQaXZvdEdyb3VwcyIpfHx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBpdm90Q29sdW1uR3JvdXBUb3RhbHMiKSlyZXR1cm47Y29uc3QgaT0oZSx0LHMpPT57Y29uc3Qgcj1lO2lmKHIuY2hpbGRyZW4pe2NvbnN0IG89bmV3IE1hcDtyLmNoaWxkcmVuLmZvckVhY2goZT0+e2koZSx0LG8pfSk7Y29uc3Qgbj0hci5jaGlsZHJlbi5zb21lKGU9PmUuY2hpbGRyZW4pO3RoaXMuY29sdW1uTW9kZWwuZ2V0VmFsdWVDb2x1bW5zKCkuZm9yRWFjaChpPT57Y29uc3Qgcz10aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXlOYW1lRm9yQ29sdW1uKGksImhlYWRlciIpLHI9dGhpcy5jcmVhdGVDb2xEZWYoaSxzLGUucGl2b3RLZXlzKTtpZihyLnBpdm90VG90YWxDb2x1bW5JZHM9by5nZXQoaS5nZXRDb2xJZCgpKSxyLmNvbHVtbkdyb3VwU2hvdz0iY2xvc2VkIixyLmFnZ0Z1bmM9aS5nZXRBZ2dGdW5jKCksIW4pe2UuY2hpbGRyZW4ucHVzaChyKSx0LnB1c2gocil9fSksdGhpcy5tZXJnZShzLG8pfWVsc2V7Y29uc3QgdD1lO2lmKCF0LnBpdm90VmFsdWVDb2x1bW4pcmV0dXJuO2NvbnN0IGk9dC5waXZvdFZhbHVlQ29sdW1uLmdldENvbElkKCkscj1zLmhhcyhpKT9zLmdldChpKTpbXTtyLnB1c2godC5jb2xJZCkscy5zZXQoaSxyKX19O2UuZm9yRWFjaChlPT57aShlLHQsbmV3IE1hcCl9KX1hZGRQaXZvdFRvdGFsc1RvR3JvdXBzKGUsdCl7aWYoIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicGl2b3RDb2x1bW5Hcm91cFRvdGFscyIpKXJldHVybjtjb25zdCBpPSJhZnRlciI9PT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBpdm90Q29sdW1uR3JvdXBUb3RhbHMiKSxzPXRoaXMuY29sdW1uTW9kZWwuZ2V0VmFsdWVDb2x1bW5zKCkscj1zLm1hcChlPT5lLmdldEFnZ0Z1bmMoKSk7aWYoIXJ8fHIubGVuZ3RoPDF8fCF0aGlzLnNhbWVBZ2dGdW5jcyhyKSlyZXR1cm47Y29uc3Qgbz1zWzBdO2UuZm9yRWFjaChlPT57dGhpcy5yZWN1cnNpdmVseUFkZFBpdm90VG90YWwoZSx0LG8saSl9KX1yZWN1cnNpdmVseUFkZFBpdm90VG90YWwoZSx0LGkscyl7Y29uc3Qgcj1lO2lmKCFyLmNoaWxkcmVuKXtjb25zdCB0PWU7cmV0dXJuIHQuY29sSWQ/W3QuY29sSWRdOm51bGx9bGV0IG89W107aWYoci5jaGlsZHJlbi5mb3JFYWNoKGU9Pntjb25zdCByPXRoaXMucmVjdXJzaXZlbHlBZGRQaXZvdFRvdGFsKGUsdCxpLHMpO3ImJihvPW8uY29uY2F0KHIpKX0pLHIuY2hpbGRyZW4ubGVuZ3RoPjEpe2NvbnN0IHI9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCkoInBpdm90Q29sdW1uR3JvdXBUb3RhbHMiLCJUb3RhbCIpLG49dGhpcy5jcmVhdGVDb2xEZWYoaSxyLGUucGl2b3RLZXlzLCEwKTtuLnBpdm90VG90YWxDb2x1bW5JZHM9byxuLmFnZ0Z1bmM9aS5nZXRBZ2dGdW5jKCk7Y29uc3QgYT1lLmNoaWxkcmVuO3M/YS5wdXNoKG4pOmEudW5zaGlmdChuKSx0LnB1c2gobil9cmV0dXJuIG99YWRkUm93R3JvdXBUb3RhbHMoZSx0KXtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJwaXZvdFJvd1RvdGFscyIpKXJldHVybjtjb25zdCBpPSJhZnRlciI9PT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBpdm90Um93VG90YWxzIikscz10aGlzLmNvbHVtbk1vZGVsLmdldFZhbHVlQ29sdW1ucygpLHI9aT9zLnNsaWNlKCk6cy5zbGljZSgpLnJldmVyc2UoKTtmb3IobGV0IHM9MDtzPHIubGVuZ3RoO3MrKyl7Y29uc3Qgbz1yW3NdO2xldCBuPVtdO2UuZm9yRWFjaChlPT57bj1uLmNvbmNhdCh0aGlzLmV4dHJhY3RDb2xJZHNGb3JWYWx1ZUNvbHVtbihlLG8pKX0pO2NvbnN0IGE9ci5sZW5ndGg+MXx8IXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicmVtb3ZlUGl2b3RIZWFkZXJSb3dXaGVuU2luZ2xlVmFsdWVDb2x1bW4iKTt0aGlzLmNyZWF0ZVJvd0dyb3VwVG90YWwoZSx0LG8sbixpLGEpfX1leHRyYWN0Q29sSWRzRm9yVmFsdWVDb2x1bW4oZSx0KXtjb25zdCBpPWU7aWYoIWkuY2hpbGRyZW4pe2NvbnN0IGU9aTtyZXR1cm4gZS5waXZvdFZhbHVlQ29sdW1uPT09dCYmZS5jb2xJZD9bZS5jb2xJZF06W119bGV0IHM9W107cmV0dXJuIGkuY2hpbGRyZW4uZm9yRWFjaChlPT57dGhpcy5leHRyYWN0Q29sSWRzRm9yVmFsdWVDb2x1bW4oZSx0KTtjb25zdCBpPXRoaXMuZXh0cmFjdENvbElkc0ZvclZhbHVlQ29sdW1uKGUsdCk7cz1zLmNvbmNhdChpKX0pLHN9Y3JlYXRlUm93R3JvdXBUb3RhbChlLHQsaSxzLHIsbyl7bGV0IG47aWYoMD09PXRoaXMuY29sdW1uTW9kZWwuZ2V0VmFsdWVDb2x1bW5zKCkubGVuZ3RoKW49dGhpcy5jcmVhdGVDb2xEZWYobnVsbCwiLSIsW10pO2Vsc2V7Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXlOYW1lRm9yQ29sdW1uKGksImhlYWRlciIpO249dGhpcy5jcmVhdGVDb2xEZWYoaSxlLFtdKSxuLnBpdm90VG90YWxDb2x1bW5JZHM9c31uLmNvbElkPWMuUElWT1RfUk9XX1RPVEFMX1BSRUZJWCtuLmNvbElkLHQucHVzaChuKTtjb25zdCBhPW8/e2NoaWxkcmVuOltuXSxwaXZvdEtleXM6W10sZ3JvdXBJZDpgJHtjLlBJVk9UX1JPV19UT1RBTF9QUkVGSVh9X3Bpdm90R3JvdXBfJHtpLmdldENvbElkKCl9YH06bjtyP2UucHVzaChhKTplLnVuc2hpZnQoYSl9Y3JlYXRlQ29sRGVmKGUsdCxpLHM9ITEpe2NvbnN0IHI9e307aWYoZSl7Y29uc3QgdD1lLmdldENvbERlZigpO09iamVjdC5hc3NpZ24ocix0KSxyLmhpZGU9ITF9cmV0dXJuIHIuaGVhZGVyTmFtZT10LHIuY29sSWQ9dGhpcy5nZW5lcmF0ZUNvbHVtbklkKGl8fFtdLGUmJiFzP2UuZ2V0Q29sSWQoKToiIiksci5maWVsZD1yLmNvbElkLHIudmFsdWVHZXR0ZXI9ZT0+e3ZhciB0O3JldHVybiBudWxsPT09KHQ9ZS5kYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dFtlLmNvbERlZi5maWVsZF19LHIucGl2b3RLZXlzPWksci5waXZvdFZhbHVlQ29sdW1uPWUsITA9PT1yLmZpbHRlciYmKHIuZmlsdGVyPSJhZ051bWJlckNvbHVtbkZpbHRlciIpLHJ9c2FtZUFnZ0Z1bmNzKGUpe2lmKDE9PWUubGVuZ3RoKXJldHVybiEwO2ZvcihsZXQgdD0xO3Q8ZS5sZW5ndGg7dCsrKWlmKGVbdF0hPT1lWzBdKXJldHVybiExO3JldHVybiEwfWhlYWRlck5hbWVDb21wYXJhdG9yKGUsdCxpKXtyZXR1cm4gZT9lKHQuaGVhZGVyTmFtZSxpLmhlYWRlck5hbWUpOnQuaGVhZGVyTmFtZSYmIWkuaGVhZGVyTmFtZT8xOiF0LmhlYWRlck5hbWUmJmkuaGVhZGVyTmFtZT8tMTp0LmhlYWRlck5hbWUmJmkuaGVhZGVyTmFtZT90LmhlYWRlck5hbWU8aS5oZWFkZXJOYW1lPy0xOnQuaGVhZGVyTmFtZT5pLmhlYWRlck5hbWU/MTowOjB9bWVyZ2UoZSx0KXt0LmZvckVhY2goKHQsaSxzKT0+e2NvbnN0IHI9Wy4uLmUuaGFzKGkpP2UuZ2V0KGkpOltdLC4uLnRdO2Uuc2V0KGkscil9KX1nZW5lcmF0ZUNvbHVtbkdyb3VwSWQoZSl7cmV0dXJuYHBpdm90R3JvdXBfJHt0aGlzLmNvbHVtbk1vZGVsLmdldFBpdm90Q29sdW1ucygpLm1hcChlPT5lLmdldENvbElkKCkpLmpvaW4oIi0iKX1fJHtlLmpvaW4oIi0iKX1gfWdlbmVyYXRlQ29sdW1uSWQoZSx0KXtyZXR1cm5gcGl2b3RfJHt0aGlzLmNvbHVtbk1vZGVsLmdldFBpdm90Q29sdW1ucygpLm1hcChlPT5lLmdldENvbElkKCkpLmpvaW4oIi0iKX1fJHtlLmpvaW4oIi0iKX1fJHt0fWB9Y3JlYXRlQ29sRGVmc0Zyb21GaWVsZHMoZSl7Y29uc3QgdD17fTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krKyl7Y29uc3Qgcz1lW2ldLnNwbGl0KHRoaXMuZmllbGRTZXBhcmF0b3IpO2xldCByPXQ7Zm9yKGxldCBlPTA7ZTxzLmxlbmd0aDtlKyspe2NvbnN0IHQ9c1tlXTtudWxsPT1yW3RdJiYoclt0XT17fSkscj1yW3RdfX1jb25zdCBpPShlLHQscyxyKT0+e3ZhciBvO2NvbnN0IG49W107Zm9yKGxldCB0IGluIHMpe2NvbnN0IG89c1t0XSxhPWkoYCR7ZX0ke3RoaXMuZmllbGRTZXBhcmF0b3J9JHt0fWAsdCxvLHIrMSk7bi5wdXNoKGEpfWlmKDA9PT1uLmxlbmd0aCl7Y29uc3QgaT10aGlzLmNvbHVtbk1vZGVsLmdldFByaW1hcnlDb2x1bW4odCk7aWYoaSl7Y29uc3Qgcz1udWxsIT09KG89dGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5TmFtZUZvckNvbHVtbihpLCJoZWFkZXIiKSkmJnZvaWQgMCE9PW8/bzp0LHI9dGhpcy5jcmVhdGVDb2xEZWYoaSxzLHZvaWQgMCwhMSk7cmV0dXJuIHIuY29sSWQ9ZSxyLmFnZ0Z1bmM9aS5nZXRBZ2dGdW5jKCksci52YWx1ZUdldHRlcj10PT57dmFyIGk7cmV0dXJuIG51bGw9PT0oaT10LmRhdGEpfHx2b2lkIDA9PT1pP3ZvaWQgMDppW2VdfSxyfXJldHVybntjb2xJZDplLGhlYWRlck5hbWU6dCx2YWx1ZUdldHRlcjp0PT57dmFyIGk7cmV0dXJuIG51bGw9PT0oaT10LmRhdGEpfHx2b2lkIDA9PT1pP3ZvaWQgMDppW2VdfX19aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJyZW1vdmVQaXZvdEhlYWRlclJvd1doZW5TaW5nbGVWYWx1ZUNvbHVtbiIpJiYxPT09bi5sZW5ndGgmJiJjb2xJZCJpbiBuWzBdKXJldHVybiBuWzBdLmhlYWRlck5hbWU9dCxuWzBdO3JldHVybntvcGVuQnlEZWZhdWx0Oi0xPT09dGhpcy5waXZvdERlZmF1bHRFeHBhbmRlZHx8cjx0aGlzLnBpdm90RGVmYXVsdEV4cGFuZGVkLGdyb3VwSWQ6ZSxoZWFkZXJOYW1lOnQsY2hpbGRyZW46bn19LHM9W107Zm9yKGxldCBlIGluIHQpe2NvbnN0IHI9aShlLGUsdFtlXSwwKTtzLnB1c2gocil9cmV0dXJuIHN9fTt1LlBJVk9UX1JPV19UT1RBTF9QUkVGSVg9IlBpdm90Um93VG90YWxfIixoKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSx1LnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksaChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZ3JpZE9wdGlvbnNTZXJ2aWNlIildLHUucHJvdG90eXBlLCJnb3MiLHZvaWQgMCksaChbcy5Qb3N0Q29uc3RydWN0XSx1LnByb3RvdHlwZSwiaW5pdCIsbnVsbCksdT1jPWgoW09iamVjdChzLkJlYW4pKCJwaXZvdENvbERlZlNlcnZpY2UiKV0sdSk7dmFyIHA9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IGc9Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnVuaXF1ZVZhbHVlcz17fX1leGVjdXRlKGUpe2NvbnN0IHQ9ZS5jaGFuZ2VkUGF0aDt0aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RBY3RpdmUoKT90aGlzLmV4ZWN1dGVQaXZvdE9uKHQpOnRoaXMuZXhlY3V0ZVBpdm90T2ZmKHQpfWV4ZWN1dGVQaXZvdE9mZihlKXt0aGlzLmFnZ3JlZ2F0aW9uQ29sdW1uc0hhc2hMYXN0VGltZT1udWxsLHRoaXMudW5pcXVlVmFsdWVzPXt9LHRoaXMuY29sdW1uTW9kZWwuaXNTZWNvbmRhcnlDb2x1bW5zUHJlc2VudCgpJiYodGhpcy5jb2x1bW5Nb2RlbC5zZXRTZWNvbmRhcnlDb2x1bW5zKG51bGwsInJvd01vZGVsVXBkYXRlZCIpLGUmJmUuc2V0SW5hY3RpdmUoKSl9ZXhlY3V0ZVBpdm90T24oZSl7Y29uc3QgdD10aGlzLmJ1Y2tldFVwUm93Tm9kZXMoZSksaT10aGlzLnNldFVuaXF1ZVZhbHVlcyh0KSxzPXRoaXMuY29sdW1uTW9kZWwuZ2V0VmFsdWVDb2x1bW5zKCkscj1zLm1hcChlPT5gJHtlLmdldElkKCl9LSR7ZS5nZXRDb2xEZWYoKS5oZWFkZXJOYW1lfWApLmpvaW4oIiMiKSxvPXMubWFwKGU9PmUuZ2V0QWdnRnVuYygpLnRvU3RyaW5nKCkpLmpvaW4oIiMiKSxuPXRoaXMuYWdncmVnYXRpb25Db2x1bW5zSGFzaExhc3RUaW1lIT09cixhPXRoaXMuYWdncmVnYXRpb25GdW5jc0hhc2hMYXN0VGltZSE9PW87dGhpcy5hZ2dyZWdhdGlvbkNvbHVtbnNIYXNoTGFzdFRpbWU9cix0aGlzLmFnZ3JlZ2F0aW9uRnVuY3NIYXNoTGFzdFRpbWU9bztjb25zdCBsPXRoaXMuY29sdW1uTW9kZWwuZ2V0Um93R3JvdXBDb2x1bW5zKCkubWFwKGU9PmUuZ2V0SWQoKSkuam9pbigiIyIpLGQ9bCE9PXRoaXMuZ3JvdXBDb2x1bW5zSGFzaExhc3RUaW1lO3RoaXMuZ3JvdXBDb2x1bW5zSGFzaExhc3RUaW1lPWw7Y29uc3QgYz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBpdm90Um93VG90YWxzIiksaD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBpdm90Q29sdW1uR3JvdXBUb3RhbHMiKSx1PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NFeHBhbmRhYmxlUGl2b3RHcm91cHMiKSxwPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicmVtb3ZlUGl2b3RIZWFkZXJSb3dXaGVuU2luZ2xlVmFsdWVDb2x1bW4iKSxnPWMhPT10aGlzLnBpdm90Um93VG90YWxzTGFzdFRpbWV8fGghPT10aGlzLnBpdm90Q29sdW1uR3JvdXBUb3RhbHNMYXN0VGltZXx8dSE9PXRoaXMuc3VwcHJlc3NFeHBhbmRhYmxlUGl2b3RHcm91cHNMYXN0VGltZXx8cCE9PXRoaXMucmVtb3ZlUGl2b3RIZWFkZXJSb3dXaGVuU2luZ2xlVmFsdWVDb2x1bW5MYXN0VGltZTtpZih0aGlzLnBpdm90Um93VG90YWxzTGFzdFRpbWU9Yyx0aGlzLnBpdm90Q29sdW1uR3JvdXBUb3RhbHNMYXN0VGltZT1oLHRoaXMuc3VwcHJlc3NFeHBhbmRhYmxlUGl2b3RHcm91cHNMYXN0VGltZT11LHRoaXMucmVtb3ZlUGl2b3RIZWFkZXJSb3dXaGVuU2luZ2xlVmFsdWVDb2x1bW5MYXN0VGltZT1wLGl8fG58fGR8fGF8fGcpe2NvbnN0e3Bpdm90Q29sdW1uR3JvdXBEZWZzOnQscGl2b3RDb2x1bW5EZWZzOml9PXRoaXMucGl2b3RDb2xEZWZTZXJ2aWNlLmNyZWF0ZVBpdm90Q29sdW1uRGVmcyh0aGlzLnVuaXF1ZVZhbHVlcyk7dGhpcy5waXZvdENvbHVtbkRlZnM9aSx0aGlzLmNvbHVtbk1vZGVsLnNldFNlY29uZGFyeUNvbHVtbnModCwicm93TW9kZWxVcGRhdGVkIiksZSYmZS5zZXRJbmFjdGl2ZSgpfX1zZXRVbmlxdWVWYWx1ZXMoZSl7cmV0dXJuISEoSlNPTi5zdHJpbmdpZnkoZSkhPT1KU09OLnN0cmluZ2lmeSh0aGlzLnVuaXF1ZVZhbHVlcykpJiYodGhpcy51bmlxdWVWYWx1ZXM9ZSwhMCl9YnVja2V0VXBSb3dOb2RlcyhlKXtjb25zdCB0PXt9O2UuZm9yRWFjaENoYW5nZWROb2RlRGVwdGhGaXJzdChlPT57ZS5sZWFmR3JvdXAmJihlLmNoaWxkcmVuTWFwcGVkPW51bGwpfSk7Y29uc3QgaT1lPT57dmFyIHM7ZS5sZWFmR3JvdXA/dGhpcy5idWNrZXRSb3dOb2RlKGUsdCk6bnVsbD09PShzPWUuY2hpbGRyZW5BZnRlckZpbHRlcil8fHZvaWQgMD09PXN8fHMuZm9yRWFjaChpKX07cmV0dXJuIGUuZXhlY3V0ZUZyb21Sb290Tm9kZShpKSx0fWJ1Y2tldFJvd05vZGUoZSx0KXtjb25zdCBpPXRoaXMuY29sdW1uTW9kZWwuZ2V0UGl2b3RDb2x1bW5zKCk7MD09PWkubGVuZ3RoP2UuY2hpbGRyZW5NYXBwZWQ9bnVsbDplLmNoaWxkcmVuTWFwcGVkPXRoaXMuYnVja2V0Q2hpbGRyZW4oZS5jaGlsZHJlbkFmdGVyRmlsdGVyLGksMCx0KSxlLnNpYmxpbmcmJihlLnNpYmxpbmcuY2hpbGRyZW5NYXBwZWQ9ZS5jaGlsZHJlbk1hcHBlZCl9YnVja2V0Q2hpbGRyZW4oZSx0LGkscil7Y29uc3Qgbz17fSxuPXRbaV07aWYoZS5mb3JFYWNoKGU9PntsZXQgdD10aGlzLnZhbHVlU2VydmljZS5nZXRLZXlGb3JOb2RlKG4sZSk7cy5fLm1pc3NpbmcodCkmJih0PSIiKSxyW3RdfHwoclt0XT17fSksb1t0XXx8KG9bdF09W10pLG9bdF0ucHVzaChlKX0pLGk9PT10Lmxlbmd0aC0xKXJldHVybiBvO3tjb25zdCBlPXt9O3JldHVybiBzLl8uaXRlcmF0ZU9iamVjdChvLChzLG8pPT57ZVtzXT10aGlzLmJ1Y2tldENoaWxkcmVuKG8sdCxpKzEscltzXSl9KSxlfX1nZXRQaXZvdENvbHVtbkRlZnMoKXtyZXR1cm4gdGhpcy5waXZvdENvbHVtbkRlZnN9fTtwKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJ2YWx1ZVNlcnZpY2UiKV0sZy5wcm90b3R5cGUsInZhbHVlU2VydmljZSIsdm9pZCAwKSxwKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSxnLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCkscChbT2JqZWN0KHMuQXV0b3dpcmVkKSgicGl2b3RDb2xEZWZTZXJ2aWNlIildLGcucHJvdG90eXBlLCJwaXZvdENvbERlZlNlcnZpY2UiLHZvaWQgMCksZz1wKFtPYmplY3Qocy5CZWFuKSgicGl2b3RTdGFnZSIpXSxnKTt2YXIgbSxmPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NvbnN0IHY9InVuZGVmaW5lZCI9PXR5cGVvZiBCaWdJbnQ/bnVsbDpCaWdJbnQsQz17c3VtOiJTdW0iLGZpcnN0OiJGaXJzdCIsbGFzdDoiTGFzdCIsbWluOiJNaW4iLG1heDoiTWF4Iixjb3VudDoiQ291bnQiLGF2ZzoiQXZlcmFnZSJ9O2xldCB5PW09Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmFnZ0Z1bmNzTWFwPXt9LHRoaXMuaW5pdGlhbGlzZWQ9ITF9aW5pdCgpe3RoaXMuaW5pdGlhbGlzZWR8fCh0aGlzLmluaXRpYWxpc2VXaXRoRGVmYXVsdEFnZ3JlZ2F0aW9ucygpLHRoaXMuYWRkQWdnRnVuY3ModGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJhZ2dGdW5jcyIpKSl9aW5pdGlhbGlzZVdpdGhEZWZhdWx0QWdncmVnYXRpb25zKCl7dGhpcy5hZ2dGdW5jc01hcFttLkFHR19TVU1dPVMsdGhpcy5hZ2dGdW5jc01hcFttLkFHR19GSVJTVF09dyx0aGlzLmFnZ0Z1bmNzTWFwW20uQUdHX0xBU1RdPWIsdGhpcy5hZ2dGdW5jc01hcFttLkFHR19NSU5dPUUsdGhpcy5hZ2dGdW5jc01hcFttLkFHR19NQVhdPVIsdGhpcy5hZ2dGdW5jc01hcFttLkFHR19DT1VOVF09eCx0aGlzLmFnZ0Z1bmNzTWFwW20uQUdHX0FWR109VCx0aGlzLmluaXRpYWxpc2VkPSEwfWlzQWdnRnVuY1Bvc3NpYmxlKGUsdCl7Y29uc3QgaT10aGlzLmdldEZ1bmNOYW1lcyhlKSxyPXMuXy5pbmNsdWRlcyhpLHQpLG89cy5fLmV4aXN0cyh0aGlzLmFnZ0Z1bmNzTWFwW3RdKTtyZXR1cm4gciYmb31nZXREZWZhdWx0RnVuY0xhYmVsKGUpe3ZhciB0O3JldHVybiBudWxsIT09KHQ9Q1tlXSkmJnZvaWQgMCE9PXQ/dDplfWdldERlZmF1bHRBZ2dGdW5jKGUpe2NvbnN0IHQ9ZS5nZXRDb2xEZWYoKS5kZWZhdWx0QWdnRnVuYztpZihzLl8uZXhpc3RzKHQpJiZ0aGlzLmlzQWdnRnVuY1Bvc3NpYmxlKGUsdCkpcmV0dXJuIHQ7aWYodGhpcy5pc0FnZ0Z1bmNQb3NzaWJsZShlLG0uQUdHX1NVTSkpcmV0dXJuIG0uQUdHX1NVTTtjb25zdCBpPXRoaXMuZ2V0RnVuY05hbWVzKGUpO3JldHVybiBzLl8uZXhpc3RzQW5kTm90RW1wdHkoaSk/aVswXTpudWxsfWFkZEFnZ0Z1bmNzKGUpe3RoaXMuaW5pdCgpLHMuXy5pdGVyYXRlT2JqZWN0KGUsKGUsdCk9Pnt0aGlzLmFnZ0Z1bmNzTWFwW2VdPXR9KX1nZXRBZ2dGdW5jKGUpe3JldHVybiB0aGlzLmluaXQoKSx0aGlzLmFnZ0Z1bmNzTWFwW2VdfWdldEZ1bmNOYW1lcyhlKXtjb25zdCB0PWUuZ2V0Q29sRGVmKCkuYWxsb3dlZEFnZ0Z1bmNzO3JldHVybiBudWxsPT10P09iamVjdC5rZXlzKHRoaXMuYWdnRnVuY3NNYXApLnNvcnQoKTp0fWNsZWFyKCl7dGhpcy5hZ2dGdW5jc01hcD17fX19O2Z1bmN0aW9uIFMoZSl7Y29uc3R7dmFsdWVzOnR9PWU7bGV0IGk9bnVsbDtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKyl7Y29uc3Qgcz10W2VdOyJudW1iZXIiPT10eXBlb2Ygcz9udWxsPT09aT9pPXM6aSs9dj8ibnVtYmVyIj09dHlwZW9mIGk/czp2KHMpOnM6ImJpZ2ludCI9PXR5cGVvZiBzJiYoaT1udWxsPT09aT9zOigiYmlnaW50Ij09dHlwZW9mIGk/aTp2KGkpKStzKX1yZXR1cm4gaX1mdW5jdGlvbiB3KGUpe3JldHVybiBlLnZhbHVlcy5sZW5ndGg+MD9lLnZhbHVlc1swXTpudWxsfWZ1bmN0aW9uIGIoZSl7cmV0dXJuIGUudmFsdWVzLmxlbmd0aD4wP3MuXy5sYXN0KGUudmFsdWVzKTpudWxsfWZ1bmN0aW9uIEUoZSl7Y29uc3R7dmFsdWVzOnR9PWU7bGV0IGk9bnVsbDtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKyl7Y29uc3Qgcz10W2VdOyJudW1iZXIiIT10eXBlb2YgcyYmImJpZ2ludCIhPXR5cGVvZiBzfHwhKG51bGw9PT1pfHxpPnMpfHwoaT1zKX1yZXR1cm4gaX1mdW5jdGlvbiBSKGUpe2NvbnN0e3ZhbHVlczp0fT1lO2xldCBpPW51bGw7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspe2NvbnN0IHM9dFtlXTsibnVtYmVyIiE9dHlwZW9mIHMmJiJiaWdpbnQiIT10eXBlb2Ygc3x8IShudWxsPT09aXx8aTxzKXx8KGk9cyl9cmV0dXJuIGl9ZnVuY3Rpb24geChlKXt2YXIgdCxpO2NvbnN0e3ZhbHVlczpzfT1lO2xldCByPTA7Zm9yKGxldCBlPTA7ZTxzLmxlbmd0aDtlKyspe2NvbnN0IHQ9c1tlXTtyKz1udWxsIT10JiYibnVtYmVyIj09dHlwZW9mIHQudmFsdWU/dC52YWx1ZToxfWNvbnN0IG89bnVsbD09PShpPW51bGw9PT0odD1lLnJvd05vZGUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmFnZ0RhdGEpfHx2b2lkIDA9PT1pP3ZvaWQgMDppW2UuY29sdW1uLmdldENvbElkKCldO3JldHVybiBvJiZvLnZhbHVlPT09cj9vOnt2YWx1ZTpyLHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWUudG9TdHJpbmcoKX0sdG9OdW1iZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZX19fWZ1bmN0aW9uIFQoZSl7dmFyIHQsaSxzO2NvbnN0e3ZhbHVlczpyfT1lO2xldCBvPTAsbj0wO2ZvcihsZXQgZT0wO2U8ci5sZW5ndGg7ZSsrKXtjb25zdCB0PXJbZV07bGV0IGk9bnVsbDsibnVtYmVyIj09dHlwZW9mIHR8fCJiaWdpbnQiPT10eXBlb2YgdD8oaT10LG4rKyk6bnVsbD09dHx8Im51bWJlciIhPXR5cGVvZiB0LnZhbHVlJiYiYmlnaW50IiE9dHlwZW9mIHQudmFsdWV8fCJudW1iZXIiIT10eXBlb2YgdC5jb3VudHx8KGk9dj90LnZhbHVlKigibnVtYmVyIj09dHlwZW9mIHQudmFsdWU/dC5jb3VudDp2KHQuY291bnQpKTp0LnZhbHVlKnQuY291bnQsbis9dC5jb3VudCksIm51bWJlciI9PXR5cGVvZiBpP28rPXY/Im51bWJlciI9PXR5cGVvZiBvP2k6dihpKTppOiJiaWdpbnQiPT10eXBlb2YgaSYmKG89KCJiaWdpbnQiPT10eXBlb2Ygbz9vOnYobykpK2kpfWxldCBhPW51bGw7bj4wJiYoYT12P28vKCJudW1iZXIiPT10eXBlb2Ygbz9uOnYobikpOm8vbik7Y29uc3QgbD1udWxsPT09KGk9bnVsbD09PSh0PWUucm93Tm9kZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuYWdnRGF0YSl8fHZvaWQgMD09PWk/dm9pZCAwOmlbbnVsbD09PShzPWUuY29sdW1uKXx8dm9pZCAwPT09cz92b2lkIDA6cy5nZXRDb2xJZCgpXTtyZXR1cm4gbCYmbC5jb3VudD09PW4mJmwudmFsdWU9PT1hP2w6e2NvdW50Om4sdmFsdWU6YSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdGhpcy52YWx1ZXx8ImJpZ2ludCI9PXR5cGVvZiB0aGlzLnZhbHVlP3RoaXMudmFsdWUudG9TdHJpbmcoKToiIn0sdG9OdW1iZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZX19fXkuQUdHX1NVTT0ic3VtIix5LkFHR19GSVJTVD0iZmlyc3QiLHkuQUdHX0xBU1Q9Imxhc3QiLHkuQUdHX01JTj0ibWluIix5LkFHR19NQVg9Im1heCIseS5BR0dfQ09VTlQ9ImNvdW50Iix5LkFHR19BVkc9ImF2ZyIsZihbcy5Qb3N0Q29uc3RydWN0XSx5LnByb3RvdHlwZSwiaW5pdCIsbnVsbCkseT1tPWYoW09iamVjdChzLkJlYW4pKCJhZ2dGdW5jU2VydmljZSIpXSx5KTt2YXIgRD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBPIGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3IoZSx0LGkscyxyKXtzdXBlcigpLHRoaXMuY29sdW1uPWUsdGhpcy5kcmFnU291cmNlRHJvcFRhcmdldD10LHRoaXMuZ2hvc3Q9aSx0aGlzLmRyb3Bab25lUHVycG9zZT1zLHRoaXMuaG9yaXpvbnRhbD1yLHRoaXMucG9wdXBTaG93aW5nPSExfWluaXQoKXt0aGlzLnNldFRlbXBsYXRlKE8uVEVNUExBVEUpO2NvbnN0IGU9dGhpcy5nZXRHdWkoKSx0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZnVuY3Rpb25zUmVhZE9ubHkiKTt0aGlzLmFkZEVsZW1lbnRDbGFzc2VzKGUpLHRoaXMuYWRkRWxlbWVudENsYXNzZXModGhpcy5lRHJhZ0hhbmRsZSwiZHJhZy1oYW5kbGUiKSx0aGlzLmFkZEVsZW1lbnRDbGFzc2VzKHRoaXMuZVRleHQsInRleHQiKSx0aGlzLmFkZEVsZW1lbnRDbGFzc2VzKHRoaXMuZUJ1dHRvbiwiYnV0dG9uIiksdGhpcy5lRHJhZ0hhbmRsZS5hcHBlbmRDaGlsZChzLl8uY3JlYXRlSWNvbk5vU3BhbigiY29sdW1uRHJhZyIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UpKSx0aGlzLmVCdXR0b24uYXBwZW5kQ2hpbGQocy5fLmNyZWF0ZUljb25Ob1NwYW4oImNhbmNlbCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UpKSx0aGlzLnNldHVwU29ydCgpLHRoaXMuZGlzcGxheU5hbWU9dGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5TmFtZUZvckNvbHVtbih0aGlzLmNvbHVtbiwiY29sdW1uRHJvcCIpLHRoaXMuc2V0dXBDb21wb25lbnRzKCksdGhpcy5naG9zdHx8dHx8dGhpcy5hZGREcmFnU291cmNlKCksdGhpcy5zZXR1cEFyaWEoKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkNvbHVtbi5FVkVOVF9TT1JUX0NIQU5HRUQsKCk9Pnt0aGlzLnNldHVwQXJpYSgpfSksdGhpcy5zZXR1cFRvb2x0aXAoKSx0aGlzLmFjdGl2YXRlVGFiSW5kZXgoKTtjb25zdCBpPSgpPT57Y29uc3QgZT10aGlzLmlzR3JvdXBpbmdBbmRMb2NrZWQoKTtzLl8uc2V0RGlzcGxheWVkKHRoaXMuZUJ1dHRvbiwhZSYmIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZnVuY3Rpb25zUmVhZE9ubHkiKSksdGhpcy5lRHJhZ0hhbmRsZS5jbGFzc0xpc3QudG9nZ2xlKCJhZy1jb2x1bW4tc2VsZWN0LWNvbHVtbi1yZWFkb25seSIsZSksdGhpcy5zZXR1cEFyaWEoKX07aSgpLHRoaXMuaXNHcm91cGluZ1pvbmUoKSYmdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiZ3JvdXBMb2NrR3JvdXBDb2x1bW5zIiwoKT0+aSgpKX1nZXRDb2x1bW4oKXtyZXR1cm4gdGhpcy5jb2x1bW59c2V0dXBBcmlhKCl7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSx7bmFtZTp0LGFnZ0Z1bmNOYW1lOml9PXRoaXMuZ2V0Q29sdW1uQW5kQWdnRnVuY05hbWUoKSxyPWUoImFyaWFEcm9wWm9uZUNvbHVtbkNvbXBvbmVudEFnZ0Z1bmNTZXBhcmF0b3IiLCIgb2YgIiksbz17YXNjOmUoImFyaWFEcm9wWm9uZUNvbHVtbkNvbXBvbmVudFNvcnRBc2NlbmRpbmciLCJhc2NlbmRpbmciKSxkZXNjOmUoImFyaWFEcm9wWm9uZUNvbHVtbkNvbXBvbmVudFNvcnREZXNjZW5kaW5nIiwiZGVzY2VuZGluZyIpfSxuPXRoaXMuY29sdW1uLmdldFNvcnQoKSxhPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicm93R3JvdXBQYW5lbFN1cHByZXNzU29ydCIpLGw9W1tpJiZgJHtpfSR7cn1gLHQsdGhpcy5pc0dyb3VwaW5nWm9uZSgpJiYhYSYmbiYmIiwgIitvW25dXS5maWx0ZXIoZT0+ISFlKS5qb2luKCIiKV0sZD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImZ1bmN0aW9uc1JlYWRPbmx5Iik7aWYodGhpcy5pc0FnZ3JlZ2F0aW9uWm9uZSgpJiYhZCl7Y29uc3QgdD1lKCJhcmlhRHJvcFpvbmVDb2x1bW5WYWx1ZUl0ZW1EZXNjcmlwdGlvbiIsIlByZXNzIEVOVEVSIHRvIGNoYW5nZSB0aGUgYWdncmVnYXRpb24gdHlwZSIpO2wucHVzaCh0KX1pZih0aGlzLmlzR3JvdXBpbmdab25lKCkmJnRoaXMuY29sdW1uLmlzU29ydGFibGUoKSYmIWEpe2NvbnN0IHQ9ZSgiYXJpYURyb3Bab25lQ29sdW1uR3JvdXBJdGVtRGVzY3JpcHRpb24iLCJQcmVzcyBFTlRFUiB0byBzb3J0Iik7bC5wdXNoKHQpfWlmKCF0aGlzLmlzR3JvdXBpbmdBbmRMb2NrZWQoKSl7Y29uc3QgdD1lKCJhcmlhRHJvcFpvbmVDb2x1bW5Db21wb25lbnREZXNjcmlwdGlvbiIsIlByZXNzIERFTEVURSB0byByZW1vdmUiKTtsLnB1c2godCl9cy5fLnNldEFyaWFMYWJlbCh0aGlzLmdldEd1aSgpLGwuam9pbigiLiAiKSl9c2V0dXBUb29sdGlwKCl7Y29uc3QgZT0oKT0+e2NvbnN0IGU9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCkuaGVhZGVyVG9vbHRpcDt0aGlzLnNldFRvb2x0aXAoZSl9O2UoKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9ORVdfQ09MVU1OU19MT0FERUQsZSl9c2V0dXBTb3J0KCl7Y29uc3QgZT10aGlzLmNvbHVtbi5pc1NvcnRhYmxlKCksdD10aGlzLmlzR3JvdXBpbmdab25lKCk7aWYoZSYmdCYmIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicm93R3JvdXBQYW5lbFN1cHByZXNzU29ydCIpKXt0aGlzLmVTb3J0SW5kaWNhdG9yLnNldHVwU29ydCh0aGlzLmNvbHVtbiwhMCk7Y29uc3QgZT1lPT57ZS5wcmV2ZW50RGVmYXVsdCgpO2NvbnN0IHQ9ImN0cmwiPT09dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJtdWx0aVNvcnRLZXkiKT9lLmN0cmxLZXl8fGUubWV0YUtleTplLnNoaWZ0S2V5O3RoaXMuc29ydENvbnRyb2xsZXIucHJvZ3Jlc3NTb3J0KHRoaXMuY29sdW1uLHQsInVpQ29sdW1uU29ydGVkIil9O3RoaXMuYWRkR3VpRXZlbnRMaXN0ZW5lcigiY2xpY2siLGUpLHRoaXMuYWRkR3VpRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsdD0+e3Qua2V5PT09cy5LZXlDb2RlLkVOVEVSJiZ0aGlzLmlzR3JvdXBpbmdab25lKCkmJmUodCl9KX19YWRkRHJhZ1NvdXJjZSgpe2NvbnN0e2RyYWdBbmREcm9wU2VydmljZTplLGRpc3BsYXlOYW1lOnQsZURyYWdIYW5kbGU6aSxjb2x1bW46cn09dGhpcyxvPXt0eXBlOnMuRHJhZ1NvdXJjZVR5cGUuVG9vbFBhbmVsLGVFbGVtZW50OmksZ2V0RGVmYXVsdEljb25OYW1lOigpPT5zLkRyYWdBbmREcm9wU2VydmljZS5JQ09OX0hJREUsZ2V0RHJhZ0l0ZW06KCk9PnRoaXMuY3JlYXRlRHJhZ0l0ZW0ociksZHJhZ0l0ZW1OYW1lOnR9O2UuYWRkRHJhZ1NvdXJjZShvLCEwKSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT5lLnJlbW92ZURyYWdTb3VyY2UobykpfWNyZWF0ZURyYWdJdGVtKGUpe2NvbnN0IHQ9e307cmV0dXJuIHRbZS5nZXRJZCgpXT1lLmlzVmlzaWJsZSgpLHtjb2x1bW5zOltlXSx2aXNpYmxlU3RhdGU6dH19c2V0dXBDb21wb25lbnRzKCl7dGhpcy5zZXRUZXh0VmFsdWUoKSx0aGlzLnNldHVwUmVtb3ZlKCksdGhpcy5naG9zdCYmdGhpcy5hZGRDc3NDbGFzcygiYWctY29sdW1uLWRyb3AtY2VsbC1naG9zdCIpLHRoaXMuaXNBZ2dyZWdhdGlvblpvbmUoKSYmIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZnVuY3Rpb25zUmVhZE9ubHkiKSYmdGhpcy5hZGRHdWlFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5vblNob3dBZ2dGdW5jU2VsZWN0aW9uLmJpbmQodGhpcykpfWlzR3JvdXBpbmdBbmRMb2NrZWQoKXtyZXR1cm4gdGhpcy5pc0dyb3VwaW5nWm9uZSgpJiZ0aGlzLmNvbHVtbk1vZGVsLmlzQ29sdW1uR3JvdXBpbmdMb2NrZWQodGhpcy5jb2x1bW4pfXNldHVwUmVtb3ZlKCl7cy5fLnNldERpc3BsYXllZCh0aGlzLmVCdXR0b24sIXRoaXMuaXNHcm91cGluZ0FuZExvY2tlZCgpJiYhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJmdW5jdGlvbnNSZWFkT25seSIpKTtjb25zdCBlPXt0eXBlOk8uRVZFTlRfQ09MVU1OX1JFTU9WRX07dGhpcy5hZGRHdWlFdmVudExpc3RlbmVyKCJrZXlkb3duIix0PT57Y29uc3QgaT10LmtleT09PXMuS2V5Q29kZS5FTlRFUjt0LmtleT09PXMuS2V5Q29kZS5ERUxFVEUmJih0aGlzLmlzR3JvdXBpbmdBbmRMb2NrZWQoKXx8KHQucHJldmVudERlZmF1bHQoKSx0aGlzLmRpc3BhdGNoRXZlbnQoZSkpKSxpJiZ0aGlzLmlzQWdncmVnYXRpb25ab25lKCkmJiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImZ1bmN0aW9uc1JlYWRPbmx5IikmJih0LnByZXZlbnREZWZhdWx0KCksdGhpcy5vblNob3dBZ2dGdW5jU2VsZWN0aW9uKCkpfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lQnV0dG9uLCJjbGljayIsdD0+e3RoaXMuZGlzcGF0Y2hFdmVudChlKSx0LnN0b3BQcm9wYWdhdGlvbigpfSk7Y29uc3QgdD1uZXcgcy5Ub3VjaExpc3RlbmVyKHRoaXMuZUJ1dHRvbik7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodCxzLlRvdWNoTGlzdGVuZXIuRVZFTlRfVEFQLCgpPT57dGhpcy5kaXNwYXRjaEV2ZW50KGUpfSksdGhpcy5hZGREZXN0cm95RnVuYyh0LmRlc3Ryb3kuYmluZCh0KSl9Z2V0Q29sdW1uQW5kQWdnRnVuY05hbWUoKXtjb25zdCBlPXRoaXMuZGlzcGxheU5hbWU7bGV0IHQ9IiI7aWYodGhpcy5pc0FnZ3JlZ2F0aW9uWm9uZSgpKXtjb25zdCBlPXRoaXMuY29sdW1uLmdldEFnZ0Z1bmMoKSxpPSJzdHJpbmciPT10eXBlb2YgZT9lOiJhZ2ciO3Q9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCkoaSxpKX1yZXR1cm57bmFtZTplLGFnZ0Z1bmNOYW1lOnR9fXNldFRleHRWYWx1ZSgpe2NvbnN0e25hbWU6ZSxhZ2dGdW5jTmFtZTp0fT10aGlzLmdldENvbHVtbkFuZEFnZ0Z1bmNOYW1lKCksaT10aGlzLmlzQWdncmVnYXRpb25ab25lKCk/YCR7dH0oJHtlfSlgOmUscj1zLl8uZXNjYXBlU3RyaW5nKGkpO3RoaXMuZVRleHQuaW5uZXJIVE1MPXJ9b25TaG93QWdnRnVuY1NlbGVjdGlvbigpe2lmKHRoaXMucG9wdXBTaG93aW5nKXJldHVybjt0aGlzLnBvcHVwU2hvd2luZz0hMDtjb25zdCBlPW5ldyBzLlZpcnR1YWxMaXN0KHtjc3NJZGVudGlmaWVyOiJzZWxlY3QtYWdnLWZ1bmMifSksdD10aGlzLmFnZ0Z1bmNTZXJ2aWNlLmdldEZ1bmNOYW1lcyh0aGlzLmNvbHVtbiksaT10aGlzLmdldEd1aSgpLHI9ZS5nZXRHdWkoKTtlLnNldE1vZGVsKHtnZXRSb3c6ZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LGdldFJvd0NvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHQubGVuZ3RofX0pLHRoaXMuZ2V0Q29udGV4dCgpLmNyZWF0ZUJlYW4oZSk7Y29uc3Qgbz1zLl8ubG9hZFRlbXBsYXRlKCc8ZGl2IGNsYXNzPSJhZy1zZWxlY3QtYWdnLWZ1bmMtcG9wdXAiPjwvZGl2PicpO28uc3R5bGUudG9wPSIwcHgiLG8uc3R5bGUubGVmdD0iMHB4IixvLmFwcGVuZENoaWxkKHIpLG8uc3R5bGUud2lkdGg9aS5jbGllbnRXaWR0aCsicHgiO2NvbnN0IG49dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIobywiZm9jdXNvdXQiLGU9Pnshby5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpJiZsJiZsLmhpZGVGdW5jKCl9KSxhPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLGw9dGhpcy5wb3B1cFNlcnZpY2UuYWRkUG9wdXAoe21vZGFsOiEwLGVDaGlsZDpvLGNsb3NlT25Fc2M6ITAsY2xvc2VkQ2FsbGJhY2s6dD0+e3RoaXMuZGVzdHJveUJlYW4oZSksdGhpcy5wb3B1cFNob3dpbmc9ITEsIkVzY2FwZSI9PT0obnVsbD09dD92b2lkIDA6dC5rZXkpJiZpLmZvY3VzKCksbiYmbigpfSxhcmlhTGFiZWw6YSgiYXJpYUxhYmVsQWdncmVnYXRpb25GdW5jdGlvbiIsIkFnZ3JlZ2F0aW9uIEZ1bmN0aW9uIil9KTtsJiZlLnNldENvbXBvbmVudENyZWF0b3IodGhpcy5jcmVhdGVBZ2dTZWxlY3QuYmluZCh0aGlzLGwuaGlkZUZ1bmMpKSxlLmFkZEd1aUV2ZW50TGlzdGVuZXIoImtleWRvd24iLHQ9PntpZih0LmtleT09PXMuS2V5Q29kZS5FTlRFUnx8dC5rZXk9PT1zLktleUNvZGUuU1BBQ0Upe2NvbnN0IHQ9ZS5nZXRMYXN0Rm9jdXNlZFJvdygpO2lmKG51bGw9PXQpcmV0dXJuO2NvbnN0IGk9ZS5nZXRDb21wb25lbnRBdCh0KTtpJiZpLnNlbGVjdEl0ZW0oKX19KSx0aGlzLnBvcHVwU2VydmljZS5wb3NpdGlvblBvcHVwQnlDb21wb25lbnQoe3R5cGU6ImFnZ0Z1bmNTZWxlY3QiLGV2ZW50U291cmNlOmksZVBvcHVwOm8sa2VlcFdpdGhpbkJvdW5kczohMCxjb2x1bW46dGhpcy5jb2x1bW4scG9zaXRpb246InVuZGVyIn0pLGUucmVmcmVzaCgpO2xldCBkPXQuZmluZEluZGV4KGU9PmU9PT10aGlzLmNvbHVtbi5nZXRBZ2dGdW5jKCkpOy0xPT09ZCYmKGQ9MCksZS5mb2N1c1JvdyhkKX1jcmVhdGVBZ2dTZWxlY3QoZSx0KXtjb25zdCBpPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLHI9dC50b1N0cmluZygpLG89aShyLHIpO3JldHVybiBuZXcgQSgoKT0+e2lmKGUoKSx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImZ1bmN0aW9uc1Bhc3NpdmUiKSl7Y29uc3QgZT17dHlwZTpzLkV2ZW50cy5FVkVOVF9DT0xVTU5fQUdHX0ZVTkNfQ0hBTkdFX1JFUVVFU1QsY29sdW1uczpbdGhpcy5jb2x1bW5dLGFnZ0Z1bmM6dH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX1lbHNlIHRoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uQWdnRnVuYyh0aGlzLmNvbHVtbix0LCJ0b29sUGFuZWxEcmFnQW5kRHJvcCIpfSxvKX1hZGRFbGVtZW50Q2xhc3NlcyhlLHQpe3Q9dD8iLSIrdDoiIjtjb25zdCBpPXRoaXMuaG9yaXpvbnRhbD8iaG9yaXpvbnRhbCI6InZlcnRpY2FsIjtlLmNsYXNzTGlzdC5hZGQoImFnLWNvbHVtbi1kcm9wLWNlbGwiK3QsYGFnLWNvbHVtbi1kcm9wLSR7aX0tY2VsbCR7dH1gKX1pc0FnZ3JlZ2F0aW9uWm9uZSgpe3JldHVybiJhZ2dyZWdhdGlvbiI9PT10aGlzLmRyb3Bab25lUHVycG9zZX1pc0dyb3VwaW5nWm9uZSgpe3JldHVybiJyb3dHcm91cCI9PT10aGlzLmRyb3Bab25lUHVycG9zZX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLHRoaXMuY29sdW1uPW51bGwsdGhpcy5kcmFnU291cmNlRHJvcFRhcmdldD1udWxsfX1PLkVWRU5UX0NPTFVNTl9SRU1PVkU9ImNvbHVtblJlbW92ZSIsTy5URU1QTEFURT0nPHNwYW4gcm9sZT0ib3B0aW9uIj5cbiAgICAgICAgICA8c3BhbiByZWY9ImVEcmFnSGFuZGxlIiBjbGFzcz0iYWctZHJhZy1oYW5kbGUgYWctY29sdW1uLWRyb3AtY2VsbC1kcmFnLWhhbmRsZSIgcm9sZT0icHJlc2VudGF0aW9uIj48L3NwYW4+XG4gICAgICAgICAgPHNwYW4gcmVmPSJlVGV4dCIgY2xhc3M9ImFnLWNvbHVtbi1kcm9wLWNlbGwtdGV4dCIgYXJpYS1oaWRkZW49InRydWUiPjwvc3Bhbj5cbiAgICAgICAgICA8YWctc29ydC1pbmRpY2F0b3IgcmVmPSJlU29ydEluZGljYXRvciI+PC9hZy1zb3J0LWluZGljYXRvcj5cbiAgICAgICAgICA8c3BhbiByZWY9ImVCdXR0b24iIGNsYXNzPSJhZy1jb2x1bW4tZHJvcC1jZWxsLWJ1dHRvbiIgcm9sZT0icHJlc2VudGF0aW9uIj48L3NwYW4+XG4gICAgICAgIDwvc3Bhbj4nLEQoW09iamVjdChzLkF1dG93aXJlZCkoImRyYWdBbmREcm9wU2VydmljZSIpXSxPLnByb3RvdHlwZSwiZHJhZ0FuZERyb3BTZXJ2aWNlIix2b2lkIDApLEQoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLE8ucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxEKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJwb3B1cFNlcnZpY2UiKV0sTy5wcm90b3R5cGUsInBvcHVwU2VydmljZSIsdm9pZCAwKSxEKFtPYmplY3Qocy5PcHRpb25hbCkoImFnZ0Z1bmNTZXJ2aWNlIildLE8ucHJvdG90eXBlLCJhZ2dGdW5jU2VydmljZSIsdm9pZCAwKSxEKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJzb3J0Q29udHJvbGxlciIpXSxPLnByb3RvdHlwZSwic29ydENvbnRyb2xsZXIiLHZvaWQgMCksRChbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlVGV4dCIpXSxPLnByb3RvdHlwZSwiZVRleHQiLHZvaWQgMCksRChbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlRHJhZ0hhbmRsZSIpXSxPLnByb3RvdHlwZSwiZURyYWdIYW5kbGUiLHZvaWQgMCksRChbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlQnV0dG9uIildLE8ucHJvdG90eXBlLCJlQnV0dG9uIix2b2lkIDApLEQoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZVNvcnRJbmRpY2F0b3IiKV0sTy5wcm90b3R5cGUsImVTb3J0SW5kaWNhdG9yIix2b2lkIDApLEQoW3MuUG9zdENvbnN0cnVjdF0sTy5wcm90b3R5cGUsImluaXQiLG51bGwpO2NsYXNzIEEgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCc8ZGl2IGNsYXNzPSJhZy1zZWxlY3QtYWdnLWZ1bmMtaXRlbSIvPicpLHRoaXMuc2VsZWN0SXRlbT1lLHRoaXMuZ2V0R3VpKCkuaW5uZXJUZXh0PXQsdGhpcy5hZGRHdWlFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5zZWxlY3RJdGVtKX19dmFyIFA9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgTSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoJzxkaXYgY2xhc3M9ImFnLXVuc2VsZWN0YWJsZSIgcm9sZT0icHJlc2VudGF0aW9uIj48L2Rpdj4nKSx0aGlzLmhvcml6b250YWw9ZSx0aGlzLmRyb3Bab25lUHVycG9zZT10LHRoaXMuc3RhdGU9TS5TVEFURV9OT1RfRFJBR0dJTkcsdGhpcy5ndWlEZXN0cm95RnVuY3Rpb25zPVtdLHRoaXMuY2hpbGRDb2x1bW5Db21wb25lbnRzPVtdLHRoaXMucmVzaXplRW5hYmxlZD0hMSx0aGlzLmFkZEVsZW1lbnRDbGFzc2VzKHRoaXMuZ2V0R3VpKCkpLHRoaXMuZUNvbHVtbkRyb3BMaXN0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuYWRkRWxlbWVudENsYXNzZXModGhpcy5lQ29sdW1uRHJvcExpc3QsImxpc3QiKSxzLl8uc2V0QXJpYVJvbGUodGhpcy5lQ29sdW1uRHJvcExpc3QsImxpc3Rib3giKX1pc0hvcml6b250YWwoKXtyZXR1cm4gdGhpcy5ob3Jpem9udGFsfXRvZ2dsZVJlc2l6YWJsZShlKXt0aGlzLnBvc2l0aW9uYWJsZUZlYXR1cmUuc2V0UmVzaXphYmxlKCEhZSYme2JvdHRvbTohMH0pLHRoaXMucmVzaXplRW5hYmxlZD1lfXNldEJlYW5zKGUpe3RoaXMuYmVhbnM9ZX1pc1NvdXJjZUV2ZW50RnJvbVRhcmdldChlKXtjb25zdHtkcm9wWm9uZVRhcmdldDp0LGRyYWdTb3VyY2U6aX09ZTtyZXR1cm4gdC5jb250YWlucyhpLmVFbGVtZW50KX1kZXN0cm95KCl7dGhpcy5kZXN0cm95R3VpKCksc3VwZXIuZGVzdHJveSgpfWRlc3Ryb3lHdWkoKXt0aGlzLmd1aURlc3Ryb3lGdW5jdGlvbnMuZm9yRWFjaChlPT5lKCkpLHRoaXMuZ3VpRGVzdHJveUZ1bmN0aW9ucy5sZW5ndGg9MCx0aGlzLmNoaWxkQ29sdW1uQ29tcG9uZW50cy5sZW5ndGg9MCxzLl8uY2xlYXJFbGVtZW50KHRoaXMuZ2V0R3VpKCkpLHMuXy5jbGVhckVsZW1lbnQodGhpcy5lQ29sdW1uRHJvcExpc3QpfWluaXQoZSl7dGhpcy5wYXJhbXM9ZSx0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBzLk1hbmFnZWRGb2N1c0ZlYXR1cmUodGhpcy5nZXRGb2N1c2FibGVFbGVtZW50KCkse2hhbmRsZUtleURvd246dGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcyl9KSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5iZWFucy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELHRoaXMucmVmcmVzaEd1aS5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhbImZ1bmN0aW9uc1JlYWRPbmx5Iiwicm93R3JvdXBQYW5lbFN1cHByZXNzU29ydCIsImdyb3VwTG9ja0dyb3VwQ29sdW1ucyJdLHRoaXMucmVmcmVzaEd1aS5iaW5kKHRoaXMpKSx0aGlzLnNldHVwRHJvcFRhcmdldCgpLHRoaXMucG9zaXRpb25hYmxlRmVhdHVyZT1uZXcgcy5Qb3NpdGlvbmFibGVGZWF0dXJlKHRoaXMuZ2V0R3VpKCkse21pbkhlaWdodDoxMDB9KSx0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKHRoaXMucG9zaXRpb25hYmxlRmVhdHVyZSksdGhpcy5yZWZyZXNoR3VpKCkscy5fLnNldEFyaWFMYWJlbCh0aGlzLmVDb2x1bW5Ecm9wTGlzdCx0aGlzLmdldEFyaWFMYWJlbCgpKX1oYW5kbGVLZXlEb3duKGUpe2NvbnN0IHQ9IXRoaXMuaG9yaXpvbnRhbDtsZXQgaT1lLmtleT09PXMuS2V5Q29kZS5ET1dOLHI9ZS5rZXk9PT1zLktleUNvZGUuVVA7aWYoIXQpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKTtpPSF0JiZlLmtleT09PXMuS2V5Q29kZS5SSUdIVHx8dCYmZS5rZXk9PT1zLktleUNvZGUuTEVGVCxyPSF0JiZlLmtleT09PXMuS2V5Q29kZS5MRUZUfHx0JiZlLmtleT09PXMuS2V5Q29kZS5SSUdIVH1pZighaSYmIXIpcmV0dXJuO2NvbnN0IG89dGhpcy5mb2N1c1NlcnZpY2UuZmluZE5leHRGb2N1c2FibGVFbGVtZW50KHRoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLCExLHIpO28mJihlLnByZXZlbnREZWZhdWx0KCksby5mb2N1cygpKX1hZGRFbGVtZW50Q2xhc3NlcyhlLHQpe3Q9dD8iLSIrdDoiIjtjb25zdCBpPXRoaXMuaG9yaXpvbnRhbD8iaG9yaXpvbnRhbCI6InZlcnRpY2FsIjtlLmNsYXNzTGlzdC5hZGQoImFnLWNvbHVtbi1kcm9wIit0LGBhZy1jb2x1bW4tZHJvcC0ke2l9JHt0fWApfXNldHVwRHJvcFRhcmdldCgpe3RoaXMuZHJvcFRhcmdldD17Z2V0Q29udGFpbmVyOnRoaXMuZ2V0R3VpLmJpbmQodGhpcyksZ2V0SWNvbk5hbWU6dGhpcy5nZXRJY29uTmFtZS5iaW5kKHRoaXMpLG9uRHJhZ2dpbmc6dGhpcy5vbkRyYWdnaW5nLmJpbmQodGhpcyksb25EcmFnRW50ZXI6dGhpcy5vbkRyYWdFbnRlci5iaW5kKHRoaXMpLG9uRHJhZ0xlYXZlOnRoaXMub25EcmFnTGVhdmUuYmluZCh0aGlzKSxvbkRyYWdTdG9wOnRoaXMub25EcmFnU3RvcC5iaW5kKHRoaXMpLGlzSW50ZXJlc3RlZEluOnRoaXMuaXNJbnRlcmVzdGVkSW4uYmluZCh0aGlzKX0sdGhpcy5iZWFucy5kcmFnQW5kRHJvcFNlcnZpY2UuYWRkRHJvcFRhcmdldCh0aGlzLmRyb3BUYXJnZXQpfWlzSW50ZXJlc3RlZEluKGUpe3JldHVybiBlPT09cy5EcmFnU291cmNlVHlwZS5IZWFkZXJDZWxsfHxlPT09cy5EcmFnU291cmNlVHlwZS5Ub29sUGFuZWx9bWluaW11bUFsbG93ZWROZXdJbnNlcnRJbmRleCgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cExvY2tHcm91cENvbHVtbnMiKSx0PXRoaXMuY29sTW9kZWwuZ2V0Um93R3JvdXBDb2x1bW5zKCkubGVuZ3RoO3JldHVybi0xPT09ZT90Ok1hdGgubWluKGUsdCl9Y2hlY2tJbnNlcnRJbmRleChlKXtjb25zdCB0PXRoaXMuZ2V0TmV3SW5zZXJ0SW5kZXgoZSk7aWYodDwwKXJldHVybiExO2NvbnN0IGk9dGhpcy5taW5pbXVtQWxsb3dlZE5ld0luc2VydEluZGV4KCkscz1NYXRoLm1heChpLHQpLHI9cyE9PXRoaXMuaW5zZXJ0SW5kZXg7cmV0dXJuIHImJih0aGlzLmluc2VydEluZGV4PXMpLHJ9Z2V0TmV3SW5zZXJ0SW5kZXgoZSl7Y29uc3QgdD1lLmV2ZW50LGk9dGhpcy5ob3Jpem9udGFsP3QuY2xpZW50WDp0LmNsaWVudFkscz10aGlzLmNoaWxkQ29sdW1uQ29tcG9uZW50cy5tYXAoZT0+ZS5nZXRHdWkoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkscj1zLmZpbmRJbmRleChlPT50aGlzLmhvcml6b250YWw/ZS5yaWdodD5pJiZlLmxlZnQ8aTplLnRvcDxpJiZlLmJvdHRvbT5pKTtpZigtMT09PXIpe2NvbnN0IGU9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKTtpZihzLmV2ZXJ5KGU9Pmk+KHRoaXMuaG9yaXpvbnRhbD9lLnJpZ2h0OmUuYm90dG9tKSkpcmV0dXJuIGUmJnRoaXMuaG9yaXpvbnRhbD8wOnRoaXMuY2hpbGRDb2x1bW5Db21wb25lbnRzLmxlbmd0aDtyZXR1cm4gcy5ldmVyeShlPT5pPCh0aGlzLmhvcml6b250YWw/ZS5sZWZ0OmUudG9wKSk/ZSYmdGhpcy5ob3Jpem9udGFsP3RoaXMuY2hpbGRDb2x1bW5Db21wb25lbnRzLmxlbmd0aDowOnRoaXMuaW5zZXJ0SW5kZXh9cmV0dXJuIHRoaXMuaW5zZXJ0SW5kZXg8PXI/cisxOnJ9Y2hlY2tEcmFnU3RhcnRlZEJ5U2VsZihlKXt0aGlzLnN0YXRlPT09TS5TVEFURV9OT1RfRFJBR0dJTkcmJih0aGlzLnN0YXRlPU0uU1RBVEVfUkVBUlJBTkdFX0NPTFVNTlMsdGhpcy5wb3RlbnRpYWxEbmRDb2x1bW5zPWUuZHJhZ1NvdXJjZS5nZXREcmFnSXRlbSgpLmNvbHVtbnN8fFtdLHRoaXMucmVmcmVzaEd1aSgpLHRoaXMuY2hlY2tJbnNlcnRJbmRleChlKSx0aGlzLnJlZnJlc2hHdWkoKSl9b25EcmFnZ2luZyhlKXt0aGlzLmNoZWNrRHJhZ1N0YXJ0ZWRCeVNlbGYoZSksdGhpcy5jaGVja0luc2VydEluZGV4KGUpJiZ0aGlzLnJlZnJlc2hHdWkoKX1vbkRyYWdFbnRlcihlKXtjb25zdCB0PWUuZHJhZ1NvdXJjZS5nZXREcmFnSXRlbSgpLmNvbHVtbnN8fFtdO3RoaXMuc3RhdGU9TS5TVEFURV9ORVdfQ09MVU1OU19JTjtjb25zdCBpPXQuZmlsdGVyKHQ9PnRoaXMuaXNDb2x1bW5Ecm9wcGFibGUodCxlKSkscz1pLmV2ZXJ5KGU9Pi0xIT09dGhpcy5jaGlsZENvbHVtbkNvbXBvbmVudHMubWFwKGU9PmUuZ2V0Q29sdW1uKCkpLmluZGV4T2YoZSkpO2lmKDA9PT1pLmxlbmd0aClyZXR1cm47aWYodGhpcy5wb3RlbnRpYWxEbmRDb2x1bW5zPWkscylyZXR1cm4gdm9pZCh0aGlzLnN0YXRlPU0uU1RBVEVfTk9UX0RSQUdHSU5HKTtpZih0aGlzLmlzUm93R3JvdXBQYW5lbCgpJiYhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc1Jvd0dyb3VwSGlkZXNDb2x1bW5zIikmJiFlLmZyb21OdWRnZSl7Y29uc3QgdD1lLmRyYWdTb3VyY2UuZ2V0RHJhZ0l0ZW0oKS5jb2x1bW5zO3RoaXMuc2V0Q29sdW1uc1Zpc2libGUodCwhMSwidWlDb2x1bW5EcmFnZ2VkIil9dGhpcy5jaGVja0luc2VydEluZGV4KGUpLHRoaXMucmVmcmVzaEd1aSgpfXNldENvbHVtbnNWaXNpYmxlKGUsdCxpKXtpZihlKXtjb25zdCBzPWUuZmlsdGVyKGU9PiFlLmdldENvbERlZigpLmxvY2tWaXNpYmxlKTt0aGlzLmNvbE1vZGVsLnNldENvbHVtbnNWaXNpYmxlKHMsdCxpKX19aXNQb3RlbnRpYWxEbmRDb2x1bW5zKCl7cmV0dXJuIHMuXy5leGlzdHNBbmROb3RFbXB0eSh0aGlzLnBvdGVudGlhbERuZENvbHVtbnMpfWlzUm93R3JvdXBQYW5lbCgpe3JldHVybiJyb3dHcm91cCI9PT10aGlzLmRyb3Bab25lUHVycG9zZX1vbkRyYWdMZWF2ZShlKXtpZih0aGlzLnN0YXRlPT09TS5TVEFURV9SRUFSUkFOR0VfQ09MVU1OUyl7Y29uc3QgdD1lLmRyYWdTb3VyY2UuZ2V0RHJhZ0l0ZW0oKS5jb2x1bW5zfHxbXTt0aGlzLnJlbW92ZUNvbHVtbnModCl9aWYodGhpcy5pc1BvdGVudGlhbERuZENvbHVtbnMoKSl7aWYodGhpcy5pc1Jvd0dyb3VwUGFuZWwoKSYmIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NNYWtlQ29sdW1uVmlzaWJsZUFmdGVyVW5Hcm91cCIpJiYhZS5mcm9tTnVkZ2Upe2NvbnN0IHQ9ZS5kcmFnU291cmNlLmdldERyYWdJdGVtKCk7dGhpcy5zZXRDb2x1bW5zVmlzaWJsZSh0LmNvbHVtbnMsITAsInVpQ29sdW1uRHJhZ2dlZCIpfXRoaXMucG90ZW50aWFsRG5kQ29sdW1ucz1bXSx0aGlzLnJlZnJlc2hHdWkoKX10aGlzLnN0YXRlPU0uU1RBVEVfTk9UX0RSQUdHSU5HfW9uRHJhZ1N0b3AoKXtpZih0aGlzLmlzUG90ZW50aWFsRG5kQ29sdW1ucygpKXtsZXQgZT0hMTt0aGlzLnN0YXRlPT09TS5TVEFURV9ORVdfQ09MVU1OU19JTj8odGhpcy5hZGRDb2x1bW5zKHRoaXMucG90ZW50aWFsRG5kQ29sdW1ucyksZT0hMCk6ZT10aGlzLnJlYXJyYW5nZUNvbHVtbnModGhpcy5wb3RlbnRpYWxEbmRDb2x1bW5zKSx0aGlzLnBvdGVudGlhbERuZENvbHVtbnM9W10sdGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJmdW5jdGlvbnNQYXNzaXZlIikmJmV8fHRoaXMucmVmcmVzaEd1aSgpfXRoaXMuc3RhdGU9TS5TVEFURV9OT1RfRFJBR0dJTkd9cmVtb3ZlQ29sdW1ucyhlKXtjb25zdCB0PXRoaXMuZ2V0RXhpc3RpbmdDb2x1bW5zKCkuZmlsdGVyKHQ9PiFzLl8uaW5jbHVkZXMoZSx0KSk7dGhpcy51cGRhdGVDb2x1bW5zKHQpfWFkZENvbHVtbnMoZSl7aWYoIWUpcmV0dXJuO2NvbnN0IHQ9dGhpcy5nZXRFeGlzdGluZ0NvbHVtbnMoKS5zbGljZSgpLGk9ZS5maWx0ZXIoZT0+dC5pbmRleE9mKGUpPDApO3MuXy5pbnNlcnRBcnJheUludG9BcnJheSh0LGksdGhpcy5pbnNlcnRJbmRleCksdGhpcy51cGRhdGVDb2x1bW5zKHQpfXJlYXJyYW5nZUNvbHVtbnMoZSl7Y29uc3QgdD10aGlzLmdldE5vbkdob3N0Q29sdW1ucygpLnNsaWNlKCk7cmV0dXJuIHMuXy5pbnNlcnRBcnJheUludG9BcnJheSh0LGUsdGhpcy5pbnNlcnRJbmRleCksIXMuXy5hcmVFcXVhbCh0LHRoaXMuZ2V0RXhpc3RpbmdDb2x1bW5zKCkpJiYodGhpcy51cGRhdGVDb2x1bW5zKHQpLCEwKX1yZWZyZXNoR3VpKCl7Y29uc3QgZT10aGlzLmVDb2x1bW5Ecm9wTGlzdC5zY3JvbGxUb3AsdD10aGlzLnJlc2l6ZUVuYWJsZWQsaT10aGlzLmdldEZvY3VzZWRJdGVtKCk7bGV0IHM9dGhpcy5mb2N1c1NlcnZpY2UuZmluZE5leHRGb2N1c2FibGVFbGVtZW50KCk7c3x8KHM9dGhpcy5mb2N1c1NlcnZpY2UuZmluZE5leHRGb2N1c2FibGVFbGVtZW50KHZvaWQgMCwhMSwhMCkpLHRoaXMudG9nZ2xlUmVzaXphYmxlKCExKSx0aGlzLmRlc3Ryb3lHdWkoKSx0aGlzLmFkZEljb25BbmRUaXRsZVRvR3VpKCksdGhpcy5hZGRFbXB0eU1lc3NhZ2VUb0d1aSgpLHRoaXMuYWRkQ29sdW1uc1RvR3VpKCksdGhpcy5pc0hvcml6b250YWwoKXx8KHRoaXMuZUNvbHVtbkRyb3BMaXN0LnNjcm9sbFRvcD1lKSx0JiZ0aGlzLnRvZ2dsZVJlc2l6YWJsZSh0KSx0aGlzLmZvY3VzU2VydmljZS5pc0tleWJvYXJkTW9kZSgpJiZ0aGlzLnJlc3RvcmVGb2N1cyhpLHMpfWdldEZvY3VzZWRJdGVtKCl7Y29uc3QgZT10aGlzLmdldEd1aSgpLHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKS5hY3RpdmVFbGVtZW50O2lmKCFlLmNvbnRhaW5zKHQpKXJldHVybi0xO3JldHVybiBBcnJheS5mcm9tKGUucXVlcnlTZWxlY3RvckFsbCgiLmFnLWNvbHVtbi1kcm9wLWNlbGwiKSkuaW5kZXhPZih0KX1yZXN0b3JlRm9jdXMoZSx0KXtjb25zdCBpPXRoaXMuZ2V0R3VpKCkscz1BcnJheS5mcm9tKGkucXVlcnlTZWxlY3RvckFsbCgiLmFnLWNvbHVtbi1kcm9wLWNlbGwiKSk7aWYoLTE9PT1lKXJldHVybjswPT09cy5sZW5ndGgmJnQuZm9jdXMoKTtjb25zdCByPXNbTWF0aC5taW4ocy5sZW5ndGgtMSxlKV07ciYmci5mb2N1cygpfWdldE5vbkdob3N0Q29sdW1ucygpe2NvbnN0IGU9dGhpcy5nZXRFeGlzdGluZ0NvbHVtbnMoKTtyZXR1cm4gdGhpcy5pc1BvdGVudGlhbERuZENvbHVtbnMoKT9lLmZpbHRlcihlPT4hcy5fLmluY2x1ZGVzKHRoaXMucG90ZW50aWFsRG5kQ29sdW1ucyxlKSk6ZX1hZGRDb2x1bW5zVG9HdWkoKXtjb25zdCBlPXRoaXMuZ2V0Tm9uR2hvc3RDb2x1bW5zKCkubWFwKGU9PnRoaXMuY3JlYXRlQ29sdW1uQ29tcG9uZW50KGUsITEpKTtpZih0aGlzLmlzUG90ZW50aWFsRG5kQ29sdW1ucygpKXtjb25zdCB0PXRoaXMucG90ZW50aWFsRG5kQ29sdW1ucy5tYXAoZT0+dGhpcy5jcmVhdGVDb2x1bW5Db21wb25lbnQoZSwhMCkpO3RoaXMuaW5zZXJ0SW5kZXg+PWUubGVuZ3RoP2UucHVzaCguLi50KTplLnNwbGljZSh0aGlzLmluc2VydEluZGV4LDAsLi4udCl9dGhpcy5hcHBlbmRDaGlsZCh0aGlzLmVDb2x1bW5Ecm9wTGlzdCksZS5mb3JFYWNoKChlLHQpPT57dD4wJiZ0aGlzLmFkZEFycm93KHRoaXMuZUNvbHVtbkRyb3BMaXN0KSx0aGlzLmVDb2x1bW5Ecm9wTGlzdC5hcHBlbmRDaGlsZChlLmdldEd1aSgpKX0pLHRoaXMuYWRkQXJpYUxhYmVsc1RvQ29tcG9uZW50cygpfWFkZEFyaWFMYWJlbHNUb0NvbXBvbmVudHMoKXt0aGlzLmNoaWxkQ29sdW1uQ29tcG9uZW50cy5mb3JFYWNoKChlLHQpPT57Y29uc3QgaT1lLmdldEd1aSgpO3MuXy5zZXRBcmlhUG9zSW5TZXQoaSx0KzEpLHMuXy5zZXRBcmlhU2V0U2l6ZShpLHRoaXMuY2hpbGRDb2x1bW5Db21wb25lbnRzLmxlbmd0aCl9KX1jcmVhdGVDb2x1bW5Db21wb25lbnQoZSx0KXtjb25zdCBpPW5ldyBPKGUsdGhpcy5kcm9wVGFyZ2V0LHQsdGhpcy5kcm9wWm9uZVB1cnBvc2UsdGhpcy5ob3Jpem9udGFsKTtyZXR1cm4gaS5hZGRFdmVudExpc3RlbmVyKE8uRVZFTlRfQ09MVU1OX1JFTU9WRSx0aGlzLnJlbW92ZUNvbHVtbnMuYmluZCh0aGlzLFtlXSkpLHRoaXMuYmVhbnMuY29udGV4dC5jcmVhdGVCZWFuKGkpLHRoaXMuZ3VpRGVzdHJveUZ1bmN0aW9ucy5wdXNoKCgpPT50aGlzLmRlc3Ryb3lCZWFuKGkpKSx0fHx0aGlzLmNoaWxkQ29sdW1uQ29tcG9uZW50cy5wdXNoKGkpLGl9YWRkSWNvbkFuZFRpdGxlVG9HdWkoKXtjb25zdCBlPXRoaXMucGFyYW1zLmljb24sdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZihzLl8uc2V0QXJpYUhpZGRlbih0LCEwKSx0aGlzLmFkZEVsZW1lbnRDbGFzc2VzKHQsInRpdGxlLWJhciIpLHRoaXMuYWRkRWxlbWVudENsYXNzZXMoZSwiaWNvbiIpLHRoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY29sdW1uLWRyb3AtZW1wdHkiLHRoaXMuaXNFeGlzdGluZ0NvbHVtbnNFbXB0eSgpKSx0LmFwcGVuZENoaWxkKGUpLCF0aGlzLmhvcml6b250YWwpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO3RoaXMuYWRkRWxlbWVudENsYXNzZXMoZSwidGl0bGUiKSxlLmlubmVySFRNTD10aGlzLnBhcmFtcy50aXRsZSx0LmFwcGVuZENoaWxkKGUpfXRoaXMuYXBwZW5kQ2hpbGQodCl9aXNFeGlzdGluZ0NvbHVtbnNFbXB0eSgpe3JldHVybiAwPT09dGhpcy5nZXRFeGlzdGluZ0NvbHVtbnMoKS5sZW5ndGh9YWRkRW1wdHlNZXNzYWdlVG9HdWkoKXtpZighdGhpcy5pc0V4aXN0aW5nQ29sdW1uc0VtcHR5KCl8fHRoaXMuaXNQb3RlbnRpYWxEbmRDb2x1bW5zKCkpcmV0dXJuO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2UuaW5uZXJIVE1MPXRoaXMucGFyYW1zLmVtcHR5TWVzc2FnZSx0aGlzLmFkZEVsZW1lbnRDbGFzc2VzKGUsImVtcHR5LW1lc3NhZ2UiKSx0aGlzLmVDb2x1bW5Ecm9wTGlzdC5hcHBlbmRDaGlsZChlKX1hZGRBcnJvdyhlKXtpZih0aGlzLmhvcml6b250YWwpe2NvbnN0IHQ9dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKSxpPXMuXy5jcmVhdGVJY29uTm9TcGFuKHQ/InNtYWxsTGVmdCI6InNtYWxsUmlnaHQiLHRoaXMuYmVhbnMuZ3JpZE9wdGlvbnNTZXJ2aWNlKTt0aGlzLmFkZEVsZW1lbnRDbGFzc2VzKGksImNlbGwtc2VwYXJhdG9yIiksZS5hcHBlbmRDaGlsZChpKX19fU0uU1RBVEVfTk9UX0RSQUdHSU5HPSJub3REcmFnZ2luZyIsTS5TVEFURV9ORVdfQ09MVU1OU19JTj0ibmV3Q29sdW1uc0luIixNLlNUQVRFX1JFQVJSQU5HRV9DT0xVTU5TPSJyZWFycmFuZ2VDb2x1bW5zIixQKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSxNLnByb3RvdHlwZSwiY29sTW9kZWwiLHZvaWQgMCksUChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZm9jdXNTZXJ2aWNlIildLE0ucHJvdG90eXBlLCJmb2N1c1NlcnZpY2UiLHZvaWQgMCk7dmFyIEw9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgRiBleHRlbmRzIE17Y29uc3RydWN0b3IoZSl7c3VwZXIoZSwicm93R3JvdXAiKX1wYXNzQmVhbnNVcCgpe3N1cGVyLnNldEJlYW5zKHtncmlkT3B0aW9uc1NlcnZpY2U6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsZXZlbnRTZXJ2aWNlOnRoaXMuZXZlbnRTZXJ2aWNlLGNvbnRleHQ6dGhpcy5nZXRDb250ZXh0KCksbG9nZ2VyRmFjdG9yeTp0aGlzLmxvZ2dlckZhY3RvcnksZHJhZ0FuZERyb3BTZXJ2aWNlOnRoaXMuZHJhZ0FuZERyb3BTZXJ2aWNlfSk7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSx0PWUoInJvd0dyb3VwQ29sdW1uc0VtcHR5TWVzc2FnZSIsIkRyYWcgaGVyZSB0byBzZXQgcm93IGdyb3VwcyIpLGk9ZSgiZ3JvdXBzIiwiUm93IEdyb3VwcyIpO3N1cGVyLmluaXQoe2RyYWdBbmREcm9wSWNvbjpzLkRyYWdBbmREcm9wU2VydmljZS5JQ09OX0dST1VQLGljb246cy5fLmNyZWF0ZUljb25Ob1NwYW4oInJvd0dyb3VwUGFuZWwiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpLGVtcHR5TWVzc2FnZTp0LHRpdGxlOml9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9DT0xVTU5fUk9XX0dST1VQX0NIQU5HRUQsdGhpcy5yZWZyZXNoR3VpLmJpbmQodGhpcykpfWdldEFyaWFMYWJlbCgpe3JldHVybiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSgiYXJpYVJvd0dyb3VwRHJvcFpvbmVQYW5lbExhYmVsIiwiUm93IEdyb3VwcyIpfWdldFRvb2x0aXBQYXJhbXMoKXtjb25zdCBlPXN1cGVyLmdldFRvb2x0aXBQYXJhbXMoKTtyZXR1cm4gZS5sb2NhdGlvbj0icm93R3JvdXBDb2x1bW5zTGlzdCIsZX1pc0NvbHVtbkRyb3BwYWJsZShlLHQpe3JldHVybiEodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJmdW5jdGlvbnNSZWFkT25seSIpfHwhZS5pc1ByaW1hcnkoKSkmJihlLmlzQWxsb3dSb3dHcm91cCgpJiYoIWUuaXNSb3dHcm91cEFjdGl2ZSgpfHx0aGlzLmlzU291cmNlRXZlbnRGcm9tVGFyZ2V0KHQpKSl9dXBkYXRlQ29sdW1ucyhlKXtpZih0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImZ1bmN0aW9uc1Bhc3NpdmUiKSl7Y29uc3QgdD17dHlwZTpzLkV2ZW50cy5FVkVOVF9DT0xVTU5fUk9XX0dST1VQX0NIQU5HRV9SRVFVRVNULGNvbHVtbnM6ZX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KX1lbHNlIHRoaXMuY29sdW1uTW9kZWwuc2V0Um93R3JvdXBDb2x1bW5zKGUsInRvb2xQYW5lbFVpIil9Z2V0SWNvbk5hbWUoKXtyZXR1cm4gdGhpcy5pc1BvdGVudGlhbERuZENvbHVtbnMoKT9zLkRyYWdBbmREcm9wU2VydmljZS5JQ09OX0dST1VQOnMuRHJhZ0FuZERyb3BTZXJ2aWNlLklDT05fTk9UX0FMTE9XRUR9Z2V0RXhpc3RpbmdDb2x1bW5zKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0Um93R3JvdXBDb2x1bW5zKCl9fUwoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLEYucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxMKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJsb2dnZXJGYWN0b3J5IildLEYucHJvdG90eXBlLCJsb2dnZXJGYWN0b3J5Iix2b2lkIDApLEwoW09iamVjdChzLkF1dG93aXJlZCkoImRyYWdBbmREcm9wU2VydmljZSIpXSxGLnByb3RvdHlwZSwiZHJhZ0FuZERyb3BTZXJ2aWNlIix2b2lkIDApLEwoW3MuUG9zdENvbnN0cnVjdF0sRi5wcm90b3R5cGUsInBhc3NCZWFuc1VwIixudWxsKTt2YXIgST1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBOIGV4dGVuZHMgTXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlLCJwaXZvdCIpfXBhc3NCZWFuc1VwKCl7c3VwZXIuc2V0QmVhbnMoe2dyaWRPcHRpb25zU2VydmljZTp0aGlzLmdyaWRPcHRpb25zU2VydmljZSxldmVudFNlcnZpY2U6dGhpcy5ldmVudFNlcnZpY2UsY29udGV4dDp0aGlzLmdldENvbnRleHQoKSxsb2dnZXJGYWN0b3J5OnRoaXMubG9nZ2VyRmFjdG9yeSxkcmFnQW5kRHJvcFNlcnZpY2U6dGhpcy5kcmFnQW5kRHJvcFNlcnZpY2V9KTtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLHQ9ZSgicGl2b3RDb2x1bW5zRW1wdHlNZXNzYWdlIiwiRHJhZyBoZXJlIHRvIHNldCBjb2x1bW4gbGFiZWxzIiksaT1lKCJwaXZvdHMiLCJDb2x1bW4gTGFiZWxzIik7c3VwZXIuaW5pdCh7ZHJhZ0FuZERyb3BJY29uOnMuRHJhZ0FuZERyb3BTZXJ2aWNlLklDT05fR1JPVVAsaWNvbjpzLl8uY3JlYXRlSWNvbk5vU3BhbigicGl2b3RQYW5lbCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCksZW1wdHlNZXNzYWdlOnQsdGl0bGU6aX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX05FV19DT0xVTU5TX0xPQURFRCx0aGlzLnJlZnJlc2guYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ09MVU1OX1BJVk9UX0NIQU5HRUQsdGhpcy5yZWZyZXNoLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9QSVZPVF9NT0RFX0NIQU5HRUQsdGhpcy5jaGVja1Zpc2liaWxpdHkuYmluZCh0aGlzKSksdGhpcy5yZWZyZXNoKCl9Z2V0QXJpYUxhYmVsKCl7cmV0dXJuIHRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpKCJhcmlhUGl2b3REcm9wWm9uZVBhbmVsTGFiZWwiLCJDb2x1bW4gTGFiZWxzIil9Z2V0VG9vbHRpcFBhcmFtcygpe2NvbnN0IGU9c3VwZXIuZ2V0VG9vbHRpcFBhcmFtcygpO3JldHVybiBlLmxvY2F0aW9uPSJwaXZvdENvbHVtbnNMaXN0IixlfXJlZnJlc2goKXt0aGlzLmNoZWNrVmlzaWJpbGl0eSgpLHRoaXMucmVmcmVzaEd1aSgpfWNoZWNrVmlzaWJpbGl0eSgpe2NvbnN0IGU9dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpO2lmKHRoaXMuaXNIb3Jpem9udGFsKCkpc3dpdGNoKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicGl2b3RQYW5lbFNob3ciKSl7Y2FzZSJhbHdheXMiOnRoaXMuc2V0RGlzcGxheWVkKGUpO2JyZWFrO2Nhc2Uib25seVdoZW5QaXZvdGluZyI6Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RBY3RpdmUoKTt0aGlzLnNldERpc3BsYXllZChlJiZ0KTticmVhaztkZWZhdWx0OnRoaXMuc2V0RGlzcGxheWVkKCExKX1lbHNlIHRoaXMuc2V0RGlzcGxheWVkKGUpfWlzQ29sdW1uRHJvcHBhYmxlKGUsdCl7cmV0dXJuISh0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImZ1bmN0aW9uc1JlYWRPbmx5Iil8fCFlLmlzUHJpbWFyeSgpKSYmKGUuaXNBbGxvd1Bpdm90KCkmJighZS5pc1Bpdm90QWN0aXZlKCl8fHRoaXMuaXNTb3VyY2VFdmVudEZyb21UYXJnZXQodCkpKX11cGRhdGVDb2x1bW5zKGUpe2lmKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZnVuY3Rpb25zUGFzc2l2ZSIpKXtjb25zdCB0PXt0eXBlOnMuRXZlbnRzLkVWRU5UX0NPTFVNTl9QSVZPVF9DSEFOR0VfUkVRVUVTVCxjb2x1bW5zOmV9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9ZWxzZSB0aGlzLmNvbHVtbk1vZGVsLnNldFBpdm90Q29sdW1ucyhlLCJ0b29sUGFuZWxVaSIpfWdldEljb25OYW1lKCl7cmV0dXJuIHRoaXMuaXNQb3RlbnRpYWxEbmRDb2x1bW5zKCk/cy5EcmFnQW5kRHJvcFNlcnZpY2UuSUNPTl9QSVZPVDpzLkRyYWdBbmREcm9wU2VydmljZS5JQ09OX05PVF9BTExPV0VEfWdldEV4aXN0aW5nQ29sdW1ucygpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldFBpdm90Q29sdW1ucygpfX1JKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSxOLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksSShbT2JqZWN0KHMuQXV0b3dpcmVkKSgibG9nZ2VyRmFjdG9yeSIpXSxOLnByb3RvdHlwZSwibG9nZ2VyRmFjdG9yeSIsdm9pZCAwKSxJKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJkcmFnQW5kRHJvcFNlcnZpY2UiKV0sTi5wcm90b3R5cGUsImRyYWdBbmREcm9wU2VydmljZSIsdm9pZCAwKSxJKFtzLlBvc3RDb25zdHJ1Y3RdLE4ucHJvdG90eXBlLCJwYXNzQmVhbnNVcCIsbnVsbCk7dmFyIEc9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgayBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoKX1wb3N0Q29uc3RydWN0KCl7dGhpcy5zZXRHdWkodGhpcy5jcmVhdGVOb3J0aFBhbmVsKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRCwoKT0+dGhpcy5vblJvd0dyb3VwQ2hhbmdlZCgpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9ORVdfQ09MVU1OU19MT0FERUQsKCk9PnRoaXMub25Sb3dHcm91cENoYW5nZWQoKSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigicm93R3JvdXBQYW5lbFNob3ciLCgpPT50aGlzLm9uUm93R3JvdXBDaGFuZ2VkKCkpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoInBpdm90UGFuZWxTaG93IiwoKT0+dGhpcy5vblBpdm90UGFuZWxTaG93KCkpLHRoaXMub25Sb3dHcm91cENoYW5nZWQoKX1jcmVhdGVOb3J0aFBhbmVsKCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5jbGFzc0xpc3QuYWRkKCJhZy1jb2x1bW4tZHJvcC13cmFwcGVyIikscy5fLnNldEFyaWFSb2xlKGUsInByZXNlbnRhdGlvbiIpLHRoaXMucm93R3JvdXBDb21wPW5ldyBGKCEwKSx0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKHRoaXMucm93R3JvdXBDb21wKSx0aGlzLnBpdm90Q29tcD1uZXcgTighMCksdGhpcy5jcmVhdGVNYW5hZ2VkQmVhbih0aGlzLnBpdm90Q29tcCksZS5hcHBlbmRDaGlsZCh0aGlzLnJvd0dyb3VwQ29tcC5nZXRHdWkoKSksZS5hcHBlbmRDaGlsZCh0aGlzLnBpdm90Q29tcC5nZXRHdWkoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yb3dHcm91cENvbXAscy5Db21wb25lbnQuRVZFTlRfRElTUExBWUVEX0NIQU5HRUQsKCk9PnRoaXMub25Ecm9wUGFuZWxWaXNpYmxlKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucGl2b3RDb21wLHMuQ29tcG9uZW50LkVWRU5UX0RJU1BMQVlFRF9DSEFOR0VELCgpPT50aGlzLm9uRHJvcFBhbmVsVmlzaWJsZSgpKSx0aGlzLm9uRHJvcFBhbmVsVmlzaWJsZSgpLGV9b25Ecm9wUGFuZWxWaXNpYmxlKCl7Y29uc3QgZT10aGlzLnJvd0dyb3VwQ29tcC5pc0Rpc3BsYXllZCgpJiZ0aGlzLnBpdm90Q29tcC5pc0Rpc3BsYXllZCgpO3RoaXMucm93R3JvdXBDb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWNvbHVtbi1kcm9wLWhvcml6b250YWwtaGFsZi13aWR0aCIsZSksdGhpcy5waXZvdENvbXAuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY29sdW1uLWRyb3AtaG9yaXpvbnRhbC1oYWxmLXdpZHRoIixlKX1vblJvd0dyb3VwQ2hhbmdlZCgpe2lmKCF0aGlzLnJvd0dyb3VwQ29tcClyZXR1cm47Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0dyb3VwUGFuZWxTaG93Iik7aWYoImFsd2F5cyI9PT1lKXRoaXMucm93R3JvdXBDb21wLnNldERpc3BsYXllZCghMCk7ZWxzZSBpZigib25seVdoZW5Hcm91cGluZyI9PT1lKXtjb25zdCBlPSF0aGlzLmNvbHVtbk1vZGVsLmlzUm93R3JvdXBFbXB0eSgpO3RoaXMucm93R3JvdXBDb21wLnNldERpc3BsYXllZChlKX1lbHNlIHRoaXMucm93R3JvdXBDb21wLnNldERpc3BsYXllZCghMSl9b25QaXZvdFBhbmVsU2hvdygpe2lmKCF0aGlzLnBpdm90Q29tcClyZXR1cm47Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInBpdm90UGFuZWxTaG93Iik7aWYoImFsd2F5cyI9PT1lKXRoaXMucGl2b3RDb21wLnNldERpc3BsYXllZCghMCk7ZWxzZSBpZigib25seVdoZW5QaXZvdGluZyI9PT1lKXtjb25zdCBlPXRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdEFjdGl2ZSgpO3RoaXMucGl2b3RDb21wLnNldERpc3BsYXllZChlKX1lbHNlIHRoaXMucGl2b3RDb21wLnNldERpc3BsYXllZCghMSl9fUcoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLGsucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxHKFtzLlBvc3RDb25zdHJ1Y3RdLGsucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgXz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgVj1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7ZXhlY3V0ZShlKXtjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSxpPXRoaXMuZmlsdGVyTWFuYWdlci5pc0FnZ3JlZ2F0ZUZpbHRlclByZXNlbnQoKXx8dGhpcy5maWx0ZXJNYW5hZ2VyLmlzQWdncmVnYXRlUXVpY2tGaWx0ZXJQcmVzZW50KCkscz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRHcm91cEFnZ0ZpbHRlcmluZygpfHwodD9lPT5lLm5vZGUubGVhZkdyb3VwOmU9PiFlLm5vZGUuZ3JvdXApLHtjaGFuZ2VkUGF0aDpyfT1lLG89KGUsdD0hMSk9PntlLmNoaWxkcmVuQWZ0ZXJGaWx0ZXImJihlLmNoaWxkcmVuQWZ0ZXJBZ2dGaWx0ZXI9ZS5jaGlsZHJlbkFmdGVyRmlsdGVyLHQmJmUuY2hpbGRyZW5BZnRlckFnZ0ZpbHRlci5mb3JFYWNoKGU9Pm8oZSx0KSksdGhpcy5zZXRBbGxDaGlsZHJlbkNvdW50KGUpKSxlLnNpYmxpbmcmJihlLnNpYmxpbmcuY2hpbGRyZW5BZnRlckFnZ0ZpbHRlcj1lLmNoaWxkcmVuQWZ0ZXJBZ2dGaWx0ZXIpfTtyLmZvckVhY2hDaGFuZ2VkTm9kZURlcHRoRmlyc3QoaT9lPT57dmFyIHQ7ZS5jaGlsZHJlbkFmdGVyQWdnRmlsdGVyPShudWxsPT09KHQ9ZS5jaGlsZHJlbkFmdGVyRmlsdGVyKXx8dm9pZCAwPT09dD92b2lkIDA6dC5maWx0ZXIoZT0+e3ZhciB0O2lmKHMoe25vZGU6ZX0pKXtpZih0aGlzLmZpbHRlck1hbmFnZXIuZG9lc1Jvd1Bhc3NBZ2dyZWdhdGVGaWx0ZXJzKHtyb3dOb2RlOmV9KSlyZXR1cm4gbyhlLCEwKSwhMH1yZXR1cm4gbnVsbD09PSh0PWUuY2hpbGRyZW5BZnRlckFnZ0ZpbHRlcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQubGVuZ3RofSkpfHxudWxsLHRoaXMuc2V0QWxsQ2hpbGRyZW5Db3VudChlKSxlLnNpYmxpbmcmJihlLnNpYmxpbmcuY2hpbGRyZW5BZnRlckFnZ0ZpbHRlcj1lLmNoaWxkcmVuQWZ0ZXJBZ2dGaWx0ZXIpfTpvLCEwKX1zZXRBbGxDaGlsZHJlbkNvdW50VHJlZURhdGEoZSl7bGV0IHQ9MDtlLmNoaWxkcmVuQWZ0ZXJBZ2dGaWx0ZXIuZm9yRWFjaChlPT57dCsrLHQrPWUuYWxsQ2hpbGRyZW5Db3VudH0pLGUuc2V0QWxsQ2hpbGRyZW5Db3VudCh0KX1zZXRBbGxDaGlsZHJlbkNvdW50R3JpZEdyb3VwaW5nKGUpe2xldCB0PTA7ZS5jaGlsZHJlbkFmdGVyQWdnRmlsdGVyLmZvckVhY2goZT0+e2UuZ3JvdXA/dCs9ZS5hbGxDaGlsZHJlbkNvdW50OnQrK30pLGUuc2V0QWxsQ2hpbGRyZW5Db3VudCh0KX1zZXRBbGxDaGlsZHJlbkNvdW50KGUpe2UuaGFzQ2hpbGRyZW4oKT90aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInRyZWVEYXRhIik/dGhpcy5zZXRBbGxDaGlsZHJlbkNvdW50VHJlZURhdGEoZSk6dGhpcy5zZXRBbGxDaGlsZHJlbkNvdW50R3JpZEdyb3VwaW5nKGUpOmUuc2V0QWxsQ2hpbGRyZW5Db3VudChudWxsKX19O18oW09iamVjdChzLkF1dG93aXJlZCkoImZpbHRlck1hbmFnZXIiKV0sVi5wcm90b3R5cGUsImZpbHRlck1hbmFnZXIiLHZvaWQgMCksXyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sVi5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLFY9XyhbT2JqZWN0KHMuQmVhbikoImZpbHRlckFnZ3JlZ2F0ZXNTdGFnZSIpXSxWKTt2YXIgQj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBIIGV4dGVuZHMgcy5UYWJHdWFyZENvbXB7Y29uc3RydWN0b3IoKXtzdXBlcignXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1ncm91cC1maWx0ZXIiPlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlR3JvdXBGaWVsZCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9ImVVbmRlcmx5aW5nRmlsdGVyIj48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAnKX1wb3N0Q29uc3RydWN0KCl7dGhpcy5pbml0aWFsaXNlVGFiR3VhcmQoe30pfWluaXQoZSl7cmV0dXJuIHRoaXMucGFyYW1zPWUsdGhpcy52YWxpZGF0ZVBhcmFtcygpLHRoaXMudXBkYXRlR3JvdXBzKCkudGhlbigoKT0+e3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRCwoKT0+dGhpcy5vbkNvbHVtblJvd0dyb3VwQ2hhbmdlZCgpKX0pfXZhbGlkYXRlUGFyYW1zKCl7Y29uc3R7Y29sRGVmOmV9PXRoaXMucGFyYW1zO2UuZmllbGQmJnMuXy53YXJuT25jZSgnR3JvdXAgQ29sdW1uIEZpbHRlciBkb2VzIG5vdCB3b3JrIHdpdGggdGhlIGNvbERlZiBwcm9wZXJ0eSAiZmllbGQiLiBUaGlzIHByb3BlcnR5IHdpbGwgYmUgaWdub3JlZC4nKSxlLmZpbHRlclZhbHVlR2V0dGVyJiZzLl8ud2Fybk9uY2UoJ0dyb3VwIENvbHVtbiBGaWx0ZXIgZG9lcyBub3Qgd29yayB3aXRoIHRoZSBjb2xEZWYgcHJvcGVydHkgImZpbHRlclZhbHVlR2V0dGVyIi4gVGhpcyBwcm9wZXJ0eSB3aWxsIGJlIGlnbm9yZWQuJyksZS5maWx0ZXJQYXJhbXMmJnMuXy53YXJuT25jZSgnR3JvdXAgQ29sdW1uIEZpbHRlciBkb2VzIG5vdCB3b3JrIHdpdGggdGhlIGNvbERlZiBwcm9wZXJ0eSAiZmlsdGVyUGFyYW1zIi4gVGhpcyBwcm9wZXJ0eSB3aWxsIGJlIGlnbm9yZWQuJyl9dXBkYXRlR3JvdXBzKCl7Y29uc3QgZT10aGlzLnVwZGF0ZUdyb3VwRmllbGQoKTtyZXR1cm4gdGhpcy5nZXRVbmRlcmx5aW5nRmlsdGVycyhlKX1nZXRTb3VyY2VDb2x1bW5zKCl7aWYodGhpcy5ncm91cENvbHVtbj10aGlzLnBhcmFtcy5jb2x1bW4sdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpKXJldHVybiBzLl8ud2Fybk9uY2UoIkdyb3VwIENvbHVtbiBGaWx0ZXIgZG9lcyBub3Qgd29yayB3aXRoIFRyZWUgRGF0YSBlbmFibGVkLiBQbGVhc2UgZGlzYWJsZSBUcmVlIERhdGEsIG9yIHVzZSBhIGRpZmZlcmVudCBmaWx0ZXIuIiksW107Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmdldFNvdXJjZUNvbHVtbnNGb3JHcm91cENvbHVtbih0aGlzLmdyb3VwQ29sdW1uKTtyZXR1cm4gZXx8KHMuXy53YXJuT25jZSgiR3JvdXAgQ29sdW1uIEZpbHRlciBvbmx5IHdvcmtzIG9uIGdyb3VwIGNvbHVtbnMuIFBsZWFzZSB1c2UgYSBkaWZmZXJlbnQgZmlsdGVyLiIpLFtdKX11cGRhdGVHcm91cEZpZWxkKCl7cy5fLmNsZWFyRWxlbWVudCh0aGlzLmVHcm91cEZpZWxkKSx0aGlzLmVHcm91cEZpZWxkU2VsZWN0JiZ0aGlzLmRlc3Ryb3lCZWFuKHRoaXMuZUdyb3VwRmllbGRTZWxlY3QpO2NvbnN0IGU9dGhpcy5nZXRTb3VyY2VDb2x1bW5zKCksdD1lLmZpbHRlcihlPT5lLmlzRmlsdGVyQWxsb3dlZCgpKTtyZXR1cm4gdC5sZW5ndGg/KDE9PT1lLmxlbmd0aD8odGhpcy5zZWxlY3RlZENvbHVtbj10WzBdLHMuXy5zZXREaXNwbGF5ZWQodGhpcy5lR3JvdXBGaWVsZCwhMSkpOih0aGlzLnNlbGVjdGVkQ29sdW1uJiZ0LnNvbWUoZT0+ZS5nZXRJZCgpPT09dGhpcy5zZWxlY3RlZENvbHVtbi5nZXRJZCgpKXx8KHRoaXMuc2VsZWN0ZWRDb2x1bW49dFswXSksdGhpcy5jcmVhdGVHcm91cEZpZWxkU2VsZWN0RWxlbWVudCh0KSx0aGlzLmVHcm91cEZpZWxkLmFwcGVuZENoaWxkKHRoaXMuZUdyb3VwRmllbGRTZWxlY3QuZ2V0R3VpKCkpLHRoaXMuZUdyb3VwRmllbGQuYXBwZW5kQ2hpbGQocy5fLmxvYWRUZW1wbGF0ZSgnPGRpdiBjbGFzcz0iYWctZmlsdGVyLXNlcGFyYXRvciI+PC9kaXY+JykpLHMuXy5zZXREaXNwbGF5ZWQodGhpcy5lR3JvdXBGaWVsZCwhMCkpLHQpOih0aGlzLnNlbGVjdGVkQ29sdW1uPXZvaWQgMCxzLl8uc2V0RGlzcGxheWVkKHRoaXMuZUdyb3VwRmllbGQsITEpLG51bGwpfWNyZWF0ZUdyb3VwRmllbGRTZWxlY3RFbGVtZW50KGUpe3RoaXMuZUdyb3VwRmllbGRTZWxlY3Q9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5BZ1NlbGVjdCk7Y29uc3QgdD10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTt0aGlzLmVHcm91cEZpZWxkU2VsZWN0LnNldExhYmVsKHQoImdyb3VwRmlsdGVyU2VsZWN0IiwiU2VsZWN0IGZpZWxkOiIpKSx0aGlzLmVHcm91cEZpZWxkU2VsZWN0LnNldExhYmVsQWxpZ25tZW50KCJ0b3AiKSx0aGlzLmVHcm91cEZpZWxkU2VsZWN0LmFkZE9wdGlvbnMoZS5tYXAoZT0+e3ZhciB0O3JldHVybnt2YWx1ZTplLmdldElkKCksdGV4dDpudWxsIT09KHQ9dGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5TmFtZUZvckNvbHVtbihlLCJncm91cEZpbHRlciIsITEpKSYmdm9pZCAwIT09dD90OnZvaWQgMH19KSksdGhpcy5lR3JvdXBGaWVsZFNlbGVjdC5zZXRWYWx1ZSh0aGlzLnNlbGVjdGVkQ29sdW1uLmdldElkKCkpLHRoaXMuZUdyb3VwRmllbGRTZWxlY3Qub25WYWx1ZUNoYW5nZShlPT50aGlzLnVwZGF0ZVNlbGVjdGVkQ29sdW1uKGUpKSx0aGlzLmVHcm91cEZpZWxkU2VsZWN0LmFkZENzc0NsYXNzKCJhZy1ncm91cC1maWx0ZXItZmllbGQtc2VsZWN0LXdyYXBwZXIiKSwxPT09ZS5sZW5ndGgmJnRoaXMuZUdyb3VwRmllbGRTZWxlY3Quc2V0RGlzYWJsZWQoITApfWdldFVuZGVybHlpbmdGaWx0ZXJzKGUpe2lmKCFlKXJldHVybiB0aGlzLmZpbHRlckNvbHVtblBhaXJzPXZvaWQgMCx0aGlzLnNlbGVjdGVkRmlsdGVyPXZvaWQgMCx0aGlzLmdyb3VwQ29sdW1uLnNldEZpbHRlckFjdGl2ZSghMSwiY29sdW1uUm93R3JvdXBDaGFuZ2VkIikscy5BZ1Byb21pc2UucmVzb2x2ZSgpO2NvbnN0IHQ9W10saT1bXTtyZXR1cm4gZS5mb3JFYWNoKGU9Pntjb25zdCBzPXRoaXMuZmlsdGVyTWFuYWdlci5nZXRPckNyZWF0ZUZpbHRlcldyYXBwZXIoZSwiQ09MVU1OX01FTlUiKTsobnVsbD09cz92b2lkIDA6cy5maWx0ZXJQcm9taXNlKSYmdC5wdXNoKHMuZmlsdGVyUHJvbWlzZS50aGVuKHQ9Pih0JiZpLnB1c2goe2ZpbHRlcjp0LGNvbHVtbjplfSksZS5nZXRJZCgpPT09dGhpcy5zZWxlY3RlZENvbHVtbi5nZXRJZCgpJiYodGhpcy5zZWxlY3RlZEZpbHRlcj1udWxsIT10P3Q6dm9pZCAwKSx0KSkpfSkscy5BZ1Byb21pc2UuYWxsKHQpLnRoZW4oKCk9Pnt0aGlzLmZpbHRlckNvbHVtblBhaXJzPWksdGhpcy5ncm91cENvbHVtbi5zZXRGaWx0ZXJBY3RpdmUodGhpcy5pc0ZpbHRlckFjdGl2ZSgpLCJjb2x1bW5Sb3dHcm91cENoYW5nZWQiKX0pfWFkZFVuZGVybHlpbmdGaWx0ZXJFbGVtZW50KCl7aWYocy5fLmNsZWFyRWxlbWVudCh0aGlzLmVVbmRlcmx5aW5nRmlsdGVyKSwhdGhpcy5zZWxlY3RlZENvbHVtbilyZXR1cm4gcy5BZ1Byb21pc2UucmVzb2x2ZSgpO2NvbnN0IGU9dGhpcy5maWx0ZXJNYW5hZ2VyLmdldE9yQ3JlYXRlRmlsdGVyV3JhcHBlcih0aGlzLnNlbGVjdGVkQ29sdW1uLCJDT0xVTU5fTUVOVSIpO3JldHVybiBlP2UuZ3VpUHJvbWlzZS50aGVuKHQ9Pnt2YXIgaTt0aGlzLmVVbmRlcmx5aW5nRmlsdGVyLmFwcGVuZENoaWxkKHQpLG51bGw9PT0oaT1lLmZpbHRlclByb21pc2UpfHx2b2lkIDA9PT1pfHxpLnRoZW4oZT0+e3ZhciB0LGk7bnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuYWZ0ZXJHdWlBdHRhY2hlZCl8fHZvaWQgMD09PXR8fHQuY2FsbChlLHRoaXMuYWZ0ZXJHdWlBdHRhY2hlZFBhcmFtcyksKG51bGw9PT0oaT10aGlzLmFmdGVyR3VpQXR0YWNoZWRQYXJhbXMpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnN1cHByZXNzRm9jdXMpfHwhdGhpcy5lR3JvdXBGaWVsZFNlbGVjdHx8dGhpcy5lR3JvdXBGaWVsZFNlbGVjdC5pc0Rpc2FibGVkKCl8fHRoaXMuZUdyb3VwRmllbGRTZWxlY3QuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLmZvY3VzKCl9KX0pOnMuQWdQcm9taXNlLnJlc29sdmUoKX11cGRhdGVTZWxlY3RlZENvbHVtbihlKXt2YXIgdCxpO2lmKCFlKXJldHVybjtudWxsPT09KGk9bnVsbD09PSh0PXRoaXMuc2VsZWN0ZWRGaWx0ZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmFmdGVyR3VpRGV0YWNoZWQpfHx2b2lkIDA9PT1pfHxpLmNhbGwodCk7Y29uc3Qgcz10aGlzLmdldEZpbHRlckNvbHVtblBhaXIoZSk7dGhpcy5zZWxlY3RlZENvbHVtbj1udWxsPT1zP3ZvaWQgMDpzLmNvbHVtbix0aGlzLnNlbGVjdGVkRmlsdGVyPW51bGw9PXM/dm9pZCAwOnMuZmlsdGVyLHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpILkVWRU5UX1NFTEVDVEVEX0NPTFVNTl9DSEFOR0VEfSksdGhpcy5hZGRVbmRlcmx5aW5nRmlsdGVyRWxlbWVudCgpfWlzRmlsdGVyQWN0aXZlKCl7dmFyIGU7cmV0dXJuISEobnVsbD09PShlPXRoaXMuZmlsdGVyQ29sdW1uUGFpcnMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnNvbWUoKHtmaWx0ZXI6ZX0pPT5lLmlzRmlsdGVyQWN0aXZlKCkpKX1kb2VzRmlsdGVyUGFzcygpe3JldHVybiEwfWdldE1vZGVsKCl7cmV0dXJuIG51bGx9c2V0TW9kZWwoKXtyZXR1cm4gcy5BZ1Byb21pc2UucmVzb2x2ZSgpfWFmdGVyR3VpQXR0YWNoZWQoZSl7dGhpcy5hZnRlckd1aUF0dGFjaGVkUGFyYW1zPWUsdGhpcy5hZGRVbmRlcmx5aW5nRmlsdGVyRWxlbWVudCgpfWFmdGVyR3VpRGV0YWNoZWQoKXt2YXIgZSx0O3MuXy5jbGVhckVsZW1lbnQodGhpcy5lVW5kZXJseWluZ0ZpbHRlciksbnVsbD09PSh0PW51bGw9PT0oZT10aGlzLnNlbGVjdGVkRmlsdGVyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5hZnRlckd1aURldGFjaGVkKXx8dm9pZCAwPT09dHx8dC5jYWxsKGUpfW9uQ29sdW1uUm93R3JvdXBDaGFuZ2VkKCl7dGhpcy51cGRhdGVHcm91cHMoKS50aGVuKCgpPT57dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOkguRVZFTlRfQ09MVU1OX1JPV19HUk9VUF9DSEFOR0VEfSksdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh7dHlwZToiZmlsdGVyQWxsb3dlZFVwZGF0ZWQifSl9KX1nZXRGaWx0ZXJDb2x1bW5QYWlyKGUpe3ZhciB0O2lmKGUpcmV0dXJuIG51bGw9PT0odD10aGlzLmZpbHRlckNvbHVtblBhaXJzKXx8dm9pZCAwPT09dD92b2lkIDA6dC5maW5kKCh7Y29sdW1uOnR9KT0+dC5nZXRJZCgpPT09ZSl9Z2V0U2VsZWN0ZWRGaWx0ZXIoKXtyZXR1cm4gdGhpcy5zZWxlY3RlZEZpbHRlcn1nZXRTZWxlY3RlZENvbHVtbigpe3JldHVybiB0aGlzLnNlbGVjdGVkQ29sdW1ufWlzRmlsdGVyQWxsb3dlZCgpe3JldHVybiEhdGhpcy5zZWxlY3RlZENvbHVtbn1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpfX1ILkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRD0iY29sdW1uUm93R3JvdXBDaGFuZ2VkIixILkVWRU5UX1NFTEVDVEVEX0NPTFVNTl9DSEFOR0VEPSJzZWxlY3RlZENvbHVtbkNoYW5nZWQiLEIoW09iamVjdChzLkF1dG93aXJlZCkoImZpbHRlck1hbmFnZXIiKV0sSC5wcm90b3R5cGUsImZpbHRlck1hbmFnZXIiLHZvaWQgMCksQihbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sSC5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLEIoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUdyb3VwRmllbGQiKV0sSC5wcm90b3R5cGUsImVHcm91cEZpZWxkIix2b2lkIDApLEIoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZVVuZGVybHlpbmdGaWx0ZXIiKV0sSC5wcm90b3R5cGUsImVVbmRlcmx5aW5nRmlsdGVyIix2b2lkIDApLEIoW3MuUG9zdENvbnN0cnVjdF0sSC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBXPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGogZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCdcbiAgICAgICAgICAgIDxkaXYgcmVmPSJlRmxvYXRpbmdGaWx0ZXIiIGNsYXNzPSJhZy1ncm91cC1mbG9hdGluZy1maWx0ZXIgYWctZmxvYXRpbmctZmlsdGVyLWlucHV0IiByb2xlPSJwcmVzZW50YXRpb24iPjwvZGl2PlxuICAgICAgICAnKSx0aGlzLmhhdmVBZGRlZENvbHVtbkxpc3RlbmVycz0hMX1pbml0KGUpe3RoaXMucGFyYW1zPWU7Y29uc3QgdD0ibXVsdGlwbGVDb2x1bW5zIj09PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBEaXNwbGF5VHlwZSIpO3JldHVybiBuZXcgcy5BZ1Byb21pc2UoZT0+e3RoaXMucGFyYW1zLnBhcmVudEZpbHRlckluc3RhbmNlKGk9Pnt0aGlzLnBhcmVudEZpbHRlckluc3RhbmNlPWksdD90aGlzLnNldHVwVW5kZXJseWluZ0Zsb2F0aW5nRmlsdGVyRWxlbWVudCgpLnRoZW4oKCk9PmUoKSk6KHRoaXMuc2V0dXBSZWFkT25seUZsb2F0aW5nRmlsdGVyRWxlbWVudCgpLGUoKSl9KX0pLnRoZW4oKCk9Pnt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnBhcmVudEZpbHRlckluc3RhbmNlLEguRVZFTlRfU0VMRUNURURfQ09MVU1OX0NIQU5HRUQsKCk9PnRoaXMub25TZWxlY3RlZENvbHVtbkNoYW5nZWQoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5wYXJlbnRGaWx0ZXJJbnN0YW5jZSxILkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRCwoKT0+dGhpcy5vbkNvbHVtblJvd0dyb3VwQ2hhbmdlZCgpKX0pfW9uUGFyYW1zVXBkYXRlZChlKXt0aGlzLnJlZnJlc2goZSl9cmVmcmVzaChlKXt0aGlzLnBhcmFtcz1lLHRoaXMuc2V0UGFyYW1zKCl9c2V0UGFyYW1zKCl7dmFyIGU7Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXlOYW1lRm9yQ29sdW1uKHRoaXMucGFyYW1zLmNvbHVtbiwiaGVhZGVyIiwhMCksaT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTtudWxsPT09KGU9dGhpcy5lRmxvYXRpbmdGaWx0ZXJUZXh0KXx8dm9pZCAwPT09ZXx8ZS5zZXRJbnB1dEFyaWFMYWJlbChgJHt0fSAke2koImFyaWFGaWx0ZXJJbnB1dCIsIkZpbHRlciBJbnB1dCIpfWApfXNldHVwUmVhZE9ubHlGbG9hdGluZ0ZpbHRlckVsZW1lbnQoKXt0aGlzLmVGbG9hdGluZ0ZpbHRlclRleHR8fCh0aGlzLmVGbG9hdGluZ0ZpbHRlclRleHQ9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5BZ0lucHV0VGV4dEZpZWxkKSx0aGlzLmVGbG9hdGluZ0ZpbHRlclRleHQuc2V0RGlzYWJsZWQoITApLmFkZEd1aUV2ZW50TGlzdGVuZXIoImNsaWNrIiwoKT0+dGhpcy5wYXJhbXMuc2hvd1BhcmVudEZpbHRlcigpKSx0aGlzLnNldFBhcmFtcygpKSx0aGlzLnVwZGF0ZURpc3BsYXllZFZhbHVlKCksdGhpcy5lRmxvYXRpbmdGaWx0ZXIuYXBwZW5kQ2hpbGQodGhpcy5lRmxvYXRpbmdGaWx0ZXJUZXh0LmdldEd1aSgpKX1zZXR1cFVuZGVybHlpbmdGbG9hdGluZ0ZpbHRlckVsZW1lbnQoKXt0aGlzLnNob3dpbmdVbmRlcmx5aW5nRmxvYXRpbmdGaWx0ZXI9ITEsdGhpcy51bmRlcmx5aW5nRmxvYXRpbmdGaWx0ZXI9dm9pZCAwLHMuXy5jbGVhckVsZW1lbnQodGhpcy5lRmxvYXRpbmdGaWx0ZXIpO2NvbnN0IGU9dGhpcy5wYXJlbnRGaWx0ZXJJbnN0YW5jZS5nZXRTZWxlY3RlZENvbHVtbigpO2lmKGUmJiFlLmlzVmlzaWJsZSgpKXtjb25zdCB0PXRoaXMuZmlsdGVyTWFuYWdlci5nZXRGbG9hdGluZ0ZpbHRlckNvbXBEZXRhaWxzKGUsdGhpcy5wYXJhbXMuc2hvd1BhcmVudEZpbHRlcik7aWYodClyZXR1cm4gdGhpcy5jb21wRGV0YWlscz10LHRoaXMuaGF2ZUFkZGVkQ29sdW1uTGlzdGVuZXJzfHwodGhpcy5oYXZlQWRkZWRDb2x1bW5MaXN0ZW5lcnM9ITAsdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSxzLkNvbHVtbi5FVkVOVF9WSVNJQkxFX0NIQU5HRUQsdGhpcy5vbkNvbHVtblZpc2libGVDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUscy5Db2x1bW4uRVZFTlRfQ09MX0RFRl9DSEFOR0VELHRoaXMub25Db2xEZWZDaGFuZ2VkLmJpbmQodGhpcykpKSx0Lm5ld0FnU3RhY2tJbnN0YW5jZSgpLnRoZW4oZT0+e3ZhciB0LGk7dGhpcy51bmRlcmx5aW5nRmxvYXRpbmdGaWx0ZXI9ZSxudWxsPT09KHQ9dGhpcy51bmRlcmx5aW5nRmxvYXRpbmdGaWx0ZXIpfHx2b2lkIDA9PT10fHx0Lm9uUGFyZW50TW9kZWxDaGFuZ2VkKG51bGw9PT0oaT10aGlzLnBhcmVudEZpbHRlckluc3RhbmNlLmdldFNlbGVjdGVkRmlsdGVyKCkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmdldE1vZGVsKCkpLHRoaXMuYXBwZW5kQ2hpbGQoZS5nZXRHdWkoKSksdGhpcy5zaG93aW5nVW5kZXJseWluZ0Zsb2F0aW5nRmlsdGVyPSEwfSl9cmV0dXJuIHRoaXMuc2V0dXBSZWFkT25seUZsb2F0aW5nRmlsdGVyRWxlbWVudCgpLHMuQWdQcm9taXNlLnJlc29sdmUoKX1vbkNvbHVtblZpc2libGVDaGFuZ2VkKCl7dGhpcy5zZXR1cFVuZGVybHlpbmdGbG9hdGluZ0ZpbHRlckVsZW1lbnQoKX1vbkNvbERlZkNoYW5nZWQoZSl7dmFyIHQsaSxzO2lmKCFlLmNvbHVtbilyZXR1cm47Y29uc3Qgcj10aGlzLmZpbHRlck1hbmFnZXIuZ2V0RmxvYXRpbmdGaWx0ZXJDb21wRGV0YWlscyhlLmNvbHVtbix0aGlzLnBhcmFtcy5zaG93UGFyZW50RmlsdGVyKTtyJiYoKG51bGw9PT0odD10aGlzLnVuZGVybHlpbmdGbG9hdGluZ0ZpbHRlcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQucmVmcmVzaCk/dGhpcy51bmRlcmx5aW5nRmxvYXRpbmdGaWx0ZXIucmVmcmVzaChyLnBhcmFtcyk6bnVsbD09PShzPW51bGw9PT0oaT10aGlzLnVuZGVybHlpbmdGbG9hdGluZ0ZpbHRlcil8fHZvaWQgMD09PWk/dm9pZCAwOmkub25QYXJhbXNVcGRhdGVkKXx8dm9pZCAwPT09c3x8cy5jYWxsKGksci5wYXJhbXMpKX1vblBhcmVudE1vZGVsQ2hhbmdlZChlLHQpe3ZhciBpLHM7dGhpcy5zaG93aW5nVW5kZXJseWluZ0Zsb2F0aW5nRmlsdGVyP251bGw9PT0oaT10aGlzLnVuZGVybHlpbmdGbG9hdGluZ0ZpbHRlcil8fHZvaWQgMD09PWl8fGkub25QYXJlbnRNb2RlbENoYW5nZWQobnVsbD09PShzPXRoaXMucGFyZW50RmlsdGVySW5zdGFuY2UuZ2V0U2VsZWN0ZWRGaWx0ZXIoKSl8fHZvaWQgMD09PXM/dm9pZCAwOnMuZ2V0TW9kZWwoKSx0KTp0aGlzLnVwZGF0ZURpc3BsYXllZFZhbHVlKCl9dXBkYXRlRGlzcGxheWVkVmFsdWUoKXtpZighdGhpcy5wYXJlbnRGaWx0ZXJJbnN0YW5jZXx8IXRoaXMuZUZsb2F0aW5nRmlsdGVyVGV4dClyZXR1cm47Y29uc3QgZT10aGlzLnBhcmVudEZpbHRlckluc3RhbmNlLmdldFNlbGVjdGVkRmlsdGVyKCk7aWYoIWUpcmV0dXJuIHRoaXMuZUZsb2F0aW5nRmlsdGVyVGV4dC5zZXRWYWx1ZSgiIiksdm9pZCB0aGlzLmVGbG9hdGluZ0ZpbHRlclRleHQuc2V0RGlzcGxheWVkKCExKTtpZih0aGlzLmVGbG9hdGluZ0ZpbHRlclRleHQuc2V0RGlzcGxheWVkKCEwKSxlLmdldE1vZGVsQXNTdHJpbmcpe2NvbnN0IHQ9ZS5nZXRNb2RlbCgpO3RoaXMuZUZsb2F0aW5nRmlsdGVyVGV4dC5zZXRWYWx1ZShudWxsPT10PyIiOmUuZ2V0TW9kZWxBc1N0cmluZyh0KSl9ZWxzZSB0aGlzLmVGbG9hdGluZ0ZpbHRlclRleHQuc2V0VmFsdWUoIiIpfW9uU2VsZWN0ZWRDb2x1bW5DaGFuZ2VkKCl7dGhpcy5zaG93aW5nVW5kZXJseWluZ0Zsb2F0aW5nRmlsdGVyfHx0aGlzLnVwZGF0ZURpc3BsYXllZFZhbHVlKCl9b25Db2x1bW5Sb3dHcm91cENoYW5nZWQoKXt0aGlzLnNob3dpbmdVbmRlcmx5aW5nRmxvYXRpbmdGaWx0ZXJ8fHRoaXMudXBkYXRlRGlzcGxheWVkVmFsdWUoKX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpfX1XKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSxqLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksVyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZmlsdGVyTWFuYWdlciIpXSxqLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSxXKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVGbG9hdGluZ0ZpbHRlciIpXSxqLnByb3RvdHlwZSwiZUZsb2F0aW5nRmlsdGVyIix2b2lkIDApO2NvbnN0IFU9e3ZlcnNpb246IjMxLjEuMSIsbW9kdWxlTmFtZTpzLk1vZHVsZU5hbWVzLlJvd0dyb3VwaW5nTW9kdWxlLGJlYW5zOltuLFYsZCx1LGcseV0sYWdTdGFja0NvbXBvbmVudHM6W3tjb21wb25lbnROYW1lOiJBZ0dyaWRIZWFkZXJEcm9wWm9uZXMiLGNvbXBvbmVudENsYXNzOmt9XSx1c2VyQ29tcG9uZW50czpbe2NvbXBvbmVudE5hbWU6ImFnR3JvdXBDb2x1bW5GaWx0ZXIiLGNvbXBvbmVudENsYXNzOkh9LHtjb21wb25lbnROYW1lOiJhZ0dyb3VwQ29sdW1uRmxvYXRpbmdGaWx0ZXIiLGNvbXBvbmVudENsYXNzOmp9XSxkZXBlbmRhbnRNb2R1bGVzOltyLkVudGVycHJpc2VDb3JlTW9kdWxlXX07dmFyIHo9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgSyBleHRlbmRzIE17Y29uc3RydWN0b3IoZSl7c3VwZXIoZSwiYWdncmVnYXRpb24iKX1wYXNzQmVhbnNVcCgpe3N1cGVyLnNldEJlYW5zKHtncmlkT3B0aW9uc1NlcnZpY2U6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsZXZlbnRTZXJ2aWNlOnRoaXMuZXZlbnRTZXJ2aWNlLGNvbnRleHQ6dGhpcy5nZXRDb250ZXh0KCksbG9nZ2VyRmFjdG9yeTp0aGlzLmxvZ2dlckZhY3RvcnksZHJhZ0FuZERyb3BTZXJ2aWNlOnRoaXMuZHJhZ0FuZERyb3BTZXJ2aWNlfSk7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSx0PWUoInZhbHVlQ29sdW1uc0VtcHR5TWVzc2FnZSIsIkRyYWcgaGVyZSB0byBhZ2dyZWdhdGUiKSxpPWUoInZhbHVlcyIsIlZhbHVlcyIpO3N1cGVyLmluaXQoe2RyYWdBbmREcm9wSWNvbjpzLkRyYWdBbmREcm9wU2VydmljZS5JQ09OX0FHR1JFR0FURSxpY29uOnMuXy5jcmVhdGVJY29uTm9TcGFuKCJ2YWx1ZVBhbmVsIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSxlbXB0eU1lc3NhZ2U6dCx0aXRsZTppfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ09MVU1OX1ZBTFVFX0NIQU5HRUQsdGhpcy5yZWZyZXNoR3VpLmJpbmQodGhpcykpfWdldEFyaWFMYWJlbCgpe3JldHVybiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSgiYXJpYVZhbHVlc0Ryb3Bab25lUGFuZWxMYWJlbCIsIlZhbHVlcyIpfWdldFRvb2x0aXBQYXJhbXMoKXtjb25zdCBlPXN1cGVyLmdldFRvb2x0aXBQYXJhbXMoKTtyZXR1cm4gZS5sb2NhdGlvbj0idmFsdWVDb2x1bW5zTGlzdCIsZX1nZXRJY29uTmFtZSgpe3JldHVybiB0aGlzLmlzUG90ZW50aWFsRG5kQ29sdW1ucygpP3MuRHJhZ0FuZERyb3BTZXJ2aWNlLklDT05fQUdHUkVHQVRFOnMuRHJhZ0FuZERyb3BTZXJ2aWNlLklDT05fTk9UX0FMTE9XRUR9aXNDb2x1bW5Ecm9wcGFibGUoZSx0KXtyZXR1cm4hKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZnVuY3Rpb25zUmVhZE9ubHkiKXx8IWUuaXNQcmltYXJ5KCkpJiYoZS5pc0FsbG93VmFsdWUoKSYmKCFlLmlzVmFsdWVBY3RpdmUoKXx8dGhpcy5pc1NvdXJjZUV2ZW50RnJvbVRhcmdldCh0KSkpfXVwZGF0ZUNvbHVtbnMoZSl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJmdW5jdGlvbnNQYXNzaXZlIikpe2NvbnN0IHQ9e3R5cGU6cy5FdmVudHMuRVZFTlRfQ09MVU1OX1ZBTFVFX0NIQU5HRV9SRVFVRVNULGNvbHVtbnM6ZX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KX1lbHNlIHRoaXMuY29sdW1uTW9kZWwuc2V0VmFsdWVDb2x1bW5zKGUsInRvb2xQYW5lbFVpIil9Z2V0RXhpc3RpbmdDb2x1bW5zKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0VmFsdWVDb2x1bW5zKCl9fXooW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLEsucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSx6KFtPYmplY3Qocy5BdXRvd2lyZWQpKCJsb2dnZXJGYWN0b3J5IildLEsucHJvdG90eXBlLCJsb2dnZXJGYWN0b3J5Iix2b2lkIDApLHooW09iamVjdChzLkF1dG93aXJlZCkoImRyYWdBbmREcm9wU2VydmljZSIpXSxLLnByb3RvdHlwZSwiZHJhZ0FuZERyb3BTZXJ2aWNlIix2b2lkIDApLHooW3MuUG9zdENvbnN0cnVjdF0sSy5wcm90b3R5cGUsInBhc3NCZWFuc1VwIixudWxsKSxpLmQodCwiUm93R3JvdXBpbmdNb2R1bGUiLChmdW5jdGlvbigpe3JldHVybiBVfSkpLGkuZCh0LCJSb3dHcm91cERyb3Bab25lUGFuZWwiLChmdW5jdGlvbigpe3JldHVybiBGfSkpLGkuZCh0LCJWYWx1ZXNEcm9wWm9uZVBhbmVsIiwoZnVuY3Rpb24oKXtyZXR1cm4gS30pKSxpLmQodCwiUGl2b3REcm9wWm9uZVBhbmVsIiwoZnVuY3Rpb24oKXtyZXR1cm4gTn0pKX0sZnVuY3Rpb24oZSx0LGkpeyJ1c2Ugc3RyaWN0IjtpLnIodCk7dmFyIHM9aSgwKTtjbGFzcyBye2NvbnN0cnVjdG9yKGUsdCxpLHMsbyxuKXt0aGlzLm5leHRJZD0wLHRoaXMucm93Q291bnRSZWFkeT0hMSx0aGlzLmFsbE5vZGVzTWFwPXt9LHRoaXMucm9vdE5vZGU9ZSx0aGlzLmdyaWRPcHRpb25zU2VydmljZT10LHRoaXMuZXZlbnRTZXJ2aWNlPWksdGhpcy5jb2x1bW5Nb2RlbD1zLHRoaXMuYmVhbnM9bix0aGlzLnNlbGVjdGlvblNlcnZpY2U9byx0aGlzLnJvb3ROb2RlLmdyb3VwPSEwLHRoaXMucm9vdE5vZGUubGV2ZWw9LTEsdGhpcy5yb290Tm9kZS5pZD1yLlJPT1RfTk9ERV9JRCx0aGlzLnJvb3ROb2RlLmFsbExlYWZDaGlsZHJlbj1bXSx0aGlzLnJvb3ROb2RlLmNoaWxkcmVuQWZ0ZXJHcm91cD1bXSx0aGlzLnJvb3ROb2RlLmNoaWxkcmVuQWZ0ZXJTb3J0PVtdLHRoaXMucm9vdE5vZGUuY2hpbGRyZW5BZnRlckFnZ0ZpbHRlcj1bXSx0aGlzLnJvb3ROb2RlLmNoaWxkcmVuQWZ0ZXJGaWx0ZXI9W119Z2V0Q29weU9mTm9kZXNNYXAoKXtyZXR1cm4gcy5fLmNsb25lT2JqZWN0KHRoaXMuYWxsTm9kZXNNYXApfWdldFJvd05vZGUoZSl7cmV0dXJuIHRoaXMuYWxsTm9kZXNNYXBbZV19c2V0Um93RGF0YShlKXtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKCJBRyBHcmlkOiByb3dEYXRhIG11c3QgYmUgYW4gYXJyYXksIGhvd2V2ZXIgeW91IHBhc3NlZCBpbiBhIHN0cmluZy4gSWYgeW91IGFyZSBsb2FkaW5nIEpTT04sIG1ha2Ugc3VyZSB5b3UgY29udmVydCB0aGUgSlNPTiBzdHJpbmcgdG8gSmF2YVNjcmlwdCBvYmplY3RzIGZpcnN0Iik7dGhpcy5yb3dDb3VudFJlYWR5PSEwLHRoaXMuZGlzcGF0Y2hSb3dEYXRhVXBkYXRlU3RhcnRlZEV2ZW50KGUpO2NvbnN0IHQ9dGhpcy5yb290Tm9kZSxpPXRoaXMucm9vdE5vZGUuc2libGluZzt0LmNoaWxkcmVuQWZ0ZXJGaWx0ZXI9bnVsbCx0LmNoaWxkcmVuQWZ0ZXJHcm91cD1udWxsLHQuY2hpbGRyZW5BZnRlckFnZ0ZpbHRlcj1udWxsLHQuY2hpbGRyZW5BZnRlclNvcnQ9bnVsbCx0LmNoaWxkcmVuTWFwcGVkPW51bGwsdC51cGRhdGVIYXNDaGlsZHJlbigpLHRoaXMubmV4dElkPTAsdGhpcy5hbGxOb2Rlc01hcD17fSxlP3QuYWxsTGVhZkNoaWxkcmVuPWUubWFwKGU9PnRoaXMuY3JlYXRlTm9kZShlLHRoaXMucm9vdE5vZGUsci5UT1BfTEVWRUwpKToodC5hbGxMZWFmQ2hpbGRyZW49W10sdC5jaGlsZHJlbkFmdGVyR3JvdXA9W10pLGkmJihpLmNoaWxkcmVuQWZ0ZXJGaWx0ZXI9dC5jaGlsZHJlbkFmdGVyRmlsdGVyLGkuY2hpbGRyZW5BZnRlckdyb3VwPXQuY2hpbGRyZW5BZnRlckdyb3VwLGkuY2hpbGRyZW5BZnRlckFnZ0ZpbHRlcj10LmNoaWxkcmVuQWZ0ZXJBZ2dGaWx0ZXIsaS5jaGlsZHJlbkFmdGVyU29ydD10LmNoaWxkcmVuQWZ0ZXJTb3J0LGkuY2hpbGRyZW5NYXBwZWQ9dC5jaGlsZHJlbk1hcHBlZCxpLmFsbExlYWZDaGlsZHJlbj10LmFsbExlYWZDaGlsZHJlbil9dXBkYXRlUm93RGF0YShlLHQpe3RoaXMucm93Q291bnRSZWFkeT0hMCx0aGlzLmRpc3BhdGNoUm93RGF0YVVwZGF0ZVN0YXJ0ZWRFdmVudChlLmFkZCk7Y29uc3QgaT17cmVtb3ZlOltdLHVwZGF0ZTpbXSxhZGQ6W119LHI9W107cmV0dXJuIHRoaXMuZXhlY3V0ZVJlbW92ZShlLGksciksdGhpcy5leGVjdXRlVXBkYXRlKGUsaSxyKSx0aGlzLmV4ZWN1dGVBZGQoZSxpKSx0aGlzLnVwZGF0ZVNlbGVjdGlvbihyLCJyb3dEYXRhQ2hhbmdlZCIpLHQmJnMuXy5zb3J0Um93Tm9kZXNCeU9yZGVyKHRoaXMucm9vdE5vZGUuYWxsTGVhZkNoaWxkcmVuLHQpLGl9aXNSb3dDb3VudFJlYWR5KCl7cmV0dXJuIHRoaXMucm93Q291bnRSZWFkeX1kaXNwYXRjaFJvd0RhdGFVcGRhdGVTdGFydGVkRXZlbnQoZSl7Y29uc3QgdD17dHlwZTpzLkV2ZW50cy5FVkVOVF9ST1dfREFUQV9VUERBVEVfU1RBUlRFRCxmaXJzdFJvd0RhdGE6KG51bGw9PWU/dm9pZCAwOmUubGVuZ3RoKT9lWzBdOm51bGx9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9dXBkYXRlU2VsZWN0aW9uKGUsdCl7Y29uc3QgaT1lLmxlbmd0aD4wO2lmKGkmJnRoaXMuc2VsZWN0aW9uU2VydmljZS5zZXROb2Rlc1NlbGVjdGVkKHtuZXdWYWx1ZTohMSxub2RlczplLHN1cHByZXNzRmluaXNoQWN0aW9uczohMCxzb3VyY2U6dH0pLHRoaXMuc2VsZWN0aW9uU2VydmljZS51cGRhdGVHcm91cHNGcm9tQ2hpbGRyZW5TZWxlY3Rpb25zKHQpLGkpe2NvbnN0IGU9e3R5cGU6cy5FdmVudHMuRVZFTlRfU0VMRUNUSU9OX0NIQU5HRUQsc291cmNlOnR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9fWV4ZWN1dGVBZGQoZSx0KXt2YXIgaTtjb25zdHthZGQ6byxhZGRJbmRleDpufT1lO2lmKHMuXy5taXNzaW5nT3JFbXB0eShvKSlyZXR1cm47Y29uc3QgYT1vLm1hcChlPT50aGlzLmNyZWF0ZU5vZGUoZSx0aGlzLnJvb3ROb2RlLHIuVE9QX0xFVkVMKSk7aWYoIm51bWJlciI9PXR5cGVvZiBuJiZuPj0wKXtjb25zdHthbGxMZWFmQ2hpbGRyZW46ZX09dGhpcy5yb290Tm9kZSx0PWUubGVuZ3RoO2xldCBzPW47aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpJiZuPjAmJnQ+MClmb3IobGV0IHI9MDtyPHQ7cisrKWlmKChudWxsPT09KGk9ZVtyXSl8fHZvaWQgMD09PWk/dm9pZCAwOmkucm93SW5kZXgpPT1uLTEpe3M9cisxO2JyZWFrfWNvbnN0IHI9ZS5zbGljZSgwLHMpLG89ZS5zbGljZShzLGUubGVuZ3RoKTt0aGlzLnJvb3ROb2RlLmFsbExlYWZDaGlsZHJlbj1bLi4uciwuLi5hLC4uLm9dfWVsc2UgdGhpcy5yb290Tm9kZS5hbGxMZWFmQ2hpbGRyZW49Wy4uLnRoaXMucm9vdE5vZGUuYWxsTGVhZkNoaWxkcmVuLC4uLmFdO3RoaXMucm9vdE5vZGUuc2libGluZyYmKHRoaXMucm9vdE5vZGUuc2libGluZy5hbGxMZWFmQ2hpbGRyZW49dGhpcy5yb290Tm9kZS5hbGxMZWFmQ2hpbGRyZW4pLHQuYWRkPWF9ZXhlY3V0ZVJlbW92ZShlLHQsaSl7Y29uc3R7cmVtb3ZlOnJ9PWU7aWYocy5fLm1pc3NpbmdPckVtcHR5KHIpKXJldHVybjtjb25zdCBvPXt9O3IuZm9yRWFjaChlPT57Y29uc3Qgcz10aGlzLmxvb2t1cFJvd05vZGUoZSk7cyYmKHMuaXNTZWxlY3RlZCgpJiZpLnB1c2gocykscy5jbGVhclJvd1RvcEFuZFJvd0luZGV4KCksb1tzLmlkXT0hMCxkZWxldGUgdGhpcy5hbGxOb2Rlc01hcFtzLmlkXSx0LnJlbW92ZS5wdXNoKHMpKX0pLHRoaXMucm9vdE5vZGUuYWxsTGVhZkNoaWxkcmVuPXRoaXMucm9vdE5vZGUuYWxsTGVhZkNoaWxkcmVuLmZpbHRlcihlPT4hb1tlLmlkXSksdGhpcy5yb290Tm9kZS5zaWJsaW5nJiYodGhpcy5yb290Tm9kZS5zaWJsaW5nLmFsbExlYWZDaGlsZHJlbj10aGlzLnJvb3ROb2RlLmFsbExlYWZDaGlsZHJlbil9ZXhlY3V0ZVVwZGF0ZShlLHQsaSl7Y29uc3R7dXBkYXRlOm99PWU7cy5fLm1pc3NpbmdPckVtcHR5KG8pfHxvLmZvckVhY2goZT0+e2NvbnN0IHM9dGhpcy5sb29rdXBSb3dOb2RlKGUpO3MmJihzLnVwZGF0ZURhdGEoZSksIXMuc2VsZWN0YWJsZSYmcy5pc1NlbGVjdGVkKCkmJmkucHVzaChzKSx0aGlzLnNldE1hc3RlckZvclJvdyhzLGUsci5UT1BfTEVWRUwsITEpLHQudXBkYXRlLnB1c2gocykpfSl9bG9va3VwUm93Tm9kZShlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJnZXRSb3dJZCIpO2xldCBpO2lmKHQpe2NvbnN0IHM9dCh7ZGF0YTplLGxldmVsOjB9KTtpZihpPXRoaXMuYWxsTm9kZXNNYXBbc10sIWkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoYEFHIEdyaWQ6IGNvdWxkIG5vdCBmaW5kIHJvdyBpZD0ke3N9LCBkYXRhIGl0ZW0gd2FzIG5vdCBmb3VuZCBmb3IgdGhpcyBpZGApLG51bGx9ZWxzZSBpZihpPXRoaXMucm9vdE5vZGUuYWxsTGVhZkNoaWxkcmVuLmZpbmQodD0+dC5kYXRhPT09ZSksIWkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoIkFHIEdyaWQ6IGNvdWxkIG5vdCBmaW5kIGRhdGEgaXRlbSBhcyBvYmplY3Qgd2FzIG5vdCBmb3VuZCIsZSksY29uc29sZS5lcnJvcigiQ29uc2lkZXIgdXNpbmcgZ2V0Um93SWQgdG8gaGVscCB0aGUgR3JpZCBmaW5kIG1hdGNoaW5nIHJvdyBkYXRhIiksbnVsbDtyZXR1cm4gaXx8bnVsbH1jcmVhdGVOb2RlKGUsdCxpKXtjb25zdCByPW5ldyBzLlJvd05vZGUodGhpcy5iZWFucyk7ci5ncm91cD0hMSx0aGlzLnNldE1hc3RlckZvclJvdyhyLGUsaSwhMCk7Y29uc3Qgbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzUGFyZW50c0luUm93Tm9kZXMiKTtyZXR1cm4gdCYmIW8mJihyLnBhcmVudD10KSxyLmxldmVsPWksci5zZXREYXRhQW5kSWQoZSx0aGlzLm5leHRJZC50b1N0cmluZygpKSx0aGlzLmFsbE5vZGVzTWFwW3IuaWRdJiZjb25zb2xlLndhcm4oYEFHIEdyaWQ6IGR1cGxpY2F0ZSBub2RlIGlkICcke3IuaWR9JyBkZXRlY3RlZCBmcm9tIGdldFJvd0lkIGNhbGxiYWNrLCB0aGlzIGNvdWxkIGNhdXNlIGlzc3VlcyBpbiB5b3VyIGdyaWQuYCksdGhpcy5hbGxOb2Rlc01hcFtyLmlkXT1yLHRoaXMubmV4dElkKysscn1zZXRNYXN0ZXJGb3JSb3coZSx0LGkscyl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpKWUuc2V0TWFzdGVyKCExKSxzJiYoZS5leHBhbmRlZD0hMSk7ZWxzZXtpZih0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoIm1hc3RlckRldGFpbCIpKXtjb25zdCBpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiaXNSb3dNYXN0ZXIiKTtpP2Uuc2V0TWFzdGVyKGkodCkpOmUuc2V0TWFzdGVyKCEwKX1lbHNlIGUuc2V0TWFzdGVyKCExKTtpZihzKXtjb25zdCB0PXRoaXMuY29sdW1uTW9kZWwuZ2V0Um93R3JvdXBDb2x1bW5zKCkscz1pKyh0P3QubGVuZ3RoOjApO2UuZXhwYW5kZWQ9ISFlLm1hc3RlciYmdGhpcy5pc0V4cGFuZGVkKHMpfX19aXNFeHBhbmRlZChlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBEZWZhdWx0RXhwYW5kZWQiKTtyZXR1cm4tMT09PXR8fGU8dH19ci5UT1BfTEVWRUw9MCxyLlJPT1RfTk9ERV9JRD0iUk9PVF9OT0RFX0lEIjt2YXIgbyxuPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59OyFmdW5jdGlvbihlKXtlW2UuTm9ybWFsPTBdPSJOb3JtYWwiLGVbZS5BZnRlckZpbHRlcj0xXT0iQWZ0ZXJGaWx0ZXIiLGVbZS5BZnRlckZpbHRlckFuZFNvcnQ9Ml09IkFmdGVyRmlsdGVyQW5kU29ydCIsZVtlLlBpdm90Tm9kZXM9M109IlBpdm90Tm9kZXMifShvfHwobz17fSkpO2xldCBhPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1Yntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5vblJvd0hlaWdodENoYW5nZWRfZGVib3VuY2VkPXMuXy5kZWJvdW5jZSh0aGlzLm9uUm93SGVpZ2h0Q2hhbmdlZC5iaW5kKHRoaXMpLDEwMCksdGhpcy5yb3dzVG9EaXNwbGF5PVtdLHRoaXMuaGFzU3RhcnRlZD0hMSx0aGlzLnNob3VsZFNraXBTZXR0aW5nRGF0YU9uU3RhcnQ9ITEsdGhpcy5pc1JlZnJlc2hpbmdNb2RlbD0hMSx0aGlzLnJvd0NvdW50UmVhZHk9ITF9aW5pdCgpe2NvbnN0IGU9dGhpcy5yZWZyZXNoTW9kZWwuYmluZCh0aGlzLHtzdGVwOnMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuRVZFUllUSElOR30pLHQ9IXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NBbmltYXRpb25GcmFtZSIpLGk9dGhpcy5yZWZyZXNoTW9kZWwuYmluZCh0aGlzLHtzdGVwOnMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuRVZFUllUSElORyxhZnRlckNvbHVtbnNDaGFuZ2VkOiEwLGtlZXBSZW5kZXJlZFJvd3M6ITAsYW5pbWF0ZTp0fSk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELGkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRCxlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9DT0xVTU5fVkFMVUVfQ0hBTkdFRCx0aGlzLm9uVmFsdWVDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9QSVZPVF9DSEFOR0VELHRoaXMucmVmcmVzaE1vZGVsLmJpbmQodGhpcyx7c3RlcDpzLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLlBJVk9UfSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0ZJTFRFUl9DSEFOR0VELHRoaXMub25GaWx0ZXJDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX1NPUlRfQ0hBTkdFRCx0aGlzLm9uU29ydENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ09MVU1OX1BJVk9UX01PREVfQ0hBTkdFRCxlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9HUklEX1NUWUxFU19DSEFOR0VELHRoaXMub25HcmlkU3R5bGVzQ2hhbmdlcy5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9HUklEX1JFQURZLCgpPT50aGlzLm9uR3JpZFJlYWR5KCkpLHRoaXMuYWRkUHJvcGVydHlMaXN0ZW5lcnMoKSx0aGlzLnJvb3ROb2RlPW5ldyBzLlJvd05vZGUodGhpcy5iZWFucyksdGhpcy5ub2RlTWFuYWdlcj1uZXcgcih0aGlzLnJvb3ROb2RlLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLHRoaXMuZXZlbnRTZXJ2aWNlLHRoaXMuY29sdW1uTW9kZWwsdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLHRoaXMuYmVhbnMpfWFkZFByb3BlcnR5TGlzdGVuZXJzKCl7Y29uc3QgZT1uZXcgU2V0KFsidHJlZURhdGEiLCJtYXN0ZXJEZXRhaWwiXSksdD1uZXcgU2V0KFsic3VwcHJlc3NQYXJlbnRzSW5Sb3dOb2RlcyIsImdyb3VwRGVmYXVsdEV4cGFuZGVkIiwiZ3JvdXBBbGxvd1VuYmFsYW5jZWQiLCJpbml0aWFsR3JvdXBPcmRlckNvbXBhcmF0b3IiLCJncm91cEhpZGVPcGVuUGFyZW50cyIsImdyb3VwRGlzcGxheVR5cGUiXSksaT1uZXcgU2V0KFsiZXhjbHVkZUNoaWxkcmVuV2hlblRyZWVEYXRhRmlsdGVyaW5nIl0pLHI9bmV3IFNldChbInJlbW92ZVBpdm90SGVhZGVyUm93V2hlblNpbmdsZVZhbHVlQ29sdW1uIiwicGl2b3RSb3dUb3RhbHMiLCJwaXZvdENvbHVtbkdyb3VwVG90YWxzIiwic3VwcHJlc3NFeHBhbmRhYmxlUGl2b3RHcm91cHMiXSksbz1uZXcgU2V0KFsiZ2V0R3JvdXBSb3dBZ2ciLCJhbHdheXNBZ2dyZWdhdGVBdFJvb3RMZXZlbCIsImdyb3VwSW5jbHVkZVRvdGFsRm9vdGVyIiwic3VwcHJlc3NBZ2dGaWx0ZXJlZE9ubHkiXSksbj1uZXcgU2V0KFsicG9zdFNvcnRSb3dzIiwiZ3JvdXBEaXNwbGF5VHlwZSIsImFjY2VudGVkU29ydCJdKSxhPW5ldyBTZXQoW10pLGw9bmV3IFNldChbImdyb3VwUmVtb3ZlU2luZ2xlQ2hpbGRyZW4iLCJncm91cFJlbW92ZUxvd2VzdFNpbmdsZUNoaWxkcmVuIiwiZ3JvdXBJbmNsdWRlRm9vdGVyIl0pLGQ9Wy4uLmUsLi4udCwuLi5pLC4uLnIsLi4uciwuLi5vLC4uLm4sLi4uYSwuLi5sXTt0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhkLGQ9Pnt2YXIgYztjb25zdCBoPW51bGw9PT0oYz1kLmNoYW5nZVNldCl8fHZvaWQgMD09PWM/dm9pZCAwOmMucHJvcGVydGllcztpZighaClyZXR1cm47Y29uc3QgdT1lPT5oLnNvbWUodD0+ZS5oYXModCkpO3UoZSk/dGhpcy5zZXRSb3dEYXRhKHRoaXMucm9vdE5vZGUuYWxsTGVhZkNoaWxkcmVuLm1hcChlPT5lLmRhdGEpKTp1KHQpP3RoaXMucmVmcmVzaE1vZGVsKHtzdGVwOnMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuRVZFUllUSElOR30pOnUoaSk/dGhpcy5yZWZyZXNoTW9kZWwoe3N0ZXA6cy5DbGllbnRTaWRlUm93TW9kZWxTdGVwcy5GSUxURVJ9KTp1KHIpP3RoaXMucmVmcmVzaE1vZGVsKHtzdGVwOnMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuUElWT1R9KTp1KG8pP3RoaXMucmVmcmVzaE1vZGVsKHtzdGVwOnMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuQUdHUkVHQVRFfSk6dShuKT90aGlzLnJlZnJlc2hNb2RlbCh7c3RlcDpzLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLlNPUlR9KTp1KGEpP3RoaXMucmVmcmVzaE1vZGVsKHtzdGVwOnMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuRklMVEVSX0FHR1JFR0FURVN9KTp1KGwpJiZ0aGlzLnJlZnJlc2hNb2RlbCh7c3RlcDpzLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLk1BUH0pfSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigicm93SGVpZ2h0IiwoKT0+dGhpcy5yZXNldFJvd0hlaWdodHMoKSl9c3RhcnQoKXt0aGlzLmhhc1N0YXJ0ZWQ9ITAsdGhpcy5zaG91bGRTa2lwU2V0dGluZ0RhdGFPblN0YXJ0P3RoaXMuZGlzcGF0Y2hVcGRhdGVFdmVudHNBbmRSZWZyZXNoKCk6dGhpcy5zZXRJbml0aWFsRGF0YSgpfXNldEluaXRpYWxEYXRhKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd0RhdGEiKTtlJiYodGhpcy5zaG91bGRTa2lwU2V0dGluZ0RhdGFPblN0YXJ0PSEwLHRoaXMuc2V0Um93RGF0YShlKSl9ZW5zdXJlUm93SGVpZ2h0c1ZhbGlkKGUsdCxpLHMpe2xldCByLG89ITE7ZG97cj0hMTtjb25zdCBuPXRoaXMuZ2V0Um93SW5kZXhBdFBpeGVsKGUpLGE9dGhpcy5nZXRSb3dJbmRleEF0UGl4ZWwodCksbD1NYXRoLm1heChuLGkpLGQ9TWF0aC5taW4oYSxzKTtmb3IobGV0IGU9bDtlPD1kO2UrKyl7Y29uc3QgdD10aGlzLmdldFJvdyhlKTtpZih0LnJvd0hlaWdodEVzdGltYXRlZCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRSb3dIZWlnaHRGb3JOb2RlKHQpO3Quc2V0Um93SGVpZ2h0KGUuaGVpZ2h0KSxyPSEwLG89ITB9fXImJnRoaXMuc2V0Um93VG9wQW5kUm93SW5kZXgoKX13aGlsZShyKTtyZXR1cm4gb31zZXRSb3dUb3BBbmRSb3dJbmRleCgpe2NvbnN0IGU9dGhpcy5lbnZpcm9ubWVudC5nZXREZWZhdWx0Um93SGVpZ2h0KCk7bGV0IHQ9MDtjb25zdCBpPW5ldyBTZXQscz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0RvbUxheW91dCgibm9ybWFsIik7Zm9yKGxldCByPTA7cjx0aGlzLnJvd3NUb0Rpc3BsYXkubGVuZ3RoO3IrKyl7Y29uc3Qgbz10aGlzLnJvd3NUb0Rpc3BsYXlbcl07aWYobnVsbCE9by5pZCYmaS5hZGQoby5pZCksbnVsbD09by5yb3dIZWlnaHQpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0Rm9yTm9kZShvLHMsZSk7by5zZXRSb3dIZWlnaHQodC5oZWlnaHQsdC5lc3RpbWF0ZWQpfW8uc2V0Um93VG9wKHQpLG8uc2V0Um93SW5kZXgociksdCs9by5yb3dIZWlnaHR9cmV0dXJuIGl9Y2xlYXJSb3dUb3BBbmRSb3dJbmRleChlLHQpe2NvbnN0IGk9ZS5pc0FjdGl2ZSgpLHM9ZT0+e2UmJm51bGwhPWUuaWQmJiF0LmhhcyhlLmlkKSYmZS5jbGVhclJvd1RvcEFuZFJvd0luZGV4KCl9LHI9ZT0+e2lmKHMoZSkscyhlLmRldGFpbE5vZGUpLHMoZS5zaWJsaW5nKSxlLmhhc0NoaWxkcmVuKCkmJmUuY2hpbGRyZW5BZnRlckdyb3VwKXtjb25zdCB0PS0xPT1lLmxldmVsO2kmJiF0JiYhZS5leHBhbmRlZHx8ZS5jaGlsZHJlbkFmdGVyR3JvdXAuZm9yRWFjaChyKX19O3IodGhpcy5yb290Tm9kZSl9ZW5zdXJlUm93c0F0UGl4ZWwoZSx0LGk9MCl7Y29uc3Qgcj10aGlzLmdldFJvd0luZGV4QXRQaXhlbCh0KSxvPXRoaXMuZ2V0Um93KHIpLG49IXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NBbmltYXRpb25GcmFtZSIpO3JldHVybiBvIT09ZVswXSYmKGUuZm9yRWFjaChlPT57cy5fLnJlbW92ZUZyb21BcnJheSh0aGlzLnJvb3ROb2RlLmFsbExlYWZDaGlsZHJlbixlKX0pLGUuZm9yRWFjaCgoZSx0KT0+e3MuXy5pbnNlcnRJbnRvQXJyYXkodGhpcy5yb290Tm9kZS5hbGxMZWFmQ2hpbGRyZW4sZSxNYXRoLm1heChyK2ksMCkrdCl9KSx0aGlzLnJlZnJlc2hNb2RlbCh7c3RlcDpzLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLkVWRVJZVEhJTkcsa2VlcFJlbmRlcmVkUm93czohMCxrZWVwRWRpdGluZ1Jvd3M6ITAsYW5pbWF0ZTpufSksITApfWhpZ2hsaWdodFJvd0F0UGl4ZWwoZSx0KXtjb25zdCBpPW51bGwhPXQ/dGhpcy5nZXRSb3dJbmRleEF0UGl4ZWwodCk6bnVsbCxzPW51bGwhPWk/dGhpcy5nZXRSb3coaSk6bnVsbDtpZighc3x8IWV8fHM9PT1lfHxudWxsPT10KXJldHVybiB2b2lkKHRoaXMubGFzdEhpZ2hsaWdodGVkUm93JiYodGhpcy5sYXN0SGlnaGxpZ2h0ZWRSb3cuc2V0SGlnaGxpZ2h0ZWQobnVsbCksdGhpcy5sYXN0SGlnaGxpZ2h0ZWRSb3c9bnVsbCkpO2NvbnN0IHI9dGhpcy5nZXRIaWdobGlnaHRQb3NpdGlvbih0LHMpO3RoaXMubGFzdEhpZ2hsaWdodGVkUm93JiZ0aGlzLmxhc3RIaWdobGlnaHRlZFJvdyE9PXMmJih0aGlzLmxhc3RIaWdobGlnaHRlZFJvdy5zZXRIaWdobGlnaHRlZChudWxsKSx0aGlzLmxhc3RIaWdobGlnaHRlZFJvdz1udWxsKSxzLnNldEhpZ2hsaWdodGVkKHIpLHRoaXMubGFzdEhpZ2hsaWdodGVkUm93PXN9Z2V0SGlnaGxpZ2h0UG9zaXRpb24oZSx0KXtpZighdCl7Y29uc3QgaT10aGlzLmdldFJvd0luZGV4QXRQaXhlbChlKTtpZighKHQ9dGhpcy5nZXRSb3coaXx8MCkpKXJldHVybiBzLlJvd0hpZ2hsaWdodFBvc2l0aW9uLkJlbG93fWNvbnN0e3Jvd1RvcDppLHJvd0hlaWdodDpyfT10O3JldHVybiBlLWk8ci8yP3MuUm93SGlnaGxpZ2h0UG9zaXRpb24uQWJvdmU6cy5Sb3dIaWdobGlnaHRQb3NpdGlvbi5CZWxvd31nZXRMYXN0SGlnaGxpZ2h0ZWRSb3dOb2RlKCl7cmV0dXJuIHRoaXMubGFzdEhpZ2hsaWdodGVkUm93fWlzTGFzdFJvd0luZGV4S25vd24oKXtyZXR1cm4hMH1nZXRSb3dDb3VudCgpe3JldHVybiB0aGlzLnJvd3NUb0Rpc3BsYXk/dGhpcy5yb3dzVG9EaXNwbGF5Lmxlbmd0aDowfWdldFRvcExldmVsUm93Q291bnQoKXtpZih0aGlzLnJvd3NUb0Rpc3BsYXkmJnRoaXMucm93c1RvRGlzcGxheVswXT09PXRoaXMucm9vdE5vZGUpcmV0dXJuIDE7Y29uc3QgZT10aGlzLnJvb3ROb2RlLmNoaWxkcmVuQWZ0ZXJBZ2dGaWx0ZXI7cmV0dXJuIGU/ZS5sZW5ndGg6MH1nZXRUb3BMZXZlbFJvd0Rpc3BsYXllZEluZGV4KGUpe2lmKHRoaXMucm93c1RvRGlzcGxheSYmdGhpcy5yb3dzVG9EaXNwbGF5WzBdPT09dGhpcy5yb290Tm9kZSlyZXR1cm4gZTtsZXQgdD10aGlzLnJvb3ROb2RlLmNoaWxkcmVuQWZ0ZXJTb3J0W2VdO2lmKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBIaWRlT3BlblBhcmVudHMiKSlmb3IoO3QuZXhwYW5kZWQmJnQuY2hpbGRyZW5BZnRlclNvcnQmJnQuY2hpbGRyZW5BZnRlclNvcnQubGVuZ3RoPjA7KXQ9dC5jaGlsZHJlbkFmdGVyU29ydFswXTtyZXR1cm4gdC5yb3dJbmRleH1nZXRSb3dCb3VuZHMoZSl7aWYocy5fLm1pc3NpbmcodGhpcy5yb3dzVG9EaXNwbGF5KSlyZXR1cm4gbnVsbDtjb25zdCB0PXRoaXMucm93c1RvRGlzcGxheVtlXTtyZXR1cm4gdD97cm93VG9wOnQucm93VG9wLHJvd0hlaWdodDp0LnJvd0hlaWdodH06bnVsbH1vblJvd0dyb3VwT3BlbmVkKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0FuaW1hdGVSb3dzKCk7dGhpcy5yZWZyZXNoTW9kZWwoe3N0ZXA6cy5DbGllbnRTaWRlUm93TW9kZWxTdGVwcy5NQVAsa2VlcFJlbmRlcmVkUm93czohMCxhbmltYXRlOmV9KX1vbkZpbHRlckNoYW5nZWQoZSl7aWYoZS5hZnRlckRhdGFDaGFuZ2UpcmV0dXJuO2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNBbmltYXRlUm93cygpLGk9MD09PWUuY29sdW1ucy5sZW5ndGh8fGUuY29sdW1ucy5zb21lKGU9PmUuaXNQcmltYXJ5KCkpP3MuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuRklMVEVSOnMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuRklMVEVSX0FHR1JFR0FURVM7dGhpcy5yZWZyZXNoTW9kZWwoe3N0ZXA6aSxrZWVwUmVuZGVyZWRSb3dzOiEwLGFuaW1hdGU6dH0pfW9uU29ydENoYW5nZWQoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzQW5pbWF0ZVJvd3MoKTt0aGlzLnJlZnJlc2hNb2RlbCh7c3RlcDpzLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLlNPUlQsa2VlcFJlbmRlcmVkUm93czohMCxhbmltYXRlOmUsa2VlcEVkaXRpbmdSb3dzOiEwfSl9Z2V0VHlwZSgpe3JldHVybiJjbGllbnRTaWRlIn1vblZhbHVlQ2hhbmdlZCgpe3RoaXMuY29sdW1uTW9kZWwuaXNQaXZvdEFjdGl2ZSgpP3RoaXMucmVmcmVzaE1vZGVsKHtzdGVwOnMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuUElWT1R9KTp0aGlzLnJlZnJlc2hNb2RlbCh7c3RlcDpzLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLkFHR1JFR0FURX0pfWNyZWF0ZUNoYW5nZVBhdGgoZSl7Y29uc3QgdD1zLl8ubWlzc2luZ09yRW1wdHkoZSksaT1uZXcgcy5DaGFuZ2VkUGF0aCghMSx0aGlzLnJvb3ROb2RlKTtyZXR1cm4odHx8dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpKSYmaS5zZXRJbmFjdGl2ZSgpLGl9aXNTdXBwcmVzc01vZGVsVXBkYXRlQWZ0ZXJVcGRhdGVUcmFuc2FjdGlvbihlKXtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc01vZGVsVXBkYXRlQWZ0ZXJVcGRhdGVUcmFuc2FjdGlvbiIpKXJldHVybiExO2lmKG51bGw9PWUucm93Tm9kZVRyYW5zYWN0aW9ucylyZXR1cm4hMTtjb25zdCB0PWUucm93Tm9kZVRyYW5zYWN0aW9ucy5maWx0ZXIoZT0+bnVsbCE9ZS5hZGQmJmUuYWRkLmxlbmd0aD4wfHxudWxsIT1lLnJlbW92ZSYmZS5yZW1vdmUubGVuZ3RoPjApO3JldHVybiBudWxsPT10fHwwPT10Lmxlbmd0aH1idWlsZFJlZnJlc2hNb2RlbFBhcmFtcyhlKXtsZXQgdD1zLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLkVWRVJZVEhJTkc7Y29uc3QgaT17ZXZlcnl0aGluZzpzLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLkVWRVJZVEhJTkcsZ3JvdXA6cy5DbGllbnRTaWRlUm93TW9kZWxTdGVwcy5FVkVSWVRISU5HLGZpbHRlcjpzLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLkZJTFRFUixtYXA6cy5DbGllbnRTaWRlUm93TW9kZWxTdGVwcy5NQVAsYWdncmVnYXRlOnMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuQUdHUkVHQVRFLHNvcnQ6cy5DbGllbnRTaWRlUm93TW9kZWxTdGVwcy5TT1JULHBpdm90OnMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuUElWT1R9O2lmKHMuXy5leGlzdHMoZSkmJih0PWlbZV0pLHMuXy5taXNzaW5nKHQpKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoYEFHIEdyaWQ6IGludmFsaWQgc3RlcCAke2V9LCBhdmFpbGFibGUgc3RlcHMgYXJlICR7T2JqZWN0LmtleXMoaSkuam9pbigiLCAiKX1gKTtyZXR1cm57c3RlcDp0LGtlZXBSZW5kZXJlZFJvd3M6ITAsa2VlcEVkaXRpbmdSb3dzOiEwLGFuaW1hdGU6IXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NBbmltYXRpb25GcmFtZSIpfX1yZWZyZXNoTW9kZWwoZSl7aWYoIXRoaXMuaGFzU3RhcnRlZHx8dGhpcy5pc1JlZnJlc2hpbmdNb2RlbHx8dGhpcy5jb2x1bW5Nb2RlbC5zaG91bGRSb3dNb2RlbElnbm9yZVJlZnJlc2goKSlyZXR1cm47bGV0IHQ9Im9iamVjdCI9PXR5cGVvZiBlJiYic3RlcCJpbiBlP2U6dGhpcy5idWlsZFJlZnJlc2hNb2RlbFBhcmFtcyhlKTtpZighdClyZXR1cm47aWYodGhpcy5pc1N1cHByZXNzTW9kZWxVcGRhdGVBZnRlclVwZGF0ZVRyYW5zYWN0aW9uKHQpKXJldHVybjtjb25zdCBpPXRoaXMuY3JlYXRlQ2hhbmdlUGF0aCh0LnJvd05vZGVUcmFuc2FjdGlvbnMpO3N3aXRjaCh0aGlzLmlzUmVmcmVzaGluZ01vZGVsPSEwLHQuc3RlcCl7Y2FzZSBzLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLkVWRVJZVEhJTkc6dGhpcy5kb1Jvd0dyb3VwaW5nKHQucm93Tm9kZVRyYW5zYWN0aW9ucyx0LnJvd05vZGVPcmRlcixpLCEhdC5hZnRlckNvbHVtbnNDaGFuZ2VkKTtjYXNlIHMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuRklMVEVSOnRoaXMuZG9GaWx0ZXIoaSk7Y2FzZSBzLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLlBJVk9UOnRoaXMuZG9QaXZvdChpKTtjYXNlIHMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuQUdHUkVHQVRFOnRoaXMuZG9BZ2dyZWdhdGUoaSk7Y2FzZSBzLkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzLkZJTFRFUl9BR0dSRUdBVEVTOnRoaXMuZG9GaWx0ZXJBZ2dyZWdhdGVzKGkpO2Nhc2Ugcy5DbGllbnRTaWRlUm93TW9kZWxTdGVwcy5TT1JUOnRoaXMuZG9Tb3J0KHQucm93Tm9kZVRyYW5zYWN0aW9ucyxpKTtjYXNlIHMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuTUFQOnRoaXMuZG9Sb3dzVG9EaXNwbGF5KCl9Y29uc3Qgcj10aGlzLnNldFJvd1RvcEFuZFJvd0luZGV4KCk7dGhpcy5jbGVhclJvd1RvcEFuZFJvd0luZGV4KGksciksdGhpcy5pc1JlZnJlc2hpbmdNb2RlbD0hMTtjb25zdCBvPXt0eXBlOnMuRXZlbnRzLkVWRU5UX01PREVMX1VQREFURUQsYW5pbWF0ZTp0LmFuaW1hdGUsa2VlcFJlbmRlcmVkUm93czp0LmtlZXBSZW5kZXJlZFJvd3MsbmV3RGF0YTp0Lm5ld0RhdGEsbmV3UGFnZTohMSxrZWVwVW5kb1JlZG9TdGFjazp0LmtlZXBVbmRvUmVkb1N0YWNrfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KG8pfWlzRW1wdHkoKXtjb25zdCBlPXMuXy5taXNzaW5nKHRoaXMucm9vdE5vZGUuYWxsTGVhZkNoaWxkcmVuKXx8MD09PXRoaXMucm9vdE5vZGUuYWxsTGVhZkNoaWxkcmVuLmxlbmd0aDtyZXR1cm4gcy5fLm1pc3NpbmcodGhpcy5yb290Tm9kZSl8fGV8fCF0aGlzLmNvbHVtbk1vZGVsLmlzUmVhZHkoKX1pc1Jvd3NUb1JlbmRlcigpe3JldHVybiBzLl8uZXhpc3RzKHRoaXMucm93c1RvRGlzcGxheSkmJnRoaXMucm93c1RvRGlzcGxheS5sZW5ndGg+MH1nZXROb2Rlc0luUmFuZ2VGb3JTZWxlY3Rpb24oZSx0KXtsZXQgaT0hdCxzPSExO2NvbnN0IHI9W10sbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwU2VsZWN0c0NoaWxkcmVuIik7cmV0dXJuIHRoaXMuZm9yRWFjaE5vZGVBZnRlckZpbHRlckFuZFNvcnQobj0+e2lmKHMpcmV0dXJuO2lmKGkmJihuPT09dHx8bj09PWUpJiYocz0hMCxuLmdyb3VwJiZvKSlyZXR1cm4gdm9pZCByLnB1c2goLi4ubi5hbGxMZWFmQ2hpbGRyZW4pO2lmKCFpKXtpZihuIT09dCYmbiE9PWUpcmV0dXJuO2k9ITB9KCFuLmdyb3VwfHwhbykmJnIucHVzaChuKX0pLHJ9c2V0RGF0YXNvdXJjZShlKXtjb25zb2xlLmVycm9yKCJBRyBHcmlkOiBzaG91bGQgbmV2ZXIgY2FsbCBzZXREYXRhc291cmNlIG9uIGNsaWVudFNpZGVSb3dDb250cm9sbGVyIil9Z2V0VG9wTGV2ZWxOb2Rlcygpe3JldHVybiB0aGlzLnJvb3ROb2RlP3RoaXMucm9vdE5vZGUuY2hpbGRyZW5BZnRlckdyb3VwOm51bGx9Z2V0Um9vdE5vZGUoKXtyZXR1cm4gdGhpcy5yb290Tm9kZX1nZXRSb3coZSl7cmV0dXJuIHRoaXMucm93c1RvRGlzcGxheVtlXX1pc1Jvd1ByZXNlbnQoZSl7cmV0dXJuIHRoaXMucm93c1RvRGlzcGxheS5pbmRleE9mKGUpPj0wfWdldFJvd0luZGV4QXRQaXhlbChlKXtpZih0aGlzLmlzRW1wdHkoKXx8MD09PXRoaXMucm93c1RvRGlzcGxheS5sZW5ndGgpcmV0dXJuLTE7bGV0IHQ9MCxpPXRoaXMucm93c1RvRGlzcGxheS5sZW5ndGgtMTtpZihlPD0wKXJldHVybiAwO2lmKHMuXy5sYXN0KHRoaXMucm93c1RvRGlzcGxheSkucm93VG9wPD1lKXJldHVybiB0aGlzLnJvd3NUb0Rpc3BsYXkubGVuZ3RoLTE7bGV0IHI9LTEsbz0tMTtmb3IoOzspe2NvbnN0IHM9TWF0aC5mbG9vcigodCtpKS8yKSxuPXRoaXMucm93c1RvRGlzcGxheVtzXTtpZih0aGlzLmlzUm93SW5QaXhlbChuLGUpKXJldHVybiBzO24ucm93VG9wPGU/dD1zKzE6bi5yb3dUb3A+ZSYmKGk9cy0xKTtpZihyPT09dCYmbz09PWkpcmV0dXJuIHM7cj10LG89aX19aXNSb3dJblBpeGVsKGUsdCl7Y29uc3QgaT1lLnJvd1RvcCxzPWUucm93VG9wK2Uucm93SGVpZ2h0O3JldHVybiBpPD10JiZzPnR9Zm9yRWFjaExlYWZOb2RlKGUpe3RoaXMucm9vdE5vZGUuYWxsTGVhZkNoaWxkcmVuJiZ0aGlzLnJvb3ROb2RlLmFsbExlYWZDaGlsZHJlbi5mb3JFYWNoKCh0LGkpPT5lKHQsaSkpfWZvckVhY2hOb2RlKGUsdD0hMSl7dGhpcy5yZWN1cnNpdmVseVdhbGtOb2Rlc0FuZENhbGxiYWNrKHtub2RlczpbLi4udGhpcy5yb290Tm9kZS5jaGlsZHJlbkFmdGVyR3JvdXB8fFtdXSxjYWxsYmFjazplLHJlY3Vyc2lvblR5cGU6by5Ob3JtYWwsaW5kZXg6MCxpbmNsdWRlRm9vdGVyTm9kZXM6dH0pfWZvckVhY2hOb2RlQWZ0ZXJGaWx0ZXIoZSx0PSExKXt0aGlzLnJlY3Vyc2l2ZWx5V2Fsa05vZGVzQW5kQ2FsbGJhY2soe25vZGVzOlsuLi50aGlzLnJvb3ROb2RlLmNoaWxkcmVuQWZ0ZXJBZ2dGaWx0ZXJ8fFtdXSxjYWxsYmFjazplLHJlY3Vyc2lvblR5cGU6by5BZnRlckZpbHRlcixpbmRleDowLGluY2x1ZGVGb290ZXJOb2Rlczp0fSl9Zm9yRWFjaE5vZGVBZnRlckZpbHRlckFuZFNvcnQoZSx0PSExKXt0aGlzLnJlY3Vyc2l2ZWx5V2Fsa05vZGVzQW5kQ2FsbGJhY2soe25vZGVzOlsuLi50aGlzLnJvb3ROb2RlLmNoaWxkcmVuQWZ0ZXJTb3J0fHxbXV0sY2FsbGJhY2s6ZSxyZWN1cnNpb25UeXBlOm8uQWZ0ZXJGaWx0ZXJBbmRTb3J0LGluZGV4OjAsaW5jbHVkZUZvb3Rlck5vZGVzOnR9KX1mb3JFYWNoUGl2b3ROb2RlKGUsdD0hMSl7dGhpcy5yZWN1cnNpdmVseVdhbGtOb2Rlc0FuZENhbGxiYWNrKHtub2RlczpbdGhpcy5yb290Tm9kZV0sY2FsbGJhY2s6ZSxyZWN1cnNpb25UeXBlOm8uUGl2b3ROb2RlcyxpbmRleDowLGluY2x1ZGVGb290ZXJOb2Rlczp0fSl9cmVjdXJzaXZlbHlXYWxrTm9kZXNBbmRDYWxsYmFjayhlKXt2YXIgdDtjb25zdHtub2RlczppLGNhbGxiYWNrOnMscmVjdXJzaW9uVHlwZTpyLGluY2x1ZGVGb290ZXJOb2RlczpufT1lO2xldHtpbmRleDphfT1lO2ZvcihsZXQgZT0wO2U8aS5sZW5ndGg7ZSsrKXtjb25zdCB0PWlbZV07aWYocyh0LGErKyksdC5oYXNDaGlsZHJlbigpJiYhdC5mb290ZXIpe2xldCBlPW51bGw7c3dpdGNoKHIpe2Nhc2Ugby5Ob3JtYWw6ZT10LmNoaWxkcmVuQWZ0ZXJHcm91cDticmVhaztjYXNlIG8uQWZ0ZXJGaWx0ZXI6ZT10LmNoaWxkcmVuQWZ0ZXJBZ2dGaWx0ZXI7YnJlYWs7Y2FzZSBvLkFmdGVyRmlsdGVyQW5kU29ydDplPXQuY2hpbGRyZW5BZnRlclNvcnQ7YnJlYWs7Y2FzZSBvLlBpdm90Tm9kZXM6ZT10LmxlYWZHcm91cD9udWxsOnQuY2hpbGRyZW5BZnRlclNvcnR9ZSYmKGE9dGhpcy5yZWN1cnNpdmVseVdhbGtOb2Rlc0FuZENhbGxiYWNrKHtub2RlczpbLi4uZV0sY2FsbGJhY2s6cyxyZWN1cnNpb25UeXBlOnIsaW5kZXg6YSxpbmNsdWRlRm9vdGVyTm9kZXM6bn0pKX19Y29uc3QgbD1udWxsPT09KHQ9aVswXSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQucGFyZW50O2lmKCFufHwhbClyZXR1cm4gYTtpZihsPT09dGhpcy5yb290Tm9kZSl7aWYoIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBJbmNsdWRlVG90YWxGb290ZXIiKSlyZXR1cm4gYX1lbHNle2lmKCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRHcm91cEluY2x1ZGVGb290ZXIoKSh7bm9kZTpsfSkpcmV0dXJuIGF9cmV0dXJuIGwuY3JlYXRlRm9vdGVyKCkscyhsLnNpYmxpbmcsYSsrKSxhfWRvQWdncmVnYXRlKGUpe3RoaXMuYWdncmVnYXRpb25TdGFnZSYmdGhpcy5hZ2dyZWdhdGlvblN0YWdlLmV4ZWN1dGUoe3Jvd05vZGU6dGhpcy5yb290Tm9kZSxjaGFuZ2VkUGF0aDplfSl9ZG9GaWx0ZXJBZ2dyZWdhdGVzKGUpe3RoaXMuZmlsdGVyQWdncmVnYXRlc1N0YWdlP3RoaXMuZmlsdGVyQWdncmVnYXRlc1N0YWdlLmV4ZWN1dGUoe3Jvd05vZGU6dGhpcy5yb290Tm9kZSxjaGFuZ2VkUGF0aDplfSk6dGhpcy5yb290Tm9kZS5jaGlsZHJlbkFmdGVyQWdnRmlsdGVyPXRoaXMucm9vdE5vZGUuY2hpbGRyZW5BZnRlckZpbHRlcn1leHBhbmRPckNvbGxhcHNlQWxsKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpLGk9dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90QWN0aXZlKCkscj1vPT57byYmby5mb3JFYWNoKG89Pntjb25zdCBuPSgpPT57by5leHBhbmRlZD1lLHIoby5jaGlsZHJlbkFmdGVyR3JvdXApfTtpZih0KXtyZXR1cm4gdm9pZChzLl8uZXhpc3RzKG8uY2hpbGRyZW5BZnRlckdyb3VwKSYmbigpKX1pZihpKXtyZXR1cm4gdm9pZCghby5sZWFmR3JvdXAmJm4oKSl9by5ncm91cCYmbigpfSl9O3RoaXMucm9vdE5vZGUmJnIodGhpcy5yb290Tm9kZS5jaGlsZHJlbkFmdGVyR3JvdXApLHRoaXMucmVmcmVzaE1vZGVsKHtzdGVwOnMuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHMuTUFQfSk7Y29uc3Qgbz1lPyJleHBhbmRBbGwiOiJjb2xsYXBzZUFsbCIsbj17dHlwZTpzLkV2ZW50cy5FVkVOVF9FWFBBTkRfQ09MTEFQU0VfQUxMLHNvdXJjZTpvfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KG4pfWRvU29ydChlLHQpe3RoaXMuc29ydFN0YWdlLmV4ZWN1dGUoe3Jvd05vZGU6dGhpcy5yb290Tm9kZSxyb3dOb2RlVHJhbnNhY3Rpb25zOmUsY2hhbmdlZFBhdGg6dH0pfWRvUm93R3JvdXBpbmcoZSx0LGkscil7aWYodGhpcy5ncm91cFN0YWdlKXtpZihlP3RoaXMuZ3JvdXBTdGFnZS5leGVjdXRlKHtyb3dOb2RlOnRoaXMucm9vdE5vZGUscm93Tm9kZVRyYW5zYWN0aW9uczplLHJvd05vZGVPcmRlcjp0LGNoYW5nZWRQYXRoOml9KTp0aGlzLmdyb3VwU3RhZ2UuZXhlY3V0ZSh7cm93Tm9kZTp0aGlzLnJvb3ROb2RlLGNoYW5nZWRQYXRoOmksYWZ0ZXJDb2x1bW5zQ2hhbmdlZDpyfSksdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cFNlbGVjdHNDaGlsZHJlbiIpKXtpZih0aGlzLnNlbGVjdGlvblNlcnZpY2UudXBkYXRlR3JvdXBzRnJvbUNoaWxkcmVuU2VsZWN0aW9ucygicm93R3JvdXBDaGFuZ2VkIixpKSl7Y29uc3QgZT17dHlwZTpzLkV2ZW50cy5FVkVOVF9TRUxFQ1RJT05fQ0hBTkdFRCxzb3VyY2U6InJvd0dyb3VwQ2hhbmdlZCJ9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9fX1lbHNlIHRoaXMucm9vdE5vZGUuY2hpbGRyZW5BZnRlckdyb3VwPXRoaXMucm9vdE5vZGUuYWxsTGVhZkNoaWxkcmVuLHRoaXMucm9vdE5vZGUuc2libGluZyYmKHRoaXMucm9vdE5vZGUuc2libGluZy5jaGlsZHJlbkFmdGVyR3JvdXA9dGhpcy5yb290Tm9kZS5jaGlsZHJlbkFmdGVyR3JvdXApLHRoaXMucm9vdE5vZGUudXBkYXRlSGFzQ2hpbGRyZW4oKTt0aGlzLm5vZGVNYW5hZ2VyLmlzUm93Q291bnRSZWFkeSgpJiYodGhpcy5yb3dDb3VudFJlYWR5PSEwLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnRPbmNlKHt0eXBlOnMuRXZlbnRzLkVWRU5UX1JPV19DT1VOVF9SRUFEWX0pKX1kb0ZpbHRlcihlKXt0aGlzLmZpbHRlclN0YWdlLmV4ZWN1dGUoe3Jvd05vZGU6dGhpcy5yb290Tm9kZSxjaGFuZ2VkUGF0aDplfSl9ZG9QaXZvdChlKXt0aGlzLnBpdm90U3RhZ2UmJnRoaXMucGl2b3RTdGFnZS5leGVjdXRlKHtyb3dOb2RlOnRoaXMucm9vdE5vZGUsY2hhbmdlZFBhdGg6ZX0pfWdldENvcHlPZk5vZGVzTWFwKCl7cmV0dXJuIHRoaXMubm9kZU1hbmFnZXIuZ2V0Q29weU9mTm9kZXNNYXAoKX1nZXRSb3dOb2RlKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSYmMD09ZS5pbmRleE9mKHMuUm93Tm9kZS5JRF9QUkVGSVhfUk9XX0dST1VQKSl7bGV0IHQ9dm9pZCAwO3JldHVybiB0aGlzLmZvckVhY2hOb2RlKGk9PntpLmlkPT09ZSYmKHQ9aSl9KSx0fXJldHVybiB0aGlzLm5vZGVNYW5hZ2VyLmdldFJvd05vZGUoZSl9c2V0Um93RGF0YShlKXt0aGlzLnNlbGVjdGlvblNlcnZpY2UucmVzZXQoInJvd0RhdGFDaGFuZ2VkIiksdGhpcy5ub2RlTWFuYWdlci5zZXRSb3dEYXRhKGUpLHRoaXMuaGFzU3RhcnRlZCYmdGhpcy5kaXNwYXRjaFVwZGF0ZUV2ZW50c0FuZFJlZnJlc2goKX1kaXNwYXRjaFVwZGF0ZUV2ZW50c0FuZFJlZnJlc2goKXtjb25zdCBlPXt0eXBlOnMuRXZlbnRzLkVWRU5UX1JPV19EQVRBX1VQREFURUR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSksdGhpcy5yZWZyZXNoTW9kZWwoe3N0ZXA6cy5DbGllbnRTaWRlUm93TW9kZWxTdGVwcy5FVkVSWVRISU5HLG5ld0RhdGE6ITB9KX1iYXRjaFVwZGF0ZVJvd0RhdGEoZSx0KXtpZihudWxsPT10aGlzLmFwcGx5QXN5bmNUcmFuc2FjdGlvbnNUaW1lb3V0KXt0aGlzLnJvd0RhdGFUcmFuc2FjdGlvbkJhdGNoPVtdO2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0QXN5bmNUcmFuc2FjdGlvbldhaXRNaWxsaXMoKTt0aGlzLmFwcGx5QXN5bmNUcmFuc2FjdGlvbnNUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KCgpPT57dGhpcy5leGVjdXRlQmF0Y2hVcGRhdGVSb3dEYXRhKCl9LGUpfXRoaXMucm93RGF0YVRyYW5zYWN0aW9uQmF0Y2gucHVzaCh7cm93RGF0YVRyYW5zYWN0aW9uOmUsY2FsbGJhY2s6dH0pfWZsdXNoQXN5bmNUcmFuc2FjdGlvbnMoKXtudWxsIT10aGlzLmFwcGx5QXN5bmNUcmFuc2FjdGlvbnNUaW1lb3V0JiYoY2xlYXJUaW1lb3V0KHRoaXMuYXBwbHlBc3luY1RyYW5zYWN0aW9uc1RpbWVvdXQpLHRoaXMuZXhlY3V0ZUJhdGNoVXBkYXRlUm93RGF0YSgpKX1leGVjdXRlQmF0Y2hVcGRhdGVSb3dEYXRhKCl7dGhpcy52YWx1ZUNhY2hlLm9uRGF0YUNoYW5nZWQoKTtjb25zdCBlPVtdLHQ9W107bGV0IGk9ITE7aWYodGhpcy5yb3dEYXRhVHJhbnNhY3Rpb25CYXRjaCYmdGhpcy5yb3dEYXRhVHJhbnNhY3Rpb25CYXRjaC5mb3JFYWNoKHM9Pntjb25zdCByPXRoaXMubm9kZU1hbmFnZXIudXBkYXRlUm93RGF0YShzLnJvd0RhdGFUcmFuc2FjdGlvbix2b2lkIDApO3QucHVzaChyKSxzLmNhbGxiYWNrJiZlLnB1c2gocy5jYWxsYmFjay5iaW5kKG51bGwscikpLCJudW1iZXIiPT10eXBlb2Ygcy5yb3dEYXRhVHJhbnNhY3Rpb24uYWRkSW5kZXgmJihpPSEwKX0pLHRoaXMuY29tbW9uVXBkYXRlUm93RGF0YSh0LHZvaWQgMCxpKSxlLmxlbmd0aD4wJiZ3aW5kb3cuc2V0VGltZW91dCgoKT0+e2UuZm9yRWFjaChlPT5lKCkpfSwwKSx0Lmxlbmd0aD4wKXtjb25zdCBlPXt0eXBlOnMuRXZlbnRzLkVWRU5UX0FTWU5DX1RSQU5TQUNUSU9OU19GTFVTSEVELHJlc3VsdHM6dH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX10aGlzLnJvd0RhdGFUcmFuc2FjdGlvbkJhdGNoPW51bGwsdGhpcy5hcHBseUFzeW5jVHJhbnNhY3Rpb25zVGltZW91dD12b2lkIDB9dXBkYXRlUm93RGF0YShlLHQpe3RoaXMudmFsdWVDYWNoZS5vbkRhdGFDaGFuZ2VkKCk7Y29uc3QgaT10aGlzLm5vZGVNYW5hZ2VyLnVwZGF0ZVJvd0RhdGEoZSx0KSxzPSJudW1iZXIiPT10eXBlb2YgZS5hZGRJbmRleDtyZXR1cm4gdGhpcy5jb21tb25VcGRhdGVSb3dEYXRhKFtpXSx0LHMpLGl9Y3JlYXRlUm93Tm9kZU9yZGVyKCl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc01haW50YWluVW5zb3J0ZWRPcmRlciIpKXJldHVybjtjb25zdCBlPXt9O2lmKHRoaXMucm9vdE5vZGUmJnRoaXMucm9vdE5vZGUuYWxsTGVhZkNoaWxkcmVuKWZvcihsZXQgdD0wO3Q8dGhpcy5yb290Tm9kZS5hbGxMZWFmQ2hpbGRyZW4ubGVuZ3RoO3QrKyl7ZVt0aGlzLnJvb3ROb2RlLmFsbExlYWZDaGlsZHJlblt0XS5pZF09dH1yZXR1cm4gZX1jb21tb25VcGRhdGVSb3dEYXRhKGUsdCxpKXtpZighdGhpcy5oYXNTdGFydGVkKXJldHVybjtjb25zdCByPSF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQW5pbWF0aW9uRnJhbWUiKTtpJiYodD10aGlzLmNyZWF0ZVJvd05vZGVPcmRlcigpKTtjb25zdCBvPXt0eXBlOnMuRXZlbnRzLkVWRU5UX1JPV19EQVRBX1VQREFURUR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQobyksdGhpcy5yZWZyZXNoTW9kZWwoe3N0ZXA6cy5DbGllbnRTaWRlUm93TW9kZWxTdGVwcy5FVkVSWVRISU5HLHJvd05vZGVUcmFuc2FjdGlvbnM6ZSxyb3dOb2RlT3JkZXI6dCxrZWVwUmVuZGVyZWRSb3dzOiEwLGtlZXBFZGl0aW5nUm93czohMCxhbmltYXRlOnJ9KX1kb1Jvd3NUb0Rpc3BsYXkoKXt0aGlzLnJvd3NUb0Rpc3BsYXk9dGhpcy5mbGF0dGVuU3RhZ2UuZXhlY3V0ZSh7cm93Tm9kZTp0aGlzLnJvb3ROb2RlfSl9b25Sb3dIZWlnaHRDaGFuZ2VkKCl7dGhpcy5yZWZyZXNoTW9kZWwoe3N0ZXA6cy5DbGllbnRTaWRlUm93TW9kZWxTdGVwcy5NQVAsa2VlcFJlbmRlcmVkUm93czohMCxrZWVwRWRpdGluZ1Jvd3M6ITAsa2VlcFVuZG9SZWRvU3RhY2s6ITB9KX1vblJvd0hlaWdodENoYW5nZWREZWJvdW5jZWQoKXt0aGlzLm9uUm93SGVpZ2h0Q2hhbmdlZF9kZWJvdW5jZWQoKX1yZXNldFJvd0hlaWdodHMoKXtjb25zdCBlPXRoaXMucmVzZXRSb3dIZWlnaHRzRm9yQWxsUm93Tm9kZXMoKTt0aGlzLnJvb3ROb2RlLnNldFJvd0hlaWdodCh0aGlzLnJvb3ROb2RlLnJvd0hlaWdodCwhMCksdGhpcy5yb290Tm9kZS5zaWJsaW5nJiZ0aGlzLnJvb3ROb2RlLnNpYmxpbmcuc2V0Um93SGVpZ2h0KHRoaXMucm9vdE5vZGUuc2libGluZy5yb3dIZWlnaHQsITApLGUmJnRoaXMub25Sb3dIZWlnaHRDaGFuZ2VkKCl9cmVzZXRSb3dIZWlnaHRzRm9yQWxsUm93Tm9kZXMoKXtsZXQgZT0hMTtyZXR1cm4gdGhpcy5mb3JFYWNoTm9kZSh0PT57dC5zZXRSb3dIZWlnaHQodC5yb3dIZWlnaHQsITApO2NvbnN0IGk9dC5kZXRhaWxOb2RlO2kmJmkuc2V0Um93SGVpZ2h0KGkucm93SGVpZ2h0LCEwKSx0LnNpYmxpbmcmJnQuc2libGluZy5zZXRSb3dIZWlnaHQodC5zaWJsaW5nLnJvd0hlaWdodCwhMCksZT0hMH0pLGV9b25HcmlkU3R5bGVzQ2hhbmdlcygpe3RoaXMuY29sdW1uTW9kZWwuaXNBdXRvUm93SGVpZ2h0QWN0aXZlKCl8fHRoaXMucmVzZXRSb3dIZWlnaHRzKCl9b25HcmlkUmVhZHkoKXt0aGlzLmhhc1N0YXJ0ZWR8fHRoaXMuc2V0SW5pdGlhbERhdGEoKX1pc1Jvd0RhdGFMb2FkZWQoKXtyZXR1cm4gdGhpcy5yb3dDb3VudFJlYWR5fX07bihbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sYS5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLG4oW09iamVjdChzLkF1dG93aXJlZCkoInNlbGVjdGlvblNlcnZpY2UiKV0sYS5wcm90b3R5cGUsInNlbGVjdGlvblNlcnZpY2UiLHZvaWQgMCksbihbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZmlsdGVyTWFuYWdlciIpXSxhLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSxuKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJ2YWx1ZUNhY2hlIildLGEucHJvdG90eXBlLCJ2YWx1ZUNhY2hlIix2b2lkIDApLG4oW09iamVjdChzLkF1dG93aXJlZCkoImJlYW5zIildLGEucHJvdG90eXBlLCJiZWFucyIsdm9pZCAwKSxuKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmaWx0ZXJTdGFnZSIpXSxhLnByb3RvdHlwZSwiZmlsdGVyU3RhZ2UiLHZvaWQgMCksbihbT2JqZWN0KHMuQXV0b3dpcmVkKSgic29ydFN0YWdlIildLGEucHJvdG90eXBlLCJzb3J0U3RhZ2UiLHZvaWQgMCksbihbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZmxhdHRlblN0YWdlIildLGEucHJvdG90eXBlLCJmbGF0dGVuU3RhZ2UiLHZvaWQgMCksbihbT2JqZWN0KHMuT3B0aW9uYWwpKCJncm91cFN0YWdlIildLGEucHJvdG90eXBlLCJncm91cFN0YWdlIix2b2lkIDApLG4oW09iamVjdChzLk9wdGlvbmFsKSgiYWdncmVnYXRpb25TdGFnZSIpXSxhLnByb3RvdHlwZSwiYWdncmVnYXRpb25TdGFnZSIsdm9pZCAwKSxuKFtPYmplY3Qocy5PcHRpb25hbCkoInBpdm90U3RhZ2UiKV0sYS5wcm90b3R5cGUsInBpdm90U3RhZ2UiLHZvaWQgMCksbihbT2JqZWN0KHMuT3B0aW9uYWwpKCJmaWx0ZXJBZ2dyZWdhdGVzU3RhZ2UiKV0sYS5wcm90b3R5cGUsImZpbHRlckFnZ3JlZ2F0ZXNTdGFnZSIsdm9pZCAwKSxuKFtzLlBvc3RDb25zdHJ1Y3RdLGEucHJvdG90eXBlLCJpbml0IixudWxsKSxhPW4oW09iamVjdChzLkJlYW4pKCJyb3dNb2RlbCIpXSxhKTt2YXIgbD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgZD1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7ZXhlY3V0ZShlKXtjb25zdHtjaGFuZ2VkUGF0aDp0fT1lO3RoaXMuZmlsdGVyU2VydmljZS5maWx0ZXIodCl9fTtsKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmaWx0ZXJTZXJ2aWNlIildLGQucHJvdG90eXBlLCJmaWx0ZXJTZXJ2aWNlIix2b2lkIDApLGQ9bChbT2JqZWN0KHMuQmVhbikoImZpbHRlclN0YWdlIildLGQpO3ZhciBjPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBoPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1YntleGVjdXRlKGUpe2NvbnN0IHQ9dGhpcy5zb3J0Q29udHJvbGxlci5nZXRTb3J0T3B0aW9ucygpLGk9cy5fLmV4aXN0cyh0KSYmdC5sZW5ndGg+MCxyPWkmJnMuXy5leGlzdHMoZS5yb3dOb2RlVHJhbnNhY3Rpb25zKSYmdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJkZWx0YVNvcnQiKSxvPXQuc29tZShlPT50aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0NvbHVtbnNTb3J0aW5nQ291cGxlZFRvR3JvdXAoKT9lLmNvbHVtbi5pc1ByaW1hcnkoKSYmZS5jb2x1bW4uaXNSb3dHcm91cEFjdGl2ZSgpOiEhZS5jb2x1bW4uZ2V0Q29sRGVmKCkuc2hvd1Jvd0dyb3VwKTt0aGlzLnNvcnRTZXJ2aWNlLnNvcnQodCxpLHIsZS5yb3dOb2RlVHJhbnNhY3Rpb25zLGUuY2hhbmdlZFBhdGgsbyl9fTtjKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJzb3J0U2VydmljZSIpXSxoLnByb3RvdHlwZSwic29ydFNlcnZpY2UiLHZvaWQgMCksYyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgic29ydENvbnRyb2xsZXIiKV0saC5wcm90b3R5cGUsInNvcnRDb250cm9sbGVyIix2b2lkIDApLGg9YyhbT2JqZWN0KHMuQmVhbikoInNvcnRTdGFnZSIpXSxoKTt2YXIgdT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgcD1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7ZXhlY3V0ZShlKXtjb25zdCB0PWUucm93Tm9kZSxpPVtdLHM9dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpLHI9cyYmdC5sZWFmR3JvdXAsbz1yP1t0XTp0LmNoaWxkcmVuQWZ0ZXJTb3J0LG49dGhpcy5nZXRGbGF0dGVuRGV0YWlscygpO3RoaXMucmVjdXJzaXZlbHlBZGRUb1Jvd3NUb0Rpc3BsYXkobixvLGkscywwKTtyZXR1cm4hciYmaS5sZW5ndGg+MCYmbi5ncm91cEluY2x1ZGVUb3RhbEZvb3RlciYmKHQuY3JlYXRlRm9vdGVyKCksdGhpcy5hZGRSb3dOb2RlVG9Sb3dzVG9EaXNwbGF5KG4sdC5zaWJsaW5nLGksMCkpLGl9Z2V0RmxhdHRlbkRldGFpbHMoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBSZW1vdmVTaW5nbGVDaGlsZHJlbiIpO3JldHVybntncm91cFJlbW92ZUxvd2VzdFNpbmdsZUNoaWxkcmVuOiFlJiZ0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwUmVtb3ZlTG93ZXN0U2luZ2xlQ2hpbGRyZW4iKSxncm91cFJlbW92ZVNpbmdsZUNoaWxkcmVuOmUsaXNHcm91cE11bHRpQXV0b0NvbHVtbjp0aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0dyb3VwTXVsdGlBdXRvQ29sdW1uKCksaGlkZU9wZW5QYXJlbnRzOnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZ3JvdXBIaWRlT3BlblBhcmVudHMiKSxncm91cEluY2x1ZGVUb3RhbEZvb3Rlcjp0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwSW5jbHVkZVRvdGFsRm9vdGVyIiksZ2V0R3JvdXBJbmNsdWRlRm9vdGVyOnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldEdyb3VwSW5jbHVkZUZvb3RlcigpfX1yZWN1cnNpdmVseUFkZFRvUm93c1RvRGlzcGxheShlLHQsaSxyLG8pe2lmKCFzLl8ubWlzc2luZ09yRW1wdHkodCkpZm9yKGxldCBzPTA7czx0Lmxlbmd0aDtzKyspe2NvbnN0IG49dFtzXSxhPW4uaGFzQ2hpbGRyZW4oKSxsPXImJiFhLGQ9ZS5ncm91cFJlbW92ZVNpbmdsZUNoaWxkcmVuJiZhJiYxPT09bi5jaGlsZHJlbkFmdGVyR3JvdXAubGVuZ3RoLGM9ZS5ncm91cFJlbW92ZUxvd2VzdFNpbmdsZUNoaWxkcmVuJiZhJiZuLmxlYWZHcm91cCYmMT09PW4uY2hpbGRyZW5BZnRlckdyb3VwLmxlbmd0aCxoPXImJm4ubGVhZkdyb3VwLHU9ZS5oaWRlT3BlblBhcmVudHMmJm4uZXhwYW5kZWQmJiFuLm1hc3RlciYmIWg7aWYoIShsfHx1fHxkfHxjKSYmdGhpcy5hZGRSb3dOb2RlVG9Sb3dzVG9EaXNwbGF5KGUsbixpLG8pLCFyfHwhbi5sZWFmR3JvdXApaWYoYSl7Y29uc3QgdD1kfHxjO2lmKG4uZXhwYW5kZWR8fHQpe2NvbnN0IHM9dD9vOm8rMTt0aGlzLnJlY3Vyc2l2ZWx5QWRkVG9Sb3dzVG9EaXNwbGF5KGUsbi5jaGlsZHJlbkFmdGVyU29ydCxpLHIscyk7ZS5nZXRHcm91cEluY2x1ZGVGb290ZXIoe25vZGU6bn0pPyhuLmNyZWF0ZUZvb3RlcigpLHRoaXMuYWRkUm93Tm9kZVRvUm93c1RvRGlzcGxheShlLG4uc2libGluZyxpLHMpKTpuLmRlc3Ryb3lGb290ZXIoKX19ZWxzZSBpZihuLm1hc3RlciYmbi5leHBhbmRlZCl7Y29uc3QgdD10aGlzLmNyZWF0ZURldGFpbE5vZGUobik7dGhpcy5hZGRSb3dOb2RlVG9Sb3dzVG9EaXNwbGF5KGUsdCxpLG8pfX19YWRkUm93Tm9kZVRvUm93c1RvRGlzcGxheShlLHQsaSxzKXtpLnB1c2godCksdC5zZXRVaUxldmVsKGUuaXNHcm91cE11bHRpQXV0b0NvbHVtbj8wOnMpfWNyZWF0ZURldGFpbE5vZGUoZSl7aWYocy5fLmV4aXN0cyhlLmRldGFpbE5vZGUpKXJldHVybiBlLmRldGFpbE5vZGU7Y29uc3QgdD1uZXcgcy5Sb3dOb2RlKHRoaXMuYmVhbnMpO3JldHVybiB0LmRldGFpbD0hMCx0LnNlbGVjdGFibGU9ITEsdC5wYXJlbnQ9ZSxzLl8uZXhpc3RzKGUuaWQpJiYodC5pZD0iZGV0YWlsXyIrZS5pZCksdC5kYXRhPWUuZGF0YSx0LmxldmVsPWUubGV2ZWwrMSxlLmRldGFpbE5vZGU9dCx0fX07dShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0scC5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLHUoW09iamVjdChzLkF1dG93aXJlZCkoImJlYW5zIildLHAucHJvdG90eXBlLCJiZWFucyIsdm9pZCAwKSxwPXUoW09iamVjdChzLkJlYW4pKCJmbGF0dGVuU3RhZ2UiKV0scCk7dmFyIGc9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IG09Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie3NvcnQoZSx0LGkscyxyLG8pe2NvbnN0IG49dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJncm91cE1haW50YWluT3JkZXIiKSxhPXRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsR3JpZENvbHVtbnMoKS5zb21lKGU9PmUuaXNSb3dHcm91cEFjdGl2ZSgpKTtsZXQgbD17fTtpJiZzJiYobD10aGlzLmNhbGN1bGF0ZURpcnR5Tm9kZXMocykpO2NvbnN0IGQ9dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpLGM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soInBvc3RTb3J0Um93cyIpLGg9cz0+e3ZhciBoO3RoaXMucHVsbERvd25Hcm91cERhdGFGb3JIaWRlT3BlblBhcmVudHMocy5jaGlsZHJlbkFmdGVyQWdnRmlsdGVyLCEwKTtjb25zdCB1PWQmJnMubGVhZkdyb3VwO2lmKG4mJmEmJiFzLmxlYWZHcm91cCYmIW8pe2NvbnN0IGU9bnVsbD09PShoPXRoaXMuY29sdW1uTW9kZWwuZ2V0Um93R3JvdXBDb2x1bW5zKCkpfHx2b2lkIDA9PT1oP3ZvaWQgMDpoW3MubGV2ZWwrMV0sdD1udWxsPT09KG51bGw9PWU/dm9pZCAwOmUuZ2V0U29ydCgpKSxpPXMuY2hpbGRyZW5BZnRlckFnZ0ZpbHRlci5zbGljZSgwKTtpZihzLmNoaWxkcmVuQWZ0ZXJTb3J0JiYhdCl7Y29uc3QgZT17fTtzLmNoaWxkcmVuQWZ0ZXJTb3J0LmZvckVhY2goKHQsaSk9PntlW3QuaWRdPWl9KSxpLnNvcnQoKHQsaSk9Pnt2YXIgcyxyO3JldHVybihudWxsIT09KHM9ZVt0LmlkXSkmJnZvaWQgMCE9PXM/czowKS0obnVsbCE9PShyPWVbaS5pZF0pJiZ2b2lkIDAhPT1yP3I6MCl9KX1zLmNoaWxkcmVuQWZ0ZXJTb3J0PWl9ZWxzZSBzLmNoaWxkcmVuQWZ0ZXJTb3J0PSF0fHx1P3MuY2hpbGRyZW5BZnRlckFnZ0ZpbHRlci5zbGljZSgwKTppP3RoaXMuZG9EZWx0YVNvcnQocyxsLHIsZSk6dGhpcy5yb3dOb2RlU29ydGVyLmRvRnVsbFNvcnQocy5jaGlsZHJlbkFmdGVyQWdnRmlsdGVyLGUpO2lmKHMuc2libGluZyYmKHMuc2libGluZy5jaGlsZHJlbkFmdGVyU29ydD1zLmNoaWxkcmVuQWZ0ZXJTb3J0KSx0aGlzLnVwZGF0ZUNoaWxkSW5kZXhlcyhzKSxjKXtjb25zdCBlPXtub2RlczpzLmNoaWxkcmVuQWZ0ZXJTb3J0fTtjKGUpfX07ciYmci5mb3JFYWNoQ2hhbmdlZE5vZGVEZXB0aEZpcnN0KGgpLHRoaXMudXBkYXRlR3JvdXBEYXRhRm9ySGlkZU9wZW5QYXJlbnRzKHIpfWNhbGN1bGF0ZURpcnR5Tm9kZXMoZSl7Y29uc3QgdD17fSxpPWU9PntlJiZlLmZvckVhY2goZT0+dFtlLmlkXT0hMCl9O3JldHVybiBlJiZlLmZvckVhY2goZT0+e2koZS5hZGQpLGkoZS51cGRhdGUpLGkoZS5yZW1vdmUpfSksdH1kb0RlbHRhU29ydChlLHQsaSxzKXtjb25zdCByPWUuY2hpbGRyZW5BZnRlckFnZ0ZpbHRlcixvPWUuY2hpbGRyZW5BZnRlclNvcnQ7aWYoIW8pcmV0dXJuIHRoaXMucm93Tm9kZVNvcnRlci5kb0Z1bGxTb3J0KHIscyk7Y29uc3Qgbj17fSxhPVtdO3IuZm9yRWFjaChlPT57dFtlLmlkXXx8IWkuY2FuU2tpcChlKT9hLnB1c2goZSk6bltlLmlkXT0hMH0pO2NvbnN0IGw9by5maWx0ZXIoZT0+bltlLmlkXSksZD0oZSx0KT0+KHtjdXJyZW50UG9zOnQscm93Tm9kZTplfSksYz1hLm1hcChkKS5zb3J0KChlLHQpPT50aGlzLnJvd05vZGVTb3J0ZXIuY29tcGFyZVJvd05vZGVzKHMsZSx0KSk7cmV0dXJuIHRoaXMubWVyZ2VTb3J0ZWRBcnJheXMocyxjLGwubWFwKGQpKS5tYXAoKHtyb3dOb2RlOmV9KT0+ZSl9bWVyZ2VTb3J0ZWRBcnJheXMoZSx0LGkpe2NvbnN0IHM9W107bGV0IHI9MCxvPTA7Zm9yKDtyPHQubGVuZ3RoJiZvPGkubGVuZ3RoOyl7dGhpcy5yb3dOb2RlU29ydGVyLmNvbXBhcmVSb3dOb2RlcyhlLHRbcl0saVtvXSk8MD9zLnB1c2godFtyKytdKTpzLnB1c2goaVtvKytdKX1mb3IoO3I8dC5sZW5ndGg7KXMucHVzaCh0W3IrK10pO2Zvcig7bzxpLmxlbmd0aDspcy5wdXNoKGlbbysrXSk7cmV0dXJuIHN9dXBkYXRlQ2hpbGRJbmRleGVzKGUpe2lmKHMuXy5taXNzaW5nKGUuY2hpbGRyZW5BZnRlclNvcnQpKXJldHVybjtjb25zdCB0PWUuY2hpbGRyZW5BZnRlclNvcnQ7Zm9yKGxldCBpPTA7aTx0Lmxlbmd0aDtpKyspe2NvbnN0IHM9dFtpXSxyPTA9PT1pLG89aT09PWUuY2hpbGRyZW5BZnRlclNvcnQubGVuZ3RoLTE7cy5zZXRGaXJzdENoaWxkKHIpLHMuc2V0TGFzdENoaWxkKG8pLHMuc2V0Q2hpbGRJbmRleChpKX19dXBkYXRlR3JvdXBEYXRhRm9ySGlkZU9wZW5QYXJlbnRzKGUpe2lmKCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwSGlkZU9wZW5QYXJlbnRzIikpcmV0dXJuO2lmKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidHJlZURhdGEiKSlyZXR1cm4gcy5fLndhcm5PbmNlKCJUaGUgcHJvcGVydHkgaGlkZU9wZW5QYXJlbnRzIGRvc2Ugbm90IHdvcmsgd2l0aCBUcmVlIERhdGEuIFRoaXMgaXMgYmVjYXVzZSBUcmVlIERhdGEgaGFzIHZhbHVlcyBhdCB0aGUgZ3JvdXAgbGV2ZWwsIGl0IGRvZXNuJ3QgbWFrZSBzZW5zZSB0byBoaWRlIHRoZW0uIiksITE7Y29uc3QgdD1lPT57dGhpcy5wdWxsRG93bkdyb3VwRGF0YUZvckhpZGVPcGVuUGFyZW50cyhlLmNoaWxkcmVuQWZ0ZXJTb3J0LCExKSxlLmNoaWxkcmVuQWZ0ZXJTb3J0LmZvckVhY2goZT0+e2UuaGFzQ2hpbGRyZW4oKSYmdChlKX0pfTtlJiZlLmV4ZWN1dGVGcm9tUm9vdE5vZGUoZT0+dChlKSl9cHVsbERvd25Hcm91cERhdGFGb3JIaWRlT3BlblBhcmVudHMoZSx0KXt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwSGlkZU9wZW5QYXJlbnRzIikmJiFzLl8ubWlzc2luZyhlKSYmZS5mb3JFYWNoKGU9Pnt0aGlzLmNvbHVtbk1vZGVsLmdldEdyb3VwRGlzcGxheUNvbHVtbnMoKS5mb3JFYWNoKGk9Pntjb25zdCBzPWkuZ2V0Q29sRGVmKCkuc2hvd1Jvd0dyb3VwO2lmKCJzdHJpbmciIT10eXBlb2YgcylyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJBRyBHcmlkOiBncm91cEhpZGVPcGVuUGFyZW50cyBvbmx5IHdvcmtzIHdoZW4gc3BlY2lmeWluZyBzcGVjaWZpYyBjb2x1bW5zIGZvciBjb2xEZWYuc2hvd1Jvd0dyb3VwIik7Y29uc3Qgcj1zLG89dGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKHIpO2lmKCEobz09PWUucm93R3JvdXBDb2x1bW4pKWlmKHQpZS5zZXRHcm91cFZhbHVlKGkuZ2V0SWQoKSx2b2lkIDApO2Vsc2V7Y29uc3QgdD1lLmdldEZpcnN0Q2hpbGRPZkZpcnN0Q2hpbGQobyk7dCYmZS5zZXRHcm91cFZhbHVlKGkuZ2V0SWQoKSx0LmtleSl9fSl9KX19O2coW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLG0ucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxnKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dOb2RlU29ydGVyIildLG0ucHJvdG90eXBlLCJyb3dOb2RlU29ydGVyIix2b2lkIDApLG09ZyhbT2JqZWN0KHMuQmVhbikoInNvcnRTZXJ2aWNlIildLG0pO3ZhciBmPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCB2PWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1YntmaWx0ZXIoZSl7Y29uc3QgdD10aGlzLmZpbHRlck1hbmFnZXIuaXNDaGlsZEZpbHRlclByZXNlbnQoKTt0aGlzLmZpbHRlck5vZGVzKHQsZSl9ZmlsdGVyTm9kZXMoZSx0KXtjb25zdCBpPSh0LGkpPT57dC5oYXNDaGlsZHJlbigpP3QuY2hpbGRyZW5BZnRlckZpbHRlcj1lJiYhaT90LmNoaWxkcmVuQWZ0ZXJHcm91cC5maWx0ZXIoZT0+e2NvbnN0IHQ9ZS5jaGlsZHJlbkFmdGVyRmlsdGVyJiZlLmNoaWxkcmVuQWZ0ZXJGaWx0ZXIubGVuZ3RoPjAsaT1lLmRhdGEmJnRoaXMuZmlsdGVyTWFuYWdlci5kb2VzUm93UGFzc0ZpbHRlcih7cm93Tm9kZTplfSk7cmV0dXJuIHR8fGl9KTp0LmNoaWxkcmVuQWZ0ZXJHcm91cDp0LmNoaWxkcmVuQWZ0ZXJGaWx0ZXI9dC5jaGlsZHJlbkFmdGVyR3JvdXAsdC5zaWJsaW5nJiYodC5zaWJsaW5nLmNoaWxkcmVuQWZ0ZXJGaWx0ZXI9dC5jaGlsZHJlbkFmdGVyRmlsdGVyKX07aWYodGhpcy5kb2luZ1RyZWVEYXRhRmlsdGVyaW5nKCkpe2NvbnN0IGU9KHQscyk9PntpZih0LmNoaWxkcmVuQWZ0ZXJHcm91cClmb3IobGV0IHI9MDtyPHQuY2hpbGRyZW5BZnRlckdyb3VwLmxlbmd0aDtyKyspe2NvbnN0IG89dC5jaGlsZHJlbkFmdGVyR3JvdXBbcl0sbj1zfHx0aGlzLmZpbHRlck1hbmFnZXIuZG9lc1Jvd1Bhc3NGaWx0ZXIoe3Jvd05vZGU6b30pO28uY2hpbGRyZW5BZnRlckdyb3VwP2UodC5jaGlsZHJlbkFmdGVyR3JvdXBbcl0sbik6aShvLG4pfWkodCxzKX0scz10PT5lKHQsITEpO3QuZXhlY3V0ZUZyb21Sb290Tm9kZShzKX1lbHNle2NvbnN0IGU9ZT0+aShlLCExKTt0LmZvckVhY2hDaGFuZ2VkTm9kZURlcHRoRmlyc3QoZSwhMCl9fWRvaW5nVHJlZURhdGFGaWx0ZXJpbmcoKXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpJiYhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJleGNsdWRlQ2hpbGRyZW5XaGVuVHJlZURhdGFGaWx0ZXJpbmciKX19O2YoW09iamVjdChzLkF1dG93aXJlZCkoImZpbHRlck1hbmFnZXIiKV0sdi5wcm90b3R5cGUsImZpbHRlck1hbmFnZXIiLHZvaWQgMCksdj1mKFtPYmplY3Qocy5CZWFuKSgiZmlsdGVyU2VydmljZSIpXSx2KTt2YXIgQz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgeT1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7cG9zdENvbnN0cnVjdCgpeyJjbGllbnRTaWRlIj09PXRoaXMucm93TW9kZWwuZ2V0VHlwZSgpJiYodGhpcy5jbGllbnRTaWRlUm93TW9kZWw9dGhpcy5yb3dNb2RlbCx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJyb3dEYXRhIiwoKT0+dGhpcy5vblJvd0RhdGFVcGRhdGVkKCkpKX1pc0FjdGl2ZSgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZXhpc3RzKCJnZXRSb3dJZCIpO3JldHVybiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJlc2V0Um93RGF0YU9uVXBkYXRlIikmJmV9c2V0Um93RGF0YShlKXtjb25zdCB0PXRoaXMuY3JlYXRlVHJhbnNhY3Rpb25Gb3JSb3dEYXRhKGUpO2lmKCF0KXJldHVybjtjb25zdFtpLHNdPXQ7dGhpcy5jbGllbnRTaWRlUm93TW9kZWwudXBkYXRlUm93RGF0YShpLHMpfWNyZWF0ZVRyYW5zYWN0aW9uRm9yUm93RGF0YShlKXtpZihzLl8ubWlzc2luZyh0aGlzLmNsaWVudFNpZGVSb3dNb2RlbCkpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiQUcgR3JpZDogSW1tdXRhYmxlU2VydmljZSBvbmx5IHdvcmtzIHdpdGggQ2xpZW50U2lkZVJvd01vZGVsIik7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiZ2V0Um93SWQiKTtpZihudWxsPT10KXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoIkFHIEdyaWQ6IEltbXV0YWJsZVNlcnZpY2UgcmVxdWlyZXMgZ2V0Um93SWQoKSBjYWxsYmFjayB0byBiZSBpbXBsZW1lbnRlZCwgeW91ciByb3cgZGF0YSBuZWVkcyBJRHMhIik7Y29uc3QgaT17cmVtb3ZlOltdLHVwZGF0ZTpbXSxhZGQ6W119LHI9dGhpcy5jbGllbnRTaWRlUm93TW9kZWwuZ2V0Q29weU9mTm9kZXNNYXAoKSxvPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NNYWludGFpblVuc29ydGVkT3JkZXIiKT92b2lkIDA6e307cmV0dXJuIHMuXy5leGlzdHMoZSkmJmUuZm9yRWFjaCgoZSxzKT0+e2NvbnN0IG49dCh7ZGF0YTplLGxldmVsOjB9KSxhPXJbbl07aWYobyYmKG9bbl09cyksYSl7YS5kYXRhIT09ZSYmaS51cGRhdGUucHVzaChlKSxyW25dPXZvaWQgMH1lbHNlIGkuYWRkLnB1c2goZSl9KSxzLl8uaXRlcmF0ZU9iamVjdChyLChlLHQpPT57dCYmaS5yZW1vdmUucHVzaCh0LmRhdGEpfSksW2ksb119b25Sb3dEYXRhVXBkYXRlZCgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJyb3dEYXRhIik7ZSYmKHRoaXMuaXNBY3RpdmUoKT90aGlzLnNldFJvd0RhdGEoZSk6KHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldCgicm93RGF0YUNoYW5nZWQiKSx0aGlzLmNsaWVudFNpZGVSb3dNb2RlbC5zZXRSb3dEYXRhKGUpKSl9fTtDKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dNb2RlbCIpXSx5LnByb3RvdHlwZSwicm93TW9kZWwiLHZvaWQgMCksQyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93UmVuZGVyZXIiKV0seS5wcm90b3R5cGUsInJvd1JlbmRlcmVyIix2b2lkIDApLEMoW09iamVjdChzLkF1dG93aXJlZCkoInNlbGVjdGlvblNlcnZpY2UiKV0seS5wcm90b3R5cGUsInNlbGVjdGlvblNlcnZpY2UiLHZvaWQgMCksQyhbcy5Qb3N0Q29uc3RydWN0XSx5LnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCkseT1DKFtPYmplY3Qocy5CZWFuKSgiaW1tdXRhYmxlU2VydmljZSIpXSx5KTtjb25zdCBTPXt2ZXJzaW9uOiIzMS4xLjEiLG1vZHVsZU5hbWU6cy5Nb2R1bGVOYW1lcy5DbGllbnRTaWRlUm93TW9kZWxNb2R1bGUscm93TW9kZWw6ImNsaWVudFNpZGUiLGJlYW5zOlthLGQsaCxwLG0sdix5XX07aS5kKHQsIkNsaWVudFNpZGVSb3dNb2RlbE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFN9KSl9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpO3ZhciBzPWkoMCkscj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBvIGV4dGVuZHMgcy5Sb3dOb2RlQmxvY2t7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKGUpLHRoaXMucGFyZW50Q2FjaGU9dCx0aGlzLnBhcmFtcz1pLHRoaXMuc3RhcnRSb3c9ZSppLmJsb2NrU2l6ZSx0aGlzLmVuZFJvdz10aGlzLnN0YXJ0Um93K2kuYmxvY2tTaXplfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmNyZWF0ZVJvd05vZGVzKCl9Z2V0QmxvY2tTdGF0ZUpzb24oKXtyZXR1cm57aWQ6IiIrdGhpcy5nZXRJZCgpLHN0YXRlOntibG9ja051bWJlcjp0aGlzLmdldElkKCksc3RhcnRSb3c6dGhpcy5nZXRTdGFydFJvdygpLGVuZFJvdzp0aGlzLmdldEVuZFJvdygpLHBhZ2VTdGF0dXM6dGhpcy5nZXRTdGF0ZSgpfX19c2V0RGF0YUFuZElkKGUsdCxpKXtzLl8uZXhpc3RzKHQpP2Uuc2V0RGF0YUFuZElkKHQsaS50b1N0cmluZygpKTplLnNldERhdGFBbmRJZCh2b2lkIDAsdm9pZCAwKX1sb2FkRnJvbURhdGFzb3VyY2UoKXtjb25zdCBlPXRoaXMuY3JlYXRlTG9hZFBhcmFtcygpO3MuXy5taXNzaW5nKHRoaXMucGFyYW1zLmRhdGFzb3VyY2UuZ2V0Um93cyk/Y29uc29sZS53YXJuKCJBRyBHcmlkOiBkYXRhc291cmNlIGlzIG1pc3NpbmcgZ2V0Um93cyBtZXRob2QiKTp3aW5kb3cuc2V0VGltZW91dCgoKT0+e3RoaXMucGFyYW1zLmRhdGFzb3VyY2UuZ2V0Um93cyhlKX0sMCl9cHJvY2Vzc1NlcnZlckZhaWwoKXt9Y3JlYXRlTG9hZFBhcmFtcygpe3JldHVybntzdGFydFJvdzp0aGlzLmdldFN0YXJ0Um93KCksZW5kUm93OnRoaXMuZ2V0RW5kUm93KCksc3VjY2Vzc0NhbGxiYWNrOnRoaXMucGFnZUxvYWRlZC5iaW5kKHRoaXMsdGhpcy5nZXRWZXJzaW9uKCkpLGZhaWxDYWxsYmFjazp0aGlzLnBhZ2VMb2FkRmFpbGVkLmJpbmQodGhpcyx0aGlzLmdldFZlcnNpb24oKSksc29ydE1vZGVsOnRoaXMucGFyYW1zLnNvcnRNb2RlbCxmaWx0ZXJNb2RlbDp0aGlzLnBhcmFtcy5maWx0ZXJNb2RlbCxjb250ZXh0OnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldEdyaWRDb21tb25QYXJhbXMoKS5jb250ZXh0fX1mb3JFYWNoTm9kZShlLHQsaSl7dGhpcy5yb3dOb2Rlcy5mb3JFYWNoKChzLHIpPT57dGhpcy5zdGFydFJvdytyPGkmJmUocyx0Lm5leHQoKSl9KX1nZXRMYXN0QWNjZXNzZWQoKXtyZXR1cm4gdGhpcy5sYXN0QWNjZXNzZWR9Z2V0Um93KGUsdD0hMSl7dHx8KHRoaXMubGFzdEFjY2Vzc2VkPXRoaXMucGFyYW1zLmxhc3RBY2Nlc3NlZFNlcXVlbmNlLm5leHQoKSk7Y29uc3QgaT1lLXRoaXMuc3RhcnRSb3c7cmV0dXJuIHRoaXMucm93Tm9kZXNbaV19Z2V0U3RhcnRSb3coKXtyZXR1cm4gdGhpcy5zdGFydFJvd31nZXRFbmRSb3coKXtyZXR1cm4gdGhpcy5lbmRSb3d9Y3JlYXRlUm93Tm9kZXMoKXt0aGlzLnJvd05vZGVzPVtdO2ZvcihsZXQgZT0wO2U8dGhpcy5wYXJhbXMuYmxvY2tTaXplO2UrKyl7Y29uc3QgdD10aGlzLnN0YXJ0Um93K2UsaT1uZXcgcy5Sb3dOb2RlKHRoaXMuYmVhbnMpO2kuc2V0Um93SGVpZ2h0KHRoaXMucGFyYW1zLnJvd0hlaWdodCksaS51aUxldmVsPTAsaS5zZXRSb3dJbmRleCh0KSxpLnNldFJvd1RvcCh0aGlzLnBhcmFtcy5yb3dIZWlnaHQqdCksdGhpcy5yb3dOb2Rlcy5wdXNoKGkpfX1wcm9jZXNzU2VydmVyUmVzdWx0KGUpe3RoaXMucm93Tm9kZXMuZm9yRWFjaCgodCxpKT0+e2NvbnN0IHI9ZS5yb3dEYXRhP2Uucm93RGF0YVtpXTp2b2lkIDA7IXQuaWQmJnQuYWxyZWFkeVJlbmRlcmVkJiZyJiYodGhpcy5yb3dOb2Rlc1tpXT1uZXcgcy5Sb3dOb2RlKHRoaXMuYmVhbnMpLHRoaXMucm93Tm9kZXNbaV0uc2V0Um93SW5kZXgodC5yb3dJbmRleCksdGhpcy5yb3dOb2Rlc1tpXS5zZXRSb3dUb3AodC5yb3dUb3ApLHRoaXMucm93Tm9kZXNbaV0uc2V0Um93SGVpZ2h0KHQucm93SGVpZ2h0KSx0LmNsZWFyUm93VG9wQW5kUm93SW5kZXgoKSksdGhpcy5zZXREYXRhQW5kSWQodGhpcy5yb3dOb2Rlc1tpXSxyLHRoaXMuc3RhcnRSb3craSl9KTtjb25zdCB0PW51bGwhPWUucm93Q291bnQmJmUucm93Q291bnQ+PTA/ZS5yb3dDb3VudDp2b2lkIDA7dGhpcy5wYXJlbnRDYWNoZS5wYWdlTG9hZGVkKHRoaXMsdCl9ZGVzdHJveVJvd05vZGVzKCl7dGhpcy5yb3dOb2Rlcy5mb3JFYWNoKGU9PntlLmNsZWFyUm93VG9wQW5kUm93SW5kZXgoKX0pfX1yKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJiZWFucyIpXSxvLnByb3RvdHlwZSwiYmVhbnMiLHZvaWQgMCkscihbcy5Qb3N0Q29uc3RydWN0XSxvLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCkscihbcy5QcmVEZXN0cm95XSxvLnByb3RvdHlwZSwiZGVzdHJveVJvd05vZGVzIixudWxsKTt2YXIgbj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufSxhPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGkscyl7dChpLHMsZSl9fTtjbGFzcyBsIGV4dGVuZHMgcy5CZWFuU3R1Yntjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMubGFzdFJvd0luZGV4S25vd249ITEsdGhpcy5ibG9ja3M9e30sdGhpcy5ibG9ja0NvdW50PTAsdGhpcy5yb3dDb3VudD1lLmluaXRpYWxSb3dDb3VudCx0aGlzLnBhcmFtcz1lfXNldEJlYW5zKGUpe3RoaXMubG9nZ2VyPWUuY3JlYXRlKCJJbmZpbml0ZUNhY2hlIil9Z2V0Um93KGUsdD0hMSl7Y29uc3QgaT1NYXRoLmZsb29yKGUvdGhpcy5wYXJhbXMuYmxvY2tTaXplKTtsZXQgcz10aGlzLmJsb2Nrc1tpXTtpZighcyl7aWYodClyZXR1cm47cz10aGlzLmNyZWF0ZUJsb2NrKGkpfXJldHVybiBzLmdldFJvdyhlKX1jcmVhdGVCbG9jayhlKXtjb25zdCB0PXRoaXMuY3JlYXRlQmVhbihuZXcgbyhlLHRoaXMsdGhpcy5wYXJhbXMpKTtyZXR1cm4gdGhpcy5ibG9ja3NbdC5nZXRJZCgpXT10LHRoaXMuYmxvY2tDb3VudCsrLHRoaXMucHVyZ2VCbG9ja3NJZk5lZWRlZCh0KSx0aGlzLnBhcmFtcy5yb3dOb2RlQmxvY2tMb2FkZXIuYWRkQmxvY2sodCksdH1yZWZyZXNoQ2FjaGUoKXswPT10aGlzLmJsb2NrQ291bnQ/dGhpcy5wdXJnZUNhY2hlKCk6KHRoaXMuZ2V0QmxvY2tzSW5PcmRlcigpLmZvckVhY2goZT0+ZS5zZXRTdGF0ZVdhaXRpbmdUb0xvYWQoKSksdGhpcy5wYXJhbXMucm93Tm9kZUJsb2NrTG9hZGVyLmNoZWNrQmxvY2tUb0xvYWQoKSl9ZGVzdHJveUFsbEJsb2Nrcygpe3RoaXMuZ2V0QmxvY2tzSW5PcmRlcigpLmZvckVhY2goZT0+dGhpcy5kZXN0cm95QmxvY2soZSkpfWdldFJvd0NvdW50KCl7cmV0dXJuIHRoaXMucm93Q291bnR9aXNMYXN0Um93SW5kZXhLbm93bigpe3JldHVybiB0aGlzLmxhc3RSb3dJbmRleEtub3dufXBhZ2VMb2FkZWQoZSx0KXt0aGlzLmlzQWxpdmUoKSYmKHRoaXMubG9nZ2VyLmxvZyhgb25QYWdlTG9hZGVkOiBwYWdlID0gJHtlLmdldElkKCl9LCBsYXN0Um93ID0gJHt0fWApLHRoaXMuY2hlY2tSb3dDb3VudChlLHQpLHRoaXMub25DYWNoZVVwZGF0ZWQoKSl9cHVyZ2VCbG9ja3NJZk5lZWRlZChlKXtjb25zdCB0PXRoaXMuZ2V0QmxvY2tzSW5PcmRlcigpLmZpbHRlcih0PT50IT1lKTt0LnNvcnQoKGUsdCk9PnQuZ2V0TGFzdEFjY2Vzc2VkKCktZS5nZXRMYXN0QWNjZXNzZWQoKSk7Y29uc3QgaT10aGlzLnBhcmFtcy5tYXhCbG9ja3NJbkNhY2hlPjAscz1pP3RoaXMucGFyYW1zLm1heEJsb2Nrc0luQ2FjaGUtMTpudWxsLHI9bC5NQVhfRU1QVFlfQkxPQ0tTX1RPX0tFRVAtMTt0LmZvckVhY2goKGUsdCk9PntpZihlLmdldFN0YXRlKCk9PT1vLlNUQVRFX1dBSVRJTkdfVE9fTE9BRCYmdD49cnx8ISFpJiZ0Pj1zKXtpZih0aGlzLmlzQmxvY2tDdXJyZW50bHlEaXNwbGF5ZWQoZSkpcmV0dXJuO2lmKHRoaXMuaXNCbG9ja0ZvY3VzZWQoZSkpcmV0dXJuO3RoaXMucmVtb3ZlQmxvY2tGcm9tQ2FjaGUoZSl9fSl9aXNCbG9ja0ZvY3VzZWQoZSl7Y29uc3QgdD10aGlzLmZvY3VzU2VydmljZS5nZXRGb2N1c0NlbGxUb1VzZUFmdGVyUmVmcmVzaCgpO2lmKCF0KXJldHVybiExO2lmKG51bGwhPXQucm93UGlubmVkKXJldHVybiExO2NvbnN0IGk9ZS5nZXRTdGFydFJvdygpLHM9ZS5nZXRFbmRSb3coKTtyZXR1cm4gdC5yb3dJbmRleD49aSYmdC5yb3dJbmRleDxzfWlzQmxvY2tDdXJyZW50bHlEaXNwbGF5ZWQoZSl7Y29uc3QgdD1lLmdldFN0YXJ0Um93KCksaT1lLmdldEVuZFJvdygpLTE7cmV0dXJuIHRoaXMucm93UmVuZGVyZXIuaXNSYW5nZUluUmVuZGVyZWRWaWV3cG9ydCh0LGkpfXJlbW92ZUJsb2NrRnJvbUNhY2hlKGUpe2UmJnRoaXMuZGVzdHJveUJsb2NrKGUpfWNoZWNrUm93Q291bnQoZSx0KXtpZigibnVtYmVyIj09dHlwZW9mIHQmJnQ+PTApdGhpcy5yb3dDb3VudD10LHRoaXMubGFzdFJvd0luZGV4S25vd249ITA7ZWxzZSBpZighdGhpcy5sYXN0Um93SW5kZXhLbm93bil7Y29uc3QgdD0oZS5nZXRJZCgpKzEpKnRoaXMucGFyYW1zLmJsb2NrU2l6ZSt0aGlzLnBhcmFtcy5vdmVyZmxvd1NpemU7dGhpcy5yb3dDb3VudDx0JiYodGhpcy5yb3dDb3VudD10KX19c2V0Um93Q291bnQoZSx0KXt0aGlzLnJvd0NvdW50PWUscy5fLmV4aXN0cyh0KSYmKHRoaXMubGFzdFJvd0luZGV4S25vd249dCksdGhpcy5sYXN0Um93SW5kZXhLbm93bnx8dGhpcy5yb3dDb3VudCV0aGlzLnBhcmFtcy5ibG9ja1NpemU9PTAmJnRoaXMucm93Q291bnQrKyx0aGlzLm9uQ2FjaGVVcGRhdGVkKCl9Zm9yRWFjaE5vZGVEZWVwKGUpe2NvbnN0IHQ9bmV3IHMuTnVtYmVyU2VxdWVuY2U7dGhpcy5nZXRCbG9ja3NJbk9yZGVyKCkuZm9yRWFjaChpPT5pLmZvckVhY2hOb2RlKGUsdCx0aGlzLnJvd0NvdW50KSl9Z2V0QmxvY2tzSW5PcmRlcigpe3JldHVybiBzLl8uZ2V0QWxsVmFsdWVzSW5PYmplY3QodGhpcy5ibG9ja3MpLnNvcnQoKGUsdCk9PmUuZ2V0SWQoKS10LmdldElkKCkpfWRlc3Ryb3lCbG9jayhlKXtkZWxldGUgdGhpcy5ibG9ja3NbZS5nZXRJZCgpXSx0aGlzLmRlc3Ryb3lCZWFuKGUpLHRoaXMuYmxvY2tDb3VudC0tLHRoaXMucGFyYW1zLnJvd05vZGVCbG9ja0xvYWRlci5yZW1vdmVCbG9jayhlKX1vbkNhY2hlVXBkYXRlZCgpe2lmKHRoaXMuaXNBbGl2ZSgpKXt0aGlzLmRlc3Ryb3lBbGxCbG9ja3NQYXN0VmlydHVhbFJvd0NvdW50KCk7Y29uc3QgZT17dHlwZTpzLkV2ZW50cy5FVkVOVF9TVE9SRV9VUERBVEVEfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfX1kZXN0cm95QWxsQmxvY2tzUGFzdFZpcnR1YWxSb3dDb3VudCgpe2NvbnN0IGU9W107dGhpcy5nZXRCbG9ja3NJbk9yZGVyKCkuZm9yRWFjaCh0PT57dC5nZXRJZCgpKnRoaXMucGFyYW1zLmJsb2NrU2l6ZT49dGhpcy5yb3dDb3VudCYmZS5wdXNoKHQpfSksZS5sZW5ndGg+MCYmZS5mb3JFYWNoKGU9PnRoaXMuZGVzdHJveUJsb2NrKGUpKX1wdXJnZUNhY2hlKCl7dGhpcy5nZXRCbG9ja3NJbk9yZGVyKCkuZm9yRWFjaChlPT50aGlzLnJlbW92ZUJsb2NrRnJvbUNhY2hlKGUpKSx0aGlzLmxhc3RSb3dJbmRleEtub3duPSExLDA9PT10aGlzLnJvd0NvdW50JiYodGhpcy5yb3dDb3VudD10aGlzLnBhcmFtcy5pbml0aWFsUm93Q291bnQpLHRoaXMub25DYWNoZVVwZGF0ZWQoKX1nZXRSb3dOb2Rlc0luUmFuZ2UoZSx0KXtjb25zdCBpPVtdO2xldCByPS0xLG89ITE7Y29uc3Qgbj1uZXcgcy5OdW1iZXJTZXF1ZW5jZTtzLl8ubWlzc2luZyhlKSYmKG89ITApO2xldCBhPSExO3RoaXMuZ2V0QmxvY2tzSW5PcmRlcigpLmZvckVhY2gocz0+e2F8fChvJiZyKzEhPT1zLmdldElkKCk/YT0hMDoocj1zLmdldElkKCkscy5mb3JFYWNoTm9kZShzPT57Y29uc3Qgcj1zPT09ZXx8cz09PXQ7KG98fHIpJiZpLnB1c2gocyksciYmKG89IW8pfSxuLHRoaXMucm93Q291bnQpKSl9KTtyZXR1cm4gYXx8bz9bXTppfX1sLk1BWF9FTVBUWV9CTE9DS1NfVE9fS0VFUD0yLG4oW09iamVjdChzLkF1dG93aXJlZCkoInJvd1JlbmRlcmVyIildLGwucHJvdG90eXBlLCJyb3dSZW5kZXJlciIsdm9pZCAwKSxuKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmb2N1c1NlcnZpY2UiKV0sbC5wcm90b3R5cGUsImZvY3VzU2VydmljZSIsdm9pZCAwKSxuKFthKDAsT2JqZWN0KHMuUXVhbGlmaWVyKSgibG9nZ2VyRmFjdG9yeSIpKV0sbC5wcm90b3R5cGUsInNldEJlYW5zIixudWxsKSxuKFtzLlByZURlc3Ryb3ldLGwucHJvdG90eXBlLCJkZXN0cm95QWxsQmxvY2tzIixudWxsKTt2YXIgZD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgYz1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7Z2V0Um93Qm91bmRzKGUpe3JldHVybntyb3dIZWlnaHQ6dGhpcy5yb3dIZWlnaHQscm93VG9wOnRoaXMucm93SGVpZ2h0KmV9fWVuc3VyZVJvd0hlaWdodHNWYWxpZChlLHQsaSxzKXtyZXR1cm4hMX1pbml0KCl7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNSb3dNb2RlbFR5cGUoImluZmluaXRlIikmJih0aGlzLnJvd0hlaWdodD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRSb3dIZWlnaHRBc051bWJlcigpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT50aGlzLmRlc3Ryb3lDYWNoZSgpKSx0aGlzLnZlcmlmeVByb3BzKCkpfXZlcmlmeVByb3BzKCl7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZXhpc3RzKCJpbml0aWFsR3JvdXBPcmRlckNvbXBhcmF0b3IiKSYmcy5fLndhcm5PbmNlKCJpbml0aWFsR3JvdXBPcmRlckNvbXBhcmF0b3IgY2Fubm90IGJlIHVzZWQgd2l0aCBJbmZpbml0ZSBSb3cgTW9kZWwgYXMgc29ydGluZyBpcyBkb25lIG9uIHRoZSBzZXJ2ZXIgc2lkZSIpfXN0YXJ0KCl7dGhpcy5zZXREYXRhc291cmNlKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZGF0YXNvdXJjZSIpKX1kZXN0cm95RGF0YXNvdXJjZSgpe3RoaXMuZGF0YXNvdXJjZSYmKHRoaXMuZ2V0Q29udGV4dCgpLmRlc3Ryb3lCZWFuKHRoaXMuZGF0YXNvdXJjZSksdGhpcy5yb3dSZW5kZXJlci5kYXRhc291cmNlQ2hhbmdlZCgpLHRoaXMuZGF0YXNvdXJjZT1udWxsKX1hZGRFdmVudExpc3RlbmVycygpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0ZJTFRFUl9DSEFOR0VELHRoaXMub25GaWx0ZXJDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX1NPUlRfQ0hBTkdFRCx0aGlzLm9uU29ydENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELHRoaXMub25Db2x1bW5FdmVyeXRoaW5nLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX1NUT1JFX1VQREFURUQsdGhpcy5vbkNhY2hlVXBkYXRlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJkYXRhc291cmNlIiwoKT0+dGhpcy5zZXREYXRhc291cmNlKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZGF0YXNvdXJjZSIpKSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiY2FjaGVCbG9ja1NpemUiLCgpPT50aGlzLnJlc2V0Q2FjaGUoKSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigicm93SGVpZ2h0IiwoKT0+e3RoaXMucm93SGVpZ2h0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFJvd0hlaWdodEFzTnVtYmVyKCksdGhpcy5jYWNoZVBhcmFtcy5yb3dIZWlnaHQ9dGhpcy5yb3dIZWlnaHQsdGhpcy51cGRhdGVSb3dIZWlnaHRzKCl9KX1vbkZpbHRlckNoYW5nZWQoKXt0aGlzLnJlc2V0KCl9b25Tb3J0Q2hhbmdlZCgpe3RoaXMucmVzZXQoKX1vbkNvbHVtbkV2ZXJ5dGhpbmcoKXtsZXQgZTtlPSF0aGlzLmNhY2hlUGFyYW1zfHx0aGlzLmlzU29ydE1vZGVsRGlmZmVyZW50KCksZSYmdGhpcy5yZXNldCgpfWlzU29ydE1vZGVsRGlmZmVyZW50KCl7cmV0dXJuIXMuXy5qc29uRXF1YWxzKHRoaXMuY2FjaGVQYXJhbXMuc29ydE1vZGVsLHRoaXMuc29ydENvbnRyb2xsZXIuZ2V0U29ydE1vZGVsKCkpfWdldFR5cGUoKXtyZXR1cm4iaW5maW5pdGUifXNldERhdGFzb3VyY2UoZSl7dGhpcy5kZXN0cm95RGF0YXNvdXJjZSgpLHRoaXMuZGF0YXNvdXJjZT1lLGUmJnRoaXMucmVzZXQoKX1pc0VtcHR5KCl7cmV0dXJuIXRoaXMuaW5maW5pdGVDYWNoZX1pc1Jvd3NUb1JlbmRlcigpe3JldHVybiEhdGhpcy5pbmZpbml0ZUNhY2hlfWdldE5vZGVzSW5SYW5nZUZvclNlbGVjdGlvbihlLHQpe3JldHVybiB0aGlzLmluZmluaXRlQ2FjaGU/dGhpcy5pbmZpbml0ZUNhY2hlLmdldFJvd05vZGVzSW5SYW5nZShlLHQpOltdfXJlc2V0KCl7aWYoIXRoaXMuZGF0YXNvdXJjZSlyZXR1cm47bnVsbCE9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soImdldFJvd0lkIil8fHRoaXMuc2VsZWN0aW9uU2VydmljZS5yZXNldCgicm93RGF0YUNoYW5nZWQiKSx0aGlzLnJlc2V0Q2FjaGUoKX1jcmVhdGVNb2RlbFVwZGF0ZWRFdmVudCgpe3JldHVybnt0eXBlOnMuRXZlbnRzLkVWRU5UX01PREVMX1VQREFURUQsbmV3UGFnZTohMSxuZXdQYWdlU2l6ZTohMSxuZXdEYXRhOiExLGtlZXBSZW5kZXJlZFJvd3M6ITAsYW5pbWF0ZTohMX19cmVzZXRDYWNoZSgpe3RoaXMuZGVzdHJveUNhY2hlKCksdGhpcy5jYWNoZVBhcmFtcz17ZGF0YXNvdXJjZTp0aGlzLmRhdGFzb3VyY2UsZmlsdGVyTW9kZWw6dGhpcy5maWx0ZXJNYW5hZ2VyLmdldEZpbHRlck1vZGVsKCksc29ydE1vZGVsOnRoaXMuc29ydENvbnRyb2xsZXIuZ2V0U29ydE1vZGVsKCkscm93Tm9kZUJsb2NrTG9hZGVyOnRoaXMucm93Tm9kZUJsb2NrTG9hZGVyLGluaXRpYWxSb3dDb3VudDp0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImluZmluaXRlSW5pdGlhbFJvd0NvdW50IiksbWF4QmxvY2tzSW5DYWNoZTp0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoIm1heEJsb2Nrc0luQ2FjaGUiKSxyb3dIZWlnaHQ6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0QXNOdW1iZXIoKSxvdmVyZmxvd1NpemU6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjYWNoZU92ZXJmbG93U2l6ZSIpLGJsb2NrU2l6ZTp0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNhY2hlQmxvY2tTaXplIiksbGFzdEFjY2Vzc2VkU2VxdWVuY2U6bmV3IHMuTnVtYmVyU2VxdWVuY2V9LHRoaXMuaW5maW5pdGVDYWNoZT10aGlzLmNyZWF0ZUJlYW4obmV3IGwodGhpcy5jYWNoZVBhcmFtcykpLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnRPbmNlKHt0eXBlOnMuRXZlbnRzLkVWRU5UX1JPV19DT1VOVF9SRUFEWX0pO2NvbnN0IGU9dGhpcy5jcmVhdGVNb2RlbFVwZGF0ZWRFdmVudCgpO3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9dXBkYXRlUm93SGVpZ2h0cygpe3RoaXMuZm9yRWFjaE5vZGUoZT0+e2Uuc2V0Um93SGVpZ2h0KHRoaXMucm93SGVpZ2h0KSxlLnNldFJvd1RvcCh0aGlzLnJvd0hlaWdodCplLnJvd0luZGV4KX0pO2NvbnN0IGU9dGhpcy5jcmVhdGVNb2RlbFVwZGF0ZWRFdmVudCgpO3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9ZGVzdHJveUNhY2hlKCl7dGhpcy5pbmZpbml0ZUNhY2hlJiYodGhpcy5pbmZpbml0ZUNhY2hlPXRoaXMuZGVzdHJveUJlYW4odGhpcy5pbmZpbml0ZUNhY2hlKSl9b25DYWNoZVVwZGF0ZWQoKXtjb25zdCBlPXRoaXMuY3JlYXRlTW9kZWxVcGRhdGVkRXZlbnQoKTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfWdldFJvdyhlKXtpZih0aGlzLmluZmluaXRlQ2FjaGUmJiEoZT49dGhpcy5pbmZpbml0ZUNhY2hlLmdldFJvd0NvdW50KCkpKXJldHVybiB0aGlzLmluZmluaXRlQ2FjaGUuZ2V0Um93KGUpfWdldFJvd05vZGUoZSl7bGV0IHQ7cmV0dXJuIHRoaXMuZm9yRWFjaE5vZGUoaT0+e2kuaWQ9PT1lJiYodD1pKX0pLHR9Zm9yRWFjaE5vZGUoZSl7dGhpcy5pbmZpbml0ZUNhY2hlJiZ0aGlzLmluZmluaXRlQ2FjaGUuZm9yRWFjaE5vZGVEZWVwKGUpfWdldFRvcExldmVsUm93Q291bnQoKXtyZXR1cm4gdGhpcy5nZXRSb3dDb3VudCgpfWdldFRvcExldmVsUm93RGlzcGxheWVkSW5kZXgoZSl7cmV0dXJuIGV9Z2V0Um93SW5kZXhBdFBpeGVsKGUpe2lmKDAhPT10aGlzLnJvd0hlaWdodCl7Y29uc3QgdD1NYXRoLmZsb29yKGUvdGhpcy5yb3dIZWlnaHQpLGk9dGhpcy5nZXRSb3dDb3VudCgpLTE7cmV0dXJuIHQ+aT9pOnR9cmV0dXJuIDB9Z2V0Um93Q291bnQoKXtyZXR1cm4gdGhpcy5pbmZpbml0ZUNhY2hlP3RoaXMuaW5maW5pdGVDYWNoZS5nZXRSb3dDb3VudCgpOjB9aXNSb3dQcmVzZW50KGUpe3JldHVybiEhdGhpcy5nZXRSb3dOb2RlKGUuaWQpfXJlZnJlc2hDYWNoZSgpe3RoaXMuaW5maW5pdGVDYWNoZSYmdGhpcy5pbmZpbml0ZUNhY2hlLnJlZnJlc2hDYWNoZSgpfXB1cmdlQ2FjaGUoKXt0aGlzLmluZmluaXRlQ2FjaGUmJnRoaXMuaW5maW5pdGVDYWNoZS5wdXJnZUNhY2hlKCl9aXNMYXN0Um93SW5kZXhLbm93bigpe3JldHVybiEhdGhpcy5pbmZpbml0ZUNhY2hlJiZ0aGlzLmluZmluaXRlQ2FjaGUuaXNMYXN0Um93SW5kZXhLbm93bigpfXNldFJvd0NvdW50KGUsdCl7dGhpcy5pbmZpbml0ZUNhY2hlJiZ0aGlzLmluZmluaXRlQ2FjaGUuc2V0Um93Q291bnQoZSx0KX19O2QoW09iamVjdChzLkF1dG93aXJlZCkoImZpbHRlck1hbmFnZXIiKV0sYy5wcm90b3R5cGUsImZpbHRlck1hbmFnZXIiLHZvaWQgMCksZChbT2JqZWN0KHMuQXV0b3dpcmVkKSgic29ydENvbnRyb2xsZXIiKV0sYy5wcm90b3R5cGUsInNvcnRDb250cm9sbGVyIix2b2lkIDApLGQoW09iamVjdChzLkF1dG93aXJlZCkoInNlbGVjdGlvblNlcnZpY2UiKV0sYy5wcm90b3R5cGUsInNlbGVjdGlvblNlcnZpY2UiLHZvaWQgMCksZChbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93UmVuZGVyZXIiKV0sYy5wcm90b3R5cGUsInJvd1JlbmRlcmVyIix2b2lkIDApLGQoW09iamVjdChzLkF1dG93aXJlZCkoInJvd05vZGVCbG9ja0xvYWRlciIpXSxjLnByb3RvdHlwZSwicm93Tm9kZUJsb2NrTG9hZGVyIix2b2lkIDApLGQoW3MuUG9zdENvbnN0cnVjdF0sYy5wcm90b3R5cGUsImluaXQiLG51bGwpLGQoW3MuUHJlRGVzdHJveV0sYy5wcm90b3R5cGUsImRlc3Ryb3lEYXRhc291cmNlIixudWxsKSxjPWQoW09iamVjdChzLkJlYW4pKCJyb3dNb2RlbCIpXSxjKTtjb25zdCBoPXt2ZXJzaW9uOiIzMS4xLjEiLG1vZHVsZU5hbWU6cy5Nb2R1bGVOYW1lcy5JbmZpbml0ZVJvd01vZGVsTW9kdWxlLHJvd01vZGVsOiJpbmZpbml0ZSIsYmVhbnM6W2NdfTtpLmQodCwiSW5maW5pdGVSb3dNb2RlbE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGh9KSl9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpO3ZhciBzPWkoMCkscj1pKDMpLG89ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgbiBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoJzxkaXYgY2xhc3M9ImFnLXRvb2wtcGFuZWwtaG9yaXpvbnRhbC1yZXNpemUiPjwvZGl2PicpLHRoaXMubWluV2lkdGg9MTAwLHRoaXMubWF4V2lkdGg9bnVsbH1zZXRFbGVtZW50VG9SZXNpemUoZSl7dGhpcy5lbGVtZW50VG9SZXNpemU9ZX1wb3N0Q29uc3RydWN0KCl7Y29uc3QgZT10aGlzLmhvcml6b250YWxSZXNpemVTZXJ2aWNlLmFkZFJlc2l6ZUJhcih7ZVJlc2l6ZUJhcjp0aGlzLmdldEd1aSgpLGRyYWdTdGFydFBpeGVsczoxLG9uUmVzaXplU3RhcnQ6dGhpcy5vblJlc2l6ZVN0YXJ0LmJpbmQodGhpcyksb25SZXNpemluZzp0aGlzLm9uUmVzaXppbmcuYmluZCh0aGlzKSxvblJlc2l6ZUVuZDp0aGlzLm9uUmVzaXplRW5kLmJpbmQodGhpcyl9KTt0aGlzLmFkZERlc3Ryb3lGdW5jKGUpLHRoaXMuc2V0SW52ZXJ0ZWQodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKSl9ZGlzcGF0Y2hSZXNpemVFdmVudChlLHQsaSl7Y29uc3Qgcj17dHlwZTpzLkV2ZW50cy5FVkVOVF9UT09MX1BBTkVMX1NJWkVfQ0hBTkdFRCx3aWR0aDppLHN0YXJ0ZWQ6ZSxlbmRlZDp0fTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHIpfW9uUmVzaXplU3RhcnQoKXt0aGlzLnN0YXJ0aW5nV2lkdGg9dGhpcy5lbGVtZW50VG9SZXNpemUub2Zmc2V0V2lkdGgsdGhpcy5kaXNwYXRjaFJlc2l6ZUV2ZW50KCEwLCExLHRoaXMuc3RhcnRpbmdXaWR0aCl9b25SZXNpemVFbmQoZSl7cmV0dXJuIHRoaXMub25SZXNpemluZyhlLCEwKX1vblJlc2l6aW5nKGUsdD0hMSl7Y29uc3QgaT10aGlzLmludmVydGVkPy0xOjE7bGV0IHM9TWF0aC5tYXgodGhpcy5taW5XaWR0aCxNYXRoLmZsb29yKHRoaXMuc3RhcnRpbmdXaWR0aC1lKmkpKTtudWxsIT10aGlzLm1heFdpZHRoJiYocz1NYXRoLm1pbih0aGlzLm1heFdpZHRoLHMpKSx0aGlzLmVsZW1lbnRUb1Jlc2l6ZS5zdHlsZS53aWR0aD1zKyJweCIsdGhpcy5kaXNwYXRjaFJlc2l6ZUV2ZW50KCExLHQscyl9c2V0SW52ZXJ0ZWQoZSl7dGhpcy5pbnZlcnRlZD1lfXNldE1heFdpZHRoKGUpe3RoaXMubWF4V2lkdGg9ZX1zZXRNaW5XaWR0aChlKXt0aGlzLm1pbldpZHRoPW51bGwhPWU/ZToxMDB9fW8oW09iamVjdChzLkF1dG93aXJlZCkoImhvcml6b250YWxSZXNpemVTZXJ2aWNlIildLG4ucHJvdG90eXBlLCJob3Jpem9udGFsUmVzaXplU2VydmljZSIsdm9pZCAwKSxvKFtzLlBvc3RDb25zdHJ1Y3RdLG4ucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgYT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBsIGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnRvb2xQYW5lbERlZj1lfWdldFRvb2xQYW5lbElkKCl7cmV0dXJuIHRoaXMudG9vbFBhbmVsRGVmLmlkfXBvc3RDb25zdHJ1Y3QoKXtjb25zdCBlPXRoaXMuY3JlYXRlVGVtcGxhdGUoKTt0aGlzLnNldFRlbXBsYXRlKGUpLHRoaXMuc2V0TGFiZWwoKSx0aGlzLnNldEljb24oKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVUb2dnbGVCdXR0b24sImNsaWNrIix0aGlzLm9uQnV0dG9uUHJlc3NlZC5iaW5kKHRoaXMpKSx0aGlzLmVUb2dnbGVCdXR0b24uc2V0QXR0cmlidXRlKCJpZCIsYGFnLSR7dGhpcy5nZXRDb21wSWQoKX0tYnV0dG9uYCl9Y3JlYXRlVGVtcGxhdGUoKXtyZXR1cm4nPGRpdiBjbGFzcz0iYWctc2lkZS1idXR0b24iIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIHJlZj0iZVRvZ2dsZUJ1dHRvbiIgdGFiaW5kZXg9Ii0xIiByb2xlPSJ0YWIiIGFyaWEtZXhwYW5kZWQ9ImZhbHNlIiBjbGFzcz0iYWctYnV0dG9uIGFnLXNpZGUtYnV0dG9uLWJ1dHRvbiI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlSWNvbldyYXBwZXIiIGNsYXNzPSJhZy1zaWRlLWJ1dHRvbi1pY29uLXdyYXBwZXIiIGFyaWEtaGlkZGVuPSJ0cnVlIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gcmVmID0iZUxhYmVsIiBjbGFzcz0iYWctc2lkZS1idXR0b24tbGFiZWwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2Pid9c2V0TGFiZWwoKXtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLHQ9dGhpcy50b29sUGFuZWxEZWYsaT1lKHQubGFiZWxLZXksdC5sYWJlbERlZmF1bHQpO3RoaXMuZUxhYmVsLmlubmVyVGV4dD1pfXNldEljb24oKXt0aGlzLmVJY29uV3JhcHBlci5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyYmVnaW4iLHMuXy5jcmVhdGVJY29uTm9TcGFuKHRoaXMudG9vbFBhbmVsRGVmLmljb25LZXksdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UpKX1vbkJ1dHRvblByZXNzZWQoKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6bC5FVkVOVF9UT0dHTEVfQlVUVE9OX0NMSUNLRUR9KX1zZXRTZWxlY3RlZChlKXt0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXNlbGVjdGVkIixlKSxzLl8uc2V0QXJpYUV4cGFuZGVkKHRoaXMuZVRvZ2dsZUJ1dHRvbixlKX1nZXRCdXR0b25FbGVtZW50KCl7cmV0dXJuIHRoaXMuZVRvZ2dsZUJ1dHRvbn19bC5FVkVOVF9UT0dHTEVfQlVUVE9OX0NMSUNLRUQ9InRvZ2dsZUJ1dHRvbkNsaWNrZWQiLGEoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZVRvZ2dsZUJ1dHRvbiIpXSxsLnByb3RvdHlwZSwiZVRvZ2dsZUJ1dHRvbiIsdm9pZCAwKSxhKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVJY29uV3JhcHBlciIpXSxsLnByb3RvdHlwZSwiZUljb25XcmFwcGVyIix2b2lkIDApLGEoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUxhYmVsIildLGwucHJvdG90eXBlLCJlTGFiZWwiLHZvaWQgMCksYShbcy5Qb3N0Q29uc3RydWN0XSxsLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIGQ9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgYyBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoYy5URU1QTEFURSksdGhpcy5idXR0b25Db21wcz1bXX1wb3N0Q29uc3RydWN0KCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5nZXRGb2N1c2FibGVFbGVtZW50KCksImtleWRvd24iLHRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpKX1oYW5kbGVLZXlEb3duKGUpe2lmKGUua2V5IT09cy5LZXlDb2RlLlRBQnx8IWUuc2hpZnRLZXkpcmV0dXJuO2NvbnN0IHQ9cy5fLmxhc3QodGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCkpO3RoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzR3JpZFZpZXcodCwhMCkmJmUucHJldmVudERlZmF1bHQoKX1zZXRBY3RpdmVCdXR0b24oZSl7dGhpcy5idXR0b25Db21wcy5mb3JFYWNoKHQ9Pnt0LnNldFNlbGVjdGVkKGU9PT10LmdldFRvb2xQYW5lbElkKCkpfSl9YWRkQnV0dG9uQ29tcChlKXtjb25zdCB0PXRoaXMuY3JlYXRlQmVhbihuZXcgbChlKSk7cmV0dXJuIHRoaXMuYnV0dG9uQ29tcHMucHVzaCh0KSx0aGlzLmFwcGVuZENoaWxkKHQpLHQuYWRkRXZlbnRMaXN0ZW5lcihsLkVWRU5UX1RPR0dMRV9CVVRUT05fQ0xJQ0tFRCwoKT0+e3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpjLkVWRU5UX1NJREVfQkFSX0JVVFRPTl9DTElDS0VELHRvb2xQYW5lbElkOmUuaWR9KX0pLHR9Y2xlYXJCdXR0b25zKCl7dGhpcy5idXR0b25Db21wcz10aGlzLmRlc3Ryb3lCZWFucyh0aGlzLmJ1dHRvbkNvbXBzKSxzLl8uY2xlYXJFbGVtZW50KHRoaXMuZ2V0R3VpKCkpfX1jLkVWRU5UX1NJREVfQkFSX0JVVFRPTl9DTElDS0VEPSJzaWRlQmFyQnV0dG9uQ2xpY2tlZCIsYy5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctc2lkZS1idXR0b25zIiByb2xlPSJ0YWJsaXN0Ij48L2Rpdj4nLGQoW09iamVjdChzLkF1dG93aXJlZCkoImZvY3VzU2VydmljZSIpXSxjLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLGQoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLGMucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxkKFtzLlBvc3RDb25zdHJ1Y3RdLGMucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxkKFtzLlByZURlc3Ryb3ldLGMucHJvdG90eXBlLCJjbGVhckJ1dHRvbnMiLG51bGwpO2NsYXNzIGh7c3RhdGljIHBhcnNlKGUpe2lmKCFlKXJldHVybjtpZighMD09PWUpcmV0dXJue3Rvb2xQYW5lbHM6W2guREVGQVVMVF9DT0xVTU5fQ09NUCxoLkRFRkFVTFRfRklMVEVSX0NPTVBdLGRlZmF1bHRUb29sUGFuZWw6ImNvbHVtbnMifTtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJuIGgucGFyc2UoW2VdKTtpZihBcnJheS5pc0FycmF5KGUpKXtjb25zdCB0PVtdO2lmKGUuZm9yRWFjaChlPT57Y29uc3QgaT1oLkRFRkFVTFRfQllfS0VZW2VdO2k/dC5wdXNoKGkpOmNvbnNvbGUud2FybihgQUcgR3JpZDogdGhlIGtleSAke2V9IGlzIG5vdCBhIHZhbGlkIGtleSBmb3Igc3BlY2lmeWluZyBhIHRvb2wgcGFuZWwsIHZhbGlkIGtleXMgYXJlOiAke09iamVjdC5rZXlzKGguREVGQVVMVF9CWV9LRVkpLmpvaW4oIiwiKX1gKX0pLDA9PT10Lmxlbmd0aClyZXR1cm47cmV0dXJue3Rvb2xQYW5lbHM6dCxkZWZhdWx0VG9vbFBhbmVsOnRbMF0uaWR9fXJldHVybnt0b29sUGFuZWxzOmgucGFyc2VDb21wb25lbnRzKGUudG9vbFBhbmVscyksZGVmYXVsdFRvb2xQYW5lbDplLmRlZmF1bHRUb29sUGFuZWwsaGlkZGVuQnlEZWZhdWx0OmUuaGlkZGVuQnlEZWZhdWx0LHBvc2l0aW9uOmUucG9zaXRpb259fXN0YXRpYyBwYXJzZUNvbXBvbmVudHMoZSl7Y29uc3QgdD1bXTtyZXR1cm4gZT8oZS5mb3JFYWNoKGU9PntsZXQgaT1udWxsO2lmKCJzdHJpbmciPT10eXBlb2YgZSl7Y29uc3QgdD1oLkRFRkFVTFRfQllfS0VZW2VdO2lmKCF0KXJldHVybiB2b2lkIGNvbnNvbGUud2FybihgQUcgR3JpZDogdGhlIGtleSAke2V9IGlzIG5vdCBhIHZhbGlkIGtleSBmb3Igc3BlY2lmeWluZyBhIHRvb2wgcGFuZWwsIHZhbGlkIGtleXMgYXJlOiAke09iamVjdC5rZXlzKGguREVGQVVMVF9CWV9LRVkpLmpvaW4oIiwiKX1gKTtpPXR9ZWxzZSBpPWU7dC5wdXNoKGkpfSksdCk6dH19aC5ERUZBVUxUX0NPTFVNTl9DT01QPXtpZDoiY29sdW1ucyIsbGFiZWxEZWZhdWx0OiJDb2x1bW5zIixsYWJlbEtleToiY29sdW1ucyIsaWNvbktleToiY29sdW1ucyIsdG9vbFBhbmVsOiJhZ0NvbHVtbnNUb29sUGFuZWwifSxoLkRFRkFVTFRfRklMVEVSX0NPTVA9e2lkOiJmaWx0ZXJzIixsYWJlbERlZmF1bHQ6IkZpbHRlcnMiLGxhYmVsS2V5OiJmaWx0ZXJzIixpY29uS2V5OiJmaWx0ZXIiLHRvb2xQYW5lbDoiYWdGaWx0ZXJzVG9vbFBhbmVsIn0saC5ERUZBVUxUX0JZX0tFWT17Y29sdW1uczpoLkRFRkFVTFRfQ09MVU1OX0NPTVAsZmlsdGVyczpoLkRFRkFVTFRfRklMVEVSX0NPTVB9O3ZhciB1PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIHAgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKHAuVEVNUExBVEUpfXNldHVwUmVzaXplKCl7Y29uc3QgZT10aGlzLmdldEd1aSgpLHQ9dGhpcy5yZXNpemVCYXI9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgbik7ZS5zZXRBdHRyaWJ1dGUoImlkIiwiYWctIit0aGlzLmdldENvbXBJZCgpKSx0LnNldEVsZW1lbnRUb1Jlc2l6ZShlKSx0aGlzLmFwcGVuZENoaWxkKHQpfWdldFRvb2xQYW5lbElkKCl7cmV0dXJuIHRoaXMudG9vbFBhbmVsSWR9c2V0VG9vbFBhbmVsRGVmKGUsdCl7Y29uc3R7aWQ6aSxtaW5XaWR0aDpzLG1heFdpZHRoOnIsd2lkdGg6b309ZTt0aGlzLnRvb2xQYW5lbElkPWksdGhpcy53aWR0aD1vO2NvbnN0IG49dGhpcy51c2VyQ29tcG9uZW50RmFjdG9yeS5nZXRUb29sUGFuZWxDb21wRGV0YWlscyhlLHQpLGE9bi5uZXdBZ1N0YWNrSW5zdGFuY2UoKTt0aGlzLnBhcmFtcz1uLnBhcmFtcyxudWxsIT1hPyhhLnRoZW4odGhpcy5zZXRUb29sUGFuZWxDb21wb25lbnQuYmluZCh0aGlzKSksbnVsbCE9cyYmdGhpcy5yZXNpemVCYXIuc2V0TWluV2lkdGgocyksbnVsbCE9ciYmdGhpcy5yZXNpemVCYXIuc2V0TWF4V2lkdGgocikpOmNvbnNvbGUud2FybihgQUcgR3JpZDogZXJyb3IgcHJvY2Vzc2luZyB0b29sIHBhbmVsIGNvbXBvbmVudCAke2l9LiBZb3UgbmVlZCB0byBzcGVjaWZ5ICd0b29sUGFuZWwnYCl9c2V0VG9vbFBhbmVsQ29tcG9uZW50KGUpe3RoaXMudG9vbFBhbmVsQ29tcEluc3RhbmNlPWUsdGhpcy5hcHBlbmRDaGlsZChlLmdldEd1aSgpKSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT57dGhpcy5kZXN0cm95QmVhbihlKX0pLHRoaXMud2lkdGgmJih0aGlzLmdldEd1aSgpLnN0eWxlLndpZHRoPXRoaXMud2lkdGgrInB4Iil9Z2V0VG9vbFBhbmVsSW5zdGFuY2UoKXtyZXR1cm4gdGhpcy50b29sUGFuZWxDb21wSW5zdGFuY2V9c2V0UmVzaXplclNpemVyU2lkZShlKXtjb25zdCB0PSJsZWZ0Ij09PWUsaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpP3Q6IXQ7dGhpcy5yZXNpemVCYXIuc2V0SW52ZXJ0ZWQoaSl9cmVmcmVzaCgpe3RoaXMudG9vbFBhbmVsQ29tcEluc3RhbmNlLnJlZnJlc2godGhpcy5wYXJhbXMpfX1wLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy10b29sLXBhbmVsLXdyYXBwZXIiIHJvbGU9InRhYnBhbmVsIi8+Jyx1KFtPYmplY3Qocy5BdXRvd2lyZWQpKCJ1c2VyQ29tcG9uZW50RmFjdG9yeSIpXSxwLnByb3RvdHlwZSwidXNlckNvbXBvbmVudEZhY3RvcnkiLHZvaWQgMCksdShbcy5Qb3N0Q29uc3RydWN0XSxwLnByb3RvdHlwZSwic2V0dXBSZXNpemUiLG51bGwpO3ZhciBnPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIG0gZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKG0uVEVNUExBVEUpLHRoaXMudG9vbFBhbmVsV3JhcHBlcnM9W119cG9zdENvbnN0cnVjdCgpe3ZhciBlO3RoaXMuc2lkZUJhckJ1dHRvbnNDb21wLmFkZEV2ZW50TGlzdGVuZXIoYy5FVkVOVF9TSURFX0JBUl9CVVRUT05fQ0xJQ0tFRCx0aGlzLm9uVG9vbFBhbmVsQnV0dG9uQ2xpY2tlZC5iaW5kKHRoaXMpKTtjb25zdHtzaWRlQmFyOnR9PW51bGwhPT0oZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImluaXRpYWxTdGF0ZSIpKSYmdm9pZCAwIT09ZT9lOnt9O3RoaXMuc2V0U2lkZUJhckRlZih7c2lkZUJhckRlZjpoLnBhcnNlKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic2lkZUJhciIpKSxzaWRlQmFyU3RhdGU6dH0pLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoInNpZGVCYXIiLHRoaXMub25TaWRlQmFyVXBkYXRlZC5iaW5kKHRoaXMpKSx0aGlzLnNpZGVCYXJTZXJ2aWNlLnJlZ2lzdGVyU2lkZUJhckNvbXAodGhpcyksdGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5NYW5hZ2VkRm9jdXNGZWF0dXJlKHRoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLHtvblRhYktleURvd246dGhpcy5vblRhYktleURvd24uYmluZCh0aGlzKSxoYW5kbGVLZXlEb3duOnRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpfSkpfW9uVGFiS2V5RG93bihlKXtpZihlLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuO2NvbnN0e2ZvY3VzU2VydmljZTp0LHNpZGVCYXJCdXR0b25zQ29tcDppfT10aGlzLHM9dGhpcy5nZXRHdWkoKSxyPWkuZ2V0R3VpKCksbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb2N1bWVudCgpLmFjdGl2ZUVsZW1lbnQsbj1zLnF1ZXJ5U2VsZWN0b3IoIi5hZy10b29sLXBhbmVsLXdyYXBwZXI6bm90KC5hZy1oaWRkZW4pIiksYT1lLnRhcmdldDtpZighbilyZXR1cm47aWYoci5jb250YWlucyhvKSlyZXR1cm4gdm9pZCh0LmZvY3VzSW50byhuLGUuc2hpZnRLZXkpJiZlLnByZXZlbnREZWZhdWx0KCkpO2lmKCFlLnNoaWZ0S2V5KXJldHVybjtsZXQgbD1udWxsO24uY29udGFpbnMobyk/bD10aGlzLmZvY3VzU2VydmljZS5maW5kTmV4dEZvY3VzYWJsZUVsZW1lbnQobix2b2lkIDAsITApOnQuaXNUYXJnZXRVbmRlck1hbmFnZWRDb21wb25lbnQobixhKSYmZS5zaGlmdEtleSYmKGw9dGhpcy5mb2N1c1NlcnZpY2UuZmluZEZvY3VzYWJsZUVsZW1lbnRCZWZvcmVUYWJHdWFyZChuLGEpKSxsfHwobD1yLnF1ZXJ5U2VsZWN0b3IoIi5hZy1zZWxlY3RlZCBidXR0b24iKSksbCYmbCE9PWUudGFyZ2V0JiYoZS5wcmV2ZW50RGVmYXVsdCgpLGwuZm9jdXMoKSl9aGFuZGxlS2V5RG93bihlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCk7aWYoIXRoaXMuc2lkZUJhckJ1dHRvbnNDb21wLmdldEd1aSgpLmNvbnRhaW5zKHQuYWN0aXZlRWxlbWVudCkpcmV0dXJuO2NvbnN0IGk9dGhpcy5zaWRlQmFyQnV0dG9uc0NvbXAuZ2V0R3VpKCkscj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChpLnF1ZXJ5U2VsZWN0b3JBbGwoIi5hZy1zaWRlLWJ1dHRvbiIpKSxvPXQuYWN0aXZlRWxlbWVudCxuPXIuZmluZEluZGV4KGU9PmUuY29udGFpbnMobykpO2xldCBhPW51bGw7c3dpdGNoKGUua2V5KXtjYXNlIHMuS2V5Q29kZS5MRUZUOmNhc2Ugcy5LZXlDb2RlLlVQOmE9TWF0aC5tYXgoMCxuLTEpO2JyZWFrO2Nhc2Ugcy5LZXlDb2RlLlJJR0hUOmNhc2Ugcy5LZXlDb2RlLkRPV046YT1NYXRoLm1pbihuKzEsci5sZW5ndGgtMSl9aWYobnVsbD09PWEpcmV0dXJuO2NvbnN0IGw9clthXS5xdWVyeVNlbGVjdG9yKCJidXR0b24iKTtsJiYobC5mb2N1cygpLGUucHJldmVudERlZmF1bHQoKSl9b25Ub29sUGFuZWxCdXR0b25DbGlja2VkKGUpe2NvbnN0IHQ9ZS50b29sUGFuZWxJZDt0aGlzLm9wZW5lZEl0ZW0oKT09PXQ/dGhpcy5vcGVuVG9vbFBhbmVsKHZvaWQgMCwic2lkZUJhckJ1dHRvbkNsaWNrZWQiKTp0aGlzLm9wZW5Ub29sUGFuZWwodCwic2lkZUJhckJ1dHRvbkNsaWNrZWQiKX1jbGVhckRvd25VaSgpe3RoaXMuc2lkZUJhckJ1dHRvbnNDb21wLmNsZWFyQnV0dG9ucygpLHRoaXMuZGVzdHJveVRvb2xQYW5lbFdyYXBwZXJzKCl9c2V0U2lkZUJhckRlZih7c2lkZUJhckRlZjplLHNpZGVCYXJTdGF0ZTp0LGV4aXN0aW5nVG9vbFBhbmVsV3JhcHBlcnM6aX0pe2lmKHRoaXMuc2V0RGlzcGxheWVkKCExKSx0aGlzLnNpZGVCYXI9ZSx0aGlzLnNpZGVCYXImJnRoaXMuc2lkZUJhci50b29sUGFuZWxzKXtjb25zdCBlPXRoaXMuc2lkZUJhci50b29sUGFuZWxzO2lmKHRoaXMuY3JlYXRlVG9vbFBhbmVsc0FuZFNpZGVCdXR0b25zKGUsdCxpKSwhdGhpcy50b29sUGFuZWxXcmFwcGVycy5sZW5ndGgpcmV0dXJuO2NvbnN0IHM9dD90LnZpc2libGU6IXRoaXMuc2lkZUJhci5oaWRkZW5CeURlZmF1bHQ7aWYodGhpcy5zZXREaXNwbGF5ZWQocyksdGhpcy5zZXRTaWRlQmFyUG9zaXRpb24odD90LnBvc2l0aW9uOnRoaXMuc2lkZUJhci5wb3NpdGlvbikscylpZih0KXtjb25zdHtvcGVuVG9vbFBhbmVsOmV9PXQ7ZSYmdGhpcy5vcGVuVG9vbFBhbmVsKGUsInNpZGVCYXJJbml0aWFsaXppbmciKX1lbHNlIHRoaXMub3BlblRvb2xQYW5lbCh0aGlzLnNpZGVCYXIuZGVmYXVsdFRvb2xQYW5lbCwic2lkZUJhckluaXRpYWxpemluZyIpfX1nZXREZWYoKXtyZXR1cm4gdGhpcy5zaWRlQmFyfXNldFNpZGVCYXJQb3NpdGlvbihlKXtlfHwoZT0icmlnaHQiKSx0aGlzLnBvc2l0aW9uPWU7Y29uc3QgdD0ibGVmdCI9PT1lLGk9dD8icmlnaHQiOiJsZWZ0IjtyZXR1cm4gdGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1zaWRlLWJhci1sZWZ0Iix0KSx0aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXNpZGUtYmFyLXJpZ2h0IiwhdCksdGhpcy50b29sUGFuZWxXcmFwcGVycy5mb3JFYWNoKGU9PntlLnNldFJlc2l6ZXJTaXplclNpZGUoaSl9KSx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHt0eXBlOnMuRXZlbnRzLkVWRU5UX1NJREVfQkFSX1VQREFURUR9KSx0aGlzfXNldERpc3BsYXllZChlLHQpe3N1cGVyLnNldERpc3BsYXllZChlLHQpLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6cy5FdmVudHMuRVZFTlRfU0lERV9CQVJfVVBEQVRFRH0pfWdldFN0YXRlKCl7Y29uc3QgZT17fTtyZXR1cm4gdGhpcy50b29sUGFuZWxXcmFwcGVycy5mb3JFYWNoKHQ9Pnt2YXIgaSxzO2VbdC5nZXRUb29sUGFuZWxJZCgpXT1udWxsPT09KHM9bnVsbD09PShpPXQuZ2V0VG9vbFBhbmVsSW5zdGFuY2UoKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZ2V0U3RhdGUpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmNhbGwoaSl9KSx7dmlzaWJsZTp0aGlzLmlzRGlzcGxheWVkKCkscG9zaXRpb246dGhpcy5wb3NpdGlvbixvcGVuVG9vbFBhbmVsOnRoaXMub3BlbmVkSXRlbSgpLHRvb2xQYW5lbHM6ZX19Y3JlYXRlVG9vbFBhbmVsc0FuZFNpZGVCdXR0b25zKGUsdCxpKXt2YXIgcztmb3IoY29uc3QgciBvZiBlKXRoaXMuY3JlYXRlVG9vbFBhbmVsQW5kU2lkZUJ1dHRvbihyLG51bGw9PT0ocz1udWxsPT10P3ZvaWQgMDp0LnRvb2xQYW5lbHMpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzW3IuaWRdLG51bGw9PWk/dm9pZCAwOmlbci5pZF0pfXZhbGlkYXRlRGVmKGUpe2lmKG51bGw9PWUuaWQpcmV0dXJuIGNvbnNvbGUud2FybigiQUcgR3JpZDogcGxlYXNlIHJldmlldyBhbGwgeW91ciB0b29sUGFuZWwgY29tcG9uZW50cywgaXQgc2VlbXMgbGlrZSBhdCBsZWFzdCBvbmUgb2YgdGhlbSBkb2Vzbid0IGhhdmUgYW4gaWQiKSwhMTtpZigiYWdDb2x1bW5zVG9vbFBhbmVsIj09PWUudG9vbFBhbmVsKXtpZighcy5Nb2R1bGVSZWdpc3RyeS5fX2Fzc2VydFJlZ2lzdGVyZWQocy5Nb2R1bGVOYW1lcy5Db2x1bW5zVG9vbFBhbmVsTW9kdWxlLCJDb2x1bW4gVG9vbCBQYW5lbCIsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKSlyZXR1cm4hMX1pZigiYWdGaWx0ZXJzVG9vbFBhbmVsIj09PWUudG9vbFBhbmVsKXtpZighcy5Nb2R1bGVSZWdpc3RyeS5fX2Fzc2VydFJlZ2lzdGVyZWQocy5Nb2R1bGVOYW1lcy5GaWx0ZXJzVG9vbFBhbmVsTW9kdWxlLCJGaWx0ZXJzIFRvb2wgUGFuZWwiLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSkpcmV0dXJuITE7aWYodGhpcy5maWx0ZXJNYW5hZ2VyLmlzQWR2YW5jZWRGaWx0ZXJFbmFibGVkKCkpcmV0dXJuIHMuXy53YXJuT25jZSgiQWR2YW5jZWQgRmlsdGVyIGRvZXMgbm90IHdvcmsgd2l0aCBGaWx0ZXJzIFRvb2wgUGFuZWwuIEZpbHRlcnMgVG9vbCBQYW5lbCBoYXMgYmVlbiBkaXNhYmxlZC4iKSwhMX1yZXR1cm4hMH1jcmVhdGVUb29sUGFuZWxBbmRTaWRlQnV0dG9uKGUsdCxpKXtpZighdGhpcy52YWxpZGF0ZURlZihlKSlyZXR1cm47Y29uc3Qgcj10aGlzLnNpZGVCYXJCdXR0b25zQ29tcC5hZGRCdXR0b25Db21wKGUpO2xldCBvO2k/bz1pOihvPXRoaXMuZ2V0Q29udGV4dCgpLmNyZWF0ZUJlYW4obmV3IHApLG8uc2V0VG9vbFBhbmVsRGVmKGUse2luaXRpYWxTdGF0ZTp0LG9uU3RhdGVVcGRhdGVkOigpPT50aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHt0eXBlOnMuRXZlbnRzLkVWRU5UX1NJREVfQkFSX1VQREFURUR9KX0pKSxvLnNldERpc3BsYXllZCghMSk7Y29uc3Qgbj1vLmdldEd1aSgpO3RoaXMuYXBwZW5kQ2hpbGQobiksdGhpcy50b29sUGFuZWxXcmFwcGVycy5wdXNoKG8pLHMuXy5zZXRBcmlhQ29udHJvbHMoci5nZXRCdXR0b25FbGVtZW50KCksbil9cmVmcmVzaCgpe3RoaXMudG9vbFBhbmVsV3JhcHBlcnMuZm9yRWFjaChlPT5lLnJlZnJlc2goKSl9b3BlblRvb2xQYW5lbChlLHQ9ImFwaSIpe2NvbnN0IGk9dGhpcy5vcGVuZWRJdGVtKCk7aWYoaT09PWUpcmV0dXJuO3RoaXMudG9vbFBhbmVsV3JhcHBlcnMuZm9yRWFjaCh0PT57Y29uc3QgaT1lPT09dC5nZXRUb29sUGFuZWxJZCgpO3Quc2V0RGlzcGxheWVkKGkpfSk7aSE9PXRoaXMub3BlbmVkSXRlbSgpJiYodGhpcy5zaWRlQmFyQnV0dG9uc0NvbXAuc2V0QWN0aXZlQnV0dG9uKGUpLHRoaXMucmFpc2VUb29sUGFuZWxWaXNpYmxlRXZlbnQoZSxudWxsIT1pP2k6dm9pZCAwLHQpKX1nZXRUb29sUGFuZWxJbnN0YW5jZShlKXtjb25zdCB0PXRoaXMudG9vbFBhbmVsV3JhcHBlcnMuZmlsdGVyKHQ9PnQuZ2V0VG9vbFBhbmVsSWQoKT09PWUpWzBdO2lmKHQpcmV0dXJuIHQuZ2V0VG9vbFBhbmVsSW5zdGFuY2UoKTtjb25zb2xlLndhcm4oIkFHIEdyaWQ6IHVuYWJsZSB0byBsb29rdXAgVG9vbCBQYW5lbCBhcyBpbnZhbGlkIGtleSBzdXBwbGllZDogIitlKX1yYWlzZVRvb2xQYW5lbFZpc2libGVFdmVudChlLHQsaSl7Y29uc3Qgcj0hIWUmJiEhdDtpZih0KXtjb25zdCBlPXt0eXBlOnMuRXZlbnRzLkVWRU5UX1RPT0xfUEFORUxfVklTSUJMRV9DSEFOR0VELHNvdXJjZTppLGtleTp0LHZpc2libGU6ITEsc3dpdGNoaW5nVG9vbFBhbmVsOnJ9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9aWYoZSl7Y29uc3QgdD17dHlwZTpzLkV2ZW50cy5FVkVOVF9UT09MX1BBTkVMX1ZJU0lCTEVfQ0hBTkdFRCxzb3VyY2U6aSxrZXk6ZSx2aXNpYmxlOiEwLHN3aXRjaGluZ1Rvb2xQYW5lbDpyfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfX1jbG9zZShlPSJhcGkiKXt0aGlzLm9wZW5Ub29sUGFuZWwodm9pZCAwLGUpfWlzVG9vbFBhbmVsU2hvd2luZygpe3JldHVybiEhdGhpcy5vcGVuZWRJdGVtKCl9b3BlbmVkSXRlbSgpe2xldCBlPW51bGw7cmV0dXJuIHRoaXMudG9vbFBhbmVsV3JhcHBlcnMuZm9yRWFjaCh0PT57dC5pc0Rpc3BsYXllZCgpJiYoZT10LmdldFRvb2xQYW5lbElkKCkpfSksZX1vblNpZGVCYXJVcGRhdGVkKCl7dmFyIGU7Y29uc3QgdD1oLnBhcnNlKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic2lkZUJhciIpKTtsZXQgaT17fTt0JiZ0aGlzLnNpZGVCYXImJihudWxsPT09KGU9dC50b29sUGFuZWxzKXx8dm9pZCAwPT09ZXx8ZS5mb3JFYWNoKGU9Pnt2YXIgdCxyO2NvbnN0e2lkOm99PWU7aWYoIW8pcmV0dXJuO2NvbnN0IG49bnVsbD09PSh0PXRoaXMuc2lkZUJhci50b29sUGFuZWxzKXx8dm9pZCAwPT09dD92b2lkIDA6dC5maW5kKGU9PmUuaWQ9PT1vKTtpZighbnx8ZS50b29sUGFuZWwhPT1uLnRvb2xQYW5lbClyZXR1cm47Y29uc3QgYT10aGlzLnRvb2xQYW5lbFdyYXBwZXJzLmZpbmQoZT0+ZS5nZXRUb29sUGFuZWxJZCgpPT09byk7aWYoIWEpcmV0dXJuO2NvbnN0IGw9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbnVsbCE9PShyPWUudG9vbFBhbmVsUGFyYW1zKSYmdm9pZCAwIT09cj9yOnt9KSx7b25TdGF0ZVVwZGF0ZWQ6KCk9PnRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6cy5FdmVudHMuRVZFTlRfU0lERV9CQVJfVVBEQVRFRH0pfSkpOyEwPT09YS5nZXRUb29sUGFuZWxJbnN0YW5jZSgpLnJlZnJlc2gobCkmJih0aGlzLnRvb2xQYW5lbFdyYXBwZXJzPXRoaXMudG9vbFBhbmVsV3JhcHBlcnMuZmlsdGVyKGU9PmUhPT1hKSxzLl8ucmVtb3ZlRnJvbVBhcmVudChhLmdldEd1aSgpKSxpW29dPWEpfSkpLHRoaXMuY2xlYXJEb3duVWkoKSx0aGlzLnNldFNpZGVCYXJEZWYoe3NpZGVCYXJEZWY6dCxleGlzdGluZ1Rvb2xQYW5lbFdyYXBwZXJzOml9KX1kZXN0cm95VG9vbFBhbmVsV3JhcHBlcnMoKXt0aGlzLnRvb2xQYW5lbFdyYXBwZXJzLmZvckVhY2goZT0+e3MuXy5yZW1vdmVGcm9tUGFyZW50KGUuZ2V0R3VpKCkpLHRoaXMuZGVzdHJveUJlYW4oZSl9KSx0aGlzLnRvb2xQYW5lbFdyYXBwZXJzLmxlbmd0aD0wfWRlc3Ryb3koKXt0aGlzLmRlc3Ryb3lUb29sUGFuZWxXcmFwcGVycygpLHN1cGVyLmRlc3Ryb3koKX19bS5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctc2lkZS1iYXIgYWctdW5zZWxlY3RhYmxlIj5cbiAgICAgICAgICAgIDxhZy1zaWRlLWJhci1idXR0b25zIHJlZj0ic2lkZUJhckJ1dHRvbnMiPjwvYWctc2lkZS1iYXItYnV0dG9ucz5cbiAgICAgICAgPC9kaXY+JyxnKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmb2N1c1NlcnZpY2UiKV0sbS5wcm90b3R5cGUsImZvY3VzU2VydmljZSIsdm9pZCAwKSxnKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmaWx0ZXJNYW5hZ2VyIildLG0ucHJvdG90eXBlLCJmaWx0ZXJNYW5hZ2VyIix2b2lkIDApLGcoW09iamVjdChzLkF1dG93aXJlZCkoInNpZGVCYXJTZXJ2aWNlIildLG0ucHJvdG90eXBlLCJzaWRlQmFyU2VydmljZSIsdm9pZCAwKSxnKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoInNpZGVCYXJCdXR0b25zIildLG0ucHJvdG90eXBlLCJzaWRlQmFyQnV0dG9uc0NvbXAiLHZvaWQgMCksZyhbcy5Qb3N0Q29uc3RydWN0XSxtLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIGY9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IHY9Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmlzQ29sR3JvdXBEZWY9ZT0+ZSYmdm9pZCAwIT09ZS5jaGlsZHJlbix0aGlzLmdldElkPWU9PnRoaXMuaXNDb2xHcm91cERlZihlKT9lLmdyb3VwSWQ6ZS5jb2xJZH1jcmVhdGVDb2x1bW5UcmVlKGUpe2NvbnN0IHQ9W10saT0oZSxyKT0+e2lmKHRoaXMuaXNDb2xHcm91cERlZihlKSl7Y29uc3QgdD1lLG89dm9pZCAwIT09dC5ncm91cElkP3QuZ3JvdXBJZDp0LmhlYWRlck5hbWUsbj1uZXcgcy5Qcm92aWRlZENvbHVtbkdyb3VwKHQsbywhMSxyKSxhPVtdO3JldHVybiB0LmNoaWxkcmVuLmZvckVhY2goZT0+e2NvbnN0IHQ9aShlLHIrMSk7dCYmYS5wdXNoKHQpfSksbi5zZXRDaGlsZHJlbihhKSxufXtjb25zdCBpPWUscz1pLmNvbElkP2kuY29sSWQ6aS5maWVsZCxyPXRoaXMuY29sdW1uTW9kZWwuZ2V0UHJpbWFyeUNvbHVtbihzKTtyZXR1cm4gcnx8dC5wdXNoKGkpLHJ9fSxyPVtdO3JldHVybiBlLmZvckVhY2goZT0+e2NvbnN0IHQ9aShlLDApO3QmJnIucHVzaCh0KX0pLHQubGVuZ3RoPjAmJmNvbnNvbGUud2FybigiQUcgR3JpZDogdW5hYmxlIHRvIGZpbmQgZ3JpZCBjb2x1bW5zIGZvciB0aGUgc3VwcGxpZWQgY29sRGVmKHMpOiIsdCkscn1zeW5jTGF5b3V0V2l0aEdyaWQoZSl7Y29uc3QgdD10aGlzLmdldExlYWZQYXRoVHJlZXMoKTtlKHRoaXMubWVyZ2VMZWFmUGF0aFRyZWVzKHQpKX1nZXRMZWFmUGF0aFRyZWVzKCl7Y29uc3QgZT0odCxpKT0+e2xldCByO2lmKHQgaW5zdGFuY2VvZiBzLlByb3ZpZGVkQ29sdW1uR3JvdXApaWYodC5pc1BhZGRpbmcoKSlyPWk7ZWxzZXtjb25zdCBlPU9iamVjdC5hc3NpZ24oe30sdC5nZXRDb2xHcm91cERlZigpKTtlLmdyb3VwSWQ9dC5nZXRHcm91cElkKCksZS5jaGlsZHJlbj1baV0scj1lfWVsc2V7Y29uc3QgZT1PYmplY3QuYXNzaWduKHt9LHQuZ2V0Q29sRGVmKCkpO2UuY29sSWQ9dC5nZXRDb2xJZCgpLHI9ZX1jb25zdCBvPXQuZ2V0T3JpZ2luYWxQYXJlbnQoKTtyZXR1cm4gbz9lKG8scik6cn07cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsR3JpZENvbHVtbnMoKS5maWx0ZXIoZT0+e2NvbnN0IHQ9ZS5nZXRDb2xEZWYoKTtyZXR1cm4gZS5pc1ByaW1hcnkoKSYmIXQuc2hvd1Jvd0dyb3VwfSkubWFwKHQ9PmUodCx0LmdldENvbERlZigpKSl9bWVyZ2VMZWFmUGF0aFRyZWVzKGUpe2NvbnN0IHQ9KGUsdCk9PnRoaXMuaXNDb2xHcm91cERlZihlKSYmdGhpcy5pc0NvbEdyb3VwRGVmKHQpJiZ0aGlzLmdldElkKGUpPT09dGhpcy5nZXRJZCh0KSxpPShlLHQpPT57aWYoIXRoaXMuaXNDb2xHcm91cERlZih0KSlyZXR1cm4gZTtjb25zdCBzPWUscj10O2lmKHIuY2hpbGRyZW4mJnIuZ3JvdXBJZCl7aWYodGhpcy5hZGRDaGlsZHJlblRvR3JvdXAocyxyLmdyb3VwSWQsci5jaGlsZHJlblswXSkpcmV0dXJuIHN9cmV0dXJuIHIuY2hpbGRyZW4uZm9yRWFjaChlPT5pKHMsZSkpLHN9LHM9W107Zm9yKGxldCByPTE7cjw9ZS5sZW5ndGg7cisrKXtjb25zdCBvPWVbci0xXSxuPWVbcl07dChvLG4pP2Vbcl09aShvLG4pOnMucHVzaChvKX1yZXR1cm4gc31hZGRDaGlsZHJlblRvR3JvdXAoZSx0LGkpe2lmKCF0aGlzLmlzQ29sR3JvdXBEZWYoZSkpcmV0dXJuITA7Y29uc3Qgcj1lLG89aTtpZigoKGUsdCk9Pntjb25zdCBpPWUuY2hpbGRyZW4ubWFwKHRoaXMuZ2V0SWQpLHI9cy5fLmluY2x1ZGVzKGksdGhpcy5nZXRJZCh0KSksbz1zLl8ubGFzdChlLmNoaWxkcmVuKSxuPW8mJnRoaXMuZ2V0SWQobykhPT10aGlzLmdldElkKHQpO3JldHVybiByJiZufSkocixvKSlyZXR1cm4gci5jaGlsZHJlbi5wdXNoKG8pLCEwO2lmKHIuZ3JvdXBJZD09PXQpe2NvbnN0IGU9ci5jaGlsZHJlbi5tYXAodGhpcy5nZXRJZCk7aWYoIXMuXy5pbmNsdWRlcyhlLHRoaXMuZ2V0SWQobykpKXJldHVybiByLmNoaWxkcmVuLnB1c2gobyksITB9cmV0dXJuIHIuY2hpbGRyZW4uZm9yRWFjaChlPT50aGlzLmFkZENoaWxkcmVuVG9Hcm91cChlLHQsaSkpLCExfX07ZihbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sdi5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLHY9ZihbT2JqZWN0KHMuQmVhbikoInRvb2xQYW5lbENvbERlZlNlcnZpY2UiKV0sdik7dmFyIEM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IHk9Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie3JlZ2lzdGVyU2lkZUJhckNvbXAoZSl7dGhpcy5zaWRlQmFyQ29tcD1lfWdldFNpZGVCYXJDb21wKCl7cmV0dXJuIHRoaXMuc2lkZUJhckNvbXB9fTt5PUMoW09iamVjdChzLkJlYW4pKCJzaWRlQmFyU2VydmljZSIpXSx5KTtjb25zdCBTPXt2ZXJzaW9uOiIzMS4xLjEiLG1vZHVsZU5hbWU6cy5Nb2R1bGVOYW1lcy5TaWRlQmFyTW9kdWxlLGJlYW5zOlt2LHldLGFnU3RhY2tDb21wb25lbnRzOlt7Y29tcG9uZW50TmFtZToiQWdIb3Jpem9udGFsUmVzaXplIixjb21wb25lbnRDbGFzczpufSx7Y29tcG9uZW50TmFtZToiQWdTaWRlQmFyIixjb21wb25lbnRDbGFzczptfSx7Y29tcG9uZW50TmFtZToiQWdTaWRlQmFyQnV0dG9ucyIsY29tcG9uZW50Q2xhc3M6Y31dLGRlcGVuZGFudE1vZHVsZXM6W3IuRW50ZXJwcmlzZUNvcmVNb2R1bGVdfTtpLmQodCwiU2lkZUJhck1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFN9KSksaS5kKHQsIlRvb2xQYW5lbENvbERlZlNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiB2fSkpfSxmdW5jdGlvbihlLHQsaSl7InVzZSBzdHJpY3QiO2kucih0KTt2YXIgcyxyPWkoMCksbz1pKDMpLG49ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07IWZ1bmN0aW9uKGUpe2VbZS5FWFBBTkRFRD0wXT0iRVhQQU5ERUQiLGVbZS5DT0xMQVBTRUQ9MV09IkNPTExBUFNFRCIsZVtlLklOREVURVJNSU5BVEU9Ml09IklOREVURVJNSU5BVEUifShzfHwocz17fSkpO2NsYXNzIGEgZXh0ZW5kcyByLkNvbXBvbmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKGEuVEVNUExBVEUpfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmNyZWF0ZUV4cGFuZEljb25zKCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lRXhwYW5kLCJjbGljayIsdGhpcy5vbkV4cGFuZENsaWNrZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lRXhwYW5kLCJrZXlkb3duIixlPT57ZS5rZXk9PT1yLktleUNvZGUuU1BBQ0UmJihlLnByZXZlbnREZWZhdWx0KCksdGhpcy5vbkV4cGFuZENsaWNrZWQoKSl9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVTZWxlY3QuZ2V0SW5wdXRFbGVtZW50KCksImNsaWNrIix0aGlzLm9uU2VsZWN0Q2xpY2tlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJmdW5jdGlvbnNSZWFkT25seSIsKCk9PnRoaXMub25GdW5jdGlvbnNSZWFkT25seVByb3BDaGFuZ2VkKCkpLHRoaXMuZUZpbHRlclRleHRGaWVsZC5zZXRBdXRvQ29tcGxldGUoITEpLm9uVmFsdWVDaGFuZ2UoKCk9PnRoaXMub25GaWx0ZXJUZXh0Q2hhbmdlZCgpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVGaWx0ZXJUZXh0RmllbGQuZ2V0SW5wdXRFbGVtZW50KCksImtleWRvd24iLHRoaXMub25NaW5pRmlsdGVyS2V5RG93bi5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxyLkV2ZW50cy5FVkVOVF9ORVdfQ09MVU1OU19MT0FERUQsdGhpcy5zaG93T3JIaWRlT3B0aW9ucy5iaW5kKHRoaXMpKTtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpO3RoaXMuZVNlbGVjdC5zZXRJbnB1dEFyaWFMYWJlbChlKCJhcmlhQ29sdW1uU2VsZWN0QWxsIiwiVG9nZ2xlIFNlbGVjdCBBbGwgQ29sdW1ucyIpKSx0aGlzLmVGaWx0ZXJUZXh0RmllbGQuc2V0SW5wdXRBcmlhTGFiZWwoZSgiYXJpYUZpbHRlckNvbHVtbnNJbnB1dCIsIkZpbHRlciBDb2x1bW5zIElucHV0IikpLHRoaXMuYWN0aXZhdGVUYWJJbmRleChbdGhpcy5lRXhwYW5kXSl9b25GdW5jdGlvbnNSZWFkT25seVByb3BDaGFuZ2VkKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImZ1bmN0aW9uc1JlYWRPbmx5Iik7dGhpcy5lU2VsZWN0LnNldFJlYWRPbmx5KGUpLHRoaXMuZVNlbGVjdC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jb2x1bW4tc2VsZWN0LWNvbHVtbi1yZWFkb25seSIsZSl9aW5pdChlKXt0aGlzLnBhcmFtcz1lO2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJmdW5jdGlvbnNSZWFkT25seSIpO3RoaXMuZVNlbGVjdC5zZXRSZWFkT25seSh0KSx0aGlzLmVTZWxlY3QuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY29sdW1uLXNlbGVjdC1jb2x1bW4tcmVhZG9ubHkiLHQpLHRoaXMuY29sdW1uTW9kZWwuaXNSZWFkeSgpJiZ0aGlzLnNob3dPckhpZGVPcHRpb25zKCl9Y3JlYXRlRXhwYW5kSWNvbnMoKXt0aGlzLmVFeHBhbmQuYXBwZW5kQ2hpbGQodGhpcy5lRXhwYW5kQ2hlY2tlZD1yLl8uY3JlYXRlSWNvbk5vU3BhbigiY29sdW1uU2VsZWN0T3BlbiIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UpKSx0aGlzLmVFeHBhbmQuYXBwZW5kQ2hpbGQodGhpcy5lRXhwYW5kVW5jaGVja2VkPXIuXy5jcmVhdGVJY29uTm9TcGFuKCJjb2x1bW5TZWxlY3RDbG9zZWQiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKSksdGhpcy5lRXhwYW5kLmFwcGVuZENoaWxkKHRoaXMuZUV4cGFuZEluZGV0ZXJtaW5hdGU9ci5fLmNyZWF0ZUljb25Ob1NwYW4oImNvbHVtblNlbGVjdEluZGV0ZXJtaW5hdGUiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKSksdGhpcy5zZXRFeHBhbmRTdGF0ZShzLkVYUEFOREVEKX1zaG93T3JIaWRlT3B0aW9ucygpe2NvbnN0IGU9IXRoaXMucGFyYW1zLnN1cHByZXNzQ29sdW1uRmlsdGVyLHQ9IXRoaXMucGFyYW1zLnN1cHByZXNzQ29sdW1uU2VsZWN0QWxsLGk9IXRoaXMucGFyYW1zLnN1cHByZXNzQ29sdW1uRXhwYW5kQWxsLHM9dGhpcy5jb2x1bW5Nb2RlbC5pc1ByaW1hcnlDb2x1bW5Hcm91cHNQcmVzZW50KCksbz10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTt0aGlzLmVGaWx0ZXJUZXh0RmllbGQuc2V0SW5wdXRQbGFjZWhvbGRlcihvKCJzZWFyY2hPb28iLCJTZWFyY2guLi4iKSksci5fLnNldERpc3BsYXllZCh0aGlzLmVGaWx0ZXJUZXh0RmllbGQuZ2V0R3VpKCksZSksci5fLnNldERpc3BsYXllZCh0aGlzLmVTZWxlY3QuZ2V0R3VpKCksdCksci5fLnNldERpc3BsYXllZCh0aGlzLmVFeHBhbmQsaSYmcyl9b25GaWx0ZXJUZXh0Q2hhbmdlZCgpe3RoaXMub25GaWx0ZXJUZXh0Q2hhbmdlZERlYm91bmNlZHx8KHRoaXMub25GaWx0ZXJUZXh0Q2hhbmdlZERlYm91bmNlZD1yLl8uZGVib3VuY2UoKCk9Pntjb25zdCBlPXRoaXMuZUZpbHRlclRleHRGaWVsZC5nZXRWYWx1ZSgpO3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZToiZmlsdGVyQ2hhbmdlZCIsZmlsdGVyVGV4dDplfSl9LGEuREVCT1VOQ0VfREVMQVkpKSx0aGlzLm9uRmlsdGVyVGV4dENoYW5nZWREZWJvdW5jZWQoKX1vbk1pbmlGaWx0ZXJLZXlEb3duKGUpe2Uua2V5PT09ci5LZXlDb2RlLkVOVEVSJiZzZXRUaW1lb3V0KCgpPT50aGlzLm9uU2VsZWN0Q2xpY2tlZCgpLGEuREVCT1VOQ0VfREVMQVkpfW9uU2VsZWN0Q2xpY2tlZCgpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTp0aGlzLnNlbGVjdFN0YXRlPyJ1bnNlbGVjdEFsbCI6InNlbGVjdEFsbCJ9KX1vbkV4cGFuZENsaWNrZWQoKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6dGhpcy5leHBhbmRTdGF0ZT09PXMuRVhQQU5ERUQ/ImNvbGxhcHNlQWxsIjoiZXhwYW5kQWxsIn0pfXNldEV4cGFuZFN0YXRlKGUpe3RoaXMuZXhwYW5kU3RhdGU9ZSxyLl8uc2V0RGlzcGxheWVkKHRoaXMuZUV4cGFuZENoZWNrZWQsdGhpcy5leHBhbmRTdGF0ZT09PXMuRVhQQU5ERUQpLHIuXy5zZXREaXNwbGF5ZWQodGhpcy5lRXhwYW5kVW5jaGVja2VkLHRoaXMuZXhwYW5kU3RhdGU9PT1zLkNPTExBUFNFRCksci5fLnNldERpc3BsYXllZCh0aGlzLmVFeHBhbmRJbmRldGVybWluYXRlLHRoaXMuZXhwYW5kU3RhdGU9PT1zLklOREVURVJNSU5BVEUpfXNldFNlbGVjdGlvblN0YXRlKGUpe3RoaXMuc2VsZWN0U3RhdGU9ZSx0aGlzLmVTZWxlY3Quc2V0VmFsdWUodGhpcy5zZWxlY3RTdGF0ZSl9fWEuREVCT1VOQ0VfREVMQVk9MzAwLGEuVEVNUExBVEU9JzxkaXYgY2xhc3M9ImFnLWNvbHVtbi1zZWxlY3QtaGVhZGVyIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgPGRpdiByZWY9ImVFeHBhbmQiIGNsYXNzPSJhZy1jb2x1bW4tc2VsZWN0LWhlYWRlci1pY29uIj48L2Rpdj5cbiAgICAgICAgICAgIDxhZy1jaGVja2JveCByZWY9ImVTZWxlY3QiIGNsYXNzPSJhZy1jb2x1bW4tc2VsZWN0LWhlYWRlci1jaGVja2JveCI+PC9hZy1jaGVja2JveD5cbiAgICAgICAgICAgIDxhZy1pbnB1dC10ZXh0LWZpZWxkIGNsYXNzPSJhZy1jb2x1bW4tc2VsZWN0LWhlYWRlci1maWx0ZXItd3JhcHBlciIgcmVmPSJlRmlsdGVyVGV4dEZpZWxkIj48L2FnLWlucHV0LXRleHQtZmllbGQ+XG4gICAgICAgIDwvZGl2PicsbihbT2JqZWN0KHIuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sYS5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLG4oW09iamVjdChyLlJlZlNlbGVjdG9yKSgiZUV4cGFuZCIpXSxhLnByb3RvdHlwZSwiZUV4cGFuZCIsdm9pZCAwKSxuKFtPYmplY3Qoci5SZWZTZWxlY3RvcikoImVTZWxlY3QiKV0sYS5wcm90b3R5cGUsImVTZWxlY3QiLHZvaWQgMCksbihbT2JqZWN0KHIuUmVmU2VsZWN0b3IpKCJlRmlsdGVyVGV4dEZpZWxkIildLGEucHJvdG90eXBlLCJlRmlsdGVyVGV4dEZpZWxkIix2b2lkIDApLG4oW3IuUG9zdENvbnN0cnVjdF0sYS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO2NsYXNzIGx7Y29uc3RydWN0b3IoZSx0LGkscz0hMSxvKXt0aGlzLmV2ZW50U2VydmljZT1uZXcgci5FdmVudFNlcnZpY2UsdGhpcy5kaXNwbGF5TmFtZT1lLHRoaXMuZGVwdD1pLHRoaXMuZ3JvdXA9cyxzPyh0aGlzLmNvbHVtbkdyb3VwPXQsdGhpcy5leHBhbmRlZD1vLHRoaXMuY2hpbGRyZW49W10pOnRoaXMuY29sdW1uPXR9aXNHcm91cCgpe3JldHVybiB0aGlzLmdyb3VwfWdldERpc3BsYXlOYW1lKCl7cmV0dXJuIHRoaXMuZGlzcGxheU5hbWV9Z2V0Q29sdW1uR3JvdXAoKXtyZXR1cm4gdGhpcy5jb2x1bW5Hcm91cH1nZXRDb2x1bW4oKXtyZXR1cm4gdGhpcy5jb2x1bW59Z2V0RGVwdCgpe3JldHVybiB0aGlzLmRlcHR9aXNFeHBhbmRlZCgpe3JldHVybiEhdGhpcy5leHBhbmRlZH1nZXRDaGlsZHJlbigpe3JldHVybiB0aGlzLmNoaWxkcmVufWlzUGFzc2VzRmlsdGVyKCl7cmV0dXJuIHRoaXMucGFzc2VzRmlsdGVyfXNldEV4cGFuZGVkKGUpe2UhPT10aGlzLmV4cGFuZGVkJiYodGhpcy5leHBhbmRlZD1lLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6bC5FVkVOVF9FWFBBTkRFRF9DSEFOR0VEfSkpfXNldFBhc3Nlc0ZpbHRlcihlKXt0aGlzLnBhc3Nlc0ZpbHRlcj1lfWFkZEV2ZW50TGlzdGVuZXIoZSx0KXt0aGlzLmV2ZW50U2VydmljZS5hZGRFdmVudExpc3RlbmVyKGUsdCl9cmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpe3RoaXMuZXZlbnRTZXJ2aWNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0KX19bC5FVkVOVF9FWFBBTkRFRF9DSEFOR0VEPSJleHBhbmRlZENoYW5nZWQiO3ZhciBkPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGMgZXh0ZW5kcyByLkNvbXBvbmVudHtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoJzxkaXYgY2xhc3M9ImFnLW1lbnUiPjwvZGl2PicpLHRoaXMuY29sdW1uPWUsdGhpcy5tb3VzZUV2ZW50PXQsdGhpcy5wYXJlbnRFbD1pLHRoaXMuZGlzcGxheU5hbWU9bnVsbH1wb3N0Q29uc3RydWN0KCl7aWYodGhpcy5pbml0aWFsaXplUHJvcGVydGllcyh0aGlzLmNvbHVtbiksdGhpcy5idWlsZE1lbnVJdGVtTWFwKCksdGhpcy5jb2x1bW4gaW5zdGFuY2VvZiByLkNvbHVtbj90aGlzLmRpc3BsYXlOYW1lPXRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW4odGhpcy5jb2x1bW4sImNvbHVtblRvb2xQYW5lbCIpOnRoaXMuZGlzcGxheU5hbWU9dGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5TmFtZUZvclByb3ZpZGVkQ29sdW1uR3JvdXAobnVsbCx0aGlzLmNvbHVtbiwiY29sdW1uVG9vbFBhbmVsIiksdGhpcy5pc0FjdGl2ZSgpKXt0aGlzLm1vdXNlRXZlbnQucHJldmVudERlZmF1bHQoKTtjb25zdCBlPXRoaXMuZ2V0TWFwcGVkTWVudUl0ZW1zKCk7aWYoMD09PWUubGVuZ3RoKXJldHVybjt0aGlzLmRpc3BsYXlDb250ZXh0TWVudShlKX19aW5pdGlhbGl6ZVByb3BlcnRpZXMoZSl7ZSBpbnN0YW5jZW9mIHIuUHJvdmlkZWRDb2x1bW5Hcm91cD90aGlzLmNvbHVtbnM9ZS5nZXRMZWFmQ29sdW1ucygpOnRoaXMuY29sdW1ucz1bZV0sdGhpcy5hbGxvd0dyb3VwaW5nPXRoaXMuY29sdW1ucy5zb21lKGU9PmUuaXNQcmltYXJ5KCkmJmUuaXNBbGxvd1Jvd0dyb3VwKCkpLHRoaXMuYWxsb3dWYWx1ZXM9dGhpcy5jb2x1bW5zLnNvbWUoZT0+ZS5pc1ByaW1hcnkoKSYmZS5pc0FsbG93VmFsdWUoKSksdGhpcy5hbGxvd1Bpdm90aW5nPXRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSYmdGhpcy5jb2x1bW5zLnNvbWUoZT0+ZS5pc1ByaW1hcnkoKSYmZS5pc0FsbG93UGl2b3QoKSl9YnVpbGRNZW51SXRlbU1hcCgpe2NvbnN0IGU9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCk7dGhpcy5tZW51SXRlbU1hcD1uZXcgTWFwLHRoaXMubWVudUl0ZW1NYXAuc2V0KCJyb3dHcm91cCIse2FsbG93ZWRGdW5jdGlvbjplPT5lLmlzUHJpbWFyeSgpJiZlLmlzQWxsb3dSb3dHcm91cCgpJiYhdGhpcy5jb2x1bW5Nb2RlbC5pc0NvbHVtbkdyb3VwaW5nTG9ja2VkKGUpLGFjdGl2ZUZ1bmN0aW9uOmU9PmUuaXNSb3dHcm91cEFjdGl2ZSgpLGFjdGl2YXRlTGFiZWw6KCk9PmAke2UoImdyb3VwQnkiLCJHcm91cCBieSIpfSAke3RoaXMuZGlzcGxheU5hbWV9YCxkZWFjdGl2YXRlTGFiZWw6KCk9PmAke2UoInVuZ3JvdXBCeSIsIlVuLUdyb3VwIGJ5Iil9ICR7dGhpcy5kaXNwbGF5TmFtZX1gLGFjdGl2YXRlRnVuY3Rpb246KCk9Pntjb25zdCBlPXRoaXMuY29sdW1uTW9kZWwuZ2V0Um93R3JvdXBDb2x1bW5zKCk7dGhpcy5jb2x1bW5Nb2RlbC5zZXRSb3dHcm91cENvbHVtbnModGhpcy5hZGRDb2x1bW5zVG9MaXN0KGUpLCJ0b29sUGFuZWxVaSIpfSxkZUFjdGl2YXRlRnVuY3Rpb246KCk9Pntjb25zdCBlPXRoaXMuY29sdW1uTW9kZWwuZ2V0Um93R3JvdXBDb2x1bW5zKCk7dGhpcy5jb2x1bW5Nb2RlbC5zZXRSb3dHcm91cENvbHVtbnModGhpcy5yZW1vdmVDb2x1bW5zRnJvbUxpc3QoZSksInRvb2xQYW5lbFVpIil9LGFkZEljb246Im1lbnVBZGRSb3dHcm91cCIscmVtb3ZlSWNvbjoibWVudVJlbW92ZVJvd0dyb3VwIn0pLHRoaXMubWVudUl0ZW1NYXAuc2V0KCJ2YWx1ZSIse2FsbG93ZWRGdW5jdGlvbjplPT5lLmlzUHJpbWFyeSgpJiZlLmlzQWxsb3dWYWx1ZSgpLGFjdGl2ZUZ1bmN0aW9uOmU9PmUuaXNWYWx1ZUFjdGl2ZSgpLGFjdGl2YXRlTGFiZWw6KCk9PmUoImFkZFRvVmFsdWVzIixgQWRkICR7dGhpcy5kaXNwbGF5TmFtZX0gdG8gdmFsdWVzYCxbdGhpcy5kaXNwbGF5TmFtZV0pLGRlYWN0aXZhdGVMYWJlbDooKT0+ZSgicmVtb3ZlRnJvbVZhbHVlcyIsYFJlbW92ZSAke3RoaXMuZGlzcGxheU5hbWV9IGZyb20gdmFsdWVzYCxbdGhpcy5kaXNwbGF5TmFtZV0pLGFjdGl2YXRlRnVuY3Rpb246KCk9Pntjb25zdCBlPXRoaXMuY29sdW1uTW9kZWwuZ2V0VmFsdWVDb2x1bW5zKCk7dGhpcy5jb2x1bW5Nb2RlbC5zZXRWYWx1ZUNvbHVtbnModGhpcy5hZGRDb2x1bW5zVG9MaXN0KGUpLCJ0b29sUGFuZWxVaSIpfSxkZUFjdGl2YXRlRnVuY3Rpb246KCk9Pntjb25zdCBlPXRoaXMuY29sdW1uTW9kZWwuZ2V0VmFsdWVDb2x1bW5zKCk7dGhpcy5jb2x1bW5Nb2RlbC5zZXRWYWx1ZUNvbHVtbnModGhpcy5yZW1vdmVDb2x1bW5zRnJvbUxpc3QoZSksInRvb2xQYW5lbFVpIil9LGFkZEljb246InZhbHVlUGFuZWwiLHJlbW92ZUljb246InZhbHVlUGFuZWwifSksdGhpcy5tZW51SXRlbU1hcC5zZXQoInBpdm90Iix7YWxsb3dlZEZ1bmN0aW9uOmU9PnRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSYmZS5pc1ByaW1hcnkoKSYmZS5pc0FsbG93UGl2b3QoKSxhY3RpdmVGdW5jdGlvbjplPT5lLmlzUGl2b3RBY3RpdmUoKSxhY3RpdmF0ZUxhYmVsOigpPT5lKCJhZGRUb0xhYmVscyIsYEFkZCAke3RoaXMuZGlzcGxheU5hbWV9IHRvIGxhYmVsc2AsW3RoaXMuZGlzcGxheU5hbWVdKSxkZWFjdGl2YXRlTGFiZWw6KCk9PmUoInJlbW92ZUZyb21MYWJlbHMiLGBSZW1vdmUgJHt0aGlzLmRpc3BsYXlOYW1lfSBmcm9tIGxhYmVsc2AsW3RoaXMuZGlzcGxheU5hbWVdKSxhY3RpdmF0ZUZ1bmN0aW9uOigpPT57Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmdldFBpdm90Q29sdW1ucygpO3RoaXMuY29sdW1uTW9kZWwuc2V0UGl2b3RDb2x1bW5zKHRoaXMuYWRkQ29sdW1uc1RvTGlzdChlKSwidG9vbFBhbmVsVWkiKX0sZGVBY3RpdmF0ZUZ1bmN0aW9uOigpPT57Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmdldFBpdm90Q29sdW1ucygpO3RoaXMuY29sdW1uTW9kZWwuc2V0UGl2b3RDb2x1bW5zKHRoaXMucmVtb3ZlQ29sdW1uc0Zyb21MaXN0KGUpLCJ0b29sUGFuZWxVaSIpfSxhZGRJY29uOiJwaXZvdFBhbmVsIixyZW1vdmVJY29uOiJwaXZvdFBhbmVsIn0pfWFkZENvbHVtbnNUb0xpc3QoZSl7cmV0dXJuWy4uLmVdLmNvbmNhdCh0aGlzLmNvbHVtbnMuZmlsdGVyKHQ9Pi0xPT09ZS5pbmRleE9mKHQpKSl9cmVtb3ZlQ29sdW1uc0Zyb21MaXN0KGUpe3JldHVybiBlLmZpbHRlcihlPT4tMT09PXRoaXMuY29sdW1ucy5pbmRleE9mKGUpKX1kaXNwbGF5Q29udGV4dE1lbnUoZSl7Y29uc3QgdD10aGlzLmdldEd1aSgpLGk9dGhpcy5jcmVhdGVCZWFuKG5ldyByLkFnTWVudUxpc3QpLHM9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCk7bGV0IG89KCk9Pnt9O3QuYXBwZW5kQ2hpbGQoaS5nZXRHdWkoKSksaS5hZGRNZW51SXRlbXMoZSksaS5hZGRNYW5hZ2VkTGlzdGVuZXIoaSxyLkFnTWVudUl0ZW1Db21wb25lbnQuRVZFTlRfQ0xPU0VfTUVOVSwoKT0+e3RoaXMucGFyZW50RWwuZm9jdXMoKSxvKCl9KTtjb25zdCBuPXRoaXMucG9wdXBTZXJ2aWNlLmFkZFBvcHVwKHttb2RhbDohMCxlQ2hpbGQ6dCxjbG9zZU9uRXNjOiEwLGFmdGVyR3VpQXR0YWNoZWQ6KCk9PnRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzSW50byhpLmdldEd1aSgpKSxhcmlhTGFiZWw6cygiYXJpYUxhYmVsQ29udGV4dE1lbnUiLCJDb250ZXh0IE1lbnUiKSxjbG9zZWRDYWxsYmFjazplPT57ZSBpbnN0YW5jZW9mIEtleWJvYXJkRXZlbnQmJnRoaXMucGFyZW50RWwuZm9jdXMoKSx0aGlzLmRlc3Ryb3lCZWFuKGkpfX0pO24mJihvPW4uaGlkZUZ1bmMpLHRoaXMucG9wdXBTZXJ2aWNlLnBvc2l0aW9uUG9wdXBVbmRlck1vdXNlRXZlbnQoe3R5cGU6ImNvbHVtbkNvbnRleHRNZW51Iixtb3VzZUV2ZW50OnRoaXMubW91c2VFdmVudCxlUG9wdXA6dH0pfWlzQWN0aXZlKCl7cmV0dXJuIHRoaXMuYWxsb3dHcm91cGluZ3x8dGhpcy5hbGxvd1ZhbHVlc3x8dGhpcy5hbGxvd1Bpdm90aW5nfWdldE1hcHBlZE1lbnVJdGVtcygpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgb2YgdGhpcy5tZW51SXRlbU1hcC52YWx1ZXMoKSl7Y29uc3QgaT10aGlzLmNvbHVtbnMuc29tZShlPT50LmFsbG93ZWRGdW5jdGlvbihlKSYmIXQuYWN0aXZlRnVuY3Rpb24oZSkpLHM9dGhpcy5jb2x1bW5zLnNvbWUoZT0+dC5hbGxvd2VkRnVuY3Rpb24oZSkmJnQuYWN0aXZlRnVuY3Rpb24oZSkpO2kmJmUucHVzaCh7bmFtZTp0LmFjdGl2YXRlTGFiZWwodGhpcy5kaXNwbGF5TmFtZSksaWNvbjpyLl8uY3JlYXRlSWNvbk5vU3Bhbih0LmFkZEljb24sdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCksYWN0aW9uOigpPT50LmFjdGl2YXRlRnVuY3Rpb24oKX0pLHMmJmUucHVzaCh7bmFtZTp0LmRlYWN0aXZhdGVMYWJlbCh0aGlzLmRpc3BsYXlOYW1lKSxpY29uOnIuXy5jcmVhdGVJY29uTm9TcGFuKHQucmVtb3ZlSWNvbix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSxhY3Rpb246KCk9PnQuZGVBY3RpdmF0ZUZ1bmN0aW9uKCl9KX1yZXR1cm4gZX19ZChbT2JqZWN0KHIuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sYy5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLGQoW09iamVjdChyLkF1dG93aXJlZCkoInBvcHVwU2VydmljZSIpXSxjLnByb3RvdHlwZSwicG9wdXBTZXJ2aWNlIix2b2lkIDApLGQoW09iamVjdChyLkF1dG93aXJlZCkoImZvY3VzU2VydmljZSIpXSxjLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLGQoW3IuUG9zdENvbnN0cnVjdF0sYy5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBoPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIHUgZXh0ZW5kcyByLkNvbXBvbmVudHtjb25zdHJ1Y3RvcihlLHQsaSxzKXtzdXBlcigpLHRoaXMubW9kZWxJdGVtPWUsdGhpcy5hbGxvd0RyYWdnaW5nPXQsdGhpcy5ldmVudFR5cGU9aSx0aGlzLmZvY3VzV3JhcHBlcj1zLHRoaXMucHJvY2Vzc2luZ0NvbHVtblN0YXRlQ2hhbmdlPSExLHRoaXMubW9kZWxJdGVtPWUsdGhpcy5jb2x1bW5Hcm91cD1lLmdldENvbHVtbkdyb3VwKCksdGhpcy5jb2x1bW5EZXB0PWUuZ2V0RGVwdCgpLHRoaXMuZGlzcGxheU5hbWU9ZS5nZXREaXNwbGF5TmFtZSgpLHRoaXMuYWxsb3dEcmFnZ2luZz10fWluaXQoKXt0aGlzLnNldFRlbXBsYXRlKHUuVEVNUExBVEUpLHRoaXMuZURyYWdIYW5kbGU9ci5fLmNyZWF0ZUljb25Ob1NwYW4oImNvbHVtbkRyYWciLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKSx0aGlzLmVEcmFnSGFuZGxlLmNsYXNzTGlzdC5hZGQoImFnLWRyYWctaGFuZGxlIiwiYWctY29sdW1uLXNlbGVjdC1jb2x1bW4tZ3JvdXAtZHJhZy1oYW5kbGUiKTtjb25zdCBlPXRoaXMuY2JTZWxlY3QuZ2V0R3VpKCksdD10aGlzLmNiU2VsZWN0LmdldElucHV0RWxlbWVudCgpO2UuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmVuZCIsdGhpcy5lRHJhZ0hhbmRsZSksdC5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwiLTEiKSx0aGlzLmVMYWJlbC5pbm5lckhUTUw9dGhpcy5kaXNwbGF5TmFtZT90aGlzLmRpc3BsYXlOYW1lOiIiLHRoaXMuc2V0dXBFeHBhbmRDb250cmFjdCgpLHRoaXMuYWRkQ3NzQ2xhc3MoImFnLWNvbHVtbi1zZWxlY3QtaW5kZW50LSIrdGhpcy5jb2x1bW5EZXB0KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxyLkV2ZW50cy5FVkVOVF9DT0xVTU5fUElWT1RfTU9ERV9DSEFOR0VELHRoaXMub25Db2x1bW5TdGF0ZUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lTGFiZWwsImNsaWNrIix0aGlzLm9uTGFiZWxDbGlja2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY2JTZWxlY3Qsci5FdmVudHMuRVZFTlRfRklFTERfVkFMVUVfQ0hBTkdFRCx0aGlzLm9uQ2hlY2tib3hDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMubW9kZWxJdGVtLGwuRVZFTlRfRVhQQU5ERURfQ0hBTkdFRCx0aGlzLm9uRXhwYW5kQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmZvY3VzV3JhcHBlciwia2V5ZG93biIsdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZm9jdXNXcmFwcGVyLCJjb250ZXh0bWVudSIsdGhpcy5vbkNvbnRleHRNZW51LmJpbmQodGhpcykpLHRoaXMuc2V0T3BlbkNsb3NlZEljb25zKCksdGhpcy5zZXR1cERyYWdnaW5nKCksdGhpcy5vbkNvbHVtblN0YXRlQ2hhbmdlZCgpLHRoaXMuYWRkVmlzaWJpbGl0eUxpc3RlbmVyc1RvQWxsQ2hpbGRyZW4oKSx0aGlzLnJlZnJlc2hBcmlhRXhwYW5kZWQoKSx0aGlzLnJlZnJlc2hBcmlhTGFiZWwoKSx0aGlzLnNldHVwVG9vbHRpcCgpO3IuQ3NzQ2xhc3NBcHBsaWVyLmdldFRvb2xQYW5lbENsYXNzZXNGcm9tQ29sRGVmKHRoaXMuY29sdW1uR3JvdXAuZ2V0Q29sR3JvdXBEZWYoKSx0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsLHRoaXMuY29sdW1uR3JvdXApLmZvckVhY2goZT0+dGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKGUsITApKX1nZXRDb2x1bW5zKCl7cmV0dXJuIHRoaXMuY29sdW1uR3JvdXAuZ2V0TGVhZkNvbHVtbnMoKX1zZXR1cFRvb2x0aXAoKXtjb25zdCBlPXRoaXMuY29sdW1uR3JvdXAuZ2V0Q29sR3JvdXBEZWYoKTtpZighZSlyZXR1cm47Y29uc3QgdD0oKT0+e2NvbnN0IHQ9ZS5oZWFkZXJUb29sdGlwO3RoaXMuc2V0VG9vbHRpcCh0KX07dCgpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHIuRXZlbnRzLkVWRU5UX05FV19DT0xVTU5TX0xPQURFRCx0KX1nZXRUb29sdGlwUGFyYW1zKCl7Y29uc3QgZT1zdXBlci5nZXRUb29sdGlwUGFyYW1zKCk7cmV0dXJuIGUubG9jYXRpb249ImNvbHVtblRvb2xQYW5lbENvbHVtbkdyb3VwIixlfWhhbmRsZUtleURvd24oZSl7c3dpdGNoKGUua2V5KXtjYXNlIHIuS2V5Q29kZS5MRUZUOmUucHJldmVudERlZmF1bHQoKSx0aGlzLm1vZGVsSXRlbS5zZXRFeHBhbmRlZCghMSk7YnJlYWs7Y2FzZSByLktleUNvZGUuUklHSFQ6ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMubW9kZWxJdGVtLnNldEV4cGFuZGVkKCEwKTticmVhaztjYXNlIHIuS2V5Q29kZS5TUEFDRTplLnByZXZlbnREZWZhdWx0KCksdGhpcy5pc1NlbGVjdGFibGUoKSYmdGhpcy5vblNlbGVjdEFsbENoYW5nZWQoIXRoaXMuaXNTZWxlY3RlZCgpKX19b25Db250ZXh0TWVudShlKXtjb25zdHtjb2x1bW5Hcm91cDp0LGdyaWRPcHRpb25zU2VydmljZTppfT10aGlzO2lmKGkuZ2V0KCJmdW5jdGlvbnNSZWFkT25seSIpKXJldHVybjtjb25zdCBzPXRoaXMuY3JlYXRlQmVhbihuZXcgYyh0LGUsdGhpcy5mb2N1c1dyYXBwZXIpKTt0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT57cy5pc0FsaXZlKCkmJnRoaXMuZGVzdHJveUJlYW4ocyl9KX1hZGRWaXNpYmlsaXR5TGlzdGVuZXJzVG9BbGxDaGlsZHJlbigpe3RoaXMuY29sdW1uR3JvdXAuZ2V0TGVhZkNvbHVtbnMoKS5mb3JFYWNoKGU9Pnt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihlLHIuQ29sdW1uLkVWRU5UX1ZJU0lCTEVfQ0hBTkdFRCx0aGlzLm9uQ29sdW1uU3RhdGVDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsci5Db2x1bW4uRVZFTlRfVkFMVUVfQ0hBTkdFRCx0aGlzLm9uQ29sdW1uU3RhdGVDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsci5Db2x1bW4uRVZFTlRfUElWT1RfQ0hBTkdFRCx0aGlzLm9uQ29sdW1uU3RhdGVDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsci5Db2x1bW4uRVZFTlRfUk9XX0dST1VQX0NIQU5HRUQsdGhpcy5vbkNvbHVtblN0YXRlQ2hhbmdlZC5iaW5kKHRoaXMpKX0pfXNldHVwRHJhZ2dpbmcoKXtpZighdGhpcy5hbGxvd0RyYWdnaW5nKXJldHVybiB2b2lkIHIuXy5zZXREaXNwbGF5ZWQodGhpcy5lRHJhZ0hhbmRsZSwhMSk7bGV0IGU9IXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NEcmFnTGVhdmVIaWRlc0NvbHVtbnMiKTtjb25zdCB0PXt0eXBlOnIuRHJhZ1NvdXJjZVR5cGUuVG9vbFBhbmVsLGVFbGVtZW50OnRoaXMuZURyYWdIYW5kbGUsZHJhZ0l0ZW1OYW1lOnRoaXMuZGlzcGxheU5hbWUsZ2V0RGVmYXVsdEljb25OYW1lOigpPT5lP3IuRHJhZ0FuZERyb3BTZXJ2aWNlLklDT05fSElERTpyLkRyYWdBbmREcm9wU2VydmljZS5JQ09OX05PVF9BTExPV0VELGdldERyYWdJdGVtOigpPT50aGlzLmNyZWF0ZURyYWdJdGVtKCksb25EcmFnU3RhcnRlZDooKT0+e2U9IXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NEcmFnTGVhdmVIaWRlc0NvbHVtbnMiKTtjb25zdCB0PXt0eXBlOnIuRXZlbnRzLkVWRU5UX0NPTFVNTl9QQU5FTF9JVEVNX0RSQUdfU1RBUlQsY29sdW1uOnRoaXMuY29sdW1uR3JvdXB9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9LG9uRHJhZ1N0b3BwZWQ6KCk9Pntjb25zdCBlPXt0eXBlOnIuRXZlbnRzLkVWRU5UX0NPTFVNTl9QQU5FTF9JVEVNX0RSQUdfRU5EfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfSxvbkdyaWRFbnRlcjp0PT57ZSYmdGhpcy5tb2RlbEl0ZW1VdGlscy51cGRhdGVDb2x1bW5zKHtjb2x1bW5zOnRoaXMuY29sdW1uR3JvdXAuZ2V0TGVhZkNvbHVtbnMoKSx2aXNpYmxlU3RhdGU6bnVsbD09dD92b2lkIDA6dC52aXNpYmxlU3RhdGUscGl2b3RTdGF0ZTpudWxsPT10P3ZvaWQgMDp0LnBpdm90U3RhdGUsZXZlbnRUeXBlOnRoaXMuZXZlbnRUeXBlfSl9LG9uR3JpZEV4aXQ6KCk9PntlJiZ0aGlzLm9uQ2hhbmdlQ29tbW9uKCExKX19O3RoaXMuZHJhZ0FuZERyb3BTZXJ2aWNlLmFkZERyYWdTb3VyY2UodCwhMCksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+dGhpcy5kcmFnQW5kRHJvcFNlcnZpY2UucmVtb3ZlRHJhZ1NvdXJjZSh0KSl9Y3JlYXRlRHJhZ0l0ZW0oKXtjb25zdCBlPXRoaXMuY29sdW1uR3JvdXAuZ2V0TGVhZkNvbHVtbnMoKSx0PXt9LGk9e307cmV0dXJuIGUuZm9yRWFjaChlPT57Y29uc3Qgcz1lLmdldElkKCk7dFtzXT1lLmlzVmlzaWJsZSgpLGlbc109dGhpcy5tb2RlbEl0ZW1VdGlscy5jcmVhdGVQaXZvdFN0YXRlKGUpfSkse2NvbHVtbnM6ZSx2aXNpYmxlU3RhdGU6dCxwaXZvdFN0YXRlOml9fXNldHVwRXhwYW5kQ29udHJhY3QoKXt0aGlzLmVHcm91cENsb3NlZEljb24uYXBwZW5kQ2hpbGQoci5fLmNyZWF0ZUljb24oImNvbHVtblNlbGVjdENsb3NlZCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCkpLHRoaXMuZUdyb3VwT3BlbmVkSWNvbi5hcHBlbmRDaGlsZChyLl8uY3JlYXRlSWNvbigiY29sdW1uU2VsZWN0T3BlbiIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUdyb3VwQ2xvc2VkSWNvbiwiY2xpY2siLHRoaXMub25FeHBhbmRPckNvbnRyYWN0Q2xpY2tlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVHcm91cE9wZW5lZEljb24sImNsaWNrIix0aGlzLm9uRXhwYW5kT3JDb250cmFjdENsaWNrZWQuYmluZCh0aGlzKSk7Y29uc3QgZT1uZXcgci5Ub3VjaExpc3RlbmVyKHRoaXMuZUNvbHVtbkdyb3VwSWNvbnMsITApO3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUsci5Ub3VjaExpc3RlbmVyLkVWRU5UX1RBUCx0aGlzLm9uRXhwYW5kT3JDb250cmFjdENsaWNrZWQuYmluZCh0aGlzKSksdGhpcy5hZGREZXN0cm95RnVuYyhlLmRlc3Ryb3kuYmluZChlKSl9b25MYWJlbENsaWNrZWQoKXtjb25zdCBlPSF0aGlzLmNiU2VsZWN0LmdldFZhbHVlKCk7dGhpcy5vbkNoYW5nZUNvbW1vbihlKX1vbkNoZWNrYm94Q2hhbmdlZChlKXt0aGlzLm9uQ2hhbmdlQ29tbW9uKGUuc2VsZWN0ZWQpfWdldFZpc2libGVMZWFmQ29sdW1ucygpe2NvbnN0IGU9W10sdD1pPT57aS5mb3JFYWNoKGk9PntpLmlzUGFzc2VzRmlsdGVyKCkmJihpLmlzR3JvdXAoKT90KGkuZ2V0Q2hpbGRyZW4oKSk6ZS5wdXNoKGkuZ2V0Q29sdW1uKCkpKX0pfTtyZXR1cm4gdCh0aGlzLm1vZGVsSXRlbS5nZXRDaGlsZHJlbigpKSxlfW9uQ2hhbmdlQ29tbW9uKGUpe3RoaXMucmVmcmVzaEFyaWFMYWJlbCgpLHRoaXMucHJvY2Vzc2luZ0NvbHVtblN0YXRlQ2hhbmdlfHx0aGlzLm1vZGVsSXRlbVV0aWxzLnNlbGVjdEFsbENoaWxkcmVuKHRoaXMubW9kZWxJdGVtLmdldENoaWxkcmVuKCksZSx0aGlzLmV2ZW50VHlwZSl9cmVmcmVzaEFyaWFMYWJlbCgpe2NvbnN0IGU9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCksdD1lKCJhcmlhQ29sdW1uR3JvdXAiLCJDb2x1bW4gR3JvdXAiKSxpPXRoaXMuY2JTZWxlY3QuZ2V0VmFsdWUoKSxzPXZvaWQgMD09PWk/ZSgiYXJpYUluZGV0ZXJtaW5hdGUiLCJpbmRldGVybWluYXRlIik6aT9lKCJhcmlhVmlzaWJsZSIsInZpc2libGUiKTplKCJhcmlhSGlkZGVuIiwiaGlkZGVuIiksbz1lKCJhcmlhVG9nZ2xlVmlzaWJpbGl0eSIsIlByZXNzIFNQQUNFIHRvIHRvZ2dsZSB2aXNpYmlsaXR5Iik7ci5fLnNldEFyaWFMYWJlbCh0aGlzLmZvY3VzV3JhcHBlcixgJHt0aGlzLmRpc3BsYXlOYW1lfSAke3R9YCksdGhpcy5jYlNlbGVjdC5zZXRJbnB1dEFyaWFMYWJlbChgJHtvfSAoJHtzfSlgKSxyLl8uc2V0QXJpYURlc2NyaWJlZEJ5KHRoaXMuZm9jdXNXcmFwcGVyLHRoaXMuY2JTZWxlY3QuZ2V0SW5wdXRFbGVtZW50KCkuaWQpfW9uQ29sdW1uU3RhdGVDaGFuZ2VkKCl7Y29uc3QgZT10aGlzLndvcmtPdXRTZWxlY3RlZFZhbHVlKCksdD10aGlzLndvcmtPdXRSZWFkT25seVZhbHVlKCk7dGhpcy5wcm9jZXNzaW5nQ29sdW1uU3RhdGVDaGFuZ2U9ITAsdGhpcy5jYlNlbGVjdC5zZXRWYWx1ZShlKSx0aGlzLmNiU2VsZWN0LnNldFJlYWRPbmx5KHQpLHRoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctY29sdW1uLXNlbGVjdC1jb2x1bW4tZ3JvdXAtcmVhZG9ubHkiLHQpLHRoaXMucHJvY2Vzc2luZ0NvbHVtblN0YXRlQ2hhbmdlPSExfXdvcmtPdXRTZWxlY3RlZFZhbHVlKCl7Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RNb2RlKCksdD10aGlzLmdldFZpc2libGVMZWFmQ29sdW1ucygpO2xldCBpPTAscz0wO2lmKHQuZm9yRWFjaCh0PT57IWUmJnQuZ2V0Q29sRGVmKCkubG9ja1Zpc2libGV8fCh0aGlzLmlzQ29sdW1uQ2hlY2tlZCh0LGUpP2krKzpzKyspfSksIShpPjAmJnM+MCkpcmV0dXJuIGk+MH13b3JrT3V0UmVhZE9ubHlWYWx1ZSgpe2NvbnN0IGU9dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpO2xldCB0PTA7cmV0dXJuIHRoaXMuY29sdW1uR3JvdXAuZ2V0TGVhZkNvbHVtbnMoKS5mb3JFYWNoKGk9PntlP2kuaXNBbnlGdW5jdGlvbkFsbG93ZWQoKSYmdCsrOmkuZ2V0Q29sRGVmKCkubG9ja1Zpc2libGV8fHQrK30pLDA9PT10fWlzQ29sdW1uQ2hlY2tlZChlLHQpe2lmKHQpe2NvbnN0IHQ9ZS5pc1Bpdm90QWN0aXZlKCksaT1lLmlzUm93R3JvdXBBY3RpdmUoKSxzPWUuaXNWYWx1ZUFjdGl2ZSgpO3JldHVybiB0fHxpfHxzfXJldHVybiBlLmlzVmlzaWJsZSgpfW9uRXhwYW5kT3JDb250cmFjdENsaWNrZWQoKXtjb25zdCBlPXRoaXMubW9kZWxJdGVtLmlzRXhwYW5kZWQoKTt0aGlzLm1vZGVsSXRlbS5zZXRFeHBhbmRlZCghZSl9b25FeHBhbmRDaGFuZ2VkKCl7dGhpcy5zZXRPcGVuQ2xvc2VkSWNvbnMoKSx0aGlzLnJlZnJlc2hBcmlhRXhwYW5kZWQoKX1zZXRPcGVuQ2xvc2VkSWNvbnMoKXtjb25zdCBlPXRoaXMubW9kZWxJdGVtLmlzRXhwYW5kZWQoKTtyLl8uc2V0RGlzcGxheWVkKHRoaXMuZUdyb3VwQ2xvc2VkSWNvbiwhZSksci5fLnNldERpc3BsYXllZCh0aGlzLmVHcm91cE9wZW5lZEljb24sZSl9cmVmcmVzaEFyaWFFeHBhbmRlZCgpe3IuXy5zZXRBcmlhRXhwYW5kZWQodGhpcy5mb2N1c1dyYXBwZXIsdGhpcy5tb2RlbEl0ZW0uaXNFeHBhbmRlZCgpKX1nZXREaXNwbGF5TmFtZSgpe3JldHVybiB0aGlzLmRpc3BsYXlOYW1lfW9uU2VsZWN0QWxsQ2hhbmdlZChlKXtjb25zdCB0PXRoaXMuY2JTZWxlY3QuZ2V0VmFsdWUoKTshdGhpcy5jYlNlbGVjdC5pc1JlYWRPbmx5KCkmJihlJiYhdHx8IWUmJnQpJiZ0aGlzLmNiU2VsZWN0LnRvZ2dsZSgpfWlzU2VsZWN0ZWQoKXtyZXR1cm4gdGhpcy5jYlNlbGVjdC5nZXRWYWx1ZSgpfWlzU2VsZWN0YWJsZSgpe3JldHVybiF0aGlzLmNiU2VsZWN0LmlzUmVhZE9ubHkoKX1zZXRTZWxlY3RlZChlKXt0aGlzLmNiU2VsZWN0LnNldFZhbHVlKGUsITApfX11LlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1jb2x1bW4tc2VsZWN0LWNvbHVtbi1ncm91cCIgYXJpYS1oaWRkZW49InRydWUiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFnLWNvbHVtbi1ncm91cC1pY29ucyIgcmVmPSJlQ29sdW1uR3JvdXBJY29ucyIgPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhZy1jb2x1bW4tZ3JvdXAtY2xvc2VkLWljb24iIHJlZj0iZUdyb3VwQ2xvc2VkSWNvbiI+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhZy1jb2x1bW4tZ3JvdXAtb3BlbmVkLWljb24iIHJlZj0iZUdyb3VwT3BlbmVkSWNvbiI+PC9zcGFuPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPGFnLWNoZWNrYm94IHJlZj0iY2JTZWxlY3QiIGNsYXNzPSJhZy1jb2x1bW4tc2VsZWN0LWNoZWNrYm94Ij48L2FnLWNoZWNrYm94PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFnLWNvbHVtbi1zZWxlY3QtY29sdW1uLWxhYmVsIiByZWY9ImVMYWJlbCI+PC9zcGFuPlxuICAgICAgICA8L2Rpdj4nLGgoW09iamVjdChyLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLHUucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxoKFtPYmplY3Qoci5BdXRvd2lyZWQpKCJkcmFnQW5kRHJvcFNlcnZpY2UiKV0sdS5wcm90b3R5cGUsImRyYWdBbmREcm9wU2VydmljZSIsdm9pZCAwKSxoKFtPYmplY3Qoci5BdXRvd2lyZWQpKCJtb2RlbEl0ZW1VdGlscyIpXSx1LnByb3RvdHlwZSwibW9kZWxJdGVtVXRpbHMiLHZvaWQgMCksaChbT2JqZWN0KHIuUmVmU2VsZWN0b3IpKCJjYlNlbGVjdCIpXSx1LnByb3RvdHlwZSwiY2JTZWxlY3QiLHZvaWQgMCksaChbT2JqZWN0KHIuUmVmU2VsZWN0b3IpKCJlTGFiZWwiKV0sdS5wcm90b3R5cGUsImVMYWJlbCIsdm9pZCAwKSxoKFtPYmplY3Qoci5SZWZTZWxlY3RvcikoImVHcm91cE9wZW5lZEljb24iKV0sdS5wcm90b3R5cGUsImVHcm91cE9wZW5lZEljb24iLHZvaWQgMCksaChbT2JqZWN0KHIuUmVmU2VsZWN0b3IpKCJlR3JvdXBDbG9zZWRJY29uIildLHUucHJvdG90eXBlLCJlR3JvdXBDbG9zZWRJY29uIix2b2lkIDApLGgoW09iamVjdChyLlJlZlNlbGVjdG9yKSgiZUNvbHVtbkdyb3VwSWNvbnMiKV0sdS5wcm90b3R5cGUsImVDb2x1bW5Hcm91cEljb25zIix2b2lkIDApLGgoW3IuUG9zdENvbnN0cnVjdF0sdS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBwPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGcgZXh0ZW5kcyByLkJlYW5TdHVie2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLmNvbXA9ZSx0aGlzLnZpcnR1YWxMaXN0PXR9cG9zdENvbnN0cnVjdCgpe3RoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHIuVmlydHVhbExpc3REcmFnRmVhdHVyZSh0aGlzLmNvbXAsdGhpcy52aXJ0dWFsTGlzdCx7ZHJhZ1NvdXJjZVR5cGU6ci5EcmFnU291cmNlVHlwZS5Ub29sUGFuZWwsbGlzdEl0ZW1EcmFnU3RhcnRFdmVudDpyLkV2ZW50cy5FVkVOVF9DT0xVTU5fUEFORUxfSVRFTV9EUkFHX1NUQVJULGxpc3RJdGVtRHJhZ0VuZEV2ZW50OnIuRXZlbnRzLkVWRU5UX0NPTFVNTl9QQU5FTF9JVEVNX0RSQUdfRU5ELGV2ZW50U291cmNlOnRoaXMuZXZlbnRTZXJ2aWNlLGdldEN1cnJlbnREcmFnVmFsdWU6ZT0+dGhpcy5nZXRDdXJyZW50RHJhZ1ZhbHVlKGUpLGlzTW92ZUJsb2NrZWQ6ZT0+dGhpcy5pc01vdmVCbG9ja2VkKGUpLGdldE51bVJvd3M6ZT0+ZS5nZXREaXNwbGF5ZWRDb2xzTGlzdCgpLmxlbmd0aCxtb3ZlSXRlbTooZSx0KT0+dGhpcy5tb3ZlSXRlbShlLHQpfSkpfWdldEN1cnJlbnREcmFnVmFsdWUoZSl7cmV0dXJuIGUuY29sdW1ufWlzTW92ZUJsb2NrZWQoZSl7aWYodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc01vdmFibGVDb2x1bW5zIikpcmV0dXJuITA7cmV0dXJuISF0aGlzLmdldEN1cnJlbnRDb2x1bW5zKGUpLmZpbmQoZT0+e2NvbnN0IHQ9ZS5nZXRDb2xEZWYoKTtyZXR1cm4hIXQuc3VwcHJlc3NNb3ZhYmxlfHwhIXQubG9ja1Bvc2l0aW9ufSl9bW92ZUl0ZW0oZSx0KXtjb25zdCBpPXRoaXMuZ2V0VGFyZ2V0SW5kZXgoZSx0KSxzPXRoaXMuZ2V0Q3VycmVudENvbHVtbnMoZSk7bnVsbCE9aSYmdGhpcy5jb2x1bW5Nb2RlbC5tb3ZlQ29sdW1ucyhzLGksInRvb2xQYW5lbFVpIil9Z2V0TW92ZURpZmYoZSx0KXtjb25zdCBpPXRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsR3JpZENvbHVtbnMoKSxzPXRoaXMuZ2V0Q3VycmVudENvbHVtbnMoZSkscj1zWzBdLG89cy5sZW5ndGg7cmV0dXJuIGkuaW5kZXhPZihyKTx0P286MH1nZXRDdXJyZW50Q29sdW1ucyhlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHIuUHJvdmlkZWRDb2x1bW5Hcm91cD9lLmdldExlYWZDb2x1bW5zKCk6W2VdfWdldFRhcmdldEluZGV4KGUsdCl7aWYoIXQpcmV0dXJuIG51bGw7Y29uc3QgaT10LmNvbXBvbmVudDtsZXQgcyxyPSJ0b3AiPT09dC5wb3NpdGlvbjtpZihpIGluc3RhbmNlb2YgdSl7cz1pLmdldENvbHVtbnMoKVswXSxyPSEwfWVsc2Ugcz1pLmdldENvbHVtbigpO2lmKC0xIT09dGhpcy5nZXRDdXJyZW50Q29sdW1ucyhlKS5pbmRleE9mKHMpKXJldHVybiBudWxsO2NvbnN0IG89dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxHcmlkQ29sdW1ucygpLmluZGV4T2Yocyksbj1yP286bysxO3JldHVybiBuLXRoaXMuZ2V0TW92ZURpZmYoZSxuKX19cChbT2JqZWN0KHIuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sZy5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLHAoW09iamVjdChyLkF1dG93aXJlZCkoImdyaWRPcHRpb25zU2VydmljZSIpXSxnLnByb3RvdHlwZSwiZ3JpZE9wdGlvbnNTZXJ2aWNlIix2b2lkIDApLHAoW3IuUG9zdENvbnN0cnVjdF0sZy5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBtPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGYgZXh0ZW5kcyByLkNvbXBvbmVudHtjb25zdHJ1Y3RvcihlLHQsaSxzKXtzdXBlcigpLHRoaXMuYWxsb3dEcmFnZ2luZz10LHRoaXMuZ3JvdXBzRXhpc3Q9aSx0aGlzLmZvY3VzV3JhcHBlcj1zLHRoaXMucHJvY2Vzc2luZ0NvbHVtblN0YXRlQ2hhbmdlPSExLHRoaXMuY29sdW1uPWUuZ2V0Q29sdW1uKCksdGhpcy5jb2x1bW5EZXB0PWUuZ2V0RGVwdCgpLHRoaXMuZGlzcGxheU5hbWU9ZS5nZXREaXNwbGF5TmFtZSgpfWluaXQoKXt0aGlzLnNldFRlbXBsYXRlKGYuVEVNUExBVEUpLHRoaXMuZURyYWdIYW5kbGU9ci5fLmNyZWF0ZUljb25Ob1NwYW4oImNvbHVtbkRyYWciLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKSx0aGlzLmVEcmFnSGFuZGxlLmNsYXNzTGlzdC5hZGQoImFnLWRyYWctaGFuZGxlIiwiYWctY29sdW1uLXNlbGVjdC1jb2x1bW4tZHJhZy1oYW5kbGUiKTtjb25zdCBlPXRoaXMuY2JTZWxlY3QuZ2V0R3VpKCksdD10aGlzLmNiU2VsZWN0LmdldElucHV0RWxlbWVudCgpO2UuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmVuZCIsdGhpcy5lRHJhZ0hhbmRsZSksdC5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwiLTEiKTtjb25zdCBpPXIuXy5lc2NhcGVTdHJpbmcodGhpcy5kaXNwbGF5TmFtZSk7dGhpcy5lTGFiZWwuaW5uZXJIVE1MPWk7Y29uc3Qgcz10aGlzLmNvbHVtbkRlcHQ7dGhpcy5ncm91cHNFeGlzdCYmdGhpcy5hZGRDc3NDbGFzcygiYWctY29sdW1uLXNlbGVjdC1hZGQtZ3JvdXAtaW5kZW50IiksdGhpcy5hZGRDc3NDbGFzcygiYWctY29sdW1uLXNlbGVjdC1pbmRlbnQtIitzKSx0aGlzLnNldHVwRHJhZ2dpbmcoKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxyLkV2ZW50cy5FVkVOVF9DT0xVTU5fUElWT1RfTU9ERV9DSEFOR0VELHRoaXMub25Db2x1bW5TdGF0ZUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jb2x1bW4sci5Db2x1bW4uRVZFTlRfVkFMVUVfQ0hBTkdFRCx0aGlzLm9uQ29sdW1uU3RhdGVDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY29sdW1uLHIuQ29sdW1uLkVWRU5UX1BJVk9UX0NIQU5HRUQsdGhpcy5vbkNvbHVtblN0YXRlQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmNvbHVtbixyLkNvbHVtbi5FVkVOVF9ST1dfR1JPVVBfQ0hBTkdFRCx0aGlzLm9uQ29sdW1uU3RhdGVDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY29sdW1uLHIuQ29sdW1uLkVWRU5UX1ZJU0lCTEVfQ0hBTkdFRCx0aGlzLm9uQ29sdW1uU3RhdGVDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZm9jdXNXcmFwcGVyLCJrZXlkb3duIix0aGlzLmhhbmRsZUtleURvd24uYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5mb2N1c1dyYXBwZXIsImNvbnRleHRtZW51Iix0aGlzLm9uQ29udGV4dE1lbnUuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiZnVuY3Rpb25zUmVhZE9ubHkiLHRoaXMub25Db2x1bW5TdGF0ZUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jYlNlbGVjdCxyLkV2ZW50cy5FVkVOVF9GSUVMRF9WQUxVRV9DSEFOR0VELHRoaXMub25DaGVja2JveENoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lTGFiZWwsImNsaWNrIix0aGlzLm9uTGFiZWxDbGlja2VkLmJpbmQodGhpcykpLHRoaXMub25Db2x1bW5TdGF0ZUNoYW5nZWQoKSx0aGlzLnJlZnJlc2hBcmlhTGFiZWwoKSx0aGlzLnNldHVwVG9vbHRpcCgpO3IuQ3NzQ2xhc3NBcHBsaWVyLmdldFRvb2xQYW5lbENsYXNzZXNGcm9tQ29sRGVmKHRoaXMuY29sdW1uLmdldENvbERlZigpLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLHRoaXMuY29sdW1uLG51bGwpLmZvckVhY2goZT0+dGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKGUsITApKX1nZXRDb2x1bW4oKXtyZXR1cm4gdGhpcy5jb2x1bW59c2V0dXBUb29sdGlwKCl7Y29uc3QgZT0oKT0+e2NvbnN0IGU9dGhpcy5jb2x1bW4uZ2V0Q29sRGVmKCkuaGVhZGVyVG9vbHRpcDt0aGlzLnNldFRvb2x0aXAoZSl9O2UoKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxyLkV2ZW50cy5FVkVOVF9ORVdfQ09MVU1OU19MT0FERUQsZSl9Z2V0VG9vbHRpcFBhcmFtcygpe2NvbnN0IGU9c3VwZXIuZ2V0VG9vbHRpcFBhcmFtcygpO3JldHVybiBlLmxvY2F0aW9uPSJjb2x1bW5Ub29sUGFuZWxDb2x1bW4iLGUuY29sRGVmPXRoaXMuY29sdW1uLmdldENvbERlZigpLGV9b25Db250ZXh0TWVudShlKXtjb25zdHtjb2x1bW46dCxncmlkT3B0aW9uc1NlcnZpY2U6aX09dGhpcztpZihpLmdldCgiZnVuY3Rpb25zUmVhZE9ubHkiKSlyZXR1cm47Y29uc3Qgcz10aGlzLmNyZWF0ZUJlYW4obmV3IGModCxlLHRoaXMuZm9jdXNXcmFwcGVyKSk7dGhpcy5hZGREZXN0cm95RnVuYygoKT0+e3MuaXNBbGl2ZSgpJiZ0aGlzLmRlc3Ryb3lCZWFuKHMpfSl9aGFuZGxlS2V5RG93bihlKXtlLmtleT09PXIuS2V5Q29kZS5TUEFDRSYmKGUucHJldmVudERlZmF1bHQoKSx0aGlzLmlzU2VsZWN0YWJsZSgpJiZ0aGlzLm9uU2VsZWN0QWxsQ2hhbmdlZCghdGhpcy5pc1NlbGVjdGVkKCkpKX1vbkxhYmVsQ2xpY2tlZCgpe2lmKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZnVuY3Rpb25zUmVhZE9ubHkiKSlyZXR1cm47Y29uc3QgZT0hdGhpcy5jYlNlbGVjdC5nZXRWYWx1ZSgpO3RoaXMub25DaGFuZ2VDb21tb24oZSl9b25DaGVja2JveENoYW5nZWQoZSl7dGhpcy5vbkNoYW5nZUNvbW1vbihlLnNlbGVjdGVkKX1vbkNoYW5nZUNvbW1vbihlKXt0aGlzLmNiU2VsZWN0LmlzUmVhZE9ubHkoKXx8KHRoaXMucmVmcmVzaEFyaWFMYWJlbCgpLHRoaXMucHJvY2Vzc2luZ0NvbHVtblN0YXRlQ2hhbmdlfHx0aGlzLm1vZGVsSXRlbVV0aWxzLnNldENvbHVtbih0aGlzLmNvbHVtbixlLCJ0b29sUGFuZWxVaSIpKX1yZWZyZXNoQXJpYUxhYmVsKCl7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSx0PWUoImFyaWFDb2x1bW4iLCJDb2x1bW4iKSxpPXRoaXMuY2JTZWxlY3QuZ2V0VmFsdWUoKT9lKCJhcmlhVmlzaWJsZSIsInZpc2libGUiKTplKCJhcmlhSGlkZGVuIiwiaGlkZGVuIikscz1lKCJhcmlhVG9nZ2xlVmlzaWJpbGl0eSIsIlByZXNzIFNQQUNFIHRvIHRvZ2dsZSB2aXNpYmlsaXR5Iik7ci5fLnNldEFyaWFMYWJlbCh0aGlzLmZvY3VzV3JhcHBlcixgJHt0aGlzLmRpc3BsYXlOYW1lfSAke3R9YCksdGhpcy5jYlNlbGVjdC5zZXRJbnB1dEFyaWFMYWJlbChgJHtzfSAoJHtpfSlgKSxyLl8uc2V0QXJpYURlc2NyaWJlZEJ5KHRoaXMuZm9jdXNXcmFwcGVyLHRoaXMuY2JTZWxlY3QuZ2V0SW5wdXRFbGVtZW50KCkuaWQpfXNldHVwRHJhZ2dpbmcoKXtpZighdGhpcy5hbGxvd0RyYWdnaW5nKXJldHVybiB2b2lkIHIuXy5zZXREaXNwbGF5ZWQodGhpcy5lRHJhZ0hhbmRsZSwhMSk7bGV0IGU9IXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NEcmFnTGVhdmVIaWRlc0NvbHVtbnMiKTtjb25zdCB0PXt0eXBlOnIuRHJhZ1NvdXJjZVR5cGUuVG9vbFBhbmVsLGVFbGVtZW50OnRoaXMuZURyYWdIYW5kbGUsZHJhZ0l0ZW1OYW1lOnRoaXMuZGlzcGxheU5hbWUsZ2V0RGVmYXVsdEljb25OYW1lOigpPT5lP3IuRHJhZ0FuZERyb3BTZXJ2aWNlLklDT05fSElERTpyLkRyYWdBbmREcm9wU2VydmljZS5JQ09OX05PVF9BTExPV0VELGdldERyYWdJdGVtOigpPT50aGlzLmNyZWF0ZURyYWdJdGVtKCksb25EcmFnU3RhcnRlZDooKT0+e2U9IXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NEcmFnTGVhdmVIaWRlc0NvbHVtbnMiKTtjb25zdCB0PXt0eXBlOnIuRXZlbnRzLkVWRU5UX0NPTFVNTl9QQU5FTF9JVEVNX0RSQUdfU1RBUlQsY29sdW1uOnRoaXMuY29sdW1ufTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfSxvbkRyYWdTdG9wcGVkOigpPT57Y29uc3QgZT17dHlwZTpyLkV2ZW50cy5FVkVOVF9DT0xVTU5fUEFORUxfSVRFTV9EUkFHX0VORH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX0sb25HcmlkRW50ZXI6dD0+e2UmJnRoaXMubW9kZWxJdGVtVXRpbHMudXBkYXRlQ29sdW1ucyh7Y29sdW1uczpbdGhpcy5jb2x1bW5dLHZpc2libGVTdGF0ZTpudWxsPT10P3ZvaWQgMDp0LnZpc2libGVTdGF0ZSxwaXZvdFN0YXRlOm51bGw9PXQ/dm9pZCAwOnQucGl2b3RTdGF0ZSxldmVudFR5cGU6InRvb2xQYW5lbFVpIn0pfSxvbkdyaWRFeGl0OigpPT57ZSYmdGhpcy5vbkNoYW5nZUNvbW1vbighMSl9fTt0aGlzLmRyYWdBbmREcm9wU2VydmljZS5hZGREcmFnU291cmNlKHQsITApLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9PnRoaXMuZHJhZ0FuZERyb3BTZXJ2aWNlLnJlbW92ZURyYWdTb3VyY2UodCkpfWNyZWF0ZURyYWdJdGVtKCl7Y29uc3QgZT10aGlzLmNvbHVtbi5nZXRDb2xJZCgpLHQ9e1tlXTp0aGlzLmNvbHVtbi5pc1Zpc2libGUoKX0saT17W2VdOnRoaXMubW9kZWxJdGVtVXRpbHMuY3JlYXRlUGl2b3RTdGF0ZSh0aGlzLmNvbHVtbil9O3JldHVybntjb2x1bW5zOlt0aGlzLmNvbHVtbl0sdmlzaWJsZVN0YXRlOnQscGl2b3RTdGF0ZTppfX1vbkNvbHVtblN0YXRlQ2hhbmdlZCgpe3RoaXMucHJvY2Vzc2luZ0NvbHVtblN0YXRlQ2hhbmdlPSEwO2NvbnN0IGU9dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpO2lmKGUpe2NvbnN0IGU9dGhpcy5jb2x1bW4uaXNBbnlGdW5jdGlvbkFjdGl2ZSgpO3RoaXMuY2JTZWxlY3Quc2V0VmFsdWUoZSl9ZWxzZSB0aGlzLmNiU2VsZWN0LnNldFZhbHVlKHRoaXMuY29sdW1uLmlzVmlzaWJsZSgpKTtsZXQgdD0hMCxpPSEwO2lmKGUpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJmdW5jdGlvbnNSZWFkT25seSIpLHM9IXRoaXMuY29sdW1uLmlzQW55RnVuY3Rpb25BbGxvd2VkKCk7dD0hZSYmIXMsaT10fWVsc2V7Y29uc3R7ZW5hYmxlUm93R3JvdXA6ZSxlbmFibGVWYWx1ZTpzLGxvY2tQb3NpdGlvbjpyLHN1cHByZXNzTW92YWJsZTpvLGxvY2tWaXNpYmxlOm59PXRoaXMuY29sdW1uLmdldENvbERlZigpLGE9ISFyfHwhIW87dD0hbixpPSEhZXx8ISFzfHwhYX10aGlzLmNiU2VsZWN0LnNldFJlYWRPbmx5KCF0KSx0aGlzLmVEcmFnSGFuZGxlLmNsYXNzTGlzdC50b2dnbGUoImFnLWNvbHVtbi1zZWxlY3QtY29sdW1uLXJlYWRvbmx5IiwhaSksdGhpcy5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1jb2x1bW4tc2VsZWN0LWNvbHVtbi1yZWFkb25seSIsIWkmJiF0KTtjb25zdCBzPWUmJnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZnVuY3Rpb25zUGFzc2l2ZSIpO3RoaXMuY2JTZWxlY3Quc2V0UGFzc2l2ZShzKSx0aGlzLnByb2Nlc3NpbmdDb2x1bW5TdGF0ZUNoYW5nZT0hMX1nZXREaXNwbGF5TmFtZSgpe3JldHVybiB0aGlzLmRpc3BsYXlOYW1lfW9uU2VsZWN0QWxsQ2hhbmdlZChlKXtlIT09dGhpcy5jYlNlbGVjdC5nZXRWYWx1ZSgpJiYodGhpcy5jYlNlbGVjdC5pc1JlYWRPbmx5KCl8fHRoaXMuY2JTZWxlY3QudG9nZ2xlKCkpfWlzU2VsZWN0ZWQoKXtyZXR1cm4gdGhpcy5jYlNlbGVjdC5nZXRWYWx1ZSgpfWlzU2VsZWN0YWJsZSgpe3JldHVybiF0aGlzLmNiU2VsZWN0LmlzUmVhZE9ubHkoKX1pc0V4cGFuZGFibGUoKXtyZXR1cm4hMX1zZXRFeHBhbmRlZChlKXtjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGNhbiBub3QgZXhwYW5kIGEgY29sdW1uIGl0ZW0gdGhhdCBkb2VzIG5vdCByZXByZXNlbnQgYSBjb2x1bW4gZ3JvdXAgaGVhZGVyIil9fWYuVEVNUExBVEU9JzxkaXYgY2xhc3M9ImFnLWNvbHVtbi1zZWxlY3QtY29sdW1uIiBhcmlhLWhpZGRlbj0idHJ1ZSI+XG4gICAgICAgICAgICA8YWctY2hlY2tib3ggcmVmPSJjYlNlbGVjdCIgY2xhc3M9ImFnLWNvbHVtbi1zZWxlY3QtY2hlY2tib3giPjwvYWctY2hlY2tib3g+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0iYWctY29sdW1uLXNlbGVjdC1jb2x1bW4tbGFiZWwiIHJlZj0iZUxhYmVsIj48L3NwYW4+XG4gICAgICAgIDwvZGl2PicsbShbT2JqZWN0KHIuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sZi5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLG0oW09iamVjdChyLkF1dG93aXJlZCkoImRyYWdBbmREcm9wU2VydmljZSIpXSxmLnByb3RvdHlwZSwiZHJhZ0FuZERyb3BTZXJ2aWNlIix2b2lkIDApLG0oW09iamVjdChyLkF1dG93aXJlZCkoIm1vZGVsSXRlbVV0aWxzIildLGYucHJvdG90eXBlLCJtb2RlbEl0ZW1VdGlscyIsdm9pZCAwKSxtKFtPYmplY3Qoci5SZWZTZWxlY3RvcikoImVMYWJlbCIpXSxmLnByb3RvdHlwZSwiZUxhYmVsIix2b2lkIDApLG0oW09iamVjdChyLlJlZlNlbGVjdG9yKSgiY2JTZWxlY3QiKV0sZi5wcm90b3R5cGUsImNiU2VsZWN0Iix2b2lkIDApLG0oW3IuUG9zdENvbnN0cnVjdF0sZi5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciB2PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIEN7Y29uc3RydWN0b3IoZSl7dGhpcy5pdGVtcz1lfWdldFJvd0NvdW50KCl7cmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RofWdldFJvdyhlKXtyZXR1cm4gdGhpcy5pdGVtc1tlXX19Y2xhc3MgeSBleHRlbmRzIHIuQ29tcG9uZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoeS5URU1QTEFURSksdGhpcy5kZXN0cm95Q29sdW1uSXRlbUZ1bmNzPVtdLHRoaXMuaGFzTG9hZGVkSW5pdGlhbFN0YXRlPSExLHRoaXMuaXNJbml0aWFsU3RhdGU9ITF9ZGVzdHJveUNvbHVtblRyZWUoKXt0aGlzLmFsbENvbHNUcmVlPVtdLHRoaXMuZGVzdHJveUNvbHVtbkl0ZW1GdW5jcy5mb3JFYWNoKGU9PmUoKSksdGhpcy5kZXN0cm95Q29sdW1uSXRlbUZ1bmNzPVtdfWluaXQoZSx0LGkpe3RoaXMucGFyYW1zPWUsdGhpcy5hbGxvd0RyYWdnaW5nPXQsdGhpcy5ldmVudFR5cGU9aSx0aGlzLnBhcmFtcy5zdXBwcmVzc1N5bmNMYXlvdXRXaXRoR3JpZHx8dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Usci5FdmVudHMuRVZFTlRfQ09MVU1OX01PVkVELHRoaXMub25Db2x1bW5zQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxyLkV2ZW50cy5FVkVOVF9ORVdfQ09MVU1OU19MT0FERUQsdGhpcy5vbkNvbHVtbnNDaGFuZ2VkLmJpbmQodGhpcykpO1tyLkV2ZW50cy5FVkVOVF9DT0xVTU5fUElWT1RfQ0hBTkdFRCxyLkV2ZW50cy5FVkVOVF9DT0xVTU5fUElWT1RfTU9ERV9DSEFOR0VELHIuRXZlbnRzLkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRCxyLkV2ZW50cy5FVkVOVF9DT0xVTU5fVkFMVUVfQ0hBTkdFRCxyLkV2ZW50cy5FVkVOVF9DT0xVTU5fVklTSUJMRSxyLkV2ZW50cy5FVkVOVF9ORVdfQ09MVU1OU19MT0FERURdLmZvckVhY2goZT0+e3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLGUsdGhpcy5maXJlU2VsZWN0aW9uQ2hhbmdlZEV2ZW50LmJpbmQodGhpcykpfSksdGhpcy5leHBhbmRHcm91cHNCeURlZmF1bHQ9IXRoaXMucGFyYW1zLmNvbnRyYWN0Q29sdW1uU2VsZWN0aW9uLHRoaXMudmlydHVhbExpc3Q9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgci5WaXJ0dWFsTGlzdCh7Y3NzSWRlbnRpZmllcjoiY29sdW1uLXNlbGVjdCIsYXJpYVJvbGU6InRyZWUifSkpLHRoaXMuYXBwZW5kQ2hpbGQodGhpcy52aXJ0dWFsTGlzdC5nZXRHdWkoKSk7Y29uc3Qgcz10aGlzLnZpcnR1YWxMaXN0LmdldEFyaWFFbGVtZW50KCk7ci5fLnNldEFyaWFMaXZlKHMsImFzc2VydGl2ZSIpLHIuXy5zZXRBcmlhQXRvbWljKHMsITEpLHIuXy5zZXRBcmlhUmVsZXZhbnQocywidGV4dCIpLHRoaXMudmlydHVhbExpc3Quc2V0Q29tcG9uZW50Q3JlYXRvcigoZSx0KT0+KHIuXy5zZXRBcmlhTGV2ZWwodCxlLmdldERlcHQoKSsxKSx0aGlzLmNyZWF0ZUNvbXBvbmVudEZyb21JdGVtKGUsdCkpKSx0aGlzLmNvbHVtbk1vZGVsLmlzUmVhZHkoKSYmdGhpcy5vbkNvbHVtbnNDaGFuZ2VkKCksdGhpcy5wYXJhbXMuc3VwcHJlc3NDb2x1bW5Nb3ZlfHwodGhpcy5jb2xzTGlzdFBhbmVsSXRlbURyYWdGZWF0dXJlPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IGcodGhpcyx0aGlzLnZpcnR1YWxMaXN0KSkpfWNyZWF0ZUNvbXBvbmVudEZyb21JdGVtKGUsdCl7aWYoZS5pc0dyb3VwKCkpe2NvbnN0IGk9bmV3IHUoZSx0aGlzLmFsbG93RHJhZ2dpbmcsdGhpcy5ldmVudFR5cGUsdCk7cmV0dXJuIHRoaXMuZ2V0Q29udGV4dCgpLmNyZWF0ZUJlYW4oaSksaX1jb25zdCBpPW5ldyBmKGUsdGhpcy5hbGxvd0RyYWdnaW5nLHRoaXMuZ3JvdXBzRXhpc3QsdCk7cmV0dXJuIHRoaXMuZ2V0Q29udGV4dCgpLmNyZWF0ZUJlYW4oaSksaX1vbkNvbHVtbnNDaGFuZ2VkKCl7dGhpcy5oYXNMb2FkZWRJbml0aWFsU3RhdGV8fCh0aGlzLmhhc0xvYWRlZEluaXRpYWxTdGF0ZT0hMCx0aGlzLmlzSW5pdGlhbFN0YXRlPSEhdGhpcy5wYXJhbXMuaW5pdGlhbFN0YXRlKTtjb25zdCBlPXRoaXMuZ2V0RXhwYW5kZWRTdGF0ZXMoKSx0PXRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKTshdGhpcy5wYXJhbXMuc3VwcHJlc3NTeW5jTGF5b3V0V2l0aEdyaWQmJiF0P3RoaXMuYnVpbGRUcmVlRnJvbVdoYXRHcmlkSXNEaXNwbGF5aW5nKCk6dGhpcy5idWlsZFRyZWVGcm9tUHJvdmlkZWRDb2x1bW5EZWZzKCksdGhpcy5zZXRFeHBhbmRlZFN0YXRlcyhlKSx0aGlzLm1hcmtGaWx0ZXJlZENvbHVtbnMoKSx0aGlzLmZsYXR0ZW5BbmRGaWx0ZXJNb2RlbCgpLHRoaXMuaXNJbml0aWFsU3RhdGU9ITF9Z2V0RGlzcGxheWVkQ29sc0xpc3QoKXtyZXR1cm4gdGhpcy5kaXNwbGF5ZWRDb2xzTGlzdH1nZXRFeHBhbmRlZFN0YXRlcygpe2NvbnN0IGU9e307aWYodGhpcy5pc0luaXRpYWxTdGF0ZSl7Y29uc3R7ZXhwYW5kZWRHcm91cElkczp0fT10aGlzLnBhcmFtcy5pbml0aWFsU3RhdGU7cmV0dXJuIHQuZm9yRWFjaCh0PT57ZVt0XT0hMH0pLGV9cmV0dXJuIHRoaXMuYWxsQ29sc1RyZWU/KHRoaXMuZm9yRWFjaEl0ZW0odD0+e2lmKCF0LmlzR3JvdXAoKSlyZXR1cm47Y29uc3QgaT10LmdldENvbHVtbkdyb3VwKCk7aSYmKGVbaS5nZXRJZCgpXT10LmlzRXhwYW5kZWQoKSl9KSxlKTp7fX1zZXRFeHBhbmRlZFN0YXRlcyhlKXtpZighdGhpcy5hbGxDb2xzVHJlZSlyZXR1cm47Y29uc3R7aXNJbml0aWFsU3RhdGU6dH09dGhpczt0aGlzLmZvckVhY2hJdGVtKGk9PntpZighaS5pc0dyb3VwKCkpcmV0dXJuO2NvbnN0IHM9aS5nZXRDb2x1bW5Hcm91cCgpO2lmKHMpe2NvbnN0IHI9ZVtzLmdldElkKCldOyhudWxsIT1yfHx0KSYmaS5zZXRFeHBhbmRlZCghIXIpfX0pfWJ1aWxkVHJlZUZyb21XaGF0R3JpZElzRGlzcGxheWluZygpe3RoaXMuY29sRGVmU2VydmljZS5zeW5jTGF5b3V0V2l0aEdyaWQodGhpcy5zZXRDb2x1bW5MYXlvdXQuYmluZCh0aGlzKSl9c2V0Q29sdW1uTGF5b3V0KGUpe2NvbnN0IHQ9dGhpcy5jb2xEZWZTZXJ2aWNlLmNyZWF0ZUNvbHVtblRyZWUoZSk7dGhpcy5idWlsZExpc3RNb2RlbCh0KSx0aGlzLmdyb3Vwc0V4aXN0PWUuc29tZShlPT5lJiZ2b2lkIDAhPT1lLmNoaWxkcmVuKSx0aGlzLm1hcmtGaWx0ZXJlZENvbHVtbnMoKSx0aGlzLmZsYXR0ZW5BbmRGaWx0ZXJNb2RlbCgpfWJ1aWxkVHJlZUZyb21Qcm92aWRlZENvbHVtbkRlZnMoKXt0aGlzLmJ1aWxkTGlzdE1vZGVsKHRoaXMuY29sdW1uTW9kZWwuZ2V0UHJpbWFyeUNvbHVtblRyZWUoKSksdGhpcy5ncm91cHNFeGlzdD10aGlzLmNvbHVtbk1vZGVsLmlzUHJpbWFyeUNvbHVtbkdyb3Vwc1ByZXNlbnQoKX1idWlsZExpc3RNb2RlbChlKXtjb25zdCB0PXRoaXMub25Db2x1bW5FeHBhbmRlZC5iaW5kKHRoaXMpLGk9ZT0+e2UuYWRkRXZlbnRMaXN0ZW5lcihsLkVWRU5UX0VYUEFOREVEX0NIQU5HRUQsdCk7Y29uc3QgaT1lLnJlbW92ZUV2ZW50TGlzdGVuZXIuYmluZChlLGwuRVZFTlRfRVhQQU5ERURfQ0hBTkdFRCx0KTt0aGlzLmRlc3Ryb3lDb2x1bW5JdGVtRnVuY3MucHVzaChpKX0scz0oZSx0LGkpPT57ZS5mb3JFYWNoKGU9PntlIGluc3RhbmNlb2Ygci5Qcm92aWRlZENvbHVtbkdyb3VwP28oZSx0LGkpOm4oZSx0LGkpfSl9LG89KGUsdCxyKT0+e2NvbnN0IG89ZS5nZXRDb2xHcm91cERlZigpO2lmKG8mJm8uc3VwcHJlc3NDb2x1bW5zVG9vbFBhbmVsKXJldHVybjtpZihlLmlzUGFkZGluZygpKXJldHVybiB2b2lkIHMoZS5nZXRDaGlsZHJlbigpLHQscik7Y29uc3Qgbj10aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXlOYW1lRm9yUHJvdmlkZWRDb2x1bW5Hcm91cChudWxsLGUsImNvbHVtblRvb2xQYW5lbCIpLGE9bmV3IGwobixlLHQsITAsdGhpcy5leHBhbmRHcm91cHNCeURlZmF1bHQpO3IucHVzaChhKSxpKGEpLHMoZS5nZXRDaGlsZHJlbigpLHQrMSxhLmdldENoaWxkcmVuKCkpfSxuPShlLHQsaSk9PntpZihlLmdldENvbERlZigpJiZlLmdldENvbERlZigpLnN1cHByZXNzQ29sdW1uc1Rvb2xQYW5lbClyZXR1cm47Y29uc3Qgcz10aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXlOYW1lRm9yQ29sdW1uKGUsImNvbHVtblRvb2xQYW5lbCIpO2kucHVzaChuZXcgbChzLGUsdCkpfTt0aGlzLmRlc3Ryb3lDb2x1bW5UcmVlKCkscyhlLDAsdGhpcy5hbGxDb2xzVHJlZSl9b25Db2x1bW5FeHBhbmRlZCgpe3RoaXMuZmxhdHRlbkFuZEZpbHRlck1vZGVsKCl9ZmxhdHRlbkFuZEZpbHRlck1vZGVsKCl7dGhpcy5kaXNwbGF5ZWRDb2xzTGlzdD1bXTtjb25zdCBlPXQ9Pnt0LmlzUGFzc2VzRmlsdGVyKCkmJih0aGlzLmRpc3BsYXllZENvbHNMaXN0LnB1c2godCksdC5pc0dyb3VwKCkmJnQuaXNFeHBhbmRlZCgpJiZ0LmdldENoaWxkcmVuKCkuZm9yRWFjaChlKSl9O3RoaXMuYWxsQ29sc1RyZWUuZm9yRWFjaChlKSx0aGlzLnZpcnR1YWxMaXN0LnNldE1vZGVsKG5ldyBDKHRoaXMuZGlzcGxheWVkQ29sc0xpc3QpKTtjb25zdCB0PXRoaXMudmlydHVhbExpc3QuZ2V0TGFzdEZvY3VzZWRSb3coKTt0aGlzLnZpcnR1YWxMaXN0LnJlZnJlc2goKSxudWxsIT10JiZ0aGlzLmZvY3VzUm93SWZBbGl2ZSh0KSx0aGlzLm5vdGlmeUxpc3RlbmVycygpLHRoaXMucmVmcmVzaEFyaWFMYWJlbCgpfXJlZnJlc2hBcmlhTGFiZWwoKXtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLHQ9ZSgiYXJpYUNvbHVtblBhbmVsTGlzdCIsIkNvbHVtbiBMaXN0IiksaT1lKCJjb2x1bW5zIiwiQ29sdW1ucyIpLHM9dGhpcy5kaXNwbGF5ZWRDb2xzTGlzdC5sZW5ndGg7ci5fLnNldEFyaWFMYWJlbCh0aGlzLnZpcnR1YWxMaXN0LmdldEFyaWFFbGVtZW50KCksYCR7dH0gJHtzfSAke2l9YCl9Zm9jdXNSb3dJZkFsaXZlKGUpe3dpbmRvdy5zZXRUaW1lb3V0KCgpPT57dGhpcy5pc0FsaXZlKCkmJnRoaXMudmlydHVhbExpc3QuZm9jdXNSb3coZSl9LDApfWZvckVhY2hJdGVtKGUpe2NvbnN0IHQ9aT0+e2kuZm9yRWFjaChpPT57ZShpKSxpLmlzR3JvdXAoKSYmdChpLmdldENoaWxkcmVuKCkpfSl9O3RoaXMuYWxsQ29sc1RyZWUmJnQodGhpcy5hbGxDb2xzVHJlZSl9ZG9TZXRFeHBhbmRlZEFsbChlKXt0aGlzLmZvckVhY2hJdGVtKHQ9Pnt0LmlzR3JvdXAoKSYmdC5zZXRFeHBhbmRlZChlKX0pfXNldEdyb3Vwc0V4cGFuZGVkKGUsdCl7aWYoIXQpcmV0dXJuIHZvaWQgdGhpcy5kb1NldEV4cGFuZGVkQWxsKGUpO2NvbnN0IGk9W107dGhpcy5mb3JFYWNoSXRlbShzPT57aWYoIXMuaXNHcm91cCgpKXJldHVybjtjb25zdCByPXMuZ2V0Q29sdW1uR3JvdXAoKS5nZXRJZCgpO3QuaW5kZXhPZihyKT49MCYmKHMuc2V0RXhwYW5kZWQoZSksaS5wdXNoKHIpKX0pO2NvbnN0IHM9dC5maWx0ZXIoZT0+IXIuXy5pbmNsdWRlcyhpLGUpKTtzLmxlbmd0aD4wJiZjb25zb2xlLndhcm4oIkFHIEdyaWQ6IHVuYWJsZSB0byBmaW5kIGdyb3VwKHMpIGZvciBzdXBwbGllZCBncm91cElkczoiLHMpfWdldEV4cGFuZFN0YXRlKCl7bGV0IGU9MCx0PTA7cmV0dXJuIHRoaXMuZm9yRWFjaEl0ZW0oaT0+e2kuaXNHcm91cCgpJiYoaS5pc0V4cGFuZGVkKCk/ZSsrOnQrKyl9KSxlPjAmJnQ+MD9zLklOREVURVJNSU5BVEU6dD4wP3MuQ09MTEFQU0VEOnMuRVhQQU5ERUR9ZG9TZXRTZWxlY3RlZEFsbChlKXt0aGlzLm1vZGVsSXRlbVV0aWxzLnNlbGVjdEFsbENoaWxkcmVuKHRoaXMuYWxsQ29sc1RyZWUsZSx0aGlzLmV2ZW50VHlwZSl9Z2V0U2VsZWN0aW9uU3RhdGUoKXtsZXQgZT0wLHQ9MDtjb25zdCBpPXRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKTtpZih0aGlzLmZvckVhY2hJdGVtKHM9PntpZihzLmlzR3JvdXAoKSlyZXR1cm47aWYoIXMuaXNQYXNzZXNGaWx0ZXIoKSlyZXR1cm47Y29uc3Qgcj1zLmdldENvbHVtbigpLG89ci5nZXRDb2xEZWYoKTtsZXQgbjtpZihpKXtpZighci5pc0FsbG93UGl2b3QoKSYmIXIuaXNBbGxvd1Jvd0dyb3VwKCkmJiFyLmlzQWxsb3dWYWx1ZSgpKXJldHVybjtuPXIuaXNWYWx1ZUFjdGl2ZSgpfHxyLmlzUGl2b3RBY3RpdmUoKXx8ci5pc1Jvd0dyb3VwQWN0aXZlKCl9ZWxzZXtpZihvLmxvY2tWaXNpYmxlKXJldHVybjtuPXIuaXNWaXNpYmxlKCl9bj9lKys6dCsrfSksIShlPjAmJnQ+MCkpcmV0dXJuISgwPT09ZXx8dD4wKX1zZXRGaWx0ZXJUZXh0KGUpe3RoaXMuZmlsdGVyVGV4dD1yLl8uZXhpc3RzKGUpP2UudG9Mb3dlckNhc2UoKTpudWxsLHRoaXMubWFya0ZpbHRlcmVkQ29sdW1ucygpLHRoaXMuZmxhdHRlbkFuZEZpbHRlck1vZGVsKCl9bWFya0ZpbHRlcmVkQ29sdW1ucygpe2NvbnN0IGU9ZT0+e2lmKCFyLl8uZXhpc3RzKHRoaXMuZmlsdGVyVGV4dCkpcmV0dXJuITA7Y29uc3QgdD1lLmdldERpc3BsYXlOYW1lKCk7cmV0dXJuIG51bGw9PXR8fC0xIT09dC50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGhpcy5maWx0ZXJUZXh0KX0sdD0oaSxzKT0+e2xldCByPSExO2lmKGkuaXNHcm91cCgpKXtjb25zdCBvPWUoaSk7aS5nZXRDaGlsZHJlbigpLmZvckVhY2goZT0+e2NvbnN0IGk9dChlLG98fHMpO2kmJihyPWkpfSl9Y29uc3Qgbz0hKCFzJiYhcil8fGUoaSk7cmV0dXJuIGkuc2V0UGFzc2VzRmlsdGVyKG8pLG99O3RoaXMuYWxsQ29sc1RyZWUuZm9yRWFjaChlPT50KGUsITEpKX1ub3RpZnlMaXN0ZW5lcnMoKXt0aGlzLmZpcmVHcm91cEV4cGFuZGVkRXZlbnQoKSx0aGlzLmZpcmVTZWxlY3Rpb25DaGFuZ2VkRXZlbnQoKX1maXJlR3JvdXBFeHBhbmRlZEV2ZW50KCl7Y29uc3QgZT10aGlzLmdldEV4cGFuZFN0YXRlKCk7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiJncm91cEV4cGFuZGVkIixzdGF0ZTplfSl9ZmlyZVNlbGVjdGlvbkNoYW5nZWRFdmVudCgpe2lmKCF0aGlzLmFsbENvbHNUcmVlKXJldHVybjtjb25zdCBlPXRoaXMuZ2V0U2VsZWN0aW9uU3RhdGUoKTt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6InNlbGVjdGlvbkNoYW5nZWQiLHN0YXRlOmV9KX1nZXRFeHBhbmRlZEdyb3Vwcygpe2NvbnN0IGU9W107cmV0dXJuIHRoaXMuYWxsQ29sc1RyZWU/KHRoaXMuZm9yRWFjaEl0ZW0odD0+e3QuaXNHcm91cCgpJiZ0LmlzRXhwYW5kZWQoKSYmZS5wdXNoKHQuZ2V0Q29sdW1uR3JvdXAoKS5nZXRJZCgpKX0pLGUpOmV9fXkuVEVNUExBVEU9JzxkaXYgY2xhc3M9ImFnLWNvbHVtbi1zZWxlY3QtbGlzdCIgcm9sZT0icHJlc2VudGF0aW9uIj48L2Rpdj4nLHYoW09iamVjdChyLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLHkucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSx2KFtPYmplY3Qoci5BdXRvd2lyZWQpKCJ0b29sUGFuZWxDb2xEZWZTZXJ2aWNlIildLHkucHJvdG90eXBlLCJjb2xEZWZTZXJ2aWNlIix2b2lkIDApLHYoW09iamVjdChyLkF1dG93aXJlZCkoIm1vZGVsSXRlbVV0aWxzIildLHkucHJvdG90eXBlLCJtb2RlbEl0ZW1VdGlscyIsdm9pZCAwKSx2KFtyLlByZURlc3Ryb3ldLHkucHJvdG90eXBlLCJkZXN0cm95Q29sdW1uVHJlZSIsbnVsbCk7dmFyIFM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgdyBleHRlbmRzIHIuQ29tcG9uZW50e2NyZWF0ZVRlbXBsYXRlKCl7cmV0dXJuJzxkaXYgY2xhc3M9ImFnLXBpdm90LW1vZGUtcGFuZWwiPlxuICAgICAgICAgICAgICAgIDxhZy10b2dnbGUtYnV0dG9uIHJlZj0iY2JQaXZvdE1vZGUiIGNsYXNzPSJhZy1waXZvdC1tb2RlLXNlbGVjdCI+PC9hZy10b2dnbGUtYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+J31pbml0KCl7dGhpcy5zZXRUZW1wbGF0ZSh0aGlzLmNyZWF0ZVRlbXBsYXRlKCkpLHRoaXMuY2JQaXZvdE1vZGUuc2V0VmFsdWUodGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpKTtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpO3RoaXMuY2JQaXZvdE1vZGUuc2V0TGFiZWwoZSgicGl2b3RNb2RlIiwiUGl2b3QgTW9kZSIpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmNiUGl2b3RNb2RlLHIuRXZlbnRzLkVWRU5UX0ZJRUxEX1ZBTFVFX0NIQU5HRUQsdGhpcy5vbkJ0UGl2b3RNb2RlLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHIuRXZlbnRzLkVWRU5UX05FV19DT0xVTU5TX0xPQURFRCx0aGlzLm9uUGl2b3RNb2RlQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxyLkV2ZW50cy5FVkVOVF9DT0xVTU5fUElWT1RfTU9ERV9DSEFOR0VELHRoaXMub25QaXZvdE1vZGVDaGFuZ2VkLmJpbmQodGhpcykpfW9uQnRQaXZvdE1vZGUoKXtjb25zdCBlPSEhdGhpcy5jYlBpdm90TW9kZS5nZXRWYWx1ZSgpO2lmKGUhPT10aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RNb2RlKCkpe3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLnVwZGF0ZUdyaWRPcHRpb25zKHtvcHRpb25zOntwaXZvdE1vZGU6ZX0sc291cmNlOiJ0b29sUGFuZWxVaSJ9KTtjb25zdHthcGk6dH09dGhpczt0JiZ0LnJlZnJlc2hIZWFkZXIoKX19b25QaXZvdE1vZGVDaGFuZ2VkKCl7Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RNb2RlKCk7dGhpcy5jYlBpdm90TW9kZS5zZXRWYWx1ZShlKX19UyhbT2JqZWN0KHIuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sdy5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLFMoW09iamVjdChyLkF1dG93aXJlZCkoImdyaWRBcGkiKV0sdy5wcm90b3R5cGUsImFwaSIsdm9pZCAwKSxTKFtPYmplY3Qoci5SZWZTZWxlY3RvcikoImNiUGl2b3RNb2RlIildLHcucHJvdG90eXBlLCJjYlBpdm90TW9kZSIsdm9pZCAwKSxTKFtyLlByZUNvbnN0cnVjdF0sdy5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBiPWkoNCksRT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBSIGV4dGVuZHMgci5Db21wb25lbnR7Y29uc3RydWN0b3IoKXtzdXBlcihSLlRFTVBMQVRFKX1pbml0KGUsdCxpKXt0aGlzLmFsbG93RHJhZ2dpbmc9ZSx0aGlzLnBhcmFtcz10LHRoaXMuZXZlbnRUeXBlPWksdGhpcy5wcmltYXJ5Q29sc0hlYWRlclBhbmVsLmluaXQodGhpcy5wYXJhbXMpO2NvbnN0IHM9dGhpcy5wYXJhbXMuc3VwcHJlc3NDb2x1bW5GaWx0ZXIsbz10aGlzLnBhcmFtcy5zdXBwcmVzc0NvbHVtblNlbGVjdEFsbDt0aGlzLnBhcmFtcy5zdXBwcmVzc0NvbHVtbkV4cGFuZEFsbCYmcyYmbyYmdGhpcy5wcmltYXJ5Q29sc0hlYWRlclBhbmVsLnNldERpc3BsYXllZCghMSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5wcmltYXJ5Q29sc0xpc3RQYW5lbCwiZ3JvdXBFeHBhbmRlZCIsdGhpcy5vbkdyb3VwRXhwYW5kZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5wcmltYXJ5Q29sc0xpc3RQYW5lbCwic2VsZWN0aW9uQ2hhbmdlZCIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpKSx0aGlzLnByaW1hcnlDb2xzTGlzdFBhbmVsLmluaXQodGhpcy5wYXJhbXMsdGhpcy5hbGxvd0RyYWdnaW5nLHRoaXMuZXZlbnRUeXBlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnByaW1hcnlDb2xzSGVhZGVyUGFuZWwsImV4cGFuZEFsbCIsdGhpcy5vbkV4cGFuZEFsbC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnByaW1hcnlDb2xzSGVhZGVyUGFuZWwsImNvbGxhcHNlQWxsIix0aGlzLm9uQ29sbGFwc2VBbGwuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5wcmltYXJ5Q29sc0hlYWRlclBhbmVsLCJzZWxlY3RBbGwiLHRoaXMub25TZWxlY3RBbGwuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5wcmltYXJ5Q29sc0hlYWRlclBhbmVsLCJ1bnNlbGVjdEFsbCIsdGhpcy5vblVuc2VsZWN0QWxsLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucHJpbWFyeUNvbHNIZWFkZXJQYW5lbCwiZmlsdGVyQ2hhbmdlZCIsdGhpcy5vbkZpbHRlckNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlPW5ldyByLlBvc2l0aW9uYWJsZUZlYXR1cmUodGhpcy5nZXRHdWkoKSx7bWluSGVpZ2h0OjEwMH0pLHRoaXMuY3JlYXRlTWFuYWdlZEJlYW4odGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlKX10b2dnbGVSZXNpemFibGUoZSl7dGhpcy5wb3NpdGlvbmFibGVGZWF0dXJlLnNldFJlc2l6YWJsZSghIWUmJntib3R0b206ITB9KX1vbkV4cGFuZEFsbCgpe3RoaXMucHJpbWFyeUNvbHNMaXN0UGFuZWwuZG9TZXRFeHBhbmRlZEFsbCghMCl9b25Db2xsYXBzZUFsbCgpe3RoaXMucHJpbWFyeUNvbHNMaXN0UGFuZWwuZG9TZXRFeHBhbmRlZEFsbCghMSl9ZXhwYW5kR3JvdXBzKGUpe3RoaXMucHJpbWFyeUNvbHNMaXN0UGFuZWwuc2V0R3JvdXBzRXhwYW5kZWQoITAsZSl9Y29sbGFwc2VHcm91cHMoZSl7dGhpcy5wcmltYXJ5Q29sc0xpc3RQYW5lbC5zZXRHcm91cHNFeHBhbmRlZCghMSxlKX1zZXRDb2x1bW5MYXlvdXQoZSl7dGhpcy5wcmltYXJ5Q29sc0xpc3RQYW5lbC5zZXRDb2x1bW5MYXlvdXQoZSl9b25GaWx0ZXJDaGFuZ2VkKGUpe3RoaXMucHJpbWFyeUNvbHNMaXN0UGFuZWwuc2V0RmlsdGVyVGV4dChlLmZpbHRlclRleHQpfXN5bmNMYXlvdXRXaXRoR3JpZCgpe3RoaXMucHJpbWFyeUNvbHNMaXN0UGFuZWwub25Db2x1bW5zQ2hhbmdlZCgpfW9uU2VsZWN0QWxsKCl7dGhpcy5wcmltYXJ5Q29sc0xpc3RQYW5lbC5kb1NldFNlbGVjdGVkQWxsKCEwKX1vblVuc2VsZWN0QWxsKCl7dGhpcy5wcmltYXJ5Q29sc0xpc3RQYW5lbC5kb1NldFNlbGVjdGVkQWxsKCExKX1vbkdyb3VwRXhwYW5kZWQoZSl7dGhpcy5wcmltYXJ5Q29sc0hlYWRlclBhbmVsLnNldEV4cGFuZFN0YXRlKGUuc3RhdGUpLHRoaXMucGFyYW1zLm9uU3RhdGVVcGRhdGVkKCl9b25TZWxlY3Rpb25DaGFuZ2UoZSl7dGhpcy5wcmltYXJ5Q29sc0hlYWRlclBhbmVsLnNldFNlbGVjdGlvblN0YXRlKGUuc3RhdGUpfWdldEV4cGFuZGVkR3JvdXBzKCl7cmV0dXJuIHRoaXMucHJpbWFyeUNvbHNMaXN0UGFuZWwuZ2V0RXhwYW5kZWRHcm91cHMoKX19Ui5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctY29sdW1uLXNlbGVjdCI+XG4gICAgICAgICAgICA8YWctcHJpbWFyeS1jb2xzLWhlYWRlciByZWY9InByaW1hcnlDb2xzSGVhZGVyUGFuZWwiPjwvYWctcHJpbWFyeS1jb2xzLWhlYWRlcj5cbiAgICAgICAgICAgIDxhZy1wcmltYXJ5LWNvbHMtbGlzdCByZWY9InByaW1hcnlDb2xzTGlzdFBhbmVsIj48L2FnLXByaW1hcnktY29scy1saXN0PlxuICAgICAgICA8L2Rpdj4nLEUoW09iamVjdChyLlJlZlNlbGVjdG9yKSgicHJpbWFyeUNvbHNIZWFkZXJQYW5lbCIpXSxSLnByb3RvdHlwZSwicHJpbWFyeUNvbHNIZWFkZXJQYW5lbCIsdm9pZCAwKSxFKFtPYmplY3Qoci5SZWZTZWxlY3RvcikoInByaW1hcnlDb2xzTGlzdFBhbmVsIildLFIucHJvdG90eXBlLCJwcmltYXJ5Q29sc0xpc3RQYW5lbCIsdm9pZCAwKTtjbGFzcyB4IGV4dGVuZHMgci5Db21wb25lbnR7Y29uc3RydWN0b3IoKXtzdXBlcih4LlRFTVBMQVRFKSx0aGlzLmluaXRpYWxpc2VkPSExLHRoaXMuY2hpbGREZXN0cm95RnVuY3M9W119c2V0VmlzaWJsZShlKXtzdXBlci5zZXREaXNwbGF5ZWQoZSksZSYmIXRoaXMuaW5pdGlhbGlzZWQmJnRoaXMuaW5pdCh0aGlzLnBhcmFtcyl9aW5pdChlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3N1cHByZXNzQ29sdW1uTW92ZTohMSxzdXBwcmVzc0NvbHVtblNlbGVjdEFsbDohMSxzdXBwcmVzc0NvbHVtbkZpbHRlcjohMSxzdXBwcmVzc0NvbHVtbkV4cGFuZEFsbDohMSxjb250cmFjdENvbHVtblNlbGVjdGlvbjohMSxzdXBwcmVzc1Bpdm90TW9kZTohMSxzdXBwcmVzc1Jvd0dyb3VwczohMSxzdXBwcmVzc1ZhbHVlczohMSxzdXBwcmVzc1Bpdm90czohMSxzdXBwcmVzc1N5bmNMYXlvdXRXaXRoR3JpZDohMX0pO2lmKHRoaXMucGFyYW1zPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSxlKSx0aGlzLmlzUm93R3JvdXBpbmdNb2R1bGVMb2FkZWQoKSYmIXRoaXMucGFyYW1zLnN1cHByZXNzUGl2b3RNb2RlJiYodGhpcy5waXZvdE1vZGVQYW5lbD10aGlzLmNyZWF0ZUJlYW4obmV3IHcpLHRoaXMuY2hpbGREZXN0cm95RnVuY3MucHVzaCgoKT0+dGhpcy5kZXN0cm95QmVhbih0aGlzLnBpdm90TW9kZVBhbmVsKSksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLnBpdm90TW9kZVBhbmVsKSksdGhpcy5wcmltYXJ5Q29sc1BhbmVsPXRoaXMuY3JlYXRlQmVhbihuZXcgUiksdGhpcy5jaGlsZERlc3Ryb3lGdW5jcy5wdXNoKCgpPT50aGlzLmRlc3Ryb3lCZWFuKHRoaXMucHJpbWFyeUNvbHNQYW5lbCkpLHRoaXMucHJpbWFyeUNvbHNQYW5lbC5pbml0KCEwLHRoaXMucGFyYW1zLCJ0b29sUGFuZWxVaSIpLHRoaXMucHJpbWFyeUNvbHNQYW5lbC5hZGRDc3NDbGFzcygiYWctY29sdW1uLXBhbmVsLWNvbHVtbi1zZWxlY3QiKSx0aGlzLmFwcGVuZENoaWxkKHRoaXMucHJpbWFyeUNvbHNQYW5lbCksdGhpcy5pc1Jvd0dyb3VwaW5nTW9kdWxlTG9hZGVkKCkpe3RoaXMucGFyYW1zLnN1cHByZXNzUm93R3JvdXBzfHwodGhpcy5yb3dHcm91cERyb3Bab25lUGFuZWw9dGhpcy5jcmVhdGVCZWFuKG5ldyBiLlJvd0dyb3VwRHJvcFpvbmVQYW5lbCghMSkpLHRoaXMuY2hpbGREZXN0cm95RnVuY3MucHVzaCgoKT0+dGhpcy5kZXN0cm95QmVhbih0aGlzLnJvd0dyb3VwRHJvcFpvbmVQYW5lbCkpLHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5yb3dHcm91cERyb3Bab25lUGFuZWwpKSx0aGlzLnBhcmFtcy5zdXBwcmVzc1ZhbHVlc3x8KHRoaXMudmFsdWVzRHJvcFpvbmVQYW5lbD10aGlzLmNyZWF0ZUJlYW4obmV3IGIuVmFsdWVzRHJvcFpvbmVQYW5lbCghMSkpLHRoaXMuY2hpbGREZXN0cm95RnVuY3MucHVzaCgoKT0+dGhpcy5kZXN0cm95QmVhbih0aGlzLnZhbHVlc0Ryb3Bab25lUGFuZWwpKSx0aGlzLmFwcGVuZENoaWxkKHRoaXMudmFsdWVzRHJvcFpvbmVQYW5lbCkpLHRoaXMucGFyYW1zLnN1cHByZXNzUGl2b3RzfHwodGhpcy5waXZvdERyb3Bab25lUGFuZWw9dGhpcy5jcmVhdGVCZWFuKG5ldyBiLlBpdm90RHJvcFpvbmVQYW5lbCghMSkpLHRoaXMuY2hpbGREZXN0cm95RnVuY3MucHVzaCgoKT0+dGhpcy5kZXN0cm95QmVhbih0aGlzLnBpdm90RHJvcFpvbmVQYW5lbCkpLHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5waXZvdERyb3Bab25lUGFuZWwpKSx0aGlzLnNldExhc3RWaXNpYmxlKCk7Y29uc3QgZT10aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxyLkV2ZW50cy5FVkVOVF9DT0xVTU5fUElWT1RfTU9ERV9DSEFOR0VELCgpPT57dGhpcy5yZXNldENoaWxkcmVuSGVpZ2h0KCksdGhpcy5zZXRMYXN0VmlzaWJsZSgpfSk7dGhpcy5jaGlsZERlc3Ryb3lGdW5jcy5wdXNoKCgpPT5lKCkpfXRoaXMuaW5pdGlhbGlzZWQ9ITB9c2V0UGl2b3RNb2RlU2VjdGlvblZpc2libGUoZSl7dGhpcy5pc1Jvd0dyb3VwaW5nTW9kdWxlTG9hZGVkKCkmJih0aGlzLnBpdm90TW9kZVBhbmVsP3RoaXMucGl2b3RNb2RlUGFuZWwuc2V0RGlzcGxheWVkKGUpOmUmJih0aGlzLnBpdm90TW9kZVBhbmVsPXRoaXMuY3JlYXRlQmVhbihuZXcgdyksdGhpcy5nZXRHdWkoKS5pbnNlcnRCZWZvcmUodGhpcy5waXZvdE1vZGVQYW5lbC5nZXRHdWkoKSx0aGlzLmdldEd1aSgpLmZpcnN0Q2hpbGQpLHRoaXMuY2hpbGREZXN0cm95RnVuY3MucHVzaCgoKT0+dGhpcy5kZXN0cm95QmVhbih0aGlzLnBpdm90TW9kZVBhbmVsKSkpLHRoaXMuc2V0TGFzdFZpc2libGUoKSl9c2V0Um93R3JvdXBzU2VjdGlvblZpc2libGUoZSl7dGhpcy5pc1Jvd0dyb3VwaW5nTW9kdWxlTG9hZGVkKCkmJih0aGlzLnJvd0dyb3VwRHJvcFpvbmVQYW5lbD90aGlzLnJvd0dyb3VwRHJvcFpvbmVQYW5lbC5zZXREaXNwbGF5ZWQoZSk6ZSYmKHRoaXMucm93R3JvdXBEcm9wWm9uZVBhbmVsPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IGIuUm93R3JvdXBEcm9wWm9uZVBhbmVsKCExKSksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLnJvd0dyb3VwRHJvcFpvbmVQYW5lbCkpLHRoaXMuc2V0TGFzdFZpc2libGUoKSl9c2V0VmFsdWVzU2VjdGlvblZpc2libGUoZSl7dGhpcy5pc1Jvd0dyb3VwaW5nTW9kdWxlTG9hZGVkKCkmJih0aGlzLnZhbHVlc0Ryb3Bab25lUGFuZWw/dGhpcy52YWx1ZXNEcm9wWm9uZVBhbmVsLnNldERpc3BsYXllZChlKTplJiYodGhpcy52YWx1ZXNEcm9wWm9uZVBhbmVsPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IGIuVmFsdWVzRHJvcFpvbmVQYW5lbCghMSkpLHRoaXMuYXBwZW5kQ2hpbGQodGhpcy52YWx1ZXNEcm9wWm9uZVBhbmVsKSksdGhpcy5zZXRMYXN0VmlzaWJsZSgpKX1zZXRQaXZvdFNlY3Rpb25WaXNpYmxlKGUpe3RoaXMuaXNSb3dHcm91cGluZ01vZHVsZUxvYWRlZCgpJiYodGhpcy5waXZvdERyb3Bab25lUGFuZWw/dGhpcy5waXZvdERyb3Bab25lUGFuZWwuc2V0RGlzcGxheWVkKGUpOmUmJih0aGlzLnBpdm90RHJvcFpvbmVQYW5lbD10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBiLlBpdm90RHJvcFpvbmVQYW5lbCghMSkpLHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5waXZvdERyb3Bab25lUGFuZWwpLHRoaXMucGl2b3REcm9wWm9uZVBhbmVsLnNldERpc3BsYXllZChlKSksdGhpcy5zZXRMYXN0VmlzaWJsZSgpKX1zZXRSZXNpemVycygpe1t0aGlzLnByaW1hcnlDb2xzUGFuZWwsdGhpcy5yb3dHcm91cERyb3Bab25lUGFuZWwsdGhpcy52YWx1ZXNEcm9wWm9uZVBhbmVsLHRoaXMucGl2b3REcm9wWm9uZVBhbmVsXS5mb3JFYWNoKGU9PntpZighZSlyZXR1cm47Y29uc3QgdD1lLmdldEd1aSgpO2UudG9nZ2xlUmVzaXphYmxlKCF0LmNsYXNzTGlzdC5jb250YWlucygiYWctbGFzdC1jb2x1bW4tZHJvcCIpJiYhdC5jbGFzc0xpc3QuY29udGFpbnMoImFnLWhpZGRlbiIpKX0pfXNldExhc3RWaXNpYmxlKCl7Y29uc3QgZT10aGlzLmdldEd1aSgpO0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUucXVlcnlTZWxlY3RvckFsbCgiLmFnLWNvbHVtbi1kcm9wIikpLmZvckVhY2goZT0+ZS5jbGFzc0xpc3QucmVtb3ZlKCJhZy1sYXN0LWNvbHVtbi1kcm9wIikpO2NvbnN0IHQ9ZS5xdWVyeVNlbGVjdG9yQWxsKCIuYWctY29sdW1uLWRyb3A6bm90KC5hZy1oaWRkZW4pIiksaT1yLl8ubGFzdCh0KTtpJiZpLmNsYXNzTGlzdC5hZGQoImFnLWxhc3QtY29sdW1uLWRyb3AiKSx0aGlzLnNldFJlc2l6ZXJzKCl9cmVzZXRDaGlsZHJlbkhlaWdodCgpe2NvbnN0IGU9dGhpcy5nZXRHdWkoKS5jaGlsZHJlbjtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7Y29uc3QgaT1lW3RdO2kuc3R5bGUucmVtb3ZlUHJvcGVydHkoImhlaWdodCIpLGkuc3R5bGUucmVtb3ZlUHJvcGVydHkoImZsZXgiKX19aXNSb3dHcm91cGluZ01vZHVsZUxvYWRlZCgpe3JldHVybiByLk1vZHVsZVJlZ2lzdHJ5Ll9fYXNzZXJ0UmVnaXN0ZXJlZChyLk1vZHVsZU5hbWVzLlJvd0dyb3VwaW5nTW9kdWxlLCJSb3cgR3JvdXBpbmciLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSl9ZXhwYW5kQ29sdW1uR3JvdXBzKGUpe3RoaXMucHJpbWFyeUNvbHNQYW5lbC5leHBhbmRHcm91cHMoZSl9Y29sbGFwc2VDb2x1bW5Hcm91cHMoZSl7dGhpcy5wcmltYXJ5Q29sc1BhbmVsLmNvbGxhcHNlR3JvdXBzKGUpfXNldENvbHVtbkxheW91dChlKXt0aGlzLnByaW1hcnlDb2xzUGFuZWwuc2V0Q29sdW1uTGF5b3V0KGUpfXN5bmNMYXlvdXRXaXRoR3JpZCgpe3RoaXMucHJpbWFyeUNvbHNQYW5lbC5zeW5jTGF5b3V0V2l0aEdyaWQoKX1kZXN0cm95Q2hpbGRyZW4oKXt0aGlzLmNoaWxkRGVzdHJveUZ1bmNzLmZvckVhY2goZT0+ZSgpKSx0aGlzLmNoaWxkRGVzdHJveUZ1bmNzLmxlbmd0aD0wLHIuXy5jbGVhckVsZW1lbnQodGhpcy5nZXRHdWkoKSl9cmVmcmVzaChlKXtyZXR1cm4gdGhpcy5kZXN0cm95Q2hpbGRyZW4oKSx0aGlzLmluaXQoZSksITB9Z2V0U3RhdGUoKXtyZXR1cm57ZXhwYW5kZWRHcm91cElkczp0aGlzLnByaW1hcnlDb2xzUGFuZWwuZ2V0RXhwYW5kZWRHcm91cHMoKX19ZGVzdHJveSgpe3RoaXMuZGVzdHJveUNoaWxkcmVuKCksc3VwZXIuZGVzdHJveSgpfX14LlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1jb2x1bW4tcGFuZWwiPjwvZGl2Pic7dmFyIFQ9aSg3KSxEPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBPPWNsYXNze3NlbGVjdEFsbENoaWxkcmVuKGUsdCxpKXtjb25zdCBzPXRoaXMuZXh0cmFjdEFsbExlYWZDb2x1bW5zKGUpO3RoaXMuc2V0QWxsQ29sdW1ucyhzLHQsaSl9c2V0Q29sdW1uKGUsdCxpKXt0aGlzLnNldEFsbENvbHVtbnMoW2VdLHQsaSl9c2V0QWxsQ29sdW1ucyhlLHQsaSl7dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpP3RoaXMuc2V0QWxsUGl2b3QoZSx0LGkpOnRoaXMuc2V0QWxsVmlzaWJsZShlLHQsaSl9ZXh0cmFjdEFsbExlYWZDb2x1bW5zKGUpe2NvbnN0IHQ9W10saT1lPT57ZS5mb3JFYWNoKGU9PntlLmlzUGFzc2VzRmlsdGVyKCkmJihlLmlzR3JvdXAoKT9pKGUuZ2V0Q2hpbGRyZW4oKSk6dC5wdXNoKGUuZ2V0Q29sdW1uKCkpKX0pfTtyZXR1cm4gaShlKSx0fXNldEFsbFZpc2libGUoZSx0LGkpe2NvbnN0IHM9W107ZS5mb3JFYWNoKGU9PntlLmdldENvbERlZigpLmxvY2tWaXNpYmxlfHxlLmlzVmlzaWJsZSgpIT10JiZzLnB1c2goe2NvbElkOmUuZ2V0SWQoKSxoaWRlOiF0fSl9KSxzLmxlbmd0aD4wJiZ0aGlzLmNvbHVtbk1vZGVsLmFwcGx5Q29sdW1uU3RhdGUoe3N0YXRlOnN9LGkpfXNldEFsbFBpdm90KGUsdCxpKXt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImZ1bmN0aW9uc1Bhc3NpdmUiKT90aGlzLnNldEFsbFBpdm90UGFzc2l2ZShlLHQpOnRoaXMuc2V0QWxsUGl2b3RBY3RpdmUoZSx0LGkpfXNldEFsbFBpdm90UGFzc2l2ZShlLHQpe2NvbnN0IGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRQaXZvdENvbHVtbnMoKS5zbGljZSgpLHM9dGhpcy5jb2x1bW5Nb2RlbC5nZXRWYWx1ZUNvbHVtbnMoKS5zbGljZSgpLG89dGhpcy5jb2x1bW5Nb2RlbC5nZXRSb3dHcm91cENvbHVtbnMoKS5zbGljZSgpO2xldCBuPSExLGE9ITEsbD0hMTtjb25zdCBkPXQ/ZT0+e2UuaXNBbnlGdW5jdGlvbkFjdGl2ZSgpfHwoZS5pc0FsbG93VmFsdWUoKT8ocy5wdXNoKGUpLGE9ITApOmUuaXNBbGxvd1Jvd0dyb3VwKCk/KG8ucHVzaChlKSxuPSEwKTplLmlzQWxsb3dQaXZvdCgpJiYoaS5wdXNoKGUpLGw9ITApKX06ZT0+e2UuaXNBbnlGdW5jdGlvbkFjdGl2ZSgpJiYoaS5pbmRleE9mKGUpPj0wJiYoci5fLnJlbW92ZUZyb21BcnJheShpLGUpLG49ITApLHMuaW5kZXhPZihlKT49MCYmKHIuXy5yZW1vdmVGcm9tQXJyYXkocyxlKSxhPSEwKSxvLmluZGV4T2YoZSk+PTAmJihyLl8ucmVtb3ZlRnJvbUFycmF5KG8sZSksbD0hMCkpfTtpZihlLmZvckVhY2goZCksbil7Y29uc3QgZT17dHlwZTpyLkV2ZW50cy5FVkVOVF9DT0xVTU5fUElWT1RfQ0hBTkdFX1JFUVVFU1QsY29sdW1uczppfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfWlmKGwpe2NvbnN0IGU9e3R5cGU6ci5FdmVudHMuRVZFTlRfQ09MVU1OX1JPV19HUk9VUF9DSEFOR0VfUkVRVUVTVCxjb2x1bW5zOm99O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9aWYoYSl7Y29uc3QgZT17dHlwZTpyLkV2ZW50cy5FVkVOVF9DT0xVTU5fVkFMVUVfQ0hBTkdFX1JFUVVFU1QsY29sdW1uczpvfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfX1zZXRBbGxQaXZvdEFjdGl2ZShlLHQsaSl7Y29uc3Qgcz1bXSxyPXQ/ZT0+e2lmKCFlLmlzQW55RnVuY3Rpb25BY3RpdmUoKSlpZihlLmlzQWxsb3dWYWx1ZSgpKXtjb25zdCB0PSJzdHJpbmciPT10eXBlb2YgZS5nZXRBZ2dGdW5jKCk/ZS5nZXRBZ2dGdW5jKCk6dGhpcy5hZ2dGdW5jU2VydmljZS5nZXREZWZhdWx0QWdnRnVuYyhlKTtzLnB1c2goe2NvbElkOmUuZ2V0SWQoKSxhZ2dGdW5jOnR9KX1lbHNlIGUuaXNBbGxvd1Jvd0dyb3VwKCk/cy5wdXNoKHtjb2xJZDplLmdldElkKCkscm93R3JvdXA6ITB9KTplLmlzQWxsb3dQaXZvdCgpJiZzLnB1c2goe2NvbElkOmUuZ2V0SWQoKSxwaXZvdDohMH0pfTplPT57KGUuaXNQaXZvdEFjdGl2ZSgpfHxlLmlzUm93R3JvdXBBY3RpdmUoKXx8ZS5pc1ZhbHVlQWN0aXZlKCkpJiZzLnB1c2goe2NvbElkOmUuZ2V0SWQoKSxwaXZvdDohMSxyb3dHcm91cDohMSxhZ2dGdW5jOm51bGx9KX07ZS5mb3JFYWNoKHIpLHMubGVuZ3RoPjAmJnRoaXMuY29sdW1uTW9kZWwuYXBwbHlDb2x1bW5TdGF0ZSh7c3RhdGU6c30saSl9dXBkYXRlQ29sdW1ucyhlKXtjb25zdHtjb2x1bW5zOnQsdmlzaWJsZVN0YXRlOmkscGl2b3RTdGF0ZTpzLGV2ZW50VHlwZTpyfT1lLG89dC5tYXAoZT0+e2NvbnN0IHQ9ZS5nZXRDb2xJZCgpO2lmKHRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSl7Y29uc3QgZT1udWxsPT1zP3ZvaWQgMDpzW3RdO3JldHVybntjb2xJZDp0LHBpdm90Om51bGw9PWU/dm9pZCAwOmUucGl2b3Qscm93R3JvdXA6bnVsbD09ZT92b2lkIDA6ZS5yb3dHcm91cCxhZ2dGdW5jOm51bGw9PWU/dm9pZCAwOmUuYWdnRnVuY319cmV0dXJue2NvbElkOnQsaGlkZTohKG51bGw9PWk/dm9pZCAwOmlbdF0pfX0pO3RoaXMuY29sdW1uTW9kZWwuYXBwbHlDb2x1bW5TdGF0ZSh7c3RhdGU6b30scil9Y3JlYXRlUGl2b3RTdGF0ZShlKXtyZXR1cm57cGl2b3Q6ZS5pc1Bpdm90QWN0aXZlKCkscm93R3JvdXA6ZS5pc1Jvd0dyb3VwQWN0aXZlKCksYWdnRnVuYzplLmlzVmFsdWVBY3RpdmUoKT9lLmdldEFnZ0Z1bmMoKTp2b2lkIDB9fX07RChbT2JqZWN0KHIuQXV0b3dpcmVkKSgiYWdnRnVuY1NlcnZpY2UiKV0sTy5wcm90b3R5cGUsImFnZ0Z1bmNTZXJ2aWNlIix2b2lkIDApLEQoW09iamVjdChyLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLE8ucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxEKFtPYmplY3Qoci5BdXRvd2lyZWQpKCJncmlkT3B0aW9uc1NlcnZpY2UiKV0sTy5wcm90b3R5cGUsImdyaWRPcHRpb25zU2VydmljZSIsdm9pZCAwKSxEKFtPYmplY3Qoci5BdXRvd2lyZWQpKCJldmVudFNlcnZpY2UiKV0sTy5wcm90b3R5cGUsImV2ZW50U2VydmljZSIsdm9pZCAwKSxPPUQoW09iamVjdChyLkJlYW4pKCJtb2RlbEl0ZW1VdGlscyIpXSxPKTtjb25zdCBBPXt2ZXJzaW9uOiIzMS4xLjEiLG1vZHVsZU5hbWU6ci5Nb2R1bGVOYW1lcy5Db2x1bW5zVG9vbFBhbmVsTW9kdWxlLGJlYW5zOltPXSxhZ1N0YWNrQ29tcG9uZW50czpbe2NvbXBvbmVudE5hbWU6IkFnUHJpbWFyeUNvbHNIZWFkZXIiLGNvbXBvbmVudENsYXNzOmF9LHtjb21wb25lbnROYW1lOiJBZ1ByaW1hcnlDb2xzTGlzdCIsY29tcG9uZW50Q2xhc3M6eX0se2NvbXBvbmVudE5hbWU6IkFnUHJpbWFyeUNvbHMiLGNvbXBvbmVudENsYXNzOlJ9XSx1c2VyQ29tcG9uZW50czpbe2NvbXBvbmVudE5hbWU6ImFnQ29sdW1uc1Rvb2xQYW5lbCIsY29tcG9uZW50Q2xhc3M6eH1dLGRlcGVuZGFudE1vZHVsZXM6W28uRW50ZXJwcmlzZUNvcmVNb2R1bGUsYi5Sb3dHcm91cGluZ01vZHVsZSxULlNpZGVCYXJNb2R1bGVdfTtpLmQodCwiQ29sdW1uc1Rvb2xQYW5lbE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIEF9KSksaS5kKHQsIlByaW1hcnlDb2xzUGFuZWwiLChmdW5jdGlvbigpe3JldHVybiBSfSkpfSxmdW5jdGlvbihlLHQsaSl7InVzZSBzdHJpY3QiO2kucih0KTt2YXIgcz1pKDApLHI9aSgzKSxvPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBuPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1Yntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jZWxsUmFuZ2VzPVtdLHRoaXMuYm9keVNjcm9sbExpc3RlbmVyPXRoaXMub25Cb2R5U2Nyb2xsLmJpbmQodGhpcyksdGhpcy5kcmFnZ2luZz0hMSx0aGlzLmludGVyc2VjdGlvblJhbmdlPSExfWluaXQoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9ORVdfQ09MVU1OU19MT0FERUQsKCk9PnRoaXMub25Db2x1bW5zQ2hhbmdlZCgpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9DT0xVTU5fVklTSUJMRSx0aGlzLm9uQ29sdW1uc0NoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ09MVU1OX1ZBTFVFX0NIQU5HRUQsdGhpcy5vbkNvbHVtbnNDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9QSVZPVF9NT0RFX0NIQU5HRUQsKCk9PnRoaXMucmVtb3ZlQWxsQ2VsbFJhbmdlcygpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9DT0xVTU5fUk9XX0dST1VQX0NIQU5HRUQsKCk9PnRoaXMucmVtb3ZlQWxsQ2VsbFJhbmdlcygpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9DT0xVTU5fUElWT1RfQ0hBTkdFRCwoKT0+dGhpcy5yZW1vdmVBbGxDZWxsUmFuZ2VzKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9HUk9VUF9PUEVORUQsdGhpcy5yZWZyZXNoTGFzdFJhbmdlU3RhcnQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ09MVU1OX01PVkVELHRoaXMucmVmcmVzaExhc3RSYW5nZVN0YXJ0LmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9QSU5ORUQsdGhpcy5yZWZyZXNoTGFzdFJhbmdlU3RhcnQuYmluZCh0aGlzKSksdGhpcy5jdHJsc1NlcnZpY2Uud2hlblJlYWR5KCgpPT57Y29uc3QgZT10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKTt0aGlzLmF1dG9TY3JvbGxTZXJ2aWNlPW5ldyBzLkF1dG9TY3JvbGxTZXJ2aWNlKHtzY3JvbGxDb250YWluZXI6ZS5nZXRCb2R5Vmlld3BvcnRFbGVtZW50KCksc2Nyb2xsQXhpczoieHkiLGdldFZlcnRpY2FsUG9zaXRpb246KCk9PmUuZ2V0U2Nyb2xsRmVhdHVyZSgpLmdldFZTY3JvbGxQb3NpdGlvbigpLnRvcCxzZXRWZXJ0aWNhbFBvc2l0aW9uOnQ9PmUuZ2V0U2Nyb2xsRmVhdHVyZSgpLnNldFZlcnRpY2FsU2Nyb2xsUG9zaXRpb24odCksZ2V0SG9yaXpvbnRhbFBvc2l0aW9uOigpPT5lLmdldFNjcm9sbEZlYXR1cmUoKS5nZXRIU2Nyb2xsUG9zaXRpb24oKS5sZWZ0LHNldEhvcml6b250YWxQb3NpdGlvbjp0PT5lLmdldFNjcm9sbEZlYXR1cmUoKS5zZXRIb3Jpem9udGFsU2Nyb2xsUG9zaXRpb24odCksc2hvdWxkU2tpcFZlcnRpY2FsU2Nyb2xsOigpPT4hdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNEb21MYXlvdXQoIm5vcm1hbCIpLHNob3VsZFNraXBIb3Jpem9udGFsU2Nyb2xsOigpPT4hZS5nZXRTY3JvbGxGZWF0dXJlKCkuaXNIb3Jpem9udGFsU2Nyb2xsU2hvd2luZygpfSl9KX1vbkNvbHVtbnNDaGFuZ2VkKCl7dGhpcy5yZWZyZXNoTGFzdFJhbmdlU3RhcnQoKTtjb25zdCBlPXRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsRGlzcGxheWVkQ29sdW1ucygpO3RoaXMuY2VsbFJhbmdlcy5mb3JFYWNoKHQ9Pntjb25zdCBpPXQuY29sdW1uczt0LmNvbHVtbnM9dC5jb2x1bW5zLmZpbHRlcih0PT50LmlzVmlzaWJsZSgpJiYtMSE9PWUuaW5kZXhPZih0KSk7IXMuXy5hcmVFcXVhbChpLHQuY29sdW1ucykmJnRoaXMuZGlzcGF0Y2hDaGFuZ2VkRXZlbnQoITEsITAsdC5pZCl9KTtjb25zdCB0PXRoaXMuY2VsbFJhbmdlcy5sZW5ndGg7dGhpcy5jZWxsUmFuZ2VzPXRoaXMuY2VsbFJhbmdlcy5maWx0ZXIoZT0+ZS5jb2x1bW5zLmxlbmd0aD4wKSx0PnRoaXMuY2VsbFJhbmdlcy5sZW5ndGgmJnRoaXMuZGlzcGF0Y2hDaGFuZ2VkRXZlbnQoITEsITApfXJlZnJlc2hMYXN0UmFuZ2VTdGFydCgpe2NvbnN0IGU9cy5fLmxhc3QodGhpcy5jZWxsUmFuZ2VzKTtlJiZ0aGlzLnJlZnJlc2hSYW5nZVN0YXJ0KGUpfWlzQ29udGlndW91c1JhbmdlKGUpe2NvbnN0IHQ9ZS5jb2x1bW5zO2lmKCF0Lmxlbmd0aClyZXR1cm4hMTtjb25zdCBpPXRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsRGlzcGxheWVkQ29sdW1ucygpLHI9dC5tYXAoZT0+aS5pbmRleE9mKGUpKS5zb3J0KChlLHQpPT5lLXQpO3JldHVybiBzLl8ubGFzdChyKS1yWzBdKzE9PT10Lmxlbmd0aH1nZXRSYW5nZVN0YXJ0Um93KGUpe2lmKGUuc3RhcnRSb3cmJmUuZW5kUm93KXJldHVybiB0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuYmVmb3JlKGUuc3RhcnRSb3csZS5lbmRSb3cpP2Uuc3RhcnRSb3c6ZS5lbmRSb3c7cmV0dXJue3Jvd0luZGV4OjAscm93UGlubmVkOnRoaXMucGlubmVkUm93TW9kZWwuZ2V0UGlubmVkVG9wUm93Q291bnQoKT4wPyJ0b3AiOm51bGx9fWdldFJhbmdlRW5kUm93KGUpe2lmKGUuc3RhcnRSb3cmJmUuZW5kUm93KXJldHVybiB0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuYmVmb3JlKGUuc3RhcnRSb3csZS5lbmRSb3cpP2UuZW5kUm93OmUuc3RhcnRSb3c7Y29uc3QgdD10aGlzLnBpbm5lZFJvd01vZGVsLmdldFBpbm5lZEJvdHRvbVJvd0NvdW50KCk7cmV0dXJuIHQ+MD97cm93SW5kZXg6dC0xLHJvd1Bpbm5lZDoiYm90dG9tIn06e3Jvd0luZGV4OnRoaXMucm93TW9kZWwuZ2V0Um93Q291bnQoKS0xLHJvd1Bpbm5lZDpudWxsfX1zZXRSYW5nZVRvQ2VsbChlLHQ9ITEpe2lmKCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJhbmdlU2VsZWN0aW9uIikpcmV0dXJuO2NvbnN0IGk9dGhpcy5jYWxjdWxhdGVDb2x1bW5zQmV0d2VlbihlLmNvbHVtbixlLmNvbHVtbik7aWYoIWkpcmV0dXJuOyh0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzTXVsdGlSYW5nZVNlbGVjdGlvbiIpfHwhdHx8cy5fLm1pc3NpbmcodGhpcy5jZWxsUmFuZ2VzKSkmJnRoaXMucmVtb3ZlQWxsQ2VsbFJhbmdlcyghMCk7Y29uc3Qgcj17cm93SW5kZXg6ZS5yb3dJbmRleCxyb3dQaW5uZWQ6ZS5yb3dQaW5uZWR9LG89e3N0YXJ0Um93OnIsZW5kUm93OnIsY29sdW1uczppLHN0YXJ0Q29sdW1uOmUuY29sdW1ufTt0aGlzLmNlbGxSYW5nZXMucHVzaChvKSx0aGlzLnNldE5ld2VzdFJhbmdlU3RhcnRDZWxsKGUpLHRoaXMub25EcmFnU3RvcCgpLHRoaXMuZGlzcGF0Y2hDaGFuZ2VkRXZlbnQoITAsITApfWV4dGVuZExhdGVzdFJhbmdlVG9DZWxsKGUpe2lmKHRoaXMuaXNFbXB0eSgpfHwhdGhpcy5uZXdlc3RSYW5nZVN0YXJ0Q2VsbClyZXR1cm47Y29uc3QgdD1zLl8ubGFzdCh0aGlzLmNlbGxSYW5nZXMpO3RoaXMudXBkYXRlUmFuZ2VFbmQodCxlKX11cGRhdGVSYW5nZUVuZChlLHQsaT0hMSl7Y29uc3Qgcz10LmNvbHVtbixyPXRoaXMuY2FsY3VsYXRlQ29sdW1uc0JldHdlZW4oZS5zdGFydENvbHVtbixzKTtyJiYhdGhpcy5pc0xhc3RDZWxsT2ZSYW5nZShlLHQpJiYoZS5jb2x1bW5zPXIsZS5lbmRSb3c9e3Jvd0luZGV4OnQucm93SW5kZXgscm93UGlubmVkOnQucm93UGlubmVkfSxpfHx0aGlzLmRpc3BhdGNoQ2hhbmdlZEV2ZW50KCEwLCEwLGUuaWQpKX1yZWZyZXNoUmFuZ2VTdGFydChlKXtjb25zdHtzdGFydENvbHVtbjp0LGNvbHVtbnM6aX09ZSxyPSh0LGkpPT57Y29uc3Qgcz1lLmNvbHVtbnMuZmlsdGVyKGU9PmUhPT10KTt0PyhlLnN0YXJ0Q29sdW1uPXQsZS5jb2x1bW5zPWk/W3QsLi4uc106Wy4uLnMsdF0pOmUuY29sdW1ucz1zfSx7bGVmdDpvLHJpZ2h0Om59PXRoaXMuZ2V0UmFuZ2VFZGdlQ29sdW1ucyhlKTtpZih0PT09aVswXSYmdCE9PW8pcmV0dXJuIHZvaWQgcihvLCEwKTt0PT09cy5fLmxhc3QoaSkmJnQ9PT1uJiZyKG4sITEpfWdldFJhbmdlRWRnZUNvbHVtbnMoZSl7Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKSxpPWUuY29sdW1ucy5tYXAoZT0+dC5pbmRleE9mKGUpKS5maWx0ZXIoZT0+ZT4tMSkuc29ydCgoZSx0KT0+ZS10KTtyZXR1cm57bGVmdDp0W2lbMF1dLHJpZ2h0OnRbcy5fLmxhc3QoaSldfX1leHRlbmRMYXRlc3RSYW5nZUluRGlyZWN0aW9uKGUpe2lmKHRoaXMuaXNFbXB0eSgpfHwhdGhpcy5uZXdlc3RSYW5nZVN0YXJ0Q2VsbClyZXR1cm47Y29uc3QgdD1lLmtleSxpPWUuY3RybEtleXx8ZS5tZXRhS2V5LHI9cy5fLmxhc3QodGhpcy5jZWxsUmFuZ2VzKSxvPXRoaXMubmV3ZXN0UmFuZ2VTdGFydENlbGwsbj1yLmNvbHVtbnNbMF0sYT1zLl8ubGFzdChyLmNvbHVtbnMpLGw9ci5lbmRSb3cucm93SW5kZXgsZD1yLmVuZFJvdy5yb3dQaW5uZWQsYz17Y29sdW1uOm8uY29sdW1uPT09bj9hOm4scm93SW5kZXg6bCxyb3dQaW5uZWQ6ZH0saD10aGlzLmNlbGxOYXZpZ2F0aW9uU2VydmljZS5nZXROZXh0Q2VsbFRvRm9jdXModCxjLGkpO3JldHVybiBoPyh0aGlzLnNldENlbGxSYW5nZSh7cm93U3RhcnRJbmRleDpvLnJvd0luZGV4LHJvd1N0YXJ0UGlubmVkOm8ucm93UGlubmVkLHJvd0VuZEluZGV4Omgucm93SW5kZXgscm93RW5kUGlubmVkOmgucm93UGlubmVkLGNvbHVtblN0YXJ0Om8uY29sdW1uLGNvbHVtbkVuZDpoLmNvbHVtbn0pLGgpOnZvaWQgMH1zZXRDZWxsUmFuZ2UoZSl7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSYW5nZVNlbGVjdGlvbiIpJiYodGhpcy5yZW1vdmVBbGxDZWxsUmFuZ2VzKCEwKSx0aGlzLmFkZENlbGxSYW5nZShlKSl9c2V0Q2VsbFJhbmdlcyhlKXtzLl8uc2hhbGxvd0NvbXBhcmUodGhpcy5jZWxsUmFuZ2VzLGUpfHwodGhpcy5yZW1vdmVBbGxDZWxsUmFuZ2VzKCEwKSxlLmZvckVhY2goZT0+e2UuY29sdW1ucyYmZS5zdGFydFJvdyYmdGhpcy5zZXROZXdlc3RSYW5nZVN0YXJ0Q2VsbCh7cm93SW5kZXg6ZS5zdGFydFJvdy5yb3dJbmRleCxyb3dQaW5uZWQ6ZS5zdGFydFJvdy5yb3dQaW5uZWQsY29sdW1uOmUuY29sdW1uc1swXX0pLHRoaXMuY2VsbFJhbmdlcy5wdXNoKGUpfSksdGhpcy5kaXNwYXRjaENoYW5nZWRFdmVudCghMSwhMCkpfXNldE5ld2VzdFJhbmdlU3RhcnRDZWxsKGUpe3RoaXMubmV3ZXN0UmFuZ2VTdGFydENlbGw9ZX1jbGVhckNlbGxSYW5nZUNlbGxWYWx1ZXMoZSl7bGV0e2NlbGxSYW5nZXM6dH09ZTtjb25zdHtjZWxsRXZlbnRTb3VyY2U6aT0icmFuZ2VTZXJ2aWNlIixkaXNwYXRjaFdyYXBwZXJFdmVudHM6cix3cmFwcGVyRXZlbnRTb3VyY2U6bz0iZGVsZXRlS2V5In09ZTtpZihyKXtjb25zdCBlPXt0eXBlOnMuRXZlbnRzLkVWRU5UX1JBTkdFX0RFTEVURV9TVEFSVCxzb3VyY2U6b307dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX1pZih0fHwodD10aGlzLmNlbGxSYW5nZXMpLHQuZm9yRWFjaChlPT57dGhpcy5mb3JFYWNoUm93SW5SYW5nZShlLHQ9Pntjb25zdCBzPXRoaXMucm93UG9zaXRpb25VdGlscy5nZXRSb3dOb2RlKHQpO2lmKHMpZm9yKGxldCB0PTA7dDxlLmNvbHVtbnMubGVuZ3RoO3QrKyl7Y29uc3Qgcj10aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4oZS5jb2x1bW5zW3RdKTtyJiZyLmlzQ2VsbEVkaXRhYmxlKHMpJiZzLnNldERhdGFWYWx1ZShyLG51bGwsaSl9fSl9KSxyKXtjb25zdCBlPXt0eXBlOnMuRXZlbnRzLkVWRU5UX1JBTkdFX0RFTEVURV9FTkQsc291cmNlOm99O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9fWNyZWF0ZUNlbGxSYW5nZUZyb21DZWxsUmFuZ2VQYXJhbXMoZSl7bGV0IHQsaT0hMTtpZihlLmNvbHVtbnMpdD1lLmNvbHVtbnMubWFwKGU9PnRoaXMuY29sdW1uTW9kZWwuZ2V0Q29sdW1uV2l0aFZhbGlkYXRpb24oZSkpLmZpbHRlcihlPT5lKTtlbHNle2NvbnN0IHM9dGhpcy5jb2x1bW5Nb2RlbC5nZXRDb2x1bW5XaXRoVmFsaWRhdGlvbihlLmNvbHVtblN0YXJ0KSxyPXRoaXMuY29sdW1uTW9kZWwuZ2V0Q29sdW1uV2l0aFZhbGlkYXRpb24oZS5jb2x1bW5FbmQpO2lmKCFzfHwhcilyZXR1cm47dD10aGlzLmNhbGN1bGF0ZUNvbHVtbnNCZXR3ZWVuKHMsciksdCYmdC5sZW5ndGgmJihpPXRbMF0hPT1zKX1pZighdClyZXR1cm47cmV0dXJue3N0YXJ0Um93Om51bGwhPWUucm93U3RhcnRJbmRleD97cm93SW5kZXg6ZS5yb3dTdGFydEluZGV4LHJvd1Bpbm5lZDplLnJvd1N0YXJ0UGlubmVkfHxudWxsfTp2b2lkIDAsZW5kUm93Om51bGwhPWUucm93RW5kSW5kZXg/e3Jvd0luZGV4OmUucm93RW5kSW5kZXgscm93UGlubmVkOmUucm93RW5kUGlubmVkfHxudWxsfTp2b2lkIDAsY29sdW1uczp0LHN0YXJ0Q29sdW1uOmk/cy5fLmxhc3QodCk6dFswXX19YWRkQ2VsbFJhbmdlKGUpe2lmKCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJhbmdlU2VsZWN0aW9uIikpcmV0dXJuO2NvbnN0IHQ9dGhpcy5jcmVhdGVDZWxsUmFuZ2VGcm9tQ2VsbFJhbmdlUGFyYW1zKGUpO3QmJih0LnN0YXJ0Um93JiZ0aGlzLnNldE5ld2VzdFJhbmdlU3RhcnRDZWxsKHtyb3dJbmRleDp0LnN0YXJ0Um93LnJvd0luZGV4LHJvd1Bpbm5lZDp0LnN0YXJ0Um93LnJvd1Bpbm5lZCxjb2x1bW46dC5zdGFydENvbHVtbn0pLHRoaXMuY2VsbFJhbmdlcy5wdXNoKHQpLHRoaXMuZGlzcGF0Y2hDaGFuZ2VkRXZlbnQoITEsITAsdC5pZCkpfWdldENlbGxSYW5nZXMoKXtyZXR1cm4gdGhpcy5jZWxsUmFuZ2VzfWlzRW1wdHkoKXtyZXR1cm4gMD09PXRoaXMuY2VsbFJhbmdlcy5sZW5ndGh9aXNNb3JlVGhhbk9uZUNlbGwoKXtjb25zdCBlPXRoaXMuY2VsbFJhbmdlcy5sZW5ndGg7aWYoMD09PWUpcmV0dXJuITE7aWYoZT4xKXJldHVybiEwO2NvbnN0IHQ9dGhpcy5jZWxsUmFuZ2VzWzBdLGk9dGhpcy5nZXRSYW5nZVN0YXJ0Um93KHQpLHM9dGhpcy5nZXRSYW5nZUVuZFJvdyh0KTtyZXR1cm4gaS5yb3dQaW5uZWQhPT1zLnJvd1Bpbm5lZHx8aS5yb3dJbmRleCE9PXMucm93SW5kZXh8fDEhPT10LmNvbHVtbnMubGVuZ3RofWFyZUFsbFJhbmdlc0FibGVUb01lcmdlKCl7Y29uc3QgZT1uZXcgTWFwO2lmKHRoaXMuY2VsbFJhbmdlcy5sZW5ndGg8PTEpcmV0dXJuITA7bGV0IHQ7dGhpcy5jZWxsUmFuZ2VzLmZvckVhY2godD0+e3RoaXMuZm9yRWFjaFJvd0luUmFuZ2UodCxpPT57Y29uc3Qgcz1gJHtpLnJvd1Bpbm5lZHx8Im5vcm1hbCJ9XyR7aS5yb3dJbmRleH1gLHI9ZS5nZXQocyksbz10LmNvbHVtbnMubWFwKGU9PmUuZ2V0SWQoKSk7aWYocil7Y29uc3QgZT1vLmZpbHRlcihlPT4tMT09PXIuaW5kZXhPZihlKSk7ci5wdXNoKC4uLmUpfWVsc2UgZS5zZXQocyxvKX0pfSk7Zm9yKGNvbnN0IGkgb2YgZS52YWx1ZXMoKSl7Y29uc3QgZT1pLnNvcnQoKS5qb2luKCk7aWYodm9pZCAwIT09dCl7aWYodCE9PWUpcmV0dXJuITF9ZWxzZSB0PWV9cmV0dXJuITB9Zm9yRWFjaFJvd0luUmFuZ2UoZSx0KXtjb25zdCBpPXRoaXMuZ2V0UmFuZ2VTdGFydFJvdyhlKSxzPXRoaXMuZ2V0UmFuZ2VFbmRSb3coZSk7bGV0IHI9aTtmb3IoO3ImJih0KHIpLCF0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuc2FtZVJvdyhyLHMpKTspcj10aGlzLmNlbGxOYXZpZ2F0aW9uU2VydmljZS5nZXRSb3dCZWxvdyhyKX1yZW1vdmVBbGxDZWxsUmFuZ2VzKGUpe3RoaXMuaXNFbXB0eSgpfHwodGhpcy5vbkRyYWdTdG9wKCksdGhpcy5jZWxsUmFuZ2VzLmxlbmd0aD0wLGV8fHRoaXMuZGlzcGF0Y2hDaGFuZ2VkRXZlbnQoITEsITApKX1vbkJvZHlTY3JvbGwoKXt0aGlzLmRyYWdnaW5nJiZ0aGlzLmxhc3RNb3VzZUV2ZW50JiZ0aGlzLm9uRHJhZ2dpbmcodGhpcy5sYXN0TW91c2VFdmVudCl9aXNDZWxsSW5BbnlSYW5nZShlKXtyZXR1cm4gdGhpcy5nZXRDZWxsUmFuZ2VDb3VudChlKT4wfWlzQ2VsbEluU3BlY2lmaWNSYW5nZShlLHQpe2NvbnN0IGk9bnVsbCE9PXQuY29sdW1ucyYmcy5fLmluY2x1ZGVzKHQuY29sdW1ucyxlLmNvbHVtbikscj10aGlzLmlzUm93SW5SYW5nZShlLnJvd0luZGV4LGUucm93UGlubmVkLHQpO3JldHVybiBpJiZyfWlzTGFzdENlbGxPZlJhbmdlKGUsdCl7Y29uc3R7c3RhcnRSb3c6aSxlbmRSb3c6cn09ZSxvPXRoaXMucm93UG9zaXRpb25VdGlscy5iZWZvcmUoaSxyKT9yOmksbj10LnJvd0luZGV4PT09by5yb3dJbmRleCYmdC5yb3dQaW5uZWQ9PT1vLnJvd1Bpbm5lZCxhPWUuY29sdW1uc1swXSxsPXMuXy5sYXN0KGUuY29sdW1ucyksZD1lLnN0YXJ0Q29sdW1uPT09YT9sOmE7cmV0dXJuIHQuY29sdW1uPT09ZCYmbn1pc0JvdHRvbVJpZ2h0Q2VsbChlLHQpe2NvbnN0IGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCkscj1lLmNvbHVtbnMubWFwKGU9PmkuaW5kZXhPZihlKSkuc29ydCgoZSx0KT0+ZS10KSx7c3RhcnRSb3c6byxlbmRSb3c6bn09ZSxhPXRoaXMucm93UG9zaXRpb25VdGlscy5iZWZvcmUobyxuKT9uOm8sbD1pLmluZGV4T2YodC5jb2x1bW4pPT09cy5fLmxhc3QociksZD10LnJvd0luZGV4PT09YS5yb3dJbmRleCYmcy5fLm1ha2VOdWxsKHQucm93UGlubmVkKT09PXMuXy5tYWtlTnVsbChhLnJvd1Bpbm5lZCk7cmV0dXJuIGwmJmR9Z2V0Q2VsbFJhbmdlQ291bnQoZSl7cmV0dXJuIHRoaXMuaXNFbXB0eSgpPzA6dGhpcy5jZWxsUmFuZ2VzLmZpbHRlcih0PT50aGlzLmlzQ2VsbEluU3BlY2lmaWNSYW5nZShlLHQpKS5sZW5ndGh9aXNSb3dJblJhbmdlKGUsdCxpKXtjb25zdCBzPXRoaXMuZ2V0UmFuZ2VTdGFydFJvdyhpKSxyPXRoaXMuZ2V0UmFuZ2VFbmRSb3coaSksbz17cm93SW5kZXg6ZSxyb3dQaW5uZWQ6dHx8bnVsbH0sbj1vLnJvd0luZGV4PT09cy5yb3dJbmRleCYmby5yb3dQaW5uZWQ9PXMucm93UGlubmVkLGE9by5yb3dJbmRleD09PXIucm93SW5kZXgmJm8ucm93UGlubmVkPT1yLnJvd1Bpbm5lZDtpZihufHxhKXJldHVybiEwO2NvbnN0IGw9IXRoaXMucm93UG9zaXRpb25VdGlscy5iZWZvcmUobyxzKSxkPXRoaXMucm93UG9zaXRpb25VdGlscy5iZWZvcmUobyxyKTtyZXR1cm4gbCYmZH1nZXREcmFnZ2luZ1JhbmdlKCl7cmV0dXJuIHRoaXMuZHJhZ2dpbmdSYW5nZX1vbkRyYWdTdGFydChlKXtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSYW5nZVNlbGVjdGlvbiIpKXJldHVybjtjb25zdHtjdHJsS2V5OnQsbWV0YUtleTppLHNoaWZ0S2V5OnJ9PWUsbz10fHxpLG49ISEhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc011bHRpUmFuZ2VTZWxlY3Rpb24iKSYmbyxhPXImJnMuXy5leGlzdHNBbmROb3RFbXB0eSh0aGlzLmNlbGxSYW5nZXMpO258fGEmJiFzLl8uZXhpc3RzKHMuXy5sYXN0KHRoaXMuY2VsbFJhbmdlcykudHlwZSl8fHRoaXMucmVtb3ZlQWxsQ2VsbFJhbmdlcyghMCk7Y29uc3QgbD10aGlzLmRyYWdTZXJ2aWNlLmdldFN0YXJ0VGFyZ2V0KCk7aWYobCYmdGhpcy51cGRhdGVWYWx1ZXNPbk1vdmUobCksdGhpcy5sYXN0Q2VsbEhvdmVyZWQpe2lmKHRoaXMuZHJhZ2dpbmc9ITAsdGhpcy5sYXN0TW91c2VFdmVudD1lLHRoaXMuaW50ZXJzZWN0aW9uUmFuZ2U9biYmdGhpcy5nZXRDZWxsUmFuZ2VDb3VudCh0aGlzLmxhc3RDZWxsSG92ZXJlZCk+MSxhfHx0aGlzLnNldE5ld2VzdFJhbmdlU3RhcnRDZWxsKHRoaXMubGFzdENlbGxIb3ZlcmVkKSx0aGlzLmNlbGxSYW5nZXMubGVuZ3RoPjApdGhpcy5kcmFnZ2luZ1JhbmdlPXMuXy5sYXN0KHRoaXMuY2VsbFJhbmdlcyk7ZWxzZXtjb25zdCBlPXtyb3dJbmRleDp0aGlzLmxhc3RDZWxsSG92ZXJlZC5yb3dJbmRleCxyb3dQaW5uZWQ6dGhpcy5sYXN0Q2VsbEhvdmVyZWQucm93UGlubmVkfTt0aGlzLmRyYWdnaW5nUmFuZ2U9e3N0YXJ0Um93OmUsZW5kUm93OmUsY29sdW1uczpbdGhpcy5sYXN0Q2VsbEhvdmVyZWQuY29sdW1uXSxzdGFydENvbHVtbjp0aGlzLm5ld2VzdFJhbmdlU3RhcnRDZWxsLmNvbHVtbn0sdGhpcy5jZWxsUmFuZ2VzLnB1c2godGhpcy5kcmFnZ2luZ1JhbmdlKX10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKS5hZGRTY3JvbGxFdmVudExpc3RlbmVyKHRoaXMuYm9keVNjcm9sbExpc3RlbmVyKSx0aGlzLmRpc3BhdGNoQ2hhbmdlZEV2ZW50KCEwLCExLHRoaXMuZHJhZ2dpbmdSYW5nZS5pZCl9fWludGVyc2VjdExhc3RSYW5nZShlKXtpZihlJiZ0aGlzLmRyYWdnaW5nKXJldHVybjtpZih0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzTXVsdGlSYW5nZVNlbGVjdGlvbiIpKXJldHVybjtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm47Y29uc3QgdD1zLl8ubGFzdCh0aGlzLmNlbGxSYW5nZXMpLGk9dGhpcy5nZXRSYW5nZVN0YXJ0Um93KHQpLHI9dGhpcy5nZXRSYW5nZUVuZFJvdyh0KSxvPVtdO3RoaXMuY2VsbFJhbmdlcy5zbGljZSgwLC0xKS5mb3JFYWNoKGU9Pntjb25zdCBuPXRoaXMuZ2V0UmFuZ2VTdGFydFJvdyhlKSxhPXRoaXMuZ2V0UmFuZ2VFbmRSb3coZSksbD1lLmNvbHVtbnMsZD1sLmZpbHRlcihlPT4tMT09PXQuY29sdW1ucy5pbmRleE9mKGUpKTtpZihkLmxlbmd0aD09PWwubGVuZ3RoKXJldHVybiB2b2lkIG8ucHVzaChlKTtpZih0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuYmVmb3JlKHIsbil8fHRoaXMucm93UG9zaXRpb25VdGlscy5iZWZvcmUoYSxpKSlyZXR1cm4gdm9pZCBvLnB1c2goZSk7Y29uc3QgYz1vLmxlbmd0aDtpZih0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuYmVmb3JlKG4saSkpe2NvbnN0IGU9e2NvbHVtbnM6Wy4uLmxdLHN0YXJ0Q29sdW1uOnQuc3RhcnRDb2x1bW4sc3RhcnRSb3c6T2JqZWN0LmFzc2lnbih7fSxuKSxlbmRSb3c6dGhpcy5jZWxsTmF2aWdhdGlvblNlcnZpY2UuZ2V0Um93QWJvdmUoaSl9O28ucHVzaChlKX1pZihkLmxlbmd0aD4wKXtjb25zdCBlPXtjb2x1bW5zOmQsc3RhcnRDb2x1bW46cy5fLmluY2x1ZGVzKGQsdC5zdGFydENvbHVtbik/dC5zdGFydENvbHVtbjpkWzBdLHN0YXJ0Um93OnRoaXMucm93UG9zaXRpb25VdGlscy5yb3dNYXgoW09iamVjdC5hc3NpZ24oe30saSksT2JqZWN0LmFzc2lnbih7fSxuKV0pLGVuZFJvdzp0aGlzLnJvd1Bvc2l0aW9uVXRpbHMucm93TWluKFtPYmplY3QuYXNzaWduKHt9LHIpLE9iamVjdC5hc3NpZ24oe30sYSldKX07by5wdXNoKGUpfXRoaXMucm93UG9zaXRpb25VdGlscy5iZWZvcmUocixhKSYmby5wdXNoKHtjb2x1bW5zOlsuLi5sXSxzdGFydENvbHVtbjp0LnN0YXJ0Q29sdW1uLHN0YXJ0Um93OnRoaXMuY2VsbE5hdmlnYXRpb25TZXJ2aWNlLmdldFJvd0JlbG93KHIpLGVuZFJvdzpPYmplY3QuYXNzaWduKHt9LGEpfSksby5sZW5ndGgtYz09MSYmKG9bby5sZW5ndGgtMV0uaWQ9ZS5pZCl9KSx0aGlzLmNlbGxSYW5nZXM9byxlJiZ0aGlzLmRpc3BhdGNoQ2hhbmdlZEV2ZW50KCExLCEwKX11cGRhdGVWYWx1ZXNPbk1vdmUoZSl7Y29uc3QgdD1zLl8uZ2V0Q3RybEZvckV2ZW50VGFyZ2V0KHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLGUscy5DZWxsQ3RybC5ET01fREFUQV9LRVlfQ0VMTF9DVFJMKSxpPW51bGw9PXQ/dm9pZCAwOnQuZ2V0Q2VsbFBvc2l0aW9uKCk7dGhpcy5jZWxsSGFzQ2hhbmdlZD0hMSwhaXx8dGhpcy5sYXN0Q2VsbEhvdmVyZWQmJnRoaXMuY2VsbFBvc2l0aW9uVXRpbHMuZXF1YWxzKGksdGhpcy5sYXN0Q2VsbEhvdmVyZWQpfHwodGhpcy5sYXN0Q2VsbEhvdmVyZWQmJih0aGlzLmNlbGxIYXNDaGFuZ2VkPSEwKSx0aGlzLmxhc3RDZWxsSG92ZXJlZD1pKX1vbkRyYWdnaW5nKGUpe2lmKCF0aGlzLmRyYWdnaW5nfHwhZSlyZXR1cm47dGhpcy51cGRhdGVWYWx1ZXNPbk1vdmUoZS50YXJnZXQpLHRoaXMubGFzdE1vdXNlRXZlbnQ9ZTtjb25zdCB0PXRoaXMubGFzdENlbGxIb3ZlcmVkLGk9ZT0+dCYmdC5yb3dQaW5uZWQ9PT1lJiZ0aGlzLm5ld2VzdFJhbmdlU3RhcnRDZWxsLnJvd1Bpbm5lZD09PWUscz1pKCJ0b3AiKXx8aSgiYm90dG9tIik7aWYodGhpcy5hdXRvU2Nyb2xsU2VydmljZS5jaGVjayhlLHMpLCF0aGlzLmNlbGxIYXNDaGFuZ2VkKXJldHVybjtjb25zdCByPXRoaXMuY2FsY3VsYXRlQ29sdW1uc0JldHdlZW4odGhpcy5uZXdlc3RSYW5nZVN0YXJ0Q2VsbC5jb2x1bW4sdC5jb2x1bW4pO3ImJih0aGlzLmRyYWdnaW5nUmFuZ2UuZW5kUm93PXtyb3dJbmRleDp0LnJvd0luZGV4LHJvd1Bpbm5lZDp0LnJvd1Bpbm5lZH0sdGhpcy5kcmFnZ2luZ1JhbmdlLmNvbHVtbnM9cix0aGlzLmRpc3BhdGNoQ2hhbmdlZEV2ZW50KCExLCExLHRoaXMuZHJhZ2dpbmdSYW5nZS5pZCkpfW9uRHJhZ1N0b3AoKXtpZighdGhpcy5kcmFnZ2luZylyZXR1cm47Y29uc3R7aWQ6ZX09dGhpcy5kcmFnZ2luZ1JhbmdlO3RoaXMuYXV0b1Njcm9sbFNlcnZpY2UuZW5zdXJlQ2xlYXJlZCgpLHRoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRCb2R5Q3RybCgpLnJlbW92ZVNjcm9sbEV2ZW50TGlzdGVuZXIodGhpcy5ib2R5U2Nyb2xsTGlzdGVuZXIpLHRoaXMubGFzdE1vdXNlRXZlbnQ9bnVsbCx0aGlzLmRyYWdnaW5nPSExLHRoaXMuZHJhZ2dpbmdSYW5nZT12b2lkIDAsdGhpcy5sYXN0Q2VsbEhvdmVyZWQ9dm9pZCAwLHRoaXMuaW50ZXJzZWN0aW9uUmFuZ2UmJih0aGlzLmludGVyc2VjdGlvblJhbmdlPSExLHRoaXMuaW50ZXJzZWN0TGFzdFJhbmdlKCkpLHRoaXMuZGlzcGF0Y2hDaGFuZ2VkRXZlbnQoITEsITAsZSl9ZGlzcGF0Y2hDaGFuZ2VkRXZlbnQoZSx0LGkpe2NvbnN0IHI9e3R5cGU6cy5FdmVudHMuRVZFTlRfUkFOR0VfU0VMRUNUSU9OX0NIQU5HRUQsc3RhcnRlZDplLGZpbmlzaGVkOnQsaWQ6aX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChyKX1jYWxjdWxhdGVDb2x1bW5zQmV0d2VlbihlLHQpe2NvbnN0IGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCkscz1lPT09dCxyPWkuaW5kZXhPZihlKTtpZihyPDApcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKGBBRyBHcmlkOiBjb2x1bW4gJHtlLmdldElkKCl9IGlzIG5vdCB2aXNpYmxlYCk7Y29uc3Qgbz1zP3I6aS5pbmRleE9mKHQpO2lmKG88MClyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oYEFHIEdyaWQ6IGNvbHVtbiAke3QuZ2V0SWQoKX0gaXMgbm90IHZpc2libGVgKTtpZihzKXJldHVybltlXTtjb25zdCBuPU1hdGgubWluKHIsbyksYT1uPT09cj9vOnIsbD1bXTtmb3IobGV0IGU9bjtlPD1hO2UrKylsLnB1c2goaVtlXSk7cmV0dXJuIGx9fTtvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dNb2RlbCIpXSxuLnByb3RvdHlwZSwicm93TW9kZWwiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZHJhZ1NlcnZpY2UiKV0sbi5wcm90b3R5cGUsImRyYWdTZXJ2aWNlIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLG4ucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjZWxsTmF2aWdhdGlvblNlcnZpY2UiKV0sbi5wcm90b3R5cGUsImNlbGxOYXZpZ2F0aW9uU2VydmljZSIsdm9pZCAwKSxvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJwaW5uZWRSb3dNb2RlbCIpXSxuLnByb3RvdHlwZSwicGlubmVkUm93TW9kZWwiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93UG9zaXRpb25VdGlscyIpXSxuLnByb3RvdHlwZSwicm93UG9zaXRpb25VdGlscyIsdm9pZCAwKSxvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjZWxsUG9zaXRpb25VdGlscyIpXSxuLnByb3RvdHlwZSwiY2VsbFBvc2l0aW9uVXRpbHMiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY3RybHNTZXJ2aWNlIildLG4ucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksbyhbcy5Qb3N0Q29uc3RydWN0XSxuLnByb3RvdHlwZSwiaW5pdCIsbnVsbCksbj1vKFtPYmplY3Qocy5CZWFuKSgicmFuZ2VTZXJ2aWNlIildLG4pO3ZhciBhPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGwgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jaGFuZ2VkQ2FsY3VsYXRlZFZhbHVlcz0hMSx0aGlzLmRyYWdnaW5nPSExLHRoaXMuc2hvdWxkRGVzdHJveU9uRW5kRHJhZ2dpbmc9ITF9aW5pdCgpe3RoaXMuZHJhZ1NlcnZpY2UuYWRkRHJhZ1NvdXJjZSh7ZHJhZ1N0YXJ0UGl4ZWxzOjAsZUVsZW1lbnQ6dGhpcy5nZXRHdWkoKSxvbkRyYWdTdGFydDp0aGlzLm9uRHJhZ1N0YXJ0LmJpbmQodGhpcyksb25EcmFnZ2luZzplPT57dGhpcy5kcmFnZ2luZz0hMCx0aGlzLnJhbmdlU2VydmljZS5hdXRvU2Nyb2xsU2VydmljZS5jaGVjayhlKSx0aGlzLmNoYW5nZWRDYWxjdWxhdGVkVmFsdWVzJiYodGhpcy5vbkRyYWcoZSksdGhpcy5jaGFuZ2VkQ2FsY3VsYXRlZFZhbHVlcz0hMSl9LG9uRHJhZ1N0b3A6ZT0+e3RoaXMuZHJhZ2dpbmc9ITEsdGhpcy5vbkRyYWdFbmQoZSksdGhpcy5jbGVhclZhbHVlcygpLHRoaXMucmFuZ2VTZXJ2aWNlLmF1dG9TY3JvbGxTZXJ2aWNlLmVuc3VyZUNsZWFyZWQoKSxkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5nZXREcmFnZ2luZ0Nzc0NsYXNzKCkpLHRoaXMuc2hvdWxkRGVzdHJveU9uRW5kRHJhZ2dpbmcmJnRoaXMuZGVzdHJveSgpfX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZ2V0R3VpKCksIm1vdXNlZG93biIsdGhpcy5wcmV2ZW50UmFuZ2VFeHRlbnNpb24uYmluZCh0aGlzKSl9aXNEcmFnZ2luZygpe3JldHVybiB0aGlzLmRyYWdnaW5nfWdldENlbGxDdHJsKCl7cmV0dXJuIHRoaXMuY2VsbEN0cmx9c2V0Q2VsbEN0cmwoZSl7dGhpcy5jZWxsQ3RybD1lfWdldENlbGxSYW5nZSgpe3JldHVybiB0aGlzLmNlbGxSYW5nZX1zZXRDZWxsUmFuZ2UoZSl7dGhpcy5jZWxsUmFuZ2U9ZX1nZXRSYW5nZVN0YXJ0Um93KCl7cmV0dXJuIHRoaXMucmFuZ2VTdGFydFJvd31zZXRSYW5nZVN0YXJ0Um93KGUpe3RoaXMucmFuZ2VTdGFydFJvdz1lfWdldFJhbmdlRW5kUm93KCl7cmV0dXJuIHRoaXMucmFuZ2VFbmRSb3d9c2V0UmFuZ2VFbmRSb3coZSl7dGhpcy5yYW5nZUVuZFJvdz1lfWdldExhc3RDZWxsSG92ZXJlZCgpe3JldHVybiB0aGlzLmxhc3RDZWxsSG92ZXJlZH1wcmV2ZW50UmFuZ2VFeHRlbnNpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX1vbkRyYWdTdGFydChlKXt0aGlzLmNlbGxIb3Zlckxpc3RlbmVyPXRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY3RybHNTZXJ2aWNlLmdldEdyaWRDdHJsKCkuZ2V0R3VpKCksIm1vdXNlbW92ZSIsdGhpcy51cGRhdGVWYWx1ZXNPbk1vdmUuYmluZCh0aGlzKSksZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKHRoaXMuZ2V0RHJhZ2dpbmdDc3NDbGFzcygpKX1nZXREcmFnZ2luZ0Nzc0NsYXNzKCl7cmV0dXJuYGFnLWRyYWdnaW5nLSR7dGhpcy50eXBlPT09cy5TZWxlY3Rpb25IYW5kbGVUeXBlLkZJTEw/ImZpbGwiOiJyYW5nZSJ9LWhhbmRsZWB9dXBkYXRlVmFsdWVzT25Nb3ZlKGUpe2NvbnN0IHQ9dGhpcy5tb3VzZUV2ZW50U2VydmljZS5nZXRDZWxsUG9zaXRpb25Gb3JFdmVudChlKTshdHx8dGhpcy5sYXN0Q2VsbEhvdmVyZWQmJnRoaXMuY2VsbFBvc2l0aW9uVXRpbHMuZXF1YWxzKHQsdGhpcy5sYXN0Q2VsbEhvdmVyZWQpfHwodGhpcy5sYXN0Q2VsbEhvdmVyZWQ9dCx0aGlzLmNoYW5nZWRDYWxjdWxhdGVkVmFsdWVzPSEwKX1nZXRUeXBlKCl7cmV0dXJuIHRoaXMudHlwZX1yZWZyZXNoKGUpe2NvbnN0IHQ9dGhpcy5nZXRDZWxsQ3RybCgpLGk9dGhpcy5nZXRHdWkoKSxyPXMuXy5sYXN0KHRoaXMucmFuZ2VTZXJ2aWNlLmdldENlbGxSYW5nZXMoKSksbz1yLnN0YXJ0Um93LG49ci5lbmRSb3c7aWYobyYmbil7dGhpcy5yb3dQb3NpdGlvblV0aWxzLmJlZm9yZShuLG8pPyh0aGlzLnNldFJhbmdlU3RhcnRSb3cobiksdGhpcy5zZXRSYW5nZUVuZFJvdyhvKSk6KHRoaXMuc2V0UmFuZ2VTdGFydFJvdyhvKSx0aGlzLnNldFJhbmdlRW5kUm93KG4pKX1pZih0IT09ZXx8IXMuXy5pc1Zpc2libGUoaSkpe3RoaXMuc2V0Q2VsbEN0cmwoZSk7Y29uc3QgdD1lLmdldENvbXAoKS5nZXRQYXJlbnRPZlZhbHVlKCk7dCYmdC5hcHBlbmRDaGlsZChpKX10aGlzLnNldENlbGxSYW5nZShyKX1jbGVhclZhbHVlcygpe3RoaXMubGFzdENlbGxIb3ZlcmVkPXZvaWQgMCx0aGlzLnJlbW92ZUxpc3RlbmVycygpfXJlbW92ZUxpc3RlbmVycygpe3RoaXMuY2VsbEhvdmVyTGlzdGVuZXImJih0aGlzLmNlbGxIb3Zlckxpc3RlbmVyKCksdGhpcy5jZWxsSG92ZXJMaXN0ZW5lcj12b2lkIDApfWRlc3Ryb3koKXtpZighdGhpcy5zaG91bGREZXN0cm95T25FbmREcmFnZ2luZyYmdGhpcy5pc0RyYWdnaW5nKCkpcmV0dXJuIHMuXy5zZXREaXNwbGF5ZWQodGhpcy5nZXRHdWkoKSwhMSksdm9pZCh0aGlzLnNob3VsZERlc3Ryb3lPbkVuZERyYWdnaW5nPSEwKTt0aGlzLnNob3VsZERlc3Ryb3lPbkVuZERyYWdnaW5nPSExLHN1cGVyLmRlc3Ryb3koKSx0aGlzLnJlbW92ZUxpc3RlbmVycygpO2NvbnN0IGU9dGhpcy5nZXRHdWkoKTtlLnBhcmVudEVsZW1lbnQmJmUucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlKX19ZnVuY3Rpb24gZChlKXtjb25zdCB0PWUubGVuZ3RoO2xldCBpPTA7aWYodDw9MSlyZXR1cm4gZTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7Y29uc3Qgcz1lW3RdLHI9cy50b1N0cmluZygpLnNwbGl0KCJlLSIpO3IubGVuZ3RoPjE/aT1NYXRoLm1heChpLHBhcnNlSW50KHJbMV0sMTApKTpNYXRoLmZsb29yKHMpIT09cyYmKGk9TWF0aC5tYXgoaSxzLnRvU3RyaW5nKCkuc3BsaXQoIi4iKVsxXS5sZW5ndGgpKX1sZXQgcz0wLHI9MCxvPTAsbj0wLGE9MDtmb3IobGV0IGk9MDtpPHQ7aSsrKWE9ZVtpXSxzKz1pLHIrPWEsbis9aSppLG8rPWkqYTtjb25zdCBsPSh0Km8tcypyKS8odCpuLXMqcyksZD1yL3QtbCpzL3QsYz1bXTtmb3IobGV0IGU9MDtlPD10O2UrKyljLnB1c2gocGFyc2VGbG9hdCgoZSpsK2QpLnRvRml4ZWQoaSkpKTtyZXR1cm4gY31hKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dSZW5kZXJlciIpXSxsLnByb3RvdHlwZSwicm93UmVuZGVyZXIiLHZvaWQgMCksYShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZHJhZ1NlcnZpY2UiKV0sbC5wcm90b3R5cGUsImRyYWdTZXJ2aWNlIix2b2lkIDApLGEoW09iamVjdChzLkF1dG93aXJlZCkoInJhbmdlU2VydmljZSIpXSxsLnByb3RvdHlwZSwicmFuZ2VTZXJ2aWNlIix2b2lkIDApLGEoW09iamVjdChzLkF1dG93aXJlZCkoIm1vdXNlRXZlbnRTZXJ2aWNlIildLGwucHJvdG90eXBlLCJtb3VzZUV2ZW50U2VydmljZSIsdm9pZCAwKSxhKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSxsLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksYShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2VsbE5hdmlnYXRpb25TZXJ2aWNlIildLGwucHJvdG90eXBlLCJjZWxsTmF2aWdhdGlvblNlcnZpY2UiLHZvaWQgMCksYShbT2JqZWN0KHMuQXV0b3dpcmVkKSgibmF2aWdhdGlvblNlcnZpY2UiKV0sbC5wcm90b3R5cGUsIm5hdmlnYXRpb25TZXJ2aWNlIix2b2lkIDApLGEoW09iamVjdChzLkF1dG93aXJlZCkoInJvd1Bvc2l0aW9uVXRpbHMiKV0sbC5wcm90b3R5cGUsInJvd1Bvc2l0aW9uVXRpbHMiLHZvaWQgMCksYShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2VsbFBvc2l0aW9uVXRpbHMiKV0sbC5wcm90b3R5cGUsImNlbGxQb3NpdGlvblV0aWxzIix2b2lkIDApLGEoW09iamVjdChzLkF1dG93aXJlZCkoImN0cmxzU2VydmljZSIpXSxsLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLGEoW3MuUG9zdENvbnN0cnVjdF0sbC5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBjPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGggZXh0ZW5kcyBse2NvbnN0cnVjdG9yKCl7c3VwZXIoaC5URU1QTEFURSksdGhpcy5tYXJrZWRDZWxscz1bXSx0aGlzLmNlbGxWYWx1ZXM9W10sdGhpcy5pc1VwPSExLHRoaXMuaXNMZWZ0PSExLHRoaXMuaXNSZWR1Y2U9ITEsdGhpcy50eXBlPXMuU2VsZWN0aW9uSGFuZGxlVHlwZS5GSUxMfXVwZGF0ZVZhbHVlc09uTW92ZShlKXtzdXBlci51cGRhdGVWYWx1ZXNPbk1vdmUoZSksdGhpcy5pbml0aWFsWFl8fCh0aGlzLmluaXRpYWxYWT10aGlzLm1vdXNlRXZlbnRTZXJ2aWNlLmdldE5vcm1hbGlzZWRQb3NpdGlvbihlKSk7Y29uc3R7eDp0LHk6aX09dGhpcy5pbml0aWFsWFkse3g6cyx5OnJ9PXRoaXMubW91c2VFdmVudFNlcnZpY2UuZ2V0Tm9ybWFsaXNlZFBvc2l0aW9uKGUpLG89TWF0aC5hYnModC1zKSxuPU1hdGguYWJzKGktciksYT10aGlzLmdldEZpbGxIYW5kbGVEaXJlY3Rpb24oKTtsZXQgbDtsPSJ4eSI9PT1hP28+bj8ieCI6InkiOmEsbCE9PXRoaXMuZHJhZ0F4aXMmJih0aGlzLmRyYWdBeGlzPWwsdGhpcy5jaGFuZ2VkQ2FsY3VsYXRlZFZhbHVlcz0hMCl9b25EcmFnKGUpe2lmKCF0aGlzLmluaXRpYWxQb3NpdGlvbil7Y29uc3QgZT10aGlzLmdldENlbGxDdHJsKCk7aWYoIWUpcmV0dXJuO3RoaXMuaW5pdGlhbFBvc2l0aW9uPWUuZ2V0Q2VsbFBvc2l0aW9uKCl9Y29uc3QgdD10aGlzLmdldExhc3RDZWxsSG92ZXJlZCgpO3QmJnRoaXMubWFya1BhdGhGcm9tKHRoaXMuaW5pdGlhbFBvc2l0aW9uLHQpfW9uRHJhZ0VuZChlKXtpZih0aGlzLmluaXRpYWxYWT1udWxsLCF0aGlzLm1hcmtlZENlbGxzLmxlbmd0aClyZXR1cm47Y29uc3QgdD0ieCI9PT10aGlzLmRyYWdBeGlzLGk9dGhpcy5nZXRDZWxsUmFuZ2UoKSxzPWkuY29sdW1ucy5sZW5ndGgscj10aGlzLmdldFJhbmdlU3RhcnRSb3coKSxvPXRoaXMuZ2V0UmFuZ2VFbmRSb3coKTtsZXQgbjtpZih0aGlzLmlzVXB8fHRoaXMuaXNMZWZ0KXtjb25zdCBlPXQ/cjp0aGlzLmxhc3RDZWxsTWFya2VkO249dGhpcy5yYW5nZVNlcnZpY2UuY3JlYXRlQ2VsbFJhbmdlRnJvbUNlbGxSYW5nZVBhcmFtcyh7cm93U3RhcnRJbmRleDplLnJvd0luZGV4LHJvd1N0YXJ0UGlubmVkOmUucm93UGlubmVkLGNvbHVtblN0YXJ0OnQ/dGhpcy5sYXN0Q2VsbE1hcmtlZC5jb2x1bW46aS5jb2x1bW5zWzBdLHJvd0VuZEluZGV4Om8ucm93SW5kZXgscm93RW5kUGlubmVkOm8ucm93UGlubmVkLGNvbHVtbkVuZDppLmNvbHVtbnNbcy0xXX0pfWVsc2Ugbj10aGlzLnJhbmdlU2VydmljZS5jcmVhdGVDZWxsUmFuZ2VGcm9tQ2VsbFJhbmdlUGFyYW1zKHtyb3dTdGFydEluZGV4OnIucm93SW5kZXgscm93U3RhcnRQaW5uZWQ6ci5yb3dQaW5uZWQsY29sdW1uU3RhcnQ6aS5jb2x1bW5zWzBdLHJvd0VuZEluZGV4OnQ/by5yb3dJbmRleDp0aGlzLmxhc3RDZWxsTWFya2VkLnJvd0luZGV4LHJvd0VuZFBpbm5lZDp0P28ucm93UGlubmVkOnRoaXMubGFzdENlbGxNYXJrZWQucm93UGlubmVkLGNvbHVtbkVuZDp0P3RoaXMubGFzdENlbGxNYXJrZWQuY29sdW1uOmkuY29sdW1uc1tzLTFdfSk7biYmKHRoaXMucmFpc2VGaWxsU3RhcnRFdmVudCgpLHRoaXMuaGFuZGxlVmFsdWVDaGFuZ2VkKGksbixlKSx0aGlzLnJhbmdlU2VydmljZS5zZXRDZWxsUmFuZ2VzKFtuXSksdGhpcy5yYWlzZUZpbGxFbmRFdmVudChpLG4pKX1nZXRGaWxsSGFuZGxlRGlyZWN0aW9uKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImZpbGxIYW5kbGVEaXJlY3Rpb24iKTtyZXR1cm4gZT8ieCIhPT1lJiYieSIhPT1lJiYieHkiIT09ZT8ocy5fLndhcm5PbmNlKCJ2YWxpZCB2YWx1ZXMgZm9yIGZpbGxIYW5kbGVEaXJlY3Rpb24gYXJlICd4JywgJ3knIGFuZCAneHknLiBEZWZhdWx0IHRvICd4eScuIiksInh5Iik6ZToieHkifXJhaXNlRmlsbFN0YXJ0RXZlbnQoKXtjb25zdCBlPXt0eXBlOnMuRXZlbnRzLkVWRU5UX0ZJTExfU1RBUlR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9cmFpc2VGaWxsRW5kRXZlbnQoZSx0KXtjb25zdCBpPXt0eXBlOnMuRXZlbnRzLkVWRU5UX0ZJTExfRU5ELGluaXRpYWxSYW5nZTplLGZpbmFsUmFuZ2U6dH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChpKX1oYW5kbGVWYWx1ZUNoYW5nZWQoZSx0LGkpe2NvbnN0IHI9dGhpcy5yYW5nZVNlcnZpY2UuZ2V0UmFuZ2VFbmRSb3coZSksbz10aGlzLnJhbmdlU2VydmljZS5nZXRSYW5nZVN0YXJ0Um93KGUpLG49dGhpcy5yYW5nZVNlcnZpY2UuZ2V0UmFuZ2VFbmRSb3codCksYT10aGlzLnJhbmdlU2VydmljZS5nZXRSYW5nZVN0YXJ0Um93KHQpLGw9InkiPT09dGhpcy5kcmFnQXhpcztpZih0aGlzLmlzUmVkdWNlJiYhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0NsZWFyT25GaWxsUmVkdWN0aW9uIikpe2NvbnN0IGk9bD9lLmNvbHVtbnM6ZS5jb2x1bW5zLmZpbHRlcihlPT50LmNvbHVtbnMuaW5kZXhPZihlKTwwKSxzPWw/dGhpcy5jZWxsTmF2aWdhdGlvblNlcnZpY2UuZ2V0Um93QmVsb3cobik6YTtyZXR1cm4gdm9pZChzJiZ0aGlzLmNsZWFyQ2VsbHNJblJhbmdlKHMscixpKSl9Y29uc3QgZD1bXSxjPVtdLGg9W10sdT1bXTtsZXQgcD0hMCxnPTA7Y29uc3QgbT0oKT0+e2QubGVuZ3RoPTAsYy5sZW5ndGg9MCxoLmxlbmd0aD0wLHUubGVuZ3RoPTAsZz0wfSxmPSh0LGkpPT57bGV0IGM9dGhpcy5pc1VwP3I6byxoPSExO2ZvcihsJiYocD0hMCxtKCkpOyFoJiZjOyl7Y29uc3QgdT10aGlzLnJvd1Bvc2l0aW9uVXRpbHMuZ2V0Um93Tm9kZShjKTtpZighdSlicmVhaztsJiZ0P3YoZCx0LHUsKCk9PiF0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuc2FtZVJvdyhjLHRoaXMuaXNVcD9vOnIpKTppJiYocD0hMCxtKCksaS5mb3JFYWNoKHQ9PnYoZCx0LHUsKCk9PnQhPT0odGhpcy5pc0xlZnQ/ZS5jb2x1bW5zWzBdOnMuXy5sYXN0KGUuY29sdW1ucykpKSkpLGg9dGhpcy5yb3dQb3NpdGlvblV0aWxzLnNhbWVSb3coYyx0aGlzLmlzVXA/YTpuKSxjPXRoaXMuaXNVcD90aGlzLmNlbGxOYXZpZ2F0aW9uU2VydmljZS5nZXRSb3dBYm92ZShjKTp0aGlzLmNlbGxOYXZpZ2F0aW9uU2VydmljZS5nZXRSb3dCZWxvdyhjKX19LHY9KGUsdCxyLG8pPT57dmFyIG4sYTtsZXQgbCxkPSExO2lmKHApbD10aGlzLnZhbHVlU2VydmljZS5nZXRWYWx1ZSh0LHIpLGMucHVzaChsKSxoLnB1c2godGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUodCxyLHZvaWQgMCwhMCkpLHUucHVzaCh0aGlzLnZhbHVlRm9ybWF0dGVyU2VydmljZS5mb3JtYXRWYWx1ZSh0LHIsbCkpLHA9bygpO2Vsc2V7Y29uc3R7dmFsdWU6byxmcm9tVXNlckZ1bmN0aW9uOnAsc291cmNlQ29sOm0sc291cmNlUm93Tm9kZTpmfT10aGlzLnByb2Nlc3NWYWx1ZXMoe2V2ZW50OmksdmFsdWVzOmUsaW5pdGlhbFZhbHVlczpjLGluaXRpYWxOb25BZ2dyZWdhdGVkVmFsdWVzOmgsaW5pdGlhbEZvcm1hdHRlZFZhbHVlczp1LGNvbDp0LHJvd05vZGU6cixpZHg6ZysrfSk7aWYobD1vLHQuaXNDZWxsRWRpdGFibGUocikpe2NvbnN0IGU9dGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUodCxyKTtwfHwobSYmITEhPT0obnVsbD09PShuPW0uZ2V0Q29sRGVmKCkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnVzZVZhbHVlRm9ybWF0dGVyRm9yRXhwb3J0KSYmKGw9bnVsbCE9PShhPXRoaXMudmFsdWVGb3JtYXR0ZXJTZXJ2aWNlLmZvcm1hdFZhbHVlKG0sZixsKSkmJnZvaWQgMCE9PWE/YTpsKSwhMSE9PXQuZ2V0Q29sRGVmKCkudXNlVmFsdWVQYXJzZXJGb3JJbXBvcnQmJihsPXRoaXMudmFsdWVQYXJzZXJTZXJ2aWNlLnBhcnNlVmFsdWUodCxyLG0/bDpzLl8udG9TdHJpbmdPck51bGwobCksZSkpKSxwJiZlPT09bD9kPSEwOnIuc2V0RGF0YVZhbHVlKHQsbCwicmFuZ2VTZXJ2aWNlIil9fWR8fGUucHVzaCh7dmFsdWU6bCxjb2x1bW46dCxyb3dOb2RlOnJ9KX07aWYobCllLmNvbHVtbnMuZm9yRWFjaChlPT57ZihlKX0pO2Vsc2V7Y29uc3QgZT10aGlzLmlzTGVmdD9bLi4udC5jb2x1bW5zXS5yZXZlcnNlKCk6dC5jb2x1bW5zO2Yodm9pZCAwLGUpfX1jbGVhckNlbGxzSW5SYW5nZShlLHQsaSl7Y29uc3Qgcz17c3RhcnRSb3c6ZSxlbmRSb3c6dCxjb2x1bW5zOmksc3RhcnRDb2x1bW46aVswXX07dGhpcy5yYW5nZVNlcnZpY2UuY2xlYXJDZWxsUmFuZ2VDZWxsVmFsdWVzKHtjZWxsUmFuZ2VzOltzXX0pfXByb2Nlc3NWYWx1ZXMoZSl7Y29uc3R7ZXZlbnQ6dCx2YWx1ZXM6aSxpbml0aWFsVmFsdWVzOnIsaW5pdGlhbE5vbkFnZ3JlZ2F0ZWRWYWx1ZXM6byxpbml0aWFsRm9ybWF0dGVkVmFsdWVzOm4sY29sOmEscm93Tm9kZTpsLGlkeDpjfT1lLGg9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soImZpbGxPcGVyYXRpb24iKTtsZXQgdTtpZih1PSJ5Ij09PXRoaXMuZHJhZ0F4aXM/dGhpcy5pc1VwPyJ1cCI6ImRvd24iOnRoaXMuaXNMZWZ0PyJsZWZ0IjoicmlnaHQiLGgpe2NvbnN0IGU9aCh7ZXZlbnQ6dCx2YWx1ZXM6aS5tYXAoKHt2YWx1ZTplfSk9PmUpLGluaXRpYWxWYWx1ZXM6cixpbml0aWFsTm9uQWdncmVnYXRlZFZhbHVlczpvLGluaXRpYWxGb3JtYXR0ZWRWYWx1ZXM6bixjdXJyZW50SW5kZXg6YyxjdXJyZW50Q2VsbFZhbHVlOnRoaXMudmFsdWVTZXJ2aWNlLmdldFZhbHVlKGEsbCksZGlyZWN0aW9uOnUsY29sdW1uOmEscm93Tm9kZTpsfSk7aWYoITEhPT1lKXJldHVybnt2YWx1ZTplLGZyb21Vc2VyRnVuY3Rpb246ITB9fWNvbnN0IHA9IWkuc29tZSgoe3ZhbHVlOmV9KT0+e2NvbnN0IHQ9cGFyc2VGbG9hdChlKTtyZXR1cm4gaXNOYU4odCl8fHQudG9TdHJpbmcoKSE9PWUudG9TdHJpbmcoKX0pO2lmKHQuYWx0S2V5fHwhcCl7aWYocCYmMT09PXIubGVuZ3RoKXtjb25zdCBlPXRoaXMuaXNVcHx8dGhpcy5pc0xlZnQ/LTE6MTtyZXR1cm57dmFsdWU6cGFyc2VGbG9hdChzLl8ubGFzdChpKS52YWx1ZSkrMSplLGZyb21Vc2VyRnVuY3Rpb246ITF9fWNvbnN0e3ZhbHVlOmUsY29sdW1uOnQscm93Tm9kZTpvfT1pW2MlaS5sZW5ndGhdO3JldHVybnt2YWx1ZTplLGZyb21Vc2VyRnVuY3Rpb246ITEsc291cmNlQ29sOnQsc291cmNlUm93Tm9kZTpvfX1yZXR1cm57dmFsdWU6cy5fLmxhc3QoZChpLm1hcCgoe3ZhbHVlOmV9KT0+TnVtYmVyKGUpKSkpLGZyb21Vc2VyRnVuY3Rpb246ITF9fWNsZWFyVmFsdWVzKCl7dGhpcy5jbGVhck1hcmtlZFBhdGgoKSx0aGlzLmNsZWFyQ2VsbFZhbHVlcygpLHRoaXMubGFzdENlbGxNYXJrZWQ9dm9pZCAwLHN1cGVyLmNsZWFyVmFsdWVzKCl9Y2xlYXJNYXJrZWRQYXRoKCl7dGhpcy5tYXJrZWRDZWxscy5mb3JFYWNoKGU9PntpZighZS5pc0FsaXZlKCkpcmV0dXJuO2NvbnN0IHQ9ZS5nZXRDb21wKCk7dC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1zZWxlY3Rpb24tZmlsbC10b3AiLCExKSx0LmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXNlbGVjdGlvbi1maWxsLXJpZ2h0IiwhMSksdC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1zZWxlY3Rpb24tZmlsbC1ib3R0b20iLCExKSx0LmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXNlbGVjdGlvbi1maWxsLWxlZnQiLCExKX0pLHRoaXMubWFya2VkQ2VsbHMubGVuZ3RoPTAsdGhpcy5pc1VwPSExLHRoaXMuaXNMZWZ0PSExLHRoaXMuaXNSZWR1Y2U9ITF9Y2xlYXJDZWxsVmFsdWVzKCl7dGhpcy5jZWxsVmFsdWVzLmxlbmd0aD0wfW1hcmtQYXRoRnJvbShlLHQpe2lmKHRoaXMuY2xlYXJNYXJrZWRQYXRoKCksdGhpcy5jbGVhckNlbGxWYWx1ZXMoKSwieSI9PT10aGlzLmRyYWdBeGlzKXtpZih0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuc2FtZVJvdyh0LGUpKXJldHVybjtjb25zdCBpPXRoaXMucm93UG9zaXRpb25VdGlscy5iZWZvcmUodCxlKSxzPXRoaXMuZ2V0UmFuZ2VTdGFydFJvdygpLHI9dGhpcy5nZXRSYW5nZUVuZFJvdygpO2kmJih0LnJvd1Bpbm5lZD09cy5yb3dQaW5uZWQmJnQucm93SW5kZXg+PXMucm93SW5kZXh8fHMucm93UGlubmVkIT1yLnJvd1Bpbm5lZCYmdC5yb3dQaW5uZWQ9PXIucm93UGlubmVkJiZ0LnJvd0luZGV4PD1yLnJvd0luZGV4KT8odGhpcy5yZWR1Y2VWZXJ0aWNhbChlLHQpLHRoaXMuaXNSZWR1Y2U9ITApOih0aGlzLmV4dGVuZFZlcnRpY2FsKGUsdCxpKSx0aGlzLmlzUmVkdWNlPSExKX1lbHNle2NvbnN0IGk9ZS5jb2x1bW4scz10LmNvbHVtbjtpZihpPT09cylyZXR1cm47Y29uc3Qgcj10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKSxvPXIuaW5kZXhPZihpKSxuPXIuaW5kZXhPZihzKTtuPD1vJiZuPj1yLmluZGV4T2YodGhpcy5nZXRDZWxsUmFuZ2UoKS5jb2x1bW5zWzBdKT8odGhpcy5yZWR1Y2VIb3Jpem9udGFsKGUsdCksdGhpcy5pc1JlZHVjZT0hMCk6KHRoaXMuZXh0ZW5kSG9yaXpvbnRhbChlLHQsbjxvKSx0aGlzLmlzUmVkdWNlPSExKX10aGlzLmxhc3RDZWxsTWFya2VkPXR9ZXh0ZW5kVmVydGljYWwoZSx0LGkpe2NvbnN0e25hdmlnYXRpb25TZXJ2aWNlOnMscmFuZ2VTZXJ2aWNlOnJ9PXRoaXM7bGV0IG89ZTtkb3tjb25zdCBuPXRoaXMuZ2V0Q2VsbFJhbmdlKCksYT1uLmNvbHVtbnMubGVuZ3RoO2ZvcihsZXQgbD0wO2w8YTtsKyspe2NvbnN0IGQ9bi5jb2x1bW5zW2xdLGM9e3Jvd0luZGV4Om8ucm93SW5kZXgscm93UGlubmVkOm8ucm93UGlubmVkfSxoPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxjKSx7Y29sdW1uOmR9KSx1PXIuaXNDZWxsSW5TcGVjaWZpY1JhbmdlKGgsbikscD10aGlzLnJvd1Bvc2l0aW9uVXRpbHMuc2FtZVJvdyhvLGUpO2lmKGkmJih0aGlzLmlzVXA9ITApLCFwKXtjb25zdCBlPXMuZ2V0Q2VsbEJ5UG9zaXRpb24oaCk7aWYoZSl7dGhpcy5tYXJrZWRDZWxscy5wdXNoKGUpO2NvbnN0IHM9ZS5nZXRDb21wKCk7dXx8KHMuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctc2VsZWN0aW9uLWZpbGwtbGVmdCIsMD09PWwpLHMuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctc2VsZWN0aW9uLWZpbGwtcmlnaHQiLGw9PT1hLTEpKSxzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoaT8iYWctc2VsZWN0aW9uLWZpbGwtdG9wIjoiYWctc2VsZWN0aW9uLWZpbGwtYm90dG9tIix0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuc2FtZVJvdyhvLHQpKX19fWlmKHRoaXMucm93UG9zaXRpb25VdGlscy5zYW1lUm93KG8sdCkpYnJlYWt9d2hpbGUobz1pP3RoaXMuY2VsbE5hdmlnYXRpb25TZXJ2aWNlLmdldFJvd0Fib3ZlKG8pOnRoaXMuY2VsbE5hdmlnYXRpb25TZXJ2aWNlLmdldFJvd0JlbG93KG8pKX1yZWR1Y2VWZXJ0aWNhbChlLHQpe2xldCBpPWU7ZG97Y29uc3QgZT10aGlzLmdldENlbGxSYW5nZSgpLHM9ZS5jb2x1bW5zLmxlbmd0aCxyPXRoaXMucm93UG9zaXRpb25VdGlscy5zYW1lUm93KGksdCk7Zm9yKGxldCByPTA7cjxzO3IrKyl7Y29uc3Qgcz17cm93SW5kZXg6aS5yb3dJbmRleCxyb3dQaW5uZWQ6aS5yb3dQaW5uZWR9LG89T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHMpLHtjb2x1bW46ZS5jb2x1bW5zW3JdfSksbj10aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmdldENlbGxCeVBvc2l0aW9uKG8pO2lmKG4pe3RoaXMubWFya2VkQ2VsbHMucHVzaChuKTtuLmdldENvbXAoKS5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1zZWxlY3Rpb24tZmlsbC1ib3R0b20iLHRoaXMucm93UG9zaXRpb25VdGlscy5zYW1lUm93KGksdCkpfX1pZihyKWJyZWFrfXdoaWxlKGk9dGhpcy5jZWxsTmF2aWdhdGlvblNlcnZpY2UuZ2V0Um93QWJvdmUoaSkpfWV4dGVuZEhvcml6b250YWwoZSx0LGkpe2NvbnN0IHI9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCksbz1yLmluZGV4T2YoaT90LmNvbHVtbjplLmNvbHVtbiksbj1yLmluZGV4T2YoaT90aGlzLmdldENlbGxSYW5nZSgpLmNvbHVtbnNbMF06dC5jb2x1bW4pLGE9aT8wOjEsbD1yLnNsaWNlKG8rYSxuK2EpLGQ9dGhpcy5nZXRSYW5nZVN0YXJ0Um93KCksYz10aGlzLmdldFJhbmdlRW5kUm93KCk7bC5mb3JFYWNoKGU9PntsZXQgdD1kLHI9ITE7ZG97cj10aGlzLnJvd1Bvc2l0aW9uVXRpbHMuc2FtZVJvdyh0LGMpO2NvbnN0IG89dGhpcy5uYXZpZ2F0aW9uU2VydmljZS5nZXRDZWxsQnlQb3NpdGlvbih7cm93SW5kZXg6dC5yb3dJbmRleCxyb3dQaW5uZWQ6dC5yb3dQaW5uZWQsY29sdW1uOmV9KTtpZihvKXt0aGlzLm1hcmtlZENlbGxzLnB1c2gobyk7Y29uc3Qgcj1vLmdldENvbXAoKTtyLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXNlbGVjdGlvbi1maWxsLXRvcCIsdGhpcy5yb3dQb3NpdGlvblV0aWxzLnNhbWVSb3codCxkKSksci5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1zZWxlY3Rpb24tZmlsbC1ib3R0b20iLHRoaXMucm93UG9zaXRpb25VdGlscy5zYW1lUm93KHQsYykpLGk/KHRoaXMuaXNMZWZ0PSEwLHIuYWRkT3JSZW1vdmVDc3NDbGFzcygiYWctc2VsZWN0aW9uLWZpbGwtbGVmdCIsZT09PWxbMF0pKTpyLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXNlbGVjdGlvbi1maWxsLXJpZ2h0IixlPT09cy5fLmxhc3QobCkpfXQ9dGhpcy5jZWxsTmF2aWdhdGlvblNlcnZpY2UuZ2V0Um93QmVsb3codCl9d2hpbGUoIXIpfSl9cmVkdWNlSG9yaXpvbnRhbChlLHQpe2NvbnN0IGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCkscz1pLmluZGV4T2YodC5jb2x1bW4pLHI9aS5pbmRleE9mKGUuY29sdW1uKSxvPWkuc2xpY2UocyxyKSxuPXRoaXMuZ2V0UmFuZ2VTdGFydFJvdygpLGE9dGhpcy5nZXRSYW5nZUVuZFJvdygpO28uZm9yRWFjaChlPT57bGV0IHQ9bixpPSExO2Rve2k9dGhpcy5yb3dQb3NpdGlvblV0aWxzLnNhbWVSb3codCxhKTtjb25zdCBzPXRoaXMubmF2aWdhdGlvblNlcnZpY2UuZ2V0Q2VsbEJ5UG9zaXRpb24oe3Jvd0luZGV4OnQucm93SW5kZXgscm93UGlubmVkOnQucm93UGlubmVkLGNvbHVtbjplfSk7aWYocyl7dGhpcy5tYXJrZWRDZWxscy5wdXNoKHMpO3MuZ2V0Q29tcCgpLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLXNlbGVjdGlvbi1maWxsLXJpZ2h0IixlPT09b1swXSl9dD10aGlzLmNlbGxOYXZpZ2F0aW9uU2VydmljZS5nZXRSb3dCZWxvdyh0KX13aGlsZSghaSl9KX1yZWZyZXNoKGUpe2NvbnN0IHQ9dGhpcy5yYW5nZVNlcnZpY2UuZ2V0Q2VsbFJhbmdlcygpWzBdO3Quc3RhcnRSb3cmJnQuZW5kUm93P3N1cGVyLnJlZnJlc2goZSk6dGhpcy5kZXN0cm95KCl9fWguVEVNUExBVEU9JzxkaXYgY2xhc3M9ImFnLWZpbGwtaGFuZGxlIj48L2Rpdj4nLGMoW09iamVjdChzLkF1dG93aXJlZCkoInZhbHVlU2VydmljZSIpXSxoLnByb3RvdHlwZSwidmFsdWVTZXJ2aWNlIix2b2lkIDApLGMoW09iamVjdChzLkF1dG93aXJlZCkoInZhbHVlUGFyc2VyU2VydmljZSIpXSxoLnByb3RvdHlwZSwidmFsdWVQYXJzZXJTZXJ2aWNlIix2b2lkIDApLGMoW09iamVjdChzLkF1dG93aXJlZCkoInZhbHVlRm9ybWF0dGVyU2VydmljZSIpXSxoLnByb3RvdHlwZSwidmFsdWVGb3JtYXR0ZXJTZXJ2aWNlIix2b2lkIDApO2NsYXNzIHUgZXh0ZW5kcyBse2NvbnN0cnVjdG9yKCl7c3VwZXIodS5URU1QTEFURSksdGhpcy50eXBlPXMuU2VsZWN0aW9uSGFuZGxlVHlwZS5SQU5HRSx0aGlzLnJhbmdlRml4ZWQ9ITF9b25EcmFnKGUpe2NvbnN0IHQ9dGhpcy5nZXRMYXN0Q2VsbEhvdmVyZWQoKTtpZighdClyZXR1cm47Y29uc3QgaT10aGlzLnJhbmdlU2VydmljZS5nZXRDZWxsUmFuZ2VzKCkscj1zLl8ubGFzdChpKTtpZih0aGlzLnJhbmdlRml4ZWR8fCh0aGlzLmZpeFJhbmdlU3RhcnRFbmQociksdGhpcy5yYW5nZUZpeGVkPSEwKSx0aGlzLmVuZFBvc2l0aW9uPXtyb3dJbmRleDp0LnJvd0luZGV4LHJvd1Bpbm5lZDp0LnJvd1Bpbm5lZCxjb2x1bW46dC5jb2x1bW59LDI9PT1pLmxlbmd0aCYmaVswXS50eXBlPT09cy5DZWxsUmFuZ2VUeXBlLkRJTUVOU0lPTiYmci50eXBlPT09cy5DZWxsUmFuZ2VUeXBlLlZBTFVFKXshdGhpcy5yb3dQb3NpdGlvblV0aWxzLnNhbWVSb3codGhpcy5lbmRQb3NpdGlvbix0aGlzLnJhbmdlU2VydmljZS5nZXRSYW5nZUVuZFJvdyhyKSkmJnRoaXMucmFuZ2VTZXJ2aWNlLnVwZGF0ZVJhbmdlRW5kKGlbMF0sT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuZW5kUG9zaXRpb24pLHtjb2x1bW46aVswXS5jb2x1bW5zWzBdfSksITApfXRoaXMucmFuZ2VTZXJ2aWNlLmV4dGVuZExhdGVzdFJhbmdlVG9DZWxsKHRoaXMuZW5kUG9zaXRpb24pfW9uRHJhZ0VuZChlKXtjb25zdCB0PXMuXy5sYXN0KHRoaXMucmFuZ2VTZXJ2aWNlLmdldENlbGxSYW5nZXMoKSk7dGhpcy5maXhSYW5nZVN0YXJ0RW5kKHQpLHRoaXMucmFuZ2VGaXhlZD0hMX1maXhSYW5nZVN0YXJ0RW5kKGUpe2NvbnN0IHQ9dGhpcy5yYW5nZVNlcnZpY2UuZ2V0UmFuZ2VTdGFydFJvdyhlKSxpPXRoaXMucmFuZ2VTZXJ2aWNlLmdldFJhbmdlRW5kUm93KGUpLHM9ZS5jb2x1bW5zWzBdO2Uuc3RhcnRSb3c9dCxlLmVuZFJvdz1pLGUuc3RhcnRDb2x1bW49c319dS5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctcmFuZ2UtaGFuZGxlIj48L2Rpdj4nO3ZhciBwPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBnPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1YntjcmVhdGVTZWxlY3Rpb25IYW5kbGUoZSl7cmV0dXJuIHRoaXMuY3JlYXRlQmVhbihlPT09cy5TZWxlY3Rpb25IYW5kbGVUeXBlLlJBTkdFP25ldyB1Om5ldyBoKX19O2c9cChbT2JqZWN0KHMuQmVhbikoInNlbGVjdGlvbkhhbmRsZUZhY3RvcnkiKV0sZyk7Y29uc3QgbT17dmVyc2lvbjoiMzEuMS4xIixtb2R1bGVOYW1lOnMuTW9kdWxlTmFtZXMuUmFuZ2VTZWxlY3Rpb25Nb2R1bGUsYmVhbnM6W24sZ10sYWdTdGFja0NvbXBvbmVudHM6W3tjb21wb25lbnROYW1lOiJBZ0ZpbGxIYW5kbGUiLGNvbXBvbmVudENsYXNzOmh9LHtjb21wb25lbnROYW1lOiJBZ1JhbmdlSGFuZGxlIixjb21wb25lbnRDbGFzczp1fV0sZGVwZW5kYW50TW9kdWxlczpbci5FbnRlcnByaXNlQ29yZU1vZHVsZV19O2kuZCh0LCJSYW5nZVNlbGVjdGlvbk1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG19KSl9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpO3ZhciBzPWkoMCkscj1pKDMpLG89aSgxKTtjb25zdCBuPVsiYXJlYSIsImJhciIsImNvbHVtbiIsImhpc3RvZ3JhbSIsImxpbmUiLCJwaWUiLCJkb251dCIsInNjYXR0ZXIiLCJidWJibGUiLCJyYWRpYWwtY29sdW1uIiwicmFkaWFsLWJhciIsInJhZGFyLWxpbmUiLCJyYWRhci1hcmVhIiwibmlnaHRpbmdhbGUiLCJyYW5nZS1iYXIiLCJyYW5nZS1hcmVhIiwiYm94LXBsb3QiLCJ0cmVlbWFwIiwic3VuYnVyc3QiLCJoZWF0bWFwIiwid2F0ZXJmYWxsIl07ZnVuY3Rpb24gYShlKXtzd2l0Y2goZSl7Y2FzZSJyYW5nZUJhciI6Y2FzZSJyYW5nZUFyZWEiOmNhc2Uid2F0ZXJmYWxsIjpjYXNlImJveFBsb3QiOmNhc2UicmFkYXJMaW5lIjpjYXNlInJhZGFyQXJlYSI6Y2FzZSJuaWdodGluZ2FsZSI6Y2FzZSJyYWRpYWxDb2x1bW4iOmNhc2UicmFkaWFsQmFyIjpjYXNlInN1bmJ1cnN0IjpjYXNlInRyZWVtYXAiOmNhc2UiaGVhdG1hcCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19Y29uc3QgbD1uZXcgU2V0KFsiYmFyIiwiZ3JvdXBlZEJhciIsInN0YWNrZWRCYXIiLCJub3JtYWxpemVkQmFyIl0pO2Z1bmN0aW9uIGQoZSl7cmV0dXJuIGwuaGFzKGUpfWNvbnN0IGM9bmV3IFNldChbInN0YWNrZWRDb2x1bW4iLCJub3JtYWxpemVkQ29sdW1uIiwic3RhY2tlZEJhciIsIm5vcm1hbGl6ZWRCYXIiXSk7ZnVuY3Rpb24gaChlKXtzd2l0Y2goZSl7Y2FzZSJyYWRpYWxDb2x1bW4iOmNhc2UicmFkaWFsQmFyIjpjYXNlInJhZGFyTGluZSI6Y2FzZSJyYWRhckFyZWEiOmNhc2UibmlnaHRpbmdhbGUiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fWZ1bmN0aW9uIHUoZSl7c3dpdGNoKGUpe2Nhc2UidHJlZW1hcCI6Y2FzZSJzdW5idXJzdCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19ZnVuY3Rpb24gcChlKXtzd2l0Y2goZSl7Y2FzZSJkb3VnaG51dCI6cmV0dXJuImRvbnV0IjtkZWZhdWx0OnJldHVybiBlfX1mdW5jdGlvbiBnKGUpe3N3aXRjaChlKXtjYXNlImJhciI6Y2FzZSJncm91cGVkQmFyIjpjYXNlInN0YWNrZWRCYXIiOmNhc2Uibm9ybWFsaXplZEJhciI6cmV0dXJuImJhciI7Y2FzZSJjb2x1bW4iOmNhc2UiZ3JvdXBlZENvbHVtbiI6Y2FzZSJzdGFja2VkQ29sdW1uIjpjYXNlIm5vcm1hbGl6ZWRDb2x1bW4iOnJldHVybiJiYXIiO2Nhc2UibGluZSI6cmV0dXJuImxpbmUiO2Nhc2UiYXJlYSI6Y2FzZSJzdGFja2VkQXJlYSI6Y2FzZSJub3JtYWxpemVkQXJlYSI6cmV0dXJuImFyZWEiO2Nhc2UiYnViYmxlIjpyZXR1cm4iYnViYmxlIjtjYXNlInNjYXR0ZXIiOnJldHVybiJzY2F0dGVyIjtjYXNlImhpc3RvZ3JhbSI6cmV0dXJuImhpc3RvZ3JhbSI7Y2FzZSJyYWRpYWxDb2x1bW4iOnJldHVybiJyYWRpYWwtY29sdW1uIjtjYXNlInJhZGlhbEJhciI6cmV0dXJuInJhZGlhbC1iYXIiO2Nhc2UicmFkYXJMaW5lIjpyZXR1cm4icmFkYXItbGluZSI7Y2FzZSJyYWRhckFyZWEiOnJldHVybiJyYWRhci1hcmVhIjtjYXNlIm5pZ2h0aW5nYWxlIjpyZXR1cm4ibmlnaHRpbmdhbGUiO2Nhc2UicmFuZ2VCYXIiOnJldHVybiJyYW5nZS1iYXIiO2Nhc2UicmFuZ2VBcmVhIjpyZXR1cm4icmFuZ2UtYXJlYSI7Y2FzZSJib3hQbG90IjpyZXR1cm4iYm94LXBsb3QiO2Nhc2UidHJlZW1hcCI6cmV0dXJuInRyZWVtYXAiO2Nhc2Uic3VuYnVyc3QiOnJldHVybiJzdW5idXJzdCI7Y2FzZSJwaWUiOnJldHVybiJwaWUiO2Nhc2UiZG9udXQiOmNhc2UiZG91Z2hudXQiOnJldHVybiJkb251dCI7Y2FzZSJoZWF0bWFwIjpyZXR1cm4iaGVhdG1hcCI7Y2FzZSJ3YXRlcmZhbGwiOnJldHVybiJ3YXRlcmZhbGwiO2RlZmF1bHQ6cmV0dXJuImNhcnRlc2lhbiJ9fWZ1bmN0aW9uIG0oZSl7c3dpdGNoKGUpe2Nhc2UicGllIjpjYXNlImRvbnV0IjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX1jb25zdCBmPVsibnVtYmVyIiwiY2F0ZWdvcnkiLCJncm91cGVkLWNhdGVnb3J5IiwibG9nIiwidGltZSJdO2Z1bmN0aW9uIHYoZSx0KXtyZXR1cm4hMSE9PXQuY2xvbmUmJnQuaXNNZXJnZWFibGVPYmplY3QoZSk/RShmdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9bXTp7fX0oZSksZSx0KTplfWZ1bmN0aW9uIEMoZSx0LGkpe3JldHVybiBlLmNvbmNhdCh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiB2KGUsaSl9KSl9ZnVuY3Rpb24geShlKXtyZXR1cm4gT2JqZWN0LmtleXMoZSkuY29uY2F0KGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzP09iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSh0KX0pKTpbXX0oZSkpfWZ1bmN0aW9uIFMoZSx0KXt0cnl7cmV0dXJuIHQgaW4gZX1jYXRjaChlKXtyZXR1cm4hMX19ZnVuY3Rpb24gdyhlPXt9LHQ9e30saSl7Y29uc3Qgcz17fTtyZXR1cm4gaS5pc01lcmdlYWJsZU9iamVjdChlKSYmeShlKS5mb3JFYWNoKChmdW5jdGlvbih0KXtzW3RdPXYoZVt0XSxpKX0pKSx5KHQpLmZvckVhY2goKGZ1bmN0aW9uKHIpeyhmdW5jdGlvbihlLHQpe3JldHVybiBTKGUsdCkmJiEoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSx0KSYmT2JqZWN0LnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSx0KSl9KShlLHIpfHwoUyhlLHIpJiZpLmlzTWVyZ2VhYmxlT2JqZWN0KHRbcl0pP3Nbcl09ZnVuY3Rpb24oZSx0KXtpZighdC5jdXN0b21NZXJnZSlyZXR1cm4gRTtjb25zdCBpPXQuY3VzdG9tTWVyZ2UoZSk7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGk/aTpFfShyLGkpKGVbcl0sdFtyXSxpKTpzW3JdPXYodFtyXSxpKSl9KSksc31mdW5jdGlvbiBiKGUpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4hIWUmJiJvYmplY3QiPT10eXBlb2YgZX0oZSkmJiFmdW5jdGlvbihlKXtjb25zdCB0PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKTtyZXR1cm4iW29iamVjdCBSZWdFeHBdIj09PXR8fCJbb2JqZWN0IERhdGVdIj09PXR9KGUpfWZ1bmN0aW9uIEUoZSx0LGkpeyhpPWl8fHt9KS5hcnJheU1lcmdlPWkuYXJyYXlNZXJnZXx8QyxpLmlzTWVyZ2VhYmxlT2JqZWN0PWkuaXNNZXJnZWFibGVPYmplY3R8fGIsaS5jbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZD12O2NvbnN0IHM9QXJyYXkuaXNBcnJheSh0KTtyZXR1cm4gcz09PUFycmF5LmlzQXJyYXkoZSk/cz9pLmFycmF5TWVyZ2UoZSx0LGkpOncoZSx0LGkpOnYodCxpKX1mdW5jdGlvbiBSKGUsdCxpKXtpZihudWxsPT1lKXJldHVybiBpO2NvbnN0IHM9dC5zcGxpdCgiLiIpO2xldCByPWU7Zm9yKDtzLmxlbmd0aD4xOylpZihyPXJbcy5zaGlmdCgpXSxudWxsPT1yKXJldHVybiBpO2NvbnN0IG89cltzWzBdXTtyZXR1cm4gbnVsbCE9bz9vOml9ZnVuY3Rpb24geChlLHQpe3ZhciBpO2NvbnN0e2NoYXJ0T3B0aW9uc1RvUmVzdG9yZTpyLGNoYXJ0UGFsZXR0ZVRvUmVzdG9yZTpuLGNoYXJ0VGhlbWVUb1Jlc3RvcmU6YX09ZSxsPWZ1bmN0aW9uKGUpe2xldCB0PWUuZ2V0Q2hhcnRUaGVtZU5hbWUoKTtjb25zdCBpPWUuZ2V0Q2hhcnRUaGVtZXMoKTtzLl8uaW5jbHVkZXMoaSx0KXx8KHQ9aVswXSk7cmV0dXJuIHR9KGUpLGQ9VChsKSxjPWQ/e2Jhc2VUaGVtZTpsfTpudWxsIT09KGk9QShlLGwpKSYmdm9pZCAwIT09aT9pOnt9LGg9ZS5nZXRHcmlkT3B0aW9uc0NoYXJ0VGhlbWVPdmVycmlkZXMoKSx1PWUuYXBpQ2hhcnRUaGVtZU92ZXJyaWRlcyxwPWcoZS5jaGFydFR5cGUpLGY9bShwKT9wOiJjYXJ0ZXNpYW4iLHY9ZS5jcm9zc0ZpbHRlcmluZz9mdW5jdGlvbihlLHQsaSl7cmV0dXJue1tpXTp7dG9vbHRpcDp7ZGVsYXk6NTAwfSxsZWdlbmQ6e2xpc3RlbmVyczp7bGVnZW5kSXRlbUNsaWNrOnQ9PntlLmdldENoYXJ0KCkuc2VyaWVzLmZvckVhY2goZT0+e2UudG9nZ2xlU2VyaWVzSXRlbSh0Lml0ZW1JZCx0LmVuYWJsZWQpLGUudG9nZ2xlU2VyaWVzSXRlbSh0Lml0ZW1JZCsiLWZpbHRlcmVkLW91dCIsdC5lbmFibGVkKX0pfX19LGxpc3RlbmVyczp7Y2xpY2s6ZT0+dC5jcm9zc0ZpbHRlckNhbGxiYWNrKGUsITApfSxzZXJpZXM6e319fX0odCxlLGYpOnZvaWQgMCxDPU9iamVjdC5hc3NpZ24oe30sbnVsbCE9cj9yOnt9KSx5PVtkP08oZSwoKCk9Pntjb25zdCBlPWU9PiEhZSYmT2JqZWN0LmtleXMoZSkuc29tZSh0PT5SKGVbdF0sInRpdGxlLmVuYWJsZWQiLCExKSk7cmV0dXJuIGUoaCl8fGUodSl9KSgpKTp2b2lkIDAsdixoLHUsQ10uZmlsdGVyKGU9PiEhZSkucmVkdWNlKChlLHQpPT4oe2Jhc2VUaGVtZTplLG92ZXJyaWRlczp0fSksYyk7aWYobiYmbD09PWEpeyhmdW5jdGlvbihlLHQpe2NvbnN0IGk9KGUsdCk9PmUubGVuZ3RoPT09dC5sZW5ndGgmJmUuZXZlcnkoKGUsaSk9PmU9PT10W2ldKTtyZXR1cm4gaShlLmZpbGxzLHQuZmlsbHMpJiZpKGUuc3Ryb2tlcyx0LnN0cm9rZXMpfSkobixvLmouZ2V0Q2hhcnRUaGVtZShjKS5wYWxldHRlKXx8KHkucGFsZXR0ZT1uKX1yZXR1cm4geX1mdW5jdGlvbiBUKGUpe3JldHVybiBzLl8uaW5jbHVkZXMoT2JqZWN0LmtleXMoby5qLnRoZW1lcyksZSl9Y29uc3QgRD1mLnJlZHVjZSgoZSx0KT0+T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtbdF06e3RpdGxlOntfZW5hYmxlZEZyb21UaGVtZTohMH19fSkse30pO2Z1bmN0aW9uIE8oZSx0KXtjb25zdCBpPWUuZ2V0RXh0cmFQYWRkaW5nRGlyZWN0aW9ucygpO3JldHVybntjb21tb246e2FuaW1hdGlvbjp7ZHVyYXRpb246NTAwfSxheGVzOkQscGFkZGluZzp7dG9wOiF0JiZpLmluY2x1ZGVzKCJ0b3AiKT80MDoyMCxyaWdodDppLmluY2x1ZGVzKCJyaWdodCIpPzMwOjIwLGJvdHRvbTppLmluY2x1ZGVzKCJib3R0b20iKT80MDoyMCxsZWZ0OmkuaW5jbHVkZXMoImxlZnQiKT8zMDoyMH19LHBpZTp7c2VyaWVzOnt0aXRsZTp7X2VuYWJsZWRGcm9tVGhlbWU6ITB9LGNhbGxvdXRMYWJlbDp7X2VuYWJsZWRGcm9tVGhlbWU6ITB9LHNlY3RvckxhYmVsOntlbmFibGVkOiExLF9lbmFibGVkRnJvbVRoZW1lOiEwfX19LGRvbnV0OntzZXJpZXM6e3RpdGxlOntfZW5hYmxlZEZyb21UaGVtZTohMH0sY2FsbG91dExhYmVsOntfZW5hYmxlZEZyb21UaGVtZTohMH0sc2VjdG9yTGFiZWw6e2VuYWJsZWQ6ITEsX2VuYWJsZWRGcm9tVGhlbWU6ITB9fX19fWZ1bmN0aW9uIEEoZSx0KXtjb25zdHtjdXN0b21DaGFydFRoZW1lczppfT1lLHM9aSYmaVt0XTtyZXR1cm4gc3x8Y29uc29sZS53YXJuKGBBRyBHcmlkOiBubyBzdG9jayB0aGVtZSBleGlzdHMgd2l0aCB0aGUgbmFtZSAnJHt0fScgYW5kIG5vIGN1c3RvbSBjaGFydCB0aGVtZSB3aXRoIHRoYXQgbmFtZSB3YXMgc3VwcGxpZWQgdG8gJ2N1c3RvbUNoYXJ0VGhlbWVzJ2ApLHN9dmFyIFA7Y29uc3QgTT1lPT50PT5udWxsPT10fHxlKHQpLEw9ZT0+InN0cmluZyI9PXR5cGVvZiBlLEY9ZT0+ImJvb2xlYW4iPT10eXBlb2YgZSxJPWU9PiJvYmplY3QiPT10eXBlb2YgZSxOPShlLHQpPT5pPT5gQUcgR3JpZCAtIHVuYWJsZSB0byB1cGRhdGUgY2hhcnQgYXMgaW52YWxpZCBwYXJhbXMgc3VwcGxpZWQ6ICBcYCR7ZX06ICR7aX1cYCwgZXhwZWN0ZWQgJHt0fS5gO2NsYXNzIEd7c3RhdGljIGlzVmFsaWRDaGFydFR5cGUoZSl7cmV0dXJuIEcudmFsaWRDaGFydFR5cGVzLmluY2x1ZGVzKGUpfXN0YXRpYyBpc0xlZ2FjeUNoYXJ0VHlwZShlKXtyZXR1cm4gRy5sZWdhY3lDaGFydFR5cGVzLmluY2x1ZGVzKGUpfXN0YXRpYyB2YWxpZGF0ZUNoYXJ0UGFyYW1zKGUpe3N3aXRjaChlLnR5cGUpe2Nhc2UicmFuZ2VDaGFydFVwZGF0ZSI6cmV0dXJuIEcudmFsaWRhdGVVcGRhdGVSYW5nZUNoYXJ0UGFyYW1zKGUpO2Nhc2UicGl2b3RDaGFydFVwZGF0ZSI6cmV0dXJuIEcudmFsaWRhdGVVcGRhdGVQaXZvdENoYXJ0UGFyYW1zKGUpO2Nhc2UiY3Jvc3NGaWx0ZXJDaGFydFVwZGF0ZSI6cmV0dXJuIEcudmFsaWRhdGVVcGRhdGVDcm9zc0ZpbHRlckNoYXJ0UGFyYW1zKGUpO2RlZmF1bHQ6cmV0dXJuIGNvbnNvbGUud2FybihgQUcgR3JpZCAtIEludmFsaWQgdmFsdWUgc3VwcGxpZWQgZm9yICd0eXBlJzogJHtlLnR5cGV9LiBJdCBtdXN0IGJlIGVpdGhlciAncmFuZ2VDaGFydFVwZGF0ZScsICdwaXZvdENoYXJ0VXBkYXRlJywgb3IgJ2Nyb3NzRmlsdGVyQ2hhcnRVcGRhdGUnLmApLCExfX1zdGF0aWMgdmFsaWRhdGVVcGRhdGVSYW5nZUNoYXJ0UGFyYW1zKGUpe2NvbnN0IHQ9Wy4uLkcuY29tbW9uVmFsaWRhdGlvbnMsLi4uRy5jZWxsUmFuZ2VWYWxpZGF0aW9ucyx7cHJvcGVydHk6InNlcmllc0NoYXJ0VHlwZXMiLHZhbGlkYXRpb25GbjplPT52b2lkIDA9PT1lfHxBcnJheS5pc0FycmF5KGUpJiZlLmV2ZXJ5KEkpLHdhcm5NZXNzYWdlOk4oInNlcmllc0NoYXJ0VHlwZXMiLCJBcnJheSBvZiBTZXJpZXNDaGFydFR5cGUiKX1dO3JldHVybiBHLnZhbGlkYXRlUHJvcGVydGllcyhlLHQsWyJ0eXBlIiwiY2hhcnRJZCIsImNoYXJ0VHlwZSIsImNoYXJ0VGhlbWVOYW1lIiwiY2hhcnRUaGVtZU92ZXJyaWRlcyIsInVubGlua0NoYXJ0IiwiY2VsbFJhbmdlIiwic3VwcHJlc3NDaGFydFJhbmdlcyIsImFnZ0Z1bmMiLCJzZXJpZXNDaGFydFR5cGVzIl0sIlVwZGF0ZVJhbmdlQ2hhcnRQYXJhbXMiKX1zdGF0aWMgdmFsaWRhdGVVcGRhdGVQaXZvdENoYXJ0UGFyYW1zKGUpe2NvbnN0IHQ9Wy4uLkcuY29tbW9uVmFsaWRhdGlvbnNdO3JldHVybiBHLnZhbGlkYXRlUHJvcGVydGllcyhlLHQsWyJ0eXBlIiwiY2hhcnRJZCIsImNoYXJ0VHlwZSIsImNoYXJ0VGhlbWVOYW1lIiwiY2hhcnRUaGVtZU92ZXJyaWRlcyIsInVubGlua0NoYXJ0Il0sIlVwZGF0ZVBpdm90Q2hhcnRQYXJhbXMiKX1zdGF0aWMgdmFsaWRhdGVVcGRhdGVDcm9zc0ZpbHRlckNoYXJ0UGFyYW1zKGUpe2NvbnN0IHQ9Wy4uLkcuY29tbW9uVmFsaWRhdGlvbnMsLi4uRy5jZWxsUmFuZ2VWYWxpZGF0aW9uc107cmV0dXJuIEcudmFsaWRhdGVQcm9wZXJ0aWVzKGUsdCxbInR5cGUiLCJjaGFydElkIiwiY2hhcnRUeXBlIiwiY2hhcnRUaGVtZU5hbWUiLCJjaGFydFRoZW1lT3ZlcnJpZGVzIiwidW5saW5rQ2hhcnQiLCJjZWxsUmFuZ2UiLCJzdXBwcmVzc0NoYXJ0UmFuZ2VzIiwiYWdnRnVuYyJdLCJVcGRhdGVDcm9zc0ZpbHRlckNoYXJ0UGFyYW1zIil9c3RhdGljIHZhbGlkYXRlUHJvcGVydGllcyhlLHQsaSxzKXtsZXQgcj12b2lkIDA7Zm9yKGNvbnN0IGkgb2YgdCl7Y29uc3R7cHJvcGVydHk6dCx2YWxpZGF0aW9uRm46cyx3YXJuTWVzc2FnZTpvfT1pO2lmKHQgaW4gZSl7Y29uc3QgaT1lW3RdLG49cyhpKTtpZighMD09PW4pY29udGludWU7aWYoITE9PT1uKXJldHVybiBjb25zb2xlLndhcm4obyhpKSksITE7cj1yfHxPYmplY3QuYXNzaWduKHt9LGUpLHJbdF09bn19Zm9yKGNvbnN0IHQgaW4gZSlpZighaS5pbmNsdWRlcyh0KSlyZXR1cm4gY29uc29sZS53YXJuKGBBRyBHcmlkIC0gVW5leHBlY3RlZCBwcm9wZXJ0eSBzdXBwbGllZC4gJHtzfSBkb2VzIG5vdCBjb250YWluOiBcYCR7dH1cYC5gKSwhMTtyZXR1cm4gcnx8ITB9fVA9RyxHLnZhbGlkQ2hhcnRUeXBlcz1bImNvbHVtbiIsImdyb3VwZWRDb2x1bW4iLCJzdGFja2VkQ29sdW1uIiwibm9ybWFsaXplZENvbHVtbiIsImJhciIsImdyb3VwZWRCYXIiLCJzdGFja2VkQmFyIiwibm9ybWFsaXplZEJhciIsImxpbmUiLCJzY2F0dGVyIiwiYnViYmxlIiwicGllIiwiZG9udXQiLCJhcmVhIiwic3RhY2tlZEFyZWEiLCJub3JtYWxpemVkQXJlYSIsImhpc3RvZ3JhbSIsInJhZGlhbENvbHVtbiIsInJhZGlhbEJhciIsInJhZGFyTGluZSIsInJhZGFyQXJlYSIsIm5pZ2h0aW5nYWxlIiwicmFuZ2VCYXIiLCJyYW5nZUFyZWEiLCJib3hQbG90IiwidHJlZW1hcCIsInN1bmJ1cnN0IiwiaGVhdG1hcCIsIndhdGVyZmFsbCIsImNvbHVtbkxpbmVDb21ibyIsImFyZWFDb2x1bW5Db21ibyIsImN1c3RvbUNvbWJvIl0sRy5sZWdhY3lDaGFydFR5cGVzPVsiZG91Z2hudXQiXSxHLnZhbGlkYXRlQ2hhcnRUeXBlPU0oZT0+e2lmKFAuaXNWYWxpZENoYXJ0VHlwZShlKSlyZXR1cm4hMDtpZihQLmlzTGVnYWN5Q2hhcnRUeXBlKGUpKXtjb25zdCB0PXAoZSk7cmV0dXJuIGNvbnNvbGUud2FybihgQUcgR3JpZCAtIFRoZSBjaGFydCB0eXBlICcke2V9JyBoYXMgYmVlbiBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICcke3R9JyBpbnN0ZWFkLmApLHR9cmV0dXJuITF9KSxHLnZhbGlkYXRlQWdDaGFydFRoZW1lT3ZlcnJpZGVzPU0oZT0+Im9iamVjdCI9PXR5cGVvZiBlKSxHLnZhbGlkYXRlQ2hhcnRQYXJhbXNDZWxsUmFuZ2U9TShlPT4ib2JqZWN0Ij09dHlwZW9mIGUpLEcudmFsaWRhdGVBZ2dGdW5jPU0oZT0+InN0cmluZyI9PXR5cGVvZiBlfHwiZnVuY3Rpb24iPT10eXBlb2YgZSksRy5jb21tb25WYWxpZGF0aW9ucz1be3Byb3BlcnR5OiJjaGFydElkIix2YWxpZGF0aW9uRm46TCx3YXJuTWVzc2FnZTpOKCJjaGFydElkIiwic3RyaW5nIil9LHtwcm9wZXJ0eToiY2hhcnRUeXBlIix2YWxpZGF0aW9uRm46Ry52YWxpZGF0ZUNoYXJ0VHlwZSx3YXJuTWVzc2FnZTpOKCJjaGFydFR5cGUiLEcudmFsaWRDaGFydFR5cGVzLmpvaW4oIiwgIikpfSx7cHJvcGVydHk6ImNoYXJ0VGhlbWVOYW1lIix2YWxpZGF0aW9uRm46TCx3YXJuTWVzc2FnZTpOKCJjaGFydFRoZW1lTmFtZSIsInN0cmluZyIpfSx7cHJvcGVydHk6ImNoYXJ0VGhlbWVPdmVycmlkZXMiLHZhbGlkYXRpb25GbjpHLnZhbGlkYXRlQWdDaGFydFRoZW1lT3ZlcnJpZGVzLHdhcm5NZXNzYWdlOk4oImNoYXJ0VGhlbWVPdmVycmlkZXMiLCJBZ0NoYXJ0VGhlbWVPdmVycmlkZXMiKX0se3Byb3BlcnR5OiJ1bmxpbmtDaGFydCIsdmFsaWRhdGlvbkZuOkYsd2Fybk1lc3NhZ2U6TigidW5saW5rQ2hhcnQiLCJib29sZWFuIil9XSxHLmNlbGxSYW5nZVZhbGlkYXRpb25zPVt7cHJvcGVydHk6ImNlbGxSYW5nZSIsdmFsaWRhdGlvbkZuOkcudmFsaWRhdGVDaGFydFBhcmFtc0NlbGxSYW5nZSx3YXJuTWVzc2FnZTpOKCJjZWxsUmFuZ2UiLCJDaGFydFBhcmFtc0NlbGxSYW5nZSIpfSx7cHJvcGVydHk6InN1cHByZXNzQ2hhcnRSYW5nZXMiLHZhbGlkYXRpb25GbjpGLHdhcm5NZXNzYWdlOk4oInN1cHByZXNzQ2hhcnRSYW5nZXMiLCJib29sZWFuIil9LHtwcm9wZXJ0eToiYWdnRnVuYyIsdmFsaWRhdGlvbkZuOkcudmFsaWRhdGVBZ2dGdW5jLHdhcm5NZXNzYWdlOk4oImFnZ0Z1bmMiLCJzdHJpbmcgb3IgSUFnZ0Z1bmMiKX1dO3ZhciBrPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NvbnN0IF89WyJhZy1kZWZhdWx0IiwiYWctbWF0ZXJpYWwiLCJhZy1zaGVldHMiLCJhZy1wb2x5Y2hyb21hIiwiYWctdml2aWQiXTtjbGFzcyBWIGV4dGVuZHMgcy5CZWFuU3R1Yntjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMubW9kZWw9ZSx0aGlzLmlzRW50ZXJwcmlzZT0oKT0+by5nLmVudGVycHJpc2VNb2R1bGUuaXNFbnRlcnByaXNlfWluaXQoKXt0aGlzLnNldENoYXJ0UmFuZ2UoKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9SQU5HRV9TRUxFQ1RJT05fQ0hBTkdFRCxlPT57ZS5pZCYmZS5pZD09PXRoaXMubW9kZWwuY2hhcnRJZCYmdGhpcy51cGRhdGVGb3JSYW5nZUNoYW5nZSgpfSksdGhpcy5tb2RlbC51bmxpbmtlZCYmdGhpcy5yYW5nZVNlcnZpY2UmJnRoaXMucmFuZ2VTZXJ2aWNlLnNldENlbGxSYW5nZXMoW10pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9NT1ZFRCx0aGlzLnVwZGF0ZUZvckdyaWRDaGFuZ2UuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ09MVU1OX1BJTk5FRCx0aGlzLnVwZGF0ZUZvckdyaWRDaGFuZ2UuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ09MVU1OX1ZJU0lCTEUsdGhpcy51cGRhdGVGb3JHcmlkQ2hhbmdlLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRCx0aGlzLnVwZGF0ZUZvckdyaWRDaGFuZ2UuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfTU9ERUxfVVBEQVRFRCx0aGlzLnVwZGF0ZUZvckdyaWRDaGFuZ2UuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ0VMTF9WQUxVRV9DSEFOR0VELHRoaXMudXBkYXRlRm9yRGF0YUNoYW5nZS5iaW5kKHRoaXMpKX11cGRhdGUoZSl7aWYoIXRoaXMudmFsaWRVcGRhdGVUeXBlKGUpKXJldHVybiExO2NvbnN0IHQ9Ry52YWxpZGF0ZUNoYXJ0UGFyYW1zKGUpO2lmKCF0KXJldHVybiExO2NvbnN0IGk9ITA9PT10P2U6dDtyZXR1cm4gdGhpcy5hcHBseVZhbGlkYXRlZENoYXJ0UGFyYW1zKGkpLCEwfWFwcGx5VmFsaWRhdGVkQ2hhcnRQYXJhbXMoZSl7dmFyIHQsaSxzLHIsbyxuLGE7Y29uc3R7Y2hhcnRJZDpsLGNoYXJ0VHlwZTpkLGNoYXJ0VGhlbWVOYW1lOmMsdW5saW5rQ2hhcnQ6aH09ZSx1PXtjaGFydElkOmwscGl2b3RDaGFydDp0aGlzLm1vZGVsLnBpdm90Q2hhcnQsY2hhcnRUeXBlOm51bGwhPWQ/ZDp0aGlzLm1vZGVsLmNoYXJ0VHlwZSxjaGFydFRoZW1lTmFtZTpudWxsIT1jP2M6dGhpcy5tb2RlbC5jaGFydFRoZW1lTmFtZSx1bmxpbmtDaGFydDpudWxsIT1oP2g6dGhpcy5tb2RlbC51bmxpbmtlZCxjZWxsUmFuZ2U6dGhpcy5tb2RlbC5zdXBwbGllZENlbGxSYW5nZSxhZ2dGdW5jOnRoaXMubW9kZWwuYWdnRnVuYyxzZXJpZXNDaGFydFR5cGVzOnZvaWQgMCxzdXBwcmVzc0NoYXJ0UmFuZ2VzOiExLGNyb3NzRmlsdGVyaW5nOiExfTtsZXQgcD1PYmplY3QuYXNzaWduKHt9LHUpO3N3aXRjaChlLnR5cGUpe2Nhc2UicmFuZ2VDaGFydFVwZGF0ZSI6cC5jZWxsUmFuZ2U9bnVsbCE9PSh0PXRoaXMuY3JlYXRlQ2VsbFJhbmdlKGUpKSYmdm9pZCAwIT09dD90OnRoaXMubW9kZWwuc3VwcGxpZWRDZWxsUmFuZ2UscC5hZ2dGdW5jPW51bGwhPT0oaT1lLmFnZ0Z1bmMpJiZ2b2lkIDAhPT1pP2k6dGhpcy5tb2RlbC5hZ2dGdW5jLHAuc2VyaWVzQ2hhcnRUeXBlcz1lLnNlcmllc0NoYXJ0VHlwZXMscC5zdXBwcmVzc0NoYXJ0UmFuZ2VzPW51bGwhPT0ocz1lLnN1cHByZXNzQ2hhcnRSYW5nZXMpJiZ2b2lkIDAhPT1zP3M6dGhpcy5tb2RlbC5zdXBwcmVzc0NoYXJ0UmFuZ2VzO2JyZWFrO2Nhc2UiY3Jvc3NGaWx0ZXJDaGFydFVwZGF0ZSI6cC5jZWxsUmFuZ2U9bnVsbCE9PShyPXRoaXMuY3JlYXRlQ2VsbFJhbmdlKGUpKSYmdm9pZCAwIT09cj9yOnRoaXMubW9kZWwuc3VwcGxpZWRDZWxsUmFuZ2UscC5hZ2dGdW5jPW51bGwhPT0obz1lLmFnZ0Z1bmMpJiZ2b2lkIDAhPT1vP286dGhpcy5tb2RlbC5hZ2dGdW5jLHAuY3Jvc3NGaWx0ZXJpbmc9ITAscC5zdXBwcmVzc0NoYXJ0UmFuZ2VzPW51bGwhPT0obj1lLnN1cHByZXNzQ2hhcnRSYW5nZXMpJiZ2b2lkIDAhPT1uP246dGhpcy5tb2RlbC5zdXBwcmVzc0NoYXJ0UmFuZ2VzfXRoaXMubW9kZWwudXBkYXRlTW9kZWwocCk7cC51bmxpbmtDaGFydHx8cC5zdXBwcmVzc0NoYXJ0UmFuZ2VzP251bGw9PT0oYT10aGlzLnJhbmdlU2VydmljZSl8fHZvaWQgMD09PWF8fGEuc2V0Q2VsbFJhbmdlcyhbXSk6dGhpcy5zZXRDaGFydFJhbmdlKCl9dXBkYXRlRm9yR3JpZENoYW5nZSgpe3RoaXMubW9kZWwudW5saW5rZWR8fCh0aGlzLm1vZGVsLnVwZGF0ZUNlbGxSYW5nZXMoKSx0aGlzLm1vZGVsLnVwZGF0ZURhdGEoKSx0aGlzLnNldENoYXJ0UmFuZ2UoKSl9dXBkYXRlRm9yRGF0YUNoYW5nZSgpe3RoaXMubW9kZWwudW5saW5rZWR8fCh0aGlzLm1vZGVsLnVwZGF0ZURhdGEoKSx0aGlzLnJhaXNlQ2hhcnRNb2RlbFVwZGF0ZUV2ZW50KCkpfXVwZGF0ZUZvclJhbmdlQ2hhbmdlKCl7dGhpcy51cGRhdGVGb3JHcmlkQ2hhbmdlKCksdGhpcy5yYWlzZUNoYXJ0UmFuZ2VTZWxlY3Rpb25DaGFuZ2VkRXZlbnQoKX11cGRhdGVGb3JQYW5lbENoYW5nZShlKXt0aGlzLm1vZGVsLnVwZGF0ZUNlbGxSYW5nZXMoZSksdGhpcy5tb2RlbC51cGRhdGVEYXRhKCksdGhpcy5zZXRDaGFydFJhbmdlKCksdGhpcy5yYWlzZUNoYXJ0UmFuZ2VTZWxlY3Rpb25DaGFuZ2VkRXZlbnQoKX1nZXRDaGFydFVwZGF0ZVBhcmFtcyhlKXtjb25zdCB0PXRoaXMuZ2V0U2VsZWN0ZWRWYWx1ZUNvbFN0YXRlKCkubWFwKGU9Pih7Y29sSWQ6ZS5jb2xJZCxkaXNwbGF5TmFtZTplLmRpc3BsYXlOYW1lfSkpLGk9dGhpcy5nZXRDaGFydERhdGEoKSxzPXRoaXMuZ2V0U2VsZWN0ZWREaW1lbnNpb25zKCk7cmV0dXJue2RhdGE6aSxncm91cGluZzp0aGlzLmlzR3JvdXBpbmcoKSxjYXRlZ29yaWVzOnMubWFwKGU9Pih7aWQ6ZS5jb2xJZCxuYW1lOmUuZGlzcGxheU5hbWUsY2hhcnREYXRhVHlwZTp0aGlzLm1vZGVsLmdldENoYXJ0RGF0YVR5cGUoZS5jb2xJZCl9KSksZmllbGRzOnQsY2hhcnRJZDp0aGlzLmdldENoYXJ0SWQoKSxnZXRDcm9zc0ZpbHRlcmluZ0NvbnRleHQ6KCk9Pih7bGFzdFNlbGVjdGVkQ2hhcnRJZDoieHh4In0pLHNlcmllc0NoYXJ0VHlwZXM6dGhpcy5nZXRTZXJpZXNDaGFydFR5cGVzKCksdXBkYXRlZE92ZXJyaWRlczplfX1nZXRDaGFydE1vZGVsKCl7Y29uc3QgZT10aGlzLm1vZGVsLnBpdm90Q2hhcnQ/InBpdm90IjoicmFuZ2UiLHQ9dGhpcy5pc0NvbWJvQ2hhcnQoKT90aGlzLm1vZGVsLmNvbWJvQ2hhcnRNb2RlbC5zZXJpZXNDaGFydFR5cGVzOnZvaWQgMDtyZXR1cm57bW9kZWxUeXBlOmUsY2hhcnRJZDp0aGlzLm1vZGVsLmNoYXJ0SWQsY2hhcnRUeXBlOnRoaXMubW9kZWwuY2hhcnRUeXBlLGNoYXJ0VGhlbWVOYW1lOnRoaXMuZ2V0Q2hhcnRUaGVtZU5hbWUoKSxjaGFydE9wdGlvbnM6dGhpcy5jaGFydFByb3h5LmdldENoYXJ0VGhlbWVPdmVycmlkZXMoKSxjaGFydFBhbGV0dGU6dGhpcy5jaGFydFByb3h5LmdldENoYXJ0UGFsZXR0ZSgpLGNlbGxSYW5nZTp0aGlzLmdldENlbGxSYW5nZVBhcmFtcygpLHN1cHByZXNzQ2hhcnRSYW5nZXM6dGhpcy5tb2RlbC5zdXBwcmVzc0NoYXJ0UmFuZ2VzLGFnZ0Z1bmM6dGhpcy5tb2RlbC5hZ2dGdW5jLHVubGlua0NoYXJ0OnRoaXMubW9kZWwudW5saW5rZWQsc2VyaWVzQ2hhcnRUeXBlczp0fX1nZXRDaGFydElkKCl7cmV0dXJuIHRoaXMubW9kZWwuY2hhcnRJZH1nZXRDaGFydERhdGEoKXtyZXR1cm4gdGhpcy5tb2RlbC5jaGFydERhdGF9Z2V0Q2hhcnRUeXBlKCl7cmV0dXJuIHRoaXMubW9kZWwuY2hhcnRUeXBlfXNldENoYXJ0VHlwZShlKXtpZih1KHRoaXMubW9kZWwuY2hhcnRUeXBlKSYmIXUoZSkpe2xldCBlPSExO2Zvcihjb25zdCB0IG9mIHRoaXMubW9kZWwuZGltZW5zaW9uQ29sU3RhdGUpdC5zZWxlY3RlZCYmKGUmJih0LnNlbGVjdGVkPSExKSxlPSEwKX10aGlzLm1vZGVsLmNoYXJ0VHlwZT1lLHRoaXMubW9kZWwuY29tYm9DaGFydE1vZGVsLnVwZGF0ZVNlcmllc0NoYXJ0VHlwZXMoKSx0aGlzLnJhaXNlQ2hhcnRNb2RlbFVwZGF0ZUV2ZW50KCksdGhpcy5yYWlzZUNoYXJ0T3B0aW9uc0NoYW5nZWRFdmVudCgpfXNldENoYXJ0VGhlbWVOYW1lKGUsdCl7dGhpcy5tb2RlbC5jaGFydFRoZW1lTmFtZT1lLHR8fCh0aGlzLnJhaXNlQ2hhcnRNb2RlbFVwZGF0ZUV2ZW50KCksdGhpcy5yYWlzZUNoYXJ0T3B0aW9uc0NoYW5nZWRFdmVudCgpKX1nZXRDaGFydFRoZW1lTmFtZSgpe3JldHVybiB0aGlzLm1vZGVsLmNoYXJ0VGhlbWVOYW1lfWlzUGl2b3RDaGFydCgpe3JldHVybiB0aGlzLm1vZGVsLnBpdm90Q2hhcnR9aXNQaXZvdE1vZGUoKXtyZXR1cm4gdGhpcy5tb2RlbC5pc1Bpdm90TW9kZSgpfWlzR3JvdXBpbmcoKXtyZXR1cm4gdGhpcy5tb2RlbC5pc0dyb3VwaW5nKCl9aXNDcm9zc0ZpbHRlckNoYXJ0KCl7cmV0dXJuIHRoaXMubW9kZWwuY3Jvc3NGaWx0ZXJpbmd9Z2V0VGhlbWVOYW1lcygpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNoYXJ0VGhlbWVzIil8fF99Z2V0VGhlbWVzKCl7cmV0dXJuIHRoaXMuZ2V0VGhlbWVOYW1lcygpLm1hcChlPT57Y29uc3QgdD1UKGUpP2U6dGhpcy5jaGFydFByb3h5Lmxvb2t1cEN1c3RvbUNoYXJ0VGhlbWUoZSk7cmV0dXJuIG8uai5nZXRDaGFydFRoZW1lKHQpfSl9Z2V0UGFsZXR0ZXMoKXtyZXR1cm4gdGhpcy5nZXRUaGVtZXMoKS5tYXAoZT0+ZS5wYWxldHRlKX1nZXRUaGVtZVRlbXBsYXRlUGFyYW1ldGVycygpe3JldHVybiB0aGlzLmdldFRoZW1lcygpLm1hcChlPT5lLmdldFRlbXBsYXRlUGFyYW1ldGVycygpKX1nZXRWYWx1ZUNvbFN0YXRlKCl7cmV0dXJuIHRoaXMubW9kZWwudmFsdWVDb2xTdGF0ZS5tYXAodGhpcy5kaXNwbGF5TmFtZU1hcHBlci5iaW5kKHRoaXMpKX1nZXRTZWxlY3RlZFZhbHVlQ29sU3RhdGUoKXtyZXR1cm4gdGhpcy5nZXRWYWx1ZUNvbFN0YXRlKCkuZmlsdGVyKGU9PmUuc2VsZWN0ZWQpfWdldFNlbGVjdGVkRGltZW5zaW9ucygpe3JldHVybiB0aGlzLm1vZGVsLmdldFNlbGVjdGVkRGltZW5zaW9ucygpfWRpc3BsYXlOYW1lTWFwcGVyKGUpe2NvbnN0IHQ9dGhpcy5tb2RlbC5jb2x1bW5OYW1lc1tlLmNvbElkXTtyZXR1cm4gZS5kaXNwbGF5TmFtZT10P3Quam9pbigiIC0gIik6dGhpcy5tb2RlbC5nZXRDb2xEaXNwbGF5TmFtZShlLmNvbHVtbiksZX1nZXRDb2xTdGF0ZUZvck1lbnUoKXtyZXR1cm57ZGltZW5zaW9uQ29sczp0aGlzLm1vZGVsLmRpbWVuc2lvbkNvbFN0YXRlLHZhbHVlQ29sczp0aGlzLmdldFZhbHVlQ29sU3RhdGUoKX19c2V0Q2hhcnRSYW5nZShlPSExKXshdGhpcy5yYW5nZVNlcnZpY2V8fHRoaXMubW9kZWwuc3VwcHJlc3NDaGFydFJhbmdlc3x8dGhpcy5tb2RlbC51bmxpbmtlZHx8dGhpcy5yYW5nZVNlcnZpY2Uuc2V0Q2VsbFJhbmdlcyh0aGlzLmdldENlbGxSYW5nZXMoKSksZXx8dGhpcy5yYWlzZUNoYXJ0TW9kZWxVcGRhdGVFdmVudCgpfWRldGFjaENoYXJ0UmFuZ2UoKXt0aGlzLm1vZGVsLnVubGlua2VkPSF0aGlzLm1vZGVsLnVubGlua2VkLHRoaXMubW9kZWwudW5saW5rZWQ/dGhpcy5yYW5nZVNlcnZpY2UmJnRoaXMucmFuZ2VTZXJ2aWNlLnNldENlbGxSYW5nZXMoW10pOnRoaXMudXBkYXRlRm9yR3JpZENoYW5nZSgpfXNldENoYXJ0UHJveHkoZSl7dGhpcy5jaGFydFByb3h5PWV9Z2V0Q2hhcnRQcm94eSgpe3JldHVybiB0aGlzLmNoYXJ0UHJveHl9aXNBY3RpdmVYWUNoYXJ0KCl7cmV0dXJuIHMuXy5pbmNsdWRlcyhbInNjYXR0ZXIiLCJidWJibGUiXSx0aGlzLmdldENoYXJ0VHlwZSgpKX1pc0NoYXJ0TGlua2VkKCl7cmV0dXJuIXRoaXMubW9kZWwudW5saW5rZWR9Y3VzdG9tQ29tYm9FeGlzdHMoKXtjb25zdCBlPXRoaXMubW9kZWwuY29tYm9DaGFydE1vZGVsLnNhdmVkQ3VzdG9tU2VyaWVzQ2hhcnRUeXBlcztyZXR1cm4gZSYmZS5sZW5ndGg+MH1nZXRTZXJpZXNDaGFydFR5cGVzKCl7cmV0dXJuIHRoaXMubW9kZWwuY29tYm9DaGFydE1vZGVsLnNlcmllc0NoYXJ0VHlwZXN9aXNDb21ib0NoYXJ0KCl7cmV0dXJuIHRoaXMubW9kZWwuaXNDb21ib0NoYXJ0KCl9dXBkYXRlU2VyaWVzQ2hhcnRUeXBlKGUsdCxpKXtjb25zdCBzPXRoaXMubW9kZWwuY29tYm9DaGFydE1vZGVsLnNlcmllc0NoYXJ0VHlwZXMuZmluZCh0PT50LmNvbElkPT09ZSk7aWYocyl7Y29uc3QgZT0iY3VzdG9tQ29tYm8iIT09dGhpcy5tb2RlbC5jaGFydFR5cGU7ZSYmKHRoaXMubW9kZWwuY2hhcnRUeXBlPSJjdXN0b21Db21ibyIpO2NvbnN0IHI9cy5jaGFydFR5cGU7bnVsbCE9dCYmKHMuY2hhcnRUeXBlPXQpLG51bGwhPWkmJihzLnNlY29uZGFyeUF4aXM9aSksdGhpcy5tb2RlbC5jb21ib0NoYXJ0TW9kZWwuc2F2ZWRDdXN0b21TZXJpZXNDaGFydFR5cGVzPXRoaXMubW9kZWwuY29tYm9DaGFydE1vZGVsLnNlcmllc0NoYXJ0VHlwZXMsdGhpcy5tb2RlbC5jb21ib0NoYXJ0TW9kZWwudXBkYXRlU2VyaWVzQ2hhcnRUeXBlcygpLHRoaXMudXBkYXRlRm9yRGF0YUNoYW5nZSgpLGUmJnRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpWLkVWRU5UX0NIQVJUX1RZUEVfQ0hBTkdFRH0pLHIhPT10JiZ0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6Vi5FVkVOVF9DSEFSVF9TRVJJRVNfQ0hBUlRfVFlQRV9DSEFOR0VEfSksdGhpcy5yYWlzZUNoYXJ0T3B0aW9uc0NoYW5nZWRFdmVudCgpfX1nZXRBY3RpdmVTZXJpZXNDaGFydFR5cGVzKCl7Y29uc3QgZT10aGlzLmdldFNlbGVjdGVkVmFsdWVDb2xTdGF0ZSgpLm1hcChlPT5lLmNvbElkKTtyZXR1cm4gdGhpcy5nZXRTZXJpZXNDaGFydFR5cGVzKCkuZmlsdGVyKHQ9PmUuaW5jbHVkZXModC5jb2xJZCkpfWdldENoYXJ0U2VyaWVzVHlwZXMoKXtyZXR1cm4gdGhpcy5pc0NvbWJvQ2hhcnQoKT9bImxpbmUiLCJiYXIiLCJhcmVhIl06W2codGhpcy5nZXRDaGFydFR5cGUoKSldfWdldENlbGxSYW5nZXMoKXtyZXR1cm5bdGhpcy5tb2RlbC5kaW1lbnNpb25DZWxsUmFuZ2UsdGhpcy5tb2RlbC52YWx1ZUNlbGxSYW5nZV0uZmlsdGVyKGU9PmUpfWNyZWF0ZUNlbGxSYW5nZShlKXt2YXIgdDtyZXR1cm4gZS5jZWxsUmFuZ2UmJihudWxsPT09KHQ9dGhpcy5yYW5nZVNlcnZpY2UpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNyZWF0ZUNlbGxSYW5nZUZyb21DZWxsUmFuZ2VQYXJhbXMoZS5jZWxsUmFuZ2UpKX12YWxpZFVwZGF0ZVR5cGUoZSl7dmFyIHQ7aWYoIWUudHlwZSlyZXR1cm4gY29uc29sZS53YXJuKCJBRyBHcmlkIC0gVW5hYmxlIHRvIHVwZGF0ZSBjaGFydCBhcyB0aGUgJ3R5cGUnIGlzIG1pc3NpbmcuIEl0IG11c3QgYmUgZWl0aGVyICdyYW5nZUNoYXJ0VXBkYXRlJywgJ3Bpdm90Q2hhcnRVcGRhdGUnLCBvciAnY3Jvc3NGaWx0ZXJDaGFydFVwZGF0ZScuIiksITE7Y29uc3QgaT17IlJhbmdlIENoYXJ0IjooKT0+IXRoaXMuaXNQaXZvdENoYXJ0KCkmJiF0aGlzLmlzQ3Jvc3NGaWx0ZXJDaGFydCgpLCJQaXZvdCBDaGFydCI6KCk9PnRoaXMuaXNQaXZvdENoYXJ0KCksIkNyb3NzIEZpbHRlciBDaGFydCI6KCk9PnRoaXMuaXNDcm9zc0ZpbHRlckNoYXJ0KCl9LHM9bnVsbCE9PSh0PU9iamVjdC5rZXlzKGkpLmZpbmQoZT0+aVtlXSgpKSkmJnZvaWQgMCE9PXQ/dDoiUmFuZ2UgQ2hhcnQiLHI9ZS50eXBlPT09YCR7c1swXS50b0xvd2VyQ2FzZSgpfSR7cy5zbGljZSgxKS5yZXBsYWNlKC8gL2csIiIpfVVwZGF0ZWA7cmV0dXJuIHJ8fGNvbnNvbGUud2FybihgQUcgR3JpZCAtIFVuYWJsZSB0byB1cGRhdGUgY2hhcnQgYXMgYSAnJHtlLnR5cGV9JyB1cGRhdGUgdHlwZSBpcyBub3QgcGVybWl0dGVkIG9uIGEgJHtzfS5gKSxyfWdldENlbGxSYW5nZVBhcmFtcygpe2NvbnN0IGU9dGhpcy5nZXRDZWxsUmFuZ2VzKCksdD1lWzBdLGk9dCYmdC5zdGFydFJvd3x8bnVsbCxzPXQmJnQuZW5kUm93fHxudWxsO3JldHVybntyb3dTdGFydEluZGV4OmkmJmkucm93SW5kZXgscm93U3RhcnRQaW5uZWQ6aSYmaS5yb3dQaW5uZWQscm93RW5kSW5kZXg6cyYmcy5yb3dJbmRleCxyb3dFbmRQaW5uZWQ6cyYmcy5yb3dQaW5uZWQsY29sdW1uczplLnJlZHVjZSgoZSx0KT0+ZS5jb25jYXQodC5jb2x1bW5zLm1hcChlPT5lLmdldElkKCkpKSxbXSl9fXJhaXNlQ2hhcnRNb2RlbFVwZGF0ZUV2ZW50KCl7Y29uc3QgZT17dHlwZTpWLkVWRU5UX0NIQVJUX01PREVMX1VQREFURX07dGhpcy5kaXNwYXRjaEV2ZW50KGUpfXJhaXNlQ2hhcnRVcGRhdGVkRXZlbnQoKXtjb25zdCBlPXt0eXBlOlYuRVZFTlRfQ0hBUlRfVVBEQVRFRH07dGhpcy5kaXNwYXRjaEV2ZW50KGUpfXJhaXNlQ2hhcnRBcGlVcGRhdGVFdmVudCgpe2NvbnN0IGU9e3R5cGU6Vi5FVkVOVF9DSEFSVF9BUElfVVBEQVRFfTt0aGlzLmRpc3BhdGNoRXZlbnQoZSl9cmFpc2VDaGFydE9wdGlvbnNDaGFuZ2VkRXZlbnQoKXtjb25zdHtjaGFydElkOmUsY2hhcnRUeXBlOnR9PXRoaXMuZ2V0Q2hhcnRNb2RlbCgpLGk9e3R5cGU6cy5FdmVudHMuRVZFTlRfQ0hBUlRfT1BUSU9OU19DSEFOR0VELGNoYXJ0SWQ6ZSxjaGFydFR5cGU6dCxjaGFydFRoZW1lTmFtZTp0aGlzLmdldENoYXJ0VGhlbWVOYW1lKCksY2hhcnRPcHRpb25zOnRoaXMuY2hhcnRQcm94eS5nZXRDaGFydFRoZW1lT3ZlcnJpZGVzKCl9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoaSl9cmFpc2VDaGFydFJhbmdlU2VsZWN0aW9uQ2hhbmdlZEV2ZW50KCl7Y29uc3QgZT17dHlwZTpzLkV2ZW50cy5FVkVOVF9DSEFSVF9SQU5HRV9TRUxFQ1RJT05fQ0hBTkdFRCxpZDp0aGlzLm1vZGVsLmNoYXJ0SWQsY2hhcnRJZDp0aGlzLm1vZGVsLmNoYXJ0SWQsY2VsbFJhbmdlOnRoaXMuZ2V0Q2VsbFJhbmdlUGFyYW1zKCl9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKSx0aGlzLnJhbmdlU2VydmljZSYmdGhpcy5yYW5nZVNlcnZpY2Uuc2V0Q2VsbFJhbmdlcyhbXSl9fVYuRVZFTlRfQ0hBUlRfVVBEQVRFRD0iY2hhcnRVcGRhdGVkIixWLkVWRU5UX0NIQVJUX0FQSV9VUERBVEU9ImNoYXJ0QXBpVXBkYXRlIixWLkVWRU5UX0NIQVJUX01PREVMX1VQREFURT0iY2hhcnRNb2RlbFVwZGF0ZSIsVi5FVkVOVF9DSEFSVF9UWVBFX0NIQU5HRUQ9ImNoYXJ0VHlwZUNoYW5nZWQiLFYuRVZFTlRfQ0hBUlRfU0VSSUVTX0NIQVJUX1RZUEVfQ0hBTkdFRD0iY2hhcnRTZXJpZXNDaGFydFR5cGVDaGFuZ2VkIixrKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyYW5nZVNlcnZpY2UiKV0sVi5wcm90b3R5cGUsInJhbmdlU2VydmljZSIsdm9pZCAwKSxrKFtzLlBvc3RDb25zdHJ1Y3RdLFYucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgQj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjb25zdCBIPXtncm91cHM6W3t0eXBlOiJjYXRlZ29yaWVzIixpc09wZW46ITB9LHt0eXBlOiJzZXJpZXMiLGlzT3BlbjohMH0se3R5cGU6InNlcmllc0NoYXJ0VHlwZSIsaXNPcGVuOiEwfV19O2NsYXNzIFcgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKFcuVEVNUExBVEUpLHRoaXMuY2hhcnRDb250cm9sbGVyPWUsdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlPXQsdGhpcy5jb2x1bW5Db21wcz1uZXcgTWFwfWluaXQoKXt0aGlzLnVwZGF0ZVBhbmVscygpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY2hhcnRDb250cm9sbGVyLFYuRVZFTlRfQ0hBUlRfTU9ERUxfVVBEQVRFLHRoaXMudXBkYXRlUGFuZWxzLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY2hhcnRDb250cm9sbGVyLFYuRVZFTlRfQ0hBUlRfQVBJX1VQREFURSx0aGlzLnVwZGF0ZVBhbmVscy5iaW5kKHRoaXMpKSx0aGlzLmNyZWF0ZUF1dG9TY3JvbGxTZXJ2aWNlKCl9ZGVzdHJveSgpe3RoaXMuY2xlYXJDb21wb25lbnRzKCksc3VwZXIuZGVzdHJveSgpfXVwZGF0ZVBhbmVscygpe3ZhciBlLHQ7Y29uc3QgaT10aGlzLmNoYXJ0VHlwZSx7ZGltZW5zaW9uQ29sczpyLHZhbHVlQ29sczpvfT10aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDb2xTdGF0ZUZvck1lbnUoKSxuPXIubWFwKGU9PmUuY29sSWQpLmNvbmNhdChvLm1hcChlPT5lLmNvbElkKSk7dGhpcy5jaGFydFR5cGU9dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnRUeXBlKCk7Y29uc3QgYT10aGlzLmdldEdyb3VwRXhwYW5kZWRTdGF0ZSgpO2lmKHMuXy5hcmVFcXVhbChzLl8ua2V5cyh0aGlzLmNvbHVtbkNvbXBzKSxuKSYmdGhpcy5jaGFydFR5cGU9PT1pKXtpZihbLi4uciwuLi5vXS5mb3JFYWNoKGU9Pnt0aGlzLmNvbHVtbkNvbXBzLmdldChlLmNvbElkKS5zZXRWYWx1ZShlLnNlbGVjdGVkLCEwKX0pLHRoaXMuY2hhcnRDb250cm9sbGVyLmlzQWN0aXZlWFlDaGFydCgpKXtjb25zdCBlPXRoaXMuZ2VuZXJhdGVHZXRTZXJpZXNMYWJlbCgpO28uZm9yRWFjaCh0PT57dGhpcy5jb2x1bW5Db21wcy5nZXQodC5jb2xJZCkuc2V0TGFiZWwoZSh0KSl9KX1zLl8ucmVtb3ZlRnJvbVBhcmVudCh0aGlzLmdldEd1aSgpLnF1ZXJ5U2VsZWN0b3IoIiNzZXJpZXNDaGFydFR5cGVHcm91cCIpKSx0aGlzLnNlcmllc0NoYXJ0VHlwZUdyb3VwQ29tcD10aGlzLmRlc3Ryb3lCZWFuKHRoaXMuc2VyaWVzQ2hhcnRUeXBlR3JvdXBDb21wKTtjb25zdCB0PW51bGw9PT0oZT10aGlzLmdldERhdGFQYW5lbERlZigpLmdyb3Vwcyl8fHZvaWQgMD09PWU/dm9pZCAwOmUucmVkdWNlKChlLHt0eXBlOnR9LGkpPT4ic2VyaWVzQ2hhcnRUeXBlIj09PXQ/aTplLC0xKTstMSE9PXQmJnRoaXMuY3JlYXRlU2VyaWVzQ2hhcnRUeXBlR3JvdXAobyx0KX1lbHNlIHRoaXMuY2xlYXJDb21wb25lbnRzKCksbnVsbD09PSh0PXRoaXMuZ2V0RGF0YVBhbmVsRGVmKCkuZ3JvdXBzKXx8dm9pZCAwPT09dHx8dC5mb3JFYWNoKCh7dHlwZTplfSk9PnsiY2F0ZWdvcmllcyI9PT1lP3RoaXMuY3JlYXRlQ2F0ZWdvcmllc0dyb3VwKHIpOiJzZXJpZXMiPT09ZT90aGlzLmNyZWF0ZVNlcmllc0dyb3VwKG8pOiJzZXJpZXNDaGFydFR5cGUiPT09ZT90aGlzLmNyZWF0ZVNlcmllc0NoYXJ0VHlwZUdyb3VwKG8pOmNvbnNvbGUud2FybihgQUcgR3JpZDogaW52YWxpZCBjaGFydHMgZGF0YSBwYW5lbCBncm91cCBuYW1lIHN1cHBsaWVkOiAnJHtlfSdgKX0pO3RoaXMucmVzdG9yZUdyb3VwRXhwYW5kZWRTdGF0ZShhKX1nZXRHcm91cEV4cGFuZGVkU3RhdGUoKXtyZXR1cm5be2dyb3VwVHlwZToiY2F0ZWdvcmllcyIsY29tcDp0aGlzLmNhdGVnb3JpZXNHcm91cENvbXB9LHtncm91cFR5cGU6InNlcmllcyIsY29tcDp0aGlzLnNlcmllc0dyb3VwQ29tcH0se2dyb3VwVHlwZToic2VyaWVzQ2hhcnRUeXBlIixjb21wOnRoaXMuc2VyaWVzQ2hhcnRUeXBlR3JvdXBDb21wfV0ubWFwKCh7Z3JvdXBUeXBlOmUsY29tcDp0fSk9Pnt2YXIgaSxzO2NvbnN0IHI9Qm9vbGVhbihudWxsPT09KHM9bnVsbD09PShpPXRoaXMuZ2V0RGF0YVBhbmVsRGVmKCkuZ3JvdXBzKXx8dm9pZCAwPT09aT92b2lkIDA6aS5maW5kKCh7dHlwZTp0fSk9PnQ9PT1lKSl8fHZvaWQgMD09PXM/dm9pZCAwOnMuaXNPcGVuKTtyZXR1cm4gdD90LmlzRXhwYW5kZWQoKTpyfSl9cmVzdG9yZUdyb3VwRXhwYW5kZWRTdGF0ZShlKXtbdGhpcy5jYXRlZ29yaWVzR3JvdXBDb21wLHRoaXMuc2VyaWVzR3JvdXBDb21wLHRoaXMuc2VyaWVzQ2hhcnRUeXBlR3JvdXBDb21wXS5mb3JFYWNoKCh0LGkpPT57dCYmdC50b2dnbGVHcm91cEV4cGFuZChlW2ldKX0pfWNyZWF0ZUF1dG9TY3JvbGxTZXJ2aWNlKCl7Y29uc3QgZT10aGlzLmdldEd1aSgpO3RoaXMuYXV0b1Njcm9sbFNlcnZpY2U9bmV3IHMuQXV0b1Njcm9sbFNlcnZpY2Uoe3Njcm9sbENvbnRhaW5lcjplLHNjcm9sbEF4aXM6InkiLGdldFZlcnRpY2FsUG9zaXRpb246KCk9PmUuc2Nyb2xsVG9wLHNldFZlcnRpY2FsUG9zaXRpb246dD0+ZS5zY3JvbGxUb3A9dH0pfWNyZWF0ZUNvbXBvbmVudChlLHQpe2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGkuaWQ9dCxpLmNsYXNzTmFtZT0iYWctY2hhcnQtZGF0YS1zZWN0aW9uIixpLmFwcGVuZENoaWxkKGUuZ2V0R3VpKCkpLGl9YWRkQ29tcG9uZW50KGUsdCxpKXtjb25zdCBzPXRoaXMuY3JlYXRlQ29tcG9uZW50KHQsaSk7ZS5hcHBlbmRDaGlsZChzKX1hZGRDb21wb25lbnRBdEluZGV4KGUsdCxpLHMpe2NvbnN0IHI9dGhpcy5jcmVhdGVDb21wb25lbnQodCxpKTtlLmluc2VydEJlZm9yZShyLGUuY2hpbGRyZW5bc10pfWFkZENoYW5nZUxpc3RlbmVyKGUsdCl7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSxzLkV2ZW50cy5FVkVOVF9GSUVMRF9WQUxVRV9DSEFOR0VELCgpPT57dC5zZWxlY3RlZD1lLmdldFZhbHVlKCksdGhpcy5jaGFydENvbnRyb2xsZXIudXBkYXRlRm9yUGFuZWxDaGFuZ2UodCl9KX1jcmVhdGVDYXRlZ29yaWVzR3JvdXAoZSl7dGhpcy5jYXRlZ29yaWVzR3JvdXBDb21wPXRoaXMuY3JlYXRlQmVhbihuZXcgcy5BZ0dyb3VwQ29tcG9uZW50KHt0aXRsZTp0aGlzLmdldENhdGVnb3J5R3JvdXBUaXRsZSgpLGVuYWJsZWQ6ITAsc3VwcHJlc3NFbmFibGVkQ2hlY2tib3g6ITAsc3VwcHJlc3NPcGVuQ2xvc2VJY29uczohMSxjc3NJZGVudGlmaWVyOiJjaGFydHMtZGF0YSJ9KSk7Y29uc3QgdD0iY2hhcnREaW1lbnNpb24iK3RoaXMuY2F0ZWdvcmllc0dyb3VwQ29tcC5nZXRDb21wSWQoKSxpPXUodGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnRUeXBlKCkpO2lmKGUuZm9yRWFjaChlPT57Y29uc3Qgcj10aGlzLmNhdGVnb3JpZXNHcm91cENvbXAuY3JlYXRlTWFuYWdlZEJlYW4oaT8oKCk9Pntjb25zdCBlPW5ldyBzLkFnQ2hlY2tib3g7cmV0dXJuIGUuYWRkQ3NzQ2xhc3MoImFnLWRhdGEtc2VsZWN0LWNoZWNrYm94IiksZX0pKCk6bmV3IHMuQWdSYWRpb0J1dHRvbik7ci5zZXRMYWJlbChzLl8uZXNjYXBlU3RyaW5nKGUuZGlzcGxheU5hbWUpKSxyLnNldFZhbHVlKGUuc2VsZWN0ZWQpLHIuc2V0SW5wdXROYW1lKHQpLHRoaXMuYWRkQ2hhbmdlTGlzdGVuZXIocixlKSx0aGlzLmNhdGVnb3JpZXNHcm91cENvbXAuYWRkSXRlbShyKSx0aGlzLmNvbHVtbkNvbXBzLnNldChlLmNvbElkLHIpLGkmJnRoaXMuYWRkRHJhZ0hhbmRsZShyLGUpfSksdGhpcy5hZGRDb21wb25lbnQodGhpcy5nZXRHdWkoKSx0aGlzLmNhdGVnb3JpZXNHcm91cENvbXAsImNhdGVnb3JpZXNHcm91cCIpLGkpe2NvbnN0IGU9dGhpcy5jYXRlZ29yaWVzR3JvdXBDb21wLmdldEd1aSgpLHQ9e2dldEljb25OYW1lOigpPT5zLkRyYWdBbmREcm9wU2VydmljZS5JQ09OX01PVkUsZ2V0Q29udGFpbmVyOigpPT5lLG9uRHJhZ2dpbmc6ZT0+dGhpcy5vbkRyYWdnaW5nKGUpLG9uRHJhZ0xlYXZlOigpPT50aGlzLm9uRHJhZ0xlYXZlKCksaXNJbnRlcmVzdGVkSW46dGhpcy5pc0ludGVyZXN0ZWRJbi5iaW5kKHRoaXMpLHRhcmdldENvbnRhaW5zU291cmNlOiEwfTt0aGlzLmRyYWdBbmREcm9wU2VydmljZS5hZGREcm9wVGFyZ2V0KHQpLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9PnRoaXMuZHJhZ0FuZERyb3BTZXJ2aWNlLnJlbW92ZURyb3BUYXJnZXQodCkpfX1jcmVhdGVTZXJpZXNHcm91cChlKXtpZih0aGlzLnNlcmllc0dyb3VwQ29tcD10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBzLkFnR3JvdXBDb21wb25lbnQoe3RpdGxlOnRoaXMuZ2V0U2VyaWVzR3JvdXBUaXRsZSgpLGVuYWJsZWQ6ITAsc3VwcHJlc3NFbmFibGVkQ2hlY2tib3g6ITAsc3VwcHJlc3NPcGVuQ2xvc2VJY29uczohMSxjc3NJZGVudGlmaWVyOiJjaGFydHMtZGF0YSJ9KSksdGhpcy5jaGFydENvbnRyb2xsZXIuaXNBY3RpdmVYWUNoYXJ0KCkpe2NvbnN0IGU9dGhpcy5zZXJpZXNHcm91cENvbXAuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHMuQWdUb2dnbGVCdXR0b24pO2Uuc2V0TGFiZWwodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoInBhaXJlZCIpKS5zZXRMYWJlbEFsaWdubWVudCgibGVmdCIpLnNldExhYmVsV2lkdGgoImZsZXgiKS5zZXRJbnB1dFdpZHRoKCJmbGV4Iikuc2V0VmFsdWUodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldFBhaXJlZE1vZGUoKSkub25WYWx1ZUNoYW5nZShlPT57dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldFBhaXJlZE1vZGUoISFlKSx0aGlzLmNoYXJ0Q29udHJvbGxlci51cGRhdGVGb3JHcmlkQ2hhbmdlKCl9KSx0aGlzLnNlcmllc0dyb3VwQ29tcC5hZGRJdGVtKGUpfWNvbnN0IHQ9dGhpcy5nZW5lcmF0ZUdldFNlcmllc0xhYmVsKCk7ZS5mb3JFYWNoKGU9Pntjb25zdCBpPXRoaXMuc2VyaWVzR3JvdXBDb21wLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBzLkFnQ2hlY2tib3gpO2kuYWRkQ3NzQ2xhc3MoImFnLWRhdGEtc2VsZWN0LWNoZWNrYm94Iik7Y29uc3Qgcj10KGUpO2kuc2V0TGFiZWwociksaS5zZXRWYWx1ZShlLnNlbGVjdGVkKSx0aGlzLmFkZENoYW5nZUxpc3RlbmVyKGksZSksdGhpcy5zZXJpZXNHcm91cENvbXAuYWRkSXRlbShpKSx0aGlzLmNvbHVtbkNvbXBzLnNldChlLmNvbElkLGkpLHRoaXMuYWRkRHJhZ0hhbmRsZShpLGUpfSk7Y29uc3QgaT10aGlzLmdldEd1aSgpLHI9dGhpcy5zZXJpZXNHcm91cENvbXAuZ2V0R3VpKCk7dGhpcy5hZGRDb21wb25lbnQoaSx0aGlzLnNlcmllc0dyb3VwQ29tcCwic2VyaWVzR3JvdXAiKTtjb25zdCBvPXtnZXRJY29uTmFtZTooKT0+cy5EcmFnQW5kRHJvcFNlcnZpY2UuSUNPTl9NT1ZFLGdldENvbnRhaW5lcjooKT0+cixvbkRyYWdnaW5nOmU9PnRoaXMub25EcmFnZ2luZyhlKSxvbkRyYWdMZWF2ZTooKT0+dGhpcy5vbkRyYWdMZWF2ZSgpLGlzSW50ZXJlc3RlZEluOnRoaXMuaXNJbnRlcmVzdGVkSW4uYmluZCh0aGlzKSx0YXJnZXRDb250YWluc1NvdXJjZTohMH07dGhpcy5kcmFnQW5kRHJvcFNlcnZpY2UuYWRkRHJvcFRhcmdldChvKSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT50aGlzLmRyYWdBbmREcm9wU2VydmljZS5yZW1vdmVEcm9wVGFyZ2V0KG8pKX1jcmVhdGVTZXJpZXNDaGFydFR5cGVHcm91cChlLHQpe2lmKCF0aGlzLmNoYXJ0Q29udHJvbGxlci5pc0NvbWJvQ2hhcnQoKSlyZXR1cm47dGhpcy5zZXJpZXNDaGFydFR5cGVHcm91cENvbXA9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5BZ0dyb3VwQ29tcG9uZW50KHt0aXRsZTp0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgic2VyaWVzQ2hhcnRUeXBlIiksZW5hYmxlZDohMCxzdXBwcmVzc0VuYWJsZWRDaGVja2JveDohMCxzdXBwcmVzc09wZW5DbG9zZUljb25zOiExLGNzc0lkZW50aWZpZXI6ImNoYXJ0cy1kYXRhIn0pKTtjb25zdCBpPXRoaXMuY2hhcnRDb250cm9sbGVyLmdldFNlcmllc0NoYXJ0VHlwZXMoKTtlLmZvckVhY2goZT0+e2lmKCFlLnNlbGVjdGVkKXJldHVybjtjb25zdCB0PWkuZmlsdGVyKHQ9PnQuY29sSWQ9PT1lLmNvbElkKVswXTtpZighdClyZXR1cm47Y29uc3Qgcj10aGlzLnNlcmllc0NoYXJ0VHlwZUdyb3VwQ29tcC5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5BZ0dyb3VwQ29tcG9uZW50KHt0aXRsZTplLmRpc3BsYXlOYW1lLGVuYWJsZWQ6ITAsc3VwcHJlc3NFbmFibGVkQ2hlY2tib3g6ITAsc3VwcHJlc3NPcGVuQ2xvc2VJY29uczohMCxjc3NJZGVudGlmaWVyOiJjaGFydHMtZm9ybWF0LXN1Yi1sZXZlbCJ9KSksbz10aGlzLnNlcmllc0NoYXJ0VHlwZUdyb3VwQ29tcC5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5BZ0NoZWNrYm94KS5zZXRMYWJlbCh0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgic2Vjb25kYXJ5QXhpcyIpKS5zZXRMYWJlbFdpZHRoKCJmbGV4Iikuc2V0RGlzYWJsZWQoWyJncm91cGVkQ29sdW1uIiwic3RhY2tlZENvbHVtbiIsInN0YWNrZWRBcmVhIl0uaW5jbHVkZXModC5jaGFydFR5cGUpKS5zZXRWYWx1ZSghIXQuc2Vjb25kYXJ5QXhpcykub25WYWx1ZUNoYW5nZSh0PT50aGlzLmNoYXJ0Q29udHJvbGxlci51cGRhdGVTZXJpZXNDaGFydFR5cGUoZS5jb2xJZCx2b2lkIDAsdCkpO3IuYWRkSXRlbShvKTtjb25zdCBuPShlLHQpPT50aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZShlLHQpLGE9W3t2YWx1ZToibGluZSIsdGV4dDpuKCJsaW5lIiwiTGluZSIpfSx7dmFsdWU6ImFyZWEiLHRleHQ6bigiYXJlYSIsIkFyZWEiKX0se3ZhbHVlOiJzdGFja2VkQXJlYSIsdGV4dDpuKCJzdGFja2VkQXJlYSIsIlN0YWNrZWRBcmVhIil9LHt2YWx1ZToiZ3JvdXBlZENvbHVtbiIsdGV4dDpuKCJncm91cGVkQ29sdW1uIiwiR3JvdXBlZCBDb2x1bW4iKX0se3ZhbHVlOiJzdGFja2VkQ29sdW1uIix0ZXh0Om4oInN0YWNrZWRDb2x1bW4iLCJTdGFja2VkIENvbHVtbiIpfV0sbD1yLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBzLkFnU2VsZWN0KTtsLnNldExhYmVsQWxpZ25tZW50KCJsZWZ0Iikuc2V0TGFiZWxXaWR0aCgiZmxleCIpLmFkZE9wdGlvbnMoYSkuc2V0VmFsdWUodC5jaGFydFR5cGUpLm9uVmFsdWVDaGFuZ2UodD0+dGhpcy5jaGFydENvbnRyb2xsZXIudXBkYXRlU2VyaWVzQ2hhcnRUeXBlKGUuY29sSWQsdCkpLHIuYWRkSXRlbShsKSx0aGlzLnNlcmllc0NoYXJ0VHlwZUdyb3VwQ29tcC5hZGRJdGVtKHIpfSksdm9pZCAwPT09dD90aGlzLmFkZENvbXBvbmVudCh0aGlzLmdldEd1aSgpLHRoaXMuc2VyaWVzQ2hhcnRUeXBlR3JvdXBDb21wLCJzZXJpZXNDaGFydFR5cGVHcm91cCIpOnRoaXMuYWRkQ29tcG9uZW50QXRJbmRleCh0aGlzLmdldEd1aSgpLHRoaXMuc2VyaWVzQ2hhcnRUeXBlR3JvdXBDb21wLCJzZXJpZXNDaGFydFR5cGVHcm91cCIsdCl9YWRkRHJhZ0hhbmRsZShlLHQpe2NvbnN0IGk9cy5fLmNyZWF0ZUljb25Ob1NwYW4oImNvbHVtbkRyYWciLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKTtpLmNsYXNzTGlzdC5hZGQoImFnLWRyYWctaGFuZGxlIiwiYWctY2hhcnQtZGF0YS1jb2x1bW4tZHJhZy1oYW5kbGUiKSxlLmdldEd1aSgpLmluc2VydEFkamFjZW50RWxlbWVudCgiYmVmb3JlZW5kIixpKTtjb25zdCByPXt0eXBlOnMuRHJhZ1NvdXJjZVR5cGUuQ2hhcnRQYW5lbCxlRWxlbWVudDppLGRyYWdJdGVtTmFtZTp0LmRpc3BsYXlOYW1lLGdldERyYWdJdGVtOigpPT4oe2NvbHVtbnM6W3QuY29sdW1uXX0pLG9uRHJhZ1N0b3BwZWQ6KCk9PnRoaXMub25EcmFnU3RvcCgpfTt0aGlzLmRyYWdBbmREcm9wU2VydmljZS5hZGREcmFnU291cmNlKHIsITApLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9PnRoaXMuZHJhZ0FuZERyb3BTZXJ2aWNlLnJlbW92ZURyYWdTb3VyY2UocikpfWdlbmVyYXRlR2V0U2VyaWVzTGFiZWwoKXtpZighdGhpcy5jaGFydENvbnRyb2xsZXIuaXNBY3RpdmVYWUNoYXJ0KCkpcmV0dXJuIGU9PnMuXy5lc2NhcGVTdHJpbmcoZS5kaXNwbGF5TmFtZSk7Y29uc3QgZT0iYnViYmxlIj09PXRoaXMuY2hhcnRUeXBlLHQ9dGhpcy5pc0luUGFpcmVkTW9kZSgpO2xldCBpPTA7Y29uc3Qgcj1uZXcgTWFwO3JldHVybiByLnNldCgwLCJYIiksci5zZXQoMSwiWSIpLHIuc2V0KDIsInNpemUiKSxvPT57Y29uc3Qgbj1zLl8uZXNjYXBlU3RyaW5nKG8uZGlzcGxheU5hbWUpO2lmKCFvLnNlbGVjdGVkKXJldHVybiBuO2xldCBhO3JldHVybiBhPXQ/ci5nZXQoaSUoZT8zOjIpKTowPT09aT8iWCI6ZSYmaSUyPT0wPyJzaXplIjoiWSIsaSsrLGAke259ICgke2F9KWB9fWdldENhdGVnb3J5R3JvdXBUaXRsZSgpe3JldHVybiB0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSh0aGlzLmNoYXJ0Q29udHJvbGxlci5pc0FjdGl2ZVhZQ2hhcnQoKT8ibGFiZWxzIjoiY2F0ZWdvcmllcyIpfWdldFNlcmllc0dyb3VwVGl0bGUoKXtyZXR1cm4gdGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUodGhpcy5jaGFydENvbnRyb2xsZXIuaXNBY3RpdmVYWUNoYXJ0KCk/Inh5VmFsdWVzIjoic2VyaWVzIil9Z2V0RGF0YVBhbmVsRGVmKCl7dmFyIGU7Y29uc3QgdD1udWxsPT09KGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjaGFydFRvb2xQYW5lbHNEZWYiKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZGF0YVBhbmVsO3JldHVybiB0fHxIfWlzSW5QYWlyZWRNb2RlKCl7cmV0dXJuIHRoaXMuY2hhcnRDb250cm9sbGVyLmlzQWN0aXZlWFlDaGFydCgpJiZ0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0U2VyaWVzT3B0aW9uKCJwYWlyZWQiLCJzY2F0dGVyIil9Y2xlYXJDb21wb25lbnRzKCl7cy5fLmNsZWFyRWxlbWVudCh0aGlzLmdldEd1aSgpKSx0aGlzLmNhdGVnb3JpZXNHcm91cENvbXA9dGhpcy5kZXN0cm95QmVhbih0aGlzLmNhdGVnb3JpZXNHcm91cENvbXApLHRoaXMuc2VyaWVzR3JvdXBDb21wPXRoaXMuZGVzdHJveUJlYW4odGhpcy5zZXJpZXNHcm91cENvbXApLHRoaXMuc2VyaWVzQ2hhcnRUeXBlR3JvdXBDb21wPXRoaXMuZGVzdHJveUJlYW4odGhpcy5zZXJpZXNDaGFydFR5cGVHcm91cENvbXApLHRoaXMuY29sdW1uQ29tcHMuY2xlYXIoKX1vbkRyYWdnaW5nKGUpe2NvbnN0IHQ9dGhpcy5jaGVja0hvdmVyZWRJdGVtKGUpO2lmKCF0KXJldHVybjt0aGlzLmxhc3REcmFnZ2VkQ29sdW1uPWUuZHJhZ0l0ZW0uY29sdW1uc1swXTtjb25zdHtjb21wOmkscG9zaXRpb246c309dCx7Y29tcDpyLHBvc2l0aW9uOm99PXRoaXMubGFzdEhvdmVyZWRJdGVtfHx7fTtpZihpPT09ciYmcz09PW8pcmV0dXJuO3RoaXMuYXV0b1Njcm9sbFNlcnZpY2UuY2hlY2soZS5ldmVudCksdGhpcy5jbGVhckhvdmVyZWRJdGVtcygpLHRoaXMubGFzdEhvdmVyZWRJdGVtPXtjb21wOmkscG9zaXRpb246c307aS5nZXRHdWkoKS5jbGFzc0xpc3QuYWRkKCJhZy1saXN0LWl0ZW0taG92ZXJlZCIsImFnLWl0ZW0taGlnaGxpZ2h0LSIrcyl9Y2hlY2tIb3ZlcmVkSXRlbShlKXtpZihzLl8ubWlzc2luZyhlLnZEaXJlY3Rpb24pKXJldHVybiBudWxsO2NvbnN0IHQ9ZS5ldmVudDtmb3IoY29uc3QgZSBvZiB0aGlzLmNvbHVtbkNvbXBzLnZhbHVlcygpKXtjb25zdCBpPWUuZ2V0R3VpKCk7aWYoIWkucXVlcnlTZWxlY3RvcigiLmFnLWNoYXJ0LWRhdGEtY29sdW1uLWRyYWctaGFuZGxlIikpY29udGludWU7Y29uc3Qgcz1pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKHQuY2xpZW50WT49cy50b3AmJnQuY2xpZW50WTw9cy5ib3R0b20pe2NvbnN0IHI9aS5jbGllbnRIZWlnaHQ7cmV0dXJue2NvbXA6ZSxwb3NpdGlvbjp0LmNsaWVudFk+cy50b3Arci8yPyJib3R0b20iOiJ0b3AifX19cmV0dXJuIG51bGx9b25EcmFnTGVhdmUoKXt0aGlzLmNsZWFySG92ZXJlZEl0ZW1zKCl9b25EcmFnU3RvcCgpe2lmKHRoaXMubGFzdEhvdmVyZWRJdGVtKXtjb25zdHtkaW1lbnNpb25Db2xzOmUsdmFsdWVDb2xzOnR9PXRoaXMuY2hhcnRDb250cm9sbGVyLmdldENvbFN0YXRlRm9yTWVudSgpLGk9Wy4uLmUsLi4udF0uZmluZChlPT5lLmNvbHVtbj09PXRoaXMubGFzdERyYWdnZWRDb2x1bW4pO2lmKGkpe2xldCBlPUFycmF5LmZyb20odGhpcy5jb2x1bW5Db21wcy52YWx1ZXMoKSkuaW5kZXhPZih0aGlzLmxhc3RIb3ZlcmVkSXRlbS5jb21wKTsiYm90dG9tIj09PXRoaXMubGFzdEhvdmVyZWRJdGVtLnBvc2l0aW9uJiZlKyssaS5vcmRlcj1lLHRoaXMuY2hhcnRDb250cm9sbGVyLnVwZGF0ZUZvclBhbmVsQ2hhbmdlKGkpfX10aGlzLmNsZWFySG92ZXJlZEl0ZW1zKCksdGhpcy5sYXN0RHJhZ2dlZENvbHVtbj12b2lkIDAsdGhpcy5hdXRvU2Nyb2xsU2VydmljZS5lbnN1cmVDbGVhcmVkKCl9Y2xlYXJIb3ZlcmVkSXRlbXMoKXt0aGlzLmNvbHVtbkNvbXBzLmZvckVhY2goZT0+e2UuZ2V0R3VpKCkuY2xhc3NMaXN0LnJlbW92ZSgiYWctbGlzdC1pdGVtLWhvdmVyZWQiLCJhZy1pdGVtLWhpZ2hsaWdodC10b3AiLCJhZy1pdGVtLWhpZ2hsaWdodC1ib3R0b20iKX0pLHRoaXMubGFzdEhvdmVyZWRJdGVtPXZvaWQgMH1pc0ludGVyZXN0ZWRJbihlKXtyZXR1cm4gZT09PXMuRHJhZ1NvdXJjZVR5cGUuQ2hhcnRQYW5lbH19Vy5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctY2hhcnQtZGF0YS13cmFwcGVyIGFnLXNjcm9sbGFibGUtY29udGFpbmVyIj48L2Rpdj4nLEIoW09iamVjdChzLkF1dG93aXJlZCkoImRyYWdBbmREcm9wU2VydmljZSIpXSxXLnByb3RvdHlwZSwiZHJhZ0FuZERyb3BTZXJ2aWNlIix2b2lkIDApLEIoW09iamVjdChzLkF1dG93aXJlZCkoImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIildLFcucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxCKFtzLlBvc3RDb25zdHJ1Y3RdLFcucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgaj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBVIGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmFjdGl2ZUNvbXBzPVtdLHRoaXMucGFyYW1zPWV9aW5pdCgpe3RoaXMuc2V0VGVtcGxhdGUoVS5URU1QTEFURSx7Zm9udEdyb3VwOntjc3NJZGVudGlmaWVyOiJjaGFydHMtZm9ybWF0LXN1Yi1sZXZlbCIsZGlyZWN0aW9uOiJ2ZXJ0aWNhbCIsc3VwcHJlc3NPcGVuQ2xvc2VJY29uczohMH19KSx0aGlzLmluaXRHcm91cCgpLHRoaXMuaW5pdEZvbnRGYW1pbHlTZWxlY3QoKSx0aGlzLmluaXRGb250V2VpZ2h0U3R5bGVTZWxlY3QoKSx0aGlzLmluaXRGb250U2l6ZVNlbGVjdCgpLHRoaXMuaW5pdEZvbnRDb2xvclBpY2tlcigpfWFkZENvbXBUb1BhbmVsKGUpe3RoaXMuZm9udEdyb3VwLmFkZEl0ZW0oZSksdGhpcy5hY3RpdmVDb21wcy5wdXNoKGUpfXNldEVuYWJsZWQoZSl7dGhpcy5mb250R3JvdXAuc2V0RW5hYmxlZChlKX1pbml0R3JvdXAoKXt0aGlzLmZvbnRHcm91cC5zZXRUaXRsZSh0aGlzLnBhcmFtcy5uYW1lfHx0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgiZm9udCIpKS5zZXRFbmFibGVkKHRoaXMucGFyYW1zLmVuYWJsZWQpLmhpZGVFbmFibGVkQ2hlY2tib3goISF0aGlzLnBhcmFtcy5zdXBwcmVzc0VuYWJsZWRDaGVja2JveCkuaGlkZU9wZW5DbG9zZUljb25zKCEwKS5vbkVuYWJsZUNoYW5nZShlPT57dGhpcy5wYXJhbXMuc2V0RW5hYmxlZCYmdGhpcy5wYXJhbXMuc2V0RW5hYmxlZChlKX0pfWluaXRGb250RmFtaWx5U2VsZWN0KCl7Y29uc3QgZT1bIkFyaWFsLCBzYW5zLXNlcmlmIiwiQXJpYSBCbGFjaywgc2Fucy1zZXJpZiIsIkJvb2sgQW50aXF1YSwgIHNlcmlmIiwiQ2hhcmNvYWwsIHNhbnMtc2VyaWYiLCJDb21pYyBTYW5zIE1TLCBjdXJzaXZlIiwiQ291cmllciwgbW9ub3NwYWNlIiwiQ291cmllciBOZXcsIG1vbm9zcGFjZSIsIkdhZGdldCwgc2Fucy1zZXJpZiIsIkdlbmV2YSwgc2Fucy1zZXJpZiIsIkhlbHZldGljYSwgc2Fucy1zZXJpZiIsIkltcGFjdCwgc2Fucy1zZXJpZiIsIkx1Y2lkYSBDb25zb2xlLCBtb25vc3BhY2UiLCJMdWNpZGEgR3JhbmRlLCBzYW5zLXNlcmlmIiwiTHVjaWRhIFNhbnMgVW5pY29kZSwgIHNhbnMtc2VyaWYiLCJNb25hY28sIG1vbm9zcGFjZSIsIlBhbGF0aW5vIExpbm90eXBlLCBzZXJpZiIsIlBhbGF0aW5vLCBzZXJpZiIsIlRpbWVzIE5ldyBSb21hbiwgc2VyaWYiLCJUaW1lcywgc2VyaWYiLCJWZXJkYW5hLCBzYW5zLXNlcmlmIl0se2ZhbWlseTp0fT10aGlzLnBhcmFtcy5pbml0aWFsRm9udDtsZXQgaT1lWzBdO2lmKHQpe2NvbnN0IHI9ZS5tYXAoZT0+ZS50b0xvd2VyQ2FzZSgpKS5pbmRleE9mKHQudG9Mb3dlckNhc2UoKSk7aWYocj49MClpPWVbcl07ZWxzZXtjb25zdCByPXMuXy5jYXBpdGFsaXNlKHQpO2UucHVzaChyKSxpPXJ9fWNvbnN0IHI9ZS5zb3J0KCkubWFwKGU9Pih7dmFsdWU6ZSx0ZXh0OmV9KSk7dGhpcy5mYW1pbHlTZWxlY3QuYWRkT3B0aW9ucyhyKS5zZXRJbnB1dFdpZHRoKCJmbGV4Iikuc2V0VmFsdWUoIiIraSkub25WYWx1ZUNoYW5nZShlPT50aGlzLnBhcmFtcy5zZXRGb250KHtmYW1pbHk6ZX0pKX1pbml0Rm9udFNpemVTZWxlY3QoKXtjb25zdCBlPVs4LDEwLDEyLDE0LDE2LDE4LDIwLDIyLDI0LDI2LDI4LDMwLDMyLDM0LDM2XSx7c2l6ZTp0fT10aGlzLnBhcmFtcy5pbml0aWFsRm9udDtzLl8uaW5jbHVkZXMoZSx0KXx8ZS5wdXNoKHQpO2NvbnN0IGk9ZS5zb3J0KChlLHQpPT5lLXQpLm1hcChlPT4oe3ZhbHVlOiIiK2UsdGV4dDoiIitlfSkpO3RoaXMuc2l6ZVNlbGVjdC5hZGRPcHRpb25zKGkpLnNldElucHV0V2lkdGgoImZsZXgiKS5zZXRWYWx1ZSgiIit0KS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMucGFyYW1zLnNldEZvbnQoe3NpemU6cGFyc2VJbnQoZSwxMCl9KSksdGhpcy5zaXplU2VsZWN0LnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJzaXplIikpfWluaXRGb250V2VpZ2h0U3R5bGVTZWxlY3QoKXtjb25zdHt3ZWlnaHQ6ZT0ibm9ybWFsIixzdHlsZTp0PSJub3JtYWwifT10aGlzLnBhcmFtcy5pbml0aWFsRm9udCxpPVt7bmFtZToibm9ybWFsIix3ZWlnaHQ6Im5vcm1hbCIsc3R5bGU6Im5vcm1hbCJ9LHtuYW1lOiJib2xkIix3ZWlnaHQ6ImJvbGQiLHN0eWxlOiJub3JtYWwifSx7bmFtZToiaXRhbGljIix3ZWlnaHQ6Im5vcm1hbCIsc3R5bGU6Iml0YWxpYyJ9LHtuYW1lOiJib2xkSXRhbGljIix3ZWlnaHQ6ImJvbGQiLHN0eWxlOiJpdGFsaWMifV07bGV0IHM9aS5maW5kKGk9Pmkud2VpZ2h0PT09ZSYmaS5zdHlsZT09PXQpO3N8fChzPXtuYW1lOiJwcmVkZWZpbmVkIix3ZWlnaHQ6ZSxzdHlsZTp0fSxpLnVuc2hpZnQocykpO2NvbnN0IHI9aS5tYXAoZT0+KHt2YWx1ZTplLm5hbWUsdGV4dDp0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZShlLm5hbWUpfSkpO3RoaXMud2VpZ2h0U3R5bGVTZWxlY3QuYWRkT3B0aW9ucyhyKS5zZXRJbnB1dFdpZHRoKCJmbGV4Iikuc2V0VmFsdWUocy5uYW1lKS5vblZhbHVlQ2hhbmdlKGU9Pntjb25zdCB0PWkuZmluZCh0PT50Lm5hbWU9PT1lKTt0aGlzLnBhcmFtcy5zZXRGb250KHt3ZWlnaHQ6dC53ZWlnaHQsc3R5bGU6dC5zdHlsZX0pfSl9aW5pdEZvbnRDb2xvclBpY2tlcigpe3RoaXMuY29sb3JQaWNrZXIuc2V0TGFiZWwodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoImNvbG9yIikpLnNldElucHV0V2lkdGgoImZsZXgiKS5zZXRWYWx1ZSgiIit0aGlzLnBhcmFtcy5pbml0aWFsRm9udC5jb2xvcikub25WYWx1ZUNoYW5nZShlPT50aGlzLnBhcmFtcy5zZXRGb250KHtjb2xvcjplfSkpfWFkZEl0ZW1Ub1BhbmVsKGUpe3RoaXMuZm9udEdyb3VwLmFkZEl0ZW0oZSksdGhpcy5hY3RpdmVDb21wcy5wdXNoKGUpfWRlc3Ryb3lBY3RpdmVDb21wcygpe3RoaXMuYWN0aXZlQ29tcHMuZm9yRWFjaChlPT57cy5fLnJlbW92ZUZyb21QYXJlbnQoZS5nZXRHdWkoKSksdGhpcy5kZXN0cm95QmVhbihlKX0pfWRlc3Ryb3koKXt0aGlzLmRlc3Ryb3lBY3RpdmVDb21wcygpLHN1cGVyLmRlc3Ryb3koKX19VS5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctZm9udC1wYW5lbCI+XG4gICAgICAgICAgICA8YWctZ3JvdXAtY29tcG9uZW50IHJlZj0iZm9udEdyb3VwIj5cbiAgICAgICAgICAgICAgICA8YWctc2VsZWN0IHJlZj0iZmFtaWx5U2VsZWN0Ij48L2FnLXNlbGVjdD5cbiAgICAgICAgICAgICAgICA8YWctc2VsZWN0IHJlZj0id2VpZ2h0U3R5bGVTZWxlY3QiPjwvYWctc2VsZWN0PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWNoYXJ0cy1mb250LXNpemUtY29sb3IiPlxuICAgICAgICAgICAgICAgICAgICA8YWctc2VsZWN0IHJlZj0ic2l6ZVNlbGVjdCI+PC9hZy1zZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDxhZy1jb2xvci1waWNrZXIgcmVmPSJjb2xvclBpY2tlciI+PC9hZy1jb2xvci1waWNrZXI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2FnLWdyb3VwLWNvbXBvbmVudD5cbiAgICAgICAgPC9kaXY+JyxqKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImZvbnRHcm91cCIpXSxVLnByb3RvdHlwZSwiZm9udEdyb3VwIix2b2lkIDApLGooW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZmFtaWx5U2VsZWN0IildLFUucHJvdG90eXBlLCJmYW1pbHlTZWxlY3QiLHZvaWQgMCksaihbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJ3ZWlnaHRTdHlsZVNlbGVjdCIpXSxVLnByb3RvdHlwZSwid2VpZ2h0U3R5bGVTZWxlY3QiLHZvaWQgMCksaihbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJzaXplU2VsZWN0IildLFUucHJvdG90eXBlLCJzaXplU2VsZWN0Iix2b2lkIDApLGooW09iamVjdChzLlJlZlNlbGVjdG9yKSgiY29sb3JQaWNrZXIiKV0sVS5wcm90b3R5cGUsImNvbG9yUGlja2VyIix2b2lkIDApLGooW09iamVjdChzLkF1dG93aXJlZCkoImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIildLFUucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxqKFtzLlBvc3RDb25zdHJ1Y3RdLFUucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgej1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBLIGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3Ioe2NoYXJ0T3B0aW9uc1NlcnZpY2U6ZSxpc0V4cGFuZGVkT25Jbml0OnQ9ITF9KXtzdXBlcigpLHRoaXMuYWN0aXZlUGFuZWxzPVtdLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZT1lLHRoaXMuaXNFeHBhbmRlZE9uSW5pdD10fWluaXQoKXt0aGlzLnNldFRlbXBsYXRlKEsuVEVNUExBVEUse2xlZ2VuZEdyb3VwOntjc3NJZGVudGlmaWVyOiJjaGFydHMtZm9ybWF0LXRvcC1sZXZlbCIsZGlyZWN0aW9uOiJ2ZXJ0aWNhbCJ9fSksdGhpcy5pbml0TGVnZW5kR3JvdXAoKSx0aGlzLmluaXRMZWdlbmRQb3NpdGlvbigpLHRoaXMuaW5pdExlZ2VuZFBhZGRpbmcoKSx0aGlzLmluaXRMZWdlbmRJdGVtcygpLHRoaXMuaW5pdExhYmVsUGFuZWwoKX1pbml0TGVnZW5kR3JvdXAoKXt0aGlzLmxlZ2VuZEdyb3VwLnNldFRpdGxlKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJsZWdlbmQiKSkuaGlkZUVuYWJsZWRDaGVja2JveCghMSkuc2V0RW5hYmxlZCh0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0Q2hhcnRPcHRpb24oImxlZ2VuZC5lbmFibGVkIil8fCExKS50b2dnbGVHcm91cEV4cGFuZCh0aGlzLmlzRXhwYW5kZWRPbkluaXQpLm9uRW5hYmxlQ2hhbmdlKGU9Pnt0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0Q2hhcnRPcHRpb24oImxlZ2VuZC5lbmFibGVkIixlKSx0aGlzLmxlZ2VuZEdyb3VwLnRvZ2dsZUdyb3VwRXhwYW5kKCEwKX0pfWluaXRMZWdlbmRQb3NpdGlvbigpe3RoaXMubGVnZW5kUG9zaXRpb25TZWxlY3Quc2V0TGFiZWwodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoInBvc2l0aW9uIikpLnNldExhYmVsV2lkdGgoImZsZXgiKS5zZXRJbnB1dFdpZHRoKCJmbGV4IikuYWRkT3B0aW9ucyhbInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCJdLm1hcChlPT4oe3ZhbHVlOmUsdGV4dDp0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZShlKX0pKSkuc2V0VmFsdWUodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldENoYXJ0T3B0aW9uKCJsZWdlbmQucG9zaXRpb24iKSkub25WYWx1ZUNoYW5nZShlPT50aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0Q2hhcnRPcHRpb24oImxlZ2VuZC5wb3NpdGlvbiIsZSkpfWluaXRMZWdlbmRQYWRkaW5nKCl7Y29uc3QgZT10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0Q2hhcnRPcHRpb24oImxlZ2VuZC5zcGFjaW5nIik7dGhpcy5sZWdlbmRQYWRkaW5nU2xpZGVyLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJzcGFjaW5nIikpLnNldE1heFZhbHVlKEdlKGUsMjAwKSkuc2V0VmFsdWUoIiIrZSkuc2V0VGV4dEZpZWxkV2lkdGgoNDUpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldENoYXJ0T3B0aW9uKCJsZWdlbmQuc3BhY2luZyIsZSkpfWluaXRMZWdlbmRJdGVtcygpe2NvbnN0IGU9KGUsdCxpLHMpPT57dmFyIHI7Y29uc3Qgbz1udWxsIT09KHI9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldENoYXJ0T3B0aW9uKCJsZWdlbmQuIitlKSkmJnZvaWQgMCE9PXI/cjowO2kuc2V0TGFiZWwodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUodCkpLnNldE1heFZhbHVlKEdlKG8scykpLnNldFZhbHVlKCIiK28pLnNldFRleHRGaWVsZFdpZHRoKDQ1KS5vblZhbHVlQ2hhbmdlKHQ9Pnt0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0Q2hhcnRPcHRpb24oImxlZ2VuZC4iK2UsdCl9KX07ZSgiaXRlbS5tYXJrZXIuc2l6ZSIsIm1hcmtlclNpemUiLHRoaXMubWFya2VyU2l6ZVNsaWRlciw0MCksZSgiaXRlbS5tYXJrZXIuc3Ryb2tlV2lkdGgiLCJtYXJrZXJTdHJva2UiLHRoaXMubWFya2VyU3Ryb2tlU2xpZGVyLDEwKSxlKCJpdGVtLm1hcmtlci5wYWRkaW5nIiwiaXRlbVNwYWNpbmciLHRoaXMubWFya2VyUGFkZGluZ1NsaWRlciwyMCksZSgiaXRlbS5wYWRkaW5nWCIsImxheW91dEhvcml6b250YWxTcGFjaW5nIix0aGlzLml0ZW1QYWRkaW5nWFNsaWRlciw1MCksZSgiaXRlbS5wYWRkaW5nWSIsImxheW91dFZlcnRpY2FsU3BhY2luZyIsdGhpcy5pdGVtUGFkZGluZ1lTbGlkZXIsNTApfWluaXRMYWJlbFBhbmVsKCl7Y29uc3QgZT10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UsdD17ZW5hYmxlZDohMCxzdXBwcmVzc0VuYWJsZWRDaGVja2JveDohMCxpbml0aWFsRm9udDp7ZmFtaWx5OmUuZ2V0Q2hhcnRPcHRpb24oImxlZ2VuZC5pdGVtLmxhYmVsLmZvbnRGYW1pbHkiKSxzdHlsZTplLmdldENoYXJ0T3B0aW9uKCJsZWdlbmQuaXRlbS5sYWJlbC5mb250U3R5bGUiKSx3ZWlnaHQ6ZS5nZXRDaGFydE9wdGlvbigibGVnZW5kLml0ZW0ubGFiZWwuZm9udFdlaWdodCIpLHNpemU6ZS5nZXRDaGFydE9wdGlvbigibGVnZW5kLml0ZW0ubGFiZWwuZm9udFNpemUiKSxjb2xvcjplLmdldENoYXJ0T3B0aW9uKCJsZWdlbmQuaXRlbS5sYWJlbC5jb2xvciIpfSxzZXRGb250OmU9Pntjb25zdCB0PXRoaXMuY2hhcnRPcHRpb25zU2VydmljZTtlLmZhbWlseSYmdC5zZXRDaGFydE9wdGlvbigibGVnZW5kLml0ZW0ubGFiZWwuZm9udEZhbWlseSIsZS5mYW1pbHkpLGUud2VpZ2h0JiZ0LnNldENoYXJ0T3B0aW9uKCJsZWdlbmQuaXRlbS5sYWJlbC5mb250V2VpZ2h0IixlLndlaWdodCksZS5zdHlsZSYmdC5zZXRDaGFydE9wdGlvbigibGVnZW5kLml0ZW0ubGFiZWwuZm9udFN0eWxlIixlLnN0eWxlKSxlLnNpemUmJnQuc2V0Q2hhcnRPcHRpb24oImxlZ2VuZC5pdGVtLmxhYmVsLmZvbnRTaXplIixlLnNpemUpLGUuY29sb3ImJnQuc2V0Q2hhcnRPcHRpb24oImxlZ2VuZC5pdGVtLmxhYmVsLmNvbG9yIixlLmNvbG9yKX19LGk9dGhpcy5jcmVhdGVCZWFuKG5ldyBVKHQpKTt0aGlzLmxlZ2VuZEdyb3VwLmFkZEl0ZW0oaSksdGhpcy5hY3RpdmVQYW5lbHMucHVzaChpKX1kZXN0cm95QWN0aXZlUGFuZWxzKCl7dGhpcy5hY3RpdmVQYW5lbHMuZm9yRWFjaChlPT57cy5fLnJlbW92ZUZyb21QYXJlbnQoZS5nZXRHdWkoKSksdGhpcy5kZXN0cm95QmVhbihlKX0pfWRlc3Ryb3koKXt0aGlzLmRlc3Ryb3lBY3RpdmVQYW5lbHMoKSxzdXBlci5kZXN0cm95KCl9fUsuVEVNUExBVEU9JzxkaXY+XG4gICAgICAgICAgICA8YWctZ3JvdXAtY29tcG9uZW50IHJlZj0ibGVnZW5kR3JvdXAiPlxuICAgICAgICAgICAgICAgIDxhZy1zZWxlY3QgcmVmPSJsZWdlbmRQb3NpdGlvblNlbGVjdCI+PC9hZy1zZWxlY3Q+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9ImxlZ2VuZFBhZGRpbmdTbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgICAgIDxhZy1zbGlkZXIgcmVmPSJtYXJrZXJTaXplU2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0ibWFya2VyU3Ryb2tlU2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0ibWFya2VyUGFkZGluZ1NsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9Iml0ZW1QYWRkaW5nWFNsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9Iml0ZW1QYWRkaW5nWVNsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICA8L2FnLWdyb3VwLWNvbXBvbmVudD5cbiAgICAgICAgPC9kaXY+Jyx6KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImxlZ2VuZEdyb3VwIildLEsucHJvdG90eXBlLCJsZWdlbmRHcm91cCIsdm9pZCAwKSx6KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImxlZ2VuZFBvc2l0aW9uU2VsZWN0IildLEsucHJvdG90eXBlLCJsZWdlbmRQb3NpdGlvblNlbGVjdCIsdm9pZCAwKSx6KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImxlZ2VuZFBhZGRpbmdTbGlkZXIiKV0sSy5wcm90b3R5cGUsImxlZ2VuZFBhZGRpbmdTbGlkZXIiLHZvaWQgMCkseihbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJtYXJrZXJTaXplU2xpZGVyIildLEsucHJvdG90eXBlLCJtYXJrZXJTaXplU2xpZGVyIix2b2lkIDApLHooW09iamVjdChzLlJlZlNlbGVjdG9yKSgibWFya2VyU3Ryb2tlU2xpZGVyIildLEsucHJvdG90eXBlLCJtYXJrZXJTdHJva2VTbGlkZXIiLHZvaWQgMCkseihbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJtYXJrZXJQYWRkaW5nU2xpZGVyIildLEsucHJvdG90eXBlLCJtYXJrZXJQYWRkaW5nU2xpZGVyIix2b2lkIDApLHooW09iamVjdChzLlJlZlNlbGVjdG9yKSgiaXRlbVBhZGRpbmdYU2xpZGVyIildLEsucHJvdG90eXBlLCJpdGVtUGFkZGluZ1hTbGlkZXIiLHZvaWQgMCkseihbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJpdGVtUGFkZGluZ1lTbGlkZXIiKV0sSy5wcm90b3R5cGUsIml0ZW1QYWRkaW5nWVNsaWRlciIsdm9pZCAwKSx6KFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIpXSxLLnByb3RvdHlwZSwiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiLHZvaWQgMCkseihbcy5Qb3N0Q29uc3RydWN0XSxLLnByb3RvdHlwZSwiaW5pdCIsbnVsbCk7dmFyIFk9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgJCBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlPWV9aW5pdCgpe3RoaXMuc2V0VGVtcGxhdGUoJC5URU1QTEFURSx7YXhpc1RpY2tzR3JvdXA6e2Nzc0lkZW50aWZpZXI6ImNoYXJ0cy1mb3JtYXQtc3ViLWxldmVsIixkaXJlY3Rpb246InZlcnRpY2FsIixzdXBwcmVzc09wZW5DbG9zZUljb25zOiEwfX0pLHRoaXMuaW5pdEF4aXNUaWNrcygpfWluaXRBeGlzVGlja3MoKXt0aGlzLmF4aXNUaWNrc0dyb3VwLnNldFRpdGxlKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJ0aWNrcyIpKS5zZXRFbmFibGVkKHRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRBeGlzUHJvcGVydHkoInRpY2suZW5hYmxlZCIpKS5oaWRlT3BlbkNsb3NlSWNvbnMoITApLmhpZGVFbmFibGVkQ2hlY2tib3goITEpLm9uRW5hYmxlQ2hhbmdlKGU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRBeGlzUHJvcGVydHkoInRpY2suZW5hYmxlZCIsZSkpLHRoaXMuYXhpc1RpY2tzQ29sb3JQaWNrZXIuc2V0TGFiZWwodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoImNvbG9yIikpLnNldExhYmVsV2lkdGgoImZsZXgiKS5zZXRJbnB1dFdpZHRoKCJmbGV4Iikuc2V0VmFsdWUodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eSgidGljay5jb2xvciIpKS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRBeGlzUHJvcGVydHkoInRpY2suY29sb3IiLGUpKTtjb25zdCBlPShlLHQsaSxzKT0+e2NvbnN0IHI9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eShlKTt0LnNldExhYmVsKGkpLnNldE1heFZhbHVlKEdlKHIscykpLnNldFZhbHVlKCIiK3IpLnNldFRleHRGaWVsZFdpZHRoKDQ1KS5vblZhbHVlQ2hhbmdlKHQ9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRBeGlzUHJvcGVydHkoZSx0KSl9O2UoInRpY2sud2lkdGgiLHRoaXMuYXhpc1RpY2tzV2lkdGhTbGlkZXIsdGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoIndpZHRoIiksMTApLGUoInRpY2suc2l6ZSIsdGhpcy5heGlzVGlja3NTaXplU2xpZGVyLHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJsZW5ndGgiKSwzMCl9fSQuVEVNUExBVEU9JzxkaXY+XG4gICAgICAgICAgICA8YWctZ3JvdXAtY29tcG9uZW50IHJlZj0iYXhpc1RpY2tzR3JvdXAiPlxuICAgICAgICAgICAgICAgIDxhZy1jb2xvci1waWNrZXIgcmVmPSJheGlzVGlja3NDb2xvclBpY2tlciI+PC9hZy1jb2xvci1waWNrZXI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9ImF4aXNUaWNrc1dpZHRoU2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0iYXhpc1RpY2tzU2l6ZVNsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICA8L2FnLWdyb3VwLWNvbXBvbmVudD5cbiAgICAgICAgPC9kaXY+JyxZKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImF4aXNUaWNrc0dyb3VwIildLCQucHJvdG90eXBlLCJheGlzVGlja3NHcm91cCIsdm9pZCAwKSxZKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImF4aXNUaWNrc0NvbG9yUGlja2VyIildLCQucHJvdG90eXBlLCJheGlzVGlja3NDb2xvclBpY2tlciIsdm9pZCAwKSxZKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImF4aXNUaWNrc1dpZHRoU2xpZGVyIildLCQucHJvdG90eXBlLCJheGlzVGlja3NXaWR0aFNsaWRlciIsdm9pZCAwKSxZKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImF4aXNUaWNrc1NpemVTbGlkZXIiKV0sJC5wcm90b3R5cGUsImF4aXNUaWNrc1NpemVTbGlkZXIiLHZvaWQgMCksWShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sJC5wcm90b3R5cGUsImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIix2b2lkIDApLFkoW3MuUG9zdENvbnN0cnVjdF0sJC5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBYPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIHEgZXh0ZW5kcyBzLkFnQWJzdHJhY3RMYWJlbHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlLHEuVEVNUExBVEUpLHRoaXMucmFkaXVzPTAsdGhpcy5vZmZzZXRYPTAsdGhpcy5vZmZzZXRZPTB9cG9zdENvbnN0cnVjdCgpe3N1cGVyLnBvc3RDb25zdHJ1Y3QoKSx0aGlzLmRyYWdMaXN0ZW5lcj17ZUVsZW1lbnQ6dGhpcy5lUGFyZW50Q2lyY2xlLGRyYWdTdGFydFBpeGVsczowLG9uRHJhZ1N0YXJ0OmU9Pnt0aGlzLnBhcmVudENpcmNsZVJlY3Q9dGhpcy5lUGFyZW50Q2lyY2xlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfSxvbkRyYWdnaW5nOmU9PnRoaXMuY2FsY3VsYXRlQW5nbGVEcmFnKGUpLG9uRHJhZ1N0b3A6KCk9Pnt9fSx0aGlzLmRyYWdTZXJ2aWNlLmFkZERyYWdTb3VyY2UodGhpcy5kcmFnTGlzdGVuZXIpLHRoaXMuZUFuZ2xlVmFsdWUuc2V0TGFiZWwoIiIpLnNldExhYmVsV2lkdGgoNSkuc2V0SW5wdXRXaWR0aCg0NSkuc2V0TWluKDApLnNldE1heCgzNjApLnNldFZhbHVlKCIiK3RoaXMuZGVncmVlcykub25WYWx1ZUNoYW5nZShlPT57bnVsbCE9ZSYmIiIhPT1lfHwoZT0iMCIpLGU9dGhpcy5lQW5nbGVWYWx1ZS5ub3JtYWxpemVWYWx1ZShlKTtsZXQgdD1wYXJzZUZsb2F0KGUpO3Q+MTgwJiYodC09MzYwKSx0aGlzLnNldFZhbHVlKHQpfSksdGhpcy51cGRhdGVOdW1iZXJJbnB1dCgpLHMuXy5leGlzdHModGhpcy5nZXRWYWx1ZSgpKSYmdGhpcy5lQW5nbGVWYWx1ZS5zZXRWYWx1ZSh0aGlzLm5vcm1hbGl6ZU5lZ2F0aXZlVmFsdWUodGhpcy5nZXRWYWx1ZSgpKS50b1N0cmluZygpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLHMuRXZlbnRzLkVWRU5UX0ZJRUxEX1ZBTFVFX0NIQU5HRUQsKCk9Pntjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCk7dGhpcy5lQW5nbGVWYWx1ZS5nZXRJbnB1dEVsZW1lbnQoKS5jb250YWlucyhlLmFjdGl2ZUVsZW1lbnQpfHx0aGlzLnVwZGF0ZU51bWJlcklucHV0KCl9KX11cGRhdGVOdW1iZXJJbnB1dCgpe2NvbnN0IGU9dGhpcy5ub3JtYWxpemVOZWdhdGl2ZVZhbHVlKHRoaXMuZ2V0VmFsdWUoKSk7dGhpcy5lQW5nbGVWYWx1ZS5zZXRWYWx1ZShlLnRvU3RyaW5nKCkpfXBvc2l0aW9uQ2hpbGRDaXJjbGUoZSl7Y29uc3QgdD10aGlzLnBhcmVudENpcmNsZVJlY3R8fHt3aWR0aDoyNCxoZWlnaHQ6MjR9LGk9dGhpcy5lQ2hpbGRDaXJjbGUscz10LndpZHRoLzIscj10LmhlaWdodC8yO2kuc3R5bGUubGVmdD1zKzgqTWF0aC5jb3MoZSkrInB4IixpLnN0eWxlLnRvcD1yKzgqTWF0aC5zaW4oZSkrInB4In1jYWxjdWxhdGVQb2xhcigpe2NvbnN0IGU9dGhpcy5vZmZzZXRYLHQ9dGhpcy5vZmZzZXRZLGk9TWF0aC5hdGFuMih0LGUpO3RoaXMuZGVncmVlcz10aGlzLnRvRGVncmVlcyhpKSx0aGlzLnJhZGl1cz1NYXRoLnNxcnQoZSplK3QqdCksdGhpcy5wb3NpdGlvbkNoaWxkQ2lyY2xlKGkpfWNhbGN1bGF0ZUNhcnRlc2lhbigpe2NvbnN0IGU9dGhpcy50b1JhZGlhbnModGhpcy5nZXRWYWx1ZSgpKSx0PXRoaXMuZ2V0UmFkaXVzKCk7dGhpcy5zZXRPZmZzZXRYKE1hdGguY29zKGUpKnQpLnNldE9mZnNldFkoTWF0aC5zaW4oZSkqdCl9c2V0T2Zmc2V0WChlKXtyZXR1cm4gdGhpcy5vZmZzZXRYIT09ZSYmKHRoaXMub2Zmc2V0WD1lLHRoaXMuY2FsY3VsYXRlUG9sYXIoKSksdGhpc31zZXRPZmZzZXRZKGUpe3JldHVybiB0aGlzLm9mZnNldFkhPT1lJiYodGhpcy5vZmZzZXRZPWUsdGhpcy5jYWxjdWxhdGVQb2xhcigpKSx0aGlzfWNhbGN1bGF0ZUFuZ2xlRHJhZyhlKXtjb25zdCB0PXRoaXMucGFyZW50Q2lyY2xlUmVjdCxpPXQud2lkdGgvMixzPXQuaGVpZ2h0LzIscj1lLmNsaWVudFgtdC5sZWZ0LWksbz1lLmNsaWVudFktdC50b3AtcyxuPU1hdGguYXRhbjIobyxyKTt0aGlzLnNldFZhbHVlKG4sITApfXRvRGVncmVlcyhlKXtyZXR1cm4gZS9NYXRoLlBJKjE4MH10b1JhZGlhbnMoZSl7cmV0dXJuIGUvMTgwKk1hdGguUEl9bm9ybWFsaXplTmVnYXRpdmVWYWx1ZShlKXtyZXR1cm4gZTwwPzM2MCtlOmV9bm9ybWFsaXplQW5nbGUxODAoZSl7cmV0dXJuKGUlPTIqTWF0aC5QSSk8LU1hdGguUEk/ZSs9MipNYXRoLlBJOmU+PU1hdGguUEkmJihlLT0yKk1hdGguUEkpLGV9Z2V0UmFkaXVzKCl7cmV0dXJuIHRoaXMucmFkaXVzfXNldFJhZGl1cyhlKXtyZXR1cm4gdGhpcy5yYWRpdXM9PT1lfHwodGhpcy5yYWRpdXM9ZSx0aGlzLmNhbGN1bGF0ZUNhcnRlc2lhbigpKSx0aGlzfW9uVmFsdWVDaGFuZ2UoZSl7cmV0dXJuIHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMscy5FdmVudHMuRVZFTlRfRklFTERfVkFMVUVfQ0hBTkdFRCwoKT0+e2UodGhpcy5kZWdyZWVzKX0pLHRoaXN9Z2V0VmFsdWUoZSl7cmV0dXJuIGU/dGhpcy50b1JhZGlhbnModGhpcy5kZWdyZWVzKTp0aGlzLmRlZ3JlZXN9c2V0VmFsdWUoZSx0KXtsZXQgaTtyZXR1cm4gaT10P2U6dGhpcy5ub3JtYWxpemVBbmdsZTE4MCh0aGlzLnRvUmFkaWFucyhlKSksZT10aGlzLnRvRGVncmVlcyhpKSx0aGlzLmRlZ3JlZXMhPT1lJiYodGhpcy5kZWdyZWVzPU1hdGguZmxvb3IoZSksdGhpcy5jYWxjdWxhdGVDYXJ0ZXNpYW4oKSx0aGlzLnBvc2l0aW9uQ2hpbGRDaXJjbGUoaSksdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOnMuRXZlbnRzLkVWRU5UX0ZJRUxEX1ZBTFVFX0NIQU5HRUR9KSksdGhpc31zZXRXaWR0aChlKXtyZXR1cm4gcy5fLnNldEZpeGVkV2lkdGgodGhpcy5nZXRHdWkoKSxlKSx0aGlzfXNldERpc2FibGVkKGUpe3JldHVybiBzdXBlci5zZXREaXNhYmxlZChlKSx0aGlzLmVBbmdsZVZhbHVlLnNldERpc2FibGVkKGUpLHRoaXN9ZGVzdHJveSgpe3RoaXMuZHJhZ1NlcnZpY2UucmVtb3ZlRHJhZ1NvdXJjZSh0aGlzLmRyYWdMaXN0ZW5lciksc3VwZXIuZGVzdHJveSgpfX1xLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1hbmdsZS1zZWxlY3QiPlxuICAgICAgICAgICAgPGRpdiByZWY9ImVMYWJlbCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy13cmFwcGVyIGFnLWFuZ2xlLXNlbGVjdC13cmFwcGVyIj5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj0iZUFuZ2xlU2VsZWN0RmllbGQiIGNsYXNzPSJhZy1hbmdsZS1zZWxlY3QtZmllbGQiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj0iZVBhcmVudENpcmNsZSIgY2xhc3M9ImFnLWFuZ2xlLXNlbGVjdC1wYXJlbnQtY2lyY2xlIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlQ2hpbGRDaXJjbGUiIGNsYXNzPSJhZy1hbmdsZS1zZWxlY3QtY2hpbGQtY2lyY2xlIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGFnLWlucHV0LW51bWJlci1maWVsZCByZWY9ImVBbmdsZVZhbHVlIj48L2FnLWlucHV0LW51bWJlci1maWVsZD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj4nLFgoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUxhYmVsIildLHEucHJvdG90eXBlLCJlTGFiZWwiLHZvaWQgMCksWChbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlUGFyZW50Q2lyY2xlIildLHEucHJvdG90eXBlLCJlUGFyZW50Q2lyY2xlIix2b2lkIDApLFgoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUNoaWxkQ2lyY2xlIildLHEucHJvdG90eXBlLCJlQ2hpbGRDaXJjbGUiLHZvaWQgMCksWChbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlQW5nbGVWYWx1ZSIpXSxxLnByb3RvdHlwZSwiZUFuZ2xlVmFsdWUiLHZvaWQgMCksWChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZHJhZ1NlcnZpY2UiKV0scS5wcm90b3R5cGUsImRyYWdTZXJ2aWNlIix2b2lkIDApO3ZhciBaPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIFEgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3Rvcih7Y2hhcnRDb250cm9sbGVyOmUsY2hhcnRPcHRpb25zU2VydmljZTp0LGlzRXhwYW5kZWRPbkluaXQ6aT0hMX0pe3N1cGVyKCksdGhpcy5hY3RpdmVQYW5lbHM9W10sdGhpcy5heGlzTGFiZWxVcGRhdGVGdW5jcz1bXSx0aGlzLnByZXZYUm90YXRpb249MCx0aGlzLnByZXZZUm90YXRpb249MCx0aGlzLmNoYXJ0Q29udHJvbGxlcj1lLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZT10LHRoaXMuaXNFeHBhbmRlZE9uSW5pdD1pfWluaXQoKXt0aGlzLnNldFRlbXBsYXRlKFEuVEVNUExBVEUse2F4aXNHcm91cDp7Y3NzSWRlbnRpZmllcjoiY2hhcnRzLWZvcm1hdC10b3AtbGV2ZWwiLGRpcmVjdGlvbjoidmVydGljYWwifX0pLHRoaXMuaW5pdEF4aXMoKSx0aGlzLmluaXRBeGlzVGlja3MoKSx0aGlzLmluaXRBeGlzTGFiZWxzKCk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jaGFydENvbnRyb2xsZXIsVi5FVkVOVF9DSEFSVF9VUERBVEVELCgpPT50aGlzLmF4aXNMYWJlbFVwZGF0ZUZ1bmNzLmZvckVhY2goZT0+ZSgpKSl9aW5pdEF4aXMoKXt0aGlzLmF4aXNHcm91cC5zZXRUaXRsZSh0aGlzLnRyYW5zbGF0ZSgiYXhpcyIpKS50b2dnbGVHcm91cEV4cGFuZCh0aGlzLmlzRXhwYW5kZWRPbkluaXQpLmhpZGVFbmFibGVkQ2hlY2tib3goITApLHRoaXMuYXhpc0NvbG9ySW5wdXQuc2V0TGFiZWwodGhpcy50cmFuc2xhdGUoImNvbG9yIikpLnNldExhYmVsV2lkdGgoImZsZXgiKS5zZXRJbnB1dFdpZHRoKCJmbGV4Iikuc2V0VmFsdWUodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eSgibGluZS5jb2xvciIpKS5vblZhbHVlQ2hhbmdlKGU9Pntjb25zdCB0PXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRBeGlzUHJvcGVydHkoImxpbmUud2lkdGgiKT4wO3RoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRBeGlzUHJvcGVydGllcyhbe2V4cHJlc3Npb246ImxpbmUuZW5hYmxlZCIsdmFsdWU6dH0se2V4cHJlc3Npb246ImxpbmUuY29sb3IiLHZhbHVlOmV9XSl9KTtjb25zdCBlPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRBeGlzUHJvcGVydHkoImxpbmUud2lkdGgiKTt0aGlzLmF4aXNMaW5lV2lkdGhTbGlkZXIuc2V0TWF4VmFsdWUoR2UoZSwxMCkpLnNldExhYmVsKHRoaXMudHJhbnNsYXRlKCJ0aGlja25lc3MiKSkuc2V0VGV4dEZpZWxkV2lkdGgoNDUpLnNldFZhbHVlKCIiK2UpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldEF4aXNQcm9wZXJ0aWVzKFt7ZXhwcmVzc2lvbjoibGluZS5lbmFibGVkIix2YWx1ZTowIT09ZX0se2V4cHJlc3Npb246ImxpbmUud2lkdGgiLHZhbHVlOmV9XSkpfWluaXRBeGlzVGlja3MoKXtpZighdGhpcy5oYXNDb25maWd1cmFibGVBeGlzVGlja3MoKSlyZXR1cm47Y29uc3QgZT10aGlzLmNyZWF0ZUJlYW4obmV3ICQodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlKSk7dGhpcy5heGlzR3JvdXAuYWRkSXRlbShlKSx0aGlzLmFjdGl2ZVBhbmVscy5wdXNoKGUpfWhhc0NvbmZpZ3VyYWJsZUF4aXNUaWNrcygpe3N3aXRjaCh0aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydFR5cGUoKSl7Y2FzZSJyYWRhckxpbmUiOmNhc2UicmFkYXJBcmVhIjpjYXNlInJhbmdlQmFyIjpjYXNlImJveFBsb3QiOmNhc2Uid2F0ZXJmYWxsIjpyZXR1cm4hMTtkZWZhdWx0OnJldHVybiEwfX1pbml0QXhpc0xhYmVscygpe2NvbnN0IGU9e2ZhbWlseTp0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0QXhpc1Byb3BlcnR5KCJsYWJlbC5mb250RmFtaWx5Iiksc3R5bGU6dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eSgibGFiZWwuZm9udFN0eWxlIiksd2VpZ2h0OnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRBeGlzUHJvcGVydHkoImxhYmVsLmZvbnRXZWlnaHQiKSxzaXplOnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRBeGlzUHJvcGVydHkoImxhYmVsLmZvbnRTaXplIiksY29sb3I6dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eSgibGFiZWwuY29sb3IiKX0sdD17bmFtZTp0aGlzLnRyYW5zbGF0ZSgibGFiZWxzIiksZW5hYmxlZDohMCxzdXBwcmVzc0VuYWJsZWRDaGVja2JveDohMCxpbml0aWFsRm9udDplLHNldEZvbnQ6ZT0+e2UuZmFtaWx5JiZ0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0QXhpc1Byb3BlcnR5KCJsYWJlbC5mb250RmFtaWx5IixlLmZhbWlseSksZS53ZWlnaHQmJnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRBeGlzUHJvcGVydHkoImxhYmVsLmZvbnRXZWlnaHQiLGUud2VpZ2h0KSxlLnN0eWxlJiZ0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0QXhpc1Byb3BlcnR5KCJsYWJlbC5mb250U3R5bGUiLGUuc3R5bGUpLGUuc2l6ZSYmdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldEF4aXNQcm9wZXJ0eSgibGFiZWwuZm9udFNpemUiLGUuc2l6ZSksZS5jb2xvciYmdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldEF4aXNQcm9wZXJ0eSgibGFiZWwuY29sb3IiLGUuY29sb3IpfX0saT10aGlzLmNyZWF0ZUJlYW4obmV3IFUodCkpO3RoaXMuYXhpc0dyb3VwLmFkZEl0ZW0oaSksdGhpcy5hY3RpdmVQYW5lbHMucHVzaChpKSx0aGlzLmFkZEFkZGl0aW9uYWxMYWJlbENvbXBzKGkpfWFkZEFkZGl0aW9uYWxMYWJlbENvbXBzKGUpe3RoaXMuYWRkTGFiZWxQYWRkaW5nKGUpO2NvbnN0e3hSb3RhdGlvbkNvbXA6dCx5Um90YXRpb25Db21wOml9PXRoaXMuY3JlYXRlUm90YXRpb25XaWRnZXRzKCkscz10aGlzLmluaXRMYWJlbFJvdGF0aW9ucyh0LGkpO2UuYWRkQ29tcFRvUGFuZWwocyksZS5hZGRDb21wVG9QYW5lbCh0KSxlLmFkZENvbXBUb1BhbmVsKGkpfWluaXRMYWJlbFJvdGF0aW9ucyhlLHQpe2NvbnN0IGk9ZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldExhYmVsUm90YXRpb24oZSkscj0oZSx0KT0+e3RoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRMYWJlbFJvdGF0aW9uKGUsdCl9LG89KCgpPT57Y29uc3QgZT1pKCJ4QXhpcyIpLHQ9aSgieUF4aXMiKTtyZXR1cm4gbnVsbD09ZSYmbnVsbD09dCYmdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eSgibGFiZWwuYXV0b1JvdGF0ZSIpfSkoKSxuPXRoaXMuY3JlYXRlQmVhbihuZXcgcy5BZ0NoZWNrYm94KS5zZXRMYWJlbCh0aGlzLnRyYW5zbGF0ZSgiYXV0b1JvdGF0ZSIpKS5zZXRWYWx1ZShvKS5vblZhbHVlQ2hhbmdlKHM9Pnt0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0QXhpc1Byb3BlcnR5KCJsYWJlbC5hdXRvUm90YXRlIixzKSxzPyh0aGlzLnByZXZYUm90YXRpb249aSgieEF4aXMiKSx0aGlzLnByZXZZUm90YXRpb249aSgieUF4aXMiKSxyKCJ4QXhpcyIsdm9pZCAwKSxyKCJ5QXhpcyIsdm9pZCAwKSk6KHIoInhBeGlzIix0aGlzLnByZXZYUm90YXRpb24pLHIoInlBeGlzIix0aGlzLnByZXZZUm90YXRpb24pKSxlLnNldERpc2FibGVkKHMpLHQuc2V0RGlzYWJsZWQocyl9KTtyZXR1cm4gZS5zZXREaXNhYmxlZChvKSx0LnNldERpc2FibGVkKG8pLG59Y3JlYXRlUm90YXRpb25XaWRnZXRzKCl7Y29uc3QgZT1TdHJpbmcuZnJvbUNoYXJDb2RlKDE3NiksdD0odCxpKT0+e2NvbnN0IHM9YCR7dGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUodCl9ICR7ZX1gLHI9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldExhYmVsUm90YXRpb24oaSksbz0obmV3IHEpLnNldExhYmVsKHMpLnNldExhYmVsV2lkdGgoImZsZXgiKS5zZXRWYWx1ZShyfHwwKS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRMYWJlbFJvdGF0aW9uKGksZSkpO3JldHVybiB0aGlzLmF4aXNMYWJlbFVwZGF0ZUZ1bmNzLnB1c2goKCk9Pntjb25zdCBlPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRMYWJlbFJvdGF0aW9uKGkpO28uc2V0VmFsdWUoZXx8MCl9KSx0aGlzLmNyZWF0ZUJlYW4obyl9O3JldHVybnt4Um90YXRpb25Db21wOnQoInhSb3RhdGlvbiIsInhBeGlzIikseVJvdGF0aW9uQ29tcDp0KCJ5Um90YXRpb24iLCJ5QXhpcyIpfX1hZGRMYWJlbFBhZGRpbmcoZSl7Y29uc3QgdD10aGlzLmNyZWF0ZUJlYW4obmV3IHMuQWdTbGlkZXIpLGk9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eSgibGFiZWwucGFkZGluZyIpO3Quc2V0TGFiZWwodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoInBhZGRpbmciKSkuc2V0TWF4VmFsdWUoR2UoaSwzMCkpLnNldFZhbHVlKCIiK2kpLnNldFRleHRGaWVsZFdpZHRoKDQ1KS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRBeGlzUHJvcGVydHkoImxhYmVsLnBhZGRpbmciLGUpKSxlLmFkZENvbXBUb1BhbmVsKHQpfXRyYW5zbGF0ZShlLHQpe3JldHVybiB0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZShlLHQpfWRlc3Ryb3lBY3RpdmVQYW5lbHMoKXt0aGlzLmFjdGl2ZVBhbmVscy5mb3JFYWNoKGU9PntzLl8ucmVtb3ZlRnJvbVBhcmVudChlLmdldEd1aSgpKSx0aGlzLmRlc3Ryb3lCZWFuKGUpfSl9ZGVzdHJveSgpe3RoaXMuZGVzdHJveUFjdGl2ZVBhbmVscygpLHN1cGVyLmRlc3Ryb3koKX19US5URU1QTEFURT0nPGRpdj5cbiAgICAgICAgICAgIDxhZy1ncm91cC1jb21wb25lbnQgcmVmPSJheGlzR3JvdXAiPlxuICAgICAgICAgICAgICAgIDxhZy1jb2xvci1waWNrZXIgcmVmPSJheGlzQ29sb3JJbnB1dCI+PC9hZy1jb2xvci1waWNrZXI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9ImF4aXNMaW5lV2lkdGhTbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgPC9hZy1ncm91cC1jb21wb25lbnQ+XG4gICAgICAgIDwvZGl2PicsWihbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJheGlzR3JvdXAiKV0sUS5wcm90b3R5cGUsImF4aXNHcm91cCIsdm9pZCAwKSxaKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImF4aXNDb2xvcklucHV0IildLFEucHJvdG90eXBlLCJheGlzQ29sb3JJbnB1dCIsdm9pZCAwKSxaKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImF4aXNMaW5lV2lkdGhTbGlkZXIiKV0sUS5wcm90b3R5cGUsImF4aXNMaW5lV2lkdGhTbGlkZXIiLHZvaWQgMCksWihbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sUS5wcm90b3R5cGUsImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIix2b2lkIDApLFooW3MuUG9zdENvbnN0cnVjdF0sUS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBKPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGVlIGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3Ioe2NoYXJ0Q29udHJvbGxlcjplLGNoYXJ0T3B0aW9uc1NlcnZpY2U6dCxpc0V4cGFuZGVkT25Jbml0Omk9ITF9KXtzdXBlcigpLHRoaXMuZHluYW1pY0NvbXBvbmVudHM9W10sdGhpcy5jaGFydENvbnRyb2xsZXI9ZSx0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2U9dCx0aGlzLmlzRXhwYW5kZWRPbkluaXQ9aX1pbml0KCl7dGhpcy5zZXRUZW1wbGF0ZShlZS5URU1QTEFURSx7YXhpc0dyb3VwOntjc3NJZGVudGlmaWVyOiJjaGFydHMtZm9ybWF0LXRvcC1sZXZlbCIsZGlyZWN0aW9uOiJ2ZXJ0aWNhbCJ9fSksdGhpcy5pbml0QXhpcygpLHRoaXMuaW5pdEF4aXNMYWJlbHMoKSx0aGlzLmluaXRSYWRpdXNBeGlzKCl9aW5pdEF4aXMoKXt0aGlzLmF4aXNHcm91cC5zZXRUaXRsZSh0aGlzLnRyYW5zbGF0ZSgiYXhpcyIpKS50b2dnbGVHcm91cEV4cGFuZCh0aGlzLmlzRXhwYW5kZWRPbkluaXQpLmhpZGVFbmFibGVkQ2hlY2tib3goITApLHRoaXMuYXhpc0NvbG9ySW5wdXQuc2V0TGFiZWwodGhpcy50cmFuc2xhdGUoImNvbG9yIikpLnNldExhYmVsV2lkdGgoImZsZXgiKS5zZXRJbnB1dFdpZHRoKCJmbGV4Iikuc2V0VmFsdWUodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eSgibGluZS5jb2xvciIpKS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRBeGlzUHJvcGVydHkoImxpbmUuY29sb3IiLGUpKTtjb25zdCBlPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRBeGlzUHJvcGVydHkoImxpbmUud2lkdGgiKTt0aGlzLmF4aXNMaW5lV2lkdGhTbGlkZXIuc2V0TWF4VmFsdWUoR2UoZSwxMCkpLnNldExhYmVsKHRoaXMudHJhbnNsYXRlKCJ0aGlja25lc3MiKSkuc2V0VGV4dEZpZWxkV2lkdGgoNDUpLnNldFZhbHVlKCIiK2UpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldEF4aXNQcm9wZXJ0eSgibGluZS53aWR0aCIsZSkpO2NvbnN0IHQ9dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnRUeXBlKCk7aWYoWyJyYWRhckxpbmUiLCJyYWRhckFyZWEiXS5pbmNsdWRlcyh0KSl7Y29uc3QgZT1be3ZhbHVlOiJjaXJjbGUiLHRleHQ6dGhpcy50cmFuc2xhdGUoImNpcmNsZSIpfSx7dmFsdWU6InBvbHlnb24iLHRleHQ6dGhpcy50cmFuc2xhdGUoInBvbHlnb24iKX1dO3RoaXMuYXhpc0dyb3VwLmFkZEl0ZW0odGhpcy5pbml0U2VsZWN0KHtsYWJlbDoic2hhcGUiLG9wdGlvbnM6ZSxjdXJyZW50VmFsdWU6dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eSgic2hhcGUiKSxvblZhbHVlQ2hhbmdlOmU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRBeGlzUHJvcGVydHkoInNoYXBlIixlKX0pKX1pZihoKHQpKXtjb25zdCBlPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRBeGlzUHJvcGVydHkoImlubmVyUmFkaXVzUmF0aW8iKTt0aGlzLmF4aXNHcm91cC5hZGRJdGVtKHRoaXMuaW5pdFNsaWRlcih7bGFiZWw6ImlubmVyUmFkaXVzIixtYXhWYWx1ZToxLGN1cnJlbnRWYWx1ZTpudWxsIT1lP2U6MCxvblZhbHVlQ2hhbmdlOmU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRBeGlzUHJvcGVydHkoImlubmVyUmFkaXVzUmF0aW8iLGUpfSkpfX1pbml0QXhpc0xhYmVscygpe2NvbnN0IGU9e2ZhbWlseTp0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0QXhpc1Byb3BlcnR5KCJsYWJlbC5mb250RmFtaWx5Iiksc3R5bGU6dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eSgibGFiZWwuZm9udFN0eWxlIiksd2VpZ2h0OnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRBeGlzUHJvcGVydHkoImxhYmVsLmZvbnRXZWlnaHQiKSxzaXplOnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRBeGlzUHJvcGVydHkoImxhYmVsLmZvbnRTaXplIiksY29sb3I6dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eSgibGFiZWwuY29sb3IiKX0sdD17bmFtZTp0aGlzLnRyYW5zbGF0ZSgibGFiZWxzIiksZW5hYmxlZDohMCxzdXBwcmVzc0VuYWJsZWRDaGVja2JveDohMCxpbml0aWFsRm9udDplLHNldEZvbnQ6ZT0+e2UuZmFtaWx5JiZ0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0QXhpc1Byb3BlcnR5KCJsYWJlbC5mb250RmFtaWx5IixlLmZhbWlseSksZS53ZWlnaHQmJnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRBeGlzUHJvcGVydHkoImxhYmVsLmZvbnRXZWlnaHQiLGUud2VpZ2h0KSxlLnN0eWxlJiZ0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0QXhpc1Byb3BlcnR5KCJsYWJlbC5mb250U3R5bGUiLGUuc3R5bGUpLGUuc2l6ZSYmdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldEF4aXNQcm9wZXJ0eSgibGFiZWwuZm9udFNpemUiLGUuc2l6ZSksZS5jb2xvciYmdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldEF4aXNQcm9wZXJ0eSgibGFiZWwuY29sb3IiLGUuY29sb3IpfX0saT10aGlzLmNyZWF0ZUJlYW4obmV3IFUodCkpLHM9dGhpcy5jcmVhdGVPcmllbnRhdGlvbldpZGdldCgpO2kuYWRkSXRlbVRvUGFuZWwocyksdGhpcy5heGlzR3JvdXAuYWRkSXRlbShpKSx0aGlzLmR5bmFtaWNDb21wb25lbnRzLnB1c2goaSl9Y3JlYXRlT3JpZW50YXRpb25XaWRnZXQoKXtjb25zdCBlPVt7dmFsdWU6ImZpeGVkIix0ZXh0OnRoaXMudHJhbnNsYXRlKCJmaXhlZCIpfSx7dmFsdWU6InBhcmFsbGVsIix0ZXh0OnRoaXMudHJhbnNsYXRlKCJwYXJhbGxlbCIpfSx7dmFsdWU6InBlcnBlbmRpY3VsYXIiLHRleHQ6dGhpcy50cmFuc2xhdGUoInBlcnBlbmRpY3VsYXIiKX1dO3JldHVybiB0aGlzLmluaXRTZWxlY3Qoe2xhYmVsOiJvcmllbnRhdGlvbiIsb3B0aW9uczplLGN1cnJlbnRWYWx1ZTp0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0QXhpc1Byb3BlcnR5KCJsYWJlbC5vcmllbnRhdGlvbiIpLG9uVmFsdWVDaGFuZ2U6ZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldEF4aXNQcm9wZXJ0eSgibGFiZWwub3JpZW50YXRpb24iLGUpfSl9aW5pdFJhZGl1c0F4aXMoKXt2YXIgZSx0O2lmKCFmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSJyYWRpYWxDb2x1bW4iOmNhc2UicmFkaWFsQmFyIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX0odGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnRUeXBlKCkpKXJldHVybjtjb25zdCBpPXRoaXMuY3JlYXRlQmVhbihuZXcgcy5BZ0dyb3VwQ29tcG9uZW50KHtjc3NJZGVudGlmaWVyOiJjaGFydHMtZm9ybWF0LXN1Yi1sZXZlbCIsZGlyZWN0aW9uOiJ2ZXJ0aWNhbCIsc3VwcHJlc3NPcGVuQ2xvc2VJY29uczohMCxlbmFibGVkOiEwLHN1cHByZXNzRW5hYmxlZENoZWNrYm94OiEwLHRpdGxlOnRoaXMudHJhbnNsYXRlKCJwYWRkaW5nIil9KSkuaGlkZUVuYWJsZWRDaGVja2JveCghMCkuaGlkZU9wZW5DbG9zZUljb25zKCEwKTtpLmFkZEl0ZW0odGhpcy5pbml0U2xpZGVyKHtsYWJlbDoiZ3JvdXBQYWRkaW5nIixtYXhWYWx1ZToxLGN1cnJlbnRWYWx1ZTpudWxsIT09KGU9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldEF4aXNQcm9wZXJ0eSgicGFkZGluZ0lubmVyIikpJiZ2b2lkIDAhPT1lP2U6MCxvblZhbHVlQ2hhbmdlOmU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRBeGlzUHJvcGVydHkoInBhZGRpbmdJbm5lciIsZSl9KSksaS5hZGRJdGVtKHRoaXMuaW5pdFNsaWRlcih7bGFiZWw6InNlcmllc1BhZGRpbmciLG1heFZhbHVlOjEsY3VycmVudFZhbHVlOm51bGwhPT0odD10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0QXhpc1Byb3BlcnR5KCJncm91cFBhZGRpbmdJbm5lciIpKSYmdm9pZCAwIT09dD90OjAsb25WYWx1ZUNoYW5nZTplPT50aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0QXhpc1Byb3BlcnR5KCJncm91cFBhZGRpbmdJbm5lciIsZSl9KSksdGhpcy5heGlzR3JvdXAuYWRkSXRlbShpKSx0aGlzLmR5bmFtaWNDb21wb25lbnRzLnB1c2goaSl9aW5pdFNsaWRlcihlKXtjb25zdHtsYWJlbDp0LG1heFZhbHVlOmksbWluVmFsdWU6cj0wLHN0ZXA6bz0uMDUsY3VycmVudFZhbHVlOm4sb25WYWx1ZUNoYW5nZTphfT1lLGw9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5BZ1NsaWRlcik7cmV0dXJuIGwuc2V0TGFiZWwodGhpcy50cmFuc2xhdGUodCkpLnNldExhYmVsV2lkdGgoImZsZXgiKS5zZXRNaW5WYWx1ZShyKS5zZXRNYXhWYWx1ZShpKS5zZXRTdGVwKG8pLnNldFZhbHVlKCIiK24pLm9uVmFsdWVDaGFuZ2UoYSksdGhpcy5keW5hbWljQ29tcG9uZW50cy5wdXNoKGwpLGx9aW5pdFNlbGVjdChlKXtjb25zdHtsYWJlbDp0LG9wdGlvbnM6aSxjdXJyZW50VmFsdWU6cixvblZhbHVlQ2hhbmdlOm99PWUsbj10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBzLkFnU2VsZWN0KTtyZXR1cm4gbi5zZXRMYWJlbCh0aGlzLnRyYW5zbGF0ZSh0KSkuc2V0TGFiZWxBbGlnbm1lbnQoImxlZnQiKS5zZXRMYWJlbFdpZHRoKCJmbGV4Iikuc2V0SW5wdXRXaWR0aCgiZmxleCIpLmFkZE9wdGlvbnMoaSksdm9pZCAwIT09ciYmbi5zZXRWYWx1ZShyKSxuLm9uVmFsdWVDaGFuZ2UobyksdGhpcy5keW5hbWljQ29tcG9uZW50cy5wdXNoKG4pLG59dHJhbnNsYXRlKGUsdCl7cmV0dXJuIHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKGUsdCl9ZGVzdHJveUR5bmFtaWNDb21wb25lbnRzKCl7dGhpcy5keW5hbWljQ29tcG9uZW50cy5mb3JFYWNoKGU9PntzLl8ucmVtb3ZlRnJvbVBhcmVudChlLmdldEd1aSgpKSx0aGlzLmRlc3Ryb3lCZWFuKGUpfSksdGhpcy5keW5hbWljQ29tcG9uZW50cz1bXX1kZXN0cm95KCl7dGhpcy5kZXN0cm95RHluYW1pY0NvbXBvbmVudHMoKSxzdXBlci5kZXN0cm95KCl9fWVlLlRFTVBMQVRFPSc8ZGl2PlxuICAgICAgICAgICAgPGFnLWdyb3VwLWNvbXBvbmVudCByZWY9ImF4aXNHcm91cCI+XG4gICAgICAgICAgICAgICAgPGFnLWNvbG9yLXBpY2tlciByZWY9ImF4aXNDb2xvcklucHV0Ij48L2FnLWNvbG9yLXBpY2tlcj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0iYXhpc0xpbmVXaWR0aFNsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICA8L2FnLWdyb3VwLWNvbXBvbmVudD5cbiAgICAgICAgPC9kaXY+JyxKKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImF4aXNHcm91cCIpXSxlZS5wcm90b3R5cGUsImF4aXNHcm91cCIsdm9pZCAwKSxKKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImF4aXNDb2xvcklucHV0IildLGVlLnByb3RvdHlwZSwiYXhpc0NvbG9ySW5wdXQiLHZvaWQgMCksSihbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJheGlzTGluZVdpZHRoU2xpZGVyIildLGVlLnByb3RvdHlwZSwiYXhpc0xpbmVXaWR0aFNsaWRlciIsdm9pZCAwKSxKKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIpXSxlZS5wcm90b3R5cGUsImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIix2b2lkIDApLEooW3MuUG9zdENvbnN0cnVjdF0sZWUucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgdGU9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgaWUgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3Rvcih7Y2hhcnRPcHRpb25zU2VydmljZTplLGlzRXhwYW5kZWRPbkluaXQ6dD0hMX0pe3N1cGVyKCksdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlPWUsdGhpcy5pc0V4cGFuZGVkT25Jbml0PXR9aW5pdCgpe3RoaXMuc2V0VGVtcGxhdGUoaWUuVEVNUExBVEUse25hdmlnYXRvckdyb3VwOntjc3NJZGVudGlmaWVyOiJjaGFydHMtZm9ybWF0LXRvcC1sZXZlbCIsZGlyZWN0aW9uOiJ2ZXJ0aWNhbCJ9fSksdGhpcy5pbml0TmF2aWdhdG9yKCl9aW5pdE5hdmlnYXRvcigpe2NvbnN0e2NoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlOmV9PXRoaXM7dGhpcy5uYXZpZ2F0b3JHcm91cC5zZXRUaXRsZShlLnRyYW5zbGF0ZSgibmF2aWdhdG9yIikpLmhpZGVFbmFibGVkQ2hlY2tib3goITEpLnNldEVuYWJsZWQodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldENoYXJ0T3B0aW9uKCJuYXZpZ2F0b3IuZW5hYmxlZCIpfHwhMSkub25FbmFibGVDaGFuZ2UoZT0+e3RoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRDaGFydE9wdGlvbigibmF2aWdhdG9yLmVuYWJsZWQiLGUpLHRoaXMubmF2aWdhdG9yR3JvdXAudG9nZ2xlR3JvdXBFeHBhbmQoITApfSkudG9nZ2xlR3JvdXBFeHBhbmQodGhpcy5pc0V4cGFuZGVkT25Jbml0KTtjb25zdCB0PXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRDaGFydE9wdGlvbigibmF2aWdhdG9yLmhlaWdodCIpO3RoaXMubmF2aWdhdG9ySGVpZ2h0U2xpZGVyLnNldExhYmVsKGUudHJhbnNsYXRlKCJoZWlnaHQiKSkuc2V0TWluVmFsdWUoMTApLnNldE1heFZhbHVlKEdlKHQsNjApKS5zZXRUZXh0RmllbGRXaWR0aCg0NSkuc2V0VmFsdWUoIiIrKHR8fDMwKSkub25WYWx1ZUNoYW5nZShlPT50aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0Q2hhcnRPcHRpb24oIm5hdmlnYXRvci5oZWlnaHQiLGUpKX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpfX1pZS5URU1QTEFURT0nPGRpdj5cbiAgICAgICAgICAgIDxhZy1ncm91cC1jb21wb25lbnQgcmVmPSJuYXZpZ2F0b3JHcm91cCI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9Im5hdmlnYXRvckhlaWdodFNsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICA8L2FnLWdyb3VwLWNvbXBvbmVudD5cbiAgICAgICAgPC9kaXY+Jyx0ZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJuYXZpZ2F0b3JHcm91cCIpXSxpZS5wcm90b3R5cGUsIm5hdmlnYXRvckdyb3VwIix2b2lkIDApLHRlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoIm5hdmlnYXRvckhlaWdodFNsaWRlciIpXSxpZS5wcm90b3R5cGUsIm5hdmlnYXRvckhlaWdodFNsaWRlciIsdm9pZCAwKSx0ZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0saWUucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSx0ZShbcy5Qb3N0Q29uc3RydWN0XSxpZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBzZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyByZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2U9ZSx0aGlzLmNoYXJ0Q29udHJvbGxlcj10fWluaXQoKXt0aGlzLnNldFRlbXBsYXRlKHJlLlRFTVBMQVRFLHtjaGFydFBhZGRpbmdHcm91cDp7Y3NzSWRlbnRpZmllcjoiY2hhcnRzLWZvcm1hdC1zdWItbGV2ZWwiLGRpcmVjdGlvbjoidmVydGljYWwiLHN1cHByZXNzT3BlbkNsb3NlSWNvbnM6ITB9fSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ0hBUlRfT1BUSU9OU19DSEFOR0VELGU9Pnt0aGlzLnVwZGF0ZVRvcFBhZGRpbmcoZS5jaGFydE9wdGlvbnMpfSksdGhpcy5pbml0R3JvdXAoKSx0aGlzLmluaXRDaGFydFBhZGRpbmdJdGVtcygpfWluaXRHcm91cCgpe3RoaXMuY2hhcnRQYWRkaW5nR3JvdXAuc2V0VGl0bGUodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoInBhZGRpbmciKSkuaGlkZU9wZW5DbG9zZUljb25zKCEwKS5oaWRlRW5hYmxlZENoZWNrYm94KCEwKX1pbml0Q2hhcnRQYWRkaW5nSXRlbXMoKXtjb25zdCBlPShlLHQpPT57Y29uc3QgaT10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0Q2hhcnRPcHRpb24oInBhZGRpbmcuIitlKTt0LnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKGUpKS5zZXRNYXhWYWx1ZShHZShpLDIwMCkpLnNldFZhbHVlKCIiK2kpLnNldFRleHRGaWVsZFdpZHRoKDQ1KS5vblZhbHVlQ2hhbmdlKHQ9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRDaGFydE9wdGlvbigicGFkZGluZy4iK2UsdCkpfTtlKCJ0b3AiLHRoaXMucGFkZGluZ1RvcFNsaWRlciksZSgicmlnaHQiLHRoaXMucGFkZGluZ1JpZ2h0U2xpZGVyKSxlKCJib3R0b20iLHRoaXMucGFkZGluZ0JvdHRvbVNsaWRlciksZSgibGVmdCIsdGhpcy5wYWRkaW5nTGVmdFNsaWRlcil9dXBkYXRlVG9wUGFkZGluZyhlKXtjb25zdCB0PVsuLi50aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydFNlcmllc1R5cGVzKCksImNvbW1vbiJdLm1hcCh0PT57dmFyIGkscztyZXR1cm4gbnVsbD09PShzPW51bGw9PT0oaT1lW3RdKXx8dm9pZCAwPT09aT92b2lkIDA6aS5wYWRkaW5nKXx8dm9pZCAwPT09cz92b2lkIDA6cy50b3B9KS5maW5kKGU9Pm51bGwhPWUpO251bGwhPXQmJnRoaXMucGFkZGluZ1RvcFNsaWRlci5zZXRWYWx1ZSh0KX19cmUuVEVNUExBVEU9JzxkaXY+XG4gICAgICAgICAgICA8YWctZ3JvdXAtY29tcG9uZW50IHJlZj0iY2hhcnRQYWRkaW5nR3JvdXAiPlxuICAgICAgICAgICAgICAgIDxhZy1zbGlkZXIgcmVmPSJwYWRkaW5nVG9wU2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0icGFkZGluZ1JpZ2h0U2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0icGFkZGluZ0JvdHRvbVNsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9InBhZGRpbmdMZWZ0U2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgIDwvYWctZ3JvdXAtY29tcG9uZW50PlxuICAgICAgICA8ZGl2Picsc2UoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiY2hhcnRQYWRkaW5nR3JvdXAiKV0scmUucHJvdG90eXBlLCJjaGFydFBhZGRpbmdHcm91cCIsdm9pZCAwKSxzZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJwYWRkaW5nVG9wU2xpZGVyIildLHJlLnByb3RvdHlwZSwicGFkZGluZ1RvcFNsaWRlciIsdm9pZCAwKSxzZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJwYWRkaW5nUmlnaHRTbGlkZXIiKV0scmUucHJvdG90eXBlLCJwYWRkaW5nUmlnaHRTbGlkZXIiLHZvaWQgMCksc2UoW09iamVjdChzLlJlZlNlbGVjdG9yKSgicGFkZGluZ0JvdHRvbVNsaWRlciIpXSxyZS5wcm90b3R5cGUsInBhZGRpbmdCb3R0b21TbGlkZXIiLHZvaWQgMCksc2UoW09iamVjdChzLlJlZlNlbGVjdG9yKSgicGFkZGluZ0xlZnRTbGlkZXIiKV0scmUucHJvdG90eXBlLCJwYWRkaW5nTGVmdFNsaWRlciIsdm9pZCAwKSxzZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0scmUucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxzZShbcy5Qb3N0Q29uc3RydWN0XSxyZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBvZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBuZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlPWV9aW5pdCgpe3RoaXMuc2V0VGVtcGxhdGUobmUuVEVNUExBVEUse2NoYXJ0QmFja2dyb3VuZEdyb3VwOntjc3NJZGVudGlmaWVyOiJjaGFydHMtZm9ybWF0LXN1Yi1sZXZlbCIsZGlyZWN0aW9uOiJ2ZXJ0aWNhbCIsc3VwcHJlc3NPcGVuQ2xvc2VJY29uczohMH19KSx0aGlzLmluaXRHcm91cCgpLHRoaXMuaW5pdENvbG9yUGlja2VyKCl9aW5pdEdyb3VwKCl7dGhpcy5ncm91cC5zZXRUaXRsZSh0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgiYmFja2dyb3VuZCIpKS5zZXRFbmFibGVkKHRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRDaGFydE9wdGlvbigiYmFja2dyb3VuZC52aXNpYmxlIikpLmhpZGVPcGVuQ2xvc2VJY29ucyghMCkuaGlkZUVuYWJsZWRDaGVja2JveCghMSkub25FbmFibGVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldENoYXJ0T3B0aW9uKCJiYWNrZ3JvdW5kLnZpc2libGUiLGUpKX1pbml0Q29sb3JQaWNrZXIoKXt0aGlzLmNvbG9yUGlja2VyLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJjb2xvciIpKS5zZXRMYWJlbFdpZHRoKCJmbGV4Iikuc2V0SW5wdXRXaWR0aCgiZmxleCIpLnNldFZhbHVlKHRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRDaGFydE9wdGlvbigiYmFja2dyb3VuZC5maWxsIikpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldENoYXJ0T3B0aW9uKCJiYWNrZ3JvdW5kLmZpbGwiLGUpKX19bmUuVEVNUExBVEU9JzxkaXY+XG4gICAgICAgICAgICA8YWctZ3JvdXAtY29tcG9uZW50IHJlZj0iY2hhcnRCYWNrZ3JvdW5kR3JvdXAiPlxuICAgICAgICAgICAgICAgIDxhZy1jb2xvci1waWNrZXIgcmVmPSJjb2xvclBpY2tlciI+PC9hZy1jb2xvci1waWNrZXI+XG4gICAgICAgICAgICA8L2FnLWdyb3VwLWNvbXBvbmVudD5cbiAgICAgICAgPGRpdj4nLG9lKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImNoYXJ0QmFja2dyb3VuZEdyb3VwIildLG5lLnByb3RvdHlwZSwiZ3JvdXAiLHZvaWQgMCksb2UoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiY29sb3JQaWNrZXIiKV0sbmUucHJvdG90eXBlLCJjb2xvclBpY2tlciIsdm9pZCAwKSxvZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sbmUucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxvZShbcy5Qb3N0Q29uc3RydWN0XSxuZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBhZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBsZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGxlLlRFTVBMQVRFKSx0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2U9ZSx0aGlzLmFjdGl2ZVBhbmVscz1bXX1pbml0KCl7dGhpcy5pbml0Rm9udFBhbmVsKCksdGhpcy50aXRsZVBsYWNlaG9sZGVyPXRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJ0aXRsZVBsYWNlaG9sZGVyIil9aGFzVGl0bGUoKXtjb25zdCBlPXRoaXMuZ2V0T3B0aW9uKCJ0aXRsZSIpO3JldHVybiBlJiZlLmVuYWJsZWQmJmUudGV4dCYmZS50ZXh0Lmxlbmd0aD4wfWluaXRGb250UGFuZWwoKXtjb25zdCBlPXRoaXMuaGFzVGl0bGUoKSx0PShlLHQpPT57ZS5mYW1pbHkmJnRoaXMuc2V0T3B0aW9uKCJ0aXRsZS5mb250RmFtaWx5IixlLmZhbWlseSx0KSxlLndlaWdodCYmdGhpcy5zZXRPcHRpb24oInRpdGxlLmZvbnRXZWlnaHQiLGUud2VpZ2h0LHQpLGUuc3R5bGUmJnRoaXMuc2V0T3B0aW9uKCJ0aXRsZS5mb250U3R5bGUiLGUuc3R5bGUsdCksZS5zaXplJiZ0aGlzLnNldE9wdGlvbigidGl0bGUuZm9udFNpemUiLGUuc2l6ZSx0KSxlLmNvbG9yJiZ0aGlzLnNldE9wdGlvbigidGl0bGUuY29sb3IiLGUuY29sb3IsdCl9LGk9e2ZhbWlseTp0aGlzLmdldE9wdGlvbigidGl0bGUuZm9udEZhbWlseSIpLHN0eWxlOnRoaXMuZ2V0T3B0aW9uKCJ0aXRsZS5mb250U3R5bGUiKSx3ZWlnaHQ6dGhpcy5nZXRPcHRpb24oInRpdGxlLmZvbnRXZWlnaHQiKSxzaXplOnRoaXMuZ2V0T3B0aW9uKCJ0aXRsZS5mb250U2l6ZSIpLGNvbG9yOnRoaXMuZ2V0T3B0aW9uKCJ0aXRsZS5jb2xvciIpfTtlfHx0KGksITApO2NvbnN0IHM9e25hbWU6dGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoInRpdGxlIiksZW5hYmxlZDplLHN1cHByZXNzRW5hYmxlZENoZWNrYm94OiExLGluaXRpYWxGb250Omksc2V0Rm9udDp0LHNldEVuYWJsZWQ6ZT0+e2lmKHRoaXMudG9vbGJhckV4aXN0cygpKXtjb25zdCB0PXRoaXMuZ2V0T3B0aW9uKCJwYWRkaW5nLnRvcCIpO3RoaXMuc2V0T3B0aW9uKCJwYWRkaW5nLnRvcCIsZT90LTIwOnQrMjApfXRoaXMuc2V0T3B0aW9uKCJ0aXRsZS5lbmFibGVkIixlKTtjb25zdCB0PXRoaXMuZ2V0T3B0aW9uKCJ0aXRsZS50ZXh0IiksaT0iVGl0bGUiPT09dHx8MD09PShudWxsPT10P3ZvaWQgMDp0LnRyaW0oKS5sZW5ndGgpO2UmJmkmJnRoaXMuc2V0T3B0aW9uKCJ0aXRsZS50ZXh0Iix0aGlzLnRpdGxlUGxhY2Vob2xkZXIpfX0scj10aGlzLmNyZWF0ZUJlYW4obmV3IFUocykpO3IuYWRkSXRlbVRvUGFuZWwodGhpcy5jcmVhdGVTcGFjaW5nU2xpY2VyKCkpLHRoaXMuZ2V0R3VpKCkuYXBwZW5kQ2hpbGQoci5nZXRHdWkoKSksdGhpcy5hY3RpdmVQYW5lbHMucHVzaChyKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSwiY2hhcnRUaXRsZUVkaXQiLCgpPT57ci5zZXRFbmFibGVkKHRoaXMuaGFzVGl0bGUoKSl9KX1jcmVhdGVTcGFjaW5nU2xpY2VyKCl7Y29uc3QgZT10aGlzLmNyZWF0ZUJlYW4obmV3IHMuQWdTbGlkZXIpLHQ9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldENoYXJ0T3B0aW9uKCJ0aXRsZS5zcGFjaW5nIil8fDEwO3JldHVybiBlLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJzcGFjaW5nIikpLnNldE1heFZhbHVlKE1hdGgubWF4KHQsMTAwKSkuc2V0VmFsdWUoIiIrdCkuc2V0VGV4dEZpZWxkV2lkdGgoNDUpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldENoYXJ0T3B0aW9uKCJ0aXRsZS5zcGFjaW5nIixlKSksZX10b29sYmFyRXhpc3RzKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiZ2V0Q2hhcnRUb29sYmFySXRlbXMiKTtpZighZSlyZXR1cm4hMDtjb25zdCB0PXtkZWZhdWx0SXRlbXM6WyJjaGFydFVubGluayIsImNoYXJ0RG93bmxvYWQiXX07cmV0dXJuWyJjaGFydExpbmsiLCJjaGFydFVubGluayIsImNoYXJ0RG93bmxvYWQiXS5zb21lKGk9Pnt2YXIgcztyZXR1cm4gbnVsbD09PShzPWUmJmUodCkpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmluY2x1ZGVzKGkpfSl9Z2V0T3B0aW9uKGUpe3JldHVybiB0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0Q2hhcnRPcHRpb24oZSl9c2V0T3B0aW9uKGUsdCxpKXt0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0Q2hhcnRPcHRpb24oZSx0LGkpfWRlc3Ryb3lBY3RpdmVQYW5lbHMoKXt0aGlzLmFjdGl2ZVBhbmVscy5mb3JFYWNoKGU9PntzLl8ucmVtb3ZlRnJvbVBhcmVudChlLmdldEd1aSgpKSx0aGlzLmRlc3Ryb3lCZWFuKGUpfSl9ZGVzdHJveSgpe3RoaXMuZGVzdHJveUFjdGl2ZVBhbmVscygpLHN1cGVyLmRlc3Ryb3koKX19bGUuVEVNUExBVEU9IjxkaXY+PC9kaXY+IixhZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sbGUucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxhZShbcy5Qb3N0Q29uc3RydWN0XSxsZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBkZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBjZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKHtjaGFydENvbnRyb2xsZXI6ZSxjaGFydE9wdGlvbnNTZXJ2aWNlOnQsaXNFeHBhbmRlZE9uSW5pdDppPSExfSl7c3VwZXIoKSx0aGlzLmFjdGl2ZVBhbmVscz1bXSx0aGlzLmNoYXJ0Q29udHJvbGxlcj1lLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZT10LHRoaXMuaXNFeHBhbmRlZE9uSW5pdD1pfWluaXQoKXt0aGlzLnNldFRlbXBsYXRlKGNlLlRFTVBMQVRFLHtjaGFydEdyb3VwOntjc3NJZGVudGlmaWVyOiJjaGFydHMtZm9ybWF0LXRvcC1sZXZlbCIsZGlyZWN0aW9uOiJ2ZXJ0aWNhbCJ9fSksdGhpcy5pbml0R3JvdXAoKSx0aGlzLmluaXRUaXRsZXMoKSx0aGlzLmluaXRQYWRkaW5nUGFuZWwoKSx0aGlzLmluaXRCYWNrZ3JvdW5kUGFuZWwoKX1pbml0R3JvdXAoKXt0aGlzLmNoYXJ0R3JvdXAuc2V0VGl0bGUodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoImNoYXJ0IikpLnRvZ2dsZUdyb3VwRXhwYW5kKHRoaXMuaXNFeHBhbmRlZE9uSW5pdCkuaGlkZUVuYWJsZWRDaGVja2JveCghMCl9aW5pdFRpdGxlcygpe2NvbnN0IGU9dGhpcy5jcmVhdGVCZWFuKG5ldyBsZSh0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UpKTt0aGlzLmNoYXJ0R3JvdXAuYWRkSXRlbShlKSx0aGlzLmFjdGl2ZVBhbmVscy5wdXNoKGUpfWluaXRQYWRkaW5nUGFuZWwoKXtjb25zdCBlPXRoaXMuY3JlYXRlQmVhbihuZXcgcmUodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLHRoaXMuY2hhcnRDb250cm9sbGVyKSk7dGhpcy5jaGFydEdyb3VwLmFkZEl0ZW0oZSksdGhpcy5hY3RpdmVQYW5lbHMucHVzaChlKX1pbml0QmFja2dyb3VuZFBhbmVsKCl7Y29uc3QgZT10aGlzLmNyZWF0ZUJlYW4obmV3IG5lKHRoaXMuY2hhcnRPcHRpb25zU2VydmljZSkpO3RoaXMuY2hhcnRHcm91cC5hZGRJdGVtKGUpLHRoaXMuYWN0aXZlUGFuZWxzLnB1c2goZSl9ZGVzdHJveUFjdGl2ZVBhbmVscygpe3RoaXMuYWN0aXZlUGFuZWxzLmZvckVhY2goZT0+e3MuXy5yZW1vdmVGcm9tUGFyZW50KGUuZ2V0R3VpKCkpLHRoaXMuZGVzdHJveUJlYW4oZSl9KX1kZXN0cm95KCl7dGhpcy5kZXN0cm95QWN0aXZlUGFuZWxzKCksc3VwZXIuZGVzdHJveSgpfX1jZS5URU1QTEFURT0nPGRpdj5cbiAgICAgICAgICAgIDxhZy1ncm91cC1jb21wb25lbnQgcmVmPSJjaGFydEdyb3VwIj48L2FnLWdyb3VwLWNvbXBvbmVudD5cbiAgICAgICAgPC9kaXY+JyxkZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJjaGFydEdyb3VwIildLGNlLnByb3RvdHlwZSwiY2hhcnRHcm91cCIsdm9pZCAwKSxkZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sY2UucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxkZShbcy5Qb3N0Q29uc3RydWN0XSxjZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBoZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyB1ZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUsdCxpPSJzaGFkb3ciKXtzdXBlcigpLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZT1lLHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXM9dCx0aGlzLnByb3BlcnR5S2V5PWl9aW5pdCgpe3RoaXMuc2V0VGVtcGxhdGUodWUuVEVNUExBVEUse3NoYWRvd0dyb3VwOntjc3NJZGVudGlmaWVyOiJjaGFydHMtZm9ybWF0LXN1Yi1sZXZlbCIsZGlyZWN0aW9uOiJ2ZXJ0aWNhbCIsc3VwcHJlc3NPcGVuQ2xvc2VJY29uczohMH19KSx0aGlzLnNoYWRvd0JsdXJTbGlkZXIuc2V0VGV4dEZpZWxkV2lkdGgoNDUpLHRoaXMuc2hhZG93WE9mZnNldFNsaWRlci5zZXRUZXh0RmllbGRXaWR0aCg0NSksdGhpcy5zaGFkb3dZT2Zmc2V0U2xpZGVyLnNldFRleHRGaWVsZFdpZHRoKDQ1KSx0aGlzLmluaXRTZXJpZXNTaGFkb3coKX1pbml0U2VyaWVzU2hhZG93KCl7Y29uc3QgZT10aGlzLnByb3BlcnR5S2V5O3RoaXMuc2hhZG93R3JvdXAuc2V0VGl0bGUodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoInNoYWRvdyIpKS5zZXRFbmFibGVkKHRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRTZXJpZXNPcHRpb24oZSsiLmVuYWJsZWQiLHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXMoKSkpLmhpZGVPcGVuQ2xvc2VJY29ucyghMCkuaGlkZUVuYWJsZWRDaGVja2JveCghMSkub25FbmFibGVDaGFuZ2UodD0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldFNlcmllc09wdGlvbihlKyIuZW5hYmxlZCIsdCx0aGlzLmdldFNlbGVjdGVkU2VyaWVzKCkpKSx0aGlzLnNoYWRvd0NvbG9yUGlja2VyLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJjb2xvciIpKS5zZXRMYWJlbFdpZHRoKCJmbGV4Iikuc2V0SW5wdXRXaWR0aCgiZmxleCIpLnNldFZhbHVlKHRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRTZXJpZXNPcHRpb24oZSsiLmNvbG9yIix0aGlzLmdldFNlbGVjdGVkU2VyaWVzKCkpKS5vblZhbHVlQ2hhbmdlKHQ9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRTZXJpZXNPcHRpb24oZSsiLmNvbG9yIix0LHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXMoKSkpO2NvbnN0IHQ9KHQsaSxzLHIpPT57Y29uc3Qgbz10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0U2VyaWVzT3B0aW9uKGAke2V9LiR7aX1gLHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXMoKSk7dC5zZXRMYWJlbCh0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZShpKSkuc2V0TWluVmFsdWUocykuc2V0TWF4VmFsdWUoR2UobyxyKSkuc2V0VmFsdWUoIiIrbykub25WYWx1ZUNoYW5nZSh0PT50aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0U2VyaWVzT3B0aW9uKGAke2V9LiR7aX1gLHQsdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKSl9O3QodGhpcy5zaGFkb3dCbHVyU2xpZGVyLCJibHVyIiwwLDIwKSx0KHRoaXMuc2hhZG93WE9mZnNldFNsaWRlciwieE9mZnNldCIsLTEwLDEwKSx0KHRoaXMuc2hhZG93WU9mZnNldFNsaWRlciwieU9mZnNldCIsLTEwLDEwKX19ZnVuY3Rpb24gcGUoe2xhYmVsTmFtZTplLGNoYXJ0T3B0aW9uc1NlcnZpY2U6dCxnZXRTZWxlY3RlZFNlcmllczppLHNlcmllc09wdGlvbkxhYmVsUHJvcGVydHk6c30pe2NvbnN0IHI9ZT0+YCR7c30uJHtlfWAsbz1lPT57Y29uc3Qgcz1yKGUpO3JldHVybiB0LmdldFNlcmllc09wdGlvbihzLGkoKSl9LG49KGUscyk9Pntjb25zdCBvPXIoZSk7dC5zZXRTZXJpZXNPcHRpb24obyxzLGkoKSl9LGE9e2ZhbWlseTpvKCJmb250RmFtaWx5Iiksc3R5bGU6bygiZm9udFN0eWxlIiksd2VpZ2h0Om8oImZvbnRXZWlnaHQiKSxzaXplOm8oImZvbnRTaXplIiksY29sb3I6bygiY29sb3IiKX07cmV0dXJue25hbWU6ZSxlbmFibGVkOm8oImVuYWJsZWQiKXx8ITEsc2V0RW5hYmxlZDplPT5uKCJlbmFibGVkIixlKSxzdXBwcmVzc0VuYWJsZWRDaGVja2JveDohMSxpbml0aWFsRm9udDphLHNldEZvbnQ6ZT0+e2UuZmFtaWx5JiZuKCJmb250RmFtaWx5IixlLmZhbWlseSksZS53ZWlnaHQmJm4oImZvbnRXZWlnaHQiLGUud2VpZ2h0KSxlLnN0eWxlJiZuKCJmb250U3R5bGUiLGUuc3R5bGUpLGUuc2l6ZSYmbigiZm9udFNpemUiLGUuc2l6ZSksZS5jb2xvciYmbigiY29sb3IiLGUuY29sb3IpfX19dWUuVEVNUExBVEU9JzxkaXY+XG4gICAgICAgICAgICA8YWctZ3JvdXAtY29tcG9uZW50IHJlZj0ic2hhZG93R3JvdXAiPlxuICAgICAgICAgICAgICAgIDxhZy1jb2xvci1waWNrZXIgcmVmPSJzaGFkb3dDb2xvclBpY2tlciI+PC9hZy1jb2xvci1waWNrZXI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9InNoYWRvd0JsdXJTbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgICAgIDxhZy1zbGlkZXIgcmVmPSJzaGFkb3dYT2Zmc2V0U2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0ic2hhZG93WU9mZnNldFNsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICA8L2FnLWdyb3VwLWNvbXBvbmVudD5cbiAgICAgICAgPC9kaXY+JyxoZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJzaGFkb3dHcm91cCIpXSx1ZS5wcm90b3R5cGUsInNoYWRvd0dyb3VwIix2b2lkIDApLGhlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoInNoYWRvd0NvbG9yUGlja2VyIildLHVlLnByb3RvdHlwZSwic2hhZG93Q29sb3JQaWNrZXIiLHZvaWQgMCksaGUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgic2hhZG93Qmx1clNsaWRlciIpXSx1ZS5wcm90b3R5cGUsInNoYWRvd0JsdXJTbGlkZXIiLHZvaWQgMCksaGUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgic2hhZG93WE9mZnNldFNsaWRlciIpXSx1ZS5wcm90b3R5cGUsInNoYWRvd1hPZmZzZXRTbGlkZXIiLHZvaWQgMCksaGUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgic2hhZG93WU9mZnNldFNsaWRlciIpXSx1ZS5wcm90b3R5cGUsInNoYWRvd1lPZmZzZXRTbGlkZXIiLHZvaWQgMCksaGUoW09iamVjdChzLkF1dG93aXJlZCkoImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIildLHVlLnByb3RvdHlwZSwiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiLHZvaWQgMCksaGUoW3MuUG9zdENvbnN0cnVjdF0sdWUucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgZ2U9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgbWUgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCksdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlPWUsdGhpcy5nZXRTZWxlY3RlZFNlcmllcz10fWluaXQoKXt0aGlzLnNldFRlbXBsYXRlKG1lLlRFTVBMQVRFLHtzZXJpZXNNYXJrZXJzR3JvdXA6e2Nzc0lkZW50aWZpZXI6ImNoYXJ0cy1mb3JtYXQtc3ViLWxldmVsIixkaXJlY3Rpb246InZlcnRpY2FsIn19KSx0aGlzLmluaXRNYXJrZXJzKCl9aW5pdE1hcmtlcnMoKXt0aGlzLnNlcmllc01hcmtlclNoYXBlU2VsZWN0LmFkZE9wdGlvbnMoW3t2YWx1ZToic3F1YXJlIix0ZXh0OiJTcXVhcmUifSx7dmFsdWU6ImNpcmNsZSIsdGV4dDoiQ2lyY2xlIn0se3ZhbHVlOiJjcm9zcyIsdGV4dDoiQ3Jvc3MifSx7dmFsdWU6ImRpYW1vbmQiLHRleHQ6IkRpYW1vbmQifSx7dmFsdWU6InBsdXMiLHRleHQ6IlBsdXMifSx7dmFsdWU6InRyaWFuZ2xlIix0ZXh0OiJUcmlhbmdsZSJ9LHt2YWx1ZToiaGVhcnQiLHRleHQ6IkhlYXJ0In1dKS5zZXRMYWJlbCh0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgic2hhcGUiKSkuc2V0VmFsdWUodGhpcy5nZXRTZXJpZXNPcHRpb24oIm1hcmtlci5zaGFwZSIpKS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuc2V0U2VyaWVzT3B0aW9uKCJtYXJrZXIuc2hhcGUiLGUpKTtjb25zdCBlPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRDaGFydFR5cGUoKSx0PXMuXy5pbmNsdWRlcyhbInNjYXR0ZXIiLCJidWJibGUiXSxlKTt0aGlzLnNlcmllc01hcmtlcnNHcm91cC5zZXRUaXRsZSh0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgibWFya2VycyIpKS5oaWRlRW5hYmxlZENoZWNrYm94KHQpLnNldEVuYWJsZWQodGhpcy5nZXRTZXJpZXNPcHRpb24oIm1hcmtlci5lbmFibGVkIil8fCExKS5oaWRlT3BlbkNsb3NlSWNvbnMoITApLm9uRW5hYmxlQ2hhbmdlKGU9PnRoaXMuc2V0U2VyaWVzT3B0aW9uKCJtYXJrZXIuZW5hYmxlZCIsZSkpO2NvbnN0IGk9KGUsdCxpLHMpPT57Y29uc3Qgcj10aGlzLmdldFNlcmllc09wdGlvbihlKTt0LnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKGkpKS5zZXRNYXhWYWx1ZShHZShyLHMpKS5zZXRWYWx1ZSgiIityKS5zZXRUZXh0RmllbGRXaWR0aCg0NSkub25WYWx1ZUNoYW5nZSh0PT50aGlzLnNldFNlcmllc09wdGlvbihlLHQpKX07ImJ1YmJsZSI9PT1lPyhpKCJtYXJrZXIubWF4U2l6ZSIsdGhpcy5zZXJpZXNNYXJrZXJNaW5TaXplU2xpZGVyLCJtYXhTaXplIiw2MCksaSgibWFya2VyLnNpemUiLHRoaXMuc2VyaWVzTWFya2VyU2l6ZVNsaWRlciwibWluU2l6ZSIsNjApKToodGhpcy5zZXJpZXNNYXJrZXJNaW5TaXplU2xpZGVyLnNldERpc3BsYXllZCghMSksaSgibWFya2VyLnNpemUiLHRoaXMuc2VyaWVzTWFya2VyU2l6ZVNsaWRlciwic2l6ZSIsNjApKSxpKCJtYXJrZXIuc3Ryb2tlV2lkdGgiLHRoaXMuc2VyaWVzTWFya2VyU3Ryb2tlV2lkdGhTbGlkZXIsInN0cm9rZVdpZHRoIiwxMCl9Z2V0U2VyaWVzT3B0aW9uKGUpe3JldHVybiB0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0U2VyaWVzT3B0aW9uKGUsdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKX1zZXRTZXJpZXNPcHRpb24oZSx0KXt0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0U2VyaWVzT3B0aW9uKGUsdCx0aGlzLmdldFNlbGVjdGVkU2VyaWVzKCkpfX1tZS5URU1QTEFURT0nPGRpdj5cbiAgICAgICAgICAgIDxhZy1ncm91cC1jb21wb25lbnQgcmVmPSJzZXJpZXNNYXJrZXJzR3JvdXAiPlxuICAgICAgICAgICAgICAgIDxhZy1zZWxlY3QgcmVmPSJzZXJpZXNNYXJrZXJTaGFwZVNlbGVjdCI+PC9hZy1zZWxlY3Q+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9InNlcmllc01hcmtlck1pblNpemVTbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgICAgIDxhZy1zbGlkZXIgcmVmPSJzZXJpZXNNYXJrZXJTaXplU2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0ic2VyaWVzTWFya2VyU3Ryb2tlV2lkdGhTbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgPC9hZy1ncm91cC1jb21wb25lbnQ+XG4gICAgICAgIDwvZGl2PicsZ2UoW09iamVjdChzLlJlZlNlbGVjdG9yKSgic2VyaWVzTWFya2Vyc0dyb3VwIildLG1lLnByb3RvdHlwZSwic2VyaWVzTWFya2Vyc0dyb3VwIix2b2lkIDApLGdlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoInNlcmllc01hcmtlclNoYXBlU2VsZWN0IildLG1lLnByb3RvdHlwZSwic2VyaWVzTWFya2VyU2hhcGVTZWxlY3QiLHZvaWQgMCksZ2UoW09iamVjdChzLlJlZlNlbGVjdG9yKSgic2VyaWVzTWFya2VyU2l6ZVNsaWRlciIpXSxtZS5wcm90b3R5cGUsInNlcmllc01hcmtlclNpemVTbGlkZXIiLHZvaWQgMCksZ2UoW09iamVjdChzLlJlZlNlbGVjdG9yKSgic2VyaWVzTWFya2VyTWluU2l6ZVNsaWRlciIpXSxtZS5wcm90b3R5cGUsInNlcmllc01hcmtlck1pblNpemVTbGlkZXIiLHZvaWQgMCksZ2UoW09iamVjdChzLlJlZlNlbGVjdG9yKSgic2VyaWVzTWFya2VyU3Ryb2tlV2lkdGhTbGlkZXIiKV0sbWUucHJvdG90eXBlLCJzZXJpZXNNYXJrZXJTdHJva2VXaWR0aFNsaWRlciIsdm9pZCAwKSxnZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sbWUucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxnZShbcy5Qb3N0Q29uc3RydWN0XSxtZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBmZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyB2ZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKHZlLlRFTVBMQVRFKSx0aGlzLkg9MSx0aGlzLlM9MSx0aGlzLkI9MSx0aGlzLkE9MSx0aGlzLmlzU3BlY3RydW1EcmFnZ2luZz0hMSx0aGlzLmlzU3BlY3RydW1IdWVEcmFnZ2luZz0hMSx0aGlzLmlzU3BlY3RydW1BbHBoYURyYWdnaW5nPSExLHRoaXMuY29sb3JDaGFuZ2VkPSExLHRoaXMucGlja2VyPWUucGlja2VyfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmluaXRUYWJJbmRleCgpLHRoaXMuaW5pdFJlY2VudENvbG9ycygpLHRoaXMuYWRkR3VpRXZlbnRMaXN0ZW5lcigiZm9jdXMiLCgpPT50aGlzLnNwZWN0cnVtQ29sb3IuZm9jdXMoKSksdGhpcy5hZGRHdWlFdmVudExpc3RlbmVyKCJrZXlkb3duIixlPT57ZS5rZXkhPT1zLktleUNvZGUuRU5URVJ8fGUuZGVmYXVsdFByZXZlbnRlZHx8dGhpcy5kZXN0cm95KCl9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnNwZWN0cnVtQ29sb3IsImtleWRvd24iLGU9PnRoaXMubW92ZURyYWdnZXIoZSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuc3BlY3RydW1BbHBoYVNsaWRlciwia2V5ZG93biIsZT0+dGhpcy5tb3ZlQWxwaGFTbGlkZXIoZSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuc3BlY3RydW1IdWVTbGlkZXIsImtleWRvd24iLGU9PnRoaXMubW92ZUh1ZVNsaWRlcihlKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5zcGVjdHJ1bVZhbCwibW91c2Vkb3duIix0aGlzLm9uU3BlY3RydW1EcmFnZ2VyRG93bi5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnNwZWN0cnVtSHVlLCJtb3VzZWRvd24iLHRoaXMub25TcGVjdHJ1bUh1ZURvd24uYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5zcGVjdHJ1bUFscGhhLCJtb3VzZWRvd24iLHRoaXMub25TcGVjdHJ1bUFscGhhRG93bi5iaW5kKHRoaXMpKSx0aGlzLmFkZEd1aUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsZT0+e3RoaXMub25TcGVjdHJ1bURyYWdnZXJNb3ZlKGUpLHRoaXMub25TcGVjdHJ1bUh1ZU1vdmUoZSksdGhpcy5vblNwZWN0cnVtQWxwaGFNb3ZlKGUpfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMucmVjZW50Q29sb3JzLCJjbGljayIsdGhpcy5vblJlY2VudENvbG9yQ2xpY2suYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yZWNlbnRDb2xvcnMsImtleWRvd24iLGU9PntlLmtleSE9PXMuS2V5Q29kZS5FTlRFUiYmZS5rZXkhPT1zLktleUNvZGUuU1BBQ0V8fChlLnByZXZlbnREZWZhdWx0KCksdGhpcy5vblJlY2VudENvbG9yQ2xpY2soZSkpfSl9aW5pdFRhYkluZGV4KCl7Y29uc3QgZT10aGlzLnRhYkluZGV4PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidGFiSW5kZXgiKS50b1N0cmluZygpO3RoaXMuc3BlY3RydW1Db2xvci5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IixlKSx0aGlzLnNwZWN0cnVtSHVlU2xpZGVyLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLGUpLHRoaXMuc3BlY3RydW1BbHBoYVNsaWRlci5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IixlKX1yZWZyZXNoU3BlY3RydW1SZWN0KCl7cmV0dXJuIHRoaXMuc3BlY3RydW1WYWxSZWN0PXRoaXMuc3BlY3RydW1WYWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9cmVmcmVzaEh1ZVJlY3QoKXtyZXR1cm4gdGhpcy5zcGVjdHJ1bUh1ZVJlY3Q9dGhpcy5zcGVjdHJ1bUh1ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1yZWZyZXNoQWxwaGFSZWN0KCl7cmV0dXJuIHRoaXMuc3BlY3RydW1BbHBoYVJlY3Q9dGhpcy5zcGVjdHJ1bUFscGhhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfW9uU3BlY3RydW1EcmFnZ2VyRG93bihlKXt0aGlzLnJlZnJlc2hTcGVjdHJ1bVJlY3QoKSx0aGlzLmlzU3BlY3RydW1EcmFnZ2luZz0hMCx0aGlzLm1vdmVEcmFnZ2VyKGUpfW9uU3BlY3RydW1EcmFnZ2VyTW92ZShlKXt0aGlzLmlzU3BlY3RydW1EcmFnZ2luZyYmdGhpcy5tb3ZlRHJhZ2dlcihlKX1vblNwZWN0cnVtSHVlRG93bihlKXt0aGlzLnJlZnJlc2hIdWVSZWN0KCksdGhpcy5pc1NwZWN0cnVtSHVlRHJhZ2dpbmc9ITAsdGhpcy5tb3ZlSHVlU2xpZGVyKGUpfW9uU3BlY3RydW1IdWVNb3ZlKGUpe3RoaXMuaXNTcGVjdHJ1bUh1ZURyYWdnaW5nJiZ0aGlzLm1vdmVIdWVTbGlkZXIoZSl9b25TcGVjdHJ1bUFscGhhRG93bihlKXt0aGlzLnJlZnJlc2hBbHBoYVJlY3QoKSx0aGlzLmlzU3BlY3RydW1BbHBoYURyYWdnaW5nPSEwLHRoaXMubW92ZUFscGhhU2xpZGVyKGUpfW9uU3BlY3RydW1BbHBoYU1vdmUoZSl7dGhpcy5pc1NwZWN0cnVtQWxwaGFEcmFnZ2luZyYmdGhpcy5tb3ZlQWxwaGFTbGlkZXIoZSl9b25Nb3VzZVVwKCl7dGhpcy5pc1NwZWN0cnVtRHJhZ2dpbmc9ITEsdGhpcy5pc1NwZWN0cnVtSHVlRHJhZ2dpbmc9ITEsdGhpcy5pc1NwZWN0cnVtQWxwaGFEcmFnZ2luZz0hMX1tb3ZlRHJhZ2dlcihlKXtjb25zdCB0PXRoaXMuc3BlY3RydW1WYWxSZWN0O2lmKCF0KXJldHVybjtsZXQgaSxyO2lmKGUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KWk9ZS5jbGllbnRYLXQubGVmdCxyPWUuY2xpZW50WS10LnRvcDtlbHNle2NvbnN0IHQ9ZS5rZXk9PT1zLktleUNvZGUuTEVGVCxvPWUua2V5PT09cy5LZXlDb2RlLlJJR0hULG49ZS5rZXk9PT1zLktleUNvZGUuVVAsYT1lLmtleT09PXMuS2V5Q29kZS5ET1dOLGw9bnx8YSxkPXR8fG87aWYoIWwmJiFkKXJldHVybjtlLnByZXZlbnREZWZhdWx0KCk7Y29uc3R7eDpjLHk6aH09dGhpcy5nZXRTcGVjdHJ1bVZhbHVlKCk7aT1jKyhkP3Q/LTU6NTowKSxyPWgrKGw/bj8tNTo1OjApfWk9TWF0aC5tYXgoaSwwKSxpPU1hdGgubWluKGksdC53aWR0aCkscj1NYXRoLm1heChyLDApLHI9TWF0aC5taW4ocix0LmhlaWdodCksdGhpcy5zZXRTcGVjdHJ1bVZhbHVlKGkvdC53aWR0aCwxLXIvdC5oZWlnaHQpfW1vdmVIdWVTbGlkZXIoZSl7Y29uc3QgdD10aGlzLnNwZWN0cnVtSHVlUmVjdDtpZighdClyZXR1cm47Y29uc3QgaT10aGlzLm1vdmVTbGlkZXIodGhpcy5zcGVjdHJ1bUh1ZVNsaWRlcixlKTtudWxsIT1pJiYodGhpcy5IPTEtaS90LndpZHRoLHRoaXMudXBkYXRlKCkpfW1vdmVBbHBoYVNsaWRlcihlKXtjb25zdCB0PXRoaXMuc3BlY3RydW1BbHBoYVJlY3Q7aWYoIXQpcmV0dXJuO2NvbnN0IGk9dGhpcy5tb3ZlU2xpZGVyKHRoaXMuc3BlY3RydW1BbHBoYVNsaWRlcixlKTtudWxsIT1pJiYodGhpcy5BPWkvdC53aWR0aCx0aGlzLnVwZGF0ZSgpKX1tb3ZlU2xpZGVyKGUsdCl7dmFyIGk7Y29uc3Qgcj1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89bnVsbD09PShpPWUucGFyZW50RWxlbWVudCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoIWV8fCFvKXJldHVybiBudWxsO2xldCBuO2lmKHQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KW49dC5jbGllbnRYLW8ubGVmdDtlbHNle2NvbnN0IGk9dC5rZXk9PT1zLktleUNvZGUuTEVGVCxvPXQua2V5PT09cy5LZXlDb2RlLlJJR0hUO2lmKCFpJiYhbylyZXR1cm4gbnVsbDt0LnByZXZlbnREZWZhdWx0KCk7Y29uc3QgYT1pPy01OjU7bj1wYXJzZUZsb2F0KGUuc3R5bGUubGVmdCktci53aWR0aC8yK2F9cmV0dXJuIG49TWF0aC5tYXgobiwwKSxuPU1hdGgubWluKG4sby53aWR0aCksZS5zdHlsZS5sZWZ0PW4rci53aWR0aC8yKyJweCIsbn11cGRhdGUoKXtjb25zdCBlPW8uay5Db2xvci5mcm9tSFNCKDM2MCp0aGlzLkgsdGhpcy5TLHRoaXMuQix0aGlzLkEpLHQ9by5rLkNvbG9yLmZyb21IU0IoMzYwKnRoaXMuSCwxLDEpLGk9ZS50b1JnYmFTdHJpbmcoKSxzPXRoaXMucGlja2VyO28uay5Db2xvci5mcm9tU3RyaW5nKHMuZ2V0VmFsdWUoKSkudG9SZ2JhU3RyaW5nKCkhPT1pJiYodGhpcy5jb2xvckNoYW5nZWQ9ITApLHMuc2V0VmFsdWUoaSksdGhpcy5zcGVjdHJ1bUNvbG9yLnN0eWxlLmJhY2tncm91bmRDb2xvcj10LnRvUmdiYVN0cmluZygpLHRoaXMuc3BlY3RydW1EcmFnZ2VyLnN0eWxlLmJhY2tncm91bmRDb2xvcj1pfXNldFNwZWN0cnVtVmFsdWUoZSx0KXtjb25zdCBpPXRoaXMuc3BlY3RydW1WYWxSZWN0fHx0aGlzLnJlZnJlc2hTcGVjdHJ1bVJlY3QoKTtpZihudWxsPT1pKXJldHVybjtjb25zdCBzPXRoaXMuc3BlY3RydW1EcmFnZ2VyLHI9cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtlPU1hdGgubWF4KDAsZSksZT1NYXRoLm1pbigxLGUpLHQ9TWF0aC5tYXgoMCx0KSx0PU1hdGgubWluKDEsdCksdGhpcy5TPWUsdGhpcy5CPXQscy5zdHlsZS5sZWZ0PWUqaS53aWR0aC1yLndpZHRoLzIrInB4IixzLnN0eWxlLnRvcD0oMS10KSppLmhlaWdodC1yLmhlaWdodC8yKyJweCIsdGhpcy51cGRhdGUoKX1nZXRTcGVjdHJ1bVZhbHVlKCl7Y29uc3QgZT10aGlzLnNwZWN0cnVtRHJhZ2dlcix0PWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue3g6cGFyc2VGbG9hdChlLnN0eWxlLmxlZnQpK3Qud2lkdGgvMix5OnBhcnNlRmxvYXQoZS5zdHlsZS50b3ApK3QuaGVpZ2h0LzJ9fWluaXRSZWNlbnRDb2xvcnMoKXtjb25zdCBlPXZlLnJlY2VudENvbG9ycy5tYXAoKGUsdCk9PmA8ZGl2IGNsYXNzPSJhZy1yZWNlbnQtY29sb3IiIGlkPSR7dH0gc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICR7ZX07IHdpZHRoOiAxNXB4OyBoZWlnaHQ6IDE1cHg7IiByZWNlbnQtY29sb3I9IiR7ZX0iIHRhYkluZGV4PSIke3RoaXMudGFiSW5kZXh9Ij48L2Rpdj5gKTt0aGlzLnJlY2VudENvbG9ycy5pbm5lckhUTUw9ZS5qb2luKCIiKX1zZXRWYWx1ZShlKXtjb25zdCB0PW8uay5Db2xvci5mcm9tU3RyaW5nKGUpLFtpLHMscl09dC50b0hTQigpO3RoaXMuSD0oaXNOYU4oaSk/MDppKS8zNjAsdGhpcy5BPXQuYTtjb25zdCBuPXRoaXMuc3BlY3RydW1IdWVSZWN0fHx0aGlzLnJlZnJlc2hIdWVSZWN0KCksYT10aGlzLnNwZWN0cnVtQWxwaGFSZWN0fHx0aGlzLnJlZnJlc2hBbHBoYVJlY3QoKTt0aGlzLnNwZWN0cnVtSHVlU2xpZGVyLnN0eWxlLmxlZnQ9KHRoaXMuSC0xKSotbi53aWR0aCsicHgiLHRoaXMuc3BlY3RydW1BbHBoYVNsaWRlci5zdHlsZS5sZWZ0PXRoaXMuQSphLndpZHRoKyJweCIsdGhpcy5zZXRTcGVjdHJ1bVZhbHVlKHMscil9b25SZWNlbnRDb2xvckNsaWNrKGUpe2NvbnN0IHQ9ZS50YXJnZXQ7aWYoIXMuXy5leGlzdHModC5pZCkpcmV0dXJuO2NvbnN0IGk9cGFyc2VJbnQodC5pZCwxMCk7dGhpcy5zZXRWYWx1ZSh2ZS5yZWNlbnRDb2xvcnNbaV0pLHRoaXMuZGVzdHJveSgpfWFkZFJlY2VudENvbG9yKCl7Y29uc3QgZT1vLmsuQ29sb3IuZnJvbUhTQigzNjAqdGhpcy5ILHRoaXMuUyx0aGlzLkIsdGhpcy5BKS50b1JnYmFTdHJpbmcoKTtsZXQgdD12ZS5yZWNlbnRDb2xvcnM7dGhpcy5jb2xvckNoYW5nZWQmJnRbMF0hPT1lJiYodD10LmZpbHRlcih0PT50IT1lKSx0PVtlXS5jb25jYXQodCksdC5sZW5ndGg+dmUubWF4UmVjZW50Q29sb3JzJiYodD10LnNsaWNlKDAsdmUubWF4UmVjZW50Q29sb3JzKSksdmUucmVjZW50Q29sb3JzPXQpfWRlc3Ryb3koKXt0aGlzLmFkZFJlY2VudENvbG9yKCksc3VwZXIuZGVzdHJveSgpfX12ZS5tYXhSZWNlbnRDb2xvcnM9OCx2ZS5yZWNlbnRDb2xvcnM9W10sdmUuVEVNUExBVEU9JzxkaXYgY2xhc3M9ImFnLWNvbG9yLXBhbmVsIiB0YWJpbmRleD0iLTEiPlxuICAgICAgICAgICAgPGRpdiByZWY9InNwZWN0cnVtQ29sb3IiIGNsYXNzPSJhZy1zcGVjdHJ1bS1jb2xvciI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctc3BlY3RydW0tc2F0IGFnLXNwZWN0cnVtLWZpbGwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj0ic3BlY3RydW1WYWwiIGNsYXNzPSJhZy1zcGVjdHJ1bS12YWwgYWctc3BlY3RydW0tZmlsbCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj0ic3BlY3RydW1EcmFnZ2VyIiBjbGFzcz0iYWctc3BlY3RydW0tZHJhZ2dlciI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1zcGVjdHJ1bS10b29scyI+XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9InNwZWN0cnVtSHVlIiBjbGFzcz0iYWctc3BlY3RydW0taHVlIGFnLXNwZWN0cnVtLXRvb2wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhZy1zcGVjdHJ1bS1odWUtYmFja2dyb3VuZCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJzcGVjdHJ1bUh1ZVNsaWRlciIgY2xhc3M9ImFnLXNwZWN0cnVtLXNsaWRlciI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9InNwZWN0cnVtQWxwaGEiIGNsYXNzPSJhZy1zcGVjdHJ1bS1hbHBoYSBhZy1zcGVjdHJ1bS10b29sIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctc3BlY3RydW0tYWxwaGEtYmFja2dyb3VuZCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJzcGVjdHJ1bUFscGhhU2xpZGVyIiBjbGFzcz0iYWctc3BlY3RydW0tc2xpZGVyIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj0icmVjZW50Q29sb3JzIiBjbGFzcz0iYWctcmVjZW50LWNvbG9ycyI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+JyxmZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJzcGVjdHJ1bUNvbG9yIildLHZlLnByb3RvdHlwZSwic3BlY3RydW1Db2xvciIsdm9pZCAwKSxmZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJzcGVjdHJ1bVZhbCIpXSx2ZS5wcm90b3R5cGUsInNwZWN0cnVtVmFsIix2b2lkIDApLGZlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoInNwZWN0cnVtRHJhZ2dlciIpXSx2ZS5wcm90b3R5cGUsInNwZWN0cnVtRHJhZ2dlciIsdm9pZCAwKSxmZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJzcGVjdHJ1bUh1ZSIpXSx2ZS5wcm90b3R5cGUsInNwZWN0cnVtSHVlIix2b2lkIDApLGZlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoInNwZWN0cnVtSHVlU2xpZGVyIildLHZlLnByb3RvdHlwZSwic3BlY3RydW1IdWVTbGlkZXIiLHZvaWQgMCksZmUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgic3BlY3RydW1BbHBoYSIpXSx2ZS5wcm90b3R5cGUsInNwZWN0cnVtQWxwaGEiLHZvaWQgMCksZmUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgic3BlY3RydW1BbHBoYVNsaWRlciIpXSx2ZS5wcm90b3R5cGUsInNwZWN0cnVtQWxwaGFTbGlkZXIiLHZvaWQgMCksZmUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgicmVjZW50Q29sb3JzIildLHZlLnByb3RvdHlwZSwicmVjZW50Q29sb3JzIix2b2lkIDApLGZlKFtzLlBvc3RDb25zdHJ1Y3RdLHZlLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7Y2xhc3MgQ2UgZXh0ZW5kcyBzLkFnUGlja2VyRmllbGR7Y29uc3RydWN0b3IoZSl7c3VwZXIoT2JqZWN0LmFzc2lnbih7cGlja2VyQXJpYUxhYmVsS2V5OiJhcmlhTGFiZWxDb2xvclBpY2tlciIscGlja2VyQXJpYUxhYmVsVmFsdWU6IkNvbG9yIFBpY2tlciIscGlja2VyVHlwZToiYWctbGlzdCIsY2xhc3NOYW1lOiJhZy1jb2xvci1waWNrZXIiLHBpY2tlckljb246ImNvbG9yUGlja2VyIn0sZSkpLGUmJmUuY29sb3ImJih0aGlzLnZhbHVlPWUuY29sb3IpfXBvc3RDb25zdHJ1Y3QoKXtzdXBlci5wb3N0Q29uc3RydWN0KCksdGhpcy52YWx1ZSYmdGhpcy5zZXRWYWx1ZSh0aGlzLnZhbHVlKX1jcmVhdGVQaWNrZXJDb21wb25lbnQoKXtjb25zdCBlPXRoaXMuZ2V0R3VpKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIHRoaXMuY3JlYXRlQmVhbihuZXcgcy5BZ0RpYWxvZyh7Y2xvc2FibGU6ITEsbW9kYWw6ITAsaGlkZVRpdGxlQmFyOiEwLG1pbldpZHRoOjE5MCx3aWR0aDoxOTAsaGVpZ2h0OjI1MCx4OmUucmlnaHQtMTkwLHk6ZS50b3AtMjUwfSkpfXJlbmRlckFuZFBvc2l0aW9uUGlja2VyKCl7Y29uc3QgZT10aGlzLnBpY2tlckNvbXBvbmVudCx0PXRoaXMuY3JlYXRlQmVhbihuZXcgdmUoe3BpY2tlcjp0aGlzfSkpO3JldHVybiBlLmFkZENzc0NsYXNzKCJhZy1jb2xvci1kaWFsb2ciKSx0LmFkZERlc3Ryb3lGdW5jKCgpPT57ZS5pc0FsaXZlKCkmJnRoaXMuZGVzdHJveUJlYW4oZSl9KSxlLnNldFBhcmVudENvbXBvbmVudCh0aGlzKSxlLnNldEJvZHlDb21wb25lbnQodCksdC5zZXRWYWx1ZSh0aGlzLmdldFZhbHVlKCkpLHQuZ2V0R3VpKCkuZm9jdXMoKSxlLmFkZERlc3Ryb3lGdW5jKCgpPT57dGhpcy5pc0Rlc3Ryb3lpbmdQaWNrZXI/dGhpcy5pc0Rlc3Ryb3lpbmdQaWNrZXI9ITE6KHRoaXMuYmVmb3JlSGlkZVBpY2tlcigpLHRoaXMuaXNEZXN0cm95aW5nUGlja2VyPSEwLHQuaXNBbGl2ZSgpJiZ0aGlzLmRlc3Ryb3lCZWFuKHQpLHRoaXMuaXNBbGl2ZSgpJiZ0aGlzLmdldEZvY3VzYWJsZUVsZW1lbnQoKS5mb2N1cygpKX0pLCgpPT57dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10aGlzLnBpY2tlckNvbXBvbmVudCl8fHZvaWQgMD09PWU/dm9pZCAwOmUuY2xvc2UoKX19c2V0VmFsdWUoZSl7cmV0dXJuIHRoaXMudmFsdWU9PT1lP3RoaXM6KHRoaXMuZURpc3BsYXlGaWVsZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9ZSxzdXBlci5zZXRWYWx1ZShlKSl9Z2V0VmFsdWUoKXtyZXR1cm4gdGhpcy52YWx1ZX19dmFyIHllPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIFNlIGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3IoZSx0KXtzdXBlcigpLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZT1lLHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXM9dH1pbml0KCl7dGhpcy5zZXRUZW1wbGF0ZShTZS5URU1QTEFURSx7Y2FsbG91dEdyb3VwOntjc3NJZGVudGlmaWVyOiJjaGFydHMtZm9ybWF0LXN1Yi1sZXZlbCIsZGlyZWN0aW9uOiJ2ZXJ0aWNhbCJ9fSksdGhpcy5pbml0Q2FsbG91dE9wdGlvbnMoKX1pbml0Q2FsbG91dE9wdGlvbnMoKXt0aGlzLmNhbGxvdXRHcm91cC5zZXRUaXRsZSh0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgiY2FsbG91dCIpKS5zZXRFbmFibGVkKCEwKS5oaWRlT3BlbkNsb3NlSWNvbnMoITApLmhpZGVFbmFibGVkQ2hlY2tib3goITApO2NvbnN0IGU9KGUsdCxpLHMpPT57Y29uc3Qgcj10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0U2VyaWVzT3B0aW9uKGUsdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKTt0LnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKGkpKS5zZXRNYXhWYWx1ZShHZShyLHMpKS5zZXRWYWx1ZSgiIityKS5zZXRUZXh0RmllbGRXaWR0aCg0NSkub25WYWx1ZUNoYW5nZSh0PT50aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0U2VyaWVzT3B0aW9uKGUsdCx0aGlzLmdldFNlbGVjdGVkU2VyaWVzKCkpKX07ZSgiY2FsbG91dExpbmUubGVuZ3RoIix0aGlzLmNhbGxvdXRMZW5ndGhTbGlkZXIsImxlbmd0aCIsNDApLGUoImNhbGxvdXRMaW5lLnN0cm9rZVdpZHRoIix0aGlzLmNhbGxvdXRTdHJva2VXaWR0aFNsaWRlciwic3Ryb2tlV2lkdGgiLDEwKSxlKCJjYWxsb3V0TGFiZWwub2Zmc2V0Iix0aGlzLmxhYmVsT2Zmc2V0U2xpZGVyLCJvZmZzZXQiLDMwKX19U2UuVEVNUExBVEU9JzxkaXY+XG4gICAgICAgICAgICA8YWctZ3JvdXAtY29tcG9uZW50IHJlZj0iY2FsbG91dEdyb3VwIj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0iY2FsbG91dExlbmd0aFNsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9ImNhbGxvdXRTdHJva2VXaWR0aFNsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9ImxhYmVsT2Zmc2V0U2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgIDwvYWctZ3JvdXAtY29tcG9uZW50PlxuICAgICAgICA8L2Rpdj4nLHllKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImNhbGxvdXRHcm91cCIpXSxTZS5wcm90b3R5cGUsImNhbGxvdXRHcm91cCIsdm9pZCAwKSx5ZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJjYWxsb3V0TGVuZ3RoU2xpZGVyIildLFNlLnByb3RvdHlwZSwiY2FsbG91dExlbmd0aFNsaWRlciIsdm9pZCAwKSx5ZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJjYWxsb3V0U3Ryb2tlV2lkdGhTbGlkZXIiKV0sU2UucHJvdG90eXBlLCJjYWxsb3V0U3Ryb2tlV2lkdGhTbGlkZXIiLHZvaWQgMCkseWUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgibGFiZWxPZmZzZXRTbGlkZXIiKV0sU2UucHJvdG90eXBlLCJsYWJlbE9mZnNldFNsaWRlciIsdm9pZCAwKSx5ZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sU2UucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSx5ZShbcy5Qb3N0Q29uc3RydWN0XSxTZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciB3ZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBiZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2U9ZSx0aGlzLmdldFNlbGVjdGVkU2VyaWVzPXR9aW5pdCgpe2NvbnN0IGU9e2Nzc0lkZW50aWZpZXI6ImNoYXJ0cy1mb3JtYXQtc3ViLWxldmVsIixkaXJlY3Rpb246InZlcnRpY2FsIix0aXRsZTp0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgiY2FwIiksZW5hYmxlZDohMCxzdXBwcmVzc09wZW5DbG9zZUljb25zOiEwLHN1cHByZXNzRW5hYmxlZENoZWNrYm94OiEwfTt0aGlzLnNldFRlbXBsYXRlKGJlLlRFTVBMQVRFLHtjYXBzR3JvdXA6ZX0pLHRoaXMuaW5pdENvbnRyb2xzKCl9aW5pdENvbnRyb2xzKCl7Y29uc3QgZT10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0U2VyaWVzT3B0aW9uKCJjYXAubGVuZ3RoUmF0aW8iLHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXMoKSk7dGhpcy5jYXBMZW5ndGhSYXRpb1NsaWRlci5zZXRMYWJlbCh0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgiY2FwTGVuZ3RoUmF0aW8iKSkuc2V0U3RlcCguMDUpLnNldE1pblZhbHVlKDApLnNldE1heFZhbHVlKDEpLnNldFRleHRGaWVsZFdpZHRoKDQ1KS5zZXRWYWx1ZSgiIitlKS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRTZXJpZXNPcHRpb24oImNhcC5sZW5ndGhSYXRpbyIsZSx0aGlzLmdldFNlbGVjdGVkU2VyaWVzKCkpKX19YmUuVEVNUExBVEU9JzxkaXY+XG4gICAgICAgICAgICA8YWctZ3JvdXAtY29tcG9uZW50IHJlZj0iY2Fwc0dyb3VwIj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0iY2FwTGVuZ3RoUmF0aW9TbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgPC9hZy1ncm91cC1jb21wb25lbnQ+XG4gICAgICAgIDwvZGl2Picsd2UoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiY2Fwc0dyb3VwIildLGJlLnByb3RvdHlwZSwiY2Fwc0dyb3VwIix2b2lkIDApLHdlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImNhcExlbmd0aFJhdGlvU2xpZGVyIildLGJlLnByb3RvdHlwZSwiY2FwTGVuZ3RoUmF0aW9TbGlkZXIiLHZvaWQgMCksd2UoW09iamVjdChzLkF1dG93aXJlZCkoImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIildLGJlLnByb3RvdHlwZSwiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiLHZvaWQgMCksd2UoW3MuUG9zdENvbnN0cnVjdF0sYmUucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgRWU9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgUmUgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCksdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlPWUsdGhpcy5nZXRTZWxlY3RlZFNlcmllcz10fWluaXQoKXtjb25zdCBlPXtjc3NJZGVudGlmaWVyOiJjaGFydHMtZm9ybWF0LXN1Yi1sZXZlbCIsZGlyZWN0aW9uOiJ2ZXJ0aWNhbCIsdGl0bGU6dGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoImNvbm5lY3RvckxpbmUiKSxlbmFibGVkOiEwLHN1cHByZXNzT3BlbkNsb3NlSWNvbnM6ITAsc3VwcHJlc3NFbmFibGVkQ2hlY2tib3g6ITB9O3RoaXMuc2V0VGVtcGxhdGUoUmUuVEVNUExBVEUse2xpbmVHcm91cDplfSksdGhpcy5pbml0Q29ubmVjdG9yTGluZUNvbnRyb2xzKCl9aW5pdENvbm5lY3RvckxpbmVDb250cm9scygpe3RoaXMuaW5pdENvbG9yUGlja2VyKHRoaXMubGluZUNvbG9yUGlja2VyLCJjb2xvciIsImxpbmUuc3Ryb2tlIiksdGhpcy5pbml0U2xpZGVyKHRoaXMubGluZVN0cm9rZVdpZHRoU2xpZGVyLCJzdHJva2VXaWR0aCIsMCwxMCw0NSwibGluZS5zdHJva2VXaWR0aCIpLHRoaXMuaW5pdFNsaWRlcih0aGlzLmxpbmVEYXNoU2xpZGVyLCJsaW5lRGFzaCIsMCwzMCw0NSwibGluZS5saW5lRGFzaCIsMSwhMCksdGhpcy5pbml0U2xpZGVyKHRoaXMubGluZU9wYWNpdHlTbGlkZXIsInN0cm9rZU9wYWNpdHkiLDAsMSw0NSwibGluZS5zdHJva2VPcGFjaXR5IiwuMDUsITEpfWluaXRDb2xvclBpY2tlcihlLHQsaSl7Y29uc3Qgcz10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0U2VyaWVzT3B0aW9uKGksdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKTtlLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKHQpKS5zZXRMYWJlbFdpZHRoKCJmbGV4Iikuc2V0VmFsdWUobnVsbD09cz8idHJhbnNwYXJlbnQiOiIiK3MpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldFNlcmllc09wdGlvbihpLGUsdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKSl9aW5pdFNsaWRlcihlLHQsaSxzLHIsbyxuPTEsYT0hMSl7Y29uc3QgbD10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0U2VyaWVzT3B0aW9uKG8sdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKTtlLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKHQpKS5zZXRNaW5WYWx1ZShpKS5zZXRNYXhWYWx1ZShzKS5zZXRUZXh0RmllbGRXaWR0aChyKS5zZXRWYWx1ZSgiIitsKS5zZXRTdGVwKG4pLm9uVmFsdWVDaGFuZ2UoZT0+e2NvbnN0IHQ9YT9bZV06ZTt0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0U2VyaWVzT3B0aW9uKG8sdCx0aGlzLmdldFNlbGVjdGVkU2VyaWVzKCkpfSl9fVJlLlRFTVBMQVRFPSc8ZGl2PlxuICAgICAgICAgICAgPGFnLWdyb3VwLWNvbXBvbmVudCByZWY9ImxpbmVHcm91cCI+XG4gICAgICAgICAgICAgICAgPGFnLWNvbG9yLXBpY2tlciByZWY9ImxpbmVDb2xvclBpY2tlciI+PC9hZy1jb2xvci1waWNrZXI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9ImxpbmVTdHJva2VXaWR0aFNsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9ImxpbmVPcGFjaXR5U2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0ibGluZURhc2hTbGlkZXIiPjwvYWctc2xpZGVyPiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIDwvYWctZ3JvdXAtY29tcG9uZW50PlxuICAgICAgICA8L2Rpdj4nLEVlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImxpbmVDb2xvclBpY2tlciIpXSxSZS5wcm90b3R5cGUsImxpbmVDb2xvclBpY2tlciIsdm9pZCAwKSxFZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJsaW5lU3Ryb2tlV2lkdGhTbGlkZXIiKV0sUmUucHJvdG90eXBlLCJsaW5lU3Ryb2tlV2lkdGhTbGlkZXIiLHZvaWQgMCksRWUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgibGluZU9wYWNpdHlTbGlkZXIiKV0sUmUucHJvdG90eXBlLCJsaW5lT3BhY2l0eVNsaWRlciIsdm9pZCAwKSxFZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJsaW5lRGFzaFNsaWRlciIpXSxSZS5wcm90b3R5cGUsImxpbmVEYXNoU2xpZGVyIix2b2lkIDApLEVlKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIpXSxSZS5wcm90b3R5cGUsImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIix2b2lkIDApLEVlKFtzLlBvc3RDb25zdHJ1Y3RdLFJlLnByb3RvdHlwZSwiaW5pdCIsbnVsbCk7dmFyIHhlPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIFRlIGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3IoZSx0KXtzdXBlcigpLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZT1lLHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXM9dH1pbml0KCl7Y29uc3QgZT17Y3NzSWRlbnRpZmllcjoiY2hhcnRzLWZvcm1hdC1zdWItbGV2ZWwiLGRpcmVjdGlvbjoidmVydGljYWwiLHRpdGxlOnRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJ3aGlza2VyIiksZW5hYmxlZDohMCxzdXBwcmVzc09wZW5DbG9zZUljb25zOiEwLHN1cHByZXNzRW5hYmxlZENoZWNrYm94OiEwfTt0aGlzLnNldFRlbXBsYXRlKFRlLlRFTVBMQVRFLHt3aGlza2Vyc0dyb3VwOmV9KSx0aGlzLmluaXRDb250cm9scygpfWluaXRDb250cm9scygpe2NvbnN0IGU9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldFNlcmllc09wdGlvbigid2hpc2tlci5zdHJva2UiLHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXMoKSk7dGhpcy53aGlza2VyQ29sb3JQaWNrZXIuc2V0TGFiZWwodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoImNvbG9yIikpLnNldExhYmVsV2lkdGgoImZsZXgiKS5zZXRWYWx1ZShudWxsPT1lPyJ0cmFuc3BhcmVudCI6IiIrZSkub25WYWx1ZUNoYW5nZShlPT50aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0U2VyaWVzT3B0aW9uKCJ3aGlza2VyLnN0cm9rZSIsZSx0aGlzLmdldFNlbGVjdGVkU2VyaWVzKCkpKTtjb25zdCB0PXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRTZXJpZXNPcHRpb24oIndoaXNrZXIuc3Ryb2tlV2lkdGgiLHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXMoKSk7dGhpcy53aGlza2VyVGhpY2tuZXNzU2xpZGVyLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJzdHJva2VXaWR0aCIpKS5zZXRNaW5WYWx1ZSgwKS5zZXRNYXhWYWx1ZSgxMCkuc2V0VGV4dEZpZWxkV2lkdGgoNDUpLnNldFZhbHVlKCIiK3QpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldFNlcmllc09wdGlvbigid2hpc2tlci5zdHJva2VXaWR0aCIsZSx0aGlzLmdldFNlbGVjdGVkU2VyaWVzKCkpKTtjb25zdCBpPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRTZXJpZXNPcHRpb24oIndoaXNrZXIuc3Ryb2tlT3BhY2l0eSIsdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKTt0aGlzLndoaXNrZXJPcGFjaXR5U2xpZGVyLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJzdHJva2VPcGFjaXR5IikpLnNldFN0ZXAoLjA1KS5zZXRNaW5WYWx1ZSgwKS5zZXRNYXhWYWx1ZSgxKS5zZXRUZXh0RmllbGRXaWR0aCg0NSkuc2V0VmFsdWUoIiIraSkub25WYWx1ZUNoYW5nZShlPT50aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0U2VyaWVzT3B0aW9uKCJ3aGlza2VyLnN0cm9rZU9wYWNpdHkiLGUsdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKSk7Y29uc3Qgcz10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0U2VyaWVzT3B0aW9uKCJ3aGlza2VyLmxpbmVEYXNoIix0aGlzLmdldFNlbGVjdGVkU2VyaWVzKCkpO3RoaXMud2hpc2tlckxpbmVEYXNoU2xpZGVyLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJsaW5lRGFzaCIpKS5zZXRNaW5WYWx1ZSgwKS5zZXRNYXhWYWx1ZSgzMCkuc2V0VGV4dEZpZWxkV2lkdGgoNDUpLnNldFZhbHVlKCIiK3MpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldFNlcmllc09wdGlvbigid2hpc2tlci5saW5lRGFzaCIsW2VdLHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXMoKSkpO2NvbnN0IHI9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldFNlcmllc09wdGlvbigid2hpc2tlci5saW5lRGFzaE9mZnNldCIsdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKTt0aGlzLndoaXNrZXJMaW5lRGFzaE9mZnNldFNsaWRlci5zZXRMYWJlbCh0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgibGluZURhc2hPZmZzZXQiKSkuc2V0TWluVmFsdWUoMCkuc2V0TWF4VmFsdWUoMzApLnNldFRleHRGaWVsZFdpZHRoKDQ1KS5zZXRWYWx1ZSgiIityKS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRTZXJpZXNPcHRpb24oIndoaXNrZXIubGluZURhc2hPZmZzZXQiLGUsdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKSl9fVRlLlRFTVBMQVRFPSc8ZGl2PlxuICAgICAgICAgICAgPGFnLWdyb3VwLWNvbXBvbmVudCByZWY9IndoaXNrZXJzR3JvdXAiPlxuICAgICAgICAgICAgICAgIDxhZy1jb2xvci1waWNrZXIgcmVmPSJ3aGlza2VyQ29sb3JQaWNrZXIiPjwvYWctY29sb3ItcGlja2VyPlxuICAgICAgICAgICAgICAgIDxhZy1zbGlkZXIgcmVmPSJ3aGlza2VyVGhpY2tuZXNzU2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0id2hpc2tlck9wYWNpdHlTbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgICAgIDxhZy1zbGlkZXIgcmVmPSJ3aGlza2VyTGluZURhc2hTbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgICAgIDxhZy1zbGlkZXIgcmVmPSJ3aGlza2VyTGluZURhc2hPZmZzZXRTbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgPC9hZy1ncm91cC1jb21wb25lbnQ+XG4gICAgICAgIDwvZGl2PicseGUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgid2hpc2tlcnNHcm91cCIpXSxUZS5wcm90b3R5cGUsIndoaXNrZXJzR3JvdXAiLHZvaWQgMCkseGUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgid2hpc2tlckNvbG9yUGlja2VyIildLFRlLnByb3RvdHlwZSwid2hpc2tlckNvbG9yUGlja2VyIix2b2lkIDApLHhlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoIndoaXNrZXJUaGlja25lc3NTbGlkZXIiKV0sVGUucHJvdG90eXBlLCJ3aGlza2VyVGhpY2tuZXNzU2xpZGVyIix2b2lkIDApLHhlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoIndoaXNrZXJPcGFjaXR5U2xpZGVyIildLFRlLnByb3RvdHlwZSwid2hpc2tlck9wYWNpdHlTbGlkZXIiLHZvaWQgMCkseGUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgid2hpc2tlckxpbmVEYXNoU2xpZGVyIildLFRlLnByb3RvdHlwZSwid2hpc2tlckxpbmVEYXNoU2xpZGVyIix2b2lkIDApLHhlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoIndoaXNrZXJMaW5lRGFzaE9mZnNldFNsaWRlciIpXSxUZS5wcm90b3R5cGUsIndoaXNrZXJMaW5lRGFzaE9mZnNldFNsaWRlciIsdm9pZCAwKSx4ZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sVGUucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSx4ZShbcy5Qb3N0Q29uc3RydWN0XSxUZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBEZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBPZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2U9ZSx0aGlzLmdldFNlbGVjdGVkU2VyaWVzPXQsdGhpcy5hY3RpdmVQYW5lbHM9W119aW5pdCgpe2NvbnN0IGU9e2Nzc0lkZW50aWZpZXI6ImNoYXJ0cy1mb3JtYXQtc3ViLWxldmVsIixkaXJlY3Rpb246InZlcnRpY2FsIix0aXRsZTp0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgic2VyaWVzSXRlbXMiKSxlbmFibGVkOiEwLHN1cHByZXNzT3BlbkNsb3NlSWNvbnM6ITAsc3VwcHJlc3NFbmFibGVkQ2hlY2tib3g6ITB9O3RoaXMuc2V0VGVtcGxhdGUoT2UuVEVNUExBVEUse3Nlcmllc0l0ZW1zR3JvdXA6ZX0pLHRoaXMuaW5pdFNlcmllc0l0ZW1zKCksdGhpcy5pbml0U2VyaWVzQ29udHJvbHMoKX1pbml0U2VyaWVzSXRlbXMoKXtjb25zdCBlPVt7dmFsdWU6InBvc2l0aXZlIix0ZXh0OnRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJzZXJpZXNJdGVtUG9zaXRpdmUiKX0se3ZhbHVlOiJuZWdhdGl2ZSIsdGV4dDp0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgic2VyaWVzSXRlbU5lZ2F0aXZlIil9XTt0aGlzLnNlcmllc0l0ZW1TZWxlY3Quc2V0TGFiZWwodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoInNlcmllc0l0ZW1UeXBlIikpLnNldExhYmVsQWxpZ25tZW50KCJsZWZ0Iikuc2V0TGFiZWxXaWR0aCgiZmxleCIpLnNldElucHV0V2lkdGgoImZsZXgiKS5hZGRPcHRpb25zKGUpLnNldFZhbHVlKCJwb3NpdGl2ZSIpLm9uVmFsdWVDaGFuZ2UoZT0+e3RoaXMuZGVzdHJveUFjdGl2ZVBhbmVscygpLHRoaXMuaW5pdFNlcmllc0NvbnRyb2xzKGUpfSl9aW5pdFNlcmllc0NvbnRyb2xzKGU9InBvc2l0aXZlIil7dGhpcy5pbml0U2xpZGVyKCJzdHJva2VXaWR0aCIsMCwxMCw0NSxgaXRlbS4ke2V9LnN0cm9rZVdpZHRoYCksdGhpcy5pbml0U2xpZGVyKCJsaW5lRGFzaCIsMCwzMCw0NSxgaXRlbS4ke2V9LmxpbmVEYXNoYCwxLCEwKSx0aGlzLmluaXRTbGlkZXIoInN0cm9rZU9wYWNpdHkiLDAsMSw0NSxgaXRlbS4ke2V9LnN0cm9rZU9wYWNpdHlgLC4wNSwhMSksdGhpcy5pbml0U2xpZGVyKCJmaWxsT3BhY2l0eSIsMCwxLDQ1LGBpdGVtLiR7ZX0uZmlsbE9wYWNpdHlgLC4wNSwhMSksdGhpcy5pbml0SXRlbUxhYmVscyhlKX1pbml0U2xpZGVyKGUsdCxpLHIsbyxuPTEsYT0hMSl7Y29uc3QgbD10aGlzLnNlcmllc0l0ZW1zR3JvdXAuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHMuQWdTbGlkZXIpLGQ9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldFNlcmllc09wdGlvbihvLHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXMoKSk7bC5zZXRMYWJlbCh0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZShlKSkuc2V0TWluVmFsdWUodCkuc2V0TWF4VmFsdWUoaSkuc2V0VGV4dEZpZWxkV2lkdGgocikuc2V0VmFsdWUoIiIrZCkuc2V0U3RlcChuKS5vblZhbHVlQ2hhbmdlKGU9Pntjb25zdCB0PWE/W2VdOmU7dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldFNlcmllc09wdGlvbihvLHQsdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKX0pLHRoaXMuc2VyaWVzSXRlbXNHcm91cC5hZGRJdGVtKGwpLHRoaXMuYWN0aXZlUGFuZWxzLnB1c2gobCl9aW5pdEl0ZW1MYWJlbHMoZSl7Y29uc3QgdD1wZSh7bGFiZWxOYW1lOnRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJzZXJpZXNJdGVtTGFiZWxzIiksY2hhcnRPcHRpb25zU2VydmljZTp0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UsZ2V0U2VsZWN0ZWRTZXJpZXM6KCk9PnRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXMoKSxzZXJpZXNPcHRpb25MYWJlbFByb3BlcnR5OmBpdGVtLiR7ZX0ubGFiZWxgfSksaT10aGlzLmNyZWF0ZUJlYW4obmV3IFUodCkpO3RoaXMuc2VyaWVzSXRlbXNHcm91cC5hZGRJdGVtKGkpLHRoaXMuYWN0aXZlUGFuZWxzLnB1c2goaSl9ZGVzdHJveUFjdGl2ZVBhbmVscygpe3RoaXMuYWN0aXZlUGFuZWxzLmZvckVhY2goZT0+e3MuXy5yZW1vdmVGcm9tUGFyZW50KGUuZ2V0R3VpKCkpLHRoaXMuZGVzdHJveUJlYW4oZSl9KX1kZXN0cm95KCl7dGhpcy5kZXN0cm95QWN0aXZlUGFuZWxzKCksc3VwZXIuZGVzdHJveSgpfX1PZS5URU1QTEFURT0nPGRpdj5cbiAgICAgICAgICAgIDxhZy1ncm91cC1jb21wb25lbnQgcmVmPSJzZXJpZXNJdGVtc0dyb3VwIj5cbiAgICAgICAgICAgICAgICA8YWctc2VsZWN0IHJlZj0ic2VyaWVzSXRlbVNlbGVjdCI+PC9hZy1zZWxlY3Q+XG4gICAgICAgICAgICA8L2FnLWdyb3VwLWNvbXBvbmVudD5cbiAgICAgICAgPC9kaXY+JyxEZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJzZXJpZXNJdGVtc0dyb3VwIildLE9lLnByb3RvdHlwZSwic2VyaWVzSXRlbXNHcm91cCIsdm9pZCAwKSxEZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJzZXJpZXNJdGVtU2VsZWN0IildLE9lLnByb3RvdHlwZSwic2VyaWVzSXRlbVNlbGVjdCIsdm9pZCAwKSxEZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sT2UucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxEZShbcy5Qb3N0Q29uc3RydWN0XSxPZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBBZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBQZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2U9ZSx0aGlzLmdldFNlbGVjdGVkU2VyaWVzPXR9aW5pdCgpe2NvbnN0IGU9e2Nzc0lkZW50aWZpZXI6ImNoYXJ0cy1mb3JtYXQtc3ViLWxldmVsIixkaXJlY3Rpb246InZlcnRpY2FsIixlbmFibGVkOiEwLHN1cHByZXNzT3BlbkNsb3NlSWNvbnM6ITAsc3VwcHJlc3NFbmFibGVkQ2hlY2tib3g6ITB9O3RoaXMuc2V0VGVtcGxhdGUoUGUuVEVNUExBVEUse2dyb3VwU3BhY2luZzpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3RpdGxlOnRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJncm91cCIpfSksdGlsZVNwYWNpbmc6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHt0aXRsZTp0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgidGlsZSIpfSl9KSx0aGlzLmluaXRDb250cm9scygpfWluaXRDb250cm9scygpe2NvbnN0IGU9W3tvcHRpb25OYW1lc3BhY2U6Imdyb3VwIixjb21wb25lbnRzOntwYWRkaW5nU2xpZGVyOnRoaXMuZ3JvdXBQYWRkaW5nU2xpZGVyLHNwYWNpbmdTbGlkZXI6dGhpcy5ncm91cFNwYWNpbmdTbGlkZXJ9fSx7b3B0aW9uTmFtZXNwYWNlOiJ0aWxlIixjb21wb25lbnRzOntwYWRkaW5nU2xpZGVyOnRoaXMudGlsZVBhZGRpbmdTbGlkZXIsc3BhY2luZ1NsaWRlcjp0aGlzLnRpbGVTcGFjaW5nU2xpZGVyfX1dO2Zvcihjb25zdCB0IG9mIGUpe2NvbnN0e29wdGlvbk5hbWVzcGFjZTplLGNvbXBvbmVudHM6aX09dCx7cGFkZGluZ1NsaWRlcjpzLHNwYWNpbmdTbGlkZXI6cn09aSxvPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRTZXJpZXNPcHRpb24oZSsiLnBhZGRpbmciLHRoaXMuZ2V0U2VsZWN0ZWRTZXJpZXMoKSk7cy5zZXRMYWJlbCh0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgicGFkZGluZyIpKS5zZXRNaW5WYWx1ZSgwKS5zZXRNYXhWYWx1ZSgxMCkuc2V0VGV4dEZpZWxkV2lkdGgoNDUpLnNldFZhbHVlKCIiK28pLm9uVmFsdWVDaGFuZ2UodD0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldFNlcmllc09wdGlvbihlKyIucGFkZGluZyIsdCx0aGlzLmdldFNlbGVjdGVkU2VyaWVzKCkpKTtjb25zdCBuPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRTZXJpZXNPcHRpb24oZSsiLmdhcCIsdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKTtyLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJzcGFjaW5nIikpLnNldE1pblZhbHVlKDApLnNldE1heFZhbHVlKDEwKS5zZXRUZXh0RmllbGRXaWR0aCg0NSkuc2V0VmFsdWUoIiIrbikub25WYWx1ZUNoYW5nZSh0PT50aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0U2VyaWVzT3B0aW9uKGUrIi5nYXAiLHQsdGhpcy5nZXRTZWxlY3RlZFNlcmllcygpKSl9fX1QZS5URU1QTEFURT0nPGRpdj5cbiAgICAgICAgICAgIDxhZy1ncm91cC1jb21wb25lbnQgcmVmPSJncm91cFNwYWNpbmciPlxuICAgICAgICAgICAgICAgIDxhZy1zbGlkZXIgcmVmPSJncm91cFBhZGRpbmdTbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgICAgIDxhZy1zbGlkZXIgcmVmPSJncm91cFNwYWNpbmdTbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgPC9hZy1ncm91cC1jb21wb25lbnQ+XG4gICAgICAgICAgICA8YWctZ3JvdXAtY29tcG9uZW50IHJlZj0idGlsZVNwYWNpbmciPlxuICAgICAgICAgICAgICAgIDxhZy1zbGlkZXIgcmVmPSJ0aWxlUGFkZGluZ1NsaWRlciI+PC9hZy1zbGlkZXI+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9InRpbGVTcGFjaW5nU2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgIDwvYWctZ3JvdXAtY29tcG9uZW50PlxuICAgICAgICA8L2Rpdj4nLEFlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImdyb3VwU3BhY2luZyIpXSxQZS5wcm90b3R5cGUsImdyb3VwU3BhY2luZyIsdm9pZCAwKSxBZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJncm91cFBhZGRpbmdTbGlkZXIiKV0sUGUucHJvdG90eXBlLCJncm91cFBhZGRpbmdTbGlkZXIiLHZvaWQgMCksQWUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZ3JvdXBTcGFjaW5nU2xpZGVyIildLFBlLnByb3RvdHlwZSwiZ3JvdXBTcGFjaW5nU2xpZGVyIix2b2lkIDApLEFlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoInRpbGVQYWRkaW5nU2xpZGVyIildLFBlLnByb3RvdHlwZSwidGlsZVBhZGRpbmdTbGlkZXIiLHZvaWQgMCksQWUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgidGlsZVNwYWNpbmdTbGlkZXIiKV0sUGUucHJvdG90eXBlLCJ0aWxlU3BhY2luZ1NsaWRlciIsdm9pZCAwKSxBZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sUGUucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxBZShbcy5Qb3N0Q29uc3RydWN0XSxQZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBNZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBMZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKHtjaGFydENvbnRyb2xsZXI6ZSxjaGFydE9wdGlvbnNTZXJ2aWNlOnQsc2VyaWVzVHlwZTppLGlzRXhwYW5kZWRPbkluaXQ6cz0hMX0pe3N1cGVyKCksdGhpcy5hY3RpdmVQYW5lbHM9W10sdGhpcy53aWRnZXRGdW5jcz17bGluZVdpZHRoOigpPT50aGlzLmluaXRTdHJva2VXaWR0aCgibGluZVdpZHRoIiksc3Ryb2tlV2lkdGg6KCk9PnRoaXMuaW5pdFN0cm9rZVdpZHRoKCJzdHJva2VXaWR0aCIpLGxpbmVDb2xvcjooKT0+dGhpcy5pbml0TGluZUNvbG9yKCksbGluZURhc2g6KCk9PnRoaXMuaW5pdExpbmVEYXNoKCksbGluZU9wYWNpdHk6KCk9PnRoaXMuaW5pdExpbmVPcGFjaXR5KCksZmlsbE9wYWNpdHk6KCk9PnRoaXMuaW5pdEZpbGxPcGFjaXR5KCksbWFya2VyczooKT0+dGhpcy5pbml0TWFya2VycygpLGxhYmVsczooKT0+dGhpcy5pbml0TGFiZWxzKCksc2hhZG93OigpPT50aGlzLmluaXRTaGFkb3coKSx0b29sdGlwczooKT0+dGhpcy5pbml0VG9vbHRpcHMoKSxiaW5zOigpPT50aGlzLmluaXRCaW5zKCksd2hpc2tlcnM6KCk9PnRoaXMuaW5pdFdoaXNrZXJzKCksY2FwczooKT0+dGhpcy5pbml0Q2FwcygpLGNvbm5lY3RvckxpbmU6KCk9PnRoaXMuaW5pdENvbm5lY3RvckxpbmUoKSxzZXJpZXNJdGVtczooKT0+dGhpcy5pbml0U2VyaWVzSXRlbXNQYW5lbCgpLHRpbGVTcGFjaW5nOigpPT50aGlzLmluaXRUaWxlU3BhY2luZ1BhbmVsKCl9LHRoaXMuc2VyaWVzV2lkZ2V0TWFwcGluZ3M9e2NvbHVtbjpbInRvb2x0aXBzIiwic3Ryb2tlV2lkdGgiLCJsaW5lRGFzaCIsImxpbmVPcGFjaXR5IiwiZmlsbE9wYWNpdHkiLCJsYWJlbHMiLCJzaGFkb3ciXSxiYXI6WyJ0b29sdGlwcyIsInN0cm9rZVdpZHRoIiwibGluZURhc2giLCJsaW5lT3BhY2l0eSIsImZpbGxPcGFjaXR5IiwibGFiZWxzIiwic2hhZG93Il0scGllOlsidG9vbHRpcHMiLCJzdHJva2VXaWR0aCIsImxpbmVPcGFjaXR5IiwiZmlsbE9wYWNpdHkiLCJsYWJlbHMiLCJzaGFkb3ciXSxkb251dDpbInRvb2x0aXBzIiwic3Ryb2tlV2lkdGgiLCJsaW5lT3BhY2l0eSIsImZpbGxPcGFjaXR5IiwibGFiZWxzIiwic2hhZG93Il0sbGluZTpbInRvb2x0aXBzIiwibGluZVdpZHRoIiwibGluZURhc2giLCJsaW5lT3BhY2l0eSIsIm1hcmtlcnMiLCJsYWJlbHMiXSxzY2F0dGVyOlsidG9vbHRpcHMiLCJtYXJrZXJzIiwibGFiZWxzIl0sYnViYmxlOlsidG9vbHRpcHMiLCJtYXJrZXJzIiwibGFiZWxzIl0sYXJlYTpbInRvb2x0aXBzIiwibGluZVdpZHRoIiwibGluZURhc2giLCJsaW5lT3BhY2l0eSIsImZpbGxPcGFjaXR5IiwibWFya2VycyIsImxhYmVscyIsInNoYWRvdyJdLGhpc3RvZ3JhbTpbInRvb2x0aXBzIiwiYmlucyIsInN0cm9rZVdpZHRoIiwibGluZURhc2giLCJsaW5lT3BhY2l0eSIsImZpbGxPcGFjaXR5IiwibGFiZWxzIiwic2hhZG93Il0sInJhZGlhbC1jb2x1bW4iOlsidG9vbHRpcHMiLCJzdHJva2VXaWR0aCIsImxpbmVEYXNoIiwibGluZU9wYWNpdHkiLCJmaWxsT3BhY2l0eSIsImxhYmVscyJdLCJyYWRpYWwtYmFyIjpbInRvb2x0aXBzIiwic3Ryb2tlV2lkdGgiLCJsaW5lRGFzaCIsImxpbmVPcGFjaXR5IiwiZmlsbE9wYWNpdHkiLCJsYWJlbHMiXSwicmFkYXItbGluZSI6WyJ0b29sdGlwcyIsInN0cm9rZVdpZHRoIiwibGluZURhc2giLCJsaW5lT3BhY2l0eSIsIm1hcmtlcnMiLCJsYWJlbHMiXSwicmFkYXItYXJlYSI6WyJ0b29sdGlwcyIsInN0cm9rZVdpZHRoIiwibGluZURhc2giLCJsaW5lT3BhY2l0eSIsImZpbGxPcGFjaXR5IiwibWFya2VycyIsImxhYmVscyJdLG5pZ2h0aW5nYWxlOlsidG9vbHRpcHMiLCJzdHJva2VXaWR0aCIsImxpbmVEYXNoIiwibGluZU9wYWNpdHkiLCJmaWxsT3BhY2l0eSIsImxhYmVscyJdLCJib3gtcGxvdCI6WyJ0b29sdGlwcyIsInN0cm9rZVdpZHRoIiwibGluZURhc2giLCJsaW5lT3BhY2l0eSIsImZpbGxPcGFjaXR5Iiwid2hpc2tlcnMiLCJjYXBzIl0sInJhbmdlLWJhciI6WyJ0b29sdGlwcyIsInN0cm9rZVdpZHRoIiwibGluZURhc2giLCJsaW5lT3BhY2l0eSIsImZpbGxPcGFjaXR5IiwibGFiZWxzIl0sInJhbmdlLWFyZWEiOlsidG9vbHRpcHMiLCJsaW5lV2lkdGgiLCJsaW5lRGFzaCIsImxpbmVPcGFjaXR5IiwiZmlsbE9wYWNpdHkiLCJtYXJrZXJzIiwibGFiZWxzIiwic2hhZG93Il0sdHJlZW1hcDpbInRvb2x0aXBzIiwidGlsZVNwYWNpbmciXSxzdW5idXJzdDpbInRvb2x0aXBzIl0saGVhdG1hcDpbInRvb2x0aXBzIiwibGFiZWxzIiwibGluZUNvbG9yIiwibGluZVdpZHRoIiwibGluZU9wYWNpdHkiXSx3YXRlcmZhbGw6WyJ0b29sdGlwcyIsImNvbm5lY3RvckxpbmUiLCJzZXJpZXNJdGVtcyJdfSx0aGlzLmNoYXJ0Q29udHJvbGxlcj1lLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZT10LHRoaXMuc2VyaWVzVHlwZT1pfHx0aGlzLmdldENoYXJ0U2VyaWVzVHlwZSgpLHRoaXMuaXNFeHBhbmRlZE9uSW5pdD1zfWluaXQoKXt0aGlzLnNldFRlbXBsYXRlKExlLlRFTVBMQVRFLHtzZXJpZXNHcm91cDp7Y3NzSWRlbnRpZmllcjoiY2hhcnRzLWZvcm1hdC10b3AtbGV2ZWwiLGRpcmVjdGlvbjoidmVydGljYWwifX0pLHRoaXMuc2VyaWVzR3JvdXAuc2V0VGl0bGUodGhpcy50cmFuc2xhdGUoInNlcmllcyIpKS50b2dnbGVHcm91cEV4cGFuZCh0aGlzLmlzRXhwYW5kZWRPbkluaXQpLmhpZGVFbmFibGVkQ2hlY2tib3goITApLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY2hhcnRDb250cm9sbGVyLFYuRVZFTlRfQ0hBUlRfU0VSSUVTX0NIQVJUX1RZUEVfQ0hBTkdFRCx0aGlzLnJlZnJlc2hXaWRnZXRzLmJpbmQodGhpcykpLHRoaXMucmVmcmVzaFdpZGdldHMoKX1yZWZyZXNoV2lkZ2V0cygpe3RoaXMuZGVzdHJveUFjdGl2ZVBhbmVscygpO3RoaXMuY2hhcnRDb250cm9sbGVyLmdldENoYXJ0UHJveHkoKS5nZXRDaGFydCgpLndhaXRGb3JVcGRhdGUoKS50aGVuKCgpPT57dmFyIGU7IXRoaXMuaXNBbGl2ZSgpfHwodGhpcy5jaGFydENvbnRyb2xsZXIuaXNDb21ib0NoYXJ0KCkmJih0aGlzLnVwZGF0ZVNlcmllc1R5cGUoKSx0aGlzLmluaXRTZXJpZXNTZWxlY3QoKSksKG51bGwhPT0oZT10aGlzLnNlcmllc1dpZGdldE1hcHBpbmdzW3RoaXMuc2VyaWVzVHlwZV0pJiZ2b2lkIDAhPT1lP2U6W10pLmZvckVhY2goZT0+dGhpcy53aWRnZXRGdW5jc1tlXSgpKSl9KS5jYXRjaChlPT5jb25zb2xlLmVycm9yKCJBRyBHcmlkIC0gY2hhcnQgcmVuZGVyaW5nIGZhaWxlZCIsZSkpfWluaXRTZXJpZXNTZWxlY3QoKXtjb25zdCBlPXRoaXMuc2VyaWVzR3JvdXAuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHMuQWdTZWxlY3QpO2Uuc2V0TGFiZWwodGhpcy50cmFuc2xhdGUoInNlcmllc1R5cGUiKSkuc2V0TGFiZWxBbGlnbm1lbnQoImxlZnQiKS5zZXRMYWJlbFdpZHRoKCJmbGV4Iikuc2V0SW5wdXRXaWR0aCgiZmxleCIpLmFkZE9wdGlvbnModGhpcy5nZXRTZXJpZXNTZWxlY3RPcHRpb25zKCkpLnNldFZhbHVlKCIiK3RoaXMuc2VyaWVzVHlwZSkub25WYWx1ZUNoYW5nZShlPT57dGhpcy5zZXJpZXNUeXBlPWUsdGhpcy5yZWZyZXNoV2lkZ2V0cygpfSksdGhpcy5zZXJpZXNHcm91cC5hZGRJdGVtKGUpLHRoaXMuYWN0aXZlUGFuZWxzLnB1c2goZSl9aW5pdFRvb2x0aXBzKCl7Y29uc3QgZT10aGlzLmNyZWF0ZUJlYW4obmV3IHMuQWdUb2dnbGVCdXR0b24pO2Uuc2V0TGFiZWwodGhpcy50cmFuc2xhdGUoInRvb2x0aXBzIikpLnNldExhYmVsQWxpZ25tZW50KCJsZWZ0Iikuc2V0TGFiZWxXaWR0aCgiZmxleCIpLnNldElucHV0V2lkdGgoImZsZXgiKS5zZXRWYWx1ZSh0aGlzLmdldFNlcmllc09wdGlvbigidG9vbHRpcC5lbmFibGVkIil8fCExKS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuc2V0U2VyaWVzT3B0aW9uKCJ0b29sdGlwLmVuYWJsZWQiLGUpKSx0aGlzLmFkZFdpZGdldChlKX1pbml0TGluZUNvbG9yKCl7Y29uc3QgZT10aGlzLmdldFNlcmllc09wdGlvbigic3Ryb2tlIiksdD10aGlzLmNyZWF0ZUJlYW4obmV3IENlKTt0LnNldExhYmVsKHRoaXMudHJhbnNsYXRlKCJzdHJva2VDb2xvciIpKS5zZXRMYWJlbFdpZHRoKCJmbGV4Iikub25WYWx1ZUNoYW5nZShlPT50aGlzLnNldFNlcmllc09wdGlvbigic3Ryb2tlIixlKSksZSYmdC5zZXRWYWx1ZShlKSx0aGlzLmFkZFdpZGdldCh0KX1pbml0U3Ryb2tlV2lkdGgoZSl7dmFyIHQ7Y29uc3QgaT1udWxsIT09KHQ9dGhpcy5nZXRTZXJpZXNPcHRpb24oInN0cm9rZVdpZHRoIikpJiZ2b2lkIDAhPT10P3Q6MCxyPXRoaXMuY3JlYXRlQmVhbihuZXcgcy5BZ1NsaWRlcik7ci5zZXRMYWJlbCh0aGlzLnRyYW5zbGF0ZShlKSkuc2V0TWF4VmFsdWUoR2UoaSwxMCkpLnNldFRleHRGaWVsZFdpZHRoKDQ1KS5zZXRWYWx1ZSgiIitpKS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuc2V0U2VyaWVzT3B0aW9uKCJzdHJva2VXaWR0aCIsZSkpLHRoaXMuYWRkV2lkZ2V0KHIpfWluaXRMaW5lRGFzaCgpe2NvbnN0IGU9dGhpcy5nZXRTZXJpZXNPcHRpb24oImxpbmVEYXNoIiksdD1lP2VbMF06MCxpPXRoaXMuY3JlYXRlQmVhbihuZXcgcy5BZ1NsaWRlcik7aS5zZXRMYWJlbCh0aGlzLnRyYW5zbGF0ZSgibGluZURhc2giKSkuc2V0TWF4VmFsdWUoR2UodCwzMCkpLnNldFRleHRGaWVsZFdpZHRoKDQ1KS5zZXRWYWx1ZSgiIit0KS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuc2V0U2VyaWVzT3B0aW9uKCJsaW5lRGFzaCIsW2VdKSksdGhpcy5hZGRXaWRnZXQoaSl9aW5pdExpbmVPcGFjaXR5KCl7dmFyIGU7Y29uc3QgdD1udWxsIT09KGU9dGhpcy5nZXRTZXJpZXNPcHRpb24oInN0cm9rZU9wYWNpdHkiKSkmJnZvaWQgMCE9PWU/ZTowLGk9dGhpcy5jcmVhdGVCZWFuKG5ldyBzLkFnU2xpZGVyKTtpLnNldExhYmVsKHRoaXMudHJhbnNsYXRlKCJzdHJva2VPcGFjaXR5IikpLnNldFN0ZXAoLjA1KS5zZXRNYXhWYWx1ZShHZSh0LDEpKS5zZXRUZXh0RmllbGRXaWR0aCg0NSkuc2V0VmFsdWUoIiIrdCkub25WYWx1ZUNoYW5nZShlPT50aGlzLnNldFNlcmllc09wdGlvbigic3Ryb2tlT3BhY2l0eSIsZSkpLHRoaXMuYWRkV2lkZ2V0KGkpfWluaXRGaWxsT3BhY2l0eSgpe3ZhciBlO2NvbnN0IHQ9bnVsbCE9PShlPXRoaXMuZ2V0U2VyaWVzT3B0aW9uKCJmaWxsT3BhY2l0eSIpKSYmdm9pZCAwIT09ZT9lOjAsaT10aGlzLmNyZWF0ZUJlYW4obmV3IHMuQWdTbGlkZXIpO2kuc2V0TGFiZWwodGhpcy50cmFuc2xhdGUoImZpbGxPcGFjaXR5IikpLnNldFN0ZXAoLjA1KS5zZXRNYXhWYWx1ZShHZSh0LDEpKS5zZXRUZXh0RmllbGRXaWR0aCg0NSkuc2V0VmFsdWUoIiIrdCkub25WYWx1ZUNoYW5nZShlPT50aGlzLnNldFNlcmllc09wdGlvbigiZmlsbE9wYWNpdHkiLGUpKSx0aGlzLmFkZFdpZGdldChpKX1pbml0TGFiZWxzKCl7Y29uc3QgZT1tKHRoaXMuc2VyaWVzVHlwZSksdD1lPyJjYWxsb3V0TGFiZWwiOiJsYWJlbCIsaT1wZSh7bGFiZWxOYW1lOmU/dGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoImNhbGxvdXRMYWJlbHMiKTp0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgibGFiZWxzIiksY2hhcnRPcHRpb25zU2VydmljZTp0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UsZ2V0U2VsZWN0ZWRTZXJpZXM6KCk9PnRoaXMuc2VyaWVzVHlwZSxzZXJpZXNPcHRpb25MYWJlbFByb3BlcnR5OnR9KSxyPXRoaXMuY3JlYXRlQmVhbihuZXcgVShpKSk7aWYoZSl7Y29uc3QgZT10aGlzLmNyZWF0ZUJlYW4obmV3IFNlKHRoaXMuY2hhcnRPcHRpb25zU2VydmljZSwoKT0+dGhpcy5zZXJpZXNUeXBlKSk7ci5hZGRDb21wVG9QYW5lbChlKSx0aGlzLmFjdGl2ZVBhbmVscy5wdXNoKGUpfWlmKHRoaXMuYWRkV2lkZ2V0KHIpLGUpe2NvbnN0IGU9cGUoe2xhYmVsTmFtZTp0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgic2VjdG9yTGFiZWxzIiksY2hhcnRPcHRpb25zU2VydmljZTp0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UsZ2V0U2VsZWN0ZWRTZXJpZXM6KCk9PnRoaXMuc2VyaWVzVHlwZSxzZXJpZXNPcHRpb25MYWJlbFByb3BlcnR5OiJzZWN0b3JMYWJlbCJ9KSx0PXRoaXMuY3JlYXRlQmVhbihuZXcgVShlKSksaT10aGlzLmdldFNlY3RvckxhYmVsUG9zaXRpb25SYXRpbygpO3QuYWRkQ29tcFRvUGFuZWwoaSksdGhpcy5hZGRXaWRnZXQodCl9aWYoInJhbmdlLWJhciI9PT10aGlzLnNlcmllc1R5cGUpe2NvbnN0IGU9W3t2YWx1ZToiaW5zaWRlIix0ZXh0OnRoaXMudHJhbnNsYXRlKCJpbnNpZGUiKX0se3ZhbHVlOiJvdXRzaWRlIix0ZXh0OnRoaXMudHJhbnNsYXRlKCJvdXRzaWRlIil9XSx0PXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRTZXJpZXNPcHRpb24oImxhYmVsLnBsYWNlbWVudCIsdGhpcy5zZXJpZXNUeXBlKSxpPXIuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHMuQWdTZWxlY3QpO2kuc2V0TGFiZWwodGhpcy50cmFuc2xhdGUoImxhYmVsUGxhY2VtZW50IikpLnNldExhYmVsQWxpZ25tZW50KCJsZWZ0Iikuc2V0TGFiZWxXaWR0aCgiZmxleCIpLnNldElucHV0V2lkdGgoImZsZXgiKS5hZGRPcHRpb25zKGUpLnNldFZhbHVlKHQpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldFNlcmllc09wdGlvbigibGFiZWwucGxhY2VtZW50IixlLHRoaXMuc2VyaWVzVHlwZSkpLHIuYWRkQ29tcFRvUGFuZWwoaSksdGhpcy5hY3RpdmVQYW5lbHMucHVzaChpKTtjb25zdCBvPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRTZXJpZXNPcHRpb24oImxhYmVsLnBhZGRpbmciLHRoaXMuc2VyaWVzVHlwZSksbj1yLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBzLkFnU2xpZGVyKTtuLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJwYWRkaW5nIikpLnNldE1heFZhbHVlKEdlKG8sMjAwKSkuc2V0VmFsdWUoIiIrbykuc2V0VGV4dEZpZWxkV2lkdGgoNDUpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldFNlcmllc09wdGlvbigibGFiZWwucGFkZGluZyIsZSx0aGlzLnNlcmllc1R5cGUpKSxyLmFkZENvbXBUb1BhbmVsKG4pLHRoaXMuYWN0aXZlUGFuZWxzLnB1c2gobil9fWdldFNlY3RvckxhYmVsUG9zaXRpb25SYXRpbygpe2NvbnN0IGU9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldFNlcmllc09wdGlvbigic2VjdG9yTGFiZWwucG9zaXRpb25SYXRpbyIsdGhpcy5zZXJpZXNUeXBlKTtyZXR1cm4gdGhpcy5jcmVhdGVCZWFuKG5ldyBzLkFnU2xpZGVyKS5zZXRMYWJlbCh0aGlzLnRyYW5zbGF0ZSgicG9zaXRpb25SYXRpbyIpKS5zZXRTdGVwKC4wNSkuc2V0TWF4VmFsdWUoR2UoZSwxKSkuc2V0VGV4dEZpZWxkV2lkdGgoNDUpLnNldFZhbHVlKCIiK2UpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldFNlcmllc09wdGlvbigic2VjdG9yTGFiZWwucG9zaXRpb25SYXRpbyIsZSx0aGlzLnNlcmllc1R5cGUpKX1pbml0U2hhZG93KCl7Y29uc3QgZT10aGlzLmNyZWF0ZUJlYW4obmV3IHVlKHRoaXMuY2hhcnRPcHRpb25zU2VydmljZSwoKT0+dGhpcy5zZXJpZXNUeXBlKSk7dGhpcy5hZGRXaWRnZXQoZSl9aW5pdE1hcmtlcnMoKXtjb25zdCBlPXRoaXMuY3JlYXRlQmVhbihuZXcgbWUodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLCgpPT50aGlzLnNlcmllc1R5cGUpKTt0aGlzLmFkZFdpZGdldChlKX1pbml0Qmlucygpe3ZhciBlO2NvbnN0IHQ9KG51bGwhPT0oZT10aGlzLmdldFNlcmllc09wdGlvbigiYmlucyIpKSYmdm9pZCAwIT09ZT9lOnRoaXMuZ2V0U2VyaWVzT3B0aW9uKCJjYWxjdWxhdGVkQmlucyIsITApKS5sZW5ndGgsaT10aGlzLmNyZWF0ZUJlYW4obmV3IHMuQWdTbGlkZXIpO2kuc2V0TGFiZWwodGhpcy50cmFuc2xhdGUoImhpc3RvZ3JhbUJpbkNvdW50IikpLnNldE1pblZhbHVlKDApLnNldE1heFZhbHVlKEdlKHQsMjApKS5zZXRUZXh0RmllbGRXaWR0aCg0NSkuc2V0VmFsdWUoIiIrdCkub25WYWx1ZUNoYW5nZShlPT50aGlzLnNldFNlcmllc09wdGlvbigiYmluQ291bnQiLGUpKSx0aGlzLmFkZFdpZGdldChpKX1pbml0V2hpc2tlcnMoKXtjb25zdCBlPXRoaXMuY3JlYXRlQmVhbihuZXcgVGUodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLCgpPT50aGlzLnNlcmllc1R5cGUpKTt0aGlzLmFkZFdpZGdldChlKX1pbml0Q2Fwcygpe2NvbnN0IGU9dGhpcy5jcmVhdGVCZWFuKG5ldyBiZSh0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UsKCk9PnRoaXMuc2VyaWVzVHlwZSkpO3RoaXMuYWRkV2lkZ2V0KGUpfWluaXRDb25uZWN0b3JMaW5lKCl7Y29uc3QgZT10aGlzLmNyZWF0ZUJlYW4obmV3IFJlKHRoaXMuY2hhcnRPcHRpb25zU2VydmljZSwoKT0+dGhpcy5zZXJpZXNUeXBlKSk7dGhpcy5hZGRXaWRnZXQoZSl9aW5pdFNlcmllc0l0ZW1zUGFuZWwoKXtjb25zdCBlPXRoaXMuY3JlYXRlQmVhbihuZXcgT2UodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLCgpPT50aGlzLnNlcmllc1R5cGUpKTt0aGlzLmFkZFdpZGdldChlKX1pbml0VGlsZVNwYWNpbmdQYW5lbCgpe2NvbnN0IGU9dGhpcy5jcmVhdGVCZWFuKG5ldyBQZSh0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UsKCk9PnRoaXMuc2VyaWVzVHlwZSkpO3RoaXMuYWRkV2lkZ2V0KGUpfWFkZFdpZGdldChlKXt0aGlzLnNlcmllc0dyb3VwLmFkZEl0ZW0oZSksdGhpcy5hY3RpdmVQYW5lbHMucHVzaChlKX1nZXRTZXJpZXNPcHRpb24oZSx0KXtyZXR1cm4gdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldFNlcmllc09wdGlvbihlLHRoaXMuc2VyaWVzVHlwZSx0KX1zZXRTZXJpZXNPcHRpb24oZSx0KXt0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0U2VyaWVzT3B0aW9uKGUsdCx0aGlzLnNlcmllc1R5cGUpfWdldENoYXJ0U2VyaWVzVHlwZSgpe2lmKDA9PT10aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRTZXJpZXNDaGFydFR5cGVzKCkubGVuZ3RoKXJldHVybiJjb2x1bW4iO2NvbnN0IGU9dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0U2VyaWVzQ2hhcnRUeXBlcygpWzBdLmNoYXJ0VHlwZTtyZXR1cm4iY29sdW1uTGluZUNvbWJvIj09PWU/ImNvbHVtbiI6ImFyZWFDb2x1bW5Db21ibyI9PT1lPyJhcmVhIjpnKGUpfWdldFNlcmllc1NlbGVjdE9wdGlvbnMoKXt0aGlzLnNlcmllc1NlbGVjdE9wdGlvbnN8fCh0aGlzLnNlcmllc1NlbGVjdE9wdGlvbnM9bmV3IE1hcChbWyJhcmVhIix7dmFsdWU6ImFyZWEiLHRleHQ6dGhpcy50cmFuc2xhdGUoImFyZWEiLCJBcmVhIil9XSxbImJhciIse3ZhbHVlOiJiYXIiLHRleHQ6dGhpcy50cmFuc2xhdGUoImJhciIsIkJhciIpfV0sWyJjb2x1bW4iLHt2YWx1ZToiY29sdW1uIix0ZXh0OnRoaXMudHJhbnNsYXRlKCJjb2x1bW4iLCJDb2x1bW4iKX1dLFsibGluZSIse3ZhbHVlOiJsaW5lIix0ZXh0OnRoaXMudHJhbnNsYXRlKCJsaW5lIiwiTGluZSIpfV0sWyJzY2F0dGVyIix7dmFsdWU6InNjYXR0ZXIiLHRleHQ6dGhpcy50cmFuc2xhdGUoInNjYXR0ZXIiLCJTY2F0dGVyIil9XSxbImhpc3RvZ3JhbSIse3ZhbHVlOiJoaXN0b2dyYW0iLHRleHQ6dGhpcy50cmFuc2xhdGUoImhpc3RvZ3JhbSIsIkhpc3RvZ3JhbSIpfV0sWyJyYWRpYWwtY29sdW1uIix7dmFsdWU6InJhZGlhbC1jb2x1bW4iLHRleHQ6dGhpcy50cmFuc2xhdGUoInJhZGlhbENvbHVtbiIsIlJhZGlhbCBDb2x1bW4iKX1dLFsicmFkaWFsLWJhciIse3ZhbHVlOiJyYWRpYWwtYmFyIix0ZXh0OnRoaXMudHJhbnNsYXRlKCJyYWRpYWxCYXIiLCJSYWRpYWwgQmFyIil9XSxbInJhZGFyLWxpbmUiLHt2YWx1ZToicmFkYXItbGluZSIsdGV4dDp0aGlzLnRyYW5zbGF0ZSgicmFkYXJMaW5lIiwiUmFkYXIgTGluZSIpfV0sWyJyYWRhci1hcmVhIix7dmFsdWU6InJhZGFyLWFyZWEiLHRleHQ6dGhpcy50cmFuc2xhdGUoInJhZGFyQXJlYSIsIlJhZGFyIEFyZWEiKX1dLFsibmlnaHRpbmdhbGUiLHt2YWx1ZToibmlnaHRpbmdhbGUiLHRleHQ6dGhpcy50cmFuc2xhdGUoIm5pZ2h0aW5nYWxlIiwiTmlnaHRpbmdhbGUiKX1dLFsicmFuZ2UtYmFyIix7dmFsdWU6InJhbmdlLWJhciIsdGV4dDp0aGlzLnRyYW5zbGF0ZSgicmFuZ2VCYXIiLCJSYW5nZSBCYXIiKX1dLFsicmFuZ2UtYXJlYSIse3ZhbHVlOiJyYW5nZS1hcmVhIix0ZXh0OnRoaXMudHJhbnNsYXRlKCJyYW5nZUFyZWEiLCJSYW5nZSBBcmVhIil9XSxbInRyZWVtYXAiLHt2YWx1ZToidHJlZW1hcCIsdGV4dDp0aGlzLnRyYW5zbGF0ZSgidHJlZW1hcCIsIlRyZWVtYXAiKX1dLFsic3VuYnVyc3QiLHt2YWx1ZToic3VuYnVyc3QiLHRleHQ6dGhpcy50cmFuc2xhdGUoInN1bmJ1cnN0IiwiU3VuYnVyc3QiKX1dLFsid2F0ZXJmYWxsIix7dmFsdWU6IndhdGVyZmFsbCIsdGV4dDp0aGlzLnRyYW5zbGF0ZSgid2F0ZXJmYWxsIiwiV2F0ZXJmYWxsIil9XSxbImJveC1wbG90Iix7dmFsdWU6ImJveC1wbG90Iix0ZXh0OnRoaXMudHJhbnNsYXRlKCJib3hQbG90IiwiQm94IFBsb3QiKX1dLFsicGllIix7dmFsdWU6InBpZSIsdGV4dDp0aGlzLnRyYW5zbGF0ZSgicGllIiwiUGllIil9XSxbImRvbnV0Iix7dmFsdWU6ImRvbnV0Iix0ZXh0OnRoaXMudHJhbnNsYXRlKCJkb251dCIsIkRvbnV0Iil9XV0pKTtjb25zdCBlPW5ldyBTZXQ7cmV0dXJuIHRoaXMuY2hhcnRDb250cm9sbGVyLmdldEFjdGl2ZVNlcmllc0NoYXJ0VHlwZXMoKS5mb3JFYWNoKHQ9Pntjb25zdCBpPWcodC5jaGFydFR5cGUpO2UuYWRkKHRoaXMuc2VyaWVzU2VsZWN0T3B0aW9ucy5nZXQoaSkpfSksQXJyYXkuZnJvbShlKX11cGRhdGVTZXJpZXNUeXBlKCl7Y29uc3QgZT10aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRBY3RpdmVTZXJpZXNDaGFydFR5cGVzKCkubWFwKGU9PmcoZS5jaGFydFR5cGUpKTshZS5pbmNsdWRlcyh0aGlzLnNlcmllc1R5cGUpJiZlLmxlbmd0aD4wJiYodGhpcy5zZXJpZXNUeXBlPWVbMF0pfXRyYW5zbGF0ZShlLHQpe3JldHVybiB0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZShlLHQpfWRlc3Ryb3lBY3RpdmVQYW5lbHMoKXt0aGlzLmFjdGl2ZVBhbmVscy5mb3JFYWNoKGU9PntzLl8ucmVtb3ZlRnJvbVBhcmVudChlLmdldEd1aSgpKSx0aGlzLmRlc3Ryb3lCZWFuKGUpfSl9ZGVzdHJveSgpe3RoaXMuZGVzdHJveUFjdGl2ZVBhbmVscygpLHN1cGVyLmRlc3Ryb3koKX19TGUuVEVNUExBVEU9JzxkaXY+XG4gICAgICAgICAgICA8YWctZ3JvdXAtY29tcG9uZW50IHJlZj0ic2VyaWVzR3JvdXAiPlxuICAgICAgICAgICAgPC9hZy1ncm91cC1jb21wb25lbnQ+XG4gICAgICAgIDwvZGl2PicsTWUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgic2VyaWVzR3JvdXAiKV0sTGUucHJvdG90eXBlLCJzZXJpZXNHcm91cCIsdm9pZCAwKSxNZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sTGUucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxNZShbcy5Qb3N0Q29uc3RydWN0XSxMZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBGZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBJZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKHtjaGFydE9wdGlvbnNTZXJ2aWNlOmUsaXNFeHBhbmRlZE9uSW5pdDp0PSExfSl7c3VwZXIoKSx0aGlzLmFjdGl2ZVBhbmVscz1bXSx0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2U9ZSx0aGlzLmlzRXhwYW5kZWRPbkluaXQ9dH1pbml0KCl7dGhpcy5zZXRUZW1wbGF0ZShJZS5URU1QTEFURSx7bGVnZW5kR3JvdXA6e2Nzc0lkZW50aWZpZXI6ImNoYXJ0cy1mb3JtYXQtdG9wLWxldmVsIixkaXJlY3Rpb246InZlcnRpY2FsIn19KSx0aGlzLmluaXRMZWdlbmRHcm91cCgpLHRoaXMuaW5pdExlZ2VuZFBvc2l0aW9uKCksdGhpcy5pbml0TGVnZW5kR3JhZGllbnQoKSx0aGlzLmluaXRMZWdlbmRTcGFjaW5nKCksdGhpcy5pbml0TGFiZWxQYW5lbCgpfWluaXRMZWdlbmRHcm91cCgpe3RoaXMubGVnZW5kR3JvdXAuc2V0VGl0bGUodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoImxlZ2VuZCIpKS5oaWRlRW5hYmxlZENoZWNrYm94KCExKS5zZXRFbmFibGVkKHRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRDaGFydE9wdGlvbigiZ3JhZGllbnRMZWdlbmQuZW5hYmxlZCIpfHwhMSkudG9nZ2xlR3JvdXBFeHBhbmQodGhpcy5pc0V4cGFuZGVkT25Jbml0KS5vbkVuYWJsZUNoYW5nZShlPT57dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldENoYXJ0T3B0aW9uKCJncmFkaWVudExlZ2VuZC5lbmFibGVkIixlKSx0aGlzLmxlZ2VuZEdyb3VwLnRvZ2dsZUdyb3VwRXhwYW5kKCEwKX0pfWluaXRMZWdlbmRQb3NpdGlvbigpe3RoaXMubGVnZW5kUG9zaXRpb25TZWxlY3Quc2V0TGFiZWwodGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoInBvc2l0aW9uIikpLnNldExhYmVsV2lkdGgoImZsZXgiKS5zZXRJbnB1dFdpZHRoKCJmbGV4IikuYWRkT3B0aW9ucyhbInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCJdLm1hcChlPT4oe3ZhbHVlOmUsdGV4dDp0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZShlKX0pKSkuc2V0VmFsdWUodGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldENoYXJ0T3B0aW9uKCJncmFkaWVudExlZ2VuZC5wb3NpdGlvbiIpKS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRDaGFydE9wdGlvbigiZ3JhZGllbnRMZWdlbmQucG9zaXRpb24iLGUpKX1pbml0TGVnZW5kR3JhZGllbnQoKXt0aGlzLmdyYWRpZW50UmV2ZXJzZUNoZWNrYm94LnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJyZXZlcnNlRGlyZWN0aW9uIikpLnNldExhYmVsV2lkdGgoImZsZXgiKS5zZXRWYWx1ZSh0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0Q2hhcnRPcHRpb24oImdyYWRpZW50TGVnZW5kLnJldmVyc2VPcmRlciIpKS5vblZhbHVlQ2hhbmdlKGU9PnRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRDaGFydE9wdGlvbigiZ3JhZGllbnRMZWdlbmQucmV2ZXJzZU9yZGVyIixlKSk7Y29uc3QgZT0oZSx0LGkscyk9Pnt2YXIgcjtjb25zdCBvPW51bGwhPT0ocj10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0Q2hhcnRPcHRpb24oZSkpJiZ2b2lkIDAhPT1yP3I6MDtpLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKHQpKS5zZXRNYXhWYWx1ZShHZShvLHMpKS5zZXRWYWx1ZSgiIitvKS5zZXRUZXh0RmllbGRXaWR0aCg0NSkub25WYWx1ZUNoYW5nZSh0PT57dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldENoYXJ0T3B0aW9uKGUsdCl9KX07ZSgiZ3JhZGllbnRMZWdlbmQuZ3JhZGllbnQudGhpY2tuZXNzIiwidGhpY2tuZXNzIix0aGlzLmdyYWRpZW50VGhpY2tuZXNzU2xpZGVyLDQwKSxlKCJncmFkaWVudExlZ2VuZC5ncmFkaWVudC5wcmVmZXJyZWRMZW5ndGgiLCJwcmVmZXJyZWRMZW5ndGgiLHRoaXMuZ3JhZGllbnRQcmVmZXJyZWRMZW5ndGhTbGlkZXIsMzAwKX1pbml0TGVnZW5kU3BhY2luZygpe2NvbnN0IGU9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldENoYXJ0T3B0aW9uKCJncmFkaWVudExlZ2VuZC5zcGFjaW5nIik7dGhpcy5sZWdlbmRTcGFjaW5nU2xpZGVyLnNldExhYmVsKHRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKCJzcGFjaW5nIikpLnNldE1heFZhbHVlKEdlKGUsMjAwKSkuc2V0VmFsdWUoIiIrZSkuc2V0VGV4dEZpZWxkV2lkdGgoNDUpLm9uVmFsdWVDaGFuZ2UoZT0+dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldENoYXJ0T3B0aW9uKCJncmFkaWVudExlZ2VuZC5zcGFjaW5nIixlKSl9aW5pdExhYmVsUGFuZWwoKXtjb25zdCBlPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZSx0PXtlbmFibGVkOiEwLHN1cHByZXNzRW5hYmxlZENoZWNrYm94OiEwLGluaXRpYWxGb250OntmYW1pbHk6ZS5nZXRDaGFydE9wdGlvbigiZ3JhZGllbnRMZWdlbmQuc2NhbGUubGFiZWwuZm9udEZhbWlseSIpLHN0eWxlOmUuZ2V0Q2hhcnRPcHRpb24oImdyYWRpZW50TGVnZW5kLnNjYWxlLmxhYmVsLmZvbnRTdHlsZSIpLHdlaWdodDplLmdldENoYXJ0T3B0aW9uKCJncmFkaWVudExlZ2VuZC5zY2FsZS5sYWJlbC5mb250V2VpZ2h0Iiksc2l6ZTplLmdldENoYXJ0T3B0aW9uKCJncmFkaWVudExlZ2VuZC5zY2FsZS5sYWJlbC5mb250U2l6ZSIpLGNvbG9yOmUuZ2V0Q2hhcnRPcHRpb24oImdyYWRpZW50TGVnZW5kLnNjYWxlLmxhYmVsLmNvbG9yIil9LHNldEZvbnQ6ZT0+e2NvbnN0IHQ9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlO2UuZmFtaWx5JiZ0LnNldENoYXJ0T3B0aW9uKCJncmFkaWVudExlZ2VuZC5zY2FsZS5sYWJlbC5mb250RmFtaWx5IixlLmZhbWlseSksZS53ZWlnaHQmJnQuc2V0Q2hhcnRPcHRpb24oImdyYWRpZW50TGVnZW5kLnNjYWxlLmxhYmVsLmZvbnRXZWlnaHQiLGUud2VpZ2h0KSxlLnN0eWxlJiZ0LnNldENoYXJ0T3B0aW9uKCJncmFkaWVudExlZ2VuZC5zY2FsZS5sYWJlbC5mb250U3R5bGUiLGUuc3R5bGUpLGUuc2l6ZSYmdC5zZXRDaGFydE9wdGlvbigiZ3JhZGllbnRMZWdlbmQuc2NhbGUubGFiZWwuZm9udFNpemUiLGUuc2l6ZSksZS5jb2xvciYmdC5zZXRDaGFydE9wdGlvbigiZ3JhZGllbnRMZWdlbmQuc2NhbGUubGFiZWwuY29sb3IiLGUuY29sb3IpfX0saT10aGlzLmNyZWF0ZUJlYW4obmV3IFUodCkpO3RoaXMubGVnZW5kR3JvdXAuYWRkSXRlbShpKSx0aGlzLmFjdGl2ZVBhbmVscy5wdXNoKGkpfWRlc3Ryb3lBY3RpdmVQYW5lbHMoKXt0aGlzLmFjdGl2ZVBhbmVscy5mb3JFYWNoKGU9PntzLl8ucmVtb3ZlRnJvbVBhcmVudChlLmdldEd1aSgpKSx0aGlzLmRlc3Ryb3lCZWFuKGUpfSl9ZGVzdHJveSgpe3RoaXMuZGVzdHJveUFjdGl2ZVBhbmVscygpLHN1cGVyLmRlc3Ryb3koKX19SWUuVEVNUExBVEU9JzxkaXY+XG4gICAgICAgICAgICA8YWctZ3JvdXAtY29tcG9uZW50IHJlZj0ibGVnZW5kR3JvdXAiPlxuICAgICAgICAgICAgICAgIDxhZy1zZWxlY3QgcmVmPSJsZWdlbmRQb3NpdGlvblNlbGVjdCI+PC9hZy1zZWxlY3Q+XG4gICAgICAgICAgICAgICAgPGFnLWNoZWNrYm94IHJlZj0iZ3JhZGllbnRSZXZlcnNlQ2hlY2tib3giPjwvYWctY2hlY2tib3g+XG4gICAgICAgICAgICAgICAgPGFnLXNsaWRlciByZWY9ImdyYWRpZW50VGhpY2tuZXNzU2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8YWctc2xpZGVyIHJlZj0iZ3JhZGllbnRQcmVmZXJyZWRMZW5ndGhTbGlkZXIiPjwvYWctc2xpZGVyPlxuICAgICAgICAgICAgICAgIDxhZy1zbGlkZXIgcmVmPSJsZWdlbmRTcGFjaW5nU2xpZGVyIj48L2FnLXNsaWRlcj5cbiAgICAgICAgICAgIDwvYWctZ3JvdXAtY29tcG9uZW50PlxuICAgICAgICA8L2Rpdj4nLEZlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImxlZ2VuZEdyb3VwIildLEllLnByb3RvdHlwZSwibGVnZW5kR3JvdXAiLHZvaWQgMCksRmUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZ3JhZGllbnRSZXZlcnNlQ2hlY2tib3giKV0sSWUucHJvdG90eXBlLCJncmFkaWVudFJldmVyc2VDaGVja2JveCIsdm9pZCAwKSxGZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJsZWdlbmRQb3NpdGlvblNlbGVjdCIpXSxJZS5wcm90b3R5cGUsImxlZ2VuZFBvc2l0aW9uU2VsZWN0Iix2b2lkIDApLEZlKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImdyYWRpZW50VGhpY2tuZXNzU2xpZGVyIildLEllLnByb3RvdHlwZSwiZ3JhZGllbnRUaGlja25lc3NTbGlkZXIiLHZvaWQgMCksRmUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZ3JhZGllbnRQcmVmZXJyZWRMZW5ndGhTbGlkZXIiKV0sSWUucHJvdG90eXBlLCJncmFkaWVudFByZWZlcnJlZExlbmd0aFNsaWRlciIsdm9pZCAwKSxGZShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJsZWdlbmRTcGFjaW5nU2xpZGVyIildLEllLnByb3RvdHlwZSwibGVnZW5kU3BhY2luZ1NsaWRlciIsdm9pZCAwKSxGZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sSWUucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxGZShbcy5Qb3N0Q29uc3RydWN0XSxJZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBOZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtmdW5jdGlvbiBHZShlLHQpe3JldHVybiBNYXRoLm1heChlLHQpfWNvbnN0IGtlPXtncm91cHM6W3t0eXBlOiJjaGFydCJ9LHt0eXBlOiJsZWdlbmQifSx7dHlwZToic2VyaWVzIn0se3R5cGU6ImF4aXMifSx7dHlwZToibmF2aWdhdG9yIn1dfTtjbGFzcyBfZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoX2UuVEVNUExBVEUpLHRoaXMuY2hhcnRDb250cm9sbGVyPWUsdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlPXQsdGhpcy5wYW5lbHM9W10sdGhpcy5pc0dyb3VwUGFuZWxTaG93bkluU2VyaWVzPShlLHQpPT57dmFyIGkscztpZihbImNoYXJ0IiwibGVnZW5kIiwic2VyaWVzIl0uaW5jbHVkZXMoZSkpcmV0dXJuITA7cmV0dXJuIG51bGwhPT0ocz1udWxsPT09KGk9e2JhcjpbImF4aXMiLCJuYXZpZ2F0b3IiXSxjb2x1bW46WyJheGlzIiwibmF2aWdhdG9yIl0sbGluZTpbImF4aXMiLCJuYXZpZ2F0b3IiXSxhcmVhOlsiYXhpcyIsIm5hdmlnYXRvciJdLHNjYXR0ZXI6WyJheGlzIiwibmF2aWdhdG9yIl0sYnViYmxlOlsiYXhpcyIsIm5hdmlnYXRvciJdLGhpc3RvZ3JhbTpbImF4aXMiLCJuYXZpZ2F0b3IiXSxjYXJ0ZXNpYW46WyJheGlzIiwibmF2aWdhdG9yIl0sInJhZGlhbC1jb2x1bW4iOlsiYXhpcyJdLCJyYWRpYWwtYmFyIjpbImF4aXMiXSwicmFkYXItbGluZSI6WyJheGlzIl0sInJhZGFyLWFyZWEiOlsiYXhpcyJdLG5pZ2h0aW5nYWxlOlsiYXhpcyJdLCJyYW5nZS1iYXIiOlsiYXhpcyIsIm5hdmlnYXRvciJdLCJyYW5nZS1hcmVhIjpbImF4aXMiLCJuYXZpZ2F0b3IiXSx0cmVlbWFwOltdLHN1bmJ1cnN0OltdLGhlYXRtYXA6WyJheGlzIl0sd2F0ZXJmYWxsOlsiYXhpcyIsIm5hdmlnYXRvciJdLCJib3gtcGxvdCI6WyJheGlzIiwibmF2aWdhdG9yIl19W3RdKXx8dm9pZCAwPT09aT92b2lkIDA6aS5pbmNsdWRlcyhlKSkmJnZvaWQgMCE9PXMmJnN9fWluaXQoKXt0aGlzLmNyZWF0ZVBhbmVscygpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY2hhcnRDb250cm9sbGVyLFYuRVZFTlRfQ0hBUlRfVVBEQVRFRCwoKT0+dGhpcy5jcmVhdGVQYW5lbHMoITApKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmNoYXJ0Q29udHJvbGxlcixWLkVWRU5UX0NIQVJUX0FQSV9VUERBVEUsKCk9PnRoaXMuY3JlYXRlUGFuZWxzKCExKSl9Y3JlYXRlUGFuZWxzKGUpe3ZhciB0O2NvbnN0IGk9dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnRUeXBlKCkscz10aGlzLmNoYXJ0Q29udHJvbGxlci5pc0dyb3VwaW5nKCkscj1nKGkpO2UmJmk9PT10aGlzLmNoYXJ0VHlwZSYmcz09PXRoaXMuaXNHcm91cGluZ3x8KHRoaXMuZGVzdHJveVBhbmVscygpLG51bGw9PT0odD10aGlzLmdldEZvcm1hdFBhbmVsRGVmKCkuZ3JvdXBzKXx8dm9pZCAwPT09dHx8dC5mb3JFYWNoKGU9Pntjb25zdCB0PWUudHlwZTtpZighdGhpcy5pc0dyb3VwUGFuZWxTaG93bkluU2VyaWVzKHQscikpcmV0dXJuO2NvbnN0IHM9e2NoYXJ0Q29udHJvbGxlcjp0aGlzLmNoYXJ0Q29udHJvbGxlcixjaGFydE9wdGlvbnNTZXJ2aWNlOnRoaXMuY2hhcnRPcHRpb25zU2VydmljZSxpc0V4cGFuZGVkT25Jbml0OmUuaXNPcGVuLHNlcmllc1R5cGU6cn07aWYoImNoYXJ0Ij09PXQpdGhpcy5hZGRDb21wb25lbnQobmV3IGNlKHMpKTtlbHNlIGlmKCJsZWdlbmQiPT09dCl7Y29uc3QgZT1mdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSJ0cmVlbWFwIjpjYXNlInN1bmJ1cnN0IjpjYXNlImhlYXRtYXAiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fShpKT9uZXcgSWUocyk6bmV3IEsocyk7dGhpcy5hZGRDb21wb25lbnQoZSl9ZWxzZSBpZigiYXhpcyI9PT10KXtjb25zdCBlPWgoaSk/bmV3IGVlKHMpOm5ldyBRKHMpO3RoaXMuYWRkQ29tcG9uZW50KGUpfWVsc2Uic2VyaWVzIj09PXQ/dGhpcy5hZGRDb21wb25lbnQobmV3IExlKHMpKToibmF2aWdhdG9yIj09PXQ/dGhpcy5hZGRDb21wb25lbnQobmV3IGllKHMpKTpjb25zb2xlLndhcm4oYEFHIEdyaWQ6IGludmFsaWQgY2hhcnRzIGZvcm1hdCBwYW5lbCBncm91cCBuYW1lIHN1cHBsaWVkOiAnJHtlLnR5cGV9J2ApfSksdGhpcy5jaGFydFR5cGU9aSx0aGlzLmlzR3JvdXBpbmc9cyl9Z2V0Rm9ybWF0UGFuZWxEZWYoKXt2YXIgZTtjb25zdCB0PW51bGw9PT0oZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNoYXJ0VG9vbFBhbmVsc0RlZiIpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5mb3JtYXRQYW5lbDtyZXR1cm4gdHx8a2V9YWRkQ29tcG9uZW50KGUpe3RoaXMuY3JlYXRlQmVhbihlKSx0aGlzLnBhbmVscy5wdXNoKGUpLGUuYWRkQ3NzQ2xhc3MoImFnLWNoYXJ0LWZvcm1hdC1zZWN0aW9uIiksdGhpcy5nZXRHdWkoKS5hcHBlbmRDaGlsZChlLmdldEd1aSgpKX1kZXN0cm95UGFuZWxzKCl7dGhpcy5wYW5lbHMuZm9yRWFjaChlPT57cy5fLnJlbW92ZUZyb21QYXJlbnQoZS5nZXRHdWkoKSksdGhpcy5kZXN0cm95QmVhbihlKX0pLHRoaXMucGFuZWxzPVtdfWRlc3Ryb3koKXt0aGlzLmRlc3Ryb3lQYW5lbHMoKSxzdXBlci5kZXN0cm95KCl9fV9lLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1jaGFydC1mb3JtYXQtd3JhcHBlciI+PC9kaXY+JyxOZShbcy5Qb3N0Q29uc3RydWN0XSxfZS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBWZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBCZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLnNpemU9NTgsdGhpcy5wYWRkaW5nPTUsdGhpcy5yb290PW5ldyBvLmkuR3JvdXA7Y29uc3QgaT1uZXcgby5pLlNjZW5lKHt3aW5kb3c6d2luZG93LGRvY3VtZW50OndpbmRvdy5kb2N1bWVudCx3aWR0aDp0aGlzLnNpemUsaGVpZ2h0OnRoaXMuc2l6ZX0pO2kuY2FudmFzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgiYWctY2hhcnQtbWluaS10aHVtYm5haWwtY2FudmFzIiksaS5yb290PXRoaXMucm9vdCxpLmNvbnRhaW5lcj1lLHRoaXMuc2NlbmU9aSx0aGlzLnRvb2x0aXBOYW1lPXR9aW5pdCgpe3RoaXMuc2NlbmUuY2FudmFzLmVsZW1lbnQudGl0bGU9dGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUodGhpcy50b29sdGlwTmFtZSksdGhpcy5zY2VuZS5yZW5kZXIoKS5jYXRjaChlPT57Y29uc29sZS5lcnJvcigiQUcgR3JpZCAtIGNoYXJ0IHVwZGF0ZSBmYWlsZWQiLGUpfSl9fVZlKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIpXSxCZS5wcm90b3R5cGUsImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIix2b2lkIDApLFZlKFtzLlBvc3RDb25zdHJ1Y3RdLEJlLnByb3RvdHlwZSwiaW5pdCIsbnVsbCk7dmFyIEhlPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIFdlIGV4dGVuZHMgQmV7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLHQpLHRoaXMuc3Ryb2tlPSJncmF5Iix0aGlzLmF4aXNPdmVyc2hvb3Q9M31hZGRBeGVzKCl7Y29uc3QgZT10aGlzLnNpemUsdD10aGlzLnBhZGRpbmcsaT1uZXcgby5pLkxpbmU7aS54MT10LGkueTE9dCxpLngyPXQsaS55Mj1lLXQrdGhpcy5heGlzT3ZlcnNob290LGkuc3Ryb2tlPXRoaXMuc3Ryb2tlO2NvbnN0IHM9bmV3IG8uaS5MaW5lO3MueDE9dC10aGlzLmF4aXNPdmVyc2hvb3QrMSxzLnkxPWUtdCxzLngyPWUtdCsxLHMueTI9ZS10LHMuc3Ryb2tlPXRoaXMuc3Ryb2tlO2NvbnN0IHI9dGhpcy5yb290O3IuYXBwZW5kKGkpLHIuYXBwZW5kKHMpfX1mdW5jdGlvbiBqZShlKXtjb25zdHtzdGFja2VkOnQsc2l6ZTppLHBhZGRpbmc6cyx4U2NhbGVQYWRkaW5nOnIseFNjYWxlRG9tYWluOm4seVNjYWxlRG9tYWluOmF9PWUsbD1uZXcgby5pLkJhbmRTY2FsZTtsLmRvbWFpbj1uLGwucmFuZ2U9W3MsaS1zXSxsLnBhZGRpbmdJbm5lcj1yLGwucGFkZGluZ091dGVyPXI7Y29uc3QgZD1uZXcgby5pLkxpbmVhclNjYWxlO2QuZG9tYWluPWEsZC5yYW5nZT1baS1zLHNdO2NvbnN0IGM9KGUsdCxpKT0+ZS5tYXAoKGUscyk9Pntjb25zdCByPWkuY29udmVydChlKSxuPW5ldyBvLmkuUmVjdDtyZXR1cm4gbi54PXQuY29udmVydChzKSxuLnk9cixuLndpZHRoPXQuYmFuZHdpZHRoLG4uaGVpZ2h0PWkuY29udmVydCgwKS1yLG4uc3Ryb2tlV2lkdGg9MCxuLmNyaXNwPSEwLG59KTtyZXR1cm4gdD9lLmRhdGEubWFwKGU9PmMoZSxsLGQpKTpjKGUuZGF0YSxsLGQpfWZ1bmN0aW9uIFVlKGUsdCxpLHMpe2NvbnN0IHI9bmV3IG8uaS5MaW5lYXJTY2FsZTtyLmRvbWFpbj1bMCw0XSxyLnJhbmdlPVtzLGktc107Y29uc3Qgbj1uZXcgby5pLkxpbmVhclNjYWxlO24uZG9tYWluPVswLDEwXSxuLnJhbmdlPVtpLXMsc107Y29uc3QgYT10Lm1hcChlPT57Y29uc3QgdD1uZXcgby5pLlBhdGg7cmV0dXJuIHQuc3Ryb2tlV2lkdGg9Myx0LmxpbmVDYXA9InJvdW5kIix0LmZpbGw9dm9pZCAwLGUuZm9yRWFjaCgoZSxpKT0+e3QucGF0aFtpPjA/ImxpbmVUbyI6Im1vdmVUbyJdKHIuY29udmVydChpKSxuLmNvbnZlcnQoZSkpfSksdH0pLGw9bmV3IG8uaS5Hcm91cDtyZXR1cm4gbC5zZXRDbGlwUmVjdEluR3JvdXBDb29yZGluYXRlU3BhY2UobmV3IG8uaS5CQm94KHMscyxpLTIqcyxpLTIqcykpLGwuYXBwZW5kKGEpLGUuYXBwZW5kKGwpLGF9ZnVuY3Rpb24gemUoZSx0LGkscyxyLG49MCl7Y29uc3QgYT1uZXcgby5pLkxpbmVhclNjYWxlO2EuZG9tYWluPVswLDddLGEucmFuZ2U9Wy1NYXRoLlBJLE1hdGguUEldLm1hcChlPT5lK01hdGguUEkvMik7Y29uc3QgbD1uZXcgby5pLkxpbmVhclNjYWxlO2wuZG9tYWluPVswLDEwXSxsLnJhbmdlPVtzLHJdO2NvbnN0IGQ9W10sYz10Lm1hcChlPT57Y29uc3QgdD1uZXcgby5pLlBhdGg7cmV0dXJuIHQuc3Ryb2tlV2lkdGg9MSx0LnN0cm9rZU9wYWNpdHk9LjUsdC5saW5lQ2FwPSJyb3VuZCIsdC5maWxsPXZvaWQgMCx0LmZpbGxPcGFjaXR5PS44LGUuZm9yRWFjaCgoZSxpKT0+e2NvbnN0IGM9YS5jb252ZXJ0KGkpLGg9cytyLWwuY29udmVydChlKSx1PWgqTWF0aC5jb3MoYykscD1oKk1hdGguc2luKGMpO2lmKHQucGF0aFtpPjA/ImxpbmVUbyI6Im1vdmVUbyJdKHUscCksbj4wKXtjb25zdCBlPW5ldyBvLmkuQ2lyY2xlO2UueD11LGUueT1wLGUuc2l6ZT1uLGQucHVzaChlKX19KSx0LnBhdGguY2xvc2VQYXRoKCksdH0pLGg9bmV3IG8uaS5Hcm91cCx1PWkvMjtyZXR1cm4gaC50cmFuc2xhdGlvblg9dSxoLnRyYW5zbGF0aW9uWT11LGguYXBwZW5kKFsuLi5jLC4uLmRdKSxlLmFwcGVuZChoKSx7cGF0aHM6YyxtYXJrZXJzOmR9fWZ1bmN0aW9uIEtlKGUpe2xldFt0LGldPVsxLzAsLTEvMF07cmV0dXJue3Byb2Nlc3NlZERhdGE6ZS5yZWR1Y2UoKGUscyxyKT0+e3ZhciBvO2NvbnN0IG49cj4wP2Vbci0xXTp2b2lkIDA7bnVsbCE9PShvPWVbcl0pJiZ2b2lkIDAhPT1vfHwoZVtyXT1bXSk7Y29uc3QgYT1lW3JdO3JldHVybiBzLmZvckVhY2goKGUscyk9PntuJiYoZSs9bltzXSksYVtzXT1lLGFbc108dCYmKHQ9YVtzXSksYVtzXT5pJiYoaT1hW3NdKX0pLGV9LFtdKSxtaW46dCxtYXg6aX19SGUoW3MuUG9zdENvbnN0cnVjdF0sV2UucHJvdG90eXBlLCJhZGRBeGVzIixudWxsKTtjbGFzcyBZZSBleHRlbmRzIFdle2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcihlLCJncm91cGVkQ29sdW1uVG9vbHRpcCIpLHRoaXMuY29sdW1uRGF0YT1bMiwzLDRdO2NvbnN0e3Jvb3Q6cyxjb2x1bW5EYXRhOnIsc2l6ZTpvLHBhZGRpbmc6bn09dGhpczt0aGlzLmNvbHVtbnM9amUoe3N0YWNrZWQ6ITEscm9vdDpzLGRhdGE6cixzaXplOm8scGFkZGluZzpuLHhTY2FsZURvbWFpbjpbMCwxLDJdLHlTY2FsZURvbWFpbjpbMCw0XSx4U2NhbGVQYWRkaW5nOi4zfSkscy5hcHBlbmQodGhpcy5jb2x1bW5zKSx0aGlzLnVwZGF0ZUNvbG9ycyh0LGkpfXVwZGF0ZUNvbG9ycyhlLHQpe3RoaXMuY29sdW1ucy5mb3JFYWNoKChpLHMpPT57aS5maWxsPWVbc10saS5zdHJva2U9dFtzXX0pfX1ZZS5jaGFydFR5cGU9Imdyb3VwZWRDb2x1bW4iO2NsYXNzICRlIGV4dGVuZHMgV2V7Y29uc3RydWN0b3IoZSx0LGkscyxyLG89JGUuZGF0YSxuPVswLDE2XSxhPSJzdGFja2VkQ29sdW1uVG9vbHRpcCIpe3N1cGVyKGUsYSk7Y29uc3R7cm9vdDpsLHNpemU6ZCxwYWRkaW5nOmN9PXRoaXM7dGhpcy5zdGFja2VkQ29sdW1ucz1qZSh7c3RhY2tlZDohMCxyb290OmwsZGF0YTpvLHNpemU6ZCxwYWRkaW5nOmMseFNjYWxlRG9tYWluOlswLDEsMl0seVNjYWxlRG9tYWluOm4seFNjYWxlUGFkZGluZzouM30pLGwuYXBwZW5kKFtdLmNvbmNhdC5hcHBseShbXSx0aGlzLnN0YWNrZWRDb2x1bW5zKSksdGhpcy51cGRhdGVDb2xvcnModCxpKX11cGRhdGVDb2xvcnMoZSx0KXt0aGlzLnN0YWNrZWRDb2x1bW5zLmZvckVhY2goKGkscyk9PmkuZm9yRWFjaChpPT57aS5maWxsPWVbc10saS5zdHJva2U9dFtzXX0pKX19JGUuY2hhcnRUeXBlPSJzdGFja2VkQ29sdW1uIiwkZS5kYXRhPVtbOCwxMiwxNl0sWzYsOSwxMl0sWzIsMyw0XV07Y2xhc3MgWGUgZXh0ZW5kcyAkZXtjb25zdHJ1Y3RvcihlLHQsaSxzLHIpe3N1cGVyKGUsdCxpLHMscixYZS5kYXRhLFswLDEwXSwibm9ybWFsaXplZENvbHVtblRvb2x0aXAiKX19WGUuY2hhcnRUeXBlPSJub3JtYWxpemVkQ29sdW1uIixYZS5kYXRhPVtbMTAsMTAsMTBdLFs2LDcsOF0sWzIsNCw2XV07Y2xhc3MgcWUgZXh0ZW5kcyBXZXtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoZSwiZ3JvdXBlZEJhclRvb2x0aXAiKTtjb25zdCBzPXRoaXMucGFkZGluZyxyPXRoaXMuc2l6ZSxuPW5ldyBvLmkuQmFuZFNjYWxlO24uZG9tYWluPVswLDEsMl0sbi5yYW5nZT1bcyxyLXNdLG4ucGFkZGluZ0lubmVyPS4zLG4ucGFkZGluZ091dGVyPS4zO2NvbnN0IGE9bmV3IG8uaS5MaW5lYXJTY2FsZTthLmRvbWFpbj1bMCw0XSxhLnJhbmdlPVtyLXMsc107Y29uc3QgbD1hLmNvbnZlcnQoMCksZD1uLmJhbmR3aWR0aDt0aGlzLmJhcnM9WzIsMyw0XS5tYXAoKGUsdCk9Pntjb25zdCBpPW5ldyBvLmkuUmVjdDtyZXR1cm4gaS54PXMsaS55PW4uY29udmVydCh0KSxpLndpZHRoPWwtYS5jb252ZXJ0KGUpLGkuaGVpZ2h0PWQsaS5zdHJva2VXaWR0aD0wLGkuY3Jpc3A9ITAsaX0pLHRoaXMudXBkYXRlQ29sb3JzKHQsaSksdGhpcy5yb290LmFwcGVuZCh0aGlzLmJhcnMpfXVwZGF0ZUNvbG9ycyhlLHQpe3RoaXMuYmFycy5mb3JFYWNoKChpLHMpPT57aS5maWxsPWVbc10saS5zdHJva2U9dFtzXX0pfX1xZS5jaGFydFR5cGU9Imdyb3VwZWRCYXIiO2NsYXNzIFplIGV4dGVuZHMgV2V7Y29uc3RydWN0b3IoZSx0LGkscyxyLG49WmUuZGF0YSxhPVswLDE2XSxsPSJzdGFja2VkQmFyVG9vbHRpcCIpe3N1cGVyKGUsbCk7Y29uc3QgZD10aGlzLnNpemUsYz10aGlzLnBhZGRpbmcsaD1uZXcgby5pLkJhbmRTY2FsZTtoLmRvbWFpbj1bMCwxLDJdLGgucmFuZ2U9W2MsZC1jXSxoLnBhZGRpbmdJbm5lcj0uMyxoLnBhZGRpbmdPdXRlcj0uMztjb25zdCB1PW5ldyBvLmkuTGluZWFyU2NhbGU7dS5kb21haW49YSx1LnJhbmdlPVtkLWMsY107Y29uc3QgcD11LmNvbnZlcnQoMCksZz1oLmJhbmR3aWR0aDt0aGlzLmJhcnM9bi5tYXAoZT0+ZS5tYXAoKGUsdCk9Pntjb25zdCBpPW5ldyBvLmkuUmVjdDtyZXR1cm4gaS54PWMsaS55PWguY29udmVydCh0KSxpLndpZHRoPXAtdS5jb252ZXJ0KGUpLGkuaGVpZ2h0PWcsaS5zdHJva2VXaWR0aD0wLGkuY3Jpc3A9ITAsaX0pKSx0aGlzLnVwZGF0ZUNvbG9ycyh0LGkpLHRoaXMucm9vdC5hcHBlbmQoW10uY29uY2F0LmFwcGx5KFtdLHRoaXMuYmFycykpfXVwZGF0ZUNvbG9ycyhlLHQpe3RoaXMuYmFycy5mb3JFYWNoKChpLHMpPT5pLmZvckVhY2goaT0+e2kuZmlsbD1lW3NdLGkuc3Ryb2tlPXRbc119KSl9fVplLmNoYXJ0VHlwZT0ic3RhY2tlZEJhciIsWmUuZGF0YT1bWzgsMTIsMTZdLFs2LDksMTJdLFsyLDMsNF1dO2NsYXNzIFFlIGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSx0LGkscyxyKXtzdXBlcihlLHQsaSxzLHIsUWUuZGF0YSxbMCwxMF0sIm5vcm1hbGl6ZWRCYXJUb29sdGlwIil9fVFlLmNoYXJ0VHlwZT0ibm9ybWFsaXplZEJhciIsUWUuZGF0YT1bWzEwLDEwLDEwXSxbNiw3LDhdLFsyLDQsNl1dO2NvbnN0IEplPW8uaS50b1JhZGlhbnM7Y2xhc3MgZXQgZXh0ZW5kcyBCZXtjb25zdHJ1Y3RvcihlLHQsaSxzLHIsbj0uNixhPSJkb251dFRvb2x0aXAiKXtzdXBlcihlLGEpO2NvbnN0IGw9KHRoaXMuc2l6ZS0yKnRoaXMucGFkZGluZykvMixkPWwrdGhpcy5wYWRkaW5nLGM9W1tKZSgtOTApLEplKDMwKV0sW0plKDMwKSxKZSgxMjApXSxbSmUoMTIwKSxKZSgxODApXSxbSmUoMTgwKSxKZSgyMTApXSxbSmUoMjEwKSxKZSgyNDApXSxbSmUoMjQwKSxKZSgyNzApXV07dGhpcy5zZWN0b3JzPWMubWFwKChbZSx0XSk9Pntjb25zdCBpPW5ldyBvLmkuU2VjdG9yO3JldHVybiBpLmNlbnRlclg9ZCxpLmNlbnRlclk9ZCxpLmlubmVyUmFkaXVzPWwqbixpLm91dGVyUmFkaXVzPWwsaS5zdGFydEFuZ2xlPWUsaS5lbmRBbmdsZT10LGkuc3Ryb2tlPXZvaWQgMCxpLnN0cm9rZVdpZHRoPTAsaS5pbnNldD0uNzUsaX0pLHRoaXMudXBkYXRlQ29sb3JzKHQsaSksdGhpcy5yb290LmFwcGVuZCh0aGlzLnNlY3RvcnMpfXVwZGF0ZUNvbG9ycyhlLHQpe3RoaXMuc2VjdG9ycy5mb3JFYWNoKChpLHMpPT57aS5maWxsPWVbcyVlLmxlbmd0aF0saS5zdHJva2U9dFtzJXQubGVuZ3RoXX0pfX1ldC5jaGFydFR5cGU9ImRvbnV0IjtjbGFzcyB0dCBleHRlbmRzIGV0e2NvbnN0cnVjdG9yKGUsdCxpLHMscil7c3VwZXIoZSx0LGkscyxyLDAsInBpZVRvb2x0aXAiKX19dHQuY2hhcnRUeXBlPSJwaWUiO2NsYXNzIGl0IGV4dGVuZHMgV2V7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKGUsImxpbmVUb29sdGlwIiksdGhpcy5kYXRhPVtbOSw3LDgsNSw2XSxbNSw2LDMsNCwxXSxbMSwzLDQsOCw3XV0sdGhpcy5saW5lcz1VZSh0aGlzLnJvb3QsdGhpcy5kYXRhLHRoaXMuc2l6ZSx0aGlzLnBhZGRpbmcpLHRoaXMudXBkYXRlQ29sb3JzKHQsaSl9dXBkYXRlQ29sb3JzKGUsdCl7dGhpcy5saW5lcy5mb3JFYWNoKCh0LGkpPT57dC5zdHJva2U9ZVtpXX0pfX1pdC5jaGFydFR5cGU9ImxpbmUiO2NsYXNzIHN0IGV4dGVuZHMgV2V7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKGUsInNjYXR0ZXJUb29sdGlwIik7Y29uc3Qgcz10aGlzLnNpemUscj10aGlzLnBhZGRpbmcsbj1uZXcgby5pLkxpbmVhclNjYWxlO24uZG9tYWluPVstLjUsNF0sbi5yYW5nZT1bMipyLHMtcl07Y29uc3QgYT1uZXcgby5pLkxpbmVhclNjYWxlO2EuZG9tYWluPVstLjUsMy41XSxhLnJhbmdlPVtzLXIscl07Y29uc3QgbD1bXTtbW1suMywzXSxbMS4xLC45XSxbMiwuNF0sWzMuNCwyLjRdXSxbWzAsLjNdLFsxLDJdLFsyLjQsMS40XSxbMywwXV1dLmZvckVhY2goZT0+e2UuZm9yRWFjaCgoW2UsdF0pPT57Y29uc3QgaT1uZXcgby5pLkFyYztpLnN0cm9rZVdpZHRoPTAsaS5jZW50ZXJYPW4uY29udmVydChlKSxpLmNlbnRlclk9YS5jb252ZXJ0KHQpLGkucmFkaXVzPTIuNSxsLnB1c2goaSl9KX0pLHRoaXMucG9pbnRzPWwsdGhpcy51cGRhdGVDb2xvcnModCxpKTtjb25zdCBkPW5ldyBvLmkuR3JvdXA7ZC5zZXRDbGlwUmVjdEluR3JvdXBDb29yZGluYXRlU3BhY2UobmV3IG8uaS5CQm94KHIscixzLTIqcixzLTIqcikpLGQuYXBwZW5kKHRoaXMucG9pbnRzKSx0aGlzLnJvb3QuYXBwZW5kKGQpfXVwZGF0ZUNvbG9ycyhlLHQpe3RoaXMucG9pbnRzLmZvckVhY2goKGkscyk9PntpLnN0cm9rZT10W3MldC5sZW5ndGhdLGkuZmlsbD1lW3MlZS5sZW5ndGhdfSl9fXN0LmNoYXJ0VHlwZT0ic2NhdHRlciI7Y2xhc3MgcnQgZXh0ZW5kcyBXZXtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoZSwiYnViYmxlVG9vbHRpcCIpO2NvbnN0IHM9dGhpcy5zaXplLHI9dGhpcy5wYWRkaW5nLG49bmV3IG8uaS5MaW5lYXJTY2FsZTtuLmRvbWFpbj1bMCwxXSxuLnJhbmdlPVsyKnIscy1yXTtjb25zdCBhPW5ldyBvLmkuTGluZWFyU2NhbGU7YS5kb21haW49WzAsMV0sYS5yYW5nZT1bcy1yLHJdO2NvbnN0IGw9W107W1tbLjEsLjMsNV0sWy41LC40LDddLFsuMiwuOCw3XV0sW1suOCwuNyw1XSxbLjcsLjMsOV1dXS5mb3JFYWNoKGU9PntlLmZvckVhY2goKFtlLHQsaV0pPT57Y29uc3Qgcz1uZXcgby5pLkFyYztzLnN0cm9rZVdpZHRoPTAscy5jZW50ZXJYPW4uY29udmVydChlKSxzLmNlbnRlclk9YS5jb252ZXJ0KHQpLHMucmFkaXVzPWkscy5maWxsT3BhY2l0eT0uNyxsLnB1c2gocyl9KX0pLHRoaXMucG9pbnRzPWwsdGhpcy51cGRhdGVDb2xvcnModCxpKTtjb25zdCBkPW5ldyBvLmkuR3JvdXA7ZC5zZXRDbGlwUmVjdEluR3JvdXBDb29yZGluYXRlU3BhY2UobmV3IG8uaS5CQm94KHIscixzLTIqcixzLTIqcikpLGQuYXBwZW5kKHRoaXMucG9pbnRzKSx0aGlzLnJvb3QuYXBwZW5kKGQpfXVwZGF0ZUNvbG9ycyhlLHQpe3RoaXMucG9pbnRzLmZvckVhY2goKGkscyk9PntpLnN0cm9rZT10W3MldC5sZW5ndGhdLGkuZmlsbD1lW3MlZS5sZW5ndGhdfSl9fXJ0LmNoYXJ0VHlwZT0iYnViYmxlIjtjbGFzcyBvdCBleHRlbmRzIFdle2NvbnN0cnVjdG9yKGUsdCxpLHMscixuPW90LmRhdGEpe3N1cGVyKGUsImdyb3VwZWRBcmVhVG9vbHRpcCIpO2NvbnN0IGE9dGhpcy5zaXplLGw9dGhpcy5wYWRkaW5nLGQ9bmV3IG8uaS5CYW5kU2NhbGU7ZC5kb21haW49WzAsMSwyXSxkLnBhZGRpbmdJbm5lcj0xLGQucGFkZGluZ091dGVyPTAsZC5yYW5nZT1bbCsuNSxhLWwtLjVdO2NvbnN0IGM9bmV3IG8uaS5MaW5lYXJTY2FsZTtjLmRvbWFpbj1bMCw2XSxjLnJhbmdlPVthLWwrLjUsbF07Y29uc3QgaD0yKm4ubGVuZ3RoLTEsdT1bXSxwPWMuY29udmVydCgwKTtuLmZvckVhY2goKGUsdCk9Pntjb25zdCBpPWQuY29udmVydCh0KTtlLmZvckVhY2goKGUscyk9Pntjb25zdCByPWMuY29udmVydChlKSxvPXVbc118fCh1W3NdPVtdKTtvW3RdPXt4OmkseTpyfSxvW2gtdF09e3g6aSx5OnB9fSl9KSx0aGlzLmFyZWFzPXUucmV2ZXJzZSgpLm1hcChlPT57Y29uc3QgdD1uZXcgby5pLlBhdGg7dC5zdHJva2VXaWR0aD0xLHQuc3Ryb2tlT3BhY2l0eT0uNzUsdC5maWxsT3BhY2l0eT0uNztjb25zdCBpPXQucGF0aDtyZXR1cm4gaS5jbGVhcigpLGUuZm9yRWFjaCgoZSx0KT0+aVt0PjA/ImxpbmVUbyI6Im1vdmVUbyJdKGUueCxlLnkpKSxpLmNsb3NlUGF0aCgpLHR9KSx0aGlzLnVwZGF0ZUNvbG9ycyh0LGkpLHRoaXMucm9vdC5hcHBlbmQodGhpcy5hcmVhcyl9dXBkYXRlQ29sb3JzKGUsdCl7dGhpcy5hcmVhcy5mb3JFYWNoKChpLHMpPT57aS5maWxsPWVbc10saS5zdHJva2U9dFtzXX0pfX1vdC5jaGFydFR5cGU9ImFyZWEiLG90LmRhdGE9W1sxLDMsNV0sWzIsNiw0XSxbNSwzLDFdXTtjbGFzcyBudCBleHRlbmRzIFdle2NvbnN0cnVjdG9yKGUsdCxpLHMscixuPW50LmRhdGEsYT0ic3RhY2tlZEFyZWFUb29sdGlwIil7c3VwZXIoZSxhKTtjb25zdCBsPXRoaXMuc2l6ZSxkPXRoaXMucGFkZGluZyxjPW5ldyBvLmkuQmFuZFNjYWxlO2MuZG9tYWluPVswLDEsMl0sYy5wYWRkaW5nSW5uZXI9MSxjLnBhZGRpbmdPdXRlcj0wLGMucmFuZ2U9W2QrLjUsbC1kLS41XTtjb25zdCBoPW5ldyBvLmkuTGluZWFyU2NhbGU7aC5kb21haW49WzAsMTZdLGgucmFuZ2U9W2wtZCsuNSxkKy41XTtjb25zdCB1PTIqbi5sZW5ndGgtMSxwPVtdO24uZm9yRWFjaCgoZSx0KT0+e2NvbnN0IGk9Yy5jb252ZXJ0KHQpO2xldCBzPTA7ZS5mb3JFYWNoKChlLHIpPT57Y29uc3Qgbz1oLmNvbnZlcnQocytlKSxuPXBbcl18fChwW3JdPVtdKTtuW3RdPXt4OmkseTpvfSxuW3UtdF09e3g6aSx5OmguY29udmVydChzKX0scys9ZX0pfSksdGhpcy5hcmVhcz1wLm1hcChlPT57Y29uc3QgdD1uZXcgby5pLlBhdGg7dC5zdHJva2VXaWR0aD0wO2NvbnN0IGk9dC5wYXRoO3JldHVybiBpLmNsZWFyKCksZS5mb3JFYWNoKChlLHQpPT5pW3Q+MD8ibGluZVRvIjoibW92ZVRvIl0oZS54LGUueSkpLGkuY2xvc2VQYXRoKCksdH0pLHRoaXMudXBkYXRlQ29sb3JzKHQsaSksdGhpcy5yb290LmFwcGVuZCh0aGlzLmFyZWFzKX11cGRhdGVDb2xvcnMoZSx0KXt0aGlzLmFyZWFzLmZvckVhY2goKGkscyk9PntpLmZpbGw9ZVtzXSxpLnN0cm9rZT10W3NdfSl9fW50LmNoYXJ0VHlwZT0ic3RhY2tlZEFyZWEiLG50LmRhdGE9W1syLDMsMl0sWzMsNiw1XSxbNiwyLDJdXTtjbGFzcyBhdCBleHRlbmRzIG50e2NvbnN0cnVjdG9yKGUsdCxpLHMscixvPWF0LmRhdGEpe3N1cGVyKGUsdCxpLHMscixvLCJub3JtYWxpemVkQXJlYVRvb2x0aXAiKX19YXQuY2hhcnRUeXBlPSJub3JtYWxpemVkQXJlYSIsYXQuZGF0YT1udC5kYXRhLm1hcChlPT57Y29uc3QgdD1lLnJlZHVjZSgoZSx0KT0+ZSt0LDApO3JldHVybiBlLm1hcChlPT5lL3QqMTYpfSk7Y2xhc3MgbHQgZXh0ZW5kcyBXZXtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoZSwiaGlzdG9ncmFtVG9vbHRpcCIpO2NvbnN0IHM9dGhpcy5wYWRkaW5nLHI9dGhpcy5zaXplLG49WzIsNSwxMSwxMywxMCw2LDFdLGE9bmV3IG8uaS5MaW5lYXJTY2FsZTthLmRvbWFpbj1bMCxuLmxlbmd0aF0sYS5yYW5nZT1bcyxyLXNdO2NvbnN0IGw9bmV3IG8uaS5MaW5lYXJTY2FsZTtsLmRvbWFpbj1bMCxuLnJlZHVjZSgoZSx0KT0+TWF0aC5tYXgoZSx0KSwwKV0sbC5yYW5nZT1bci1zLHNdO2NvbnN0IGQ9bC5jb252ZXJ0KDApO3RoaXMuYmFycz1uLm1hcCgoZSx0KT0+e2NvbnN0IGk9bC5jb252ZXJ0KGUpLHM9YS5jb252ZXJ0KHQpLHI9YS5jb252ZXJ0KHQrMSksbj1uZXcgby5pLlJlY3Q7cmV0dXJuIG4ueD1zLG4ueT1pLG4ud2lkdGg9ci1zLG4uaGVpZ2h0PWQtaSxuLnN0cm9rZVdpZHRoPTEsbi5zdHJva2VPcGFjaXR5PS43NSxuLmNyaXNwPSEwLG59KSx0aGlzLnVwZGF0ZUNvbG9ycyh0LGkpLHRoaXMucm9vdC5hcHBlbmQodGhpcy5iYXJzKX11cGRhdGVDb2xvcnMoW2VdLFt0XSl7dGhpcy5iYXJzLmZvckVhY2goaT0+e2kuZmlsbD1lLGkuc3Ryb2tlPXR9KX19bHQuY2hhcnRUeXBlPSJoaXN0b2dyYW0iO3ZhciBkdD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBjdCBleHRlbmRzIEJle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSx0KSx0aGlzLnN0cm9rZT0iZ3JheSIsdGhpcy5zaG93UmFkaXVzQXhpc0xpbmU9ITAsdGhpcy5zaG93QW5nbGVBeGlzTGluZXM9ITB9YWRkQXhlcygpe2NvbnN0IGU9dGhpcy5zaXplLHQ9dGhpcy5wYWRkaW5nLGk9KGUtMip0KS8yLHM9dGhpcy5zaG93QW5nbGVBeGlzTGluZXM/W2ksLjgqaSwuNippLC40KmldOltdLHI9bmV3IG8uaS5MaW5lO3IueDE9ZS8yLHIueTE9dCxyLngyPWUvMixyLnkyPWUtdC1pLXNbcy5sZW5ndGgtMV0sci5zdHJva2U9dGhpcy5zdHJva2Usci5zdHJva2VPcGFjaXR5PS41LHIuZmlsbD12b2lkIDAsci52aXNpYmxlPXRoaXMuc2hvd1JhZGl1c0F4aXNMaW5lO2NvbnN0IG49dCtpO3RoaXMuZ3JpZExpbmVzPXMubWFwKChlLHQpPT57Y29uc3QgaT1uZXcgby5pLlBhdGg7cmV0dXJuIGkucGF0aC5hcmMobixuLGUsMCwyKk1hdGguUEkpLGkuc3Ryb2tlV2lkdGg9MSxpLnN0cm9rZT10aGlzLnN0cm9rZSxpLnN0cm9rZU9wYWNpdHk9MD09PXQ/LjU6LjIsaS5maWxsPXZvaWQgMCxpfSk7Y29uc3QgYT10aGlzLnJvb3Q7YS5hcHBlbmQociksdGhpcy5ncmlkTGluZXMubGVuZ3RoPjAmJmEuYXBwZW5kKHRoaXMuZ3JpZExpbmVzKX19ZHQoW3MuUG9zdENvbnN0cnVjdF0sY3QucHJvdG90eXBlLCJhZGRBeGVzIixudWxsKTtjbGFzcyBodCBleHRlbmRzIGN0e2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcihlLCJyYWRpYWxDb2x1bW5Ub29sdGlwIiksdGhpcy5kYXRhPVtbNiw4LDEwLDIsNiw1XSxbNCw0LDMsNiw0LDRdLFs1LDQsMiw5LDgsOV1dLHRoaXMuc2hvd1JhZGl1c0F4aXNMaW5lPSExO2NvbnN0e3BhZGRpbmc6cyxzaXplOnIsZGF0YTpufT10aGlzLGE9KHItMipzKS8yLGw9LjQqYSxkPW5ldyBvLmkuQmFuZFNjYWxlO2QuZG9tYWluPW5bMF0ubWFwKChlLHQpPT50KSxkLnJhbmdlPVswLDIqTWF0aC5QSV0sZC5wYWRkaW5nSW5uZXI9MCxkLnBhZGRpbmdPdXRlcj0wO2NvbnN0IGM9LjcqZC5iYW5kd2lkdGgse3Byb2Nlc3NlZERhdGE6aCxtYXg6dX09S2UobikscD1uZXcgby5pLkxpbmVhclNjYWxlO3AuZG9tYWluPVswLHVdLHAucmFuZ2U9W2wsYV07Y29uc3QgZz10aGlzLnNpemUvMjt0aGlzLnNlcmllcz1oLm1hcCgoZSx0KT0+e2NvbnN0IGk9MD09PXQ/dm9pZCAwOmhbdC0xXSxzPW5ldyBvLmkuR3JvdXAoe3pJbmRleDoxZTZ9KSxyPWUubWFwKChlLHQpPT57Y29uc3Qgcz1udWxsPT1pP3ZvaWQgMDppW3RdLHI9cC5jb252ZXJ0KGUpLG49cC5jb252ZXJ0KG51bGwhPXM/czowKSxoPWQuY29udmVydCh0KSx1PWgrYyxtPW8uaS5nZXRSYWRpYWxDb2x1bW5XaWR0aChoLHUsYSwuNSwuNSksZj1uZXcgby5pLlJhZGlhbENvbHVtblNoYXBlO3JldHVybiBmLnNjYWxpbmdDZW50ZXJYPWcsZi5zY2FsaW5nQ2VudGVyWT1nLGYuY29sdW1uV2lkdGg9bSxmLmlubmVyUmFkaXVzPW4sZi5vdXRlclJhZGl1cz1yLGYuc3RhcnRBbmdsZT1oLGYuZW5kQW5nbGU9dSxmLmlzQmV2ZWxlZD0hMCxmLmF4aXNJbm5lclJhZGl1cz1sLGYuYXhpc091dGVyUmFkaXVzPWEsZi5zdHJva2U9dm9pZCAwLGYuc3Ryb2tlV2lkdGg9MCxmfSk7cmV0dXJuIHMuYXBwZW5kKHIpLHMudHJhbnNsYXRpb25YPWcscy50cmFuc2xhdGlvblk9ZyxzfSksdGhpcy5yb290LmFwcGVuZCh0aGlzLnNlcmllcyksdGhpcy51cGRhdGVDb2xvcnModCxpKX11cGRhdGVDb2xvcnMoZSx0KXt0aGlzLnNlcmllcy5mb3JFYWNoKChpLHMpPT57dmFyIHI7bnVsbD09PShyPWkuY2hpbGRyZW4pfHx2b2lkIDA9PT1yfHxyLmZvckVhY2goaT0+e2kuZmlsbD1lW3MlZS5sZW5ndGhdLGkuc3Ryb2tlPXRbcyV0Lmxlbmd0aF19KX0pfX1odC5jaGFydFR5cGU9InJhZGlhbENvbHVtbiI7Y2xhc3MgdXQgZXh0ZW5kcyBjdHtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoZSwicmFkaWFsQmFyVG9vbHRpcCIpLHRoaXMuZGF0YT1bWzYsOCwxMF0sWzQsNCwzXSxbNSw0LDJdXSx0aGlzLnNob3dSYWRpdXNBeGlzTGluZT0hMTtjb25zdCBzPSh0aGlzLnNpemUtdGhpcy5wYWRkaW5nKS8yLHI9LjQqcyxuPXMrcixhPW5ldyBvLmkuQmFuZFNjYWxlO2EuZG9tYWluPXRoaXMuZGF0YVswXS5tYXAoKGUsdCk9PnQpLGEucmFuZ2U9W3Mscl0sYS5wYWRkaW5nSW5uZXI9LjUsYS5wYWRkaW5nT3V0ZXI9MDtjb25zdCBsPWEuYmFuZHdpZHRoLHtwcm9jZXNzZWREYXRhOmQsbWF4OmN9PUtlKHRoaXMuZGF0YSksaD1uZXcgby5pLkxpbmVhclNjYWxlO2guZG9tYWluPVswLE1hdGguY2VpbCgxLjUqYyldO2NvbnN0IHU9MS41Kk1hdGguUEkscD11KzIqTWF0aC5QSTtoLnJhbmdlPVt1LHBdO2NvbnN0IGc9dGhpcy5zaXplLzI7dGhpcy5zZXJpZXM9ZC5tYXAoKGUsdCk9Pntjb25zdCBpPXQ8MD92b2lkIDA6ZFt0LTFdLHM9bmV3IG8uaS5Hcm91cCh7ekluZGV4OjFlNn0pLHI9ZS5tYXAoKGUsdCk9Pnt2YXIgcztjb25zdCByPW51bGwhPT0ocz1udWxsPT1pP3ZvaWQgMDppW3RdKSYmdm9pZCAwIT09cz9zOjAsZD1uLWEuY29udmVydCh0KSxjPWQrbCx1PWguY29udmVydChyKSxwPWguY29udmVydChlKSxtPW5ldyBvLmkuU2VjdG9yO3JldHVybiBtLmNlbnRlclg9ZyxtLmNlbnRlclk9ZyxtLmlubmVyUmFkaXVzPWQsbS5vdXRlclJhZGl1cz1jLG0uc3RhcnRBbmdsZT11LG0uZW5kQW5nbGU9cCxtLnN0cm9rZT12b2lkIDAsbS5zdHJva2VXaWR0aD0wLG19KTtyZXR1cm4gcy5hcHBlbmQociksc30pLHRoaXMucm9vdC5hcHBlbmQodGhpcy5zZXJpZXMpLHRoaXMudXBkYXRlQ29sb3JzKHQsaSl9dXBkYXRlQ29sb3JzKGUsdCl7dGhpcy5zZXJpZXMuZm9yRWFjaCgoaSxzKT0+e3ZhciByO251bGw9PT0ocj1pLmNoaWxkcmVuKXx8dm9pZCAwPT09cnx8ci5mb3JFYWNoKGk9PntpLmZpbGw9ZVtzJWUubGVuZ3RoXSxpLnN0cm9rZT10W3MldC5sZW5ndGhdfSl9KX19dXQuY2hhcnRUeXBlPSJyYWRpYWxCYXIiO2NsYXNzIHB0IGV4dGVuZHMgY3R7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKGUsInJhZGFyTGluZVRvb2x0aXAiKSx0aGlzLm1hcmtlclNpemU9NCx0aGlzLmRhdGE9W1s4LDcsOCw3LDgsOCw3LDhdLFs2LDgsNSwxMCw2LDcsNCw2XSxbMCwzLDMsNSw0LDQsMiwwXV0sdGhpcy5zaG93UmFkaXVzQXhpc0xpbmU9ITE7Y29uc3Qgcz0odGhpcy5zaXplLTIqdGhpcy5wYWRkaW5nKS8yLHtwYXRoczpyLG1hcmtlcnM6b309emUodGhpcy5yb290LHRoaXMuZGF0YSx0aGlzLnNpemUscywwLHRoaXMubWFya2VyU2l6ZSk7dGhpcy5saW5lcz1yLHRoaXMubWFya2Vycz1vLHRoaXMudXBkYXRlQ29sb3JzKHQsaSl9dXBkYXRlQ29sb3JzKGUsdCl7dGhpcy5saW5lcy5mb3JFYWNoKChpLHMpPT57Y29uc3Qgcj10aGlzLmRhdGFbc10ubGVuZ3RoO2kuc3Ryb2tlPWVbc107Y29uc3Qgbz1zKnIsbj1vK3I7dGhpcy5tYXJrZXJzLnNsaWNlKG8sbikuZm9yRWFjaChpPT57aS5zdHJva2U9dFtzXSxpLmZpbGw9ZVtzXX0pfSl9fXB0LmNoYXJ0VHlwZT0icmFkYXJMaW5lIjtjbGFzcyBndCBleHRlbmRzIGN0e2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcihlLCJyYWRhckFyZWFUb29sdGlwIiksdGhpcy5kYXRhPVtbOCwxMCw1LDcsNCwxLDUsOF0sWzEsMSwyLDcsNyw4LDEwLDFdLFs0LDUsOSw5LDQsMiwzLDRdXSx0aGlzLnNob3dSYWRpdXNBeGlzTGluZT0hMTtjb25zdCBzPSh0aGlzLnNpemUtMip0aGlzLnBhZGRpbmcpLzIscj1zLS4zKnRoaXMuc2l6ZTt0aGlzLmFyZWFzPXplKHRoaXMucm9vdCx0aGlzLmRhdGEsdGhpcy5zaXplLHMscikucGF0aHMsdGhpcy51cGRhdGVDb2xvcnModCxpKX11cGRhdGVDb2xvcnMoZSx0KXt0aGlzLmFyZWFzLmZvckVhY2goKGkscyk9PntpLmZpbGw9ZVtzXSxpLnN0cm9rZT10W3NdfSl9fWd0LmNoYXJ0VHlwZT0icmFkYXJBcmVhIjtjbGFzcyBtdCBleHRlbmRzIGN0e2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcihlLCJuaWdodGluZ2FsZVRvb2x0aXAiKSx0aGlzLmRhdGE9W1s2LDEwLDksOCw3LDhdLFs0LDYsNSw0LDUsNV0sWzMsNSw0LDMsNCw3XV0sdGhpcy5zaG93UmFkaXVzQXhpc0xpbmU9ITE7Y29uc3Qgcz0odGhpcy5zaXplLTIqdGhpcy5wYWRkaW5nKS8yLHI9bmV3IG8uaS5CYW5kU2NhbGU7ci5kb21haW49dGhpcy5kYXRhWzBdLm1hcCgoZSx0KT0+dCksci5yYW5nZT1bLU1hdGguUEksTWF0aC5QSV0sci5wYWRkaW5nSW5uZXI9MCxyLnBhZGRpbmdPdXRlcj0wO2NvbnN0IG49Ljcqci5iYW5kd2lkdGgse3Byb2Nlc3NlZERhdGE6YSxtYXg6bH09S2UodGhpcy5kYXRhKSxkPW5ldyBvLmkuTGluZWFyU2NhbGU7ZC5kb21haW49WzAsbF0sZC5yYW5nZT1bMCxzXTtjb25zdCBjPXRoaXMuc2l6ZS8yO3RoaXMuc2VyaWVzPWEubWFwKChlLHQpPT57Y29uc3QgaT10PDA/dm9pZCAwOmFbdC0xXSxzPW5ldyBvLmkuR3JvdXAoe3pJbmRleDoxZTZ9KSxsPWUubWFwKChlLHQpPT57Y29uc3Qgcz1udWxsPT1pP3ZvaWQgMDppW3RdLGE9ZC5jb252ZXJ0KGUpLGw9ZC5jb252ZXJ0KG51bGwhPXM/czowKSxoPXIuY29udmVydCh0KSx1PWgrbixwPW5ldyBvLmkuU2VjdG9yO3JldHVybiBwLmNlbnRlclg9YyxwLmNlbnRlclk9YyxwLmlubmVyUmFkaXVzPWwscC5vdXRlclJhZGl1cz1hLHAuc3RhcnRBbmdsZT1oLHAuZW5kQW5nbGU9dSxwLnN0cm9rZT12b2lkIDAscC5zdHJva2VXaWR0aD0wLHB9KTtyZXR1cm4gcy5hcHBlbmQobCksc30pLHRoaXMucm9vdC5hcHBlbmQodGhpcy5zZXJpZXMpLHRoaXMudXBkYXRlQ29sb3JzKHQsaSl9dXBkYXRlQ29sb3JzKGUsdCl7dGhpcy5zZXJpZXMuZm9yRWFjaCgoaSxzKT0+e3ZhciByO251bGw9PT0ocj1pLmNoaWxkcmVuKXx8dm9pZCAwPT09cnx8ci5mb3JFYWNoKGk9PntpLmZpbGw9ZVtzJWUubGVuZ3RoXSxpLnN0cm9rZT10W3MldC5sZW5ndGhdfSl9KX19bXQuY2hhcnRUeXBlPSJuaWdodGluZ2FsZSI7Y2xhc3MgZnQgZXh0ZW5kcyBXZXtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoZSwicmFuZ2VCYXJUb29sdGlwIik7dGhpcy5iYXJzPXRoaXMuY3JlYXRlUmFuZ2VCYXIodGhpcy5yb290LFszLDMuNSwzXSx0aGlzLnNpemUsdGhpcy5wYWRkaW5nLCJ2ZXJ0aWNhbCIpLHRoaXMudXBkYXRlQ29sb3JzKHQsaSl9dXBkYXRlQ29sb3JzKGUsdCl7dGhpcy5iYXJzLmZvckVhY2goKGkscyk9PntpLmZpbGw9ZVtzXSxpLnN0cm9rZT10W3NdfSl9Y3JlYXRlUmFuZ2VCYXIoZSx0LGkscyxyKXtjb25zdCBuPSJob3Jpem9udGFsIj09PXIsYT0yKnMsbD1uZXcgby5pLkJhbmRTY2FsZTtsLmRvbWFpbj10Lm1hcCgoZSx0KT0+dCksbC5yYW5nZT1bcyxpLXNdLGwucGFkZGluZ0lubmVyPS4zLGwucGFkZGluZ091dGVyPS4zO2NvbnN0IGQ9bmV3IG8uaS5MaW5lYXJTY2FsZTtkLmRvbWFpbj1bLjcqdC5yZWR1Y2UoKGUsdCk9Pk1hdGgubWluKGUsdCksMS8wKSwxLjMqdC5yZWR1Y2UoKGUsdCk9Pk1hdGgubWF4KGUsdCksMCldLGQucmFuZ2U9W2EsaS1hXTtjb25zdCBjPWwuYmFuZHdpZHRoLGg9dC5tYXAoKGUsdCk9Pntjb25zdFtpLHNdPVsuNyplLDEuMyplXSxyPWwuY29udmVydCh0KSxhPWQuY29udmVydChpKSxoPWQuY29udmVydChzKS1hLHU9bmV3IG8uaS5SZWN0O3JldHVybiB1Lng9bj9hOnIsdS55PW4/cjphLHUud2lkdGg9bj9oOmMsdS5oZWlnaHQ9bj9jOmgsdS5zdHJva2VXaWR0aD0wLHUuY3Jpc3A9ITAsdX0pO3JldHVybiBlLmFwcGVuZChoKSxofX1mdC5jaGFydFR5cGU9InJhbmdlQmFyIjtjbGFzcyB2dCBleHRlbmRzIFdle2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcihlLCJyYW5nZUFyZWFUb29sdGlwIik7Y29uc3Qgcz1bQ3Qoe29mZnNldDoxLjUsbGVuZ3RoOjQscGF0dGVybjp7bG93OjMsaGlnaDo1LHBlcmlvZDo0fX0pLEN0KHtvZmZzZXQ6MS41LGxlbmd0aDo0LHBhdHRlcm46e2xvdzoyLjI1LGhpZ2g6NC4yNSxwZXJpb2Q6NH19KSxDdCh7b2Zmc2V0OjMsbGVuZ3RoOjQscGF0dGVybjp7bG93OjIuNSxoaWdoOjQuNSxwZXJpb2Q6NH19KV0scj1zLm1hcChlPT5lLm1hcCgoW2UsdF0pPT4oe3g6ZSxsb3c6dC0uODc1LGhpZ2g6dCsuODc1fSkpKSx7bGluZXM6byxhcmVhczpufT10aGlzLmNyZWF0ZVJhbmdlQXJlYSh0aGlzLnJvb3Qscix0aGlzLnNpemUsdGhpcy5wYWRkaW5nKTt0aGlzLmxpbmVzPW8sdGhpcy5hcmVhcz1uLHRoaXMudXBkYXRlQ29sb3JzKHQsaSl9dXBkYXRlQ29sb3JzKGUsdCl7ZT1TdChlLDEsMiksdD1TdCh0LDEsMiksdGhpcy5saW5lcy5mb3JFYWNoKChbZSxpXSxzKT0+e2UuZmlsbD12b2lkIDAsZS5zdHJva2U9dFtzXSxpLmZpbGw9dm9pZCAwLGkuc3Ryb2tlPXRbc119KSx0aGlzLmFyZWFzLmZvckVhY2goKHQsaSk9Pnt0LmZpbGw9ZVtpXX0pfWNyZWF0ZVJhbmdlQXJlYShlLHQsaSxzKXtjb25zdCByPXQucmVkdWNlKChlLHQpPT50LnJlZHVjZSgoZSx7eDp0fSk9Pk1hdGgubWluKGUsdCksZSksMS8wKSxuPXQucmVkdWNlKChlLHQpPT50LnJlZHVjZSgoZSx7eDp0fSk9Pk1hdGgubWF4KGUsdCksZSksLTEvMCksYT10LnJlZHVjZSgoZSx0KT0+dC5yZWR1Y2UoKGUse2xvdzp0fSk9Pk1hdGgubWluKGUsdCksZSksMS8wKSxsPXQucmVkdWNlKChlLHQpPT50LnJlZHVjZSgoZSx7aGlnaDp0fSk9Pk1hdGgubWF4KGUsdCksZSksLTEvMCksZD1uZXcgby5pLkxpbmVhclNjYWxlO2QuZG9tYWluPVtyLG5dLGQucmFuZ2U9W3MsaS1zXTtjb25zdCBjPTIqcyxoPW5ldyBvLmkuTGluZWFyU2NhbGU7aC5kb21haW49W2EsbF0saC5yYW5nZT1baS1jLGNdO2NvbnN0IHU9W10scD1bXTtyZXR1cm4gdC5tYXAoZT0+e2NvbnN0IHQ9bmV3IG8uaS5QYXRoLGk9bmV3IG8uaS5QYXRoLHM9bmV3IG8uaS5QYXRoO3JldHVybiB1LnB1c2goW3QsaV0pLHAucHVzaChzKSx0LnN0cm9rZVdpZHRoPTAsaS5zdHJva2VXaWR0aD0wLHMuc3Ryb2tlV2lkdGg9MCxzLmZpbGxPcGFjaXR5PS44LHQucGF0aC5jbGVhcigpLGkucGF0aC5jbGVhcigpLHMucGF0aC5jbGVhcigpLGUubWFwKChlLHIpPT57Y29uc3R7eDpvLGxvdzpuLGhpZ2g6YX09ZSxsPWQuY29udmVydChvKSxjPWguY29udmVydChuKSx1PWguY29udmVydChhKSxwPXI+MD8ibGluZVRvIjoibW92ZVRvIjtyZXR1cm4gdC5wYXRoW3BdKGwsdSksaS5wYXRoW3BdKGwsYykscy5wYXRoW3BdKGwsdSksW2wsY119KX0pLmZvckVhY2goKGUsdCk9Pntjb25zdCBpPWUubGVuZ3RoLTEscz1wW3RdO2ZvcihsZXQgdD1pO3Q+PTA7dC0tKXtjb25zdFtpLHJdPWVbdF07cy5wYXRoLmxpbmVUbyhpLHIpfX0pLGUuYXBwZW5kKHAuY29uY2F0KC4uLnUpKSx7bGluZXM6dSxhcmVhczpwfX19ZnVuY3Rpb24gQ3QoZSl7Y29uc3R7b2Zmc2V0OnQsbGVuZ3RoOmkscGF0dGVybjpzfT1lLHI9ZnVuY3Rpb24oZSx0LGkpe2NvbnN0e3BlcmlvZDpzfT1pLHI9ZS9zLG89WzAsLjVdLm1hcChlPT5lLXIpLm1hcCh5dCkuc29ydCgoZSx0KT0+ZS10KTtyZXR1cm4gQXJyYXkuZnJvbSh7bGVuZ3RoOk1hdGguZmxvb3Ioby5sZW5ndGgqKHMvdCkpfSwoZSx0KT0+b1t0JW8ubGVuZ3RoXStNYXRoLmZsb29yKHQvby5sZW5ndGgpKS5tYXAoZT0+ZSpzKS5tYXAodD0+bih0LGUsaSkpfSh0LGkscyksbz1pO3JldHVybiAwIT09ci5sZW5ndGgmJjA9PT1yWzBdWzBdfHxyLnVuc2hpZnQobigwLHQscykpLHJbci5sZW5ndGgtMV1bMF0hPT1vJiZyLnB1c2gobihvLHQscykpLHI7ZnVuY3Rpb24gbihlLHQsaSl7cmV0dXJuW2UsYSh0K2UsaSldfWZ1bmN0aW9uIGEoZSx0KXtjb25zdHtsb3c6aSxoaWdoOnMscGVyaW9kOnJ9PXQsbz15dChlL3IpO3JldHVybiBpKyhzLWkpKihvPi41PzEtMiooby0uNSk6MipvKX19ZnVuY3Rpb24geXQoZSl7Y29uc3QgdD1lJTE7cmV0dXJuIHQ8MD90KzE6dH1mdW5jdGlvbiBTdChlLHQsaSl7Y29uc3Qgcz1bLi4uZV0scj1zW3RdO3JldHVybiBzW3RdPXNbaV0sc1tpXT1yLHN9dnQuY2hhcnRUeXBlPSJyYW5nZUFyZWEiO2NsYXNzIHd0IGV4dGVuZHMgV2V7Y29uc3RydWN0b3IoZSx0LGkscyxyKXtzdXBlcihlLCJib3hQbG90VG9vbHRpcCIpO2NvbnN0IG49dGhpcy5wYWRkaW5nLGE9dGhpcy5zaXplLGw9WzExLDExLjUsMTAuNV0sZD1uZXcgby5pLkxpbmVhclNjYWxlO2QuZG9tYWluPVsuOCpsLnJlZHVjZSgoZSx0KT0+TWF0aC5taW4oZSx0KSwxLzApLDEuMipsLnJlZHVjZSgoZSx0KT0+TWF0aC5tYXgoZSx0KSwwKV0sZC5yYW5nZT1bYS0xLjUqbixuXTtjb25zdCBjPW5ldyBvLmkuQmFuZFNjYWxlO2MuZG9tYWluPWwubWFwKChlLHQpPT50KSxjLnJhbmdlPVtuLGEtbl0sYy5wYWRkaW5nSW5uZXI9LjQsYy5wYWRkaW5nT3V0ZXI9LjI7Y29uc3QgaD1NYXRoLnJvdW5kKGMuYmFuZHdpZHRoKSx1PU1hdGgucm91bmQoYy5iYW5kd2lkdGgvMik7dGhpcy5ib3hQbG90R3JvdXBzPWwubWFwKChlLHQpPT57bGV0W2kscyxyLG5dPVsuOCplLC45KmUsMS4xKmUsMS4yKmVdO2NvbnN0IGE9TWF0aC5yb3VuZChkLmNvbnZlcnQocikpLGw9TWF0aC5yb3VuZChjLmNvbnZlcnQodCkpLHA9TWF0aC5yb3VuZChsK2gpLGc9TWF0aC5yb3VuZChkLmNvbnZlcnQocykpLG09TWF0aC5yb3VuZChkLmNvbnZlcnQoaSkpLGY9TWF0aC5yb3VuZChkLmNvbnZlcnQoZSkpLHY9TWF0aC5yb3VuZChkLmNvbnZlcnQobikpLEM9bCt1LHk9bmV3IG8uaS5Hcm91cCxTPW5ldyBvLmkuUmVjdCx3PW5ldyBvLmkuTGluZSxiPW5ldyBvLmkuTGluZSxFPW5ldyBvLmkuTGluZSxSPW5ldyBvLmkuTGluZSx4PW5ldyBvLmkuTGluZTtyZXR1cm4gUy54PWwsUy55PWEsUy53aWR0aD1oLFMuaGVpZ2h0PWctYSxTLnN0cm9rZVdpZHRoPTEsUy5zdHJva2VPcGFjaXR5PS43NSxTLmNyaXNwPSEwLHRoaXMuc2V0TGluZVByb3BlcnRpZXModyxsLHAsZixmKSx0aGlzLnNldExpbmVQcm9wZXJ0aWVzKGIsQyxDLHYsYSksdGhpcy5zZXRMaW5lUHJvcGVydGllcyhFLEMsQyxtLGcpLHRoaXMuc2V0TGluZVByb3BlcnRpZXMoUixsLHAsdix2KSx0aGlzLnNldExpbmVQcm9wZXJ0aWVzKHgsbCxwLG0sbSkseS5hcHBlbmQoW1MsdyxiLEUsUix4XSkseX0pLHRoaXMudXBkYXRlQ29sb3JzKHQsaSxzLHIpLHRoaXMucm9vdC5hcHBlbmQodGhpcy5ib3hQbG90R3JvdXBzKX11cGRhdGVDb2xvcnMoZSx0LGkscyl7dmFyIHI7Y29uc3Qgbj1udWxsPT1pP3ZvaWQgMDppLnByb3BlcnRpZXMuZ2V0KG8uai5ERUZBVUxUX0JBQ0tHUk9VTkRfQ09MT1VSKSxhPW51bGwhPT0ocj1BcnJheS5pc0FycmF5KG4pP25bMF06bikmJnZvaWQgMCE9PXI/cjoid2hpdGUiO3RoaXMuYm94UGxvdEdyb3Vwcy5mb3JFYWNoKChpLHIpPT57dmFyIG47bnVsbD09PShuPWkuY2hpbGRyZW4pfHx2b2lkIDA9PT1ufHxuLmZvckVhY2goaT0+e2NvbnN0IG49ZVtyJWUubGVuZ3RoXTtpLmZpbGw9cz9uOm8uay5Db2xvci5pbnRlcnBvbGF0ZShuLGEpKC43KSxpLnN0cm9rZT10W3IldC5sZW5ndGhdfSl9KX1zZXRMaW5lUHJvcGVydGllcyhlLHQsaSxzLHIpe2UueDE9dCxlLngyPWksZS55MT1zLGUueTI9cixlLnN0cm9rZU9wYWNpdHk9Ljc1fX13dC5jaGFydFR5cGU9ImJveFBsb3QiO2NsYXNzIGJ0IGV4dGVuZHMgQmV7Y29uc3RydWN0b3IoZSx0LGkscyxyKXtzdXBlcihlLCJ0cmVlbWFwVG9vbHRpcCIpO2NvbnN0e3NpemU6bixwYWRkaW5nOmF9PXRoaXMsbD1bWzEsMV0sWzMsMiwxXV0sZD1sLmxlbmd0aCUyPT0wPy4zOi4yLGM9W2Esbi1hXSxoPWwubGVuZ3RoLHU9aCooaCsxKS8yLHA9ZC8oaC0xKSxnPWNbMV0tY1swXSxtPWctZDtsZXQgZj1jWzBdO3RoaXMucmVjdHM9bC5yZWR1Y2UoKGUsdCxpKT0+e251bGwhPWV8fChlPVtdKTtjb25zdCBzPW0qKChoLWkpL3UpLHI9dC5sZW5ndGgsbj10LnJlZHVjZSgoZSx0KT0+ZSt0LDApLGE9ZC8oci0xfHwxKSxsPXI+MT9nLWQ6ZztsZXQgdj1jWzBdO2NvbnN0IEM9dC5tYXAoZT0+e2NvbnN0IHQ9bmV3IG8uaS5SZWN0LGk9bCplL247cmV0dXJuIHQueD1mLHQueT12LHQud2lkdGg9cyx0LmhlaWdodD1pLHQuc3Ryb2tlV2lkdGg9Ljc1LHQuY3Jpc3A9ITAsdis9aSthLHR9KTtyZXR1cm4gZis9cytwLGUucHVzaCguLi5DKSxlfSxbXSksdGhpcy51cGRhdGVDb2xvcnModCxpLHMscik7Y29uc3Qgdj1uZXcgby5pLkdyb3VwO3Yuc2V0Q2xpcFJlY3RJbkdyb3VwQ29vcmRpbmF0ZVNwYWNlKG5ldyBvLmkuQkJveChhLGEsbi1hLG4tYSkpLHYuYXBwZW5kKHRoaXMucmVjdHMpLHRoaXMucm9vdC5hcHBlbmQodil9dXBkYXRlQ29sb3JzKGUsdCxpLHMpe3ZhciByO2NvbnN0e3Byb3BlcnRpZXM6bn09bnVsbCE9aT9pOnt9LGE9bnVsbD09bj92b2lkIDA6bi5nZXQoby5qLkRFRkFVTFRfQkFDS0dST1VORF9DT0xPVVIpLGw9bnVsbCE9PShyPUFycmF5LmlzQXJyYXkoYSk/YVswXTphKSYmdm9pZCAwIT09cj9yOiJ3aGl0ZSI7dGhpcy5yZWN0cy5mb3JFYWNoKChpLHIpPT57aS5maWxsPWVbciV0Lmxlbmd0aF0saS5zdHJva2U9cz90W3IldC5sZW5ndGhdOmx9KX19YnQuY2hhcnRUeXBlPSJ0cmVlbWFwIjtjbGFzcyBFdCBleHRlbmRzIGN0e2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcihlLCJzdW5idXJzdFRvb2x0aXAiKSx0aGlzLmRhdGE9W1tbXSxbXV0sW1tdLFtdXSxbW10sW11dXSx0aGlzLmFuZ2xlT2Zmc2V0PS1NYXRoLlBJLzIsdGhpcy5pbm5lclJhZGl1c1JhdGlvPTAsdGhpcy5zaG93UmFkaXVzQXhpc0xpbmU9ITEsdGhpcy5zaG93QW5nbGVBeGlzTGluZXM9ITE7Y29uc3R7ZGF0YTpzLHNpemU6cixwYWRkaW5nOm4sYW5nbGVPZmZzZXQ6YSxpbm5lclJhZGl1c1JhdGlvOmx9PXRoaXMsZD0oci0yKm4pLzIsYz1bYSswLGErMipNYXRoLlBJXSxoPU1hdGguYWJzKGNbMV0tY1swXSksdT1bZCpsLGRdLHA9TWF0aC5hYnModVsxXS11WzBdKTtsZXQgZz0wO2NvbnN0IG09KGUsdCk9PntlLmZvckVhY2goZT0+e2NvbnN0IGk9dCsxO2c9TWF0aC5tYXgoZyxpKSxtKGUsaSl9KX07bShzLDApO2NvbnN0IGY9cC9nLHY9dGhpcy5zaXplLzIsQz1jWzBdO3RoaXMuc2VyaWVzPVtdO2NvbnN0IHk9KGUsdCxpLHMscik9PntpZighQXJyYXkuaXNBcnJheShlKSlyZXR1cm47Y29uc3Qgbj10KzE7bGV0IGE9aTtlLmZvckVhY2goKGUsaSxsKT0+e2xldCBkPXI7ZHx8KGQ9bmV3IG8uaS5Hcm91cCx0aGlzLnNlcmllcy5wdXNoKGQpKTtjb25zdCBjPXVbMF0rdCpmLGg9dVswXStuKmYscD0xL2wubGVuZ3RoLGc9YSxtPWcrcypwLEM9bmV3IG8uaS5TZWN0b3I7Qy5jZW50ZXJYPXYsQy5jZW50ZXJZPXYsQy5pbm5lclJhZGl1cz1jLEMub3V0ZXJSYWRpdXM9aCxDLnN0YXJ0QW5nbGU9ZyxDLmVuZEFuZ2xlPW0sQy5zdHJva2U9dm9pZCAwLEMuc3Ryb2tlV2lkdGg9MCxDLmluc2V0PS43NSxhPW0sZC5hcHBlbmQoQykseShlLG4sZyxNYXRoLmFicyhtLWcpLGQpfSl9O3kocywwLEMsaCksdGhpcy5yb290LmFwcGVuZCh0aGlzLnNlcmllcyksdGhpcy51cGRhdGVDb2xvcnModCxpKX11cGRhdGVDb2xvcnMoZSx0KXt0aGlzLnNlcmllcy5mb3JFYWNoKChpLHMpPT57dmFyIHI7bnVsbD09PShyPWkuY2hpbGRyZW4pfHx2b2lkIDA9PT1yfHxyLmZvckVhY2goaT0+e2kuZmlsbD1lW3MlZS5sZW5ndGhdLGkuc3Ryb2tlPXRbcyV0Lmxlbmd0aF19KX0pfX1FdC5jaGFydFR5cGU9InN1bmJ1cnN0IjtjbGFzcyBSdCBleHRlbmRzIEJle2NvbnN0cnVjdG9yKGUsdCxpLHMscil7dmFyIG4sYTtzdXBlcihlLCJoZWF0bWFwVG9vbHRpcCIpO2NvbnN0e3NpemU6bCxwYWRkaW5nOmR9PXRoaXMsYz1BcnJheS5mcm9tKHtsZW5ndGg6M30sKGUsdCk9PkFycmF5LmZyb20oe2xlbmd0aDozfSwoZSx0KT0+dCkpLGg9Yy5tYXAoKGUsdCk9PnQpLHU9bmV3IG8uaS5CYW5kU2NhbGU7dS5kb21haW49aCx1LnJhbmdlPVtkLGwtZF0sdS5wYWRkaW5nSW5uZXI9LjAxLHUucGFkZGluZ091dGVyPS4xO2NvbnN0IHA9bmV3IG8uaS5CYW5kU2NhbGU7cC5kb21haW49aCxwLnJhbmdlPVtkLGwtZF0scC5wYWRkaW5nSW5uZXI9LjAxLHAucGFkZGluZ091dGVyPS4xO2NvbnN0IGc9bnVsbCE9PShuPXUuYmFuZHdpZHRoKSYmdm9pZCAwIT09bj9uOjAsbT1udWxsIT09KGE9cC5iYW5kd2lkdGgpJiZ2b2lkIDAhPT1hP2E6MDt0aGlzLnJlY3RzPWMucmVkdWNlKChlLHQsaSk9PntudWxsIT1lfHwoZT1bXSk7Y29uc3Qgcz10Lm1hcCgoZSx0KT0+e2NvbnN0IHM9bmV3IG8uaS5SZWN0O3JldHVybiBzLng9dS5jb252ZXJ0KGkpLHMueT1wLmNvbnZlcnQodCkscy53aWR0aD1nLHMuaGVpZ2h0PW0scy5zdHJva2VXaWR0aD0wLHMuY3Jpc3A9ITAsc30pO3JldHVybiBlLnB1c2goLi4ucyksZX0sW10pLHRoaXMudXBkYXRlQ29sb3JzKHQsaSxzLHIpO2NvbnN0IGY9bmV3IG8uaS5Hcm91cDtmLnNldENsaXBSZWN0SW5Hcm91cENvb3JkaW5hdGVTcGFjZShuZXcgby5pLkJCb3goZCxkLGwtZCxsLWQpKSxmLmFwcGVuZCh0aGlzLnJlY3RzKSx0aGlzLnJvb3QuYXBwZW5kKGYpfXVwZGF0ZUNvbG9ycyhlLHQsaSxzKXt2YXIgcjtjb25zdHtwcm9wZXJ0aWVzOm59PW51bGwhPWk/aTp7fSxhPW51bGw9PW4/dm9pZCAwOm4uZ2V0KG8uai5ERUZBVUxUX0RJVkVSR0lOR19TRVJJRVNfQ09MT1VSX1JBTkdFKSxsPW51bGw9PW4/dm9pZCAwOm4uZ2V0KG8uai5ERUZBVUxUX0JBQ0tHUk9VTkRfQ09MT1VSKSxkPW51bGwhPT0ocj1BcnJheS5pc0FycmF5KGwpP2xbMF06bCkmJnZvaWQgMCE9PXI/cjoid2hpdGUiLGM9cz9bZVswXSxlWzFdXTphLGg9cz90WzBdOmQ7dGhpcy5yZWN0cy5mb3JFYWNoKChlLHQpPT57ZS5maWxsPW8uay5Db2xvci5pbnRlcnBvbGF0ZShjWzBdLGNbMV0pKC4yKnQpLGUuc3Ryb2tlPWh9KX19UnQuY2hhcnRUeXBlPSJoZWF0bWFwIjtjbGFzcyB4dCBleHRlbmRzIFdle2NvbnN0cnVjdG9yKGUsdCxpLHMscil7c3VwZXIoZSwid2F0ZXJmYWxsVG9vbHRpcCIpLHRoaXMuZGF0YT1bNCwzLC0zLDYsLTNdLHRoaXMuYmFycz10aGlzLmNyZWF0ZVdhdGVyZmFsbCh0aGlzLnJvb3QsdGhpcy5kYXRhLHRoaXMuc2l6ZSx0aGlzLnBhZGRpbmcsInZlcnRpY2FsIikuYmFycyx0aGlzLnVwZGF0ZUNvbG9ycyh0LGkscyxyKX11cGRhdGVDb2xvcnMoZSx0LGkscyl7dmFyIHIsbjtjb25zdHtkYXRhOmF9PXRoaXMse3Byb3BlcnRpZXM6bH09bnVsbCE9aT9pOnt9LGQ9e2ZpbGw6ZVswXSxzdHJva2U6dFswXX0sYz17ZmlsbDplWzFdLHN0cm9rZTp0WzFdfSxoPXM/ZDpudWxsIT09KHI9bnVsbD09bD92b2lkIDA6bC5nZXQoby5qLkRFRkFVTFRfV0FURVJGQUxMX1NFUklFU19QT1NJVElWRV9DT0xPVVJTKSkmJnZvaWQgMCE9PXI/cjpkLHU9cz9jOm51bGwhPT0obj1udWxsPT1sP3ZvaWQgMDpsLmdldChvLmouREVGQVVMVF9XQVRFUkZBTExfU0VSSUVTX05FR0FUSVZFX0NPTE9VUlMpKSYmdm9pZCAwIT09bj9uOmM7dGhpcy5iYXJzLmZvckVhY2goKGUsdCk9Pntjb25zdCBpPWFbdF0+PTA7ZS5maWxsPWk/aC5maWxsOnUuZmlsbCxlLnN0cm9rZT1pP2guc3Ryb2tlOnUuc3Ryb2tlfSl9Y3JlYXRlV2F0ZXJmYWxsKGUsdCxpLHMscil7Y29uc3Qgbj0yKnMse3Byb2Nlc3NlZERhdGE6YSxtaW46bCxtYXg6ZH09S2UodC5tYXAoZT0+W2VdKSksYz1hLnJlZHVjZSgoZSx0KT0+ZS5jb25jYXQodCksW10pLGg9bmV3IG8uaS5MaW5lYXJTY2FsZTtoLmRvbWFpbj1bTWF0aC5taW4obCwwKSxkXSxoLnJhbmdlPVtpLW4sbl07Y29uc3QgdT1uZXcgby5pLkJhbmRTY2FsZTt1LmRvbWFpbj10Lm1hcCgoZSx0KT0+dCksdS5yYW5nZT1bcyxpLXNdLHUucGFkZGluZ0lubmVyPS4yLHUucGFkZGluZ091dGVyPS4zO2NvbnN0IHA9dS5iYW5kd2lkdGgsZz1uZXcgby5pLlBhdGg7Zy5zdHJva2U9IiM1NzU3NTciLGcuc3Ryb2tlV2lkdGg9MDtjb25zdCBtPU1hdGguZmxvb3IoZy5zdHJva2VXaWR0aCklMi8yLGY9Zy5wYXRoO2YuY2xlYXIoKTtjb25zdCB2PSJob3Jpem9udGFsIj09PXIsQz1jLm1hcCgoZSxpKT0+e2NvbnN0IHM9aT4wP2NbaS0xXTowLHI9dFtpXT4wLG49TWF0aC5yb3VuZChoLmNvbnZlcnQoZSkpLGE9TWF0aC5yb3VuZChoLmNvbnZlcnQocykpLGw9KHI/bjphKS1tLGQ9KHI/YTpuKSttLGc9TWF0aC5hYnMoZC1sKSxDPXUuY29udmVydChpKSx5PW5ldyBvLmkuUmVjdDt5Lng9dj9sOkMseS55PXY/QzpsLHkud2lkdGg9dj9nOnAseS5oZWlnaHQ9dj9wOmcseS5zdHJva2VXaWR0aD0wLHkuY3Jpc3A9ITA7Y29uc3QgUz1uK20sdz1hK207aWYoaT4wKXtjb25zdCBlPXY/dzp5LngsdD12P3kueTp3O2YubGluZVRvKGUsdCl9Y29uc3QgYj12P1M6eS54LEU9dj95Lnk6UztyZXR1cm4gZi5tb3ZlVG8oYixFKSx5fSk7cmV0dXJuIGUuYXBwZW5kKFtnLC4uLkNdKSx7YmFyczpDfX19eHQuY2hhcnRUeXBlPSJ3YXRlcmZhbGwiO2NsYXNzIFR0IGV4dGVuZHMgV2V7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKGUsImNvbHVtbkxpbmVDb21ib1Rvb2x0aXAiKSx0aGlzLmNvbHVtbkRhdGE9WzMsNF0sdGhpcy5saW5lRGF0YT1bWzUsNCw2LDUsNF1dO2NvbnN0e3Jvb3Q6cyxjb2x1bW5EYXRhOnIsbGluZURhdGE6byxzaXplOm4scGFkZGluZzphfT10aGlzO3RoaXMuY29sdW1ucz1qZSh7c3RhY2tlZDohMSxyb290OnMsZGF0YTpyLHNpemU6bixwYWRkaW5nOmEseFNjYWxlRG9tYWluOlswLDFdLHlTY2FsZURvbWFpbjpbMCw0XSx4U2NhbGVQYWRkaW5nOi41fSkscy5hcHBlbmQodGhpcy5jb2x1bW5zKSx0aGlzLmxpbmVzPVVlKHMsbyxuLGEpLHRoaXMudXBkYXRlQ29sb3JzKHQsaSl9dXBkYXRlQ29sb3JzKGUsdCl7dGhpcy5jb2x1bW5zLmZvckVhY2goKGkscyk9PntpLmZpbGw9ZVtzXSxpLnN0cm9rZT10W3NdfSksdGhpcy5saW5lcy5mb3JFYWNoKCh0LGkpPT57dC5zdHJva2U9ZVtpKzJdfSl9fVR0LmNoYXJ0VHlwZT0iY29sdW1uTGluZUNvbWJvIjtjbGFzcyBEdCBleHRlbmRzIFdle2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcihlLCJhcmVhQ29sdW1uQ29tYm9Ub29sdGlwIiksdGhpcy5jb2x1bW5EYXRhPVszLDQuNV0sdGhpcy5hcmVhRGF0YT1bWzUsNCw2LDUsNF1dO2NvbnN0e3Jvb3Q6cyxjb2x1bW5EYXRhOnIsYXJlYURhdGE6bixzaXplOmEscGFkZGluZzpsfT10aGlzO3RoaXMuY29sdW1ucz1qZSh7c3RhY2tlZDohMSxyb290OnMsZGF0YTpyLHNpemU6YSxwYWRkaW5nOmwseFNjYWxlRG9tYWluOlswLDFdLHlTY2FsZURvbWFpbjpbMCw2XSx4U2NhbGVQYWRkaW5nOi41fSk7Y29uc3QgZD1uZXcgby5pLkJhbmRTY2FsZTtkLnJhbmdlPVtsLGEtbF0sZC5kb21haW49WzAsMSwyLDMsNF0sZC5wYWRkaW5nSW5uZXI9MSxkLnBhZGRpbmdPdXRlcj0wO2NvbnN0IGM9bmV3IG8uaS5MaW5lYXJTY2FsZTtjLnJhbmdlPVthLWwsbF0sYy5kb21haW49WzAsNl07Y29uc3QgaD1bXSx1PWMuY29udmVydCgwKSxwPWQuY29udmVydCgwKTtuLmZvckVhY2goKGUsdCk9Pntjb25zdCBpPWhbdF18fChoW3RdPVtdKTtlLmZvckVhY2goKGUsdCk9Pntjb25zdCBzPWUscj10LG89ZC5jb252ZXJ0KHIpLG49Yy5jb252ZXJ0KHMpO2lbdF09e3g6byx5Om59fSk7Y29uc3Qgcz1kLmNvbnZlcnQoZS5sZW5ndGgtMSk7aFt0XS5wdXNoKHt4OnMseTp1fSx7eDpwLHk6dX0pfSksdGhpcy5hcmVhcz1oLm1hcChlPT57Y29uc3QgdD1uZXcgby5pLlBhdGg7dC5zdHJva2VXaWR0aD0wLHQuZmlsbE9wYWNpdHk9Ljg7Y29uc3QgaT10LnBhdGg7cmV0dXJuIGUuZm9yRWFjaCgoZSx0KT0+aVt0PjA/ImxpbmVUbyI6Im1vdmVUbyJdKGUueCxlLnkpKSx0fSkscy5hcHBlbmQodGhpcy5hcmVhcykscy5hcHBlbmQoW10uY29uY2F0LmFwcGx5KFtdLHRoaXMuY29sdW1ucykpLHRoaXMudXBkYXRlQ29sb3JzKHQsaSl9dXBkYXRlQ29sb3JzKGUsdCl7dGhpcy5hcmVhcy5mb3JFYWNoKChpLHMpPT57aS5maWxsPWVbc10saS5zdHJva2U9dFtzXX0pLHRoaXMuY29sdW1ucy5mb3JFYWNoKChpLHMpPT57aS5maWxsPWVbcysxXSxpLnN0cm9rZT10W3MrMV19KX19RHQuY2hhcnRUeXBlPSJhcmVhQ29sdW1uQ29tYm8iO2NsYXNzIE90IGV4dGVuZHMgQmV7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKGUsImN1c3RvbUNvbWJvVG9vbHRpcCIpLHRoaXMuY29sdW1uRGF0YT1bMyw0XSx0aGlzLmxpbmVEYXRhPVtbNSw0LDYsNSw0XV07Y29uc3R7cm9vdDpzLGNvbHVtbkRhdGE6cixsaW5lRGF0YTpuLHNpemU6YSxwYWRkaW5nOmx9PXRoaXM7dGhpcy5jb2x1bW5zPWplKHtzdGFja2VkOiExLHJvb3Q6cyxkYXRhOnIsc2l6ZTphLHBhZGRpbmc6bCx4U2NhbGVEb21haW46WzAsMV0seVNjYWxlRG9tYWluOlswLDRdLHhTY2FsZVBhZGRpbmc6LjV9KSxzLmFwcGVuZCh0aGlzLmNvbHVtbnMpLHRoaXMubGluZXM9VWUocyxuLGEsbCk7Y29uc3QgZD1uZXcgby5pLkxpbmU7ZC54MT1sLGQueTE9bCxkLngyPWwsZC55Mj1hLWwrMyxkLnN0cm9rZT0iZ3JleSI7Y29uc3QgYz1uZXcgby5pLkxpbmU7Yy54MT1sLTMrMSxjLnkxPWEtbCxjLngyPWEtbCsxLGMueTI9YS1sLGMuc3Ryb2tlPSJncmV5Ijtjb25zdCBoPW5ldyBvLmkuUGF0aDt0aGlzLmJ1aWxkUGVuSWNvblBhdGgoaCksaC5maWxsPSJ3aGl0ZXNtb2tlIixoLnN0cm9rZT0iZGFya3NsYXRlZ3JleSIsaC5zdHJva2VXaWR0aD0xLHMuYXBwZW5kKFtjLGQsaF0pLHRoaXMudXBkYXRlQ29sb3JzKHQsaSl9dXBkYXRlQ29sb3JzKGUsdCl7dGhpcy5jb2x1bW5zLmZvckVhY2goKGkscyk9PntpLmZpbGw9ZVtzXSxpLnN0cm9rZT10W3NdfSksdGhpcy5saW5lcy5mb3JFYWNoKCh0LGkpPT57dC5zdHJva2U9ZVtpKzJdfSl9YnVpbGRQZW5JY29uUGF0aChlKXtjb25zdHtwYXRoOnR9PWU7dC5tb3ZlVG8oMjUuNzYsNDMuNDYpLHQubGluZVRvKDMxLjI3LDQ4LjUzKSx0Lm1vdmVUbyg0OS44NiwyMiksdC5saW5lVG8oNDkuODYsMjIpLHQuY3ViaWNDdXJ2ZVRvKDQ5LjAxOTk0NjU5MDUzMzQ1LDIxLjMxNzUxNDkzMzUxMDk3NCw0Ny44OTU5MzgzNDM0ODUyOSwyMS4wOTY0NTk5NzgyNTgxNyw0Ni44NiwyMS40MSksdC5saW5lVG8oNDYuODYsMjEuNDEpLHQuY3ViaWNDdXJ2ZVRvKDQ1LjU1NDYwMDM1OTg1MzYxLDIxLjc3MjYwMTY3ODUwNzg3LDQ0LjM4Nzc3MDgxMTIxOTY2LDIyLjUxNzk3OTM2MDMyMTc5Miw0My41MSwyMy41NSksdC5saW5lVG8oMjUuNTEsNDMuOCksdC5saW5lVG8oMjUuNDMsNDMuODkpLHQubGluZVRvKDIzLjAxLDUxLjg5KSx0LmxpbmVUbygyMi44Myw1Mi40NiksdC5saW5lVG8oMzEuMDIsNDguODYpLHQubGluZVRvKDQ5LjAyLDI4LjUyKSx0LmxpbmVUbyg0OS4wMiwyOC41MiksdC5jdWJpY0N1cnZlVG8oNDkuOTQwNzE2NDYxNTk2MjI0LDI3LjUyMTkxNDIyMTI0NjA4NSw1MC41NDMwMjYzMTA1OTU4NywyNi4yNzIwMzQyNDU1NzYzLDUwLjc1LDI0LjkzKSx0LmxpbmVUbyg1MC43NSwyNC45MyksdC5jdWJpY0N1cnZlVG8oNTAuOTUzNjMzNzQ5ODgzMDgsMjMuODY2Mzc5ODQ2NTEyODE0LDUwLjYyMDgwNjQwMjMyMzM0LDIyLjc3MDY2NzM0Mjc0ODcxLDQ5Ljg2LDIyKSx0LmNsb3NlUGF0aCgpLHQubW92ZVRvKDQxLjc2LDI1LjUpLHQubGluZVRvKDQ3LjM0LDMwLjUpLHQubW92ZVRvKDQwLjc0LDI2LjY1KSx0LmxpbmVUbyg0Ni4yNSwzMS43MSl9fU90LmNoYXJ0VHlwZT0iY3VzdG9tQ29tYm8iO3ZhciBBdD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjb25zdCBQdD17Y29sdW1uR3JvdXA6e2NvbHVtbjp7cmFuZ2U6ITAscGl2b3Q6ITAsZW50ZXJwcmlzZTohMSxpY29uOlllfSxzdGFja2VkQ29sdW1uOntyYW5nZTohMCxwaXZvdDohMCxlbnRlcnByaXNlOiExLGljb246JGV9LG5vcm1hbGl6ZWRDb2x1bW46e3JhbmdlOiEwLHBpdm90OiEwLGVudGVycHJpc2U6ITEsaWNvbjpYZX19LGJhckdyb3VwOntiYXI6e3JhbmdlOiEwLHBpdm90OiEwLGVudGVycHJpc2U6ITEsaWNvbjpxZX0sc3RhY2tlZEJhcjp7cmFuZ2U6ITAscGl2b3Q6ITAsZW50ZXJwcmlzZTohMSxpY29uOlplfSxub3JtYWxpemVkQmFyOntyYW5nZTohMCxwaXZvdDohMCxlbnRlcnByaXNlOiExLGljb246UWV9fSxwaWVHcm91cDp7cGllOntyYW5nZTohMCxwaXZvdDohMCxlbnRlcnByaXNlOiExLGljb246dHR9LGRvbnV0OntyYW5nZTohMCxwaXZvdDohMCxlbnRlcnByaXNlOiExLGljb246ZXR9LGRvdWdobnV0OntyYW5nZTohMCxwaXZvdDohMCxlbnRlcnByaXNlOiExLGljb246ZXR9fSxsaW5lR3JvdXA6e2xpbmU6e3JhbmdlOiEwLHBpdm90OiEwLGVudGVycHJpc2U6ITEsaWNvbjppdH19LHNjYXR0ZXJHcm91cDp7c2NhdHRlcjp7cmFuZ2U6ITAscGl2b3Q6ITAsZW50ZXJwcmlzZTohMSxpY29uOnN0fSxidWJibGU6e3JhbmdlOiEwLHBpdm90OiEwLGVudGVycHJpc2U6ITEsaWNvbjpydH19LGFyZWFHcm91cDp7YXJlYTp7cmFuZ2U6ITAscGl2b3Q6ITAsZW50ZXJwcmlzZTohMSxpY29uOm90fSxzdGFja2VkQXJlYTp7cmFuZ2U6ITAscGl2b3Q6ITAsZW50ZXJwcmlzZTohMSxpY29uOm50fSxub3JtYWxpemVkQXJlYTp7cmFuZ2U6ITAscGl2b3Q6ITAsZW50ZXJwcmlzZTohMSxpY29uOmF0fX0scG9sYXJHcm91cDp7cmFkYXJMaW5lOntyYW5nZTohMCxwaXZvdDohMSxlbnRlcnByaXNlOiEwLGljb246cHR9LHJhZGFyQXJlYTp7cmFuZ2U6ITAscGl2b3Q6ITEsZW50ZXJwcmlzZTohMCxpY29uOmd0fSxuaWdodGluZ2FsZTp7cmFuZ2U6ITAscGl2b3Q6ITEsZW50ZXJwcmlzZTohMCxpY29uOm10fSxyYWRpYWxDb2x1bW46e3JhbmdlOiEwLHBpdm90OiExLGVudGVycHJpc2U6ITAsaWNvbjpodH0scmFkaWFsQmFyOntyYW5nZTohMCxwaXZvdDohMSxlbnRlcnByaXNlOiEwLGljb246dXR9fSxzdGF0aXN0aWNhbEdyb3VwOntib3hQbG90OntyYW5nZTohMCxwaXZvdDohMSxlbnRlcnByaXNlOiEwLGljb246d3R9LGhpc3RvZ3JhbTp7cmFuZ2U6ITAscGl2b3Q6ITEsZW50ZXJwcmlzZTohMSxpY29uOmx0fSxyYW5nZUJhcjp7cmFuZ2U6ITAscGl2b3Q6ITEsZW50ZXJwcmlzZTohMCxpY29uOmZ0fSxyYW5nZUFyZWE6e3JhbmdlOiEwLHBpdm90OiExLGVudGVycHJpc2U6ITAsaWNvbjp2dH19LGhpZXJhcmNoaWNhbEdyb3VwOnt0cmVlbWFwOntyYW5nZTohMCxwaXZvdDohMCxlbnRlcnByaXNlOiEwLGljb246YnR9LHN1bmJ1cnN0OntyYW5nZTohMCxwaXZvdDohMCxlbnRlcnByaXNlOiEwLGljb246RXR9fSxzcGVjaWFsaXplZEdyb3VwOntoZWF0bWFwOntyYW5nZTohMCxwaXZvdDohMSxlbnRlcnByaXNlOiEwLGljb246UnR9LHdhdGVyZmFsbDp7cmFuZ2U6ITAscGl2b3Q6ITEsZW50ZXJwcmlzZTohMCxpY29uOnh0fX0sY29tYmluYXRpb25Hcm91cDp7Y29sdW1uTGluZUNvbWJvOntyYW5nZTohMCxwaXZvdDohMCxlbnRlcnByaXNlOiExLGljb246VHR9LGFyZWFDb2x1bW5Db21ibzp7cmFuZ2U6ITAscGl2b3Q6ITAsZW50ZXJwcmlzZTohMSxpY29uOkR0fSxjdXN0b21Db21ibzp7cmFuZ2U6ITAscGl2b3Q6ITAsZW50ZXJwcmlzZTohMSxpY29uOk90fX19O2NsYXNzIE10IGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3IoZSx0LGkscixvLG49cy5ERUZBVUxUX0NIQVJUX0dST1VQUyl7c3VwZXIoTXQuVEVNUExBVEUpLHRoaXMud3JhcHBlcnM9e30sdGhpcy5jaGFydENvbnRyb2xsZXI9ZSx0aGlzLmZpbGxzPXQsdGhpcy5zdHJva2VzPWksdGhpcy50aGVtZVRlbXBsYXRlUGFyYW1ldGVycz1yLHRoaXMuaXNDdXN0b21UaGVtZT1vLHRoaXMuY2hhcnRHcm91cHM9T2JqZWN0LmFzc2lnbih7fSxuKX1pbml0KCl7Y29uc3QgZT10aGlzLmdldEd1aSgpLHQ9dGhpcy5jaGFydENvbnRyb2xsZXIuaXNFbnRlcnByaXNlKCksaT10aGlzLmNoYXJ0Q29udHJvbGxlci5pc1Bpdm90Q2hhcnQoKSxyPSFpLG89T2JqZWN0LmtleXModGhpcy5jaGFydEdyb3VwcykubWFwKGU9Pnt2YXIgbztjb25zdCBuPWUgaW4gUHQ/UHRbZV06dm9pZCAwO2lmKCFuKXJldHVybiBzLl8ud2Fybk9uY2UoYGludmFsaWQgY2hhcnRHcm91cHNEZWYgY29uZmlnICcke2V9J2ApLG51bGw7Y29uc3QgYT0obnVsbCE9PShvPXRoaXMuY2hhcnRHcm91cHNbZV0pJiZ2b2lkIDAhPT1vP286W10pLm1hcChvPT57Y29uc3QgYT1vIGluIG4/bltvXTp2b2lkIDA7cmV0dXJuIGE/IXQmJmEuZW50ZXJwcmlzZT9udWxsOnImJmEucmFuZ2V8fGkmJmEucGl2b3Q/YTpudWxsOihzLl8ud2Fybk9uY2UoYGludmFsaWQgY2hhcnRHcm91cHNEZWYgY29uZmlnICcke2V9LiR7b30nYCksbnVsbCl9KS5maWx0ZXIoZT0+bnVsbCE9ZSk7cmV0dXJuIDA9PT1hLmxlbmd0aD9udWxsOntsYWJlbDp0aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZShlKSxpdGVtczphfX0pLmZpbHRlcihlPT5udWxsIT1lKTtmb3IoY29uc3R7bGFiZWw6dCxpdGVtczppfW9mIG8pe2NvbnN0IHI9dGhpcy5jcmVhdGVCZWFuKG5ldyBzLkFnR3JvdXBDb21wb25lbnQoe3RpdGxlOnQsc3VwcHJlc3NFbmFibGVkQ2hlY2tib3g6ITAsZW5hYmxlZDohMCxzdXBwcmVzc09wZW5DbG9zZUljb25zOiEwLGNzc0lkZW50aWZpZXI6ImNoYXJ0cy1zZXR0aW5ncyIsZGlyZWN0aW9uOiJob3Jpem9udGFsIn0pKTtmb3IoY29uc3QgZSBvZiBpKXtjb25zdCB0PWUuaWNvbixpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2kuY2xhc3NMaXN0LmFkZCgiYWctY2hhcnQtbWluaS10aHVtYm5haWwiKTtjb25zdCBzPXQuY2hhcnRUeXBlO3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGksImNsaWNrIiwoKT0+e3RoaXMuY2hhcnRDb250cm9sbGVyLnNldENoYXJ0VHlwZShzKSx0aGlzLnVwZGF0ZVNlbGVjdGVkTWluaUNoYXJ0KCl9KSx0aGlzLndyYXBwZXJzW3NdPWksdGhpcy5jcmVhdGVCZWFuKG5ldyB0KGksdGhpcy5maWxscyx0aGlzLnN0cm9rZXMsdGhpcy50aGVtZVRlbXBsYXRlUGFyYW1ldGVycyx0aGlzLmlzQ3VzdG9tVGhlbWUpKSxyLmFkZEl0ZW0oaSl9ZS5hcHBlbmRDaGlsZChyLmdldEd1aSgpKX0hdGhpcy5jaGFydENvbnRyb2xsZXIuY3VzdG9tQ29tYm9FeGlzdHMoKSYmdGhpcy5jaGFydEdyb3Vwcy5jb21iaW5hdGlvbkdyb3VwJiYodGhpcy5jaGFydEdyb3Vwcy5jb21iaW5hdGlvbkdyb3VwPXRoaXMuY2hhcnRHcm91cHMuY29tYmluYXRpb25Hcm91cC5maWx0ZXIoZT0+ImN1c3RvbUNvbWJvIiE9PWUpKSx0aGlzLnVwZGF0ZVNlbGVjdGVkTWluaUNoYXJ0KCl9dXBkYXRlU2VsZWN0ZWRNaW5pQ2hhcnQoKXtjb25zdCBlPXRoaXMuY2hhcnRDb250cm9sbGVyLmdldENoYXJ0VHlwZSgpO2Zvcihjb25zdCB0IGluIHRoaXMud3JhcHBlcnMpe2NvbnN0IGk9dD09PWU7dGhpcy53cmFwcGVyc1t0XS5jbGFzc0xpc3QudG9nZ2xlKCJhZy1zZWxlY3RlZCIsaSl9fX1NdC5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctY2hhcnQtc2V0dGluZ3MtbWluaS13cmFwcGVyIj48L2Rpdj4nLEF0KFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIpXSxNdC5wcm90b3R5cGUsImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIix2b2lkIDApLEF0KFtzLlBvc3RDb25zdHJ1Y3RdLE10LnByb3RvdHlwZSwiaW5pdCIsbnVsbCk7dmFyIEx0PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIEZ0IGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoRnQuVEVNUExBVEUpLHRoaXMubWluaUNoYXJ0c0NvbnRhaW5lcnM9W10sdGhpcy5jYXJkSXRlbXM9W10sdGhpcy5hY3RpdmVQYWxldHRlSW5kZXg9MCx0aGlzLnBhbGV0dGVzPVtdLHRoaXMudGhlbWVzPVtdLHRoaXMuY2hhcnRDb250cm9sbGVyPWV9cG9zdENvbnN0cnVjdCgpe3RoaXMucmVzZXRQYWxldHRlcygpLHRoaXMuZVByZXZCdG4uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmJlZ2luIixzLl8uY3JlYXRlSWNvbk5vU3BhbigicHJldmlvdXMiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKSksdGhpcy5lTmV4dEJ0bi5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyYmVnaW4iLHMuXy5jcmVhdGVJY29uTm9TcGFuKCJuZXh0Iix0aGlzLmdyaWRPcHRpb25zU2VydmljZSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZVByZXZCdG4sImNsaWNrIiwoKT0+dGhpcy5zZXRBY3RpdmVQYWxldHRlKHRoaXMuZ2V0UHJldigpLCJsZWZ0IikpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZU5leHRCdG4sImNsaWNrIiwoKT0+dGhpcy5zZXRBY3RpdmVQYWxldHRlKHRoaXMuZ2V0TmV4dCgpLCJyaWdodCIpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmNoYXJ0Q29udHJvbGxlcixWLkVWRU5UX0NIQVJUX1RZUEVfQ0hBTkdFRCwoKT0+dGhpcy5yZXNldFBhbGV0dGVzKCEwKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jaGFydENvbnRyb2xsZXIsVi5FVkVOVF9DSEFSVF9BUElfVVBEQVRFLCgpPT50aGlzLnJlc2V0UGFsZXR0ZXMoITApKSx0aGlzLnNjcm9sbFNlbGVjdGVkSW50b1ZpZXcoKX1zY3JvbGxTZWxlY3RlZEludG9WaWV3KCl7c2V0VGltZW91dCgoKT0+e2NvbnN0IGU9dGhpcy5taW5pQ2hhcnRzQ29udGFpbmVycy5maW5kKGU9PiFlLmdldEd1aSgpLmNsYXNzTGlzdC5jb250YWlucygiYWctaGlkZGVuIikpLmdldEd1aSgpLnF1ZXJ5U2VsZWN0b3IoIi5hZy1zZWxlY3RlZCIpO2lmKGUpe2NvbnN0IHQ9ZS5vZmZzZXRQYXJlbnQ7dCYmdGhpcy5lTWluaUNoYXJ0c0NvbnRhaW5lci5zY3JvbGxUbygwLHQub2Zmc2V0VG9wKX19LDI1MCl9cmVzZXRQYWxldHRlcyhlKXt2YXIgdCxpO2NvbnN0IHI9dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0UGFsZXR0ZXMoKSxvPXRoaXMuY2hhcnRDb250cm9sbGVyLmdldFRoZW1lVGVtcGxhdGVQYXJhbWV0ZXJzKCksbj1udWxsPT09KGk9bnVsbD09PSh0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiY2hhcnRUb29sUGFuZWxzRGVmIikpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNldHRpbmdzUGFuZWwpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmNoYXJ0R3JvdXBzRGVmO2lmKHMuXy5zaGFsbG93Q29tcGFyZShyLHRoaXMucGFsZXR0ZXMpJiYhZXx8dGhpcy5pc0FuaW1hdGluZylyZXR1cm47dGhpcy5wYWxldHRlcz1yLHRoaXMudGhlbWVzPXRoaXMuY2hhcnRDb250cm9sbGVyLmdldFRoZW1lTmFtZXMoKSx0aGlzLmFjdGl2ZVBhbGV0dGVJbmRleD10aGlzLnRoZW1lcy5maW5kSW5kZXgoZT0+ZT09PXRoaXMuY2hhcnRDb250cm9sbGVyLmdldENoYXJ0VGhlbWVOYW1lKCkpLHRoaXMuY2FyZEl0ZW1zPVtdLHMuXy5jbGVhckVsZW1lbnQodGhpcy5lQ2FyZFNlbGVjdG9yKSx0aGlzLmRlc3Ryb3lNaW5pQ2hhcnRzKCk7Y29uc3R7dGhlbWVzOmF9PXRoaXM7dGhpcy5wYWxldHRlcy5mb3JFYWNoKChlLHQpPT57Y29uc3QgaT10aGlzLmFjdGl2ZVBhbGV0dGVJbmRleD09PXQse2ZpbGxzOnMsc3Ryb2tlczpyfT1lLGw9IVQoYVt0XSksZD10aGlzLmNyZWF0ZUJlYW4obmV3IE10KHRoaXMuY2hhcnRDb250cm9sbGVyLHMscixvW3RdLGwsbikpO3RoaXMubWluaUNoYXJ0c0NvbnRhaW5lcnMucHVzaChkKSx0aGlzLmVNaW5pQ2hhcnRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGQuZ2V0R3VpKCkpLHRoaXMuYWRkQ2FyZExpbmsodCksaT9kLnVwZGF0ZVNlbGVjdGVkTWluaUNoYXJ0KCk6ZC5zZXREaXNwbGF5ZWQoITEpfSkscy5fLnNldERpc3BsYXllZCh0aGlzLmVOYXZCYXIsdGhpcy5wYWxldHRlcy5sZW5ndGg+MSkscy5fLnJhZGlvQ3NzQ2xhc3ModGhpcy5jYXJkSXRlbXNbdGhpcy5hY3RpdmVQYWxldHRlSW5kZXhdLCJhZy1zZWxlY3RlZCIsImFnLW5vdC1zZWxlY3RlZCIpfWFkZENhcmRMaW5rKGUpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dC5jbGFzc0xpc3QuYWRkKCJhZy1jaGFydC1zZXR0aW5ncy1jYXJkLWl0ZW0iKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0LCJjbGljayIsKCk9Pnt0aGlzLnNldEFjdGl2ZVBhbGV0dGUoZSxlPHRoaXMuYWN0aXZlUGFsZXR0ZUluZGV4PyJsZWZ0IjoicmlnaHQiKX0pLHRoaXMuZUNhcmRTZWxlY3Rvci5hcHBlbmRDaGlsZCh0KSx0aGlzLmNhcmRJdGVtcy5wdXNoKHQpfWdldFByZXYoKXtsZXQgZT10aGlzLmFjdGl2ZVBhbGV0dGVJbmRleC0xO3JldHVybiBlPDAmJihlPXRoaXMucGFsZXR0ZXMubGVuZ3RoLTEpLGV9Z2V0TmV4dCgpe2xldCBlPXRoaXMuYWN0aXZlUGFsZXR0ZUluZGV4KzE7cmV0dXJuIGU+PXRoaXMucGFsZXR0ZXMubGVuZ3RoJiYoZT0wKSxlfXNldEFjdGl2ZVBhbGV0dGUoZSx0KXtpZih0aGlzLmlzQW5pbWF0aW5nfHx0aGlzLmFjdGl2ZVBhbGV0dGVJbmRleD09PWUpcmV0dXJuO3MuXy5yYWRpb0Nzc0NsYXNzKHRoaXMuY2FyZEl0ZW1zW2VdLCJhZy1zZWxlY3RlZCIsImFnLW5vdC1zZWxlY3RlZCIpO2NvbnN0IGk9dGhpcy5taW5pQ2hhcnRzQ29udGFpbmVyc1t0aGlzLmFjdGl2ZVBhbGV0dGVJbmRleF0scj1pLmdldEd1aSgpLG89dGhpcy5taW5pQ2hhcnRzQ29udGFpbmVyc1tlXSxuPW8uZ2V0R3VpKCk7aS51cGRhdGVTZWxlY3RlZE1pbmlDaGFydCgpLG8udXBkYXRlU2VsZWN0ZWRNaW5pQ2hhcnQoKTtjb25zdCBhPSJsZWZ0Ij09PXQ/LTE6MSxsPW4uc3R5bGUubGVmdD1zLl8uZ2V0QWJzb2x1dGVXaWR0aCh0aGlzLmdldEd1aSgpKSphKyJweCI7dGhpcy5hY3RpdmVQYWxldHRlSW5kZXg9ZSx0aGlzLmlzQW5pbWF0aW5nPSEwO28uc2V0RGlzcGxheWVkKCEwKSxpLmFkZENzc0NsYXNzKCJhZy1hbmltYXRpbmciKSxvLmFkZENzc0NsYXNzKCJhZy1hbmltYXRpbmciKSx0aGlzLmNoYXJ0Q29udHJvbGxlci5zZXRDaGFydFRoZW1lTmFtZSh0aGlzLnRoZW1lc1tlXSksd2luZG93LnNldFRpbWVvdXQoKCk9PntyLnN0eWxlLmxlZnQ9LXBhcnNlRmxvYXQobCkrInB4IixuLnN0eWxlLmxlZnQ9IjBweCJ9LDApLHdpbmRvdy5zZXRUaW1lb3V0KCgpPT57dGhpcy5pc0FuaW1hdGluZz0hMSxpLnJlbW92ZUNzc0NsYXNzKCJhZy1hbmltYXRpbmciKSxvLnJlbW92ZUNzc0NsYXNzKCJhZy1hbmltYXRpbmciKSxpLnNldERpc3BsYXllZCghMSl9LDMwMCl9ZGVzdHJveU1pbmlDaGFydHMoKXtzLl8uY2xlYXJFbGVtZW50KHRoaXMuZU1pbmlDaGFydHNDb250YWluZXIpLHRoaXMubWluaUNoYXJ0c0NvbnRhaW5lcnM9dGhpcy5kZXN0cm95QmVhbnModGhpcy5taW5pQ2hhcnRzQ29udGFpbmVycyl9ZGVzdHJveSgpe3RoaXMuZGVzdHJveU1pbmlDaGFydHMoKSxzdXBlci5kZXN0cm95KCl9fUZ0LlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1jaGFydC1zZXR0aW5ncy13cmFwcGVyIj5cbiAgICAgICAgICAgIDxkaXYgcmVmPSJlTWluaUNoYXJ0c0NvbnRhaW5lciIgY2xhc3M9ImFnLWNoYXJ0LXNldHRpbmdzLW1pbmktY2hhcnRzLWNvbnRhaW5lciBhZy1zY3JvbGxhYmxlLWNvbnRhaW5lciI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IHJlZj0iZU5hdkJhciIgY2xhc3M9ImFnLWNoYXJ0LXNldHRpbmdzLW5hdi1iYXIiPlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlUHJldkJ0biIgY2xhc3M9ImFnLWNoYXJ0LXNldHRpbmdzLXByZXYiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImFnLWJ1dHRvbiBhZy1jaGFydC1zZXR0aW5ncy1wcmV2LWJ1dHRvbiI+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9ImVDYXJkU2VsZWN0b3IiIGNsYXNzPSJhZy1jaGFydC1zZXR0aW5ncy1jYXJkLXNlbGVjdG9yIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj0iZU5leHRCdG4iIGNsYXNzPSJhZy1jaGFydC1zZXR0aW5ncy1uZXh0Ij5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJhZy1idXR0b24gYWctY2hhcnQtc2V0dGluZ3MtbmV4dC1idXR0b24iPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PicsTHQoW09iamVjdChzLkF1dG93aXJlZCkoInJlc2l6ZU9ic2VydmVyU2VydmljZSIpXSxGdC5wcm90b3R5cGUsInJlc2l6ZU9ic2VydmVyU2VydmljZSIsdm9pZCAwKSxMdChbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlTWluaUNoYXJ0c0NvbnRhaW5lciIpXSxGdC5wcm90b3R5cGUsImVNaW5pQ2hhcnRzQ29udGFpbmVyIix2b2lkIDApLEx0KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVOYXZCYXIiKV0sRnQucHJvdG90eXBlLCJlTmF2QmFyIix2b2lkIDApLEx0KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVDYXJkU2VsZWN0b3IiKV0sRnQucHJvdG90eXBlLCJlQ2FyZFNlbGVjdG9yIix2b2lkIDApLEx0KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVQcmV2QnRuIildLEZ0LnByb3RvdHlwZSwiZVByZXZCdG4iLHZvaWQgMCksTHQoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZU5leHRCdG4iKV0sRnQucHJvdG90eXBlLCJlTmV4dEJ0biIsdm9pZCAwKSxMdChbcy5Qb3N0Q29uc3RydWN0XSxGdC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBJdD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBOdCBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy50YWJzPVtdO2NvbnN0e2NvbnRyb2xsZXI6dCxwYW5lbHM6aSxjaGFydE9wdGlvbnNTZXJ2aWNlOnN9PWU7dGhpcy5jaGFydENvbnRyb2xsZXI9dCx0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2U9cyx0aGlzLnBhbmVscz1pfWluaXQoKXt0aGlzLnBhbmVscy5mb3JFYWNoKGU9Pntjb25zdCB0PWUucmVwbGFjZSgiY2hhcnQiLCIiKS50b0xvd2VyQ2FzZSgpLHtjb21wOmksdGFiOnN9PXRoaXMuY3JlYXRlVGFiKGUsdCx0aGlzLmdldFBhbmVsQ2xhc3ModCkpO3RoaXMudGFicy5wdXNoKHMpLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9PnRoaXMuZGVzdHJveUJlYW4oaSkpfSksdGhpcy50YWJiZWRMYXlvdXQ9bmV3IHMuVGFiYmVkTGF5b3V0KHtpdGVtczp0aGlzLnRhYnMsY3NzQ2xhc3M6ImFnLWNoYXJ0LXRhYmJlZC1tZW51IixrZWVwU2Nyb2xsUG9zaXRpb246ITB9KSx0aGlzLmdldENvbnRleHQoKS5jcmVhdGVCZWFuKHRoaXMudGFiYmVkTGF5b3V0KX1jcmVhdGVUYWIoZSx0LGkpe2NvbnN0IHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ci5jbGFzc0xpc3QuYWRkKCJhZy1jaGFydC10YWIiLCJhZy1jaGFydC0iK3QpO2NvbnN0IG89bmV3IGkodGhpcy5jaGFydENvbnRyb2xsZXIsdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlKTt0aGlzLmdldENvbnRleHQoKS5jcmVhdGVCZWFuKG8pLHIuYXBwZW5kQ2hpbGQoby5nZXRHdWkoKSk7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxhPXRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKHQpO3JldHVybiBuLmlubmVyVGV4dD1hLHtjb21wOm8sdGFiOnt0aXRsZTpuLHRpdGxlTGFiZWw6YSxib2R5UHJvbWlzZTpzLkFnUHJvbWlzZS5yZXNvbHZlKHIpLGdldFNjcm9sbGFibGVDb250YWluZXI6KCk9PnIucXVlcnlTZWxlY3RvcigiLmFnLXNjcm9sbGFibGUtY29udGFpbmVyIil8fHIsbmFtZTplfX19c2hvd1RhYihlKXtjb25zdCB0PXRoaXMudGFic1tlXTt0aGlzLnRhYmJlZExheW91dC5zaG93SXRlbSh0KX1nZXRHdWkoKXtyZXR1cm4gdGhpcy50YWJiZWRMYXlvdXQmJnRoaXMudGFiYmVkTGF5b3V0LmdldEd1aSgpfWRlc3Ryb3koKXt0aGlzLnBhcmVudENvbXBvbmVudCYmdGhpcy5wYXJlbnRDb21wb25lbnQuaXNBbGl2ZSgpJiZ0aGlzLmRlc3Ryb3lCZWFuKHRoaXMucGFyZW50Q29tcG9uZW50KSxzdXBlci5kZXN0cm95KCl9Z2V0UGFuZWxDbGFzcyhlKXtzd2l0Y2goZSl7Y2FzZSBOdC5UQUJfREFUQTpyZXR1cm4gVztjYXNlIE50LlRBQl9GT1JNQVQ6cmV0dXJuIF9lO2RlZmF1bHQ6cmV0dXJuIEZ0fX19TnQuVEFCX0RBVEE9ImRhdGEiLE50LlRBQl9GT1JNQVQ9ImZvcm1hdCIsSXQoW09iamVjdChzLkF1dG93aXJlZCkoImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIildLE50LnByb3RvdHlwZSwiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiLHZvaWQgMCksSXQoW3MuUG9zdENvbnN0cnVjdF0sTnQucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgR3Q9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3Mga3QgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3RvcihlLHQsaSxzKXtzdXBlcihrdC5URU1QTEFURSksdGhpcy5lQ2hhcnRDb250YWluZXI9ZSx0aGlzLmVNZW51UGFuZWxDb250YWluZXI9dCx0aGlzLmNoYXJ0Q29udHJvbGxlcj1pLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZT1zLHRoaXMuYnV0dG9ucz17Y2hhcnRTZXR0aW5nczpbIm1lbnUiLCgpPT50aGlzLnNob3dNZW51KHRoaXMuZGVmYXVsdFBhbmVsKV0sY2hhcnREYXRhOlsibWVudSIsKCk9PnRoaXMuc2hvd01lbnUoImNoYXJ0RGF0YSIpXSxjaGFydEZvcm1hdDpbIm1lbnUiLCgpPT50aGlzLnNob3dNZW51KCJjaGFydEZvcm1hdCIpXSxjaGFydExpbms6WyJsaW5rZWQiLGU9PnRoaXMudG9nZ2xlRGV0YWNoZWQoZSldLGNoYXJ0VW5saW5rOlsidW5saW5rZWQiLGU9PnRoaXMudG9nZ2xlRGV0YWNoZWQoZSldLGNoYXJ0RG93bmxvYWQ6WyJzYXZlIiwoKT0+dGhpcy5zYXZlQ2hhcnQoKV19LHRoaXMucGFuZWxzPVtdLHRoaXMuYnV0dG9uTGlzdGVuZXJzRGVzdHJveUZ1bmNzPVtdLHRoaXMubWVudVZpc2libGU9ITF9cG9zdENvbnN0cnVjdCgpe3RoaXMuY3JlYXRlQnV0dG9ucygpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NIQVJUX0NSRUFURUQsZT0+e3ZhciB0O2lmKGUuY2hhcnRJZD09PXRoaXMuY2hhcnRDb250cm9sbGVyLmdldENoYXJ0SWQoKSl7Qm9vbGVhbihudWxsPT09KHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjaGFydFRvb2xQYW5lbHNEZWYiKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZGVmYXVsdFRvb2xQYW5lbCkmJnRoaXMuc2hvd01lbnUodGhpcy5kZWZhdWx0UGFuZWwsITEpfX0pLHRoaXMucmVmcmVzaE1lbnVDbGFzc2VzKCksIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NDaGFydFRvb2xQYW5lbHNCdXR0b24iKSYmdGhpcy5wYW5lbHMubGVuZ3RoPjAmJih0aGlzLmdldEd1aSgpLmNsYXNzTGlzdC5hZGQoImFnLWNoYXJ0LXRvb2wtcGFuZWwtYnV0dG9uLWVuYWJsZSIpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUhpZGVCdXR0b24sImNsaWNrIix0aGlzLnRvZ2dsZU1lbnUuYmluZCh0aGlzKSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuY2hhcnRDb250cm9sbGVyLFYuRVZFTlRfQ0hBUlRfQVBJX1VQREFURSx0aGlzLmNyZWF0ZUJ1dHRvbnMuYmluZCh0aGlzKSl9aXNWaXNpYmxlKCl7cmV0dXJuIHRoaXMubWVudVZpc2libGV9Z2V0RXh0cmFQYWRkaW5nRGlyZWN0aW9ucygpe2NvbnN0IGU9W107cmV0dXJuWyJjaGFydExpbmsiLCJjaGFydFVubGluayIsImNoYXJ0RG93bmxvYWQiXS5zb21lKGU9PnRoaXMuY2hhcnRUb29sYmFyT3B0aW9ucy5pbmNsdWRlcyhlKSkmJmUucHVzaCgidG9wIiksWyJjaGFydFNldHRpbmdzIiwiY2hhcnREYXRhIiwiY2hhcnRGb3JtYXQiXS5zb21lKGU9PnRoaXMuY2hhcnRUb29sYmFyT3B0aW9ucy5pbmNsdWRlcyhlKSkmJmUucHVzaCh0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpPyJsZWZ0IjoicmlnaHQiKSxlfWdldFRvb2xiYXJPcHRpb25zKCl7dmFyIGUsdCxpO2lmKEJvb2xlYW4odGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjaGFydFRvb2xQYW5lbHNEZWYiKSkpe2NvbnN0IHI9W3RoaXMuY2hhcnRDb250cm9sbGVyLmlzQ2hhcnRMaW5rZWQoKT8iY2hhcnRMaW5rIjoiY2hhcnRVbmxpbmsiLCJjaGFydERvd25sb2FkIl0sbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiZ2V0Q2hhcnRUb29sYmFySXRlbXMiKSxuPXtkZWZhdWx0SXRlbXM6cn07bGV0IGE9bz9vKG4pLmZpbHRlcihlPT57aWYoIXMuQ0hBUlRfVE9PTEJBUl9BTExPV19MSVNULmluY2x1ZGVzKGUpKXtjb25zdCB0PXMuQ0hBUlRfVE9PTF9QQU5FTF9BTExPV19MSVNULmluY2x1ZGVzKGUpP2BBRyBHcmlkOiAnJHtlfScgaXMgYSBDaGFydCBUb29sIFBhbmVsIG9wdGlvbiBhbmQgd2lsbCBiZSBpZ25vcmVkIHNpbmNlICdjaGFydFRvb2xQYW5lbHNEZWYnIGlzIHVzZWQuIFBsZWFzZSB1c2UgJ2NoYXJ0VG9vbFBhbmVsc0RlZi5wYW5lbHMnIGdyaWQgb3B0aW9uIGluc3RlYWRgOmBBRyBHcmlkOiAnJHtlfScgaXMgbm90IGEgdmFsaWQgQ2hhcnQgVG9vbGJhciBPcHRpb25gO3JldHVybiBjb25zb2xlLndhcm4odCksITF9cmV0dXJuITB9KTpyO2NvbnN0IGw9bnVsbD09PSh0PW51bGw9PT0oZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNoYXJ0VG9vbFBhbmVsc0RlZiIpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5wYW5lbHMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm1hcChlPT57Y29uc3QgdD1zLkNIQVJUX1RPT0xfUEFORUxfTUVOVV9PUFRJT05TW2VdO3JldHVybiB0fHxjb25zb2xlLndhcm4oYEFHIEdyaWQgLSBpbnZhbGlkIHBhbmVsIGluIGNoYXJ0VG9vbFBhbmVsc0RlZi5wYW5lbHM6ICcke2V9J2ApLHR9KS5maWx0ZXIoZT0+Qm9vbGVhbihlKSk7dGhpcy5wYW5lbHM9bHx8T2JqZWN0LnZhbHVlcyhzLkNIQVJUX1RPT0xfUEFORUxfTUVOVV9PUFRJT05TKSx0aGlzLmNoYXJ0Q29udHJvbGxlci5pc1Bpdm90Q2hhcnQoKSYmKHRoaXMucGFuZWxzPXRoaXMucGFuZWxzLmZpbHRlcihlPT4iY2hhcnREYXRhIiE9PWUpKTtjb25zdCBkPW51bGw9PT0oaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNoYXJ0VG9vbFBhbmVsc0RlZiIpKXx8dm9pZCAwPT09aT92b2lkIDA6aS5kZWZhdWx0VG9vbFBhbmVsO3JldHVybiB0aGlzLmRlZmF1bHRQYW5lbD1kJiZzLkNIQVJUX1RPT0xfUEFORUxfTUVOVV9PUFRJT05TW2RdfHx0aGlzLnBhbmVsc1swXSx0aGlzLnBhbmVscy5sZW5ndGg+MD9bdGhpcy5wYW5lbHNbMF0sLi4uYV06YX17bGV0IGU9WyJjaGFydFNldHRpbmdzIiwiY2hhcnREYXRhIiwiY2hhcnRGb3JtYXQiLHRoaXMuY2hhcnRDb250cm9sbGVyLmlzQ2hhcnRMaW5rZWQoKT8iY2hhcnRMaW5rIjoiY2hhcnRVbmxpbmsiLCJjaGFydERvd25sb2FkIl07Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiZ2V0Q2hhcnRUb29sYmFySXRlbXMiKTtpZih0KXtjb25zdCBpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NDaGFydFRvb2xQYW5lbHNCdXR0b24iKTtlPXQoe2RlZmF1bHRJdGVtczppP2U6cy5DSEFSVF9UT09MQkFSX0FMTE9XX0xJU1R9KS5maWx0ZXIoZT0+e2lmKCF0aGlzLmJ1dHRvbnNbZV0pcmV0dXJuIGNvbnNvbGUud2FybihgQUcgR3JpZDogJyR7ZX0nIGlzIG5vdCBhIHZhbGlkIENoYXJ0IFRvb2xiYXIgT3B0aW9uYCksITE7aWYoIWkmJnMuQ0hBUlRfVE9PTF9QQU5FTF9BTExPV19MSVNULmluY2x1ZGVzKGUpKXtjb25zdCB0PWBBRyBHcmlkOiAnJHtlfScgaXMgYSBDaGFydCBUb29sIFBhbmVsIG9wdGlvbiBhbmQgd2lsbCBiZSBpZ25vcmVkLiBQbGVhc2UgdXNlICdjaGFydFRvb2xQYW5lbHNEZWYucGFuZWxzJyBncmlkIG9wdGlvbiBpbnN0ZWFkYDtyZXR1cm4gY29uc29sZS53YXJuKHQpLCExfXJldHVybiEwfSksaXx8KGU9ZS5jb25jYXQocy5DSEFSVF9UT09MX1BBTkVMX0FMTE9XX0xJU1QpKX10aGlzLmNoYXJ0Q29udHJvbGxlci5pc1Bpdm90Q2hhcnQoKSYmKGU9ZS5maWx0ZXIoZT0+ImNoYXJ0RGF0YSIhPT1lKSk7Y29uc3QgaT1bImNoYXJ0VW5saW5rIiwiY2hhcnRMaW5rIiwiY2hhcnREb3dubG9hZCJdO3JldHVybiB0aGlzLnBhbmVscz1lLmZpbHRlcihlPT4tMT09PWkuaW5kZXhPZihlKSksdGhpcy5kZWZhdWx0UGFuZWw9dGhpcy5wYW5lbHNbMF0sZS5maWx0ZXIoZT0+LTEhPT1pLmluZGV4T2YoZSl8fHRoaXMucGFuZWxzLmxlbmd0aCYmZT09PXRoaXMucGFuZWxzWzBdKX19dG9nZ2xlRGV0YWNoZWQoZSl7Y29uc3QgdD1lLnRhcmdldCxpPXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJhZy1pY29uLWxpbmtlZCIpO3QuY2xhc3NMaXN0LnRvZ2dsZSgiYWctaWNvbi1saW5rZWQiLCFpKSx0LmNsYXNzTGlzdC50b2dnbGUoImFnLWljb24tdW5saW5rZWQiLGkpO2NvbnN0IHM9aT8iY2hhcnRVbmxpbmtUb29sYmFyVG9vbHRpcCI6ImNoYXJ0TGlua1Rvb2xiYXJUb29sdGlwIixyPXRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKHMpO3ImJih0LnRpdGxlPXIpLHRoaXMuY2hhcnRDb250cm9sbGVyLmRldGFjaENoYXJ0UmFuZ2UoKX1jcmVhdGVCdXR0b25zKCl7dGhpcy5idXR0b25MaXN0ZW5lcnNEZXN0cm95RnVuY3MuZm9yRWFjaChlPT5lKCkpLHRoaXMuYnV0dG9uTGlzdGVuZXJzRGVzdHJveUZ1bmNzPVtdLHRoaXMuY2hhcnRUb29sYmFyT3B0aW9ucz10aGlzLmdldFRvb2xiYXJPcHRpb25zKCk7Y29uc3QgZT10aGlzLmVNZW51O3MuXy5jbGVhckVsZW1lbnQoZSksdGhpcy5jaGFydFRvb2xiYXJPcHRpb25zLmZvckVhY2godD0+e2NvbnN0IGk9dGhpcy5idXR0b25zW3RdLFtyLG9dPWksbj1zLl8uY3JlYXRlSWNvbk5vU3BhbihyLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLHZvaWQgMCwhMCk7bi5jbGFzc0xpc3QuYWRkKCJhZy1jaGFydC1tZW51LWljb24iKTtjb25zdCBhPXRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKHQrIlRvb2xiYXJUb29sdGlwIik7YSYmbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiYobi50aXRsZT1hKSx0aGlzLmJ1dHRvbkxpc3RlbmVyc0Rlc3Ryb3lGdW5jcy5wdXNoKHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKG4sImNsaWNrIixvKSksZS5hcHBlbmRDaGlsZChuKX0pfXNhdmVDaGFydCgpe2NvbnN0IGU9e3R5cGU6a3QuRVZFTlRfRE9XTkxPQURfQ0hBUlR9O3RoaXMuZGlzcGF0Y2hFdmVudChlKX1jcmVhdGVNZW51UGFuZWwoZSl7Y29uc3QgdD10aGlzLmVudmlyb25tZW50LmNoYXJ0TWVudVBhbmVsV2lkdGgoKSxpPXRoaXMubWVudVBhbmVsPXRoaXMuY3JlYXRlQmVhbihuZXcgcy5BZ1BhbmVsKHttaW5XaWR0aDp0LHdpZHRoOnQsaGVpZ2h0OiIxMDAlIixjbG9zYWJsZTohMCxoaWRlVGl0bGVCYXI6ITAsY3NzSWRlbnRpZmllcjoiY2hhcnQtbWVudSJ9KSk7cmV0dXJuIGkuc2V0UGFyZW50Q29tcG9uZW50KHRoaXMpLHRoaXMuZU1lbnVQYW5lbENvbnRhaW5lci5hcHBlbmRDaGlsZChpLmdldEd1aSgpKSx0aGlzLnRhYmJlZE1lbnU9dGhpcy5jcmVhdGVCZWFuKG5ldyBOdCh7Y29udHJvbGxlcjp0aGlzLmNoYXJ0Q29udHJvbGxlcix0eXBlOnRoaXMuY2hhcnRDb250cm9sbGVyLmdldENoYXJ0VHlwZSgpLHBhbmVsczp0aGlzLnBhbmVscyxjaGFydE9wdGlvbnNTZXJ2aWNlOnRoaXMuY2hhcnRPcHRpb25zU2VydmljZX0pKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihpLHMuQ29tcG9uZW50LkVWRU5UX0RFU1RST1lFRCwoKT0+dGhpcy5kZXN0cm95QmVhbih0aGlzLnRhYmJlZE1lbnUpKSxuZXcgcy5BZ1Byb21pc2UodD0+e3dpbmRvdy5zZXRUaW1lb3V0KCgpPT57aS5zZXRCb2R5Q29tcG9uZW50KHRoaXMudGFiYmVkTWVudSksdGhpcy50YWJiZWRNZW51LnNob3dUYWIoZSksdChpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVDaGFydENvbnRhaW5lciwiY2xpY2siLGU9Pnt0aGlzLmdldEd1aSgpLmNvbnRhaW5zKGUudGFyZ2V0KXx8dGhpcy5tZW51VmlzaWJsZSYmdGhpcy5oaWRlTWVudSgpfSl9LDEwMCl9KX1zaG93Q29udGFpbmVyKCl7dGhpcy5tZW51UGFuZWwmJih0aGlzLm1lbnVWaXNpYmxlPSEwLHRoaXMuc2hvd1BhcmVudCh0aGlzLm1lbnVQYW5lbC5nZXRXaWR0aCgpKSx0aGlzLnJlZnJlc2hNZW51Q2xhc3NlcygpKX10b2dnbGVNZW51KCl7dGhpcy5tZW51VmlzaWJsZT90aGlzLmhpZGVNZW51KCk6dGhpcy5zaG93TWVudSgpfXNob3dNZW51KGUsdD0hMCl7aWYodHx8dGhpcy5lTWVudVBhbmVsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoImFnLW5vLXRyYW5zaXRpb24iKSx0aGlzLm1lbnVQYW5lbCYmIWUpdGhpcy5zaG93Q29udGFpbmVyKCk7ZWxzZXtjb25zdCB0PWV8fHRoaXMuZGVmYXVsdFBhbmVsO2xldCBpPXRoaXMucGFuZWxzLmluZGV4T2YodCk7aTwwJiYoY29uc29sZS53YXJuKGBBRyBHcmlkOiAnJHtlfScgaXMgbm90IGEgdmFsaWQgQ2hhcnQgVG9vbCBQYW5lbCBuYW1lYCksaT10aGlzLnBhbmVscy5pbmRleE9mKHRoaXMuZGVmYXVsdFBhbmVsKSksdGhpcy5tZW51UGFuZWw/KHRoaXMudGFiYmVkTWVudS5zaG93VGFiKGkpLHRoaXMuc2hvd0NvbnRhaW5lcigpKTp0aGlzLmNyZWF0ZU1lbnVQYW5lbChpKS50aGVuKHRoaXMuc2hvd0NvbnRhaW5lci5iaW5kKHRoaXMpKX10fHxzZXRUaW1lb3V0KCgpPT57dGhpcy5pc0FsaXZlKCkmJnRoaXMuZU1lbnVQYW5lbENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCJhZy1uby10cmFuc2l0aW9uIil9LDUwMCl9aGlkZU1lbnUoKXt0aGlzLmhpZGVQYXJlbnQoKSx3aW5kb3cuc2V0VGltZW91dCgoKT0+e3RoaXMubWVudVZpc2libGU9ITEsdGhpcy5yZWZyZXNoTWVudUNsYXNzZXMoKX0sNTAwKX1yZWZyZXNoTWVudUNsYXNzZXMoKXt0aGlzLmVDaGFydENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCJhZy1jaGFydC1tZW51LXZpc2libGUiLHRoaXMubWVudVZpc2libGUpLHRoaXMuZUNoYXJ0Q29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoImFnLWNoYXJ0LW1lbnUtaGlkZGVuIiwhdGhpcy5tZW51VmlzaWJsZSksdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0NoYXJ0VG9vbFBhbmVsc0J1dHRvbiIpfHwodGhpcy5lSGlkZUJ1dHRvbkljb24uY2xhc3NMaXN0LnRvZ2dsZSgiYWctaWNvbi1jb250cmFjdGVkIix0aGlzLm1lbnVWaXNpYmxlKSx0aGlzLmVIaWRlQnV0dG9uSWNvbi5jbGFzc0xpc3QudG9nZ2xlKCJhZy1pY29uLWV4cGFuZGVkIiwhdGhpcy5tZW51VmlzaWJsZSkpfXNob3dQYXJlbnQoZSl7dGhpcy5lTWVudVBhbmVsQ29udGFpbmVyLnN0eWxlLm1pbldpZHRoPWUrInB4In1oaWRlUGFyZW50KCl7dGhpcy5lTWVudVBhbmVsQ29udGFpbmVyLnN0eWxlLm1pbldpZHRoPSIwIn1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLHRoaXMubWVudVBhbmVsJiZ0aGlzLm1lbnVQYW5lbC5pc0FsaXZlKCkmJnRoaXMuZGVzdHJveUJlYW4odGhpcy5tZW51UGFuZWwpLHRoaXMudGFiYmVkTWVudSYmdGhpcy50YWJiZWRNZW51LmlzQWxpdmUoKSYmdGhpcy5kZXN0cm95QmVhbih0aGlzLnRhYmJlZE1lbnUpfX1rdC5FVkVOVF9ET1dOTE9BRF9DSEFSVD0iZG93bmxvYWRDaGFydCIsa3QuVEVNUExBVEU9JzxkaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9ImFnLWNoYXJ0LW1lbnUiIHJlZj0iZU1lbnUiPjwvZGl2PlxuICAgICAgICA8YnV0dG9uIGNsYXNzPSJhZy1idXR0b24gYWctY2hhcnQtbWVudS1jbG9zZSIgcmVmPSJlSGlkZUJ1dHRvbiI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0iYWctaWNvbiBhZy1pY29uLWNvbnRyYWN0ZWQiIHJlZj0iZUhpZGVCdXR0b25JY29uIj48L3NwYW4+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PicsR3QoW09iamVjdChzLkF1dG93aXJlZCkoImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIildLGt0LnByb3RvdHlwZSwiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiLHZvaWQgMCksR3QoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZU1lbnUiKV0sa3QucHJvdG90eXBlLCJlTWVudSIsdm9pZCAwKSxHdChbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlSGlkZUJ1dHRvbiIpXSxrdC5wcm90b3R5cGUsImVIaWRlQnV0dG9uIix2b2lkIDApLEd0KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVIaWRlQnV0dG9uSWNvbiIpXSxrdC5wcm90b3R5cGUsImVIaWRlQnV0dG9uSWNvbiIsdm9pZCAwKSxHdChbcy5Qb3N0Q29uc3RydWN0XSxrdC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBfdD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBWdCBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKFZ0LlRFTVBMQVRFKSx0aGlzLmNoYXJ0TWVudT1lLHRoaXMuZGVzdHJveWFibGVDaGFydExpc3RlbmVycz1bXSx0aGlzLmVkaXRpbmc9ITF9aW5pdCgpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZ2V0R3VpKCksImtleWRvd24iLGU9Pnt0aGlzLmVkaXRpbmcmJiJFbnRlciI9PT1lLmtleSYmIWUuc2hpZnRLZXkmJih0aGlzLmhhbmRsZUVuZEVkaXRpbmcoKSxlLnByZXZlbnREZWZhdWx0KCkpfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5nZXRHdWkoKSwiaW5wdXQiLCgpPT57dGhpcy5lZGl0aW5nJiZ0aGlzLnVwZGF0ZUhlaWdodCgpfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5nZXRHdWkoKSwiYmx1ciIsKCk9PnRoaXMuZW5kRWRpdGluZygpKX1yZWZyZXNoVGl0bGUoZSx0KXt0aGlzLmNoYXJ0Q29udHJvbGxlcj1lLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZT10O2Zvcihjb25zdCBlIG9mIHRoaXMuZGVzdHJveWFibGVDaGFydExpc3RlbmVycyllKCk7dGhpcy5kZXN0cm95YWJsZUNoYXJ0TGlzdGVuZXJzPVtdO2NvbnN0IGk9dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnRQcm94eSgpLmdldENoYXJ0KCkscz1pLnNjZW5lLmNhbnZhcy5lbGVtZW50LHI9dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIocywiZGJsY2xpY2siLGU9Pntjb25zdHt0aXRsZTp0fT1pO2lmKHQmJnQubm9kZS5jb250YWluc1BvaW50KGUub2Zmc2V0WCxlLm9mZnNldFkpKXtjb25zdCBlPXQubm9kZS5jb21wdXRlQkJveCgpLGk9dC5ub2RlLmludmVyc2VUcmFuc2Zvcm1Qb2ludChlLngsZS55KTt0aGlzLnN0YXJ0RWRpdGluZyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSksaSkscy53aWR0aCl9fSk7bGV0IG89ITE7Y29uc3Qgbj10aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihzLCJtb3VzZW1vdmUiLGU9Pntjb25zdHt0aXRsZTp0fT1pLHI9ISEodCYmdC5lbmFibGVkJiZ0Lm5vZGUuY29udGFpbnNQb2ludChlLm9mZnNldFgsZS5vZmZzZXRZKSk7byE9PXImJihzLnN0eWxlLmN1cnNvcj1yPyJwb2ludGVyIjoiIiksbz1yfSk7dGhpcy5kZXN0cm95YWJsZUNoYXJ0TGlzdGVuZXJzPVtyLG5dfXN0YXJ0RWRpdGluZyhlLHQpe2lmKHRoaXMuY2hhcnRNZW51JiZ0aGlzLmNoYXJ0TWVudS5pc1Zpc2libGUoKSlyZXR1cm47aWYodGhpcy5lZGl0aW5nKXJldHVybjt0aGlzLmVkaXRpbmc9ITA7Y29uc3QgaT1NYXRoLm1heChNYXRoLm1pbihlLndpZHRoKzIwLHQpLDMwMCkscz10aGlzLmdldEd1aSgpO3MuY2xhc3NMaXN0LmFkZCgiY3VycmVudGx5LWVkaXRpbmciKTtjb25zdCByPXMuc3R5bGU7ci5mb250RmFtaWx5PXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRDaGFydE9wdGlvbigidGl0bGUuZm9udEZhbWlseSIpLHIuZm9udFdlaWdodD10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0Q2hhcnRPcHRpb24oInRpdGxlLmZvbnRXZWlnaHQiKSxyLmZvbnRTdHlsZT10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0Q2hhcnRPcHRpb24oInRpdGxlLmZvbnRTdHlsZSIpLHIuZm9udFNpemU9dGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmdldENoYXJ0T3B0aW9uKCJ0aXRsZS5mb250U2l6ZSIpKyJweCIsci5jb2xvcj10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0Q2hhcnRPcHRpb24oInRpdGxlLmNvbG9yIik7Y29uc3Qgbz10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0Q2hhcnRPcHRpb24oInRpdGxlLnRleHQiKSxuPW89PT10aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgidGl0bGVQbGFjZWhvbGRlciIpO3MudmFsdWU9bj8iIjpvO2NvbnN0IGE9by5zcGxpdCgvXHI/XG4vZykubGVuZ3RoO3IubGVmdD1NYXRoLnJvdW5kKGUueCtlLndpZHRoLzItaS8yLTEpKyJweCIsci50b3A9TWF0aC5yb3VuZChlLnkrZS5oZWlnaHQvMi1hKnRoaXMuZ2V0TGluZUhlaWdodCgpLzItMikrInB4IixyLndpZHRoPU1hdGgucm91bmQoaSkrInB4IixyLmxpbmVIZWlnaHQ9dGhpcy5nZXRMaW5lSGVpZ2h0KCkrInB4Iix0aGlzLnVwZGF0ZUhlaWdodCgpLHMuZm9jdXMoKX11cGRhdGVIZWlnaHQoKXtjb25zdCBlPXRoaXMuZ2V0R3VpKCksdD10aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2UuZ2V0Q2hhcnRPcHRpb24oInRpdGxlLnRleHQiKS5zcGxpdCgvXHI/XG4vZykubGVuZ3RoLGk9ZS52YWx1ZS5zcGxpdCgvXHI/XG4vZykubGVuZ3RoO2Uuc3R5bGUuaGVpZ2h0PU1hdGgucm91bmQoTWF0aC5tYXgodCxpKSp0aGlzLmdldExpbmVIZWlnaHQoKSkrNCsicHgifWdldExpbmVIZWlnaHQoKXtjb25zdCBlPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRDaGFydE9wdGlvbigidGl0bGUubGluZUhlaWdodCIpO3JldHVybiBlP3BhcnNlSW50KGUpOk1hdGgucm91bmQoMS4yKnBhcnNlSW50KHRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRDaGFydE9wdGlvbigidGl0bGUuZm9udFNpemUiKSkpfWhhbmRsZUVuZEVkaXRpbmcoKXtjb25zdCBlPXRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5nZXRDaGFydE9wdGlvbigidGl0bGUuY29sb3IiKTt0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0Q2hhcnRPcHRpb24oInRpdGxlLmNvbG9yIiwicmdiYSgwLCAwLCAwLCAwKSIpLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5hd2FpdENoYXJ0T3B0aW9uVXBkYXRlKCgpPT50aGlzLmVuZEVkaXRpbmcoKSksdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLmF3YWl0Q2hhcnRPcHRpb25VcGRhdGUoKCk9Pnt0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0Q2hhcnRPcHRpb24oInRpdGxlLmNvbG9yIixlKX0pfWVuZEVkaXRpbmcoKXtpZighdGhpcy5lZGl0aW5nKXJldHVybjt0aGlzLmVkaXRpbmc9ITE7Y29uc3QgZT10aGlzLmdldEd1aSgpLnZhbHVlO2UmJiIiIT09ZS50cmltKCk/KHRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5zZXRDaGFydE9wdGlvbigidGl0bGUudGV4dCIsZSksdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlLnNldENoYXJ0T3B0aW9uKCJ0aXRsZS5lbmFibGVkIiwhMCkpOih0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0Q2hhcnRPcHRpb24oInRpdGxlLnRleHQiLCIiKSx0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2Uuc2V0Q2hhcnRPcHRpb24oInRpdGxlLmVuYWJsZWQiLCExKSksdGhpcy5nZXRHdWkoKS5jbGFzc0xpc3QucmVtb3ZlKCJjdXJyZW50bHktZWRpdGluZyIpLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZS5hd2FpdENoYXJ0T3B0aW9uVXBkYXRlKCgpPT57dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh7dHlwZToiY2hhcnRUaXRsZUVkaXQifSl9KX19VnQuVEVNUExBVEU9Jzx0ZXh0YXJlYVxuICAgICAgICAgICAgIGNsYXNzPSJhZy1jaGFydC10aXRsZS1lZGl0IlxuICAgICAgICAgICAgIHN0eWxlPSJwYWRkaW5nOjA7IGJvcmRlcjpub25lOyBib3JkZXItcmFkaXVzOiAwOyBtaW4taGVpZ2h0OiAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHJlc2l6ZTogbm9uZTsiIC8+XG4gICAgICAgICcsX3QoW09iamVjdChzLkF1dG93aXJlZCkoImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIildLFZ0LnByb3RvdHlwZSwiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiLHZvaWQgMCksX3QoW3MuUG9zdENvbnN0cnVjdF0sVnQucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgQnQ9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgSHQgZXh0ZW5kcyBzLkJlYW5TdHVie2dldERhdGEoZSl7aWYoZS5jcm9zc0ZpbHRlcmluZyl7aWYoZS5ncm91cGluZylyZXR1cm4gY29uc29sZS53YXJuKCJBRyBHcmlkOiBjcm9zc2luZyBmaWx0ZXJpbmcgd2l0aCByb3cgZ3JvdXBpbmcgaXMgbm90IHN1cHBvcnRlZC4iKSx7Y2hhcnREYXRhOltdLGNvbHVtbk5hbWVzOnt9fTtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNSb3dNb2RlbFR5cGUoImNsaWVudFNpZGUiKSlyZXR1cm4gY29uc29sZS53YXJuKCJBRyBHcmlkOiBjcm9zc2luZyBmaWx0ZXJpbmcgaXMgb25seSBzdXBwb3J0ZWQgaW4gdGhlIGNsaWVudCBzaWRlIHJvdyBtb2RlbC4iKSx7Y2hhcnREYXRhOltdLGNvbHVtbk5hbWVzOnt9fX10aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd01vZGVsVHlwZSgic2VydmVyU2lkZSIpJiZlLnBpdm90aW5nJiZ0aGlzLnVwZGF0ZVBpdm90S2V5c0ZvclNTUk0oKTtjb25zdCB0PXRoaXMuZXh0cmFjdFJvd3NGcm9tR3JpZFJvd01vZGVsKGUpO3JldHVybiB0LmNoYXJ0RGF0YT10aGlzLmFnZ3JlZ2F0ZVJvd3NCeURpbWVuc2lvbihlLHQuY2hhcnREYXRhKSx0fWV4dHJhY3RSb3dzRnJvbUdyaWRSb3dNb2RlbChlKXtsZXQgdD1bXTtjb25zdCBpPXt9LHI9e30sbz17fTtsZXQgbixhPXt9LGw9W107aWYoZS5jcm9zc0ZpbHRlcmluZylhPXRoaXMuZ2V0RmlsdGVyZWRSb3dOb2RlcygpLGw9dGhpcy5nZXRBbGxSb3dOb2RlcygpLG49bC5sZW5ndGg7ZWxzZXtjb25zdCB0PXRoaXMuZ3JpZFJvd01vZGVsLmdldFJvd0NvdW50KCktMTtuPShlLmVuZFJvdz49MD9NYXRoLm1pbihlLmVuZFJvdyx0KTp0KS1lLnN0YXJ0Um93KzF9Zm9yKGxldCBzPTA7czxuO3MrKyl7Y29uc3Qgbj17fSxkPWUuY3Jvc3NGaWx0ZXJpbmc/bFtzXTp0aGlzLmdyaWRSb3dNb2RlbC5nZXRSb3cocytlLnN0YXJ0Um93KTtlLmRpbWVuc2lvbkNvbHMuZm9yRWFjaCh0PT57Y29uc3QgaT10LmNvbElkLGE9dGhpcy5jb2x1bW5Nb2RlbC5nZXRHcmlkQ29sdW1uKGkpO2lmKGEpe2NvbnN0IHQ9dGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUoYSxkKTtpZihlLmdyb3VwaW5nKXtjb25zdCBlPXQmJnQudG9TdHJpbmc/U3RyaW5nKHQudG9TdHJpbmcoKSk6IiIsYT1IdC5nZXRHcm91cExhYmVscyhkLGUpO25baV09e2xhYmVsczphLHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFiZWxzLmZpbHRlcihlPT4hIWUpLnJldmVyc2UoKS5qb2luKCIgLSAiKX19LGQuZ3JvdXAmJihyW2EudG9TdHJpbmcoKV09cyk7Y29uc3QgbD1hLnNsaWNlKDEsYS5sZW5ndGgpLnRvU3RyaW5nKCk7bCYmKG9bbF09cltsXSl9ZWxzZSBuW2ldPXR9ZWxzZSBuW1l0LkRFRkFVTFRfQ0FURUdPUlldPXMrMX0pLGUudmFsdWVDb2xzLmZvckVhY2godD0+e2xldCBzPVtdO2NvbnN0IHI9dC5nZXRDb2xEZWYoKS5waXZvdEtleXM7ciYmKHM9ci5zbGljZSgpKTtjb25zdCBvPXQuZ2V0Q29sRGVmKCkuaGVhZGVyTmFtZTtvJiZzLnB1c2gobykscy5sZW5ndGg+MCYmKGlbdC5nZXRJZCgpXT1zKTtjb25zdCBsPXQuZ2V0Q29sSWQoKTtpZihlLmNyb3NzRmlsdGVyaW5nKXtjb25zdCBpPWwrIi1maWx0ZXJlZC1vdXQiLHM9dGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUodCxkKSxyPW51bGwhPXMmJiJmdW5jdGlvbiI9PXR5cGVvZiBzLnRvTnVtYmVyP3MudG9OdW1iZXIoKTpzO2FbZC5pZF0/KG5bbF09cixuW2ldPWUuYWdnRnVuY3x8ZS5pc1NjYXR0ZXI/dm9pZCAwOjApOihuW2xdPWUuYWdnRnVuY3x8ZS5pc1NjYXR0ZXI/dm9pZCAwOjAsbltpXT1yKX1lbHNle2xldCBlPXRoaXMudmFsdWVTZXJ2aWNlLmdldFZhbHVlKHQsZCk7ZSYmZS5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKGU9cGFyc2VGbG9hdChlLnRvU3RyaW5nKCkpKSxuW2xdPW51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnRvTnVtYmVyP2UudG9OdW1iZXIoKTplfX0pLGQuZm9vdGVyJiYobi5mb290ZXI9ITApLHQucHVzaChuKX1pZihlLmdyb3VwaW5nKXtjb25zdCBlPXMuXy52YWx1ZXMobyksaT0odCxpKT0+IXQuZm9vdGVyJiYhcy5fLmluY2x1ZGVzKGUsaSk7dD10LmZpbHRlcihpKX1yZXR1cm57Y2hhcnREYXRhOnQsY29sdW1uTmFtZXM6aX19YWdncmVnYXRlUm93c0J5RGltZW5zaW9uKGUsdCl7Y29uc3QgaT1lLmRpbWVuc2lvbkNvbHM7aWYoIWUuYWdnRnVuY3x8MD09PWkubGVuZ3RoKXJldHVybiB0O2NvbnN0IHI9cy5fLmxhc3QoaSksbz1yJiZyLmNvbElkLG49e30sYT1bXTtyZXR1cm4gdC5mb3JFYWNoKGU9PntsZXQgdD1uO2kuZm9yRWFjaChzPT57Y29uc3Qgcj1zLmNvbElkLG49ZVtyXTtpZihyPT09byl7bGV0IHM9dFtuXTtzfHwocz17X19jaGlsZHJlbjpbXX0saS5mb3JFYWNoKHQ9Pntjb25zdCBpPXQuY29sSWQ7c1tpXT1lW2ldfSksdFtuXT1zLGEucHVzaChzKSkscy5fX2NoaWxkcmVuLnB1c2goZSl9ZWxzZSB0W25dfHwodFtuXT17fSksdD10W25dfSl9KSxzLk1vZHVsZVJlZ2lzdHJ5Ll9fYXNzZXJ0UmVnaXN0ZXJlZChzLk1vZHVsZU5hbWVzLlJvd0dyb3VwaW5nTW9kdWxlLCJDaGFydGluZyBBZ2dyZWdhdGlvbiIsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKSYmYS5mb3JFYWNoKHQ9PmUudmFsdWVDb2xzLmZvckVhY2goaT0+e2lmKGUuY3Jvc3NGaWx0ZXJpbmcpZS52YWx1ZUNvbHMuZm9yRWFjaChpPT57Y29uc3Qgcz1pLmdldENvbElkKCkscj10Ll9fY2hpbGRyZW4uZmlsdGVyKGU9PnZvaWQgMCE9PWVbc10pLm1hcChlPT5lW3NdKTtsZXQgbz10aGlzLmFnZ3JlZ2F0aW9uU3RhZ2UuYWdncmVnYXRlVmFsdWVzKHIsZS5hZ2dGdW5jKTt0W2kuZ2V0SWQoKV09byYmdm9pZCAwIT09by52YWx1ZT9vLnZhbHVlOm87Y29uc3Qgbj1zKyItZmlsdGVyZWQtb3V0IixhPXQuX19jaGlsZHJlbi5maWx0ZXIoZT0+dm9pZCAwIT09ZVtuXSkubWFwKGU9PmVbbl0pO2xldCBsPXRoaXMuYWdncmVnYXRpb25TdGFnZS5hZ2dyZWdhdGVWYWx1ZXMoYSxlLmFnZ0Z1bmMpO3Rbbl09bCYmdm9pZCAwIT09bC52YWx1ZT9sLnZhbHVlOmx9KTtlbHNle2NvbnN0IHI9dC5fX2NoaWxkcmVuLm1hcChlPT5lW2kuZ2V0SWQoKV0pO2xldCBvPTA7cy5Nb2R1bGVSZWdpc3RyeS5fX2Fzc2VydFJlZ2lzdGVyZWQocy5Nb2R1bGVOYW1lcy5Sb3dHcm91cGluZ01vZHVsZSwiQ2hhcnRpbmcgQWdncmVnYXRpb24iLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSkmJihvPXRoaXMuYWdncmVnYXRpb25TdGFnZS5hZ2dyZWdhdGVWYWx1ZXMocixlLmFnZ0Z1bmMpKSx0W2kuZ2V0SWQoKV09byYmdm9pZCAwIT09by52YWx1ZT9vLnZhbHVlOm99fSkpLGF9dXBkYXRlUGl2b3RLZXlzRm9yU1NSTSgpe2NvbnN0IGU9dGhpcy5jb2x1bW5Nb2RlbC5nZXRTZWNvbmRhcnlDb2x1bW5zKCk7aWYoIWUpcmV0dXJuO2NvbnN0IHQ9dGhpcy5leHRyYWN0UGl2b3RLZXlTZXBhcmF0b3IoZSk7ZS5mb3JFYWNoKGU9PntpZigiIj09PXQpZS5nZXRDb2xEZWYoKS5waXZvdEtleXM9W107ZWxzZXtjb25zdCBpPWUuZ2V0Q29sSWQoKS5zcGxpdCh0KTtlLmdldENvbERlZigpLnBpdm90S2V5cz1pLnNsaWNlKDAsaS5sZW5ndGgtMSl9fSl9ZXh0cmFjdFBpdm90S2V5U2VwYXJhdG9yKGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4iIjtjb25zdCB0PShlLGkpPT57Y29uc3Qgcz1lLmdldEdyb3VwSWQoKTtyZXR1cm4gZS5nZXRQYXJlbnQoKT90KGUuZ2V0UGFyZW50KCkscyk6aS5zcGxpdChzKVsxXVswXX0saT1lWzBdO3JldHVybiBudWxsPT1pLmdldFBhcmVudCgpPyIiOnQoaS5nZXRQYXJlbnQoKSxpLmdldENvbElkKCkpfXN0YXRpYyBnZXRHcm91cExhYmVscyhlLHQpe2NvbnN0IGk9W3RdO2Zvcig7ZSYmMCE9PWUubGV2ZWw7KShlPWUucGFyZW50KSYmaS5wdXNoKGUua2V5KTtyZXR1cm4gaX1nZXRGaWx0ZXJlZFJvd05vZGVzKCl7Y29uc3QgZT17fTtyZXR1cm4gdGhpcy5ncmlkUm93TW9kZWwuZm9yRWFjaE5vZGVBZnRlckZpbHRlckFuZFNvcnQodD0+e2VbdC5pZF09dH0pLGV9Z2V0QWxsUm93Tm9kZXMoKXtsZXQgZT1bXTtyZXR1cm4gdGhpcy5ncmlkUm93TW9kZWwuZm9yRWFjaE5vZGUodD0+e2UucHVzaCh0KX0pLHRoaXMuc29ydFJvd05vZGVzKGUpfXNvcnRSb3dOb2RlcyhlKXtjb25zdCB0PXRoaXMuc29ydENvbnRyb2xsZXIuZ2V0U29ydE9wdGlvbnMoKTtyZXR1cm4hdHx8MD09dC5sZW5ndGg/ZTp0aGlzLnJvd05vZGVTb3J0ZXIuZG9GdWxsU29ydChlLHQpfX1CdChbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93TW9kZWwiKV0sSHQucHJvdG90eXBlLCJncmlkUm93TW9kZWwiLHZvaWQgMCksQnQoW09iamVjdChzLkF1dG93aXJlZCkoInZhbHVlU2VydmljZSIpXSxIdC5wcm90b3R5cGUsInZhbHVlU2VydmljZSIsdm9pZCAwKSxCdChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sSHQucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxCdChbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93Tm9kZVNvcnRlciIpXSxIdC5wcm90b3R5cGUsInJvd05vZGVTb3J0ZXIiLHZvaWQgMCksQnQoW09iamVjdChzLkF1dG93aXJlZCkoInNvcnRDb250cm9sbGVyIildLEh0LnByb3RvdHlwZSwic29ydENvbnRyb2xsZXIiLHZvaWQgMCksQnQoW09iamVjdChzLk9wdGlvbmFsKSgiYWdncmVnYXRpb25TdGFnZSIpXSxIdC5wcm90b3R5cGUsImFnZ3JlZ2F0aW9uU3RhZ2UiLHZvaWQgMCk7dmFyIFd0PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBqdD1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7Z2V0Q29sdW1uKGUpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldFByaW1hcnlDb2x1bW4oZSl9Z2V0QWxsRGlzcGxheWVkQ29sdW1ucygpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKX1nZXRDb2xEaXNwbGF5TmFtZShlKXtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5TmFtZUZvckNvbHVtbihlLCJjaGFydCIpfWdldFJvd0dyb3VwQ29sdW1ucygpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpfWdldEdyb3VwRGlzcGxheUNvbHVtbnMoKXtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5nZXRHcm91cERpc3BsYXlDb2x1bW5zKCl9aXNQaXZvdE1vZGUoKXtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpfWlzUGl2b3RBY3RpdmUoKXtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90QWN0aXZlKCl9Z2V0Q2hhcnRDb2x1bW5zKCl7Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKSx0PW5ldyBTZXQsaT1uZXcgU2V0O3JldHVybiBlLmZvckVhY2goZT0+e2NvbnN0IHM9ZS5nZXRDb2xEZWYoKSxyPXMuY2hhcnREYXRhVHlwZTtpZihyKXN3aXRjaChyKXtjYXNlImNhdGVnb3J5IjpjYXNlInRpbWUiOnJldHVybiB2b2lkIHQuYWRkKGUpO2Nhc2Uic2VyaWVzIjpyZXR1cm4gdm9pZCBpLmFkZChlKTtjYXNlImV4Y2x1ZGVkIjpyZXR1cm47ZGVmYXVsdDpjb25zb2xlLndhcm4oYEFHIEdyaWQ6IHVuZXhwZWN0ZWQgY2hhcnREYXRhVHlwZSB2YWx1ZSAnJHtyfScgc3VwcGxpZWQsIGluc3RlYWQgdXNlICdjYXRlZ29yeScsICdzZXJpZXMnIG9yICdleGNsdWRlZCdgKX0iYWctR3JpZC1BdXRvQ29sdW1uIiE9PXMuY29sSWQ/ZS5pc1ByaW1hcnkoKT8odGhpcy5pc051bWJlckNvbChlKT9pOnQpLmFkZChlKTppLmFkZChlKTp0LmFkZChlKX0pLHtkaW1lbnNpb25Db2xzOnQsdmFsdWVDb2xzOml9fWlzTnVtYmVyQ29sKGUpe2lmKCJhZy1HcmlkLUF1dG9Db2x1bW4iPT09ZS5nZXRDb2xJZCgpKXJldHVybiExO2NvbnN0IHQ9dGhpcy5yb3dSZW5kZXJlci5nZXRSb3dOb2RlKHtyb3dJbmRleDowLHJvd1Bpbm5lZDpudWxsfSk7aWYoIXQpcmV0dXJuITE7bGV0IGk9dGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUoZSx0KTtyZXR1cm4gbnVsbD09aSYmKGk9dGhpcy5leHRyYWN0TGVhZkRhdGEodCxlKSksbnVsbCE9aSYmImZ1bmN0aW9uIj09dHlwZW9mIGkudG9OdW1iZXImJihpPWkudG9OdW1iZXIoKSksIm51bWJlciI9PXR5cGVvZiBpfWV4dHJhY3RMZWFmRGF0YShlLHQpe2lmKCFlLmFsbExlYWZDaGlsZHJlbilyZXR1cm4gbnVsbDtmb3IobGV0IGk9MDtpPGUuYWxsTGVhZkNoaWxkcmVuLmxlbmd0aDtpKyspe2NvbnN0IHM9ZS5hbGxMZWFmQ2hpbGRyZW5baV0scj10aGlzLnZhbHVlU2VydmljZS5nZXRWYWx1ZSh0LHMpO2lmKG51bGwhPXIpcmV0dXJuIHJ9cmV0dXJuIG51bGx9fTtXdChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sanQucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxXdChbT2JqZWN0KHMuQXV0b3dpcmVkKSgidmFsdWVTZXJ2aWNlIildLGp0LnByb3RvdHlwZSwidmFsdWVTZXJ2aWNlIix2b2lkIDApLFd0KFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dSZW5kZXJlciIpXSxqdC5wcm90b3R5cGUsInJvd1JlbmRlcmVyIix2b2lkIDApLGp0PVd0KFtPYmplY3Qocy5CZWFuKSgiY2hhcnRDb2x1bW5TZXJ2aWNlIildLGp0KTt2YXIgVXQ9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgenQgZXh0ZW5kcyBzLkJlYW5TdHVie2NvbnN0cnVjdG9yKGUpe3ZhciB0O3N1cGVyKCksdGhpcy5zdXBwcmVzc0NvbWJvQ2hhcnRXYXJuaW5ncz0hMSx0aGlzLmNoYXJ0RGF0YU1vZGVsPWUsdGhpcy5zZXJpZXNDaGFydFR5cGVzPW51bGwhPT0odD1lLnBhcmFtcy5zZXJpZXNDaGFydFR5cGVzKSYmdm9pZCAwIT09dD90OltdfWluaXQoKXt0aGlzLmluaXRDb21ib0NoYXJ0cygpfXVwZGF0ZShlKXt0aGlzLnNlcmllc0NoYXJ0VHlwZXM9bnVsbCE9ZT9lOnRoaXMuc2VyaWVzQ2hhcnRUeXBlcyx0aGlzLmluaXRDb21ib0NoYXJ0cygpLHRoaXMudXBkYXRlU2VyaWVzQ2hhcnRUeXBlcygpfWluaXRDb21ib0NoYXJ0cygpe2NvbnN0IGU9dGhpcy5zZXJpZXNDaGFydFR5cGVzJiZ0aGlzLnNlcmllc0NoYXJ0VHlwZXMubGVuZ3RoPjA7KCJjdXN0b21Db21ibyI9PT10aGlzLmNoYXJ0RGF0YU1vZGVsLmNoYXJ0VHlwZXx8ZSkmJih0aGlzLmNoYXJ0RGF0YU1vZGVsLmNoYXJ0VHlwZT0iY3VzdG9tQ29tYm8iLHRoaXMuc2F2ZWRDdXN0b21TZXJpZXNDaGFydFR5cGVzPXRoaXMuc2VyaWVzQ2hhcnRUeXBlc3x8W10pfXVwZGF0ZVNlcmllc0NoYXJ0VHlwZXMoKXt0aGlzLmNoYXJ0RGF0YU1vZGVsLmlzQ29tYm9DaGFydCgpJiYodGhpcy5zZXJpZXNDaGFydFR5cGVzPXRoaXMuc2VyaWVzQ2hhcnRUeXBlcy5tYXAoZT0+e2NvbnN0IHQ9WyJncm91cGVkQ29sdW1uIiwic3RhY2tlZENvbHVtbiIsInN0YWNrZWRBcmVhIl0uaW5jbHVkZXMoZS5jaGFydFR5cGUpO3JldHVybiBlLnNlY29uZGFyeUF4aXM9IXQmJmUuc2Vjb25kYXJ5QXhpcyxlfSksImN1c3RvbUNvbWJvIiE9PXRoaXMuY2hhcnREYXRhTW9kZWwuY2hhcnRUeXBlP3RoaXMudXBkYXRlQ2hhcnRTZXJpZXNUeXBlc0ZvckJ1aWx0SW5Db21ib3MoKTp0aGlzLnVwZGF0ZVNlcmllc0NoYXJ0VHlwZXNGb3JDdXN0b21Db21ibygpKX11cGRhdGVTZXJpZXNDaGFydFR5cGVzRm9yQ3VzdG9tQ29tYm8oKXt0aGlzLnNlcmllc0NoYXJ0VHlwZXMmJnRoaXMuc2VyaWVzQ2hhcnRUeXBlcy5sZW5ndGg+MHx8dGhpcy5zdXBwcmVzc0NvbWJvQ2hhcnRXYXJuaW5nc3x8Y29uc29sZS53YXJuKCJBRyBHcmlkOiAnc2VyaWVzQ2hhcnRUeXBlcycgYXJlIHJlcXVpcmVkIHdoZW4gdGhlICdjdXN0b21Db21ibycgY2hhcnQgdHlwZSBpcyBzcGVjaWZpZWQuIiksdGhpcy5zZXJpZXNDaGFydFR5cGVzPXRoaXMuc2VyaWVzQ2hhcnRUeXBlcy5tYXAoZT0+KHp0LlNVUFBPUlRFRF9DT01CT19DSEFSVF9UWVBFUy5pbmNsdWRlcyhlLmNoYXJ0VHlwZSl8fChjb25zb2xlLndhcm4oYEFHIEdyaWQ6IGludmFsaWQgY2hhcnRUeXBlICcke2UuY2hhcnRUeXBlfScgc3VwcGxpZWQgaW4gJ3Nlcmllc0NoYXJ0VHlwZXMnLCBjb252ZXJ0aW5nIHRvICdsaW5lJyBpbnN0ZWFkLmApLGUuY2hhcnRUeXBlPSJsaW5lIiksZSkpO2NvbnN0IGU9dGhpcy5jaGFydERhdGFNb2RlbC52YWx1ZUNvbFN0YXRlLm1hcChlPT57dGhpcy5zYXZlZEN1c3RvbVNlcmllc0NoYXJ0VHlwZXMmJjAhPT10aGlzLnNhdmVkQ3VzdG9tU2VyaWVzQ2hhcnRUeXBlcy5sZW5ndGh8fCh0aGlzLnNhdmVkQ3VzdG9tU2VyaWVzQ2hhcnRUeXBlcz10aGlzLnNlcmllc0NoYXJ0VHlwZXMpO2NvbnN0IHQ9dGhpcy5zYXZlZEN1c3RvbVNlcmllc0NoYXJ0VHlwZXMuZmluZCh0PT50LmNvbElkPT09ZS5jb2xJZCk7cmV0dXJuIHR8fChlLnNlbGVjdGVkJiYhdGhpcy5zdXBwcmVzc0NvbWJvQ2hhcnRXYXJuaW5ncyYmY29uc29sZS53YXJuKGBBRyBHcmlkOiBubyAnc2VyaWVzQ2hhcnRUeXBlJyBmb3VuZCBmb3IgY29sSWQgPSAnJHtlLmNvbElkfScsIGRlZmF1bHRpbmcgdG8gJ2xpbmUnLmApLHtjb2xJZDplLmNvbElkLGNoYXJ0VHlwZToibGluZSIsc2Vjb25kYXJ5QXhpczohMX0pfSk7dGhpcy5zZXJpZXNDaGFydFR5cGVzPWUsdGhpcy5zYXZlZEN1c3RvbVNlcmllc0NoYXJ0VHlwZXM9ZSx0aGlzLnN1cHByZXNzQ29tYm9DaGFydFdhcm5pbmdzPSEwfXVwZGF0ZUNoYXJ0U2VyaWVzVHlwZXNGb3JCdWlsdEluQ29tYm9zKCl7Y29uc3R7Y2hhcnRUeXBlOmUsdmFsdWVDb2xTdGF0ZTp0fT10aGlzLmNoYXJ0RGF0YU1vZGVsO2xldCBpPSJjb2x1bW5MaW5lQ29tYm8iPT09ZT8iZ3JvdXBlZENvbHVtbiI6InN0YWNrZWRBcmVhIixzPSJjb2x1bW5MaW5lQ29tYm8iPT09ZT8ibGluZSI6Imdyb3VwZWRDb2x1bW4iO2NvbnN0IHI9dC5maWx0ZXIoZT0+ZS5zZWxlY3RlZCksbz1NYXRoLmNlaWwoci5sZW5ndGgvMik7dGhpcy5zZXJpZXNDaGFydFR5cGVzPXIubWFwKChlLHQpPT57Y29uc3Qgcj10Pj1vP3M6aTtyZXR1cm57Y29sSWQ6ZS5jb2xJZCxjaGFydFR5cGU6cixzZWNvbmRhcnlBeGlzOiExfX0pfX16dC5TVVBQT1JURURfQ09NQk9fQ0hBUlRfVFlQRVM9WyJsaW5lIiwiZ3JvdXBlZENvbHVtbiIsInN0YWNrZWRDb2x1bW4iLCJhcmVhIiwic3RhY2tlZEFyZWEiXSxVdChbcy5Qb3N0Q29uc3RydWN0XSx6dC5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciBLdD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBZdCBleHRlbmRzIHMuQmVhblN0dWJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnVubGlua2VkPSExLHRoaXMuY2hhcnREYXRhPVtdLHRoaXMudmFsdWVDb2xTdGF0ZT1bXSx0aGlzLmRpbWVuc2lvbkNvbFN0YXRlPVtdLHRoaXMuY29sdW1uTmFtZXM9e30sdGhpcy5jcm9zc0ZpbHRlcmluZz0hMSx0aGlzLmdyb3VwaW5nPSExLHRoaXMucGFyYW1zPWUsdGhpcy5jaGFydElkPWUuY2hhcnRJZCx0aGlzLmNoYXJ0VHlwZT1lLmNoYXJ0VHlwZSx0aGlzLnBpdm90Q2hhcnQ9ZS5waXZvdENoYXJ0LHRoaXMuY2hhcnRUaGVtZU5hbWU9ZS5jaGFydFRoZW1lTmFtZSx0aGlzLmFnZ0Z1bmM9ZS5hZ2dGdW5jLHRoaXMucmVmZXJlbmNlQ2VsbFJhbmdlPWUuY2VsbFJhbmdlLHRoaXMuc3VwcGxpZWRDZWxsUmFuZ2U9ZS5jZWxsUmFuZ2UsdGhpcy5zdXBwcmVzc0NoYXJ0UmFuZ2VzPWUuc3VwcHJlc3NDaGFydFJhbmdlcyx0aGlzLnVubGlua2VkPSEhZS51bmxpbmtDaGFydCx0aGlzLmNyb3NzRmlsdGVyaW5nPSEhZS5jcm9zc0ZpbHRlcmluZ31pbml0KCl7dGhpcy5kYXRhc291cmNlPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IEh0KSx0aGlzLmNoYXJ0Q29sdW1uU2VydmljZT10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBqdCksdGhpcy5jb21ib0NoYXJ0TW9kZWw9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgenQodGhpcykpLHRoaXMudXBkYXRlQ2VsbFJhbmdlcygpLHRoaXMudXBkYXRlRGF0YSgpfXVwZGF0ZU1vZGVsKGUpe2NvbnN0e2NlbGxSYW5nZTp0LGNoYXJ0VHlwZTppLHBpdm90Q2hhcnQ6cyxjaGFydFRoZW1lTmFtZTpyLGFnZ0Z1bmM6byxzdXBwcmVzc0NoYXJ0UmFuZ2VzOm4sdW5saW5rQ2hhcnQ6YSxjcm9zc0ZpbHRlcmluZzpsLHNlcmllc0NoYXJ0VHlwZXM6ZH09ZTt0IT09dGhpcy5zdXBwbGllZENlbGxSYW5nZSYmKHRoaXMuZGltZW5zaW9uQ2VsbFJhbmdlPXZvaWQgMCx0aGlzLnZhbHVlQ2VsbFJhbmdlPXZvaWQgMCksdGhpcy5jaGFydFR5cGU9aSx0aGlzLnBpdm90Q2hhcnQ9cyx0aGlzLmNoYXJ0VGhlbWVOYW1lPXIsdGhpcy5hZ2dGdW5jPW8sdGhpcy5yZWZlcmVuY2VDZWxsUmFuZ2U9dCx0aGlzLnN1cHBsaWVkQ2VsbFJhbmdlPXQsdGhpcy5zdXBwcmVzc0NoYXJ0UmFuZ2VzPW4sdGhpcy51bmxpbmtlZD0hIWEsdGhpcy5jcm9zc0ZpbHRlcmluZz0hIWwsdGhpcy51cGRhdGVTZWxlY3RlZERpbWVuc2lvbnMobnVsbD09dD92b2lkIDA6dC5jb2x1bW5zKSx0aGlzLnVwZGF0ZUNlbGxSYW5nZXMoKTsodGhpcy5pc0NvbWJvQ2hhcnQoKXx8ZCkmJnRoaXMuY29tYm9DaGFydE1vZGVsLnVwZGF0ZShkKSx0aGlzLnVubGlua2VkfHx0aGlzLnVwZGF0ZURhdGEoKX11cGRhdGVDZWxsUmFuZ2VzKGUpe3RoaXMudmFsdWVDZWxsUmFuZ2UmJih0aGlzLnJlZmVyZW5jZUNlbGxSYW5nZT10aGlzLnZhbHVlQ2VsbFJhbmdlKTtjb25zdHtkaW1lbnNpb25Db2xzOnQsdmFsdWVDb2xzOml9PXRoaXMuY2hhcnRDb2x1bW5TZXJ2aWNlLmdldENoYXJ0Q29sdW1ucygpLHM9dGhpcy5nZXRBbGxDb2x1bW5zRnJvbVJhbmdlcygpO2UmJnRoaXMudXBkYXRlQ29sdW1uU3RhdGUoZSksdGhpcy5zZXREaW1lbnNpb25DZWxsUmFuZ2UodCxzLGUpLHRoaXMuc2V0VmFsdWVDZWxsUmFuZ2UoaSxzLGUpLGV8fCh0aGlzLnJlc2V0Q29sdW1uU3RhdGUoKSx0aGlzLnN5bmNEaW1lbnNpb25DZWxsUmFuZ2UoKSksdGhpcy5jb21ib0NoYXJ0TW9kZWwudXBkYXRlU2VyaWVzQ2hhcnRUeXBlcygpfXVwZGF0ZURhdGEoKXtjb25zdHtzdGFydFJvdzplLGVuZFJvdzp0fT10aGlzLmdldFJvd0luZGV4ZXMoKTt0aGlzLnBpdm90Q2hhcnQmJnRoaXMucmVzZXRDb2x1bW5TdGF0ZSgpLHRoaXMuZ3JvdXBpbmc9dGhpcy5pc0dyb3VwaW5nKCk7Y29uc3QgaT17YWdnRnVuYzp0aGlzLmFnZ0Z1bmMsZGltZW5zaW9uQ29sczp0aGlzLmdldFNlbGVjdGVkRGltZW5zaW9ucygpLGdyb3VwaW5nOnRoaXMuZ3JvdXBpbmcscGl2b3Rpbmc6dGhpcy5pc1Bpdm90QWN0aXZlKCksY3Jvc3NGaWx0ZXJpbmc6dGhpcy5jcm9zc0ZpbHRlcmluZyx2YWx1ZUNvbHM6dGhpcy5nZXRTZWxlY3RlZFZhbHVlQ29scygpLHN0YXJ0Um93OmUsZW5kUm93OnQsaXNTY2F0dGVyOnMuXy5pbmNsdWRlcyhbInNjYXR0ZXIiLCJidWJibGUiXSx0aGlzLmNoYXJ0VHlwZSl9LHtjaGFydERhdGE6cixjb2x1bW5OYW1lczpvfT10aGlzLmRhdGFzb3VyY2UuZ2V0RGF0YShpKTt0aGlzLmNoYXJ0RGF0YT1yLHRoaXMuY29sdW1uTmFtZXM9b31pc0dyb3VwaW5nKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInRyZWVEYXRhIiksdD1lP251bGw6dGhpcy5jaGFydENvbHVtblNlcnZpY2UuZ2V0Um93R3JvdXBDb2x1bW5zKCksaT1lfHx0JiZ0Lmxlbmd0aD4wLHM9dGhpcy5nZXRTZWxlY3RlZERpbWVuc2lvbnMoKS5tYXAoKHtjb2xJZDplfSk9PmUpLHI9dGhpcy5jaGFydENvbHVtblNlcnZpY2UuZ2V0R3JvdXBEaXNwbGF5Q29sdW1ucygpLm1hcChlPT5lLmdldENvbElkKCkpLnNvbWUoZT0+cy5pbmNsdWRlcyhlKSk7cmV0dXJuISFpJiZyfWdldFNlbGVjdGVkVmFsdWVDb2xzKCl7cmV0dXJuIHRoaXMudmFsdWVDb2xTdGF0ZS5maWx0ZXIoZT0+ZS5zZWxlY3RlZCkubWFwKGU9PmUuY29sdW1uKX1nZXRTZWxlY3RlZERpbWVuc2lvbnMoKXtyZXR1cm4gdGhpcy5kaW1lbnNpb25Db2xTdGF0ZS5maWx0ZXIoZT0+ZS5zZWxlY3RlZCl9Z2V0Q29sRGlzcGxheU5hbWUoZSl7cmV0dXJuIHRoaXMuY2hhcnRDb2x1bW5TZXJ2aWNlLmdldENvbERpc3BsYXlOYW1lKGUpfWlzUGl2b3RNb2RlKCl7cmV0dXJuIHRoaXMuY2hhcnRDb2x1bW5TZXJ2aWNlLmlzUGl2b3RNb2RlKCl9Z2V0Q2hhcnREYXRhVHlwZShlKXtjb25zdCB0PXRoaXMuY2hhcnRDb2x1bW5TZXJ2aWNlLmdldENvbHVtbihlKTtyZXR1cm4gdD90LmdldENvbERlZigpLmNoYXJ0RGF0YVR5cGU6dm9pZCAwfWlzUGl2b3RBY3RpdmUoKXtyZXR1cm4gdGhpcy5jaGFydENvbHVtblNlcnZpY2UuaXNQaXZvdEFjdGl2ZSgpfWNyZWF0ZUNlbGxSYW5nZShlLC4uLnQpe3JldHVybntpZDp0aGlzLmNoYXJ0SWQsc3RhcnRSb3c6dGhpcy5yZWZlcmVuY2VDZWxsUmFuZ2Uuc3RhcnRSb3csZW5kUm93OnRoaXMucmVmZXJlbmNlQ2VsbFJhbmdlLmVuZFJvdyxjb2x1bW5zOnQsc3RhcnRDb2x1bW46ZT09PXMuQ2VsbFJhbmdlVHlwZS5ESU1FTlNJT04/dFswXTp0aGlzLnJlZmVyZW5jZUNlbGxSYW5nZS5zdGFydENvbHVtbix0eXBlOmV9fWdldEFsbENvbHVtbnNGcm9tUmFuZ2VzKCl7aWYodGhpcy5waXZvdENoYXJ0KXJldHVybiBzLl8uY29udmVydFRvU2V0KHRoaXMuY2hhcnRDb2x1bW5TZXJ2aWNlLmdldEFsbERpc3BsYXllZENvbHVtbnMoKSk7Y29uc3QgZT10aGlzLmRpbWVuc2lvbkNlbGxSYW5nZXx8dGhpcy52YWx1ZUNlbGxSYW5nZT9bXTp0aGlzLnJlZmVyZW5jZUNlbGxSYW5nZS5jb2x1bW5zO3JldHVybiB0aGlzLmRpbWVuc2lvbkNlbGxSYW5nZSYmZS5wdXNoKC4uLnRoaXMuZGltZW5zaW9uQ2VsbFJhbmdlLmNvbHVtbnMpLHRoaXMudmFsdWVDZWxsUmFuZ2UmJmUucHVzaCguLi50aGlzLnZhbHVlQ2VsbFJhbmdlLmNvbHVtbnMpLHMuXy5jb252ZXJ0VG9TZXQoZSl9Z2V0Um93SW5kZXhlcygpe2xldCBlPTAsdD0wO2NvbnN0e3JhbmdlU2VydmljZTppLHZhbHVlQ2VsbFJhbmdlOnMsZGltZW5zaW9uQ2VsbFJhbmdlOnJ9PXRoaXMsbz1zfHxyO2lmKGkmJm8pe2U9aS5nZXRSYW5nZVN0YXJ0Um93KG8pLnJvd0luZGV4O2NvbnN0IHM9aS5nZXRSYW5nZUVuZFJvdyhvKTt0PSJib3R0b20iPT09cy5yb3dQaW5uZWQ/LTE6cy5yb3dJbmRleH1yZXR1cm57c3RhcnRSb3c6ZSxlbmRSb3c6dH19cmVzZXRDb2x1bW5TdGF0ZSgpe2NvbnN0e2RpbWVuc2lvbkNvbHM6ZSx2YWx1ZUNvbHM6dH09dGhpcy5jaGFydENvbHVtblNlcnZpY2UuZ2V0Q2hhcnRDb2x1bW5zKCksaT10aGlzLmdldEFsbENvbHVtbnNGcm9tUmFuZ2VzKCkscj10aGlzLnZhbHVlQ29sU3RhdGUubGVuZ3RoPDE7dGhpcy5kaW1lbnNpb25Db2xTdGF0ZT1bXSx0aGlzLnZhbHVlQ29sU3RhdGU9W107Y29uc3Qgbz11KHRoaXMuY2hhcnRUeXBlKTtsZXQgbj0hMSxhPTE7Y29uc3QgbD10aGlzLnN1cHBsaWVkQ2VsbFJhbmdlLmNvbHVtbnNbMF07ZS5mb3JFYWNoKGU9Pntjb25zdCB0PSJhZy1HcmlkLUF1dG9Db2x1bW4iPT09ZS5nZXRDb2xJZCgpO2xldCBzPSExO3RoaXMuY3Jvc3NGaWx0ZXJpbmcmJnRoaXMuYWdnRnVuYz9sLmdldENvbElkKCk9PT1lLmdldENvbElkKCkmJihzPSEwKTpzPSEhdHx8KCFufHxvKSYmaS5oYXMoZSksdGhpcy5kaW1lbnNpb25Db2xTdGF0ZS5wdXNoKHtjb2x1bW46ZSxjb2xJZDplLmdldENvbElkKCksZGlzcGxheU5hbWU6dGhpcy5nZXRDb2xEaXNwbGF5TmFtZShlKSxzZWxlY3RlZDpzLG9yZGVyOmErK30pLHMmJihuPSEwKX0pO2NvbnN0IGQ9e2NvbElkOll0LkRFRkFVTFRfQ0FURUdPUlksZGlzcGxheU5hbWU6dGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUoImRlZmF1bHRDYXRlZ29yeSIpLHNlbGVjdGVkOiFuLG9yZGVyOjB9O3RoaXMuZGltZW5zaW9uQ29sU3RhdGUudW5zaGlmdChkKTtjb25zdCBjPXRoaXMucmVmZXJlbmNlQ2VsbFJhbmdlLmNvbHVtbnMuZmlsdGVyKGU9PnQuaGFzKGUpKTt0LmZvckVhY2goZT0+e3ImJnMuXy5pbmNsdWRlcyh0aGlzLnJlZmVyZW5jZUNlbGxSYW5nZS5jb2x1bW5zLGUpJiYoZT1jLnNoaWZ0KCkpLHRoaXMudmFsdWVDb2xTdGF0ZS5wdXNoKHtjb2x1bW46ZSxjb2xJZDplLmdldENvbElkKCksZGlzcGxheU5hbWU6dGhpcy5nZXRDb2xEaXNwbGF5TmFtZShlKSxzZWxlY3RlZDppLmhhcyhlKSxvcmRlcjphKyt9KX0pfXVwZGF0ZUNvbHVtblN0YXRlKGUpe2NvbnN0IHQ9dD0+dC5jb2xJZD09PWUuY29sSWQse2RpbWVuc2lvbkNvbFN0YXRlOmksdmFsdWVDb2xTdGF0ZTpzfT10aGlzLHI9aS5maW5kKHQpLG89cy5maW5kKHQpO2lmKHIpe2lmKHUodGhpcy5jaGFydFR5cGUpKXIuc2VsZWN0ZWQ9ZS5zZWxlY3RlZDtlbHNle2NvbnN0IHQ9ZS5zZWxlY3RlZD9yOmkuZmlsdGVyKGU9PmUhPT1yKS5maW5kKCh7c2VsZWN0ZWQ6ZX0pPT5lKTtpLmZvckVhY2goZT0+ZS5zZWxlY3RlZD1lPT09dCl9fWVsc2UgbyYmKG8uc2VsZWN0ZWQ9ZS5zZWxlY3RlZCk7Y29uc3Qgbj1bLi4uaSwuLi5zXSxhPVtdO24uZm9yRWFjaCgodCxpKT0+e2k9PT1lLm9yZGVyJiZhLnB1c2goZS5jb2xJZCksdC5jb2xJZCE9PWUuY29sSWQmJmEucHVzaCh0LmNvbElkKX0pLG4uZm9yRWFjaChlPT57Y29uc3QgdD1hLmluZGV4T2YoZS5jb2xJZCk7ZS5vcmRlcj10Pj0wP2EuaW5kZXhPZihlLmNvbElkKTpuLmxlbmd0aC0xfSksdGhpcy5yZW9yZGVyQ29sU3RhdGUoKX1yZW9yZGVyQ29sU3RhdGUoKXtjb25zdCBlPShlLHQpPT5lLm9yZGVyLXQub3JkZXI7dGhpcy5kaW1lbnNpb25Db2xTdGF0ZS5zb3J0KGUpLHRoaXMudmFsdWVDb2xTdGF0ZS5zb3J0KGUpfXNldERpbWVuc2lvbkNlbGxSYW5nZShlLHQsaSl7aWYodGhpcy5kaW1lbnNpb25DZWxsUmFuZ2U9dm9pZCAwLCFpJiYhdGhpcy5kaW1lbnNpb25Db2xTdGF0ZS5sZW5ndGgpe2NvbnN0IGk9dSh0aGlzLmNoYXJ0VHlwZSkscj1uZXcgQXJyYXk7cmV0dXJuIGUuZm9yRWFjaChlPT57ci5sZW5ndGg+MCYmIWl8fCF0LmhhcyhlKXx8ci5wdXNoKGUpfSksdm9pZChyLmxlbmd0aD4wJiYodGhpcy5kaW1lbnNpb25DZWxsUmFuZ2U9dGhpcy5jcmVhdGVDZWxsUmFuZ2Uocy5DZWxsUmFuZ2VUeXBlLkRJTUVOU0lPTiwuLi5yKSkpfWxldCByPWk/W2ldOltdO2lmKHRoaXMuY3Jvc3NGaWx0ZXJpbmcmJnRoaXMuYWdnRnVuYyl7Y29uc3QgZT10aGlzLnN1cHBsaWVkQ2VsbFJhbmdlLmNvbHVtbnNbMF07cj10aGlzLmRpbWVuc2lvbkNvbFN0YXRlLmZpbHRlcih0PT50LmNvbElkPT09ZS5nZXRDb2xJZCgpKX1lbHNlKDA9PT1yLmxlbmd0aHx8ci5zb21lKCh7Y29sdW1uOnR9KT0+IXR8fCFlLmhhcyh0KSkpJiYocj10aGlzLmRpbWVuc2lvbkNvbFN0YXRlLmZpbHRlcihlPT5lLnNlbGVjdGVkKSk7Y29uc3Qgbz0xPT09ci5sZW5ndGgmJnJbMF0uY29sSWQ9PT1ZdC5ERUZBVUxUX0NBVEVHT1JZLG49ci5tYXAoKHtjb2x1bW46ZX0pPT5lKS5maWx0ZXIoZT0+bnVsbCE9ZSk7bi5sZW5ndGg+MCYmIW8mJih0aGlzLmRpbWVuc2lvbkNlbGxSYW5nZT10aGlzLmNyZWF0ZUNlbGxSYW5nZShzLkNlbGxSYW5nZVR5cGUuRElNRU5TSU9OLC4uLm4pKX1zZXRWYWx1ZUNlbGxSYW5nZShlLHQsaSl7dGhpcy52YWx1ZUNlbGxSYW5nZT12b2lkIDA7Y29uc3Qgcj1bXTtpZihlLmZvckVhY2goZT0+e2kmJmkuY29sSWQ9PT1lLmdldENvbElkKCk/aS5zZWxlY3RlZCYmci5wdXNoKGkuY29sdW1uKTp0LmhhcyhlKSYmci5wdXNoKGUpfSksci5sZW5ndGg+MCl7bGV0IGU9W107dGhpcy52YWx1ZUNvbFN0YXRlLmxlbmd0aD4wP2U9dGhpcy52YWx1ZUNvbFN0YXRlLm1hcChlPT5lLmNvbElkKTp0LmZvckVhY2godD0+ZS5wdXNoKHQuZ2V0Q29sSWQoKSkpLHIuc29ydCgodCxpKT0+ZS5pbmRleE9mKHQuZ2V0Q29sSWQoKSktZS5pbmRleE9mKGkuZ2V0Q29sSWQoKSkpLHRoaXMudmFsdWVDZWxsUmFuZ2U9dGhpcy5jcmVhdGVDZWxsUmFuZ2Uocy5DZWxsUmFuZ2VUeXBlLlZBTFVFLC4uLnIpfX11cGRhdGVTZWxlY3RlZERpbWVuc2lvbnMoZSl7Y29uc3QgdD1uZXcgU2V0KGUubWFwKGU9PmUuZ2V0Q29sSWQoKSkpO2lmKHUodGhpcy5jaGFydFR5cGUpKXtjb25zdCBlPXRoaXMuZGltZW5zaW9uQ29sU3RhdGUuZmlsdGVyKGU9PnQuaGFzKGUuY29sSWQpKSxpPW5ldyBTZXQoZS5tYXAoZT0+ZS5jb2xJZCkpO3RoaXMuZGltZW5zaW9uQ29sU3RhdGU9dGhpcy5kaW1lbnNpb25Db2xTdGF0ZS5tYXAoZT0+T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtzZWxlY3RlZDppLmhhcyhlLmNvbElkKX0pKX1lbHNle2NvbnN0IGU9KHRoaXMuZGltZW5zaW9uQ29sU3RhdGUuZmluZChlPT50LmhhcyhlLmNvbElkKSl8fHRoaXMuZGltZW5zaW9uQ29sU3RhdGVbMF0pLmNvbElkO3RoaXMuZGltZW5zaW9uQ29sU3RhdGU9dGhpcy5kaW1lbnNpb25Db2xTdGF0ZS5tYXAodD0+T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtzZWxlY3RlZDp0LmNvbElkPT09ZX0pKX19c3luY0RpbWVuc2lvbkNlbGxSYW5nZSgpe2NvbnN0IGU9dGhpcy5nZXRTZWxlY3RlZERpbWVuc2lvbnMoKTtpZigwPT09ZS5sZW5ndGgpcmV0dXJuO2NvbnN0IHQ9ZS5tYXAoKHtjb2x1bW46ZX0pPT5lKS5maWx0ZXIoZT0+bnVsbCE9ZSk7dC5sZW5ndGg+MCYmKHRoaXMuZGltZW5zaW9uQ2VsbFJhbmdlPXRoaXMuY3JlYXRlQ2VsbFJhbmdlKHMuQ2VsbFJhbmdlVHlwZS5ESU1FTlNJT04sLi4udCkpfWlzQ29tYm9DaGFydCgpe3JldHVyblsiY29sdW1uTGluZUNvbWJvIiwiYXJlYUNvbHVtbkNvbWJvIiwiY3VzdG9tQ29tYm8iXS5pbmNsdWRlcyh0aGlzLmNoYXJ0VHlwZSl9fWZ1bmN0aW9uICR0KGUpe3JldHVybiBudWxsIT1lLmNoYXJ0P2UuY2hhcnQ6ZX1ZdC5ERUZBVUxUX0NBVEVHT1JZPSJBRy1HUklELURFRkFVTFQtQ0FURUdPUlkiLEt0KFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyYW5nZVNlcnZpY2UiKV0sWXQucHJvdG90eXBlLCJyYW5nZVNlcnZpY2UiLHZvaWQgMCksS3QoW09iamVjdChzLkF1dG93aXJlZCkoImNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlIildLFl0LnByb3RvdHlwZSwiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiLHZvaWQgMCksS3QoW3MuUG9zdENvbnN0cnVjdF0sWXQucHJvdG90eXBlLCJpbml0IixudWxsKTtjbGFzcyBYdHtjb25zdHJ1Y3RvcihlKXt0aGlzLmNoYXJ0UHJveHlQYXJhbXM9ZSx0aGlzLmNsZWFyVGhlbWVPdmVycmlkZXM9ITEsdGhpcy5jaGFydD1lLmNoYXJ0SW5zdGFuY2UsdGhpcy5jaGFydFR5cGU9ZS5jaGFydFR5cGUsdGhpcy5jcm9zc0ZpbHRlcmluZz1lLmNyb3NzRmlsdGVyaW5nLHRoaXMuY3Jvc3NGaWx0ZXJDYWxsYmFjaz1lLmNyb3NzRmlsdGVyQ2FsbGJhY2ssdGhpcy5zdGFuZGFsb25lQ2hhcnRUeXBlPWcodGhpcy5jaGFydFR5cGUpLG51bGw9PXRoaXMuY2hhcnQ/dGhpcy5jaGFydD1vLmIuY3JlYXRlKHRoaXMuZ2V0Q29tbW9uQ2hhcnRPcHRpb25zKCkpOnRoaXMuY2xlYXJUaGVtZU92ZXJyaWRlcz0hMH1nZXRDaGFydCgpe3JldHVybiAkdCh0aGlzLmNoYXJ0KX1nZXRDaGFydFJlZigpe3JldHVybiB0aGlzLmNoYXJ0fWRvd25sb2FkQ2hhcnQoZSx0LGkpe2NvbnN0e2NoYXJ0OnN9PXRoaXMscj0kdChzKSxuPXR8fChyLnRpdGxlP3IudGl0bGUudGV4dDoiY2hhcnQiKSx7d2lkdGg6YSxoZWlnaHQ6bH09ZXx8e307by5iLmRvd25sb2FkKHMse3dpZHRoOmEsaGVpZ2h0OmwsZmlsZU5hbWU6bixmaWxlRm9ybWF0Oml9KX1nZXRDaGFydEltYWdlRGF0YVVSTChlKXtyZXR1cm4gdGhpcy5nZXRDaGFydCgpLnNjZW5lLmdldERhdGFVUkwoZSl9Z2V0Q2hhcnRPcHRpb25zKCl7cmV0dXJuIHRoaXMuY2hhcnQuZ2V0T3B0aW9ucygpfWdldENoYXJ0VGhlbWVPdmVycmlkZXMoKXt2YXIgZTtyZXR1cm4gbnVsbCE9PShlPXRoaXMuZ2V0Q2hhcnRPcHRpb25zKCkudGhlbWUub3ZlcnJpZGVzKSYmdm9pZCAwIT09ZT9lOnt9fWdldENoYXJ0UGFsZXR0ZSgpe3JldHVybiBvLmouZ2V0Q2hhcnRUaGVtZSh0aGlzLmdldENoYXJ0T3B0aW9ucygpLnRoZW1lKS5wYWxldHRlfXNldFBhaXJlZChlKXtjb25zdCB0PWcodGhpcy5jaGFydFByb3h5UGFyYW1zLmNoYXJ0VHlwZSk7by5iLnVwZGF0ZURlbHRhKHRoaXMuY2hhcnQse3RoZW1lOntvdmVycmlkZXM6e1t0XTp7cGFpcmVkOmV9fX19KX1pc1BhaXJlZCgpe2NvbnN0IGU9Zyh0aGlzLmNoYXJ0UHJveHlQYXJhbXMuY2hhcnRUeXBlKTtyZXR1cm4gUih0aGlzLmdldENoYXJ0VGhlbWVPdmVycmlkZXMoKSxlKyIucGFpcmVkIiwhMCl9bG9va3VwQ3VzdG9tQ2hhcnRUaGVtZShlKXtyZXR1cm4gQSh0aGlzLmNoYXJ0UHJveHlQYXJhbXMsZSl9dHJhbnNmb3JtRGF0YShlLHQsaSl7cmV0dXJuIGk/ZS5tYXAoKGUsaSk9Pntjb25zdCBzPWVbdF0scj1zJiZzLnRvU3RyaW5nP3MudG9TdHJpbmcoKToiIixvPU9iamVjdC5hc3NpZ24oe30sZSk7cmV0dXJuIG9bdF09e2lkOmksdmFsdWU6cyx0b1N0cmluZzooKT0+cn0sb30pOmV9Z2V0Q29tbW9uQ2hhcnRPcHRpb25zKGUpe3ZhciB0LGk7Y29uc3Qgcz10aGlzLmNsZWFyVGhlbWVPdmVycmlkZXM/e306bnVsbCE9PShpPW51bGw9PT0odD10aGlzLmNoYXJ0KXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRPcHRpb25zKCkpJiZ2b2lkIDAhPT1pP2k6e30scj1udWxsIT10aGlzLmNoYXJ0P3RoaXMuZ2V0QWN0aXZlRm9ybWF0dGluZ1BhbmVsT3ZlcnJpZGVzKCk6dm9pZCAwO3RoaXMuY2xlYXJUaGVtZU92ZXJyaWRlcz0hMTtjb25zdCBvPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQucmVkdWNlKChlLHQpPT50P3tiYXNlVGhlbWU6ZSxvdmVycmlkZXM6dH06ZSxlKX0oeCh0aGlzLmNoYXJ0UHJveHlQYXJhbXMsdGhpcyksW3RoaXMuZ2V0Q2hhcnRUaGVtZURlZmF1bHRzKCksbnVsbCE9ZT9lOnJdKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHMpLHt0aGVtZTpvLGNvbnRhaW5lcjp0aGlzLmNoYXJ0UHJveHlQYXJhbXMucGFyZW50RWxlbWVudCxtb2RlOiJpbnRlZ3JhdGVkIn0pfWdldENoYXJ0VGhlbWVEZWZhdWx0cygpe31nZXRBY3RpdmVGb3JtYXR0aW5nUGFuZWxPdmVycmlkZXMoKXt2YXIgZSx0O2lmKHRoaXMuY2xlYXJUaGVtZU92ZXJyaWRlcylyZXR1cm57fTtjb25zdCBpPW51bGw9PT0oZT10aGlzLmNoYXJ0KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRPcHRpb25zKCkudGhlbWU7cmV0dXJuIG51bGwhPT0odD1udWxsPT1pP3ZvaWQgMDppLm92ZXJyaWRlcykmJnZvaWQgMCE9PXQ/dDp7fX1kZXN0cm95KHtrZWVwQ2hhcnRJbnN0YW5jZTplPSExfT17fSl7aWYoZSlyZXR1cm4gdGhpcy5jaGFydC5yZXNldEFuaW1hdGlvbnMoKSx0aGlzLmNoYXJ0O3RoaXMuZGVzdHJveUNoYXJ0KCl9ZGVzdHJveUNoYXJ0KCl7dGhpcy5jaGFydCYmKHRoaXMuY2hhcnQuZGVzdHJveSgpLHRoaXMuY2hhcnQ9dm9pZCAwKX19Y2xhc3MgcXQgZXh0ZW5kcyBYdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmNyb3NzRmlsdGVyaW5nQWxsUG9pbnRzPW5ldyBTZXQsdGhpcy5jcm9zc0ZpbHRlcmluZ1NlbGVjdGVkUG9pbnRzPVtdfXVwZGF0ZShlKXtjb25zdCB0PXRoaXMuZ2V0QXhlcyhlKSxpPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLmdldENvbW1vbkNoYXJ0T3B0aW9ucyhlLnVwZGF0ZWRPdmVycmlkZXMpKSx7ZGF0YTp0aGlzLmdldERhdGEoZSx0KSxheGVzOnQsc2VyaWVzOnRoaXMuZ2V0U2VyaWVzKGUpfSk7by5iLnVwZGF0ZSh0aGlzLmdldENoYXJ0UmVmKCksaSl9Z2V0RGF0YShlLHQpe2NvbnN0IGk9WyJhcmVhIiwibGluZSJdLmluY2x1ZGVzKHRoaXMuc3RhbmRhbG9uZUNoYXJ0VHlwZSkscz10LnNvbWUoZT0+ImNhdGVnb3J5Ij09PShudWxsPT1lP3ZvaWQgMDplLnR5cGUpKTtyZXR1cm4gdGhpcy5jcm9zc0ZpbHRlcmluZyYmaT90aGlzLmdldENyb3NzRmlsdGVyRGF0YShlKTp0aGlzLmdldERhdGFUcmFuc2Zvcm1lZERhdGEoZSxzKX1nZXREYXRhVHJhbnNmb3JtZWREYXRhKGUsdCl7Y29uc3RbaV09ZS5jYXRlZ29yaWVzO3JldHVybiB0aGlzLnRyYW5zZm9ybURhdGEoZS5kYXRhLGkuaWQsdCl9Z2V0WEF4aXNUeXBlKGUpe3JldHVybiBlLmdyb3VwaW5nPyJncm91cGVkLWNhdGVnb3J5IjpxdC5pc1RpbWVBeGlzKGUpPyJ0aW1lIjoiY2F0ZWdvcnkifXN0YXRpYyBpc1RpbWVBeGlzKGUpe2NvbnN0W3RdPWUuY2F0ZWdvcmllcztpZih0JiZ0LmNoYXJ0RGF0YVR5cGUpcmV0dXJuInRpbWUiPT09dC5jaGFydERhdGFUeXBlO2NvbnN0IGk9ZS5kYXRhWzBdO3JldHVybihpJiZpW3QuaWRdKWluc3RhbmNlb2YgRGF0ZX1jcm9zc0ZpbHRlcmluZ1Jlc2V0KCl7dGhpcy5jcm9zc0ZpbHRlcmluZ1NlbGVjdGVkUG9pbnRzPVtdLHRoaXMuY3Jvc3NGaWx0ZXJpbmdBbGxQb2ludHMuY2xlYXIoKX1jcm9zc0ZpbHRlcmluZ1BvaW50U2VsZWN0ZWQoZSl7cmV0dXJuIDA9PXRoaXMuY3Jvc3NGaWx0ZXJpbmdTZWxlY3RlZFBvaW50cy5sZW5ndGh8fHRoaXMuY3Jvc3NGaWx0ZXJpbmdTZWxlY3RlZFBvaW50cy5pbmNsdWRlcyhlKX1jcm9zc0ZpbHRlcmluZ0Rlc2VsZWN0ZWRQb2ludHMoKXtyZXR1cm4gdGhpcy5jcm9zc0ZpbHRlcmluZ1NlbGVjdGVkUG9pbnRzLmxlbmd0aD4wJiZ0aGlzLmNyb3NzRmlsdGVyaW5nQWxsUG9pbnRzLnNpemUhPT10aGlzLmNyb3NzRmlsdGVyaW5nU2VsZWN0ZWRQb2ludHMubGVuZ3RofWV4dHJhY3RMaW5lQXJlYUNyb3NzRmlsdGVyU2VyaWVzKGUsdCl7Y29uc3RbaV09dC5jYXRlZ29yaWVzLHM9ZT0+e2lmKCJhcmVhIj09PXRoaXMuc3RhbmRhbG9uZUNoYXJ0VHlwZSl7cmV0dXJuIHQuZ2V0Q3Jvc3NGaWx0ZXJpbmdDb250ZXh0KCkubGFzdFNlbGVjdGVkQ2hhcnRJZD09PXQuY2hhcnRJZD9lKyItdG90YWwiOmV9cmV0dXJuIGUrIi10b3RhbCJ9O3JldHVybiBlLm1hcChlPT4oZS55S2V5PXMoZS55S2V5KSxlLmxpc3RlbmVycz17bm9kZUNsaWNrOnQ9Pntjb25zdCBpPXQuZGF0dW1bZS54S2V5XSxzPXQuZXZlbnQubWV0YUtleXx8dC5ldmVudC5jdHJsS2V5O3RoaXMuY3Jvc3NGaWx0ZXJpbmdBZGRTZWxlY3RlZFBvaW50KHMsaSksdGhpcy5jcm9zc0ZpbHRlckNhbGxiYWNrKHQpfX0sZS5tYXJrZXI9e2Zvcm1hdHRlcjplPT57Y29uc3QgdD1lLmRhdHVtW2kuaWRdO3JldHVybntmaWxsOmUuaGlnaGxpZ2h0ZWQ/InllbGxvdyI6ZS5maWxsLHNpemU6ZS5oaWdobGlnaHRlZD8xNDp0aGlzLmNyb3NzRmlsdGVyaW5nUG9pbnRTZWxlY3RlZCh0KT84OjB9fX0sImFyZWEiPT09dGhpcy5zdGFuZGFsb25lQ2hhcnRUeXBlJiYoZS5maWxsT3BhY2l0eT10aGlzLmNyb3NzRmlsdGVyaW5nRGVzZWxlY3RlZFBvaW50cygpPy4zOjEpLCJsaW5lIj09PXRoaXMuc3RhbmRhbG9uZUNoYXJ0VHlwZSYmKGUuc3Ryb2tlT3BhY2l0eT10aGlzLmNyb3NzRmlsdGVyaW5nRGVzZWxlY3RlZFBvaW50cygpPy4zOjEpLGUpKX1nZXRDcm9zc0ZpbHRlckRhdGEoZSl7dGhpcy5jcm9zc0ZpbHRlcmluZ0FsbFBvaW50cy5jbGVhcigpO2NvbnN0W3RdPWUuY2F0ZWdvcmllcyxpPWUuZmllbGRzWzBdLmNvbElkLHM9aSsiLWZpbHRlcmVkLW91dCIscj1lLmdldENyb3NzRmlsdGVyaW5nQ29udGV4dCgpLmxhc3RTZWxlY3RlZENoYXJ0SWQ7cmV0dXJuIGUuZGF0YS5tYXAobz0+e2NvbnN0IG49b1t0LmlkXTt0aGlzLmNyb3NzRmlsdGVyaW5nQWxsUG9pbnRzLmFkZChuKTtjb25zdCBhPXRoaXMuY3Jvc3NGaWx0ZXJpbmdQb2ludFNlbGVjdGVkKG4pO3JldHVybiJhcmVhIj09PXRoaXMuc3RhbmRhbG9uZUNoYXJ0VHlwZSYmcj09PWUuY2hhcnRJZCYmKG9baSsiLXRvdGFsIl09YT9vW2ldOm9baV0rb1tzXSksImxpbmUiPT09dGhpcy5zdGFuZGFsb25lQ2hhcnRUeXBlJiYob1tpKyItdG90YWwiXT1hP29baV06b1tpXStvW3NdKSxvfSl9Y3Jvc3NGaWx0ZXJpbmdBZGRTZWxlY3RlZFBvaW50KGUsdCl7ZT90aGlzLmNyb3NzRmlsdGVyaW5nU2VsZWN0ZWRQb2ludHMucHVzaCh0KTp0aGlzLmNyb3NzRmlsdGVyaW5nU2VsZWN0ZWRQb2ludHM9W3RdfX1mdW5jdGlvbiBadChlLHQpe2NvbnN0IGk9cGFyc2VJbnQoZS5zbGljZSgxLDMpLDE2KSxzPXBhcnNlSW50KGUuc2xpY2UoMyw1KSwxNikscj1wYXJzZUludChlLnNsaWNlKDUsNyksMTYpO3JldHVybiB0P2ByZ2JhKCR7aX0sICR7c30sICR7cn0sICR7dH0pYDpgcmdiYSgke2l9LCAke3N9LCAke3J9KWB9ZnVuY3Rpb24gUXQoZSx0KXtyZXR1cm4gZS5tYXAoZT0+e2NvbnN0IGk9by5rLkNvbG9yLmZyb21TdHJpbmcoZSk7cmV0dXJuIG5ldyBvLmsuQ29sb3IoaS5yLGkuZyxpLmIsdCkudG9IZXhTdHJpbmcoKX0pfWNsYXNzIEp0IGV4dGVuZHMgcXR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9Z2V0QXhlcyhlKXtjb25zdCB0PVt7dHlwZTp0aGlzLmdldFhBeGlzVHlwZShlKSxwb3NpdGlvbjpkKHRoaXMuY2hhcnRUeXBlKT8ibGVmdCI6ImJvdHRvbSJ9LHt0eXBlOiJudW1iZXIiLHBvc2l0aW9uOmQodGhpcy5jaGFydFR5cGUpPyJib3R0b20iOiJsZWZ0In1dO2lmKHRoaXMuaXNOb3JtYWxpc2VkKCkpe2NvbnN0IGU9dFsxXTtlLmxhYmVsPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlLmxhYmVsKSx7Zm9ybWF0dGVyOmU9Pk1hdGgucm91bmQoZS52YWx1ZSkrIiUifSl9cmV0dXJuIHR9Z2V0U2VyaWVzKGUpe2NvbnN0W3RdPWUuY2F0ZWdvcmllcyxpPWUuZmllbGRzLm1hcChlPT57cmV0dXJue3R5cGU6dGhpcy5zdGFuZGFsb25lQ2hhcnRUeXBlLGRpcmVjdGlvbjpkKHRoaXMuY2hhcnRUeXBlKT8iaG9yaXpvbnRhbCI6InZlcnRpY2FsIixzdGFja2VkOnRoaXMuY3Jvc3NGaWx0ZXJpbmd8fChpPXRoaXMuY2hhcnRUeXBlLGMuaGFzKGkpKSxub3JtYWxpemVkVG86dGhpcy5pc05vcm1hbGlzZWQoKT8xMDA6dm9pZCAwLHhLZXk6dC5pZCx4TmFtZTp0Lm5hbWUseUtleTplLmNvbElkLHlOYW1lOmUuZGlzcGxheU5hbWV9O3ZhciBpfSk7cmV0dXJuIHRoaXMuY3Jvc3NGaWx0ZXJpbmc/dGhpcy5leHRyYWN0Q3Jvc3NGaWx0ZXJTZXJpZXMoaSk6aX1leHRyYWN0Q3Jvc3NGaWx0ZXJTZXJpZXMoZSl7Y29uc3QgdD10aGlzLmdldENoYXJ0UGFsZXR0ZSgpLGk9KGUsaSk9Pk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7aGlnaGxpZ2h0U3R5bGU6e2l0ZW06e2ZpbGw6dm9pZCAwfX0sZmlsbDpudWxsPT10P3ZvaWQgMDp0LmZpbGxzW2ldLHN0cm9rZTpudWxsPT10P3ZvaWQgMDp0LnN0cm9rZXNbaV0sbGlzdGVuZXJzOntub2RlQ2xpY2s6dGhpcy5jcm9zc0ZpbHRlckNhbGxiYWNrfX0pLHM9ZT0+e2NvbnN0IHQ9ZS55S2V5KyItZmlsdGVyZWQtb3V0IjtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LEUoe30sZSkpLHt5S2V5OnQsZmlsbDpadChlLmZpbGwsIjAuMyIpLHN0cm9rZTpadChlLnN0cm9rZSwiMC4zIiksc2hvd0luTGVnZW5kOiExfSl9LHI9W107Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IG89aShlW3RdLHQpO3IucHVzaChvKSxyLnB1c2gocyhvKSl9cmV0dXJuIHJ9aXNOb3JtYWxpc2VkKCl7cmV0dXJuIXRoaXMuY3Jvc3NGaWx0ZXJpbmcmJnMuXy5pbmNsdWRlcyhbIm5vcm1hbGl6ZWRDb2x1bW4iLCJub3JtYWxpemVkQmFyIl0sdGhpcy5jaGFydFR5cGUpfX1jbGFzcyBlaSBleHRlbmRzIHF0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfWdldEF4ZXMoZSl7Y29uc3QgdD1be3R5cGU6dGhpcy5nZXRYQXhpc1R5cGUoZSkscG9zaXRpb246ImJvdHRvbSJ9LHt0eXBlOiJudW1iZXIiLHBvc2l0aW9uOiJsZWZ0In1dO2lmKHRoaXMuaXNOb3JtYWxpc2VkKCkpe2NvbnN0IGU9dFsxXTtlLmxhYmVsPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlLmxhYmVsKSx7Zm9ybWF0dGVyOmU9Pk1hdGgucm91bmQoZS52YWx1ZSkrIiUifSl9cmV0dXJuIHR9Z2V0U2VyaWVzKGUpe2NvbnN0W3RdPWUuY2F0ZWdvcmllcyxpPWUuZmllbGRzLm1hcChlPT4oe3R5cGU6dGhpcy5zdGFuZGFsb25lQ2hhcnRUeXBlLHhLZXk6dC5pZCx4TmFtZTp0Lm5hbWUseUtleTplLmNvbElkLHlOYW1lOmUuZGlzcGxheU5hbWUsbm9ybWFsaXplZFRvOiJub3JtYWxpemVkQXJlYSI9PT10aGlzLmNoYXJ0VHlwZT8xMDA6dm9pZCAwLHN0YWNrZWQ6WyJub3JtYWxpemVkQXJlYSIsInN0YWNrZWRBcmVhIl0uaW5jbHVkZXModGhpcy5jaGFydFR5cGUpfSkpO3JldHVybiB0aGlzLmNyb3NzRmlsdGVyaW5nP3RoaXMuZXh0cmFjdExpbmVBcmVhQ3Jvc3NGaWx0ZXJTZXJpZXMoaSxlKTppfWlzTm9ybWFsaXNlZCgpe3JldHVybiF0aGlzLmNyb3NzRmlsdGVyaW5nJiYibm9ybWFsaXplZEFyZWEiPT09dGhpcy5jaGFydFR5cGV9fWNsYXNzIHRpIGV4dGVuZHMgcXR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9Z2V0QXhlcyhlKXtyZXR1cm5be3R5cGU6dGhpcy5nZXRYQXhpc1R5cGUoZSkscG9zaXRpb246ImJvdHRvbSJ9LHt0eXBlOiJudW1iZXIiLHBvc2l0aW9uOiJsZWZ0In1dfWdldFNlcmllcyhlKXtjb25zdFt0XT1lLmNhdGVnb3JpZXMsaT1lLmZpZWxkcy5tYXAoZT0+KHt0eXBlOnRoaXMuc3RhbmRhbG9uZUNoYXJ0VHlwZSx4S2V5OnQuaWQseE5hbWU6dC5uYW1lLHlLZXk6ZS5jb2xJZCx5TmFtZTplLmRpc3BsYXlOYW1lfSkpO3JldHVybiB0aGlzLmNyb3NzRmlsdGVyaW5nP3RoaXMuZXh0cmFjdExpbmVBcmVhQ3Jvc3NGaWx0ZXJTZXJpZXMoaSxlKTppfX1jbGFzcyBpaSBleHRlbmRzIFh0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfWdldEF4ZXMoZSl7Y29uc3QgdD0icmFkaWFsLWJhciI9PT10aGlzLnN0YW5kYWxvbmVDaGFydFR5cGU7cmV0dXJuW3t0eXBlOnQ/ImFuZ2xlLW51bWJlciI6ImFuZ2xlLWNhdGVnb3J5In0se3R5cGU6dD8icmFkaXVzLWNhdGVnb3J5IjoicmFkaXVzLW51bWJlciJ9XX1nZXRTZXJpZXMoZSl7Y29uc3R7ZmllbGRzOnR9PWUsW2ldPWUuY2F0ZWdvcmllcyxzPSJyYWRpYWwtYmFyIj09PXRoaXMuc3RhbmRhbG9uZUNoYXJ0VHlwZTtyZXR1cm4gdC5tYXAoZT0+e3ZhciB0LHI7cmV0dXJue3R5cGU6dGhpcy5zdGFuZGFsb25lQ2hhcnRUeXBlLGFuZ2xlS2V5OnM/ZS5jb2xJZDppLmlkLGFuZ2xlTmFtZTpzP251bGwhPT0odD1lLmRpc3BsYXlOYW1lKSYmdm9pZCAwIT09dD90OnZvaWQgMDppLm5hbWUscmFkaXVzS2V5OnM/aS5pZDplLmNvbElkLHJhZGl1c05hbWU6cz9pLm5hbWU6bnVsbCE9PShyPWUuZGlzcGxheU5hbWUpJiZ2b2lkIDAhPT1yP3I6dm9pZCAwfX0pfXVwZGF0ZShlKXtjb25zdCB0PXRoaXMuZ2V0QXhlcyhlKSxpPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLmdldENvbW1vbkNoYXJ0T3B0aW9ucyhlLnVwZGF0ZWRPdmVycmlkZXMpKSx7ZGF0YTp0aGlzLmdldERhdGEoZSx0KSxheGVzOnQsc2VyaWVzOnRoaXMuZ2V0U2VyaWVzKGUpfSk7by5iLnVwZGF0ZSh0aGlzLmdldENoYXJ0UmVmKCksaSl9Z2V0RGF0YShlLHQpe2NvbnN0IGk9dC5zb21lKGU9PiJhbmdsZS1jYXRlZ29yeSI9PT1lLnR5cGV8fCJyYWRpdXMtY2F0ZWdvcnkiPT09ZS50eXBlKTtyZXR1cm4gdGhpcy5nZXREYXRhVHJhbnNmb3JtZWREYXRhKGUsaSl9Z2V0RGF0YVRyYW5zZm9ybWVkRGF0YShlLHQpe2NvbnN0W2ldPWUuY2F0ZWdvcmllcztyZXR1cm4gdGhpcy50cmFuc2Zvcm1EYXRhKGUuZGF0YSxpLmlkLHQpfWNyb3NzRmlsdGVyaW5nUmVzZXQoKXt9fWNsYXNzIHNpIGV4dGVuZHMgWHR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9dXBkYXRlKGUpe2NvbnN0e2RhdGE6dH09ZSxbaV09ZS5jYXRlZ29yaWVzLHM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuZ2V0Q29tbW9uQ2hhcnRPcHRpb25zKGUudXBkYXRlZE92ZXJyaWRlcykpLHtkYXRhOnRoaXMuY3Jvc3NGaWx0ZXJpbmc/dGhpcy5nZXRDcm9zc0ZpbHRlckRhdGEoZSk6dGhpcy50cmFuc2Zvcm1EYXRhKHQsaS5pZCksc2VyaWVzOnRoaXMuZ2V0U2VyaWVzKGUpfSk7by5iLnVwZGF0ZSh0aGlzLmdldENoYXJ0UmVmKCkscyl9Z2V0U2VyaWVzKGUpe2NvbnN0W3RdPWUuY2F0ZWdvcmllcyxpPWUuZmllbGRzLmxlbmd0aCxzPXtjdXJyZW50T2Zmc2V0OjAsb2Zmc2V0QW1vdW50Omk+MT8yMDo0MH0scj10aGlzLmdldEZpZWxkcyhlKS5tYXAoZT0+e3ZhciByO2NvbnN0IG89e3R5cGU6dGhpcy5zdGFuZGFsb25lQ2hhcnRUeXBlLGFuZ2xlS2V5OmUuY29sSWQsYW5nbGVOYW1lOmUuZGlzcGxheU5hbWUsc2VjdG9yTGFiZWxLZXk6ZS5jb2xJZCxjYWxsb3V0TGFiZWxOYW1lOnQubmFtZSxjYWxsb3V0TGFiZWxLZXk6dC5pZH07aWYoImRvbnV0Ij09PXRoaXMuY2hhcnRUeXBlfHwiZG91Z2hudXQiPT09dGhpcy5jaGFydFR5cGUpe2NvbnN0e291dGVyUmFkaXVzT2Zmc2V0OnQsaW5uZXJSYWRpdXNPZmZzZXQ6bn09c2kuY2FsY3VsYXRlT2Zmc2V0cyhzKSxhPWUuZGlzcGxheU5hbWU/e3RpdGxlOnt0ZXh0OmUuZGlzcGxheU5hbWUsc2hvd0luTGVnZW5kOmk+MX19OnZvaWQgMDtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxvKSx7dHlwZToiZG9udXQiLG91dGVyUmFkaXVzT2Zmc2V0OnQsaW5uZXJSYWRpdXNPZmZzZXQ6bn0pLGEpLHtjYWxsb3V0TGluZTp7Y29sb3JzOm51bGw9PT0ocj10aGlzLmdldENoYXJ0UGFsZXR0ZSgpKXx8dm9pZCAwPT09cj92b2lkIDA6ci5zdHJva2VzfX0pfXJldHVybiBvfSk7cmV0dXJuIHRoaXMuY3Jvc3NGaWx0ZXJpbmc/dGhpcy5leHRyYWN0Q3Jvc3NGaWx0ZXJTZXJpZXMocik6cn1nZXRDcm9zc0ZpbHRlckRhdGEoZSl7Y29uc3QgdD1lLmZpZWxkc1swXS5jb2xJZCxpPXQrIi1maWx0ZXJlZC1vdXQiO3JldHVybiBlLmRhdGEubWFwKGU9Pntjb25zdCBzPWVbdF0rZVtpXTtyZXR1cm4gZVt0KyItdG90YWwiXT1zLGVbaV09MSxlW3RdPWVbdF0vcyxlfSl9ZXh0cmFjdENyb3NzRmlsdGVyU2VyaWVzKGUpe2NvbnN0IHQ9dGhpcy5nZXRDaGFydFBhbGV0dGUoKSxpPWVbMF0scz1pLmFuZ2xlS2V5LHI9KGU9Pk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7bGVnZW5kSXRlbUtleTplLmNhbGxvdXRMYWJlbEtleSxjYWxsb3V0TGFiZWw6e2VuYWJsZWQ6ITF9LGhpZ2hsaWdodFN0eWxlOntpdGVtOntmaWxsOnZvaWQgMH19LHJhZGl1c0tleTplLmFuZ2xlS2V5LGFuZ2xlS2V5OmUuYW5nbGVLZXkrIi10b3RhbCIscmFkaXVzTWluOjAscmFkaXVzTWF4OjEsbGlzdGVuZXJzOntub2RlQ2xpY2s6dGhpcy5jcm9zc0ZpbHRlckNhbGxiYWNrfX0pKShpKTtyZXR1cm5bKChlLGkpPT57dmFyIHMsbztyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LEUoe30scikpLHtyYWRpdXNLZXk6aSsiLWZpbHRlcmVkLW91dCIsZmlsbHM6UXQobnVsbCE9PShzPWUuZmlsbHMpJiZ2b2lkIDAhPT1zP3M6dC5maWxscywuMyksc3Ryb2tlczpRdChudWxsIT09KG89ZS5zdHJva2VzKSYmdm9pZCAwIT09bz9vOnQuc3Ryb2tlcywuMyksc2hvd0luTGVnZW5kOiExfSl9KShpLHMpLHJdfXN0YXRpYyBjYWxjdWxhdGVPZmZzZXRzKGUpe2NvbnN0IHQ9ZS5jdXJyZW50T2Zmc2V0O2UuY3VycmVudE9mZnNldC09ZS5vZmZzZXRBbW91bnQ7Y29uc3QgaT1lLmN1cnJlbnRPZmZzZXQ7cmV0dXJuIGUuY3VycmVudE9mZnNldC09ZS5vZmZzZXRBbW91bnQse291dGVyUmFkaXVzT2Zmc2V0OnQsaW5uZXJSYWRpdXNPZmZzZXQ6aX19Z2V0RmllbGRzKGUpe3JldHVybiJwaWUiPT09dGhpcy5jaGFydFR5cGU/ZS5maWVsZHMuc2xpY2UoMCwxKTplLmZpZWxkc31jcm9zc0ZpbHRlcmluZ1Jlc2V0KCl7fX1jbGFzcyByaSBleHRlbmRzIHF0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfWdldEF4ZXMoZSl7cmV0dXJuW3t0eXBlOiJudW1iZXIiLHBvc2l0aW9uOiJib3R0b20ifSx7dHlwZToibnVtYmVyIixwb3NpdGlvbjoibGVmdCJ9XX1nZXRTZXJpZXMoZSl7Y29uc3RbdF09ZS5jYXRlZ29yaWVzLGk9dGhpcy5pc1BhaXJlZCgpLHM9dGhpcy5nZXRTZXJpZXNEZWZpbml0aW9ucyhlLmZpZWxkcyxpKSxyPXQuaWQ9PT1ZdC5ERUZBVUxUX0NBVEVHT1JZP3ZvaWQgMDp0LG89cy5tYXAoZT0+e3ZhciB0LGkscyxvLG47aWYobnVsbD09ZT92b2lkIDA6ZS5zaXplRmllbGQpe3JldHVybnt0eXBlOiJidWJibGUiLHhLZXk6ZS54RmllbGQuY29sSWQseE5hbWU6bnVsbCE9PSh0PWUueEZpZWxkLmRpc3BsYXlOYW1lKSYmdm9pZCAwIT09dD90OnZvaWQgMCx5S2V5OmUueUZpZWxkLmNvbElkLHlOYW1lOm51bGwhPT0oaT1lLnlGaWVsZC5kaXNwbGF5TmFtZSkmJnZvaWQgMCE9PWk/aTp2b2lkIDAsdGl0bGU6YCR7ZS55RmllbGQuZGlzcGxheU5hbWV9IHZzICR7ZS54RmllbGQuZGlzcGxheU5hbWV9YCxzaXplS2V5OmUuc2l6ZUZpZWxkLmNvbElkLHNpemVOYW1lOm51bGwhPT0ocz1lLnNpemVGaWVsZC5kaXNwbGF5TmFtZSkmJnZvaWQgMCE9PXM/czoiIixsYWJlbEtleTpyP3IuaWQ6ZS55RmllbGQuY29sSWQsbGFiZWxOYW1lOnI/ci5uYW1lOnZvaWQgMH19cmV0dXJue3R5cGU6InNjYXR0ZXIiLHhLZXk6ZS54RmllbGQuY29sSWQseE5hbWU6bnVsbCE9PShvPWUueEZpZWxkLmRpc3BsYXlOYW1lKSYmdm9pZCAwIT09bz9vOnZvaWQgMCx5S2V5OmUueUZpZWxkLmNvbElkLHlOYW1lOm51bGwhPT0obj1lLnlGaWVsZC5kaXNwbGF5TmFtZSkmJnZvaWQgMCE9PW4/bjp2b2lkIDAsdGl0bGU6YCR7ZS55RmllbGQuZGlzcGxheU5hbWV9IHZzICR7ZS54RmllbGQuZGlzcGxheU5hbWV9YCxsYWJlbEtleTpyP3IuaWQ6ZS55RmllbGQuY29sSWQsbGFiZWxOYW1lOnI/ci5uYW1lOnZvaWQgMH19KTtyZXR1cm4gdGhpcy5jcm9zc0ZpbHRlcmluZz90aGlzLmV4dHJhY3RDcm9zc0ZpbHRlclNlcmllcyhvLGUpOm99ZXh0cmFjdENyb3NzRmlsdGVyU2VyaWVzKGUsdCl7Y29uc3R7ZGF0YTppfT10LHM9dGhpcy5nZXRDaGFydFBhbGV0dGUoKSxyPWU9PmUrIi1maWx0ZXJlZC1vdXQiLG89ZS5tYXAoKGUsdCk9Pntjb25zdCBvPW51bGw9PXM/dm9pZCAwOnMuZmlsbHNbdF0sbj1udWxsPT1zP3ZvaWQgMDpzLnN0cm9rZXNbdF07bGV0IGE9dm9pZCAwO2lmKCJidWJibGUiPT09ZS50eXBlKXtjb25zdHtzaXplS2V5OnR9PWU7YT0oKGUsdCk9Pnt2YXIgaTtjb25zdCBzPVsxLzAsLTEvMF07aWYobnVsbCE9dClmb3IoY29uc3QgbyBvZiBlKXtjb25zdCBlPW51bGwhPT0oaT1vW3RdKSYmdm9pZCAwIT09aT9pOm9bcih0KV07ZTxzWzBdJiYoc1swXT1lKSxlPnNbMV0mJihzWzFdPWUpfWlmKHNbMF08PXNbMV0pcmV0dXJuIHN9KShpLHQpfWNvbnN0IGw9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUubWFya2VyKSx7ZmlsbDpvLHN0cm9rZTpuLGRvbWFpbjphfSk7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7bWFya2VyOmwsaGlnaGxpZ2h0U3R5bGU6e2l0ZW06e2ZpbGw6InllbGxvdyJ9fSxsaXN0ZW5lcnM6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUubGlzdGVuZXJzKSx7bm9kZUNsaWNrOnRoaXMuY3Jvc3NGaWx0ZXJDYWxsYmFja30pfSl9KTtyZXR1cm5bLi4ubywuLi5vLm1hcChlPT57bGV0e3lLZXk6dCx4S2V5Oml9PWUscz17fTtyZXR1cm4iYnViYmxlIj09PWUudHlwZSYmKHM9e3NpemVLZXk6cihlLnNpemVLZXkpfSksT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkscykse3lLZXk6cih0KSx4S2V5OnIoaSksbWFya2VyOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlLm1hcmtlcikse2ZpbGxPcGFjaXR5Oi4zLHN0cm9rZU9wYWNpdHk6LjN9KSxzaG93SW5MZWdlbmQ6ITEsbGlzdGVuZXJzOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlLmxpc3RlbmVycykse25vZGVDbGljazplPT57Y29uc3QgdD1lLmRhdHVtW3IoaSldLHM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHt4S2V5OmksZGF0dW06T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUuZGF0dW0pLHtbaV06dH0pfSk7dGhpcy5jcm9zc0ZpbHRlckNhbGxiYWNrKHMpfX0pfSl9KV19Z2V0U2VyaWVzRGVmaW5pdGlvbnMoZSx0KXtpZihlLmxlbmd0aDwyKXJldHVybltdO2NvbnN0IGk9ImJ1YmJsZSI9PT10aGlzLmNoYXJ0VHlwZTtpZih0KXJldHVybiBpP2UubWFwKCh0LGkpPT5pJTM9PTA/e3hGaWVsZDp0LHlGaWVsZDplW2krMV0sc2l6ZUZpZWxkOmVbaSsyXX06bnVsbCkuZmlsdGVyKGU9PmUmJmUueUZpZWxkJiZlLnNpemVGaWVsZCk6ZS5tYXAoKHQsaSk9PmklMj09MD97eEZpZWxkOnQseUZpZWxkOmVbaSsxXX06bnVsbCkuZmlsdGVyKGU9PmUmJmUueUZpZWxkKTtjb25zdCBzPWVbMF07cmV0dXJuIGk/ZS5tYXAoKHQsaSk9PmklMj09MT97eEZpZWxkOnMseUZpZWxkOnQsc2l6ZUZpZWxkOmVbaSsxXX06bnVsbCkuZmlsdGVyKGU9PmUmJmUuc2l6ZUZpZWxkKTplLmZpbHRlcigoZSx0KT0+dD4wKS5tYXAoZT0+KHt4RmllbGQ6cyx5RmllbGQ6ZX0pKX19Y2xhc3Mgb2kgZXh0ZW5kcyBxdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKX1nZXRBeGVzKGUpe3JldHVyblt7dHlwZTp0aGlzLmdldFhBeGlzVHlwZShlKSxwb3NpdGlvbjpkKHRoaXMuY2hhcnRUeXBlKT8ibGVmdCI6ImJvdHRvbSJ9LHt0eXBlOiJudW1iZXIiLHBvc2l0aW9uOmQodGhpcy5jaGFydFR5cGUpPyJib3R0b20iOiJsZWZ0In1dfWNvbXB1dGVTZXJpZXNTdGF0aXN0aWNzKGUsdCl7Y29uc3R7ZGF0YTppLGZpZWxkczpzfT1lLFtyXT1lLmNhdGVnb3JpZXMsbz1yLmlkfHxZdC5ERUZBVUxUX0NBVEVHT1JZLG49dGhpcy5ncm91cERhdGFCeUNhdGVnb3J5KG8saSk7cmV0dXJuIEFycmF5LmZyb20obikubWFwKChbZSxpXSk9Pntjb25zdCBvPXtbci5pZF06ZX07cmV0dXJuIHMuZm9yRWFjaCgoZSxzKT0+e2NvbnN0IHI9aS5tYXAodD0+dFtlLmNvbElkXSkuZmlsdGVyKGU9PiJudW1iZXIiPT10eXBlb2YgZSYmIWlzTmFOKGUpKTtPYmplY3QuZW50cmllcyh0KHIpKS5mb3JFYWNoKChbZSx0XSk9PntvW2Ake2V9OiR7c31gXT1yLmxlbmd0aD4wP3Q6bnVsbH0pfSksb30pfWdyb3VwRGF0YUJ5Q2F0ZWdvcnkoZSx0KXtyZXR1cm4gdC5yZWR1Y2UoKHQsaSk9PntsZXQgcz0odD0+e2lmKGU9PT1ZdC5ERUZBVUxUX0NBVEVHT1JZKXJldHVybiAxO2NvbnN0IGk9dFtlXTtyZXR1cm4gbnVsbD09aT8iIjppIGluc3RhbmNlb2YgRGF0ZT9pLmdldFRpbWUoKTppfSkoaSk7Y29uc3Qgcj10LmdldChzKTtyZXR1cm4gcj9yLnB1c2goaSk6dC5zZXQocyxbaV0pLHR9LG5ldyBNYXApfX1jbGFzcyBuaSBleHRlbmRzIG9pe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfWdldFNlcmllcyhlKXtjb25zdFt0XT1lLmNhdGVnb3JpZXM7cmV0dXJuIGUuZmllbGRzLm1hcCgoZSxpKT0+e3ZhciBzO3JldHVybnt0eXBlOnRoaXMuc3RhbmRhbG9uZUNoYXJ0VHlwZSx4S2V5OnQuaWQseE5hbWU6dC5uYW1lLHlOYW1lOm51bGwhPT0ocz1lLmRpc3BsYXlOYW1lKSYmdm9pZCAwIT09cz9zOnZvaWQgMCx5TG93TmFtZToiTWluIix5SGlnaE5hbWU6Ik1heCIseUxvd0tleToibWluOiIraSx5SGlnaEtleToibWF4OiIraX19KX1nZXREYXRhKGUpe3JldHVybiB0aGlzLmNvbXB1dGVTZXJpZXNTdGF0aXN0aWNzKGUsZT0+KHttaW46TWF0aC5taW4oLi4uZSksbWF4Ok1hdGgubWF4KC4uLmUpfSkpfX1jbGFzcyBhaSBleHRlbmRzIHF0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfWdldFNlcmllcyhlKXtjb25zdCB0PWUuZmllbGRzWzBdO3JldHVyblt7dHlwZTp0aGlzLnN0YW5kYWxvbmVDaGFydFR5cGUseEtleTp0LmNvbElkLHhOYW1lOnQuZGlzcGxheU5hbWUseU5hbWU6dGhpcy5jaGFydFByb3h5UGFyYW1zLnRyYW5zbGF0ZSgiaGlzdG9ncmFtRnJlcXVlbmN5IiksYXJlYVBsb3Q6ITF9XX1nZXRBeGVzKGUpe3JldHVyblt7dHlwZToibnVtYmVyIixwb3NpdGlvbjoiYm90dG9tIn0se3R5cGU6Im51bWJlciIscG9zaXRpb246ImxlZnQifV19fWNsYXNzIGxpIGV4dGVuZHMgb2l7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9Z2V0U2VyaWVzKGUpe2NvbnN0W3RdPWUuY2F0ZWdvcmllcztyZXR1cm4gZS5maWVsZHMubWFwKChlLGkpPT57dmFyIHM7cmV0dXJue3R5cGU6dGhpcy5zdGFuZGFsb25lQ2hhcnRUeXBlLGRpcmVjdGlvbjpkKHRoaXMuY2hhcnRUeXBlKT8iaG9yaXpvbnRhbCI6InZlcnRpY2FsIix4S2V5OnQuaWQseE5hbWU6dC5uYW1lLHlOYW1lOm51bGwhPT0ocz1lLmRpc3BsYXlOYW1lKSYmdm9pZCAwIT09cz9zOnZvaWQgMCxtaW5OYW1lOiJNaW4iLHExTmFtZToiUTEiLG1lZGlhbk5hbWU6Ik1lZGlhbiIscTNOYW1lOiJRMyIsbWF4TmFtZToiTWF4IixtaW5LZXk6Im1pbjoiK2kscTFLZXk6InExOiIraSxtZWRpYW5LZXk6Im1lZGlhbjoiK2kscTNLZXk6InEzOiIraSxtYXhLZXk6Im1heDoiK2l9fSl9Z2V0RGF0YShlKXtyZXR1cm4gdGhpcy5jb21wdXRlU2VyaWVzU3RhdGlzdGljcyhlLGU9Pntjb25zdCB0PWUuc29ydCgoZSx0KT0+ZS10KTtyZXR1cm57bWluOnRbMF0scTE6dGhpcy5xdWFudGlsZSh0LC4yNSksbWVkaWFuOnRoaXMucXVhbnRpbGUodCwuNSkscTM6dGhpcy5xdWFudGlsZSh0LC43NSksbWF4OnRbdC5sZW5ndGgtMV19fSl9cXVhbnRpbGUoZSx0KXtjb25zdCBpPShlLmxlbmd0aC0xKSp0LHM9TWF0aC5mbG9vcihpKSxyPWktcztyZXR1cm4gdm9pZCAwIT09ZVtzKzFdP2Vbc10rciooZVtzKzFdLWVbc10pOmVbc119fWZ1bmN0aW9uIGRpKGUsdCl7cmV0dXJuIGNpKGhpKGUsKGZ1bmN0aW9uKGUpe3JldHVybiB0Lmxlbmd0aH0pLChmdW5jdGlvbihlLGkpe2NvbnN0IHM9dFtpXTtyZXR1cm4gcj1lW3NdLG51bGw9PXI/bnVsbDpTdHJpbmcocik7dmFyIHJ9KSkpfWZ1bmN0aW9uIGNpKGUpe2NvbnN0e2RlcHRoOnQsbGVhdmVzOmksY2hpbGRyZW46c309ZTtpZigwPT09dClyZXR1cm4gaS5tYXAoZT0+T2JqZWN0LmFzc2lnbih7IkFHLUdSSUQtREVGQVVMVC1MQUJFTC1LRVkiOm51bGx9LGUpKTtjb25zdCByPW5ldyBBcnJheTtmb3IoY29uc3RbZSx0XW9mIHMuZW50cmllcygpKTA9PT10LmRlcHRoP3IucHVzaCguLi50LmxlYXZlcy5tYXAodD0+T2JqZWN0LmFzc2lnbih7IkFHLUdSSUQtREVGQVVMVC1MQUJFTC1LRVkiOmV9LHQpKSk6ci5wdXNoKHsiQUctR1JJRC1ERUZBVUxULUxBQkVMLUtFWSI6ZSxjaGlsZHJlbjpjaSh0KX0pO3JldHVybiByfWZ1bmN0aW9uIGhpKGUsdCxpKXtjb25zdCBzPXtkZXB0aDowLGxlYXZlczpbXSxjaGlsZHJlbjpuZXcgTWFwfTtyZXR1cm4gZS5yZWR1Y2UoKGUscyk9PmZ1bmN0aW9uIGUodCxpLHMscixvKXtpZihyPT09aSlyZXR1cm4gby5sZWF2ZXMucHVzaCh0KSxvO3tjb25zdCBuPXModCxyKSxhPW8uY2hpbGRyZW4uZ2V0KG4pLGw9ZSh0LGkscyxyKzEsYXx8e2RlcHRoOjAsbGVhdmVzOltdLGNoaWxkcmVuOm5ldyBNYXB9KTtyZXR1cm4gby5jaGlsZHJlbi5zZXQobixsKSxvLmRlcHRoPU1hdGgubWF4KDErbC5kZXB0aCxvLmRlcHRoKSxvfX0ocyx0KHMpLGksMCxlKSxzKX1jbGFzcyB1aSBleHRlbmRzIFh0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuY2hhcnRQcm94eVBhcmFtcz1lfXVwZGF0ZShlKXtjb25zdCB0PU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLmdldENvbW1vbkNoYXJ0T3B0aW9ucyhlLnVwZGF0ZWRPdmVycmlkZXMpKSx7c2VyaWVzOnRoaXMuZ2V0U2VyaWVzKGUsIkFHLUdSSUQtREVGQVVMVC1MQUJFTC1LRVkiKSxkYXRhOnRoaXMuZ2V0RGF0YShlKX0pO28uYi51cGRhdGUodGhpcy5nZXRDaGFydFJlZigpLHQpfWdldERhdGEoZSl7Y29uc3R7Y2F0ZWdvcmllczp0LGRhdGE6aSxncm91cGluZzpzfT1lO2lmKHMpcmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGNpKGhpKGUsKGZ1bmN0aW9uKGUpe3ZhciBpLHM7cmV0dXJuIG51bGwhPT0ocz1udWxsPT09KGk9dChlKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkubGVuZ3RoKSYmdm9pZCAwIT09cz9zOjB9KSwoZnVuY3Rpb24oZSxpKXtjb25zdCBzPXQoZSk7aWYoIXMpcmV0dXJuIG51bGw7Y29uc3Qgcj1zLmxlbmd0aC0xLWk7cmV0dXJuIHNbcl19KSkpfShpLHBpKTtyZXR1cm4gZGkoaSx0Lm1hcCgoe2lkOmV9KT0+ZSkpfX1mdW5jdGlvbiBwaShlKXt2YXIgdCxpO3JldHVybiBudWxsIT09KGk9bnVsbD09PSh0PWVbcy5HUk9VUF9BVVRPX0NPTFVNTl9JRF0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmxhYmVscykmJnZvaWQgMCE9PWk/aTpudWxsfWNsYXNzIGdpIGV4dGVuZHMgdWl7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9Z2V0U2VyaWVzKGUsdCl7dmFyIGkscztjb25zdHtmaWVsZHM6cn09ZSxbbyxuXT1yO3JldHVyblt7dHlwZTp0aGlzLnN0YW5kYWxvbmVDaGFydFR5cGUsbGFiZWxLZXk6dCxzaXplS2V5Om51bGw9PW8/dm9pZCAwOm8uY29sSWQsc2l6ZU5hbWU6bnVsbCE9PShpPW51bGw9PW8/dm9pZCAwOm8uZGlzcGxheU5hbWUpJiZ2b2lkIDAhPT1pP2k6dm9pZCAwLGNvbG9yS2V5Om51bGw9PW4/dm9pZCAwOm4uY29sSWQsY29sb3JOYW1lOm51bGwhPT0ocz1udWxsPT1uP3ZvaWQgMDpuLmRpc3BsYXlOYW1lKSYmdm9pZCAwIT09cz9zOnZvaWQgMH1dfWdldENoYXJ0VGhlbWVEZWZhdWx0cygpe3JldHVybnt0cmVlbWFwOntncmFkaWVudExlZ2VuZDp7Z3JhZGllbnQ6e3ByZWZlcnJlZExlbmd0aDoyMDB9fX19fXRyYW5zZm9ybURhdGEoZSx0LGkpe3JldHVybiBlfWNyb3NzRmlsdGVyaW5nUmVzZXQoKXt9fWNsYXNzIG1pIGV4dGVuZHMgdWl7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9Z2V0U2VyaWVzKGUsdCl7dmFyIGkscztjb25zdHtmaWVsZHM6cn09ZSxbbyxuXT1yO3JldHVyblt7dHlwZTp0aGlzLnN0YW5kYWxvbmVDaGFydFR5cGUsbGFiZWxLZXk6dCxzaXplS2V5Om51bGw9PW8/dm9pZCAwOm8uY29sSWQsc2l6ZU5hbWU6bnVsbCE9PShpPW51bGw9PW8/dm9pZCAwOm8uZGlzcGxheU5hbWUpJiZ2b2lkIDAhPT1pP2k6dm9pZCAwLGNvbG9yS2V5Om51bGw9PW4/dm9pZCAwOm4uY29sSWQsY29sb3JOYW1lOm51bGwhPT0ocz1udWxsPT1uP3ZvaWQgMDpuLmRpc3BsYXlOYW1lKSYmdm9pZCAwIT09cz9zOnZvaWQgMH1dfWdldENoYXJ0VGhlbWVEZWZhdWx0cygpe3JldHVybntzdW5idXJzdDp7Z3JhZGllbnRMZWdlbmQ6e2dyYWRpZW50OntwcmVmZXJyZWRMZW5ndGg6MjAwfX19fX10cmFuc2Zvcm1EYXRhKGUsdCxpKXtyZXR1cm4gZX1jcm9zc0ZpbHRlcmluZ1Jlc2V0KCl7fX1mdW5jdGlvbiBmaShlLHQpe3JldHVybiBlLnJlZHVjZSgoZSxpLHMscik9PmUuY29uY2F0KHQoaSxzLHIpKSxuZXcgQXJyYXkpfWNsYXNzIHZpIGV4dGVuZHMgWHR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSl9dXBkYXRlKGUpe2NvbnN0IHQ9IkFHLUdSSUQtREVGQVVMVC1IRUFUTUFQLVNFUklFUy1LRVkiLGk9IkFHLUdSSUQtREVGQVVMVC1IRUFUTUFQLVZBTFVFLUtFWSIscz0iQUctR1JJRC1ERUZBVUxULUhFQVRNQVAtQ0FURUdPUlktS0VZIixyPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLmdldENvbW1vbkNoYXJ0T3B0aW9ucyhlLnVwZGF0ZWRPdmVycmlkZXMpKSx7c2VyaWVzOnRoaXMuZ2V0U2VyaWVzKGUsdCxpLHMpLGRhdGE6dGhpcy5nZXREYXRhKGUsdCxpLHMpfSk7by5iLnVwZGF0ZSh0aGlzLmdldENoYXJ0UmVmKCkscil9Z2V0U2VyaWVzKGUsdCxpLHMpe2NvbnN0W3JdPWUuY2F0ZWdvcmllcztyZXR1cm5be3R5cGU6dGhpcy5zdGFuZGFsb25lQ2hhcnRUeXBlLHlLZXk6cyx4S2V5OnQsY29sb3JLZXk6aSx5TmFtZTpyLm5hbWUseE5hbWU6dm9pZCAwLGNvbG9yTmFtZTp2b2lkIDB9XX1nZXREYXRhKGUsdCxpLHMpe2NvbnN0W3JdPWUuY2F0ZWdvcmllcztyZXR1cm4gZmkoZS5kYXRhLChvLG4pPT57Y29uc3QgYT1vW3IuaWRdLGw9bnVsbD09YT8iIjpTdHJpbmcoYSksZD17aWQ6bix2YWx1ZTphLHRvU3RyaW5nOigpPT5sfTtyZXR1cm4gZS5maWVsZHMubWFwKCh7Y29sSWQ6ZSxkaXNwbGF5TmFtZTpyfSk9Pk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxvKSx7W3RdOnIsW2ldOm9bZV0sW3NdOmR9KSl9KX1nZXRDaGFydFRoZW1lRGVmYXVsdHMoKXtyZXR1cm57aGVhdG1hcDp7Z3JhZGllbnRMZWdlbmQ6e2dyYWRpZW50OntwcmVmZXJyZWRMZW5ndGg6MjAwfX0sc2VyaWVzOnt0b29sdGlwOntyZW5kZXJlcjpDaX19fX19dHJhbnNmb3JtRGF0YShlLHQsaSl7cmV0dXJuIGV9Y3Jvc3NGaWx0ZXJpbmdSZXNldCgpe319ZnVuY3Rpb24gQ2koZSl7Y29uc3R7eEtleTp0LHlLZXk6aSxjb2xvcktleTpzLHlOYW1lOnIsc2VyaWVzSWQ6byxkYXR1bTpufT1lLGE9bltvXTtyZXR1cm57dGl0bGU6IiIsY29udGVudDpbe2xhYmVsOnIsdmFsdWU6YVtpXX0se2xhYmVsOmFbdF0sdmFsdWU6cyYmYVtzXX1dLm1hcCgoe2xhYmVsOmUsdmFsdWU6dH0pPT5gPGI+JHt5aShTdHJpbmcoZSkpfTo8L2I+ICR7eWkoU3RyaW5nKHQpKX1gKS5qb2luKCI8YnI+Iil9fWZ1bmN0aW9uIHlpKGUpe2NvbnN0IHQ9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7In0saT1gWyR7T2JqZWN0LmtleXModCkuam9pbigiIil9XWAscz1uZXcgUmVnRXhwKGksImciKTtyZXR1cm4gZS5yZXBsYWNlKHMsZT0+dFtlXSl9Y2xhc3MgU2kgZXh0ZW5kcyBxdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKX1nZXRBeGVzKGUpe3JldHVyblt7dHlwZTp0aGlzLmdldFhBeGlzVHlwZShlKSxwb3NpdGlvbjpkKHRoaXMuY2hhcnRUeXBlKT8ibGVmdCI6ImJvdHRvbSJ9LHt0eXBlOiJudW1iZXIiLHBvc2l0aW9uOmQodGhpcy5jaGFydFR5cGUpPyJib3R0b20iOiJsZWZ0In1dfWdldFNlcmllcyhlKXt2YXIgdDtjb25zdFtpXT1lLmNhdGVnb3JpZXMsW3NdPWUuZmllbGRzO3JldHVyblt7dHlwZTp0aGlzLnN0YW5kYWxvbmVDaGFydFR5cGUsZGlyZWN0aW9uOmQodGhpcy5jaGFydFR5cGUpPyJob3Jpem9udGFsIjoidmVydGljYWwiLHhLZXk6aS5pZCx4TmFtZTppLm5hbWUseUtleTpzLmNvbElkLHlOYW1lOm51bGwhPT0odD1zLmRpc3BsYXlOYW1lKSYmdm9pZCAwIT09dD90OnZvaWQgMH1dfX1jbGFzcyB3aSBleHRlbmRzIHMuQmVhblN0dWJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmNoYXJ0Q29udHJvbGxlcj1lfWdldENoYXJ0T3B0aW9uKGUpe3JldHVybiBSKHRoaXMuZ2V0Q2hhcnQoKSxlLHZvaWQgMCl9c2V0Q2hhcnRPcHRpb24oZSx0LGkpe2NvbnN0IHM9dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnRTZXJpZXNUeXBlcygpO3RoaXMuY2hhcnRDb250cm9sbGVyLmlzQ29tYm9DaGFydCgpJiZzLnB1c2goImNvbW1vbiIpO2xldCByPXt9O3MuZm9yRWFjaChpPT57cj1FKHIsdGhpcy5jcmVhdGVDaGFydE9wdGlvbnMoe3Nlcmllc1R5cGU6aSxleHByZXNzaW9uOmUsdmFsdWU6dH0pKX0pLGl8fCh0aGlzLnVwZGF0ZUNoYXJ0KHIpLHRoaXMucmFpc2VDaGFydE9wdGlvbnNDaGFuZ2VkRXZlbnQoKSl9YXdhaXRDaGFydE9wdGlvblVwZGF0ZShlKXt0aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydFByb3h5KCkuZ2V0Q2hhcnQoKS53YWl0Rm9yVXBkYXRlKCkudGhlbigoKT0+ZSgpKS5jYXRjaChlPT5jb25zb2xlLmVycm9yKCJBRyBHcmlkIC0gY2hhcnQgdXBkYXRlIGZhaWxlZCIsZSkpfWdldEF4aXNQcm9wZXJ0eShlKXt2YXIgdDtyZXR1cm4gUihudWxsPT09KHQ9dGhpcy5nZXRDaGFydCgpLmF4ZXMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0WzBdLGUsdm9pZCAwKX1zZXRBeGlzUHJvcGVydHkoZSx0KXt0aGlzLnNldEF4aXNQcm9wZXJ0aWVzKFt7ZXhwcmVzc2lvbjplLHZhbHVlOnR9XSl9c2V0QXhpc1Byb3BlcnRpZXMoZSl7Y29uc3QgdD10aGlzLmdldENoYXJ0KCksaT1maShlLCh7ZXhwcmVzc2lvbjplLHZhbHVlOml9KT0+e3ZhciBzO2NvbnN0IHI9bnVsbD09PShzPXQuYXhlcyl8fHZvaWQgMD09PXM/dm9pZCAwOnMuZmlsdGVyKHQ9Pntjb25zdCBpPWUuc3BsaXQoIi4iKTtsZXQgcz10O2Zvcihjb25zdCBlIG9mIGkpe2lmKCEoZSBpbiBzKSlyZXR1cm4hMTtzPXNbZV19cmV0dXJuITB9KTtyZXR1cm4gcj9yLm1hcCh0PT50aGlzLmdldFVwZGF0ZUF4aXNPcHRpb25zKHQsZSxpKSk6W119KS5yZWR1Y2UoKGUsdCk9PkUoZSx0KSx7fSk7T2JqZWN0LmtleXMoaSkubGVuZ3RoPjAmJih0aGlzLnVwZGF0ZUNoYXJ0KGkpLHRoaXMucmFpc2VDaGFydE9wdGlvbnNDaGFuZ2VkRXZlbnQoKSl9Z2V0TGFiZWxSb3RhdGlvbihlKXtyZXR1cm4gUih0aGlzLmdldEF4aXMoZSksImxhYmVsLnJvdGF0aW9uIix2b2lkIDApfXNldExhYmVsUm90YXRpb24oZSx0KXtjb25zdCBpPXRoaXMuZ2V0QXhpcyhlKTtpZihpKXtjb25zdCBlPXRoaXMuZ2V0VXBkYXRlQXhpc09wdGlvbnMoaSwibGFiZWwucm90YXRpb24iLHQpO3RoaXMudXBkYXRlQ2hhcnQoZSksdGhpcy5yYWlzZUNoYXJ0T3B0aW9uc0NoYW5nZWRFdmVudCgpfX1nZXRTZXJpZXNPcHRpb24oZSx0LGkpe2NvbnN0IHM9dGhpcy5nZXRDaGFydCgpLnNlcmllcy5maW5kKGU9PndpLmlzTWF0Y2hpbmdTZXJpZXModCxlKSk7cmV0dXJuIFIoaT9zOm51bGw9PXM/dm9pZCAwOnMucHJvcGVydGllcy50b0pzb24oKSxlLHZvaWQgMCl9c2V0U2VyaWVzT3B0aW9uKGUsdCxpKXtjb25zdCBzPXRoaXMuY3JlYXRlQ2hhcnRPcHRpb25zKHtzZXJpZXNUeXBlOmksZXhwcmVzc2lvbjoic2VyaWVzLiIrZSx2YWx1ZTp0fSk7dGhpcy51cGRhdGVDaGFydChzKSx0aGlzLnJhaXNlQ2hhcnRPcHRpb25zQ2hhbmdlZEV2ZW50KCl9Z2V0UGFpcmVkTW9kZSgpe3JldHVybiB0aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydFByb3h5KCkuaXNQYWlyZWQoKX1zZXRQYWlyZWRNb2RlKGUpe3RoaXMuY2hhcnRDb250cm9sbGVyLmdldENoYXJ0UHJveHkoKS5zZXRQYWlyZWQoZSl9Z2V0QXhpcyhlKXtjb25zdCB0PXRoaXMuZ2V0Q2hhcnQoKTtpZih0LmF4ZXMmJiEodC5heGVzLmxlbmd0aDwxKSlyZXR1cm4ieEF4aXMiPT09ZT90LmF4ZXMmJiJ4Ij09PXQuYXhlc1swXS5kaXJlY3Rpb24/dC5heGVzWzBdOnQuYXhlc1sxXTp0LmF4ZXMmJiJ5Ij09PXQuYXhlc1sxXS5kaXJlY3Rpb24/dC5heGVzWzFdOnQuYXhlc1swXX1nZXRVcGRhdGVBeGlzT3B0aW9ucyhlLHQsaSl7Y29uc3Qgcz10aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydFNlcmllc1R5cGVzKCk7dGhpcy5jaGFydENvbnRyb2xsZXIuaXNDb21ib0NoYXJ0KCkmJnMucHVzaCgiY29tbW9uIik7cmV0dXJuWyJudW1iZXIiLCJjYXRlZ29yeSIsInRpbWUiLCJncm91cGVkLWNhdGVnb3J5IiwiYW5nbGUtY2F0ZWdvcnkiLCJhbmdsZS1udW1iZXIiLCJyYWRpdXMtY2F0ZWdvcnkiLCJyYWRpdXMtbnVtYmVyIl0uaW5jbHVkZXMoZS50eXBlKT9zLm1hcChzPT50aGlzLmNyZWF0ZUNoYXJ0T3B0aW9ucyh7c2VyaWVzVHlwZTpzLGV4cHJlc3Npb246YGF4ZXMuJHtlLnR5cGV9LiR7dH1gLHZhbHVlOml9KSkucmVkdWNlKChlLHQpPT5FKGUsdCkpOnt9fWdldENoYXJ0VHlwZSgpe3JldHVybiB0aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydFR5cGUoKX1nZXRDaGFydCgpe3JldHVybiB0aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydFByb3h5KCkuZ2V0Q2hhcnQoKX11cGRhdGVDaGFydChlKXtjb25zdCB0PXRoaXMuY2hhcnRDb250cm9sbGVyLmdldENoYXJ0UHJveHkoKS5nZXRDaGFydFJlZigpO3Quc2tpcEFuaW1hdGlvbnMoKSxvLmIudXBkYXRlRGVsdGEodCxlKX1jcmVhdGVDaGFydE9wdGlvbnMoe3Nlcmllc1R5cGU6ZSxleHByZXNzaW9uOnQsdmFsdWU6aX0pe2NvbnN0IHM9e30scj17dGhlbWU6e292ZXJyaWRlczpzfX07cmV0dXJuIGZ1bmN0aW9uKGUsdCxpKXtpZihudWxsPT1lKXJldHVybjtjb25zdCBzPXQuc3BsaXQoIi4iKTtsZXQgcj1lO3MuZm9yRWFjaCgoZSx0KT0+e3JbZV18fChyW2VdPXt9KSx0PHMubGVuZ3RoLTEmJihyPXJbZV0pfSkscltzW3MubGVuZ3RoLTFdXT1pfShzLGAke2V9LiR7dH1gLGkpLHJ9cmFpc2VDaGFydE9wdGlvbnNDaGFuZ2VkRXZlbnQoKXtjb25zdCBlPXRoaXMuY2hhcnRDb250cm9sbGVyLmdldENoYXJ0TW9kZWwoKSx0PXt0eXBlOnMuRXZlbnRzLkVWRU5UX0NIQVJUX09QVElPTlNfQ0hBTkdFRCxjaGFydElkOmUuY2hhcnRJZCxjaGFydFR5cGU6ZS5jaGFydFR5cGUsY2hhcnRUaGVtZU5hbWU6dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnRUaGVtZU5hbWUoKSxjaGFydE9wdGlvbnM6ZS5jaGFydE9wdGlvbnN9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9c3RhdGljIGlzTWF0Y2hpbmdTZXJpZXMoZSx0KXtyZXR1cm4gbi5pbmNsdWRlcyhlKSYmdC50eXBlPT09ZX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpfX1jbGFzcyBiaSBleHRlbmRzIHF0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpfWdldEF4ZXMoZSl7Y29uc3QgdD1lP2UuZmllbGRzOltdLGk9bmV3IE1hcCh0Lm1hcChlPT5bZS5jb2xJZCxlXSkpLHtwcmltYXJ5WUtleXM6cyxzZWNvbmRhcnlZS2V5czpyfT10aGlzLmdldFlLZXlzKHQsZS5zZXJpZXNDaGFydFR5cGVzKSxvPVt7dHlwZTp0aGlzLmdldFhBeGlzVHlwZShlKSxwb3NpdGlvbjoiYm90dG9tIn1dO3JldHVybiBzLmxlbmd0aD4wJiZvLnB1c2goe3R5cGU6Im51bWJlciIsa2V5czpzLHBvc2l0aW9uOiJsZWZ0In0pLHIubGVuZ3RoPjAmJnIuZm9yRWFjaChlPT57Y29uc3QgdD1pLmdldChlKTtpZighKHQmJnQuY29sSWQ9PT1lKSlyZXR1cm47Y29uc3Qgcz17dHlwZToibnVtYmVyIixrZXlzOltlXSxwb3NpdGlvbjoicmlnaHQifTtvLnB1c2gocyl9KSxvfWdldFNlcmllcyhlKXtjb25zdHtmaWVsZHM6dCxzZXJpZXNDaGFydFR5cGVzOml9PWUsW3NdPWUuY2F0ZWdvcmllcztyZXR1cm4gdC5tYXAoZT0+e2NvbnN0IHQ9aS5maW5kKHQ9PnQuY29sSWQ9PT1lLmNvbElkKTtpZih0KXtjb25zdCBpPXQuY2hhcnRUeXBlLHI9WyJncm91cGVkQ29sdW1uIiwiZ3JvdXBlZEJhciJdLmluY2x1ZGVzKGkpP3tncm91cGVkOiEwfTp7fTtyZXR1cm4gT2JqZWN0LmFzc2lnbih7dHlwZTpnKGkpLHhLZXk6cy5pZCx5S2V5OmUuY29sSWQseU5hbWU6ZS5kaXNwbGF5TmFtZSxzdGFja2VkOlsic3RhY2tlZEFyZWEiLCJzdGFja2VkQ29sdW1uIl0uaW5jbHVkZXMoaSl9LHIpfX0pfWdldFlLZXlzKGUsdCl7Y29uc3QgaT1bXSxzPVtdO3JldHVybiBlLmZvckVhY2goZT0+e2NvbnN0IHI9ZS5jb2xJZCxvPXQuZmluZChlPT5lLmNvbElkPT09cik7byYmKG8uc2Vjb25kYXJ5QXhpcz9zLnB1c2gocik6aS5wdXNoKHIpKX0pLHtwcmltYXJ5WUtleXM6aSxzZWNvbmRhcnlZS2V5czpzfX19dmFyIEVpPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIFJpIGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoUmkuVEVNUExBVEUpLHRoaXMucGFyYW1zPWV9aW5pdCgpe2NvbnN0IGU9e2NoYXJ0SWQ6dGhpcy5wYXJhbXMuY2hhcnRJZCxwaXZvdENoYXJ0OnRoaXMucGFyYW1zLnBpdm90Q2hhcnQsY2hhcnRUeXBlOnAodGhpcy5wYXJhbXMuY2hhcnRUeXBlKSxjaGFydFRoZW1lTmFtZTp0aGlzLmdldFRoZW1lTmFtZSgpLGFnZ0Z1bmM6dGhpcy5wYXJhbXMuYWdnRnVuYyxjZWxsUmFuZ2U6dGhpcy5wYXJhbXMuY2VsbFJhbmdlLHN1cHByZXNzQ2hhcnRSYW5nZXM6dGhpcy5wYXJhbXMuc3VwcHJlc3NDaGFydFJhbmdlcyx1bmxpbmtDaGFydDp0aGlzLnBhcmFtcy51bmxpbmtDaGFydCxjcm9zc0ZpbHRlcmluZzp0aGlzLnBhcmFtcy5jcm9zc0ZpbHRlcmluZyxzZXJpZXNDaGFydFR5cGVzOnRoaXMucGFyYW1zLnNlcmllc0NoYXJ0VHlwZXN9LHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKTt0aGlzLmFkZENzc0NsYXNzKHQ/ImFnLXJ0bCI6ImFnLWx0ciIpO2NvbnN0IGk9dGhpcy5jcmVhdGVCZWFuKG5ldyBZdChlKSk7dGhpcy5jaGFydENvbnRyb2xsZXI9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgVihpKSksdGhpcy52YWxpZGF0ZUN1c3RvbVRoZW1lcygpLHRoaXMuY3JlYXRlQ2hhcnQoKSx0aGlzLnBhcmFtcy5pbnNpZGVEaWFsb2cmJnRoaXMuYWRkRGlhbG9nKCksdGhpcy5hZGRNZW51KCksdGhpcy5hZGRUaXRsZUVkaXRDb21wKCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5nZXRHdWkoKSwiZm9jdXNpbiIsdGhpcy5zZXRBY3RpdmVDaGFydENlbGxSYW5nZS5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmNoYXJ0Q29udHJvbGxlcixWLkVWRU5UX0NIQVJUX01PREVMX1VQREFURSx0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVycyhbImNoYXJ0VGhlbWVPdmVycmlkZXMiLCJjaGFydFRoZW1lcyJdLHRoaXMucmVhY3RpdmVQcm9wZXJ0eVVwZGF0ZS5iaW5kKHRoaXMpKSx0aGlzLmNoYXJ0TWVudSYmdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jaGFydE1lbnUsa3QuRVZFTlRfRE9XTkxPQURfQ0hBUlQsKCk9PnRoaXMuZG93bmxvYWRDaGFydCgpKSx0aGlzLnVwZGF0ZSgpLHRoaXMucmFpc2VDaGFydENyZWF0ZWRFdmVudCgpfWNyZWF0ZUNoYXJ0KCl7bGV0IGU9dm9pZCAwO3RoaXMuY2hhcnRQcm94eSYmKGU9dGhpcy5jaGFydFByb3h5LmRlc3Ryb3koe2tlZXBDaGFydEluc3RhbmNlOiEwfSkpO2NvbnN0IHQ9dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnRUeXBlKCksaT17Y2hhcnRUeXBlOnQsY2hhcnRJbnN0YW5jZTplLGdldENoYXJ0VGhlbWVOYW1lOnRoaXMuZ2V0Q2hhcnRUaGVtZU5hbWUuYmluZCh0aGlzKSxnZXRDaGFydFRoZW1lczp0aGlzLmdldENoYXJ0VGhlbWVzLmJpbmQodGhpcyksY3VzdG9tQ2hhcnRUaGVtZXM6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjdXN0b21DaGFydFRoZW1lcyIpLGdldEdyaWRPcHRpb25zQ2hhcnRUaGVtZU92ZXJyaWRlczooKT0+dGhpcy5nZXRHcmlkT3B0aW9uc0NoYXJ0VGhlbWVPdmVycmlkZXMoKSxnZXRFeHRyYVBhZGRpbmdEaXJlY3Rpb25zOigpPT57dmFyIGUsdDtyZXR1cm4gbnVsbCE9PSh0PW51bGw9PT0oZT10aGlzLmNoYXJ0TWVudSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZ2V0RXh0cmFQYWRkaW5nRGlyZWN0aW9ucygpKSYmdm9pZCAwIT09dD90OltdfSxhcGlDaGFydFRoZW1lT3ZlcnJpZGVzOnRoaXMucGFyYW1zLmNoYXJ0VGhlbWVPdmVycmlkZXMsY3Jvc3NGaWx0ZXJpbmc6dGhpcy5wYXJhbXMuY3Jvc3NGaWx0ZXJpbmcsY3Jvc3NGaWx0ZXJDYWxsYmFjazooZSx0KT0+e3RoaXMucGFyYW1zLmNyb3NzRmlsdGVyaW5nQ29udGV4dC5sYXN0U2VsZWN0ZWRDaGFydElkPXQ/IiI6dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnRJZCgpLHQmJnRoaXMucGFyYW1zLmNyb3NzRmlsdGVyaW5nUmVzZXRDYWxsYmFjaygpLHRoaXMuY3Jvc3NGaWx0ZXJTZXJ2aWNlLmZpbHRlcihlLHQpfSxwYXJlbnRFbGVtZW50OnRoaXMuZUNoYXJ0LGdyb3VwaW5nOnRoaXMuY2hhcnRDb250cm9sbGVyLmlzR3JvdXBpbmcoKSxjaGFydFRoZW1lVG9SZXN0b3JlOnRoaXMucGFyYW1zLmNoYXJ0VGhlbWVOYW1lLGNoYXJ0T3B0aW9uc1RvUmVzdG9yZTp0aGlzLnBhcmFtcy5jaGFydE9wdGlvbnNUb1Jlc3RvcmUsY2hhcnRQYWxldHRlVG9SZXN0b3JlOnRoaXMucGFyYW1zLmNoYXJ0UGFsZXR0ZVRvUmVzdG9yZSxzZXJpZXNDaGFydFR5cGVzOnRoaXMuY2hhcnRDb250cm9sbGVyLmdldFNlcmllc0NoYXJ0VHlwZXMoKSx0cmFuc2xhdGU6KGUsdCk9PnRoaXMuY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UudHJhbnNsYXRlKGUsdCl9O2lmKHRoaXMucGFyYW1zLmNoYXJ0T3B0aW9uc1RvUmVzdG9yZT12b2lkIDAsdGhpcy5jaGFydFR5cGU9dCx0aGlzLmNoYXJ0UHJveHk9UmkuY3JlYXRlQ2hhcnRQcm94eShpKSwhdGhpcy5jaGFydFByb3h5KXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZDogaW52YWxpZCBjaGFydCB0eXBlIHN1cHBsaWVkOiAiLGkuY2hhcnRUeXBlKTtjb25zdCBzPXRoaXMuZUNoYXJ0LnF1ZXJ5U2VsZWN0b3IoImNhbnZhcyIpO3MmJnMuY2xhc3NMaXN0LmFkZCgiYWctY2hhcnRzLWNhbnZhcyIpLHRoaXMuY2hhcnRDb250cm9sbGVyLnNldENoYXJ0UHJveHkodGhpcy5jaGFydFByb3h5KSx0aGlzLmNoYXJ0T3B0aW9uc1NlcnZpY2U9dGhpcy5jcmVhdGVCZWFuKG5ldyB3aSh0aGlzLmNoYXJ0Q29udHJvbGxlcikpLHRoaXMudGl0bGVFZGl0JiZ0aGlzLnRpdGxlRWRpdC5yZWZyZXNoVGl0bGUodGhpcy5jaGFydENvbnRyb2xsZXIsdGhpcy5jaGFydE9wdGlvbnNTZXJ2aWNlKX1nZXRDaGFydFRoZW1lTmFtZSgpe3JldHVybiB0aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydFRoZW1lTmFtZSgpfWdldENoYXJ0VGhlbWVzKCl7cmV0dXJuIHRoaXMuY2hhcnRDb250cm9sbGVyLmdldFRoZW1lTmFtZXMoKX1nZXRHcmlkT3B0aW9uc0NoYXJ0VGhlbWVPdmVycmlkZXMoKXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjaGFydFRoZW1lT3ZlcnJpZGVzIil9c3RhdGljIGNyZWF0ZUNoYXJ0UHJveHkoZSl7c3dpdGNoKGUuY2hhcnRUeXBlKXtjYXNlImNvbHVtbiI6Y2FzZSJiYXIiOmNhc2UiZ3JvdXBlZENvbHVtbiI6Y2FzZSJzdGFja2VkQ29sdW1uIjpjYXNlIm5vcm1hbGl6ZWRDb2x1bW4iOmNhc2UiZ3JvdXBlZEJhciI6Y2FzZSJzdGFja2VkQmFyIjpjYXNlIm5vcm1hbGl6ZWRCYXIiOnJldHVybiBuZXcgSnQoZSk7Y2FzZSJwaWUiOmNhc2UiZG9udXQiOmNhc2UiZG91Z2hudXQiOnJldHVybiBuZXcgc2koZSk7Y2FzZSJhcmVhIjpjYXNlInN0YWNrZWRBcmVhIjpjYXNlIm5vcm1hbGl6ZWRBcmVhIjpyZXR1cm4gbmV3IGVpKGUpO2Nhc2UibGluZSI6cmV0dXJuIG5ldyB0aShlKTtjYXNlInNjYXR0ZXIiOmNhc2UiYnViYmxlIjpyZXR1cm4gbmV3IHJpKGUpO2Nhc2UiaGlzdG9ncmFtIjpyZXR1cm4gbmV3IGFpKGUpO2Nhc2UicmFkYXJMaW5lIjpjYXNlInJhZGFyQXJlYSI6Y2FzZSJuaWdodGluZ2FsZSI6Y2FzZSJyYWRpYWxDb2x1bW4iOmNhc2UicmFkaWFsQmFyIjpyZXR1cm4gbmV3IGlpKGUpO2Nhc2UicmFuZ2VCYXIiOmNhc2UicmFuZ2VBcmVhIjpyZXR1cm4gbmV3IG5pKGUpO2Nhc2UiYm94UGxvdCI6cmV0dXJuIG5ldyBsaShlKTtjYXNlInRyZWVtYXAiOnJldHVybiBuZXcgZ2koZSk7Y2FzZSJzdW5idXJzdCI6cmV0dXJuIG5ldyBtaShlKTtjYXNlImhlYXRtYXAiOnJldHVybiBuZXcgdmkoZSk7Y2FzZSJ3YXRlcmZhbGwiOnJldHVybiBuZXcgU2koZSk7Y2FzZSJjb2x1bW5MaW5lQ29tYm8iOmNhc2UiYXJlYUNvbHVtbkNvbWJvIjpjYXNlImN1c3RvbUNvbWJvIjpyZXR1cm4gbmV3IGJpKGUpO2RlZmF1bHQ6dGhyb3dgQUcgR3JpZDogVW5hYmxlIHRvIGNyZWF0ZSBjaGFydCBhcyBhbiBpbnZhbGlkIGNoYXJ0VHlwZSA9ICcke2UuY2hhcnRUeXBlfScgd2FzIHN1cHBsaWVkLmB9fWFkZERpYWxvZygpe2NvbnN0IGU9dGhpcy5jaGFydFRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUodGhpcy5wYXJhbXMucGl2b3RDaGFydD8icGl2b3RDaGFydFRpdGxlIjoicmFuZ2VDaGFydFRpdGxlIikse3dpZHRoOnQsaGVpZ2h0Oml9PXRoaXMuZ2V0QmVzdERpYWxvZ1NpemUoKTt0aGlzLmNoYXJ0RGlhbG9nPW5ldyBzLkFnRGlhbG9nKHtyZXNpemFibGU6ITAsbW92YWJsZTohMCxtYXhpbWl6YWJsZTohMCx0aXRsZTplLHdpZHRoOnQsaGVpZ2h0OmksY29tcG9uZW50OnRoaXMsY2VudGVyZWQ6ITAsY2xvc2FibGU6ITB9KSx0aGlzLmdldENvbnRleHQoKS5jcmVhdGVCZWFuKHRoaXMuY2hhcnREaWFsb2cpLHRoaXMuY2hhcnREaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcihzLkFnRGlhbG9nLkVWRU5UX0RFU1RST1lFRCwoKT0+dGhpcy5kZXN0cm95KCkpfWdldEJlc3REaWFsb2dTaXplKCl7Y29uc3QgZT10aGlzLnBvcHVwU2VydmljZS5nZXRQb3B1cFBhcmVudCgpLHQ9Ljc1KnMuXy5nZXRBYnNvbHV0ZVdpZHRoKGUpLGk9Ljc1KnMuXy5nZXRBYnNvbHV0ZUhlaWdodChlKSxyPXRoaXMuY2hhcnRQcm94eS5nZXRDaGFydCgpO2xldCBvPXRoaXMucGFyYW1zLmluc2lkZURpYWxvZz84NTA6ci53aWR0aCxuPXRoaXMucGFyYW1zLmluc2lkZURpYWxvZz80NzA6ci5oZWlnaHQ7cmV0dXJuKG8+dHx8bj5pKSYmKG89TWF0aC5taW4obyx0KSxuPU1hdGgucm91bmQoLjU1MypvKSxuPmkmJihuPWksbz1NYXRoLm1pbihvLE1hdGgucm91bmQobi8uNTUzKSkpKSx7d2lkdGg6byxoZWlnaHQ6bn19YWRkTWVudSgpe3RoaXMucGFyYW1zLmNyb3NzRmlsdGVyaW5nfHwodGhpcy5jaGFydE1lbnU9dGhpcy5jcmVhdGVCZWFuKG5ldyBrdCh0aGlzLmVDaGFydENvbnRhaW5lcix0aGlzLmVNZW51Q29udGFpbmVyLHRoaXMuY2hhcnRDb250cm9sbGVyLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZSkpLHRoaXMuZUNoYXJ0Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY2hhcnRNZW51LmdldEd1aSgpKSl9YWRkVGl0bGVFZGl0Q29tcCgpe3RoaXMudGl0bGVFZGl0PXRoaXMuY3JlYXRlQmVhbihuZXcgVnQodGhpcy5jaGFydE1lbnUpKSx0aGlzLmVUaXRsZUVkaXRDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy50aXRsZUVkaXQuZ2V0R3VpKCkpLHRoaXMuY2hhcnRQcm94eSYmdGhpcy50aXRsZUVkaXQucmVmcmVzaFRpdGxlKHRoaXMuY2hhcnRDb250cm9sbGVyLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZSl9dXBkYXRlKGUpe2lmKG51bGw9PWU/dm9pZCAwOmUuY2hhcnRJZCl7aWYoIXRoaXMuY2hhcnRDb250cm9sbGVyLnVwZGF0ZShlKSlyZXR1cm59dGhpcy5jaGFydFR5cGVDaGFuZ2VkKGUpJiZ0aGlzLmNyZWF0ZUNoYXJ0KCksdGhpcy51cGRhdGVDaGFydChudWxsPT1lP3ZvaWQgMDplLmNoYXJ0VGhlbWVPdmVycmlkZXMpLChudWxsPT1lP3ZvaWQgMDplLmNoYXJ0SWQpJiZ0aGlzLmNoYXJ0UHJveHkuZ2V0Q2hhcnQoKS53YWl0Rm9yVXBkYXRlKCkudGhlbigoKT0+e3RoaXMuY2hhcnRDb250cm9sbGVyLnJhaXNlQ2hhcnRBcGlVcGRhdGVFdmVudCgpfSl9dXBkYXRlQ2hhcnQoZSl7Y29uc3R7Y2hhcnRQcm94eTp0fT10aGlzLGk9dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0U2VsZWN0ZWRWYWx1ZUNvbFN0YXRlKCkubWFwKGU9Pih7Y29sSWQ6ZS5jb2xJZCxkaXNwbGF5TmFtZTplLmRpc3BsYXlOYW1lfSkpLHM9dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnREYXRhKCk7aWYodGhpcy5oYW5kbGVFbXB0eUNoYXJ0KHMsaSkpcmV0dXJuO2xldCByPXRoaXMuY2hhcnRDb250cm9sbGVyLmdldENoYXJ0VXBkYXRlUGFyYW1zKGUpO3QudXBkYXRlKHIpLHRoaXMuY2hhcnRQcm94eS5nZXRDaGFydCgpLndhaXRGb3JVcGRhdGUoKS50aGVuKCgpPT57dGhpcy5jaGFydENvbnRyb2xsZXIucmFpc2VDaGFydFVwZGF0ZWRFdmVudCgpfSksdGhpcy50aXRsZUVkaXQucmVmcmVzaFRpdGxlKHRoaXMuY2hhcnRDb250cm9sbGVyLHRoaXMuY2hhcnRPcHRpb25zU2VydmljZSl9Y2hhcnRUeXBlQ2hhbmdlZChlKXtjb25zdFt0LGldPVt0aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydFR5cGUoKSxudWxsPT1lP3ZvaWQgMDplLmNoYXJ0VHlwZV07cmV0dXJuIHRoaXMuY2hhcnRUeXBlIT09dHx8ISFpJiZ0aGlzLmNoYXJ0VHlwZSE9PXAoaSl9Z2V0Q2hhcnRNb2RlbCgpe3JldHVybiB0aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydE1vZGVsKCl9Z2V0Q2hhcnRJbWFnZURhdGFVUkwoZSl7cmV0dXJuIHRoaXMuY2hhcnRQcm94eS5nZXRDaGFydEltYWdlRGF0YVVSTChlKX1oYW5kbGVFbXB0eUNoYXJ0KGUsdCl7Y29uc3QgaT10aGlzLmNoYXJ0Q29udHJvbGxlci5pc1Bpdm90Q2hhcnQoKSYmIXRoaXMuY2hhcnRDb250cm9sbGVyLmlzUGl2b3RNb2RlKCkscj10aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydFR5cGUoKTtsZXQgbz0xO3RoaXMuY2hhcnRDb250cm9sbGVyLmlzQWN0aXZlWFlDaGFydCgpP289ImJ1YmJsZSI9PT1yPzM6Mjp1KHIpJiYobz0wKTtjb25zdCBuPXQubGVuZ3RoPG98fDA9PT1lLmxlbmd0aDtpZih0aGlzLmVDaGFydCl7Y29uc3QgZT1pfHxuO3MuXy5zZXREaXNwbGF5ZWQodGhpcy5lQ2hhcnQsIWUpLHMuXy5zZXREaXNwbGF5ZWQodGhpcy5lRW1wdHksZSl9cmV0dXJuIGk/KHRoaXMuZUVtcHR5LmlubmVyVGV4dD10aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgicGl2b3RDaGFydFJlcXVpcmVzUGl2b3RNb2RlIiksITApOiEhbiYmKHRoaXMuZUVtcHR5LmlubmVyVGV4dD10aGlzLmNoYXJ0VHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZSgibm9EYXRhVG9DaGFydCIpLCEwKX1kb3dubG9hZENoYXJ0KGUsdCxpKXt0aGlzLmNoYXJ0UHJveHkuZG93bmxvYWRDaGFydChlLHQsaSl9b3BlbkNoYXJ0VG9vbFBhbmVsKGUpe2NvbnN0IHQ9ZT9zLkNIQVJUX1RPT0xfUEFORUxfTUVOVV9PUFRJT05TW2VdOmU7dGhpcy5jaGFydE1lbnUuc2hvd01lbnUodCl9Y2xvc2VDaGFydFRvb2xQYW5lbCgpe3RoaXMuY2hhcnRNZW51LmhpZGVNZW51KCl9Z2V0Q2hhcnRJZCgpe3JldHVybiB0aGlzLmNoYXJ0Q29udHJvbGxlci5nZXRDaGFydElkKCl9Z2V0VW5kZXJseWluZ0NoYXJ0KCl7cmV0dXJuIHRoaXMuY2hhcnRQcm94eS5nZXRDaGFydFJlZigpfWNyb3NzRmlsdGVyaW5nUmVzZXQoKXt0aGlzLmNoYXJ0UHJveHkuY3Jvc3NGaWx0ZXJpbmdSZXNldCgpfXNldEFjdGl2ZUNoYXJ0Q2VsbFJhbmdlKGUpe3RoaXMuZ2V0R3VpKCkuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KXx8KHRoaXMuY2hhcnRDb250cm9sbGVyLnNldENoYXJ0UmFuZ2UoITApLHRoaXMuZ3JpZEFwaS5mb2N1c1NlcnZpY2UuY2xlYXJGb2N1c2VkQ2VsbCgpKX1nZXRUaGVtZU5hbWUoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiY2hhcnRUaGVtZXMiKXx8XztpZigwPT09ZS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgY3JlYXRlIGNoYXJ0OiBubyBjaGFydCB0aGVtZXMgYXZhaWxhYmxlLiIpO2NvbnN0e2NoYXJ0VGhlbWVOYW1lOnR9PXRoaXMucGFyYW1zO3JldHVybiBzLl8uaW5jbHVkZXMoZSx0KT90OmVbMF19Z2V0QWxsS2V5c0luT2JqZWN0cyhlKXtjb25zdCB0PXt9O3JldHVybiBlLmZpbHRlcihlPT5udWxsIT1lKS5mb3JFYWNoKGU9PntPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGU9PnRbZV09bnVsbCl9KSxPYmplY3Qua2V5cyh0KX12YWxpZGF0ZUN1c3RvbVRoZW1lcygpe2NvbnN0IGU9dGhpcy5nZXRDaGFydFRoZW1lcygpLHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjdXN0b21DaGFydFRoZW1lcyIpO3QmJnRoaXMuZ2V0QWxsS2V5c0luT2JqZWN0cyhbdF0pLmZvckVhY2godD0+e3MuXy5pbmNsdWRlcyhlLHQpfHxjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGEgY3VzdG9tIGNoYXJ0IHRoZW1lIHdpdGggdGhlIG5hbWUgJyIrdCsiJyBoYXMgYmVlbiBzdXBwbGllZCBidXQgbm90IGFkZGVkIHRvIHRoZSAnY2hhcnRUaGVtZXMnIGxpc3QiKX0pfXJlYWN0aXZlUHJvcGVydHlVcGRhdGUoKXt0aGlzLmNoYXJ0Q29udHJvbGxlci5zZXRDaGFydFRoZW1lTmFtZSh0aGlzLmdldFRoZW1lTmFtZSgpLCEwKTtjb25zdCBlPXRoaXMuZ2V0Q2hhcnRJZCgpLHQ9dGhpcy5jaGFydENvbnRyb2xsZXIuaXNDcm9zc0ZpbHRlckNoYXJ0KCk/ImNyb3NzRmlsdGVyIjp0aGlzLmdldENoYXJ0TW9kZWwoKS5tb2RlbFR5cGUsaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNoYXJ0VGhlbWVPdmVycmlkZXMiKXx8e307dGhpcy51cGRhdGUoe3R5cGU6dCsiQ2hhcnRVcGRhdGUiLGNoYXJ0SWQ6ZSxjaGFydFRoZW1lT3ZlcnJpZGVzOml9KX1yYWlzZUNoYXJ0Q3JlYXRlZEV2ZW50KCl7Y29uc3QgZT17dHlwZTpzLkV2ZW50cy5FVkVOVF9DSEFSVF9DUkVBVEVELGNoYXJ0SWQ6dGhpcy5jaGFydENvbnRyb2xsZXIuZ2V0Q2hhcnRJZCgpfTt0aGlzLmNoYXJ0UHJveHkuZ2V0Q2hhcnQoKS53YWl0Rm9yVXBkYXRlKCkudGhlbigoKT0+e3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9KX1yYWlzZUNoYXJ0RGVzdHJveWVkRXZlbnQoKXtjb25zdCBlPXt0eXBlOnMuRXZlbnRzLkVWRU5UX0NIQVJUX0RFU1RST1lFRCxjaGFydElkOnRoaXMuY2hhcnRDb250cm9sbGVyLmdldENoYXJ0SWQoKX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX1kZXN0cm95KCl7dmFyIGU7c3VwZXIuZGVzdHJveSgpLHRoaXMuY2hhcnRQcm94eSYmdGhpcy5jaGFydFByb3h5LmRlc3Ryb3koKSx0aGlzLmRlc3Ryb3lCZWFuKHRoaXMuY2hhcnRNZW51KSx0aGlzLmRlc3Ryb3lCZWFuKHRoaXMudGl0bGVFZGl0KSx0aGlzLmNoYXJ0RGlhbG9nJiZ0aGlzLmNoYXJ0RGlhbG9nLmlzQWxpdmUoKSYmdGhpcy5kZXN0cm95QmVhbih0aGlzLmNoYXJ0RGlhbG9nKSxudWxsPT09KGU9dGhpcy5vbkRlc3Ryb3lDb2xvclNjaGVtZUNoYW5nZUxpc3RlbmVyKXx8dm9pZCAwPT09ZXx8ZS5jYWxsKHRoaXMpO2NvbnN0IHQ9dGhpcy5nZXRHdWkoKTtzLl8uY2xlYXJFbGVtZW50KHQpLHMuXy5yZW1vdmVGcm9tUGFyZW50KHQpLHRoaXMucmFpc2VDaGFydERlc3Ryb3llZEV2ZW50KCl9fVJpLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1jaGFydCIgdGFiaW5kZXg9Ii0xIj5cbiAgICAgICAgICAgIDxkaXYgcmVmPSJlQ2hhcnRDb250YWluZXIiIHRhYmluZGV4PSItMSIgY2xhc3M9ImFnLWNoYXJ0LWNvbXBvbmVudHMtd3JhcHBlciI+XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9ImVDaGFydCIgY2xhc3M9ImFnLWNoYXJ0LWNhbnZhcy13cmFwcGVyIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj0iZUVtcHR5IiBjbGFzcz0iYWctY2hhcnQtZW1wdHktdGV4dCBhZy11bnNlbGVjdGFibGUiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IHJlZj0iZVRpdGxlRWRpdENvbnRhaW5lciI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IHJlZj0iZU1lbnVDb250YWluZXIiIGNsYXNzPSJhZy1jaGFydC1kb2NrZWQtY29udGFpbmVyIiBzdHlsZT0ibWluLXdpZHRoOiAwcHg7Ij48L2Rpdj5cbiAgICAgICAgPC9kaXY+JyxFaShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlQ2hhcnQiKV0sUmkucHJvdG90eXBlLCJlQ2hhcnQiLHZvaWQgMCksRWkoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUNoYXJ0Q29udGFpbmVyIildLFJpLnByb3RvdHlwZSwiZUNoYXJ0Q29udGFpbmVyIix2b2lkIDApLEVpKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVNZW51Q29udGFpbmVyIildLFJpLnByb3RvdHlwZSwiZU1lbnVDb250YWluZXIiLHZvaWQgMCksRWkoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUVtcHR5IildLFJpLnByb3RvdHlwZSwiZUVtcHR5Iix2b2lkIDApLEVpKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVUaXRsZUVkaXRDb250YWluZXIiKV0sUmkucHJvdG90eXBlLCJlVGl0bGVFZGl0Q29udGFpbmVyIix2b2lkIDApLEVpKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjaGFydENyb3NzRmlsdGVyU2VydmljZSIpXSxSaS5wcm90b3R5cGUsImNyb3NzRmlsdGVyU2VydmljZSIsdm9pZCAwKSxFaShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sUmkucHJvdG90eXBlLCJjaGFydFRyYW5zbGF0aW9uU2VydmljZSIsdm9pZCAwKSxFaShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZ3JpZEFwaSIpXSxSaS5wcm90b3R5cGUsImdyaWRBcGkiLHZvaWQgMCksRWkoW09iamVjdChzLkF1dG93aXJlZCkoInBvcHVwU2VydmljZSIpXSxSaS5wcm90b3R5cGUsInBvcHVwU2VydmljZSIsdm9pZCAwKSxFaShbcy5Qb3N0Q29uc3RydWN0XSxSaS5wcm90b3R5cGUsImluaXQiLG51bGwpO3ZhciB4aT1mdW5jdGlvbihlLHQpe3ZhciBpPXt9O2Zvcih2YXIgcyBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHMpJiZ0LmluZGV4T2Yocyk8MCYmKGlbc109ZVtzXSk7aWYobnVsbCE9ZSYmImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPTA7Zm9yKHM9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtyPHMubGVuZ3RoO3IrKyl0LmluZGV4T2Yoc1tyXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsc1tyXSkmJihpW3Nbcl1dPWVbc1tyXV0pfXJldHVybiBpfTtmdW5jdGlvbiBUaShlKXtlLnZlcnNpb247cmV0dXJuIG51bGw9PWUudmVyc2lvbiYmKGUudmVyc2lvbj1mdW5jdGlvbihlKXt2YXIgdCxpO2NvbnN0IHM9ZTtpZihudWxsIT1lLnZlcnNpb24pcmV0dXJuIGUudmVyc2lvbjtjb25zdCByPShlLC4uLnQpPT5PYmplY3Qua2V5cyhlfHx7fSkuc29tZShlPT50LmluY2x1ZGVzKGUpKSxvPXMuY2hhcnRPcHRpb25zLG49cihvLCJzZXJpZXNEZWZhdWx0cyIpP251bGw9PW8/dm9pZCAwOm8uc2VyaWVzRGVmYXVsdHM6bnVsbD09bz92b2lkIDA6b1tPYmplY3Qua2V5cyhvKVswXV0sYT17IjI3LjAuMCI6cihzLCJzZXJpZXNDaGFydFR5cGVzIiksIjI2LjIuMCI6IXIobywic2VyaWVzRGVmYXVsdHMiKSwiMjYuMS4wIjpyKG51bGw9PW4/dm9pZCAwOm4uaGlnaGxpZ2h0U3R5bGUsIml0ZW0iKSwiMjYuMC4wIjpyKG51bGw9PW4/dm9pZCAwOm4uaGlnaGxpZ2h0U3R5bGUsInNlcmllcyIpLCIyNS4xLjAiOnIobnVsbD09bj92b2lkIDA6bi5sYWJlbCwibWluQW5nbGUiKSwiMjUuMC4wIjpyKHMsIm1vZGVsVHlwZSIsImFnZ0Z1bmMiLCJ1bmxpbmtDaGFydCIsInN1cHByZXNzQ2hhcnRSYW5nZXMiKXx8cihuLCJsaW5lRGFzaCIsImxpbmVEYXNoT2Zmc2V0IiksIjI0LjAuMCI6cihzLCJjaGFydFRoZW1lTmFtZSIsImNoYXJ0Iil8fHIobywic2VyaWVzIiksIjIzLjIuMCI6cihvLCJuYXZpZ2F0b3IiKSwiMjMuMC4wIjpyKG51bGw9PT0oaT1udWxsPT09KHQ9bnVsbD09bz92b2lkIDA6by5sZWdlbmQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lml0ZW0pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLm1hcmtlciwic2hhcGUiKSwiMjIuMS4wIjpyKHMsImNoYXJ0UGFsZXR0ZSIsImNoYXJ0VHlwZSIpfSxsPSIyNy4xLjAiLGQ9T2JqZWN0LmVudHJpZXMoYSkuZmlsdGVyKChbZSx0XSk9PnQpOzA7Y29uc3RbYz1sXT1kWzBdOzA7cmV0dXJuIGN9KGUpKSxlPUJpKCIyMy4wLjAiLGUsRGkpLGU9QmkoIjI0LjAuMCIsZSxPaSksZT1CaSgiMjUuMS4wIixlLEFpKSxlPUJpKCIyNi4wLjAiLGUsUGkpLGU9QmkoIjI2LjEuMCIsZSxNaSksZT1CaSgiMjYuMi4wIixlLExpKSxlPUJpKCIyOC4wLjAiLGUsRmkpLGU9QmkoIjI4LjIuMCIsZSxJaSksZT1CaSgiMjkuMC4wIixlLE5pKSxlPUJpKCIyOS4xLjAiLGUsR2kpLGU9QmkoIjI5LjIuMCIsZSxraSksZT1CaSgiMzAuMC4wIixlLF9pKSxlPUJpKCIzMS4wLjAiLGUsVmkpLGU9QmkoIjMxLjEuMSIsZT1mdW5jdGlvbihlKXtyZXR1cm4gZT1ZaSgiY2hhcnRPcHRpb25zLioud2lkdGgiLGUpLGU9amkoImNoYXJ0T3B0aW9ucy4qLmF4ZXMuY2F0ZWdvcnkubGFiZWwuYXV0b1JvdGF0ZSIsITAsZT1ZaSgiY2hhcnRPcHRpb25zLiouaGVpZ2h0IixlKSl9KGUpLGU9PmUpfWZ1bmN0aW9uIERpKGUpe3JldHVybiBlPUtpKCJjaGFydE9wdGlvbnMubGVnZW5kLml0ZW0ubWFya2VyLnR5cGUiLCJzaGFwZSIsZSksZT1LaSgiY2hhcnRPcHRpb25zLnNlcmllc0RlZmF1bHRzLm1hcmtlci50eXBlIiwic2hhcGUiLGUpLGU9S2koImNoYXJ0T3B0aW9ucy5sZWdlbmQucGFkZGluZyIsInNwYWNpbmciLGUpfWZ1bmN0aW9uIE9pKGUpe3ZhciB0O2NvbnN0IGk9ZT1ZaSgiY2hhcnRPcHRpb25zLnNlcmllc0RlZmF1bHRzLm1hcmtlci5taW5TaXplIixlKSx7Y2hhcnRUeXBlOnMsY2hhcnRQYWxldHRlOnJ9PWksbz1pLmNoYXJ0T3B0aW9ucyx7eEF4aXM6bix5QXhpczphfT1vLGw9eGkobyxbInhBeGlzIiwieUF4aXMiXSksZD14aShpLFsiY2hhcnRUeXBlIiwiY2hhcnRQYWxldHRlIiwiY2hhcnRPcHRpb25zIl0pLGM9ZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2UiYmFyIjpjYXNlInN0YWNrZWRCYXIiOmNhc2Uibm9ybWFsaXplZEJhciI6cmV0dXJuWyJudW1iZXIiLCJjYXRlZ29yeSJdO2Nhc2UiZ3JvdXBlZEJhciI6cmV0dXJuWyJudW1iZXIiLCJncm91cGVkLWNhdGVnb3J5Il07Y2FzZSJjb2x1bW4iOmNhc2Uic3RhY2tlZENvbHVtbiI6Y2FzZSJub3JtYWxpemVkQ29sdW1uIjpjYXNlImxpbmUiOmNhc2UiYXJlYSI6Y2FzZSJzdGFja2VkQXJlYSI6Y2FzZSJub3JtYWxpemVkQXJlYSI6Y2FzZSJoaXN0b2dyYW0iOnJldHVyblsiY2F0ZWdvcnkiLCJudW1iZXIiXTtjYXNlImdyb3VwZWRDb2x1bW4iOnJldHVyblsiZ3JvdXBlZC1jYXRlZ29yeSIsIm51bWJlciJdO2Nhc2Uic2NhdHRlciI6Y2FzZSJidWJibGUiOnJldHVyblsibnVtYmVyIiwibnVtYmVyIl07ZGVmYXVsdDpyZXR1cm59fShzKSxoPW51bGw9PWM/dm9pZCAwOmMubWFwKChlLHQpPT5PYmplY3QuYXNzaWduKHt0eXBlOmV9LDA9PT10P246YSkpO3JldHVybiBPYmplY3QuYXNzaWduKHtjaGFydFR5cGU6cyxjaGFydFRoZW1lTmFtZTpudWxsIT09KHQ9e2Jvcm5lbzoiYWctZGVmYXVsdCIsbWF0ZXJpYWw6ImFnLW1hdGVyaWFsIixicmlnaHQ6ImFnLXZpdmlkIn1bcl0pJiZ2b2lkIDAhPT10P3Q6ImFnLWRlZmF1bHQiLGNoYXJ0T3B0aW9uczpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbCkse2F4ZXM6aCx4QXhpczpuLHlBeGlzOmF9KX0sZCl9ZnVuY3Rpb24gQWkoZSl7cmV0dXJuIGU9S2koImNoYXJ0T3B0aW9ucy5zZXJpZXNEZWZhdWx0cy5sYWJlbC5taW5SZXF1aXJlZEFuZ2xlIiwibWluQW5nbGUiLGUpfWZ1bmN0aW9uIFBpKGUpe3JldHVybiBlPVlpKCJjaGFydCIsZT1YaSgiY2hhcnRPcHRpb25zLnNlcmllc0RlZmF1bHRzLmhpZ2hsaWdodFN0eWxlIixlLGU9Pnt2YXJ7ZGltT3BhY2l0eTp0fT1lLGk9eGkoZSxbImRpbU9wYWNpdHkiXSk7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxpKSxudWxsIT10P3tzZXJpZXM6e2RpbU9wYWNpdHk6dH19Ont9KX0pKSxlPVlpKCJjaGFydE9wdGlvbnMuc2VyaWVzRGVmYXVsdHMudG9vbHRpcENsYXNzIixlKSxlPVdpKCJjaGFydE9wdGlvbnMuYXhlc1tdLmxhYmVsLnJvdGF0aW9uIiwwLGU9WWkoImNoYXJ0T3B0aW9ucy5zZXJpZXNEZWZhdWx0cy50b29sdGlwVHJhY2tpbmciLGUpKSxlPVdpKCJjaGFydE9wdGlvbnMuYXhlc1tdLmxhYmVsLnJvdGF0aW9uIiwzMzUsZSl9ZnVuY3Rpb24gTWkoZSl7Y29uc3QgdD1lPT57dmFye2l0ZW06dCxzZXJpZXM6aX09ZSxzPXhpKGUsWyJpdGVtIiwic2VyaWVzIl0pO3JldHVybiBPYmplY3QuYXNzaWduKHtpdGVtOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxzKSx0KX0saT97c2VyaWVzOml9Ont9KX07cmV0dXJuIGU9WGkoImNoYXJ0T3B0aW9ucy5zZXJpZXNEZWZhdWx0cy5oaWdobGlnaHRTdHlsZSIsZSx0KSxlPVhpKCJjaGFydE9wdGlvbnMuc2VyaWVzW10uaGlnaGxpZ2h0U3R5bGUiLGUsdCl9ZnVuY3Rpb24gTGkoZSl7ZT1VaSgiY2hhcnRPcHRpb25zLnNlcmllc0RlZmF1bHRzLmZpbGwub3BhY2l0eSIsImNoYXJ0T3B0aW9ucy5zZXJpZXNEZWZhdWx0cy5maWxsT3BhY2l0eSIsZSksZT1VaSgiY2hhcnRPcHRpb25zLnNlcmllc0RlZmF1bHRzLnN0cm9rZS5vcGFjaXR5IiwiY2hhcnRPcHRpb25zLnNlcmllc0RlZmF1bHRzLnN0cm9rZU9wYWNpdHkiLGUpLGU9WWkoImNoYXJ0T3B0aW9ucy5zZXJpZXNEZWZhdWx0cy5maWxsIixlPVVpKCJjaGFydE9wdGlvbnMuc2VyaWVzRGVmYXVsdHMuc3Ryb2tlLndpZHRoIiwiY2hhcnRPcHRpb25zLnNlcmllc0RlZmF1bHRzLnN0cm9rZVdpZHRoIixlKSksZT1ZaSgiY2hhcnRPcHRpb25zLnNlcmllc0RlZmF1bHRzLnN0cm9rZSIsZSksZT1ZaSgiY2hhcnRPcHRpb25zLnNlcmllc0RlZmF1bHRzLmNhbGxvdXQuY29sb3JzIixlKSxlPVlpKCJjaGFydE9wdGlvbnMueEF4aXMiLGUpO2NvbnN0IHQ9ZT1ZaSgiY2hhcnRPcHRpb25zLnlBeGlzIixlKSx7Y2hhcnRUeXBlOml9PXQscz10LmNoYXJ0T3B0aW9ucyx7YXhlczpyLHNlcmllczpvLHNlcmllc0RlZmF1bHRzOm59PXMsYT14aShzLFsiYXhlcyIsInNlcmllcyIsInNlcmllc0RlZmF1bHRzIl0pLGw9eGkodCxbImNoYXJ0VHlwZSIsImNoYXJ0T3B0aW9ucyJdKSxkPXAoaSksYz1nKGQpLGg9W2NdLHU9e307aWYoIW0oYykpe2NvbnN0IGU9e3RvcDp7fSxib3R0b206e30sbGVmdDp7fSxyaWdodDp7fX0sdD1yLm1hcCh0PT57dmFye3R5cGU6aX09dCxzPXhpKHQsWyJ0eXBlIl0pO3JldHVybntbaV06T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHMpfX0pLnJlZHVjZShxaSx7fSk7Zi5maWx0ZXIoZT0+bnVsbD09dFtlXSkuZm9yRWFjaChpPT57dFtpXT1PYmplY3QuYXNzaWduKHt9LGUpfSksdS5heGVzPXR9Y29uc3Qgdj1oLm1hcChlPT4oe1tlXTpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx1KSx7c2VyaWVzOm59KSxhKX0pKS5yZWR1Y2UocWkse30pO3JldHVybiBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxsKSx7Y2hhcnRUeXBlOmQsY2hhcnRPcHRpb25zOnZ9KX1mdW5jdGlvbiBGaShlKXtyZXR1cm4gZT1ZaSgiY2hhcnRPcHRpb25zLioudGl0bGUucGFkZGluZyIsZSksZT1ZaSgiY2hhcnRPcHRpb25zLiouc3VidGl0bGUucGFkZGluZyIsZSksZT1qaSgiY2hhcnRPcHRpb25zLiouYXhlcy4qLnRpdGxlLmVuYWJsZWQiLCExLGU9WWkoImNoYXJ0T3B0aW9ucy4qLmF4ZXMuKi50aXRsZS5wYWRkaW5nIixlKSl9ZnVuY3Rpb24gSWkoZSl7cmV0dXJuIGU9S2koImNoYXJ0T3B0aW9ucy5waWUuc2VyaWVzLmNhbGxvdXQiLCJjYWxsb3V0TGluZSIsZSksZT1LaSgiY2hhcnRPcHRpb25zLnBpZS5zZXJpZXMubGFiZWwiLCJjYWxsb3V0TGFiZWwiLGUpLGU9S2koImNoYXJ0T3B0aW9ucy5waWUuc2VyaWVzLmxhYmVsS2V5Iiwic2VjdG9yTGFiZWxLZXkiLGUpLGU9S2koImNoYXJ0T3B0aW9ucy5waWUuc2VyaWVzLmxhYmVsTmFtZSIsInNlY3RvckxhYmVsTmFtZSIsZSksZT1LaSgiY2hhcnRPcHRpb25zLmRvbnV0LnNlcmllcy5jYWxsb3V0IiwiY2FsbG91dExpbmUiLGUpLGU9S2koImNoYXJ0T3B0aW9ucy5kb251dC5zZXJpZXMubGFiZWwiLCJjYWxsb3V0TGFiZWwiLGUpLGU9S2koImNoYXJ0T3B0aW9ucy5kb251dC5zZXJpZXMubGFiZWxLZXkiLCJzZWN0b3JMYWJlbEtleSIsZSksZT1LaSgiY2hhcnRPcHRpb25zLmRvbnV0LnNlcmllcy5sYWJlbE5hbWUiLCJzZWN0b3JMYWJlbE5hbWUiLGUpfWZ1bmN0aW9uIE5pKGUpe3JldHVybiBlPXppKCJjaGFydE9wdGlvbnMuc2NhdHRlci5zZXJpZXMuZmlsbCIsImNoYXJ0T3B0aW9ucy5zY2F0dGVyLnNlcmllcy5tYXJrZXIuZmlsbCIsZSksZT16aSgiY2hhcnRPcHRpb25zLnNjYXR0ZXIuc2VyaWVzLmZpbGxPcGFjaXR5IiwiY2hhcnRPcHRpb25zLnNjYXR0ZXIuc2VyaWVzLm1hcmtlci5maWxsT3BhY2l0eSIsZSksZT16aSgiY2hhcnRPcHRpb25zLnNjYXR0ZXIuc2VyaWVzLnN0cm9rZSIsImNoYXJ0T3B0aW9ucy5zY2F0dGVyLnNlcmllcy5tYXJrZXIuc3Ryb2tlIixlKSxlPXppKCJjaGFydE9wdGlvbnMuc2NhdHRlci5zZXJpZXMuc3Ryb2tlT3BhY2l0eSIsImNoYXJ0T3B0aW9ucy5zY2F0dGVyLnNlcmllcy5tYXJrZXIuc3Ryb2tlT3BhY2l0eSIsZSksZT1VaSgiY2hhcnRPcHRpb25zLnNjYXR0ZXIuc2VyaWVzLnBhaXJlZCIsImNoYXJ0T3B0aW9ucy5zY2F0dGVyLnBhaXJlZCIsZT16aSgiY2hhcnRPcHRpb25zLnNjYXR0ZXIuc2VyaWVzLnN0cm9rZVdpZHRoIiwiY2hhcnRPcHRpb25zLnNjYXR0ZXIuc2VyaWVzLm1hcmtlci5zdHJva2VXaWR0aCIsZSkpfWZ1bmN0aW9uIEdpKGUpe3JldHVybiBlPVlpKCJjaGFydE9wdGlvbnMuYXhlc1tdLnRpY2suY291bnQiLGUpfWZ1bmN0aW9uIGtpKGUpe3JldHVybiBlPVhpKCJjaGFydE9wdGlvbnMuKi50b29sdGlwIixlLGU9Pnt2YXIgdCxpLHMscix7dHJhY2tpbmc6b309ZSxuPXhpKGUsWyJ0cmFja2luZyJdKTtjb25zdCBhPU9iamVjdC5hc3NpZ24oe30sbik7cmV0dXJuITE9PT1vPyhudWxsIT09KHQ9YS5wb3NpdGlvbikmJnZvaWQgMCE9PXR8fChhLnBvc2l0aW9uPXt0eXBlOiJwb2ludGVyIn0pLG51bGwhPT0oaT1hLnJhbmdlKSYmdm9pZCAwIT09aXx8KGEucmFuZ2U9Im5lYXJlc3QiKSk6ITA9PT1vJiYobnVsbCE9PShzPWEucG9zaXRpb24pJiZ2b2lkIDAhPT1zfHwoYS5wb3NpdGlvbj17dHlwZToibm9kZSJ9KSxudWxsIT09KHI9YS5yYW5nZSkmJnZvaWQgMCE9PXJ8fChhLnJhbmdlPSJuZWFyZXN0IikpLGF9KX1mdW5jdGlvbiBfaShlKXtyZXR1cm4gZT1LaSgiY2hhcnRPcHRpb25zLnBpZS5zZXJpZXMubGFiZWxLZXkiLCJzZWN0b3JMYWJlbEtleSIsZSksZT1qaSgiY2hhcnRPcHRpb25zLmNvbW1vbi5sZWdlbmQucG9zaXRpb24iLCJyaWdodCIsZT1mdW5jdGlvbiBlKHQsaSxzKXt2YXIgcjsic3RyaW5nIj09dHlwZW9mIHQmJih0PXQuc3BsaXQoIi4iKSk7Y29uc3Qgbz10WzBdO3QubGVuZ3RoPjEmJihzW29dPWUodC5zbGljZSgxKSxpLG51bGwhPT0ocj1zW29dKSYmdm9pZCAwIT09cj9yOnt9KSk7T2JqZWN0LmtleXMocykuaW5jbHVkZXMobyl8fChzW29dPWkpO3JldHVybiBzfSgiY2hhcnRPcHRpb25zLmNvbW1vbi5sZWdlbmQuZW5hYmxlZCIsITAsZT1ZaSgiY2hhcnRPcHRpb25zLiouc2VyaWVzLmZsaXBYWSIsZT1raShlPUdpKGU9S2koImNoYXJ0T3B0aW9ucy5waWUuc2VyaWVzLmxhYmVsTmFtZSIsInNlY3RvckxhYmVsTmFtZSIsZSkpKSkpKX1mdW5jdGlvbiBWaShlKXtjb25zdCB0PUtpKCJjaGFydE9wdGlvbnMuY29sdW1uIiwiYmFyIixlKSxpPXsiYWctcGFzdGVsIjoiYWctc2hlZXRzIiwiYWctc29sYXIiOiJhZy1wb2x5Y2hyb21hIn1bdC5jaGFydFRoZW1lTmFtZV18fHQuY2hhcnRUaGVtZU5hbWU7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7Y2hhcnRUaGVtZU5hbWU6aX0pfWZ1bmN0aW9uIEJpKGUsdCxpKXtpZihIaShlKT5IaSh0LnZlcnNpb24pKXswO2NvbnN0IHM9aSh0KTtyZXR1cm4gcy52ZXJzaW9uPWUsc31yZXR1cm4gdH1mdW5jdGlvbiBIaShlKXtjb25zdHttYWpvcjp0LG1pbm9yOmkscGF0Y2g6c309ZnVuY3Rpb24oZSl7Y29uc3QgdD0ic3RyaW5nIj09dHlwZW9mIGU/ZS5zcGxpdCgiLiIpLm1hcChlPT5OdW1iZXIoZSkpOltdO2lmKDMhPT10Lmxlbmd0aHx8dC5zb21lKGU9PmlzTmFOKGUpKSl0aHJvdyBuZXcgRXJyb3IoIkFHIEdyaWQgLSBJbGxlZ2FsIHZlcnNpb24gc3RyaW5nOiAiK2UpO3JldHVybnttYWpvcjp0WzBdLG1pbm9yOnRbMV0scGF0Y2g6dFsyXX19KGUpO3JldHVybiAxZTQqdCsxMDAqaStzfWZ1bmN0aW9uIFdpKGUsdCxpKXtyZXR1cm4gJGkoZSwhMCxpLChlLGkpPT57ZVtpXT09PXQmJmRlbGV0ZSBlW2ldfSl9ZnVuY3Rpb24gamkoZSx0LGkpe3JldHVybiAkaShlLCExLGksKGUsaSk9PntudWxsPT1lW2ldJiYoZVtpXT10KX0pfWZ1bmN0aW9uIFVpKGUsdCxpKXtsZXQgcz12b2lkIDAscj0hMTtyZXR1cm4gaT0kaShlLCEwLGksKGUsdCk9PntyPSEwLHM9ZVt0XSxkZWxldGUgZVt0XX0pLHI/JGkodCwhMSxpLChlLHQpPT57ZVt0XT1zfSk6aX1mdW5jdGlvbiB6aShlLHQsaSl7bGV0IHM9dm9pZCAwLHI9ITE7cmV0dXJuIGk9JGkoZSwhMCxpLChlLHQpPT57cj0hMCxzPWVbdF0sZGVsZXRlIGVbdF19KSxyPyRpKHQsITEsaSwoZSx0KT0+e3ZvaWQgMD09PWVbdF0mJihlW3RdPXMpfSk6aX1mdW5jdGlvbiBLaShlLHQsaSl7cmV0dXJuICRpKGUsITAsaSwoZSxpKT0+e2VbdF09ZVtpXSxkZWxldGUgZVtpXX0pfWZ1bmN0aW9uIFlpKGUsdCl7cmV0dXJuICRpKGUsITAsdCwoZSx0KT0+ZGVsZXRlIGVbdF0pfWZ1bmN0aW9uICRpKGUsdCxpLHMpe2NvbnN0IHI9ZSBpbnN0YW5jZW9mIEFycmF5P2U6ZS5zcGxpdCgiLiIpLG89ci5zbGljZSgwLHIubGVuZ3RoLTEpLG49cltyLmxlbmd0aC0xXTtyZXR1cm4gWGkobyxpLGU9Pntjb25zdCBpPU9iamVjdC5rZXlzKGUpLmluY2x1ZGVzKG4pO2lmKHQmJiFpKXJldHVybiBlO2NvbnN0IHI9T2JqZWN0LmFzc2lnbih7fSxlKTtyZXR1cm4gcyhyLG4pLHJ9KX1mdW5jdGlvbiBYaShlLHQsaSl7Y29uc3Qgcz1lIGluc3RhbmNlb2YgQXJyYXk/ZTplLnNwbGl0KCIuIik7aWYodD1PYmplY3QuYXNzaWduKHt9LHQpLDA9PT1zLmxlbmd0aClyZXR1cm4gaSh0KTtpZihzWzBdLnN0YXJ0c1dpdGgoInsiKSl7Y29uc3QgZT1zWzBdLnN1YnN0cmluZygxLHNbMF0ubGFzdEluZGV4T2YoIn0iKSkuc3BsaXQoIiwiKTtmb3IoY29uc3QgciBvZiBlKW51bGwhPXRbcl0mJih0W3JdPVhpKHMuc2xpY2UoMSksdFtyXSxpKSl9ZWxzZSBpZihzWzBdLmVuZHNXaXRoKCJbXSIpKXtjb25zdCByPXNbMF0uc3Vic3RyaW5nKDAsZVswXS5pbmRleE9mKCJbIikpO3Rbcl1pbnN0YW5jZW9mIEFycmF5JiYodFtyXT10W3JdLm1hcChlPT5YaShzLnNsaWNlKDEpLGUsaSkpKX1lbHNlIGlmKCIqIj09PXNbMF0pZm9yKGNvbnN0IGUgaW4gdCl0W2VdPVhpKHMuc2xpY2UoMSksdFtlXSxpKTtlbHNlIG51bGwhPXRbc1swXV0mJih0W3NbMF1dPVhpKHMuc2xpY2UoMSksdFtzWzBdXSxpKSk7cmV0dXJuIHR9Y29uc3QgcWk9KGUsdCk9Pk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx0KTt2YXIgWmk9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IFFpPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1Yntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5hY3RpdmVDaGFydHM9bmV3IFNldCx0aGlzLmFjdGl2ZUNoYXJ0Q29tcHM9bmV3IFNldCx0aGlzLmNyb3NzRmlsdGVyaW5nQ29udGV4dD17bGFzdFNlbGVjdGVkQ2hhcnRJZDoiIn0sdGhpcy5pc0VudGVycHJpc2U9KCk9Pm8uZy5lbnRlcnByaXNlTW9kdWxlLmlzRW50ZXJwcmlzZX11cGRhdGVDaGFydChlKXtjb25zdCB0PWUuY2hhcnRUeXBlO2lmKHQmJmEodCkmJiF0aGlzLmlzRW50ZXJwcmlzZSgpKXJldHVybiB2b2lkIHMuTW9kdWxlUmVnaXN0cnkuX193YXJuRW50ZXJwcmlzZUNoYXJ0RGlzYWJsZWQodCk7aWYoMD09PXRoaXMuYWN0aXZlQ2hhcnRDb21wcy5zaXplKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZCAtIE5vIGFjdGl2ZSBjaGFydHMgdG8gdXBkYXRlLiIpO2NvbnN0IGk9Wy4uLnRoaXMuYWN0aXZlQ2hhcnRDb21wc10uZmluZCh0PT50LmdldENoYXJ0SWQoKT09PWUuY2hhcnRJZCk7aT9pLnVwZGF0ZShlKTpjb25zb2xlLndhcm4oYEFHIEdyaWQgLSBVbmFibGUgdG8gdXBkYXRlIGNoYXJ0LiBObyBhY3RpdmUgY2hhcnQgZm91bmQgd2l0aCBJRDogJHtlLmNoYXJ0SWR9LmApfWdldENoYXJ0TW9kZWxzKCl7Y29uc3QgZT1bXTtyZXR1cm4gdGhpcy5hY3RpdmVDaGFydENvbXBzLmZvckVhY2godD0+ZS5wdXNoKChlPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3ZlcnNpb246IjMxLjEuMSJ9KSkodC5nZXRDaGFydE1vZGVsKCkpKSksZX1nZXRDaGFydFJlZihlKXtsZXQgdDtyZXR1cm4gdGhpcy5hY3RpdmVDaGFydHMuZm9yRWFjaChpPT57aS5jaGFydElkPT09ZSYmKHQ9aSl9KSx0fWdldENoYXJ0Q29tcChlKXtsZXQgdDtyZXR1cm4gdGhpcy5hY3RpdmVDaGFydENvbXBzLmZvckVhY2goaT0+e2kuZ2V0Q2hhcnRJZCgpPT09ZSYmKHQ9aSl9KSx0fWdldENoYXJ0SW1hZ2VEYXRhVVJMKGUpe2xldCB0O3JldHVybiB0aGlzLmFjdGl2ZUNoYXJ0Q29tcHMuZm9yRWFjaChpPT57aS5nZXRDaGFydElkKCk9PT1lLmNoYXJ0SWQmJih0PWkuZ2V0Q2hhcnRJbWFnZURhdGFVUkwoZS5maWxlRm9ybWF0KSl9KSx0fWRvd25sb2FkQ2hhcnQoZSl7Y29uc3QgdD1BcnJheS5mcm9tKHRoaXMuYWN0aXZlQ2hhcnRDb21wcykuZmluZCh0PT50LmdldENoYXJ0SWQoKT09PWUuY2hhcnRJZCk7bnVsbD09dHx8dC5kb3dubG9hZENoYXJ0KGUuZGltZW5zaW9ucyxlLmZpbGVOYW1lLGUuZmlsZUZvcm1hdCl9b3BlbkNoYXJ0VG9vbFBhbmVsKGUpe2NvbnN0IHQ9QXJyYXkuZnJvbSh0aGlzLmFjdGl2ZUNoYXJ0Q29tcHMpLmZpbmQodD0+dC5nZXRDaGFydElkKCk9PT1lLmNoYXJ0SWQpO251bGw9PXR8fHQub3BlbkNoYXJ0VG9vbFBhbmVsKGUucGFuZWwpfWNsb3NlQ2hhcnRUb29sUGFuZWwoZSl7Y29uc3QgdD1BcnJheS5mcm9tKHRoaXMuYWN0aXZlQ2hhcnRDb21wcykuZmluZCh0PT50LmdldENoYXJ0SWQoKT09PWUpO251bGw9PXR8fHQuY2xvc2VDaGFydFRvb2xQYW5lbCgpfWNyZWF0ZUNoYXJ0RnJvbUN1cnJlbnRSYW5nZShlPSJncm91cGVkQ29sdW1uIil7Y29uc3QgdD10aGlzLmdldFNlbGVjdGVkUmFuZ2UoKTtyZXR1cm4gdGhpcy5jcmVhdGVDaGFydCh0LGUpfXJlc3RvcmVDaGFydChlLHQpe2lmKCFlKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZCAtIHVuYWJsZSB0byByZXN0b3JlIGNoYXJ0IGFzIG5vIGNoYXJ0IG1vZGVsIGlzIHByb3ZpZGVkIik7IjMxLjEuMSIhPT1lLnZlcnNpb24mJihlPVRpKGUpKTtjb25zdCBpPXtjZWxsUmFuZ2U6ZS5jZWxsUmFuZ2UsY2hhcnRUeXBlOmUuY2hhcnRUeXBlLGNoYXJ0VGhlbWVOYW1lOmUuY2hhcnRUaGVtZU5hbWUsY2hhcnRDb250YWluZXI6dCxzdXBwcmVzc0NoYXJ0UmFuZ2VzOmUuc3VwcHJlc3NDaGFydFJhbmdlcyxhZ2dGdW5jOmUuYWdnRnVuYyx1bmxpbmtDaGFydDplLnVubGlua0NoYXJ0LHNlcmllc0NoYXJ0VHlwZXM6ZS5zZXJpZXNDaGFydFR5cGVzfSxzPWU9PnRoaXMucmFuZ2VTZXJ2aWNlP3RoaXMucmFuZ2VTZXJ2aWNlLmNyZWF0ZUNlbGxSYW5nZUZyb21DZWxsUmFuZ2VQYXJhbXMoZSk6dm9pZCAwO2lmKCJwaXZvdCI9PT1lLm1vZGVsVHlwZSl7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UudXBkYXRlR3JpZE9wdGlvbnMoe29wdGlvbnM6e3Bpdm90TW9kZTohMH0sc291cmNlOiJwaXZvdENoYXJ0In0pO2NvbnN0IHQ9cyh7cm93U3RhcnRJbmRleDpudWxsLHJvd1N0YXJ0UGlubmVkOnZvaWQgMCxyb3dFbmRJbmRleDpudWxsLHJvd0VuZFBpbm5lZDp2b2lkIDAsY29sdW1uczp0aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKS5tYXAoZT0+ZS5nZXRDb2xJZCgpKX0pO3JldHVybiB0P3RoaXMuY3JlYXRlQ2hhcnQodCxpLmNoYXJ0VHlwZSxpLmNoYXJ0VGhlbWVOYW1lLCEwLCEwLGkuY2hhcnRDb250YWluZXIsdm9pZCAwLHZvaWQgMCxpLnVubGlua0NoYXJ0LCExLGUuY2hhcnRPcHRpb25zKTp2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZCAtIHVuYWJsZSB0byBjcmVhdGUgY2hhcnQgYXMgdGhlcmUgYXJlIG5vIGNvbHVtbnMgaW4gdGhlIGdyaWQuIil9Y29uc3Qgcj1zKGkuY2VsbFJhbmdlKTtpZihyKXJldHVybiB0aGlzLmNyZWF0ZUNoYXJ0KHIsaS5jaGFydFR5cGUsaS5jaGFydFRoZW1lTmFtZSwhMSxpLnN1cHByZXNzQ2hhcnRSYW5nZXMsaS5jaGFydENvbnRhaW5lcixpLmFnZ0Z1bmMsdm9pZCAwLGkudW5saW5rQ2hhcnQsITEsZS5jaGFydE9wdGlvbnMsZS5jaGFydFBhbGV0dGUsaS5zZXJpZXNDaGFydFR5cGVzKTtjb25zb2xlLndhcm4oIkFHIEdyaWQgLSB1bmFibGUgdG8gY3JlYXRlIGNoYXJ0IGFzIG5vIHJhbmdlIGlzIHNlbGVjdGVkIil9Y3JlYXRlUmFuZ2VDaGFydChlKXt2YXIgdDtjb25zdCBpPW51bGw9PT0odD10aGlzLnJhbmdlU2VydmljZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY3JlYXRlQ2VsbFJhbmdlRnJvbUNlbGxSYW5nZVBhcmFtcyhlLmNlbGxSYW5nZSk7aWYoaSlyZXR1cm4gdGhpcy5jcmVhdGVDaGFydChpLGUuY2hhcnRUeXBlLGUuY2hhcnRUaGVtZU5hbWUsITEsZS5zdXBwcmVzc0NoYXJ0UmFuZ2VzLGUuY2hhcnRDb250YWluZXIsZS5hZ2dGdW5jLGUuY2hhcnRUaGVtZU92ZXJyaWRlcyxlLnVubGlua0NoYXJ0LHZvaWQgMCx2b2lkIDAsdm9pZCAwLGUuc2VyaWVzQ2hhcnRUeXBlcyk7Y29uc29sZS53YXJuKCJBRyBHcmlkIC0gdW5hYmxlIHRvIGNyZWF0ZSBjaGFydCBhcyBubyByYW5nZSBpcyBzZWxlY3RlZCIpfWNyZWF0ZVBpdm90Q2hhcnQoZSl7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UudXBkYXRlR3JpZE9wdGlvbnMoe29wdGlvbnM6e3Bpdm90TW9kZTohMH0sc291cmNlOiJwaXZvdENoYXJ0In0pO2NvbnN0IHQ9e3Jvd1N0YXJ0SW5kZXg6bnVsbCxyb3dTdGFydFBpbm5lZDp2b2lkIDAscm93RW5kSW5kZXg6bnVsbCxyb3dFbmRQaW5uZWQ6dm9pZCAwLGNvbHVtbnM6dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCkubWFwKGU9PmUuZ2V0Q29sSWQoKSl9LGk9dGhpcy5yYW5nZVNlcnZpY2U/dGhpcy5yYW5nZVNlcnZpY2UuY3JlYXRlQ2VsbFJhbmdlRnJvbUNlbGxSYW5nZVBhcmFtcyh0KTp2b2lkIDA7aWYoaSlyZXR1cm4gdGhpcy5jcmVhdGVDaGFydChpLGUuY2hhcnRUeXBlLGUuY2hhcnRUaGVtZU5hbWUsITAsITAsZS5jaGFydENvbnRhaW5lcix2b2lkIDAsZS5jaGFydFRoZW1lT3ZlcnJpZGVzLGUudW5saW5rQ2hhcnQpO2NvbnNvbGUud2FybigiQUcgR3JpZCAtIHVuYWJsZSB0byBjcmVhdGUgY2hhcnQgYXMgdGhlcmUgYXJlIG5vIGNvbHVtbnMgaW4gdGhlIGdyaWQuIil9Y3JlYXRlQ3Jvc3NGaWx0ZXJDaGFydChlKXt2YXIgdDtjb25zdCBpPW51bGw9PT0odD10aGlzLnJhbmdlU2VydmljZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY3JlYXRlQ2VsbFJhbmdlRnJvbUNlbGxSYW5nZVBhcmFtcyhlLmNlbGxSYW5nZSk7aWYoIWkpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKCJBRyBHcmlkIC0gdW5hYmxlIHRvIGNyZWF0ZSBjaGFydCBhcyBubyByYW5nZSBpcyBzZWxlY3RlZCIpO2NvbnN0IHM9ISh2b2lkIDAhPT1lLnN1cHByZXNzQ2hhcnRSYW5nZXMmJm51bGwhPT1lLnN1cHByZXNzQ2hhcnRSYW5nZXMpfHxlLnN1cHByZXNzQ2hhcnRSYW5nZXM7cmV0dXJuIHRoaXMuY3JlYXRlQ2hhcnQoaSxlLmNoYXJ0VHlwZSxlLmNoYXJ0VGhlbWVOYW1lLCExLHMsZS5jaGFydENvbnRhaW5lcixlLmFnZ0Z1bmMsZS5jaGFydFRoZW1lT3ZlcnJpZGVzLGUudW5saW5rQ2hhcnQsITApfWNyZWF0ZUNoYXJ0KGUsdCxpLHI9ITEsbz0hMSxuLGwsZCxjPSExLGg9ITEsdSxnLG0pe2lmKGEodCkmJiF0aGlzLmlzRW50ZXJwcmlzZSgpKXJldHVybiB2b2lkIHMuTW9kdWxlUmVnaXN0cnkuX193YXJuRW50ZXJwcmlzZUNoYXJ0RGlzYWJsZWQodCk7Y29uc3QgZj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiY3JlYXRlQ2hhcnRDb250YWluZXIiKSx2PXtjaGFydElkOnRoaXMuZ2VuZXJhdGVJZCgpLHBpdm90Q2hhcnQ6cixjZWxsUmFuZ2U6ZSxjaGFydFR5cGU6cCh0KSxjaGFydFRoZW1lTmFtZTppLGluc2lkZURpYWxvZzohKG58fGYpLHN1cHByZXNzQ2hhcnRSYW5nZXM6byxhZ2dGdW5jOmwsY2hhcnRUaGVtZU92ZXJyaWRlczpkLHVubGlua0NoYXJ0OmMsY3Jvc3NGaWx0ZXJpbmc6aCxjcm9zc0ZpbHRlcmluZ0NvbnRleHQ6dGhpcy5jcm9zc0ZpbHRlcmluZ0NvbnRleHQsY2hhcnRPcHRpb25zVG9SZXN0b3JlOnUsY2hhcnRQYWxldHRlVG9SZXN0b3JlOmcsc2VyaWVzQ2hhcnRUeXBlczptLGNyb3NzRmlsdGVyaW5nUmVzZXRDYWxsYmFjazooKT0+dGhpcy5hY3RpdmVDaGFydENvbXBzLmZvckVhY2goZT0+ZS5jcm9zc0ZpbHRlcmluZ1Jlc2V0KCkpfSxDPW5ldyBSaSh2KTt0aGlzLmNvbnRleHQuY3JlYXRlQmVhbihDKTtjb25zdCB5PXRoaXMuY3JlYXRlQ2hhcnRSZWYoQyk7aWYobil7bi5hcHBlbmRDaGlsZChDLmdldEd1aSgpKTtjb25zdCBlPXRoaXMuZW52aXJvbm1lbnQuZ2V0VGhlbWUoKTtlLmVsJiYhZS5lbC5jb250YWlucyhuKSYmbi5jbGFzc0xpc3QuYWRkKGUudGhlbWUpfWVsc2UgZj9mKHkpOkMuYWRkRXZlbnRMaXN0ZW5lcihSaS5FVkVOVF9ERVNUUk9ZRUQsKCk9Pnt0aGlzLmFjdGl2ZUNoYXJ0Q29tcHMuZGVsZXRlKEMpLHRoaXMuYWN0aXZlQ2hhcnRzLmRlbGV0ZSh5KX0pO3JldHVybiB5fWNyZWF0ZUNoYXJ0UmVmKGUpe2NvbnN0IHQ9e2Rlc3Ryb3lDaGFydDooKT0+e3RoaXMuYWN0aXZlQ2hhcnRzLmhhcyh0KSYmKHRoaXMuY29udGV4dC5kZXN0cm95QmVhbihlKSx0aGlzLmFjdGl2ZUNoYXJ0Q29tcHMuZGVsZXRlKGUpLHRoaXMuYWN0aXZlQ2hhcnRzLmRlbGV0ZSh0KSl9LGNoYXJ0RWxlbWVudDplLmdldEd1aSgpLGNoYXJ0OmUuZ2V0VW5kZXJseWluZ0NoYXJ0KCksY2hhcnRJZDplLmdldENoYXJ0TW9kZWwoKS5jaGFydElkfTtyZXR1cm4gdGhpcy5hY3RpdmVDaGFydHMuYWRkKHQpLHRoaXMuYWN0aXZlQ2hhcnRDb21wcy5hZGQoZSksdH1nZXRTZWxlY3RlZFJhbmdlKCl7Y29uc3QgZT10aGlzLnJhbmdlU2VydmljZS5nZXRDZWxsUmFuZ2VzKCk7cmV0dXJuIGUubGVuZ3RoPjA/ZVswXTp7fX1nZW5lcmF0ZUlkKCl7cmV0dXJuImlkLSIrTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsMTgpfWRlc3Ryb3lBbGxBY3RpdmVDaGFydHMoKXt0aGlzLmFjdGl2ZUNoYXJ0cy5mb3JFYWNoKGU9PmUuZGVzdHJveUNoYXJ0KCkpfX07UWkuQ0hBUlRTX1ZFUlNJT049by5mLFppKFtPYmplY3Qocy5PcHRpb25hbCkoInJhbmdlU2VydmljZSIpXSxRaS5wcm90b3R5cGUsInJhbmdlU2VydmljZSIsdm9pZCAwKSxaaShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sUWkucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxaaShbcy5QcmVEZXN0cm95XSxRaS5wcm90b3R5cGUsImRlc3Ryb3lBbGxBY3RpdmVDaGFydHMiLG51bGwpLFFpPVppKFtPYmplY3Qocy5CZWFuKSgiY2hhcnRTZXJ2aWNlIildLFFpKTt2YXIgSmksZXM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IHRzPUppPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1Ynt0cmFuc2xhdGUoZSx0KXtyZXR1cm4gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCkoZSxKaS5ERUZBVUxUX1RSQU5TTEFUSU9OU1tlXXx8dCl9fTt0cy5ERUZBVUxUX1RSQU5TTEFUSU9OUz17cGl2b3RDaGFydFRpdGxlOiJQaXZvdCBDaGFydCIscmFuZ2VDaGFydFRpdGxlOiJSYW5nZSBDaGFydCIsc2V0dGluZ3M6IlNldHRpbmdzIixkYXRhOiJEYXRhIixmb3JtYXQ6IkZvcm1hdCIsY2F0ZWdvcmllczoiQ2F0ZWdvcmllcyIsZGVmYXVsdENhdGVnb3J5OiIoTm9uZSkiLHNlcmllczoiU2VyaWVzIix4eVZhbHVlczoiWCBZIFZhbHVlcyIscGFpcmVkOiJQYWlyZWQgTW9kZSIsYXhpczoiQXhpcyIscmFkaXVzQXhpczoiUmFkaXVzIEF4aXMiLG5hdmlnYXRvcjoiTmF2aWdhdG9yIixjb2xvcjoiQ29sb3IiLHRoaWNrbmVzczoiVGhpY2tuZXNzIixwcmVmZXJyZWRMZW5ndGg6IlByZWZlcnJlZCBMZW5ndGgiLHhUeXBlOiJYIFR5cGUiLGF1dG9tYXRpYzoiQXV0b21hdGljIixjYXRlZ29yeToiQ2F0ZWdvcnkiLG51bWJlcjoiTnVtYmVyIix0aW1lOiJUaW1lIixhdXRvUm90YXRlOiJBdXRvIFJvdGF0ZSIseFJvdGF0aW9uOiJYIFJvdGF0aW9uIix5Um90YXRpb246IlkgUm90YXRpb24iLGxhYmVsUm90YXRpb246IlJvdGF0aW9uIixjaXJjbGU6IkNpcmNsZSIsb3JpZW50YXRpb246Ik9yaWVudGF0aW9uIixwb2x5Z29uOiJQb2x5Z29uIixmaXhlZDoiRml4ZWQiLHBhcmFsbGVsOiJQYXJhbGxlbCIscGVycGVuZGljdWxhcjoiUGVycGVuZGljdWxhciIscmFkaXVzQXhpc1Bvc2l0aW9uOiJQb3NpdGlvbiIsdGlja3M6IlRpY2tzIix3aWR0aDoiV2lkdGgiLGhlaWdodDoiSGVpZ2h0IixsZW5ndGg6Ikxlbmd0aCIscGFkZGluZzoiUGFkZGluZyIsc3BhY2luZzoiU3BhY2luZyIsY2hhcnQ6IkNoYXJ0Iix0aXRsZToiVGl0bGUiLHRpdGxlUGxhY2Vob2xkZXI6IkNoYXJ0IHRpdGxlIC0gZG91YmxlIGNsaWNrIHRvIGVkaXQiLGJhY2tncm91bmQ6IkJhY2tncm91bmQiLGZvbnQ6IkZvbnQiLHRvcDoiVG9wIixyaWdodDoiUmlnaHQiLGJvdHRvbToiQm90dG9tIixsZWZ0OiJMZWZ0IixsYWJlbHM6IkxhYmVscyIsY2FsbG91dExhYmVsczoiQ2FsbG91dCBMYWJlbHMiLHNlY3RvckxhYmVsczoiU2VjdG9yIExhYmVscyIscG9zaXRpb25SYXRpbzoiUG9zaXRpb24gUmF0aW8iLHNpemU6IlNpemUiLHNoYXBlOiJTaGFwZSIsbWluU2l6ZToiTWluaW11bSBTaXplIixtYXhTaXplOiJNYXhpbXVtIFNpemUiLGxlZ2VuZDoiTGVnZW5kIixwb3NpdGlvbjoiUG9zaXRpb24iLG1hcmtlclNpemU6Ik1hcmtlciBTaXplIixtYXJrZXJTdHJva2U6Ik1hcmtlciBTdHJva2UiLG1hcmtlclBhZGRpbmc6Ik1hcmtlciBQYWRkaW5nIixpdGVtU3BhY2luZzoiSXRlbSBTcGFjaW5nIixpdGVtUGFkZGluZ1g6Ikl0ZW0gUGFkZGluZyBYIixpdGVtUGFkZGluZ1k6Ikl0ZW0gUGFkZGluZyBZIixsYXlvdXRIb3Jpem9udGFsU3BhY2luZzoiSG9yaXpvbnRhbCBTcGFjaW5nIixsYXlvdXRWZXJ0aWNhbFNwYWNpbmc6IlZlcnRpY2FsIFNwYWNpbmciLHN0cm9rZVdpZHRoOiJTdHJva2UgV2lkdGgiLG9mZnNldDoiT2Zmc2V0IixvZmZzZXRzOiJPZmZzZXRzIix0b29sdGlwczoiVG9vbHRpcHMiLGNhbGxvdXQ6IkNhbGxvdXQiLG1hcmtlcnM6Ik1hcmtlcnMiLHNoYWRvdzoiU2hhZG93IixibHVyOiJCbHVyIix4T2Zmc2V0OiJYIE9mZnNldCIseU9mZnNldDoiWSBPZmZzZXQiLGxpbmVXaWR0aDoiTGluZSBXaWR0aCIsbGluZURhc2g6IkxpbmUgRGFzaCIsbGluZURhc2hPZmZzZXQ6IkRhc2ggT2Zmc2V0Iixub3JtYWw6Ik5vcm1hbCIsYm9sZDoiQm9sZCIsaXRhbGljOiJJdGFsaWMiLGJvbGRJdGFsaWM6IkJvbGQgSXRhbGljIixwcmVkZWZpbmVkOiJQcmVkZWZpbmVkIixmaWxsT3BhY2l0eToiRmlsbCBPcGFjaXR5IixzdHJva2VDb2xvcjoiTGluZSBDb2xvciIsc3Ryb2tlT3BhY2l0eToiTGluZSBPcGFjaXR5IixoaXN0b2dyYW1CaW5Db3VudDoiQmluIGNvdW50Iixjb25uZWN0b3JMaW5lOiJDb25uZWN0b3IgTGluZSIsc2VyaWVzSXRlbXM6IlNlcmllcyBJdGVtcyIsc2VyaWVzSXRlbVR5cGU6Ikl0ZW0gVHlwZSIsc2VyaWVzSXRlbVBvc2l0aXZlOiJQb3NpdGl2ZSIsc2VyaWVzSXRlbU5lZ2F0aXZlOiJOZWdhdGl2ZSIsc2VyaWVzSXRlbUxhYmVsczoiSXRlbSBMYWJlbHMiLGNvbHVtbkdyb3VwOiJDb2x1bW4iLGJhckdyb3VwOiJCYXIiLHBpZUdyb3VwOiJQaWUiLGxpbmVHcm91cDoiTGluZSIsc2NhdHRlckdyb3VwOiJYIFkgKFNjYXR0ZXIpIixhcmVhR3JvdXA6IkFyZWEiLHBvbGFyR3JvdXA6IlBvbGFyIixzdGF0aXN0aWNhbEdyb3VwOiJTdGF0aXN0aWNhbCIsaGllcmFyY2hpY2FsR3JvdXA6IkhpZXJhcmNoaWNhbCIsc3BlY2lhbGl6ZWRHcm91cDoiU3BlY2lhbGl6ZWQiLGNvbWJpbmF0aW9uR3JvdXA6IkNvbWJpbmF0aW9uIixncm91cGVkQ29sdW1uVG9vbHRpcDoiR3JvdXBlZCIsc3RhY2tlZENvbHVtblRvb2x0aXA6IlN0YWNrZWQiLG5vcm1hbGl6ZWRDb2x1bW5Ub29sdGlwOiIxMDAlIFN0YWNrZWQiLGdyb3VwZWRCYXJUb29sdGlwOiJHcm91cGVkIixzdGFja2VkQmFyVG9vbHRpcDoiU3RhY2tlZCIsbm9ybWFsaXplZEJhclRvb2x0aXA6IjEwMCUgU3RhY2tlZCIscGllVG9vbHRpcDoiUGllIixkb251dFRvb2x0aXA6IkRvbnV0IixsaW5lVG9vbHRpcDoiTGluZSIsZ3JvdXBlZEFyZWFUb29sdGlwOiJBcmVhIixzdGFja2VkQXJlYVRvb2x0aXA6IlN0YWNrZWQiLG5vcm1hbGl6ZWRBcmVhVG9vbHRpcDoiMTAwJSBTdGFja2VkIixzY2F0dGVyVG9vbHRpcDoiU2NhdHRlciIsYnViYmxlVG9vbHRpcDoiQnViYmxlIixoaXN0b2dyYW1Ub29sdGlwOiJIaXN0b2dyYW0iLHJhZGlhbENvbHVtblRvb2x0aXA6IlJhZGlhbCBDb2x1bW4iLHJhZGlhbEJhclRvb2x0aXA6IlJhZGlhbCBCYXIiLHJhZGFyTGluZVRvb2x0aXA6IlJhZGFyIExpbmUiLHJhZGFyQXJlYVRvb2x0aXA6IlJhZGFyIEFyZWEiLG5pZ2h0aW5nYWxlVG9vbHRpcDoiTmlnaHRpbmdhbGUiLHJhbmdlQmFyVG9vbHRpcDoiUmFuZ2UgQmFyIixyYW5nZUFyZWFUb29sdGlwOiJSYW5nZSBBcmVhIixib3hQbG90VG9vbHRpcDoiQm94IFBsb3QiLHRyZWVtYXBUb29sdGlwOiJUcmVlbWFwIixzdW5idXJzdFRvb2x0aXA6IlN1bmJ1cnN0IixoZWF0bWFwVG9vbHRpcDoiSGVhdG1hcCIsd2F0ZXJmYWxsVG9vbHRpcDoiV2F0ZXJmYWxsIixjb2x1bW5MaW5lQ29tYm9Ub29sdGlwOiJDb2x1bW4gJiBMaW5lIixhcmVhQ29sdW1uQ29tYm9Ub29sdGlwOiJBcmVhICYgQ29sdW1uIixjdXN0b21Db21ib1Rvb2x0aXA6IkN1c3RvbSBDb21iaW5hdGlvbiIsaW5uZXJSYWRpdXM6IklubmVyIFJhZGl1cyIsc3RhcnRBbmdsZToiU3RhcnQgQW5nbGUiLGVuZEFuZ2xlOiJFbmQgQW5nbGUiLHJldmVyc2VEaXJlY3Rpb246IlJldmVyc2UgRGlyZWN0aW9uIixncm91cFBhZGRpbmc6Ikdyb3VwIFBhZGRpbmciLHNlcmllc1BhZGRpbmc6IlNlcmllcyBQYWRkaW5nIixncm91cDoiR3JvdXAiLHRpbGU6IlRpbGUiLHdoaXNrZXI6IldoaXNrZXIiLGNhcDoiQ2FwIixjYXBMZW5ndGhSYXRpbzoiTGVuZ3RoIFJhdGlvIixsYWJlbFBsYWNlbWVudDoiUGxhY2VtZW50IixpbnNpZGU6Ikluc2lkZSIsb3V0c2lkZToiT3V0c2lkZSIsbm9EYXRhVG9DaGFydDoiTm8gZGF0YSBhdmFpbGFibGUgdG8gYmUgY2hhcnRlZC4iLHBpdm90Q2hhcnRSZXF1aXJlc1Bpdm90TW9kZToiUGl2b3QgQ2hhcnQgcmVxdWlyZXMgUGl2b3QgTW9kZSBlbmFibGVkLiIsY2hhcnRTZXR0aW5nc1Rvb2xiYXJUb29sdGlwOiJNZW51IixjaGFydExpbmtUb29sYmFyVG9vbHRpcDoiTGlua2VkIHRvIEdyaWQiLGNoYXJ0VW5saW5rVG9vbGJhclRvb2x0aXA6IlVubGlua2VkIGZyb20gR3JpZCIsY2hhcnREb3dubG9hZFRvb2xiYXJUb29sdGlwOiJEb3dubG9hZCBDaGFydCIsaGlzdG9ncmFtRnJlcXVlbmN5OiJGcmVxdWVuY3kiLHNlcmllc0NoYXJ0VHlwZToiU2VyaWVzIENoYXJ0IFR5cGUiLHNlcmllc1R5cGU6IlNlcmllcyBUeXBlIixzZWNvbmRhcnlBeGlzOiJTZWNvbmRhcnkgQXhpcyJ9LHRzPUppPWVzKFtPYmplY3Qocy5CZWFuKSgiY2hhcnRUcmFuc2xhdGlvblNlcnZpY2UiKV0sdHMpO3ZhciBpcyxzcz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgcnM9aXM9Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie2ZpbHRlcihlLHQ9ITEpe2NvbnN0IGk9dGhpcy5ncmlkQXBpLmdldEZpbHRlck1vZGVsKCk7aWYodClyZXR1cm4gdm9pZCB0aGlzLnJlc2V0RmlsdGVycyhpKTtsZXQgcz1pcy5leHRyYWN0RmlsdGVyQ29sSWQoZSk7dGhpcy5pc1ZhbGlkQ29sdW1uRmlsdGVyKHMpP3RoaXMudXBkYXRlRmlsdGVycyhpLGUscyk6Y29uc29sZS53YXJuKCJBRyBHcmlkOiBjcm9zcyBmaWx0ZXJpbmcgcmVxdWlyZXMgYSAnYWdTZXRDb2x1bW5GaWx0ZXInIG9yICdhZ011bHRpQ29sdW1uRmlsdGVyJyB0byBiZSBkZWZpbmVkIG9uIHRoZSBjb2x1bW4gd2l0aCBpZDogJyIrcysiJyIpfXJlc2V0RmlsdGVycyhlKXtPYmplY3Qua2V5cyhlKS5sZW5ndGg+MCYmKHRoaXMuZ3JpZEFwaS5zZXRGaWx0ZXJNb2RlbChudWxsKSx0aGlzLmdyaWRBcGkub25GaWx0ZXJDaGFuZ2VkKCkpfXVwZGF0ZUZpbHRlcnMoZSx0LGkpe2xldCByPWlzLmV4dHJhY3RGaWx0ZXJDb2xJZCh0KSxvPXQuZGF0dW1bcl07aWYodm9pZCAwPT09bylyZXR1cm47bGV0IG49by50b1N0cmluZygpO2lmKHQuZXZlbnQubWV0YUtleXx8dC5ldmVudC5jdHJsS2V5KXtjb25zdCB0PXRoaXMuZ2V0Q3VycmVudEdyaWRWYWx1ZXNGb3JDYXRlZ29yeShpKTtsZXQgcjtzLl8uaW5jbHVkZXModCxuKT9yPXQuZmlsdGVyKGU9PmUhPT1uKToocj10LHIucHVzaChuKSksZVtpXT10aGlzLmdldFVwZGF0ZWRGaWx0ZXJNb2RlbChpLHIpfWVsc2V7Y29uc3QgdD1bbl07ZT17W2ldOnRoaXMuZ2V0VXBkYXRlZEZpbHRlck1vZGVsKGksdCl9fXRoaXMuZ3JpZEFwaS5zZXRGaWx0ZXJNb2RlbChlKX1nZXRVcGRhdGVkRmlsdGVyTW9kZWwoZSx0KXtyZXR1cm4iYWdNdWx0aUNvbHVtbkZpbHRlciI9PT10aGlzLmdldENvbHVtbkZpbHRlclR5cGUoZSk/e2ZpbHRlclR5cGU6Im11bHRpIixmaWx0ZXJNb2RlbHM6W251bGwse2ZpbHRlclR5cGU6InNldCIsdmFsdWVzOnR9XX06e2ZpbHRlclR5cGU6InNldCIsdmFsdWVzOnR9fWdldEN1cnJlbnRHcmlkVmFsdWVzRm9yQ2F0ZWdvcnkoZSl7bGV0IHQ9W107Y29uc3QgaT10aGlzLmdldENvbHVtbkJ5SWQoZSk7cmV0dXJuIHRoaXMuZ3JpZEFwaS5mb3JFYWNoTm9kZUFmdGVyRmlsdGVyKGU9PntpZihpJiYhZS5ncm91cCl7Y29uc3Qgcz10aGlzLnZhbHVlU2VydmljZS5nZXRWYWx1ZShpLGUpKyIiO3QuaW5jbHVkZXMocyl8fHQucHVzaChzKX19KSx0fXN0YXRpYyBleHRyYWN0RmlsdGVyQ29sSWQoZSl7cmV0dXJuIGUueEtleXx8ZS5jYWxsb3V0TGFiZWxLZXl9aXNWYWxpZENvbHVtbkZpbHRlcihlKXtlLmluZGV4T2YoIi1maWx0ZXJlZC1vdXQiKSYmKGU9ZS5yZXBsYWNlKCItZmlsdGVyZWQtb3V0IiwiIikpO2xldCB0PXRoaXMuZ2V0Q29sdW1uRmlsdGVyVHlwZShlKTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiB0P3Q6cy5fLmluY2x1ZGVzKFsiYWdTZXRDb2x1bW5GaWx0ZXIiLCJhZ011bHRpQ29sdW1uRmlsdGVyIl0sdCl9Z2V0Q29sdW1uRmlsdGVyVHlwZShlKXtsZXQgdD10aGlzLmdldENvbHVtbkJ5SWQoZSk7aWYodCl7cmV0dXJuIHQuZ2V0Q29sRGVmKCkuZmlsdGVyfX1nZXRDb2x1bW5CeUlkKGUpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldEdyaWRDb2x1bW4oZSl9fTtzcyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZ3JpZEFwaSIpXSxycy5wcm90b3R5cGUsImdyaWRBcGkiLHZvaWQgMCksc3MoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLHJzLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksc3MoW09iamVjdChzLkF1dG93aXJlZCkoInZhbHVlU2VydmljZSIpXSxycy5wcm90b3R5cGUsInZhbHVlU2VydmljZSIsdm9pZCAwKSxycz1pcz1zcyhbT2JqZWN0KHMuQmVhbikoImNoYXJ0Q3Jvc3NGaWx0ZXJTZXJ2aWNlIildLHJzKTt2YXIgb3M9aSg5KTtmdW5jdGlvbiBucyhlKXtyZXR1cm4gZSYmZS5tYXRjaCgvXGQrXC5cZCtcLlxkKy8pfWZ1bmN0aW9uIGFzKHt0eXBlOmUsZ3JpZFZlcnNpb246dCxjaGFydHNWZXJzaW9uOml9KXtjb25zdCBzPSJBRyBHcmlkOiBBRyBHcmlkIHZlcnNpb24gaXMgaW5jb21wYXRpYmxlLiBQbGVhc2Ugc2VlIGh0dHBzOi8vd3d3LmFnLWdyaWQuY29tL2phdmFzY3JpcHQtZGF0YS1ncmlkL21vZHVsZXMvIGZvciBtb3JlIGluZm9ybWF0aW9uLiI7aWYoIXQpcmV0dXJuIHM7Y29uc3Qgcj1mdW5jdGlvbihlKXtpZighZXx8IW5zKGUpKXJldHVybjtjb25zdFt0LGldPWUuc3BsaXQoIi4iKXx8W10scz1gJHt0fS4ke2l9LnhgLHI9cGFyc2VJbnQodCwxMCktMjgrNjtpZihyPDApcmV0dXJuO3JldHVybntncmlkTWFqb3JNaW5vcjpzLGNoYXJ0c01ham9yTWlub3I6YCR7cn0uJHtpfS54YH19KHQpO2lmKCFyKXJldHVybiBzO2NvbnN0e2dyaWRNYWpvck1pbm9yOm8sY2hhcnRzTWFqb3JNaW5vcjpufT1yO3JldHVybiJpbmNvbXBhdGlibGUiPT09ZT9gQUcgR3JpZCB2ZXJzaW9uICR7dH0gYW5kIEFHIENoYXJ0cyB2ZXJzaW9uICR7aX0gaXMgbm90IHN1cHBvcnRlZC4gQUcgR3JpZCB2ZXJzaW9uICR7b30gc2hvdWxkIGJlIHVzZWQgd2l0aCBBRyBDaGFydCAke259LiBQbGVhc2Ugc2VlIGh0dHBzOi8vd3d3LmFnLWdyaWQuY29tL2phdmFzY3JpcHQtZGF0YS1ncmlkL21vZHVsZXMvIGZvciBtb3JlIGluZm9ybWF0aW9uLmA6ImludmFsaWRDaGFydHMiPT09ZT9gQUcgR3JpZCB2ZXJzaW9uICR7b30gc2hvdWxkIGJlIHVzZWQgd2l0aCBBRyBDaGFydCAke259LiBQbGVhc2Ugc2VlIGh0dHBzOi8vd3d3LmFnLWdyaWQuY29tL2phdmFzY3JpcHQtZGF0YS1ncmlkL21vZHVsZXMvIGZvciBtb3JlIGluZm9ybWF0aW9uLmA6c31mdW5jdGlvbiBscyh7Z3JpZFZlcnNpb246ZSxjaGFydHNWZXJzaW9uOnR9KXtpZighbnModCkpcmV0dXJue2lzVmFsaWQ6ITEsbWVzc2FnZTphcyh7dHlwZToiaW52YWxpZENoYXJ0cyIsZ3JpZFZlcnNpb246ZSxjaGFydHNWZXJzaW9uOnR9KX07aWYoIW5zKGUpKXJldHVybntpc1ZhbGlkOiExLG1lc3NhZ2U6YXMoe3R5cGU6ImludmFsaWRHcmlkIixncmlkVmVyc2lvbjplLGNoYXJ0c1ZlcnNpb246dH0pfTtjb25zdFtpLHNdPWUuc3BsaXQoIi4iKXx8W10sW3Isb109dC5zcGxpdCgiLiIpfHxbXSxuPWZ1bmN0aW9uKHtncmlkTWFqb3JWZXJzaW9uOmUsY2hhcnRzTWFqb3JWZXJzaW9uOnR9KXtjb25zdCBpPXBhcnNlSW50KGUsMTApLTI4O3JldHVybiBpPT09cGFyc2VJbnQodCwxMCktNiYmaT49MH0oe2dyaWRNYWpvclZlcnNpb246aSxjaGFydHNNYWpvclZlcnNpb246cn0pO3JldHVybiBuJiZzPT09bz97aXNWYWxpZDohMH06biYmcz09PW8/e2lzVmFsaWQ6ITEsbWVzc2FnZTphcyh7dHlwZToiaW52YWxpZCIsZ3JpZFZlcnNpb246ZSxjaGFydHNWZXJzaW9uOnR9KX06e2lzVmFsaWQ6ITEsbWVzc2FnZTphcyh7dHlwZToiaW5jb21wYXRpYmxlIixncmlkVmVyc2lvbjplLGNoYXJ0c1ZlcnNpb246dH0pfX1jb25zdCBkcz17dmVyc2lvbjoiMzEuMS4xIix2YWxpZGF0ZTooKT0+bHMoe2dyaWRWZXJzaW9uOiIzMS4xLjEiLGNoYXJ0c1ZlcnNpb246UWkuQ0hBUlRTX1ZFUlNJT059KSxtb2R1bGVOYW1lOnMuTW9kdWxlTmFtZXMuR3JpZENoYXJ0c01vZHVsZSxiZWFuczpbUWksdHMscnNdLGFnU3RhY2tDb21wb25lbnRzOlt7Y29tcG9uZW50TmFtZToiQWdDb2xvclBpY2tlciIsY29tcG9uZW50Q2xhc3M6Q2V9LHtjb21wb25lbnROYW1lOiJBZ0FuZ2xlU2VsZWN0Iixjb21wb25lbnRDbGFzczpxfV0sZGVwZW5kYW50TW9kdWxlczpbb3MuUmFuZ2VTZWxlY3Rpb25Nb2R1bGUsci5FbnRlcnByaXNlQ29yZU1vZHVsZV19O2kuZCh0LCJhZ0NoYXJ0cyIsKGZ1bmN0aW9uKCl7cmV0dXJuIGNzfSkpLGkuZCh0LCJHcmlkQ2hhcnRzTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gZHN9KSksaS5kKHQsIl9fRk9SQ0VfTU9EVUxFX0RFVEVDVElPTl9BR19HUklEX0NPUkVfRVhUIiwoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKSxpLmQodCwiQWdDaGFydCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uYX0pKSxpLmQodCwiQWdDaGFydHMiLChmdW5jdGlvbigpe3JldHVybiBvLmJ9KSksaS5kKHQsIkFnRXJyb3JCYXJTdXBwb3J0ZWRTZXJpZXNUeXBlcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uY30pKSxpLmQodCwiQWdUb29sdGlwUG9zaXRpb25UeXBlIiwoZnVuY3Rpb24oKXtyZXR1cm4gby5kfSkpLGkuZCh0LCJNYXJrZXIiLChmdW5jdGlvbigpe3JldHVybiBvLmV9KSksaS5kKHQsIlZFUlNJT04iLChmdW5jdGlvbigpe3JldHVybiBvLmZ9KSksaS5kKHQsIl9Nb2R1bGVTdXBwb3J0IiwoZnVuY3Rpb24oKXtyZXR1cm4gby5nfSkpLGkuZCh0LCJfU2NhbGUiLChmdW5jdGlvbigpe3JldHVybiBvLmh9KSksaS5kKHQsIl9TY2VuZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uaX0pKSxpLmQodCwiX1RoZW1lIiwoZnVuY3Rpb24oKXtyZXR1cm4gby5qfSkpLGkuZCh0LCJfVXRpbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8ua30pKSxpLmQodCwiX19GT1JDRV9NT0RVTEVfREVURUNUSU9OIiwoZnVuY3Rpb24oKXtyZXR1cm4gby5sfSkpLGkuZCh0LCJ0aW1lIiwoZnVuY3Rpb24oKXtyZXR1cm4gby5tfSkpO2NvbnN0IGNzPXt0aW1lOm8ubSxBZ0NoYXJ0Om8uYX19LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpO3ZhciBzPWkoMCkscj1pKDMpO3ZhciBvPXtnZXRUZW1wbGF0ZShlKXtjb25zdCB0PShuZXcgRGF0ZSkudG9KU09OKCk7cmV0dXJue25hbWU6ImNwOmNvcmVQcm9wZXJ0aWVzIixwcm9wZXJ0aWVzOntwcmVmaXhlZEF0dHJpYnV0ZXM6W3twcmVmaXg6InhtbG5zOiIsbWFwOntjcDoiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9tZXRhZGF0YS9jb3JlLXByb3BlcnRpZXMiLGRjOiJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIsZGN0ZXJtczoiaHR0cDovL3B1cmwub3JnL2RjL3Rlcm1zLyIsZGNtaXR5cGU6Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS8iLHhzaToiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UifX1dfSxjaGlsZHJlbjpbe25hbWU6ImRjOmNyZWF0b3IiLHRleHROb2RlOmV9LHtuYW1lOiJkYzp0aXRsZSIsdGV4dE5vZGU6Ildvcmtib29rIn0se25hbWU6ImRjdGVybXM6Y3JlYXRlZCIscHJvcGVydGllczp7cmF3TWFwOnsieHNpOnR5cGUiOiJkY3Rlcm1zOlczQ0RURiJ9fSx0ZXh0Tm9kZTp0fSx7bmFtZToiZGN0ZXJtczptb2RpZmllZCIscHJvcGVydGllczp7cmF3TWFwOnsieHNpOnR5cGUiOiJkY3Rlcm1zOlczQ0RURiJ9fSx0ZXh0Tm9kZTp0fV19fX07dmFyIG49e2dldFRlbXBsYXRlKGUpe2NvbnN0e25hbWU6dCxDb250ZW50VHlwZTppLEV4dGVuc2lvbjpzLFBhcnROYW1lOnJ9PWU7cmV0dXJue25hbWU6dCxwcm9wZXJ0aWVzOntyYXdNYXA6e0V4dGVuc2lvbjpzLFBhcnROYW1lOnIsQ29udGVudFR5cGU6aX19fX19O3ZhciBhPXtnZXRUZW1wbGF0ZShlKXtjb25zdCB0PW5ldyBBcnJheShlKS5maWxsKHZvaWQgMCkubWFwKChlLHQpPT4oe25hbWU6Ik92ZXJyaWRlIixDb250ZW50VHlwZToiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwud29ya3NoZWV0K3htbCIsUGFydE5hbWU6YC94bC93b3Jrc2hlZXRzL3NoZWV0JHt0KzF9LnhtbGB9KSksaT1WZS53b3Jrc2hlZXRJbWFnZXMuc2l6ZSxzPXt9O1ZlLndvcmtib29rSW1hZ2VJZHMuZm9yRWFjaChlPT57c1tlLnR5cGVdPSEwfSk7Y29uc3Qgcj1uZXcgQXJyYXkoaSkuZmlsbCh2b2lkIDApLm1hcCgoZSx0KT0+KHtuYW1lOiJPdmVycmlkZSIsQ29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5kcmF3aW5nK3htbCIsUGFydE5hbWU6YC94bC9kcmF3aW5ncy9kcmF3aW5nJHt0KzF9LnhtbGB9KSk7cmV0dXJue25hbWU6IlR5cGVzIixwcm9wZXJ0aWVzOntyYXdNYXA6e3htbG5zOiJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L2NvbnRlbnQtdHlwZXMifX0sY2hpbGRyZW46Wy4uLk9iamVjdC5rZXlzKHMpLm1hcChlPT4oe25hbWU6IkRlZmF1bHQiLENvbnRlbnRUeXBlOiJpbWFnZS8iK2UsRXh0ZW5zaW9uOmV9KSkse25hbWU6IkRlZmF1bHQiLEV4dGVuc2lvbjoicmVscyIsQ29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1wYWNrYWdlLnJlbGF0aW9uc2hpcHMreG1sIn0se25hbWU6IkRlZmF1bHQiLENvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94bWwiLEV4dGVuc2lvbjoieG1sIn0se25hbWU6Ik92ZXJyaWRlIixDb250ZW50VHlwZToiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQubWFpbit4bWwiLFBhcnROYW1lOiIveGwvd29ya2Jvb2sueG1sIn0sLi4udCx7bmFtZToiT3ZlcnJpZGUiLENvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQudGhlbWUreG1sIixQYXJ0TmFtZToiL3hsL3RoZW1lL3RoZW1lMS54bWwifSx7bmFtZToiT3ZlcnJpZGUiLENvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zdHlsZXMreG1sIixQYXJ0TmFtZToiL3hsL3N0eWxlcy54bWwifSx7bmFtZToiT3ZlcnJpZGUiLENvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGFyZWRTdHJpbmdzK3htbCIsUGFydE5hbWU6Ii94bC9zaGFyZWRTdHJpbmdzLnhtbCJ9LC4uLnIse25hbWU6Ik92ZXJyaWRlIixDb250ZW50VHlwZToiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLXBhY2thZ2UuY29yZS1wcm9wZXJ0aWVzK3htbCIsUGFydE5hbWU6Ii9kb2NQcm9wcy9jb3JlLnhtbCJ9XS5tYXAoZT0+bi5nZXRUZW1wbGF0ZShlKSl9fX0sbD1pKDIpO2NvbnN0IGQ9ezA6MSwiMC4wMCI6MiwiIywjIzAiOjMsIiMsIyMwLjAwIjo0LCIwJSI6OSwiMC4wMCUiOjEwLCIwLjAwRSswMCI6MTEsIiMgPy8/IjoxMiwiIyA/Py8/PyI6MTMsIm1tLWRkLXl5IjoxNCwiZC1tbW0teXkiOjE1LCJkLW1tbSI6MTYsIm1tbS15eSI6MTcsImg6bW0gQU0vUE0iOjE4LCJoOm1tOnNzIEFNL1BNIjoxOSwiaDptbSI6MjAsImg6bW06c3MiOjIxLCJtL2QveXkgaDptbSI6MjIsIiMsIyMwIDsoIywjIzApIjozNywiIywjIzAgO1tSZWRdKCMsIyMwKSI6MzgsIiMsIyMwLjAwOygjLCMjMC4wMCkiOjM5LCIjLCMjMC4wMDtbUmVkXSgjLCMjMC4wMCkiOjQwLCJtbTpzcyI6NDUsIltoXTptbTpzcyI6NDYsIm1tc3MuMCI6NDcsIiMjMC4wRSswIjo0OCwiQCI6NDl9LGM9ZT0+TWF0aC5jZWlsKDk1MjUqZSksaD0oZSx0KT0+e2lmKCF0KXJldHVybjtsZXQgaTtpZigibnVtYmVyIj09dHlwZW9mIHQpaT10O2Vsc2V7aT10KHtyb3dJbmRleDplfSl9cmV0dXJuIHM9aSxNYXRoLnJvdW5kKDcyKnMvOTYpO3ZhciBzfSx1PWU9PmAke2wuWG1sRmFjdG9yeS5jcmVhdGVIZWFkZXIoe2VuY29kaW5nOiJVVEYtOCIsc3RhbmRhbG9uZToieWVzIn0pfSR7bC5YbWxGYWN0b3J5LmNyZWF0ZVhtbChlKX1gLHA9ZT0+e2NvbnN0IHQ9U3RyaW5nLmZyb21DaGFyQ29kZSxpPU1hdGguZmxvb3IoZS8yNikscz1lJTI2O3JldHVybiBpJiYyNiE9PWU/cz9pPDI2P3QoNjUraS0xKSt0KDY1K3MtMSk6cChpKSt0KDY1K3MtMSk6cChpLTEpKyJaIjp0KDY1K2UtMSl9LGc9KGUsdCk9Pih7bmFtZToieGRyOiIrZSxjaGlsZHJlbjpbe25hbWU6Inhkcjpjb2wiLHRleHROb2RlOnQuY29sLnRvU3RyaW5nKCl9LHtuYW1lOiJ4ZHI6Y29sT2ZmIix0ZXh0Tm9kZTp0Lm9mZnNldFgudG9TdHJpbmcoKX0se25hbWU6Inhkcjpyb3ciLHRleHROb2RlOnQucm93LnRvU3RyaW5nKCl9LHtuYW1lOiJ4ZHI6cm93T2ZmIix0ZXh0Tm9kZTp0Lm9mZnNldFkudG9TdHJpbmcoKX1dfSksbT1lPT57Y29uc3QgdD1be25hbWU6ImE6ZXh0Iixwcm9wZXJ0aWVzOntyYXdNYXA6e3VyaToie0ZGMkI1RUY0LUZGRjItNDBCNC1CRTQ5LUYyMzhFMjdGQzIzNn0ifX0sY2hpbGRyZW46W3tuYW1lOiJhMTY6Y3JlYXRpb25JZCIscHJvcGVydGllczp7cmF3TWFwOntpZDoiezgyMkU2RDIwLUQ3QkMtMjg0MS1BNjQzLUQ0OUE2RUYwMDhBMn0iLCJ4bWxuczphMTYiOiJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS9kcmF3aW5nLzIwMTQvbWFpbiJ9fX1dfV07c3dpdGNoKGUucmVjb2xvciYmZS5yZWNvbG9yLnRvTG93ZXJDYXNlKCkpe2Nhc2UiZ3JheXNjYWxlIjpjYXNlInNlcGlhIjpjYXNlIndhc2hvdXQiOnQucHVzaCh7bmFtZToiYTpleHQiLHByb3BlcnRpZXM6e3Jhd01hcDp7dXJpOiJ7QzE4M0Q3RjYtQjQ5OC00M0IzLTk0OEItMTcyOEI1MkFBNkU0fSJ9fSxjaGlsZHJlbjpbe25hbWU6ImFkZWM6ZGVjb3JhdGl2ZSIscHJvcGVydGllczp7cmF3TWFwOnt2YWw6IjAiLCJ4bWxuczphZGVjIjoiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2UvZHJhd2luZy8yMDE3L2RlY29yYXRpdmUifX19XX0pfXJldHVybntuYW1lOiJhOmV4dExzdCIsY2hpbGRyZW46dH19LGY9KGUsdCk9Pih7bmFtZToieGRyOm52UGljUHIiLGNoaWxkcmVuOlt7bmFtZToieGRyOmNOdlByIixwcm9wZXJ0aWVzOntyYXdNYXA6e2lkOnQsbmFtZTplLmlkLGRlc2NyOm51bGwhPWUuYWx0VGV4dD9lLmFsdFRleHQ6dm9pZCAwfX0sY2hpbGRyZW46W20oZSldfSx7bmFtZToieGRyOmNOdlBpY1ByIixwcm9wZXJ0aWVzOntyYXdNYXA6e3ByZWZlclJlbGF0aXZlUmVzaXplOiIwIn19LGNoaWxkcmVuOlt7bmFtZToiYTpwaWNMb2NrcyJ9XX1dfSksdj1lPT57aWYoIWUuc2F0dXJhdGlvbiYmIWUudGludClyZXR1cm47Y29uc3QgdD1bXTtyZXR1cm4gZS5zYXR1cmF0aW9uJiZ0LnB1c2goe25hbWU6ImE6c2F0TW9kIixwcm9wZXJ0aWVzOntyYXdNYXA6e3ZhbDoxZTMqZS5zYXR1cmF0aW9ufX19KSxlLnRpbnQmJnQucHVzaCh7bmFtZToiYTp0aW50Iixwcm9wZXJ0aWVzOntyYXdNYXA6e3ZhbDoxZTMqZS50aW50fX19KSx0fSxDPShlLHQpPT57bGV0IGk7aWYoZS50cmFuc3BhcmVuY3kpe2NvbnN0IHQ9TWF0aC5taW4oTWF0aC5tYXgoZS50cmFuc3BhcmVuY3ksMCksMTAwKTtpPVt7bmFtZToiYTphbHBoYU1vZEZpeCIscHJvcGVydGllczp7cmF3TWFwOnthbXQ6MWU1LU1hdGgucm91bmQoMWUzKnQpfX19XX1pZihlLnJlY29sb3Ipc3dpdGNoKGl8fChpPVtdKSxlLnJlY29sb3IudG9Mb2NhbGVMb3dlckNhc2UoKSl7Y2FzZSJncmF5c2NhbGUiOmkucHVzaCh7bmFtZToiYTpncmF5c2NsIn0pO2JyZWFrO2Nhc2Uic2VwaWEiOmkucHVzaCgocj17Y29sb3I6IkQ5QzNBNSIsdGludDo1MCxzYXR1cmF0aW9uOjE4MH0se25hbWU6ImE6ZHVvdG9uZSIsY2hpbGRyZW46W3tuYW1lOiJhOnByc3RDbHIiLHByb3BlcnRpZXM6e3Jhd01hcDp7dmFsOihzPXtjb2xvcjoiYmxhY2sifSkuY29sb3J9fSxjaGlsZHJlbjp2KHMpfSx7bmFtZToiYTpzcmdiQ2xyIixwcm9wZXJ0aWVzOntyYXdNYXA6e3ZhbDpyLmNvbG9yfX0sY2hpbGRyZW46dihyKX1dfSkpO2JyZWFrO2Nhc2Uid2FzaG91dCI6aS5wdXNoKHtuYW1lOiJhOmx1bSIscHJvcGVydGllczp7cmF3TWFwOnticmlnaHQ6IjcwMDAwIixjb250cmFzdDoiLTcwMDAwIn19fSl9dmFyIHMscjtyZXR1cm57bmFtZToieGRyOmJsaXBGaWxsIixjaGlsZHJlbjpbe25hbWU6ImE6YmxpcCIscHJvcGVydGllczp7cmF3TWFwOntjc3RhdGU6InByaW50IiwicjplbWJlZCI6InJJZCIrdCwieG1sbnM6ciI6Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMifX0sY2hpbGRyZW46aX0se25hbWU6ImE6c3RyZXRjaCIsY2hpbGRyZW46W3tuYW1lOiJhOmZpbGxSZWN0In1dfV19fSx5PShlLHQpPT57Y29uc3QgaT17bmFtZToiYTp4ZnJtIixjaGlsZHJlbjpbe25hbWU6ImE6b2ZmIixwcm9wZXJ0aWVzOntyYXdNYXA6e3g6MCx5OjB9fX0se25hbWU6ImE6ZXh0Iixwcm9wZXJ0aWVzOntyYXdNYXA6e2N4OnQud2lkdGgsY3k6dC5oZWlnaHR9fX1dfTtpZihlLnJvdGF0aW9uKXtjb25zdCB0PWUucm90YXRpb247aS5wcm9wZXJ0aWVzPXtyYXdNYXA6e3JvdDo2ZTQqTWF0aC5taW4oTWF0aC5tYXgodCwwKSwzNjApfX19cmV0dXJue25hbWU6InhkcjpzcFByIixjaGlsZHJlbjpbaSx7bmFtZToiYTpwcnN0R2VvbSIscHJvcGVydGllczp7cmF3TWFwOntwcnN0OiJyZWN0In19LGNoaWxkcmVuOlt7bmFtZToiYTphdkxzdCJ9XX1dfX0sUz0oZSx0LGkscyk9Pih7bmFtZToieGRyOnBpYyIsY2hpbGRyZW46W2YoZSx0KzEpLEMoZSxpKzEpLHkoZSxzKV19KTt2YXIgdz17Z2V0VGVtcGxhdGUoZSl7Y29uc3R7c2hlZXRJbmRleDp0fT1lLGk9VmUud29ya3NoZWV0SW1hZ2VzLmdldCh0KSxzPVZlLndvcmtzaGVldEltYWdlSWRzLmdldCh0KTtyZXR1cm57bmFtZToieGRyOndzRHIiLHByb3BlcnRpZXM6e3Jhd01hcDp7InhtbG5zOmEiOiJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvZHJhd2luZ21sLzIwMDYvbWFpbiIsInhtbG5zOnhkciI6Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9kcmF3aW5nbWwvMjAwNi9zcHJlYWRzaGVldERyYXdpbmcifX0sY2hpbGRyZW46aS5tYXAoKGUsdCk9Pntjb25zdCBpPShlPT57ZS5maXRDZWxsPSEhZS5maXRDZWxsfHwhZS53aWR0aHx8IWUuaGVpZ2h0O2NvbnN0e3Bvc2l0aW9uOnQ9e30sZml0Q2VsbDppLHdpZHRoOnM9MCxoZWlnaHQ6cj0wLHRvdGFsSGVpZ2h0Om8sdG90YWxXaWR0aDpufT1lLHtvZmZzZXRYOmE9MCxvZmZzZXRZOmw9MCxyb3c6ZD0xLHJvd1NwYW46aD0xLGNvbHVtbjp1PTEsY29sU3BhbjpwPTF9PXQ7cmV0dXJue2Zyb206e3JvdzpkLTEsY29sOnUtMSxvZmZzZXRYOmMoYSksb2Zmc2V0WTpjKGwpfSx0bzp7cm93OmQtMSsoaT8xOmgtMSksY29sOnUtMSsoaT8xOnAtMSksb2Zmc2V0WDpjKHMrYSksb2Zmc2V0WTpjKHIrbCl9LGhlaWdodDpjKG98fHIpLHdpZHRoOmMobnx8cyl9fSkoZSk7cmV0dXJue25hbWU6Inhkcjp0d29DZWxsQW5jaG9yIixwcm9wZXJ0aWVzOntyYXdNYXA6e2VkaXRBczoiYWJzb2x1dGUifX0sY2hpbGRyZW46W2coImZyb20iLGkuZnJvbSksZygidG8iLGkudG8pLFMoZSx0LHMuZ2V0KGUuaWQpLmluZGV4LGkpLHtuYW1lOiJ4ZHI6Y2xpZW50RGF0YSJ9XX19KX19fTtjb25zdCBiPWU9Pntjb25zdFt0LGkscyxyXT1lO3JldHVybntuYW1lOiJhOiIrdCxjaGlsZHJlbjpbe25hbWU6ImE6IitpLHByb3BlcnRpZXM6e3Jhd01hcDp7dmFsOnMsbGFzdENscjpyfX19XX19O3ZhciBFPXtnZXRUZW1wbGF0ZTooKT0+KHtuYW1lOiJhOmNsclNjaGVtZSIscHJvcGVydGllczp7cmF3TWFwOntuYW1lOiJPZmZpY2UifX0sY2hpbGRyZW46W2IoWyJkazEiLCJzeXNDbHIiLCJ3aW5kb3dUZXh0IiwiMDAwMDAwIl0pLGIoWyJsdDEiLCJzeXNDbHIiLCJ3aW5kb3ciLCJGRkZGRkYiXSksYihbImRrMiIsInNyZ2JDbHIiLCI0NDU0NkEiXSksYihbImx0MiIsInNyZ2JDbHIiLCJFN0U2RTYiXSksYihbImFjY2VudDEiLCJzcmdiQ2xyIiwiNDQ3MkM0Il0pLGIoWyJhY2NlbnQyIiwic3JnYkNsciIsIkVEN0QzMSJdKSxiKFsiYWNjZW50MyIsInNyZ2JDbHIiLCJBNUE1QTUiXSksYihbImFjY2VudDQiLCJzcmdiQ2xyIiwiRkZDMDAwIl0pLGIoWyJhY2NlbnQ1Iiwic3JnYkNsciIsIjVCOUJENSJdKSxiKFsiYWNjZW50NiIsInNyZ2JDbHIiLCI3MEFENDciXSksYihbImhsaW5rIiwic3JnYkNsciIsIjA1NjNDMSJdKSxiKFsiZm9sSGxpbmsiLCJzcmdiQ2xyIiwiOTU0RjcyIl0pXX0pfTtjb25zdCBSPWU9Pntjb25zdFt0LGkscyxyXT1lO3JldHVybntuYW1lOiJhOiIrdCxwcm9wZXJ0aWVzOntyYXdNYXA6e3NjcmlwdDpzLHR5cGVmYWNlOmkscGFub3NlOnJ9fX19O3ZhciB4PXtnZXRUZW1wbGF0ZTooKT0+KHtuYW1lOiJhOmZvbnRTY2hlbWUiLHByb3BlcnRpZXM6e3Jhd01hcDp7bmFtZToiT2ZmaWNlIn19LGNoaWxkcmVuOlt7bmFtZToiYTptYWpvckZvbnQiLGNoaWxkcmVuOltSKFsibGF0aW4iLCJDYWxpYnJpIExpZ2h0Iix2b2lkIDAsIjAyMEYwMzAyMDIwMjA0MDMwMjA0Il0pLFIoWyJlYSIsIiJdKSxSKFsiY3MiLCIiXSksUihbImZvbnQiLCLmuLjjgrTjgrfjg4Pjgq8gTGlnaHQiLCJKcGFuIl0pLFIoWyJmb250Iiwi66eR7J2AIOqzoOuUlSIsIkhhbmciXSksUihbImZvbnQiLCLnrYnnur8gTGlnaHQiLCJIYW5zIl0pLFIoWyJmb250Iiwi5paw57Sw5piO6auUIiwiSGFudCJdKSxSKFsiZm9udCIsIlRpbWVzIE5ldyBSb21hbiIsIkFyYWIiXSksUihbImZvbnQiLCJUaW1lcyBOZXcgUm9tYW4iLCJIZWJyIl0pLFIoWyJmb250IiwiVGFob21hIiwiVGhhaSJdKSxSKFsiZm9udCIsIk55YWxhIiwiRXRoaSJdKSxSKFsiZm9udCIsIlZyaW5kYSIsIkJlbmciXSksUihbImZvbnQiLCJTaHJ1dGkiLCJHdWpyIl0pLFIoWyJmb250IiwiTW9vbEJvcmFuIiwiS2htciJdKSxSKFsiZm9udCIsIlR1bmdhIiwiS25kYSJdKSxSKFsiZm9udCIsIlJhYXZpIiwiR3VydSJdKSxSKFsiZm9udCIsIkV1cGhlbWlhIiwiQ2FucyJdKSxSKFsiZm9udCIsIlBsYW50YWdlbmV0IENoZXJva2VlIiwiQ2hlciJdKSxSKFsiZm9udCIsIk1pY3Jvc29mdCBZaSBCYWl0aSIsIllpaWkiXSksUihbImZvbnQiLCJNaWNyb3NvZnQgSGltYWxheWEiLCJUaWJ0Il0pLFIoWyJmb250IiwiTVYgQm9saSIsIlRoYWEiXSksUihbImZvbnQiLCJNYW5nYWwiLCJEZXZhIl0pLFIoWyJmb250IiwiR2F1dGFtaSIsIlRlbHUiXSksUihbImZvbnQiLCJMYXRoYSIsIlRhbWwiXSksUihbImZvbnQiLCJFc3RyYW5nZWxvIEVkZXNzYSIsIlN5cmMiXSksUihbImZvbnQiLCJLYWxpbmdhIiwiT3J5YSJdKSxSKFsiZm9udCIsIkthcnRpa2EiLCJNbHltIl0pLFIoWyJmb250IiwiRG9rQ2hhbXBhIiwiTGFvbyJdKSxSKFsiZm9udCIsIklza29vbGEgUG90YSIsIlNpbmgiXSksUihbImZvbnQiLCJNb25nb2xpYW4gQmFpdGkiLCJNb25nIl0pLFIoWyJmb250IiwiVGltZXMgTmV3IFJvbWFuIiwiVmlldCJdKSxSKFsiZm9udCIsIk1pY3Jvc29mdCBVaWdodXIiLCJVaWdoIl0pLFIoWyJmb250IiwiU3lsZmFlbiIsIkdlb3IiXSksUihbImZvbnQiLCJBcmlhbCIsIkFybW4iXSksUihbImZvbnQiLCJMZWVsYXdhZGVlIFVJIiwiQnVnaSJdKSxSKFsiZm9udCIsIk1pY3Jvc29mdCBKaGVuZ0hlaSIsIkJvcG8iXSksUihbImZvbnQiLCJKYXZhbmVzZSBUZXh0IiwiSmF2YSJdKSxSKFsiZm9udCIsIlNlZ29lIFVJIiwiTGlzdSJdKSxSKFsiZm9udCIsIk15YW5tYXIgVGV4dCIsIk15bXIiXSksUihbImZvbnQiLCJFYnJpbWEiLCJOa29vIl0pLFIoWyJmb250IiwiTmlybWFsYSBVSSIsIk9sY2siXSksUihbImZvbnQiLCJFYnJpbWEiLCJPc21hIl0pLFIoWyJmb250IiwiUGhhZ3NwYSIsIlBoYWciXSksUihbImZvbnQiLCJFc3RyYW5nZWxvIEVkZXNzYSIsIlN5cm4iXSksUihbImZvbnQiLCJFc3RyYW5nZWxvIEVkZXNzYSIsIlN5cmoiXSksUihbImZvbnQiLCJFc3RyYW5nZWxvIEVkZXNzYSIsIlN5cmUiXSksUihbImZvbnQiLCJOaXJtYWxhIFVJIiwiU29yYSJdKSxSKFsiZm9udCIsIk1pY3Jvc29mdCBUYWkgTGUiLCJUYWxlIl0pLFIoWyJmb250IiwiTWljcm9zb2Z0IE5ldyBUYWkgTHVlIiwiVGFsdSJdKSxSKFsiZm9udCIsIkVicmltYSIsIlRmbmciXSldfSx7bmFtZToiYTptaW5vckZvbnQiLGNoaWxkcmVuOltSKFsibGF0aW4iLCJDYWxpYnJpIix2b2lkIDAsIjAyMEYwNTAyMDIwMjA0MDMwMjA0Il0pLFIoWyJlYSIsIiJdKSxSKFsiY3MiLCIiXSksUihbImZvbnQiLCLmuLjjgrTjgrfjg4Pjgq8iLCJKcGFuIl0pLFIoWyJmb250Iiwi66eR7J2AIOqzoOuUlSIsIkhhbmciXSksUihbImZvbnQiLCLnrYnnur8iLCJIYW5zIl0pLFIoWyJmb250Iiwi5paw57Sw5piO6auUIiwiSGFudCJdKSxSKFsiZm9udCIsIkFyaWFsIiwiQXJhYiJdKSxSKFsiZm9udCIsIkFyaWFsIiwiSGViciJdKSxSKFsiZm9udCIsIlRhaG9tYSIsIlRoYWkiXSksUihbImZvbnQiLCJOeWFsYSIsIkV0aGkiXSksUihbImZvbnQiLCJWcmluZGEiLCJCZW5nIl0pLFIoWyJmb250IiwiU2hydXRpIiwiR3VqciJdKSxSKFsiZm9udCIsIkRhdW5QZW5oIiwiS2htciJdKSxSKFsiZm9udCIsIlR1bmdhIiwiS25kYSJdKSxSKFsiZm9udCIsIlJhYXZpIiwiR3VydSJdKSxSKFsiZm9udCIsIkV1cGhlbWlhIiwiQ2FucyJdKSxSKFsiZm9udCIsIlBsYW50YWdlbmV0IENoZXJva2VlIiwiQ2hlciJdKSxSKFsiZm9udCIsIk1pY3Jvc29mdCBZaSBCYWl0aSIsIllpaWkiXSksUihbImZvbnQiLCJNaWNyb3NvZnQgSGltYWxheWEiLCJUaWJ0Il0pLFIoWyJmb250IiwiTVYgQm9saSIsIlRoYWEiXSksUihbImZvbnQiLCJNYW5nYWwiLCJEZXZhIl0pLFIoWyJmb250IiwiR2F1dGFtaSIsIlRlbHUiXSksUihbImZvbnQiLCJMYXRoYSIsIlRhbWwiXSksUihbImZvbnQiLCJFc3RyYW5nZWxvIEVkZXNzYSIsIlN5cmMiXSksUihbImZvbnQiLCJLYWxpbmdhIiwiT3J5YSJdKSxSKFsiZm9udCIsIkthcnRpa2EiLCJNbHltIl0pLFIoWyJmb250IiwiRG9rQ2hhbXBhIiwiTGFvbyJdKSxSKFsiZm9udCIsIklza29vbGEgUG90YSIsIlNpbmgiXSksUihbImZvbnQiLCJNb25nb2xpYW4gQmFpdGkiLCJNb25nIl0pLFIoWyJmb250IiwiQXJpYWwiLCJWaWV0Il0pLFIoWyJmb250IiwiTWljcm9zb2Z0IFVpZ2h1ciIsIlVpZ2giXSksUihbImZvbnQiLCJTeWxmYWVuIiwiR2VvciJdKSxSKFsiZm9udCIsIkFyaWFsIiwiQXJtbiJdKSxSKFsiZm9udCIsIkxlZWxhd2FkZWUgVUkiLCJCdWdpIl0pLFIoWyJmb250IiwiTWljcm9zb2Z0IEpoZW5nSGVpIiwiQm9wbyJdKSxSKFsiZm9udCIsIkphdmFuZXNlIFRleHQiLCJKYXZhIl0pLFIoWyJmb250IiwiU2Vnb2UgVUkiLCJMaXN1Il0pLFIoWyJmb250IiwiTXlhbm1hciBUZXh0IiwiTXltciJdKSxSKFsiZm9udCIsIkVicmltYSIsIk5rb28iXSksUihbImZvbnQiLCJOaXJtYWxhIFVJIiwiT2xjayJdKSxSKFsiZm9udCIsIkVicmltYSIsIk9zbWEiXSksUihbImZvbnQiLCJQaGFnc3BhIiwiUGhhZyJdKSxSKFsiZm9udCIsIkVzdHJhbmdlbG8gRWRlc3NhIiwiU3lybiJdKSxSKFsiZm9udCIsIkVzdHJhbmdlbG8gRWRlc3NhIiwiU3lyaiJdKSxSKFsiZm9udCIsIkVzdHJhbmdlbG8gRWRlc3NhIiwiU3lyZSJdKSxSKFsiZm9udCIsIk5pcm1hbGEgVUkiLCJTb3JhIl0pLFIoWyJmb250IiwiTWljcm9zb2Z0IFRhaSBMZSIsIlRhbGUiXSksUihbImZvbnQiLCJNaWNyb3NvZnQgTmV3IFRhaSBMdWUiLCJUYWx1Il0pLFIoWyJmb250IiwiRWJyaW1hIiwiVGZuZyJdKV19XX0pfTtjb25zdCBUPShlLHQsaSk9Pih7bmFtZToiYToiK2UscHJvcGVydGllczp7cmF3TWFwOnt2YWw6dH19LGNoaWxkcmVuOml9KSxEPWU9Pntjb25zdFt0LGkscyxyLG8sbl09ZSxhPVtdO3JldHVybiBhLnB1c2goVCgic2F0TW9kIixzKSksciYmYS5wdXNoKFQoImx1bU1vZCIscikpLG8mJmEucHVzaChUKCJ0aW50IixvKSksbiYmYS5wdXNoKFQoInNoYWRlIixuKSkse25hbWU6ImE6Z3MiLHByb3BlcnRpZXM6e3Jhd01hcDp7cG9zOnR9fSxjaGlsZHJlbjpbe25hbWU6ImE6c2NoZW1lQ2xyIixwcm9wZXJ0aWVzOntyYXdNYXA6e3ZhbDppfX0sY2hpbGRyZW46YX1dfX0sTz0oZSx0KT0+KHtuYW1lOiJhOnNvbGlkRmlsbCIsY2hpbGRyZW46W1QoInNjaGVtZUNsciIsZSx0KV19KSxBPWU9Pntjb25zdFt0LGkscyxyLG9dPWUsW24sYV09bztyZXR1cm57bmFtZToiYTpncmFkRmlsbCIscHJvcGVydGllczp7cmF3TWFwOntyb3RXaXRoU2hhcGU6dH19LGNoaWxkcmVuOlt7bmFtZToiYTpnc0xzdCIsY2hpbGRyZW46W0QoaSksRChzKSxEKHIpXX0se25hbWU6ImE6bGluIixwcm9wZXJ0aWVzOntyYXdNYXA6e2FuZzpuLHNjYWxlZDphfX19XX19LFA9ZT0+e2NvbnN0W3QsaSxzLHJdPWU7cmV0dXJue25hbWU6ImE6bG4iLHByb3BlcnRpZXM6e3Jhd01hcDp7dzp0LGNhcDppLGNtcGQ6cyxhbGduOnJ9fSxjaGlsZHJlbjpbTygicGhDbHIiKSxUKCJwcnN0RGFzaCIsInNvbGlkIikse25hbWU6ImE6bWl0ZXIiLHByb3BlcnRpZXM6e3Jhd01hcDp7bGltOiI4MDAwMDAifX19XX19LE09ZT0+e2NvbnN0IHQ9W107aWYoZSl7Y29uc3RbaSxzLHIsbyxuXT1lO3QucHVzaCh7bmFtZToiYTpvdXRlclNoZHciLHByb3BlcnRpZXM6e3Jhd01hcDp7Ymx1clJhZDppLGRpc3Q6cyxkaXI6cixhbGduOm8scm90V2l0aFNoYXBlOm59fSxjaGlsZHJlbjpbVCgic3JnYkNsciIsIjAwMDAwMCIsW1QoImFscGhhIiwiNjMwMDAiKV0pXX0pfXJldHVybntuYW1lOiJhOmVmZmVjdFN0eWxlIixjaGlsZHJlbjpbT2JqZWN0LmFzc2lnbih7fSx7bmFtZToiYTplZmZlY3RMc3QifSx0Lmxlbmd0aD97Y2hpbGRyZW46dH06e30pXX19O3ZhciBMPXtnZXRUZW1wbGF0ZTooKT0+KHtuYW1lOiJhOmZtdFNjaGVtZSIscHJvcGVydGllczp7cmF3TWFwOntuYW1lOiJPZmZpY2UifX0sY2hpbGRyZW46W3tuYW1lOiJhOmZpbGxTdHlsZUxzdCIsY2hpbGRyZW46W08oInBoQ2xyIiksQShbIjEiLFsiMCIsInBoQ2xyIiwiMTA1MDAwIiwiMTEwMDAwIiwiNjcwMDAiXSxbIjUwMDAwIiwicGhDbHIiLCIxMDMwMDAiLCIxMDUwMDAiLCI3MzAwMCJdLFsiMTAwMDAwIiwicGhDbHIiLCIxMDkwMDAiLCIxMDUwMDAiLCI4MTAwMCJdLFsiNTQwMDAwMCIsIjAiXV0pLEEoWyIxIixbIjAiLCJwaENsciIsIjEwMzAwMCIsIjEwMjAwMCIsIjk0MDAwIl0sWyI1MDAwMCIsInBoQ2xyIiwiMTEwMDAwIiwiMTAwMDAwIix2b2lkIDAsIjEwMDAwMCJdLFsiMTAwMDAwIiwicGhDbHIiLCIxMjAwMDAiLCI5OTAwMCIsdm9pZCAwLCI3ODAwMCJdLFsiNTQwMDAwMCIsIjAiXV0pXX0se25hbWU6ImE6bG5TdHlsZUxzdCIsY2hpbGRyZW46W1AoWyI2MzUwIiwiZmxhdCIsInNuZyIsImN0ciJdKSxQKFsiMTI3MDAiLCJmbGF0Iiwic25nIiwiY3RyIl0pLFAoWyIxOTA1MCIsImZsYXQiLCJzbmciLCJjdHIiXSldfSx7bmFtZToiYTplZmZlY3RTdHlsZUxzdCIsY2hpbGRyZW46W00oKSxNKCksTShbIjU3MTUwIiwiMTkwNTAiLCI1NDAwMDAwIiwiY3RyIiwiMCJdKV19LHtuYW1lOiJhOmJnRmlsbFN0eWxlTHN0IixjaGlsZHJlbjpbTygicGhDbHIiKSxPKCJwaENsciIsW1QoInRpbnQiLCI5NTAwMCIpLFQoInNhdE1vZCIsIjE3MDAwMCIpXSksQShbIjEiLFsiMCIsInBoQ2xyIiwiMTUwMDAwIiwiMTAyMDAwIiwiOTMwMDAiLCI5ODAwMCJdLFsiNTAwMDAiLCJwaENsciIsIjEzMDAwMCIsIjEwMzAwMCIsIjk4MDAwIiwiOTAwMDAiXSxbIjEwMDAwMCIsInBoQ2xyIiwiMTIwMDAwIix2b2lkIDAsdm9pZCAwLCI2MzAwMCJdLFsiNTQwMDAwMCIsIjAiXV0pXX1dfSl9O3ZhciBGPXtnZXRUZW1wbGF0ZTooKT0+KHtuYW1lOiJhOnRoZW1lRWxlbWVudHMiLGNoaWxkcmVuOltFLmdldFRlbXBsYXRlKCkseC5nZXRUZW1wbGF0ZSgpLEwuZ2V0VGVtcGxhdGUoKV19KX07dmFyIEk9e2dldFRlbXBsYXRlOigpPT4oe25hbWU6ImE6dGhlbWUiLHByb3BlcnRpZXM6e3ByZWZpeGVkQXR0cmlidXRlczpbe3ByZWZpeDoieG1sbnM6IixtYXA6e2E6Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9kcmF3aW5nbWwvMjAwNi9tYWluIn19XSxyYXdNYXA6e25hbWU6Ik9mZmljZSBUaGVtZSJ9fSxjaGlsZHJlbjpbRi5nZXRUZW1wbGF0ZSgpLHtuYW1lOiJhOm9iamVjdERlZmF1bHRzIn0se25hbWU6ImE6ZXh0cmFDbHJTY2hlbWVMc3QifV19KX07Y29uc3QgTj1lPT57Y29uc3QgdD1bXTtmb3IoY29uc3QgaSBvZiBlLmtleXMoKSl7Y29uc3QgZT1pLnRvU3RyaW5nKCkscj17bmFtZToidCIsdGV4dE5vZGU6cy5fLmVzY2FwZVN0cmluZyhlKX07ZS50cmltKCkubGVuZ3RoIT09ZS5sZW5ndGgmJihyLnByb3BlcnRpZXM9e3Jhd01hcDp7InhtbDpzcGFjZSI6InByZXNlcnZlIn19KSx0LnB1c2goe25hbWU6InNpIixjaGlsZHJlbjpbcl19KX1yZXR1cm4gdH07dmFyIEc9e2dldFRlbXBsYXRlOmU9Pih7bmFtZToic3N0Iixwcm9wZXJ0aWVzOntyYXdNYXA6e3htbG5zOiJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW4iLGNvdW50OmUuc2l6ZSx1bmlxdWVDb3VudDplLnNpemV9fSxjaGlsZHJlbjpOKGUpfSl9O3ZhciBrPXtnZXRUZW1wbGF0ZShlKXtsZXR7Zm9ybWF0Q29kZTp0LG51bUZtdElkOml9PWU7cmV0dXJuIHQubGVuZ3RoJiYodD1mdW5jdGlvbihlKXtjb25zdCB0PWUuc3BsaXQoLyhcW1teXF1dKlxdKS8pO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKXtsZXQgaT10W2VdO2kubGVuZ3RoJiYoaS5zdGFydHNXaXRoKCJbIil8fChpPWkucmVwbGFjZSgvXCQvZywnIiQiJykpLHRbZV09cy5fLmVzY2FwZVN0cmluZyhpKSl9cmV0dXJuIHQuam9pbigiIil9KHQpKSx7bmFtZToibnVtRm10Iixwcm9wZXJ0aWVzOntyYXdNYXA6e2Zvcm1hdENvZGU6dCxudW1GbXRJZDppfX19fX07dmFyIF89e2dldFRlbXBsYXRlOmU9Pih7bmFtZToibnVtRm10cyIscHJvcGVydGllczp7cmF3TWFwOntjb3VudDplLmxlbmd0aH19LGNoaWxkcmVuOmUubWFwKGU9PmsuZ2V0VGVtcGxhdGUoZSkpfSl9O3ZhciBWPXtnZXRUZW1wbGF0ZShlKXtjb25zdHtzaXplOnQsY29sb3JUaGVtZTppLGNvbG9yOnM9IkZGMDAwMDAwIixmb250TmFtZTpyPSJDYWxpYnJpIixmYW1pbHk6byxzY2hlbWU6bixpdGFsaWM6YSxib2xkOmwsc3RyaWtlVGhyb3VnaDpkLG91dGxpbmU6YyxzaGFkb3c6aCx1bmRlcmxpbmU6dSx2ZXJ0aWNhbEFsaWduOnB9PWUsZz1be25hbWU6InN6Iixwcm9wZXJ0aWVzOntyYXdNYXA6e3ZhbDp0fX19LHtuYW1lOiJjb2xvciIscHJvcGVydGllczp7cmF3TWFwOnt0aGVtZTppLHJnYjpzfX19LHtuYW1lOiJuYW1lIixwcm9wZXJ0aWVzOntyYXdNYXA6e3ZhbDpyfX19XTtyZXR1cm4gbyYmZy5wdXNoKHtuYW1lOiJmYW1pbHkiLHByb3BlcnRpZXM6e3Jhd01hcDp7dmFsOm99fX0pLG4mJmcucHVzaCh7bmFtZToic2NoZW1lIixwcm9wZXJ0aWVzOntyYXdNYXA6e3ZhbDpufX19KSxhJiZnLnB1c2goe25hbWU6ImkifSksbCYmZy5wdXNoKHtuYW1lOiJiIn0pLGQmJmcucHVzaCh7bmFtZToic3RyaWtlIn0pLGMmJmcucHVzaCh7bmFtZToib3V0bGluZSJ9KSxoJiZnLnB1c2goe25hbWU6InNoYWRvdyJ9KSx1JiZnLnB1c2goe25hbWU6InUiLHByb3BlcnRpZXM6e3Jhd01hcDp7dmFsOnV9fX0pLHAmJmcucHVzaCh7bmFtZToidmVydEFsaWduIixwcm9wZXJ0aWVzOntyYXdNYXA6e3ZhbDpwfX19KSx7bmFtZToiZm9udCIsY2hpbGRyZW46Z319fTt2YXIgQj17Z2V0VGVtcGxhdGU6ZT0+KHtuYW1lOiJmb250cyIscHJvcGVydGllczp7cmF3TWFwOntjb3VudDplLmxlbmd0aH19LGNoaWxkcmVuOmUubWFwKGU9PlYuZ2V0VGVtcGxhdGUoZSkpfSl9O3ZhciBIPXtnZXRUZW1wbGF0ZShlKXtjb25zdHtwYXR0ZXJuVHlwZTp0LGZnVGhlbWU6aSxmZ1RpbnQ6cyxmZ1JnYjpyLGJnUmdiOm8sYmdJbmRleGVkOm59PWUsYT17bmFtZToicGF0dGVybkZpbGwiLHByb3BlcnRpZXM6e3Jhd01hcDp7cGF0dGVyblR5cGU6dH19fTtyZXR1cm4oaXx8c3x8cikmJihhLmNoaWxkcmVuPVt7bmFtZToiZmdDb2xvciIscHJvcGVydGllczp7cmF3TWFwOnt0aGVtZTppLHRpbnQ6cyxyZ2I6cn19fV0pLChufHxvKSYmKGEuY2hpbGRyZW58fChhLmNoaWxkcmVuPVtdKSxhLmNoaWxkcmVuLnB1c2goe25hbWU6ImJnQ29sb3IiLHByb3BlcnRpZXM6e3Jhd01hcDp7aW5kZXhlZDpuLHJnYjpvfX19KSkse25hbWU6ImZpbGwiLGNoaWxkcmVuOlthXX19fTt2YXIgVz17Z2V0VGVtcGxhdGU6ZT0+KHtuYW1lOiJmaWxscyIscHJvcGVydGllczp7cmF3TWFwOntjb3VudDplLmxlbmd0aH19LGNoaWxkcmVuOmUubWFwKGU9PkguZ2V0VGVtcGxhdGUoZSkpfSl9O2NvbnN0IGo9e05vbmU6Ik5vbmUiLERvdDoiRG90dGVkIixEYXNoOiJEYXNoZWQiLERvdWJsZToiRG91YmxlIixEYXNoRG90OiJEYXNoRG90IixEYXNoRG90RG90OiJEYXNoRG90RG90IixTbGFudERhc2hEb3Q6IlNsYW50RGFzaERvdCJ9LFU9WyJEYXNoZWQiLCJEYXNoRG90IiwiRGFzaERvdERvdCJdLHo9e05vbmU6Im5vbmUiLFNvbGlkOiJzb2xpZCIsR3JheTUwOiJtZWRpdW1HcmF5IixHcmF5NzU6ImRhcmtHcmF5IixHcmF5MjU6ImxpZ2h0R3JheSIsSG9yelN0cmlwZToiZGFya0hvcml6b250YWwiLFZlcnRTdHJpcGU6ImRhcmtWZXJ0aWNhbCIsUmV2ZXJzZURpYWdTdHJpcGU6ImRhcmtEb3duIixEaWFnU3RyaXBlOiJkYXJrVXAiLERpYWdDcm9zczoiZGFya0dyaWQiLFRoaWNrRGlhZ0Nyb3NzOiJkYXJrVHJlbGxpcyIsVGhpbkhvcnpTdHJpcGU6ImxpZ2h0SG9yaXpvbnRhbCIsVGhpblZlcnRTdHJpcGU6ImxpZ2h0VmVydGljYWwiLFRoaW5SZXZlcnNlRGlhZ1N0cmlwZToibGlnaHREb3duIixUaGluRGlhZ1N0cmlwZToibGlnaHRVcCIsVGhpbkhvcnpDcm9zczoibGlnaHRHcmlkIixUaGluRGlhZ0Nyb3NzOiJsaWdodFRyZWxsaXMiLEdyYXkxMjU6ImdyYXkxMjUiLEdyYXkwNjI1OiJncmF5MDYyNSJ9LEs9e0F1dG9tYXRpYzoiZ2VuZXJhbCIsTGVmdDoibGVmdCIsQ2VudGVyOiJjZW50ZXIiLFJpZ2h0OiJyaWdodCIsRmlsbDoiZmlsbCIsSnVzdGlmeToianVzdGlmeSIsQ2VudGVyQWNyb3NzU2VsZWN0aW9uOiJjZW50ZXJDb250aW51b3VzIixEaXN0cmlidXRlZDoiZGlzdHJpYnV0ZWQiLEp1c3RpZnlEaXN0cmlidXRlZDoianVzdGlmeSJ9LFk9e0F1dG9tYXRpYzp2b2lkIDAsVG9wOiJ0b3AiLEJvdHRvbToiYm90dG9tIixDZW50ZXI6ImNlbnRlciIsSnVzdGlmeToianVzdGlmeSIsRGlzdHJpYnV0ZWQ6ImRpc3RyaWJ1dGVkIixKdXN0aWZ5RGlzdHJpYnV0ZWQ6Imp1c3RpZnkifSwkPWU9Pm51bGw9PWU/ZTooIiMiPT09ZS5jaGFyQXQoMCkmJihlPWUuc3Vic3RyaW5nKDEpKSw2PT09ZS5sZW5ndGg/IkZGIitlOmUpLFg9KGUsdCk9PntpZighZSlyZXR1cm4idGhpbiI7Y29uc3QgaT0oZT0+e3N3aXRjaChlKXtjYXNlIDE6cmV0dXJuInRoaW4iO2Nhc2UgMjpyZXR1cm4ibWVkaXVtIjtjYXNlIDM6cmV0dXJuInRoaWNrIjtkZWZhdWx0OnJldHVybiJoYWlyIn19KSh0KSxzPWpbZV07cmV0dXJuIkNvbnRpbnVvdXMiPT09ZT9pOiJtZWRpdW0iPT09aSYmLTEhPT1VLmluZGV4T2Yocyk/Im1lZGl1bSIrczpzLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpK3Muc3Vic3RyaW5nKDEpfSxxPWU9PktbZV18fCJnZW5lcmFsIixaPWU9PllbZV18fHZvaWQgMCxRPWU9Pih7bmFtZToiY29sb3IiLHByb3BlcnRpZXM6e3Jhd01hcDp7cmdiOiQoZXx8IiMwMDAwMDAiKX19fSk7dmFyIEo9e2dldFRlbXBsYXRlKGUpe2NvbnN0e2xlZnQ6dCxyaWdodDppLHRvcDpzLGJvdHRvbTpyLGRpYWdvbmFsOm99PWUsbj10P1tRKHQuY29sb3IpXTp2b2lkIDAsYT1pP1tRKGkuY29sb3IpXTp2b2lkIDAsbD1zP1tRKHMuY29sb3IpXTp2b2lkIDAsZD1yP1tRKHIuY29sb3IpXTp2b2lkIDAsYz1vP1tRKG8uY29sb3IpXTp2b2lkIDA7cmV0dXJue25hbWU6ImJvcmRlciIsY2hpbGRyZW46W3tuYW1lOiJsZWZ0Iixwcm9wZXJ0aWVzOntyYXdNYXA6e3N0eWxlOnQmJnQuc3R5bGV9fSxjaGlsZHJlbjpufSx7bmFtZToicmlnaHQiLHByb3BlcnRpZXM6e3Jhd01hcDp7c3R5bGU6aSYmaS5zdHlsZX19LGNoaWxkcmVuOmF9LHtuYW1lOiJ0b3AiLHByb3BlcnRpZXM6e3Jhd01hcDp7c3R5bGU6cyYmcy5zdHlsZX19LGNoaWxkcmVuOmx9LHtuYW1lOiJib3R0b20iLHByb3BlcnRpZXM6e3Jhd01hcDp7c3R5bGU6ciYmci5zdHlsZX19LGNoaWxkcmVuOmR9LHtuYW1lOiJkaWFnb25hbCIscHJvcGVydGllczp7cmF3TWFwOntzdHlsZTpvJiZvLnN0eWxlfX0sY2hpbGRyZW46Y31dfX19O3ZhciBlZT17Z2V0VGVtcGxhdGU6ZT0+KHtuYW1lOiJib3JkZXJzIixwcm9wZXJ0aWVzOntyYXdNYXA6e2NvdW50OmUubGVuZ3RofX0sY2hpbGRyZW46ZS5tYXAoZT0+Si5nZXRUZW1wbGF0ZShlKSl9KX07Y29uc3QgdGU9ZT0+e2NvbnN0IHQ9WyJDb250ZXh0IiwiTGVmdFRvUmlnaHQiLCJSaWdodFRvTGVmdCJdLmluZGV4T2YoZSk7cmV0dXJuIE1hdGgubWF4KHQsMCl9O3ZhciBpZT17Z2V0VGVtcGxhdGUoZSl7Y29uc3R7aG9yaXpvbnRhbDp0LGluZGVudDppLHJlYWRpbmdPcmRlcjpzLHJvdGF0ZTpyLHNocmlua1RvRml0Om8sdmVydGljYWw6bix3cmFwVGV4dDphfT1lO3JldHVybntuYW1lOiJhbGlnbm1lbnQiLHByb3BlcnRpZXM6e3Jhd01hcDp7aG9yaXpvbnRhbDp0JiZxKHQpLGluZGVudDppLHJlYWRpbmdPcmRlcjpzJiZ0ZShzKSx0ZXh0Um90YXRpb246cixzaHJpbmtUb0ZpdDpvLHZlcnRpY2FsOm4mJloobiksd3JhcFRleHQ6YX19fX19O3ZhciBzZT17Z2V0VGVtcGxhdGUoZSl7Y29uc3QgdD0hMT09PWUucHJvdGVjdGVkPzA6MTtyZXR1cm57bmFtZToicHJvdGVjdGlvbiIscHJvcGVydGllczp7cmF3TWFwOntoaWRkZW46ITA9PT1lLmhpZGVGb3JtdWxhPzE6MCxsb2NrZWQ6dH19fX19O3ZhciByZT17Z2V0VGVtcGxhdGUoZSl7Y29uc3R7YWxpZ25tZW50OnQsYm9yZGVySWQ6aSxmaWxsSWQ6cyxmb250SWQ6cixudW1GbXRJZDpvLHByb3RlY3Rpb246bixxdW90ZVByZWZpeDphLHhmSWQ6bH09ZSxkPVtdO3JldHVybiB0JiZkLnB1c2goaWUuZ2V0VGVtcGxhdGUodCkpLG4mJmQucHVzaChzZS5nZXRUZW1wbGF0ZShuKSkse25hbWU6InhmIixwcm9wZXJ0aWVzOntyYXdNYXA6e2FwcGx5QWxpZ25tZW50OnQ/MTp2b2lkIDAsYXBwbHlQcm90ZWN0aW9uOm4/MTp2b2lkIDAsYXBwbHlCb3JkZXI6aT8xOnZvaWQgMCxhcHBseUZpbGw6cz8xOnZvaWQgMCxib3JkZXJJZDppLGZpbGxJZDpzLGFwcGx5Rm9udDpyPzE6dm9pZCAwLGZvbnRJZDpyLGFwcGx5TnVtYmVyRm9ybWF0Om8/MTp2b2lkIDAsbnVtRm10SWQ6byxxdW90ZVByZWZpeDphPzE6dm9pZCAwLHhmSWQ6bH19LGNoaWxkcmVuOmQubGVuZ3RoP2Q6dm9pZCAwfX19O3ZhciBvZT17Z2V0VGVtcGxhdGU6ZT0+KHtuYW1lOiJjZWxsU3R5bGVYZnMiLHByb3BlcnRpZXM6e3Jhd01hcDp7Y291bnQ6ZS5sZW5ndGh9fSxjaGlsZHJlbjplLm1hcChlPT5yZS5nZXRUZW1wbGF0ZShlKSl9KX07dmFyIG5lPXtnZXRUZW1wbGF0ZTplPT4oe25hbWU6ImNlbGxYZnMiLHByb3BlcnRpZXM6e3Jhd01hcDp7Y291bnQ6ZS5sZW5ndGh9fSxjaGlsZHJlbjplLm1hcChlPT5yZS5nZXRUZW1wbGF0ZShlKSl9KX07dmFyIGFlPXtnZXRUZW1wbGF0ZShlKXtjb25zdHtidWlsdGluSWQ6dCxuYW1lOmkseGZJZDpzfT1lO3JldHVybntuYW1lOiJjZWxsU3R5bGUiLHByb3BlcnRpZXM6e3Jhd01hcDp7YnVpbHRpbklkOnQsbmFtZTppLHhmSWQ6c319fX19O3ZhciBsZT17Z2V0VGVtcGxhdGU6ZT0+KHtuYW1lOiJjZWxsU3R5bGVzIixwcm9wZXJ0aWVzOntyYXdNYXA6e2NvdW50OmUubGVuZ3RofX0sY2hpbGRyZW46ZS5tYXAoZT0+YWUuZ2V0VGVtcGxhdGUoZSkpfSl9O2xldCBkZSxjZSxoZSx1ZSxwZSxnZSxtZSxmZSx2ZTtjb25zdCBDZT0oZSx0KT0+KC0xIT09ZS5pbmRleE9mKCJtaXhlZFN0eWxlIikmJnQ+MSYmKGUrPSJfIit0KSxlKSx5ZT0oKT0+e2RlPXtiYXNlOjB9LGNlPVtdLGhlPVt7Zm9udE5hbWU6IkNhbGlicmkiLGNvbG9yVGhlbWU6IjEiLGZhbWlseToiMiIsc2NoZW1lOiJtaW5vciJ9XSx1ZT1be3BhdHRlcm5UeXBlOiJub25lIn0se3BhdHRlcm5UeXBlOiJncmF5MTI1In1dLHBlPVt7bGVmdDp2b2lkIDAscmlnaHQ6dm9pZCAwLHRvcDp2b2lkIDAsYm90dG9tOnZvaWQgMCxkaWFnb25hbDp2b2lkIDB9XSxnZT1be2JvcmRlcklkOjAsZmlsbElkOjAsZm9udElkOjAsbnVtRm10SWQ6MH1dLG1lPVt7Ym9yZGVySWQ6MCxmaWxsSWQ6MCxmb250SWQ6MCxudW1GbXRJZDowLHhmSWQ6MH1dLGZlPVt7YnVpbHRpbklkOjAsbmFtZToiTm9ybWFsIix4ZklkOjB9XX0sU2U9ZT0+e2NvbnN0IHQ9KGk9ZS5wYXR0ZXJuKT96W2ldfHxpOiJub25lIjt2YXIgaTtjb25zdCBzPSQoZS5jb2xvcikscj0kKGUucGF0dGVybkNvbG9yKTtsZXQgbz11ZS5maW5kSW5kZXgoZT0+e2NvbnN0e3BhdHRlcm5UeXBlOmksZmdSZ2I6byxiZ1JnYjpufT1lO3JldHVybiBpPT10JiZvPT1zJiZuPT1yfSk7cmV0dXJuLTE9PT1vJiYobz11ZS5sZW5ndGgsdWUucHVzaCh7cGF0dGVyblR5cGU6dCxmZ1JnYjpzLGJnUmdiOnJ9KSksb30sd2U9ZT0+e2NvbnN0e2ZvbnROYW1lOnQ9IkNhbGlicmkiLGNvbG9yOmksc2l6ZTpzLGJvbGQ6cixpdGFsaWM6byxvdXRsaW5lOm4sc2hhZG93OmEsc3RyaWtlVGhyb3VnaDpsLHVuZGVybGluZTpkLGZhbWlseTpjLHZlcnRpY2FsQWxpZ246aH09ZSx1PSQoaSkscD0oZT0+e2lmKHZvaWQgMD09PWUpcmV0dXJuO2NvbnN0IHQ9WyJBdXRvbWF0aWMiLCJSb21hbiIsIlN3aXNzIiwiTW9kZXJuIiwiU2NyaXB0IiwiRGVjb3JhdGl2ZSJdLmluZGV4T2YoZXx8IkF1dG9tYXRpYyIpO3JldHVybiBNYXRoLm1heCh0LDApfSkoYyksZz1kP2QudG9Mb2NhbGVMb3dlckNhc2UoKTp2b2lkIDAsbT1oP2gudG9Mb2NhbGVMb3dlckNhc2UoKTp2b2lkIDA7bGV0IGY9aGUuZmluZEluZGV4KGU9PmUuZm9udE5hbWU9PXQmJmUuY29sb3I9PXUmJmUuc2l6ZT09cyYmZS5ib2xkPT1yJiZlLml0YWxpYz09byYmZS5vdXRsaW5lPT1uJiZlLnNoYWRvdz09YSYmZS5zdHJpa2VUaHJvdWdoPT1sJiZlLnVuZGVybGluZT09ZyYmZS52ZXJ0aWNhbEFsaWduPT1tJiZlLmZhbWlseT09cCk7cmV0dXJuLTE9PT1mJiYoZj1oZS5sZW5ndGgsaGUucHVzaCh7Zm9udE5hbWU6dCxjb2xvcjp1LHNpemU6cyxib2xkOnIsaXRhbGljOm8sb3V0bGluZTpuLHNoYWRvdzphLHN0cmlrZVRocm91Z2g6bCx1bmRlcmxpbmU6Zyx2ZXJ0aWNhbEFsaWduOm0sZmFtaWx5Om51bGwhPXA/cC50b1N0cmluZygpOnZvaWQgMH0pKSxmfSxiZT1lPT57Y29uc3R7YWxpZ25tZW50OnQsYm9yZGVyczppLGZvbnQ6cyxpbnRlcmlvcjpyLG51bWJlckZvcm1hdDpvLHByb3RlY3Rpb246bixxdW90ZVByZWZpeDphfT1lO2xldHtpZDpsfT1lLGM9MCxoPTAsdT0wLHA9MDtsJiYobD1DZShsLHZlKSxudWxsPT1kZVtsXSYmKHImJihjPVNlKHIpKSxpJiYoaD0oZT0+e2NvbnN0e2JvcmRlckJvdHRvbTp0LGJvcmRlclRvcDppLGJvcmRlckxlZnQ6cyxib3JkZXJSaWdodDpyfT1lO2xldCBvLG4sYSxsLGQsYyxoLHU7cyYmKGE9WChzLmxpbmVTdHlsZSxzLndlaWdodCksaD0kKHMuY29sb3IpKSxyJiYobD1YKHIubGluZVN0eWxlLHIud2VpZ2h0KSx1PSQoci5jb2xvcikpLHQmJihvPVgodC5saW5lU3R5bGUsdC53ZWlnaHQpLGQ9JCh0LmNvbG9yKSksaSYmKG49WChpLmxpbmVTdHlsZSxpLndlaWdodCksYz0kKGkuY29sb3IpKTtsZXQgcD1wZS5maW5kSW5kZXgoZT0+e2NvbnN0e2xlZnQ6dCxyaWdodDppLHRvcDpzLGJvdHRvbTpyfT1lO2lmKCF0JiYoYXx8aCkpcmV0dXJuITE7aWYoIWkmJihsfHx1KSlyZXR1cm4hMTtpZighcyYmKG58fGMpKXJldHVybiExO2lmKCFyJiYob3x8ZCkpcmV0dXJuITE7Y29uc3R7c3R5bGU6cCxjb2xvcjpnfT10fHx7fSx7c3R5bGU6bSxjb2xvcjpmfT1pfHx7fSx7c3R5bGU6dixjb2xvcjpDfT1zfHx7fSx7c3R5bGU6eSxjb2xvcjpTfT1yfHx7fTtyZXR1cm4gcD09YSYmZz09aCYmKG09PWwmJmY9PXUmJih2PT1uJiZDPT1jJiYoeT09byYmUz09ZCkpKX0pO3JldHVybi0xPT09cCYmKHA9cGUubGVuZ3RoLHBlLnB1c2goe2xlZnQ6e3N0eWxlOmEsY29sb3I6aH0scmlnaHQ6e3N0eWxlOmwsY29sb3I6dX0sdG9wOntzdHlsZTpuLGNvbG9yOmN9LGJvdHRvbTp7c3R5bGU6byxjb2xvcjpkfSxkaWFnb25hbDp7c3R5bGU6dm9pZCAwLGNvbG9yOnZvaWQgMH19KSkscH0pKGkpKSxzJiYodT13ZShzKSksbyYmKHA9KGU9PntpZihkW2VdKXJldHVybiBkW2VdO2xldCB0PWNlLmZpbmRJbmRleCh0PT50LmZvcm1hdENvZGU9PT1lKTtyZXR1cm4tMT09PXQ/KHQ9Y2UubGVuZ3RoKzE2NCxjZS5wdXNoKHtmb3JtYXRDb2RlOmUsbnVtRm10SWQ6dH0pKTp0PWNlW3RdLm51bUZtdElkLHR9KShvLmZvcm1hdCkpLGRlW2xdPW1lLmxlbmd0aCxtZS5wdXNoKHthbGlnbm1lbnQ6dCxib3JkZXJJZDpofHwwLGZpbGxJZDpjfHwwLGZvbnRJZDp1fHwwLG51bUZtdElkOnB8fDAscHJvdGVjdGlvbjpuLHF1b3RlUHJlZml4OmEseGZJZDowfSkpKX0sRWU9KGUsdCk9PmRlW0NlKGUsdCldfHwwO3ZhciBSZT17Z2V0VGVtcGxhdGUoZSl7Y29uc3QgdD1fLmdldFRlbXBsYXRlKGNlKSxpPUIuZ2V0VGVtcGxhdGUoaGUubWFwKHQ9Pk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7c2l6ZTpudWxsIT10LnNpemU/dC5zaXplOmV9KSkpLHM9Vy5nZXRUZW1wbGF0ZSh1ZSkscj1lZS5nZXRUZW1wbGF0ZShwZSksbz1vZS5nZXRUZW1wbGF0ZShnZSksbj1uZS5nZXRUZW1wbGF0ZShtZSksYT1sZS5nZXRUZW1wbGF0ZShmZSk7cmV0dXJuIHllKCkse25hbWU6InN0eWxlU2hlZXQiLHByb3BlcnRpZXM6e3Jhd01hcDp7Im1jOklnbm9yYWJsZSI6IngxNGFjIHgxNnIyIHhyIix4bWxuczoiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluIiwieG1sbnM6bWMiOiJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvbWFya3VwLWNvbXBhdGliaWxpdHkvMjAwNiIsInhtbG5zOngxNGFjIjoiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2Uvc3ByZWFkc2hlZXRtbC8yMDA5LzkvYWMiLCJ4bWxuczp4MTZyMiI6Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL3NwcmVhZHNoZWV0bWwvMjAxNS8wMi9tYWluIiwieG1sbnM6eHIiOiJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS9zcHJlYWRzaGVldG1sLzIwMTQvcmV2aXNpb24ifX0sY2hpbGRyZW46W3QsaSxzLHIsbyxuLGEse25hbWU6InRhYmxlU3R5bGVzIixwcm9wZXJ0aWVzOntyYXdNYXA6e2NvdW50OjAsZGVmYXVsdFBpdm90U3R5bGU6IlBpdm90U3R5bGVMaWdodDE2IixkZWZhdWx0VGFibGVTdHlsZToiVGFibGVTdHlsZU1lZGl1bTIifX19XX19fTt2YXIgeGU9e2dldFRlbXBsYXRlKGUsdCl7Y29uc3QgaT0odCsxKS50b1N0cmluZygpO3JldHVybntuYW1lOiJzaGVldCIscHJvcGVydGllczp7cmF3TWFwOntuYW1lOmUsc2hlZXRJZDppLCJyOmlkIjoicklkIitpfX19fX07dmFyIFRlPXtnZXRUZW1wbGF0ZTplPT4oe25hbWU6InNoZWV0cyIsY2hpbGRyZW46ZS5tYXAoKGUsdCk9PnhlLmdldFRlbXBsYXRlKGUsdCkpfSl9O3ZhciBEZT17Z2V0VGVtcGxhdGU6ZT0+KHtuYW1lOiJ3b3JrYm9vayIscHJvcGVydGllczp7cHJlZml4ZWRBdHRyaWJ1dGVzOlt7cHJlZml4OiJ4bWxuczoiLG1hcDp7cjoiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcyJ9fV0scmF3TWFwOnt4bWxuczoiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluIn19LGNoaWxkcmVuOltUZS5nZXRUZW1wbGF0ZShlKV19KX07dmFyIE9lPXtnZXRUZW1wbGF0ZShlKXtjb25zdHttaW46dCxtYXg6aSxvdXRsaW5lTGV2ZWw6cyxzOnIsd2lkdGg6byxoaWRkZW46bixiZXN0Rml0OmF9PWU7bGV0IGw9MSxkPSIwIjtyZXR1cm4gbz4xJiYobD0oZT0+TWF0aC5jZWlsKChlLTEyKS83KzEpKShvKSxkPSIxIikse25hbWU6ImNvbCIscHJvcGVydGllczp7cmF3TWFwOnttaW46dCxtYXg6aSxvdXRsaW5lTGV2ZWw6bnVsbCE9cz9zOnZvaWQgMCx3aWR0aDpsLHN0eWxlOnIsaGlkZGVuOm4/IjEiOiIwIixiZXN0Rml0OmE/IjEiOiIwIixjdXN0b21XaWR0aDpkfX19fX07dmFyIEFlPXtnZXRUZW1wbGF0ZShlLHQsaSl7Y29uc3R7cmVmOnIsZGF0YTpvLHN0eWxlSWQ6bn09ZSx7dHlwZTphLHZhbHVlOmx9PW98fHt0eXBlOiJlbXB0eSIsdmFsdWU6bnVsbH07bGV0IGQ9YTsiZiI9PT1hP2Q9InN0ciI6YS5jaGFyQXQoMCk9PT1hLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpJiYoZD0oZT0+e2NvbnN0IHQ9ZS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKTtyZXR1cm4icyI9PT10PyJpbmxpbmVTdHIiOnR9KShhKSk7Y29uc3QgYz17bmFtZToiYyIscHJvcGVydGllczp7cmF3TWFwOntyOnIsdDoiZW1wdHkiPT09ZD92b2lkIDA6ZCxzOm4/RWUobixpKTp2b2lkIDB9fX07aWYoImVtcHR5Ij09PWQpcmV0dXJuIGM7bGV0IGg7cmV0dXJuIGg9InN0ciI9PT1kJiYiZiI9PT1hP1t7bmFtZToiZiIsdGV4dE5vZGU6cy5fLmVzY2FwZVN0cmluZyhsKX1dOiJpbmxpbmVTdHIiPT09ZD9be25hbWU6ImlzIixjaGlsZHJlbjpbe25hbWU6InQiLHRleHROb2RlOnMuXy5lc2NhcGVTdHJpbmcobCl9XX1dOlt7bmFtZToidiIsdGV4dE5vZGU6bH1dLE9iamVjdC5hc3NpZ24oe30sYyx7Y2hpbGRyZW46aH0pfX07Y29uc3QgUGU9ZT0+e3ZhciB0O3JldHVybiIiIT09KG51bGw9PT0odD1lLmRhdGEpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnZhbHVlKXx8dm9pZCAwIT09ZS5zdHlsZUlkfTt2YXIgTWU9e2dldFRlbXBsYXRlKGUsdCxpKXtjb25zdHtjb2xsYXBzZWQ6cyxoaWRkZW46cixoZWlnaHQ6byxvdXRsaW5lTGV2ZWw6bixjZWxsczphPVtdfT1lOygoZSx0KT0+e2NvbnN0IGk9W107bGV0IHM9MDtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyl7Y29uc3Qgcj1lW3RdO3IubWVyZ2VBY3Jvc3MmJihpLnB1c2goe3Bvczp0LGV4Y2VsUG9zOnN9KSxzKz1yLm1lcmdlQWNyb3NzKSxzKyt9aWYoaS5sZW5ndGgpZm9yKGxldCBzPWkubGVuZ3RoLTE7cz49MDtzLS0pe2NvbnN0IHI9W10sbz1lW2lbc10ucG9zXTtmb3IobGV0IGU9MTtlPD1vLm1lcmdlQWNyb3NzO2UrKylyLnB1c2goe3JlZjpgJHtwKGlbc10uZXhjZWxQb3MrMStlKX0ke3QrMX1gLHN0eWxlSWQ6by5zdHlsZUlkLGRhdGE6e3R5cGU6ImVtcHR5Iix2YWx1ZTpudWxsfX0pO3IubGVuZ3RoJiZlLnNwbGljZShpW3NdLnBvcysxLDAsLi4ucil9fSkoYSx0KTtyZXR1cm57bmFtZToicm93Iixwcm9wZXJ0aWVzOntyYXdNYXA6e3I6dCsxLGNvbGxhcHNlZDpzPyIxIjoiMCIsaGlkZGVuOnI/IjEiOiIwIixodDpvLGN1c3RvbUhlaWdodDpudWxsIT1vPyIxIjoiMCIsc3BhbnM6IjE6MSIsb3V0bGluZUxldmVsOm58fHZvaWQgMH19LGNoaWxkcmVuOmEuZmlsdGVyKFBlKS5tYXAoKGUsdCk9PkFlLmdldFRlbXBsYXRlKGUsdCxpKSl9fX07dmFyIExlPXtnZXRUZW1wbGF0ZTplPT4oe25hbWU6Im1lcmdlQ2VsbCIscHJvcGVydGllczp7cmF3TWFwOntyZWY6ZX19fSl9O2NvbnN0IEZlPWU9PntpZihudWxsPT1lKXJldHVybiAxO2NvbnN0IHQ9WyJMZXR0ZXIiLCJMZXR0ZXIgU21hbGwiLCJUYWJsb2lkIiwiTGVkZ2VyIiwiTGVnYWwiLCJTdGF0ZW1lbnQiLCJFeGVjdXRpdmUiLCJBMyIsIkE0IiwiQTQgU21hbGwiLCJBNSIsIkE2IiwiQjQiLCJCNSIsIkZvbGlvIiwiRW52ZWxvcGUiLCJFbnZlbG9wZSBETCIsIkVudmVsb3BlIEM1IiwiRW52ZWxvcGUgQjUiLCJFbnZlbG9wZSBDMyIsIkVudmVsb3BlIEM0IiwiRW52ZWxvcGUgQzYiLCJFbnZlbG9wZSBNb25hcmNoIiwiSmFwYW5lc2UgUG9zdGNhcmQiLCJKYXBhbmVzZSBEb3VibGUgUG9zdGNhcmQiXS5pbmRleE9mKGUpO3JldHVybi0xPT09dD8xOnQrMX0sSWU9ZT0+ZS5yZWR1Y2UoKGUsdCk9Pntjb25zdCBpPSJDZW50ZXIiPT09KHI9dC5wb3NpdGlvbik/IkMiOiJSaWdodCI9PT1yPyJSIjoiTCI7dmFyIHI7dmFyIG8sbixhO3JldHVybmAke289YCR7ZX0mYW1wOyR7aX1gLChuPXQuZm9udCk/KG8rPSImYW1wOyZxdW90OyIsbys9bi5mb250TmFtZXx8IkNhbGlicmkiLG4uYm9sZCE9PW4uaXRhbGljP28rPW4uYm9sZD8iLEJvbGQiOiIsSXRhbGljIjpuLmJvbGQ/bys9IixCb2xkIEl0YWxpYyI6bys9IixSZWd1bGFyIixvKz0iJnF1b3Q7IixuLnNpemUmJihvKz0iJmFtcDsiK24uc2l6ZSksbi5zdHJpa2VUaHJvdWdoJiYobys9IiZhbXA7UyIpLG4udW5kZXJsaW5lJiYobys9IiZhbXA7IisoIkRvdWJsZSI9PT1uLnVuZGVybGluZT8iRSI6IlUiKSksbi5jb2xvciYmKG8rPSImYW1wO0siK24uY29sb3IucmVwbGFjZSgiIyIsIiIpLnRvVXBwZXJDYXNlKCkpLG8pOm99JHtzLl8uZXNjYXBlU3RyaW5nKChhPXQudmFsdWUscy5fLml0ZXJhdGVPYmplY3QoeyImW1BhZ2VdIjoiJlAiLCImW1BhZ2VzXSI6IiZOIiwiJltEYXRlXSI6IiZEIiwiJltUaW1lXSI6IiZUIiwiJltUYWJdIjoiJkEiLCImW1BhdGhdIjoiJloiLCImW0ZpbGVdIjoiJkYifSwoZSx0KT0+e2E9YS5yZXBsYWNlKGUsdCl9KSxhKSl9YH0sIiIpLE5lPWU9Pntjb25zdCB0PVtdO3JldHVyblsiYWxsIiwiZmlyc3QiLCJldmVuIl0uZm9yRWFjaChpPT57Y29uc3Qgcj1lW2ldLG89ImFsbCI9PT1pPyJvZGQiOmk7ciYmKHIuaGVhZGVyfHxyLmZvb3RlcikmJnMuXy5pdGVyYXRlT2JqZWN0KHIsKGUsaSk9Pntjb25zdCBzPWAke2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCl9JHtlLnNsaWNlKDEpfWA7aSYmdC5wdXNoKHtuYW1lOmAke299JHtzfWAscHJvcGVydGllczp7cmF3TWFwOnsieG1sOnNwYWNlIjoicHJlc2VydmUifX0sdGV4dE5vZGU6SWUoaSl9KX0pfSksdH07dmFyIEdlPXtnZXRUZW1wbGF0ZShlKXtjb25zdHt3b3Jrc2hlZXQ6dCxjdXJyZW50U2hlZXQ6aSxjb25maWc6cn09ZSx7bWFyZ2luczpvPXt9LHBhZ2VTZXR1cDpuLGhlYWRlckZvb3RlckNvbmZpZzphLHN1cHByZXNzQ29sdW1uT3V0bGluZTpsfT1yLHt0YWJsZTpkfT10LHtyb3dzOmMsY29sdW1uczpofT1kLHU9aCYmaC5sZW5ndGg/KChlLHQsaSk9Pntjb25zdCBzPVtdLHI9W107ZS5mb3JFYWNoKChlLGkpPT57Y29uc3Qgbz1lLmNlbGxzO2xldCBuLGE9MDtvLmZvckVhY2goKGUsbyk9Pntjb25zdCBsPW8rYSsxLGQ9cChsKSxjPWkrMTtpZihlLm1lcmdlQWNyb3NzKXthKz1lLm1lcmdlQWNyb3NzO2NvbnN0IHQ9cChvK2ErMSk7cy5wdXNoKGAke2R9JHtjfToke3R9JHtjfWApfXRbbC0xXXx8KHRbbC0xXT17fSk7Y29uc3R7Y29sbGFwc2libGVSYW5nZXM6aH09ZTtoJiZoLmZvckVhY2goZT0+e3IucHVzaChbbCtlWzBdLGwrZVsxXV0pfSksbj10W2wtMV0sbi5taW49bCxuLm1heD1sLGUucmVmPWAke2R9JHtjfWB9KX0pLHIuc29ydCgoZSx0KT0+ZVswXSE9PXRbMF0/ZVswXS10WzBdOnRbMV0tZVsxXSk7Y29uc3Qgbz1uZXcgTWFwLG49bmV3IE1hcDtyZXR1cm4gci5maWx0ZXIoZT0+e2NvbnN0IHQ9ZS50b1N0cmluZygpO3JldHVybiFvLmdldCh0KSYmKG8uc2V0KHQsITApLCEwKX0pLmZvckVhY2goZT0+e2NvbnN0IHM9dC5maW5kKHQ9PnQubWluPT1lWzBdJiZ0Lm1heD09ZVsxXSkscj1uLmdldChlWzBdKTt0LnB1c2goe21pbjplWzBdLG1heDplWzFdLG91dGxpbmVMZXZlbDppP3ZvaWQgMDpyfHwxLHdpZHRoOihzfHx7d2lkdGg6MTAwfSkud2lkdGh9KSxuLnNldChlWzBdLChyfHwwKSsxKX0pLHN9KShjLGgsISFsKTpbXSxnPXMuXy5jb21wb3NlKGU9PihlLnB1c2goe25hbWU6InNoZWV0UHIiLGNoaWxkcmVuOlt7bmFtZToib3V0bGluZVByIixwcm9wZXJ0aWVzOntyYXdNYXA6e3N1bW1hcnlCZWxvdzowfX19XX0pLGUpLChlPT50PT57Y29uc3QgaT1lLnJlZHVjZSgoZSx0KT0+dC5vdXRsaW5lTGV2ZWwmJnQub3V0bGluZUxldmVsPmU/dC5vdXRsaW5lTGV2ZWw6ZSwwKTtyZXR1cm4gdC5wdXNoKHtuYW1lOiJzaGVldEZvcm1hdFByIixwcm9wZXJ0aWVzOntyYXdNYXA6e2Jhc2VDb2xXaWR0aDoxMCxkZWZhdWx0Um93SGVpZ2h0OjE2LG91dGxpbmVMZXZlbFJvdzppfHx2b2lkIDB9fX0pLHR9KShjKSwoZT0+dD0+KGUubGVuZ3RoJiZ0LnB1c2goe25hbWU6ImNvbHMiLGNoaWxkcmVuOmUubWFwKGU9Pk9lLmdldFRlbXBsYXRlKGUpKX0pLHQpKShoKSwoKGUsdCk9Pmk9PihlLmxlbmd0aCYmaS5wdXNoKHtuYW1lOiJzaGVldERhdGEiLGNoaWxkcmVuOmUubWFwKChlLGkpPT5NZS5nZXRUZW1wbGF0ZShlLGksdCkpfSksaSkpKGMsaSsxKSwobT11LGU9PihtLmxlbmd0aCYmZS5wdXNoKHtuYW1lOiJtZXJnZUNlbGxzIixwcm9wZXJ0aWVzOntyYXdNYXA6e2NvdW50Om0ubGVuZ3RofX0sY2hpbGRyZW46bS5tYXAoZT0+TGUuZ2V0VGVtcGxhdGUoZSkpfSksZSkpLChlPT50PT57Y29uc3R7dG9wOmk9Ljc1LHJpZ2h0OnM9LjcsYm90dG9tOnI9Ljc1LGxlZnQ6bz0uNyxoZWFkZXI6bj0uMyxmb290ZXI6YT0uM309ZTtyZXR1cm4gdC5wdXNoKHtuYW1lOiJwYWdlTWFyZ2lucyIscHJvcGVydGllczp7cmF3TWFwOntib3R0b206cixmb290ZXI6YSxoZWFkZXI6bixsZWZ0Om8scmlnaHQ6cyx0b3A6aX19fSksdH0pKG8pLChlPT50PT57dmFyIGk7cmV0dXJuIGUmJnQucHVzaCh7bmFtZToicGFnZVNldHVwIixwcm9wZXJ0aWVzOntyYXdNYXA6e2hvcml6b250YWxEcGk6MCx2ZXJ0aWNhbERwaTowLG9yaWVudGF0aW9uOihpPWUub3JpZW50YXRpb24sIWl8fCJQb3J0cmFpdCIhPT1pJiYiTGFuZHNjYXBlIiE9PWk/InBvcnRyYWl0IjppLnRvTG9jYWxlTG93ZXJDYXNlKCkpLHBhcGVyU2l6ZTpGZShlLnBhZ2VTaXplKX19fSksdH0pKG4pLChlPT50PT57aWYoIWUpcmV0dXJuIHQ7Y29uc3QgaT1udWxsIT1lLmZpcnN0PzE6MCxzPW51bGwhPWUuZXZlbj8xOjA7cmV0dXJuIHQucHVzaCh7bmFtZToiaGVhZGVyRm9vdGVyIixwcm9wZXJ0aWVzOntyYXdNYXA6e2RpZmZlcmVudEZpcnN0OmksZGlmZmVyZW50T2RkRXZlbjpzfX0sY2hpbGRyZW46TmUoZSl9KSx0fSkoYSksKGU9PnQ9PihWZS53b3Jrc2hlZXRJbWFnZXMuZ2V0KGUpJiZ0LnB1c2goe25hbWU6ImRyYXdpbmciLHByb3BlcnRpZXM6e3Jhd01hcDp7InI6aWQiOiJySWQxIn19fSksdCkpKGkpKTt2YXIgbTtyZXR1cm57bmFtZToid29ya3NoZWV0Iixwcm9wZXJ0aWVzOntwcmVmaXhlZEF0dHJpYnV0ZXM6W3twcmVmaXg6InhtbG5zOiIsbWFwOntyOiJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzIn19XSxyYXdNYXA6e3htbG5zOiJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW4ifX0sY2hpbGRyZW46ZyhbXSl9fX07dmFyIGtlPXtnZXRUZW1wbGF0ZShlKXtjb25zdHtJZDp0LFR5cGU6aSxUYXJnZXQ6c309ZTtyZXR1cm57bmFtZToiUmVsYXRpb25zaGlwIixwcm9wZXJ0aWVzOntyYXdNYXA6e0lkOnQsVHlwZTppLFRhcmdldDpzfX19fX07dmFyIF9lPXtnZXRUZW1wbGF0ZTplPT4oe25hbWU6IlJlbGF0aW9uc2hpcHMiLHByb3BlcnRpZXM6e3Jhd01hcDp7eG1sbnM6Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwcyJ9fSxjaGlsZHJlbjplLm1hcChlPT5rZS5nZXRUZW1wbGF0ZShlKSl9KX07Y2xhc3MgVmV7c3RhdGljIGNyZWF0ZUV4Y2VsKGUsdCxpKXtyZXR1cm4gdGhpcy5hZGRTaGVldE5hbWUodCksKChlLHQpPT57dmU9dCwxPT09dmUmJnllKCksZS5mb3JFYWNoKGJlKX0pKGUsdGhpcy5zaGVldE5hbWVzLmxlbmd0aCksdGhpcy5jcmVhdGVXb3Jrc2hlZXQodCxpKX1zdGF0aWMgYnVpbGRJbWFnZU1hcChlLHQsaSxzLHIpe2NvbnN0IG89dGhpcy5zaGVldE5hbWVzLmxlbmd0aCxuPXRoaXMuaW1hZ2VzLmdldChlLmlkKTtlLnBvc2l0aW9uJiZlLnBvc2l0aW9uLnJvdyYmZS5wb3NpdGlvbi5jb2x1bW58fChlLnBvc2l0aW9ufHwoZS5wb3NpdGlvbj17fSksZS5wb3NpdGlvbj1PYmplY3QuYXNzaWduKHt9LGUucG9zaXRpb24se3Jvdzp0LGNvbHVtbjpzLmluZGV4T2YoaSkrMX0pKTtjb25zdCBhPWU7aWYoKChlLHQpPT57Y29uc3R7Y29sU3BhbjppLGNvbHVtbjpzfT1lLnBvc2l0aW9uO2lmKGUud2lkdGgpaWYoaSl7Y29uc3Qgcj10LnNsaWNlKHMtMSxzK2ktMSk7bGV0IG89MDtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKyl7Y29uc3QgaT1yW3RdLmdldEFjdHVhbFdpZHRoKCk7aWYoZS53aWR0aDxvK2kpe2UucG9zaXRpb24uY29sU3Bhbj10KzEsZS50b3RhbFdpZHRoPWUud2lkdGgsZS53aWR0aD1lLnRvdGFsV2lkdGgtbzticmVha31vKz1pfX1lbHNlIGUudG90YWxXaWR0aD1lLndpZHRofSkoYSxzKSwoKGUsdCk9Pntjb25zdHtyb3dTcGFuOmkscm93OnN9PWUucG9zaXRpb247aWYoZS5oZWlnaHQpaWYoaSl7bGV0IG89MCxuPTA7Zm9yKGxldCBhPXM7YTxzK2k7YSsrKXtjb25zdCBpPShyPWgoYSx0KXx8MjAsTWF0aC5yb3VuZCg5NipyLzcyKSk7aWYoZS5oZWlnaHQ8bytpKXtlLnBvc2l0aW9uLnJvd1NwYW49bisxLGUudG90YWxIZWlnaHQ9ZS5oZWlnaHQsZS5oZWlnaHQ9ZS50b3RhbEhlaWdodC1vO2JyZWFrfW8rPWksbisrfX1lbHNlIGUudG90YWxIZWlnaHQ9ZS5oZWlnaHQ7dmFyIHJ9KShhLHIpLG4pe2NvbnN0IGU9bi5maW5kKGU9PmUuc2hlZXRJZD09PW8pO2U/ZS5pbWFnZS5wdXNoKGEpOm4ucHVzaCh7c2hlZXRJZDpvLGltYWdlOlthXX0pfWVsc2UgdGhpcy5pbWFnZXMuc2V0KGEuaWQsW3tzaGVldElkOm8saW1hZ2U6W2FdfV0pLHRoaXMud29ya2Jvb2tJbWFnZUlkcy5zZXQoYS5pZCx7dHlwZTphLmltYWdlVHlwZSxpbmRleDp0aGlzLndvcmtib29rSW1hZ2VJZHMuc2l6ZX0pO3RoaXMuYnVpbGRTaGVldEltYWdlTWFwKG8sYSl9c3RhdGljIGJ1aWxkU2hlZXRJbWFnZU1hcChlLHQpe2xldCBpPXRoaXMud29ya3NoZWV0SW1hZ2VJZHMuZ2V0KGUpO2l8fChpPW5ldyBNYXAsdGhpcy53b3Jrc2hlZXRJbWFnZUlkcy5zZXQoZSxpKSk7Y29uc3Qgcz10aGlzLndvcmtzaGVldEltYWdlcy5nZXQoZSk7cz8ocy5wdXNoKHQpLGkuZ2V0KHQuaWQpfHxpLnNldCh0LmlkLHtpbmRleDppLnNpemUsdHlwZTp0LmltYWdlVHlwZX0pKToodGhpcy53b3Jrc2hlZXRJbWFnZXMuc2V0KGUsW3RdKSxpLnNldCh0LmlkLHtpbmRleDowLHR5cGU6dC5pbWFnZVR5cGV9KSl9c3RhdGljIGFkZFNoZWV0TmFtZShlKXtjb25zdCB0PXMuXy5lc2NhcGVTdHJpbmcoZS5uYW1lKXx8IiI7bGV0IGk9IiI7Zm9yKDstMSE9PXRoaXMuc2hlZXROYW1lcy5pbmRleE9mKGAke3R9JHtpfWApOylpZigiIj09PWkpaT0iXzEiO2Vsc2V7Y29uc3QgZT1wYXJzZUludChpLnNsaWNlKDEpLDEwKTtpPSJfIisoZSsxKX1lLm5hbWU9YCR7dH0ke2l9YCx0aGlzLnNoZWV0TmFtZXMucHVzaChlLm5hbWUpfXN0YXRpYyBnZXRTdHJpbmdQb3NpdGlvbihlKXtyZXR1cm4gdGhpcy5zaGFyZWRTdHJpbmdzLmhhcyhlKT90aGlzLnNoYXJlZFN0cmluZ3MuZ2V0KGUpOih0aGlzLnNoYXJlZFN0cmluZ3Muc2V0KGUsdGhpcy5zaGFyZWRTdHJpbmdzLnNpemUpLHRoaXMuc2hhcmVkU3RyaW5ncy5zaXplLTEpfXN0YXRpYyByZXNldEZhY3RvcnkoKXt0aGlzLnNoYXJlZFN0cmluZ3M9bmV3IE1hcCx0aGlzLmltYWdlcz1uZXcgTWFwLHRoaXMud29ya3NoZWV0SW1hZ2VzPW5ldyBNYXAsdGhpcy53b3JrYm9va0ltYWdlSWRzPW5ldyBNYXAsdGhpcy53b3Jrc2hlZXRJbWFnZUlkcz1uZXcgTWFwLHRoaXMuc2hlZXROYW1lcz1bXSx0aGlzLmZhY3RvcnlNb2RlPXMuRXhjZWxGYWN0b3J5TW9kZS5TSU5HTEVfU0hFRVR9c3RhdGljIGNyZWF0ZVdvcmtib29rKCl7cmV0dXJuIHUoRGUuZ2V0VGVtcGxhdGUodGhpcy5zaGVldE5hbWVzKSl9c3RhdGljIGNyZWF0ZVN0eWxlc2hlZXQoZSl7cmV0dXJuIHUoUmUuZ2V0VGVtcGxhdGUoZSkpfXN0YXRpYyBjcmVhdGVTaGFyZWRTdHJpbmdzKCl7cmV0dXJuIHUoRy5nZXRUZW1wbGF0ZSh0aGlzLnNoYXJlZFN0cmluZ3MpKX1zdGF0aWMgY3JlYXRlQ29yZShlKXtyZXR1cm4gdShvLmdldFRlbXBsYXRlKGUpKX1zdGF0aWMgY3JlYXRlQ29udGVudFR5cGVzKGUpe3JldHVybiB1KGEuZ2V0VGVtcGxhdGUoZSkpfXN0YXRpYyBjcmVhdGVSZWxzKCl7Y29uc3QgZT1fZS5nZXRUZW1wbGF0ZShbe0lkOiJySWQxIixUeXBlOiJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL29mZmljZURvY3VtZW50IixUYXJnZXQ6InhsL3dvcmtib29rLnhtbCJ9LHtJZDoicklkMiIsVHlwZToiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzL21ldGFkYXRhL2NvcmUtcHJvcGVydGllcyIsVGFyZ2V0OiJkb2NQcm9wcy9jb3JlLnhtbCJ9XSk7cmV0dXJuIHUoZSl9c3RhdGljIGNyZWF0ZVRoZW1lKCl7cmV0dXJuIHUoSS5nZXRUZW1wbGF0ZSgpKX1zdGF0aWMgY3JlYXRlV29ya2Jvb2tSZWxzKGUpe2NvbnN0IHQ9bmV3IEFycmF5KGUpLmZpbGwodm9pZCAwKS5tYXAoKGUsdCk9Pih7SWQ6InJJZCIrKHQrMSksVHlwZToiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy93b3Jrc2hlZXQiLFRhcmdldDpgd29ya3NoZWV0cy9zaGVldCR7dCsxfS54bWxgfSkpLGk9X2UuZ2V0VGVtcGxhdGUoWy4uLnQse0lkOiJySWQiKyhlKzEpLFR5cGU6Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvdGhlbWUiLFRhcmdldDoidGhlbWUvdGhlbWUxLnhtbCJ9LHtJZDoicklkIisoZSsyKSxUeXBlOiJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3N0eWxlcyIsVGFyZ2V0OiJzdHlsZXMueG1sIn0se0lkOiJySWQiKyhlKzMpLFR5cGU6Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvc2hhcmVkU3RyaW5ncyIsVGFyZ2V0OiJzaGFyZWRTdHJpbmdzLnhtbCJ9XSk7cmV0dXJuIHUoaSl9c3RhdGljIGNyZWF0ZURyYXdpbmcoZSl7cmV0dXJuIHUody5nZXRUZW1wbGF0ZSh7c2hlZXRJbmRleDplfSkpfXN0YXRpYyBjcmVhdGVEcmF3aW5nUmVsKGUpe2NvbnN0IHQ9dGhpcy53b3Jrc2hlZXRJbWFnZUlkcy5nZXQoZSksaT1bXTtyZXR1cm4gdC5mb3JFYWNoKChlLHQpPT57aS5wdXNoKHtJZDoicklkIisoZS5pbmRleCsxKSxUeXBlOiJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2ltYWdlIixUYXJnZXQ6YC4uL21lZGlhL2ltYWdlJHt0aGlzLndvcmtib29rSW1hZ2VJZHMuZ2V0KHQpLmluZGV4KzF9LiR7ZS50eXBlfWB9KX0pLHUoX2UuZ2V0VGVtcGxhdGUoaSkpfXN0YXRpYyBjcmVhdGVXb3Jrc2hlZXREcmF3aW5nUmVsKGUpe2NvbnN0IHQ9X2UuZ2V0VGVtcGxhdGUoW3tJZDoicklkMSIsVHlwZToiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9kcmF3aW5nIixUYXJnZXQ6YC4uL2RyYXdpbmdzL2RyYXdpbmcke2UrMX0ueG1sYH1dKTtyZXR1cm4gdSh0KX1zdGF0aWMgY3JlYXRlV29ya3NoZWV0KGUsdCl7cmV0dXJuIHUoR2UuZ2V0VGVtcGxhdGUoe3dvcmtzaGVldDplLGN1cnJlbnRTaGVldDp0aGlzLnNoZWV0TmFtZXMubGVuZ3RoLTEsY29uZmlnOnR9KSl9fVZlLnNoYXJlZFN0cmluZ3M9bmV3IE1hcCxWZS5zaGVldE5hbWVzPVtdLFZlLmltYWdlcz1uZXcgTWFwLFZlLndvcmtzaGVldEltYWdlcz1uZXcgTWFwLFZlLndvcmtib29rSW1hZ2VJZHM9bmV3IE1hcCxWZS53b3Jrc2hlZXRJbWFnZUlkcz1uZXcgTWFwLFZlLmZhY3RvcnlNb2RlPXMuRXhjZWxGYWN0b3J5TW9kZS5TSU5HTEVfU0hFRVQ7Y2xhc3MgQmUgZXh0ZW5kcyBsLkJhc2VHcmlkU2VyaWFsaXppbmdTZXNzaW9ue2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMubWl4ZWRTdHlsZXM9e30sdGhpcy5taXhlZFN0eWxlQ291bnRlcj0wLHRoaXMucm93cz1bXSx0aGlzLmNvbmZpZz1PYmplY3QuYXNzaWduKHt9LGUpLHRoaXMuc3R5bGVzQnlJZHM9e30sdGhpcy5jb25maWcuYmFzZUV4Y2VsU3R5bGVzLmZvckVhY2goZT0+e3RoaXMuc3R5bGVzQnlJZHNbZS5pZF09ZX0pLHRoaXMuZXhjZWxTdHlsZXM9Wy4uLnRoaXMuY29uZmlnLmJhc2VFeGNlbFN0eWxlcyx7aWQ6Il9xdW90ZVByZWZpeCIscXVvdGVQcmVmaXg6MX1dfWFkZEN1c3RvbUNvbnRlbnQoZSl7ZS5mb3JFYWNoKGU9Pntjb25zdCB0PXRoaXMucm93cy5sZW5ndGgrMTtsZXQgaTt0aGlzLmNvbmZpZy5zdXBwcmVzc1Jvd091dGxpbmV8fG51bGw9PWUub3V0bGluZUxldmVsfHwoaT1lLm91dGxpbmVMZXZlbCk7Y29uc3Qgcz17aGVpZ2h0OmgodCxlLmhlaWdodHx8dGhpcy5jb25maWcucm93SGVpZ2h0KSxjZWxsczooZS5jZWxsc3x8W10pLm1hcCgoZSxpKT0+e3ZhciBzLHIsbztjb25zdCBuPXRoaXMuYWRkSW1hZ2UodCx0aGlzLmNvbHVtbnNUb0V4cG9ydFtpXSxudWxsPT09KHM9ZS5kYXRhKXx8dm9pZCAwPT09cz92b2lkIDA6cy52YWx1ZSk7bGV0IGE9bnVsbDtlLnN0eWxlSWQmJihhPSJzdHJpbmciPT10eXBlb2YgZS5zdHlsZUlkP1tlLnN0eWxlSWRdOmUuc3R5bGVJZCk7Y29uc3QgbD10aGlzLmdldFN0eWxlSWQoYSk7aWYobilyZXR1cm4gdGhpcy5jcmVhdGVDZWxsKGwsdGhpcy5nZXREYXRhVHlwZUZvclZhbHVlKG4udmFsdWUpLG51bGw9PW4udmFsdWU/IiI6bi52YWx1ZSk7Y29uc3QgZD1udWxsIT09KG89bnVsbD09PShyPWUuZGF0YSl8fHZvaWQgMD09PXI/dm9pZCAwOnIudmFsdWUpJiZ2b2lkIDAhPT1vP286IiIsYz10aGlzLmdldERhdGFUeXBlRm9yVmFsdWUoZCk7cmV0dXJuIGUubWVyZ2VBY3Jvc3M/dGhpcy5jcmVhdGVNZXJnZWRDZWxsKGwsYyxkLGUubWVyZ2VBY3Jvc3MpOnRoaXMuY3JlYXRlQ2VsbChsLGMsZCl9KSxvdXRsaW5lTGV2ZWw6aX07bnVsbCE9ZS5jb2xsYXBzZWQmJihzLmNvbGxhcHNlZD1lLmNvbGxhcHNlZCksbnVsbCE9ZS5oaWRkZW4mJihzLmhpZGRlbj1lLmhpZGRlbiksdGhpcy5yb3dzLnB1c2gocyl9KX1vbk5ld0hlYWRlckdyb3VwaW5nUm93KCl7Y29uc3QgZT1bXTtyZXR1cm4gdGhpcy5yb3dzLnB1c2goe2NlbGxzOmUsaGVpZ2h0OmgodGhpcy5yb3dzLmxlbmd0aCsxLHRoaXMuY29uZmlnLmhlYWRlclJvd0hlaWdodCl9KSx7b25Db2x1bW46KHQsaSxzLHIsbyk9Pntjb25zdCBuPXRoaXMuY29uZmlnLnN0eWxlTGlua2VyKHtyb3dUeXBlOmwuUm93VHlwZS5IRUFERVJfR1JPVVBJTkcscm93SW5kZXg6MSx2YWx1ZToiZ3JvdXBpbmctIitpLGNvbHVtbkdyb3VwOnR9KTtlLnB1c2goT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuY3JlYXRlTWVyZ2VkQ2VsbCh0aGlzLmdldFN0eWxlSWQobiksdGhpcy5nZXREYXRhVHlwZUZvclZhbHVlKCJzdHJpbmciKSxpLHIpKSx7Y29sbGFwc2libGVSYW5nZXM6b30pKX19fW9uTmV3SGVhZGVyUm93KCl7cmV0dXJuIHRoaXMub25OZXdSb3codGhpcy5vbk5ld0hlYWRlckNvbHVtbix0aGlzLmNvbmZpZy5oZWFkZXJSb3dIZWlnaHQpfW9uTmV3Qm9keVJvdyhlKXtjb25zdCB0PXRoaXMub25OZXdSb3codGhpcy5vbk5ld0JvZHlDb2x1bW4sdGhpcy5jb25maWcucm93SGVpZ2h0KTtyZXR1cm4gZSYmdGhpcy5hZGRSb3dPdXRsaW5lSWZOZWNlc3NhcnkoZSksdH1wcmVwYXJlKGUpe3N1cGVyLnByZXBhcmUoZSksdGhpcy5jb2x1bW5zVG9FeHBvcnQ9Wy4uLmVdLHRoaXMuY29scz1lLm1hcCgoZSx0KT0+dGhpcy5jb252ZXJ0Q29sdW1uVG9FeGNlbChlLHQpKX1wYXJzZSgpe2NvbnN0IGU9dGhpcy5yb3dzLnJlZHVjZSgoZSx0KT0+TWF0aC5tYXgoZSx0LmNlbGxzLmxlbmd0aCksMCk7Zm9yKDt0aGlzLmNvbHMubGVuZ3RoPGU7KXRoaXMuY29scy5wdXNoKHRoaXMuY29udmVydENvbHVtblRvRXhjZWwobnVsbCx0aGlzLmNvbHMubGVuZ3RoKzEpKTtjb25zdCB0PXtuYW1lOnRoaXMuY29uZmlnLnNoZWV0TmFtZSx0YWJsZTp7Y29sdW1uczp0aGlzLmNvbHMscm93czp0aGlzLnJvd3N9fTtyZXR1cm4gdGhpcy5jcmVhdGVFeGNlbCh0KX1hZGRSb3dPdXRsaW5lSWZOZWNlc3NhcnkoZSl7Y29uc3R7Z3JpZE9wdGlvbnNTZXJ2aWNlOnQsc3VwcHJlc3NSb3dPdXRsaW5lOmkscm93R3JvdXBFeHBhbmRTdGF0ZTpyPSJleHBhbmRlZCJ9PXRoaXMuY29uZmlnO2lmKHQuZ2V0KCJncm91cEhpZGVPcGVuUGFyZW50cyIpfHxpfHxudWxsPT1lLmxldmVsKXJldHVybjtjb25zdCBvPWUuZm9vdGVyPzE6MCxuPXMuXy5sYXN0KHRoaXMucm93cyk7aWYobi5vdXRsaW5lTGV2ZWw9ZS5sZXZlbCtvLCJleHBhbmRlZCI9PT1yKXJldHVybjtjb25zdCBhPSJjb2xsYXBzZWQiPT09cjtpZihlLmlzRXhwYW5kYWJsZSgpKXtjb25zdCB0PSFhJiZlLmV4cGFuZGVkO24uY29sbGFwc2VkPSF0fW4uaGlkZGVuPSEhZS5wYXJlbnQmJi0xIT09ZS5wYXJlbnQubGV2ZWwmJihhfHx0aGlzLmlzQW55UGFyZW50Q29sbGFwc2VkKGUucGFyZW50KSl9aXNBbnlQYXJlbnRDb2xsYXBzZWQoZSl7Zm9yKDtlJiYtMSE9PWUubGV2ZWw7KXtpZighZS5leHBhbmRlZClyZXR1cm4hMDtlPWUucGFyZW50fXJldHVybiExfWNvbnZlcnRDb2x1bW5Ub0V4Y2VsKGUsdCl7Y29uc3QgaT10aGlzLmNvbmZpZy5jb2x1bW5XaWR0aDtpZihpKXJldHVybiJudW1iZXIiPT10eXBlb2YgaT97d2lkdGg6aX06e3dpZHRoOmkoe2NvbHVtbjplLGluZGV4OnR9KX07aWYoZSl7Y29uc3QgdD03NTtyZXR1cm57d2lkdGg6TWF0aC5tYXgoZS5nZXRBY3R1YWxXaWR0aCgpLHQpfX1yZXR1cm57fX1vbk5ld0hlYWRlckNvbHVtbihlLHQpe3JldHVybihpLHMpPT57Y29uc3Qgcj10aGlzLmV4dHJhY3RIZWFkZXJWYWx1ZShpKSxvPXRoaXMuY29uZmlnLnN0eWxlTGlua2VyKHtyb3dUeXBlOmwuUm93VHlwZS5IRUFERVIscm93SW5kZXg6ZSx2YWx1ZTpyLGNvbHVtbjppfSk7dC5wdXNoKHRoaXMuY3JlYXRlQ2VsbCh0aGlzLmdldFN0eWxlSWQobyksdGhpcy5nZXREYXRhVHlwZUZvclZhbHVlKCJzdHJpbmciKSxyKSl9fW9uTmV3Qm9keUNvbHVtbihlLHQpe2xldCBpPTA7cmV0dXJuKHMscixvKT0+e2lmKGk+MClyZXR1cm4gdm9pZChpLT0xKTtjb25zdHt2YWx1ZTpuLHZhbHVlRm9ybWF0dGVkOmF9PXRoaXMuZXh0cmFjdFJvd0NlbGxWYWx1ZShzLHIsZSwiZXhjZWwiLG8pLGQ9dGhpcy5jb25maWcuc3R5bGVMaW5rZXIoe3Jvd1R5cGU6bC5Sb3dUeXBlLkJPRFkscm93SW5kZXg6ZSx2YWx1ZTpuLGNvbHVtbjpzLG5vZGU6b30pLGM9dGhpcy5nZXRTdHlsZUlkKGQpLGg9cy5nZXRDb2xTcGFuKG8pLHU9dGhpcy5hZGRJbWFnZShlLHMsbik7dT90LnB1c2godGhpcy5jcmVhdGVDZWxsKGMsdGhpcy5nZXREYXRhVHlwZUZvclZhbHVlKHUudmFsdWUpLG51bGw9PXUudmFsdWU/IiI6dS52YWx1ZSkpOmg+MT8oaT1oLTEsdC5wdXNoKHRoaXMuY3JlYXRlTWVyZ2VkQ2VsbChjLHRoaXMuZ2V0RGF0YVR5cGVGb3JWYWx1ZShuKSxuLGgtMSkpKTp0LnB1c2godGhpcy5jcmVhdGVDZWxsKGMsdGhpcy5nZXREYXRhVHlwZUZvclZhbHVlKG4pLG4sYSkpfX1vbk5ld1JvdyhlLHQpe2NvbnN0IGk9W107cmV0dXJuIHRoaXMucm93cy5wdXNoKHtjZWxsczppLGhlaWdodDpoKHRoaXMucm93cy5sZW5ndGgrMSx0KX0pLHtvbkNvbHVtbjplLmJpbmQodGhpcyx0aGlzLnJvd3MubGVuZ3RoLGkpKCl9fWNyZWF0ZUV4Y2VsKGUpe2NvbnN0e2V4Y2VsU3R5bGVzOnQsY29uZmlnOml9PXRoaXM7cmV0dXJuIFZlLmNyZWF0ZUV4Y2VsKHQsZSxpKX1nZXREYXRhVHlwZUZvclZhbHVlKGUpe3JldHVybiB2b2lkIDA9PT1lPyJlbXB0eSI6dGhpcy5pc051bWVyaWNhbChlKT8ibiI6InMifWdldFR5cGVGcm9tU3R5bGUoZSx0KXtpZih0aGlzLmlzRm9ybXVsYSh0KSlyZXR1cm4iZiI7aWYoZSYmZS5kYXRhVHlwZSlzd2l0Y2goZS5kYXRhVHlwZS50b0xvY2FsZUxvd2VyQ2FzZSgpKXtjYXNlImZvcm11bGEiOnJldHVybiJmIjtjYXNlInN0cmluZyI6cmV0dXJuInMiO2Nhc2UibnVtYmVyIjpyZXR1cm4ibiI7Y2FzZSJkYXRldGltZSI6cmV0dXJuImQiO2Nhc2UiZXJyb3IiOnJldHVybiJlIjtjYXNlImJvb2xlYW4iOnJldHVybiJiIjtkZWZhdWx0OmNvbnNvbGUud2FybihgQUcgR3JpZDogVW5yZWNvZ25pemVkIGRhdGEgdHlwZSBmb3IgZXhjZWwgZXhwb3J0IFske2UuaWR9LmRhdGFUeXBlPSR7ZS5kYXRhVHlwZX1dYCl9cmV0dXJuIG51bGx9YWRkSW1hZ2UoZSx0LGkpe2lmKCF0aGlzLmNvbmZpZy5hZGRJbWFnZVRvQ2VsbClyZXR1cm47Y29uc3Qgcz10aGlzLmNvbmZpZy5hZGRJbWFnZVRvQ2VsbChlLHQsaSk7cmV0dXJuIHM/KFZlLmJ1aWxkSW1hZ2VNYXAocy5pbWFnZSxlLHQsdGhpcy5jb2x1bW5zVG9FeHBvcnQsdGhpcy5jb25maWcucm93SGVpZ2h0KSxzKTp2b2lkIDB9Y3JlYXRlQ2VsbChlLHQsaSxzKXtjb25zdCByPXRoaXMuZ2V0U3R5bGVCeUlkKGUpOyEobnVsbD09cj92b2lkIDA6ci5kYXRhVHlwZSkmJiJzIj09PXQmJnMmJihpPXMpO2NvbnN0IG89dGhpcy5nZXRUeXBlRnJvbVN0eWxlKHIsaSl8fHQse3ZhbHVlOm4sZXNjYXBlZDphfT10aGlzLmdldENlbGxWYWx1ZShvLGkpLGw9W107cmV0dXJuIHImJmwucHVzaChlKSxhJiZsLnB1c2goIl9xdW90ZVByZWZpeCIpLHtzdHlsZUlkOmU9dGhpcy5nZXRTdHlsZUlkKGwpfHx2b2lkIDAsZGF0YTp7dHlwZTpvLHZhbHVlOm59fX1jcmVhdGVNZXJnZWRDZWxsKGUsdCxpLHMpe2NvbnN0IHI9bnVsbD09aT8iIjppO3JldHVybntzdHlsZUlkOnRoaXMuZ2V0U3R5bGVCeUlkKGUpP2U6dm9pZCAwLGRhdGE6e3R5cGU6dCx2YWx1ZToicyI9PT10P1ZlLmdldFN0cmluZ1Bvc2l0aW9uKHIpLnRvU3RyaW5nKCk6aX0sbWVyZ2VBY3Jvc3M6c319Z2V0Q2VsbFZhbHVlKGUsdCl7bGV0IGk9ITE7cmV0dXJuIG51bGw9PXQmJihlPSJzIix0PSIiKSwicyI9PT1lPyh0JiYiJyI9PT10WzBdJiYoaT0hMCx0PXQuc2xpY2UoMSkpLHQ9VmUuZ2V0U3RyaW5nUG9zaXRpb24odCkudG9TdHJpbmcoKSk6ImYiPT09ZT90PXQuc2xpY2UoMSk6Im4iPT09ZSYmKHQ9TnVtYmVyKHQpLnRvU3RyaW5nKCkpLHt2YWx1ZTp0LGVzY2FwZWQ6aX19Z2V0U3R5bGVJZChlKXtpZighZXx8IWUubGVuZ3RoKXJldHVybiBudWxsO2lmKDE9PT1lLmxlbmd0aClyZXR1cm4gZVswXTtjb25zdCB0PWUuam9pbigiLSIpO3JldHVybiB0aGlzLm1peGVkU3R5bGVzW3RdfHx0aGlzLmFkZE5ld01peGVkU3R5bGUoZSksdGhpcy5taXhlZFN0eWxlc1t0XS5leGNlbElEfWRlZXBDbG9uZU9iamVjdChlKXtyZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSl9YWRkTmV3TWl4ZWRTdHlsZShlKXt0aGlzLm1peGVkU3R5bGVDb3VudGVyKz0xO2NvbnN0IHQ9Im1peGVkU3R5bGUiK3RoaXMubWl4ZWRTdHlsZUNvdW50ZXIsaT17fTtmb3IoY29uc3QgdCBvZiBlKWZvcihjb25zdCBlIG9mIHRoaXMuZXhjZWxTdHlsZXMpZS5pZD09PXQmJnMuXy5tZXJnZURlZXAoaSx0aGlzLmRlZXBDbG9uZU9iamVjdChlKSk7aS5pZD10LGkubmFtZT10O2NvbnN0IHI9ZS5qb2luKCItIik7dGhpcy5taXhlZFN0eWxlc1tyXT17ZXhjZWxJRDp0LGtleTpyLHJlc3VsdDppfSx0aGlzLmV4Y2VsU3R5bGVzLnB1c2goaSksdGhpcy5zdHlsZXNCeUlkc1t0XT1pfWlzRm9ybXVsYShlKXtyZXR1cm4gbnVsbCE9ZSYmKHRoaXMuY29uZmlnLmF1dG9Db252ZXJ0Rm9ybXVsYXMmJmUudG9TdHJpbmcoKS5zdGFydHNXaXRoKCI9IikpfWlzTnVtZXJpY2FsKGUpe3JldHVybiJiaWdpbnQiPT10eXBlb2YgZXx8aXNGaW5pdGUoZSkmJiIiIT09ZSYmIWlzTmFOKHBhcnNlRmxvYXQoZSkpfWdldFN0eWxlQnlJZChlKXtyZXR1cm4gbnVsbD09ZT9udWxsOnRoaXMuc3R5bGVzQnlJZHNbZV18fG51bGx9fXZhciBIZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjb25zdCBXZT0oZSx0PTExLGk9IkFHIEdyaWQiKT0+KGUmJmUubGVuZ3RoPjA/KCgoKT0+e2lmKGwuWmlwQ29udGFpbmVyLmFkZEZvbGRlcnMoWyJfcmVscy8iLCJkb2NQcm9wcy8iLCJ4bC8iLCJ4bC90aGVtZS8iLCJ4bC9fcmVscy8iLCJ4bC93b3Jrc2hlZXRzLyJdKSwhVmUuaW1hZ2VzLnNpemUpcmV0dXJuO2wuWmlwQ29udGFpbmVyLmFkZEZvbGRlcnMoWyJ4bC93b3Jrc2hlZXRzL19yZWxzIiwieGwvZHJhd2luZ3MvIiwieGwvZHJhd2luZ3MvX3JlbHMiLCJ4bC9tZWRpYS8iXSk7bGV0IGU9MDtWZS5pbWFnZXMuZm9yRWFjaCh0PT57Y29uc3QgaT10WzBdLmltYWdlWzBdLHM9aS5pbWFnZVR5cGU7bC5aaXBDb250YWluZXIuYWRkRmlsZShgeGwvbWVkaWEvaW1hZ2UkeysrZX0uJHtzfWAsaS5iYXNlNjQsITApfSl9KSgpLChlPT57bGV0IHQ9MDtlLmZvckVhY2goKGUsaSk9PntsLlppcENvbnRhaW5lci5hZGRGaWxlKGB4bC93b3Jrc2hlZXRzL3NoZWV0JHtpKzF9LnhtbGAsZSwhMSksVmUuaW1hZ2VzLnNpemUmJlZlLndvcmtzaGVldEltYWdlcy5nZXQoaSkmJktlKGksdCsrKX0pfSkoZSksKChlLHQsaSk9PntsLlppcENvbnRhaW5lci5hZGRGaWxlKCJ4bC93b3JrYm9vay54bWwiLFZlLmNyZWF0ZVdvcmtib29rKCkpLGwuWmlwQ29udGFpbmVyLmFkZEZpbGUoInhsL3N0eWxlcy54bWwiLFZlLmNyZWF0ZVN0eWxlc2hlZXQoZSkpLGwuWmlwQ29udGFpbmVyLmFkZEZpbGUoInhsL3NoYXJlZFN0cmluZ3MueG1sIixWZS5jcmVhdGVTaGFyZWRTdHJpbmdzKCkpLGwuWmlwQ29udGFpbmVyLmFkZEZpbGUoInhsL3RoZW1lL3RoZW1lMS54bWwiLFZlLmNyZWF0ZVRoZW1lKCkpLGwuWmlwQ29udGFpbmVyLmFkZEZpbGUoInhsL19yZWxzL3dvcmtib29rLnhtbC5yZWxzIixWZS5jcmVhdGVXb3JrYm9va1JlbHMoaSkpLGwuWmlwQ29udGFpbmVyLmFkZEZpbGUoImRvY1Byb3BzL2NvcmUueG1sIixWZS5jcmVhdGVDb3JlKHQpKSxsLlppcENvbnRhaW5lci5hZGRGaWxlKCJbQ29udGVudF9UeXBlc10ueG1sIixWZS5jcmVhdGVDb250ZW50VHlwZXMoaSkpLGwuWmlwQ29udGFpbmVyLmFkZEZpbGUoIl9yZWxzLy5yZWxzIixWZS5jcmVhdGVSZWxzKCkpfSkodCxpLGUubGVuZ3RoKSk6Y29uc29sZS53YXJuKCJBRyBHcmlkOiBJbnZhbGlkIHBhcmFtcyBzdXBwbGllZCB0byBnZXRNdWx0aXBsZVNoZWV0c0FzRXhjZWwoKSAtIGBFeGNlbEV4cG9ydFBhcmFtcy5kYXRhYCBpcyBlbXB0eS4iKSxWZS5yZXNldEZhY3RvcnkoKSwhKCFlfHwwPT09ZS5sZW5ndGgpKSxqZT1lPT57Y29uc3R7ZGF0YTp0LGZvbnRTaXplOmksYXV0aG9yOnN9PWUscj1lLm1pbWVUeXBlfHwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQiO3JldHVybiBXZSh0LGkscyk/bC5aaXBDb250YWluZXIuZ2V0WmlwRmlsZShyKTpQcm9taXNlLnJlc29sdmUodm9pZCAwKX0sVWU9ZT0+e2NvbnN0e2RhdGE6dCxmb250U2l6ZTppLGF1dGhvcjpzfT1lLHI9ZS5taW1lVHlwZXx8ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0IjtpZihXZSh0LGkscykpcmV0dXJuIGwuWmlwQ29udGFpbmVyLmdldFVuY29tcHJlc3NlZFppcEZpbGUocil9LHplPWU9Pntjb25zdHtmaWxlTmFtZTp0PSJleHBvcnQueGxzeCJ9PWU7amUoZSkudGhlbihlPT57aWYoZSl7Y29uc3QgaT0iZnVuY3Rpb24iPT10eXBlb2YgdD90KCk6dDtsLkRvd25sb2FkZXIuZG93bmxvYWQoaSxlKX19KX0sS2U9KGUsdCk9Pntjb25zdCBpPWB4bC9kcmF3aW5ncy9kcmF3aW5nJHt0KzF9LnhtbGAscz1geGwvZHJhd2luZ3MvX3JlbHMvZHJhd2luZyR7dCsxfS54bWwucmVsc2Ascj1geGwvd29ya3NoZWV0cy9fcmVscy9zaGVldCR7ZSsxfS54bWwucmVsc2A7bC5aaXBDb250YWluZXIuYWRkRmlsZShzLFZlLmNyZWF0ZURyYXdpbmdSZWwoZSkpLGwuWmlwQ29udGFpbmVyLmFkZEZpbGUoaSxWZS5jcmVhdGVEcmF3aW5nKGUpKSxsLlppcENvbnRhaW5lci5hZGRGaWxlKHIsVmUuY3JlYXRlV29ya3NoZWV0RHJhd2luZ1JlbCh0KSl9O2xldCBZZT1jbGFzcyBleHRlbmRzIGwuQmFzZUNyZWF0b3J7cG9zdENvbnN0cnVjdCgpe3RoaXMuc2V0QmVhbnMoe2dyaWRTZXJpYWxpemVyOnRoaXMuZ3JpZFNlcmlhbGl6ZXIsZ3JpZE9wdGlvbnNTZXJ2aWNlOnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlfSl9Z2V0TWVyZ2VkUGFyYW1zKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJkZWZhdWx0RXhjZWxFeHBvcnRQYXJhbXMiKTtyZXR1cm4gT2JqZWN0LmFzc2lnbih7fSx0LGUpfWV4cG9ydChlKXtpZih0aGlzLmlzRXhwb3J0U3VwcHJlc3NlZCgpKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZDogRXhwb3J0IGNhbmNlbGxlZC4gRXhwb3J0IGlzIG5vdCBhbGxvd2VkIGFzIHBlciB5b3VyIGNvbmZpZ3VyYXRpb24uIik7Y29uc3QgdD10aGlzLmdldE1lcmdlZFBhcmFtcyhlKSxpPXtkYXRhOlt0aGlzLmdldERhdGEodCldLGZvbnRTaXplOnQuZm9udFNpemUsYXV0aG9yOnQuYXV0aG9yLG1pbWVUeXBlOnQubWltZVR5cGV9O3RoaXMucGFja2FnZUNvbXByZXNzZWRGaWxlKGkpLnRoZW4oZT0+e2lmKGUpe2NvbnN0e2ZpbGVOYW1lOml9PXQscz0iZnVuY3Rpb24iPT10eXBlb2YgaT9pKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldEdyaWRDb21tb25QYXJhbXMoKSk6aTtsLkRvd25sb2FkZXIuZG93bmxvYWQodGhpcy5nZXRGaWxlTmFtZShzKSxlKX19KX1leHBvcnREYXRhQXNFeGNlbChlKXt0aGlzLmV4cG9ydChlKX1nZXREYXRhQXNFeGNlbChlKXtjb25zdCB0PXRoaXMuZ2V0TWVyZ2VkUGFyYW1zKGUpLGk9e2RhdGE6W3RoaXMuZ2V0RGF0YSh0KV0sZm9udFNpemU6dC5mb250U2l6ZSxhdXRob3I6dC5hdXRob3IsbWltZVR5cGU6dC5taW1lVHlwZX07cmV0dXJuIHRoaXMucGFja2FnZUZpbGUoaSl9c2V0RmFjdG9yeU1vZGUoZSl7VmUuZmFjdG9yeU1vZGU9ZX1nZXRGYWN0b3J5TW9kZSgpe3JldHVybiBWZS5mYWN0b3J5TW9kZX1nZXRTaGVldERhdGFGb3JFeGNlbChlKXtjb25zdCB0PXRoaXMuZ2V0TWVyZ2VkUGFyYW1zKGUpO3JldHVybiB0aGlzLmdldERhdGEodCl9Z2V0TXVsdGlwbGVTaGVldHNBc0V4Y2VsKGUpe3JldHVybiBVZShlKX1leHBvcnRNdWx0aXBsZVNoZWV0c0FzRXhjZWwoZSl7emUoZSl9Z2V0RGVmYXVsdEZpbGVFeHRlbnNpb24oKXtyZXR1cm4ieGxzeCJ9Y3JlYXRlU2VyaWFsaXppbmdTZXNzaW9uKGUpe2NvbnN0e2NvbHVtbk1vZGVsOnQsdmFsdWVTZXJ2aWNlOmksZ3JpZE9wdGlvbnNTZXJ2aWNlOnMsdmFsdWVGb3JtYXR0ZXJTZXJ2aWNlOnIsdmFsdWVQYXJzZXJTZXJ2aWNlOm99PXRoaXM7bGV0IG47aWYobnVsbCE9ZS5zaGVldE5hbWUpe2NvbnN0e3NoZWV0TmFtZTp0fT1lLGk9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dCh0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRHcmlkQ29tbW9uUGFyYW1zKCkpOnQ7bj1TdHJpbmcoaSkuc3Vic3RyaW5nKDAsMzEpfWVsc2Ugbj0iYWctZ3JpZCI7Y29uc3QgYT1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3NoZWV0TmFtZTpuLGNvbHVtbk1vZGVsOnQsdmFsdWVTZXJ2aWNlOmksZ3JpZE9wdGlvbnNTZXJ2aWNlOnMsdmFsdWVGb3JtYXR0ZXJTZXJ2aWNlOnIsdmFsdWVQYXJzZXJTZXJ2aWNlOm8sc3VwcHJlc3NSb3dPdXRsaW5lOmUuc3VwcHJlc3NSb3dPdXRsaW5lfHxlLnNraXBSb3dHcm91cHMsaGVhZGVyUm93SGVpZ2h0OmUuaGVhZGVyUm93SGVpZ2h0fHxlLnJvd0hlaWdodCxiYXNlRXhjZWxTdHlsZXM6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJleGNlbFN0eWxlcyIpfHxbXSxzdHlsZUxpbmtlcjp0aGlzLnN0eWxlTGlua2VyLmJpbmQodGhpcyl9KTtyZXR1cm4gbmV3IEJlKGEpfXN0eWxlTGlua2VyKGUpe2NvbnN0e3Jvd1R5cGU6dCxyb3dJbmRleDppLHZhbHVlOnIsY29sdW1uOm8sY29sdW1uR3JvdXA6bixub2RlOmF9PWUsZD10PT09bC5Sb3dUeXBlLkhFQURFUixjPXQ9PT1sLlJvd1R5cGUuSEVBREVSX0dST1VQSU5HLGg9ZD9vOm47bGV0IHU9W107aWYoZHx8YylyZXR1cm4gdS5wdXNoKCJoZWFkZXIiKSxjJiZ1LnB1c2goImhlYWRlckdyb3VwIiksaCYmKHU9dS5jb25jYXQocy5Dc3NDbGFzc0FwcGxpZXIuZ2V0SGVhZGVyQ2xhc3Nlc0Zyb21Db2xEZWYoaC5nZXREZWZpbml0aW9uKCksdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2Usb3x8bnVsbCxufHxudWxsKSkpLHU7Y29uc3QgcD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImV4Y2VsU3R5bGVzIiksZz1bImNlbGwiXTtpZighcHx8IXAubGVuZ3RoKXJldHVybiBnO2NvbnN0IG09cC5tYXAoZT0+ZS5pZCk7cmV0dXJuIHRoaXMuc3R5bGluZ1NlcnZpY2UucHJvY2Vzc0FsbENlbGxDbGFzc2VzKG8uZ2V0RGVmaW5pdGlvbigpLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3ZhbHVlOnIsZGF0YTphLmRhdGEsbm9kZTphLGNvbERlZjpvLmdldERlZmluaXRpb24oKSxjb2x1bW46byxyb3dJbmRleDppfSksZT0+e20uaW5kZXhPZihlKT4tMSYmZy5wdXNoKGUpfSksZy5zb3J0KChlLHQpPT5tLmluZGV4T2YoZSk8bS5pbmRleE9mKHQpPy0xOjEpfWlzRXhwb3J0U3VwcHJlc3NlZCgpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzRXhjZWxFeHBvcnQiKX1wYWNrYWdlQ29tcHJlc3NlZEZpbGUoZSl7cmV0dXJuIGplKGUpfXBhY2thZ2VGaWxlKGUpe3JldHVybiBVZShlKX19O0hlKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSxZZS5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLEhlKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJ2YWx1ZVNlcnZpY2UiKV0sWWUucHJvdG90eXBlLCJ2YWx1ZVNlcnZpY2UiLHZvaWQgMCksSGUoW09iamVjdChzLkF1dG93aXJlZCkoInN0eWxpbmdTZXJ2aWNlIildLFllLnByb3RvdHlwZSwic3R5bGluZ1NlcnZpY2UiLHZvaWQgMCksSGUoW09iamVjdChzLkF1dG93aXJlZCkoImdyaWRTZXJpYWxpemVyIildLFllLnByb3RvdHlwZSwiZ3JpZFNlcmlhbGl6ZXIiLHZvaWQgMCksSGUoW09iamVjdChzLkF1dG93aXJlZCkoImdyaWRPcHRpb25zU2VydmljZSIpXSxZZS5wcm90b3R5cGUsImdyaWRPcHRpb25zU2VydmljZSIsdm9pZCAwKSxIZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgidmFsdWVGb3JtYXR0ZXJTZXJ2aWNlIildLFllLnByb3RvdHlwZSwidmFsdWVGb3JtYXR0ZXJTZXJ2aWNlIix2b2lkIDApLEhlKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJ2YWx1ZVBhcnNlclNlcnZpY2UiKV0sWWUucHJvdG90eXBlLCJ2YWx1ZVBhcnNlclNlcnZpY2UiLHZvaWQgMCksSGUoW3MuUG9zdENvbnN0cnVjdF0sWWUucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxZZT1IZShbT2JqZWN0KHMuQmVhbikoImV4Y2VsQ3JlYXRvciIpXSxZZSk7Y29uc3QgJGU9e3ZlcnNpb246IjMxLjEuMSIsbW9kdWxlTmFtZTpzLk1vZHVsZU5hbWVzLkV4Y2VsRXhwb3J0TW9kdWxlLGJlYW5zOltZZSxsLkdyaWRTZXJpYWxpemVyLGwuQ3N2Q3JlYXRvcl0sZGVwZW5kYW50TW9kdWxlczpbbC5Dc3ZFeHBvcnRNb2R1bGUsci5FbnRlcnByaXNlQ29yZU1vZHVsZV19O2kuZCh0LCJFeGNlbEV4cG9ydE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuICRlfSkpLGkuZCh0LCJnZXRNdWx0aXBsZVNoZWV0c0FzRXhjZWwiLChmdW5jdGlvbigpe3JldHVybiBVZX0pKSxpLmQodCwiZXhwb3J0TXVsdGlwbGVTaGVldHNBc0V4Y2VsIiwoZnVuY3Rpb24oKXtyZXR1cm4gemV9KSl9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpO3ZhciBzPWkoMCkscj1pKDMpLG89ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgbiBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKCdcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1oZWFkZXIiIHJvbGU9InJvdyI+XG4gICAgICAgICAgICA8L2Rpdj4nKSx0aGlzLmVuYWJsZWQ9ZX1wb3N0Q29uc3RydWN0KCl7dGhpcy5zZXR1cEFkdmFuY2VkRmlsdGVyKHRoaXMuZW5hYmxlZCksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+dGhpcy5kZXN0cm95QmVhbih0aGlzLmVBZHZhbmNlZEZpbHRlcikpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0dSSURfQ09MVU1OU19DSEFOR0VELCgpPT50aGlzLm9uR3JpZENvbHVtbnNDaGFuZ2VkKCkpLHRoaXMuYWRkR3VpRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsZT0+dGhpcy5vbktleURvd24oZSkpLHRoaXMuYWRkR3VpRXZlbnRMaXN0ZW5lcigiZm9jdXNvdXQiLGU9Pnt0aGlzLmdldEZvY3VzYWJsZUVsZW1lbnQoKS5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpfHx0aGlzLmZvY3VzU2VydmljZS5jbGVhckFkdmFuY2VkRmlsdGVyQ29sdW1uKCl9KX1nZXRGb2N1c2FibGVFbGVtZW50KCl7dmFyIGUsdDtyZXR1cm4gbnVsbCE9PSh0PW51bGw9PT0oZT10aGlzLmVBZHZhbmNlZEZpbHRlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUuZ2V0R3VpKCkpJiZ2b2lkIDAhPT10P3Q6dGhpcy5nZXRHdWkoKX1zZXRFbmFibGVkKGUpe2UhPT10aGlzLmVuYWJsZWQmJnRoaXMuc2V0dXBBZHZhbmNlZEZpbHRlcihlKX1yZWZyZXNoKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuZUFkdmFuY2VkRmlsdGVyKXx8dm9pZCAwPT09ZXx8ZS5yZWZyZXNoKCl9Z2V0SGVpZ2h0KCl7cmV0dXJuIHRoaXMuaGVpZ2h0fXNldElucHV0RGlzYWJsZWQoZSl7dmFyIHQ7bnVsbD09PSh0PXRoaXMuZUFkdmFuY2VkRmlsdGVyKXx8dm9pZCAwPT09dHx8dC5zZXRJbnB1dERpc2FibGVkKGUpfXNldHVwQWR2YW5jZWRGaWx0ZXIoZSl7Y29uc3QgdD10aGlzLmdldEd1aSgpO2lmKGUpe3RoaXMuZUFkdmFuY2VkRmlsdGVyPXRoaXMuY3JlYXRlQmVhbihuZXcgUCk7Y29uc3QgZT10aGlzLmVBZHZhbmNlZEZpbHRlci5nZXRHdWkoKTt0aGlzLmVBZHZhbmNlZEZpbHRlci5hZGRDc3NDbGFzcygiYWctYWR2YW5jZWQtZmlsdGVyLWhlYWRlci1jZWxsIiksdGhpcy5oZWlnaHQ9dGhpcy5jb2x1bW5Nb2RlbC5nZXRGbG9hdGluZ0ZpbHRlcnNIZWlnaHQoKTtjb25zdCBpPXRoaXMuaGVpZ2h0KyJweCI7dC5zdHlsZS5oZWlnaHQ9aSx0LnN0eWxlLm1pbkhlaWdodD1pLHRoaXMuc2V0QXJpYVJvd0luZGV4KCkscy5fLnNldEFyaWFSb2xlKGUsImdyaWRjZWxsIikscy5fLnNldEFyaWFDb2xJbmRleChlLDEpLHRoaXMuc2V0QXJpYUNvbHVtbkNvdW50KGUpLHQuYXBwZW5kQ2hpbGQoZSl9ZWxzZSBzLl8uY2xlYXJFbGVtZW50KHQpLHRoaXMuZGVzdHJveUJlYW4odGhpcy5lQWR2YW5jZWRGaWx0ZXIpLHRoaXMuaGVpZ2h0PTA7cy5fLnNldERpc3BsYXllZCh0LGUpLHRoaXMuZW5hYmxlZD1lfXNldEFyaWFDb2x1bW5Db3VudChlKXtzLl8uc2V0QXJpYUNvbFNwYW4oZSx0aGlzLmNvbHVtbk1vZGVsLmdldEFsbEdyaWRDb2x1bW5zKCkubGVuZ3RoKX1zZXRBcmlhUm93SW5kZXgoKXtzLl8uc2V0QXJpYVJvd0luZGV4KHRoaXMuZ2V0R3VpKCksdGhpcy5oZWFkZXJOYXZpZ2F0aW9uU2VydmljZS5nZXRIZWFkZXJSb3dDb3VudCgpKX1vbkdyaWRDb2x1bW5zQ2hhbmdlZCgpe3RoaXMuZUFkdmFuY2VkRmlsdGVyJiYodGhpcy5zZXRBcmlhQ29sdW1uQ291bnQodGhpcy5lQWR2YW5jZWRGaWx0ZXIuZ2V0R3VpKCkpLHRoaXMuc2V0QXJpYVJvd0luZGV4KCkpfW9uS2V5RG93bihlKXtzd2l0Y2goZS5rZXkpe2Nhc2Ugcy5LZXlDb2RlLkVOVEVSOnRoaXMuaGFzRm9jdXMoKSYmdGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNJbnRvKHRoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpKSYmZS5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrO2Nhc2Ugcy5LZXlDb2RlLkVTQ0FQRTp0aGlzLmhhc0ZvY3VzKCl8fHRoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLmZvY3VzKCk7YnJlYWs7Y2FzZSBzLktleUNvZGUuVVA6dGhpcy5uYXZpZ2F0ZVVwRG93bighMCxlKTticmVhaztjYXNlIHMuS2V5Q29kZS5ET1dOOnRoaXMubmF2aWdhdGVVcERvd24oITEsZSk7YnJlYWs7Y2FzZSBzLktleUNvZGUuVEFCOmlmKHRoaXMuaGFzRm9jdXMoKSl0aGlzLm5hdmlnYXRlTGVmdFJpZ2h0KGUpO2Vsc2V7Y29uc3QgdD10aGlzLmZvY3VzU2VydmljZS5maW5kTmV4dEZvY3VzYWJsZUVsZW1lbnQodGhpcy5nZXRGb2N1c2FibGVFbGVtZW50KCksbnVsbCxlLnNoaWZ0S2V5KTt0PyhlLnByZXZlbnREZWZhdWx0KCksdC5mb2N1cygpKTp0aGlzLm5hdmlnYXRlTGVmdFJpZ2h0KGUpfX19bmF2aWdhdGVVcERvd24oZSx0KXt0aGlzLmhhc0ZvY3VzKCkmJnRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzTmV4dEZyb21BZHZhbmNlZEZpbHRlcihlKSYmdC5wcmV2ZW50RGVmYXVsdCgpfW5hdmlnYXRlTGVmdFJpZ2h0KGUpeyhlLnNoaWZ0S2V5P3RoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzTGFzdEhlYWRlcigpOnRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzTmV4dEZyb21BZHZhbmNlZEZpbHRlcighMSwhMCkpJiZlLnByZXZlbnREZWZhdWx0KCl9aGFzRm9jdXMoKXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKS5hY3RpdmVFbGVtZW50PT09dGhpcy5nZXRGb2N1c2FibGVFbGVtZW50KCl9fW8oW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLG4ucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmb2N1c1NlcnZpY2UiKV0sbi5wcm90b3R5cGUsImZvY3VzU2VydmljZSIsdm9pZCAwKSxvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJoZWFkZXJOYXZpZ2F0aW9uU2VydmljZSIpXSxuLnByb3RvdHlwZSwiaGVhZGVyTmF2aWdhdGlvblNlcnZpY2UiLHZvaWQgMCksbyhbcy5Qb3N0Q29uc3RydWN0XSxuLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7Y2xhc3MgYSBleHRlbmRzIHMuQWdSaWNoU2VsZWN0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7dGVtcGxhdGU6J1xuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLXBpY2tlci1maWVsZCIgcm9sZT0icHJlc2VudGF0aW9uIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiByZWY9ImVMYWJlbCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlV3JhcHBlciIgY2xhc3M9ImFnLXdyYXBwZXIgYWctcGlja2VyLWNvbGxhcHNlZCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj0iZURpc3BsYXlGaWVsZCIgY2xhc3M9ImFnLXBpY2tlci1maWVsZC1kaXNwbGF5Ij48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhZy1pbnB1dC10ZXh0LWZpZWxkIHJlZj0iZUlucHV0IiBjbGFzcz0iYWctcmljaC1zZWxlY3QtZmllbGQtaW5wdXQiPjwvYWctaW5wdXQtdGV4dC1maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlSWNvbiIgY2xhc3M9ImFnLXBpY2tlci1maWVsZC1pY29uIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2Pid9KSksdGhpcy5wYXJhbXM9ZX1zaG93UGlja2VyKCl7c2V0VGltZW91dCgoKT0+c3VwZXIuc2hvd1BpY2tlcigpKX1oaWRlUGlja2VyKCl7c2V0VGltZW91dCgoKT0+c3VwZXIuaGlkZVBpY2tlcigpKX1wb3N0Q29uc3RydWN0KCl7c3VwZXIucG9zdENvbnN0cnVjdCgpO2NvbnN0e3dyYXBwZXJDbGFzc05hbWU6ZSxhcmlhTGFiZWw6dH09dGhpcy5wYXJhbXM7cy5fLnNldERpc3BsYXllZCh0aGlzLmVEaXNwbGF5RmllbGQsITEpLGUmJnRoaXMuZVdyYXBwZXIuY2xhc3NMaXN0LmFkZChlKSxzLl8uc2V0QXJpYUxhYmVsbGVkQnkodGhpcy5lV3JhcHBlciwiIikscy5fLnNldEFyaWFMYWJlbCh0aGlzLmVXcmFwcGVyLHQpfW9uRW50ZXJLZXlEb3duKGUpe3MuXy5zdG9wUHJvcGFnYXRpb25Gb3JBZ0dyaWQoZSksdGhpcy5pc1BpY2tlckRpc3BsYXllZD9zdXBlci5vbkVudGVyS2V5RG93bihlKTooZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuc2hvd1BpY2tlcigpKX19dmFyIGw9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgZCBleHRlbmRzIHMuQmVhblN0dWJ7Y29uc3RydWN0b3IoZSx0KXtzdXBlcigpLHRoaXMuY29tcD1lLHRoaXMudmlydHVhbExpc3Q9dH1wb3N0Q29uc3RydWN0KCl7dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5WaXJ0dWFsTGlzdERyYWdGZWF0dXJlKHRoaXMuY29tcCx0aGlzLnZpcnR1YWxMaXN0LHtkcmFnU291cmNlVHlwZTpzLkRyYWdTb3VyY2VUeXBlLkFkdmFuY2VkRmlsdGVyQnVpbGRlcixsaXN0SXRlbURyYWdTdGFydEV2ZW50OmQuRVZFTlRfRFJBR19TVEFSVEVELGxpc3RJdGVtRHJhZ0VuZEV2ZW50OmQuRVZFTlRfRFJBR19FTkRFRCxldmVudFNvdXJjZTp0aGlzLGdldEN1cnJlbnREcmFnVmFsdWU6ZT0+dGhpcy5nZXRDdXJyZW50RHJhZ1ZhbHVlKGUpLGlzTW92ZUJsb2NrZWQ6KCk9PiExLGdldE51bVJvd3M6ZT0+ZS5nZXROdW1JdGVtcygpLG1vdmVJdGVtOihlLHQpPT50aGlzLm1vdmVJdGVtKGUsdCl9KSl9Z2V0Q3VycmVudERyYWdWYWx1ZShlKXtyZXR1cm4gZS5pdGVtfW1vdmVJdGVtKGUsdCl7dGhpcy5jb21wLm1vdmVJdGVtKGUsdCl9fWQuRVZFTlRfRFJBR19TVEFSVEVEPSJhZHZhbmNlZEZpbHRlckJ1aWxkZXJEcmFnU3RhcnRlZCIsZC5FVkVOVF9EUkFHX0VOREVEPSJhZHZhbmNlZEZpbHRlckJ1aWxkZXJEcmFnRW5kZWQiLGwoW3MuUG9zdENvbnN0cnVjdF0sZC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBjPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGggZXh0ZW5kcyBzLkJlYW5TdHVie2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcigpLHRoaXMuZUd1aT1lLHRoaXMuZm9jdXNXcmFwcGVyPXQsdGhpcy5lRm9jdXNhYmxlQ29tcD1pfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVHdWksImtleWRvd24iLGU9Pntzd2l0Y2goZS5rZXkpe2Nhc2Ugcy5LZXlDb2RlLlRBQjplLmRlZmF1bHRQcmV2ZW50ZWR8fHMuXy5zdG9wUHJvcGFnYXRpb25Gb3JBZ0dyaWQoZSk7YnJlYWs7Y2FzZSBzLktleUNvZGUuVVA6Y2FzZSBzLktleUNvZGUuRE9XTjpzLl8uc3RvcFByb3BhZ2F0aW9uRm9yQWdHcmlkKGUpO2JyZWFrO2Nhc2Ugcy5LZXlDb2RlLkVTQ0FQRTppZihzLl8uaXNTdG9wUHJvcGFnYXRpb25Gb3JBZ0dyaWQoZSkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKTt0aGlzLmVHdWkuY29udGFpbnModC5hY3RpdmVFbGVtZW50KSYmKGUucHJldmVudERlZmF1bHQoKSxzLl8uc3RvcFByb3BhZ2F0aW9uRm9yQWdHcmlkKGUpLHRoaXMuZm9jdXNXcmFwcGVyLmZvY3VzKCkpfX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZm9jdXNXcmFwcGVyLCJrZXlkb3duIixlPT57c3dpdGNoKGUua2V5KXtjYXNlIHMuS2V5Q29kZS5FTlRFUjppZihzLl8uaXNTdG9wUHJvcGFnYXRpb25Gb3JBZ0dyaWQoZSkpcmV0dXJuO3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCkuYWN0aXZlRWxlbWVudD09PXRoaXMuZm9jdXNXcmFwcGVyJiYoZS5wcmV2ZW50RGVmYXVsdCgpLHMuXy5zdG9wUHJvcGFnYXRpb25Gb3JBZ0dyaWQoZSksdGhpcy5lRm9jdXNhYmxlQ29tcC5nZXRGb2N1c2FibGVFbGVtZW50KCkuZm9jdXMoKSl9fSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5mb2N1c1dyYXBwZXIsImZvY3VzaW4iLCgpPT57dGhpcy5mb2N1c1dyYXBwZXIuY2xhc3NMaXN0LmFkZCgiYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItdmlydHVhbC1saXN0LWl0ZW0taGlnaGxpZ2h0Iil9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmZvY3VzV3JhcHBlciwiZm9jdXNvdXQiLGU9Pnt0aGlzLmZvY3VzV3JhcHBlci5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpfHx0aGlzLmZvY3VzV3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCJhZy1hZHZhbmNlZC1maWx0ZXItYnVpbGRlci12aXJ0dWFsLWxpc3QtaXRlbS1oaWdobGlnaHQiKX0pfX1mdW5jdGlvbiB1KGUsdCl7cmV0dXJue3BpY2tlckFyaWFMYWJlbEtleToiYXJpYUxhYmVsQWR2YW5jZWRGaWx0ZXJCdWlsZGVyQWRkRmllbGQiLHBpY2tlckFyaWFMYWJlbFZhbHVlOiJBZHZhbmNlZCBGaWx0ZXIgQnVpbGRlciBBZGQgRmllbGQiLHBpY2tlclR5cGU6ImFnLWxpc3QiLHZhbHVlTGlzdDpbe2tleToiY29uZGl0aW9uIixkaXNwbGF5VmFsdWU6ZSgiYWR2YW5jZWRGaWx0ZXJCdWlsZGVyQWRkQ29uZGl0aW9uIil9LHtrZXk6ImpvaW4iLGRpc3BsYXlWYWx1ZTplKCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJBZGRKb2luIil9XSx2YWx1ZUZvcm1hdHRlcjplPT57dmFyIHQ7cmV0dXJuIG51bGw9PWU/bnVsbDpudWxsIT09KHQ9ZS5kaXNwbGF5VmFsdWUpJiZ2b2lkIDAhPT10P3Q6ZS5rZXl9LHBpY2tlckljb246ImFkdmFuY2VkRmlsdGVyQnVpbGRlckFkZCIsbWF4UGlja2VyV2lkdGg6KG51bGwhPXQ/dDoxMjApKyJweCIsd3JhcHBlckNsYXNzTmFtZToiYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItaXRlbS1idXR0b24iLGFyaWFMYWJlbDplKCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJBZGRCdXR0b25Ub29sdGlwIil9fWMoW3MuUG9zdENvbnN0cnVjdF0saC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO2NsYXNzIHB7fXAuRVZFTlRfQURERUQ9ImFkdmFuY2VkRmlsdGVyQnVpbGRlckFkZGVkIixwLkVWRU5UX01PVkVEPSJhZHZhbmNlZEZpbHRlckJ1aWxkZXJNb3ZlZCIscC5FVkVOVF9SRU1PVkVEPSJhZHZhbmNlZEZpbHRlckJ1aWxkZXJSZW1vdmVkIixwLkVWRU5UX1ZBTFVFX0NIQU5HRUQ9ImFkdmFuY2VkRmlsdGVyQnVpbGRlclZhbHVlQ2hhbmdlZCIscC5FVkVOVF9WQUxJRF9DSEFOR0VEPSJhZHZhbmNlZEZpbHRlckJ1aWxkZXJWYWxpZENoYW5nZWQiO3ZhciBnPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIG0gZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCdcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0tY29uZGl0aW9uIiByb2xlPSJwcmVzZW50YXRpb24iPjwvZGl2PlxuICAgICAgICAnKSx0aGlzLnZhbGlkYXRpb25NZXNzYWdlPW51bGx9aW5pdChlKXtjb25zdHtpdGVtOnQsY3JlYXRlUGlsbDppfT1lO3RoaXMuaXRlbT10LHRoaXMuY3JlYXRlUGlsbD1pLHRoaXMuZmlsdGVyTW9kZWw9dC5maWx0ZXJNb2RlbCx0aGlzLnNldHVwQ29sdW1uQ29uZGl0aW9uKHRoaXMuZmlsdGVyTW9kZWwpLHRoaXMudmFsaWRhdGUoKSx0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT50aGlzLmRlc3Ryb3lCZWFucyhbdGhpcy5lQ29sdW1uUGlsbCx0aGlzLmVPcGVyYXRvclBpbGwsdGhpcy5lT3BlcmFuZFBpbGxdKSl9Z2V0RHJhZ05hbWUoKXtyZXR1cm4gdGhpcy5maWx0ZXJNb2RlbC5jb2xJZD90aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UucGFyc2VDb2x1bW5GaWx0ZXJNb2RlbCh0aGlzLmZpbHRlck1vZGVsKTp0aGlzLmdldERlZmF1bHRDb2x1bW5EaXNwbGF5VmFsdWUoKX1nZXRBcmlhTGFiZWwoKXtyZXR1cm5gJHt0aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhcmlhQWR2YW5jZWRGaWx0ZXJCdWlsZGVyRmlsdGVySXRlbSIpfSAke3RoaXMuZ2V0RHJhZ05hbWUoKX1gfWdldFZhbGlkYXRpb25NZXNzYWdlKCl7cmV0dXJuIHRoaXMudmFsaWRhdGlvbk1lc3NhZ2V9Z2V0Rm9jdXNhYmxlRWxlbWVudCgpe3JldHVybiB0aGlzLmVDb2x1bW5QaWxsLmdldEZvY3VzYWJsZUVsZW1lbnQoKX1zZXR1cENvbHVtbkNvbmRpdGlvbihlKXt2YXIgdDtjb25zdCBpPXRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZXRDb2x1bW5EZXRhaWxzKGUuY29sSWQpO3RoaXMuYmFzZUNlbGxEYXRhVHlwZT1pLmJhc2VDZWxsRGF0YVR5cGUsdGhpcy5jb2x1bW49aS5jb2x1bW4sdGhpcy5udW1PcGVyYW5kcz10aGlzLmdldE51bU9wZXJhbmRzKHRoaXMuZ2V0T3BlcmF0b3JLZXkoKSksdGhpcy5lQ29sdW1uUGlsbD10aGlzLmNyZWF0ZVBpbGwoe2tleTp0aGlzLmdldENvbHVtbktleSgpLGRpc3BsYXlWYWx1ZTpudWxsIT09KHQ9dGhpcy5nZXRDb2x1bW5EaXNwbGF5VmFsdWUoKSkmJnZvaWQgMCE9PXQ/dDp0aGlzLmdldERlZmF1bHRDb2x1bW5EaXNwbGF5VmFsdWUoKSxjc3NDbGFzczoiYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItY29sdW1uLXBpbGwiLGlzU2VsZWN0OiEwLGdldEVkaXRvclBhcmFtczooKT0+KHt2YWx1ZXM6dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLmdldENvbHVtbkF1dG9jb21wbGV0ZUVudHJpZXMoKX0pLHVwZGF0ZTplPT50aGlzLnNldENvbHVtbktleShlKSxwaWNrZXJBcmlhTGFiZWxLZXk6ImFyaWFMYWJlbEFkdmFuY2VkRmlsdGVyQnVpbGRlckNvbHVtblNlbGVjdEZpZWxkIixwaWNrZXJBcmlhTGFiZWxWYWx1ZToiQWR2YW5jZWQgRmlsdGVyIEJ1aWxkZXIgQ29sdW1uIFNlbGVjdCBGaWVsZCIsYXJpYUxhYmVsOnRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFyaWFBZHZhbmNlZEZpbHRlckJ1aWxkZXJDb2x1bW4iKX0pLHRoaXMuZ2V0R3VpKCkuYXBwZW5kQ2hpbGQodGhpcy5lQ29sdW1uUGlsbC5nZXRHdWkoKSkscy5fLmV4aXN0cyh0aGlzLmdldENvbHVtbktleSgpKSYmKHRoaXMuY3JlYXRlT3BlcmF0b3JQaWxsKCksdGhpcy5oYXNPcGVyYW5kKCkmJnRoaXMuY3JlYXRlT3BlcmFuZFBpbGwoKSl9Y3JlYXRlT3BlcmF0b3JQaWxsKCl7dmFyIGU7dGhpcy5lT3BlcmF0b3JQaWxsPXRoaXMuY3JlYXRlUGlsbCh7a2V5OnRoaXMuZ2V0T3BlcmF0b3JLZXkoKSxkaXNwbGF5VmFsdWU6bnVsbCE9PShlPXRoaXMuZ2V0T3BlcmF0b3JEaXNwbGF5VmFsdWUoKSkmJnZvaWQgMCE9PWU/ZTp0aGlzLmdldERlZmF1bHRPcHRpb25TZWxlY3RWYWx1ZSgpLGNzc0NsYXNzOiJhZy1hZHZhbmNlZC1maWx0ZXItYnVpbGRlci1vcHRpb24tcGlsbCIsaXNTZWxlY3Q6ITAsZ2V0RWRpdG9yUGFyYW1zOigpPT4oe3ZhbHVlczp0aGlzLmdldE9wZXJhdG9yQXV0b2NvbXBsZXRlRW50cmllcygpfSksdXBkYXRlOmU9PnRoaXMuc2V0T3BlcmF0b3JLZXkoZSkscGlja2VyQXJpYUxhYmVsS2V5OiJhcmlhTGFiZWxBZHZhbmNlZEZpbHRlckJ1aWxkZXJPcHRpb25TZWxlY3RGaWVsZCIscGlja2VyQXJpYUxhYmVsVmFsdWU6IkFkdmFuY2VkIEZpbHRlciBCdWlsZGVyIE9wdGlvbiBTZWxlY3QgRmllbGQiLGFyaWFMYWJlbDp0aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhcmlhQWR2YW5jZWRGaWx0ZXJCdWlsZGVyT3B0aW9uIil9KSx0aGlzLmVDb2x1bW5QaWxsLmdldEd1aSgpLmluc2VydEFkamFjZW50RWxlbWVudCgiYWZ0ZXJlbmQiLHRoaXMuZU9wZXJhdG9yUGlsbC5nZXRHdWkoKSl9Y3JlYXRlT3BlcmFuZFBpbGwoKXt2YXIgZTtjb25zdCB0PW51bGwhPT0oZT10aGlzLmdldE9wZXJhbmREaXNwbGF5VmFsdWUoKSkmJnZvaWQgMCE9PWU/ZToiIjt0aGlzLmVPcGVyYW5kUGlsbD10aGlzLmNyZWF0ZVBpbGwoe2tleTp0LGRpc3BsYXlWYWx1ZTp0LGJhc2VDZWxsRGF0YVR5cGU6dGhpcy5iYXNlQ2VsbERhdGFUeXBlLGNzc0NsYXNzOiJhZy1hZHZhbmNlZC1maWx0ZXItYnVpbGRlci12YWx1ZS1waWxsIixpc1NlbGVjdDohMSx1cGRhdGU6ZT0+dGhpcy5zZXRPcGVyYW5kKGUpLGFyaWFMYWJlbDp0aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhcmlhQWR2YW5jZWRGaWx0ZXJCdWlsZGVyVmFsdWUiKX0pLHRoaXMuZ2V0R3VpKCkuYXBwZW5kQ2hpbGQodGhpcy5lT3BlcmFuZFBpbGwuZ2V0R3VpKCkpfWdldENvbHVtbktleSgpe3JldHVybiB0aGlzLmZpbHRlck1vZGVsLmNvbElkfWdldENvbHVtbkRpc3BsYXlWYWx1ZSgpe3JldHVybiB0aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0Q29sdW1uRGlzcGxheVZhbHVlKHRoaXMuZmlsdGVyTW9kZWwpfWdldE9wZXJhdG9yS2V5KCl7cmV0dXJuIHRoaXMuZmlsdGVyTW9kZWwudHlwZX1nZXRPcGVyYXRvckRpc3BsYXlWYWx1ZSgpe3JldHVybiB0aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0T3BlcmF0b3JEaXNwbGF5VmFsdWUodGhpcy5maWx0ZXJNb2RlbCl9Z2V0T3BlcmFuZERpc3BsYXlWYWx1ZSgpe3JldHVybiB0aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0T3BlcmFuZERpc3BsYXlWYWx1ZSh0aGlzLmZpbHRlck1vZGVsLCEwKX1oYXNPcGVyYW5kKCl7cmV0dXJuIHRoaXMubnVtT3BlcmFuZHM+MH1nZXRPcGVyYXRvckF1dG9jb21wbGV0ZUVudHJpZXMoKXtyZXR1cm4gdGhpcy5jb2x1bW4/dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLmdldE9wZXJhdG9yQXV0b2NvbXBsZXRlRW50cmllcyh0aGlzLmNvbHVtbix0aGlzLmJhc2VDZWxsRGF0YVR5cGUpOltdfXNldENvbHVtbktleShlKXt0aGlzLmVPcGVyYXRvclBpbGx8fHRoaXMuY3JlYXRlT3BlcmF0b3JQaWxsKCk7Y29uc3QgdD10aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0Q29sdW1uRGV0YWlscyhlKTt0aGlzLmNvbHVtbj10LmNvbHVtbjtjb25zdCBpPXQuYmFzZUNlbGxEYXRhVHlwZTt0aGlzLmJhc2VDZWxsRGF0YVR5cGUhPT1pJiYodGhpcy5iYXNlQ2VsbERhdGFUeXBlPWksdGhpcy5zZXRPcGVyYXRvcktleSh2b2lkIDApLHRoaXMuZU9wZXJhdG9yUGlsbCYmKHMuXy5yZW1vdmVGcm9tUGFyZW50KHRoaXMuZU9wZXJhdG9yUGlsbC5nZXRHdWkoKSksdGhpcy5kZXN0cm95QmVhbih0aGlzLmVPcGVyYXRvclBpbGwpLHRoaXMuY3JlYXRlT3BlcmF0b3JQaWxsKCkpLHRoaXMudmFsaWRhdGUoKSksdGhpcy5maWx0ZXJNb2RlbC5jb2xJZD1lLHRoaXMuZmlsdGVyTW9kZWwuZmlsdGVyVHlwZT10aGlzLmJhc2VDZWxsRGF0YVR5cGV9c2V0T3BlcmF0b3JLZXkoZSl7Y29uc3QgdD10aGlzLmdldE51bU9wZXJhbmRzKGUpO3QhPT10aGlzLm51bU9wZXJhbmRzJiYodGhpcy5udW1PcGVyYW5kcz10LDA9PT10P3RoaXMuZGVzdHJveU9wZXJhbmRQaWxsKCk6KHRoaXMuY3JlYXRlT3BlcmFuZFBpbGwoKSwibnVtYmVyIiE9PXRoaXMuYmFzZUNlbGxEYXRhVHlwZSYmdGhpcy5zZXRPcGVyYW5kKCIiKSkpLHRoaXMuZmlsdGVyTW9kZWwudHlwZT1lLHRoaXMudmFsaWRhdGUoKX1zZXRPcGVyYW5kKGUpe3ZhciB0O2xldCBpPWU7dGhpcy5jb2x1bW4mJihpPW51bGwhPT0odD10aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0T3BlcmFuZE1vZGVsVmFsdWUoZSx0aGlzLmJhc2VDZWxsRGF0YVR5cGUsdGhpcy5jb2x1bW4pKSYmdm9pZCAwIT09dD90OiIiKSx0aGlzLmZpbHRlck1vZGVsLmZpbHRlcj1pLHRoaXMudmFsaWRhdGUoKX1nZXROdW1PcGVyYW5kcyhlKXt2YXIgdCxpO3JldHVybiBudWxsIT09KGk9bnVsbD09PSh0PXRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZXRFeHByZXNzaW9uT3BlcmF0b3IodGhpcy5iYXNlQ2VsbERhdGFUeXBlLGUpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5udW1PcGVyYW5kcykmJnZvaWQgMCE9PWk/aTowfWRlc3Ryb3lPcGVyYW5kUGlsbCgpe2RlbGV0ZSB0aGlzLmZpbHRlck1vZGVsLmZpbHRlcix0aGlzLmdldEd1aSgpLnJlbW92ZUNoaWxkKHRoaXMuZU9wZXJhbmRQaWxsLmdldEd1aSgpKSx0aGlzLmRlc3Ryb3lCZWFuKHRoaXMuZU9wZXJhbmRQaWxsKSx0aGlzLmVPcGVyYW5kUGlsbD12b2lkIDB9dmFsaWRhdGUoKXtsZXQgZT1udWxsO3MuXy5leGlzdHModGhpcy5nZXRDb2x1bW5LZXkoKSk/cy5fLmV4aXN0cyh0aGlzLmdldE9wZXJhdG9yS2V5KCkpP3RoaXMubnVtT3BlcmFuZHM+MCYmIXMuXy5leGlzdHModGhpcy5nZXRPcGVyYW5kRGlzcGxheVZhbHVlKCkpJiYoZT10aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJWYWxpZGF0aW9uRW50ZXJWYWx1ZSIpKTplPXRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyQnVpbGRlclZhbGlkYXRpb25TZWxlY3RPcHRpb24iKTplPXRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyQnVpbGRlclZhbGlkYXRpb25TZWxlY3RDb2x1bW4iKSx0aGlzLml0ZW0udmFsaWQ9IWUsZSE9PXRoaXMudmFsaWRhdGlvbk1lc3NhZ2UmJih0aGlzLnZhbGlkYXRpb25NZXNzYWdlPWUsdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOnAuRVZFTlRfVkFMSURfQ0hBTkdFRH0pKX1nZXREZWZhdWx0Q29sdW1uRGlzcGxheVZhbHVlKCl7cmV0dXJuIHRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyQnVpbGRlclNlbGVjdENvbHVtbiIpfWdldERlZmF1bHRPcHRpb25TZWxlY3RWYWx1ZSgpe3JldHVybiB0aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJTZWxlY3RPcHRpb24iKX19ZyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZSIpXSxtLnByb3RvdHlwZSwiYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZSIsdm9pZCAwKSxnKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJ2YWx1ZVBhcnNlclNlcnZpY2UiKV0sbS5wcm90b3R5cGUsInZhbHVlUGFyc2VyU2VydmljZSIsdm9pZCAwKTt2YXIgZj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyB2IGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoJ1xuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItcGlsbC13cmFwcGVyIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlUGlsbCIgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLXBpbGwiIHJvbGU9ImJ1dHRvbiI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHJlZj0iZUxhYmVsIiBjbGFzcz0iYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItcGlsbC1kaXNwbGF5Ij48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgJyksdGhpcy5wYXJhbXM9ZSx0aGlzLnZhbHVlPWUudmFsdWV9cG9zdENvbnN0cnVjdCgpe2NvbnN0e2Nzc0NsYXNzOmUsYXJpYUxhYmVsOnR9PXRoaXMucGFyYW1zO3RoaXMuZVBpbGwuY2xhc3NMaXN0LmFkZChlKSx0aGlzLmFjdGl2YXRlVGFiSW5kZXgoW3RoaXMuZVBpbGxdKSx0aGlzLmVMYWJlbC5pZD0iIit0aGlzLmdldENvbXBJZCgpLHMuXy5zZXRBcmlhRGVzY3JpYmVkQnkodGhpcy5lUGlsbCx0aGlzLmVMYWJlbC5pZCkscy5fLnNldEFyaWFMYWJlbCh0aGlzLmVQaWxsLHQpLHRoaXMucmVuZGVyVmFsdWUoKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVQaWxsLCJjbGljayIsZT0+e2UucHJldmVudERlZmF1bHQoKSx0aGlzLnNob3dFZGl0b3IoKX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZVBpbGwsImtleWRvd24iLGU9Pntzd2l0Y2goZS5rZXkpe2Nhc2Ugcy5LZXlDb2RlLkVOVEVSOmUucHJldmVudERlZmF1bHQoKSxzLl8uc3RvcFByb3BhZ2F0aW9uRm9yQWdHcmlkKGUpLHRoaXMuc2hvd0VkaXRvcigpfX0pLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9PnRoaXMuZGVzdHJveUJlYW4odGhpcy5lRWRpdG9yKSl9Z2V0Rm9jdXNhYmxlRWxlbWVudCgpe3JldHVybiB0aGlzLmVQaWxsfXNob3dFZGl0b3IoKXtpZih0aGlzLmVFZGl0b3IpcmV0dXJuO3MuXy5zZXREaXNwbGF5ZWQodGhpcy5lUGlsbCwhMSksdGhpcy5lRWRpdG9yPXRoaXMuY3JlYXRlRWRpdG9yQ29tcCh0aGlzLnBhcmFtcy50eXBlKSx0aGlzLmVFZGl0b3Iuc2V0VmFsdWUodGhpcy52YWx1ZSk7Y29uc3QgZT10aGlzLmVFZGl0b3IuZ2V0R3VpKCk7dGhpcy5lRWRpdG9yLmFkZE1hbmFnZWRMaXN0ZW5lcihlLCJrZXlkb3duIixlPT57c3dpdGNoKGUua2V5KXtjYXNlIHMuS2V5Q29kZS5FTlRFUjplLnByZXZlbnREZWZhdWx0KCkscy5fLnN0b3BQcm9wYWdhdGlvbkZvckFnR3JpZChlKSx0aGlzLnVwZGF0ZVZhbHVlKCEwKTticmVhaztjYXNlIHMuS2V5Q29kZS5FU0NBUEU6ZS5wcmV2ZW50RGVmYXVsdCgpLHMuXy5zdG9wUHJvcGFnYXRpb25Gb3JBZ0dyaWQoZSksdGhpcy5oaWRlRWRpdG9yKCEwKX19KSx0aGlzLmVFZGl0b3IuYWRkTWFuYWdlZExpc3RlbmVyKGUsImZvY3Vzb3V0IiwoKT0+e3RoaXMudXBkYXRlVmFsdWUoITEpfSksdGhpcy5nZXRHdWkoKS5hcHBlbmRDaGlsZChlKSx0aGlzLmVFZGl0b3IuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLmZvY3VzKCl9Y3JlYXRlRWRpdG9yQ29tcChlKXtsZXQgdDtzd2l0Y2goZSl7Y2FzZSJ0ZXh0Ijp0PW5ldyBzLkFnSW5wdXRUZXh0RmllbGQ7YnJlYWs7Y2FzZSJudW1iZXIiOnQ9bmV3IHMuQWdJbnB1dE51bWJlckZpZWxkO2JyZWFrO2Nhc2UiZGF0ZSI6dD1uZXcgcy5BZ0lucHV0RGF0ZUZpZWxkfXJldHVybiB0aGlzLmNyZWF0ZUJlYW4odCl9aGlkZUVkaXRvcihlKXtjb25zdHtlRWRpdG9yOnR9PXRoaXM7dCYmKHRoaXMuZUVkaXRvcj12b2lkIDAsdGhpcy5nZXRHdWkoKS5yZW1vdmVDaGlsZCh0LmdldEd1aSgpKSx0aGlzLmRlc3Ryb3lCZWFuKHQpLHMuXy5zZXREaXNwbGF5ZWQodGhpcy5lUGlsbCwhMCksZSYmdGhpcy5lUGlsbC5mb2N1cygpKX1yZW5kZXJWYWx1ZSgpe2xldCBlO3RoaXMuZUxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLXZhbHVlLWVtcHR5IiwiYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItdmFsdWUtbnVtYmVyIiwiYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItdmFsdWUtdGV4dCIpLHMuXy5leGlzdHModGhpcy52YWx1ZSk/Im51bWJlciI9PT10aGlzLnBhcmFtcy50eXBlPyhlPXRoaXMudmFsdWUsdGhpcy5lTGFiZWwuY2xhc3NMaXN0LmFkZCgiYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItdmFsdWUtbnVtYmVyIikpOihlPWAiJHt0aGlzLnZhbHVlfSJgLHRoaXMuZUxhYmVsLmNsYXNzTGlzdC5hZGQoImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLXZhbHVlLXRleHQiKSk6KGU9dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnRyYW5zbGF0ZSgiYWR2YW5jZWRGaWx0ZXJCdWlsZGVyRW50ZXJWYWx1ZSIpLHRoaXMuZUxhYmVsLmNsYXNzTGlzdC5hZGQoImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLXZhbHVlLWVtcHR5IikpLHRoaXMuZUxhYmVsLmlubmVyVGV4dD1lfXVwZGF0ZVZhbHVlKGUpe3ZhciB0O2lmKCF0aGlzLmVFZGl0b3IpcmV0dXJuO2NvbnN0IGk9bnVsbCE9PSh0PXRoaXMuZUVkaXRvci5nZXRWYWx1ZSgpKSYmdm9pZCAwIT09dD90OiIiO3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpzLkV2ZW50cy5FVkVOVF9GSUVMRF9WQUxVRV9DSEFOR0VELHZhbHVlOml9KSx0aGlzLnZhbHVlPWksdGhpcy5yZW5kZXJWYWx1ZSgpLHRoaXMuaGlkZUVkaXRvcihlKX19ZihbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlUGlsbCIpXSx2LnByb3RvdHlwZSwiZVBpbGwiLHZvaWQgMCksZihbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlTGFiZWwiKV0sdi5wcm90b3R5cGUsImVMYWJlbCIsdm9pZCAwKSxmKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJhZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlIildLHYucHJvdG90eXBlLCJhZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlIix2b2lkIDApLGYoW3MuUG9zdENvbnN0cnVjdF0sdi5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBDPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIHkgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCdcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0tY29uZGl0aW9uIiByb2xlPSJwcmVzZW50YXRpb24iPjwvZGl2PlxuICAgICAgICAnKX1pbml0KGUpe2NvbnN0e2l0ZW06dCxjcmVhdGVQaWxsOml9PWUscz10LmZpbHRlck1vZGVsO3RoaXMuZmlsdGVyTW9kZWw9cyx0aGlzLmVQaWxsPWkoe2tleTpzLnR5cGUsZGlzcGxheVZhbHVlOnRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5wYXJzZUpvaW5PcGVyYXRvcihzKSxjc3NDbGFzczoiYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItam9pbi1waWxsIixpc1NlbGVjdDohMCxnZXRFZGl0b3JQYXJhbXM6KCk9Pih7dmFsdWVzOnRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZXRKb2luT3BlcmF0b3JBdXRvY29tcGxldGVFbnRyaWVzKCl9KSx1cGRhdGU6ZT0+cy50eXBlPWUscGlja2VyQXJpYUxhYmVsS2V5OiJhcmlhTGFiZWxBZHZhbmNlZEZpbHRlckJ1aWxkZXJKb2luU2VsZWN0RmllbGQiLHBpY2tlckFyaWFMYWJlbFZhbHVlOiJBZHZhbmNlZCBGaWx0ZXIgQnVpbGRlciBKb2luIE9wZXJhdG9yIFNlbGVjdCBGaWVsZCIsYXJpYUxhYmVsOnRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFyaWFBZHZhbmNlZEZpbHRlckJ1aWxkZXJKb2luT3BlcmF0b3IiKX0pLHRoaXMuZ2V0R3VpKCkuYXBwZW5kQ2hpbGQodGhpcy5lUGlsbC5nZXRHdWkoKSksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+dGhpcy5kZXN0cm95QmVhbih0aGlzLmVQaWxsKSl9Z2V0RHJhZ05hbWUoKXtyZXR1cm4gdGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnBhcnNlSm9pbk9wZXJhdG9yKHRoaXMuZmlsdGVyTW9kZWwpfWdldEFyaWFMYWJlbCgpe3JldHVybmAke3RoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFyaWFBZHZhbmNlZEZpbHRlckJ1aWxkZXJHcm91cEl0ZW0iKX0gJHt0aGlzLmdldERyYWdOYW1lKCl9YH1nZXRWYWxpZGF0aW9uTWVzc2FnZSgpe3JldHVybiBudWxsfWdldEZvY3VzYWJsZUVsZW1lbnQoKXtyZXR1cm4gdGhpcy5lUGlsbC5nZXRGb2N1c2FibGVFbGVtZW50KCl9fUMoW09iamVjdChzLkF1dG93aXJlZCkoImFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UiKV0seS5wcm90b3R5cGUsImFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UiLHZvaWQgMCk7Y2xhc3MgUyBleHRlbmRzIHMuQWdSaWNoU2VsZWN0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7dGVtcGxhdGU6J1xuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLXBpY2tlci1maWVsZCBhZy1hZHZhbmNlZC1maWx0ZXItYnVpbGRlci1waWxsLXdyYXBwZXIiIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlTGFiZWwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj0iZVdyYXBwZXIiIGNsYXNzPSJhZy13cmFwcGVyIGFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLXBpbGwgYWctcGlja2VyLWNvbGxhcHNlZCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj0iZURpc3BsYXlGaWVsZCIgY2xhc3M9ImFnLXBpY2tlci1maWVsZC1kaXNwbGF5IGFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLXBpbGwtZGlzcGxheSI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YWctaW5wdXQtdGV4dC1maWVsZCByZWY9ImVJbnB1dCIgY2xhc3M9ImFnLXJpY2gtc2VsZWN0LWZpZWxkLWlucHV0Ij48L2FnLWlucHV0LXRleHQtZmllbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj0iZUljb24iIGNsYXNzPSJhZy1waWNrZXItZmllbGQtaWNvbiIgYXJpYS1oaWRkZW49InRydWUiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj4nfSkpLHRoaXMucGFyYW1zPWV9Z2V0Rm9jdXNhYmxlRWxlbWVudCgpe3JldHVybiB0aGlzLmVXcmFwcGVyfXNob3dQaWNrZXIoKXtzZXRUaW1lb3V0KCgpPT5zdXBlci5zaG93UGlja2VyKCkpfWhpZGVQaWNrZXIoKXtzZXRUaW1lb3V0KCgpPT5zdXBlci5oaWRlUGlja2VyKCkpfXBvc3RDb25zdHJ1Y3QoKXtzdXBlci5wb3N0Q29uc3RydWN0KCk7Y29uc3R7d3JhcHBlckNsYXNzTmFtZTplLGFyaWFMYWJlbDp0fT10aGlzLnBhcmFtczt0aGlzLmVXcmFwcGVyLmNsYXNzTGlzdC5hZGQoZSkscy5fLnNldEFyaWFMYWJlbGxlZEJ5KHRoaXMuZVdyYXBwZXIsIiIpLHMuXy5zZXRBcmlhTGFiZWwodGhpcy5lV3JhcHBlcix0KX1jcmVhdGVQaWNrZXJDb21wb25lbnQoKXt2YXIgZTtpZighdGhpcy52YWx1ZXMpe2NvbnN0e3ZhbHVlczp0fT10aGlzLnBhcmFtcy5nZXRFZGl0b3JQYXJhbXMoKTt0aGlzLnZhbHVlcz10O2NvbnN0IGk9dGhpcy52YWx1ZS5rZXkscz1udWxsIT09KGU9dC5maW5kKGU9PmUua2V5PT09aSkpJiZ2b2lkIDAhPT1lP2U6e2tleTppLGRpc3BsYXlWYWx1ZTp0aGlzLnZhbHVlLmRpc3BsYXlWYWx1ZX07dGhpcy52YWx1ZT1zfXJldHVybiBzdXBlci5jcmVhdGVQaWNrZXJDb21wb25lbnQoKX1vbkVudGVyS2V5RG93bihlKXtzLl8uc3RvcFByb3BhZ2F0aW9uRm9yQWdHcmlkKGUpLHRoaXMuaXNQaWNrZXJEaXNwbGF5ZWQ/c3VwZXIub25FbnRlcktleURvd24oZSk6KGUucHJldmVudERlZmF1bHQoKSx0aGlzLnNob3dQaWNrZXIoKSl9fXZhciB3PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGIgZXh0ZW5kcyBzLlRhYkd1YXJkQ29tcHtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoJ1xuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItaXRlbS13cmFwcGVyIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlSXRlbSIgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0iIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlVHJlZUxpbmVzIiBjbGFzcz0iYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItaXRlbS10cmVlLWxpbmVzIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHJlZj0iZURyYWdIYW5kbGUiIGNsYXNzPSJhZy1kcmFnLWhhbmRsZSIgYXJpYS1oaWRkZW49InRydWUiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gcmVmPSJlVmFsaWRhdGlvbiIgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0tYnV0dG9uIGFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWludmFsaWQiIGFyaWEtaGlkZGVuPSJ0cnVlIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9ImVCdXR0b25zIiBjbGFzcz0iYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItaXRlbS1idXR0b25zIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gcmVmPSJlTW92ZVVwQnV0dG9uIiBjbGFzcz0iYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItaXRlbS1idXR0b24iIHJvbGU9ImJ1dHRvbiI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiByZWY9ImVNb3ZlRG93bkJ1dHRvbiIgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0tYnV0dG9uIiByb2xlPSJidXR0b24iPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiByZWY9ImVBZGRCdXR0b24iIHJvbGU9InByZXNlbnRhdGlvbiI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHJlZj0iZVJlbW92ZUJ1dHRvbiIgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0tYnV0dG9uIiByb2xlPSJidXR0b24iPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAnKSx0aGlzLml0ZW09ZSx0aGlzLmRyYWdGZWF0dXJlPXQsdGhpcy5mb2N1c1dyYXBwZXI9aSx0aGlzLm1vdmVVcERpc2FibGVkPSExLHRoaXMubW92ZURvd25EaXNhYmxlZD0hMX1wb3N0Q29uc3RydWN0KCl7Y29uc3R7ZmlsdGVyTW9kZWw6ZSxsZXZlbDp0LHNob3dNb3ZlOml9PXRoaXMuaXRlbSxyPSJqb2luIj09PWUuZmlsdGVyVHlwZTtpZih0aGlzLmVQaWxsV3JhcHBlcj10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKHI/bmV3IHk6bmV3IG0pLHRoaXMuZVBpbGxXcmFwcGVyLmluaXQoe2l0ZW06dGhpcy5pdGVtLGNyZWF0ZVBpbGw6ZT0+dGhpcy5jcmVhdGVQaWxsKGUpfSksdGhpcy5lRHJhZ0hhbmRsZS5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyZW5kIix0aGlzLmVQaWxsV3JhcHBlci5nZXRHdWkoKSksMD09PXQpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZS5jbGFzc0xpc3QuYWRkKCJhZy1hZHZhbmNlZC1maWx0ZXItYnVpbGRlci1pdGVtLXRyZWUtbGluZS12ZXJ0aWNhbC1ib3R0b20iKSxlLmNsYXNzTGlzdC5hZGQoImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0tdHJlZS1saW5lLXJvb3QiKSx0aGlzLmVUcmVlTGluZXMuYXBwZW5kQ2hpbGQoZSkscy5fLnNldERpc3BsYXllZCh0aGlzLmVEcmFnSGFuZGxlLCExKSxzLl8uc2V0RGlzcGxheWVkKHRoaXMuZUJ1dHRvbnMsITEpLHMuXy5zZXRBcmlhRXhwYW5kZWQodGhpcy5mb2N1c1dyYXBwZXIsITApfWVsc2UgdGhpcy5zZXR1cFRyZWVMaW5lcyh0KSx0aGlzLmVEcmFnSGFuZGxlLmFwcGVuZENoaWxkKHMuXy5jcmVhdGVJY29uTm9TcGFuKCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJEcmFnIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSkpLHRoaXMuc2V0dXBWYWxpZGF0aW9uKCksdGhpcy5zZXR1cE1vdmVCdXR0b25zKGkpLHRoaXMuc2V0dXBBZGRCdXR0b24oKSx0aGlzLnNldHVwUmVtb3ZlQnV0dG9uKCksdGhpcy5zZXR1cERyYWdnaW5nKCksdGhpcy51cGRhdGVBcmlhRXhwYW5kZWQoKTtzLl8uc2V0QXJpYUxldmVsKHRoaXMuZm9jdXNXcmFwcGVyLHQrMSksdGhpcy5pbml0aWFsaXNlVGFiR3VhcmQoe30pLHRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IGgodGhpcy5nZXRHdWkoKSx0aGlzLmZvY3VzV3JhcHBlcix0aGlzLmVQaWxsV3JhcHBlcikpLHRoaXMudXBkYXRlQXJpYUxhYmVsKCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lUGlsbFdyYXBwZXIscC5FVkVOVF9WQUxVRV9DSEFOR0VELCgpPT50aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6cC5FVkVOVF9WQUxVRV9DSEFOR0VEfSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZVBpbGxXcmFwcGVyLHAuRVZFTlRfVkFMSURfQ0hBTkdFRCwoKT0+dGhpcy51cGRhdGVWYWxpZGl0eSgpKX1zZXRTdGF0ZShlKXtjb25zdHtsZXZlbDp0fT10aGlzLml0ZW07aWYoMD09PXQpcmV0dXJuO2NvbnN0e3Nob3dNb3ZlOml9PXRoaXMuaXRlbSx7ZGlzYWJsZU1vdmVVcDpyLGRpc2FibGVNb3ZlRG93bjpvLHRyZWVMaW5lczpuLHNob3dTdGFydFRyZWVMaW5lOmF9PWU7dGhpcy51cGRhdGVUcmVlTGluZXMobixhKSx0aGlzLnVwZGF0ZUFyaWFFeHBhbmRlZCgpLGkmJih0aGlzLm1vdmVVcERpc2FibGVkPSEhcix0aGlzLm1vdmVEb3duRGlzYWJsZWQ9ISFvLHRoaXMuZU1vdmVVcEJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCJhZy1hZHZhbmNlZC1maWx0ZXItYnVpbGRlci1pdGVtLWJ1dHRvbi1kaXNhYmxlZCIsciksdGhpcy5lTW92ZURvd25CdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgiYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItaXRlbS1idXR0b24tZGlzYWJsZWQiLG8pLHMuXy5zZXRBcmlhRGlzYWJsZWQodGhpcy5lTW92ZVVwQnV0dG9uLCEhcikscy5fLnNldEFyaWFEaXNhYmxlZCh0aGlzLmVNb3ZlRG93bkJ1dHRvbiwhIW8pLHRoaXMubW92ZVVwVG9vbHRpcEZlYXR1cmUucmVmcmVzaFRvb2xUaXAoKSx0aGlzLm1vdmVEb3duVG9vbHRpcEZlYXR1cmUucmVmcmVzaFRvb2xUaXAoKSl9Zm9jdXNNb3ZlQnV0dG9uKGUpeyhlP3RoaXMuZU1vdmVVcEJ1dHRvbjp0aGlzLmVNb3ZlRG93bkJ1dHRvbikuZm9jdXMoKX1hZnRlckFkZCgpe3RoaXMuZVBpbGxXcmFwcGVyLmdldEZvY3VzYWJsZUVsZW1lbnQoKS5mb2N1cygpfXNldHVwVHJlZUxpbmVzKGUpe2ZvcihsZXQgdD0wO3Q8ZTt0Kyspe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5lVHJlZUxpbmVzLmFwcGVuZENoaWxkKGUpfX11cGRhdGVUcmVlTGluZXMoZSx0KXtjb25zdCBpPWUubGVuZ3RoLTEse2NoaWxkcmVuOnN9PXRoaXMuZVRyZWVMaW5lcztmb3IobGV0IHQ9MDt0PGk7dCsrKXtjb25zdCBpPXMuaXRlbSh0KTtpJiZpLmNsYXNzTGlzdC50b2dnbGUoImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0tdHJlZS1saW5lLXZlcnRpY2FsIiwhZVt0XSl9Y29uc3Qgcj1zLml0ZW0oaSk7aWYocil7ci5jbGFzc0xpc3QuYWRkKCJhZy1hZHZhbmNlZC1maWx0ZXItYnVpbGRlci1pdGVtLXRyZWUtbGluZS1ob3Jpem9udGFsIik7Y29uc3QgdD1lW2ldO3IuY2xhc3NMaXN0LnRvZ2dsZSgiYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItaXRlbS10cmVlLWxpbmUtdmVydGljYWwtdG9wIix0KSxyLmNsYXNzTGlzdC50b2dnbGUoImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0tdHJlZS1saW5lLXZlcnRpY2FsIiwhdCl9dGhpcy5lRHJhZ0hhbmRsZS5jbGFzc0xpc3QudG9nZ2xlKCJhZy1hZHZhbmNlZC1maWx0ZXItYnVpbGRlci1pdGVtLXRyZWUtbGluZS12ZXJ0aWNhbC1ib3R0b20iLHQpfXNldHVwVmFsaWRhdGlvbigpe3RoaXMuZVZhbGlkYXRpb24uYXBwZW5kQ2hpbGQocy5fLmNyZWF0ZUljb25Ob1NwYW4oImFkdmFuY2VkRmlsdGVyQnVpbGRlckludmFsaWQiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKSksdGhpcy52YWxpZGF0aW9uVG9vbHRpcEZlYXR1cmU9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5Ub29sdGlwRmVhdHVyZSh7Z2V0R3VpOigpPT50aGlzLmVWYWxpZGF0aW9uLGdldExvY2F0aW9uOigpPT4iYWR2YW5jZWRGaWx0ZXIiLGdldFRvb2x0aXBWYWx1ZTooKT0+dGhpcy5lUGlsbFdyYXBwZXIuZ2V0VmFsaWRhdGlvbk1lc3NhZ2UoKSxnZXRUb29sdGlwU2hvd0RlbGF5T3ZlcnJpZGU6KCk9PjFlM30sdGhpcy5iZWFucykpLHRoaXMudmFsaWRhdGlvblRvb2x0aXBGZWF0dXJlLnNldENvbXAodGhpcy5lVmFsaWRhdGlvbiksdGhpcy51cGRhdGVWYWxpZGl0eSgpfXNldHVwQWRkQnV0dG9uKCl7dmFyIGU7Y29uc3QgdD11KGU9PnRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoZSksbnVsbD09PShlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiYWR2YW5jZWRGaWx0ZXJCdWlsZGVyUGFyYW1zIikpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmFkZFNlbGVjdFdpZHRoKSxpPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IGEodCkpO3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGkscy5FdmVudHMuRVZFTlRfRklFTERfUElDS0VSX1ZBTFVFX1NFTEVDVEVELCh7dmFsdWU6ZX0pPT50aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6cC5FVkVOVF9BRERFRCxpdGVtOnRoaXMuaXRlbSxpc0pvaW46ImpvaW4iPT09ZS5rZXl9KSksdGhpcy5lQWRkQnV0dG9uLmFwcGVuZENoaWxkKGkuZ2V0R3VpKCkpO3RoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHMuVG9vbHRpcEZlYXR1cmUoe2dldEd1aTooKT0+dGhpcy5lQWRkQnV0dG9uLGdldExvY2F0aW9uOigpPT4iYWR2YW5jZWRGaWx0ZXIiLGdldFRvb2x0aXBWYWx1ZTooKT0+dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnRyYW5zbGF0ZSgiYWR2YW5jZWRGaWx0ZXJCdWlsZGVyQWRkQnV0dG9uVG9vbHRpcCIpfSx0aGlzLmJlYW5zKSkuc2V0Q29tcCh0aGlzLmVBZGRCdXR0b24pfXNldHVwUmVtb3ZlQnV0dG9uKCl7dGhpcy5lUmVtb3ZlQnV0dG9uLmFwcGVuZENoaWxkKHMuXy5jcmVhdGVJY29uTm9TcGFuKCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJSZW1vdmUiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lUmVtb3ZlQnV0dG9uLCJjbGljayIsKCk9PnRoaXMucmVtb3ZlSXRlbSgpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVSZW1vdmVCdXR0b24sImtleWRvd24iLGU9Pntzd2l0Y2goZS5rZXkpe2Nhc2Ugcy5LZXlDb2RlLkVOVEVSOmUucHJldmVudERlZmF1bHQoKSxzLl8uc3RvcFByb3BhZ2F0aW9uRm9yQWdHcmlkKGUpLHRoaXMucmVtb3ZlSXRlbSgpfX0pO3RoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHMuVG9vbHRpcEZlYXR1cmUoe2dldEd1aTooKT0+dGhpcy5lUmVtb3ZlQnV0dG9uLGdldExvY2F0aW9uOigpPT4iYWR2YW5jZWRGaWx0ZXIiLGdldFRvb2x0aXBWYWx1ZTooKT0+dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnRyYW5zbGF0ZSgiYWR2YW5jZWRGaWx0ZXJCdWlsZGVyUmVtb3ZlQnV0dG9uVG9vbHRpcCIpfSx0aGlzLmJlYW5zKSkuc2V0Q29tcCh0aGlzLmVSZW1vdmVCdXR0b24pLHMuXy5zZXRBcmlhTGFiZWwodGhpcy5lUmVtb3ZlQnV0dG9uLHRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyQnVpbGRlclJlbW92ZUJ1dHRvblRvb2x0aXAiKSksdGhpcy5hY3RpdmF0ZVRhYkluZGV4KFt0aGlzLmVSZW1vdmVCdXR0b25dKX1zZXR1cE1vdmVCdXR0b25zKGUpe2U/KHRoaXMuZU1vdmVVcEJ1dHRvbi5hcHBlbmRDaGlsZChzLl8uY3JlYXRlSWNvbk5vU3BhbigiYWR2YW5jZWRGaWx0ZXJCdWlsZGVyTW92ZVVwIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZU1vdmVVcEJ1dHRvbiwiY2xpY2siLCgpPT50aGlzLm1vdmVJdGVtKCEwKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lTW92ZVVwQnV0dG9uLCJrZXlkb3duIixlPT57c3dpdGNoKGUua2V5KXtjYXNlIHMuS2V5Q29kZS5FTlRFUjplLnByZXZlbnREZWZhdWx0KCkscy5fLnN0b3BQcm9wYWdhdGlvbkZvckFnR3JpZChlKSx0aGlzLm1vdmVJdGVtKCEwKX19KSx0aGlzLm1vdmVVcFRvb2x0aXBGZWF0dXJlPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHMuVG9vbHRpcEZlYXR1cmUoe2dldEd1aTooKT0+dGhpcy5lTW92ZVVwQnV0dG9uLGdldExvY2F0aW9uOigpPT4iYWR2YW5jZWRGaWx0ZXIiLGdldFRvb2x0aXBWYWx1ZTooKT0+dGhpcy5tb3ZlVXBEaXNhYmxlZD9udWxsOnRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyQnVpbGRlck1vdmVVcEJ1dHRvblRvb2x0aXAiKX0sdGhpcy5iZWFucykpLHRoaXMubW92ZVVwVG9vbHRpcEZlYXR1cmUuc2V0Q29tcCh0aGlzLmVNb3ZlVXBCdXR0b24pLHMuXy5zZXRBcmlhTGFiZWwodGhpcy5lTW92ZVVwQnV0dG9uLHRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyQnVpbGRlck1vdmVVcEJ1dHRvblRvb2x0aXAiKSksdGhpcy5lTW92ZURvd25CdXR0b24uYXBwZW5kQ2hpbGQocy5fLmNyZWF0ZUljb25Ob1NwYW4oImFkdmFuY2VkRmlsdGVyQnVpbGRlck1vdmVEb3duIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZU1vdmVEb3duQnV0dG9uLCJjbGljayIsKCk9PnRoaXMubW92ZUl0ZW0oITEpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVNb3ZlRG93bkJ1dHRvbiwia2V5ZG93biIsZT0+e3N3aXRjaChlLmtleSl7Y2FzZSBzLktleUNvZGUuRU5URVI6ZS5wcmV2ZW50RGVmYXVsdCgpLHMuXy5zdG9wUHJvcGFnYXRpb25Gb3JBZ0dyaWQoZSksdGhpcy5tb3ZlSXRlbSghMSl9fSksdGhpcy5tb3ZlRG93blRvb2x0aXBGZWF0dXJlPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHMuVG9vbHRpcEZlYXR1cmUoe2dldEd1aTooKT0+dGhpcy5lTW92ZURvd25CdXR0b24sZ2V0TG9jYXRpb246KCk9PiJhZHZhbmNlZEZpbHRlciIsZ2V0VG9vbHRpcFZhbHVlOigpPT50aGlzLm1vdmVEb3duRGlzYWJsZWQ/bnVsbDp0aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJNb3ZlRG93bkJ1dHRvblRvb2x0aXAiKX0sdGhpcy5iZWFucykpLHRoaXMubW92ZURvd25Ub29sdGlwRmVhdHVyZS5zZXRDb21wKHRoaXMuZU1vdmVEb3duQnV0dG9uKSxzLl8uc2V0QXJpYUxhYmVsKHRoaXMuZU1vdmVEb3duQnV0dG9uLHRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyQnVpbGRlck1vdmVEb3duQnV0dG9uVG9vbHRpcCIpKSx0aGlzLmFjdGl2YXRlVGFiSW5kZXgoW3RoaXMuZU1vdmVVcEJ1dHRvbix0aGlzLmVNb3ZlRG93bkJ1dHRvbl0pKToocy5fLnNldERpc3BsYXllZCh0aGlzLmVNb3ZlVXBCdXR0b24sITEpLHMuXy5zZXREaXNwbGF5ZWQodGhpcy5lTW92ZURvd25CdXR0b24sITEpKX11cGRhdGVWYWxpZGl0eSgpe3MuXy5zZXRWaXNpYmxlKHRoaXMuZVZhbGlkYXRpb24sIXRoaXMuaXRlbS52YWxpZCksdGhpcy52YWxpZGF0aW9uVG9vbHRpcEZlYXR1cmUucmVmcmVzaFRvb2xUaXAoKSx0aGlzLnVwZGF0ZUFyaWFMYWJlbCgpfWNyZWF0ZVBpbGwoZSl7dmFyIHQsaTtjb25zdHtrZXk6cixkaXNwbGF5VmFsdWU6byxjc3NDbGFzczpuLHVwZGF0ZTphLGFyaWFMYWJlbDpsfT1lLGQ9ZT0+e251bGwhPWUmJihhKGUpLHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpwLkVWRU5UX1ZBTFVFX0NIQU5HRUR9KSl9O2lmKGUuaXNTZWxlY3Qpe2NvbnN0e2dldEVkaXRvclBhcmFtczphLHBpY2tlckFyaWFMYWJlbEtleTpjLHBpY2tlckFyaWFMYWJlbFZhbHVlOmh9PWUsdT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImFkdmFuY2VkRmlsdGVyQnVpbGRlclBhcmFtcyIpLHA9KG51bGwhPT0odD1udWxsPT11P3ZvaWQgMDp1LnBpbGxTZWxlY3RNaW5XaWR0aCkmJnZvaWQgMCE9PXQ/dDoxNDApKyJweCIsZz0obnVsbCE9PShpPW51bGw9PXU/dm9pZCAwOnUucGlsbFNlbGVjdE1heFdpZHRoKSYmdm9pZCAwIT09aT9pOjIwMCkrInB4IixtPXRoaXMuY3JlYXRlQmVhbihuZXcgUyh7cGlja2VyQXJpYUxhYmVsS2V5OmMscGlja2VyQXJpYUxhYmVsVmFsdWU6aCxwaWNrZXJUeXBlOiJhZy1saXN0Iix2YWx1ZTp7a2V5OnIsZGlzcGxheVZhbHVlOm99LHZhbHVlRm9ybWF0dGVyOmU9Pnt2YXIgdDtyZXR1cm4gbnVsbD09ZT9udWxsOm51bGwhPT0odD1lLmRpc3BsYXlWYWx1ZSkmJnZvaWQgMCE9PXQ/dDplLmtleX0sdmFyaWFibGVXaWR0aDohMCxtaW5QaWNrZXJXaWR0aDpwLG1heFBpY2tlcldpZHRoOmcsZ2V0RWRpdG9yUGFyYW1zOmEsd3JhcHBlckNsYXNzTmFtZTpuLGFyaWFMYWJlbDpsfSkpO3JldHVybiB0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihtLHMuRXZlbnRzLkVWRU5UX0ZJRUxEX1BJQ0tFUl9WQUxVRV9TRUxFQ1RFRCwoe3ZhbHVlOmV9KT0+ZChudWxsPT1lP3ZvaWQgMDplLmtleSkpLG19e2NvbnN0IHQ9dGhpcy5jcmVhdGVCZWFuKG5ldyB2KHt2YWx1ZTpvLGNzc0NsYXNzOm4sdHlwZTp0aGlzLmdldElucHV0VHlwZShlLmJhc2VDZWxsRGF0YVR5cGUpLGFyaWFMYWJlbDpsfSkpO3JldHVybiB0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0LHMuRXZlbnRzLkVWRU5UX0ZJRUxEX1ZBTFVFX0NIQU5HRUQsKHt2YWx1ZTplfSk9PmQoZSkpLHR9fWdldElucHV0VHlwZShlKXtzd2l0Y2goZSl7Y2FzZSJ0ZXh0IjpjYXNlIm9iamVjdCI6Y2FzZSJib29sZWFuIjpyZXR1cm4idGV4dCI7Y2FzZSJudW1iZXIiOnJldHVybiJudW1iZXIiO2Nhc2UiZGF0ZSI6Y2FzZSJkYXRlU3RyaW5nIjpyZXR1cm4iZGF0ZSJ9fXNldHVwRHJhZ2dpbmcoKXtjb25zdCBlPXt0eXBlOnMuRHJhZ1NvdXJjZVR5cGUuQWR2YW5jZWRGaWx0ZXJCdWlsZGVyLGVFbGVtZW50OnRoaXMuZURyYWdIYW5kbGUsZHJhZ0l0ZW1OYW1lOigpPT50aGlzLmVQaWxsV3JhcHBlci5nZXREcmFnTmFtZSgpLGdldERlZmF1bHRJY29uTmFtZTooKT0+cy5EcmFnQW5kRHJvcFNlcnZpY2UuSUNPTl9OT1RfQUxMT1dFRCxnZXREcmFnSXRlbTooKT0+KHt9KSxvbkRyYWdTdGFydGVkOigpPT50aGlzLmRyYWdGZWF0dXJlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ZC5FVkVOVF9EUkFHX1NUQVJURUQsaXRlbTp0aGlzLml0ZW19KSxvbkRyYWdTdG9wcGVkOigpPT50aGlzLmRyYWdGZWF0dXJlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ZC5FVkVOVF9EUkFHX0VOREVEfSl9O3RoaXMuZHJhZ0FuZERyb3BTZXJ2aWNlLmFkZERyYWdTb3VyY2UoZSwhMCksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+dGhpcy5kcmFnQW5kRHJvcFNlcnZpY2UucmVtb3ZlRHJhZ1NvdXJjZShlKSl9dXBkYXRlQXJpYUxhYmVsKCl7Y29uc3QgZT10aGlzLmVQaWxsV3JhcHBlci5nZXRBcmlhTGFiZWwoKSx0PSIiKyh0aGlzLml0ZW0ubGV2ZWwrMSksaT10aGlzLmVQaWxsV3JhcHBlci5nZXRWYWxpZGF0aW9uTWVzc2FnZSgpO2xldCByO3I9aT90aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhcmlhQWR2YW5jZWRGaWx0ZXJCdWlsZGVySXRlbVZhbGlkYXRpb24iLFtlLHQsaV0pOnRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFyaWFBZHZhbmNlZEZpbHRlckJ1aWxkZXJJdGVtIixbZSx0XSkscy5fLnNldEFyaWFMYWJlbCh0aGlzLmZvY3VzV3JhcHBlcixyKX11cGRhdGVBcmlhRXhwYW5kZWQoKXtzLl8ucmVtb3ZlQXJpYUV4cGFuZGVkKHRoaXMuZm9jdXNXcmFwcGVyKTtjb25zdHtmaWx0ZXJNb2RlbDplfT10aGlzLml0ZW07ImpvaW4iPT09KG51bGw9PWU/dm9pZCAwOmUuZmlsdGVyVHlwZSkmJmUuY29uZGl0aW9ucy5sZW5ndGgmJnMuXy5zZXRBcmlhRXhwYW5kZWQodGhpcy5mb2N1c1dyYXBwZXIsITApfXJlbW92ZUl0ZW0oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6cC5FVkVOVF9SRU1PVkVELGl0ZW06dGhpcy5pdGVtfSl9bW92ZUl0ZW0oZSl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOnAuRVZFTlRfTU9WRUQsaXRlbTp0aGlzLml0ZW0sYmFja3dhcmRzOmV9KX19dyhbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlVHJlZUxpbmVzIildLGIucHJvdG90eXBlLCJlVHJlZUxpbmVzIix2b2lkIDApLHcoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZURyYWdIYW5kbGUiKV0sYi5wcm90b3R5cGUsImVEcmFnSGFuZGxlIix2b2lkIDApLHcoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUl0ZW0iKV0sYi5wcm90b3R5cGUsImVJdGVtIix2b2lkIDApLHcoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUJ1dHRvbnMiKV0sYi5wcm90b3R5cGUsImVCdXR0b25zIix2b2lkIDApLHcoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZVZhbGlkYXRpb24iKV0sYi5wcm90b3R5cGUsImVWYWxpZGF0aW9uIix2b2lkIDApLHcoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZU1vdmVVcEJ1dHRvbiIpXSxiLnByb3RvdHlwZSwiZU1vdmVVcEJ1dHRvbiIsdm9pZCAwKSx3KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVNb3ZlRG93bkJ1dHRvbiIpXSxiLnByb3RvdHlwZSwiZU1vdmVEb3duQnV0dG9uIix2b2lkIDApLHcoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUFkZEJ1dHRvbiIpXSxiLnByb3RvdHlwZSwiZUFkZEJ1dHRvbiIsdm9pZCAwKSx3KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVSZW1vdmVCdXR0b24iKV0sYi5wcm90b3R5cGUsImVSZW1vdmVCdXR0b24iLHZvaWQgMCksdyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiYmVhbnMiKV0sYi5wcm90b3R5cGUsImJlYW5zIix2b2lkIDApLHcoW09iamVjdChzLkF1dG93aXJlZCkoImRyYWdBbmREcm9wU2VydmljZSIpXSxiLnByb3RvdHlwZSwiZHJhZ0FuZERyb3BTZXJ2aWNlIix2b2lkIDApLHcoW09iamVjdChzLkF1dG93aXJlZCkoImFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UiKV0sYi5wcm90b3R5cGUsImFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UiLHZvaWQgMCksdyhbcy5Qb3N0Q29uc3RydWN0XSxiLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIEU9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgUiBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoJ1xuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItaXRlbS13cmFwcGVyIiByb2xlPSJwcmVzZW50YXRpb24iPlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlSXRlbSIgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0iIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0tdHJlZS1saW5lcyIgYXJpYS1oaWRkZW49InRydWUiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItaXRlbS10cmVlLWxpbmUtdmVydGljYWwtdG9wIGFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWl0ZW0tdHJlZS1saW5lLWhvcml6b250YWwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAnKSx0aGlzLml0ZW09ZSx0aGlzLmZvY3VzV3JhcHBlcj10fXBvc3RDb25zdHJ1Y3QoKXt2YXIgZTtzLl8uc2V0QXJpYUxldmVsKHRoaXMuZm9jdXNXcmFwcGVyLDIpO2NvbnN0IHQ9dShlPT50aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKGUpLG51bGw9PT0oZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImFkdmFuY2VkRmlsdGVyQnVpbGRlclBhcmFtcyIpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5hZGRTZWxlY3RXaWR0aCksaT10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBhKHQpKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcihpLHMuRXZlbnRzLkVWRU5UX0ZJRUxEX1BJQ0tFUl9WQUxVRV9TRUxFQ1RFRCwoe3ZhbHVlOmV9KT0+e3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpwLkVWRU5UX0FEREVELGl0ZW06dGhpcy5pdGVtLGlzSm9pbjoiam9pbiI9PT1lLmtleX0pfSksdGhpcy5lSXRlbS5hcHBlbmRDaGlsZChpLmdldEd1aSgpKTt0aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBzLlRvb2x0aXBGZWF0dXJlKHtnZXRHdWk6KCk9PmkuZ2V0R3VpKCksZ2V0TG9jYXRpb246KCk9PiJhZHZhbmNlZEZpbHRlciIsZ2V0VG9vbHRpcFZhbHVlOigpPT50aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJBZGRCdXR0b25Ub29sdGlwIil9LHRoaXMuYmVhbnMpKS5zZXRDb21wKGkuZ2V0R3VpKCkpLHRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IGgodGhpcy5nZXRHdWkoKSx0aGlzLmZvY3VzV3JhcHBlcixpKSkscy5fLnNldEFyaWFMYWJlbCh0aGlzLmZvY3VzV3JhcHBlcix0aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhcmlhQWR2YW5jZWRGaWx0ZXJCdWlsZGVySXRlbSIsW3RoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyQnVpbGRlckFkZEJ1dHRvblRvb2x0aXAiKSwiIisodGhpcy5pdGVtLmxldmVsKzEpXSkpfWFmdGVyQWRkKCl7fX1FKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJiZWFucyIpXSxSLnByb3RvdHlwZSwiYmVhbnMiLHZvaWQgMCksRShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZSIpXSxSLnByb3RvdHlwZSwiYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZSIsdm9pZCAwKSxFKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVJdGVtIildLFIucHJvdG90eXBlLCJlSXRlbSIsdm9pZCAwKSxFKFtzLlBvc3RDb25zdHJ1Y3RdLFIucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTt2YXIgeD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBUIGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3IoKXtzdXBlcignXG4gICAgICAgICAgICA8ZGl2IHJvbGU9InByZXNlbnRhdGlvbiIgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyIiB0YWJpbmRleD0iLTEiPlxuICAgICAgICAgICAgICAgIDxkaXYgcm9sZT0icHJlc2VudGF0aW9uIiBjbGFzcz0iYWctYWR2YW5jZWQtZmlsdGVyLWJ1aWxkZXItbGlzdCIgcmVmPSJlTGlzdCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiByb2xlPSJwcmVzZW50YXRpb24iIGNsYXNzPSJhZy1hZHZhbmNlZC1maWx0ZXItYnVpbGRlci1idXR0b24tcGFuZWwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhZy1idXR0b24gYWctc3RhbmRhcmQtYnV0dG9uIGFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWFwcGx5LWJ1dHRvbiIgcmVmPSJlQXBwbHlGaWx0ZXJCdXR0b24iPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhZy1idXR0b24gYWctc3RhbmRhcmQtYnV0dG9uIGFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWNhbmNlbC1idXR0b24iIHJlZj0iZUNhbmNlbEZpbHRlckJ1dHRvbiI+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj4nKSx0aGlzLnZhbGlkYXRpb25NZXNzYWdlPW51bGx9cG9zdENvbnN0cnVjdCgpe3ZhciBlO2NvbnN0e3Nob3dNb3ZlQnV0dG9uczp0fT1udWxsIT09KGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJQYXJhbXMiKSkmJnZvaWQgMCE9PWU/ZTp7fTt0aGlzLnNob3dNb3ZlPSEhdCx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJQYXJhbXMiLCh7Y3VycmVudFZhbHVlOmV9KT0+e3RoaXMuc2hvd01vdmU9ISEobnVsbD09ZT92b2lkIDA6ZS5zaG93TW92ZUJ1dHRvbnMpLHRoaXMucmVmcmVzaExpc3QoITEpfSksdGhpcy5maWx0ZXJNb2RlbD10aGlzLnNldHVwRmlsdGVyTW9kZWwoKSx0aGlzLnNldHVwVmlydHVhbExpc3QoKSx0aGlzLmRyYWdGZWF0dXJlPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IGQodGhpcyx0aGlzLnZpcnR1YWxMaXN0KSksdGhpcy5zZXR1cEJ1dHRvbnMoKX1yZWZyZXNoKCl7bGV0IGU9dGhpcy52aXJ0dWFsTGlzdC5nZXRMYXN0Rm9jdXNlZFJvdygpO3RoaXMuc2V0dXBGaWx0ZXJNb2RlbCgpLHRoaXMudmFsaWRhdGVJdGVtcygpLHRoaXMucmVmcmVzaExpc3QoITEpLG51bGwhPWUmJih0aGlzLnZpcnR1YWxMaXN0LmdldENvbXBvbmVudEF0KGUpfHwoZT0wKSx0aGlzLnZpcnR1YWxMaXN0LmZvY3VzUm93KGUpKX1nZXROdW1JdGVtcygpe3JldHVybiB0aGlzLml0ZW1zLmxlbmd0aH1tb3ZlSXRlbShlLHQpe3QmJmUmJnRoaXMubW92ZUl0ZW1Ub0luZGV4KGUsdC5yb3dJbmRleCx0LnBvc2l0aW9uKX1hZnRlckd1aUF0dGFjaGVkKCl7dGhpcy52aXJ0dWFsTGlzdC5mb2N1c1JvdygwKX1zZXR1cFZpcnR1YWxMaXN0KCl7dGhpcy52aXJ0dWFsTGlzdD10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBzLlZpcnR1YWxMaXN0KHtjc3NJZGVudGlmaWVyOiJhZHZhbmNlZC1maWx0ZXItYnVpbGRlciIsYXJpYVJvbGU6InRyZWUiLGxpc3ROYW1lOnRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFyaWFBZHZhbmNlZEZpbHRlckJ1aWxkZXJMaXN0Iil9KSksdGhpcy52aXJ0dWFsTGlzdC5zZXRDb21wb25lbnRDcmVhdG9yKHRoaXMuY3JlYXRlSXRlbUNvbXBvbmVudC5iaW5kKHRoaXMpKSx0aGlzLnZpcnR1YWxMaXN0LnNldENvbXBvbmVudFVwZGF0ZXIodGhpcy51cGRhdGVJdGVtQ29tcG9uZW50LmJpbmQodGhpcykpLHRoaXMudmlydHVhbExpc3Quc2V0Um93SGVpZ2h0KDQwKSx0aGlzLmVMaXN0LmFwcGVuZENoaWxkKHRoaXMudmlydHVhbExpc3QuZ2V0R3VpKCkpLHRoaXMudmlydHVhbExpc3Quc2V0TW9kZWwoe2dldFJvd0NvdW50OigpPT50aGlzLml0ZW1zLmxlbmd0aCxnZXRSb3c6ZT0+dGhpcy5pdGVtc1tlXSxhcmVSb3dzRXF1YWw6KGUsdCk9PmU9PT10fSksdGhpcy5idWlsZExpc3QoKSx0aGlzLnZpcnR1YWxMaXN0LnJlZnJlc2goKX1zZXR1cEJ1dHRvbnMoKXt0aGlzLmVBcHBseUZpbHRlckJ1dHRvbi5pbm5lclRleHQ9dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnRyYW5zbGF0ZSgiYWR2YW5jZWRGaWx0ZXJCdWlsZGVyQXBwbHkiKSx0aGlzLmFjdGl2YXRlVGFiSW5kZXgoW3RoaXMuZUFwcGx5RmlsdGVyQnV0dG9uXSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lQXBwbHlGaWx0ZXJCdXR0b24sImNsaWNrIiwoKT0+e3RoaXMuYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlLnNldE1vZGVsKHRoaXMuZmlsdGVyTW9kZWwpLHRoaXMuZmlsdGVyTWFuYWdlci5vbkZpbHRlckNoYW5nZWQoe3NvdXJjZToiYWR2YW5jZWRGaWx0ZXIifSksdGhpcy5jbG9zZSgpfSksdGhpcy52YWxpZGF0aW9uVG9vbHRpcEZlYXR1cmU9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5Ub29sdGlwRmVhdHVyZSh7Z2V0R3VpOigpPT50aGlzLmVBcHBseUZpbHRlckJ1dHRvbixnZXRMb2NhdGlvbjooKT0+ImFkdmFuY2VkRmlsdGVyIixnZXRUb29sdGlwVmFsdWU6KCk9PnRoaXMudmFsaWRhdGlvbk1lc3NhZ2UsZ2V0VG9vbHRpcFNob3dEZWxheU92ZXJyaWRlOigpPT4xZTN9LHRoaXMuYmVhbnMpKSx0aGlzLnZhbGlkYXRpb25Ub29sdGlwRmVhdHVyZS5zZXRDb21wKHRoaXMuZUFwcGx5RmlsdGVyQnV0dG9uKSx0aGlzLnZhbGlkYXRlKCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lQXBwbHlGaWx0ZXJCdXR0b24sIm1vdXNlZW50ZXIiLCgpPT50aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLXZhbGlkYXRpb24iLCEwKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lQXBwbHlGaWx0ZXJCdXR0b24sIm1vdXNlbGVhdmUiLCgpPT50aGlzLmFkZE9yUmVtb3ZlQ3NzQ2xhc3MoImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLXZhbGlkYXRpb24iLCExKSksdGhpcy5lQ2FuY2VsRmlsdGVyQnV0dG9uLmlubmVyVGV4dD10aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhZHZhbmNlZEZpbHRlckJ1aWxkZXJDYW5jZWwiKSx0aGlzLmFjdGl2YXRlVGFiSW5kZXgoW3RoaXMuZUNhbmNlbEZpbHRlckJ1dHRvbl0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUNhbmNlbEZpbHRlckJ1dHRvbiwiY2xpY2siLCgpPT50aGlzLmNsb3NlKCkpfXJlbW92ZUl0ZW1Gcm9tUGFyZW50KGUpe2NvbnN0IHQ9ZS5wYXJlbnQuY29uZGl0aW9ucy5pbmRleE9mKGUuZmlsdGVyTW9kZWwpO3JldHVybiBlLnBhcmVudC5jb25kaXRpb25zLnNwbGljZSh0LDEpLHR9bW92ZUl0ZW1Ub0luZGV4KGUsdCxpKXt2YXIgcztjb25zdCByPXRoaXMuaXRlbXNbdF0sbz0iam9pbiI9PT0obnVsbD09PShzPXIuZmlsdGVyTW9kZWwpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmZpbHRlclR5cGUpJiYiYm90dG9tIj09PWksbj1vP3IuZmlsdGVyTW9kZWw6ci5wYXJlbnQ7aWYoIW4pcmV0dXJuO2lmKHRoaXMuaXNDaGlsZE9yU2VsZihuLGUuZmlsdGVyTW9kZWwpfHxyPT09ZSlyZXR1cm47bGV0IGE7dGhpcy5yZW1vdmVJdGVtRnJvbVBhcmVudChlKSxvP2E9MDooYT1uLmNvbmRpdGlvbnMuaW5kZXhPZihyLmZpbHRlck1vZGVsKSwtMT09PWE/YT1uLmNvbmRpdGlvbnMubGVuZ3RoOiJib3R0b20iPT09aSYmKGErPTEpKSxuLmNvbmRpdGlvbnMuc3BsaWNlKGEsMCxlLmZpbHRlck1vZGVsKSx0aGlzLnJlZnJlc2hMaXN0KCExKX1pc0NoaWxkT3JTZWxmKGUsdCl7cmV0dXJuIGU9PT10fHwiam9pbiI9PT10LmZpbHRlclR5cGUmJnQuY29uZGl0aW9ucy5zb21lKHQ9PnRoaXMuaXNDaGlsZE9yU2VsZihlLHQpKX1zZXR1cEZpbHRlck1vZGVsKCl7Y29uc3QgZT10aGlzLmZvcm1hdEZpbHRlck1vZGVsKHRoaXMuYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlLmdldE1vZGVsKCkpO3JldHVybiB0aGlzLnN0cmluZ2lmaWVkTW9kZWw9SlNPTi5zdHJpbmdpZnkoZSksZX1mb3JtYXRGaWx0ZXJNb2RlbChlKXtyZXR1cm4iam9pbiIhPT0oZT1udWxsIT1lP2U6e2ZpbHRlclR5cGU6ImpvaW4iLHR5cGU6IkFORCIsY29uZGl0aW9uczpbXX0pLmZpbHRlclR5cGUmJihlPXtmaWx0ZXJUeXBlOiJqb2luIix0eXBlOiJBTkQiLGNvbmRpdGlvbnM6W2VdfSksZX1idWlsZExpc3QoKXtjb25zdCBlPSh0LGkscyxyKT0+e2kucHVzaCh7ZmlsdGVyTW9kZWw6dCxsZXZlbDpzLHBhcmVudDpyLHZhbGlkOiEwLHNob3dNb3ZlOnRoaXMuc2hvd01vdmV9KSwiam9pbiI9PT10LmZpbHRlclR5cGUmJih0LmNvbmRpdGlvbnMuZm9yRWFjaChyPT5lKHIsaSxzKzEsdCkpLDA9PT1zJiZpLnB1c2goe2ZpbHRlck1vZGVsOm51bGwsbGV2ZWw6cysxLHBhcmVudDp0LHZhbGlkOiEwfSkpfTt0aGlzLml0ZW1zPVtdLGUodGhpcy5maWx0ZXJNb2RlbCx0aGlzLml0ZW1zLDApfXJlZnJlc2hMaXN0KGUpe2lmKCFlKXtjb25zdCBlPVtdO3RoaXMuaXRlbXMuZm9yRWFjaCh0PT57dC52YWxpZHx8ZS5wdXNoKHQuZmlsdGVyTW9kZWwpfSksdGhpcy5idWlsZExpc3QoKSxlLmxlbmd0aCYmdGhpcy5pdGVtcy5mb3JFYWNoKHQ9Pnt0LmZpbHRlck1vZGVsJiZlLmluY2x1ZGVzKHQuZmlsdGVyTW9kZWwpJiYodC52YWxpZD0hMSl9KX10aGlzLnZpcnR1YWxMaXN0LnJlZnJlc2goZSksdGhpcy52YWxpZGF0ZSgpfXVwZGF0ZUl0ZW1Db21wb25lbnQoZSx0KXtjb25zdCBpPXRoaXMuaXRlbXMuaW5kZXhPZihlKSxzPShlLHQpPT57Y29uc3QgaT10aGlzLml0ZW1zLmZpbmQodD0+dC5maWx0ZXJNb2RlbD09PWUpLHI9bnVsbD09aT92b2lkIDA6aS5wYXJlbnQ7aWYocil7Y29uc3R7Y29uZGl0aW9uczppfT1yO3Mocix0KSx0LnB1c2goaVtpLmxlbmd0aC0xXT09PWUpfX0scj1bXSx7ZmlsdGVyTW9kZWw6b309ZTtvJiYocyhvLHIpLHJbMF09ITEpO2NvbnN0IG49ImpvaW4iPT09KG51bGw9PW8/dm9pZCAwOm8uZmlsdGVyVHlwZSkmJiEhby5jb25kaXRpb25zLmxlbmd0aDt0LnNldFN0YXRlKHtkaXNhYmxlTW92ZVVwOjE9PT1pLGRpc2FibGVNb3ZlRG93bjohdGhpcy5jYW5Nb3ZlRG93bihlLGkpLHRyZWVMaW5lczpyLHNob3dTdGFydFRyZWVMaW5lOm59KX1jcmVhdGVJdGVtQ29tcG9uZW50KGUsdCl7Y29uc3QgaT10aGlzLmNyZWF0ZUJlYW4oZS5maWx0ZXJNb2RlbD9uZXcgYihlLHRoaXMuZHJhZ0ZlYXR1cmUsdCk6bmV3IFIoZSx0KSk7cmV0dXJuIGkuYWRkTWFuYWdlZExpc3RlbmVyKGkscC5FVkVOVF9SRU1PVkVELCh7aXRlbTplfSk9PnRoaXMucmVtb3ZlSXRlbShlKSksaS5hZGRNYW5hZ2VkTGlzdGVuZXIoaSxwLkVWRU5UX1ZBTFVFX0NIQU5HRUQsKCk9PnRoaXMudmFsaWRhdGUoKSksaS5hZGRNYW5hZ2VkTGlzdGVuZXIoaSxwLkVWRU5UX0FEREVELCh7aXRlbTplLGlzSm9pbjp0fSk9PnRoaXMuYWRkSXRlbShlLHQpKSxpLmFkZE1hbmFnZWRMaXN0ZW5lcihpLHAuRVZFTlRfTU9WRUQsKHtpdGVtOmUsYmFja3dhcmRzOnR9KT0+dGhpcy5tb3ZlSXRlbVVwRG93bihlLHQpKSxpIGluc3RhbmNlb2YgYiYmdGhpcy51cGRhdGVJdGVtQ29tcG9uZW50KGUsaSksaX1hZGRJdGVtKGUsdCl7dmFyIGk7Y29uc3R7cGFyZW50OnMsbGV2ZWw6cixmaWx0ZXJNb2RlbDpvfT1lLG49ImpvaW4iPT09KG51bGw9PW8/dm9pZCAwOm8uZmlsdGVyVHlwZSksYT10P3tmaWx0ZXJUeXBlOiJqb2luIix0eXBlOiJBTkQiLGNvbmRpdGlvbnM6W119Ont9LGw9bj9vOnM7bGV0IGQ9bj8wOmwuY29uZGl0aW9ucy5pbmRleE9mKG8pO2Q+PTA/KG58fChkKz0xKSxsLmNvbmRpdGlvbnMuc3BsaWNlKGQsMCxhKSk6bC5jb25kaXRpb25zLnB1c2goYSk7bGV0IGM9dGhpcy5pdGVtcy5pbmRleE9mKGUpO2NvbnN0IGg9Yz49MDtpZihoKXtlLmZpbHRlck1vZGVsJiZjKys7Y29uc3QgaT1be2ZpbHRlck1vZGVsOmEsbGV2ZWw6bj9yKzE6cixwYXJlbnQ6bCx2YWxpZDp0LHNob3dNb3ZlOnRoaXMuc2hvd01vdmV9XTt0aGlzLml0ZW1zLnNwbGljZShjLDAsLi4uaSl9dGhpcy5yZWZyZXNoTGlzdChoKSxoJiYobnVsbD09PShpPXRoaXMudmlydHVhbExpc3QuZ2V0Q29tcG9uZW50QXQoYykpfHx2b2lkIDA9PT1pfHxpLmFmdGVyQWRkKCkpfXJlbW92ZUl0ZW0oZSl7dmFyIHQ7Y29uc3QgaT1lLnBhcmVudCx7ZmlsdGVyTW9kZWw6c309ZSxyPWkuY29uZGl0aW9ucy5pbmRleE9mKHMpO2kuY29uZGl0aW9ucy5zcGxpY2UociwxKTtjb25zdCBvPSJqb2luIj09PShudWxsPT09KHQ9ZS5maWx0ZXJNb2RlbCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmlsdGVyVHlwZSksbj10aGlzLml0ZW1zLmluZGV4T2YoZSksYT0hbyYmbj49MDthJiZ0aGlzLml0ZW1zLnNwbGljZShuLDEpLHRoaXMucmVmcmVzaExpc3QoYSksbj49MCYmdGhpcy52aXJ0dWFsTGlzdC5mb2N1c1JvdyhuKX1tb3ZlSXRlbVVwRG93bihlLHQpe2NvbnN0IGk9dGhpcy5pdGVtcy5pbmRleE9mKGUpLHM9dD9pLTE6aSsxO2lmKDA9PT1zfHwhdCYmIXRoaXMuY2FuTW92ZURvd24oZSxpKSlyZXR1cm47Y29uc3Qgcj10aGlzLml0ZW1zW3NdLG89dGhpcy5yZW1vdmVJdGVtRnJvbVBhcmVudChlKSx7bGV2ZWw6bixmaWx0ZXJNb2RlbDphLHBhcmVudDpsfT1lLHtsZXZlbDpkLGZpbHRlck1vZGVsOmMscGFyZW50Omh9PXI7aWYodClpZihkPT09biYmImpvaW4iPT09Yy5maWx0ZXJUeXBlKWMuY29uZGl0aW9ucy5wdXNoKGEpO2Vsc2UgaWYoZDw9bil7Y29uc3QgZT1oLmNvbmRpdGlvbnMuaW5kZXhPZihjKTtoLmNvbmRpdGlvbnMuc3BsaWNlKGUsMCxhKX1lbHNle2wuY29uZGl0aW9uc1tvLTFdLmNvbmRpdGlvbnMucHVzaChhKX1lbHNlIGlmKGQ9PT1uKWlmKCJqb2luIj09PWMuZmlsdGVyVHlwZSljLmNvbmRpdGlvbnMuc3BsaWNlKDAsMCxhKTtlbHNle2NvbnN0IGU9aC5jb25kaXRpb25zLmluZGV4T2YoYyk7aC5jb25kaXRpb25zLnNwbGljZShlKzEsMCxhKX1lbHNlIGlmKG88bC5jb25kaXRpb25zLmxlbmd0aClsLmNvbmRpdGlvbnMuc3BsaWNlKG8rMSwwLGEpO2Vsc2V7Y29uc3QgZT10aGlzLml0ZW1zLmZpbmQoZT0+ZS5maWx0ZXJNb2RlbD09PWwpLHQ9ZS5wYXJlbnQuY29uZGl0aW9ucy5pbmRleE9mKGUuZmlsdGVyTW9kZWwpKzE7ZS5wYXJlbnQuY29uZGl0aW9ucy5zcGxpY2UodCwwLGEpfXRoaXMucmVmcmVzaExpc3QoITEpO2NvbnN0IHU9dGhpcy5pdGVtcy5maW5kSW5kZXgoKHtmaWx0ZXJNb2RlbDplfSk9PmU9PT1hKTtpZih1Pj0wKXtjb25zdCBlPXRoaXMudmlydHVhbExpc3QuZ2V0Q29tcG9uZW50QXQodSk7ZSBpbnN0YW5jZW9mIGImJmUuZm9jdXNNb3ZlQnV0dG9uKHQpfX1jYW5Nb3ZlRG93bihlLHQpe3JldHVybiEoMT09PWUubGV2ZWwmJnQ9PT10aGlzLml0ZW1zLmxlbmd0aC0yfHwxPT09ZS5sZXZlbCYmZS5wYXJlbnQuY29uZGl0aW9uc1tlLnBhcmVudC5jb25kaXRpb25zLmxlbmd0aC0xXT09PWUuZmlsdGVyTW9kZWwpfWNsb3NlKCl7dGhpcy5hZHZhbmNlZEZpbHRlclNlcnZpY2UuZ2V0Q3RybCgpLnRvZ2dsZUZpbHRlckJ1aWxkZXIoInVpIil9dmFsaWRhdGUoKXtsZXQgZT0hdGhpcy5pdGVtcy5ldmVyeSgoe3ZhbGlkOmV9KT0+ZSk7ZT90aGlzLnZhbGlkYXRpb25NZXNzYWdlPXRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyQnVpbGRlclZhbGlkYXRpb25JbmNvbXBsZXRlIik6KGU9SlNPTi5zdHJpbmdpZnkodGhpcy5maWx0ZXJNb2RlbCk9PT10aGlzLnN0cmluZ2lmaWVkTW9kZWwsdGhpcy52YWxpZGF0aW9uTWVzc2FnZT1lP3RoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyQnVpbGRlclZhbGlkYXRpb25BbHJlYWR5QXBwbGllZCIpOm51bGwpLHMuXy5zZXREaXNhYmxlZCh0aGlzLmVBcHBseUZpbHRlckJ1dHRvbixlKSx0aGlzLnZhbGlkYXRpb25Ub29sdGlwRmVhdHVyZS5yZWZyZXNoVG9vbFRpcCgpfXZhbGlkYXRlSXRlbXMoKXtjb25zdCBlPWU9PntlLnR5cGU9dm9pZCAwfSx0PWU9PntkZWxldGUgZS5maWx0ZXJ9O3RoaXMuaXRlbXMuZm9yRWFjaChpPT57aWYoIWkudmFsaWR8fCFpLmZpbHRlck1vZGVsfHwiam9pbiI9PT1pLmZpbHRlck1vZGVsLmZpbHRlclR5cGUpcmV0dXJuO2NvbnN0e2ZpbHRlck1vZGVsOnJ9PWkse2NvbElkOm99PXIsbj10aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0Q29sdW1uQXV0b2NvbXBsZXRlRW50cmllcygpLmZpbmQoKHtrZXk6ZX0pPT5lPT09byksYT10aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0Q29sdW1uRGV0YWlscyhyLmNvbElkKTtpZighbnx8IWEuY29sdW1uKXJldHVybiBpLnZhbGlkPSExLHIuY29sSWQ9dm9pZCAwLGUociksdm9pZCB0KHIpO2NvbnN0IGw9dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLmdldERhdGFUeXBlRXhwcmVzc2lvbk9wZXJhdG9yKGEuYmFzZUNlbGxEYXRhVHlwZSkub3BlcmF0b3JzW3IudHlwZV07aWYoIWwpcmV0dXJuIGkudmFsaWQ9ITEsZShyKSx2b2lkIHQocik7bC5udW1PcGVyYW5kcz4wJiYhcy5fLmV4aXN0cyhyLmZpbHRlcikmJihpLnZhbGlkPSExKX0pfX14KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVMaXN0IildLFQucHJvdG90eXBlLCJlTGlzdCIsdm9pZCAwKSx4KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVBcHBseUZpbHRlckJ1dHRvbiIpXSxULnByb3RvdHlwZSwiZUFwcGx5RmlsdGVyQnV0dG9uIix2b2lkIDApLHgoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUNhbmNlbEZpbHRlckJ1dHRvbiIpXSxULnByb3RvdHlwZSwiZUNhbmNlbEZpbHRlckJ1dHRvbiIsdm9pZCAwKSx4KFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmaWx0ZXJNYW5hZ2VyIildLFQucHJvdG90eXBlLCJmaWx0ZXJNYW5hZ2VyIix2b2lkIDApLHgoW09iamVjdChzLkF1dG93aXJlZCkoImFkdmFuY2VkRmlsdGVyU2VydmljZSIpXSxULnByb3RvdHlwZSwiYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlIix2b2lkIDApLHgoW09iamVjdChzLkF1dG93aXJlZCkoImFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UiKV0sVC5wcm90b3R5cGUsImFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UiLHZvaWQgMCkseChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiYmVhbnMiKV0sVC5wcm90b3R5cGUsImJlYW5zIix2b2lkIDApLHgoW3MuUG9zdENvbnN0cnVjdF0sVC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBEPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIE8gZXh0ZW5kcyBzLkJlYW5TdHVie2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5lbmFibGVkPWV9cG9zdENvbnN0cnVjdCgpe3RoaXMuaGFzQWR2YW5jZWRGaWx0ZXJQYXJlbnQ9ISF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImFkdmFuY2VkRmlsdGVyUGFyZW50IiksdGhpcy5jdHJsc1NlcnZpY2Uud2hlblJlYWR5KCgpPT50aGlzLnNldEFkdmFuY2VkRmlsdGVyQ29tcCgpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9BRFZBTkNFRF9GSUxURVJfRU5BQkxFRF9DSEFOR0VELCh7ZW5hYmxlZDplfSk9PnRoaXMub25FbmFibGVkQ2hhbmdlZChlKSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiYWR2YW5jZWRGaWx0ZXJQYXJlbnQiLCgpPT50aGlzLnVwZGF0ZUNvbXBzKCkpLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9Pnt0aGlzLmRlc3Ryb3lBZHZhbmNlZEZpbHRlckNvbXAoKSx0aGlzLmRlc3Ryb3lCZWFuKHRoaXMuZUJ1aWxkZXJDb21wKSx0aGlzLmVCdWlsZGVyRGlhbG9nJiZ0aGlzLmVCdWlsZGVyRGlhbG9nLmlzQWxpdmUoKSYmdGhpcy5kZXN0cm95QmVhbih0aGlzLmVCdWlsZGVyRGlhbG9nKX0pfXNldHVwSGVhZGVyQ29tcChlKXt0aGlzLmVIZWFkZXJDb21wPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IG4odGhpcy5lbmFibGVkJiYhdGhpcy5oYXNBZHZhbmNlZEZpbHRlclBhcmVudCkpLGUuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJiZWZvcmViZWdpbiIsdGhpcy5lSGVhZGVyQ29tcC5nZXRHdWkoKSl9Zm9jdXNIZWFkZXJDb21wKCl7cmV0dXJuISF0aGlzLmVIZWFkZXJDb21wJiYodGhpcy5lSGVhZGVyQ29tcC5nZXRGb2N1c2FibGVFbGVtZW50KCkuZm9jdXMoKSwhMCl9cmVmcmVzaENvbXAoKXt2YXIgZSx0O251bGw9PT0oZT10aGlzLmVGaWx0ZXJDb21wKXx8dm9pZCAwPT09ZXx8ZS5yZWZyZXNoKCksbnVsbD09PSh0PXRoaXMuZUhlYWRlckNvbXApfHx2b2lkIDA9PT10fHx0LnJlZnJlc2goKX1yZWZyZXNoQnVpbGRlckNvbXAoKXt2YXIgZTtudWxsPT09KGU9dGhpcy5lQnVpbGRlckNvbXApfHx2b2lkIDA9PT1lfHxlLnJlZnJlc2goKX1nZXRIZWFkZXJIZWlnaHQoKXt2YXIgZSx0O3JldHVybiBudWxsIT09KHQ9bnVsbD09PShlPXRoaXMuZUhlYWRlckNvbXApfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldEhlaWdodCgpKSYmdm9pZCAwIT09dD90OjB9c2V0SW5wdXREaXNhYmxlZChlKXt2YXIgdCxpO251bGw9PT0odD10aGlzLmVGaWx0ZXJDb21wKXx8dm9pZCAwPT09dHx8dC5zZXRJbnB1dERpc2FibGVkKGUpLG51bGw9PT0oaT10aGlzLmVIZWFkZXJDb21wKXx8dm9pZCAwPT09aXx8aS5zZXRJbnB1dERpc2FibGVkKGUpfXRvZ2dsZUZpbHRlckJ1aWxkZXIoZSx0KXtpZih0JiZ0aGlzLmVCdWlsZGVyRGlhbG9nfHwhMT09PXQmJiF0aGlzLmVCdWlsZGVyRGlhbG9nKXJldHVybjtpZih0aGlzLmVCdWlsZGVyRGlhbG9nKXJldHVybiB0aGlzLmJ1aWxkZXJEZXN0cm95U291cmNlPWUsdm9pZCB0aGlzLmRlc3Ryb3lCZWFuKHRoaXMuZUJ1aWxkZXJEaWFsb2cpO3RoaXMuc2V0SW5wdXREaXNhYmxlZCghMCk7Y29uc3R7d2lkdGg6aSxoZWlnaHQ6cixtaW5XaWR0aDpvfT10aGlzLmdldEJ1aWxkZXJEaWFsb2dTaXplKCk7dGhpcy5lQnVpbGRlckNvbXA9dGhpcy5jcmVhdGVCZWFuKG5ldyBUKSx0aGlzLmVCdWlsZGVyRGlhbG9nPXRoaXMuY3JlYXRlQmVhbihuZXcgcy5BZ0RpYWxvZyh7dGl0bGU6dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnRyYW5zbGF0ZSgiYWR2YW5jZWRGaWx0ZXJCdWlsZGVyVGl0bGUiKSxjb21wb25lbnQ6dGhpcy5lQnVpbGRlckNvbXAsd2lkdGg6aSxoZWlnaHQ6cixyZXNpemFibGU6ITAsbW92YWJsZTohMCxtYXhpbWl6YWJsZTohMCxjZW50ZXJlZDohMCxjbG9zYWJsZTohMCxtaW5XaWR0aDpvLGFmdGVyR3VpQXR0YWNoZWQ6KCk9Pnt2YXIgZTtyZXR1cm4gbnVsbD09PShlPXRoaXMuZUJ1aWxkZXJDb21wKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5hZnRlckd1aUF0dGFjaGVkKCl9fSkpLHRoaXMuZGlzcGF0Y2hGaWx0ZXJCdWlsZGVyVmlzaWJsZUNoYW5nZWRFdmVudChlLCEwKSx0aGlzLmVCdWlsZGVyRGlhbG9nLmFkZEV2ZW50TGlzdGVuZXIocy5BZ0RpYWxvZy5FVkVOVF9ERVNUUk9ZRUQsKCk9Pnt2YXIgZTt0aGlzLmRlc3Ryb3lCZWFuKHRoaXMuZUJ1aWxkZXJDb21wKSx0aGlzLmVCdWlsZGVyQ29tcD12b2lkIDAsdGhpcy5lQnVpbGRlckRpYWxvZz12b2lkIDAsdGhpcy5zZXRJbnB1dERpc2FibGVkKCExKSx0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6Ty5FVkVOVF9CVUlMREVSX0NMT1NFRH0pLHRoaXMuZGlzcGF0Y2hGaWx0ZXJCdWlsZGVyVmlzaWJsZUNoYW5nZWRFdmVudChudWxsIT09KGU9dGhpcy5idWlsZGVyRGVzdHJveVNvdXJjZSkmJnZvaWQgMCE9PWU/ZToidWkiLCExKSx0aGlzLmJ1aWxkZXJEZXN0cm95U291cmNlPXZvaWQgMH0pfWRpc3BhdGNoRmlsdGVyQnVpbGRlclZpc2libGVDaGFuZ2VkRXZlbnQoZSx0KXtjb25zdCBpPXt0eXBlOnMuRXZlbnRzLkVWRU5UX0FEVkFOQ0VEX0ZJTFRFUl9CVUlMREVSX1ZJU0lCTEVfQ0hBTkdFRCxzb3VyY2U6ZSx2aXNpYmxlOnR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoaSl9Z2V0QnVpbGRlckRpYWxvZ1NpemUoKXt2YXIgZSx0O2NvbnN0IGk9bnVsbCE9PSh0PW51bGw9PT0oZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImFkdmFuY2VkRmlsdGVyQnVpbGRlclBhcmFtcyIpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5taW5XaWR0aCkmJnZvaWQgMCE9PXQ/dDo1MDAscj10aGlzLnBvcHVwU2VydmljZS5nZXRQb3B1cFBhcmVudCgpLG89TWF0aC5yb3VuZChzLl8uZ2V0QWJzb2x1dGVXaWR0aChyKSktMixuPU1hdGgucm91bmQoLjc1KnMuXy5nZXRBYnNvbHV0ZUhlaWdodChyKSktMjtyZXR1cm57d2lkdGg6TWF0aC5taW4oTWF0aC5tYXgoNjAwLGkpLG8pLGhlaWdodDpNYXRoLm1pbig2MDAsbiksbWluV2lkdGg6aX19b25FbmFibGVkQ2hhbmdlZChlKXt0aGlzLmVuYWJsZWQ9ZSx0aGlzLnVwZGF0ZUNvbXBzKCl9dXBkYXRlQ29tcHMoKXt0aGlzLnNldEFkdmFuY2VkRmlsdGVyQ29tcCgpLHRoaXMuc2V0SGVhZGVyQ29tcEVuYWJsZWQoKSx0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHt0eXBlOnMuRXZlbnRzLkVWRU5UX0hFQURFUl9IRUlHSFRfQ0hBTkdFRH0pfXNldEFkdmFuY2VkRmlsdGVyQ29tcCgpe2lmKHRoaXMuZGVzdHJveUFkdmFuY2VkRmlsdGVyQ29tcCgpLCF0aGlzLmVuYWJsZWQpcmV0dXJuO2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJhZHZhbmNlZEZpbHRlclBhcmVudCIpO2lmKHRoaXMuaGFzQWR2YW5jZWRGaWx0ZXJQYXJlbnQ9ISFlLGUpe2NvbnN0IHQ9dGhpcy5jcmVhdGVCZWFuKG5ldyBQKSxpPXQuZ2V0R3VpKCkse2FsbFRoZW1lczpzfT10aGlzLmVudmlyb25tZW50LmdldFRoZW1lKCk7cy5sZW5ndGgmJmkuY2xhc3NMaXN0LmFkZCguLi5zKSxpLmNsYXNzTGlzdC5hZGQodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVSdGwiKT8iYWctcnRsIjoiYWctbHRyIiksZS5hcHBlbmRDaGlsZChpKSx0aGlzLmVGaWx0ZXJDb21wPXR9fXNldEhlYWRlckNvbXBFbmFibGVkKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuZUhlYWRlckNvbXApfHx2b2lkIDA9PT1lfHxlLnNldEVuYWJsZWQodGhpcy5lbmFibGVkJiYhdGhpcy5oYXNBZHZhbmNlZEZpbHRlclBhcmVudCl9ZGVzdHJveUFkdmFuY2VkRmlsdGVyQ29tcCgpe3RoaXMuZUZpbHRlckNvbXAmJihzLl8ucmVtb3ZlRnJvbVBhcmVudCh0aGlzLmVGaWx0ZXJDb21wLmdldEd1aSgpKSx0aGlzLmRlc3Ryb3lCZWFuKHRoaXMuZUZpbHRlckNvbXApKX19Ty5FVkVOVF9CVUlMREVSX0NMT1NFRD0iYWR2YW5jZWRGaWx0ZXJCdWlsZGVyQ2xvc2VkIixEKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmb2N1c1NlcnZpY2UiKV0sTy5wcm90b3R5cGUsImZvY3VzU2VydmljZSIsdm9pZCAwKSxEKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjdHJsc1NlcnZpY2UiKV0sTy5wcm90b3R5cGUsImN0cmxzU2VydmljZSIsdm9pZCAwKSxEKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJwb3B1cFNlcnZpY2UiKV0sTy5wcm90b3R5cGUsInBvcHVwU2VydmljZSIsdm9pZCAwKSxEKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJhZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlIildLE8ucHJvdG90eXBlLCJhZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlIix2b2lkIDApLEQoW3MuUG9zdENvbnN0cnVjdF0sTy5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBBPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIFAgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCdcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlciIgcm9sZT0icHJlc2VudGF0aW9uIiB0YWJpbmRleD0iLTEiPlxuICAgICAgICAgICAgICAgIDxhZy1hdXRvY29tcGxldGUgcmVmPSJlQXV0b2NvbXBsZXRlIj48L2FnLWF1dG9jb21wbGV0ZT5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhZy1idXR0b24gYWctc3RhbmRhcmQtYnV0dG9uIGFnLWFkdmFuY2VkLWZpbHRlci1hcHBseS1idXR0b24iIHJlZj0iZUFwcGx5RmlsdGVyQnV0dG9uIj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhZy1hZHZhbmNlZC1maWx0ZXItYnVpbGRlci1idXR0b24iIHJlZj0iZUJ1aWxkZXJGaWx0ZXJCdXR0b24iPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiByZWY9ImVCdWlsZGVyRmlsdGVyQnV0dG9uSWNvbiIgYXJpYS1oaWRkZW49InRydWUiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFnLWFkdmFuY2VkLWZpbHRlci1idWlsZGVyLWJ1dHRvbi1sYWJlbCIgcmVmPSJlQnVpbGRlckZpbHRlckJ1dHRvbkxhYmVsIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj4nKSx0aGlzLmV4cHJlc3Npb25QYXJzZXI9bnVsbCx0aGlzLmlzQXBwbHlEaXNhYmxlZD0hMCx0aGlzLmJ1aWxkZXJPcGVuPSExfXBvc3RDb25zdHJ1Y3QoKXt0aGlzLmVBdXRvY29tcGxldGUuc2V0TGlzdEdlbmVyYXRvcigoZSx0KT0+dGhpcy5nZW5lcmF0ZUF1dG9jb21wbGV0ZUxpc3RQYXJhbXModCkpLnNldFZhbGlkYXRvcigoKT0+dGhpcy52YWxpZGF0ZVZhbHVlKCkpLnNldEZvcmNlTGFzdFNlbGVjdGlvbigoZSx0KT0+dGhpcy5mb3JjZUxhc3RTZWxlY3Rpb24oZSx0KSkuc2V0SW5wdXRBcmlhTGFiZWwodGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnRyYW5zbGF0ZSgiYXJpYUFkdmFuY2VkRmlsdGVySW5wdXQiKSkuc2V0TGlzdEFyaWFMYWJlbCh0aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhcmlhTGFiZWxBZHZhbmNlZEZpbHRlckF1dG9jb21wbGV0ZSIpKSx0aGlzLnJlZnJlc2goKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVBdXRvY29tcGxldGUscy5BZ0F1dG9jb21wbGV0ZS5FVkVOVF9WQUxVRV9DSEFOR0VELCh7dmFsdWU6ZX0pPT50aGlzLm9uVmFsdWVDaGFuZ2VkKGUpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVBdXRvY29tcGxldGUscy5BZ0F1dG9jb21wbGV0ZS5FVkVOVF9WQUxVRV9DT05GSVJNRUQsKHtpc1ZhbGlkOmV9KT0+dGhpcy5vblZhbHVlQ29uZmlybWVkKGUpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVBdXRvY29tcGxldGUscy5BZ0F1dG9jb21wbGV0ZS5FVkVOVF9PUFRJT05fU0VMRUNURUQsKHtwb3NpdGlvbjplLHVwZGF0ZUVudHJ5OnQsYXV0b2NvbXBsZXRlVHlwZTppfSk9PnRoaXMub25PcHRpb25TZWxlY3RlZChlLHQsaSkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUF1dG9jb21wbGV0ZSxzLkFnQXV0b2NvbXBsZXRlLkVWRU5UX1ZBTElEX0NIQU5HRUQsKHtpc1ZhbGlkOmUsdmFsaWRhdGlvbk1lc3NhZ2U6dH0pPT50aGlzLm9uVmFsaWRDaGFuZ2VkKGUsdCkpLHRoaXMuc2V0dXBBcHBseUJ1dHRvbigpLHRoaXMuc2V0dXBCdWlsZGVyQnV0dG9uKCl9cmVmcmVzaCgpe2NvbnN0IGU9dGhpcy5hZHZhbmNlZEZpbHRlclNlcnZpY2UuZ2V0RXhwcmVzc2lvbkRpc3BsYXlWYWx1ZSgpO3RoaXMuZUF1dG9jb21wbGV0ZS5zZXRWYWx1ZSh7dmFsdWU6bnVsbCE9ZT9lOiIiLHBvc2l0aW9uOm51bGw9PWU/dm9pZCAwOmUubGVuZ3RoLHVwZGF0ZUxpc3RPbmx5SWZPcGVuOiEwfSl9c2V0SW5wdXREaXNhYmxlZChlKXt0aGlzLmVBdXRvY29tcGxldGUuc2V0SW5wdXREaXNhYmxlZChlKSxzLl8uc2V0RGlzYWJsZWQodGhpcy5lQXBwbHlGaWx0ZXJCdXR0b24sZXx8dGhpcy5pc0FwcGx5RGlzYWJsZWQpfWdldFRvb2x0aXBQYXJhbXMoKXtjb25zdCBlPXN1cGVyLmdldFRvb2x0aXBQYXJhbXMoKTtyZXR1cm4gZS5sb2NhdGlvbj0iYWR2YW5jZWRGaWx0ZXIiLGV9c2V0dXBBcHBseUJ1dHRvbigpe3RoaXMuZUFwcGx5RmlsdGVyQnV0dG9uLmlubmVyVGV4dD10aGlzLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhZHZhbmNlZEZpbHRlckFwcGx5IiksdGhpcy5hY3RpdmF0ZVRhYkluZGV4KFt0aGlzLmVBcHBseUZpbHRlckJ1dHRvbl0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZUFwcGx5RmlsdGVyQnV0dG9uLCJjbGljayIsKCk9PnRoaXMub25WYWx1ZUNvbmZpcm1lZCh0aGlzLmVBdXRvY29tcGxldGUuaXNWYWxpZCgpKSkscy5fLnNldERpc2FibGVkKHRoaXMuZUFwcGx5RmlsdGVyQnV0dG9uLHRoaXMuaXNBcHBseURpc2FibGVkKX1zZXR1cEJ1aWxkZXJCdXR0b24oKXt0aGlzLmVCdWlsZGVyRmlsdGVyQnV0dG9uSWNvbi5hcHBlbmRDaGlsZChzLl8uY3JlYXRlSWNvbk5vU3BhbigiYWR2YW5jZWRGaWx0ZXJCdWlsZGVyIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSkpLHRoaXMuZUJ1aWxkZXJGaWx0ZXJCdXR0b25MYWJlbC5pbm5lclRleHQ9dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnRyYW5zbGF0ZSgiYWR2YW5jZWRGaWx0ZXJCdWlsZGVyIiksdGhpcy5hY3RpdmF0ZVRhYkluZGV4KFt0aGlzLmVCdWlsZGVyRmlsdGVyQnV0dG9uXSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lQnVpbGRlckZpbHRlckJ1dHRvbiwiY2xpY2siLCgpPT50aGlzLm9wZW5CdWlsZGVyKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlLmdldEN0cmwoKSxPLkVWRU5UX0JVSUxERVJfQ0xPU0VELCgpPT50aGlzLmNsb3NlQnVpbGRlcigpKX1vblZhbHVlQ2hhbmdlZChlKXt2YXIgdDtlPXMuXy5tYWtlTnVsbChlKSx0aGlzLmFkdmFuY2VkRmlsdGVyU2VydmljZS5zZXRFeHByZXNzaW9uRGlzcGxheVZhbHVlKGUpLHRoaXMuZXhwcmVzc2lvblBhcnNlcj10aGlzLmFkdmFuY2VkRmlsdGVyU2VydmljZS5jcmVhdGVFeHByZXNzaW9uUGFyc2VyKGUpO2NvbnN0IGk9bnVsbD09PSh0PXRoaXMuZXhwcmVzc2lvblBhcnNlcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQucGFyc2VFeHByZXNzaW9uKCk7aSYmaSE9PWUmJnRoaXMuZUF1dG9jb21wbGV0ZS5zZXRWYWx1ZSh7dmFsdWU6aSxzaWxlbnQ6ITAscmVzdG9yZUZvY3VzOiEwfSl9b25WYWx1ZUNvbmZpcm1lZChlKXtlJiYhdGhpcy5pc0FwcGx5RGlzYWJsZWQmJihzLl8uc2V0RGlzYWJsZWQodGhpcy5lQXBwbHlGaWx0ZXJCdXR0b24sITApLHRoaXMuYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlLmFwcGx5RXhwcmVzc2lvbigpLHRoaXMuZmlsdGVyTWFuYWdlci5vbkZpbHRlckNoYW5nZWQoe3NvdXJjZToiYWR2YW5jZWRGaWx0ZXIifSkpfW9uT3B0aW9uU2VsZWN0ZWQoZSx0LGkpe2NvbnN0e3VwZGF0ZWRWYWx1ZTpzLHVwZGF0ZWRQb3NpdGlvbjpyLGhpZGVBdXRvY29tcGxldGU6b309dGhpcy51cGRhdGVFeHByZXNzaW9uKGUsdCxpKTt0aGlzLmVBdXRvY29tcGxldGUuc2V0VmFsdWUoe3ZhbHVlOnMscG9zaXRpb246cix1cGRhdGVMaXN0T25seUlmT3BlbjpvLHJlc3RvcmVGb2N1czohMH0pfXZhbGlkYXRlVmFsdWUoKXt2YXIgZSx0LGk7cmV0dXJuKG51bGw9PT0oZT10aGlzLmV4cHJlc3Npb25QYXJzZXIpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmlzVmFsaWQoKSk/bnVsbDpudWxsIT09KGk9bnVsbD09PSh0PXRoaXMuZXhwcmVzc2lvblBhcnNlcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0VmFsaWRhdGlvbk1lc3NhZ2UoKSkmJnZvaWQgMCE9PWk/aTpudWxsfW9uVmFsaWRDaGFuZ2VkKGUsdCl7dGhpcy5pc0FwcGx5RGlzYWJsZWQ9IWV8fHRoaXMuYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlLmlzQ3VycmVudEV4cHJlc3Npb25BcHBsaWVkKCkscy5fLnNldERpc2FibGVkKHRoaXMuZUFwcGx5RmlsdGVyQnV0dG9uLHRoaXMuaXNBcHBseURpc2FibGVkKSx0aGlzLnNldFRvb2x0aXAodCwxZTMpfWdlbmVyYXRlQXV0b2NvbXBsZXRlTGlzdFBhcmFtcyhlKXtyZXR1cm4gdGhpcy5leHByZXNzaW9uUGFyc2VyP3RoaXMuZXhwcmVzc2lvblBhcnNlci5nZXRBdXRvY29tcGxldGVMaXN0UGFyYW1zKGUpOnRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZXREZWZhdWx0QXV0b2NvbXBsZXRlTGlzdFBhcmFtcygiIil9dXBkYXRlRXhwcmVzc2lvbihlLHQsaSl7dmFyIHMscjtyZXR1cm4gdGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnVwZGF0ZUF1dG9jb21wbGV0ZUNhY2hlKHQsaSksbnVsbCE9PShyPW51bGw9PT0ocz10aGlzLmV4cHJlc3Npb25QYXJzZXIpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnVwZGF0ZUV4cHJlc3Npb24oZSx0LGkpKSYmdm9pZCAwIT09cj9yOnRoaXMuYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlLmdldERlZmF1bHRFeHByZXNzaW9uKHQpfWZvcmNlTGFzdFNlbGVjdGlvbih7a2V5OmUsZGlzcGxheVZhbHVlOnR9LGkpe3JldHVybiEhaS50b0xvY2FsZUxvd2VyQ2FzZSgpLm1hdGNoKGBeJHsobnVsbCE9dD90OmUpLnRvTG9jYWxlTG93ZXJDYXNlKCl9XFxzKiRgKX1vcGVuQnVpbGRlcigpe3RoaXMuYnVpbGRlck9wZW58fCh0aGlzLmJ1aWxkZXJPcGVuPSEwLHMuXy5zZXREaXNhYmxlZCh0aGlzLmVCdWlsZGVyRmlsdGVyQnV0dG9uLCEwKSx0aGlzLmFkdmFuY2VkRmlsdGVyU2VydmljZS5nZXRDdHJsKCkudG9nZ2xlRmlsdGVyQnVpbGRlcigidWkiKSl9Y2xvc2VCdWlsZGVyKCl7dGhpcy5idWlsZGVyT3BlbiYmKHRoaXMuYnVpbGRlck9wZW49ITEscy5fLnNldERpc2FibGVkKHRoaXMuZUJ1aWxkZXJGaWx0ZXJCdXR0b24sITEpLHRoaXMuZUJ1aWxkZXJGaWx0ZXJCdXR0b24uZm9jdXMoKSl9fUEoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUF1dG9jb21wbGV0ZSIpXSxQLnByb3RvdHlwZSwiZUF1dG9jb21wbGV0ZSIsdm9pZCAwKSxBKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVBcHBseUZpbHRlckJ1dHRvbiIpXSxQLnByb3RvdHlwZSwiZUFwcGx5RmlsdGVyQnV0dG9uIix2b2lkIDApLEEoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUJ1aWxkZXJGaWx0ZXJCdXR0b24iKV0sUC5wcm90b3R5cGUsImVCdWlsZGVyRmlsdGVyQnV0dG9uIix2b2lkIDApLEEoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZUJ1aWxkZXJGaWx0ZXJCdXR0b25JY29uIildLFAucHJvdG90eXBlLCJlQnVpbGRlckZpbHRlckJ1dHRvbkljb24iLHZvaWQgMCksQShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlQnVpbGRlckZpbHRlckJ1dHRvbkxhYmVsIildLFAucHJvdG90eXBlLCJlQnVpbGRlckZpbHRlckJ1dHRvbkxhYmVsIix2b2lkIDApLEEoW09iamVjdChzLkF1dG93aXJlZCkoImFkdmFuY2VkRmlsdGVyU2VydmljZSIpXSxQLnByb3RvdHlwZSwiYWR2YW5jZWRGaWx0ZXJTZXJ2aWNlIix2b2lkIDApLEEoW09iamVjdChzLkF1dG93aXJlZCkoImFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UiKV0sUC5wcm90b3R5cGUsImFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UiLHZvaWQgMCksQShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZmlsdGVyTWFuYWdlciIpXSxQLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSxBKFtzLlBvc3RDb25zdHJ1Y3RdLFAucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTtjb25zdCBNPXthcmlhQWR2YW5jZWRGaWx0ZXJCdWlsZGVySXRlbTplPT5gJHtlWzBdfS4gTGV2ZWwgJHtlWzFdfS4gUHJlc3MgRU5URVIgdG8gZWRpdC5gLGFyaWFBZHZhbmNlZEZpbHRlckJ1aWxkZXJJdGVtVmFsaWRhdGlvbjplPT5gJHtlWzBdfS4gTGV2ZWwgJHtlWzFdfS4gJHtlWzJdfSBQcmVzcyBFTlRFUiB0byBlZGl0LmAsYXJpYUFkdmFuY2VkRmlsdGVyQnVpbGRlckxpc3Q6IkFkdmFuY2VkIEZpbHRlciBCdWlsZGVyIExpc3QiLGFyaWFBZHZhbmNlZEZpbHRlckJ1aWxkZXJGaWx0ZXJJdGVtOiJGaWx0ZXIgQ29uZGl0aW9uIixhcmlhQWR2YW5jZWRGaWx0ZXJCdWlsZGVyR3JvdXBJdGVtOiJGaWx0ZXIgR3JvdXAiLGFyaWFBZHZhbmNlZEZpbHRlckJ1aWxkZXJDb2x1bW46IkNvbHVtbiIsYXJpYUFkdmFuY2VkRmlsdGVyQnVpbGRlck9wdGlvbjoiT3B0aW9uIixhcmlhQWR2YW5jZWRGaWx0ZXJCdWlsZGVyVmFsdWU6IlZhbHVlIixhcmlhQWR2YW5jZWRGaWx0ZXJCdWlsZGVySm9pbk9wZXJhdG9yOiJKb2luIE9wZXJhdG9yIixhcmlhQWR2YW5jZWRGaWx0ZXJJbnB1dDoiQWR2YW5jZWQgRmlsdGVyIElucHV0IixhcmlhTGFiZWxBZHZhbmNlZEZpbHRlckF1dG9jb21wbGV0ZToiQWR2YW5jZWQgRmlsdGVyIEF1dG9jb21wbGV0ZSIsYWR2YW5jZWRGaWx0ZXJDb250YWluczoiY29udGFpbnMiLGFkdmFuY2VkRmlsdGVyTm90Q29udGFpbnM6ImRvZXMgbm90IGNvbnRhaW4iLGFkdmFuY2VkRmlsdGVyVGV4dEVxdWFsczoiZXF1YWxzIixhZHZhbmNlZEZpbHRlclRleHROb3RFcXVhbDoiZG9lcyBub3QgZXF1YWwiLGFkdmFuY2VkRmlsdGVyU3RhcnRzV2l0aDoiYmVnaW5zIHdpdGgiLGFkdmFuY2VkRmlsdGVyRW5kc1dpdGg6ImVuZHMgd2l0aCIsYWR2YW5jZWRGaWx0ZXJCbGFuazoiaXMgYmxhbmsiLGFkdmFuY2VkRmlsdGVyTm90Qmxhbms6ImlzIG5vdCBibGFuayIsYWR2YW5jZWRGaWx0ZXJFcXVhbHM6Ij0iLGFkdmFuY2VkRmlsdGVyTm90RXF1YWw6IiE9IixhZHZhbmNlZEZpbHRlckdyZWF0ZXJUaGFuOiI+IixhZHZhbmNlZEZpbHRlckdyZWF0ZXJUaGFuT3JFcXVhbDoiPj0iLGFkdmFuY2VkRmlsdGVyTGVzc1RoYW46IjwiLGFkdmFuY2VkRmlsdGVyTGVzc1RoYW5PckVxdWFsOiI8PSIsYWR2YW5jZWRGaWx0ZXJUcnVlOiJpcyB0cnVlIixhZHZhbmNlZEZpbHRlckZhbHNlOiJpcyBmYWxzZSIsYWR2YW5jZWRGaWx0ZXJBbmQ6IkFORCIsYWR2YW5jZWRGaWx0ZXJPcjoiT1IiLGFkdmFuY2VkRmlsdGVyQXBwbHk6IkFwcGx5IixhZHZhbmNlZEZpbHRlckJ1aWxkZXI6IkJ1aWxkZXIiLGFkdmFuY2VkRmlsdGVyVmFsaWRhdGlvbk1pc3NpbmdDb2x1bW46IkNvbHVtbiBpcyBtaXNzaW5nIixhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25NaXNzaW5nT3B0aW9uOiJPcHRpb24gaXMgbWlzc2luZyIsYWR2YW5jZWRGaWx0ZXJWYWxpZGF0aW9uTWlzc2luZ1ZhbHVlOiJWYWx1ZSBpcyBtaXNzaW5nIixhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25JbnZhbGlkQ29sdW1uOiJDb2x1bW4gbm90IGZvdW5kIixhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25JbnZhbGlkT3B0aW9uOiJPcHRpb24gbm90IGZvdW5kIixhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25NaXNzaW5nUXVvdGU6IlZhbHVlIGlzIG1pc3NpbmcgYW4gZW5kIHF1b3RlIixhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25Ob3RBTnVtYmVyOiJWYWx1ZSBpcyBub3QgYSBudW1iZXIiLGFkdmFuY2VkRmlsdGVyVmFsaWRhdGlvbkludmFsaWREYXRlOiJWYWx1ZSBpcyBub3QgYSB2YWxpZCBkYXRlIixhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25NaXNzaW5nQ29uZGl0aW9uOiJDb25kaXRpb24gaXMgbWlzc2luZyIsYWR2YW5jZWRGaWx0ZXJWYWxpZGF0aW9uSm9pbk9wZXJhdG9yTWlzbWF0Y2g6IkpvaW4gb3BlcmF0b3JzIHdpdGhpbiBhIGNvbmRpdGlvbiBtdXN0IGJlIHRoZSBzYW1lIixhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25JbnZhbGlkSm9pbk9wZXJhdG9yOiJKb2luIG9wZXJhdG9yIG5vdCBmb3VuZCIsYWR2YW5jZWRGaWx0ZXJWYWxpZGF0aW9uTWlzc2luZ0VuZEJyYWNrZXQ6Ik1pc3NpbmcgZW5kIGJyYWNrZXQiLGFkdmFuY2VkRmlsdGVyVmFsaWRhdGlvbkV4dHJhRW5kQnJhY2tldDoiVG9vIG1hbnkgZW5kIGJyYWNrZXRzIixhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25NZXNzYWdlOmU9PmBFeHByZXNzaW9uIGhhcyBhbiBlcnJvci4gJHtlWzBdfSAtICR7ZVsxXX0uYCxhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25NZXNzYWdlQXRFbmQ6ZT0+YEV4cHJlc3Npb24gaGFzIGFuIGVycm9yLiAke2VbMF19IGF0IGVuZCBvZiBleHByZXNzaW9uLmAsYWR2YW5jZWRGaWx0ZXJCdWlsZGVyVGl0bGU6IkFkdmFuY2VkIEZpbHRlciIsYWR2YW5jZWRGaWx0ZXJCdWlsZGVyQXBwbHk6IkFwcGx5IixhZHZhbmNlZEZpbHRlckJ1aWxkZXJDYW5jZWw6IkNhbmNlbCIsYWR2YW5jZWRGaWx0ZXJCdWlsZGVyQWRkQnV0dG9uVG9vbHRpcDoiQWRkIEZpbHRlciBvciBHcm91cCIsYWR2YW5jZWRGaWx0ZXJCdWlsZGVyUmVtb3ZlQnV0dG9uVG9vbHRpcDoiUmVtb3ZlIixhZHZhbmNlZEZpbHRlckJ1aWxkZXJNb3ZlVXBCdXR0b25Ub29sdGlwOiJNb3ZlIFVwIixhZHZhbmNlZEZpbHRlckJ1aWxkZXJNb3ZlRG93bkJ1dHRvblRvb2x0aXA6Ik1vdmUgRG93biIsYWR2YW5jZWRGaWx0ZXJCdWlsZGVyQWRkSm9pbjoiQWRkIEdyb3VwIixhZHZhbmNlZEZpbHRlckJ1aWxkZXJBZGRDb25kaXRpb246IkFkZCBGaWx0ZXIiLGFkdmFuY2VkRmlsdGVyQnVpbGRlclNlbGVjdENvbHVtbjoiU2VsZWN0IGEgY29sdW1uIixhZHZhbmNlZEZpbHRlckJ1aWxkZXJTZWxlY3RPcHRpb246IlNlbGVjdCBhbiBvcHRpb24iLGFkdmFuY2VkRmlsdGVyQnVpbGRlckVudGVyVmFsdWU6IkVudGVyIGEgdmFsdWUuLi4iLGFkdmFuY2VkRmlsdGVyQnVpbGRlclZhbGlkYXRpb25BbHJlYWR5QXBwbGllZDoiQ3VycmVudCBmaWx0ZXIgYWxyZWFkeSBhcHBsaWVkLiIsYWR2YW5jZWRGaWx0ZXJCdWlsZGVyVmFsaWRhdGlvbkluY29tcGxldGU6Ik5vdCBhbGwgY29uZGl0aW9ucyBhcmUgY29tcGxldGUuIixhZHZhbmNlZEZpbHRlckJ1aWxkZXJWYWxpZGF0aW9uU2VsZWN0Q29sdW1uOiJNdXN0IHNlbGVjdCBhIGNvbHVtbi4iLGFkdmFuY2VkRmlsdGVyQnVpbGRlclZhbGlkYXRpb25TZWxlY3RPcHRpb246Ik11c3Qgc2VsZWN0IGFuIG9wdGlvbi4iLGFkdmFuY2VkRmlsdGVyQnVpbGRlclZhbGlkYXRpb25FbnRlclZhbHVlOiJNdXN0IGVudGVyIGEgdmFsdWUuIn07ZnVuY3Rpb24gTChlLHQsaSl7aWYoIWUpcmV0dXJuIiI7Y29uc3Qgcz1pLXQ7cmV0dXJuIHM/ZS5zbGljZSgwLGUubGVuZ3RoLXMpOmV9ZnVuY3Rpb24gRihlLHQsaSxzLHIsbyxuKXtjb25zdCBhPWkrKCFlLmxlbmd0aHx8bj8wOjEpO2xldCBsPTA7ciYmKCIgIj09PWVbYV0/bD0xOihzKz0iICIsbyYmKHMrPSciJykpKTtyZXR1cm57dXBkYXRlZFZhbHVlOmUuc2xpY2UoMCx0KStzK2Uuc2xpY2UoYSksdXBkYXRlZFBvc2l0aW9uOnQrcy5sZW5ndGgrbH19ZnVuY3Rpb24gSShlLHQsaSxzKXtsZXQgcj10LG89ITE7Zm9yKDtyPGUubGVuZ3RoOyl7Y29uc3QgdD1lW3JdO2lmKCIoIj09PXQpe3MmJiIgIj09PWVbci0xXT9vPSEwOnItPTE7YnJlYWt9aWYoIiAiPT09dHx8aSYmIikiPT09dCl7ci09MTticmVha31yKyt9cmV0dXJue2VuZFBvc2l0aW9uOnIsaXNFbXB0eTpvfX1mdW5jdGlvbiBOKGUsdCxpLHMpe2khPT10JiYoZS5leHByZXNzaW9uPUYoZS5leHByZXNzaW9uLHMtdC5sZW5ndGgrMSxzLGkpLnVwZGF0ZWRWYWx1ZSl9Y2xhc3MgR3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGFyYW1zPWUsdGhpcy5zdGFydFBvc2l0aW9uPXQsdGhpcy50eXBlPSJjb2x1bW4iLHRoaXMudmFsaWQ9ITAsdGhpcy5oYXNTdGFydENoYXI9ITEsdGhpcy5oYXNFbmRDaGFyPSExLHRoaXMuY29sTmFtZT0iIn1wYXJzZShlLHQpe2lmKGUhPT1WLkNPTF9TVEFSVF9DSEFSfHx0aGlzLmNvbE5hbWUpaWYoZT09PVYuQ09MX0VORF9DSEFSJiZ0aGlzLmhhc1N0YXJ0Q2hhcil7aWYodGhpcy5wYXJzZUNvbHVtbighMSx0KSlyZXR1cm4gdGhpcy5oYXNFbmRDaGFyPSEwLCExO3RoaXMuY29sTmFtZSs9ZX1lbHNlIHRoaXMuY29sTmFtZSs9ZTtlbHNlIHRoaXMuaGFzU3RhcnRDaGFyPSEwfWdldERpc3BsYXlWYWx1ZSgpe3JldHVybih0aGlzLmhhc1N0YXJ0Q2hhcj9WLkNPTF9TVEFSVF9DSEFSOiIiKSt0aGlzLmNvbE5hbWUrKHRoaXMuaGFzRW5kQ2hhcj9WLkNPTF9FTkRfQ0hBUjoiIil9Z2V0Q29sSWQoKXtyZXR1cm4gdGhpcy5jb2xJZH1jb21wbGV0ZShlKXt0aGlzLnBhcnNlQ29sdW1uKCEwLGUpfWdldFZhbGlkYXRpb25FcnJvcigpe3ZhciBlO3JldHVybiB0aGlzLnZhbGlkP251bGw6e21lc3NhZ2U6dGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyVmFsaWRhdGlvbkludmFsaWRDb2x1bW4iKSxzdGFydFBvc2l0aW9uOnRoaXMuc3RhcnRQb3NpdGlvbixlbmRQb3NpdGlvbjpudWxsIT09KGU9dGhpcy5lbmRQb3NpdGlvbikmJnZvaWQgMCE9PWU/ZTp0aGlzLnBhcmFtcy5leHByZXNzaW9uLmxlbmd0aC0xfX1wYXJzZUNvbHVtbihlLHQpe3ZhciBpO3RoaXMuZW5kUG9zaXRpb249dDtjb25zdCBzPXRoaXMucGFyYW1zLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0Q29sSWQodGhpcy5jb2xOYW1lKTtyZXR1cm4gcyYmdGhpcy5oYXNTdGFydENoYXImJih0aGlzLmNvbElkPXMuY29sSWQsTih0aGlzLnBhcmFtcyx0aGlzLmNvbE5hbWUscy5jb2x1bW5OYW1lLHQtMSksdGhpcy5jb2xOYW1lPXMuY29sdW1uTmFtZSx0aGlzLmNvbHVtbj10aGlzLnBhcmFtcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKHRoaXMuY29sSWQpLHRoaXMuY29sdW1uKT8odGhpcy5iYXNlQ2VsbERhdGFUeXBlPW51bGwhPT0oaT10aGlzLnBhcmFtcy5kYXRhVHlwZVNlcnZpY2UuZ2V0QmFzZURhdGFUeXBlKHRoaXMuY29sdW1uKSkmJnZvaWQgMCE9PWk/aToidGV4dCIsITApOihlJiYodGhpcy52YWxpZD0hMSksdGhpcy5iYXNlQ2VsbERhdGFUeXBlPSJ0ZXh0IiwhMSl9fWNsYXNzIGt7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMucGFyYW1zPWUsdGhpcy5zdGFydFBvc2l0aW9uPXQsdGhpcy5iYXNlQ2VsbERhdGFUeXBlPWksdGhpcy50eXBlPSJvcGVyYXRvciIsdGhpcy52YWxpZD0hMCx0aGlzLmV4cGVjdGVkTnVtT3BlcmFuZHM9MCx0aGlzLm9wZXJhdG9yPSIifXBhcnNlKGUsdCl7aWYoIiAiPT09ZXx8IikiPT09ZSl7aWYodGhpcy5wYXJzZU9wZXJhdG9yKCExLHQtMSkpcmV0dXJuITA7dGhpcy5vcGVyYXRvcis9ZX1lbHNlIHRoaXMub3BlcmF0b3IrPWV9Y29tcGxldGUoZSl7dGhpcy5wYXJzZU9wZXJhdG9yKCEwLGUpfWdldFZhbGlkYXRpb25FcnJvcigpe3ZhciBlO3JldHVybiB0aGlzLnZhbGlkP251bGw6e21lc3NhZ2U6dGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyVmFsaWRhdGlvbkludmFsaWRPcHRpb24iKSxzdGFydFBvc2l0aW9uOnRoaXMuc3RhcnRQb3NpdGlvbixlbmRQb3NpdGlvbjpudWxsIT09KGU9dGhpcy5lbmRQb3NpdGlvbikmJnZvaWQgMCE9PWU/ZTp0aGlzLnBhcmFtcy5leHByZXNzaW9uLmxlbmd0aC0xfX1nZXREaXNwbGF5VmFsdWUoKXtyZXR1cm4gdGhpcy5vcGVyYXRvcn1nZXRPcGVyYXRvcktleSgpe3JldHVybiB0aGlzLnBhcnNlZE9wZXJhdG9yfXBhcnNlT3BlcmF0b3IoZSx0KXtjb25zdCBpPXRoaXMucGFyYW1zLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0RGF0YVR5cGVFeHByZXNzaW9uT3BlcmF0b3IodGhpcy5iYXNlQ2VsbERhdGFUeXBlKSxzPWkuZmluZE9wZXJhdG9yKHRoaXMub3BlcmF0b3IpO2lmKHRoaXMuZW5kUG9zaXRpb249dCxzKXt0aGlzLnBhcnNlZE9wZXJhdG9yPXM7Y29uc3QgZT1pLm9wZXJhdG9yc1tzXTt0aGlzLmV4cGVjdGVkTnVtT3BlcmFuZHM9ZS5udW1PcGVyYW5kcztjb25zdCByPWUuZGlzcGxheVZhbHVlO3JldHVybiBOKHRoaXMucGFyYW1zLHRoaXMub3BlcmF0b3Iscix0KSx0aGlzLm9wZXJhdG9yPXIsITB9cmV0dXJuIWUmJm51bGw9PT1zfHwodGhpcy52YWxpZD0hMSksITF9fWNsYXNzIF97Y29uc3RydWN0b3IoZSx0LGkscyl7dGhpcy5wYXJhbXM9ZSx0aGlzLnN0YXJ0UG9zaXRpb249dCx0aGlzLmJhc2VDZWxsRGF0YVR5cGU9aSx0aGlzLmNvbHVtbj1zLHRoaXMudHlwZT0ib3BlcmFuZCIsdGhpcy52YWxpZD0hMCx0aGlzLm9wZXJhbmQ9IiIsdGhpcy52YWxpZGF0aW9uTWVzc2FnZT1udWxsfXBhcnNlKGUsdCl7aWYoIiAiPT09ZSl7aWYoIXRoaXMucXVvdGVzKXJldHVybiB0aGlzLnBhcnNlT3BlcmFuZCghMSx0KSwhMDt0aGlzLm9wZXJhbmQrPWV9ZWxzZSBpZigiKSI9PT1lKXtpZigibnVtYmVyIj09PXRoaXMuYmFzZUNlbGxEYXRhVHlwZXx8IXRoaXMucXVvdGVzKXJldHVybiB0aGlzLnBhcnNlT3BlcmFuZCghMSx0LTEpLCEwO3RoaXMub3BlcmFuZCs9ZX1lbHNlIGlmKHRoaXMub3BlcmFuZHx8dGhpcy5xdW90ZXN8fCInIiE9PWUmJiciJyE9PWUpe2lmKHRoaXMucXVvdGVzJiZlPT09dGhpcy5xdW90ZXMpcmV0dXJuIHRoaXMucGFyc2VPcGVyYW5kKCExLHQpLCExO3RoaXMub3BlcmFuZCs9ZX1lbHNlIHRoaXMucXVvdGVzPWV9Y29tcGxldGUoZSl7dGhpcy5wYXJzZU9wZXJhbmQoITAsZSl9Z2V0VmFsaWRhdGlvbkVycm9yKCl7dmFyIGU7cmV0dXJuIHRoaXMudmFsaWRhdGlvbk1lc3NhZ2U/e21lc3NhZ2U6dGhpcy52YWxpZGF0aW9uTWVzc2FnZSxzdGFydFBvc2l0aW9uOnRoaXMuc3RhcnRQb3NpdGlvbixlbmRQb3NpdGlvbjpudWxsIT09KGU9dGhpcy5lbmRQb3NpdGlvbikmJnZvaWQgMCE9PWU/ZTp0aGlzLnBhcmFtcy5leHByZXNzaW9uLmxlbmd0aC0xfTpudWxsfWdldFJhd1ZhbHVlKCl7cmV0dXJuIHRoaXMub3BlcmFuZH1nZXRNb2RlbFZhbHVlKCl7cmV0dXJuIHRoaXMubW9kZWxWYWx1ZX1wYXJzZU9wZXJhbmQoZSx0KXtjb25zdHthZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlOml9PXRoaXMucGFyYW1zO2lmKHRoaXMuZW5kUG9zaXRpb249dCx0aGlzLm1vZGVsVmFsdWU9dGhpcy5vcGVyYW5kLGUmJnRoaXMucXVvdGVzKXRoaXMudmFsaWQ9ITEsdGhpcy52YWxpZGF0aW9uTWVzc2FnZT1pLnRyYW5zbGF0ZSgiYWR2YW5jZWRGaWx0ZXJWYWxpZGF0aW9uTWlzc2luZ1F1b3RlIik7ZWxzZSBpZigiIj09PXRoaXMubW9kZWxWYWx1ZSl0aGlzLnZhbGlkPSExLHRoaXMudmFsaWRhdGlvbk1lc3NhZ2U9aS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyVmFsaWRhdGlvbk1pc3NpbmdWYWx1ZSIpO2Vsc2V7Y29uc3QgZT1pLmdldE9wZXJhbmRNb2RlbFZhbHVlKHRoaXMub3BlcmFuZCx0aGlzLmJhc2VDZWxsRGF0YVR5cGUsdGhpcy5jb2x1bW4pO3N3aXRjaChudWxsIT1lJiYodGhpcy5tb2RlbFZhbHVlPWUpLHRoaXMuYmFzZUNlbGxEYXRhVHlwZSl7Y2FzZSJudW1iZXIiOih0aGlzLnF1b3Rlc3x8aXNOYU4odGhpcy5tb2RlbFZhbHVlKSkmJih0aGlzLnZhbGlkPSExLHRoaXMudmFsaWRhdGlvbk1lc3NhZ2U9aS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyVmFsaWRhdGlvbk5vdEFOdW1iZXIiKSk7YnJlYWs7Y2FzZSJkYXRlIjpjYXNlImRhdGVTdHJpbmciOm51bGw9PWUmJih0aGlzLnZhbGlkPSExLHRoaXMudmFsaWRhdGlvbk1lc3NhZ2U9aS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyVmFsaWRhdGlvbkludmFsaWREYXRlIikpfX19fWNsYXNzIFZ7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnBhcmFtcz1lLHRoaXMuc3RhcnRQb3NpdGlvbj10LHRoaXMuaXNBd2FpdGluZz0hMH1wYXJzZUV4cHJlc3Npb24oKXt2YXIgZSx0O2xldCBpPXRoaXMuc3RhcnRQb3NpdGlvbjtjb25zdHtleHByZXNzaW9uOnN9PXRoaXMucGFyYW1zO2Zvcig7aTxzLmxlbmd0aDspe2NvbnN0IGU9c1tpXTtpZigiICI9PT1lJiZ0aGlzLmlzQXdhaXRpbmcpO2Vsc2V7aWYodGhpcy5pc0F3YWl0aW5nPSExLCF0aGlzLnBhcnNlcil7bGV0IGU7dGhpcy5jb2x1bW5QYXJzZXI/dGhpcy5vcGVyYXRvclBhcnNlcj8odGhpcy5vcGVyYW5kUGFyc2VyPW5ldyBfKHRoaXMucGFyYW1zLGksdGhpcy5jb2x1bW5QYXJzZXIuYmFzZUNlbGxEYXRhVHlwZSx0aGlzLmNvbHVtblBhcnNlci5jb2x1bW4pLGU9dGhpcy5vcGVyYW5kUGFyc2VyKToodGhpcy5vcGVyYXRvclBhcnNlcj1uZXcgayh0aGlzLnBhcmFtcyxpLHRoaXMuY29sdW1uUGFyc2VyLmJhc2VDZWxsRGF0YVR5cGUpLGU9dGhpcy5vcGVyYXRvclBhcnNlcik6KHRoaXMuY29sdW1uUGFyc2VyPW5ldyBHKHRoaXMucGFyYW1zLGkpLGU9dGhpcy5jb2x1bW5QYXJzZXIpLHRoaXMucGFyc2VyPWV9Y29uc3QgdD10aGlzLnBhcnNlci5wYXJzZShlLGkpO2lmKG51bGwhPXQpe2lmKHRoaXMuaXNDb21wbGV0ZSgpKXJldHVybiB0aGlzLnJldHVybkVuZFBvc2l0aW9uKHQ/aS0xOmksITApO3RoaXMucGFyc2VyPXZvaWQgMCx0aGlzLmlzQXdhaXRpbmc9ITB9fWkrK31yZXR1cm4gbnVsbD09PSh0PW51bGw9PT0oZT10aGlzLnBhcnNlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUuY29tcGxldGUpfHx2b2lkIDA9PT10fHx0LmNhbGwoZSxpLTEpLHRoaXMucmV0dXJuRW5kUG9zaXRpb24oaSl9aXNWYWxpZCgpe3JldHVybiB0aGlzLmlzQ29tcGxldGUoKSYmdGhpcy5jb2x1bW5QYXJzZXIudmFsaWQmJnRoaXMub3BlcmF0b3JQYXJzZXIudmFsaWQmJighdGhpcy5vcGVyYW5kUGFyc2VyfHx0aGlzLm9wZXJhbmRQYXJzZXIudmFsaWQpfWdldFZhbGlkYXRpb25FcnJvcigpe3ZhciBlLHQsaSxzLHI7Y29uc3Qgbz1udWxsIT09KHM9bnVsbCE9PSh0PW51bGw9PT0oZT10aGlzLmNvbHVtblBhcnNlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUuZ2V0VmFsaWRhdGlvbkVycm9yKCkpJiZ2b2lkIDAhPT10P3Q6bnVsbD09PShpPXRoaXMub3BlcmF0b3JQYXJzZXIpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmdldFZhbGlkYXRpb25FcnJvcigpKSYmdm9pZCAwIT09cz9zOm51bGw9PT0ocj10aGlzLm9wZXJhbmRQYXJzZXIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmdldFZhbGlkYXRpb25FcnJvcigpO2lmKG8pcmV0dXJuIG87Y29uc3Qgbj10aGlzLnBhcmFtcy5leHByZXNzaW9uLmxlbmd0aDtsZXQgYTtyZXR1cm4gdGhpcy5jb2x1bW5QYXJzZXI/dGhpcy5vcGVyYXRvclBhcnNlcj90aGlzLm9wZXJhdG9yUGFyc2VyLmV4cGVjdGVkTnVtT3BlcmFuZHMmJiF0aGlzLm9wZXJhbmRQYXJzZXImJihhPSJhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25NaXNzaW5nVmFsdWUiKTphPSJhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25NaXNzaW5nT3B0aW9uIjphPSJhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25NaXNzaW5nQ29sdW1uIixhP3ttZXNzYWdlOnRoaXMucGFyYW1zLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKGEpLHN0YXJ0UG9zaXRpb246bixlbmRQb3NpdGlvbjpufTpudWxsfWdldEZ1bmN0aW9uKGUpe3ZhciB0LGk7Y29uc3Qgcz10aGlzLmNvbHVtblBhcnNlci5nZXRDb2xJZCgpLHI9cy5yZXBsYWNlKC8oWyciXSkvLCJcXCQxIik7Y29uc3Qgbz1udWxsPT09KHQ9dGhpcy5vcGVyYXRvclBhcnNlcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0T3BlcmF0b3JLZXkoKSx7b3BlcmF0b3JzOm4sZXZhbHVhdG9yUGFyYW1zOmEsb3BlcmFuZHM6bH09ZSxkPXRoaXMucGFyYW1zLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0RXhwcmVzc2lvbk9wZXJhdG9yKHRoaXMuY29sdW1uUGFyc2VyLmJhc2VDZWxsRGF0YVR5cGUsbyksYz10aGlzLmFkZFRvTGlzdEFuZEdldEluZGV4KG4sZCksaD10aGlzLnBhcmFtcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLmdldEV4cHJlc3Npb25FdmFsdWF0b3JQYXJhbXMocyksdT10aGlzLmFkZFRvTGlzdEFuZEdldEluZGV4KGEsaCk7bGV0IHA7aWYoMD09PShudWxsPT09KGk9dGhpcy5vcGVyYXRvclBhcnNlcil8fHZvaWQgMD09PWk/dm9pZCAwOmkuZXhwZWN0ZWROdW1PcGVyYW5kcykpcD0iIjtlbHNle3A9YCwgcGFyYW1zLm9wZXJhbmRzWyR7dGhpcy5hZGRUb0xpc3RBbmRHZXRJbmRleChsLHRoaXMuZ2V0T3BlcmFuZFZhbHVlKCkpfV1gfXJldHVybmBwYXJhbXMub3BlcmF0b3JzWyR7Y31dLmV2YWx1YXRvcihleHByZXNzaW9uUHJveHkuZ2V0VmFsdWUoJyR7cn0nLCBub2RlKSwgbm9kZSwgcGFyYW1zLmV2YWx1YXRvclBhcmFtc1ske3V9XSR7cH0pYH1nZXRBdXRvY29tcGxldGVMaXN0UGFyYW1zKGUpe3JldHVybiB0aGlzLmlzQ29sdW1uUG9zaXRpb24oZSk/dGhpcy5nZXRDb2x1bW5BdXRvY29tcGxldGVMaXN0UGFyYW1zKGUpOnRoaXMuaXNPcGVyYXRvclBvc2l0aW9uKGUpP3RoaXMuZ2V0T3BlcmF0b3JBdXRvY29tcGxldGVMaXN0UGFyYW1zKGUpOnRoaXMuaXNCZXlvbmRFbmRQb3NpdGlvbihlKT92b2lkIDA6e2VuYWJsZWQ6ITF9fXVwZGF0ZUV4cHJlc3Npb24oZSx0LGkpe3ZhciBzLHIsbyxuLGE7Y29uc3R7ZXhwcmVzc2lvbjpsfT10aGlzLnBhcmFtcztpZih0aGlzLmlzQ29sdW1uUG9zaXRpb24oZSkpcmV0dXJuIEYodGhpcy5wYXJhbXMuZXhwcmVzc2lvbix0aGlzLnN0YXJ0UG9zaXRpb24sKG51bGw9PT0ocz10aGlzLmNvbHVtblBhcnNlcil8fHZvaWQgMD09PXM/dm9pZCAwOnMuZ2V0Q29sSWQoKSk/dGhpcy5jb2x1bW5QYXJzZXIuZW5kUG9zaXRpb246SShsLGUpLmVuZFBvc2l0aW9uLHRoaXMucGFyYW1zLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0Q29sdW1uVmFsdWUodCksITApO2lmKHRoaXMuaXNPcGVyYXRvclBvc2l0aW9uKGUpKXtjb25zdCBzPXRoaXMuZ2V0QmFzZUNlbGxEYXRhVHlwZUZyb21PcGVyYXRvckF1dG9jb21wbGV0ZVR5cGUoaSksZD10aGlzLmhhc09wZXJhbmQocyx0LmtleSksYz1kJiZ0aGlzLmRvZXNPcGVyYW5kTmVlZFF1b3RlcyhzKTtsZXQgaDtpZihudWxsIT0obnVsbD09PShyPXRoaXMub3BlcmF0b3JQYXJzZXIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnN0YXJ0UG9zaXRpb24pJiZlPHRoaXMub3BlcmF0b3JQYXJzZXIuc3RhcnRQb3NpdGlvbiloPUYobCxlLGUsbnVsbCE9PShvPXQuZGlzcGxheVZhbHVlKSYmdm9pZCAwIT09bz9vOnQua2V5LGQsYyk7ZWxzZXtsZXQgaSxzPSExO2lmKG51bGw9PT0obj10aGlzLm9wZXJhdG9yUGFyc2VyKXx8dm9pZCAwPT09bj92b2lkIDA6bi5nZXRPcGVyYXRvcktleSgpKWk9dGhpcy5vcGVyYXRvclBhcnNlci5lbmRQb3NpdGlvbjtlbHNle2NvbnN0e2VuZFBvc2l0aW9uOnQsaXNFbXB0eTpyfT1JKGwsZSwhMCwhMCk7aT10LHM9cn1oPUYobCxmdW5jdGlvbihlLHQsaSl7bGV0IHM9dDtmb3IoO3M8aTspe2lmKCIgIiE9PWVbc10pYnJlYWs7cysrfXJldHVybiBzfShsLHRoaXMuY29sdW1uUGFyc2VyLmVuZFBvc2l0aW9uKzEsaSksaSxudWxsIT09KGE9dC5kaXNwbGF5VmFsdWUpJiZ2b2lkIDAhPT1hP2E6dC5rZXksZCxjLHMpfXJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saCkse2hpZGVBdXRvY29tcGxldGU6IWR9KX1yZXR1cm4gbnVsbH1nZXRNb2RlbCgpe2NvbnN0IGU9dGhpcy5jb2x1bW5QYXJzZXIuZ2V0Q29sSWQoKSx0PXtmaWx0ZXJUeXBlOnRoaXMuY29sdW1uUGFyc2VyLmJhc2VDZWxsRGF0YVR5cGUsY29sSWQ6ZSx0eXBlOnRoaXMub3BlcmF0b3JQYXJzZXIuZ2V0T3BlcmF0b3JLZXkoKX07cmV0dXJuIHRoaXMub3BlcmF0b3JQYXJzZXIuZXhwZWN0ZWROdW1PcGVyYW5kcyYmKHQuZmlsdGVyPXRoaXMub3BlcmFuZFBhcnNlci5nZXRNb2RlbFZhbHVlKCkpLHR9Z2V0T3BlcmFuZFZhbHVlKCl7bGV0IGU9dGhpcy5vcGVyYW5kUGFyc2VyLmdldFJhd1ZhbHVlKCk7Y29uc3R7YmFzZUNlbGxEYXRhVHlwZTp0LGNvbHVtbjppfT10aGlzLmNvbHVtblBhcnNlcjtzd2l0Y2godCl7Y2FzZSJudW1iZXIiOmU9TnVtYmVyKGUpO2JyZWFrO2Nhc2UiZGF0ZSI6Y2FzZSJkYXRlU3RyaW5nIjplPXRoaXMucGFyYW1zLnZhbHVlUGFyc2VyU2VydmljZS5wYXJzZVZhbHVlKGksbnVsbCxlLHZvaWQgMCl9cmV0dXJuImRhdGVTdHJpbmciPT09dD90aGlzLnBhcmFtcy5kYXRhVHlwZVNlcnZpY2UuZ2V0RGF0ZVBhcnNlckZ1bmN0aW9uKGkpKGUpOmV9aXNDb21wbGV0ZSgpe3JldHVybiEoIXRoaXMub3BlcmF0b3JQYXJzZXJ8fCEoIXRoaXMub3BlcmF0b3JQYXJzZXIuZXhwZWN0ZWROdW1PcGVyYW5kc3x8dGhpcy5vcGVyYXRvclBhcnNlci5leHBlY3RlZE51bU9wZXJhbmRzJiZ0aGlzLm9wZXJhbmRQYXJzZXIpKX1pc0NvbHVtblBvc2l0aW9uKGUpe3JldHVybiF0aGlzLmNvbHVtblBhcnNlcnx8bnVsbD09dGhpcy5jb2x1bW5QYXJzZXIuZW5kUG9zaXRpb258fGU8PXRoaXMuY29sdW1uUGFyc2VyLmVuZFBvc2l0aW9uKzF9aXNPcGVyYXRvclBvc2l0aW9uKGUpe3JldHVybiF0aGlzLm9wZXJhdG9yUGFyc2VyfHxudWxsPT10aGlzLm9wZXJhdG9yUGFyc2VyLmVuZFBvc2l0aW9ufHxlPD10aGlzLm9wZXJhdG9yUGFyc2VyLmVuZFBvc2l0aW9uKzF9aXNCZXlvbmRFbmRQb3NpdGlvbihlKXtyZXR1cm4gdGhpcy5pc0NvbXBsZXRlKCkmJm51bGwhPXRoaXMuZW5kUG9zaXRpb24mJmU+dGhpcy5lbmRQb3NpdGlvbisxJiZ0aGlzLmVuZFBvc2l0aW9uKzE8dGhpcy5wYXJhbXMuZXhwcmVzc2lvbi5sZW5ndGh9cmV0dXJuRW5kUG9zaXRpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmRQb3NpdGlvbj10P2U6ZS0xLGV9Z2V0Q29sdW1uQXV0b2NvbXBsZXRlTGlzdFBhcmFtcyhlKXtyZXR1cm4gdGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZW5lcmF0ZUF1dG9jb21wbGV0ZUxpc3RQYXJhbXModGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZXRDb2x1bW5BdXRvY29tcGxldGVFbnRyaWVzKCksImNvbHVtbiIsdGhpcy5nZXRDb2x1bW5TZWFyY2hTdHJpbmcoZSkpfWdldENvbHVtblNlYXJjaFN0cmluZyhlKXt2YXIgdCxpLHMscixvO2NvbnN0IG49bnVsbCE9PShpPW51bGw9PT0odD10aGlzLmNvbHVtblBhcnNlcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0RGlzcGxheVZhbHVlKCkpJiZ2b2lkIDAhPT1pP2k6IiIsYT1MKG4sZSxudWxsPT0obnVsbD09PShzPXRoaXMuY29sdW1uUGFyc2VyKXx8dm9pZCAwPT09cz92b2lkIDA6cy5lbmRQb3NpdGlvbik/dGhpcy5wYXJhbXMuZXhwcmVzc2lvbi5sZW5ndGg6dGhpcy5jb2x1bW5QYXJzZXIuZW5kUG9zaXRpb24rMSksbD0obnVsbD09PShyPXRoaXMuY29sdW1uUGFyc2VyKXx8dm9pZCAwPT09cj92b2lkIDA6ci5oYXNTdGFydENoYXIpJiZhLmxlbmd0aD4wLGQ9KG51bGw9PT0obz10aGlzLmNvbHVtblBhcnNlcil8fHZvaWQgMD09PW8/dm9pZCAwOm8uaGFzRW5kQ2hhcikmJmEubGVuZ3RoPT09bi5sZW5ndGgrMjtyZXR1cm4gbD9hLnNsaWNlKDEsZD8tMTp2b2lkIDApOmF9Z2V0T3BlcmF0b3JBdXRvY29tcGxldGVMaXN0UGFyYW1zKGUpe3ZhciB0LGkscyxyLG87Y29uc3Qgbj1udWxsPT09KHQ9dGhpcy5jb2x1bW5QYXJzZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNvbHVtbjtpZighbilyZXR1cm57ZW5hYmxlZDohMX07Y29uc3QgYT10aGlzLmNvbHVtblBhcnNlci5iYXNlQ2VsbERhdGFUeXBlLGw9bnVsbCE9KG51bGw9PT0oaT10aGlzLm9wZXJhdG9yUGFyc2VyKXx8dm9pZCAwPT09aT92b2lkIDA6aS5zdGFydFBvc2l0aW9uKSYmZTx0aGlzLm9wZXJhdG9yUGFyc2VyLnN0YXJ0UG9zaXRpb24/IiI6TChudWxsIT09KHI9bnVsbD09PShzPXRoaXMub3BlcmF0b3JQYXJzZXIpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmdldERpc3BsYXlWYWx1ZSgpKSYmdm9pZCAwIT09cj9yOiIiLGUsbnVsbD09KG51bGw9PT0obz10aGlzLm9wZXJhdG9yUGFyc2VyKXx8dm9pZCAwPT09bz92b2lkIDA6by5lbmRQb3NpdGlvbik/dGhpcy5wYXJhbXMuZXhwcmVzc2lvbi5sZW5ndGg6dGhpcy5vcGVyYXRvclBhcnNlci5lbmRQb3NpdGlvbisxKTtyZXR1cm4gdGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZW5lcmF0ZUF1dG9jb21wbGV0ZUxpc3RQYXJhbXModGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZXRPcGVyYXRvckF1dG9jb21wbGV0ZUVudHJpZXMobixhKSwib3BlcmF0b3ItIithLGwpfWdldEJhc2VDZWxsRGF0YVR5cGVGcm9tT3BlcmF0b3JBdXRvY29tcGxldGVUeXBlKGUpe3JldHVybiBudWxsPT1lP3ZvaWQgMDplLnJlcGxhY2UoIm9wZXJhdG9yLSIsIiIpfWhhc09wZXJhbmQoZSx0KXt2YXIgaSxzO3JldHVybiFlfHwhdHx8KG51bGwhPT0ocz1udWxsPT09KGk9dGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZXRFeHByZXNzaW9uT3BlcmF0b3IoZSx0KSl8fHZvaWQgMD09PWk/dm9pZCAwOmkubnVtT3BlcmFuZHMpJiZ2b2lkIDAhPT1zP3M6MCk+MH1kb2VzT3BlcmFuZE5lZWRRdW90ZXMoZSl7cmV0dXJuIm51bWJlciIhPT1lfWFkZFRvTGlzdEFuZEdldEluZGV4KGUsdCl7Y29uc3QgaT1lLmxlbmd0aDtyZXR1cm4gZS5wdXNoKHQpLGl9fWZ1bmN0aW9uIEIoZSx0LGkpe2xldCBzPSExO2NvbnN0IHI9ZS50b0xvY2FsZUxvd2VyQ2FzZSgpLG89cisiICIsbj1PYmplY3QuZW50cmllcyh0KS5maW5kKChbZSx0XSk9Pntjb25zdCBuPWkodCkudG9Mb2NhbGVMb3dlckNhc2UoKTtyZXR1cm4gbi5zdGFydHNXaXRoKG8pJiYocz0hMCksbj09PXJ9KTtyZXR1cm4gbj9uWzBdOnM/bnVsbDp2b2lkIDB9ZnVuY3Rpb24gSChlLHQpe3JldHVybihudWxsIT10P3Q6T2JqZWN0LmtleXMoZSkpLm1hcCh0PT4oe2tleTp0LGRpc3BsYXlWYWx1ZTplW3RdLmRpc3BsYXlWYWx1ZX0pKX1WLkNPTF9TVEFSVF9DSEFSPSJbIixWLkNPTF9FTkRfQ0hBUj0iXSI7Y2xhc3MgV3tjb25zdHJ1Y3RvcihlKXt0aGlzLnBhcmFtcz1lLHRoaXMuaW5pdE9wZXJhdG9ycygpfWdldEVudHJpZXMoZSl7cmV0dXJuIEgodGhpcy5vcGVyYXRvcnMsZSl9ZmluZE9wZXJhdG9yKGUpe3JldHVybiBCKGUsdGhpcy5vcGVyYXRvcnMsKHtkaXNwbGF5VmFsdWU6ZX0pPT5lKX1pbml0T3BlcmF0b3JzKCl7Y29uc3R7dHJhbnNsYXRlOmV9PXRoaXMucGFyYW1zO3RoaXMub3BlcmF0b3JzPXtjb250YWluczp7ZGlzcGxheVZhbHVlOmUoImFkdmFuY2VkRmlsdGVyQ29udGFpbnMiKSxldmFsdWF0b3I6KGUsdCxpLHMpPT50aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihlLHQsaSxzLCExLChlLHQpPT5lLmluY2x1ZGVzKHQpKSxudW1PcGVyYW5kczoxfSxub3RDb250YWluczp7ZGlzcGxheVZhbHVlOmUoImFkdmFuY2VkRmlsdGVyTm90Q29udGFpbnMiKSxldmFsdWF0b3I6KGUsdCxpLHMpPT50aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihlLHQsaSxzLCEwLChlLHQpPT4hZS5pbmNsdWRlcyh0KSksbnVtT3BlcmFuZHM6MX0sZXF1YWxzOntkaXNwbGF5VmFsdWU6ZSgiYWR2YW5jZWRGaWx0ZXJUZXh0RXF1YWxzIiksZXZhbHVhdG9yOihlLHQsaSxzKT0+dGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZSx0LGkscywhMSwoZSx0KT0+ZT09PXQpLG51bU9wZXJhbmRzOjF9LG5vdEVxdWFsOntkaXNwbGF5VmFsdWU6ZSgiYWR2YW5jZWRGaWx0ZXJUZXh0Tm90RXF1YWwiKSxldmFsdWF0b3I6KGUsdCxpLHMpPT50aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihlLHQsaSxzLCEwLChlLHQpPT5lIT10KSxudW1PcGVyYW5kczoxfSxzdGFydHNXaXRoOntkaXNwbGF5VmFsdWU6ZSgiYWR2YW5jZWRGaWx0ZXJTdGFydHNXaXRoIiksZXZhbHVhdG9yOihlLHQsaSxzKT0+dGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oZSx0LGkscywhMSwoZSx0KT0+ZS5zdGFydHNXaXRoKHQpKSxudW1PcGVyYW5kczoxfSxlbmRzV2l0aDp7ZGlzcGxheVZhbHVlOmUoImFkdmFuY2VkRmlsdGVyRW5kc1dpdGgiKSxldmFsdWF0b3I6KGUsdCxpLHMpPT50aGlzLmV2YWx1YXRlRXhwcmVzc2lvbihlLHQsaSxzLCExLChlLHQpPT5lLmVuZHNXaXRoKHQpKSxudW1PcGVyYW5kczoxfSxibGFuazp7ZGlzcGxheVZhbHVlOmUoImFkdmFuY2VkRmlsdGVyQmxhbmsiKSxldmFsdWF0b3I6ZT0+bnVsbD09ZXx8InN0cmluZyI9PXR5cGVvZiBlJiYwPT09ZS50cmltKCkubGVuZ3RoLG51bU9wZXJhbmRzOjB9LG5vdEJsYW5rOntkaXNwbGF5VmFsdWU6ZSgiYWR2YW5jZWRGaWx0ZXJOb3RCbGFuayIpLGV2YWx1YXRvcjplPT5udWxsIT1lJiYoInN0cmluZyIhPXR5cGVvZiBlfHxlLnRyaW0oKS5sZW5ndGg+MCksbnVtT3BlcmFuZHM6MH19fWV2YWx1YXRlRXhwcmVzc2lvbihlLHQsaSxzLHIsbyl7cmV0dXJuIG51bGw9PWU/cjppLmNhc2VTZW5zaXRpdmU/byhpLnZhbHVlQ29udmVydGVyKGUsdCkscyk6byhpLnZhbHVlQ29udmVydGVyKGUsdCkudG9Mb2NhbGVMb3dlckNhc2UoKSxzLnRvTG9jYWxlTG93ZXJDYXNlKCkpfX1jbGFzcyBqe2NvbnN0cnVjdG9yKGUpe3RoaXMucGFyYW1zPWUsdGhpcy5pbml0T3BlcmF0b3JzKCl9Z2V0RW50cmllcyhlKXtyZXR1cm4gSCh0aGlzLm9wZXJhdG9ycyxlKX1maW5kT3BlcmF0b3IoZSl7cmV0dXJuIEIoZSx0aGlzLm9wZXJhdG9ycywoe2Rpc3BsYXlWYWx1ZTplfSk9PmUpfWluaXRPcGVyYXRvcnMoKXtjb25zdHt0cmFuc2xhdGU6ZSxlcXVhbHM6dH09dGhpcy5wYXJhbXM7dGhpcy5vcGVyYXRvcnM9e2VxdWFsczp7ZGlzcGxheVZhbHVlOmUoImFkdmFuY2VkRmlsdGVyRXF1YWxzIiksZXZhbHVhdG9yOihlLGkscyxyKT0+dGhpcy5ldmFsdWF0ZVNpbmdsZU9wZXJhbmRFeHByZXNzaW9uKGUsaSxzLHIsISFzLmluY2x1ZGVCbGFua3NJbkVxdWFscyx0KSxudW1PcGVyYW5kczoxfSxub3RFcXVhbDp7ZGlzcGxheVZhbHVlOmUoImFkdmFuY2VkRmlsdGVyTm90RXF1YWwiKSxldmFsdWF0b3I6KGUsaSxzLHIpPT50aGlzLmV2YWx1YXRlU2luZ2xlT3BlcmFuZEV4cHJlc3Npb24oZSxpLHMsciwhIXMuaW5jbHVkZUJsYW5rc0luRXF1YWxzLChlLGkpPT4hdChlLGkpKSxudW1PcGVyYW5kczoxfSxncmVhdGVyVGhhbjp7ZGlzcGxheVZhbHVlOmUoImFkdmFuY2VkRmlsdGVyR3JlYXRlclRoYW4iKSxldmFsdWF0b3I6KGUsdCxpLHMpPT50aGlzLmV2YWx1YXRlU2luZ2xlT3BlcmFuZEV4cHJlc3Npb24oZSx0LGkscywhIWkuaW5jbHVkZUJsYW5rc0luR3JlYXRlclRoYW4sKGUsdCk9PmU+dCksbnVtT3BlcmFuZHM6MX0sZ3JlYXRlclRoYW5PckVxdWFsOntkaXNwbGF5VmFsdWU6ZSgiYWR2YW5jZWRGaWx0ZXJHcmVhdGVyVGhhbk9yRXF1YWwiKSxldmFsdWF0b3I6KGUsdCxpLHMpPT50aGlzLmV2YWx1YXRlU2luZ2xlT3BlcmFuZEV4cHJlc3Npb24oZSx0LGkscywhIWkuaW5jbHVkZUJsYW5rc0luR3JlYXRlclRoYW4sKGUsdCk9PmU+PXQpLG51bU9wZXJhbmRzOjF9LGxlc3NUaGFuOntkaXNwbGF5VmFsdWU6ZSgiYWR2YW5jZWRGaWx0ZXJMZXNzVGhhbiIpLGV2YWx1YXRvcjooZSx0LGkscyk9PnRoaXMuZXZhbHVhdGVTaW5nbGVPcGVyYW5kRXhwcmVzc2lvbihlLHQsaSxzLCEhaS5pbmNsdWRlQmxhbmtzSW5MZXNzVGhhbiwoZSx0KT0+ZTx0KSxudW1PcGVyYW5kczoxfSxsZXNzVGhhbk9yRXF1YWw6e2Rpc3BsYXlWYWx1ZTplKCJhZHZhbmNlZEZpbHRlckxlc3NUaGFuT3JFcXVhbCIpLGV2YWx1YXRvcjooZSx0LGkscyk9PnRoaXMuZXZhbHVhdGVTaW5nbGVPcGVyYW5kRXhwcmVzc2lvbihlLHQsaSxzLCEhaS5pbmNsdWRlQmxhbmtzSW5MZXNzVGhhbiwoZSx0KT0+ZTw9dCksbnVtT3BlcmFuZHM6MX0sYmxhbms6e2Rpc3BsYXlWYWx1ZTplKCJhZHZhbmNlZEZpbHRlckJsYW5rIiksZXZhbHVhdG9yOmU9Pm51bGw9PWUsbnVtT3BlcmFuZHM6MH0sbm90Qmxhbms6e2Rpc3BsYXlWYWx1ZTplKCJhZHZhbmNlZEZpbHRlck5vdEJsYW5rIiksZXZhbHVhdG9yOmU9Pm51bGwhPWUsbnVtT3BlcmFuZHM6MH19fWV2YWx1YXRlU2luZ2xlT3BlcmFuZEV4cHJlc3Npb24oZSx0LGkscyxyLG8pe3JldHVybiBudWxsPT1lP3I6byhpLnZhbHVlQ29udmVydGVyKGUsdCkscyl9fWNsYXNzIFV7Y29uc3RydWN0b3IoZSl7dGhpcy5wYXJhbXM9ZSx0aGlzLmluaXRPcGVyYXRvcnMoKX1nZXRFbnRyaWVzKGUpe3JldHVybiBIKHRoaXMub3BlcmF0b3JzLGUpfWZpbmRPcGVyYXRvcihlKXtyZXR1cm4gQihlLHRoaXMub3BlcmF0b3JzLCh7ZGlzcGxheVZhbHVlOmV9KT0+ZSl9aW5pdE9wZXJhdG9ycygpe2NvbnN0e3RyYW5zbGF0ZTplfT10aGlzLnBhcmFtczt0aGlzLm9wZXJhdG9ycz17dHJ1ZTp7ZGlzcGxheVZhbHVlOmUoImFkdmFuY2VkRmlsdGVyVHJ1ZSIpLGV2YWx1YXRvcjplPT4hIWUsbnVtT3BlcmFuZHM6MH0sZmFsc2U6e2Rpc3BsYXlWYWx1ZTplKCJhZHZhbmNlZEZpbHRlckZhbHNlIiksZXZhbHVhdG9yOmU9PiExPT09ZSxudW1PcGVyYW5kczowfSxibGFuazp7ZGlzcGxheVZhbHVlOmUoImFkdmFuY2VkRmlsdGVyQmxhbmsiKSxldmFsdWF0b3I6ZT0+bnVsbD09ZSxudW1PcGVyYW5kczowfSxub3RCbGFuazp7ZGlzcGxheVZhbHVlOmUoImFkdmFuY2VkRmlsdGVyTm90QmxhbmsiKSxldmFsdWF0b3I6ZT0+bnVsbCE9ZSxudW1PcGVyYW5kczowfX19fXZhciB6PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBLPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1Yntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2x1bW5OYW1lVG9JZE1hcD17fSx0aGlzLmNvbHVtbkF1dG9jb21wbGV0ZUVudHJpZXM9bnVsbCx0aGlzLmV4cHJlc3Npb25FdmFsdWF0b3JQYXJhbXM9e319cG9zdENvbnN0cnVjdCgpe3RoaXMuZXhwcmVzc2lvbkpvaW5PcGVyYXRvcnM9dGhpcy5nZW5lcmF0ZUV4cHJlc3Npb25Kb2luT3BlcmF0b3JzKCksdGhpcy5leHByZXNzaW9uT3BlcmF0b3JzPXRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uT3BlcmF0b3JzKCl9cGFyc2VKb2luT3BlcmF0b3IoZSl7dmFyIHQ7Y29uc3R7dHlwZTppfT1lO3JldHVybiBudWxsIT09KHQ9dGhpcy5leHByZXNzaW9uSm9pbk9wZXJhdG9yc1tpXSkmJnZvaWQgMCE9PXQ/dDppfWdldENvbHVtbkRpc3BsYXlWYWx1ZShlKXtjb25zdHtjb2xJZDp0fT1lLGk9dGhpcy5nZXRDb2x1bW5BdXRvY29tcGxldGVFbnRyaWVzKCkuZmluZCgoe2tleTplfSk9PmU9PT10KTtsZXQgcztyZXR1cm4gaT8ocz1pLmRpc3BsYXlWYWx1ZSx0aGlzLmNvbHVtbk5hbWVUb0lkTWFwW3MudG9Mb2NhbGVVcHBlckNhc2UoKV09e2NvbElkOnQsY29sdW1uTmFtZTpzfSk6cz10LHN9Z2V0T3BlcmF0b3JEaXNwbGF5VmFsdWUoZSl7dmFyIHQsaTtyZXR1cm4gbnVsbCE9PShpPW51bGw9PT0odD10aGlzLmdldEV4cHJlc3Npb25PcGVyYXRvcihlLmZpbHRlclR5cGUsZS50eXBlKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZGlzcGxheVZhbHVlKSYmdm9pZCAwIT09aT9pOmUudHlwZX1nZXRPcGVyYW5kTW9kZWxWYWx1ZShlLHQsaSl7dmFyIHI7c3dpdGNoKHQpe2Nhc2UibnVtYmVyIjpyZXR1cm4gcy5fLmV4aXN0cyhlKT9OdW1iZXIoZSk6bnVsbDtjYXNlImRhdGUiOnJldHVybiBzLl8uc2VyaWFsaXNlRGF0ZSh0aGlzLnZhbHVlUGFyc2VyU2VydmljZS5wYXJzZVZhbHVlKGksbnVsbCxlLHZvaWQgMCksITEpO2Nhc2UiZGF0ZVN0cmluZyI6Y29uc3QgdD10aGlzLnZhbHVlUGFyc2VyU2VydmljZS5wYXJzZVZhbHVlKGksbnVsbCxlLHZvaWQgMCk7cmV0dXJuIHMuXy5zZXJpYWxpc2VEYXRlKG51bGwhPT0ocj10aGlzLmRhdGFUeXBlU2VydmljZS5nZXREYXRlUGFyc2VyRnVuY3Rpb24oaSkodCkpJiZ2b2lkIDAhPT1yP3I6bnVsbCwhMSl9cmV0dXJuIGV9Z2V0T3BlcmFuZERpc3BsYXlWYWx1ZShlLHQpe3ZhciBpLHI7Y29uc3R7Y29sSWQ6byxmaWx0ZXI6bn09ZSxhPXRoaXMuY29sdW1uTW9kZWwuZ2V0UHJpbWFyeUNvbHVtbihvKTtsZXQgbD0iIjtpZihudWxsIT1uKXtsZXQgbztzd2l0Y2goZS5maWx0ZXJUeXBlKXtjYXNlIm51bWJlciI6bz1udWxsIT09KGk9cy5fLnRvU3RyaW5nT3JOdWxsKG4pKSYmdm9pZCAwIT09aT9pOiIiO2JyZWFrO2Nhc2UiZGF0ZSI6Y29uc3QgZT1zLl8ucGFyc2VEYXRlVGltZUZyb21TdHJpbmcobik7bz1hP3RoaXMudmFsdWVGb3JtYXR0ZXJTZXJ2aWNlLmZvcm1hdFZhbHVlKGEsbnVsbCxlKTpudWxsO2JyZWFrO2Nhc2UiZGF0ZVN0cmluZyI6Y29uc3QgdD1zLl8ucGFyc2VEYXRlVGltZUZyb21TdHJpbmcobikscj1hP3RoaXMuZGF0YVR5cGVTZXJ2aWNlLmdldERhdGVGb3JtYXR0ZXJGdW5jdGlvbihhKShudWxsIT10P3Q6dm9pZCAwKTpudWxsO289YT90aGlzLnZhbHVlRm9ybWF0dGVyU2VydmljZS5mb3JtYXRWYWx1ZShhLG51bGwscik6bnVsbH0ibnVtYmVyIiE9PWUuZmlsdGVyVHlwZSYmKG89bnVsbCE9PShyPW51bGwhPW8/bzpzLl8udG9TdHJpbmdPck51bGwobikpJiZ2b2lkIDAhPT1yP3I6IiIsdHx8KG89YCIke299ImApKSxsPXQ/bzoiICIrb31yZXR1cm4gbH1wYXJzZUNvbHVtbkZpbHRlck1vZGVsKGUpe3ZhciB0LGk7cmV0dXJuYFske251bGwhPT0odD10aGlzLmdldENvbHVtbkRpc3BsYXlWYWx1ZShlKSkmJnZvaWQgMCE9PXQ/dDoiIn1dICR7bnVsbCE9PShpPXRoaXMuZ2V0T3BlcmF0b3JEaXNwbGF5VmFsdWUoZSkpJiZ2b2lkIDAhPT1pP2k6IiJ9JHt0aGlzLmdldE9wZXJhbmREaXNwbGF5VmFsdWUoZSl9YH11cGRhdGVBdXRvY29tcGxldGVDYWNoZShlLHQpe2lmKCJjb2x1bW4iPT09dCl7Y29uc3R7a2V5OnQsZGlzcGxheVZhbHVlOml9PWU7dGhpcy5jb2x1bW5OYW1lVG9JZE1hcFtlLmRpc3BsYXlWYWx1ZS50b0xvY2FsZVVwcGVyQ2FzZSgpXT17Y29sSWQ6dCxjb2x1bW5OYW1lOml9fX10cmFuc2xhdGUoZSx0KXtsZXQgaT1NW2VdO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBpJiYoaT1pKHQpKSx0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKShlLGksdCl9Z2VuZXJhdGVBdXRvY29tcGxldGVMaXN0UGFyYW1zKGUsdCxpKXtyZXR1cm57ZW5hYmxlZDohMCx0eXBlOnQsc2VhcmNoU3RyaW5nOmksZW50cmllczplfX1nZXRDb2x1bW5BdXRvY29tcGxldGVFbnRyaWVzKCl7dmFyIGU7aWYodGhpcy5jb2x1bW5BdXRvY29tcGxldGVFbnRyaWVzKXJldHVybiB0aGlzLmNvbHVtbkF1dG9jb21wbGV0ZUVudHJpZXM7Y29uc3QgdD1udWxsIT09KGU9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxQcmltYXJ5Q29sdW1ucygpKSYmdm9pZCAwIT09ZT9lOltdLGk9W10scz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImluY2x1ZGVIaWRkZW5Db2x1bW5zSW5BZHZhbmNlZEZpbHRlciIpO3JldHVybiB0LmZvckVhY2goZT0+e2UuZ2V0Q29sRGVmKCkuZmlsdGVyJiYoc3x8ZS5pc1Zpc2libGUoKXx8ZS5pc1Jvd0dyb3VwQWN0aXZlKCkpJiZpLnB1c2goe2tleTplLmdldENvbElkKCksZGlzcGxheVZhbHVlOnRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW4oZSwiYWR2YW5jZWRGaWx0ZXIiKX0pfSksaS5zb3J0KChlLHQpPT57dmFyIGkscztjb25zdCByPW51bGwhPT0oaT1lLmRpc3BsYXlWYWx1ZSkmJnZvaWQgMCE9PWk/aToiIixvPW51bGwhPT0ocz10LmRpc3BsYXlWYWx1ZSkmJnZvaWQgMCE9PXM/czoiIjtyZXR1cm4gcjxvPy0xOm8+cj8xOjB9KSxpfWdldE9wZXJhdG9yQXV0b2NvbXBsZXRlRW50cmllcyhlLHQpe2NvbnN0IGk9dGhpcy5nZXRBY3RpdmVPcGVyYXRvcnMoZSk7cmV0dXJuIHRoaXMuZ2V0RGF0YVR5cGVFeHByZXNzaW9uT3BlcmF0b3IodCkuZ2V0RW50cmllcyhpKX1nZXRKb2luT3BlcmF0b3JBdXRvY29tcGxldGVFbnRyaWVzKCl7cmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMuZXhwcmVzc2lvbkpvaW5PcGVyYXRvcnMpLm1hcCgoW2UsdF0pPT4oe2tleTplLGRpc3BsYXlWYWx1ZTp0fSkpfWdldERlZmF1bHRBdXRvY29tcGxldGVMaXN0UGFyYW1zKGUpe3JldHVybiB0aGlzLmdlbmVyYXRlQXV0b2NvbXBsZXRlTGlzdFBhcmFtcyh0aGlzLmdldENvbHVtbkF1dG9jb21wbGV0ZUVudHJpZXMoKSwiY29sdW1uIixlKX1nZXREYXRhVHlwZUV4cHJlc3Npb25PcGVyYXRvcihlKXtyZXR1cm4gdGhpcy5leHByZXNzaW9uT3BlcmF0b3JzW2VdfWdldEV4cHJlc3Npb25PcGVyYXRvcihlLHQpe3ZhciBpLHM7cmV0dXJuIG51bGw9PT0ocz1udWxsPT09KGk9dGhpcy5nZXREYXRhVHlwZUV4cHJlc3Npb25PcGVyYXRvcihlKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkub3BlcmF0b3JzKXx8dm9pZCAwPT09cz92b2lkIDA6c1t0XX1nZXRFeHByZXNzaW9uSm9pbk9wZXJhdG9ycygpe3JldHVybiB0aGlzLmV4cHJlc3Npb25Kb2luT3BlcmF0b3JzfWdldENvbElkKGUpe2NvbnN0IHQ9ZS50b0xvY2FsZVVwcGVyQ2FzZSgpLGk9dGhpcy5jb2x1bW5OYW1lVG9JZE1hcFt0XTtpZihpKXJldHVybiBpO2NvbnN0IHM9dGhpcy5nZXRDb2x1bW5BdXRvY29tcGxldGVFbnRyaWVzKCkuZmluZCgoe2Rpc3BsYXlWYWx1ZTplfSk9PmUudG9Mb2NhbGVVcHBlckNhc2UoKT09PXQpO2lmKHMpe2NvbnN0e2tleTplLGRpc3BsYXlWYWx1ZTppfT1zLHI9e2NvbElkOmUsY29sdW1uTmFtZTppfTtyZXR1cm4gdGhpcy5jb2x1bW5OYW1lVG9JZE1hcFt0XT1yLHJ9cmV0dXJuIG51bGx9Z2V0RXhwcmVzc2lvbkV2YWx1YXRvclBhcmFtcyhlKXtsZXQgdD10aGlzLmV4cHJlc3Npb25FdmFsdWF0b3JQYXJhbXNbZV07aWYodClyZXR1cm4gdDtjb25zdCBpPXRoaXMuY29sdW1uTW9kZWwuZ2V0UHJpbWFyeUNvbHVtbihlKTtpZighaSlyZXR1cm57dmFsdWVDb252ZXJ0ZXI6ZT0+ZX07c3dpdGNoKHRoaXMuZGF0YVR5cGVTZXJ2aWNlLmdldEJhc2VEYXRhVHlwZShpKSl7Y2FzZSJkYXRlU3RyaW5nIjp0PXt2YWx1ZUNvbnZlcnRlcjp0aGlzLmRhdGFUeXBlU2VydmljZS5nZXREYXRlUGFyc2VyRnVuY3Rpb24oaSl9O2JyZWFrO2Nhc2Uib2JqZWN0Ijp0PWkuZ2V0Q29sRGVmKCkuZmlsdGVyVmFsdWVHZXR0ZXI/e3ZhbHVlQ29udmVydGVyOmU9PmV9Ont2YWx1ZUNvbnZlcnRlcjooZSx0KT0+e3ZhciBzO3JldHVybiBudWxsIT09KHM9dGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UuZm9ybWF0VmFsdWUoaSx0LGUpKSYmdm9pZCAwIT09cz9zOiJmdW5jdGlvbiI9PXR5cGVvZiBlLnRvU3RyaW5nP2UudG9TdHJpbmcoKToiIn19O2JyZWFrO2Nhc2UidGV4dCI6Y2FzZSB2b2lkIDA6dD17dmFsdWVDb252ZXJ0ZXI6ZT0+cy5fLnRvU3RyaW5nT3JOdWxsKGUpfTticmVhaztkZWZhdWx0OnQ9e3ZhbHVlQ29udmVydGVyOmU9PmV9fWNvbnN0e2ZpbHRlclBhcmFtczpyfT1pLmdldENvbERlZigpO3JldHVybiByJiZbImNhc2VTZW5zaXRpdmUiLCJpbmNsdWRlQmxhbmtzSW5FcXVhbHMiLCJpbmNsdWRlQmxhbmtzSW5MZXNzVGhhbiIsImluY2x1ZGVCbGFua3NJbkdyZWF0ZXJUaGFuIl0uZm9yRWFjaChlPT57Y29uc3QgaT1yW2VdO2kmJih0W2VdPWkpfSksdGhpcy5leHByZXNzaW9uRXZhbHVhdG9yUGFyYW1zW2VdPXQsdH1nZXRDb2x1bW5EZXRhaWxzKGUpe3ZhciB0LGk7Y29uc3Qgcz1udWxsIT09KHQ9dGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKGUpKSYmdm9pZCAwIT09dD90OnZvaWQgMDtyZXR1cm57Y29sdW1uOnMsYmFzZUNlbGxEYXRhVHlwZTpudWxsIT09KGk9cz90aGlzLmRhdGFUeXBlU2VydmljZS5nZXRCYXNlRGF0YVR5cGUocyk6dm9pZCAwKSYmdm9pZCAwIT09aT9pOiJ0ZXh0In19Z2VuZXJhdGVFeHByZXNzaW9uT3BlcmF0b3JzKCl7Y29uc3QgZT0oZSx0KT0+dGhpcy50cmFuc2xhdGUoZSx0KTtyZXR1cm57dGV4dDpuZXcgVyh7dHJhbnNsYXRlOmV9KSxib29sZWFuOm5ldyBVKHt0cmFuc2xhdGU6ZX0pLG9iamVjdDpuZXcgVyh7dHJhbnNsYXRlOmV9KSxudW1iZXI6bmV3IGooe3RyYW5zbGF0ZTplLGVxdWFsczooZSx0KT0+ZT09PXR9KSxkYXRlOm5ldyBqKHt0cmFuc2xhdGU6ZSxlcXVhbHM6KGUsdCk9PmUuZ2V0VGltZSgpPT09dC5nZXRUaW1lKCl9KSxkYXRlU3RyaW5nOm5ldyBqKHt0cmFuc2xhdGU6ZSxlcXVhbHM6KGUsdCk9PmUuZ2V0VGltZSgpPT09dC5nZXRUaW1lKCl9KX19Z2V0Q29sdW1uVmFsdWUoe2Rpc3BsYXlWYWx1ZTplfSl7cmV0dXJuYCR7Vi5DT0xfU1RBUlRfQ0hBUn0ke2V9JHtWLkNPTF9FTkRfQ0hBUn1gfWdlbmVyYXRlRXhwcmVzc2lvbkpvaW5PcGVyYXRvcnMoKXtyZXR1cm57QU5EOnRoaXMudHJhbnNsYXRlKCJhZHZhbmNlZEZpbHRlckFuZCIpLE9SOnRoaXMudHJhbnNsYXRlKCJhZHZhbmNlZEZpbHRlck9yIil9fWdldEFjdGl2ZU9wZXJhdG9ycyhlKXt2YXIgdDtjb25zdCBpPW51bGw9PT0odD1lLmdldENvbERlZigpLmZpbHRlclBhcmFtcyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmlsdGVyT3B0aW9ucztpZighaSlyZXR1cm47cmV0dXJuIGkuZXZlcnkoZT0+InN0cmluZyI9PXR5cGVvZiBlKT9pOnZvaWQgMH1yZXNldENvbHVtbkNhY2hlcygpe3RoaXMuY29sdW1uQXV0b2NvbXBsZXRlRW50cmllcz1udWxsLHRoaXMuY29sdW1uTmFtZVRvSWRNYXA9e30sdGhpcy5leHByZXNzaW9uRXZhbHVhdG9yUGFyYW1zPXt9fX07eihbT2JqZWN0KHMuQXV0b3dpcmVkKSgidmFsdWVGb3JtYXR0ZXJTZXJ2aWNlIildLEsucHJvdG90eXBlLCJ2YWx1ZUZvcm1hdHRlclNlcnZpY2UiLHZvaWQgMCkseihbT2JqZWN0KHMuQXV0b3dpcmVkKSgidmFsdWVQYXJzZXJTZXJ2aWNlIildLEsucHJvdG90eXBlLCJ2YWx1ZVBhcnNlclNlcnZpY2UiLHZvaWQgMCkseihbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sSy5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLHooW09iamVjdChzLkF1dG93aXJlZCkoImRhdGFUeXBlU2VydmljZSIpXSxLLnByb3RvdHlwZSwiZGF0YVR5cGVTZXJ2aWNlIix2b2lkIDApLHooW3MuUG9zdENvbnN0cnVjdF0sSy5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLEs9eihbT2JqZWN0KHMuQmVhbikoImFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UiKV0sSyk7Y2xhc3MgWXtjb25zdHJ1Y3RvcihlKXt0aGlzLnBhcmFtcz1lLHRoaXMub3BlcmF0b3JzPVtdLHRoaXMub3BlcmF0b3JTdGFydFBvc2l0aW9ucz1bXSx0aGlzLm9wZXJhdG9yRW5kUG9zaXRpb25zPVtdLHRoaXMuYWN0aXZlT3BlcmF0b3I9MCx0aGlzLnZhbGlkYXRpb25FcnJvcj1udWxsfXBhcnNlRXhwcmVzc2lvbihlKXt0aGlzLm9wZXJhdG9ycy5wdXNoKCIiKSx0aGlzLm9wZXJhdG9yU3RhcnRQb3NpdGlvbnMucHVzaChlKSx0aGlzLm9wZXJhdG9yRW5kUG9zaXRpb25zLnB1c2godm9pZCAwKTtjb25zdHtleHByZXNzaW9uOnR9PXRoaXMucGFyYW1zO2Zvcig7ZTx0Lmxlbmd0aDspe2NvbnN0IGk9dFtlXTtpZigiICI9PT1pKXtpZih0aGlzLnBhcnNlT3BlcmF0b3IoZS0xKSlyZXR1cm4gdGhpcy5hY3RpdmVPcGVyYXRvcisrLGUtMTt0aGlzLm9wZXJhdG9yc1t0aGlzLmFjdGl2ZU9wZXJhdG9yXSs9aX1lbHNlIHRoaXMub3BlcmF0b3JzW3RoaXMuYWN0aXZlT3BlcmF0b3JdKz1pO2UrK31yZXR1cm4gdGhpcy5wYXJzZU9wZXJhdG9yKGUtMSksZX1pc1ZhbGlkKCl7cmV0dXJuISh0aGlzLnZhbGlkYXRpb25FcnJvcnx8dGhpcy5vcGVyYXRvcnMubGVuZ3RoJiYhdGhpcy5wYXJzZWRPcGVyYXRvcil9Z2V0VmFsaWRhdGlvbkVycm9yKCl7cmV0dXJuIHRoaXMudmFsaWRhdGlvbkVycm9yfWdldEZ1bmN0aW9uKCl7cmV0dXJuIk9SIj09PXRoaXMucGFyc2VkT3BlcmF0b3I/Inx8IjoiJiYifWdldE1vZGVsKCl7cmV0dXJuIk9SIj09PXRoaXMucGFyc2VkT3BlcmF0b3I/Ik9SIjoiQU5EIn1nZXRBdXRvY29tcGxldGVMaXN0UGFyYW1zKGUsdCl7bGV0IGk7aWYobnVsbD09dClpPSIiO2Vsc2V7Y29uc3Qgcz10aGlzLm9wZXJhdG9yc1t0XSxyPXRoaXMub3BlcmF0b3JFbmRQb3NpdGlvbnNbdF07aT1MKHMsZSxudWxsPT1yP3RoaXMucGFyYW1zLmV4cHJlc3Npb24ubGVuZ3RoOnIrMSl9bGV0IHM9dGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZXRKb2luT3BlcmF0b3JBdXRvY29tcGxldGVFbnRyaWVzKCk7cmV0dXJuKHR8fG51bGw9PXQmJnRoaXMuYWN0aXZlT3BlcmF0b3IpJiYocz1zLmZpbHRlcigoe2tleTplfSk9PmU9PT10aGlzLnBhcnNlZE9wZXJhdG9yKSksdGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZW5lcmF0ZUF1dG9jb21wbGV0ZUxpc3RQYXJhbXMocywiam9pbiIsaSl9dXBkYXRlRXhwcmVzc2lvbihlLHQsaSl7dmFyIHMscjtsZXR7ZXhwcmVzc2lvbjpvfT10aGlzLnBhcmFtcztjb25zdCBuPW51bGwhPT0ocz10LmRpc3BsYXlWYWx1ZSkmJnZvaWQgMCE9PXM/czp0LmtleTtpZigwPT09aSlmb3IobGV0IGU9dGhpcy5vcGVyYXRvckVuZFBvc2l0aW9ucy5sZW5ndGgtMTtlPjA7ZS0tKXtjb25zdCB0PXRoaXMub3BlcmF0b3JFbmRQb3NpdGlvbnNbZV07bnVsbCE9dCYmKG89RihvLHRoaXMub3BlcmF0b3JTdGFydFBvc2l0aW9uc1tlXSx0LG4pLnVwZGF0ZWRWYWx1ZSl9cmV0dXJuIEYobyx0aGlzLm9wZXJhdG9yU3RhcnRQb3NpdGlvbnMubGVuZ3RoPmk/dGhpcy5vcGVyYXRvclN0YXJ0UG9zaXRpb25zW2ldOmUsbnVsbCE9PShyPXRoaXMub3BlcmF0b3JFbmRQb3NpdGlvbnMubGVuZ3RoPmk/dGhpcy5vcGVyYXRvckVuZFBvc2l0aW9uc1tpXTp2b2lkIDApJiZ2b2lkIDAhPT1yP3I6SShvLGUsITApLmVuZFBvc2l0aW9uLG4sITApfWdldE51bU9wZXJhdG9ycygpe3JldHVybiB0aGlzLm9wZXJhdG9ycy5sZW5ndGh9Z2V0TGFzdE9wZXJhdG9yRW5kUG9zaXRpb24oKXtyZXR1cm4gdGhpcy5vcGVyYXRvckVuZFBvc2l0aW9uc1t0aGlzLm9wZXJhdG9yRW5kUG9zaXRpb25zLmxlbmd0aC0xXX1wYXJzZU9wZXJhdG9yKGUpe2NvbnN0IHQ9dGhpcy5vcGVyYXRvcnMubGVuZ3RoPnRoaXMuYWN0aXZlT3BlcmF0b3I/dGhpcy5vcGVyYXRvcnNbdGhpcy5hY3RpdmVPcGVyYXRvcl06IiIsaT10aGlzLnBhcmFtcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLmdldEV4cHJlc3Npb25Kb2luT3BlcmF0b3JzKCkscz1CKHQsaSxlPT5lKTtpZihzKXt0aGlzLm9wZXJhdG9yRW5kUG9zaXRpb25zW3RoaXMuYWN0aXZlT3BlcmF0b3JdPWU7Y29uc3Qgcj1pW3NdO2lmKHRoaXMuYWN0aXZlT3BlcmF0b3Ipe2lmKHMhPT10aGlzLnBhcnNlZE9wZXJhdG9yKXJldHVybiB0aGlzLnZhbGlkYXRpb25FcnJvcnx8KHRoaXMudmFsaWRhdGlvbkVycm9yPXttZXNzYWdlOnRoaXMucGFyYW1zLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25Kb2luT3BlcmF0b3JNaXNtYXRjaCIpLHN0YXJ0UG9zaXRpb246ZS10Lmxlbmd0aCsxLGVuZFBvc2l0aW9uOmV9KSwhMX1lbHNlIHRoaXMucGFyc2VkT3BlcmF0b3I9cztyZXR1cm4gdCE9PXImJihOKHRoaXMucGFyYW1zLHQscixlKSx0aGlzLm9wZXJhdG9yc1t0aGlzLmFjdGl2ZU9wZXJhdG9yXT1yKSwhMH1yZXR1cm4gbnVsbCE9PXMmJih0aGlzLnZhbGlkYXRpb25FcnJvcnx8KHRoaXMudmFsaWRhdGlvbkVycm9yPXttZXNzYWdlOnRoaXMucGFyYW1zLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKCJhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25JbnZhbGlkSm9pbk9wZXJhdG9yIiksc3RhcnRQb3NpdGlvbjplLXQubGVuZ3RoKzEsZW5kUG9zaXRpb246ZX0pLCEwKX19Y2xhc3MgJHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGFyYW1zPWUsdGhpcy5zdGFydFBvc2l0aW9uPXQsdGhpcy5leHBlY3RpbmdFeHByZXNzaW9uPSEwLHRoaXMuZXhwZWN0aW5nT3BlcmF0b3I9ITEsdGhpcy5leHByZXNzaW9uUGFyc2Vycz1bXSx0aGlzLm9wZXJhdG9yUGFyc2VyPW5ldyBZKHRoaXMucGFyYW1zKSx0aGlzLm1pc3NpbmdFbmRCcmFja2V0PSExLHRoaXMuZXh0cmFFbmRCcmFja2V0PSExfXBhcnNlRXhwcmVzc2lvbigpe2xldCBlPXRoaXMuc3RhcnRQb3NpdGlvbjtjb25zdHtleHByZXNzaW9uOnR9PXRoaXMucGFyYW1zO2Zvcig7ZTx0Lmxlbmd0aDspe2NvbnN0IGk9dFtlXTtpZigiKCIhPT1pfHx0aGlzLmV4cGVjdGluZ09wZXJhdG9yKXtpZigiKSI9PT1pKXJldHVybiB0aGlzLmVuZFBvc2l0aW9uPWUtMSwwPT09dGhpcy5zdGFydFBvc2l0aW9uJiYodGhpcy5leHRyYUVuZEJyYWNrZXQ9ITApLGU7aWYoIiAiPT09aSk7ZWxzZSBpZih0aGlzLmV4cGVjdGluZ0V4cHJlc3Npb24pe2NvbnN0IHQ9bmV3IFYodGhpcy5wYXJhbXMsZSk7ZT10LnBhcnNlRXhwcmVzc2lvbigpLHRoaXMuZXhwcmVzc2lvblBhcnNlcnMucHVzaCh0KSx0aGlzLmV4cGVjdGluZ0V4cHJlc3Npb249ITEsdGhpcy5leHBlY3RpbmdPcGVyYXRvcj0hMH1lbHNlIHRoaXMuZXhwZWN0aW5nT3BlcmF0b3ImJihlPXRoaXMub3BlcmF0b3JQYXJzZXIucGFyc2VFeHByZXNzaW9uKGUpLHRoaXMuZXhwZWN0aW5nT3BlcmF0b3I9ITEsdGhpcy5leHBlY3RpbmdFeHByZXNzaW9uPSEwKX1lbHNle2NvbnN0IHQ9bmV3ICQodGhpcy5wYXJhbXMsZSsxKTtlPXQucGFyc2VFeHByZXNzaW9uKCksdGhpcy5leHByZXNzaW9uUGFyc2Vycy5wdXNoKHQpLHRoaXMuZXhwZWN0aW5nRXhwcmVzc2lvbj0hMSx0aGlzLmV4cGVjdGluZ09wZXJhdG9yPSEwfWUrK31yZXR1cm4gdGhpcy5zdGFydFBvc2l0aW9uPjAmJih0aGlzLm1pc3NpbmdFbmRCcmFja2V0PSEwKSxlfWlzVmFsaWQoKXtyZXR1cm4hdGhpcy5taXNzaW5nRW5kQnJhY2tldCYmIXRoaXMuZXh0cmFFbmRCcmFja2V0JiZ0aGlzLmV4cHJlc3Npb25QYXJzZXJzLmxlbmd0aD09PXRoaXMub3BlcmF0b3JQYXJzZXIuZ2V0TnVtT3BlcmF0b3JzKCkrMSYmdGhpcy5vcGVyYXRvclBhcnNlci5pc1ZhbGlkKCkmJnRoaXMuZXhwcmVzc2lvblBhcnNlcnMuZXZlcnkoZT0+ZS5pc1ZhbGlkKCkpfWdldFZhbGlkYXRpb25FcnJvcigpe2NvbnN0IGU9dGhpcy5vcGVyYXRvclBhcnNlci5nZXRWYWxpZGF0aW9uRXJyb3IoKTtmb3IobGV0IHQ9MDt0PHRoaXMuZXhwcmVzc2lvblBhcnNlcnMubGVuZ3RoO3QrKyl7Y29uc3QgaT10aGlzLmV4cHJlc3Npb25QYXJzZXJzW3RdLmdldFZhbGlkYXRpb25FcnJvcigpO2lmKGkpcmV0dXJuIGUmJmUuc3RhcnRQb3NpdGlvbjxpLnN0YXJ0UG9zaXRpb24/ZTppfWlmKGUpcmV0dXJuIGU7aWYodGhpcy5leHRyYUVuZEJyYWNrZXQpcmV0dXJue21lc3NhZ2U6dGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyVmFsaWRhdGlvbkV4dHJhRW5kQnJhY2tldCIpLHN0YXJ0UG9zaXRpb246dGhpcy5lbmRQb3NpdGlvbisxLGVuZFBvc2l0aW9uOnRoaXMuZW5kUG9zaXRpb24rMX07bGV0IHQ7cmV0dXJuIHRoaXMuZXhwcmVzc2lvblBhcnNlcnMubGVuZ3RoPT09dGhpcy5vcGVyYXRvclBhcnNlci5nZXROdW1PcGVyYXRvcnMoKT90PSJhZHZhbmNlZEZpbHRlclZhbGlkYXRpb25NaXNzaW5nQ29uZGl0aW9uIjp0aGlzLm1pc3NpbmdFbmRCcmFja2V0JiYodD0iYWR2YW5jZWRGaWx0ZXJWYWxpZGF0aW9uTWlzc2luZ0VuZEJyYWNrZXQiKSx0P3ttZXNzYWdlOnRoaXMucGFyYW1zLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UudHJhbnNsYXRlKHQpLHN0YXJ0UG9zaXRpb246dGhpcy5wYXJhbXMuZXhwcmVzc2lvbi5sZW5ndGgsZW5kUG9zaXRpb246dGhpcy5wYXJhbXMuZXhwcmVzc2lvbi5sZW5ndGh9Om51bGx9Z2V0RnVuY3Rpb24oZSl7Y29uc3QgdD10aGlzLmV4cHJlc3Npb25QYXJzZXJzLmxlbmd0aD4xLGk9dGhpcy5leHByZXNzaW9uUGFyc2Vycy5tYXAodD0+dC5nZXRGdW5jdGlvbihlKSkuam9pbihgICR7dGhpcy5vcGVyYXRvclBhcnNlci5nZXRGdW5jdGlvbigpfSBgKTtyZXR1cm4gdD9gKCR7aX0pYDppfWdldEF1dG9jb21wbGV0ZUxpc3RQYXJhbXMoZSl7aWYobnVsbCE9dGhpcy5lbmRQb3NpdGlvbiYmZT50aGlzLmVuZFBvc2l0aW9uKzEpcmV0dXJuO2lmKCF0aGlzLmV4cHJlc3Npb25QYXJzZXJzLmxlbmd0aClyZXR1cm4gdGhpcy5nZXRDb2x1bW5BdXRvY29tcGxldGVMaXN0UGFyYW1zKCk7Y29uc3QgdD10aGlzLmdldEV4cHJlc3Npb25QYXJzZXJJbmRleChlKTtpZihudWxsPT10KXJldHVybiIoIj09PXRoaXMucGFyYW1zLmV4cHJlc3Npb25bZV0/e2VuYWJsZWQ6ITF9OnRoaXMuZ2V0Q29sdW1uQXV0b2NvbXBsZXRlTGlzdFBhcmFtcygpO2NvbnN0IGk9dGhpcy5leHByZXNzaW9uUGFyc2Vyc1t0XS5nZXRBdXRvY29tcGxldGVMaXN0UGFyYW1zKGUpO2lmKCFpKXtpZih0PHRoaXMuZXhwcmVzc2lvblBhcnNlcnMubGVuZ3RoLTEpcmV0dXJuIHRoaXMub3BlcmF0b3JQYXJzZXIuZ2V0QXV0b2NvbXBsZXRlTGlzdFBhcmFtcyhlLHQpO2lmKHRoaXMuZXhwcmVzc2lvblBhcnNlcnMubGVuZ3RoPT09dGhpcy5vcGVyYXRvclBhcnNlci5nZXROdW1PcGVyYXRvcnMoKSl7Y29uc3QgdD10aGlzLm9wZXJhdG9yUGFyc2VyLmdldExhc3RPcGVyYXRvckVuZFBvc2l0aW9uKCk7cmV0dXJuIG51bGw9PXR8fGU8PXQrMT90aGlzLm9wZXJhdG9yUGFyc2VyLmdldEF1dG9jb21wbGV0ZUxpc3RQYXJhbXMoZSx0aGlzLm9wZXJhdG9yUGFyc2VyLmdldE51bU9wZXJhdG9ycygpLTEpOnRoaXMuZ2V0Q29sdW1uQXV0b2NvbXBsZXRlTGlzdFBhcmFtcygpfXJldHVybiIpIj09PXRoaXMucGFyYW1zLmV4cHJlc3Npb25bZS0xXT97ZW5hYmxlZDohMX06dGhpcy5vcGVyYXRvclBhcnNlci5nZXRBdXRvY29tcGxldGVMaXN0UGFyYW1zKGUpfXJldHVybiBpfXVwZGF0ZUV4cHJlc3Npb24oZSx0LGkpe3ZhciBzO2NvbnN0IHI9dGhpcy5wYXJhbXMuZXhwcmVzc2lvbixvPXRoaXMuZ2V0RXhwcmVzc2lvblBhcnNlckluZGV4KGUpO2lmKG51bGw9PW8pe2NvbnN0IGU9ImNvbHVtbiI9PT1pP3RoaXMucGFyYW1zLmFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2UuZ2V0Q29sdW1uVmFsdWUodCk6bnVsbCE9PShzPXQuZGlzcGxheVZhbHVlKSYmdm9pZCAwIT09cz9zOnQua2V5O3JldHVybiBGKHIsdGhpcy5zdGFydFBvc2l0aW9uLHRoaXMuc3RhcnRQb3NpdGlvbixlLCEwKX1jb25zdCBuPXRoaXMuZXhwcmVzc2lvblBhcnNlcnNbb10udXBkYXRlRXhwcmVzc2lvbihlLHQsaSk7cmV0dXJuIG51bGw9PW4/ImNvbHVtbiI9PT1pP0YocixlLHIubGVuZ3RoLTEsdGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZXRDb2x1bW5WYWx1ZSh0KSwhMCk6bnVsbCE9dGhpcy5lbmRQb3NpdGlvbiYmZT50aGlzLmVuZFBvc2l0aW9uKzE/bnVsbDp0aGlzLm9wZXJhdG9yUGFyc2VyLnVwZGF0ZUV4cHJlc3Npb24oZSx0LG8pOm59Z2V0TW9kZWwoKXtyZXR1cm4gdGhpcy5leHByZXNzaW9uUGFyc2Vycy5sZW5ndGg+MT97ZmlsdGVyVHlwZToiam9pbiIsdHlwZTp0aGlzLm9wZXJhdG9yUGFyc2VyLmdldE1vZGVsKCksY29uZGl0aW9uczp0aGlzLmV4cHJlc3Npb25QYXJzZXJzLm1hcChlPT5lLmdldE1vZGVsKCkpfTp0aGlzLmV4cHJlc3Npb25QYXJzZXJzWzBdLmdldE1vZGVsKCl9Z2V0Q29sdW1uQXV0b2NvbXBsZXRlTGlzdFBhcmFtcygpe3JldHVybiB0aGlzLnBhcmFtcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLmdlbmVyYXRlQXV0b2NvbXBsZXRlTGlzdFBhcmFtcyh0aGlzLnBhcmFtcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLmdldENvbHVtbkF1dG9jb21wbGV0ZUVudHJpZXMoKSwiY29sdW1uIiwiIil9Z2V0RXhwcmVzc2lvblBhcnNlckluZGV4KGUpe2xldCB0O2ZvcihsZXQgaT0wO2k8dGhpcy5leHByZXNzaW9uUGFyc2Vycy5sZW5ndGg7aSsrKXtpZih0aGlzLmV4cHJlc3Npb25QYXJzZXJzW2ldLnN0YXJ0UG9zaXRpb24+ZSlicmVhazt0PWl9cmV0dXJuIHR9fWNsYXNzIFh7Y29uc3RydWN0b3IoZSl7dGhpcy5wYXJhbXM9ZSx0aGlzLnZhbGlkPSExfXBhcnNlRXhwcmVzc2lvbigpe3RoaXMuam9pbkV4cHJlc3Npb25QYXJzZXI9bmV3ICQodGhpcy5wYXJhbXMsMCk7Y29uc3QgZT10aGlzLmpvaW5FeHByZXNzaW9uUGFyc2VyLnBhcnNlRXhwcmVzc2lvbigpO3JldHVybiB0aGlzLnZhbGlkPWU+PXRoaXMucGFyYW1zLmV4cHJlc3Npb24ubGVuZ3RoLTEmJnRoaXMuam9pbkV4cHJlc3Npb25QYXJzZXIuaXNWYWxpZCgpLHRoaXMucGFyYW1zLmV4cHJlc3Npb259aXNWYWxpZCgpe3JldHVybiB0aGlzLnZhbGlkfWdldFZhbGlkYXRpb25NZXNzYWdlKCl7Y29uc3QgZT10aGlzLmpvaW5FeHByZXNzaW9uUGFyc2VyLmdldFZhbGlkYXRpb25FcnJvcigpO2lmKCFlKXJldHVybiBudWxsO2NvbnN0e21lc3NhZ2U6dCxzdGFydFBvc2l0aW9uOmksZW5kUG9zaXRpb246c309ZTtyZXR1cm4gaTx0aGlzLnBhcmFtcy5leHByZXNzaW9uLmxlbmd0aD90aGlzLnBhcmFtcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnRyYW5zbGF0ZSgiYWR2YW5jZWRGaWx0ZXJWYWxpZGF0aW9uTWVzc2FnZSIsW3QsdGhpcy5wYXJhbXMuZXhwcmVzc2lvbi5zbGljZShpLHMrMSkudHJpbSgpXSk6dGhpcy5wYXJhbXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS50cmFuc2xhdGUoImFkdmFuY2VkRmlsdGVyVmFsaWRhdGlvbk1lc3NhZ2VBdEVuZCIsW3RdKX1nZXRGdW5jdGlvbigpe2NvbnN0IGU9e29wZXJhbmRzOltdLG9wZXJhdG9yczpbXSxldmFsdWF0b3JQYXJhbXM6W119O3JldHVybntmdW5jdGlvbkJvZHk6YHJldHVybiAke3RoaXMuam9pbkV4cHJlc3Npb25QYXJzZXIuZ2V0RnVuY3Rpb24oZSl9O2AscGFyYW1zOmV9fWdldEF1dG9jb21wbGV0ZUxpc3RQYXJhbXMoZSl7dmFyIHQ7cmV0dXJuIG51bGwhPT0odD10aGlzLmpvaW5FeHByZXNzaW9uUGFyc2VyLmdldEF1dG9jb21wbGV0ZUxpc3RQYXJhbXMoZSkpJiZ2b2lkIDAhPT10P3Q6e2VuYWJsZWQ6ITF9fXVwZGF0ZUV4cHJlc3Npb24oZSx0LGkpe3JldHVybiB0aGlzLmpvaW5FeHByZXNzaW9uUGFyc2VyLnVwZGF0ZUV4cHJlc3Npb24oZSx0LGkpfWdldE1vZGVsKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMuam9pbkV4cHJlc3Npb25QYXJzZXIuZ2V0TW9kZWwoKTpudWxsfX12YXIgcT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgWj1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuYXBwbGllZEV4cHJlc3Npb249bnVsbCx0aGlzLmV4cHJlc3Npb249bnVsbCx0aGlzLmlzVmFsaWQ9ITB9cG9zdENvbnN0cnVjdCgpe3RoaXMuc2V0RW5hYmxlZCh0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZUFkdmFuY2VkRmlsdGVyIiksITApLHRoaXMuY3RybD10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBPKHRoaXMuZW5hYmxlZCkpLHRoaXMuZXhwcmVzc2lvblByb3h5PXtnZXRWYWx1ZTooZSx0KT0+e2NvbnN0IGk9dGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKGUpO3JldHVybiBpP3RoaXMudmFsdWVTZXJ2aWNlLmdldFZhbHVlKGksdCwhMCk6dm9pZCAwfX0sdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiZW5hYmxlQWR2YW5jZWRGaWx0ZXIiLGU9PnRoaXMuc2V0RW5hYmxlZCghIWUuY3VycmVudFZhbHVlKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELGU9PnRoaXMub25OZXdDb2x1bW5zTG9hZGVkKGUpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJpbmNsdWRlSGlkZGVuQ29sdW1uc0luQWR2YW5jZWRGaWx0ZXIiLCgpPT50aGlzLnVwZGF0ZVZhbGlkaXR5KCkpfWlzRW5hYmxlZCgpe3JldHVybiB0aGlzLmVuYWJsZWR9aXNGaWx0ZXJQcmVzZW50KCl7cmV0dXJuISF0aGlzLmV4cHJlc3Npb25GdW5jdGlvbn1kb2VzRmlsdGVyUGFzcyhlKXtyZXR1cm4gdGhpcy5leHByZXNzaW9uRnVuY3Rpb24odGhpcy5leHByZXNzaW9uUHJveHksZSx0aGlzLmV4cHJlc3Npb25QYXJhbXMpfWdldE1vZGVsKCl7dmFyIGU7Y29uc3QgdD10aGlzLmNyZWF0ZUV4cHJlc3Npb25QYXJzZXIodGhpcy5hcHBsaWVkRXhwcmVzc2lvbik7cmV0dXJuIG51bGw9PXR8fHQucGFyc2VFeHByZXNzaW9uKCksbnVsbCE9PShlPW51bGw9PXQ/dm9pZCAwOnQuZ2V0TW9kZWwoKSkmJnZvaWQgMCE9PWU/ZTpudWxsfXNldE1vZGVsKGUpe2NvbnN0IHQ9KGUsaSk9PntpZigiam9pbiI9PT1lLmZpbHRlclR5cGUpe2NvbnN0IHI9dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnBhcnNlSm9pbk9wZXJhdG9yKGUpLG89ZS5jb25kaXRpb25zLm1hcChlPT50KGUpKS5maWx0ZXIoZT0+cy5fLmV4aXN0cyhlKSkuam9pbihgICR7cn0gYCk7cmV0dXJuIGl8fGUuY29uZGl0aW9ucy5sZW5ndGg8PTE/bzpgKCR7b30pYH1yZXR1cm4gdGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnBhcnNlQ29sdW1uRmlsdGVyTW9kZWwoZSl9LGk9ZT90KGUsITApOm51bGw7dGhpcy5zZXRFeHByZXNzaW9uRGlzcGxheVZhbHVlKGkpLHRoaXMuYXBwbHlFeHByZXNzaW9uKCksdGhpcy5jdHJsLnJlZnJlc2hDb21wKCksdGhpcy5jdHJsLnJlZnJlc2hCdWlsZGVyQ29tcCgpfWdldEV4cHJlc3Npb25EaXNwbGF5VmFsdWUoKXtyZXR1cm4gdGhpcy5leHByZXNzaW9ufXNldEV4cHJlc3Npb25EaXNwbGF5VmFsdWUoZSl7dGhpcy5leHByZXNzaW9uPWV9aXNDdXJyZW50RXhwcmVzc2lvbkFwcGxpZWQoKXtyZXR1cm4gdGhpcy5hcHBsaWVkRXhwcmVzc2lvbj09PXRoaXMuZXhwcmVzc2lvbn1jcmVhdGVFeHByZXNzaW9uUGFyc2VyKGUpe3JldHVybiBlP25ldyBYKHtleHByZXNzaW9uOmUsY29sdW1uTW9kZWw6dGhpcy5jb2x1bW5Nb2RlbCxkYXRhVHlwZVNlcnZpY2U6dGhpcy5kYXRhVHlwZVNlcnZpY2UsdmFsdWVQYXJzZXJTZXJ2aWNlOnRoaXMudmFsdWVQYXJzZXJTZXJ2aWNlLGFkdmFuY2VkRmlsdGVyRXhwcmVzc2lvblNlcnZpY2U6dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlfSk6bnVsbH1nZXREZWZhdWx0RXhwcmVzc2lvbihlKXtjb25zdCB0PXRoaXMuYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZS5nZXRDb2x1bW5WYWx1ZShlKSsiICI7cmV0dXJue3VwZGF0ZWRWYWx1ZTp0LHVwZGF0ZWRQb3NpdGlvbjp0Lmxlbmd0aH19aXNIZWFkZXJBY3RpdmUoKXtyZXR1cm4hdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJhZHZhbmNlZEZpbHRlclBhcmVudCIpfWdldEN0cmwoKXtyZXR1cm4gdGhpcy5jdHJsfXNldEVuYWJsZWQoZSx0KXtjb25zdCBpPXRoaXMuZW5hYmxlZCxyPXRoaXMucm93TW9kZWwuZ2V0VHlwZSgpLG89ImNsaWVudFNpZGUiPT09cnx8InNlcnZlclNpZGUiPT09cjtpZihlJiYhciYmcy5fLndhcm5PbmNlKCJBZHZhbmNlZCBGaWx0ZXIgaXMgb25seSBzdXBwb3J0ZWQgd2l0aCB0aGUgQ2xpZW50LVNpZGUgUm93IE1vZGVsIG9yIFNlcnZlci1TaWRlIFJvdyBNb2RlbC4iKSx0aGlzLmVuYWJsZWQ9ZSYmbywhdCYmdGhpcy5lbmFibGVkIT09aSl7Y29uc3QgZT17dHlwZTpzLkV2ZW50cy5FVkVOVF9BRFZBTkNFRF9GSUxURVJfRU5BQkxFRF9DSEFOR0VELGVuYWJsZWQ6dGhpcy5lbmFibGVkfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfX1hcHBseUV4cHJlc3Npb24oKXtjb25zdCBlPXRoaXMuY3JlYXRlRXhwcmVzc2lvblBhcnNlcih0aGlzLmV4cHJlc3Npb24pO251bGw9PWV8fGUucGFyc2VFeHByZXNzaW9uKCksdGhpcy5hcHBseUV4cHJlc3Npb25Gcm9tUGFyc2VyKGUpfWFwcGx5RXhwcmVzc2lvbkZyb21QYXJzZXIoZSl7aWYodGhpcy5pc1ZhbGlkPSFlfHxlLmlzVmFsaWQoKSwhZXx8IXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcy5leHByZXNzaW9uRnVuY3Rpb249bnVsbCx0aGlzLmV4cHJlc3Npb25QYXJhbXM9bnVsbCx2b2lkKHRoaXMuYXBwbGllZEV4cHJlc3Npb249bnVsbCk7Y29uc3R7ZnVuY3Rpb25Cb2R5OnQscGFyYW1zOml9PWUuZ2V0RnVuY3Rpb24oKTt0aGlzLmV4cHJlc3Npb25GdW5jdGlvbj1uZXcgRnVuY3Rpb24oImV4cHJlc3Npb25Qcm94eSIsIm5vZGUiLCJwYXJhbXMiLHQpLHRoaXMuZXhwcmVzc2lvblBhcmFtcz1pLHRoaXMuYXBwbGllZEV4cHJlc3Npb249dGhpcy5leHByZXNzaW9ufXVwZGF0ZVZhbGlkaXR5KCl7dGhpcy5hZHZhbmNlZEZpbHRlckV4cHJlc3Npb25TZXJ2aWNlLnJlc2V0Q29sdW1uQ2FjaGVzKCk7Y29uc3QgZT10aGlzLmNyZWF0ZUV4cHJlc3Npb25QYXJzZXIodGhpcy5leHByZXNzaW9uKTtudWxsPT1lfHxlLnBhcnNlRXhwcmVzc2lvbigpO2NvbnN0IHQ9KCFlfHxlLmlzVmFsaWQoKSkhPT10aGlzLmlzVmFsaWQ7cmV0dXJuIHRoaXMuYXBwbHlFeHByZXNzaW9uRnJvbVBhcnNlcihlKSx0aGlzLmN0cmwucmVmcmVzaENvbXAoKSx0aGlzLmN0cmwucmVmcmVzaEJ1aWxkZXJDb21wKCksdH1vbk5ld0NvbHVtbnNMb2FkZWQoZSl7aWYoImdyaWRJbml0aWFsaXppbmciIT09ZS5zb3VyY2V8fCF0aGlzLmRhdGFUeXBlU2VydmljZS5pc1BlbmRpbmdJbmZlcmVuY2UoKSlyZXR1cm47dGhpcy5jdHJsLnNldElucHV0RGlzYWJsZWQoITApO2NvbnN0IHQ9dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfREFUQV9UWVBFU19JTkZFUlJFRCwoKT0+e251bGw9PXR8fHQoKSx0aGlzLmN0cmwuc2V0SW5wdXREaXNhYmxlZCghMSl9KX19O3EoW09iamVjdChzLkF1dG93aXJlZCkoInZhbHVlU2VydmljZSIpXSxaLnByb3RvdHlwZSwidmFsdWVTZXJ2aWNlIix2b2lkIDApLHEoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLFoucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxxKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJkYXRhVHlwZVNlcnZpY2UiKV0sWi5wcm90b3R5cGUsImRhdGFUeXBlU2VydmljZSIsdm9pZCAwKSxxKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJ2YWx1ZVBhcnNlclNlcnZpY2UiKV0sWi5wcm90b3R5cGUsInZhbHVlUGFyc2VyU2VydmljZSIsdm9pZCAwKSxxKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dNb2RlbCIpXSxaLnByb3RvdHlwZSwicm93TW9kZWwiLHZvaWQgMCkscShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZSIpXSxaLnByb3RvdHlwZSwiYWR2YW5jZWRGaWx0ZXJFeHByZXNzaW9uU2VydmljZSIsdm9pZCAwKSxxKFtzLlBvc3RDb25zdHJ1Y3RdLFoucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxaPXEoW09iamVjdChzLkJlYW4pKCJhZHZhbmNlZEZpbHRlclNlcnZpY2UiKV0sWik7Y29uc3QgUT17dmVyc2lvbjoiMzEuMS4xIixtb2R1bGVOYW1lOnMuTW9kdWxlTmFtZXMuQWR2YW5jZWRGaWx0ZXJNb2R1bGUsYmVhbnM6W1osS10sYWdTdGFja0NvbXBvbmVudHM6W3tjb21wb25lbnROYW1lOiJhZ0FkdmFuY2VkRmlsdGVyIixjb21wb25lbnRDbGFzczpQfV0sZGVwZW5kYW50TW9kdWxlczpbci5FbnRlcnByaXNlQ29yZU1vZHVsZV19O2kuZCh0LCJBZHZhbmNlZEZpbHRlck1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFF9KSl9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpO3ZhciBzPWkoMCkscj1pKDMpLG89ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgbiBleHRlbmRzIHMuUm93Tm9kZUJsb2Nre2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcigwKSx0aGlzLm5vZGVJZFNlcXVlbmNlPW5ldyBzLk51bWJlclNlcXVlbmNlLHRoaXMuaW5mbz17fSx0aGlzLnNzcm1QYXJhbXM9ZSx0aGlzLnBhcmVudFJvd05vZGU9aSx0aGlzLmxldmVsPWkubGV2ZWwrMSx0aGlzLmdyb3VwTGV2ZWw9ZS5yb3dHcm91cENvbHM/dGhpcy5sZXZlbDxlLnJvd0dyb3VwQ29scy5sZW5ndGg6dm9pZCAwLHRoaXMubGVhZkdyb3VwPSEhZS5yb3dHcm91cENvbHMmJnRoaXMubGV2ZWw9PT1lLnJvd0dyb3VwQ29scy5sZW5ndGgtMX1wb3N0Q29uc3RydWN0KCl7aWYodGhpcy51c2luZ1RyZWVEYXRhPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidHJlZURhdGEiKSx0aGlzLm5vZGVJZFByZWZpeD10aGlzLmJsb2NrVXRpbHMuY3JlYXRlTm9kZUlkUHJlZml4KHRoaXMucGFyZW50Um93Tm9kZSksIXRoaXMudXNpbmdUcmVlRGF0YSYmdGhpcy5ncm91cExldmVsKXtjb25zdCBlPXRoaXMuc3NybVBhcmFtcy5yb3dHcm91cENvbHNbdGhpcy5sZXZlbF07dGhpcy5ncm91cEZpZWxkPWUuZmllbGQsdGhpcy5yb3dHcm91cENvbHVtbj10aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpW3RoaXMubGV2ZWxdfWxldCBlPTE7Y29uc3QgdD0tMT09PXRoaXMucGFyZW50Um93Tm9kZS5sZXZlbCxpPXRoaXMuc3RvcmVVdGlscy5nZXRTZXJ2ZXJTaWRlSW5pdGlhbFJvd0NvdW50KCk7dCYmbnVsbCE9aSYmKGU9aSksdGhpcy5pbml0aWFsaXNlUm93Tm9kZXMoZSksdGhpcy5yb3dOb2RlQmxvY2tMb2FkZXIuYWRkQmxvY2sodGhpcyksdGhpcy5hZGREZXN0cm95RnVuYygoKT0+dGhpcy5yb3dOb2RlQmxvY2tMb2FkZXIucmVtb3ZlQmxvY2sodGhpcykpLHRoaXMucG9zdFNvcnRGdW5jPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJwb3N0U29ydFJvd3MiKSxudWxsIT1pJiZ0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50T25jZSh7dHlwZTpzLkV2ZW50cy5FVkVOVF9ST1dfQ09VTlRfUkVBRFl9KX1kZXN0cm95Um93Tm9kZXMoKXt0aGlzLmJsb2NrVXRpbHMuZGVzdHJveVJvd05vZGVzKHRoaXMuYWxsUm93Tm9kZXMpLHRoaXMuYWxsUm93Tm9kZXM9W10sdGhpcy5ub2Rlc0FmdGVyU29ydD1bXSx0aGlzLm5vZGVzQWZ0ZXJGaWx0ZXI9W10sdGhpcy5hbGxOb2Rlc01hcD17fX1pbml0aWFsaXNlUm93Tm9kZXMoZSx0PSExKXt0aGlzLmRlc3Ryb3lSb3dOb2RlcygpO2ZvcihsZXQgaT0wO2k8ZTtpKyspe2NvbnN0IGU9dGhpcy5ibG9ja1V0aWxzLmNyZWF0ZVJvd05vZGUoe2ZpZWxkOnRoaXMuZ3JvdXBGaWVsZCxncm91cDp0aGlzLmdyb3VwTGV2ZWwsbGVhZkdyb3VwOnRoaXMubGVhZkdyb3VwLGxldmVsOnRoaXMubGV2ZWwscGFyZW50OnRoaXMucGFyZW50Um93Tm9kZSxyb3dHcm91cENvbHVtbjp0aGlzLnJvd0dyb3VwQ29sdW1ufSk7dCYmKGUuZmFpbGVkTG9hZD0hMCksdGhpcy5hbGxSb3dOb2Rlcy5wdXNoKGUpLHRoaXMubm9kZXNBZnRlckZpbHRlci5wdXNoKGUpLHRoaXMubm9kZXNBZnRlclNvcnQucHVzaChlKX19Z2V0QmxvY2tTdGF0ZUpzb24oKXtyZXR1cm57aWQ6dGhpcy5ub2RlSWRQcmVmaXg/dGhpcy5ub2RlSWRQcmVmaXg6IiIsc3RhdGU6dGhpcy5nZXRTdGF0ZSgpfX1sb2FkRnJvbURhdGFzb3VyY2UoKXt0aGlzLnN0b3JlVXRpbHMubG9hZEZyb21EYXRhc291cmNlKHtzdGFydFJvdzp2b2lkIDAsZW5kUm93OnZvaWQgMCxwYXJlbnRCbG9jazp0aGlzLHBhcmVudE5vZGU6dGhpcy5wYXJlbnRSb3dOb2RlLHN0b3JlUGFyYW1zOnRoaXMuc3NybVBhcmFtcyxzdWNjZXNzOnRoaXMuc3VjY2Vzcy5iaW5kKHRoaXMsdGhpcy5nZXRWZXJzaW9uKCkpLGZhaWw6dGhpcy5wYWdlTG9hZEZhaWxlZC5iaW5kKHRoaXMsdGhpcy5nZXRWZXJzaW9uKCkpfSl9Z2V0U3RhcnRSb3coKXtyZXR1cm4gMH1nZXRFbmRSb3coKXtyZXR1cm4gdGhpcy5ub2Rlc0FmdGVyU29ydC5sZW5ndGh9Y3JlYXRlRGF0YU5vZGUoZSx0KXtjb25zdCBpPXRoaXMuYmxvY2tVdGlscy5jcmVhdGVSb3dOb2RlKHtmaWVsZDp0aGlzLmdyb3VwRmllbGQsZ3JvdXA6dGhpcy5ncm91cExldmVsLGxlYWZHcm91cDp0aGlzLmxlYWZHcm91cCxsZXZlbDp0aGlzLmxldmVsLHBhcmVudDp0aGlzLnBhcmVudFJvd05vZGUscm93R3JvdXBDb2x1bW46dGhpcy5yb3dHcm91cENvbHVtbn0pO251bGwhPXQ/cy5fLmluc2VydEludG9BcnJheSh0aGlzLmFsbFJvd05vZGVzLGksdCk6dGhpcy5hbGxSb3dOb2Rlcy5wdXNoKGkpO2NvbnN0IHI9dGhpcy5wcmVmaXhJZCh0aGlzLm5vZGVJZFNlcXVlbmNlLm5leHQoKSk7cmV0dXJuIHRoaXMuYmxvY2tVdGlscy5zZXREYXRhSW50b1Jvd05vZGUoaSxlLHIsdm9pZCAwKSx0aGlzLm5vZGVNYW5hZ2VyLmFkZFJvd05vZGUoaSksdGhpcy5ibG9ja1V0aWxzLmNoZWNrT3BlbkJ5RGVmYXVsdChpKSx0aGlzLmFsbE5vZGVzTWFwW2kuaWRdPWksaX1wcmVmaXhJZChlKXtyZXR1cm4gdGhpcy5ub2RlSWRQcmVmaXg/dGhpcy5ub2RlSWRQcmVmaXgrIi0iK2U6ZS50b1N0cmluZygpfXByb2Nlc3NTZXJ2ZXJGYWlsKCl7dGhpcy5pbml0aWFsaXNlUm93Tm9kZXMoMSwhMCksdGhpcy5maXJlU3RvcmVVcGRhdGVkRXZlbnQoKSx0aGlzLmZsdXNoQXN5bmNUcmFuc2FjdGlvbnMoKX1wcm9jZXNzU2VydmVyUmVzdWx0KGUpe2lmKCF0aGlzLmlzQWxpdmUoKSlyZXR1cm47Y29uc3QgdD1lLmdyb3VwTGV2ZWxJbmZvO3QmJk9iamVjdC5hc3NpZ24odGhpcy5pbmZvLHQpLGUucGl2b3RSZXN1bHRGaWVsZHMmJnRoaXMuc2VydmVyU2lkZVJvd01vZGVsLmdlbmVyYXRlU2Vjb25kYXJ5Q29sdW1ucyhlLnBpdm90UmVzdWx0RmllbGRzKTtjb25zdCBpPXRoaXMuYWxsUm93Tm9kZXMubGVuZ3RoPjA/dGhpcy5hbGxOb2Rlc01hcDp2b2lkIDA7dGhpcy5hbGxSb3dOb2Rlcz1bXSx0aGlzLm5vZGVzQWZ0ZXJTb3J0PVtdLHRoaXMubm9kZXNBZnRlckZpbHRlcj1bXSx0aGlzLmFsbE5vZGVzTWFwPXt9LGUucm93RGF0YXx8cy5fLndhcm5PbmNlKCcicGFyYW1zLmRhdGEiIGlzIG1pc3NpbmcgZnJvbSBTZXJ2ZXItU2lkZSBSb3cgTW9kZWwgc3VjY2VzcygpIGNhbGxiYWNrLiBQbGVhc2UgdXNlIHRoZSAiZGF0YSIgYXR0cmlidXRlLiBJZiBubyBkYXRhIGlzIHJldHVybmVkLCBzZXQgYW4gZW1wdHkgbGlzdC4nKSx0aGlzLmNyZWF0ZU9yUmVjeWNsZU5vZGVzKGksZS5yb3dEYXRhKSxpJiZ0aGlzLmJsb2NrVXRpbHMuZGVzdHJveVJvd05vZGVzKHMuXy5nZXRBbGxWYWx1ZXNJbk9iamVjdChpKSksMD09PXRoaXMubGV2ZWwmJnRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnRPbmNlKHt0eXBlOnMuRXZlbnRzLkVWRU5UX1JPV19DT1VOVF9SRUFEWX0pLHRoaXMuZmlsdGVyQW5kU29ydE5vZGVzKCksdGhpcy5maXJlU3RvcmVVcGRhdGVkRXZlbnQoKSx0aGlzLmZsdXNoQXN5bmNUcmFuc2FjdGlvbnMoKX1jcmVhdGVPclJlY3ljbGVOb2RlcyhlLHQpe2lmKCF0KXJldHVybjtjb25zdCBpPXQ9PntpZighZSlyZXR1cm47Y29uc3QgaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiZ2V0Um93SWQiKTtpZighaSlyZXR1cm47Y29uc3Qgcz10aGlzLnBhcmVudFJvd05vZGUuZ2V0R3JvdXBLZXlzKCkscj10aGlzLmxldmVsLG89aSh7ZGF0YTp0LHBhcmVudEtleXM6cy5sZW5ndGg+MD9zOnZvaWQgMCxsZXZlbDpyfSksbj1lW29dO3JldHVybiBuPyhkZWxldGUgZVtvXSxuKTp2b2lkIDB9LHM9KGUsdCk9Pnt0aGlzLmFsbE5vZGVzTWFwW2UuaWRdPWUsdGhpcy5ibG9ja1V0aWxzLnVwZGF0ZURhdGFJbnRvUm93Tm9kZShlLHQpLHRoaXMuYWxsUm93Tm9kZXMucHVzaChlKX07dC5mb3JFYWNoKGU9Pntjb25zdCB0PWkoZSk7dD9zKHQsZSk6dGhpcy5jcmVhdGVEYXRhTm9kZShlKX0pfWZsdXNoQXN5bmNUcmFuc2FjdGlvbnMoKXt3aW5kb3cuc2V0VGltZW91dCgoKT0+dGhpcy50cmFuc2FjdGlvbk1hbmFnZXIuZmx1c2hBc3luY1RyYW5zYWN0aW9ucygpLDApfWZpbHRlckFuZFNvcnROb2Rlcygpe3RoaXMuZmlsdGVyUm93Tm9kZXMoKSx0aGlzLnNvcnRSb3dOb2RlcygpfXNvcnRSb3dOb2Rlcygpe2NvbnN0IGU9dGhpcy5zdG9yZVV0aWxzLmlzU2VydmVyU2lkZVNvcnRBbGxMZXZlbHMoKXx8dGhpcy5zdG9yZVV0aWxzLmlzU2VydmVyU2lkZVNvcnRPblNlcnZlcigpLHQ9dGhpcy5zb3J0Q29udHJvbGxlci5nZXRTb3J0T3B0aW9ucygpLGk9IXR8fDA9PXQubGVuZ3RoO2lmKGV8fGkpdGhpcy5ub2Rlc0FmdGVyU29ydD10aGlzLm5vZGVzQWZ0ZXJGaWx0ZXI7ZWxzZSBpZih0aGlzLm5vZGVzQWZ0ZXJTb3J0PXRoaXMucm93Tm9kZVNvcnRlci5kb0Z1bGxTb3J0KHRoaXMubm9kZXNBZnRlckZpbHRlcix0KSx0aGlzLnBvc3RTb3J0RnVuYyl7Y29uc3QgZT17bm9kZXM6dGhpcy5ub2Rlc0FmdGVyU29ydH07dGhpcy5wb3N0U29ydEZ1bmMoZSl9fWZpbHRlclJvd05vZGVzKCl7Y29uc3QgZT0hdGhpcy5zdG9yZVV0aWxzLmlzU2VydmVyU2lkZU9ubHlSZWZyZXNoRmlsdGVyZWRHcm91cHMoKXx8dGhpcy5zdG9yZVV0aWxzLmlzU2VydmVyU2lkZUZpbHRlck9uU2VydmVyKCksdD10aGlzLmdyb3VwTGV2ZWw7dGhpcy5ub2Rlc0FmdGVyRmlsdGVyPWV8fHQ/dGhpcy5hbGxSb3dOb2Rlczp0aGlzLmFsbFJvd05vZGVzLmZpbHRlcihlPT50aGlzLmZpbHRlck1hbmFnZXIuZG9lc1Jvd1Bhc3NGaWx0ZXIoe3Jvd05vZGU6ZX0pKX1jbGVhckRpc3BsYXlJbmRleGVzKCl7dGhpcy5kaXNwbGF5SW5kZXhTdGFydD12b2lkIDAsdGhpcy5kaXNwbGF5SW5kZXhFbmQ9dm9pZCAwLHRoaXMuYWxsUm93Tm9kZXMuZm9yRWFjaChlPT50aGlzLmJsb2NrVXRpbHMuY2xlYXJEaXNwbGF5SW5kZXgoZSkpfWdldERpc3BsYXlJbmRleEVuZCgpe3JldHVybiB0aGlzLmRpc3BsYXlJbmRleEVuZH1pc0Rpc3BsYXlJbmRleEluU3RvcmUoZSl7cmV0dXJuIDAhPT10aGlzLmdldFJvd0NvdW50KCkmJihlPj10aGlzLmRpc3BsYXlJbmRleFN0YXJ0JiZlPHRoaXMuZGlzcGxheUluZGV4RW5kKX1zZXREaXNwbGF5SW5kZXhlcyhlLHQpe3RoaXMuZGlzcGxheUluZGV4U3RhcnQ9ZS5wZWVrKCksdGhpcy50b3BQeD10LnZhbHVlO2NvbnN0IGk9e307dGhpcy5ub2Rlc0FmdGVyU29ydC5mb3JFYWNoKHM9Pnt0aGlzLmJsb2NrVXRpbHMuc2V0RGlzcGxheUluZGV4KHMsZSx0KSxpW3MuaWRdPSEwfSksdGhpcy5hbGxSb3dOb2Rlcy5mb3JFYWNoKGU9PntpW2UuaWRdfHx0aGlzLmJsb2NrVXRpbHMuY2xlYXJEaXNwbGF5SW5kZXgoZSl9KSx0aGlzLmRpc3BsYXlJbmRleEVuZD1lLnBlZWsoKSx0aGlzLmhlaWdodFB4PXQudmFsdWUtdGhpcy50b3BQeH1mb3JFYWNoU3RvcmVEZWVwKGUsdD1uZXcgcy5OdW1iZXJTZXF1ZW5jZSl7ZSh0aGlzLHQubmV4dCgpKSx0aGlzLmFsbFJvd05vZGVzLmZvckVhY2goaT0+e2NvbnN0IHM9aS5jaGlsZFN0b3JlO3MmJnMuZm9yRWFjaFN0b3JlRGVlcChlLHQpfSl9Zm9yRWFjaE5vZGVEZWVwKGUsdD1uZXcgcy5OdW1iZXJTZXF1ZW5jZSl7dGhpcy5hbGxSb3dOb2Rlcy5mb3JFYWNoKGk9PntlKGksdC5uZXh0KCkpO2NvbnN0IHM9aS5jaGlsZFN0b3JlO3MmJnMuZm9yRWFjaE5vZGVEZWVwKGUsdCl9KX1mb3JFYWNoTm9kZURlZXBBZnRlckZpbHRlckFuZFNvcnQoZSx0PW5ldyBzLk51bWJlclNlcXVlbmNlLGk9ITEpe3RoaXMubm9kZXNBZnRlclNvcnQuZm9yRWFjaChzPT57ZShzLHQubmV4dCgpKTtjb25zdCByPXMuY2hpbGRTdG9yZTtyJiZyLmZvckVhY2hOb2RlRGVlcEFmdGVyRmlsdGVyQW5kU29ydChlLHQsaSl9KSxpJiZ0aGlzLnBhcmVudFJvd05vZGUuc2libGluZyYmZSh0aGlzLnBhcmVudFJvd05vZGUuc2libGluZyx0Lm5leHQoKSl9Z2V0Um93VXNpbmdEaXNwbGF5SW5kZXgoZSl7aWYoIXRoaXMuaXNEaXNwbGF5SW5kZXhJblN0b3JlKGUpKXJldHVybjtyZXR1cm4gdGhpcy5ibG9ja1V0aWxzLmJpbmFyeVNlYXJjaEZvckRpc3BsYXlJbmRleChlLHRoaXMubm9kZXNBZnRlclNvcnQpfWdldFJvd0JvdW5kcyhlKXtmb3IobGV0IHQ9MDt0PHRoaXMubm9kZXNBZnRlclNvcnQubGVuZ3RoO3QrKyl7Y29uc3QgaT10aGlzLm5vZGVzQWZ0ZXJTb3J0W3RdLHM9dGhpcy5ibG9ja1V0aWxzLmV4dHJhY3RSb3dCb3VuZHMoaSxlKTtpZihzKXJldHVybiBzfXJldHVybiBudWxsfWlzUGl4ZWxJblJhbmdlKGUpe3JldHVybiBlPj10aGlzLnRvcFB4JiZlPHRoaXMudG9wUHgrdGhpcy5oZWlnaHRQeH1nZXRSb3dJbmRleEF0UGl4ZWwoZSl7aWYoZTw9dGhpcy50b3BQeCl7cmV0dXJuIHRoaXMubm9kZXNBZnRlclNvcnRbMF0ucm93SW5kZXh9aWYoZT49dGhpcy50b3BQeCt0aGlzLmhlaWdodFB4KXtjb25zdCB0PXRoaXMubm9kZXNBZnRlclNvcnRbdGhpcy5ub2Rlc0FmdGVyU29ydC5sZW5ndGgtMV0saT10LnJvd1RvcCt0LnJvd0hlaWdodDtpZihlPj1pJiZ0LmV4cGFuZGVkKXtpZih0LmNoaWxkU3RvcmUmJnQuY2hpbGRTdG9yZS5nZXRSb3dDb3VudCgpPjApcmV0dXJuIHQuY2hpbGRTdG9yZS5nZXRSb3dJbmRleEF0UGl4ZWwoZSk7aWYodC5kZXRhaWxOb2RlKXJldHVybiB0LmRldGFpbE5vZGUucm93SW5kZXh9cmV0dXJuIHQucm93SW5kZXh9bGV0IHQ9bnVsbDt0aGlzLm5vZGVzQWZ0ZXJTb3J0LmZvckVhY2goaT0+e2NvbnN0IHM9dGhpcy5ibG9ja1V0aWxzLmdldEluZGV4QXRQaXhlbChpLGUpO251bGwhPXMmJih0PXMpfSk7cmV0dXJuIG51bGw9PXQ/dGhpcy5kaXNwbGF5SW5kZXhFbmQtMTp0fWdldENoaWxkU3RvcmUoZSl7cmV0dXJuIHRoaXMuc3RvcmVVdGlscy5nZXRDaGlsZFN0b3JlKGUsdGhpcyxlPT50aGlzLmFsbFJvd05vZGVzLmZpbmQodD0+dC5rZXk9PWUpKX1mb3JFYWNoQ2hpbGRTdG9yZVNoYWxsb3coZSl7dGhpcy5hbGxSb3dOb2Rlcy5mb3JFYWNoKHQ9Pntjb25zdCBpPXQuY2hpbGRTdG9yZTtpJiZlKGkpfSl9cmVmcmVzaEFmdGVyRmlsdGVyKGUpe2NvbnN0IHQ9dGhpcy5zdG9yZVV0aWxzLmlzU2VydmVyU2lkZUZpbHRlck9uU2VydmVyKCksaT10aGlzLnN0b3JlVXRpbHMuaXNTZXJ2ZXJSZWZyZXNoTmVlZGVkKHRoaXMucGFyZW50Um93Tm9kZSx0aGlzLnNzcm1QYXJhbXMucm93R3JvdXBDb2xzLGUpO2lmKCF0aGlzLnN0b3JlVXRpbHMuaXNTZXJ2ZXJTaWRlT25seVJlZnJlc2hGaWx0ZXJlZEdyb3VwcygpfHx0JiZpKXJldHVybiB0aGlzLnJlZnJlc2hTdG9yZSghMCksdm9pZCB0aGlzLnNvcnRSb3dOb2RlcygpO3RoaXMuZmlsdGVyUm93Tm9kZXMoKSx0aGlzLnNvcnRSb3dOb2RlcygpLHRoaXMuZm9yRWFjaENoaWxkU3RvcmVTaGFsbG93KHQ9PnQucmVmcmVzaEFmdGVyRmlsdGVyKGUpKX1yZWZyZXNoQWZ0ZXJTb3J0KGUpe2NvbnN0IHQ9dGhpcy5zdG9yZVV0aWxzLmlzU2VydmVyU2lkZVNvcnRPblNlcnZlcigpLGk9dGhpcy5zdG9yZVV0aWxzLmlzU2VydmVyUmVmcmVzaE5lZWRlZCh0aGlzLnBhcmVudFJvd05vZGUsdGhpcy5zc3JtUGFyYW1zLnJvd0dyb3VwQ29scyxlKTtpZih0aGlzLnN0b3JlVXRpbHMuaXNTZXJ2ZXJTaWRlU29ydEFsbExldmVscygpfHx0JiZpKXJldHVybiB0aGlzLnJlZnJlc2hTdG9yZSghMCksdm9pZCB0aGlzLmZpbHRlclJvd05vZGVzKCk7dGhpcy5maWx0ZXJSb3dOb2RlcygpLHRoaXMuc29ydFJvd05vZGVzKCksdGhpcy5mb3JFYWNoQ2hpbGRTdG9yZVNoYWxsb3codD0+dC5yZWZyZXNoQWZ0ZXJTb3J0KGUpKX1hcHBseVRyYW5zYWN0aW9uKGUpe3N3aXRjaCh0aGlzLmdldFN0YXRlKCkpe2Nhc2Ugcy5Sb3dOb2RlQmxvY2suU1RBVEVfRkFJTEVEOnJldHVybntzdGF0dXM6cy5TZXJ2ZXJTaWRlVHJhbnNhY3Rpb25SZXN1bHRTdGF0dXMuU3RvcmVMb2FkaW5nRmFpbGVkfTtjYXNlIHMuUm93Tm9kZUJsb2NrLlNUQVRFX0xPQURJTkc6cmV0dXJue3N0YXR1czpzLlNlcnZlclNpZGVUcmFuc2FjdGlvblJlc3VsdFN0YXR1cy5TdG9yZUxvYWRpbmd9O2Nhc2Ugcy5Sb3dOb2RlQmxvY2suU1RBVEVfV0FJVElOR19UT19MT0FEOnJldHVybntzdGF0dXM6cy5TZXJ2ZXJTaWRlVHJhbnNhY3Rpb25SZXN1bHRTdGF0dXMuU3RvcmVXYWl0aW5nVG9Mb2FkfX1jb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJpc0FwcGx5U2VydmVyU2lkZVRyYW5zYWN0aW9uIik7aWYodCl7aWYoIXQoe3RyYW5zYWN0aW9uOmUscGFyZW50Tm9kZTp0aGlzLnBhcmVudFJvd05vZGUsZ3JvdXBMZXZlbEluZm86dGhpcy5pbmZvfSkpcmV0dXJue3N0YXR1czpzLlNlcnZlclNpZGVUcmFuc2FjdGlvblJlc3VsdFN0YXR1cy5DYW5jZWxsZWR9fWNvbnN0IGk9e3N0YXR1czpzLlNlcnZlclNpZGVUcmFuc2FjdGlvblJlc3VsdFN0YXR1cy5BcHBsaWVkLHJlbW92ZTpbXSx1cGRhdGU6W10sYWRkOltdfSxyPVtdO3JldHVybiB0aGlzLmV4ZWN1dGVBZGQoZSxpKSx0aGlzLmV4ZWN1dGVSZW1vdmUoZSxpLHIpLHRoaXMuZXhlY3V0ZVVwZGF0ZShlLGksciksdGhpcy5maWx0ZXJBbmRTb3J0Tm9kZXMoKSx0aGlzLnVwZGF0ZVNlbGVjdGlvbihyKSxpfXVwZGF0ZVNlbGVjdGlvbihlKXtpZihlLmxlbmd0aD4wKXt0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2V0Tm9kZXNTZWxlY3RlZCh7bmV3VmFsdWU6ITEsbm9kZXM6ZSxzdXBwcmVzc0ZpbmlzaEFjdGlvbnM6ITAsY2xlYXJTZWxlY3Rpb246ITEsc291cmNlOiJyb3dEYXRhQ2hhbmdlZCJ9KTtjb25zdCB0PXt0eXBlOnMuRXZlbnRzLkVWRU5UX1NFTEVDVElPTl9DSEFOR0VELHNvdXJjZToicm93RGF0YUNoYW5nZWQifTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfX1leGVjdXRlQWRkKGUsdCl7Y29uc3R7YWRkOmksYWRkSW5kZXg6cn09ZTtpZihzLl8ubWlzc2luZ09yRW1wdHkoaSkpcmV0dXJuOyJudW1iZXIiPT10eXBlb2YgciYmcj49MD9pLnJldmVyc2UoKS5mb3JFYWNoKGU9Pntjb25zdCBpPXRoaXMuY3JlYXRlRGF0YU5vZGUoZSxyKTt0LmFkZC5wdXNoKGkpfSk6aS5mb3JFYWNoKGU9Pntjb25zdCBpPXRoaXMuY3JlYXRlRGF0YU5vZGUoZSk7dC5hZGQucHVzaChpKX0pfWV4ZWN1dGVSZW1vdmUoZSx0LGkpe2NvbnN0e3JlbW92ZTpzfT1lO2lmKG51bGw9PXMpcmV0dXJuO2NvbnN0IHI9e307cy5mb3JFYWNoKGU9Pntjb25zdCBzPXRoaXMubG9va3VwUm93Tm9kZShlKTtzJiYocy5pc1NlbGVjdGVkKCkmJmkucHVzaChzKSxzLmNsZWFyUm93VG9wQW5kUm93SW5kZXgoKSxyW3MuaWRdPSEwLGRlbGV0ZSB0aGlzLmFsbE5vZGVzTWFwW3MuaWRdLHQucmVtb3ZlLnB1c2gocyksdGhpcy5ub2RlTWFuYWdlci5yZW1vdmVOb2RlKHMpKX0pLHRoaXMuYWxsUm93Tm9kZXM9dGhpcy5hbGxSb3dOb2Rlcy5maWx0ZXIoZT0+IXJbZS5pZF0pfWV4ZWN1dGVVcGRhdGUoZSx0LGkpe2NvbnN0e3VwZGF0ZTpzfT1lO251bGwhPXMmJnMuZm9yRWFjaChlPT57Y29uc3Qgcz10aGlzLmxvb2t1cFJvd05vZGUoZSk7cyYmKHRoaXMuYmxvY2tVdGlscy51cGRhdGVEYXRhSW50b1Jvd05vZGUocyxlKSwhcy5zZWxlY3RhYmxlJiZzLmlzU2VsZWN0ZWQoKSYmaS5wdXNoKHMpLHQudXBkYXRlLnB1c2gocykpfSl9bG9va3VwUm93Tm9kZShlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJnZXRSb3dJZCIpO2xldCBpO2lmKG51bGwhPXQpe2NvbnN0IHM9dGhpcy5sZXZlbCxyPXRoaXMucGFyZW50Um93Tm9kZS5nZXRHcm91cEtleXMoKSxvPXQoe2RhdGE6ZSxwYXJlbnRLZXlzOnIubGVuZ3RoPjA/cjp2b2lkIDAsbGV2ZWw6c30pO2lmKGk9dGhpcy5hbGxOb2Rlc01hcFtvXSwhaSlyZXR1cm4gY29uc29sZS5lcnJvcihgQUcgR3JpZDogY291bGQgbm90IGZpbmQgcm93IGlkPSR7b30sIGRhdGEgaXRlbSB3YXMgbm90IGZvdW5kIGZvciB0aGlzIGlkYCksbnVsbH1lbHNlIGlmKGk9dGhpcy5hbGxSb3dOb2Rlcy5maW5kKHQ9PnQuZGF0YT09PWUpLCFpKXJldHVybiBjb25zb2xlLmVycm9yKCJBRyBHcmlkOiBjb3VsZCBub3QgZmluZCBkYXRhIGl0ZW0gYXMgb2JqZWN0IHdhcyBub3QgZm91bmQiLGUpLG51bGw7cmV0dXJuIGl9YWRkU3RvcmVTdGF0ZXMoZSl7ZS5wdXNoKHtzdXBwcmVzc0luZmluaXRlU2Nyb2xsOiEwLHJvdXRlOnRoaXMucGFyZW50Um93Tm9kZS5nZXRHcm91cEtleXMoKSxyb3dDb3VudDp0aGlzLmFsbFJvd05vZGVzLmxlbmd0aCxpbmZvOnRoaXMuaW5mb30pLHRoaXMuZm9yRWFjaENoaWxkU3RvcmVTaGFsbG93KHQ9PnQuYWRkU3RvcmVTdGF0ZXMoZSkpfXJlZnJlc2hTdG9yZShlKXtpZihlKXtjb25zdCBlPXRoaXMubm9kZXNBZnRlclNvcnQ/dGhpcy5ub2Rlc0FmdGVyU29ydC5sZW5ndGg6MTt0aGlzLmluaXRpYWxpc2VSb3dOb2RlcyhlKX10aGlzLnNjaGVkdWxlTG9hZCgpLHRoaXMuZmlyZVN0b3JlVXBkYXRlZEV2ZW50KCl9cmV0cnlMb2Fkcygpe3RoaXMuZ2V0U3RhdGUoKT09PXMuUm93Tm9kZUJsb2NrLlNUQVRFX0ZBSUxFRCYmKHRoaXMuaW5pdGlhbGlzZVJvd05vZGVzKDEpLHRoaXMuc2NoZWR1bGVMb2FkKCkpLHRoaXMuZm9yRWFjaENoaWxkU3RvcmVTaGFsbG93KGU9PmUucmV0cnlMb2FkcygpKX1zY2hlZHVsZUxvYWQoKXt0aGlzLnNldFN0YXRlV2FpdGluZ1RvTG9hZCgpLHRoaXMucm93Tm9kZUJsb2NrTG9hZGVyLmNoZWNrQmxvY2tUb0xvYWQoKX1maXJlU3RvcmVVcGRhdGVkRXZlbnQoKXtjb25zdCBlPXt0eXBlOnMuRXZlbnRzLkVWRU5UX1NUT1JFX1VQREFURUR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoZSl9Z2V0Um93Q291bnQoKXtyZXR1cm4gdGhpcy5ub2Rlc0FmdGVyU29ydC5sZW5ndGh9Z2V0VG9wTGV2ZWxSb3dEaXNwbGF5ZWRJbmRleChlKXtyZXR1cm4gdGhpcy5ub2Rlc0FmdGVyU29ydFtlXS5yb3dJbmRleH1pc0xhc3RSb3dJbmRleEtub3duKCl7cmV0dXJuIHRoaXMuZ2V0U3RhdGUoKT09cy5Sb3dOb2RlQmxvY2suU1RBVEVfTE9BREVEfWdldFJvd05vZGVzSW5SYW5nZShlLHQpe2NvbnN0IGk9W107bGV0IHI9ITE7cy5fLm1pc3NpbmcoZSkmJihyPSEwKSx0aGlzLm5vZGVzQWZ0ZXJTb3J0LmZvckVhY2gocz0+e2NvbnN0IG89cz09PWV8fHM9PT10OyhyfHxvKSYmaS5wdXNoKHMpLG8mJihyPSFyKX0pO3JldHVybiByP1tdOml9Z2V0U3RvcmVCb3VuZHMoKXtyZXR1cm57dG9wUHg6dGhpcy50b3BQeCxoZWlnaHRQeDp0aGlzLmhlaWdodFB4fX19byhbT2JqZWN0KHMuQXV0b3dpcmVkKSgic3NybVN0b3JlVXRpbHMiKV0sbi5wcm90b3R5cGUsInN0b3JlVXRpbHMiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgic3NybUJsb2NrVXRpbHMiKV0sbi5wcm90b3R5cGUsImJsb2NrVXRpbHMiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sbi5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoInJvd05vZGVCbG9ja0xvYWRlciIpXSxuLnByb3RvdHlwZSwicm93Tm9kZUJsb2NrTG9hZGVyIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoInJvd05vZGVTb3J0ZXIiKV0sbi5wcm90b3R5cGUsInJvd05vZGVTb3J0ZXIiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgic29ydENvbnRyb2xsZXIiKV0sbi5wcm90b3R5cGUsInNvcnRDb250cm9sbGVyIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoInNlbGVjdGlvblNlcnZpY2UiKV0sbi5wcm90b3R5cGUsInNlbGVjdGlvblNlcnZpY2UiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgic3NybU5vZGVNYW5hZ2VyIildLG4ucHJvdG90eXBlLCJub2RlTWFuYWdlciIsdm9pZCAwKSxvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmaWx0ZXJNYW5hZ2VyIildLG4ucHJvdG90eXBlLCJmaWx0ZXJNYW5hZ2VyIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoInNzcm1UcmFuc2FjdGlvbk1hbmFnZXIiKV0sbi5wcm90b3R5cGUsInRyYW5zYWN0aW9uTWFuYWdlciIsdm9pZCAwKSxvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dNb2RlbCIpXSxuLnByb3RvdHlwZSwic2VydmVyU2lkZVJvd01vZGVsIix2b2lkIDApLG8oW3MuUG9zdENvbnN0cnVjdF0sbi5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLG8oW3MuUHJlRGVzdHJveV0sbi5wcm90b3R5cGUsImRlc3Ryb3lSb3dOb2RlcyIsbnVsbCk7dmFyIGE9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgbCBleHRlbmRzIHMuQmVhblN0dWJ7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKCksdGhpcy5sb2FkaW5nTm9kZXM9bmV3IFNldCx0aGlzLmNoZWNrRm9yTG9hZFF1ZXVlZD0hMSx0aGlzLmxvYWRlclRpbWVvdXQ9dm9pZCAwLHRoaXMubmV4dEJsb2NrVG9Mb2FkPXZvaWQgMCx0aGlzLnBhcmVudE5vZGU9dCx0aGlzLmNhY2hlPWUsdGhpcy5zdG9yZVBhcmFtcz1pfWluaXQoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnJvd05vZGVCbG9ja0xvYWRlcixzLlJvd05vZGVCbG9ja0xvYWRlci5CTE9DS19MT0FERURfRVZFTlQsKCk9PnRoaXMucXVldWVMb2FkQWN0aW9uKCkpfWlzUm93TG9hZGluZyhlKXtyZXR1cm4gdGhpcy5sb2FkaW5nTm9kZXMuaGFzKGUpfWdldEJsb2NrVG9Mb2FkKCl7dmFyIGU7Y29uc3QgdD10aGlzLmFwaS5nZXRGaXJzdERpc3BsYXllZFJvd0luZGV4KCksaT10aGlzLmFwaS5nZXRMYXN0RGlzcGxheWVkUm93SW5kZXgoKTtmb3IobGV0IGU9dDtlPD1pO2UrKyl7Y29uc3QgdD10aGlzLmNhY2hlLmdldE5vZGVDYWNoZWRCeURpc3BsYXlJbmRleChlKTtpZighdCljb250aW51ZTtjb25zdCBpPXRoaXMuY2FjaGUuZ2V0Tm9kZXMoKS5nZXRCeSgibm9kZSIsdCk7aWYoaSYmKCF0aGlzLmlzUm93TG9hZGluZyhpLmluZGV4KSYmKHQuX19uZWVkc1JlZnJlc2hXaGVuVmlzaWJsZXx8dC5zdHViJiYhdC5mYWlsZWRMb2FkKSkpcmV0dXJuIHRoaXMuZ2V0QmxvY2tTdGFydEluZGV4Rm9ySW5kZXgoaS5pbmRleCl9Y29uc3Qgcz10aGlzLmNhY2hlLmdldE5vZGVzVG9SZWZyZXNoKCk7bGV0IHI9bnVsbCxvPU51bWJlci5NQVhfU0FGRV9JTlRFR0VSO3MuZm9yRWFjaChlPT57aWYobnVsbD09ZS5yb3dJbmRleClyZXR1cm4gdm9pZChyPWUpO2lmKHRoaXMuaXNSb3dMb2FkaW5nKGUucm93SW5kZXgpKXJldHVybjtjb25zdCBzPU1hdGguYWJzKHQtZS5yb3dJbmRleCksbj1NYXRoLmFicyhlLnJvd0luZGV4LWkpO3M8byYmKHI9ZSxvPXMpLG48byYmKHI9ZSxvPW4pfSk7Y29uc3Qgbj1udWxsPT09KGU9dGhpcy5jYWNoZS5nZXROb2RlcygpLmdldEJ5KCJub2RlIixyKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuaW5kZXg7cmV0dXJuIG51bGw9PW4/dm9pZCAwOnRoaXMuZ2V0QmxvY2tTdGFydEluZGV4Rm9ySW5kZXgobil9cmVzZXQoKXt0aGlzLmxvYWRpbmdOb2Rlcy5jbGVhcigpLGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVvdXQpLHRoaXMubG9hZGVyVGltZW91dD12b2lkIDB9ZXhlY3V0ZUxvYWQoZSx0KXt2YXIgaTtjb25zdCBzPXRoaXMuY2FjaGUuZ2V0U3NybVBhcmFtcygpLHI9e3N0YXJ0Um93OmUsZW5kUm93OnQscm93R3JvdXBDb2xzOnMucm93R3JvdXBDb2xzLHZhbHVlQ29sczpzLnZhbHVlQ29scyxwaXZvdENvbHM6cy5waXZvdENvbHMscGl2b3RNb2RlOnMucGl2b3RNb2RlLGdyb3VwS2V5czp0aGlzLnBhcmVudE5vZGUuZ2V0R3JvdXBLZXlzKCksZmlsdGVyTW9kZWw6cy5maWx0ZXJNb2RlbCxzb3J0TW9kZWw6cy5zb3J0TW9kZWx9LG89KCk9Pntmb3IobGV0IGk9MDtpPHQtZTtpKyspdGhpcy5sb2FkaW5nTm9kZXMuZGVsZXRlKGUraSl9LG49dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7cmVxdWVzdDpyLHN1Y2Nlc3M6aT0+e3RoaXMucm93Tm9kZUJsb2NrTG9hZGVyLmxvYWRDb21wbGV0ZSgpLHRoaXMuY2FjaGUub25Mb2FkU3VjY2VzcyhlLHQtZSxpKSxvKCksdGhpcy5xdWV1ZUxvYWRBY3Rpb24oKX0sZmFpbDooKT0+e3RoaXMucm93Tm9kZUJsb2NrTG9hZGVyLmxvYWRDb21wbGV0ZSgpLHRoaXMuY2FjaGUub25Mb2FkRmFpbGVkKGUsdC1lKSxvKCksdGhpcy5xdWV1ZUxvYWRBY3Rpb24oKX0scGFyZW50Tm9kZTp0aGlzLnBhcmVudE5vZGV9KTsoKCk9Pntmb3IobGV0IGk9MDtpPHQtZTtpKyspdGhpcy5sb2FkaW5nTm9kZXMuYWRkKGUraSl9KSgpLG51bGw9PT0oaT10aGlzLmNhY2hlLmdldFNzcm1QYXJhbXMoKS5kYXRhc291cmNlKXx8dm9pZCAwPT09aXx8aS5nZXRSb3dzKG4pfWdldE5leHRCbG9ja1RvTG9hZCgpe2NvbnN0IGU9dGhpcy5nZXRCbG9ja1RvTG9hZCgpO3JldHVybiBudWxsIT1lP1tTdHJpbmcoZSksZSt0aGlzLmdldEJsb2NrU2l6ZSgpXTpudWxsfXF1ZXVlTG9hZENoZWNrKCl7dGhpcy5jaGVja0ZvckxvYWRRdWV1ZWR8fCh0aGlzLmNoZWNrRm9yTG9hZFF1ZXVlZD0hMCx3aW5kb3cucXVldWVNaWNyb3Rhc2soKCk9Pnt0aGlzLmNoZWNrRm9yTG9hZFF1ZXVlZD0hMSx0aGlzLnF1ZXVlTG9hZEFjdGlvbigpfSkpfXF1ZXVlTG9hZEFjdGlvbigpe2NvbnN0IGU9dGhpcy5nZXROZXh0QmxvY2tUb0xvYWQoKTtpZighZSlyZXR1cm4gd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVvdXQpLHRoaXMubG9hZGVyVGltZW91dD12b2lkIDAsdm9pZCh0aGlzLm5leHRCbG9ja1RvTG9hZD12b2lkIDApO2lmKCF0aGlzLm5leHRCbG9ja1RvTG9hZHx8dGhpcy5uZXh0QmxvY2tUb0xvYWRbMF0hPT1lWzBdJiZ0aGlzLm5leHRCbG9ja1RvTG9hZFsxXSE9PWVbMV0pe3RoaXMubmV4dEJsb2NrVG9Mb2FkPWUsd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVvdXQpO2NvbnN0W3QsaV09dGhpcy5uZXh0QmxvY2tUb0xvYWQscz1OdW1iZXIodCk7dGhpcy5sb2FkZXJUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KCgpPT57dGhpcy5jYWNoZS5pc0FsaXZlKCkmJih0aGlzLmxvYWRlclRpbWVvdXQ9dm9pZCAwLHRoaXMuYXR0ZW1wdExvYWQocyxpKSx0aGlzLm5leHRCbG9ja1RvTG9hZD12b2lkIDApfSx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImJsb2NrTG9hZERlYm91bmNlTWlsbGlzIikpfX1hdHRlbXB0TG9hZChlLHQpe2NvbnN0IGk9dGhpcy5yb3dOb2RlQmxvY2tMb2FkZXIuZ2V0QXZhaWxhYmxlTG9hZGluZ0NvdW50KCk7bnVsbCE9aSYmMD09PWl8fCh0aGlzLnJvd05vZGVCbG9ja0xvYWRlci5yZWdpc3RlckxvYWRzKDEpLHRoaXMuZXhlY3V0ZUxvYWQoZSx0KSx0aGlzLnF1ZXVlTG9hZEFjdGlvbigpKX1nZXRCbG9ja1NpemUoKXtyZXR1cm4gdGhpcy5zdG9yZVBhcmFtcy5jYWNoZUJsb2NrU2l6ZXx8bC5ERUZBVUxUX0JMT0NLX1NJWkV9Z2V0QmxvY2tTdGFydEluZGV4Rm9ySW5kZXgoZSl7cmV0dXJuIGUtZSV0aGlzLmdldEJsb2NrU2l6ZSgpfWdldEJsb2NrQm91bmRzRm9ySW5kZXgoZSl7Y29uc3QgdD10aGlzLmdldEJsb2NrU3RhcnRJbmRleEZvckluZGV4KGUpO3JldHVyblt0LHQrdGhpcy5nZXRCbG9ja1NpemUoKV19fWwuREVGQVVMVF9CTE9DS19TSVpFPTEwMCxhKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJncmlkQXBpIildLGwucHJvdG90eXBlLCJhcGkiLHZvaWQgMCksYShbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93Tm9kZUJsb2NrTG9hZGVyIildLGwucHJvdG90eXBlLCJyb3dOb2RlQmxvY2tMb2FkZXIiLHZvaWQgMCksYShbcy5Qb3N0Q29uc3RydWN0XSxsLnByb3RvdHlwZSwiaW5pdCIsbnVsbCk7Y2xhc3MgZHtjb25zdHJ1Y3RvciguLi5lKXtpZihlLmxlbmd0aDwxKXRocm93IG5ldyBFcnJvcigiQUcgR3JpZDogQXQgbGVhc3Qgb25lIGluZGV4IG11c3QgYmUgcHJvdmlkZWQuIik7dGhpcy5pbmRleGVzPWUsdGhpcy5tYXBzPW5ldyBNYXAodGhpcy5pbmRleGVzLm1hcChlPT5bZSxuZXcgTWFwXSkpfWdldFNpemUoKXtyZXR1cm4gdGhpcy5tYXBzLmdldCh0aGlzLmluZGV4ZXNbMF0pLnNpemV9Z2V0QnkoZSx0KXtjb25zdCBpPXRoaXMubWFwcy5nZXQoZSk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKGBBRyBHcmlkOiAke1N0cmluZyhlKX0gbm90IGZvdW5kYCk7cmV0dXJuIGkuZ2V0KHQpfXNldChlKXt0aGlzLmluZGV4ZXMuZm9yRWFjaCh0PT57Y29uc3QgaT10aGlzLm1hcHMuZ2V0KHQpO2lmKCFpKXRocm93IG5ldyBFcnJvcihgQUcgR3JpZDogJHtTdHJpbmcodCl9IG5vdCBmb3VuZGApO2kuc2V0KGVbdF0sZSl9KX1kZWxldGUoZSl7dGhpcy5pbmRleGVzLmZvckVhY2godD0+e2NvbnN0IGk9dGhpcy5tYXBzLmdldCh0KTtpZighaSl0aHJvdyBuZXcgRXJyb3IoYEFHIEdyaWQ6ICR7U3RyaW5nKHQpfSBub3QgZm91bmRgKTtpLmRlbGV0ZShlW3RdKX0pfWNsZWFyKCl7dGhpcy5tYXBzLmZvckVhY2goZT0+ZS5jbGVhcigpKX1nZXRJdGVyYXRvcihlKXtjb25zdCB0PXRoaXMubWFwcy5nZXQoZSk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKGBBRyBHcmlkOiAke1N0cmluZyhlKX0gbm90IGZvdW5kYCk7cmV0dXJuIHQudmFsdWVzKCl9Zm9yRWFjaChlKXtjb25zdCB0PXRoaXMuZ2V0SXRlcmF0b3IodGhpcy5pbmRleGVzWzBdKTtsZXQgaTtmb3IoOyhpPXQubmV4dCgpKSYmIWkuZG9uZTspZShpLnZhbHVlKX1maW5kKGUpe2NvbnN0IHQ9dGhpcy5nZXRJdGVyYXRvcih0aGlzLmluZGV4ZXNbMF0pO2xldCBpO2Zvcig7KGk9dC5uZXh0KCkpJiYhaS5kb25lOylpZihlKGkudmFsdWUpKXJldHVybiBpLnZhbHVlfWZpbHRlcihlKXtjb25zdCB0PXRoaXMuZ2V0SXRlcmF0b3IodGhpcy5pbmRleGVzWzBdKTtsZXQgaTtjb25zdCBzPVtdO2Zvcig7KGk9dC5uZXh0KCkpJiYhaS5kb25lOyllKGkudmFsdWUpJiZzLnB1c2goaS52YWx1ZSk7cmV0dXJuIHN9fXZhciBjPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGggZXh0ZW5kcyBzLkJlYW5TdHVie2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcigpLHRoaXMubGl2ZT0hMCx0aGlzLnJlbW92ZWROb2RlQ2FjaGU9bmV3IE1hcCx0aGlzLnN0b3JlPWUsdGhpcy5udW1iZXJPZlJvd3M9dCx0aGlzLmlzTGFzdFJvd0tub3duPSExLHRoaXMuc3RvcmVQYXJhbXM9aX1pbml0KCl7dGhpcy5ub2RlTWFwPW5ldyBkKCJpbmRleCIsImlkIiwibm9kZSIpLHRoaXMubm9kZURpc3BsYXlJbmRleE1hcD1uZXcgTWFwLHRoaXMubm9kZXNUb1JlZnJlc2g9bmV3IFNldCx0aGlzLmRlZmF1bHROb2RlSWRQcmVmaXg9dGhpcy5ibG9ja1V0aWxzLmNyZWF0ZU5vZGVJZFByZWZpeCh0aGlzLnN0b3JlLmdldFBhcmVudE5vZGUoKSksdGhpcy5yb3dMb2FkZXI9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgbCh0aGlzLHRoaXMuc3RvcmUuZ2V0UGFyZW50Tm9kZSgpLHRoaXMuc3RvcmVQYXJhbXMpKSx0aGlzLmdldFJvd0lkRnVuYz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiZ2V0Um93SWQiKSx0aGlzLmlzTWFzdGVyRGV0YWlsPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgibWFzdGVyRGV0YWlsIil9ZGVzdHJveVJvd05vZGVzKCl7dGhpcy5udW1iZXJPZlJvd3M9MCx0aGlzLm5vZGVNYXAuZm9yRWFjaChlPT50aGlzLmJsb2NrVXRpbHMuZGVzdHJveVJvd05vZGUoZS5ub2RlKSksdGhpcy5ub2RlTWFwLmNsZWFyKCksdGhpcy5ub2RlRGlzcGxheUluZGV4TWFwLmNsZWFyKCksdGhpcy5ub2Rlc1RvUmVmcmVzaC5jbGVhcigpLHRoaXMubGl2ZT0hMX1nZXRSb3dCeURpc3BsYXlJbmRleChlKXt2YXIgdCxpLHMscjtpZighdGhpcy5zdG9yZS5pc0Rpc3BsYXlJbmRleEluU3RvcmUoZSkpcmV0dXJuO2NvbnN0IG89dGhpcy5ub2RlRGlzcGxheUluZGV4TWFwLmdldChlKTtpZihvKXJldHVybihvLnN0dWJ8fG8uX19uZWVkc1JlZnJlc2hXaGVuVmlzaWJsZSkmJnRoaXMucm93TG9hZGVyLnF1ZXVlTG9hZENoZWNrKCksbztpZihlPT09dGhpcy5zdG9yZS5nZXREaXNwbGF5SW5kZXhTdGFydCgpKXJldHVybiB0aGlzLmNyZWF0ZVN0dWJOb2RlKDAsZSk7Y29uc3Qgbj10aGlzLm5vZGVEaXNwbGF5SW5kZXhNYXAuZ2V0KGUtMSk7aWYobil7aWYodGhpcy5pc01hc3RlckRldGFpbCYmbi5tYXN0ZXImJm4uZXhwYW5kZWQpcmV0dXJuIG4uZGV0YWlsTm9kZTtpZihuLmV4cGFuZGVkJiYobnVsbD09PSh0PW4uY2hpbGRTdG9yZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaXNEaXNwbGF5SW5kZXhJblN0b3JlKGUpKSlyZXR1cm4gbnVsbD09PShpPW4uY2hpbGRTdG9yZSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZ2V0Um93VXNpbmdEaXNwbGF5SW5kZXgoZSk7Y29uc3Qgcz10aGlzLm5vZGVNYXAuZ2V0QnkoIm5vZGUiLG4pO3JldHVybiB0aGlzLmNyZWF0ZVN0dWJOb2RlKHMuaW5kZXgrMSxlKX1jb25zdCBhPXRoaXMuZ2V0U3Vycm91bmRpbmdOb2Rlc0J5RGlzcGxheUluZGV4KGUpO2lmKG51bGw9PWEpe2NvbnN0IHQ9dGhpcy5zdG9yZS5nZXRSb3dDb3VudCgpLSh0aGlzLnN0b3JlLmdldERpc3BsYXlJbmRleEVuZCgpLWUpO3JldHVybiB0aGlzLmNyZWF0ZVN0dWJOb2RlKHQsZSl9Y29uc3R7cHJldmlvdXNOb2RlOmwsbmV4dE5vZGU6ZH09YTtpZihsJiZsLm5vZGUuZXhwYW5kZWQmJihudWxsPT09KHM9bC5ub2RlLmNoaWxkU3RvcmUpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmlzRGlzcGxheUluZGV4SW5TdG9yZShlKSkpcmV0dXJuIG51bGw9PT0ocj1sLm5vZGUuY2hpbGRTdG9yZSl8fHZvaWQgMD09PXI/dm9pZCAwOnIuZ2V0Um93VXNpbmdEaXNwbGF5SW5kZXgoZSk7aWYoZCl7Y29uc3QgdD1kLm5vZGUucm93SW5kZXgtZSxpPWQuaW5kZXgtdDtyZXR1cm4gdGhpcy5jcmVhdGVTdHViTm9kZShpLGUpfWNvbnN0IGM9dGhpcy5zdG9yZS5nZXRSb3dDb3VudCgpLSh0aGlzLnN0b3JlLmdldERpc3BsYXlJbmRleEVuZCgpLWUpO3JldHVybiB0aGlzLmNyZWF0ZVN0dWJOb2RlKGMsZSl9Y3JlYXRlU3R1Yk5vZGUoZSx0KXtjb25zdCBpPXRoaXMuc3RvcmUuZ2V0Um93Qm91bmRzKHQpLHM9dGhpcy5jcmVhdGVSb3dBdEluZGV4KGUsbnVsbCxlPT57ZS5zZXRSb3dJbmRleCh0KSxlLnNldFJvd1RvcChpLnJvd1RvcCksdGhpcy5ub2RlRGlzcGxheUluZGV4TWFwLnNldCh0LGUpfSk7cmV0dXJuIHRoaXMucm93TG9hZGVyLnF1ZXVlTG9hZENoZWNrKCksc31nZXRSb3dCeVN0b3JlSW5kZXgoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD10aGlzLm5vZGVNYXAuZ2V0QnkoImluZGV4IixlKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubm9kZX1za2lwRGlzcGxheUluZGV4ZXMoZSx0LGkpe2lmKDA9PT1lKXJldHVybjtjb25zdCBzPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFJvd0hlaWdodEFzTnVtYmVyKCk7dC5za2lwKGUpLGkudmFsdWUrPWUqc31zZXREaXNwbGF5SW5kZXhlcyhlLHQpe3RoaXMubm9kZURpc3BsYXlJbmRleE1hcC5jbGVhcigpO2NvbnN0IGk9e307dGhpcy5ub2RlTWFwLmZvckVhY2goZT0+e2lbZS5pbmRleF09ZS5ub2RlfSk7bGV0IHM9LTE7Zm9yKGNvbnN0IHIgaW4gaSl7Y29uc3Qgbz1pW3JdLG49TnVtYmVyKHIpLGE9bi0xLXM7dGhpcy5za2lwRGlzcGxheUluZGV4ZXMoYSxlLHQpLHRoaXMuYmxvY2tVdGlscy5zZXREaXNwbGF5SW5kZXgobyxlLHQpLHRoaXMubm9kZURpc3BsYXlJbmRleE1hcC5zZXQoby5yb3dJbmRleCxvKSxzPW59Y29uc3Qgcj10aGlzLm51bWJlck9mUm93cy0xLXM7dGhpcy5za2lwRGlzcGxheUluZGV4ZXMocixlLHQpLHRoaXMucHVyZ2VFeGNlc3NSb3dzKCl9Z2V0Um93Q291bnQoKXtyZXR1cm4gdGhpcy5udW1iZXJPZlJvd3N9c2V0Um93Q291bnQoZSx0KXtpZihlPDApdGhyb3cgbmV3IEVycm9yKCJBRyBHcmlkOiBzZXRSb3dDb3VudCBjYW4gb25seSBhY2NlcHQgYSBwb3NpdGl2ZSByb3cgY291bnQuIik7dGhpcy5udW1iZXJPZlJvd3M9ZSxudWxsIT10JiYodGhpcy5pc0xhc3RSb3dLbm93bj10LCExPT09dCYmKHRoaXMubnVtYmVyT2ZSb3dzKz0xKSksdGhpcy5maXJlU3RvcmVVcGRhdGVkRXZlbnQoKX1nZXROb2Rlcygpe3JldHVybiB0aGlzLm5vZGVNYXB9Z2V0Tm9kZUNhY2hlZEJ5RGlzcGxheUluZGV4KGUpe3ZhciB0O3JldHVybiBudWxsIT09KHQ9dGhpcy5ub2RlRGlzcGxheUluZGV4TWFwLmdldChlKSkmJnZvaWQgMCE9PXQ/dDpudWxsfWdldE5vZGVzVG9SZWZyZXNoKCl7cmV0dXJuIHRoaXMubm9kZXNUb1JlZnJlc2h9Z2V0U3Vycm91bmRpbmdOb2Rlc0J5RGlzcGxheUluZGV4KGUpe2xldCB0LGk7cmV0dXJuIHRoaXMubm9kZU1hcC5mb3JFYWNoKHM9PntlPnMubm9kZS5yb3dJbmRleD8obnVsbD09aXx8aS5ub2RlLnJvd0luZGV4PHMubm9kZS5yb3dJbmRleCkmJihpPXMpOihudWxsPT10fHx0Lm5vZGUucm93SW5kZXg+cy5ub2RlLnJvd0luZGV4KSYmKHQ9cyl9KSxpfHx0P3twcmV2aW91c05vZGU6aSxuZXh0Tm9kZTp0fTpudWxsfWdldERpc3BsYXlJbmRleEZyb21TdG9yZUluZGV4KGUpe3ZhciB0LGk7Y29uc3Qgcz10aGlzLm5vZGVNYXAuZ2V0QnkoImluZGV4IixlKTtpZihzKXJldHVybiBzLm5vZGUucm93SW5kZXg7bGV0IHIsbztpZih0aGlzLm5vZGVNYXAuZm9yRWFjaCh0PT57ZT50LmluZGV4PyhudWxsPT1vfHxvLmluZGV4PHQuaW5kZXgpJiYobz10KToobnVsbD09cnx8ci5pbmRleD50LmluZGV4KSYmKHI9dCl9KSwhcilyZXR1cm4gdGhpcy5zdG9yZS5nZXREaXNwbGF5SW5kZXhFbmQoKS0odGhpcy5udW1iZXJPZlJvd3MtZSk7aWYoIW8pcmV0dXJuIHRoaXMuc3RvcmUuZ2V0RGlzcGxheUluZGV4U3RhcnQoKStlO2NvbnN0IG49ZS1vLmluZGV4O3JldHVybihudWxsIT09KGk9bnVsbD09PSh0PW8ubm9kZS5jaGlsZFN0b3JlKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXREaXNwbGF5SW5kZXhFbmQoKSkmJnZvaWQgMCE9PWk/aTpvLm5vZGUucm93SW5kZXgpK259Y3JlYXRlUm93QXRJbmRleChlLHQsaSl7dmFyIHMscjtjb25zdCBvPXRoaXMubm9kZU1hcC5nZXRCeSgiaW5kZXgiLGUpO2lmKG8pe2NvbnN0e25vZGU6aX09bztpZihpLl9fbmVlZHNSZWZyZXNoV2hlblZpc2libGU9ITEsdGhpcy5kb2VzTm9kZU1hdGNoKHQsaSkpcmV0dXJuIHRoaXMuYmxvY2tVdGlscy51cGRhdGVEYXRhSW50b1Jvd05vZGUoaSx0KSx0aGlzLm5vZGVzVG9SZWZyZXNoLmRlbGV0ZShpKSxpO2lmKG51bGw9PXRoaXMuZ2V0Um93SWRGdW5jJiZpLmhhc0NoaWxkcmVuKCkmJmkuZXhwYW5kZWQpcmV0dXJuIHRoaXMubm9kZXNUb1JlZnJlc2guZGVsZXRlKGkpLGk7dGhpcy5kZXN0cm95Um93QXRJbmRleChlKX1pZih0JiZudWxsIT10aGlzLmdldFJvd0lkRnVuYyl7Y29uc3QgaT10aGlzLmdldFJvd0lkKHQpLG89aSYmKG51bGw9PT0ocz10aGlzLnJlbW92ZWROb2RlQ2FjaGUpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmdldChpKSk7aWYobylyZXR1cm4gbnVsbD09PShyPXRoaXMucmVtb3ZlZE5vZGVDYWNoZSl8fHZvaWQgMD09PXJ8fHIuZGVsZXRlKGkpLHRoaXMuYmxvY2tVdGlscy51cGRhdGVEYXRhSW50b1Jvd05vZGUobyx0KSx0aGlzLm5vZGVNYXAuc2V0KHtpZDpvLmlkLG5vZGU6byxpbmRleDplfSksbztjb25zdCBuPXRoaXMubm9kZU1hcC5nZXRCeSgiaWQiLGkpO2lmKG4pe3RoaXMubm9kZU1hcC5kZWxldGUobik7Y29uc3R7bm9kZTppLGluZGV4OnN9PW47cmV0dXJuIHRoaXMuYmxvY2tVdGlscy51cGRhdGVEYXRhSW50b1Jvd05vZGUoaSx0KSx0aGlzLm5vZGVNYXAuc2V0KHtpZDppLmlkLG5vZGU6aSxpbmRleDplfSksdGhpcy5ub2Rlc1RvUmVmcmVzaC5kZWxldGUoaSksdGhpcy5yb3dMb2FkZXIuZ2V0QmxvY2tTdGFydEluZGV4Rm9ySW5kZXgocyk9PT10aGlzLnJvd0xvYWRlci5nZXRCbG9ja1N0YXJ0SW5kZXhGb3JJbmRleChlKT9pOih0aGlzLm1hcmtCbG9ja0ZvclZlcmlmeShzKSxpKX19Y29uc3Qgbj10aGlzLmJsb2NrVXRpbHMuY3JlYXRlUm93Tm9kZSh0aGlzLnN0b3JlLmdldFJvd0RldGFpbHMoKSk7aWYobnVsbCE9dCl7Y29uc3QgZT10aGlzLmdldFByZWZpeGVkSWQodGhpcy5zdG9yZS5nZXRJZFNlcXVlbmNlKCkubmV4dCgpKTt0aGlzLmJsb2NrVXRpbHMuc2V0RGF0YUludG9Sb3dOb2RlKG4sdCxlLHZvaWQgMCksdGhpcy5ibG9ja1V0aWxzLmNoZWNrT3BlbkJ5RGVmYXVsdChuKSx0aGlzLm5vZGVNYW5hZ2VyLmFkZFJvd05vZGUobil9cmV0dXJuIHRoaXMubm9kZU1hcC5zZXQoe2lkOm4uaWQsbm9kZTpuLGluZGV4OmV9KSxpJiZpKG4pLG59Z2V0QmxvY2tTdGF0ZXMoKXtjb25zdCBlPXt9LHQ9e307dGhpcy5ub2RlTWFwLmZvckVhY2goKHtub2RlOmksaW5kZXg6c30pPT57dmFyIHI7Y29uc3Qgbz10aGlzLnJvd0xvYWRlci5nZXRCbG9ja1N0YXJ0SW5kZXhGb3JJbmRleChzKTtpLnN0dWJ8fGkuZmFpbGVkTG9hZHx8KGVbb109KG51bGwhPT0ocj1lW29dKSYmdm9pZCAwIT09cj9yOjApKzEpO2xldCBuPSJsb2FkZWQiO2kuZmFpbGVkTG9hZD9uPSJmYWlsZWQiOnRoaXMucm93TG9hZGVyLmlzUm93TG9hZGluZyhvKT9uPSJsb2FkaW5nIjoodGhpcy5ub2Rlc1RvUmVmcmVzaC5oYXMoaSl8fGkuc3R1YikmJihuPSJuZWVkc0xvYWRpbmciKSx0W29dfHwodFtvXT1uZXcgU2V0KSx0W29dLmFkZChuKX0pO2NvbnN0IGk9e2xvYWRpbmc6NCxmYWlsZWQ6MyxuZWVkc0xvYWRpbmc6Mixsb2FkZWQ6MX0scz10aGlzLmJsb2NrVXRpbHMuY3JlYXRlTm9kZUlkUHJlZml4KHRoaXMuc3RvcmUuZ2V0UGFyZW50Tm9kZSgpKSxyPXt9O3JldHVybiBPYmplY3QuZW50cmllcyh0KS5mb3JFYWNoKChbdCxvXSk9Pnt2YXIgbjtjb25zdCBhPVsuLi5vXS5zb3J0KChlLHQpPT57dmFyIHMscjtyZXR1cm4obnVsbCE9PShzPWlbZV0pJiZ2b2lkIDAhPT1zP3M6MCktKG51bGwhPT0ocj1pW3RdKSYmdm9pZCAwIT09cj9yOjApfSlbMF0sbD1OdW1iZXIodCkvdGhpcy5yb3dMb2FkZXIuZ2V0QmxvY2tTaXplKCksZD1zP2Ake3N9LSR7bH1gOlN0cmluZyhsKTtyW2RdPXtibG9ja051bWJlcjpsLHN0YXJ0Um93Ok51bWJlcih0KSxlbmRSb3c6TnVtYmVyKHQpK3RoaXMucm93TG9hZGVyLmdldEJsb2NrU2l6ZSgpLHBhZ2VTdGF0dXM6YSxsb2FkZWRSb3dDb3VudDpudWxsIT09KG49ZVt0XSkmJnZvaWQgMCE9PW4/bjowfX0pLHJ9ZGVzdHJveVJvd0F0SW5kZXgoZSl7Y29uc3QgdD10aGlzLm5vZGVNYXAuZ2V0QnkoImluZGV4IixlKTt0JiYodGhpcy5ub2RlTWFwLmRlbGV0ZSh0KSx0aGlzLm5vZGVEaXNwbGF5SW5kZXhNYXAuZGVsZXRlKHQubm9kZS5yb3dJbmRleCksdGhpcy5ub2Rlc1RvUmVmcmVzaC5zaXplPjA/dGhpcy5yZW1vdmVkTm9kZUNhY2hlLnNldCh0Lm5vZGUuaWQsdC5ub2RlKTp0aGlzLmJsb2NrVXRpbHMuZGVzdHJveVJvd05vZGUodC5ub2RlKSx0aGlzLm5vZGVzVG9SZWZyZXNoLmRlbGV0ZSh0Lm5vZGUpKX1nZXRTc3JtUGFyYW1zKCl7cmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3NybVBhcmFtcygpfWdldFByZWZpeGVkSWQoZSl7cmV0dXJuIHRoaXMuZGVmYXVsdE5vZGVJZFByZWZpeD90aGlzLmRlZmF1bHROb2RlSWRQcmVmaXgrIi0iK2U6ZS50b1N0cmluZygpfW1hcmtCbG9ja0ZvclZlcmlmeShlKXtjb25zdFt0LGldPXRoaXMucm93TG9hZGVyLmdldEJsb2NrQm91bmRzRm9ySW5kZXgoZSk7dGhpcy5ub2RlTWFwLmZpbHRlcihlPT5lLmluZGV4Pj10JiZlLmluZGV4PGkpLmZvckVhY2goKHtub2RlOmV9KT0+e2UuX19uZWVkc1JlZnJlc2hXaGVuVmlzaWJsZT0hMH0pfWRvZXNOb2RlTWF0Y2goZSx0KXtpZih0LnN0dWIpcmV0dXJuITE7aWYobnVsbCE9dGhpcy5nZXRSb3dJZEZ1bmMpe2NvbnN0IGk9dGhpcy5nZXRSb3dJZChlKTtyZXR1cm4gdC5pZD09PWl9cmV0dXJuIHQuZGF0YT09PWV9cHVyZ2VTdHVic091dHNpZGVPZlZpZXdwb3J0KCl7Y29uc3QgZT10aGlzLmFwaS5nZXRGaXJzdERpc3BsYXllZFJvd0luZGV4KCksdD10aGlzLmFwaS5nZXRMYXN0RGlzcGxheWVkUm93SW5kZXgoKSxpPXRoaXMucm93TG9hZGVyLmdldEJsb2NrU3RhcnRJbmRleEZvckluZGV4KGUpLFtzLHJdPXRoaXMucm93TG9hZGVyLmdldEJsb2NrQm91bmRzRm9ySW5kZXgodCk7dGhpcy5ub2RlTWFwLmZvckVhY2goZT0+e3RoaXMucm93TG9hZGVyLmlzUm93TG9hZGluZyhlLmluZGV4KXx8ZS5ub2RlLmZhaWxlZExvYWR8fGUubm9kZS5zdHViJiYoZS5pbmRleDxpfHxlLmluZGV4PnIpJiZ0aGlzLmRlc3Ryb3lSb3dBdEluZGV4KGUuaW5kZXgpfSl9Z2V0QmxvY2tzRGlzdGFuY2VGcm9tUm93KGUsdCl7Y29uc3QgaT17fTtyZXR1cm4gZS5mb3JFYWNoKCh7bm9kZTplLGluZGV4OnN9KT0+e2NvbnN0W3Isb109dGhpcy5yb3dMb2FkZXIuZ2V0QmxvY2tCb3VuZHNGb3JJbmRleChzKTtpZihyIGluIGkpcmV0dXJuO2NvbnN0IG49TWF0aC5hYnMoZS5yb3dJbmRleC10KTtsZXQgYTtjb25zdCBsPXRoaXMubm9kZU1hcC5nZXRCeSgiaW5kZXgiLFtvLTFdKTtsJiYoYT1NYXRoLmFicyhsLm5vZGUucm93SW5kZXgtdCkpO2NvbnN0IGQ9bnVsbD09YXx8bjxhP246YTtpW3JdPWR9KSxPYmplY3QuZW50cmllcyhpKX1wdXJnZUV4Y2Vzc1Jvd3MoKXt2YXIgZTtpZih0aGlzLnB1cmdlU3R1YnNPdXRzaWRlT2ZWaWV3cG9ydCgpLG51bGw9PXRoaXMuc3RvcmUuZ2V0RGlzcGxheUluZGV4RW5kKCl8fG51bGw9PXRoaXMuc3RvcmVQYXJhbXMubWF4QmxvY2tzSW5DYWNoZSlyZXR1cm47Y29uc3QgdD10aGlzLmFwaS5nZXRGaXJzdERpc3BsYXllZFJvd0luZGV4KCksaT10aGlzLmFwaS5nZXRMYXN0RGlzcGxheWVkUm93SW5kZXgoKSxzPW5ldyBTZXQscj1uZXcgU2V0O3RoaXMubm9kZU1hcC5mb3JFYWNoKCh7aW5kZXg6ZSxub2RlOm99KT0+e2NvbnN0IG49dGhpcy5yb3dMb2FkZXIuZ2V0QmxvY2tTdGFydEluZGV4Rm9ySW5kZXgoZSk7cy5hZGQobik7by5yb3dJbmRleD49dCYmby5yb3dJbmRleDw9aSYmci5hZGQobil9KTtjb25zdCBvPU1hdGgubWF4KHIuc2l6ZSxudWxsIT09KGU9dGhpcy5zdG9yZVBhcmFtcy5tYXhCbG9ja3NJbkNhY2hlKSYmdm9pZCAwIT09ZT9lOjApLG49cy5zaXplLW87aWYobjw9MClyZXR1cm47bGV0IGE9TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsbD1OdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtyLmZvckVhY2goZT0+e2E+ZSYmKGE9ZSksbDxlJiYobD1lKX0pO2NvbnN0IGQ9dGhpcy5ub2RlTWFwLmZpbHRlcigoe25vZGU6ZSxpbmRleDp0fSk9Pntjb25zdCBpPXRoaXMucm93TG9hZGVyLmdldEJsb2NrU3RhcnRJbmRleEZvckluZGV4KHQpO3JldHVybiEoaT49YSYmaTw9bCkmJiF0aGlzLmlzTm9kZUNhY2hlZChlKX0pO2lmKDA9PT1kLmxlbmd0aClyZXR1cm47Y29uc3QgYz10KyhpLXQpLzIsaD10aGlzLmdldEJsb2Nrc0Rpc3RhbmNlRnJvbVJvdyhkLGMpLHU9dGhpcy5yb3dMb2FkZXIuZ2V0QmxvY2tTaXplKCk7aC5zb3J0KChlLHQpPT5NYXRoLnNpZ24odFsxXS1lWzFdKSk7Zm9yKGxldCBlPTA7ZTxNYXRoLm1pbihuLGgubGVuZ3RoKTtlKyspe2NvbnN0IHQ9TnVtYmVyKGhbZV1bMF0pO2ZvcihsZXQgZT10O2U8dCt1O2UrKyl7Y29uc3QgdD10aGlzLm5vZGVNYXAuZ2V0QnkoImluZGV4IixlKTt0JiYhdGhpcy5pc05vZGVDYWNoZWQodC5ub2RlKSYmdGhpcy5kZXN0cm95Um93QXRJbmRleChlKX19fWlzTm9kZUZvY3VzZWQoZSl7Y29uc3QgdD10aGlzLmZvY3VzU2VydmljZS5nZXRGb2N1c0NlbGxUb1VzZUFmdGVyUmVmcmVzaCgpO2lmKCF0KXJldHVybiExO2lmKG51bGwhPXQucm93UGlubmVkKXJldHVybiExO3JldHVybiB0LnJvd0luZGV4PT09ZS5yb3dJbmRleH1pc05vZGVDYWNoZWQoZSl7cmV0dXJuIGUuaXNFeHBhbmRhYmxlKCkmJmUuZXhwYW5kZWR8fHRoaXMuaXNOb2RlRm9jdXNlZChlKX1leHRyYWN0RHVwbGljYXRlSWRzKGUpe2lmKG51bGw9PXRoaXMuZ2V0Um93SWRGdW5jKXJldHVybltdO2NvbnN0IHQ9bmV3IFNldCxpPW5ldyBTZXQ7cmV0dXJuIGUuZm9yRWFjaChlPT57Y29uc3Qgcz10aGlzLmdldFJvd0lkKGUpO3QuaGFzKHMpP2kuYWRkKHMpOnQuYWRkKHMpfSksWy4uLmldfW9uTG9hZFN1Y2Nlc3MoZSx0LGkpe2lmKCF0aGlzLmxpdmUpcmV0dXJuO2NvbnN0IHM9aS5ncm91cExldmVsSW5mbztpZih0aGlzLnN0b3JlLnNldFN0b3JlSW5mbyhzKSxudWxsIT10aGlzLmdldFJvd0lkRnVuYyl7Y29uc3Qgcz10aGlzLmV4dHJhY3REdXBsaWNhdGVJZHMoaS5yb3dEYXRhKTtpZihzLmxlbmd0aD4wKXtjb25zdCBpPXMuam9pbigiLCAiKTtyZXR1cm4gY29uc29sZS53YXJuKGBBRyBHcmlkOiBVbmFibGUgdG8gZGlzcGxheSByb3dzIGFzIGR1cGxpY2F0ZSByb3cgaWRzICgke2l9KSB3ZXJlIHJldHVybmVkIGJ5IHRoZSBnZXRSb3dJZCBjYWxsYmFjay4gUGxlYXNlIG1vZGlmeSB0aGUgZ2V0Um93SWQgY2FsbGJhY2sgdG8gcHJvdmlkZSB1bmlxdWUgaWRzLmApLHZvaWQgdGhpcy5vbkxvYWRGYWlsZWQoZSx0KX19aS5waXZvdFJlc3VsdEZpZWxkcyYmdGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWwuZ2VuZXJhdGVTZWNvbmRhcnlDb2x1bW5zKGkucGl2b3RSZXN1bHRGaWVsZHMpO2NvbnN0IHI9dGhpcy5ub2Rlc1RvUmVmcmVzaC5zaXplPjA7aWYoaS5yb3dEYXRhLmZvckVhY2goKHQsaSk9Pnt2YXIgcztjb25zdCByPWUraSxvPXRoaXMubm9kZU1hcC5nZXRCeSgiaW5kZXgiLHIpO2lmKCEobnVsbD09PShzPW51bGw9PW8/dm9pZCAwOm8ubm9kZSl8fHZvaWQgMD09PXM/dm9pZCAwOnMuc3R1YikpcmV0dXJuIG8mJnRoaXMuZG9lc05vZGVNYXRjaCh0LG8ubm9kZSk/KHRoaXMuYmxvY2tVdGlscy51cGRhdGVEYXRhSW50b1Jvd05vZGUoby5ub2RlLHQpLHRoaXMubm9kZXNUb1JlZnJlc2guZGVsZXRlKG8ubm9kZSksdm9pZChvLm5vZGUuX19uZWVkc1JlZnJlc2hXaGVuVmlzaWJsZT0hMSkpOnZvaWQgdGhpcy5jcmVhdGVSb3dBdEluZGV4KHIsdCk7dGhpcy5jcmVhdGVSb3dBdEluZGV4KHIsdCl9KSxudWxsIT1pLnJvd0NvdW50JiYtMSE9PWkucm93Q291bnQpdGhpcy5udW1iZXJPZlJvd3M9aS5yb3dDb3VudCx0aGlzLmlzTGFzdFJvd0tub3duPSEwO2Vsc2UgaWYodD5pLnJvd0RhdGEubGVuZ3RoKXRoaXMubnVtYmVyT2ZSb3dzPWUraS5yb3dEYXRhLmxlbmd0aCx0aGlzLmlzTGFzdFJvd0tub3duPSEwO2Vsc2UgaWYoIXRoaXMuaXNMYXN0Um93S25vd24pe2NvbnN0IHQ9ZStpLnJvd0RhdGEubGVuZ3RoKzE7dD50aGlzLm51bWJlck9mUm93cyYmKHRoaXMubnVtYmVyT2ZSb3dzPXQpfWlmKHRoaXMuaXNMYXN0Um93S25vd24pe3RoaXMubm9kZU1hcC5maWx0ZXIoZT0+ZS5pbmRleD49dGhpcy5udW1iZXJPZlJvd3MpLmZvckVhY2goZT0+dGhpcy5kZXN0cm95Um93QXRJbmRleChlLmluZGV4KSl9dGhpcy5maXJlU3RvcmVVcGRhdGVkRXZlbnQoKTtjb25zdCBvPTA9PT10aGlzLm5vZGVzVG9SZWZyZXNoLnNpemU7ciYmbyYmdGhpcy5maXJlUmVmcmVzaEZpbmlzaGVkRXZlbnQoKX1maXJlUmVmcmVzaEZpbmlzaGVkRXZlbnQoKXswPT09dGhpcy5ub2Rlc1RvUmVmcmVzaC5zaXplJiYodGhpcy5yZW1vdmVkTm9kZUNhY2hlLmZvckVhY2goZT0+e3RoaXMuYmxvY2tVdGlscy5kZXN0cm95Um93Tm9kZShlKX0pLHRoaXMucmVtb3ZlZE5vZGVDYWNoZT1uZXcgTWFwLHRoaXMuc3RvcmUuZmlyZVJlZnJlc2hGaW5pc2hlZEV2ZW50KCkpfWlzU3RvcmVGdWxseUxvYWRlZCgpe2NvbnN0IGU9dGhpcy5pc0xhc3RSb3dLbm93bix0PXRoaXMubm9kZU1hcC5nZXRTaXplKCk9PT10aGlzLm51bWJlck9mUm93cztpZighZXx8IXQpcmV0dXJuO2lmKHRoaXMubm9kZXNUb1JlZnJlc2guc2l6ZT4wKXJldHVybjtsZXQgaT0tMTtyZXR1cm4gbnVsbD09dGhpcy5ub2RlTWFwLmZpbmQoZT0+KGkrPTEsZS5pbmRleCE9PWl8fCghIWUubm9kZS5fX25lZWRzUmVmcmVzaFdoZW5WaXNpYmxlfHwhIWUubm9kZS5zdHViKSkpfWlzTGFzdFJvd0luZGV4S25vd24oKXtyZXR1cm4gdGhpcy5pc0xhc3RSb3dLbm93bn1vbkxvYWRGYWlsZWQoZSx0KXt2YXIgaTtpZighdGhpcy5saXZlKXJldHVybjtjb25zdCBzPXRoaXMubm9kZXNUb1JlZnJlc2guc2l6ZT4wO2ZvcihsZXQgcz1lO3M8ZSt0JiZzPHRoaXMuZ2V0Um93Q291bnQoKTtzKyspe2xldHtub2RlOmV9PW51bGwhPT0oaT10aGlzLm5vZGVNYXAuZ2V0QnkoImluZGV4IixzKSkmJnZvaWQgMCE9PWk/aTp7fTtlJiZ0aGlzLm5vZGVzVG9SZWZyZXNoLmRlbGV0ZShlKSxlJiZlLnN0dWJ8fChlJiYhZS5zdHViJiZ0aGlzLmRlc3Ryb3lSb3dBdEluZGV4KHMpLGU9dGhpcy5jcmVhdGVSb3dBdEluZGV4KHMpKSxlLl9fbmVlZHNSZWZyZXNoV2hlblZpc2libGU9ITEsZS5mYWlsZWRMb2FkPSEwfWNvbnN0IHI9MD09PXRoaXMubm9kZXNUb1JlZnJlc2guc2l6ZTtzJiZyJiZ0aGlzLmZpcmVSZWZyZXNoRmluaXNoZWRFdmVudCgpLHRoaXMuZmlyZVN0b3JlVXBkYXRlZEV2ZW50KCl9bWFya05vZGVzRm9yUmVmcmVzaCgpe3RoaXMubm9kZU1hcC5mb3JFYWNoKGU9PntlLm5vZGUuc3R1YiYmIWUubm9kZS5mYWlsZWRMb2FkfHx0aGlzLm5vZGVzVG9SZWZyZXNoLmFkZChlLm5vZGUpfSksdGhpcy5yb3dMb2FkZXIucXVldWVMb2FkQ2hlY2soKSx0aGlzLmlzTGFzdFJvd0tub3duJiYwPT09dGhpcy5udW1iZXJPZlJvd3MmJih0aGlzLm51bWJlck9mUm93cz0xLHRoaXMuaXNMYXN0Um93S25vd249ITEsdGhpcy5maXJlU3RvcmVVcGRhdGVkRXZlbnQoKSl9aXNOb2RlSW5DYWNoZShlKXtyZXR1cm4hIXRoaXMubm9kZU1hcC5nZXRCeSgiaWQiLGUpfWZpcmVTdG9yZVVwZGF0ZWRFdmVudCgpe3RoaXMubGl2ZSYmdGhpcy5zdG9yZS5maXJlU3RvcmVVcGRhdGVkRXZlbnQoKX1nZXRSb3dJZChlKXtpZihudWxsPT10aGlzLmdldFJvd0lkRnVuYylyZXR1cm4gbnVsbDtjb25zdHtsZXZlbDp0fT10aGlzLnN0b3JlLmdldFJvd0RldGFpbHMoKSxpPXRoaXMuc3RvcmUuZ2V0UGFyZW50Tm9kZSgpLmdldEdyb3VwS2V5cygpLHM9dGhpcy5nZXRSb3dJZEZ1bmMoe2RhdGE6ZSxwYXJlbnRLZXlzOmkubGVuZ3RoPjA/aTp2b2lkIDAsbGV2ZWw6dH0pO3JldHVybiBTdHJpbmcocyl9Z2V0T3JkZXJlZE5vZGVNYXAoKXtjb25zdCBlPXt9O3JldHVybiB0aGlzLm5vZGVNYXAuZm9yRWFjaCh0PT5lW3QuaW5kZXhdPXQpLGV9Y2xlYXJEaXNwbGF5SW5kZXhlcygpe3RoaXMubm9kZURpc3BsYXlJbmRleE1hcC5jbGVhcigpfWNsaWVudFNpZGVTb3J0Um93cygpe2NvbnN0IGU9dGhpcy5zb3J0Q29udHJvbGxlci5nZXRTb3J0T3B0aW9ucygpO2lmKCFlLnNvbWUoZT0+bnVsbCE9ZS5zb3J0KSlyZXR1cm47Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5ub2RlTWFwLmdldFNpemUoKSk7dGhpcy5ub2RlTWFwLmZvckVhY2goZT0+dFtlLmluZGV4XT1lLm5vZGUpLHRoaXMubm9kZU1hcC5jbGVhcigpO3RoaXMucm93Tm9kZVNvcnRlci5kb0Z1bGxTb3J0KHQsZSkuZm9yRWFjaCgoZSx0KT0+e3RoaXMubm9kZU1hcC5zZXQoe2lkOmUuaWQsbm9kZTplLGluZGV4OnR9KX0pfXVwZGF0ZVJvd05vZGVzKGUpe2lmKG51bGw9PXRoaXMuZ2V0Um93SWRGdW5jKXRocm93IG5ldyBFcnJvcigiQUcgR3JpZDogVHJhbnNhY3Rpb25zIGNhbiBvbmx5IGJlIGFwcGxpZWQgd2hlbiByb3cgaWRzIGFyZSBzdXBwbGllZC4iKTtjb25zdCB0PVtdO3JldHVybiBlLmZvckVhY2goZT0+e2NvbnN0IGk9dGhpcy5nZXRSb3dJZChlKSxzPXRoaXMubm9kZU1hcC5nZXRCeSgiaWQiLGkpO3MmJih0aGlzLmJsb2NrVXRpbHMudXBkYXRlRGF0YUludG9Sb3dOb2RlKHMubm9kZSxlKSx0LnB1c2gocy5ub2RlKSl9KSx0fWluc2VydFJvd05vZGVzKGUsdCl7Y29uc3QgaT10aGlzLnN0b3JlLmdldFJvd0NvdW50KCktKHRoaXMuc3RvcmUuZ2V0UGFyZW50Tm9kZSgpLnNpYmxpbmc/MTowKSxzPW51bGw9PXQmJnRoaXMuaXNMYXN0Um93S25vd24/aTp0O2lmKG51bGw9PXN8fGk8cylyZXR1cm5bXTtpZihudWxsPT10aGlzLmdldFJvd0lkRnVuYyl0aHJvdyBuZXcgRXJyb3IoIkFHIEdyaWQ6IFRyYW5zYWN0aW9ucyBjYW4gb25seSBiZSBhcHBsaWVkIHdoZW4gcm93IGlkcyBhcmUgc3VwcGxpZWQuIik7Y29uc3Qgcj17fTtlLmZvckVhY2goZT0+e2NvbnN0IHQ9dGhpcy5nZXRSb3dJZChlKTt0JiZ0aGlzLmlzTm9kZUluQ2FjaGUodCl8fChyW3RdPWUpfSk7Y29uc3Qgbz1PYmplY3QudmFsdWVzKHIpO2xldCBuPW8ubGVuZ3RoO2lmKDA9PT1uKXJldHVybltdO2NvbnN0IGE9dGhpcy5ub2RlTWFwLmZpbHRlcihlPT5lLmluZGV4Pj1zKTtyZXR1cm4gYS5mb3JFYWNoKGU9PnRoaXMubm9kZU1hcC5kZWxldGUoZSkpLGEuZm9yRWFjaChlPT57dGhpcy5ub2RlTWFwLnNldCh7bm9kZTplLm5vZGUsaW5kZXg6ZS5pbmRleCtuLGlkOmUuaWR9KX0pLHRoaXMubnVtYmVyT2ZSb3dzKz1uLG8ubWFwKChlLHQpPT50aGlzLmNyZWF0ZVJvd0F0SW5kZXgocyt0LGUpKX1yZW1vdmVSb3dOb2RlcyhlKXtpZihudWxsPT10aGlzLmdldFJvd0lkRnVuYyl0aHJvdyBuZXcgRXJyb3IoIkFHIEdyaWQ6IFRyYW5zYWN0aW9ucyBjYW4gb25seSBiZSBhcHBsaWVkIHdoZW4gcm93IGlkcyBhcmUgc3VwcGxpZWQuIik7Y29uc3QgdD1bXSxpPVtdO2xldCBzPTA7Y29uc3Qgcj1bLi4uZV0sbz10aGlzLmdldE9yZGVyZWROb2RlTWFwKCk7bGV0IG49LTE7Zm9yKGxldCBlIGluIG8pe24rPTE7Y29uc3QgYT1vW2VdLGw9ci5maW5kSW5kZXgoZT0+ZT09PWEuaWQpO2lmKC0xIT09bCl7ci5zcGxpY2UobCwxKSx0aGlzLmRlc3Ryb3lSb3dBdEluZGV4KE51bWJlcihlKSksdC5wdXNoKGEubm9kZSkscys9MTtjb250aW51ZX1pZigwPT09cyljb250aW51ZTtjb25zdCBkPU51bWJlcihlKTtuIT09ZCYmaS5wdXNoKGEubm9kZSksdGhpcy5ub2RlTWFwLmRlbGV0ZShvW2VdKSx0aGlzLm5vZGVNYXAuc2V0KHtpZDphLmlkLG5vZGU6YS5ub2RlLGluZGV4OmQtc30pfXJldHVybiB0aGlzLm51bWJlck9mUm93cy09dGhpcy5pc0xhc3RSb3dJbmRleEtub3duKCk/ZS5sZW5ndGg6cyxyLmxlbmd0aD4wJiZpLmxlbmd0aD4wJiYoaS5mb3JFYWNoKGU9PmUuX19uZWVkc1JlZnJlc2hXaGVuVmlzaWJsZT0hMCksdGhpcy5yb3dMb2FkZXIucXVldWVMb2FkQ2hlY2soKSksdH19YyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZ3JpZEFwaSIpXSxoLnByb3RvdHlwZSwiYXBpIix2b2lkIDApLGMoW09iamVjdChzLkF1dG93aXJlZCkoInNzcm1CbG9ja1V0aWxzIildLGgucHJvdG90eXBlLCJibG9ja1V0aWxzIix2b2lkIDApLGMoW09iamVjdChzLkF1dG93aXJlZCkoImZvY3VzU2VydmljZSIpXSxoLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLGMoW09iamVjdChzLkF1dG93aXJlZCkoInNzcm1Ob2RlTWFuYWdlciIpXSxoLnByb3RvdHlwZSwibm9kZU1hbmFnZXIiLHZvaWQgMCksYyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93TW9kZWwiKV0saC5wcm90b3R5cGUsInNlcnZlclNpZGVSb3dNb2RlbCIsdm9pZCAwKSxjKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dOb2RlU29ydGVyIildLGgucHJvdG90eXBlLCJyb3dOb2RlU29ydGVyIix2b2lkIDApLGMoW09iamVjdChzLkF1dG93aXJlZCkoInNvcnRDb250cm9sbGVyIildLGgucHJvdG90eXBlLCJzb3J0Q29udHJvbGxlciIsdm9pZCAwKSxjKFtzLlBvc3RDb25zdHJ1Y3RdLGgucHJvdG90eXBlLCJpbml0IixudWxsKSxjKFtzLlByZURlc3Ryb3ldLGgucHJvdG90eXBlLCJkZXN0cm95Um93Tm9kZXMiLG51bGwpO3ZhciB1PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIHAgZXh0ZW5kcyBzLkJlYW5TdHVie2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcigpLHRoaXMuaWRTZXF1ZW5jZT1uZXcgcy5OdW1iZXJTZXF1ZW5jZSx0aGlzLnNzcm1QYXJhbXM9ZSx0aGlzLnBhcmVudFJvd05vZGU9aSx0aGlzLnN0b3JlUGFyYW1zPXQsdGhpcy5sZXZlbD1pLmxldmVsKzEsdGhpcy5ncm91cD0hIWUucm93R3JvdXBDb2xzJiZ0aGlzLmxldmVsPGUucm93R3JvdXBDb2xzLmxlbmd0aCx0aGlzLmxlYWZHcm91cD0hIWUucm93R3JvdXBDb2xzJiZ0aGlzLmxldmVsPT09ZS5yb3dHcm91cENvbHMubGVuZ3RoLTEsdGhpcy5pbmZvPXt9fWluaXQoKXt2YXIgZTtsZXQgdD0xOzA9PT10aGlzLmxldmVsJiYodD1udWxsIT09KGU9dGhpcy5zdG9yZVV0aWxzLmdldFNlcnZlclNpZGVJbml0aWFsUm93Q291bnQoKSkmJnZvaWQgMCE9PWU/ZToxLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnRPbmNlKHt0eXBlOnMuRXZlbnRzLkVWRU5UX1JPV19DT1VOVF9SRUFEWX0pKSx0aGlzLmNhY2hlPXRoaXMuY3JlYXRlTWFuYWdlZEJlYW4obmV3IGgodGhpcyx0LHRoaXMuc3RvcmVQYXJhbXMpKTtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpJiZ0aGlzLmdyb3VwKXtjb25zdCBlPXRoaXMuc3NybVBhcmFtcy5yb3dHcm91cENvbHNbdGhpcy5sZXZlbF07dGhpcy5ncm91cEZpZWxkPWUuZmllbGQsdGhpcy5yb3dHcm91cENvbHVtbj10aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpW3RoaXMubGV2ZWxdfX1kZXN0cm95Um93Tm9kZXMoKXt0aGlzLmRpc3BsYXlJbmRleFN0YXJ0PXZvaWQgMCx0aGlzLmRpc3BsYXlJbmRleEVuZD12b2lkIDAsdGhpcy5kZXN0cm95QmVhbih0aGlzLmNhY2hlKX1hcHBseVJvd0RhdGEoZSx0LGkpe3RoaXMuY2FjaGUub25Mb2FkU3VjY2Vzcyh0LGksZSl9YXBwbHlUcmFuc2FjdGlvbihlKXt2YXIgdCxpLHI7Y29uc3Qgbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiZ2V0Um93SWQiKTtpZighbylyZXR1cm4gY29uc29sZS53YXJuKCJBRyBHcmlkOiBnZXRSb3dJZCBjYWxsYmFjayBtdXN0IGJlIGltcGxlbWVudGVkIGZvciB0cmFuc2FjdGlvbnMgdG8gd29yay4gVHJhbnNhY3Rpb24gd2FzIGlnbm9yZWQuIikse3N0YXR1czpzLlNlcnZlclNpZGVUcmFuc2FjdGlvblJlc3VsdFN0YXR1cy5DYW5jZWxsZWR9O2NvbnN0IG49dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soImlzQXBwbHlTZXJ2ZXJTaWRlVHJhbnNhY3Rpb24iKTtpZihuKXtpZighbih7dHJhbnNhY3Rpb246ZSxwYXJlbnROb2RlOnRoaXMucGFyZW50Um93Tm9kZSxncm91cExldmVsSW5mbzp0aGlzLmluZm99KSlyZXR1cm57c3RhdHVzOnMuU2VydmVyU2lkZVRyYW5zYWN0aW9uUmVzdWx0U3RhdHVzLkNhbmNlbGxlZH19Y29uc3QgYT10aGlzLmNhY2hlLmlzU3RvcmVGdWxseUxvYWRlZCgpO2xldCBsPXZvaWQgMDsobnVsbD09PSh0PWUudXBkYXRlKXx8dm9pZCAwPT09dD92b2lkIDA6dC5sZW5ndGgpJiYobD10aGlzLmNhY2hlLnVwZGF0ZVJvd05vZGVzKGUudXBkYXRlKSk7bGV0IGQ9dm9pZCAwO2lmKG51bGw9PT0oaT1lLmFkZCl8fHZvaWQgMD09PWk/dm9pZCAwOmkubGVuZ3RoKXtsZXQgdD1lLmFkZEluZGV4O251bGwhPXQmJnQ8MCYmKHQ9dm9pZCAwKSxkPXRoaXMuY2FjaGUuaW5zZXJ0Um93Tm9kZXMoZS5hZGQsdCl9bGV0IGM9dm9pZCAwO2lmKG51bGw9PT0ocj1lLnJlbW92ZSl8fHZvaWQgMD09PXI/dm9pZCAwOnIubGVuZ3RoKXtjb25zdCB0PWUucmVtb3ZlLm1hcChlPT5vKHtsZXZlbDp0aGlzLmxldmVsLHBhcmVudEtleXM6dGhpcy5wYXJlbnRSb3dOb2RlLmdldEdyb3VwS2V5cygpLGRhdGE6ZX0pKSxpPVsuLi5uZXcgU2V0KHQpXTtjPXRoaXMuY2FjaGUucmVtb3ZlUm93Tm9kZXMoaSl9Y29uc3QgaD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInNlcnZlclNpZGVFbmFibGVDbGllbnRTaWRlU29ydCIpLHU9KG51bGw9PWw/dm9pZCAwOmwubGVuZ3RoKXx8KG51bGw9PWQ/dm9pZCAwOmQubGVuZ3RoKTtyZXR1cm4gYSYmaCYmdSYmdGhpcy5jYWNoZS5jbGllbnRTaWRlU29ydFJvd3MoKSx0aGlzLnVwZGF0ZVNlbGVjdGlvbkFmdGVyVHJhbnNhY3Rpb24obCxjKSx7c3RhdHVzOnMuU2VydmVyU2lkZVRyYW5zYWN0aW9uUmVzdWx0U3RhdHVzLkFwcGxpZWQsdXBkYXRlOmwsYWRkOmQscmVtb3ZlOmN9fXVwZGF0ZVNlbGVjdGlvbkFmdGVyVHJhbnNhY3Rpb24oZSx0KXtjb25zdCBpPVtdO251bGw9PWV8fGUuZm9yRWFjaChlPT57ZS5pc1NlbGVjdGVkKCkmJiFlLnNlbGVjdGFibGUmJmkucHVzaChlKX0pLG51bGw9PXR8fHQuZm9yRWFjaChlPT57ZS5pc1NlbGVjdGVkKCkmJmkucHVzaChlKX0pLGkubGVuZ3RoJiZ0aGlzLnNlbGVjdGlvblNlcnZpY2Uuc2V0Tm9kZXNTZWxlY3RlZCh7bmV3VmFsdWU6ITEsY2xlYXJTZWxlY3Rpb246ITEsbm9kZXM6aSxzb3VyY2U6InJvd0RhdGFDaGFuZ2VkIn0pfWNsZWFyRGlzcGxheUluZGV4ZXMoKXt0aGlzLmRpc3BsYXlJbmRleFN0YXJ0PXZvaWQgMCx0aGlzLmRpc3BsYXlJbmRleEVuZD12b2lkIDAsdGhpcy5jYWNoZS5nZXROb2RlcygpLmZvckVhY2goZT0+dGhpcy5ibG9ja1V0aWxzLmNsZWFyRGlzcGxheUluZGV4KGUubm9kZSkpLHRoaXMucGFyZW50Um93Tm9kZS5zaWJsaW5nJiZ0aGlzLmJsb2NrVXRpbHMuY2xlYXJEaXNwbGF5SW5kZXgodGhpcy5wYXJlbnRSb3dOb2RlLnNpYmxpbmcpLHRoaXMuY2FjaGUuY2xlYXJEaXNwbGF5SW5kZXhlcygpfWdldERpc3BsYXlJbmRleFN0YXJ0KCl7cmV0dXJuIHRoaXMuZGlzcGxheUluZGV4U3RhcnR9Z2V0RGlzcGxheUluZGV4RW5kKCl7cmV0dXJuIHRoaXMuZGlzcGxheUluZGV4RW5kfWdldFJvd0NvdW50KCl7cmV0dXJuIHRoaXMucGFyZW50Um93Tm9kZS5zaWJsaW5nP3RoaXMuY2FjaGUuZ2V0Um93Q291bnQoKSsxOnRoaXMuY2FjaGUuZ2V0Um93Q291bnQoKX1zZXRSb3dDb3VudChlLHQpe3RoaXMuY2FjaGUuc2V0Um93Q291bnQoZSx0KX1pc0Rpc3BsYXlJbmRleEluU3RvcmUoZSl7cmV0dXJuIDAhPT10aGlzLmNhY2hlLmdldFJvd0NvdW50KCkmJih0aGlzLmRpc3BsYXlJbmRleFN0YXJ0PD1lJiZlPHRoaXMuZ2V0RGlzcGxheUluZGV4RW5kKCkpfXNldERpc3BsYXlJbmRleGVzKGUsdCl7dGhpcy5kaXNwbGF5SW5kZXhTdGFydD1lLnBlZWsoKSx0aGlzLnRvcFB4PXQudmFsdWUsdGhpcy5jYWNoZS5zZXREaXNwbGF5SW5kZXhlcyhlLHQpLHRoaXMucGFyZW50Um93Tm9kZS5zaWJsaW5nJiZ0aGlzLmJsb2NrVXRpbHMuc2V0RGlzcGxheUluZGV4KHRoaXMucGFyZW50Um93Tm9kZS5zaWJsaW5nLGUsdCksdGhpcy5kaXNwbGF5SW5kZXhFbmQ9ZS5wZWVrKCksdGhpcy5oZWlnaHRQeD10LnZhbHVlLXRoaXMudG9wUHh9Zm9yRWFjaFN0b3JlRGVlcChlLHQ9bmV3IHMuTnVtYmVyU2VxdWVuY2Upe2UodGhpcyx0Lm5leHQoKSksdGhpcy5jYWNoZS5nZXROb2RlcygpLmZvckVhY2goaT0+e2NvbnN0IHM9aS5ub2RlLmNoaWxkU3RvcmU7cyYmcy5mb3JFYWNoU3RvcmVEZWVwKGUsdCl9KX1mb3JFYWNoTm9kZURlZXAoZSx0PW5ldyBzLk51bWJlclNlcXVlbmNlKXt0aGlzLmNhY2hlLmdldE5vZGVzKCkuZm9yRWFjaChpPT57ZShpLm5vZGUsdC5uZXh0KCkpO2NvbnN0IHM9aS5ub2RlLmNoaWxkU3RvcmU7cyYmcy5mb3JFYWNoTm9kZURlZXAoZSx0KX0pfWZvckVhY2hOb2RlRGVlcEFmdGVyRmlsdGVyQW5kU29ydChlLHQ9bmV3IHMuTnVtYmVyU2VxdWVuY2UsaT0hMSl7Y29uc3Qgcj10aGlzLmNhY2hlLmdldE9yZGVyZWROb2RlTWFwKCk7Zm9yKGxldCBzIGluIHIpe2NvbnN0IG89cltzXTtlKG8ubm9kZSx0Lm5leHQoKSk7Y29uc3Qgbj1vLm5vZGUuY2hpbGRTdG9yZTtuJiZuLmZvckVhY2hOb2RlRGVlcEFmdGVyRmlsdGVyQW5kU29ydChlLHQsaSl9aSYmdGhpcy5wYXJlbnRSb3dOb2RlLnNpYmxpbmcmJmUodGhpcy5wYXJlbnRSb3dOb2RlLnNpYmxpbmcsdC5uZXh0KCkpfXJldHJ5TG9hZHMoKXt0aGlzLmNhY2hlLmdldE5vZGVzKCkuZm9yRWFjaCgoe25vZGU6ZX0pPT57ZS5mYWlsZWRMb2FkJiYoZS5mYWlsZWRMb2FkPSExLGUuX19uZWVkc1JlZnJlc2hXaGVuVmlzaWJsZT0hMCxlLnN0dWI9ITApfSksdGhpcy5mb3JFYWNoQ2hpbGRTdG9yZVNoYWxsb3coZT0+ZS5yZXRyeUxvYWRzKCkpLHRoaXMuZmlyZVN0b3JlVXBkYXRlZEV2ZW50KCl9Z2V0Um93VXNpbmdEaXNwbGF5SW5kZXgoZSl7cmV0dXJuIHRoaXMucGFyZW50Um93Tm9kZS5zaWJsaW5nJiZlPT09dGhpcy5wYXJlbnRSb3dOb2RlLnNpYmxpbmcucm93SW5kZXg/dGhpcy5wYXJlbnRSb3dOb2RlLnNpYmxpbmc6dGhpcy5jYWNoZS5nZXRSb3dCeURpc3BsYXlJbmRleChlKX1nZXRSb3dCb3VuZHMoZSl7dmFyIHQ7aWYoIXRoaXMuaXNEaXNwbGF5SW5kZXhJblN0b3JlKGUpKXJldHVybiBudWxsO2NvbnN0IGk9dGhpcy5jYWNoZS5nZXROb2RlQ2FjaGVkQnlEaXNwbGF5SW5kZXgoZSk7aWYoaSl7Y29uc3QgdD10aGlzLmJsb2NrVXRpbHMuZXh0cmFjdFJvd0JvdW5kcyhpLGUpO2lmKHQpcmV0dXJuIHR9Y29uc3R7cHJldmlvdXNOb2RlOnMsbmV4dE5vZGU6cn09bnVsbCE9PSh0PXRoaXMuY2FjaGUuZ2V0U3Vycm91bmRpbmdOb2Rlc0J5RGlzcGxheUluZGV4KGUpKSYmdm9pZCAwIT09dD90Ont9O2lmKHMpe2NvbnN0IHQ9dGhpcy5ibG9ja1V0aWxzLmV4dHJhY3RSb3dCb3VuZHMocy5ub2RlLGUpO2lmKG51bGwhPXQpcmV0dXJuIHR9Y29uc3Qgbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRSb3dIZWlnaHRBc051bWJlcigpO2lmKHIpe2NvbnN0IHQ9KHIubm9kZS5yb3dJbmRleC1lKSpvO3JldHVybntyb3dUb3A6ci5ub2RlLnJvd1RvcC10LHJvd0hlaWdodDpvfX1yZXR1cm57cm93VG9wOnRoaXMudG9wUHgrdGhpcy5oZWlnaHRQeC0odGhpcy5nZXREaXNwbGF5SW5kZXhFbmQoKS1lKSpvLHJvd0hlaWdodDpvfX1pc1BpeGVsSW5SYW5nZShlKXtyZXR1cm4gZT49dGhpcy50b3BQeCYmZTx0aGlzLnRvcFB4K3RoaXMuaGVpZ2h0UHh9Z2V0Um93SW5kZXhBdFBpeGVsKGUpe2lmKGU8dGhpcy50b3BQeClyZXR1cm4gdGhpcy5nZXREaXNwbGF5SW5kZXhTdGFydCgpO2lmKGU+PXRoaXMudG9wUHgrdGhpcy5oZWlnaHRQeClyZXR1cm4gdGhpcy5nZXREaXNwbGF5SW5kZXhFbmQoKS0xO2xldCB0PU51bWJlci5NQVhfU0FGRV9JTlRFR0VSLGk9bnVsbCxzPU51bWJlci5NQVhfU0FGRV9JTlRFR0VSLHI9bnVsbDtpZih0aGlzLmNhY2hlLmdldE5vZGVzKCkuZm9yRWFjaCgoe25vZGU6b30pPT57Y29uc3Qgbj1NYXRoLmFicyhlLW8ucm93VG9wKTtvLnJvd1RvcDxlP248dCYmKHQ9bixpPW8pOm48cyYmKHM9bixyPW8pfSksaT1pLHI9cixpKXtjb25zdCB0PXRoaXMuYmxvY2tVdGlscy5nZXRJbmRleEF0UGl4ZWwoaSxlKTtpZihudWxsIT10KXJldHVybiB0fWNvbnN0IG89dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0QXNOdW1iZXIoKTtpZihyKXtjb25zdCB0PXIucm93VG9wLGk9TWF0aC5jZWlsKCh0LWUpL28pO3JldHVybiByLnJvd0luZGV4LWl9Y29uc3Qgbj10aGlzLnRvcFB4K3RoaXMuaGVpZ2h0UHgsYT1NYXRoLmZsb29yKChuLWUpL28pO3JldHVybiB0aGlzLmdldERpc3BsYXlJbmRleEVuZCgpLWF9Z2V0Q2hpbGRTdG9yZShlKXtyZXR1cm4gdGhpcy5zdG9yZVV0aWxzLmdldENoaWxkU3RvcmUoZSx0aGlzLGU9Pntjb25zdCB0PXRoaXMuY2FjaGUuZ2V0Tm9kZXMoKS5maW5kKHQ9PnQubm9kZS5rZXk9PWUpO3JldHVybiB0P3Qubm9kZTpudWxsfSl9Zm9yRWFjaENoaWxkU3RvcmVTaGFsbG93KGUpe3RoaXMuY2FjaGUuZ2V0Tm9kZXMoKS5mb3JFYWNoKCh7bm9kZTp0fSk9Pnt0LmNoaWxkU3RvcmUmJmUodC5jaGlsZFN0b3JlKX0pfXJlZnJlc2hBZnRlclNvcnQoZSl7aWYodGhpcy5zdG9yZVV0aWxzLmlzU2VydmVyU2lkZVNvcnRBbGxMZXZlbHMoKXx8dGhpcy5zdG9yZVV0aWxzLmlzU2VydmVyUmVmcmVzaE5lZWRlZCh0aGlzLnBhcmVudFJvd05vZGUsdGhpcy5zc3JtUGFyYW1zLnJvd0dyb3VwQ29scyxlKSl7Y29uc3QgZT10aGlzLmNhY2hlLmlzU3RvcmVGdWxseUxvYWRlZCgpLHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzZXJ2ZXJTaWRlRW5hYmxlQ2xpZW50U2lkZVNvcnQiKTtpZighKGUmJnQpKXtjb25zdCBlPXRoaXMuY2FjaGUuZ2V0Um93Q291bnQoKTtyZXR1cm4gdGhpcy5kZXN0cm95QmVhbih0aGlzLmNhY2hlKSx2b2lkKHRoaXMuY2FjaGU9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgaCh0aGlzLGUsdGhpcy5zdG9yZVBhcmFtcykpKX10aGlzLmNhY2hlLmNsaWVudFNpZGVTb3J0Um93cygpfXRoaXMuZm9yRWFjaENoaWxkU3RvcmVTaGFsbG93KHQ9PnQucmVmcmVzaEFmdGVyU29ydChlKSl9cmVmcmVzaEFmdGVyRmlsdGVyKGUpeyF0aGlzLnN0b3JlVXRpbHMuaXNTZXJ2ZXJTaWRlT25seVJlZnJlc2hGaWx0ZXJlZEdyb3VwcygpfHx0aGlzLnN0b3JlVXRpbHMuaXNTZXJ2ZXJSZWZyZXNoTmVlZGVkKHRoaXMucGFyZW50Um93Tm9kZSx0aGlzLnNzcm1QYXJhbXMucm93R3JvdXBDb2xzLGUpP3RoaXMucmVmcmVzaFN0b3JlKCEwKTp0aGlzLmZvckVhY2hDaGlsZFN0b3JlU2hhbGxvdyh0PT50LnJlZnJlc2hBZnRlckZpbHRlcihlKSl9cmVmcmVzaFN0b3JlKGUpe2lmKGUpcmV0dXJuIHRoaXMuZGVzdHJveUJlYW4odGhpcy5jYWNoZSksdGhpcy5jYWNoZT10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBoKHRoaXMsMSx0aGlzLnN0b3JlUGFyYW1zKSksdm9pZCB0aGlzLmZpcmVTdG9yZVVwZGF0ZWRFdmVudCgpO3RoaXMuY2FjaGUubWFya05vZGVzRm9yUmVmcmVzaCgpfWdldFRvcExldmVsUm93RGlzcGxheWVkSW5kZXgoZSl7Y29uc3QgdD10aGlzLmNhY2hlLmdldERpc3BsYXlJbmRleEZyb21TdG9yZUluZGV4KGUpO3JldHVybiBudWxsIT10P3Q6ZX1pc0xhc3RSb3dJbmRleEtub3duKCl7cmV0dXJuIHRoaXMuY2FjaGUuaXNMYXN0Um93SW5kZXhLbm93bigpfWdldFJvd05vZGVzSW5SYW5nZShlLHQpe2xldCBpPSExO3JldHVybiBzLl8ubWlzc2luZyhlKSYmKGk9ITApLHRoaXMuY2FjaGUuZ2V0Tm9kZXMoKS5maWx0ZXIoKHtub2RlOml9KT0+aS5yb3dJbmRleD49ZS5yb3dJbmRleCYmaS5yb3dJbmRleDw9dC5yb3dJbmRleCkubWFwKCh7bm9kZTplfSk9PmUpfWFkZFN0b3JlU3RhdGVzKGUpe2UucHVzaCh7c3VwcHJlc3NJbmZpbml0ZVNjcm9sbDohMSxyb3V0ZTp0aGlzLnBhcmVudFJvd05vZGUuZ2V0R3JvdXBLZXlzKCkscm93Q291bnQ6dGhpcy5nZXRSb3dDb3VudCgpLGxhc3RSb3dJbmRleEtub3duOnRoaXMuaXNMYXN0Um93SW5kZXhLbm93bigpLGluZm86dGhpcy5pbmZvLG1heEJsb2Nrc0luQ2FjaGU6dGhpcy5zdG9yZVBhcmFtcy5tYXhCbG9ja3NJbkNhY2hlLGNhY2hlQmxvY2tTaXplOnRoaXMuc3RvcmVQYXJhbXMuY2FjaGVCbG9ja1NpemV9KSx0aGlzLmZvckVhY2hDaGlsZFN0b3JlU2hhbGxvdyh0PT50LmFkZFN0b3JlU3RhdGVzKGUpKX1nZXRJZFNlcXVlbmNlKCl7cmV0dXJuIHRoaXMuaWRTZXF1ZW5jZX1nZXRQYXJlbnROb2RlKCl7cmV0dXJuIHRoaXMucGFyZW50Um93Tm9kZX1nZXRSb3dEZXRhaWxzKCl7cmV0dXJue2ZpZWxkOnRoaXMuZ3JvdXBGaWVsZCxncm91cDp0aGlzLmdyb3VwLGxlYWZHcm91cDp0aGlzLmxlYWZHcm91cCxsZXZlbDp0aGlzLmxldmVsLHBhcmVudDp0aGlzLnBhcmVudFJvd05vZGUscm93R3JvdXBDb2x1bW46dGhpcy5yb3dHcm91cENvbHVtbn19Z2V0U3NybVBhcmFtcygpe3JldHVybiB0aGlzLnNzcm1QYXJhbXN9c2V0U3RvcmVJbmZvKGUpe2UmJk9iamVjdC5hc3NpZ24odGhpcy5pbmZvLGUpfWZpcmVTdG9yZVVwZGF0ZWRFdmVudCgpe2NvbnN0IGU9e3R5cGU6cy5FdmVudHMuRVZFTlRfU1RPUkVfVVBEQVRFRH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX1maXJlUmVmcmVzaEZpbmlzaGVkRXZlbnQoKXtjb25zdCBlPXt0eXBlOnMuRXZlbnRzLkVWRU5UX1NUT1JFX1JFRlJFU0hFRCxyb3V0ZTp0aGlzLnBhcmVudFJvd05vZGUuZ2V0Um91dGUoKX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX1nZXRCbG9ja1N0YXRlcygpe3JldHVybiB0aGlzLmNhY2hlLmdldEJsb2NrU3RhdGVzKCl9Z2V0U3RvcmVCb3VuZHMoKXtyZXR1cm57dG9wUHg6dGhpcy50b3BQeCxoZWlnaHRQeDp0aGlzLmhlaWdodFB4fX19dShbT2JqZWN0KHMuQXV0b3dpcmVkKSgic3NybUJsb2NrVXRpbHMiKV0scC5wcm90b3R5cGUsImJsb2NrVXRpbHMiLHZvaWQgMCksdShbT2JqZWN0KHMuQXV0b3dpcmVkKSgic3NybVN0b3JlVXRpbHMiKV0scC5wcm90b3R5cGUsInN0b3JlVXRpbHMiLHZvaWQgMCksdShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0scC5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLHUoW09iamVjdChzLkF1dG93aXJlZCkoInNlbGVjdGlvblNlcnZpY2UiKV0scC5wcm90b3R5cGUsInNlbGVjdGlvblNlcnZpY2UiLHZvaWQgMCksdShbcy5Qb3N0Q29uc3RydWN0XSxwLnByb3RvdHlwZSwiaW5pdCIsbnVsbCksdShbcy5QcmVEZXN0cm95XSxwLnByb3RvdHlwZSwiZGVzdHJveVJvd05vZGVzIixudWxsKTt2YXIgZz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgbT1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMub25Sb3dIZWlnaHRDaGFuZ2VkX2RlYm91bmNlZD1zLl8uZGVib3VuY2UodGhpcy5vblJvd0hlaWdodENoYW5nZWQuYmluZCh0aGlzKSwxMDApLHRoaXMucGF1c2VTdG9yZVVwZGF0ZUxpc3RlbmluZz0hMSx0aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5tYW5hZ2luZ1Bpdm90UmVzdWx0Q29sdW1ucz0hMX1lbnN1cmVSb3dIZWlnaHRzVmFsaWQoKXtyZXR1cm4hMX1zdGFydCgpe3RoaXMuc3RhcnRlZD0hMCx0aGlzLnVwZGF0ZURhdGFzb3VyY2UoKX1kZXN0cm95RGF0YXNvdXJjZSgpe3RoaXMuZGF0YXNvdXJjZSYmKHRoaXMuZGF0YXNvdXJjZS5kZXN0cm95JiZ0aGlzLmRhdGFzb3VyY2UuZGVzdHJveSgpLHRoaXMucm93UmVuZGVyZXIuZGF0YXNvdXJjZUNoYW5nZWQoKSx0aGlzLmRhdGFzb3VyY2U9dm9pZCAwKX1hZGRFdmVudExpc3RlbmVycygpe3RoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX05FV19DT0xVTU5TX0xPQURFRCx0aGlzLm9uQ29sdW1uRXZlcnl0aGluZy5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9TVE9SRV9VUERBVEVELHRoaXMub25TdG9yZVVwZGF0ZWQuYmluZCh0aGlzKSk7Y29uc3QgZT10aGlzLnJlc2V0Um9vdFN0b3JlLmJpbmQodGhpcyk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ09MVU1OX1ZBTFVFX0NIQU5HRUQsZSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ09MVU1OX1BJVk9UX0NIQU5HRUQsZSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ09MVU1OX1JPV19HUk9VUF9DSEFOR0VELGUpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9QSVZPVF9NT0RFX0NIQU5HRUQsZSksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcnMoWyJtYXN0ZXJEZXRhaWwiLCJ0cmVlRGF0YSIsInJlbW92ZVBpdm90SGVhZGVyUm93V2hlblNpbmdsZVZhbHVlQ29sdW1uIiwic3VwcHJlc3NTZXJ2ZXJTaWRlSW5maW5pdGVTY3JvbGwiLCJjYWNoZUJsb2NrU2l6ZSJdLGUpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoInJvd0hlaWdodCIsKCk9PnRoaXMucmVzZXRSb3dIZWlnaHRzKCkpLHRoaXMudmVyaWZ5UHJvcHMoKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJzZXJ2ZXJTaWRlRGF0YXNvdXJjZSIsKCk9PnRoaXMudXBkYXRlRGF0YXNvdXJjZSgpKX11cGRhdGVEYXRhc291cmNlKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInNlcnZlclNpZGVEYXRhc291cmNlIik7ZSYmdGhpcy5zZXREYXRhc291cmNlKGUpfXZlcmlmeVByb3BzKCl7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZXhpc3RzKCJpbml0aWFsR3JvdXBPcmRlckNvbXBhcmF0b3IiKSYmcy5fLndhcm5PbmNlKCJpbml0aWFsR3JvdXBPcmRlckNvbXBhcmF0b3IgY2Fubm90IGJlIHVzZWQgd2l0aCBTZXJ2ZXIgU2lkZSBSb3cgTW9kZWwuIiksdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNSb3dTZWxlY3Rpb24oKSYmIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmV4aXN0cygiZ2V0Um93SWQiKSYmcy5fLndhcm5PbmNlKCJnZXRSb3dJZCBjYWxsYmFjayBtdXN0IGJlIHByb3ZpZGVkIGZvciBTZXJ2ZXIgU2lkZSBSb3cgTW9kZWwgc2VsZWN0aW9uIHRvIHdvcmsgY29ycmVjdGx5LiIpfXNldERhdGFzb3VyY2UoZSl7dGhpcy5zdGFydGVkJiYodGhpcy5kZXN0cm95RGF0YXNvdXJjZSgpLHRoaXMuZGF0YXNvdXJjZT1lLHRoaXMucmVzZXRSb290U3RvcmUoKSl9YXBwbHlSb3dEYXRhKGUsdCxpKXtjb25zdCBzPXRoaXMuZ2V0Um9vdFN0b3JlKCk7aWYoIXMpcmV0dXJuO2NvbnN0IHI9cy5nZXRDaGlsZFN0b3JlKGkpO3ImJihyIGluc3RhbmNlb2YgcD9yLmFwcGx5Um93RGF0YShlLHQsZS5yb3dEYXRhLmxlbmd0aCk6ciBpbnN0YW5jZW9mIG4mJnIucHJvY2Vzc1NlcnZlclJlc3VsdChlKSl9aXNMYXN0Um93SW5kZXhLbm93bigpe2NvbnN0IGU9dGhpcy5nZXRSb290U3RvcmUoKTtyZXR1cm4hIWUmJmUuaXNMYXN0Um93SW5kZXhLbm93bigpfW9uQ29sdW1uRXZlcnl0aGluZygpe2lmKCF0aGlzLnN0b3JlUGFyYW1zKXJldHVybiB2b2lkIHRoaXMucmVzZXRSb290U3RvcmUoKTtjb25zdCBlPXRoaXMuY29sdW1uc1RvVmFsdWVPYmplY3RzKHRoaXMuY29sdW1uTW9kZWwuZ2V0Um93R3JvdXBDb2x1bW5zKCkpLHQ9dGhpcy5jb2x1bW5zVG9WYWx1ZU9iamVjdHModGhpcy5jb2x1bW5Nb2RlbC5nZXRWYWx1ZUNvbHVtbnMoKSksaT10aGlzLmNvbHVtbnNUb1ZhbHVlT2JqZWN0cyh0aGlzLmNvbHVtbk1vZGVsLmdldFBpdm90Q29sdW1ucygpKSxyPWU9Pntjb25zdCB0PXt9O2Uub2xkQ29scy5mb3JFYWNoKGU9PnRbZS5pZF09ZSk7Y29uc3QgaT1lLm5ld0NvbHMuZXZlcnkoZT0+e2NvbnN0IGk9dFtlLmlkXTtyZXR1cm4gaSYmZGVsZXRlIHRbZS5pZF0saSYmaS5maWVsZD09PWUuZmllbGQmJmkuYWdnRnVuYz09PWUuYWdnRnVuY30pLHM9IWUuYWxsb3dSZW1vdmVkQ29sdW1ucyYmISFPYmplY3QudmFsdWVzKHQpLmxlbmd0aDtyZXR1cm4gaSYmIXN9LG89IXMuXy5qc29uRXF1YWxzKHRoaXMuc3RvcmVQYXJhbXMuc29ydE1vZGVsLHRoaXMuc29ydENvbnRyb2xsZXIuZ2V0U29ydE1vZGVsKCkpLG49IXIoe29sZENvbHM6dGhpcy5zdG9yZVBhcmFtcy5yb3dHcm91cENvbHMsbmV3Q29sczplfSksYT0hcih7b2xkQ29sczp0aGlzLnN0b3JlUGFyYW1zLnBpdm90Q29scyxuZXdDb2xzOml9KSxsPSEhKG51bGw9PWU/dm9pZCAwOmUubGVuZ3RoKSYmIXIoe29sZENvbHM6dGhpcy5zdG9yZVBhcmFtcy52YWx1ZUNvbHMsbmV3Q29sczp0LGFsbG93UmVtb3ZlZENvbHVtbnM6ITB9KTtpZihvfHxufHxhfHxsKXRoaXMucmVzZXRSb290U3RvcmUoKTtlbHNle2NvbnN0IGU9dGhpcy5jcmVhdGVTdG9yZVBhcmFtcygpO3RoaXMuc3RvcmVQYXJhbXMucm93R3JvdXBDb2xzPWUucm93R3JvdXBDb2xzLHRoaXMuc3RvcmVQYXJhbXMucGl2b3RDb2xzPWUucGl2b3RDb2xzLHRoaXMuc3RvcmVQYXJhbXMudmFsdWVDb2xzPWUudmFsdWVDb2xzfX1kZXN0cm95Um9vdFN0b3JlKCl7dGhpcy5yb290Tm9kZSYmdGhpcy5yb290Tm9kZS5jaGlsZFN0b3JlJiYodGhpcy5yb290Tm9kZS5jaGlsZFN0b3JlPXRoaXMuZGVzdHJveUJlYW4odGhpcy5yb290Tm9kZS5jaGlsZFN0b3JlKSx0aGlzLm5vZGVNYW5hZ2VyLmNsZWFyKCkpfXJlZnJlc2hBZnRlclNvcnQoZSx0KXt0aGlzLnN0b3JlUGFyYW1zJiYodGhpcy5zdG9yZVBhcmFtcy5zb3J0TW9kZWw9ZSk7Y29uc3QgaT10aGlzLmdldFJvb3RTdG9yZSgpO2kmJihpLnJlZnJlc2hBZnRlclNvcnQodCksdGhpcy5vblN0b3JlVXBkYXRlZCgpKX1nZW5lcmF0ZVNlY29uZGFyeUNvbHVtbnMoZSl7Y29uc3QgdD10aGlzLnBpdm90Q29sRGVmU2VydmljZS5jcmVhdGVDb2xEZWZzRnJvbUZpZWxkcyhlKTt0aGlzLm1hbmFnaW5nUGl2b3RSZXN1bHRDb2x1bW5zPSEwLHRoaXMuY29sdW1uTW9kZWwuc2V0U2Vjb25kYXJ5Q29sdW1ucyh0LCJyb3dNb2RlbFVwZGF0ZWQiKX1yZXNldFJvd0hlaWdodHMoKXtjb25zdCBlPXRoaXMucmVzZXRSb3dIZWlnaHRzRm9yQWxsUm93Tm9kZXMoKSx0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFJvd0hlaWdodEZvck5vZGUodGhpcy5yb290Tm9kZSk7aWYodGhpcy5yb290Tm9kZS5zZXRSb3dIZWlnaHQodC5oZWlnaHQsdC5lc3RpbWF0ZWQpLHRoaXMucm9vdE5vZGUuc2libGluZyl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRSb3dIZWlnaHRGb3JOb2RlKHRoaXMucm9vdE5vZGUuc2libGluZyk7dGhpcy5yb290Tm9kZS5zaWJsaW5nLnNldFJvd0hlaWdodChlLmhlaWdodCxlLmVzdGltYXRlZCl9ZSYmdGhpcy5vblJvd0hlaWdodENoYW5nZWQoKX1yZXNldFJvd0hlaWdodHNGb3JBbGxSb3dOb2Rlcygpe2xldCBlPSExO3JldHVybiB0aGlzLmZvckVhY2hOb2RlKHQ9Pntjb25zdCBpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFJvd0hlaWdodEZvck5vZGUodCk7dC5zZXRSb3dIZWlnaHQoaS5oZWlnaHQsaS5lc3RpbWF0ZWQpO2NvbnN0IHM9dC5kZXRhaWxOb2RlO2lmKHMpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0Rm9yTm9kZShzKTtzLnNldFJvd0hlaWdodChlLmhlaWdodCxlLmVzdGltYXRlZCl9aWYodC5zaWJsaW5nKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFJvd0hlaWdodEZvck5vZGUodC5zaWJsaW5nKTtzLnNldFJvd0hlaWdodChlLmhlaWdodCxlLmVzdGltYXRlZCl9ZT0hMH0pLGV9cmVzZXRSb290U3RvcmUoKXt0aGlzLmRlc3Ryb3lSb290U3RvcmUoKSx0aGlzLnJvb3ROb2RlPW5ldyBzLlJvd05vZGUodGhpcy5iZWFucyksdGhpcy5yb290Tm9kZS5ncm91cD0hMCx0aGlzLnJvb3ROb2RlLmxldmVsPS0xLHRoaXMuZGF0YXNvdXJjZSYmKHRoaXMuc3RvcmVQYXJhbXM9dGhpcy5jcmVhdGVTdG9yZVBhcmFtcygpLHRoaXMucm9vdE5vZGUuY2hpbGRTdG9yZT10aGlzLmNyZWF0ZUJlYW4odGhpcy5zdG9yZUZhY3RvcnkuY3JlYXRlU3RvcmUodGhpcy5zdG9yZVBhcmFtcyx0aGlzLnJvb3ROb2RlKSksdGhpcy51cGRhdGVSb3dJbmRleGVzQW5kQm91bmRzKCkpLHRoaXMubWFuYWdpbmdQaXZvdFJlc3VsdENvbHVtbnMmJih0aGlzLmNvbHVtbk1vZGVsLnNldFNlY29uZGFyeUNvbHVtbnMobnVsbCwiYXBpIiksdGhpcy5tYW5hZ2luZ1Bpdm90UmVzdWx0Q29sdW1ucz0hMSksdGhpcy5kaXNwYXRjaE1vZGVsVXBkYXRlZCghMCl9Y29sdW1uc1RvVmFsdWVPYmplY3RzKGUpe3JldHVybiBlLm1hcChlPT4oe2lkOmUuZ2V0SWQoKSxhZ2dGdW5jOmUuZ2V0QWdnRnVuYygpLGRpc3BsYXlOYW1lOnRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW4oZSwibW9kZWwiKSxmaWVsZDplLmdldENvbERlZigpLmZpZWxkfSkpfWNyZWF0ZVN0b3JlUGFyYW1zKCl7Y29uc3QgZT10aGlzLmNvbHVtbnNUb1ZhbHVlT2JqZWN0cyh0aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpKSx0PXRoaXMuY29sdW1uc1RvVmFsdWVPYmplY3RzKHRoaXMuY29sdW1uTW9kZWwuZ2V0VmFsdWVDb2x1bW5zKCkpLGk9dGhpcy5jb2x1bW5zVG9WYWx1ZU9iamVjdHModGhpcy5jb2x1bW5Nb2RlbC5nZXRQaXZvdENvbHVtbnMoKSkscj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc0dldFJvd0hlaWdodEZ1bmN0aW9uKCk7cmV0dXJue3ZhbHVlQ29sczp0LHJvd0dyb3VwQ29sczplLHBpdm90Q29sczppLHBpdm90TW9kZTp0aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RNb2RlKCksZmlsdGVyTW9kZWw6dGhpcy5maWx0ZXJNYW5hZ2VyLmlzQWR2YW5jZWRGaWx0ZXJFbmFibGVkKCk/dGhpcy5maWx0ZXJNYW5hZ2VyLmdldEFkdmFuY2VkRmlsdGVyTW9kZWwoKTp0aGlzLmZpbHRlck1hbmFnZXIuZ2V0RmlsdGVyTW9kZWwoKSxzb3J0TW9kZWw6dGhpcy5zb3J0Q29udHJvbGxlci5nZXRTb3J0TW9kZWwoKSxkYXRhc291cmNlOnRoaXMuZGF0YXNvdXJjZSxsYXN0QWNjZXNzZWRTZXF1ZW5jZTpuZXcgcy5OdW1iZXJTZXF1ZW5jZSxkeW5hbWljUm93SGVpZ2h0OnJ9fWdldFBhcmFtcygpe3JldHVybiB0aGlzLnN0b3JlUGFyYW1zfWRpc3BhdGNoTW9kZWxVcGRhdGVkKGU9ITEpe2NvbnN0IHQ9e3R5cGU6cy5FdmVudHMuRVZFTlRfTU9ERUxfVVBEQVRFRCxhbmltYXRlOiFlLGtlZXBSZW5kZXJlZFJvd3M6IWUsbmV3UGFnZTohMSxuZXdEYXRhOiExfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfW9uU3RvcmVVcGRhdGVkKCl7dGhpcy5wYXVzZVN0b3JlVXBkYXRlTGlzdGVuaW5nfHwodGhpcy51cGRhdGVSb3dJbmRleGVzQW5kQm91bmRzKCksdGhpcy5kaXNwYXRjaE1vZGVsVXBkYXRlZCgpKX1vblJvd0hlaWdodENoYW5nZWREZWJvdW5jZWQoKXt0aGlzLm9uUm93SGVpZ2h0Q2hhbmdlZF9kZWJvdW5jZWQoKX1vblJvd0hlaWdodENoYW5nZWQoKXt0aGlzLnVwZGF0ZVJvd0luZGV4ZXNBbmRCb3VuZHMoKSx0aGlzLmRpc3BhdGNoTW9kZWxVcGRhdGVkKCl9dXBkYXRlUm93SW5kZXhlc0FuZEJvdW5kcygpe2NvbnN0IGU9dGhpcy5nZXRSb290U3RvcmUoKTtlJiZlLnNldERpc3BsYXlJbmRleGVzKG5ldyBzLk51bWJlclNlcXVlbmNlLHt2YWx1ZTowfSl9cmV0cnlMb2Fkcygpe2NvbnN0IGU9dGhpcy5nZXRSb290U3RvcmUoKTtlJiYoZS5yZXRyeUxvYWRzKCksdGhpcy5vblN0b3JlVXBkYXRlZCgpKX1nZXRSb3coZSl7Y29uc3QgdD10aGlzLmdldFJvb3RTdG9yZSgpO2lmKHQpcmV0dXJuIHQuZ2V0Um93VXNpbmdEaXNwbGF5SW5kZXgoZSl9ZXhwYW5kQWxsKGUpe3RoaXMucGF1c2VTdG9yZVVwZGF0ZUxpc3RlbmluZz0hMCx0aGlzLmZvckVhY2hOb2RlKHQ9Pnt0LnN0dWJ8fHQuaGFzQ2hpbGRyZW4oKSYmdC5zZXRFeHBhbmRlZChlKX0pLHRoaXMucGF1c2VTdG9yZVVwZGF0ZUxpc3RlbmluZz0hMSx0aGlzLm9uU3RvcmVVcGRhdGVkKCl9cmVmcmVzaEFmdGVyRmlsdGVyKGUsdCl7dGhpcy5zdG9yZVBhcmFtcyYmKHRoaXMuc3RvcmVQYXJhbXMuZmlsdGVyTW9kZWw9ZSk7Y29uc3QgaT10aGlzLmdldFJvb3RTdG9yZSgpO2kmJihpLnJlZnJlc2hBZnRlckZpbHRlcih0KSx0aGlzLm9uU3RvcmVVcGRhdGVkKCkpfWdldFJvb3RTdG9yZSgpe2lmKHRoaXMucm9vdE5vZGUmJnRoaXMucm9vdE5vZGUuY2hpbGRTdG9yZSlyZXR1cm4gdGhpcy5yb290Tm9kZS5jaGlsZFN0b3JlfWdldFJvd0NvdW50KCl7Y29uc3QgZT10aGlzLmdldFJvb3RTdG9yZSgpO3JldHVybiBlP2UuZ2V0RGlzcGxheUluZGV4RW5kKCk6MH1nZXRUb3BMZXZlbFJvd0NvdW50KCl7Y29uc3QgZT10aGlzLmdldFJvb3RTdG9yZSgpO3JldHVybiBlP2UuZ2V0Um93Q291bnQoKToxfWdldFRvcExldmVsUm93RGlzcGxheWVkSW5kZXgoZSl7Y29uc3QgdD10aGlzLmdldFJvb3RTdG9yZSgpO3JldHVybiB0P3QuZ2V0VG9wTGV2ZWxSb3dEaXNwbGF5ZWRJbmRleChlKTplfWdldFJvd0JvdW5kcyhlKXtjb25zdCB0PXRoaXMuZ2V0Um9vdFN0b3JlKCk7aWYoIXQpe3JldHVybntyb3dUb3A6MCxyb3dIZWlnaHQ6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0QXNOdW1iZXIoKX19cmV0dXJuIHQuZ2V0Um93Qm91bmRzKGUpfWdldEJsb2NrU3RhdGVzKCl7Y29uc3QgZT10aGlzLmdldFJvb3RTdG9yZSgpO2lmKCFlKXJldHVybjtjb25zdCB0PXt9O3JldHVybiBlLmZvckVhY2hTdG9yZURlZXAoZT0+e2lmKGUgaW5zdGFuY2VvZiBuKXtjb25zdHtpZDppLHN0YXRlOnN9PWUuZ2V0QmxvY2tTdGF0ZUpzb24oKTt0W2ldPXN9ZWxzZXtpZighKGUgaW5zdGFuY2VvZiBwKSl0aHJvdyBuZXcgRXJyb3IoIkFHIEdyaWQ6IFVuc3VwcG9ydGVkIHN0b3JlIHR5cGUiKTtPYmplY3QuZW50cmllcyhlLmdldEJsb2NrU3RhdGVzKCkpLmZvckVhY2goKFtlLGldKT0+e3RbZV09aX0pfX0pLHR9Z2V0Um93SW5kZXhBdFBpeGVsKGUpe2NvbnN0IHQ9dGhpcy5nZXRSb290U3RvcmUoKTtyZXR1cm4gZTw9MHx8IXQ/MDp0LmdldFJvd0luZGV4QXRQaXhlbChlKX1pc0VtcHR5KCl7cmV0dXJuITF9aXNSb3dzVG9SZW5kZXIoKXtyZXR1cm4gbnVsbCE9dGhpcy5nZXRSb290U3RvcmUoKSYmdGhpcy5nZXRSb3dDb3VudCgpPjB9Z2V0VHlwZSgpe3JldHVybiJzZXJ2ZXJTaWRlIn1mb3JFYWNoTm9kZShlKXtjb25zdCB0PXRoaXMuZ2V0Um9vdFN0b3JlKCk7dCYmdC5mb3JFYWNoTm9kZURlZXAoZSl9Zm9yRWFjaE5vZGVBZnRlckZpbHRlckFuZFNvcnQoZSx0PSExKXtjb25zdCBpPXRoaXMuZ2V0Um9vdFN0b3JlKCk7aSYmaS5mb3JFYWNoTm9kZURlZXBBZnRlckZpbHRlckFuZFNvcnQoZSx2b2lkIDAsdCl9ZXhlY3V0ZU9uU3RvcmUoZSx0KXtpZighdGhpcy5zdGFydGVkKXJldHVybiExO2NvbnN0IGk9dGhpcy5nZXRSb290U3RvcmUoKTtpZighaSlyZXR1cm4hMDtjb25zdCBzPWkuZ2V0Q2hpbGRTdG9yZShlKTtyZXR1cm4gcyYmdChzKSwhMH1yZWZyZXNoU3RvcmUoZT17fSl7Y29uc3QgdD1lLnJvdXRlP2Uucm91dGU6W107dGhpcy5leGVjdXRlT25TdG9yZSh0LHQ9PnQucmVmcmVzaFN0b3JlKDE9PWUucHVyZ2UpKX1nZXRTdG9yZVN0YXRlKCl7Y29uc3QgZT1bXSx0PXRoaXMuZ2V0Um9vdFN0b3JlKCk7cmV0dXJuIHQmJnQuYWRkU3RvcmVTdGF0ZXMoZSksZX1nZXROb2Rlc0luUmFuZ2VGb3JTZWxlY3Rpb24oZSx0KXtpZighcy5fLmV4aXN0cyhlKSlyZXR1cm5bXTtpZighdClyZXR1cm5bZV07Y29uc3QgaT1lLnJvd0luZGV4LHI9dC5yb3dJbmRleDtpZihudWxsPT09aXx8bnVsbD09PXIpcmV0dXJuW2VdO2NvbnN0IG89W10sW24sYV09W2kscl0uc29ydCgoZSx0KT0+ZS10KTtyZXR1cm4gdGhpcy5mb3JFYWNoTm9kZShlPT57Y29uc3QgdD1lLnJvd0luZGV4O251bGw9PXR8fGUuc3R1Ynx8dD49biYmdDw9YSYmby5wdXNoKGUpfSksby5sZW5ndGghPT1hLW4rMT9bZV06b31nZXRSb3dOb2RlKGUpe2xldCB0O3JldHVybiB0aGlzLmZvckVhY2hOb2RlKGk9PntpLmlkPT09ZSYmKHQ9aSksaS5kZXRhaWxOb2RlJiZpLmRldGFpbE5vZGUuaWQ9PT1lJiYodD1pLmRldGFpbE5vZGUpfSksdH1pc1Jvd1ByZXNlbnQoZSl7cmV0dXJuISF0aGlzLmdldFJvd05vZGUoZS5pZCl9c2V0Um93Q291bnQoZSx0KXtjb25zdCBpPXRoaXMuZ2V0Um9vdFN0b3JlKCk7aWYoaSl7aWYoaSBpbnN0YW5jZW9mIHApcmV0dXJuIHZvaWQgaS5zZXRSb3dDb3VudChlLHQpO2NvbnNvbGUuZXJyb3IoIkFHIEdyaWQ6IEluZmluaXRlIHNjcm9sbGluZyBtdXN0IGJlIGVuYWJsZWQgaW4gb3JkZXIgdG8gc2V0IHRoZSByb3cgY291bnQuIil9fX07ZyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sbS5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLGcoW09iamVjdChzLkF1dG93aXJlZCkoImZpbHRlck1hbmFnZXIiKV0sbS5wcm90b3R5cGUsImZpbHRlck1hbmFnZXIiLHZvaWQgMCksZyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgic29ydENvbnRyb2xsZXIiKV0sbS5wcm90b3R5cGUsInNvcnRDb250cm9sbGVyIix2b2lkIDApLGcoW09iamVjdChzLkF1dG93aXJlZCkoInJvd1JlbmRlcmVyIildLG0ucHJvdG90eXBlLCJyb3dSZW5kZXJlciIsdm9pZCAwKSxnKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJzc3JtU29ydFNlcnZpY2UiKV0sbS5wcm90b3R5cGUsInNvcnRMaXN0ZW5lciIsdm9pZCAwKSxnKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJzc3JtTm9kZU1hbmFnZXIiKV0sbS5wcm90b3R5cGUsIm5vZGVNYW5hZ2VyIix2b2lkIDApLGcoW09iamVjdChzLkF1dG93aXJlZCkoInNzcm1TdG9yZUZhY3RvcnkiKV0sbS5wcm90b3R5cGUsInN0b3JlRmFjdG9yeSIsdm9pZCAwKSxnKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJiZWFucyIpXSxtLnByb3RvdHlwZSwiYmVhbnMiLHZvaWQgMCksZyhbT2JqZWN0KHMuT3B0aW9uYWwpKCJwaXZvdENvbERlZlNlcnZpY2UiKV0sbS5wcm90b3R5cGUsInBpdm90Q29sRGVmU2VydmljZSIsdm9pZCAwKSxnKFtzLlByZURlc3Ryb3ldLG0ucHJvdG90eXBlLCJkZXN0cm95RGF0YXNvdXJjZSIsbnVsbCksZyhbcy5Qb3N0Q29uc3RydWN0XSxtLnByb3RvdHlwZSwiYWRkRXZlbnRMaXN0ZW5lcnMiLG51bGwpLGcoW3MuUHJlRGVzdHJveV0sbS5wcm90b3R5cGUsImRlc3Ryb3lSb290U3RvcmUiLG51bGwpLG09ZyhbT2JqZWN0KHMuQmVhbikoInJvd01vZGVsIildLG0pO3ZhciBmPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCB2PWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1Yntsb2FkRnJvbURhdGFzb3VyY2UoZSl7Y29uc3R7c3RvcmVQYXJhbXM6dCxwYXJlbnRCbG9jazppLHBhcmVudE5vZGU6c309ZSxyPXMuZ2V0R3JvdXBLZXlzKCk7aWYoIXQuZGF0YXNvdXJjZSlyZXR1cm47Y29uc3Qgbz17c3RhcnRSb3c6ZS5zdGFydFJvdyxlbmRSb3c6ZS5lbmRSb3cscm93R3JvdXBDb2xzOnQucm93R3JvdXBDb2xzLHZhbHVlQ29sczp0LnZhbHVlQ29scyxwaXZvdENvbHM6dC5waXZvdENvbHMscGl2b3RNb2RlOnQucGl2b3RNb2RlLGdyb3VwS2V5czpyLGZpbHRlck1vZGVsOnQuZmlsdGVyTW9kZWwsc29ydE1vZGVsOnQuc29ydE1vZGVsfSxuPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3N1Y2Nlc3M6ZS5zdWNjZXNzLGZhaWw6ZS5mYWlsLHJlcXVlc3Q6byxwYXJlbnROb2RlOmUucGFyZW50Tm9kZX0pO3dpbmRvdy5zZXRUaW1lb3V0KCgpPT57dC5kYXRhc291cmNlJiZpLmlzQWxpdmUoKT90LmRhdGFzb3VyY2UuZ2V0Um93cyhuKTplLmZhaWwoKX0sMCl9Z2V0Q2hpbGRTdG9yZShlLHQsaSl7aWYocy5fLm1pc3NpbmdPckVtcHR5KGUpKXJldHVybiB0O2NvbnN0IHI9aShlWzBdKTtpZihyKXtpZigxPT09ZS5sZW5ndGgmJiFyLmNoaWxkU3RvcmUpe2NvbnN0IGU9dGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWwuZ2V0UGFyYW1zKCk7ci5jaGlsZFN0b3JlPXRoaXMuY3JlYXRlQmVhbih0aGlzLnN0b3JlRmFjdG9yeS5jcmVhdGVTdG9yZShlLHIpKX1jb25zdCB0PWUuc2xpY2UoMSxlLmxlbmd0aCksaT1yLmNoaWxkU3RvcmU7cmV0dXJuIGk/aS5nZXRDaGlsZFN0b3JlKHQpOm51bGx9cmV0dXJuIG51bGx9aXNTZXJ2ZXJSZWZyZXNoTmVlZGVkKGUsdCxpKXtpZihpLnZhbHVlQ29sQ2hhbmdlZHx8aS5zZWNvbmRhcnlDb2xDaGFuZ2VkKXJldHVybiEwO2NvbnN0IHM9ZS5sZXZlbCsxO2lmKCEoczx0Lmxlbmd0aCkpcmV0dXJuITA7Y29uc3Qgcj10W3NdLmlkO2lmKGkuY2hhbmdlZENvbHVtbnMuaW5kZXhPZihyKT4tMSlyZXR1cm4hMDtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxHcmlkQ29sdW1ucygpLmZpbHRlcihlPT5lLmdldENvbERlZigpLnNob3dSb3dHcm91cCYmaS5jaGFuZ2VkQ29sdW1ucy5pbmNsdWRlcyhlLmdldElkKCkpKS5tYXAoZT0+ZS5nZXRDb2xEZWYoKS5zaG93Um93R3JvdXApLnNvbWUoZT0+ITA9PT1lfHxlPT09cil9Z2V0U2VydmVyU2lkZUluaXRpYWxSb3dDb3VudCgpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInNlcnZlclNpZGVJbml0aWFsUm93Q291bnQiKX1hc3NlcnRSb3dNb2RlbElzU2VydmVyU2lkZShlKXtyZXR1cm4hIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzUm93TW9kZWxUeXBlKCJzZXJ2ZXJTaWRlIil8fChzLl8ud2Fybk9uY2UoYFRoZSAnJHtlfScgcHJvcGVydHkgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHRoZSBTZXJ2ZXIgU2lkZSBSb3cgTW9kZWwuYCksITEpfWFzc2VydE5vdFRyZWVEYXRhKGUpe3JldHVybiF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInRyZWVEYXRhIil8fChzLl8ud2Fybk9uY2UoYFRoZSAnJHtlfScgcHJvcGVydHkgY2Fubm90IGJlIHVzZWQgd2hpbGUgdXNpbmcgdHJlZSBkYXRhLmApLCExKX1pc1NlcnZlclNpZGVTb3J0QWxsTGV2ZWxzKCl7cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic2VydmVyU2lkZVNvcnRBbGxMZXZlbHMiKSYmdGhpcy5hc3NlcnRSb3dNb2RlbElzU2VydmVyU2lkZSgic2VydmVyU2lkZVNvcnRBbGxMZXZlbHMiKX1pc1NlcnZlclNpZGVPbmx5UmVmcmVzaEZpbHRlcmVkR3JvdXBzKCl7cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic2VydmVyU2lkZU9ubHlSZWZyZXNoRmlsdGVyZWRHcm91cHMiKSYmdGhpcy5hc3NlcnRSb3dNb2RlbElzU2VydmVyU2lkZSgic2VydmVyU2lkZU9ubHlSZWZyZXNoRmlsdGVyZWRHcm91cHMiKX1pc1NlcnZlclNpZGVTb3J0T25TZXJ2ZXIoKXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzZXJ2ZXJTaWRlU29ydE9uU2VydmVyIikmJnRoaXMuYXNzZXJ0Um93TW9kZWxJc1NlcnZlclNpZGUoInNlcnZlclNpZGVTb3J0T25TZXJ2ZXIiKSYmdGhpcy5hc3NlcnROb3RUcmVlRGF0YSgic2VydmVyU2lkZVNvcnRPblNlcnZlciIpfWlzU2VydmVyU2lkZUZpbHRlck9uU2VydmVyKCl7cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic2VydmVyU2lkZUZpbHRlck9uU2VydmVyIikmJnRoaXMuYXNzZXJ0Um93TW9kZWxJc1NlcnZlclNpZGUoInNlcnZlclNpZGVGaWx0ZXJPblNlcnZlciIpJiZ0aGlzLmFzc2VydE5vdFRyZWVEYXRhKCJzZXJ2ZXJTaWRlRmlsdGVyT25TZXJ2ZXIiKX19O2YoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLHYucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxmKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dNb2RlbCIpXSx2LnByb3RvdHlwZSwic2VydmVyU2lkZVJvd01vZGVsIix2b2lkIDApLGYoW09iamVjdChzLkF1dG93aXJlZCkoInNzcm1TdG9yZUZhY3RvcnkiKV0sdi5wcm90b3R5cGUsInN0b3JlRmFjdG9yeSIsdm9pZCAwKSx2PWYoW09iamVjdChzLkJlYW4pKCJzc3JtU3RvcmVVdGlscyIpXSx2KTt2YXIgQz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgeT1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7Y3JlYXRlUm93Tm9kZShlKXtjb25zdCB0PW5ldyBzLlJvd05vZGUodGhpcy5iZWFucyksaT1udWxsIT1lLnJvd0hlaWdodD9lLnJvd0hlaWdodDp0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRSb3dIZWlnaHRBc051bWJlcigpO3JldHVybiB0LnNldFJvd0hlaWdodChpKSx0Lmdyb3VwPWUuZ3JvdXAsdC5sZWFmR3JvdXA9ZS5sZWFmR3JvdXAsdC5sZXZlbD1lLmxldmVsLHQudWlMZXZlbD1lLmxldmVsLHQucGFyZW50PWUucGFyZW50LHQuc3R1Yj0hMCx0Ll9fbmVlZHNSZWZyZXNoV2hlblZpc2libGU9ITEsdC5ncm91cCYmKHQuZXhwYW5kZWQ9ITEsdC5maWVsZD1lLmZpZWxkLHQucm93R3JvdXBDb2x1bW49ZS5yb3dHcm91cENvbHVtbiksdH1kZXN0cm95Um93Tm9kZXMoZSl7ZSYmZS5mb3JFYWNoKGU9PnRoaXMuZGVzdHJveVJvd05vZGUoZSkpfWRlc3Ryb3lSb3dOb2RlKGUsdD0hMSl7ZS5jaGlsZFN0b3JlJiYhdCYmKHRoaXMuZGVzdHJveUJlYW4oZS5jaGlsZFN0b3JlKSxlLmNoaWxkU3RvcmU9bnVsbCksZS5zaWJsaW5nJiYhZS5mb290ZXImJnRoaXMuZGVzdHJveVJvd05vZGUoZS5zaWJsaW5nLCExKSxlLmNsZWFyUm93VG9wQW5kUm93SW5kZXgoKSxudWxsIT1lLmlkJiZ0aGlzLm5vZGVNYW5hZ2VyLnJlbW92ZU5vZGUoZSl9c2V0VHJlZUdyb3VwSW5mbyhlKXtlLnVwZGF0ZUhhc0NoaWxkcmVuKCk7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdldFNlcnZlclNpZGVHcm91cEtleSIpO2UuaGFzQ2hpbGRyZW4oKSYmbnVsbCE9dCYmKGUua2V5PXQoZS5kYXRhKSksZS5oYXNDaGlsZHJlbigpfHxudWxsPT1lLmNoaWxkU3RvcmV8fCh0aGlzLmRlc3Ryb3lCZWFuKGUuY2hpbGRTdG9yZSksZS5jaGlsZFN0b3JlPW51bGwsZS5leHBhbmRlZD0hMSl9c2V0Um93R3JvdXBJbmZvKGUpe2Uua2V5PXRoaXMudmFsdWVTZXJ2aWNlLmdldFZhbHVlKGUucm93R3JvdXBDb2x1bW4sZSksbnVsbCE9PWUua2V5JiZ2b2lkIDAhPT1lLmtleXx8cy5fLmRvT25jZSgoKT0+e2NvbnNvbGUud2FybigiQUcgR3JpZDogbnVsbCBhbmQgdW5kZWZpbmVkIHZhbHVlcyBhcmUgbm90IGFsbG93ZWQgZm9yIHNlcnZlciBzaWRlIHJvdyBtb2RlbCBrZXlzIiksZS5yb3dHcm91cENvbHVtbiYmY29uc29sZS53YXJuKCJjb2x1bW4gPSAiK2Uucm93R3JvdXBDb2x1bW4uZ2V0SWQoKSksY29uc29sZS53YXJuKCJkYXRhIGlzICIsZS5kYXRhKX0sIlNlcnZlclNpZGVCbG9jay1DYW5ub3RIYXZlTnVsbE9yVW5kZWZpbmVkRm9yS2V5Iik7dGhpcy5iZWFucy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0R3JvdXBJbmNsdWRlRm9vdGVyKCkoe25vZGU6ZX0pJiYoZS5jcmVhdGVGb290ZXIoKSxlLnNpYmxpbmcmJihlLnNpYmxpbmcudWlMZXZlbD1lLnVpTGV2ZWwrMSkpfXNldE1hc3RlckRldGFpbEluZm8oZSl7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImlzUm93TWFzdGVyIik7ZS5tYXN0ZXI9bnVsbD09dHx8dChlLmRhdGEpfXVwZGF0ZURhdGFJbnRvUm93Tm9kZShlLHQpe2lmKGUudXBkYXRlRGF0YSh0KSx0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInRyZWVEYXRhIikpdGhpcy5zZXRUcmVlR3JvdXBJbmZvKGUpLHRoaXMuc2V0Q2hpbGRDb3VudEludG9Sb3dOb2RlKGUpO2Vsc2UgaWYoZS5ncm91cCl7aWYodGhpcy5zZXRDaGlsZENvdW50SW50b1Jvd05vZGUoZSksIWUuZm9vdGVyKXt0aGlzLmJlYW5zLmdyaWRPcHRpb25zU2VydmljZS5nZXRHcm91cEluY2x1ZGVGb290ZXIoKSh7bm9kZTplfSk/ZS5zaWJsaW5nP2Uuc2libGluZy51cGRhdGVEYXRhKHQpOmUuY3JlYXRlRm9vdGVyKCk6ZS5zaWJsaW5nJiZlLmRlc3Ryb3lGb290ZXIoKX19ZWxzZSB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoIm1hc3RlckRldGFpbCIpfXNldERhdGFJbnRvUm93Tm9kZShlLHQsaSxyKXt2YXIgbztlLnN0dWI9ITE7Y29uc3Qgbj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInRyZWVEYXRhIik7cy5fLmV4aXN0cyh0KT8oZS5zZXREYXRhQW5kSWQodCxpKSxuP3RoaXMuc2V0VHJlZUdyb3VwSW5mbyhlKTplLmdyb3VwP3RoaXMuc2V0Um93R3JvdXBJbmZvKGUpOnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgibWFzdGVyRGV0YWlsIikmJnRoaXMuc2V0TWFzdGVyRGV0YWlsSW5mbyhlKSk6KGUuc2V0RGF0YUFuZElkKHZvaWQgMCx2b2lkIDApLGUua2V5PW51bGwpLChufHxlLmdyb3VwKSYmKHRoaXMuc2V0R3JvdXBEYXRhSW50b1Jvd05vZGUoZSksdGhpcy5zZXRDaGlsZENvdW50SW50b1Jvd05vZGUoZSkpLHMuXy5leGlzdHModCkmJihlLnNldFJvd0hlaWdodCh0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRSb3dIZWlnaHRGb3JOb2RlKGUsITEscikuaGVpZ2h0KSxudWxsPT09KG89ZS5zaWJsaW5nKXx8dm9pZCAwPT09b3x8by5zZXRSb3dIZWlnaHQodGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0Rm9yTm9kZShlLnNpYmxpbmcsITEscikuaGVpZ2h0KSl9c2V0Q2hpbGRDb3VudEludG9Sb3dOb2RlKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJnZXRDaGlsZENvdW50Iik7dCYmZS5zZXRBbGxDaGlsZHJlbkNvdW50KHQoZS5kYXRhKSl9c2V0R3JvdXBEYXRhSW50b1Jvd05vZGUoZSl7Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldEdyb3VwRGlzcGxheUNvbHVtbnMoKSxpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidHJlZURhdGEiKTt0LmZvckVhY2godD0+e2lmKG51bGw9PWUuZ3JvdXBEYXRhJiYoZS5ncm91cERhdGE9e30pLGkpZS5ncm91cERhdGFbdC5nZXRDb2xJZCgpXT1lLmtleTtlbHNlIGlmKHQuaXNSb3dHcm91cERpc3BsYXllZChlLnJvd0dyb3VwQ29sdW1uLmdldElkKCkpKXtjb25zdCBpPXRoaXMudmFsdWVTZXJ2aWNlLmdldFZhbHVlKGUucm93R3JvdXBDb2x1bW4sZSk7ZS5ncm91cERhdGFbdC5nZXRDb2xJZCgpXT1pfX0pfWNsZWFyRGlzcGxheUluZGV4KGUpe2UuY2xlYXJSb3dUb3BBbmRSb3dJbmRleCgpO2lmKGUuaGFzQ2hpbGRyZW4oKSYmcy5fLmV4aXN0cyhlLmNoaWxkU3RvcmUpKXtlLmNoaWxkU3RvcmUuY2xlYXJEaXNwbGF5SW5kZXhlcygpfWUubWFzdGVyJiZlLmRldGFpbE5vZGUmJmUuZGV0YWlsTm9kZS5jbGVhclJvd1RvcEFuZFJvd0luZGV4KCl9c2V0RGlzcGxheUluZGV4KGUsdCxpKXtpZihlLnNldFJvd0luZGV4KHQubmV4dCgpKSxlLnNldFJvd1RvcChpLnZhbHVlKSxpLnZhbHVlKz1lLnJvd0hlaWdodCxlLmZvb3RlcilyZXR1cm47ZS5tYXN0ZXImJihlLmV4cGFuZGVkJiZlLmRldGFpbE5vZGU/KGUuZGV0YWlsTm9kZS5zZXRSb3dJbmRleCh0Lm5leHQoKSksZS5kZXRhaWxOb2RlLnNldFJvd1RvcChpLnZhbHVlKSxpLnZhbHVlKz1lLmRldGFpbE5vZGUucm93SGVpZ2h0KTplLmRldGFpbE5vZGUmJmUuZGV0YWlsTm9kZS5jbGVhclJvd1RvcEFuZFJvd0luZGV4KCkpO2lmKGUuaGFzQ2hpbGRyZW4oKSYmcy5fLmV4aXN0cyhlLmNoaWxkU3RvcmUpKXtjb25zdCBzPWUuY2hpbGRTdG9yZTtlLmV4cGFuZGVkP3Muc2V0RGlzcGxheUluZGV4ZXModCxpKTpzLmNsZWFyRGlzcGxheUluZGV4ZXMoKX19YmluYXJ5U2VhcmNoRm9yRGlzcGxheUluZGV4KGUsdCl7bGV0IGk9MCxyPXQubGVuZ3RoLTE7aWYocy5fLm1pc3Npbmcocil8fHMuXy5taXNzaW5nKGkpKWNvbnNvbGUud2FybihgQUcgR3JpZDogZXJyb3I6IHRvcFBvaW50ZXIgPSAke3J9LCBib3R0b21Qb2ludGVyID0gJHtpfWApO2Vsc2UgZm9yKDs7KXtjb25zdCBzPU1hdGguZmxvb3IoKGkrcikvMiksbz10W3NdO2lmKG8ucm93SW5kZXg9PT1lKXJldHVybiBvO2NvbnN0IG49by5tYXN0ZXImJm8uZXhwYW5kZWQsYT1vLmRldGFpbE5vZGU7aWYobiYmYSYmYS5yb3dJbmRleD09PWUpcmV0dXJuIG8uZGV0YWlsTm9kZTtjb25zdCBsPW8uY2hpbGRTdG9yZTtpZihvLmV4cGFuZGVkJiZsJiZsLmlzRGlzcGxheUluZGV4SW5TdG9yZShlKSlyZXR1cm4gbC5nZXRSb3dVc2luZ0Rpc3BsYXlJbmRleChlKTtpZihvLnJvd0luZGV4PGUpaT1zKzE7ZWxzZXtpZighKG8ucm93SW5kZXg+ZSkpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKGBBRyBHcmlkOiBlcnJvcjogdW5hYmxlIHRvIGxvY2F0ZSByb3dJbmRleCA9ICR7ZX0gaW4gY2FjaGVgKTtyPXMtMX19fWV4dHJhY3RSb3dCb3VuZHMoZSx0KXtjb25zdCBpPWU9Pih7cm93SGVpZ2h0OmUucm93SGVpZ2h0LHJvd1RvcDplLnJvd1RvcH0pO2lmKGUucm93SW5kZXg9PT10KXJldHVybiBpKGUpO2lmKGUuaGFzQ2hpbGRyZW4oKSYmZS5leHBhbmRlZCYmcy5fLmV4aXN0cyhlLmNoaWxkU3RvcmUpKXtjb25zdCBpPWUuY2hpbGRTdG9yZTtpZihpLmlzRGlzcGxheUluZGV4SW5TdG9yZSh0KSlyZXR1cm4gaS5nZXRSb3dCb3VuZHModCl9ZWxzZSBpZihlLm1hc3RlciYmZS5leHBhbmRlZCYmcy5fLmV4aXN0cyhlLmRldGFpbE5vZGUpJiZlLmRldGFpbE5vZGUucm93SW5kZXg9PT10KXJldHVybiBpKGUuZGV0YWlsTm9kZSl9Z2V0SW5kZXhBdFBpeGVsKGUsdCl7aWYoZS5pc1BpeGVsSW5SYW5nZSh0KSlyZXR1cm4gZS5yb3dJbmRleDtjb25zdCBpPWUubWFzdGVyJiZlLmV4cGFuZGVkLHI9ZS5kZXRhaWxOb2RlO2lmKGkmJnImJnIuaXNQaXhlbEluUmFuZ2UodCkpcmV0dXJuIGUuZGV0YWlsTm9kZS5yb3dJbmRleDtpZihlLmhhc0NoaWxkcmVuKCkmJmUuZXhwYW5kZWQmJnMuXy5leGlzdHMoZS5jaGlsZFN0b3JlKSl7Y29uc3QgaT1lLmNoaWxkU3RvcmU7aWYoaS5pc1BpeGVsSW5SYW5nZSh0KSlyZXR1cm4gaS5nZXRSb3dJbmRleEF0UGl4ZWwodCl9cmV0dXJuIG51bGx9Y3JlYXRlTm9kZUlkUHJlZml4KGUpe2NvbnN0IHQ9W107bGV0IGk9ZTtmb3IoO2kmJmkubGV2ZWw+PTA7KSIiPT09aS5rZXk/dC5wdXNoKCJhZy1HcmlkLU1pc3NpbmdLZXkiKTp0LnB1c2goaS5rZXkpLGk9aS5wYXJlbnQ7aWYodC5sZW5ndGg+MClyZXR1cm4gdC5yZXZlcnNlKCkuam9pbigiLSIpfWNoZWNrT3BlbkJ5RGVmYXVsdChlKXtyZXR1cm4gdGhpcy5leHBhbnNpb25TZXJ2aWNlLmNoZWNrT3BlbkJ5RGVmYXVsdChlKX19O0MoW09iamVjdChzLkF1dG93aXJlZCkoInZhbHVlU2VydmljZSIpXSx5LnByb3RvdHlwZSwidmFsdWVTZXJ2aWNlIix2b2lkIDApLEMoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLHkucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxDKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJzc3JtTm9kZU1hbmFnZXIiKV0seS5wcm90b3R5cGUsIm5vZGVNYW5hZ2VyIix2b2lkIDApLEMoW09iamVjdChzLkF1dG93aXJlZCkoImJlYW5zIildLHkucHJvdG90eXBlLCJiZWFucyIsdm9pZCAwKSxDKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJleHBhbnNpb25TZXJ2aWNlIildLHkucHJvdG90eXBlLCJleHBhbnNpb25TZXJ2aWNlIix2b2lkIDApLHk9QyhbT2JqZWN0KHMuQmVhbikoInNzcm1CbG9ja1V0aWxzIildLHkpO3ZhciBTPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCB3PWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5yb3dOb2Rlcz17fX1hZGRSb3dOb2RlKGUpe2NvbnN0IHQ9ZS5pZDt0aGlzLnJvd05vZGVzW3RdJiYoY29uc29sZS53YXJuKGBBRyBHcmlkOiBEdXBsaWNhdGUgbm9kZSBpZCAke2UuaWR9LiBSb3cgSUQncyBhcmUgcHJvdmlkZWQgdmlhIHRoZSBnZXRSb3dJZCgpIGNhbGxiYWNrLiBQbGVhc2UgbW9kaWZ5IHRoZSBnZXRSb3dJZCgpIGNhbGxiYWNrIGNvZGUgdG8gcHJvdmlkZSB1bmlxdWUgcm93IGlkIHZhbHVlcy5gKSxjb25zb2xlLndhcm4oImZpcnN0IGluc3RhbmNlIix0aGlzLnJvd05vZGVzW3RdLmRhdGEpLGNvbnNvbGUud2Fybigic2Vjb25kIGluc3RhbmNlIixlLmRhdGEpKSx0aGlzLnJvd05vZGVzW3RdPWV9cmVtb3ZlTm9kZShlKXtjb25zdCB0PWUuaWQ7dGhpcy5yb3dOb2Rlc1t0XSYmKHRoaXMucm93Tm9kZXNbdF09dm9pZCAwKX1jbGVhcigpe3RoaXMucm93Tm9kZXM9e319fTtTKFtzLlByZURlc3Ryb3ldLHcucHJvdG90eXBlLCJjbGVhciIsbnVsbCksdz1TKFtPYmplY3Qocy5CZWFuKSgic3NybU5vZGVNYW5hZ2VyIildLHcpO3ZhciBiPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBFPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1Yntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5hc3luY1RyYW5zYWN0aW9ucz1bXX1wb3N0Q29uc3RydWN0KCl7dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuaXNSb3dNb2RlbFR5cGUoInNlcnZlclNpZGUiKX1hcHBseVRyYW5zYWN0aW9uQXN5bmMoZSx0KXtudWxsPT10aGlzLmFzeW5jVHJhbnNhY3Rpb25zVGltZW91dCYmdGhpcy5zY2hlZHVsZUV4ZWN1dGVBc3luYygpLHRoaXMuYXN5bmNUcmFuc2FjdGlvbnMucHVzaCh7dHJhbnNhY3Rpb246ZSxjYWxsYmFjazp0fSl9c2NoZWR1bGVFeGVjdXRlQXN5bmMoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldEFzeW5jVHJhbnNhY3Rpb25XYWl0TWlsbGlzKCk7dGhpcy5hc3luY1RyYW5zYWN0aW9uc1RpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoKCk9Pnt0aGlzLmV4ZWN1dGVBc3luY1RyYW5zYWN0aW9ucygpfSxlKX1leGVjdXRlQXN5bmNUcmFuc2FjdGlvbnMoKXtpZighdGhpcy5hc3luY1RyYW5zYWN0aW9ucylyZXR1cm47Y29uc3QgZT1bXSx0PVtdLGk9W107bGV0IHI9ITE7aWYodGhpcy5hc3luY1RyYW5zYWN0aW9ucy5mb3JFYWNoKG89PntsZXQgbjt0aGlzLnNlcnZlclNpZGVSb3dNb2RlbC5leGVjdXRlT25TdG9yZShvLnRyYW5zYWN0aW9uLnJvdXRlLGU9PntuPWUuYXBwbHlUcmFuc2FjdGlvbihvLnRyYW5zYWN0aW9uKX0pP251bGw9PW4mJihuPXtzdGF0dXM6cy5TZXJ2ZXJTaWRlVHJhbnNhY3Rpb25SZXN1bHRTdGF0dXMuU3RvcmVOb3RGb3VuZH0pOm49e3N0YXR1czpzLlNlcnZlclNpZGVUcmFuc2FjdGlvblJlc3VsdFN0YXR1cy5TdG9yZU5vdFN0YXJ0ZWR9LHQucHVzaChuKTtuLnN0YXR1cz09cy5TZXJ2ZXJTaWRlVHJhbnNhY3Rpb25SZXN1bHRTdGF0dXMuU3RvcmVMb2FkaW5nP2kucHVzaChvKTooby5jYWxsYmFjayYmZS5wdXNoKCgpPT5vLmNhbGxiYWNrKG4pKSxuLnN0YXR1cz09PXMuU2VydmVyU2lkZVRyYW5zYWN0aW9uUmVzdWx0U3RhdHVzLkFwcGxpZWQmJihyPSEwKSl9KSxlLmxlbmd0aD4wJiZ3aW5kb3cuc2V0VGltZW91dCgoKT0+e2UuZm9yRWFjaChlPT5lKCkpfSwwKSx0aGlzLmFzeW5jVHJhbnNhY3Rpb25zVGltZW91dD12b2lkIDAsdGhpcy5hc3luY1RyYW5zYWN0aW9ucz1pLHImJih0aGlzLnZhbHVlQ2FjaGUub25EYXRhQ2hhbmdlZCgpLHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6cy5FdmVudHMuRVZFTlRfU1RPUkVfVVBEQVRFRH0pKSx0Lmxlbmd0aD4wKXtjb25zdCBlPXt0eXBlOnMuRXZlbnRzLkVWRU5UX0FTWU5DX1RSQU5TQUNUSU9OU19GTFVTSEVELHJlc3VsdHM6dH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChlKX19Zmx1c2hBc3luY1RyYW5zYWN0aW9ucygpe251bGwhPXRoaXMuYXN5bmNUcmFuc2FjdGlvbnNUaW1lb3V0JiZjbGVhclRpbWVvdXQodGhpcy5hc3luY1RyYW5zYWN0aW9uc1RpbWVvdXQpLHRoaXMuZXhlY3V0ZUFzeW5jVHJhbnNhY3Rpb25zKCl9YXBwbHlUcmFuc2FjdGlvbihlKXtsZXQgdDtpZih0aGlzLnNlcnZlclNpZGVSb3dNb2RlbC5leGVjdXRlT25TdG9yZShlLnJvdXRlLGk9Pnt0PWkuYXBwbHlUcmFuc2FjdGlvbihlKX0pKXtpZih0KXtpZih0aGlzLnZhbHVlQ2FjaGUub25EYXRhQ2hhbmdlZCgpLHQucmVtb3ZlKXtjb25zdCBpPXQucmVtb3ZlLm1hcChlPT5lLmlkKTt0aGlzLnNlbGVjdGlvblNlcnZpY2UuZGVsZXRlU2VsZWN0aW9uU3RhdGVGcm9tUGFyZW50KGUucm91dGV8fFtdLGkpfXJldHVybiB0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHt0eXBlOnMuRXZlbnRzLkVWRU5UX1NUT1JFX1VQREFURUR9KSx0fXJldHVybntzdGF0dXM6cy5TZXJ2ZXJTaWRlVHJhbnNhY3Rpb25SZXN1bHRTdGF0dXMuU3RvcmVOb3RGb3VuZH19cmV0dXJue3N0YXR1czpzLlNlcnZlclNpZGVUcmFuc2FjdGlvblJlc3VsdFN0YXR1cy5TdG9yZU5vdFN0YXJ0ZWR9fX07YihbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93Tm9kZUJsb2NrTG9hZGVyIildLEUucHJvdG90eXBlLCJyb3dOb2RlQmxvY2tMb2FkZXIiLHZvaWQgMCksYihbT2JqZWN0KHMuQXV0b3dpcmVkKSgidmFsdWVDYWNoZSIpXSxFLnByb3RvdHlwZSwidmFsdWVDYWNoZSIsdm9pZCAwKSxiKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dNb2RlbCIpXSxFLnByb3RvdHlwZSwic2VydmVyU2lkZVJvd01vZGVsIix2b2lkIDApLGIoW09iamVjdChzLkF1dG93aXJlZCkoInJvd1JlbmRlcmVyIildLEUucHJvdG90eXBlLCJyb3dSZW5kZXJlciIsdm9pZCAwKSxiKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJzZWxlY3Rpb25TZXJ2aWNlIildLEUucHJvdG90eXBlLCJzZWxlY3Rpb25TZXJ2aWNlIix2b2lkIDApLGIoW3MuUG9zdENvbnN0cnVjdF0sRS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLEU9YihbT2JqZWN0KHMuQmVhbikoInNzcm1UcmFuc2FjdGlvbk1hbmFnZXIiKV0sRSk7dmFyIFI9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IHg9Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie3Bvc3RDb25zdHJ1Y3QoKXt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd01vZGVsVHlwZSgic2VydmVyU2lkZSIpJiZ0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9ST1dfR1JPVVBfT1BFTkVELHRoaXMub25Sb3dHcm91cE9wZW5lZC5iaW5kKHRoaXMpKX1vblJvd0dyb3VwT3BlbmVkKGUpe2NvbnN0IHQ9ZS5ub2RlO2lmKHQuZXhwYW5kZWQpe2lmKHQubWFzdGVyKXRoaXMuY3JlYXRlRGV0YWlsTm9kZSh0KTtlbHNlIGlmKHMuXy5taXNzaW5nKHQuY2hpbGRTdG9yZSkpe2NvbnN0IGU9dGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWwuZ2V0UGFyYW1zKCk7dC5jaGlsZFN0b3JlPXRoaXMuY3JlYXRlQmVhbih0aGlzLnN0b3JlRmFjdG9yeS5jcmVhdGVTdG9yZShlLHQpKX19ZWxzZSB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInB1cmdlQ2xvc2VkUm93Tm9kZXMiKSYmcy5fLmV4aXN0cyh0LmNoaWxkU3RvcmUpJiYodC5jaGlsZFN0b3JlPXRoaXMuZGVzdHJveUJlYW4odC5jaGlsZFN0b3JlKSk7Y29uc3QgaT17dHlwZTpzLkV2ZW50cy5FVkVOVF9TVE9SRV9VUERBVEVEfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGkpfWNyZWF0ZURldGFpbE5vZGUoZSl7aWYocy5fLmV4aXN0cyhlLmRldGFpbE5vZGUpKXJldHVybiBlLmRldGFpbE5vZGU7Y29uc3QgdD1uZXcgcy5Sb3dOb2RlKHRoaXMuYmVhbnMpO3QuZGV0YWlsPSEwLHQuc2VsZWN0YWJsZT0hMSx0LnBhcmVudD1lLHMuXy5leGlzdHMoZS5pZCkmJih0LmlkPSJkZXRhaWxfIitlLmlkKSx0LmRhdGE9ZS5kYXRhLHQubGV2ZWw9ZS5sZXZlbCsxO2NvbnN0IGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0Rm9yTm9kZSh0KS5oZWlnaHQ7cmV0dXJuIHQucm93SGVpZ2h0PWl8fDIwMCxlLmRldGFpbE5vZGU9dCx0fX07UihbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93TW9kZWwiKV0seC5wcm90b3R5cGUsInNlcnZlclNpZGVSb3dNb2RlbCIsdm9pZCAwKSxSKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJzc3JtU3RvcmVGYWN0b3J5IildLHgucHJvdG90eXBlLCJzdG9yZUZhY3RvcnkiLHZvaWQgMCksUihbT2JqZWN0KHMuQXV0b3dpcmVkKSgiYmVhbnMiKV0seC5wcm90b3R5cGUsImJlYW5zIix2b2lkIDApLFIoW3MuUG9zdENvbnN0cnVjdF0seC5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLHg9UihbT2JqZWN0KHMuQmVhbikoInNzcm1FeHBhbmRMaXN0ZW5lciIpXSx4KTt2YXIgVD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgRD1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7cG9zdENvbnN0cnVjdCgpe3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmlzUm93TW9kZWxUeXBlKCJzZXJ2ZXJTaWRlIikmJnRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX1NPUlRfQ0hBTkdFRCx0aGlzLm9uU29ydENoYW5nZWQuYmluZCh0aGlzKSl9b25Tb3J0Q2hhbmdlZCgpe2NvbnN0IGU9dGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWwuZ2V0UGFyYW1zKCk7aWYoIWUpcmV0dXJuO2NvbnN0IHQ9dGhpcy5zb3J0Q29udHJvbGxlci5nZXRTb3J0TW9kZWwoKSxpPWUuc29ydE1vZGVsLHM9dGhpcy5maW5kQ2hhbmdlZENvbHVtbnNJblNvcnQodCxpKSxyPXt2YWx1ZUNvbENoYW5nZWQ6dGhpcy5saXN0ZW5lclV0aWxzLmlzU29ydGluZ1dpdGhWYWx1ZUNvbHVtbihzKSxzZWNvbmRhcnlDb2xDaGFuZ2VkOnRoaXMubGlzdGVuZXJVdGlscy5pc1NvcnRpbmdXaXRoU2Vjb25kYXJ5Q29sdW1uKHMpLGNoYW5nZWRDb2x1bW5zOnN9O3RoaXMuc2VydmVyU2lkZVJvd01vZGVsLnJlZnJlc2hBZnRlclNvcnQodCxyKX1maW5kQ2hhbmdlZENvbHVtbnNJblNvcnQoZSx0KXtsZXQgaT1bXTtbZSx0XS5mb3JFYWNoKGU9PntpZihlKXtjb25zdCB0PWUubWFwKGU9PmUuY29sSWQpO2k9aS5jb25jYXQodCl9fSk7cmV0dXJuIGkuZmlsdGVyKGk9Pntjb25zdCBzPXQuZmluZChlPT5lLmNvbElkPT09aSkscj1lLmZpbmQoZT0+ZS5jb2xJZD09PWkpO3JldHVybigoZSx0KT0+KGU/ZS5zb3J0Om51bGwpIT09KHQ/dC5zb3J0Om51bGwpKShzLHIpfHwoKGkscyk9PihpP3QuaW5kZXhPZihpKTotMSkhPT0ocz9lLmluZGV4T2Yocyk6LTEpKShzLHIpfSl9fTtUKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJzb3J0Q29udHJvbGxlciIpXSxELnByb3RvdHlwZSwic29ydENvbnRyb2xsZXIiLHZvaWQgMCksVChbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93TW9kZWwiKV0sRC5wcm90b3R5cGUsInNlcnZlclNpZGVSb3dNb2RlbCIsdm9pZCAwKSxUKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJzc3JtTGlzdGVuZXJVdGlscyIpXSxELnByb3RvdHlwZSwibGlzdGVuZXJVdGlscyIsdm9pZCAwKSxUKFtzLlBvc3RDb25zdHJ1Y3RdLEQucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxEPVQoW09iamVjdChzLkJlYW4pKCJzc3JtU29ydFNlcnZpY2UiKV0sRCk7dmFyIE89ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IEE9Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie3Bvc3RDb25zdHJ1Y3QoKXt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5pc1Jvd01vZGVsVHlwZSgic2VydmVyU2lkZSIpJiYodGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQURWQU5DRURfRklMVEVSX0VOQUJMRURfQ0hBTkdFRCwoKT0+dGhpcy5vbkZpbHRlckNoYW5nZWQoITApKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9GSUxURVJfQ0hBTkdFRCwoKT0+dGhpcy5vbkZpbHRlckNoYW5nZWQoKSkpfW9uRmlsdGVyQ2hhbmdlZChlKXtjb25zdCB0PXRoaXMuc2VydmVyU2lkZVJvd01vZGVsLmdldFBhcmFtcygpO2lmKCF0KXJldHVybjtjb25zdCBpPXQuZmlsdGVyTW9kZWw7bGV0IHMscjtpZih0aGlzLmZpbHRlck1hbmFnZXIuaXNBZHZhbmNlZEZpbHRlckVuYWJsZWQoKSl7cz10aGlzLmZpbHRlck1hbmFnZXIuZ2V0QWR2YW5jZWRGaWx0ZXJNb2RlbCgpO2NvbnN0IHQ9ZT9PYmplY3Qua2V5cyhudWxsIT1pP2k6e30pOnRoaXMuZ2V0QWR2YW5jZWRGaWx0ZXJDb2x1bW5zKGkpLG89dGhpcy5nZXRBZHZhbmNlZEZpbHRlckNvbHVtbnMocyk7dC5mb3JFYWNoKGU9Pm8uYWRkKGUpKSxyPUFycmF5LmZyb20obyl9ZWxzZSBpZihzPXRoaXMuZmlsdGVyTWFuYWdlci5nZXRGaWx0ZXJNb2RlbCgpLGUpe2NvbnN0IGU9dGhpcy5nZXRBZHZhbmNlZEZpbHRlckNvbHVtbnMoaSk7T2JqZWN0LmtleXMocykuZm9yRWFjaCh0PT5lLmFkZCh0KSkscj1BcnJheS5mcm9tKGUpfWVsc2Ugcj10aGlzLmZpbmRDaGFuZ2VkQ29sdW1ucyhpLHMpO2NvbnN0IG89e3ZhbHVlQ29sQ2hhbmdlZDp0aGlzLmxpc3RlbmVyVXRpbHMuaXNTb3J0aW5nV2l0aFZhbHVlQ29sdW1uKHIpLHNlY29uZGFyeUNvbENoYW5nZWQ6dGhpcy5saXN0ZW5lclV0aWxzLmlzU29ydGluZ1dpdGhTZWNvbmRhcnlDb2x1bW4ociksY2hhbmdlZENvbHVtbnM6cn07dGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWwucmVmcmVzaEFmdGVyRmlsdGVyKHMsbyl9ZmluZENoYW5nZWRDb2x1bW5zKGUsdCl7Y29uc3QgaT17fTtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGU9PmlbZV09ITApLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZT0+aVtlXT0hMCk7Y29uc3Qgcz1bXTtyZXR1cm4gT2JqZWN0LmtleXMoaSkuZm9yRWFjaChpPT57SlNPTi5zdHJpbmdpZnkoZVtpXSkhPUpTT04uc3RyaW5naWZ5KHRbaV0pJiZzLnB1c2goaSl9KSxzfWdldEFkdmFuY2VkRmlsdGVyQ29sdW1ucyhlKXtjb25zdCB0PW5ldyBTZXQ7aWYoIWUpcmV0dXJuIHQ7Y29uc3QgaT1lPT57ImpvaW4iPT09ZS5maWx0ZXJUeXBlP2UuY29uZGl0aW9ucy5mb3JFYWNoKGU9PmkoZSkpOnQuYWRkKGUuY29sSWQpfTtyZXR1cm4gaShlKSx0fX07TyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93TW9kZWwiKV0sQS5wcm90b3R5cGUsInNlcnZlclNpZGVSb3dNb2RlbCIsdm9pZCAwKSxPKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmaWx0ZXJNYW5hZ2VyIildLEEucHJvdG90eXBlLCJmaWx0ZXJNYW5hZ2VyIix2b2lkIDApLE8oW09iamVjdChzLkF1dG93aXJlZCkoInNzcm1MaXN0ZW5lclV0aWxzIildLEEucHJvdG90eXBlLCJsaXN0ZW5lclV0aWxzIix2b2lkIDApLE8oW3MuUG9zdENvbnN0cnVjdF0sQS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpLEE9TyhbT2JqZWN0KHMuQmVhbikoInNzcm1GaWx0ZXJMaXN0ZW5lciIpXSxBKTt2YXIgUD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgTT1jbGFzc3tjcmVhdGVTdG9yZShlLHQpe2NvbnN0IGk9dGhpcy5nZXRTdG9yZVBhcmFtcyhlLHQpO3JldHVybiBuZXcoaS5zdXBwcmVzc0luZmluaXRlU2Nyb2xsP246cCkoZSxpLHQpfWdldFN0b3JlUGFyYW1zKGUsdCl7Y29uc3QgaT10aGlzLmdldExldmVsU3BlY2lmaWNQYXJhbXModCkscz10aGlzLmlzSW5maW5pdGVTY3JvbGwoaSk7cmV0dXJue3N1cHByZXNzSW5maW5pdGVTY3JvbGw6IXMsY2FjaGVCbG9ja1NpemU6dGhpcy5nZXRCbG9ja1NpemUocyxpKSxtYXhCbG9ja3NJbkNhY2hlOnRoaXMuZ2V0TWF4QmxvY2tzSW5DYWNoZShzLGUsaSl9fWdldE1heEJsb2Nrc0luQ2FjaGUoZSx0LGkpe2lmKCFlKXJldHVybjtjb25zdCByPWkmJm51bGwhPWkubWF4QmxvY2tzSW5DYWNoZT9pLm1heEJsb2Nrc0luQ2FjaGU6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJtYXhCbG9ja3NJbkNhY2hlIik7aWYobnVsbCE9ciYmcj49MClpZih0LmR5bmFtaWNSb3dIZWlnaHQpe2NvbnN0IGU9IlNlcnZlciBTaWRlIFJvdyBNb2RlbCBkb2VzIG5vdCBzdXBwb3J0IER5bmFtaWMgUm93IEhlaWdodCBhbmQgQ2FjaGUgUHVyZ2luZy4gRWl0aGVyIGEpIHJlbW92ZSBnZXRSb3dIZWlnaHQoKSBjYWxsYmFjayBvciBiKSByZW1vdmUgbWF4QmxvY2tzSW5DYWNoZSBwcm9wZXJ0eS4gUHVyZ2luZyBoYXMgYmVlbiBkaXNhYmxlZC4iO3MuXy53YXJuT25jZShlKX1lbHNle2lmKCF0aGlzLmNvbHVtbk1vZGVsLmlzQXV0b1Jvd0hlaWdodEFjdGl2ZSgpKXJldHVybiByO3tjb25zdCBlPSJTZXJ2ZXIgU2lkZSBSb3cgTW9kZWwgZG9lcyBub3Qgc3VwcG9ydCBBdXRvIFJvdyBIZWlnaHQgYW5kIENhY2hlIFB1cmdpbmcuIEVpdGhlciBhKSByZW1vdmUgY29sRGVmLmF1dG9IZWlnaHQgb3IgYikgcmVtb3ZlIG1heEJsb2Nrc0luQ2FjaGUgcHJvcGVydHkuIFB1cmdpbmcgaGFzIGJlZW4gZGlzYWJsZWQuIjtzLl8ud2Fybk9uY2UoZSl9fX1nZXRCbG9ja1NpemUoZSx0KXtpZighZSlyZXR1cm47Y29uc3QgaT10JiZudWxsIT10LmNhY2hlQmxvY2tTaXplP3QuY2FjaGVCbG9ja1NpemU6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjYWNoZUJsb2NrU2l6ZSIpO3JldHVybiBudWxsIT1pJiZpPjA/aToxMDB9Z2V0TGV2ZWxTcGVjaWZpY1BhcmFtcyhlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJnZXRTZXJ2ZXJTaWRlR3JvdXBMZXZlbFBhcmFtcyIpO2lmKCF0KXJldHVybjtyZXR1cm4gdCh7bGV2ZWw6ZS5sZXZlbCsxLHBhcmVudFJvd05vZGU6ZS5sZXZlbD49MD9lOnZvaWQgMCxyb3dHcm91cENvbHVtbnM6dGhpcy5jb2x1bW5Nb2RlbC5nZXRSb3dHcm91cENvbHVtbnMoKSxwaXZvdENvbHVtbnM6dGhpcy5jb2x1bW5Nb2RlbC5nZXRQaXZvdENvbHVtbnMoKSxwaXZvdE1vZGU6dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpfSl9aXNJbmZpbml0ZVNjcm9sbChlKXtyZXR1cm4hKGUmJm51bGwhPWUuc3VwcHJlc3NJbmZpbml0ZVNjcm9sbD9lLnN1cHByZXNzSW5maW5pdGVTY3JvbGw6dGhpcy5pc1N1cHByZXNzU2VydmVyU2lkZUluZmluaXRlU2Nyb2xsKCkpfWlzU3VwcHJlc3NTZXJ2ZXJTaWRlSW5maW5pdGVTY3JvbGwoKXtyZXR1cm4gdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc1NlcnZlclNpZGVJbmZpbml0ZVNjcm9sbCIpfX07UChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZ3JpZE9wdGlvbnNTZXJ2aWNlIildLE0ucHJvdG90eXBlLCJncmlkT3B0aW9uc1NlcnZpY2UiLHZvaWQgMCksUChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sTS5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLE09UChbT2JqZWN0KHMuQmVhbikoInNzcm1TdG9yZUZhY3RvcnkiKV0sTSk7dmFyIEw9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IEY9Y2xhc3N7aXNTb3J0aW5nV2l0aFZhbHVlQ29sdW1uKGUpe2NvbnN0IHQ9dGhpcy5jb2x1bW5Nb2RlbC5nZXRWYWx1ZUNvbHVtbnMoKS5tYXAoZT0+ZS5nZXRDb2xJZCgpKTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krKylpZih0LmluZGV4T2YoZVtpXSk+LTEpcmV0dXJuITA7cmV0dXJuITF9aXNTb3J0aW5nV2l0aFNlY29uZGFyeUNvbHVtbihlKXtpZighdGhpcy5jb2x1bW5Nb2RlbC5nZXRTZWNvbmRhcnlDb2x1bW5zKCkpcmV0dXJuITE7Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldFNlY29uZGFyeUNvbHVtbnMoKS5tYXAoZT0+ZS5nZXRDb2xJZCgpKTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krKylpZih0LmluZGV4T2YoZVtpXSk+LTEpcmV0dXJuITA7cmV0dXJuITF9fTtMKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSxGLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksRj1MKFtPYmplY3Qocy5CZWFuKSgic3NybUxpc3RlbmVyVXRpbHMiKV0sRik7dmFyIEk9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgTiBleHRlbmRzIHMuQmVhblN0dWJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuc2VsZWN0ZWRTdGF0ZT17c2VsZWN0QWxsOiExLHRvZ2dsZWROb2RlczpuZXcgU2V0fSx0aGlzLmxhc3RTZWxlY3RlZD1udWxsLHRoaXMuc2VsZWN0QWxsVXNlZD0hMSx0aGlzLnNlbGVjdGVkTm9kZXM9e319aW5pdCgpe3RoaXMucm93U2VsZWN0aW9uPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgicm93U2VsZWN0aW9uIiksdGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigicm93U2VsZWN0aW9uIixlPT57dGhpcy5yb3dTZWxlY3Rpb249ZS5jdXJyZW50VmFsdWV9KX1nZXRTZWxlY3RlZFN0YXRlKCl7cmV0dXJue3NlbGVjdEFsbDp0aGlzLnNlbGVjdGVkU3RhdGUuc2VsZWN0QWxsLHRvZ2dsZWROb2RlczpbLi4udGhpcy5zZWxlY3RlZFN0YXRlLnRvZ2dsZWROb2Rlc119fXNldFNlbGVjdGVkU3RhdGUoZSl7Y29uc3QgdD17c2VsZWN0QWxsOiExLHRvZ2dsZWROb2RlczpuZXcgU2V0fTsib2JqZWN0Ij09dHlwZW9mIGU/InNlbGVjdEFsbCJpbiBlJiYiYm9vbGVhbiI9PXR5cGVvZiBlLnNlbGVjdEFsbD8odC5zZWxlY3RBbGw9ZS5zZWxlY3RBbGwsInRvZ2dsZWROb2RlcyJpbiBlJiZBcnJheS5pc0FycmF5KGUudG9nZ2xlZE5vZGVzKT8oZS50b2dnbGVkTm9kZXMuZm9yRWFjaChlPT57InN0cmluZyI9PXR5cGVvZiBlP3QudG9nZ2xlZE5vZGVzLmFkZChlKTpjb25zb2xlLndhcm4oIkFHIEdyaWQ6IFByb3ZpZGVkIGlkcyBtdXN0IGJlIG9mIHN0cmluZyB0eXBlLiBJbnZhbGlkIGlkIHByb3ZpZGVkOiAiK2UpfSksdGhpcy5zZWxlY3RlZFN0YXRlPXQpOmNvbnNvbGUuZXJyb3IoIkFHIEdyaWQ6IGB0b2dnbGVkTm9kZXNgIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5nIGlkcy4iKSk6Y29uc29sZS5lcnJvcigiQUcgR3JpZDogU2VsZWN0IGFsbCBzdGF0dXMgc2hvdWxkIGJlIG9mIGJvb2xlYW4gdHlwZS4iKTpjb25zb2xlLmVycm9yKCJBRyBHcmlkOiBUaGUgcHJvdmlkZWQgc2VsZWN0aW9uIHN0YXRlIHNob3VsZCBiZSBhbiBvYmplY3QuIil9ZGVsZXRlU2VsZWN0aW9uU3RhdGVGcm9tUGFyZW50KGUsdCl7aWYoMD09PXRoaXMuc2VsZWN0ZWRTdGF0ZS50b2dnbGVkTm9kZXMuc2l6ZSlyZXR1cm4hMTtsZXQgaT0hMTtyZXR1cm4gdC5mb3JFYWNoKGU9Pnt0aGlzLnNlbGVjdGVkU3RhdGUudG9nZ2xlZE5vZGVzLmRlbGV0ZShlKSYmKGk9ITApfSksaX1zZXROb2Rlc1NlbGVjdGVkKGUpe2lmKDA9PT1lLm5vZGVzLmxlbmd0aClyZXR1cm4gMDtjb25zdCB0PWUuY2xlYXJTZWxlY3Rpb24mJmUubmV3VmFsdWUmJiFlLnJhbmdlU2VsZWN0O2lmKCJtdWx0aXBsZSIhPT10aGlzLnJvd1NlbGVjdGlvbnx8dCl7aWYoZS5ub2Rlcy5sZW5ndGg+MSl0aHJvdyBuZXcgRXJyb3IoIkFHIEdyaWQ6IGNhbm5vdCBzZWxlY3QgbXVsdGlwbGUgcm93cyB3aGVuIHJvd1NlbGVjdGlvbiBpcyBzZXQgdG8gJ3NpbmdsZSciKTtjb25zdCB0PWUubm9kZXNbMF07cmV0dXJuIGUubmV3VmFsdWU/KHRoaXMuc2VsZWN0ZWROb2Rlcz17W3QuaWRdOnR9LHRoaXMuc2VsZWN0ZWRTdGF0ZT17c2VsZWN0QWxsOiExLHRvZ2dsZWROb2RlczpuZXcgU2V0KFt0LmlkXSl9KToodGhpcy5zZWxlY3RlZE5vZGVzPXt9LHRoaXMuc2VsZWN0ZWRTdGF0ZT17c2VsZWN0QWxsOiExLHRvZ2dsZWROb2RlczpuZXcgU2V0fSksdGhpcy5sYXN0U2VsZWN0ZWQ9dC5pZCwxfWNvbnN0IGk9dD0+e2UubmV3VmFsdWU/dGhpcy5zZWxlY3RlZE5vZGVzW3QuaWRdPXQ6ZGVsZXRlIHRoaXMuc2VsZWN0ZWROb2Rlc1t0LmlkXTtjb25zdCBpPXQuc2VsZWN0YWJsZTtlLm5ld1ZhbHVlPT09dGhpcy5zZWxlY3RlZFN0YXRlLnNlbGVjdEFsbHx8IWk/dGhpcy5zZWxlY3RlZFN0YXRlLnRvZ2dsZWROb2Rlcy5kZWxldGUodC5pZCk6dGhpcy5zZWxlY3RlZFN0YXRlLnRvZ2dsZWROb2Rlcy5hZGQodC5pZCl9O2lmKGUucmFuZ2VTZWxlY3QmJnRoaXMubGFzdFNlbGVjdGVkKXtpZihlLm5vZGVzLmxlbmd0aD4xKXRocm93IG5ldyBFcnJvcigiQUcgR3JpZDogY2Fubm90IHNlbGVjdCBtdWx0aXBsZSByb3dzIHdoZW4gdXNpbmcgcmFuZ2VTZWxlY3QiKTtjb25zdCB0PWUubm9kZXNbMF0scz10aGlzLnJvd01vZGVsLmdldFJvd05vZGUodGhpcy5sYXN0U2VsZWN0ZWQpO3JldHVybiB0aGlzLnJvd01vZGVsLmdldE5vZGVzSW5SYW5nZUZvclNlbGVjdGlvbih0LG51bGwhPXM/czpudWxsKS5mb3JFYWNoKGkpLHRoaXMubGFzdFNlbGVjdGVkPXQuaWQsMX1yZXR1cm4gZS5ub2Rlcy5mb3JFYWNoKGkpLHRoaXMubGFzdFNlbGVjdGVkPWUubm9kZXNbZS5ub2Rlcy5sZW5ndGgtMV0uaWQsMX1wcm9jZXNzTmV3Um93KGUpe3RoaXMuc2VsZWN0ZWROb2Rlc1tlLmlkXSYmKHRoaXMuc2VsZWN0ZWROb2Rlc1tlLmlkXT1lKX1pc05vZGVTZWxlY3RlZChlKXtjb25zdCB0PXRoaXMuc2VsZWN0ZWRTdGF0ZS50b2dnbGVkTm9kZXMuaGFzKGUuaWQpO3JldHVybiB0aGlzLnNlbGVjdGVkU3RhdGUuc2VsZWN0QWxsPyF0OnR9Z2V0U2VsZWN0ZWROb2Rlcygpe3JldHVybiB0aGlzLnNlbGVjdEFsbFVzZWQmJmNvbnNvbGUud2FybigiQUcgR3JpZDogZ2V0U2VsZWN0ZWROb2RlcyBhbmQgZ2V0U2VsZWN0ZWRSb3dzIGZ1bmN0aW9ucyBjYW5ub3QgYmUgdXNlZCB3aXRoIHNlbGVjdCBhbGwgZnVuY3Rpb25hbGl0eSB3aXRoIHRoZSBzZXJ2ZXItc2lkZSByb3cgbW9kZWwuXG4gICAgICAgICAgICAgICAgVXNlIGBhcGkuZ2V0U2VydmVyU2lkZVNlbGVjdGlvblN0YXRlKClgIGluc3RlYWQuIiksT2JqZWN0LnZhbHVlcyh0aGlzLnNlbGVjdGVkTm9kZXMpfWdldFNlbGVjdGVkUm93cygpe3JldHVybiB0aGlzLmdldFNlbGVjdGVkTm9kZXMoKS5tYXAoZT0+ZS5kYXRhKX1nZXRTZWxlY3Rpb25Db3VudCgpe3JldHVybiB0aGlzLnNlbGVjdGVkU3RhdGUuc2VsZWN0QWxsPy0xOnRoaXMuc2VsZWN0ZWRTdGF0ZS50b2dnbGVkTm9kZXMuc2l6ZX1jbGVhck90aGVyTm9kZXMoZSx0KXtjb25zdCBpPXRoaXMuc2VsZWN0ZWRTdGF0ZS5zZWxlY3RBbGw/MTp0aGlzLnNlbGVjdGVkU3RhdGUudG9nZ2xlZE5vZGVzLnNpemUtMTt0aGlzLnNlbGVjdGVkU3RhdGU9e3NlbGVjdEFsbDohMSx0b2dnbGVkTm9kZXM6bmV3IFNldChbZS5pZF0pfSx0aGlzLnJvd01vZGVsLmZvckVhY2hOb2RlKGk9PntpIT09ZSYmaS5zZWxlY3RUaGlzTm9kZSghMSx2b2lkIDAsdCl9KTtjb25zdCByPXt0eXBlOnMuRXZlbnRzLkVWRU5UX1NFTEVDVElPTl9DSEFOR0VELHNvdXJjZTp0fTtyZXR1cm4gdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChyKSxpfWlzRW1wdHkoKXt2YXIgZTtyZXR1cm4hdGhpcy5zZWxlY3RlZFN0YXRlLnNlbGVjdEFsbCYmIShudWxsPT09KGU9dGhpcy5zZWxlY3RlZFN0YXRlLnRvZ2dsZWROb2Rlcyl8fHZvaWQgMD09PWU/dm9pZCAwOmUuc2l6ZSl9c2VsZWN0QWxsUm93Tm9kZXMoZSl7dGhpcy5zZWxlY3RlZFN0YXRlPXtzZWxlY3RBbGw6ITAsdG9nZ2xlZE5vZGVzOm5ldyBTZXR9LHRoaXMuc2VsZWN0ZWROb2Rlcz17fSx0aGlzLnNlbGVjdEFsbFVzZWQ9ITB9ZGVzZWxlY3RBbGxSb3dOb2RlcyhlKXt0aGlzLnNlbGVjdGVkU3RhdGU9e3NlbGVjdEFsbDohMSx0b2dnbGVkTm9kZXM6bmV3IFNldH0sdGhpcy5zZWxlY3RlZE5vZGVzPXt9fWdldFNlbGVjdEFsbFN0YXRlKGUsdCl7cmV0dXJuIHRoaXMuc2VsZWN0ZWRTdGF0ZS5zZWxlY3RBbGw/ISh0aGlzLnNlbGVjdGVkU3RhdGUudG9nZ2xlZE5vZGVzLnNpemU+MCl8fG51bGw6dGhpcy5zZWxlY3RlZFN0YXRlLnRvZ2dsZWROb2Rlcy5zaXplPjAmJm51bGx9fUkoW09iamVjdChzLkF1dG93aXJlZCkoInJvd01vZGVsIildLE4ucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSxJKFtzLlBvc3RDb25zdHJ1Y3RdLE4ucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgRz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufSxrPWZ1bmN0aW9uKGUsdCl7dmFyIGk9e307Zm9yKHZhciBzIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscykmJnQuaW5kZXhPZihzKTwwJiYoaVtzXT1lW3NdKTtpZihudWxsIT1lJiYiZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3Iocz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8cy5sZW5ndGg7cisrKXQuaW5kZXhPZihzW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxzW3JdKSYmKGlbc1tyXV09ZVtzW3JdXSl9cmV0dXJuIGl9O2NsYXNzIF8gZXh0ZW5kcyBzLkJlYW5TdHVie2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnNlbGVjdGVkU3RhdGU9e3NlbGVjdEFsbENoaWxkcmVuOiExLHRvZ2dsZWROb2RlczpuZXcgTWFwfSx0aGlzLmxhc3RTZWxlY3RlZD1udWxsfWluaXQoKXt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9NT0RFTF9VUERBVEVELCgpPT50aGlzLnJlbW92ZVJlZHVuZGFudFN0YXRlKCkpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX0NPTFVNTl9ST1dfR1JPVVBfQ0hBTkdFRCwoKT0+dGhpcy5zZWxlY3Rpb25TZXJ2aWNlLnJlc2V0KCJyb3dHcm91cENoYW5nZWQiKSl9Z2V0U2VsZWN0ZWRTdGF0ZSgpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpLHQ9KGkscyxyKT0+e2NvbnN0IG89e25vZGVJZDpyfTtpZigoZXx8czw9dGhpcy5jb2x1bW5Nb2RlbC5nZXRSb3dHcm91cENvbHVtbnMoKS5sZW5ndGgpJiYoby5zZWxlY3RBbGxDaGlsZHJlbj1pLnNlbGVjdEFsbENoaWxkcmVuKSxpLnRvZ2dsZWROb2Rlcy5zaXplKXtjb25zdCBlPVtdO2kudG9nZ2xlZE5vZGVzLmZvckVhY2goKGkscik9Pntjb25zdCBvPXQoaSxzKzEscik7ZS5wdXNoKG8pfSksby50b2dnbGVkTm9kZXM9ZX1yZXR1cm4gb307cmV0dXJuIHQodGhpcy5zZWxlY3RlZFN0YXRlLDApfXNldFNlbGVjdGVkU3RhdGUoZSl7Y29uc3QgdD0oZSxpKT0+e3ZhciBzLHI7aWYoIm9iamVjdCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcigiQUcgR3JpZDogRWFjaCBwcm92aWRlZCBzdGF0ZSBvYmplY3QgbXVzdCBiZSBhbiBvYmplY3QuIik7aWYoInNlbGVjdEFsbENoaWxkcmVuImluIGUmJiJib29sZWFuIiE9dHlwZW9mIGUuc2VsZWN0QWxsQ2hpbGRyZW4pdGhyb3cgbmV3IEVycm9yKCJBRyBHcmlkOiBgc2VsZWN0QWxsQ2hpbGRyZW5gIG11c3QgYmUgYSBib29sZWFuIHZhbHVlIG9yIHVuZGVmaW5lZC4iKTtpZigidG9nZ2xlZE5vZGVzImluIGUpe2lmKCFBcnJheS5pc0FycmF5KGUudG9nZ2xlZE5vZGVzKSl0aHJvdyBuZXcgRXJyb3IoIkFHIEdyaWQ6IGB0b2dnbGVkTm9kZXNgIG11c3QgYmUgYW4gYXJyYXkuIik7aWYoIWUudG9nZ2xlZE5vZGVzLmV2ZXJ5KGU9PiJvYmplY3QiPT10eXBlb2YgZSYmIm5vZGVJZCJpbiBlJiYic3RyaW5nIj09dHlwZW9mIGUubm9kZUlkKSl0aHJvdyBuZXcgRXJyb3IoIkFHIEdyaWQ6IEV2ZXJ5IGB0b2dnbGVkTm9kZWAgcmVxdWlyZXMgYW4gYXNzb2NpYXRlZCBzdHJpbmcgaWQuIil9Y29uc3Qgbz1udWxsIT09KHM9ZS5zZWxlY3RBbGxDaGlsZHJlbikmJnZvaWQgMCE9PXM/czohaSxuPW51bGw9PT0ocj1lLnRvZ2dsZWROb2Rlcyl8fHZvaWQgMD09PXI/dm9pZCAwOnIubWFwKGU9PltlLm5vZGVJZCx0KGUsbyldKTtpZihudWxsPT1uP3ZvaWQgMDpuLnNvbWUoKFtlLHRdKT0+bz09PXQuc2VsZWN0QWxsQ2hpbGRyZW4mJjA9PT10LnRvZ2dsZWROb2Rlcy5zaXplKSl0aHJvdyBuZXcgRXJyb3IoIlxuICAgICAgICAgICAgICAgICAgICBBRyBHcmlkOiBBRyBHcmlkOiBSb3cgc2VsZWN0aW9uIHN0YXRlIGNvdWxkIG5vdCBiZSBwYXJzZWQgZHVlIHRvIGludmFsaWQgZGF0YS4gRW5zdXJlIGFsbCBjaGlsZCBzdGF0ZSBoYXMgdG9nZ2xlZE5vZGVzIG9yIGRvZXMgbm90IGNvbmZvcm0gd2l0aCB0aGUgcGFyZW50IHJ1bGUuXG4gICAgICAgICAgICAgICAgICAgIFBsZWFzZSByZWJ1aWxkIHRoZSBzZWxlY3Rpb24gc3RhdGUgYW5kIHJlYXBwbHkgaXQuXG4gICAgICAgICAgICAgICAgIik7cmV0dXJue3NlbGVjdEFsbENoaWxkcmVuOm8sdG9nZ2xlZE5vZGVzOm5ldyBNYXAobil9fTt0cnl7dGhpcy5zZWxlY3RlZFN0YXRlPXQoZSwhIWUuc2VsZWN0QWxsQ2hpbGRyZW4pfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZS5tZXNzYWdlKX19ZGVsZXRlU2VsZWN0aW9uU3RhdGVGcm9tUGFyZW50KGUsdCl7bGV0IGk9dGhpcy5zZWxlY3RlZFN0YXRlO2NvbnN0IHM9Wy4uLmVdO2Zvcig7aSYmcy5sZW5ndGg7KWk9aS50b2dnbGVkTm9kZXMuZ2V0KHMucG9wKCkpO2lmKCFpKXJldHVybiExO2xldCByPSExO3JldHVybiB0LmZvckVhY2goZT0+eyhudWxsPT1pP3ZvaWQgMDppLnRvZ2dsZWROb2Rlcy5kZWxldGUoZSkpJiYocj0hMCl9KSxyJiZ0aGlzLnJlbW92ZVJlZHVuZGFudFN0YXRlKCkscn1zZXROb2Rlc1NlbGVjdGVkKGUpe2NvbnN0e25vZGVzOnR9PWUsaT1rKGUsWyJub2RlcyJdKTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIDA7aWYoZS5yYW5nZVNlbGVjdCl7aWYodC5sZW5ndGg+MSl0aHJvdyBuZXcgRXJyb3IoIkFHIEdyaWQ6IGNhbm5vdCBzZWxlY3QgbXVsdGlwbGUgcm93cyB3aGVuIHVzaW5nIHJhbmdlU2VsZWN0Iik7Y29uc3QgZT10WzBdLHM9dGhpcy5yb3dNb2RlbC5nZXROb2Rlc0luUmFuZ2VGb3JTZWxlY3Rpb24oZSx0aGlzLmxhc3RTZWxlY3RlZCkubWFwKHRoaXMuZ2V0Um91dGVUb05vZGUpLnNvcnQoKGUsdCk9PnQubGVuZ3RoLWUubGVuZ3RoKSxyPW5ldyBTZXQ7cmV0dXJuIHMuZm9yRWFjaCh0PT57ci5oYXModFt0Lmxlbmd0aC0xXSl8fCh0LmZvckVhY2goZT0+ci5hZGQoZSkpLHRoaXMucmVjdXJzaXZlbHlTZWxlY3ROb2RlKHQsdGhpcy5zZWxlY3RlZFN0YXRlLE9iamVjdC5hc3NpZ24oe25vZGU6ZX0saSkpKX0pLHRoaXMucmVtb3ZlUmVkdW5kYW50U3RhdGUoKSx0aGlzLmxhc3RTZWxlY3RlZD1lLDF9cmV0dXJuIGUubm9kZXMuZm9yRWFjaChlPT57Y29uc3QgdD10aGlzLmdldFJvdXRlVG9Ob2RlKGUpO3RoaXMucmVjdXJzaXZlbHlTZWxlY3ROb2RlKHQsdGhpcy5zZWxlY3RlZFN0YXRlLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxpKSx7bm9kZTplfSkpfSksdGhpcy5yZW1vdmVSZWR1bmRhbnRTdGF0ZSgpLHRoaXMubGFzdFNlbGVjdGVkPWUubm9kZXNbZS5ub2Rlcy5sZW5ndGgtMV0sMX1pc05vZGVTZWxlY3RlZChlKXtjb25zdCB0PXRoaXMuZ2V0Um91dGVUb05vZGUoZSk7cmV0dXJuIHRoaXMuaXNOb2RlUGF0aFNlbGVjdGVkKHQsdGhpcy5zZWxlY3RlZFN0YXRlKX1pc05vZGVQYXRoU2VsZWN0ZWQoW2UsLi4udF0saSl7aWYoMD09PXQubGVuZ3RoKXtjb25zdCB0PWkudG9nZ2xlZE5vZGVzLmhhcyhlLmlkKTtpZihlLmhhc0NoaWxkcmVuKCkpe2NvbnN0IHQ9aS50b2dnbGVkTm9kZXMuZ2V0KGUuaWQpO2lmKHQmJnQudG9nZ2xlZE5vZGVzLnNpemUpcmV0dXJufXJldHVybiBpLnNlbGVjdEFsbENoaWxkcmVuPyF0OnR9aWYoaS50b2dnbGVkTm9kZXMuaGFzKGUuaWQpKXtjb25zdCBzPWkudG9nZ2xlZE5vZGVzLmdldChlLmlkKTtpZihzKXJldHVybiB0aGlzLmlzTm9kZVBhdGhTZWxlY3RlZCh0LHMpfXJldHVybiEhaS5zZWxlY3RBbGxDaGlsZHJlbn1nZXRSb3V0ZVRvTm9kZShlKXtjb25zdCB0PVtdO2xldCBpPWU7Zm9yKDtpLnBhcmVudDspdC5wdXNoKGkpLGk9aS5wYXJlbnQ7cmV0dXJuIHQucmV2ZXJzZSgpfXJlbW92ZVJlZHVuZGFudFN0YXRlKCl7aWYodGhpcy5maWx0ZXJNYW5hZ2VyLmlzQW55RmlsdGVyUHJlc2VudCgpKXJldHVybjtjb25zdCBlPSh0PXRoaXMuc2VsZWN0ZWRTdGF0ZSxpLHMpPT57aWYodC50b2dnbGVkTm9kZXMuZm9yRWFjaCgoaSxzKT0+e2UoaSxzLHQpfSksaSl7Y29uc3QgZT10aGlzLnJvd01vZGVsLmdldFJvd05vZGUoaSkscz1udWxsPT1lP3ZvaWQgMDplLmNoaWxkU3RvcmU7aWYobnVsbD09cz92b2lkIDA6cy5pc0xhc3RSb3dJbmRleEtub3duKCkpe2lmKHQudG9nZ2xlZE5vZGVzLnNpemU+PXMuZ2V0Um93Q291bnQoKSl7Zm9yKGNvbnN0IGUgb2YgdC50b2dnbGVkTm9kZXMuZW50cmllcygpKXtjb25zdFt0LGldPWU7aWYoaS50b2dnbGVkTm9kZXMuc2l6ZT4wKXJldHVybjtpZighdGhpcy5yb3dNb2RlbC5nZXRSb3dOb2RlKHQpKXJldHVybn10LnNlbGVjdEFsbENoaWxkcmVuPSF0LnNlbGVjdEFsbENoaWxkcmVuLHQudG9nZ2xlZE5vZGVzLmNsZWFyKCl9fX1jb25zdCByPTA9PT10LnRvZ2dsZWROb2Rlcy5zaXplLG89KG51bGw9PXM/dm9pZCAwOnMuc2VsZWN0QWxsQ2hpbGRyZW4pPT09dC5zZWxlY3RBbGxDaGlsZHJlbjtyJiZvJiYobnVsbD09c3x8cy50b2dnbGVkTm9kZXMuZGVsZXRlKGkpKX07ZSgpfXJlY3Vyc2l2ZWx5U2VsZWN0Tm9kZShbZSwuLi50XSxpLHMpe2lmKCFlKXJldHVybjtpZighdC5sZW5ndGgpe2NvbnN0IHQ9ZS5zZWxlY3RhYmxlO2lmKGkuc2VsZWN0QWxsQ2hpbGRyZW49PT1zLm5ld1ZhbHVlfHwhdClyZXR1cm4gdm9pZCBpLnRvZ2dsZWROb2Rlcy5kZWxldGUoZS5pZCk7Y29uc3Qgcj17c2VsZWN0QWxsQ2hpbGRyZW46cy5uZXdWYWx1ZSx0b2dnbGVkTm9kZXM6bmV3IE1hcH07cmV0dXJuIHZvaWQgaS50b2dnbGVkTm9kZXMuc2V0KGUuaWQscil9Y29uc3Qgcj1pLnRvZ2dsZWROb2Rlcy5oYXMoZS5pZCksbz1yP2kudG9nZ2xlZE5vZGVzLmdldChlLmlkKTp7c2VsZWN0QWxsQ2hpbGRyZW46aS5zZWxlY3RBbGxDaGlsZHJlbix0b2dnbGVkTm9kZXM6bmV3IE1hcH07cnx8aS50b2dnbGVkTm9kZXMuc2V0KGUuaWQsbyksdGhpcy5yZWN1cnNpdmVseVNlbGVjdE5vZGUodCxvLHMpLGkuc2VsZWN0QWxsQ2hpbGRyZW49PT1vLnNlbGVjdEFsbENoaWxkcmVuJiYwPT09by50b2dnbGVkTm9kZXMuc2l6ZSYmaS50b2dnbGVkTm9kZXMuZGVsZXRlKGUuaWQpfWdldFNlbGVjdGVkTm9kZXMoKXtjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGBnZXRTZWxlY3RlZE5vZGVzYCBhbmQgYGdldFNlbGVjdGVkUm93c2AgZnVuY3Rpb25zIGNhbm5vdCBiZSB1c2VkIHdpdGggYGdyb3VwU2VsZWN0c0NoaWxkcmVuYCBhbmQgdGhlIHNlcnZlci1zaWRlIHJvdyBtb2RlbC5cbiAgICAgICAgICAgIFVzZSBgYXBpLmdldFNlcnZlclNpZGVTZWxlY3Rpb25TdGF0ZSgpYCBpbnN0ZWFkLiIpO2NvbnN0IGU9W107cmV0dXJuIHRoaXMucm93TW9kZWwuZm9yRWFjaE5vZGUodD0+e3QuaXNTZWxlY3RlZCgpJiZlLnB1c2godCl9KSxlfXByb2Nlc3NOZXdSb3coZSl7fWdldFNlbGVjdGVkUm93cygpe3JldHVybiB0aGlzLmdldFNlbGVjdGVkTm9kZXMoKS5tYXAoZT0+ZS5kYXRhKX1nZXRTZWxlY3Rpb25Db3VudCgpe3JldHVybi0xfWlzRW1wdHkoKXt2YXIgZTtyZXR1cm4hdGhpcy5zZWxlY3RlZFN0YXRlLnNlbGVjdEFsbENoaWxkcmVuJiYhKG51bGw9PT0oZT10aGlzLnNlbGVjdGVkU3RhdGUudG9nZ2xlZE5vZGVzKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zaXplKX1zZWxlY3RBbGxSb3dOb2RlcyhlKXt0aGlzLnNlbGVjdGVkU3RhdGU9e3NlbGVjdEFsbENoaWxkcmVuOiEwLHRvZ2dsZWROb2RlczpuZXcgTWFwfX1kZXNlbGVjdEFsbFJvd05vZGVzKGUpe3RoaXMuc2VsZWN0ZWRTdGF0ZT17c2VsZWN0QWxsQ2hpbGRyZW46ITEsdG9nZ2xlZE5vZGVzOm5ldyBNYXB9fWdldFNlbGVjdEFsbFN0YXRlKGUsdCl7cmV0dXJuIHRoaXMuc2VsZWN0ZWRTdGF0ZS5zZWxlY3RBbGxDaGlsZHJlbj8hKHRoaXMuc2VsZWN0ZWRTdGF0ZS50b2dnbGVkTm9kZXMuc2l6ZT4wKXx8bnVsbDp0aGlzLnNlbGVjdGVkU3RhdGUudG9nZ2xlZE5vZGVzLnNpemU+MCYmbnVsbH19RyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93TW9kZWwiKV0sXy5wcm90b3R5cGUsInJvd01vZGVsIix2b2lkIDApLEcoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLF8ucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxHKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmaWx0ZXJNYW5hZ2VyIildLF8ucHJvdG90eXBlLCJmaWx0ZXJNYW5hZ2VyIix2b2lkIDApLEcoW09iamVjdChzLkF1dG93aXJlZCkoInJvd01vZGVsIildLF8ucHJvdG90eXBlLCJzZXJ2ZXJTaWRlUm93TW9kZWwiLHZvaWQgMCksRyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgic2VsZWN0aW9uU2VydmljZSIpXSxfLnByb3RvdHlwZSwic2VsZWN0aW9uU2VydmljZSIsdm9pZCAwKSxHKFtzLlBvc3RDb25zdHJ1Y3RdLF8ucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgVj1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufSxCPWZ1bmN0aW9uKGUsdCl7dmFyIGk9e307Zm9yKHZhciBzIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscykmJnQuaW5kZXhPZihzKTwwJiYoaVtzXT1lW3NdKTtpZihudWxsIT1lJiYiZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9MDtmb3Iocz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3I8cy5sZW5ndGg7cisrKXQuaW5kZXhPZihzW3JdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxzW3JdKSYmKGlbc1tyXV09ZVtzW3JdXSl9cmV0dXJuIGl9O2xldCBIPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1Yntpbml0KCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwU2VsZWN0c0NoaWxkcmVuIik7dGhpcy5hZGRNYW5hZ2VkUHJvcGVydHlMaXN0ZW5lcigiZ3JvdXBTZWxlY3RzQ2hpbGRyZW4iLGU9Pnt0aGlzLmRlc3Ryb3lCZWFuKHRoaXMuc2VsZWN0aW9uU3RyYXRlZ3kpO2NvbnN0IHQ9ZS5jdXJyZW50VmFsdWU/XzpOO3RoaXMuc2VsZWN0aW9uU3RyYXRlZ3k9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgdCksdGhpcy5zaG90Z3VuUmVzZXROb2RlU2VsZWN0aW9uU3RhdGUoKTtjb25zdCBpPXt0eXBlOnMuRXZlbnRzLkVWRU5UX1NFTEVDVElPTl9DSEFOR0VELHNvdXJjZToiYXBpIn07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChpKX0pLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoInJvd1NlbGVjdGlvbiIsKCk9PnRoaXMuZGVzZWxlY3RBbGxSb3dOb2Rlcyh7c291cmNlOiJhcGkifSkpO2NvbnN0IHQ9ZT9fOk47dGhpcy5zZWxlY3Rpb25TdHJhdGVneT10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyB0KX1nZXRTZWxlY3Rpb25TdGF0ZSgpe3JldHVybiB0aGlzLnNlbGVjdGlvblN0cmF0ZWd5LmdldFNlbGVjdGVkU3RhdGUoKX1zZXRTZWxlY3Rpb25TdGF0ZShlLHQpe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuO3RoaXMuc2VsZWN0aW9uU3RyYXRlZ3kuc2V0U2VsZWN0ZWRTdGF0ZShlKSx0aGlzLnNob3RndW5SZXNldE5vZGVTZWxlY3Rpb25TdGF0ZSgpO2NvbnN0IGk9e3R5cGU6cy5FdmVudHMuRVZFTlRfU0VMRUNUSU9OX0NIQU5HRUQsc291cmNlOnR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoaSl9c2V0Tm9kZXNTZWxlY3RlZChlKXtjb25zdHtub2Rlczp0fT1lLGk9QihlLFsibm9kZXMiXSkscj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInJvd1NlbGVjdGlvbiIpO2lmKHQubGVuZ3RoPjEmJiJtdWx0aXBsZSIhPT1yKXJldHVybiBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGNhbm5vdCBtdWx0aSBzZWxlY3Qgd2hpbGUgcm93U2VsZWN0aW9uPSdzaW5nbGUnIiksMDtpZih0Lmxlbmd0aD4xJiZlLnJhbmdlU2VsZWN0KXJldHVybiBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGNhbm5vdCB1c2UgcmFuZ2Ugc2VsZWN0aW9uIHdoZW4gbXVsdGkgc2VsZWN0aW5nIHJvd3MiKSwwO2NvbnN0IG89T2JqZWN0LmFzc2lnbih7bm9kZXM6dC5maWx0ZXIoZT0+ZS5zZWxlY3RhYmxlKX0saSk7aWYoIW8ubm9kZXMubGVuZ3RoKXJldHVybiAwO2NvbnN0IG49dGhpcy5zZWxlY3Rpb25TdHJhdGVneS5zZXROb2Rlc1NlbGVjdGVkKG8pO3RoaXMuc2hvdGd1blJlc2V0Tm9kZVNlbGVjdGlvblN0YXRlKG8uc291cmNlKTtjb25zdCBhPXt0eXBlOnMuRXZlbnRzLkVWRU5UX1NFTEVDVElPTl9DSEFOR0VELHNvdXJjZTpvLnNvdXJjZX07cmV0dXJuIHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoYSksbn1kZWxldGVTZWxlY3Rpb25TdGF0ZUZyb21QYXJlbnQoZSx0KXtpZighdGhpcy5zZWxlY3Rpb25TdHJhdGVneS5kZWxldGVTZWxlY3Rpb25TdGF0ZUZyb21QYXJlbnQoZSx0KSlyZXR1cm47dGhpcy5zaG90Z3VuUmVzZXROb2RlU2VsZWN0aW9uU3RhdGUoKTtjb25zdCBpPXt0eXBlOnMuRXZlbnRzLkVWRU5UX1NFTEVDVElPTl9DSEFOR0VELHNvdXJjZToiYXBpIn07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChpKX1zaG90Z3VuUmVzZXROb2RlU2VsZWN0aW9uU3RhdGUoZSl7dGhpcy5yb3dNb2RlbC5mb3JFYWNoTm9kZSh0PT57aWYodC5zdHViKXJldHVybjtjb25zdCBpPXRoaXMuc2VsZWN0aW9uU3RyYXRlZ3kuaXNOb2RlU2VsZWN0ZWQodCk7aSE9PXQuaXNTZWxlY3RlZCgpJiZ0LnNlbGVjdFRoaXNOb2RlKGksdm9pZCAwLGUpfSl9Z2V0U2VsZWN0ZWROb2Rlcygpe3JldHVybiB0aGlzLnNlbGVjdGlvblN0cmF0ZWd5LmdldFNlbGVjdGVkTm9kZXMoKX1nZXRTZWxlY3RlZFJvd3MoKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb25TdHJhdGVneS5nZXRTZWxlY3RlZFJvd3MoKX1nZXRTZWxlY3Rpb25Db3VudCgpe3JldHVybiB0aGlzLnNlbGVjdGlvblN0cmF0ZWd5LmdldFNlbGVjdGlvbkNvdW50KCl9c3luY0luUm93Tm9kZShlLHQpe3RoaXMuc2VsZWN0aW9uU3RyYXRlZ3kucHJvY2Vzc05ld1JvdyhlKTtjb25zdCBpPXRoaXMuc2VsZWN0aW9uU3RyYXRlZ3kuaXNOb2RlU2VsZWN0ZWQoZSk7aWYoMD09aXx8ZS5zZWxlY3RhYmxlKWUuc2V0U2VsZWN0ZWRJbml0aWFsVmFsdWUoaSk7ZWxzZXt0aGlzLnNlbGVjdGlvblN0cmF0ZWd5LnNldE5vZGVzU2VsZWN0ZWQoe25vZGVzOltlXSxuZXdWYWx1ZTohMSxzb3VyY2U6ImFwaSJ9KSx0aGlzLnNob3RndW5SZXNldE5vZGVTZWxlY3Rpb25TdGF0ZSgpO2NvbnN0IHQ9e3R5cGU6cy5FdmVudHMuRVZFTlRfU0VMRUNUSU9OX0NIQU5HRUQsc291cmNlOiJhcGkifTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfX1yZXNldCgpe3RoaXMuc2VsZWN0aW9uU3RyYXRlZ3kuZGVzZWxlY3RBbGxSb3dOb2Rlcyh7c291cmNlOiJhcGkifSl9aXNFbXB0eSgpe3JldHVybiB0aGlzLnNlbGVjdGlvblN0cmF0ZWd5LmlzRW1wdHkoKX1oYXNOb2Rlc1RvU2VsZWN0KGU9ITEsdD0hMSl7cmV0dXJuITB9c2VsZWN0QWxsUm93Tm9kZXMoZSl7KGUuanVzdEN1cnJlbnRQYWdlfHxlLmp1c3RGaWx0ZXJlZCkmJmNvbnNvbGUud2FybigiQUcgR3JpZDogc2VsZWN0aW5nIGp1c3QgZmlsdGVyZWQgb25seSB3b3JrcyB3aGVuIGdyaWRPcHRpb25zLnJvd01vZGVsVHlwZT0nY2xpZW50U2lkZSciKSx0aGlzLnNlbGVjdGlvblN0cmF0ZWd5LnNlbGVjdEFsbFJvd05vZGVzKGUpLHRoaXMucm93TW9kZWwuZm9yRWFjaE5vZGUodD0+e3Quc3R1Ynx8dC5zZWxlY3RUaGlzTm9kZSghMCx2b2lkIDAsZS5zb3VyY2UpfSk7Y29uc3QgdD17dHlwZTpzLkV2ZW50cy5FVkVOVF9TRUxFQ1RJT05fQ0hBTkdFRCxzb3VyY2U6ZS5zb3VyY2V9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9ZGVzZWxlY3RBbGxSb3dOb2RlcyhlKXsoZS5qdXN0Q3VycmVudFBhZ2V8fGUuanVzdEZpbHRlcmVkKSYmY29uc29sZS53YXJuKCJBRyBHcmlkOiBzZWxlY3RpbmcganVzdCBmaWx0ZXJlZCBvbmx5IHdvcmtzIHdoZW4gZ3JpZE9wdGlvbnMucm93TW9kZWxUeXBlPSdjbGllbnRTaWRlJyIpLHRoaXMuc2VsZWN0aW9uU3RyYXRlZ3kuZGVzZWxlY3RBbGxSb3dOb2RlcyhlKSx0aGlzLnJvd01vZGVsLmZvckVhY2hOb2RlKHQ9Pnt0LnN0dWJ8fHQuc2VsZWN0VGhpc05vZGUoITEsdm9pZCAwLGUuc291cmNlKX0pO2NvbnN0IHQ9e3R5cGU6cy5FdmVudHMuRVZFTlRfU0VMRUNUSU9OX0NIQU5HRUQsc291cmNlOmUuc291cmNlfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHQpfWdldFNlbGVjdEFsbFN0YXRlKGUsdCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uU3RyYXRlZ3kuZ2V0U2VsZWN0QWxsU3RhdGUoZSx0KX11cGRhdGVHcm91cHNGcm9tQ2hpbGRyZW5TZWxlY3Rpb25zKGUsdCl7cmV0dXJuITF9Z2V0QmVzdENvc3ROb2RlU2VsZWN0aW9uKCl7Y29uc29sZS53YXJuKCJBRyBHcmlkOiBjYWxsaW5nIGdyaWRBcGkuZ2V0QmVzdENvc3ROb2RlU2VsZWN0aW9uKCkgaXMgb25seSBwb3NzaWJsZSB3aGVuIHVzaW5nIHJvd01vZGVsVHlwZT1gY2xpZW50U2lkZWAuIil9ZmlsdGVyRnJvbVNlbGVjdGlvbigpe319O1YoW09iamVjdChzLkF1dG93aXJlZCkoInJvd01vZGVsIildLEgucHJvdG90eXBlLCJyb3dNb2RlbCIsdm9pZCAwKSxWKFtzLlBvc3RDb25zdHJ1Y3RdLEgucHJvdG90eXBlLCJpbml0IixudWxsKSxIPVYoW09iamVjdChzLkJlYW4pKCJzZWxlY3Rpb25TZXJ2aWNlIildLEgpO3ZhciBXPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBqPWNsYXNzIGV4dGVuZHMgcy5FeHBhbnNpb25TZXJ2aWNle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnF1ZXVlZFJvd0lkcz1uZXcgU2V0fXBvc3RDb25zdHJ1Y3QoKXtzdXBlci5wb3N0Q29uc3RydWN0KCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfQ09MVU1OX1JPV19HUk9VUF9DSEFOR0VELCgpPT57dGhpcy5xdWV1ZWRSb3dJZHMuY2xlYXIoKX0pfWNoZWNrT3BlbkJ5RGVmYXVsdChlKXtpZighZS5pc0V4cGFuZGFibGUoKSlyZXR1cm47Y29uc3QgdD0oKT0+e3dpbmRvdy5zZXRUaW1lb3V0KCgpPT5lLnNldEV4cGFuZGVkKCEwKSwwKX07aWYodGhpcy5xdWV1ZWRSb3dJZHMuaGFzKGUuaWQpKXJldHVybiB0aGlzLnF1ZXVlZFJvd0lkcy5kZWxldGUoZS5pZCksdm9pZCB0KCk7Y29uc3QgaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiaXNTZXJ2ZXJTaWRlR3JvdXBPcGVuQnlEZWZhdWx0Iik7aWYoIWkpcmV0dXJuO2koe2RhdGE6ZS5kYXRhLHJvd05vZGU6ZX0pJiZ0KCl9ZXhwYW5kUm93cyhlKXtlLmZvckVhY2goZT0+e2NvbnN0IHQ9dGhpcy5zZXJ2ZXJTaWRlUm93TW9kZWwuZ2V0Um93Tm9kZShlKTt0P3Quc2V0RXhwYW5kZWQoITApOnRoaXMucXVldWVkUm93SWRzLmFkZChlKX0pfWV4cGFuZEFsbChlKXt0aGlzLnNlcnZlclNpZGVSb3dNb2RlbC5leHBhbmRBbGwoZSl9b25Hcm91cEV4cGFuZGVkT3JDb2xsYXBzZWQoKXt9fTtXKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dNb2RlbCIpXSxqLnByb3RvdHlwZSwic2VydmVyU2lkZVJvd01vZGVsIix2b2lkIDApLGo9VyhbT2JqZWN0KHMuQmVhbikoImV4cGFuc2lvblNlcnZpY2UiKV0saik7Y29uc3QgVT17dmVyc2lvbjoiMzEuMS4xIixtb2R1bGVOYW1lOnMuTW9kdWxlTmFtZXMuU2VydmVyU2lkZVJvd01vZGVsTW9kdWxlLHJvd01vZGVsOiJzZXJ2ZXJTaWRlIixiZWFuczpbbSx4LEQsdix5LHcsRSxBLE0sRixILGpdLGRlcGVuZGFudE1vZHVsZXM6W3IuRW50ZXJwcmlzZUNvcmVNb2R1bGVdfTtpLmQodCwiU2VydmVyU2lkZVJvd01vZGVsTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gVX0pKX0sZnVuY3Rpb24oZSx0LGkpeyJ1c2Ugc3RyaWN0IjtpLnIodCk7dmFyIHM9aSgwKSxyPWkoMyksbz1pKDEpO2NvbnN0e2V4dGVudDpuLGlzTnVtYmVyOmEsaXNTdHJpbmc6bCxpc1N0cmluZ09iamVjdDpkLGlzRGF0ZTpjLGNyZWF0ZUlkOmgsUGFkZGluZzp1fT1vLmsse0xpbmVhclNjYWxlOnAsQmFuZFNjYWxlOmcsVGltZVNjYWxlOm19PW8uaDt2YXIgZjshZnVuY3Rpb24oZSl7ZVtlLlNFUklFU19GSUxMX1pJTkRFWD01MF09IlNFUklFU19GSUxMX1pJTkRFWCIsZVtlLkFYSVNfTElORV9aSU5ERVg9NTAwXT0iQVhJU19MSU5FX1pJTkRFWCIsZVtlLlNFUklFU19TVFJPS0VfWklOREVYPTFlM109IlNFUklFU19TVFJPS0VfWklOREVYIixlW2UuU0VSSUVTX0xBQkVMX1pJTkRFWD0xNTAwXT0iU0VSSUVTX0xBQkVMX1pJTkRFWCIsZVtlLkNST1NTSEFJUl9aSU5ERVg9MmUzXT0iQ1JPU1NIQUlSX1pJTkRFWCIsZVtlLlNFUklFU19NQVJLRVJTX1pJTkRFWD0yNTAwXT0iU0VSSUVTX01BUktFUlNfWklOREVYIn0oZnx8KGY9e30pKTtjbGFzcyB2e2NvbnN0cnVjdG9yKCl7dGhpcy50eXBlPSJjYXRlZ29yeSIsdGhpcy5zdHJva2U9InJnYigyMDQsIDIxNCwgMjM1KSIsdGhpcy5zdHJva2VXaWR0aD0xfX1jbGFzcyBDe2NvbnN0cnVjdG9yKCl7dGhpcy5pZD1oKHRoaXMpLHRoaXMuc2VyaWVzUmVjdD17eDowLHk6MCx3aWR0aDowLGhlaWdodDowfSx0aGlzLl9jb250ZXh0PXZvaWQgMCx0aGlzLl9jb250YWluZXI9dm9pZCAwLHRoaXMuX2RhdGE9dm9pZCAwLHRoaXMucGFkZGluZz1uZXcgdSgzKSx0aGlzLnhLZXk9IngiLHRoaXMueUtleT0ieSIsdGhpcy5kYXRhVHlwZT12b2lkIDAsdGhpcy54RGF0YT1bXSx0aGlzLnlEYXRhPVtdLHRoaXMubWluPXZvaWQgMCx0aGlzLm1heD12b2lkIDAsdGhpcy55U2NhbGU9bmV3IHAsdGhpcy5heGlzPW5ldyB2LHRoaXMuaGlnaGxpZ2h0U3R5bGU9e3NpemU6NixmaWxsOiJ5ZWxsb3ciLHN0cm9rZToic2lsdmVyIixzdHJva2VXaWR0aDoxfSx0aGlzLl93aWR0aD0xMDAsdGhpcy5faGVpZ2h0PTEwMCx0aGlzLnNtYWxsZXN0SW50ZXJ2YWw9dm9pZCAwLHRoaXMubGF5b3V0SWQ9MCx0aGlzLmRlZmF1bHREYXRlRm9ybWF0dGVyPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCJlbi1VUyIse3llYXI6Im51bWVyaWMiLG1vbnRoOiIyLWRpZ2l0IixkYXk6IjItZGlnaXQiLGhvdXI6IjItZGlnaXQiLG1pbnV0ZToiMi1kaWdpdCIsc2Vjb25kOiIyLWRpZ2l0Iixob3VyMTI6ITF9KSx0aGlzLl9vbk1vdXNlTW92ZT10aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcyksdGhpcy5fb25Nb3VzZU91dD10aGlzLm9uTW91c2VPdXQuYmluZCh0aGlzKTtjb25zdCBlPW5ldyBvLmkuR3JvdXA7dGhpcy5yb290R3JvdXA9ZTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Quc2V0QXR0cmlidXRlKCJjbGFzcyIsImFnLXNwYXJrbGluZS13cmFwcGVyIik7Y29uc3QgaT1uZXcgby5pLlNjZW5lKHt3aW5kb3c6d2luZG93LGRvY3VtZW50OmRvY3VtZW50fSk7dGhpcy5zY2VuZT1pLHRoaXMuY2FudmFzRWxlbWVudD1pLmNhbnZhcy5lbGVtZW50LGkucm9vdD1lLGkuY29udGFpbmVyPXQsdGhpcy5yZXNpemVBbmRTZXREaW1lbnNpb25zKHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpLEMudG9vbHRpcERvY3VtZW50cy5pbmNsdWRlcyhkb2N1bWVudCl8fHRoaXMuaW5pdGlhbGlzZVRvb2x0aXBTdHlsZXMoKSx0aGlzLnNldHVwRG9tRXZlbnRMaXN0ZW5lcnModGhpcy5jYW52YXNFbGVtZW50KX1zZXQgY29udGV4dChlKXt0aGlzLl9jb250ZXh0IT09ZSYmKHRoaXMuX2NvbnRleHQ9ZSl9Z2V0IGNvbnRleHQoKXtyZXR1cm4gdGhpcy5fY29udGV4dH1zZXQgY29udGFpbmVyKGUpe2lmKHRoaXMuX2NvbnRhaW5lciE9PWUpe2NvbnN0e3BhcmVudE5vZGU6dH09dGhpcy5jYW52YXNFbGVtZW50O251bGwhPXQmJnQucmVtb3ZlQ2hpbGQodGhpcy5jYW52YXNFbGVtZW50KSxlJiZlLmFwcGVuZENoaWxkKHRoaXMuY2FudmFzRWxlbWVudCksdGhpcy5fY29udGFpbmVyPWV9fWdldCBjb250YWluZXIoKXtyZXR1cm4gdGhpcy5fY29udGFpbmVyfXNldCBkYXRhKGUpe3RoaXMuX2RhdGEhPT1lJiYodGhpcy5fZGF0YT1lLHRoaXMucHJvY2Vzc0RhdGEoKSx0aGlzLm1vdXNlTW92ZUV2ZW50JiZ0aGlzLmhpZ2hsaWdodGVkRGF0dW0mJnRoaXMudXBkYXRlSGl0UG9pbnQodGhpcy5tb3VzZU1vdmVFdmVudCkpfWdldCBkYXRhKCl7cmV0dXJuIHRoaXMuX2RhdGF9cmVzaXplQW5kU2V0RGltZW5zaW9ucyhlLHQpe3RoaXMuc2NlbmUucmVzaXplKGUsdCksdGhpcy5zZXJpZXNSZWN0LndpZHRoPWUsdGhpcy5zZXJpZXNSZWN0LmhlaWdodD10fWluaXRpYWxpc2VUb29sdGlwU3R5bGVzKCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2UuaW5uZXJIVE1MPSJcbi5hZy1zcGFya2xpbmUtdG9vbHRpcC13cmFwcGVyIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5hZy1zcGFya2xpbmUtdG9vbHRpcCB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGZvbnQ6IDEycHggYXJpYWwsc2Fucy1zZXJpZjtcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYigwIDAgMCAvIDIwJSksIDAgMXB4IDFweCByZ2IoMCAwIDAgLyAxNCUpO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjdlbTtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgei1pbmRleDogOTk5OTk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpO1xuICAgIGNvbG9yOiByZ2JhKDAsMCwwLCAwLjY3KTtcbn1cblxuLmFnLXNwYXJrbGluZS10b29sdGlwLWNvbnRlbnQge1xuICAgIHBhZGRpbmc6IDAgN3B4O1xuICAgIG9wYWNpdHk6IDE7XG59XG5cbi5hZy1zcGFya2xpbmUtdG9vbHRpcC10aXRsZSB7XG4gICAgcGFkZGluZy1sZWZ0OiA3cHg7XG4gICAgb3BhY2l0eTogMTtcbn1cblxuLmFnLXNwYXJrbGluZS10b29sdGlwLXdyYXBwZXItaGlkZGVuIHtcbiAgICB0b3A6IC0xMDAwMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5hZy1zcGFya2xpbmUtd3JhcHBlciB7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xufVxuIixkb2N1bWVudC5oZWFkLmluc2VydEJlZm9yZShlLGRvY3VtZW50LmhlYWQucXVlcnlTZWxlY3Rvcigic3R5bGUiKSksQy50b29sdGlwRG9jdW1lbnRzLnB1c2goZG9jdW1lbnQpfXNldCB3aWR0aChlKXt0aGlzLl93aWR0aCE9PWUmJih0aGlzLl93aWR0aD1lLHRoaXMuc2NlbmUucmVzaXplKGUsdGhpcy5oZWlnaHQpLHRoaXMuc2NoZWR1bGVMYXlvdXQoKSl9Z2V0IHdpZHRoKCl7cmV0dXJuIHRoaXMuX3dpZHRofXNldCBoZWlnaHQoZSl7dGhpcy5faGVpZ2h0IT09ZSYmKHRoaXMuX2hlaWdodD1lLHRoaXMuc2NlbmUucmVzaXplKHRoaXMud2lkdGgsZSksdGhpcy5zY2hlZHVsZUxheW91dCgpKX1nZXQgaGVpZ2h0KCl7cmV0dXJuIHRoaXMuX2hlaWdodH11cGRhdGUoKXt9dXBkYXRlWVNjYWxlKCl7dGhpcy51cGRhdGVZU2NhbGVSYW5nZSgpLHRoaXMudXBkYXRlWVNjYWxlRG9tYWluKCl9dXBkYXRlWVNjYWxlRG9tYWluKCl7fXVwZGF0ZVlTY2FsZVJhbmdlKCl7Y29uc3R7eVNjYWxlOmUsc2VyaWVzUmVjdDp0fT10aGlzO2UucmFuZ2U9W3QuaGVpZ2h0LDBdfXVwZGF0ZVhTY2FsZSgpe2NvbnN0e3R5cGU6ZX09dGhpcy5heGlzO3RoaXMueFNjYWxlPXRoaXMuZ2V0WFNjYWxlKGUpLHRoaXMudXBkYXRlWFNjYWxlUmFuZ2UoKSx0aGlzLnVwZGF0ZVhTY2FsZURvbWFpbigpfXVwZGF0ZVhTY2FsZVJhbmdlKCl7dGhpcy54U2NhbGUucmFuZ2U9WzAsdGhpcy5zZXJpZXNSZWN0LndpZHRoXX11cGRhdGVYU2NhbGVEb21haW4oKXtjb25zdHt4RGF0YTplLHhTY2FsZTp0fT10aGlzO2xldCBpOyh0IGluc3RhbmNlb2YgcHx8dCBpbnN0YW5jZW9mIG0pJiYoaT1uKGUpKSx0aGlzLnhTY2FsZS5kb21haW49aT9pLnNsaWNlKCk6ZX1nZXRYU2NhbGUoZT0iY2F0ZWdvcnkiKXtzd2l0Y2goZSl7Y2FzZSJudW1iZXIiOnJldHVybiBuZXcgcDtjYXNlInRpbWUiOnJldHVybiBuZXcgbTtjYXNlImNhdGVnb3J5IjpkZWZhdWx0OnJldHVybiBuZXcgZ319dXBkYXRlQXhpc0xpbmUoKXt9dXBkYXRlQXhlcygpe3RoaXMudXBkYXRlWVNjYWxlKCksdGhpcy51cGRhdGVYU2NhbGUoKSx0aGlzLnVwZGF0ZUF4aXNMaW5lKCl9dXBkYXRlQ3Jvc3NoYWlycygpe3RoaXMudXBkYXRlWENyb3NzaGFpckxpbmUoKSx0aGlzLnVwZGF0ZVlDcm9zc2hhaXJMaW5lKCl9Z2VuZXJhdGVOb2RlRGF0YSgpe3JldHVybltdfWdldE5vZGVEYXRhKCl7cmV0dXJuW119dXBkYXRlTm9kZXMoKXt9dXBkYXRlWENyb3NzaGFpckxpbmUoKXt9dXBkYXRlWUNyb3NzaGFpckxpbmUoKXt9aGlnaGxpZ2h0RGF0dW0oZSl7dGhpcy51cGRhdGVOb2RlcygpfWRlaGlnaGxpZ2h0RGF0dW0oKXt0aGlzLmhpZ2hsaWdodGVkRGF0dW09dm9pZCAwLHRoaXMudXBkYXRlTm9kZXMoKSx0aGlzLnVwZGF0ZUNyb3NzaGFpcnMoKX1vbk1vdXNlTW92ZShlKXt0aGlzLm1vdXNlTW92ZUV2ZW50PWUsdGhpcy51cGRhdGVIaXRQb2ludChlKX11cGRhdGVIaXRQb2ludChlKXt2YXIgdCxpLHM7Y29uc3Qgcj10aGlzLnBpY2tDbG9zZXN0U2VyaWVzTm9kZURhdHVtKGUub2Zmc2V0WCxlLm9mZnNldFkpO2lmKCFyKXJldHVybjtjb25zdCBvPXRoaXMuaGlnaGxpZ2h0ZWREYXR1bTt0aGlzLmhpZ2hsaWdodGVkRGF0dW09ciwodGhpcy5oaWdobGlnaHRlZERhdHVtJiYhb3x8dGhpcy5oaWdobGlnaHRlZERhdHVtJiZvJiZ0aGlzLmhpZ2hsaWdodGVkRGF0dW0hPT1vKSYmKHRoaXMuaGlnaGxpZ2h0RGF0dW0ociksdGhpcy51cGRhdGVDcm9zc2hhaXJzKCksdGhpcy5zY2VuZS5yZW5kZXIoKS5jYXRjaChlPT5jb25zb2xlLmVycm9yKCJBRyBHcmlkIC0gY2hhcnQgcmVuZGVyaW5nIGZhaWxlZCIsZSkpKTsobnVsbD09PShzPW51bGw9PT0oaT1udWxsPT09KHQ9dGhpcy5wcm9jZXNzZWRPcHRpb25zKXx8dm9pZCAwPT09dD92b2lkIDA6dC50b29sdGlwKXx8dm9pZCAwPT09aT92b2lkIDA6aS5lbmFibGVkKXx8dm9pZCAwPT09c3x8cykmJnRoaXMuaGFuZGxlVG9vbHRpcChlLHIpfW9uTW91c2VPdXQoZSl7dGhpcy5kZWhpZ2hsaWdodERhdHVtKCksdGhpcy50b29sdGlwLnRvZ2dsZSghMSksdGhpcy5zY2VuZS5yZW5kZXIoKS5jYXRjaChlPT5jb25zb2xlLmVycm9yKCJBRyBHcmlkIC0gY2hhcnQgcmVuZGVyaW5nIGZhaWxlZCIsZSkpfXByb2Nlc3NEYXRhKCl7Y29uc3R7ZGF0YTplLHlEYXRhOnQseERhdGE6aX09dGhpcztpZighZXx8dGhpcy5pbnZhbGlkRGF0YSh0aGlzLmRhdGEpKXJldHVybjt0Lmxlbmd0aD0wLGkubGVuZ3RoPTA7Y29uc3Qgcz1lLmxlbmd0aCxyPXRoaXMuZ2V0RGF0YVR5cGUoZSk7dGhpcy5kYXRhVHlwZT1yO2NvbnN0e3R5cGU6b309dGhpcy5heGlzLG49Im51bWJlciIhPT1vJiYidGltZSIhPT1vPyJjYXRlZ29yeSI6byxhPSJudW1iZXIiPT09bnx8InRpbWUiPT09bixsPShlLHQpPT57bnVsbD09dGhpcy5zbWFsbGVzdEludGVydmFsJiYodGhpcy5zbWFsbGVzdEludGVydmFsPXt4OjEvMCx5OjEvMH0pO2NvbnN0e3g6aX09dGhpcy5zbWFsbGVzdEludGVydmFsLHM9TWF0aC5hYnMoZS10KTtzPjAmJnM8aSYmKHRoaXMuc21hbGxlc3RJbnRlcnZhbC54PXMpfTtsZXQgZDtpZigibnVtYmVyIj09PXIpZm9yKGxldCByPTA7cjxzO3IrKyl7Y29uc3Qgcz1yLG89ZVtyXSxjPXRoaXMuZ2V0RGF0dW0ocyxuKSxoPXRoaXMuZ2V0RGF0dW0obywibnVtYmVyIik7YSYmbChjLGQpLGkucHVzaChjKSx0LnB1c2goaCksZD1jfWVsc2UgaWYoImFycmF5Ij09PXIpZm9yKGxldCByPTA7cjxzO3IrKyl7Y29uc3Qgcz1lW3JdO2lmKEFycmF5LmlzQXJyYXkocykpe2NvbnN0IGU9c1swXSxyPXNbMV0sbz10aGlzLmdldERhdHVtKGUsbiksYz10aGlzLmdldERhdHVtKHIsIm51bWJlciIpO2lmKG51bGw9PW8pY29udGludWU7YSYmbChvLGQpLGkucHVzaChvKSx0LnB1c2goYyksZD1vfX1lbHNlIGlmKCJvYmplY3QiPT09cil7Y29uc3R7eUtleTpyLHhLZXk6b309dGhpcztmb3IobGV0IGM9MDtjPHM7YysrKXtjb25zdCBzPWVbY107aWYoIm9iamVjdCI9PXR5cGVvZiBzJiYhQXJyYXkuaXNBcnJheShzKSl7Y29uc3QgZT1zW29dLGM9c1tyXSxoPXRoaXMuZ2V0RGF0dW0oZSxuKSx1PXRoaXMuZ2V0RGF0dW0oYywibnVtYmVyIik7aWYobnVsbD09aCljb250aW51ZTthJiZsKGgsZCksaS5wdXNoKGgpLHQucHVzaCh1KSxkPWh9fX10aGlzLnVwZGF0ZUF4ZXMoKSx0aGlzLmltbWVkaWF0ZUxheW91dCgpfWdldERhdGFUeXBlKGUpe2Zvcihjb25zdCB0IG9mIGUpaWYobnVsbCE9dCl7aWYoYSh0KSlyZXR1cm4ibnVtYmVyIjtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiJhcnJheSI7aWYoIm9iamVjdCI9PXR5cGVvZiB0KXJldHVybiJvYmplY3QifX1nZXREYXR1bShlLHQpe2lmKCJudW1iZXIiPT09dCYmYShlKXx8InRpbWUiPT09dCYmKGEoZSl8fGMoZSkpKXJldHVybiBlO2lmKCJjYXRlZ29yeSI9PT10KXtpZihsKGUpfHxjKGUpfHxhKGUpKXJldHVybnt0b1N0cmluZzooKT0+U3RyaW5nKGUpfTtpZihkKGUpKXJldHVybiBlfX1nZXQgbGF5b3V0U2NoZWR1bGVkKCl7cmV0dXJuISF0aGlzLmxheW91dElkfXNjaGVkdWxlTGF5b3V0KCl7dGhpcy5sYXlvdXRJZCYmY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5sYXlvdXRJZCksdGhpcy5sYXlvdXRJZD1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCk9Pnt0aGlzLmltbWVkaWF0ZUxheW91dCgpLHRoaXMubGF5b3V0SWQ9MH0pfWltbWVkaWF0ZUxheW91dCgpe3RoaXMuc2V0U3BhcmtsaW5lRGltZW5zaW9ucygpLHRoaXMuaW52YWxpZERhdGEodGhpcy5kYXRhKXx8KHRoaXMudXBkYXRlWFNjYWxlUmFuZ2UoKSx0aGlzLnVwZGF0ZVlTY2FsZVJhbmdlKCksdGhpcy51cGRhdGVBeGlzTGluZSgpLHRoaXMudXBkYXRlKCksdGhpcy5zY2VuZS5yZW5kZXIoKS5jYXRjaChlPT5jb25zb2xlLmVycm9yKCJBRyBHcmlkIC0gY2hhcnQgcmVuZGVyaW5nIGZhaWxlZCIsZSkpKX1zZXRTcGFya2xpbmVEaW1lbnNpb25zKCl7Y29uc3R7d2lkdGg6ZSxoZWlnaHQ6dCxwYWRkaW5nOmksc2VyaWVzUmVjdDpzLHJvb3RHcm91cDpyfT10aGlzLG89ZS1pLmxlZnQtaS5yaWdodCxuPXQtaS50b3AtaS5ib3R0b207cy53aWR0aD1vLHMuaGVpZ2h0PW4scy54PWkubGVmdCxzLnk9aS50b3Asci50cmFuc2xhdGlvblg9cy54LHIudHJhbnNsYXRpb25ZPXMueX1waWNrQ2xvc2VzdFNlcmllc05vZGVEYXR1bShlLHQpe2xldCBpLHM9MS8wO2NvbnN0IHI9dGhpcy5yb290R3JvdXAudHJhbnNmb3JtUG9pbnQoZSx0KSxvPXRoaXMuZ2V0Tm9kZURhdGEoKTtmb3IobGV0IGU9MDtlPG8ubGVuZ3RoO2UrKyl7Y29uc3QgdD1vW2VdO2lmKCF0LnBvaW50KXJldHVybjtjb25zdCBuPXRoaXMuZ2V0RGlzdGFuY2Uocix0LnBvaW50KTtuPD1zJiYocz1uLGk9dCl9cmV0dXJuIGl9Z2V0RGlzdGFuY2UoZSx0KXtyZXR1cm4gTWF0aC5hYnMoZS54LXQueCl9aGFuZGxlVG9vbHRpcChlLHQpe3ZhciBpLHM7Y29uc3R7c2VyaWVzRGF0dW06cn09dCx7Y2FudmFzRWxlbWVudDpvfT10aGlzLHtjbGllbnRYOm4sY2xpZW50WTphfT1lLGw9bnVsbD09PShpPXRoaXMucHJvY2Vzc2VkT3B0aW9ucyl8fHZvaWQgMD09PWk/dm9pZCAwOmkudG9vbHRpcCxkPXtwYWdlWDpuLHBhZ2VZOmEscG9zaXRpb246e3hPZmZzZXQ6bnVsbD09bD92b2lkIDA6bC54T2Zmc2V0LHlPZmZzZXQ6bnVsbD09bD92b2lkIDA6bC55T2Zmc2V0fSxjb250YWluZXI6bnVsbD09bD92b2lkIDA6bC5jb250YWluZXJ9O251bGw9PWQuY29udGFpbmVyJiYoZC5jb250YWluZXI9byk7Y29uc3QgYz1yLnksaD1yLng7bGV0IHU9bnVsbD09PShzPW51bGw9PWw/dm9pZCAwOmwuZW5hYmxlZCl8fHZvaWQgMD09PXN8fHM7Y29uc3QgcD1udWxsPT1sP3ZvaWQgMDpsLnJlbmRlcmVyO2lmKHApe2NvbnN0IGU9cCh7Y29udGV4dDp0aGlzLmNvbnRleHQsZGF0dW06cix5VmFsdWU6Yyx4VmFsdWU6aH0pO3U9InN0cmluZyIhPXR5cGVvZiBlJiZ2b2lkIDAhPT1lLmVuYWJsZWQ/ZS5lbmFibGVkOnV9Y29uc3QgZz11JiZ2b2lkIDAhPT1yLnkmJnRoaXMuZ2V0VG9vbHRpcEh0bWwodCk7ZyYmdGhpcy50b29sdGlwLnNob3coZCxnKX1mb3JtYXROdW1lcmljRGF0dW0oZSl7cmV0dXJuIFN0cmluZyhNYXRoLnJvdW5kKDEwKmUpLzEwKX1mb3JtYXREYXR1bShlKXtjb25zdCB0PXRoaXMuYXhpcy50eXBlfHwiY2F0ZWdvcnkiO3JldHVybiJudW1iZXIiPT09dCYmIm51bWJlciI9PXR5cGVvZiBlP3RoaXMuZm9ybWF0TnVtZXJpY0RhdHVtKGUpOiJ0aW1lIj09PXQmJihlIGluc3RhbmNlb2YgRGF0ZXx8YShlKSk/dGhpcy5kZWZhdWx0RGF0ZUZvcm1hdHRlci5mb3JtYXQoZSk6U3RyaW5nKGUpfXNldHVwRG9tRXZlbnRMaXN0ZW5lcnMoZSl7ZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMuX29uTW91c2VNb3ZlKSxlLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0Iix0aGlzLl9vbk1vdXNlT3V0KX1jbGVhbnVwRG9tRXZlbnRMaXN0ZW5lcnMoZSl7ZS5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMuX29uTW91c2VNb3ZlKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0Iix0aGlzLl9vbk1vdXNlT3V0KX1pbnZhbGlkRGF0YShlKXtyZXR1cm4hZXx8IUFycmF5LmlzQXJyYXkoZSl8fDA9PT1lLmxlbmd0aH1kZXN0cm95KCl7dGhpcy5zY2VuZS5jb250YWluZXI9dm9pZCAwLHRoaXMuY29udGFpbmVyPXZvaWQgMCx0aGlzLmNsZWFudXBEb21FdmVudExpc3RlbmVycyh0aGlzLnNjZW5lLmNhbnZhcy5lbGVtZW50KX19ZnVuY3Rpb24geShlLHQpe3ZhciBpLHMscjtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJuIGU7dD1udWxsIT10P3Q6e307Y29uc3R7Y29udGVudDpvPShudWxsIT09KGk9dC5jb250ZW50KSYmdm9pZCAwIT09aT9pOiIiKSx0aXRsZTpuPShudWxsIT09KHM9dC50aXRsZSkmJnZvaWQgMCE9PXM/czp2b2lkIDApLGNvbG9yOmE9dC5jb2xvcixiYWNrZ3JvdW5kQ29sb3I6bD10LmJhY2tncm91bmRDb2xvcixvcGFjaXR5OmQ9KG51bGwhPT0ocj10Lm9wYWNpdHkpJiZ2b2lkIDAhPT1yP3I6MSl9PWU7bGV0IGMsaDthPyhjPW4/YDxzcGFuIGNsYXNzPSIke1MuY2xhc3N9LXRpdGxlIjsgc3R5bGU9ImNvbG9yOiAke2F9Ij4ke259PC9zcGFuPmA6IiIsaD1gPHNwYW4gY2xhc3M9IiR7Uy5jbGFzc30tY29udGVudCIgc3R5bGU9ImNvbG9yOiAke2F9Ij4ke299PC9zcGFuPmApOihjPW4/YDxzcGFuIGNsYXNzPSIke1MuY2xhc3N9LXRpdGxlIj4ke259PC9zcGFuPmA6IiIsaD1gPHNwYW4gY2xhc3M9IiR7Uy5jbGFzc30tY29udGVudCI+JHtvfTwvc3Bhbj5gKTtsZXQgdT0ib3BhY2l0eTogIitkO3JldHVybiBsJiYodSs9IjsgYmFja2dyb3VuZC1jb2xvcjogIitsLnRvTG93ZXJDYXNlKCkpLGA8ZGl2IGNsYXNzPSIke1MuY2xhc3N9IiBzdHlsZT0iJHt1fSI+XG4gICAgICAgICAgICAgICAgJHtjfVxuICAgICAgICAgICAgICAgICR7aH1cbiAgICAgICAgICAgIDwvZGl2PmB9Qy50b29sdGlwRG9jdW1lbnRzPVtdO2NsYXNzIFN7Y29uc3RydWN0b3IoKXt0aGlzLmVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpfWlzVmlzaWJsZSgpe2NvbnN0e2VsZW1lbnQ6ZX09dGhpcztpZihlLmNsYXNzTGlzdClyZXR1cm4hZS5jbGFzc0xpc3QuY29udGFpbnMoUy5jbGFzcysiLXdyYXBwZXItaGlkZGVuIik7Y29uc3QgdD1lLmdldEF0dHJpYnV0ZSgiY2xhc3MiKTtyZXR1cm4hIXQmJnQuc3BsaXQoIiAiKS5pbmRleE9mKFMuY2xhc3MrIi13cmFwcGVyLWhpZGRlbiIpPDB9dXBkYXRlQ2xhc3MoZSl7Y29uc3QgdD1bUy5jbGFzcysiLXdyYXBwZXIiXTshMCE9PWUmJnQucHVzaChTLmNsYXNzKyItd3JhcHBlci1oaWRkZW4iKSx0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCJjbGFzcyIsdC5qb2luKCIgIikpfXNob3coZSx0KXt2YXIgaSxzLHIsbzt0aGlzLnRvZ2dsZSghMSk7Y29uc3R7ZWxlbWVudDpufT10aGlzO2lmKHZvaWQgMCE9PXQpbi5pbm5lckhUTUw9dDtlbHNlIGlmKCFuLmlubmVySFRNTClyZXR1cm47Y29uc3QgYT1udWxsIT09KHM9bnVsbD09PShpPWUucG9zaXRpb24pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnhPZmZzZXQpJiZ2b2lkIDAhPT1zP3M6MTAsbD1udWxsIT09KG89bnVsbD09PShyPWUucG9zaXRpb24pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnlPZmZzZXQpJiZ2b2lkIDAhPT1vP286MDtsZXQgZD1lLnBhZ2VYK2EsYz1lLnBhZ2VZK2w7Y29uc3QgaD1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2xldCB1PXdpbmRvdy5pbm5lcldpZHRoLWgud2lkdGg7aWYoZS5jb250YWluZXIpe2NvbnN0IHQ9ZS5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dT10LmxlZnQrKHQud2lkdGgtaC53aWR0aCl9ZD51JiYoZD1lLnBhZ2VYLW4uY2xpZW50V2lkdGgtYSksInVuZGVmaW5lZCIhPXR5cGVvZiBzY3JvbGxYJiYoZCs9c2Nyb2xsWCksInVuZGVmaW5lZCIhPXR5cGVvZiBzY3JvbGxZJiYoYys9c2Nyb2xsWSksbi5zdHlsZS5sZWZ0PU1hdGgucm91bmQoZCkrInB4IixuLnN0eWxlLnRvcD1NYXRoLnJvdW5kKGMpKyJweCIsdGhpcy50b2dnbGUoITApfXRvZ2dsZShlKXt0aGlzLnVwZGF0ZUNsYXNzKGUpfWRlc3Ryb3koKXtjb25zdHtwYXJlbnROb2RlOmV9PXRoaXMuZWxlbWVudDtlJiZlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCl9fWZ1bmN0aW9uIHcoZSl7c3dpdGNoKGUpe2Nhc2UiY2lyY2xlIjpyZXR1cm4gby5pLkNpcmNsZTtjYXNlInNxdWFyZSI6cmV0dXJuIG8uaS5TcXVhcmU7Y2FzZSJkaWFtb25kIjpyZXR1cm4gby5pLkRpYW1vbmQ7ZGVmYXVsdDpyZXR1cm4gby5pLkNpcmNsZX19ZnVuY3Rpb24gYihlLHQ9InNvbGlkIil7Y29uc3QgaT17c29saWQ6W10sZGFzaDpbNCwzXSxkb3Q6WzEsM10sZGFzaERvdDpbNCwzLDEsM10sZGFzaERvdERvdDpbNCwzLDEsMywxLDNdLHNob3J0RG90OlsxLDFdLHNob3J0RGFzaDpbMywxXSxzaG9ydERhc2hEb3Q6WzMsMSwxLDFdLHNob3J0RGFzaERvdERvdDpbMywxLDEsMSwxLDFdLGxvbmdEYXNoOls4LDNdLGxvbmdEYXNoRG90Ols4LDMsMSwzXSxsb25nRGFzaERvdERvdDpbOCwzLDEsMywxLDNdfSxzPXtzb2xpZDpbXSxkYXNoOlszLDNdLGRvdDpbMCwzXSxkYXNoRG90OlszLDMsMCwzXSxkYXNoRG90RG90OlszLDMsMCwzLDAsM10sc2hvcnREb3Q6WzAsMl0sc2hvcnREYXNoOlsyLDJdLHNob3J0RGFzaERvdDpbMiwyLDAsMl0sc2hvcnREYXNoRG90RG90OlsyLDIsMCwyLDAsMl0sbG9uZ0Rhc2g6WzcsM10sbG9uZ0Rhc2hEb3Q6WzcsMywwLDNdLGxvbmdEYXNoRG90RG90Ols3LDMsMCwzLDAsM119O3JldHVybiJyb3VuZCI9PT1lfHwic3F1YXJlIj09PWU/bnVsbD09c1t0XT8oY29uc29sZS53YXJuKGAnJHt0fScgaXMgbm90IGEgdmFsaWQgJ2xpbmVEYXNoJyBvcHRpb24uYCkscy5zb2xpZCk6c1t0XTpudWxsPT1pW3RdPyhjb25zb2xlLndhcm4oYCcke3R9JyBpcyBub3QgYSB2YWxpZCAnbGluZURhc2gnIG9wdGlvbi5gKSxpLnNvbGlkKTppW3RdfVMuY2xhc3M9ImFnLXNwYXJrbGluZS10b29sdGlwIjtjb25zdHtleHRlbnQ6RX09by5rLHtCYW5kU2NhbGU6Un09by5oO2NsYXNzIHh7Y29uc3RydWN0b3IoKXt0aGlzLmVuYWJsZWQ9ITAsdGhpcy5zaGFwZT0iY2lyY2xlIix0aGlzLnNpemU9MCx0aGlzLmZpbGw9InJnYigxMjQsIDE4MSwgMjM2KSIsdGhpcy5zdHJva2U9InJnYigxMjQsIDE4MSwgMjM2KSIsdGhpcy5zdHJva2VXaWR0aD0xLHRoaXMuZm9ybWF0dGVyPXZvaWQgMH19Y2xhc3MgVHtjb25zdHJ1Y3Rvcigpe3RoaXMuc3Ryb2tlPSJyZ2IoMTI0LCAxODEsIDIzNikiLHRoaXMuc3Ryb2tlV2lkdGg9MX19Y2xhc3MgRHtjb25zdHJ1Y3Rvcigpe3RoaXMueExpbmU9e2VuYWJsZWQ6ITAsc3Ryb2tlOiJyZ2JhKDAsMCwwLCAwLjU0KSIsc3Ryb2tlV2lkdGg6MSxsaW5lRGFzaDoic29saWQiLGxpbmVDYXA6dm9pZCAwfSx0aGlzLnlMaW5lPXtlbmFibGVkOiExLHN0cm9rZToicmdiYSgwLDAsMCwgMC41NCkiLHN0cm9rZVdpZHRoOjEsbGluZURhc2g6InNvbGlkIixsaW5lQ2FwOnZvaWQgMH19fWNsYXNzIE8gZXh0ZW5kcyBDe2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLmZpbGw9InJnYmEoMTI0LCAxODEsIDIzNiwgMC4yNSkiLHRoaXMuc3Ryb2tlUGF0aD1uZXcgby5pLlBhdGgsdGhpcy5maWxsUGF0aD1uZXcgby5pLlBhdGgsdGhpcy54Q3Jvc3NoYWlyTGluZT1uZXcgby5pLkxpbmUsdGhpcy55Q3Jvc3NoYWlyTGluZT1uZXcgby5pLkxpbmUsdGhpcy5hcmVhU3BhcmtsaW5lR3JvdXA9bmV3IG8uaS5Hcm91cCx0aGlzLnhBeGlzTGluZT1uZXcgby5pLkxpbmUsdGhpcy5tYXJrZXJzPW5ldyBvLmkuR3JvdXAsdGhpcy5tYXJrZXJTZWxlY3Rpb249by5pLlNlbGVjdGlvbi5zZWxlY3QodGhpcy5tYXJrZXJzLCgpPT50aGlzLm1hcmtlckZhY3RvcnkoKSksdGhpcy5tYXJrZXJTZWxlY3Rpb25EYXRhPVtdLHRoaXMubWFya2VyPW5ldyB4LHRoaXMubGluZT1uZXcgVCx0aGlzLmNyb3NzaGFpcnM9bmV3IEQsdGhpcy5yb290R3JvdXAuYXBwZW5kKHRoaXMuYXJlYVNwYXJrbGluZUdyb3VwKSx0aGlzLnhBeGlzTGluZS56SW5kZXg9Zi5BWElTX0xJTkVfWklOREVYLHRoaXMuZmlsbFBhdGguekluZGV4PWYuU0VSSUVTX0ZJTExfWklOREVYLHRoaXMuc3Ryb2tlUGF0aC56SW5kZXg9Zi5TRVJJRVNfU1RST0tFX1pJTkRFWCx0aGlzLnhDcm9zc2hhaXJMaW5lLnpJbmRleD1mLkNST1NTSEFJUl9aSU5ERVgsdGhpcy55Q3Jvc3NoYWlyTGluZS56SW5kZXg9Zi5DUk9TU0hBSVJfWklOREVYLHRoaXMubWFya2Vycy56SW5kZXg9Zi5TRVJJRVNfTUFSS0VSU19aSU5ERVgsdGhpcy5hcmVhU3BhcmtsaW5lR3JvdXAuYXBwZW5kKFt0aGlzLmZpbGxQYXRoLHRoaXMueEF4aXNMaW5lLHRoaXMuc3Ryb2tlUGF0aCx0aGlzLnhDcm9zc2hhaXJMaW5lLHRoaXMueUNyb3NzaGFpckxpbmUsdGhpcy5tYXJrZXJzXSl9bWFya2VyRmFjdG9yeSgpe2NvbnN0e3NoYXBlOmV9PXRoaXMubWFya2VyO3JldHVybiBuZXcodyhlKSl9Z2V0Tm9kZURhdGEoKXtyZXR1cm4gdGhpcy5tYXJrZXJTZWxlY3Rpb25EYXRhfXVwZGF0ZSgpe2NvbnN0IGU9dGhpcy5nZW5lcmF0ZU5vZGVEYXRhKCk7aWYoIWUpcmV0dXJuO2NvbnN0e25vZGVEYXRhOnQsZmlsbERhdGE6aSxzdHJva2VEYXRhOnN9PWU7dGhpcy5tYXJrZXJTZWxlY3Rpb25EYXRhPXQsdGhpcy51cGRhdGVTZWxlY3Rpb24odCksdGhpcy51cGRhdGVOb2RlcygpLHRoaXMudXBkYXRlU3Ryb2tlKHMpLHRoaXMudXBkYXRlRmlsbChpKX11cGRhdGVZU2NhbGVEb21haW4oKXtjb25zdHt5RGF0YTplLHlTY2FsZTp0fT10aGlzLGk9RShlKTtsZXQgcz0wLHI9MTt2b2lkIDAhPT1pJiYocz10aGlzLm1pbj1pWzBdLHI9dGhpcy5tYXg9aVsxXSkscz1zPDA/czowLHI9cjwwPzA6cix0LmRvbWFpbj1bcyxyXX1nZW5lcmF0ZU5vZGVEYXRhKCl7Y29uc3R7ZGF0YTplLHlEYXRhOnQseERhdGE6aSx4U2NhbGU6cyx5U2NhbGU6cn09dGhpcztpZighZSlyZXR1cm47Y29uc3Qgbz0hKHMgaW5zdGFuY2VvZiBSKSxuPW8/MDpzLmJhbmR3aWR0aC8yLGE9dC5sZW5ndGgsbD1bXSxkPVtdLGM9W107bGV0IGgsdSxwLGc7Y29uc3QgbT1yLmNvbnZlcnQoMCk7Zm9yKGxldCBlPTA7ZTxhO2UrKyl7Y29uc3QgZj10W2VdLHY9aVtlXSxDPXMuY29udmVydChvP3MudG9Eb21haW4odik6dikrbix5PXZvaWQgMD09PWY/TmFOOnIuY29udmVydChmKTtlKzE8YSYmKGc9cy5jb252ZXJ0KG8/cy50b0RvbWFpbihpW2UrMV0pOmlbZSsxXSkrbiksYy5wdXNoKHtzZXJpZXNEYXR1bTp7eDp2LHk6Zn0scG9pbnQ6e3g6Qyx5Onl9fSksdm9pZCAwPT09ZiYmdm9pZCAwIT09cD8oZC5wdXNoKHtzZXJpZXNEYXR1bTp2b2lkIDAscG9pbnQ6e3g6cCx5Om19fSksdm9pZCAwIT09ZyYmZC5wdXNoKHtzZXJpZXNEYXR1bTp2b2lkIDAscG9pbnQ6e3g6Zyx5Om19fSkpOnZvaWQgMCE9PWYmJihkLnB1c2goe3Nlcmllc0RhdHVtOnt4OnYseTpmfSxwb2ludDp7eDpDLHk6eX19KSxsLnB1c2goe3Nlcmllc0RhdHVtOnt4OnYseTpmfSxwb2ludDp7eDpDLHk6eX19KSxoPXZvaWQgMCE9PWg/aDpDLHU9QykscD1DfXJldHVybiBkLnB1c2goe3Nlcmllc0RhdHVtOnZvaWQgMCxwb2ludDp7eDp1LHk6bX19LHtzZXJpZXNEYXR1bTp2b2lkIDAscG9pbnQ6e3g6aCx5Om19fSkse25vZGVEYXRhOmwsZmlsbERhdGE6ZCxzdHJva2VEYXRhOmN9fXVwZGF0ZUF4aXNMaW5lKCl7Y29uc3R7eFNjYWxlOmUseVNjYWxlOnQsYXhpczppLHhBeGlzTGluZTpzfT10aGlzO3MueDE9ZS5yYW5nZVswXSxzLngyPWUucmFuZ2VbMV0scy55MT1zLnkyPTAscy5zdHJva2U9aS5zdHJva2Uscy5zdHJva2VXaWR0aD1pLnN0cm9rZVdpZHRoO2NvbnN0IHI9dC5jb252ZXJ0KDApO3MudHJhbnNsYXRpb25ZPXJ9dXBkYXRlU2VsZWN0aW9uKGUpe3RoaXMubWFya2VyU2VsZWN0aW9uLnVwZGF0ZShlKX11cGRhdGVOb2Rlcygpe2NvbnN0e2hpZ2hsaWdodGVkRGF0dW06ZSxoaWdobGlnaHRTdHlsZTp0LG1hcmtlcjppfT10aGlzLHtzaXplOnMsZmlsbDpyLHN0cm9rZTpvLHN0cm9rZVdpZHRoOm59PXQsYT1pLmZvcm1hdHRlcjt0aGlzLm1hcmtlclNlbGVjdGlvbi5lYWNoKCh0LGwsZCk9Pntjb25zdHtwb2ludDpjLHNlcmllc0RhdHVtOmh9PWw7aWYoIWMpcmV0dXJuO2NvbnN0IHU9bD09PWUscD11JiZ2b2lkIDAhPT1yP3I6aS5maWxsLGc9dSYmdm9pZCAwIT09bz9vOmkuc3Ryb2tlLG09dSYmdm9pZCAwIT09bj9uOmkuc3Ryb2tlV2lkdGgsZj11JiZ2b2lkIDAhPT1zP3M6aS5zaXplO2xldCB2O2lmKGEpe2NvbnN0IGU9MD09PWQsdD1kPT09dGhpcy5tYXJrZXJTZWxlY3Rpb25EYXRhLmxlbmd0aC0xLGk9aC55PT09dGhpcy5taW4scz1oLnk9PT10aGlzLm1heDt2PWEoe2RhdHVtOmwseFZhbHVlOmgueCx5VmFsdWU6aC55LG1pbjppLG1heDpzLGZpcnN0OmUsbGFzdDp0LGZpbGw6cCxzdHJva2U6ZyxzdHJva2VXaWR0aDptLHNpemU6ZixoaWdobGlnaHRlZDp1fSl9dC5zaXplPXYmJm51bGwhPXYuc2l6ZT92LnNpemU6Zix0LmZpbGw9diYmbnVsbCE9di5maWxsP3YuZmlsbDpwLHQuc3Ryb2tlPXYmJm51bGwhPXYuc3Ryb2tlP3Yuc3Ryb2tlOmcsdC5zdHJva2VXaWR0aD12JiZudWxsIT12LnN0cm9rZVdpZHRoP3Yuc3Ryb2tlV2lkdGg6bSx0LnRyYW5zbGF0aW9uWD1jLngsdC50cmFuc2xhdGlvblk9Yy55LHQudmlzaWJsZT12JiZudWxsIT12LmVuYWJsZWQ/di5lbmFibGVkOmkuZW5hYmxlZCYmdC5zaXplPjB9KX11cGRhdGVTdHJva2UoZSl7Y29uc3R7c3Ryb2tlUGF0aDp0LHlEYXRhOmksbGluZTpzfT10aGlzO2lmKGkubGVuZ3RoPDIpcmV0dXJuO2NvbnN0IHI9dC5wYXRoLG89ZS5sZW5ndGg7bGV0IG49ITA7ci5jbGVhcigpO2ZvcihsZXQgdD0wO3Q8bzt0Kyspe2NvbnN0e3BvaW50Omksc2VyaWVzRGF0dW06c309ZVt0XSxvPWkueCxhPWkueTtudWxsPT1zLnk/bj0hMDpuPyhyLm1vdmVUbyhvLGEpLG49ITEpOnIubGluZVRvKG8sYSl9dC5saW5lSm9pbj10LmxpbmVDYXA9InJvdW5kIix0LmZpbGw9dm9pZCAwLHQuc3Ryb2tlPXMuc3Ryb2tlLHQuc3Ryb2tlV2lkdGg9cy5zdHJva2VXaWR0aH11cGRhdGVGaWxsKGUpe2NvbnN0e2ZpbGxQYXRoOnQseURhdGE6aSxmaWxsOnN9PXRoaXMscj10LnBhdGgsbz1lLmxlbmd0aDtpZihyLmNsZWFyKCksIShpLmxlbmd0aDwyKSl7Zm9yKGxldCB0PTA7dDxvO3QrKyl7Y29uc3R7cG9pbnQ6aX09ZVt0XSxzPWkueCxvPWkueTt0PjA/ci5saW5lVG8ocyxvKTpyLm1vdmVUbyhzLG8pfXIuY2xvc2VQYXRoKCksdC5saW5lSm9pbj0icm91bmQiLHQuc3Ryb2tlPXZvaWQgMCx0LmZpbGw9c319dXBkYXRlWENyb3NzaGFpckxpbmUoKXt2YXIgZTtjb25zdHt5U2NhbGU6dCx4Q3Jvc3NoYWlyTGluZTppLGhpZ2hsaWdodGVkRGF0dW06cyxjcm9zc2hhaXJzOnt4TGluZTpyfX09dGhpcztpZighci5lbmFibGVkfHxudWxsPT1zKXJldHVybiB2b2lkKGkuc3Ryb2tlV2lkdGg9MCk7aS55MT10LnJhbmdlWzBdLGkueTI9dC5yYW5nZVsxXSxpLngxPWkueDI9MCxpLnN0cm9rZT1yLnN0cm9rZSxpLnN0cm9rZVdpZHRoPW51bGwhPT0oZT1yLnN0cm9rZVdpZHRoKSYmdm9pZCAwIT09ZT9lOjEsaS5saW5lQ2FwPSJyb3VuZCI9PT1yLmxpbmVDYXB8fCJzcXVhcmUiPT09ci5saW5lQ2FwP3IubGluZUNhcDp2b2lkIDA7Y29uc3R7bGluZURhc2g6b309cjtpLmxpbmVEYXNoPUFycmF5LmlzQXJyYXkobyk/bzpiKGkubGluZUNhcCxyLmxpbmVEYXNoKSxpLnRyYW5zbGF0aW9uWD1zLnBvaW50Lnh9dXBkYXRlWUNyb3NzaGFpckxpbmUoKXt2YXIgZTtjb25zdHt4U2NhbGU6dCx5Q3Jvc3NoYWlyTGluZTppLGhpZ2hsaWdodGVkRGF0dW06cyxjcm9zc2hhaXJzOnt5TGluZTpyfX09dGhpcztpZighci5lbmFibGVkfHxudWxsPT1zKXJldHVybiB2b2lkKGkuc3Ryb2tlV2lkdGg9MCk7aS54MT10LnJhbmdlWzBdLGkueDI9dC5yYW5nZVsxXSxpLnkxPWkueTI9MCxpLnN0cm9rZT1yLnN0cm9rZSxpLnN0cm9rZVdpZHRoPW51bGwhPT0oZT1yLnN0cm9rZVdpZHRoKSYmdm9pZCAwIT09ZT9lOjEsaS5saW5lQ2FwPSJyb3VuZCI9PT1yLmxpbmVDYXB8fCJzcXVhcmUiPT09ci5saW5lQ2FwP3IubGluZUNhcDp2b2lkIDA7Y29uc3R7bGluZURhc2g6b309cjtpLmxpbmVEYXNoPUFycmF5LmlzQXJyYXkobyk/bzpiKGkubGluZUNhcCxyLmxpbmVEYXNoKSxpLnRyYW5zbGF0aW9uWT1zLnBvaW50Lnl9Z2V0VG9vbHRpcEh0bWwoZSl7dmFyIHQsaTtjb25zdHtkYXRhVHlwZTpzfT10aGlzLHtzZXJpZXNEYXR1bTpyfT1lLG89ci55LG49ci54LGE9e2NvbnRlbnQ6dGhpcy5mb3JtYXROdW1lcmljRGF0dW0obyksdGl0bGU6ImFycmF5Ij09PXN8fCJvYmplY3QiPT09cz90aGlzLmZvcm1hdERhdHVtKG4pOnZvaWQgMH0sbD1udWxsPT09KGk9bnVsbD09PSh0PXRoaXMucHJvY2Vzc2VkT3B0aW9ucyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudG9vbHRpcCl8fHZvaWQgMD09PWk/dm9pZCAwOmkucmVuZGVyZXI7cmV0dXJuIGw/eShsKHtjb250ZXh0OnRoaXMuY29udGV4dCxkYXR1bTpyLHlWYWx1ZTpvLHhWYWx1ZTpufSksYSk6eShhKX19Ty5jbGFzc05hbWU9IkFyZWFTcGFya2xpbmUiO2NvbnN0e2V4dGVudDpBfT1vLmsse0JhbmRTY2FsZTpQfT1vLmg7Y2xhc3MgTXtjb25zdHJ1Y3Rvcigpe3RoaXMuZW5hYmxlZD0hMCx0aGlzLnNoYXBlPSJjaXJjbGUiLHRoaXMuc2l6ZT0wLHRoaXMuZmlsbD0icmdiKDEyNCwgMTgxLCAyMzYpIix0aGlzLnN0cm9rZT0icmdiKDEyNCwgMTgxLCAyMzYpIix0aGlzLnN0cm9rZVdpZHRoPTEsdGhpcy5mb3JtYXR0ZXI9dm9pZCAwfX1jbGFzcyBMe2NvbnN0cnVjdG9yKCl7dGhpcy5zdHJva2U9InJnYigxMjQsIDE4MSwgMjM2KSIsdGhpcy5zdHJva2VXaWR0aD0xfX1jbGFzcyBGe2NvbnN0cnVjdG9yKCl7dGhpcy54TGluZT17ZW5hYmxlZDohMCxzdHJva2U6InJnYmEoMCwwLDAsIDAuNTQpIixzdHJva2VXaWR0aDoxLGxpbmVEYXNoOiJzb2xpZCIsbGluZUNhcDp2b2lkIDB9LHRoaXMueUxpbmU9e2VuYWJsZWQ6ITEsc3Ryb2tlOiJyZ2JhKDAsMCwwLCAwLjU0KSIsc3Ryb2tlV2lkdGg6MSxsaW5lRGFzaDoic29saWQiLGxpbmVDYXA6dm9pZCAwfX19Y2xhc3MgSSBleHRlbmRzIEN7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMubGluZVBhdGg9bmV3IG8uaS5QYXRoLHRoaXMueENyb3NzaGFpckxpbmU9bmV3IG8uaS5MaW5lLHRoaXMueUNyb3NzaGFpckxpbmU9bmV3IG8uaS5MaW5lLHRoaXMubGluZVNwYXJrbGluZUdyb3VwPW5ldyBvLmkuR3JvdXAsdGhpcy5tYXJrZXJzPW5ldyBvLmkuR3JvdXAsdGhpcy5tYXJrZXJTZWxlY3Rpb249by5pLlNlbGVjdGlvbi5zZWxlY3QodGhpcy5tYXJrZXJzLCgpPT50aGlzLm1hcmtlckZhY3RvcnkoKSksdGhpcy5tYXJrZXJTZWxlY3Rpb25EYXRhPVtdLHRoaXMubWFya2VyPW5ldyBNLHRoaXMubGluZT1uZXcgTCx0aGlzLmNyb3NzaGFpcnM9bmV3IEYsdGhpcy5yb290R3JvdXAuYXBwZW5kKHRoaXMubGluZVNwYXJrbGluZUdyb3VwKSx0aGlzLmxpbmVQYXRoLnpJbmRleD1mLlNFUklFU19TVFJPS0VfWklOREVYLHRoaXMueENyb3NzaGFpckxpbmUuekluZGV4PWYuQ1JPU1NIQUlSX1pJTkRFWCx0aGlzLnlDcm9zc2hhaXJMaW5lLnpJbmRleD1mLkNST1NTSEFJUl9aSU5ERVgsdGhpcy5tYXJrZXJzLnpJbmRleD1mLlNFUklFU19NQVJLRVJTX1pJTkRFWCx0aGlzLmxpbmVTcGFya2xpbmVHcm91cC5hcHBlbmQoW3RoaXMubGluZVBhdGgsdGhpcy54Q3Jvc3NoYWlyTGluZSx0aGlzLnlDcm9zc2hhaXJMaW5lLHRoaXMubWFya2Vyc10pfWdldE5vZGVEYXRhKCl7cmV0dXJuIHRoaXMubWFya2VyU2VsZWN0aW9uRGF0YX1tYXJrZXJGYWN0b3J5KCl7Y29uc3R7c2hhcGU6ZX09dGhpcy5tYXJrZXI7cmV0dXJuIG5ldyh3KGUpKX1vbk1hcmtlclNoYXBlQ2hhbmdlKCl7dGhpcy5tYXJrZXJTZWxlY3Rpb249dGhpcy5tYXJrZXJTZWxlY3Rpb24uY2xlYXIoKSx0aGlzLnNjaGVkdWxlTGF5b3V0KCl9dXBkYXRlKCl7Y29uc3QgZT10aGlzLmdlbmVyYXRlTm9kZURhdGEoKTtlJiYodGhpcy5tYXJrZXJTZWxlY3Rpb25EYXRhPWUsdGhpcy51cGRhdGVTZWxlY3Rpb24oZSksdGhpcy51cGRhdGVOb2RlcygpLHRoaXMudXBkYXRlTGluZSgpKX11cGRhdGVZU2NhbGVEb21haW4oKXtjb25zdHt5RGF0YTplLHlTY2FsZTp0fT10aGlzLGk9QShlKTtsZXQgcz0wLHI9MTtpZih2b2lkIDAhPT1pJiYocz10aGlzLm1pbj1pWzBdLHI9dGhpcy5tYXg9aVsxXSkscz09PXIpe2NvbnN0IGU9TWF0aC5hYnMoLjAxKnMpO3MtPWUscis9ZX10LmRvbWFpbj1bcyxyXX1nZW5lcmF0ZU5vZGVEYXRhKCl7Y29uc3R7ZGF0YTplLHlEYXRhOnQseERhdGE6aSx4U2NhbGU6cyx5U2NhbGU6cn09dGhpcztpZighZSlyZXR1cm47Y29uc3Qgbz0hKHMgaW5zdGFuY2VvZiBQKSxuPW8/MDpzLmJhbmR3aWR0aC8yLGE9W107Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspe2NvbnN0IGw9dFtlXSxkPWlbZV07aWYobnVsbD09bCljb250aW51ZTtjb25zdCBjPXMuY29udmVydChvP3MudG9Eb21haW4oZCk6ZCkrbixoPXZvaWQgMD09PWw/TmFOOnIuY29udmVydChsKTthLnB1c2goe3Nlcmllc0RhdHVtOnt4OmQseTpsfSxwb2ludDp7eDpjLHk6aH19KX1yZXR1cm4gYX11cGRhdGVTZWxlY3Rpb24oZSl7dGhpcy5tYXJrZXJTZWxlY3Rpb24udXBkYXRlKGUpfXVwZGF0ZU5vZGVzKCl7Y29uc3R7aGlnaGxpZ2h0ZWREYXR1bTplLGhpZ2hsaWdodFN0eWxlOnQsbWFya2VyOml9PXRoaXMse3NpemU6cyxmaWxsOnIsc3Ryb2tlOm8sc3Ryb2tlV2lkdGg6bn09dCxhPWkuZm9ybWF0dGVyO3RoaXMubWFya2VyU2VsZWN0aW9uLmVhY2goKHQsbCxkKT0+e2NvbnN0IGM9bD09PWUsaD1jJiZ2b2lkIDAhPT1yP3I6aS5maWxsLHU9YyYmdm9pZCAwIT09bz9vOmkuc3Ryb2tlLHA9YyYmdm9pZCAwIT09bj9uOmkuc3Ryb2tlV2lkdGgsZz1jJiZ2b2lkIDAhPT1zP3M6aS5zaXplO2xldCBtO2NvbnN0e3Nlcmllc0RhdHVtOmYscG9pbnQ6dn09bDtpZihhKXtjb25zdCBlPTA9PT1kLHQ9ZD09PXRoaXMubWFya2VyU2VsZWN0aW9uRGF0YS5sZW5ndGgtMSxpPWYueT09PXRoaXMubWluLHM9Zi55PT09dGhpcy5tYXg7bT1hKHtkYXR1bTpsLHhWYWx1ZTpmLngseVZhbHVlOmYueSxtaW46aSxtYXg6cyxmaXJzdDplLGxhc3Q6dCxmaWxsOmgsc3Ryb2tlOnUsc3Ryb2tlV2lkdGg6cCxzaXplOmcsaGlnaGxpZ2h0ZWQ6Y30pfXQuc2l6ZT1tJiZudWxsIT1tLnNpemU/bS5zaXplOmcsdC5maWxsPW0mJm51bGwhPW0uZmlsbD9tLmZpbGw6aCx0LnN0cm9rZT1tJiZudWxsIT1tLnN0cm9rZT9tLnN0cm9rZTp1LHQuc3Ryb2tlV2lkdGg9bSYmbnVsbCE9bS5zdHJva2VXaWR0aD9tLnN0cm9rZVdpZHRoOnAsdC50cmFuc2xhdGlvblg9di54LHQudHJhbnNsYXRpb25ZPXYueSx0LnZpc2libGU9bSYmbnVsbCE9bS5lbmFibGVkP20uZW5hYmxlZDppLmVuYWJsZWQmJnQuc2l6ZT4wfSl9dXBkYXRlTGluZSgpe2NvbnN0e2xpbmVQYXRoOmUseURhdGE6dCx4RGF0YTppLHhTY2FsZTpzLHlTY2FsZTpyLGxpbmU6b309dGhpcztpZih0Lmxlbmd0aDwyKXJldHVybjtjb25zdCBuPSEocyBpbnN0YW5jZW9mIFApLGE9ZS5wYXRoLGw9dC5sZW5ndGgsZD1uPzA6cy5iYW5kd2lkdGgvMjtsZXQgYz0hMDthLmNsZWFyKCk7Zm9yKGxldCBlPTA7ZTxsO2UrKyl7Y29uc3Qgbz1pW2VdLGw9dFtlXSxoPXMuY29udmVydChuP3MudG9Eb21haW4obyk6bykrZCx1PXZvaWQgMD09PWw/TmFOOnIuY29udmVydChsKTtudWxsPT1sP2M9ITA6Yz8oYS5tb3ZlVG8oaCx1KSxjPSExKTphLmxpbmVUbyhoLHUpfWUuZmlsbD12b2lkIDAsZS5zdHJva2U9by5zdHJva2UsZS5zdHJva2VXaWR0aD1vLnN0cm9rZVdpZHRofXVwZGF0ZVhDcm9zc2hhaXJMaW5lKCl7dmFyIGU7Y29uc3R7eVNjYWxlOnQseENyb3NzaGFpckxpbmU6aSxoaWdobGlnaHRlZERhdHVtOnMsY3Jvc3NoYWlyczp7eExpbmU6cn19PXRoaXM7aWYoIXIuZW5hYmxlZHx8bnVsbD09cylyZXR1cm4gdm9pZChpLnN0cm9rZVdpZHRoPTApO2kueTE9dC5yYW5nZVswXSxpLnkyPXQucmFuZ2VbMV0saS54MT1pLngyPTAsaS5zdHJva2U9ci5zdHJva2UsaS5zdHJva2VXaWR0aD1udWxsIT09KGU9ci5zdHJva2VXaWR0aCkmJnZvaWQgMCE9PWU/ZToxLGkubGluZUNhcD0icm91bmQiPT09ci5saW5lQ2FwfHwic3F1YXJlIj09PXIubGluZUNhcD9yLmxpbmVDYXA6dm9pZCAwO2NvbnN0e2xpbmVEYXNoOm99PXI7aS5saW5lRGFzaD1BcnJheS5pc0FycmF5KG8pP286YihpLmxpbmVDYXAsci5saW5lRGFzaCksaS50cmFuc2xhdGlvblg9cy5wb2ludC54fXVwZGF0ZVlDcm9zc2hhaXJMaW5lKCl7dmFyIGU7Y29uc3R7eFNjYWxlOnQseUNyb3NzaGFpckxpbmU6aSxoaWdobGlnaHRlZERhdHVtOnMsY3Jvc3NoYWlyczp7eUxpbmU6cn19PXRoaXM7aWYoIXIuZW5hYmxlZHx8bnVsbD09cylyZXR1cm4gdm9pZChpLnN0cm9rZVdpZHRoPTApO2kueDE9dC5yYW5nZVswXSxpLngyPXQucmFuZ2VbMV0saS55MT1pLnkyPTAsaS5zdHJva2U9ci5zdHJva2UsaS5zdHJva2VXaWR0aD1udWxsIT09KGU9ci5zdHJva2VXaWR0aCkmJnZvaWQgMCE9PWU/ZToxLGkubGluZUNhcD0icm91bmQiPT09ci5saW5lQ2FwfHwic3F1YXJlIj09PXIubGluZUNhcD9yLmxpbmVDYXA6dm9pZCAwO2NvbnN0e2xpbmVEYXNoOm99PXI7aS5saW5lRGFzaD1BcnJheS5pc0FycmF5KG8pP286YihpLmxpbmVDYXAsci5saW5lRGFzaCksaS50cmFuc2xhdGlvblk9cy5wb2ludC55fWdldFRvb2x0aXBIdG1sKGUpe3ZhciB0LGk7Y29uc3R7ZGF0YVR5cGU6c309dGhpcyx7c2VyaWVzRGF0dW06cn09ZSxvPXIueSxuPXIueCxhPXtjb250ZW50OnRoaXMuZm9ybWF0TnVtZXJpY0RhdHVtKG8pLHRpdGxlOiJhcnJheSI9PT1zfHwib2JqZWN0Ij09PXM/dGhpcy5mb3JtYXREYXR1bShuKTp2b2lkIDB9LGw9bnVsbD09PShpPW51bGw9PT0odD10aGlzLnByb2Nlc3NlZE9wdGlvbnMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnRvb2x0aXApfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnJlbmRlcmVyO3JldHVybiBsP3kobCh7Y29udGV4dDp0aGlzLmNvbnRleHQsZGF0dW06cix5VmFsdWU6byx4VmFsdWU6bn0pLGEpOnkoYSl9fUkuY2xhc3NOYW1lPSJMaW5lU3BhcmtsaW5lIjtjb25zdHtleHRlbnQ6Tn09by5rO3ZhciBHLGs7IWZ1bmN0aW9uKGUpe2VbZS5SZWN0PTBdPSJSZWN0IixlW2UuTGFiZWw9MV09IkxhYmVsIn0oR3x8KEc9e30pKSxmdW5jdGlvbihlKXtlLkluc2lkZUJhc2U9Imluc2lkZUJhc2UiLGUuSW5zaWRlRW5kPSJpbnNpZGVFbmQiLGUuQ2VudGVyPSJjZW50ZXIiLGUuT3V0c2lkZUVuZD0ib3V0c2lkZUVuZCJ9KGt8fChrPXt9KSk7Y2xhc3MgXyBleHRlbmRzIGNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5lbmFibGVkPSEwLHRoaXMuZm9udFNpemU9OCx0aGlzLmZvbnRGYW1pbHk9IlZlcmRhbmEsIHNhbnMtc2VyaWYiLHRoaXMuZm9udFN0eWxlPXZvaWQgMCx0aGlzLmZvbnRXZWlnaHQ9dm9pZCAwLHRoaXMuY29sb3I9InJnYmEoNzAsIDcwLCA3MCwgMSkifX17Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuZm9ybWF0dGVyPXZvaWQgMCx0aGlzLnBsYWNlbWVudD1rLkluc2lkZUVuZH19Y2xhc3MgViBleHRlbmRzIEN7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuZmlsbD0icmdiKDEyNCwgMTgxLCAyMzYpIix0aGlzLnN0cm9rZT0ic2lsdmVyIix0aGlzLnN0cm9rZVdpZHRoPTAsdGhpcy5wYWRkaW5nSW5uZXI9LjEsdGhpcy5wYWRkaW5nT3V0ZXI9LjIsdGhpcy52YWx1ZUF4aXNEb21haW49dm9pZCAwLHRoaXMuZm9ybWF0dGVyPXZvaWQgMCx0aGlzLmF4aXNMaW5lPW5ldyBvLmkuTGluZSx0aGlzLmJhbmRXaWR0aD0wLHRoaXMuc3BhcmtsaW5lR3JvdXA9bmV3IG8uaS5Hcm91cCx0aGlzLnJlY3RHcm91cD1uZXcgby5pLkdyb3VwLHRoaXMubGFiZWxHcm91cD1uZXcgby5pLkdyb3VwLHRoaXMucmVjdFNlbGVjdGlvbj1vLmkuU2VsZWN0aW9uLnNlbGVjdCh0aGlzLnJlY3RHcm91cCxvLmkuUmVjdCksdGhpcy5sYWJlbFNlbGVjdGlvbj1vLmkuU2VsZWN0aW9uLnNlbGVjdCh0aGlzLmxhYmVsR3JvdXAsby5pLlRleHQpLHRoaXMubm9kZVNlbGVjdGlvbkRhdGE9W10sdGhpcy5sYWJlbD1uZXcgXyx0aGlzLnJvb3RHcm91cC5hcHBlbmQodGhpcy5zcGFya2xpbmVHcm91cCksdGhpcy5yZWN0R3JvdXAuekluZGV4PWYuU0VSSUVTX0ZJTExfWklOREVYLHRoaXMuYXhpc0xpbmUuekluZGV4PWYuQVhJU19MSU5FX1pJTkRFWCx0aGlzLmxhYmVsR3JvdXAuekluZGV4PWYuU0VSSUVTX0xBQkVMX1pJTkRFWCx0aGlzLnNwYXJrbGluZUdyb3VwLmFwcGVuZChbdGhpcy5yZWN0R3JvdXAsdGhpcy5heGlzTGluZSx0aGlzLmxhYmVsR3JvdXBdKSx0aGlzLmF4aXNMaW5lLmxpbmVDYXA9InJvdW5kIix0aGlzLmxhYmVsLmVuYWJsZWQ9ITF9Z2V0Tm9kZURhdGEoKXtyZXR1cm4gdGhpcy5ub2RlU2VsZWN0aW9uRGF0YX11cGRhdGUoKXt0aGlzLnVwZGF0ZVNlbGVjdGlvbnMoKSx0aGlzLnVwZGF0ZU5vZGVzKCl9dXBkYXRlU2VsZWN0aW9ucygpe2NvbnN0IGU9dGhpcy5nZW5lcmF0ZU5vZGVEYXRhKCk7ZSYmKHRoaXMubm9kZVNlbGVjdGlvbkRhdGE9ZSx0aGlzLnVwZGF0ZVJlY3RTZWxlY3Rpb24oZSksdGhpcy51cGRhdGVMYWJlbFNlbGVjdGlvbihlKSl9dXBkYXRlTm9kZXMoKXt0aGlzLnVwZGF0ZVJlY3ROb2RlcygpLHRoaXMudXBkYXRlTGFiZWxOb2RlcygpfWNhbGN1bGF0ZVN0ZXAoZSl7dmFyIHQ7Y29uc3R7eFNjYWxlOmkscGFkZGluZ0lubmVyOnMscGFkZGluZ091dGVyOnIsc21hbGxlc3RJbnRlcnZhbDpvfT10aGlzO2xldCBuPShpLmRvbWFpblsxXS1pLmRvbWFpblswXSkvKG51bGwhPT0odD1udWxsPT1vP3ZvaWQgMDpvLngpJiZ2b2lkIDAhPT10P3Q6MSkrMTtjb25zdCBhPU1hdGgubWluKG4sNTApLGw9YS0xO3JldHVybiBlL01hdGgubWF4KDEsMipyK2wqcythKX11cGRhdGVZU2NhbGVEb21haW4oKXtjb25zdHt5U2NhbGU6ZSx5RGF0YTp0LHZhbHVlQXhpc0RvbWFpbjppfT10aGlzLHM9Tih0KTtsZXQgcj0wLG89MTt2b2lkIDAhPT1zJiYocj10aGlzLm1pbj1zWzBdLG89dGhpcy5tYXg9c1sxXSkscj1yPDA/cjowLG89bzwwPzA6byxpJiYoaVsxXTxvJiYoaVsxXT1vKSxpWzBdPnImJihpWzBdPXIpKSxlLmRvbWFpbj1pfHxbcixvXX11cGRhdGVSZWN0U2VsZWN0aW9uKGUpe3RoaXMucmVjdFNlbGVjdGlvbi51cGRhdGUoZSl9dXBkYXRlUmVjdE5vZGVzKCl7Y29uc3R7aGlnaGxpZ2h0ZWREYXR1bTplLGZvcm1hdHRlcjp0LGZpbGw6aSxzdHJva2U6cyxzdHJva2VXaWR0aDpyfT10aGlzLHtmaWxsOm8sc3Ryb2tlOm4sc3Ryb2tlV2lkdGg6YX09dGhpcy5oaWdobGlnaHRTdHlsZTt0aGlzLnJlY3RTZWxlY3Rpb24uZWFjaCgobCxkLGMpPT57Y29uc3QgaD1kPT09ZSx1PWgmJnZvaWQgMCE9PW8/bzppLHA9aCYmdm9pZCAwIT09bj9uOnMsZz1oJiZ2b2lkIDAhPT1hP2E6cjtsZXQgbTtjb25zdHt4OmYseTp2LHdpZHRoOkMsaGVpZ2h0Onksc2VyaWVzRGF0dW06U309ZDtpZih0KXtjb25zdCBlPTA9PT1jLGk9Yz09PXRoaXMubm9kZVNlbGVjdGlvbkRhdGEubGVuZ3RoLTEscz1TLnk9PT10aGlzLm1pbixyPVMueT09PXRoaXMubWF4O209dCh7ZGF0dW06ZCx4VmFsdWU6Uy54LHlWYWx1ZTpTLnksd2lkdGg6QyxoZWlnaHQ6eSxtaW46cyxtYXg6cixmaXJzdDplLGxhc3Q6aSxmaWxsOnUsc3Ryb2tlOnAsc3Ryb2tlV2lkdGg6ZyxoaWdobGlnaHRlZDpofSl9bC5maWxsPW0mJm0uZmlsbHx8dSxsLnN0cm9rZT1tJiZtLnN0cm9rZXx8cCxsLnN0cm9rZVdpZHRoPW0mJm0uc3Ryb2tlV2lkdGh8fGcsbC54PWwueT0wLGwud2lkdGg9QyxsLmhlaWdodD15LGwudmlzaWJsZT1sLmhlaWdodD4wLGwudHJhbnNsYXRpb25YPWYsbC50cmFuc2xhdGlvblk9dn0pfXVwZGF0ZUxhYmVsU2VsZWN0aW9uKGUpe3RoaXMubGFiZWxTZWxlY3Rpb24udXBkYXRlKGUsZT0+e2UudGFnPUcuTGFiZWwsZS5wb2ludGVyRXZlbnRzPW8uaS5Qb2ludGVyRXZlbnRzLk5vbmV9KX11cGRhdGVMYWJlbE5vZGVzKCl7Y29uc3R7bGFiZWw6e2VuYWJsZWQ6ZSxmb250U3R5bGU6dCxmb250V2VpZ2h0OmksZm9udFNpemU6cyxmb250RmFtaWx5OnIsY29sb3I6b319PXRoaXM7dGhpcy5sYWJlbFNlbGVjdGlvbi5lYWNoKChuLGEpPT57Y29uc3QgbD1hLmxhYmVsO2wmJmU/KG4uZm9udFN0eWxlPXQsbi5mb250V2VpZ2h0PWksbi5mb250U2l6ZT1zLG4uZm9udEZhbWlseT1yLG4udGV4dEFsaWduPWwudGV4dEFsaWduLG4udGV4dEJhc2VsaW5lPWwudGV4dEJhc2VsaW5lLG4udGV4dD1sLnRleHQsbi54PWwueCxuLnk9bC55LG4uZmlsbD1vLG4udmlzaWJsZT0hMCk6bi52aXNpYmxlPSExfSl9Z2V0VG9vbHRpcEh0bWwoZSl7dmFyIHQsaTtjb25zdHtkYXRhVHlwZTpzfT10aGlzLHtzZXJpZXNEYXR1bTpyfT1lLG89ci55LG49ci54LGE9e2NvbnRlbnQ6dGhpcy5mb3JtYXROdW1lcmljRGF0dW0obyksdGl0bGU6ImFycmF5Ij09PXN8fCJvYmplY3QiPT09cz90aGlzLmZvcm1hdERhdHVtKG4pOnZvaWQgMH0sbD1udWxsPT09KGk9bnVsbD09PSh0PXRoaXMucHJvY2Vzc2VkT3B0aW9ucyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudG9vbHRpcCl8fHZvaWQgMD09PWk/dm9pZCAwOmkucmVuZGVyZXI7cmV0dXJuIGw/eShsKHtjb250ZXh0OnRoaXMuY29udGV4dCxkYXR1bTpyLHlWYWx1ZTpvLHhWYWx1ZTpufSksYSk6eShhKX1mb3JtYXRMYWJlbFZhbHVlKGUpe3JldHVybiBlJTEhPTA/ZS50b0ZpeGVkKDEpOmUudG9GaXhlZCgwKX19Y29uc3R7aXNOdW1iZXI6Qn09by5rLHtCYW5kU2NhbGU6SH09by5oO2NsYXNzIFcgZXh0ZW5kcyBWe3VwZGF0ZVlTY2FsZVJhbmdlKCl7Y29uc3R7c2VyaWVzUmVjdDplLHlTY2FsZTp0fT10aGlzO3QucmFuZ2U9WzAsZS53aWR0aF19dXBkYXRlWFNjYWxlUmFuZ2UoKXtjb25zdHt4U2NhbGU6ZSxzZXJpZXNSZWN0OnQscGFkZGluZ091dGVyOmkscGFkZGluZ0lubmVyOnN9PXRoaXM7aWYoZSBpbnN0YW5jZW9mIEgpZS5yYW5nZT1bMCx0LmhlaWdodF0sZS5wYWRkaW5nSW5uZXI9cyxlLnBhZGRpbmdPdXRlcj1pO2Vsc2V7Y29uc3Qgcj10aGlzLmNhbGN1bGF0ZVN0ZXAodC5oZWlnaHQpLG89cippO3RoaXMuYmFuZFdpZHRoPXIqKDEtcyksZS5yYW5nZT1bbyx0LmhlaWdodC1vLXRoaXMuYmFuZFdpZHRoXX19dXBkYXRlQXhpc0xpbmUoKXtjb25zdHt5U2NhbGU6ZSxheGlzOnQsYXhpc0xpbmU6aSxzZXJpZXNSZWN0OnN9PXRoaXMse3N0cm9rZVdpZHRoOnJ9PXQ7aS54MT0wLGkueDI9MCxpLnkxPTAsaS55Mj1zLmhlaWdodCxpLnN0cm9rZT10LnN0cm9rZSxpLnN0cm9rZVdpZHRoPXIrKHIlMj09MT8xOjApO2NvbnN0IG89ZS5jb252ZXJ0KDApO2kudHJhbnNsYXRpb25YPW99Z2VuZXJhdGVOb2RlRGF0YSgpe2NvbnN0e2RhdGE6ZSx5RGF0YTp0LHhEYXRhOmkseFNjYWxlOnMseVNjYWxlOnIsZmlsbDpuLHN0cm9rZTphLHN0cm9rZVdpZHRoOmwsbGFiZWw6ZH09dGhpcztpZighZSlyZXR1cm47Y29uc3R7Zm9udFN0eWxlOmMsZm9udFdlaWdodDpoLGZvbnRTaXplOnUsZm9udEZhbWlseTpwLGNvbG9yOmcsZm9ybWF0dGVyOm0scGxhY2VtZW50OmZ9PWQsdj1bXSxDPXIuY29udmVydCgwKSx5PSEocyBpbnN0YW5jZW9mIEgpO2ZvcihsZXQgZT0wLGQ9dC5sZW5ndGg7ZTxkO2UrKyl7bGV0IGQ9dFtlXTtjb25zdCBTPWlbZV0sdz12b2lkIDA9PT1kO3cmJihkPTApO2NvbnN0IGI9cy5jb252ZXJ0KHk/cy50b0RvbWFpbihTKTpTKSxFPU1hdGgubWluKHZvaWQgMD09PWQ/TmFOOnIuY29udmVydChkKSxDKSxSPU1hdGgubWF4KHZvaWQgMD09PWQ/TmFOOnIuY29udmVydChkKSxDKSx4PXk/dGhpcy5iYW5kV2lkdGg6cy5iYW5kd2lkdGgsVD1SLUUsRD17eDpDLHk6Yn07bGV0IE87Tz1tP20oe3ZhbHVlOmR9KTp2b2lkIDAhPT1kJiZCKGQpP3RoaXMuZm9ybWF0TGFiZWxWYWx1ZShkKToiIjtjb25zdCBBPWIreC8yO2xldCBQO2NvbnN0IE09Im1pZGRsZSI7bGV0IEw7Y29uc3QgRj12b2lkIDAhPT1kJiZkPj0wLEk9NDtpZihmPT09ay5DZW50ZXIpUD1FK1QvMixMPSJjZW50ZXIiO2Vsc2UgaWYoZj09PWsuT3V0c2lkZUVuZClQPUUrKEY/VCtJOi1JKSxMPUY/InN0YXJ0IjoiZW5kIjtlbHNlIGlmKGY9PT1rLkluc2lkZUVuZCl7UD1FKyhGP1QtSTpJKSxMPUY/ImVuZCI6InN0YXJ0Ijtjb25zdCBlPW8uaS5IZHBpQ2FudmFzLmdldFRleHRTaXplKE8scCkud2lkdGh8fDIwLHQ9QytlLGk9Qy1lOyhGJiZQPHR8fCFGJiZQPmkpJiYoUD1DK0kqKEY/MTotMSksTD1GPyJzdGFydCI6ImVuZCIpfWVsc2UgUD1DK0kqKEY/MTotMSksTD1GPyJzdGFydCI6ImVuZCI7di5wdXNoKHt4OkUseTpiLHdpZHRoOlQsaGVpZ2h0OngsZmlsbDpuLHN0cm9rZTphLHN0cm9rZVdpZHRoOmwsc2VyaWVzRGF0dW06e3g6Uyx5Onc/dm9pZCAwOmR9LHBvaW50OkQsbGFiZWw6e3g6UCx5OkEsdGV4dDpPLGZvbnRTdHlsZTpjLGZvbnRXZWlnaHQ6aCxmb250U2l6ZTp1LGZvbnRGYW1pbHk6cCx0ZXh0QWxpZ246TCx0ZXh0QmFzZWxpbmU6TSxmaWxsOmd9fSl9cmV0dXJuIHZ9Z2V0RGlzdGFuY2UoZSx0KXtyZXR1cm4gTWF0aC5hYnMoZS55LXQueSl9fVcuY2xhc3NOYW1lPSJCYXJTcGFya2xpbmUiO2NvbnN0e2lzTnVtYmVyOmp9PW8uayx7QmFuZFNjYWxlOlV9PW8uaDtjbGFzcyB6IGV4dGVuZHMgVnt1cGRhdGVZU2NhbGVSYW5nZSgpe2NvbnN0e3Nlcmllc1JlY3Q6ZSx5U2NhbGU6dH09dGhpczt0LnJhbmdlPVtlLmhlaWdodCwwXX11cGRhdGVYU2NhbGVSYW5nZSgpe2NvbnN0e3hTY2FsZTplLHNlcmllc1JlY3Q6dCxwYWRkaW5nT3V0ZXI6aSxwYWRkaW5nSW5uZXI6c309dGhpcztpZihlIGluc3RhbmNlb2YgVSllLnJhbmdlPVswLHQud2lkdGhdLGUucGFkZGluZ0lubmVyPXMsZS5wYWRkaW5nT3V0ZXI9aTtlbHNle2NvbnN0IHI9dGhpcy5jYWxjdWxhdGVTdGVwKHQud2lkdGgpLG89cippO3RoaXMuYmFuZFdpZHRoPXIqKDEtcyksZS5yYW5nZT1bbyx0LndpZHRoLW8tdGhpcy5iYW5kV2lkdGhdfX11cGRhdGVBeGlzTGluZSgpe2NvbnN0e3lTY2FsZTplLGF4aXM6dCxheGlzTGluZTppLHNlcmllc1JlY3Q6c309dGhpcyx7c3Ryb2tlV2lkdGg6cn09dDtpLngxPTAsaS54Mj1zLndpZHRoLGkueTE9MCxpLnkyPTAsaS5zdHJva2U9dC5zdHJva2UsaS5zdHJva2VXaWR0aD1yKyhyJTI9PTE/MTowKTtjb25zdCBvPWUuY29udmVydCgwKTtpLnRyYW5zbGF0aW9uWT1vfWdlbmVyYXRlTm9kZURhdGEoKXtjb25zdHtkYXRhOmUseURhdGE6dCx4RGF0YTppLHhTY2FsZTpzLHlTY2FsZTpyLGZpbGw6bixzdHJva2U6YSxzdHJva2VXaWR0aDpsLGxhYmVsOmR9PXRoaXM7aWYoIWUpcmV0dXJuO2NvbnN0e2ZvbnRTdHlsZTpjLGZvbnRXZWlnaHQ6aCxmb250U2l6ZTp1LGZvbnRGYW1pbHk6cCxjb2xvcjpnLGZvcm1hdHRlcjptLHBsYWNlbWVudDpmfT1kLHY9W10sQz1yLmNvbnZlcnQoMCkseT0hKHMgaW5zdGFuY2VvZiBVKTtmb3IobGV0IGU9MCxkPXQubGVuZ3RoO2U8ZDtlKyspe2xldCBkPXRbZV07Y29uc3QgUz1pW2VdLHc9dm9pZCAwPT09ZDt3JiYoZD0wKTtjb25zdCBiPU1hdGgubWluKHZvaWQgMD09PWQ/TmFOOnIuY29udmVydChkKSxDKSxFPXMuY29udmVydCh5P3MudG9Eb21haW4oUyk6UyksUj1NYXRoLm1heCh2b2lkIDA9PT1kP05hTjpyLmNvbnZlcnQoZCksQykseD15P3RoaXMuYmFuZFdpZHRoOnMuYmFuZHdpZHRoLFQ9Ui1iLEQ9e3g6RSt4LzIseTpDfTtsZXQgTztPPW0/bSh7dmFsdWU6ZH0pOnZvaWQgMCE9PWQmJmooZCk/dGhpcy5mb3JtYXRMYWJlbFZhbHVlKGQpOiIiO2NvbnN0IEE9RSt4LzI7bGV0IFA7Y29uc3QgTT0iY2VudGVyIjtsZXQgTDtjb25zdCBGPXZvaWQgMCE9PWQmJmQ+PTAsST0yO2lmKGY9PT1rLkNlbnRlcilQPWIrVC8yLEw9Im1pZGRsZSI7ZWxzZSBpZihmPT09ay5PdXRzaWRlRW5kKVA9YisoRj8tSTpUK0kpLEw9Rj8iYm90dG9tIjoidG9wIjtlbHNlIGlmKGY9PT1rLkluc2lkZUVuZCl7UD1iKyhGP0k6VC1JKSxMPUY/InRvcCI6ImJvdHRvbSI7Y29uc3QgZT1vLmkuSGRwaUNhbnZhcy5nZXRUZXh0U2l6ZShPLHApLmhlaWdodHx8MTAsdD1DLWUsaT1DK2U7KEYmJlA+dHx8IUYmJlA8aSkmJihQPUMrSSooRj8tMToxKSxMPUY/ImJvdHRvbSI6InRvcCIpfWVsc2UgUD1DK0kqKEY/LTE6MSksTD1GPyJib3R0b20iOiJ0b3AiO3YucHVzaCh7eDpFLHk6Yix3aWR0aDp4LGhlaWdodDpULGZpbGw6bixzdHJva2U6YSxzdHJva2VXaWR0aDpsLHNlcmllc0RhdHVtOnt4OlMseTp3P3ZvaWQgMDpkfSxwb2ludDpELGxhYmVsOnt4OkEseTpQLHRleHQ6Tyxmb250U3R5bGU6Yyxmb250V2VpZ2h0OmgsZm9udFNpemU6dSxmb250RmFtaWx5OnAsdGV4dEFsaWduOk0sdGV4dEJhc2VsaW5lOkwsZmlsbDpnfX0pfXJldHVybiB2fX16LmNsYXNzTmFtZT0iQ29sdW1uU3BhcmtsaW5lIjtjb25zdHtpc051bWJlcjpLfT1vLms7ZnVuY3Rpb24gWShlLHQpe3RlKGUsInZhbHVlQXhpc0RvbWFpbiIsdC52YWx1ZUF4aXNEb21haW4sdCksdGUoZSwiZmlsbCIsdC5maWxsLHQpLHRlKGUsInN0cm9rZSIsdC5zdHJva2UsdCksdGUoZSwic3Ryb2tlV2lkdGgiLHQuc3Ryb2tlV2lkdGgsdCksdGUoZSwicGFkZGluZ0lubmVyIix0LnBhZGRpbmdJbm5lcix0KSx0ZShlLCJwYWRkaW5nT3V0ZXIiLHQucGFkZGluZ091dGVyLHQpLHRlKGUsImZvcm1hdHRlciIsdC5mb3JtYXR0ZXIsdCksdC5sYWJlbCYmZnVuY3Rpb24oZSx0KXt0ZShlLCJlbmFibGVkIix0LmVuYWJsZWQsdCksdGUoZSwiZm9udFN0eWxlIix0LmZvbnRTdHlsZSx0KSx0ZShlLCJmb250V2VpZ2h0Iix0LmZvbnRXZWlnaHQsdCksdGUoZSwiZm9udFNpemUiLHQuZm9udFNpemUsdCksdGUoZSwiZm9udEZhbWlseSIsdC5mb250RmFtaWx5LHQpLHRlKGUsInRleHRBbGlnbiIsdC50ZXh0QWxpZ24sdCksdGUoZSwidGV4dEJhc2VsaW5lIix0LnRleHRCYXNlbGluZSx0KSx0ZShlLCJjb2xvciIsdC5jb2xvcix0KSx0ZShlLCJmb3JtYXR0ZXIiLHQuZm9ybWF0dGVyLHQpLHRlKGUsInBsYWNlbWVudCIsdC5wbGFjZW1lbnQsdCl9KGUubGFiZWwsdC5sYWJlbCl9ZnVuY3Rpb24gJChlLHQpe3RlKGUsImVuYWJsZWQiLHQuZW5hYmxlZCx0KSx0ZShlLCJzaXplIix0LnNpemUsdCksdGUoZSwic2hhcGUiLHQuc2hhcGUsdCksdGUoZSwiZmlsbCIsdC5maWxsLHQpLHRlKGUsInN0cm9rZSIsdC5zdHJva2UsdCksdGUoZSwic3Ryb2tlV2lkdGgiLHQuc3Ryb2tlV2lkdGgsdCksdGUoZSwiZm9ybWF0dGVyIix0LmZvcm1hdHRlcix0KX1mdW5jdGlvbiBYKGUsdCl7dGUoZSwic3Ryb2tlIix0LnN0cm9rZSx0KSx0ZShlLCJzdHJva2VXaWR0aCIsdC5zdHJva2VXaWR0aCx0KX1mdW5jdGlvbiBxKGUsdCl7ZS54TGluZSYmdC54TGluZSYmWihlLnhMaW5lLHQueExpbmUpLGUueUxpbmUmJnQueUxpbmUmJlooZS55TGluZSx0LnlMaW5lKX1mdW5jdGlvbiBaKGUsdCl7dGUoZSwiZW5hYmxlZCIsdC5lbmFibGVkLHQpLHRlKGUsInN0cm9rZSIsdC5zdHJva2UsdCksdGUoZSwic3Ryb2tlV2lkdGgiLHQuc3Ryb2tlV2lkdGgsdCksdGUoZSwibGluZURhc2giLHQubGluZURhc2gsdCksdGUoZSwibGluZUNhcCIsdC5saW5lQ2FwLHQpfWNvbnN0IFE9e307Y29uc3QgSj0oZSx0LGkpPT57aWYoSyh0KSlyZXR1cm4hMDtjb25zdCBzPWBBRyBDaGFydHM6ICR7ZX0gbXVzdCBiZSBhIG51bWJlciwgdGhlIHZhbHVlIHlvdSBwcm92aWRlZCBpcyBub3QgYSB2YWxpZCBudW1iZXIuIFVzaW5nIHRoZSBkZWZhdWx0IG9mICR7aX1weC5gO3ZhciByLG87cmV0dXJuIHI9KCk9PmNvbnNvbGUud2FybihzKSxRW289ZSsiIG5vdCBhIG51bWJlciJdfHwocigpLFFbb109ITApLCExfSxlZT17eE9mZnNldDpKLHlPZmZzZXQ6Sn07ZnVuY3Rpb24gdGUoZSx0LGkscyl7aWYodCBpbiBzKWlmKHQgaW4gZSl7Y29uc3Qgcz1lZVt0XTsoIXN8fHModCxpLGVbdF0pKSYmZVt0XSE9PWkmJihlW3RdPWkpfWVsc2UgY29uc29sZS53YXJuKGBQcm9wZXJ0eSAke3R9IGRvZXMgbm90IGV4aXN0IG9uIHRoZSB0YXJnZXQgb2JqZWN0LmApfXZhciBpZT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBzZSBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoc2UuVEVNUExBVEUpfWluaXQoZSl7bGV0IHQ9ITA7Y29uc3QgaT10aGlzLnJlc2l6ZU9ic2VydmVyU2VydmljZS5vYnNlcnZlUmVzaXplKHRoaXMuZ2V0R3VpKCksKCk9Pntjb25zdHtjbGllbnRXaWR0aDppLGNsaWVudEhlaWdodDpzfT10aGlzLmdldEd1aSgpO2lmKDAhPT1pJiYwIT09cylpZih0KXtjb25zdCByPU9iamVjdC5hc3NpZ24oe2RhdGE6ZS52YWx1ZSx3aWR0aDppLGhlaWdodDpzLGNvbnRleHQ6e2RhdGE6ZS5kYXRhfX0sZS5zcGFya2xpbmVPcHRpb25zKTt0aGlzLnNwYXJrbGluZT1jbGFzc3tzdGF0aWMgY3JlYXRlKGUsdCl7Y29uc3QgaT1mdW5jdGlvbihlPSJsaW5lIil7c3dpdGNoKGUpe2Nhc2UiY29sdW1uIjpyZXR1cm4gbmV3IHo7Y2FzZSJiYXIiOnJldHVybiBuZXcgVztjYXNlImFyZWEiOnJldHVybiBuZXcgTztjYXNlImxpbmUiOmRlZmF1bHQ6cmV0dXJuIG5ldyBJfX0oKGU9by5rLmRlZXBDbG9uZShlKSkudHlwZSk7cmV0dXJuIHQmJihpLnRvb2x0aXA9dCksZnVuY3Rpb24oZSx0KXt0ZShlLCJjb250ZXh0Iix0LmNvbnRleHQsdCksdGUoZSwid2lkdGgiLHQud2lkdGgsdCksdGUoZSwiaGVpZ2h0Iix0LmhlaWdodCx0KSx0ZShlLCJjb250YWluZXIiLHQuY29udGFpbmVyLHQpLHRlKGUsInhLZXkiLHQueEtleSx0KSx0ZShlLCJ5S2V5Iix0LnlLZXksdCksdC5wYWRkaW5nJiZmdW5jdGlvbihlLHQpe3RlKGUsInRvcCIsdC50b3AsdCksdGUoZSwicmlnaHQiLHQucmlnaHQsdCksdGUoZSwiYm90dG9tIix0LmJvdHRvbSx0KSx0ZShlLCJsZWZ0Iix0LmxlZnQsdCl9KGUucGFkZGluZyx0LnBhZGRpbmcpO3QuYXhpcyYmZnVuY3Rpb24oZSx0KXt0ZShlLCJ0eXBlIix0LnR5cGUsdCksdGUoZSwic3Ryb2tlIix0LnN0cm9rZSx0KSx0ZShlLCJzdHJva2VXaWR0aCIsdC5zdHJva2VXaWR0aCx0KX0oZS5heGlzLHQuYXhpcyk7dC5oaWdobGlnaHRTdHlsZSYmZnVuY3Rpb24oZSx0KXt0ZShlLCJmaWxsIix0LmZpbGwsdCksdGUoZSwic2l6ZSIsdC5zaXplLHQpLHRlKGUsInN0cm9rZSIsdC5zdHJva2UsdCksdGUoZSwic3Ryb2tlV2lkdGgiLHQuc3Ryb2tlV2lkdGgsdCl9KGUuaGlnaGxpZ2h0U3R5bGUsdC5oaWdobGlnaHRTdHlsZSl9KGksZSksZnVuY3Rpb24oZSx0KXtzd2l0Y2godC50eXBlKXtjYXNlImJhciI6Y2FzZSJjb2x1bW4iOlkoZSx0KTticmVhaztjYXNlImFyZWEiOiFmdW5jdGlvbihlLHQpe3RlKGUsImZpbGwiLHQuZmlsbCx0KSx0Lm1hcmtlciYmJChlLm1hcmtlcix0Lm1hcmtlcik7dC5saW5lJiZYKGUubGluZSx0LmxpbmUpO3QuY3Jvc3NoYWlycyYmcShlLmNyb3NzaGFpcnMsdC5jcm9zc2hhaXJzKX0oZSx0KTticmVhaztjYXNlImxpbmUiOmRlZmF1bHQ6IWZ1bmN0aW9uKGUsdCl7dC5tYXJrZXImJiQoZS5tYXJrZXIsdC5tYXJrZXIpO3QubGluZSYmWChlLmxpbmUsdC5saW5lKTt0LmNyb3NzaGFpcnMmJnEoZS5jcm9zc2hhaXJzLHQuY3Jvc3NoYWlycyl9KGUsdCl9fShpLGUpLGUuZGF0YSYmKGkuZGF0YT1lLmRhdGEpLGkucHJvY2Vzc2VkT3B0aW9ucz1lLGl9fS5jcmVhdGUocix0aGlzLnNwYXJrbGluZVRvb2x0aXBTaW5nbGV0b24uZ2V0U3BhcmtsaW5lVG9vbHRpcCgpKSx0aGlzLmVTcGFya2xpbmUuYXBwZW5kQ2hpbGQodGhpcy5zcGFya2xpbmUuY2FudmFzRWxlbWVudCksdD0hMX1lbHNlIHRoaXMuc3BhcmtsaW5lLndpZHRoPWksdGhpcy5zcGFya2xpbmUuaGVpZ2h0PXN9KTt0aGlzLmFkZERlc3Ryb3lGdW5jKCgpPT5pKCkpfXJlZnJlc2goZSl7cmV0dXJuISF0aGlzLnNwYXJrbGluZSYmKHRoaXMuc3BhcmtsaW5lLmRhdGE9ZS52YWx1ZSwhMCl9ZGVzdHJveSgpe3RoaXMuc3BhcmtsaW5lJiZ0aGlzLnNwYXJrbGluZS5kZXN0cm95KCksc3VwZXIuZGVzdHJveSgpfX1zZS5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctc3BhcmtsaW5lLXdyYXBwZXIiPlxuICAgICAgICAgICAgPHNwYW4gcmVmPSJlU3BhcmtsaW5lIj48L3NwYW4+XG4gICAgICAgIDwvZGl2PicsaWUoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZVNwYXJrbGluZSIpXSxzZS5wcm90b3R5cGUsImVTcGFya2xpbmUiLHZvaWQgMCksaWUoW09iamVjdChzLkF1dG93aXJlZCkoInJlc2l6ZU9ic2VydmVyU2VydmljZSIpXSxzZS5wcm90b3R5cGUsInJlc2l6ZU9ic2VydmVyU2VydmljZSIsdm9pZCAwKSxpZShbT2JqZWN0KHMuQXV0b3dpcmVkKSgic3BhcmtsaW5lVG9vbHRpcFNpbmdsZXRvbiIpXSxzZS5wcm90b3R5cGUsInNwYXJrbGluZVRvb2x0aXBTaW5nbGV0b24iLHZvaWQgMCk7dmFyIHJlPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBvZT1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7cG9zdENvbnN0cnVjdCgpe3RoaXMudG9vbHRpcD1uZXcgU31nZXRTcGFya2xpbmVUb29sdGlwKCl7cmV0dXJuIHRoaXMudG9vbHRpcH1kZXN0cm95VG9vbHRpcCgpe3RoaXMudG9vbHRpcCYmdGhpcy50b29sdGlwLmRlc3Ryb3koKX19O3JlKFtzLlBvc3RDb25zdHJ1Y3RdLG9lLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCkscmUoW3MuUHJlRGVzdHJveV0sb2UucHJvdG90eXBlLCJkZXN0cm95VG9vbHRpcCIsbnVsbCksb2U9cmUoW09iamVjdChzLkJlYW4pKCJzcGFya2xpbmVUb29sdGlwU2luZ2xldG9uIildLG9lKTtjb25zdCBuZT17dmVyc2lvbjoiMzEuMS4xIixtb2R1bGVOYW1lOnMuTW9kdWxlTmFtZXMuU3BhcmtsaW5lc01vZHVsZSxiZWFuczpbb2VdLHVzZXJDb21wb25lbnRzOlt7Y29tcG9uZW50TmFtZToiYWdTcGFya2xpbmVDZWxsUmVuZGVyZXIiLGNvbXBvbmVudENsYXNzOnNlfV0sZGVwZW5kYW50TW9kdWxlczpbci5FbnRlcnByaXNlQ29yZU1vZHVsZV19O2kuZCh0LCJTcGFya2xpbmVzTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbmV9KSl9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpO3ZhciBzLHI9aSgwKSxvPWkoMyk7Y2xhc3Mgbntjb25zdHJ1Y3RvcihlLHQsaSxzLHIsbyxuLGEsbCxkLGMpe3RoaXMucm93TW9kZWw9ZSx0aGlzLmZpbHRlclBhcmFtcz10LHRoaXMuY3JlYXRlS2V5PWksdGhpcy5jYXNlRm9ybWF0PXMsdGhpcy5jb2x1bW5Nb2RlbD1yLHRoaXMudmFsdWVTZXJ2aWNlPW8sdGhpcy50cmVlRGF0YU9yR3JvdXBpbmc9bix0aGlzLnRyZWVEYXRhPWEsdGhpcy5nZXREYXRhUGF0aD1sLHRoaXMuZ3JvdXBBbGxvd1VuYmFsYW5jZWQ9ZCx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcj1jfWV4dHJhY3RVbmlxdWVWYWx1ZXNBc3luYyhlLHQpe3JldHVybiBuZXcgci5BZ1Byb21pc2UoaT0+e2lmKHRoaXMucm93TW9kZWwuaXNSb3dEYXRhTG9hZGVkKCkpaSh0aGlzLmV4dHJhY3RVbmlxdWVWYWx1ZXMoZSx0KSk7ZWxzZXtjb25zdCBzPXRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHIuRXZlbnRzLkVWRU5UX1JPV19DT1VOVF9SRUFEWSwoKT0+e251bGw9PXN8fHMoKSxpKHRoaXMuZXh0cmFjdFVuaXF1ZVZhbHVlcyhlLHQpKX0pfX0pfWV4dHJhY3RVbmlxdWVWYWx1ZXMoZSx0KXtjb25zdCBpPW5ldyBNYXAscz10aGlzLmV4dHJhY3RFeGlzdGluZ0Zvcm1hdHRlZEtleXModCksbz1uZXcgU2V0LG49dGhpcy50cmVlRGF0YSYmISF0aGlzLmdldERhdGFQYXRoLGE9dGhpcy5jb2x1bW5Nb2RlbC5nZXRSb3dHcm91cENvbHVtbnMoKSxsPShlLG4pPT57Y29uc3QgYT10aGlzLmNhc2VGb3JtYXQoZSk7aWYoIW8uaGFzKGEpKXtvLmFkZChhKTtsZXQgbD1lLGQ9ci5fLm1ha2VOdWxsKG4pO2NvbnN0IGM9bnVsbD09cz92b2lkIDA6cy5nZXQoYSk7bnVsbCE9YyYmKGw9YyxkPXQuZ2V0KGMpKSxpLnNldChsLGQpfX07cmV0dXJuIHRoaXMucm93TW9kZWwuZm9yRWFjaExlYWZOb2RlKHQ9PntpZighdC5kYXRhfHwhZSh0KSlyZXR1cm47aWYodGhpcy50cmVlRGF0YU9yR3JvdXBpbmcpcmV0dXJuIHZvaWQgdGhpcy5hZGRWYWx1ZUZvclRyZWVEYXRhT3JHcm91cGluZyh0LG4sYSxsKTtsZXQgaT10aGlzLmdldFZhbHVlKHQpO3RoaXMuZmlsdGVyUGFyYW1zLmNvbnZlcnRWYWx1ZXNUb1N0cmluZ3M/dGhpcy5hZGRWYWx1ZUZvckNvbnZlcnRWYWx1ZXNUb1N0cmluZyh0LGksbCk6bnVsbCE9aSYmQXJyYXkuaXNBcnJheShpKT8oaS5mb3JFYWNoKGU9PntsKHRoaXMuY3JlYXRlS2V5KGUsdCksZSl9KSwwPT09aS5sZW5ndGgmJmwobnVsbCxudWxsKSk6bCh0aGlzLmNyZWF0ZUtleShpLHQpLGkpfSksaX1hZGRWYWx1ZUZvckNvbnZlcnRWYWx1ZXNUb1N0cmluZyhlLHQsaSl7Y29uc3Qgcz10aGlzLmNyZWF0ZUtleSh0LGUpO251bGwhPXMmJkFycmF5LmlzQXJyYXkocyk/KHMuZm9yRWFjaChlPT57Y29uc3QgdD1yLl8udG9TdHJpbmdPck51bGwoci5fLm1ha2VOdWxsKGUpKTtpKHQsdCl9KSwwPT09cy5sZW5ndGgmJmkobnVsbCxudWxsKSk6aShzLHMpfWFkZFZhbHVlRm9yVHJlZURhdGFPckdyb3VwaW5nKGUsdCxpLHMpe3ZhciBvO2xldCBuO2lmKHQpe2lmKG51bGw9PT0obz1lLmNoaWxkcmVuQWZ0ZXJHcm91cCl8fHZvaWQgMD09PW8/dm9pZCAwOm8ubGVuZ3RoKXJldHVybjtuPXRoaXMuZ2V0RGF0YVBhdGgoZS5kYXRhKX1lbHNlIG49aS5tYXAodD0+dGhpcy52YWx1ZVNlcnZpY2UuZ2V0S2V5Rm9yTm9kZSh0LGUpKSxuLnB1c2godGhpcy5nZXRWYWx1ZShlKSk7biYmKG49bi5tYXAoZT0+ci5fLnRvU3RyaW5nT3JOdWxsKHIuXy5tYWtlTnVsbChlKSkpKSwhdCYmdGhpcy5ncm91cEFsbG93VW5iYWxhbmNlZCYmKG51bGw9PW4/dm9pZCAwOm4uc29tZShlPT5udWxsPT1lKSkmJihuPW4uZmlsdGVyKGU9Pm51bGwhPWUpKSxzKHRoaXMuY3JlYXRlS2V5KG4pLG4pfWdldFZhbHVlKGUpe3JldHVybiB0aGlzLmZpbHRlclBhcmFtcy5nZXRWYWx1ZShlKX1leHRyYWN0RXhpc3RpbmdGb3JtYXR0ZWRLZXlzKGUpe2lmKCFlKXJldHVybiBudWxsO2NvbnN0IHQ9bmV3IE1hcDtyZXR1cm4gZS5mb3JFYWNoKChlLGkpPT57dC5zZXQodGhpcy5jYXNlRm9ybWF0KGkpLGkpfSksdH19Y2xhc3MgYXt9YS5TRUxFQ1RfQUxMPSJfX0FHX1NFTEVDVF9BTExfXyIsYS5BRERfU0VMRUNUSU9OX1RPX0ZJTFRFUj0iX19BR19BRERfU0VMRUNUSU9OX1RPX0ZJTFRFUl9fIjtjbGFzcyBse2NvbnN0cnVjdG9yKGUsdCxpLHMpe3RoaXMudmFsdWVGb3JtYXR0ZXJTZXJ2aWNlPWUsdGhpcy52YWx1ZUZvcm1hdHRlcj10LHRoaXMuZm9ybWF0dGVyPWksdGhpcy5jb2x1bW49cyx0aGlzLmRpc3BsYXllZEtleXM9W119dXBkYXRlRGlzcGxheWVkVmFsdWVzVG9BbGxBdmFpbGFibGUoZSx0LGkpe3RoaXMuZGlzcGxheWVkS2V5cz1BcnJheS5mcm9tKGkpfXVwZGF0ZURpc3BsYXllZFZhbHVlc1RvTWF0Y2hNaW5pRmlsdGVyKGUsdCxpLHMscil7dGhpcy5kaXNwbGF5ZWRLZXlzPVtdO2ZvcihsZXQgdCBvZiBpKWlmKG51bGw9PXQpciYmdGhpcy5kaXNwbGF5ZWRLZXlzLnB1c2godCk7ZWxzZXtjb25zdCBpPWUodCkscj10aGlzLnZhbHVlRm9ybWF0dGVyU2VydmljZS5mb3JtYXRWYWx1ZSh0aGlzLmNvbHVtbixudWxsLGksdGhpcy52YWx1ZUZvcm1hdHRlciwhMSk7cyh0aGlzLmZvcm1hdHRlcihyKSkmJnRoaXMuZGlzcGxheWVkS2V5cy5wdXNoKHQpfX1nZXREaXNwbGF5ZWRWYWx1ZUNvdW50KCl7cmV0dXJuIHRoaXMuZGlzcGxheWVkS2V5cy5sZW5ndGh9Z2V0RGlzcGxheWVkSXRlbShlKXtyZXR1cm4gdGhpcy5kaXNwbGF5ZWRLZXlzW2VdfWdldFNlbGVjdEFsbEl0ZW0oKXtyZXR1cm4gYS5TRUxFQ1RfQUxMfWdldEFkZFNlbGVjdGlvblRvRmlsdGVySXRlbSgpe3JldHVybiBhLkFERF9TRUxFQ1RJT05fVE9fRklMVEVSfWdldERpc3BsYXllZEtleXMoKXtyZXR1cm4gdGhpcy5kaXNwbGF5ZWRLZXlzfWZvckVhY2hEaXNwbGF5ZWRLZXkoZSl7dGhpcy5kaXNwbGF5ZWRLZXlzLmZvckVhY2goZSl9c29tZURpc3BsYXllZEtleShlKXtyZXR1cm4gdGhpcy5kaXNwbGF5ZWRLZXlzLnNvbWUoZSl9aGFzR3JvdXBzKCl7cmV0dXJuITF9cmVmcmVzaCgpe319Y2xhc3MgZHtjb25zdHJ1Y3RvcihlLHQsaSxzKXt0aGlzLmZvcm1hdHRlcj1lLHRoaXMudHJlZUxpc3RQYXRoR2V0dGVyPXQsdGhpcy50cmVlTGlzdEZvcm1hdHRlcj1pLHRoaXMudHJlZURhdGFPckdyb3VwaW5nPXMsdGhpcy5hbGxEaXNwbGF5ZWRJdGVtc1RyZWU9W10sdGhpcy5hY3RpdmVEaXNwbGF5ZWRJdGVtc0ZsYXQ9W10sdGhpcy5zZWxlY3RBbGxJdGVtPXtkZXB0aDowLGZpbHRlclBhc3NlczohMCxhdmFpbGFibGU6ITAsdHJlZUtleTphLlNFTEVDVF9BTEwsY2hpbGRyZW46dGhpcy5hbGxEaXNwbGF5ZWRJdGVtc1RyZWUsZXhwYW5kZWQ6ITAsa2V5OmEuU0VMRUNUX0FMTCxwYXJlbnRUcmVlS2V5czpbXX0sdGhpcy5hZGRTZWxlY3Rpb25Ub0ZpbHRlckl0ZW09e2RlcHRoOjAsZmlsdGVyUGFzc2VzOiEwLGF2YWlsYWJsZTohMCx0cmVlS2V5OmEuQUREX1NFTEVDVElPTl9UT19GSUxURVIsZXhwYW5kZWQ6ITAsa2V5OmEuQUREX1NFTEVDVElPTl9UT19GSUxURVIscGFyZW50VHJlZUtleXM6W119fXVwZGF0ZURpc3BsYXllZFZhbHVlc1RvQWxsQXZhaWxhYmxlKGUsdCxpLHMpeyJyZWxvYWQiPT09cz90aGlzLmdlbmVyYXRlSXRlbVRyZWUoZSx0LGkpOiJvdGhlckZpbHRlciI9PT1zPyh0aGlzLnVwZGF0ZUF2YWlsYWJsZShpKSx0aGlzLnVwZGF0ZUV4cGFuZEFsbCgpKToibWluaUZpbHRlciI9PT1zJiYodGhpcy5yZXNldEZpbHRlcigpLHRoaXMudXBkYXRlRXhwYW5kQWxsKCkpLHRoaXMuZmxhdHRlbkl0ZW1zKCl9dXBkYXRlRGlzcGxheWVkVmFsdWVzVG9NYXRjaE1pbmlGaWx0ZXIoZSx0LGkscyxyLG8peyJyZWxvYWQiPT09bz90aGlzLmdlbmVyYXRlSXRlbVRyZWUoZSx0LGkpOiJvdGhlckZpbHRlciI9PT1vJiZ0aGlzLnVwZGF0ZUF2YWlsYWJsZShpKSx0aGlzLnVwZGF0ZUZpbHRlcihzLHIpLHRoaXMudXBkYXRlRXhwYW5kQWxsKCksdGhpcy5mbGF0dGVuSXRlbXMoKX1nZW5lcmF0ZUl0ZW1UcmVlKGUsdCxpKXt2YXIgczt0aGlzLmFsbERpc3BsYXllZEl0ZW1zVHJlZT1bXSx0aGlzLmdyb3Vwc0V4aXN0PSExO2NvbnN0IHI9dGhpcy5nZXRUcmVlTGlzdFBhdGhHZXR0ZXIoZSxpKTtmb3IobGV0IG8gb2YgdCl7Y29uc3QgdD1udWxsIT09KHM9cihlKG8pKSkmJnZvaWQgMCE9PXM/czpbbnVsbF07dC5sZW5ndGg+MSYmKHRoaXMuZ3JvdXBzRXhpc3Q9ITApO2NvbnN0IG49aS5oYXMobyk7bGV0IGEsbD10aGlzLmFsbERpc3BsYXllZEl0ZW1zVHJlZSxkPVtdO3QuZm9yRWFjaCgoZSxpKT0+e2x8fChsPVtdLGEuY2hpbGRyZW49bCksYT1sLmZpbmQodD0+e3ZhciBpO3JldHVybihudWxsPT09KGk9dC50cmVlS2V5KXx8dm9pZCAwPT09aT92b2lkIDA6aS50b1VwcGVyQ2FzZSgpKT09PShudWxsPT1lP3ZvaWQgMDplLnRvVXBwZXJDYXNlKCkpfSksYXx8KGE9e3RyZWVLZXk6ZSxkZXB0aDppLGZpbHRlclBhc3NlczohMCxleHBhbmRlZDohMSxhdmFpbGFibGU6bixwYXJlbnRUcmVlS2V5czpkfSxpPT09dC5sZW5ndGgtMSYmKGEua2V5PW8pLGwucHVzaChhKSksbD1hLmNoaWxkcmVuLGQ9Wy4uLmQsZV19KX10aGlzLnVwZGF0ZUF2YWlsYWJsZShpKSx0aGlzLnNlbGVjdEFsbEl0ZW0uY2hpbGRyZW49dGhpcy5hbGxEaXNwbGF5ZWRJdGVtc1RyZWUsdGhpcy5zZWxlY3RBbGxJdGVtLmV4cGFuZGVkPSExfWdldFRyZWVMaXN0UGF0aEdldHRlcihlLHQpe2lmKHRoaXMudHJlZUxpc3RQYXRoR2V0dGVyKXJldHVybiB0aGlzLnRyZWVMaXN0UGF0aEdldHRlcjtpZih0aGlzLnRyZWVEYXRhT3JHcm91cGluZylyZXR1cm4gZT0+ZTtsZXQgaT0hMTtmb3IoY29uc3QgcyBvZiB0KXtjb25zdCB0PWUocyk7aWYodCBpbnN0YW5jZW9mIERhdGUpe2k9ITA7YnJlYWt9aWYobnVsbCE9dClicmVha31yZXR1cm4gaT9kLkRBVEVfVFJFRV9MSVNUX1BBVEhfR0VUVEVSOihyLl8ud2Fybk9uY2UoInByb3BlcnR5IHRyZWVMaXN0PXRydWUgZm9yIFNldCBGaWx0ZXIgcGFyYW1zLCBidXQgeW91IGRpZCBub3QgcHJvdmlkZSBhIHRyZWVMaXN0UGF0aEdldHRlciBvciB2YWx1ZXMgb2YgdHlwZSBEYXRlLiIpLGU9PltTdHJpbmcoZSldKX1mbGF0dGVuSXRlbXMoKXt0aGlzLmFjdGl2ZURpc3BsYXllZEl0ZW1zRmxhdD1bXTtjb25zdCBlPXQ9Pnt0LmZvckVhY2godD0+e3QuZmlsdGVyUGFzc2VzJiZ0LmF2YWlsYWJsZSYmKHRoaXMuYWN0aXZlRGlzcGxheWVkSXRlbXNGbGF0LnB1c2godCksdC5jaGlsZHJlbiYmdC5leHBhbmRlZCYmZSh0LmNoaWxkcmVuKSl9KX07ZSh0aGlzLmFsbERpc3BsYXllZEl0ZW1zVHJlZSl9cmVzZXRGaWx0ZXIoKXtjb25zdCBlPXQ9Pnt0LmNoaWxkcmVuJiZ0LmNoaWxkcmVuLmZvckVhY2godD0+e2UodCl9KSx0LmZpbHRlclBhc3Nlcz0hMH07dGhpcy5hbGxEaXNwbGF5ZWRJdGVtc1RyZWUuZm9yRWFjaCh0PT5lKHQpKX11cGRhdGVGaWx0ZXIoZSx0KXtjb25zdCBpPWk9PiEhaS5hdmFpbGFibGUmJihudWxsPT1pLnRyZWVLZXk/dDplKHRoaXMuZm9ybWF0dGVyKHRoaXMudHJlZUxpc3RGb3JtYXR0ZXI/dGhpcy50cmVlTGlzdEZvcm1hdHRlcihpLnRyZWVLZXksaS5kZXB0aCxpLnBhcmVudFRyZWVLZXlzKTppLnRyZWVLZXkpKSk7dGhpcy5hbGxEaXNwbGF5ZWRJdGVtc1RyZWUuZm9yRWFjaChlPT50aGlzLnJlY3Vyc2l2ZUl0ZW1DaGVjayhlLCExLGksImZpbHRlclBhc3NlcyIpKX1nZXREaXNwbGF5ZWRWYWx1ZUNvdW50KCl7cmV0dXJuIHRoaXMuYWN0aXZlRGlzcGxheWVkSXRlbXNGbGF0Lmxlbmd0aH1nZXREaXNwbGF5ZWRJdGVtKGUpe3JldHVybiB0aGlzLmFjdGl2ZURpc3BsYXllZEl0ZW1zRmxhdFtlXX1nZXRTZWxlY3RBbGxJdGVtKCl7cmV0dXJuIHRoaXMuc2VsZWN0QWxsSXRlbX1nZXRBZGRTZWxlY3Rpb25Ub0ZpbHRlckl0ZW0oKXtyZXR1cm4gdGhpcy5hZGRTZWxlY3Rpb25Ub0ZpbHRlckl0ZW19Z2V0RGlzcGxheWVkS2V5cygpe2NvbnN0IGU9W107cmV0dXJuIHRoaXMuZm9yRWFjaERpc3BsYXllZEtleSh0PT5lLnB1c2godCkpLGV9Zm9yRWFjaERpc3BsYXllZEtleShlKXtjb25zdCB0PShpLHMpPT57aS5jaGlsZHJlbj9pLmV4cGFuZGVkJiZzfHxpLmNoaWxkcmVuLmZvckVhY2goZT0+e2UuZmlsdGVyUGFzc2VzJiZ0KGUsITEpfSk6ZShpLmtleSl9O3RoaXMuYWN0aXZlRGlzcGxheWVkSXRlbXNGbGF0LmZvckVhY2goZT0+dChlLCEwKSl9c29tZURpc3BsYXllZEtleShlKXtjb25zdCB0PShpLHMpPT5pLmNoaWxkcmVuPyghaS5leHBhbmRlZHx8IXMpJiZpLmNoaWxkcmVuLnNvbWUoZT0+ISFlLmZpbHRlclBhc3NlcyYmdChlLCExKSk6ZShpLmtleSk7cmV0dXJuIHRoaXMuYWN0aXZlRGlzcGxheWVkSXRlbXNGbGF0LnNvbWUoZT0+dChlLCEwKSl9aGFzR3JvdXBzKCl7cmV0dXJuIHRoaXMuZ3JvdXBzRXhpc3R9cmVmcmVzaCgpe3RoaXMudXBkYXRlRXhwYW5kQWxsKCksdGhpcy5mbGF0dGVuSXRlbXMoKX11cGRhdGVFeHBhbmRBbGwoKXtjb25zdCBlPSh0LGkscyk9Pntmb3IoY29uc3QgciBvZiB0KXtpZighci5maWx0ZXJQYXNzZXN8fCFyLmF2YWlsYWJsZXx8IXIuY2hpbGRyZW4pY29udGludWU7aWYoaT1pfHwhIXIuZXhwYW5kZWQscz1zfHwhci5leHBhbmRlZCxpJiZzKXJldHVybjtjb25zdCB0PWUoci5jaGlsZHJlbixpLHMpO2lmKHZvaWQgMD09PXQpcmV0dXJuO3Q/aT0hMDpzPSEwfXJldHVybiBpJiZzP3ZvaWQgMDppfSx0PXRoaXMuZ2V0U2VsZWN0QWxsSXRlbSgpO3QuZXhwYW5kZWQ9ZSh0LmNoaWxkcmVuLCExLCExKX1yZWN1cnNpdmVJdGVtQ2hlY2soZSx0LGkscyl7bGV0IHI9ITE7ZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5mb3JFYWNoKG89Pntjb25zdCBuPXRoaXMucmVjdXJzaXZlSXRlbUNoZWNrKG8sdHx8aShlKSxpLHMpO3I9cnx8bn0pO2NvbnN0IG89dHx8cnx8aShlKTtyZXR1cm4gZVtzXT1vLG99dXBkYXRlQXZhaWxhYmxlKGUpe2NvbnN0IHQ9dD0+ZS5oYXModC5rZXkpO3RoaXMuYWxsRGlzcGxheWVkSXRlbXNUcmVlLmZvckVhY2goZT0+dGhpcy5yZWN1cnNpdmVJdGVtQ2hlY2soZSwhMSx0LCJhdmFpbGFibGUiKSl9fWQuREFURV9UUkVFX0xJU1RfUEFUSF9HRVRURVI9ZT0+ZT9bU3RyaW5nKGUuZ2V0RnVsbFllYXIoKSksU3RyaW5nKGUuZ2V0TW9udGgoKSsxKSxTdHJpbmcoZS5nZXREYXRlKCkpXTpudWxsO2NsYXNzIGN7Y29uc3RydWN0b3Ioe2Nhc2VGb3JtYXQ6ZX0pe3RoaXMuZmlsdGVyaW5nS2V5cz1udWxsLHRoaXMuZmlsdGVyaW5nS2V5c0Nhc2VGb3JtYXR0ZWQ9bnVsbCx0aGlzLmhhc05vQXBwbGllZEZpbHRlcmluZ0tleXM9ITEsdGhpcy5jYXNlRm9ybWF0PWV9YWxsRmlsdGVyaW5nS2V5cygpe3JldHVybiB0aGlzLmZpbHRlcmluZ0tleXN9YWxsRmlsdGVyaW5nS2V5c0Nhc2VGb3JtYXR0ZWQoKXtyZXR1cm4gdGhpcy5maWx0ZXJpbmdLZXlzQ2FzZUZvcm1hdHRlZH1ub0FwcGxpZWRGaWx0ZXJpbmdLZXlzKCl7cmV0dXJuIHRoaXMuaGFzTm9BcHBsaWVkRmlsdGVyaW5nS2V5c31zZXRGaWx0ZXJpbmdLZXlzKGUpe3RoaXMuZmlsdGVyaW5nS2V5cz1uZXcgU2V0KGUpLHRoaXMuaGFzTm9BcHBsaWVkRmlsdGVyaW5nS2V5cz0hdGhpcy5maWx0ZXJpbmdLZXlzfHwwPT09dGhpcy5maWx0ZXJpbmdLZXlzLnNpemUsdGhpcy5maWx0ZXJpbmdLZXlzQ2FzZUZvcm1hdHRlZD1uZXcgU2V0LHRoaXMuZmlsdGVyaW5nS2V5cy5mb3JFYWNoKGU9PnRoaXMuZmlsdGVyaW5nS2V5c0Nhc2VGb3JtYXR0ZWQuYWRkKHRoaXMuY2FzZUZvcm1hdChlKSkpfWFkZEZpbHRlcmluZ0tleShlKXtudWxsPT10aGlzLmZpbHRlcmluZ0tleXMmJih0aGlzLmZpbHRlcmluZ0tleXM9bmV3IFNldCx0aGlzLmZpbHRlcmluZ0tleXNDYXNlRm9ybWF0dGVkPW5ldyBTZXQpLHRoaXMuZmlsdGVyaW5nS2V5cy5hZGQoZSksdGhpcy5maWx0ZXJpbmdLZXlzQ2FzZUZvcm1hdHRlZC5hZGQodGhpcy5jYXNlRm9ybWF0KGUpKSx0aGlzLmhhc05vQXBwbGllZEZpbHRlcmluZ0tleXMmJih0aGlzLmhhc05vQXBwbGllZEZpbHRlcmluZ0tleXM9ITEpfWhhc0Nhc2VGb3JtYXR0ZWRGaWx0ZXJpbmdLZXkoZSl7cmV0dXJuIHRoaXMuZmlsdGVyaW5nS2V5c0Nhc2VGb3JtYXR0ZWQuaGFzKHRoaXMuY2FzZUZvcm1hdChlKSl9aGFzRmlsdGVyaW5nS2V5KGUpe3JldHVybiB0aGlzLmZpbHRlcmluZ0tleXMuaGFzKGUpfXJlc2V0KCl7dGhpcy5maWx0ZXJpbmdLZXlzPW51bGwsdGhpcy5maWx0ZXJpbmdLZXlzQ2FzZUZvcm1hdHRlZD1udWxsLHRoaXMuaGFzTm9BcHBsaWVkRmlsdGVyaW5nS2V5cz0hMX19IWZ1bmN0aW9uKGUpe2VbZS5QUk9WSURFRF9MSVNUPTBdPSJQUk9WSURFRF9MSVNUIixlW2UuUFJPVklERURfQ0FMTEJBQ0s9MV09IlBST1ZJREVEX0NBTExCQUNLIixlW2UuVEFLRU5fRlJPTV9HUklEX1ZBTFVFUz0yXT0iVEFLRU5fRlJPTV9HUklEX1ZBTFVFUyJ9KHN8fChzPXt9KSk7Y2xhc3MgaHtjb25zdHJ1Y3RvcihlKXt2YXIgdDt0aGlzLmxvY2FsRXZlbnRTZXJ2aWNlPW5ldyByLkV2ZW50U2VydmljZSx0aGlzLm1pbmlGaWx0ZXJUZXh0PW51bGwsdGhpcy5hZGRDdXJyZW50U2VsZWN0aW9uVG9GaWx0ZXI9ITEsdGhpcy5wcm92aWRlZFZhbHVlcz1udWxsLHRoaXMuYWxsVmFsdWVzPW5ldyBNYXAsdGhpcy5hdmFpbGFibGVLZXlzPW5ldyBTZXQsdGhpcy5zZWxlY3RlZEtleXM9bmV3IFNldCx0aGlzLmluaXRpYWxpc2VkPSExO2NvbnN0e3VzaW5nQ29tcGxleE9iamVjdHM6aSxjb2x1bW5Nb2RlbDpvLHZhbHVlU2VydmljZTphLHRyZWVEYXRhVHJlZUxpc3Q6aCxncm91cGluZ1RyZWVMaXN0OnUsZmlsdGVyUGFyYW1zOnAsZ3JpZE9wdGlvbnNTZXJ2aWNlOmcsdmFsdWVGb3JtYXR0ZXJTZXJ2aWNlOm0sdmFsdWVGb3JtYXR0ZXI6ZixhZGRNYW5hZ2VkTGlzdGVuZXI6dn09ZSx7Y29sdW1uOkMsY29sRGVmOnksdGV4dEZvcm1hdHRlcjpTLGRvZXNSb3dQYXNzT3RoZXJGaWx0ZXI6dyxzdXBwcmVzc1NvcnRpbmc6Yixjb21wYXJhdG9yOkUscm93TW9kZWw6Uix2YWx1ZXM6eCxjYXNlU2Vuc2l0aXZlOlQsY29udmVydFZhbHVlc1RvU3RyaW5nczpELHRyZWVMaXN0Ok8sdHJlZUxpc3RQYXRoR2V0dGVyOkEsdHJlZUxpc3RGb3JtYXR0ZXI6UH09cDt0aGlzLmZpbHRlclBhcmFtcz1wLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlPWcsdGhpcy5zZXRJc0xvYWRpbmc9ZS5zZXRJc0xvYWRpbmcsdGhpcy50cmFuc2xhdGU9ZS50cmFuc2xhdGUsdGhpcy5jYXNlRm9ybWF0PWUuY2FzZUZvcm1hdCx0aGlzLmNyZWF0ZUtleT1lLmNyZWF0ZUtleSx0aGlzLnVzaW5nQ29tcGxleE9iamVjdHM9ISFlLnVzaW5nQ29tcGxleE9iamVjdHMsdGhpcy5mb3JtYXR0ZXI9U3x8ci5UZXh0RmlsdGVyLkRFRkFVTFRfRk9STUFUVEVSLHRoaXMuZG9lc1Jvd1Bhc3NPdGhlckZpbHRlcnM9dyx0aGlzLnN1cHByZXNzU29ydGluZz1ifHwhMSx0aGlzLmNvbnZlcnRWYWx1ZXNUb1N0cmluZ3M9ISFELHRoaXMuZmlsdGVyaW5nS2V5cz1uZXcgYyh7Y2FzZUZvcm1hdDp0aGlzLmNhc2VGb3JtYXR9KTtjb25zdCBNPW51bGwhPUU/RTp5LmNvbXBhcmF0b3IsTD0hIWh8fCEhdTt0aGlzLmNvbXBhcmVCeVZhbHVlPSEhKGkmJk18fEx8fE8mJiFBKSx0aGlzLmVudHJ5Q29tcGFyYXRvcj1MJiYhTT90aGlzLmNyZWF0ZVRyZWVEYXRhT3JHcm91cGluZ0NvbXBhcmF0b3IoKTohT3x8QXx8TT8oW2UsdF0sW2ksc10pPT5NKHQscyk6KFtlLHRdLFtpLHNdKT0+ci5fLmRlZmF1bHRDb21wYXJhdG9yKHQscyksdGhpcy5rZXlDb21wYXJhdG9yPW51bGwhPT0odD1NKSYmdm9pZCAwIT09dD90OnIuXy5kZWZhdWx0Q29tcGFyYXRvcix0aGlzLmNhc2VTZW5zaXRpdmU9ISFUO2NvbnN0IEY9Zy5nZXQoImdldERhdGFQYXRoIiksST1nLmdldCgiZ3JvdXBBbGxvd1VuYmFsYW5jZWQiKTsiY2xpZW50U2lkZSI9PT1SLmdldFR5cGUoKSYmKHRoaXMuY2xpZW50U2lkZVZhbHVlc0V4dHJhY3Rvcj1uZXcgbihSLHRoaXMuZmlsdGVyUGFyYW1zLHRoaXMuY3JlYXRlS2V5LHRoaXMuY2FzZUZvcm1hdCxvLGEsTCwhIWgsRixJLHYpKSxudWxsPT14P3RoaXMudmFsdWVzVHlwZT1zLlRBS0VOX0ZST01fR1JJRF9WQUxVRVM6KHRoaXMudmFsdWVzVHlwZT1BcnJheS5pc0FycmF5KHgpP3MuUFJPVklERURfTElTVDpzLlBST1ZJREVEX0NBTExCQUNLLHRoaXMucHJvdmlkZWRWYWx1ZXM9eCksdGhpcy5kaXNwbGF5VmFsdWVNb2RlbD1PP25ldyBkKHRoaXMuZm9ybWF0dGVyLEEsUCxofHx1KTpuZXcgbChtLGYsdGhpcy5mb3JtYXR0ZXIsQyksdGhpcy51cGRhdGVBbGxWYWx1ZXMoKS50aGVuKGU9PnRoaXMucmVzZXRTZWxlY3Rpb25TdGF0ZShlfHxbXSkpfWFkZEV2ZW50TGlzdGVuZXIoZSx0LGkpe3RoaXMubG9jYWxFdmVudFNlcnZpY2UuYWRkRXZlbnRMaXN0ZW5lcihlLHQsaSl9cmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQsaSl7dGhpcy5sb2NhbEV2ZW50U2VydmljZS5yZW1vdmVFdmVudExpc3RlbmVyKGUsdCxpKX11cGRhdGVPblBhcmFtc0NoYW5nZShlKXtyZXR1cm4gbmV3IHIuQWdQcm9taXNlKHQ9Pntjb25zdHt2YWx1ZXM6aSx0ZXh0Rm9ybWF0dGVyOm8sc3VwcHJlc3NTb3J0aW5nOm59PWUsYT10aGlzLnByb3ZpZGVkVmFsdWVzLGw9dGhpcy5zdXBwcmVzc1NvcnRpbmc7aWYodGhpcy5maWx0ZXJQYXJhbXM9ZSx0aGlzLmZvcm1hdHRlcj1vfHxyLlRleHRGaWx0ZXIuREVGQVVMVF9GT1JNQVRURVIsdGhpcy5zdXBwcmVzc1NvcnRpbmc9bnx8ITEsdGhpcy5wcm92aWRlZFZhbHVlcz1udWxsIT1pP2k6bnVsbCx0aGlzLnByb3ZpZGVkVmFsdWVzIT09YXx8dGhpcy5zdXBwcmVzc1NvcnRpbmchPT1sKXtpZihpJiYwIT09aS5sZW5ndGgpe2NvbnN0IGU9QXJyYXkuaXNBcnJheShpKSYmaS5sZW5ndGg+MCYmImZ1bmN0aW9uIj09dHlwZW9mIGlbMF07dGhpcy52YWx1ZXNUeXBlPWU/cy5QUk9WSURFRF9DQUxMQkFDSzpzLlBST1ZJREVEX0xJU1R9ZWxzZSB0aGlzLnZhbHVlc1R5cGU9cy5UQUtFTl9GUk9NX0dSSURfVkFMVUVTLHRoaXMucHJvdmlkZWRWYWx1ZXM9bnVsbDtjb25zdCBlPXRoaXMuZ2V0TW9kZWwoKTt0aGlzLnVwZGF0ZUFsbFZhbHVlcygpLnRoZW4oaT0+e3RoaXMuc2V0TW9kZWwoZSkudGhlbigoKT0+dCgpKX0pfWVsc2UgdCgpfSl9cmVmcmVzaFZhbHVlcygpe3JldHVybiBuZXcgci5BZ1Byb21pc2UoZT0+e3RoaXMuYWxsVmFsdWVzUHJvbWlzZS50aGVuKCgpPT57Y29uc3QgdD10aGlzLmdldE1vZGVsKCk7dGhpcy51cGRhdGVBbGxWYWx1ZXMoKSx0aGlzLnNldE1vZGVsKHQpLnRoZW4oKCk9PmUoKSl9KX0pfW92ZXJyaWRlVmFsdWVzKGUpe3JldHVybiBuZXcgci5BZ1Byb21pc2UodD0+e3RoaXMuYWxsVmFsdWVzUHJvbWlzZS50aGVuKCgpPT57dGhpcy52YWx1ZXNUeXBlPXMuUFJPVklERURfTElTVCx0aGlzLnByb3ZpZGVkVmFsdWVzPWUsdGhpcy5yZWZyZXNoVmFsdWVzKCkudGhlbigoKT0+dCgpKX0pfSl9cmVmcmVzaEFmdGVyQW55RmlsdGVyQ2hhbmdlZCgpe3JldHVybiB0aGlzLnNob3dBdmFpbGFibGVPbmx5KCk/dGhpcy5hbGxWYWx1ZXNQcm9taXNlLnRoZW4oZT0+KHRoaXMudXBkYXRlQXZhaWxhYmxlS2V5cyhudWxsIT1lP2U6W10sIm90aGVyRmlsdGVyIiksITApKTpyLkFnUHJvbWlzZS5yZXNvbHZlKCExKX1pc0luaXRpYWxpc2VkKCl7cmV0dXJuIHRoaXMuaW5pdGlhbGlzZWR9dXBkYXRlQWxsVmFsdWVzKCl7cmV0dXJuIHRoaXMuYWxsVmFsdWVzUHJvbWlzZT1uZXcgci5BZ1Byb21pc2UoZT0+e3N3aXRjaCh0aGlzLnZhbHVlc1R5cGUpe2Nhc2Ugcy5UQUtFTl9GUk9NX0dSSURfVkFMVUVTOnRoaXMuZ2V0VmFsdWVzRnJvbVJvd3NBc3luYyghMSkudGhlbih0PT5lKHRoaXMucHJvY2Vzc0FsbFZhbHVlcyh0KSkpO2JyZWFrO2Nhc2Ugcy5QUk9WSURFRF9MSVNUOmUodGhpcy5wcm9jZXNzQWxsVmFsdWVzKHRoaXMudW5pcXVlVmFsdWVzKHRoaXMudmFsaWRhdGVQcm92aWRlZFZhbHVlcyh0aGlzLnByb3ZpZGVkVmFsdWVzKSkpKTticmVhaztjYXNlIHMuUFJPVklERURfQ0FMTEJBQ0s6e3RoaXMuc2V0SXNMb2FkaW5nKCEwKTtjb25zdCB0PXRoaXMucHJvdmlkZWRWYWx1ZXMse2NvbHVtbjppLGNvbERlZjpzfT10aGlzLmZpbHRlclBhcmFtcyxyPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3N1Y2Nlc3M6dD0+e3RoaXMuc2V0SXNMb2FkaW5nKCExKSxlKHRoaXMucHJvY2Vzc0FsbFZhbHVlcyh0aGlzLnVuaXF1ZVZhbHVlcyh0aGlzLnZhbGlkYXRlUHJvdmlkZWRWYWx1ZXModCkpKSl9LGNvbERlZjpzLGNvbHVtbjppfSk7d2luZG93LnNldFRpbWVvdXQoKCk9PnQociksMCk7YnJlYWt9ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVucmVjb2duaXNlZCB2YWx1ZXNUeXBlIil9fSksdGhpcy5hbGxWYWx1ZXNQcm9taXNlLnRoZW4oZT0+dGhpcy51cGRhdGVBdmFpbGFibGVLZXlzKGV8fFtdLCJyZWxvYWQiKSkudGhlbigoKT0+dGhpcy5pbml0aWFsaXNlZD0hMCksdGhpcy5hbGxWYWx1ZXNQcm9taXNlfXByb2Nlc3NBbGxWYWx1ZXMoZSl7Y29uc3QgdD10aGlzLnNvcnRLZXlzKGUpO3JldHVybiB0aGlzLmFsbFZhbHVlcz1udWxsIT1lP2U6bmV3IE1hcCx0fXZhbGlkYXRlUHJvdmlkZWRWYWx1ZXMoZSl7aWYodGhpcy51c2luZ0NvbXBsZXhPYmplY3RzJiYobnVsbD09ZT92b2lkIDA6ZS5sZW5ndGgpKXtjb25zdCB0PWVbMF07aWYodCYmIm9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdCl7bnVsbD09dGhpcy5jcmVhdGVLZXkodCk/ci5fLndhcm5PbmNlKCJTZXQgRmlsdGVyIEtleSBDcmVhdG9yIGlzIHJldHVybmluZyBudWxsIGZvciBwcm92aWRlZCB2YWx1ZXMgYW5kIHByb3ZpZGVkIHZhbHVlcyBhcmUgcHJpbWl0aXZlcy4gUGxlYXNlIHByb3ZpZGUgY29tcGxleCBvYmplY3RzIG9yIHNldCBjb252ZXJ0VmFsdWVzVG9TdHJpbmdzPXRydWUgaW4gdGhlIGZpbHRlclBhcmFtcy4gU2VlIGh0dHBzOi8vd3d3LmFnLWdyaWQuY29tL2phdmFzY3JpcHQtZGF0YS1ncmlkL2ZpbHRlci1zZXQtZmlsdGVyLWxpc3QvI2ZpbHRlci12YWx1ZS10eXBlcyIpOnIuXy53YXJuT25jZSgiU2V0IEZpbHRlciBoYXMgYSBLZXkgQ3JlYXRvciwgYnV0IHByb3ZpZGVkIHZhbHVlcyBhcmUgcHJpbWl0aXZlcy4gRGlkIHlvdSBtZWFuIHRvIHByb3ZpZGUgY29tcGxleCBvYmplY3RzIG9yIGVuYWJsZSBjb252ZXJ0VmFsdWVzVG9TdHJpbmdzPyIpfX1yZXR1cm4gZX1zZXRWYWx1ZXNUeXBlKGUpe3RoaXMudmFsdWVzVHlwZT1lfWdldFZhbHVlc1R5cGUoKXtyZXR1cm4gdGhpcy52YWx1ZXNUeXBlfWlzS2V5QXZhaWxhYmxlKGUpe3JldHVybiB0aGlzLmF2YWlsYWJsZUtleXMuaGFzKGUpfXNob3dBdmFpbGFibGVPbmx5KCl7cmV0dXJuIHRoaXMudmFsdWVzVHlwZT09PXMuVEFLRU5fRlJPTV9HUklEX1ZBTFVFU311cGRhdGVBdmFpbGFibGVLZXlzKGUsdCl7Y29uc3QgaT10aGlzLnNob3dBdmFpbGFibGVPbmx5KCk/dGhpcy5zb3J0S2V5cyh0aGlzLmdldFZhbHVlc0Zyb21Sb3dzKCEwKSk6ZTt0aGlzLmF2YWlsYWJsZUtleXM9bmV3IFNldChpKSx0aGlzLmxvY2FsRXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6aC5FVkVOVF9BVkFJTEFCTEVfVkFMVUVTX0NIQU5HRUR9KSx0aGlzLnVwZGF0ZURpc3BsYXllZFZhbHVlcyh0LGUpfXNvcnRLZXlzKGUpe2NvbnN0IHQ9bnVsbCE9ZT9lOm5ldyBNYXA7aWYodGhpcy5zdXBwcmVzc1NvcnRpbmcpcmV0dXJuIEFycmF5LmZyb20odC5rZXlzKCkpO2xldCBpO3JldHVybiBpPXRoaXMuY29tcGFyZUJ5VmFsdWU/QXJyYXkuZnJvbSh0LmVudHJpZXMoKSkuc29ydCh0aGlzLmVudHJ5Q29tcGFyYXRvcikubWFwKChbZV0pPT5lKTpBcnJheS5mcm9tKHQua2V5cygpKS5zb3J0KHRoaXMua2V5Q29tcGFyYXRvciksdGhpcy5maWx0ZXJQYXJhbXMuZXhjZWxNb2RlJiZ0LmhhcyhudWxsKSYmKGk9aS5maWx0ZXIoZT0+bnVsbCE9ZSksaS5wdXNoKG51bGwpKSxpfWdldFBhcmFtc0ZvclZhbHVlc0Zyb21Sb3dzKGU9ITEpe2lmKCF0aGlzLmNsaWVudFNpZGVWYWx1ZXNFeHRyYWN0b3IpcmV0dXJuIHIuXy5kb09uY2UoKCk9Pntjb25zb2xlLmVycm9yKCJBRyBHcmlkOiBTZXQgRmlsdGVyIGNhbm5vdCBpbml0aWFsaXNlIGJlY2F1c2UgeW91IGFyZSB1c2luZyBhIHJvdyBtb2RlbCB0aGF0IGRvZXMgbm90IGNvbnRhaW4gYWxsIHJvd3MgaW4gdGhlIGJyb3dzZXIuIEVpdGhlciB1c2UgYSBkaWZmZXJlbnQgZmlsdGVyIHR5cGUsIG9yIGNvbmZpZ3VyZSBTZXQgRmlsdGVyIHN1Y2ggdGhhdCB5b3UgcHJvdmlkZSBpdCB3aXRoIHZhbHVlcyIpfSwic2V0RmlsdGVyVmFsdWVOb3RDU1JNIiksbnVsbDtyZXR1cm57cHJlZGljYXRlOnQ9PiFlfHx0aGlzLmRvZXNSb3dQYXNzT3RoZXJGaWx0ZXJzKHQpLGV4aXN0aW5nVmFsdWVzOmUmJiF0aGlzLmNhc2VTZW5zaXRpdmU/dGhpcy5hbGxWYWx1ZXM6dm9pZCAwfX1nZXRWYWx1ZXNGcm9tUm93cyhlPSExKXtjb25zdCB0PXRoaXMuZ2V0UGFyYW1zRm9yVmFsdWVzRnJvbVJvd3MoZSk7cmV0dXJuIHQ/dGhpcy5jbGllbnRTaWRlVmFsdWVzRXh0cmFjdG9yLmV4dHJhY3RVbmlxdWVWYWx1ZXModC5wcmVkaWNhdGUsdC5leGlzdGluZ1ZhbHVlcyk6bnVsbH1nZXRWYWx1ZXNGcm9tUm93c0FzeW5jKGU9ITEpe2NvbnN0IHQ9dGhpcy5nZXRQYXJhbXNGb3JWYWx1ZXNGcm9tUm93cyhlKTtyZXR1cm4gdD90aGlzLmNsaWVudFNpZGVWYWx1ZXNFeHRyYWN0b3IuZXh0cmFjdFVuaXF1ZVZhbHVlc0FzeW5jKHQucHJlZGljYXRlLHQuZXhpc3RpbmdWYWx1ZXMpOnIuQWdQcm9taXNlLnJlc29sdmUobnVsbCl9c2V0TWluaUZpbHRlcihlKXtyZXR1cm4gZT1yLl8ubWFrZU51bGwoZSksdGhpcy5taW5pRmlsdGVyVGV4dCE9PWUmJihudWxsPT09ZSYmdGhpcy5zZXRBZGRDdXJyZW50U2VsZWN0aW9uVG9GaWx0ZXIoITEpLHRoaXMubWluaUZpbHRlclRleHQ9ZSx0aGlzLnVwZGF0ZURpc3BsYXllZFZhbHVlcygibWluaUZpbHRlciIpLCEwKX1nZXRNaW5pRmlsdGVyKCl7cmV0dXJuIHRoaXMubWluaUZpbHRlclRleHR9dXBkYXRlRGlzcGxheWVkVmFsdWVzKGUsdCl7aWYoImV4cGFuc2lvbiI9PT1lKXJldHVybiB2b2lkIHRoaXMuZGlzcGxheVZhbHVlTW9kZWwucmVmcmVzaCgpO2lmKG51bGw9PXRoaXMubWluaUZpbHRlclRleHQpcmV0dXJuIHZvaWQgdGhpcy5kaXNwbGF5VmFsdWVNb2RlbC51cGRhdGVEaXNwbGF5ZWRWYWx1ZXNUb0FsbEF2YWlsYWJsZShlPT50aGlzLmdldFZhbHVlKGUpLHQsdGhpcy5hdmFpbGFibGVLZXlzLGUpO2NvbnN0IGk9dGhpcy5jYXNlRm9ybWF0KHRoaXMuZm9ybWF0dGVyKHRoaXMubWluaUZpbHRlclRleHQpfHwiIikscz1lPT5udWxsIT1lJiZ0aGlzLmNhc2VGb3JtYXQoZSkuaW5kZXhPZihpKT49MCxyPSEhdGhpcy5maWx0ZXJQYXJhbXMuZXhjZWxNb2RlJiZzKHRoaXMudHJhbnNsYXRlKCJibGFua3MiKSk7dGhpcy5kaXNwbGF5VmFsdWVNb2RlbC51cGRhdGVEaXNwbGF5ZWRWYWx1ZXNUb01hdGNoTWluaUZpbHRlcihlPT50aGlzLmdldFZhbHVlKGUpLHQsdGhpcy5hdmFpbGFibGVLZXlzLHMscixlKX1nZXREaXNwbGF5ZWRWYWx1ZUNvdW50KCl7cmV0dXJuIHRoaXMuZGlzcGxheVZhbHVlTW9kZWwuZ2V0RGlzcGxheWVkVmFsdWVDb3VudCgpfWdldERpc3BsYXllZEl0ZW0oZSl7cmV0dXJuIHRoaXMuZGlzcGxheVZhbHVlTW9kZWwuZ2V0RGlzcGxheWVkSXRlbShlKX1nZXRTZWxlY3RBbGxJdGVtKCl7cmV0dXJuIHRoaXMuZGlzcGxheVZhbHVlTW9kZWwuZ2V0U2VsZWN0QWxsSXRlbSgpfWdldEFkZFNlbGVjdGlvblRvRmlsdGVySXRlbSgpe3JldHVybiB0aGlzLmRpc3BsYXlWYWx1ZU1vZGVsLmdldEFkZFNlbGVjdGlvblRvRmlsdGVySXRlbSgpfWhhc1NlbGVjdGlvbnMoKXtyZXR1cm4gdGhpcy5maWx0ZXJQYXJhbXMuZGVmYXVsdFRvTm90aGluZ1NlbGVjdGVkP3RoaXMuc2VsZWN0ZWRLZXlzLnNpemU+MDp0aGlzLmFsbFZhbHVlcy5zaXplIT09dGhpcy5zZWxlY3RlZEtleXMuc2l6ZX1nZXRLZXlzKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5hbGxWYWx1ZXMua2V5cygpKX1nZXRWYWx1ZXMoKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFsbFZhbHVlcy52YWx1ZXMoKSl9Z2V0VmFsdWUoZSl7cmV0dXJuIHRoaXMuYWxsVmFsdWVzLmdldChlKX1zZXRBZGRDdXJyZW50U2VsZWN0aW9uVG9GaWx0ZXIoZSl7dGhpcy5hZGRDdXJyZW50U2VsZWN0aW9uVG9GaWx0ZXI9ZX1pc0luV2luZG93c0V4Y2VsTW9kZSgpe3JldHVybiJ3aW5kb3dzIj09PXRoaXMuZmlsdGVyUGFyYW1zLmV4Y2VsTW9kZX1pc0FkZEN1cnJlbnRTZWxlY3Rpb25Ub0ZpbHRlckNoZWNrZWQoKXtyZXR1cm4gdGhpcy5pc0luV2luZG93c0V4Y2VsTW9kZSgpJiZ0aGlzLmFkZEN1cnJlbnRTZWxlY3Rpb25Ub0ZpbHRlcn1zaG93QWRkQ3VycmVudFNlbGVjdGlvblRvRmlsdGVyKCl7cmV0dXJuIHRoaXMuaXNJbldpbmRvd3NFeGNlbE1vZGUoKSYmci5fLmV4aXN0cyh0aGlzLm1pbmlGaWx0ZXJUZXh0KSYmdGhpcy5taW5pRmlsdGVyVGV4dC5sZW5ndGg+MH1zZWxlY3RBbGxNYXRjaGluZ01pbmlGaWx0ZXIoZT0hMSl7bnVsbD09dGhpcy5taW5pRmlsdGVyVGV4dD90aGlzLnNlbGVjdGVkS2V5cz1uZXcgU2V0KHRoaXMuYWxsVmFsdWVzLmtleXMoKSk6KGUmJnRoaXMuc2VsZWN0ZWRLZXlzLmNsZWFyKCksdGhpcy5kaXNwbGF5VmFsdWVNb2RlbC5mb3JFYWNoRGlzcGxheWVkS2V5KGU9PnRoaXMuc2VsZWN0ZWRLZXlzLmFkZChlKSkpfWRlc2VsZWN0QWxsTWF0Y2hpbmdNaW5pRmlsdGVyKCl7bnVsbD09dGhpcy5taW5pRmlsdGVyVGV4dD90aGlzLnNlbGVjdGVkS2V5cy5jbGVhcigpOnRoaXMuZGlzcGxheVZhbHVlTW9kZWwuZm9yRWFjaERpc3BsYXllZEtleShlPT50aGlzLnNlbGVjdGVkS2V5cy5kZWxldGUoZSkpfXNlbGVjdEtleShlKXt0aGlzLnNlbGVjdGVkS2V5cy5hZGQoZSl9ZGVzZWxlY3RLZXkoZSl7dGhpcy5maWx0ZXJQYXJhbXMuZXhjZWxNb2RlJiZ0aGlzLmlzRXZlcnl0aGluZ1Zpc2libGVTZWxlY3RlZCgpJiZ0aGlzLnJlc2V0U2VsZWN0aW9uU3RhdGUodGhpcy5kaXNwbGF5VmFsdWVNb2RlbC5nZXREaXNwbGF5ZWRLZXlzKCkpLHRoaXMuc2VsZWN0ZWRLZXlzLmRlbGV0ZShlKX1pc0tleVNlbGVjdGVkKGUpe3JldHVybiB0aGlzLnNlbGVjdGVkS2V5cy5oYXMoZSl9aXNFdmVyeXRoaW5nVmlzaWJsZVNlbGVjdGVkKCl7cmV0dXJuIXRoaXMuZGlzcGxheVZhbHVlTW9kZWwuc29tZURpc3BsYXllZEtleShlPT4hdGhpcy5pc0tleVNlbGVjdGVkKGUpKX1pc05vdGhpbmdWaXNpYmxlU2VsZWN0ZWQoKXtyZXR1cm4hdGhpcy5kaXNwbGF5VmFsdWVNb2RlbC5zb21lRGlzcGxheWVkS2V5KGU9PnRoaXMuaXNLZXlTZWxlY3RlZChlKSl9Z2V0TW9kZWwoKXtpZighdGhpcy5oYXNTZWxlY3Rpb25zKCkpcmV0dXJuIG51bGw7Y29uc3QgZT10aGlzLmlzQWRkQ3VycmVudFNlbGVjdGlvblRvRmlsdGVyQ2hlY2tlZCgpP3RoaXMuZmlsdGVyaW5nS2V5cy5hbGxGaWx0ZXJpbmdLZXlzKCk6bnVsbDtpZihlJiZlLnNpemU+MCl7aWYodGhpcy5zZWxlY3RlZEtleXMpe2NvbnN0IHQ9bmV3IFNldChbLi4uQXJyYXkuZnJvbShlKSwuLi5BcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRLZXlzKS5maWx0ZXIodD0+IWUuaGFzKHQpKV0pO3JldHVybiBBcnJheS5mcm9tKHQpfXJldHVybiBBcnJheS5mcm9tKGUpfXJldHVybiBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRLZXlzKX1zZXRNb2RlbChlKXtyZXR1cm4gdGhpcy5hbGxWYWx1ZXNQcm9taXNlLnRoZW4odD0+e2lmKG51bGw9PWUpdGhpcy5yZXNldFNlbGVjdGlvblN0YXRlKG51bGwhPXQ/dDpbXSk7ZWxzZXt0aGlzLnNlbGVjdGVkS2V5cy5jbGVhcigpO2NvbnN0IHQ9bmV3IE1hcDt0aGlzLmFsbFZhbHVlcy5mb3JFYWNoKChlLGkpPT57dC5zZXQodGhpcy5jYXNlRm9ybWF0KGkpLGkpfSksZS5mb3JFYWNoKGU9Pntjb25zdCBpPXRoaXMuY2FzZUZvcm1hdChyLl8ubWFrZU51bGwoZSkpLHM9dC5nZXQoaSk7dm9pZCAwIT09cyYmdGhpcy5zZWxlY3RLZXkocyl9KX19KX11bmlxdWVWYWx1ZXMoZSl7Y29uc3QgdD1uZXcgTWFwLGk9bmV3IFNldDtyZXR1cm4obnVsbCE9ZT9lOltdKS5mb3JFYWNoKGU9Pntjb25zdCBzPXIuXy5tYWtlTnVsbChlKSxvPXRoaXMuY29udmVydEFuZEdldEtleShzKSxuPXRoaXMuY2FzZUZvcm1hdChvKTtpLmhhcyhuKXx8KGkuYWRkKG4pLHQuc2V0KG8scykpfSksdH1jb252ZXJ0QW5kR2V0S2V5KGUpe3JldHVybiB0aGlzLmNvbnZlcnRWYWx1ZXNUb1N0cmluZ3M/ZTp0aGlzLmNyZWF0ZUtleShlKX1yZXNldFNlbGVjdGlvblN0YXRlKGUpe3RoaXMuZmlsdGVyUGFyYW1zLmRlZmF1bHRUb05vdGhpbmdTZWxlY3RlZD90aGlzLnNlbGVjdGVkS2V5cy5jbGVhcigpOnRoaXMuc2VsZWN0ZWRLZXlzPW5ldyBTZXQoZSl9aGFzR3JvdXBzKCl7cmV0dXJuIHRoaXMuZGlzcGxheVZhbHVlTW9kZWwuaGFzR3JvdXBzKCl9Y3JlYXRlVHJlZURhdGFPckdyb3VwaW5nQ29tcGFyYXRvcigpe3JldHVybihbZSx0XSxbaSxzXSk9PntpZihudWxsPT10KXJldHVybiBudWxsPT1zPzA6LTE7aWYobnVsbD09cylyZXR1cm4gMTtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKyl7aWYoZT49cy5sZW5ndGgpcmV0dXJuIDE7Y29uc3QgaT1yLl8uZGVmYXVsdENvbXBhcmF0b3IodFtlXSxzW2VdKTtpZigwIT09aSlyZXR1cm4gaX1yZXR1cm4gMH19c2V0QXBwbGllZE1vZGVsS2V5cyhlKXt0aGlzLmZpbHRlcmluZ0tleXMuc2V0RmlsdGVyaW5nS2V5cyhlKX1hZGRUb0FwcGxpZWRNb2RlbEtleXMoZSl7dGhpcy5maWx0ZXJpbmdLZXlzLmFkZEZpbHRlcmluZ0tleShlKX1nZXRBcHBsaWVkTW9kZWxLZXlzKCl7cmV0dXJuIHRoaXMuZmlsdGVyaW5nS2V5cy5hbGxGaWx0ZXJpbmdLZXlzKCl9Z2V0Q2FzZUZvcm1hdHRlZEFwcGxpZWRNb2RlbEtleXMoKXtyZXR1cm4gdGhpcy5maWx0ZXJpbmdLZXlzLmFsbEZpbHRlcmluZ0tleXNDYXNlRm9ybWF0dGVkKCl9aGFzQXBwbGllZE1vZGVsS2V5KGUpe3JldHVybiB0aGlzLmZpbHRlcmluZ0tleXMuaGFzQ2FzZUZvcm1hdHRlZEZpbHRlcmluZ0tleShlKX1oYXNBbnlBcHBsaWVkTW9kZWxLZXkoKXtyZXR1cm4hdGhpcy5maWx0ZXJpbmdLZXlzLm5vQXBwbGllZEZpbHRlcmluZ0tleXMoKX19aC5FVkVOVF9BVkFJTEFCTEVfVkFMVUVTX0NIQU5HRUQ9ImF2YWlsYWJsZVZhbHVlc0NoYW5nZWQiO3ZhciB1PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIHAgZXh0ZW5kcyByLkNvbXBvbmVudHtjb25zdHJ1Y3RvcihlKXt2YXIgdDtzdXBlcihlLmlzR3JvdXA/cC5HUk9VUF9URU1QTEFURTpwLlRFTVBMQVRFKSx0aGlzLmZvY3VzV3JhcHBlcj1lLmZvY3VzV3JhcHBlcix0aGlzLnZhbHVlPWUudmFsdWUsdGhpcy5wYXJhbXM9ZS5wYXJhbXMsdGhpcy50cmFuc2xhdGU9ZS50cmFuc2xhdGUsdGhpcy52YWx1ZUZvcm1hdHRlcj1lLnZhbHVlRm9ybWF0dGVyLHRoaXMuaXRlbT1lLml0ZW0sdGhpcy5pc1NlbGVjdGVkPWUuaXNTZWxlY3RlZCx0aGlzLmlzVHJlZT1lLmlzVHJlZSx0aGlzLmRlcHRoPW51bGwhPT0odD1lLmRlcHRoKSYmdm9pZCAwIT09dD90OjAsdGhpcy5pc0dyb3VwPWUuaXNHcm91cCx0aGlzLmdyb3Vwc0V4aXN0PWUuZ3JvdXBzRXhpc3QsdGhpcy5pc0V4cGFuZGVkPWUuaXNFeHBhbmRlZCx0aGlzLmhhc0luZGV0ZXJtaW5hdGVFeHBhbmRTdGF0ZT1lLmhhc0luZGV0ZXJtaW5hdGVFeHBhbmRTdGF0ZX1pbml0KCl7dGhpcy5hZGREZXN0cm95RnVuYygoKT0+e3ZhciBlO3JldHVybiBudWxsPT09KGU9dGhpcy5kZXN0cm95Q2VsbFJlbmRlcmVyQ29tcG9uZW50KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jYWxsKHRoaXMpfSksdGhpcy5yZW5kZXIoKSx0aGlzLmVDaGVja2JveC5zZXRMYWJlbEVsbGlwc2lzKCEwKS5zZXRWYWx1ZSh0aGlzLmlzU2VsZWN0ZWQsITApLnNldERpc2FibGVkKCEhdGhpcy5wYXJhbXMucmVhZE9ubHkpLmdldElucHV0RWxlbWVudCgpLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCItMSIpLHRoaXMucmVmcmVzaFZhcmlhYmxlQXJpYUxhYmVscygpLHRoaXMuaXNUcmVlJiYodGhpcy5kZXB0aD4wJiZ0aGlzLmFkZENzc0NsYXNzKCJhZy1zZXQtZmlsdGVyLWluZGVudC0iK3RoaXMuZGVwdGgpLHRoaXMuaXNHcm91cD90aGlzLnNldHVwRXhwYW5zaW9uKCk6dGhpcy5ncm91cHNFeGlzdCYmdGhpcy5hZGRDc3NDbGFzcygiYWctc2V0LWZpbHRlci1hZGQtZ3JvdXAtaW5kZW50Iiksci5fLnNldEFyaWFMZXZlbCh0aGlzLmdldEFyaWFFbGVtZW50KCksdGhpcy5kZXB0aCsxKSksdGhpcy5yZWZyZXNoQXJpYUNoZWNrZWQoKSx0aGlzLnBhcmFtcy5yZWFkT25seXx8dGhpcy5lQ2hlY2tib3gub25WYWx1ZUNoYW5nZShlPT50aGlzLm9uQ2hlY2tib3hDaGFuZ2VkKCEhZSkpfWdldEZvY3VzYWJsZUVsZW1lbnQoKXtyZXR1cm4gdGhpcy5mb2N1c1dyYXBwZXJ9c2V0dXBFeHBhbnNpb24oKXt0aGlzLmVHcm91cENsb3NlZEljb24uYXBwZW5kQ2hpbGQoci5fLmNyZWF0ZUljb24oInNldEZpbHRlckdyb3VwQ2xvc2VkIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSksdGhpcy5lR3JvdXBPcGVuZWRJY29uLmFwcGVuZENoaWxkKHIuXy5jcmVhdGVJY29uKCJzZXRGaWx0ZXJHcm91cE9wZW4iLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVHcm91cENsb3NlZEljb24sImNsaWNrIix0aGlzLm9uRXhwYW5kT3JDb250cmFjdENsaWNrZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lR3JvdXBPcGVuZWRJY29uLCJjbGljayIsdGhpcy5vbkV4cGFuZE9yQ29udHJhY3RDbGlja2VkLmJpbmQodGhpcykpLHRoaXMuaGFzSW5kZXRlcm1pbmF0ZUV4cGFuZFN0YXRlJiYodGhpcy5lR3JvdXBJbmRldGVybWluYXRlSWNvbi5hcHBlbmRDaGlsZChyLl8uY3JlYXRlSWNvbigic2V0RmlsdGVyR3JvdXBJbmRldGVybWluYXRlIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lR3JvdXBJbmRldGVybWluYXRlSWNvbiwiY2xpY2siLHRoaXMub25FeHBhbmRPckNvbnRyYWN0Q2xpY2tlZC5iaW5kKHRoaXMpKSksdGhpcy5zZXRFeHBhbmRlZEljb25zKCksdGhpcy5yZWZyZXNoQXJpYUV4cGFuZGVkKCl9b25FeHBhbmRPckNvbnRyYWN0Q2xpY2tlZCgpe3RoaXMuc2V0RXhwYW5kZWQoIXRoaXMuaXNFeHBhbmRlZCl9c2V0RXhwYW5kZWQoZSx0KXtpZih0aGlzLmlzR3JvdXAmJmUhPT10aGlzLmlzRXhwYW5kZWQpe3RoaXMuaXNFeHBhbmRlZD1lO2NvbnN0IGk9e3R5cGU6cC5FVkVOVF9FWFBBTkRFRF9DSEFOR0VELGlzRXhwYW5kZWQ6ISFlLGl0ZW06dGhpcy5pdGVtfTt0fHx0aGlzLmRpc3BhdGNoRXZlbnQoaSksdGhpcy5zZXRFeHBhbmRlZEljb25zKCksdGhpcy5yZWZyZXNoQXJpYUV4cGFuZGVkKCl9fXNldEV4cGFuZGVkSWNvbnMoKXtyLl8uc2V0RGlzcGxheWVkKHRoaXMuZUdyb3VwQ2xvc2VkSWNvbix0aGlzLmhhc0luZGV0ZXJtaW5hdGVFeHBhbmRTdGF0ZT8hMT09PXRoaXMuaXNFeHBhbmRlZDohdGhpcy5pc0V4cGFuZGVkKSxyLl8uc2V0RGlzcGxheWVkKHRoaXMuZUdyb3VwT3BlbmVkSWNvbiwhMD09PXRoaXMuaXNFeHBhbmRlZCksdGhpcy5oYXNJbmRldGVybWluYXRlRXhwYW5kU3RhdGUmJnIuXy5zZXREaXNwbGF5ZWQodGhpcy5lR3JvdXBJbmRldGVybWluYXRlSWNvbix2b2lkIDA9PT10aGlzLmlzRXhwYW5kZWQpfW9uQ2hlY2tib3hDaGFuZ2VkKGUpe3RoaXMuaXNTZWxlY3RlZD1lO2NvbnN0IHQ9e3R5cGU6cC5FVkVOVF9TRUxFQ1RJT05fQ0hBTkdFRCxpc1NlbGVjdGVkOmUsaXRlbTp0aGlzLml0ZW19O3RoaXMuZGlzcGF0Y2hFdmVudCh0KSx0aGlzLnJlZnJlc2hWYXJpYWJsZUFyaWFMYWJlbHMoKSx0aGlzLnJlZnJlc2hBcmlhQ2hlY2tlZCgpfXRvZ2dsZVNlbGVjdGVkKCl7dGhpcy5wYXJhbXMucmVhZE9ubHl8fHRoaXMuc2V0U2VsZWN0ZWQoIXRoaXMuaXNTZWxlY3RlZCl9c2V0U2VsZWN0ZWQoZSx0KXt0aGlzLmlzU2VsZWN0ZWQ9ZSx0aGlzLmVDaGVja2JveC5zZXRWYWx1ZShlLHQpLHRoaXMucmVmcmVzaEFyaWFDaGVja2VkKCl9cmVmcmVzaFZhcmlhYmxlQXJpYUxhYmVscygpe2lmKCF0aGlzLmlzVHJlZSlyZXR1cm47Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSx0PXRoaXMuZUNoZWNrYm94LmdldFZhbHVlKCksaT12b2lkIDA9PT10P2UoImFyaWFJbmRldGVybWluYXRlIiwiaW5kZXRlcm1pbmF0ZSIpOnQ/ZSgiYXJpYVZpc2libGUiLCJ2aXNpYmxlIik6ZSgiYXJpYUhpZGRlbiIsImhpZGRlbiIpLHM9ZSgiYXJpYVRvZ2dsZVZpc2liaWxpdHkiLCJQcmVzcyBTUEFDRSB0byB0b2dnbGUgdmlzaWJpbGl0eSIpO3IuXy5zZXRBcmlhTGFiZWxsZWRCeSh0aGlzLmVDaGVja2JveC5nZXRJbnB1dEVsZW1lbnQoKSx2b2lkIDApLHRoaXMuZUNoZWNrYm94LnNldElucHV0QXJpYUxhYmVsKGAke3N9ICgke2l9KWApfXNldHVwRml4ZWRBcmlhTGFiZWxzKGUpe2lmKCF0aGlzLmlzVHJlZSlyZXR1cm47Y29uc3QgdD10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSgiYXJpYUZpbHRlclZhbHVlIiwiRmlsdGVyIFZhbHVlIiksaT10aGlzLmdldEFyaWFFbGVtZW50KCk7ci5fLnNldEFyaWFMYWJlbChpLGAke2V9ICR7dH1gKSxyLl8uc2V0QXJpYURlc2NyaWJlZEJ5KGksdGhpcy5lQ2hlY2tib3guZ2V0SW5wdXRFbGVtZW50KCkuaWQpfXJlZnJlc2hBcmlhQ2hlY2tlZCgpe2NvbnN0IGU9dGhpcy5nZXRBcmlhRWxlbWVudCgpO3IuXy5zZXRBcmlhQ2hlY2tlZChlLHRoaXMuZUNoZWNrYm94LmdldFZhbHVlKCkpfXJlZnJlc2hBcmlhRXhwYW5kZWQoKXtyLl8uc2V0QXJpYUV4cGFuZGVkKHRoaXMuZ2V0QXJpYUVsZW1lbnQoKSwhIXRoaXMuaXNFeHBhbmRlZCl9cmVmcmVzaChlLHQsaSl7dmFyIHMscjtpZih0aGlzLml0ZW09ZSx0IT09dGhpcy5pc1NlbGVjdGVkJiZ0aGlzLnNldFNlbGVjdGVkKHQsITApLHRoaXMuc2V0RXhwYW5kZWQoaSwhMCksdGhpcy52YWx1ZUZ1bmN0aW9uKXtjb25zdCBlPXRoaXMudmFsdWVGdW5jdGlvbigpO3RoaXMuc2V0VG9vbHRpcEFuZENlbGxSZW5kZXJlclBhcmFtcyhlLGUpLHRoaXMuY2VsbFJlbmRlcmVyQ29tcG9uZW50fHx0aGlzLnJlbmRlckNlbGxXaXRob3V0Q2VsbFJlbmRlcmVyKCl9aWYodGhpcy5jZWxsUmVuZGVyZXJDb21wb25lbnQpe2lmKCEobnVsbD09PShyPShzPXRoaXMuY2VsbFJlbmRlcmVyQ29tcG9uZW50KS5yZWZyZXNoKXx8dm9pZCAwPT09cj92b2lkIDA6ci5jYWxsKHMsdGhpcy5jZWxsUmVuZGVyZXJQYXJhbXMpKSl7Y29uc3QgZT10aGlzLmNlbGxSZW5kZXJlckNvbXBvbmVudDt0aGlzLnJlbmRlckNlbGwoKSx0aGlzLmRlc3Ryb3lCZWFuKGUpfX19cmVuZGVyKCl7Y29uc3R7cGFyYW1zOntjb2x1bW46ZX19PXRoaXM7bGV0e3ZhbHVlOnR9PXRoaXMsaT1udWxsOyJmdW5jdGlvbiI9PXR5cGVvZiB0Pyh0aGlzLnZhbHVlRnVuY3Rpb249dCxpPXRoaXMudmFsdWVGdW5jdGlvbigpLHQ9aSk6aT10aGlzLmlzVHJlZT9yLl8udG9TdHJpbmdPck51bGwodCk6dGhpcy5nZXRGb3JtYXR0ZWRWYWx1ZShlLHQpLHRoaXMuc2V0VG9vbHRpcEFuZENlbGxSZW5kZXJlclBhcmFtcyh0LGkpLHRoaXMucmVuZGVyQ2VsbCgpfXNldFRvb2x0aXBBbmRDZWxsUmVuZGVyZXJQYXJhbXMoZSx0KXtpZih0aGlzLnBhcmFtcy5zaG93VG9vbHRpcHMpe2NvbnN0IGk9bnVsbCE9dD90OnIuXy50b1N0cmluZ09yTnVsbChlKTt0aGlzLnNldFRvb2x0aXAoaSl9dGhpcy5jZWxsUmVuZGVyZXJQYXJhbXM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7dmFsdWU6ZSx2YWx1ZUZvcm1hdHRlZDp0LGNvbERlZjp0aGlzLnBhcmFtcy5jb2xEZWYsY29sdW1uOnRoaXMucGFyYW1zLmNvbHVtbn0pfWdldFRvb2x0aXBQYXJhbXMoKXtjb25zdCBlPXN1cGVyLmdldFRvb2x0aXBQYXJhbXMoKTtyZXR1cm4gZS5sb2NhdGlvbj0ic2V0RmlsdGVyVmFsdWUiLGUuY29sRGVmPXRoaXMuZ2V0Q29tcG9uZW50SG9sZGVyKCksdGhpcy5pc1RyZWUmJihlLmxldmVsPXRoaXMuZGVwdGgpLGV9Z2V0Rm9ybWF0dGVkVmFsdWUoZSx0KXtyZXR1cm4gdGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UuZm9ybWF0VmFsdWUoZSxudWxsLHQsdGhpcy52YWx1ZUZvcm1hdHRlciwhMSl9cmVuZGVyQ2VsbCgpe2NvbnN0IGU9dGhpcy51c2VyQ29tcG9uZW50RmFjdG9yeS5nZXRTZXRGaWx0ZXJDZWxsUmVuZGVyZXJEZXRhaWxzKHRoaXMucGFyYW1zLHRoaXMuY2VsbFJlbmRlcmVyUGFyYW1zKSx0PWU/ZS5uZXdBZ1N0YWNrSW5zdGFuY2UoKTp2b2lkIDA7bnVsbCE9dD90LnRoZW4oZT0+e2UmJih0aGlzLmNlbGxSZW5kZXJlckNvbXBvbmVudD1lLHRoaXMuZUNoZWNrYm94LnNldExhYmVsKGUuZ2V0R3VpKCkpLHRoaXMuZGVzdHJveUNlbGxSZW5kZXJlckNvbXBvbmVudD0oKT0+dGhpcy5kZXN0cm95QmVhbihlKSl9KTp0aGlzLnJlbmRlckNlbGxXaXRob3V0Q2VsbFJlbmRlcmVyKCl9cmVuZGVyQ2VsbFdpdGhvdXRDZWxsUmVuZGVyZXIoKXt2YXIgZTtsZXQgdD1udWxsIT09KGU9bnVsbD09dGhpcy5jZWxsUmVuZGVyZXJQYXJhbXMudmFsdWVGb3JtYXR0ZWQ/dGhpcy5jZWxsUmVuZGVyZXJQYXJhbXMudmFsdWU6dGhpcy5jZWxsUmVuZGVyZXJQYXJhbXMudmFsdWVGb3JtYXR0ZWQpJiZ2b2lkIDAhPT1lP2U6dGhpcy50cmFuc2xhdGUoImJsYW5rcyIpOyJzdHJpbmciIT10eXBlb2YgdCYmKHIuXy53YXJuT25jZSgiU2V0IEZpbHRlciBWYWx1ZSBGb3JtYXR0ZXIgbXVzdCByZXR1cm4gc3RyaW5nIHZhbHVlcy4gUGxlYXNlIGVuc3VyZSB0aGUgU2V0IEZpbHRlciBWYWx1ZSBGb3JtYXR0ZXIgcmV0dXJucyBzdHJpbmcgdmFsdWVzIGZvciBjb21wbGV4IG9iamVjdHMsIG9yIHNldCBjb252ZXJ0VmFsdWVzVG9TdHJpbmdzPXRydWUgaW4gdGhlIGZpbHRlclBhcmFtcy4gU2VlICIrdGhpcy5nZXRGcmFtZXdvcmtPdmVycmlkZXMoKS5nZXREb2NMaW5rKCJmaWx0ZXItc2V0LWZpbHRlci1saXN0LyNmaWx0ZXItdmFsdWUtdHlwZXMiKSksdD0iIiksdGhpcy5lQ2hlY2tib3guc2V0TGFiZWwodCksdGhpcy5zZXR1cEZpeGVkQXJpYUxhYmVscyh0KX1nZXRDb21wb25lbnRIb2xkZXIoKXtyZXR1cm4gdGhpcy5wYXJhbXMuY29sdW1uLmdldENvbERlZigpfX1wLkVWRU5UX1NFTEVDVElPTl9DSEFOR0VEPSJzZWxlY3Rpb25DaGFuZ2VkIixwLkVWRU5UX0VYUEFOREVEX0NIQU5HRUQ9ImV4cGFuZGVkQ2hhbmdlZCIscC5HUk9VUF9URU1QTEFURT0nXG4gICAgICAgIDxkaXYgY2xhc3M9ImFnLXNldC1maWx0ZXItaXRlbSIgYXJpYS1oaWRkZW49InRydWUiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFnLXNldC1maWx0ZXItZ3JvdXAtaWNvbnMiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhZy1zZXQtZmlsdGVyLWdyb3VwLWNsb3NlZC1pY29uIiByZWY9ImVHcm91cENsb3NlZEljb24iPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYWctc2V0LWZpbHRlci1ncm91cC1vcGVuZWQtaWNvbiIgcmVmPSJlR3JvdXBPcGVuZWRJY29uIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImFnLXNldC1maWx0ZXItZ3JvdXAtaW5kZXRlcm1pbmF0ZS1pY29uIiByZWY9ImVHcm91cEluZGV0ZXJtaW5hdGVJY29uIj48L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8YWctY2hlY2tib3ggcmVmPSJlQ2hlY2tib3giIGNsYXNzPSJhZy1zZXQtZmlsdGVyLWl0ZW0tY2hlY2tib3giPjwvYWctY2hlY2tib3g+XG4gICAgICAgIDwvZGl2PicscC5URU1QTEFURT0nXG4gICAgICAgIDxkaXYgY2xhc3M9ImFnLXNldC1maWx0ZXItaXRlbSI+XG4gICAgICAgICAgICA8YWctY2hlY2tib3ggcmVmPSJlQ2hlY2tib3giIGNsYXNzPSJhZy1zZXQtZmlsdGVyLWl0ZW0tY2hlY2tib3giPjwvYWctY2hlY2tib3g+XG4gICAgICAgIDwvZGl2PicsdShbT2JqZWN0KHIuQXV0b3dpcmVkKSgidmFsdWVGb3JtYXR0ZXJTZXJ2aWNlIildLHAucHJvdG90eXBlLCJ2YWx1ZUZvcm1hdHRlclNlcnZpY2UiLHZvaWQgMCksdShbT2JqZWN0KHIuQXV0b3dpcmVkKSgidXNlckNvbXBvbmVudEZhY3RvcnkiKV0scC5wcm90b3R5cGUsInVzZXJDb21wb25lbnRGYWN0b3J5Iix2b2lkIDApLHUoW09iamVjdChyLlJlZlNlbGVjdG9yKSgiZUNoZWNrYm94IildLHAucHJvdG90eXBlLCJlQ2hlY2tib3giLHZvaWQgMCksdShbT2JqZWN0KHIuUmVmU2VsZWN0b3IpKCJlR3JvdXBPcGVuZWRJY29uIildLHAucHJvdG90eXBlLCJlR3JvdXBPcGVuZWRJY29uIix2b2lkIDApLHUoW09iamVjdChyLlJlZlNlbGVjdG9yKSgiZUdyb3VwQ2xvc2VkSWNvbiIpXSxwLnByb3RvdHlwZSwiZUdyb3VwQ2xvc2VkSWNvbiIsdm9pZCAwKSx1KFtPYmplY3Qoci5SZWZTZWxlY3RvcikoImVHcm91cEluZGV0ZXJtaW5hdGVJY29uIildLHAucHJvdG90eXBlLCJlR3JvdXBJbmRldGVybWluYXRlSWNvbiIsdm9pZCAwKSx1KFtyLlBvc3RDb25zdHJ1Y3RdLHAucHJvdG90eXBlLCJpbml0IixudWxsKTtjb25zdCBnPXtsb2FkaW5nT29vOiJMb2FkaW5nLi4uIixibGFua3M6IihCbGFua3MpIixzZWFyY2hPb286IlNlYXJjaC4uLiIsc2VsZWN0QWxsOiIoU2VsZWN0IEFsbCkiLHNlbGVjdEFsbFNlYXJjaFJlc3VsdHM6IihTZWxlY3QgQWxsIFNlYXJjaCBSZXN1bHRzKSIsYWRkQ3VycmVudFNlbGVjdGlvblRvRmlsdGVyOiJBZGQgY3VycmVudCBzZWxlY3Rpb24gdG8gZmlsdGVyIixub01hdGNoZXM6Ik5vIG1hdGNoZXMuIn07Y2xhc3MgbXtnZXRNb2RlbEFzU3RyaW5nKGUsdCl7Y29uc3R7dmFsdWVzOml9PWV8fHQuZ2V0TW9kZWwoKXx8e30scz10LmdldFZhbHVlTW9kZWwoKTtpZihudWxsPT1pfHxudWxsPT1zKXJldHVybiIiO2NvbnN0IHI9aS5maWx0ZXIoZT0+cy5pc0tleUF2YWlsYWJsZShlKSksbz1yLmxlbmd0aDtyZXR1cm5gKCR7b30pICR7ci5zbGljZSgwLDEwKS5tYXAoZT0+dC5nZXRGb3JtYXR0ZWRWYWx1ZShlKSkuam9pbigiLCIpfSR7bz4xMD8iLC4uLiI6IiJ9YH19dmFyIGY9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgdiBleHRlbmRzIHIuUHJvdmlkZWRGaWx0ZXJ7Y29uc3RydWN0b3IoKXtzdXBlcigic2V0RmlsdGVyIiksdGhpcy52YWx1ZU1vZGVsPW51bGwsdGhpcy5zZXRGaWx0ZXJQYXJhbXM9bnVsbCx0aGlzLnZpcnR1YWxMaXN0PW51bGwsdGhpcy5jYXNlU2Vuc2l0aXZlPSExLHRoaXMuY29udmVydFZhbHVlc1RvU3RyaW5ncz0hMSx0aGlzLnRyZWVEYXRhVHJlZUxpc3Q9ITEsdGhpcy5ncm91cGluZ1RyZWVMaXN0PSExLHRoaXMuaGFyZFJlZnJlc2hWaXJ0dWFsTGlzdD0hMSx0aGlzLm5vVmFsdWVGb3JtYXR0ZXJTdXBwbGllZD0hMSx0aGlzLmZpbHRlck1vZGVsRm9ybWF0dGVyPW5ldyBtLHRoaXMudXBkYXRlU2V0RmlsdGVyT25QYXJhbXNDaGFuZ2U9ZT0+e3ZhciB0O3RoaXMuc2V0RmlsdGVyUGFyYW1zPWUsdGhpcy5jb252ZXJ0VmFsdWVzVG9TdHJpbmdzPSEhZS5jb252ZXJ0VmFsdWVzVG9TdHJpbmdzLHRoaXMuY2FzZVNlbnNpdGl2ZT0hIWUuY2FzZVNlbnNpdGl2ZTtjb25zdCBpPW51bGwhPT0odD1lLmtleUNyZWF0b3IpJiZ2b2lkIDAhPT10P3Q6ZS5jb2xEZWYua2V5Q3JlYXRvcjt0aGlzLnNldFZhbHVlRm9ybWF0dGVyKGUudmFsdWVGb3JtYXR0ZXIsaSx0aGlzLmNvbnZlcnRWYWx1ZXNUb1N0cmluZ3MsISFlLnRyZWVMaXN0LCEhZS5jb2xEZWYucmVmRGF0YSk7Y29uc3Qgcz1lLmNvbHVtbi5nZXRJZCgpLnN0YXJ0c1dpdGgoci5HUk9VUF9BVVRPX0NPTFVNTl9JRCk7dGhpcy50cmVlRGF0YVRyZWVMaXN0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidHJlZURhdGEiKSYmISFlLnRyZWVMaXN0JiZzLHRoaXMuZ2V0RGF0YVBhdGg9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJnZXREYXRhUGF0aCIpLHRoaXMuZ3JvdXBpbmdUcmVlTGlzdD0hIXRoaXMuY29sdW1uTW9kZWwuZ2V0Um93R3JvdXBDb2x1bW5zKCkubGVuZ3RoJiYhIWUudHJlZUxpc3QmJnMsdGhpcy5jcmVhdGVLZXk9dGhpcy5nZW5lcmF0ZUNyZWF0ZUtleShpLHRoaXMuY29udmVydFZhbHVlc1RvU3RyaW5ncyx0aGlzLnRyZWVEYXRhVHJlZUxpc3R8fHRoaXMuZ3JvdXBpbmdUcmVlTGlzdCl9fXBvc3RDb25zdHJ1Y3QoKXtzdXBlci5wb3N0Q29uc3RydWN0KCl9dXBkYXRlVWlWaXNpYmlsaXR5KCl7fWNyZWF0ZUJvZHlUZW1wbGF0ZSgpe3JldHVybmBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLXNldC1maWx0ZXIiPlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlRmlsdGVyTG9hZGluZyIgY2xhc3M9ImFnLWZpbHRlci1sb2FkaW5nIGFnLWhpZGRlbiI+JHt0aGlzLnRyYW5zbGF0ZUZvclNldEZpbHRlcigibG9hZGluZ09vbyIpfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxhZy1pbnB1dC10ZXh0LWZpZWxkIGNsYXNzPSJhZy1taW5pLWZpbHRlciIgcmVmPSJlTWluaUZpbHRlciI+PC9hZy1pbnB1dC10ZXh0LWZpZWxkPlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlRmlsdGVyTm9NYXRjaGVzIiBjbGFzcz0iYWctZmlsdGVyLW5vLW1hdGNoZXMgYWctaGlkZGVuIj4ke3RoaXMudHJhbnNsYXRlRm9yU2V0RmlsdGVyKCJub01hdGNoZXMiKX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj0iZVNldEZpbHRlckxpc3QiIGNsYXNzPSJhZy1zZXQtZmlsdGVyLWxpc3QiIHJvbGU9InByZXNlbnRhdGlvbiI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5gfWhhbmRsZUtleURvd24oZSl7aWYoc3VwZXIuaGFuZGxlS2V5RG93bihlKSwhZS5kZWZhdWx0UHJldmVudGVkKXN3aXRjaChlLmtleSl7Y2FzZSByLktleUNvZGUuU1BBQ0U6dGhpcy5oYW5kbGVLZXlTcGFjZShlKTticmVhaztjYXNlIHIuS2V5Q29kZS5FTlRFUjp0aGlzLmhhbmRsZUtleUVudGVyKGUpO2JyZWFrO2Nhc2Ugci5LZXlDb2RlLkxFRlQ6dGhpcy5oYW5kbGVLZXlMZWZ0KGUpO2JyZWFrO2Nhc2Ugci5LZXlDb2RlLlJJR0hUOnRoaXMuaGFuZGxlS2V5UmlnaHQoZSl9fWhhbmRsZUtleVNwYWNlKGUpe3ZhciB0O251bGw9PT0odD10aGlzLmdldENvbXBvbmVudEZvcktleUV2ZW50KGUpKXx8dm9pZCAwPT09dHx8dC50b2dnbGVTZWxlY3RlZCgpfWhhbmRsZUtleUVudGVyKGUpe2lmKCF0aGlzLnNldEZpbHRlclBhcmFtcylyZXR1cm47Y29uc3R7ZXhjZWxNb2RlOnQscmVhZE9ubHk6aX09dGhpcy5zZXRGaWx0ZXJQYXJhbXN8fHt9O3QmJiFpJiYoZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMub25CdEFwcGx5KCExLCExLGUpLCJtYWMiPT09dGhpcy5zZXRGaWx0ZXJQYXJhbXMuZXhjZWxNb2RlJiZ0aGlzLmVNaW5pRmlsdGVyLmdldElucHV0RWxlbWVudCgpLnNlbGVjdCgpKX1oYW5kbGVLZXlMZWZ0KGUpe3ZhciB0O251bGw9PT0odD10aGlzLmdldENvbXBvbmVudEZvcktleUV2ZW50KGUpKXx8dm9pZCAwPT09dHx8dC5zZXRFeHBhbmRlZCghMSl9aGFuZGxlS2V5UmlnaHQoZSl7dmFyIHQ7bnVsbD09PSh0PXRoaXMuZ2V0Q29tcG9uZW50Rm9yS2V5RXZlbnQoZSkpfHx2b2lkIDA9PT10fHx0LnNldEV4cGFuZGVkKCEwKX1nZXRDb21wb25lbnRGb3JLZXlFdmVudChlKXt2YXIgdDtjb25zdCBpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCk7aWYoIXRoaXMuZVNldEZpbHRlckxpc3QuY29udGFpbnMoaS5hY3RpdmVFbGVtZW50KXx8IXRoaXMudmlydHVhbExpc3QpcmV0dXJuO2NvbnN0IHM9dGhpcy52aXJ0dWFsTGlzdC5nZXRMYXN0Rm9jdXNlZFJvdygpO2lmKG51bGw9PXMpcmV0dXJuO2NvbnN0IHI9dGhpcy52aXJ0dWFsTGlzdC5nZXRDb21wb25lbnRBdChzKTtpZihudWxsPT1yKXJldHVybjtlLnByZXZlbnREZWZhdWx0KCk7Y29uc3R7cmVhZE9ubHk6b309bnVsbCE9PSh0PXRoaXMuc2V0RmlsdGVyUGFyYW1zKSYmdm9pZCAwIT09dD90Ont9O3JldHVybiBvP3ZvaWQgMDpyfWdldENzc0lkZW50aWZpZXIoKXtyZXR1cm4ic2V0LWZpbHRlciJ9c2V0TW9kZWwoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PWUmJm51bGw9PShudWxsPT09KHQ9dGhpcy52YWx1ZU1vZGVsKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRNb2RlbCgpKT8odGhpcy5zZXRNaW5pRmlsdGVyKG51bGwpLHIuQWdQcm9taXNlLnJlc29sdmUoKSk6c3VwZXIuc2V0TW9kZWwoZSl9cmVmcmVzaChlKXt2YXIgdCxpLHM7aWYoIXN1cGVyLnJlZnJlc2goZSkpcmV0dXJuITE7cmV0dXJuIVsidHJlZUxpc3QiLCJ0cmVlTGlzdEZvcm1hdHRlciIsInRyZWVMaXN0UGF0aEdldHRlciIsImtleUNyZWF0b3IiLCJjb252ZXJ0VmFsdWVzVG9TdHJpbmdzIiwiY2FzZVNlbnNpdGl2ZSIsImNvbXBhcmF0b3IiLCJzdXBwcmVzc1NlbGVjdEFsbCIsImV4Y2VsTW9kZSJdLnNvbWUodD0+e3ZhciBpO3JldHVybiBlW3RdIT09KG51bGw9PT0oaT10aGlzLnNldEZpbHRlclBhcmFtcyl8fHZvaWQgMD09PWk/dm9pZCAwOmlbdF0pfSkmJighdGhpcy5oYXZlQ29sRGVmUGFyYW1zQ2hhbmdlZChlLmNvbERlZikmJihzdXBlci51cGRhdGVQYXJhbXMoZSksdGhpcy51cGRhdGVTZXRGaWx0ZXJPblBhcmFtc0NoYW5nZShlKSx0aGlzLnVwZGF0ZU1pbmlGaWx0ZXIoKSxlLmNlbGxSZW5kZXJlcj09PShudWxsPT09KHQ9dGhpcy5zZXRGaWx0ZXJQYXJhbXMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNlbGxSZW5kZXJlcikmJmUudmFsdWVGb3JtYXR0ZXI9PT0obnVsbD09PShpPXRoaXMuc2V0RmlsdGVyUGFyYW1zKXx8dm9pZCAwPT09aT92b2lkIDA6aS52YWx1ZUZvcm1hdHRlcil8fHRoaXMuY2hlY2tBbmRSZWZyZXNoVmlydHVhbExpc3QoKSxudWxsPT09KHM9dGhpcy52YWx1ZU1vZGVsKXx8dm9pZCAwPT09c3x8cy51cGRhdGVPblBhcmFtc0NoYW5nZShlKS50aGVuKCgpPT57dmFyIGU7KG51bGw9PT0oZT10aGlzLnZhbHVlTW9kZWwpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmhhc1NlbGVjdGlvbnMoKSkmJnRoaXMucmVmcmVzaEZpbHRlclZhbHVlcygpfSksITApKX1oYXZlQ29sRGVmUGFyYW1zQ2hhbmdlZChlKXt2YXIgdDtjb25zdCBpPW51bGw9PT0odD10aGlzLnNldEZpbHRlclBhcmFtcyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY29sRGVmO3JldHVyblsia2V5Q3JlYXRvciIsImZpbHRlclZhbHVlR2V0dGVyIl0uc29tZSh0PT5lW3RdIT09KG51bGw9PWk/dm9pZCAwOmlbdF0pKX1zZXRNb2RlbEFuZFJlZnJlc2goZSl7cmV0dXJuIHRoaXMudmFsdWVNb2RlbD90aGlzLnZhbHVlTW9kZWwuc2V0TW9kZWwoZSkudGhlbigoKT0+dGhpcy5jaGVja0FuZFJlZnJlc2hWaXJ0dWFsTGlzdCgpKTpyLkFnUHJvbWlzZS5yZXNvbHZlKCl9cmVzZXRVaVRvRGVmYXVsdHMoKXtyZXR1cm4gdGhpcy5zZXRNaW5pRmlsdGVyKG51bGwpLHRoaXMuc2V0TW9kZWxBbmRSZWZyZXNoKG51bGwpfXNldE1vZGVsSW50b1VpKGUpe3RoaXMuc2V0TWluaUZpbHRlcihudWxsKTtjb25zdCB0PW51bGw9PWU/bnVsbDplLnZhbHVlcztyZXR1cm4gdGhpcy5zZXRNb2RlbEFuZFJlZnJlc2godCl9Z2V0TW9kZWxGcm9tVWkoKXtpZighdGhpcy52YWx1ZU1vZGVsKXRocm93IG5ldyBFcnJvcigiVmFsdWUgbW9kZWwgaGFzIG5vdCBiZWVuIGNyZWF0ZWQuIik7Y29uc3QgZT10aGlzLnZhbHVlTW9kZWwuZ2V0TW9kZWwoKTtyZXR1cm4gZT97dmFsdWVzOmUsZmlsdGVyVHlwZTp0aGlzLmdldEZpbHRlclR5cGUoKX06bnVsbH1nZXRGaWx0ZXJUeXBlKCl7cmV0dXJuInNldCJ9Z2V0VmFsdWVNb2RlbCgpe3JldHVybiB0aGlzLnZhbHVlTW9kZWx9YXJlTW9kZWxzRXF1YWwoZSx0KXtyZXR1cm4gbnVsbD09ZSYmbnVsbD09dHx8bnVsbCE9ZSYmbnVsbCE9dCYmci5fLmFyZUVxdWFsKGUudmFsdWVzLHQudmFsdWVzKX1zZXRQYXJhbXMoZSl7dmFyIHQ7dGhpcy5hcHBseUV4Y2VsTW9kZU9wdGlvbnMoZSksc3VwZXIuc2V0UGFyYW1zKGUpLHRoaXMudXBkYXRlU2V0RmlsdGVyT25QYXJhbXNDaGFuZ2UoZSk7Y29uc3QgaT1udWxsIT09KHQ9ZS5rZXlDcmVhdG9yKSYmdm9pZCAwIT09dD90OmUuY29sRGVmLmtleUNyZWF0b3I7dGhpcy52YWx1ZU1vZGVsPW5ldyBoKHtmaWx0ZXJQYXJhbXM6ZSxzZXRJc0xvYWRpbmc6ZT0+dGhpcy5zZXRJc0xvYWRpbmcoZSksdmFsdWVGb3JtYXR0ZXJTZXJ2aWNlOnRoaXMudmFsdWVGb3JtYXR0ZXJTZXJ2aWNlLHRyYW5zbGF0ZTplPT50aGlzLnRyYW5zbGF0ZUZvclNldEZpbHRlcihlKSxjYXNlRm9ybWF0OmU9PnRoaXMuY2FzZUZvcm1hdChlKSxjcmVhdGVLZXk6dGhpcy5jcmVhdGVLZXksdmFsdWVGb3JtYXR0ZXI6dGhpcy52YWx1ZUZvcm1hdHRlcix1c2luZ0NvbXBsZXhPYmplY3RzOiEhaSxncmlkT3B0aW9uc1NlcnZpY2U6dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsY29sdW1uTW9kZWw6dGhpcy5jb2x1bW5Nb2RlbCx2YWx1ZVNlcnZpY2U6dGhpcy52YWx1ZVNlcnZpY2UsdHJlZURhdGFUcmVlTGlzdDp0aGlzLnRyZWVEYXRhVHJlZUxpc3QsZ3JvdXBpbmdUcmVlTGlzdDp0aGlzLmdyb3VwaW5nVHJlZUxpc3QsYWRkTWFuYWdlZExpc3RlbmVyOihlLHQpPT50aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxlLHQpfSksdGhpcy5pbml0aWFsaXNlRmlsdGVyQm9keVVpKCksdGhpcy5hZGRFdmVudExpc3RlbmVyc0ZvckRhdGFDaGFuZ2VzKCl9b25BZGRDdXJyZW50U2VsZWN0aW9uVG9GaWx0ZXJDaGFuZ2UoZSl7aWYoIXRoaXMudmFsdWVNb2RlbCl0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG1vZGVsIGhhcyBub3QgYmVlbiBjcmVhdGVkLiIpO3RoaXMudmFsdWVNb2RlbC5zZXRBZGRDdXJyZW50U2VsZWN0aW9uVG9GaWx0ZXIoZSl9c2V0VmFsdWVGb3JtYXR0ZXIoZSx0LGkscyxvKXtsZXQgbj1lO2lmKCFuKXtpZih0JiYhaSYmIXMpdGhyb3cgbmV3IEVycm9yKCJBRyBHcmlkOiBNdXN0IHN1cHBseSBhIFZhbHVlIEZvcm1hdHRlciBpbiBTZXQgRmlsdGVyIHBhcmFtcyB3aGVuIHVzaW5nIGEgS2V5IENyZWF0b3IgdW5sZXNzIGNvbnZlcnRWYWx1ZXNUb1N0cmluZ3MgaXMgZW5hYmxlZCIpO3RoaXMubm9WYWx1ZUZvcm1hdHRlclN1cHBsaWVkPSEwLG98fChuPWU9PnIuXy50b1N0cmluZ09yTnVsbChlLnZhbHVlKSl9dGhpcy52YWx1ZUZvcm1hdHRlcj1ufWdlbmVyYXRlQ3JlYXRlS2V5KGUsdCxpKXtpZihpJiYhZSl0aHJvdyBuZXcgRXJyb3IoIkFHIEdyaWQ6IE11c3Qgc3VwcGx5IGEgS2V5IENyZWF0b3IgaW4gU2V0IEZpbHRlciBwYXJhbXMgd2hlbiBgdHJlZUxpc3QgPSB0cnVlYCBvbiBhIGdyb3VwIGNvbHVtbiwgYW5kIFRyZWUgRGF0YSBvciBSb3cgR3JvdXBpbmcgaXMgZW5hYmxlZC4iKTtyZXR1cm4gZT8odCxpPW51bGwpPT57Y29uc3Qgcz10aGlzLmdldEtleUNyZWF0b3JQYXJhbXModCxpKTtyZXR1cm4gci5fLm1ha2VOdWxsKGUocykpfTp0P2U9PkFycmF5LmlzQXJyYXkoZSk/ZTpyLl8ubWFrZU51bGwoci5fLnRvU3RyaW5nT3JOdWxsKGUpKTplPT5yLl8ubWFrZU51bGwoci5fLnRvU3RyaW5nT3JOdWxsKGUpKX1nZXRGb3JtYXR0ZWRWYWx1ZShlKXt2YXIgdDtsZXQgaT10aGlzLnZhbHVlTW9kZWwuZ2V0VmFsdWUoZSk7dGhpcy5ub1ZhbHVlRm9ybWF0dGVyU3VwcGxpZWQmJih0aGlzLnRyZWVEYXRhVHJlZUxpc3R8fHRoaXMuZ3JvdXBpbmdUcmVlTGlzdCkmJkFycmF5LmlzQXJyYXkoaSkmJihpPXIuXy5sYXN0KGkpKTtjb25zdCBzPXRoaXMudmFsdWVGb3JtYXR0ZXJTZXJ2aWNlLmZvcm1hdFZhbHVlKHRoaXMuc2V0RmlsdGVyUGFyYW1zLmNvbHVtbixudWxsLGksdGhpcy52YWx1ZUZvcm1hdHRlciwhMSk7cmV0dXJuIG51bGwhPT0odD1udWxsPT1zP3IuXy50b1N0cmluZ09yTnVsbChpKTpzKSYmdm9pZCAwIT09dD90OnRoaXMudHJhbnNsYXRlRm9yU2V0RmlsdGVyKCJibGFua3MiKX1hcHBseUV4Y2VsTW9kZU9wdGlvbnMoZSl7IndpbmRvd3MiPT09ZS5leGNlbE1vZGU/KGUuYnV0dG9uc3x8KGUuYnV0dG9ucz1bImFwcGx5IiwiY2FuY2VsIl0pLG51bGw9PWUuY2xvc2VPbkFwcGx5JiYoZS5jbG9zZU9uQXBwbHk9ITApKToibWFjIj09PWUuZXhjZWxNb2RlJiYoZS5idXR0b25zfHwoZS5idXR0b25zPVsicmVzZXQiXSksbnVsbD09ZS5hcHBseU1pbmlGaWx0ZXJXaGlsZVR5cGluZyYmKGUuYXBwbHlNaW5pRmlsdGVyV2hpbGVUeXBpbmc9ITApLG51bGw9PWUuZGVib3VuY2VNcyYmKGUuZGVib3VuY2VNcz01MDApKSxlLmV4Y2VsTW9kZSYmZS5kZWZhdWx0VG9Ob3RoaW5nU2VsZWN0ZWQmJihlLmRlZmF1bHRUb05vdGhpbmdTZWxlY3RlZD0hMSxyLl8ud2Fybk9uY2UoJ1RoZSBTZXQgRmlsdGVyIFBhcmFtZXRlciAiZGVmYXVsdFRvTm90aGluZ1NlbGVjdGVkIiB2YWx1ZSB3YXMgaWdub3JlZCBiZWNhdXNlIGl0IGRvZXMgbm90IHdvcmsgd2hlbiAiZXhjZWxNb2RlIiBpcyB1c2VkLicpKX1hZGRFdmVudExpc3RlbmVyc0ZvckRhdGFDaGFuZ2VzKCl7dGhpcy5pc1ZhbHVlc1Rha2VuRnJvbUdyaWQoKSYmKHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHIuRXZlbnRzLkVWRU5UX0NFTExfVkFMVUVfQ0hBTkdFRCxlPT57dGhpcy5zZXRGaWx0ZXJQYXJhbXMmJmUuY29sdW1uPT09dGhpcy5zZXRGaWx0ZXJQYXJhbXMuY29sdW1uJiZ0aGlzLnN5bmNBZnRlckRhdGFDaGFuZ2UoKX0pLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXJzKFsidHJlZURhdGEiLCJnZXREYXRhUGF0aCIsImdyb3VwQWxsb3dVbmJhbGFuY2VkIl0sKCk9Pnt0aGlzLnN5bmNBZnRlckRhdGFDaGFuZ2UoKX0pKX1zeW5jQWZ0ZXJEYXRhQ2hhbmdlKCl7aWYoIXRoaXMudmFsdWVNb2RlbCl0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG1vZGVsIGhhcyBub3QgYmVlbiBjcmVhdGVkLiIpO3JldHVybiB0aGlzLnZhbHVlTW9kZWwucmVmcmVzaFZhbHVlcygpLnRoZW4oKCk9Pnt0aGlzLmNoZWNrQW5kUmVmcmVzaFZpcnR1YWxMaXN0KCksdGhpcy5vbkJ0QXBwbHkoITEsITApfSl9c2V0SXNMb2FkaW5nKGUpe3IuXy5zZXREaXNwbGF5ZWQodGhpcy5lRmlsdGVyTG9hZGluZyxlKSxlfHwodGhpcy5oYXJkUmVmcmVzaFZpcnR1YWxMaXN0PSEwKX1pbml0aWFsaXNlRmlsdGVyQm9keVVpKCl7dGhpcy5pbml0VmlydHVhbExpc3QoKSx0aGlzLmluaXRNaW5pRmlsdGVyKCl9aW5pdFZpcnR1YWxMaXN0KCl7aWYoIXRoaXMuc2V0RmlsdGVyUGFyYW1zKXRocm93IG5ldyBFcnJvcigiU2V0IGZpbHRlciBwYXJhbXMgaGF2ZSBub3QgYmVlbiBwcm92aWRlZC4iKTtpZighdGhpcy52YWx1ZU1vZGVsKXRocm93IG5ldyBFcnJvcigiVmFsdWUgbW9kZWwgaGFzIG5vdCBiZWVuIGNyZWF0ZWQuIik7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSgiYXJpYUZpbHRlckxpc3QiLCJGaWx0ZXIgTGlzdCIpLHQ9ISF0aGlzLnNldEZpbHRlclBhcmFtcy50cmVlTGlzdCxpPXRoaXMudmlydHVhbExpc3Q9dGhpcy5jcmVhdGVCZWFuKG5ldyByLlZpcnR1YWxMaXN0KHtjc3NJZGVudGlmaWVyOiJmaWx0ZXIiLGFyaWFSb2xlOnQ/InRyZWUiOiJsaXN0Ym94IixsaXN0TmFtZTplfSkpLHM9dGhpcy5nZXRSZWZFbGVtZW50KCJlU2V0RmlsdGVyTGlzdCIpO3QmJnMuY2xhc3NMaXN0LmFkZCgiYWctc2V0LWZpbHRlci10cmVlLWxpc3QiKSxzJiZzLmFwcGVuZENoaWxkKGkuZ2V0R3VpKCkpO2NvbnN0e2NlbGxIZWlnaHQ6b309dGhpcy5zZXRGaWx0ZXJQYXJhbXM7bnVsbCE9byYmaS5zZXRSb3dIZWlnaHQobyk7aS5zZXRDb21wb25lbnRDcmVhdG9yKChlLGkpPT50aGlzLmNyZWF0ZVNldExpc3RJdGVtKGUsdCxpKSk7bGV0IG47aS5zZXRDb21wb25lbnRVcGRhdGVyKChlLHQpPT50aGlzLnVwZGF0ZVNldExpc3RJdGVtKGUsdCkpLG49dGhpcy5zZXRGaWx0ZXJQYXJhbXMuc3VwcHJlc3NTZWxlY3RBbGw/bmV3IEModGhpcy52YWx1ZU1vZGVsKTpuZXcgeSh0aGlzLnZhbHVlTW9kZWwsKCk9PnRoaXMuaXNTZWxlY3RBbGxTZWxlY3RlZCgpKSx0JiYobj1uZXcgUyhuKSksaS5zZXRNb2RlbChuKX1nZXRTZWxlY3RBbGxMYWJlbCgpe2lmKCF0aGlzLnNldEZpbHRlclBhcmFtcyl0aHJvdyBuZXcgRXJyb3IoIlNldCBmaWx0ZXIgcGFyYW1zIGhhdmUgbm90IGJlZW4gcHJvdmlkZWQuIik7aWYoIXRoaXMudmFsdWVNb2RlbCl0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG1vZGVsIGhhcyBub3QgYmVlbiBjcmVhdGVkLiIpO2NvbnN0IGU9bnVsbCE9dGhpcy52YWx1ZU1vZGVsLmdldE1pbmlGaWx0ZXIoKSYmdGhpcy5zZXRGaWx0ZXJQYXJhbXMuZXhjZWxNb2RlPyJzZWxlY3RBbGxTZWFyY2hSZXN1bHRzIjoic2VsZWN0QWxsIjtyZXR1cm4gdGhpcy50cmFuc2xhdGVGb3JTZXRGaWx0ZXIoZSl9Z2V0QWRkU2VsZWN0aW9uVG9GaWx0ZXJMYWJlbCgpe2lmKCF0aGlzLnNldEZpbHRlclBhcmFtcyl0aHJvdyBuZXcgRXJyb3IoIlNldCBmaWx0ZXIgcGFyYW1zIGhhdmUgbm90IGJlZW4gcHJvdmlkZWQuIik7aWYoIXRoaXMudmFsdWVNb2RlbCl0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG1vZGVsIGhhcyBub3QgYmVlbiBjcmVhdGVkLiIpO3JldHVybiB0aGlzLnRyYW5zbGF0ZUZvclNldEZpbHRlcigiYWRkQ3VycmVudFNlbGVjdGlvblRvRmlsdGVyIil9Y3JlYXRlU2V0TGlzdEl0ZW0oZSx0LGkpe2lmKCF0aGlzLnNldEZpbHRlclBhcmFtcyl0aHJvdyBuZXcgRXJyb3IoIlNldCBmaWx0ZXIgcGFyYW1zIGhhdmUgbm90IGJlZW4gcHJvdmlkZWQuIik7aWYoIXRoaXMudmFsdWVNb2RlbCl0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG1vZGVsIGhhcyBub3QgYmVlbiBjcmVhdGVkLiIpO2NvbnN0IHM9dGhpcy52YWx1ZU1vZGVsLmhhc0dyb3VwcygpLHtpc1NlbGVjdGVkOnIsaXNFeHBhbmRlZDpvfT10aGlzLmlzU2VsZWN0ZWRFeHBhbmRlZChlKSx7dmFsdWU6bixkZXB0aDphLGlzR3JvdXA6bCxoYXNJbmRldGVybWluYXRlRXhwYW5kU3RhdGU6ZCxzZWxlY3RlZExpc3RlbmVyOmMsZXhwYW5kZWRMaXN0ZW5lcjpofT10aGlzLm5ld1NldExpc3RJdGVtQXR0cmlidXRlcyhlLHQpLHU9e2ZvY3VzV3JhcHBlcjppLHZhbHVlOm4scGFyYW1zOnRoaXMuc2V0RmlsdGVyUGFyYW1zLHRyYW5zbGF0ZTplPT50aGlzLnRyYW5zbGF0ZUZvclNldEZpbHRlcihlKSx2YWx1ZUZvcm1hdHRlcjp0aGlzLnZhbHVlRm9ybWF0dGVyLGl0ZW06ZSxpc1NlbGVjdGVkOnIsaXNUcmVlOnQsZGVwdGg6YSxncm91cHNFeGlzdDpzLGlzR3JvdXA6bCxpc0V4cGFuZGVkOm8saGFzSW5kZXRlcm1pbmF0ZUV4cGFuZFN0YXRlOmR9LGc9dGhpcy5jcmVhdGVCZWFuKG5ldyBwKHUpKTtyZXR1cm4gZy5hZGRFdmVudExpc3RlbmVyKHAuRVZFTlRfU0VMRUNUSU9OX0NIQU5HRUQsYyksaCYmZy5hZGRFdmVudExpc3RlbmVyKHAuRVZFTlRfRVhQQU5ERURfQ0hBTkdFRCxoKSxnfW5ld1NldFRyZWVJdGVtQXR0cmlidXRlcyhlLHQpe3ZhciBpLHMscixvLG4sbDtpZighdGhpcy5zZXRGaWx0ZXJQYXJhbXMpdGhyb3cgbmV3IEVycm9yKCJTZXQgZmlsdGVyIHBhcmFtcyBoYXZlIG5vdCBiZWVuIHByb3ZpZGVkLiIpO2lmKCF0aGlzLnZhbHVlTW9kZWwpdGhyb3cgbmV3IEVycm9yKCJWYWx1ZSBtb2RlbCBoYXMgbm90IGJlZW4gY3JlYXRlZC4iKTtjb25zdCBkPXRoaXMudmFsdWVNb2RlbC5oYXNHcm91cHMoKTtyZXR1cm4gZS5rZXk9PT1hLlNFTEVDVF9BTEw/e3ZhbHVlOigpPT50aGlzLmdldFNlbGVjdEFsbExhYmVsKCksaXNHcm91cDpkLGRlcHRoOmUuZGVwdGgsaGFzSW5kZXRlcm1pbmF0ZUV4cGFuZFN0YXRlOiEwLHNlbGVjdGVkTGlzdGVuZXI6ZT0+dGhpcy5vblNlbGVjdEFsbChlLmlzU2VsZWN0ZWQpLGV4cGFuZGVkTGlzdGVuZXI6ZT0+dGhpcy5vbkV4cGFuZEFsbChlLml0ZW0sZS5pc0V4cGFuZGVkKX06ZS5rZXk9PT1hLkFERF9TRUxFQ1RJT05fVE9fRklMVEVSP3t2YWx1ZTooKT0+dGhpcy5nZXRBZGRTZWxlY3Rpb25Ub0ZpbHRlckxhYmVsKCksZGVwdGg6ZS5kZXB0aCxpc0dyb3VwOiExLGhhc0luZGV0ZXJtaW5hdGVFeHBhbmRTdGF0ZTohMSxzZWxlY3RlZExpc3RlbmVyOmU9Pnt0aGlzLm9uQWRkQ3VycmVudFNlbGVjdGlvblRvRmlsdGVyQ2hhbmdlKGUuaXNTZWxlY3RlZCl9fTplLmNoaWxkcmVuP3t2YWx1ZTpudWxsIT09KHI9bnVsbD09PShzPShpPXRoaXMuc2V0RmlsdGVyUGFyYW1zKS50cmVlTGlzdEZvcm1hdHRlcil8fHZvaWQgMD09PXM/dm9pZCAwOnMuY2FsbChpLGUudHJlZUtleSxlLmRlcHRoLGUucGFyZW50VHJlZUtleXMpKSYmdm9pZCAwIT09cj9yOmUudHJlZUtleSxkZXB0aDplLmRlcHRoLGlzR3JvdXA6ITAsc2VsZWN0ZWRMaXN0ZW5lcjplPT50aGlzLm9uR3JvdXBJdGVtU2VsZWN0ZWQoZS5pdGVtLGUuaXNTZWxlY3RlZCksZXhwYW5kZWRMaXN0ZW5lcjplPT50aGlzLm9uRXhwYW5kZWRDaGFuZ2VkKGUuaXRlbSxlLmlzRXhwYW5kZWQpfTp7dmFsdWU6bnVsbCE9PShsPW51bGw9PT0obj0obz10aGlzLnNldEZpbHRlclBhcmFtcykudHJlZUxpc3RGb3JtYXR0ZXIpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNhbGwobyxlLnRyZWVLZXksZS5kZXB0aCxlLnBhcmVudFRyZWVLZXlzKSkmJnZvaWQgMCE9PWw/bDplLnRyZWVLZXksZGVwdGg6ZS5kZXB0aCxzZWxlY3RlZExpc3RlbmVyOmU9PnRoaXMub25JdGVtU2VsZWN0ZWQoZS5pdGVtLmtleSxlLmlzU2VsZWN0ZWQpfX1uZXdTZXRMaXN0SXRlbUF0dHJpYnV0ZXMoZSx0KXtpZighdGhpcy5zZXRGaWx0ZXJQYXJhbXMpdGhyb3cgbmV3IEVycm9yKCJTZXQgZmlsdGVyIHBhcmFtcyBoYXZlIG5vdCBiZWVuIHByb3ZpZGVkLiIpO2lmKCF0aGlzLnZhbHVlTW9kZWwpdGhyb3cgbmV3IEVycm9yKCJWYWx1ZSBtb2RlbCBoYXMgbm90IGJlZW4gY3JlYXRlZC4iKTtyZXR1cm4gdGhpcy5pc1NldEZpbHRlck1vZGVsVHJlZUl0ZW0oZSk/dGhpcy5uZXdTZXRUcmVlSXRlbUF0dHJpYnV0ZXMoZSx0KTplPT09YS5TRUxFQ1RfQUxMP3t2YWx1ZTooKT0+dGhpcy5nZXRTZWxlY3RBbGxMYWJlbCgpLHNlbGVjdGVkTGlzdGVuZXI6ZT0+dGhpcy5vblNlbGVjdEFsbChlLmlzU2VsZWN0ZWQpfTplPT09YS5BRERfU0VMRUNUSU9OX1RPX0ZJTFRFUj97dmFsdWU6KCk9PnRoaXMuZ2V0QWRkU2VsZWN0aW9uVG9GaWx0ZXJMYWJlbCgpLHNlbGVjdGVkTGlzdGVuZXI6ZT0+e3RoaXMub25BZGRDdXJyZW50U2VsZWN0aW9uVG9GaWx0ZXJDaGFuZ2UoZS5pc1NlbGVjdGVkKX19Ont2YWx1ZTp0aGlzLnZhbHVlTW9kZWwuZ2V0VmFsdWUoZSksc2VsZWN0ZWRMaXN0ZW5lcjplPT50aGlzLm9uSXRlbVNlbGVjdGVkKGUuaXRlbSxlLmlzU2VsZWN0ZWQpfX11cGRhdGVTZXRMaXN0SXRlbShlLHQpe2NvbnN0e2lzU2VsZWN0ZWQ6aSxpc0V4cGFuZGVkOnN9PXRoaXMuaXNTZWxlY3RlZEV4cGFuZGVkKGUpO3QucmVmcmVzaChlLGkscyl9aXNTZWxlY3RlZEV4cGFuZGVkKGUpe2xldCB0LGk7cmV0dXJuIHRoaXMuaXNTZXRGaWx0ZXJNb2RlbFRyZWVJdGVtKGUpPyhpPWUuZXhwYW5kZWQsdD1lLmtleT09PWEuU0VMRUNUX0FMTD90aGlzLmlzU2VsZWN0QWxsU2VsZWN0ZWQoKTplLmtleT09PWEuQUREX1NFTEVDVElPTl9UT19GSUxURVI/dGhpcy52YWx1ZU1vZGVsLmlzQWRkQ3VycmVudFNlbGVjdGlvblRvRmlsdGVyQ2hlY2tlZCgpOmUuY2hpbGRyZW4/dGhpcy5hcmVBbGxDaGlsZHJlblNlbGVjdGVkKGUpOnRoaXMudmFsdWVNb2RlbC5pc0tleVNlbGVjdGVkKGUua2V5KSk6dD1lPT09YS5TRUxFQ1RfQUxMP3RoaXMuaXNTZWxlY3RBbGxTZWxlY3RlZCgpOmU9PT1hLkFERF9TRUxFQ1RJT05fVE9fRklMVEVSP3RoaXMudmFsdWVNb2RlbC5pc0FkZEN1cnJlbnRTZWxlY3Rpb25Ub0ZpbHRlckNoZWNrZWQoKTp0aGlzLnZhbHVlTW9kZWwuaXNLZXlTZWxlY3RlZChlKSx7aXNTZWxlY3RlZDp0LGlzRXhwYW5kZWQ6aX19aXNTZXRGaWx0ZXJNb2RlbFRyZWVJdGVtKGUpe3JldHVybiB2b2lkIDAhPT0obnVsbD09ZT92b2lkIDA6ZS50cmVlS2V5KX1pbml0TWluaUZpbHRlcigpe2lmKCF0aGlzLnNldEZpbHRlclBhcmFtcyl0aHJvdyBuZXcgRXJyb3IoIlNldCBmaWx0ZXIgcGFyYW1zIGhhdmUgbm90IGJlZW4gcHJvdmlkZWQuIik7aWYoIXRoaXMudmFsdWVNb2RlbCl0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG1vZGVsIGhhcyBub3QgYmVlbiBjcmVhdGVkLiIpO2NvbnN0e2VNaW5pRmlsdGVyOmUsbG9jYWxlU2VydmljZTp0fT10aGlzLGk9dC5nZXRMb2NhbGVUZXh0RnVuYygpO2Uuc2V0RGlzcGxheWVkKCF0aGlzLnNldEZpbHRlclBhcmFtcy5zdXBwcmVzc01pbmlGaWx0ZXIpLGUuc2V0VmFsdWUodGhpcy52YWx1ZU1vZGVsLmdldE1pbmlGaWx0ZXIoKSksZS5vblZhbHVlQ2hhbmdlKCgpPT50aGlzLm9uTWluaUZpbHRlcklucHV0KCkpLGUuc2V0SW5wdXRBcmlhTGFiZWwoaSgiYXJpYVNlYXJjaEZpbHRlclZhbHVlcyIsIlNlYXJjaCBmaWx0ZXIgdmFsdWVzIikpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKGUuZ2V0SW5wdXRFbGVtZW50KCksImtleWRvd24iLGU9PnRoaXMub25NaW5pRmlsdGVyS2V5RG93bihlKSl9dXBkYXRlTWluaUZpbHRlcigpe2lmKCF0aGlzLnNldEZpbHRlclBhcmFtcyl0aHJvdyBuZXcgRXJyb3IoIlNldCBmaWx0ZXIgcGFyYW1zIGhhdmUgbm90IGJlZW4gcHJvdmlkZWQuIik7aWYoIXRoaXMudmFsdWVNb2RlbCl0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG1vZGVsIGhhcyBub3QgYmVlbiBjcmVhdGVkLiIpO2NvbnN0e2VNaW5pRmlsdGVyOmV9PXRoaXM7ZS5pc0Rpc3BsYXllZCgpIT09IXRoaXMuc2V0RmlsdGVyUGFyYW1zLnN1cHByZXNzTWluaUZpbHRlciYmZS5zZXREaXNwbGF5ZWQoIXRoaXMuc2V0RmlsdGVyUGFyYW1zLnN1cHByZXNzTWluaUZpbHRlcik7Y29uc3QgdD10aGlzLnZhbHVlTW9kZWwuZ2V0TWluaUZpbHRlcigpO2UuZ2V0VmFsdWUoKSE9PXQmJmUuc2V0VmFsdWUodCl9YWZ0ZXJHdWlBdHRhY2hlZChlKXtpZighdGhpcy5zZXRGaWx0ZXJQYXJhbXMpdGhyb3cgbmV3IEVycm9yKCJTZXQgZmlsdGVyIHBhcmFtcyBoYXZlIG5vdCBiZWVuIHByb3ZpZGVkLiIpO3N1cGVyLmFmdGVyR3VpQXR0YWNoZWQoZSksdGhpcy5yZXNldEV4cGFuc2lvbigpLHRoaXMucmVmcmVzaFZpcnR1YWxMaXN0KCk7Y29uc3R7ZU1pbmlGaWx0ZXI6dH09dGhpczt0LnNldElucHV0UGxhY2Vob2xkZXIodGhpcy50cmFuc2xhdGVGb3JTZXRGaWx0ZXIoInNlYXJjaE9vbyIpKSxlJiZlLnN1cHByZXNzRm9jdXN8fHQuZ2V0Rm9jdXNhYmxlRWxlbWVudCgpLmZvY3VzKCl9YWZ0ZXJHdWlEZXRhY2hlZCgpe3ZhciBlLHQ7c3VwZXIuYWZ0ZXJHdWlEZXRhY2hlZCgpLChudWxsPT09KGU9dGhpcy5zZXRGaWx0ZXJQYXJhbXMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmV4Y2VsTW9kZSkmJnRoaXMucmVzZXRNaW5pRmlsdGVyKCk7Y29uc3QgaT10aGlzLmdldE1vZGVsKCk7IShudWxsPT09KHQ9dGhpcy5zZXRGaWx0ZXJQYXJhbXMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmV4Y2VsTW9kZSkmJnRoaXMuYXJlTW9kZWxzRXF1YWwoaSx0aGlzLmdldE1vZGVsRnJvbVVpKCkpfHwodGhpcy5yZXNldFVpVG9BY3RpdmVNb2RlbChpKSx0aGlzLnNob3dPckhpZGVSZXN1bHRzKCkpfWFwcGx5TW9kZWwoZT0iYXBpIil7aWYoIXRoaXMuc2V0RmlsdGVyUGFyYW1zKXRocm93IG5ldyBFcnJvcigiU2V0IGZpbHRlciBwYXJhbXMgaGF2ZSBub3QgYmVlbiBwcm92aWRlZC4iKTtpZighdGhpcy52YWx1ZU1vZGVsKXRocm93IG5ldyBFcnJvcigiVmFsdWUgbW9kZWwgaGFzIG5vdCBiZWVuIGNyZWF0ZWQuIik7dGhpcy5zZXRGaWx0ZXJQYXJhbXMuZXhjZWxNb2RlJiYicm93RGF0YVVwZGF0ZWQiIT09ZSYmdGhpcy52YWx1ZU1vZGVsLmlzRXZlcnl0aGluZ1Zpc2libGVTZWxlY3RlZCgpJiZ0aGlzLnZhbHVlTW9kZWwuc2VsZWN0QWxsTWF0Y2hpbmdNaW5pRmlsdGVyKCk7Y29uc3QgdD10aGlzLnZhbHVlTW9kZWwuc2hvd0FkZEN1cnJlbnRTZWxlY3Rpb25Ub0ZpbHRlcigpJiZ0aGlzLnZhbHVlTW9kZWwuaXNBZGRDdXJyZW50U2VsZWN0aW9uVG9GaWx0ZXJDaGVja2VkKCk7aWYodCYmIXRoaXMuZ2V0TW9kZWwoKSlyZXR1cm4hMTtjb25zdCBpPXN1cGVyLmFwcGx5TW9kZWwoZSkscz10aGlzLmdldE1vZGVsKCk7cmV0dXJuIHM/KHR8fHRoaXMudmFsdWVNb2RlbC5zZXRBcHBsaWVkTW9kZWxLZXlzKG5ldyBTZXQpLHMudmFsdWVzLmZvckVhY2goZT0+e3RoaXMudmFsdWVNb2RlbC5hZGRUb0FwcGxpZWRNb2RlbEtleXMoZSl9KSk6dHx8dGhpcy52YWx1ZU1vZGVsLnNldEFwcGxpZWRNb2RlbEtleXMobnVsbCksaX1pc01vZGVsVmFsaWQoZSl7cmV0dXJuIXRoaXMuc2V0RmlsdGVyUGFyYW1zfHwhdGhpcy5zZXRGaWx0ZXJQYXJhbXMuZXhjZWxNb2RlfHwobnVsbD09ZXx8ZS52YWx1ZXMubGVuZ3RoPjApfWRvZXNGaWx0ZXJQYXNzKGUpe2lmKCF0aGlzLnNldEZpbHRlclBhcmFtc3x8IXRoaXMudmFsdWVNb2RlbHx8IXRoaXMudmFsdWVNb2RlbC5nZXRDYXNlRm9ybWF0dGVkQXBwbGllZE1vZGVsS2V5cygpKXJldHVybiEwO2lmKCF0aGlzLnZhbHVlTW9kZWwuaGFzQW55QXBwbGllZE1vZGVsS2V5KCkpcmV0dXJuITE7Y29uc3R7bm9kZTp0LGRhdGE6aX09ZTtpZih0aGlzLnRyZWVEYXRhVHJlZUxpc3QpcmV0dXJuIHRoaXMuZG9lc0ZpbHRlclBhc3NGb3JUcmVlRGF0YSh0LGkpO2lmKHRoaXMuZ3JvdXBpbmdUcmVlTGlzdClyZXR1cm4gdGhpcy5kb2VzRmlsdGVyUGFzc0Zvckdyb3VwaW5nKHQpO2xldCBzPXRoaXMuZ2V0VmFsdWVGcm9tTm9kZSh0KTtyZXR1cm4gdGhpcy5jb252ZXJ0VmFsdWVzVG9TdHJpbmdzP3RoaXMuZG9lc0ZpbHRlclBhc3NGb3JDb252ZXJ0VmFsdWVzVG9TdHJpbmcodCxzKTpudWxsIT1zJiZBcnJheS5pc0FycmF5KHMpPzA9PT1zLmxlbmd0aD90aGlzLnZhbHVlTW9kZWwuaGFzQXBwbGllZE1vZGVsS2V5KG51bGwpOnMuc29tZShlPT50aGlzLmlzSW5BcHBsaWVkTW9kZWwodGhpcy5jcmVhdGVLZXkoZSx0KSkpOnRoaXMuaXNJbkFwcGxpZWRNb2RlbCh0aGlzLmNyZWF0ZUtleShzLHQpKX1kb2VzRmlsdGVyUGFzc0ZvckNvbnZlcnRWYWx1ZXNUb1N0cmluZyhlLHQpe2NvbnN0IGk9dGhpcy5jcmVhdGVLZXkodCxlKTtyZXR1cm4gbnVsbCE9aSYmQXJyYXkuaXNBcnJheShpKT8wPT09aS5sZW5ndGg/dGhpcy52YWx1ZU1vZGVsLmhhc0FwcGxpZWRNb2RlbEtleShudWxsKTppLnNvbWUoZT0+dGhpcy5pc0luQXBwbGllZE1vZGVsKGUpKTp0aGlzLmlzSW5BcHBsaWVkTW9kZWwoaSl9ZG9lc0ZpbHRlclBhc3NGb3JUcmVlRGF0YShlLHQpe3ZhciBpO3JldHVybiEobnVsbD09PShpPWUuY2hpbGRyZW5BZnRlckdyb3VwKXx8dm9pZCAwPT09aT92b2lkIDA6aS5sZW5ndGgpJiZ0aGlzLmlzSW5BcHBsaWVkTW9kZWwodGhpcy5jcmVhdGVLZXkodGhpcy5jaGVja01ha2VOdWxsRGF0YVBhdGgodGhpcy5nZXREYXRhUGF0aCh0KSkpKX1kb2VzRmlsdGVyUGFzc0Zvckdyb3VwaW5nKGUpe2NvbnN0IHQ9dGhpcy5jb2x1bW5Nb2RlbC5nZXRSb3dHcm91cENvbHVtbnMoKS5tYXAodD0+dGhpcy52YWx1ZVNlcnZpY2UuZ2V0S2V5Rm9yTm9kZSh0LGUpKTtyZXR1cm4gdC5wdXNoKHRoaXMuZ2V0VmFsdWVGcm9tTm9kZShlKSksdGhpcy5pc0luQXBwbGllZE1vZGVsKHRoaXMuY3JlYXRlS2V5KHRoaXMuY2hlY2tNYWtlTnVsbERhdGFQYXRoKHQpKSl9Y2hlY2tNYWtlTnVsbERhdGFQYXRoKGUpe3JldHVybiBlJiYoZT1lLm1hcChlPT5yLl8udG9TdHJpbmdPck51bGwoci5fLm1ha2VOdWxsKGUpKSkpLChudWxsPT1lP3ZvaWQgMDplLnNvbWUoZT0+bnVsbD09ZSkpP251bGw6ZX1pc0luQXBwbGllZE1vZGVsKGUpe3JldHVybiB0aGlzLnZhbHVlTW9kZWwuaGFzQXBwbGllZE1vZGVsS2V5KGUpfWdldFZhbHVlRnJvbU5vZGUoZSl7cmV0dXJuIHRoaXMuc2V0RmlsdGVyUGFyYW1zLmdldFZhbHVlKGUpfWdldEtleUNyZWF0b3JQYXJhbXMoZSx0PW51bGwpe3JldHVybnt2YWx1ZTplLGNvbERlZjp0aGlzLnNldEZpbHRlclBhcmFtcy5jb2xEZWYsY29sdW1uOnRoaXMuc2V0RmlsdGVyUGFyYW1zLmNvbHVtbixub2RlOnQsZGF0YTpudWxsPT10P3ZvaWQgMDp0LmRhdGEsYXBpOnRoaXMuc2V0RmlsdGVyUGFyYW1zLmFwaSxjb2x1bW5BcGk6dGhpcy5zZXRGaWx0ZXJQYXJhbXMuY29sdW1uQXBpLGNvbnRleHQ6dGhpcy5zZXRGaWx0ZXJQYXJhbXMuY29udGV4dH19b25OZXdSb3dzTG9hZGVkKCl7dGhpcy5pc1ZhbHVlc1Rha2VuRnJvbUdyaWQoKSYmdGhpcy5zeW5jQWZ0ZXJEYXRhQ2hhbmdlKCl9aXNWYWx1ZXNUYWtlbkZyb21HcmlkKCl7aWYoIXRoaXMudmFsdWVNb2RlbClyZXR1cm4hMTtyZXR1cm4gdGhpcy52YWx1ZU1vZGVsLmdldFZhbHVlc1R5cGUoKT09PXMuVEFLRU5fRlJPTV9HUklEX1ZBTFVFU31zZXRGaWx0ZXJWYWx1ZXMoZSl7aWYoIXRoaXMudmFsdWVNb2RlbCl0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG1vZGVsIGhhcyBub3QgYmVlbiBjcmVhdGVkLiIpO3RoaXMudmFsdWVNb2RlbC5vdmVycmlkZVZhbHVlcyhlKS50aGVuKCgpPT57dGhpcy5jaGVja0FuZFJlZnJlc2hWaXJ0dWFsTGlzdCgpLHRoaXMub25VaUNoYW5nZWQoKX0pfXJlc2V0RmlsdGVyVmFsdWVzKCl7aWYoIXRoaXMudmFsdWVNb2RlbCl0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG1vZGVsIGhhcyBub3QgYmVlbiBjcmVhdGVkLiIpO3RoaXMudmFsdWVNb2RlbC5zZXRWYWx1ZXNUeXBlKHMuVEFLRU5fRlJPTV9HUklEX1ZBTFVFUyksdGhpcy5zeW5jQWZ0ZXJEYXRhQ2hhbmdlKCl9cmVmcmVzaEZpbHRlclZhbHVlcygpe2lmKCF0aGlzLnZhbHVlTW9kZWwpdGhyb3cgbmV3IEVycm9yKCJWYWx1ZSBtb2RlbCBoYXMgbm90IGJlZW4gY3JlYXRlZC4iKTt0aGlzLnZhbHVlTW9kZWwuaXNJbml0aWFsaXNlZCgpJiZ0aGlzLnZhbHVlTW9kZWwucmVmcmVzaFZhbHVlcygpLnRoZW4oKCk9Pnt0aGlzLmNoZWNrQW5kUmVmcmVzaFZpcnR1YWxMaXN0KCksdGhpcy5vblVpQ2hhbmdlZCgpfSl9b25BbnlGaWx0ZXJDaGFuZ2VkKCl7c2V0VGltZW91dCgoKT0+e2lmKHRoaXMuaXNBbGl2ZSgpKXtpZighdGhpcy52YWx1ZU1vZGVsKXRocm93IG5ldyBFcnJvcigiVmFsdWUgbW9kZWwgaGFzIG5vdCBiZWVuIGNyZWF0ZWQuIik7dGhpcy52YWx1ZU1vZGVsLnJlZnJlc2hBZnRlckFueUZpbHRlckNoYW5nZWQoKS50aGVuKGU9PntlJiYodGhpcy5jaGVja0FuZFJlZnJlc2hWaXJ0dWFsTGlzdCgpLHRoaXMuc2hvd09ySGlkZVJlc3VsdHMoKSl9KX19LDApfW9uTWluaUZpbHRlcklucHV0KCl7aWYoIXRoaXMuc2V0RmlsdGVyUGFyYW1zKXRocm93IG5ldyBFcnJvcigiU2V0IGZpbHRlciBwYXJhbXMgaGF2ZSBub3QgYmVlbiBwcm92aWRlZC4iKTtpZighdGhpcy52YWx1ZU1vZGVsKXRocm93IG5ldyBFcnJvcigiVmFsdWUgbW9kZWwgaGFzIG5vdCBiZWVuIGNyZWF0ZWQuIik7aWYoIXRoaXMudmFsdWVNb2RlbC5zZXRNaW5pRmlsdGVyKHRoaXMuZU1pbmlGaWx0ZXIuZ2V0VmFsdWUoKSkpcmV0dXJuO2NvbnN0e2FwcGx5TWluaUZpbHRlcldoaWxlVHlwaW5nOmUscmVhZE9ubHk6dH09dGhpcy5zZXRGaWx0ZXJQYXJhbXN8fHt9OyF0JiZlP3RoaXMuZmlsdGVyT25BbGxWaXNpYmxlVmFsdWVzKCExKTp0aGlzLnVwZGF0ZVVpQWZ0ZXJNaW5pRmlsdGVyQ2hhbmdlKCl9dXBkYXRlVWlBZnRlck1pbmlGaWx0ZXJDaGFuZ2UoKXtpZighdGhpcy5zZXRGaWx0ZXJQYXJhbXMpdGhyb3cgbmV3IEVycm9yKCJTZXQgZmlsdGVyIHBhcmFtcyBoYXZlIG5vdCBiZWVuIHByb3ZpZGVkLiIpO2lmKCF0aGlzLnZhbHVlTW9kZWwpdGhyb3cgbmV3IEVycm9yKCJWYWx1ZSBtb2RlbCBoYXMgbm90IGJlZW4gY3JlYXRlZC4iKTtjb25zdHtleGNlbE1vZGU6ZSxyZWFkT25seTp0fT10aGlzLnNldEZpbHRlclBhcmFtc3x8e307bnVsbD09ZXx8dD90aGlzLmNoZWNrQW5kUmVmcmVzaFZpcnR1YWxMaXN0KCk6bnVsbD09dGhpcy52YWx1ZU1vZGVsLmdldE1pbmlGaWx0ZXIoKT90aGlzLnJlc2V0VWlUb0FjdGl2ZU1vZGVsKHRoaXMuZ2V0TW9kZWwoKSk6KHRoaXMudmFsdWVNb2RlbC5zZWxlY3RBbGxNYXRjaGluZ01pbmlGaWx0ZXIoITApLHRoaXMuY2hlY2tBbmRSZWZyZXNoVmlydHVhbExpc3QoKSx0aGlzLm9uVWlDaGFuZ2VkKCkpLHRoaXMuc2hvd09ySGlkZVJlc3VsdHMoKX1zaG93T3JIaWRlUmVzdWx0cygpe2lmKCF0aGlzLnZhbHVlTW9kZWwpdGhyb3cgbmV3IEVycm9yKCJWYWx1ZSBtb2RlbCBoYXMgbm90IGJlZW4gY3JlYXRlZC4iKTtjb25zdCBlPW51bGwhPXRoaXMudmFsdWVNb2RlbC5nZXRNaW5pRmlsdGVyKCkmJnRoaXMudmFsdWVNb2RlbC5nZXREaXNwbGF5ZWRWYWx1ZUNvdW50KCk8MTtyLl8uc2V0RGlzcGxheWVkKHRoaXMuZU5vTWF0Y2hlcyxlKSxyLl8uc2V0RGlzcGxheWVkKHRoaXMuZVNldEZpbHRlckxpc3QsIWUpfXJlc2V0TWluaUZpbHRlcigpe3ZhciBlO3RoaXMuZU1pbmlGaWx0ZXIuc2V0VmFsdWUobnVsbCwhMCksbnVsbD09PShlPXRoaXMudmFsdWVNb2RlbCl8fHZvaWQgMD09PWV8fGUuc2V0TWluaUZpbHRlcihudWxsKX1yZXNldFVpVG9BY3RpdmVNb2RlbChlLHQpe3RoaXMuc2V0TW9kZWxBbmRSZWZyZXNoKG51bGw9PWU/bnVsbDplLnZhbHVlcykudGhlbigoKT0+e3RoaXMub25VaUNoYW5nZWQoITEsInByZXZlbnQiKSxudWxsPT10fHx0KCl9KX1oYW5kbGVDYW5jZWxFbmQoZSl7dGhpcy5zZXRNaW5pRmlsdGVyKG51bGwpLHN1cGVyLmhhbmRsZUNhbmNlbEVuZChlKX1vbk1pbmlGaWx0ZXJLZXlEb3duKGUpe2NvbnN0e2V4Y2VsTW9kZTp0LHJlYWRPbmx5Oml9PXRoaXMuc2V0RmlsdGVyUGFyYW1zfHx7fTtlLmtleSE9PXIuS2V5Q29kZS5FTlRFUnx8dHx8aXx8dGhpcy5maWx0ZXJPbkFsbFZpc2libGVWYWx1ZXMoKX1maWx0ZXJPbkFsbFZpc2libGVWYWx1ZXMoZT0hMCl7Y29uc3R7cmVhZE9ubHk6dH09dGhpcy5zZXRGaWx0ZXJQYXJhbXN8fHt9O2lmKCF0aGlzLnZhbHVlTW9kZWwpdGhyb3cgbmV3IEVycm9yKCJWYWx1ZSBtb2RlbCBoYXMgbm90IGJlZW4gY3JlYXRlZC4iKTtpZih0KXRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIGZpbHRlciBpbiByZWFkT25seSBtb2RlLiIpO3RoaXMudmFsdWVNb2RlbC5zZWxlY3RBbGxNYXRjaGluZ01pbmlGaWx0ZXIoITApLHRoaXMuY2hlY2tBbmRSZWZyZXNoVmlydHVhbExpc3QoKSx0aGlzLm9uVWlDaGFuZ2VkKCExLGU/ImltbWVkaWF0ZWx5IjoiZGVib3VuY2UiKSx0aGlzLnNob3dPckhpZGVSZXN1bHRzKCl9Zm9jdXNSb3dJZkFsaXZlKGUpe251bGwhPWUmJndpbmRvdy5zZXRUaW1lb3V0KCgpPT57aWYoIXRoaXMudmlydHVhbExpc3QpdGhyb3cgbmV3IEVycm9yKCJWaXJ0dWFsIGxpc3QgaGFzIG5vdCBiZWVuIGNyZWF0ZWQuIik7dGhpcy5pc0FsaXZlKCkmJnRoaXMudmlydHVhbExpc3QuZm9jdXNSb3coZSl9LDApfW9uU2VsZWN0QWxsKGUpe2lmKCF0aGlzLnZhbHVlTW9kZWwpdGhyb3cgbmV3IEVycm9yKCJWYWx1ZSBtb2RlbCBoYXMgbm90IGJlZW4gY3JlYXRlZC4iKTtpZighdGhpcy52aXJ0dWFsTGlzdCl0aHJvdyBuZXcgRXJyb3IoIlZpcnR1YWwgbGlzdCBoYXMgbm90IGJlZW4gY3JlYXRlZC4iKTtlP3RoaXMudmFsdWVNb2RlbC5zZWxlY3RBbGxNYXRjaGluZ01pbmlGaWx0ZXIoKTp0aGlzLnZhbHVlTW9kZWwuZGVzZWxlY3RBbGxNYXRjaGluZ01pbmlGaWx0ZXIoKSx0aGlzLnJlZnJlc2hBZnRlclNlbGVjdGlvbigpfW9uR3JvdXBJdGVtU2VsZWN0ZWQoZSx0KXtjb25zdCBpPWU9PntlLmNoaWxkcmVuP2UuY2hpbGRyZW4uZm9yRWFjaChlPT5pKGUpKTp0aGlzLnNlbGVjdEl0ZW0oZS5rZXksdCl9O2koZSksdGhpcy5yZWZyZXNoQWZ0ZXJTZWxlY3Rpb24oKX1vbkl0ZW1TZWxlY3RlZChlLHQpe2lmKCF0aGlzLnZhbHVlTW9kZWwpdGhyb3cgbmV3IEVycm9yKCJWYWx1ZSBtb2RlbCBoYXMgbm90IGJlZW4gY3JlYXRlZC4iKTtpZighdGhpcy52aXJ0dWFsTGlzdCl0aHJvdyBuZXcgRXJyb3IoIlZpcnR1YWwgbGlzdCBoYXMgbm90IGJlZW4gY3JlYXRlZC4iKTt0aGlzLnNlbGVjdEl0ZW0oZSx0KSx0aGlzLnJlZnJlc2hBZnRlclNlbGVjdGlvbigpfXNlbGVjdEl0ZW0oZSx0KXt0P3RoaXMudmFsdWVNb2RlbC5zZWxlY3RLZXkoZSk6dGhpcy52YWx1ZU1vZGVsLmRlc2VsZWN0S2V5KGUpfW9uRXhwYW5kQWxsKGUsdCl7Y29uc3QgaT1lPT57ZS5maWx0ZXJQYXNzZXMmJmUuYXZhaWxhYmxlJiZlLmNoaWxkcmVuJiYoZS5jaGlsZHJlbi5mb3JFYWNoKGU9PmkoZSkpLGUuZXhwYW5kZWQ9dCl9O2koZSksdGhpcy5yZWZyZXNoQWZ0ZXJFeHBhbnNpb24oKX1vbkV4cGFuZGVkQ2hhbmdlZChlLHQpe2UuZXhwYW5kZWQ9dCx0aGlzLnJlZnJlc2hBZnRlckV4cGFuc2lvbigpfXJlZnJlc2hBZnRlckV4cGFuc2lvbigpe2NvbnN0IGU9dGhpcy52aXJ0dWFsTGlzdC5nZXRMYXN0Rm9jdXNlZFJvdygpO3RoaXMudmFsdWVNb2RlbC51cGRhdGVEaXNwbGF5ZWRWYWx1ZXMoImV4cGFuc2lvbiIpLHRoaXMuY2hlY2tBbmRSZWZyZXNoVmlydHVhbExpc3QoKSx0aGlzLmZvY3VzUm93SWZBbGl2ZShlKX1yZWZyZXNoQWZ0ZXJTZWxlY3Rpb24oKXtjb25zdCBlPXRoaXMudmlydHVhbExpc3QuZ2V0TGFzdEZvY3VzZWRSb3coKTt0aGlzLmNoZWNrQW5kUmVmcmVzaFZpcnR1YWxMaXN0KCksdGhpcy5vblVpQ2hhbmdlZCgpLHRoaXMuZm9jdXNSb3dJZkFsaXZlKGUpfXNldE1pbmlGaWx0ZXIoZSl7dGhpcy5lTWluaUZpbHRlci5zZXRWYWx1ZShlKSx0aGlzLm9uTWluaUZpbHRlcklucHV0KCl9Z2V0TWluaUZpbHRlcigpe3JldHVybiB0aGlzLnZhbHVlTW9kZWw/dGhpcy52YWx1ZU1vZGVsLmdldE1pbmlGaWx0ZXIoKTpudWxsfWNoZWNrQW5kUmVmcmVzaFZpcnR1YWxMaXN0KCl7aWYoIXRoaXMudmlydHVhbExpc3QpdGhyb3cgbmV3IEVycm9yKCJWaXJ0dWFsIGxpc3QgaGFzIG5vdCBiZWVuIGNyZWF0ZWQuIik7dGhpcy52aXJ0dWFsTGlzdC5yZWZyZXNoKCF0aGlzLmhhcmRSZWZyZXNoVmlydHVhbExpc3QpLHRoaXMuaGFyZFJlZnJlc2hWaXJ0dWFsTGlzdCYmKHRoaXMuaGFyZFJlZnJlc2hWaXJ0dWFsTGlzdD0hMSl9Z2V0RmlsdGVyS2V5cygpe3JldHVybiB0aGlzLnZhbHVlTW9kZWw/dGhpcy52YWx1ZU1vZGVsLmdldEtleXMoKTpbXX1nZXRGaWx0ZXJWYWx1ZXMoKXtyZXR1cm4gdGhpcy52YWx1ZU1vZGVsP3RoaXMudmFsdWVNb2RlbC5nZXRWYWx1ZXMoKTpbXX1nZXRWYWx1ZXMoKXtyZXR1cm4gdGhpcy5nZXRGaWx0ZXJLZXlzKCl9cmVmcmVzaFZpcnR1YWxMaXN0KCl7dGhpcy5zZXRGaWx0ZXJQYXJhbXMmJnRoaXMuc2V0RmlsdGVyUGFyYW1zLnJlZnJlc2hWYWx1ZXNPbk9wZW4/dGhpcy5yZWZyZXNoRmlsdGVyVmFsdWVzKCk6dGhpcy5jaGVja0FuZFJlZnJlc2hWaXJ0dWFsTGlzdCgpfXRyYW5zbGF0ZUZvclNldEZpbHRlcihlKXtyZXR1cm4gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCkoZSxnW2VdKX1pc1NlbGVjdEFsbFNlbGVjdGVkKCl7aWYoIXRoaXMuc2V0RmlsdGVyUGFyYW1zfHwhdGhpcy52YWx1ZU1vZGVsKXJldHVybiExO2lmKHRoaXMuc2V0RmlsdGVyUGFyYW1zLmRlZmF1bHRUb05vdGhpbmdTZWxlY3RlZCl7aWYodGhpcy52YWx1ZU1vZGVsLmhhc1NlbGVjdGlvbnMoKSYmdGhpcy52YWx1ZU1vZGVsLmlzRXZlcnl0aGluZ1Zpc2libGVTZWxlY3RlZCgpKXJldHVybiEwO2lmKHRoaXMudmFsdWVNb2RlbC5pc05vdGhpbmdWaXNpYmxlU2VsZWN0ZWQoKSlyZXR1cm4hMX1lbHNle2lmKHRoaXMudmFsdWVNb2RlbC5oYXNTZWxlY3Rpb25zKCkmJnRoaXMudmFsdWVNb2RlbC5pc05vdGhpbmdWaXNpYmxlU2VsZWN0ZWQoKSlyZXR1cm4hMTtpZih0aGlzLnZhbHVlTW9kZWwuaXNFdmVyeXRoaW5nVmlzaWJsZVNlbGVjdGVkKCkpcmV0dXJuITB9fWFyZUFsbENoaWxkcmVuU2VsZWN0ZWQoZSl7Y29uc3QgdD1lPT57aWYoZS5jaGlsZHJlbil7bGV0IGk9ITEscz0hMTtyZXR1cm4gZS5jaGlsZHJlbi5zb21lKGU9PntpZighZS5maWx0ZXJQYXNzZXN8fCFlLmF2YWlsYWJsZSlyZXR1cm4hMTtjb25zdCByPXQoZSk7cmV0dXJuIHZvaWQgMD09PXJ8fChyP2k9ITA6cz0hMCxpJiZzKX0pP3ZvaWQgMDppfXJldHVybiB0aGlzLnZhbHVlTW9kZWwuaXNLZXlTZWxlY3RlZChlLmtleSl9O3JldHVybiB0aGlzLnNldEZpbHRlclBhcmFtcy5kZWZhdWx0VG9Ob3RoaW5nU2VsZWN0ZWQ/dGhpcy52YWx1ZU1vZGVsLmhhc1NlbGVjdGlvbnMoKSYmdChlKTp0KGUpfWRlc3Ryb3koKXtudWxsIT10aGlzLnZpcnR1YWxMaXN0JiYodGhpcy52aXJ0dWFsTGlzdC5kZXN0cm95KCksdGhpcy52aXJ0dWFsTGlzdD1udWxsKSxzdXBlci5kZXN0cm95KCl9Y2FzZUZvcm1hdChlKXtyZXR1cm4gbnVsbD09ZXx8InN0cmluZyIhPXR5cGVvZiBlfHx0aGlzLmNhc2VTZW5zaXRpdmU/ZTplLnRvVXBwZXJDYXNlKCl9cmVzZXRFeHBhbnNpb24oKXt2YXIgZSx0O2lmKCEobnVsbD09PShlPXRoaXMuc2V0RmlsdGVyUGFyYW1zKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS50cmVlTGlzdCkpcmV0dXJuO2NvbnN0IGk9bnVsbD09PSh0PXRoaXMudmFsdWVNb2RlbCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0U2VsZWN0QWxsSXRlbSgpO2lmKHRoaXMuaXNTZXRGaWx0ZXJNb2RlbFRyZWVJdGVtKGkpKXtjb25zdCBlPXQ9Pnt0LmNoaWxkcmVuJiYodC5jaGlsZHJlbi5mb3JFYWNoKHQ9PmUodCkpLHQuZXhwYW5kZWQ9ITEpfTtlKGkpLHRoaXMudmFsdWVNb2RlbC51cGRhdGVEaXNwbGF5ZWRWYWx1ZXMoImV4cGFuc2lvbiIpfX1nZXRNb2RlbEFzU3RyaW5nKGUpe3JldHVybiB0aGlzLmZpbHRlck1vZGVsRm9ybWF0dGVyLmdldE1vZGVsQXNTdHJpbmcoZSx0aGlzKX1nZXRQb3NpdGlvbmFibGVFbGVtZW50KCl7cmV0dXJuIHRoaXMuZVNldEZpbHRlckxpc3R9fWYoW09iamVjdChyLlJlZlNlbGVjdG9yKSgiZU1pbmlGaWx0ZXIiKV0sdi5wcm90b3R5cGUsImVNaW5pRmlsdGVyIix2b2lkIDApLGYoW09iamVjdChyLlJlZlNlbGVjdG9yKSgiZUZpbHRlckxvYWRpbmciKV0sdi5wcm90b3R5cGUsImVGaWx0ZXJMb2FkaW5nIix2b2lkIDApLGYoW09iamVjdChyLlJlZlNlbGVjdG9yKSgiZVNldEZpbHRlckxpc3QiKV0sdi5wcm90b3R5cGUsImVTZXRGaWx0ZXJMaXN0Iix2b2lkIDApLGYoW09iamVjdChyLlJlZlNlbGVjdG9yKSgiZUZpbHRlck5vTWF0Y2hlcyIpXSx2LnByb3RvdHlwZSwiZU5vTWF0Y2hlcyIsdm9pZCAwKSxmKFtPYmplY3Qoci5BdXRvd2lyZWQpKCJ2YWx1ZUZvcm1hdHRlclNlcnZpY2UiKV0sdi5wcm90b3R5cGUsInZhbHVlRm9ybWF0dGVyU2VydmljZSIsdm9pZCAwKSxmKFtPYmplY3Qoci5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSx2LnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksZihbT2JqZWN0KHIuQXV0b3dpcmVkKSgidmFsdWVTZXJ2aWNlIildLHYucHJvdG90eXBlLCJ2YWx1ZVNlcnZpY2UiLHZvaWQgMCk7Y2xhc3MgQ3tjb25zdHJ1Y3RvcihlKXt0aGlzLm1vZGVsPWV9Z2V0Um93Q291bnQoKXtyZXR1cm4gdGhpcy5tb2RlbC5nZXREaXNwbGF5ZWRWYWx1ZUNvdW50KCl9Z2V0Um93KGUpe3JldHVybiB0aGlzLm1vZGVsLmdldERpc3BsYXllZEl0ZW0oZSl9YXJlUm93c0VxdWFsKGUsdCl7cmV0dXJuIGU9PT10fX1jbGFzcyB5e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5tb2RlbD1lLHRoaXMuaXNTZWxlY3RBbGxTZWxlY3RlZD10fWdldFJvd0NvdW50KCl7Y29uc3QgZT10aGlzLm1vZGVsLnNob3dBZGRDdXJyZW50U2VsZWN0aW9uVG9GaWx0ZXIoKT8yOjE7cmV0dXJuIHRoaXMubW9kZWwuZ2V0RGlzcGxheWVkVmFsdWVDb3VudCgpK2V9Z2V0Um93KGUpe2lmKDA9PT1lKXJldHVybiB0aGlzLm1vZGVsLmdldFNlbGVjdEFsbEl0ZW0oKTtjb25zdCB0PXRoaXMubW9kZWwuc2hvd0FkZEN1cnJlbnRTZWxlY3Rpb25Ub0ZpbHRlcigpLGk9dD8yOjE7cmV0dXJuIDE9PT1lJiZ0P3RoaXMubW9kZWwuZ2V0QWRkU2VsZWN0aW9uVG9GaWx0ZXJJdGVtKCk6dGhpcy5tb2RlbC5nZXREaXNwbGF5ZWRJdGVtKGUtaSl9YXJlUm93c0VxdWFsKGUsdCl7cmV0dXJuIGU9PT10fX1jbGFzcyBTe2NvbnN0cnVjdG9yKGUpe3RoaXMubW9kZWw9ZX1nZXRSb3dDb3VudCgpe3JldHVybiB0aGlzLm1vZGVsLmdldFJvd0NvdW50KCl9Z2V0Um93KGUpe3JldHVybiB0aGlzLm1vZGVsLmdldFJvdyhlKX1hcmVSb3dzRXF1YWwoZSx0KXtyZXR1cm4gbnVsbD09ZSYmbnVsbD09dHx8bnVsbCE9ZSYmbnVsbCE9dCYmZS50cmVlS2V5PT09dC50cmVlS2V5JiZlLmRlcHRoPT09dC5kZXB0aH19dmFyIHc9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgYiBleHRlbmRzIHIuQ29tcG9uZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoJ1xuICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWctZmxvYXRpbmctZmlsdGVyLWlucHV0IGFnLXNldC1mbG9hdGluZy1maWx0ZXItaW5wdXQiIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICAgICAgPGFnLWlucHV0LXRleHQtZmllbGQgcmVmPSJlRmxvYXRpbmdGaWx0ZXJUZXh0Ij48L2FnLWlucHV0LXRleHQtZmllbGQ+XG4gICAgICAgICAgICA8L2Rpdj4nKSx0aGlzLmF2YWlsYWJsZVZhbHVlc0xpc3RlbmVyQWRkZWQ9ITEsdGhpcy5maWx0ZXJNb2RlbEZvcm1hdHRlcj1uZXcgbX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpfWluaXQoZSl7dGhpcy5wYXJhbXM9ZSx0aGlzLmVGbG9hdGluZ0ZpbHRlclRleHQuc2V0RGlzYWJsZWQoITApLmFkZEd1aUV2ZW50TGlzdGVuZXIoImNsaWNrIiwoKT0+dGhpcy5wYXJhbXMuc2hvd1BhcmVudEZpbHRlcigpKSx0aGlzLnNldFBhcmFtcyhlKX1zZXRQYXJhbXMoZSl7Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXlOYW1lRm9yQ29sdW1uKGUuY29sdW1uLCJoZWFkZXIiLCEwKSxpPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpO3RoaXMuZUZsb2F0aW5nRmlsdGVyVGV4dC5zZXRJbnB1dEFyaWFMYWJlbChgJHt0fSAke2koImFyaWFGaWx0ZXJJbnB1dCIsIkZpbHRlciBJbnB1dCIpfWApfW9uUGFyYW1zVXBkYXRlZChlKXt0aGlzLnJlZnJlc2goZSl9cmVmcmVzaChlKXt0aGlzLnBhcmFtcz1lLHRoaXMuc2V0UGFyYW1zKGUpfW9uUGFyZW50TW9kZWxDaGFuZ2VkKGUpe3RoaXMudXBkYXRlRmxvYXRpbmdGaWx0ZXJUZXh0KGUpfXBhcmVudFNldEZpbHRlckluc3RhbmNlKGUpe3RoaXMucGFyYW1zLnBhcmVudEZpbHRlckluc3RhbmNlKHQ9PntpZighKHQgaW5zdGFuY2VvZiB2KSl0aHJvdyBuZXcgRXJyb3IoIkFHIEdyaWQgLSBTZXRGbG9hdGluZ0ZpbHRlciBleHBlY3RzIFNldEZpbHRlciBhcyBpdHMgcGFyZW50Iik7ZSh0KX0pfWFkZEF2YWlsYWJsZVZhbHVlc0xpc3RlbmVyKCl7dGhpcy5wYXJlbnRTZXRGaWx0ZXJJbnN0YW5jZShlPT57Y29uc3QgdD1lLmdldFZhbHVlTW9kZWwoKTt0JiZ0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0LGguRVZFTlRfQVZBSUxBQkxFX1ZBTFVFU19DSEFOR0VELCgpPT50aGlzLnVwZGF0ZUZsb2F0aW5nRmlsdGVyVGV4dCgpKX0pLHRoaXMuYXZhaWxhYmxlVmFsdWVzTGlzdGVuZXJBZGRlZD0hMH11cGRhdGVGbG9hdGluZ0ZpbHRlclRleHQoZSl7dGhpcy5hdmFpbGFibGVWYWx1ZXNMaXN0ZW5lckFkZGVkfHx0aGlzLmFkZEF2YWlsYWJsZVZhbHVlc0xpc3RlbmVyKCksdGhpcy5wYXJlbnRTZXRGaWx0ZXJJbnN0YW5jZSh0PT57dGhpcy5lRmxvYXRpbmdGaWx0ZXJUZXh0LnNldFZhbHVlKHRoaXMuZmlsdGVyTW9kZWxGb3JtYXR0ZXIuZ2V0TW9kZWxBc1N0cmluZyhlLHQpKX0pfX13KFtPYmplY3Qoci5SZWZTZWxlY3RvcikoImVGbG9hdGluZ0ZpbHRlclRleHQiKV0sYi5wcm90b3R5cGUsImVGbG9hdGluZ0ZpbHRlclRleHQiLHZvaWQgMCksdyhbT2JqZWN0KHIuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sYi5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApO2NvbnN0IEU9e3ZlcnNpb246IjMxLjEuMSIsbW9kdWxlTmFtZTpyLk1vZHVsZU5hbWVzLlNldEZpbHRlck1vZHVsZSxiZWFuczpbXSx1c2VyQ29tcG9uZW50czpbe2NvbXBvbmVudE5hbWU6ImFnU2V0Q29sdW1uRmlsdGVyIixjb21wb25lbnRDbGFzczp2fSx7Y29tcG9uZW50TmFtZToiYWdTZXRDb2x1bW5GbG9hdGluZ0ZpbHRlciIsY29tcG9uZW50Q2xhc3M6Yn1dLGRlcGVuZGFudE1vZHVsZXM6W28uRW50ZXJwcmlzZUNvcmVNb2R1bGVdfTtpLmQodCwiU2V0RmlsdGVyTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gRX0pKSxpLmQodCwiU2V0RmlsdGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gdn0pKX0sZnVuY3Rpb24oZSx0LGkpeyJ1c2Ugc3RyaWN0IjtpLnIodCk7dmFyIHM9aSgwKSxyPWkoMyksbz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgbj1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuYWxsQ29tcG9uZW50cz1uZXcgTWFwfXJlZ2lzdGVyU3RhdHVzUGFuZWwoZSx0KXt0aGlzLmFsbENvbXBvbmVudHMuc2V0KGUsdCl9dW5yZWdpc3RlclN0YXR1c1BhbmVsKGUpe3RoaXMuYWxsQ29tcG9uZW50cy5kZWxldGUoZSl9dW5yZWdpc3RlckFsbENvbXBvbmVudHMoKXt0aGlzLmFsbENvbXBvbmVudHMuY2xlYXIoKX1nZXRTdGF0dXNQYW5lbChlKXtyZXR1cm4gdGhpcy5hbGxDb21wb25lbnRzLmdldChlKX1kZXN0cm95KCl7dGhpcy51bnJlZ2lzdGVyQWxsQ29tcG9uZW50cygpLHN1cGVyLmRlc3Ryb3koKX19O249byhbT2JqZWN0KHMuQmVhbikoInN0YXR1c0JhclNlcnZpY2UiKV0sbik7dmFyIGE9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgbCBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIobC5URU1QTEFURSksdGhpcy5jb21wRGVzdHJveUZ1bmN0aW9ucz17fX1wb3N0Q29uc3RydWN0KCl7dGhpcy5wcm9jZXNzU3RhdHVzUGFuZWxzKG5ldyBNYXApLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXJzKFsic3RhdHVzQmFyIl0sdGhpcy5oYW5kbGVTdGF0dXNCYXJDaGFuZ2VkLmJpbmQodGhpcykpfXByb2Nlc3NTdGF0dXNQYW5lbHMoZSl7dmFyIHQ7Y29uc3QgaT1udWxsPT09KHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdGF0dXNCYXIiKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc3RhdHVzUGFuZWxzO2lmKGkpe2NvbnN0IHQ9aS5maWx0ZXIoZT0+ImxlZnQiPT09ZS5hbGlnbik7dGhpcy5jcmVhdGVBbmRSZW5kZXJDb21wb25lbnRzKHQsdGhpcy5lU3RhdHVzQmFyTGVmdCxlKTtjb25zdCBzPWkuZmlsdGVyKGU9PiJjZW50ZXIiPT09ZS5hbGlnbik7dGhpcy5jcmVhdGVBbmRSZW5kZXJDb21wb25lbnRzKHMsdGhpcy5lU3RhdHVzQmFyQ2VudGVyLGUpO2NvbnN0IHI9aS5maWx0ZXIoZT0+IWUuYWxpZ258fCJyaWdodCI9PT1lLmFsaWduKTt0aGlzLmNyZWF0ZUFuZFJlbmRlckNvbXBvbmVudHMocix0aGlzLmVTdGF0dXNCYXJSaWdodCxlKX1lbHNlIHRoaXMuc2V0RGlzcGxheWVkKCExKX1oYW5kbGVTdGF0dXNCYXJDaGFuZ2VkKCl7dmFyIGU7Y29uc3QgdD1udWxsPT09KGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdGF0dXNCYXIiKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuc3RhdHVzUGFuZWxzLGk9QXJyYXkuaXNBcnJheSh0KSYmdC5sZW5ndGg+MDt0aGlzLnNldERpc3BsYXllZChpKTtjb25zdCByPW5ldyBNYXA7aSYmdC5mb3JFYWNoKGU9Pnt2YXIgdCxpO2NvbnN0IG89bnVsbCE9PSh0PWUua2V5KSYmdm9pZCAwIT09dD90OmUuc3RhdHVzUGFuZWwsbj10aGlzLnN0YXR1c0JhclNlcnZpY2UuZ2V0U3RhdHVzUGFuZWwobyk7aWYobnVsbD09bj92b2lkIDA6bi5yZWZyZXNoKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMobnVsbCE9PShpPWUuc3RhdHVzUGFuZWxQYXJhbXMpJiZ2b2lkIDAhPT1pP2k6e30pO24ucmVmcmVzaCh0KSYmKHIuc2V0KG8sbiksZGVsZXRlIHRoaXMuY29tcERlc3Ryb3lGdW5jdGlvbnNbb10scy5fLnJlbW92ZUZyb21QYXJlbnQobi5nZXRHdWkoKSkpfX0pLHRoaXMucmVzZXRTdGF0dXNCYXIoKSxpJiZ0aGlzLnByb2Nlc3NTdGF0dXNQYW5lbHMocil9cmVzZXRTdGF0dXNCYXIoKXt0aGlzLmVTdGF0dXNCYXJMZWZ0LmlubmVySFRNTD0iIix0aGlzLmVTdGF0dXNCYXJDZW50ZXIuaW5uZXJIVE1MPSIiLHRoaXMuZVN0YXR1c0JhclJpZ2h0LmlubmVySFRNTD0iIix0aGlzLmRlc3Ryb3lDb21wb25lbnRzKCksdGhpcy5zdGF0dXNCYXJTZXJ2aWNlLnVucmVnaXN0ZXJBbGxDb21wb25lbnRzKCl9ZGVzdHJveUNvbXBvbmVudHMoKXtPYmplY3QudmFsdWVzKHRoaXMuY29tcERlc3Ryb3lGdW5jdGlvbnMpLmZvckVhY2goZT0+ZSgpKSx0aGlzLmNvbXBEZXN0cm95RnVuY3Rpb25zPXt9fWNyZWF0ZUFuZFJlbmRlckNvbXBvbmVudHMoZSx0LGkpe2NvbnN0IHI9W107ZS5mb3JFYWNoKGU9Pntjb25zdCB0PWUua2V5fHxlLnN0YXR1c1BhbmVsLG89aS5nZXQodCk7bGV0IG47aWYobyluPXMuQWdQcm9taXNlLnJlc29sdmUobyk7ZWxzZXtjb25zdCB0PXt9O2lmKG49dGhpcy51c2VyQ29tcG9uZW50RmFjdG9yeS5nZXRTdGF0dXNQYW5lbENvbXBEZXRhaWxzKGUsdCkubmV3QWdTdGFja0luc3RhbmNlKCksIW4pcmV0dXJufXIucHVzaCh7a2V5OnQscHJvbWlzZTpufSl9KSxzLkFnUHJvbWlzZS5hbGwoci5tYXAoZT0+ZS5wcm9taXNlKSkudGhlbigoKT0+e3IuZm9yRWFjaChlPT57ZS5wcm9taXNlLnRoZW4oaT0+e2NvbnN0IHM9KCk9Pnt0aGlzLmdldENvbnRleHQoKS5kZXN0cm95QmVhbihpKX07dGhpcy5pc0FsaXZlKCk/KHRoaXMuc3RhdHVzQmFyU2VydmljZS5yZWdpc3RlclN0YXR1c1BhbmVsKGUua2V5LGkpLHQuYXBwZW5kQ2hpbGQoaS5nZXRHdWkoKSksdGhpcy5jb21wRGVzdHJveUZ1bmN0aW9uc1tlLmtleV09cyk6cygpfSl9KX0pfX1sLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1zdGF0dXMtYmFyIj5cbiAgICAgICAgICAgIDxkaXYgcmVmPSJlU3RhdHVzQmFyTGVmdCIgY2xhc3M9ImFnLXN0YXR1cy1iYXItbGVmdCIgcm9sZT0ic3RhdHVzIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgcmVmPSJlU3RhdHVzQmFyQ2VudGVyIiBjbGFzcz0iYWctc3RhdHVzLWJhci1jZW50ZXIiIHJvbGU9InN0YXR1cyI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IHJlZj0iZVN0YXR1c0JhclJpZ2h0IiBjbGFzcz0iYWctc3RhdHVzLWJhci1yaWdodCIgcm9sZT0ic3RhdHVzIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+JyxhKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJ1c2VyQ29tcG9uZW50RmFjdG9yeSIpXSxsLnByb3RvdHlwZSwidXNlckNvbXBvbmVudEZhY3RvcnkiLHZvaWQgMCksYShbT2JqZWN0KHMuQXV0b3dpcmVkKSgic3RhdHVzQmFyU2VydmljZSIpXSxsLnByb3RvdHlwZSwic3RhdHVzQmFyU2VydmljZSIsdm9pZCAwKSxhKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVTdGF0dXNCYXJMZWZ0IildLGwucHJvdG90eXBlLCJlU3RhdHVzQmFyTGVmdCIsdm9pZCAwKSxhKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVTdGF0dXNCYXJDZW50ZXIiKV0sbC5wcm90b3R5cGUsImVTdGF0dXNCYXJDZW50ZXIiLHZvaWQgMCksYShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlU3RhdHVzQmFyUmlnaHQiKV0sbC5wcm90b3R5cGUsImVTdGF0dXNCYXJSaWdodCIsdm9pZCAwKSxhKFtzLlBvc3RDb25zdHJ1Y3RdLGwucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKSxhKFtzLlByZURlc3Ryb3ldLGwucHJvdG90eXBlLCJkZXN0cm95Q29tcG9uZW50cyIsbnVsbCk7dmFyIGQ9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgYyBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoYy5URU1QTEFURSl9c2V0TGFiZWwoZSx0KXt0aGlzLnNldERpc3BsYXllZCghMSk7Y29uc3QgaT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTt0aGlzLmVMYWJlbC5pbm5lckhUTUw9aShlLHQpfXNldFZhbHVlKGUpe3RoaXMuZVZhbHVlLmlubmVySFRNTD1lfX1jLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1zdGF0dXMtbmFtZS12YWx1ZSI+XG4gICAgICAgICAgICA8c3BhbiByZWY9ImVMYWJlbCI+PC9zcGFuPjombmJzcDtcbiAgICAgICAgICAgIDxzcGFuIHJlZj0iZVZhbHVlIiBjbGFzcz0iYWctc3RhdHVzLW5hbWUtdmFsdWUtdmFsdWUiPjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+JyxkKFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImVMYWJlbCIpXSxjLnByb3RvdHlwZSwiZUxhYmVsIix2b2lkIDApLGQoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZVZhbHVlIildLGMucHJvdG90eXBlLCJlVmFsdWUiLHZvaWQgMCk7dmFyIGg9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgdSBleHRlbmRzIGN7cG9zdENvbnN0cnVjdCgpeyJjbGllbnRTaWRlIj09PXRoaXMuZ3JpZEFwaS5fX2dldE1vZGVsKCkuZ2V0VHlwZSgpPyh0aGlzLnNldExhYmVsKCJ0b3RhbEFuZEZpbHRlcmVkUm93cyIsIlJvd3MiKSx0aGlzLmFkZENzc0NsYXNzKCJhZy1zdGF0dXMtcGFuZWwiKSx0aGlzLmFkZENzc0NsYXNzKCJhZy1zdGF0dXMtcGFuZWwtdG90YWwtYW5kLWZpbHRlcmVkLXJvdy1jb3VudCIpLHRoaXMuc2V0RGlzcGxheWVkKCEwKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9NT0RFTF9VUERBVEVELHRoaXMub25EYXRhQ2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLm9uRGF0YUNoYW5nZWQoKSk6Y29uc29sZS53YXJuKCJBRyBHcmlkOiBhZ1RvdGFsQW5kRmlsdGVyZWRSb3dDb3VudENvbXBvbmVudCBzaG91bGQgb25seSBiZSB1c2VkIHdpdGggdGhlIGNsaWVudCBzaWRlIHJvdyBtb2RlbC4iKX1vbkRhdGFDaGFuZ2VkKCl7Y29uc3QgZT10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKSx0PWUoInRob3VzYW5kU2VwYXJhdG9yIiwiLCIpLGk9ZSgiZGVjaW1hbFNlcGFyYXRvciIsIi4iKSxyPXMuXy5mb3JtYXROdW1iZXJDb21tYXModGhpcy5nZXRGaWx0ZXJlZFJvd0NvdW50VmFsdWUoKSx0LGkpLG89cy5fLmZvcm1hdE51bWJlckNvbW1hcyh0aGlzLmdldFRvdGFsUm93Q291bnQoKSx0LGkpO2lmKHI9PT1vKXRoaXMuc2V0VmFsdWUocik7ZWxzZXtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpO3RoaXMuc2V0VmFsdWUoYCR7cn0gJHtlKCJvZiIsIm9mIil9ICR7b31gKX19Z2V0RmlsdGVyZWRSb3dDb3VudFZhbHVlKCl7bGV0IGU9MDtyZXR1cm4gdGhpcy5ncmlkQXBpLmZvckVhY2hOb2RlQWZ0ZXJGaWx0ZXIodD0+e3QuZ3JvdXB8fGUrK30pLGV9Z2V0VG90YWxSb3dDb3VudCgpe2xldCBlPTA7cmV0dXJuIHRoaXMuZ3JpZEFwaS5mb3JFYWNoTm9kZSh0PT57dC5ncm91cHx8ZSsrfSksZX1pbml0KCl7fXJlZnJlc2goKXtyZXR1cm4hMH1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpfX1oKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJncmlkQXBpIildLHUucHJvdG90eXBlLCJncmlkQXBpIix2b2lkIDApLGgoW3MuUG9zdENvbnN0cnVjdF0sdS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBwPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGcgZXh0ZW5kcyBje3Bvc3RDb25zdHJ1Y3QoKXtpZih0aGlzLnNldExhYmVsKCJmaWx0ZXJlZFJvd3MiLCJGaWx0ZXJlZCIpLCJjbGllbnRTaWRlIiE9PXRoaXMuZ3JpZEFwaS5fX2dldE1vZGVsKCkuZ2V0VHlwZSgpKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZDogYWdGaWx0ZXJlZFJvd0NvdW50Q29tcG9uZW50IHNob3VsZCBvbmx5IGJlIHVzZWQgd2l0aCB0aGUgY2xpZW50IHNpZGUgcm93IG1vZGVsLiIpO3RoaXMuYWRkQ3NzQ2xhc3MoImFnLXN0YXR1cy1wYW5lbCIpLHRoaXMuYWRkQ3NzQ2xhc3MoImFnLXN0YXR1cy1wYW5lbC1maWx0ZXJlZC1yb3ctY291bnQiKSx0aGlzLnNldERpc3BsYXllZCghMCk7Y29uc3QgZT10aGlzLm9uRGF0YUNoYW5nZWQuYmluZCh0aGlzKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9NT0RFTF9VUERBVEVELGUpLGUoKX1vbkRhdGFDaGFuZ2VkKCl7Y29uc3QgZT10aGlzLmdldFRvdGFsUm93Q291bnRWYWx1ZSgpLHQ9dGhpcy5nZXRGaWx0ZXJlZFJvd0NvdW50VmFsdWUoKSxpPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLHI9aSgidGhvdXNhbmRTZXBhcmF0b3IiLCIsIiksbz1pKCJkZWNpbWFsU2VwYXJhdG9yIiwiLiIpO3RoaXMuc2V0VmFsdWUocy5fLmZvcm1hdE51bWJlckNvbW1hcyh0LHIsbykpLHRoaXMuc2V0RGlzcGxheWVkKGUhPT10KX1nZXRUb3RhbFJvd0NvdW50VmFsdWUoKXtsZXQgZT0wO3JldHVybiB0aGlzLmdyaWRBcGkuZm9yRWFjaE5vZGUodD0+ZSs9MSksZX1nZXRGaWx0ZXJlZFJvd0NvdW50VmFsdWUoKXtsZXQgZT0wO3JldHVybiB0aGlzLmdyaWRBcGkuZm9yRWFjaE5vZGVBZnRlckZpbHRlcih0PT57dC5ncm91cHx8KGUrPTEpfSksZX1pbml0KCl7fXJlZnJlc2goKXtyZXR1cm4hMH1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpfX1wKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJncmlkQXBpIildLGcucHJvdG90eXBlLCJncmlkQXBpIix2b2lkIDApLHAoW3MuUG9zdENvbnN0cnVjdF0sZy5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBtPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGYgZXh0ZW5kcyBje3Bvc3RDb25zdHJ1Y3QoKXt0aGlzLnNldExhYmVsKCJ0b3RhbFJvd3MiLCJUb3RhbCBSb3dzIiksImNsaWVudFNpZGUiPT09dGhpcy5ncmlkQXBpLl9fZ2V0TW9kZWwoKS5nZXRUeXBlKCk/KHRoaXMuYWRkQ3NzQ2xhc3MoImFnLXN0YXR1cy1wYW5lbCIpLHRoaXMuYWRkQ3NzQ2xhc3MoImFnLXN0YXR1cy1wYW5lbC10b3RhbC1yb3ctY291bnQiKSx0aGlzLnNldERpc3BsYXllZCghMCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfTU9ERUxfVVBEQVRFRCx0aGlzLm9uRGF0YUNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5vbkRhdGFDaGFuZ2VkKCkpOmNvbnNvbGUud2FybigiQUcgR3JpZDogYWdUb3RhbFJvd0NvdW50Q29tcG9uZW50IHNob3VsZCBvbmx5IGJlIHVzZWQgd2l0aCB0aGUgY2xpZW50IHNpZGUgcm93IG1vZGVsLiIpfW9uRGF0YUNoYW5nZWQoKXtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLHQ9ZSgidGhvdXNhbmRTZXBhcmF0b3IiLCIsIiksaT1lKCJkZWNpbWFsU2VwYXJhdG9yIiwiLiIpO3RoaXMuc2V0VmFsdWUocy5fLmZvcm1hdE51bWJlckNvbW1hcyh0aGlzLmdldFJvd0NvdW50VmFsdWUoKSx0LGkpKX1nZXRSb3dDb3VudFZhbHVlKCl7bGV0IGU9MDtyZXR1cm4gdGhpcy5ncmlkQXBpLmZvckVhY2hMZWFmTm9kZSh0PT5lKz0xKSxlfWluaXQoKXt9cmVmcmVzaCgpe3JldHVybiEwfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCl9fW0oW09iamVjdChzLkF1dG93aXJlZCkoImdyaWRBcGkiKV0sZi5wcm90b3R5cGUsImdyaWRBcGkiLHZvaWQgMCksbShbcy5Qb3N0Q29uc3RydWN0XSxmLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIHY9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgQyBleHRlbmRzIGN7cG9zdENvbnN0cnVjdCgpe2lmKCF0aGlzLmlzVmFsaWRSb3dNb2RlbCgpKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZDogYWdTZWxlY3RlZFJvd0NvdW50Q29tcG9uZW50IHNob3VsZCBvbmx5IGJlIHVzZWQgd2l0aCB0aGUgY2xpZW50IGFuZCBzZXJ2ZXIgc2lkZSByb3cgbW9kZWwuIik7dGhpcy5zZXRMYWJlbCgic2VsZWN0ZWRSb3dzIiwiU2VsZWN0ZWQiKSx0aGlzLmFkZENzc0NsYXNzKCJhZy1zdGF0dXMtcGFuZWwiKSx0aGlzLmFkZENzc0NsYXNzKCJhZy1zdGF0dXMtcGFuZWwtc2VsZWN0ZWQtcm93LWNvdW50IiksdGhpcy5vblJvd1NlbGVjdGlvbkNoYW5nZWQoKTtjb25zdCBlPXRoaXMub25Sb3dTZWxlY3Rpb25DaGFuZ2VkLmJpbmQodGhpcyk7dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfTU9ERUxfVVBEQVRFRCxlKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxzLkV2ZW50cy5FVkVOVF9TRUxFQ1RJT05fQ0hBTkdFRCxlKX1pc1ZhbGlkUm93TW9kZWwoKXtjb25zdCBlPXRoaXMuZ3JpZEFwaS5fX2dldE1vZGVsKCkuZ2V0VHlwZSgpO3JldHVybiJjbGllbnRTaWRlIj09PWV8fCJzZXJ2ZXJTaWRlIj09PWV9b25Sb3dTZWxlY3Rpb25DaGFuZ2VkKCl7Y29uc3QgZT10aGlzLnNlbGVjdGlvblNlcnZpY2UuZ2V0U2VsZWN0aW9uQ291bnQoKTtpZihlPDApcmV0dXJuIHRoaXMuc2V0VmFsdWUoIj8iKSx2b2lkIHRoaXMuc2V0RGlzcGxheWVkKCEwKTtjb25zdCB0PXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLGk9dCgidGhvdXNhbmRTZXBhcmF0b3IiLCIsIikscj10KCJkZWNpbWFsU2VwYXJhdG9yIiwiLiIpO3RoaXMuc2V0VmFsdWUocy5fLmZvcm1hdE51bWJlckNvbW1hcyhlLGkscikpLHRoaXMuc2V0RGlzcGxheWVkKGU+MCl9aW5pdCgpe31yZWZyZXNoKCl7cmV0dXJuITB9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKX19dihbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZ3JpZEFwaSIpXSxDLnByb3RvdHlwZSwiZ3JpZEFwaSIsdm9pZCAwKSx2KFtPYmplY3Qocy5BdXRvd2lyZWQpKCJzZWxlY3Rpb25TZXJ2aWNlIildLEMucHJvdG90eXBlLCJzZWxlY3Rpb25TZXJ2aWNlIix2b2lkIDApLHYoW3MuUG9zdENvbnN0cnVjdF0sQy5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciB5PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIFMgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFMuVEVNUExBVEUpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCl9cG9zdENvbnN0cnVjdCgpe3RoaXMuaXNWYWxpZFJvd01vZGVsKCk/KHRoaXMuYXZnQWdncmVnYXRpb25Db21wLnNldExhYmVsKCJhdmciLCJBdmVyYWdlIiksdGhpcy5jb3VudEFnZ3JlZ2F0aW9uQ29tcC5zZXRMYWJlbCgiY291bnQiLCJDb3VudCIpLHRoaXMubWluQWdncmVnYXRpb25Db21wLnNldExhYmVsKCJtaW4iLCJNaW4iKSx0aGlzLm1heEFnZ3JlZ2F0aW9uQ29tcC5zZXRMYWJlbCgibWF4IiwiTWF4IiksdGhpcy5zdW1BZ2dyZWdhdGlvbkNvbXAuc2V0TGFiZWwoInN1bSIsIlN1bSIpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHMuRXZlbnRzLkVWRU5UX1JBTkdFX1NFTEVDVElPTl9DSEFOR0VELHRoaXMub25SYW5nZVNlbGVjdGlvbkNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfTU9ERUxfVVBEQVRFRCx0aGlzLm9uUmFuZ2VTZWxlY3Rpb25DaGFuZ2VkLmJpbmQodGhpcykpKTpjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGFnQWdncmVnYXRpb25Db21wb25lbnQgc2hvdWxkIG9ubHkgYmUgdXNlZCB3aXRoIHRoZSBjbGllbnQgYW5kIHNlcnZlciBzaWRlIHJvdyBtb2RlbC4iKX1pc1ZhbGlkUm93TW9kZWwoKXtjb25zdCBlPXRoaXMuZ3JpZEFwaS5fX2dldE1vZGVsKCkuZ2V0VHlwZSgpO3JldHVybiJjbGllbnRTaWRlIj09PWV8fCJzZXJ2ZXJTaWRlIj09PWV9aW5pdChlKXt0aGlzLnBhcmFtcz1lfXJlZnJlc2goZSl7cmV0dXJuIHRoaXMucGFyYW1zPWUsdGhpcy5vblJhbmdlU2VsZWN0aW9uQ2hhbmdlZCgpLCEwfXNldEFnZ3JlZ2F0aW9uQ29tcG9uZW50VmFsdWUoZSx0LGkpe3ZhciByO2NvbnN0IG89dGhpcy5nZXRBbGxvd2VkQWdncmVnYXRpb25WYWx1ZUNvbXBvbmVudChlKTtpZihzLl8uZXhpc3RzKG8pJiZvKXtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLHI9ZSgidGhvdXNhbmRTZXBhcmF0b3IiLCIsIiksbj1lKCJkZWNpbWFsU2VwYXJhdG9yIiwiLiIpO28uc2V0VmFsdWUocy5fLmZvcm1hdE51bWJlclR3b0RlY2ltYWxQbGFjZXNBbmRDb21tYXModCxyLG4pKSxvLnNldERpc3BsYXllZChpKX1lbHNlIG51bGw9PT0ocj10aGlzLmdldEFnZ3JlZ2F0aW9uVmFsdWVDb21wb25lbnQoZSkpfHx2b2lkIDA9PT1yfHxyLnNldERpc3BsYXllZCghMSl9Z2V0QWxsb3dlZEFnZ3JlZ2F0aW9uVmFsdWVDb21wb25lbnQoZSl7Y29uc3R7YWdnRnVuY3M6dH09dGhpcy5wYXJhbXM7cmV0dXJuIXR8fHQuaW5jbHVkZXMoZSk/dGhpcy5nZXRBZ2dyZWdhdGlvblZhbHVlQ29tcG9uZW50KGUpOm51bGx9Z2V0QWdncmVnYXRpb25WYWx1ZUNvbXBvbmVudChlKXtyZXR1cm4gdGhpc1tlKyJBZ2dyZWdhdGlvbkNvbXAiXX1vblJhbmdlU2VsZWN0aW9uQ2hhbmdlZCgpe2NvbnN0IGU9dGhpcy5yYW5nZVNlcnZpY2U/dGhpcy5yYW5nZVNlcnZpY2UuZ2V0Q2VsbFJhbmdlcygpOnZvaWQgMDtsZXQgdD0wLGk9MCxyPTAsbz1udWxsLG49bnVsbDtjb25zdCBhPXt9O2UmJiFzLl8ubWlzc2luZ09yRW1wdHkoZSkmJmUuZm9yRWFjaChlPT57bGV0IGw9dGhpcy5yYW5nZVNlcnZpY2UuZ2V0UmFuZ2VTdGFydFJvdyhlKTtjb25zdCBkPXRoaXMucmFuZ2VTZXJ2aWNlLmdldFJhbmdlRW5kUm93KGUpO2Zvcig7Oyl7aWYocy5fLm1pc3NpbmcobCl8fCFsfHx0aGlzLnJvd1Bvc2l0aW9uVXRpbHMuYmVmb3JlKGQsbCl8fCFsfHwhZS5jb2x1bW5zKWJyZWFrO2UuY29sdW1ucy5mb3JFYWNoKGU9PntpZihudWxsPT09bClyZXR1cm47Y29uc3QgZD10aGlzLmNlbGxQb3NpdGlvblV0aWxzLmNyZWF0ZUlkKHtyb3dQaW5uZWQ6bC5yb3dQaW5uZWQsY29sdW1uOmUscm93SW5kZXg6bC5yb3dJbmRleH0pO2lmKGFbZF0pcmV0dXJuO2FbZF09ITA7Y29uc3QgYz10aGlzLnJvd1JlbmRlcmVyLmdldFJvd05vZGUobCk7aWYocy5fLm1pc3NpbmcoYykpcmV0dXJuO2xldCBoPXRoaXMudmFsdWVTZXJ2aWNlLmdldFZhbHVlKGUsYyk7cy5fLm1pc3NpbmcoaCl8fCIiPT09aHx8KGkrKywib2JqZWN0Ij09dHlwZW9mIGgmJiJ2YWx1ZSJpbiBoJiYoaD1oLnZhbHVlLCIiPT09aCl8fCgic3RyaW5nIj09dHlwZW9mIGgmJihoPU51bWJlcihoKSksIm51bWJlciIhPXR5cGVvZiBofHxpc05hTihoKXx8KHQrPWgsKG51bGw9PT1ufHxoPm4pJiYobj1oKSwobnVsbD09PW98fGg8bykmJihvPWgpLHIrKykpKX0pLGw9dGhpcy5jZWxsTmF2aWdhdGlvblNlcnZpY2UuZ2V0Um93QmVsb3cobCl9fSk7Y29uc3QgbD1pPjEsZD1yPjE7dGhpcy5zZXRBZ2dyZWdhdGlvbkNvbXBvbmVudFZhbHVlKCJjb3VudCIsaSxsKSx0aGlzLnNldEFnZ3JlZ2F0aW9uQ29tcG9uZW50VmFsdWUoInN1bSIsdCxkKSx0aGlzLnNldEFnZ3JlZ2F0aW9uQ29tcG9uZW50VmFsdWUoIm1pbiIsbyxkKSx0aGlzLnNldEFnZ3JlZ2F0aW9uQ29tcG9uZW50VmFsdWUoIm1heCIsbixkKSx0aGlzLnNldEFnZ3JlZ2F0aW9uQ29tcG9uZW50VmFsdWUoImF2ZyIsdC9yLGQpfX1TLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1zdGF0dXMtcGFuZWwgYWctc3RhdHVzLXBhbmVsLWFnZ3JlZ2F0aW9ucyI+XG4gICAgICAgICAgICA8YWctbmFtZS12YWx1ZSByZWY9ImF2Z0FnZ3JlZ2F0aW9uQ29tcCI+PC9hZy1uYW1lLXZhbHVlPlxuICAgICAgICAgICAgPGFnLW5hbWUtdmFsdWUgcmVmPSJjb3VudEFnZ3JlZ2F0aW9uQ29tcCI+PC9hZy1uYW1lLXZhbHVlPlxuICAgICAgICAgICAgPGFnLW5hbWUtdmFsdWUgcmVmPSJtaW5BZ2dyZWdhdGlvbkNvbXAiPjwvYWctbmFtZS12YWx1ZT5cbiAgICAgICAgICAgIDxhZy1uYW1lLXZhbHVlIHJlZj0ibWF4QWdncmVnYXRpb25Db21wIj48L2FnLW5hbWUtdmFsdWU+XG4gICAgICAgICAgICA8YWctbmFtZS12YWx1ZSByZWY9InN1bUFnZ3JlZ2F0aW9uQ29tcCI+PC9hZy1uYW1lLXZhbHVlPlxuICAgICAgICA8L2Rpdj4nLHkoW09iamVjdChzLk9wdGlvbmFsKSgicmFuZ2VTZXJ2aWNlIildLFMucHJvdG90eXBlLCJyYW5nZVNlcnZpY2UiLHZvaWQgMCkseShbT2JqZWN0KHMuQXV0b3dpcmVkKSgidmFsdWVTZXJ2aWNlIildLFMucHJvdG90eXBlLCJ2YWx1ZVNlcnZpY2UiLHZvaWQgMCkseShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2VsbE5hdmlnYXRpb25TZXJ2aWNlIildLFMucHJvdG90eXBlLCJjZWxsTmF2aWdhdGlvblNlcnZpY2UiLHZvaWQgMCkseShbT2JqZWN0KHMuQXV0b3dpcmVkKSgicm93UmVuZGVyZXIiKV0sUy5wcm90b3R5cGUsInJvd1JlbmRlcmVyIix2b2lkIDApLHkoW09iamVjdChzLkF1dG93aXJlZCkoImdyaWRBcGkiKV0sUy5wcm90b3R5cGUsImdyaWRBcGkiLHZvaWQgMCkseShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY2VsbFBvc2l0aW9uVXRpbHMiKV0sUy5wcm90b3R5cGUsImNlbGxQb3NpdGlvblV0aWxzIix2b2lkIDApLHkoW09iamVjdChzLkF1dG93aXJlZCkoInJvd1Bvc2l0aW9uVXRpbHMiKV0sUy5wcm90b3R5cGUsInJvd1Bvc2l0aW9uVXRpbHMiLHZvaWQgMCkseShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJzdW1BZ2dyZWdhdGlvbkNvbXAiKV0sUy5wcm90b3R5cGUsInN1bUFnZ3JlZ2F0aW9uQ29tcCIsdm9pZCAwKSx5KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoImNvdW50QWdncmVnYXRpb25Db21wIildLFMucHJvdG90eXBlLCJjb3VudEFnZ3JlZ2F0aW9uQ29tcCIsdm9pZCAwKSx5KFtPYmplY3Qocy5SZWZTZWxlY3RvcikoIm1pbkFnZ3JlZ2F0aW9uQ29tcCIpXSxTLnByb3RvdHlwZSwibWluQWdncmVnYXRpb25Db21wIix2b2lkIDApLHkoW09iamVjdChzLlJlZlNlbGVjdG9yKSgibWF4QWdncmVnYXRpb25Db21wIildLFMucHJvdG90eXBlLCJtYXhBZ2dyZWdhdGlvbkNvbXAiLHZvaWQgMCkseShbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJhdmdBZ2dyZWdhdGlvbkNvbXAiKV0sUy5wcm90b3R5cGUsImF2Z0FnZ3JlZ2F0aW9uQ29tcCIsdm9pZCAwKSx5KFtzLlBvc3RDb25zdHJ1Y3RdLFMucHJvdG90eXBlLCJwb3N0Q29uc3RydWN0IixudWxsKTtjb25zdCB3PXt2ZXJzaW9uOiIzMS4xLjEiLG1vZHVsZU5hbWU6cy5Nb2R1bGVOYW1lcy5TdGF0dXNCYXJNb2R1bGUsYmVhbnM6W25dLGFnU3RhY2tDb21wb25lbnRzOlt7Y29tcG9uZW50TmFtZToiQWdTdGF0dXNCYXIiLGNvbXBvbmVudENsYXNzOmx9LHtjb21wb25lbnROYW1lOiJBZ05hbWVWYWx1ZSIsY29tcG9uZW50Q2xhc3M6Y31dLHVzZXJDb21wb25lbnRzOlt7Y29tcG9uZW50TmFtZToiYWdBZ2dyZWdhdGlvbkNvbXBvbmVudCIsY29tcG9uZW50Q2xhc3M6U30se2NvbXBvbmVudE5hbWU6ImFnU2VsZWN0ZWRSb3dDb3VudENvbXBvbmVudCIsY29tcG9uZW50Q2xhc3M6Q30se2NvbXBvbmVudE5hbWU6ImFnVG90YWxSb3dDb3VudENvbXBvbmVudCIsY29tcG9uZW50Q2xhc3M6Zn0se2NvbXBvbmVudE5hbWU6ImFnRmlsdGVyZWRSb3dDb3VudENvbXBvbmVudCIsY29tcG9uZW50Q2xhc3M6Z30se2NvbXBvbmVudE5hbWU6ImFnVG90YWxBbmRGaWx0ZXJlZFJvd0NvdW50Q29tcG9uZW50Iixjb21wb25lbnRDbGFzczp1fV0sZGVwZW5kYW50TW9kdWxlczpbci5FbnRlcnByaXNlQ29yZU1vZHVsZV19O2kuZCh0LCJTdGF0dXNCYXJNb2R1bGUiLChmdW5jdGlvbigpe3JldHVybiB3fSkpfSxmdW5jdGlvbihlLHQsaSl7InVzZSBzdHJpY3QiO2kucih0KTt2YXIgcz1pKDApLHI9aSgzKSxvPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBuPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1YntoaWRlQWN0aXZlTWVudSgpe3RoaXMuZGVzdHJveUJlYW4odGhpcy5hY3RpdmVNZW51KX1zaG93TWVudUFmdGVyTW91c2VFdmVudChlLHQsaSxzKXtjb25zdCByPXM/ImZpbHRlck1lbnVUYWIiOnZvaWQgMDt0aGlzLnNob3dNZW51KGUscz0+e3ZhciBvO2NvbnN0IG49cy5nZXRHdWkoKTt0aGlzLnBvcHVwU2VydmljZS5wb3NpdGlvblBvcHVwVW5kZXJNb3VzZUV2ZW50KHt0eXBlOmksY29sdW1uOmUsbW91c2VFdmVudDp0LGVQb3B1cDpufSksciYmKG51bGw9PT0obz1zLnNob3dUYWIpfHx2b2lkIDA9PT1vfHxvLmNhbGwocyxyKSksdGhpcy5kaXNwYXRjaFZpc2libGVDaGFuZ2VkRXZlbnQoITAsITEsZSxyKX0saSxyLHZvaWQgMCx0LnRhcmdldCl9c2hvd01lbnVBZnRlckJ1dHRvbkNsaWNrKGUsdCxpLHMpe2xldCByPS0xLG89ImxlZnQiO3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlUnRsIikmJihyPTEsbz0icmlnaHQiKTtjb25zdCBuPXM/ImZpbHRlck1lbnVUYWIiOnZvaWQgMCxhPW4/W25dOnZvaWQgMCxsPXRoaXMubWVudVNlcnZpY2UuaXNMZWdhY3lNZW51RW5hYmxlZCgpO2xldCBkPShsPzk6NCkqcixjPWw/LTIzOjQ7dGhpcy5zaG93TWVudShlLHM9Pnt2YXIgcjtjb25zdCBhPXMuZ2V0R3VpKCk7dGhpcy5wb3B1cFNlcnZpY2UucG9zaXRpb25Qb3B1cEJ5Q29tcG9uZW50KHt0eXBlOmksY29sdW1uOmUsZXZlbnRTb3VyY2U6dCxlUG9wdXA6YSxhbGlnblNpZGU6byxudWRnZVg6ZCxudWRnZVk6Yyxwb3NpdGlvbjoidW5kZXIiLGtlZXBXaXRoaW5Cb3VuZHM6ITB9KSxuJiYobnVsbD09PShyPXMuc2hvd1RhYil8fHZvaWQgMD09PXJ8fHIuY2FsbChzLG4pKSx0aGlzLmRpc3BhdGNoVmlzaWJsZUNoYW5nZWRFdmVudCghMCwhMSxlLG4pfSxpLG4sYSx0KX1zaG93TWVudShlLHQsaSxyLG8sbil7dmFyIGw7Y29uc3R7bWVudTpkLGVNZW51R3VpOmMsYW5jaG9yVG9FbGVtZW50OmgscmVzdG9yZUZvY3VzUGFyYW1zOnV9PXRoaXMuZ2V0TWVudVBhcmFtcyhlLG8sbikscD1bXTtlJiZwLnB1c2godD0+e2NvbnN0IGk9ZC5nZXRHdWkoKTt0aGlzLmRlc3Ryb3lCZWFuKGQpLG51bGw9PWV8fGUuc2V0TWVudVZpc2libGUoITEsImNvbnRleHRNZW51IiksdGhpcy5tZW51VXRpbHMucmVzdG9yZUZvY3VzT25DbG9zZSh1LGksdCl9KTtjb25zdCBnPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpO3RoaXMucG9wdXBTZXJ2aWNlLmFkZFBvcHVwKHttb2RhbDohMCxlQ2hpbGQ6YyxjbG9zZU9uRXNjOiEwLGNsb3NlZENhbGxiYWNrOnQ9PntwLmZvckVhY2goZT0+ZSh0KSksdGhpcy5kaXNwYXRjaFZpc2libGVDaGFuZ2VkRXZlbnQoITEsITEsZSxyKX0sYWZ0ZXJHdWlBdHRhY2hlZDplPT5kLmFmdGVyR3VpQXR0YWNoZWQoT2JqZWN0LmFzc2lnbih7fSx7Y29udGFpbmVyOml9LGUpKSxwb3NpdGlvbkNhbGxiYWNrOnI/KCk9PnQoZCk6dm9pZCAwLGFyaWFMYWJlbDpnKCJhcmlhTGFiZWxDb2x1bW5NZW51IiwiQ29sdW1uIE1lbnUiKX0pO2lmKHJ8fChudWxsPT09KGw9ZC5zaG93VGFiQmFzZWRPblByZXZpb3VzU2VsZWN0aW9uKXx8dm9pZCAwPT09bHx8bC5jYWxsKGQpLHQoZCkpLHRoaXMubWVudVNlcnZpY2UuaXNDb2x1bW5NZW51QW5jaG9yaW5nRW5hYmxlZCgpKXtjb25zdCB0PXRoaXMucG9wdXBTZXJ2aWNlLnNldFBvcHVwUG9zaXRpb25SZWxhdGVkVG9FbGVtZW50KGMsaCk7dCYmZSYmdGhpcy5hZGRTdG9wQW5jaG9yaW5nKHQsZSxwKX1kLmFkZEV2ZW50TGlzdGVuZXIoYS5FVkVOVF9UQUJfU0VMRUNURUQsdD0+e3RoaXMuZGlzcGF0Y2hWaXNpYmxlQ2hhbmdlZEV2ZW50KCExLCEwLGUpLHRoaXMubGFzdFNlbGVjdGVkVGFiPXQua2V5LHRoaXMuZGlzcGF0Y2hWaXNpYmxlQ2hhbmdlZEV2ZW50KCEwLCEwLGUpfSksbnVsbD09ZXx8ZS5zZXRNZW51VmlzaWJsZSghMCwiY29udGV4dE1lbnUiKSx0aGlzLmFjdGl2ZU1lbnU9ZCxkLmFkZEV2ZW50TGlzdGVuZXIocy5CZWFuU3R1Yi5FVkVOVF9ERVNUUk9ZRUQsKCk9Pnt0aGlzLmFjdGl2ZU1lbnU9PT1kJiYodGhpcy5hY3RpdmVNZW51PW51bGwpfSl9YWRkU3RvcEFuY2hvcmluZyhlLHQsaSl7ZS50aGVuKGU9Pnt0LmFkZEV2ZW50TGlzdGVuZXIoImxlZnRDaGFuZ2VkIixlKSx0LmFkZEV2ZW50TGlzdGVuZXIoInZpc2libGVDaGFuZ2VkIixlKSxpLnB1c2goKCk9Pnt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImxlZnRDaGFuZ2VkIixlKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInZpc2libGVDaGFuZ2VkIixlKX0pfSl9Z2V0TWVudVBhcmFtcyhlLHQsaSl7Y29uc3Qgcz17Y29sdW1uOmUsaGVhZGVyUG9zaXRpb246dGhpcy5mb2N1c1NlcnZpY2UuZ2V0Rm9jdXNlZEhlYWRlcigpLGNvbHVtbkluZGV4OnRoaXMuY29sdW1uTW9kZWwuZ2V0QWxsRGlzcGxheWVkQ29sdW1ucygpLmluZGV4T2YoZSksZXZlbnRTb3VyY2U6aX0scj10aGlzLmNyZWF0ZU1lbnUoZSxzLHQsaSk7cmV0dXJue21lbnU6cixlTWVudUd1aTpyLmdldEd1aSgpLGFuY2hvclRvRWxlbWVudDppfHx0aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKS5nZXRHdWkoKSxyZXN0b3JlRm9jdXNQYXJhbXM6c319Y3JlYXRlTWVudShlLHQsaSxzKXtyZXR1cm4gdGhpcy5tZW51U2VydmljZS5pc0xlZ2FjeU1lbnVFbmFibGVkKCk/dGhpcy5jcmVhdGVCZWFuKG5ldyBhKGUsdCx0aGlzLmxhc3RTZWxlY3RlZFRhYixpLHMpKTp0aGlzLmNyZWF0ZUJlYW4obmV3IGwoZSx0LHMpKX1kaXNwYXRjaFZpc2libGVDaGFuZ2VkRXZlbnQoZSx0LGkscil7dmFyIG8sbjtjb25zdCBsPXt0eXBlOnMuRXZlbnRzLkVWRU5UX0NPTFVNTl9NRU5VX1ZJU0lCTEVfQ0hBTkdFRCx2aXNpYmxlOmUsc3dpdGNoaW5nVGFiOnQsa2V5Om51bGwhPT0obj1udWxsIT09KG89dGhpcy5sYXN0U2VsZWN0ZWRUYWIpJiZ2b2lkIDAhPT1vP286cikmJnZvaWQgMCE9PW4/bjp0aGlzLm1lbnVTZXJ2aWNlLmlzTGVnYWN5TWVudUVuYWJsZWQoKT9hLlRBQl9HRU5FUkFMOiJjb2x1bW5NZW51Iixjb2x1bW46bnVsbCE9aT9pOm51bGx9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQobCl9aXNNZW51RW5hYmxlZChlKXt2YXIgdDtpZighdGhpcy5tZW51U2VydmljZS5pc0xlZ2FjeU1lbnVFbmFibGVkKCkpcmV0dXJuITA7Y29uc3QgaT0hdGhpcy5maWx0ZXJNYW5hZ2VyLmlzRmlsdGVyQWxsb3dlZChlKSxzPW51bGwhPT0odD1lLmdldENvbERlZigpLm1lbnVUYWJzKSYmdm9pZCAwIT09dD90OmEuVEFCU19ERUZBVUxUO3JldHVybihpJiZzLmluY2x1ZGVzKGEuVEFCX0ZJTFRFUik/cy5sZW5ndGgtMTpzLmxlbmd0aCk+MH1zaG93TWVudUFmdGVyQ29udGV4dE1lbnVFdmVudChlLHQsaSl7dGhpcy5tZW51VXRpbHMub25Db250ZXh0TWVudSh0LGksdD0+KHRoaXMuc2hvd01lbnVBZnRlck1vdXNlRXZlbnQoZSx0LCJjb2x1bW5NZW51IiksITApKX19O28oW09iamVjdChzLkF1dG93aXJlZCkoInBvcHVwU2VydmljZSIpXSxuLnByb3RvdHlwZSwicG9wdXBTZXJ2aWNlIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoImZvY3VzU2VydmljZSIpXSxuLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoImN0cmxzU2VydmljZSIpXSxuLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLG4ucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmaWx0ZXJNYW5hZ2VyIildLG4ucHJvdG90eXBlLCJmaWx0ZXJNYW5hZ2VyIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoIm1lbnVVdGlscyIpXSxuLnByb3RvdHlwZSwibWVudVV0aWxzIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoIm1lbnVTZXJ2aWNlIildLG4ucHJvdG90eXBlLCJtZW51U2VydmljZSIsdm9pZCAwKSxuPW8oW09iamVjdChzLkJlYW4pKCJlbnRlcnByaXNlTWVudUZhY3RvcnkiKV0sbik7Y2xhc3MgYSBleHRlbmRzIHMuQmVhblN0dWJ7Y29uc3RydWN0b3IoZSx0LGkscyxyKXtzdXBlcigpLHRoaXMuY29sdW1uPWUsdGhpcy5yZXN0b3JlRm9jdXNQYXJhbXM9dCx0aGlzLmluaXRpYWxTZWxlY3Rpb249aSx0aGlzLnJlc3RyaWN0VG89cyx0aGlzLnNvdXJjZUVsZW1lbnQ9cix0aGlzLnRhYkZhY3Rvcmllcz17fSx0aGlzLmluY2x1ZGVDaGVja3M9e30sdGhpcy50YWJGYWN0b3JpZXNbYS5UQUJfR0VORVJBTF09dGhpcy5jcmVhdGVNYWluUGFuZWwuYmluZCh0aGlzKSx0aGlzLnRhYkZhY3Rvcmllc1thLlRBQl9GSUxURVJdPXRoaXMuY3JlYXRlRmlsdGVyUGFuZWwuYmluZCh0aGlzKSx0aGlzLnRhYkZhY3Rvcmllc1thLlRBQl9DT0xVTU5TXT10aGlzLmNyZWF0ZUNvbHVtbnNQYW5lbC5iaW5kKHRoaXMpLHRoaXMuaW5jbHVkZUNoZWNrc1thLlRBQl9HRU5FUkFMXT0oKT0+ITAsdGhpcy5pbmNsdWRlQ2hlY2tzW2EuVEFCX0ZJTFRFUl09KCk9PiEhZSYmdGhpcy5maWx0ZXJNYW5hZ2VyLmlzRmlsdGVyQWxsb3dlZChlKSx0aGlzLmluY2x1ZGVDaGVja3NbYS5UQUJfQ09MVU1OU109KCk9PiEwfWluaXQoKXtjb25zdCBlPXRoaXMuZ2V0VGFic1RvQ3JlYXRlKCkubWFwKGU9PnRoaXMuY3JlYXRlVGFiKGUpKTt0aGlzLnRhYmJlZExheW91dD1uZXcgcy5UYWJiZWRMYXlvdXQoe2l0ZW1zOmUsY3NzQ2xhc3M6ImFnLW1lbnUiLG9uQWN0aXZlSXRlbUNsaWNrZWQ6dGhpcy5vbkhpZGVQb3B1cC5iaW5kKHRoaXMpLG9uSXRlbUNsaWNrZWQ6dGhpcy5vblRhYkl0ZW1DbGlja2VkLmJpbmQodGhpcyl9KSx0aGlzLmNyZWF0ZUJlYW4odGhpcy50YWJiZWRMYXlvdXQpLHRoaXMubWFpbk1lbnVMaXN0JiZ0aGlzLm1haW5NZW51TGlzdC5zZXRQYXJlbnRDb21wb25lbnQodGhpcy50YWJiZWRMYXlvdXQpLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9PnRoaXMuZGVzdHJveUJlYW4odGhpcy50YWJiZWRMYXlvdXQpKX1nZXRUYWJzVG9DcmVhdGUoKXt2YXIgZSx0O3JldHVybiB0aGlzLnJlc3RyaWN0VG8/dGhpcy5yZXN0cmljdFRvOihudWxsIT09KHQ9bnVsbD09PShlPXRoaXMuY29sdW1uKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRDb2xEZWYoKS5tZW51VGFicykmJnZvaWQgMCE9PXQ/dDphLlRBQlNfREVGQVVMVCkuZmlsdGVyKGU9PnRoaXMuaXNWYWxpZE1lbnVUYWJJdGVtKGUpKS5maWx0ZXIoZT0+dGhpcy5pc05vdFN1cHByZXNzZWQoZSkpLmZpbHRlcihlPT50aGlzLmlzTW9kdWxlTG9hZGVkKGUpKX1pc01vZHVsZUxvYWRlZChlKXtyZXR1cm4gZSE9PWEuVEFCX0NPTFVNTlN8fHMuTW9kdWxlUmVnaXN0cnkuX19pc1JlZ2lzdGVyZWQocy5Nb2R1bGVOYW1lcy5Db2x1bW5zVG9vbFBhbmVsTW9kdWxlLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSl9aXNWYWxpZE1lbnVUYWJJdGVtKGUpe2xldCB0PSEwLGk9YS5UQUJTX0RFRkFVTFQ7cmV0dXJuIG51bGwhPXRoaXMucmVzdHJpY3RUbyYmKHQ9dGhpcy5yZXN0cmljdFRvLmluZGV4T2YoZSk+LTEsaT10aGlzLnJlc3RyaWN0VG8pLHQ9dCYmYS5UQUJTX0RFRkFVTFQuaW5kZXhPZihlKT4tMSx0fHxjb25zb2xlLndhcm4oYEFHIEdyaWQ6IFRyeWluZyB0byByZW5kZXIgYW4gaW52YWxpZCBtZW51IGl0ZW0gJyR7ZX0nLiBDaGVjayB0aGF0IHlvdXIgJ21lbnVUYWJzJyBjb250YWlucyBvbmUgb2YgWyR7aX1dYCksdH1pc05vdFN1cHByZXNzZWQoZSl7cmV0dXJuIHRoaXMuaW5jbHVkZUNoZWNrc1tlXSgpfWNyZWF0ZVRhYihlKXtyZXR1cm4gdGhpcy50YWJGYWN0b3JpZXNbZV0oKX1zaG93VGFiQmFzZWRPblByZXZpb3VzU2VsZWN0aW9uKCl7dGhpcy5zaG93VGFiKHRoaXMuaW5pdGlhbFNlbGVjdGlvbil9c2hvd1RhYihlKXt0aGlzLnRhYkl0ZW1Db2x1bW5zJiZlPT09YS5UQUJfQ09MVU1OUz90aGlzLnRhYmJlZExheW91dC5zaG93SXRlbSh0aGlzLnRhYkl0ZW1Db2x1bW5zKTp0aGlzLnRhYkl0ZW1GaWx0ZXImJmU9PT1hLlRBQl9GSUxURVI/dGhpcy50YWJiZWRMYXlvdXQuc2hvd0l0ZW0odGhpcy50YWJJdGVtRmlsdGVyKTp0aGlzLnRhYkl0ZW1HZW5lcmFsJiZlPT09YS5UQUJfR0VORVJBTD90aGlzLnRhYmJlZExheW91dC5zaG93SXRlbSh0aGlzLnRhYkl0ZW1HZW5lcmFsKTp0aGlzLnRhYmJlZExheW91dC5zaG93Rmlyc3RJdGVtKCl9b25UYWJJdGVtQ2xpY2tlZChlKXtsZXQgdD1udWxsO3N3aXRjaChlLml0ZW0pe2Nhc2UgdGhpcy50YWJJdGVtQ29sdW1uczp0PWEuVEFCX0NPTFVNTlM7YnJlYWs7Y2FzZSB0aGlzLnRhYkl0ZW1GaWx0ZXI6dD1hLlRBQl9GSUxURVI7YnJlYWs7Y2FzZSB0aGlzLnRhYkl0ZW1HZW5lcmFsOnQ9YS5UQUJfR0VORVJBTH10JiZ0aGlzLmFjdGl2YXRlVGFiKHQpfWFjdGl2YXRlVGFiKGUpe2NvbnN0IHQ9e3R5cGU6YS5FVkVOVF9UQUJfU0VMRUNURUQsa2V5OmV9O3RoaXMuZGlzcGF0Y2hFdmVudCh0KX1jcmVhdGVNYWluUGFuZWwoKXtyZXR1cm4gdGhpcy5tYWluTWVudUxpc3Q9dGhpcy5jb2x1bW5NZW51RmFjdG9yeS5jcmVhdGVNZW51KHRoaXMsdGhpcy5jb2x1bW4sKCk9Pnt2YXIgZTtyZXR1cm4gbnVsbCE9PShlPXRoaXMuc291cmNlRWxlbWVudCkmJnZvaWQgMCE9PWU/ZTp0aGlzLmdldEd1aSgpfSksdGhpcy5tYWluTWVudUxpc3QuYWRkRXZlbnRMaXN0ZW5lcihzLkFnTWVudUl0ZW1Db21wb25lbnQuRVZFTlRfQ0xPU0VfTUVOVSx0aGlzLm9uSGlkZVBvcHVwLmJpbmQodGhpcykpLHRoaXMudGFiSXRlbUdlbmVyYWw9e3RpdGxlOnMuXy5jcmVhdGVJY29uTm9TcGFuKCJtZW51Iix0aGlzLmdyaWRPcHRpb25zU2VydmljZSx0aGlzLmNvbHVtbiksdGl0bGVMYWJlbDphLlRBQl9HRU5FUkFMLnJlcGxhY2UoIk1lbnVUYWIiLCIiKSxib2R5UHJvbWlzZTpzLkFnUHJvbWlzZS5yZXNvbHZlKHRoaXMubWFpbk1lbnVMaXN0LmdldEd1aSgpKSxuYW1lOmEuVEFCX0dFTkVSQUx9LHRoaXMudGFiSXRlbUdlbmVyYWx9b25IaWRlUG9wdXAoZSl7dGhpcy5tZW51VXRpbHMuY2xvc2VQb3B1cEFuZFJlc3RvcmVGb2N1c09uU2VsZWN0KHRoaXMuaGlkZVBvcHVwRnVuYyx0aGlzLnJlc3RvcmVGb2N1c1BhcmFtcyxlKX1jcmVhdGVGaWx0ZXJQYW5lbCgpe2NvbnN0IGU9dGhpcy5jb2x1bW4/dGhpcy5maWx0ZXJNYW5hZ2VyLmdldE9yQ3JlYXRlRmlsdGVyV3JhcHBlcih0aGlzLmNvbHVtbiwiQ09MVU1OX01FTlUiKTpudWxsO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQUcgR3JpZCAtIFVuYWJsZSB0byBpbnN0YW50aWF0ZSBmaWx0ZXIiKTtyZXR1cm4gdGhpcy50YWJJdGVtRmlsdGVyPXt0aXRsZTpzLl8uY3JlYXRlSWNvbk5vU3BhbigiZmlsdGVyIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSx0aGlzLmNvbHVtbiksdGl0bGVMYWJlbDphLlRBQl9GSUxURVIucmVwbGFjZSgiTWVudVRhYiIsIiIpLGJvZHlQcm9taXNlOm51bGw9PWU/dm9pZCAwOmUuZ3VpUHJvbWlzZSxhZnRlckF0dGFjaGVkQ2FsbGJhY2s6dD0+eyhudWxsPT1lP3ZvaWQgMDplLmZpbHRlclByb21pc2UpJiZlLmZpbHRlclByb21pc2UudGhlbihlPT57ZSYmZS5hZnRlckd1aUF0dGFjaGVkJiZlLmFmdGVyR3VpQXR0YWNoZWQodCl9KX0sYWZ0ZXJEZXRhY2hlZENhbGxiYWNrOigpPT57dmFyIHQ7cmV0dXJuIG51bGw9PT0odD1udWxsPT1lP3ZvaWQgMDplLmZpbHRlclByb21pc2UpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnRoZW4oZT0+e3ZhciB0O3JldHVybiBudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5hZnRlckd1aURldGFjaGVkKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jYWxsKGUpfSl9LG5hbWU6YS5UQUJfRklMVEVSfSx0aGlzLnRhYkl0ZW1GaWx0ZXJ9Y3JlYXRlQ29sdW1uc1BhbmVsKCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtlLmNsYXNzTGlzdC5hZGQoImFnLW1lbnUtY29sdW1uLXNlbGVjdC13cmFwcGVyIik7Y29uc3QgdD10aGlzLmNvbHVtbkNob29zZXJGYWN0b3J5LmNyZWF0ZUNvbHVtblNlbGVjdFBhbmVsKHRoaXMsdGhpcy5jb2x1bW4pLmdldEd1aSgpO3JldHVybiB0LmNsYXNzTGlzdC5hZGQoImFnLW1lbnUtY29sdW1uLXNlbGVjdCIpLGUuYXBwZW5kQ2hpbGQodCksdGhpcy50YWJJdGVtQ29sdW1ucz17dGl0bGU6cy5fLmNyZWF0ZUljb25Ob1NwYW4oImNvbHVtbnMiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLHRoaXMuY29sdW1uKSx0aXRsZUxhYmVsOmEuVEFCX0NPTFVNTlMucmVwbGFjZSgiTWVudVRhYiIsIiIpLGJvZHlQcm9taXNlOnMuQWdQcm9taXNlLnJlc29sdmUoZSksbmFtZTphLlRBQl9DT0xVTU5TfSx0aGlzLnRhYkl0ZW1Db2x1bW5zfWFmdGVyR3VpQXR0YWNoZWQoZSl7Y29uc3R7Y29udGFpbmVyOnQsaGlkZVBvcHVwOml9PWU7dGhpcy50YWJiZWRMYXlvdXQuc2V0QWZ0ZXJBdHRhY2hlZFBhcmFtcyh7Y29udGFpbmVyOnQsaGlkZVBvcHVwOml9KSxpJiYodGhpcy5oaWRlUG9wdXBGdW5jPWksdGhpcy5hZGREZXN0cm95RnVuYyhpKSl9Z2V0R3VpKCl7cmV0dXJuIHRoaXMudGFiYmVkTGF5b3V0LmdldEd1aSgpfX1hLkVWRU5UX1RBQl9TRUxFQ1RFRD0idGFiU2VsZWN0ZWQiLGEuVEFCX0ZJTFRFUj0iZmlsdGVyTWVudVRhYiIsYS5UQUJfR0VORVJBTD0iZ2VuZXJhbE1lbnVUYWIiLGEuVEFCX0NPTFVNTlM9ImNvbHVtbnNNZW51VGFiIixhLlRBQlNfREVGQVVMVD1bYS5UQUJfR0VORVJBTCxhLlRBQl9GSUxURVIsYS5UQUJfQ09MVU1OU10sbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZmlsdGVyTWFuYWdlciIpXSxhLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSxvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjb2x1bW5DaG9vc2VyRmFjdG9yeSIpXSxhLnByb3RvdHlwZSwiY29sdW1uQ2hvb3NlckZhY3RvcnkiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTWVudUZhY3RvcnkiKV0sYS5wcm90b3R5cGUsImNvbHVtbk1lbnVGYWN0b3J5Iix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoIm1lbnVVdGlscyIpXSxhLnByb3RvdHlwZSwibWVudVV0aWxzIix2b2lkIDApLG8oW3MuUG9zdENvbnN0cnVjdF0sYS5wcm90b3R5cGUsImluaXQiLG51bGwpO2NsYXNzIGwgZXh0ZW5kcyBzLkNvbXBvbmVudHtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoJ1xuICAgICAgICAgICAgPGRpdiByZWY9ImVDb2x1bW5NZW51IiByb2xlPSJwcmVzZW50YXRpb24iIGNsYXNzPSJhZy1tZW51IGFnLWNvbHVtbi1tZW51Ij48L2Rpdj5cbiAgICAgICAgJyksdGhpcy5jb2x1bW49ZSx0aGlzLnJlc3RvcmVGb2N1c1BhcmFtcz10LHRoaXMuc291cmNlRWxlbWVudD1pfWluaXQoKXt0aGlzLm1haW5NZW51TGlzdD10aGlzLmNvbHVtbk1lbnVGYWN0b3J5LmNyZWF0ZU1lbnUodGhpcyx0aGlzLmNvbHVtbiwoKT0+e3ZhciBlO3JldHVybiBudWxsIT09KGU9dGhpcy5zb3VyY2VFbGVtZW50KSYmdm9pZCAwIT09ZT9lOnRoaXMuZ2V0R3VpKCl9KSx0aGlzLm1haW5NZW51TGlzdC5hZGRFdmVudExpc3RlbmVyKHMuQWdNZW51SXRlbUNvbXBvbmVudC5FVkVOVF9DTE9TRV9NRU5VLHRoaXMub25IaWRlUG9wdXAuYmluZCh0aGlzKSksdGhpcy5lQ29sdW1uTWVudS5hcHBlbmRDaGlsZCh0aGlzLm1haW5NZW51TGlzdC5nZXRHdWkoKSl9b25IaWRlUG9wdXAoZSl7dGhpcy5tZW51VXRpbHMuY2xvc2VQb3B1cEFuZFJlc3RvcmVGb2N1c09uU2VsZWN0KHRoaXMuaGlkZVBvcHVwRnVuYyx0aGlzLnJlc3RvcmVGb2N1c1BhcmFtcyxlKX1hZnRlckd1aUF0dGFjaGVkKHtoaWRlUG9wdXA6ZX0pe2UmJih0aGlzLmhpZGVQb3B1cEZ1bmM9ZSx0aGlzLmFkZERlc3Ryb3lGdW5jKGUpKSx0aGlzLmZvY3VzU2VydmljZS5mb2N1c0ludG8odGhpcy5tYWluTWVudUxpc3QuZ2V0R3VpKCkpfX1vKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJjb2x1bW5NZW51RmFjdG9yeSIpXSxsLnByb3RvdHlwZSwiY29sdW1uTWVudUZhY3RvcnkiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgibWVudVV0aWxzIildLGwucHJvdG90eXBlLCJtZW51VXRpbHMiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZm9jdXNTZXJ2aWNlIildLGwucHJvdG90eXBlLCJmb2N1c1NlcnZpY2UiLHZvaWQgMCksbyhbT2JqZWN0KHMuUmVmU2VsZWN0b3IpKCJlQ29sdW1uTWVudSIpXSxsLnByb3RvdHlwZSwiZUNvbHVtbk1lbnUiLHZvaWQgMCksbyhbcy5Qb3N0Q29uc3RydWN0XSxsLnByb3RvdHlwZSwiaW5pdCIsbnVsbCk7dmFyIGQ9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07bGV0IGM9Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie2hpZGVBY3RpdmVNZW51KCl7dGhpcy5kZXN0cm95QmVhbih0aGlzLmFjdGl2ZU1lbnUpfWdldE1lbnVJdGVtcyhlLHQsaSl7Y29uc3Qgcj1bXTtpZihzLl8uZXhpc3RzKGUpJiZzLk1vZHVsZVJlZ2lzdHJ5Ll9faXNSZWdpc3RlcmVkKHMuTW9kdWxlTmFtZXMuQ2xpcGJvYXJkTW9kdWxlLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSkmJnQmJih0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQ3V0VG9DbGlwYm9hcmQiKXx8ci5wdXNoKCJjdXQiKSxyLnB1c2goImNvcHkiLCJjb3B5V2l0aEhlYWRlcnMiLCJjb3B5V2l0aEdyb3VwSGVhZGVycyIsInBhc3RlIiwic2VwYXJhdG9yIikpLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZW5hYmxlQ2hhcnRzIikmJnMuTW9kdWxlUmVnaXN0cnkuX19pc1JlZ2lzdGVyZWQocy5Nb2R1bGVOYW1lcy5HcmlkQ2hhcnRzTW9kdWxlLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSkmJih0aGlzLmNvbHVtbk1vZGVsLmlzUGl2b3RNb2RlKCkmJnIucHVzaCgicGl2b3RDaGFydCIpLHRoaXMucmFuZ2VTZXJ2aWNlJiYhdGhpcy5yYW5nZVNlcnZpY2UuaXNFbXB0eSgpJiZyLnB1c2goImNoYXJ0UmFuZ2UiKSkscy5fLmV4aXN0cyhlKSl7Y29uc3QgZT0hcy5Nb2R1bGVSZWdpc3RyeS5fX2lzUmVnaXN0ZXJlZChzLk1vZHVsZU5hbWVzLkNzdkV4cG9ydE1vZHVsZSx0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpLHQ9IXMuTW9kdWxlUmVnaXN0cnkuX19pc1JlZ2lzdGVyZWQocy5Nb2R1bGVOYW1lcy5FeGNlbEV4cG9ydE1vZHVsZSx0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpLGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0V4Y2VsRXhwb3J0Iil8fHQsbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQ3N2RXhwb3J0Iil8fGU7IShzLl8uaXNJT1NVc2VyQWdlbnQoKXx8aSYmbykmJnIucHVzaCgiZXhwb3J0Iil9Y29uc3Qgbz1yLmxlbmd0aD9yOnZvaWQgMCxuPW51bGw9PXQ/dm9pZCAwOnQuZ2V0Q29sRGVmKCkuY29udGV4dE1lbnVJdGVtcztpZihBcnJheS5pc0FycmF5KG4pKXJldHVybiBuO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuKXJldHVybiBuKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe2NvbHVtbjp0LG5vZGU6ZSx2YWx1ZTppLGRlZmF1bHRJdGVtczpvfSkpO3tjb25zdCBzPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJnZXRDb250ZXh0TWVudUl0ZW1zIik7cmV0dXJuIHM/cyh7Y29sdW1uOnQsbm9kZTplLHZhbHVlOmksZGVmYXVsdEl0ZW1zOm99KTpyfX1vbkNvbnRleHRNZW51KGUsdCxpLHMscixvKXt0aGlzLm1lbnVVdGlscy5vbkNvbnRleHRNZW51KGUsdCxlPT50aGlzLnNob3dNZW51KGkscyxyLGUsbykpfXNob3dNZW51KGUsdCxpLHIsbyl7Y29uc3Qgbj10aGlzLmdldE1lbnVJdGVtcyhlLHQsaSksYT10aGlzLmN0cmxzU2VydmljZS5nZXRHcmlkQm9keUN0cmwoKS5nZXRHdWkoKTtpZih2b2lkIDA9PT1ufHxzLl8ubWlzc2luZ09yRW1wdHkobikpcmV0dXJuITE7Y29uc3QgbD1uZXcgaChuLHQsZSxpKTt0aGlzLmNyZWF0ZUJlYW4obCk7Y29uc3QgZD1sLmdldEd1aSgpLGM9e2NvbHVtbjp0LHJvd05vZGU6ZSx0eXBlOiJjb250ZXh0TWVudSIsbW91c2VFdmVudDpyLGVQb3B1cDpkLG51ZGdlWToxfSx1PXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLHA9dGhpcy5wb3B1cFNlcnZpY2UuYWRkUG9wdXAoe21vZGFsOiEwLGVDaGlsZDpkLGNsb3NlT25Fc2M6ITAsY2xvc2VkQ2FsbGJhY2s6KCk9PnthLmNsYXNzTGlzdC5yZW1vdmUoImFnLWNvbnRleHQtbWVudS1vcGVuIiksdGhpcy5kZXN0cm95QmVhbihsKX0sY2xpY2s6cixwb3NpdGlvbkNhbGxiYWNrOigpPT57Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImVuYWJsZVJ0bCIpO3RoaXMucG9wdXBTZXJ2aWNlLnBvc2l0aW9uUG9wdXBVbmRlck1vdXNlRXZlbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGMpLHtudWRnZVg6ZT8tMSooZC5vZmZzZXRXaWR0aCsxKToxfSkpfSxhbmNob3JUb0VsZW1lbnQ6byxhcmlhTGFiZWw6dSgiYXJpYUxhYmVsQ29udGV4dE1lbnUiLCJDb250ZXh0IE1lbnUiKX0pO3JldHVybiBwJiYoYS5jbGFzc0xpc3QuYWRkKCJhZy1jb250ZXh0LW1lbnUtb3BlbiIpLGwuYWZ0ZXJHdWlBdHRhY2hlZCh7Y29udGFpbmVyOiJjb250ZXh0TWVudSIsaGlkZVBvcHVwOnAuaGlkZUZ1bmN9KSksdGhpcy5hY3RpdmVNZW51JiZ0aGlzLmhpZGVBY3RpdmVNZW51KCksdGhpcy5hY3RpdmVNZW51PWwsbC5hZGRFdmVudExpc3RlbmVyKHMuQmVhblN0dWIuRVZFTlRfREVTVFJPWUVELCgpPT57dGhpcy5hY3RpdmVNZW51PT09bCYmKHRoaXMuYWN0aXZlTWVudT1udWxsKX0pLHAmJmwuYWRkRXZlbnRMaXN0ZW5lcihzLkFnTWVudUl0ZW1Db21wb25lbnQuRVZFTlRfQ0xPU0VfTUVOVSxwLmhpZGVGdW5jKSwhMH19O2QoW09iamVjdChzLkF1dG93aXJlZCkoInBvcHVwU2VydmljZSIpXSxjLnByb3RvdHlwZSwicG9wdXBTZXJ2aWNlIix2b2lkIDApLGQoW09iamVjdChzLk9wdGlvbmFsKSgicmFuZ2VTZXJ2aWNlIildLGMucHJvdG90eXBlLCJyYW5nZVNlcnZpY2UiLHZvaWQgMCksZChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY3RybHNTZXJ2aWNlIildLGMucHJvdG90eXBlLCJjdHJsc1NlcnZpY2UiLHZvaWQgMCksZChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sYy5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLGQoW09iamVjdChzLkF1dG93aXJlZCkoIm1lbnVVdGlscyIpXSxjLnByb3RvdHlwZSwibWVudVV0aWxzIix2b2lkIDApLGM9ZChbT2JqZWN0KHMuQmVhbikoImNvbnRleHRNZW51RmFjdG9yeSIpXSxjKTtjbGFzcyBoIGV4dGVuZHMgcy5Db21wb25lbnR7Y29uc3RydWN0b3IoZSx0LGkscyl7c3VwZXIoJzxkaXYgY2xhc3M9ImFnLW1lbnUiIHJvbGU9InByZXNlbnRhdGlvbiI+PC9kaXY+JyksdGhpcy5tZW51SXRlbXM9ZSx0aGlzLmNvbHVtbj10LHRoaXMubm9kZT1pLHRoaXMudmFsdWU9cyx0aGlzLm1lbnVMaXN0PW51bGwsdGhpcy5mb2N1c2VkQ2VsbD1udWxsfWFkZE1lbnVJdGVtcygpe2NvbnN0IGU9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5BZ01lbnVMaXN0KDAse2NvbHVtbjp0aGlzLmNvbHVtbixub2RlOnRoaXMubm9kZSx2YWx1ZTp0aGlzLnZhbHVlfSkpLHQ9dGhpcy5tZW51SXRlbU1hcHBlci5tYXBXaXRoU3RvY2tJdGVtcyh0aGlzLm1lbnVJdGVtcyxudWxsLCgpPT50aGlzLmdldEd1aSgpKTtlLmFkZE1lbnVJdGVtcyh0KSx0aGlzLmFwcGVuZENoaWxkKGUpLHRoaXMubWVudUxpc3Q9ZSxlLmFkZEV2ZW50TGlzdGVuZXIocy5BZ01lbnVJdGVtQ29tcG9uZW50LkVWRU5UX0NMT1NFX01FTlUsZT0+dGhpcy5kaXNwYXRjaEV2ZW50KGUpKX1hZnRlckd1aUF0dGFjaGVkKGUpe2UuaGlkZVBvcHVwJiZ0aGlzLmFkZERlc3Ryb3lGdW5jKGUuaGlkZVBvcHVwKSx0aGlzLmZvY3VzZWRDZWxsPXRoaXMuZm9jdXNTZXJ2aWNlLmdldEZvY3VzZWRDZWxsKCksdGhpcy5tZW51TGlzdCYmdGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNJbnRvKHRoaXMubWVudUxpc3QuZ2V0R3VpKCkpfXJlc3RvcmVGb2N1c2VkQ2VsbCgpe2NvbnN0IGU9dGhpcy5mb2N1c1NlcnZpY2UuZ2V0Rm9jdXNlZENlbGwoKTtpZihlJiZ0aGlzLmZvY3VzZWRDZWxsJiZ0aGlzLmNlbGxQb3NpdGlvblV0aWxzLmVxdWFscyhlLHRoaXMuZm9jdXNlZENlbGwpKXtjb25zdHtyb3dJbmRleDplLHJvd1Bpbm5lZDp0LGNvbHVtbjppfT10aGlzLmZvY3VzZWRDZWxsLHM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKTtzLmFjdGl2ZUVsZW1lbnQ9PT1zLmJvZHkmJnRoaXMuZm9jdXNTZXJ2aWNlLnNldEZvY3VzZWRDZWxsKHtyb3dJbmRleDplLGNvbHVtbjppLHJvd1Bpbm5lZDp0LGZvcmNlQnJvd3NlckZvY3VzOiEwfSl9fWRlc3Ryb3koKXt0aGlzLnJlc3RvcmVGb2N1c2VkQ2VsbCgpLHN1cGVyLmRlc3Ryb3koKX19ZChbT2JqZWN0KHMuQXV0b3dpcmVkKSgibWVudUl0ZW1NYXBwZXIiKV0saC5wcm90b3R5cGUsIm1lbnVJdGVtTWFwcGVyIix2b2lkIDApLGQoW09iamVjdChzLkF1dG93aXJlZCkoImZvY3VzU2VydmljZSIpXSxoLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLGQoW09iamVjdChzLkF1dG93aXJlZCkoImNlbGxQb3NpdGlvblV0aWxzIildLGgucHJvdG90eXBlLCJjZWxsUG9zaXRpb25VdGlscyIsdm9pZCAwKSxkKFtzLlBvc3RDb25zdHJ1Y3RdLGgucHJvdG90eXBlLCJhZGRNZW51SXRlbXMiLG51bGwpO3ZhciB1PWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBwPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1YnttYXBXaXRoU3RvY2tJdGVtcyhlLHQsaSl7aWYoIWUpcmV0dXJuW107Y29uc3Qgcz1bXTtyZXR1cm4gZS5mb3JFYWNoKGU9PntsZXQgcjtpZihyPSJzdHJpbmciPT10eXBlb2YgZT90aGlzLmdldFN0b2NrTWVudUl0ZW0oZSx0LGkpOk9iamVjdC5hc3NpZ24oe30sZSksIXIpcmV0dXJuO2NvbnN0IG89cix7c3ViTWVudTpufT1vO24mJm4gaW5zdGFuY2VvZiBBcnJheSYmKG8uc3ViTWVudT10aGlzLm1hcFdpdGhTdG9ja0l0ZW1zKG4sdCxpKSksbnVsbCE9ciYmcy5wdXNoKHIpfSksc31nZXRTdG9ja01lbnVJdGVtKGUsdCxpKXt2YXIgcjtjb25zdCBvPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpLG49dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJza2lwSGVhZGVyT25BdXRvU2l6ZSIpO3N3aXRjaChlKXtjYXNlInBpblN1Yk1lbnUiOnJldHVybntuYW1lOm8oInBpbkNvbHVtbiIsIlBpbiBDb2x1bW4iKSxpY29uOnMuXy5jcmVhdGVJY29uTm9TcGFuKCJtZW51UGluIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSxzdWJNZW51OlsiY2xlYXJQaW5uZWQiLCJwaW5MZWZ0IiwicGluUmlnaHQiXX07Y2FzZSJwaW5MZWZ0IjpyZXR1cm57bmFtZTpvKCJwaW5MZWZ0IiwiUGluIExlZnQiKSxhY3Rpb246KCk9PnRoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uc1Bpbm5lZChbdF0sImxlZnQiLCJjb250ZXh0TWVudSIpLGNoZWNrZWQ6ISF0JiZ0LmlzUGlubmVkTGVmdCgpfTtjYXNlInBpblJpZ2h0IjpyZXR1cm57bmFtZTpvKCJwaW5SaWdodCIsIlBpbiBSaWdodCIpLGFjdGlvbjooKT0+dGhpcy5jb2x1bW5Nb2RlbC5zZXRDb2x1bW5zUGlubmVkKFt0XSwicmlnaHQiLCJjb250ZXh0TWVudSIpLGNoZWNrZWQ6ISF0JiZ0LmlzUGlubmVkUmlnaHQoKX07Y2FzZSJjbGVhclBpbm5lZCI6cmV0dXJue25hbWU6bygibm9QaW4iLCJObyBQaW4iKSxhY3Rpb246KCk9PnRoaXMuY29sdW1uTW9kZWwuc2V0Q29sdW1uc1Bpbm5lZChbdF0sbnVsbCwiY29udGV4dE1lbnUiKSxjaGVja2VkOiEhdCYmIXQuaXNQaW5uZWQoKX07Y2FzZSJ2YWx1ZUFnZ1N1Yk1lbnUiOnJldHVybiBzLk1vZHVsZVJlZ2lzdHJ5Ll9fYXNzZXJ0UmVnaXN0ZXJlZChzLk1vZHVsZU5hbWVzLlJvd0dyb3VwaW5nTW9kdWxlLCJBZ2dyZWdhdGlvbiBmcm9tIE1lbnUiLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSkmJigobnVsbD09dD92b2lkIDA6dC5pc1ByaW1hcnkoKSl8fChudWxsPT10P3ZvaWQgMDp0LmdldENvbERlZigpLnBpdm90VmFsdWVDb2x1bW4pKT97bmFtZTpvKCJ2YWx1ZUFnZ3JlZ2F0aW9uIiwiVmFsdWUgQWdncmVnYXRpb24iKSxpY29uOnMuXy5jcmVhdGVJY29uTm9TcGFuKCJtZW51VmFsdWUiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpLHN1Yk1lbnU6dGhpcy5jcmVhdGVBZ2dyZWdhdGlvblN1Yk1lbnUodCl9Om51bGw7Y2FzZSJhdXRvU2l6ZVRoaXMiOnJldHVybntuYW1lOm8oImF1dG9zaXplVGhpc2NvbHVtbiIsIkF1dG9zaXplIFRoaXMgQ29sdW1uIiksYWN0aW9uOigpPT50aGlzLmNvbHVtbk1vZGVsLmF1dG9TaXplQ29sdW1uKHQsImNvbnRleHRNZW51IixuKX07Y2FzZSJhdXRvU2l6ZUFsbCI6cmV0dXJue25hbWU6bygiYXV0b3NpemVBbGxDb2x1bW5zIiwiQXV0b3NpemUgQWxsIENvbHVtbnMiKSxhY3Rpb246KCk9PnRoaXMuY29sdW1uTW9kZWwuYXV0b1NpemVBbGxDb2x1bW5zKCJjb250ZXh0TWVudSIsbil9O2Nhc2Uicm93R3JvdXAiOnJldHVybntuYW1lOm8oImdyb3VwQnkiLCJHcm91cCBieSIpKyIgIitzLl8uZXNjYXBlU3RyaW5nKHRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW4odCwiaGVhZGVyIikpLGRpc2FibGVkOihudWxsPT10P3ZvaWQgMDp0LmlzUm93R3JvdXBBY3RpdmUoKSl8fCEobnVsbD09dD92b2lkIDA6dC5nZXRDb2xEZWYoKS5lbmFibGVSb3dHcm91cCksYWN0aW9uOigpPT50aGlzLmNvbHVtbk1vZGVsLmFkZFJvd0dyb3VwQ29sdW1ucyhbdF0sImNvbnRleHRNZW51IiksaWNvbjpzLl8uY3JlYXRlSWNvbk5vU3BhbigibWVudUFkZFJvd0dyb3VwIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKX07Y2FzZSJyb3dVbkdyb3VwIjpjb25zdCBhPXMuXy5jcmVhdGVJY29uTm9TcGFuKCJtZW51UmVtb3ZlUm93R3JvdXAiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpLGw9bnVsbD09dD92b2lkIDA6dC5nZXRDb2xEZWYoKS5zaG93Um93R3JvdXAsZD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImdyb3VwTG9ja0dyb3VwQ29sdW1ucyIpO2lmKCEwPT09bClyZXR1cm57bmFtZTpvKCJ1bmdyb3VwQWxsIiwiVW4tR3JvdXAgQWxsIiksZGlzYWJsZWQ6LTE9PT1kfHxkPj10aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpLmxlbmd0aCxhY3Rpb246KCk9PnRoaXMuY29sdW1uTW9kZWwuc2V0Um93R3JvdXBDb2x1bW5zKHRoaXMuY29sdW1uTW9kZWwuZ2V0Um93R3JvdXBDb2x1bW5zKCkuc2xpY2UoMCxkKSwiY29udGV4dE1lbnUiKSxpY29uOmF9O2lmKCJzdHJpbmciPT10eXBlb2YgbCl7Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmdldFByaW1hcnlDb2x1bW4obCksdD1udWxsIT1lP3MuXy5lc2NhcGVTdHJpbmcodGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5TmFtZUZvckNvbHVtbihlLCJoZWFkZXIiKSk6bDtyZXR1cm57bmFtZTpvKCJ1bmdyb3VwQnkiLCJVbi1Hcm91cCBieSIpKyIgIit0LGRpc2FibGVkOm51bGwhPWUmJnRoaXMuY29sdW1uTW9kZWwuaXNDb2x1bW5Hcm91cGluZ0xvY2tlZChlKSxhY3Rpb246KCk9PnRoaXMuY29sdW1uTW9kZWwucmVtb3ZlUm93R3JvdXBDb2x1bW5zKFtsXSwiY29udGV4dE1lbnUiKSxpY29uOmF9fXJldHVybntuYW1lOm8oInVuZ3JvdXBCeSIsIlVuLUdyb3VwIGJ5IikrIiAiK3MuXy5lc2NhcGVTdHJpbmcodGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5TmFtZUZvckNvbHVtbih0LCJoZWFkZXIiKSksZGlzYWJsZWQ6IShudWxsPT10P3ZvaWQgMDp0LmlzUm93R3JvdXBBY3RpdmUoKSl8fCEobnVsbD09dD92b2lkIDA6dC5nZXRDb2xEZWYoKS5lbmFibGVSb3dHcm91cCl8fHRoaXMuY29sdW1uTW9kZWwuaXNDb2x1bW5Hcm91cGluZ0xvY2tlZCh0KSxhY3Rpb246KCk9PnRoaXMuY29sdW1uTW9kZWwucmVtb3ZlUm93R3JvdXBDb2x1bW5zKFt0XSwiY29udGV4dE1lbnUiKSxpY29uOmF9O2Nhc2UicmVzZXRDb2x1bW5zIjpyZXR1cm57bmFtZTpvKCJyZXNldENvbHVtbnMiLCJSZXNldCBDb2x1bW5zIiksYWN0aW9uOigpPT50aGlzLmNvbHVtbk1vZGVsLnJlc2V0Q29sdW1uU3RhdGUoImNvbnRleHRNZW51Iil9O2Nhc2UiZXhwYW5kQWxsIjpyZXR1cm57bmFtZTpvKCJleHBhbmRBbGwiLCJFeHBhbmQgQWxsIFJvdyBHcm91cHMiKSxhY3Rpb246KCk9PnRoaXMuZ3JpZEFwaS5leHBhbmRBbGwoKX07Y2FzZSJjb250cmFjdEFsbCI6cmV0dXJue25hbWU6bygiY29sbGFwc2VBbGwiLCJDb2xsYXBzZSBBbGwgUm93IEdyb3VwcyIpLGFjdGlvbjooKT0+dGhpcy5ncmlkQXBpLmNvbGxhcHNlQWxsKCl9O2Nhc2UiY29weSI6cmV0dXJuIHMuTW9kdWxlUmVnaXN0cnkuX19hc3NlcnRSZWdpc3RlcmVkKHMuTW9kdWxlTmFtZXMuQ2xpcGJvYXJkTW9kdWxlLCJDb3B5IGZyb20gTWVudSIsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKT97bmFtZTpvKCJjb3B5IiwiQ29weSIpLHNob3J0Y3V0Om8oImN0cmxDIiwiQ3RybCtDIiksaWNvbjpzLl8uY3JlYXRlSWNvbk5vU3BhbigiY2xpcGJvYXJkQ29weSIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCksYWN0aW9uOigpPT50aGlzLmNsaXBib2FyZFNlcnZpY2UuY29weVRvQ2xpcGJvYXJkKCl9Om51bGw7Y2FzZSJjb3B5V2l0aEhlYWRlcnMiOnJldHVybiBzLk1vZHVsZVJlZ2lzdHJ5Ll9fYXNzZXJ0UmVnaXN0ZXJlZChzLk1vZHVsZU5hbWVzLkNsaXBib2FyZE1vZHVsZSwiQ29weSB3aXRoIEhlYWRlcnMgZnJvbSBNZW51Iix0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpP3tuYW1lOm8oImNvcHlXaXRoSGVhZGVycyIsIkNvcHkgd2l0aCBIZWFkZXJzIiksaWNvbjpzLl8uY3JlYXRlSWNvbk5vU3BhbigiY2xpcGJvYXJkQ29weSIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCksYWN0aW9uOigpPT50aGlzLmNsaXBib2FyZFNlcnZpY2UuY29weVRvQ2xpcGJvYXJkKHtpbmNsdWRlSGVhZGVyczohMH0pfTpudWxsO2Nhc2UiY29weVdpdGhHcm91cEhlYWRlcnMiOnJldHVybiBzLk1vZHVsZVJlZ2lzdHJ5Ll9fYXNzZXJ0UmVnaXN0ZXJlZChzLk1vZHVsZU5hbWVzLkNsaXBib2FyZE1vZHVsZSwiQ29weSB3aXRoIEdyb3VwIEhlYWRlcnMgZnJvbSBNZW51Iix0aGlzLmNvbnRleHQuZ2V0R3JpZElkKCkpP3tuYW1lOm8oImNvcHlXaXRoR3JvdXBIZWFkZXJzIiwiQ29weSB3aXRoIEdyb3VwIEhlYWRlcnMiKSxpY29uOnMuXy5jcmVhdGVJY29uTm9TcGFuKCJjbGlwYm9hcmRDb3B5Iix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSxhY3Rpb246KCk9PnRoaXMuY2xpcGJvYXJkU2VydmljZS5jb3B5VG9DbGlwYm9hcmQoe2luY2x1ZGVIZWFkZXJzOiEwLGluY2x1ZGVHcm91cEhlYWRlcnM6ITB9KX06bnVsbDtjYXNlImN1dCI6aWYocy5Nb2R1bGVSZWdpc3RyeS5fX2Fzc2VydFJlZ2lzdGVyZWQocy5Nb2R1bGVOYW1lcy5DbGlwYm9hcmRNb2R1bGUsIkN1dCBmcm9tIE1lbnUiLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSkpe2NvbnN0IGU9dGhpcy5mb2N1c1NlcnZpY2UuZ2V0Rm9jdXNlZENlbGwoKSx0PWU/dGhpcy5yb3dQb3NpdGlvblV0aWxzLmdldFJvd05vZGUoZSk6bnVsbCxpPSEhdCYmKG51bGw9PWU/dm9pZCAwOmUuY29sdW1uLmlzQ2VsbEVkaXRhYmxlKHQpKTtyZXR1cm57bmFtZTpvKCJjdXQiLCJDdXQiKSxzaG9ydGN1dDpvKCJjdHJsWCIsIkN0cmwrWCIpLGljb246cy5fLmNyZWF0ZUljb25Ob1NwYW4oImNsaXBib2FyZEN1dCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCksZGlzYWJsZWQ6IWl8fHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NDdXRUb0NsaXBib2FyZCIpLGFjdGlvbjooKT0+dGhpcy5jbGlwYm9hcmRTZXJ2aWNlLmN1dFRvQ2xpcGJvYXJkKHZvaWQgMCwiY29udGV4dE1lbnUiKX19cmV0dXJuIG51bGw7Y2FzZSJwYXN0ZSI6cmV0dXJuIHMuTW9kdWxlUmVnaXN0cnkuX19hc3NlcnRSZWdpc3RlcmVkKHMuTW9kdWxlTmFtZXMuQ2xpcGJvYXJkTW9kdWxlLCJQYXN0ZSBmcm9tIENsaXBib2FyZCIsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKT97bmFtZTpvKCJwYXN0ZSIsIlBhc3RlIiksc2hvcnRjdXQ6bygiY3RybFYiLCJDdHJsK1YiKSxkaXNhYmxlZDohMCxpY29uOnMuXy5jcmVhdGVJY29uTm9TcGFuKCJjbGlwYm9hcmRQYXN0ZSIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCksYWN0aW9uOigpPT50aGlzLmNsaXBib2FyZFNlcnZpY2UucGFzdGVGcm9tQ2xpcGJvYXJkKCl9Om51bGw7Y2FzZSJleHBvcnQiOmNvbnN0IGM9W10saD1zLk1vZHVsZVJlZ2lzdHJ5Ll9faXNSZWdpc3RlcmVkKHMuTW9kdWxlTmFtZXMuQ3N2RXhwb3J0TW9kdWxlLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSksdT1zLk1vZHVsZVJlZ2lzdHJ5Ll9faXNSZWdpc3RlcmVkKHMuTW9kdWxlTmFtZXMuRXhjZWxFeHBvcnRNb2R1bGUsdGhpcy5jb250ZXh0LmdldEdyaWRJZCgpKTtyZXR1cm4hdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0NzdkV4cG9ydCIpJiZoJiZjLnB1c2goImNzdkV4cG9ydCIpLCF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzRXhjZWxFeHBvcnQiKSYmdSYmYy5wdXNoKCJleGNlbEV4cG9ydCIpLHtuYW1lOm8oImV4cG9ydCIsIkV4cG9ydCIpLHN1Yk1lbnU6YyxpY29uOnMuXy5jcmVhdGVJY29uTm9TcGFuKCJzYXZlIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKX07Y2FzZSJjc3ZFeHBvcnQiOnJldHVybntuYW1lOm8oImNzdkV4cG9ydCIsIkNTViBFeHBvcnQiKSxpY29uOnMuXy5jcmVhdGVJY29uTm9TcGFuKCJjc3ZFeHBvcnQiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpLGFjdGlvbjooKT0+dGhpcy5ncmlkQXBpLmV4cG9ydERhdGFBc0Nzdih7fSl9O2Nhc2UiZXhjZWxFeHBvcnQiOnJldHVybntuYW1lOm8oImV4Y2VsRXhwb3J0IiwiRXhjZWwgRXhwb3J0IiksaWNvbjpzLl8uY3JlYXRlSWNvbk5vU3BhbigiZXhjZWxFeHBvcnQiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpLGFjdGlvbjooKT0+dGhpcy5ncmlkQXBpLmV4cG9ydERhdGFBc0V4Y2VsKCl9O2Nhc2Uic2VwYXJhdG9yIjpyZXR1cm4ic2VwYXJhdG9yIjtjYXNlInBpdm90Q2hhcnQiOmNhc2UiY2hhcnRSYW5nZSI6cmV0dXJuIG51bGwhPT0ocj10aGlzLmNoYXJ0TWVudUl0ZW1NYXBwZXIuZ2V0Q2hhcnRJdGVtcyhlKSkmJnZvaWQgMCE9PXI/cjpudWxsO2Nhc2UiY29sdW1uRmlsdGVyIjpyZXR1cm4gdD97bmFtZTpvKCJjb2x1bW5GaWx0ZXIiLCJDb2x1bW4gRmlsdGVyIiksaWNvbjpzLl8uY3JlYXRlSWNvbk5vU3BhbigiZmlsdGVyIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSxudWxsKSxhY3Rpb246KCk9PnRoaXMubWVudVNlcnZpY2Uuc2hvd0ZpbHRlck1lbnUoe2NvbHVtbjp0LGJ1dHRvbkVsZW1lbnQ6aSgpLGNvbnRhaW5lclR5cGU6ImNvbHVtbkZpbHRlciIscG9zaXRpb25CeToiYnV0dG9uIn0pfTpudWxsO2Nhc2UiY29sdW1uQ2hvb3NlciI6cmV0dXJuIHMuTW9kdWxlUmVnaXN0cnkuX19pc1JlZ2lzdGVyZWQocy5Nb2R1bGVOYW1lcy5Db2x1bW5zVG9vbFBhbmVsTW9kdWxlLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSk/e25hbWU6bygiY29sdW1uQ2hvb3NlciIsIkNob29zZSBDb2x1bW5zIiksaWNvbjpzLl8uY3JlYXRlSWNvbk5vU3BhbigiY29sdW1ucyIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCksYWN0aW9uOigpPT50aGlzLm1lbnVTZXJ2aWNlLnNob3dDb2x1bW5DaG9vc2VyKHtjb2x1bW46dCxldmVudFNvdXJjZTppKCl9KX06bnVsbDtjYXNlInNvcnRBc2NlbmRpbmciOnJldHVybntuYW1lOm8oInNvcnRBc2NlbmRpbmciLCJTb3J0IEFzY2VuZGluZyIpLGljb246cy5fLmNyZWF0ZUljb25Ob1NwYW4oInNvcnRBc2NlbmRpbmciLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpLGFjdGlvbjooKT0+dGhpcy5zb3J0Q29udHJvbGxlci5zZXRTb3J0Rm9yQ29sdW1uKHQsImFzYyIsITEsImNvbHVtbk1lbnUiKX07Y2FzZSJzb3J0RGVzY2VuZGluZyI6cmV0dXJue25hbWU6bygic29ydERlc2NlbmRpbmciLCJTb3J0IERlc2NlbmRpbmciKSxpY29uOnMuXy5jcmVhdGVJY29uTm9TcGFuKCJzb3J0RGVzY2VuZGluZyIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsbnVsbCksYWN0aW9uOigpPT50aGlzLnNvcnRDb250cm9sbGVyLnNldFNvcnRGb3JDb2x1bW4odCwiZGVzYyIsITEsImNvbHVtbk1lbnUiKX07Y2FzZSJzb3J0VW5Tb3J0IjpyZXR1cm57bmFtZTpvKCJzb3J0VW5Tb3J0IiwiQ2xlYXIgU29ydCIpLGljb246cy5fLmNyZWF0ZUljb25Ob1NwYW4oInNvcnRVblNvcnQiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLG51bGwpLGFjdGlvbjooKT0+dGhpcy5zb3J0Q29udHJvbGxlci5zZXRTb3J0Rm9yQ29sdW1uKHQsbnVsbCwhMSwiY29sdW1uTWVudSIpfTtkZWZhdWx0OnJldHVybiBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IHVua25vd24gbWVudSBpdGVtIHR5cGUgIitlKSxudWxsfX1jcmVhdGVBZ2dyZWdhdGlvblN1Yk1lbnUoZSl7Y29uc3QgdD10aGlzLmxvY2FsZVNlcnZpY2UuZ2V0TG9jYWxlVGV4dEZ1bmMoKTtsZXQgaTtpZihlLmlzUHJpbWFyeSgpKWk9ZTtlbHNle2NvbnN0IHQ9ZS5nZXRDb2xEZWYoKS5waXZvdFZhbHVlQ29sdW1uO2k9cy5fLmV4aXN0cyh0KT90OnZvaWQgMH1jb25zdCByPVtdO2lmKGkpe2NvbnN0IGU9aS5pc1ZhbHVlQWN0aXZlKCkscz10aGlzLmFnZ0Z1bmNTZXJ2aWNlLmdldEZ1bmNOYW1lcyhpKTtyLnB1c2goe25hbWU6dCgibm9BZ2dyZWdhdGlvbiIsIk5vbmUiKSxhY3Rpb246KCk9Pnt0aGlzLmNvbHVtbk1vZGVsLnJlbW92ZVZhbHVlQ29sdW1ucyhbaV0sImNvbnRleHRNZW51IiksdGhpcy5jb2x1bW5Nb2RlbC5zZXRDb2x1bW5BZ2dGdW5jKGksdm9pZCAwLCJjb250ZXh0TWVudSIpfSxjaGVja2VkOiFlfSkscy5mb3JFYWNoKHM9PntyLnB1c2goe25hbWU6dChzLHRoaXMuYWdnRnVuY1NlcnZpY2UuZ2V0RGVmYXVsdEZ1bmNMYWJlbChzKSksYWN0aW9uOigpPT57dGhpcy5jb2x1bW5Nb2RlbC5zZXRDb2x1bW5BZ2dGdW5jKGkscywiY29udGV4dE1lbnUiKSx0aGlzLmNvbHVtbk1vZGVsLmFkZFZhbHVlQ29sdW1ucyhbaV0sImNvbnRleHRNZW51Iil9LGNoZWNrZWQ6ZSYmaS5nZXRBZ2dGdW5jKCk9PT1zfSl9KX1yZXR1cm4gcn19O3UoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLHAucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSx1KFtPYmplY3Qocy5BdXRvd2lyZWQpKCJncmlkQXBpIildLHAucHJvdG90eXBlLCJncmlkQXBpIix2b2lkIDApLHUoW09iamVjdChzLk9wdGlvbmFsKSgiY2xpcGJvYXJkU2VydmljZSIpXSxwLnByb3RvdHlwZSwiY2xpcGJvYXJkU2VydmljZSIsdm9pZCAwKSx1KFtPYmplY3Qocy5PcHRpb25hbCkoImFnZ0Z1bmNTZXJ2aWNlIildLHAucHJvdG90eXBlLCJhZ2dGdW5jU2VydmljZSIsdm9pZCAwKSx1KFtPYmplY3Qocy5BdXRvd2lyZWQpKCJmb2N1c1NlcnZpY2UiKV0scC5wcm90b3R5cGUsImZvY3VzU2VydmljZSIsdm9pZCAwKSx1KFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dQb3NpdGlvblV0aWxzIildLHAucHJvdG90eXBlLCJyb3dQb3NpdGlvblV0aWxzIix2b2lkIDApLHUoW09iamVjdChzLkF1dG93aXJlZCkoImNoYXJ0TWVudUl0ZW1NYXBwZXIiKV0scC5wcm90b3R5cGUsImNoYXJ0TWVudUl0ZW1NYXBwZXIiLHZvaWQgMCksdShbT2JqZWN0KHMuQXV0b3dpcmVkKSgibWVudVNlcnZpY2UiKV0scC5wcm90b3R5cGUsIm1lbnVTZXJ2aWNlIix2b2lkIDApLHUoW09iamVjdChzLkF1dG93aXJlZCkoInNvcnRDb250cm9sbGVyIildLHAucHJvdG90eXBlLCJzb3J0Q29udHJvbGxlciIsdm9pZCAwKSxwPXUoW09iamVjdChzLkJlYW4pKCJtZW51SXRlbU1hcHBlciIpXSxwKTt2YXIgZyxtPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBmPWc9Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie2dldENoYXJ0SXRlbXMoZSl7dmFyIHQsaTtpZighdGhpcy5jaGFydFNlcnZpY2UpcmV0dXJuIHZvaWQgcy5Nb2R1bGVSZWdpc3RyeS5fX2Fzc2VydFJlZ2lzdGVyZWQocy5Nb2R1bGVOYW1lcy5HcmlkQ2hhcnRzTW9kdWxlLGB0aGUgQ29udGV4dCBNZW51IGtleSAiJHtlfSJgLHRoaXMuY29udGV4dC5nZXRHcmlkSWQoKSk7Y29uc3Qgcj0icGl2b3RDaGFydCI9PT1lP25ldyB2KHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLHRoaXMuY2hhcnRTZXJ2aWNlLHRoaXMubG9jYWxlU2VydmljZSk6bmV3IEModGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UsdGhpcy5jaGFydFNlcnZpY2UsdGhpcy5sb2NhbGVTZXJ2aWNlKSxvPXRoaXMuY2hhcnRTZXJ2aWNlLmlzRW50ZXJwcmlzZSgpO2xldCBuPXIuZ2V0TWVudUl0ZW0oKTtpZihuJiZuLnN1Yk1lbnUmJiFvKXtjb25zdCBlPXQ9Pnt2YXIgaTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtzdWJNZW51Om51bGw9PT0oaT10LnN1Yk1lbnUpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmZpbHRlcihlPT4hZS5fZW50ZXJwcmlzZSkubWFwKHQ9PmUodCkpfSl9O249ZShuKX1jb25zdCBhPW51bGw9PT0oaT1udWxsPT09KHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjaGFydFRvb2xQYW5lbHNEZWYiKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc2V0dGluZ3NQYW5lbCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuY2hhcnRHcm91cHNEZWY7cmV0dXJuIGEmJihuPWcuZmlsdGVyQW5kT3JkZXJDaGFydE1lbnUobixhLHIuZ2V0Q29uZmlnTG9va3VwKCkpKSx0aGlzLmNsZWFuSW50ZXJuYWxzKG4pfWNsZWFuSW50ZXJuYWxzKGUpe2lmKCFlKXJldHVybiBlO2NvbnN0IHQ9ZT0+e3ZhciBpO3JldHVybiBudWxsPT1lfHxkZWxldGUgZS5fa2V5LG51bGw9PWV8fGRlbGV0ZSBlLl9lbnRlcnByaXNlLG51bGw9PT0oaT1udWxsPT1lP3ZvaWQgMDplLnN1Yk1lbnUpfHx2b2lkIDA9PT1pfHxpLmZvckVhY2goZT0+dChlKSksZX07cmV0dXJuIHQoZSl9c3RhdGljIGJ1aWxkTG9va3VwKGUpe2xldCB0PXt9O2NvbnN0IGk9ZT0+e3RbZS5fa2V5XT1lLGUuc3ViTWVudSYmZS5zdWJNZW51LmZvckVhY2goZT0+aShlKSl9O3JldHVybiBpKGUpLHR9c3RhdGljIGZpbHRlckFuZE9yZGVyQ2hhcnRNZW51KGUsdCxpKXt2YXIgcjtjb25zdCBvPXRoaXMuYnVpbGRMb29rdXAoZSk7bGV0IG49T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtzdWJNZW51OltdfSk7aWYoT2JqZWN0LmVudHJpZXModCkuZm9yRWFjaCgoW2UsdF0pPT57dmFyIHIsYTtjb25zdCBsPWlbZV07aWYobnVsbD09PWwpcmV0dXJuO2lmKG51bGw9PWwpcmV0dXJuIHZvaWQgcy5fLndhcm5PbmNlKGBpbnZhbGlkIGNoYXJ0R3JvdXBzRGVmIGNvbmZpZyAnJHtlfSdgKTtjb25zdCBkPW9bbC5fa2V5XTtpZihkKWlmKGQuc3ViTWVudSl7Y29uc3QgaT10Lm1hcCh0PT57Y29uc3QgaT1sW3RdO2lmKG51bGwhPWkpcmV0dXJuIG9baV07cy5fLndhcm5PbmNlKGBpbnZhbGlkIGNoYXJ0R3JvdXBzRGVmIGNvbmZpZyAnJHtlfS4ke3R9J2ApfSkuZmlsdGVyKGU9PnZvaWQgMCE9PWUpO2kubGVuZ3RoPjAmJihkLnN1Yk1lbnU9aSxudWxsPT09KHI9bi5zdWJNZW51KXx8dm9pZCAwPT09cnx8ci5wdXNoKGQpKX1lbHNlIG51bGw9PT0oYT1uLnN1Yk1lbnUpfHx2b2lkIDA9PT1hfHxhLnB1c2goZCl9KSwwIT0obnVsbD09PShyPW4uc3ViTWVudSl8fHZvaWQgMD09PXI/dm9pZCAwOnIubGVuZ3RoKSlyZXR1cm4gbn19O20oW09iamVjdChzLk9wdGlvbmFsKSgiY2hhcnRTZXJ2aWNlIildLGYucHJvdG90eXBlLCJjaGFydFNlcnZpY2UiLHZvaWQgMCksZj1nPW0oW09iamVjdChzLkJlYW4pKCJjaGFydE1lbnVJdGVtTWFwcGVyIildLGYpO2NsYXNzIHZ7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlPWUsdGhpcy5jaGFydFNlcnZpY2U9dCx0aGlzLmxvY2FsZVNlcnZpY2U9aX1nZXRNZW51SXRlbSgpe2NvbnN0IGU9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCksdD0odCxpLHMscixvPSExKT0+KHtuYW1lOmUodCxpKSxhY3Rpb246KCk9PnRoaXMuY2hhcnRTZXJ2aWNlLmNyZWF0ZVBpdm90Q2hhcnQoe2NoYXJ0VHlwZTpzfSksX2tleTpyLF9lbnRlcnByaXNlOm99KTtyZXR1cm57bmFtZTplKCJwaXZvdENoYXJ0IiwiUGl2b3QgQ2hhcnQiKSxfa2V5OiJwaXZvdENoYXJ0IixzdWJNZW51Olt7X2tleToicGl2b3RDb2x1bW5DaGFydCIsbmFtZTplKCJjb2x1bW5DaGFydCIsIkNvbHVtbiIpLHN1Yk1lbnU6W3QoImdyb3VwZWRDb2x1bW4iLCJHcm91cGVkJmxybTsiLCJncm91cGVkQ29sdW1uIiwicGl2b3RHcm91cGVkQ29sdW1uIiksdCgic3RhY2tlZENvbHVtbiIsIlN0YWNrZWQmbHJtOyIsInN0YWNrZWRDb2x1bW4iLCJwaXZvdFN0YWNrZWRDb2x1bW4iKSx0KCJub3JtYWxpemVkQ29sdW1uIiwiMTAwJSBTdGFja2VkJmxybTsiLCJub3JtYWxpemVkQ29sdW1uIiwicGl2b3ROb3JtYWxpemVkQ29sdW1uIildfSx7X2tleToicGl2b3RCYXJDaGFydCIsbmFtZTplKCJiYXJDaGFydCIsIkJhciIpLHN1Yk1lbnU6W3QoImdyb3VwZWRCYXIiLCJHcm91cGVkJmxybTsiLCJncm91cGVkQmFyIiwicGl2b3RHcm91cGVkQmFyIiksdCgic3RhY2tlZEJhciIsIlN0YWNrZWQmbHJtOyIsInN0YWNrZWRCYXIiLCJwaXZvdFN0YWNrZWRCYXIiKSx0KCJub3JtYWxpemVkQmFyIiwiMTAwJSBTdGFja2VkJmxybTsiLCJub3JtYWxpemVkQmFyIiwicGl2b3ROb3JtYWxpemVkQmFyIildfSx7X2tleToicGl2b3RQaWVDaGFydCIsbmFtZTplKCJwaWVDaGFydCIsIlBpZSIpLHN1Yk1lbnU6W3QoInBpZSIsIlBpZSZscm07IiwicGllIiwicGl2b3RQaWUiKSx0KCJkb251dCIsIkRvbnV0JmxybTsiLCJkb251dCIsInBpdm90RG9udXQiKV19LHQoImxpbmUiLCJMaW5lJmxybTsiLCJsaW5lIiwicGl2b3RMaW5lQ2hhcnQiKSx7X2tleToicGl2b3RYWUNoYXJ0IixuYW1lOmUoInh5Q2hhcnQiLCJYIFkgKFNjYXR0ZXIpIiksc3ViTWVudTpbdCgic2NhdHRlciIsIlNjYXR0ZXImbHJtOyIsInNjYXR0ZXIiLCJwaXZvdFNjYXR0ZXIiKSx0KCJidWJibGUiLCJCdWJibGUmbHJtOyIsImJ1YmJsZSIsInBpdm90QnViYmxlIildfSx7X2tleToicGl2b3RBcmVhQ2hhcnQiLG5hbWU6ZSgiYXJlYUNoYXJ0IiwiQXJlYSIpLHN1Yk1lbnU6W3QoImFyZWEiLCJBcmVhJmxybTsiLCJhcmVhIiwicGl2b3RBcmVhIiksdCgic3RhY2tlZEFyZWEiLCJTdGFja2VkJmxybTsiLCJzdGFja2VkQXJlYSIsInBpdm90U3RhY2tlZEFyZWEiKSx0KCJub3JtYWxpemVkQXJlYSIsIjEwMCUgU3RhY2tlZCZscm07Iiwibm9ybWFsaXplZEFyZWEiLCJwaXZvdE5vcm1hbGl6ZWRBcmVhIildfSx7X2tleToicGl2b3RTdGF0aXN0aWNhbENoYXJ0IixfZW50ZXJwcmlzZTohMSxuYW1lOmUoInN0YXRpc3RpY2FsQ2hhcnQiLCJTdGF0aXN0aWNhbCIpLHN1Yk1lbnU6W3QoImhpc3RvZ3JhbUNoYXJ0IiwiSGlzdG9ncmFtJmxybTsiLCJoaXN0b2dyYW0iLCJwaXZvdEhpc3RvZ3JhbSIsITEpXX0se19rZXk6InBpdm90SGllcmFyY2hpY2FsQ2hhcnQiLF9lbnRlcnByaXNlOiEwLG5hbWU6ZSgiaGllcmFyY2hpY2FsQ2hhcnQiLCJIaWVyYXJjaGljYWwiKSxzdWJNZW51Olt0KCJ0cmVlbWFwQ2hhcnQiLCJUcmVlbWFwJmxybTsiLCJ0cmVlbWFwIiwicGl2b3RUcmVlbWFwIiwhMCksdCgic3VuYnVyc3RDaGFydCIsIlN1bmJ1cnN0JmxybTsiLCJzdW5idXJzdCIsInBpdm90U3VuYnVyc3QiLCEwKV19LHtfa2V5OiJwaXZvdENvbWJpbmF0aW9uQ2hhcnQiLG5hbWU6ZSgiY29tYmluYXRpb25DaGFydCIsIkNvbWJpbmF0aW9uIiksc3ViTWVudTpbdCgiY29sdW1uTGluZUNvbWJvIiwiQ29sdW1uICYgTGluZSZscm07IiwiY29sdW1uTGluZUNvbWJvIiwicGl2b3RDb2x1bW5MaW5lQ29tYm8iKSx0KCJBcmVhQ29sdW1uQ29tYm8iLCJBcmVhICYgQ29sdW1uJmxybTsiLCJhcmVhQ29sdW1uQ29tYm8iLCJwaXZvdEFyZWFDb2x1bW5Db21ibyIpXX1dLGljb246cy5fLmNyZWF0ZUljb25Ob1NwYW4oImNoYXJ0Iix0aGlzLmdyaWRPcHRpb25zU2VydmljZSx2b2lkIDApfX1nZXRDb25maWdMb29rdXAoKXtyZXR1cm57Y29sdW1uR3JvdXA6e19rZXk6InBpdm90Q29sdW1uQ2hhcnQiLGNvbHVtbjoicGl2b3RHcm91cGVkQ29sdW1uIixzdGFja2VkQ29sdW1uOiJwaXZvdFN0YWNrZWRDb2x1bW4iLG5vcm1hbGl6ZWRDb2x1bW46InBpdm90Tm9ybWFsaXplZENvbHVtbiJ9LGJhckdyb3VwOntfa2V5OiJwaXZvdEJhckNoYXJ0IixiYXI6InBpdm90R3JvdXBlZEJhciIsc3RhY2tlZEJhcjoicGl2b3RTdGFja2VkQmFyIixub3JtYWxpemVkQmFyOiJwaXZvdE5vcm1hbGl6ZWRCYXIifSxwaWVHcm91cDp7X2tleToicGl2b3RQaWVDaGFydCIscGllOiJwaXZvdFBpZSIsZG9udXQ6InBpdm90RG9udXQiLGRvdWdobnV0OiJwaXZvdERvbnV0In0sbGluZUdyb3VwOntfa2V5OiJwaXZvdExpbmVDaGFydCIsbGluZToicGl2b3RMaW5lQ2hhcnQifSxzY2F0dGVyR3JvdXA6e19rZXk6InBpdm90WFlDaGFydCIsYnViYmxlOiJwaXZvdEJ1YmJsZSIsc2NhdHRlcjoicGl2b3RTY2F0dGVyIn0sYXJlYUdyb3VwOntfa2V5OiJwaXZvdEFyZWFDaGFydCIsYXJlYToicGl2b3RBcmVhIixzdGFja2VkQXJlYToicGl2b3RTdGFja2VkQXJlYSIsbm9ybWFsaXplZEFyZWE6InBpdm90Tm9ybWFsaXplZEFyZWEifSxjb21iaW5hdGlvbkdyb3VwOntfa2V5OiJwaXZvdENvbWJpbmF0aW9uQ2hhcnQiLGNvbHVtbkxpbmVDb21ibzoicGl2b3RDb2x1bW5MaW5lQ29tYm8iLGFyZWFDb2x1bW5Db21ibzoicGl2b3RBcmVhQ29sdW1uQ29tYm8iLGN1c3RvbUNvbWJvOm51bGx9LGhpZXJhcmNoaWNhbEdyb3VwOntfa2V5OiJwaXZvdEhpZXJhcmNoaWNhbENoYXJ0Iix0cmVlbWFwOiJwaXZvdFRyZWVtYXAiLHN1bmJ1cnN0OiJwaXZvdFN1bmJ1cnN0In0sc3RhdGlzdGljYWxHcm91cDp7X2tleToicGl2b3RTdGF0aXN0aWNhbENoYXJ0IixoaXN0b2dyYW06InBpdm90SGlzdG9ncmFtIixyYW5nZUJhcjpudWxsLHJhbmdlQXJlYTpudWxsLGJveFBsb3Q6bnVsbH0scG9sYXJHcm91cDpudWxsLHNwZWNpYWxpemVkR3JvdXA6bnVsbH19fWNsYXNzIEN7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlPWUsdGhpcy5jaGFydFNlcnZpY2U9dCx0aGlzLmxvY2FsZVNlcnZpY2U9aX1nZXRNZW51SXRlbSgpe2NvbnN0IGU9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCksdD0odCxpLHMscixvPSExKT0+KHtuYW1lOmUodCxpKSxhY3Rpb246KCk9PnRoaXMuY2hhcnRTZXJ2aWNlLmNyZWF0ZUNoYXJ0RnJvbUN1cnJlbnRSYW5nZShzKSxfa2V5OnIsX2VudGVycHJpc2U6b30pO3JldHVybntuYW1lOmUoImNoYXJ0UmFuZ2UiLCJDaGFydCBSYW5nZSIpLF9rZXk6ImNoYXJ0UmFuZ2UiLHN1Yk1lbnU6W3tuYW1lOmUoImNvbHVtbkNoYXJ0IiwiQ29sdW1uIiksc3ViTWVudTpbdCgiZ3JvdXBlZENvbHVtbiIsIkdyb3VwZWQmbHJtOyIsImdyb3VwZWRDb2x1bW4iLCJyYW5nZUdyb3VwZWRDb2x1bW4iKSx0KCJzdGFja2VkQ29sdW1uIiwiU3RhY2tlZCZscm07Iiwic3RhY2tlZENvbHVtbiIsInJhbmdlU3RhY2tlZENvbHVtbiIpLHQoIm5vcm1hbGl6ZWRDb2x1bW4iLCIxMDAlIFN0YWNrZWQmbHJtOyIsIm5vcm1hbGl6ZWRDb2x1bW4iLCJyYW5nZU5vcm1hbGl6ZWRDb2x1bW4iKV0sX2tleToicmFuZ2VDb2x1bW5DaGFydCJ9LHtuYW1lOmUoImJhckNoYXJ0IiwiQmFyIiksc3ViTWVudTpbdCgiZ3JvdXBlZEJhciIsIkdyb3VwZWQmbHJtOyIsImdyb3VwZWRCYXIiLCJyYW5nZUdyb3VwZWRCYXIiKSx0KCJzdGFja2VkQmFyIiwiU3RhY2tlZCZscm07Iiwic3RhY2tlZEJhciIsInJhbmdlU3RhY2tlZEJhciIpLHQoIm5vcm1hbGl6ZWRCYXIiLCIxMDAlIFN0YWNrZWQmbHJtOyIsIm5vcm1hbGl6ZWRCYXIiLCJyYW5nZU5vcm1hbGl6ZWRCYXIiKV0sX2tleToicmFuZ2VCYXJDaGFydCJ9LHtuYW1lOmUoInBpZUNoYXJ0IiwiUGllIiksc3ViTWVudTpbdCgicGllIiwiUGllJmxybTsiLCJwaWUiLCJyYW5nZVBpZSIpLHQoImRvbnV0IiwiRG9udXQmbHJtOyIsImRvbnV0IiwicmFuZ2VEb251dCIpXSxfa2V5OiJyYW5nZVBpZUNoYXJ0In0sdCgibGluZSIsIkxpbmUmbHJtOyIsImxpbmUiLCJyYW5nZUxpbmVDaGFydCIpLHtuYW1lOmUoInh5Q2hhcnQiLCJYIFkgKFNjYXR0ZXIpIiksc3ViTWVudTpbdCgic2NhdHRlciIsIlNjYXR0ZXImbHJtOyIsInNjYXR0ZXIiLCJyYW5nZVNjYXR0ZXIiKSx0KCJidWJibGUiLCJCdWJibGUmbHJtOyIsImJ1YmJsZSIsInJhbmdlQnViYmxlIildLF9rZXk6InJhbmdlWFlDaGFydCJ9LHtuYW1lOmUoImFyZWFDaGFydCIsIkFyZWEiKSxzdWJNZW51Olt0KCJhcmVhIiwiQXJlYSZscm07IiwiYXJlYSIsInJhbmdlQXJlYSIpLHQoInN0YWNrZWRBcmVhIiwiU3RhY2tlZCZscm07Iiwic3RhY2tlZEFyZWEiLCJyYW5nZVN0YWNrZWRBcmVhIiksdCgibm9ybWFsaXplZEFyZWEiLCIxMDAlIFN0YWNrZWQmbHJtOyIsIm5vcm1hbGl6ZWRBcmVhIiwicmFuZ2VOb3JtYWxpemVkQXJlYSIpXSxfa2V5OiJyYW5nZUFyZWFDaGFydCJ9LHtuYW1lOmUoInBvbGFyQ2hhcnQiLCJQb2xhciIpLHN1Yk1lbnU6W3QoInJhZGFyTGluZSIsIlJhZGFyIExpbmUmbHJtOyIsInJhZGFyTGluZSIsInJhbmdlUmFkYXJMaW5lIiksdCgicmFkYXJBcmVhIiwiUmFkYXIgQXJlYSZscm07IiwicmFkYXJBcmVhIiwicmFuZ2VSYWRhckFyZWEiKSx0KCJuaWdodGluZ2FsZSIsIk5pZ2h0aW5nYWxlJmxybTsiLCJuaWdodGluZ2FsZSIsInJhbmdlTmlnaHRpbmdhbGUiKSx0KCJyYWRpYWxDb2x1bW4iLCJSYWRpYWwgQ29sdW1uJmxybTsiLCJyYWRpYWxDb2x1bW4iLCJyYW5nZVJhZGlhbENvbHVtbiIpLHQoInJhZGlhbEJhciIsIlJhZGlhbCBCYXImbHJtOyIsInJhZGlhbEJhciIsInJhbmdlUmFkaWFsQmFyIildLF9rZXk6InJhbmdlUG9sYXJDaGFydCIsX2VudGVycHJpc2U6ITB9LHtuYW1lOmUoInN0YXRpc3RpY2FsQ2hhcnQiLCJTdGF0aXN0aWNhbCIpLHN1Yk1lbnU6W3QoImJveFBsb3QiLCJCb3ggUGxvdCZscm07IiwiYm94UGxvdCIsInJhbmdlQm94UGxvdCIsITApLHQoImhpc3RvZ3JhbUNoYXJ0IiwiSGlzdG9ncmFtJmxybTsiLCJoaXN0b2dyYW0iLCJyYW5nZUhpc3RvZ3JhbSIsITEpLHQoInJhbmdlQmFyIiwiUmFuZ2UgQmFyJmxybTsiLCJyYW5nZUJhciIsInJhbmdlUmFuZ2VCYXIiLCEwKSx0KCJyYW5nZUFyZWEiLCJSYW5nZSBBcmVhJmxybTsiLCJyYW5nZUFyZWEiLCJyYW5nZVJhbmdlQXJlYSIsITApXSxfa2V5OiJyYW5nZVN0YXRpc3RpY2FsQ2hhcnQiLF9lbnRlcnByaXNlOiExfSx7bmFtZTplKCJoaWVyYXJjaGljYWxDaGFydCIsIkhpZXJhcmNoaWNhbCIpLHN1Yk1lbnU6W3QoInRyZWVtYXAiLCJUcmVlbWFwJmxybTsiLCJ0cmVlbWFwIiwicmFuZ2VUcmVlbWFwIiksdCgic3VuYnVyc3QiLCJTdW5idXJzdCZscm07Iiwic3VuYnVyc3QiLCJyYW5nZVN1bmJ1cnN0IildLF9rZXk6InJhbmdlSGllcmFyY2hpY2FsQ2hhcnQiLF9lbnRlcnByaXNlOiEwfSx7bmFtZTplKCJzcGVjaWFsaXplZENoYXJ0IiwiU3BlY2lhbGl6ZWQiKSxzdWJNZW51Olt0KCJoZWF0bWFwIiwiSGVhdG1hcCZscm07IiwiaGVhdG1hcCIsInJhbmdlSGVhdG1hcCIpLHQoIndhdGVyZmFsbCIsIldhdGVyZmFsbCZscm07Iiwid2F0ZXJmYWxsIiwicmFuZ2VXYXRlcmZhbGwiKV0sX2tleToicmFuZ2VTcGVjaWFsaXplZENoYXJ0IixfZW50ZXJwcmlzZTohMH0se25hbWU6ZSgiY29tYmluYXRpb25DaGFydCIsIkNvbWJpbmF0aW9uIiksc3ViTWVudTpbdCgiY29sdW1uTGluZUNvbWJvIiwiQ29sdW1uICYgTGluZSZscm07IiwiY29sdW1uTGluZUNvbWJvIiwicmFuZ2VDb2x1bW5MaW5lQ29tYm8iKSx0KCJBcmVhQ29sdW1uQ29tYm8iLCJBcmVhICYgQ29sdW1uJmxybTsiLCJhcmVhQ29sdW1uQ29tYm8iLCJyYW5nZUFyZWFDb2x1bW5Db21ibyIpXSxfa2V5OiJyYW5nZUNvbWJpbmF0aW9uQ2hhcnQifV0saWNvbjpzLl8uY3JlYXRlSWNvbk5vU3BhbigiY2hhcnQiLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLHZvaWQgMCl9fWdldENvbmZpZ0xvb2t1cCgpe3JldHVybntjb2x1bW5Hcm91cDp7X2tleToicmFuZ2VDb2x1bW5DaGFydCIsY29sdW1uOiJyYW5nZUdyb3VwZWRDb2x1bW4iLHN0YWNrZWRDb2x1bW46InJhbmdlU3RhY2tlZENvbHVtbiIsbm9ybWFsaXplZENvbHVtbjoicmFuZ2VOb3JtYWxpemVkQ29sdW1uIn0sYmFyR3JvdXA6e19rZXk6InJhbmdlQmFyQ2hhcnQiLGJhcjoicmFuZ2VHcm91cGVkQmFyIixzdGFja2VkQmFyOiJyYW5nZVN0YWNrZWRCYXIiLG5vcm1hbGl6ZWRCYXI6InJhbmdlTm9ybWFsaXplZEJhciJ9LHBpZUdyb3VwOntfa2V5OiJyYW5nZVBpZUNoYXJ0IixwaWU6InJhbmdlUGllIixkb251dDoicmFuZ2VEb251dCIsZG91Z2hudXQ6InJhbmdlRG9udXQifSxsaW5lR3JvdXA6e19rZXk6InJhbmdlTGluZUNoYXJ0IixsaW5lOiJyYW5nZUxpbmVDaGFydCJ9LHNjYXR0ZXJHcm91cDp7X2tleToicmFuZ2VYWUNoYXJ0IixidWJibGU6InJhbmdlQnViYmxlIixzY2F0dGVyOiJyYW5nZVNjYXR0ZXIifSxhcmVhR3JvdXA6e19rZXk6InJhbmdlQXJlYUNoYXJ0IixhcmVhOiJyYW5nZUFyZWEiLHN0YWNrZWRBcmVhOiJyYW5nZVN0YWNrZWRBcmVhIixub3JtYWxpemVkQXJlYToicmFuZ2VOb3JtYWxpemVkQXJlYSJ9LHBvbGFyR3JvdXA6e19rZXk6InJhbmdlUG9sYXJDaGFydCIscmFkYXJMaW5lOiJyYW5nZVJhZGFyTGluZSIscmFkYXJBcmVhOiJyYW5nZVJhZGFyQXJlYSIsbmlnaHRpbmdhbGU6InJhbmdlTmlnaHRpbmdhbGUiLHJhZGlhbENvbHVtbjoicmFuZ2VSYWRpYWxDb2x1bW4iLHJhZGlhbEJhcjoicmFuZ2VSYWRpYWxCYXIifSxzdGF0aXN0aWNhbEdyb3VwOntfa2V5OiJyYW5nZVN0YXRpc3RpY2FsQ2hhcnQiLGJveFBsb3Q6InJhbmdlQm94UGxvdCIsaGlzdG9ncmFtOiJyYW5nZUhpc3RvZ3JhbSIscmFuZ2VCYXI6InJhbmdlUmFuZ2VCYXIiLHJhbmdlQXJlYToicmFuZ2VSYW5nZUFyZWEifSxoaWVyYXJjaGljYWxHcm91cDp7X2tleToicmFuZ2VIaWVyYXJjaGljYWxDaGFydCIsdHJlZW1hcDoicmFuZ2VUcmVlbWFwIixzdW5idXJzdDoicmFuZ2VTdW5idXJzdCJ9LHNwZWNpYWxpemVkR3JvdXA6e19rZXk6InJhbmdlU3BlY2lhbGl6ZWRDaGFydCIsaGVhdG1hcDoicmFuZ2VIZWF0bWFwIix3YXRlcmZhbGw6InJhbmdlV2F0ZXJmYWxsIn0sY29tYmluYXRpb25Hcm91cDp7X2tleToicmFuZ2VDb21iaW5hdGlvbkNoYXJ0Iixjb2x1bW5MaW5lQ29tYm86InJhbmdlQ29sdW1uTGluZUNvbWJvIixhcmVhQ29sdW1uQ29tYm86InJhbmdlQXJlYUNvbHVtbkNvbWJvIixjdXN0b21Db21ibzpudWxsfX19fXZhciB5PWkoOCksUz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgdz1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7Y3JlYXRlQ29sdW1uU2VsZWN0UGFuZWwoZSx0LGkscyl7dmFyIHIsbztjb25zdCBuPWUuY3JlYXRlTWFuYWdlZEJlYW4obmV3IHkuUHJpbWFyeUNvbHNQYW5lbCksYT1udWxsIT09KG89bnVsbCE9PShyPW51bGwhPXM/czpudWxsPT10P3ZvaWQgMDp0LmdldENvbERlZigpLmNvbHVtbkNob29zZXJQYXJhbXMpJiZ2b2lkIDAhPT1yP3I6bnVsbD09dD92b2lkIDA6dC5nZXRDb2xEZWYoKS5jb2x1bW5zTWVudVBhcmFtcykmJnZvaWQgMCE9PW8/bzp7fSx7Y29udHJhY3RDb2x1bW5TZWxlY3Rpb246bCxzdXBwcmVzc0NvbHVtbkV4cGFuZEFsbDpkLHN1cHByZXNzQ29sdW1uRmlsdGVyOmMsc3VwcHJlc3NDb2x1bW5TZWxlY3RBbGw6aCxzdXBwcmVzc1N5bmNMYXlvdXRXaXRoR3JpZDp1LGNvbHVtbkxheW91dDpwfT1hO3JldHVybiBuLmluaXQoISFpLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3N1cHByZXNzQ29sdW1uTW92ZTohMSxzdXBwcmVzc1ZhbHVlczohMSxzdXBwcmVzc1Bpdm90czohMSxzdXBwcmVzc1Jvd0dyb3VwczohMSxzdXBwcmVzc1Bpdm90TW9kZTohMSxjb250cmFjdENvbHVtblNlbGVjdGlvbjohIWwsc3VwcHJlc3NDb2x1bW5FeHBhbmRBbGw6ISFkLHN1cHByZXNzQ29sdW1uRmlsdGVyOiEhYyxzdXBwcmVzc0NvbHVtblNlbGVjdEFsbDohIWgsc3VwcHJlc3NTeW5jTGF5b3V0V2l0aEdyaWQ6ISFwfHwhIXUsb25TdGF0ZVVwZGF0ZWQ6KCk9Pnt9fSksImNvbHVtbk1lbnUiKSxwJiZuLnNldENvbHVtbkxheW91dChwKSxufXNob3dDb2x1bW5DaG9vc2VyKHtjb2x1bW46ZSxjaG9vc2VyUGFyYW1zOnQsZXZlbnRTb3VyY2U6aX0pe3RoaXMuaGlkZUFjdGl2ZUNvbHVtbkNob29zZXIoKTtjb25zdCByPXRoaXMuY3JlYXRlQ29sdW1uU2VsZWN0UGFuZWwodGhpcyxlLCEwLHQpLG89dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCksbj10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKS5pbmRleE9mKGUpLGE9ZT90aGlzLmZvY3VzU2VydmljZS5nZXRGb2N1c2VkSGVhZGVyKCk6bnVsbDt0aGlzLmFjdGl2ZUNvbHVtbkNob29zZXJEaWFsb2c9dGhpcy5jcmVhdGVCZWFuKG5ldyBzLkFnRGlhbG9nKHt0aXRsZTpvKCJjaG9vc2VDb2x1bW5zIiwiQ2hvb3NlIENvbHVtbnMiKSxjb21wb25lbnQ6cix3aWR0aDozMDAsaGVpZ2h0OjMwMCxyZXNpemFibGU6ITAsbW92YWJsZTohMCxjZW50ZXJlZDohMCxjbG9zYWJsZTohMCxhZnRlckd1aUF0dGFjaGVkOigpPT57dmFyIHQ7bnVsbD09PSh0PXRoaXMuZm9jdXNTZXJ2aWNlLmZpbmROZXh0Rm9jdXNhYmxlRWxlbWVudChyLmdldEd1aSgpKSl8fHZvaWQgMD09PXR8fHQuZm9jdXMoKSx0aGlzLmRpc3BhdGNoVmlzaWJsZUNoYW5nZWRFdmVudCghMCxlKX0sY2xvc2VkQ2FsbGJhY2s6dD0+e2NvbnN0IHM9dGhpcy5hY3RpdmVDb2x1bW5DaG9vc2VyLmdldEd1aSgpO3RoaXMuZGVzdHJveUJlYW4odGhpcy5hY3RpdmVDb2x1bW5DaG9vc2VyKSx0aGlzLmFjdGl2ZUNvbHVtbkNob29zZXI9dm9pZCAwLHRoaXMuYWN0aXZlQ29sdW1uQ2hvb3NlckRpYWxvZz12b2lkIDAsdGhpcy5kaXNwYXRjaFZpc2libGVDaGFuZ2VkRXZlbnQoITEsZSksZSYmdGhpcy5tZW51VXRpbHMucmVzdG9yZUZvY3VzT25DbG9zZSh7Y29sdW1uOmUsaGVhZGVyUG9zaXRpb246YSxjb2x1bW5JbmRleDpuLGV2ZW50U291cmNlOml9LHMsdCwhMCl9fSkpLHRoaXMuYWN0aXZlQ29sdW1uQ2hvb3Nlcj1yfWhpZGVBY3RpdmVDb2x1bW5DaG9vc2VyKCl7dGhpcy5hY3RpdmVDb2x1bW5DaG9vc2VyRGlhbG9nJiZ0aGlzLmRlc3Ryb3lCZWFuKHRoaXMuYWN0aXZlQ29sdW1uQ2hvb3NlckRpYWxvZyl9ZGlzcGF0Y2hWaXNpYmxlQ2hhbmdlZEV2ZW50KGUsdCl7Y29uc3QgaT17dHlwZTpzLkV2ZW50cy5FVkVOVF9DT0xVTU5fTUVOVV9WSVNJQkxFX0NIQU5HRUQsdmlzaWJsZTplLHN3aXRjaGluZ1RhYjohMSxrZXk6ImNvbHVtbkNob29zZXIiLGNvbHVtbjpudWxsIT10P3Q6bnVsbH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChpKX19O1MoW09iamVjdChzLkF1dG93aXJlZCkoImZvY3VzU2VydmljZSIpXSx3LnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLFMoW09iamVjdChzLkF1dG93aXJlZCkoIm1lbnVVdGlscyIpXSx3LnByb3RvdHlwZSwibWVudVV0aWxzIix2b2lkIDApLFMoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLHcucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSx3PVMoW09iamVjdChzLkJlYW4pKCJjb2x1bW5DaG9vc2VyRmFjdG9yeSIpXSx3KTt2YXIgYixFPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBSPWI9Y2xhc3MgZXh0ZW5kcyBzLkJlYW5TdHVie2NyZWF0ZU1lbnUoZSx0LGkpe2NvbnN0IHI9ZS5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5BZ01lbnVMaXN0KDAse2NvbHVtbjpudWxsIT10P3Q6bnVsbCxub2RlOm51bGwsdmFsdWU6bnVsbH0pKSxvPXRoaXMuZ2V0TWVudUl0ZW1zKHQpLG49dGhpcy5tZW51SXRlbU1hcHBlci5tYXBXaXRoU3RvY2tJdGVtcyhvLG51bGwhPXQ/dDpudWxsLGkpO3JldHVybiByLmFkZE1lbnVJdGVtcyhuKSxyfWdldE1lbnVJdGVtcyhlKXtjb25zdCB0PXRoaXMuZ2V0RGVmYXVsdE1lbnVPcHRpb25zKGUpO2xldCBpO2NvbnN0IHI9bnVsbD09ZT92b2lkIDA6ZS5nZXRDb2xEZWYoKS5tYWluTWVudUl0ZW1zO2lmKEFycmF5LmlzQXJyYXkocikpaT1yO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIHIpaT1yKHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe2NvbHVtbjplLGRlZmF1bHRJdGVtczp0fSkpO2Vsc2V7Y29uc3Qgcz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygiZ2V0TWFpbk1lbnVJdGVtcyIpO2k9cyYmZT9zKHtjb2x1bW46ZSxkZWZhdWx0SXRlbXM6dH0pOnR9cmV0dXJuIHMuXy5yZW1vdmVSZXBlYXRzRnJvbUFycmF5KGksYi5NRU5VX0lURU1fU0VQQVJBVE9SKSxpfWdldERlZmF1bHRNZW51T3B0aW9ucyhlKXtjb25zdCB0PVtdLGk9dGhpcy5tZW51U2VydmljZS5pc0xlZ2FjeU1lbnVFbmFibGVkKCk7aWYoIWUpcmV0dXJuIGl8fHQucHVzaCgiY29sdW1uQ2hvb3NlciIpLHQucHVzaCgicmVzZXRDb2x1bW5zIiksdDtjb25zdCBzPSFlLmdldENvbERlZigpLmxvY2tQaW5uZWQscj10aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpLmxlbmd0aCxvPXI+MCxuPWUuaXNBbGxvd1ZhbHVlKCksYT1lLmlzQWxsb3dSb3dHcm91cCgpLGw9ZS5pc1ByaW1hcnkoKSxkPXRoaXMuY29sdW1uTW9kZWwuaXNQaXZvdE1vZGUoKSxjPSJjbGllbnRTaWRlIj09PXRoaXMucm93TW9kZWwuZ2V0VHlwZSgpLGg9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpLHU9bCYmbyYmbnx8IWw7aWYoIWkmJmUuaXNTb3J0YWJsZSgpKXtjb25zdCBpPWUuZ2V0U29ydCgpOyJhc2MiIT09aSYmdC5wdXNoKCJzb3J0QXNjZW5kaW5nIiksImRlc2MiIT09aSYmdC5wdXNoKCJzb3J0RGVzY2VuZGluZyIpLGkmJnQucHVzaCgic29ydFVuU29ydCIpLHQucHVzaChiLk1FTlVfSVRFTV9TRVBBUkFUT1IpfXRoaXMubWVudVNlcnZpY2UuaXNGaWx0ZXJNZW51SXRlbUVuYWJsZWQoZSkmJih0LnB1c2goImNvbHVtbkZpbHRlciIpLHQucHVzaChiLk1FTlVfSVRFTV9TRVBBUkFUT1IpKSxzJiZ0LnB1c2goInBpblN1Yk1lbnUiKSx1JiZ0LnB1c2goInZhbHVlQWdnU3ViTWVudSIpLChzfHx1KSYmdC5wdXNoKGIuTUVOVV9JVEVNX1NFUEFSQVRPUiksdC5wdXNoKCJhdXRvU2l6ZVRoaXMiKSx0LnB1c2goImF1dG9TaXplQWxsIiksdC5wdXNoKGIuTUVOVV9JVEVNX1NFUEFSQVRPUik7aWYoZS5nZXRDb2xEZWYoKS5zaG93Um93R3JvdXApdC5wdXNoKCJyb3dVbkdyb3VwIik7ZWxzZSBpZihhJiZlLmlzUHJpbWFyeSgpKWlmKGUuaXNSb3dHcm91cEFjdGl2ZSgpKXt0aGlzLmNvbHVtbk1vZGVsLmlzQ29sdW1uR3JvdXBpbmdMb2NrZWQoZSl8fHQucHVzaCgicm93VW5Hcm91cCIpfWVsc2UgdC5wdXNoKCJyb3dHcm91cCIpO3QucHVzaChiLk1FTlVfSVRFTV9TRVBBUkFUT1IpLGl8fHQucHVzaCgiY29sdW1uQ2hvb3NlciIpLHQucHVzaCgicmVzZXRDb2x1bW5zIik7cmV0dXJuIGMmJihofHxyPihkPzE6MCkpJiYodC5wdXNoKCJleHBhbmRBbGwiKSx0LnB1c2goImNvbnRyYWN0QWxsIikpLHR9fTtSLk1FTlVfSVRFTV9TRVBBUkFUT1I9InNlcGFyYXRvciIsRShbT2JqZWN0KHMuQXV0b3dpcmVkKSgibWVudUl0ZW1NYXBwZXIiKV0sUi5wcm90b3R5cGUsIm1lbnVJdGVtTWFwcGVyIix2b2lkIDApLEUoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLFIucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxFKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dNb2RlbCIpXSxSLnByb3RvdHlwZSwicm93TW9kZWwiLHZvaWQgMCksRShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZmlsdGVyTWFuYWdlciIpXSxSLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSxFKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJtZW51U2VydmljZSIpXSxSLnByb3RvdHlwZSwibWVudVNlcnZpY2UiLHZvaWQgMCksUj1iPUUoW09iamVjdChzLkJlYW4pKCJjb2x1bW5NZW51RmFjdG9yeSIpXSxSKTt2YXIgeD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtsZXQgVD1jbGFzcyBleHRlbmRzIHMuQmVhblN0dWJ7cmVzdG9yZUZvY3VzT25DbG9zZShlLHQsaSxzKXtjb25zdHtldmVudFNvdXJjZTpyfT1lLG89aSBpbnN0YW5jZW9mIEtleWJvYXJkRXZlbnQ7aWYoIXMmJiFvfHwhcilyZXR1cm47Y29uc3Qgbj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb2N1bWVudCgpOyh0LmNvbnRhaW5zKG4uYWN0aXZlRWxlbWVudCl8fG4uYWN0aXZlRWxlbWVudD09PW4uYm9keSkmJnRoaXMuZm9jdXNIZWFkZXJDZWxsKGUpfWNsb3NlUG9wdXBBbmRSZXN0b3JlRm9jdXNPblNlbGVjdChlLHQsaSl7bGV0IHM7aSYmaS5ldmVudCYmaS5ldmVudCBpbnN0YW5jZW9mIEtleWJvYXJkRXZlbnQmJihzPWkuZXZlbnQpLGUocyYme2tleWJvYXJkRXZlbnQ6c30pO2NvbnN0IHI9dGhpcy5mb2N1c1NlcnZpY2UuZ2V0Rm9jdXNlZENlbGwoKSxvPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldERvY3VtZW50KCk7aWYoby5hY3RpdmVFbGVtZW50PT09by5ib2R5KWlmKHIpe2NvbnN0e3Jvd0luZGV4OmUscm93UGlubmVkOnQsY29sdW1uOml9PXI7dGhpcy5mb2N1c1NlcnZpY2Uuc2V0Rm9jdXNlZENlbGwoe3Jvd0luZGV4OmUsY29sdW1uOmkscm93UGlubmVkOnQsZm9yY2VCcm93c2VyRm9jdXM6ITAscHJldmVudFNjcm9sbE9uQnJvd3NlckZvY3VzOiEwfSl9ZWxzZSB0aGlzLmZvY3VzSGVhZGVyQ2VsbCh0KX1vbkNvbnRleHRNZW51KGUsdCxpKXtpZighdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJhbGxvd0NvbnRleHRNZW51V2l0aENvbnRyb2xLZXkiKSYmZSYmKGUuY3RybEtleXx8ZS5tZXRhS2V5KSlyZXR1cm47aWYoZSYmdGhpcy5ibG9ja01pZGRsZUNsaWNrU2Nyb2xsc0lmTmVlZGVkKGUpLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NDb250ZXh0TWVudSIpKXJldHVybjtpZihpKG51bGwhPWU/ZTp0LnRvdWNoZXNbMF0pKXsobnVsbCE9ZT9lOnQpLnByZXZlbnREZWZhdWx0KCl9fWZvY3VzSGVhZGVyQ2VsbChlKXtjb25zdHtjb2x1bW46dCxjb2x1bW5JbmRleDppLGhlYWRlclBvc2l0aW9uOnIsZXZlbnRTb3VyY2U6b309ZTtpZih0aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKS5zb21lKGU9PmU9PT10KSYmbyYmcy5fLmlzVmlzaWJsZShvKSl7Y29uc3QgZT10aGlzLmZvY3VzU2VydmljZS5maW5kVGFiYmFibGVQYXJlbnQobyk7ZSYmKHQmJnRoaXMuaGVhZGVyTmF2aWdhdGlvblNlcnZpY2Uuc2Nyb2xsVG9Db2x1bW4odCksZS5mb2N1cygpKX1lbHNlIGlmKHImJi0xIT09aSl7Y29uc3QgZT10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKSx0PWVbaV18fHMuXy5sYXN0KGUpO3QmJnRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzSGVhZGVyUG9zaXRpb24oe2hlYWRlclBvc2l0aW9uOntoZWFkZXJSb3dJbmRleDpyLmhlYWRlclJvd0luZGV4LGNvbHVtbjp0fX0pfX1ibG9ja01pZGRsZUNsaWNrU2Nyb2xsc0lmTmVlZGVkKGUpe2NvbnN0e2dyaWRPcHRpb25zU2VydmljZTp0fT10aGlzLHt3aGljaDppfT1lO3QuZ2V0KCJzdXBwcmVzc01pZGRsZUNsaWNrU2Nyb2xscyIpJiYyPT09aSYmZS5wcmV2ZW50RGVmYXVsdCgpfX07eChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZm9jdXNTZXJ2aWNlIildLFQucHJvdG90eXBlLCJmb2N1c1NlcnZpY2UiLHZvaWQgMCkseChbT2JqZWN0KHMuQXV0b3dpcmVkKSgiaGVhZGVyTmF2aWdhdGlvblNlcnZpY2UiKV0sVC5wcm90b3R5cGUsImhlYWRlck5hdmlnYXRpb25TZXJ2aWNlIix2b2lkIDApLHgoW09iamVjdChzLkF1dG93aXJlZCkoImNvbHVtbk1vZGVsIildLFQucHJvdG90eXBlLCJjb2x1bW5Nb2RlbCIsdm9pZCAwKSxUPXgoW09iamVjdChzLkJlYW4pKCJtZW51VXRpbHMiKV0sVCk7Y29uc3QgRD17dmVyc2lvbjoiMzEuMS4xIixtb2R1bGVOYW1lOnMuTW9kdWxlTmFtZXMuTWVudU1vZHVsZSxiZWFuczpbbixjLHAsZix3LFIsVF0sZGVwZW5kYW50TW9kdWxlczpbci5FbnRlcnByaXNlQ29yZU1vZHVsZV19O2kuZCh0LCJNZW51TW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gRH0pKX0sZnVuY3Rpb24oZSx0LGkpeyJ1c2Ugc3RyaWN0IjtpLnIodCk7dmFyIHMscj1pKDApLG89aSgzKSxuPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59OyFmdW5jdGlvbihlKXtlW2UuRVhQQU5ERUQ9MF09IkVYUEFOREVEIixlW2UuQ09MTEFQU0VEPTFdPSJDT0xMQVBTRUQiLGVbZS5JTkRFVEVSTUlOQVRFPTJdPSJJTkRFVEVSTUlOQVRFIn0oc3x8KHM9e30pKTtjbGFzcyBhIGV4dGVuZHMgci5Db21wb25lbnR7cHJlQ29uc3RydWN0KCl7dGhpcy5zZXRUZW1wbGF0ZSgnPGRpdiBjbGFzcz0iYWctZmlsdGVyLXRvb2xwYW5lbC1zZWFyY2giIHJvbGU9InByZXNlbnRhdGlvbiI+XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9ImVFeHBhbmQiIGNsYXNzPSJhZy1maWx0ZXItdG9vbHBhbmVsLWV4cGFuZCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGFnLWlucHV0LXRleHQtZmllbGQgcmVmPSJlRmlsdGVyVGV4dEZpZWxkIiBjbGFzcz0iYWctZmlsdGVyLXRvb2xwYW5lbC1zZWFyY2gtaW5wdXQiPjwvYWctaW5wdXQtdGV4dC1maWVsZD5cbiAgICAgICAgICAgIDwvZGl2PicpfXBvc3RDb25zdHJ1Y3QoKXtjb25zdCBlPXRoaXMubG9jYWxlU2VydmljZS5nZXRMb2NhbGVUZXh0RnVuYygpO3RoaXMuZUZpbHRlclRleHRGaWVsZC5zZXRBdXRvQ29tcGxldGUoITEpLnNldElucHV0QXJpYUxhYmVsKGUoImFyaWFGaWx0ZXJDb2x1bW5zSW5wdXQiLCJGaWx0ZXIgQ29sdW1ucyBJbnB1dCIpKS5vblZhbHVlQ2hhbmdlKHRoaXMub25TZWFyY2hUZXh0Q2hhbmdlZC5iaW5kKHRoaXMpKSx0aGlzLmNyZWF0ZUV4cGFuZEljb25zKCksdGhpcy5zZXRFeHBhbmRTdGF0ZShzLkVYUEFOREVEKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVFeHBhbmQsImNsaWNrIix0aGlzLm9uRXhwYW5kQ2xpY2tlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxyLkV2ZW50cy5FVkVOVF9ORVdfQ09MVU1OU19MT0FERUQsdGhpcy5zaG93T3JIaWRlT3B0aW9ucy5iaW5kKHRoaXMpKX1pbml0KGUpe3RoaXMucGFyYW1zPWUsdGhpcy5jb2x1bW5Nb2RlbC5pc1JlYWR5KCkmJnRoaXMuc2hvd09ySGlkZU9wdGlvbnMoKX1jcmVhdGVFeHBhbmRJY29ucygpe3RoaXMuZUV4cGFuZC5hcHBlbmRDaGlsZCh0aGlzLmVFeHBhbmRDaGVja2VkPXIuXy5jcmVhdGVJY29uTm9TcGFuKCJjb2x1bW5TZWxlY3RPcGVuIix0aGlzLmdyaWRPcHRpb25zU2VydmljZSkpLHRoaXMuZUV4cGFuZC5hcHBlbmRDaGlsZCh0aGlzLmVFeHBhbmRVbmNoZWNrZWQ9ci5fLmNyZWF0ZUljb25Ob1NwYW4oImNvbHVtblNlbGVjdENsb3NlZCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UpKSx0aGlzLmVFeHBhbmQuYXBwZW5kQ2hpbGQodGhpcy5lRXhwYW5kSW5kZXRlcm1pbmF0ZT1yLl8uY3JlYXRlSWNvbk5vU3BhbigiY29sdW1uU2VsZWN0SW5kZXRlcm1pbmF0ZSIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UpKX1zaG93T3JIaWRlT3B0aW9ucygpe2NvbnN0IGU9IXRoaXMucGFyYW1zLnN1cHByZXNzRmlsdGVyU2VhcmNoLHQ9IXRoaXMucGFyYW1zLnN1cHByZXNzRXhwYW5kQWxsLGk9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCk7dGhpcy5lRmlsdGVyVGV4dEZpZWxkLnNldElucHV0UGxhY2Vob2xkZXIoaSgic2VhcmNoT29vIiwiU2VhcmNoLi4uIikpO2NvbnN0IHM9dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxHcmlkQ29sdW1ucygpLnNvbWUoZT0+ZS5nZXRPcmlnaW5hbFBhcmVudCgpJiZlLmlzRmlsdGVyQWxsb3dlZCgpKTtyLl8uc2V0RGlzcGxheWVkKHRoaXMuZUZpbHRlclRleHRGaWVsZC5nZXRHdWkoKSxlKSxyLl8uc2V0RGlzcGxheWVkKHRoaXMuZUV4cGFuZCx0JiZzKX1vblNlYXJjaFRleHRDaGFuZ2VkKCl7dGhpcy5vblNlYXJjaFRleHRDaGFuZ2VkRGVib3VuY2VkfHwodGhpcy5vblNlYXJjaFRleHRDaGFuZ2VkRGVib3VuY2VkPXIuXy5kZWJvdW5jZSgoKT0+e3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZToic2VhcmNoQ2hhbmdlZCIsc2VhcmNoVGV4dDp0aGlzLmVGaWx0ZXJUZXh0RmllbGQuZ2V0VmFsdWUoKX0pfSwzMDApKSx0aGlzLm9uU2VhcmNoVGV4dENoYW5nZWREZWJvdW5jZWQoKX1vbkV4cGFuZENsaWNrZWQoKXtjb25zdCBlPXRoaXMuY3VycmVudEV4cGFuZFN0YXRlPT09cy5FWFBBTkRFRD97dHlwZToiY29sbGFwc2VBbGwifTp7dHlwZToiZXhwYW5kQWxsIn07dGhpcy5kaXNwYXRjaEV2ZW50KGUpfXNldEV4cGFuZFN0YXRlKGUpe3RoaXMuY3VycmVudEV4cGFuZFN0YXRlPWUsci5fLnNldERpc3BsYXllZCh0aGlzLmVFeHBhbmRDaGVja2VkLHRoaXMuY3VycmVudEV4cGFuZFN0YXRlPT09cy5FWFBBTkRFRCksci5fLnNldERpc3BsYXllZCh0aGlzLmVFeHBhbmRVbmNoZWNrZWQsdGhpcy5jdXJyZW50RXhwYW5kU3RhdGU9PT1zLkNPTExBUFNFRCksci5fLnNldERpc3BsYXllZCh0aGlzLmVFeHBhbmRJbmRldGVybWluYXRlLHRoaXMuY3VycmVudEV4cGFuZFN0YXRlPT09cy5JTkRFVEVSTUlOQVRFKX19bihbT2JqZWN0KHIuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0sYS5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLG4oW09iamVjdChyLlJlZlNlbGVjdG9yKSgiZUV4cGFuZCIpXSxhLnByb3RvdHlwZSwiZUV4cGFuZCIsdm9pZCAwKSxuKFtPYmplY3Qoci5SZWZTZWxlY3RvcikoImVGaWx0ZXJUZXh0RmllbGQiKV0sYS5wcm90b3R5cGUsImVGaWx0ZXJUZXh0RmllbGQiLHZvaWQgMCksbihbci5QcmVDb25zdHJ1Y3RdLGEucHJvdG90eXBlLCJwcmVDb25zdHJ1Y3QiLG51bGwpLG4oW3IuUG9zdENvbnN0cnVjdF0sYS5wcm90b3R5cGUsInBvc3RDb25zdHJ1Y3QiLG51bGwpO3ZhciBsPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGQgZXh0ZW5kcyByLkNvbXBvbmVudHtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGQuVEVNUExBVEUpLHRoaXMuZXhwYW5kZWRDYWxsYmFjaz10LHRoaXMuZXhwYW5kZWQ9ITEsdGhpcy5oaWRlSGVhZGVyPWV9cG9zdENvbnN0cnVjdCgpe3RoaXMuZUV4cGFuZENoZWNrZWQ9ci5fLmNyZWF0ZUljb25Ob1NwYW4oImNvbHVtblNlbGVjdE9wZW4iLHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlKSx0aGlzLmVFeHBhbmRVbmNoZWNrZWQ9ci5fLmNyZWF0ZUljb25Ob1NwYW4oImNvbHVtblNlbGVjdENsb3NlZCIsdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UpLHRoaXMuZUV4cGFuZC5hcHBlbmRDaGlsZCh0aGlzLmVFeHBhbmRDaGVja2VkKSx0aGlzLmVFeHBhbmQuYXBwZW5kQ2hpbGQodGhpcy5lRXhwYW5kVW5jaGVja2VkKX1zZXRDb2x1bW4oZSl7dGhpcy5jb2x1bW49ZSx0aGlzLmVGaWx0ZXJOYW1lLmlubmVyVGV4dD10aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXlOYW1lRm9yQ29sdW1uKHRoaXMuY29sdW1uLCJmaWx0ZXJUb29sUGFuZWwiLCExKXx8IiIsdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5lRmlsdGVyVG9vbFBhbmVsSGVhZGVyLCJjbGljayIsdGhpcy50b2dnbGVFeHBhbmRlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmVGaWx0ZXJUb29sUGFuZWxIZWFkZXIsImtleWRvd24iLGU9PntlLmtleSE9PXIuS2V5Q29kZS5FTlRFUiYmZS5rZXkhPT1yLktleUNvZGUuU1BBQ0V8fChlLnByZXZlbnREZWZhdWx0KCksdGhpcy50b2dnbGVFeHBhbmRlZCgpKX0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHIuRXZlbnRzLkVWRU5UX0ZJTFRFUl9PUEVORUQsdGhpcy5vbkZpbHRlck9wZW5lZC5iaW5kKHRoaXMpKSx0aGlzLmFkZEluSWNvbigiZmlsdGVyIix0aGlzLmVGaWx0ZXJJY29uLHRoaXMuY29sdW1uKSxyLl8uc2V0RGlzcGxheWVkKHRoaXMuZUZpbHRlckljb24sdGhpcy5pc0ZpbHRlckFjdGl2ZSgpLHtza2lwQXJpYUhpZGRlbjohMH0pLHIuXy5zZXREaXNwbGF5ZWQodGhpcy5lRXhwYW5kQ2hlY2tlZCwhMSksdGhpcy5oaWRlSGVhZGVyPyhyLl8uc2V0RGlzcGxheWVkKHRoaXMuZUZpbHRlclRvb2xQYW5lbEhlYWRlciwhMSksdGhpcy5lRmlsdGVyVG9vbFBhbmVsSGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgidGFiaW5kZXgiKSk6dGhpcy5lRmlsdGVyVG9vbFBhbmVsSGVhZGVyLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCIwIiksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5jb2x1bW4sci5Db2x1bW4uRVZFTlRfRklMVEVSX0NIQU5HRUQsdGhpcy5vbkZpbHRlckNoYW5nZWQuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Usci5FdmVudHMuRVZFTlRfRklMVEVSX0RFU1RST1lFRCx0aGlzLm9uRmlsdGVyRGVzdHJveWVkLmJpbmQodGhpcykpfWdldENvbHVtbigpe3JldHVybiB0aGlzLmNvbHVtbn1nZXRDb2x1bW5GaWx0ZXJOYW1lKCl7cmV0dXJuIHRoaXMuY29sdW1uTW9kZWwuZ2V0RGlzcGxheU5hbWVGb3JDb2x1bW4odGhpcy5jb2x1bW4sImZpbHRlclRvb2xQYW5lbCIsITEpfWFkZENzc0NsYXNzVG9UaXRsZUJhcihlKXt0aGlzLmVGaWx0ZXJUb29sUGFuZWxIZWFkZXIuY2xhc3NMaXN0LmFkZChlKX1hZGRJbkljb24oZSx0LGkpe2lmKG51bGw9PXQpcmV0dXJuO2NvbnN0IHM9ci5fLmNyZWF0ZUljb25Ob1NwYW4oZSx0aGlzLmdyaWRPcHRpb25zU2VydmljZSxpKTt0LmFwcGVuZENoaWxkKHMpfWlzRmlsdGVyQWN0aXZlKCl7cmV0dXJuIHRoaXMuZmlsdGVyTWFuYWdlci5pc0ZpbHRlckFjdGl2ZSh0aGlzLmNvbHVtbil9b25GaWx0ZXJDaGFuZ2VkKCl7ci5fLnNldERpc3BsYXllZCh0aGlzLmVGaWx0ZXJJY29uLHRoaXMuaXNGaWx0ZXJBY3RpdmUoKSx7c2tpcEFyaWFIaWRkZW46ITB9KSx0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6ci5Db2x1bW4uRVZFTlRfRklMVEVSX0NIQU5HRUR9KX1vbkZpbHRlckRlc3Ryb3llZChlKXt0aGlzLmV4cGFuZGVkJiYoImFwaSI9PT1lLnNvdXJjZXx8InBhcmFtc1VwZGF0ZWQiPT09ZS5zb3VyY2UpJiZlLmNvbHVtbi5nZXRJZCgpPT09dGhpcy5jb2x1bW4uZ2V0SWQoKSYmdGhpcy5jb2x1bW5Nb2RlbC5nZXRQcmltYXJ5Q29sdW1uKHRoaXMuY29sdW1uKSYmKHRoaXMucmVtb3ZlRmlsdGVyRWxlbWVudCgpLHRoaXMuYWRkRmlsdGVyRWxlbWVudCghMCkpfXRvZ2dsZUV4cGFuZGVkKCl7dGhpcy5leHBhbmRlZD90aGlzLmNvbGxhcHNlKCk6dGhpcy5leHBhbmQoKX1leHBhbmQoKXt0aGlzLmV4cGFuZGVkfHwodGhpcy5leHBhbmRlZD0hMCxyLl8uc2V0QXJpYUV4cGFuZGVkKHRoaXMuZUZpbHRlclRvb2xQYW5lbEhlYWRlciwhMCksci5fLnNldERpc3BsYXllZCh0aGlzLmVFeHBhbmRDaGVja2VkLCEwKSxyLl8uc2V0RGlzcGxheWVkKHRoaXMuZUV4cGFuZFVuY2hlY2tlZCwhMSksdGhpcy5hZGRGaWx0ZXJFbGVtZW50KCksdGhpcy5leHBhbmRlZENhbGxiYWNrKCkpfWFkZEZpbHRlckVsZW1lbnQoZSl7Y29uc3QgdD1yLl8ubG9hZFRlbXBsYXRlKCc8ZGl2IGNsYXNzPSJhZy1maWx0ZXItdG9vbHBhbmVsLWluc3RhbmNlLWZpbHRlciI+PC9kaXY+JyksaT10aGlzLmZpbHRlck1hbmFnZXIuZ2V0T3JDcmVhdGVGaWx0ZXJXcmFwcGVyKHRoaXMuY29sdW1uLCJUT09MQkFSIik7aWYoIWkpcmV0dXJuO2NvbnN0e2ZpbHRlclByb21pc2U6cyxndWlQcm9taXNlOm99PWk7bnVsbD09c3x8cy50aGVuKGk9Pnt0aGlzLnVuZGVybHlpbmdGaWx0ZXI9aSxpJiZvLnRoZW4ocz0+e3MmJnQuYXBwZW5kQ2hpbGQocyksdGhpcy5hZ0ZpbHRlclRvb2xQYW5lbEJvZHkuYXBwZW5kQ2hpbGQodCksaS5hZnRlckd1aUF0dGFjaGVkJiZpLmFmdGVyR3VpQXR0YWNoZWQoe2NvbnRhaW5lcjoidG9vbFBhbmVsIixzdXBwcmVzc0ZvY3VzOmV9KX0pfSl9Y29sbGFwc2UoKXt2YXIgZSx0O3RoaXMuZXhwYW5kZWQmJih0aGlzLmV4cGFuZGVkPSExLHIuXy5zZXRBcmlhRXhwYW5kZWQodGhpcy5lRmlsdGVyVG9vbFBhbmVsSGVhZGVyLCExKSx0aGlzLnJlbW92ZUZpbHRlckVsZW1lbnQoKSxyLl8uc2V0RGlzcGxheWVkKHRoaXMuZUV4cGFuZENoZWNrZWQsITEpLHIuXy5zZXREaXNwbGF5ZWQodGhpcy5lRXhwYW5kVW5jaGVja2VkLCEwKSxudWxsPT09KHQ9bnVsbD09PShlPXRoaXMudW5kZXJseWluZ0ZpbHRlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUuYWZ0ZXJHdWlEZXRhY2hlZCl8fHZvaWQgMD09PXR8fHQuY2FsbChlKSx0aGlzLmV4cGFuZGVkQ2FsbGJhY2soKSl9cmVtb3ZlRmlsdGVyRWxlbWVudCgpe3IuXy5jbGVhckVsZW1lbnQodGhpcy5hZ0ZpbHRlclRvb2xQYW5lbEJvZHkpfWlzRXhwYW5kZWQoKXtyZXR1cm4gdGhpcy5leHBhbmRlZH1yZWZyZXNoRmlsdGVyKGUpe3ZhciB0O2lmKCF0aGlzLmV4cGFuZGVkKXJldHVybjtjb25zdCBpPXRoaXMudW5kZXJseWluZ0ZpbHRlcjtpJiYoZT8iZnVuY3Rpb24iPT10eXBlb2YgaS5yZWZyZXNoVmlydHVhbExpc3QmJmkucmVmcmVzaFZpcnR1YWxMaXN0KCk6bnVsbD09PSh0PWkuYWZ0ZXJHdWlEZXRhY2hlZCl8fHZvaWQgMD09PXR8fHQuY2FsbChpKSl9b25GaWx0ZXJPcGVuZWQoZSl7IkNPTFVNTl9NRU5VIj09PWUuc291cmNlJiZlLmNvbHVtbj09PXRoaXMuY29sdW1uJiZ0aGlzLmV4cGFuZGVkJiZ0aGlzLmNvbGxhcHNlKCl9fWQuVEVNUExBVEU9J1xuICAgICAgICA8ZGl2IGNsYXNzPSJhZy1maWx0ZXItdG9vbHBhbmVsLWluc3RhbmNlIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWZpbHRlci10b29scGFuZWwtaGVhZGVyIGFnLWZpbHRlci10b29scGFuZWwtaW5zdGFuY2UtaGVhZGVyIiByZWY9ImVGaWx0ZXJUb29sUGFuZWxIZWFkZXIiIHJvbGU9ImJ1dHRvbiIgYXJpYS1leHBhbmRlZD0iZmFsc2UiPlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPSJlRXhwYW5kIiBjbGFzcz0iYWctZmlsdGVyLXRvb2xwYW5lbC1leHBhbmQiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxzcGFuIHJlZj0iZUZpbHRlck5hbWUiIGNsYXNzPSJhZy1oZWFkZXItY2VsbC10ZXh0Ij48L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gcmVmPSJlRmlsdGVySWNvbiIgY2xhc3M9ImFnLWhlYWRlci1pY29uIGFnLWZpbHRlci1pY29uIGFnLWZpbHRlci10b29scGFuZWwtaW5zdGFuY2UtaGVhZGVyLWljb24iIGFyaWEtaGlkZGVuPSJ0cnVlIj48L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFnLWZpbHRlci10b29scGFuZWwtaW5zdGFuY2UtYm9keSBhZy1maWx0ZXIiIHJlZj0iYWdGaWx0ZXJUb29sUGFuZWxCb2R5Ij48L2Rpdj5cbiAgICAgICAgPC9kaXY+JyxsKFtPYmplY3Qoci5SZWZTZWxlY3RvcikoImVGaWx0ZXJUb29sUGFuZWxIZWFkZXIiKV0sZC5wcm90b3R5cGUsImVGaWx0ZXJUb29sUGFuZWxIZWFkZXIiLHZvaWQgMCksbChbT2JqZWN0KHIuUmVmU2VsZWN0b3IpKCJlRmlsdGVyTmFtZSIpXSxkLnByb3RvdHlwZSwiZUZpbHRlck5hbWUiLHZvaWQgMCksbChbT2JqZWN0KHIuUmVmU2VsZWN0b3IpKCJhZ0ZpbHRlclRvb2xQYW5lbEJvZHkiKV0sZC5wcm90b3R5cGUsImFnRmlsdGVyVG9vbFBhbmVsQm9keSIsdm9pZCAwKSxsKFtPYmplY3Qoci5SZWZTZWxlY3RvcikoImVGaWx0ZXJJY29uIildLGQucHJvdG90eXBlLCJlRmlsdGVySWNvbiIsdm9pZCAwKSxsKFtPYmplY3Qoci5SZWZTZWxlY3RvcikoImVFeHBhbmQiKV0sZC5wcm90b3R5cGUsImVFeHBhbmQiLHZvaWQgMCksbChbT2JqZWN0KHIuQXV0b3dpcmVkKSgiZmlsdGVyTWFuYWdlciIpXSxkLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSxsKFtPYmplY3Qoci5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSxkLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksbChbci5Qb3N0Q29uc3RydWN0XSxkLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIGM9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgaCBleHRlbmRzIHIuQ29tcG9uZW50e2NvbnN0cnVjdG9yKGUsdCxpLHMscil7c3VwZXIoKSx0aGlzLmNvbHVtbkdyb3VwPWUsdGhpcy5jaGlsZEZpbHRlckNvbXBzPXQsdGhpcy5kZXB0aD1zLHRoaXMuZXhwYW5kZWRDYWxsYmFjaz1pLHRoaXMuc2hvd2luZ0NvbHVtbj1yfXByZUNvbnN0cnVjdCgpe3RoaXMuc2V0VGVtcGxhdGUoaC5URU1QTEFURSx7ZmlsdGVyR3JvdXBDb21wOntjc3NJZGVudGlmaWVyOiJmaWx0ZXItdG9vbHBhbmVsIixkaXJlY3Rpb246InZlcnRpY2FsIn19KX1pbml0KCl7dGhpcy5zZXRHcm91cFRpdGxlKCksdGhpcy5maWx0ZXJHcm91cENvbXAuc2V0QWxpZ25JdGVtcygic3RyZXRjaCIpLHRoaXMuZmlsdGVyR3JvdXBDb21wLmFkZENzc0NsYXNzKCJhZy1maWx0ZXItdG9vbHBhbmVsLWdyb3VwLWxldmVsLSIrdGhpcy5kZXB0aCksdGhpcy5maWx0ZXJHcm91cENvbXAuYWRkQ3NzQ2xhc3NUb1RpdGxlQmFyKGBhZy1maWx0ZXItdG9vbHBhbmVsLWdyb3VwLWxldmVsLSR7dGhpcy5kZXB0aH0taGVhZGVyYCksdGhpcy5jaGlsZEZpbHRlckNvbXBzLmZvckVhY2goZT0+e3RoaXMuZmlsdGVyR3JvdXBDb21wLmFkZEl0ZW0oZSksZS5hZGRDc3NDbGFzc1RvVGl0bGVCYXIoYGFnLWZpbHRlci10b29scGFuZWwtZ3JvdXAtbGV2ZWwtJHt0aGlzLmRlcHRoKzF9LWhlYWRlcmApfSksdGhpcy5yZWZyZXNoRmlsdGVyQ2xhc3MoKSx0aGlzLmFkZEV4cGFuZENvbGxhcHNlTGlzdGVuZXJzKCksdGhpcy5hZGRGaWx0ZXJDaGFuZ2VkTGlzdGVuZXJzKCksdGhpcy5zZXR1cFRvb2x0aXAoKX1zZXR1cFRvb2x0aXAoKXtpZighdGhpcy5zaG93aW5nQ29sdW1uKXJldHVybjtjb25zdCBlPSgpPT57Y29uc3QgZT10aGlzLmNvbHVtbkdyb3VwLmdldENvbERlZigpLmhlYWRlclRvb2x0aXA7dGhpcy5zZXRUb29sdGlwKGUpfTtlKCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Usci5FdmVudHMuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELGUpfWdldFRvb2x0aXBQYXJhbXMoKXtjb25zdCBlPXN1cGVyLmdldFRvb2x0aXBQYXJhbXMoKTtyZXR1cm4gZS5sb2NhdGlvbj0iZmlsdGVyVG9vbFBhbmVsQ29sdW1uR3JvdXAiLGV9YWRkQ3NzQ2xhc3NUb1RpdGxlQmFyKGUpe3RoaXMuZmlsdGVyR3JvdXBDb21wLmFkZENzc0NsYXNzVG9UaXRsZUJhcihlKX1yZWZyZXNoRmlsdGVycyhlKXt0aGlzLmNoaWxkRmlsdGVyQ29tcHMuZm9yRWFjaCh0PT57dCBpbnN0YW5jZW9mIGg/dC5yZWZyZXNoRmlsdGVycyhlKTp0LnJlZnJlc2hGaWx0ZXIoZSl9KX1pc0NvbHVtbkdyb3VwKCl7cmV0dXJuIHRoaXMuY29sdW1uR3JvdXAgaW5zdGFuY2VvZiByLlByb3ZpZGVkQ29sdW1uR3JvdXB9aXNFeHBhbmRlZCgpe3JldHVybiB0aGlzLmZpbHRlckdyb3VwQ29tcC5pc0V4cGFuZGVkKCl9Z2V0Q2hpbGRyZW4oKXtyZXR1cm4gdGhpcy5jaGlsZEZpbHRlckNvbXBzfWdldEZpbHRlckdyb3VwTmFtZSgpe3JldHVybiB0aGlzLmZpbHRlckdyb3VwTmFtZT90aGlzLmZpbHRlckdyb3VwTmFtZToiIn1nZXRGaWx0ZXJHcm91cElkKCl7cmV0dXJuIHRoaXMuY29sdW1uR3JvdXAuZ2V0SWQoKX1oaWRlR3JvdXBJdGVtKGUsdCl7dGhpcy5maWx0ZXJHcm91cENvbXAuaGlkZUl0ZW0oZSx0KX1oaWRlR3JvdXAoZSl7dGhpcy5zZXREaXNwbGF5ZWQoIWUpfWZvckVhY2hUb29sUGFuZWxGaWx0ZXJDaGlsZChlKXt0aGlzLmNoaWxkRmlsdGVyQ29tcHMuZm9yRWFjaCh0PT57dCBpbnN0YW5jZW9mIGQmJmUodCl9KX1hZGRFeHBhbmRDb2xsYXBzZUxpc3RlbmVycygpe2NvbnN0IGU9dGhpcy5pc0NvbHVtbkdyb3VwKCk/KCk9PnRoaXMuZXhwYW5kZWRDYWxsYmFjaygpOigpPT50aGlzLmZvckVhY2hUb29sUGFuZWxGaWx0ZXJDaGlsZChlPT5lLmV4cGFuZCgpKSx0PXRoaXMuaXNDb2x1bW5Hcm91cCgpPygpPT50aGlzLmV4cGFuZGVkQ2FsbGJhY2soKTooKT0+dGhpcy5mb3JFYWNoVG9vbFBhbmVsRmlsdGVyQ2hpbGQoZT0+ZS5jb2xsYXBzZSgpKTt0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmZpbHRlckdyb3VwQ29tcCxyLkFnR3JvdXBDb21wb25lbnQuRVZFTlRfRVhQQU5ERUQsZSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5maWx0ZXJHcm91cENvbXAsci5BZ0dyb3VwQ29tcG9uZW50LkVWRU5UX0NPTExBUFNFRCx0KX1nZXRDb2x1bW5zKCl7cmV0dXJuIHRoaXMuY29sdW1uR3JvdXAgaW5zdGFuY2VvZiByLlByb3ZpZGVkQ29sdW1uR3JvdXA/dGhpcy5jb2x1bW5Hcm91cC5nZXRMZWFmQ29sdW1ucygpOlt0aGlzLmNvbHVtbkdyb3VwXX1hZGRGaWx0ZXJDaGFuZ2VkTGlzdGVuZXJzKCl7dGhpcy5nZXRDb2x1bW5zKCkuZm9yRWFjaChlPT57dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoZSxyLkNvbHVtbi5FVkVOVF9GSUxURVJfQ0hBTkdFRCwoKT0+dGhpcy5yZWZyZXNoRmlsdGVyQ2xhc3MoKSl9KSx0aGlzLmNvbHVtbkdyb3VwIGluc3RhbmNlb2Ygci5Qcm92aWRlZENvbHVtbkdyb3VwfHx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxyLkV2ZW50cy5FVkVOVF9GSUxURVJfT1BFTkVELHRoaXMub25GaWx0ZXJPcGVuZWQuYmluZCh0aGlzKSl9cmVmcmVzaEZpbHRlckNsYXNzKCl7Y29uc3QgZT10aGlzLmdldENvbHVtbnMoKTt0aGlzLmZpbHRlckdyb3VwQ29tcC5hZGRPclJlbW92ZUNzc0NsYXNzKCJhZy1oYXMtZmlsdGVyIixlLnNvbWUoZT0+ZS5pc0ZpbHRlckFjdGl2ZSgpKSl9b25GaWx0ZXJPcGVuZWQoZSl7IkNPTFVNTl9NRU5VIj09PWUuc291cmNlJiZlLmNvbHVtbj09PXRoaXMuY29sdW1uR3JvdXAmJnRoaXMuaXNFeHBhbmRlZCgpJiZ0aGlzLmNvbGxhcHNlKCl9ZXhwYW5kKCl7dGhpcy5maWx0ZXJHcm91cENvbXAudG9nZ2xlR3JvdXBFeHBhbmQoITApfWNvbGxhcHNlKCl7dGhpcy5maWx0ZXJHcm91cENvbXAudG9nZ2xlR3JvdXBFeHBhbmQoITEpfXNldEdyb3VwVGl0bGUoKXt0aGlzLmZpbHRlckdyb3VwTmFtZT10aGlzLmNvbHVtbkdyb3VwIGluc3RhbmNlb2Ygci5Qcm92aWRlZENvbHVtbkdyb3VwP3RoaXMuZ2V0Q29sdW1uR3JvdXBOYW1lKHRoaXMuY29sdW1uR3JvdXApOnRoaXMuZ2V0Q29sdW1uTmFtZSh0aGlzLmNvbHVtbkdyb3VwKSx0aGlzLmZpbHRlckdyb3VwQ29tcC5zZXRUaXRsZSh0aGlzLmZpbHRlckdyb3VwTmFtZXx8IiIpfWdldENvbHVtbkdyb3VwTmFtZShlKXtyZXR1cm4gdGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5TmFtZUZvclByb3ZpZGVkQ29sdW1uR3JvdXAobnVsbCxlLCJmaWx0ZXJUb29sUGFuZWwiKX1nZXRDb2x1bW5OYW1lKGUpe3JldHVybiB0aGlzLmNvbHVtbk1vZGVsLmdldERpc3BsYXlOYW1lRm9yQ29sdW1uKGUsImZpbHRlclRvb2xQYW5lbCIsITEpfWRlc3Ryb3lGaWx0ZXJzKCl7dGhpcy5jaGlsZEZpbHRlckNvbXBzPXRoaXMuZGVzdHJveUJlYW5zKHRoaXMuY2hpbGRGaWx0ZXJDb21wcyksci5fLmNsZWFyRWxlbWVudCh0aGlzLmdldEd1aSgpKX1kZXN0cm95KCl7dGhpcy5kZXN0cm95RmlsdGVycygpLHN1cGVyLmRlc3Ryb3koKX19aC5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctZmlsdGVyLXRvb2xwYW5lbC1ncm91cC13cmFwcGVyIj5cbiAgICAgICAgICAgIDxhZy1ncm91cC1jb21wb25lbnQgcmVmPSJmaWx0ZXJHcm91cENvbXAiPjwvYWctZ3JvdXAtY29tcG9uZW50PlxuICAgICAgICA8L2Rpdj4nLGMoW09iamVjdChyLlJlZlNlbGVjdG9yKSgiZmlsdGVyR3JvdXBDb21wIildLGgucHJvdG90eXBlLCJmaWx0ZXJHcm91cENvbXAiLHZvaWQgMCksYyhbT2JqZWN0KHIuQXV0b3dpcmVkKSgiY29sdW1uTW9kZWwiKV0saC5wcm90b3R5cGUsImNvbHVtbk1vZGVsIix2b2lkIDApLGMoW3IuUHJlQ29uc3RydWN0XSxoLnByb3RvdHlwZSwicHJlQ29uc3RydWN0IixudWxsKSxjKFtyLlBvc3RDb25zdHJ1Y3RdLGgucHJvdG90eXBlLCJpbml0IixudWxsKTt2YXIgdT1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBwIGV4dGVuZHMgci5Db21wb25lbnR7Y29uc3RydWN0b3IoKXtzdXBlcihwLlRFTVBMQVRFKSx0aGlzLmluaXRpYWxpc2VkPSExLHRoaXMuaGFzTG9hZGVkSW5pdGlhbFN0YXRlPSExLHRoaXMuaXNJbml0aWFsU3RhdGU9ITEsdGhpcy5maWx0ZXJHcm91cENvbXBzPVtdLHRoaXMuc3VwcHJlc3NPbkNvbHVtbnNDaGFuZ2VkPSExLHRoaXMub25Db2x1bW5zQ2hhbmdlZFBlbmRpbmc9ITF9aW5pdChlKXt0aGlzLmluaXRpYWxpc2VkPSEwO2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuYWRkR3JpZENvbW1vblBhcmFtcyh7c3VwcHJlc3NFeHBhbmRBbGw6ITEsc3VwcHJlc3NGaWx0ZXJTZWFyY2g6ITEsc3VwcHJlc3NTeW5jTGF5b3V0V2l0aEdyaWQ6ITF9KTtyLl8ubWVyZ2VEZWVwKHQsZSksdGhpcy5wYXJhbXM9dCx0aGlzLnBhcmFtcy5zdXBwcmVzc1N5bmNMYXlvdXRXaXRoR3JpZHx8dGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Usci5FdmVudHMuRVZFTlRfQ09MVU1OX01PVkVELCgpPT50aGlzLm9uQ29sdW1uc0NoYW5nZWQoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Usci5FdmVudHMuRVZFTlRfTkVXX0NPTFVNTlNfTE9BREVELCgpPT50aGlzLm9uQ29sdW1uc0NoYW5nZWQoKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Usci5FdmVudHMuRVZFTlRfVE9PTF9QQU5FTF9WSVNJQkxFX0NIQU5HRUQsZT0+eyJmaWx0ZXJzIj09PWUua2V5JiZ0aGlzLnJlZnJlc2hGaWx0ZXJzKGUudmlzaWJsZSl9KSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmV2ZW50U2VydmljZSxyLkV2ZW50cy5FVkVOVF9EUkFHX1NUQVJURUQsKCk9Pnt0aGlzLnN1cHByZXNzT25Db2x1bW5zQ2hhbmdlZD0hMH0pLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZXZlbnRTZXJ2aWNlLHIuRXZlbnRzLkVWRU5UX0RSQUdfU1RPUFBFRCwoKT0+e3RoaXMuc3VwcHJlc3NPbkNvbHVtbnNDaGFuZ2VkPSExLHRoaXMub25Db2x1bW5zQ2hhbmdlZFBlbmRpbmcmJih0aGlzLm9uQ29sdW1uc0NoYW5nZWRQZW5kaW5nPSExLHRoaXMub25Db2x1bW5zQ2hhbmdlZCgpKX0pLHRoaXMuY29sdW1uTW9kZWwuaXNSZWFkeSgpJiZ0aGlzLm9uQ29sdW1uc0NoYW5nZWQoKTtjb25zdCBpPXRoaXMuZ2V0QXJpYUVsZW1lbnQoKTtyLl8uc2V0QXJpYUxpdmUoaSwiYXNzZXJ0aXZlIiksci5fLnNldEFyaWFBdG9taWMoaSwhMSksci5fLnNldEFyaWFSZWxldmFudChpLCJ0ZXh0Iil9b25Db2x1bW5zQ2hhbmdlZCgpe2lmKHRoaXMuc3VwcHJlc3NPbkNvbHVtbnNDaGFuZ2VkKXJldHVybiB2b2lkKHRoaXMub25Db2x1bW5zQ2hhbmdlZFBlbmRpbmc9ITApO2NvbnN0IGU9dGhpcy5jb2x1bW5Nb2RlbC5pc1Bpdm90TW9kZSgpOyF0aGlzLnBhcmFtcy5zdXBwcmVzc1N5bmNMYXlvdXRXaXRoR3JpZCYmIWU/dGhpcy5zeW5jRmlsdGVyTGF5b3V0KCk6dGhpcy5idWlsZFRyZWVGcm9tUHJvdmlkZWRDb2x1bW5EZWZzKCksdGhpcy5yZWZyZXNoQXJpYUxhYmVsKCl9c3luY0ZpbHRlckxheW91dCgpe3RoaXMudG9vbFBhbmVsQ29sRGVmU2VydmljZS5zeW5jTGF5b3V0V2l0aEdyaWQodGhpcy5zZXRGaWx0ZXJzTGF5b3V0LmJpbmQodGhpcykpLHRoaXMucmVmcmVzaEFyaWFMYWJlbCgpfWJ1aWxkVHJlZUZyb21Qcm92aWRlZENvbHVtbkRlZnMoKXtjb25zdCBlPXRoaXMuY29sdW1uTW9kZWwuZ2V0UHJpbWFyeUNvbHVtblRyZWUoKTt0aGlzLnJlY3JlYXRlRmlsdGVycyhlKX1zZXRGaWx0ZXJzTGF5b3V0KGUpe2NvbnN0IHQ9dGhpcy50b29sUGFuZWxDb2xEZWZTZXJ2aWNlLmNyZWF0ZUNvbHVtblRyZWUoZSk7dGhpcy5yZWNyZWF0ZUZpbHRlcnModCl9cmVjcmVhdGVGaWx0ZXJzKGUpe2NvbnN0IHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKS5hY3RpdmVFbGVtZW50O3RoaXMuaGFzTG9hZGVkSW5pdGlhbFN0YXRlfHwodGhpcy5oYXNMb2FkZWRJbml0aWFsU3RhdGU9ITAsdGhpcy5pc0luaXRpYWxTdGF0ZT0hIXRoaXMucGFyYW1zLmluaXRpYWxTdGF0ZSk7Y29uc3QgaT10aGlzLmdldEV4cGFuc2lvblN0YXRlKCk7dGhpcy5kZXN0cm95RmlsdGVycygpLHRoaXMuZmlsdGVyR3JvdXBDb21wcz10aGlzLnJlY3Vyc2l2ZWx5QWRkQ29tcHMoZSwwLGkpO2NvbnN0IHM9dGhpcy5maWx0ZXJHcm91cENvbXBzLmxlbmd0aDtzJiYodGhpcy5maWx0ZXJHcm91cENvbXBzLmZvckVhY2goZT0+dGhpcy5hcHBlbmRDaGlsZChlKSksdGhpcy5zZXRGaXJzdEFuZExhc3RWaXNpYmxlKDAscy0xKSksci5fLmV4aXN0cyh0aGlzLnNlYXJjaEZpbHRlclRleHQpJiZ0aGlzLnNlYXJjaEZpbHRlcnModGhpcy5zZWFyY2hGaWx0ZXJUZXh0KSx0aGlzLmZpcmVFeHBhbmRlZEV2ZW50KCksdGhpcy5nZXRHdWkoKS5jb250YWlucyh0KSYmdC5mb2N1cygpLHRoaXMuaXNJbml0aWFsU3RhdGU9ITEsdGhpcy5yZWZyZXNoQXJpYUxhYmVsKCl9cmVjdXJzaXZlbHlBZGRDb21wcyhlLHQsaSl7cmV0dXJuIHIuXy5mbGF0dGVuKGUubWFwKGU9PntpZihlIGluc3RhbmNlb2Ygci5Qcm92aWRlZENvbHVtbkdyb3VwKXJldHVybiByLl8uZmxhdHRlbih0aGlzLnJlY3Vyc2l2ZWx5QWRkRmlsdGVyR3JvdXBDb21wcyhlLHQsaSkpO2NvbnN0IHM9ZTtpZighdGhpcy5zaG91bGREaXNwbGF5RmlsdGVyKHMpKXJldHVybltdO2NvbnN0IG89bmV3IGQoMD09PXQsKCk9PnRoaXMub25GaWx0ZXJFeHBhbmRlZCgpKTtpZih0aGlzLmNyZWF0ZUJlYW4obyksby5zZXRDb2x1bW4ocyksaS5nZXQocy5nZXRJZCgpKSYmby5leHBhbmQoKSx0PjApcmV0dXJuIG87Y29uc3Qgbj10aGlzLmNyZWF0ZUJlYW4obmV3IGgocyxbb10sdGhpcy5vbkdyb3VwRXhwYW5kZWQuYmluZCh0aGlzKSx0LCEwKSk7cmV0dXJuIG4uYWRkQ3NzQ2xhc3NUb1RpdGxlQmFyKCJhZy1maWx0ZXItdG9vbHBhbmVsLWhlYWRlciIpLGkuZ2V0KG4uZ2V0RmlsdGVyR3JvdXBJZCgpKXx8bi5jb2xsYXBzZSgpLG59KSl9cmVmcmVzaEFyaWFMYWJlbCgpe2NvbnN0IGU9dGhpcy5sb2NhbGVTZXJ2aWNlLmdldExvY2FsZVRleHRGdW5jKCksdD1lKCJhcmlhRmlsdGVyUGFuZWxMaXN0IiwiRmlsdGVyIExpc3QiKSxpPWUoImZpbHRlcnMiLCJGaWx0ZXJzIikscz10aGlzLmdldEd1aSgpLnF1ZXJ5U2VsZWN0b3JBbGwoIi5hZy1maWx0ZXItdG9vbHBhbmVsLWdyb3VwLWl0ZW06bm90KC5hZy1maWx0ZXItdG9vbHBhbmVsLWdyb3VwLXdyYXBwZXIsIC5hZy1oaWRkZW4pIikubGVuZ3RoO3IuXy5zZXRBcmlhTGFiZWwodGhpcy5nZXRBcmlhRWxlbWVudCgpLGAke3R9ICR7c30gJHtpfWApfXJlY3Vyc2l2ZWx5QWRkRmlsdGVyR3JvdXBDb21wcyhlLHQsaSl7aWYoIXRoaXMuZmlsdGVyc0V4aXN0SW5DaGlsZHJlbihlLmdldENoaWxkcmVuKCkpKXJldHVybjtjb25zdCBzPWUuZ2V0Q29sR3JvdXBEZWYoKTtpZihzJiZzLnN1cHByZXNzRmlsdGVyc1Rvb2xQYW5lbClyZXR1cm5bXTtjb25zdCBvPWUuaXNQYWRkaW5nKCk/dDp0KzEsbj1yLl8uZmxhdHRlbih0aGlzLnJlY3Vyc2l2ZWx5QWRkQ29tcHMoZS5nZXRDaGlsZHJlbigpLG8saSkpO2lmKGUuaXNQYWRkaW5nKCkpcmV0dXJuIG47Y29uc3QgYT1uZXcgaChlLG4sdGhpcy5vbkdyb3VwRXhwYW5kZWQuYmluZCh0aGlzKSx0LCExKTt0aGlzLmNyZWF0ZUJlYW4oYSksYS5hZGRDc3NDbGFzc1RvVGl0bGVCYXIoImFnLWZpbHRlci10b29scGFuZWwtaGVhZGVyIik7Y29uc3QgbD1pLmdldChhLmdldEZpbHRlckdyb3VwSWQoKSk7cmV0dXJuKHRoaXMuaXNJbml0aWFsU3RhdGUmJiFsfHwhMT09PWwpJiZhLmNvbGxhcHNlKCksW2FdfWZpbHRlcnNFeGlzdEluQ2hpbGRyZW4oZSl7cmV0dXJuIGUuc29tZShlPT5lIGluc3RhbmNlb2Ygci5Qcm92aWRlZENvbHVtbkdyb3VwP3RoaXMuZmlsdGVyc0V4aXN0SW5DaGlsZHJlbihlLmdldENoaWxkcmVuKCkpOnRoaXMuc2hvdWxkRGlzcGxheUZpbHRlcihlKSl9c2hvdWxkRGlzcGxheUZpbHRlcihlKXtjb25zdCB0PWUuZ2V0Q29sRGVmKCkmJmUuZ2V0Q29sRGVmKCkuc3VwcHJlc3NGaWx0ZXJzVG9vbFBhbmVsO3JldHVybiBlLmlzRmlsdGVyQWxsb3dlZCgpJiYhdH1nZXRFeHBhbnNpb25TdGF0ZSgpe2NvbnN0IGU9bmV3IE1hcDtpZih0aGlzLmlzSW5pdGlhbFN0YXRlKXtjb25zdHtleHBhbmRlZENvbElkczp0LGV4cGFuZGVkR3JvdXBJZHM6aX09dGhpcy5wYXJhbXMuaW5pdGlhbFN0YXRlO3JldHVybiB0LmZvckVhY2godD0+ZS5zZXQodCwhMCkpLGkuZm9yRWFjaCh0PT5lLnNldCh0LCEwKSksZX1jb25zdCB0PWk9PntlLnNldChpLmdldEZpbHRlckdyb3VwSWQoKSxpLmlzRXhwYW5kZWQoKSksaS5nZXRDaGlsZHJlbigpLmZvckVhY2goaT0+e2kgaW5zdGFuY2VvZiBoP3QoaSk6ZS5zZXQoaS5nZXRDb2x1bW4oKS5nZXRJZCgpLGkuaXNFeHBhbmRlZCgpKX0pfTtyZXR1cm4gdGhpcy5maWx0ZXJHcm91cENvbXBzLmZvckVhY2godCksZX1yZWZyZXNoKCl7fXNldFZpc2libGUoZSl7c3VwZXIuc2V0RGlzcGxheWVkKGUpLGUmJiF0aGlzLmluaXRpYWxpc2VkJiZ0aGlzLmluaXQodGhpcy5wYXJhbXMpfWV4cGFuZEZpbHRlckdyb3VwcyhlLHQpe2NvbnN0IGk9W10scz1vPT57Y29uc3Qgbj1vLmdldEZpbHRlckdyb3VwSWQoKTsoIXR8fHIuXy5pbmNsdWRlcyh0LG4pKSYmKGUmJm8uaXNDb2x1bW5Hcm91cCgpP28uZXhwYW5kKCk6by5jb2xsYXBzZSgpLGkucHVzaChuKSksby5nZXRDaGlsZHJlbigpLmZvckVhY2goZT0+e2UgaW5zdGFuY2VvZiBoJiZzKGUpfSl9O2lmKHRoaXMuZmlsdGVyR3JvdXBDb21wcy5mb3JFYWNoKHMpLHRoaXMub25Hcm91cEV4cGFuZGVkKCksdCl7Y29uc3QgZT10LmZpbHRlcihlPT5pLmluZGV4T2YoZSk8MCk7ZS5sZW5ndGg+MCYmY29uc29sZS53YXJuKCJBRyBHcmlkOiB1bmFibGUgdG8gZmluZCBncm91cHMgZm9yIHRoZXNlIHN1cHBsaWVkIGdyb3VwSWRzOiIsZSl9fWV4cGFuZEZpbHRlcnMoZSx0KXtjb25zdCBpPVtdLHM9bz0+e2lmKG8gaW5zdGFuY2VvZiBoKXtsZXQgdD0hMTtyZXR1cm4gby5nZXRDaGlsZHJlbigpLmZvckVhY2goaT0+e3MoaSkmJihlPyhvLmV4cGFuZCgpLHQ9ITApOm8uaXNDb2x1bW5Hcm91cCgpfHxvLmNvbGxhcHNlKCkpfSksdH1jb25zdCBuPW8uZ2V0Q29sdW1uKCkuZ2V0Q29sSWQoKSxhPSF0fHxyLl8uaW5jbHVkZXModCxuKTtyZXR1cm4gYSYmKGU/by5leHBhbmQoKTpvLmNvbGxhcHNlKCksaS5wdXNoKG4pKSxhfTtpZih0aGlzLmZpbHRlckdyb3VwQ29tcHMuZm9yRWFjaChzKSx0aGlzLm9uR3JvdXBFeHBhbmRlZCgpLHQpe2NvbnN0IGU9dC5maWx0ZXIoZT0+aS5pbmRleE9mKGUpPDApO2UubGVuZ3RoPjAmJmNvbnNvbGUud2FybigiQUcgR3JpZDogdW5hYmxlIHRvIGZpbmQgY29sdW1ucyBmb3IgdGhlc2Ugc3VwcGxpZWQgY29sSWRzOiIsZSl9fW9uR3JvdXBFeHBhbmRlZCgpe3RoaXMuZmlyZUV4cGFuZGVkRXZlbnQoKX1vbkZpbHRlckV4cGFuZGVkKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiJmaWx0ZXJFeHBhbmRlZCJ9KX1maXJlRXhwYW5kZWRFdmVudCgpe2xldCBlPTAsdD0wO2NvbnN0IGk9cz0+e3MuaXNDb2x1bW5Hcm91cCgpJiYocy5pc0V4cGFuZGVkKCk/ZSsrOnQrKyxzLmdldENoaWxkcmVuKCkuZm9yRWFjaChlPT57ZSBpbnN0YW5jZW9mIGgmJmkoZSl9KSl9O2xldCByO3RoaXMuZmlsdGVyR3JvdXBDb21wcy5mb3JFYWNoKGkpLHI9ZT4wJiZ0PjA/cy5JTkRFVEVSTUlOQVRFOnQ+MD9zLkNPTExBUFNFRDpzLkVYUEFOREVELHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZToiZ3JvdXBFeHBhbmRlZCIsc3RhdGU6cn0pfXBlcmZvcm1GaWx0ZXJTZWFyY2goZSl7dGhpcy5zZWFyY2hGaWx0ZXJUZXh0PXIuXy5leGlzdHMoZSk/ZS50b0xvd2VyQ2FzZSgpOm51bGwsdGhpcy5zZWFyY2hGaWx0ZXJzKHRoaXMuc2VhcmNoRmlsdGVyVGV4dCl9c2VhcmNoRmlsdGVycyhlKXtjb25zdCB0PXQ9PiFyLl8uZXhpc3RzKGUpfHwtMSE9PXQudG9Mb3dlckNhc2UoKS5pbmRleE9mKGUpLGk9KGUscyk9PntpZighKGUgaW5zdGFuY2VvZiBoKSlyZXR1cm4gdChlLmdldENvbHVtbkZpbHRlck5hbWUoKXx8IiIpO2NvbnN0IHI9ZS5nZXRDaGlsZHJlbigpLG89dChlLmdldEZpbHRlckdyb3VwTmFtZSgpKSxuPXN8fG87aWYobil7ZS5oaWRlR3JvdXAoITEpO2ZvcihsZXQgdD0wO3Q8ci5sZW5ndGg7dCsrKWkoclt0XSxuKSxlLmhpZGVHcm91cEl0ZW0oITEsdCk7cmV0dXJuITB9bGV0IGE9ITE7cmV0dXJuIHIuZm9yRWFjaCgodCxyKT0+e2NvbnN0IG89aSh0LHMpO2UuaGlkZUdyb3VwSXRlbSghbyxyKSxvJiYoYT0hMCl9KSxlLmhpZGVHcm91cCghYSksYX07bGV0IHMsbzt0aGlzLmZpbHRlckdyb3VwQ29tcHMuZm9yRWFjaCgoZSx0KT0+e2koZSwhMSksdm9pZCAwPT09cz9lLmNvbnRhaW5zQ3NzQ2xhc3MoImFnLWhpZGRlbiIpfHwocz10LG89dCk6ZS5jb250YWluc0Nzc0NsYXNzKCJhZy1oaWRkZW4iKXx8bz09PXR8fChvPXQpfSksdGhpcy5zZXRGaXJzdEFuZExhc3RWaXNpYmxlKHMsbyksdGhpcy5yZWZyZXNoQXJpYUxhYmVsKCl9c2V0Rmlyc3RBbmRMYXN0VmlzaWJsZShlLHQpe3RoaXMuZmlsdGVyR3JvdXBDb21wcy5mb3JFYWNoKChpLHMpPT57aS5yZW1vdmVDc3NDbGFzcygiYWctZmlyc3QtZ3JvdXAtdmlzaWJsZSIpLGkucmVtb3ZlQ3NzQ2xhc3MoImFnLWxhc3QtZ3JvdXAtdmlzaWJsZSIpLHM9PT1lJiZpLmFkZENzc0NsYXNzKCJhZy1maXJzdC1ncm91cC12aXNpYmxlIikscz09PXQmJmkuYWRkQ3NzQ2xhc3MoImFnLWxhc3QtZ3JvdXAtdmlzaWJsZSIpfSl9cmVmcmVzaEZpbHRlcnMoZSl7dGhpcy5maWx0ZXJHcm91cENvbXBzLmZvckVhY2godD0+dC5yZWZyZXNoRmlsdGVycyhlKSl9Z2V0RXhwYW5kZWRGaWx0ZXJzQW5kR3JvdXBzKCl7Y29uc3QgZT1bXSx0PW5ldyBTZXQsaT1zPT57aWYocyBpbnN0YW5jZW9mIGgpe3MuZ2V0Q2hpbGRyZW4oKS5mb3JFYWNoKGU9PmkoZSkpO2NvbnN0IHI9cy5nZXRGaWx0ZXJHcm91cElkKCk7cy5pc0V4cGFuZGVkKCkmJiF0LmhhcyhyKSYmZS5wdXNoKHIpfWVsc2Ugcy5pc0V4cGFuZGVkKCkmJnQuYWRkKHMuZ2V0Q29sdW1uKCkuZ2V0Q29sSWQoKSl9O3JldHVybiB0aGlzLmZpbHRlckdyb3VwQ29tcHMuZm9yRWFjaChpKSx7ZXhwYW5kZWRHcm91cElkczplLGV4cGFuZGVkQ29sSWRzOkFycmF5LmZyb20odCl9fWRlc3Ryb3lGaWx0ZXJzKCl7dGhpcy5maWx0ZXJHcm91cENvbXBzPXRoaXMuZGVzdHJveUJlYW5zKHRoaXMuZmlsdGVyR3JvdXBDb21wcyksci5fLmNsZWFyRWxlbWVudCh0aGlzLmdldEd1aSgpKX1kZXN0cm95KCl7dGhpcy5kZXN0cm95RmlsdGVycygpLHN1cGVyLmRlc3Ryb3koKX19cC5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctZmlsdGVyLWxpc3QtcGFuZWwiPjwvZGl2PicsdShbT2JqZWN0KHIuQXV0b3dpcmVkKSgidG9vbFBhbmVsQ29sRGVmU2VydmljZSIpXSxwLnByb3RvdHlwZSwidG9vbFBhbmVsQ29sRGVmU2VydmljZSIsdm9pZCAwKSx1KFtPYmplY3Qoci5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSxwLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCk7dmFyIGc9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgbSBleHRlbmRzIHIuQ29tcG9uZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIobS5URU1QTEFURSksdGhpcy5pbml0aWFsaXNlZD0hMSx0aGlzLmxpc3RlbmVyRGVzdHJveUZ1bmNzPVtdfWluaXQoZSl7dGhpcy5pbml0aWFsaXNlZCYmKHRoaXMubGlzdGVuZXJEZXN0cm95RnVuY3MuZm9yRWFjaChlPT5lKCkpLHRoaXMubGlzdGVuZXJEZXN0cm95RnVuY3M9W10pLHRoaXMuaW5pdGlhbGlzZWQ9ITA7Y29uc3QgdD10aGlzLmdyaWRPcHRpb25zU2VydmljZS5hZGRHcmlkQ29tbW9uUGFyYW1zKHtzdXBwcmVzc0V4cGFuZEFsbDohMSxzdXBwcmVzc0ZpbHRlclNlYXJjaDohMSxzdXBwcmVzc1N5bmNMYXlvdXRXaXRoR3JpZDohMX0pO3RoaXMucGFyYW1zPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSxlKSx0aGlzLmZpbHRlcnNUb29sUGFuZWxIZWFkZXJQYW5lbC5pbml0KHRoaXMucGFyYW1zKSx0aGlzLmZpbHRlcnNUb29sUGFuZWxMaXN0UGFuZWwuaW5pdCh0aGlzLnBhcmFtcyk7Y29uc3QgaT10aGlzLnBhcmFtcy5zdXBwcmVzc0V4cGFuZEFsbCxzPXRoaXMucGFyYW1zLnN1cHByZXNzRmlsdGVyU2VhcmNoO2kmJnMmJnRoaXMuZmlsdGVyc1Rvb2xQYW5lbEhlYWRlclBhbmVsLnNldERpc3BsYXllZCghMSksdGhpcy5saXN0ZW5lckRlc3Ryb3lGdW5jcy5wdXNoKHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZmlsdGVyc1Rvb2xQYW5lbEhlYWRlclBhbmVsLCJleHBhbmRBbGwiLHRoaXMub25FeHBhbmRBbGwuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5maWx0ZXJzVG9vbFBhbmVsSGVhZGVyUGFuZWwsImNvbGxhcHNlQWxsIix0aGlzLm9uQ29sbGFwc2VBbGwuYmluZCh0aGlzKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5maWx0ZXJzVG9vbFBhbmVsSGVhZGVyUGFuZWwsInNlYXJjaENoYW5nZWQiLHRoaXMub25TZWFyY2hDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZExpc3RlbmVyKHRoaXMuZmlsdGVyc1Rvb2xQYW5lbExpc3RQYW5lbCwiZmlsdGVyRXhwYW5kZWQiLHRoaXMub25GaWx0ZXJFeHBhbmRlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLmZpbHRlcnNUb29sUGFuZWxMaXN0UGFuZWwsImdyb3VwRXhwYW5kZWQiLHRoaXMub25Hcm91cEV4cGFuZGVkLmJpbmQodGhpcykpKX1zZXRWaXNpYmxlKGUpe3N1cGVyLnNldERpc3BsYXllZChlKSxlJiYhdGhpcy5pbml0aWFsaXNlZCYmdGhpcy5pbml0KHRoaXMucGFyYW1zKX1vbkV4cGFuZEFsbCgpe3RoaXMuZmlsdGVyc1Rvb2xQYW5lbExpc3RQYW5lbC5leHBhbmRGaWx0ZXJHcm91cHMoITApfW9uQ29sbGFwc2VBbGwoKXt0aGlzLmZpbHRlcnNUb29sUGFuZWxMaXN0UGFuZWwuZXhwYW5kRmlsdGVyR3JvdXBzKCExKX1vblNlYXJjaENoYW5nZWQoZSl7dGhpcy5maWx0ZXJzVG9vbFBhbmVsTGlzdFBhbmVsLnBlcmZvcm1GaWx0ZXJTZWFyY2goZS5zZWFyY2hUZXh0KX1zZXRGaWx0ZXJMYXlvdXQoZSl7dGhpcy5maWx0ZXJzVG9vbFBhbmVsTGlzdFBhbmVsLnNldEZpbHRlcnNMYXlvdXQoZSl9b25GaWx0ZXJFeHBhbmRlZCgpe3RoaXMucGFyYW1zLm9uU3RhdGVVcGRhdGVkKCl9b25Hcm91cEV4cGFuZGVkKGUpe3RoaXMuZmlsdGVyc1Rvb2xQYW5lbEhlYWRlclBhbmVsLnNldEV4cGFuZFN0YXRlKGUuc3RhdGUpLHRoaXMucGFyYW1zLm9uU3RhdGVVcGRhdGVkKCl9ZXhwYW5kRmlsdGVyR3JvdXBzKGUpe3RoaXMuZmlsdGVyc1Rvb2xQYW5lbExpc3RQYW5lbC5leHBhbmRGaWx0ZXJHcm91cHMoITAsZSl9Y29sbGFwc2VGaWx0ZXJHcm91cHMoZSl7dGhpcy5maWx0ZXJzVG9vbFBhbmVsTGlzdFBhbmVsLmV4cGFuZEZpbHRlckdyb3VwcyghMSxlKX1leHBhbmRGaWx0ZXJzKGUpe3RoaXMuZmlsdGVyc1Rvb2xQYW5lbExpc3RQYW5lbC5leHBhbmRGaWx0ZXJzKCEwLGUpfWNvbGxhcHNlRmlsdGVycyhlKXt0aGlzLmZpbHRlcnNUb29sUGFuZWxMaXN0UGFuZWwuZXhwYW5kRmlsdGVycyghMSxlKX1zeW5jTGF5b3V0V2l0aEdyaWQoKXt0aGlzLmZpbHRlcnNUb29sUGFuZWxMaXN0UGFuZWwuc3luY0ZpbHRlckxheW91dCgpfXJlZnJlc2goZSl7cmV0dXJuIHRoaXMuaW5pdChlKSwhMH1nZXRTdGF0ZSgpe3JldHVybiB0aGlzLmZpbHRlcnNUb29sUGFuZWxMaXN0UGFuZWwuZ2V0RXhwYW5kZWRGaWx0ZXJzQW5kR3JvdXBzKCl9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKX19bS5URU1QTEFURT0nPGRpdiBjbGFzcz0iYWctZmlsdGVyLXRvb2xwYW5lbCI+XG4gICAgICAgICAgICA8YWctZmlsdGVycy10b29sLXBhbmVsLWhlYWRlciByZWY9ImZpbHRlcnNUb29sUGFuZWxIZWFkZXJQYW5lbCI+PC9hZy1maWx0ZXJzLXRvb2wtcGFuZWwtaGVhZGVyPlxuICAgICAgICAgICAgPGFnLWZpbHRlcnMtdG9vbC1wYW5lbC1saXN0IHJlZj0iZmlsdGVyc1Rvb2xQYW5lbExpc3RQYW5lbCI+PC9hZy1maWx0ZXJzLXRvb2wtcGFuZWwtbGlzdD5cbiAgICAgICAgIDwvZGl2PicsZyhbT2JqZWN0KHIuUmVmU2VsZWN0b3IpKCJmaWx0ZXJzVG9vbFBhbmVsSGVhZGVyUGFuZWwiKV0sbS5wcm90b3R5cGUsImZpbHRlcnNUb29sUGFuZWxIZWFkZXJQYW5lbCIsdm9pZCAwKSxnKFtPYmplY3Qoci5SZWZTZWxlY3RvcikoImZpbHRlcnNUb29sUGFuZWxMaXN0UGFuZWwiKV0sbS5wcm90b3R5cGUsImZpbHRlcnNUb29sUGFuZWxMaXN0UGFuZWwiLHZvaWQgMCk7dmFyIGY9aSg3KTtjb25zdCB2PXt2ZXJzaW9uOiIzMS4xLjEiLG1vZHVsZU5hbWU6ci5Nb2R1bGVOYW1lcy5GaWx0ZXJzVG9vbFBhbmVsTW9kdWxlLGJlYW5zOltdLGFnU3RhY2tDb21wb25lbnRzOlt7Y29tcG9uZW50TmFtZToiQWdGaWx0ZXJzVG9vbFBhbmVsSGVhZGVyIixjb21wb25lbnRDbGFzczphfSx7Y29tcG9uZW50TmFtZToiQWdGaWx0ZXJzVG9vbFBhbmVsTGlzdCIsY29tcG9uZW50Q2xhc3M6cH1dLHVzZXJDb21wb25lbnRzOlt7Y29tcG9uZW50TmFtZToiYWdGaWx0ZXJzVG9vbFBhbmVsIixjb21wb25lbnRDbGFzczptfV0sZGVwZW5kYW50TW9kdWxlczpbZi5TaWRlQmFyTW9kdWxlLG8uRW50ZXJwcmlzZUNvcmVNb2R1bGVdfTtpLmQodCwiRmlsdGVyc1Rvb2xQYW5lbE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHZ9KSl9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpO3ZhciBzPWkoMCkscj1pKDMpLG89ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgbiBleHRlbmRzIHMuQmVhblN0dWJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMubG9hZFJvd0RhdGFWZXJzaW9uPTB9aW5pdChlLHQpe3RoaXMucGFyYW1zPXQsdGhpcy5jb21wPWU7bnVsbCE9dC5waW5uZWR8fCh0aGlzLnNldEF1dG9IZWlnaHRDbGFzc2VzKCksdGhpcy5zZXR1cFJlZnJlc2hTdHJhdGVneSgpLHRoaXMuYWRkVGhlbWVUb0RldGFpbEdyaWQoKSx0aGlzLmNyZWF0ZURldGFpbEdyaWQoKSx0aGlzLmxvYWRSb3dEYXRhKCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfRlVMTF9XSURUSF9ST1dfRk9DVVNFRCx0aGlzLm9uRnVsbFdpZHRoUm93Rm9jdXNlZC5iaW5kKHRoaXMpKSl9b25GdWxsV2lkdGhSb3dGb2N1c2VkKGUpe2NvbnN0IHQ9dGhpcy5wYXJhbXMsaT17cm93SW5kZXg6dC5ub2RlLnJvd0luZGV4LHJvd1Bpbm5lZDp0Lm5vZGUucm93UGlubmVkfSxzPXtyb3dJbmRleDplLnJvd0luZGV4LHJvd1Bpbm5lZDplLnJvd1Bpbm5lZH07dGhpcy5yb3dQb3NpdGlvblV0aWxzLnNhbWVSb3coaSxzKSYmdGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNJbnRvKHRoaXMuY29tcC5nZXRHdWkoKSxlLmZyb21CZWxvdyl9c2V0QXV0b0hlaWdodENsYXNzZXMoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZGV0YWlsUm93QXV0b0hlaWdodCIpLHQ9ZT8iYWctZGV0YWlscy1yb3ctYXV0by1oZWlnaHQiOiJhZy1kZXRhaWxzLXJvdy1maXhlZC1oZWlnaHQiLGk9ZT8iYWctZGV0YWlscy1ncmlkLWF1dG8taGVpZ2h0IjoiYWctZGV0YWlscy1ncmlkLWZpeGVkLWhlaWdodCI7dGhpcy5jb21wLmFkZE9yUmVtb3ZlQ3NzQ2xhc3ModCwhMCksdGhpcy5jb21wLmFkZE9yUmVtb3ZlRGV0YWlsR3JpZENzc0NsYXNzKGksITApfXNldHVwUmVmcmVzaFN0cmF0ZWd5KCl7Y29uc3QgZT10aGlzLnBhcmFtcy5yZWZyZXNoU3RyYXRlZ3k7ImV2ZXJ5dGhpbmciPT1lfHwibm90aGluZyI9PWV8fCJyb3dzIj09ZT90aGlzLnJlZnJlc2hTdHJhdGVneT1lOihudWxsIT1lJiZjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGludmFsaWQgY2VsbFJlbmRlcmVyUGFyYW1zLnJlZnJlc2hTdHJhdGVneSA9ICciK2UrIicgc3VwcGxpZWQsIGRlZmF1bHRpbmcgdG8gcmVmcmVzaFN0cmF0ZWd5ID0gJ3Jvd3MnLiIpLHRoaXMucmVmcmVzaFN0cmF0ZWd5PSJyb3dzIil9YWRkVGhlbWVUb0RldGFpbEdyaWQoKXtjb25zdHt0aGVtZTplfT10aGlzLmVudmlyb25tZW50LmdldFRoZW1lKCk7ZSYmdGhpcy5jb21wLmFkZE9yUmVtb3ZlRGV0YWlsR3JpZENzc0NsYXNzKGUsITApfWNyZWF0ZURldGFpbEdyaWQoKXtpZihzLl8ubWlzc2luZyh0aGlzLnBhcmFtcy5kZXRhaWxHcmlkT3B0aW9ucykpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKCJBRyBHcmlkOiBjb3VsZCBub3QgZmluZCBkZXRhaWwgZ3JpZCBvcHRpb25zIGZvciBtYXN0ZXIgZGV0YWlsLCBwbGVhc2Ugc2V0IGdyaWRPcHRpb25zLmRldGFpbENlbGxSZW5kZXJlclBhcmFtcy5kZXRhaWxHcmlkT3B0aW9ucyIpO2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJkZXRhaWxSb3dBdXRvSGVpZ2h0IiksdD1PYmplY3QuYXNzaWduKHt9LHRoaXMucGFyYW1zLmRldGFpbEdyaWRPcHRpb25zKTtlJiYodC5kb21MYXlvdXQ9ImF1dG9IZWlnaHQiKSx0aGlzLmNvbXAuc2V0RGV0YWlsR3JpZCh0KX1yZWdpc3RlckRldGFpbFdpdGhNYXN0ZXIoZSx0KXtjb25zdCBpPXRoaXMucGFyYW1zLm5vZGUuaWQscz10aGlzLnBhcmFtcy5hcGkscj17aWQ6aSxhcGk6ZSxjb2x1bW5BcGk6dH0sbz10aGlzLnBhcmFtcy5ub2RlO3MuYWRkRGV0YWlsR3JpZEluZm8oaSxyKSxvLmRldGFpbEdyaWRJbmZvPXIsdGhpcy5hZGREZXN0cm95RnVuYygoKT0+e28uZGV0YWlsR3JpZEluZm89PT1yJiYocy5yZW1vdmVEZXRhaWxHcmlkSW5mbyhpKSxvLmRldGFpbEdyaWRJbmZvPW51bGwpfSl9bG9hZFJvd0RhdGEoKXt2YXIgZSx0LGk7dGhpcy5sb2FkUm93RGF0YVZlcnNpb24rKztjb25zdCBzPXRoaXMubG9hZFJvd0RhdGFWZXJzaW9uO2lmKCJzZXJ2ZXJTaWRlIj09PShudWxsPT09KGU9dGhpcy5wYXJhbXMuZGV0YWlsR3JpZE9wdGlvbnMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnJvd01vZGVsVHlwZSkpe3JldHVybiB2b2lkKG51bGw9PT0oaT1udWxsPT09KHQ9dGhpcy5wYXJhbXMubm9kZS5kZXRhaWxHcmlkSW5mbyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuYXBpKXx8dm9pZCAwPT09aXx8aS5yZWZyZXNoU2VydmVyU2lkZSh7cHVyZ2U6ITB9KSl9Y29uc3Qgcj10aGlzLnBhcmFtcy5nZXREZXRhaWxSb3dEYXRhO2lmKCFyKXJldHVybiB2b2lkIGNvbnNvbGUud2FybigiQUcgR3JpZDogY291bGQgbm90IGZpbmQgZ2V0RGV0YWlsUm93RGF0YSBmb3IgbWFzdGVyIC8gZGV0YWlsLCBwbGVhc2Ugc2V0IGdyaWRPcHRpb25zLmRldGFpbENlbGxSZW5kZXJlclBhcmFtcy5nZXREZXRhaWxSb3dEYXRhIik7cih7bm9kZTp0aGlzLnBhcmFtcy5ub2RlLGRhdGE6dGhpcy5wYXJhbXMubm9kZS5kYXRhLHN1Y2Nlc3NDYWxsYmFjazplPT57dGhpcy5sb2FkUm93RGF0YVZlcnNpb249PT1zJiZ0aGlzLmNvbXAuc2V0Um93RGF0YShlKX0sY29udGV4dDp0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRHcmlkQ29tbW9uUGFyYW1zKCkuY29udGV4dH0pfXJlZnJlc2goKXtzd2l0Y2godGhpcy5yZWZyZXNoU3RyYXRlZ3kpe2Nhc2Uibm90aGluZyI6cmV0dXJuITA7Y2FzZSJldmVyeXRoaW5nIjpyZXR1cm4hMX1yZXR1cm4gdGhpcy5sb2FkUm93RGF0YSgpLCEwfX1vKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dQb3NpdGlvblV0aWxzIildLG4ucHJvdG90eXBlLCJyb3dQb3NpdGlvblV0aWxzIix2b2lkIDApLG8oW09iamVjdChzLkF1dG93aXJlZCkoImZvY3VzU2VydmljZSIpXSxuLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApO3ZhciBhPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2NsYXNzIGwgZXh0ZW5kcyBzLkNvbXBvbmVudHtpbml0KGUpe3RoaXMucGFyYW1zPWUsdGhpcy5zZWxlY3RBbmRTZXRUZW1wbGF0ZSgpO2NvbnN0IHQ9e2FkZE9yUmVtb3ZlQ3NzQ2xhc3M6KGUsdCk9PnRoaXMuYWRkT3JSZW1vdmVDc3NDbGFzcyhlLHQpLGFkZE9yUmVtb3ZlRGV0YWlsR3JpZENzc0NsYXNzOihlLHQpPT50aGlzLmVEZXRhaWxHcmlkLmNsYXNzTGlzdC50b2dnbGUoZSx0KSxzZXREZXRhaWxHcmlkOmU9PnRoaXMuc2V0RGV0YWlsR3JpZChlKSxzZXRSb3dEYXRhOmU9PnRoaXMuc2V0Um93RGF0YShlKSxnZXRHdWk6KCk9PnRoaXMuZURldGFpbEdyaWR9O3RoaXMuY3RybD10aGlzLmNyZWF0ZU1hbmFnZWRCZWFuKG5ldyBuKSx0aGlzLmN0cmwuaW5pdCh0LGUpfXJlZnJlc2goKXtyZXR1cm4gdGhpcy5jdHJsJiZ0aGlzLmN0cmwucmVmcmVzaCgpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCl9c2VsZWN0QW5kU2V0VGVtcGxhdGUoKXtpZih0aGlzLnBhcmFtcy5waW5uZWQpcmV0dXJuIHZvaWQgdGhpcy5zZXRUZW1wbGF0ZSgnPGRpdiBjbGFzcz0iYWctZGV0YWlscy1yb3ciPjwvZGl2PicpO2NvbnN0IGU9KCk9Pnt0aGlzLnNldFRlbXBsYXRlKGwuVEVNUExBVEUpfTtpZihzLl8ubWlzc2luZyh0aGlzLnBhcmFtcy50ZW1wbGF0ZSkpZSgpO2Vsc2UgaWYoInN0cmluZyI9PXR5cGVvZiB0aGlzLnBhcmFtcy50ZW1wbGF0ZSl0aGlzLnNldFRlbXBsYXRlKHRoaXMucGFyYW1zLnRlbXBsYXRlKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnBhcmFtcy50ZW1wbGF0ZSl7Y29uc3QgZT0oMCx0aGlzLnBhcmFtcy50ZW1wbGF0ZSkodGhpcy5wYXJhbXMpO3RoaXMuc2V0VGVtcGxhdGUoZSl9ZWxzZSBjb25zb2xlLndhcm4oIkFHIEdyaWQ6IGRldGFpbENlbGxSZW5kZXJlclBhcmFtcy50ZW1wbGF0ZSBzaG91bGQgYmUgZnVuY3Rpb24gb3Igc3RyaW5nIiksZSgpO251bGw9PXRoaXMuZURldGFpbEdyaWQmJmNvbnNvbGUud2FybignQUcgR3JpZDogcmVmZXJlbmNlIHRvIGVEZXRhaWxHcmlkIHdhcyBtaXNzaW5nIGZyb20gdGhlIGRldGFpbHMgdGVtcGxhdGUuIFBsZWFzZSBhZGQgcmVmPSJlRGV0YWlsR3JpZCIgdG8gdGhlIHRlbXBsYXRlLicpfXNldERldGFpbEdyaWQoZSl7aWYoIXRoaXMuZURldGFpbEdyaWQpcmV0dXJuO2NvbnN0IHQ9dGhpcy5jb250ZXh0LmdldEJlYW4oImFnR3JpZFJlYWN0IiksaT10P3MuXy5jbG9uZU9iamVjdCh0KTp2b2lkIDAscj10aGlzLmNvbnRleHQuZ2V0QmVhbigiZnJhbWV3b3JrQ29tcG9uZW50V3JhcHBlciIpLG89dGhpcy5nZXRGcmFtZXdvcmtPdmVycmlkZXMoKSxuPU9iamVjdChzLmNyZWF0ZUdyaWQpKHRoaXMuZURldGFpbEdyaWQsZSx7ZnJhbWV3b3JrT3ZlcnJpZGVzOm8scHJvdmlkZWRCZWFuSW5zdGFuY2VzOnthZ0dyaWRSZWFjdDppLGZyYW1ld29ya0NvbXBvbmVudFdyYXBwZXI6cn0sbW9kdWxlczpzLk1vZHVsZVJlZ2lzdHJ5Ll9fZ2V0R3JpZFJlZ2lzdGVyZWRNb2R1bGVzKHRoaXMucGFyYW1zLmFwaS5nZXRHcmlkSWQoKSl9KTt0aGlzLmRldGFpbEFwaT1uLHRoaXMuY3RybC5yZWdpc3RlckRldGFpbFdpdGhNYXN0ZXIobixuZXcgcy5Db2x1bW5BcGkobikpLHRoaXMuYWRkRGVzdHJveUZ1bmMoKCk9PntudWxsPT1ufHxuLmRlc3Ryb3koKX0pfXNldFJvd0RhdGEoZSl7dGhpcy5kZXRhaWxBcGkmJnRoaXMuZGV0YWlsQXBpLnNldEdyaWRPcHRpb24oInJvd0RhdGEiLGUpfX1sLlRFTVBMQVRFPSc8ZGl2IGNsYXNzPSJhZy1kZXRhaWxzLXJvdyIgcm9sZT0iZ3JpZGNlbGwiPlxuICAgICAgICAgICAgPGRpdiByZWY9ImVEZXRhaWxHcmlkIiBjbGFzcz0iYWctZGV0YWlscy1ncmlkIiByb2xlPSJwcmVzZW50YXRpb24iPjwvZGl2PlxuICAgICAgICA8L2Rpdj4nLGEoW09iamVjdChzLlJlZlNlbGVjdG9yKSgiZURldGFpbEdyaWQiKV0sbC5wcm90b3R5cGUsImVEZXRhaWxHcmlkIix2b2lkIDApO2NvbnN0IGQ9e3ZlcnNpb246IjMxLjEuMSIsbW9kdWxlTmFtZTpzLk1vZHVsZU5hbWVzLk1hc3RlckRldGFpbE1vZHVsZSxiZWFuczpbXSx1c2VyQ29tcG9uZW50czpbe2NvbXBvbmVudE5hbWU6ImFnRGV0YWlsQ2VsbFJlbmRlcmVyIixjb21wb25lbnRDbGFzczpsfV0sY29udHJvbGxlcnM6W3tjb250cm9sbGVyTmFtZToiZGV0YWlsQ2VsbFJlbmRlcmVyIixjb250cm9sbGVyQ2xhc3M6bn1dLGRlcGVuZGFudE1vZHVsZXM6W3IuRW50ZXJwcmlzZUNvcmVNb2R1bGVdfTtpLmQodCwiTWFzdGVyRGV0YWlsTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gZH0pKX0sZnVuY3Rpb24oZSx0LGkpeyJ1c2Ugc3RyaWN0IjtpLnIodCk7dmFyIHM9aSgwKSxyPWkoMyksbz1mdW5jdGlvbihlLHQsaSxzKXt2YXIgcixvPWFyZ3VtZW50cy5sZW5ndGgsbj1vPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbj1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihuPShvPDM/cihuKTpvPjM/cih0LGksbik6cih0LGkpKXx8bik7cmV0dXJuIG8+MyYmbiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxuKSxufTtjbGFzcyBuIGV4dGVuZHMgcy5UYWJHdWFyZENvbXB7Y29uc3RydWN0b3IoKXtzdXBlcignPGRpdiBjbGFzcz0iYWctbXVsdGktZmlsdGVyIGFnLW1lbnUtbGlzdC1jb21wYWN0Ij48L2Rpdj4nKSx0aGlzLmZpbHRlckRlZnM9W10sdGhpcy5maWx0ZXJzPVtdLHRoaXMuZ3VpRGVzdHJveUZ1bmNzPVtdLHRoaXMuZmlsdGVyR3Vpcz1bXSx0aGlzLmFjdGl2ZUZpbHRlckluZGljZXM9W10sdGhpcy5sYXN0QWN0aXZhdGVkTWVudUl0ZW09bnVsbCx0aGlzLmFmdGVyRmlsdGVyc1JlYWR5RnVuY3M9W119cG9zdENvbnN0cnVjdCgpe3RoaXMuaW5pdGlhbGlzZVRhYkd1YXJkKHtvbkZvY3VzSW46ZT0+dGhpcy5vbkZvY3VzSW4oZSl9KX1zdGF0aWMgZ2V0RmlsdGVyRGVmcyhlKXtjb25zdHtmaWx0ZXJzOnR9PWU7cmV0dXJuIHQmJnQubGVuZ3RoPjA/dDpbe2ZpbHRlcjoiYWdUZXh0Q29sdW1uRmlsdGVyIn0se2ZpbHRlcjoiYWdTZXRDb2x1bW5GaWx0ZXIifV19aW5pdChlKXt0aGlzLnBhcmFtcz1lLHRoaXMuZmlsdGVyRGVmcz1uLmdldEZpbHRlckRlZnMoZSk7Y29uc3R7Y29sdW1uOnQsZmlsdGVyQ2hhbmdlZENhbGxiYWNrOml9PWU7dGhpcy5jb2x1bW49dCx0aGlzLmZpbHRlckNoYW5nZWRDYWxsYmFjaz1pO2NvbnN0IHI9W107cmV0dXJuIHRoaXMuZmlsdGVyRGVmcy5mb3JFYWNoKChlLHQpPT57Y29uc3QgaT10aGlzLmNyZWF0ZUZpbHRlcihlLHQpO251bGwhPWkmJnIucHVzaChpKX0pLG5ldyBzLkFnUHJvbWlzZShlPT57cy5BZ1Byb21pc2UuYWxsKHIpLnRoZW4odD0+e3RoaXMuZmlsdGVycz10LHRoaXMucmVmcmVzaEd1aSgiY29sdW1uTWVudSIpLnRoZW4oKCk9PntlKCl9KX0pfSkudGhlbigoKT0+e3RoaXMuYWZ0ZXJGaWx0ZXJzUmVhZHlGdW5jcy5mb3JFYWNoKGU9PmUoKSksdGhpcy5hZnRlckZpbHRlcnNSZWFkeUZ1bmNzLmxlbmd0aD0wfSl9cmVmcmVzaEd1aShlKXtyZXR1cm4gZT09PXRoaXMubGFzdE9wZW5lZEluQ29udGFpbmVyP3MuQWdQcm9taXNlLnJlc29sdmUoKToodGhpcy5yZW1vdmVBbGxDaGlsZHJlbkV4Y2VwdFRhYkd1YXJkcygpLHRoaXMuZGVzdHJveUNoaWxkcmVuKCkscy5BZ1Byb21pc2UuYWxsKHRoaXMuZmlsdGVycy5tYXAoKHQsaSk9Pntjb25zdCByPXRoaXMuZmlsdGVyRGVmc1tpXSxvPXRoaXMuZ2V0RmlsdGVyVGl0bGUodCxyKTtsZXQgbjtpZigic3ViTWVudSI9PT1yLmRpc3BsYXkmJiJ0b29sUGFuZWwiIT09ZSluPXRoaXMuaW5zZXJ0RmlsdGVyTWVudSh0LG8pLnRoZW4oZT0+ZS5nZXRHdWkoKSk7ZWxzZSBpZigic3ViTWVudSI9PT1yLmRpc3BsYXl8fCJhY2NvcmRpb24iPT09ci5kaXNwbGF5KXtjb25zdCBlPXRoaXMuaW5zZXJ0RmlsdGVyR3JvdXAodCxvKTtuPXMuQWdQcm9taXNlLnJlc29sdmUoZS5nZXRHdWkoKSl9ZWxzZSBuPXMuQWdQcm9taXNlLnJlc29sdmUodC5nZXRHdWkoKSk7cmV0dXJuIG59KSkudGhlbih0PT57dC5mb3JFYWNoKChlLHQpPT57dD4wJiZ0aGlzLmFwcGVuZENoaWxkKHMuXy5sb2FkVGVtcGxhdGUoJzxkaXYgY2xhc3M9ImFnLWZpbHRlci1zZXBhcmF0b3IiPjwvZGl2PicpKSx0aGlzLmFwcGVuZENoaWxkKGUpfSksdGhpcy5maWx0ZXJHdWlzPXQsdGhpcy5sYXN0T3BlbmVkSW5Db250YWluZXI9ZX0pKX1nZXRGaWx0ZXJUaXRsZShlLHQpe3JldHVybiBudWxsIT10LnRpdGxlP3QudGl0bGU6ZSBpbnN0YW5jZW9mIHMuUHJvdmlkZWRGaWx0ZXI/ZS5nZXRGaWx0ZXJUaXRsZSgpOiJGaWx0ZXIifWRlc3Ryb3lDaGlsZHJlbigpe3RoaXMuZ3VpRGVzdHJveUZ1bmNzLmZvckVhY2goZT0+ZSgpKSx0aGlzLmd1aURlc3Ryb3lGdW5jcy5sZW5ndGg9MCx0aGlzLmZpbHRlckd1aXMubGVuZ3RoPTB9aW5zZXJ0RmlsdGVyTWVudShlLHQpe2NvbnN0IGk9dGhpcy5jcmVhdGVCZWFuKG5ldyBzLkFnTWVudUl0ZW1Db21wb25lbnQpO3JldHVybiBpLmluaXQoe21lbnVJdGVtRGVmOntuYW1lOnQsc3ViTWVudTpbXSxjc3NDbGFzc2VzOlsiYWctbXVsdGktZmlsdGVyLW1lbnUtaXRlbSJdLG1lbnVJdGVtOnMuQWdNZW51SXRlbVJlbmRlcmVyLG1lbnVJdGVtUGFyYW1zOntjc3NDbGFzc1ByZWZpeDoiYWctY29tcGFjdC1tZW51LW9wdGlvbiIsaXNDb21wYWN0OiEwfX0sbGV2ZWw6MCxpc0Fub3RoZXJTdWJNZW51T3BlbjooKT0+ITEsY2hpbGRDb21wb25lbnQ6ZSxjb250ZXh0UGFyYW1zOntjb2x1bW46bnVsbCxub2RlOm51bGwsdmFsdWU6bnVsbH19KS50aGVuKCgpPT57aS5zZXRQYXJlbnRDb21wb25lbnQodGhpcyksdGhpcy5ndWlEZXN0cm95RnVuY3MucHVzaCgoKT0+dGhpcy5kZXN0cm95QmVhbihpKSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIoaSxzLkFnTWVudUl0ZW1Db21wb25lbnQuRVZFTlRfTUVOVV9JVEVNX0FDVElWQVRFRCxlPT57dGhpcy5sYXN0QWN0aXZhdGVkTWVudUl0ZW0mJnRoaXMubGFzdEFjdGl2YXRlZE1lbnVJdGVtIT09ZS5tZW51SXRlbSYmdGhpcy5sYXN0QWN0aXZhdGVkTWVudUl0ZW0uZGVhY3RpdmF0ZSgpLHRoaXMubGFzdEFjdGl2YXRlZE1lbnVJdGVtPWUubWVudUl0ZW19KTtjb25zdCBlPWkuZ2V0R3VpKCk7cmV0dXJuIGkuYWRkTWFuYWdlZExpc3RlbmVyKGUsImtleWRvd24iLGU9Pntjb25zdHtrZXk6dH09ZTtzd2l0Y2godCl7Y2FzZSBzLktleUNvZGUuVVA6Y2FzZSBzLktleUNvZGUuUklHSFQ6Y2FzZSBzLktleUNvZGUuRE9XTjpjYXNlIHMuS2V5Q29kZS5MRUZUOmUucHJldmVudERlZmF1bHQoKSx0PT09cy5LZXlDb2RlLlJJR0hUJiZpLm9wZW5TdWJNZW51KCEwKX19KSxpLmFkZE1hbmFnZWRMaXN0ZW5lcihlLCJmb2N1c2luIiwoKT0+aS5hY3RpdmF0ZSgpKSxpLmFkZE1hbmFnZWRMaXN0ZW5lcihlLCJmb2N1c291dCIsKCk9PntpLmlzU3ViTWVudU9wZW4oKXx8aS5pc1N1Yk1lbnVPcGVuaW5nKCl8fGkuZGVhY3RpdmF0ZSgpfSksaX0pfWluc2VydEZpbHRlckdyb3VwKGUsdCl7Y29uc3QgaT10aGlzLmNyZWF0ZUJlYW4obmV3IHMuQWdHcm91cENvbXBvbmVudCh7dGl0bGU6dCxjc3NJZGVudGlmaWVyOiJtdWx0aS1maWx0ZXIifSkpO3JldHVybiB0aGlzLmd1aURlc3Ryb3lGdW5jcy5wdXNoKCgpPT50aGlzLmRlc3Ryb3lCZWFuKGkpKSxpLmFkZEl0ZW0oZS5nZXRHdWkoKSksaS50b2dnbGVHcm91cEV4cGFuZCghMSksZS5hZnRlckd1aUF0dGFjaGVkJiZpLmFkZE1hbmFnZWRMaXN0ZW5lcihpLHMuQWdHcm91cENvbXBvbmVudC5FVkVOVF9FWFBBTkRFRCwoKT0+ZS5hZnRlckd1aUF0dGFjaGVkKHtjb250YWluZXI6dGhpcy5sYXN0T3BlbmVkSW5Db250YWluZXIsc3VwcHJlc3NGb2N1czohMCxoaWRlUG9wdXA6dGhpcy5oaWRlUG9wdXB9KSksaX1pc0ZpbHRlckFjdGl2ZSgpe3JldHVybiB0aGlzLmZpbHRlcnMuc29tZShlPT5lLmlzRmlsdGVyQWN0aXZlKCkpfWdldExhc3RBY3RpdmVGaWx0ZXJJbmRleCgpe3JldHVybiB0aGlzLmFjdGl2ZUZpbHRlckluZGljZXMubGVuZ3RoPjA/dGhpcy5hY3RpdmVGaWx0ZXJJbmRpY2VzW3RoaXMuYWN0aXZlRmlsdGVySW5kaWNlcy5sZW5ndGgtMV06bnVsbH1kb2VzRmlsdGVyUGFzcyhlLHQpe2xldCBpPSEwO3JldHVybiB0aGlzLmZpbHRlcnMuZm9yRWFjaChzPT57aSYmcyE9PXQmJnMuaXNGaWx0ZXJBY3RpdmUoKSYmKGk9cy5kb2VzRmlsdGVyUGFzcyhlKSl9KSxpfWdldEZpbHRlclR5cGUoKXtyZXR1cm4ibXVsdGkifWdldE1vZGVsRnJvbVVpKCl7cmV0dXJue2ZpbHRlclR5cGU6dGhpcy5nZXRGaWx0ZXJUeXBlKCksZmlsdGVyTW9kZWxzOnRoaXMuZmlsdGVycy5tYXAoZT0+e2NvbnN0IHQ9ZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdC5nZXRNb2RlbEZyb21VaT90LmdldE1vZGVsRnJvbVVpKCk6bnVsbH0pfX1nZXRNb2RlbCgpe2lmKCF0aGlzLmlzRmlsdGVyQWN0aXZlKCkpcmV0dXJuIG51bGw7cmV0dXJue2ZpbHRlclR5cGU6dGhpcy5nZXRGaWx0ZXJUeXBlKCksZmlsdGVyTW9kZWxzOnRoaXMuZmlsdGVycy5tYXAoZT0+ZS5pc0ZpbHRlckFjdGl2ZSgpP2UuZ2V0TW9kZWwoKTpudWxsKX19c2V0TW9kZWwoZSl7Y29uc3QgdD0oZSx0KT0+bmV3IHMuQWdQcm9taXNlKGk9Pntjb25zdCBzPWUuc2V0TW9kZWwodCk7cz9zLnRoZW4oKCk9PmkoKSk6aSgpfSk7bGV0IGk9W107cmV0dXJuIG51bGw9PWU/aT10aGlzLmZpbHRlcnMubWFwKChlLGkpPT50KGUsbnVsbCkudGhlbigoKT0+e3RoaXMudXBkYXRlQWN0aXZlTGlzdChpKX0pKTp0aGlzLmZpbHRlcnMuZm9yRWFjaCgocyxyKT0+e2NvbnN0IG89ZS5maWx0ZXJNb2RlbHMubGVuZ3RoPnI/ZS5maWx0ZXJNb2RlbHNbcl06bnVsbCxuPXQocyxvKS50aGVuKCgpPT57dGhpcy51cGRhdGVBY3RpdmVMaXN0KHIpfSk7aS5wdXNoKG4pfSkscy5BZ1Byb21pc2UuYWxsKGkpLnRoZW4oKCk9Pnt9KX1hcHBseU1vZGVsKGU9ImFwaSIpe2xldCB0PSExO3JldHVybiB0aGlzLmZpbHRlcnMuZm9yRWFjaChpPT57aSBpbnN0YW5jZW9mIHMuUHJvdmlkZWRGaWx0ZXImJih0PWkuYXBwbHlNb2RlbChlKXx8dCl9KSx0fWdldENoaWxkRmlsdGVySW5zdGFuY2UoZSl7cmV0dXJuIHRoaXMuZmlsdGVyc1tlXX1hZnRlckd1aUF0dGFjaGVkKGUpe2xldCB0O2U/KHRoaXMuaGlkZVBvcHVwPWUuaGlkZVBvcHVwLHQ9dGhpcy5yZWZyZXNoR3VpKGUuY29udGFpbmVyKSk6KHRoaXMuaGlkZVBvcHVwPXZvaWQgMCx0PXMuQWdQcm9taXNlLnJlc29sdmUoKSksdC50aGVuKCgpPT57Y29uc3R7ZmlsdGVyRGVmczp0fT10aGlzO2xldCBpPSExO3QmJnMuXy5mb3JFYWNoUmV2ZXJzZSh0LCh0LHMpPT57dmFyIHI7Y29uc3Qgbz0wPT09cyxuPSFvfHwiaW5saW5lIiE9PXQuZGlzcGxheSxhPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxudWxsIT1lP2U6e30pLHtzdXBwcmVzc0ZvY3VzOm59KSxsPW51bGw9PT0ocj10aGlzLmZpbHRlcnMpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyW3NdO2lmKGwmJih0aGlzLmV4ZWN1dGVGdW5jdGlvbklmRXhpc3RzT25GaWx0ZXIobCwiYWZ0ZXJHdWlBdHRhY2hlZCIsYSksbyYmKGk9ITApKSxvJiZuKXtjb25zdCBlPXRoaXMuZmlsdGVyR3Vpc1tzXTtlJiYoZS5mb2N1cygpLGk9ITApfX0pO2NvbnN0IHI9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0RG9jdW1lbnQoKSxvPXIuYWN0aXZlRWxlbWVudDtpfHxvIT09ci5ib2R5JiYhdGhpcy5nZXRHdWkoKS5jb250YWlucyhvKXx8dGhpcy5mb3JjZUZvY3VzT3V0T2ZDb250YWluZXIoITApfSl9YWZ0ZXJHdWlEZXRhY2hlZCgpe3RoaXMuZXhlY3V0ZUZ1bmN0aW9uSWZFeGlzdHMoImFmdGVyR3VpRGV0YWNoZWQiKX1vbkFueUZpbHRlckNoYW5nZWQoKXt0aGlzLmV4ZWN1dGVGdW5jdGlvbklmRXhpc3RzKCJvbkFueUZpbHRlckNoYW5nZWQiKX1vbk5ld1Jvd3NMb2FkZWQoKXt0aGlzLmV4ZWN1dGVGdW5jdGlvbklmRXhpc3RzKCJvbk5ld1Jvd3NMb2FkZWQiKX1kZXN0cm95KCl7dGhpcy5maWx0ZXJzLmZvckVhY2goZT0+e2Uuc2V0TW9kZWwobnVsbCksdGhpcy5kZXN0cm95QmVhbihlKX0pLHRoaXMuZmlsdGVycy5sZW5ndGg9MCx0aGlzLmRlc3Ryb3lDaGlsZHJlbigpLHRoaXMuaGlkZVBvcHVwPXZvaWQgMCxzdXBlci5kZXN0cm95KCl9ZXhlY3V0ZUZ1bmN0aW9uSWZFeGlzdHMoZSwuLi50KXtzLl8uZm9yRWFjaFJldmVyc2UodGhpcy5maWx0ZXJzLGk9Pnt0aGlzLmV4ZWN1dGVGdW5jdGlvbklmRXhpc3RzT25GaWx0ZXIoaSxlLHQpfSl9ZXhlY3V0ZUZ1bmN0aW9uSWZFeGlzdHNPbkZpbHRlcihlLHQsLi4uaSl7Y29uc3Qgcz1lW3RdOyJmdW5jdGlvbiI9PXR5cGVvZiBzJiZzLmFwcGx5KGUsaSl9Y3JlYXRlRmlsdGVyKGUsdCl7Y29uc3R7ZmlsdGVyTW9kaWZpZWRDYWxsYmFjazppLGRvZXNSb3dQYXNzT3RoZXJGaWx0ZXI6c309dGhpcy5wYXJhbXM7bGV0IHI7Y29uc3Qgbz1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5maWx0ZXJNYW5hZ2VyLmNyZWF0ZUZpbHRlclBhcmFtcyh0aGlzLmNvbHVtbix0aGlzLmNvbHVtbi5nZXRDb2xEZWYoKSkpLHtmaWx0ZXJNb2RpZmllZENhbGxiYWNrOmksZmlsdGVyQ2hhbmdlZENhbGxiYWNrOmU9Pnt0aGlzLmV4ZWN1dGVXaGVuQWxsRmlsdGVyc1JlYWR5KCgpPT50aGlzLmZpbHRlckNoYW5nZWQodCxlKSl9LGRvZXNSb3dQYXNzT3RoZXJGaWx0ZXI6ZT0+cyhlKSYmdGhpcy5kb2VzRmlsdGVyUGFzcyh7bm9kZTplLGRhdGE6ZS5kYXRhfSxyKX0pLG49dGhpcy51c2VyQ29tcG9uZW50RmFjdG9yeS5nZXRGaWx0ZXJEZXRhaWxzKGUsbywiYWdUZXh0Q29sdW1uRmlsdGVyIik7aWYoIW4pcmV0dXJuIG51bGw7Y29uc3QgYT1uLm5ld0FnU3RhY2tJbnN0YW5jZSgpO3JldHVybiBhJiZhLnRoZW4oZT0+cj1lKSxhfWV4ZWN1dGVXaGVuQWxsRmlsdGVyc1JlYWR5KGUpe3RoaXMuZmlsdGVycyYmdGhpcy5maWx0ZXJzLmxlbmd0aD4wP2UoKTp0aGlzLmFmdGVyRmlsdGVyc1JlYWR5RnVuY3MucHVzaChlKX11cGRhdGVBY3RpdmVMaXN0KGUpe2NvbnN0IHQ9dGhpcy5maWx0ZXJzW2VdO3MuXy5yZW1vdmVGcm9tQXJyYXkodGhpcy5hY3RpdmVGaWx0ZXJJbmRpY2VzLGUpLHQuaXNGaWx0ZXJBY3RpdmUoKSYmdGhpcy5hY3RpdmVGaWx0ZXJJbmRpY2VzLnB1c2goZSl9ZmlsdGVyQ2hhbmdlZChlLHQpe3RoaXMudXBkYXRlQWN0aXZlTGlzdChlKSx0aGlzLmZpbHRlckNoYW5nZWRDYWxsYmFjayh0KTtjb25zdCBpPXRoaXMuZmlsdGVyc1tlXTt0aGlzLmZpbHRlcnMuZm9yRWFjaChlPT57ZSE9PWkmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLm9uQW55RmlsdGVyQ2hhbmdlZCYmZS5vbkFueUZpbHRlckNoYW5nZWQoKX0pfW9uRm9jdXNJbihlKXtudWxsPT10aGlzLmxhc3RBY3RpdmF0ZWRNZW51SXRlbXx8dGhpcy5sYXN0QWN0aXZhdGVkTWVudUl0ZW0uZ2V0R3VpKCkuY29udGFpbnMoZS50YXJnZXQpfHwodGhpcy5sYXN0QWN0aXZhdGVkTWVudUl0ZW0uZGVhY3RpdmF0ZSgpLHRoaXMubGFzdEFjdGl2YXRlZE1lbnVJdGVtPW51bGwpfWdldE1vZGVsQXNTdHJpbmcoZSl7dmFyIHQsaSxzLHI7aWYoIXRoaXMuZmlsdGVyc3x8IShudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5maWx0ZXJNb2RlbHMpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lmxlbmd0aCkpcmV0dXJuIiI7Y29uc3Qgbz1udWxsIT09KGk9dGhpcy5nZXRMYXN0QWN0aXZlRmlsdGVySW5kZXgoKSkmJnZvaWQgMCE9PWk/aTowLG49dGhpcy5maWx0ZXJzW29dO3JldHVybiBudWxsIT09KHI9bnVsbD09PShzPW4uZ2V0TW9kZWxBc1N0cmluZyl8fHZvaWQgMD09PXM/dm9pZCAwOnMuY2FsbChuLGUuZmlsdGVyTW9kZWxzW29dKSkmJnZvaWQgMCE9PXI/cjoiIn19byhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZmlsdGVyTWFuYWdlciIpXSxuLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKSxvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJ1c2VyQ29tcG9uZW50RmFjdG9yeSIpXSxuLnByb3RvdHlwZSwidXNlckNvbXBvbmVudEZhY3RvcnkiLHZvaWQgMCksbyhbcy5Qb3N0Q29uc3RydWN0XSxuLnByb3RvdHlwZSwicG9zdENvbnN0cnVjdCIsbnVsbCk7dmFyIGE9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbz1hcmd1bWVudHMubGVuZ3RoLG49bzwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW49UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobj0obzwzP3Iobik6bz4zP3IodCxpLG4pOnIodCxpKSl8fG4pO3JldHVybiBvPjMmJm4mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbiksbn07Y2xhc3MgbCBleHRlbmRzIHMuQ29tcG9uZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoJzxkaXYgY2xhc3M9ImFnLW11bHRpLWZsb2F0aW5nLWZpbHRlciBhZy1mbG9hdGluZy1maWx0ZXItaW5wdXQiPjwvZGl2PicpLHRoaXMuZmxvYXRpbmdGaWx0ZXJzPVtdLHRoaXMuY29tcERldGFpbHNMaXN0PVtdfWluaXQoZSl7dGhpcy5wYXJhbXM9ZTtjb25zdHtjb21wRGV0YWlsc0xpc3Q6dH09dGhpcy5nZXRDb21wRGV0YWlsc0xpc3QoZSk7cmV0dXJuIHRoaXMuc2V0UGFyYW1zKHQpfXNldFBhcmFtcyhlKXtjb25zdCB0PVtdO3JldHVybiBlLmZvckVhY2goZT0+e2NvbnN0IGk9bnVsbD09ZT92b2lkIDA6ZS5uZXdBZ1N0YWNrSW5zdGFuY2UoKTtudWxsIT1pJiYodGhpcy5jb21wRGV0YWlsc0xpc3QucHVzaChlKSx0LnB1c2goaSkpfSkscy5BZ1Byb21pc2UuYWxsKHQpLnRoZW4oZT0+e2UuZm9yRWFjaCgoZSx0KT0+e3RoaXMuZmxvYXRpbmdGaWx0ZXJzLnB1c2goZSk7Y29uc3QgaT1lLmdldEd1aSgpO3RoaXMuYXBwZW5kQ2hpbGQoaSksdD4wJiZzLl8uc2V0RGlzcGxheWVkKGksITEpfSl9KX1vblBhcmFtc1VwZGF0ZWQoZSl7dGhpcy5yZWZyZXNoKGUpfXJlZnJlc2goZSl7dGhpcy5wYXJhbXM9ZTtjb25zdHtjb21wRGV0YWlsc0xpc3Q6dCxmbG9hdGluZ0ZpbHRlclBhcmFtc0xpc3Q6aX09dGhpcy5nZXRDb21wRGV0YWlsc0xpc3QoZSk7dC5sZW5ndGg9PT10aGlzLmNvbXBEZXRhaWxzTGlzdC5sZW5ndGgmJnQuZXZlcnkoKGUsdCk9PiF0aGlzLmZpbHRlck1hbmFnZXIuYXJlRmlsdGVyQ29tcHNEaWZmZXJlbnQodGhpcy5jb21wRGV0YWlsc0xpc3RbdF0sZSkpP2kuZm9yRWFjaCgoZSx0KT0+e3ZhciBpO2NvbnN0IHM9dGhpcy5mbG9hdGluZ0ZpbHRlcnNbdF07bGV0IHI9ITE7aWYocy5yZWZyZXNoKXtudWxsIT09cy5yZWZyZXNoKGUpJiYocj0hMCl9cnx8bnVsbD09PShpPXMub25QYXJhbXNVcGRhdGVkKXx8dm9pZCAwPT09aXx8aS5jYWxsKHMsZSl9KToocy5fLmNsZWFyRWxlbWVudCh0aGlzLmdldEd1aSgpKSx0aGlzLmRlc3Ryb3lCZWFucyh0aGlzLmZsb2F0aW5nRmlsdGVycyksdGhpcy5mbG9hdGluZ0ZpbHRlcnM9W10sdGhpcy5jb21wRGV0YWlsc0xpc3Q9W10sdGhpcy5zZXRQYXJhbXModCkpfWdldENvbXBEZXRhaWxzTGlzdChlKXtjb25zdCB0PVtdLGk9W10scj1lLmZpbHRlclBhcmFtcztyZXR1cm4gbi5nZXRGaWx0ZXJEZWZzKHIpLmZvckVhY2goKHIsbyk9Pntjb25zdCBuPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGFyZW50RmlsdGVySW5zdGFuY2U6ZT0+e3RoaXMucGFyZW50TXVsdGlGaWx0ZXJJbnN0YW5jZSh0PT57Y29uc3QgaT10LmdldENoaWxkRmlsdGVySW5zdGFuY2Uobyk7bnVsbCE9aSYmZShpKX0pfX0pO3MuXy5tZXJnZURlZXAobi5maWx0ZXJQYXJhbXMsci5maWx0ZXJQYXJhbXMpO2NvbnN0IGE9dGhpcy5nZXRDb21wRGV0YWlscyhyLG4pO2EmJih0LnB1c2goYSksaS5wdXNoKG4pKX0pLHtjb21wRGV0YWlsc0xpc3Q6dCxmbG9hdGluZ0ZpbHRlclBhcmFtc0xpc3Q6aX19b25QYXJlbnRNb2RlbENoYW5nZWQoZSx0KXt0JiZ0LmFmdGVyRmxvYXRpbmdGaWx0ZXJ8fHRoaXMucGFyZW50TXVsdGlGaWx0ZXJJbnN0YW5jZShpPT57aWYobnVsbD09ZSl0aGlzLmZsb2F0aW5nRmlsdGVycy5mb3JFYWNoKChlLGkpPT57ZS5vblBhcmVudE1vZGVsQ2hhbmdlZChudWxsLHQpLHMuXy5zZXREaXNwbGF5ZWQoZS5nZXRHdWkoKSwwPT09aSl9KTtlbHNle2NvbnN0IHI9aS5nZXRMYXN0QWN0aXZlRmlsdGVySW5kZXgoKTt0aGlzLmZsb2F0aW5nRmlsdGVycy5mb3JFYWNoKChpLG8pPT57Y29uc3Qgbj1lLmZpbHRlck1vZGVscy5sZW5ndGg+bz9lLmZpbHRlck1vZGVsc1tvXTpudWxsO2kub25QYXJlbnRNb2RlbENoYW5nZWQobix0KTtjb25zdCBhPW51bGw9PXI/MD09PW86bz09PXI7cy5fLnNldERpc3BsYXllZChpLmdldEd1aSgpLGEpfSl9fSl9ZGVzdHJveSgpe3RoaXMuZGVzdHJveUJlYW5zKHRoaXMuZmxvYXRpbmdGaWx0ZXJzKSx0aGlzLmZsb2F0aW5nRmlsdGVycy5sZW5ndGg9MCxzdXBlci5kZXN0cm95KCl9Z2V0Q29tcERldGFpbHMoZSx0KXt2YXIgaTtsZXQgcz1udWxsIT09KGk9dGhpcy51c2VyQ29tcG9uZW50RmFjdG9yeS5nZXREZWZhdWx0RmxvYXRpbmdGaWx0ZXJUeXBlKGUsKCk9PnRoaXMuZmlsdGVyTWFuYWdlci5nZXREZWZhdWx0RmxvYXRpbmdGaWx0ZXIodGhpcy5wYXJhbXMuY29sdW1uKSkpJiZ2b2lkIDAhPT1pP2k6ImFnUmVhZE9ubHlGbG9hdGluZ0ZpbHRlciI7cmV0dXJuIHRoaXMudXNlckNvbXBvbmVudEZhY3RvcnkuZ2V0RmxvYXRpbmdGaWx0ZXJDb21wRGV0YWlscyhlLHQscyl9cGFyZW50TXVsdGlGaWx0ZXJJbnN0YW5jZShlKXt0aGlzLnBhcmFtcy5wYXJlbnRGaWx0ZXJJbnN0YW5jZSh0PT57aWYoISh0IGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IEVycm9yKCJBRyBHcmlkIC0gTXVsdGlGbG9hdGluZ0ZpbHRlckNvbXAgZXhwZWN0cyBNdWx0aUZpbHRlciBhcyBpdHMgcGFyZW50Iik7ZSh0KX0pfX1hKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJ1c2VyQ29tcG9uZW50RmFjdG9yeSIpXSxsLnByb3RvdHlwZSwidXNlckNvbXBvbmVudEZhY3RvcnkiLHZvaWQgMCksYShbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZmlsdGVyTWFuYWdlciIpXSxsLnByb3RvdHlwZSwiZmlsdGVyTWFuYWdlciIsdm9pZCAwKTtjb25zdCBkPXt2ZXJzaW9uOiIzMS4xLjEiLG1vZHVsZU5hbWU6cy5Nb2R1bGVOYW1lcy5NdWx0aUZpbHRlck1vZHVsZSxiZWFuczpbXSx1c2VyQ29tcG9uZW50czpbe2NvbXBvbmVudE5hbWU6ImFnTXVsdGlDb2x1bW5GaWx0ZXIiLGNvbXBvbmVudENsYXNzOm59LHtjb21wb25lbnROYW1lOiJhZ011bHRpQ29sdW1uRmxvYXRpbmdGaWx0ZXIiLGNvbXBvbmVudENsYXNzOmx9XSxkZXBlbmRhbnRNb2R1bGVzOltyLkVudGVycHJpc2VDb3JlTW9kdWxlXX07aS5kKHQsIk11bHRpRmlsdGVyTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gZH0pKSxpLmQodCwiTXVsdGlGaWx0ZXIiLChmdW5jdGlvbigpe3JldHVybiBufSkpfSxmdW5jdGlvbihlLHQsaSl7InVzZSBzdHJpY3QiO2kucih0KTt2YXIgcyxyPWkoMCksbz1pKDMpLG49aSgyKSxhPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O3ZhciBsOyFmdW5jdGlvbihlKXtlW2UuQ2VsbFJhbmdlPTBdPSJDZWxsUmFuZ2UiLGVbZS5TZWxlY3RlZFJvd3M9MV09IlNlbGVjdGVkUm93cyIsZVtlLkZvY3VzZWRDZWxsPTJdPSJGb2N1c2VkQ2VsbCJ9KGx8fChsPXt9KSk7Y29uc3QgZD1lPT5gQUcgR3JpZDogVW5hYmxlIHRvIHVzZSB0aGUgQ2xpcGJvYXJkIEFQSSAobmF2aWdhdG9yLmNsaXBib2FyZC4ke2V9KCkpLiBUaGUgcmVhc29uIHdoeSBpdCBjb3VsZCBub3QgYmUgdXNlZCBoYXMgYmVlbiBsb2dnZWQgaW4gdGhlIHByZXZpb3VzIGxpbmUuIEZvciB0aGlzIHJlYXNvbiB0aGUgZ3JpZCBoYXMgZGVmYXVsdGVkIHRvIHVzaW5nIGEgd29ya2Fyb3VuZCB3aGljaCBkb2Vzbid0IHBlcmZvcm0gYXMgd2VsbC4gRWl0aGVyIGZpeCB3aHkgQ2xpcGJvYXJkIEFQSSBpcyBibG9ja2VkLCBPUiBzdG9wIHRoaXMgbWVzc2FnZSBmcm9tIGFwcGVhcmluZyBieSBzZXR0aW5nIGdyaWQgcHJvcGVydHkgc3VwcHJlc3NDbGlwYm9hcmRBcGk9dHJ1ZSAod2hpY2ggd2lsbCBkZWZhdWx0IHRoZSBncmlkIHRvIHVzaW5nIHRoZSB3b3JrYXJvdW5kIHJhdGhlciB0aGFuIHRoZSBBUEkuYDtsZXQgYz1zPWNsYXNzIGV4dGVuZHMgci5CZWFuU3R1Yntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5sYXN0UGFzdGVPcGVyYXRpb25UaW1lPTAsdGhpcy5uYXZpZ2F0b3JBcGlGYWlsZWQ9ITF9aW5pdCgpe3RoaXMubG9nZ2VyPXRoaXMubG9nZ2VyRmFjdG9yeS5jcmVhdGUoIkNsaXBib2FyZFNlcnZpY2UiKSwiY2xpZW50U2lkZSI9PT10aGlzLnJvd01vZGVsLmdldFR5cGUoKSYmKHRoaXMuY2xpZW50U2lkZVJvd01vZGVsPXRoaXMucm93TW9kZWwpLHRoaXMuY3RybHNTZXJ2aWNlLndoZW5SZWFkeShlPT57dGhpcy5ncmlkQ3RybD1lLmdyaWRDdHJsfSl9cGFzdGVGcm9tQ2xpcGJvYXJkKCl7dGhpcy5sb2dnZXIubG9nKCJwYXN0ZUZyb21DbGlwYm9hcmQiKTshdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0NsaXBib2FyZEFwaSIpJiYhdGhpcy5uYXZpZ2F0b3JBcGlGYWlsZWQmJm5hdmlnYXRvci5jbGlwYm9hcmQmJm5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQ/bmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpLnRoZW4odGhpcy5wcm9jZXNzQ2xpcGJvYXJkRGF0YS5iaW5kKHRoaXMpKS5jYXRjaChlPT57ci5fLmRvT25jZSgoKT0+e2NvbnNvbGUud2FybihlKSxjb25zb2xlLndhcm4oZCgicmVhZFRleHQiKSl9LCJjbGlwYm9hcmRBcGlFcnJvciIpLHRoaXMubmF2aWdhdG9yQXBpRmFpbGVkPSEwLHRoaXMucGFzdGVGcm9tQ2xpcGJvYXJkTGVnYWN5KCl9KTp0aGlzLnBhc3RlRnJvbUNsaXBib2FyZExlZ2FjeSgpfXBhc3RlRnJvbUNsaXBib2FyZExlZ2FjeSgpe2xldCBlPSExO2NvbnN0IHQ9dD0+e2NvbnN0IGk9KG5ldyBEYXRlKS5nZXRUaW1lKCk7aS10aGlzLmxhc3RQYXN0ZU9wZXJhdGlvblRpbWU8NTAmJihlPSEwLHQucHJldmVudERlZmF1bHQoKSksdGhpcy5sYXN0UGFzdGVPcGVyYXRpb25UaW1lPWl9O3RoaXMuZXhlY3V0ZU9uVGVtcEVsZW1lbnQoZT0+e2UuYWRkRXZlbnRMaXN0ZW5lcigicGFzdGUiLHQpLGUuZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KX0saT0+e2NvbnN0IHM9aS52YWx1ZTtlP3RoaXMucmVmb2N1c0xhc3RGb2N1c2VkQ2VsbCgpOnRoaXMucHJvY2Vzc0NsaXBib2FyZERhdGEocyksaS5yZW1vdmVFdmVudExpc3RlbmVyKCJwYXN0ZSIsdCl9KX1yZWZvY3VzTGFzdEZvY3VzZWRDZWxsKCl7Y29uc3QgZT10aGlzLmZvY3VzU2VydmljZS5nZXRGb2N1c2VkQ2VsbCgpO2UmJnRoaXMuZm9jdXNTZXJ2aWNlLnNldEZvY3VzZWRDZWxsKHtyb3dJbmRleDplLnJvd0luZGV4LGNvbHVtbjplLmNvbHVtbixyb3dQaW5uZWQ6ZS5yb3dQaW5uZWQsZm9yY2VCcm93c2VyRm9jdXM6ITB9KX1nZXRDbGlwYm9hcmREZWxpbWl0ZXIoKXtjb25zdCBlPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiY2xpcGJvYXJkRGVsaW1pdGVyIik7cmV0dXJuIHIuXy5leGlzdHMoZSk/ZToiXHQifXByb2Nlc3NDbGlwYm9hcmREYXRhKGUpe2lmKG51bGw9PWUpcmV0dXJuO2xldCB0PXMuc3RyaW5nVG9BcnJheShlLHRoaXMuZ2V0Q2xpcGJvYXJkRGVsaW1pdGVyKCkpO2NvbnN0IGk9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Q2FsbGJhY2soInByb2Nlc3NEYXRhRnJvbUNsaXBib2FyZCIpO2lmKGkmJih0PWkoe2RhdGE6dH0pKSxudWxsPT10KXJldHVybjt0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzTGFzdEVtcHR5TGluZU9uUGFzdGUiKSYmdGhpcy5yZW1vdmVMYXN0TGluZUlmQmxhbmsodCk7dGhpcy5kb1Bhc3RlT3BlcmF0aW9uKChlLGkscyxyKT0+e3RoaXMucmFuZ2VTZXJ2aWNlJiZ0aGlzLnJhbmdlU2VydmljZS5pc01vcmVUaGFuT25lQ2VsbCgpJiYhdGhpcy5oYXNPbmx5T25lVmFsdWVUb1Bhc3RlKHQpP3RoaXMucGFzdGVJbnRvQWN0aXZlUmFuZ2UodCxlLGkscik6dGhpcy5wYXN0ZVN0YXJ0aW5nRnJvbUZvY3VzZWRDZWxsKHQsZSxpLHMscil9KX1zdGF0aWMgc3RyaW5nVG9BcnJheShlLHQ9IiwiKXtjb25zdCBpPVtdLHM9ZT0+IlxyIj09PWV8fCJcbiI9PT1lO2xldCByPSExO2lmKCIiPT09ZSlyZXR1cm5bWyIiXV07Zm9yKGxldCBvPTAsbj0wLGE9MDthPGUubGVuZ3RoO2ErKyl7Y29uc3QgbD1lW2EtMV0sZD1lW2FdLGM9ZVthKzFdLGg9KCk9PntpW29dfHwoaVtvXT1bXSksaVtvXVtuXXx8KGlbb11bbl09IiIpfTtpZihoKCksJyInPT09ZCYmKHI/JyInPT09Yz8oaVtvXVtuXSs9JyInLGErKyk6cj0hMToodm9pZCAwPT09bHx8bD09PXR8fHMobCkpJiYocj0hMCkpLCFyJiYnIichPT1kKXtpZihkPT09dCl7bisrLGgoKTtjb250aW51ZX1pZihzKGQpKXtuPTAsbysrLGgoKSwiXHIiPT09ZCYmIlxuIj09PWMmJmErKztjb250aW51ZX19aVtvXVtuXSs9ZH1yZXR1cm4gaX1kb1Bhc3RlT3BlcmF0aW9uKGUpe2xldCB0O2lmKHRoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoe3R5cGU6ci5FdmVudHMuRVZFTlRfUEFTVEVfU1RBUlQsc291cmNlOiJjbGlwYm9hcmQifSksdGhpcy5jbGllbnRTaWRlUm93TW9kZWwpe2NvbnN0IGU9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJhZ2dyZWdhdGVPbmx5Q2hhbmdlZENvbHVtbnMiKTt0PW5ldyByLkNoYW5nZWRQYXRoKGUsdGhpcy5jbGllbnRTaWRlUm93TW9kZWwuZ2V0Um9vdE5vZGUoKSl9Y29uc3QgaT17fSxzPVtdO2UoaSxzLHRoaXMuZm9jdXNTZXJ2aWNlLmdldEZvY3VzZWRDZWxsKCksdCk7Y29uc3Qgbz1bLi4uc107dCYmKHRoaXMuY2xpZW50U2lkZVJvd01vZGVsLmRvQWdncmVnYXRlKHQpLHQuZm9yRWFjaENoYW5nZWROb2RlRGVwdGhGaXJzdChlPT57by5wdXNoKGUpfSkpLHRoaXMucm93UmVuZGVyZXIucmVmcmVzaENlbGxzKHtyb3dOb2RlczpvfSksdGhpcy5kaXNwYXRjaEZsYXNoQ2VsbHMoaSksdGhpcy5maXJlUm93Q2hhbmdlZChzKSx0aGlzLnJlZm9jdXNMYXN0Rm9jdXNlZENlbGwoKTtjb25zdCBuPXt0eXBlOnIuRXZlbnRzLkVWRU5UX1BBU1RFX0VORCxzb3VyY2U6ImNsaXBib2FyZCJ9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQobil9cGFzdGVJbnRvQWN0aXZlUmFuZ2UoZSx0LGkscyl7Y29uc3Qgcj10aGlzLmdldFJhbmdlU2l6ZSgpJWUubGVuZ3RoIT0wO2xldCBvPTAsbj0wO3RoaXMuaXRlcmF0ZUFjdGl2ZVJhbmdlcyghMSwoYSxsLGQsYyk9PntpZihjLW8+PWUubGVuZ3RoKXtpZihyKXJldHVybjtvKz1uLG49MH1jb25zdCBoPWVbYy1vXTtpLnB1c2gobCk7Y29uc3QgdT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygicHJvY2Vzc0NlbGxGcm9tQ2xpcGJvYXJkIik7ZC5mb3JFYWNoKChlLGkpPT57aWYoIWUuaXNDZWxsRWRpdGFibGUobCl8fGUuaXNTdXBwcmVzc1Bhc3RlKGwpKXJldHVybjtpPj1oLmxlbmd0aCYmKGklPWgubGVuZ3RoKTtjb25zdCByPXRoaXMucHJvY2Vzc0NlbGwobCxlLGhbaV0sImRyYWdDb3B5Iix1LCEwKTtsLnNldERhdGFWYWx1ZShlLHIsInBhc3RlIikscyYmcy5hZGRQYXJlbnROb2RlKGwucGFyZW50LFtlXSk7Y29uc3R7cm93SW5kZXg6byxyb3dQaW5uZWQ6bn09YSxkPXRoaXMuY2VsbFBvc2l0aW9uVXRpbHMuY3JlYXRlSWRGcm9tVmFsdWVzKHtyb3dJbmRleDpvLGNvbHVtbjplLHJvd1Bpbm5lZDpufSk7dFtkXT0hMH0pLG4rK30pfXBhc3RlU3RhcnRpbmdGcm9tRm9jdXNlZENlbGwoZSx0LGkscyxyKXtpZighcylyZXR1cm47Y29uc3Qgbz17cm93SW5kZXg6cy5yb3dJbmRleCxyb3dQaW5uZWQ6cy5yb3dQaW5uZWR9LG49dGhpcy5jb2x1bW5Nb2RlbC5nZXREaXNwbGF5ZWRDb2x1bW5zU3RhcnRpbmdBdChzLmNvbHVtbik7dGhpcy5pc1Bhc3RlU2luZ2xlVmFsdWVJbnRvUmFuZ2UoZSk/dGhpcy5wYXN0ZVNpbmdsZVZhbHVlSW50b1JhbmdlKGUsaSx0LHIpOnRoaXMucGFzdGVNdWx0aXBsZVZhbHVlcyhlLG8saSxuLHQsImNsaXBib2FyZCIscil9aXNQYXN0ZVNpbmdsZVZhbHVlSW50b1JhbmdlKGUpe3JldHVybiB0aGlzLmhhc09ubHlPbmVWYWx1ZVRvUGFzdGUoZSkmJm51bGwhPXRoaXMucmFuZ2VTZXJ2aWNlJiYhdGhpcy5yYW5nZVNlcnZpY2UuaXNFbXB0eSgpfXBhc3RlU2luZ2xlVmFsdWVJbnRvUmFuZ2UoZSx0LGkscyl7Y29uc3Qgcj1lWzBdWzBdO3RoaXMuaXRlcmF0ZUFjdGl2ZVJhbmdlcyghMSwoZSxvLG4pPT57dC5wdXNoKG8pLG4uZm9yRWFjaChlPT50aGlzLnVwZGF0ZUNlbGxWYWx1ZShvLGUscixpLCJjbGlwYm9hcmQiLHMpKX0pfWhhc09ubHlPbmVWYWx1ZVRvUGFzdGUoZSl7cmV0dXJuIDE9PT1lLmxlbmd0aCYmMT09PWVbMF0ubGVuZ3RofWNvcHlSYW5nZURvd24oKXtpZighdGhpcy5yYW5nZVNlcnZpY2V8fHRoaXMucmFuZ2VTZXJ2aWNlLmlzRW1wdHkoKSlyZXR1cm47Y29uc3QgZT1bXTt0aGlzLmRvUGFzdGVPcGVyYXRpb24oKHQsaSxzLHIpPT57Y29uc3Qgbz10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygicHJvY2Vzc0NlbGxGb3JDbGlwYm9hcmQiKSxuPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJwcm9jZXNzQ2VsbEZyb21DbGlwYm9hcmQiKTt0aGlzLml0ZXJhdGVBY3RpdmVSYW5nZXMoITAsKHMsYSxsKT0+e2UubGVuZ3RoPyhpLnB1c2goYSksbC5mb3JFYWNoKChpLG8pPT57aWYoIWkuaXNDZWxsRWRpdGFibGUoYSl8fGkuaXNTdXBwcmVzc1Bhc3RlKGEpKXJldHVybjtjb25zdCBsPXRoaXMucHJvY2Vzc0NlbGwoYSxpLGVbb10sImRyYWdDb3B5IixuLCEwKTthLnNldERhdGFWYWx1ZShpLGwsInBhc3RlIiksciYmci5hZGRQYXJlbnROb2RlKGEucGFyZW50LFtpXSk7Y29uc3R7cm93SW5kZXg6ZCxyb3dQaW5uZWQ6Y309cyxoPXRoaXMuY2VsbFBvc2l0aW9uVXRpbHMuY3JlYXRlSWRGcm9tVmFsdWVzKHtyb3dJbmRleDpkLGNvbHVtbjppLHJvd1Bpbm5lZDpjfSk7dFtoXT0hMH0pKTpsLmZvckVhY2godD0+e2NvbnN0IGk9dGhpcy5wcm9jZXNzQ2VsbChhLHQsdGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUodCxhKSwiZHJhZ0NvcHkiLG8sITEsITApO2UucHVzaChpKX0pfSl9KX1yZW1vdmVMYXN0TGluZUlmQmxhbmsoZSl7Y29uc3QgdD1yLl8ubGFzdChlKTtpZih0JiYxPT09dC5sZW5ndGgmJiIiPT09dFswXSl7aWYoMT09PWUubGVuZ3RoKXJldHVybjtyLl8ucmVtb3ZlRnJvbUFycmF5KGUsdCl9fWZpcmVSb3dDaGFuZ2VkKGUpeyJmdWxsUm93Ij09PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgiZWRpdFR5cGUiKSYmZS5mb3JFYWNoKGU9Pntjb25zdCB0PXt0eXBlOnIuRXZlbnRzLkVWRU5UX1JPV19WQUxVRV9DSEFOR0VELG5vZGU6ZSxkYXRhOmUuZGF0YSxyb3dJbmRleDplLnJvd0luZGV4LHJvd1Bpbm5lZDplLnJvd1Bpbm5lZH07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0KX0pfXBhc3RlTXVsdGlwbGVWYWx1ZXMoZSx0LGkscyxyLG8sbil7bGV0IGE9dDtjb25zdCBsPW51bGwhPXRoaXMuY2xpZW50U2lkZVJvd01vZGVsJiYhdGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJlbmFibGVHcm91cEVkaXQiKSYmIXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidHJlZURhdGEiKSxkPSgpPT57Zm9yKDs7KXtpZighYSlyZXR1cm4gbnVsbDtjb25zdCBlPXRoaXMucm93UG9zaXRpb25VdGlscy5nZXRSb3dOb2RlKGEpO2lmKGE9dGhpcy5jZWxsTmF2aWdhdGlvblNlcnZpY2UuZ2V0Um93QmVsb3coe3Jvd1Bpbm5lZDphLnJvd1Bpbm5lZCxyb3dJbmRleDphLnJvd0luZGV4fSksbnVsbD09ZSlyZXR1cm4gbnVsbDtpZighKGUuZGV0YWlsfHxlLmZvb3Rlcnx8bCYmZS5ncm91cCkpcmV0dXJuIGV9fTtlLmZvckVhY2goZT0+e2NvbnN0IHQ9ZCgpO3QmJihlLmZvckVhY2goKGUsaSk9PnRoaXMudXBkYXRlQ2VsbFZhbHVlKHQsc1tpXSxlLHIsbyxuKSksaS5wdXNoKHQpKX0pfXVwZGF0ZUNlbGxWYWx1ZShlLHQsaSxzLHIsbyl7aWYoIWV8fCF0fHwhdC5pc0NlbGxFZGl0YWJsZShlKXx8dC5pc1N1cHByZXNzUGFzdGUoZSkpcmV0dXJuO2lmKGUuZ3JvdXAmJnQuaXNWYWx1ZUFjdGl2ZSgpKXJldHVybjtjb25zdCBuPXRoaXMucHJvY2Vzc0NlbGwoZSx0LGkscix0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygicHJvY2Vzc0NlbGxGcm9tQ2xpcGJvYXJkIiksITApO2Uuc2V0RGF0YVZhbHVlKHQsbiwicGFzdGUiKTtjb25zdHtyb3dJbmRleDphLHJvd1Bpbm5lZDpsfT1lO3NbdGhpcy5jZWxsUG9zaXRpb25VdGlscy5jcmVhdGVJZEZyb21WYWx1ZXMoe3Jvd0luZGV4OmEsY29sdW1uOnQscm93UGlubmVkOmx9KV09ITAsbyYmby5hZGRQYXJlbnROb2RlKGUucGFyZW50LFt0XSl9Y29weVRvQ2xpcGJvYXJkKGU9e30pe3RoaXMuY29weU9yQ3V0VG9DbGlwYm9hcmQoZSl9Y3V0VG9DbGlwYm9hcmQoZT17fSx0PSJhcGkiKXtpZih0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQ3V0VG9DbGlwYm9hcmQiKSlyZXR1cm47Y29uc3QgaT17dHlwZTpyLkV2ZW50cy5FVkVOVF9DVVRfU1RBUlQsc291cmNlOnR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQoaSksdGhpcy5jb3B5T3JDdXRUb0NsaXBib2FyZChlLCEwKTtjb25zdCBzPXt0eXBlOnIuRXZlbnRzLkVWRU5UX0NVVF9FTkQsc291cmNlOnR9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQocyl9Y29weU9yQ3V0VG9DbGlwYm9hcmQoZSx0KXtsZXR7aW5jbHVkZUhlYWRlcnM6aSxpbmNsdWRlR3JvdXBIZWFkZXJzOnN9PWU7dGhpcy5sb2dnZXIubG9nKCJjb3B5VG9DbGlwYm9hcmQ6IGluY2x1ZGVIZWFkZXJzID0gIitpKSxudWxsPT1pJiYoaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoImNvcHlIZWFkZXJzVG9DbGlwYm9hcmQiKSksbnVsbD09cyYmKHM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJjb3B5R3JvdXBIZWFkZXJzVG9DbGlwYm9hcmQiKSk7Y29uc3Qgcj17aW5jbHVkZUhlYWRlcnM6aSxpbmNsdWRlR3JvdXBIZWFkZXJzOnN9LG89IXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgic3VwcHJlc3NDb3B5Um93c1RvQ2xpcGJvYXJkIik7bGV0IG49bnVsbDshdGhpcy5yYW5nZVNlcnZpY2V8fHRoaXMucmFuZ2VTZXJ2aWNlLmlzRW1wdHkoKXx8dGhpcy5zaG91bGRTa2lwU2luZ2xlQ2VsbFJhbmdlKCk/byYmIXRoaXMuc2VsZWN0aW9uU2VydmljZS5pc0VtcHR5KCk/KHRoaXMuY29weVNlbGVjdGVkUm93c1RvQ2xpcGJvYXJkKHIpLG49bC5TZWxlY3RlZFJvd3MpOnRoaXMuZm9jdXNTZXJ2aWNlLmlzQW55Q2VsbEZvY3VzZWQoKSYmKHRoaXMuY29weUZvY3VzZWRDZWxsVG9DbGlwYm9hcmQociksbj1sLkZvY3VzZWRDZWxsKToodGhpcy5jb3B5U2VsZWN0ZWRSYW5nZVRvQ2xpcGJvYXJkKHIpLG49bC5DZWxsUmFuZ2UpLHQmJm51bGwhPT1uJiZ0aGlzLmNsZWFyQ2VsbHNBZnRlckNvcHkobil9Y2xlYXJDZWxsc0FmdGVyQ29weShlKXtpZih0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHt0eXBlOnIuRXZlbnRzLkVWRU5UX0tFWV9TSE9SVENVVF9DSEFOR0VEX0NFTExfU1RBUlR9KSxlPT09bC5DZWxsUmFuZ2UpdGhpcy5yYW5nZVNlcnZpY2UuY2xlYXJDZWxsUmFuZ2VDZWxsVmFsdWVzKHtjZWxsRXZlbnRTb3VyY2U6ImNsaXBib2FyZFNlcnZpY2UifSk7ZWxzZSBpZihlPT09bC5TZWxlY3RlZFJvd3MpdGhpcy5jbGVhclNlbGVjdGVkUm93cygpO2Vsc2V7Y29uc3QgZT10aGlzLmZvY3VzU2VydmljZS5nZXRGb2N1c2VkQ2VsbCgpO2lmKG51bGw9PWUpcmV0dXJuO2NvbnN0IHQ9dGhpcy5yb3dQb3NpdGlvblV0aWxzLmdldFJvd05vZGUoZSk7dCYmdGhpcy5jbGVhckNlbGxWYWx1ZSh0LGUuY29sdW1uKX10aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KHt0eXBlOnIuRXZlbnRzLkVWRU5UX0tFWV9TSE9SVENVVF9DSEFOR0VEX0NFTExfRU5EfSl9Y2xlYXJTZWxlY3RlZFJvd3MoKXtjb25zdCBlPXRoaXMuc2VsZWN0aW9uU2VydmljZS5nZXRTZWxlY3RlZE5vZGVzKCksdD10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKTtmb3IoY29uc3QgaSBvZiBlKWZvcihjb25zdCBlIG9mIHQpdGhpcy5jbGVhckNlbGxWYWx1ZShpLGUpfWNsZWFyQ2VsbFZhbHVlKGUsdCl7dC5pc0NlbGxFZGl0YWJsZShlKSYmZS5zZXREYXRhVmFsdWUodCxudWxsLCJjbGlwYm9hcmRTZXJ2aWNlIil9c2hvdWxkU2tpcFNpbmdsZUNlbGxSYW5nZSgpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQ29weVNpbmdsZUNlbGxSYW5nZXMiKSYmIXRoaXMucmFuZ2VTZXJ2aWNlLmlzTW9yZVRoYW5PbmVDZWxsKCl9aXRlcmF0ZUFjdGl2ZVJhbmdlcyhlLHQsaSl7aWYoIXRoaXMucmFuZ2VTZXJ2aWNlfHx0aGlzLnJhbmdlU2VydmljZS5pc0VtcHR5KCkpcmV0dXJuO2NvbnN0IHM9dGhpcy5yYW5nZVNlcnZpY2UuZ2V0Q2VsbFJhbmdlcygpO2U/dGhpcy5pdGVyYXRlQWN0aXZlUmFuZ2Uoc1swXSx0LGksITApOnMuZm9yRWFjaCgoZSxyKT0+dGhpcy5pdGVyYXRlQWN0aXZlUmFuZ2UoZSx0LGkscj09PXMubGVuZ3RoLTEpKX1pdGVyYXRlQWN0aXZlUmFuZ2UoZSx0LGkscyl7aWYoIXRoaXMucmFuZ2VTZXJ2aWNlKXJldHVybjtsZXQgcj10aGlzLnJhbmdlU2VydmljZS5nZXRSYW5nZVN0YXJ0Um93KGUpO2NvbnN0IG89dGhpcy5yYW5nZVNlcnZpY2UuZ2V0UmFuZ2VFbmRSb3coZSk7aSYmZS5jb2x1bW5zJiZpKGUuY29sdW1ucyk7bGV0IG49MCxhPSExO2Zvcig7IWEmJm51bGwhPXI7KXtjb25zdCBpPXRoaXMucm93UG9zaXRpb25VdGlscy5nZXRSb3dOb2RlKHIpO2E9dGhpcy5yb3dQb3NpdGlvblV0aWxzLnNhbWVSb3cocixvKSx0KHIsaSxlLmNvbHVtbnMsbisrLGEmJnMpLHI9dGhpcy5jZWxsTmF2aWdhdGlvblNlcnZpY2UuZ2V0Um93QmVsb3cocil9fWNvcHlTZWxlY3RlZFJhbmdlVG9DbGlwYm9hcmQoZT17fSl7aWYoIXRoaXMucmFuZ2VTZXJ2aWNlfHx0aGlzLnJhbmdlU2VydmljZS5pc0VtcHR5KCkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5yYW5nZVNlcnZpY2UuYXJlQWxsUmFuZ2VzQWJsZVRvTWVyZ2UoKSx7ZGF0YTppLGNlbGxzVG9GbGFzaDpzfT10P3RoaXMuYnVpbGREYXRhRnJvbU1lcmdlZFJhbmdlcyhlKTp0aGlzLmJ1aWxkRGF0YUZyb21SYW5nZXMoZSk7dGhpcy5jb3B5RGF0YVRvQ2xpcGJvYXJkKGkpLHRoaXMuZGlzcGF0Y2hGbGFzaENlbGxzKHMpfWJ1aWxkRGF0YUZyb21NZXJnZWRSYW5nZXMoZSl7Y29uc3QgdD1uZXcgU2V0LGk9dGhpcy5yYW5nZVNlcnZpY2UuZ2V0Q2VsbFJhbmdlcygpLHM9bmV3IE1hcCxyPVtdLG89e307aS5mb3JFYWNoKGU9PntlLmNvbHVtbnMuZm9yRWFjaChlPT50LmFkZChlKSk7Y29uc3R7cm93UG9zaXRpb25zOmksY2VsbHNUb0ZsYXNoOm59PXRoaXMuZ2V0UmFuZ2VSb3dQb3NpdGlvbnNBbmRDZWxsc1RvRmxhc2goZSk7aS5mb3JFYWNoKGU9Pntjb25zdCB0PWAke2Uucm93SW5kZXh9LSR7ZS5yb3dQaW5uZWR8fCJudWxsIn1gO3MuZ2V0KHQpfHwocy5zZXQodCwhMCksci5wdXNoKGUpKX0pLE9iamVjdC5hc3NpZ24obyxuKX0pO2NvbnN0IG49dGhpcy5jb2x1bW5Nb2RlbC5nZXRBbGxEaXNwbGF5ZWRDb2x1bW5zKCksYT1BcnJheS5mcm9tKHQpO2Euc29ydCgoZSx0KT0+bi5pbmRleE9mKGUpLW4uaW5kZXhPZih0KSk7cmV0dXJue2RhdGE6dGhpcy5idWlsZEV4cG9ydFBhcmFtcyh7Y29sdW1uczphLHJvd1Bvc2l0aW9uczpyLGluY2x1ZGVIZWFkZXJzOmUuaW5jbHVkZUhlYWRlcnMsaW5jbHVkZUdyb3VwSGVhZGVyczplLmluY2x1ZGVHcm91cEhlYWRlcnN9KSxjZWxsc1RvRmxhc2g6b319YnVpbGREYXRhRnJvbVJhbmdlcyhlKXtjb25zdCB0PXRoaXMucmFuZ2VTZXJ2aWNlLmdldENlbGxSYW5nZXMoKSxpPVtdLHM9e307cmV0dXJuIHQuZm9yRWFjaCh0PT57Y29uc3R7cm93UG9zaXRpb25zOnIsY2VsbHNUb0ZsYXNoOm99PXRoaXMuZ2V0UmFuZ2VSb3dQb3NpdGlvbnNBbmRDZWxsc1RvRmxhc2godCk7T2JqZWN0LmFzc2lnbihzLG8pLGkucHVzaCh0aGlzLmJ1aWxkRXhwb3J0UGFyYW1zKHtjb2x1bW5zOnQuY29sdW1ucyxyb3dQb3NpdGlvbnM6cixpbmNsdWRlSGVhZGVyczplLmluY2x1ZGVIZWFkZXJzLGluY2x1ZGVHcm91cEhlYWRlcnM6ZS5pbmNsdWRlR3JvdXBIZWFkZXJzfSkpfSkse2RhdGE6aS5qb2luKCJcbiIpLGNlbGxzVG9GbGFzaDpzfX1nZXRSYW5nZVJvd1Bvc2l0aW9uc0FuZENlbGxzVG9GbGFzaChlKXtjb25zdCB0PVtdLGk9e30scz10aGlzLnJhbmdlU2VydmljZS5nZXRSYW5nZVN0YXJ0Um93KGUpLHI9dGhpcy5yYW5nZVNlcnZpY2UuZ2V0UmFuZ2VFbmRSb3coZSk7bGV0IG89cztmb3IoO28mJih0LnB1c2gobyksZS5jb2x1bW5zLmZvckVhY2goZT0+e2NvbnN0e3Jvd0luZGV4OnQscm93UGlubmVkOnN9PW8scj10aGlzLmNlbGxQb3NpdGlvblV0aWxzLmNyZWF0ZUlkRnJvbVZhbHVlcyh7cm93SW5kZXg6dCxjb2x1bW46ZSxyb3dQaW5uZWQ6c30pO2lbcl09ITB9KSwhdGhpcy5yb3dQb3NpdGlvblV0aWxzLnNhbWVSb3cobyxyKSk7KW89dGhpcy5jZWxsTmF2aWdhdGlvblNlcnZpY2UuZ2V0Um93QmVsb3cobyk7cmV0dXJue3Jvd1Bvc2l0aW9uczp0LGNlbGxzVG9GbGFzaDppfX1nZXRDZWxsc1RvRmxhc2hGcm9tUm93Tm9kZXMoZSl7Y29uc3QgdD10aGlzLmNvbHVtbk1vZGVsLmdldEFsbERpc3BsYXllZENvbHVtbnMoKSxpPXt9O2ZvcihsZXQgcz0wO3M8ZS5sZW5ndGg7cysrKXtjb25zdHtyb3dJbmRleDpyLHJvd1Bpbm5lZDpvfT1lW3NdO2lmKG51bGwhPXIpZm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspe2NvbnN0IHM9dFtlXTtpW3RoaXMuY2VsbFBvc2l0aW9uVXRpbHMuY3JlYXRlSWRGcm9tVmFsdWVzKHtyb3dJbmRleDpyLGNvbHVtbjpzLHJvd1Bpbm5lZDpvfSldPSEwfX1yZXR1cm4gaX1jb3B5Rm9jdXNlZENlbGxUb0NsaXBib2FyZChlPXt9KXtjb25zdCB0PXRoaXMuZm9jdXNTZXJ2aWNlLmdldEZvY3VzZWRDZWxsKCk7aWYobnVsbD09dClyZXR1cm47Y29uc3QgaT10aGlzLmNlbGxQb3NpdGlvblV0aWxzLmNyZWF0ZUlkKHQpLHM9e3Jvd1Bpbm5lZDp0LnJvd1Bpbm5lZCxyb3dJbmRleDp0LnJvd0luZGV4fSxyPXQuY29sdW1uLG89dGhpcy5idWlsZEV4cG9ydFBhcmFtcyh7Y29sdW1uczpbcl0scm93UG9zaXRpb25zOltzXSxpbmNsdWRlSGVhZGVyczplLmluY2x1ZGVIZWFkZXJzLGluY2x1ZGVHcm91cEhlYWRlcnM6ZS5pbmNsdWRlR3JvdXBIZWFkZXJzfSk7dGhpcy5jb3B5RGF0YVRvQ2xpcGJvYXJkKG8pLHRoaXMuZGlzcGF0Y2hGbGFzaENlbGxzKHtbaV06ITB9KX1jb3B5U2VsZWN0ZWRSb3dzVG9DbGlwYm9hcmQoZT17fSl7Y29uc3R7Y29sdW1uS2V5czp0LGluY2x1ZGVIZWFkZXJzOmksaW5jbHVkZUdyb3VwSGVhZGVyczpzfT1lLHI9dGhpcy5idWlsZEV4cG9ydFBhcmFtcyh7Y29sdW1uczp0LGluY2x1ZGVIZWFkZXJzOmksaW5jbHVkZUdyb3VwSGVhZGVyczpzfSk7dGhpcy5jb3B5RGF0YVRvQ2xpcGJvYXJkKHIpO2NvbnN0IG89dGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmdldFNlbGVjdGVkTm9kZXMoKXx8W107dGhpcy5kaXNwYXRjaEZsYXNoQ2VsbHModGhpcy5nZXRDZWxsc1RvRmxhc2hGcm9tUm93Tm9kZXMobykpfWJ1aWxkRXhwb3J0UGFyYW1zKGUpe2NvbnN0e2NvbHVtbnM6dCxyb3dQb3NpdGlvbnM6aSxpbmNsdWRlSGVhZGVyczpzPSExLGluY2x1ZGVHcm91cEhlYWRlcnM6cj0hMX09ZSxvPXtjb2x1bW5LZXlzOnQscm93UG9zaXRpb25zOmksc2tpcENvbHVtbkhlYWRlcnM6IXMsc2tpcENvbHVtbkdyb3VwSGVhZGVyczohcixzdXBwcmVzc1F1b3RlczohMCxjb2x1bW5TZXBhcmF0b3I6dGhpcy5nZXRDbGlwYm9hcmREZWxpbWl0ZXIoKSxvbmx5U2VsZWN0ZWQ6IWkscHJvY2Vzc0NlbGxDYWxsYmFjazp0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygicHJvY2Vzc0NlbGxGb3JDbGlwYm9hcmQiKSxwcm9jZXNzUm93R3JvdXBDYWxsYmFjazplPT50aGlzLnByb2Nlc3NSb3dHcm91cENhbGxiYWNrKGUpLHByb2Nlc3NIZWFkZXJDYWxsYmFjazp0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygicHJvY2Vzc0hlYWRlckZvckNsaXBib2FyZCIpLHByb2Nlc3NHcm91cEhlYWRlckNhbGxiYWNrOnRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJwcm9jZXNzR3JvdXBIZWFkZXJGb3JDbGlwYm9hcmQiKX07cmV0dXJuIHRoaXMuY3N2Q3JlYXRvci5nZXREYXRhQXNDc3YobywhMCl9cHJvY2Vzc1Jvd0dyb3VwQ2FsbGJhY2soZSl7Y29uc3R7bm9kZTp0LGNvbHVtbjppfT1lLHM9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJ0cmVlRGF0YSIpLHI9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0KCJzdXBwcmVzc0dyb3VwTWFpbnRhaW5WYWx1ZVR5cGUiKTtsZXQgbz0oKCk9Pnt2YXIgZSxvO2lmKHN8fHJ8fCFpKXJldHVybiB0LmtleTtjb25zdCBuPW51bGw9PT0oZT10Lmdyb3VwRGF0YSl8fHZvaWQgMD09PWU/dm9pZCAwOmVbaS5nZXRJZCgpXTtyZXR1cm4gbiYmdC5yb3dHcm91cENvbHVtbiYmITEhPT10LnJvd0dyb3VwQ29sdW1uLmdldENvbERlZigpLnVzZVZhbHVlRm9ybWF0dGVyRm9yRXhwb3J0JiZudWxsIT09KG89dGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UuZm9ybWF0VmFsdWUodC5yb3dHcm91cENvbHVtbix0LG4pKSYmdm9pZCAwIT09bz9vOm59KSgpO2lmKGUubm9kZS5mb290ZXIpe2xldCBlPSIiO28mJm8ubGVuZ3RoJiYoZT0iICIrbyksbz0iVG90YWwiK2V9Y29uc3Qgbj10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXRDYWxsYmFjaygicHJvY2Vzc0NlbGxGb3JDbGlwYm9hcmQiKTtpZihuKXtsZXQgZT10LnJvd0dyb3VwQ29sdW1uO3JldHVybiFlJiZ0LmZvb3RlciYmLTE9PT10LmxldmVsJiYoZT10aGlzLmNvbHVtbk1vZGVsLmdldFJvd0dyb3VwQ29sdW1ucygpWzBdKSxuKHt2YWx1ZTpvLG5vZGU6dCxjb2x1bW46ZSx0eXBlOiJjbGlwYm9hcmQiLGZvcm1hdFZhbHVlOmk9Pnt2YXIgcztyZXR1cm4gbnVsbCE9PShzPXRoaXMudmFsdWVGb3JtYXR0ZXJTZXJ2aWNlLmZvcm1hdFZhbHVlKGUsdCxpKSkmJnZvaWQgMCE9PXM/czppfSxwYXJzZVZhbHVlOmk9PnRoaXMudmFsdWVQYXJzZXJTZXJ2aWNlLnBhcnNlVmFsdWUoZSx0LGksdGhpcy52YWx1ZVNlcnZpY2UuZ2V0VmFsdWUoZSx0KSl9KX1yZXR1cm4gb31kaXNwYXRjaEZsYXNoQ2VsbHMoZSl7d2luZG93LnNldFRpbWVvdXQoKCk9Pntjb25zdCB0PXt0eXBlOnIuRXZlbnRzLkVWRU5UX0ZMQVNIX0NFTExTLGNlbGxzOmV9O3RoaXMuZXZlbnRTZXJ2aWNlLmRpc3BhdGNoRXZlbnQodCl9LDApfXByb2Nlc3NDZWxsKGUsdCxpLHMscixvLG4pe3ZhciBhO2lmKHIpe3JldHVybiByKHtjb2x1bW46dCxub2RlOmUsdmFsdWU6aSx0eXBlOnMsZm9ybWF0VmFsdWU6aT0+e3ZhciBzO3JldHVybiBudWxsIT09KHM9dGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UuZm9ybWF0VmFsdWUodCxudWxsIT1lP2U6bnVsbCxpKSkmJnZvaWQgMCE9PXM/czppfSxwYXJzZVZhbHVlOmk9PnRoaXMudmFsdWVQYXJzZXJTZXJ2aWNlLnBhcnNlVmFsdWUodCxudWxsIT1lP2U6bnVsbCxpLHRoaXMudmFsdWVTZXJ2aWNlLmdldFZhbHVlKHQsZSkpfSl9cmV0dXJuIG8mJiExIT09dC5nZXRDb2xEZWYoKS51c2VWYWx1ZVBhcnNlckZvckltcG9ydD90aGlzLnZhbHVlUGFyc2VyU2VydmljZS5wYXJzZVZhbHVlKHQsbnVsbCE9ZT9lOm51bGwsaSx0aGlzLnZhbHVlU2VydmljZS5nZXRWYWx1ZSh0LGUpKTpuJiYhMSE9PXQuZ2V0Q29sRGVmKCkudXNlVmFsdWVGb3JtYXR0ZXJGb3JFeHBvcnQmJm51bGwhPT0oYT10aGlzLnZhbHVlRm9ybWF0dGVyU2VydmljZS5mb3JtYXRWYWx1ZSh0LG51bGwhPWU/ZTpudWxsLGkpKSYmdm9pZCAwIT09YT9hOml9Y29weURhdGFUb0NsaXBib2FyZChlKXtjb25zdCB0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldENhbGxiYWNrKCJzZW5kVG9DbGlwYm9hcmQiKTtpZih0KXJldHVybiB2b2lkIHQoe2RhdGE6ZX0pOyF0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInN1cHByZXNzQ2xpcGJvYXJkQXBpIikmJm5hdmlnYXRvci5jbGlwYm9hcmQ/bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZSkuY2F0Y2godD0+e3IuXy5kb09uY2UoKCk9Pntjb25zb2xlLndhcm4odCksY29uc29sZS53YXJuKGQoIndyaXRlVGV4dCIpKX0sImNsaXBib2FyZEFwaUVycm9yIiksdGhpcy5jb3B5RGF0YVRvQ2xpcGJvYXJkTGVnYWN5KGUpfSk6dGhpcy5jb3B5RGF0YVRvQ2xpcGJvYXJkTGVnYWN5KGUpfWNvcHlEYXRhVG9DbGlwYm9hcmRMZWdhY3koZSl7dGhpcy5leGVjdXRlT25UZW1wRWxlbWVudCh0PT57Y29uc3QgaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb2N1bWVudCgpLHM9aS5hY3RpdmVFbGVtZW50O3QudmFsdWU9ZXx8IiAiLHQuc2VsZWN0KCksdC5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pO2kuZXhlY0NvbW1hbmQoImNvcHkiKXx8Y29uc29sZS53YXJuKCJBRyBHcmlkOiBCcm93c2VyIGRpZCBub3QgYWxsb3cgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKS4gRW5zdXJlIGFwaS5jb3B5U2VsZWN0ZWRSb3dzVG9DbGlwYm9hcmQoKSBpcyBpbnZva2VkIHZpYSBhIHVzZXIgZXZlbnQsIGkuZS4gYnV0dG9uIGNsaWNrLCBvdGhlcndpc2UgdGhlIGJyb3dzZXIgd2lsbCBwcmV2ZW50IGl0IGZvciBzZWN1cml0eSByZWFzb25zLiIpLG51bGwhPXMmJm51bGwhPXMuZm9jdXMmJnMuZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KX0pfWV4ZWN1dGVPblRlbXBFbGVtZW50KGUsdCl7Y29uc3QgaT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXREb2N1bWVudCgpLHM9aS5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpO3Muc3R5bGUud2lkdGg9IjFweCIscy5zdHlsZS5oZWlnaHQ9IjFweCIscy5zdHlsZS50b3A9aS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKyJweCIscy5zdHlsZS5sZWZ0PWkuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQrInB4IixzLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIscy5zdHlsZS5vcGFjaXR5PSIwIjtjb25zdCByPXRoaXMuZ3JpZEN0cmwuZ2V0R3VpKCk7ci5hcHBlbmRDaGlsZChzKTt0cnl7ZShzKX1jYXRjaChlKXtjb25zb2xlLndhcm4oIkFHIEdyaWQ6IEJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpIGZvciBjbGlwYm9hcmQgb3BlcmF0aW9ucyIpfXQ/d2luZG93LnNldFRpbWVvdXQoKCk9Pnt0KHMpLHIucmVtb3ZlQ2hpbGQocyl9LDEwMCk6ci5yZW1vdmVDaGlsZChzKX1nZXRSYW5nZVNpemUoKXtjb25zdCBlPXRoaXMucmFuZ2VTZXJ2aWNlLmdldENlbGxSYW5nZXMoKTtsZXQgdD0wLGk9MDtyZXR1cm4gZS5sZW5ndGg+MCYmKHQ9dGhpcy5yYW5nZVNlcnZpY2UuZ2V0UmFuZ2VTdGFydFJvdyhlWzBdKS5yb3dJbmRleCxpPXRoaXMucmFuZ2VTZXJ2aWNlLmdldFJhbmdlRW5kUm93KGVbMF0pLnJvd0luZGV4KSx0LWkrMX19O2EoW09iamVjdChyLkF1dG93aXJlZCkoImNzdkNyZWF0b3IiKV0sYy5wcm90b3R5cGUsImNzdkNyZWF0b3IiLHZvaWQgMCksYShbT2JqZWN0KHIuQXV0b3dpcmVkKSgibG9nZ2VyRmFjdG9yeSIpXSxjLnByb3RvdHlwZSwibG9nZ2VyRmFjdG9yeSIsdm9pZCAwKSxhKFtPYmplY3Qoci5BdXRvd2lyZWQpKCJzZWxlY3Rpb25TZXJ2aWNlIildLGMucHJvdG90eXBlLCJzZWxlY3Rpb25TZXJ2aWNlIix2b2lkIDApLGEoW09iamVjdChyLk9wdGlvbmFsKSgicmFuZ2VTZXJ2aWNlIildLGMucHJvdG90eXBlLCJyYW5nZVNlcnZpY2UiLHZvaWQgMCksYShbT2JqZWN0KHIuQXV0b3dpcmVkKSgicm93TW9kZWwiKV0sYy5wcm90b3R5cGUsInJvd01vZGVsIix2b2lkIDApLGEoW09iamVjdChyLkF1dG93aXJlZCkoImN0cmxzU2VydmljZSIpXSxjLnByb3RvdHlwZSwiY3RybHNTZXJ2aWNlIix2b2lkIDApLGEoW09iamVjdChyLkF1dG93aXJlZCkoInZhbHVlU2VydmljZSIpXSxjLnByb3RvdHlwZSwidmFsdWVTZXJ2aWNlIix2b2lkIDApLGEoW09iamVjdChyLkF1dG93aXJlZCkoImZvY3VzU2VydmljZSIpXSxjLnByb3RvdHlwZSwiZm9jdXNTZXJ2aWNlIix2b2lkIDApLGEoW09iamVjdChyLkF1dG93aXJlZCkoInJvd1JlbmRlcmVyIildLGMucHJvdG90eXBlLCJyb3dSZW5kZXJlciIsdm9pZCAwKSxhKFtPYmplY3Qoci5BdXRvd2lyZWQpKCJjb2x1bW5Nb2RlbCIpXSxjLnByb3RvdHlwZSwiY29sdW1uTW9kZWwiLHZvaWQgMCksYShbT2JqZWN0KHIuQXV0b3dpcmVkKSgiY2VsbE5hdmlnYXRpb25TZXJ2aWNlIildLGMucHJvdG90eXBlLCJjZWxsTmF2aWdhdGlvblNlcnZpY2UiLHZvaWQgMCksYShbT2JqZWN0KHIuQXV0b3dpcmVkKSgiY2VsbFBvc2l0aW9uVXRpbHMiKV0sYy5wcm90b3R5cGUsImNlbGxQb3NpdGlvblV0aWxzIix2b2lkIDApLGEoW09iamVjdChyLkF1dG93aXJlZCkoInJvd1Bvc2l0aW9uVXRpbHMiKV0sYy5wcm90b3R5cGUsInJvd1Bvc2l0aW9uVXRpbHMiLHZvaWQgMCksYShbT2JqZWN0KHIuQXV0b3dpcmVkKSgidmFsdWVGb3JtYXR0ZXJTZXJ2aWNlIildLGMucHJvdG90eXBlLCJ2YWx1ZUZvcm1hdHRlclNlcnZpY2UiLHZvaWQgMCksYShbT2JqZWN0KHIuQXV0b3dpcmVkKSgidmFsdWVQYXJzZXJTZXJ2aWNlIildLGMucHJvdG90eXBlLCJ2YWx1ZVBhcnNlclNlcnZpY2UiLHZvaWQgMCksYShbci5Qb3N0Q29uc3RydWN0XSxjLnByb3RvdHlwZSwiaW5pdCIsbnVsbCksYz1zPWEoW09iamVjdChyLkJlYW4pKCJjbGlwYm9hcmRTZXJ2aWNlIildLGMpO2NvbnN0IGg9e3ZlcnNpb246IjMxLjEuMSIsbW9kdWxlTmFtZTpyLk1vZHVsZU5hbWVzLkNsaXBib2FyZE1vZHVsZSxiZWFuczpbY10sZGVwZW5kYW50TW9kdWxlczpbby5FbnRlcnByaXNlQ29yZU1vZHVsZSxuLkNzdkV4cG9ydE1vZHVsZV19O2kuZCh0LCJDbGlwYm9hcmRNb2R1bGUiLChmdW5jdGlvbigpe3JldHVybiBofSkpfSxmdW5jdGlvbihlLHQsaSl7InVzZSBzdHJpY3QiO2kucih0KTt2YXIgcz1pKDApLHI9aSgzKTtjbGFzcyBvIGV4dGVuZHMgcy5Qb3B1cENvbXBvbmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCc8ZGl2IGNsYXNzPSJhZy1jZWxsLWVkaXQtd3JhcHBlciI+PC9kaXY+Jyl9aW5pdChlKXt0aGlzLnBhcmFtcz1lO2NvbnN0e2NlbGxTdGFydGVkRWRpdDp0LGNlbGxIZWlnaHQ6aSx2YWx1ZXM6cn09ZTtzLl8ubWlzc2luZyhyKSYmY29uc29sZS53YXJuKCJBRyBHcmlkOiBhZ1JpY2hTZWxlY3RDZWxsRWRpdG9yIHJlcXVpcmVzIGNlbGxFZGl0b3JQYXJhbXMudmFsdWVzIHRvIGJlIHNldCIpO2NvbnN0e3BhcmFtczpvLHZhbHVlc1Byb21pc2U6bn09dGhpcy5idWlsZFJpY2hTZWxlY3RQYXJhbXMoKTt0aGlzLnJpY2hTZWxlY3Q9dGhpcy5jcmVhdGVNYW5hZ2VkQmVhbihuZXcgcy5BZ1JpY2hTZWxlY3QobykpLHRoaXMucmljaFNlbGVjdC5hZGRDc3NDbGFzcygiYWctY2VsbC1lZGl0b3IiKSx0aGlzLmFwcGVuZENoaWxkKHRoaXMucmljaFNlbGVjdCksbiYmbi50aGVuKGU9Pnt0aGlzLnJpY2hTZWxlY3Quc2V0VmFsdWVMaXN0KHt2YWx1ZUxpc3Q6ZSxyZWZyZXNoOiEwfSk7Y29uc3QgdD10aGlzLmdldFNlYXJjaFN0cmluZ0NhbGxiYWNrKGUpO3QmJnRoaXMucmljaFNlbGVjdC5zZXRTZWFyY2hTdHJpbmdDcmVhdG9yKHQpfSksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5yaWNoU2VsZWN0LHMuRXZlbnRzLkVWRU5UX0ZJRUxEX1BJQ0tFUl9WQUxVRV9TRUxFQ1RFRCx0aGlzLm9uRWRpdG9yUGlja2VyVmFsdWVTZWxlY3RlZC5iaW5kKHRoaXMpKSx0aGlzLmFkZE1hbmFnZWRMaXN0ZW5lcih0aGlzLnJpY2hTZWxlY3QuZ2V0R3VpKCksImZvY3Vzb3V0Iix0aGlzLm9uRWRpdG9yRm9jdXNPdXQuYmluZCh0aGlzKSksdGhpcy5mb2N1c0FmdGVyQXR0YWNoZWQ9dCxzLl8uZXhpc3RzKGkpJiZ0aGlzLnJpY2hTZWxlY3Quc2V0Um93SGVpZ2h0KGkpfW9uRWRpdG9yUGlja2VyVmFsdWVTZWxlY3RlZChlKXt0aGlzLnBhcmFtcy5zdG9wRWRpdGluZyghZS5mcm9tRW50ZXJLZXkpfW9uRWRpdG9yRm9jdXNPdXQoZSl7dGhpcy5yaWNoU2VsZWN0LmdldEd1aSgpLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCl8fHRoaXMucGFyYW1zLnN0b3BFZGl0aW5nKCEwKX1idWlsZFJpY2hTZWxlY3RQYXJhbXMoKXtjb25zdHtjZWxsUmVuZGVyZXI6ZSx2YWx1ZTp0LHZhbHVlczppLGZvcm1hdFZhbHVlOnMsc2VhcmNoRGVib3VuY2VEZWxheTpyLHZhbHVlTGlzdEdhcDpvLHZhbHVlTGlzdE1heEhlaWdodDpuLHZhbHVlTGlzdE1heFdpZHRoOmEsYWxsb3dUeXBpbmc6bCxmaWx0ZXJMaXN0OmQsc2VhcmNoVHlwZTpjLGhpZ2hsaWdodE1hdGNoOmgsdmFsdWVQbGFjZWhvbGRlcjp1LGV2ZW50S2V5OnB9PXRoaXMucGFyYW1zLGc9e3ZhbHVlOnQsY2VsbFJlbmRlcmVyOmUsc2VhcmNoRGVib3VuY2VEZWxheTpyLHZhbHVlRm9ybWF0dGVyOnMscGlja2VyQXJpYUxhYmVsS2V5OiJhcmlhTGFiZWxSaWNoU2VsZWN0RmllbGQiLHBpY2tlckFyaWFMYWJlbFZhbHVlOiJSaWNoIFNlbGVjdCBGaWVsZCIscGlja2VyVHlwZToidmlydHVhbC1saXN0IixwaWNrZXJHYXA6byxhbGxvd1R5cGluZzpsLGZpbHRlckxpc3Q6ZCxzZWFyY2hUeXBlOmMsaGlnaGxpZ2h0TWF0Y2g6aCxtYXhQaWNrZXJIZWlnaHQ6bixtYXhQaWNrZXJXaWR0aDphLHBsYWNlaG9sZGVyOnUsaW5pdGlhbElucHV0VmFsdWU6MT09PShudWxsPT1wP3ZvaWQgMDpwLmxlbmd0aCk/cDp2b2lkIDB9O2xldCBtLGY7cmV0dXJuIG09ImZ1bmN0aW9uIj09dHlwZW9mIGk/aSh0aGlzLnBhcmFtcyk6bnVsbCE9aT9pOltdLEFycmF5LmlzQXJyYXkobSk/KGcudmFsdWVMaXN0PW0sZy5zZWFyY2hTdHJpbmdDcmVhdG9yPXRoaXMuZ2V0U2VhcmNoU3RyaW5nQ2FsbGJhY2sobSkpOmY9bSx7cGFyYW1zOmcsdmFsdWVzUHJvbWlzZTpmfX1nZXRTZWFyY2hTdHJpbmdDYWxsYmFjayhlKXtjb25zdHtjb2xEZWY6dH09dGhpcy5wYXJhbXM7aWYoIm9iamVjdCI9PXR5cGVvZiBlWzBdJiZ0LmtleUNyZWF0b3IpcmV0dXJuIGU9PmUubWFwKGU9Pntjb25zdCBpPXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmFkZEdyaWRDb21tb25QYXJhbXMoe3ZhbHVlOmUsY29sRGVmOnRoaXMucGFyYW1zLmNvbERlZixjb2x1bW46dGhpcy5wYXJhbXMuY29sdW1uLG5vZGU6dGhpcy5wYXJhbXMubm9kZSxkYXRhOnRoaXMucGFyYW1zLmRhdGF9KTtyZXR1cm4gdC5rZXlDcmVhdG9yKGkpfSl9YWZ0ZXJHdWlBdHRhY2hlZCgpe2NvbnN0e2ZvY3VzQWZ0ZXJBdHRhY2hlZDplLHBhcmFtczp0fT10aGlzO3NldFRpbWVvdXQoKCk9PntpZighdGhpcy5pc0FsaXZlKCkpcmV0dXJuO2lmKGUpe2NvbnN0IGU9dGhpcy5yaWNoU2VsZWN0LmdldEZvY3VzYWJsZUVsZW1lbnQoKTtlLmZvY3VzKCk7Y29uc3R7YWxsb3dUeXBpbmc6dCxldmVudEtleTppfT10aGlzLnBhcmFtczshdHx8aSYmMT09PWkubGVuZ3RofHxlLnNlbGVjdCgpfXRoaXMucmljaFNlbGVjdC5zaG93UGlja2VyKCk7Y29uc3R7ZXZlbnRLZXk6aX09dDtpJiYxPT09KG51bGw9PWk/dm9pZCAwOmkubGVuZ3RoKSYmdGhpcy5yaWNoU2VsZWN0LnNlYXJjaFRleHRGcm9tU3RyaW5nKGkpfSl9Z2V0VmFsdWUoKXtyZXR1cm4gdGhpcy5yaWNoU2VsZWN0LmdldFZhbHVlKCl9aXNQb3B1cCgpe3JldHVybiExfX1jb25zdCBuPXt2ZXJzaW9uOiIzMS4xLjEiLG1vZHVsZU5hbWU6cy5Nb2R1bGVOYW1lcy5SaWNoU2VsZWN0TW9kdWxlLGJlYW5zOltdLHVzZXJDb21wb25lbnRzOlt7Y29tcG9uZW50TmFtZToiYWdSaWNoU2VsZWN0Iixjb21wb25lbnRDbGFzczpvfSx7Y29tcG9uZW50TmFtZToiYWdSaWNoU2VsZWN0Q2VsbEVkaXRvciIsY29tcG9uZW50Q2xhc3M6b31dLGRlcGVuZGFudE1vZHVsZXM6W3IuRW50ZXJwcmlzZUNvcmVNb2R1bGVdfTtpLmQodCwiUmljaFNlbGVjdE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG59KSl9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpO3ZhciBzPWkoMCkscj1pKDMpO3ZhciBvPWZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxuPW88Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG49KG88Mz9yKG4pOm8+Mz9yKHQsaSxuKTpyKHQsaSkpfHxuKTtyZXR1cm4gbz4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG4pLG59O2xldCBuPWNsYXNzIGV4dGVuZHMgcy5CZWFuU3R1Yntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5maXJzdFJvdz0tMSx0aGlzLmxhc3RSb3c9LTEsdGhpcy5yb3dDb3VudD0tMSx0aGlzLnJvd05vZGVzQnlJbmRleD17fX1lbnN1cmVSb3dIZWlnaHRzVmFsaWQoZSx0LGkscyl7cmV0dXJuITF9aW5pdCgpe3RoaXMucm93SGVpZ2h0PXRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldFJvd0hlaWdodEFzTnVtYmVyKCksdGhpcy5hZGRNYW5hZ2VkTGlzdGVuZXIodGhpcy5ldmVudFNlcnZpY2Uscy5FdmVudHMuRVZFTlRfVklFV1BPUlRfQ0hBTkdFRCx0aGlzLm9uVmlld3BvcnRDaGFuZ2VkLmJpbmQodGhpcykpLHRoaXMuYWRkTWFuYWdlZFByb3BlcnR5TGlzdGVuZXIoInZpZXdwb3J0RGF0YXNvdXJjZSIsKCk9PnRoaXMudXBkYXRlRGF0YXNvdXJjZSgpKSx0aGlzLmFkZE1hbmFnZWRQcm9wZXJ0eUxpc3RlbmVyKCJyb3dIZWlnaHQiLCgpPT57dGhpcy5yb3dIZWlnaHQ9dGhpcy5ncmlkT3B0aW9uc1NlcnZpY2UuZ2V0Um93SGVpZ2h0QXNOdW1iZXIoKSx0aGlzLnVwZGF0ZVJvd0hlaWdodHMoKX0pfXN0YXJ0KCl7dGhpcy51cGRhdGVEYXRhc291cmNlKCl9aXNMYXN0Um93SW5kZXhLbm93bigpe3JldHVybiEwfWRlc3Ryb3lEYXRhc291cmNlKCl7dGhpcy52aWV3cG9ydERhdGFzb3VyY2UmJih0aGlzLnZpZXdwb3J0RGF0YXNvdXJjZS5kZXN0cm95JiZ0aGlzLnZpZXdwb3J0RGF0YXNvdXJjZS5kZXN0cm95KCksdGhpcy5yb3dSZW5kZXJlci5kYXRhc291cmNlQ2hhbmdlZCgpLHRoaXMuZmlyc3RSb3c9LTEsdGhpcy5sYXN0Um93PS0xKX11cGRhdGVEYXRhc291cmNlKCl7Y29uc3QgZT10aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInZpZXdwb3J0RGF0YXNvdXJjZSIpO2UmJnRoaXMuc2V0Vmlld3BvcnREYXRhc291cmNlKGUpfWdldFZpZXdwb3J0Um93TW9kZWxQYWdlU2l6ZSgpe3JldHVybiB0aGlzLmdyaWRPcHRpb25zU2VydmljZS5nZXQoInZpZXdwb3J0Um93TW9kZWxQYWdlU2l6ZSIpfWdldFZpZXdwb3J0Um93TW9kZWxCdWZmZXJTaXplKCl7cmV0dXJuIHRoaXMuZ3JpZE9wdGlvbnNTZXJ2aWNlLmdldCgidmlld3BvcnRSb3dNb2RlbEJ1ZmZlclNpemUiKX1jYWxjdWxhdGVGaXJzdFJvdyhlKXtjb25zdCB0PXRoaXMuZ2V0Vmlld3BvcnRSb3dNb2RlbEJ1ZmZlclNpemUoKSxpPXRoaXMuZ2V0Vmlld3BvcnRSb3dNb2RlbFBhZ2VTaXplKCkscz1lLXQ7cmV0dXJuIHM8MD8wOk1hdGguZmxvb3Iocy9pKSppfWNhbGN1bGF0ZUxhc3RSb3coZSl7aWYoLTE9PT1lKXJldHVybiBlO2NvbnN0IHQ9dGhpcy5nZXRWaWV3cG9ydFJvd01vZGVsQnVmZmVyU2l6ZSgpLGk9dGhpcy5nZXRWaWV3cG9ydFJvd01vZGVsUGFnZVNpemUoKSxzPWUrdCxyPU1hdGguY2VpbChzL2kpKmksbz10aGlzLnJvd0NvdW50LTE7cmV0dXJuIE1hdGgubWluKHIsbyl9b25WaWV3cG9ydENoYW5nZWQoZSl7Y29uc3QgdD10aGlzLmNhbGN1bGF0ZUZpcnN0Um93KGUuZmlyc3RSb3cpLGk9dGhpcy5jYWxjdWxhdGVMYXN0Um93KGUubGFzdFJvdyk7dGhpcy5maXJzdFJvdz09PXQmJnRoaXMubGFzdFJvdz09PWl8fCh0aGlzLmZpcnN0Um93PXQsdGhpcy5sYXN0Um93PWksdGhpcy5wdXJnZVJvd3NOb3RJblZpZXdwb3J0KCksdGhpcy52aWV3cG9ydERhdGFzb3VyY2UmJnRoaXMudmlld3BvcnREYXRhc291cmNlLnNldFZpZXdwb3J0UmFuZ2UodGhpcy5maXJzdFJvdyx0aGlzLmxhc3RSb3cpKX1wdXJnZVJvd3NOb3RJblZpZXdwb3J0KCl7T2JqZWN0LmtleXModGhpcy5yb3dOb2Rlc0J5SW5kZXgpLmZvckVhY2goZT0+e2NvbnN0IHQ9cGFyc2VJbnQoZSwxMCk7aWYodDx0aGlzLmZpcnN0Um93fHx0PnRoaXMubGFzdFJvdyl7aWYodGhpcy5pc1Jvd0ZvY3VzZWQodCkpcmV0dXJuO2RlbGV0ZSB0aGlzLnJvd05vZGVzQnlJbmRleFt0XX19KX1pc1Jvd0ZvY3VzZWQoZSl7Y29uc3QgdD10aGlzLmZvY3VzU2VydmljZS5nZXRGb2N1c0NlbGxUb1VzZUFmdGVyUmVmcmVzaCgpO2lmKCF0KXJldHVybiExO2lmKG51bGwhPXQucm93UGlubmVkKXJldHVybiExO3JldHVybiB0LnJvd0luZGV4PT09ZX1zZXRWaWV3cG9ydERhdGFzb3VyY2UoZSl7dGhpcy5kZXN0cm95RGF0YXNvdXJjZSgpLHRoaXMudmlld3BvcnREYXRhc291cmNlPWUsdGhpcy5yb3dDb3VudD0tMSxlLmluaXQ/ZS5pbml0KHtzZXRSb3dDb3VudDp0aGlzLnNldFJvd0NvdW50LmJpbmQodGhpcyksc2V0Um93RGF0YTp0aGlzLnNldFJvd0RhdGEuYmluZCh0aGlzKSxnZXRSb3c6dGhpcy5nZXRSb3cuYmluZCh0aGlzKX0pOmNvbnNvbGUud2FybigiQUcgR3JpZDogdmlld3BvcnQgaXMgbWlzc2luZyBpbml0IG1ldGhvZC4iKX1nZXRUeXBlKCl7cmV0dXJuInZpZXdwb3J0In1nZXRSb3coZSl7cmV0dXJuIHRoaXMucm93Tm9kZXNCeUluZGV4W2VdfHwodGhpcy5yb3dOb2Rlc0J5SW5kZXhbZV09dGhpcy5jcmVhdGVCbGFua1Jvd05vZGUoZSkpLHRoaXMucm93Tm9kZXNCeUluZGV4W2VdfWdldFJvd05vZGUoZSl7bGV0IHQ7cmV0dXJuIHRoaXMuZm9yRWFjaE5vZGUoaT0+e2kuaWQ9PT1lJiYodD1pKX0pLHR9Z2V0Um93Q291bnQoKXtyZXR1cm4tMT09PXRoaXMucm93Q291bnQ/MDp0aGlzLnJvd0NvdW50fWdldFJvd0luZGV4QXRQaXhlbChlKXtyZXR1cm4gMCE9PXRoaXMucm93SGVpZ2h0P01hdGguZmxvb3IoZS90aGlzLnJvd0hlaWdodCk6MH1nZXRSb3dCb3VuZHMoZSl7cmV0dXJue3Jvd0hlaWdodDp0aGlzLnJvd0hlaWdodCxyb3dUb3A6dGhpcy5yb3dIZWlnaHQqZX19dXBkYXRlUm93SGVpZ2h0cygpe3RoaXMuZm9yRWFjaE5vZGUoZT0+e2Uuc2V0Um93SGVpZ2h0KHRoaXMucm93SGVpZ2h0KSxlLnNldFJvd1RvcCh0aGlzLnJvd0hlaWdodCplLnJvd0luZGV4KX0pO2NvbnN0IGU9e3R5cGU6cy5FdmVudHMuRVZFTlRfTU9ERUxfVVBEQVRFRCxuZXdEYXRhOiExLG5ld1BhZ2U6ITEsa2VlcFJlbmRlcmVkUm93czohMCxhbmltYXRlOiExfTt0aGlzLmV2ZW50U2VydmljZS5kaXNwYXRjaEV2ZW50KGUpfWdldFRvcExldmVsUm93Q291bnQoKXtyZXR1cm4gdGhpcy5nZXRSb3dDb3VudCgpfWdldFRvcExldmVsUm93RGlzcGxheWVkSW5kZXgoZSl7cmV0dXJuIGV9aXNFbXB0eSgpe3JldHVybiB0aGlzLnJvd0NvdW50PjB9aXNSb3dzVG9SZW5kZXIoKXtyZXR1cm4gdGhpcy5yb3dDb3VudD4wfWdldE5vZGVzSW5SYW5nZUZvclNlbGVjdGlvbihlLHQpe2NvbnN0IGk9cy5fLm1pc3NpbmcoZSk/MDplLnJvd0luZGV4LHI9dC5yb3dJbmRleCxvPWk8dGhpcy5maXJzdFJvd3x8aT50aGlzLmxhc3RSb3csbj1yPHRoaXMuZmlyc3RSb3d8fHI+dGhpcy5sYXN0Um93O2lmKG98fG4pcmV0dXJuW107Y29uc3QgYT1bXSxsPWk8PXI/cjppO2ZvcihsZXQgZT1pPD1yP2k6cjtlPD1sO2UrKylhLnB1c2godGhpcy5yb3dOb2Rlc0J5SW5kZXhbZV0pO3JldHVybiBhfWZvckVhY2hOb2RlKGUpe2xldCB0PTA7T2JqZWN0LmtleXModGhpcy5yb3dOb2Rlc0J5SW5kZXgpLmZvckVhY2goaT0+e2NvbnN0IHM9cGFyc2VJbnQoaSwxMCkscj10aGlzLnJvd05vZGVzQnlJbmRleFtzXTtlKHIsdCksdCsrfSl9c2V0Um93RGF0YShlKXtzLl8uaXRlcmF0ZU9iamVjdChlLChlLHQpPT57Y29uc3QgaT1wYXJzZUludChlLDEwKTtpZihpPj10aGlzLmZpcnN0Um93JiZpPD10aGlzLmxhc3RSb3cpe2xldCBlPXRoaXMucm93Tm9kZXNCeUluZGV4W2ldO3MuXy5taXNzaW5nKGUpJiYoZT10aGlzLmNyZWF0ZUJsYW5rUm93Tm9kZShpKSx0aGlzLnJvd05vZGVzQnlJbmRleFtpXT1lKSxlLnNldERhdGFBbmRJZCh0LGkudG9TdHJpbmcoKSl9fSl9Y3JlYXRlQmxhbmtSb3dOb2RlKGUpe2NvbnN0IHQ9bmV3IHMuUm93Tm9kZSh0aGlzLmJlYW5zKTtyZXR1cm4gdC5zZXRSb3dIZWlnaHQodGhpcy5yb3dIZWlnaHQpLHQuc2V0Um93VG9wKHRoaXMucm93SGVpZ2h0KmUpLHQuc2V0Um93SW5kZXgoZSksdH1zZXRSb3dDb3VudChlLHQ9ITEpe2lmKGU9PT10aGlzLnJvd0NvdW50KXJldHVybjt0aGlzLnJvd0NvdW50PWUsdGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudE9uY2Uoe3R5cGU6cy5FdmVudHMuRVZFTlRfUk9XX0NPVU5UX1JFQURZfSk7Y29uc3QgaT17dHlwZTpzLkV2ZW50cy5FVkVOVF9NT0RFTF9VUERBVEVELG5ld0RhdGE6ITEsbmV3UGFnZTohMSxrZWVwUmVuZGVyZWRSb3dzOnQsYW5pbWF0ZTohMX07dGhpcy5ldmVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudChpKX1pc1Jvd1ByZXNlbnQoZSl7cmV0dXJuISF0aGlzLmdldFJvd05vZGUoZS5pZCl9fTtvKFtPYmplY3Qocy5BdXRvd2lyZWQpKCJyb3dSZW5kZXJlciIpXSxuLnByb3RvdHlwZSwicm93UmVuZGVyZXIiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiZm9jdXNTZXJ2aWNlIildLG4ucHJvdG90eXBlLCJmb2N1c1NlcnZpY2UiLHZvaWQgMCksbyhbT2JqZWN0KHMuQXV0b3dpcmVkKSgiYmVhbnMiKV0sbi5wcm90b3R5cGUsImJlYW5zIix2b2lkIDApLG8oW3MuUG9zdENvbnN0cnVjdF0sbi5wcm90b3R5cGUsImluaXQiLG51bGwpLG8oW3MuUHJlRGVzdHJveV0sbi5wcm90b3R5cGUsImRlc3Ryb3lEYXRhc291cmNlIixudWxsKSxuPW8oW09iamVjdChzLkJlYW4pKCJyb3dNb2RlbCIpXSxuKTtjb25zdCBhPXt2ZXJzaW9uOiIzMS4xLjEiLG1vZHVsZU5hbWU6cy5Nb2R1bGVOYW1lcy5WaWV3cG9ydFJvd01vZGVsTW9kdWxlLHJvd01vZGVsOiJ2aWV3cG9ydCIsYmVhbnM6W25dLGRlcGVuZGFudE1vZHVsZXM6W3IuRW50ZXJwcmlzZUNvcmVNb2R1bGVdfTtpLmQodCwiVmlld3BvcnRSb3dNb2RlbE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGF9KSl9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpLGkuZCh0LCJBbGxDb21tdW5pdHlNb2R1bGVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gVH0pKSxpLmQodCwiQWxsRW50ZXJwcmlzZU1vZHVsZXMiLChmdW5jdGlvbigpe3JldHVybiBEfSkpLGkuZCh0LCJBbGxNb2R1bGVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gT30pKTt2YXIgcz1pKDUpLHI9aSg2KSxvPWkoMiksbj1pKDEyKSxhPWkoMjEpLGw9aSg4KSxkPWkoMTEpLGM9aSgxOCksaD1pKDEwKSx1PWkoMTkpLHA9aSgxNyksZz1pKDIwKSxtPWkoOSksZj1pKDIyKSx2PWkoNCksQz1pKDEzKSx5PWkoMTUpLFM9aSg3KSx3PWkoMTYpLGI9aSgyMyksRT1pKDE0KSxSPWkoMCk7aS5kKHQsIkNvbHVtbkZhY3RvcnkiLChmdW5jdGlvbigpe3JldHVybiBSLkNvbHVtbkZhY3Rvcnl9KSksaS5kKHQsIkNvbHVtbk1vZGVsIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Db2x1bW5Nb2RlbH0pKSxpLmQodCwiQ29sdW1uS2V5Q3JlYXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQ29sdW1uS2V5Q3JlYXRvcn0pKSxpLmQodCwiQ29sdW1uVXRpbHMiLChmdW5jdGlvbigpe3JldHVybiBSLkNvbHVtblV0aWxzfSkpLGkuZCh0LCJEaXNwbGF5ZWRHcm91cENyZWF0b3IiLChmdW5jdGlvbigpe3JldHVybiBSLkRpc3BsYXllZEdyb3VwQ3JlYXRvcn0pKSxpLmQodCwiR3JvdXBJbnN0YW5jZUlkQ3JlYXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuR3JvdXBJbnN0YW5jZUlkQ3JlYXRvcn0pKSxpLmQodCwiR1JPVVBfQVVUT19DT0xVTU5fSUQiLChmdW5jdGlvbigpe3JldHVybiBSLkdST1VQX0FVVE9fQ09MVU1OX0lEfSkpLGkuZCh0LCJDb21wb25lbnRVdGlsIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Db21wb25lbnRVdGlsfSkpLGkuZCh0LCJBZ1N0YWNrQ29tcG9uZW50c1JlZ2lzdHJ5IiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BZ1N0YWNrQ29tcG9uZW50c1JlZ2lzdHJ5fSkpLGkuZCh0LCJVc2VyQ29tcG9uZW50UmVnaXN0cnkiLChmdW5jdGlvbigpe3JldHVybiBSLlVzZXJDb21wb25lbnRSZWdpc3RyeX0pKSxpLmQodCwiVXNlckNvbXBvbmVudEZhY3RvcnkiLChmdW5jdGlvbigpe3JldHVybiBSLlVzZXJDb21wb25lbnRGYWN0b3J5fSkpLGkuZCh0LCJDb2xEZWZVdGlsIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Db2xEZWZVdGlsfSkpLGkuZCh0LCJCZWFuU3R1YiIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQmVhblN0dWJ9KSksaS5kKHQsIkNvbnRleHQiLChmdW5jdGlvbigpe3JldHVybiBSLkNvbnRleHR9KSksaS5kKHQsIkF1dG93aXJlZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQXV0b3dpcmVkfSkpLGkuZCh0LCJQb3N0Q29uc3RydWN0IiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Qb3N0Q29uc3RydWN0fSkpLGkuZCh0LCJQcmVDb25zdHJ1Y3QiLChmdW5jdGlvbigpe3JldHVybiBSLlByZUNvbnN0cnVjdH0pKSxpLmQodCwiT3B0aW9uYWwiLChmdW5jdGlvbigpe3JldHVybiBSLk9wdGlvbmFsfSkpLGkuZCh0LCJCZWFuIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5CZWFufSkpLGkuZCh0LCJRdWFsaWZpZXIiLChmdW5jdGlvbigpe3JldHVybiBSLlF1YWxpZmllcn0pKSxpLmQodCwiUHJlRGVzdHJveSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUHJlRGVzdHJveX0pKSxpLmQodCwiUXVlcnlTZWxlY3RvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUXVlcnlTZWxlY3Rvcn0pKSxpLmQodCwiUmVmU2VsZWN0b3IiLChmdW5jdGlvbigpe3JldHVybiBSLlJlZlNlbGVjdG9yfSkpLGkuZCh0LCJFeGNlbEZhY3RvcnlNb2RlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5FeGNlbEZhY3RvcnlNb2RlfSkpLGkuZCh0LCJEcmFnQW5kRHJvcFNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBSLkRyYWdBbmREcm9wU2VydmljZX0pKSxpLmQodCwiRHJhZ1NvdXJjZVR5cGUiLChmdW5jdGlvbigpe3JldHVybiBSLkRyYWdTb3VyY2VUeXBlfSkpLGkuZCh0LCJEcmFnU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuRHJhZ1NlcnZpY2V9KSksaS5kKHQsIlZpcnR1YWxMaXN0RHJhZ0ZlYXR1cmUiLChmdW5jdGlvbigpe3JldHVybiBSLlZpcnR1YWxMaXN0RHJhZ0ZlYXR1cmV9KSksaS5kKHQsIkNvbHVtbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQ29sdW1ufSkpLGkuZCh0LCJDb2x1bW5Hcm91cCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQ29sdW1uR3JvdXB9KSksaS5kKHQsIlByb3ZpZGVkQ29sdW1uR3JvdXAiLChmdW5jdGlvbigpe3JldHVybiBSLlByb3ZpZGVkQ29sdW1uR3JvdXB9KSksaS5kKHQsIlJvd05vZGUiLChmdW5jdGlvbigpe3JldHVybiBSLlJvd05vZGV9KSksaS5kKHQsIlJvd0hpZ2hsaWdodFBvc2l0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Sb3dIaWdobGlnaHRQb3NpdGlvbn0pKSxpLmQodCwiRmlsdGVyTWFuYWdlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuRmlsdGVyTWFuYWdlcn0pKSxpLmQodCwiUHJvdmlkZWRGaWx0ZXIiLChmdW5jdGlvbigpe3JldHVybiBSLlByb3ZpZGVkRmlsdGVyfSkpLGkuZCh0LCJTaW1wbGVGaWx0ZXIiLChmdW5jdGlvbigpe3JldHVybiBSLlNpbXBsZUZpbHRlcn0pKSxpLmQodCwiU2NhbGFyRmlsdGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5TY2FsYXJGaWx0ZXJ9KSksaS5kKHQsIk51bWJlckZpbHRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuTnVtYmVyRmlsdGVyfSkpLGkuZCh0LCJUZXh0RmlsdGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5UZXh0RmlsdGVyfSkpLGkuZCh0LCJEYXRlRmlsdGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5EYXRlRmlsdGVyfSkpLGkuZCh0LCJUZXh0RmxvYXRpbmdGaWx0ZXIiLChmdW5jdGlvbigpe3JldHVybiBSLlRleHRGbG9hdGluZ0ZpbHRlcn0pKSxpLmQodCwiSGVhZGVyRmlsdGVyQ2VsbENvbXAiLChmdW5jdGlvbigpe3JldHVybiBSLkhlYWRlckZpbHRlckNlbGxDb21wfSkpLGkuZCh0LCJGbG9hdGluZ0ZpbHRlck1hcHBlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuRmxvYXRpbmdGaWx0ZXJNYXBwZXJ9KSksaS5kKHQsIkdyaWRCb2R5Q29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuR3JpZEJvZHlDb21wfSkpLGkuZCh0LCJHcmlkQm9keUN0cmwiLChmdW5jdGlvbigpe3JldHVybiBSLkdyaWRCb2R5Q3RybH0pKSxpLmQodCwiUm93QW5pbWF0aW9uQ3NzQ2xhc3NlcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUm93QW5pbWF0aW9uQ3NzQ2xhc3Nlc30pKSxpLmQodCwiU2Nyb2xsVmlzaWJsZVNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBSLlNjcm9sbFZpc2libGVTZXJ2aWNlfSkpLGkuZCh0LCJNb3VzZUV2ZW50U2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuTW91c2VFdmVudFNlcnZpY2V9KSksaS5kKHQsIk5hdmlnYXRpb25TZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5OYXZpZ2F0aW9uU2VydmljZX0pKSxpLmQodCwiUm93Q29udGFpbmVyQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUm93Q29udGFpbmVyQ29tcH0pKSxpLmQodCwiUm93Q29udGFpbmVyTmFtZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUm93Q29udGFpbmVyTmFtZX0pKSxpLmQodCwiUm93Q29udGFpbmVyQ3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUm93Q29udGFpbmVyQ3RybH0pKSxpLmQodCwiUm93Q29udGFpbmVyVHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUm93Q29udGFpbmVyVHlwZX0pKSxpLmQodCwiZ2V0Um93Q29udGFpbmVyVHlwZUZvck5hbWUiLChmdW5jdGlvbigpe3JldHVybiBSLmdldFJvd0NvbnRhaW5lclR5cGVGb3JOYW1lfSkpLGkuZCh0LCJCb2R5RHJvcFBpdm90VGFyZ2V0IiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Cb2R5RHJvcFBpdm90VGFyZ2V0fSkpLGkuZCh0LCJCb2R5RHJvcFRhcmdldCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQm9keURyb3BUYXJnZXR9KSksaS5kKHQsIkNzc0NsYXNzQXBwbGllciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQ3NzQ2xhc3NBcHBsaWVyfSkpLGkuZCh0LCJIZWFkZXJSb3dDb250YWluZXJDb21wIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5IZWFkZXJSb3dDb250YWluZXJDb21wfSkpLGkuZCh0LCJHcmlkSGVhZGVyQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuR3JpZEhlYWRlckNvbXB9KSksaS5kKHQsIkdyaWRIZWFkZXJDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5HcmlkSGVhZGVyQ3RybH0pKSxpLmQodCwiSGVhZGVyUm93Q29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuSGVhZGVyUm93Q29tcH0pKSxpLmQodCwiSGVhZGVyUm93VHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuSGVhZGVyUm93VHlwZX0pKSxpLmQodCwiSGVhZGVyUm93Q3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuSGVhZGVyUm93Q3RybH0pKSxpLmQodCwiSGVhZGVyQ2VsbEN0cmwiLChmdW5jdGlvbigpe3JldHVybiBSLkhlYWRlckNlbGxDdHJsfSkpLGkuZCh0LCJTb3J0SW5kaWNhdG9yQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuU29ydEluZGljYXRvckNvbXB9KSksaS5kKHQsIkhlYWRlckZpbHRlckNlbGxDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5IZWFkZXJGaWx0ZXJDZWxsQ3RybH0pKSxpLmQodCwiSGVhZGVyR3JvdXBDZWxsQ3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuSGVhZGVyR3JvdXBDZWxsQ3RybH0pKSxpLmQodCwiQWJzdHJhY3RIZWFkZXJDZWxsQ3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQWJzdHJhY3RIZWFkZXJDZWxsQ3RybH0pKSxpLmQodCwiSGVhZGVyUm93Q29udGFpbmVyQ3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuSGVhZGVyUm93Q29udGFpbmVyQ3RybH0pKSxpLmQodCwiSG9yaXpvbnRhbFJlc2l6ZVNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBSLkhvcml6b250YWxSZXNpemVTZXJ2aWNlfSkpLGkuZCh0LCJNb3ZlQ29sdW1uRmVhdHVyZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuTW92ZUNvbHVtbkZlYXR1cmV9KSksaS5kKHQsIlN0YW5kYXJkTWVudUZhY3RvcnkiLChmdW5jdGlvbigpe3JldHVybiBSLlN0YW5kYXJkTWVudUZhY3Rvcnl9KSksaS5kKHQsIlRhYmJlZExheW91dCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuVGFiYmVkTGF5b3V0fSkpLGkuZCh0LCJSZXNpemVPYnNlcnZlclNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBSLlJlc2l6ZU9ic2VydmVyU2VydmljZX0pKSxpLmQodCwiQW5pbWF0aW9uRnJhbWVTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BbmltYXRpb25GcmFtZVNlcnZpY2V9KSksaS5kKHQsIkV4cGFuc2lvblNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBSLkV4cGFuc2lvblNlcnZpY2V9KSksaS5kKHQsIk1lbnVTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5NZW51U2VydmljZX0pKSxpLmQodCwiTGFyZ2VUZXh0Q2VsbEVkaXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuTGFyZ2VUZXh0Q2VsbEVkaXRvcn0pKSxpLmQodCwiUG9wdXBFZGl0b3JXcmFwcGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Qb3B1cEVkaXRvcldyYXBwZXJ9KSksaS5kKHQsIlNlbGVjdENlbGxFZGl0b3IiLChmdW5jdGlvbigpe3JldHVybiBSLlNlbGVjdENlbGxFZGl0b3J9KSksaS5kKHQsIlRleHRDZWxsRWRpdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5UZXh0Q2VsbEVkaXRvcn0pKSxpLmQodCwiTnVtYmVyQ2VsbEVkaXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuTnVtYmVyQ2VsbEVkaXRvcn0pKSxpLmQodCwiRGF0ZUNlbGxFZGl0b3IiLChmdW5jdGlvbigpe3JldHVybiBSLkRhdGVDZWxsRWRpdG9yfSkpLGkuZCh0LCJEYXRlU3RyaW5nQ2VsbEVkaXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuRGF0ZVN0cmluZ0NlbGxFZGl0b3J9KSksaS5kKHQsIkNoZWNrYm94Q2VsbEVkaXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQ2hlY2tib3hDZWxsRWRpdG9yfSkpLGkuZCh0LCJCZWFucyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQmVhbnN9KSksaS5kKHQsIkFuaW1hdGVTaG93Q2hhbmdlQ2VsbFJlbmRlcmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BbmltYXRlU2hvd0NoYW5nZUNlbGxSZW5kZXJlcn0pKSxpLmQodCwiQW5pbWF0ZVNsaWRlQ2VsbFJlbmRlcmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BbmltYXRlU2xpZGVDZWxsUmVuZGVyZXJ9KSksaS5kKHQsIkdyb3VwQ2VsbFJlbmRlcmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Hcm91cENlbGxSZW5kZXJlcn0pKSxpLmQodCwiR3JvdXBDZWxsUmVuZGVyZXJDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Hcm91cENlbGxSZW5kZXJlckN0cmx9KSksaS5kKHQsIlNldExlZnRGZWF0dXJlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5TZXRMZWZ0RmVhdHVyZX0pKSxpLmQodCwiUG9zaXRpb25hYmxlRmVhdHVyZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUG9zaXRpb25hYmxlRmVhdHVyZX0pKSxpLmQodCwiQXV0b1dpZHRoQ2FsY3VsYXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQXV0b1dpZHRoQ2FsY3VsYXRvcn0pKSxpLmQodCwiQ2hlY2tib3hTZWxlY3Rpb25Db21wb25lbnQiLChmdW5jdGlvbigpe3JldHVybiBSLkNoZWNrYm94U2VsZWN0aW9uQ29tcG9uZW50fSkpLGkuZCh0LCJDZWxsQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQ2VsbENvbXB9KSksaS5kKHQsIkNlbGxDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5DZWxsQ3RybH0pKSxpLmQodCwiUm93Q3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUm93Q3RybH0pKSxpLmQodCwiUm93UmVuZGVyZXIiLChmdW5jdGlvbigpe3JldHVybiBSLlJvd1JlbmRlcmVyfSkpLGkuZCh0LCJWYWx1ZUZvcm1hdHRlclNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBSLlZhbHVlRm9ybWF0dGVyU2VydmljZX0pKSxpLmQodCwiQ3NzQ2xhc3NNYW5hZ2VyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Dc3NDbGFzc01hbmFnZXJ9KSksaS5kKHQsIkNoZWNrYm94Q2VsbFJlbmRlcmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5DaGVja2JveENlbGxSZW5kZXJlcn0pKSxpLmQodCwiUGlubmVkUm93TW9kZWwiLChmdW5jdGlvbigpe3JldHVybiBSLlBpbm5lZFJvd01vZGVsfSkpLGkuZCh0LCJTZXJ2ZXJTaWRlVHJhbnNhY3Rpb25SZXN1bHRTdGF0dXMiLChmdW5jdGlvbigpe3JldHVybiBSLlNlcnZlclNpZGVUcmFuc2FjdGlvblJlc3VsdFN0YXR1c30pKSxpLmQodCwiQ2hhbmdlZFBhdGgiLChmdW5jdGlvbigpe3JldHVybiBSLkNoYW5nZWRQYXRofSkpLGkuZCh0LCJSb3dOb2RlQmxvY2siLChmdW5jdGlvbigpe3JldHVybiBSLlJvd05vZGVCbG9ja30pKSxpLmQodCwiUm93Tm9kZUJsb2NrTG9hZGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Sb3dOb2RlQmxvY2tMb2FkZXJ9KSksaS5kKHQsIlBhZ2luYXRpb25Qcm94eSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUGFnaW5hdGlvblByb3h5fSkpLGkuZCh0LCJDbGllbnRTaWRlUm93TW9kZWxTdGVwcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQ2xpZW50U2lkZVJvd01vZGVsU3RlcHN9KSksaS5kKHQsIlN0eWxpbmdTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5TdHlsaW5nU2VydmljZX0pKSxpLmQodCwiTGF5b3V0Q3NzQ2xhc3NlcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuTGF5b3V0Q3NzQ2xhc3Nlc30pKSxpLmQodCwiQWdBYnN0cmFjdEZpZWxkIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BZ0Fic3RyYWN0RmllbGR9KSksaS5kKHQsIkFnQ2hlY2tib3giLChmdW5jdGlvbigpe3JldHVybiBSLkFnQ2hlY2tib3h9KSksaS5kKHQsIkFnUmFkaW9CdXR0b24iLChmdW5jdGlvbigpe3JldHVybiBSLkFnUmFkaW9CdXR0b259KSksaS5kKHQsIkFnVG9nZ2xlQnV0dG9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BZ1RvZ2dsZUJ1dHRvbn0pKSxpLmQodCwiQWdJbnB1dFRleHRGaWVsZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQWdJbnB1dFRleHRGaWVsZH0pKSxpLmQodCwiQWdJbnB1dFRleHRBcmVhIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BZ0lucHV0VGV4dEFyZWF9KSksaS5kKHQsIkFnSW5wdXROdW1iZXJGaWVsZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQWdJbnB1dE51bWJlckZpZWxkfSkpLGkuZCh0LCJBZ0lucHV0RGF0ZUZpZWxkIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BZ0lucHV0RGF0ZUZpZWxkfSkpLGkuZCh0LCJBZ0lucHV0UmFuZ2UiLChmdW5jdGlvbigpe3JldHVybiBSLkFnSW5wdXRSYW5nZX0pKSxpLmQodCwiQWdSaWNoU2VsZWN0IiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BZ1JpY2hTZWxlY3R9KSksaS5kKHQsIkFnU2VsZWN0IiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BZ1NlbGVjdH0pKSxpLmQodCwiQWdTbGlkZXIiLChmdW5jdGlvbigpe3JldHVybiBSLkFnU2xpZGVyfSkpLGkuZCh0LCJBZ0dyb3VwQ29tcG9uZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BZ0dyb3VwQ29tcG9uZW50fSkpLGkuZCh0LCJBZ01lbnVJdGVtUmVuZGVyZXIiLChmdW5jdGlvbigpe3JldHVybiBSLkFnTWVudUl0ZW1SZW5kZXJlcn0pKSxpLmQodCwiQWdNZW51SXRlbUNvbXBvbmVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQWdNZW51SXRlbUNvbXBvbmVudH0pKSxpLmQodCwiQWdNZW51TGlzdCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQWdNZW51TGlzdH0pKSxpLmQodCwiQWdNZW51UGFuZWwiLChmdW5jdGlvbigpe3JldHVybiBSLkFnTWVudVBhbmVsfSkpLGkuZCh0LCJBZ0RpYWxvZyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQWdEaWFsb2d9KSksaS5kKHQsIkFnUGFuZWwiLChmdW5jdGlvbigpe3JldHVybiBSLkFnUGFuZWx9KSksaS5kKHQsIkNvbXBvbmVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQ29tcG9uZW50fSkpLGkuZCh0LCJNYW5hZ2VkRm9jdXNGZWF0dXJlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5NYW5hZ2VkRm9jdXNGZWF0dXJlfSkpLGkuZCh0LCJUYWJHdWFyZENvbXAiLChmdW5jdGlvbigpe3JldHVybiBSLlRhYkd1YXJkQ29tcH0pKSxpLmQodCwiVGFiR3VhcmRDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5UYWJHdWFyZEN0cmx9KSksaS5kKHQsIlRhYkd1YXJkQ2xhc3NOYW1lcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuVGFiR3VhcmRDbGFzc05hbWVzfSkpLGkuZCh0LCJQb3B1cENvbXBvbmVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUG9wdXBDb21wb25lbnR9KSksaS5kKHQsIlBvcHVwU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUG9wdXBTZXJ2aWNlfSkpLGkuZCh0LCJUb3VjaExpc3RlbmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Ub3VjaExpc3RlbmVyfSkpLGkuZCh0LCJWaXJ0dWFsTGlzdCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuVmlydHVhbExpc3R9KSksaS5kKHQsIkFnQWJzdHJhY3RMYWJlbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQWdBYnN0cmFjdExhYmVsfSkpLGkuZCh0LCJBZ1BpY2tlckZpZWxkIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BZ1BpY2tlckZpZWxkfSkpLGkuZCh0LCJBZ0F1dG9jb21wbGV0ZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQWdBdXRvY29tcGxldGV9KSksaS5kKHQsIkNlbGxSYW5nZVR5cGUiLChmdW5jdGlvbigpe3JldHVybiBSLkNlbGxSYW5nZVR5cGV9KSksaS5kKHQsIlNlbGVjdGlvbkhhbmRsZVR5cGUiLChmdW5jdGlvbigpe3JldHVybiBSLlNlbGVjdGlvbkhhbmRsZVR5cGV9KSksaS5kKHQsIkF1dG9TY3JvbGxTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BdXRvU2Nyb2xsU2VydmljZX0pKSxpLmQodCwiVmFuaWxsYUZyYW1ld29ya092ZXJyaWRlcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuVmFuaWxsYUZyYW1ld29ya092ZXJyaWRlc30pKSxpLmQodCwiQ2VsbE5hdmlnYXRpb25TZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5DZWxsTmF2aWdhdGlvblNlcnZpY2V9KSksaS5kKHQsIkFsaWduZWRHcmlkc1NlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBSLkFsaWduZWRHcmlkc1NlcnZpY2V9KSksaS5kKHQsIktleUNvZGUiLChmdW5jdGlvbigpe3JldHVybiBSLktleUNvZGV9KSksaS5kKHQsIlZlcnRpY2FsRGlyZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5WZXJ0aWNhbERpcmVjdGlvbn0pKSxpLmQodCwiSG9yaXpvbnRhbERpcmVjdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuSG9yaXpvbnRhbERpcmVjdGlvbn0pKSxpLmQodCwiR3JpZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuR3JpZH0pKSxpLmQodCwiR3JpZENvcmVDcmVhdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5HcmlkQ29yZUNyZWF0b3J9KSksaS5kKHQsImNyZWF0ZUdyaWQiLChmdW5jdGlvbigpe3JldHVybiBSLmNyZWF0ZUdyaWR9KSksaS5kKHQsIkdyaWRBcGkiLChmdW5jdGlvbigpe3JldHVybiBSLkdyaWRBcGl9KSksaS5kKHQsIkV2ZW50cyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuRXZlbnRzfSkpLGkuZCh0LCJGb2N1c1NlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBSLkZvY3VzU2VydmljZX0pKSxpLmQodCwiR3JpZE9wdGlvbnNTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5HcmlkT3B0aW9uc1NlcnZpY2V9KSksaS5kKHQsIkV2ZW50U2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuRXZlbnRTZXJ2aWNlfSkpLGkuZCh0LCJTZWxlY3RhYmxlU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuU2VsZWN0YWJsZVNlcnZpY2V9KSksaS5kKHQsIlJvd05vZGVTb3J0ZXIiLChmdW5jdGlvbigpe3JldHVybiBSLlJvd05vZGVTb3J0ZXJ9KSksaS5kKHQsIkN0cmxzU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQ3RybHNTZXJ2aWNlfSkpLGkuZCh0LCJHcmlkQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuR3JpZENvbXB9KSksaS5kKHQsIkdyaWRDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5HcmlkQ3RybH0pKSxpLmQodCwiTG9nZ2VyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Mb2dnZXJ9KSksaS5kKHQsIkxvZ2dlckZhY3RvcnkiLChmdW5jdGlvbigpe3JldHVybiBSLkxvZ2dlckZhY3Rvcnl9KSksaS5kKHQsIlNvcnRDb250cm9sbGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Tb3J0Q29udHJvbGxlcn0pKSxpLmQodCwiVGVtcGxhdGVTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5UZW1wbGF0ZVNlcnZpY2V9KSksaS5kKHQsIkxvY2FsZVNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBSLkxvY2FsZVNlcnZpY2V9KSksaS5kKHQsIlZhbHVlU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuVmFsdWVTZXJ2aWNlfSkpLGkuZCh0LCJWYWx1ZUNhY2hlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5WYWx1ZUNhY2hlfSkpLGkuZCh0LCJFeHByZXNzaW9uU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuRXhwcmVzc2lvblNlcnZpY2V9KSksaS5kKHQsIlZhbHVlUGFyc2VyU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuVmFsdWVQYXJzZXJTZXJ2aWNlfSkpLGkuZCh0LCJDZWxsUG9zaXRpb25VdGlscyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuQ2VsbFBvc2l0aW9uVXRpbHN9KSksaS5kKHQsIlJvd1Bvc2l0aW9uVXRpbHMiLChmdW5jdGlvbigpe3JldHVybiBSLlJvd1Bvc2l0aW9uVXRpbHN9KSksaS5kKHQsIkhlYWRlclBvc2l0aW9uVXRpbHMiLChmdW5jdGlvbigpe3JldHVybiBSLkhlYWRlclBvc2l0aW9uVXRpbHN9KSksaS5kKHQsIkhlYWRlck5hdmlnYXRpb25TZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5IZWFkZXJOYXZpZ2F0aW9uU2VydmljZX0pKSxpLmQodCwiSGVhZGVyTmF2aWdhdGlvbkRpcmVjdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuSGVhZGVyTmF2aWdhdGlvbkRpcmVjdGlvbn0pKSxpLmQodCwiRGF0YVR5cGVTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5EYXRhVHlwZVNlcnZpY2V9KSksaS5kKHQsIlByb3BlcnR5S2V5cyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuUHJvcGVydHlLZXlzfSkpLGkuZCh0LCJDb2x1bW5BcGkiLChmdW5jdGlvbigpe3JldHVybiBSLkNvbHVtbkFwaX0pKSxpLmQodCwiQmFzZUNvbXBvbmVudFdyYXBwZXIiLChmdW5jdGlvbigpe3JldHVybiBSLkJhc2VDb21wb25lbnRXcmFwcGVyfSkpLGkuZCh0LCJFbnZpcm9ubWVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuRW52aXJvbm1lbnR9KSksaS5kKHQsIlRvb2x0aXBGZWF0dXJlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Ub29sdGlwRmVhdHVyZX0pKSxpLmQodCwiQ3VzdG9tVG9vbHRpcEZlYXR1cmUiLChmdW5jdGlvbigpe3JldHVybiBSLkN1c3RvbVRvb2x0aXBGZWF0dXJlfSkpLGkuZCh0LCJNb2R1bGVOYW1lcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuTW9kdWxlTmFtZXN9KSksaS5kKHQsIk1vZHVsZVJlZ2lzdHJ5IiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5Nb2R1bGVSZWdpc3RyeX0pKSxpLmQodCwiXyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFIuX30pKSxpLmQodCwiTnVtYmVyU2VxdWVuY2UiLChmdW5jdGlvbigpe3JldHVybiBSLk51bWJlclNlcXVlbmNlfSkpLGkuZCh0LCJBZ1Byb21pc2VTdGF0dXMiLChmdW5jdGlvbigpe3JldHVybiBSLkFnUHJvbWlzZVN0YXR1c30pKSxpLmQodCwiQWdQcm9taXNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5BZ1Byb21pc2V9KSksaS5kKHQsIlRpbWVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5UaW1lcn0pKSxpLmQodCwiREVGQVVMVF9DSEFSVF9HUk9VUFMiLChmdW5jdGlvbigpe3JldHVybiBSLkRFRkFVTFRfQ0hBUlRfR1JPVVBTfSkpLGkuZCh0LCJDSEFSVF9UT09MX1BBTkVMX0FMTE9XX0xJU1QiLChmdW5jdGlvbigpe3JldHVybiBSLkNIQVJUX1RPT0xfUEFORUxfQUxMT1dfTElTVH0pKSxpLmQodCwiQ0hBUlRfVE9PTEJBUl9BTExPV19MSVNUIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5DSEFSVF9UT09MQkFSX0FMTE9XX0xJU1R9KSksaS5kKHQsIkNIQVJUX1RPT0xfUEFORUxfTUVOVV9PUFRJT05TIiwoZnVuY3Rpb24oKXtyZXR1cm4gUi5DSEFSVF9UT09MX1BBTkVMX01FTlVfT1BUSU9OU30pKSxpLmQodCwiQmFyQ29sdW1uTGFiZWxQbGFjZW1lbnQiLChmdW5jdGlvbigpe3JldHVybiBSLkJhckNvbHVtbkxhYmVsUGxhY2VtZW50fSkpLGkuZCh0LCJDbGllbnRTaWRlUm93TW9kZWxNb2R1bGUiLChmdW5jdGlvbigpe3JldHVybiBzLkNsaWVudFNpZGVSb3dNb2RlbE1vZHVsZX0pKSxpLmQodCwiQmFzZUNyZWF0b3IiLChmdW5jdGlvbigpe3JldHVybiBvLkJhc2VDcmVhdG9yfSkpLGkuZCh0LCJCYXNlR3JpZFNlcmlhbGl6aW5nU2Vzc2lvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uQmFzZUdyaWRTZXJpYWxpemluZ1Nlc3Npb259KSksaS5kKHQsIkNzdkNyZWF0b3IiLChmdW5jdGlvbigpe3JldHVybiBvLkNzdkNyZWF0b3J9KSksaS5kKHQsIkNzdkV4cG9ydE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uQ3N2RXhwb3J0TW9kdWxlfSkpLGkuZCh0LCJEb3dubG9hZGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gby5Eb3dubG9hZGVyfSkpLGkuZCh0LCJHcmlkU2VyaWFsaXplciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uR3JpZFNlcmlhbGl6ZXJ9KSksaS5kKHQsIlJvd1R5cGUiLChmdW5jdGlvbigpe3JldHVybiBvLlJvd1R5cGV9KSksaS5kKHQsIlhtbEZhY3RvcnkiLChmdW5jdGlvbigpe3JldHVybiBvLlhtbEZhY3Rvcnl9KSksaS5kKHQsIlppcENvbnRhaW5lciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uWmlwQ29udGFpbmVyfSkpLGkuZCh0LCJJbmZpbml0ZVJvd01vZGVsTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gci5JbmZpbml0ZVJvd01vZGVsTW9kdWxlfSkpLGkuZCh0LCJBZHZhbmNlZEZpbHRlck1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQWR2YW5jZWRGaWx0ZXJNb2R1bGV9KSksaS5kKHQsIkNsaXBib2FyZE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGEuQ2xpcGJvYXJkTW9kdWxlfSkpLGkuZCh0LCJDb2x1bW5zVG9vbFBhbmVsTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbC5Db2x1bW5zVG9vbFBhbmVsTW9kdWxlfSkpLGkuZCh0LCJQcmltYXJ5Q29sc1BhbmVsIiwoZnVuY3Rpb24oKXtyZXR1cm4gbC5QcmltYXJ5Q29sc1BhbmVsfSkpLGkuZCh0LCJFeGNlbEV4cG9ydE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGQuRXhjZWxFeHBvcnRNb2R1bGV9KSksaS5kKHQsImdldE11bHRpcGxlU2hlZXRzQXNFeGNlbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGQuZ2V0TXVsdGlwbGVTaGVldHNBc0V4Y2VsfSkpLGkuZCh0LCJleHBvcnRNdWx0aXBsZVNoZWV0c0FzRXhjZWwiLChmdW5jdGlvbigpe3JldHVybiBkLmV4cG9ydE11bHRpcGxlU2hlZXRzQXNFeGNlbH0pKSxpLmQodCwiRmlsdGVyc1Rvb2xQYW5lbE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGMuRmlsdGVyc1Rvb2xQYW5lbE1vZHVsZX0pKSxpLmQodCwiR3JpZENoYXJ0c01vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGguR3JpZENoYXJ0c01vZHVsZX0pKSxpLmQodCwiYWdDaGFydHMiLChmdW5jdGlvbigpe3JldHVybiBoLmFnQ2hhcnRzfSkpLGkuZCh0LCJfX0ZPUkNFX01PRFVMRV9ERVRFQ1RJT05fQUdfR1JJRF9DT1JFX0VYVCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGguX19GT1JDRV9NT0RVTEVfREVURUNUSU9OX0FHX0dSSURfQ09SRV9FWFR9KSksaS5kKHQsIkFnQ2hhcnQiLChmdW5jdGlvbigpe3JldHVybiBoLkFnQ2hhcnR9KSksaS5kKHQsIkFnQ2hhcnRzIiwoZnVuY3Rpb24oKXtyZXR1cm4gaC5BZ0NoYXJ0c30pKSxpLmQodCwiQWdFcnJvckJhclN1cHBvcnRlZFNlcmllc1R5cGVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gaC5BZ0Vycm9yQmFyU3VwcG9ydGVkU2VyaWVzVHlwZXN9KSksaS5kKHQsIkFnVG9vbHRpcFBvc2l0aW9uVHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGguQWdUb29sdGlwUG9zaXRpb25UeXBlfSkpLGkuZCh0LCJNYXJrZXIiLChmdW5jdGlvbigpe3JldHVybiBoLk1hcmtlcn0pKSxpLmQodCwiVkVSU0lPTiIsKGZ1bmN0aW9uKCl7cmV0dXJuIGguVkVSU0lPTn0pKSxpLmQodCwiX01vZHVsZVN1cHBvcnQiLChmdW5jdGlvbigpe3JldHVybiBoLl9Nb2R1bGVTdXBwb3J0fSkpLGkuZCh0LCJfU2NhbGUiLChmdW5jdGlvbigpe3JldHVybiBoLl9TY2FsZX0pKSxpLmQodCwiX1NjZW5lIiwoZnVuY3Rpb24oKXtyZXR1cm4gaC5fU2NlbmV9KSksaS5kKHQsIl9UaGVtZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGguX1RoZW1lfSkpLGkuZCh0LCJfVXRpbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGguX1V0aWx9KSksaS5kKHQsIl9fRk9SQ0VfTU9EVUxFX0RFVEVDVElPTiIsKGZ1bmN0aW9uKCl7cmV0dXJuIGguX19GT1JDRV9NT0RVTEVfREVURUNUSU9OfSkpLGkuZCh0LCJ0aW1lIiwoZnVuY3Rpb24oKXtyZXR1cm4gaC50aW1lfSkpLGkuZCh0LCJNYXN0ZXJEZXRhaWxNb2R1bGUiLChmdW5jdGlvbigpe3JldHVybiB1Lk1hc3RlckRldGFpbE1vZHVsZX0pKSxpLmQodCwiTWVudU1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHAuTWVudU1vZHVsZX0pKSxpLmQodCwiTXVsdGlGaWx0ZXJNb2R1bGUiLChmdW5jdGlvbigpe3JldHVybiBnLk11bHRpRmlsdGVyTW9kdWxlfSkpLGkuZCh0LCJNdWx0aUZpbHRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIGcuTXVsdGlGaWx0ZXJ9KSksaS5kKHQsIlJhbmdlU2VsZWN0aW9uTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbS5SYW5nZVNlbGVjdGlvbk1vZHVsZX0pKSxpLmQodCwiUmljaFNlbGVjdE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGYuUmljaFNlbGVjdE1vZHVsZX0pKSxpLmQodCwiUm93R3JvdXBpbmdNb2R1bGUiLChmdW5jdGlvbigpe3JldHVybiB2LlJvd0dyb3VwaW5nTW9kdWxlfSkpLGkuZCh0LCJSb3dHcm91cERyb3Bab25lUGFuZWwiLChmdW5jdGlvbigpe3JldHVybiB2LlJvd0dyb3VwRHJvcFpvbmVQYW5lbH0pKSxpLmQodCwiVmFsdWVzRHJvcFpvbmVQYW5lbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHYuVmFsdWVzRHJvcFpvbmVQYW5lbH0pKSxpLmQodCwiUGl2b3REcm9wWm9uZVBhbmVsIiwoZnVuY3Rpb24oKXtyZXR1cm4gdi5QaXZvdERyb3Bab25lUGFuZWx9KSksaS5kKHQsIlNlcnZlclNpZGVSb3dNb2RlbE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIEMuU2VydmVyU2lkZVJvd01vZGVsTW9kdWxlfSkpLGkuZCh0LCJTZXRGaWx0ZXJNb2R1bGUiLChmdW5jdGlvbigpe3JldHVybiB5LlNldEZpbHRlck1vZHVsZX0pKSxpLmQodCwiU2V0RmlsdGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4geS5TZXRGaWx0ZXJ9KSksaS5kKHQsIlNpZGVCYXJNb2R1bGUiLChmdW5jdGlvbigpe3JldHVybiBTLlNpZGVCYXJNb2R1bGV9KSksaS5kKHQsIlRvb2xQYW5lbENvbERlZlNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBTLlRvb2xQYW5lbENvbERlZlNlcnZpY2V9KSksaS5kKHQsIlN0YXR1c0Jhck1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHcuU3RhdHVzQmFyTW9kdWxlfSkpLGkuZCh0LCJWaWV3cG9ydFJvd01vZGVsTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gYi5WaWV3cG9ydFJvd01vZGVsTW9kdWxlfSkpO3ZhciB4PWkoMyk7aS5kKHQsIkVudGVycHJpc2VDb3JlTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4geC5FbnRlcnByaXNlQ29yZU1vZHVsZX0pKSxpLmQodCwiTGljZW5zZU1hbmFnZXIiLChmdW5jdGlvbigpe3JldHVybiB4LkxpY2Vuc2VNYW5hZ2VyfSkpLGkuZCh0LCJTcGFya2xpbmVzTW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gRS5TcGFya2xpbmVzTW9kdWxlfSkpO2NvbnN0IFQ9W3MuQ2xpZW50U2lkZVJvd01vZGVsTW9kdWxlLHIuSW5maW5pdGVSb3dNb2RlbE1vZHVsZSxvLkNzdkV4cG9ydE1vZHVsZV0sRD1bbi5BZHZhbmNlZEZpbHRlck1vZHVsZSxhLkNsaXBib2FyZE1vZHVsZSxsLkNvbHVtbnNUb29sUGFuZWxNb2R1bGUsZC5FeGNlbEV4cG9ydE1vZHVsZSxjLkZpbHRlcnNUb29sUGFuZWxNb2R1bGUsaC5HcmlkQ2hhcnRzTW9kdWxlLHUuTWFzdGVyRGV0YWlsTW9kdWxlLHAuTWVudU1vZHVsZSxnLk11bHRpRmlsdGVyTW9kdWxlLG0uUmFuZ2VTZWxlY3Rpb25Nb2R1bGUsZi5SaWNoU2VsZWN0TW9kdWxlLHYuUm93R3JvdXBpbmdNb2R1bGUsQy5TZXJ2ZXJTaWRlUm93TW9kZWxNb2R1bGUseS5TZXRGaWx0ZXJNb2R1bGUsUy5TaWRlQmFyTW9kdWxlLHcuU3RhdHVzQmFyTW9kdWxlLGIuVmlld3BvcnRSb3dNb2RlbE1vZHVsZSxFLlNwYXJrbGluZXNNb2R1bGVdLE89VC5jb25jYXQoRCl9LGZ1bmN0aW9uKGUsdCxpKXt2YXIgcz1pKDUpLHI9KGkoMCksaSgyKSksbz1pKDYpLG49aSgxMiksYT1pKDIxKSxsPWkoOCksZD0oaSgzKSxpKDExKSksYz1pKDE4KSxoPWkoMTkpLHU9aSgxNykscD1pKDIwKSxnPWkoOSksbT1pKDIyKSxmPWkoNCksdj1pKDEzKSxDPWkoMTUpLHk9aSg3KSxTPWkoMTQpLHc9aSgxNiksYj1pKDIzKSxFPWkoMTApO2koMjQpO3ZhciBSPXt9LHg9aSgyNCk7T2JqZWN0LmtleXMoeCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXT14W2VdLFJbZV09eFtlXX0pKTt2YXIgVD1pKDI2KTtPYmplY3Qua2V5cyhUKS5mb3JFYWNoKChmdW5jdGlvbihlKXt0W2VdPVRbZV0sUltlXT1UW2VdfSkpLHQuYWdHcmlkPVIsdC5hZ0NoYXJ0cz14LmFnQ2hhcnRzLFQuTW9kdWxlUmVnaXN0cnkucmVnaXN0ZXIocy5DbGllbnRTaWRlUm93TW9kZWxNb2R1bGUpLFQuTW9kdWxlUmVnaXN0cnkucmVnaXN0ZXIoci5Dc3ZFeHBvcnRNb2R1bGUpLFQuTW9kdWxlUmVnaXN0cnkucmVnaXN0ZXIoby5JbmZpbml0ZVJvd01vZGVsTW9kdWxlKSxULk1vZHVsZVJlZ2lzdHJ5LnJlZ2lzdGVyKG4uQWR2YW5jZWRGaWx0ZXJNb2R1bGUpLFQuTW9kdWxlUmVnaXN0cnkucmVnaXN0ZXIoYS5DbGlwYm9hcmRNb2R1bGUpLFQuTW9kdWxlUmVnaXN0cnkucmVnaXN0ZXIobC5Db2x1bW5zVG9vbFBhbmVsTW9kdWxlKSxULk1vZHVsZVJlZ2lzdHJ5LnJlZ2lzdGVyKGQuRXhjZWxFeHBvcnRNb2R1bGUpLFQuTW9kdWxlUmVnaXN0cnkucmVnaXN0ZXIoYy5GaWx0ZXJzVG9vbFBhbmVsTW9kdWxlKSxULk1vZHVsZVJlZ2lzdHJ5LnJlZ2lzdGVyKGguTWFzdGVyRGV0YWlsTW9kdWxlKSxULk1vZHVsZVJlZ2lzdHJ5LnJlZ2lzdGVyKHUuTWVudU1vZHVsZSksVC5Nb2R1bGVSZWdpc3RyeS5yZWdpc3RlcihwLk11bHRpRmlsdGVyTW9kdWxlKSxULk1vZHVsZVJlZ2lzdHJ5LnJlZ2lzdGVyKGcuUmFuZ2VTZWxlY3Rpb25Nb2R1bGUpLFQuTW9kdWxlUmVnaXN0cnkucmVnaXN0ZXIobS5SaWNoU2VsZWN0TW9kdWxlKSxULk1vZHVsZVJlZ2lzdHJ5LnJlZ2lzdGVyKGYuUm93R3JvdXBpbmdNb2R1bGUpLFQuTW9kdWxlUmVnaXN0cnkucmVnaXN0ZXIodi5TZXJ2ZXJTaWRlUm93TW9kZWxNb2R1bGUpLFQuTW9kdWxlUmVnaXN0cnkucmVnaXN0ZXIoQy5TZXRGaWx0ZXJNb2R1bGUpLFQuTW9kdWxlUmVnaXN0cnkucmVnaXN0ZXIoeS5TaWRlQmFyTW9kdWxlKSxULk1vZHVsZVJlZ2lzdHJ5LnJlZ2lzdGVyKFMuU3BhcmtsaW5lc01vZHVsZSksVC5Nb2R1bGVSZWdpc3RyeS5yZWdpc3Rlcih3LlN0YXR1c0Jhck1vZHVsZSksVC5Nb2R1bGVSZWdpc3RyeS5yZWdpc3RlcihiLlZpZXdwb3J0Um93TW9kZWxNb2R1bGUpLFQuTW9kdWxlUmVnaXN0cnkucmVnaXN0ZXIoRS5HcmlkQ2hhcnRzTW9kdWxlKSxULk1vZHVsZVJlZ2lzdHJ5Ll9fc2V0SXNCdW5kbGVkKCl9LGZ1bmN0aW9uKGUsdCxpKXsidXNlIHN0cmljdCI7aS5yKHQpLGkuZCh0LCJBbGxDb21tdW5pdHlNb2R1bGVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gYX0pKTt2YXIgcz1pKDUpLHI9aSg2KSxvPWkoMik7aS5kKHQsIkNsaWVudFNpZGVSb3dNb2RlbE1vZHVsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHMuQ2xpZW50U2lkZVJvd01vZGVsTW9kdWxlfSkpLGkuZCh0LCJCYXNlQ3JlYXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uQmFzZUNyZWF0b3J9KSksaS5kKHQsIkJhc2VHcmlkU2VyaWFsaXppbmdTZXNzaW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gby5CYXNlR3JpZFNlcmlhbGl6aW5nU2Vzc2lvbn0pKSxpLmQodCwiQ3N2Q3JlYXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uQ3N2Q3JlYXRvcn0pKSxpLmQodCwiQ3N2RXhwb3J0TW9kdWxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gby5Dc3ZFeHBvcnRNb2R1bGV9KSksaS5kKHQsIkRvd25sb2FkZXIiLChmdW5jdGlvbigpe3JldHVybiBvLkRvd25sb2FkZXJ9KSksaS5kKHQsIkdyaWRTZXJpYWxpemVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gby5HcmlkU2VyaWFsaXplcn0pKSxpLmQodCwiUm93VHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uUm93VHlwZX0pKSxpLmQodCwiWG1sRmFjdG9yeSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uWG1sRmFjdG9yeX0pKSxpLmQodCwiWmlwQ29udGFpbmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gby5aaXBDb250YWluZXJ9KSksaS5kKHQsIkluZmluaXRlUm93TW9kZWxNb2R1bGUiLChmdW5jdGlvbigpe3JldHVybiByLkluZmluaXRlUm93TW9kZWxNb2R1bGV9KSk7dmFyIG49aSgwKTtpLmQodCwiQ29sdW1uRmFjdG9yeSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQ29sdW1uRmFjdG9yeX0pKSxpLmQodCwiQ29sdW1uTW9kZWwiLChmdW5jdGlvbigpe3JldHVybiBuLkNvbHVtbk1vZGVsfSkpLGkuZCh0LCJDb2x1bW5LZXlDcmVhdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Db2x1bW5LZXlDcmVhdG9yfSkpLGkuZCh0LCJDb2x1bW5VdGlscyIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQ29sdW1uVXRpbHN9KSksaS5kKHQsIkRpc3BsYXllZEdyb3VwQ3JlYXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uRGlzcGxheWVkR3JvdXBDcmVhdG9yfSkpLGkuZCh0LCJHcm91cEluc3RhbmNlSWRDcmVhdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Hcm91cEluc3RhbmNlSWRDcmVhdG9yfSkpLGkuZCh0LCJHUk9VUF9BVVRPX0NPTFVNTl9JRCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uR1JPVVBfQVVUT19DT0xVTU5fSUR9KSksaS5kKHQsIkNvbXBvbmVudFV0aWwiLChmdW5jdGlvbigpe3JldHVybiBuLkNvbXBvbmVudFV0aWx9KSksaS5kKHQsIkFnU3RhY2tDb21wb25lbnRzUmVnaXN0cnkiLChmdW5jdGlvbigpe3JldHVybiBuLkFnU3RhY2tDb21wb25lbnRzUmVnaXN0cnl9KSksaS5kKHQsIlVzZXJDb21wb25lbnRSZWdpc3RyeSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uVXNlckNvbXBvbmVudFJlZ2lzdHJ5fSkpLGkuZCh0LCJVc2VyQ29tcG9uZW50RmFjdG9yeSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uVXNlckNvbXBvbmVudEZhY3Rvcnl9KSksaS5kKHQsIkNvbERlZlV0aWwiLChmdW5jdGlvbigpe3JldHVybiBuLkNvbERlZlV0aWx9KSksaS5kKHQsIkJlYW5TdHViIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5CZWFuU3R1Yn0pKSxpLmQodCwiQ29udGV4dCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQ29udGV4dH0pKSxpLmQodCwiQXV0b3dpcmVkIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5BdXRvd2lyZWR9KSksaS5kKHQsIlBvc3RDb25zdHJ1Y3QiLChmdW5jdGlvbigpe3JldHVybiBuLlBvc3RDb25zdHJ1Y3R9KSksaS5kKHQsIlByZUNvbnN0cnVjdCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUHJlQ29uc3RydWN0fSkpLGkuZCh0LCJPcHRpb25hbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uT3B0aW9uYWx9KSksaS5kKHQsIkJlYW4iLChmdW5jdGlvbigpe3JldHVybiBuLkJlYW59KSksaS5kKHQsIlF1YWxpZmllciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUXVhbGlmaWVyfSkpLGkuZCh0LCJQcmVEZXN0cm95IiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5QcmVEZXN0cm95fSkpLGkuZCh0LCJRdWVyeVNlbGVjdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5RdWVyeVNlbGVjdG9yfSkpLGkuZCh0LCJSZWZTZWxlY3RvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUmVmU2VsZWN0b3J9KSksaS5kKHQsIkV4Y2VsRmFjdG9yeU1vZGUiLChmdW5jdGlvbigpe3JldHVybiBuLkV4Y2VsRmFjdG9yeU1vZGV9KSksaS5kKHQsIkRyYWdBbmREcm9wU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uRHJhZ0FuZERyb3BTZXJ2aWNlfSkpLGkuZCh0LCJEcmFnU291cmNlVHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uRHJhZ1NvdXJjZVR5cGV9KSksaS5kKHQsIkRyYWdTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5EcmFnU2VydmljZX0pKSxpLmQodCwiVmlydHVhbExpc3REcmFnRmVhdHVyZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uVmlydHVhbExpc3REcmFnRmVhdHVyZX0pKSxpLmQodCwiQ29sdW1uIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Db2x1bW59KSksaS5kKHQsIkNvbHVtbkdyb3VwIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Db2x1bW5Hcm91cH0pKSxpLmQodCwiUHJvdmlkZWRDb2x1bW5Hcm91cCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUHJvdmlkZWRDb2x1bW5Hcm91cH0pKSxpLmQodCwiUm93Tm9kZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUm93Tm9kZX0pKSxpLmQodCwiUm93SGlnaGxpZ2h0UG9zaXRpb24iLChmdW5jdGlvbigpe3JldHVybiBuLlJvd0hpZ2hsaWdodFBvc2l0aW9ufSkpLGkuZCh0LCJGaWx0ZXJNYW5hZ2VyIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5GaWx0ZXJNYW5hZ2VyfSkpLGkuZCh0LCJQcm92aWRlZEZpbHRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUHJvdmlkZWRGaWx0ZXJ9KSksaS5kKHQsIlNpbXBsZUZpbHRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uU2ltcGxlRmlsdGVyfSkpLGkuZCh0LCJTY2FsYXJGaWx0ZXIiLChmdW5jdGlvbigpe3JldHVybiBuLlNjYWxhckZpbHRlcn0pKSxpLmQodCwiTnVtYmVyRmlsdGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5OdW1iZXJGaWx0ZXJ9KSksaS5kKHQsIlRleHRGaWx0ZXIiLChmdW5jdGlvbigpe3JldHVybiBuLlRleHRGaWx0ZXJ9KSksaS5kKHQsIkRhdGVGaWx0ZXIiLChmdW5jdGlvbigpe3JldHVybiBuLkRhdGVGaWx0ZXJ9KSksaS5kKHQsIlRleHRGbG9hdGluZ0ZpbHRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uVGV4dEZsb2F0aW5nRmlsdGVyfSkpLGkuZCh0LCJIZWFkZXJGaWx0ZXJDZWxsQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uSGVhZGVyRmlsdGVyQ2VsbENvbXB9KSksaS5kKHQsIkZsb2F0aW5nRmlsdGVyTWFwcGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5GbG9hdGluZ0ZpbHRlck1hcHBlcn0pKSxpLmQodCwiR3JpZEJvZHlDb21wIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5HcmlkQm9keUNvbXB9KSksaS5kKHQsIkdyaWRCb2R5Q3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uR3JpZEJvZHlDdHJsfSkpLGkuZCh0LCJSb3dBbmltYXRpb25Dc3NDbGFzc2VzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Sb3dBbmltYXRpb25Dc3NDbGFzc2VzfSkpLGkuZCh0LCJTY3JvbGxWaXNpYmxlU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uU2Nyb2xsVmlzaWJsZVNlcnZpY2V9KSksaS5kKHQsIk1vdXNlRXZlbnRTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Nb3VzZUV2ZW50U2VydmljZX0pKSxpLmQodCwiTmF2aWdhdGlvblNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBuLk5hdmlnYXRpb25TZXJ2aWNlfSkpLGkuZCh0LCJSb3dDb250YWluZXJDb21wIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Sb3dDb250YWluZXJDb21wfSkpLGkuZCh0LCJSb3dDb250YWluZXJOYW1lIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Sb3dDb250YWluZXJOYW1lfSkpLGkuZCh0LCJSb3dDb250YWluZXJDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Sb3dDb250YWluZXJDdHJsfSkpLGkuZCh0LCJSb3dDb250YWluZXJUeXBlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Sb3dDb250YWluZXJUeXBlfSkpLGkuZCh0LCJnZXRSb3dDb250YWluZXJUeXBlRm9yTmFtZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0Um93Q29udGFpbmVyVHlwZUZvck5hbWV9KSksaS5kKHQsIkJvZHlEcm9wUGl2b3RUYXJnZXQiLChmdW5jdGlvbigpe3JldHVybiBuLkJvZHlEcm9wUGl2b3RUYXJnZXR9KSksaS5kKHQsIkJvZHlEcm9wVGFyZ2V0IiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Cb2R5RHJvcFRhcmdldH0pKSxpLmQodCwiQ3NzQ2xhc3NBcHBsaWVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Dc3NDbGFzc0FwcGxpZXJ9KSksaS5kKHQsIkhlYWRlclJvd0NvbnRhaW5lckNvbXAiLChmdW5jdGlvbigpe3JldHVybiBuLkhlYWRlclJvd0NvbnRhaW5lckNvbXB9KSksaS5kKHQsIkdyaWRIZWFkZXJDb21wIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5HcmlkSGVhZGVyQ29tcH0pKSxpLmQodCwiR3JpZEhlYWRlckN0cmwiLChmdW5jdGlvbigpe3JldHVybiBuLkdyaWRIZWFkZXJDdHJsfSkpLGkuZCh0LCJIZWFkZXJSb3dDb21wIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5IZWFkZXJSb3dDb21wfSkpLGkuZCh0LCJIZWFkZXJSb3dUeXBlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5IZWFkZXJSb3dUeXBlfSkpLGkuZCh0LCJIZWFkZXJSb3dDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5IZWFkZXJSb3dDdHJsfSkpLGkuZCh0LCJIZWFkZXJDZWxsQ3RybCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uSGVhZGVyQ2VsbEN0cmx9KSksaS5kKHQsIlNvcnRJbmRpY2F0b3JDb21wIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Tb3J0SW5kaWNhdG9yQ29tcH0pKSxpLmQodCwiSGVhZGVyRmlsdGVyQ2VsbEN0cmwiLChmdW5jdGlvbigpe3JldHVybiBuLkhlYWRlckZpbHRlckNlbGxDdHJsfSkpLGkuZCh0LCJIZWFkZXJHcm91cENlbGxDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5IZWFkZXJHcm91cENlbGxDdHJsfSkpLGkuZCh0LCJBYnN0cmFjdEhlYWRlckNlbGxDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5BYnN0cmFjdEhlYWRlckNlbGxDdHJsfSkpLGkuZCh0LCJIZWFkZXJSb3dDb250YWluZXJDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5IZWFkZXJSb3dDb250YWluZXJDdHJsfSkpLGkuZCh0LCJIb3Jpem9udGFsUmVzaXplU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uSG9yaXpvbnRhbFJlc2l6ZVNlcnZpY2V9KSksaS5kKHQsIk1vdmVDb2x1bW5GZWF0dXJlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Nb3ZlQ29sdW1uRmVhdHVyZX0pKSxpLmQodCwiU3RhbmRhcmRNZW51RmFjdG9yeSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uU3RhbmRhcmRNZW51RmFjdG9yeX0pKSxpLmQodCwiVGFiYmVkTGF5b3V0IiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5UYWJiZWRMYXlvdXR9KSksaS5kKHQsIlJlc2l6ZU9ic2VydmVyU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUmVzaXplT2JzZXJ2ZXJTZXJ2aWNlfSkpLGkuZCh0LCJBbmltYXRpb25GcmFtZVNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBuLkFuaW1hdGlvbkZyYW1lU2VydmljZX0pKSxpLmQodCwiRXhwYW5zaW9uU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uRXhwYW5zaW9uU2VydmljZX0pKSxpLmQodCwiTWVudVNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBuLk1lbnVTZXJ2aWNlfSkpLGkuZCh0LCJMYXJnZVRleHRDZWxsRWRpdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5MYXJnZVRleHRDZWxsRWRpdG9yfSkpLGkuZCh0LCJQb3B1cEVkaXRvcldyYXBwZXIiLChmdW5jdGlvbigpe3JldHVybiBuLlBvcHVwRWRpdG9yV3JhcHBlcn0pKSxpLmQodCwiU2VsZWN0Q2VsbEVkaXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uU2VsZWN0Q2VsbEVkaXRvcn0pKSxpLmQodCwiVGV4dENlbGxFZGl0b3IiLChmdW5jdGlvbigpe3JldHVybiBuLlRleHRDZWxsRWRpdG9yfSkpLGkuZCh0LCJOdW1iZXJDZWxsRWRpdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5OdW1iZXJDZWxsRWRpdG9yfSkpLGkuZCh0LCJEYXRlQ2VsbEVkaXRvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uRGF0ZUNlbGxFZGl0b3J9KSksaS5kKHQsIkRhdGVTdHJpbmdDZWxsRWRpdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5EYXRlU3RyaW5nQ2VsbEVkaXRvcn0pKSxpLmQodCwiQ2hlY2tib3hDZWxsRWRpdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5DaGVja2JveENlbGxFZGl0b3J9KSksaS5kKHQsIkJlYW5zIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5CZWFuc30pKSxpLmQodCwiQW5pbWF0ZVNob3dDaGFuZ2VDZWxsUmVuZGVyZXIiLChmdW5jdGlvbigpe3JldHVybiBuLkFuaW1hdGVTaG93Q2hhbmdlQ2VsbFJlbmRlcmVyfSkpLGkuZCh0LCJBbmltYXRlU2xpZGVDZWxsUmVuZGVyZXIiLChmdW5jdGlvbigpe3JldHVybiBuLkFuaW1hdGVTbGlkZUNlbGxSZW5kZXJlcn0pKSxpLmQodCwiR3JvdXBDZWxsUmVuZGVyZXIiLChmdW5jdGlvbigpe3JldHVybiBuLkdyb3VwQ2VsbFJlbmRlcmVyfSkpLGkuZCh0LCJHcm91cENlbGxSZW5kZXJlckN0cmwiLChmdW5jdGlvbigpe3JldHVybiBuLkdyb3VwQ2VsbFJlbmRlcmVyQ3RybH0pKSxpLmQodCwiU2V0TGVmdEZlYXR1cmUiLChmdW5jdGlvbigpe3JldHVybiBuLlNldExlZnRGZWF0dXJlfSkpLGkuZCh0LCJQb3NpdGlvbmFibGVGZWF0dXJlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Qb3NpdGlvbmFibGVGZWF0dXJlfSkpLGkuZCh0LCJBdXRvV2lkdGhDYWxjdWxhdG9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5BdXRvV2lkdGhDYWxjdWxhdG9yfSkpLGkuZCh0LCJDaGVja2JveFNlbGVjdGlvbkNvbXBvbmVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQ2hlY2tib3hTZWxlY3Rpb25Db21wb25lbnR9KSksaS5kKHQsIkNlbGxDb21wIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5DZWxsQ29tcH0pKSxpLmQodCwiQ2VsbEN0cmwiLChmdW5jdGlvbigpe3JldHVybiBuLkNlbGxDdHJsfSkpLGkuZCh0LCJSb3dDdHJsIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Sb3dDdHJsfSkpLGkuZCh0LCJSb3dSZW5kZXJlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUm93UmVuZGVyZXJ9KSksaS5kKHQsIlZhbHVlRm9ybWF0dGVyU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uVmFsdWVGb3JtYXR0ZXJTZXJ2aWNlfSkpLGkuZCh0LCJDc3NDbGFzc01hbmFnZXIiLChmdW5jdGlvbigpe3JldHVybiBuLkNzc0NsYXNzTWFuYWdlcn0pKSxpLmQodCwiQ2hlY2tib3hDZWxsUmVuZGVyZXIiLChmdW5jdGlvbigpe3JldHVybiBuLkNoZWNrYm94Q2VsbFJlbmRlcmVyfSkpLGkuZCh0LCJQaW5uZWRSb3dNb2RlbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUGlubmVkUm93TW9kZWx9KSksaS5kKHQsIlNlcnZlclNpZGVUcmFuc2FjdGlvblJlc3VsdFN0YXR1cyIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uU2VydmVyU2lkZVRyYW5zYWN0aW9uUmVzdWx0U3RhdHVzfSkpLGkuZCh0LCJDaGFuZ2VkUGF0aCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQ2hhbmdlZFBhdGh9KSksaS5kKHQsIlJvd05vZGVCbG9jayIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUm93Tm9kZUJsb2NrfSkpLGkuZCh0LCJSb3dOb2RlQmxvY2tMb2FkZXIiLChmdW5jdGlvbigpe3JldHVybiBuLlJvd05vZGVCbG9ja0xvYWRlcn0pKSxpLmQodCwiUGFnaW5hdGlvblByb3h5IiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5QYWdpbmF0aW9uUHJveHl9KSksaS5kKHQsIkNsaWVudFNpZGVSb3dNb2RlbFN0ZXBzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5DbGllbnRTaWRlUm93TW9kZWxTdGVwc30pKSxpLmQodCwiU3R5bGluZ1NlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBuLlN0eWxpbmdTZXJ2aWNlfSkpLGkuZCh0LCJMYXlvdXRDc3NDbGFzc2VzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5MYXlvdXRDc3NDbGFzc2VzfSkpLGkuZCh0LCJBZ0Fic3RyYWN0RmllbGQiLChmdW5jdGlvbigpe3JldHVybiBuLkFnQWJzdHJhY3RGaWVsZH0pKSxpLmQodCwiQWdDaGVja2JveCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQWdDaGVja2JveH0pKSxpLmQodCwiQWdSYWRpb0J1dHRvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQWdSYWRpb0J1dHRvbn0pKSxpLmQodCwiQWdUb2dnbGVCdXR0b24iLChmdW5jdGlvbigpe3JldHVybiBuLkFnVG9nZ2xlQnV0dG9ufSkpLGkuZCh0LCJBZ0lucHV0VGV4dEZpZWxkIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5BZ0lucHV0VGV4dEZpZWxkfSkpLGkuZCh0LCJBZ0lucHV0VGV4dEFyZWEiLChmdW5jdGlvbigpe3JldHVybiBuLkFnSW5wdXRUZXh0QXJlYX0pKSxpLmQodCwiQWdJbnB1dE51bWJlckZpZWxkIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5BZ0lucHV0TnVtYmVyRmllbGR9KSksaS5kKHQsIkFnSW5wdXREYXRlRmllbGQiLChmdW5jdGlvbigpe3JldHVybiBuLkFnSW5wdXREYXRlRmllbGR9KSksaS5kKHQsIkFnSW5wdXRSYW5nZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQWdJbnB1dFJhbmdlfSkpLGkuZCh0LCJBZ1JpY2hTZWxlY3QiLChmdW5jdGlvbigpe3JldHVybiBuLkFnUmljaFNlbGVjdH0pKSxpLmQodCwiQWdTZWxlY3QiLChmdW5jdGlvbigpe3JldHVybiBuLkFnU2VsZWN0fSkpLGkuZCh0LCJBZ1NsaWRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQWdTbGlkZXJ9KSksaS5kKHQsIkFnR3JvdXBDb21wb25lbnQiLChmdW5jdGlvbigpe3JldHVybiBuLkFnR3JvdXBDb21wb25lbnR9KSksaS5kKHQsIkFnTWVudUl0ZW1SZW5kZXJlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQWdNZW51SXRlbVJlbmRlcmVyfSkpLGkuZCh0LCJBZ01lbnVJdGVtQ29tcG9uZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5BZ01lbnVJdGVtQ29tcG9uZW50fSkpLGkuZCh0LCJBZ01lbnVMaXN0IiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5BZ01lbnVMaXN0fSkpLGkuZCh0LCJBZ01lbnVQYW5lbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQWdNZW51UGFuZWx9KSksaS5kKHQsIkFnRGlhbG9nIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5BZ0RpYWxvZ30pKSxpLmQodCwiQWdQYW5lbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQWdQYW5lbH0pKSxpLmQodCwiQ29tcG9uZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Db21wb25lbnR9KSksaS5kKHQsIk1hbmFnZWRGb2N1c0ZlYXR1cmUiLChmdW5jdGlvbigpe3JldHVybiBuLk1hbmFnZWRGb2N1c0ZlYXR1cmV9KSksaS5kKHQsIlRhYkd1YXJkQ29tcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uVGFiR3VhcmRDb21wfSkpLGkuZCh0LCJUYWJHdWFyZEN0cmwiLChmdW5jdGlvbigpe3JldHVybiBuLlRhYkd1YXJkQ3RybH0pKSxpLmQodCwiVGFiR3VhcmRDbGFzc05hbWVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5UYWJHdWFyZENsYXNzTmFtZXN9KSksaS5kKHQsIlBvcHVwQ29tcG9uZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Qb3B1cENvbXBvbmVudH0pKSxpLmQodCwiUG9wdXBTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Qb3B1cFNlcnZpY2V9KSksaS5kKHQsIlRvdWNoTGlzdGVuZXIiLChmdW5jdGlvbigpe3JldHVybiBuLlRvdWNoTGlzdGVuZXJ9KSksaS5kKHQsIlZpcnR1YWxMaXN0IiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5WaXJ0dWFsTGlzdH0pKSxpLmQodCwiQWdBYnN0cmFjdExhYmVsIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5BZ0Fic3RyYWN0TGFiZWx9KSksaS5kKHQsIkFnUGlja2VyRmllbGQiLChmdW5jdGlvbigpe3JldHVybiBuLkFnUGlja2VyRmllbGR9KSksaS5kKHQsIkFnQXV0b2NvbXBsZXRlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5BZ0F1dG9jb21wbGV0ZX0pKSxpLmQodCwiQ2VsbFJhbmdlVHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQ2VsbFJhbmdlVHlwZX0pKSxpLmQodCwiU2VsZWN0aW9uSGFuZGxlVHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uU2VsZWN0aW9uSGFuZGxlVHlwZX0pKSxpLmQodCwiQXV0b1Njcm9sbFNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBuLkF1dG9TY3JvbGxTZXJ2aWNlfSkpLGkuZCh0LCJWYW5pbGxhRnJhbWV3b3JrT3ZlcnJpZGVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5WYW5pbGxhRnJhbWV3b3JrT3ZlcnJpZGVzfSkpLGkuZCh0LCJDZWxsTmF2aWdhdGlvblNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBuLkNlbGxOYXZpZ2F0aW9uU2VydmljZX0pKSxpLmQodCwiQWxpZ25lZEdyaWRzU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQWxpZ25lZEdyaWRzU2VydmljZX0pKSxpLmQodCwiS2V5Q29kZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uS2V5Q29kZX0pKSxpLmQodCwiVmVydGljYWxEaXJlY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBuLlZlcnRpY2FsRGlyZWN0aW9ufSkpLGkuZCh0LCJIb3Jpem9udGFsRGlyZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Ib3Jpem9udGFsRGlyZWN0aW9ufSkpLGkuZCh0LCJHcmlkIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5HcmlkfSkpLGkuZCh0LCJHcmlkQ29yZUNyZWF0b3IiLChmdW5jdGlvbigpe3JldHVybiBuLkdyaWRDb3JlQ3JlYXRvcn0pKSxpLmQodCwiY3JlYXRlR3JpZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY3JlYXRlR3JpZH0pKSxpLmQodCwiR3JpZEFwaSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uR3JpZEFwaX0pKSxpLmQodCwiRXZlbnRzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5FdmVudHN9KSksaS5kKHQsIkZvY3VzU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uRm9jdXNTZXJ2aWNlfSkpLGkuZCh0LCJHcmlkT3B0aW9uc1NlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBuLkdyaWRPcHRpb25zU2VydmljZX0pKSxpLmQodCwiRXZlbnRTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5FdmVudFNlcnZpY2V9KSksaS5kKHQsIlNlbGVjdGFibGVTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5TZWxlY3RhYmxlU2VydmljZX0pKSxpLmQodCwiUm93Tm9kZVNvcnRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUm93Tm9kZVNvcnRlcn0pKSxpLmQodCwiQ3RybHNTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5DdHJsc1NlcnZpY2V9KSksaS5kKHQsIkdyaWRDb21wIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5HcmlkQ29tcH0pKSxpLmQodCwiR3JpZEN0cmwiLChmdW5jdGlvbigpe3JldHVybiBuLkdyaWRDdHJsfSkpLGkuZCh0LCJMb2dnZXIiLChmdW5jdGlvbigpe3JldHVybiBuLkxvZ2dlcn0pKSxpLmQodCwiTG9nZ2VyRmFjdG9yeSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uTG9nZ2VyRmFjdG9yeX0pKSxpLmQodCwiU29ydENvbnRyb2xsZXIiLChmdW5jdGlvbigpe3JldHVybiBuLlNvcnRDb250cm9sbGVyfSkpLGkuZCh0LCJUZW1wbGF0ZVNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBuLlRlbXBsYXRlU2VydmljZX0pKSxpLmQodCwiTG9jYWxlU2VydmljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uTG9jYWxlU2VydmljZX0pKSxpLmQodCwiVmFsdWVTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5WYWx1ZVNlcnZpY2V9KSksaS5kKHQsIlZhbHVlQ2FjaGUiLChmdW5jdGlvbigpe3JldHVybiBuLlZhbHVlQ2FjaGV9KSksaS5kKHQsIkV4cHJlc3Npb25TZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5FeHByZXNzaW9uU2VydmljZX0pKSxpLmQodCwiVmFsdWVQYXJzZXJTZXJ2aWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5WYWx1ZVBhcnNlclNlcnZpY2V9KSksaS5kKHQsIkNlbGxQb3NpdGlvblV0aWxzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5DZWxsUG9zaXRpb25VdGlsc30pKSxpLmQodCwiUm93UG9zaXRpb25VdGlscyIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uUm93UG9zaXRpb25VdGlsc30pKSxpLmQodCwiSGVhZGVyUG9zaXRpb25VdGlscyIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uSGVhZGVyUG9zaXRpb25VdGlsc30pKSxpLmQodCwiSGVhZGVyTmF2aWdhdGlvblNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBuLkhlYWRlck5hdmlnYXRpb25TZXJ2aWNlfSkpLGkuZCh0LCJIZWFkZXJOYXZpZ2F0aW9uRGlyZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5IZWFkZXJOYXZpZ2F0aW9uRGlyZWN0aW9ufSkpLGkuZCh0LCJEYXRhVHlwZVNlcnZpY2UiLChmdW5jdGlvbigpe3JldHVybiBuLkRhdGFUeXBlU2VydmljZX0pKSxpLmQodCwiUHJvcGVydHlLZXlzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Qcm9wZXJ0eUtleXN9KSksaS5kKHQsIkNvbHVtbkFwaSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQ29sdW1uQXBpfSkpLGkuZCh0LCJCYXNlQ29tcG9uZW50V3JhcHBlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQmFzZUNvbXBvbmVudFdyYXBwZXJ9KSksaS5kKHQsIkVudmlyb25tZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5FbnZpcm9ubWVudH0pKSxpLmQodCwiVG9vbHRpcEZlYXR1cmUiLChmdW5jdGlvbigpe3JldHVybiBuLlRvb2x0aXBGZWF0dXJlfSkpLGkuZCh0LCJDdXN0b21Ub29sdGlwRmVhdHVyZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQ3VzdG9tVG9vbHRpcEZlYXR1cmV9KSksaS5kKHQsIk1vZHVsZU5hbWVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5Nb2R1bGVOYW1lc30pKSxpLmQodCwiTW9kdWxlUmVnaXN0cnkiLChmdW5jdGlvbigpe3JldHVybiBuLk1vZHVsZVJlZ2lzdHJ5fSkpLGkuZCh0LCJERUZBVUxUX0NIQVJUX0dST1VQUyIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uREVGQVVMVF9DSEFSVF9HUk9VUFN9KSksaS5kKHQsIkNIQVJUX1RPT0xfUEFORUxfQUxMT1dfTElTVCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQ0hBUlRfVE9PTF9QQU5FTF9BTExPV19MSVNUfSkpLGkuZCh0LCJDSEFSVF9UT09MQkFSX0FMTE9XX0xJU1QiLChmdW5jdGlvbigpe3JldHVybiBuLkNIQVJUX1RPT0xCQVJfQUxMT1dfTElTVH0pKSxpLmQodCwiQ0hBUlRfVE9PTF9QQU5FTF9NRU5VX09QVElPTlMiLChmdW5jdGlvbigpe3JldHVybiBuLkNIQVJUX1RPT0xfUEFORUxfTUVOVV9PUFRJT05TfSkpLGkuZCh0LCJfX0ZPUkNFX01PRFVMRV9ERVRFQ1RJT04iLChmdW5jdGlvbigpe3JldHVybiBuLl9fRk9SQ0VfTU9EVUxFX0RFVEVDVElPTn0pKSxpLmQodCwiQmFyQ29sdW1uTGFiZWxQbGFjZW1lbnQiLChmdW5jdGlvbigpe3JldHVybiBuLkJhckNvbHVtbkxhYmVsUGxhY2VtZW50fSkpLGkuZCh0LCJfIiwoZnVuY3Rpb24oKXtyZXR1cm4gbi5ffSkpLGkuZCh0LCJOdW1iZXJTZXF1ZW5jZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uTnVtYmVyU2VxdWVuY2V9KSksaS5kKHQsIkFnUHJvbWlzZVN0YXR1cyIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4uQWdQcm9taXNlU3RhdHVzfSkpLGkuZCh0LCJBZ1Byb21pc2UiLChmdW5jdGlvbigpe3JldHVybiBuLkFnUHJvbWlzZX0pKSxpLmQodCwiVGltZXIiLChmdW5jdGlvbigpe3JldHVybiBuLlRpbWVyfSkpO3ZhciBhPVtzLkNsaWVudFNpZGVSb3dNb2RlbE1vZHVsZSxyLkluZmluaXRlUm93TW9kZWxNb2R1bGUsby5Dc3ZFeHBvcnRNb2R1bGVdfV0pfSkpOw==">
  </script>

</head>

<body style="padding:0;">
  <div id="myGrid" class="ag-theme-quartz-dark" style="height: 100%">
    <input style="position:absolute;z-index:10;left:10px;bottom:7px;height:26px;border:1px solid #aaaaaa66; padding:2px;"
      type="text" id="filter-text-box" placeholder="Filter..." oninput="onFilterTextBoxChanged()">

  </div>
</body>
<script>

  var _col = [{"field": "rank"}, {"field": "finalWorth"}, {"field": "category"}, {"field": "personName"}, {"field": "age"}, {"field": "country"}, {"field": "city"}, {"field": "source"}, {"field": "industries"}, {"field": "countryOfCitizenship"}, {"field": "organization"}, {"field": "selfMade"}, {"field": "status"}, {"field": "gender"}, {"field": "birthDate"}, {"field": "lastName"}, {"field": "firstName"}, {"field": "title"}, {"field": "date"}, {"field": "state"}, {"field": "residenceStateRegion"}, {"field": "birthYear"}, {"field": "birthMonth"}, {"field": "birthDay"}, {"field": "cpi_country"}, {"field": "cpi_change_country"}, {"field": "gdp_country"}, {"field": "gross_tertiary_education_enrollment"}, {"field": "gross_primary_education_enrollment_country"}, {"field": "life_expectancy_country"}, {"field": "tax_revenue_country_country"}, {"field": "total_tax_rate_country"}, {"field": "population_country"}, {"field": "latitude_country"}, {"field": "longitude_country"}];

  var _data = [{"rank":1,"finalWorth":211000,"category":"Fashion & Retail","personName":"Bernard Arnault & family","age":74.0,"country":"France","city":"Paris","source":"LVMH","industries":"Fashion & Retail","countryOfCitizenship":"France","organization":"LVMH Mo\u00ebt Hennessy Louis Vuitton","selfMade":false,"status":"U","gender":"M","birthDate":"3\/5\/1949 0:00","lastName":"Arnault","firstName":"Bernard","title":"Chairman and CEO","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1949.0,"birthMonth":3.0,"birthDay":5.0,"cpi_country":110.05,"cpi_change_country":1.1,"gdp_country":"$2,715,518,274,227 ","gross_tertiary_education_enrollment":65.6,"gross_primary_education_enrollment_country":102.5,"life_expectancy_country":82.5,"tax_revenue_country_country":24.2,"total_tax_rate_country":60.7,"population_country":67059887.0,"latitude_country":46.227638,"longitude_country":2.213749},{"rank":2,"finalWorth":180000,"category":"Automotive","personName":"Elon Musk","age":51.0,"country":"United States","city":"Austin","source":"Tesla, SpaceX","industries":"Automotive","countryOfCitizenship":"United States","organization":"Tesla","selfMade":true,"status":"D","gender":"M","birthDate":"6\/28\/1971 0:00","lastName":"Musk","firstName":"Elon","title":"CEO","date":"4\/4\/2023 5:01","state":"Texas","residenceStateRegion":"South","birthYear":1971.0,"birthMonth":6.0,"birthDay":28.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":3,"finalWorth":114000,"category":"Technology","personName":"Jeff Bezos","age":59.0,"country":"United States","city":"Medina","source":"Amazon","industries":"Technology","countryOfCitizenship":"United States","organization":"Amazon","selfMade":true,"status":"D","gender":"M","birthDate":"1\/12\/1964 0:00","lastName":"Bezos","firstName":"Jeff","title":"Chairman and Founder","date":"4\/4\/2023 5:01","state":"Washington","residenceStateRegion":"West","birthYear":1964.0,"birthMonth":1.0,"birthDay":12.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":4,"finalWorth":107000,"category":"Technology","personName":"Larry Ellison","age":78.0,"country":"United States","city":"Lanai","source":"Oracle","industries":"Technology","countryOfCitizenship":"United States","organization":"Oracle","selfMade":true,"status":"U","gender":"M","birthDate":"8\/17\/1944 0:00","lastName":"Ellison","firstName":"Larry","title":"CTO and Founder","date":"4\/4\/2023 5:01","state":"Hawaii","residenceStateRegion":"West","birthYear":1944.0,"birthMonth":8.0,"birthDay":17.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":5,"finalWorth":106000,"category":"Finance & Investments","personName":"Warren Buffett","age":92.0,"country":"United States","city":"Omaha","source":"Berkshire Hathaway","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":"Berkshire Hathaway Inc. (Cl A)","selfMade":true,"status":"D","gender":"M","birthDate":"8\/30\/1930 0:00","lastName":"Buffett","firstName":"Warren","title":"CEO","date":"4\/4\/2023 5:01","state":"Nebraska","residenceStateRegion":"Midwest","birthYear":1930.0,"birthMonth":8.0,"birthDay":30.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":6,"finalWorth":104000,"category":"Technology","personName":"Bill Gates","age":67.0,"country":"United States","city":"Medina","source":"Microsoft","industries":"Technology","countryOfCitizenship":"United States","organization":"Bill & Melinda Gates Foundation","selfMade":true,"status":"D","gender":"M","birthDate":"10\/28\/1955 0:00","lastName":"Gates","firstName":"Bill","title":"Cochair","date":"4\/4\/2023 5:01","state":"Washington","residenceStateRegion":"West","birthYear":1955.0,"birthMonth":10.0,"birthDay":28.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":7,"finalWorth":94500,"category":"Media & Entertainment","personName":"Michael Bloomberg","age":81.0,"country":"United States","city":"New York","source":"Bloomberg LP","industries":"Media & Entertainment","countryOfCitizenship":"United States","organization":"Bloomberg","selfMade":true,"status":"U","gender":"M","birthDate":"2\/14\/1942 0:00","lastName":"Bloomberg","firstName":"Michael","title":"CEO","date":"4\/4\/2023 5:01","state":"New York","residenceStateRegion":"Northeast","birthYear":1942.0,"birthMonth":2.0,"birthDay":14.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":8,"finalWorth":93000,"category":"Telecom","personName":"Carlos Slim Helu & family","age":83.0,"country":"Mexico","city":"Mexico City","source":"Telecom","industries":"Telecom","countryOfCitizenship":"Mexico","organization":"Am\u00e9rica M\u00f3vil","selfMade":true,"status":"U","gender":"M","birthDate":"1\/28\/1940 0:00","lastName":"Slim Helu","firstName":"Carlos","title":"Honorary Chairman","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1940.0,"birthMonth":1.0,"birthDay":28.0,"cpi_country":141.54,"cpi_change_country":3.6,"gdp_country":"$1,258,286,717,125 ","gross_tertiary_education_enrollment":40.2,"gross_primary_education_enrollment_country":105.8,"life_expectancy_country":75.0,"tax_revenue_country_country":13.1,"total_tax_rate_country":55.1,"population_country":126014024.0,"latitude_country":23.634501,"longitude_country":-102.552784},{"rank":9,"finalWorth":83400,"category":"Diversified","personName":"Mukesh Ambani","age":65.0,"country":"India","city":"Mumbai","source":"Diversified","industries":"Diversified","countryOfCitizenship":"India","organization":"Reliance Industries","selfMade":false,"status":"D","gender":"M","birthDate":"4\/19\/1957 0:00","lastName":"Ambani","firstName":"Mukesh","title":"Founder and Chairman","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1957.0,"birthMonth":4.0,"birthDay":19.0,"cpi_country":180.44,"cpi_change_country":7.7,"gdp_country":"$2,611,000,000,000 ","gross_tertiary_education_enrollment":28.1,"gross_primary_education_enrollment_country":113.0,"life_expectancy_country":69.4,"tax_revenue_country_country":11.2,"total_tax_rate_country":49.7,"population_country":1366417754.0,"latitude_country":20.593684,"longitude_country":78.96288},{"rank":10,"finalWorth":80700,"category":"Technology","personName":"Steve Ballmer","age":67.0,"country":"United States","city":"Hunts Point","source":"Microsoft","industries":"Technology","countryOfCitizenship":"United States","organization":"Los Angeles Clippers","selfMade":true,"status":"D","gender":"M","birthDate":"3\/24\/1956 0:00","lastName":"Ballmer","firstName":"Steve","title":"Owner","date":"4\/4\/2023 5:01","state":"Washington","residenceStateRegion":"West","birthYear":1956.0,"birthMonth":3.0,"birthDay":24.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":11,"finalWorth":80500,"category":"Fashion & Retail","personName":"Francoise Bettencourt Meyers & family","age":69.0,"country":"France","city":"Paris","source":"L'Or\u00e9al","industries":"Fashion & Retail","countryOfCitizenship":"France","organization":null,"selfMade":false,"status":"U","gender":"F","birthDate":"7\/10\/1953 0:00","lastName":"Bettencourt Meyers","firstName":"Francoise","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1953.0,"birthMonth":7.0,"birthDay":10.0,"cpi_country":110.05,"cpi_change_country":1.1,"gdp_country":"$2,715,518,274,227 ","gross_tertiary_education_enrollment":65.6,"gross_primary_education_enrollment_country":102.5,"life_expectancy_country":82.5,"tax_revenue_country_country":24.2,"total_tax_rate_country":60.7,"population_country":67059887.0,"latitude_country":46.227638,"longitude_country":2.213749},{"rank":12,"finalWorth":79200,"category":"Technology","personName":"Larry Page","age":50.0,"country":"United States","city":"Palo Alto","source":"Google","industries":"Technology","countryOfCitizenship":"United States","organization":"Alphabet","selfMade":true,"status":"D","gender":"M","birthDate":"3\/26\/1973 0:00","lastName":"Page","firstName":"Larry","title":"Cofounder and board member","date":"4\/4\/2023 5:01","state":"California","residenceStateRegion":"West","birthYear":1973.0,"birthMonth":3.0,"birthDay":26.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":13,"finalWorth":77300,"category":"Fashion & Retail","personName":"Amancio Ortega","age":87.0,"country":"Spain","city":"La Coruna","source":"Zara","industries":"Fashion & Retail","countryOfCitizenship":"Spain","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"3\/28\/1936 0:00","lastName":"Ortega","firstName":"Amancio","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1936.0,"birthMonth":3.0,"birthDay":28.0,"cpi_country":110.96,"cpi_change_country":0.7,"gdp_country":"$1,394,116,310,769 ","gross_tertiary_education_enrollment":88.9,"gross_primary_education_enrollment_country":102.7,"life_expectancy_country":83.3,"tax_revenue_country_country":14.2,"total_tax_rate_country":47.0,"population_country":47076781.0,"latitude_country":40.463667,"longitude_country":-3.74922},{"rank":14,"finalWorth":76000,"category":"Technology","personName":"Sergey Brin","age":49.0,"country":"United States","city":"Los Altos","source":"Google","industries":"Technology","countryOfCitizenship":"United States","organization":"Alphabet","selfMade":true,"status":"D","gender":"M","birthDate":"8\/21\/1973 0:00","lastName":"Brin","firstName":"Sergey","title":"Cofounder and board member","date":"4\/4\/2023 5:01","state":"California","residenceStateRegion":"West","birthYear":1973.0,"birthMonth":8.0,"birthDay":21.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":15,"finalWorth":68000,"category":"Food & Beverage","personName":"Zhong Shanshan","age":68.0,"country":"China","city":"Hangzhou","source":"Beverages, pharmaceuticals","industries":"Food & Beverage","countryOfCitizenship":"China","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"12\/1\/1954 0:00","lastName":"Zhong","firstName":"Shanshan","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1954.0,"birthMonth":12.0,"birthDay":1.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":16,"finalWorth":64400,"category":"Technology","personName":"Mark Zuckerberg","age":38.0,"country":"United States","city":"Palo Alto","source":"Facebook","industries":"Technology","countryOfCitizenship":"United States","organization":"Meta Platforms","selfMade":true,"status":"D","gender":"M","birthDate":"5\/14\/1984 0:00","lastName":"Zuckerberg","firstName":"Mark","title":"Cofounder","date":"4\/4\/2023 5:01","state":"California","residenceStateRegion":"West","birthYear":1984.0,"birthMonth":5.0,"birthDay":14.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":17,"finalWorth":59000,"category":"Diversified","personName":"Charles Koch & family","age":87.0,"country":"United States","city":"Wichita","source":"Koch Industries","industries":"Diversified","countryOfCitizenship":"United States","organization":"Koch Industries, Inc.","selfMade":false,"status":"D","gender":"M","birthDate":"11\/1\/1935 0:00","lastName":"Koch","firstName":"Charles","title":"Chairman and CEO","date":"4\/4\/2023 5:01","state":"Kansas","residenceStateRegion":"Midwest","birthYear":1935.0,"birthMonth":11.0,"birthDay":1.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":17,"finalWorth":59000,"category":"Diversified","personName":"Julia Koch & family","age":60.0,"country":"United States","city":"New York","source":"Koch Industries","industries":"Diversified","countryOfCitizenship":"United States","organization":null,"selfMade":false,"status":"D","gender":"F","birthDate":"4\/12\/1962 0:00","lastName":"Koch","firstName":"Julia","title":null,"date":"4\/4\/2023 5:01","state":"New York","residenceStateRegion":"Northeast","birthYear":1962.0,"birthMonth":4.0,"birthDay":12.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":19,"finalWorth":58800,"category":"Fashion & Retail","personName":"Jim Walton","age":74.0,"country":"United States","city":"Bentonville","source":"Walmart","industries":"Fashion & Retail","countryOfCitizenship":"United States","organization":"Arvest Bank Group, Inc.","selfMade":false,"status":"D","gender":"M","birthDate":"6\/7\/1948 0:00","lastName":"Walton","firstName":"Jim","title":"Chairman and CEO","date":"4\/4\/2023 5:01","state":"Arkansas","residenceStateRegion":"South","birthYear":1948.0,"birthMonth":6.0,"birthDay":7.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":20,"finalWorth":57600,"category":"Fashion & Retail","personName":"Rob Walton & family","age":78.0,"country":"United States","city":"Bentonville","source":"Walmart","industries":"Fashion & Retail","countryOfCitizenship":"United States","organization":"Walmart","selfMade":false,"status":"D","gender":"M","birthDate":"10\/27\/1944 0:00","lastName":"Walton","firstName":"Rob","title":"Director","date":"4\/4\/2023 5:01","state":"Arkansas","residenceStateRegion":"South","birthYear":1944.0,"birthMonth":10.0,"birthDay":27.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":21,"finalWorth":56700,"category":"Fashion & Retail","personName":"Alice Walton","age":73.0,"country":"United States","city":"Fort Worth","source":"Walmart","industries":"Fashion & Retail","countryOfCitizenship":"United States","organization":"Crystal Bridges Museum of American Art","selfMade":false,"status":"D","gender":"F","birthDate":"10\/7\/1949 0:00","lastName":"Walton","firstName":"Alice","title":"Philanthropist","date":"4\/4\/2023 5:01","state":"Texas","residenceStateRegion":"South","birthYear":1949.0,"birthMonth":10.0,"birthDay":7.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":22,"finalWorth":54400,"category":"Media & Entertainment","personName":"David Thomson & family","age":65.0,"country":"Canada","city":"Toronto","source":"Media","industries":"Media & Entertainment","countryOfCitizenship":"Canada","organization":"Thomson Reuters Corporation","selfMade":false,"status":"U","gender":"M","birthDate":"6\/12\/1957 0:00","lastName":"Thomson","firstName":"David","title":"Chairman","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1957.0,"birthMonth":6.0,"birthDay":12.0,"cpi_country":116.76,"cpi_change_country":1.9,"gdp_country":"$1,736,425,629,520 ","gross_tertiary_education_enrollment":68.9,"gross_primary_education_enrollment_country":100.9,"life_expectancy_country":81.9,"tax_revenue_country_country":12.8,"total_tax_rate_country":24.5,"population_country":36991981.0,"latitude_country":56.130366,"longitude_country":-106.346771},{"rank":23,"finalWorth":50100,"category":"Technology","personName":"Michael Dell","age":58.0,"country":"United States","city":"Austin","source":"Dell Technologies","industries":"Technology","countryOfCitizenship":"United States","organization":"Dell Inc.","selfMade":true,"status":"D","gender":"M","birthDate":"2\/23\/1965 0:00","lastName":"Dell","firstName":"Michael","title":"Chairman and CEO","date":"4\/4\/2023 5:01","state":"Texas","residenceStateRegion":"South","birthYear":1965.0,"birthMonth":2.0,"birthDay":23.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":24,"finalWorth":47200,"category":"Diversified","personName":"Gautam Adani","age":60.0,"country":"India","city":"Ahmedabad","source":"Infrastructure, commodities","industries":"Diversified","countryOfCitizenship":"India","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"6\/24\/1962 0:00","lastName":"Adani","firstName":"Gautam","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1962.0,"birthMonth":6.0,"birthDay":24.0,"cpi_country":180.44,"cpi_change_country":7.7,"gdp_country":"$2,611,000,000,000 ","gross_tertiary_education_enrollment":28.1,"gross_primary_education_enrollment_country":113.0,"life_expectancy_country":69.4,"tax_revenue_country_country":11.2,"total_tax_rate_country":49.7,"population_country":1366417754.0,"latitude_country":20.593684,"longitude_country":78.96288},{"rank":25,"finalWorth":45100,"category":"Fashion & Retail","personName":"Phil Knight & family","age":85.0,"country":"United States","city":"Hillsboro","source":"Nike","industries":"Fashion & Retail","countryOfCitizenship":"United States","organization":"Nike","selfMade":true,"status":"D","gender":"M","birthDate":"2\/24\/1938 0:00","lastName":"Knight","firstName":"Phil","title":"Chairman","date":"4\/4\/2023 5:01","state":"Oregon","residenceStateRegion":"West","birthYear":1938.0,"birthMonth":2.0,"birthDay":24.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":26,"finalWorth":45000,"category":"Technology","personName":"Zhang Yiming","age":39.0,"country":"China","city":"Beijing","source":"TikTok","industries":"Technology","countryOfCitizenship":"China","organization":"ByteDance","selfMade":true,"status":"D","gender":"M","birthDate":"1\/1\/1984 0:00","lastName":"Zhang","firstName":"Yiming","title":"Founder","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1984.0,"birthMonth":1.0,"birthDay":1.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":27,"finalWorth":42900,"category":"Fashion & Retail","personName":"Dieter Schwarz","age":83.0,"country":"Germany","city":"Neckarsulm","source":"Retail","industries":"Fashion & Retail","countryOfCitizenship":"Germany","organization":null,"selfMade":false,"status":"D","gender":"M","birthDate":"9\/24\/1939 0:00","lastName":"Schwarz","firstName":"Dieter","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1939.0,"birthMonth":9.0,"birthDay":24.0,"cpi_country":112.85,"cpi_change_country":1.4,"gdp_country":"$3,845,630,030,824 ","gross_tertiary_education_enrollment":70.2,"gross_primary_education_enrollment_country":104.0,"life_expectancy_country":80.9,"tax_revenue_country_country":11.5,"total_tax_rate_country":48.8,"population_country":83132799.0,"latitude_country":51.165691,"longitude_country":10.451526},{"rank":28,"finalWorth":40100,"category":"Fashion & Retail","personName":"Fran\u00e7ois Pinault & family","age":86.0,"country":"France","city":"Paris","source":"Luxury goods","industries":"Fashion & Retail","countryOfCitizenship":"France","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"8\/21\/1936 0:00","lastName":"Pinault","firstName":"Fran\u00e7ois","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1936.0,"birthMonth":8.0,"birthDay":21.0,"cpi_country":110.05,"cpi_change_country":1.1,"gdp_country":"$2,715,518,274,227 ","gross_tertiary_education_enrollment":65.6,"gross_primary_education_enrollment_country":102.5,"life_expectancy_country":82.5,"tax_revenue_country_country":24.2,"total_tax_rate_country":60.7,"population_country":67059887.0,"latitude_country":46.227638,"longitude_country":2.213749},{"rank":29,"finalWorth":39100,"category":"Logistics","personName":"Klaus-Michael Kuehne","age":85.0,"country":"Switzerland","city":"Schindellegi","source":"Shipping","industries":"Logistics","countryOfCitizenship":"Germany","organization":null,"selfMade":false,"status":"U","gender":"M","birthDate":"6\/2\/1937 0:00","lastName":"Kuehne","firstName":"Klaus-Michael","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1937.0,"birthMonth":6.0,"birthDay":2.0,"cpi_country":99.55,"cpi_change_country":0.4,"gdp_country":"$703,082,435,360 ","gross_tertiary_education_enrollment":59.6,"gross_primary_education_enrollment_country":105.2,"life_expectancy_country":83.6,"tax_revenue_country_country":10.1,"total_tax_rate_country":28.8,"population_country":8574832.0,"latitude_country":46.818188,"longitude_country":8.227512},{"rank":30,"finalWorth":38900,"category":"Food & Beverage","personName":"Giovanni Ferrero","age":58.0,"country":"Belgium","city":"Brussels","source":"Nutella, chocolates","industries":"Food & Beverage","countryOfCitizenship":"Italy","organization":null,"selfMade":false,"status":"U","gender":"M","birthDate":"9\/21\/1964 0:00","lastName":"Ferrero","firstName":"Giovanni","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1964.0,"birthMonth":9.0,"birthDay":21.0,"cpi_country":117.11,"cpi_change_country":1.4,"gdp_country":"$529,606,710,418 ","gross_tertiary_education_enrollment":79.7,"gross_primary_education_enrollment_country":103.9,"life_expectancy_country":81.6,"tax_revenue_country_country":24.0,"total_tax_rate_country":55.4,"population_country":11484055.0,"latitude_country":50.503887,"longitude_country":4.469936},{"rank":31,"finalWorth":38300,"category":"Food & Beverage","personName":"Jacqueline Mars","age":83.0,"country":"United States","city":"The Plains","source":"Candy, pet food","industries":"Food & Beverage","countryOfCitizenship":"United States","organization":null,"selfMade":false,"status":"U","gender":"F","birthDate":"10\/10\/1939 0:00","lastName":"Mars","firstName":"Jacqueline","title":null,"date":"4\/4\/2023 5:01","state":"Virginia","residenceStateRegion":"South","birthYear":1939.0,"birthMonth":10.0,"birthDay":10.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":31,"finalWorth":38300,"category":"Food & Beverage","personName":"John Mars","age":87.0,"country":"United States","city":"Jackson","source":"Candy, pet food","industries":"Food & Beverage","countryOfCitizenship":"United States","organization":null,"selfMade":false,"status":"U","gender":"M","birthDate":"10\/15\/1935 0:00","lastName":"Mars","firstName":"John","title":null,"date":"4\/4\/2023 5:01","state":"Wyoming","residenceStateRegion":"South","birthYear":1935.0,"birthMonth":10.0,"birthDay":15.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":33,"finalWorth":38000,"category":"Diversified","personName":"Li Ka-shing","age":94.0,"country":"Hong Kong","city":null,"source":"Diversified","industries":"Diversified","countryOfCitizenship":"Hong Kong","organization":"CK Hutchison Holdings","selfMade":true,"status":"U","gender":"M","birthDate":"6\/13\/1928 0:00","lastName":"Li","firstName":"Ka-shing","title":"Senior Advisor","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1928.0,"birthMonth":6.0,"birthDay":13.0,"cpi_country":null,"cpi_change_country":null,"gdp_country":null,"gross_tertiary_education_enrollment":null,"gross_primary_education_enrollment_country":null,"life_expectancy_country":null,"tax_revenue_country_country":null,"total_tax_rate_country":null,"population_country":null,"latitude_country":null,"longitude_country":null},{"rank":34,"finalWorth":35300,"category":"Technology","personName":"Ma Huateng","age":51.0,"country":"China","city":"Shenzhen","source":"Internet media","industries":"Technology","countryOfCitizenship":"China","organization":"Tencent Holdings","selfMade":true,"status":"D","gender":"M","birthDate":"10\/29\/1971 0:00","lastName":"Ma","firstName":"Huateng","title":"Chairman and CEO","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1971.0,"birthMonth":10.0,"birthDay":29.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":35,"finalWorth":35000,"category":"Gambling & Casinos","personName":"Miriam Adelson & family","age":77.0,"country":"United States","city":"Las Vegas","source":"Casinos","industries":"Gambling & Casinos","countryOfCitizenship":"United States","organization":null,"selfMade":false,"status":"U","gender":"F","birthDate":"10\/10\/1945 0:00","lastName":"Adelson","firstName":"Miriam","title":null,"date":"4\/4\/2023 5:01","state":"Nevada","residenceStateRegion":"West","birthYear":1945.0,"birthMonth":10.0,"birthDay":10.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":35,"finalWorth":35000,"category":"Finance & Investments","personName":"Ken Griffin","age":54.0,"country":"United States","city":"Miami","source":"Hedge funds","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":"Citadel LLC","selfMade":true,"status":"U","gender":"M","birthDate":"10\/15\/1968 0:00","lastName":"Griffin","firstName":"Ken","title":"Founder & CEO","date":"4\/4\/2023 5:01","state":"Florida","residenceStateRegion":"South","birthYear":1968.0,"birthMonth":10.0,"birthDay":15.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":37,"finalWorth":34700,"category":"Food & Beverage","personName":"Mark Mateschitz","age":30.0,"country":"Austria","city":"Salzburg","source":"Red Bull","industries":"Food & Beverage","countryOfCitizenship":"Austria","organization":null,"selfMade":false,"status":"N","gender":"M","birthDate":"5\/7\/1992 0:00","lastName":"Mateschitz","firstName":"Mark","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1992.0,"birthMonth":5.0,"birthDay":7.0,"cpi_country":118.06,"cpi_change_country":1.5,"gdp_country":"$446,314,739,528 ","gross_tertiary_education_enrollment":85.1,"gross_primary_education_enrollment_country":103.1,"life_expectancy_country":81.6,"tax_revenue_country_country":25.4,"total_tax_rate_country":51.4,"population_country":8877067.0,"latitude_country":47.516231,"longitude_country":14.550072},{"rank":38,"finalWorth":33400,"category":"Automotive","personName":"Robin Zeng","age":54.0,"country":"China","city":"Ningde","source":"Batteries","industries":"Automotive","countryOfCitizenship":"Hong Kong","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"1\/1\/1969 0:00","lastName":"Zeng","firstName":"Robin","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1969.0,"birthMonth":1.0,"birthDay":1.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":39,"finalWorth":32600,"category":"Fashion & Retail","personName":"Tadashi Yanai & family","age":74.0,"country":"Japan","city":"Tokyo","source":"Fashion retail","industries":"Fashion & Retail","countryOfCitizenship":"Japan","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"2\/7\/1949 0:00","lastName":"Yanai","firstName":"Tadashi","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1949.0,"birthMonth":2.0,"birthDay":7.0,"cpi_country":105.48,"cpi_change_country":0.5,"gdp_country":"$5,081,769,542,380 ","gross_tertiary_education_enrollment":63.2,"gross_primary_education_enrollment_country":98.8,"life_expectancy_country":84.2,"tax_revenue_country_country":11.9,"total_tax_rate_country":46.7,"population_country":126226568.0,"latitude_country":36.204824,"longitude_country":138.252924},{"rank":40,"finalWorth":32100,"category":"Diversified","personName":"Len Blavatnik","age":65.0,"country":"United Kingdom","city":"London","source":"Music, chemicals","industries":"Diversified","countryOfCitizenship":"United States","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"6\/1\/1957 0:00","lastName":"Blavatnik","firstName":"Len","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1957.0,"birthMonth":6.0,"birthDay":1.0,"cpi_country":119.62,"cpi_change_country":1.7,"gdp_country":"$2,827,113,184,696 ","gross_tertiary_education_enrollment":60.0,"gross_primary_education_enrollment_country":101.2,"life_expectancy_country":81.3,"tax_revenue_country_country":25.5,"total_tax_rate_country":30.6,"population_country":66834405.0,"latitude_country":55.378051,"longitude_country":-3.435973},{"rank":41,"finalWorth":31600,"category":"Fashion & Retail","personName":"Alain Wertheimer","age":74.0,"country":"United States","city":"New York","source":"Chanel","industries":"Fashion & Retail","countryOfCitizenship":"France","organization":null,"selfMade":false,"status":"U","gender":"M","birthDate":"8\/28\/1948 0:00","lastName":"Wertheimer","firstName":"Alain","title":null,"date":"4\/4\/2023 5:01","state":"New York","residenceStateRegion":"Northeast","birthYear":1948.0,"birthMonth":8.0,"birthDay":28.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":41,"finalWorth":31600,"category":"Fashion & Retail","personName":"Gerard Wertheimer","age":72.0,"country":"United States","city":"New York","source":"Chanel","industries":"Fashion & Retail","countryOfCitizenship":"France","organization":null,"selfMade":false,"status":"U","gender":"M","birthDate":"1\/9\/1951 0:00","lastName":"Wertheimer","firstName":"Gerard","title":null,"date":"4\/4\/2023 5:01","state":"New York","residenceStateRegion":"Northeast","birthYear":1951.0,"birthMonth":1.0,"birthDay":9.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":43,"finalWorth":31200,"category":"Logistics","personName":"Gianluigi Aponte","age":82.0,"country":"Switzerland","city":"Geneva","source":"Shipping","industries":"Logistics","countryOfCitizenship":"Switzerland","organization":null,"selfMade":true,"status":"Split Family Fortune","gender":"M","birthDate":"6\/27\/1940 0:00","lastName":"Aponte","firstName":"Gianluigi","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1940.0,"birthMonth":6.0,"birthDay":27.0,"cpi_country":99.55,"cpi_change_country":0.4,"gdp_country":"$703,082,435,360 ","gross_tertiary_education_enrollment":59.6,"gross_primary_education_enrollment_country":105.2,"life_expectancy_country":83.6,"tax_revenue_country_country":10.1,"total_tax_rate_country":28.8,"population_country":8574832.0,"latitude_country":46.818188,"longitude_country":8.227512},{"rank":43,"finalWorth":31200,"category":"Logistics","personName":"Rafaela Aponte-Diamant","age":78.0,"country":"Switzerland","city":"Geneva","source":"Shipping","industries":"Logistics","countryOfCitizenship":"Switzerland","organization":null,"selfMade":true,"status":"Split Family Fortune","gender":"F","birthDate":"3\/26\/1945 0:00","lastName":"Aponte-Diamant","firstName":"Rafaela","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1945.0,"birthMonth":3.0,"birthDay":26.0,"cpi_country":99.55,"cpi_change_country":0.4,"gdp_country":"$703,082,435,360 ","gross_tertiary_education_enrollment":59.6,"gross_primary_education_enrollment_country":105.2,"life_expectancy_country":83.6,"tax_revenue_country_country":10.1,"total_tax_rate_country":28.8,"population_country":8574832.0,"latitude_country":46.818188,"longitude_country":8.227512},{"rank":45,"finalWorth":30200,"category":"Technology","personName":"Colin Zheng Huang","age":43.0,"country":"China","city":"Shanghai","source":"E-commerce","industries":"Technology","countryOfCitizenship":"China","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"2\/2\/1980 0:00","lastName":"Huang","firstName":"Colin Zheng","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1980.0,"birthMonth":2.0,"birthDay":2.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":46,"finalWorth":29700,"category":"Manufacturing","personName":"Reinhold Wuerth & family","age":87.0,"country":"Germany","city":"Kuenzelsau","source":"Fasteners","industries":"Manufacturing","countryOfCitizenship":"Germany","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"4\/20\/1935 0:00","lastName":"Wuerth","firstName":"Reinhold","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1935.0,"birthMonth":4.0,"birthDay":20.0,"cpi_country":112.85,"cpi_change_country":1.4,"gdp_country":"$3,845,630,030,824 ","gross_tertiary_education_enrollment":70.2,"gross_primary_education_enrollment_country":104.0,"life_expectancy_country":80.9,"tax_revenue_country_country":11.5,"total_tax_rate_country":48.8,"population_country":83132799.0,"latitude_country":51.165691,"longitude_country":10.451526},{"rank":47,"finalWorth":29500,"category":"Real Estate","personName":"Lee Shau Kee","age":95.0,"country":"Hong Kong","city":"Hong Kong","source":"Real estate","industries":"Real Estate","countryOfCitizenship":"Hong Kong","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"1\/29\/1928 0:00","lastName":"Lee","firstName":"Shau Kee","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1928.0,"birthMonth":1.0,"birthDay":29.0,"cpi_country":null,"cpi_change_country":null,"gdp_country":null,"gross_tertiary_education_enrollment":null,"gross_primary_education_enrollment_country":null,"life_expectancy_country":null,"tax_revenue_country_country":null,"total_tax_rate_country":null,"population_country":null,"latitude_country":null,"longitude_country":null},{"rank":48,"finalWorth":28500,"category":"Finance & Investments","personName":"Jeff Yass","age":64.0,"country":"United States","city":"Haverford","source":"Trading, investments","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"7\/17\/1958 0:00","lastName":"Yass","firstName":"Jeff","title":null,"date":"4\/4\/2023 5:01","state":"Pennsylvania","residenceStateRegion":"Northeast","birthYear":1958.0,"birthMonth":7.0,"birthDay":17.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":49,"finalWorth":28100,"category":"Finance & Investments","personName":"Jim Simons","age":84.0,"country":"United States","city":"East Setauket","source":"Hedge funds","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":"Renaissance Technologies Corp.","selfMade":true,"status":"D","gender":"M","birthDate":"4\/25\/1938 0:00","lastName":"Simons","firstName":"Jim","title":"Founder","date":"4\/4\/2023 5:01","state":"New York","residenceStateRegion":"Northeast","birthYear":1938.0,"birthMonth":4.0,"birthDay":25.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":50,"finalWorth":27800,"category":"Finance & Investments","personName":"Stephen Schwarzman","age":76.0,"country":"United States","city":"New York","source":"Investments","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":"Blackstone Group","selfMade":true,"status":"D","gender":"M","birthDate":"2\/14\/1947 0:00","lastName":"Schwarzman","firstName":"Stephen","title":"Chairman and CEO","date":"4\/4\/2023 5:01","state":"New York","residenceStateRegion":"Northeast","birthYear":1947.0,"birthMonth":2.0,"birthDay":14.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":51,"finalWorth":27400,"category":"Automotive","personName":"Susanne Klatten","age":60.0,"country":"Germany","city":"Bad Homburg","source":"BMW, pharmaceuticals","industries":"Automotive","countryOfCitizenship":"Germany","organization":null,"selfMade":false,"status":"U","gender":"F","birthDate":"4\/28\/1962 0:00","lastName":"Klatten","firstName":"Susanne","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1962.0,"birthMonth":4.0,"birthDay":28.0,"cpi_country":112.85,"cpi_change_country":1.4,"gdp_country":"$3,845,630,030,824 ","gross_tertiary_education_enrollment":70.2,"gross_primary_education_enrollment_country":104.0,"life_expectancy_country":80.9,"tax_revenue_country_country":11.5,"total_tax_rate_country":48.8,"population_country":83132799.0,"latitude_country":51.165691,"longitude_country":10.451526},{"rank":52,"finalWorth":27000,"category":"Metals & Mining","personName":"Gina Rinehart","age":69.0,"country":"Australia","city":"Perth","source":"Mining","industries":"Metals & Mining","countryOfCitizenship":"Australia","organization":"Hancock Prospecting","selfMade":false,"status":"D","gender":"F","birthDate":"2\/9\/1954 0:00","lastName":"Rinehart","firstName":"Gina","title":"Executive Chairman","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1954.0,"birthMonth":2.0,"birthDay":9.0,"cpi_country":119.8,"cpi_change_country":1.6,"gdp_country":"$1,392,680,589,329 ","gross_tertiary_education_enrollment":113.1,"gross_primary_education_enrollment_country":100.3,"life_expectancy_country":82.7,"tax_revenue_country_country":23.0,"total_tax_rate_country":47.4,"population_country":25766605.0,"latitude_country":-25.274398,"longitude_country":133.775136},{"rank":53,"finalWorth":26700,"category":"Technology","personName":"William Ding","age":51.0,"country":"China","city":"Hangzhou","source":"Online games","industries":"Technology","countryOfCitizenship":"China","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"10\/1\/1971 0:00","lastName":"Ding","firstName":"William","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1971.0,"birthMonth":10.0,"birthDay":1.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":54,"finalWorth":26600,"category":"Metals & Mining","personName":"Germ\u00e1n Larrea Mota Velasco & family","age":69.0,"country":"Mexico","city":"Mexico City","source":"Mining","industries":"Metals & Mining","countryOfCitizenship":"Mexico","organization":null,"selfMade":false,"status":"D","gender":"M","birthDate":"10\/26\/1953 0:00","lastName":"Larrea Mota Velasco","firstName":"Germ\u00e1n","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1953.0,"birthMonth":10.0,"birthDay":26.0,"cpi_country":141.54,"cpi_change_country":3.6,"gdp_country":"$1,258,286,717,125 ","gross_tertiary_education_enrollment":40.2,"gross_primary_education_enrollment_country":105.8,"life_expectancy_country":75.0,"tax_revenue_country_country":13.1,"total_tax_rate_country":55.1,"population_country":126014024.0,"latitude_country":23.634501,"longitude_country":-102.552784},{"rank":55,"finalWorth":25600,"category":"Technology","personName":"Shiv Nadar","age":77.0,"country":"India","city":"Delhi","source":"software services","industries":"Technology","countryOfCitizenship":"India","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"7\/18\/1945 0:00","lastName":"Nadar","firstName":"Shiv","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1945.0,"birthMonth":7.0,"birthDay":18.0,"cpi_country":180.44,"cpi_change_country":7.7,"gdp_country":"$2,611,000,000,000 ","gross_tertiary_education_enrollment":28.1,"gross_primary_education_enrollment_country":113.0,"life_expectancy_country":69.4,"tax_revenue_country_country":11.2,"total_tax_rate_country":49.7,"population_country":1366417754.0,"latitude_country":20.593684,"longitude_country":78.96288},{"rank":56,"finalWorth":25500,"category":"Energy","personName":"Low Tuck Kwong","age":74.0,"country":"Indonesia","city":"Jakarta","source":"Coal","industries":"Energy","countryOfCitizenship":"Indonesia","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"4\/17\/1948 0:00","lastName":"Low Tuck","firstName":"Kwong","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1948.0,"birthMonth":4.0,"birthDay":17.0,"cpi_country":151.18,"cpi_change_country":3.0,"gdp_country":"$1,119,190,780,753 ","gross_tertiary_education_enrollment":36.3,"gross_primary_education_enrollment_country":106.4,"life_expectancy_country":71.5,"tax_revenue_country_country":10.2,"total_tax_rate_country":30.1,"population_country":270203917.0,"latitude_country":-0.789275,"longitude_country":113.921327},{"rank":57,"finalWorth":25300,"category":"Finance & Investments","personName":"Thomas Peterffy","age":78.0,"country":"United States","city":"Palm Beach","source":"Discount brokerage","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"9\/30\/1944 0:00","lastName":"Peterffy","firstName":"Thomas","title":null,"date":"4\/4\/2023 5:01","state":"Florida","residenceStateRegion":"South","birthYear":1944.0,"birthMonth":9.0,"birthDay":30.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":58,"finalWorth":25200,"category":"Metals & Mining","personName":"Andrey Melnichenko & family","age":51.0,"country":"United Arab Emirates","city":"Ras Al Khaimah","source":"Fertilizers, coal","industries":"Metals & Mining","countryOfCitizenship":"Russia","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"3\/8\/1972 0:00","lastName":"Melnichenko","firstName":"Andrey","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1972.0,"birthMonth":3.0,"birthDay":8.0,"cpi_country":114.52,"cpi_change_country":-1.9,"gdp_country":"$421,142,267,938 ","gross_tertiary_education_enrollment":36.8,"gross_primary_education_enrollment_country":108.4,"life_expectancy_country":77.8,"tax_revenue_country_country":0.1,"total_tax_rate_country":15.9,"population_country":9770529.0,"latitude_country":23.424076,"longitude_country":53.847818},{"rank":59,"finalWorth":24600,"category":"Automotive","personName":"Stefan Quandt","age":56.0,"country":"Germany","city":"Frankfurt","source":"BMW","industries":"Automotive","countryOfCitizenship":"Germany","organization":null,"selfMade":false,"status":"U","gender":"M","birthDate":"5\/9\/1966 0:00","lastName":"Quandt","firstName":"Stefan","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1966.0,"birthMonth":5.0,"birthDay":9.0,"cpi_country":112.85,"cpi_change_country":1.4,"gdp_country":"$3,845,630,030,824 ","gross_tertiary_education_enrollment":70.2,"gross_primary_education_enrollment_country":104.0,"life_expectancy_country":80.9,"tax_revenue_country_country":11.5,"total_tax_rate_country":48.8,"population_country":83132799.0,"latitude_country":51.165691,"longitude_country":10.451526},{"rank":60,"finalWorth":24400,"category":"Technology","personName":"MacKenzie Scott","age":52.0,"country":"United States","city":"Seattle","source":"Amazon","industries":"Technology","countryOfCitizenship":"United States","organization":null,"selfMade":false,"status":"D","gender":"F","birthDate":"4\/7\/1970 0:00","lastName":"Scott","firstName":"MacKenzie","title":"Philanthropist","date":"4\/4\/2023 5:01","state":"Washington","residenceStateRegion":"West","birthYear":1970.0,"birthMonth":4.0,"birthDay":7.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":61,"finalWorth":24200,"category":"Finance & Investments","personName":"R. Budi Hartono","age":82.0,"country":"Indonesia","city":"Kudus","source":"Banking, tobacco","industries":"Finance & Investments","countryOfCitizenship":"Indonesia","organization":null,"selfMade":false,"status":"U","gender":"M","birthDate":"1\/1\/1941 0:00","lastName":"Hartono","firstName":"R. Budi","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1941.0,"birthMonth":1.0,"birthDay":1.0,"cpi_country":151.18,"cpi_change_country":3.0,"gdp_country":"$1,119,190,780,753 ","gross_tertiary_education_enrollment":36.3,"gross_primary_education_enrollment_country":106.4,"life_expectancy_country":71.5,"tax_revenue_country_country":10.2,"total_tax_rate_country":30.1,"population_country":270203917.0,"latitude_country":-0.789275,"longitude_country":113.921327},{"rank":62,"finalWorth":23700,"category":"Metals & Mining","personName":"Vladimir Potanin","age":62.0,"country":"Russia","city":"Moscow","source":"Metals","industries":"Metals & Mining","countryOfCitizenship":"Russia","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"1\/3\/1961 0:00","lastName":"Potanin","firstName":"Vladimir","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1961.0,"birthMonth":1.0,"birthDay":3.0,"cpi_country":180.75,"cpi_change_country":4.5,"gdp_country":"$1,699,876,578,871 ","gross_tertiary_education_enrollment":81.9,"gross_primary_education_enrollment_country":102.6,"life_expectancy_country":72.7,"tax_revenue_country_country":11.4,"total_tax_rate_country":46.2,"population_country":144373535.0,"latitude_country":61.52401,"longitude_country":105.318756},{"rank":63,"finalWorth":23500,"category":"Technology","personName":"Jack Ma","age":58.0,"country":"China","city":"Hangzhou","source":"E-commerce","industries":"Technology","countryOfCitizenship":"China","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"9\/10\/1964 0:00","lastName":"Ma","firstName":"Jack","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1964.0,"birthMonth":9.0,"birthDay":10.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":64,"finalWorth":23400,"category":"Manufacturing","personName":"He Xiangjian & family","age":80.0,"country":"China","city":"Foshan","source":"Home appliances","industries":"Manufacturing","countryOfCitizenship":"China","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"8\/11\/1942 0:00","lastName":"He","firstName":"Xiangjian","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1942.0,"birthMonth":8.0,"birthDay":11.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":65,"finalWorth":23100,"category":"Metals & Mining","personName":"Iris Fontbona & family","age":80.0,"country":"Chile","city":"Santiago","source":"Mining","industries":"Metals & Mining","countryOfCitizenship":"Chile","organization":null,"selfMade":false,"status":"U","gender":"F","birthDate":"1\/1\/1943 0:00","lastName":"Fontbona","firstName":"Iris","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1943.0,"birthMonth":1.0,"birthDay":1.0,"cpi_country":131.91,"cpi_change_country":2.6,"gdp_country":"$282,318,159,745 ","gross_tertiary_education_enrollment":88.5,"gross_primary_education_enrollment_country":101.4,"life_expectancy_country":80.0,"tax_revenue_country_country":18.2,"total_tax_rate_country":34.0,"population_country":18952038.0,"latitude_country":-35.675147,"longitude_country":-71.542969},{"rank":65,"finalWorth":23100,"category":"Manufacturing","personName":"Michael Hartono","age":83.0,"country":"Indonesia","city":"Kudus","source":"Banking, tobacco","industries":"Manufacturing","countryOfCitizenship":"Indonesia","organization":null,"selfMade":false,"status":"U","gender":"M","birthDate":"10\/2\/1939 0:00","lastName":"Hartono","firstName":"Michael","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1939.0,"birthMonth":10.0,"birthDay":2.0,"cpi_country":151.18,"cpi_change_country":3.0,"gdp_country":"$1,119,190,780,753 ","gross_tertiary_education_enrollment":36.3,"gross_primary_education_enrollment_country":106.4,"life_expectancy_country":71.5,"tax_revenue_country_country":10.2,"total_tax_rate_country":30.1,"population_country":270203917.0,"latitude_country":-0.789275,"longitude_country":113.921327},{"rank":67,"finalWorth":22900,"category":"Manufacturing","personName":"James Ratcliffe","age":70.0,"country":"United Kingdom","city":"London","source":"Chemicals","industries":"Manufacturing","countryOfCitizenship":"United Kingdom","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"1\/1\/1953 0:00","lastName":"Ratcliffe","firstName":"James","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1953.0,"birthMonth":1.0,"birthDay":1.0,"cpi_country":119.62,"cpi_change_country":1.7,"gdp_country":"$2,827,113,184,696 ","gross_tertiary_education_enrollment":60.0,"gross_primary_education_enrollment_country":101.2,"life_expectancy_country":81.3,"tax_revenue_country_country":25.5,"total_tax_rate_country":30.6,"population_country":66834405.0,"latitude_country":55.378051,"longitude_country":-3.435973},{"rank":68,"finalWorth":22600,"category":"Healthcare","personName":"Cyrus Poonawalla","age":81.0,"country":"India","city":"Pune","source":"Vaccines","industries":"Healthcare","countryOfCitizenship":"India","organization":null,"selfMade":false,"status":"D","gender":"M","birthDate":"5\/11\/1941 0:00","lastName":"Poonawalla","firstName":"Cyrus","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1941.0,"birthMonth":5.0,"birthDay":11.0,"cpi_country":180.44,"cpi_change_country":7.7,"gdp_country":"$2,611,000,000,000 ","gross_tertiary_education_enrollment":28.1,"gross_primary_education_enrollment_country":113.0,"life_expectancy_country":69.4,"tax_revenue_country_country":11.2,"total_tax_rate_country":49.7,"population_country":1366417754.0,"latitude_country":20.593684,"longitude_country":78.96288},{"rank":69,"finalWorth":22400,"category":"Telecom","personName":"Masayoshi Son","age":65.0,"country":"Japan","city":"Tokyo","source":"Internet, telecom","industries":"Telecom","countryOfCitizenship":"Japan","organization":"SoftBank Group Corp.","selfMade":true,"status":"U","gender":"M","birthDate":"8\/11\/1957 0:00","lastName":"Son","firstName":"Masayoshi","title":"CEO","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1957.0,"birthMonth":8.0,"birthDay":11.0,"cpi_country":105.48,"cpi_change_country":0.5,"gdp_country":"$5,081,769,542,380 ","gross_tertiary_education_enrollment":63.2,"gross_primary_education_enrollment_country":98.8,"life_expectancy_country":84.2,"tax_revenue_country_country":11.9,"total_tax_rate_country":46.7,"population_country":126226568.0,"latitude_country":36.204824,"longitude_country":138.252924},{"rank":70,"finalWorth":22100,"category":"Metals & Mining","personName":"Vladimir Lisin","age":66.0,"country":"Russia","city":"Moscow","source":"Steel, transport","industries":"Metals & Mining","countryOfCitizenship":"Russia","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"5\/7\/1956 0:00","lastName":"Lisin","firstName":"Vladimir","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1956.0,"birthMonth":5.0,"birthDay":7.0,"cpi_country":180.75,"cpi_change_country":4.5,"gdp_country":"$1,699,876,578,871 ","gross_tertiary_education_enrollment":81.9,"gross_primary_education_enrollment_country":102.6,"life_expectancy_country":72.7,"tax_revenue_country_country":11.4,"total_tax_rate_country":46.2,"population_country":144373535.0,"latitude_country":61.52401,"longitude_country":105.318756},{"rank":71,"finalWorth":22000,"category":"Food & Beverage","personName":"Emmanuel Besnier","age":52.0,"country":"France","city":"Laval","source":"Cheese","industries":"Food & Beverage","countryOfCitizenship":"France","organization":null,"selfMade":false,"status":"D","gender":"M","birthDate":"9\/18\/1970 0:00","lastName":"Besnier","firstName":"Emmanuel","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1970.0,"birthMonth":9.0,"birthDay":18.0,"cpi_country":110.05,"cpi_change_country":1.1,"gdp_country":"$2,715,518,274,227 ","gross_tertiary_education_enrollment":65.6,"gross_primary_education_enrollment_country":102.5,"life_expectancy_country":82.5,"tax_revenue_country_country":24.2,"total_tax_rate_country":60.7,"population_country":67059887.0,"latitude_country":46.227638,"longitude_country":2.213749},{"rank":72,"finalWorth":21600,"category":"Finance & Investments","personName":"Abigail Johnson","age":61.0,"country":"United States","city":"Milton","source":"Fidelity","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":"Fidelity Investments","selfMade":false,"status":"U","gender":"F","birthDate":"12\/19\/1961 0:00","lastName":"Johnson","firstName":"Abigail","title":"CEO","date":"4\/4\/2023 5:01","state":"Massachusetts","residenceStateRegion":"Northeast","birthYear":1961.0,"birthMonth":12.0,"birthDay":19.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":72,"finalWorth":21600,"category":"Energy","personName":"Leonid Mikhelson & family","age":67.0,"country":"Russia","city":"Moscow","source":"Gas, chemicals","industries":"Energy","countryOfCitizenship":"Russia","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"8\/11\/1955 0:00","lastName":"Mikhelson","firstName":"Leonid","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1955.0,"birthMonth":8.0,"birthDay":11.0,"cpi_country":180.75,"cpi_change_country":4.5,"gdp_country":"$1,699,876,578,871 ","gross_tertiary_education_enrollment":81.9,"gross_primary_education_enrollment_country":102.6,"life_expectancy_country":72.7,"tax_revenue_country_country":11.4,"total_tax_rate_country":46.2,"population_country":144373535.0,"latitude_country":61.52401,"longitude_country":105.318756},{"rank":74,"finalWorth":21200,"category":"Fashion & Retail","personName":"Lukas Walton","age":36.0,"country":"United States","city":"Chicago","source":"Walmart","industries":"Fashion & Retail","countryOfCitizenship":"United States","organization":null,"selfMade":false,"status":"U","gender":"M","birthDate":"9\/19\/1986 0:00","lastName":"Walton","firstName":"Lukas","title":null,"date":"4\/4\/2023 5:01","state":"Illinois","residenceStateRegion":"Midwest","birthYear":1986.0,"birthMonth":9.0,"birthDay":19.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":74,"finalWorth":21200,"category":"Service","personName":"Wang Wei","age":52.0,"country":"China","city":"Shenzhen","source":"Package delivery","industries":"Service","countryOfCitizenship":"China","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"10\/1\/1970 0:00","lastName":"Wang","firstName":"Wei","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1970.0,"birthMonth":10.0,"birthDay":1.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":76,"finalWorth":21100,"category":"Technology","personName":"Jensen Huang","age":60.0,"country":"United States","city":"Los Altos","source":"Semiconductors","industries":"Technology","countryOfCitizenship":"United States","organization":"Nvidia","selfMade":true,"status":"U","gender":"M","birthDate":"2\/17\/1963 0:00","lastName":"Huang","firstName":"Jensen","title":"CEO & President","date":"4\/4\/2023 5:01","state":"California","residenceStateRegion":"West","birthYear":1963.0,"birthMonth":2.0,"birthDay":17.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":77,"finalWorth":21000,"category":"Fashion & Retail","personName":"Leonard Lauder","age":90.0,"country":"United States","city":"New York","source":"Estee Lauder","industries":"Fashion & Retail","countryOfCitizenship":"United States","organization":"The Est\u00e9e Lauder Companies","selfMade":false,"status":"D","gender":"M","birthDate":"3\/19\/1933 0:00","lastName":"Lauder","firstName":"Leonard","title":"Chairman Emeritus","date":"4\/4\/2023 5:01","state":"New York","residenceStateRegion":"Northeast","birthYear":1933.0,"birthMonth":3.0,"birthDay":19.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":77,"finalWorth":21000,"category":"Manufacturing","personName":"Takemitsu Takizaki","age":77.0,"country":"Japan","city":"Osaka","source":"Sensors","industries":"Manufacturing","countryOfCitizenship":"Japan","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"6\/10\/1945 0:00","lastName":"Takizaki","firstName":"Takemitsu","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1945.0,"birthMonth":6.0,"birthDay":10.0,"cpi_country":105.48,"cpi_change_country":0.5,"gdp_country":"$5,081,769,542,380 ","gross_tertiary_education_enrollment":63.2,"gross_primary_education_enrollment_country":98.8,"life_expectancy_country":84.2,"tax_revenue_country_country":11.9,"total_tax_rate_country":46.7,"population_country":126226568.0,"latitude_country":36.204824,"longitude_country":138.252924},{"rank":79,"finalWorth":20900,"category":"Metals & Mining","personName":"Alexey Mordashov & family","age":57.0,"country":"Russia","city":"Moscow","source":"Steel, investments","industries":"Metals & Mining","countryOfCitizenship":"Russia","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"9\/26\/1965 0:00","lastName":"Mordashov","firstName":"Alexey","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1965.0,"birthMonth":9.0,"birthDay":26.0,"cpi_country":180.75,"cpi_change_country":4.5,"gdp_country":"$1,699,876,578,871 ","gross_tertiary_education_enrollment":81.9,"gross_primary_education_enrollment_country":102.6,"life_expectancy_country":72.7,"tax_revenue_country_country":11.4,"total_tax_rate_country":46.2,"population_country":144373535.0,"latitude_country":61.52401,"longitude_country":105.318756},{"rank":80,"finalWorth":20500,"category":"Energy","personName":"Vagit Alekperov","age":72.0,"country":"Russia","city":"Moscow","source":"Oil","industries":"Energy","countryOfCitizenship":"Russia","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"9\/1\/1950 0:00","lastName":"Alekperov","firstName":"Vagit","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1950.0,"birthMonth":9.0,"birthDay":1.0,"cpi_country":180.75,"cpi_change_country":4.5,"gdp_country":"$1,699,876,578,871 ","gross_tertiary_education_enrollment":81.9,"gross_primary_education_enrollment_country":102.6,"life_expectancy_country":72.7,"tax_revenue_country_country":11.4,"total_tax_rate_country":46.2,"population_country":144373535.0,"latitude_country":61.52401,"longitude_country":105.318756},{"rank":81,"finalWorth":20200,"category":"Healthcare","personName":"Thomas Frist, Jr. & family","age":84.0,"country":"United States","city":"Nashville","source":"Hospitals","industries":"Healthcare","countryOfCitizenship":"United States","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"8\/12\/1938 0:00","lastName":"Frist","firstName":"Thomas","title":null,"date":"4\/4\/2023 5:01","state":"Tennessee","residenceStateRegion":"South","birthYear":1938.0,"birthMonth":8.0,"birthDay":12.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":82,"finalWorth":19600,"category":"Metals & Mining","personName":"Andrew Forrest","age":61.0,"country":"Australia","city":"Perth","source":"Mining","industries":"Metals & Mining","countryOfCitizenship":"Australia","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"11\/18\/1961 0:00","lastName":"Forrest","firstName":"Andrew","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1961.0,"birthMonth":11.0,"birthDay":18.0,"cpi_country":119.8,"cpi_change_country":1.6,"gdp_country":"$1,392,680,589,329 ","gross_tertiary_education_enrollment":113.1,"gross_primary_education_enrollment_country":100.3,"life_expectancy_country":82.7,"tax_revenue_country_country":23.0,"total_tax_rate_country":47.4,"population_country":25766605.0,"latitude_country":-25.274398,"longitude_country":133.775136},{"rank":83,"finalWorth":19100,"category":"Finance & Investments","personName":"Ray Dalio","age":73.0,"country":"United States","city":"Greenwich","source":"Hedge funds","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":"Bridgewater Associates","selfMade":true,"status":"D","gender":"M","birthDate":"8\/8\/1949 0:00","lastName":"Dalio","firstName":"Ray","title":"Founder & Co-Chief Investment Officer","date":"4\/4\/2023 5:01","state":"Connecticut","residenceStateRegion":"Northeast","birthYear":1949.0,"birthMonth":8.0,"birthDay":8.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":84,"finalWorth":19000,"category":"Automotive","personName":"Eric Li","age":59.0,"country":"China","city":"Hangzhou","source":"Automobiles","industries":"Automotive","countryOfCitizenship":"China","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"6\/1\/1963 0:00","lastName":"Li","firstName":"Eric","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1963.0,"birthMonth":6.0,"birthDay":1.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":84,"finalWorth":19000,"category":"Metals & Mining","personName":"Wang Wenyin","age":55.0,"country":"China","city":"Shenzhen","source":"Mining, copper products","industries":"Metals & Mining","countryOfCitizenship":"China","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"3\/1\/1968 0:00","lastName":"Wang","firstName":"Wenyin","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1968.0,"birthMonth":3.0,"birthDay":1.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":86,"finalWorth":18900,"category":"Diversified","personName":"Eyal Ofer","age":72.0,"country":"Monaco","city":"Monte Carlo","source":"Real estate, shipping","industries":"Diversified","countryOfCitizenship":"Israel","organization":null,"selfMade":false,"status":"U","gender":"M","birthDate":"6\/2\/1950 0:00","lastName":"Ofer","firstName":"Eyal","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1950.0,"birthMonth":6.0,"birthDay":2.0,"cpi_country":null,"cpi_change_country":null,"gdp_country":"$7,184,844,193 ","gross_tertiary_education_enrollment":null,"gross_primary_education_enrollment_country":null,"life_expectancy_country":null,"tax_revenue_country_country":null,"total_tax_rate_country":null,"population_country":38964.0,"latitude_country":43.7384176,"longitude_country":7.4246158},{"rank":86,"finalWorth":18900,"category":"Food & Beverage","personName":"Qin Yinglin","age":57.0,"country":"China","city":"Nanyang","source":"Pig breeding","industries":"Food & Beverage","countryOfCitizenship":"China","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"4\/17\/1965 0:00","lastName":"Qin","firstName":"Yinglin","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1965.0,"birthMonth":4.0,"birthDay":17.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":88,"finalWorth":18700,"category":"Automotive","personName":"Wang Chuanfu","age":57.0,"country":"China","city":"Shenzhen","source":"Batteries, automobiles","industries":"Automotive","countryOfCitizenship":"China","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"2\/15\/1966 0:00","lastName":"Wang","firstName":"Chuanfu","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1966.0,"birthMonth":2.0,"birthDay":15.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":89,"finalWorth":18500,"category":"Energy","personName":"Harold Hamm & family","age":77.0,"country":"United States","city":"Oklahoma City","source":"Oil & gas","industries":"Energy","countryOfCitizenship":"United States","organization":"Continental Resources Inc. ","selfMade":true,"status":"U","gender":"M","birthDate":"12\/11\/1945 0:00","lastName":"Hamm","firstName":"Harold","title":"Chairman and CEO","date":"4\/4\/2023 5:01","state":"Oklahoma","residenceStateRegion":"South","birthYear":1945.0,"birthMonth":12.0,"birthDay":11.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":89,"finalWorth":18500,"category":"Finance & Investments","personName":"David Tepper","age":65.0,"country":"United States","city":"Palm Beach","source":"Hedge funds","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":"Appaloosa Management","selfMade":true,"status":"U","gender":"M","birthDate":"9\/11\/1957 0:00","lastName":"Tepper","firstName":"David","title":"President and Founder","date":"4\/4\/2023 5:01","state":"Florida","residenceStateRegion":"South","birthYear":1957.0,"birthMonth":9.0,"birthDay":11.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":89,"finalWorth":18500,"category":"Energy","personName":"Gennady Timchenko","age":70.0,"country":"Russia","city":"Moscow","source":"Oil, gas","industries":"Energy","countryOfCitizenship":"Russia","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"11\/9\/1952 0:00","lastName":"Timchenko","firstName":"Gennady","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1952.0,"birthMonth":11.0,"birthDay":9.0,"cpi_country":180.75,"cpi_change_country":4.5,"gdp_country":"$1,699,876,578,871 ","gross_tertiary_education_enrollment":81.9,"gross_primary_education_enrollment_country":102.6,"life_expectancy_country":72.7,"tax_revenue_country_country":11.4,"total_tax_rate_country":46.2,"population_country":144373535.0,"latitude_country":61.52401,"longitude_country":105.318756},{"rank":92,"finalWorth":18000,"category":"Finance & Investments","personName":"Daniel Gilbert","age":61.0,"country":"United States","city":"Franklin","source":"Quicken Loans","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"1\/17\/1962 0:00","lastName":"Gilbert","firstName":"Daniel","title":null,"date":"4\/4\/2023 5:01","state":"Michigan","residenceStateRegion":"Midwest","birthYear":1962.0,"birthMonth":1.0,"birthDay":17.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":93,"finalWorth":17700,"category":"Metals & Mining","personName":"Lakshmi Mittal","age":72.0,"country":"United Kingdom","city":"London","source":"Steel","industries":"Metals & Mining","countryOfCitizenship":"India","organization":"ArcelorMittal (ADR)","selfMade":false,"status":"D","gender":"M","birthDate":"6\/15\/1950 0:00","lastName":"Mittal","firstName":"Lakshmi","title":"Chairman and CEO","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1950.0,"birthMonth":6.0,"birthDay":15.0,"cpi_country":119.62,"cpi_change_country":1.7,"gdp_country":"$2,827,113,184,696 ","gross_tertiary_education_enrollment":60.0,"gross_primary_education_enrollment_country":101.2,"life_expectancy_country":81.3,"tax_revenue_country_country":25.5,"total_tax_rate_country":30.6,"population_country":66834405.0,"latitude_country":55.378051,"longitude_country":-3.435973},{"rank":94,"finalWorth":17500,"category":"Finance & Investments","personName":"Steve Cohen","age":66.0,"country":"United States","city":"Greenwich","source":"Hedge funds","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":"Point72 Asset Management","selfMade":true,"status":"U","gender":"M","birthDate":"6\/11\/1956 0:00","lastName":"Cohen","firstName":"Steve","title":"Founder","date":"4\/4\/2023 5:01","state":"Connecticut","residenceStateRegion":"Northeast","birthYear":1956.0,"birthMonth":6.0,"birthDay":11.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":94,"finalWorth":17500,"category":"Finance & Investments","personName":"Carl Icahn","age":87.0,"country":"United States","city":"Indian Creek","source":"Investments","industries":"Finance & Investments","countryOfCitizenship":"United States","organization":"Icahn Capital Management","selfMade":true,"status":"U","gender":"M","birthDate":"2\/16\/1936 0:00","lastName":"Icahn","firstName":"Carl","title":"Founder","date":"4\/4\/2023 5:01","state":"Florida","residenceStateRegion":"South","birthYear":1936.0,"birthMonth":2.0,"birthDay":16.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":94,"finalWorth":17500,"category":"Metals & Mining","personName":"Savitri Jindal & family","age":73.0,"country":"India","city":"Hisar","source":"Steel","industries":"Metals & Mining","countryOfCitizenship":"India","organization":null,"selfMade":false,"status":"D","gender":"F","birthDate":"3\/20\/1950 0:00","lastName":"Jindal","firstName":"Savitri","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1950.0,"birthMonth":3.0,"birthDay":20.0,"cpi_country":180.44,"cpi_change_country":7.7,"gdp_country":"$2,611,000,000,000 ","gross_tertiary_education_enrollment":28.1,"gross_primary_education_enrollment_country":113.0,"life_expectancy_country":69.4,"tax_revenue_country_country":11.2,"total_tax_rate_country":49.7,"population_country":1366417754.0,"latitude_country":20.593684,"longitude_country":78.96288},{"rank":97,"finalWorth":17400,"category":"Real Estate","personName":"Donald Bren","age":90.0,"country":"United States","city":"Newport Beach","source":"Real estate","industries":"Real Estate","countryOfCitizenship":"United States","organization":"Irvine Company","selfMade":true,"status":"U","gender":"M","birthDate":"5\/11\/1932 0:00","lastName":"Bren","firstName":"Donald","title":"Chairman","date":"4\/4\/2023 5:01","state":"California","residenceStateRegion":"West","birthYear":1932.0,"birthMonth":5.0,"birthDay":11.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":97,"finalWorth":17400,"category":"Fashion & Retail","personName":"John Menard, Jr.","age":83.0,"country":"United States","city":"Eau Claire","source":"Home improvement stores","industries":"Fashion & Retail","countryOfCitizenship":"United States","organization":"Menard, Inc.","selfMade":true,"status":"U","gender":"M","birthDate":"1\/22\/1940 0:00","lastName":"Menard","firstName":"John","title":"Founder","date":"4\/4\/2023 5:01","state":"Wisconsin","residenceStateRegion":"Midwest","birthYear":1940.0,"birthMonth":1.0,"birthDay":22.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":99,"finalWorth":17100,"category":"Media & Entertainment","personName":"Rupert Murdoch & family","age":92.0,"country":"United States","city":"New York","source":"Newspapers, TV network","industries":"Media & Entertainment","countryOfCitizenship":"United States","organization":"News Corp Class A","selfMade":false,"status":"D","gender":"M","birthDate":"3\/11\/1931 0:00","lastName":"Murdoch","firstName":"Rupert","title":"Chairman and CEO","date":"4\/4\/2023 5:01","state":"New York","residenceStateRegion":"Northeast","birthYear":1931.0,"birthMonth":3.0,"birthDay":11.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":100,"finalWorth":16700,"category":"Finance & Investments","personName":"Vicky Safra & family","age":70.0,"country":"Switzerland","city":"Crans-Montana","source":"Banking","industries":"Finance & Investments","countryOfCitizenship":"Brazil","organization":null,"selfMade":false,"status":"U","gender":"F","birthDate":"1\/1\/1953 0:00","lastName":"Safra","firstName":"Vicky","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1953.0,"birthMonth":1.0,"birthDay":1.0,"cpi_country":99.55,"cpi_change_country":0.4,"gdp_country":"$703,082,435,360 ","gross_tertiary_education_enrollment":59.6,"gross_primary_education_enrollment_country":105.2,"life_expectancy_country":83.6,"tax_revenue_country_country":10.1,"total_tax_rate_country":28.8,"population_country":8574832.0,"latitude_country":46.818188,"longitude_country":8.227512},{"rank":101,"finalWorth":16500,"category":"Fashion & Retail","personName":"Theo Albrecht, Jr. & family","age":72.0,"country":"Germany","city":"Mulheim an der Ruhr","source":"Aldi, Trader Joe's","industries":"Fashion & Retail","countryOfCitizenship":"Germany","organization":null,"selfMade":false,"status":"D","gender":"M","birthDate":"1\/1\/1951 0:00","lastName":"Albrecht","firstName":"Theo","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1951.0,"birthMonth":1.0,"birthDay":1.0,"cpi_country":112.85,"cpi_change_country":1.4,"gdp_country":"$3,845,630,030,824 ","gross_tertiary_education_enrollment":70.2,"gross_primary_education_enrollment_country":104.0,"life_expectancy_country":80.9,"tax_revenue_country_country":11.5,"total_tax_rate_country":48.8,"population_country":83132799.0,"latitude_country":51.165691,"longitude_country":10.451526},{"rank":101,"finalWorth":16500,"category":"Finance & Investments","personName":"Renata Kellnerova & family","age":55.0,"country":"Czech Republic","city":"Prague","source":"Finance, telecommunications","industries":"Finance & Investments","countryOfCitizenship":"Czech Republic","organization":null,"selfMade":false,"status":"D","gender":"F","birthDate":"7\/4\/1967 0:00","lastName":"Kellnerova","firstName":"Renata","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1967.0,"birthMonth":7.0,"birthDay":4.0,"cpi_country":116.48,"cpi_change_country":2.8,"gdp_country":"$246,489,245,495 ","gross_tertiary_education_enrollment":64.1,"gross_primary_education_enrollment_country":100.7,"life_expectancy_country":79.0,"tax_revenue_country_country":14.9,"total_tax_rate_country":46.1,"population_country":10669709.0,"latitude_country":49.817492,"longitude_country":15.472962},{"rank":103,"finalWorth":16300,"category":"Healthcare","personName":"Li Xiting","age":72.0,"country":"China","city":"Shenzhen","source":"medical devices","industries":"Healthcare","countryOfCitizenship":"Singapore","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"1\/1\/1951 0:00","lastName":"Li","firstName":"Xiting","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1951.0,"birthMonth":1.0,"birthDay":1.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":104,"finalWorth":16200,"category":"Fashion & Retail","personName":"Stefan Persson","age":75.0,"country":"Sweden","city":"Stockholm","source":"H&M","industries":"Fashion & Retail","countryOfCitizenship":"Sweden","organization":"Hennes & Mauritz Unsponsored ADR","selfMade":false,"status":"D","gender":"M","birthDate":"10\/4\/1947 0:00","lastName":"Persson","firstName":"Stefan","title":"Chairman","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1947.0,"birthMonth":10.0,"birthDay":4.0,"cpi_country":110.51,"cpi_change_country":1.8,"gdp_country":"$530,832,908,738 ","gross_tertiary_education_enrollment":67.0,"gross_primary_education_enrollment_country":126.6,"life_expectancy_country":82.5,"tax_revenue_country_country":27.9,"total_tax_rate_country":49.1,"population_country":10285453.0,"latitude_country":60.128161,"longitude_country":18.643501},{"rank":104,"finalWorth":16200,"category":"Technology","personName":"Eric Schmidt","age":67.0,"country":"United States","city":"Atherton","source":"Google","industries":"Technology","countryOfCitizenship":"United States","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"4\/27\/1955 0:00","lastName":"Schmidt","firstName":"Eric","title":null,"date":"4\/4\/2023 5:01","state":"California","residenceStateRegion":"West","birthYear":1955.0,"birthMonth":4.0,"birthDay":27.0,"cpi_country":117.24,"cpi_change_country":7.5,"gdp_country":"$21,427,700,000,000 ","gross_tertiary_education_enrollment":88.2,"gross_primary_education_enrollment_country":101.8,"life_expectancy_country":78.5,"tax_revenue_country_country":9.6,"total_tax_rate_country":36.6,"population_country":328239523.0,"latitude_country":37.09024,"longitude_country":-95.712891},{"rank":106,"finalWorth":16000,"category":"Finance & Investments","personName":"Michael Platt","age":55.0,"country":"Switzerland","city":"Geneva","source":"Hedge funds","industries":"Finance & Investments","countryOfCitizenship":"United Kingdom","organization":"BlueCrest Capital Management","selfMade":true,"status":"U","gender":"M","birthDate":"3\/18\/1968 0:00","lastName":"Platt","firstName":"Michael","title":"Founder ","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1968.0,"birthMonth":3.0,"birthDay":18.0,"cpi_country":99.55,"cpi_change_country":0.4,"gdp_country":"$703,082,435,360 ","gross_tertiary_education_enrollment":59.6,"gross_primary_education_enrollment_country":105.2,"life_expectancy_country":83.6,"tax_revenue_country_country":10.1,"total_tax_rate_country":28.8,"population_country":8574832.0,"latitude_country":46.818188,"longitude_country":8.227512},{"rank":107,"finalWorth":15900,"category":"Food & Beverage","personName":"Pang Kang","age":67.0,"country":"China","city":"Foshan","source":"Soy sauce","industries":"Food & Beverage","countryOfCitizenship":"China","organization":null,"selfMade":true,"status":"D","gender":"M","birthDate":"1\/19\/1956 0:00","lastName":"Pang","firstName":"Kang","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1956.0,"birthMonth":1.0,"birthDay":19.0,"cpi_country":125.08,"cpi_change_country":2.9,"gdp_country":"$19,910,000,000,000 ","gross_tertiary_education_enrollment":50.6,"gross_primary_education_enrollment_country":100.2,"life_expectancy_country":77.0,"tax_revenue_country_country":9.4,"total_tax_rate_country":59.2,"population_country":1397715000.0,"latitude_country":35.86166,"longitude_country":104.195397},{"rank":108,"finalWorth":15800,"category":"Fashion & Retail","personName":"Karl Albrecht Jr. & family","age":null,"country":"Germany","city":null,"source":"Supermarkets","industries":"Fashion & Retail","countryOfCitizenship":"Germany","organization":null,"selfMade":false,"status":"Split Family Fortune","gender":"M","birthDate":null,"lastName":"Albrecht Jr.","firstName":"Karl","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":null,"birthMonth":null,"birthDay":null,"cpi_country":112.85,"cpi_change_country":1.4,"gdp_country":"$3,845,630,030,824 ","gross_tertiary_education_enrollment":70.2,"gross_primary_education_enrollment_country":104.0,"life_expectancy_country":80.9,"tax_revenue_country_country":11.5,"total_tax_rate_country":48.8,"population_country":83132799.0,"latitude_country":51.165691,"longitude_country":10.451526},{"rank":108,"finalWorth":15800,"category":"Fashion & Retail","personName":"Beate Heister","age":null,"country":null,"city":null,"source":"Supermarkets","industries":"Fashion & Retail","countryOfCitizenship":"Germany","organization":null,"selfMade":false,"status":"Split Family Fortune","gender":"F","birthDate":null,"lastName":"Heister","firstName":"Beate","title":null,"date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":null,"birthMonth":null,"birthDay":null,"cpi_country":null,"cpi_change_country":null,"gdp_country":null,"gross_tertiary_education_enrollment":null,"gross_primary_education_enrollment_country":null,"life_expectancy_country":null,"tax_revenue_country_country":null,"total_tax_rate_country":null,"population_country":null,"latitude_country":null,"longitude_country":null},{"rank":108,"finalWorth":15800,"category":"Food & Beverage","personName":"Jorge Paulo Lemann & family","age":83.0,"country":"Switzerland","city":"Zurich","source":"Beer","industries":"Food & Beverage","countryOfCitizenship":"Brazil","organization":null,"selfMade":true,"status":"U","gender":"M","birthDate":"8\/26\/1939 0:00","lastName":"Lemann","firstName":"Jorge Paulo","title":"Investor, Philanthropist","date":"4\/4\/2023 5:01","state":null,"residenceStateRegion":null,"birthYear":1939.0,"birthMonth":8.0,"birthDay":26.0,"cpi_country":99.55,"cpi_change_country":0.4,"gdp_country":"$703,082,435,360 ","gross_tertiary_education_enrollment":59.6,"gross_primary_education_enrollment_country":105.2,"life_expectancy_country":83.6,"tax_revenue_country_country":10.1,"total_tax_rate_country":28.8,"population_country":8574832.0,"latitude_country":46.818188,"longitude_country":8.227512}];


  const gridOptions = {
    rowData: _data,
    columnDefs: _col,
    defaultColDef: {
      width: 120,
      enableRowGroup: true,
      enablePivot: true,
      enableValue: true,
      filter: true,
    },
    autoGroupColumnDef: {
      minWidth: 200,
    },
    sideBar: true,
    rowGroupPanelShow: 'always',
    pivotPanelShow: 'always',
    pagination: true,
    rowSelection: 'multiple',
    enableCharts: true,
    enableRangeSelection: true,
  };

  // Your Javascript code to create the grid
  const myGridElement = document.querySelector('#myGrid');
  gridAPI = agGrid.createGrid(myGridElement, gridOptions);

  function onFilterTextBoxChanged() {
    gridAPI.setGridOption(
      'quickFilterText',
      document.getElementById('filter-text-box').value
    );

  }

  // var r = document.querySelector(':root');
  // r.style.setProperty('--ag-menu-background-color', '#aaa');
  // var rs = getComputedStyle(r);
  // rs.getPropertyValue('--blue');
</script>

</html>